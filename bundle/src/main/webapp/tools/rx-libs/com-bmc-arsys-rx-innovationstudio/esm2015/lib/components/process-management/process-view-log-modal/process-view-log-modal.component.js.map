{"version":3,"file":"process-view-log-modal.component.js","sourceRoot":"","sources":["../../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/process-management/process-view-log-modal/process-view-log-modal.component.ts","../../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/process-management/process-view-log-modal/process-view-log-modal.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,eAAe,CAAC;AAClD,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,MAAM,EAAE,MAAM,YAAY,CAAC;AACpC,OAAO,EAAE,qBAAqB,EAAE,MAAM,4BAA4B,CAAC;AACnE,OAAO,EAAE,wBAAwB,EAAE,MAAM,6BAA6B,CAAC;;;;;;;AAOvE,MAAM,OAAO,4BAA4B;IAOvC,YACS,cAA8B,EAC9B,gBAAkC,EACjC,MAAc,EACd,qBAA4C,EAC5C,wBAAkD;QAJnD,mBAAc,GAAd,cAAc,CAAgB;QAC9B,qBAAgB,GAAhB,gBAAgB,CAAkB;QACjC,WAAM,GAAN,MAAM,CAAQ;QACd,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,6BAAwB,GAAxB,wBAAwB,CAA0B;QAT5D,oBAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC7C,mFAAmF,CACpF,CAAC;QASA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC;IACvD,CAAC;IAED,WAAW;QACT,IAAI,CAAC,wBAAwB;aAC1B,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,qBAAqB,EAAE,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC,UAAU,CAAC;aAC1G,SAAS,CAAC,CAAC,UAAU,EAAE,EAAE;YACxB,IAAI,CAAA,UAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,IAAI,IAAG,CAAC,EAAE;gBACxB,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,UAAU,CAAC,EAAE;oBAClC,IAAI,EAAE,UAAU,CAAC,IAAI;iBACtB,CAAC,CAAC;gBAEH,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,GAAG,EAAE;oBACjC,MAAM,CAAC,IAAI,EAAE,aAAa,CAAC,CAAC;gBAC9B,CAAC,CAAC,CAAC;aACJ;iBAAM;gBACL,IAAI,CAAC,qBAAqB,CAAC,cAAc,CACvC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC3B,mFAAmF,CACpF,EACD,EAAE,CACH,CAAC;aACH;QACH,CAAC,CAAC,CAAC;IACP,CAAC;;4IAtCU,4BAA4B;gIAA5B,4BAA4B,iECZzC,gwBA0BA;2FDda,4BAA4B;kBALxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2BAA2B;oBACrC,WAAW,EAAE,yCAAyC;oBACtD,SAAS,EAAE,CAAC,yCAAyC,CAAC;iBACvD","sourcesContent":["import { Component, NgZone } from '@angular/core';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { saveAs } from 'file-saver';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { RxProcessInstanceService } from '@helix/platform/process/api';\n\n@Component({\n  selector: 'ax-process-view-log-modal',\n  templateUrl: './process-view-log-modal.component.html',\n  styleUrls: ['./process-view-log-modal.component.scss']\n})\nexport class ProcessViewLogModalComponent {\n  logs: string;\n\n  emptyStateLabel = this.translateService.instant(\n    'com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.no-log.label'\n  );\n\n  constructor(\n    public activeModalRef: ActiveModalRef,\n    public translateService: TranslateService,\n    private ngZone: NgZone,\n    private rxNotificationService: RxNotificationService,\n    private rxProcessInstanceService: RxProcessInstanceService\n  ) {\n    this.logs = this.activeModalRef.getData().logContent;\n  }\n\n  downloadLog(): void {\n    this.rxProcessInstanceService\n      .downloadLog(this.activeModalRef.getData().processDefinitionName, this.activeModalRef.getData().instanceId)\n      .subscribe((fileStream) => {\n        if (fileStream?.size > 0) {\n          const file = new Blob([fileStream], {\n            type: fileStream.type\n          });\n\n          this.ngZone.runOutsideAngular(() => {\n            saveAs(file, 'process.log');\n          });\n        } else {\n          this.rxNotificationService.addInfoMessage(\n            this.translateService.instant(\n              'com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.no-log.label'\n            ),\n            ''\n          );\n        }\n      });\n  }\n}\n","<div class=\"modal-body\">\n  <textarea class=\"form-control\" readonly *ngIf=\"this.logs\">{{ logs }}</textarea>\n  <adapt-empty-state [type]=\"'config'\" [label]=\"emptyStateLabel\" *ngIf=\"!this.logs\"> </adapt-empty-state>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    rx-id=\"download-log-button\"\n    *ngIf=\"this.logs\"\n    (click)=\"downloadLog()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.download.label' | translate }}\n  </button>\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"close-button\"\n    (click)=\"activeModalRef.dismiss()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n"]}