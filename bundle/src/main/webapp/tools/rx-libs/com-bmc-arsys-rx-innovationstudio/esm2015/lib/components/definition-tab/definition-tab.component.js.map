{"version":3,"file":"definition-tab.component.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/definition-tab/definition-tab.component.ts","../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/definition-tab/definition-tab.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { IRecordDefinition } from '@helix/platform/record/api';\nimport {\n  DefinitionType,\n  IBundleDescriptor,\n  IDataPageResult,\n  IDefinition,\n  RX_APPLICATION,\n  RxBundleCacheService,\n  RxSessionExpirationService\n} from '@helix/platform/shared/api';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  ColumnSortDirection,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { cloneDeep, intersectionBy, map } from 'lodash';\nimport { NEVER, Observable, of, ReplaySubject, Subscription } from 'rxjs';\nimport { switchMapTo, takeUntil } from 'rxjs/operators';\nimport { AX_BUNDLE_DETAILS } from '../bundle-details/bundle-details.constant';\nimport { IDefinitionActionConfig } from '../bundle-details/bundle-details.types';\nimport { RxGainsightConfiguratorService } from '@helix/platform/shared/components';\n\n@Component({\n  selector: 'ax-definition-tab',\n  templateUrl: './definition-tab.component.html',\n  styleUrls: ['./definition-tab.component.scss']\n})\nexport class DefinitionTabComponent implements OnInit, OnDestroy, OnChanges {\n  @ViewChild('customizationStatusCellTemplate', { static: true })\n  customizationStatusCellTemplate: TemplateRef<any>;\n\n  @ViewChild('isEnabledCellTemplate', { static: true })\n  isEnabledCellTemplate: TemplateRef<any>;\n\n  @ViewChild('nameCellTemplate', { static: true })\n  nameCellTemplate: TemplateRef<any>;\n\n  @ViewChild('scopeCellTemplate', { static: true })\n  scopeCellTemplate: TemplateRef<any>;\n\n  @ViewChild(RecordGridComponent, { static: true })\n  recordGrid: RecordGridComponent;\n\n  @Input()\n  isActionInProgress: boolean;\n\n  @Input()\n  definitionType: DefinitionType;\n\n  @Input()\n  set definitionActions(definitionActions: IDefinitionActionConfig[]) {\n    this._definitionActions = (definitionActions || []).map((definitionAction) => ({\n      ...(AX_BUNDLE_DETAILS.standardDefinitionActions[definitionAction.id] || {}),\n      ...definitionAction\n    }));\n  }\n\n  get definitionActions(): IDefinitionActionConfig[] {\n    return this._definitionActions;\n  }\n\n  @Input()\n  set gridColumns(columns: IRecordGridColumn[]) {\n    this._gridColumns = columns.map((column) => {\n      const columnConfig = { ...column, title: this.translateService.instant(column.title) };\n\n      if (column.fieldId === AX_BUNDLE_DETAILS.definitionGridColumns.customizationPerspective.fieldId) {\n        columnConfig.cellTemplate = this.customizationStatusCellTemplate;\n      } else if (column.fieldId === AX_BUNDLE_DETAILS.definitionGridColumns.isEnabled.fieldId) {\n        columnConfig.cellTemplate = this.isEnabledCellTemplate;\n      } else if (column.fieldId === AX_BUNDLE_DETAILS.definitionGridColumns.name.fieldId && !column.cellTemplate) {\n        columnConfig.cellTemplate = this.nameCellTemplate;\n      } else if (column.fieldId === AX_BUNDLE_DETAILS.definitionGridColumns.scope.fieldId && !column.cellTemplate) {\n        columnConfig.cellTemplate = this.scopeCellTemplate;\n      }\n\n      if (column.fieldId === AX_BUNDLE_DETAILS.definitionGridColumns.lastUpdateTime.fieldId) {\n        columnConfig.sortable = { direction: ColumnSortDirection.Desc, priority: 0 };\n      }\n\n      return columnConfig;\n    });\n  }\n\n  get gridColumns(): IRecordGridColumn[] {\n    return this._gridColumns;\n  }\n\n  @Input()\n  definitions$: Observable<IDataPageResult<IDefinition>>;\n\n  @Input()\n  recordDefinition: Partial<IRecordDefinition>;\n\n  @Input()\n  editRouterLink: string;\n\n  @Output()\n  customAction = new EventEmitter<{ actionId: string; selectedRows: IRowDataItem[] }>();\n\n  @Output()\n  deleteDefinition = new EventEmitter<IRowDataItem[]>();\n\n  @Output()\n  renameDefinition = new EventEmitter<{ selectedRow: IRowDataItem; definitionNames: string[] }>();\n\n  @Output()\n  revertCustomization = new EventEmitter<IRowDataItem[]>();\n\n  @Output()\n  copyDefinition = new EventEmitter<IRowDataItem>();\n\n  @Output()\n  addDefinition = new EventEmitter<void>();\n\n  @Output()\n  rowSelectionChanged = new EventEmitter<IRowDataItem[]>();\n\n  recordGridConfig$: Observable<IRecordGridConfig>;\n  busySubscription: Subscription;\n  bundleDescriptor: IBundleDescriptor;\n\n  private _definitionActions: IDefinitionActionConfig[];\n  private _gridColumns: IRecordGridColumn[];\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  constructor(\n    private translateService: TranslateService,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxSessionExpirationService: RxSessionExpirationService,\n    private rxGainsightConfiguratorService: RxGainsightConfiguratorService\n  ) {}\n\n  ngOnInit() {\n    this.editRouterLink ??= `/${RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit/`;\n\n    this.recordGridConfig$ = of({\n      guid: `ax-${this.definitionType}-definitions-grid`,\n      enableRowSelection: RowSelectionMode.Multiple,\n      getRecordDefinition: () => of(this.recordDefinition),\n      columns: this.gridColumns,\n      enableFiltering: false,\n      useExternalFiltering: false,\n      recordIdField: AX_BUNDLE_DETAILS.definitionGridColumns.name.fieldId,\n      styles: 'flex-fill',\n      getData: () => this.rxSessionExpirationService.keepSessionAlive().pipe(switchMapTo(this.definitions$)),\n      emptyStateLabelText: this.translateService.instant(\n        'com.bmc.arsys.rx.innovation-studio.definition-tab.no-definition.label'\n      )\n    });\n\n    this.recordGrid.rowSelectionChanged.pipe(takeUntil(this.destroyed$)).subscribe((selectedRows) => {\n      this.rowSelectionChanged.emit(cloneDeep(selectedRows));\n    });\n\n    this.rxBundleCacheService\n      .getCurrentBundleDescriptor()\n      .subscribe((bundleDescriptor) => (this.bundleDescriptor = bundleDescriptor));\n\n    this.rxGainsightConfiguratorService.updateGlobalContext({\n      subProductLevel1: {\n        name: 'Design'\n      },\n      subProductLevel2: {\n        name: 'Bundle workspace'\n      }\n    });\n  }\n\n  onClick(actionId: string): void {\n    switch (actionId) {\n      case AX_BUNDLE_DETAILS.standardDefinitionActionNames.copy:\n        this.copyDefinition.emit(this.recordGrid.api.getFirstSelectedRow());\n        break;\n\n      case AX_BUNDLE_DETAILS.standardDefinitionActionNames.delete:\n        this.deleteDefinition.emit(this.recordGrid.api.getSelectedRows());\n        break;\n\n      case AX_BUNDLE_DETAILS.standardDefinitionActionNames.revertCustomization:\n        this.revertCustomization.emit(this.recordGrid.api.getSelectedRows());\n        break;\n\n      case AX_BUNDLE_DETAILS.standardDefinitionActionNames.rename:\n        this.renameDefinition.emit({\n          selectedRow: this.recordGrid.api.getFirstSelectedRow(),\n          definitionNames: map(\n            this.recordGrid.adaptTableConfig.data,\n            AX_BUNDLE_DETAILS.definitionGridColumns.name.fieldId\n          )\n        });\n        break;\n\n      case AX_BUNDLE_DETAILS.standardDefinitionActionNames.new:\n        this.addDefinition.emit();\n        break;\n\n      default:\n        this.customAction.emit({ actionId, selectedRows: this.recordGrid.api.getSelectedRows() });\n        break;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.isActionInProgress?.currentValue === true) {\n      this.busySubscription = NEVER.subscribe();\n    } else {\n      this.busySubscription?.unsubscribe();\n    }\n  }\n\n  trackByFn(definitionAction: IDefinitionActionConfig): string {\n    return definitionAction.id;\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n\n    this.rxGainsightConfiguratorService.removeGlobalContext(['subProductLevel2']);\n  }\n\n  getDeleteSelectedDefinitionMessage(): string {\n    const selectedRows = this.recordGrid.api.getSelectedRows();\n\n    const visibleRows = this.recordGrid.api.getVisibleRows();\n\n    const areAllSelectedRowsVisible =\n      intersectionBy(selectedRows, visibleRows, (row) => row.name).length === selectedRows.length;\n\n    let message: string;\n\n    if (selectedRows.length > 1) {\n      if (areAllSelectedRowsVisible) {\n        message = this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.delete-definitions-confirmation.message'\n        );\n      } else {\n        message = this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.delete-hidden-definitions-confirmation.message',\n          {\n            count: selectedRows.length\n          }\n        );\n      }\n    } else {\n      if (areAllSelectedRowsVisible) {\n        message = this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.delete-definition-confirmation.message'\n        );\n      } else {\n        message = this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.delete-hidden-definition-confirmation.message'\n        );\n      }\n    }\n\n    return message;\n  }\n}\n","<div class=\"d-flex flex-row ml-1\">\n  <ng-container *ngFor=\"let toolbarItem of definitionActions; trackBy: trackByFn\">\n    <ng-container *ngIf=\"toolbarItem.subActions?.length\">\n      <div class=\"dropdown\" adaptDropdown placement=\"bottom-left\">\n        <button\n          adapt-button\n          btn-type=\"tertiary\"\n          [disabled]=\"toolbarItem.isDisabled\"\n          adaptDropdownToggle\n          [attr.rx-id]=\"toolbarItem.rxId\"\n          class=\"pl-0 ml-4\"\n        >\n          <adapt-icon [name]=\"toolbarItem.icon\"></adapt-icon>\n\n          {{ toolbarItem.labelKey | translate }}\n        </button>\n\n        <div class=\"dropdown-menu\" adaptDropdownMenu>\n          <ng-container *ngFor=\"let dropdownItem of toolbarItem.subActions\">\n            <div *ngIf=\"dropdownItem.groupTitle\" class=\"dropdown-header\">{{ dropdownItem.groupTitle }}</div>\n            <button\n              *ngIf=\"!dropdownItem.groupTitle\"\n              class=\"dropdown-item\"\n              (click)=\"onClick(dropdownItem.id)\"\n              [attr.rx-id]=\"dropdownItem.rxId\"\n            >\n              {{ dropdownItem.labelKey | translate }}\n            </button>\n          </ng-container>\n        </div>\n      </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"!toolbarItem.subActions?.length\">\n      <button\n        adapt-button\n        btn-type=\"tertiary\"\n        [disabled]=\"toolbarItem.isDisabled\"\n        (click)=\"onClick(toolbarItem.id)\"\n        [attr.rx-id]=\"toolbarItem.rxId\"\n        class=\"px-3\"\n      >\n        <adapt-icon *ngIf=\"toolbarItem.icon\" [name]=\"toolbarItem.icon\"></adapt-icon>\n\n        {{ toolbarItem.labelKey | translate }}\n      </button>\n    </ng-container>\n  </ng-container>\n</div>\n\n<ng-template #nameCellTemplate let-dataItem=\"dataItem\">\n  <a [routerLink]=\"editRouterLink + dataItem.$ID$\">\n    {{ dataItem.name | rxDefinitionNamePipe }}\n  </a>\n</ng-template>\n\n<ng-template #customizationStatusCellTemplate let-dataItem=\"dataItem\">\n  {{ dataItem.customizationPerspective | rxCustomizationStatus }}\n</ng-template>\n\n<ng-template #isEnabledCellTemplate let-dataItem=\"dataItem\">\n  {{\n    (dataItem.isEnabled ? 'com.bmc.arsys.rx.client.common.yes.label' : 'com.bmc.arsys.rx.client.common.no.label')\n      | translate\n  }}\n</ng-template>\n\n<ng-template #scopeCellTemplate let-dataItem=\"dataItem\">\n  {{ dataItem.scope | rxDefinitionScopePipe: bundleDescriptor }}\n</ng-template>\n\n<rx-record-grid [config]=\"recordGridConfig$\"></rx-record-grid>\n\n<rx-busy-indicator [options]=\"{ busy: busySubscription }\"></rx-busy-indicator>\n"]}