{"version":3,"file":"bundle-definitions.component.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/bundle-definitions/bundle-definitions.component.ts","../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/bundle-definitions/bundle-definitions.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ActiveTabChangeEvent } from '@bmc-ux/adapt-angular';\nimport {\n  IBundleDescriptor,\n  RxBundleCacheService,\n  RxGlobalCacheService,\n  RxOverlayService,\n  RxPageTitleService\n} from '@helix/platform/shared/api';\nimport { findIndex } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map, pluck, take, tap } from 'rxjs/operators';\nimport { AX_BUNDLE_DETAILS } from '../bundle-details/bundle-details.constant';\nimport { BundleDefinitionTab } from '../bundle-details/bundle-details.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'ax-bundle-definitions',\n  templateUrl: './bundle-definitions.component.html',\n  styleUrls: ['./bundle-definitions.component.scss']\n})\nexport class BundleDefinitionsComponent {\n  tabs = AX_BUNDLE_DETAILS.tabs.map((tab) => ({\n    ...tab,\n    isVisited: false\n  }));\n\n  bundleDescriptor$: Observable<IBundleDescriptor> = this.rxBundleCacheService.getCurrentBundleDescriptor();\n\n  activeTabIndex$ = this.activatedRoute.params.pipe(\n    pluck('tab'),\n    map((tabId: BundleDefinitionTab) => findIndex(AX_BUNDLE_DETAILS.tabs, { id: tabId })),\n    tap((index) => {\n      if (index === -1) {\n        this.router.navigate([BundleDefinitionTab.Records], { relativeTo: this.activatedRoute.parent });\n      } else {\n        this.tabs[index].isVisited = true;\n        this.setPageTitle(AX_BUNDLE_DETAILS.tabs[index].titleKey);\n      }\n    })\n  );\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxOverlayService: RxOverlayService,\n    private rxPageTitleService: RxPageTitleService,\n    private translateService: TranslateService,\n    private router: Router\n  ) {}\n\n  onTabChanged(tabChangeEvent: ActiveTabChangeEvent): void {\n    const nextActiveTab = AX_BUNDLE_DETAILS.tabs[tabChangeEvent.index];\n\n    this.router.navigate([nextActiveTab.id], { relativeTo: this.activatedRoute.parent });\n  }\n\n  private setPageTitle(titleKey: string): void {\n    this.rxGlobalCacheService\n      .getBundleFriendlyName(this.rxBundleCacheService.bundleId)\n      .pipe(take(1))\n      .subscribe((bundleFriendlyName) => {\n        this.rxPageTitleService.set(\n          [this.translateService.instant(titleKey), bundleFriendlyName],\n          this.rxGlobalCacheService.applicationId\n        );\n      });\n  }\n}\n","<adapt-tabset\n  *ngIf=\"bundleDescriptor$ | async as bundleDescriptor\"\n  [tab-active]=\"activeTabIndex$ | async\"\n  [fullHeight]=\"true\"\n  (tab-active-changed)=\"onTabChanged($event)\"\n>\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[0].titleKey | translate\">\n    <ax-record-definition-tab\n      *ngIf=\"tabs[0].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-record-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[1].titleKey | translate\">\n    <ax-view-definition-tab *ngIf=\"tabs[1].isVisited\" [bundleDescriptor]=\"bundleDescriptor\"></ax-view-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[2].titleKey | translate\">\n    <ax-process-definition-tab\n      *ngIf=\"tabs[2].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-process-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[3].titleKey | translate\">\n    <ax-rule-definition-tab *ngIf=\"tabs[3].isVisited\" [bundleDescriptor]=\"bundleDescriptor\"></ax-rule-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[4].titleKey | translate\">\n    <ax-association-definition-tab\n      *ngIf=\"tabs[4].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-association-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[5].titleKey | translate\">\n    <ax-named-list-definition-tab\n      *ngIf=\"tabs[5].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-named-list-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[6].titleKey | translate\">\n    <ax-document-definition-tab\n      *ngIf=\"tabs[6].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-document-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[7].titleKey | translate\">\n    <ax-web-api-definition-tab\n      *ngIf=\"tabs[7].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-web-api-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[8].titleKey | translate\">\n    <ax-event-definition-tab *ngIf=\"tabs[8].isVisited\" [bundleDescriptor]=\"bundleDescriptor\"></ax-event-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[9].titleKey | translate\">\n    <ax-event-statistics-definition-tab\n      *ngIf=\"tabs[9].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-event-statistics-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[10].titleKey | translate\">\n    <ax-chatbot-definition-tab\n      *ngIf=\"tabs[10].isVisited\"\n      [bundleDescriptor]=\"bundleDescriptor\"\n    ></ax-chatbot-definition-tab>\n  </adapt-tab-panel>\n\n  <adapt-tab-panel [adapt-tab-title]=\"tabs[11].titleKey | translate\">\n    <ax-configuration-definition-tab *ngIf=\"tabs[11].isVisited\"></ax-configuration-definition-tab>\n  </adapt-tab-panel>\n</adapt-tabset>\n"]}