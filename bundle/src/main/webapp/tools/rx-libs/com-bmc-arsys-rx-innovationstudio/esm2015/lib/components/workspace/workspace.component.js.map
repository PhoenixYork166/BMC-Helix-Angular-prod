{"version":3,"file":"workspace.component.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/workspace/workspace.component.ts","../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/workspace/workspace.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,UAAU,EAAqB,SAAS,EAAE,WAAW,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAC5G,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,iBAAiB,EAAiB,MAAM,uBAAuB,CAAC;AAEzE,OAAO,EAEL,cAAc,EACd,SAAS,EACT,oBAAoB,EACpB,oBAAoB,EACpB,qBAAqB,EACrB,gBAAgB,EAChB,kBAAkB,EAClB,uBAAuB,EACxB,MAAM,4BAA4B,CAAC;AACpC,OAAO,EAAE,+BAA+B,EAAE,uBAAuB,EAAE,MAAM,wBAAwB,CAAC;AAClG,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,QAAQ,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,aAAa,EAAc,aAAa,EAAE,UAAU,EAAE,MAAM,MAAM,CAAC;AAC7F,OAAO,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AACjE,OAAO,EAAE,yBAAyB,EAAuC,MAAM,kCAAkC,CAAC;AAClH,OAAO,EAAE,0BAA0B,EAAE,MAAM,qDAAqD,CAAC;AACjG,OAAO,EAAE,gBAAgB,EAAE,oBAAoB,EAAE,MAAM,mBAAmB,CAAC;AAC3E,OAAO,EAAE,8BAA8B,EAAE,MAAM,mCAAmC,CAAC;;;;;;;;;;;AAOnF,MAAM,OAAO,kBAAkB;IAuG7B,YACU,oBAA0C,EAC1C,oBAA0C,EAC1C,gBAAkC,EAClC,kBAAsC,EACtC,gBAAkC,EAClC,uBAAgD,EAChD,qBAA4C,EAC5C,yBAAoD,EACpD,iBAAoC,EACpC,MAAc,EACd,QAAmB,EACnB,8BAA8D;QAX9D,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,4BAAuB,GAAvB,uBAAuB,CAAyB;QAChD,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,8BAAyB,GAAzB,yBAAyB,CAA2B;QACpD,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAW;QACnB,mCAA8B,GAA9B,8BAA8B,CAAgC;QAlHxE,4BAAuB,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;QAC/C,gBAAW,GAAG,SAAS,CAAC,WAAW,CAAC;QAEpC,oBAAe,GAAG,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAAE,CAAC;QACjE,gCAA2B,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC5C,sBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,EAAE,CAAC;QAClE,aAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,wBAAwB,EAAE,CAAC,QAAQ,CAAC;QACrE,mCAA8B,GAAG,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAC/F,6BAAwB,GAAG,cAAc,CAAC,wBAAwB,CAAC;QACnE,kBAAa,GAAG,IAAI,CAAC;QACrB,+BAA0B,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;QAE5C,UAAK,GAAqB;YACxB,mBAAmB,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAChD,wEAAwE,CACzE;SACF,CAAC;QAEM,qBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,kDAAkD,CAAC,CAAC;QACrG,wBAAmB,GAAG,IAAI,eAAe,CAAmB,gBAAgB,CAAC,GAAG,CAAC,CAAC;QAClF,eAAU,GAAG,IAAI,aAAa,CAAU,CAAC,CAAC,CAAC;QAC3C,4BAAuB,GAAG,IAAI,eAAe,CAAuB,oBAAoB,CAAC,QAAQ,CAAC,CAAC;QACnG,iBAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,8CAA8C,CAAC,CAAC;QAM7F,aAAQ,GAAG,IAAI,CAAC,oBAAoB,CAAC,oBAAoB,EAAE,CAAC,IAAI,CACtE,GAAG,CAAC,CAAC,iBAAsC,EAAE,EAAE,CAC7C,iBAAiB;aACd,MAAM,CACL,CAAC,gBAAgB,EAAE,EAAE,CACnB,gBAAgB,CAAC,EAAE,KAAK,cAAc,CAAC,gBAAgB;YACvD,gBAAgB,CAAC,EAAE,KAAK,cAAc,CAAC,WAAW;YAClD,gBAAgB,CAAC,EAAE,KAAK,cAAc,CAAC,wBAAwB;YAC/D,gBAAgB,CAAC,EAAE,KAAK,cAAc,CAAC,gBAAgB,CAC1D;aACA,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,iCACZ,MAAM,GACN;YACD,IAAI,EAAE,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY;YACtE,UAAU,EAAE,CAAC,IAAI,CAAC,iBAAiB,IAAI,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,MAAM,CAAC,EAAE,CAAC;SACjF,EACD,CAAC,CACN,EACD,GAAG,CAAC,GAAG,EAAE;YACP,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC7B,CAAC,CAAC,EACF,UAAU,CAAC,CAAC,KAAK,EAAE,EAAE;YACnB,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAE3B,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CACH,CAAC;QAEF,sBAAiB,GAAmC,aAAa,CAAC;YAChE,IAAI,CAAC,mBAAmB;YACxB,IAAI,CAAC,uBAAuB;YAC5B,IAAI,CAAC,QAAQ;SACd,CAAC,CAAC,IAAI,CACL,GAAG,CAAC,CAAC,CAAC,eAAe,EAAE,oBAAoB,EAAE,UAAU,CAAC,EAAE,EAAE,CAC1D,UAAU,CAAC,MAAM,CACf,CAAC,MAAM,EAAE,EAAE,CACT,CAAC,eAAe,KAAK,gBAAgB,CAAC,GAAG;YACvC,CAAC,eAAe,KAAK,gBAAgB,CAAC,YAAY,IAAI,MAAM,CAAC,aAAa,CAAC;YAC3E,CAAC,eAAe,KAAK,gBAAgB,CAAC,SAAS,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YAC5E,CAAC,oBAAoB,KAAK,oBAAoB,CAAC,GAAG,IAAI,MAAM,CAAC,UAAU,CAAC,CAC3E,CACF,EACD,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAC3B,CAAC;QAKF,6BAAwB,GAAG;YACzB;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,0CAA0C,CAAC;gBAC/E,KAAK,EAAE,gBAAgB,CAAC,GAAG;aAC5B;YACD;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mDAAmD,CAAC;gBACxF,KAAK,EAAE,gBAAgB,CAAC,YAAY;aACrC;YACD;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,gDAAgD,CAAC;gBACrF,KAAK,EAAE,gBAAgB,CAAC,SAAS;aAClC;SACF,CAAC;QAEF,iCAA4B,GAAG;YAC7B;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,0CAA0C,CAAC;gBAC/E,KAAK,EAAE,oBAAoB,CAAC,GAAG;aAChC;YACD;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,oEAAoE,CAAC;gBACzG,KAAK,EAAE,oBAAoB,CAAC,QAAQ;aACrC;SACF,CAAC;IAeC,CAAC;IAEJ,QAAQ;QACN,IAAI,CAAC,OAAO,GAAG;YACb;gBACE,KAAK,EAAE,cAAc;gBACrB,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,2CAA2C,CAAC;gBAClF,YAAY,EAAE,IAAI,CAAC,kBAAkB;aACtC;YACD,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,gDAAgD,CAAC,EAAE;YAC1G;gBACE,KAAK,EAAE,eAAe;gBACtB,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qEAAqE,CAAC;aAC7G;YACD;gBACE,KAAK,EAAE,gBAAgB;gBACvB,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,8CAA8C,CAAC;aACtF;YACD;gBACE,KAAK,EAAE,IAAI;gBACX,MAAM,EAAE,IAAI;aACb;SACF,CAAC;QAEF,IAAI,CAAC,uBAAuB,CAAC,oBAAoB,EAAE,CAAC,SAAS,CAAC,CAAC,iBAAiB,EAAE,EAAE;YAClF,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,CAAC,8BAA8B,CAAC,mBAAmB,CAAC;YACtD,gBAAgB,EAAE;gBAChB,IAAI,EAAE,QAAQ;aACf;YACD,gBAAgB,EAAE;gBAChB,IAAI,EAAE,WAAW;aAClB;SACF,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;QAE3B,IAAI,CAAC,8BAA8B,CAAC,mBAAmB,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;IAChF,CAAC;IAED,gBAAgB,CAAC,uBAAkC;QACjD,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,uBAAuB,EAAE,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAClH,CAAC;IAED,qBAAqB,CAAC,qBAAgC;QACpD,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAC/B,IAAI,CAAC,4BAA4B,CAAC,SAAS,CAAC,qBAAqB,EAAE,OAAO,CAAC,CAAC,CAAC,KAAK,CACnF,CAAC;IACJ,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,SAAS,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC;IAC9E,CAAC;IAED,gBAAgB,CAAC,KAAY;QAC3B,MAAM,OAAO,GAAG,KAAK,CAAC,MAA0B,CAAC;QACjD,OAAO,CAAC,KAAK,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,iBAAiB,CAAC,KAAY;;QAC5B,MAAM,KAAK,GAAG,OAAO,CAAE,KAAK,CAAC,MAA2B,CAAC,KAAK,CAAC,CAAC;QAEhE,MAAM,8BAA8B,GAAG;YACrC,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mEAAmE,CAAC;YACzG,MAAM,EAAE,uBAAuB,CAAC,UAAU;YAC1C,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,6DAA6D,CAAC;YACpG,SAAS,EAAE,MAAA,KAAK,CAAC,CAAC,CAAC,0CAAE,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC;YAChD,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,+DAA+D,CAAC;YACjH,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC5C,uEAAuE,CACxE;YACD,aAAa,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,mEAAmE,CAAC;YACjH,sBAAsB,EAAE,EAAE;SAC3B,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,+BAA+B,EAAE,8BAA8B,CAAC;aAC5E,IAAI,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;aACpC,KAAK,CAAC,IAAI,CAAC,CAAC;QAEf,IAAI,CAAC,yBAAyB;aAC3B,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;aACjB,IAAI,CACH,UAAU,CAAC,CAAC,KAAK,EAAE,EAAE;YACnB,8BAA8B,CAAC,MAAM,GAAG,uBAAuB,CAAC,MAAM,CAAC;YAEvE,8BAA8B,CAAC,eAAe,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAC5E,mEAAmE,CACpE,CAAC;YAEF,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CACH;aACA,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;YACtB,IAAI,CAAC,yBAAyB;iBAC3B,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;iBACvE,SAAS,CAAC,CAAC,gBAAmC,EAAE,EAAE;gBACjD,IAAI,gBAAgB,CAAC,UAAU,EAAE;oBAC/B,8BAA8B,CAAC,MAAM,GAAG,uBAAuB,CAAC,QAAQ,CAAC;oBAEzE,8BAA8B,CAAC,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,CACvG,gBAAgB,CAAC,sBAAsB,CACxC,CAAC;iBACH;qBAAM,IAAI,gBAAgB,CAAC,YAAY,EAAE;oBACxC,8BAA8B,CAAC,MAAM,GAAG,uBAAuB,CAAC,MAAM,CAAC;oBACvE,8BAA8B,CAAC,sBAAsB,GAAG,gBAAgB,CAAC,YAAY,CAAC;iBACvF;YACH,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,YAAY,CAAC,UAAkB;QAC7B,IAAI,CAAC,SAAS,CAAC,0BAA0B,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;aAC7D,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE;YACf,MAAM,QAAQ,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,QAAQ,CAAC;YAElC,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,oBAAoB,CAAC,KAAK,EAAE,CAAC;gBAElC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,wBAAwB,EAAE,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;oBAClF,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;gBAC3B,CAAC,CAAC,CAAC;gBAEH,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAC1C,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,kEAAkE,EAAE;oBAChG,UAAU,EAAE,UAAU,CAAC,WAAW,EAAE;iBACrC,CAAC,CACH,CAAC;aACH;QACH,CAAC,CAAC;aACD,KAAK,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC;IAEO,SAAS,CAAC,OAAY,EAAE,IAAS;QACvC,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC;YACjC,OAAO;YACP,IAAI;YACJ,IAAI,EAAE,IAAI;YACV,QAAQ,EAAE,IAAI;YACd,YAAY,EAAE,KAAK;SACpB,CAAC,CAAC;IACL,CAAC;IAEO,YAAY;QAClB,IAAI,CAAC,kBAAkB,CAAC,GAAG,CACzB,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,yDAAyD,CAAC,EACxF,IAAI,CAAC,oBAAoB,CAAC,aAAa,CACxC,CAAC;IACJ,CAAC;;kIA9QU,kBAAkB;sHAAlB,kBAAkB,qRC9B/B,ooIA2HA;2FD7Fa,kBAAkB;kBAL9B,SAAS;mBAAC;oBACT,QAAQ,EAAE,cAAc;oBACxB,WAAW,EAAE,4BAA4B;oBACzC,SAAS,EAAE,CAAC,4BAA4B,CAAC;iBAC1C;ydA4BC,SAAS;sBADR,SAAS;uBAAC,WAAW,EAAE,EAAE,MAAM,EAAE,KAAK,EAAE;gBAiDzC,kBAAkB;sBADjB,SAAS;uBAAC,oBAAoB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE","sourcesContent":["import { Component, ElementRef, OnDestroy, OnInit, Renderer2, TemplateRef, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AdaptModalService, ModalDeferred } from '@bmc-ux/adapt-angular';\nimport { ColumnConfig, DataCellTemplateParams, TableCustomTexts } from '@bmc-ux/adapt-table';\nimport {\n  IBundleDescriptor,\n  RX_APPLICATION,\n  RX_BUNDLE,\n  RxCurrentUserService,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService,\n  RxPageTitleService,\n  RxSmartReportingService\n} from '@helix/platform/shared/api';\nimport { ProgressIndicatorModalComponent, ProgressIndicatorStatus } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { findIndex, includes, last, noop, toArray } from 'lodash';\nimport { BehaviorSubject, combineLatest, Observable, ReplaySubject, throwError } from 'rxjs';\nimport { catchError, map, takeUntil, tap } from 'rxjs/operators';\nimport { AxBundleDeploymentService, IDeploymentStatus, IWorkspaceBundle } from '../../services/bundle-deployment';\nimport { CreateBundleModalComponent } from './create-bundle-modal/create-bundle-modal.component';\nimport { BundleTypeFilter, EditableBundleFilter } from './workspace.types';\nimport { RxGainsightConfiguratorService } from '@helix/platform/shared/components';\n\n@Component({\n  selector: 'ax-workspace',\n  templateUrl: './workspace.component.html',\n  styleUrls: ['./workspace.component.scss']\n})\nexport class WorkspaceComponent implements OnInit, OnDestroy {\n  bundleTypeSelectorModel = [true, false, false];\n  bundleTypes = RX_BUNDLE.bundleTypes;\n  columns: ColumnConfig[];\n  editableBundles = this.rxCurrentUserService.getEditableBundles();\n  editableBundleSelectorModel = [false, true];\n  isBusinessAnalyst = this.rxCurrentUserService.isBusinessAnalyst();\n  isShared = this.rxOverlayService.getCurrentOverlayContext().isShared;\n  isInstallBundleActionAvailable = this.rxCurrentUserService.isAdministrator() && !this.isShared;\n  innovationStudioBundleId = RX_APPLICATION.innovationStudioBundleId;\n  isLoadingData = true;\n  isNewBundleActionAvailable = !this.isShared;\n\n  texts: TableCustomTexts = {\n    emptyStateLabelText: this.translateService.instant(\n      'com.bmc.arsys.rx.innovation-studio.workspace.no-editable-bundles.label'\n    )\n  };\n\n  private applicationLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.application.label');\n  private bundleTypeSelector$ = new BehaviorSubject<BundleTypeFilter>(BundleTypeFilter.All);\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private editableBundleSelector$ = new BehaviorSubject<EditableBundleFilter>(EditableBundleFilter.Editable);\n  private libraryLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.library.label');\n  smartReportingUrl: string;\n\n  @ViewChild('fileInput', { static: false })\n  fileInput: ElementRef;\n\n  private bundles$ = this.rxGlobalCacheService.getBundleDescriptors().pipe(\n    map((bundleDescriptors: IBundleDescriptor[]) =>\n      bundleDescriptors\n        .filter(\n          (bundleDescriptor) =>\n            bundleDescriptor.id !== RX_APPLICATION.settingsBundleId &&\n            bundleDescriptor.id !== RX_APPLICATION.standardlib &&\n            bundleDescriptor.id !== RX_APPLICATION.innovationStudioBundleId &&\n            bundleDescriptor.id !== RX_APPLICATION.platformBundleId\n        )\n        .map((bundle) => ({\n          ...bundle,\n          ...{\n            type: bundle.isApplication ? this.applicationLabel : this.libraryLabel,\n            isEditable: !this.isBusinessAnalyst || includes(this.editableBundles, bundle.id)\n          }\n        }))\n    ),\n    tap(() => {\n      this.isLoadingData = false;\n    }),\n    catchError((error) => {\n      this.isLoadingData = false;\n\n      return throwError(error);\n    })\n  );\n\n  bundlesToDisplay$: Observable<IWorkspaceBundle[]> = combineLatest([\n    this.bundleTypeSelector$,\n    this.editableBundleSelector$,\n    this.bundles$\n  ]).pipe(\n    map(([bundleTypeFiler, editableBundleFilter, allBundles]) =>\n      allBundles.filter(\n        (bundle) =>\n          (bundleTypeFiler === BundleTypeFilter.All ||\n            (bundleTypeFiler === BundleTypeFilter.Applications && bundle.isApplication) ||\n            (bundleTypeFiler === BundleTypeFilter.Libraries && !bundle.isApplication)) &&\n          (editableBundleFilter === EditableBundleFilter.All || bundle.isEditable)\n      )\n    ),\n    takeUntil(this.destroyed$)\n  );\n\n  @ViewChild('nameColumnTemplate', { static: true })\n  nameColumnTemplate: TemplateRef<DataCellTemplateParams>;\n\n  bundleTypeSelectorConfig = [\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.client.common.all.label'),\n      value: BundleTypeFilter.All\n    },\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.client.common.applications.label'),\n      value: BundleTypeFilter.Applications\n    },\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.client.common.libraries.label'),\n      value: BundleTypeFilter.Libraries\n    }\n  ];\n\n  editableBundleSelectorConfig = [\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.client.common.all.label'),\n      value: EditableBundleFilter.All\n    },\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.bundle.editable.label'),\n      value: EditableBundleFilter.Editable\n    }\n  ];\n\n  constructor(\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxOverlayService: RxOverlayService,\n    private rxPageTitleService: RxPageTitleService,\n    private translateService: TranslateService,\n    private rxSmartReportingService: RxSmartReportingService,\n    private rxNotificationService: RxNotificationService,\n    private axBundleDeploymentService: AxBundleDeploymentService,\n    private adaptModalService: AdaptModalService,\n    private router: Router,\n    private renderer: Renderer2,\n    private rxGainsightConfiguratorService: RxGainsightConfiguratorService\n  ) {}\n\n  ngOnInit(): void {\n    this.columns = [\n      {\n        field: 'friendlyName',\n        header: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        cellTemplate: this.nameColumnTemplate\n      },\n      { field: 'type', header: this.translateService.instant('com.bmc.arsys.rx.client.common.item-type.label') },\n      {\n        field: 'developerName',\n        header: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.column.developer.label')\n      },\n      {\n        field: 'displayVersion',\n        header: this.translateService.instant('com.bmc.arsys.rx.client.common.version.label')\n      },\n      {\n        field: 'id',\n        hidden: true\n      }\n    ];\n\n    this.rxSmartReportingService.getSmartReportingUrl().subscribe((smartReportingUrl) => {\n      this.smartReportingUrl = smartReportingUrl;\n    });\n\n    this.setPageTitle();\n\n    this.rxGainsightConfiguratorService.updateGlobalContext({\n      subProductLevel1: {\n        name: 'Design'\n      },\n      subProductLevel2: {\n        name: 'Workspace'\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n\n    this.rxGainsightConfiguratorService.removeGlobalContext(['subProductLevel2']);\n  }\n\n  updateBundleType(bundleTypeSelectorModel: boolean[]): void {\n    this.bundleTypeSelector$.next(this.bundleTypeSelectorConfig[findIndex(bundleTypeSelectorModel, Boolean)].value);\n  }\n\n  toggleEditableBundles(editableSelectorModel: boolean[]) {\n    this.editableBundleSelector$.next(\n      this.editableBundleSelectorConfig[findIndex(editableSelectorModel, Boolean)].value\n    );\n  }\n\n  openFileDialog(): void {\n    this.renderer.selectRootElement(this.fileInput.nativeElement, true).click();\n  }\n\n  onClickFileInput(event: Event) {\n    const element = event.target as HTMLInputElement;\n    element.value = '';\n  }\n\n  onChangeFileInput(event: Event): void {\n    const files = toArray((event.target as HTMLInputElement).files);\n\n    const bundleDeploymentProgressConfig = {\n      title: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.install.button.label'),\n      status: ProgressIndicatorStatus.InProgress,\n      header: this.translateService.instant('com.bmc.arsys.rx.client.common.application-or-library.label'),\n      subHeader: files[0]?.name.replace(/\\.zip$/i, ''),\n      inProgressMessage: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.installing.label'),\n      finishedMessage: this.translateService.instant(\n        'com.bmc.arsys.rx.innovation-studio.workspace.install-successful.label'\n      ),\n      failedMessage: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.install-failed.label'),\n      operationStatusMessage: ''\n    };\n\n    this.openModal(ProgressIndicatorModalComponent, bundleDeploymentProgressConfig)\n      .then(() => window.location.reload())\n      .catch(noop);\n\n    this.axBundleDeploymentService\n      .install(files[0])\n      .pipe(\n        catchError((error) => {\n          bundleDeploymentProgressConfig.status = ProgressIndicatorStatus.Failed;\n\n          bundleDeploymentProgressConfig.finishedMessage = this.translateService.instant(\n            'com.bmc.arsys.rx.innovation-studio.workspace.install-failed.label'\n          );\n\n          return throwError(error);\n        })\n      )\n      .subscribe((response) => {\n        this.axBundleDeploymentService\n          .pollDeploymentStatus(last(response.headers.get('location').split('/')))\n          .subscribe((deploymentStatus: IDeploymentStatus) => {\n            if (deploymentStatus.isFinished) {\n              bundleDeploymentProgressConfig.status = ProgressIndicatorStatus.Finished;\n\n              bundleDeploymentProgressConfig.operationStatusMessage = this.axBundleDeploymentService.buildStatusMessage(\n                deploymentStatus.deploymentParsedStatus\n              );\n            } else if (deploymentStatus.errorMessage) {\n              bundleDeploymentProgressConfig.status = ProgressIndicatorStatus.Failed;\n              bundleDeploymentProgressConfig.operationStatusMessage = deploymentStatus.errorMessage;\n            }\n          });\n      });\n  }\n\n  createBundle(bundleType: string): void {\n    this.openModal(CreateBundleModalComponent, { type: bundleType })\n      .then((result) => {\n        const bundleId = result?.bundleId;\n\n        if (bundleId) {\n          this.rxGlobalCacheService.clear();\n\n          this.router.navigate([RX_APPLICATION.innovationStudioBundleId, bundleId]).then(() => {\n            window.location.reload();\n          });\n\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.innovation-studio.create-bundle.success.message', {\n              bundleType: bundleType.toLowerCase()\n            })\n          );\n        }\n      })\n      .catch(noop);\n  }\n\n  private openModal(content: any, data: any): ModalDeferred {\n    return this.adaptModalService.open({\n      content,\n      data,\n      size: 'sm',\n      isDialog: true,\n      hideBackdrop: false\n    });\n  }\n\n  private setPageTitle(): void {\n    this.rxPageTitleService.set(\n      this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.page.label'),\n      this.rxGlobalCacheService.applicationId\n    );\n  }\n}\n","<div class=\"d-flex flex-column h-100\">\n  <div class=\"row w-100 align-items-center\">\n    <h1 class=\"h1 px-6 py-3 m-0\">{{ 'com.bmc.arsys.rx.innovation-studio.workspace.page.label' | translate }}</h1>\n\n    <div class=\"d-flex py-3\">\n      <span class=\"pl-6 pt-3 pr-2 workspace-toolbar-label mb-2\">\n        {{ 'com.bmc.arsys.rx.innovation-studio.workspace.show.label' | translate }}\n      </span>\n\n      <adapt-button-group\n        [(ngModel)]=\"bundleTypeSelectorModel\"\n        [config]=\"bundleTypeSelectorConfig\"\n        [multiselectable]=\"false\"\n        [uncheckable]=\"false\"\n        size=\"small\"\n        (ngModelChange)=\"updateBundleType($event)\"\n        rx-id=\"select-bundle-type\"\n        class=\"pt-1\"\n      ></adapt-button-group>\n\n      <adapt-button-group\n        class=\"pl-5 pt-1\"\n        *ngIf=\"isBusinessAnalyst\"\n        [(ngModel)]=\"editableBundleSelectorModel\"\n        [config]=\"editableBundleSelectorConfig\"\n        [multiselectable]=\"false\"\n        [uncheckable]=\"false\"\n        size=\"small\"\n        (ngModelChange)=\"toggleEditableBundles($event)\"\n        rx-id=\"select-bundle-type-ba\"\n      ></adapt-button-group>\n    </div>\n\n    <div class=\"d-flex py-3 align-items-center\">\n      <div\n        class=\"split-line ml-4\"\n        *ngIf=\"(isInstallBundleActionAvailable || isNewBundleActionAvailable) && !isBusinessAnalyst\"\n      ></div>\n\n      <div *ngIf=\"isNewBundleActionAvailable && !isBusinessAnalyst\" class=\"dropdown\" adaptDropdown>\n        <button\n          adapt-button\n          adaptDropdownToggle\n          type=\"button\"\n          btn-type=\"tertiary\"\n          class=\"d-icon-plus_circle align-self-start\"\n          rx-id=\"new-button\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n        </button>\n\n        <div class=\"dropdown-menu\" adaptDropdownMenu>\n          <button (click)=\"createBundle(bundleTypes.application)\" class=\"dropdown-item\" rx-id=\"create-application\">\n            {{ 'com.bmc.arsys.rx.client.common.application.label' | translate }}\n          </button>\n          <button (click)=\"createBundle(bundleTypes.library)\" class=\"dropdown-item\" rx-id=\"create-library\">\n            {{ 'com.bmc.arsys.rx.client.common.library.label' | translate }}\n          </button>\n        </div>\n      </div>\n\n      <button\n        *ngIf=\"isInstallBundleActionAvailable && !isBusinessAnalyst\"\n        adapt-button\n        type=\"file\"\n        btn-type=\"tertiary\"\n        class=\"d-icon-left-download\"\n        rx-id=\"install-button\"\n        (click)=\"openFileDialog()\"\n      >\n        {{ 'com.bmc.arsys.rx.innovation-studio.workspace.install.button.label' | translate }}\n      </button>\n\n      <input\n        #fileInput\n        type=\"file\"\n        accept=\".zip\"\n        hidden\n        [multiple]=\"false\"\n        (change)=\"onChangeFileInput($event)\"\n        (click)=\"onClickFileInput($event)\"\n        rx-id=\"install-file-input\"\n      />\n    </div>\n\n    <div class=\"ml-auto py-3\" *ngIf=\"smartReportingUrl\">\n      <a\n        rx-id=\"reports-link\"\n        target=\"_blank\"\n        class=\"d-icon-file_chart d-icon-left px-4 py-2\"\n        [href]=\"smartReportingUrl\"\n      >\n        {{ 'com.bmc.arsys.rx.innovation-studio.workspace.reports.button.label' | translate }}\n      </a>\n    </div>\n  </div>\n\n  <div class=\"h-100\">\n    <adapt-table\n      class=\"mt-2\"\n      [value]=\"bundlesToDisplay$ | async\"\n      [columns]=\"columns\"\n      [sortable]=\"true\"\n      dataKey=\"friendlyName\"\n      sortField=\"friendlyName\"\n      [sortOrder]=\"1\"\n      [loading]=\"isLoadingData\"\n      [scrollable]=\"true\"\n      [scrollHeight]=\"'flex'\"\n      [hasEmptyState]=\"isBusinessAnalyst && editableBundles.length === 0\"\n      [texts]=\"texts\"\n      [bordered]=\"true\"\n    >\n    </adapt-table>\n  </div>\n</div>\n<ng-template #nameColumnTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  <div class=\"rx-ellipsis\">\n    <a [routerLink]=\"['/', innovationStudioBundleId, dataItem.id]\">\n      {{ dataItem[column.field] }}\n    </a>\n  </div>\n</ng-template>\n"]}