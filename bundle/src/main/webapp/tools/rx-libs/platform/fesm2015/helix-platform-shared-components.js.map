{"version":3,"file":"helix-platform-shared-components.js","sources":["../../../../libs/platform/shared/components/admin-settings/admin-settings.component.ts","../../../../libs/platform/shared/components/admin-settings/admin-settings.component.html","../../../../libs/platform/shared/components/admin-settings/admin-settings.module.ts","../../../../libs/platform/shared/components/form-builder/value-accessor.ts","../../../../libs/platform/shared/components/boolean/boolean.component.ts","../../../../libs/platform/shared/components/boolean/boolean.component.html","../../../../libs/platform/shared/components/boolean/boolean.module.ts","../../../../libs/platform/shared/components/definition-picker/definition-picker-cache.service.ts","../../../../libs/platform/shared/components/definition-picker/definition-picker.types.ts","../../../../libs/platform/shared/components/definition-picker/definition-picker.component.ts","../../../../libs/platform/shared/components/definition-picker/definition-picker.component.html","../../../../libs/platform/shared/components/definition-picker/definition-picker.module.ts","../../../../libs/platform/shared/components/designer/inspector-components/select-expression-dropdown/select-expression-dropdown.component.ts","../../../../libs/platform/shared/components/designer/inspector-components/select-expression-dropdown/select-expression-dropdown.component.html","../../../../libs/platform/shared/components/designer/inspector-components/select-expression-dropdown/select-expression-dropdown.module.ts","../../../../libs/platform/shared/components/designer/inspector-components/select-expression-dropdown/select-expression-dropdown.constant.ts","../../../../libs/platform/shared/components/designer-canvas/designer-canvas.constant.ts","../../../../libs/platform/shared/components/designer-canvas/designer-canvas.component.ts","../../../../libs/platform/shared/components/designer-canvas/designer-canvas.component.html","../../../../libs/platform/shared/components/designer-canvas/designer-canvas.module.ts","../../../../libs/platform/shared/components/designer-header/designer-header.component.ts","../../../../libs/platform/shared/components/designer-header/designer-header.component.html","../../../../libs/platform/shared/components/designer-header/designer-header.module.ts","../../../../libs/platform/shared/components/designer-palette/designer-palette.component.ts","../../../../libs/platform/shared/components/designer-palette/designer-palette.component.html","../../../../libs/platform/shared/components/designer-palette/designer-palette.module.ts","../../../../libs/platform/shared/components/dynamic-component-renderer/dynamic-component-renderer.component.ts","../../../../libs/platform/shared/components/dynamic-component-renderer/dynamic-component-renderer.module.ts","../../../../libs/platform/shared/components/error-page/error-page.component.ts","../../../../libs/platform/shared/components/error-page/error-page.component.html","../../../../libs/platform/shared/components/error-page/error-page.module.ts","../../../../libs/platform/shared/components/expression-editor/expression-editor.constant.ts","../../../../libs/platform/shared/components/expression-editor/data-dictionary-item-plugin.constant.ts","../../../../libs/platform/shared/components/expression-editor/rich-expression-editor/rich-expression-editor.component.ts","../../../../libs/platform/shared/components/expression-editor/rich-expression-editor/rich-expression-editor.component.html","../../../../libs/platform/shared/components/expression-editor/data-dictionary-node/data-dictionary-node.component.ts","../../../../libs/platform/shared/components/expression-editor/data-dictionary-node/data-dictionary-node.component.html","../../../../libs/platform/shared/components/expression-editor/data-dictionary/data-dictionary.component.ts","../../../../libs/platform/shared/components/expression-editor/data-dictionary/data-dictionary.component.html","../../../../libs/platform/shared/components/expression-editor/expression-editor.component.ts","../../../../libs/platform/shared/components/expression-editor/expression-editor.component.html","../../../../libs/platform/shared/components/expression-editor/data-dictionary-item-plugin.service.ts","../../../../libs/platform/shared/components/expression-editor/expression-editor.module.ts","../../../../libs/platform/shared/components/expression-editor/expression-editor.service.ts","../../../../libs/platform/shared/components/form-controls/assignment-expression-list-form-control/assignment-expression-list-form-control.types.ts","../../../../libs/platform/shared/components/form-controls/text-form-control/text-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/text-form-control/text-form-control.component.html","../../../../libs/platform/shared/components/form-controls/select-form-control/select-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/select-form-control/select-form-control.component.html","../../../../libs/platform/shared/components/form-controls/expression-form-control/expression-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/expression-form-control/expression-form-control.component.html","../../../../libs/platform/shared/components/form-controls/assignment-expression-list-form-control/assignment-expression-list-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/assignment-expression-list-form-control/assignment-expression-list-form-control.component.html","../../../../libs/platform/shared/components/form-controls/expression-form-control/expression-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/text-form-control/text-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/select-form-control/select-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/assignment-expression-list-form-control/assignment-expression-list-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/attachment-form-control/attachment-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/attachment-form-control/attachment-form-control.component.html","../../../../libs/platform/shared/components/form-controls/attachment-form-control/attachment-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/boolean-form-control/boolean-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/boolean-form-control/boolean-form-control.component.html","../../../../libs/platform/shared/components/form-controls/boolean-form-control/boolean-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/color-picker-form-control/color-picker-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/color-picker-form-control/color-picker-form-control.component.html","../../../../libs/platform/shared/components/form-controls/color-picker-form-control/color-picker-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/counter-form-control/counter-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/counter-form-control/counter-form-control.component.html","../../../../libs/platform/shared/components/form-controls/counter-form-control/counter-form-control.module.ts","../../../../libs/platform/shared/components/coarse-grained-customization-options-editor/coarse-grained-customization-options-editor.component.ts","../../../../libs/platform/shared/components/coarse-grained-customization-options-editor/coarse-grained-customization-options-editor.component.html","../../../../libs/platform/shared/components/form-controls/customization-options/customization-options.component.ts","../../../../libs/platform/shared/components/form-controls/customization-options/customization-options.component.html","../../../../libs/platform/shared/components/form-controls/customization-options/customization-options.module.ts","../../../../libs/platform/shared/components/form-controls/date-form-control/date-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/date-form-control/date-form-control.component.html","../../../../libs/platform/shared/components/form-controls/date-form-control/date-form-control.module.ts","../../../../libs/platform/shared/components/form-builder/form-builder.constant.ts","../../../../libs/platform/shared/components/form-builder/models/abstract-form-control.model.ts","../../../../libs/platform/shared/components/form-builder/models/form-control.model.ts","../../../../libs/platform/shared/components/form-builder/models/form-section.model.ts","../../../../libs/platform/shared/components/form-builder/models/form-widget.model.ts","../../../../libs/platform/shared/components/form-builder/form-builder.factory.ts","../../../../libs/platform/shared/components/form-builder/components/form-builder/form-builder.service.ts","../../../../libs/platform/shared/components/form-builder/components/form-outlet/form-outlet.component.ts","../../../../libs/platform/shared/components/form-builder/components/form-widget/form-widget.component.ts","../../../../libs/platform/shared/components/form-builder/components/form-section/form-section.component.ts","../../../../libs/platform/shared/components/form-builder/components/form-section/form-section.component.html","../../../../libs/platform/shared/components/form-builder/components/form-builder/form-builder.component.ts","../../../../libs/platform/shared/components/form-builder/components/form-builder/form-builder.component.html","../../../../libs/platform/shared/components/form-builder/form-builder.module.ts","../../../../libs/platform/shared/components/form-controls/date-time-form-control/date-time-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/date-time-form-control/date-time-form-control.component.html","../../../../libs/platform/shared/components/form-controls/date-time-form-control/date-time-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/group-button-form-control/group-button-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/group-button-form-control/group-button-form-control.component.html","../../../../libs/platform/shared/components/form-controls/group-button-form-control/group-button-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-browser-dialog/icon-browser-dialog.component.ts","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-browser-dialog/icon-browser-dialog.component.html","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-picker-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-picker-form-control.component.html","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-browser-dialog/icon-browser-dialog.module.ts","../../../../libs/platform/shared/components/form-controls/icon-picker-form-control/icon-picker-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/input-list-form-control/input-list-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/input-list-form-control/input-list-form-control.component.html","../../../../libs/platform/shared/components/form-controls/input-list-form-control/input-list-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/label-form-control/label-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/label-form-control/label-form-control.component.html","../../../../libs/platform/shared/components/form-controls/label-form-control/label-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/list-form-control/list-item.component.ts","../../../../libs/platform/shared/components/form-controls/list-form-control/list-item.component.html","../../../../libs/platform/shared/components/form-controls/list-form-control/list-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/list-form-control/list-form-control.component.html","../../../../libs/platform/shared/components/form-controls/list-form-control/list-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/optional-expression-control/optional-expression-control.component.ts","../../../../libs/platform/shared/components/form-controls/optional-expression-control/optional-expression-control.component.html","../../../../libs/platform/shared/components/form-controls/optional-expression-control/optional-expression-control.module.ts","../../../../libs/platform/shared/components/form-controls/optional-select-form-control/optional-select-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/optional-select-form-control/optional-select-form-control.component.html","../../../../libs/platform/shared/components/form-controls/optional-select-form-control/optional-select-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/stepper-with-units-form-control/stepper-with-units-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/stepper-with-units-form-control/stepper-with-units-form-control.component.html","../../../../libs/platform/shared/components/form-controls/stepper-with-units-form-control/stepper-with-units-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/switch-form-control/switch-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/switch-form-control/switch-form-control.component.html","../../../../libs/platform/shared/components/form-controls/switch-form-control/switch-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/tags-form-control/tags-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/tags-form-control/tags-form-control.component.html","../../../../libs/platform/shared/components/form-controls/tags-form-control/tags-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/textarea-form-control/textarea-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/textarea-form-control/textarea-form-control.component.html","../../../../libs/platform/shared/components/form-controls/textarea-form-control/textarea-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/time-form-control/time-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/time-form-control/time-form-control.component.html","../../../../libs/platform/shared/components/form-controls/time-form-control/time-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/validation-form-control/validation-form-control-options.types.ts","../../../../libs/platform/shared/components/form-controls/validation-form-control/validation-form-control.constant.ts","../../../../libs/platform/shared/components/form-controls/validation-form-control/validation-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/validation-form-control/validation-form-control.component.html","../../../../libs/platform/shared/components/form-controls/validation-form-control/validation-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/form-controls.module.ts","../../../../libs/platform/shared/components/form-controls/definition-picker-or-expression-form-control/definition-picker-or-expression-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/definition-picker-or-expression-form-control/definition-picker-or-expression-form-control.component.html","../../../../libs/platform/shared/components/form-controls/definition-picker-or-expression-form-control/definition-picker-or-expression-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/record-instance-form-control/record-instance-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/record-instance-form-control/record-instance-form-control.component.html","../../../../libs/platform/shared/components/form-controls/record-instance-form-control/record-instance-form-control.module.ts","../../../../libs/platform/shared/components/form-controls/radio-form-control/radio-form-control.component.ts","../../../../libs/platform/shared/components/form-controls/radio-form-control/radio-form-control.component.html","../../../../libs/platform/shared/components/form-controls/radio-form-control/radio-form-control.module.ts","../../../../libs/platform/shared/components/iframe/iframe.component.ts","../../../../libs/platform/shared/components/iframe/iframe.component.html","../../../../libs/platform/shared/components/iframe/iframe.module.ts","../../../../libs/platform/shared/components/iframe/iframe.service.ts","../../../../libs/platform/shared/components/inspector/inspector.directive.ts","../../../../libs/platform/shared/components/inspector/inspector.module.ts","../../../../libs/platform/shared/components/inspector/inspector-control-base.class.ts","../../../../libs/platform/shared/components/inspector/inspector-widget-base.class.ts","../../../../libs/platform/shared/components/inspector-components/expression-inspector-control/expression-inspector-control.component.ts","../../../../libs/platform/shared/components/inspector-components/expression-inspector-control/expression-inspector-control.component.html","../../../../libs/platform/shared/components/inspector-components/expression-inspector-control/expression-inspector-control.module.ts","../../../../libs/platform/shared/components/inspector-components/optional-expression-inspector-control/optional-expression-inspector-control.component.ts","../../../../libs/platform/shared/components/inspector-components/optional-expression-inspector-control/optional-expression-inspector-control.component.html","../../../../libs/platform/shared/components/inspector-components/optional-expression-inspector-control/optional-expression-inspector-control.module.ts","../../../../libs/platform/shared/components/issue-reporter/issue-reporter.constant.ts","../../../../libs/platform/shared/components/issue-reporter/issue-reporter.service.ts","../../../../libs/platform/shared/components/issue-reporter/issue-reporter.component.ts","../../../../libs/platform/shared/components/issue-reporter/issue-reporter.component.html","../../../../libs/platform/shared/components/issue-reporter/issue-reporter.module.ts","../../../../libs/platform/shared/components/select-with-pagination/select-with-pagination.component.ts","../../../../libs/platform/shared/components/select-with-pagination/select-with-pagination.component.html","../../../../libs/platform/shared/components/select-with-pagination/select-with-pagination.module.ts","../../../../libs/platform/shared/components/permission-editor/permission-editor-dialog/permission-editor-dialog.component.ts","../../../../libs/platform/shared/components/permission-editor/permission-editor-dialog/permission-editor-dialog.component.html","../../../../libs/platform/shared/components/permission-editor/permission-editor.component.ts","../../../../libs/platform/shared/components/permission-editor/permission-editor.component.html","../../../../libs/platform/shared/components/permission-editor/permission-editor.module.ts","../../../../libs/platform/shared/components/rename-definition-modal/rename-definition-modal.component.ts","../../../../libs/platform/shared/components/rename-definition-modal/rename-definition-modal.component.html","../../../../libs/platform/shared/components/rename-definition-modal/rename-definition-modal.module.ts","../../../../libs/platform/shared/components/revert-customization/revert-customization.constants.ts","../../../../libs/platform/shared/components/revert-customization/revert-customization.component.ts","../../../../libs/platform/shared/components/revert-customization/revert-customization.component.html","../../../../libs/platform/shared/components/revert-customization/revert-customization.module.ts","../../../../libs/platform/shared/components/search/search.component.ts","../../../../libs/platform/shared/components/search/search.component.html","../../../../libs/platform/shared/components/search/search.module.ts","../../../../libs/platform/shared/components/user-preferences/user-preferences.constants.ts","../../../../libs/platform/shared/components/user-preferences/user-preferences.component.ts","../../../../libs/platform/shared/components/user-preferences/user-preferences.component.html","../../../../libs/platform/shared/components/shell/gainsight/gainsight.constant.ts","../../../../libs/platform/shared/components/shell/gainsight/gainsight-configurator.service.ts","../../../../libs/platform/shared/components/shell/user-messages/user-message.constants.ts","../../../../libs/platform/shared/components/shell/user-messages/user-message-data-page.service.ts","../../../../libs/platform/shared/components/shell/user-messages/user-message.service.ts","../../../../libs/platform/shared/components/shell/shell-base.class.ts","../../../../libs/platform/shared/components/user-availability/user-availability.constants.ts","../../../../libs/platform/shared/components/user-availability/user-availability.component.ts","../../../../libs/platform/shared/components/user-availability/user-availability.component.html","../../../../libs/platform/shared/components/shell/gainsight/gainsight-user-preferences.service.ts","../../../../libs/platform/shared/components/shell/gainsight/gainsight-opt-in/gainsight-opt-in.component.ts","../../../../libs/platform/shared/components/shell/gainsight/gainsight-opt-in/gainsight-opt-in.component.html","../../../../libs/platform/shared/components/shell/user-messages/user-message-modal.component.ts","../../../../libs/platform/shared/components/shell/user-messages/user-message-modal.component.html","../../../../libs/platform/shared/components/shell/user-messages/user-messages.component.ts","../../../../libs/platform/shared/components/shell/user-messages/user-messages.component.html","../../../../libs/platform/shared/components/shell/shell.component.ts","../../../../libs/platform/shared/components/shell/shell.component.html","../../../../libs/platform/shared/components/shell/development-mode-selector/development-mode-selector.component.ts","../../../../libs/platform/shared/components/shell/development-mode-selector/development-mode-selector.component.html","../../../../libs/platform/shared/components/shell/feedback-dialog/feedback-dialog.component.ts","../../../../libs/platform/shared/components/shell/feedback-dialog/feedback-dialog.component.html","../../../../libs/platform/shared/components/shell/innovation-studio-shell.component.ts","../../../../libs/platform/shared/components/shell/shell.module.ts","../../../../libs/platform/shared/components/shell/gainsight/gainsight.types.ts","../../../../libs/platform/shared/components/user-availability/user-availability.module.ts","../../../../libs/platform/shared/components/user-preferences/user-preferences.module.ts","../../../../libs/platform/shared/components/wizard/wizard-modal.component.ts","../../../../libs/platform/shared/components/wizard/wizard-modal.component.html","../../../../libs/platform/shared/components/wizard/wizard.service.ts","../../../../libs/platform/shared/components/wizard/wizard.module.ts","../../../../libs/platform/shared/components/selection-field-options/selection-field-options-editor.component.ts","../../../../libs/platform/shared/components/selection-field-options/selection-field-options-editor.component.html","../../../../libs/platform/shared/components/selection-field-options/selection-field-options.component.ts","../../../../libs/platform/shared/components/selection-field-options/selection-field-options.component.html","../../../../libs/platform/shared/components/selection-field-options/selection-field-options.module.ts","../../../../libs/platform/shared/components/unknown-application/unknown-application.component.ts","../../../../libs/platform/shared/components/unknown-application/unknown-application.component.html","../../../../libs/platform/shared/components/unknown-application/unknown-application.module.ts","../../../../libs/platform/shared/components/localized-character-field-value-modal/localized-character-field-value-modal.component.ts","../../../../libs/platform/shared/components/localized-character-field-value-modal/localized-character-field-value-modal.component.html","../../../../libs/platform/shared/components/localized-character-field-value-modal/localized-character-field-value-modal.module.ts","../../../../libs/platform/shared/components/helix-platform-shared-components.ts"],"sourcesContent":["import { Component, HostBinding, Input } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'rx-admin-settings',\n  templateUrl: './admin-settings.component.html',\n  styleUrls: ['./admin-settings.component.scss']\n})\nexport class AdminSettingsComponent {\n  @HostBinding('class')\n  hostClass = 'd-flex flex-column position-relative h-100';\n\n  @Input()\n  header: string;\n\n  @Input()\n  busy: Subscription = null;\n}\n","<rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section', delay: 500 }\"></rx-busy-indicator>\n\n<div [class.is-hidden]=\"busy && !busy.closed\" class=\"h-100 d-flex flex-column\">\n  <h1 *ngIf=\"header\">{{ header }}</h1>\n\n  <ng-content></ng-content>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AdminSettingsComponent } from './admin-settings.component';\nimport { RxBusyIndicatorModule, RxModalService } from '@helix/platform/ui-kit';\n\n@NgModule({\n  declarations: [AdminSettingsComponent],\n  providers: [RxModalService],\n  imports: [CommonModule, RxBusyIndicatorModule],\n  exports: [AdminSettingsComponent]\n})\nexport class AdminSettingsModule {}\n","import { ControlValueAccessor } from '@angular/forms';\n\nexport class ValueAccessor<T> implements ControlValueAccessor {\n  protected innerValue: T;\n  isDisabled: boolean;\n  onTouched: () => void;\n\n  protected onChange: (T) => void;\n\n  get value(): T {\n    return this.innerValue;\n  }\n\n  set value(value: T) {\n    if (this.innerValue !== value) {\n      this.innerValue = value;\n      this.onChange(value);\n      this.onSetValue(value);\n    }\n  }\n\n  touch() {}\n\n  writeValue(value: T) {\n    this.innerValue = value;\n\n    this.onWriteValue(value);\n  }\n\n  registerOnChange(fn: (value: T) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  onWriteValue(value) {}\n\n  setDisabledState(isDisabled: boolean) {\n    this.isDisabled = isDisabled;\n  }\n\n  // helper that called when control sets value to model\n  onSetValue(value: T) {}\n}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnInit,\n  Output,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';\nimport { AdaptButtonComponent } from '@bmc-ux/adapt-angular';\nimport { ValueAccessor } from '../form-builder/value-accessor';\n\n@Component({\n  selector: 'rx-boolean',\n  templateUrl: './boolean.component.html',\n  styleUrls: ['./boolean.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxBooleanComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxBooleanComponent extends ValueAccessor<boolean> implements OnInit {\n  @Input()\n  shouldDisplayAsCheckbox: boolean;\n\n  @Input()\n  required: boolean;\n\n  @Input()\n  isDisabled: boolean;\n\n  @Input()\n  label: string;\n\n  @Input()\n  tooltip: string;\n\n  @Output()\n  rxBlur = new EventEmitter<FocusEvent>();\n\n  @ViewChildren(AdaptButtonComponent, { read: ElementRef })\n  buttons: QueryList<ElementRef>;\n\n  control: FormControl;\n\n  constructor(private injector: Injector) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.control = this.injector.get(NgControl).control as FormControl;\n  }\n\n  getButtonType(value: boolean): string {\n    return value === this.value ? 'primary' : 'secondary';\n  }\n\n  onButtonBlur(event: FocusEvent): void {\n    if (!event.relatedTarget || !this.buttons.find((element) => element.nativeElement === event.relatedTarget)) {\n      this.onTouched();\n      this.rxBlur.emit(event);\n    }\n  }\n\n  setValue(value: boolean): void {\n    if (this.value === value) {\n      this.value = null;\n    } else {\n      this.value = value;\n    }\n  }\n}\n","<div *ngIf=\"!shouldDisplayAsCheckbox\" [class.has-danger]=\"adaptRxFeedbackRef.hasUIErrorState\">\n  <adapt-rx-control-label [label]=\"label\" [showRequiredLabel]=\"required\"></adapt-rx-control-label>\n\n  <div\n    class=\"btn-group\"\n    [attr.tabindex]=\"isDisabled ? 0 : undefined\"\n    [attr.aria-label]=\"isDisabled ? label + value : label\"\n    [class.focusable]=\"isDisabled\"\n  >\n    <button\n      adapt-button\n      size=\"small\"\n      [disabled]=\"isDisabled\"\n      [btn-type]=\"getButtonType(true)\"\n      (click)=\"setValue(true)\"\n      [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.true' | translate\"\n      [attr.aria-pressed]=\"value === true\"\n      (blur)=\"onButtonBlur($event)\"\n      rx-id=\"true-button\"\n    >\n      <span class=\"d-icon-check_adapt\"></span>\n    </button>\n\n    <button\n      adapt-button\n      size=\"small\"\n      [disabled]=\"isDisabled\"\n      [btn-type]=\"getButtonType(false)\"\n      (click)=\"setValue(false)\"\n      [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.false' | translate\"\n      [attr.aria-pressed]=\"value === false\"\n      (blur)=\"onButtonBlur($event)\"\n      rx-id=\"false-button\"\n    >\n      <span class=\"d-icon-circle_slash_o\"></span>\n    </button>\n  </div>\n\n  <adapt-rx-feedback\n    #adaptRxFeedbackRef\n    [errors]=\"control.errors\"\n    [controlTouched]=\"control.touched\"\n  ></adapt-rx-feedback>\n</div>\n\n<adapt-rx-checkbox\n  *ngIf=\"shouldDisplayAsCheckbox\"\n  [required]=\"required\"\n  [readonly]=\"isDisabled\"\n  [label]=\"label\"\n  [(ngModel)]=\"value\"\n  (onBlur)=\"onTouched(); rxBlur.emit($event)\"\n  [tooltip]=\"\n    tooltip\n      ? {\n          iconName: 'question_circle_o',\n          content: tooltip,\n          popoverMode: true\n        }\n      : null\n  \"\n>\n</adapt-rx-checkbox>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptRxCheckboxModule,\n  AdaptRxFormControlModule,\n  AdaptPopoverModule\n} from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxBooleanComponent } from './boolean.component';\n\n@NgModule({\n  imports: [\n    FormsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    AdaptRxFormControlModule,\n    AdaptButtonModule,\n    AdaptRxCheckboxModule,\n    TranslateModule,\n    AdaptPopoverModule\n  ],\n  declarations: [RxBooleanComponent],\n  exports: [RxBooleanComponent]\n})\nexport class RxBooleanModule {}\n","import { Injectable } from '@angular/core';\nimport { RxAssociationDefinitionDataPageService } from '@helix/platform/association/api';\nimport { RxNamedListDefinitionDataPageService } from '@helix/platform/named-list/api';\nimport { RxProcessDefinitionDataPageService } from '@helix/platform/process/api';\nimport { RX_RECORD_DEFINITION, RxRecordDefinitionDataPageService } from '@helix/platform/record/api';\nimport { RX_VIEW_DEFINITION, RxViewDefinitionDataPageService } from '@helix/platform/view/api';\nimport { Observable } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { IDefinitionDescriptor } from './interfaces/definition-descriptor.interface';\nimport { RX_BUNDLE, RxChatbotDefinitionDataPageService } from '@helix/platform/shared/api';\nimport { filter } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxDefinitionPickerCacheService {\n  private registeredConsumerCount = 0;\n\n  private bundleRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleDataRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleRegularRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleRegularDataRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleStandardDataRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n\n  private bundlePublicRegularDataRecordDefinitionDescriptors: {\n    [name: string]: Observable<IDefinitionDescriptor[]>;\n  } = {};\n\n  private bundleInheritableRecordDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleProcessDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundlePublicProcessDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleViewDefinitionDescriptor: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleNamedListDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleAssociationDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n  private bundleChatbotDefinitionDescriptors: { [name: string]: Observable<IDefinitionDescriptor[]> } = {};\n\n  private rxRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private rxDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private rxStandardDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n\n  private allRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allStandardDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allRegularRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allRegularDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allPublicRegularDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private rxRegularRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private rxRegularDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private rxPublicRegularDataRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allInheritableRecordDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allProcessDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allPublicProcessDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allViewDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allNamedListDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allAssociationDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n  private allChatbotDefinitionDescriptors: Observable<IDefinitionDescriptor[]>;\n\n  constructor(\n    private recordDefinitionDataPageService: RxRecordDefinitionDataPageService,\n    private processDefinitionDataPageService: RxProcessDefinitionDataPageService,\n    private viewDefinitionDataPageService: RxViewDefinitionDataPageService,\n    private namedListDefinitionDataPageService: RxNamedListDefinitionDataPageService,\n    private associationDefinitionDataPageService: RxAssociationDefinitionDataPageService,\n    private rxChatbotDefinitionDataPageService: RxChatbotDefinitionDataPageService\n  ) {}\n\n  getBundleRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleRecordDefinitionDescriptors[bundleId]) {\n      this.bundleRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleRecordDefinitionDescriptors[bundleId];\n  }\n\n  getBundleDataRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleDataRecordDefinitionDescriptors[bundleId]) {\n      this.bundleDataRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            excludeAuditRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleDataRecordDefinitionDescriptors[bundleId];\n  }\n\n  getBundleStandardDataRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleStandardDataRecordDefinitionDescriptors[bundleId]) {\n      this.bundleStandardDataRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            excludeAuditRecordDefinitions: true,\n            excludeCustomRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleStandardDataRecordDefinitionDescriptors[bundleId];\n  }\n\n  getAllRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allRecordDefinitionDescriptors) {\n      this.allRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allRecordDefinitionDescriptors;\n  }\n\n  getAllDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allDataRecordDefinitionDescriptors) {\n      this.allDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            excludeAuditRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allDataRecordDefinitionDescriptors;\n  }\n\n  getAllStandardDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allStandardDataRecordDefinitionDescriptors) {\n      this.allStandardDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            excludeAuditRecordDefinitions: true,\n            excludeCustomRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allStandardDataRecordDefinitionDescriptors;\n  }\n\n  getRxRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxRecordDefinitionDescriptors) {\n      this.rxRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            rxDefinitionsOnly: true,\n            propertySelection: ['name', 'scope']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.rxRecordDefinitionDescriptors;\n  }\n\n  getRxDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxDataRecordDefinitionDescriptors) {\n      this.rxDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            rxDefinitionsOnly: true,\n            excludeAuditRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.rxDataRecordDefinitionDescriptors;\n  }\n\n  getRxStandardDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxStandardDataRecordDefinitionDescriptors) {\n      this.rxStandardDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            rxDefinitionsOnly: true,\n            excludeAuditRecordDefinitions: true,\n            excludeCustomRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.rxStandardDataRecordDefinitionDescriptors;\n  }\n\n  getAllRegularRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allRegularRecordDefinitionDescriptors) {\n      this.allRegularRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allRegularRecordDefinitionDescriptors;\n  }\n\n  getAllRegularDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allRegularDataRecordDefinitionDescriptors) {\n      this.allRegularDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            excludeAuditRecordDefinitions: true,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allRegularDataRecordDefinitionDescriptors;\n  }\n\n  getRxRegularRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxRegularRecordDefinitionDescriptors) {\n      this.rxRegularRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            rxDefinitionsOnly: true,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.rxRegularRecordDefinitionDescriptors;\n  }\n\n  getRxRegularDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxRegularDataRecordDefinitionDescriptors) {\n      this.rxRegularDataRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            rxDefinitionsOnly: true,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType,\n            excludeAuditRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.rxRegularDataRecordDefinitionDescriptors;\n  }\n\n  getBundleRegularRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleRegularRecordDefinitionDescriptors[bundleId]) {\n      this.bundleRegularRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleRegularRecordDefinitionDescriptors[bundleId];\n  }\n\n  getBundleRegularDataRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleRegularDataRecordDefinitionDescriptors[bundleId]) {\n      this.bundleRegularDataRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType,\n            excludeAuditRecordDefinitions: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleRegularDataRecordDefinitionDescriptors[bundleId];\n  }\n\n  getAllPublicRegularDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allPublicRegularDataRecordDefinitionDescriptors) {\n      this.allPublicRegularDataRecordDefinitionDescriptors = this.getAllRegularDataRecordDefinitionDescriptors().pipe(\n        map((recordDefinitionDescriptors: IDefinitionDescriptor[]) =>\n          filter(recordDefinitionDescriptors, { scope: RX_BUNDLE.definitionScopeTypes.public })\n        ),\n        shareReplay(1)\n      );\n    }\n\n    return this.allPublicRegularDataRecordDefinitionDescriptors;\n  }\n\n  getRxPublicRegularDataRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.rxPublicRegularDataRecordDefinitionDescriptors) {\n      this.rxPublicRegularDataRecordDefinitionDescriptors = this.getRxRegularDataRecordDefinitionDescriptors().pipe(\n        map((recordDefinitionDescriptors: IDefinitionDescriptor[]) =>\n          filter(recordDefinitionDescriptors, { scope: RX_BUNDLE.definitionScopeTypes.public })\n        ),\n        shareReplay(1)\n      );\n    }\n\n    return this.rxPublicRegularDataRecordDefinitionDescriptors;\n  }\n\n  getBundlePublicRegularDataRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundlePublicRegularDataRecordDefinitionDescriptors[bundleId]) {\n      this.bundlePublicRegularDataRecordDefinitionDescriptors[bundleId] =\n        this.getBundleRegularDataRecordDefinitionDescriptors(bundleId).pipe(\n          map((recordDefinitionDescriptors: IDefinitionDescriptor[]) =>\n            filter(recordDefinitionDescriptors, { scope: RX_BUNDLE.definitionScopeTypes.public })\n          )\n        );\n    }\n\n    return this.bundlePublicRegularDataRecordDefinitionDescriptors[bundleId];\n  }\n\n  getAllInheritableRecordDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allInheritableRecordDefinitionDescriptors) {\n      this.allInheritableRecordDefinitionDescriptors = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            inheritableDefinitionsOnly: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allInheritableRecordDefinitionDescriptors;\n  }\n\n  getBundleInheritableRecordDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleInheritableRecordDefinitionDescriptors[bundleId]) {\n      this.bundleInheritableRecordDefinitionDescriptors[bundleId] = this.recordDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            inheritableDefinitionsOnly: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleInheritableRecordDefinitionDescriptors[bundleId];\n  }\n\n  getAllProcessDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allProcessDefinitionDescriptors) {\n      this.allProcessDefinitionDescriptors = this.processDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allProcessDefinitionDescriptors;\n  }\n\n  getAllPublicProcessDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allPublicProcessDefinitionDescriptors) {\n      this.allPublicProcessDefinitionDescriptors = this.getAllProcessDefinitionDescriptors().pipe(\n        map((processDefinitionDescriptors: IDefinitionDescriptor[]) =>\n          filter(processDefinitionDescriptors, { scope: RX_BUNDLE.definitionScopeTypes.public })\n        ),\n        shareReplay(1)\n      );\n    }\n\n    return this.allPublicProcessDefinitionDescriptors;\n  }\n\n  getBundleProcessDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleProcessDefinitionDescriptors[bundleId]) {\n      this.bundleProcessDefinitionDescriptors[bundleId] = this.processDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleProcessDefinitionDescriptors[bundleId];\n  }\n\n  getBundlePublicProcessDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundlePublicProcessDefinitionDescriptors[bundleId]) {\n      this.bundlePublicProcessDefinitionDescriptors[bundleId] = this.getBundleProcessDefinitionDescriptors(\n        bundleId\n      ).pipe(\n        map((processDefinitionDescriptors: IDefinitionDescriptor[]) =>\n          filter(processDefinitionDescriptors, { scope: RX_BUNDLE.definitionScopeTypes.public })\n        )\n      );\n    }\n\n    return this.bundlePublicProcessDefinitionDescriptors[bundleId];\n  }\n\n  getAllViewDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allViewDefinitionDescriptors) {\n      this.allViewDefinitionDescriptors = this.viewDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            viewType: RX_VIEW_DEFINITION.types.regular\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allViewDefinitionDescriptors;\n  }\n\n  getBundleViewDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleViewDefinitionDescriptor[bundleId]) {\n      this.bundleViewDefinitionDescriptor[bundleId] = this.viewDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true,\n            viewType: RX_VIEW_DEFINITION.types.regular\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleViewDefinitionDescriptor[bundleId];\n  }\n\n  getAllNamedListDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allNamedListDefinitionDescriptors) {\n      this.allNamedListDefinitionDescriptors = this.namedListDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allNamedListDefinitionDescriptors;\n  }\n\n  getBundleNamedListDefinitionDescriptors(bundleId: string): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleNamedListDefinitionDescriptors[bundleId]) {\n      this.bundleNamedListDefinitionDescriptors[bundleId] = this.namedListDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleNamedListDefinitionDescriptors[bundleId];\n  }\n\n  getAllAssociationDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allAssociationDefinitionDescriptors) {\n      this.allAssociationDefinitionDescriptors = this.associationDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['name', 'scope']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allAssociationDefinitionDescriptors;\n  }\n\n  getBundleAssociationDefinitionDescriptors(bundleId): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleAssociationDefinitionDescriptors[bundleId]) {\n      this.bundleAssociationDefinitionDescriptors[bundleId] = this.associationDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['name', 'scope'],\n            requireDependent: true\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleAssociationDefinitionDescriptors[bundleId];\n  }\n\n  getAllChatbotDefinitionDescriptors(): Observable<IDefinitionDescriptor[]> {\n    if (!this.allChatbotDefinitionDescriptors) {\n      this.allChatbotDefinitionDescriptors = this.rxChatbotDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': ''\n          },\n          params: {\n            propertySelection: ['chatbotName']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.allChatbotDefinitionDescriptors;\n  }\n\n  getBundleChatbotDefinitionDescriptors(bundleId): Observable<IDefinitionDescriptor[]> {\n    if (!this.bundleChatbotDefinitionDescriptors[bundleId]) {\n      this.bundleChatbotDefinitionDescriptors[bundleId] = this.rxChatbotDefinitionDataPageService\n        .get({\n          headers: {\n            'default-bundle-scope': bundleId\n          },\n          params: {\n            propertySelection: ['chatbotName']\n          }\n        })\n        .pipe(\n          map((response: any) => response.data),\n          shareReplay(1)\n        );\n    }\n\n    return this.bundleChatbotDefinitionDescriptors[bundleId];\n  }\n\n  registerConsumer() {\n    this.registeredConsumerCount++;\n  }\n\n  unRegisterConsumer() {\n    this.registeredConsumerCount--;\n\n    if (this.registeredConsumerCount === 0) {\n      this.clear();\n    }\n  }\n\n  clear() {\n    this.bundleRecordDefinitionDescriptors = {};\n    this.bundleDataRecordDefinitionDescriptors = {};\n    this.bundleRegularRecordDefinitionDescriptors = {};\n    this.bundleRegularDataRecordDefinitionDescriptors = {};\n    this.bundleStandardDataRecordDefinitionDescriptors = {};\n    this.bundleInheritableRecordDefinitionDescriptors = {};\n    this.bundleProcessDefinitionDescriptors = {};\n    this.bundlePublicProcessDefinitionDescriptors = {};\n    this.bundleViewDefinitionDescriptor = {};\n    this.bundleNamedListDefinitionDescriptors = {};\n    this.bundleAssociationDefinitionDescriptors = {};\n    this.bundleChatbotDefinitionDescriptors = {};\n    this.bundlePublicRegularDataRecordDefinitionDescriptors = {};\n\n    this.rxRecordDefinitionDescriptors = null;\n    this.rxDataRecordDefinitionDescriptors = null;\n    this.rxStandardDataRecordDefinitionDescriptors = null;\n    this.allRecordDefinitionDescriptors = null;\n    this.allDataRecordDefinitionDescriptors = null;\n    this.allStandardDataRecordDefinitionDescriptors = null;\n    this.allRegularRecordDefinitionDescriptors = null;\n    this.allRegularDataRecordDefinitionDescriptors = null;\n    this.rxRegularRecordDefinitionDescriptors = null;\n    this.rxRegularDataRecordDefinitionDescriptors = null;\n    this.allInheritableRecordDefinitionDescriptors = null;\n    this.allProcessDefinitionDescriptors = null;\n    this.allPublicProcessDefinitionDescriptors = null;\n    this.allViewDefinitionDescriptors = null;\n    this.allNamedListDefinitionDescriptors = null;\n    this.allAssociationDefinitionDescriptors = null;\n    this.allChatbotDefinitionDescriptors = null;\n    this.allPublicRegularDataRecordDefinitionDescriptors = null;\n    this.rxPublicRegularDataRecordDefinitionDescriptors = null;\n  }\n}\n","export enum RxDefinitionPickerType {\n  View = 'view',\n  Record = 'record',\n  DataRecord = 'dataRecord',\n  StandardDataRecord = 'standardDataRecord',\n  RegularRecord = 'regularRecord',\n  RegularDataRecord = 'regularDataRecord',\n  PublicRegularDataRecord = 'publicRegularDataRecord',\n  InheritableRecord = 'inheritableRecord',\n  NamedList = 'namedList',\n  Association = 'association',\n  Process = 'process',\n  PublicProcess = 'publicProcess',\n  Chatbot = 'chatbot'\n}\n\nexport enum RxDefinitionPickerScope {\n  All = 'all',\n  Bundle = 'bundle',\n  Rx = 'rx'\n}\n\nexport const RX_DEFINITION_PICKER = {\n  definitionScopes: {\n    all: RxDefinitionPickerScope.All,\n    bundle: RxDefinitionPickerScope.Bundle,\n    rx: RxDefinitionPickerScope.Rx\n  },\n\n  definitionTypes: {\n    [RxDefinitionPickerType.View]: {\n      type: RxDefinitionPickerType.View,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-views.label',\n      dataGetters: {\n        all: 'getAllViewDefinitionDescriptors',\n        bundle: 'getBundleViewDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.Record]: {\n      type: RxDefinitionPickerType.Record,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllRecordDefinitionDescriptors',\n        rx: 'getRxRecordDefinitionDescriptors',\n        bundle: 'getBundleRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.DataRecord]: {\n      type: RxDefinitionPickerType.DataRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllDataRecordDefinitionDescriptors',\n        rx: 'getRxDataRecordDefinitionDescriptors',\n        bundle: 'getBundleDataRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.StandardDataRecord]: {\n      type: RxDefinitionPickerType.StandardDataRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllStandardDataRecordDefinitionDescriptors',\n        rx: 'getRxStandardDataRecordDefinitionDescriptors',\n        bundle: 'getBundleStandardDataRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.RegularRecord]: {\n      type: RxDefinitionPickerType.RegularRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllRegularRecordDefinitionDescriptors',\n        rx: 'getRxRegularRecordDefinitionDescriptors',\n        bundle: 'getBundleRegularRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.RegularDataRecord]: {\n      type: RxDefinitionPickerType.RegularDataRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllRegularDataRecordDefinitionDescriptors',\n        rx: 'getRxRegularDataRecordDefinitionDescriptors',\n        bundle: 'getBundleRegularDataRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.PublicRegularDataRecord]: {\n      type: RxDefinitionPickerType.PublicRegularDataRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllPublicRegularDataRecordDefinitionDescriptors',\n        rx: 'getRxPublicRegularDataRecordDefinitionDescriptors',\n        bundle: 'getBundlePublicRegularDataRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.InheritableRecord]: {\n      type: RxDefinitionPickerType.InheritableRecord,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-records.label',\n      dataGetters: {\n        all: 'getAllInheritableRecordDefinitionDescriptors',\n        bundle: 'getBundleInheritableRecordDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.NamedList]: {\n      type: RxDefinitionPickerType.NamedList,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-named-lists.label',\n      dataGetters: {\n        all: 'getAllNamedListDefinitionDescriptors',\n        bundle: 'getBundleNamedListDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.Association]: {\n      type: RxDefinitionPickerType.Association,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-associations.label',\n      dataGetters: {\n        all: 'getAllAssociationDefinitionDescriptors',\n        bundle: 'getBundleAssociationDefinitionDescriptors'\n      }\n    },\n    [RxDefinitionPickerType.Process]: {\n      type: RxDefinitionPickerType.Process,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-processes.label',\n      dataGetters: {\n        all: 'getAllProcessDefinitionDescriptors',\n        bundle: 'getBundleProcessDefinitionDescriptors'\n      }\n    },\n\n    [RxDefinitionPickerType.PublicProcess]: {\n      type: RxDefinitionPickerType.Process,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-processes.label',\n      dataGetters: {\n        all: 'getAllPublicProcessDefinitionDescriptors',\n        bundle: 'getBundlePublicProcessDefinitionDescriptors'\n      }\n    },\n\n    [RxDefinitionPickerType.Chatbot]: {\n      type: RxDefinitionPickerType.Chatbot,\n      allDefinitionsLabelKey: 'com.bmc.arsys.rx.client.definition-picker.all-chatbots.label',\n      dataGetters: {\n        all: 'getAllChatbotDefinitionDescriptors',\n        bundle: 'getBundleChatbotDefinitionDescriptors'\n      }\n    }\n  }\n};\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AdaptDropdownDirective, AdaptRxTextfieldComponent } from '@bmc-ux/adapt-angular';\nimport {\n  IBundleDescriptor,\n  IFormControlComponent,\n  IFormFocusable,\n  RX_BUNDLE,\n  RxBundleCacheService,\n  RxDefinitionNameService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { RxStringService } from '@helix/platform/utils';\nimport { find, get, throttle } from 'lodash';\nimport { Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport { debounceTime, filter, first, map, switchMap, takeUntil } from 'rxjs/operators';\nimport { ValueAccessor } from '../form-builder/value-accessor';\nimport { RxDefinitionPickerCacheService } from './definition-picker-cache.service';\nimport { RX_DEFINITION_PICKER, RxDefinitionPickerScope } from './definition-picker.types';\nimport { IBundleDefinition, IBundleWithDefinitions } from './interfaces/bundle-with-definitions.interface';\nimport { IDefinitionDescriptor } from './interfaces/definition-descriptor.interface';\nimport { IDefinitionPickerComponentOptions } from './interfaces/definition-picker-component-options.interface';\nimport { IDefinitionProperties } from './interfaces/definition-properties.interface';\nimport { IDefinitionTypeDescriptorProperties } from './interfaces/definition-type-descriptor-properties.interface';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-definition-picker',\n  templateUrl: './definition-picker.component.html',\n  styleUrls: ['./definition-picker.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxDefinitionPickerComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxDefinitionPickerComponent\n  extends ValueAccessor<string>\n  implements IFormControlComponent, IFormFocusable, OnInit, OnDestroy, OnChanges\n{\n  @Input()\n  options: IDefinitionPickerComponentOptions;\n\n  @Input()\n  isDisabled = false;\n\n  @ViewChild('dropdownButton', { static: true })\n  dropdownButton: ElementRef;\n\n  @ViewChild('dropdownMenuHeader', { static: false })\n  dropdownMenuHeader: ElementRef;\n\n  @ViewChild('definitionPicker', { static: true })\n  dropdown: AdaptDropdownDirective;\n\n  config: IDefinitionPickerComponentOptions;\n\n  @ViewChild('definitionTree', { static: false })\n  definitionTreeElementRef: ElementRef;\n\n  @ViewChild('searchField', { static: false })\n  searchField: AdaptRxTextfieldComponent;\n\n  searchMode = false;\n  searchQuery = '';\n  bundles$: Observable<IBundleWithDefinitions[]>;\n  dropdownWidth: number;\n  activeDefinitionScope: RxDefinitionPickerScope;\n  definitionScopes: RxDefinitionPickerScope[];\n  currentBundleFriendlyName$: Observable<string>;\n  allDefinitionsLabel: string;\n\n  onPickerToggle$ = new Subject<boolean>();\n\n  private searchScope: RxDefinitionPickerScope;\n  private previousDefinitionScope: RxDefinitionPickerScope;\n  private definitionTypeDescriptor: IDefinitionTypeDescriptorProperties;\n  private bundleId = '';\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  private globalDefinitionsLabel: string = this.translateService.instant(\n    'com.bmc.arsys.rx.client.common.global-items.label'\n  );\n\n  private defaultOptions: Partial<IDefinitionPickerComponentOptions> = {\n    availableDefinitionPickerStates: {\n      definitionButtonsGroups: [RxDefinitionPickerScope.Bundle, RxDefinitionPickerScope.All],\n      search: RxDefinitionPickerScope.All\n    },\n    texts: {\n      placeholder: this.translateService.instant('com.bmc.arsys.rx.client.common.select.label'),\n      noBundleDeployed: this.translateService.instant(\n        'com.bmc.arsys.rx.client.definition-picker.no-bundle-deployed.label'\n      ),\n      noDefinitionsFound: this.translateService.instant(\n        'com.bmc.arsys.rx.client.definition-picker.no-definitions-found.label'\n      )\n    }\n  };\n\n  private scrollHandlerThrottled = throttle(this.scrollHandler.bind(this), 100);\n\n  constructor(\n    private renderer: Renderer2,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxDefinitionPickerCacheService: RxDefinitionPickerCacheService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxStringService: RxStringService,\n    private translateService: TranslateService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    super();\n  }\n\n  @HostListener('window:resize')\n  onWindowResize(): void {\n    if (this.dropdown.isOpen()) {\n      this.dropdown.close();\n    }\n  }\n\n  ngOnInit(): void {\n    this.config = {\n      ...this.defaultOptions,\n      ...this.options,\n      texts: { ...this.defaultOptions.texts, ...this.options.texts }\n    };\n\n    this.rxDefinitionPickerCacheService.registerConsumer();\n    this.bundleId = this.config.bundleId || this.rxBundleCacheService.bundleId;\n    this.getCurrentBundleFriendlyName();\n    this.definitionTypeDescriptor = RX_DEFINITION_PICKER.definitionTypes[this.config.definitionType];\n    this.definitionScopes = this.config.availableDefinitionPickerStates.definitionButtonsGroups;\n    this.searchScope = this.config.availableDefinitionPickerStates.search;\n    this.allDefinitionsLabel = this.translateService.instant(this.definitionTypeDescriptor.allDefinitionsLabelKey);\n\n    this.onPickerToggle$\n      .pipe(\n        filter((isOpen) => Boolean(isOpen)),\n        first(),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe((isOpen) => {\n        this.getDefinitions(this.definitionScopes[0]);\n      });\n\n    this.onPickerToggle$\n      .pipe(\n        filter((isOpen) => !isOpen),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe(() => this.resetPickerState());\n\n    window.addEventListener('scroll', this.scrollHandlerThrottled, true);\n  }\n\n  ngOnDestroy(): void {\n    this.rxDefinitionPickerCacheService.unRegisterConsumer();\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n\n    window.removeEventListener('scroll', this.scrollHandlerThrottled, true);\n  }\n\n  private scrollHandler(event: Event): void {\n    if (\n      this.dropdown.isOpen() &&\n      get(event.target, 'style.visibility') !== 'hidden' &&\n      !(\n        event.target === this.definitionTreeElementRef?.nativeElement ||\n        event.target === this.searchField?.inputRef.nativeElement\n      )\n    ) {\n      this.dropdown.close();\n    }\n  }\n\n  getDefinitionProperties(definitionDescriptors: IDefinitionDescriptor[]): Observable<IDefinitionProperties[]> {\n    return this.rxGlobalCacheService.getLicensedBundleDescriptors().pipe(\n      map((bundleDescriptors: IBundleDescriptor[]) => {\n        return definitionDescriptors.map((definitionDescriptor) => {\n          const bundleId = this.rxDefinitionNameService.getBundleId(definitionDescriptor.name);\n          const bundleDescriptor = find(bundleDescriptors, { id: bundleId });\n\n          const bundleName = bundleDescriptor\n            ? bundleDescriptor.friendlyName || bundleDescriptor.id\n            : bundleId || this.globalDefinitionsLabel;\n\n          return {\n            bundleName,\n            bundleId,\n            scope: definitionDescriptor.scope,\n            name: definitionDescriptor.name,\n            displayName: this.rxDefinitionNameService.getDisplayName(definitionDescriptor.name)\n          };\n        });\n      })\n    );\n  }\n\n  groupDefinitionsByBundle(definitionProperties: IDefinitionProperties[]): IBundleWithDefinitions[] {\n    const isBundleScopeSelected = this.activeDefinitionScope === RxDefinitionPickerScope.Bundle;\n    let hasExpandedBundle = false;\n\n    const bundleGroups = definitionProperties\n      .sort((a, b) => a.displayName.localeCompare(b.displayName))\n      .reduce((bundles, currentDefinitionProperties) => {\n        let bundle = bundles.find((bundleItem) => bundleItem.name === currentDefinitionProperties.bundleName);\n        const isSelectedDefinition = this.value === currentDefinitionProperties.name;\n\n        if (!bundle) {\n          bundle = {\n            id: currentDefinitionProperties.bundleId,\n            name: currentDefinitionProperties.bundleName,\n            isPublic: currentDefinitionProperties.scope === RX_BUNDLE.definitionScopeTypes.public,\n            definitions: [],\n            isExpanded: false\n          };\n\n          bundles.push(bundle);\n        }\n\n        if (isSelectedDefinition) {\n          bundle.isExpanded = true;\n          hasExpandedBundle = true;\n        }\n\n        bundle.definitions.push({\n          name: currentDefinitionProperties.name,\n          displayName: currentDefinitionProperties.displayName,\n          isPublic: currentDefinitionProperties.scope === RX_BUNDLE.definitionScopeTypes.public\n        });\n\n        return bundles;\n      }, [])\n      .sort((firstBundle: IBundleWithDefinitions, secondBundle: IBundleWithDefinitions): number => {\n        if (\n          (this.activeDefinitionScope === RxDefinitionPickerScope.Bundle && this.bundleId === firstBundle.id) ||\n          firstBundle.name === this.globalDefinitionsLabel\n        ) {\n          return -1;\n        }\n\n        if (\n          (this.activeDefinitionScope === RxDefinitionPickerScope.Bundle && this.bundleId === secondBundle.id) ||\n          secondBundle.name === this.globalDefinitionsLabel\n        ) {\n          return 1;\n        }\n\n        return firstBundle.name.localeCompare(secondBundle.name);\n      });\n\n    if (isBundleScopeSelected && !hasExpandedBundle && bundleGroups[0]) {\n      bundleGroups[0].isExpanded = true;\n    }\n\n    return bundleGroups;\n  }\n\n  getDefinitions(definitionScope: RxDefinitionPickerScope): Observable<IBundleWithDefinitions[]> {\n    this.activeDefinitionScope = definitionScope;\n\n    const dataGetter = this.definitionTypeDescriptor.dataGetters[definitionScope];\n\n    let definitions$;\n\n    if (definitionScope === RX_DEFINITION_PICKER.definitionScopes.bundle) {\n      definitions$ = this.rxGlobalCacheService.getBundleDescriptor(this.bundleId).pipe(\n        switchMap((bundle) => {\n          return bundle ? this.rxDefinitionPickerCacheService[dataGetter](this.bundleId) : of([]);\n        })\n      );\n    } else {\n      definitions$ = this.rxDefinitionPickerCacheService[dataGetter]();\n    }\n\n    return (this.bundles$ = definitions$.pipe(\n      switchMap((descriptors: IDefinitionDescriptor[]) => this.getDefinitionProperties(descriptors)),\n      map((definitionsProperties: IDefinitionProperties[]) => this.groupDefinitionsByBundle(definitionsProperties))\n    ));\n  }\n\n  selectDefinition(definitionName: string): void {\n    this.dropdown.close();\n\n    this.setValue(definitionName).then(() => {\n      // additional reset after value set to update expanded sections\n      this.resetPickerState();\n    });\n  }\n\n  clearDefinition(e: Event): void {\n    e.stopPropagation();\n\n    this.setValue(null);\n  }\n\n  private setValue(newValue: string): Promise<boolean> {\n    if (this.value !== newValue) {\n      if (this.options.beforeValueChange) {\n        return this.options.beforeValueChange(this.value, newValue).then((response) => {\n          if (response) {\n            this.value = newValue;\n          }\n\n          return response;\n        });\n      } else {\n        this.value = newValue;\n\n        return Promise.resolve(true);\n      }\n    } else {\n      return Promise.resolve(false);\n    }\n  }\n\n  setDropdownWidth(): void {\n    setTimeout(() => {\n      const dropdownButton = this.renderer.selectRootElement(this.dropdownButton.nativeElement, true);\n      const dropdownMenuHeader = this.renderer.selectRootElement(this.dropdownMenuHeader.nativeElement, true);\n\n      // 14px - combined left and right padding around the buttons in the header\n      // 2px - border\n      this.dropdownWidth = Math.max(dropdownButton.clientWidth, dropdownMenuHeader.clientWidth + 14) + 2;\n\n      // This is needed when definition picker is used in a component with OnPush change detection strategy\n      // TODO: this needs to be revisited when OnPush strategy is applied to the definition picker itself.\n      this.changeDetectorRef.markForCheck();\n    });\n  }\n\n  enableSearchMode(searchQuery?: string): void {\n    this.searchMode = true;\n    this.previousDefinitionScope = this.activeDefinitionScope;\n\n    if (searchQuery) {\n      this.searchQuery = searchQuery;\n      this.search(searchQuery);\n    } else {\n      this.getDefinitions(this.searchScope);\n    }\n  }\n\n  disableSearchMode(): void {\n    this.resetPickerState();\n  }\n\n  resetPickerState(): void {\n    this.getDefinitions(this.searchMode ? this.previousDefinitionScope : this.activeDefinitionScope);\n    this.searchMode = false;\n    this.searchQuery = '';\n  }\n\n  search(searchQuery: string): Observable<IBundleWithDefinitions[]> {\n    return (this.bundles$ = this.getDefinitions(this.searchScope).pipe(\n      debounceTime(250),\n      map((descriptors: IBundleWithDefinitions[]) =>\n        descriptors\n          .filter((descriptor) => {\n            return searchQuery.includes(':')\n              ? this.rxStringService.caseInsensitiveSearch(descriptor.name, this.getBundleNameSearchQuery(searchQuery))\n              : true;\n          })\n          .map((descriptor) => ({\n            ...descriptor,\n            definitions: descriptor.definitions.filter((definition) => {\n              return this.rxStringService.caseInsensitiveSearch(\n                definition.displayName,\n                this.getDefinitionNameSearchQuery(searchQuery)\n              );\n            })\n          }))\n          .filter((descriptor) => descriptor.definitions.length > 0)\n          .map((descriptor) => ({\n            ...descriptor,\n            isExpanded: true\n          }))\n      )\n    ));\n  }\n\n  focus(): void {\n    this.renderer.selectRootElement(this.dropdownButton.nativeElement, true).click();\n  }\n\n  @HostListener('window:paste', ['$event'])\n  onPaste(event: ClipboardEvent): void {\n    const pastedText = event.clipboardData.getData('text/plain');\n\n    if (this.dropdown.isOpen() && !this.searchMode && pastedText) {\n      this.enableSearchMode(pastedText);\n    }\n  }\n\n  @HostListener('window:keypress', ['$event'])\n  onKeypress(event: KeyboardEvent): void {\n    if (this.dropdown.isOpen() && !this.searchMode && event.key) {\n      this.enableSearchMode(event.key);\n    }\n  }\n\n  trackByBundle(index: number, bundle: IBundleWithDefinitions): string {\n    return bundle.id;\n  }\n\n  trackByDefinition(index: number, bundle: IBundleDefinition): string {\n    return bundle.name;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.options && !changes.options.firstChange) {\n      if (changes.options.currentValue.bundleId !== changes.options.previousValue.bundleId) {\n        this.bundleId = this.options.bundleId;\n        this.getCurrentBundleFriendlyName();\n        this.getDefinitions(this.definitionScopes[0]);\n      } else if (changes.options.currentValue.definitionType !== changes.options.previousValue.definitionType) {\n        this.definitionTypeDescriptor =\n          RX_DEFINITION_PICKER.definitionTypes[changes.options.currentValue.definitionType];\n\n        this.allDefinitionsLabel = this.translateService.instant(this.definitionTypeDescriptor.allDefinitionsLabelKey);\n\n        this.getDefinitions(this.definitionScopes[0]);\n\n        this.value = null;\n      }\n    }\n  }\n\n  getCurrentBundleFriendlyName(): void {\n    this.currentBundleFriendlyName$ = this.rxGlobalCacheService\n      .getBundleDescriptor(this.bundleId)\n      .pipe(map((descriptor: IBundleDescriptor) => descriptor?.friendlyName || this.config.texts.noBundleDeployed));\n  }\n\n  getBundleNameSearchQuery(searchQuery: string): string {\n    return this.rxDefinitionNameService.getBundleId(searchQuery) || searchQuery;\n  }\n\n  getDefinitionNameSearchQuery(searchQuery: string): string {\n    return this.rxDefinitionNameService.getDisplayName(searchQuery);\n  }\n}\n","<adapt-rx-control-label\n  [label]=\"options.label\"\n  [tooltip]=\"options.tooltip\"\n  [showRequiredLabel]=\"!!options.required\"\n></adapt-rx-control-label>\n\n<div\n  class=\"dropdown\"\n  adaptDropdown\n  appendToBody=\"true\"\n  [autoClose]=\"'outside'\"\n  (onOpen)=\"onPickerToggle$.next(true);setDropdownWidth()\"\n  (onClose)=\"onPickerToggle$.next(false)\"\n  [autoFocusFirst]=\"false\"\n  #definitionPicker=\"adaptDropdown\"\n>\n  <button\n    rx-id=\"toggle-button\"\n    #dropdownButton\n    class=\"btn btn-secondary\"\n    adaptDropdownToggle\n    type=\"button\"\n    [disabled]=\"isDisabled\"\n  >\n    <span class=\"rx-selected-item\" [title]=\"value || ''\">\n      {{ (value | rxDefinitionNamePipe) || config.texts.placeholder }}\n    </span>\n\n    <span\n      rx-id=\"clear-button\"\n      class=\"d-icon-cross_adapt btn-link\"\n      (click)=\"clearDefinition($event)\"\n      *ngIf=\"value && !isDisabled\"\n    >\n    </span>\n  </button>\n\n  <div class=\"dropdown-menu\" [style.width.px]=\"dropdownWidth\" adaptDropdownMenu>\n    <div class=\"rx-dropdown-panel-header\" [ngClass]=\"searchMode ? 'pl-1' : 'pr-1'\">\n      <div class=\"d-flex\" *ngIf=\"!searchMode; else searchControls\" #dropdownMenuHeader>\n        <div class=\"btn-group bundle-btn-group\">\n          <button\n            type=\"button\"\n            adapt-button\n            *ngFor=\"let definitionScope of definitionScopes\"\n            class=\"rx-header-button\"\n            [btn-type]=\"activeDefinitionScope === definitionScope ? 'primary' : 'secondary'\"\n            size=\"xtra-small\"\n            (click)=\"getDefinitions(definitionScope)\"\n          >\n            <span>{{ definitionScope === 'bundle' ? (currentBundleFriendlyName$ | async) : allDefinitionsLabel }}</span>\n          </button>\n        </div>\n\n        <button\n          type=\"button\"\n          rx-id=\"search-button\"\n          class=\"d-icon-search btn btn-sm btn-link ml-1\"\n          *ngIf=\"!searchMode\"\n          (click)=\"$event.stopPropagation(); enableSearchMode()\"\n        ></button>\n      </div>\n    </div>\n\n    <ul #definitionTree class=\"rx-bundles\" *ngIf=\"dropdownWidth && bundles$ | async as bundles; else busyLoader\">\n      <adapt-empty-state\n        class=\"d-block mt-5\"\n        *ngIf=\"!bundles.length\"\n        type=\"search\"\n        [label]=\"config.texts.noDefinitionsFound\"\n      ></adapt-empty-state>\n\n      <li\n        class=\"rx-bundle\"\n        *ngFor=\"let bundle of bundles; trackBy: trackByBundle\"\n        (click)=\"bundle.isExpanded = !bundle.isExpanded\"\n      >\n        <span\n          rx-id=\"expand-bundle-button\"\n          class=\"expand-arrow d-icon-angle_right\"\n          [class.open]=\"bundle.isExpanded\"\n        ></span>\n\n        <adapt-highlight [result]=\"bundle.name\" [term]=\"searchQuery\"></adapt-highlight>\n\n        <div class=\"rx-definitions\" *ngIf=\"bundle.isExpanded\">\n          <button\n            class=\"dropdown-item\"\n            (click)=\"$event.stopPropagation(); selectDefinition(definition.name)\"\n            *ngFor=\"let definition of bundle.definitions; trackBy: trackByDefinition\"\n            [class.active]=\"value === definition.name\"\n            [title]=\"definition.name\"\n            type=\"button\"\n          >\n            <span *ngIf=\"!definition.isPublic\">* </span>\n\n            <adapt-highlight [result]=\"definition.displayName\" [term]=\"searchQuery\"></adapt-highlight>\n          </button>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n\n<ng-template #busyLoader>\n  <rx-busy-indicator></rx-busy-indicator>\n</ng-template>\n\n<ng-template #searchControls>\n  <button\n    type=\"button\"\n    rx-id=\"back-button\"\n    class=\"d-icon-arrow_left btn btn-sm btn-link mr-1\"\n    (click)=\"$event.stopPropagation(); disableSearchMode()\"\n  ></button>\n\n  <adapt-rx-textfield\n    #searchField\n    (ngModelChange)=\"search($event)\"\n    [autofocus]=\"true\"\n    [(ngModel)]=\"searchQuery\"\n    size=\"sm\"\n  ></adapt-rx-textfield>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptEmptyStateModule,\n  AdaptHighlightModule,\n  AdaptRxLabelModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { RxDefinitionPickerCacheService } from './definition-picker-cache.service';\nimport { RxDefinitionPickerComponent } from './definition-picker.component';\nimport { RxDefinitionModule } from '@helix/platform/shared/api';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    AdaptHighlightModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RxBusyIndicatorModule,\n    AdaptDropdownModule.forRoot(),\n    AdaptButtonModule,\n    RxDefinitionModule,\n    AdaptRxLabelModule,\n    AdaptRxTextfieldModule,\n    AdaptEmptyStateModule,\n    TranslateModule\n  ],\n  declarations: [RxDefinitionPickerComponent],\n  exports: [RxDefinitionPickerComponent],\n  providers: [RxDefinitionPickerCacheService]\n})\nexport class RxDefinitionPickerModule {}\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'rx-select-expression-dropdown',\n  templateUrl: './select-expression-dropdown.component.html',\n  styleUrls: ['./select-expression-dropdown.component.scss']\n})\nexport class RxSelectExpressionDropdownComponent {}\n","","import { NgModule } from '@angular/core';\n\nimport { RxSelectExpressionDropdownComponent } from './select-expression-dropdown.component';\n\n@NgModule({\n  declarations: [RxSelectExpressionDropdownComponent],\n  imports: [],\n  exports: [RxSelectExpressionDropdownComponent]\n})\nexport class RxSelectExpressionDropdownModule {}\n","export const RX_SELECT_EXPRESSION_DROPDOWN = {\n  dropDownOptionsValue: {\n    select: 'Select',\n    expression: 'Expression'\n  },\n\n  dropDownDisplayValue: {\n    buildExpression: 'Build Expression',\n    editExpression: 'Edit Expression'\n  }\n};\n","export const RX_DESIGNER_CANVAS = {\n  paperOptions: {\n    backgroundColor: '#FFFFFF',\n\n    backgroundImage:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAHUlEQVQYV2NkYGAwBuKzQIwXMBJSAJMfVUidcAQAnUQBC6jEGBUAAAAASUVORK5CYII=',\n\n    height: 800,\n    width: 1000\n  }\n};\n","import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { CdkDragDrop } from '@angular/cdk/drag-drop/drag-events';\n\nimport { RxCommandManagerService } from '@helix/platform/shared/api';\n\nimport { IDesignerCanvasConfiguration } from './designer-canvas.interfaces';\nimport { RX_DESIGNER_CANVAS } from './designer-canvas.constant';\n\ndeclare var joint: any;\n\n@Component({\n  selector: 'rx-designer-canvas',\n  templateUrl: './designer-canvas.component.html',\n  styleUrls: ['./designer-canvas.component.scss']\n})\nexport class RxDesignerCanvasComponent implements OnInit, AfterViewInit, OnChanges {\n  @Input()\n  configuration: IDesignerCanvasConfiguration;\n\n  // TODO-VS: update types\n  @Input()\n  graph: any;\n\n  // TODO-VS: update types\n  @Input()\n  droppedElement: CdkDragDrop<any>;\n\n  @Output()\n  elementSelected = new EventEmitter<string>();\n\n  private commandManager: any;\n  private paper: any;\n  private paperScroller: any;\n\n  constructor(private elementRef: ElementRef, private rxCommandManagerService: RxCommandManagerService) {}\n\n  ngOnInit(): void {\n    this.commandManager = new joint.dia.CommandManager({\n      graph: this.graph,\n      cmdBeforeAdd: (cmdName, cell, graph, options) => {\n        return this.commandManager.enabled && !options?.ignoreCommandManager;\n      }\n    });\n\n    this.rxCommandManagerService.set(this.commandManager);\n\n    this.paper = new joint.dia.Paper({\n      defaultLink: new joint.shapes.bpmn.Flow(), // TODO-VS: update defaultLink configuration\n      embeddingMode: true,\n      gridSize: 5,\n      height: RX_DESIGNER_CANVAS.paperOptions.height,\n      interactive: this.configuration.interactive,\n      model: this.graph,\n      width: RX_DESIGNER_CANVAS.paperOptions.width,\n\n      restrictTranslate: function (elementView) {\n        // TODO-VS: implement restrictTranslate logic\n\n        return false;\n      },\n\n      validateEmbedding: function (childView, parentView) {\n        // TODO-VS: implement validateEmbedding logic\n\n        return true;\n      }\n    });\n\n    this.paper.drawBackground({\n      color: RX_DESIGNER_CANVAS.paperOptions.backgroundColor,\n      image: RX_DESIGNER_CANVAS.paperOptions.backgroundImage,\n      repeat: 'repeat',\n      position: {\n        x: -1,\n        y: -1\n      }\n    });\n\n    this.paperScroller = new joint.ui.PaperScroller({\n      autoResizePaper: true,\n      cursor: 'grab',\n      padding: 32,\n      paper: this.paper\n    });\n\n    this.paper.on('blank:pointerdown', (evt) => {\n      this.paperScroller.startPanning(evt);\n\n      this.elementSelected.emit(null);\n    });\n\n    this.paper.on('cell:pointerup', (cellView, evt) => {\n      if (cellView) {\n        this.elementSelected.emit(cellView.model.prop('elementModel/guid'));\n      }\n    });\n\n    if (this.configuration.interactive) {\n      this.commandManager.enable = () => {\n        this.commandManager.enabled = true;\n      };\n\n      this.commandManager.disable = () => {\n        this.commandManager.enabled = false;\n      };\n\n      this.commandManager.enable();\n\n      this.paper.on('cell:expand:begin cell:collapse:begin', () => {\n        this.commandManager.disable();\n      });\n\n      this.paper.on('cell:expand:done cell:collapse:done', (cellView) => {\n        if (!cellView.model.get('inCallActivity')) {\n          this.commandManager.enable();\n        }\n      });\n    }\n\n    this.paperScroller.render();\n  }\n\n  ngAfterViewInit(): void {\n    this.elementRef.nativeElement.appendChild(this.paperScroller.el);\n    this.paperScroller.center();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.droppedElement?.currentValue) {\n      this.addElementToCanvas(changes.droppedElement.currentValue);\n    }\n  }\n\n  hasRedo(): boolean {\n    return this.commandManager.hasRedo();\n  }\n\n  hasUndo(): boolean {\n    return this.commandManager.hasUndo();\n  }\n\n  onClearCanvas(): void {\n    // TODO-VS: add clear logic\n  }\n\n  onCopy(): void {\n    // TODO-VS: add copy logic\n  }\n\n  onCut(): void {\n    // TODO-VS: add cut logic\n  }\n\n  onExportToPng(): void {\n    // TODO-VS: add export logic\n  }\n\n  onPaste(): void {\n    // TODO-VS: add paste logic\n  }\n\n  onPrint(): void {\n    // TODO-VS: add print logic\n  }\n\n  onRedo(): void {\n    this.commandManager.redo();\n  }\n\n  onUndo(): void {\n    this.commandManager.undo();\n  }\n\n  onZoomIn(): void {\n    // TODO-VS: add zoom in logic\n  }\n\n  onZoomOut(): void {\n    // TODO-VS: add zoom out logic\n  }\n\n  // TODO-VS: update types\n  private addElementToCanvas(dropData: CdkDragDrop<any>): void {\n    const paperDropArea = this.getCanvasDropArea(this.paper.$el);\n    const localPoint = this.paper.clientToLocalPoint({ x: dropData.dropPoint.x, y: dropData.dropPoint.y });\n\n    if (this.canDrop(paperDropArea, localPoint)) {\n      const elementService = this.configuration.elementRegistry.get(dropData.item.data.value.type).elementService;\n\n      const droppedElementShape = elementService.getShape({\n        position: localPoint,\n        ...dropData.item.data.value\n      });\n\n      this.graph.addCell(droppedElementShape);\n\n      setTimeout(() => {\n        this.elementSelected.emit(droppedElementShape.prop('elementModel/guid'));\n      });\n    }\n  }\n\n  // TODO-VS: update types\n  private canDrop(paperDropArea: any, localPoint: any): boolean {\n    return (\n      localPoint.x > paperDropArea.x.start &&\n      localPoint.x < paperDropArea.x.end &&\n      localPoint.y > paperDropArea.y.start &&\n      localPoint.y < paperDropArea.y.end\n    );\n  }\n\n  // TODO-VS: update types\n  private getCanvasDropArea(el: any): any {\n    const offset = el.offset();\n    const innerWidth = el.innerWidth();\n    const innerHeight = el.innerHeight();\n\n    return {\n      x: {\n        start: offset.left,\n        end: offset.left + innerWidth\n      },\n      y: {\n        start: offset.top,\n        end: offset.top + innerHeight\n      }\n    };\n  }\n}\n","<div *ngIf=\"configuration.showToolbar\" class=\"rx-designer-toolbar\">\n  <!-- TODO-VS: Add custom actions -->\n\n  <button\n    *ngIf=\"configuration.interactive\"\n    class=\"d-icon-undo\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.undo.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"undo-button\"\n    [disabled]=\"!hasUndo()\"\n    (click)=\"onUndo()\"\n  ></button>\n\n  <button\n    *ngIf=\"configuration.interactive\"\n    class=\"d-icon-redo\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.redo.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"redo-button\"\n    [disabled]=\"!hasRedo()\"\n    (click)=\"onRedo()\"\n  ></button>\n\n  <button\n    *ngIf=\"!configuration.isReadOnly && configuration.enableMultiSelection\"\n    class=\"d-icon-scissors\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.cut.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"cut-button\"\n    (click)=\"onCut()\"\n  ></button>\n\n  <button\n    *ngIf=\"!configuration.isReadOnly && configuration.enableMultiSelection\"\n    class=\"d-icon-files_copy_o\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.copy.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"copy-button\"\n    (click)=\"onCopy()\"\n  ></button>\n\n  <button\n    *ngIf=\"!configuration.isReadOnly && configuration.enableMultiSelection\"\n    class=\"d-icon-files_text\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.paste.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"paste-button\"\n    (click)=\"onPaste()\"\n  ></button>\n\n  <button\n    class=\"d-icon-search_plus\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.zoom-in.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"zoom-in-button\"\n    (click)=\"onZoomIn()\"\n  ></button>\n\n  <button\n    class=\"d-icon-search_minus\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.zoom-out.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"zoom-out-button\"\n    (click)=\"onZoomOut()\"\n  ></button>\n\n  <button\n    class=\"d-icon-printer\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.print.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"print-button\"\n    (click)=\"onPrint()\"\n  ></button>\n\n  <button\n    *ngIf=\"configuration.interactive\"\n    class=\"d-icon-cross_square\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.clear-canvas.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"clear-canvas-button\"\n    (click)=\"onClearCanvas()\"\n  ></button>\n\n  <button\n    class=\"d-icon-file_arrow_png_o\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    size=\"large\"\n    adaptTooltip=\"{{ 'com.bmc.arsys.rx.client.common.export-to-png.label' | translate }}\"\n    placement=\"bottom\"\n    rx-id=\"export-to-png-button\"\n    (click)=\"onExportToPng()\"\n  ></button>\n\n  <!-- TODO-VS: Add grid size slider, snaplines checkbox and custom actions -->\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptButtonModule, AdaptTooltipModule } from '@bmc-ux/adapt-angular';\n\nimport { RxDesignerCanvasComponent } from './designer-canvas.component';\n\n// TODO-VS: mode to shared folder after jointJS is updated\n@NgModule({\n  declarations: [RxDesignerCanvasComponent],\n  imports: [AdaptButtonModule, AdaptTooltipModule, CommonModule, TranslateModule],\n  exports: [RxDesignerCanvasComponent]\n})\nexport class RxDesignerCanvasModule {}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IBreadcrumbItem } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-designer-header',\n  templateUrl: './designer-header.component.html',\n  styleUrls: ['./designer-header.component.scss']\n})\nexport class RxDesignerHeaderComponent {\n  @Input()\n  bundleName: string;\n\n  @Input()\n  breadcrumbItems: IBreadcrumbItem[] = [];\n\n  @Input()\n  isDesignMode = true;\n\n  @Input()\n  isPreviewAvailable = false;\n\n  @Input()\n  isSaveButtonDisabled = false;\n\n  @Output()\n  breadcrumbSelected: EventEmitter<IBreadcrumbItem> = new EventEmitter<IBreadcrumbItem>();\n\n  @Output()\n  toggleDesignMode: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  showPreview: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  save: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  closeDesigner: EventEmitter<void> = new EventEmitter<void>();\n}\n","<div class=\"header-column-left\">\n  <span class=\"bundle-name\">{{ bundleName }}</span>\n</div>\n\n<div class=\"header-column-right\">\n  <div class=\"header-title\">\n    <rx-breadcrumb-bar (selectedItem)=\"breadcrumbSelected.emit($event)\" [items]=\"breadcrumbItems\"></rx-breadcrumb-bar>\n  </div>\n\n  <div class=\"header-buttons\">\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"secondary\"\n      size=\"small\"\n      rx-id=\"json-button\"\n      class=\"header-button\"\n      (click)=\"toggleDesignMode.emit()\"\n    >\n      <span [ngClass]=\"{ 'd-icon-brackets_curly': isDesignMode, 'd-icon-app_eye': !isDesignMode }\"></span>\n      {{ isDesignMode ? 'JSON' : 'UI Design' }}\n    </button>\n\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"secondary\"\n      rx-id=\"preview-button\"\n      size=\"small\"\n      [hidden]=\"!isPreviewAvailable\"\n      (click)=\"showPreview.emit()\"\n      class=\"header-button\"\n    >\n      <span class=\"d-icon-eye\"></span>\n      Preview\n    </button>\n\n    <div class=\"header-button-divider\"></div>\n\n    <button\n      adapt-button\n      type=\"button\"\n      [disabled]=\"isSaveButtonDisabled\"\n      rx-id=\"save-button\"\n      size=\"small\"\n      (click)=\"save.emit()\"\n      btn-type=\"primary\"\n      class=\"header-button\"\n    >\n      Save\n    </button>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"close-button\"\n      size=\"small\"\n      (click)=\"closeDesigner.emit()\"\n      btn-type=\"secondary\"\n      class=\"header-button\"\n    >\n      Close\n    </button>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxDesignerHeaderComponent } from './designer-header.component';\nimport { AdaptButtonModule } from '@bmc-ux/adapt-angular';\nimport { RxBreadcrumbBarModule } from '@helix/platform/ui-kit';\n\n@NgModule({\n  declarations: [RxDesignerHeaderComponent],\n  exports: [RxDesignerHeaderComponent],\n  imports: [CommonModule, AdaptButtonModule, RxBreadcrumbBarModule]\n})\nexport class RxDesignerHeaderModule {}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, Output } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { CdkDragDrop } from '@angular/cdk/drag-drop/drag-events';\n\nimport { IDesignerPaletteTree } from './designer-palette.interfaces';\n\n@Component({\n  selector: 'rx-designer-palette',\n  templateUrl: './designer-palette.component.html',\n  styleUrls: ['./designer-palette.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RxDesignerPaletteComponent {\n  @Input()\n  tree: IDesignerPaletteTree[];\n\n  // TODO-VS: update types\n  @Output()\n  elementDropped = new EventEmitter<CdkDragDrop<any>>();\n\n  searchField = new FormControl();\n\n  // TODO-VS: update types\n  onDropListDropped(dropData: CdkDragDrop<any>): void {\n    this.elementDropped.emit(dropData);\n  }\n\n  trackByLabelFn<T extends { label: string }>(index, item: T): string {\n    return item.label;\n  }\n}\n","<adapt-rx-search placeholder=\"Search\" rx-id=\"palette-search-field\" [formControl]=\"searchField\"></adapt-rx-search>\n\n<adapt-accordion [multiselect]=\"true\">\n  <adapt-accordion-tab *ngFor=\"let node of tree; trackBy: trackByLabelFn\" [title]=\"node.label\" [isOpen]=\"true\">\n    <div class=\"node-container\" cdkDropList cdkDropListSortingDisabled (cdkDropListDropped)=\"onDropListDropped($event)\">\n      <div\n        *ngFor=\"let child of node.children; trackBy: trackByLabelFn\"\n        [attr.rx-id]=\"child.label\"\n        cdkDrag\n        [cdkDragData]=\"child\"\n      >\n        <ng-container [ngSwitch]=\"child.paletteItem.label\">\n          <ng-container *ngSwitchCase=\"'inner'\">\n            <div class=\"{{ child.paletteItem.shape }} border-{{ child.paletteItem.border }}\" [title]=\"child.label\">\n              <img\n                *ngIf=\"child.paletteItem.icon\"\n                class=\"icon-{{ child.paletteItem.icon.position }}\"\n                [src]=\"child.paletteItem.icon.path\"\n                [alt]=\"child.label\"\n              />\n\n              <div class=\"inner-label\">{{ child.label }}</div>\n            </div>\n          </ng-container>\n\n          <ng-container *ngSwitchCase=\"'outer'\">\n            <div class=\"{{ child.paletteItem.shape }}\" [title]=\"child.label\">\n              <div class=\"outer-icon border-{{ child.paletteItem.border }}\">\n                <img *ngIf=\"child.paletteItem.icon\" [src]=\"child.paletteItem.icon.path\" [alt]=\"child.label\" />\n              </div>\n\n              <div class=\"outer-label\">{{ child.label }}</div>\n            </div>\n          </ng-container>\n\n          <ng-container *ngSwitchDefault>\n            <div class=\"{{ child.paletteItem.shape }}\" [title]=\"child.label\"></div>\n          </ng-container>\n        </ng-container>\n      </div>\n    </div>\n  </adapt-accordion-tab>\n</adapt-accordion>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { AdaptAccordionModule, AdaptRxSearchModule } from '@bmc-ux/adapt-angular';\n\nimport { RxDesignerPaletteComponent } from './designer-palette.component';\n\n// TODO-VS: mode to shared folder after jointJS is updated\n@NgModule({\n  declarations: [RxDesignerPaletteComponent],\n  imports: [AdaptAccordionModule, AdaptRxSearchModule, CommonModule, DragDropModule, ReactiveFormsModule],\n  exports: [RxDesignerPaletteComponent]\n})\nexport class RxDesignerPaletteModule {}\n","import { Component, ComponentFactory, Input, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { IPlainObject } from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-dynamic-component-renderer',\n  template: '<ng-container #container></ng-container>'\n})\nexport class RxDynamicComponentRendererComponent implements OnInit {\n  @Input()\n  componentFactory: ComponentFactory<any>;\n\n  @Input()\n  context: any;\n\n  @Input()\n  options: IPlainObject;\n\n  @ViewChild('container', { static: true, read: ViewContainerRef })\n  container: ViewContainerRef;\n\n  ngOnInit() {\n    const componentRef = this.container.createComponent(this.componentFactory);\n\n    Object.assign(componentRef.instance, {\n      context: this.context,\n      options: this.options\n    });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RxDynamicComponentRendererComponent } from './dynamic-component-renderer.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [RxDynamicComponentRendererComponent],\n  exports: [RxDynamicComponentRendererComponent],\n  entryComponents: [RxDynamicComponentRendererComponent]\n})\nexport class RxDynamicComponentRendererModule {}\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute } from '@angular/router';\nimport { IErrorPageData } from './error-page.interfaces';\nimport { takeUntil, switchMap, map, tap } from 'rxjs/operators';\nimport { ReplaySubject, forkJoin } from 'rxjs';\nimport { DOCUMENT } from '@angular/common';\nimport {\n  RxGlobalCacheService,\n  RxCurrentUserService,\n  RxAngularApplicationService,\n  RX_APPLICATION,\n  IBundleDescriptor,\n  RxAuthService\n} from '@helix/platform/shared/api';\nimport { remove, sortBy, filter } from 'lodash';\n\n@Component({\n  selector: 'rx-error-page',\n  templateUrl: './error-page.component.html',\n  styleUrls: ['error-page.component.scss']\n})\nexport class RxErrorPageComponent implements OnInit, OnDestroy {\n  data: IErrorPageData;\n  showSignInLink = false;\n  showApplications = false;\n\n  applications$ = this.rxGlobalCacheService.getBundleDescriptors().pipe(\n    switchMap((bundleDescriptors: IBundleDescriptor[]) => {\n      const applicationBundleDescriptors = filter(bundleDescriptors, { isApplication: true, isLicensed: true });\n\n      remove(applicationBundleDescriptors, { id: RX_APPLICATION.settingsBundleId });\n\n      if (!this.rxCurrentUserService.isAdministrator()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.dataloadBundleId });\n      }\n\n      if (!this.rxCurrentUserService.isAdministrator() && !this.rxCurrentUserService.isBusinessAnalyst()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.innovationStudioBundleId });\n      }\n\n      const applications = sortBy(\n        applicationBundleDescriptors,\n        (bundleDescriptor: IBundleDescriptor) => bundleDescriptor.friendlyName\n      ).map((app: IBundleDescriptor) =>\n        this.rxAngularApplicationService.isAngularJsApplication(app.id).pipe(\n          map((isAngularJsApplication: boolean) => {\n            let url: string;\n\n            if (app.hasCustomEntryPoint && app.id !== RX_APPLICATION.innovationStudioBundleId) {\n              url = `/${app.id}/index.html`;\n            } else if (isAngularJsApplication) {\n              url = `/innovationsuite/index.html#/${app.id}`;\n            } else {\n              url = `/helix/index.html#/${app.id}`;\n            }\n\n            return {\n              id: app.id,\n              friendlyName: app.friendlyName,\n              url\n            };\n          })\n        )\n      );\n\n      return forkJoin(applications);\n    }),\n    tap(() => (this.rxGlobalCacheService.applicationId = 'unknown-application'))\n  );\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(\n    @Inject(DOCUMENT) private document: any,\n    private title: Title,\n    private route: ActivatedRoute,\n    private rxAuthService: RxAuthService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxAngularApplicationService: RxAngularApplicationService\n  ) {\n    this.document.body.style.overflow = 'hidden';\n  }\n\n  ngOnInit() {\n    this.route.data.pipe(takeUntil(this.destroyed$)).subscribe((data) => {\n      this.data = { ...data } as IErrorPageData;\n      this.title.setTitle(this.data.errorTitle);\n      this.showSignInLink = this.data.showSignInLink;\n      this.showApplications = this.data.showApplications ?? false;\n    });\n  }\n\n  logout(): void {\n    this.rxAuthService.logout().subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.document.body.style.removeProperty('overflow');\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"error-wrapper\">\n  <ng-container *ngIf=\"!showApplications\">\n    <h2>{{ this.data.errorTitle }}</h2>\n    <div [innerHTML]=\"this.data.errorMessage\"></div>\n  </ng-container>\n\n  <div *ngIf=\"showApplications\">\n    <h3>\n      The page you are trying to reach does not exist. Please open one of the applications below and bookmark it for\n      future reference.\n    </h3>\n\n    <ul>\n      <li *ngFor=\"let app of applications$ | async\">\n        <a [href]=\"app.url\">{{ app.friendlyName }}</a>\n      </li>\n    </ul>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxErrorPageComponent } from './error-page.component';\n\n@NgModule({\n  declarations: [RxErrorPageComponent],\n  imports: [CommonModule],\n  exports: [RxErrorPageComponent]\n})\nexport class RxErrorPageModule {}\n","export const RX_EXPRESSION_EDITOR = {\n  events: {\n    openExpressionEditor: 'rx-open-expression-editor'\n  }\n};\n","export const RX_DATA_DICTIONARY_ITEM_PLUGIN = {\n  name: 'rx-data-dictionary-item',\n  widgetAttributeName: 'rx-expression'\n};\n","import {\n  Component,\n  HostBinding,\n  Inject,\n  Injector,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { AbstractControl, ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';\nimport { CKEditor4 } from 'ckeditor4-angular/ckeditor';\nimport { endsWith, flow, includes, isArray, isEmpty, last, noop, reduce, startsWith, trim, uniqueId } from 'lodash';\nimport { distinctUntilChanged, map, startWith } from 'rxjs/operators';\nimport { CKEditorComponent } from 'ckeditor4-angular';\nimport {\n  ExpressionOperator,\n  ExpressionParserToken,\n  IDataDictionary,\n  IDataDictionaryAutocompleteOption,\n  IDataDictionaryBranch,\n  IExpressionOperator,\n  IExpressionOperatorRow,\n  RxDataDictionaryUtils,\n  RxExpressionParserService,\n  RxThemingService,\n  RX_THEMING\n} from '@helix/platform/shared/api';\nimport { DOCUMENT } from '@angular/common';\nimport { RxObjectUtilsService, RxTreeService } from '@helix/platform/utils';\nimport { RX_DATA_DICTIONARY_ITEM_PLUGIN } from '../data-dictionary-item-plugin.constant';\n\nconst narrowOperatorButtons = new Set([\n  ExpressionOperator.LeftGrouping,\n  ExpressionOperator.RightGrouping,\n  ExpressionOperator.DoubleQuote,\n  ExpressionOperator.Add,\n  ExpressionOperator.Subtract,\n  ExpressionOperator.Multiply,\n  ExpressionOperator.Divide,\n  ExpressionOperator.Remainder,\n  ExpressionOperator.GreaterThan,\n  ExpressionOperator.LessThan,\n  ExpressionOperator.Equal,\n  ExpressionOperator.NotEqual,\n  ExpressionOperator.GreaterThanOrEqual,\n  ExpressionOperator.LessThanOrEqual\n]);\n\n@Component({\n  selector: 'rx-rich-expression-editor',\n  templateUrl: 'rich-expression-editor.component.html',\n  styleUrls: ['rich-expression-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RichExpressionEditorComponent,\n      multi: true\n    }\n  ]\n})\nexport class RichExpressionEditorComponent implements ControlValueAccessor, OnInit, OnChanges {\n  type = CKEditor4.EditorType.INLINE;\n\n  ckConfig: CKEditor4.Config = {\n    startupFocus: true,\n    allowedContent: true,\n    extraPlugins: RX_DATA_DICTIONARY_ITEM_PLUGIN.name,\n    toolbar: [],\n    skin: 'expression-editor',\n    title: false,\n    entities: false\n  };\n\n  onChange: (value: string) => void;\n\n  @Input()\n  dataDictionary: IDataDictionary;\n\n  @Input()\n  operatorRows: IExpressionOperatorRow[] = [];\n\n  @ViewChild(CKEditorComponent, { static: true })\n  ckComponent: CKEditorComponent;\n\n  @HostBinding('class')\n  class = 'd-flex flex-column h-100 border';\n\n  control: AbstractControl;\n  operatorsByGroup: { platform: IExpressionOperator[]; custom: IExpressionOperator[] } = { custom: [], platform: [] };\n\n  private initialValue: string;\n  private isCkEditorInstanceReady = false;\n  private onTouched: () => void;\n  private dataDictionaryExpressionsMap: Map<string, IDataDictionaryBranch & { tooltip: string }>;\n  private menuItems: { [itemName: string]: number } = {};\n  private iFrameContentWindow: WindowProxy;\n\n  // Keep operators in descending order by length to find compound operator for autocomplete launch.\n  private autocompleteTriggers = [\n    ExpressionOperator.NotEqual,\n    ExpressionOperator.GreaterThanOrEqual,\n    ExpressionOperator.LessThanOrEqual,\n    ExpressionOperator.LessThan,\n    ExpressionOperator.GreaterThan,\n    ExpressionOperator.Equal\n  ];\n\n  constructor(\n    private injector: Injector,\n    @Inject(DOCUMENT) private document,\n    private rxTreeService: RxTreeService,\n    private rxExpressionParserService: RxExpressionParserService,\n    private rxObjectUtilsService: RxObjectUtilsService,\n    private rxDataDictionaryUtils: RxDataDictionaryUtils,\n    private rxThemingService: RxThemingService\n  ) {}\n\n  ngOnInit(): void {\n    this.control = this.injector.get(NgControl).control;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.dataDictionary) {\n      this.dataDictionaryExpressionsMap = flow(\n        (dataDictionary) => this.rxDataDictionaryUtils.addTooltips(dataDictionary),\n        (dataDictionary) =>\n          this.rxTreeService.flatten({\n            children: dataDictionary\n          }),\n        (dataDictionary) =>\n          reduce(\n            dataDictionary,\n            (dictionary, node) => {\n              if (isArray(node.expression)) {\n                node.expression.forEach((expressionItem) => {\n                  dictionary.push({\n                    ...node,\n                    expression: expressionItem\n                  });\n                });\n              } else {\n                dictionary.push(node);\n              }\n\n              return dictionary;\n            },\n            []\n          ),\n        (dataDictionary) => this.rxObjectUtilsService.mapFromArray(dataDictionary, 'expression')\n      )(this.dataDictionary);\n    }\n  }\n\n  writeValue(value: string): void {\n    if (value) {\n      // encode all HTML tags to avoid their rendering by CKEDITOR, i.e.\n      // html entered by user should be rendered as plain text\n      // For example, <b>STRING</b> should be displayed in the editor exactly the same, as <b>STRING</b>\n      value = CKEDITOR.tools.htmlEncode(value);\n\n      value = this.normalizeExpression(value);\n    } else {\n      value = null;\n    }\n\n    // Ckeditor instance is not ready on first \"writeValue\" call.\n    if (this.isCkEditorInstanceReady) {\n      this.ckComponent.instance.setData(value);\n    } else {\n      this.initialValue = value;\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  onCkEditorInstanceReady(event: CKEditor4.EventInfo): void {\n    this.isCkEditorInstanceReady = true;\n\n    // Even if toolbar doesn't have any items, outer container is displayed and needs to be hidden.\n    this.document.getElementById(`${event.editor.id}_top`).style.display = 'none';\n\n    this.ckComponent.instance.on('change', () => {\n      const value = trim(this.ckComponent.instance.getData());\n\n      if (this.control.value !== value && !this.ckComponent.instance.gettingCursorPosition) {\n        this.onChange(value);\n\n        if (value) {\n          const { position, x, y } = this.getCursor();\n          const expressionBeforeCursor = value.substr(0, position);\n\n          const autocompleteTrigger = this.autocompleteTriggers.find((trigger) =>\n            endsWith(expressionBeforeCursor, trigger)\n          );\n\n          if (autocompleteTrigger) {\n            // Remove autocomplete trigger from expression, e.g '${foo} >=' -> '${foo} '.\n            const expressionToParse = expressionBeforeCursor.slice(0, -autocompleteTrigger.length);\n            const node = this.dataDictionaryExpressionsMap.get(this.getLastExpressionFragment(expressionToParse));\n\n            if (node?.autocompleteOptions) {\n              this.launchAutocomplete(node.autocompleteOptions, x, y);\n            }\n          }\n        }\n      }\n    });\n\n    this.ckComponent.instance.on(\n      'getData',\n      (evt: CKEDITOR.eventInfo) => {\n        evt.data.dataValue = evt.data.dataValue.replace(/<p>|<span>|<\\/p>|<\\/span>|<br \\/>/g, '');\n        evt.data.dataValue = CKEDITOR.tools.htmlDecode(evt.data.dataValue);\n\n        // convert 160 and 8203 charCode space to 32 which supported by server\n        evt.data.dataValue = evt.data.dataValue.replace(new RegExp(String.fromCharCode(160), 'g'), ' ');\n        evt.data.dataValue = evt.data.dataValue.replace(new RegExp(String.fromCharCode(8203), 'g'), ' ');\n      },\n      null,\n      null,\n      15\n    );\n\n    this.ckComponent.instance.on('key', (evt: CKEDITOR.eventInfo) => {\n      if (evt.data.keyCode === 13) {\n        // Enter key\n        evt.cancel();\n      }\n    });\n\n    this.ckComponent.instance.on('paste', (evt: CKEDITOR.eventInfo) => {\n      if (evt.data.method === 'drop') {\n        const value = evt.data.dataTransfer.getData('value');\n\n        if (value) {\n          evt.data.dataValue = value;\n        }\n      }\n\n      if (evt.data.type === 'html') {\n        const container = new CKEDITOR.dom.element('div');\n\n        container.appendHtml(evt.data.dataValue);\n\n        // When selected range with widget is copied to clipboard, start node of bookmark remains unremoved there\n        let elementToRemove = container.findOne('[id*=\"cke_bm_\"]');\n\n        if (elementToRemove) {\n          if (CKEDITOR.env.gecko && container.getChildCount() > 1) {\n            elementToRemove = elementToRemove.getParent();\n          }\n\n          elementToRemove.remove();\n          evt.data.dataValue = container.getHtml();\n        }\n\n        container.remove();\n      }\n    });\n\n    this.ckComponent.instance.on(\n      'toHtml',\n      (evt: CKEDITOR.eventInfo) => {\n        // Check if data value has already been converted to html,\n        // e.g. while dragging a pill from one position to another withing the expression\n        // there is no need to convert it to HTML again\n        if (!includes(evt.data.dataValue, 'rx-id=\"rx-data-dictionary-item\"')) {\n          evt.data.dataValue = this.rxExpressionParserService.parse(evt.data.dataValue, this.transformToTag.bind(this));\n        }\n\n        if (endsWith(evt.data.dataValue, '</span>')) {\n          evt.data.dataValue += '<span>&nbsp;</span>';\n        }\n      },\n      null,\n      null,\n      4\n    );\n\n    // Set initial value when \"toHtml\" listener is already added.\n    this.ckComponent.instance.setData(this.initialValue);\n\n    this.ckComponent.instance.contextMenu.addListener(() => this.menuItems);\n\n    this.ckComponent.instance.contextMenu.onHide = (): void => {\n      this.iFrameContentWindow.removeEventListener('keydown', this.keydownHandler);\n\n      this.menuItems = {};\n    };\n\n    this.control.statusChanges\n      .pipe(\n        map(() => this.control.disabled),\n        startWith(this.control.disabled),\n        distinctUntilChanged()\n      )\n      .subscribe((disabled) => {\n        this.ckComponent.instance.setReadOnly(disabled);\n      });\n\n    delete this.ckComponent.instance._.menuItems.paste;\n    delete this.ckComponent.instance._.menuItems.cut;\n    delete this.ckComponent.instance._.menuItems.copy;\n  }\n\n  insertHtml(html: string): void {\n    this.ckComponent.instance.insertHtml(html);\n  }\n\n  isNarrowOperator(operator: ExpressionOperator): boolean {\n    return narrowOperatorButtons.has(operator);\n  }\n\n  addOperator(value: string): void {\n    if (value !== ExpressionOperator.DoubleQuote && !startsWith(value, '$')) {\n      value += '&nbsp;';\n    }\n\n    this.insertHtml(value);\n  }\n\n  private launchAutocomplete(options: IDataDictionaryAutocompleteOption[], x: number, y: number): void {\n    CKEDITOR.skin.loadPart('rx-suggestions', noop);\n\n    const group = 'suggestions';\n\n    this.ckComponent.instance.addMenuGroup(group);\n\n    options.forEach((option, index) => {\n      const suggestionBoxItem = 'suggestionBox suggestionBoxItem' + index;\n\n      this.menuItems[suggestionBoxItem] = CKEDITOR.TRISTATE_OFF;\n\n      this.ckComponent.instance.addMenuItem(suggestionBoxItem, {\n        label: option.label,\n        group,\n\n        onClick: () => {\n          this.ckComponent.instance.focus();\n\n          this.ckComponent.instance.insertHtml(option.expression);\n        }\n      });\n    });\n\n    this.ckComponent.instance.contextMenu.show(this.ckComponent.instance.document.getBody(), null, x, y);\n\n    const menuPanel = this.ckComponent.instance.contextMenu._.panel;\n\n    menuPanel.element.addClass('rx-suggestions-panel');\n\n    this.iFrameContentWindow = menuPanel._.iframe.$.contentWindow;\n\n    this.iFrameContentWindow.document.documentElement.classList.add('rx-suggestions-panel_container');\n\n    this.rxThemingService.copyCssVariables(RX_THEMING.cssVariablesForCkEditor, this.iFrameContentWindow.document);\n\n    this.iFrameContentWindow.addEventListener('keydown', this.keydownHandler);\n  }\n\n  private transformToTag(token: ExpressionParserToken, expression: string): string {\n    let tag = expression;\n\n    if (\n      [\n        ExpressionParserToken.ArExpression,\n        ExpressionParserToken.RxExpression,\n        ExpressionParserToken.SingleQuoteRxExpression,\n        ExpressionParserToken.SingleQuoteTextExpression\n      ].includes(token)\n    ) {\n      const node = this.dataDictionaryExpressionsMap.get(expression);\n\n      if (node) {\n        tag = [\n          `<span class=\"expression-node\" rx-id=\"rx-data-dictionary-item\" ${RX_DATA_DICTIONARY_ITEM_PLUGIN.widgetAttributeName}=\"${expression}\" title=\"${node.tooltip}\">`,\n          `<span class=\"expression-node-icon ${node.icon || 'd-icon-arrow_right_square_input'}\">&nbsp;</span>`,\n          `<span class=\"expression-node-label\">${node.label}</span>`,\n          '</span>'\n        ].join('');\n      }\n    }\n\n    return tag;\n  }\n\n  private normalizeExpression(expression: string): string {\n    return this.rxExpressionParserService.parse(expression, (token, expressionFragment) => {\n      if (token === ExpressionParserToken.RxStringExpression) {\n        // since multiple \\x20 spaces get collapsed to a single space in HTML. we have to convert them to\n        // non-breaking spaces (&nbsp;) in order to preserve them in expression's literals\n        return expressionFragment.replace(/ /g, '&nbsp;');\n      } else if (token === ExpressionParserToken.ArExpression) {\n        return expressionFragment.replace('\\\\', '');\n      } else {\n        return expressionFragment;\n      }\n    });\n  }\n\n  // parse and get last expression, e.g.\n  // '${foo} + ${bar}' -> '${bar}'\n  // '${foo} + ${bar}  ' -> '${bar}'\n  // '${foo} + \"bar\"' -> undefined\n  private getLastExpressionFragment(expression: string): string {\n    const expressionMap = new Map<string, string>();\n\n    const lastExpressionFragment = last(\n      this.rxExpressionParserService\n        .parse(expression, (token, expressionFragment) => {\n          if (token !== ExpressionParserToken.RxStringExpression) {\n            const node = `$$rx-${uniqueId()}-rx$$`;\n\n            expressionMap.set(node, expressionFragment);\n\n            expressionFragment = node;\n          }\n\n          return expressionFragment;\n        })\n        .split(/(\\$\\$rx-[\\d]+-rx\\$\\$)/g)\n        .filter((element) => !isEmpty(element) && !/^((\\$\\$rx-)|(-rx\\$\\$)|([\\s]+))$/.test(element))\n    );\n\n    return expressionMap.get(lastExpressionFragment);\n  }\n\n  // prevent navigation to the previous page in Edge and Firefox when the user presses the Backspace key\n  private keydownHandler(event: KeyboardEvent): void {\n    if (event.code === 'Backspace') {\n      event.preventDefault();\n    }\n  }\n\n  // Insert a dummy element into current position of caret\n  // in order to get coordinates of caret and expression fragment before the caret\n  // https://ckeditor.com/old/comment/65868#comment-65868\n  private getCursor(): { x: number; y: number; position: number } {\n    this.ckComponent.instance.gettingCursorPosition = true;\n\n    const dummyElement = this.ckComponent.instance.document.createElement('span');\n    const range = this.ckComponent.instance.getSelection().getRanges()[0];\n\n    range.trim(false, true);\n\n    const startContainer = range.startContainer;\n    const nextNode = startContainer.getChild(range.startOffset);\n\n    if (nextNode) {\n      dummyElement.insertBefore(nextNode);\n    } else {\n      startContainer.append(dummyElement);\n    }\n\n    let x = 0;\n    let y = 0;\n\n    let nodeElement = dummyElement.$;\n\n    while (nodeElement.offsetParent) {\n      x += nodeElement.offsetLeft;\n      y += nodeElement.offsetTop;\n      nodeElement = nodeElement.offsetParent;\n    }\n\n    x += nodeElement.offsetLeft;\n    y += nodeElement.offsetTop;\n    y += 30;\n\n    dummyElement.setText(this.ckComponent.instance.id);\n\n    const position = this.ckComponent.instance.getData().indexOf(this.ckComponent.instance.id);\n\n    dummyElement.remove();\n\n    this.ckComponent.instance.gettingCursorPosition = false;\n\n    return {\n      x,\n      y,\n      position\n    };\n  }\n}\n","<ckeditor\n  class=\"flex-grow-1 position-relative form-control border\"\n  [config]=\"ckConfig\"\n  [type]=\"type\"\n  (ready)=\"onCkEditorInstanceReady($event)\"\n  [ngClass]=\"{ 'invalid-expression-border': control.invalid }\"\n></ckeditor>\n\n<adapt-rx-feedback [errors]=\"control.errors\"></adapt-rx-feedback>\n\n<div class=\"border-top bg-gray-200 pt-3 pb-1 px-2\" *ngIf=\"control.enabled\">\n  <div class=\"d-flex flex-wrap justify-content-center\" *ngFor=\"let row of operatorRows\">\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"secondary\"\n      class=\"mx-1 mb-2 bg-white\"\n      [ngClass]=\"isNarrowOperator(operator.value) ? 'narrow-operator' : 'wide-operator'\"\n      (click)=\"addOperator(operator.value)\"\n      [adaptPopover]=\"operator.tooltip ? tooltipContent : null\"\n      [popoverTitle]=\"operator.tooltip?.title\"\n      triggers=\"mouseover:mouseout\"\n      placement=\"auto\"\n      *ngFor=\"let operator of row\"\n    >\n      {{ operator.displayValue }}\n\n      <ng-template #tooltipContent>\n        <span [innerHtml]=\"operator?.tooltip?.content\"></span>\n      </ng-template>\n    </button>\n  </div>\n</div>\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { AdaptTreeNode } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-data-dictionary-node',\n  templateUrl: './data-dictionary-node.component.html',\n  styleUrls: ['./data-dictionary-node.component.scss']\n})\nexport class DataDictionaryNodeComponent {\n  @Input()\n  node: AdaptTreeNode;\n\n  @Input()\n  filterQuery: string;\n\n  @Output()\n  expressionNodeSelected = new EventEmitter<AdaptTreeNode>();\n}\n","<ng-container *ngIf=\"!node.data.expression; else expressionNode\">\n  <adapt-highlight class=\"p-1\" [title]=\"node.label\" [result]=\"node.label\" [term]=\"filterQuery\">></adapt-highlight>\n</ng-container>\n\n<ng-template #expressionNode>\n  <div class=\"d-flex\" rx-id=\"node\">\n    <button\n      type=\"button\"\n      (click)=\"expressionNodeSelected.emit(node)\"\n      class=\"expression-node-button btn btn-link d-icon-plus_circle py-1 px-2\"\n    ></button>\n\n    <span class=\"expression-node\" [draggable]=\"true\" [attr.rx-expression]=\"node.data.expression\">\n      <span [ngClass]=\"node.data.icon || 'd-icon-arrow_right_square_input'\" class=\"expression-node-icon\"></span>\n\n      <adapt-highlight class=\"expression-node-label\" [title]=\"node.label\" [result]=\"node.label\" [term]=\"filterQuery\"\n        >></adapt-highlight\n      >\n    </span>\n\n    <i\n      *ngIf=\"node.data.info?.type === 'function'\"\n      class=\"py-1 px-2 d-icon-question_circle_o\"\n      [adaptPopover]=\"functionInfo\"\n      [popoverTitle]=\"node.data.info.data.signature\"\n      [autoClose]=\"'outside'\"\n      [maxWidth]=\"'350'\"\n    >\n      <ng-template #functionInfo>\n        <p>{{ node.data.info.data.description }}</p>\n\n        <table *ngIf=\"node.data.info.data.parameters?.length\">\n          <tr>\n            <th class=\"pr-4\">Parameter</th>\n            <th>Description</th>\n          </tr>\n\n          <tr class=\"mt-1\" *ngFor=\"let parameter of node.data.info.data.parameters\">\n            <td class=\"align-top\">{{ $any(parameter).name }}</td>\n            <td class=\"align-top\">{{ $any(parameter).description }}</td>\n          </tr>\n        </table>\n      </ng-template>\n    </i>\n  </div>\n</ng-template>\n","import { Component, EventEmitter, HostListener, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { AdaptTreeNode } from '@bmc-ux/adapt-angular';\nimport { isArray, map as _map, uniqueId, flow, compact } from 'lodash';\nimport { IDataDictionary } from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-data-dictionary',\n  templateUrl: './data-dictionary.component.html',\n  styleUrls: ['./data-dictionary.component.scss']\n})\nexport class DataDictionaryComponent implements OnChanges {\n  @Input()\n  dataDictionary: IDataDictionary;\n\n  @Output()\n  nodeSelected = new EventEmitter();\n\n  @Output()\n  dragStart = new EventEmitter<any>();\n\n  tree: AdaptTreeNode[];\n\n  @HostListener('dragstart', ['$event'])\n  onDragStart(event: DragEvent) {\n    const value = (event.target as Element).getAttribute('rx-expression');\n\n    if (value) {\n      event.dataTransfer.setData('value', value);\n    } else {\n      event.preventDefault();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.dataDictionary) {\n      this.tree = this.prepareTreeForAdapt(this.dataDictionary);\n    }\n  }\n\n  onNodeExpand(e) {}\n\n  onNodeSelected(node: AdaptTreeNode): void {\n    this.nodeSelected.next(node);\n  }\n\n  private prepareTreeForAdapt(dataDictionary: IDataDictionary): AdaptTreeNode[] {\n    return flow(\n      (dictionary) =>\n        _map(dictionary, (element) =>\n          !element.hidden && (element.expression || element.children?.length)\n            ? {\n                label: element.label,\n                children: this.prepareTreeForAdapt(element.children),\n                expanded: element.expanded,\n                data: {\n                  expression: isArray(element.expression) ? element.expression[0] : element.expression,\n                  icon: element.icon,\n                  info: element.info\n                },\n                key: uniqueId(),\n                draggable: Boolean(element.expression)\n              }\n            : null\n        ),\n      (dictionary) => compact(dictionary)\n    )(dataDictionary);\n  }\n}\n","<adapt-tree #treeComponent [value]=\"tree\" filter=\"true\" (onNodeExpand)=\"onNodeExpand($event)\" [draggableNodes]=\"true\">\n  <ng-template let-node adaptTreeNodeTemplate>\n    <rx-data-dictionary-node\n      [filterQuery]=\"treeComponent.filterQuery\"\n      [node]=\"node\"\n      (expressionNodeSelected)=\"onNodeSelected($event)\"\n    ></rx-data-dictionary-node>\n  </ng-template>\n</adapt-tree>\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport { ActiveModalRef, AdaptTreeNode, DismissReasons } from '@bmc-ux/adapt-angular';\nimport {\n  IDataDictionary,\n  IExpressionConfigurator,\n  IExpressionOperatorRow,\n  RxExpressionParserService\n} from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxError } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { findIndex, sortBy } from 'lodash';\nimport { concat, EMPTY, Observable, of, throwError } from 'rxjs';\nimport { concatMap, finalize, switchMap, switchMapTo, take, tap } from 'rxjs/operators';\nimport { IExpressionEditorModalConfig } from './expression-editor-modal-config.interface';\nimport { IExpressionEditorLegendItem, IExpressionEditorProperty } from './expression-editor.interfaces';\nimport { RichExpressionEditorComponent } from './rich-expression-editor/rich-expression-editor.component';\n\n@Component({\n  selector: 'rx-expression-editor',\n  templateUrl: './expression-editor.component.html',\n  styleUrls: ['./expression-editor.component.scss']\n})\nexport class ExpressionEditorComponent extends RxModalClass implements OnInit {\n  get expression(): string {\n    return this.currentProperty && this.currentProperty.value;\n  }\n\n  set expression(value: string) {\n    if (this.currentProperty) {\n      this.currentProperty.value = value;\n    }\n  }\n\n  currentProperty: IExpressionEditorProperty;\n  dataDictionary: IDataDictionary;\n  legend: IExpressionEditorLegendItem[];\n  operatorRows: IExpressionOperatorRow[];\n\n  private isPropertyContextReady = false;\n  private config: IExpressionEditorModalConfig = this.activeModalRef.getData();\n  private expressionConfigurator: IExpressionConfigurator = this.config.expressionConfigurator;\n  private availableExpressionProperties: IExpressionEditorProperty[] = [];\n\n  private invalidExpressionMessage = this.translateService.instant(\n    'com.bmc.arsys.rx.client.expression-editor.invalid-expression.message'\n  );\n\n  get isReadOnly(): boolean {\n    return this.config.isReadOnly;\n  }\n\n  get isNavigationEnabled(): boolean {\n    return this.isPropertyContextReady && (this.hasPreviousProperty() || this.hasNextProperty());\n  }\n\n  get isPreviousButtonDisabled(): boolean {\n    return !this.isPropertyContextReady || this.richExpressionEditorControl.invalid || !this.hasPreviousProperty();\n  }\n\n  get isNextButtonDisabled(): boolean {\n    return !this.isPropertyContextReady || this.richExpressionEditorControl.invalid || !this.hasNextProperty();\n  }\n\n  @ViewChild(RichExpressionEditorComponent, { static: true })\n  richExpressionEditor: RichExpressionEditorComponent;\n\n  @ViewChild(RichExpressionEditorComponent, { read: NgModel, static: true })\n  richExpressionEditorControl: NgModel;\n\n  constructor(\n    public activeModalRef: ActiveModalRef,\n    private translateService: TranslateService,\n    private rxExpressionParserService: RxExpressionParserService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.initialize(this.config.property).subscribe();\n  }\n\n  onSave(): void {\n    this.writeValue().subscribe({\n      complete: () => {\n        this.activeModalRef.close();\n      }\n    });\n  }\n\n  onNodeSelected(node: AdaptTreeNode): void {\n    this.richExpressionEditor.insertHtml(node.data.expression);\n  }\n\n  navigateToNextProperty(): void {\n    this.navigateToProperty(this.getCurrentPropertyIndex() + 1);\n  }\n\n  navigateToPreviousProperty(): void {\n    this.navigateToProperty(this.getCurrentPropertyIndex() - 1);\n  }\n\n  cancelModal(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  isDirty(): boolean {\n    return this.richExpressionEditorControl.dirty;\n  }\n\n  private navigateToProperty(index: number): void {\n    this.isPropertyContextReady = false;\n\n    concat(\n      this.writeValue(),\n      // getPropertyByIndex must be called when writeValue observable will be\n      // completed to make sure availableExpressionProperties are up to date.\n      of(index).pipe(concatMap((i) => this.initialize(this.getPropertyByIndex(i))))\n    )\n      .pipe(\n        finalize(() => {\n          this.isPropertyContextReady = true;\n          this.richExpressionEditorControl.control.markAsPristine();\n        })\n      )\n      .subscribe();\n  }\n\n  private initialize(property: IExpressionEditorProperty): Observable<never> {\n    return concat(\n      this.updateAvailableExpressionProperties(),\n      this.expressionConfigurator.getDataDictionary(property.path).pipe(\n        tap((dataDictionary) => {\n          this.currentProperty = property;\n          this.operatorRows = this.expressionConfigurator.getOperatorRows(property.path);\n          this.dataDictionary = dataDictionary;\n          this.legend = sortBy(this.config.legend, 'label');\n\n          this.isPropertyContextReady = true;\n        }),\n        take(1),\n        switchMapTo(EMPTY)\n      )\n    );\n  }\n\n  private writeValue(): Observable<never> {\n    return this.expressionConfigurator.validateProperty(this.currentProperty.path, this.currentProperty.value).pipe(\n      tap((isValid) => {\n        if (isValid) {\n          this.config.api.writeValue(\n            this.currentProperty.path,\n            this.rxExpressionParserService.stripSpaces(this.currentProperty.value)\n          );\n        } else {\n          this.richExpressionEditorControl.control.setErrors({\n            invalidExpression: {\n              message: this.invalidExpressionMessage\n            }\n          });\n        }\n      }),\n      switchMap((isValid) => (isValid ? EMPTY : throwError(new RxError())))\n    );\n  }\n\n  private updateAvailableExpressionProperties(): Observable<never> {\n    return this.config.expressionPropertyNavigator\n      ? this.config.expressionPropertyNavigator.getProperties().pipe(\n          take(1),\n          tap((properties) => {\n            this.availableExpressionProperties = properties;\n          }),\n          switchMapTo(EMPTY)\n        )\n      : EMPTY;\n  }\n\n  private hasPreviousProperty(): boolean {\n    const currentIndex = this.getCurrentPropertyIndex();\n\n    return currentIndex > 0;\n  }\n\n  private hasNextProperty(): boolean {\n    const currentIndex = this.getCurrentPropertyIndex();\n\n    return currentIndex !== this.availableExpressionProperties.length - 1 && currentIndex !== -1;\n  }\n\n  private getCurrentPropertyIndex(): number {\n    return findIndex(this.availableExpressionProperties, { path: this.currentProperty.path });\n  }\n\n  private getPropertyByIndex(propertyIndex: number): IExpressionEditorProperty {\n    return this.availableExpressionProperties[propertyIndex];\n  }\n}\n","<div class=\"modal-body row\">\n  <div class=\"d-flex flex-column h-100\" [ngClass]=\"isReadOnly ? 'col' : 'col-6'\">\n    <div class=\"d-flex align-items-center\">\n      <ng-container *ngIf=\"isNavigationEnabled\">\n        <button\n          type=\"button\"\n          class=\"d-icon-angle_left mr-1\"\n          adapt-button\n          btn-type=\"secondary\"\n          size=\"small\"\n          (click)=\"navigateToPreviousProperty()\"\n          [disabled]=\"isPreviousButtonDisabled\"\n          rx-id=\"previous-button\"\n        ></button>\n\n        <button\n          type=\"button\"\n          class=\"d-icon-angle_right mr-2\"\n          adapt-button\n          btn-type=\"secondary\"\n          size=\"small\"\n          (click)=\"navigateToNextProperty()\"\n          [disabled]=\"isNextButtonDisabled\"\n          rx-id=\"next-button\"\n        ></button>\n      </ng-container>\n\n      <h5 class=\"m-0 text-truncate\">\n        {{\n          'com.bmc.arsys.rx.client.expression-editor.expression-for-property.label'\n            | translate: { propertyName: currentProperty?.label || (currentProperty?.path | titlecase) }\n        }}\n      </h5>\n    </div>\n\n    <div class=\"flex flex-grow-1 h-100 mt-2\">\n      <rx-rich-expression-editor\n        class=\"flex-grow-1 h-100\"\n        [dataDictionary]=\"dataDictionary\"\n        [(ngModel)]=\"expression\"\n        [operatorRows]=\"operatorRows\"\n        [disabled]=\"isReadOnly\"\n      ></rx-rich-expression-editor>\n    </div>\n  </div>\n\n  <div class=\"col-6 d-flex flex-column h-100 pr-0\" *ngIf=\"!isReadOnly\">\n    <ng-template #legendContentTemplate>\n      <div class=\"text-left p-2\">\n        <div *ngFor=\"let item of legend; let last = last\" [class.pb-2]=\"!last\">\n          <span class=\"legend-item-icon px-2 py-1\" [ngClass]=\"item.icon\"></span>\n          <span class=\"ml-2\">{{ item.label }}</span>\n        </div>\n      </div>\n    </ng-template>\n    <h5 class=\"mt-0\">\n      {{ 'com.bmc.arsys.rx.client.expression-editor.available-values.label' | translate }}\n      <adapt-icon\n        name=\"info_circle_o_adapt\"\n        [adaptTooltip]=\"legendContentTemplate\"\n        width=\"260\"\n        placement=\"bottom\"\n      ></adapt-icon>\n    </h5>\n\n    <div class=\"data-dictionary-container flex-grow-1\">\n      <rx-data-dictionary\n        [dataDictionary]=\"dataDictionary\"\n        (nodeSelected)=\"onNodeSelected($event)\"\n      ></rx-data-dictionary>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    *ngIf=\"!isReadOnly\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    (click)=\"onSave()\"\n    [disabled]=\"richExpressionEditorControl.invalid || richExpressionEditorControl.pristine\"\n    rx-id=\"save-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.ok.label' | translate }}\n  </button>\n\n  <button type=\"button\" adapt-button btn-type=\"secondary\" (click)=\"cancelModal()\" rx-id=\"cancel-button\">\n    {{\n      (isReadOnly ? 'com.bmc.arsys.rx.client.common.close.label' : 'com.bmc.arsys.rx.client.common.cancel.label')\n        | translate\n    }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { has } from 'lodash';\nimport { RX_DATA_DICTIONARY_ITEM_PLUGIN } from './data-dictionary-item-plugin.constant';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxDataDictionaryItemPluginService {\n  constructor() {\n    CKEDITOR.plugins.add(RX_DATA_DICTIONARY_ITEM_PLUGIN.name, {\n      requires: 'widget',\n\n      init(editor: CKEDITOR.editor): void {\n        editor.widgets.add('rx-data-dictionary-item-widget', {\n          inline: true,\n\n          upcast(element: CKEDITOR.htmlParser.element): boolean {\n            return has(element.attributes, RX_DATA_DICTIONARY_ITEM_PLUGIN.widgetAttributeName);\n          },\n\n          downcast(element: CKEDITOR.htmlParser.element): CKEDITOR.htmlParser.cdata {\n            return new CKEDITOR.htmlParser.cdata(\n              element.attributes[RX_DATA_DICTIONARY_ITEM_PLUGIN.widgetAttributeName]\n            );\n          },\n\n          // @ts-ignore\n          // https://ckeditor.com/docs/ckeditor4/latest/api/CKEDITOR_plugins_widget_definition.html#method-getClipboardHtml\n          getClipboardHtml(): string {\n            return this.element.getAttributes()[RX_DATA_DICTIONARY_ITEM_PLUGIN.widgetAttributeName];\n          }\n        });\n      }\n    });\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  AdaptButtonModule,\n  AdaptHighlightModule,\n  AdaptIconModule,\n  AdaptModalModule,\n  AdaptPopoverModule,\n  AdaptRxFeedbackModule,\n  AdaptTooltipModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptSearchModule, AdaptTypeaheadSubModule } from '@bmc-ux/obsolete';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CKEditorModule } from 'ckeditor4-angular';\nimport { ExpressionEditorComponent } from './expression-editor.component';\nimport { RichExpressionEditorComponent } from './rich-expression-editor/rich-expression-editor.component';\nimport { DataDictionaryComponent } from './data-dictionary/data-dictionary.component';\nimport { DataDictionaryNodeComponent } from './data-dictionary-node/data-dictionary-node.component';\nimport { RxDataDictionaryItemPluginService } from './data-dictionary-item-plugin.service';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ExpressionEditorComponent,\n    RichExpressionEditorComponent,\n    DataDictionaryComponent,\n    DataDictionaryNodeComponent\n  ],\n  exports: [ExpressionEditorComponent],\n  entryComponents: [ExpressionEditorComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n    AdaptButtonModule,\n    AdaptHighlightModule,\n    AdaptIconModule,\n    AdaptModalModule,\n    AdaptSearchModule,\n    CKEditorModule,\n    AdaptTooltipModule,\n    AdaptTreeModule,\n    AdaptPopoverModule,\n    AdaptRxFeedbackModule,\n    AdaptTypeaheadSubModule,\n    TranslateModule\n  ]\n})\nexport class ExpressionEditorModule {\n  constructor(rxDataDictionaryItemPluginService: RxDataDictionaryItemPluginService) {}\n}\n","import { Injectable } from '@angular/core';\nimport { OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { Observable } from 'rxjs';\nimport { ExpressionEditorComponent } from './expression-editor.component';\nimport { IExpressionEditorConfig, IExpressionEditorPropertyChange } from './expression-editor.interfaces';\nimport { RxError } from '@helix/platform/utils';\nimport { isString } from 'lodash';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IDialogApi, RxModalService } from '@helix/platform/ui-kit';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxExpressionEditorService {\n  constructor(private translateService: TranslateService, private rxModalService: RxModalService) {}\n\n  openEditor(\n    config: IExpressionEditorConfig,\n    onDialogApiReady?: (dialogApi: IDialogApi) => void\n  ): Observable<IExpressionEditorPropertyChange> {\n    return new Observable((observer) => {\n      this.rxModalService\n        .openModal({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.edit-expression.title'),\n          data: {\n            ...config,\n            api: {\n              writeValue(propertyPath, propertyValue) {\n                observer.next({ path: propertyPath, value: propertyValue });\n              }\n            },\n            onApiReady: (dialogApi: IDialogApi) => {\n              onDialogApiReady?.(dialogApi);\n            }\n          },\n          content: ExpressionEditorComponent,\n          size: (config.isReadOnly ? 'sm' : OpenViewActionModalSize.Large) as any\n        })\n        .then(() => observer.complete())\n        .catch((e) => {\n          onDialogApiReady?.(null);\n\n          return isString(e) ? new RxError(e) : e;\n        });\n    });\n  }\n}\n","import { IExpressionConfigurator } from '@helix/platform/shared/api';\n\nimport { IExpressionFormControlOptions } from '../expression-form-control/expression-form-control.types';\nimport { ITextFormControlOptions } from '../text-form-control/text-form-control-options.interface';\nimport { ISelectFormControlOptions } from '../select-form-control/select-form-control.interfaces';\n\nexport enum AssignmentExpressionListTargetFieldType {\n  Text = 'text',\n  Select = 'select'\n}\n\nexport interface IAssignmentExpressionListFormControlOptions {\n  addItemText?: string;\n  confirmationMessage?: string;\n  sourceFieldOptions: {\n    expressionConfigurator: IExpressionConfigurator;\n    options: IExpressionFormControlOptions;\n    propertyName?: string;\n  };\n  targetFieldOptions: {\n    options: ITextFormControlOptions | ISelectFormControlOptions;\n    propertyName?: string;\n    type: AssignmentExpressionListTargetFieldType;\n  };\n}\n","import { Component, Input, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ITextFormControlOptions } from './text-form-control-options.interface';\nimport { AdaptRxTextfieldComponent } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-text-form-control',\n  templateUrl: './text-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: TextFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class TextFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, IFormFocusable {\n  @Input()\n  options: ITextFormControlOptions;\n\n  @ViewChild('editor', { static: true })\n  editor: AdaptRxTextfieldComponent;\n\n  constructor(private renderer: Renderer2) {\n    super();\n  }\n\n  focus() {\n    this.renderer.selectRootElement(this.editor.inputRef.nativeElement, true).focus();\n  }\n}\n","<adapt-rx-textfield\n  #editor\n  [isPassword]=\"options.isPassword\"\n  [label]=\"options.label\"\n  [required]=\"options.required\"\n  [(ngModel)]=\"value\"\n  [disabled]=\"isDisabled\"\n  [tooltip]=\"options.tooltip\"\n  [maxlength]=\"options.maxLength\"\n  [minlength]=\"options.minLength\"\n  [rxNoWhitespace]=\"!!(options.allowWhitespace === false || (options.required && options.allowWhitespace !== true))\"\n>\n</adapt-rx-textfield>\n","import {\n  Component,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ISelectFormControlOptions, ISelectOption } from './select-form-control.interfaces';\nimport { head, isUndefined, map, filter, includes, castArray, isNil } from 'lodash';\nimport { AdaptRxControlLabelTooltip, AdaptRxSelectComponent, RxSelectOption } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-select-form-control',\n  templateUrl: './select-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: SelectFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class SelectFormControlComponent\n  extends ValueAccessor<string | string[]>\n  implements IFormControlComponent, OnInit, OnChanges, OnDestroy\n{\n  @Input()\n  options: ISelectFormControlOptions;\n\n  @Input()\n  appendToBody = false;\n\n  @Input()\n  formControl: FormControl;\n\n  @ViewChild('adaptSelectComponent', { static: true })\n  adaptSelectComponent: AdaptRxSelectComponent;\n\n  @ViewChild('popoverContent', { static: true })\n  popoverContent: TemplateRef<{}>;\n\n  adaptSelectValue: ISelectOption[] = [];\n  selectOptions: ISelectOption[];\n  tooltip: AdaptRxControlLabelTooltip;\n\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  private isSortAlphabetically;\n\n  constructor(private renderer: Renderer2) {\n    super();\n  }\n\n  writeValue(value: string | string[]): void {\n    super.writeValue(value);\n\n    this.adaptSelectValue = this.getAdaptSelectValue(value);\n  }\n\n  focus(): void {\n    const el = this.renderer.selectRootElement(this.adaptSelectComponent.selectButtonRef.nativeElement, true);\n\n    el.focus();\n    el.click();\n  }\n\n  sortAlphabetically(items: ISelectOption[]): ISelectOption[] {\n    return items.sort((itemA, itemB) => itemA.name.localeCompare(itemB.name));\n  }\n\n  ngOnInit(): void {\n    if (this.formControl) {\n      const adaptControl = this.adaptSelectComponent.ngControl.control;\n\n      adaptControl.statusChanges.pipe(takeUntil(this.destroyed$)).subscribe(() => {\n        if (adaptControl.hasError('required') && !this.formControl.hasError('required')) {\n          Object.assign(adaptControl.errors, this.formControl.errors);\n          this.formControl.setErrors(adaptControl.errors, { emitEvent: false });\n        }\n      });\n\n      this.formControl.statusChanges.pipe(takeUntil(this.destroyed$)).subscribe(() => {\n        if (this.formControl.invalid) {\n          adaptControl.setErrors(this.formControl.errors, { emitEvent: false });\n        }\n      });\n    }\n\n    this.isSortAlphabetically = isUndefined(this.options.sortAlphabetically) || this.options.sortAlphabetically;\n\n    this.selectOptions = this.isSortAlphabetically\n      ? this.sortAlphabetically(this.options.options)\n      : this.options.options;\n\n    this.tooltip = this.options.tooltip\n      ? {\n          iconName: this.options.tooltip.iconName,\n          content: this.popoverContent,\n          placement: this.options.tooltip.placement,\n          popoverMode: this.options.tooltip.popoverMode\n        }\n      : null;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.options) {\n      this.selectOptions = this.isSortAlphabetically\n        ? this.sortAlphabetically(changes.options.currentValue.options)\n        : changes.options.currentValue.options;\n\n      // ADAPT select value must be updated if options are changed, this logic can be eliminated if ADAPT #4116 issue will be resolved.\n      this.adaptSelectValue = this.getAdaptSelectValue(this.value);\n    }\n  }\n\n  optionFormatter(option: ISelectOption): string {\n    return option.name;\n  }\n\n  onSelectionChange(value: RxSelectOption[]): void {\n    let selectValue = map(value, 'id');\n\n    selectValue = this.options.multiple ? selectValue : head(selectValue);\n\n    if (this.options.beforeValueChange) {\n      this.options.beforeValueChange(this.value, selectValue).then((allowValueChange) => {\n        if (allowValueChange) {\n          this.value = selectValue;\n          this.adaptSelectValue = this.getAdaptSelectValue(selectValue);\n        } else {\n          this.adaptSelectComponent.writeValue(this.adaptSelectValue);\n        }\n      });\n    } else {\n      this.value = selectValue;\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  // We have to convert value for ADAPT select, e.g:\n  // - \"foo\" -> [{id: \"foo\", name: \"Foo\"}] or,\n  // - [\"foo\", \"bar\"] => [{id: \"foo\", name: \"Foo\"}, {id: \"bar\", name: \"Bar\"}].\n  // This logic can be eliminated if #4116 issue will be resolved.\n  private getAdaptSelectValue(value: string | string[]): RxSelectOption[] {\n    return this.options?.options && !isNil(value)\n      ? filter(this.options.options, (option) => includes(castArray(value), option.id))\n      : [];\n  }\n}\n","<adapt-rx-select\n  #adaptSelectComponent\n  [options]=\"selectOptions\"\n  [required]=\"options.required\"\n  [emptyOption]=\"options.emptyOption\"\n  [multiple]=\"options.multiple\"\n  [selectAllButton]=\"options.multiple && !options.hideSelectAllButton\"\n  [deselectAllButton]=\"options.multiple && !options.hideDeselectAllButton\"\n  [enableFilter]=\"options.enableFilter\"\n  [ngModel]=\"adaptSelectValue\"\n  (ngModelChange)=\"onSelectionChange($event)\"\n  [tooltip]=\"tooltip\"\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [optionFormatter]=\"optionFormatter\"\n  [appendToBody]=\"appendToBody\"\n  class=\"d-block m-0\"\n>\n</adapt-rx-select>\n\n<ng-template #popoverContent>\n  <span [innerHtml]=\"options.tooltip.content\"></span>\n</ng-template>\n","import {\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  ChangeDetectorRef\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { concat, EMPTY, Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport { distinctUntilChanged, finalize, switchMap, takeUntil, takeWhile, tap } from 'rxjs/operators';\nimport { flow, isArray, isEmpty, isNil, map, reduce, uniqueId } from 'lodash';\nimport {\n  ExpressionParserToken,\n  IDataDictionary,\n  IDataDictionaryBranch,\n  IFormControlComponent,\n  RxDataDictionaryUtils,\n  RxExpressionParserService\n} from '@helix/platform/shared/api';\nimport { RxObjectUtilsService, RxTreeService } from '@helix/platform/utils';\nimport { IExpressionFormControlOptions } from './expression-form-control.types';\nimport { RX_EXPRESSION_EDITOR } from '../../expression-editor';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\n\ninterface IExpressionNode {\n  id: string;\n  label?: string;\n  expression: string;\n  isInvalid?: boolean;\n  tooltip?: string;\n}\n\n@Component({\n  selector: 'rx-expression-form-control',\n  templateUrl: 'expression-form-control.component.html',\n  styleUrls: ['./expression-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: ExpressionFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class ExpressionFormControlComponent\n  extends ValueAccessor<string>\n  implements OnInit, OnDestroy, IFormControlComponent\n{\n  @Input()\n  options: IExpressionFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  @HostBinding('attr.property-path')\n  @Input()\n  propertyPath: string;\n\n  @HostBinding('attr.property-label')\n  get propertyLabel(): string {\n    return this.options?.expressionEditorPropertyName || this.options?.label || null;\n  }\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  nodes: Array<IExpressionNode> = [];\n\n  private valueSubject = new Subject<string>();\n\n  private dataDictionaryExpressionMap: Map<\n    IDataDictionaryBranch['expression'],\n    IDataDictionaryBranch & { tooltip: string }\n  >;\n\n  private expressionNodeMap = new Map<string, IExpressionNode>();\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private dataDictionary$: Observable<IDataDictionary>;\n  isTouched = false;\n\n  constructor(\n    private rxExpressionParserService: RxExpressionParserService,\n    private rxObjectUtilsService: RxObjectUtilsService,\n    private rxDataDictionaryUtils: RxDataDictionaryUtils,\n    private rxTreeService: RxTreeService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.dataDictionary$ = this.options.dataDictionary$.pipe(takeUntil(this.destroyed$));\n\n    (isNil(this.value) ? this.valueSubject.asObservable() : concat(of(this.value), this.valueSubject.asObservable()))\n      .pipe(\n        distinctUntilChanged(),\n        switchMap((value) =>\n          // When value is not defined don't subscribe to data dictionary observable.\n          value\n            ? this.dataDictionary$.pipe(\n                tap(this.onDataDictionaryChange.bind(this)),\n                // Unsubscribe from data dictionary observable when value is removed.\n                takeWhile(() => Boolean(this.value))\n              )\n            : EMPTY.pipe(finalize(() => this.updateNodes()))\n        ),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe();\n  }\n\n  onWriteValue(value: string): void {\n    this.valueSubject.next(value);\n  }\n\n  openEditor(): void {\n    this.isTouched = true;\n\n    this.events.emit({\n      type: RX_EXPRESSION_EDITOR.events.openExpressionEditor,\n      payload: {\n        propertyPath: this.propertyPath,\n        propertyLabel: this.propertyLabel,\n        isReadOnly: this.isDisabled\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  private onDataDictionaryChange(dataDictionary: IDataDictionary) {\n    this.dataDictionaryExpressionMap = flow(\n      (dictionary) => this.rxDataDictionaryUtils.addTooltips(dictionary),\n      (dictionary) =>\n        this.rxTreeService.flatten({\n          children: dictionary\n        }),\n      (dictionary) =>\n        reduce(\n          dictionary,\n          (dictionary, node) => {\n            if (isArray(node.expression)) {\n              node.expression.forEach((expressionItem) => {\n                dictionary.push({\n                  ...node,\n                  expression: expressionItem\n                });\n              });\n            } else {\n              dictionary.push(node);\n            }\n\n            return dictionary;\n          },\n          []\n        ),\n      (dictionary) => this.rxObjectUtilsService.mapFromArray(dictionary, 'expression')\n    )(dataDictionary);\n\n    this.updateNodes();\n  }\n\n  private getExpressionNode(token: string, expression: string): IExpressionNode {\n    const node: IExpressionNode = {\n      id: `$$rx-${uniqueId()}-rx$$`,\n      expression\n    };\n\n    const isArExpression = token === ExpressionParserToken.ArExpression;\n\n    if (\n      token === ExpressionParserToken.RxExpression ||\n      token === ExpressionParserToken.SingleQuoteRxExpression ||\n      token === ExpressionParserToken.SingleQuoteTextExpression ||\n      isArExpression\n    ) {\n      const dataDictionaryItem = this.dataDictionaryExpressionMap.get(expression);\n\n      if (dataDictionaryItem) {\n        node.label = dataDictionaryItem.label;\n        node.tooltip = dataDictionaryItem.tooltip;\n      } else if (isArExpression || token === ExpressionParserToken.SingleQuoteTextExpression) {\n        node.label = expression;\n      } else {\n        node.isInvalid = true;\n      }\n    }\n\n    return node;\n  }\n\n  private updateNodes(): void {\n    if (this.dataDictionaryExpressionMap) {\n      this.expressionNodeMap.clear();\n\n      this.nodes = this.value\n        ? map(\n            this.rxExpressionParserService\n              .parse(\n                this.value,\n                (token, expression) => {\n                  if (token !== ExpressionParserToken.RxStringExpression) {\n                    if (token === ExpressionParserToken.ArExpression) {\n                      expression = expression.replace('\\\\', '');\n                    }\n\n                    const node = this.getExpressionNode(token, expression);\n\n                    this.expressionNodeMap.set(node.id, node);\n\n                    expression = node.id;\n                  }\n\n                  return expression;\n                },\n                this.options.operators\n              )\n              .split(/(\\$\\$rx-[\\d]+-rx\\$\\$)/g)\n              .filter((element) => !isEmpty(element) && !/^((\\$\\$rx-)|(-rx\\$\\$)|([\\s]+))$/.test(element)),\n            (nodeId) =>\n              this.expressionNodeMap.get(nodeId) || {\n                id: nodeId,\n                expression: nodeId\n              }\n          )\n        : [];\n\n      this.changeDetectorRef.markForCheck();\n    }\n  }\n}\n","<adapt-rx-control-label\n  *ngIf=\"!options.isLabelHidden\"\n  [label]=\"options.label\"\n  [showRequiredLabel]=\"options.isRequired\"\n  [tooltip]=\"\n    options.tooltip\n      ? {\n          content: popoverContent,\n          popoverMode: options.tooltip.popoverMode,\n          placement: options.tooltip.placement,\n          iconName: options.tooltip.iconName\n        }\n      : null\n  \"\n></adapt-rx-control-label>\n\n<ng-template #popoverContent>\n  <span [innerHtml]=\"options.tooltip.content\"></span>\n</ng-template>\n\n<button\n  type=\"button\"\n  adapt-button\n  [btn-type]=\"'tertiary'\"\n  [ngClass]=\"{ 'bg-hover': nodes.length }\"\n  class=\"position-relative text-left overflow-hidden w-100 rounded p-0\"\n  (click)=\"openEditor()\"\n  [disabled]=\"isDisabled && !nodes.length\"\n>\n  <ng-container *ngIf=\"!nodes.length\">{{\n    options.clickToBuildExpressionLabel ||\n      'com.bmc.arsys.rx.client.expression-form-control.click-to-build-expression.label' | translate\n  }}</ng-container>\n\n  <ng-container *ngFor=\"let node of nodes\">\n    <ng-container\n      *ngTemplateOutlet=\"\n        node.isInvalid ? invalidExpression : node.label ? expression : plainText;\n        context: { $implicit: node }\n      \"\n    ></ng-container>\n  </ng-container>\n\n  <span class=\"fade-line position-absolute w-100 text-center\"><span class=\"d-icon-ellipsis_horizontal\"></span></span>\n</button>\n\n<ng-template #plainText let-node>\n  <span class=\"py-1 ml-1 rounded d-inline-block rx-ellipsis\">{{ node.expression }}</span>\n</ng-template>\n\n<ng-template #expression let-node>\n  <span\n    [adaptTooltip]=\"node.tooltip\"\n    placement=\"auto\"\n    class=\"d-inline-block rx-ellipsis p-1 ml-1 rounded bg-gray-300 text-default\"\n    >{{ node.label }}</span\n  >\n</ng-template>\n\n<ng-template #invalidExpression>\n  <span adaptTooltip=\"Error\" placement=\"auto\" class=\"d-inline-block rx-ellipsis p-1 ml-1 rounded bg-danger text-white\">\n    {{ 'com.bmc.arsys.rx.client.common.error.label' | translate }}\n  </span>\n</ng-template>\n\n<div *ngIf=\"options.isRequired && !nodes.length && isTouched\" class=\"text-danger\">\n  {{ 'com.bmc.arsys.rx.client.expression-form-control.validation.required.message' | translate }}\n</div>\n","import {\n  Component,\n  ElementRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  Renderer2,\n  SimpleChanges,\n  ViewChildren\n} from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { isEqual } from 'lodash';\n\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IFormBuilderEvent, IFormControlComponent, IFormFocusable, IPlainObject } from '@helix/platform/shared/api';\n\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IExpressionEditorPropertyChange } from '../../expression-editor/expression-editor.interfaces';\nimport { RxExpressionEditorService } from '../../expression-editor/expression-editor.service';\nimport {\n  AssignmentExpressionListTargetFieldType,\n  IAssignmentExpressionListFormControlOptions\n} from './assignment-expression-list-form-control.types';\n\n@Component({\n  selector: 'rx-assignment-expression-list-form-control',\n  templateUrl: './assignment-expression-list-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: AssignmentExpressionListFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class AssignmentExpressionListFormControlComponent\n  extends ValueAccessor<any[]>\n  implements IFormControlComponent, IFormFocusable, OnInit, OnChanges, OnDestroy\n{\n  @Input()\n  options: IAssignmentExpressionListFormControlOptions;\n\n  @Input()\n  propertyPath: string;\n\n  @ViewChildren('fieldGroups', { read: ElementRef })\n  private fieldGroups: QueryList<ElementRef>;\n\n  currentOptions: IAssignmentExpressionListFormControlOptions;\n  formArray: FormArray = this.formBuilder.array([]);\n\n  private defaultOptions = {\n    addItemText: 'com.bmc.arsys.rx.client.common.add.label',\n    confirmationMessage: 'com.bmc.arsys.rx.client.common.delete-item-confirmation.message',\n    sourceFieldOptions: {\n      options: {\n        label: 'com.bmc.arsys.rx.client.designer.assignment-expression.source.label',\n        required: true\n      },\n      propertyName: 'expression'\n    },\n    targetFieldOptions: {\n      options: {\n        label: 'com.bmc.arsys.rx.client.designer.assignment-expression.target.label',\n        required: true\n      },\n      propertyName: 'assignTarget'\n    }\n  };\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private renderer: Renderer2,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.formArray.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((value) => {\n      this.value = value;\n    });\n\n    this.patchOptions(this.options);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.options.currentValue !== changes.options.previousValue) {\n      this.patchOptions(changes.options.currentValue);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.formArray.clear();\n\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  focus(data: IPlainObject): void {\n    const fieldGroup = this.fieldGroups.get(data.index);\n\n    if (data.fieldName === this.currentOptions.targetFieldOptions.propertyName) {\n      const targetFieldElement =\n        this.currentOptions.targetFieldOptions.type === AssignmentExpressionListTargetFieldType.Text\n          ? fieldGroup.nativeElement.querySelector('rx-text-form-control input')\n          : fieldGroup.nativeElement.querySelector('rx-select-form-control button');\n\n      targetFieldElement.focus();\n    } else if (data.fieldName === this.currentOptions.sourceFieldOptions.propertyName) {\n      const sourceFieldButton = fieldGroup.nativeElement.querySelector('rx-expression-form-control button');\n\n      sourceFieldButton.focus();\n      sourceFieldButton.click();\n    }\n  }\n\n  onWriteValue(value: IPlainObject[]): void {\n    if (!isEqual(value, this.formArray.value)) {\n      this.formArray.clear();\n\n      value.forEach((item) => this.addItem(item));\n    }\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    super.setDisabledState(isDisabled);\n\n    if (isDisabled) {\n      this.formArray.disable();\n    } else {\n      this.formArray.enable();\n    }\n  }\n\n  addItem(item?: IPlainObject): void {\n    this.formArray.push(\n      this.formBuilder.group(\n        item ?? {\n          [this.currentOptions.targetFieldOptions.propertyName]: null,\n          [this.currentOptions.sourceFieldOptions.propertyName]: null\n        }\n      )\n    );\n  }\n\n  openExpressionEditor(event: IFormBuilderEvent, formControl: FormControl): void {\n    this.rxExpressionEditorService\n      .openEditor({\n        expressionConfigurator: this.currentOptions.sourceFieldOptions.expressionConfigurator,\n        isReadOnly: this.isDisabled,\n        property: {\n          path: event.payload.propertyPath,\n          value: formControl.value,\n          label: event.payload.propertyLabel\n        }\n      })\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        formControl.setValue(expression.value);\n      });\n  }\n\n  removeItem(index: number): void {\n    if (!this.isDisabled) {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.currentOptions.confirmationMessage\n        })\n        .then((confirmed) => {\n          if (confirmed) {\n            this.formArray.removeAt(index);\n          }\n        });\n    }\n  }\n\n  private patchOptions(options: IAssignmentExpressionListFormControlOptions): void {\n    this.currentOptions = {\n      addItemText: this.translateService.instant(options.addItemText || this.defaultOptions.addItemText),\n      confirmationMessage: this.translateService.instant(\n        options.confirmationMessage || this.defaultOptions.confirmationMessage\n      ),\n      sourceFieldOptions: {\n        expressionConfigurator: options.sourceFieldOptions.expressionConfigurator,\n        options: {\n          label: this.translateService.instant(this.defaultOptions.sourceFieldOptions.options.label),\n          isRequired: this.defaultOptions.sourceFieldOptions.options.required,\n          ...options.sourceFieldOptions.options\n        },\n        propertyName: options.sourceFieldOptions.propertyName || this.defaultOptions.sourceFieldOptions.propertyName\n      },\n      targetFieldOptions: {\n        options: {\n          label: this.translateService.instant(this.defaultOptions.targetFieldOptions.options.label),\n          required: this.defaultOptions.targetFieldOptions.options.required,\n          ...options.targetFieldOptions.options\n        },\n        propertyName: options.targetFieldOptions.propertyName || this.defaultOptions.targetFieldOptions.propertyName,\n        type: options.targetFieldOptions.type\n      }\n    };\n  }\n}\n","<button\n  *ngIf=\"!isDisabled\"\n  class=\"btn btn-sm btn-link px-0 py-0\"\n  type=\"button\"\n  aria-label=\"{{ 'com.bmc.arsys.rx.client.common.add.label' | translate }}\"\n  rx-id=\"add-item-button\"\n  (click)=\"addItem()\"\n>\n  <span class=\"d-icon-plus_circle mr-1\" aria-hidden=\"true\"></span>\n\n  {{ currentOptions.addItemText }}\n</button>\n\n<div *ngFor=\"let formGroup of formArray.controls; let index = index\" class=\"card mt-2\">\n  <div class=\"card-block p-3\" #fieldGroups>\n    <button\n      *ngIf=\"!isDisabled\"\n      class=\"close position-relative\"\n      type=\"button\"\n      aria-label=\"{{ 'com.bmc.arsys.rx.client.common.remove.label' | translate }}\"\n      rx-id=\"remove-item-button\"\n      (click)=\"removeItem(index)\"\n    ></button>\n\n    <div class=\"pb-3\">\n      <rx-text-form-control\n        *ngIf=\"currentOptions.targetFieldOptions.type === 'text'\"\n        [formControl]=\"formGroup.get(currentOptions.targetFieldOptions.propertyName)\"\n        [options]=\"currentOptions.targetFieldOptions.options\"\n      ></rx-text-form-control>\n\n      <rx-select-form-control\n        *ngIf=\"currentOptions.targetFieldOptions.type === 'select'\"\n        [formControl]=\"formGroup.get(currentOptions.targetFieldOptions.propertyName)\"\n        [options]=\"currentOptions.targetFieldOptions.options\"\n      ></rx-select-form-control>\n    </div>\n\n    <rx-expression-form-control\n      [formControl]=\"formGroup.get(currentOptions.sourceFieldOptions.propertyName)\"\n      [options]=\"currentOptions.sourceFieldOptions.options\"\n      [isDisabled]=\"isDisabled\"\n      [propertyPath]=\"this.propertyPath + '[' + index + '].' + currentOptions.sourceFieldOptions.propertyName\"\n      (events)=\"openExpressionEditor($event, formGroup.get(currentOptions.sourceFieldOptions.propertyName))\"\n    ></rx-expression-form-control>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { ExpressionFormControlComponent } from './expression-form-control.component';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { AdaptButtonModule, AdaptIconModule, AdaptRxLabelModule, AdaptTooltipModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    FormsModule,\n    CommonModule,\n    AdaptIconModule,\n    AdaptTooltipModule,\n    AdaptButtonModule,\n    AdaptRxLabelModule,\n    TranslateModule\n  ],\n  exports: [ExpressionFormControlComponent],\n  declarations: [ExpressionFormControlComponent],\n  entryComponents: [ExpressionFormControlComponent]\n})\nexport class ExpressionFormControlModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TextFormControlComponent } from './text-form-control.component';\nimport { AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\nimport { RxNoWhitespaceValidatorModule } from '@helix/platform/utils';\n\n@NgModule({\n  declarations: [TextFormControlComponent],\n  exports: [TextFormControlComponent],\n  entryComponents: [TextFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxTextfieldModule, RxNoWhitespaceValidatorModule]\n})\nexport class TextFormControlModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SelectFormControlComponent } from './select-form-control.component';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [SelectFormControlComponent],\n  exports: [SelectFormControlComponent],\n  entryComponents: [SelectFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxSelectModule]\n})\nexport class SelectFormControlModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { AssignmentExpressionListFormControlComponent } from './assignment-expression-list-form-control.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ExpressionFormControlModule } from '../expression-form-control';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TextFormControlModule } from '../text-form-control';\nimport { SelectFormControlModule } from '../select-form-control';\n\n@NgModule({\n  declarations: [AssignmentExpressionListFormControlComponent],\n  entryComponents: [AssignmentExpressionListFormControlComponent],\n  imports: [\n    CommonModule,\n    TranslateModule,\n    ExpressionFormControlModule,\n    ReactiveFormsModule,\n    TextFormControlModule,\n    SelectFormControlModule\n  ],\n  exports: [AssignmentExpressionListFormControlComponent]\n})\nexport class AssignmentExpressionListFormControlModule {}\n","import { Component, Input, NgZone, OnInit } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { FileObj } from '@bmc-ux/adapt-angular';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { saveAs } from 'file-saver';\nimport { map } from 'lodash';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IAttachmentFormControlOptions } from './attachment-form-control-options.interface';\n\n@Component({\n  selector: 'rx-attachment-form-control',\n  templateUrl: './attachment-form-control.component.html',\n  styleUrls: ['./attachment-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: AttachmentFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class AttachmentFormControlComponent extends ValueAccessor<File[]> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IAttachmentFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  fileObjects: FileObj[];\n  customDownload = this.downloadFile.bind(this);\n\n  constructor(private ngZone: NgZone) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (!this.options.maxFileSize) {\n      this.options.maxFileSize = Number.MAX_SAFE_INTEGER.toString();\n    }\n\n    if (!this.options.filesCount) {\n      this.options.filesCount = '1';\n    }\n  }\n\n  onModelChange(files: FileObj[]): void {\n    this.value = files.length ? files.map((file) => file.data) : null;\n  }\n\n  onWriteValue(value: File[]): void {\n    this.fileObjects = map(value, (fileData) => {\n      const defaultFileObject = {\n        data: fileData,\n        allowDeletion: true,\n        inUploading: false,\n        inDeleting: false,\n        uploaded: 100,\n        error: false,\n        errorText: ''\n      };\n\n      const updatedFileObject = (this.fileObjects || []).find(({ data }) => data === fileData) || defaultFileObject;\n\n      updatedFileObject.uploaded = 100;\n\n      return updatedFileObject;\n    });\n  }\n\n  private downloadFile(fileObj: FileObj): void {\n    this.ngZone.runOutsideAngular(() => {\n      saveAs(fileObj.data, fileObj.data.name);\n    });\n  }\n}\n","<div class=\"form-group\">\n  <adapt-rx-uploader\n    [required]=\"options.required\"\n    [disabled]=\"isDisabled\"\n    (ngModelChange)=\"onModelChange($event)\"\n    [(ngModel)]=\"fileObjects\"\n    [label]=\"options.label\"\n    [filesCount]=\"options.filesCount\"\n    [maxFileSize]=\"options.maxFileSize\"\n    [enableCustomDownload]=\"true\"\n    [customDownload]=\"customDownload\"\n    [reusable]=\"true\"\n  ></adapt-rx-uploader>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxUploaderModule } from '@bmc-ux/adapt-angular';\nimport { AttachmentFormControlComponent } from './attachment-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, AdaptRxUploaderModule.forRoot()],\n  exports: [AttachmentFormControlComponent],\n  declarations: [AttachmentFormControlComponent],\n  entryComponents: [AttachmentFormControlComponent]\n})\nexport class AttachmentFormControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ICheckboxFormControlOptions } from './boolean-form-control-options.interface';\n\n@Component({\n  selector: 'rx-checkbox-form-control',\n  templateUrl: './boolean-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: BooleanFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class BooleanFormControlComponent extends ValueAccessor<boolean> implements IFormControlComponent {\n  @Input()\n  options: ICheckboxFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  id: string;\n}\n","<rx-boolean\n  [label]=\"options.label || options.description\"\n  [required]=\"options.required\"\n  [isDisabled]=\"isDisabled\"\n  [shouldDisplayAsCheckbox]=\"options.shouldDisplayAsCheckbox\"\n  [(ngModel)]=\"value\"\n  [tooltip]=\"options.tooltip\"\n></rx-boolean>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxCheckboxModule, AdaptRxLabelModule } from '@bmc-ux/adapt-angular';\nimport { RxBooleanModule } from '../../boolean/boolean.module';\nimport { BooleanFormControlComponent } from './boolean-form-control.component';\n\n@NgModule({\n  declarations: [BooleanFormControlComponent],\n  exports: [BooleanFormControlComponent],\n  entryComponents: [BooleanFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxCheckboxModule, AdaptRxLabelModule, RxBooleanModule]\n})\nexport class BooleanFormControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { RxColorUtilsService } from '@helix/platform/utils';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IColorPickerFormControlOptions } from './color-picker-form-control-options.interface';\nimport { Color } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-color-picker-form-control',\n  templateUrl: './color-picker-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: ColorPickerFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class ColorPickerFormControlComponent extends ValueAccessor<string> implements IFormControlComponent {\n  @Input()\n  options: IColorPickerFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  private colorValue: string;\n\n  constructor(private rxColorUtilsService: RxColorUtilsService) {\n    super();\n  }\n\n  get color(): string {\n    return this.colorValue;\n  }\n\n  set color(color: string) {\n    if (!this.rxColorUtilsService.isSameColor(color, this.value)) {\n      this.value = this.rxColorUtilsService.normalize(color);\n      this.colorValue = color;\n    }\n  }\n\n  onWriteValue(value: string): void {\n    if (!this.color || !this.rxColorUtilsService.isSameColor(this.color, value)) {\n      this.colorValue = this.rxColorUtilsService.normalize(value);\n    }\n  }\n\n  setColor(color: Color): void {\n    this.color = color?.value || 'null';\n  }\n}\n","<div class=\"form-group\">\n  <adapt-rx-control-label [showRequiredLabel]=\"options.required\" [label]=\"options.label\"></adapt-rx-control-label>\n\n  <adapt-color-picker\n    [disabled]=\"isDisabled\"\n    [(ngModel)]=\"color\"\n    [showEmptyOption]=\"!options.required\"\n    [showRecentlyUsedColors]=\"false\"\n    (onSelectColor)=\"setColor($event)\"\n  ></adapt-color-picker>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptColorPickerModule, AdaptRxLabelModule } from '@bmc-ux/adapt-angular';\nimport { ColorPickerFormControlComponent } from './color-picker-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, AdaptColorPickerModule, AdaptRxLabelModule],\n  declarations: [ColorPickerFormControlComponent],\n  exports: [ColorPickerFormControlComponent]\n})\nexport class ColorPickerFormControlModule {}\n","import { Component, Input, OnInit, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { isNil } from 'lodash';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ICounterFormControlOptions } from './counter-form-control-options.interface';\nimport { RX_NUMBER } from '@helix/platform/utils';\nimport { AdaptRxCounterComponent } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-counter-form-control',\n  templateUrl: './counter-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: CounterFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class CounterFormControlComponent\n  extends ValueAccessor<number>\n  implements IFormControlComponent, OnInit, IFormFocusable\n{\n  @Input()\n  options: ICounterFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  @ViewChild(AdaptRxCounterComponent)\n  adaptRxCounterComponent: AdaptRxCounterComponent;\n\n  ngOnInit(): void {\n    if (isNil(this.options.maxValue)) {\n      this.options.maxValue = this.options.allowIntegerOnly ? RX_NUMBER.maxInteger : Number.MAX_SAFE_INTEGER;\n    }\n\n    if (isNil(this.options.minValue)) {\n      this.options.minValue = this.options.allowIntegerOnly ? RX_NUMBER.minInteger : Number.MIN_SAFE_INTEGER;\n    }\n  }\n\n  focus(): void {\n    this.adaptRxCounterComponent.inputEl.nativeElement.focus();\n  }\n}\n","<adapt-rx-counter\n  *ngIf=\"options.allowIntegerOnly\"\n  [label]=\"options.label\"\n  [required]=\"options.required\"\n  [disabled]=\"isDisabled\"\n  [(ngModel)]=\"value\"\n  [max]=\"options.maxValue\"\n  [min]=\"options.minValue\"\n  [adaptMax]=\"options.maxValue\"\n  [adaptMin]=\"options.minValue\"\n  adaptIntegerNumber\n  [tooltip]=\"\n    options.tooltip\n      ? {\n          content: tooltipContent,\n          iconName: 'question_circle_o'\n        }\n      : null\n  \"\n>\n</adapt-rx-counter>\n\n<adapt-rx-counter\n  *ngIf=\"!options.allowIntegerOnly\"\n  [label]=\"options.label\"\n  [required]=\"options.required\"\n  [disabled]=\"isDisabled\"\n  [(ngModel)]=\"value\"\n  [max]=\"options.maxValue\"\n  [min]=\"options.minValue\"\n  [adaptMax]=\"options.maxValue\"\n  [adaptMin]=\"options.minValue\"\n  adaptScientificNumber\n  [tooltip]=\"\n    options.tooltip\n      ? {\n          content: tooltipContent,\n          iconName: 'question_circle_o'\n        }\n      : null\n  \"\n>\n</adapt-rx-counter>\n\n<ng-template #tooltipContent>\n  <div [innerHTML]=\"options.tooltip\"></div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxCounterModule, AdaptRxValidatorsModule } from '@bmc-ux/adapt-angular';\nimport { CounterFormControlComponent } from './counter-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, AdaptRxValidatorsModule, AdaptRxCounterModule],\n  declarations: [CounterFormControlComponent],\n  exports: [CounterFormControlComponent],\n  entryComponents: [CounterFormControlComponent]\n})\nexport class CounterFormControlModule {}\n","import { Component, Injector } from '@angular/core';\nimport { ActiveModalRef, DismissReasons, RxSelectionChangeEvent, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { RX_MODAL, RxModalClass, RxModalService } from '@helix/platform/ui-kit';\nimport { find, noop } from 'lodash';\nimport {\n  ICustomizationOptionsEditorData,\n  IScopeSelectionOption,\n  RX_BUNDLE,\n  RX_OVERLAY\n} from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-scope-customization-modal',\n  templateUrl: './coarse-grained-customization-options-editor.component.html'\n})\nexport class CoarseGrainedCustomizationOptionsEditorComponent extends RxModalClass {\n  data: ICustomizationOptionsEditorData = this.activeModalRef.getData();\n  scopeSelectionOptions: IScopeSelectionOption[] = this.data.scopeSelectionOptions;\n  customizationOptionsForm: FormGroup;\n  isDisabled = this.data.overlayOperation !== RX_OVERLAY.operationTypes.createdInThisOverlayGroup;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    public activeModalRef: ActiveModalRef,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n    this.initForm();\n  }\n\n  isDirty(): boolean {\n    return this.customizationOptionsForm.dirty;\n  }\n\n  isPublic(): boolean {\n    return this.customizationOptionsForm.get('scope').value[0].id === RX_BUNDLE.definitionScopeTypes.public;\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  submit(): void {\n    if (this.isPublic()) {\n      this.rxModalService\n        .confirm({\n          title: 'Warning',\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message:\n            'If the definition scope is set to Public, it cannot be changed once the definition gets saved. Do you want to continue?'\n        })\n        .then((result: boolean) => {\n          if (result) {\n            this.closeModal();\n          }\n        })\n        .catch(noop);\n    } else if (this.data.definitionScopeName === RX_BUNDLE.definitionScopeNames.public) {\n      this.rxModalService\n        .confirm({\n          title: 'Warning',\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message:\n            'Changing the definition scope from Public to Application or Library can break upgrades. Do you want to continue?'\n        })\n        .then((result: boolean) => {\n          if (result) {\n            this.closeModal();\n          }\n        })\n        .catch(noop);\n    } else {\n      this.closeModal();\n    }\n  }\n\n  onScopeChange(rxSelectionChangeEvent: RxSelectionChangeEvent): void {\n    if (rxSelectionChangeEvent.options[0].id === RX_BUNDLE.definitionScopes.application.type) {\n      this.customizationOptionsForm.get('allowOverlay').setValue(false);\n    }\n  }\n\n  closeModal(): void {\n    const result = this.customizationOptionsForm.getRawValue();\n    result.scope = result.scope[0].id;\n    this.activeModalRef.close(result);\n  }\n\n  private initForm(): void {\n    const definitionScopeName = find(\n      this.scopeSelectionOptions,\n      (scopeType) => scopeType.name === this.data.definitionScopeName\n    );\n\n    this.customizationOptionsForm = this.formBuilder.group({\n      scope: new FormControl([definitionScopeName]),\n      allowOverlay: { value: this.data.allowOverlay || false, disabled: this.data.isDisabled }\n    });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"modal-body\">\n  <form [formGroup]=\"customizationOptionsForm\" class=\"row\">\n    <div class=\"col-lg-5\">\n      <adapt-rx-select\n        label=\"Scope\"\n        rx-id=\"scope\"\n        [options]=\"scopeSelectionOptions\"\n        [optionFormatter]=\"optionFormatter\"\n        [disabled]=\"isDisabled || data.isDisabled\"\n        [tooltip]=\"{\n          iconName: 'question_circle_o',\n          content:\n            'If Scope is set to Application or Library, the definition will be available only to this application or library. If Scope is set to Public, the definition will be available to use by this and other applications and libraries.',\n          placement: 'bottom',\n          popoverMode: true\n        }\"\n        formControlName=\"scope\"\n        (onSelectionChange)=\"onScopeChange($event)\"\n      >\n      </adapt-rx-select>\n    </div>\n\n    <div class=\"col-lg-12\">\n      <h5>{{'com.bmc.arsys.rx.client.customization-options-editor.customization-options.label' | translate}}</h5>\n      <adapt-rx-checkbox\n        label=\"{{'com.bmc.arsys.rx.client.customization-options-editor.allow-future-customization.label'\n        | translate : { definitionType: data.definitionTypeDisplayName } }}\"\n        formControlName=\"allowOverlay\"\n        [disabled]=\"isDisabled || !isPublic()\"\n      >\n      </adapt-rx-checkbox>\n    </div>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    class=\"btn btn-primary btn-sm\"\n    [disabled]=\"!customizationOptionsForm.dirty\"\n    rx-id=\"save-button\"\n    (click)=\"submit()\"\n    type=\"button\"\n  >\n    Save\n  </button>\n\n  <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"cancel()\" rx-id=\"cancel-button\">Cancel</button>\n</div>\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport {\n  ICustomizationControlValue,\n  ICustomizationOptions,\n  ICustomizationOptionsEditorData,\n  IScopeSelectionOption,\n  RxBundleCacheService,\n  RxOverlayService,\n  RX_OVERLAY\n} from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { noop } from 'lodash';\nimport { take } from 'rxjs/operators';\nimport { CoarseGrainedCustomizationOptionsEditorComponent } from '../../coarse-grained-customization-options-editor/coarse-grained-customization-options-editor.component';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\n\n@Component({\n  selector: 'rx-scope-customization-control',\n  templateUrl: './customization-options.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: CustomizationOptionsComponent,\n      multi: true\n    }\n  ]\n})\nexport class CustomizationOptionsComponent extends ValueAccessor<ICustomizationControlValue> implements OnChanges {\n  @Input()\n  options: ICustomizationOptions;\n\n  allowOverlayLabel: string;\n  definitionScopeName: string;\n  overlayOperation: string;\n\n  private scopeSelectionOptions: IScopeSelectionOption[];\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxOverlayService: RxOverlayService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (this.options) {\n      this.updateValues();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.options) {\n      this.updateValues();\n    }\n  }\n\n  private getOverlayOperation(): string {\n    return this.rxOverlayService.getOverlayOperation(\n      this.options.overlayGroupId,\n      this.options.overlayDescriptor?.parentOverlayGroupId || null\n    );\n  }\n\n  private updateValues(): void {\n    this.setAllowOverlayLabel(this.options.allowOverlay);\n\n    this.rxBundleCacheService\n      .getDefinitionScopeName(this.options.scope)\n      .pipe(take(1))\n      .subscribe((definitionScopeName: string) => (this.definitionScopeName = definitionScopeName));\n\n    this.rxBundleCacheService\n      .getDefinitionScopeSelectionOptions()\n      .pipe(take(1))\n      .subscribe(\n        (scopeSelectionOptions: IScopeSelectionOption[]) => (this.scopeSelectionOptions = scopeSelectionOptions)\n      );\n\n    if (this.options.overlayGroupId) {\n      this.overlayOperation = this.getOverlayOperation();\n    } else {\n      this.overlayOperation = RX_OVERLAY.operationTypes.createdInThisOverlayGroup;\n    }\n  }\n\n  openCustomizationOptionsEditor(): void {\n    this.rxModalService\n      .openModal({\n        title: 'Scope/Customization options',\n        content: CoarseGrainedCustomizationOptionsEditorComponent,\n        blockKeyboard: false,\n        size: 'sm',\n\n        data: {\n          definitionScopeName: this.definitionScopeName,\n          allowOverlay: this.options.allowOverlay,\n          scopeSelectionOptions: this.scopeSelectionOptions,\n          isDisabled: this.options.isDisabled,\n          overlayOperation: this.overlayOperation,\n          definitionTypeDisplayName: this.options.definitionTypeDisplayName\n        } as ICustomizationOptionsEditorData\n      })\n      .then((result: ICustomizationControlValue) => {\n        this.setAllowOverlayLabel(result.allowOverlay);\n        this.definitionScopeName = this.scopeSelectionOptions.find((value) => value.id === result.scope).name;\n\n        this.value = result;\n      })\n      .catch(noop);\n  }\n\n  setAllowOverlayLabel(allowOverlay: boolean): void {\n    this.allowOverlayLabel = allowOverlay\n      ? RX_OVERLAY.overlayAllowedLabels.allowed\n      : RX_OVERLAY.overlayAllowedLabels.notAllowed;\n  }\n}\n","<div class=\"d-flex\">\n  <adapt-button\n    btn-type=\"tertiary\"\n    rx-id=\"open-customization-options-editor-link\"\n    (click)=\"openCustomizationOptionsEditor()\"\n    class=\"p-0\"\n  >\n    {{ 'com.bmc.arsys.rx.client.designer.scope-customization-options.title' | translate }}\n  </adapt-button>\n  <adapt-icon\n    name=\"question_circle_o\"\n    class=\"ml-2\"\n    placement=\"right\"\n    maxWidth=\"400\"\n    [adaptPopover]=\"'com.bmc.arsys.rx.client.designer.scope-customization-options.scope.tooltip' | translate\"\n  >\n  </adapt-icon>\n</div>\n\n<p rx-id=\"scope-name-label\" class=\"mb-0 pt-2\">\n  {{\n    'com.bmc.arsys.rx.client.designer.scope-customization-options.scope.label'\n      | translate: { definitionScopeName: definitionScopeName }\n  }}\n</p>\n<div rx-id=\"customization-options-label\" class=\"pt-2\">\n  {{\n    'com.bmc.arsys.rx.client.designer.scope-customization-options.customization.label'\n      | translate: { allowOverlayLabel: allowOverlayLabel }\n  }}\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptTooltipModule,\n  AdaptRxSelectModule,\n  AdaptButtonModule,\n  AdaptPopoverModule,\n  AdaptIconModule,\n  AdaptRxCheckboxModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptCheckbox2Module } from '@bmc-ux/obsolete';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CustomizationOptionsComponent } from './customization-options.component';\nimport { CoarseGrainedCustomizationOptionsEditorComponent } from '../../coarse-grained-customization-options-editor/coarse-grained-customization-options-editor.component';\n\n@NgModule({\n  declarations: [CustomizationOptionsComponent, CoarseGrainedCustomizationOptionsEditorComponent],\n  exports: [CustomizationOptionsComponent],\n  entryComponents: [CustomizationOptionsComponent, CoarseGrainedCustomizationOptionsEditorComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AdaptTooltipModule,\n    AdaptRxSelectModule,\n    AdaptButtonModule,\n    AdaptCheckbox2Module,\n    AdaptPopoverModule,\n    AdaptIconModule,\n    AdaptRxCheckboxModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ]\n})\nexport class CustomizationOptionsModule {}\n","import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { RxDateStruct, RxDatetimePickerMode } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IDateFormControlOptions } from './date-form-control-options.interface';\n\n@Component({\n  selector: 'rx-date-form-control',\n  templateUrl: './date-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: DateFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class DateFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IDateFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  datePickerControl = new FormControl('');\n\n  pickerMode = RxDatetimePickerMode.Date;\n\n  ngOnInit(): void {\n    this.datePickerControl.valueChanges.subscribe((value: RxDateStruct) => {\n      if (value) {\n        this.value = moment([value.year, value.month, value.date]).format('YYYY-MM-DD');\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  writeValue(value: string): void {\n    super.writeValue(value);\n\n    const date = moment(this.value);\n\n    if (date.isValid()) {\n      this.datePickerControl.setValue({\n        year: date.year(),\n        month: date.month(),\n        date: date.date()\n      });\n    } else {\n      this.datePickerControl.setValue(null);\n    }\n  }\n}\n","<adapt-rx-datetime\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [mode]=\"pickerMode\"\n  [required]=\"options.required\"\n  [formControl]=\"datePickerControl\"\n>\n</adapt-rx-datetime>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptRxDatetimeModule } from '@bmc-ux/adapt-angular';\nimport { DateFormControlComponent } from './date-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, AdaptRxDatetimeModule],\n  declarations: [DateFormControlComponent],\n  exports: [DateFormControlComponent],\n  entryComponents: [DateFormControlComponent]\n})\nexport class DateFormControlModule {}\n","export const FORM_BUILDER = {\n  controlTypes: {\n    widget: 'widget',\n    formControl: 'formControl',\n    section: 'section'\n  }\n};\n","export abstract class AbstractFormControlModel {\n  type: string;\n  hidden = false;\n\n  hide() {\n    this.hidden = true;\n  }\n\n  show() {\n    this.hidden = false;\n  }\n}\n","import { AbstractControl } from '@angular/forms';\nimport { FORM_BUILDER } from '../form-builder.constant';\nimport { AbstractFormControlModel } from './abstract-form-control.model';\nimport { IFormControlOptions } from './interfaces/form-control-options.interface';\n\nexport class FormControlModel extends AbstractFormControlModel {\n  type = FORM_BUILDER.controlTypes.formControl;\n  component: any;\n  name: string;\n  isDisabled = false;\n  formControl: AbstractControl;\n  options: any;\n\n  constructor(options: IFormControlOptions, formControl: AbstractControl) {\n    super();\n\n    this.formControl = formControl;\n    this.name = options.name;\n    this.component = options.component;\n    this.hidden = options.hidden;\n    this.isDisabled = options.isDisabled;\n    this.options = options.options || {};\n  }\n}\n","import { FORM_BUILDER } from '../form-builder.constant';\nimport { AbstractFormControlModel } from './abstract-form-control.model';\nimport { FormControlModel } from './form-control.model';\nimport { FormWidgetModel } from './form-widget.model';\nimport { IFormSectionOptions } from './interfaces/form-section-options.interface';\n\nexport class FormSectionModel extends AbstractFormControlModel {\n  type = FORM_BUILDER.controlTypes.section;\n  label: string;\n  open = true;\n  controls: Array<FormControlModel | FormWidgetModel> = [];\n\n  constructor(options: IFormSectionOptions) {\n    super();\n\n    this.controls = options.controls;\n    this.label = options.label;\n    this.open = options.open === undefined ? true : options.open;\n    this.hidden = options.hidden === undefined ? false : options.hidden;\n  }\n\n  collapse() {\n    this.open = false;\n  }\n\n  expand() {\n    this.open = true;\n  }\n}\n","import { FORM_BUILDER } from '../form-builder.constant';\nimport { AbstractFormControlModel } from './abstract-form-control.model';\nimport { IFormWidgetOptions } from './interfaces/form-widget-options.interface';\n\nexport class FormWidgetModel extends AbstractFormControlModel {\n  type = FORM_BUILDER.controlTypes.widget;\n  component: any;\n  hidden = false;\n  isDisabled = false;\n  options: any;\n  widgetName: string;\n\n  constructor(options: IFormWidgetOptions) {\n    super();\n\n    this.component = options.component;\n    this.hidden = options.hidden;\n    this.isDisabled = options.isDisabled;\n    this.options = options.options || {};\n    this.widgetName = options.widgetName;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { FormControlModel } from './models/form-control.model';\nimport { FormSectionModel } from './models/form-section.model';\nimport { FormWidgetModel } from './models/form-widget.model';\nimport { IFormControlOptions } from './models/interfaces/form-control-options.interface';\nimport { IFormSectionOptions } from './models/interfaces/form-section-options.interface';\nimport { IFormWidgetOptions } from './models/interfaces/form-widget-options.interface';\nimport { AbstractControl } from '@angular/forms';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FormBuilderFactory {\n  control(options: IFormControlOptions, formControl: AbstractControl): FormControlModel {\n    return new FormControlModel(options, formControl);\n  }\n\n  widget(options: IFormWidgetOptions): FormWidgetModel {\n    return new FormWidgetModel(options);\n  }\n\n  section(options: IFormSectionOptions): FormSectionModel {\n    return new FormSectionModel(options);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { IFormBuilderEvent } from '@helix/platform/shared/api';\nimport { Subject } from 'rxjs';\nimport { IFormBuilderEditor } from './form-builder-editor.interface';\n\n@Injectable()\nexport class FormBuilderService {\n  private editorEventSubject = new Subject<IFormBuilderEvent>();\n  private focusEditorSubject = new Subject<IFormBuilderEditor>();\n\n  editorEvent$ = this.editorEventSubject.asObservable();\n  focusEditor$ = this.focusEditorSubject.asObservable();\n\n  setFocusEditor(focusEditor: IFormBuilderEditor) {\n    this.focusEditorSubject.next(focusEditor);\n  }\n\n  dispatch(builderEvent: IFormBuilderEvent): void {\n    this.editorEventSubject.next(builderEvent);\n  }\n}\n","import {\n  Component,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { isEqual, kebabCase } from 'lodash';\nimport { ReplaySubject } from 'rxjs';\nimport { FormControlModel } from '../../models/form-control.model';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { takeUntil } from 'rxjs/operators';\nimport { FormWidgetModel } from '../../models/form-widget.model';\nimport { FormBuilderService } from '../form-builder/form-builder.service';\n\n@Component({\n  selector: 'rx-form-outlet',\n  template: '<ng-container #container></ng-container>',\n  styleUrls: ['./form-outlet.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: FormOutletComponent,\n      multi: true\n    }\n  ]\n})\nexport class FormOutletComponent implements OnInit, OnDestroy, ControlValueAccessor, OnChanges {\n  @Input()\n  control: FormControlModel | FormWidgetModel;\n\n  @ViewChild('container', { read: ViewContainerRef, static: true })\n  container: ViewContainerRef;\n\n  private instance: IFormControlComponent;\n  private componentRef: ComponentRef<{}>;\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(\n    private cr: ComponentFactoryResolver,\n    private formBuilderService: FormBuilderService,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnInit(): void {\n    const factory = this.cr.resolveComponentFactory(this.control.component);\n    const controlName = this.getControlName(this.control);\n\n    this.componentRef = this.container.createComponent(factory);\n    this.renderer.setAttribute(this.componentRef.location.nativeElement, 'rx-id', kebabCase(controlName));\n\n    this.instance = this.componentRef.instance as IFormControlComponent;\n    this.instance.options = this.control.options;\n    this.instance.propertyPath = controlName;\n\n    if (this.instance.events) {\n      this.instance.events.pipe(takeUntil(this.destroyed$)).subscribe((event) => {\n        this.formBuilderService.dispatch(event);\n      });\n    }\n\n    this.formBuilderService.focusEditor$.pipe(takeUntil(this.destroyed$)).subscribe(({ editorName, data }) => {\n      if (controlName === editorName && this.isFocusable(this.instance)) {\n        this.instance.focus(data);\n      }\n    });\n  }\n\n  private getControlName(control: FormControlModel | FormWidgetModel): string {\n    if (control instanceof FormWidgetModel) {\n      return control.component.name;\n    } else if (control instanceof FormControlModel) {\n      return control.name;\n    } else {\n      return '';\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.control && this.instance) {\n      this.instance.options = changes.control.currentValue.options;\n\n      if (this.isSupportChanges(this.instance)) {\n        const onChanges: any = {};\n\n        if (!isEqual(changes.control.previousValue.options, changes.control.currentValue.options)) {\n          onChanges.options = new SimpleChange(\n            changes.control.previousValue.options,\n            changes.control.currentValue.options,\n            false\n          );\n        }\n\n        if (changes.control.previousValue.isDisabled !== changes.control.currentValue.isDisabled) {\n          onChanges.disabled = new SimpleChange(\n            changes.control.previousValue.isDisabled,\n            changes.control.currentValue.isDisabled,\n            false\n          );\n        }\n\n        if (Object.keys(onChanges).length) {\n          this.instance.ngOnChanges(onChanges);\n        }\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.componentRef.destroy();\n    this.componentRef = null;\n\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  // proxy calls from ControlValueAccessor interface to control component\n  writeValue(value: any): void {\n    this.instance.writeValue(value);\n  }\n\n  registerOnChange(fn: any): void {\n    this.instance.registerOnChange(fn);\n  }\n\n  registerOnTouched(fn: any): void {\n    this.instance.registerOnTouched(fn);\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.instance.setDisabledState(isDisabled);\n  }\n\n  private isFocusable(instance: IFormControlComponent | IFormFocusable): instance is IFormFocusable {\n    return Boolean((instance as IFormFocusable).focus);\n  }\n\n  private isSupportChanges(instance: IFormControlComponent | OnChanges): instance is OnChanges {\n    return Boolean((instance as OnChanges).ngOnChanges);\n  }\n}\n","import {\n  AfterViewInit,\n  Component,\n  ComponentFactoryResolver,\n  ComponentRef,\n  HostBinding,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChange,\n  SimpleChanges,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { FormWidgetModel } from '../../models/form-widget.model';\nimport { FormBuilderEvent, IFormFocusable, IFormWidgetComponent } from '@helix/platform/shared/api';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { FormBuilderService } from '../form-builder/form-builder.service';\nimport { isEqual } from 'lodash';\n\n@Component({\n  selector: 'rx-form-widget',\n  template: '<ng-container #container></ng-container>',\n  styleUrls: ['./form-widget.component.scss']\n})\nexport class FormWidgetComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\n  @Input() widget: FormWidgetModel;\n\n  @ViewChild('container', { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n\n  private componentRef: ComponentRef<{}>;\n  private formWidgetComponent: IFormWidgetComponent;\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  @HostBinding('class.isHidden')\n  isHidden = false;\n\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private formBuilderService: FormBuilderService\n  ) {}\n\n  ngOnInit() {\n    const factory = this.componentFactoryResolver.resolveComponentFactory(this.widget.component);\n\n    this.componentRef = this.container.createComponent(factory);\n\n    this.formWidgetComponent = this.componentRef.instance as IFormWidgetComponent;\n\n    this.formWidgetComponent.options = this.widget.options;\n    this.formWidgetComponent.isDisabled = this.widget.isDisabled;\n\n    this.formBuilderService.focusEditor$?.pipe(takeUntil(this.destroyed$)).subscribe(({ editorName, data }) => {\n      if (editorName === this.widget.widgetName && this.isFocusable(this.formWidgetComponent)) {\n        this.formWidgetComponent.focus(data);\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.formWidgetComponent.events?.pipe(takeUntil(this.destroyed$)).subscribe((event) => {\n      if (event.type === FormBuilderEvent.HideWidget) {\n        this.isHidden = event.payload;\n      } else {\n        this.formBuilderService.dispatch(event);\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.widget && this.formWidgetComponent) {\n      if (!isEqual(changes.widget.currentValue.component, changes.widget.previousValue.component)) {\n        this.componentRef.destroy();\n\n        const factory = this.componentFactoryResolver.resolveComponentFactory(changes.widget.currentValue.component);\n\n        this.componentRef = this.container.createComponent(factory);\n\n        this.formWidgetComponent = this.componentRef.instance as IFormWidgetComponent;\n      }\n\n      this.formWidgetComponent.options = changes.widget.currentValue.options;\n      this.formWidgetComponent.isDisabled = changes.widget.currentValue.isDisabled;\n\n      if (this.isSupportChanges(this.formWidgetComponent)) {\n        const onChanges: any = {};\n\n        if (!isEqual(changes.widget.previousValue.options, changes.widget.currentValue.options)) {\n          onChanges.options = new SimpleChange(\n            changes.widget.previousValue.options,\n            changes.widget.currentValue.options,\n            false\n          );\n        }\n\n        if (changes.widget.previousValue.isDisabled !== changes.widget.currentValue.isDisabled) {\n          onChanges.isDisabled = new SimpleChange(\n            changes.widget.previousValue.isDisabled,\n            changes.widget.currentValue.isDisabled,\n            false\n          );\n        }\n\n        if (Object.keys(onChanges).length) {\n          this.formWidgetComponent.ngOnChanges(onChanges);\n        }\n      }\n    }\n  }\n\n  ngOnDestroy() {\n    this.componentRef.destroy();\n    this.componentRef = null;\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  private isSupportChanges(instance: IFormWidgetComponent | OnChanges): instance is OnChanges {\n    return Boolean((instance as OnChanges).ngOnChanges);\n  }\n\n  private isFocusable(instance: IFormWidgetComponent | IFormFocusable): instance is IFormFocusable {\n    return Boolean((instance as IFormFocusable).focus);\n  }\n}\n","import { Component, Input } from '@angular/core';\nimport { FORM_BUILDER } from '../../form-builder.constant';\nimport { FormSectionModel } from '../../models/form-section.model';\nimport { FormControlModel } from '../../models/form-control.model';\nimport { FormWidgetModel } from '../../models/form-widget.model';\n\n@Component({\n  selector: 'rx-form-section',\n  templateUrl: './form-section.component.html'\n})\nexport class FormSectionComponent {\n  @Input() guid: string;\n  @Input() section: FormSectionModel;\n\n  controlTypes = FORM_BUILDER.controlTypes;\n\n  constructor() {\n    this.trackBySectionControls = this.trackBySectionControls.bind(this);\n  }\n\n  trackBySectionControls(index: number, item: FormControlModel | FormWidgetModel): string {\n    return this.guid + (item as FormControlModel).name || `${item.component.name}` || String(index);\n  }\n}\n","<adapt-accordion *ngIf=\"section.label\">\n  <adapt-accordion-tab [title]=\"section.label\" [isOpen]=\"true\">\n    <ng-container *ngFor=\"let control of section.controls; trackBy: trackBySectionControls\" [ngSwitch]=\"control.type\">\n      <rx-form-outlet\n        *ngSwitchCase=\"controlTypes.formControl\"\n        [formControl]=\"control.formControl\"\n        [control]=\"control\"\n        [hidden]=\"control.hidden\"\n      ></rx-form-outlet>\n      <rx-form-widget *ngSwitchCase=\"controlTypes.widget\" [widget]=\"control\"></rx-form-widget>\n    </ng-container>\n  </adapt-accordion-tab>\n</adapt-accordion>\n\n<ng-container *ngIf=\"!section.label\">\n  <ng-container *ngFor=\"let control of section.controls; trackBy: trackBySectionControls\" [ngSwitch]=\"control.type\">\n    <rx-form-outlet\n      *ngSwitchCase=\"controlTypes.formControl\"\n      [formControl]=\"control.formControl\"\n      [control]=\"control\"\n      [hidden]=\"control.hidden\"\n    ></rx-form-outlet>\n    <rx-form-widget *ngSwitchCase=\"controlTypes.widget\" [widget]=\"control\"></rx-form-widget>\n  </ng-container>\n</ng-container>\n","import {\n  AfterViewInit,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidatorFn } from '@angular/forms';\nimport {\n  IFormBuilderConfig,\n  IFormBuilderEvent,\n  IFormControlBuilderConfig,\n  IFormWidgetBuilderConfig,\n  IPlainObject\n} from '@helix/platform/shared/api';\nimport { RxGuidService } from '@helix/platform/utils';\nimport { find, forEach, has, isEmpty, isEqual } from 'lodash';\nimport { Observable, ReplaySubject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { FormBuilderFactory } from '../../form-builder.factory';\nimport { FormControlModel } from '../../models/form-control.model';\nimport { FormSectionModel } from '../../models/form-section.model';\nimport { FormWidgetModel } from '../../models/form-widget.model';\nimport { IFormBuilderEditor } from './form-builder-editor.interface';\nimport { FormBuilderService } from './form-builder.service';\n\n@Component({\n  selector: 'rx-form-builder',\n  templateUrl: './form-builder.component.html',\n  providers: [FormBuilderService]\n})\nexport class FormBuilderComponent implements OnInit, AfterViewInit, OnDestroy, OnChanges {\n  @Input()\n  config: IFormBuilderConfig;\n\n  @Input()\n  model: IPlainObject;\n\n  @Input()\n  guid: string = this.rxGuidService.generate();\n\n  @Input()\n  isReadOnly?: boolean;\n\n  @Input()\n  focusEditor$?: Observable<IFormBuilderEditor>;\n\n  @Output()\n  modelChange: EventEmitter<any> = new EventEmitter();\n\n  @Output()\n  editorEvent: EventEmitter<IFormBuilderEvent> = new EventEmitter();\n\n  @Output()\n  formInitialized: EventEmitter<void> = new EventEmitter();\n\n  layout: any;\n  formGroup: FormGroup;\n\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  private formSubscription: Subscription;\n\n  constructor(\n    private formBuilderFactory: FormBuilderFactory,\n    private formBuilder: FormBuilder,\n    private rxGuidService: RxGuidService,\n    private formBuilderService: FormBuilderService\n  ) {\n    this.formGroup = this.formBuilder.group({});\n\n    this.subscribeOnFormDataChange();\n  }\n\n  ngOnInit(): void {\n    if (this.focusEditor$) {\n      this.focusEditor$.pipe(takeUntil(this.destroyed$)).subscribe((focusEditorEvent: IFormBuilderEditor) => {\n        this.formBuilderService.setFocusEditor(focusEditorEvent);\n      });\n    }\n\n    this.formBuilderService.editorEvent$.pipe(takeUntil(this.destroyed$)).subscribe((event: IFormBuilderEvent) => {\n      this.editorEvent.emit(event);\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (\n      changes.model &&\n      changes.model.currentValue &&\n      !isEqual(changes.model.currentValue, changes.model.previousValue)\n    ) {\n      this.updateFormData(changes.model.currentValue);\n    }\n\n    if (changes.config) {\n      this.prepareLayout(changes.config.currentValue || []);\n    }\n\n    if (changes.isReadOnly && changes.isReadOnly.isFirstChange() && changes.isReadOnly.currentValue) {\n      this.formGroup.disable();\n    }\n  }\n\n  ngAfterViewInit() {\n    this.formInitialized.next();\n  }\n\n  trackByControl(index: number, item: FormSectionModel): string {\n    return `${this.guid}${item.label}`;\n  }\n\n  ngOnDestroy(): void {\n    this.formSubscription.unsubscribe();\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  dispatch(event: IFormBuilderEvent): void {\n    this.formBuilderService.dispatch(event);\n  }\n\n  private updateFormData(model): void {\n    this.formSubscription.unsubscribe();\n\n    Object.keys(model).forEach((propertyName) => this.getFormControlByName(propertyName).setValue(model[propertyName]));\n\n    Object.keys(this.formGroup.getRawValue())\n      .filter((propertyName) => !has(model, propertyName))\n      .forEach((propertyName) => this.formGroup.removeControl(propertyName));\n\n    this.subscribeOnFormDataChange();\n  }\n\n  private prepareLayout(config: IFormBuilderConfig): void {\n    this.layout = {\n      controls: config.map((section) =>\n        this.formBuilderFactory.section({\n          ...section,\n          controls: section.controls.map((propertyControlConfig) => {\n            let model: FormControlModel | FormWidgetModel;\n\n            if (this.isFormControl(propertyControlConfig)) {\n              const control = this.getFormControlByName(propertyControlConfig.name);\n\n              this.isReadOnly || propertyControlConfig.isDisabled\n                ? control.disable({ emitEvent: false })\n                : control.enable({ emitEvent: false });\n\n              model = this.formBuilderFactory.control(propertyControlConfig, control);\n            } else {\n              model = this.formBuilderFactory.widget({\n                ...propertyControlConfig,\n                isDisabled: propertyControlConfig.isDisabled || this.isReadOnly\n              });\n            }\n\n            return model;\n          })\n        })\n      )\n    };\n  }\n\n  private getFormControlByName(name: string): AbstractControl {\n    let control = this.formGroup.controls[name];\n\n    if (!control) {\n      let validators: ValidatorFn[];\n\n      forEach(this.config, (section) => {\n        const formControlConfig = find(section.controls, { name }) as IFormControlBuilderConfig;\n\n        if (formControlConfig) {\n          validators = formControlConfig.validators;\n        }\n\n        return !formControlConfig;\n      });\n\n      control = this.formBuilder.control(null, validators || []);\n\n      this.formGroup.addControl(name, control);\n    }\n\n    return control;\n  }\n\n  private subscribeOnFormDataChange(): void {\n    this.formSubscription = this.formGroup.valueChanges.subscribe(() => {\n      // Get a raw value for all form controls including disabled.\n      const rawValue = this.formGroup.getRawValue();\n      // Check if rawValue is not an empty object, in this case we don't\n      // want to emit model change when current model value is null.\n      const formData = isEmpty(rawValue) ? null : rawValue;\n\n      if (!isEqual(formData, this.model)) {\n        this.modelChange.emit(formData);\n      }\n    });\n  }\n\n  private isFormControl(\n    config: IFormControlBuilderConfig | IFormWidgetBuilderConfig\n  ): config is IFormControlBuilderConfig {\n    return !!(config as IFormControlBuilderConfig).name;\n  }\n}\n","<form *ngIf=\"layout\">\n  <rx-form-section\n    *ngFor=\"let control of layout.controls; trackBy: trackByControl\"\n    [section]=\"control\"\n    [guid]=\"guid\"\n  ></rx-form-section>\n</form>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptAccordionModule } from '@bmc-ux/adapt-angular';\nimport { FormBuilderComponent } from './components/form-builder/form-builder.component';\nimport { FormOutletComponent } from './components/form-outlet/form-outlet.component';\nimport { FormSectionComponent } from './components/form-section/form-section.component';\nimport { FormWidgetComponent } from './components/form-widget/form-widget.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, AdaptAccordionModule],\n  declarations: [FormWidgetComponent, FormOutletComponent, FormBuilderComponent, FormSectionComponent],\n  exports: [FormBuilderComponent]\n})\nexport class RxFormBuilderModule {}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ValueAccessor } from '../../form-builder';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { IDateFormControlOptions } from '../date-form-control';\nimport { RxDatetimePickerMode, RxDatetimeStruct } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { isNull, isUndefined } from 'lodash';\n\n@Component({\n  selector: 'rx-date-time-form-control',\n  templateUrl: './date-time-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: DateTimeFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class DateTimeFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IDateFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  datePickerControl = new FormControl('');\n\n  pickerMode = RxDatetimePickerMode.DateTime;\n\n  ngOnInit(): void {\n    this.datePickerControl.valueChanges.subscribe((value: RxDatetimeStruct) => {\n      if (value && !isNull(value.hours) && !isNull(value.minutes)) {\n        this.value = moment([\n          value.year || 0,\n          value.month || 0,\n          value.date || 0,\n          value.hours,\n          value.minutes,\n          value.seconds || 0\n        ]).toISOString();\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  writeValue(value: string): void {\n    super.writeValue(value);\n\n    const date = moment(this.value);\n\n    if (date.isValid()) {\n      this.datePickerControl.setValue({\n        year: date.year(),\n        month: date.month(),\n        date: date.date(),\n        hours: date.hour(),\n        minutes: date.minutes()\n      });\n    } else {\n      this.datePickerControl.setValue(null);\n    }\n  }\n}\n","<adapt-rx-datetime\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [mode]=\"pickerMode\"\n  [required]=\"options.required\"\n  [formControl]=\"datePickerControl\"\n>\n</adapt-rx-datetime>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { DateTimeFormControlComponent } from './date-time-form-control.component';\nimport { AdaptRxDatetimeModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [DateTimeFormControlComponent],\n  imports: [CommonModule, AdaptRxDatetimeModule, FormsModule, ReactiveFormsModule],\n  exports: [DateTimeFormControlComponent],\n  entryComponents: [DateTimeFormControlComponent]\n})\nexport class DateTimeFormControlModule {}\n","import { ChangeDetectorRef, Component, Input, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AdaptButtonGroupComponent, ButtonConfig } from '@bmc-ux/adapt-angular';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IGroupButtonFormControlOptions } from './group-button-control-options.interface';\nimport { findIndex } from 'lodash';\n\n@Component({\n  selector: 'rx-group-button-form-control',\n  templateUrl: './group-button-form-control.component.html',\n  styleUrls: ['./group-button-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: GroupButtonFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class GroupButtonFormControlComponent extends ValueAccessor<string | number> implements IFormControlComponent {\n  @ViewChild(AdaptButtonGroupComponent, { static: true })\n  adaptButtonGroupComponent: AdaptButtonGroupComponent;\n\n  @Input()\n  options: IGroupButtonFormControlOptions;\n\n  model: boolean[];\n\n  constructor(private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  onGroupButtonChange(groupButtonValues: boolean[]): void {\n    const index = findIndex(groupButtonValues, (buttonValue) => buttonValue);\n\n    this.setValue(this.options.items[index]);\n  }\n\n  onWriteValue(value: string | number): void {\n    this.updateModel(value);\n  }\n\n  private updateModel(value: string | number): void {\n    this.model = this.options.items.map((item) => item.value === value);\n  }\n\n  private setValue(item: ButtonConfig): void {\n    if (this.options.beforeValueChange) {\n      this.options.beforeValueChange(this.value, item.value).then((response) => {\n        if (response) {\n          this.value = item.value;\n        } else {\n          this.updateModel(this.value);\n          this.adaptButtonGroupComponent.writeValue(this.model);\n          this.changeDetectorRef.detectChanges();\n        }\n      });\n    } else {\n      this.value = item.value;\n    }\n  }\n}\n","<div class=\"form-group\" [ngClass]=\"{ 'is-required': options.required }\">\n  <adapt-rx-control-label\n    [label]=\"options.label\"\n    [showRequiredLabel]=\"!!options.required\"\n    [tooltip]=\"\n      options.tooltip\n        ? {\n            content: popoverContent,\n            popoverMode: options.tooltip.popoverMode,\n            placement: options.tooltip.placement,\n            iconName: options.tooltip.iconName\n          }\n        : null\n    \"\n  ></adapt-rx-control-label>\n\n  <div class=\"mt-1\">\n    <adapt-button-group\n      [(ngModel)]=\"model\"\n      (ngModelChange)=\"onGroupButtonChange($event)\"\n      [disabled]=\"isDisabled\"\n      [config]=\"options.items\"\n      [size]=\"options.size || 'small'\"\n    >\n    </adapt-button-group>\n  </div>\n</div>\n\n<ng-template #popoverContent>\n  <span [innerHtml]=\"options.tooltip.content\"></span>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { GroupButtonFormControlComponent } from './group-button-form-control.component';\nimport {\n  AdaptButtonModule,\n  AdaptButtonGroupModule,\n  AdaptRxLabelModule,\n  AdaptTooltipModule\n} from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [GroupButtonFormControlComponent],\n  exports: [GroupButtonFormControlComponent],\n  entryComponents: [GroupButtonFormControlComponent],\n  imports: [\n    CommonModule,\n    AdaptRxLabelModule,\n    AdaptButtonModule,\n    AdaptButtonGroupModule,\n    AdaptTooltipModule,\n    FormsModule\n  ]\n})\nexport class GroupButtonFormControlModule {}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Inject,\n  OnDestroy,\n  QueryList,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { FormControl } from '@angular/forms';\nimport { BehaviorSubject, combineLatest, fromEvent, Observable, ReplaySubject } from 'rxjs';\nimport {\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  startWith,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { UP_ARROW, DOWN_ARROW, LEFT_ARROW, RIGHT_ARROW, ENTER } from '@angular/cdk/keycodes';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { isNumber } from 'lodash';\n\nimport { IIconBrowserDialogConfig, IIconGlyph } from '../icon-picker.types';\n\n@Component({\n  selector: 'rx-icon-browser-dialog',\n  templateUrl: './icon-browser-dialog.component.html',\n  styleUrls: ['./icon-browser-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class IconBrowserDialogComponent implements AfterViewInit, OnDestroy {\n  config: IIconBrowserDialogConfig = this.activeModalRef.getData();\n\n  searchFormControl = new FormControl();\n\n  selectedIcon$ = new BehaviorSubject<IIconGlyph>(this.config.selectedIcon);\n\n  filteredIcons$: Observable<IIconGlyph[]> = this.searchFormControl.valueChanges.pipe(\n    debounceTime(200),\n    startWith(''),\n    distinctUntilChanged(),\n    map((query) =>\n      query\n        ? this.config.icons.filter(({ name }) => name.toLowerCase().indexOf(query.toLowerCase()) > -1)\n        : this.config.icons\n    )\n  );\n\n  isSelectButtonDisabled$ = combineLatest([this.selectedIcon$, this.filteredIcons$]).pipe(\n    map(\n      ([selectedIcon, filteredIcons]) =>\n        !selectedIcon || !filteredIcons.length || selectedIcon === this.config.selectedIcon\n    )\n  );\n\n  @ViewChildren('iconButton', { read: ElementRef })\n  iconButtons: QueryList<ElementRef<HTMLButtonElement>>;\n\n  @ViewChild('iconsList', { read: ElementRef })\n  iconsList: ElementRef<HTMLUListElement>;\n\n  private selectedIndex$: Observable<number> = combineLatest([this.selectedIcon$, this.filteredIcons$]).pipe(\n    map(([selectedIcon, filteredIcons]) =>\n      selectedIcon ? filteredIcons.findIndex((icon) => icon.id === selectedIcon.id) : null\n    ),\n    distinctUntilChanged()\n  );\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(private activeModalRef: ActiveModalRef, @Inject(DOCUMENT) private document: any) {}\n\n  ngAfterViewInit(): void {\n    fromEvent<KeyboardEvent>(this.iconsList.nativeElement, 'keydown')\n      .pipe(\n        filter((event) => [UP_ARROW, DOWN_ARROW, LEFT_ARROW, RIGHT_ARROW, ENTER].includes(event.keyCode)),\n        tap((event) => event.preventDefault()),\n        withLatestFrom(this.filteredIcons$, this.selectedIndex$),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe(([event, icons, selectedIndex]) => {\n        // we have to subtract 1px from the icon button width to compensate -1 margin trick in the CSS\n        const cellsPerLine = Math.floor(\n          this.iconsList.nativeElement.clientWidth / (this.iconButtons.first.nativeElement.offsetWidth - 1)\n        );\n\n        let newIndex: number;\n\n        if ([UP_ARROW, DOWN_ARROW, LEFT_ARROW, RIGHT_ARROW].includes(event.keyCode)) {\n          if (isNumber(selectedIndex)) {\n            switch (event.keyCode) {\n              case LEFT_ARROW: {\n                newIndex = selectedIndex > 0 ? selectedIndex - 1 : 0;\n                break;\n              }\n\n              case UP_ARROW: {\n                newIndex = selectedIndex - cellsPerLine;\n\n                if (newIndex < 0) {\n                  newIndex = selectedIndex;\n                }\n\n                break;\n              }\n\n              case RIGHT_ARROW: {\n                newIndex = selectedIndex < icons.length - 1 ? selectedIndex + 1 : selectedIndex;\n                break;\n              }\n\n              case DOWN_ARROW: {\n                newIndex = selectedIndex + cellsPerLine;\n\n                if (newIndex >= icons.length) {\n                  newIndex = selectedIndex;\n                }\n\n                break;\n              }\n            }\n          } else {\n            newIndex = 0;\n          }\n\n          this.selectIcon(icons[newIndex]);\n\n          this.scrollToSelectedIcon();\n        } else {\n          event.preventDefault();\n\n          if (this.selectedIcon$.value) {\n            this.onSelect();\n          }\n        }\n      });\n\n    this.scrollToSelectedIcon();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n\n    this.selectedIcon$.complete();\n  }\n\n  selectIcon(icon: IIconGlyph): void {\n    this.selectedIcon$.next(icon);\n  }\n\n  onSelect(): void {\n    this.activeModalRef.close(this.selectedIcon$.value);\n  }\n\n  onCancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  isIconSelected(icon: IIconGlyph): boolean {\n    return this.selectedIcon$.value?.id === icon.id;\n  }\n\n  private scrollToSelectedIcon(): void {\n    this.selectedIcon$.pipe(take(1)).subscribe((selectedIcon) => {\n      if (selectedIcon) {\n        this.iconsList.nativeElement.querySelector(`.d-icon-${selectedIcon.id}`)?.scrollIntoView({\n          block: 'nearest',\n          inline: 'nearest'\n        });\n      }\n    });\n  }\n\n  trackByFn(index: number, item: IIconGlyph): string {\n    return item.id;\n  }\n}\n","<div class=\"modal-body mh-100\">\n  <div class=\"d-flex w-100 h-100\">\n    <ng-container *ngIf=\"filteredIcons$ | async as filteredIcons\">\n      <div class=\"w-100 h-100\">\n        <adapt-rx-search\n          class=\"icon-search-field\"\n          [formControl]=\"searchFormControl\"\n          [autofocus]=\"true\"\n          (keydown)=\"$event.stopPropagation()\"\n        ></adapt-rx-search>\n\n        <div class=\"icons-browser d-flex\">\n          <ul #iconsList class=\"icons-list h-100\" *ngIf=\"filteredIcons?.length; else noIconsFound\" tabindex=\"0\">\n            <li\n              *ngFor=\"let icon of filteredIcons; trackBy: trackByFn\"\n              class=\"icon-list-item\"\n              [class.icon-list-item-selected]=\"isIconSelected(icon)\"\n            >\n              <button\n                #iconButton\n                class=\"icon-button p-0\"\n                tabindex=\"-1\"\n                [ngClass]=\"'d-icon-' + icon.id\"\n                (click)=\"selectIcon(icon)\"\n              >\n                <span class=\"sr-only\">{{ icon.name }}</span>\n              </button>\n            </li>\n          </ul>\n\n          <ng-template #noIconsFound>\n            <div class=\"icon-empty-state flex-grow-1\">\n              <adapt-empty-state class=\"flex-grow-1\" [type]=\"'search'\" [label]=\"'No icons found'\"></adapt-empty-state>\n            </div>\n          </ng-template>\n        </div>\n      </div>\n\n      <div\n        *ngIf=\"filteredIcons?.length\"\n        class=\"icon-preview d-flex flex-column justify-content-center align-items-center\"\n      >\n        <ng-container *ngIf=\"selectedIcon$ | async as selectedIcon; else noIconSelected\">\n          <adapt-icon [name]=\"selectedIcon.id\" [testID]=\"selectedIcon.id\"></adapt-icon>\n\n          <p class=\"icon-title mt-1 mb-0\">{{ selectedIcon.name }}</p>\n        </ng-container>\n\n        <ng-template #noIconSelected>\n          <p class=\"no-icon-selected mb-0\">No icon selected</p>\n        </ng-template>\n      </div>\n    </ng-container>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    rx-id=\"select-button\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    [disabled]=\"isSelectButtonDisabled$ | async\"\n    (click)=\"onSelect()\"\n  >\n    Select\n  </button>\n\n  <button rx-id=\"cancel-button\" adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"onCancel()\">Cancel</button>\n</div>\n","import { Component, Input, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, map } from 'rxjs/operators';\nimport { merge, Observable, OperatorFunction, Subject } from 'rxjs';\nimport { noop, get, sortBy } from 'lodash';\nimport { AdaptModalService, AdaptRxTypeaheadComponent, RxTypeaheadSelectItemEvent } from '@bmc-ux/adapt-angular';\nimport iconFontConfig from '@bmc-ux/dpl-iconfont/config/if_dpl.json';\nimport { RX_LEGACY_ICONS } from '@helix/platform/view/api';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { IIconGlyph, IIconBrowserDialogConfig, IIconPickerFormControlOptions } from './icon-picker.types';\nimport { IconBrowserDialogComponent } from './icon-browser-dialog/icon-browser-dialog.component';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\n\n@Component({\n  selector: 'rx-icon-picker-form-control',\n  templateUrl: './icon-picker-form-control.component.html',\n  styleUrls: ['./icon-picker-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: IconPickerFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class IconPickerFormControlComponent extends ValueAccessor<string> implements OnInit, IFormControlComponent {\n  @Input()\n  options: IIconPickerFormControlOptions;\n\n  selectedIcon: IIconGlyph;\n\n  private focus$ = new Subject<FocusEvent>();\n\n  private iconGlyphs = iconFontConfig.glyphs as IIconGlyph[];\n\n  @ViewChild(AdaptRxTypeaheadComponent, { static: true })\n  typeahead: AdaptRxTypeaheadComponent;\n\n  constructor(private adaptModalService: AdaptModalService, private renderer: Renderer2) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.iconGlyphs = sortBy(this.iconGlyphs, (glyph) => glyph.name.toLowerCase());\n  }\n\n  search: OperatorFunction<string, IIconGlyph[]> = (text$: Observable<string>) => {\n    const userInput$ = text$.pipe(debounceTime(200), distinctUntilChanged());\n\n    const inputFocus$ = this.focus$.pipe(map((event) => (event.target as HTMLInputElement).value));\n\n    return merge(userInput$, inputFocus$).pipe(\n      map((term) =>\n        term\n          ? this.iconGlyphs.filter(({ name }) => name.toLowerCase().indexOf(term.toLowerCase()) > -1)\n          : this.iconGlyphs\n      )\n    );\n  };\n\n  inputFormatter(option: IIconGlyph): string {\n    return option.name;\n  }\n\n  onSelectItem(event: RxTypeaheadSelectItemEvent): void {\n    this.value = event.item.id;\n  }\n\n  onWriteValue(value: string): void {\n    const iconId = get(RX_LEGACY_ICONS, value, value);\n\n    if (!this.selectedIcon || this.selectedIcon.id !== iconId) {\n      this.selectedIcon = this.iconGlyphs.find((icon) => icon.id === iconId);\n    }\n  }\n\n  onFocus(event: FocusEvent): void {\n    this.focus$.next(event);\n  }\n\n  onBlur(): void {\n    this.selectedIcon = this.iconGlyphs.find((icon) => icon.id === this.value);\n\n    const inputValue = this.typeahead.inputRef.nativeElement.value;\n\n    if (!inputValue || !this.selectedIcon) {\n      this.value = '';\n\n      this.onWriteValue(this.value);\n\n      this.renderer.setProperty(this.typeahead.inputRef.nativeElement, 'value', '');\n    }\n  }\n\n  openIconBrowserDialog(): void {\n    this.adaptModalService\n      .open({\n        title: 'Select icon',\n        data: {\n          selectedIcon: this.selectedIcon,\n          icons: this.iconGlyphs\n        } as IIconBrowserDialogConfig,\n        content: IconBrowserDialogComponent\n      })\n      .then((selectedIcon: IIconGlyph) => {\n        this.value = selectedIcon.id;\n        this.selectedIcon = selectedIcon;\n      })\n      .catch(noop);\n  }\n}\n","<div class=\"d-flex justify-content-between align-items-center pb-1\">\n  <label class=\"form-control-label mb-0\">{{ options.label }}</label>\n\n  <button\n    *ngIf=\"!isDisabled\"\n    adapt-button\n    type=\"button\"\n    class=\"p-0 border-0\"\n    btn-type=\"tertiary\"\n    rx-id=\"browse-button\"\n    (click)=\"openIconBrowserDialog()\"\n  >\n    <span class=\"d-icon-folder_open\"></span>\n    Browse\n  </button>\n</div>\n\n<div class=\"control-wrapper d-flex\">\n  <adapt-rx-typeahead\n    class=\"w-100\"\n    [class.has-selected-icon]=\"selectedIcon\"\n    rx-id=\"input-field\"\n    [required]=\"options.required\"\n    [disabled]=\"isDisabled\"\n    [appendToBody]=\"options.appendToBody\"\n    [typeahead]=\"search\"\n    [inputFormatter]=\"inputFormatter\"\n    [resultTemplate]=\"resultTemplate\"\n    [virtualScroll]=\"true\"\n    [(ngModel)]=\"selectedIcon\"\n    (onSelectItem)=\"onSelectItem($event)\"\n    (onFocus)=\"onFocus($event)\"\n    (onBlur)=\"onBlur()\"\n    [title]=\"selectedIcon?.name ?? ''\"\n  ></adapt-rx-typeahead>\n  <adapt-icon\n    *ngIf=\"selectedIcon\"\n    class=\"icon-preview\"\n    [name]=\"selectedIcon.id\"\n    [testID]=\"selectedIcon.id\"\n  ></adapt-icon>\n</div>\n\n<ng-template #resultTemplate let-result=\"result\">\n  <span class=\"icon-item\" [ngClass]=\"'d-icon-left-' + result.id\"></span>\n  {{ result.name }}\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptEmptyStateModule, AdaptIconModule, AdaptRxSearchModule } from '@bmc-ux/adapt-angular';\n\nimport { IconBrowserDialogComponent } from './icon-browser-dialog.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    AdaptButtonModule,\n    AdaptRxSearchModule,\n    AdaptIconModule,\n    AdaptEmptyStateModule\n  ],\n  declarations: [IconBrowserDialogComponent],\n  exports: [IconBrowserDialogComponent]\n})\nexport class IconBrowserDialogModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptIconModule, AdaptRxTypeaheadModule } from '@bmc-ux/adapt-angular';\n\nimport { IconPickerFormControlComponent } from './icon-picker-form-control.component';\nimport { IconBrowserDialogModule } from './icon-browser-dialog/icon-browser-dialog.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    AdaptRxTypeaheadModule,\n    AdaptButtonModule,\n    AdaptIconModule,\n    IconBrowserDialogModule\n  ],\n  declarations: [IconPickerFormControlComponent],\n  exports: [IconPickerFormControlComponent]\n})\nexport class IconPickerFormControlModule {}\n","import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ValueAccessor } from '../../form-builder';\nimport { IInputListFormControlOptions } from './input-list-form-control-options.interface';\n\n@Component({\n  selector: 'rx-input-list-form-control',\n  templateUrl: './input-list-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: InputListFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class InputListFormControlComponent extends ValueAccessor<string[]> implements OnInit, OnDestroy {\n  @Input()\n  options: IInputListFormControlOptions;\n\n  formArray: FormArray = this.formBuilder.array([]);\n\n  private destroyed$ = new ReplaySubject<void>(1);\n\n  constructor(private formBuilder: FormBuilder) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.formArray.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe(() => {\n      if (this.formArray.controls.length) {\n        this.value = this.formArray.getRawValue();\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  addItem(): void {\n    this.formArray.push(new FormControl(''));\n  }\n\n  removeItem(index: number) {\n    this.formArray.removeAt(index);\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"form-group\">\n  <div class=\"d-flex flex-row justify-content-between align-items-center\">\n    <adapt-rx-control-label [label]=\"options.label\" [showRequiredLabel]=\"options.required\"></adapt-rx-control-label>\n\n    <button adapt-button type=\"button\" btn-type=\"tertiary\" size=\"small\" (click)=\"addItem()\">\n      <span class=\"d-icon-plus_circle mr-1\" aria-hidden=\"true\"></span>\n      Add item\n    </button>\n  </div>\n\n  <div\n    class=\"d-flex flex-row align-items-center w-100 form-group\"\n    *ngFor=\"let control of formArray.controls; let i = index\"\n  >\n    <adapt-rx-textfield class=\"flex-fill\" [formControl]=\"control\"></adapt-rx-textfield>\n    <button\n      (click)=\"removeItem(i)\"\n      class=\"close position-relative ml-2\"\n      type=\"button\"\n      [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.remove.label' | translate\"\n    ></button>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptRxLabelModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { InputListFormControlComponent } from './input-list-form-control.component';\n\n@NgModule({\n  declarations: [InputListFormControlComponent],\n  exports: [InputListFormControlComponent],\n  imports: [\n    CommonModule,\n    AdaptRxLabelModule,\n    ReactiveFormsModule,\n    AdaptButtonModule,\n    TranslateModule,\n    AdaptRxTextfieldModule\n  ]\n})\nexport class InputListFormControlModule {}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ILabelFormControlOptions } from './label-form-control-options.interface';\n\n@Component({\n  selector: 'rx-label-form-control',\n  templateUrl: './label-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: LabelFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class LabelFormControlComponent extends ValueAccessor<boolean> implements IFormControlComponent, OnInit {\n  @Input()\n  options: ILabelFormControlOptions;\n\n  label: string;\n\n  constructor(private translateService: TranslateService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.label = this.options.labelKey ? this.translateService.instant(this.options.labelKey) : this.options.label;\n  }\n}\n","<adapt-rx-control-label [label]=\"label\"></adapt-rx-control-label>\n","import { NgModule } from '@angular/core';\nimport { AdaptRxLabelModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { LabelFormControlComponent } from './label-form-control.component';\n\n@NgModule({\n  declarations: [LabelFormControlComponent],\n  exports: [LabelFormControlComponent],\n  entryComponents: [LabelFormControlComponent],\n  imports: [AdaptRxLabelModule, TranslateModule]\n})\nexport class LabelFormControlModule {}\n","import { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\nimport { IExpressionFormControlOptions } from '../expression-form-control/expression-form-control.types';\nimport { IListItem } from './list-item.interface';\nimport { FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'rx-list-item',\n  templateUrl: './list-item.component.html'\n})\nexport class ListItemComponent implements OnInit {\n  @Input()\n  config: IListItem;\n\n  @Input()\n  propertyPath: string;\n\n  @Input()\n  control: FormControl;\n\n  @Output()\n  events = new EventEmitter();\n\n  options: IExpressionFormControlOptions;\n\n  ngOnInit() {\n    this.options = {\n      label: this.config.label,\n      dataDictionary$: this.config.dataDictionary$,\n      operators: this.config.operators\n    };\n  }\n}\n","<adapt-rx-textfield *ngIf=\"!config.dataDictionary$\" [label]=\"config.label\" [formControl]=\"control\">\n</adapt-rx-textfield>\n\n<rx-expression-form-control\n  *ngIf=\"config.dataDictionary$\"\n  [formControl]=\"control\"\n  [propertyPath]=\"propertyPath\"\n  [options]=\"options\"\n  (events)=\"events.emit($event)\"\n>\n</rx-expression-form-control>\n","import { RxStringService } from '@helix/platform/utils';\nimport { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IListFormControlOptions } from './list-form-control-options.interface';\nimport { forEach, isEqual } from 'lodash';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { IPlainObject } from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-list-form-control',\n  templateUrl: './list-form-control.component.html',\n  styleUrls: ['./list-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: ListFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class ListFormControlComponent extends ValueAccessor<any[]> implements IFormControlComponent, OnInit, OnDestroy {\n  @Input()\n  options: IListFormControlOptions;\n\n  @Input()\n  propertyPath: string;\n\n  @Output()\n  events = new EventEmitter<any>();\n\n  itemList: FormArray = this.formBuilder.array([]);\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(private formBuilder: FormBuilder, public stringService: RxStringService) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.itemList.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((value) => {\n      this.value = value;\n    });\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    super.setDisabledState(isDisabled);\n\n    if (isDisabled) {\n      this.itemList.disable();\n    } else {\n      this.itemList.enable();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.clearItems();\n  }\n\n  onWriteValue(modelValue): void {\n    if (!isEqual(modelValue, this.itemList.value)) {\n      this.clearItems();\n\n      // initialize values\n      forEach(modelValue, (item) => this.addItem(item));\n    }\n  }\n\n  clearItems(): void {\n    this.itemList.clear();\n  }\n\n  addItem(item: IPlainObject): void {\n    const itemControl = this.createItemFormGroup(item);\n\n    this.itemList.push(itemControl);\n  }\n\n  createItemFormGroup(item: IPlainObject): FormGroup {\n    const formGroupData: IPlainObject = {};\n\n    this.options.items.forEach((i) => {\n      formGroupData[i.propertyName] = item[i.propertyName] || null;\n    });\n\n    return this.formBuilder.group(formGroupData);\n  }\n\n  onItemRemove(index: number): void {\n    this.itemList.removeAt(index);\n  }\n\n  onAddItem(): void {\n    this.addItem({});\n  }\n}\n","<div [formGroup]=\"itemList\">\n  <button\n    (click)=\"onAddItem()\"\n    type=\"button\"\n    class=\"btn btn-sm btn-link px-0 py-0\"\n    [attr.rx-id]=\"'add-item-button'\"\n    *ngIf=\"!isDisabled\"\n  >\n    <span class=\"d-icon-plus_circle mr-1\" aria-hidden=\"true\"></span>\n    {{ options.addItemText }}\n  </button>\n\n  <div class=\"card mt-2\" *ngFor=\"let itemFormGroup of itemList.controls; let i = index\">\n    <div class=\"card-block p-3\">\n      <button\n        *ngIf=\"!isDisabled\"\n        (click)=\"onItemRemove(i)\"\n        class=\"close position-relative\"\n        type=\"button\"\n        aria-label=\"Remove\"\n      ></button>\n\n      <div\n        class=\"form-group\"\n        [ngClass]=\"{ 'mb-0': last, 'mb-3': !last }\"\n        *ngFor=\"let item of options.items; let first = first; let last = last\"\n        [attr.rx-id]=\"stringService.toRxId(item.label)\"\n      >\n        <rx-list-item\n          [config]=\"item\"\n          [control]=\"itemFormGroup.get(item.propertyName)\"\n          [propertyPath]=\"this.propertyPath + '[' + i + '].' + item.propertyName\"\n          (events)=\"events.emit($event)\"\n        >\n        </rx-list-item>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf=\"isDisabled && options.emptyListText && itemList.controls.length === 0\">{{ options.emptyListText }}</div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ListFormControlComponent } from './list-form-control.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { ExpressionFormControlModule } from '../expression-form-control/expression-form-control.module';\nimport { ListItemComponent } from './list-item.component';\n\n@NgModule({\n  declarations: [ListFormControlComponent, ListItemComponent],\n  exports: [ListFormControlComponent],\n  entryComponents: [ListFormControlComponent],\n  imports: [CommonModule, ReactiveFormsModule, AdaptRxTextfieldModule, ExpressionFormControlModule]\n})\nexport class ListFormControlModule {}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { head, last, upperFirst, includes } from 'lodash';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IOptionalExpressionControlOptions } from './optional-expression-control-options.interface';\nimport { IExpressionFormControlOptions } from '../expression-form-control';\n\n@Component({\n  selector: 'rx-optional-expression-form-control',\n  templateUrl: './optional-expression-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: OptionalExpressionControlComponent,\n      multi: true\n    }\n  ],\n  styleUrls: ['./optional-expression-control.component.scss']\n})\nexport class OptionalExpressionControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IOptionalExpressionControlOptions;\n\n  @Input()\n  propertyPath: string;\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  expressionFieldOptions: IExpressionFormControlOptions;\n\n  checkbox: boolean;\n\n  modelValues = {\n    disable: '0',\n    enable: '1'\n  };\n\n  selectValues = {\n    all: 'all',\n    condition: 'condition'\n  };\n\n  selectOptions: RxSelectOption[] = [\n    {\n      id: this.selectValues.all,\n      name: 'At all times'\n    },\n    {\n      id: this.selectValues.condition,\n      name: 'When condition is true'\n    }\n  ];\n\n  selectedCondition: RxSelectOption[] = [head(this.selectOptions)];\n\n  conditionValue: string;\n\n  ngOnInit(): void {\n    this.expressionFieldOptions = {\n      label: 'Condition',\n      expressionEditorPropertyName: this.options.expressionEditorPropertyName || upperFirst(this.propertyPath),\n      dataDictionary$: this.options.dataDictionary$,\n      operators: this.options.operators\n    };\n  }\n\n  onWriteValue(modelValue: string): void {\n    this.conditionValue = '';\n    this.selectedCondition = [head(this.selectOptions)];\n\n    if (modelValue === this.modelValues.enable) {\n      this.checkbox = true;\n    } else if (modelValue === this.modelValues.disable) {\n      this.checkbox = false;\n    } else {\n      this.checkbox = true;\n      this.selectedCondition = [last(this.selectOptions)];\n      this.conditionValue = modelValue;\n    }\n  }\n\n  onSwitcherChange(modelValue: boolean): void {\n    this.selectedCondition = [head(this.selectOptions)];\n    this.conditionValue = '';\n\n    this.value = modelValue ? this.modelValues.enable : this.modelValues.disable;\n  }\n\n  onSelectChange(selectedValue: RxSelectOption[]): void {\n    this.selectedCondition = selectedValue;\n    this.conditionValue = '';\n\n    this.value = head(selectedValue).id === this.selectValues.all ? this.modelValues.enable : '';\n  }\n\n  onConditionChange(expressionValue: string): void {\n    this.value = expressionValue;\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n}\n","<adapt-rx-control-label [label]=\"options.label\"></adapt-rx-control-label>\n\n<div class=\"clearfix\">\n  <adapt-rx-switch\n    [(ngModel)]=\"checkbox\"\n    (ngModelChange)=\"onSwitcherChange($event)\"\n    [disabled]=\"isDisabled\"\n  ></adapt-rx-switch>\n\n  <adapt-rx-select\n    *ngIf=\"checkbox\"\n    class=\"condition-select\"\n    [options]=\"selectOptions\"\n    [ngModel]=\"selectedCondition\"\n    (ngModelChange)=\"onSelectChange($event)\"\n    [disabled]=\"isDisabled\"\n    [optionFormatter]=\"optionFormatter\"\n  ></adapt-rx-select>\n</div>\n\n<rx-expression-form-control\n  *ngIf=\"selectedCondition[0].id === selectValues.condition\"\n  [options]=\"expressionFieldOptions\"\n  [propertyPath]=\"this.propertyPath\"\n  [disabled]=\"isDisabled\"\n  [(ngModel)]=\"conditionValue\"\n  (ngModelChange)=\"onConditionChange($event)\"\n  (events)=\"events.emit($event)\"\n>\n</rx-expression-form-control>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxLabelModule, AdaptRxSelectModule, AdaptRxSwitchModule } from '@bmc-ux/adapt-angular';\nimport { AdaptTextFieldModule } from '@bmc-ux/obsolete';\nimport { ExpressionFormControlModule } from '../expression-form-control/expression-form-control.module';\nimport { OptionalExpressionControlComponent } from './optional-expression-control.component';\n\n@NgModule({\n  declarations: [OptionalExpressionControlComponent],\n  exports: [OptionalExpressionControlComponent],\n  entryComponents: [OptionalExpressionControlComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AdaptRxSwitchModule,\n    AdaptTextFieldModule,\n    ExpressionFormControlModule,\n    AdaptRxLabelModule,\n    AdaptRxSelectModule\n  ]\n})\nexport class OptionalExpressionControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { head, isNull } from 'lodash';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ISelectOption } from '../select-form-control';\nimport { IOptionalSelectFormControlOptions } from './optional-select-form-control.interfaces';\n\n@Component({\n  selector: 'rx-optional-select-form-control',\n  templateUrl: './optional-select-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: OptionalSelectFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class OptionalSelectFormControlComponent extends ValueAccessor<string> implements IFormControlComponent {\n  @Input()\n  options: IOptionalSelectFormControlOptions;\n\n  switcherValue = false;\n  selectValue: ISelectOption[] = [];\n\n  onSwitcherChange(newValue: boolean): void {\n    this.switcherValue = newValue;\n\n    if (newValue) {\n      const option = head(this.options.options);\n\n      if (option && !this.value) {\n        this.value = option.id;\n      }\n    } else {\n      this.value = null;\n    }\n  }\n\n  onWriteValue(value: string): void {\n    this.switcherValue = !isNull(value);\n    this.selectValue = this.value ? [this.options.options.find((option) => option.id === value)] : [];\n  }\n\n  onSelectionChange(value: ISelectOption[]): void {\n    this.value = head(value).id;\n  }\n\n  optionFormatter(option: ISelectOption): string {\n    return option.name;\n  }\n}\n","<div class=\"form-group\" [ngClass]=\"{ 'is-required': options.required }\">\n  <label class=\"form-control-label\" *ngIf=\"options.label\">{{ options.label }}</label>\n\n  <div class=\"d-flex\">\n    <div class=\"mr-2\">\n      <adapt-rx-switch\n        [ngModel]=\"switcherValue\"\n        (ngModelChange)=\"onSwitcherChange($event)\"\n        [disabled]=\"isDisabled\"\n      ></adapt-rx-switch>\n    </div>\n\n    <adapt-rx-select\n      class=\"mb-0 w-100\"\n      *ngIf=\"switcherValue\"\n      [disabled]=\"isDisabled\"\n      [options]=\"options.options\"\n      [required]=\"options.required\"\n      [ngModel]=\"selectValue\"\n      (ngModelChange)=\"onSelectionChange($event)\"\n      [optionFormatter]=\"optionFormatter\"\n    >\n    </adapt-rx-select>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptRxSwitchModule, AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { OptionalSelectFormControlComponent } from './optional-select-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, AdaptRxSwitchModule, AdaptRxSelectModule],\n  exports: [OptionalSelectFormControlComponent],\n  declarations: [OptionalSelectFormControlComponent],\n  entryComponents: [OptionalSelectFormControlComponent]\n})\nexport class OptionalSelectFormControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { find, head, isNaN, isNil, isUndefined, map, size } from 'lodash';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IStepperOptions, IStepperWithUnitsFormControlOptions } from './stepper-with-units-form-control.interface';\n\n@Component({\n  selector: 'rx-stepper-with-units-form-control',\n  templateUrl: './stepper-with-units-form-control.component.html',\n  styleUrls: ['./stepper-with-units-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: StepperWithUnitsFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class StepperWithUnitsFormControlComponent extends ValueAccessor<string> implements IFormControlComponent {\n  @Input()\n  options: IStepperWithUnitsFormControlOptions;\n\n  get unit(): RxSelectOption[] {\n    return this.unitValue;\n  }\n\n  set unit(value: RxSelectOption[]) {\n    const unitValueId = head(value).id;\n\n    this.unitValue = value;\n    this.updateStepperConfig(unitValueId);\n\n    this.stepperValue = this.stepperValueByUnitsCache.hasOwnProperty(unitValueId)\n      ? this.stepperValueByUnitsCache[unitValueId]\n      : this.stepperOptions.defaultValue;\n\n    this.value = this.stepperValue ? this.stepperValue + unitValueId : null;\n  }\n\n  get stepper(): number {\n    return this.stepperValue;\n  }\n\n  set stepper(value: number) {\n    this.stepperValue = value;\n    this.stepperValueByUnitsCache[head(this.unit).id] = value;\n\n    this.value = !isNil(value) && !isNaN(value) && this.unitValue.length ? value + head(this.unitValue).id : null;\n  }\n\n  stepperOptions: IStepperOptions = {};\n  maxValue: number;\n  minValue: number;\n\n  private stepperValue: number = null;\n  private unitValue: RxSelectOption[] = [];\n  private stepperValueByUnitsCache: IPlainObject = {};\n\n  writeValue(value: string): void {\n    if (value) {\n      const numberValue = value.match(/^[+-]?\\d+(\\.\\d+)?/);\n\n      this.stepperValue = numberValue ? Number(head(numberValue)) : null;\n\n      if (size(this.options.units)) {\n        const regExpString = map(this.options.units, 'id').join('|');\n        const unitId = head(value.match(new RegExp(regExpString)));\n\n        if (unitId) {\n          this.unitValue = [find(this.options.units, { id: unitId })];\n          this.stepperValueByUnitsCache[unitId] = this.stepperValue;\n          this.updateStepperConfig(unitId);\n        }\n      } else {\n        this.unitValue = [];\n      }\n    } else {\n      if (this.unitValue.length) {\n        this.stepperValue = null;\n      } else {\n        const defaultUnit = find(this.options.units, { id: this.options.defaultUnit }) ?? head(this.options.units);\n\n        this.unitValue = [defaultUnit];\n\n        this.updateStepperConfig(defaultUnit.id);\n\n        this.stepperValue = this.stepperOptions.defaultValue;\n      }\n    }\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  private updateStepperConfig(unitId: string): void {\n    this.stepperOptions = this.options.stepperOptionByUnits ? this.options.stepperOptionByUnits[unitId] : {};\n\n    this.maxValue = isUndefined(this.stepperOptions.maxValue) ? Number.MAX_SAFE_INTEGER : this.stepperOptions.maxValue;\n\n    this.minValue = isUndefined(this.stepperOptions.minValue) ? Number.MIN_SAFE_INTEGER : this.stepperOptions.minValue;\n  }\n}\n","<div class=\"form-group\" [ngClass]=\"{ 'is-required': options.required }\">\n  <label class=\"form-control-label\" *ngIf=\"options.label\">{{ options.label }}</label>\n\n  <div class=\"d-flex flex-row\">\n    <div class=\"control\">\n      <adapt-rx-counter\n        [min]=\"minValue\"\n        [max]=\"maxValue\"\n        [adaptMin]=\"minValue\"\n        [adaptMax]=\"maxValue\"\n        [required]=\"options.required\"\n        [disabled]=\"isDisabled\"\n        [(ngModel)]=\"stepper\"\n        [step]=\"options.step || 1\"\n        adaptIntegerNumber\n      >\n      </adapt-rx-counter>\n    </div>\n\n    <div class=\"control ml-1\">\n      <adapt-rx-select\n        [options]=\"options.units\"\n        [disabled]=\"isDisabled\"\n        [(ngModel)]=\"unit\"\n        [optionFormatter]=\"optionFormatter\"\n      >\n      </adapt-rx-select>\n    </div>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxCounterModule, AdaptRxValidatorsModule, AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { StepperWithUnitsFormControlComponent } from './stepper-with-units-form-control.component';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, AdaptRxSelectModule, AdaptRxCounterModule, AdaptRxValidatorsModule],\n  declarations: [StepperWithUnitsFormControlComponent],\n  exports: [StepperWithUnitsFormControlComponent],\n  entryComponents: [StepperWithUnitsFormControlComponent]\n})\nexport class StepperWithUnitsFormControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ISwitcherFormControlOptions } from './switch-form-control-options.interface';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-switcher-form-control',\n  templateUrl: './switch-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: SwitchFormControlComponent,\n      multi: true\n    }\n  ],\n  styleUrls: ['./switch-form-control.component.scss']\n})\nexport class SwitchFormControlComponent extends ValueAccessor<boolean> implements IFormControlComponent {\n  @Input()\n  options: ISwitcherFormControlOptions;\n\n  id: string;\n}\n","<div class=\"form-group\">\n  <adapt-rx-control-label\n    *ngIf=\"options.label\"\n    [label]=\"options.label\"\n    [tooltip]=\"\n      options.tooltip\n        ? {\n            content: popoverContent,\n            popoverMode: options.tooltip.popoverMode,\n            placement: options.tooltip.placement,\n            iconName: options.tooltip.iconName\n          }\n        : null\n    \"\n  >\n  </adapt-rx-control-label>\n\n  <ng-template #popoverContent>\n    <span [innerHtml]=\"options.tooltip.content\"></span>\n  </ng-template>\n\n  <adapt-rx-switch [(ngModel)]=\"value\" [label]=\"options.description\" [disabled]=\"isDisabled\"></adapt-rx-switch>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxLabelModule, AdaptRxSwitchModule } from '@bmc-ux/adapt-angular';\nimport { SwitchFormControlComponent } from './switch-form-control.component';\n\n@NgModule({\n  declarations: [SwitchFormControlComponent],\n  exports: [SwitchFormControlComponent],\n  entryComponents: [SwitchFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxSwitchModule, AdaptRxLabelModule]\n})\nexport class SwitchFormControlModule {}\n","import { Component, Input, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ITagsFormControlOptions, ITagsFormControlModel, ITagAutocompleteValue } from './tags-form-control.types';\nimport { AdaptMetatagComponent, InitTagEditingEvent } from '@bmc-ux/adapt-angular';\nimport { isEmpty, isObject } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, map } from 'rxjs/operators';\nimport { RxStringService } from '@helix/platform/utils';\n\n@Component({\n  selector: 'rx-tags-form-control',\n  templateUrl: './tags-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: TagsFormControlComponent,\n      multi: true\n    }\n  ],\n  styleUrls: ['./tags-form-control.component.scss']\n})\nexport class TagsFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, IFormFocusable {\n  @Input()\n  options: ITagsFormControlOptions;\n\n  @ViewChild('adaptTagField', { static: true })\n  adaptTagField: AdaptMetatagComponent;\n\n  tags: ITagsFormControlModel[];\n\n  autocompleteSearchBound: (text$: Observable<string>) => Observable<ITagAutocompleteValue[]> =\n    this.autocompleteSearch.bind(this);\n\n  constructor(private rxStringService: RxStringService, private renderer: Renderer2) {\n    super();\n  }\n\n  focus(): void {\n    // @ts-ignore\n    this.renderer.selectRootElement(this.adaptTagField.adaptRxTypeaheadComponent.inputRef.nativeElement, true).focus();\n  }\n\n  onTagsModelChange(tags: ITagsFormControlModel[]): void {\n    this.tags = tags;\n\n    this.value = this.getStringFromTags(tags);\n  }\n\n  onWriteValue(value: string): void {\n    this.tags = this.getTagsFromString(value);\n  }\n\n  getStringFromTags(tags: ITagsFormControlModel[]): string {\n    if (isEmpty(tags)) {\n      return null;\n    }\n\n    const tagsString = tags.map((tag) => (this.isAutocompleteTag(tag) ? tag.data.value : tag).trim()).join(' ');\n\n    return tagsString.replace(/\\s{2,}/g, ' ');\n  }\n\n  isAutocompleteTag(tag: ITagsFormControlModel): tag is ITagAutocompleteValue {\n    return isObject(tag);\n  }\n\n  getTagsFromString(tagsString: string): ITagsFormControlModel[] {\n    if (tagsString) {\n      const tags = tagsString.split(' ');\n      const autocompleteValues = this.options.autocompleteValues;\n\n      if (isEmpty(autocompleteValues)) {\n        return tags;\n      }\n\n      return tags\n        .map((tag) => autocompleteValues.find((autocomplete) => autocomplete.data.value === tag) || tag.trim())\n        .filter(Boolean);\n    }\n\n    return [];\n  }\n\n  autocompleteSearch(text$: Observable<string>): Observable<ITagAutocompleteValue[]> {\n    return text$.pipe(\n      debounceTime(250),\n      distinctUntilChanged(),\n      map((searchTerm) => {\n        const autocompleteValues = this.options.autocompleteValues;\n\n        if (isEmpty(autocompleteValues)) {\n          return [];\n        }\n\n        return autocompleteValues.filter((autocompleteValue) =>\n          this.rxStringService.caseInsensitiveSearch(autocompleteValue.text, searchTerm)\n        );\n      })\n    );\n  }\n\n  onInitTagEditing(event: InitTagEditingEvent): void {\n    const tag = event.tag as ITagsFormControlModel;\n\n    if (this.isAutocompleteTag(tag)) {\n      event.preventDefault();\n    }\n  }\n}\n","<adapt-tag-field\n  #adaptTagField\n  [label]=\"options.label\"\n  [placeholder]=\"options.placeholder\"\n  [required]=\"options.required\"\n  [ngModel]=\"tags\"\n  [disabled]=\"isDisabled\"\n  [popoverContent]=\"options.tooltip?.content\"\n  [popoverIcon]=\"options.tooltip?.iconName\"\n  (ngModelChange)=\"onTagsModelChange($event)\"\n  [replaceModelOnWrite]=\"true\"\n  [delimiterSymbol]=\"null\"\n  [search]=\"autocompleteSearchBound\"\n  [openDropdownOnFocus]=\"true\"\n  [errorCheck]=\"options.errorCheck\"\n  (initTagEditing)=\"onInitTagEditing($event)\"\n>\n</adapt-tag-field>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptMetatagModule, AdaptRxLabelModule, AdaptTagModule } from '@bmc-ux/adapt-angular';\nimport { TagsFormControlComponent } from './tags-form-control.component';\n\n@NgModule({\n  declarations: [TagsFormControlComponent],\n  exports: [TagsFormControlComponent],\n  entryComponents: [TagsFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptMetatagModule, AdaptTagModule, AdaptRxLabelModule]\n})\nexport class TagsFormControlModule {}\n","import { Component, Input, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ITextareaFormControlOptions } from './textarea-form-control-options.interface';\nimport { AdaptRxTextareaComponent } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-textarea-form-control',\n  templateUrl: './textarea-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: TextareaFormControlComponent,\n      multi: true\n    }\n  ],\n  styleUrls: ['./textarea-form-control.component.scss']\n})\nexport class TextareaFormControlComponent\n  extends ValueAccessor<string>\n  implements IFormControlComponent, IFormFocusable\n{\n  @Input()\n  options: ITextareaFormControlOptions;\n\n  @ViewChild('editor', { static: true })\n  editor: AdaptRxTextareaComponent;\n\n  constructor(private renderer: Renderer2) {\n    super();\n  }\n\n  focus() {\n    this.renderer.selectRootElement(this.editor.textareaRef.nativeElement, true).focus();\n  }\n}\n","<adapt-rx-textarea\n  #editor\n  label=\"{{ options.label }}\"\n  [required]=\"options.required\"\n  [rows]=\"options.rows\"\n  [(ngModel)]=\"value\"\n  [disabled]=\"isDisabled\"\n  [tooltip]=\"\n    options.tooltip\n      ? {\n          iconName: options.tooltip.iconName,\n          content: options.tooltip.content,\n          popoverMode: true\n        }\n      : null\n  \"\n>\n</adapt-rx-textarea>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TextareaFormControlComponent } from './textarea-form-control.component';\nimport { AdaptRxTextareaModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [TextareaFormControlComponent],\n  exports: [TextareaFormControlComponent],\n  entryComponents: [TextareaFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxTextareaModule]\n})\nexport class TextareaFormControlModule {}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ValueAccessor } from '../../form-builder';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { IDateFormControlOptions } from '../date-form-control';\nimport { RxDatetimePickerMode, RxDatetimeStruct } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { isNull } from 'lodash';\n\n@Component({\n  selector: 'rx-time-form-control',\n  templateUrl: './time-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: TimeFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class TimeFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IDateFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  datePickerControl = new FormControl('');\n\n  pickerMode = RxDatetimePickerMode.Time;\n\n  ngOnInit(): void {\n    this.datePickerControl.valueChanges.subscribe((value: RxDatetimeStruct) => {\n      if (value && !isNull(value.hours) && !isNull(value.minutes)) {\n        this.value = moment({\n          hour: value.hours,\n          minute: value.minutes,\n          seconds: value.seconds || 0\n        }).format('HH:mm:ss');\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  writeValue(value: string): void {\n    super.writeValue(value);\n\n    const date = moment(this.value, 'LTS');\n\n    if (date.isValid()) {\n      this.datePickerControl.setValue({\n        hours: date.hour(),\n        minutes: date.minutes()\n      });\n    } else {\n      this.datePickerControl.setValue(null);\n    }\n  }\n}\n","<adapt-rx-datetime\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [mode]=\"pickerMode\"\n  [required]=\"options.required\"\n  [formControl]=\"datePickerControl\"\n>\n</adapt-rx-datetime>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TimeFormControlComponent } from './time-form-control.component';\nimport { AdaptRxDatetimeModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [TimeFormControlComponent],\n  imports: [CommonModule, AdaptRxDatetimeModule, FormsModule, ReactiveFormsModule],\n  exports: [TimeFormControlComponent],\n  entryComponents: [TimeFormControlComponent]\n})\nexport class TimeFormControlModule {}\n","export enum MessageType {\n  Warning = 'Warning',\n  Success = 'Success',\n  Info = 'Info',\n  Error = 'Error'\n}\n\nexport interface IValidationFormControlOptions {\n  text: string;\n  propertyName?: string;\n  componentGuid?: string;\n  messageType?: MessageType;\n  customStyle?: any;\n}\n","export const RX_VALIDATION_FORM_CONTROL = {\n  events: {\n    correctValidationIssue: 'CORRECT_VALIDATION_ISSUE'\n  }\n};\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IValidationFormControlOptions, MessageType } from './validation-form-control-options.types';\nimport { RX_VALIDATION_FORM_CONTROL } from './validation-form-control.constant';\n\n@Component({\n  selector: 'rx-validation-form-control',\n  templateUrl: './validation-form-control.component.html'\n})\nexport class ValidationFormControlComponent extends ValueAccessor<string> implements IFormControlComponent {\n  @Input()\n  options: IValidationFormControlOptions;\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  messageType = MessageType;\n\n  correctIssue() {\n    this.events.emit({\n      type: RX_VALIDATION_FORM_CONTROL.events.correctValidationIssue,\n      payload: {\n        propertyName: this.options.propertyName,\n        componentGuid: this.options.componentGuid\n      }\n    });\n  }\n}\n","<p\n  [ngClass]=\"{\n    'text-danger': options.messageType === messageType.Error,\n    'text-warning': options.messageType === messageType.Warning,\n    'text-info': options.messageType === messageType.Info,\n    'text-success': options.messageType === messageType.Success\n  }\"\n  [ngStyle]=\"options.customStyle\"\n>\n  {{ options.text }}\n</p>\n\n<div *ngIf=\"options.componentGuid && !isDisabled\" class=\"text-right\">\n  <button type=\"button\" adapt-button size=\"small\" btn-type=\"tertiary\" (click)=\"correctIssue()\">Correct issue</button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ValidationFormControlComponent } from './validation-form-control.component';\nimport { AdaptButtonModule } from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [ValidationFormControlComponent],\n  exports: [ValidationFormControlComponent],\n  entryComponents: [ValidationFormControlComponent],\n  imports: [CommonModule, AdaptButtonModule]\n})\nexport class ValidationFormControlModule {}\n","import { NgModule } from '@angular/core';\nimport { AssignmentExpressionListFormControlModule } from './assignment-expression-list-form-control/assignment-expression-list-form-control.module';\nimport { AttachmentFormControlModule } from './attachment-form-control/attachment-form-control.module';\nimport { BooleanFormControlModule } from './boolean-form-control/boolean-form-control.module';\nimport { ColorPickerFormControlModule } from './color-picker-form-control/color-picker-form-control.module';\nimport { CounterFormControlModule } from './counter-form-control/counter-form-control.module';\nimport { CustomizationOptionsModule } from './customization-options/customization-options.module';\nimport { DateFormControlModule } from './date-form-control/date-form-control.module';\nimport { DateTimeFormControlModule } from './date-time-form-control/date-time-form-control.module';\nimport { ExpressionFormControlModule } from './expression-form-control/expression-form-control.module';\nimport { GroupButtonFormControlModule } from './group-button-form-control/group-button-form-control.module';\nimport { IconPickerFormControlModule } from './icon-picker-form-control/icon-picker-form-control.module';\nimport { InputListFormControlModule } from './input-list-form-control/input-list-form-control.module';\nimport { LabelFormControlModule } from './label-form-control/label-form-control.module';\nimport { ListFormControlModule } from './list-form-control/list-form-control.module';\nimport { OptionalExpressionControlModule } from './optional-expression-control/optional-expression-control.module';\nimport { OptionalSelectFormControlModule } from './optional-select-form-control/optional-select-form-control.module';\nimport { SelectFormControlModule } from './select-form-control/select-form-control.module';\nimport { StepperWithUnitsFormControlModule } from './stepper-with-units-form-control/stepper-with-units-form-control.module';\nimport { SwitchFormControlModule } from './switch-form-control/switch-form-control.module';\nimport { TagsFormControlModule } from './tags-form-control/tags-form-control.module';\nimport { TextFormControlModule } from './text-form-control/text-form-control.module';\nimport { TextareaFormControlModule } from './textarea-form-control/textarea-form-control.module';\nimport { TimeFormControlModule } from './time-form-control/time-form-control.module';\nimport { ValidationFormControlModule } from './validation-form-control/validation-form-control.module';\n\n@NgModule({\n  imports: [\n    AssignmentExpressionListFormControlModule,\n    TagsFormControlModule,\n    ListFormControlModule,\n    LabelFormControlModule,\n    BooleanFormControlModule,\n    SwitchFormControlModule,\n    TextFormControlModule,\n    TextareaFormControlModule,\n    GroupButtonFormControlModule,\n    SelectFormControlModule,\n    ValidationFormControlModule,\n    OptionalExpressionControlModule,\n    OptionalSelectFormControlModule,\n    CustomizationOptionsModule,\n    StepperWithUnitsFormControlModule,\n    ColorPickerFormControlModule,\n    CounterFormControlModule,\n    DateFormControlModule,\n    DateTimeFormControlModule,\n    TimeFormControlModule,\n    AttachmentFormControlModule,\n    ExpressionFormControlModule,\n    InputListFormControlModule,\n    IconPickerFormControlModule\n  ]\n})\nexport class FormControlsModule {}\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IDefinitionPickerComponentOptions } from '../../definition-picker';\nimport { RX_EXPRESSION_EDITOR } from '../../expression-editor';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IExpressionFormControlOptions } from '../expression-form-control';\nimport { IDefinitionPickerOrExpressionFormControlOptions } from './definition-picker-or-expression-form-control.types';\n\nenum DefinitionPickerOrExpressionComponentMode {\n  Definition = 'Definition',\n  Expression = 'Expression'\n}\n\n@Component({\n  selector: 'rx-definition-picker-or-expression-form-control',\n  templateUrl: 'definition-picker-or-expression-form-control.component.html',\n  styleUrls: ['definition-picker-or-expression-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: DefinitionPickerOrExpressionFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class DefinitionPickerOrExpressionFormControlComponent\n  extends ValueAccessor<string>\n  implements OnInit, IFormControlComponent\n{\n  @Input()\n  options: IDefinitionPickerOrExpressionFormControlOptions;\n\n  @Input()\n  propertyPath: string;\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  definitionPickerOptions: IDefinitionPickerComponentOptions;\n  expressionFormControlOptions: IExpressionFormControlOptions;\n  componentMode = DefinitionPickerOrExpressionComponentMode;\n  activeMode = DefinitionPickerOrExpressionComponentMode.Definition;\n\n  ngOnInit(): void {\n    this.activeMode = this.isDynamicDefinitionName(this.value)\n      ? DefinitionPickerOrExpressionComponentMode.Expression\n      : DefinitionPickerOrExpressionComponentMode.Definition;\n\n    this.definitionPickerOptions = {\n      definitionType: this.options.definitionType,\n      label: this.options.label\n    };\n\n    this.expressionFormControlOptions = {\n      dataDictionary$: this.options.dataDictionary$,\n      operators: this.options.operators,\n      label: this.options.label\n    };\n  }\n\n  selectMode(mode: DefinitionPickerOrExpressionComponentMode): void {\n    if (this.activeMode !== mode) {\n      this.activeMode = mode;\n      this.value = null;\n    } else if (this.activeMode === mode && this.value) {\n      this.events.emit({\n        type: RX_EXPRESSION_EDITOR.events.openExpressionEditor,\n        payload: {\n          propertyPath: this.propertyPath\n        }\n      });\n    }\n  }\n\n  onModelValueChange(expressionValue: string): void {\n    this.value = expressionValue;\n  }\n\n  private isDynamicDefinitionName(definitionName: string): boolean {\n    return Boolean(definitionName?.match(/\\$\\{.*\\}/));\n  }\n}\n","<div class=\"d-flex flex-row-reverse row toggle-dropdown\">\n  <div class=\"dropdown\" adaptDropdown>\n    <button rx-id=\"toggle-button\" class=\"btn btn-link pl-0\" adaptDropdownToggle type=\"button\">\n      <span class=\"flex-grow-1 rx-ellipsis rx-selected-item\">\n        {{ 'com.bmc.arsys.rx.client.common.select.label' | translate }}\n      </span>\n    </button>\n\n    <div class=\"dropdown-menu\" adaptDropdownMenu>\n      <button\n        type=\"button\"\n        class=\"dropdown-item\"\n        (click)=\"selectMode(componentMode.Definition)\"\n        [class.active]=\"activeMode === componentMode.Definition\"\n      >\n        Select {{ options.definitionType }}\n      </button>\n\n      <button\n        type=\"button\"\n        class=\"dropdown-item\"\n        (click)=\"selectMode(componentMode.Expression)\"\n        [class.active]=\"activeMode === componentMode.Expression\"\n      >\n        {{ 'com.bmc.arsys.rx.client.expression-editor.edit-expression.title' | translate }}\n      </button>\n    </div>\n  </div>\n</div>\n\n<rx-definition-picker\n  *ngIf=\"activeMode === componentMode.Definition\"\n  [ngModel]=\"value\"\n  (ngModelChange)=\"onModelValueChange($event)\"\n  [options]=\"definitionPickerOptions\"\n  [isDisabled]=\"isDisabled\"\n>\n</rx-definition-picker>\n\n<rx-expression-form-control\n  *ngIf=\"activeMode === componentMode.Expression\"\n  [options]=\"expressionFormControlOptions\"\n  [propertyPath]=\"propertyPath\"\n  [disabled]=\"isDisabled\"\n  [ngModel]=\"value\"\n  (ngModelChange)=\"onModelValueChange($event)\"\n  (events)=\"events.emit($event)\"\n>\n</rx-expression-form-control>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptDropdownModule, AdaptRxLabelModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxDefinitionPickerModule } from '../../definition-picker/definition-picker.module';\nimport { ExpressionFormControlModule } from '../expression-form-control/expression-form-control.module';\nimport { DefinitionPickerOrExpressionFormControlComponent } from './definition-picker-or-expression-form-control.component';\n\n@NgModule({\n  imports: [\n    FormsModule,\n    CommonModule,\n    AdaptRxLabelModule,\n    AdaptDropdownModule,\n    ExpressionFormControlModule,\n    RxDefinitionPickerModule,\n    TranslateModule\n  ],\n  exports: [DefinitionPickerOrExpressionFormControlComponent],\n  declarations: [DefinitionPickerOrExpressionFormControlComponent],\n  entryComponents: [DefinitionPickerOrExpressionFormControlComponent]\n})\nexport class DefinitionPickerOrExpressionFormControlModule {}\n","import { Component, Input, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent, IFormFocusable, IPlainObject } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ITextFormControlOptions } from '../text-form-control/text-form-control-options.interface';\nimport { AdaptRxTextfieldComponent } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\n@Component({\n  selector: 'rx-record-instance-form-control',\n  templateUrl: './record-instance-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RecordInstanceFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class RecordInstanceFormControlComponent\n  extends ValueAccessor<object>\n  implements IFormControlComponent, IFormFocusable\n{\n  @Input()\n  options: ITextFormControlOptions;\n\n  @ViewChild('editor', { static: true })\n  editor: AdaptRxTextfieldComponent;\n\n  model: IPlainObject = {\n    resourceType: RX_RECORD_DEFINITION.resourceTypes.recordInstanceProcessVariable\n  };\n\n  constructor(private renderer: Renderer2) {\n    super();\n  }\n\n  focus(): void {\n    this.renderer.selectRootElement(this.editor.inputRef.nativeElement, true).focus();\n  }\n\n  onModelChange() {\n    this.value = this.model;\n  }\n}\n","<adapt-rx-control-label class=\"d-block form-group\" [label]=\"options.label\"></adapt-rx-control-label>\n\n<adapt-rx-textfield\n  #editor\n  class=\"d-block form-group\"\n  [label]=\"'com.bmc.arsys.rx.client.record-instance-form-control.id.label' | translate\"\n  [required]=\"options.required\"\n  [(ngModel)]=\"model.id\"\n  [disabled]=\"isDisabled\"\n  [tooltip]=\"options.tooltip\"\n  (ngModelChange)=\"onModelChange()\"\n>\n</adapt-rx-textfield>\n\n<adapt-rx-textfield\n  class=\"d-block form-group\"\n  [label]=\"'com.bmc.arsys.rx.client.record-instance-form-control.record-definition-name.label' | translate\"\n  [required]=\"options.required\"\n  [(ngModel)]=\"model.recordDefinitionName\"\n  [disabled]=\"isDisabled\"\n  [tooltip]=\"options.tooltip\"\n  (ngModelChange)=\"onModelChange()\"\n>\n</adapt-rx-textfield>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RecordInstanceFormControlComponent } from './record-instance-form-control.component';\nimport { AdaptRxLabelModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [RecordInstanceFormControlComponent],\n  exports: [RecordInstanceFormControlComponent],\n  entryComponents: [RecordInstanceFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxTextfieldModule, AdaptRxLabelModule, TranslateModule]\n})\nexport class RecordInstanceFormControlModule {}\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IRadioFormControlOptions } from './radio-form-control.interfaces';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-radio-form-control',\n  templateUrl: './radio-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RadioFormControlComponent,\n      multi: true\n    }\n  ],\n  styleUrls: ['./radio-form-control.component.scss']\n})\nexport class RadioFormControlComponent extends ValueAccessor<any> implements IFormControlComponent {\n  constructor(private translateService: TranslateService) {\n    super();\n  }\n\n  @Input()\n  options: IRadioFormControlOptions;\n}\n","<div class=\"form-group\">\n  <adapt-rx-radiobutton-group\n    [(ngModel)]=\"value\"\n    [label]=\"options.label\"\n    [tooltip]=\"\n      options.tooltip\n        ? {\n            content: popoverContent,\n            popoverMode: options.tooltip.popoverMode,\n            placement: options.tooltip.placement,\n            iconName: options.tooltip.iconName,\n            maxWidth: options.tooltip.maxWidth\n          }\n        : null\n    \"\n    [disabled]=\"isDisabled\"\n  >\n    <adapt-rx-radiobutton\n      class=\"radio-inline\"\n      *ngFor=\"let item of options.items\"\n      [value]=\"item.value\"\n      [label]=\"item.label\"\n    >\n    </adapt-rx-radiobutton>\n  </adapt-rx-radiobutton-group>\n</div>\n\n<ng-template #popoverContent>\n  <span [innerHtml]=\"options.tooltip.content\"></span>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxLabelModule, AdaptRxRadiobuttonModule } from '@bmc-ux/adapt-angular';\nimport { RadioFormControlComponent } from './radio-form-control.component';\n\n@NgModule({\n  declarations: [RadioFormControlComponent],\n  exports: [RadioFormControlComponent],\n  entryComponents: [RadioFormControlComponent],\n  imports: [CommonModule, FormsModule, AdaptRxRadiobuttonModule, AdaptRxLabelModule]\n})\nexport class RadioFormControlModule {}\n","import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  HostListener,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { IWindowMessage, RxJsonParserService } from '@helix/platform/utils';\nimport { IIframeApi } from './iframe.interface';\n\n@Component({\n  selector: 'rx-iframe',\n  templateUrl: './iframe.component.html',\n  styleUrls: ['./iframe.component.scss']\n})\nexport class RxIframeComponent implements OnChanges {\n  @Input()\n  url: string;\n\n  @HostBinding('class')\n  class = 'd-block';\n\n  @HostBinding('class.position-absolute')\n  isAbsolutePositioned = false;\n\n  @HostBinding('class.isHidden')\n  isHidden = false;\n\n  @Output()\n  rxMessage = new EventEmitter<IWindowMessage>();\n\n  @ViewChild('frame')\n  iframe: ElementRef;\n\n  src: SafeResourceUrl;\n\n  api: IIframeApi = {\n    postMessageToFrame: (message: IWindowMessage): void => {\n      this.iframe.nativeElement.contentWindow.postMessage(message, '*');\n    }\n  };\n\n  @HostListener('window:message', ['$event'])\n  onMessage(event: MessageEvent): void {\n    if (event.data) {\n      const windowMessage = this.rxJsonParserService.tryParseJson<IWindowMessage>(event.data);\n\n      if (windowMessage) {\n        this.rxMessage.emit(windowMessage);\n      }\n    }\n  }\n\n  constructor(private rxJsonParserService: RxJsonParserService, private domSanitizer: DomSanitizer) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.url?.currentValue) {\n      this.src = this.domSanitizer.bypassSecurityTrustResourceUrl(changes.url.currentValue);\n    }\n  }\n\n  updateUrl(url: string): void {\n    this.iframe.nativeElement.contentWindow.location.replace(url);\n  }\n}\n","<iframe #frame class=\"w-100 h-100 d-block\" frameborder=\"0\" [src]=\"src\"></iframe>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RxIframeComponent } from './iframe.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [RxIframeComponent],\n  exports: [RxIframeComponent]\n})\nexport class RxIframeModule {}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Inject,\n  Injectable,\n  Injector,\n  SimpleChange\n} from '@angular/core';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxIframeComponent } from './iframe.component';\nimport { IIframeApi } from './iframe.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxIframeService {\n  private iframeComponentRef: ComponentRef<RxIframeComponent>;\n\n  constructor(\n    private applicationRef: ApplicationRef,\n    @Inject(DOCUMENT) private document: any,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private injector: Injector\n  ) {}\n\n  showIframe(url: string): void {\n    if (!this.iframeComponentRef) {\n      const componentFactory = this.componentFactoryResolver.resolveComponentFactory(RxIframeComponent);\n\n      this.iframeComponentRef = componentFactory.create(this.injector);\n      this.iframeComponentRef.instance.isAbsolutePositioned = true;\n      this.applicationRef.attachView(this.iframeComponentRef.hostView);\n\n      const rxIframeHtmlElement = (this.iframeComponentRef.hostView as EmbeddedViewRef<any>)\n        .rootNodes[0] as HTMLElement;\n\n      this.document.querySelector('rx-root').appendChild(rxIframeHtmlElement);\n\n      this.setIframeUrl(url);\n    } else {\n      this.iframeComponentRef.instance.isHidden = false;\n      this.updateIframeUrl(url);\n    }\n  }\n\n  hideIframe(): void {\n    this.iframeComponentRef.instance.isHidden = true;\n\n    this.updateIframeUrl(`/${RX_APPLICATION.innovationStudioBundleId}/index.html#/blank`);\n  }\n\n  getIframeApi(): IIframeApi {\n    return this.iframeComponentRef.instance.api;\n  }\n\n  private setIframeUrl(url: string): void {\n    this.iframeComponentRef.instance.ngOnChanges({\n      url: new SimpleChange(null, url, false)\n    });\n  }\n\n  private updateIframeUrl(url: string): void {\n    this.iframeComponentRef.instance.updateUrl(url);\n  }\n}\n","import { Directive, Input } from '@angular/core';\nimport { IInspector } from './inspector.interface';\n\n@Directive({\n  selector: '[rxInspector]'\n})\nexport class InspectorDirective implements IInspector {\n  @Input()\n  designerItemModel;\n}\n","import { NgModule } from '@angular/core';\nimport { InspectorDirective } from './inspector.directive';\n\n@NgModule({\n  exports: [InspectorDirective],\n  declarations: [InspectorDirective]\n})\nexport class RxInspectorModule {}\n","import { Directive, EventEmitter, Injector, Input, Output } from '@angular/core';\nimport { IInspector } from './inspector.interface';\nimport { InspectorDirective } from './inspector.directive';\nimport { ValueAccessor } from '../form-builder';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\n\n@Directive()\n// tslint:disable-next-line:directive-class-suffix\nexport class InspectorControlBase<TInspectorControlValue, TInspectorControlOptions, TDesignerItemModel>\n  extends ValueAccessor<TInspectorControlValue>\n  implements IFormControlComponent\n{\n  @Input()\n  propertyPath: string;\n\n  @Input()\n  options: TInspectorControlOptions;\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  readonly designerItemModel = this.injector.get<IInspector<TDesignerItemModel>>(InspectorDirective).designerItemModel;\n\n  constructor(protected injector: Injector) {\n    super();\n  }\n}\n","import { EventEmitter, Injectable, Injector, Input, Output } from '@angular/core';\nimport { IInspector } from './inspector.interface';\nimport { InspectorDirective } from './inspector.directive';\n\n@Injectable()\nexport class InspectorWidgetBase<TInspectorComponentOptions, TDesignerItemModel> {\n  @Input()\n  options: TInspectorComponentOptions;\n\n  @Output()\n  events: EventEmitter<any> = new EventEmitter();\n\n  readonly designerItemModel = this.injector.get<IInspector<TDesignerItemModel>>(InspectorDirective).designerItemModel;\n\n  constructor(protected injector: Injector) {}\n}\n","import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';\nimport { IExpressionConfiguratorProvider } from '@helix/platform/shared/api';\nimport { IExpressionInspectorControlOptions } from './expression-inspector-control-options.interface';\nimport { InspectorControlBase } from '../../inspector/inspector-control-base.class';\nimport { IExpressionFormControlOptions } from '../../form-controls/expression-form-control/expression-form-control.types';\nimport { ExpressionFormControlComponent } from '../../form-controls';\n\n@Component({\n  selector: 'rx-expression-inspector-form-control',\n  templateUrl: './expression-inspector-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: ExpressionFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class ExpressionInspectorControlComponent\n  extends InspectorControlBase<string, IExpressionInspectorControlOptions, IExpressionConfiguratorProvider>\n  implements OnInit, OnChanges\n{\n  formControl = this.injector.get(NgControl).control as FormControl;\n  expressionFormControlOptions: IExpressionFormControlOptions;\n\n  ngOnInit(): void {\n    this.patchOptions();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.optinos) {\n      this.patchOptions();\n    }\n  }\n\n  private patchOptions(): void {\n    this.expressionFormControlOptions = {\n      ...this.options,\n      dataDictionary$: this.designerItemModel.expressionConfigurator.getDataDictionary(this.propertyPath),\n      operators: this.designerItemModel.expressionConfigurator.getOperators(this.propertyPath)\n    };\n  }\n}\n","<rx-expression-form-control\n  [formControl]=\"formControl\"\n  [propertyPath]=\"propertyPath\"\n  [options]=\"expressionFormControlOptions\"\n  (events)=\"events.emit($event)\"\n></rx-expression-form-control>\n","import { NgModule } from '@angular/core';\nimport { ExpressionInspectorControlComponent } from './expression-inspector-control.component';\nimport { ExpressionFormControlModule } from '../../form-controls/expression-form-control/expression-form-control.module';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [ExpressionInspectorControlComponent],\n  imports: [ExpressionFormControlModule, FormsModule, ReactiveFormsModule],\n  exports: [ExpressionInspectorControlComponent]\n})\nexport class ExpressionInspectorControlModule {}\n","import { Component, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR, NgControl } from '@angular/forms';\nimport { IExpressionConfiguratorProvider } from '@helix/platform/shared/api';\nimport { InspectorControlBase } from '../../inspector/inspector-control-base.class';\nimport { IOptionalExpressionInspectorControlOptions } from './optional-expression-inspector-control-options.interface';\nimport { IOptionalExpressionControlOptions } from '../../form-controls';\n\n@Component({\n  selector: 'rx-optional-expression-inspector-control',\n  templateUrl: './optional-expression-inspector-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: OptionalExpressionInspectorControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class OptionalExpressionInspectorControlComponent\n  extends InspectorControlBase<string, IOptionalExpressionInspectorControlOptions, IExpressionConfiguratorProvider>\n  implements OnInit, OnChanges\n{\n  formControl = this.injector.get(NgControl).control as FormControl;\n  optionalExpressionFormControlOptions: IOptionalExpressionControlOptions;\n\n  ngOnInit(): void {\n    this.patchOptions();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.optinos) {\n      this.patchOptions();\n    }\n  }\n\n  private patchOptions(): void {\n    this.optionalExpressionFormControlOptions = {\n      ...this.options,\n      dataDictionary$: this.designerItemModel.expressionConfigurator.getDataDictionary(this.propertyPath),\n      operators: this.designerItemModel.expressionConfigurator.getOperators(this.propertyPath)\n    };\n  }\n}\n","<rx-optional-expression-form-control\n  [formControl]=\"formControl\"\n  [propertyPath]=\"propertyPath\"\n  [options]=\"optionalExpressionFormControlOptions\"\n  (events)=\"events.emit($event)\"\n></rx-optional-expression-form-control>\n","import { NgModule } from '@angular/core';\nimport { OptionalExpressionInspectorControlComponent } from './optional-expression-inspector-control.component';\nimport { OptionalExpressionControlModule } from '../../form-controls/optional-expression-control/optional-expression-control.module';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [OptionalExpressionControlModule, ReactiveFormsModule],\n  declarations: [OptionalExpressionInspectorControlComponent]\n})\nexport class OptionalExpressionInspectorControlModule {}\n","export const RX_ISSUE_REPORTER = {\n  recordDefinitionName: 'Reported Errors',\n\n  recordFields: {\n    operationId: {\n      id: 70100,\n      name: 'operationId'\n    },\n    applicationName: {\n      id: 70101,\n      name: 'applicationName'\n    },\n    messageType: {\n      id: 70102,\n      name: 'messageType'\n    },\n    messageNumber: {\n      id: 70103,\n      name: 'messageNumber'\n    },\n    messageText: {\n      id: 70104,\n      name: 'messageText'\n    },\n    details: {\n      id: 70109,\n      name: 'details'\n    }\n  },\n\n  messageTypeOptions: { INFO: 0, WARNING: 1, ERROR: 2 }\n};\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { forEach } from 'lodash';\n\nimport { ICreatedRecordInstance, RecordInstance, RxRecordInstanceService } from '@helix/platform/record/api';\nimport {\n  IBundleDescriptor,\n  IServerResponseMessage,\n  RxBundleCacheService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { RX_ISSUE_REPORTER } from './issue-reporter.constant';\nimport { IRxIssueDetails } from './issue-details.interface';\n\n@Injectable()\nexport class RxIssueReporterService {\n  constructor(\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxBundleCacheService: RxBundleCacheService\n  ) {}\n\n  reportIssue(message: string, data: IServerResponseMessage): Observable<ICreatedRecordInstance> {\n    return this.prepareIssueDetails(message, data).pipe(\n      switchMap((issueDetails) => {\n        return this.rxRecordInstanceService.getNew(RX_ISSUE_REPORTER.recordDefinitionName).pipe(\n          map((recordInstance: RecordInstance) => {\n            forEach(RX_ISSUE_REPORTER.recordFields, (field) => {\n              let fieldValue = issueDetails[field.name] || null;\n\n              if (field.id === RX_ISSUE_REPORTER.recordFields.messageType.id) {\n                fieldValue = RX_ISSUE_REPORTER.messageTypeOptions[fieldValue];\n              }\n\n              recordInstance.setFieldValue(field.id, fieldValue);\n            });\n\n            return recordInstance;\n          })\n        );\n      }),\n      switchMap((recordInstance) => this.rxRecordInstanceService.create(recordInstance))\n    );\n  }\n\n  private prepareIssueDetails(message: string, error: IServerResponseMessage = {}): Observable<IRxIssueDetails> {\n    return this.rxGlobalCacheService.getBundleDescriptor(this.rxBundleCacheService.bundleId).pipe(\n      map((bundleDescriptor: IBundleDescriptor) => ({\n        details: message,\n        applicationName: bundleDescriptor.friendlyName || null,\n        messageType: error.messageType || null,\n        messageNumber: error.messageNumber || null,\n        operationId: error.operationId || null,\n        messageText: error.messageText || error.appendedText ? `${error.messageText} ${error.appendedText}` : null\n      }))\n    );\n  }\n}\n","import { Component, Injector, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { ReplaySubject } from 'rxjs';\n\nimport { RxIssueReporterService } from './issue-reporter.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { IServerResponseMessage, RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-issue-reporter',\n  templateUrl: './issue-reporter.component.html'\n})\nexport class RxIssueReporterComponent extends RxModalClass implements OnDestroy {\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  data: IServerResponseMessage;\n  reportForm: FormGroup;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private formBuilder: FormBuilder,\n    private rxIssueReporterService: RxIssueReporterService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n    this.data = this.activeModalRef.getData();\n    this.initForm();\n  }\n\n  isDirty(): boolean {\n    return this.reportForm.dirty;\n  }\n\n  reportIssue(): void {\n    this.rxIssueReporterService\n      .reportIssue(this.reportForm.get('text').value, this.data)\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.issue-reporter.issue-report-submitted.message')\n        );\n\n        this.activeModalRef.close();\n      });\n  }\n\n  private initForm(): void {\n    this.reportForm = this.formBuilder.group({\n      text: ['', Validators.required]\n    });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<form [formGroup]=\"reportForm\" autocomplete=\"off\" (ngSubmit)=\"reportIssue()\" class=\"modal-body\">\n  <div class=\"form-group\">\n    <p>\n      {{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.issue-report-prepared.label' | translate }}\n    </p>\n    <p>\n      {{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.describe-issue-details.label' | translate }}\n    </p>\n\n    <adapt-rx-textarea\n      placeholder=\"{{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.description.placeholder' | translate }}\"\n      rows=\"15\"\n      formControlName=\"text\"\n    >\n    </adapt-rx-textarea>\n  </div>\n\n  <button adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"cancel()\" class=\"ml-3 float-right\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n\n  <button adapt-button btn-type=\"primary\" type=\"submit\" [disabled]=\"reportForm.invalid\" class=\"float-right\">\n    {{ 'com.bmc.arsys.rx.client.issue-reporter.submit-report.label' | translate }}\n  </button>\n</form>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptModalService, AdaptRxTextareaModule } from '@bmc-ux/adapt-angular';\n\nimport { IServerResponseMessage, RxNotificationModule, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxIssueReporterComponent } from './issue-reporter.component';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\nimport { RxIssueReporterService } from './issue-reporter.service';\nimport { noop } from 'lodash';\nimport { RxModalService } from '@helix/platform/ui-kit';\n\n@NgModule({\n  imports: [\n    AdaptButtonModule,\n    AdaptRxTextareaModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RxNotificationModule,\n    TranslateModule\n  ],\n  declarations: [RxIssueReporterComponent],\n  entryComponents: [RxIssueReporterComponent],\n  providers: [AdaptModalService, RxIssueReporterService]\n})\nexport class RxIssueReporterModule {\n  constructor(\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService\n  ) {\n    this.rxNotificationService.issuesToReport$.subscribe((issue: IServerResponseMessage) => {\n      this.showModal(issue);\n    });\n  }\n\n  private showModal(issue: IServerResponseMessage): void {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.issue-reporter.report-issue.label'),\n        data: issue,\n        size: 'sm',\n        content: RxIssueReporterComponent\n      })\n      .catch(noop);\n  }\n}\n","import {\n  Component,\n  DoCheck,\n  EventEmitter,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR, NgControl, NgModel } from '@angular/forms';\nimport { AdaptRxSelectComponent, RxSelectOption, SelectModelFormat } from '@bmc-ux/adapt-angular';\nimport { SelectSettings } from '@bmc-ux/obsolete';\nimport { once } from 'lodash';\nimport { Observable, Subject } from 'rxjs';\nimport { debounceTime, finalize, map, startWith, switchMap, take, tap } from 'rxjs/operators';\nimport { IRxSelectWithPaginationOption, IRxSelectWithPaginationOptionsPage } from './select-with-pagination.interfaces';\n\n@Component({\n  selector: 'rx-select-with-pagination',\n  templateUrl: './select-with-pagination.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxSelectWithPaginationComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxSelectWithPaginationComponent implements ControlValueAccessor, OnInit, DoCheck, OnChanges, OnDestroy {\n  loadMoreCallbackFunc = this.onFilterValueChange.bind(this);\n\n  selectedValue: IRxSelectWithPaginationOption[] = [];\n  isOptionLoadingInProgress = false;\n  isFirstOptionPageLoaded = false;\n  showLoadMoreButton = true;\n  formControl: NgControl;\n\n  adaptSelectSettings: SelectSettings = {\n    enableSearch: true,\n    showUncheckAll: true,\n    modelFormat: SelectModelFormat.object,\n    placement: 'auto'\n  };\n\n  private onFirstTimeDropdownOpen = once(this.onFilterValueChange);\n  private onViewValueChange: Function;\n  private onTouched: Function;\n  private lastFilterValue: string;\n  private startIndex = 0;\n  private adaptSelectDefaultTitle: string;\n  private adaptSelectOptions: IRxSelectWithPaginationOption[] = [];\n  private filterValue$ = new Subject<string>();\n\n  options$ = this.filterValue$.pipe(\n    tap(() => {\n      this.isOptionLoadingInProgress = true;\n    }),\n    debounceTime(250),\n    switchMap((query) => this.loadOptions(query)),\n    startWith([])\n  );\n\n  @ViewChild(AdaptRxSelectComponent, { static: true, read: NgModel })\n  ngModel: NgModel;\n\n  @ViewChild(AdaptRxSelectComponent, { static: true })\n  adaptSelectComponent: AdaptRxSelectComponent;\n\n  @Input()\n  label = '';\n\n  @Input()\n  required = false;\n\n  @Input()\n  isMultiSelectionMode = false;\n\n  @Input()\n  optionLoader: (\n    startIndex: number,\n    pageSize: number,\n    searchQuery: string\n  ) => Observable<IRxSelectWithPaginationOptionsPage>;\n\n  @Input()\n  pageSize = 50;\n\n  @Input()\n  showDefaultTitle = true;\n\n  @Input()\n  showUncheckAll = true;\n\n  @Input()\n  readonly = false;\n\n  @Input()\n  template: TemplateRef<any>;\n\n  @Output()\n  toggleDropdown: EventEmitter<boolean> = new EventEmitter();\n\n  @Output()\n  selectionChange: EventEmitter<RxSelectOption> = new EventEmitter<RxSelectOption>();\n\n  @Input()\n  viewToModelValueAdapter = (viewValue: IRxSelectWithPaginationOption[]): any => viewValue;\n\n  @Input()\n  modelToViewValueAdapter = (modelValue: any): IRxSelectWithPaginationOption[] => modelValue;\n\n  @Input()\n  optionFormatter = (option: IRxSelectWithPaginationOption): string => option.displayValue;\n\n  constructor(private injector: Injector) {}\n\n  ngOnInit(): void {\n    // cannot inject NgControl instance directly due to the angular circular dependency error.\n    // see: https://github.com/angular/components/pull/13860/commits/f6b179e02b33c058a018ce4ccc51932d1416331f\n    this.formControl = this.injector.get(NgControl);\n\n    this.adaptSelectSettings = {\n      ...this.adaptSelectSettings,\n      showUncheckAll: this.showUncheckAll,\n      pageSize: this.pageSize\n    };\n\n    if (this.isMultiSelectionMode) {\n      this.adaptSelectSettings.checkedStyle = 'checkbox';\n      this.adaptSelectSettings.showTooltip = true;\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.showDefaultTitle && this.adaptSelectComponent.texts) {\n      if (changes.showDefaultTitle.isFirstChange()) {\n        this.adaptSelectDefaultTitle = this.adaptSelectComponent.texts.defaultTitle;\n        this.adaptSelectComponent.texts.defaultTitle = null;\n      }\n\n      this.adaptSelectComponent.texts = {\n        ...this.adaptSelectComponent.texts,\n        defaultTitle: changes.showDefaultTitle.currentValue ? this.adaptSelectDefaultTitle : null\n      };\n    }\n  }\n\n  resetLoadedOptions(): void {\n    this.onFirstTimeDropdownOpen = once(this.onFilterValueChange);\n    this.lastFilterValue = null;\n    this.isFirstOptionPageLoaded = false;\n    this.adaptSelectOptions = [];\n  }\n\n  onFilterValueChange(filterValue: string = this.lastFilterValue || ''): void {\n    this.filterValue$.next(filterValue);\n  }\n\n  private loadOptions(filterValue: string = this.lastFilterValue || ''): Observable<IRxSelectWithPaginationOption[]> {\n    if (this.lastFilterValue === filterValue) {\n      this.startIndex = this.pageSize > 0 ? this.startIndex + this.pageSize : 0;\n    } else {\n      this.lastFilterValue = filterValue;\n\n      this.startIndex = 0;\n    }\n\n    return this.optionLoader(this.startIndex, this.pageSize, this.lastFilterValue).pipe(\n      take(1),\n      tap((optionsPage: IRxSelectWithPaginationOptionsPage) => {\n        const options = optionsPage.options;\n\n        if (this.startIndex === 0) {\n          this.adaptSelectOptions = options;\n          this.isFirstOptionPageLoaded = true;\n        } else {\n          this.adaptSelectOptions = this.adaptSelectOptions.concat(options);\n        }\n\n        this.showLoadMoreButton = optionsPage.totalSize > this.adaptSelectOptions.length;\n      }),\n      map(() => this.adaptSelectOptions),\n      finalize(() => {\n        this.isOptionLoadingInProgress = false;\n      })\n    );\n  }\n\n  writeValue(selectedValue: any): void {\n    this.selectedValue = this.modelToViewValueAdapter(selectedValue);\n  }\n\n  onSelectedValueChange(selectedValue): void {\n    this.onViewValueChange(this.viewToModelValueAdapter(selectedValue));\n  }\n\n  ngDoCheck(): void {\n    if (this.formControl.untouched && this.ngModel.touched) {\n      this.ngModel.control.markAsUntouched();\n    } else if (this.formControl.touched && this.ngModel.untouched) {\n      this.ngModel.control.markAsTouched();\n    }\n\n    if (this.formControl.pristine && this.ngModel.control.dirty) {\n      this.ngModel.control.markAsPristine();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onViewValueChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  onDropdownToggle(isOpen: boolean): void {\n    if (isOpen) {\n      this.onFirstTimeDropdownOpen();\n      this.toggleDropdown.next(true);\n    } else {\n      this.onTouched();\n      this.toggleDropdown.next(false);\n\n      if (this.lastFilterValue) {\n        this.onFilterValueChange('');\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.filterValue$.complete();\n  }\n}\n","<adapt-rx-select\n  class=\"mb-0\"\n  [popupClass]=\"'rx-truncate-option-content'\"\n  [label]=\"label\"\n  [multiple]=\"isMultiSelectionMode\"\n  [selectAllButton]=\"showUncheckAll\"\n  [deselectAllButton]=\"isMultiSelectionMode\"\n  [options]=\"options$ | async\"\n  [ngModel]=\"selectedValue\"\n  (ngModelChange)=\"onSelectedValueChange($event)\"\n  [disabled]=\"formControl.disabled\"\n  [readonly]=\"readonly\"\n  [required]=\"required\"\n  [loadMoreCallback]=\"loadMoreCallbackFunc\"\n  [loadMoreButton]=\"!(pageSize === -1) && showLoadMoreButton\"\n  [loadingState]=\"isOptionLoadingInProgress && !isFirstOptionPageLoaded\"\n  [loadMoreInProgress]=\"isOptionLoadingInProgress && isFirstOptionPageLoaded\"\n  (onFilterValueChange)=\"onFilterValueChange($event)\"\n  (onPopupOpenChange)=\"onDropdownToggle($event)\"\n  [optionFormatter]=\"optionFormatter\"\n  [enableFilter]=\"true\"\n  [emptyOption]=\"!isMultiSelectionMode\"\n  [optionContentTemplate]=\"template\"\n  (onSelectionChange)=\"selectionChange.emit($event)\"\n></adapt-rx-select>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RxSelectWithPaginationComponent } from './select-with-pagination.component';\nimport { AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [AdaptRxSelectModule, FormsModule, TranslateModule, CommonModule],\n  exports: [RxSelectWithPaginationComponent],\n  declarations: [RxSelectWithPaginationComponent]\n})\nexport class RxSelectWithPaginationModule {}\n","import { AfterViewInit, Component, ElementRef, Injector, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceUtilsService } from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RX_PERMISSION,\n  RxBundleCacheService,\n  RxGroupDataPageService,\n  RxRoleDataPageService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalClass, RxModalService } from '@helix/platform/ui-kit';\nimport {\n  cloneDeep,\n  compact,\n  find,\n  flow,\n  forEach,\n  identity,\n  isEmpty,\n  isNumber,\n  map as _map,\n  pull,\n  remove,\n  uniqBy\n} from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { IRxSelectWithPaginationOptionsPage } from '../../select-with-pagination';\nimport { IPermission, PermissionOwner } from '../interfaces/permission.interfaces';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-permission-editor-dialog',\n  templateUrl: './permission-editor-dialog.component.html',\n  styleUrls: ['./permission-editor-dialog.component.scss']\n})\nexport class RxPermissionEditorDialogComponent extends RxModalClass implements OnInit, AfterViewInit {\n  @ViewChild('addNewPermissionButton', { read: ElementRef })\n  addNewPermissionButton: ElementRef;\n\n  private metadata;\n\n  permissions: IPermission[] = [];\n  permissionTypes = RX_PERMISSION.permissionType;\n  areSecurityLabelsAvailable = false;\n  permissionScope = '';\n  actionsData;\n  canSave = false;\n\n  buttonLabels = {\n    group: this.translateService.instant('com.bmc.arsys.rx.client.permission-editor.button.group.label'),\n    role: this.translateService.instant('com.bmc.arsys.rx.client.permission-editor.button.role.label'),\n    securityLabel: this.translateService.instant('com.bmc.arsys.rx.client.permission-editor.button.securityLabel.label')\n  };\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxGroupDataPage: RxGroupDataPageService,\n    private rxRecordInstanceUtilsService: RxRecordInstanceUtilsService,\n    private rxRoleDataPage: RxRoleDataPageService,\n    private rxModalService: RxModalService,\n    private rxBundleCache: RxBundleCacheService,\n    private renderer: Renderer2,\n    protected injector: Injector,\n    private translateService: TranslateService\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return this.canSave;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    const modalData = this.activeModalRef.getData();\n\n    this.metadata = RX_PERMISSION.permissionDialogMetadata[modalData.type];\n    this.actionsData = this.metadata.actions;\n\n    this.permissionScope = modalData.permissionScope || '';\n\n    this.permissions = _map(modalData.assignedPermissions, (assignedPermission: PermissionOwner) => {\n      const permissionType = this.getPermissionOwnerType(assignedPermission);\n\n      const permission: IPermission = {\n        permittedActions: {},\n        type: permissionType,\n        selectedPermissionDescriptor: [\n          {\n            value: assignedPermission.ownerId.value,\n            displayValue: assignedPermission.ownerId.name\n          }\n        ],\n        isWarningShown: false\n      };\n\n      this.setPermissionRestriction(permission, assignedPermission.type);\n\n      if (assignedPermission.ownerId.roleApplicationName) {\n        permission.selectedPermissionDescriptor[0].applicationName = assignedPermission.ownerId.roleApplicationName;\n      }\n\n      return permission;\n    });\n\n    this.canSave = false;\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      this.renderer.selectRootElement(this.addNewPermissionButton.nativeElement, true).focus();\n    });\n  }\n\n  dismiss(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  roleLoader(\n    startIndex: number,\n    pageSize: number,\n    searchQuery: string\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\n    const queryParams: any = {\n      propertySelection: ['applicationName', 'roleName', 'roleID'].join(','),\n      sortBy: 'roleName'\n    };\n\n    const queryExpression = this.formAdditionalQueryCriteria(searchQuery, 'roleName');\n\n    if (queryExpression) {\n      queryParams.queryExpression = queryExpression;\n    }\n\n    if (this.permissionScope !== RX_PERMISSION.permissionScope.all) {\n      queryParams.applicationName = this.rxBundleCache.bundleId;\n    }\n\n    return this.rxRoleDataPage\n      .get({\n        params: { startIndex, pageSize, ...queryParams }\n      })\n      .pipe(\n        map((roleDataPage: IDataPageResult) => ({\n          totalSize: roleDataPage.totalSize,\n          options: _map(roleDataPage.data, (role) => ({\n            displayValue: role.roleName,\n            value: role.roleID,\n            applicationName: role.applicationName\n          }))\n        }))\n      );\n  }\n\n  groupLoader(\n    startIndex: number,\n    pageSize: number,\n    searchQuery: string\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\n    const queryExpression = compact([\n      this.formAdditionalQueryCriteria(searchQuery, 'groupName'),\n      `('${RX_PERMISSION.groupCategoryFieldId}' != ${RX_PERMISSION.restrictedGroupCategoryForNonFieldPermissions.dynamic}\n      AND '${RX_PERMISSION.groupIdFieldId}' != ${RX_PERMISSION.restrictedGroupIdForNonFieldPermissions.subAdministratorGroup})`\n    ]).join(' AND ');\n\n    const queryParams = {\n      queryExpression: queryExpression,\n      propertySelection: ['groupName', 'groupId'].join(','),\n      sortBy: 'groupName'\n    };\n\n    return this.rxGroupDataPage\n      .get({\n        params: { startIndex, pageSize, ...queryParams }\n      })\n      .pipe(\n        map((groupDataPage: IDataPageResult) => ({\n          totalSize: groupDataPage.totalSize,\n          options: _map(groupDataPage.data, (group) => ({\n            displayValue: group.groupName,\n            value: group.groupId\n          }))\n        }))\n      );\n  }\n\n  addNewPermission(): void {\n    const permission = {\n      permittedActions: {},\n      type: RX_PERMISSION.permissionType.role,\n      selectedPermissionDescriptor: null,\n      isWarningShown: false\n    };\n\n    this.setPermissionRestriction(permission);\n\n    this.permissions.push(permission);\n  }\n\n  setRestrictionForAllPermissions(actionValue: string): void {\n    forEach(this.permissions, (permission: IPermission) => {\n      this.setPermissionRestriction(permission, actionValue);\n    });\n  }\n\n  removePermission(permission: IPermission): void {\n    pull(this.permissions, permission);\n\n    this.canSave = true;\n  }\n\n  setPermissionType(permission: IPermission, type: string): void {\n    permission.type = type;\n    permission.selectedPermissionDescriptor = null;\n    this.setPermissionRestriction(permission);\n  }\n\n  setPermissionRestriction(permission: IPermission, actionValue: string = '', isChecked: boolean = true): void {\n    if (isChecked) {\n      forEach(this.actionsData, (action) => {\n        permission.permittedActions[action.value] = action.value === actionValue;\n      });\n    }\n\n    this.canSave = true;\n  }\n\n  save(): void {\n    const permissionOwners = uniqBy(this.getPermissionOwners(), 'ownerId.name');\n\n    if (permissionOwners.length !== this.permissions.length) {\n      this.rxModalService\n        .confirm({\n          title: 'Warning',\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: 'Duplicate and misconfigured entries will be removed. Do you want to continue?'\n        })\n        .then((value: boolean) => {\n          if (value) {\n            this.activeModalRef.close({\n              permissions: permissionOwners\n            });\n          } else {\n            forEach(this.permissions, (permission) => {\n              permission.isWarningShown = !find(permission.permittedActions, identity);\n            });\n          }\n        });\n    } else {\n      this.activeModalRef.close({\n        permissions: permissionOwners\n      });\n    }\n  }\n\n  private getPermissionOwners(): PermissionOwner[] {\n    remove(this.permissions, (permission) => isEmpty(permission.selectedPermissionDescriptor));\n\n    const actualPermissions = cloneDeep(this.permissions);\n\n    return flow(\n      (permissions) =>\n        _map(permissions, (permission) => {\n          if (this.actionsData.length === 0) {\n            return this.getPermissionOwner(permission, (this.metadata as any).defaultPermittedAction);\n          } else {\n            let permissionOwner: PermissionOwner;\n\n            forEach(this.actionsData, (action) => {\n              if (permission.permittedActions[action.value]) {\n                permissionOwner = this.getPermissionOwner(permission, action.value);\n              }\n            });\n\n            return permissionOwner;\n          }\n        }),\n      compact\n    )(actualPermissions);\n  }\n\n  private getPermissionOwner(permission: IPermission, type: string): PermissionOwner {\n    const permissionOwner = {\n      ownerId: {\n        value:\n          permission.selectedPermissionDescriptor[0].value === RX_RECORD_DEFINITION.securityLabelIds.assigneeGroup\n            ? RX_RECORD_DEFINITION.groupIds.assigneeGroup\n            : permission.selectedPermissionDescriptor[0].value,\n        type: (permission.type === RX_PERMISSION.permissionType.securityLabel\n          ? RX_PERMISSION.permissionType.group\n          : permission.type\n        ).toUpperCase(),\n        name: permission.selectedPermissionDescriptor[0].displayValue\n      },\n      type: type\n    } as PermissionOwner;\n\n    if (\n      this.permissionScope === RX_PERMISSION.permissionScope.all &&\n      permissionOwner.ownerId.type === RX_PERMISSION.permissionType.role.toUpperCase()\n    ) {\n      permissionOwner.ownerId.roleApplicationName = permission.selectedPermissionDescriptor[0].applicationName;\n    }\n\n    return permissionOwner;\n  }\n\n  private getPermissionOwnerType(permissionOwner: PermissionOwner): string {\n    const permissionOwnerId = permissionOwner.ownerId.value;\n\n    if (isNumber(permissionOwnerId)) {\n      return permissionOwnerId < 0 ? RX_PERMISSION.permissionType.role : RX_PERMISSION.permissionType.group;\n    } else {\n      return permissionOwner.type ? permissionOwner.type.toLowerCase() : RX_PERMISSION.permissionType.role;\n    }\n  }\n\n  private formAdditionalQueryCriteria(searchQuery: string, fieldName: string) {\n    return searchQuery\n      ? `('${fieldName}' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(searchQuery)}%\")`\n      : null;\n  }\n\n  keepKeyValueOrder(): number {\n    return 0;\n  }\n\n  onPermissionDescriptorSelected(): void {\n    this.canSave = true;\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">{{ 'com.bmc.arsys.rx.client.permission-editor.title' | translate }}</h5>\n  <button class=\"close dp-close\" rx-id=\"x-button\" (click)=\"dismiss()\"></button>\n</div>\n\n<div class=\"modal-body\">\n  <button\n    adapt-button\n    btn-type=\"tertiary\"\n    class=\"p-0\"\n    #addNewPermissionButton\n    rx-id=\"add-new-permission-button\"\n    (click)=\"addNewPermission()\"\n  >\n    <span class=\"d-icon-plus_circle\"></span>\n    {{ 'com.bmc.arsys.rx.client.permission-editor.button.add-permission.label' | translate }}\n  </button>\n\n  <div class=\"border-bottom pb-1 d-flex align-items-center\">\n    <div class=\"permission-type mr-2\">\n      <adapt-rx-control-label label=\"{{ 'com.bmc.arsys.rx.client.permission-editor.column.type.label' | translate }}\">\n      </adapt-rx-control-label>\n    </div>\n\n    <div class=\"permission-role-selection d-flex align-items-center mr-2\">\n      <adapt-rx-control-label\n        label=\"{{ 'com.bmc.arsys.rx.client.permission-editor.permission-type.title' | translate }}\"\n      ></adapt-rx-control-label>\n    </div>\n\n    <div class=\"permission-warning\"></div>\n\n    <div class=\"permission-actions d-flex justify-content-center mr-2\" *ngIf=\"actionsData?.length\">\n      <div class=\"permission-action d-flex flex-column justify-content-center mr-1\" *ngFor=\"let action of actionsData\">\n        <adapt-rx-control-label class=\"text-center\" label=\"{{ action.label | translate }}\"></adapt-rx-control-label>\n        <adapt-button\n          btn-type=\"secondary\"\n          size=\"xtra-small\"\n          (click)=\"setRestrictionForAllPermissions(action.value)\"\n          [disabled]=\"permissions.length === 0\"\n        >\n          {{ 'com.bmc.arsys.rx.client.permission-editor.button.set-all.caption' | translate }}\n        </adapt-button>\n      </div>\n    </div>\n\n    <div class=\"remove-permission\"></div>\n  </div>\n\n  <div class=\"border-bottom py-2 d-flex\" *ngFor=\"let permission of permissions\">\n    <div class=\"permission-type mr-2\">\n      <div class=\"btn-group\">\n        <div *ngFor=\"let permissionType of permissionTypes | keyvalue: keepKeyValueOrder\">\n          <button\n            adapt-button\n            type=\"button\"\n            [btn-type]=\"permission.type === permissionType.value ? 'primary' : 'secondary'\"\n            *ngIf=\"\n              permissionType.value !== permissionTypes.securityLabel ||\n              (permissionType.value === permissionTypes.securityLabel && areSecurityLabelsAvailable)\n            \"\n            (click)=\"setPermissionType(permission, permissionType.value)\"\n          >\n            {{ buttonLabels[permissionType.value] }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"permission-role-selection mr-2\">\n      <rx-select-with-pagination\n        class=\"select-max-width\"\n        *ngIf=\"permission.type === permissionTypes.role\"\n        [(ngModel)]=\"permission.selectedPermissionDescriptor\"\n        (ngModelChange)=\"onPermissionDescriptorSelected()\"\n        [optionLoader]=\"roleLoader.bind(this)\"\n        [showUncheckAll]=\"false\"\n      ></rx-select-with-pagination>\n\n      <rx-select-with-pagination\n        *ngIf=\"permission.type === permissionTypes.group\"\n        class=\"select-max-width\"\n        [(ngModel)]=\"permission.selectedPermissionDescriptor\"\n        (ngModelChange)=\"onPermissionDescriptorSelected()\"\n        [optionLoader]=\"groupLoader.bind(this)\"\n        [showUncheckAll]=\"false\"\n      ></rx-select-with-pagination>\n    </div>\n\n    <div class=\"permission-warning d-flex align-items-center\">\n      <span *ngIf=\"permission.isWarningShown\" class=\"d-icon-exclamation_triangle\"> </span>\n    </div>\n\n    <div class=\"permission-actions d-flex\" *ngIf=\"actionsData?.length\">\n      <div class=\"permission-action d-flex justify-content-center mr-1\" *ngFor=\"let action of actionsData\">\n        <adapt-rx-checkbox\n          class=\"checkbox-inline m-0\"\n          [(ngModel)]=\"permission.permittedActions[action.value]\"\n          (ngModelChange)=\"setPermissionRestriction(permission, action.value, $event)\"\n        >\n        </adapt-rx-checkbox>\n      </div>\n    </div>\n\n    <div class=\"remove-permission d-flex justify-content-end mr-2\">\n      <button class=\"close\" (click)=\"removePermission(permission)\"></button>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button adapt-button type=\"button\" btn-type=\"primary\" [disabled]=\"!canSave\" rx-id=\"save-button\" (click)=\"save()\">\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"cancel-button\" (click)=\"dismiss()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { cloneDeep } from 'lodash';\nimport { ValueAccessor } from '../form-builder/value-accessor';\nimport { IPermissionEditorComponentOptions } from './interfaces/permission-editor-component-options.interface';\nimport { PermissionOwner } from './interfaces/permission.interfaces';\nimport { RxPermissionEditorDialogComponent } from './permission-editor-dialog/permission-editor-dialog.component';\nimport { IDialogApi, RxModalService } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-permission-editor',\n  templateUrl: './permission-editor.component.html',\n  styleUrls: ['./permission-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxPermissionEditorComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxPermissionEditorComponent extends ValueAccessor<PermissionOwner[]> {\n  private dialogApi: IDialogApi;\n\n  @Input()\n  options: IPermissionEditorComponentOptions;\n\n  constructor(private rxModalService: RxModalService) {\n    super();\n  }\n\n  openEditor(): void {\n    this.rxModalService\n      .openModal({\n        content: RxPermissionEditorDialogComponent,\n        data: {\n          assignedPermissions: cloneDeep(this.value),\n          type: this.options.type,\n          permissionScope: this.options.permissionScope,\n          onApiReady: (dialogApi: IDialogApi) => {\n            this.dialogApi = dialogApi;\n          }\n        }\n      })\n      .then((data: { permissions: PermissionOwner[] }) => {\n        this.dialogApi = null;\n        this.value = data.permissions;\n      })\n      .catch(() => {\n        this.dialogApi = null;\n      });\n  }\n\n  isDirty(): boolean {\n    return Boolean(this.dialogApi?.isDirty());\n  }\n}\n","<div class=\"d-flex justify-content-between align-items-center\">\n  <label class=\"form-control-label mb-0\">{{ options.label }}</label>\n\n  <button\n    adapt-button\n    type=\"button\"\n    class=\"p-0\"\n    btn-type=\"tertiary\"\n    rx-id=\"edit-button\"\n    *ngIf=\"!isDisabled\"\n    (click)=\"openEditor()\"\n  >\n    <span class=\"d-icon-pencil\"></span>\n    Edit\n  </button>\n</div>\n\n<div class=\"permissions\">\n  <div *ngIf=\"value?.length === 0\">\n    <h6 class=\"my-1\">None set (Admins only)</h6>\n  </div>\n\n  <div class=\"d-flex justify-content-between align-items-center pt-2\" *ngFor=\"let permission of value\">\n    <div class=\"permission-name\">\n      {{ permission.ownerId.name }}\n    </div>\n\n    <adapt-tag>{{ permission.type }}</adapt-tag>\n  </div>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptModalModule,\n  AdaptRxCheckboxModule,\n  AdaptRxLabelModule,\n  AdaptTagModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptSelectModule } from '@bmc-ux/obsolete';\nimport { RxModalModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxSelectWithPaginationModule } from '../select-with-pagination/select-with-pagination.module';\nimport { RxPermissionEditorDialogComponent } from './permission-editor-dialog/permission-editor-dialog.component';\nimport { RxPermissionEditorComponent } from './permission-editor.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RxSelectWithPaginationModule,\n    RxModalModule,\n    FormsModule,\n    AdaptSelectModule,\n    AdaptModalModule,\n    AdaptButtonModule,\n    AdaptTagModule,\n    TranslateModule,\n    AdaptRxCheckboxModule,\n    AdaptRxLabelModule\n  ],\n  declarations: [RxPermissionEditorComponent, RxPermissionEditorDialogComponent],\n  exports: [RxPermissionEditorDialogComponent, RxPermissionEditorComponent],\n  entryComponents: [RxPermissionEditorComponent, RxPermissionEditorDialogComponent]\n})\nexport class RxPermissionEditorModule {}\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { AbstractControl, NgForm, ValidationErrors } from '@angular/forms';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IPlainObject, RxDefinitionNameService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-rename-definition-modal',\n  templateUrl: './rename-definition-modal.component.html'\n})\nexport class RenameDefinitionModalComponent extends RxModalClass implements OnInit {\n  modalData: IPlainObject;\n  bundleId: string;\n  definitionDisplayName: string;\n  oldDefinitionDisplayName: string;\n  definitionNames: string[];\n\n  @ViewChild('renameDefinitionModalForm', { static: true, read: NgForm })\n  renameDefinitionModalForm: NgForm;\n\n  constructor(\n    protected injector: Injector,\n    private activeModalRef: ActiveModalRef,\n    private rxDefinitionNameService: RxDefinitionNameService\n  ) {\n    super(activeModalRef, injector);\n    this.modalData = this.activeModalRef.getData();\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.bundleId = this.rxDefinitionNameService.getBundleId(this.modalData.definitionName);\n    this.definitionDisplayName = this.rxDefinitionNameService.getDisplayName(this.modalData.definitionName);\n    this.oldDefinitionDisplayName = this.rxDefinitionNameService.getDisplayName(this.modalData.definitionName);\n\n    this.definitionNames = this.modalData.definitionNames\n      .map((definitionName) => this.rxDefinitionNameService.getDisplayName(definitionName))\n      .filter((definitionName) => definitionName !== this.definitionDisplayName);\n  }\n\n  isDirty(): boolean {\n    return this.renameDefinitionModalForm.form.dirty;\n  }\n\n  getCorrectDefinitionNameValidator(): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      let result = null;\n\n      if (control.value && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(control.value)) {\n        result = { invalidDefinitionName: { message: this.modalData.validationErrorText } };\n      }\n\n      return result;\n    };\n  }\n\n  onCancelClick() {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  onSaveClick() {\n    if (this.bundleId) {\n      this.activeModalRef.close(\n        this.rxDefinitionNameService.getDefinitionName(this.bundleId, this.definitionDisplayName)\n      );\n    } else {\n      this.activeModalRef.close(this.definitionDisplayName);\n    }\n  }\n}\n","<div class=\"modal-body\">\n  <adapt-alert\n    *ngIf=\"modalData.infoText\"\n    [config]=\"{ title: modalData.infoText, type: 'inline', variant: 'warning' }\"\n  ></adapt-alert>\n\n  <form #renameDefinitionModalForm=\"ngForm\">\n    <adapt-rx-textfield\n      name=\"definitionDisplayName\"\n      [(ngModel)]=\"definitionDisplayName\"\n      [label]=\"modalData.fieldLabel\"\n      [rxCustomValidators]=\"getCorrectDefinitionNameValidator()\"\n      [maxlength]=\"modalData.maxLength || null\"\n      [rxUnique]=\"{\n        errorMessage:\n          'com.bmc.arsys.rx.client.rename-definition-modal.definition-already-exists.message'\n          | translate: { definitionType: modalData.definitionType },\n        items: definitionNames\n      }\"\n      adaptRequired\n      [autofocus]=\"modalData.autoFocus !== false\"\n    ></adapt-rx-textfield>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    [disabled]=\"\n      !renameDefinitionModalForm.form.dirty ||\n      !renameDefinitionModalForm.form.valid ||\n      oldDefinitionDisplayName === definitionDisplayName\n    \"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button rx-id=\"cancel-button\" adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"onCancelClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptModalModule,\n  AdaptRxFormControlModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { RenameDefinitionModalComponent } from './rename-definition-modal.component';\nimport { RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxUniqueValidatorModule } from '@helix/platform/utils';\n@NgModule({\n  declarations: [RenameDefinitionModalComponent],\n  imports: [\n    AdaptAlertModule.forRoot(),\n    AdaptButtonModule,\n    AdaptModalModule,\n    AdaptRxFormControlModule,\n    AdaptRxTextfieldModule,\n    CommonModule,\n    FormsModule,\n    RxDirectivesModule,\n    RxUniqueValidatorModule,\n    TranslateModule\n  ],\n  entryComponents: [RenameDefinitionModalComponent]\n})\nexport class RenameDefinitionModalModule {}\n","export const RX_REVERT_CUSTOMIZATION = {\n  events: {\n    revertCustomization: 'REVERT_CUSTOMIZATION'\n  }\n};\n","import { Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges } from '@angular/core';\nimport {\n  FormBuilderEvent,\n  IFormBuilderEvent,\n  IFormWidgetComponent,\n  RX_OVERLAY,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport { ReplaySubject } from 'rxjs';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { RX_REVERT_CUSTOMIZATION } from './revert-customization.constants';\nimport { IRevertCustomizationOptions } from './revert-customization.interfaces';\n\n@Component({\n  selector: 'rx-revert-customization',\n  templateUrl: './revert-customization.component.html'\n})\nexport class RxRevertCustomizationComponent implements OnInit, OnDestroy, OnChanges, IFormWidgetComponent {\n  @Input()\n  options: IRevertCustomizationOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  @Output()\n  events: EventEmitter<IFormBuilderEvent> = new EventEmitter();\n\n  showOverlayOptions = false;\n  isRevertActionHidden = false;\n  isOverlayOperationHidden = false;\n  overlayOperation: string;\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(private rxModalService: RxModalService, private rxOverlayService: RxOverlayService) {}\n\n  ngOnInit() {\n    this.updateData();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (\n      changes.options &&\n      (changes.options.currentValue.overlayGroupId !== changes.options.previousValue?.overlayGroupId ||\n        changes.options.currentValue.overlayDescriptor?.parentOverlayGroupId !==\n          changes.options.previousValue?.overlayDescriptor?.parentOverlayGroupId)\n    ) {\n      this.updateData();\n    }\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  private updateData(): void {\n    if (this.options.overlayGroupId) {\n      this.overlayOperation = this.getOverlayOperation();\n      this.isOverlayOperationHidden = RX_OVERLAY.operationTypes.createdInThisOverlayGroup === this.overlayOperation;\n      this.isRevertActionHidden = this.shouldHideRevertAction();\n      this.showOverlayOptions = !this.isOverlayOperationHidden || !this.isRevertActionHidden;\n    } else {\n      this.overlayOperation = RX_OVERLAY.operationTypes.createdInThisOverlayGroup;\n      this.isOverlayOperationHidden = true;\n      this.isRevertActionHidden = true;\n    }\n\n    this.events.emit({ type: FormBuilderEvent.HideWidget, payload: !this.showOverlayOptions });\n  }\n\n  private revertCustomization(): void {\n    this.events.emit({ type: RX_REVERT_CUSTOMIZATION.events.revertCustomization });\n  }\n\n  private getOverlayOperation(): string {\n    return this.rxOverlayService.getOverlayOperation(\n      this.options.overlayGroupId,\n      this.options.overlayDescriptor ? this.options.overlayDescriptor.parentOverlayGroupId : null\n    );\n  }\n\n  private shouldHideRevertAction(): boolean {\n    return this.overlayOperation === RX_OVERLAY.operationTypes.customizedInThisOverlayGroup\n      ? !this.options.allowOverlay\n      : true;\n  }\n\n  onRevertCustomization(): void {\n    this.rxModalService\n      .confirm({\n        title: 'Warning',\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: 'Are you sure you want to revert customization?'\n      })\n      .then((revert: boolean) => {\n        if (revert) {\n          this.revertCustomization();\n        }\n      });\n  }\n}\n","<div *ngIf=\"showOverlayOptions\" class=\"d-flex justify-content-between align-items-end\">\n  <div *ngIf=\"!isOverlayOperationHidden\" class=\"mb-0\">\n    <adapt-rx-control-label label=\"Customization status\" class=\"d-block pb-1\"></adapt-rx-control-label>\n    {{ overlayOperation }}\n  </div>\n\n  <adapt-button\n    class=\"p-0\"\n    btn-type=\"tertiary\"\n    rx-id=\"revert-customization-button\"\n    *ngIf=\"!isRevertActionHidden\"\n    (click)=\"onRevertCustomization()\"\n  >\n    <span class=\"d-icon-left-undo\"></span>\n    Revert\n  </adapt-button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AdaptButtonModule, AdaptRxLabelModule } from '@bmc-ux/adapt-angular';\nimport { RxRevertCustomizationComponent } from './revert-customization.component';\n\n@NgModule({\n  imports: [CommonModule, AdaptButtonModule, AdaptRxLabelModule],\n  declarations: [RxRevertCustomizationComponent],\n  entryComponents: [RxRevertCustomizationComponent],\n  exports: [RxRevertCustomizationComponent]\n})\nexport class RxRevertCustomizationModule {}\n","import { Component, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AdaptLazyLoadEvent, ColumnConfig, DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport {\n  IDataPageParams,\n  RxBundleCacheService,\n  RxDataPageFactoryService,\n  RxPageTitleService\n} from '@helix/platform/shared/api';\nimport { RxShellService } from '@helix/platform/view/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { filter, isEmpty, keyBy, map, sortBy } from 'lodash';\nimport { combineLatest, Subscription, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { IRxSearchRecord } from './search-record.interface';\n\ninterface ISearchResult {\n  createDate: string;\n  modifyDate: string;\n  recordDefinitionName: string;\n  recordInstanceDisplayId: string;\n  recordInstanceId: string;\n  title: string;\n  weight: number;\n  wordsAroundHit: string;\n}\n\n@Component({\n  selector: 'rx-search',\n  templateUrl: './search.component.html',\n  styleUrls: ['./search.component.scss']\n})\nexport class RxSearchComponent implements OnDestroy, OnInit {\n  @ViewChild('colIdCellTemplate', { static: true })\n  colIdCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('cellTemplate', { static: true })\n  cellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  private pageSize = 50;\n  private subscription: Subscription;\n\n  loading = true;\n  loadingMore = false;\n  startIndex = 0;\n  totalSize = 0;\n\n  columns: ColumnConfig[];\n  globalSearchRecords: IRxSearchRecord[];\n  recordDefinitionsByName: { [recordDefinitioName: string]: IRxSearchRecord };\n  searchResults: ISearchResult[];\n  searchString = '';\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private rxDataPageService: RxDataPageFactoryService,\n    private rxShellService: RxShellService,\n    private rxPageTitleService: RxPageTitleService,\n    private translateService: TranslateService,\n    public rxBundleCacheService: RxBundleCacheService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxPageTitleService.set(this.translateService.instant('com.bmc.arsys.rx.client.shell.search.results.label'));\n\n    this.subscription = combineLatest([this.activatedRoute.queryParamMap, this.rxShellService.shellConfig$]).subscribe(\n      ([queryParams, shellConfig]) => {\n        this.searchString = queryParams.get('q') || '';\n\n        this.globalSearchRecords = map(shellConfig.globalSearchRecords, (item) => {\n          item.selected = true;\n\n          return item;\n        });\n\n        this.recordDefinitionsByName = keyBy(shellConfig.globalSearchRecords, 'name');\n\n        this.loading = false;\n\n        this.getGlobalSearchResults();\n      }\n    );\n\n    this.columns = [\n      {\n        field: 'colId',\n        width: '45px',\n        cellTemplate: this.colIdCellTemplate\n      },\n      {\n        field: 'recordDefinitionName',\n        cellTemplate: this.cellTemplate\n      }\n    ];\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  get searchValue(): string {\n    return this.searchString.trim();\n  }\n\n  getGlobalSearchResults(infiniteScroll: boolean = false): void {\n    this.loading = true;\n    this.loadingMore = infiniteScroll;\n\n    if (!infiniteScroll) {\n      this.startIndex = 0;\n      this.totalSize = 0;\n    }\n\n    if (this.searchValue) {\n      const queryParams: IDataPageParams = {\n        mayHaveText: `%${this.searchValue}%`,\n        pageSize: this.pageSize,\n        searchResultOption: 'WORDS_AROUND_HIT',\n        startIndex: this.startIndex\n      };\n\n      if (!isEmpty(this.globalSearchRecords)) {\n        queryParams.recordDefinitionNames = map(filter(this.globalSearchRecords, 'selected'), 'name').join(',');\n      }\n\n      if (queryParams.recordDefinitionNames) {\n        this.rxDataPageService\n          .withType('com.bmc.arsys.rx.application.search.datapage.SearchDataPageQuery')\n          .get({ params: queryParams })\n          .pipe(\n            catchError((error) => {\n              this.loading = false;\n              this.loadingMore = false;\n\n              return throwError(error);\n            })\n          )\n          .subscribe((results) => {\n            this.loading = false;\n            this.loadingMore = false;\n\n            if (this.totalSize > 0) {\n              this.totalSize--;\n            }\n\n            this.totalSize += this.pageSize === results.totalSize ? results.totalSize + 1 : results.totalSize;\n\n            const newData = results.data as ISearchResult[];\n\n            this.startIndex += newData.length;\n\n            if (infiniteScroll) {\n              this.searchResults = this.searchResults.concat(newData);\n            } else {\n              this.searchResults = newData;\n            }\n\n            this.searchResults = sortBy(this.searchResults, 'weight');\n          });\n      } else {\n        this.resetSearchResults();\n      }\n    } else {\n      this.resetSearchResults();\n    }\n  }\n\n  private resetSearchResults() {\n    this.searchResults = [];\n    this.totalSize = 0;\n    this.loading = false;\n    this.loadingMore = false;\n  }\n\n  search(): void {\n    const trimmedSearchValue = this.searchString.trim();\n\n    if (trimmedSearchValue) {\n      this.router.navigate([], {\n        relativeTo: this.activatedRoute,\n        queryParams: { q: trimmedSearchValue },\n        queryParamsHandling: 'merge'\n      });\n    }\n  }\n\n  onFiltersChanged(): void {\n    setTimeout(() => this.getGlobalSearchResults());\n  }\n\n  onLazyLoad(event: AdaptLazyLoadEvent): void {\n    this.getGlobalSearchResults(true);\n  }\n\n  selectAllRecords(): void {\n    this.globalSearchRecords.forEach((record) => (record.selected = true));\n\n    this.getGlobalSearchResults();\n  }\n\n  unSelectAllRecords(): void {\n    this.globalSearchRecords.forEach((record) => (record.selected = false));\n\n    this.getGlobalSearchResults();\n  }\n}\n","<div class=\"row\">\n  <div class=\"col-12\">\n    <h1 class=\"mb-4 mt-0\">{{ 'com.bmc.arsys.rx.client.common.search.label' | translate }}</h1>\n  </div>\n  <div class=\"col-6 col-md-4\">\n    <form autocomplete=\"off\" (ngSubmit)=\"search()\">\n      <adapt-rx-search\n        name=\"searchString\"\n        [autofocus]=\"true\"\n        [(ngModel)]=\"searchString\"\n        [placeholder]=\"'com.bmc.arsys.rx.client.shell.searchbox.placeholder' | translate\"\n      ></adapt-rx-search>\n    </form>\n  </div>\n  <div class=\"col-1 pl-0\">\n    <div adaptDropdown>\n      <button adaptDropdownToggle class=\"btn btn-link d-icon-left-filter pl-0\">\n        {{ 'com.bmc.arsys.rx.client.common.filter-data.label' | translate }}\n      </button>\n\n      <div adaptDropdownMenu class=\"dropdown-menu p-2\">\n        <div class=\"mb-3\">{{ 'com.bmc.arsys.rx.client.common.record-definition.label' | translate }}</div>\n\n        <div class=\"d-flex justify-content-between\">\n          <button\n            adapt-button\n            btn-type=\"tertiary\"\n            type=\"button\"\n            rx-id=\"select-all-button\"\n            class=\"btn btn-link p-0\"\n            (click)=\"selectAllRecords()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.select-all.label' | translate }}\n          </button>\n\n          <button\n            adapt-button\n            btn-type=\"tertiary\"\n            type=\"button\"\n            rx-id=\"select-none-button\"\n            class=\"btn btn-link p-0\"\n            (click)=\"unSelectAllRecords()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.select-none.label' | translate }}\n          </button>\n        </div>\n\n        <ul *ngIf=\"globalSearchRecords\" class=\"list-unstyled mb-0\">\n          <li *ngFor=\"let record of globalSearchRecords\">\n            <adapt-rx-checkbox\n              class=\"mb-0 mt-3\"\n              [label]=\"record.name | rxDefinitionNamePipe\"\n              [(ngModel)]=\"record.selected\"\n              (change)=\"onFiltersChanged()\"\n            ></adapt-rx-checkbox>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div *ngIf=\"searchValue && (searchResults?.length || loading)\" class=\"row table-wrapper mt-1\">\n  <div class=\"col-12\">\n    <adapt-table\n      scrollHeight=\"flex\"\n      [value]=\"searchResults\"\n      [columns]=\"columns\"\n      [totalRecords]=\"totalSize\"\n      [rows]=\"searchResults?.length\"\n      [first]=\"startIndex\"\n      [paginator]=\"false\"\n      [scrollable]=\"true\"\n      (onLazyLoad)=\"onLazyLoad($event)\"\n      [lazy]=\"true\"\n      [lazyLoadOnInit]=\"false\"\n      [loading]=\"loading\"\n      [loadingMore]=\"loadingMore\"\n      [enableInfiniteScrolling]=\"true\"\n    >\n    </adapt-table>\n  </div>\n</div>\n\n<ng-template #colIdCellTemplate let-rowIndex=\"rowIndex\">\n  {{ rowIndex + 1 }}\n</ng-template>\n\n<ng-template #cellTemplate let-searchResult=\"dataItem\">\n  <div>\n    <span\n      >{{ searchResult.recordDefinitionName | rxDefinitionNamePipe }}\n      <a\n        [routerLink]=\"[\n          '/',\n          this.rxBundleCacheService.bundleId,\n          'view',\n          recordDefinitionsByName[searchResult.recordDefinitionName].view\n        ]\"\n        [queryParams]=\"{ $0$: searchResult.recordInstanceId }\"\n        >{{ searchResult.recordInstanceDisplayId }}</a\n      ></span\n    >\n  </div>\n  <div>\n    <span>{{ searchResult.title }}</span>\n  </div>\n\n  <adapt-highlight class=\"search-result\" [result]=\"searchResult.wordsAroundHit\" [term]=\"searchValue\"></adapt-highlight>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport {\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptHighlightModule,\n  AdaptRxCheckboxModule,\n  AdaptRxSearchModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptTableModule } from '@bmc-ux/adapt-table';\nimport { RxDefinitionModule } from '@helix/platform/shared/api';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxSearchComponent } from './search.component';\n\n@NgModule({\n  declarations: [RxSearchComponent],\n  imports: [\n    AdaptButtonModule,\n    AdaptDropdownModule,\n    AdaptHighlightModule,\n    AdaptRxCheckboxModule,\n    AdaptRxSearchModule,\n    AdaptTableModule.forRoot(),\n    CommonModule,\n    FormsModule,\n    TranslateModule,\n    RouterModule,\n    RxDefinitionModule\n  ]\n})\nexport class RxSearchModule {}\n","export const RX_USER_PREFERENCES = {\n  supportedLocales: [\n    {\n      id: 'en',\n      name: 'English'\n    },\n    {\n      id: 'fr',\n      name: 'français'\n    },\n    {\n      id: 'de',\n      name: 'Deutsch'\n    },\n    {\n      id: 'it',\n      name: 'italiano'\n    },\n    {\n      id: 'zh-cn',\n      name: '中文'\n    },\n    {\n      id: 'ko',\n      name: '한국어'\n    },\n    {\n      id: 'pt-br',\n      name: 'português'\n    },\n    {\n      id: 'ru',\n      name: 'русский'\n    },\n    {\n      id: 'ja',\n      name: '日本語'\n    },\n    {\n      id: 'es',\n      name: 'Español'\n    },\n    {\n      id: 'nl',\n      name: 'Nederlands'\n    },\n    {\n      id: 'sv',\n      name: 'svenska'\n    },\n    {\n      id: 'da',\n      name: 'dansk'\n    },\n    {\n      id: 'no',\n      name: 'norsk'\n    }\n  ],\n\n  userPreference: {\n    recordDefinitionName: 'User Preference',\n    fieldIds: {\n      loginName: 70061,\n      name: 70062,\n      value: 70063\n    }\n  },\n\n  preferenceNames: {\n    locale: 'Preferred-User-Locale'\n  }\n};\n","import { Component, OnInit } from '@angular/core';\nimport { ActiveModalRef, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceDataPageService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { RxCurrentUserService } from '@helix/platform/shared/api';\nimport { get } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { RX_USER_PREFERENCES } from './user-preferences.constants';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-user-preferences',\n  templateUrl: './user-preferences.component.html'\n})\nexport class RxUserPreferencesComponent implements OnInit {\n  private preferredLocale: string;\n  private recordInstance: RecordInstance;\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  queryInProgress: boolean;\n  selectedLocale: RxSelectOption[] = [];\n  isAbleToChangeLocale: boolean;\n  supportedLocales: RxSelectOption[] = RX_USER_PREFERENCES.supportedLocales;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.init();\n  }\n\n  init(): void {\n    this.preferredLocale = this.rxCurrentUserService.getPreferredLocale();\n    this.isAbleToChangeLocale = !this.preferredLocale;\n\n    if (this.isAbleToChangeLocale) {\n      this.queryInProgress = true;\n\n      this.rxRecordInstanceDataPageService\n        .post({\n          params: {\n            recorddefinition: RX_USER_PREFERENCES.userPreference.recordDefinitionName,\n            queryExpression:\n              \"('\" +\n              RX_USER_PREFERENCES.userPreference.fieldIds.name +\n              '\\' = \"' +\n              RX_USER_PREFERENCES.preferenceNames.locale +\n              '\" AND \\'' +\n              RX_USER_PREFERENCES.userPreference.fieldIds.loginName +\n              '\\' = \"' +\n              this.rxCurrentUserService.getName() +\n              '\")',\n            propertySelection: [RX_RECORD_DEFINITION.coreFieldIds.id]\n          }\n        })\n        .pipe(\n          switchMap((dataPageResult) => {\n            if (dataPageResult.totalSize) {\n              return this.rxRecordInstanceService.get(\n                RX_USER_PREFERENCES.userPreference.recordDefinitionName,\n                dataPageResult.data[0][RX_RECORD_DEFINITION.coreFieldIds.id]\n              );\n            } else {\n              return this.rxRecordInstanceService.getNew(RX_USER_PREFERENCES.userPreference.recordDefinitionName);\n            }\n          })\n        )\n        .subscribe((recordInstance: RecordInstance) => {\n          this.recordInstance = recordInstance;\n          const selectedLocaleId = this.recordInstance.getFieldValue(RX_USER_PREFERENCES.userPreference.fieldIds.value);\n\n          this.selectedLocale = [this.supportedLocales.find((locale) => locale.id === selectedLocaleId)];\n          this.queryInProgress = false;\n        });\n    } else {\n      this.selectedLocale = [this.supportedLocales.find((locale) => locale.id === this.preferredLocale)];\n    }\n  }\n\n  applyUserPreferences(): void {\n    let save$: Observable<any>;\n\n    this.queryInProgress = true;\n    const selectedLocaleId = get(this.selectedLocale, '[0].id', '');\n\n    this.recordInstance.setFieldValue(RX_USER_PREFERENCES.userPreference.fieldIds.value, selectedLocaleId);\n\n    if (this.recordInstance.id) {\n      save$ = this.rxRecordInstanceService.save(this.recordInstance);\n    } else {\n      this.recordInstance.setFieldValue(\n        RX_USER_PREFERENCES.userPreference.fieldIds.name,\n        RX_USER_PREFERENCES.preferenceNames.locale\n      );\n\n      this.recordInstance.setFieldValue(\n        RX_USER_PREFERENCES.userPreference.fieldIds.loginName,\n        this.rxCurrentUserService.getName()\n      );\n\n      save$ = this.rxRecordInstanceService.create(this.recordInstance);\n    }\n\n    save$.subscribe(() => {\n      this.queryInProgress = false;\n      this.activeModalRef.close();\n    });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss();\n  }\n\n  optionFormatter = (option: RxSelectOption): string => {\n    return get(option, 'name', this.defaultSelection);\n  };\n}\n","<rx-line-loader\n  *ngIf=\"queryInProgress\"\n  [loaderMessage]=\"'com.bmc.arsys.rx.client.common.loading-data' | translate\"\n></rx-line-loader>\n\n<div [hidden]=\"queryInProgress\" class=\"modal-body\">\n  <form name=\"userPreferencesForm\" novalidate #userPreferencesForm=\"ngForm\">\n    <adapt-rx-select\n      [disabled]=\"!isAbleToChangeLocale || queryInProgress\"\n      [emptyOption]=\"true\"\n      [name]=\"'userPreference'\"\n      [(ngModel)]=\"selectedLocale\"\n      [label]=\"'com.bmc.arsys.rx.client.shell.user-preferences-dialog.language.label' | translate\"\n      [optionFormatter]=\"optionFormatter\"\n      [options]=\"supportedLocales\"\n      rx-id=\"preferred-language\"\n    >\n    </adapt-rx-select>\n    <p class=\"text-danger align-start\" *ngIf=\"!isAbleToChangeLocale\">\n      <span class=\"alert-content\">\n        {{ 'com.bmc.arsys.rx.client.shell.user-preferences-dialog.validation.error.message' | translate }}\n      </span>\n    </p>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    type=\"button\"\n    class=\"btn btn-primary btn-sm\"\n    [disabled]=\"!userPreferencesForm.dirty\"\n    (click)=\"applyUserPreferences()\"\n    rx-id=\"save-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.apply.label' | translate }}\n  </button>\n  <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"cancel()\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { AdaptRadarHostingType } from '@bmc-ux/adapt-radar';\n\nexport const RX_GAINSIGHT = {\n  deploymentTypes: [\n    { id: 0, name: AdaptRadarHostingType.SaaS },\n    { id: 10, name: AdaptRadarHostingType.OnPrem }\n  ],\n\n  environmentTypes: ['Production', 'QA', 'Staging', 'Integration'],\n  gainsightUrl: 'https://web-sdk.aptrinsic.com/api/aptrinsic.js',\n  bmcGainsightUrl: 'https://documents.bmc.com/products/docs/gainsight/main/aptrinsic.js',\n  administratorRole: 'Administrator',\n  businessAnalystRole: 'Business Analyst',\n  regularUserRole: 'Regular User',\n  defaultBundle: 'Innovation Suite',\n  gainsightConfigurationsApi: '/api/rx/application/telemetry/configuration',\n  gainsightUserPreferencesApi: '/api/rx/application/telemetry/user/preferences',\n\n  gainsightSettings: {\n    recordInstanceId: 'AGGADG1AAT7X5ARM7T3LRM7T3LA5FG',\n    recordDefinitionName: 'com.bmc.arsys.rx.settings:Gainsight Configurations',\n    fieldIds: {\n      enableGainsight: 58102,\n      useAdaptRadar: 58103,\n      loadGainsightFromBmcIt: 58104,\n      deploymentType: 58105,\n      environmentType: 58106,\n      id: RX_RECORD_DEFINITION.coreFieldIds.id\n    }\n  }\n};\n","import { Injectable } from '@angular/core';\nimport {\n  AdaptRadarGainsightIdentifyActionName,\n  AdaptRadarGainsightProvider,\n  AdaptRadarProductAreaName,\n  AdaptRadarService,\n  AdaptRadarSupportedProviders\n} from '@bmc-ux/adapt-radar';\nimport { map, switchMap, take, tap, shareReplay } from 'rxjs/operators';\nimport {\n  IBundleDescriptor,\n  IPlainObject,\n  IUser,\n  RX_APPLICATION,\n  RxCurrentUserService,\n  RxFeatureService,\n  RxGlobalCacheService,\n  RxLogService\n} from '@helix/platform/shared/api';\nimport { RxRecordInstanceService, RecordInstance, RxRecordInstanceUpdateService } from '@helix/platform/record/api';\nimport { RX_GAINSIGHT } from './gainsight.constant';\nimport { IGainsightConfiguration, IGainsightSettings } from './gainsight.types';\nimport { Observable, of, combineLatest, iif } from 'rxjs';\nimport { find, keys, merge } from 'lodash';\nimport { HttpClient } from '@angular/common/http';\nimport { RxIframeUtilsService } from '@helix/platform/utils';\n\ndeclare function aptrinsic(gainsightEventName: string, customSettings: any, customEventData: any): void;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxGainsightConfiguratorService {\n  private productTag: string;\n  private updatedContext: IPlainObject;\n  private isGainsightLoaded: boolean;\n  private useAdaptRadar: boolean;\n  private bundleDescriptor$ = this.rxGlobalCacheService.getApplicationBundleDescriptor().pipe(take(1), shareReplay(1));\n\n  private gainsightConfiguration$ = this.bundleDescriptor$.pipe(\n    switchMap((bundleDescriptor: IBundleDescriptor) => this.getGainsightConfiguration(bundleDescriptor.id)),\n    shareReplay(1)\n  );\n\n  private globalContextData$ = combineLatest([this.bundleDescriptor$, this.gainsightConfiguration$]).pipe(\n    map(([bundleDescriptor, gainsightConfiguration]) =>\n      bundleDescriptor.id === RX_APPLICATION.innovationStudioBundleId\n        ? {\n            productArea: {\n              name: AdaptRadarProductAreaName.Platform,\n              version: bundleDescriptor.displayVersion,\n              hosting: gainsightConfiguration.settings.deploymentType\n            }\n          }\n        : null\n    ),\n    shareReplay(1)\n  );\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private adaptRadarService: AdaptRadarService,\n    private adaptRadarGainsightProvider: AdaptRadarGainsightProvider,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxFeatureService: RxFeatureService,\n    private rxLogService: RxLogService,\n    private httpClient: HttpClient,\n    private rxRecordInstanceUpdateService: RxRecordInstanceUpdateService,\n    private rxIframeUtilsService: RxIframeUtilsService\n  ) {}\n\n  gainsightInitConfiguration$ = iif(\n    () => this.rxFeatureService.isFeatureEnabled('DRD21-11744'),\n    combineLatest([this.bundleDescriptor$, this.gainsightConfiguration$]).pipe(\n      tap(([bundleDescriptor, gainsightConfiguration]) => {\n        const company = gainsightConfiguration.company;\n        const companyId = gainsightConfiguration.companyId;\n        const user = this.rxCurrentUserService.get();\n        const hashedUserId = gainsightConfiguration.hashedUserId;\n        let isGainsightEnabled = gainsightConfiguration.settings.enableGainsight;\n        this.useAdaptRadar = gainsightConfiguration.settings.useAdaptRadar;\n        this.productTag = gainsightConfiguration.productTag;\n\n        if (isGainsightEnabled && !gainsightConfiguration.productTag) {\n          this.rxLogService.debug(`Gainsight product tag is missing for bundle ${bundleDescriptor.id}.`);\n          isGainsightEnabled = false;\n        }\n\n        if (isGainsightEnabled) {\n          if (this.useAdaptRadar) {\n            this.adaptRadarService.startDataCollecting({\n              providers: [\n                {\n                  name: AdaptRadarSupportedProviders.Gainsight,\n                  id: this.productTag,\n                  oneTimeActions: [\n                    {\n                      name: AdaptRadarGainsightIdentifyActionName.UserIdentify,\n                      data: {\n                        userData: {\n                          id: hashedUserId,\n                          role: user.isAdministrator\n                            ? RX_GAINSIGHT.administratorRole\n                            : user.isBusinessAnalyst\n                            ? RX_GAINSIGHT.businessAnalystRole\n                            : RX_GAINSIGHT.regularUserRole\n                        },\n                        accountData: {\n                          id: companyId || company,\n                          name: company\n                        }\n                      }\n                    }\n                  ]\n                }\n              ]\n            });\n          } else {\n            const gainsightUrl = gainsightConfiguration.settings.loadGainsightFromBmcIt\n              ? RX_GAINSIGHT.bmcGainsightUrl\n              : RX_GAINSIGHT.gainsightUrl;\n\n            this.loadGainsightScript(user, gainsightUrl, hashedUserId, company, companyId);\n          }\n        }\n      }),\n      switchMap(([bundleDescriptor, gainsightConfiguration]) =>\n        gainsightConfiguration.settings.enableGainsight && gainsightConfiguration.settings.useAdaptRadar\n          ? this.adaptRadarGainsightProvider.init$\n          : of(false)\n      ),\n      tap((isInitialized) => {\n        if (isInitialized) {\n          this.isGainsightLoaded = true;\n          this.setGlobalContext(this.updatedContext);\n        }\n      }),\n      switchMap(() => this.gainsightConfiguration$),\n      shareReplay(1)\n    ),\n    of(null)\n  );\n\n  updateGlobalContext(globalContext: any, viewDefinitionName?: string): void {\n    this.gainsightConfiguration$.pipe(take(1)).subscribe((gainsightConfiguration) => {\n      if (this.rxFeatureService.isFeatureEnabled('DRD21-11744')) {\n        if (viewDefinitionName) {\n          // For runtime views clear all the previous global context before update\n          this.removeGlobalContext(keys(this.updatedContext));\n\n          globalContext =\n            find(gainsightConfiguration.viewMapping, { viewName: viewDefinitionName })?.globalContext ??\n            find(gainsightConfiguration.viewMapping, { default: true })?.globalContext;\n\n          globalContext = globalContext && JSON.parse(globalContext);\n\n          this.updatedContext = globalContext;\n        }\n\n        this.setGlobalContext(globalContext);\n      }\n    });\n  }\n\n  private setGlobalContext(globalContext: IPlainObject): void {\n    this.globalContextData$.pipe(take(1)).subscribe((globalContextData) => {\n      if (this.useAdaptRadar && this.isGainsightLoaded) {\n        this.adaptRadarGainsightProvider.setGlobalContext(merge(globalContextData, globalContext));\n      } else if (!this.useAdaptRadar && this.isGainsightLoaded) {\n        aptrinsic('set', 'globalContext', merge(globalContextData, globalContext));\n      } else {\n        this.updatedContext = globalContext;\n      }\n    });\n  }\n\n  removeGlobalContext(contextList: string[]): void {\n    if (this.isGainsightLoaded) {\n      // Clear all global context if list is not specified\n      contextList ??= keys(this.updatedContext);\n\n      this.globalContextData$.pipe(take(1)).subscribe((globalContextData) => {\n        if (globalContextData) {\n          contextList.forEach((context) => delete globalContextData[context]);\n        }\n\n        if (this.useAdaptRadar) {\n          this.adaptRadarGainsightProvider.removeGlobalContext(contextList);\n        } else {\n          aptrinsic('remove', 'globalContext', contextList);\n        }\n      });\n    }\n  }\n\n  private async loadGainsightScript(\n    user: IUser,\n    gainsightUrl: string,\n    hashedUserId: string,\n    company: string,\n    companyId: string\n  ): Promise<void> {\n    const param = this.productTag;\n    const script = document.getElementsByTagName('script')[0];\n    const node = document.createElement('script');\n\n    window['aptrinsic'] =\n      window['aptrinsic'] ||\n      function () {\n        (window['aptrinsic'].q = window['aptrinsic'].q || []).push(arguments);\n      };\n\n    window['aptrinsic'].p = param;\n\n    // iframeModeEnabled is set to \"false\" when embedded in an iFrame, as per Gainsight documentation.\n    window['aptrinsic'].c = { iframeModeEnabled: !this.rxIframeUtilsService.isRunningInIframe() };\n\n    node.async = true;\n    node.src = gainsightUrl + '?a=' + param;\n\n    node.onload = () => {\n      const functionalRoles = user.functionalRoles.reduce((functionalRole, name) => {\n        functionalRole[name] = true;\n        return functionalRole;\n      }, {});\n\n      this.isGainsightLoaded = true;\n\n      aptrinsic(\n        'identify',\n        {\n          id: hashedUserId,\n          globalId: hashedUserId,\n          role: user.isAdministrator\n            ? RX_GAINSIGHT.administratorRole\n            : user.isBusinessAnalyst\n            ? RX_GAINSIGHT.businessAnalystRole\n            : RX_GAINSIGHT.regularUserRole,\n          functionalRoles\n        },\n        {\n          id: companyId || company,\n          name: company\n        }\n      );\n\n      this.setGlobalContext(this.updatedContext);\n    };\n\n    node.onerror = (error: any) => {\n      this.rxLogService.error(error);\n    };\n\n    script.parentNode.insertBefore(node, script);\n  }\n\n  getGainsightConfiguration(bundleId: string): Observable<IGainsightConfiguration> {\n    if (this.rxFeatureService.isFeatureEnabled('DRD21-11744')) {\n      return this.httpClient.get<IGainsightConfiguration>(RX_GAINSIGHT.gainsightConfigurationsApi + '/' + bundleId);\n    } else {\n      return of(null);\n    }\n  }\n\n  saveGainsightConfiguration(gainsightSettings: IGainsightSettings): Observable<any> {\n    return this.rxRecordInstanceService\n      .get(RX_GAINSIGHT.gainsightSettings.recordDefinitionName, RX_GAINSIGHT.gainsightSettings.recordInstanceId)\n      .pipe(\n        switchMap((recordInstance: RecordInstance) => {\n          recordInstance.setFieldValue(\n            RX_GAINSIGHT.gainsightSettings.fieldIds.enableGainsight,\n            gainsightSettings.enableGainsight\n          );\n\n          recordInstance.setFieldValue(\n            RX_GAINSIGHT.gainsightSettings.fieldIds.useAdaptRadar,\n            gainsightSettings.useAdaptRadar\n          );\n\n          recordInstance.setFieldValue(\n            RX_GAINSIGHT.gainsightSettings.fieldIds.loadGainsightFromBmcIt,\n            gainsightSettings.loadGainsightFromBmcIt\n          );\n\n          recordInstance.setFieldValue(\n            RX_GAINSIGHT.gainsightSettings.fieldIds.deploymentType,\n            gainsightSettings.deploymentType\n          );\n\n          recordInstance.setFieldValue(\n            RX_GAINSIGHT.gainsightSettings.fieldIds.environmentType,\n            gainsightSettings.environmentType\n          );\n\n          return this.rxRecordInstanceUpdateService.execute(recordInstance);\n        })\n      );\n  }\n}\n","export const RX_USER_MESSAGE = {\n  title: 'com.bmc.arsys.rx.client.common.messages.label',\n  showAll: 'com.bmc.arsys.rx.client.shell.notification.action.viewAll',\n  dismissAll: 'com.bmc.arsys.rx.client.shell.notification.action.clearAll',\n  noActiveMessage: 'com.bmc.arsys.rx.client.shell.notification.active.noNotifications.label',\n  dismissMessage: 'com.bmc.arsys.rx.client.shell.notification.dismiss',\n  loadMore: 'com.bmc.arsys.rx.client.shell.notification.action.loadMore',\n  fetchMessageFrequency: 60000,\n\n  messageTypes: {\n    active: 'active',\n    dismissed: 'dismissed'\n  },\n\n  definitions: {\n    userMessage: {\n      definitionName: 'UserMessage',\n      dataPageType: 'com.bmc.arsys.rx.application.usermessage.datapage.UserMessageDataPageQuery',\n      updateStateOfAllUserMessagesCommand:\n        'com.bmc.arsys.rx.application.usermessage.command.UpdateStateOfAllUserMessagesCommand',\n      updateStateOfUserMessagesCommand:\n        'com.bmc.arsys.rx.application.usermessage.command.UpdateStateOfUserMessagesCommand',\n      fields: {\n        subject: '20000',\n        body: '20001',\n        recipient: '20002'\n      },\n      status: {\n        unread: '0',\n        read: '1',\n        dismissed: '2'\n      }\n    }\n  }\n};\n","import { DataPage } from '@helix/platform/shared/api';\nimport { Injectable, Injector } from '@angular/core';\n\nconst userMessageDataPageQuery = 'com.bmc.arsys.rx.application.usermessage.datapage.UserMessageDataPageQuery';\n\n@Injectable()\nexport class RxUserMessageDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, userMessageDataPageQuery);\n  }\n}\n","import { Injectable, NgZone, OnDestroy } from '@angular/core';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport {\n  ICommand,\n  IDataPageParams,\n  IDataPageResult,\n  RX_APPLICATION,\n  RxAngularApplicationService,\n  RxCommandFactoryService,\n  RxCurrentUserService,\n  RxGlobalCacheService,\n  RxLogService\n} from '@helix/platform/shared/api';\nimport { RxViewDefinitionCacheService } from '@helix/platform/view/api';\nimport { forEach, remove, set } from 'lodash';\nimport { forkJoin, Observable, of, Subject, Subscription, timer } from 'rxjs';\nimport { catchError, map, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { RxUserMessageDataPageService } from './user-message-data-page.service';\nimport { RX_USER_MESSAGE } from './user-message.constants';\nimport { IRxMessage, IRxMessages } from './user-message.interfaces';\n\n@Injectable()\nexport class RxUserMessageService implements OnDestroy {\n  constructor(\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxUserMessageDataPageService: RxUserMessageDataPageService,\n    private rxViewDefinitionCacheService: RxViewDefinitionCacheService,\n    private rxLogService: RxLogService,\n    private rxAngularApplicationService: RxAngularApplicationService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private ngZone: NgZone\n  ) {}\n\n  private subscription = new Subscription();\n  private cancelMessagePolling$ = new Subject();\n  private userMessagesCommand: ICommand;\n  private messageFetchedSubject = new Subject<void>();\n  private messageCountSubject = new Subject<number>();\n\n  messageFetched$: Observable<void> = this.messageFetchedSubject.asObservable();\n  messageCount$: Observable<number> = this.messageCountSubject.asObservable();\n\n  private activeMessagesFilterExpression = `'${RX_RECORD_DEFINITION.coreFieldIds.status}'!=${RX_USER_MESSAGE.definitions.userMessage.status.dismissed}`;\n  private dismissedMessagesFilterExpression = `'${RX_RECORD_DEFINITION.coreFieldIds.status}'=${RX_USER_MESSAGE.definitions.userMessage.status.dismissed}`;\n\n  userMessageModel = {\n    userMessageDef: RX_USER_MESSAGE.definitions.userMessage,\n    pageSize: 30,\n    messages: {\n      active: {\n        type: RX_USER_MESSAGE.messageTypes.active,\n        count: 0,\n        list: [],\n        queryExpr: this.activeMessagesFilterExpression,\n        loadingInProgress: false\n      },\n      dismissed: {\n        type: RX_USER_MESSAGE.messageTypes.dismissed,\n        count: 0,\n        list: [],\n        queryExpr: this.dismissedMessagesFilterExpression,\n        loadingInProgress: false\n      }\n    }\n  };\n\n  private bodyFieldId = this.userMessageModel.userMessageDef.fields.body;\n\n  private convertLineBreaks(message) {\n    const bodyFieldValue = message[this.bodyFieldId];\n\n    message[this.bodyFieldId] = (bodyFieldValue && bodyFieldValue.replace(/\\n/g, '<br>')) || '';\n  }\n\n  private updateDsmApplicationViewUrls(dataPage: IDataPageResult): Observable<IRxMessages> {\n    if (dataPage.data.length) {\n      const messages: Observable<IRxMessage>[] = (dataPage.data as IRxMessage[]).map((message) => {\n        this.convertLineBreaks(message);\n\n        const body = message[this.bodyFieldId];\n        const hasHtmlAnchors = /\\<\\/a/.test(body);\n\n        if (hasHtmlAnchors) {\n          const container = document.createElement('div');\n\n          container.innerHTML = body;\n\n          const link = container.querySelector('a');\n\n          const isViewLink = /\\/view\\/|\\/iview\\//.test(link.href);\n\n          if (isViewLink) {\n            const bundleIdMatch = window.location.hash.match(/#\\/([a-zA-Z0-9-\\.]*)/);\n            const bundleId = bundleIdMatch && bundleIdMatch[1];\n\n            return this.rxAngularApplicationService.isAngularJsApplication(bundleId).pipe(\n              switchMap((isAngularJsApplication) => {\n                if (!isAngularJsApplication) {\n                  const queryParams = [];\n\n                  let urlWithoutParams = link.href.replace(/(?:[?&]param=)([^&]*)/g, (match, paramValue) => {\n                    queryParams.push(paramValue);\n\n                    return '';\n                  });\n\n                  urlWithoutParams = urlWithoutParams.replace('innovationsuite', 'helix');\n\n                  if (queryParams.length) {\n                    const viewDefinitionName = decodeURI(urlWithoutParams.split('/').pop());\n\n                    return this.rxViewDefinitionCacheService.getViewDefinition(viewDefinitionName).pipe(\n                      map((viewDefinition) => {\n                        const newQueryParams = [];\n\n                        forEach(viewDefinition.inputParams, (inputParam, index) => {\n                          newQueryParams.push(`${inputParam.name}=${queryParams[index]}`);\n                        });\n\n                        link.href = [urlWithoutParams, newQueryParams.join('&')].join('?');\n\n                        message[this.bodyFieldId] = container.innerHTML;\n\n                        return message;\n                      }),\n                      catchError((err) => {\n                        this.rxLogService.error(err);\n\n                        return of(message);\n                      })\n                    );\n                  } else {\n                    link.href = urlWithoutParams;\n                    message[this.bodyFieldId] = container.innerHTML;\n\n                    return of(message);\n                  }\n                } else {\n                  return of(message);\n                }\n              })\n            );\n          }\n        }\n\n        return of(message);\n      });\n\n      return forkJoin(messages).pipe(\n        map((convertedMessages) => ({\n          messages: convertedMessages,\n          totalSize: dataPage.totalSize\n        }))\n      );\n    } else {\n      return of({\n        messages: [],\n        totalSize: dataPage.totalSize\n      });\n    }\n  }\n\n  cancelMessagePolling() {\n    this.cancelMessagePolling$.next();\n  }\n\n  launchMessagePolling() {\n    this.cancelMessagePolling();\n\n    this.ngZone.runOutsideAngular(() => {\n      this.subscription.add(\n        timer(0, RX_USER_MESSAGE.fetchMessageFrequency)\n          .pipe(\n            takeUntil(this.cancelMessagePolling$),\n            switchMap((_) => this.getMessages(RX_USER_MESSAGE.messageTypes.active, false, true))\n          )\n          .subscribe()\n      );\n    });\n  }\n\n  getMessages(\n    type = RX_USER_MESSAGE.messageTypes.active,\n    getMore = false,\n    suppressTokenRefresh = false\n  ): Observable<IRxMessages> {\n    const params: IDataPageParams = {\n      pageSize: this.userMessageModel.pageSize,\n      startIndex: 0,\n      sortBy: -RX_RECORD_DEFINITION.coreFieldIds.modifiedDate,\n      queryExpression: '',\n      propertySelection: [\n        RX_RECORD_DEFINITION.coreFieldIds.modifiedDate,\n        RX_RECORD_DEFINITION.coreFieldIds.id,\n        this.userMessageModel.userMessageDef.fields.body,\n        this.userMessageModel.userMessageDef.fields.subject\n      ].join(',')\n    };\n\n    this.userMessageModel.messages[type].loadingInProgress =\n      getMore || this.userMessageModel.messages[type].list.length === 0;\n\n    set(params, this.userMessageModel.userMessageDef.fields.recipient, this.rxCurrentUserService.get().loginName);\n    params.queryExpression = this.userMessageModel.messages[type].queryExpr;\n    params.startIndex = getMore ? this.userMessageModel.messages[type].list.length : 0;\n\n    const headers = {\n      'default-bundle-scope': RX_APPLICATION.innovationStudioBundleId,\n      ...(suppressTokenRefresh ? { 'Suppress-Token-Refresh': 'true' } : {})\n    };\n\n    return this.rxUserMessageDataPageService\n      .get({\n        params,\n        headers\n      })\n      .pipe(\n        switchMap(this.updateDsmApplicationViewUrls.bind(this)),\n        tap((rxMessages: IRxMessages) => {\n          this.ngZone.run(() => {\n            if (rxMessages.messages.length) {\n              if (getMore) {\n                this.userMessageModel.messages[type].list = this.userMessageModel.messages[type].list.concat(\n                  rxMessages.messages\n                );\n              } else {\n                this.userMessageModel.messages[type].count = rxMessages.totalSize;\n                this.userMessageModel.messages[type].list = rxMessages.messages;\n\n                if (type === RX_USER_MESSAGE.messageTypes.active) {\n                  this.messageCountSubject.next(rxMessages.totalSize);\n                }\n              }\n            } else if (!getMore && type === RX_USER_MESSAGE.messageTypes.active) {\n              this.messageCountSubject.next(this.userMessageModel.messages.active.count);\n            }\n\n            this.messageFetchedSubject.next();\n          });\n        })\n      );\n  }\n\n  handleSuccessfulDismiss(messageDismissed?: IRxMessage): void {\n    const shellNotifications = this.userMessageModel.messages;\n\n    if (messageDismissed) {\n      remove(shellNotifications.active.list, messageDismissed);\n      shellNotifications.dismissed.list.push(messageDismissed);\n      shellNotifications.active.count--;\n      shellNotifications.dismissed.count++;\n    } else {\n      shellNotifications.active.list = [];\n      shellNotifications.active.count = 0;\n    }\n\n    this.messageCountSubject.next(shellNotifications.active.count);\n\n    if (shellNotifications.active.list.length === 0) {\n      // avoid making backend call to get new notification on each dismiss\n      this.launchMessagePolling();\n    }\n  }\n\n  dismissNotification(message?: IRxMessage): void {\n    if (message) {\n      const inputParameter = {};\n\n      inputParameter[message[RX_RECORD_DEFINITION.coreFieldIds.id]] =\n        RX_USER_MESSAGE.definitions.userMessage.status.dismissed;\n\n      this.userMessagesCommand = this.rxCommandFactoryService.forResourceType(\n        RX_USER_MESSAGE.definitions.userMessage.updateStateOfUserMessagesCommand\n      );\n\n      this.subscription.add(\n        this.userMessagesCommand\n          .execute({\n            userMessageStateById: inputParameter\n          })\n          .subscribe(() => this.handleSuccessfulDismiss(message))\n      );\n    } else {\n      this.userMessagesCommand = this.rxCommandFactoryService.forResourceType(\n        RX_USER_MESSAGE.definitions.userMessage.updateStateOfAllUserMessagesCommand\n      );\n\n      this.subscription.add(this.userMessagesCommand.execute().subscribe(() => this.handleSuccessfulDismiss()));\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.cancelMessagePolling();\n  }\n}\n","import { Injectable, Injector, OnDestroy, OnInit, Renderer2, TemplateRef } from '@angular/core';\nimport { NavigationCancel, NavigationEnd, NavigationError, NavigationStart, Router } from '@angular/router';\nimport { AdaptNavigationComponent, AdaptTranslateService, NavigationAction, ProfileModel } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceService } from '@helix/platform/record/api';\nimport {\n  RX_APPLICATION,\n  RX_USER,\n  RxAngularApplicationService,\n  RxAuthService,\n  RxComponentCanDeactivateGuard,\n  RxCurrentUserService,\n  RxFeatureService,\n  RxGlobalCacheService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { IRxShellConfig, IRxShellMenuItem } from '@helix/platform/view/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { filter as _filter, find, get, includes, isBoolean, isEmpty, lowerCase, noop, remove, sortBy } from 'lodash';\nimport {\n  combineLatest,\n  forkJoin,\n  from,\n  merge,\n  NEVER,\n  Observable,\n  of,\n  ReplaySubject,\n  Subject,\n  Subscription\n} from 'rxjs';\nimport {\n  catchError,\n  defaultIfEmpty,\n  filter,\n  map,\n  shareReplay,\n  skip,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { RxGainsightConfiguratorService } from './gainsight/gainsight-configurator.service';\nimport { IRxShellApplication } from './shell-component.types';\nimport { RX_USER_MESSAGE } from './user-messages/user-message.constants';\nimport { RxUserMessageService } from './user-messages/user-message.service';\n\n@Injectable()\nexport abstract class ShellBase implements OnInit, OnDestroy {\n  protected abstract adaptNavigation: AdaptNavigationComponent;\n  protected abstract userMessagesPopover: TemplateRef<any>;\n\n  isShellInitialized = false;\n\n  busySubscription: Subscription;\n\n  protected currentMenuItemId: number = null;\n  protected translateService: TranslateService = this.injector.get(TranslateService);\n  protected flattenedMenuItems: IRxShellMenuItem[] = [];\n\n  protected rxComponentCanDeactivateGuard: RxComponentCanDeactivateGuard =\n    this.injector.get(RxComponentCanDeactivateGuard);\n\n  protected rxUserMessageService: RxUserMessageService = this.injector.get(RxUserMessageService);\n  protected rxAuthService: RxAuthService = this.injector.get(RxAuthService);\n  protected rxCurrentUserService: RxCurrentUserService = this.injector.get(RxCurrentUserService);\n  protected rxRecordInstanceService: RxRecordInstanceService = this.injector.get(RxRecordInstanceService);\n  protected rxGlobalCacheService: RxGlobalCacheService = this.injector.get(RxGlobalCacheService);\n  protected rxAngularApplicationService: RxAngularApplicationService = this.injector.get(RxAngularApplicationService);\n  protected rxSystemConfigurationService: RxSystemConfigurationService =\n    this.injector.get(RxSystemConfigurationService);\n\n  protected rxFeatureService: RxFeatureService = this.injector.get(RxFeatureService);\n  protected adaptTranslateService: AdaptTranslateService = this.injector.get(AdaptTranslateService);\n\n  protected rxGainsightConfiguratorService: RxGainsightConfiguratorService =\n    this.injector.get(RxGainsightConfiguratorService);\n\n  protected router: Router = this.injector.get(Router);\n\n  protected applicationDescriptor$ = this.rxGlobalCacheService.getApplicationBundleDescriptor();\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  bundleDescriptors: IRxShellApplication[];\n\n  private removeWindowBlurListener: () => void;\n\n  private helixPortalUrl: string;\n\n  private navigationEnd$ = this.router.events.pipe(\n    filter<NavigationEnd>((event) => event instanceof NavigationEnd),\n    filter((event) => event.url !== '/unknown-application')\n  );\n\n  private closeBannerSubject = new Subject<boolean>();\n\n  hasBanner$ = merge(\n    this.rxGainsightConfiguratorService.gainsightInitConfiguration$.pipe(\n      filter((gainsightConfiguration) => Boolean(gainsightConfiguration)),\n      map((gainsightConfiguration) => gainsightConfiguration.displayBanner),\n      defaultIfEmpty(false)\n    ),\n    this.closeBannerSubject.pipe(map((value) => !value))\n  ).pipe(shareReplay(1));\n\n  private translations = this.adaptTranslateService.getCurrentLanguage();\n\n  alertText = this.translations['adapt.agreement.navigation.alertText'];\n  alertLinkText = this.translations['adapt.agreement.navigation.alertLinkText'];\n\n  protected shellConfig$ = this.getShellConfig();\n\n  private applicationSwitcherActionItems$ = combineLatest([\n    this.applicationDescriptor$,\n    this.rxGlobalCacheService.getBundleDescriptors(),\n    this.shellConfig$,\n    this.rxSystemConfigurationService.queryConfiguration(['Helix-Portal-URL']).pipe(\n      map((value) => get(value, '[0].value')),\n      catchError(() => of(null))\n    )\n  ]).pipe(\n    take(1),\n    switchMap(([currentBundleDescriptor, bundleDescriptors, shellConfig, helixPortalUrl]) => {\n      if (shellConfig.allowAppSwitching) {\n        const applicationList = _filter(bundleDescriptors, { isApplication: true, isLicensed: true });\n\n        this.bundleDescriptors = bundleDescriptors;\n        this.helixPortalUrl = helixPortalUrl as string;\n\n        remove(applicationList, currentBundleDescriptor);\n        remove(applicationList, { id: RX_APPLICATION.settingsBundleId });\n\n        if (!this.rxCurrentUserService.isAdministrator()) {\n          remove(applicationList, { id: RX_APPLICATION.dataloadBundleId });\n        }\n\n        if (!this.rxCurrentUserService.isAdministrator() && !this.rxCurrentUserService.isBusinessAnalyst()) {\n          remove(applicationList, { id: RX_APPLICATION.innovationStudioBundleId });\n        }\n\n        remove(applicationList, { showInAppLauncher: false });\n\n        const optedInApplications = applicationList.map((app) =>\n          this.rxAngularApplicationService.isAngularJsApplication(app.id).pipe(\n            map((isAngularJsApplication) => ({\n              id: app.id,\n              friendlyName: app.localizedDisplayName || app.friendlyName,\n              isAngularJsApplication\n            }))\n          )\n        );\n\n        return forkJoin(optedInApplications);\n      } else {\n        return of([]);\n      }\n    }),\n    map((applicationList) => {\n      if (\n        includes(['Fixed', 'Floating', 'Bundled'], this.rxCurrentUserService.get().licenseType) &&\n        this.helixPortalUrl\n      ) {\n        applicationList.push({\n          friendlyName: this.translateService.instant(\n            'com.bmc.arsys.rx.client.shell.application-launcher.bmc-helix-dashboard.label'\n          ),\n          url: `${this.helixPortalUrl}/dashboards`\n        });\n      }\n\n      if (applicationList.length) {\n        return {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.shell.application-launcher.label'),\n          tooltip: this.translateService.instant('com.bmc.arsys.rx.client.shell.application-launcher.label'),\n          className: 'd-icon-tiles',\n          switcher: {\n            allItems: {\n              items: sortBy(\n                applicationList\n                  .filter((app) => app.id !== this.rxGlobalCacheService.applicationId)\n                  .map((app) => {\n                    return {\n                      name: app.friendlyName,\n                      action: this.launchApplication.bind(this, app.id, app.isAngularJsApplication, app.url)\n                    };\n                  }),\n                (application) => lowerCase(application.name)\n              ) as any\n            },\n            recentItems: {} as any\n          }\n        };\n      } else {\n        return {};\n      }\n    })\n  );\n\n  private showUserMessagesAction: NavigationAction = {\n    name: this.translateService.instant(RX_USER_MESSAGE.title),\n    tooltip: this.translateService.instant(RX_USER_MESSAGE.title),\n    count: 0,\n    action: noop,\n    className: 'd-icon-bell_o'\n  };\n\n  private administrationSettingsAction: NavigationAction = {\n    name: this.translateService.instant('com.bmc.arsys.rx.client.common.settings.label'),\n    tooltip: this.translateService.instant('com.bmc.arsys.rx.client.common.settings.label'),\n    route: `/${this.rxGlobalCacheService.applicationId}/settings`,\n    className: 'd-icon-gear'\n  };\n\n  navigationMenuItems$: Observable<IRxShellMenuItem[]>;\n\n  navigationActionItems$: Observable<NavigationAction[]>;\n\n  brandingInfo$ = this.applicationDescriptor$.pipe(\n    map((applicationDescriptor) => ({\n      logoClass: 'logo-helix',\n      productName: applicationDescriptor.localizedDisplayName || applicationDescriptor.friendlyName,\n      hideMobileLogo: false,\n      switcher: {\n        filter: {\n          placeholder: this.translateService.instant('com.bmc.arsys.rx.client.common.search.label')\n        }\n      }\n    }))\n  );\n\n  userProfileMenu$: Observable<ProfileModel>;\n\n  protected constructor(protected injector: Injector) {\n    this.navigationEnd$.pipe(skip(1), takeUntil(this.destroyed$)).subscribe({\n      next: () => {\n        this.highlightMenuItem(this.getActiveNavigationMenuItem());\n      },\n      complete: () => {\n        this.rxUserMessageService.cancelMessagePolling();\n      }\n    });\n\n    // ADAPT dropdowns listen to the click events and close themselves when the event is fired.\n    // When user clicks inside an iframe though, the event is not propagated to the main window and the\n    // dropdowns remain open.\n    // Here we simulate the click on the document of the main window to close the dropdowns.\n    this.removeWindowBlurListener = injector.get(Renderer2).listen('window', 'blur', () => {\n      document.body.click();\n    });\n  }\n\n  ngOnInit() {\n    this.showUserMessagesAction.popover = this.userMessagesPopover;\n\n    this.rxUserMessageService.messageCount$.subscribe((messageCount) => {\n      this.showUserMessagesAction.count = messageCount;\n    });\n\n    this.navigationMenuItems$ = this.getNavigationMenuItems().pipe(\n      tap(() => {\n        // We perform a setTimeout according to Adapt documentation.\n        // Else on smaller screens the menus might be displayed horizontally\n        // in the shell rather than vertically for smaller screens.\n        // https://github.bmc.com/pages/bmc-ux/adapt-angular/#/components/navigation\n        setTimeout(() => {\n          this.adaptNavigation.checkForHamburger();\n          this.isShellInitialized = true;\n\n          const activeNavigationMenuItem = this.getActiveNavigationMenuItem();\n\n          this.highlightMenuItem(activeNavigationMenuItem);\n        });\n      })\n    );\n\n    this.navigationActionItems$ = combineLatest([\n      this.shellConfig$,\n      this.getNavigationActionItems(),\n      this.applicationSwitcherActionItems$\n    ]).pipe(\n      map(([shellConfig, navigationActionItems, applicationSwitcherActionItems]) => [\n        ...navigationActionItems,\n        this.showUserMessagesAction,\n        ...(shellConfig.administrationSettingsState ? [this.administrationSettingsAction] : []),\n        applicationSwitcherActionItems\n      ]),\n      takeUntil(this.destroyed$)\n    );\n\n    const isGainsightFeatureEnabled = this.rxFeatureService.isFeatureEnabled('DRD21-11744');\n\n    this.userProfileMenu$ = combineLatest([this.rxGainsightConfiguratorService.gainsightInitConfiguration$, this.getUserMenuItems()]).pipe(\n      tap(([gainsightConfig, userMenuItems]) => {\n        const analyticsMenuItem = find(userMenuItems, { id: 0 });\n\n        if (analyticsMenuItem) {\n          const shouldHideAnalyticsMenuItem =\n            !isGainsightFeatureEnabled ||\n            !gainsightConfig.settings.enableGainsight ||\n            isEmpty(gainsightConfig.productTag);\n\n          analyticsMenuItem.hide = shouldHideAnalyticsMenuItem;\n        }\n      }),\n      map(([gainsightConfig, userMenuItems]) => {\n        const currentUser = this.rxCurrentUserService.get();\n\n        const userAvatarUrl = currentUser.personInstanceId\n          ? this.rxRecordInstanceService.getAttachmentDownloadUrl(\n              RX_USER.userProfileRecordDefinitionName,\n              RX_USER.userProfilePictureFieldId,\n              currentUser.personInstanceId\n            )\n          : '';\n\n        return {\n          desc: this.translateService.instant('com.bmc.arsys.rx.client.shell.user-profile.signedin.label'),\n          userName: currentUser.fullName,\n          image: userAvatarUrl,\n          typeLong: true,\n          inverted: false,\n          signOut: {\n            title: this.translateService.instant('com.bmc.arsys.rx.client.common.sign-out.label'),\n            action: this.logout.bind(this)\n          },\n          menu: userMenuItems\n        };\n      })\n    ) as Observable<any>;\n\n    this.router.events.pipe(takeUntil(this.destroyed$)).subscribe((event) => {\n      switch (true) {\n        case event instanceof NavigationStart: {\n          this.busySubscription = NEVER.subscribe();\n          break;\n        }\n\n        case event instanceof NavigationEnd:\n        case event instanceof NavigationCancel:\n        case event instanceof NavigationError: {\n          this.busySubscription?.unsubscribe();\n          break;\n        }\n\n        default: {\n          break;\n        }\n      }\n    });\n  }\n\n  protected highlightMenuItem(menuItem: IRxShellMenuItem): void {\n    if (menuItem) {\n      this.currentMenuItemId = menuItem.id;\n      this.adaptNavigation.selectMenuItem(this.currentMenuItemId);\n    } else {\n      const lastMenuItem = this.adaptNavigation.searchTree(this.adaptNavigation.menuModel, this.currentMenuItemId);\n\n      if (lastMenuItem) {\n        lastMenuItem.active = false;\n\n        if (lastMenuItem.parent) {\n          lastMenuItem.parent.active = false;\n        }\n      }\n\n      this.currentMenuItemId = null;\n      this.adaptNavigation.currentActiveId = null;\n    }\n  }\n\n  protected logout(): void {\n    let canDeactivate = this.rxComponentCanDeactivateGuard.canDeactivate();\n\n    if (isBoolean(canDeactivate)) {\n      canDeactivate = of(canDeactivate);\n    }\n\n    from(canDeactivate)\n      .pipe(\n        filter(Boolean),\n        tap(() => {\n          this.rxComponentCanDeactivateGuard.disable();\n        }),\n        switchMap(() => this.rxAuthService.logout())\n      )\n      .subscribe();\n  }\n\n  protected abstract getActiveNavigationMenuItem(): IRxShellMenuItem;\n\n  protected abstract getNavigationActionItems(): Observable<NavigationAction[]>;\n\n  protected abstract getNavigationMenuItems(): Observable<IRxShellMenuItem[]>;\n\n  protected abstract getUserMenuItems(): Observable<IRxShellMenuItem[]>;\n\n  protected abstract getShellConfig(): Observable<IRxShellConfig>;\n\n  protected launchApplication(bundleId: string, isAngularJsApplication: boolean, portalUrl: string): void {\n    let url;\n\n    if (portalUrl) {\n      url = portalUrl;\n    } else {\n      const application = find(this.bundleDescriptors, { id: bundleId });\n\n      if (application.hasCustomEntryPoint && application.id !== RX_APPLICATION.innovationStudioBundleId) {\n        url = `/${bundleId}/index.html`;\n      } else if (isAngularJsApplication) {\n        url = `/innovationsuite/index.html#/${bundleId}`;\n      } else {\n        url = `/helix/index.html#/${bundleId}`;\n      }\n    }\n\n    window.open(url);\n  }\n\n  closeBanner(): void {\n    this.closeBannerSubject.next(true);\n  }\n\n  ngOnDestroy(): void {\n    this.removeWindowBlurListener();\n    this.rxUserMessageService.cancelMessagePolling();\n    this.closeBannerSubject.complete();\n\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","export const RX_USER_AVAILABILITY = {\n  ctmPeople: {\n    recordDefinitionName: 'CTM:People',\n    fieldIds: {\n      loginName: 4,\n      assignmentAvailability: 1000000346\n    }\n  }\n};\n","import { Component } from '@angular/core';\nimport { RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport {\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceDataPageService,\n  RxRecordInstanceService,\n  RxRecordInstanceUpdateService\n} from '@helix/platform/record/api';\nimport { RX_USER_AVAILABILITY } from './user-availability.constants';\nimport { finalize, switchMap, tap } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-user-availability',\n  templateUrl: './user-availability.component.html'\n})\nexport class RxUserAvailabilityComponent {\n  isUserAvailableForAssignment = this.rxCurrentUserService.isAvailableForAssignment();\n  isSaveInProgress = false;\n\n  constructor(\n    private rxCurrentUserService: RxCurrentUserService,\n    private activeModalRef: ActiveModalRef,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxRecordInstanceUpdateService: RxRecordInstanceUpdateService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {}\n\n  updateAssignmentAvailability(): void {\n    this.isSaveInProgress = true;\n\n    this.rxRecordInstanceDataPageService\n      .post({\n        params: {\n          recorddefinition: RX_USER_AVAILABILITY.ctmPeople.recordDefinitionName,\n          queryExpression:\n            \"('\" +\n            RX_USER_AVAILABILITY.ctmPeople.fieldIds.loginName +\n            '\\' = \"' +\n            this.rxCurrentUserService.getName() +\n            '\")',\n          propertySelection: [RX_RECORD_DEFINITION.coreFieldIds.id]\n        }\n      })\n      .pipe(\n        switchMap((dataPageResult) =>\n          this.rxRecordInstanceService.get(\n            RX_USER_AVAILABILITY.ctmPeople.recordDefinitionName,\n            dataPageResult.data[0][RX_RECORD_DEFINITION.coreFieldIds.id]\n          )\n        ),\n        tap((recordInstance: RecordInstance) =>\n          recordInstance.setFieldValue(\n            RX_USER_AVAILABILITY.ctmPeople.fieldIds.assignmentAvailability,\n            this.isUserAvailableForAssignment ? '0' : '1'\n          )\n        ),\n        switchMap((recordInstance: RecordInstance) => this.rxRecordInstanceUpdateService.execute(recordInstance)),\n        finalize(() => (this.isSaveInProgress = false))\n      )\n      .subscribe(() => {\n        this.rxCurrentUserService.setAssignmentAvailability(this.isUserAvailableForAssignment);\n        this.activeModalRef.close();\n\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(\n            'com.bmc.arsys.rx.client.shell.my-availability-dialog.available-for-assignment-saved.message'\n          )\n        );\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.close();\n  }\n}\n","<div class=\"modal-body\">\n  <form name=\"userAvailabilityForm\" novalidate #userAvailabilityForm=\"ngForm\">\n    <adapt-rx-checkbox\n      class=\"d-block form-group\"\n      rx-id=\"user-availability\"\n      name=\"userAvailability\"\n      [(ngModel)]=\"isUserAvailableForAssignment\"\n      label=\"{{ 'com.bmc.arsys.rx.client.shell.my-availability-dialog.available-for-assignment.label' | translate }}\"\n    ></adapt-rx-checkbox>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    type=\"button\"\n    class=\"btn btn-primary btn-sm\"\n    [disabled]=\"this.isSaveInProgress || !userAvailabilityForm.dirty\"\n    (click)=\"updateAssignmentAvailability()\"\n    rx-id=\"save-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.apply.label' | translate }}\n  </button>\n  <button type=\"button\" class=\"btn btn-secondary btn-sm\" (click)=\"cancel()\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of } from 'rxjs';\nimport { IGainsightUserPreferences } from './gainsight.types';\nimport { RxFeatureService } from '@helix/platform/shared/api';\nimport { RX_GAINSIGHT } from './gainsight.constant';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxGainsightUserPreferencesService {\n  constructor(private httpClient: HttpClient, private rxFeatureService: RxFeatureService) {}\n\n  getGainsightUserPreferences(): Observable<IGainsightUserPreferences> {\n    if (this.rxFeatureService.isFeatureEnabled('DRD21-11744')) {\n      return this.httpClient.get<IGainsightUserPreferences>(RX_GAINSIGHT.gainsightUserPreferencesApi);\n    } else {\n      return of(null);\n    }\n  }\n\n  saveGainsightUserPreferences(gainsightUserPreferences: IGainsightUserPreferences): Observable<any> {\n    return this.httpClient.put(RX_GAINSIGHT.gainsightUserPreferencesApi, gainsightUserPreferences);\n  }\n}\n","import { ChangeDetectionStrategy, Component, OnDestroy } from '@angular/core';\nimport { ActiveModalRef, AdaptAgreementState } from '@bmc-ux/adapt-angular';\nimport { RxGainsightUserPreferencesService } from '../gainsight-user-preferences.service';\nimport { catchError, filter, map, shareReplay, switchMap, take, tap } from 'rxjs/operators';\nimport { IGainsightUserPreferences } from '../gainsight.types';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, combineLatest, of, throwError } from 'rxjs';\n\n@Component({\n  selector: 'rx-gainsight-opt-in',\n  templateUrl: './gainsight-opt-in.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class GainsightOptInComponent implements OnDestroy {\n  isQueryInProgress = true;\n  isSaveButtonDisabled = true;\n  private accountPerformance: boolean;\n\n  private isSaveInProgressSubject = new BehaviorSubject<boolean>(false);\n\n  private gainsightUserPreferences$ = this.rxGainsightUserPreferencesService.getGainsightUserPreferences().pipe(\n    take(1),\n    catchError(() => {\n      this.cancel();\n\n      this.rxNotificationService.addWarningMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.gainsight.user-profile-not-created.message')\n      );\n\n      return of(null);\n    }),\n    shareReplay(1)\n  );\n\n  state$ = this.gainsightUserPreferences$.pipe(\n    tap(() => {\n      this.isQueryInProgress = false;\n    }),\n    filter((gainsightUserPreferences) => Boolean(gainsightUserPreferences)),\n    map((gainsightUserPreferences: IGainsightUserPreferences) => ({\n      accountPerformance: gainsightUserPreferences.trackUsage != false,\n      accountMarketing: false\n    }))\n  );\n\n  vm$ = combineLatest([this.state$, this.isSaveInProgressSubject]).pipe(\n    map(([state, isSaveInProgress]) => ({\n      state,\n      isSaveInProgress\n    }))\n  );\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxGainsightUserPreferencesService: RxGainsightUserPreferencesService,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService\n  ) {}\n\n  handleStateChange(state: AdaptAgreementState): void {\n    this.isSaveButtonDisabled = false;\n    this.accountPerformance = state.accountPerformance;\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss();\n  }\n\n  save(): void {\n    this.isSaveInProgressSubject.next(true);\n\n    this.gainsightUserPreferences$\n      .pipe(\n        take(1),\n        map((gainsightUserPreferences: IGainsightUserPreferences) => ({\n          ...gainsightUserPreferences,\n          trackUsage: this.accountPerformance\n        })),\n        switchMap((gainsightUserPreferences: IGainsightUserPreferences) =>\n          this.rxGainsightUserPreferencesService.saveGainsightUserPreferences(gainsightUserPreferences)\n        ),\n        catchError((error) => {\n          this.isSaveInProgressSubject.next(false);\n\n          return throwError(error);\n        })\n      )\n      .subscribe(\n        () => {\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.gainsight.user-preferences-saved.success.message')\n          );\n\n          this.isSaveInProgressSubject.next(false);\n          this.activeModalRef.close();\n        },\n        () =>\n          this.rxNotificationService.addErrorMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.gainsight.user-profile-not-updated.message')\n          )\n      );\n  }\n\n  ngOnDestroy(): void {\n    this.isSaveInProgressSubject.complete();\n  }\n}\n","<rx-line-loader\n  *ngIf=\"isQueryInProgress\"\n  [loaderMessage]=\"'com.bmc.arsys.rx.client.common.loading-data' | translate\"\n></rx-line-loader>\n\n<ng-container class=\"p-0\" *ngIf=\"vm$ | async as vm\">\n  <div [hidden]=\"isQueryInProgress\" class=\"modal-body\">\n    <adapt-agreement-card\n      (stateChange)=\"handleStateChange($event)\"\n      [showShadow]=\"false\"\n      [showMarketingSection]=\"false\"\n      [state]=\"vm.state\"\n      rx-id=\"gainsight-agreement\"\n    >\n    </adapt-agreement-card>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button\n      type=\"button\"\n      class=\"btn btn-primary\"\n      (click)=\"save()\"\n      rx-id=\"save-button\"\n      [disabled]=\"isSaveButtonDisabled || vm.isSaveInProgress\"\n      [adaptInlineLoader]=\"vm.isSaveInProgress\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\" rx-id=\"cancel-button\">\n      {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n    </button>\n  </div>\n</ng-container>\n","import { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { RX_USER_MESSAGE } from './user-message.constants';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { RxUserMessageService } from './user-message.service';\nimport { IRxMessage } from './user-message.interfaces';\nimport { Subscription } from 'rxjs';\nimport { get } from 'lodash';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-user-message-modal',\n  templateUrl: './user-message-modal.component.html',\n  styleUrls: ['./user-message-modal.component.scss', './user-messages.scss']\n})\nexport class RxUserMessageModalComponent implements OnInit, OnDestroy {\n  @ViewChild('scrollableNotifications', { static: true }) scrollableNotifications: ElementRef;\n\n  private messageSubscription: Subscription;\n  loadingInProgress = false;\n  RX_USER_MESSAGE = RX_USER_MESSAGE;\n\n  messages = {\n    active: {\n      type: '',\n      count: 0,\n      list: [] as IRxMessage[],\n      queryExpr: '',\n      loadingInProgress: false\n    },\n    dismissed: {\n      type: '',\n      count: 0,\n      list: [] as IRxMessage[],\n      queryExpr: '',\n      loadingInProgress: false\n    }\n  };\n\n  constructor(\n    public context: ActiveModalRef,\n    private rxUserMessageService: RxUserMessageService,\n    private translateService: TranslateService,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnInit(): void {\n    this.rxUserMessageService.getMessages(RX_USER_MESSAGE.messageTypes.dismissed).subscribe(() => {\n      this.messages = this.rxUserMessageService.userMessageModel.messages;\n    });\n\n    this.messageSubscription = this.rxUserMessageService.messageFetched$.subscribe(() => {\n      const scrollPosition = this.scrollableNotifications\n        ? this.renderer.selectRootElement(this.scrollableNotifications.nativeElement).scrollTop\n        : null;\n\n      if (!scrollPosition || this.loadingInProgress) {\n        this.loadingInProgress = false;\n        this.messages = this.rxUserMessageService.userMessageModel.messages;\n      }\n    });\n  }\n\n  getMoreMessages(messageType: string, event): void {\n    this.loadingInProgress = true;\n    this.rxUserMessageService.getMessages(messageType, true).subscribe();\n    event.stopPropagation();\n  }\n\n  dismissMessage(message: IRxMessage): void {\n    this.rxUserMessageService.dismissNotification(message);\n  }\n\n  getContentTitleText(key: string, count: number): string {\n    let contentTitleText;\n\n    switch (key) {\n      case RX_USER_MESSAGE.messageTypes.active:\n        contentTitleText = 'com.bmc.arsys.rx.client.shell.notification.active.label';\n        break;\n      case RX_USER_MESSAGE.messageTypes.dismissed:\n        contentTitleText = 'com.bmc.arsys.rx.client.shell.notification.dismissed.label';\n        break;\n    }\n\n    return this.translateService.instant(contentTitleText, { count });\n  }\n\n  closeModal() {\n    this.context.close(true);\n  }\n\n  ngOnDestroy(): void {\n    this.messageSubscription.unsubscribe();\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">{{ RX_USER_MESSAGE.title | translate }}</h5>\n  <button class=\"close dp-close\" type=\"button\" (click)=\"context.close(false)\" rx-id=\"x-button\"></button>\n</div>\n\n<div class=\"modal-body\">\n  <div class=\"rx-container\">\n    <div class=\"active-messages\" *ngIf=\"messages.active.count || messages.dismissed.count\" #scrollableNotifications>\n      <div *ngFor=\"let messagesType of messages | keyvalue\">\n        <div class=\"content-title\">\n          {{ getContentTitleText(messagesType.key, messagesType.value.count) }}\n        </div>\n\n        <div *ngIf=\"!messagesType.value.count\" class=\"empty-holder\" [ngSwitch]=\"messagesType.key\">\n          <span *ngSwitchCase=\"RX_USER_MESSAGE.messageTypes.active\">{{\n            'com.bmc.arsys.rx.client.shell.notification.active.noNotifications.label' | translate\n          }}</span>\n          <span *ngSwitchCase=\"RX_USER_MESSAGE.messageTypes.dismissed\">{{\n            'com.bmc.arsys.rx.client.shell.notification.dismissed.noNotifications.label' | translate\n          }}</span>\n        </div>\n\n        <div *ngIf=\"messagesType.value.count\">\n          <div\n            class=\"item\"\n            *ngFor=\"let message of messagesType.value.list\"\n            [ngClass]=\"{ 'item-dismiss': message.dismissInProgress }\"\n          >\n            <div class=\"item-content-section\">\n              <div class=\"item-content-inner-section d-flex align-items-center flex-wrap\">\n                <div class=\"item-icon-section d-icon-bell_o\"></div>\n                <div class=\"item-content-subject font-weight-bold\">{{ message['20000'] }}</div>\n                <div class=\"item-dismiss-section ml-auto\" *ngIf=\"messagesType.key === RX_USER_MESSAGE.messageTypes.active\">\n                  <button\n                    *ngIf=\"!message.dismissInProgress\"\n                    [attr.aria-label]=\"RX_USER_MESSAGE.dismissMessage | translate\"\n                    (click)=\"dismissMessage(message)\"\n                    class=\"close\"\n                    rx-id=\"x-button\"\n                    type=\"button\"\n                  ></button>\n\n                  <div class=\"item-dismiss-preloader\">\n                    <div class=\"d-preloader d-icon-circle_25_o\" *ngIf=\"message.dismissInProgress\"></div>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"item-content-text text-break\" [innerHTML]=\"message['20001']\"></div>\n              <div class=\"item-content-date\">\n                {{ message['6'] | date: 'medium' }}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          class=\"content-load-more\"\n          *ngIf=\"loadingInProgress || messagesType.value.count > messagesType.value.list.length\"\n        >\n          <button\n            type=\"button\"\n            *ngIf=\"!loadingInProgress\"\n            adapt-button\n            btn-type=\"tertiary\"\n            size=\"small\"\n            (click)=\"getMoreMessages(messagesType.key, $event)\"\n            rx-id=\"show-more\"\n          >\n            {{ RX_USER_MESSAGE.loadMore | translate }}\n          </button>\n\n          <div class=\"d-preloader d-icon-circle_25_o\" *ngIf=\"loadingInProgress\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"empty-holder\" *ngIf=\"messages.active.count === 0 && messages.dismissed.count === 0\">\n    {{ RX_USER_MESSAGE.noActiveMessage | translate }}\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <adapt-button btn-type=\"primary\" (click)=\"closeModal()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </adapt-button>\n</div>\n","import { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { RX_USER_MESSAGE } from './user-message.constants';\nimport { RxUserMessageService } from './user-message.service';\nimport { Subscription } from 'rxjs';\nimport { IRxActiveMessage, IRxMessage } from './user-message.interfaces';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\nimport { RxUserMessageModalComponent } from './user-message-modal.component';\nimport { noop } from 'lodash';\n\n@Component({\n  selector: 'rx-user-messages',\n  templateUrl: './user-messages.component.html',\n  styleUrls: ['user-messages.scss']\n})\nexport class RxUserMessagesComponent implements OnDestroy, OnInit {\n  @ViewChild('scrollableNotifications', { static: true }) scrollableNotifications: ElementRef;\n\n  private subscription = new Subscription();\n  loadingInProgress = false;\n  activeMessage = {} as IRxActiveMessage;\n  RX_USER_MESSAGE = RX_USER_MESSAGE;\n\n  constructor(\n    private adaptModalService: AdaptModalService,\n    private rxUserMessageService: RxUserMessageService,\n    private renderer: Renderer2\n  ) {\n    this.activeMessage.count = 0;\n    this.activeMessage.list = [];\n  }\n\n  ngOnInit(): void {\n    this.subscription.add(\n      this.rxUserMessageService.messageFetched$.subscribe(() => {\n        const scrollPosition = this.scrollableNotifications\n          ? this.renderer.selectRootElement(this.scrollableNotifications.nativeElement).scrollTop\n          : null;\n\n        if (!scrollPosition || this.loadingInProgress) {\n          this.activeMessage = this.rxUserMessageService.userMessageModel.messages.active;\n          this.loadingInProgress = false;\n        }\n      })\n    );\n\n    this.rxUserMessageService.launchMessagePolling();\n  }\n\n  getMoreMessages(event): void {\n    this.loadingInProgress = true;\n    this.subscription.add(this.rxUserMessageService.getMessages(RX_USER_MESSAGE.messageTypes.active, true).subscribe());\n    event.stopPropagation();\n  }\n\n  dismissMessage(message?: IRxMessage): void {\n    this.rxUserMessageService.dismissNotification(message);\n  }\n\n  viewAllMessages(): Promise<boolean | string> {\n    return this.adaptModalService\n      .open({\n        content: RxUserMessageModalComponent,\n        data: {},\n        size: 'lg'\n      })\n      .catch(noop);\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","<div class=\"rx-container\">\n  <div class=\"title-section default-border d-flex\">\n    <div class=\"title d-inline\">{{ RX_USER_MESSAGE.title | translate }}</div>\n    <div class=\"buttons-wrapper ml-auto\">\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        size=\"small\"\n        (click)=\"viewAllMessages()\"\n        rx-id=\"view-all-messages\"\n      >\n        {{ RX_USER_MESSAGE.showAll | translate }}\n      </button>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        size=\"small\"\n        *ngIf=\"activeMessage.count\"\n        (click)=\"dismissMessage()\"\n        rx-id=\"dismiss-message\"\n      >\n        {{ RX_USER_MESSAGE.dismissAll | translate }}\n      </button>\n    </div>\n  </div>\n\n  <div class=\"empty-holder\" *ngIf=\"activeMessage.count === 0\">\n    {{ RX_USER_MESSAGE.noActiveMessage | translate }}\n  </div>\n\n  <div class=\"active-messages\" *ngIf=\"activeMessage.count\" #scrollableNotifications>\n    <div\n      class=\"item default-border\"\n      *ngFor=\"let message of activeMessage.list\"\n      [ngClass]=\"{ 'item-dismiss': message.dismissInProgress }\"\n    >\n      <div class=\"item-content-section\">\n        <div class=\"item-content-inner-section d-flex align-items-center\">\n          <div class=\"item-icon-section d-icon-bell_o\"></div>\n          <div class=\"item-content-subject font-weight-bold\">{{ message['20000'] }}</div>\n          <div class=\"item-dismiss-section ml-auto\">\n            <button\n              *ngIf=\"!message.dismissInProgress\"\n              [attr.aria-label]=\"RX_USER_MESSAGE.dismissMessage | translate\"\n              (click)=\"dismissMessage(message)\"\n              class=\"close\"\n              rx-id=\"x-button\"\n              type=\"button\"\n            ></button>\n\n            <div class=\"item-dismiss-preloader\">\n              <div class=\"d-preloader d-icon-circle_25_o\" *ngIf=\"message.dismissInProgress\"></div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"item-content-text text-break\" [innerHTML]=\"message['20001']\"></div>\n        <div class=\"item-content-date\">\n          {{ message['6'] | date: 'medium' }}\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"content-load-more\" *ngIf=\"loadingInProgress || activeMessage.count > activeMessage.list.length\">\n    <button\n      type=\"button\"\n      *ngIf=\"!loadingInProgress\"\n      adapt-button\n      btn-type=\"tertiary\"\n      size=\"small\"\n      (click)=\"getMoreMessages($event)\"\n      rx-id=\"show-more\"\n    >\n      {{ RX_USER_MESSAGE.loadMore | translate }}\n    </button>\n\n    <div class=\"d-preloader d-icon-circle_25_o\" *ngIf=\"loadingInProgress\"></div>\n  </div>\n</div>\n","import { Component, Injector, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  AdaptModalService,\n  AdaptNavigationComponent,\n  AdaptNavigationService,\n  NavigationAction\n} from '@bmc-ux/adapt-angular';\nimport { RxNotificationService, RxSmartReportingService, RxUpgradeTrackerService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport {\n  IRxShellConfig,\n  IRxShellMenuItem,\n  RX_SHELL,\n  RX_VIEW_ACTION,\n  RxShellService,\n  RxViewActionService\n} from '@helix/platform/view/api';\nimport { find, noop } from 'lodash';\nimport { Observable, Subscription } from 'rxjs';\nimport { map, shareReplay, switchMap, take, tap } from 'rxjs/operators';\nimport { RxUserPreferencesComponent } from '../user-preferences/user-preferences.component';\nimport { ShellBase } from './shell-base.class';\nimport { IRxShellUpgradeTrackerAction } from './shell-component.types';\nimport { RxUserAvailabilityComponent } from '../user-availability/user-availability.component';\nimport { RxApplicationContext } from './gainsight/gainsight.types';\nimport { GainsightOptInComponent } from './gainsight/gainsight-opt-in/gainsight-opt-in.component';\n\n@Component({\n  selector: 'rx-shell',\n  templateUrl: './shell.component.html',\n  styleUrls: ['./shell.component.scss']\n})\nexport class RxShellComponent extends ShellBase implements OnInit, OnDestroy {\n  @ViewChild('adaptNavigation', { static: true })\n  protected adaptNavigation: AdaptNavigationComponent;\n\n  @ViewChild('userMessagesPopover', { static: true })\n  protected userMessagesPopover: TemplateRef<any>;\n\n  private subscriptions: Subscription = new Subscription();\n\n  constructor(\n    private adaptModalService: AdaptModalService,\n    private route: ActivatedRoute,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxShellService: RxShellService,\n    private rxSmartReportingService: RxSmartReportingService,\n    private rxUpgradeTrackerService: RxUpgradeTrackerService,\n    private rxViewActionService: RxViewActionService,\n    protected injector: Injector,\n    private adaptNavigationService: AdaptNavigationService\n  ) {\n    super(injector);\n\n    this.rxShellService.resetMenuItemCount();\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.subscriptions.add(\n      this.rxShellService.navigateToSmartReporting$\n        .pipe(switchMap(() => this.rxSmartReportingService.openSmartReporting()))\n        .subscribe((isSmartReportingConfigured) => {\n          if (!isSmartReportingConfigured) {\n            this.rxNotificationService.addErrorMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.shell.smart-reporting-not-configured')\n            );\n          }\n        })\n    );\n\n    this.subscriptions.add(\n      this.rxShellService.navigateToView$.subscribe((menuItem: IRxShellMenuItem) => this.openView(menuItem))\n    );\n\n    this.subscriptions.add(this.rxShellService.openUserPreferences$.subscribe(() => this.openUserPreferences()));\n\n    this.subscriptions.add(\n      this.rxShellService.openGainsightPreferences$.subscribe(() => this.openGainsightPreferences())\n    );\n\n    this.subscriptions.add(this.rxShellService.openUserAvailability$.subscribe(() => this.openUserAvailability()));\n  }\n\n  private onNavigationCanceled(): void {\n    if (this.currentMenuItemId !== null) {\n      this.adaptNavigation.selectMenuItem(this.currentMenuItemId);\n    }\n  }\n\n  private openView(menuItem: IRxShellMenuItem): void {\n    this.rxViewActionService\n      .execute(RX_VIEW_ACTION.viewActionNames.openView, menuItem.openViewParams)\n      .pipe(take(1))\n      .subscribe({\n        error: () => {\n          this.onNavigationCanceled();\n        }\n      });\n  }\n\n  private openUserPreferences(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.shell.my-preferences.label'),\n        content: RxUserPreferencesComponent,\n        size: 'sm'\n      })\n      .then(() => {\n        this.rxModalService\n          .confirm({\n            title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n            modalStyle: RX_MODAL.modalStyles.warning,\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.shell.user-preferences-dialog.signout.confirmation.message'\n            )\n          })\n          .then((isLogoutRequested: boolean) => {\n            if (isLogoutRequested) {\n              this.logout();\n            }\n          });\n      })\n      .catch(noop);\n  }\n\n  openGainsightPreferences(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.shell.analytics.label'),\n        content: GainsightOptInComponent,\n        size: 'sm'\n      })\n      .catch(noop);\n  }\n\n  private openUserAvailability(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.shell.my-availability.label'),\n        content: RxUserAvailabilityComponent,\n        size: 'sm'\n      })\n      .catch(noop);\n  }\n\n  protected getNavigationActionItems(): Observable<NavigationAction[]> {\n    return this.shellConfig$.pipe(\n      map((shellConfig) => {\n        const actions = [];\n\n        shellConfig.navigationActions.forEach((item) => {\n          actions.push({\n            action: item.action,\n            className: item.className,\n            name: item.name,\n            tooltip: item.name,\n            hide: item.hide\n          });\n        });\n\n        if (!shellConfig.globalSearchDisabled) {\n          actions.push({\n            name: this.translateService.instant('com.bmc.arsys.rx.client.common.search.label'),\n            tooltip: this.translateService.instant('com.bmc.arsys.rx.client.common.search.label'),\n            className: 'd-icon-search',\n            route: `/${this.rxGlobalCacheService.applicationId}/search`\n          });\n        }\n\n        const showUpgradeTrackerAction: IRxShellUpgradeTrackerAction = {\n          action: () => {\n            this.rxUpgradeTrackerService.displayUpgradeNotification(true);\n          },\n          className: 'd-icon-clock_alert',\n          hide: !this.rxUpgradeTrackerService.isUpgradeInProgress,\n          name: ''\n        };\n\n        this.subscriptions.add(\n          this.rxUpgradeTrackerService.isUpgradeInProgress$.subscribe(() => {\n            showUpgradeTrackerAction.hide = !this.rxUpgradeTrackerService.isUpgradeInProgress;\n          })\n        );\n\n        actions.push(showUpgradeTrackerAction);\n\n        return actions;\n      })\n    );\n  }\n\n  protected getActiveNavigationMenuItem(): IRxShellMenuItem {\n    return find(\n      this.flattenedMenuItems,\n      (menuItem) =>\n        menuItem.hide !== true &&\n        menuItem.type === RX_SHELL.actions.navigateToView &&\n        decodeURIComponent(`/${this.rxGlobalCacheService.applicationId}/view/${menuItem.viewUrl}`) ===\n          decodeURIComponent(this.router.url)\n    );\n  }\n\n  protected getNavigationMenuItems(): Observable<IRxShellMenuItem[]> {\n    return this.shellConfig$.pipe(map((shellConfig) => shellConfig.navigationBarItems));\n  }\n\n  protected getUserMenuItems(): Observable<IRxShellMenuItem[]> {\n    return this.shellConfig$.pipe(map((shellConfig) => shellConfig.userMenu.subMenu));\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n\n    this.subscriptions.unsubscribe();\n  }\n\n  protected getShellConfig(): Observable<IRxShellConfig> {\n    return this.applicationDescriptor$.pipe(\n      switchMap((currentBundleDescriptor) => this.rxShellService.getShellConfig(currentBundleDescriptor.id)),\n      tap((shellConfig) => {\n        this.flattenedMenuItems = shellConfig.flattenedMenuItems;\n      }),\n      shareReplay(1)\n    );\n  }\n}\n","<ng-template #userMessagesPopover>\n  <rx-user-messages></rx-user-messages>\n</ng-template>\n\n<adapt-navigation\n  #adaptNavigation\n  [class.invisible]=\"!isShellInitialized\"\n  [metadata]=\"brandingInfo$ | async\"\n  [menu]=\"(navigationMenuItems$ | async) || []\"\n  [actions]=\"navigationActionItems$ | async\"\n  [profile]=\"userProfileMenu$ | async\"\n></adapt-navigation>\n\n<adapt-alert\n  *ngIf=\"hasBanner$ | async\"\n  [config]=\"{\n    title: 'Note:',\n    type: 'page',\n    variant: 'info',\n    content: ''\n  }\"\n  (onClose)=\"closeBanner()\"\n>\n  <span class=\"alert-content\">\n    <span>\n      {{ alertText }}\n    </span>\n\n    <a href=\"#\" class=\"alert-link\" (click)=\"openGainsightPreferences(); $event.preventDefault()\">\n      {{ alertLinkText }}\n    </a>\n  </span>\n</adapt-alert>\n\n<div [class.invisible]=\"!isShellInitialized\" class=\"busy-indicator position-relative\">\n  <rx-busy-indicator\n    [options]=\"{\n      busy: busySubscription,\n      loaderType: 'lineLoader',\n      delay: 250,\n      backdrop: false,\n      message: null\n    }\"\n  >\n  </rx-busy-indicator>\n</div>\n\n<div\n  [class.invisible]=\"!isShellInitialized\"\n  class=\"outlet-content\"\n  [ngClass]=\"{\n    'has-banner': hasBanner$ | async\n  }\"\n>\n  <router-outlet></router-outlet>\n</div>\n","import { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { DevelopmentMode } from '@helix/platform/shared/api';\nimport { map, startWith } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-development-mode-selector',\n  templateUrl: './development-mode-selector.component.html'\n})\nexport class DevelopmentModeSelectorComponent {\n  developmentModeFormControl = new FormControl(this.activeModalRef.getData().developmentMode);\n\n  isSaveButtonDisabled$ = this.developmentModeFormControl.valueChanges.pipe(\n    startWith(this.activeModalRef.getData().developmentMode),\n    map((value: DevelopmentMode) => value === this.activeModalRef.getData().developmentMode)\n  );\n\n  constructor(private activeModalRef: ActiveModalRef) {}\n\n  closeModal(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  selectDevelopmentMode(): void {\n    this.activeModalRef.close(this.developmentModeFormControl.value);\n  }\n}\n","<div class=\"modal-body p-0\">\n  <adapt-alert\n    [config]=\"{\n      content: 'com.bmc.arsys.rx.client.shell.development-mode.close-other-tabs.warning' | translate,\n      dismissible: false,\n      variant: 'warning',\n      type: 'page'\n    }\"\n  ></adapt-alert>\n\n  <div class=\"p-4\">\n    <div class=\"flex\">\n      <adapt-rx-radiobutton-group\n        [label]=\"'com.bmc.arsys.rx.client.shell.development-mode.select.label' | translate\"\n        [autofocus]=\"true\"\n        [formControl]=\"developmentModeFormControl\"\n      >\n        <adapt-rx-radiobutton\n          value=\"1\"\n          [label]=\"'com.bmc.arsys.rx.client.shell.development-mode.best-practice.label' | translate\"\n        ></adapt-rx-radiobutton>\n        <adapt-rx-radiobutton\n          value=\"0\"\n          [label]=\"'com.bmc.arsys.rx.client.shell.development-mode.base.label' | translate\"\n        ></adapt-rx-radiobutton>\n      </adapt-rx-radiobutton-group>\n\n      <adapt-alert\n        *ngIf=\"developmentModeFormControl.value === '0' && developmentModeFormControl.dirty\"\n        [config]=\"{\n          type: 'inline',\n          variant: 'warning',\n          dismissible: false,\n          content: 'com.bmc.arsys.rx.client.shell.development-mode.system-upgrade.warning' | translate\n        }\"\n      ></adapt-alert>\n\n      <a\n        adapt-button\n        class=\"d-icon-pop_up pl-0 pb-0\"\n        btn-type=\"tertiary\"\n        size=\"large\"\n        target=\"_blank\"\n        href=\"https://docs.bmc.com/docs/display/helixplatform/Customization+layer\"\n      >\n        <span> {{ 'com.bmc.arsys.rx.client.common.learn-more.label' | translate }}</span>\n      </a>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    (click)=\"selectDevelopmentMode()\"\n    [disabled]=\"isSaveButtonDisabled$ | async\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.select.label' | translate }}\n  </button>\n\n  <button adapt-button btn-type=\"secondary\" type=\"button\" rx-id=\"cancel-button\" (click)=\"closeModal()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\nimport { RxOverlayService } from '@helix/platform/shared/api';\nimport { HttpParams } from '@angular/common/http';\n\n@Component({\n  selector: 'rx-feedback-dialog',\n  templateUrl: './feedback-dialog.component.html'\n})\nexport class FeedbackDialogComponent implements OnInit {\n  feedbackUrl: SafeResourceUrl;\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private domSanitizer: DomSanitizer,\n    private rxOverlayService: RxOverlayService\n  ) {}\n\n  ngOnInit(): void {\n    const data = this.dockedPanelContext.getData();\n\n    const requestParams = new HttpParams({\n      fromObject: {\n        Q_Language: 'EN',\n        product: 'BMC Helix Platform',\n        productVersion: data.bundleDescriptorVersion,\n        tenant: this.rxOverlayService.getCurrentOverlayContext().tenantName\n      }\n    });\n\n    this.feedbackUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(\n      data.feedbackUrl.value + '?' + requestParams.toString()\n    );\n  }\n\n  close(): void {\n    this.dockedPanelContext.close(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"h-100 p-0\">\n  <iframe frameborder=\"0\" class=\"d-block h-100 w-100\" [src]=\"feedbackUrl\"> </iframe>\n</div>\n","import { Component, Injector, TemplateRef, ViewChild } from '@angular/core';\nimport {\n  AdaptDockedPanelService,\n  AdaptModalService,\n  AdaptNavigationComponent,\n  AdaptNavigationService,\n  NavigationAction\n} from '@bmc-ux/adapt-angular';\nimport {\n  DevelopmentMode,\n  IUserOverlayGroupDescriptorChildren,\n  RX_APPLICATION,\n  RX_OVERLAY,\n  RxOverlayService,\n  RxPreviousStateService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { IRxShellConfig, IRxShellMenuItem } from '@helix/platform/view/api';\nimport { includes } from 'lodash';\nimport { noop, Observable, of } from 'rxjs';\nimport { DevelopmentModeSelectorComponent } from './development-mode-selector/development-mode-selector.component';\nimport { FeedbackDialogComponent } from './feedback-dialog/feedback-dialog.component';\nimport { ShellBase } from './shell-base.class';\nimport { GainsightOptInComponent } from './gainsight/gainsight-opt-in/gainsight-opt-in.component';\nimport { RxModalService } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-innovation-studio-shell',\n  templateUrl: './shell.component.html',\n  styleUrls: ['./shell.component.scss']\n})\nexport class RxInnovationStudioShellComponent extends ShellBase {\n  @ViewChild('adaptNavigation', { static: true })\n  protected adaptNavigation: AdaptNavigationComponent;\n\n  @ViewChild('userMessagesPopover', { static: true })\n  protected userMessagesPopover: TemplateRef<any>;\n\n  protected flattenedMenuItems = [\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.workspace.page.label'),\n      id: 0,\n      action: () => {\n        this.router.navigate([RX_APPLICATION.innovationStudioBundleId, 'workspace']);\n      }\n    },\n    {\n      name: this.translateService.instant('com.bmc.arsys.rx.client.common.administration.label'),\n      id: 1,\n      action: () => {\n        this.router.navigate([RX_APPLICATION.innovationStudioBundleId, 'settings']);\n      }\n    }\n  ];\n\n  private npsSurveyBaseUrl = 'NPS-Survey-Base-URL';\n\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren = this.rxOverlayService.getCurrentOverlayContext();\n\n  constructor(\n    protected injector: Injector,\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private adaptModalService: AdaptModalService,\n    protected rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxOverlayService: RxOverlayService,\n    private rxPreviousStateService: RxPreviousStateService,\n    private rxModalService: RxModalService\n  ) {\n    super(injector);\n  }\n\n  protected getActiveNavigationMenuItem(): IRxShellMenuItem {\n    const url = this.router.url;\n\n    if (includes(url, `${RX_APPLICATION.innovationStudioBundleId}/workspace`)) {\n      return this.flattenedMenuItems[0];\n    } else if (includes(url, `${RX_APPLICATION.innovationStudioBundleId}/settings`)) {\n      return this.flattenedMenuItems[1];\n    }\n  }\n\n  protected getUserMenuItems(): Observable<IRxShellMenuItem[]> {\n    const userMenu: IRxShellMenuItem[] = [];\n    const currentOverlayContext = this.rxOverlayService.getCurrentOverlayContext();\n\n    if (this.isEligibleForFeedback()) {\n      userMenu.push({\n        name: this.translateService.instant('com.bmc.arsys.rx.client.shell.provide-feedback.label'),\n        className: 'd-icon-heart',\n        id: 1,\n        action: () => {\n          this.openFeedback();\n        }\n      });\n    }\n\n    if (this.rxFeatureService.isFeatureEnabled('DRD21-11744')) {\n      userMenu.push({\n        name: this.translateService.instant('com.bmc.arsys.rx.client.shell.analytics.label'),\n        id: 0,\n        className: 'd-icon-app_chart_bar',\n        action: () => {\n          this.openGainsightPreferences();\n        }\n      });\n    }\n\n    return of(userMenu);\n  }\n\n  private isEligibleForFeedback(): boolean {\n    return (\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n\n  private openFeedback(): void {\n    let bundleDescriptorVersion: string;\n    this.applicationDescriptor$.subscribe((applicationDescriptor) => {\n      bundleDescriptorVersion = applicationDescriptor.version;\n    });\n    this.rxSystemConfigurationService.getConfiguration(this.npsSurveyBaseUrl).subscribe((feedbackUrl) => {\n      this.adaptDockedPanelService.open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.shell.provide-feedback.label'),\n        content: FeedbackDialogComponent,\n        size: 'md',\n        data: { feedbackUrl, bundleDescriptorVersion }\n      });\n    });\n  }\n\n  openGainsightPreferences(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.shell.analytics.label'),\n        content: GainsightOptInComponent,\n        size: 'sm'\n      })\n      .catch(noop);\n  }\n\n  protected getNavigationMenuItems(): Observable<IRxShellMenuItem[]> {\n    return of(this.flattenedMenuItems);\n  }\n\n  protected getNavigationActionItems(): Observable<NavigationAction[]> {\n    const currentDevelopmentMode = this.rxOverlayService.getDevelopmentMode();\n\n    return of([\n      {\n        name: this.translateService.instant('com.bmc.arsys.rx.client.shell.development-mode.title'),\n        className: 'd-icon-field_custom',\n        tooltip: this.translateService.instant(\n          currentDevelopmentMode === DevelopmentMode.Base\n            ? 'com.bmc.arsys.rx.client.shell.development-mode.base.tooltip'\n            : 'com.bmc.arsys.rx.client.shell.development-mode.best-practice.tooltip'\n        ),\n        action: () => {\n          this.adaptModalService\n            .open({\n              title: this.translateService.instant('com.bmc.arsys.rx.client.shell.development-mode.title'),\n              content: DevelopmentModeSelectorComponent,\n              size: 'sm',\n              data: { developmentMode: currentDevelopmentMode }\n            })\n            .then(\n              (developmentMode) => {\n                this.rxOverlayService.setDevelopmentMode(developmentMode);\n\n                this.router.navigate([RX_APPLICATION.innovationStudioBundleId, 'workspace']).then(() => {\n                  window.location.reload();\n                });\n              },\n              () => {}\n            );\n        }\n      }\n    ]);\n  }\n\n  protected getShellConfig(): Observable<IRxShellConfig> {\n    return of({ allowAppSwitching: true } as IRxShellConfig);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptCloseModule,\n  AdaptDockedPanelModule,\n  AdaptModalModule,\n  AdaptNavigationModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSearchModule,\n  AdaptTooltipModule,\n  AdaptAgreementModule,\n  AdaptBusyModule\n} from '@bmc-ux/adapt-angular';\n\nimport { RxBusyIndicatorModule, RxLineLoaderModule } from '@helix/platform/ui-kit';\nimport { DevelopmentModeSelectorComponent } from './development-mode-selector/development-mode-selector.component';\nimport { FeedbackDialogComponent } from './feedback-dialog/feedback-dialog.component';\nimport { RxInnovationStudioShellComponent } from './innovation-studio-shell.component';\nimport { RxShellComponent } from './shell.component';\nimport { RxUserMessageDataPageService } from './user-messages/user-message-data-page.service';\nimport { RxUserMessageModalComponent } from './user-messages/user-message-modal.component';\nimport { RxUserMessageService } from './user-messages/user-message.service';\nimport { RxUserMessagesComponent } from './user-messages/user-messages.component';\nimport { AdaptRadarSupportedProviders, AdaptRadarModule } from '@bmc-ux/adapt-radar';\nimport { GainsightOptInComponent } from './gainsight/gainsight-opt-in/gainsight-opt-in.component';\n\n@NgModule({\n  imports: [\n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RouterModule,\n    AdaptModalModule,\n    AdaptDockedPanelModule,\n    AdaptNavigationModule.forRoot(),\n    AdaptTooltipModule,\n    AdaptButtonModule,\n    AdaptCloseModule,\n    AdaptRxSearchModule,\n    AdaptAlertModule.forRoot(),\n    AdaptRxRadiobuttonModule,\n    TranslateModule,\n    RxBusyIndicatorModule,\n    AdaptRadarModule,\n    AdaptAgreementModule,\n    RxLineLoaderModule,\n    AdaptBusyModule\n  ],\n  entryComponents: [RxUserMessageModalComponent],\n  declarations: [\n    RxShellComponent,\n    RxInnovationStudioShellComponent,\n    RxUserMessagesComponent,\n    RxUserMessageModalComponent,\n    DevelopmentModeSelectorComponent,\n    FeedbackDialogComponent,\n    GainsightOptInComponent\n  ],\n  exports: [RxShellComponent, RxInnovationStudioShellComponent],\n  providers: [RxUserMessageDataPageService, RxUserMessageService]\n})\nexport class RxShellModule {}\n","import { IPlainObject } from '@helix/platform/shared/api';\n\nexport enum RxApplicationContext {\n  Runtime = 'runtime',\n  Designtime = 'designtime'\n}\n\nexport interface IGainsightSettings {\n  enableGainsight: boolean;\n  loadGainsightFromBmcIt: boolean;\n  useAdaptRadar: boolean;\n  deploymentType: string;\n  environmentType: string;\n}\n\nexport interface IViewGlobalContextMapping {\n  viewName: string;\n  globalContext: IPlainObject;\n  default: boolean;\n}\n\nexport interface IGainsightConfiguration {\n  company: string;\n  companyId: string;\n  hashedUserId: string;\n  displayBanner: boolean;\n  productTag: string;\n  settings: IGainsightSettings;\n  viewMapping: IViewGlobalContextMapping[];\n}\n\nexport interface IGainsightUserPreferences {\n  trackUsage: boolean;\n  productUpdates: boolean;\n  guidedTours: boolean;\n  surveys: boolean;\n  onboardingBot: boolean;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxUserAvailabilityComponent } from './user-availability.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxCheckboxModule } from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [RxUserAvailabilityComponent],\n  imports: [CommonModule, TranslateModule, FormsModule, AdaptRxCheckboxModule],\n  entryComponents: [RxUserAvailabilityComponent]\n})\nexport class RxUserAvailabilityModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxUserPreferencesComponent } from './user-preferences.component';\nimport { AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\nimport { RxLineLoaderModule } from '@helix/platform/ui-kit';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, TranslateModule, RxLineLoaderModule, AdaptRxSelectModule],\n  declarations: [RxUserPreferencesComponent],\n  entryComponents: [RxUserPreferencesComponent]\n})\nexport class RxUserPreferencesModule {}\n","import { Component, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { cloneDeep, findIndex, isNumber } from 'lodash';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { IWizardApi, IWizardConfig, IWizardStep } from './wizard.types';\n\n@Component({\n  selector: 'rx-wizard-modal',\n  templateUrl: './wizard-modal.component.html',\n  styleUrls: ['./wizard-modal.component.scss']\n})\nexport class RxWizardModalComponent extends RxModalClass implements OnInit, OnDestroy {\n  constructor(public activeModalRef: ActiveModalRef, protected injector: Injector) {\n    super(activeModalRef, injector);\n  }\n\n  @ViewChild('adaptTabset', { static: true })\n  adaptTabset;\n\n  activeTabIndex = 0;\n  config: IWizardConfig<any> = this.activeModalRef.getData();\n\n  isWizardCompleted = false;\n\n  private nextSubject: Subject<string> = new Subject();\n  next$ = this.nextSubject.asObservable();\n\n  api: IWizardApi = {\n    isCurrentStepActive: (stepId: string): boolean => {\n      return findIndex(this.config.options.steps, { id: stepId }) === this.activeTabIndex;\n    },\n\n    addStep: (step: IWizardStep, index?: number): void => {\n      if (isNumber(index)) {\n        this.config.options.steps.splice(index, 0, step);\n\n        if (index <= this.activeTabIndex) {\n          setTimeout(() => this.next());\n        }\n      } else {\n        this.config.options.steps.push(step);\n      }\n    },\n\n    complete: (): void => {\n      this.isWizardDirty = false;\n      this.isWizardCompleted = true;\n    },\n\n    disableNextButton: (): void => {\n      this.config.options.isNextButtonDisabled = true;\n    },\n\n    enableNextButton: (): void => {\n      this.config.options.isNextButtonDisabled = false;\n    },\n\n    disablePreviousButton: (): void => {\n      this.config.options.isPreviousButtonDisabled = true;\n    },\n\n    enablePreviousButton: (): void => {\n      this.config.options.isPreviousButtonDisabled = false;\n    },\n\n    disableFinishButton: (): void => {\n      this.config.options.isFinishButtonDisabled = true;\n    },\n\n    enableFinishButton: (): void => {\n      this.config.options.isFinishButtonDisabled = false;\n    },\n\n    getSteps(): IWizardStep[] {\n      return cloneDeep(this.config.options.steps);\n    },\n\n    markPristine: (): void => {\n      this.isWizardDirty = false;\n    },\n\n    markDirty: (): void => {\n      this.isWizardDirty = true;\n    },\n\n    removeNextSteps: (startIndex: number): void => {\n      this.config.options.steps.splice(startIndex);\n    },\n\n    removeStep: (index: number): void => {\n      this.config.options.steps.splice(index, 1);\n    },\n\n    renew: (): void => {\n      this.isWizardCompleted = false;\n    },\n\n    setFinishButtonLabel: (label: string): void => {\n      this.config.options.finishButtonLabel = label;\n    },\n\n    updateContext: (context: IPlainObject, markDirty = true): void => {\n      Object.assign(this.config.context, context);\n\n      this.contextSubject$.next(this.config.context);\n\n      if (markDirty) {\n        this.api.markDirty();\n      }\n    }\n  };\n\n  private contextSubject$: BehaviorSubject<IPlainObject> = new BehaviorSubject<IPlainObject>(this.config.context);\n  private stepsSubject$: BehaviorSubject<IPlainObject> = new BehaviorSubject<IPlainObject>(this.config.options.steps);\n  private tabIndexSubject$: BehaviorSubject<number> = new BehaviorSubject<number>(this.activeTabIndex);\n  private isWizardDirty = false;\n\n  context$: Observable<IPlainObject> = this.contextSubject$.asObservable();\n  steps$: Observable<IPlainObject> = this.stepsSubject$.asObservable();\n  tabIndex$: Observable<number> = this.tabIndexSubject$.asObservable();\n\n  isDirty(): boolean {\n    return this.isWizardDirty;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.config.options.isPreviousButtonDisabled = true;\n    this.config.options.isNextButtonDisabled = false;\n    this.config.options.isFinishButtonDisabled = false;\n\n    this.config.options.steps[this.activeTabIndex].isActivated = true;\n  }\n\n  tabChanged({ index }): void {\n    this.activeTabIndex = index;\n    this.config.options.steps[this.activeTabIndex].isActivated = true;\n\n    this.config.options.isPreviousButtonDisabled = index === 0;\n    this.config.options.isNextButtonDisabled = index === this.config.options.steps.length - 1;\n\n    this.tabIndexSubject$.next(this.activeTabIndex);\n    this.stepsSubject$.next(this.config.options.steps);\n  }\n\n  back(): void {\n    this.adaptTabset.setActiveTab(this.activeTabIndex - 1, true, null);\n  }\n\n  next(force = false): void {\n    if (!force) {\n      this.nextSubject.next(this.config.options.steps[this.activeTabIndex].id);\n    }\n\n    if (force || this.config.options.steps[this.activeTabIndex].handlesNext !== true) {\n      this.adaptTabset.setActiveTab(this.activeTabIndex + 1, true, null);\n    }\n  }\n\n  finish(): void {\n    this.activeModalRef.close(this.config.context);\n  }\n\n  close(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.nextSubject.complete();\n    this.contextSubject$.complete();\n    this.stepsSubject$.complete();\n    this.tabIndexSubject$.complete();\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">{{ config.options.title }}</h5>\n\n  <button\n    class=\"close dp-close\"\n    [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.close.label' | translate\"\n    type=\"button\"\n    (click)=\"close()\"\n  ></button>\n</div>\n\n<div class=\"alert alert-info mb-0\" role=\"alert\" *ngIf=\"config.options.notificationMessage\">\n  <div class=\"alert-content\">\n    {{ config.options.notificationMessage }}\n  </div>\n</div>\n\n<div class=\"modal-body\">\n  <adapt-tabset\n    #adaptTabset\n    [type]=\"'stacked'\"\n    [tab-active]=\"activeTabIndex\"\n    (tab-active-changed)=\"tabChanged($event)\"\n    class=\"h-100\"\n    customClassTabList=\"stacked-tab-list\"\n  >\n    <adapt-tab-panel *ngFor=\"let step of config.options.steps\" [adapt-tab-title]=\"step.name\" [disabled]=\"true\">\n      <rx-dynamic-component-renderer\n        *ngIf=\"step.isActivated\"\n        [componentFactory]=\"step.componentFactory\"\n        [context]=\"config.context\"\n        [options]=\"step.options\"\n      ></rx-dynamic-component-renderer>\n    </adapt-tab-panel>\n  </adapt-tabset>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    *ngIf=\"!isWizardCompleted\"\n    (click)=\"close()\"\n    rx-id=\"cancel-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    class=\"mr-2 d-icon-left-angle_left\"\n    [disabled]=\"config.options.isPreviousButtonDisabled\"\n    (click)=\"back()\"\n    rx-id=\"previous-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.previous-step.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    class=\"mr-2 d-icon-right-angle_right\"\n    *ngIf=\"activeTabIndex < config.options.steps.length - 1\"\n    [disabled]=\"config.options.isNextButtonDisabled\"\n    (click)=\"next()\"\n    rx-id=\"next-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.next-step.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    *ngIf=\"(config.options.allowFinish && activeTabIndex === config.options.steps.length - 1) || isWizardCompleted\"\n    [disabled]=\"config.options.isFinishButtonDisabled\"\n    (click)=\"finish()\"\n    rx-id=\"finish-button\"\n  >\n    {{ config.options.finishButtonLabel }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { RxWizardModalComponent } from './wizard-modal.component';\nimport { IWizardConfig } from './wizard.types';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { noop } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxWizardService {\n  constructor(private rxModalService: RxModalService) {}\n\n  open<TContext>(config: IWizardConfig<TContext>): Promise<TContext> {\n    return this.rxModalService\n      .openModal({\n        content: RxWizardModalComponent,\n        data: {\n          ...config\n        }\n      })\n      .catch(noop);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptAlertModule, AdaptButtonModule, AdaptModalModule, AdaptTabsModule } from '@bmc-ux/adapt-angular';\nimport { RxDynamicComponentRendererModule } from '../dynamic-component-renderer/dynamic-component-renderer.module';\nimport { RxWizardService } from './wizard.service';\nimport { RxWizardModalComponent } from './wizard-modal.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AdaptButtonModule,\n    AdaptModalModule,\n    AdaptAlertModule,\n    AdaptTabsModule,\n    TranslateModule,\n    RxDynamicComponentRendererModule\n  ],\n  declarations: [RxWizardModalComponent],\n  entryComponents: [RxWizardModalComponent],\n  exports: [RxWizardModalComponent],\n  providers: [RxWizardService]\n})\nexport class RxWizardModule {}\n","import { Component, Injector, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxGuidService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { filter, find, forEach, lowerCase, map, max, some, trim } from 'lodash';\nimport { ISelectionOption } from './selection-field-options.interface';\n\n@Component({\n  selector: 'rx-selection-field-options-editor',\n  templateUrl: './selection-field-options-editor.component.html',\n  styleUrls: ['./selection-field-options-editor.component.scss']\n})\nexport class SelectionFieldOptionsEditorComponent extends RxModalClass {\n  @ViewChild('optionSelectionForm')\n  optionSelectionForm: NgForm;\n\n  isReadOnly = this.activeModalRef.getData().isReadOnly;\n\n  selectionOptions: ISelectionOption[] = map(\n    this.activeModalRef.getData().existingOptions,\n    (option: ISelectionOption) => ({\n      name: option.name,\n      id: option.id,\n      stringKey: option.stringKey,\n      isOpen: false\n    })\n  );\n\n  private duplicateOptionNameMsg = this.translateService.instant(\n    'com.bmc.arsys.rx.client.selection-field-options-editor.duplicate-option-name.error'\n  );\n\n  private duplicateOptionIdMsg = this.translateService.instant(\n    'com.bmc.arsys.rx.client.designer.validation.duplicate-value.message'\n  );\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    protected injector: Injector,\n    private rxGuidService: RxGuidService,\n    private translateService: TranslateService\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return this.optionSelectionForm?.dirty;\n  }\n\n  saveOptions(): void {\n    const optionNamesById = {};\n    const optionKeysById = {};\n\n    forEach(this.selectionOptions, (option: ISelectionOption) => {\n      optionNamesById[option.id] = option.name;\n    });\n\n    forEach(this.selectionOptions, (option: ISelectionOption) => {\n      optionKeysById[option.id] = option.stringKey;\n    });\n\n    this.activeModalRef.close({\n      optionNamesById,\n      optionLabelsById: optionKeysById\n    });\n  }\n\n  addOption(): void {\n    let name;\n    let counter = 0;\n    let existingOption;\n\n    const newOptionLabel = this.translateService.instant(\n      'com.bmc.arsys.rx.client.selection-field-options-editor.new-option.label'\n    );\n\n    do {\n      name = counter === 0 ? newOptionLabel : `${newOptionLabel} ` + counter;\n      counter++;\n      existingOption = find(this.selectionOptions, { name });\n    } while (existingOption);\n\n    this.selectionOptions.push({\n      name,\n      id: this.selectionOptions.length\n        ? max(this.selectionOptions.map((option: ISelectionOption) => option.id)) + 10\n        : 0,\n      stringKey: this.rxGuidService.generate(),\n      isOpen: true\n    });\n\n    this.optionSelectionForm.form.markAsDirty();\n  }\n\n  removeOption(index: number): void {\n    this.selectionOptions.splice(index, 1);\n    this.optionSelectionForm.form.markAsDirty();\n    this.validateIdAndNames('name');\n    this.validateIdAndNames('id');\n  }\n\n  expandAll(): void {\n    this.selectionOptions.forEach((option: ISelectionOption) => (option.isOpen = true));\n  }\n\n  collapseAll(): void {\n    this.selectionOptions.forEach((option: ISelectionOption) => (option.isOpen = false));\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  private getDuplicateOptions(type: 'name' | 'id') {\n    return filter(\n      this.selectionOptions,\n      (option: ISelectionOption) =>\n        filter(this.selectionOptions, (item: ISelectionOption) =>\n          type === 'name' ? lowerCase(item.name) === trim(lowerCase(option.name)) : item.id === option.id\n        ).length > 1\n    );\n  }\n\n  validateIdAndNames(type: 'name' | 'id'): void {\n    if (this.optionSelectionForm.invalid) {\n      return;\n    }\n\n    if (type === 'name') {\n      forEach(this.selectionOptions, (option: ISelectionOption) => {\n        option.invalidNameError = null;\n      });\n\n      this.getDuplicateOptions(type).forEach((option) => {\n        option.invalidNameError = this.duplicateOptionNameMsg;\n      });\n    }\n\n    if (type === 'id') {\n      forEach(this.selectionOptions, (option: ISelectionOption) => {\n        option.invalidIdError = null;\n      });\n\n      this.getDuplicateOptions(type).forEach((option) => {\n        option.invalidIdError = this.duplicateOptionIdMsg;\n      });\n    }\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      !this.optionSelectionForm?.dirty ||\n      this.optionSelectionForm?.invalid ||\n      some(this.selectionOptions, (option: ISelectionOption) => option.invalidNameError || option.invalidIdError)\n    );\n  }\n\n  trackByIndex(index: number): number {\n    return index;\n  }\n}\n","<div class=\"designer-modal-body modal-body d-flex mh-100 flex-column\">\n  <div class=\"text-right btn-group\">\n    <button\n      type=\"button\"\n      adapt-button\n      btn-type=\"tertiary\"\n      rx-id=\"add-option-button\"\n      class=\"d-icon-left-plus_circle float-left px-0\"\n      (click)=\"addOption()\"\n      *ngIf=\"!isReadOnly\"\n    >\n      {{ 'com.bmc.arsys.rx.client.selection-field-options-editor.add-option.label' | translate }}\n    </button>\n\n    <button type=\"button\" adapt-button btn-type=\"tertiary\" rx-id=\"expand-button\" (click)=\"expandAll()\" class=\"ml-auto\">\n      {{ 'com.bmc.arsys.rx.client.common.expand-all.label' | translate }}\n    </button>\n\n    <button type=\"button\" adapt-button btn-type=\"tertiary\" rx-id=\"collapse-button\" class=\"pr-0\" (click)=\"collapseAll()\">\n      {{ 'com.bmc.arsys.rx.client.common.collapse-all.label' | translate }}\n    </button>\n  </div>\n\n  <div class=\"designer-modal-accordion-wrapper\">\n    <form #optionSelectionForm=\"ngForm\">\n      <adapt-accordion [multiselect]=\"true\" class=\"d-block\">\n        <div\n          *ngFor=\"let option of selectionOptions; let $index = index; trackBy: trackByIndex\"\n          class=\"designer-modal-accordion-content\"\n        >\n          <adapt-accordion-tab\n            class=\"d-block\"\n            [isOpen]=\"option.isOpen\"\n            (open)=\"option.isOpen = true\"\n            (close)=\"option.isOpen = false\"\n          >\n            <div class=\"card-title-text w-100\">\n              <div class=\"designer-modal-card-title-content\">\n                <div class=\"left-header-block pl-0\">\n                  <div class=\"rx-ellipsis\" [title]=\"option.name\" rx-id=\"card-title\">\n                    {{ option.name }}\n                  </div>\n                </div>\n\n                <div class=\"right-header-block\">\n                  <button\n                    class=\"d-icon-left-cross_adapt py-0 pr-3 btn btn-sm\"\n                    adapt-button\n                    size=\"small\"\n                    type=\"button\"\n                    (click)=\"$event.stopPropagation(); removeOption($index)\"\n                    *ngIf=\"!isReadOnly\"\n                  >\n                    {{ 'com.bmc.arsys.rx.client.common.remove.label' | translate }}\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"d-flex\">\n              <div class=\"w-50 pr-2\">\n                <adapt-rx-textfield\n                  maxlength=\"254\"\n                  rx-id=\"option-name\"\n                  label=\"{{ 'com.bmc.arsys.rx.client.common.name.label' | translate }}\"\n                  required=\"true\"\n                  [(ngModel)]=\"option.name\"\n                  [autofocus]=\"true\"\n                  name=\"{{ 'name' + $index }}\"\n                  (ngModelChange)=\"validateIdAndNames('name')\"\n                  [disabled]=\"isReadOnly\"\n                >\n                </adapt-rx-textfield>\n\n                <adapt-alert\n                  *ngIf=\"option.invalidNameError\"\n                  [config]=\"{\n                    variant: 'danger',\n                    dismissible: false,\n                    type: 'inline',\n                    content: option.invalidNameError\n                  }\"\n                ></adapt-alert>\n              </div>\n\n              <div class=\"w-50 pl-2\">\n                <adapt-rx-counter\n                  rx-id=\"option-name\"\n                  label=\"{{ 'com.bmc.arsys.rx.client.selection-field-options-editor.integer-value.label' | translate }}\"\n                  required=\"true\"\n                  [(ngModel)]=\"option.id\"\n                  name=\"{{ 'integerValue' + $index }}\"\n                  (ngModelChange)=\"validateIdAndNames('id')\"\n                  [min]=\"0\"\n                  [max]=\"2147483647\"\n                  [adaptMax]=\"2147483647\"\n                  [adaptMin]=\"0\"\n                  [step]=\"1\"\n                  adaptIntegerNumber\n                  [disabled]=\"isReadOnly\"\n                >\n                </adapt-rx-counter>\n\n                <adapt-alert\n                  *ngIf=\"option.invalidIdError\"\n                  [config]=\"{\n                    variant: 'danger',\n                    dismissible: false,\n                    type: 'inline',\n                    content: option.invalidIdError\n                  }\"\n                ></adapt-alert>\n              </div>\n            </div>\n          </adapt-accordion-tab>\n        </div>\n      </adapt-accordion>\n    </form>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <div *ngIf=\"!isReadOnly\">\n    <button\n      type=\"button\"\n      adapt-button\n      btn-type=\"primary\"\n      rx-id=\"save-button\"\n      (click)=\"saveOptions()\"\n      [disabled]=\"isSaveButtonDisabled()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n\n    <button type=\"button\" adapt-button btn-type=\"secondary\" rx-id=\"cancel-button\" (click)=\"cancel()\">\n      {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n    </button>\n  </div>\n\n  <div *ngIf=\"isReadOnly\">\n    <button type=\"button\" adapt-button btn-type=\"secondary\" rx-id=\"close-button\" (click)=\"cancel()\">\n      {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n    </button>\n  </div>\n</div>\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AdaptButtonComponent, RxSelectionChangeEvent } from '@bmc-ux/adapt-angular';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, forEach, isNil, map, noop, pullAllBy } from 'lodash';\nimport { ValueAccessor } from '../form-builder';\nimport { ISelectOption } from '../form-controls/select-form-control';\nimport { SelectionFieldOptionsEditorComponent } from './selection-field-options-editor.component';\nimport { ISelectionFieldOptionProperties, ISelectionOption } from './selection-field-options.interface';\n\n@Component({\n  selector: 'rx-selection-field-options',\n  templateUrl: './selection-field-options.component.html',\n  styleUrls: ['./selection-field-options.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: SelectionFieldOptionsComponent,\n      multi: true\n    }\n  ]\n})\nexport class SelectionFieldOptionsComponent\n  extends ValueAccessor<ISelectionFieldOptionProperties>\n  implements IFormControlComponent, IFormFocusable\n{\n  @Input()\n  options: ISelectionFieldOptionProperties;\n\n  @ViewChild(AdaptButtonComponent)\n  adaptButtonComponent: AdaptButtonComponent;\n\n  currentOptions: ISelectionOption[] = [];\n  defaultOption: ISelectionOption[] = [];\n\n  constructor(private rxModalService: RxModalService, private translateService: TranslateService) {\n    super();\n  }\n\n  onWriteValue(currentOptionProperties: ISelectionFieldOptionProperties): void {\n    const currentOptionsById = currentOptionProperties?.optionNamesById || this.options.optionNamesById;\n    const currentLabelsById = currentOptionProperties?.optionLabelsById || this.options.optionLabelsById;\n\n    this.currentOptions = map(currentOptionsById, (name, id) => ({\n      name,\n      id: Number(id),\n      stringKey: currentLabelsById[id]\n    }));\n\n    this.defaultOption = !isNil(currentOptionProperties?.defaultValue)\n      ? [find(this.currentOptions, { id: Number(currentOptionProperties.defaultValue) })]\n      : [];\n  }\n\n  openOptionsEditor(): void {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.selection-field-options-editor.title'),\n        content: SelectionFieldOptionsEditorComponent,\n        data: {\n          existingOptions: this.currentOptions,\n          isReadOnly: this.options.isReadOnly\n        }\n      })\n      .then((response: Omit<ISelectionFieldOptionProperties, 'defaultValue'>) => {\n        this.value = {\n          defaultValue: this.value?.defaultValue,\n          optionNamesById: response.optionNamesById,\n          optionLabelsById: response.optionLabelsById\n        };\n\n        setTimeout(() => {\n          this.validateDefaultValue();\n        });\n      })\n      .catch(noop);\n  }\n\n  private fetchValue(options: ISelectionOption[]): ISelectionFieldOptionProperties {\n    const optionNamesById = {};\n    const optionKeysById = {};\n\n    forEach(options, (option: ISelectionOption) => {\n      optionNamesById[option.id] = option.name;\n    });\n\n    forEach(options, (option: ISelectionOption) => {\n      optionKeysById[option.id] = option.stringKey;\n    });\n\n    return { defaultValue: this.value?.defaultValue, optionNamesById, optionLabelsById: optionKeysById };\n  }\n\n  private validateDefaultValue(): void {\n    if (!isNil(this.value?.defaultValue) && !find(this.currentOptions, { id: this.value.defaultValue })) {\n      this.defaultOption = [];\n\n      this.value = {\n        ...this.value,\n        defaultValue: null\n      };\n    }\n  }\n\n  onSelectionChange(event: RxSelectionChangeEvent): void {\n    this.value = {\n      ...this.value,\n      defaultValue: event.options[0]?.id ?? null\n    };\n  }\n\n  focus(): void {\n    this.adaptButtonComponent.elem.nativeElement.focus();\n    this.openOptionsEditor();\n  }\n\n  optionFormatter(option: ISelectOption): string {\n    return option.name;\n  }\n\n  removeOption(option: ISelectionOption): void {\n    pullAllBy(this.currentOptions, [option], 'id');\n    this.validateDefaultValue();\n    this.value = this.fetchValue(this.currentOptions);\n  }\n}\n","<div class=\"d-flex\">\n  <adapt-rx-control-label\n    label=\"{{ 'com.bmc.arsys.rx.client.common.options.label' | translate }}\"\n    [showRequiredLabel]=\"true\"\n  >\n  </adapt-rx-control-label>\n\n  <adapt-button btn-type=\"tertiary\" class=\"d-icon-left-pencil p-0 ml-auto\" (click)=\"openOptionsEditor()\"\n    >{{ 'com.bmc.arsys.rx.client.common.edit.label' | translate }}\n  </adapt-button>\n</div>\n\n<div class=\"form-group tags-wrapper\">\n  <adapt-tag\n    [removable]=\"true\"\n    (remove)=\"removeOption(option)\"\n    *ngFor=\"let option of currentOptions\"\n    [type]=\"'active'\"\n    [disabled]=\"options.isReadOnly\"\n  >\n    {{ option.name }}</adapt-tag\n  >\n\n  <div class=\"fade-line position-absolute w-100 text-center\">\n    <span class=\"d-icon-ellipsis_horizontal\"></span>\n  </div>\n</div>\n\n<adapt-rx-select\n  label=\"{{ 'com.bmc.arsys.rx.client.common.default-value.label' | translate }}\"\n  [options]=\"currentOptions\"\n  (onSelectionChange)=\"onSelectionChange($event)\"\n  [(ngModel)]=\"defaultOption\"\n  [optionFormatter]=\"optionFormatter\"\n  [emptyOption]=\"true\"\n  *ngIf=\"!options.hideDefaultValue\"\n  [disabled]=\"options.isReadOnly\"\n>\n</adapt-rx-select>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptRxCounterModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptTagModule\n} from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SelectionFieldOptionsEditorComponent } from './selection-field-options-editor.component';\nimport { SelectionFieldOptionsComponent } from './selection-field-options.component';\n\n@NgModule({\n  imports: [\n    AdaptAccordionModule,\n    AdaptButtonModule,\n    AdaptRxCounterModule,\n    AdaptRxLabelModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptTagModule,\n    CommonModule,\n    FormsModule,\n    TranslateModule,\n    AdaptAlertModule,\n    AdaptRxValidatorsModule\n  ],\n  declarations: [SelectionFieldOptionsComponent, SelectionFieldOptionsEditorComponent],\n  exports: [SelectionFieldOptionsComponent, SelectionFieldOptionsEditorComponent],\n  entryComponents: [SelectionFieldOptionsComponent, SelectionFieldOptionsEditorComponent]\n})\nexport class RxSelectionFieldOptionsModule {}\n","import { Component } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { forkJoin } from 'rxjs';\nimport {\n  IBundleDescriptor,\n  RX_APPLICATION,\n  RxAngularApplicationService,\n  RxCurrentUserService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { filter, remove, sortBy } from 'lodash';\n\n@Component({\n  selector: 'rx-unknown-application',\n  templateUrl: './unknown-application.component.html',\n  styleUrls: ['./unknown-application.component.scss']\n})\nexport class RxUnknownApplicationComponent {\n  applications$ = this.rxGlobalCacheService.getBundleDescriptors().pipe(\n    switchMap((bundleDescriptors: IBundleDescriptor[]) => {\n      const applicationBundleDescriptors = filter(bundleDescriptors, { isApplication: true, isLicensed: true });\n\n      remove(applicationBundleDescriptors, { id: RX_APPLICATION.settingsBundleId });\n\n      if (!this.rxCurrentUserService.isAdministrator()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.dataloadBundleId });\n      }\n\n      if (!this.rxCurrentUserService.isAdministrator() && !this.rxCurrentUserService.isBusinessAnalyst()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.innovationStudioBundleId });\n      }\n\n      const applications = sortBy(\n        applicationBundleDescriptors,\n        (bundleDescriptor: IBundleDescriptor) => bundleDescriptor.friendlyName\n      ).map((app: IBundleDescriptor) =>\n        this.rxAngularApplicationService.isAngularJsApplication(app.id).pipe(\n          map((isAngularJsApplication: boolean) => {\n            let url: string;\n\n            if (app.hasCustomEntryPoint && app.id !== RX_APPLICATION.innovationStudioBundleId) {\n              url = `/${app.id}/index.html`;\n            } else if (isAngularJsApplication) {\n              url = `/innovationsuite/index.html#/${app.id}`;\n            } else {\n              url = `/helix/index.html#/${app.id}`;\n            }\n\n            return {\n              id: app.id,\n              friendlyName: app.friendlyName,\n              url\n            };\n          })\n        )\n      );\n\n      return forkJoin(applications);\n    }),\n    tap(() => {\n      this.title.setTitle('Helix');\n      this.rxGlobalCacheService.applicationId = 'unknown-application';\n    })\n  );\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxAngularApplicationService: RxAngularApplicationService,\n    private title: Title\n  ) {}\n}\n","<h3>\n  The page you are trying to reach does not exist. Please open one of the applications below and bookmark it for future\n  reference.\n</h3>\n<ul>\n  <li *ngFor=\"let app of applications$ | async\">\n    <a [href]=\"app.url\">{{ app.friendlyName }}</a>\n  </li>\n</ul>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxUnknownApplicationComponent } from './unknown-application.component';\n\n@NgModule({\n  declarations: [RxUnknownApplicationComponent],\n  imports: [CommonModule],\n  exports: [RxUnknownApplicationComponent]\n})\nexport class RxUnknownApplicationModule {}\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { IFieldDefinition, RX_RECORD_DEFINITION, RxLocaleService } from '@helix/platform/record/api';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { flow, mapValues, reject } from 'lodash';\nimport { IPlainObject, RxLocalizationService } from '@helix/platform/shared/api';\nimport { ILocalizedCharacterFieldLocale } from './localized-character-field-value-modal.interface';\nimport { Subscription } from 'rxjs';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { NgForm } from '@angular/forms';\n\n@Component({\n  selector: 'rx-localized-character-field-value-modal',\n  templateUrl: './localized-character-field-value-modal.component.html',\n  styleUrls: ['./localized-character-field-value-modal.component.scss']\n})\nexport class LocalizedCharacterFieldValueModalComponent extends RxModalClass implements OnInit {\n  @ViewChild('localeForm')\n  localeForm: NgForm;\n\n  defaultLocale: ILocalizedCharacterFieldLocale;\n  currentLocale: ILocalizedCharacterFieldLocale;\n  gridLocales: ILocalizedCharacterFieldLocale[];\n  maxLength: number;\n  isCurrentLocaleSupported = true;\n  getLocalesSubscription: Subscription;\n  valueByLocale: IPlainObject;\n  data: IPlainObject = this.activeModalRef.getData();\n  locales: ILocalizedCharacterFieldLocale[];\n  isReadOnly = this.data.isReadOnly;\n\n  private fieldDefinition: IFieldDefinition;\n  private currentLocaleCode: string;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxLocaleService: RxLocaleService,\n    private rxLocalizationService: RxLocalizationService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return this.localeForm.dirty;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.init();\n  }\n\n  init(): void {\n    this.currentLocaleCode = this.rxLocalizationService.currentLocale;\n\n    this.valueByLocale = this.data.valueByLocale || {};\n    this.fieldDefinition = this.data.fieldDefinition || {};\n    this.maxLength = this.fieldDefinition.maxLength || null;\n\n    this.getLocalesSubscription = this.rxLocaleService.getLocales().subscribe(({ data }: any) => {\n      const browserLocale = {\n        name: 'Browser - Locale',\n        code: this.currentLocaleCode,\n        value: this.valueByLocale[this.currentLocaleCode]\n      };\n\n      this.locales = data.map((locale) => {\n        const localeCode = locale[RX_RECORD_DEFINITION.supportedSystemLocales.codeFieldId];\n\n        return {\n          name: locale[RX_RECORD_DEFINITION.supportedSystemLocales.nameFieldId],\n          code: localeCode,\n          value: this.valueByLocale[localeCode] || null\n        };\n      });\n\n      this.defaultLocale = {\n        name: 'English - United States',\n        code: 'en-US',\n        value: this.valueByLocale['en-US']\n      };\n\n      this.currentLocale = this.locales.find((locale) => {\n        return locale.code.toLowerCase() === this.currentLocaleCode.toLowerCase();\n      });\n\n      if (!this.currentLocale || this.currentLocale.code === this.defaultLocale.code) {\n        this.currentLocale = browserLocale;\n        this.isCurrentLocaleSupported = false;\n      }\n\n      this.gridLocales = flow(\n        (locales) => reject(locales, { code: this.defaultLocale.code }),\n        (locales) =>\n          reject(locales, (locale) => {\n            return !this.data.hideCurrentLocale && locale.code === this.currentLocale.code;\n          })\n      )(this.locales);\n    });\n  }\n\n  ok(): void {\n    if (this.isCurrentLocaleSupported) {\n      this.valueByLocale[this.currentLocale.code] = this.currentLocale.value;\n    }\n\n    this.activeModalRef.close({\n      currentLocaleValue:\n        (this.currentLocale.code === this.defaultLocale.code && this.valueByLocale[this.defaultLocale.code]) ||\n        this.valueByLocale[this.currentLocale.code] ||\n        this.valueByLocale[this.currentLocale.code.split('-')[0]] ||\n        this.valueByLocale[this.defaultLocale.code],\n      valueByLocale: mapValues(this.valueByLocale, (value) => value || null)\n    });\n  }\n\n  close(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"modal-body\">\n  <form name=\"localeForm\" novalidate #localeForm=\"ngForm\">\n    <rx-busy-indicator [options]=\"{ busy: getLocalesSubscription }\"></rx-busy-indicator>\n\n    <div class=\"flex-container row\" *ngIf=\"!data.hideCurrentLocale && currentLocale\">\n      <div class=\"col-4\">\n        <adapt-rx-control-label\n          label=\"{{\n            'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.current-locale.label' | translate\n          }}\"\n        >\n        </adapt-rx-control-label>\n        <div class=\"rx-locale-name\" rx-id=\"current-locale-name\">{{ currentLocale?.name }}</div>\n      </div>\n\n      <div class=\"col-2\">\n        <adapt-rx-control-label\n          label=\"{{\n            'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.code.label' | translate\n          }}\"\n        >\n        </adapt-rx-control-label>\n        <div class=\"rx-locale-name\" rx-id=\"current-locale-code\">{{ currentLocale?.code }}</div>\n      </div>\n\n      <div class=\"col-6\">\n        <adapt-rx-control-label\n          label=\"{{\n            'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.value.label' | translate\n          }}\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content:\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.value-for-current-locale.tooltip'\n              | translate,\n            placement: 'auto',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-control-label>\n\n        <adapt-rx-textfield\n          name=\"current-locale\"\n          rx-id=\"current-locale-value\"\n          [disabled]=\"!isCurrentLocaleSupported || isReadOnly\"\n          [maxlength]=\"maxLength\"\n          [(ngModel)]=\"currentLocale.value\"\n          [ariaLabel]=\"\n            'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.value-for-current-locale.label'\n              | translate\n          \"\n        >\n        </adapt-rx-textfield>\n      </div>\n    </div>\n\n    <div class=\"flex-container\">\n      <div class=\"row\">\n        <div class=\"col-4\">\n          <adapt-rx-control-label\n            label=\"{{\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.default-locale.label'\n                | translate\n            }}\"\n          >\n          </adapt-rx-control-label>\n          <div class=\"rx-locale-name\" rx-id=\"default-locale-name\">{{ defaultLocale?.name }}</div>\n        </div>\n\n        <div class=\"col-2\">\n          <adapt-rx-control-label\n            label=\"{{\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.code.label' | translate\n            }}\"\n          >\n          </adapt-rx-control-label>\n\n          <div class=\"rx-locale-name\" rx-id=\"default-locale-code\">{{ defaultLocale?.code }}</div>\n        </div>\n\n        <div class=\"col-6\">\n          <adapt-rx-control-label\n            label=\"{{\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.value.label' | translate\n            }}\"\n          >\n          </adapt-rx-control-label>\n\n          <adapt-rx-textfield\n            name=\"default-locale\"\n            rx-id=\"default-locale-value\"\n            [maxlength]=\"maxLength\"\n            [(ngModel)]=\"valueByLocale[defaultLocale?.code]\"\n            [disabled]=\"isReadOnly\"\n            [ariaLabel]=\"\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.value-for-default-locale.label'\n                | translate\n            \"\n          >\n          </adapt-rx-textfield>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"rx-locale-table container\" *ngIf=\"gridLocales?.length > 0\">\n      <div class=\"rx-locale-table-row row\">\n        <div class=\"rx-locale-table-cell pl-0 col-4\">\n          <h6>\n            {{ 'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.locale.label' | translate }}*\n          </h6>\n        </div>\n\n        <div class=\"rx-locale-table-cell pl-2 col-2\">\n          <h6>\n            {{ 'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.code.label' | translate }}\n          </h6>\n        </div>\n\n        <div class=\"rx-locale-table-cell col-6\">\n          <h6>\n            {{\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.localized-value.label'\n                | translate\n            }}\n          </h6>\n        </div>\n      </div>\n\n      <div class=\"rx-locale-table-row row\" *ngFor=\"let locale of gridLocales\">\n        <div class=\"rx-locale-table-cell pl-0 col-4\">{{ locale.name }}</div>\n        <div class=\"rx-locale-table-cell pl-2 col-2\">{{ locale.code }}</div>\n        <div class=\"rx-locale-table-cell pr-0 col-6\">\n          <adapt-rx-textfield\n            name=\"localized-value {{ locale.code }}\"\n            [maxlength]=\"maxLength\"\n            [(ngModel)]=\"valueByLocale[locale.code]\"\n            [disabled]=\"isReadOnly\"\n            [ariaLabel]=\"\n              'com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.localized-value-for.label'\n                | translate: { locale: locale.name }\n            \"\n          >\n          </adapt-rx-textfield>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    *ngIf=\"!isReadOnly\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [disabled]=\"localeForm.pristine || localeForm.invalid\"\n    (click)=\"ok()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button type=\"button\" adapt-button btn-type=\"secondary\" (click)=\"close()\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptRxFormControlModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { LocalizedCharacterFieldValueModalComponent } from './localized-character-field-value-modal.component';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\n\n@NgModule({\n  imports: [\n    FormsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    AdaptRxFormControlModule,\n    AdaptRxTextfieldModule,\n    AdaptButtonModule,\n    RxBusyIndicatorModule,\n    TranslateModule\n  ],\n  declarations: [LocalizedCharacterFieldValueModalComponent],\n  exports: [LocalizedCharacterFieldValueModalComponent]\n})\nexport class RxLocalizedCharacterFieldValueModalModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["filter","_map","map","merge","_filter","noop"],"mappings":"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"}