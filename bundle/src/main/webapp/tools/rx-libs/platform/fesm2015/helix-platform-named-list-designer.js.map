{"version":3,"file":"helix-platform-named-list-designer.js","sources":["../../../../libs/platform/named-list/designer/named-list-designer/named-list-expression-configurator.class.ts","../../../../libs/platform/named-list/designer/named-list-designer.constant.ts","../../../../libs/platform/named-list/designer/named-list-designer/+state/named-list-designer.selectors.ts","../../../../libs/platform/named-list/designer/named-list-designer/+state/named-list-designer.actions.ts","../../../../libs/platform/named-list/designer/named-list-designer.service.ts","../../../../libs/platform/named-list/designer/named-list-designer/contextual-label-fields/contextual-label-fields-editor/contextual-label-fields-editor-modal.component.ts","../../../../libs/platform/named-list/designer/named-list-designer/contextual-label-fields/contextual-label-fields-editor/contextual-label-fields-editor-modal.component.html","../../../../libs/platform/named-list/designer/named-list-designer/contextual-label-fields/contextual-label-fields.component.ts","../../../../libs/platform/named-list/designer/named-list-designer/contextual-label-fields/contextual-label-fields.component.html","../../../../libs/platform/named-list/designer/named-list-designer/named-list-designer.component.ts","../../../../libs/platform/named-list/designer/named-list-designer/named-list-designer.component.html","../../../../libs/platform/named-list/designer/named-list-designer/+state/named-list-designer.effects.ts","../../../../libs/platform/named-list/designer/named-list-designer/+state/named-list-designer-model.reducer.ts","../../../../libs/platform/named-list/designer/named-list-designer/named-list-designer.module.ts","../../../../libs/platform/named-list/designer/named-list-designer-page/named-list-designer-page.component.ts","../../../../libs/platform/named-list/designer/named-list-designer-page/named-list-designer-page.component.html","../../../../libs/platform/named-list/designer/named-list-designer-page/named-list-designer-page.module.ts","../../../../libs/platform/named-list/designer/helix-platform-named-list-designer.ts"],"sourcesContent":["import { Injector } from '@angular/core';\nimport { INamedListDefinition } from '@helix/platform/named-list/api';\nimport { RX_RECORD_DEFINITION, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\nimport {\n  ExpressionOperatorGroup,\n  ExpressionOperatorRowsByGroup,\n  IDataDictionary,\n  IDataDictionaryBranch,\n  IExpressionConfiguratorDefaultPropertyConfig,\n  RxExpressionConfigurator\n} from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { compact, flow, map as _map } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nexport class RxNamedListExpressionConfigurator extends RxExpressionConfigurator {\n  rxRecordDefinitionCacheService = this.injector.get(RxRecordDefinitionCacheService);\n  translateService = this.injector.get(TranslateService);\n\n  commonDataDictionary$: Observable<IDataDictionary> = of([]);\n\n  private readonly generalGroup: IDataDictionaryBranch = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n    hidden: true,\n    children: [\n      {\n        label: 'NULL',\n        icon: 'd-icon-dollar',\n        expression: '$NULL$'\n      }\n    ]\n  };\n\n  constructor(protected injector: Injector) {\n    super();\n  }\n\n  getDefaultConfig(): IExpressionConfiguratorDefaultPropertyConfig {\n    return {\n      ...super.getDefaultConfig(),\n      operators: ExpressionOperatorRowsByGroup.get(ExpressionOperatorGroup.AllClient)\n    };\n  }\n\n  namedListExpressionDataDictionary(namedListDefinition: INamedListDefinition): Observable<IDataDictionary> {\n    const data: IDataDictionaryBranch = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.named-list-designer.expression-configurator.record-instance.label'\n      ),\n      expanded: true\n    };\n\n    if (namedListDefinition.recordDefinitionName) {\n      return this.rxRecordDefinitionCacheService.getRecordDefinition(namedListDefinition.recordDefinitionName).pipe(\n        map((recordDefinition) => {\n          data.children = recordDefinition\n            ? flow(\n                (fieldDefinitions) =>\n                  _map(fieldDefinitions, (fieldDefinition) => {\n                    if (fieldDefinition.resourceType !== RX_RECORD_DEFINITION.dataTypes.attachment.resourceType) {\n                      return {\n                        label: fieldDefinition.name,\n                        icon: 'd-icon-arrow_right_square_input',\n                        expression: `'${fieldDefinition.name}'`\n                      };\n                    }\n                  }),\n                compact\n              )(recordDefinition.fieldDefinitions)\n            : [];\n\n          return [data, this.generalGroup];\n        })\n      );\n    } else {\n      return of([this.generalGroup]);\n    }\n  }\n}\n","export const RX_NAMED_LIST_DESIGNER = {\n  featureSelector: 'namedListDesigner'\n};\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { INamedListDesignerModel, INamedListDesignerState } from './named-list-designer.types';\nimport { RX_NAMED_LIST_DESIGNER } from '../../named-list-designer.constant';\n\nexport const namedListDesignerStateSelector = createFeatureSelector<INamedListDesignerState>(\n  RX_NAMED_LIST_DESIGNER.featureSelector\n);\n\nexport const namedListDesignerModelSelector = createSelector(\n  namedListDesignerStateSelector,\n  (namedListDesignerState: INamedListDesignerState) => namedListDesignerState.model\n);\n\nexport const bundleIdSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.bundleId\n);\n\nexport const definitionNameSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.definitionName\n);\n\nexport const isDesignModeSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.isDesignMode\n);\n\nexport const definitionModelFromDefinitionSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.definitionModelFromDefinition\n);\n\nexport const definitionModelSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.definitionModel\n);\n\nexport const isDirtySelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.isDirty\n);\n\nexport const savedDefinitionNameSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.savedDefinitionName\n);\n\nexport const originalDefinitionSelector = createSelector(\n  namedListDesignerModelSelector,\n  (namedListDesignerModel: INamedListDesignerModel) => namedListDesignerModel.originalDefinition\n);\n","import { INamedListDefinition } from '@helix/platform/named-list/api';\nimport { createAction, props } from '@ngrx/store';\nimport { INamedListDefinitionModel } from '../../named-list-designer.types';\nimport { IInitNamedListDesignerActionPayload } from './named-list-designer.types';\n\nexport const init = createAction(\n  '[Named List Designer] Init',\n  props<{ payload: IInitNamedListDesignerActionPayload }>()\n);\n\nexport const loadDefinition = createAction('[Named List Designer] Load Definition');\n\nexport const loadDefinitionSuccess = createAction(\n  '[Named List Designer] Load Definition Success',\n  props<{ definition: INamedListDefinition }>()\n);\n\nexport const initDefinitionData = createAction(\n  '[Named List Designer] Init Definition Data',\n  props<{ definition: INamedListDefinition; definitionModel: INamedListDefinitionModel }>()\n);\n\nexport const clearFields = createAction('[Named List Designer] Clear Fields');\n\nexport const markDesignerPristine = createAction('[Named List Designer] Mark Designer Pristine');\n\nexport const markDesignerDirty = createAction('[Named List Designer] Mark Designer Dirty');\n\nexport const updateDefinitionModelFromDesigner = createAction(\n  '[Named List Designer] Update Definition Model From Designer',\n  props<{ definitionModelFromDesigner: INamedListDefinitionModel }>()\n);\n\nexport const revertCustomization = createAction('[Named List Designer] Revert Customization');\n\nexport const toggleDesignMode = createAction('[Named List Designer] Toggle Design Mode');\n\nexport const saveDefinition = createAction('[Named List Designer] Save Definition');\n\nexport const saveDefinitionSuccess = createAction(\n  '[Named List Designer] Save Definition Success',\n  props<{ savedDefinitionName: string }>()\n);\n\nexport const saveDefinitionError = createAction('[Named List Designer] Save Definition Error');\n\nexport const destroy = createAction('[Named List Designer] Destroy');\n","import { Injectable } from '@angular/core';\nimport { INamedListDefinition } from '@helix/platform/named-list/api';\nimport { INamedListDefinitionModel } from './named-list-designer.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NamedListDesignerService {\n  getDefinitionFromDefinitionModel(model: INamedListDefinitionModel, bundleId: string): INamedListDefinition {\n    return {\n      allowOverlay: model.customizationOptions.allowOverlay,\n      description: model.description,\n      fields: model.fields,\n      guid: model.guid,\n      labelFieldId: model.labelFieldId,\n      lastChangedBy: model.lastChangedBy,\n      lastUpdateTime: model.lastUpdateTime,\n      name: model.name ? `${bundleId}:${model.name}` : null,\n      overlayDescriptor: model.customizationOptions.overlayDescriptor,\n      overlayGroupId: model.customizationOptions.overlayGroupId,\n      owner: model.owner,\n      queryCriteria: model.queryCriteria,\n      recordDefinitionName: model.recordDefinitionName,\n      scope: model.customizationOptions.scope,\n      searchBehavior: model.searchBehavior,\n      tags: model.tags,\n      valueFieldId: model.valueFieldId,\n      version: model.version\n    };\n  }\n}\n","import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  Injector,\n  OnInit,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\nimport { AbstractControl, FormArray, FormBuilder, FormGroup, ValidationErrors, ValidatorFn } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ActiveModalRef, AdaptAccordionTabComponent, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { forEach, isNull } from 'lodash';\nimport { map, startWith } from 'rxjs/operators';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { ISelectFormControlOptions } from '@helix/platform/shared/components';\nimport { RxGuidService } from '@helix/platform/utils';\nimport { INamedListField, RX_NAMED_LIST_DEFINITION } from '@helix/platform/named-list/api';\nimport { IContextualLabelFieldsEditorConfig } from '../../../named-list-designer.types';\n\ninterface IAccordionExpansionState {\n  [guid: string]: boolean;\n}\n\ninterface IFieldFormGroupData extends INamedListField {\n  fieldName: string;\n  guid: string;\n  id: number | null;\n}\n\n@Component({\n  selector: 'rx-contextual-label-fields-editor-modal',\n  templateUrl: './contextual-label-fields-editor-modal.component.html',\n  styleUrls: ['./contextual-label-fields-editor-modal.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ContextualLabelFieldsEditorModalComponent extends RxModalClass implements OnInit, AfterViewInit {\n  @ViewChildren(AdaptAccordionTabComponent, { read: ElementRef })\n  private accordionTabEls: QueryList<ElementRef>;\n\n  config: IContextualLabelFieldsEditorConfig = this.activeModalRef.getData();\n  fieldsFormArray: FormArray = this.formBuilder.array([]);\n  accordionExpansionState: IAccordionExpansionState = {};\n\n  fieldSelectionConfig: ISelectFormControlOptions = {\n    label: this.translateService.instant(\n      'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.field.label'\n    ),\n    required: true,\n    options: this.config.options\n  };\n\n  fieldNameById = this.config.options.reduce((result, { id, name }) => {\n    result[id] = name;\n\n    return result;\n  }, {});\n\n  isAddButtonDisabled$ = this.fieldsFormArray.valueChanges.pipe(\n    startWith([]),\n    map(() => this.fieldsFormArray.length >= RX_NAMED_LIST_DEFINITION.maxNumberOfContextualLabelFields)\n  );\n\n  constructor(\n    public activeModalRef: ActiveModalRef,\n    private formBuilder: FormBuilder,\n    private rxGuidService: RxGuidService,\n    private translateService: TranslateService,\n    injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    forEach(this.config.contextualLabelFields, (field: INamedListField, index: number) => {\n      const guid = this.rxGuidService.generate();\n\n      this.accordionExpansionState[guid] = this.config.activeFieldIndex === index;\n\n      this.fieldsFormArray.push(\n        this.getFormGroup({\n          guid,\n          ...field,\n          fieldName: this.fieldNameById[field.id] ?? ''\n        })\n      );\n    });\n\n    if (this.config.isReadOnly) {\n      this.fieldsFormArray.disable();\n    }\n  }\n\n  isDirty(): boolean {\n    return this.fieldsFormArray.dirty;\n  }\n\n  ngAfterViewInit(): void {\n    if (this.config.activeFieldIndex) {\n      this.accordionTabEls.toArray()[this.config.activeFieldIndex].nativeElement.scrollIntoView({\n        block: 'nearest'\n      });\n    }\n  }\n\n  save(): void {\n    const formValues = this.fieldsFormArray.getRawValue();\n    const fields = formValues.map(({ id, searchable, visible }) => ({ id, searchable, visible }));\n\n    this.activeModalRef.close(fields);\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  addField(): void {\n    const guid = this.rxGuidService.generate();\n\n    this.fieldsFormArray.push(\n      this.getFormGroup({\n        guid,\n        fieldName: this.translateService.instant(\n          'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.new-field.title'\n        ),\n        id: null,\n        searchable: false,\n        visible: true\n      })\n    );\n\n    this.accordionExpansionState[guid] = true;\n\n    setTimeout(() => {\n      this.accordionTabEls.last.nativeElement.scrollIntoView({\n        block: 'nearest'\n      });\n    });\n  }\n\n  moveField(fromIndex: number, toIndex: number): void {\n    moveItemInArray(this.fieldsFormArray.controls, fromIndex, toIndex);\n    this.fieldsFormArray.markAsDirty();\n  }\n\n  onFieldDrop(event: CdkDragDrop<any[], any>): void {\n    moveItemInArray(this.fieldsFormArray.controls, event.previousIndex, event.currentIndex);\n    this.fieldsFormArray.markAsDirty();\n  }\n\n  removeField(index: number): void {\n    this.fieldsFormArray.removeAt(index);\n    this.fieldsFormArray.markAsDirty();\n  }\n\n  collapseAll(): void {\n    forEach(this.accordionExpansionState, (value, key) => {\n      this.accordionExpansionState[key] = false;\n    });\n  }\n\n  expandAll(): void {\n    forEach(this.accordionExpansionState, (value, key) => (this.accordionExpansionState[key] = true));\n  }\n\n  onFieldSelect(formGroup: FormGroup, value: string): void {\n    formGroup.get('fieldName').setValue(this.fieldNameById[value]);\n  }\n\n  private getFormGroup(fieldData: IFieldFormGroupData): FormGroup {\n    return this.formBuilder.group({\n      ...fieldData,\n      id: [fieldData.id, [this.isFieldIdUnknown(), this.isDoubleUsedField.bind(this)]]\n    });\n  }\n\n  private isFieldIdUnknown(): ValidatorFn {\n    const fieldIds = this.config.options.map(({ id }) => id);\n\n    return (control: AbstractControl): ValidationErrors | null =>\n      control.parent && !isNull(control.value) && !fieldIds.includes(control.value)\n        ? {\n            unknownField: {\n              message: this.translateService.instant(\n                'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.unknown-field.message'\n              )\n            }\n          }\n        : null;\n  }\n\n  private isDoubleUsedField(control: AbstractControl): ValidationErrors | null {\n    return control.dirty &&\n      control.value &&\n      control.root.value.length > 1 &&\n      control.root.value.some((field: IFieldFormGroupData) => field.id === control.value)\n      ? {\n          duplicated: {\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.duplicated-field.message'\n            )\n          }\n        }\n      : null;\n  }\n}\n","<div class=\"designer-modal-body modal-body d-flex mh-100\">\n  <div class=\"row flex-grow-1 w-100\">\n    <div class=\"d-flex flex-column mh-100 col\">\n      <div class=\"d-flex align-items-start justify-content-between\">\n        <div>\n          <button\n            *ngIf=\"!config.isReadOnly\"\n            class=\"pl-0 pr-0\"\n            rx-id=\"add-contextual-label-field-button\"\n            adapt-button\n            type=\"button\"\n            btn-type=\"tertiary\"\n            [disabled]=\"isAddButtonDisabled$ | async\"\n            (click)=\"addField()\"\n          >\n            <span class=\"d-icon-left-plus_circle\"></span>\n            {{ 'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.add-field.label' | translate }}\n          </button>\n        </div>\n\n        <div *ngIf=\"fieldsFormArray.length\" class=\"btn-group\">\n          <button adapt-button btn-type=\"tertiary\" type=\"button\" rx-id=\"expand-all-button\" (click)=\"expandAll()\">\n            {{ 'com.bmc.arsys.rx.client.common.expand-all.label' | translate }}\n          </button>\n\n          <button adapt-button btn-type=\"tertiary\" type=\"button\" rx-id=\"collapse-all-button\" (click)=\"collapseAll()\">\n            {{ 'com.bmc.arsys.rx.client.common.collapse-all.label' | translate }}\n          </button>\n        </div>\n      </div>\n\n      <div\n        *ngIf=\"fieldsFormArray.length\"\n        id=\"selected-field\"\n        class=\"designer-modal-accordion-wrapper\"\n        cdkDropList\n        (cdkDropListDropped)=\"onFieldDrop($event)\"\n      >\n        <adapt-accordion [multiselect]=\"true\">\n          <div\n            *ngFor=\"\n              let fieldFormGroup of fieldsFormArray.controls;\n              let index = index;\n              let first = first;\n              let last = last\n            \"\n            class=\"designer-modal-accordion-content\"\n            cdkDrag\n            cdkDragLockAxis=\"y\"\n            [cdkDragData]=\"fieldFormGroup\"\n            [cdkDragDisabled]=\"config.isReadOnly\"\n          >\n            <div *ngIf=\"!config.isReadOnly\" class=\"designer-modal-drag-handle d-icon-left-dots\" cdkDragHandle></div>\n            <adapt-accordion-tab\n              class=\"d-block\"\n              [formGroup]=\"fieldFormGroup\"\n              [isOpen]=\"fieldFormGroup.invalid || accordionExpansionState[fieldFormGroup.value.guid]\"\n              (open)=\"accordionExpansionState[fieldFormGroup.value.guid] = true\"\n              (close)=\"accordionExpansionState[fieldFormGroup.value.guid] = false\"\n            >\n              <div class=\"card-title-text w-100\">\n                <div class=\"designer-modal-card-title-content\">\n                  <div class=\"left-header-block\" [class.pl-0]=\"config.isReadOnly\">\n                    <div class=\"rx-ellipsis\" [title]=\"fieldFormGroup.value.fieldName\" rx-id=\"card-title\">\n                      {{ fieldFormGroup.value.fieldName }}\n                    </div>\n                  </div>\n\n                  <div *ngIf=\"!config.isReadOnly\" class=\"right-header-block\">\n                    <div class=\"designer-modal-card-title-index-buttons\">\n                      <button\n                        class=\"d-icon-left-triangle_down rx-button-unstyled\"\n                        type=\"button\"\n                        rx-id=\"move-down-button\"\n                        [disabled]=\"last\"\n                        (click)=\"$event.stopPropagation(); moveField(index, index + 1)\"\n                      ></button>\n                      <button\n                        class=\"d-icon-left-triangle_up rx-button-unstyled\"\n                        type=\"button\"\n                        rx-id=\"move-up-button\"\n                        [disabled]=\"first\"\n                        (click)=\"$event.stopPropagation(); moveField(index, index - 1)\"\n                      ></button>\n                    </div>\n\n                    <button\n                      class=\"d-icon-left-cross_adapt p-1 pr-4 ml-3\"\n                      adapt-button\n                      size=\"small\"\n                      type=\"button\"\n                      rx-id=\"remove-button\"\n                      (click)=\"$event.stopPropagation(); removeField(index)\"\n                    >\n                      {{ 'com.bmc.arsys.rx.client.common.remove.label' | translate }}\n                    </button>\n                  </div>\n                </div>\n              </div>\n\n              <div class=\"row align-items-start px-3\">\n                <rx-select-form-control\n                  [formControl]=\"fieldFormGroup.controls.id\"\n                  rx-id=\"contextual-label-field-id\"\n                  [options]=\"fieldSelectionConfig\"\n                  (ngModelChange)=\"onFieldSelect(fieldFormGroup, $event)\"\n                ></rx-select-form-control>\n                <adapt-rx-checkbox\n                  class=\"ml-5\"\n                  rx-id=\"contextual-label-field-visible\"\n                  label=\"{{\n                    'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.visible-field.label'\n                      | translate\n                  }}\"\n                  formControlName=\"visible\"\n                ></adapt-rx-checkbox>\n                <adapt-rx-checkbox\n                  class=\"ml-5\"\n                  rx-id=\"contextual-label-field-searchable\"\n                  label=\"{{\n                    'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.searchable-field.label'\n                      | translate\n                  }}\"\n                  formControlName=\"searchable\"\n                ></adapt-rx-checkbox>\n              </div>\n            </adapt-accordion-tab>\n          </div>\n        </adapt-accordion>\n      </div>\n\n      <div *ngIf=\"!fieldsFormArray.length\" class=\"d-flex justify-content-center h-100 align-items-center mt-2\">\n        <adapt-empty-state\n          class=\"w-100\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.empty-state.message' | translate\n          }}\"\n          type=\"config\"\n        ></adapt-empty-state>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    *ngIf=\"!config.isReadOnly\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [disabled]=\"fieldsFormArray.invalid || fieldsFormArray.pristine\"\n    (click)=\"save()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button adapt-button btn-type=\"secondary\" type=\"button\" rx-id=\"cancel-button\" (click)=\"cancel()\">\n    {{\n      config.isReadOnly\n        ? ('com.bmc.arsys.rx.client.common.close.label' | translate)\n        : ('com.bmc.arsys.rx.client.common.cancel.label' | translate)\n    }}\n  </button>\n</div>\n","import { ChangeDetectionStrategy, Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { cloneDeep, isNil, noop, without } from 'lodash';\nimport { BehaviorSubject } from 'rxjs';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { IFormFocusable } from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { ValueAccessor } from '@helix/platform/shared/components';\nimport { INamedListField } from '@helix/platform/named-list/api';\nimport { IContextualLabelFieldsEditorConfig } from '../../named-list-designer.types';\nimport { ContextualLabelFieldsEditorModalComponent } from './contextual-label-fields-editor/contextual-label-fields-editor-modal.component';\n\ninterface IViewModel {\n  fieldNames: string[];\n  isEditorDisabled: boolean;\n  isFieldRemovable: boolean;\n}\n\n@Component({\n  selector: 'rx-contextual-label-fields',\n  templateUrl: './contextual-label-fields.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: ContextualLabelFieldsComponent,\n      multi: true\n    }\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ContextualLabelFieldsComponent\n  extends ValueAccessor<INamedListField[]>\n  implements IFormFocusable, OnChanges, OnInit\n{\n  @Input()\n  options: {\n    options: RxSelectOption[];\n  };\n\n  private vmSubject = new BehaviorSubject<IViewModel>({\n    fieldNames: [],\n    isEditorDisabled: true,\n    isFieldRemovable: false\n  });\n\n  vm$ = this.vmSubject.asObservable();\n\n  constructor(private rxModalService: RxModalService, private translateService: TranslateService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.value ??= [];\n    this.updateViewValues();\n  }\n\n  focus(data: { fieldIndex: number }): void {\n    this.openContextualLabelFieldsEditor(data.fieldIndex);\n  }\n\n  onWriteValue(value: INamedListField[]): void {\n    if (!isNil(value)) {\n      this.updateViewValues();\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.updateViewValues();\n  }\n\n  private updateViewValues(): void {\n    const fieldNames = this.value.map(\n      (field: INamedListField) => this.options.options.find(({ id }) => id === field.id)?.name ?? ''\n    );\n\n    this.vmSubject.next({\n      fieldNames,\n      isEditorDisabled: this.isDisabled && !fieldNames.length,\n      isFieldRemovable: !this.isDisabled\n    });\n  }\n\n  openContextualLabelFieldsEditor(activeFieldIndex?: number): void {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.label'\n        ),\n        data: {\n          contextualLabelFields: this.value ? cloneDeep(this.value) : [],\n          options: this.options.options,\n          isReadOnly: this.isDisabled,\n          activeFieldIndex\n        } as IContextualLabelFieldsEditorConfig,\n        content: ContextualLabelFieldsEditorModalComponent,\n        testID: 'edit-contextual-label-fields'\n      })\n      .then((contextualLabelFields: INamedListField[]) => {\n        this.value = contextualLabelFields;\n      })\n      .catch(noop);\n  }\n\n  editContextualLabelField(activeFieldIndex: number): void {\n    this.openContextualLabelFieldsEditor(activeFieldIndex);\n  }\n\n  removeContextualLabelField(activeFieldIndex: number): void {\n    this.value = without(this.value, this.value[activeFieldIndex]);\n  }\n}\n","<ng-container *ngIf=\"vm$ | async as vm\">\n  <div class=\"pb-1\">\n    <adapt-button\n      btn-type=\"tertiary\"\n      rx-id=\"open-contextual-label-fields-editor-link\"\n      class=\"d-icon-plus_circle p-0\"\n      (click)=\"openContextualLabelFieldsEditor()\"\n      [disabled]=\"vm.isEditorDisabled\"\n    >\n      {{ 'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.label' | translate }}\n    </adapt-button>\n    <adapt-icon\n      name=\"question_circle_o\"\n      class=\"ml-2\"\n      placement=\"right\"\n      maxWidth=\"400\"\n      [adaptPopover]=\"\n        'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.tooltip' | translate\n      \"\n    ></adapt-icon>\n  </div>\n\n  <span *ngIf=\"!vm.fieldNames.length\" class=\"text-tertiary\" rx-id=\"contextual-label-empty-state\">{{\n    'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.empty-state.message' | translate\n  }}</span>\n\n  <div *ngIf=\"vm.fieldNames.length\" rx-id=\"contextual-label-fields\">\n    <div\n      *ngFor=\"let fieldName of vm.fieldNames; let index = index\"\n      class=\"d-flex border rounded px-2 mb-1 align-items-center\"\n    >\n      <strong class=\"flex-grow-1\">{{ fieldName }}</strong>\n      <adapt-button\n        btn-type=\"tertiary\"\n        class=\"d-icon-right-pencil p-1\"\n        rx-id=\"edit-button\"\n        (click)=\"editContextualLabelField(index)\"\n      ></adapt-button>\n      <adapt-button\n        btn-type=\"tertiary\"\n        class=\"d-icon-right-cross_adapt p-1\"\n        rx-id=\"remove-button\"\n        *ngIf=\"vm.isFieldRemovable\"\n        (click)=\"removeContextualLabelField(index)\"\n      ></adapt-button>\n    </div>\n  </div>\n</ng-container>\n","import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Injector,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { INamedListDefinition, INamedListField, RX_NAMED_LIST_DEFINITION } from '@helix/platform/named-list/api';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\n\nimport {\n  ExpressionOperatorGroup,\n  ExpressionOperatorRowsByGroup,\n  ICustomizationOptions,\n  IDesignerConfiguration,\n  IFormBuilderConfig,\n  IFormBuilderEvent,\n  IPlainObject,\n  RxFeatureService,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService,\n  Tooltip\n} from '@helix/platform/shared/api';\nimport {\n  CustomizationOptionsComponent,\n  ExpressionFormControlComponent,\n  IDefinitionPickerComponentOptions,\n  IExpressionEditorPropertyChange,\n  IExpressionFormControlOptions,\n  IRevertCustomizationOptions,\n  ISelectFormControlOptions,\n  ISelectOption,\n  ITextFormControlOptions,\n  RX_EXPRESSION_EDITOR,\n  RX_REVERT_CUSTOMIZATION,\n  RxDefinitionPickerComponent,\n  RxDefinitionPickerType,\n  RxExpressionEditorService,\n  RxRevertCustomizationComponent,\n  SelectFormControlComponent,\n  TextFormControlComponent\n} from '@helix/platform/shared/components';\nimport {\n  IBreadcrumbItem,\n  IValidationIssue,\n  IValidationIssueSection,\n  RX_MODAL,\n  RxModalService,\n  ValidationIssueType\n} from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { isEmpty, isNil, some, trim } from 'lodash';\nimport { combineLatest, Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport {\n  filter,\n  map,\n  shareReplay,\n  skip,\n  startWith,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { RxNamedListExpressionConfigurator } from './named-list-expression-configurator.class';\nimport {\n  bundleIdSelector,\n  definitionModelFromDefinitionSelector,\n  definitionModelSelector,\n  isDesignModeSelector,\n  isDirtySelector,\n  originalDefinitionSelector,\n  savedDefinitionNameSelector\n} from './+state/named-list-designer.selectors';\nimport { Store } from '@ngrx/store';\nimport * as NamedListDesignerActions from './+state/named-list-designer.actions';\nimport { INamedListDefinitionModel } from '../named-list-designer.types';\nimport { NamedListDesignerService } from '../named-list-designer.service';\nimport { ContextualLabelFieldsComponent } from './contextual-label-fields/contextual-label-fields.component';\n\n@Component({\n  selector: 'rx-named-list-designer',\n  templateUrl: './named-list-designer.component.html',\n  styleUrls: ['./named-list-designer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RxNamedListDesignerComponent implements OnChanges, OnDestroy, OnInit {\n  @Input()\n  configuration: IDesignerConfiguration;\n\n  @Output()\n  definitionSaved: EventEmitter<string> = new EventEmitter();\n\n  @Output()\n  definitionErrorLoading: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  closeDesigner: EventEmitter<void> = new EventEmitter<void>();\n\n  private bundleId$ = this.store$.select(bundleIdSelector);\n\n  private bundleFriendlyName$: Observable<string> = this.bundleId$.pipe(\n    switchMap((bundleId) => this.rxGlobalCacheService.getBundleFriendlyName(bundleId))\n  );\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private expressionConfigurator = new RxNamedListExpressionConfigurator(this.injector);\n  private isFormInitialized = false;\n  private definitionModel$: Observable<INamedListDefinitionModel> = this.store$.select(definitionModelSelector);\n  private isDirty$: Observable<boolean> = this.store$.select(isDirtySelector);\n  private originalDefinition$ = this.store$.select(originalDefinitionSelector);\n\n  private definitionModelFromDefinition$: Observable<INamedListDefinitionModel> = this.store$.select(\n    definitionModelFromDefinitionSelector\n  );\n\n  private definitionFromDefinitionModel$: Observable<INamedListDefinition> = this.definitionModel$.pipe(\n    withLatestFrom(this.bundleId$),\n    map(([definitionModel, bundleId]) =>\n      this.namedListDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId)\n    )\n  );\n\n  private recordDefinition$: Observable<IRecordDefinition> = this.definitionModel$.pipe(\n    switchMap((definitionModel: INamedListDefinitionModel) =>\n      definitionModel.recordDefinitionName\n        ? this.rxRecordDefinitionCacheService.getRecordDefinition(definitionModel.recordDefinitionName)\n        : of(null)\n    ),\n    shareReplay(1)\n  );\n\n  private textFieldNameOptions$: Observable<RxSelectOption[]> = this.recordDefinition$.pipe(\n    map((recordDefinition: IRecordDefinition) =>\n      recordDefinition\n        ? recordDefinition.fieldDefinitions\n            .filter(({ resourceType }) =>\n              [\n                RX_RECORD_DEFINITION.resourceTypes.character,\n                RX_RECORD_DEFINITION.resourceTypes.localizedCharacter\n              ].includes(resourceType)\n            )\n            .map(({ id, name }) => ({ id, name } as RxSelectOption))\n        : []\n    )\n  );\n\n  private validationIssues$: Observable<IValidationIssueSection[]> = combineLatest([\n    this.definitionModel$,\n    this.textFieldNameOptions$\n  ]).pipe(\n    map(([definitionModel, textFieldNameOptions]: [INamedListDefinitionModel, RxSelectOption[]]) =>\n      this.validate(definitionModel, textFieldNameOptions)\n    ),\n    shareReplay(1)\n  );\n\n  private hasValidationErrors$: Observable<boolean> = this.validationIssues$.pipe(\n    map((issueSections) =>\n      some(issueSections, {\n        issues: [{ type: ValidationIssueType.Error }]\n      })\n    )\n  );\n\n  private areNewDefinitionsAllowed$ = this.bundleId$.pipe(\n    switchMap((bundleId) => this.rxOverlayService.areNewDefinitionsAllowed(bundleId))\n  );\n\n  private isReadOnly$ = this.definitionFromDefinitionModel$.pipe(\n    filter((definition) => !!definition.lastUpdateTime),\n    withLatestFrom(this.areNewDefinitionsAllowed$),\n    map(\n      ([definition, areNewDefinitionsAllowed]) =>\n        !areNewDefinitionsAllowed || !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definition)\n    ),\n    tap((isReadOnly: boolean) => {\n      if (isReadOnly) {\n        this.rxNotificationService.addWarningMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.designer.read-only-definition-warning.message')\n        );\n      }\n    }),\n    startWith(false),\n    shareReplay(1)\n  );\n\n  private isSaveButtonDisabled$: Observable<boolean> = combineLatest([\n    this.hasValidationErrors$,\n    this.isReadOnly$,\n    this.isDirty$\n  ]).pipe(map(([hasValidationErrors, isReadOnly, isDirty]) => hasValidationErrors || isReadOnly || !isDirty));\n\n  private inspectorFocusEditorSubject = new Subject<{ editorName: string; data: IPlainObject }>();\n  inspectorFocusEditor$ = this.inspectorFocusEditorSubject.asObservable();\n\n  private isExistingDefinition$ = this.definitionModelFromDefinition$.pipe(\n    map((model) => Boolean(model.lastUpdateTime))\n  );\n\n  private breadcrumbItems$: Observable<IBreadcrumbItem[]> = this.definitionModel$.pipe(\n    map((model: INamedListDefinitionModel) => [\n      {\n        label:\n          model.name ||\n          `<${this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.new-named-list.label')}>`,\n        data: {}\n      }\n    ])\n  );\n\n  private definitionInspectorConfig$ = combineLatest([\n    this.definitionModel$,\n    this.recordDefinition$,\n    this.textFieldNameOptions$,\n    this.isReadOnly$\n  ]).pipe(\n    map(\n      ([definitionModel, recordDefinition, textFieldNameOptions, isReadOnly]: [\n        INamedListDefinitionModel,\n        IRecordDefinition,\n        RxSelectOption[],\n        boolean\n      ]) => this.getFormBuilderConfig(definitionModel, recordDefinition, textFieldNameOptions, isReadOnly)\n    )\n  );\n\n  private isDesignMode$ = this.store$.select(isDesignModeSelector);\n\n  private definitionForJsonViewer$: Observable<INamedListDefinition> = this.isDesignMode$.pipe(\n    switchMap((isDesignMode: boolean) =>\n      isDesignMode\n        ? of(null)\n        : combineLatest([this.definitionFromDefinitionModel$, this.originalDefinition$]).pipe(\n            map(([definitionFromDefinitionModel, originalDefinition]) => ({\n              ...originalDefinition,\n              ...definitionFromDefinitionModel\n            }))\n          )\n    )\n  );\n\n  vm$ = combineLatest([\n    this.breadcrumbItems$,\n    this.bundleFriendlyName$,\n    this.hasValidationErrors$,\n    this.isExistingDefinition$,\n    this.isSaveButtonDisabled$,\n    this.definitionForJsonViewer$,\n    this.definitionModel$,\n    this.definitionInspectorConfig$,\n    this.validationIssues$\n  ]).pipe(\n    map(\n      ([\n        breadcrumbItems,\n        bundleFriendlyName,\n        hasValidationErrors,\n        isExistingDefinition,\n        isSaveButtonDisabled,\n        definitionForJsonViewer,\n        definitionModel,\n        definitionInspectorConfig,\n        validationIssues\n      ]) => ({\n        breadcrumbItems,\n        bundleFriendlyName,\n        hasValidationErrors,\n        isExistingDefinition,\n        isSaveButtonDisabled,\n        definitionForJsonViewer,\n        definitionModel,\n        definitionInspectorConfig,\n        validationIssues\n      })\n    )\n  );\n\n  constructor(\n    private injector: Injector,\n    private store$: Store<any>,\n    private namedListDesignerService: NamedListDesignerService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxModalService: RxModalService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private translateService: TranslateService,\n    private rxOverlayService: RxOverlayService,\n    private rxNotificationService: RxNotificationService,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxFeatureService: RxFeatureService\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.configuration.currentValue) {\n      this.store$.dispatch(NamedListDesignerActions.init({ payload: this.configuration }));\n    }\n  }\n\n  ngOnInit(): void {\n    this.store$\n      .select(savedDefinitionNameSelector)\n      .pipe(skip(1), filter(Boolean), takeUntil(this.destroyed$))\n      .subscribe((savedDefinitionName: string) => {\n        this.definitionSaved.emit(savedDefinitionName);\n      });\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: 'queryCriteria',\n      dataDictionary$: this.definitionModel$.pipe(\n        switchMap((definitionModel) => this.expressionConfigurator.namedListExpressionDataDictionary(definitionModel))\n      ),\n      operators: ExpressionOperatorRowsByGroup.get(ExpressionOperatorGroup.All)\n    });\n  }\n\n  canDeactivate(): boolean {\n    let canDeactivate = true;\n\n    this.isDirty$.pipe(take(1)).subscribe((isDirty) => {\n      canDeactivate = !isDirty;\n    });\n\n    return canDeactivate;\n  }\n\n  onToggleDesignMode(): void {\n    this.store$.dispatch(NamedListDesignerActions.toggleDesignMode());\n  }\n\n  onCorrectIssue(validationIssue: IValidationIssue): void {\n    this.inspectorFocusEditorSubject.next({\n      editorName: validationIssue.data.propertyName,\n      data: validationIssue.data.data\n    });\n  }\n\n  onModelChange(newDefinitionModel: INamedListDefinitionModel): void {\n    if (this.isFormInitialized) {\n      this.store$.dispatch(\n        NamedListDesignerActions.updateDefinitionModelFromDesigner({\n          definitionModelFromDesigner: newDefinitionModel\n        })\n      );\n    }\n  }\n\n  onFormInitialized(): void {\n    this.isFormInitialized = true;\n  }\n\n  onEditorEvent(event: IFormBuilderEvent): void {\n    if (event.type === RX_REVERT_CUSTOMIZATION.events.revertCustomization) {\n      this.revertCustomization();\n    }\n\n    if (event.type === RX_EXPRESSION_EDITOR.events.openExpressionEditor) {\n      this.openExpressionEditor(event);\n    }\n  }\n\n  openExpressionEditor(event: IFormBuilderEvent): void {\n    this.definitionModel$.pipe(take(1)).subscribe((definitionModel) => {\n      this.rxExpressionEditorService\n        .openEditor({\n          property: {\n            path: event.payload.propertyPath,\n            value: definitionModel.queryCriteria,\n            label: event.payload.propertyLabel\n          },\n          isReadOnly: event.payload.isReadOnly,\n          expressionConfigurator: this.expressionConfigurator,\n          legend: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field-name.label'),\n              icon: 'd-icon-arrow_right_square_input'\n            }\n          ]\n        })\n        .subscribe((expression: IExpressionEditorPropertyChange) => {\n          this.store$.dispatch(\n            NamedListDesignerActions.updateDefinitionModelFromDesigner({\n              definitionModelFromDesigner: { queryCriteria: expression.value }\n            })\n          );\n        });\n    });\n  }\n\n  revertCustomization(): void {\n    this.store$.dispatch(NamedListDesignerActions.revertCustomization());\n  }\n\n  onSave(): void {\n    this.store$.dispatch(NamedListDesignerActions.saveDefinition());\n  }\n\n  private validate(\n    definitionModel: INamedListDefinitionModel,\n    textFieldNameOptions: RxSelectOption[]\n  ): IValidationIssueSection[] {\n    const validationIssues: IValidationIssue[] = [];\n\n    if (isEmpty(trim(definitionModel.name))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label')\n          }\n        ),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    } else if (!RX_RECORD_DEFINITION.validDefinitionNameRegex.test(definitionModel.name)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.named-list-designer.name-validation.message'\n        ),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    }\n\n    if (isEmpty(trim(definitionModel.recordDefinitionName))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant(\n              'com.bmc.arsys.rx.client.named-list-designer.record-definition-field.label'\n            )\n          }\n        ),\n        data: {\n          propertyName: 'recordDefinitionName'\n        }\n      });\n    }\n\n    if (isNil(definitionModel.labelFieldId)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant(\n              'com.bmc.arsys.rx.client.named-list-designer.display-name-field.label'\n            )\n          }\n        ),\n        data: {\n          propertyName: 'labelFieldId'\n        }\n      });\n    }\n\n    if (isNil(definitionModel.valueFieldId)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.value-field.label')\n          }\n        ),\n        data: {\n          propertyName: 'valueFieldId'\n        }\n      });\n    }\n\n    if (definitionModel.recordDefinitionName) {\n      definitionModel.fields?.forEach((field: INamedListField, index: number) => {\n        if (!textFieldNameOptions.some(({ id }) => id === field.id)) {\n          validationIssues.push({\n            type: ValidationIssueType.Error,\n            description: this.translateService.instant(\n              'com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.unknown-field.message'\n            ),\n            data: {\n              propertyName: 'fields',\n              data: {\n                fieldIndex: index\n              }\n            }\n          });\n        }\n      });\n    }\n\n    return validationIssues.length\n      ? [\n          {\n            title: this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.new-named-list.label'),\n            issues: validationIssues\n          }\n        ]\n      : [];\n  }\n\n  private getFieldNameOptions(recordDefinition: IRecordDefinition): ISelectOption[] {\n    return recordDefinition.fieldDefinitions.map(({ id, name }) => ({ id, name } as ISelectOption));\n  }\n\n  private getFormBuilderConfig(\n    definitionModel: INamedListDefinitionModel,\n    recordDefinition: IRecordDefinition,\n    textFieldNameOptions: RxSelectOption[],\n    isReadOnly: boolean\n  ): IFormBuilderConfig {\n    return [\n      {\n        controls: [\n          {\n            name: 'name',\n            component: TextFormControlComponent,\n            isDisabled: Boolean(definitionModel.lastUpdateTime),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n              required: true\n            } as ITextFormControlOptions\n          },\n          {\n            name: 'recordDefinitionName',\n            component: RxDefinitionPickerComponent,\n            isDisabled: isReadOnly,\n            options: {\n              definitionType: RxDefinitionPickerType.Record,\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.named-list-designer.record-definition-field.label'\n              ),\n              required: true,\n              beforeValueChange: (oldValue: string): Promise<boolean> => {\n                if (\n                  Boolean(oldValue) &&\n                  (definitionModel.labelFieldId ||\n                    definitionModel.valueFieldId ||\n                    definitionModel.fields?.length ||\n                    definitionModel.queryCriteria)\n                ) {\n                  const message = this.rxFeatureService.isFeatureEnabled('DRD21-43103')\n                    ? this.translateService.instant(\n                        'com.bmc.arsys.rx.client.named-list-designer.clear-values-confirmation.message'\n                      )\n                    : 'Display name field, Value field, and Filter expression will be cleared. Do you want to continue?';\n\n                  return this.rxModalService\n                    .confirm({\n                      title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                      modalStyle: RX_MODAL.modalStyles.warning,\n                      message\n                    })\n                    .then((isConfirmed) => {\n                      if (isConfirmed) {\n                        setTimeout(() => {\n                          this.store$.dispatch(NamedListDesignerActions.clearFields());\n                        });\n                      }\n\n                      return isConfirmed;\n                    });\n                }\n\n                return Promise.resolve(true);\n              }\n            } as IDefinitionPickerComponentOptions\n          },\n          {\n            name: 'queryCriteria',\n            component: ExpressionFormControlComponent,\n            isDisabled: !definitionModel.recordDefinitionName || isReadOnly,\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.named-list-designer.filter-expression-field.label'\n              ),\n              tooltip: new Tooltip(\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.named-list-designer.filter-expression-field.tooltip'\n                )\n              ),\n              dataDictionary$: this.expressionConfigurator.getDataDictionary('queryCriteria'),\n              operators: this.expressionConfigurator.getOperators()\n            } as IExpressionFormControlOptions\n          },\n          {\n            name: 'searchBehavior',\n            component: SelectFormControlComponent,\n            isDisabled: isReadOnly,\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.named-list-designer.search-behavior-field.label'\n              ),\n              tooltip: new Tooltip(\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.named-list-designer.search-behavior-field.tooltip'\n                )\n              ),\n              required: true,\n              options: [\n                {\n                  id: RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.contains,\n                  name: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.named-list-designer.search-behavior.contains.label'\n                  )\n                },\n                {\n                  id: RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.startsWith,\n                  name: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.named-list-designer.search-behavior.starts-with.label'\n                  )\n                },\n                {\n                  id: RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.exactMatch,\n                  name: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.named-list-designer.search-behavior.exact-match.label'\n                  )\n                }\n              ],\n              emptyOption: false,\n              sortAlphabetically: false\n            } as ISelectFormControlOptions,\n            hidden: !this.rxFeatureService.isFeatureEnabled('DRD21-43015')\n          },\n          {\n            name: 'labelFieldId',\n            component: SelectFormControlComponent,\n            isDisabled: !definitionModel.recordDefinitionName || isReadOnly,\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.named-list-designer.display-name-field.label'\n              ),\n              required: true,\n              tooltip: new Tooltip(\n                this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.display-name-field.tooltip')\n              ),\n              emptyOption: true,\n              options: recordDefinition ? this.getFieldNameOptions(recordDefinition) : []\n            } as ISelectFormControlOptions\n          },\n          {\n            name: 'valueFieldId',\n            component: SelectFormControlComponent,\n            isDisabled: !definitionModel.recordDefinitionName || isReadOnly,\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.value-field.label'),\n              required: true,\n              tooltip: new Tooltip(\n                this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.value-field.tooltip')\n              ),\n              emptyOption: true,\n              options: recordDefinition ? this.getFieldNameOptions(recordDefinition) : []\n            } as ISelectFormControlOptions\n          },\n          {\n            name: 'fields',\n            component: ContextualLabelFieldsComponent,\n            isDisabled: !definitionModel.recordDefinitionName || isReadOnly,\n            options: {\n              options: textFieldNameOptions\n            },\n            hidden: !this.rxFeatureService.isFeatureEnabled('DRD21-43103')\n          },\n          {\n            component: RxRevertCustomizationComponent,\n            options: {\n              allowOverlay: definitionModel.customizationOptions.allowOverlay,\n              scope: definitionModel.customizationOptions.scope,\n              overlayGroupId: definitionModel.customizationOptions.overlayGroupId,\n              overlayDescriptor: definitionModel.customizationOptions.overlayDescriptor\n            } as IRevertCustomizationOptions\n          },\n          {\n            name: 'customizationOptions',\n            component: CustomizationOptionsComponent,\n            isDisabled: isReadOnly,\n            options: {\n              definitionTypeDisplayName: this.translateService\n                .instant('com.bmc.arsys.rx.client.named-list-definition.label')\n                .toLowerCase(),\n              allowOverlay: definitionModel.customizationOptions.allowOverlay,\n              scope: definitionModel.customizationOptions.scope,\n              overlayGroupId: definitionModel.customizationOptions.overlayGroupId,\n              overlayDescriptor: definitionModel.customizationOptions.overlayDescriptor\n            } as ICustomizationOptions\n          }\n        ]\n      }\n    ] as IFormBuilderConfig;\n  }\n\n  ngOnDestroy(): void {\n    this.inspectorFocusEditorSubject.complete();\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.store$.dispatch(NamedListDesignerActions.destroy());\n  }\n}\n","<ng-container *ngIf=\"vm$ | async as vm\">\n  <rx-designer-header\n    [bundleName]=\"vm.bundleFriendlyName\"\n    [breadcrumbItems]=\"vm.breadcrumbItems\"\n    [isSaveButtonDisabled]=\"vm.isSaveButtonDisabled\"\n    (closeDesigner)=\"closeDesigner.emit()\"\n    (save)=\"onSave()\"\n    (toggleDesignMode)=\"onToggleDesignMode()\"\n    [isDesignMode]=\"!vm.definitionForJsonViewer\"\n  ></rx-designer-header>\n\n  <div class=\"rx-designer-component\" [hidden]=\"vm.definitionForJsonViewer\">\n    <adapt-sidebar position=\"right\" panelWidth=\"280px\" [openedId]=\"0\">\n      <adapt-sidebar-item\n        headerTitle=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        tooltipText=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        rx-id=\"validation-issues\"\n        [iconClass]=\"vm.hasValidationErrors ? 'd-icon-exclamation_triangle text-danger' : 'd-icon-exclamation_triangle'\"\n      >\n        <rx-validation-issues\n          [definitionTypeDisplayName]=\"'com.bmc.arsys.rx.client.common.named-list-definition.label' | translate\"\n          [issueSections]=\"vm.validationIssues\"\n          (correctIssue)=\"onCorrectIssue($event)\"\n        ></rx-validation-issues>\n      </adapt-sidebar-item>\n\n      <div class=\"main rx-designer-container h-100\">\n        <h1 class=\"mt-0\">\n          {{\n            vm.isExistingDefinition\n              ? ('com.bmc.arsys.rx.client.named-list-designer.edit-named-list.title' | translate)\n              : ('com.bmc.arsys.rx.client.named-list-designer.create-named-list.title' | translate)\n          }}\n        </h1>\n\n        <rx-form-builder\n          [config]=\"vm.definitionInspectorConfig\"\n          [model]=\"vm.definitionModel\"\n          (editorEvent)=\"onEditorEvent($event)\"\n          [focusEditor$]=\"inspectorFocusEditor$\"\n          (formInitialized)=\"onFormInitialized()\"\n          (modelChange)=\"onModelChange($event)\"\n        ></rx-form-builder>\n      </div>\n    </adapt-sidebar>\n  </div>\n\n  <adapt-code-viewer\n    *ngIf=\"vm.definitionForJsonViewer\"\n    [code]=\"vm.definitionForJsonViewer | json\"\n    [lang]=\"'javascript'\"\n    [hasToolbar]=\"false\"\n    [theme]=\"'light'\"\n    class=\"full-size\"\n  ></adapt-code-viewer>\n</ng-container>\n","import { HttpResponse } from '@angular/common/http';\nimport { ErrorHandler, Injectable } from '@angular/core';\nimport { INamedListDefinition, RxNamedListDefinitionService } from '@helix/platform/named-list/api';\nimport {\n  RxComponentCanDeactivateGuard,\n  RxDefinitionNameService,\n  RxDefinitionUpdateService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { last } from 'lodash';\nimport { of } from 'rxjs';\nimport { catchError, filter, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { NamedListDesignerService } from '../../named-list-designer.service';\nimport * as NamedListDesignerActions from './named-list-designer.actions';\nimport {\n  bundleIdSelector,\n  definitionModelSelector,\n  definitionNameSelector,\n  originalDefinitionSelector\n} from './named-list-designer.selectors';\n\n@Injectable()\nexport class NamedListDesignerEffects {\n  constructor(\n    private store$: Store<any>,\n    private actions$: Actions,\n    private errorHandler: ErrorHandler,\n    private rxDefinitionUpdateService: RxDefinitionUpdateService,\n    private namedListDesignerService: NamedListDesignerService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxNamedListDefinitionService: RxNamedListDefinitionService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxComponentCanDeactivateGuard: RxComponentCanDeactivateGuard\n  ) {}\n\n  initNamedListDesigner$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.init),\n      map((action) => NamedListDesignerActions.loadDefinition())\n    )\n  );\n\n  loadDefinition$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.loadDefinition),\n      withLatestFrom(this.store$.select(definitionNameSelector)),\n      switchMap(([action, definitionName]) =>\n        definitionName\n          ? this.rxNamedListDefinitionService.get(definitionName)\n          : this.rxNamedListDefinitionService.getNew()\n      ),\n      map((definition: INamedListDefinition) =>\n        NamedListDesignerActions.loadDefinitionSuccess({\n          definition\n        })\n      )\n    )\n  );\n\n  loadDefinitionSuccess$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.loadDefinitionSuccess),\n      map((action) => {\n        let definitionModelFromDefinition = {\n          version: action.definition.version,\n          lastUpdateTime: action.definition.lastUpdateTime,\n          lastChangedBy: action.definition.lastChangedBy,\n          owner: action.definition.owner,\n          name: this.rxDefinitionNameService.getDisplayName(action.definition.name),\n          tags: action.definition.tags,\n          description: action.definition.description,\n          guid: action.definition.guid,\n          recordDefinitionName: action.definition.recordDefinitionName,\n          queryCriteria: action.definition.queryCriteria,\n          searchBehavior: action.definition.searchBehavior,\n          labelFieldId: action.definition.labelFieldId,\n          valueFieldId: action.definition.valueFieldId,\n          fields: action.definition.fields,\n          customizationOptions: {\n            isDisabled: false,\n            definitionTypeDisplayName: null,\n            allowOverlay: action.definition.allowOverlay,\n            scope: action.definition.scope,\n            overlayGroupId: action.definition.overlayGroupId,\n            overlayDescriptor: action.definition.overlayDescriptor\n          }\n        };\n\n        return NamedListDesignerActions.initDefinitionData({\n          definition: action.definition,\n          definitionModel: definitionModelFromDefinition\n        });\n      })\n    )\n  );\n\n  revertCustomization$ = createEffect(\n    () =>\n      this.actions$.pipe(\n        ofType(NamedListDesignerActions.revertCustomization),\n        withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(bundleIdSelector)),\n        switchMap(([_, definitionModel, bundleId]) =>\n          this.rxNamedListDefinitionService.revertCustomization(`${bundleId}:${definitionModel.name}`)\n        ),\n        tap(() => {\n          this.rxComponentCanDeactivateGuard.disable();\n          window.location.reload();\n        })\n      ),\n    { dispatch: false }\n  );\n\n  markPristine$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.initDefinitionData, NamedListDesignerActions.saveDefinition),\n      map(() => NamedListDesignerActions.markDesignerPristine())\n    )\n  );\n\n  markDirty$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.updateDefinitionModelFromDesigner, NamedListDesignerActions.saveDefinitionError),\n      map(() => NamedListDesignerActions.markDesignerDirty())\n    )\n  );\n\n  saveDefinition$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.saveDefinition),\n      withLatestFrom(\n        this.store$.select(definitionModelSelector),\n        this.store$.select(originalDefinitionSelector),\n        this.store$.select(bundleIdSelector)\n      ),\n      switchMap(([_, definitionModel, originalDefinition, bundleId]) => {\n        const definition = {\n          ...originalDefinition,\n          ...this.namedListDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId)\n        };\n\n        return (\n          definition.lastUpdateTime\n            ? this.rxDefinitionUpdateService.execute(\n                this.rxNamedListDefinitionService.update.bind(this.rxNamedListDefinitionService, definition)\n              )\n            : this.rxNamedListDefinitionService.create(definition)\n        ).pipe(\n          map((response: HttpResponse<any>) => {\n            const definitionName =\n              decodeURIComponent(last(response?.headers.get('location').split('/')) || '') ||\n              this.rxDefinitionNameService.getDefinitionName(bundleId, definitionModel.name);\n\n            return NamedListDesignerActions.saveDefinitionSuccess({\n              savedDefinitionName: definitionName\n            });\n          }),\n          catchError((error) => {\n            this.errorHandler.handleError(error);\n\n            return of(NamedListDesignerActions.saveDefinitionError());\n          })\n        );\n      })\n    )\n  );\n\n  saveDefinitionSuccess$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(NamedListDesignerActions.saveDefinitionSuccess),\n      withLatestFrom(this.store$.select(definitionNameSelector)),\n      tap(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.designer.definition-saved-successfully.message', {\n            definitionTypeDisplayName: this.translateService.instant(\n              'com.bmc.arsys.rx.client.common.named-list-definition.label'\n            )\n          })\n        );\n      }),\n      filter(([action, definitionName]) => !!definitionName),\n      map(() => NamedListDesignerActions.loadDefinition())\n    )\n  );\n}\n","import { createReducer, on } from '@ngrx/store';\nimport { INamedListDesignerModel } from './named-list-designer.types';\nimport * as NamedListDesignerActions from './named-list-designer.actions';\nimport { INamedListDefinitionModel } from '../../named-list-designer.types';\n\nconst initialModel: INamedListDefinitionModel = {\n  name: null,\n  customizationOptions: {\n    allowOverlay: false,\n    overlayGroupId: null,\n    overlayDescriptor: null,\n    scope: 'BUNDLE',\n    isDisabled: false,\n    definitionTypeDisplayName: null\n  }\n};\n\nexport const initialState: INamedListDesignerModel = {\n  bundleId: null,\n  definitionName: null,\n  isDesignMode: true,\n  definitionModel: initialModel,\n  definitionModelFromDefinition: initialModel,\n  isDirty: false,\n  savedDefinitionName: null,\n  originalDefinition: null\n};\n\nconst reducer = createReducer(\n  initialState,\n\n  on(NamedListDesignerActions.init, (state: INamedListDesignerModel, { payload }) => ({\n    ...initialState,\n    bundleId: payload.bundleId,\n    definitionName: payload.definitionName\n  })),\n\n  on(\n    NamedListDesignerActions.initDefinitionData,\n    (state: INamedListDesignerModel, { definition, definitionModel }) => ({\n      ...state,\n      definitionModel,\n      definitionModelFromDefinition: definitionModel,\n      originalDefinition: definition\n    })\n  ),\n\n  on(NamedListDesignerActions.clearFields, (state: INamedListDesignerModel) => ({\n    ...state,\n    definitionModel: {\n      ...state.definitionModel,\n      fields: [],\n      queryCriteria: null,\n      labelFieldId: null,\n      valueFieldId: null\n    }\n  })),\n\n  on(NamedListDesignerActions.markDesignerPristine, (state: INamedListDesignerModel) => ({\n    ...state,\n    isDirty: false\n  })),\n\n  on(NamedListDesignerActions.markDesignerDirty, (state: INamedListDesignerModel) => ({\n    ...state,\n    isDirty: true\n  })),\n\n  on(NamedListDesignerActions.toggleDesignMode, (state: INamedListDesignerModel) => ({\n    ...state,\n    isDesignMode: !state.isDesignMode\n  })),\n\n  on(\n    NamedListDesignerActions.updateDefinitionModelFromDesigner,\n    (state: INamedListDesignerModel, { definitionModelFromDesigner }) => ({\n      ...state,\n      definitionModel: { ...state.definitionModel, ...definitionModelFromDesigner }\n    })\n  ),\n\n  on(NamedListDesignerActions.saveDefinitionSuccess, (state: INamedListDesignerModel, { savedDefinitionName }) => ({\n    ...state,\n    savedDefinitionName\n  })),\n\n  on(NamedListDesignerActions.destroy, (state: INamedListDesignerModel) => ({\n    ...initialState\n  }))\n);\n\nexport function namedListDesignerModelReducer(state, action) {\n  return reducer(state, action);\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptButtonModule,\n  AdaptCodeViewerModule,\n  AdaptEmptyStateModule,\n  AdaptIconModule,\n  AdaptPopoverModule,\n  AdaptRxFormsModule,\n  AdaptSidebarModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport {\n  CustomizationOptionsModule,\n  ExpressionFormControlModule,\n  RxDefinitionPickerModule,\n  RxDesignerHeaderModule,\n  RxFormBuilderModule,\n  RxRevertCustomizationModule,\n  SelectFormControlModule\n} from '@helix/platform/shared/components';\n\nimport { RxValidationIssuesModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxNamedListDesignerComponent } from './named-list-designer.component';\nimport { StoreModule } from '@ngrx/store';\nimport { RX_NAMED_LIST_DESIGNER } from '../named-list-designer.constant';\nimport { EffectsModule } from '@ngrx/effects';\nimport { NamedListDesignerEffects } from './+state/named-list-designer.effects';\nimport { namedListDesignerModelReducer } from './+state/named-list-designer-model.reducer';\nimport { ContextualLabelFieldsComponent } from './contextual-label-fields/contextual-label-fields.component';\nimport { ContextualLabelFieldsEditorModalComponent } from './contextual-label-fields/contextual-label-fields-editor/contextual-label-fields-editor-modal.component';\n\n@NgModule({\n  declarations: [\n    ContextualLabelFieldsComponent,\n    ContextualLabelFieldsEditorModalComponent,\n    RxNamedListDesignerComponent\n  ],\n  imports: [\n    AdaptAccordionModule,\n    AdaptButtonModule,\n    AdaptCodeViewerModule,\n    AdaptEmptyStateModule,\n    AdaptIconModule,\n    AdaptPopoverModule,\n    AdaptSidebarModule,\n    AdaptTabsModule,\n    AdaptRxFormsModule,\n    CommonModule,\n    DragDropModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RxDesignerHeaderModule,\n    RxFormBuilderModule,\n    RxValidationIssuesModule,\n    RxDefinitionPickerModule,\n    ExpressionFormControlModule,\n    SelectFormControlModule,\n    CustomizationOptionsModule,\n    RxRevertCustomizationModule,\n    TranslateModule,\n    StoreModule.forFeature(RX_NAMED_LIST_DESIGNER.featureSelector, {\n      model: namedListDesignerModelReducer\n    }),\n    EffectsModule.forFeature([NamedListDesignerEffects])\n  ],\n  exports: [RxNamedListDesignerComponent]\n})\nexport class RxNamedListDesignerModule {}\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  IComponentCanDeactivate,\n  IDesignerConfiguration,\n  RX_APPLICATION,\n  RxBundleCacheService,\n  RxComponentCanDeactivateGuard,\n  RxDefinitionNameService,\n  RxPageTitleService\n} from '@helix/platform/shared/api';\nimport { RxUtilityModalsService } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subscription } from 'rxjs';\nimport { RxNamedListDesignerComponent } from '../named-list-designer';\n\n@Component({\n  selector: 'rx-named-list-designer-page',\n  templateUrl: './named-list-designer-page.component.html'\n})\nexport class RxNamedListDesignerPageComponent implements OnInit, OnDestroy, IComponentCanDeactivate {\n  configuration: IDesignerConfiguration;\n  isInitialized = false;\n\n  private definitionsRoute = 'named-list-definitions';\n  private pageTitle = this.translateService.instant('com.bmc.arsys.rx.client.named-list-designer.title');\n\n  private isNewDefinition: boolean;\n  private subscription: Subscription;\n\n  @ViewChild(RxNamedListDesignerComponent)\n  private designerComponent: RxNamedListDesignerComponent;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxComponentCanDeactivateGuard: RxComponentCanDeactivateGuard,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxPageTitleService: RxPageTitleService,\n    private rxUtilityModalsService: RxUtilityModalsService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxComponentCanDeactivateGuard.setPageComponent(this);\n\n    this.subscription = this.activatedRoute.params.subscribe(({ definitionName, bundleId }) => {\n      this.rxBundleCacheService.bundleId = bundleId || this.rxDefinitionNameService.getBundleId(definitionName);\n\n      this.isInitialized = true;\n      this.isNewDefinition = !definitionName;\n\n      this.configuration = {\n        bundleId: this.rxBundleCacheService.bundleId,\n        definitionName\n      };\n\n      this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(definitionName), this.pageTitle]);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.rxComponentCanDeactivateGuard.setPageComponent(null);\n  }\n\n  canDeactivate(): boolean {\n    return this.designerComponent?.canDeactivate() ?? true;\n  }\n\n  confirmDeactivation(): Promise<boolean> {\n    return this.rxUtilityModalsService.confirmUnsavedChanges();\n  }\n\n  onCloseDesigner(): void {\n    this.router.navigate([\n      RX_APPLICATION.innovationStudioBundleId,\n      this.rxBundleCacheService.bundleId,\n      this.definitionsRoute\n    ]);\n  }\n\n  onDefinitionSaved(definitionName: string): void {\n    if (this.isNewDefinition) {\n      this.router.navigate(['edit', definitionName], { relativeTo: this.activatedRoute.parent });\n    }\n  }\n\n  onDefinitionErrorLoading(): void {\n    this.router.navigate(['new2', this.rxBundleCacheService.bundleId], { relativeTo: this.activatedRoute.parent });\n  }\n}\n","<rx-named-list-designer\n  *ngIf=\"isInitialized\"\n  [configuration]=\"configuration\"\n  (definitionSaved)=\"onDefinitionSaved($event)\"\n  (definitionErrorLoading)=\"onDefinitionErrorLoading()\"\n  (closeDesigner)=\"onCloseDesigner()\"\n></rx-named-list-designer>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RxNamedListDesignerModule } from '../named-list-designer';\nimport { RxNamedListDesignerPageComponent } from './named-list-designer-page.component';\n\n@NgModule({\n  declarations: [RxNamedListDesignerPageComponent],\n  imports: [CommonModule, RxNamedListDesignerModule],\n  exports: [RxNamedListDesignerPageComponent]\n})\nexport class RxNamedListDesignerPageModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["_map","NamedListDesignerActions.init","NamedListDesignerActions.toggleDesignMode","NamedListDesignerActions.updateDefinitionModelFromDesigner","NamedListDesignerActions.revertCustomization","NamedListDesignerActions.saveDefinition","NamedListDesignerActions.clearFields","NamedListDesignerActions.destroy","NamedListDesignerActions.loadDefinition","NamedListDesignerActions.loadDefinitionSuccess","NamedListDesignerActions.initDefinitionData","NamedListDesignerActions.markDesignerPristine","NamedListDesignerActions.saveDefinitionError","NamedListDesignerActions.markDesignerDirty","NamedListDesignerActions.saveDefinitionSuccess"],"mappings":"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"}