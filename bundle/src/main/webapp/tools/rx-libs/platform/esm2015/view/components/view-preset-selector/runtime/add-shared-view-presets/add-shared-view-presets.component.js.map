{"version":3,"file":"add-shared-view-presets.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/platform/view/components/view-preset-selector/runtime/add-shared-view-presets/add-shared-view-presets.component.ts","../../../../../../../../../libs/platform/view/components/view-preset-selector/runtime/add-shared-view-presets/add-shared-view-presets.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,uBAAuB,EAAE,SAAS,EAAE,QAAQ,EAAU,SAAS,EAAE,MAAM,eAAe,CAAC;AAChG,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvE,OAAO,EAAc,EAAE,EAAE,MAAM,MAAM,CAAC;AAEtC,OAAO,EAAE,mBAAmB,EAAE,MAAM,oDAAoD,CAAC;AACzF,OAAO,EAAE,gBAAgB,EAAE,MAAM,4DAA4D,CAAC;AAC9F,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAElE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AAEvD,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAErC,OAAO,EAAE,OAAO,EAAE,MAAM,QAAQ,CAAC;;;;;;AAOjC,MAAM,OAAO,6BAA8B,SAAQ,YAAY;IAoD7D,YACU,cAA8B,EAC5B,QAAkB,EACpB,gBAAkC;QAE1C,KAAK,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QAJxB,mBAAc,GAAd,cAAc,CAAgB;QAC5B,aAAQ,GAAR,QAAQ,CAAU;QACpB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAnD5C,sBAAiB,GAAkC,EAAE,CAAC;YACpD,OAAO,EAAE;gBACP;oBACE,OAAO,EAAE,OAAO;oBAChB,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,mHAAmH,CACpH;iBACF;gBACD;oBACE,OAAO,EAAE,eAAe;oBACxB,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,iHAAiH,CAClH;iBACF;aACF;YACD,eAAe,EAAE,KAAK;YACtB,kBAAkB,EAAE,gBAAgB,CAAC,QAAQ;YAC7C,aAAa,EAAE,MAAM;YACrB,MAAM,EAAE,WAAW;YACnB,aAAa,EAAE;gBACb,MAAM,EAAE,KAAK;gBACb,kBAAkB,EAAE,KAAK;aAC1B;YACD,oBAAoB,EAAE,KAAK;YAC3B,mBAAmB,EAAE,GAAG,EAAE,CACxB,EAAE,CAAC;gBACD,gBAAgB,EAAE;oBAChB;wBACE,EAAE,EAAE,OAAO;wBACX,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,SAAS;qBAC3D;oBACD;wBACE,EAAE,EAAE,eAAe;wBACnB,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,SAAS;qBAC3D;iBACF;aACF,CAAC;YACJ,OAAO,EAAE,GAAgC,EAAE,CACzC,EAAE,CAAC;gBACD,IAAI,EAAE,IAAI,CAAC,OAAO;gBAClB,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;aAC/B,CAAC;SACL,CAAC,CAAC;QAEH,cAAS,GAAmC,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;QAClE,YAAO,GAA4B,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC;IASrE,CAAC;IAED,QAAQ;QACN,KAAK,CAAC,QAAQ,EAAE,CAAC;QAEjB,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,GAAG;QACD,MAAM,MAAM,GAAkC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,eAAe,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;YAC5G,KAAK;YACL,IAAI;SACL,CAAC,CAAC,CAAC;QAEJ,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACpC,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACxD,CAAC;;0HA7EU,6BAA6B;8GAA7B,6BAA6B,8GAC7B,mBAAmB,qFCrBhC,2yBA0BA;2FDNa,6BAA6B;kBALzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,4BAA4B;oBACtC,WAAW,EAAE,0CAA0C;oBACvD,eAAe,EAAE,uBAAuB,CAAC,MAAM;iBAChD;2JAGC,UAAU;sBADT,SAAS;uBAAC,mBAAmB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE","sourcesContent":["import { ChangeDetectionStrategy, Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { Observable, of } from 'rxjs';\nimport { IRecordGridConfig } from '../../../record-grid/runtime/types/record-grid-config.interface';\nimport { RecordGridComponent } from '../../../record-grid/runtime/record-grid.component';\nimport { RowSelectionMode } from '../../../record-grid/runtime/types/row-selection-mode.enum';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IAddSharedViewPresetsModalData, ISharedViewPresetDescriptor } from './add-shared-view-presets.types';\nimport { map } from 'rxjs/operators';\nimport { ISharedViewPresetItem } from '../share-view-preset/share-view-preset.types';\nimport { isEmpty } from 'lodash';\n\n@Component({\n  selector: 'rx-add-shared-view-presets',\n  templateUrl: './add-shared-view-presets.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AddSharedViewPresetsComponent extends RxModalClass implements OnInit {\n  @ViewChild(RecordGridComponent, { static: true })\n  recordGrid: RecordGridComponent;\n\n  recordGridConfig$: Observable<IRecordGridConfig> = of({\n    columns: [\n      {\n        fieldId: 'label',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.preset-name.title'\n        )\n      },\n      {\n        fieldId: 'ownerFullName',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.shared-by.title'\n        )\n      }\n    ],\n    enableFiltering: false,\n    enableRowSelection: RowSelectionMode.Multiple,\n    recordIdField: 'guid',\n    styles: 'flex-fill',\n    toolbarConfig: {\n      filter: false,\n      visibleColumnsMenu: false\n    },\n    useExternalFiltering: false,\n    getRecordDefinition: () =>\n      of({\n        fieldDefinitions: [\n          {\n            id: 'label',\n            resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n          },\n          {\n            id: 'ownerFullName',\n            resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n          }\n        ]\n      }),\n    getData: (): Observable<IDataPageResult> =>\n      of({\n        data: this.presets,\n        totalSize: this.presets.length\n      })\n  });\n\n  modalData: IAddSharedViewPresetsModalData = this.activeModalRef.getData();\n  private presets: ISharedViewPresetItem[] = this.modalData.newPresets;\n  isAddButtonDisabled$: Observable<boolean>;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    protected injector: Injector,\n    private translateService: TranslateService\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.isAddButtonDisabled$ = this.recordGrid.rowSelectionChanged.pipe(map(isEmpty));\n  }\n\n  add(): void {\n    const result: ISharedViewPresetDescriptor[] = this.recordGrid.api.getSelectedRows().map(({ label, guid }) => ({\n      label,\n      guid\n    }));\n\n    this.activeModalRef.close(result);\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"modal-body\">\n  <div class=\"mb-4\" style=\"white-space: pre-line\">\n    {{\n      'com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.description.label'\n        | translate\n    }}\n  </div>\n\n  <rx-record-grid [config]=\"recordGridConfig$\"></rx-record-grid>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"add-button\"\n    (click)=\"add()\"\n    [disabled]=\"isAddButtonDisabled$ | async\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.add.label' | translate }}\n  </button>\n  <button adapt-button btn-type=\"secondary\" type=\"button\" rx-id=\"cancel-button\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n"]}