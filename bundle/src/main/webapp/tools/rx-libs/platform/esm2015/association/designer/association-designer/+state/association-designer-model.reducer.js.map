{"version":3,"file":"association-designer-model.reducer.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/association/designer/association-designer/+state/association-designer-model.reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { Action, createReducer, on } from '@ngrx/store';\nimport { initDefinitionData } from './association-designer.actions';\nimport { IAssociationDesignerModel } from './association-designer.types';\nimport * as AssociationDesignerActions from './association-designer.actions';\nimport { IAssociationDefinitionModel } from '../../association-designer.types';\nimport { RxCardinalityType, RxModalityType } from '@helix/platform/association/api';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nconst initialDefinitionModel: IAssociationDefinitionModel = {\n  cardinality: [\n    {\n      value: RxCardinalityType.OneToOne,\n      labelKey: 'com.bmc.arsys.rx.client.association.cardinality.one-to-one.label'\n    }\n  ],\n  description: null,\n  guid: null,\n  isEnabled: true,\n  name: null,\n  nodeAId: null,\n  nodeAKeys: [RX_RECORD_DEFINITION.coreFieldIds.id],\n  nodeBKeys: [RX_RECORD_DEFINITION.coreFieldIds.id],\n  nodeAModality: RxModalityType.Optional,\n  nodeAName: null,\n  nodeBId: null,\n  nodeBName: null,\n  shouldCascadeDelete: false,\n  customizationOptions: { allowOverlay: true, scope: 'PUBLIC' }\n};\n\nexport const initialState: IAssociationDesignerModel = {\n  bundleId: null,\n  definitionName: null,\n  isDesignMode: true,\n  definitionModel: initialDefinitionModel,\n  definitionModelFromDefinition: initialDefinitionModel,\n  isDirty: false,\n  isForeignKeyMissing: false,\n  isForeignKeyCreated: false,\n  savedDefinitionName: null,\n  originalDefinition: null\n};\n\nconst reducer = createReducer(\n  initialState,\n\n  on(AssociationDesignerActions.init, (state: IAssociationDesignerModel, { payload }) => ({\n    ...initialState,\n    bundleId: payload.bundleId,\n    definitionName: payload.definitionName,\n    isForeignKeyCreated: false\n  })),\n\n  on(\n    AssociationDesignerActions.initDefinitionData,\n    (state: IAssociationDesignerModel, { definition, definitionModel }) => ({\n      ...state,\n      definitionModel,\n      definitionModelFromDefinition: definitionModel,\n      originalDefinition: definition\n    })\n  ),\n\n  on(\n    AssociationDesignerActions.updateDefinitionModelFromDesigner,\n    (state: IAssociationDesignerModel, { definitionModelFromDesigner }) => ({\n      ...state,\n      definitionModel: { ...state.definitionModel, ...definitionModelFromDesigner }\n    })\n  ),\n\n  on(AssociationDesignerActions.toggleDesignMode, (state: IAssociationDesignerModel) => ({\n    ...state,\n    isDesignMode: !state.isDesignMode\n  })),\n\n  on(\n    AssociationDesignerActions.foreignKeyFieldMissingCheckSuccess,\n    (state: IAssociationDesignerModel, { payload }) => ({\n      ...state,\n      isForeignKeyMissing: payload.isForeignKeyFieldMissing,\n      definitionModel: {\n        ...state.definitionModel,\n        nodeBKeys: payload.updatedForeignKeyFieldId\n          ? [payload.updatedForeignKeyFieldId]\n          : state.definitionModel.nodeBKeys\n      }\n    })\n  ),\n\n  on(AssociationDesignerActions.createForeignKeyFieldError, (state: IAssociationDesignerModel) => ({\n    ...state,\n    isForeignKeyCreated: false\n  })),\n\n  on(AssociationDesignerActions.createForeignKeyFieldSuccess, (state: IAssociationDesignerModel) => ({\n    ...state,\n    isForeignKeyCreated: true\n  })),\n\n  on(\n    AssociationDesignerActions.getCreatedForeignKeyFieldIdSuccess,\n    (state: IAssociationDesignerModel, { fieldId }) => ({\n      ...state,\n      definitionModel: { ...state.definitionModel, nodeBKeys: [fieldId] }\n    })\n  ),\n\n  on(AssociationDesignerActions.saveDefinitionSuccess, (state: IAssociationDesignerModel, { savedDefinitionName }) => ({\n    ...state,\n    savedDefinitionName\n  })),\n\n  on(AssociationDesignerActions.markDesignerPristine, (state: IAssociationDesignerModel) => ({\n    ...state,\n    isDirty: false\n  })),\n\n  on(AssociationDesignerActions.markDesignerDirty, (state: IAssociationDesignerModel) => ({\n    ...state,\n    isDirty: true\n  })),\n\n  on(AssociationDesignerActions.destroy, (state: IAssociationDesignerModel) => ({\n    ...initialState\n  }))\n);\n\nexport function associationDesignerModelReducer(state: IAssociationDesignerModel, action: Action) {\n  return reducer(state, action);\n}\n"]}