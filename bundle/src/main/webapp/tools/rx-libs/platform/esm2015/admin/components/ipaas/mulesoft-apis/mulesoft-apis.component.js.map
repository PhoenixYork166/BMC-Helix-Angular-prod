{"version":3,"file":"mulesoft-apis.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis.component.ts","../../../../../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { IIpaasApiInfo, IIpaasApisConfig } from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { EMPTY, forkJoin, noop, Observable } from 'rxjs';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { MulesoftApiEditorComponent } from './mulesoft-api-editor.component';\nimport { IpaasBaseApisComponent } from '../ipaas-base-apis/ipaas-base-apis.component';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxMulesoftApisService } from './mulesoft-apis.service';\n\n@Component({\n  selector: 'rx-admin-mulesoft-apis',\n  templateUrl: './mulesoft-apis.component.html'\n})\nexport class MulesoftApisAdminComponent {\n  @ViewChild('ipaasBaseApisConfiguration')\n  ipaasBaseApisComponent: IpaasBaseApisComponent;\n\n  mulesoftConfig: IIpaasApisConfig = {\n    titleKey: 'com.bmc.arsys.rx.client.admin.mulesoft-apis.header.title',\n    recordDefinitionName: 'com.bmc.dsm.ipaas-mulesoft:iPaaS MuleSoft API Definition',\n    resourceType: 'com.bmc.dsm.ipaas.mulesoft.command.RenameMuleSoftApiGroupCommand'\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxMulesoftApisService: RxMulesoftApisService\n  ) {}\n\n  openMulesoftCreateApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.add-api.label'),\n        content: MulesoftApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  openMulesoftEditApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.edit-api.label'),\n        content: MulesoftApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  deleteMulesoftApis(apiIds: string[]): void {\n    this.deleteApiDefinitions(apiIds).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.success.message')\n      );\n\n      this.ipaasBaseApisComponent.refreshIpaasGrid();\n    });\n  }\n\n  private deleteApiDefinitions(apiIds: string[]): Observable<any> {\n    if (apiIds.length) {\n      const deleteApiObservables$ = apiIds.map((apiId) => this.rxMulesoftApisService.deleteApiDefinition(apiId));\n\n      return forkJoin(deleteApiObservables$);\n    }\n\n    return EMPTY;\n  }\n}\n","<rx-ipaas-base-apis\n  [ipaasApisConfig]=\"mulesoftConfig\"\n  (createApi)=\"openMulesoftCreateApiEditor($event)\"\n  (editApi)=\"openMulesoftEditApiEditor($event)\"\n  (deleteApis)=\"deleteMulesoftApis($event)\"\n  #ipaasBaseApisConfiguration\n></rx-ipaas-base-apis>\n"]}