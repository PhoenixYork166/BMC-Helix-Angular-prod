{"version":3,"file":"decimal-field-definition.service.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/record/designer/record-designer/services/decimal-field-definition.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,+BAA+B,EAAE,MAAM,oCAAoC,CAAC;AACrF,OAAO,EAAoB,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;AAC/E,OAAO,EAAE,OAAO,EAAE,MAAM,QAAQ,CAAC;AACjC,OAAO,EAAE,SAAS,EAAE,MAAM,uBAAuB,CAAC;;AAKlD,MAAM,OAAgB,+BAAgC,SAAQ,+BAA+B;IAH7F;;QAIE,iBAAY,GAAG,oBAAoB,CAAC,SAAS,CAAC,OAAO,CAAC,YAAY,CAAC;QACnE,iBAAY,GAAG,CAAC,CAAC;QACjB,iBAAY,GAAG,CAAC,CAAC;QACjB,aAAQ,GAAG,SAAS,CAAC,UAAU,CAAC;QAChC,aAAQ,GAAG,SAAS,CAAC,UAAU,CAAC;QAChC,qBAAgB,GAAG,KAAK,CAAC;KAiC1B;IA/BC,0BAA0B,CAAC,eAAqD;QAC9E,OAAO,KAAK,CAAC,0BAA0B,iCAClC,eAAe,KAClB,SAAS,EAAE,CAAC,EACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IACvB,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,UAAuC,EAAE,eAAuC;QACvF,MAAM,gBAAgB,GAAG,KAAK,CAAC,QAAQ,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;QAErE,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,EAAE;YAC5E,gBAAgB,CAAC,IAAI,CAAC;gBACpB,IAAI,EAAE,mBAAmB,CAAC,KAAK;gBAC/B,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CACxC,oFAAoF,EACpF;oBACE,GAAG,EAAE,IAAI,CAAC,YAAY;oBACtB,GAAG,EAAE,IAAI,CAAC,YAAY;iBACvB,CACF;gBACD,IAAI,EAAE;oBACJ,YAAY,EAAE,WAAW;oBACzB,IAAI,EAAE,UAAU,CAAC,IAAI;iBACtB;aACF,CAAC,CAAC;SACJ;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;;4HAtCmB,+BAA+B;gIAA/B,+BAA+B,cAFvC,MAAM;2FAEE,+BAA+B;kBAHpD,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { Injectable } from '@angular/core';\nimport { IRecordDefinitionModel, IRecordFieldDefinitionModel } from '../../record-designer.types';\nimport { RxNumericFieldDefinitionService } from './numeric-field-definition.service';\nimport { IValidationIssue, ValidationIssueType } from '@helix/platform/ui-kit';\nimport { inRange } from 'lodash';\nimport { RX_NUMBER } from '@helix/platform/utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport abstract class RxDecimalFieldDefinitionService extends RxNumericFieldDefinitionService {\n  resourceType = RX_RECORD_DEFINITION.dataTypes.decimal.resourceType;\n  minPrecision = 0;\n  maxPrecision = 9;\n  minValue = RX_NUMBER.minDecimal;\n  maxValue = RX_NUMBER.maxDecimal;\n  allowOnlyInteger = false;\n\n  getNewFieldDefinitionModel(fieldProperties: Partial<IRecordFieldDefinitionModel>) {\n    return super.getNewFieldDefinitionModel({\n      ...fieldProperties,\n      precision: 2,\n      minValue: this.minValue,\n      maxValue: this.maxValue\n    });\n  }\n\n  validate(fieldModel: IRecordFieldDefinitionModel, definitionModel: IRecordDefinitionModel): IValidationIssue[] {\n    const validationIssues = super.validate(fieldModel, definitionModel);\n\n    if (!inRange(fieldModel.precision, this.minPrecision, this.maxPrecision + 1)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.record-designer.validation.invalid-precision-range.message',\n          {\n            min: this.minPrecision,\n            max: this.maxPrecision\n          }\n        ),\n        data: {\n          propertyName: 'precision',\n          guid: fieldModel.guid\n        }\n      });\n    }\n\n    return validationIssues;\n  }\n}\n"]}