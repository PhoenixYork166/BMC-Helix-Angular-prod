{"version":3,"file":"shell-global-search-records-control.component.js","sourceRoot":"","sources":["../../../../../../../../../../libs/platform/view/shell-designer-page/components/shell/controls/shell-global-search-records-control/shell-global-search-records-control.component.ts","../../../../../../../../../../libs/platform/view/shell-designer-page/components/shell/controls/shell-global-search-records-control/shell-global-search-records-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACnD,OAAO,EAAE,aAAa,EAAE,MAAM,mCAAmC,CAAC;AAElE,OAAO,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;AAC9B,OAAO,EAAE,wCAAwC,EAAE,MAAM,iFAAiF,CAAC;AAG3I,OAAO,EAAE,uBAAuB,EAAE,MAAM,0BAA0B,CAAC;AACnE,OAAO,EAAE,cAAc,EAAE,MAAM,wBAAwB,CAAC;;;;;AAcxD,MAAM,OAAO,0CACX,SAAQ,aAAyC;IAMjD,YAAoB,cAA8B;QAChD,KAAK,EAAE,CAAC;QADU,mBAAc,GAAd,cAAc,CAAgB;IAElD,CAAC;IAED,SAAS,CAAC,YAAuC;QAC/C,IAAI,CAAC,cAAc;aAChB,SAAS,CAAC;YACT,KAAK,EAAE,wBAAwB;YAC/B,IAAI,EAAE;gBACJ,eAAe,EAAE,IAAI,CAAC,KAAK;gBAC3B,YAAY;gBACZ,UAAU,EAAE,IAAI,CAAC,UAAU;aACY;YACzC,OAAO,EAAE,wCAAwC;YACjD,IAAI,EAAE,uBAAuB,CAAC,KAAY;YAC1C,MAAM,EAAE,wBAAwB;SACjC,CAAC;aACD,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YAChB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;QACvB,CAAC,CAAC;aACD,KAAK,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC;IAED,KAAK;QACH,IAAI,CAAC,SAAS,EAAE,CAAC;IACnB,CAAC;IAED,IAAI,CAAC,MAAgC;QACnC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACzB,CAAC;IAED,MAAM,CAAC,MAAgC;QACrC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,KAAK,MAAM,CAAC,CAAC;IAC5D,CAAC;;uIAxCU,0CAA0C;2HAA1C,0CAA0C,iGAR1C;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,0CAA0C;YACvD,KAAK,EAAE,IAAI;SACZ;KACF,iDCrBH,gnCAmCA;2FDZa,0CAA0C;kBAZtD,SAAS;mBAAC;oBACT,QAAQ,EAAE,wCAAwC;oBAClD,WAAW,EAAE,sDAAsD;oBACnE,SAAS,EAAE,CAAC,sDAAsD,CAAC;oBACnE,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,4CAA4C;4BACvD,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;qGAMC,OAAO;sBADN,KAAK","sourcesContent":["import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ValueAccessor } from '@helix/platform/shared/components';\nimport { IFormControlComponent, IFormFocusable } from '@helix/platform/shared/api';\nimport { noop } from 'lodash';\nimport { RxShellGlobalSearchRecordsModalComponent } from './shell-global-search-records-modal/shell-global-search-records-modal.component';\nimport { IShellGlobalSearchRecordsModalConfig } from './shell-global-search-records-modal/shell-global-search-records-modal.types';\nimport { IShellGlobalSearchRecord } from '../../shell-design.types';\nimport { OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-shell-global-search-records-control',\n  templateUrl: './shell-global-search-records-control.component.html',\n  styleUrls: ['./shell-global-search-records-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxShellGlobalSearchRecordsControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxShellGlobalSearchRecordsControlComponent\n  extends ValueAccessor<IShellGlobalSearchRecord[]>\n  implements IFormControlComponent, IFormFocusable\n{\n  @Input()\n  options;\n\n  constructor(private rxModalService: RxModalService) {\n    super();\n  }\n\n  openModal(recordToEdit?: IShellGlobalSearchRecord): void {\n    this.rxModalService\n      .openModal({\n        title: 'Configure results view',\n        data: {\n          selectedRecords: this.value,\n          recordToEdit,\n          isReadOnly: this.isDisabled\n        } as IShellGlobalSearchRecordsModalConfig,\n        content: RxShellGlobalSearchRecordsModalComponent,\n        size: OpenViewActionModalSize.Large as any,\n        testID: 'configure-results-view'\n      })\n      .then((records) => {\n        this.value = records;\n      })\n      .catch(noop);\n  }\n\n  focus(): void {\n    this.openModal();\n  }\n\n  edit(record: IShellGlobalSearchRecord): void {\n    this.openModal(record);\n  }\n\n  remove(record: IShellGlobalSearchRecord): void {\n    this.value = this.value.filter((item) => item !== record);\n  }\n}\n","<adapt-button btn-type=\"tertiary\" rx-id=\"open-modal-button\" class=\"p-0 pb-1\" (click)=\"openModal()\" [hidden]=\"isDisabled\">\n  <span class=\"d-icon-plus_circle\"></span>\n  Configure results view\n</adapt-button>\n\n<ng-container *ngIf=\"value.length\">\n  <div class=\"my-1\">Records included in search results</div>\n\n  <div class=\"border px-2 py-1 mb-1 global-records-list\" *ngFor=\"let item of value\">\n    <div class=\"d-flex\">\n      <strong class=\"mr-auto mt-1 d-flex global-record-title flex-fill text-truncate\">{{ item.definitionName }}</strong>\n\n      <button\n        class=\"d-icon-left-pencil p-1\"\n        adapt-button\n        btn-type=\"tertiary\"\n        size=\"small\"\n        type=\"button\"\n        rx-id=\"edit-button\"\n        (click)=\"edit(item)\"\n      ></button>\n\n      <button\n        class=\"d-icon-left-cross_adapt p-1\"\n        adapt-button\n        btn-type=\"tertiary\"\n        size=\"small\"\n        type=\"button\"\n        rx-id=\"remove-button\"\n        *ngIf=\"!isDisabled\"\n        (click)=\"remove(item)\"\n      ></button>\n    </div>\n  </div>\n</ng-container>\n"]}