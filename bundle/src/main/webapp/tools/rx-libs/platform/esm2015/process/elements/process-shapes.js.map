{"version":3,"file":"process-shapes.js","sourceRoot":"","sources":["../../../../../../libs/platform/process/elements/process-shapes.ts"],"names":[],"mappings":"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","sourcesContent":["import { cloneDeep, defaults, forEach, isUndefined, reject, size, sortBy } from 'lodash';\nimport {\n  IProcessDefinition,\n  RxProcessDefinitionCacheService,\n  RxProcessElementSearchService\n} from '@helix/platform/process/api';\nimport { RX_DESIGNER_ELEMENT_SHAPE, RxRootInjector } from '@helix/platform/shared/api';\nimport { RxProcessElementService } from './process-element.service';\n\ndeclare var joint: any;\n\n// https://github.com/clientIO/joint/issues/817\n// When the size of shape is changed, JointJS resizes shape`s body via scaling.\n// IE11 & MS-Edge do not support `vector-effect`, which results in changing stroke-width.\n// `refHeight` & `refWidth` attributes allow resizing rectangular sub-elements relative to the referenced element without scaling.\njoint.util.deepSupplement(joint.shapes.bpmn.Activity.prototype.defaults, {\n  attrs: {\n    '.body': {\n      refWidth: 1,\n      refHeight: 1\n    }\n  },\n\n  // 1. Removed scalable group (<g class=\"scalable\">) from the original template of Activity element\n  // to resolve the issue of restoring the element size after undo/redo operations.\n  // http://clientio.freshdesk.com/support/tickets/560\n  // https://jira.bmc.com/browse/DRIST-8990\n  // 2. Added multi instance icons\n  markup: [\n    '<g class=\"rotatable\">',\n    '<rect class=\"body outer\"/>',\n    '<rect class=\"body inner\"/>',\n    joint.env.test('svgforeignobject')\n      ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>'\n      : '<text class=\"content\"/>',\n    '<g class=\"rx-icon-container\">',\n    '<image class=\"icon-multi-instance-sequential\"/>',\n    '<image class=\"icon-multi-instance-parallel\"/>',\n    '<path class=\"sub-process\"/>',\n    '</g>',\n    '<image class=\"icon\"/>',\n    '</g>'\n  ].join('')\n});\n\nexport namespace rx {\n  export class BaseExpandableProcessShape extends joint.shapes.bpmn.Activity {\n    initialize(options) {\n      super.initialize(options);\n\n      const embeddedCells = this.getEmbeddedCells();\n      const embedsWithoutBoundaryEventLength = size(reject(embeddedCells, 'isBoundaryEvent'));\n\n      let modelEmbeds;\n\n      if (embedsWithoutBoundaryEventLength === embeddedCells.length) {\n        modelEmbeds = this.get('embeds');\n      }\n\n      if (this.collection && this.get('expanded') && !embedsWithoutBoundaryEventLength && isUndefined(modelEmbeds)) {\n        RxRootInjector.injector\n          .get(RxProcessDefinitionCacheService)\n          .getProcessDefinition(this.get('processDefinitionName'))\n          .subscribe((processDefinition: IProcessDefinition) => {\n            const flowElement =\n              RxRootInjector.injector\n                .get(RxProcessElementSearchService)\n                .findByGuid(processDefinition, `rx-${this.get('id')}`) || {};\n\n            this.expand(processDefinition, RxRootInjector.injector.get(RxProcessElementService).getGraph(flowElement));\n          });\n      }\n    }\n\n    private expand(definition, graph): void {\n      graph.cells = sortBy(\n        graph.cells,\n        (cell) => cell.type === 'rx.SequenceFlow' || cell.type === 'rx.TextAnnotationAssociation'\n      );\n\n      const cellModels = [];\n\n      forEach(graph.cells, (cell) => {\n        const CellModel = joint.util.getByPath(this.collection.cellNamespace, cell.type, '.');\n        const cellModel = new CellModel(cell);\n\n        if (cellModel.get('expanded')) {\n          const flowElement =\n            RxRootInjector.injector\n              .get(RxProcessElementSearchService)\n              .findByGuid(definition, `rx-${cellModel.get('id')}`) || {};\n\n          cellModel.expand.call(\n            this,\n            definition,\n            RxRootInjector.injector.get(RxProcessElementService).getGraph(flowElement)\n          );\n        }\n\n        cellModels.push(cellModel);\n      });\n\n      this.collection.add(cellModels);\n\n      this.attr({\n        '.sub-process': {\n          display: 'none',\n          visibility: 'hidden'\n        }\n      });\n    }\n  }\n\n  export class BaseCallActivity extends BaseExpandableProcessShape {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          activityType: 'call-activity',\n          expanded: false,\n          subProcess: true,\n\n          attrs: {\n            path: {\n              transform: 'scale(0.3, 0.3)',\n              'ref-dy': -15\n            },\n            rect: {\n              rx: 2,\n              ry: 2\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class BaseStaticMultiInstance extends joint.shapes.bpmn.Activity {\n    static initMultiInstanceIcons(model): void {\n      const attrs = cloneDeep(model.get('attrs'));\n\n      const iconAttr = {\n        width: 10,\n        height: 10,\n        y: 1\n      };\n\n      attrs['.sub-process'] = {\n        d: 'M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15',\n        stroke: '#000000',\n        fill: 'transparent',\n        transform: 'scale(0.3, 0.3) translate(0, 6)'\n      };\n\n      attrs['.sub-process'].display = model.prop('subProcess') ? '' : 'none';\n\n      attrs['.icon-multi-instance-sequential'] = cloneDeep(iconAttr);\n      attrs['.icon-multi-instance-parallel'] = cloneDeep(iconAttr);\n\n      attrs['.icon-multi-instance-sequential']['xlink:href'] =\n        RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.multiInstanceSequential;\n\n      attrs['.icon-multi-instance-parallel']['xlink:href'] = RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.multiInstanceParallel;\n\n      attrs['.rx-icon-container'] = {\n        ref: '.body',\n        'x-alignment': 'middle',\n        'ref-x': 0.5,\n        'ref-dy': -15\n      };\n\n      defaults(attrs['.icon'], attrs.image);\n\n      delete attrs.image;\n      delete attrs.path;\n\n      model.unset('attrs', { silent: true });\n      model.set('attrs', attrs);\n    }\n\n    public static updateMultiInstanceIcons(model): void {\n      const loopType = model.prop('loopType');\n      const attrs = cloneDeep(model.get('attrs'));\n\n      attrs['.icon-multi-instance-sequential'].display = loopType === 'true' ? '' : 'none';\n      attrs['.icon-multi-instance-parallel'].display = loopType === 'false' ? '' : 'none';\n\n      if (model.prop('subProcess')) {\n        attrs['.sub-process'].transform = loopType\n          ? 'scale(0.3, 0.3) translate(50, 6)'\n          : 'scale(0.3, 0.3) translate(0, 6)';\n      }\n\n      model.unset('attrs', { silent: true });\n      model.set('attrs', attrs, { rxSilent: true });\n    }\n  }\n\n  export class BaseMultiInstance extends joint.shapes.bpmn.Activity {\n    public initialize(options): void {\n      super.initialize(options);\n\n      if (options.multiInstanceLoopDefinition) {\n        this.prop('loopType', String(options.multiInstanceLoopDefinition.isSequential), { silent: true });\n      }\n\n      BaseStaticMultiInstance.initMultiInstanceIcons(this);\n      BaseStaticMultiInstance.updateMultiInstanceIcons(this);\n    }\n  }\n\n  export class CallActivity extends BaseCallActivity {\n    initialize(options): void {\n      super.initialize(options);\n\n      if (options.multiInstanceLoopDefinition) {\n        this.prop('loopType', String(options.multiInstanceLoopDefinition.isSequential), { silent: true });\n      }\n\n      BaseStaticMultiInstance.initMultiInstanceIcons(this);\n      BaseStaticMultiInstance.updateMultiInstanceIcons(this);\n    }\n\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.CallActivity'\n        },\n        BaseCallActivity.prototype.defaults()\n      );\n    }\n  }\n\n  export class Connector extends BaseMultiInstance {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.Connector',\n          icon: 'connector',\n\n          attrs: {\n            '.icon': {\n              width: 12,\n              height: 12,\n              'ref-x': 3,\n              'ref-y': 3\n            },\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class EndEvent extends joint.shapes.bpmn.Event {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.EndEvent',\n          eventType: 'end',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Event.prototype.defaults\n      );\n    }\n  }\n\n  export class ErrorBoundaryEvent extends joint.shapes.bpmn.Event {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ErrorBoundaryEvent',\n          eventType: 'intermediate',\n          icon: 'errorBoundary',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Event.prototype.defaults\n      );\n    }\n  }\n\n  export class ErrorEndEvent extends joint.shapes.bpmn.Event {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ErrorEndEvent',\n          eventType: 'end',\n          icon: 'errorEnd',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Event.prototype.defaults\n      );\n    }\n  }\n\n  export class ExclusiveGateway extends joint.shapes.bpmn.Gateway {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ExclusiveGateway',\n          icon: 'cross',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Gateway.prototype.defaults\n      );\n    }\n  }\n\n  export class ParallelGateway extends joint.shapes.bpmn.Gateway {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ParallelGateway',\n          icon: 'plus',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Gateway.prototype.defaults\n      );\n    }\n  }\n\n  export class ProcessAction extends joint.shapes.bpmn.Activity {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ProcessAction',\n          icon: 'gear',\n\n          attrs: {\n            '.icon': {\n              width: 12,\n              height: 12,\n              'ref-x': 3,\n              'ref-y': 3\n            },\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          },\n\n          size: {\n            width: 70,\n            height: 60\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class ReceiveTask extends BaseMultiInstance {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.ReceiveTask',\n          icon: 'message',\n\n          attrs: {\n            '.icon': {\n              width: 12,\n              height: 12,\n              'ref-x': 3,\n              'ref-y': 3\n            },\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class SequenceFlow extends joint.shapes.bpmn.Flow {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.SequenceFlow',\n\n          router: {\n            name: 'manhattan',\n\n            args: {\n              step: 5\n            }\n          }\n        },\n        joint.shapes.bpmn.Flow.prototype.defaults\n      );\n    }\n  }\n\n  export class StartEvent extends joint.shapes.bpmn.Event {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.StartEvent',\n          eventType: 'start',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Event.prototype.defaults\n      );\n    }\n  }\n\n  export class SubProcess extends BaseExpandableProcessShape {\n    initialize(options): void {\n      super.initialize(options);\n\n      if (options.multiInstanceLoopDefinition) {\n        this.prop('loopType', String(options.multiInstanceLoopDefinition.isSequential), { silent: true });\n      }\n\n      BaseStaticMultiInstance.initMultiInstanceIcons(this);\n      BaseStaticMultiInstance.updateMultiInstanceIcons(this);\n    }\n\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.SubProcess',\n          activityType: 'event-sub-process',\n          expanded: false,\n          subProcess: true,\n\n          attrs: {\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class TextAnnotation extends joint.shapes.bpmn.Annotation {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.TextAnnotation',\n\n          attrs: {\n            rect: {\n              rx: 2,\n              ry: 2\n            }\n          }\n        },\n        joint.shapes.bpmn.Annotation.prototype.defaults\n      );\n    }\n  }\n\n  export class TextAnnotationAssociation extends joint.shapes.bpmn.Flow {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.TextAnnotationAssociation',\n          flowType: 'association'\n        },\n        joint.shapes.bpmn.Flow.prototype.defaults\n      );\n    }\n  }\n\n  export class TimerEvent extends joint.shapes.bpmn.Event {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.TimerEvent',\n          eventType: 'intermediate',\n          icon: 'clock',\n\n          attrs: {\n            '.label': {\n              fill: 'gray'\n            }\n          }\n        },\n        joint.shapes.bpmn.Event.prototype.defaults\n      );\n    }\n  }\n\n  export class UserTask extends BaseMultiInstance {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.UserTask',\n          icon: 'user',\n\n          attrs: {\n            '.icon': {\n              width: 12,\n              height: 12,\n              'ref-x': 3,\n              'ref-y': 3\n            },\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n\n  export class WebRequest extends joint.shapes.bpmn.Activity {\n    defaults() {\n      return joint.util.deepSupplement(\n        {\n          type: 'rx.WebRequest',\n          icon: 'webRequest',\n\n          attrs: {\n            '.icon': {\n              width: 12,\n              height: 12,\n              'ref-x': 3,\n              'ref-y': 3\n            },\n            rect: {\n              rx: 4,\n              ry: 4\n            }\n          }\n        },\n        joint.shapes.bpmn.Activity.prototype.defaults\n      );\n    }\n  }\n}\n"]}