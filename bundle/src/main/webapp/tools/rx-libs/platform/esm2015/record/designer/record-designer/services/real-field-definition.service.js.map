{"version":3,"file":"real-field-definition.service.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/record/designer/record-designer/services/real-field-definition.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,+BAA+B,EAAE,MAAM,oCAAoC,CAAC;AACrF,OAAO,EAAoB,mBAAmB,EAAE,MAAM,wBAAwB,CAAC;;AAK/E,MAAM,OAAO,4BAA6B,SAAQ,+BAA+B;IAHjF;;QAIE,iBAAY,GAAG,oBAAoB,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC;QAEhE,iBAAY,GAAG,IAAI,CAAC;QACpB,aAAQ,GAAG,CAAC,QAAQ,CAAC;QACrB,aAAQ,GAAG,QAAQ,CAAC;QACpB,qBAAgB,GAAG,KAAK,CAAC;QACjB,sBAAiB,GAAG,CAAC,CAAC,CAAC;KAgChC;IA9BC,0BAA0B,CAAC,eAAqD;QAC9E,OAAO,KAAK,CAAC,0BAA0B,iCAClC,eAAe,KAClB,SAAS,EAAE,CAAC,EACZ,QAAQ,EAAE,IAAI,CAAC,QAAQ,EACvB,QAAQ,EAAE,IAAI,CAAC,QAAQ,IACvB,CAAC;IACL,CAAC;IAED,QAAQ,CAAC,UAAuC,EAAE,eAAuC;QACvF,MAAM,gBAAgB,GAAG,KAAK,CAAC,QAAQ,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;QAErE,IACE,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC;YAC/B,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,IAAI,UAAU,CAAC,SAAS,IAAI,IAAI,CAAC,iBAAiB,CAAC,EAC5E;YACA,gBAAgB,CAAC,IAAI,CAAC;gBACpB,IAAI,EAAE,mBAAmB,CAAC,KAAK;gBAC/B,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CACxC,+FAA+F,CAChG;gBACD,IAAI,EAAE;oBACJ,YAAY,EAAE,WAAW;oBACzB,IAAI,EAAE,UAAU,CAAC,IAAI;iBACtB;aACF,CAAC,CAAC;SACJ;QAED,OAAO,gBAAgB,CAAC;IAC1B,CAAC;;yHAtCU,4BAA4B;6HAA5B,4BAA4B,cAF3B,MAAM;2FAEP,4BAA4B;kBAHxC,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { Injectable } from '@angular/core';\nimport { IRecordDefinitionModel, IRecordFieldDefinitionModel } from '../../record-designer.types';\nimport { RxNumericFieldDefinitionService } from './numeric-field-definition.service';\nimport { IValidationIssue, ValidationIssueType } from '@helix/platform/ui-kit';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRealFieldDefinitionService extends RxNumericFieldDefinitionService {\n  resourceType = RX_RECORD_DEFINITION.dataTypes.real.resourceType;\n  minPrecision: -1;\n  maxPrecision = null;\n  minValue = -1.845e19;\n  maxValue = 1.845e19;\n  allowOnlyInteger = false;\n  private AR_PRECISION_NONE = -1;\n\n  getNewFieldDefinitionModel(fieldProperties: Partial<IRecordFieldDefinitionModel>) {\n    return super.getNewFieldDefinitionModel({\n      ...fieldProperties,\n      precision: 6,\n      minValue: this.minValue,\n      maxValue: this.maxValue\n    });\n  }\n\n  validate(fieldModel: IRecordFieldDefinitionModel, definitionModel: IRecordDefinitionModel): IValidationIssue[] {\n    const validationIssues = super.validate(fieldModel, definitionModel);\n\n    if (\n      !isFinite(fieldModel.precision) ||\n      (fieldModel.precision < 1 && fieldModel.precision != this.AR_PRECISION_NONE)\n    ) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.record-designer.validation.invalid-real-field-precision-range.message'\n        ),\n        data: {\n          propertyName: 'precision',\n          guid: fieldModel.guid\n        }\n      });\n    }\n\n    return validationIssues;\n  }\n}\n"]}