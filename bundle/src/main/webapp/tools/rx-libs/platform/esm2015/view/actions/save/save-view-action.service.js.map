{"version":3,"file":"save-view-action.service.js","sourceRoot":"","sources":["../../../../../../../libs/platform/view/actions/save/save-view-action.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,UAAU,EAAE,MAAM,QAAQ,CAAC;AACpC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAc,UAAU,EAAE,MAAM,MAAM,CAAC;AAC7D,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AAErC,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;;AAKhD,MAAM,OAAO,uBAAuB;IAClC,OAAO,CAAC,MAA6B;QACnC,IAAI,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;YACrC,MAAM,eAAe,GAAG,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;gBACtD,CAAC,CAAC,KAAK,CAAC,IAAI,CACR,GAAG,CAAC;oBACF,QAAQ;wBACN,MAAM,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;oBACzB,CAAC;iBACF,CAAC,CACH;gBACH,CAAC,CAAC,UAAU,CAAC,IAAI,OAAO,CAAC,uDAAuD,CAAC,CAAC,CAAC;YAErF,OAAO,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,MAAM,CAAC,cAAc,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;SAC9G;aAAM;YACL,OAAO,UAAU,CAAC,IAAI,OAAO,CAAC,gEAAgE,CAAC,CAAC,CAAC;SAClG;IACH,CAAC;;oHAjBU,uBAAuB;wHAAvB,uBAAuB,cAFtB,MAAM;2FAEP,uBAAuB;kBAHnC,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { IViewActionService } from '@helix/platform/view/api';\nimport { isFunction } from 'lodash';\nimport { concat, EMPTY, Observable, throwError } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ISaveViewActionParams } from './save-view-action.interfaces';\nimport { RxError } from '@helix/platform/utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxSaveViewActionService implements IViewActionService<ISaveViewActionParams, never> {\n  execute(params: ISaveViewActionParams): Observable<never> {\n    if (isFunction(params.targetApi.save)) {\n      const closeAfterSave$ = isFunction(params.viewApi.close)\n        ? EMPTY.pipe(\n            tap({\n              complete() {\n                params.viewApi.close();\n              }\n            })\n          )\n        : throwError(new RxError('rxSaveAction: target view does not support close API.'));\n\n      return concat(params.targetApi.save(params.closeAfterSave), params.closeAfterSave ? closeAfterSave$ : EMPTY);\n    } else {\n      return throwError(new RxError('rxSaveAction: target view/component does not support save API.'));\n    }\n  }\n}\n"]}