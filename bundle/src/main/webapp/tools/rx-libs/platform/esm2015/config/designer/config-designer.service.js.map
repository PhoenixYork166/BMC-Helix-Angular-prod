{"version":3,"file":"config-designer.service.js","sourceRoot":"","sources":["../../../../../../libs/platform/config/designer/config-designer.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { IConfigDefinition, IConfigFieldDefinition, ImpactRowVisibility } from '@helix/platform/config/api';\nimport { RX_CONFIG_DESIGNER } from './config-designer.constant';\nimport { isNil } from 'lodash';\nimport { IConfigDefinitionModel, IConfigFieldDefinitionModel } from './config-designer.types';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigDesignerService {\n  getDefinitionFromDefinitionModel(model: IConfigDefinitionModel): IConfigDefinition {\n    return {\n      componentName: model.componentName,\n      showInLocation:\n        model.isSettingAccessibleInApplication && model.isSettingAccessibleInInnovationStudio\n          ? RX_CONFIG_DESIGNER.settingAccessOptions.both.value\n          : model.isSettingAccessibleInApplication\n          ? RX_CONFIG_DESIGNER.settingAccessOptions.application.value\n          : model.isSettingAccessibleInInnovationStudio\n          ? RX_CONFIG_DESIGNER.settingAccessOptions.innovationStudio.value\n          : RX_CONFIG_DESIGNER.settingAccessOptions.none.value,\n      supportsMultiple: model.supportsMultiple,\n      parentComponentName: model.parentComponentName,\n      impactRowVisibility:\n        isNil(model.parentComponentName) && model.supportsMultiple\n          ? model.impactRowVisibility\n          : ImpactRowVisibility.None,\n      permissions: model.permissions,\n      registeredModuleName: model.registeredModuleName,\n      viewComponent: model.viewComponent,\n      externalLink: model.externalLink,\n      viewToOpen: model.viewToOpen,\n      localeList: [\n        {\n          componentLabel: model.componentLabel,\n          firstMenu:\n            isNil(model.parentComponentName) &&\n            (model.isSettingAccessibleInApplication || model.isSettingAccessibleInInnovationStudio)\n              ? model.firstMenu\n              : null,\n          secondMenu:\n            isNil(model.parentComponentName) &&\n            (model.isSettingAccessibleInApplication || model.isSettingAccessibleInInnovationStudio)\n              ? model.secondMenu\n              : null,\n          locale: 'en-US'\n        }\n      ],\n      settingMetaData: model.fields.map<IConfigFieldDefinition>((field: IConfigFieldDefinitionModel) => ({\n        dataType: field.dataType,\n        defaultValue:\n          field.dataType === RX_RECORD_DEFINITION.dataTypes.selection.resourceType\n            ? field.selectionFieldOptionProperties.defaultValue\n            : field.defaultValue,\n        minValue: field.minValue,\n        maxValue: field.maxValue,\n        fieldOrder: field.fieldOrder,\n        id: field.id,\n        keySetting: field.keySetting,\n        required: field.required,\n        optionNamesById: field.selectionFieldOptionProperties?.optionNamesById,\n        optionLabelsById: field.selectionFieldOptionProperties?.optionLabelsById,\n        localeList: [\n          {\n            ...field.localeList[0],\n            settingLabel: field.settingLabel\n          }\n        ]\n      }))\n    };\n  }\n}\n"]}