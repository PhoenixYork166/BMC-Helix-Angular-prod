{"version":3,"file":"tenant-editor.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/admin/components/manage-tenant/tenant-editor/tenant-editor.component.ts","../../../../../../../../libs/platform/admin/components/manage-tenant/tenant-editor/tenant-editor.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxTenantService } from '../manage-tenant.service';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-tenant-editor',\n  templateUrl: './tenant-editor.component.html'\n})\nexport class TenantEditorComponent extends RxModalClass implements OnInit {\n  validDefinitionNameRegex: any;\n  tenantEditorFormGroup: FormGroup;\n  domainIdentifierRegexp = /^[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n  isEditMode = false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private dockedPanelContext: DockedPanelContext,\n    private rxManageTenantService: RxTenantService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    const selectedTenantData = this.dockedPanelContext.getData().tenant;\n\n    this.tenantEditorFormGroup = this.formBuilder.group({\n      name: '',\n      domainIdentifier: '',\n      virtualHostname: ''\n    });\n\n    if (selectedTenantData) {\n      this.isEditMode = true;\n\n      this.tenantEditorFormGroup.patchValue({\n        name: selectedTenantData.name,\n        domainIdentifier: selectedTenantData.domainIdentifier,\n        virtualHostname: selectedTenantData.virtualHostname\n      });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.tenantEditorFormGroup.dirty;\n  }\n\n  save(): void {\n    const tenantPayload = this.tenantEditorFormGroup.getRawValue();\n\n    if (this.isEditMode) {\n      tenantPayload.tenantId = this.dockedPanelContext.getData().tenant.tenantId;\n    }\n\n    const writeEvent = this.isEditMode\n      ? this.rxManageTenantService.editTenant(tenantPayload)\n      : this.rxManageTenantService.createTenant(tenantPayload);\n\n    writeEvent.subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.isEditMode\n          ? this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-updated.message'\n            )\n          : this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-created.message'\n            )\n      );\n\n      this.tenantEditorFormGroup.markAsPristine();\n      this.dockedPanelContext.close('');\n    });\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"tenantEditorFormGroup\">\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"tenant-name-field\"\n      formControlName=\"name\"\n      label=\" {{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-name.label' | translate }}\"\n      required\n      maxlength=\"20\"\n      [disabled]=\"isEditMode\"\n    ></adapt-rx-textfield>\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"domain-identifier-field\"\n      formControlName=\"domainIdentifier\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.domain-identifier.label' | translate }}\"\n      placeholder=\"e.g. domain.com\"\n      required\n      maxlength=\"254\"\n      [pattern]=\"domainIdentifierRegexp\"\n    ></adapt-rx-textfield>\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"virtual-host-name-field\"\n      formControlName=\"virtualHostname\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.virtual-host-name.label' | translate }}\"\n      placeholder=\"e.g. host.domain.com\"\n      required\n      maxlength=\"254\"\n      [pattern]=\"domainIdentifierRegexp\"\n    ></adapt-rx-textfield>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    class=\"mr-2\"\n    rx-id=\"save-button\"\n    [disabled]=\"tenantEditorFormGroup.invalid || tenantEditorFormGroup.pristine\"\n    (click)=\"save()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" class=\"mr-2\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n"]}