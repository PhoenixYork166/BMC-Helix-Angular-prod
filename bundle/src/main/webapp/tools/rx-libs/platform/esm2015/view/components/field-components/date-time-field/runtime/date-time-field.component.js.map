{"version":3,"file":"date-time-field.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/platform/view/components/field-components/date-time-field/runtime/date-time-field.component.ts","../../../../../../../../../libs/platform/view/components/field-components/date-time-field/runtime/date-time-field.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAC3C,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AAGpD,OAAO,EAAE,sBAAsB,EAAE,oBAAoB,EAAE,MAAM,uBAAuB,CAAC;AACrF,OAAO,MAAM,MAAM,YAAY,CAAC;AAChC,OAAO,EAAE,8BAA8B,EAAE,MAAM,iFAAiF,CAAC;AACjI,OAAO,EAAE,eAAe,EAAE,MAAM,2BAA2B,CAAC;;;;;;AAO5D,MAAM,OAAO,sBAAuB,SAAQ,8BAA8B;IAGxE,YAAY,QAAkB,EAAU,QAAkB;QACxD,KAAK,CAAC,QAAQ,CAAC,CAAC;QADsB,aAAQ,GAAR,QAAQ,CAAU;QAF1D,eAAU,GAAG,oBAAoB,CAAC,QAAQ,CAAC;IAI3C,CAAC;IAED,eAAe;QACb,MAAM,YAAY,GAAG,KAAK,CAAC,eAAe,EAAE,CAAC;QAE7C,IAAI,YAAY,EAAE;YAChB,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;SACxD;IACH,CAAC;IAED,kBAAkB;QAChB,MAAM,WAAW,GAAG,CAAC,OAAwB,EAAoB,EAAE;YACjE,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAE1D,OAAO,OAAO,CAAC,KAAK,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBAC7C,CAAC,CAAC,EAAE,gBAAgB,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,UAAU,EAAE,IAAI,EAAE,EAAE;gBACnE,CAAC,CAAC,IAAI,CAAC;QACX,CAAC,CAAC;QAEF,OAAO,CAAC,WAAW,CAAC,CAAC;IACvB,CAAC;;mHAzBU,sBAAsB;uGAAtB,sBAAsB,6CAFtB,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC,iDCZ7E,shBAmBA;2FDLa,sBAAsB;kBALlC,SAAS;mBAAC;oBACT,QAAQ,EAAE,oBAAoB;oBAC9B,WAAW,EAAE,kCAAkC;oBAC/C,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,eAAe,EAAE,CAAC;iBAC5E","sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, Injector } from '@angular/core';\nimport { AbstractControl, ValidationErrors, ValidatorFn } from '@angular/forms';\nimport { IViewComponent } from '@helix/platform/view/runtime';\nimport { AdaptRxDatetimeAdapter, RxDatetimePickerMode } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { BaseRecordEditorFieldComponent } from '../../base-record-editor-field/runtime/base-record-editor-field-component.class';\nimport { DateTimeAdapter } from './date-time-adapter.class';\n\n@Component({\n  selector: 'rx-date-time-field',\n  templateUrl: './date-time-field.component.html',\n  providers: [{ provide: AdaptRxDatetimeAdapter, useClass: DateTimeAdapter }]\n})\nexport class DateTimeFieldComponent extends BaseRecordEditorFieldComponent implements IViewComponent {\n  pickerMode = RxDatetimePickerMode.DateTime;\n\n  constructor(injector: Injector, private datePipe: DatePipe) {\n    super(injector);\n  }\n\n  getDisplayValue(): string {\n    const displayValue = super.getDisplayValue();\n\n    if (displayValue) {\n      return this.datePipe.transform(displayValue, 'medium');\n    }\n  }\n\n  getFieldValidators(): ValidatorFn[] {\n    const validatorFn = (control: AbstractControl): ValidationErrors => {\n      const date = control.value ? moment(control.value) : null;\n\n      return control.value && date && !date.isValid()\n        ? { rxDatetimeFormat: { mode: this.pickerMode, hasSeconds: true } }\n        : null;\n    };\n\n    return [validatorFn];\n  }\n}\n","<ng-container *ngIf=\"!isHidden\">\n  <rx-read-only-field\n    *ngIf=\"inReadState; else editStateElementRef\"\n    [label]=\"label\"\n    [value]=\"getDisplayValue()\"\n  ></rx-read-only-field>\n</ng-container>\n\n<ng-template #editStateElementRef>\n  <adapt-rx-datetime\n    [label]=\"label\"\n    [required]=\"isRequired\"\n    [formControl]=\"formControl\"\n    [readonly]=\"isDisabled\"\n    [disabledStyleForReadonlyState]=\"true\"\n    [mode]=\"pickerMode\"\n    hasSeconds=\"true\"\n  ></adapt-rx-datetime>\n</ng-template>\n"]}