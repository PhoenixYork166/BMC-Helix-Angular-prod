{"version":3,"file":"approval-notifications.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/approval-notifications/approval-notifications.component.ts","../../../../../../../libs/platform/admin/components/approval-notifications/approval-notifications.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { RX_APPROVAL_NOTIFICATIONS } from './approval-notifications.constant';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RX_APPLICATION,\n  RxDefinitionNameService,\n  RxGlobalCacheService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RxApprovalNotificationsDataPageService } from './approval-notifications-data-page.service';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { filter, find, flow, forEach, groupBy, map as _map, map, noop, values } from 'lodash';\nimport { RxApprovalNotificationsService } from './approval-notifications.service';\nimport { AdaptModalService, RxSelectOptionsGroup } from '@bmc-ux/adapt-angular';\nimport { ApprovalNotificationEditorComponent } from './approval-notification-editor/approval-notification-editor.component';\nimport { IApprovalNotification, IApprovalNotificationData, IApprovalTemplate } from './approval-notifications.types';\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration/approval-configuration.constant';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\n\n@Component({\n  selector: 'rx-admin-approval-notifications',\n  templateUrl: './approval-notifications.component.html'\n})\nexport class ApprovalNotificationsComponent extends BaseViewComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n  editMode: boolean;\n\n  @ViewChild('recordGrid', { static: true })\n  recordGridComponent: RecordGridComponent;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private adaptModalService: AdaptModalService,\n    private translateService: TranslateService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxApprovalNotificationsDataPageService: RxApprovalNotificationsDataPageService,\n    private rxApprovalNotificationsService: RxApprovalNotificationsService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.editMode = false;\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: () => {\n                this.deleteNotification();\n              }\n            }\n          ]\n        }\n      ],\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      styles: 'flex-fill',\n      enableRowSelection: RowSelectionMode.Multiple\n    });\n  }\n\n  createApprovalNotification(): void {\n    this.editMode = false;\n\n    this.initializeApprovalNotificationForm({\n      notificationName: '',\n      primaryRecordName: ''\n    });\n  }\n\n  initializeApprovalNotificationForm(approvalNotification: IApprovalNotification): void {\n    forkJoin([\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.name,\n          propertySelection: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName,\n          queryExpression: `('${RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7}'!=$NULL$ OR '${RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7}'!=\"\")`\n        }\n      }),\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: 'AR System Administration: TextTemplate',\n          propertySelection: values(RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields).join()\n        }\n      }),\n      this.rxGlobalCacheService.getBundleDescriptors()\n    ]).subscribe(([apFormInstances, emailTemplateInstances, bundleDescriptors]) => {\n      const globalLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.global-items.label');\n\n      const recordDefinitions: RxSelectOptionsGroup[] = flow(\n        (instanceData) =>\n          map(instanceData, (recordInstance) => {\n            const bundleDescriptor = find(bundleDescriptors, {\n              id: this.rxDefinitionNameService.getBundleId(\n                recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n              )\n            });\n\n            return {\n              value: recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName],\n              displayValue: this.rxDefinitionNameService.getDisplayName(\n                recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n              ),\n              applicationName: bundleDescriptor?.friendlyName || bundleDescriptor?.id || globalLabel\n            };\n          }),\n        (definitions) => groupBy(definitions, 'applicationName'),\n        (optionsByApplicationName) =>\n          map(optionsByApplicationName, (options, applicationName) => ({\n            name: applicationName,\n            children: _map(options, (option) => {\n              return {\n                value: option.value,\n                displayValue: option.displayValue\n              };\n            })\n          }))\n      )(apFormInstances.data);\n\n      const templateList: IApprovalTemplate[] = [];\n\n      if (emailTemplateInstances.data.length) {\n        const nonApprovalTemplates = filter(emailTemplateInstances.data, function (template) {\n          return (\n            template[RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields.applicationBundleId] !==\n            RX_APPLICATION.approvalBundleId\n          );\n        });\n\n        forEach(nonApprovalTemplates, function (template) {\n          templateList.push({\n            name: template[RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields.name],\n            guid: template[RX_RECORD_DEFINITION.coreFieldIds.id]\n          });\n        });\n      }\n\n      const title = this.editMode\n        ? this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.notification-configuration.edit-approval-notification.title'\n          )\n        : this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.notification-configuration.new-approval-notification.title'\n          );\n\n      this.openModal(title, {\n        approvalNotification: this.editMode\n          ? approvalNotification\n          : {\n              notificationName: '',\n              primaryRecordName: ''\n            },\n        recordDefinitions,\n        templateList: templateList\n      });\n    });\n  }\n\n  private openModal(title: string, data: IApprovalNotificationData): void {\n    this.rxModalService\n      .openModal({\n        title: title,\n        content: ApprovalNotificationEditorComponent,\n        data: {\n          ...data\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.recordGridComponent.api.refresh().subscribe();\n          this.editMode = false;\n        }\n      })\n      .catch(noop);\n  }\n\n  deleteNotification(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.delete-selected-notification-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const selectedApprovalNotifications = this.recordGridComponent.api.getSelectedRows();\n\n          const selectedApprovalNotificationsIds = map(\n            selectedApprovalNotifications,\n            RX_RECORD_DEFINITION.coreFieldIds.id\n          );\n\n          this.rxApprovalNotificationsService\n            .deleteApprovalNotifications(selectedApprovalNotificationsIds)\n            .subscribe(() => {\n              this.rxNotificationService.addSuccessMessage(\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.approval.notification-configuration.notification-deleted.message'\n                )\n              );\n\n              this.recordGridComponent.api.refresh().subscribe();\n            });\n        }\n      });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const propertySelection = <[]>Object.values(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields);\n    const additionalQueryExpression = `('${RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationBundleId}' != $NULL$)`;\n\n    const queryExpression = queryParams.queryExpression\n      ? '(' +\n        additionalQueryExpression.substring(1, additionalQueryExpression.length - 1) +\n        ' AND ' +\n        queryParams.queryExpression.substring(1, queryParams.queryExpression.length - 1) +\n        ')'\n      : additionalQueryExpression;\n\n    queryParams = {\n      ...queryParams,\n      propertySelection: propertySelection,\n      queryExpression: queryExpression\n    };\n\n    return this.rxApprovalNotificationsDataPageService.get({ params: queryParams });\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notificationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notifyOn,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.new-signature.name'\n            ),\n            1: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.approve.name'\n            ),\n            2: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reject.name'\n            ),\n            9: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reassign.name'\n            ),\n            10: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.error.name'\n            ),\n            11: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.cancel.name'\n            ),\n            12: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info-provided.name'\n            ),\n            16: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.hold.name'\n            ),\n            17: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info.name'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.method,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            2: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.email.name'\n            ),\n            5: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.process.name'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.status,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.active.value'\n            ),\n            1: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.inactive.value'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.globalNotification,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant('com.bmc.arsys.rx.client.common.no.label'),\n            1: this.translateService.instant('com.bmc.arsys.rx.client.common.yes.label')\n          }\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notificationName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-name.title'\n        ),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, clickedColumnRow: IRowDataItem) =>\n              this.editApprovalNotification(clickedColumnRow)\n          }\n        ]\n      },\n      {\n        index: 1,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.record-definition.title'\n        ),\n        filterable: false\n      },\n      {\n        index: 2,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.id.title'\n        ),\n        visible: false\n      },\n      {\n        index: 3,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notifyOn),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notify-on.title'\n        )\n      },\n      {\n        index: 4,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.method),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-method.title'\n        )\n      },\n      {\n        index: 5,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.title'\n        )\n      },\n      {\n        index: 6,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.globalNotification),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.global-notification.title'\n        )\n      }\n    ];\n  }\n\n  editApprovalNotification(approvalNotificationRow: IRowDataItem): void {\n    this.editMode = true;\n\n    this.rxApprovalNotificationsService\n      .getApprovalNotification(approvalNotificationRow[RX_RECORD_DEFINITION.coreFieldIds.id])\n      .subscribe((approvalNotification: IApprovalNotification) => {\n        this.initializeApprovalNotificationForm(approvalNotification);\n      });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.title' | translate }}\">\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"createApprovalNotification()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n\n  <rx-record-grid rx-id=\"approval-notifications-grid\" #recordGrid [config]=\"gridConfig\"></rx-record-grid>\n</rx-admin-settings>\n"]}