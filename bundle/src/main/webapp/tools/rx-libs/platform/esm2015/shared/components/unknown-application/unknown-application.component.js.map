{"version":3,"file":"unknown-application.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/shared/components/unknown-application/unknown-application.component.ts","../../../../../../../libs/platform/shared/components/unknown-application/unknown-application.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { forkJoin } from 'rxjs';\nimport {\n  IBundleDescriptor,\n  RX_APPLICATION,\n  RxAngularApplicationService,\n  RxCurrentUserService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { filter, remove, sortBy } from 'lodash';\n\n@Component({\n  selector: 'rx-unknown-application',\n  templateUrl: './unknown-application.component.html',\n  styleUrls: ['./unknown-application.component.scss']\n})\nexport class RxUnknownApplicationComponent {\n  applications$ = this.rxGlobalCacheService.getBundleDescriptors().pipe(\n    switchMap((bundleDescriptors: IBundleDescriptor[]) => {\n      const applicationBundleDescriptors = filter(bundleDescriptors, { isApplication: true, isLicensed: true });\n\n      remove(applicationBundleDescriptors, { id: RX_APPLICATION.settingsBundleId });\n\n      if (!this.rxCurrentUserService.isAdministrator()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.dataloadBundleId });\n      }\n\n      if (!this.rxCurrentUserService.isAdministrator() && !this.rxCurrentUserService.isBusinessAnalyst()) {\n        remove(applicationBundleDescriptors, { id: RX_APPLICATION.innovationStudioBundleId });\n      }\n\n      const applications = sortBy(\n        applicationBundleDescriptors,\n        (bundleDescriptor: IBundleDescriptor) => bundleDescriptor.friendlyName\n      ).map((app: IBundleDescriptor) =>\n        this.rxAngularApplicationService.isAngularJsApplication(app.id).pipe(\n          map((isAngularJsApplication: boolean) => {\n            let url: string;\n\n            if (app.hasCustomEntryPoint && app.id !== RX_APPLICATION.innovationStudioBundleId) {\n              url = `/${app.id}/index.html`;\n            } else if (isAngularJsApplication) {\n              url = `/innovationsuite/index.html#/${app.id}`;\n            } else {\n              url = `/helix/index.html#/${app.id}`;\n            }\n\n            return {\n              id: app.id,\n              friendlyName: app.friendlyName,\n              url\n            };\n          })\n        )\n      );\n\n      return forkJoin(applications);\n    }),\n    tap(() => {\n      this.title.setTitle('Helix');\n      this.rxGlobalCacheService.applicationId = 'unknown-application';\n    })\n  );\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxAngularApplicationService: RxAngularApplicationService,\n    private title: Title\n  ) {}\n}\n","<h3>\n  The page you are trying to reach does not exist. Please open one of the applications below and bookmark it for future\n  reference.\n</h3>\n<ul>\n  <li *ngFor=\"let app of applications$ | async\">\n    <a [href]=\"app.url\">{{ app.friendlyName }}</a>\n  </li>\n</ul>\n"]}