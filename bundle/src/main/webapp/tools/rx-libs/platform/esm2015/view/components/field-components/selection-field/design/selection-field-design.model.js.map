{"version":3,"file":"selection-field-design.model.js","sourceRoot":"","sources":["../../../../../../../../../libs/platform/view/components/field-components/selection-field/design/selection-field-design.model.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AAEnC,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AACrC,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAA6B,0BAA0B,EAAE,MAAM,mCAAmC,CAAC;AAE1G,OAAO,EAAE,2BAA2B,EAAE,MAAM,6EAA6E,CAAC;AAC1H,OAAO,EAAE,kBAAkB,EAAE,MAAM,6BAA6B,CAAC;AAGjE,MAAM,OAAO,yBAA0B,SAAQ,2BAA2B;IAOxE,YAAmB,QAAkB,EAAS,OAA+D;QAC3G,KAAK,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;QADR,aAAQ,GAAR,QAAQ,CAAU;QAAS,YAAO,GAAP,OAAO,CAAwD;QAN7G,uBAAkB,GAAG,CAAC,oBAAoB,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAEpE,iBAAY,GAAuB,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC,IAAI,CACvE,GAAG,CAAC,CAAC,mBAAmB,EAAE,EAAE,CAAC,mBAAmB,CAAC,WAAW,CAAC,CAC9D,CAAC;IAIF,CAAC;IAED,MAAM,CAAC,oBAAoB,CAAC,iBAA6C;QACvE,qDACK,2BAA2B,CAAC,oBAAoB,EAAE,KACrD,WAAW,EAAE,kBAAkB,CAAC,gBAAgB,CAAC,QAAQ,KACtD,iBAAiB,EACpB;IACJ,CAAC;IAED,kBAAkB;QAChB,OAAO,KAAK;aACT,kBAAkB,EAAE;aACpB,IAAI,CAAC,GAAG,CAAC,CAAC,eAA6C,EAAE,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IAC7G,CAAC;IAEO,mBAAmB,CAAC,eAA6C;QACvE,MAAM,iBAAiB,GAAG,SAAS,CACjC,eAAe,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,QAAQ,EACnD,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,OAAO,CAChC,CAAC;QAEF,MAAM,kBAAkB,GAAG;YACzB,IAAI,EAAE,aAAa;YACnB,SAAS,EAAE,0BAA0B;YACrC,OAAO,EAAE;gBACP,KAAK,EAAE,cAAc;gBACrB,QAAQ,EAAE,KAAK;gBACf,OAAO,EAAE;oBACP;wBACE,EAAE,EAAE,kBAAkB,CAAC,gBAAgB,CAAC,QAAQ;wBAChD,IAAI,EAAE,kBAAkB,CAAC,WAAW,CAAC,QAAQ;qBAC9C;oBACD;wBACE,EAAE,EAAE,kBAAkB,CAAC,gBAAgB,CAAC,YAAY;wBACpD,IAAI,EAAE,kBAAkB,CAAC,WAAW,CAAC,YAAY;qBAClD;iBACF;aAC2B;SAC/B,CAAC;QAEF,IAAI,iBAAiB,KAAK,CAAC,CAAC,EAAE;YAC5B,eAAe,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,EAAE,CAAC,EAAE,kBAAkB,CAAC,CAAC;SACtG;QAED,OAAO,eAAe,CAAC;IACzB,CAAC;CACF","sourcesContent":["import { Injector } from '@angular/core';\nimport { findIndex } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { ISelectFormControlOptions, SelectFormControlComponent } from '@helix/platform/shared/components';\nimport { IViewComponentDesignSandbox, IViewDesignerInspectorConfig } from '@helix/platform/view/designer';\nimport { BaseRecordEditorFieldDesign } from '../../base-record-editor-field/design/base-record-editor-field-design.class';\nimport { RX_SELECTION_FIELD } from '../selection-field.constant';\nimport { ISelectionFieldProperties } from './selection-field-design.types';\n\nexport class SelectionFieldDesignModel extends BaseRecordEditorFieldDesign {\n  fieldResourceTypes = [RX_RECORD_DEFINITION.resourceTypes.selection];\n\n  editingMode$: Observable<string> = this.sandbox.componentProperties$.pipe(\n    map((componentProperties) => componentProperties.editingMode)\n  );\n\n  constructor(public injector: Injector, public sandbox: IViewComponentDesignSandbox<ISelectionFieldProperties>) {\n    super(injector, sandbox);\n  }\n\n  static getInitialProperties(initialProperties?: ISelectionFieldProperties): ISelectionFieldProperties {\n    return {\n      ...BaseRecordEditorFieldDesign.getInitialProperties(),\n      editingMode: RX_SELECTION_FIELD.editingModeValue.dropdown,\n      ...initialProperties\n    };\n  }\n\n  getInspectorConfig(): Observable<IViewDesignerInspectorConfig> {\n    return super\n      .getInspectorConfig()\n      .pipe(map((inspectorConfig: IViewDesignerInspectorConfig) => this.editInspectorConfig(inspectorConfig)));\n  }\n\n  private editInspectorConfig(inspectorConfig: IViewDesignerInspectorConfig): IViewDesignerInspectorConfig {\n    const valueControlIndex = findIndex(\n      inspectorConfig.inspectorSectionConfigs[0].controls,\n      (item) => item.name === 'value'\n    );\n\n    const editingModeControl = {\n      name: 'editingMode',\n      component: SelectFormControlComponent,\n      options: {\n        label: 'Editing mode',\n        required: false,\n        options: [\n          {\n            id: RX_SELECTION_FIELD.editingModeValue.dropdown,\n            name: RX_SELECTION_FIELD.editingMode.dropdown\n          },\n          {\n            id: RX_SELECTION_FIELD.editingModeValue.radioButtons,\n            name: RX_SELECTION_FIELD.editingMode.radioButtons\n          }\n        ]\n      } as ISelectFormControlOptions\n    };\n\n    if (valueControlIndex !== -1) {\n      inspectorConfig.inspectorSectionConfigs[0].controls.splice(valueControlIndex, 0, editingModeControl);\n    }\n\n    return inspectorConfig;\n  }\n}\n"]}