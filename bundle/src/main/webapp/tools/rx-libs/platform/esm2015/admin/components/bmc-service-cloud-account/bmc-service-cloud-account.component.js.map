{"version":3,"file":"bmc-service-cloud-account.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/bmc-service-cloud-account/bmc-service-cloud-account.component.ts","../../../../../../../libs/platform/admin/components/bmc-service-cloud-account/bmc-service-cloud-account.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAClD,OAAO,EAAE,WAAW,EAAa,MAAM,gBAAgB,CAAC;AAExD,OAAO,EAAE,oBAAoB,EAAE,qBAAqB,EAAE,4BAA4B,EAAE,MAAM,4BAA4B,CAAC;AACvH,OAAO,EAAE,iBAAiB,EAAE,MAAM,8BAA8B,CAAC;AAEjE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;;;;;;;AAOvD,MAAM,OAAO,oCAAqC,SAAQ,iBAAiB;IAOzE,YACU,WAAwB,EACxB,oBAA0C,EAC1C,qBAA4C,EAC5C,4BAA0D,EAC1D,gBAAkC;QAE1C,KAAK,EAAE,CAAC;QANA,gBAAW,GAAX,WAAW,CAAa;QACxB,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,iCAA4B,GAA5B,4BAA4B,CAA8B;QAC1D,qBAAgB,GAAhB,gBAAgB,CAAkB;QAV5C,oBAAe,GAAY,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,CAAC;QAG/D,gBAAW,GAAG,wCAAwC,CAAC;IAU/D,CAAC;IAEO,gBAAgB;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAClG,IAAI,CAAC,gCAAgC,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAe,CAAC,CAAC,CAAC;QACrF,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU;QACR,MAAM,SAAS,GAAkC,IAAI,CAAC,gCAAgC,CAAC,WAAW,EAAE,CAAC;QAErG,IAAI,CAAC,4BAA4B,CAAC,gBAAgB,CAAC,IAAI,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAC7F,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAC1C,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,iFAAiF,CAAC,CACjH,CAAC;YACF,IAAI,CAAC,gCAAgC,CAAC,cAAc,EAAE,CAAC;QACzD,CAAC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,qBAAqB,CAAC,KAAK,EAAE;YAChC,OAAO,EAAE,GAAG,EAAE,WAAC,OAAA,MAAA,IAAI,CAAC,gCAAgC,0CAAE,KAAK,CAAA,EAAA;SAC5D,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,eAAe,EAAE;YACxB,IAAI,CAAC,gCAAgC,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;gBAC7D,QAAQ,EAAE,EAAE;gBACZ,YAAY,EAAE,EAAE;gBAChB,aAAa,EAAE,EAAE;gBACjB,gBAAgB,EAAE,EAAE;gBACpB,uBAAuB,EAAE,EAAE;gBAC3B,iBAAiB,EAAE,EAAE;aACtB,CAAC,CAAC;YAEH,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACzB;IACH,CAAC;;iIAnDU,oCAAoC;qHAApC,oCAAoC,iGCbjD,i/EA2EA;2FD9Da,oCAAoC;kBALhD,SAAS;mBAAC;oBACT,QAAQ,EAAE,oCAAoC;oBAC9C,WAAW,EAAE,0CAA0C;oBACvD,SAAS,EAAE,CAAC,4CAA4C,CAAC;iBAC1D","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { RxCurrentUserService, RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { IBmcServiceCloudAccountConfig } from './bmc-service-cloud-account.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-bmc-service-cloud-account',\n  templateUrl: 'bmc-service-cloud-account.component.html',\n  styleUrls: ['./bmc-service-cloud-account.component.scss']\n})\nexport class BmcServiceCloudAccountAdminComponent extends BaseViewComponent implements OnInit {\n  bmcServiceCloudAccountConfigForm: FormGroup;\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n  busy: Subscription;\n\n  private settingName = 'errorReportingServiceSaasConfiguration';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  private getConfiguration(): void {\n    this.busy = this.rxSystemConfigurationService.getConfiguration(this.settingName).subscribe((data) => {\n      this.bmcServiceCloudAccountConfigForm.patchValue(JSON.parse(data.value as string));\n    });\n  }\n\n  saveConfig(): void {\n    const formValue: IBmcServiceCloudAccountConfig = this.bmcServiceCloudAccountConfigForm.getRawValue();\n\n    this.rxSystemConfigurationService.setConfiguration(this.settingName, formValue).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.save-successful.message')\n      );\n      this.bmcServiceCloudAccountConfigForm.markAsPristine();\n    });\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.bmcServiceCloudAccountConfigForm?.dirty\n    });\n\n    if (this.isAdministrator) {\n      this.bmcServiceCloudAccountConfigForm = this.formBuilder.group({\n        clientId: '',\n        clientSecret: '',\n        dataCenterUrl: '',\n        authorizationUrl: '',\n        serviceCloudInstanceUrl: '',\n        supportCentralUrl: ''\n      });\n\n      this.getConfiguration();\n    }\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <form [formGroup]=\"bmcServiceCloudAccountConfigForm\">\n    <adapt-rx-textfield\n      rx-id=\"client-id\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-id.label' | translate }}\"\n      formControlName=\"clientId\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"client-secret\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-secret.label' | translate }}\"\n      formControlName=\"clientSecret\"\n      required=\"true\"\n      [isPassword]=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"data-center-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.data-center-url.label' | translate }}\"\n      formControlName=\"dataCenterUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"authorization-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.authorization-url.label' | translate }}\"\n      formControlName=\"authorizationUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"service-cloud-instance-url\"\n      label=\"{{\n        'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.service-cloud-instance-url.label' | translate\n      }}\"\n      formControlName=\"serviceCloudInstanceUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"support-central-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.support-central-url.label' | translate }}\"\n      formControlName=\"supportCentralUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"bmcServiceCloudAccountConfigForm.pristine || bmcServiceCloudAccountConfigForm.invalid\"\n      (click)=\"saveConfig()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </form>\n</rx-admin-settings>\n"]}