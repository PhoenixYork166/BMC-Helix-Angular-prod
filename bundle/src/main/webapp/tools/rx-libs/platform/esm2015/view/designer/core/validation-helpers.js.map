{"version":3,"file":"validation-helpers.js","sourceRoot":"","sources":["../../../../../../../libs/platform/view/designer/core/validation-helpers.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;AAClC,OAAO,EAGL,iCAAiC,EACjC,mBAAmB,EACpB,MAAM,0BAA0B,CAAC;AAElC,MAAM,UAAU,oBAAoB,CAAC,GAA0B;IAC7D,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvE,CAAC;AAED,MAAM,UAAU,qBAAqB,CAAC,MAAc;IAClD,MAAM,gBAAgB,GAA0C,EAAE,CAAC;IAEnE,IAAI,MAAM,EAAE;QACV,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAE/B,IAAI,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE;YACnC,gBAAgB,CAAC,IAAI,CAAC;gBACpB,IAAI,EAAE,OAAO;gBACb,YAAY,EAAE,QAAQ;gBACtB,WAAW,EAAE,4BAA4B;aAC1C,CAAC,CAAC;SACJ;KACF;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAED,MAAM,UAAU,8BAA8B,CAAC,KAAe;IAC5D,MAAM,gBAAgB,GAA0C,EAAE,CAAC;IAEnE,IAAI,CAAC,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,MAAM,CAAA,EAAE;QAClB,gBAAgB,CAAC,IAAI,CAAC;YACpB,IAAI,EAAE,OAAO;YACb,YAAY,EAAE,iCAAiC;YAC/C,WAAW,EAAE,uCAAuC;SACrD,CAAC,CAAC;KACJ;IAED,OAAO,gBAAgB,CAAC;AAC1B,CAAC;AAID,MAAM,UAAU,qBAAqB,CAAC,KAAsC;IAC1E,OAAO;QACL,GAAG,qBAAqB,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;QACpD,GAAG,8BAA8B,CAAC,KAAK,CAAC,iCAAiC,CAAC,CAAC;KAC5E,CAAC;AACJ,CAAC","sourcesContent":["import { ITagsFormControlModel } from '@helix/platform/shared/components';\nimport { IViewComponentDesignValidationIssue } from '../public-interfaces';\nimport { isObject } from 'lodash';\nimport {\n  IRxAvailableOnDevicesProp,\n  IRxStylesProp,\n  RX_AVAILABLE_ON_DEVICES_PROP_NAME,\n  RX_STYLES_PROP_NAME\n} from '@helix/platform/view/api';\n\nexport function validateCssClassName(tag: ITagsFormControlModel): boolean {\n  return !/^[a-z][-\\w]+$/gi.test(isObject(tag) ? tag.data.value : tag);\n}\n\nexport function validateCssClassNames(styles: string): IViewComponentDesignValidationIssue[] {\n  const validationIssues: IViewComponentDesignValidationIssue[] = [];\n\n  if (styles) {\n    const tags = styles.split(' ');\n\n    if (tags.some(validateCssClassName)) {\n      validationIssues.push({\n        type: 'error',\n        propertyName: 'styles',\n        description: 'CSS class name is invalid.'\n      });\n    }\n  }\n\n  return validationIssues;\n}\n\nexport function validateAvailableOnDevicesProp(value: string[]): IViewComponentDesignValidationIssue[] {\n  const validationIssues: IViewComponentDesignValidationIssue[] = [];\n\n  if (!value?.length) {\n    validationIssues.push({\n      type: 'error',\n      propertyName: RX_AVAILABLE_ON_DEVICES_PROP_NAME,\n      description: 'At least one device must be selected.'\n    });\n  }\n\n  return validationIssues;\n}\n\ninterface IRxValidateStandardPropsPayload extends IRxStylesProp, IRxAvailableOnDevicesProp {}\n\nexport function validateStandardProps(model: IRxValidateStandardPropsPayload): IViewComponentDesignValidationIssue[] {\n  return [\n    ...validateCssClassNames(model[RX_STYLES_PROP_NAME]),\n    ...validateAvailableOnDevicesProp(model[RX_AVAILABLE_ON_DEVICES_PROP_NAME])\n  ];\n}\n"]}