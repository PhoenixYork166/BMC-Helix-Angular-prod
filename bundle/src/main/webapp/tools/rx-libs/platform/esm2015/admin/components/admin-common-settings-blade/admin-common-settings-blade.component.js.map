{"version":3,"file":"admin-common-settings-blade.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/admin-common-settings-blade/admin-common-settings-blade.component.ts","../../../../../../../libs/platform/admin/components/admin-common-settings-blade/admin-common-settings-blade.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAU,SAAS,EAAE,MAAM,eAAe,CAAC;AACvE,OAAO,EAAE,cAAc,EAAE,kBAAkB,EAAE,MAAM,uBAAuB,CAAC;AAC3E,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AACtD,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AACnC,OAAO,EAAE,KAAK,EAA4B,MAAM,MAAM,CAAC;AAEvD,OAAO,EAAE,4BAA4B,EAAE,MAAM,2CAA2C,CAAC;;;;;;AASzF,MAAM,OAAO,iCAAkC,SAAQ,YAAY;IAYjE,YACY,OAA2B,EAC3B,QAAkB,EAClB,4BAA0D;QAEpE,KAAK,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;QAJf,YAAO,GAAP,OAAO,CAAoB;QAC3B,aAAQ,GAAR,QAAQ,CAAU;QAClB,iCAA4B,GAA5B,4BAA4B,CAA8B;QALtE,qBAAgB,GAAiB,IAAI,CAAC;QASpC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/D,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjE,CAAC;IAED,QAAQ;QACN,KAAK,CAAC,QAAQ,EAAE,CAAC;QACjB,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QAEpC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QAC5C,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC;QACzD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC;IACnD,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,kCAAkC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kCAAkC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC;IAC/G,CAAC;IAED,aAAa;QACX,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACjD,CAAC;IAED,MAAM,CAAC,MAAe;;QACpB,IAAI,MAAM,EAAE;YACV,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;SAC3C;aAAM;YACL,MAAA,IAAI,CAAC,gBAAgB,0CAAE,WAAW,EAAE,CAAC;SACtC;IACH,CAAC;IAED,mBAAmB,CAAC,OAAmC;QACrD,OAAO,IAAI,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;IACxE,CAAC;IAED,mBAAmB,CAAC,OAAmC;QACrD,OAAO,IAAI,CAAC,4BAA4B,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC;IACxE,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;IAC3B,CAAC;;8HA7DU,iCAAiC;kHAAjC,iCAAiC,2NCf9C,+lBAiBA;2FDFa,iCAAiC;kBAL7C,SAAS;mBAAC;oBACT,QAAQ,EAAE,gCAAgC;oBAC1C,WAAW,EAAE,8CAA8C;oBAC3D,SAAS,EAAE,CAAC,8CAA8C,CAAC;iBAC5D;2KAGC,kCAAkC;sBADjC,SAAS;uBAAC,QAAQ","sourcesContent":["import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { cloneDeep } from 'lodash';\nimport { NEVER, Observable, Subscription } from 'rxjs';\nimport { ICommonSettingsGroup } from '../admin-common-settings/admin-common-settings.types';\nimport { RxAdminCommonSettingsService } from '../services/admin-common-settings.service';\nimport { IGetRecordGridConfigParams, IOpenSettingsDetailsParams } from '../services/admin-common-settings.types';\nimport { IRecordGridConfig } from '@helix/platform/view/components';\n\n@Component({\n  selector: 'rx-admin-common-settings-blade',\n  templateUrl: './admin-common-settings-blade.component.html',\n  styleUrls: ['./admin-common-settings-blade.component.scss']\n})\nexport class AdminCommonSettingsBladeComponent extends RxModalClass implements OnInit {\n  @ViewChild('editor')\n  adminCommonSettingsEditorComponent;\n\n  groups: ICommonSettingsGroup[];\n  isNew: boolean;\n  ownerKeyValue: string;\n  childOwnerKeyValue: string;\n  componentName: string;\n  isChildSetting: boolean;\n  busySubscription: Subscription = null;\n\n  constructor(\n    protected context: DockedPanelContext,\n    protected injector: Injector,\n    protected rxAdminCommonSettingsService: RxAdminCommonSettingsService\n  ) {\n    super(context, injector);\n\n    this.getRecordGridConfig = this.getRecordGridConfig.bind(this);\n    this.openSettingsDetails = this.openSettingsDetails.bind(this);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    const data = this.context.getData();\n\n    this.groups = cloneDeep(data.config.groups);\n    this.isNew = data.config.isNew;\n    this.ownerKeyValue = data.config.ownerKeyValue;\n    this.childOwnerKeyValue = data.config.childOwnerKeyValue;\n    this.componentName = data.config.componentName;\n    this.isChildSetting = data.config.isChildSetting;\n  }\n\n  isDirty(): boolean {\n    return this.adminCommonSettingsEditorComponent ? !this.adminCommonSettingsEditorComponent.canClose() : false;\n  }\n\n  onCloseEditor(): void {\n    this.context.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  onBusy(isBusy: boolean): void {\n    if (isBusy) {\n      this.busySubscription = NEVER.subscribe();\n    } else {\n      this.busySubscription?.unsubscribe();\n    }\n  }\n\n  getRecordGridConfig(options: IGetRecordGridConfigParams): Observable<IRecordGridConfig> {\n    return this.rxAdminCommonSettingsService.getRecordGridConfig(options);\n  }\n\n  openSettingsDetails(options: IOpenSettingsDetailsParams): Promise<any> {\n    return this.rxAdminCommonSettingsService.openSettingsDetails(options);\n  }\n\n  onSave(): void {\n    this.context.close(null);\n  }\n}\n","<rx-admin-settings [busy]=\"busySubscription\">\n  <rx-admin-common-settings-editor\n    #editor\n    [componentName]=\"componentName\"\n    [isNew]=\"isNew\"\n    [groups]=\"groups\"\n    [isChildSetting]=\"isChildSetting\"\n    [ownerKeyValue]=\"ownerKeyValue\"\n    [childOwnerKeyValue]=\"childOwnerKeyValue\"\n    [createPermission]=\"true\"\n    [getRecordGridConfig]=\"getRecordGridConfig\"\n    [openSettingsDetails]=\"openSettingsDetails\"\n    (closeEditor)=\"onCloseEditor()\"\n    (busy)=\"onBusy($event)\"\n    (save)=\"onSave()\"\n  ></rx-admin-common-settings-editor>\n</rx-admin-settings>\n"]}