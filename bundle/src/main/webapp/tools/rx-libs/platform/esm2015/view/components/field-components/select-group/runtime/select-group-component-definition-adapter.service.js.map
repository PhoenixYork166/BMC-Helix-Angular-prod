{"version":3,"file":"select-group-component-definition-adapter.service.js","sourceRoot":"","sources":["../../../../../../../../../libs/platform/view/components/field-components/select-group/runtime/select-group-component-definition-adapter.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAsD,kBAAkB,EAAE,MAAM,0BAA0B,CAAC;AAClH,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;;AAG9C,MAAM,OAAO,4CAA4C;IAEvD,eAAe,CAAC,mBAAmB;QACjC,mBAAmB,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,wBAAwB,EAAE,EAAE;YAC5E,MAAM,CAAC,wBAAwB,CAAC,gBAAgB,EAAE;gBAChD,QAAQ,EAAE,mBAAmB,CAAC,gBAAgB,CAAC,QAAQ;gBACvD,MAAM,EAAE,mBAAmB,CAAC,gBAAgB,CAAC,MAAM;gBACnD,KAAK,EAAE,MAAM,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,KAAK,CAAC;aAC/D,CAAC,CAAC;YAEH,OAAO,wBAAwB,CAAC,gBAAgB,CAAC,OAAO,CAAC;QAC3D,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG;YACb,OAAO,EAAE;gBACP;oBACE,IAAI,EAAE,kBAAkB,CAAC,iBAAiB;oBAC1C,OAAO,EAAE;wBACP;4BACE,QAAQ,EAAE,MAAM,CAAC,mBAAmB,CAAC,oBAAoB,EAAE,wBAAwB,CAAC,CAAC,GAAG,CACtF,CAAC,SAAS,EAAE,EAAE,CAAC,SAAS,CAAC,IAAI,CAC9B;yBACF;qBACF;iBACF;aACF;SACF,CAAC;QAEF,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,mBAAmB,CAAC,gBAAgB,EAAE;YAChF,UAAU;YACV,QAAQ;YACR,gBAAgB;YAChB,kBAAkB;SACnB,CAAC,CAAC;QAEH,mBAAmB,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IACtD,CAAC;;yIApCU,4CAA4C;6IAA5C,4CAA4C;2FAA5C,4CAA4C;kBADxD,UAAU","sourcesContent":["import { Injectable } from '@angular/core';\nimport { IDefinitionAdapter } from '@helix/platform/shared/api';\nimport { IContainerViewComponentDefinition, IViewDefinition, RX_VIEW_DEFINITION } from '@helix/platform/view/api';\nimport { assign, omit, sortBy } from 'lodash';\n\n@Injectable()\nexport class SelectGroupComponentDefinitionAdapterService\n  implements IDefinitionAdapter<IContainerViewComponentDefinition, IViewDefinition> {\n  adaptDefinition(componentDefinition) {\n    componentDefinition.componentDefinitions.forEach((childComponentDefinition) => {\n      assign(childComponentDefinition.propertiesByName, {\n        disabled: componentDefinition.propertiesByName.disabled,\n        hidden: componentDefinition.propertiesByName.hidden,\n        index: Number(childComponentDefinition.propertiesByName.index)\n      });\n\n      delete childComponentDefinition.propertiesByName.labelId;\n    });\n\n    const layout = {\n      outlets: [\n        {\n          name: RX_VIEW_DEFINITION.defaultOutletName,\n          columns: [\n            {\n              children: sortBy(componentDefinition.componentDefinitions, 'propertiesByName.index').map(\n                (component) => component.guid\n              )\n            }\n          ]\n        }\n      ]\n    };\n\n    componentDefinition.propertiesByName = omit(componentDefinition.propertiesByName, [\n      'disabled',\n      'hidden',\n      'recordInstance',\n      'recordDefinition'\n    ]);\n\n    componentDefinition.layout = JSON.stringify(layout);\n  }\n}\n"]}