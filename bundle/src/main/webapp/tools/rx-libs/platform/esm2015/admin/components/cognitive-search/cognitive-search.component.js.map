{"version":3,"file":"cognitive-search.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/cognitive-search/cognitive-search.component.ts","../../../../../../../libs/platform/admin/components/cognitive-search/cognitive-search.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, ElementRef, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport {\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RxBundleCacheService,\n  RxCurrentUserService,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, map, noop, omit } from 'lodash';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { CognitiveSearchEditorAdminComponent } from './cognitive-search-editor/cognitive-search-editor.component';\nimport { RX_COGNITIVE_SEARCH } from './cognitive-search.constant';\nimport { ISearchDataset } from './cognitive-search.interfaces';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\n\n@Component({\n  selector: 'rx-cognitive-search',\n  templateUrl: './cognitive-search.component.html'\n})\nexport class CognitiveSearchAdminComponent extends BaseViewComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n  searchDatasetTypes: ISearchDataset[];\n\n  @ViewChild('grid', { static: true })\n  grid: RecordGridComponent;\n\n  @ViewChild('dropdownButton', { static: true })\n  dropdownButton: ElementRef;\n\n  @ViewChild('searchDatasetConfigurationTemplate', { static: true })\n  searchDatasetConfigurationTemplate: TemplateRef<any>;\n\n  @ViewChild('definitionNameCellTemplate', { static: true })\n  definitionNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('datasetTypeTemplate', { static: true })\n  datasetTypeTemplate: TemplateRef<DataCellTemplateParams>;\n\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private translateService: TranslateService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.searchDatasetTypes = RX_COGNITIVE_SEARCH.searchDatasetTypeOptions.map((dataSetType) => ({\n      ...dataSetType,\n      displayName: this.translateService.instant(dataSetType.displayName)\n    }));\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: this.deleteSearchDataset.bind(this)\n            }\n          ]\n        }\n      ],\n      enableFiltering: true,\n      recordDefinitionName: RX_COGNITIVE_SEARCH.definitionName,\n      enableRowSelection: RowSelectionMode.Multiple,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      columns: this.getColumns(),\n      filterExpression: `${RX_COGNITIVE_SEARCH.queryExpression} \"${this.rxBundleCacheService.bundleId}\"`,\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({\n      params: {\n        ...omit(queryParams, ['searchText'])\n      }\n    });\n  }\n\n  createNewSearchDataset(datasetType: number): void {\n    this.openCognitiveSearchEditor(false, datasetType);\n  }\n\n  editSearchDataset(selectedRecord: IRowDataItem): void {\n    if (!this.isAdministrator) {\n      this.rxNotificationService.addWarningMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.warning.message')\n      );\n    } else {\n      this.openCognitiveSearchEditor(\n        true,\n        selectedRecord[RX_COGNITIVE_SEARCH.fields.searchDatasetType],\n        selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]\n      );\n    }\n  }\n\n  private deleteSearchDataset(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const deleteRequests$: Observable<any>[] = [];\n\n          map(this.grid.api.getSelectedRows(), (record) => {\n            deleteRequests$.push(\n              this.rxRecordInstanceService.delete(\n                RX_COGNITIVE_SEARCH.definitionName,\n                record[RX_RECORD_DEFINITION.coreFieldIds.id]\n              )\n            );\n          });\n\n          forkJoin(deleteRequests$).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-deletion.message')\n            );\n\n            this.grid.api.refresh().subscribe();\n          });\n        }\n      });\n  }\n\n  formatDataSource(dataSource: string): string {\n    return dataSource\n      ? map(JSON.parse(dataSource).recordDefinitions, (recordDefinitionName) =>\n          this.rxDefinitionNameService.getDisplayName(recordDefinitionName)\n        ).join(', ')\n      : '';\n  }\n\n  getDatasetType(searchDatasetType: number): string {\n    return find(this.searchDatasetTypes, { datasetType: searchDatasetType }).displayName;\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetName),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.editSearchDataset(selectedRow);\n            }\n          }\n        ]\n      },\n      {\n        index: 1,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.status.label')\n      },\n      {\n        index: 2,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label')\n      },\n      {\n        index: 3,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.searchDatasetType),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.type.title'),\n        cellTemplate: this.datasetTypeTemplate\n      },\n      {\n        index: 4,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.locale),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.locale.label')\n      },\n      {\n        index: 5,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.dataSource),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.record-definition.label'),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        index: 6,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.confidenceThreshold),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.confidence-threshold.label'\n        )\n      },\n      {\n        index: 7,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title'),\n        visible: false\n      },\n      {\n        index: 8,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.modifiedDate),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.date-modified.title'),\n        visible: false\n      },\n      {\n        index: 9,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.searchType),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.search-type.title'),\n        visible: false\n      },\n      {\n        index: 10,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.displayId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.request-id.title'),\n        visible: false\n      },\n      {\n        index: 11,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title'),\n        visible: false\n      },\n      {\n        index: 12,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetError),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.error.label'),\n        visible: false\n      },\n      {\n        index: 13,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.projectId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.project-id.title'),\n        visible: false\n      }\n    ];\n  }\n\n  private openCognitiveSearchEditor(isEditMode: boolean, datasetType: number, recordId?: string): Promise<any> {\n    return this.rxModalService\n      .openDockedPanel({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.cognitive-search-data-set.title'\n        ),\n        content: CognitiveSearchEditorAdminComponent,\n        data: {\n          isEditMode,\n          datasetType,\n          formatDataSource: this.formatDataSource.bind(this),\n          recordId\n        }\n      })\n      .then(() => {\n        this.grid.api.refresh().subscribe();\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.header.title' | translate }}\">\n  <ng-container>\n    <div class=\"dropdown\" adaptDropdown>\n      <button\n        adapt-button\n        #dropdownButton\n        adaptDropdownToggle\n        type=\"button\"\n        btn-type=\"tertiary\"\n        class=\"d-icon-plus_circle align-self-start\"\n        rx-id=\"new-button\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n      </button>\n\n      <div class=\"dropdown-menu\" adaptDropdownMenu>\n        <button\n          *ngFor=\"let dataset of searchDatasetTypes\"\n          class=\"dropdown-item\"\n          (click)=\"createNewSearchDataset(dataset.datasetType)\"\n          [disabled]=\"!isAdministrator\"\n        >\n          {{ dataset.displayName | translate }}\n        </button>\n      </div>\n    </div>\n\n    <rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n  </ng-container>\n</rx-admin-settings>\n\n<ng-template #definitionNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ formatDataSource(dataItem[column.field]) }}\n</ng-template>\n\n<ng-template #datasetTypeTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ getDatasetType(dataItem[column.field]) }}\n</ng-template>\n"]}