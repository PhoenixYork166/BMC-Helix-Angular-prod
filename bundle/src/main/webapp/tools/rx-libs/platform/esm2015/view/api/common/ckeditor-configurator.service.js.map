{"version":3,"file":"ckeditor-configurator.service.js","sourceRoot":"","sources":["../../../../../../../libs/platform/view/api/common/ckeditor-configurator.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { RxLocalizationService } from '@helix/platform/shared/api';\nimport { RxUrlUtilsService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RX_RICH_TEXT } from './rich-text.constant';\n\nconst RX_RICH_TEXT_STYLES = 'skins/rich-text/';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCkEditorConfiguratorService {\n  constructor(\n    private translateService: TranslateService,\n    private rxLocalizationService: RxLocalizationService,\n    private rxUrlUtilsService: RxUrlUtilsService\n  ) {}\n\n  getCKEditorConfig(): any {\n    return {\n      resize_enabled: false,\n      title: false,\n      skin: 'rich-text,' + RX_RICH_TEXT_STYLES,\n      toolbar: [\n        [\n          'Bold',\n          'Italic',\n          'Strike',\n          'Underline',\n          '-',\n          'NumberedList',\n          'BulletedList',\n          'Outdent',\n          'Indent',\n          '-',\n          'JustifyLeft',\n          'JustifyCenter',\n          'JustifyRight',\n          '-',\n          'Format',\n          'Styles',\n          'Font',\n          'FontSize',\n          'TextColor'\n        ]\n      ],\n      stylesSet: [\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.italic-title'),\n          element: 'h2',\n          attributes: {\n            class: 'italic-title'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.subtitle'),\n          element: 'h3',\n          attributes: {\n            class: 'subtitle'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.special-container'),\n          element: 'div',\n          attributes: {\n            class: 'special-containers'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.marker'),\n          element: 'span',\n          attributes: {\n            class: 'marker'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.small'),\n          element: 'small'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.computer-code'),\n          element: 'code'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.keyboard-phrase'),\n          element: 'kbd'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.sample-text'),\n          element: 'samp'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.variable'),\n          element: 'var'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.deleted-text'),\n          element: 'del'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.inserted-text'),\n          element: 'ins'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.cited-work'),\n          element: 'cite'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.inline-quotation'),\n          element: 'q'\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.compact-table'),\n          element: 'table',\n          attributes: {\n            cellpadding: '5',\n            cellspacing: '0',\n            class: 'compact-table'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.borderless-table'),\n          element: 'table',\n          attributes: {\n            class: 'borderless-table'\n          }\n        },\n        {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.ckeditor.styles-set.square-bulleted-list'),\n          element: 'ul',\n          attributes: {\n            class: 'square-bulleted-list'\n          }\n        }\n      ],\n      language: this.rxLocalizationService.currentLocale,\n      format_tags: 'p;h1;h2;h3;pre',\n      height: '78px'\n    };\n  }\n\n  getContentRules(): CKEDITOR.filter.allowedContentRules {\n    return {\n      p: true,\n      strong: true,\n      em: true,\n      s: true,\n      u: true,\n      ol: true,\n      ul: true,\n      li: true,\n      small: true,\n      code: true,\n      kbd: true,\n      samp: true,\n      var: true,\n      del: true,\n      ins: true,\n      cite: true,\n      q: true,\n      pre: true,\n      br: true,\n      span: {\n        classes: 'marker',\n        attributes: [RX_RICH_TEXT.expressionAttributeName, 'contenteditable', 'title'],\n        styles: 'color'\n      },\n      h1: true,\n      h2: {\n        classes: 'italic-title'\n      },\n      h3: {\n        classes: 'subtitle'\n      },\n      div: {\n        classes: 'special-containers'\n      },\n      a: {\n        match: (element) => this.rxUrlUtilsService.isUrlSafe(element.attributes.href),\n        attributes: [\n          'target',\n          'id',\n          'dir',\n          'accesskey',\n          'lang',\n          'tabindex',\n          'title',\n          'type',\n          'charset',\n          'rel',\n          'href',\n          'name',\n          'style',\n          'class',\n          'download'\n        ]\n      },\n      'div h1 h2 h3 p span pre li': {\n        styles: 'font-size, text-align, font-family'\n      }\n    } as CKEDITOR.filter.allowedContentRules;\n  }\n}\n"]}