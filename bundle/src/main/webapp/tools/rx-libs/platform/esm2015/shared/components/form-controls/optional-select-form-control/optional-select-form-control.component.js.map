{"version":3,"file":"optional-select-form-control.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/shared/components/form-controls/optional-select-form-control/optional-select-form-control.component.ts","../../../../../../../../libs/platform/shared/components/form-controls/optional-select-form-control/optional-select-form-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACnD,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,QAAQ,CAAC;AAEtC,OAAO,EAAE,aAAa,EAAE,MAAM,mCAAmC,CAAC;;;;;AAelE,MAAM,OAAO,kCAAmC,SAAQ,aAAqB;IAX7E;;QAeE,kBAAa,GAAG,KAAK,CAAC;QACtB,gBAAW,GAAoB,EAAE,CAAC;KA4BnC;IA1BC,gBAAgB,CAAC,QAAiB;QAChC,IAAI,CAAC,aAAa,GAAG,QAAQ,CAAC;QAE9B,IAAI,QAAQ,EAAE;YACZ,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;YAE1C,IAAI,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACzB,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,EAAE,CAAC;aACxB;SACF;aAAM;YACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SACnB;IACH,CAAC;IAED,YAAY,CAAC,KAAa;QACxB,IAAI,CAAC,aAAa,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACpG,CAAC;IAED,iBAAiB,CAAC,KAAsB;QACtC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;IAC9B,CAAC;IAED,eAAe,CAAC,MAAqB;QACnC,OAAO,MAAM,CAAC,IAAI,CAAC;IACrB,CAAC;;+HAhCU,kCAAkC;mHAAlC,kCAAkC,0FARlC;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,kCAAkC;YAC/C,KAAK,EAAE,IAAI;SACZ;KACF,iDCjBH,kxBAyBA;2FDNa,kCAAkC;kBAX9C,SAAS;mBAAC;oBACT,QAAQ,EAAE,iCAAiC;oBAC3C,WAAW,EAAE,+CAA+C;oBAC5D,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,oCAAoC;4BAC/C,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;8BAGC,OAAO;sBADN,KAAK","sourcesContent":["import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { head, isNull } from 'lodash';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { ISelectOption } from '../select-form-control';\nimport { IOptionalSelectFormControlOptions } from './optional-select-form-control.interfaces';\n\n@Component({\n  selector: 'rx-optional-select-form-control',\n  templateUrl: './optional-select-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: OptionalSelectFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class OptionalSelectFormControlComponent extends ValueAccessor<string> implements IFormControlComponent {\n  @Input()\n  options: IOptionalSelectFormControlOptions;\n\n  switcherValue = false;\n  selectValue: ISelectOption[] = [];\n\n  onSwitcherChange(newValue: boolean): void {\n    this.switcherValue = newValue;\n\n    if (newValue) {\n      const option = head(this.options.options);\n\n      if (option && !this.value) {\n        this.value = option.id;\n      }\n    } else {\n      this.value = null;\n    }\n  }\n\n  onWriteValue(value: string): void {\n    this.switcherValue = !isNull(value);\n    this.selectValue = this.value ? [this.options.options.find((option) => option.id === value)] : [];\n  }\n\n  onSelectionChange(value: ISelectOption[]): void {\n    this.value = head(value).id;\n  }\n\n  optionFormatter(option: ISelectOption): string {\n    return option.name;\n  }\n}\n","<div class=\"form-group\" [ngClass]=\"{ 'is-required': options.required }\">\n  <label class=\"form-control-label\" *ngIf=\"options.label\">{{ options.label }}</label>\n\n  <div class=\"d-flex\">\n    <div class=\"mr-2\">\n      <adapt-rx-switch\n        [ngModel]=\"switcherValue\"\n        (ngModelChange)=\"onSwitcherChange($event)\"\n        [disabled]=\"isDisabled\"\n      ></adapt-rx-switch>\n    </div>\n\n    <adapt-rx-select\n      class=\"mb-0 w-100\"\n      *ngIf=\"switcherValue\"\n      [disabled]=\"isDisabled\"\n      [options]=\"options.options\"\n      [required]=\"options.required\"\n      [ngModel]=\"selectValue\"\n      (ngModelChange)=\"onSelectionChange($event)\"\n      [optionFormatter]=\"optionFormatter\"\n    >\n    </adapt-rx-select>\n  </div>\n</div>\n"]}