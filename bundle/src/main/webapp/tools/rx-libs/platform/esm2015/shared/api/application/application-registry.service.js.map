{"version":3,"file":"application-registry.service.js","sourceRoot":"","sources":["../../../../../../../libs/platform/shared/api/application/application-registry.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAAE,IAAI,EAAE,MAAM,gBAAgB,CAAC;AACtC,OAAO,EAAE,oBAAoB,EAAE,MAAM,iCAAiC,CAAC;;;AAOvE,MAAM,OAAO,4BAA4B;IACvC,YAAoB,oBAA0C;QAA1C,yBAAoB,GAApB,oBAAoB,CAAsB;IAAG,CAAC;IAElE,QAAQ,CAAC,aAAqB,EAAE,WAAsC;QACpE,IAAI,CAAC,oBAAoB;aACtB,8BAA8B,EAAE;aAChC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACb,SAAS,CAAC,CAAC,gBAAmC,EAAE,EAAE;YACjD,IAAI,CAAA,gBAAgB,aAAhB,gBAAgB,uBAAhB,gBAAgB,CAAE,EAAE,MAAK,aAAa,EAAE;gBAC1C,WAAW,CAAC,UAAU,EAAE,CAAC;aAC1B;QACH,CAAC,CAAC,CAAC;IACP,CAAC;;yHAZU,4BAA4B;6HAA5B,4BAA4B,cAF3B,MAAM;2FAEP,4BAA4B;kBAHxC,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { take } from 'rxjs/operators';\nimport { RxGlobalCacheService } from '../caching/global-cache.service';\nimport { IRxApplicationInitializer } from './application-initializer.interface';\nimport { IBundleDescriptor } from '../bundle/bundle.interfaces';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApplicationRegistryService {\n  constructor(private rxGlobalCacheService: RxGlobalCacheService) {}\n\n  register(applicationId: string, initializer: IRxApplicationInitializer): void {\n    this.rxGlobalCacheService\n      .getApplicationBundleDescriptor()\n      .pipe(take(1))\n      .subscribe((bundleDescriptor: IBundleDescriptor) => {\n        if (bundleDescriptor?.id === applicationId) {\n          initializer.initialize();\n        }\n      });\n  }\n}\n"]}