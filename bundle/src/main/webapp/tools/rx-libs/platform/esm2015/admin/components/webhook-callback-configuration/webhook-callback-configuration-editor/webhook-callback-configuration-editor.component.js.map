{"version":3,"file":"webhook-callback-configuration-editor.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration-editor/webhook-callback-configuration-editor.component.ts","../../../../../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration-editor/webhook-callback-configuration-editor.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  IRecordDefinition,\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { chain, find, forEach, has } from 'lodash';\nimport {\n  IBundleDescriptor,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport { RX_WEBHOOK_CALLBACK_CONFIGURATION } from '../webhook-callback-configuration.constant';\nimport { IMetadataField } from '../webhook-callback-configuration.interface';\nimport { RxWebhookCallbackConfigurationService } from '../webhook-callback-configuration.service';\n\n@Component({\n  selector: 'rx-webhook-callback-configuration',\n  templateUrl: './webhook-callback-configuration-editor.component.html',\n  styleUrls: ['./webhook-callback-configuration-editor.component.scss']\n})\nexport class WebhookCallbackConfigurationEditorComponent extends RxModalClass implements OnInit {\n  private defaultControls: any = {\n    configurationName: '',\n    bundleId: [],\n    processor: []\n  };\n\n  private recordInstance: RecordInstance;\n\n  metadataFields: IMetadataField[];\n  bundleIdOptions: RxSelectOption[];\n  processorOptions: RxSelectOption[];\n  isEditMode: boolean;\n  callbackUrl: string;\n\n  webhookCallbackConfigurationForm: FormGroup;\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxWebhookCallbackConfigurationService: RxWebhookCallbackConfigurationService,\n    private rxOverlayService: RxOverlayService,\n    private rxJsonParserService: RxJsonParserService,\n    private rxNotificationService: RxNotificationService,\n    private formBuilder: FormBuilder,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.webhookCallbackConfigurationForm = this.formBuilder.group(this.defaultControls);\n    this.isEditMode = this.dockedPanelContext.getData().isEditMode;\n\n    this.rxGlobalCacheService.getBundleDescriptors().subscribe((bundleDescriptors: IBundleDescriptor[]) => {\n      this.bundleIdOptions = bundleDescriptors\n        .filter((bundleDescriptor) => bundleDescriptor.isApplication)\n        .sort((a: IBundleDescriptor, b: IBundleDescriptor) => a.friendlyName.localeCompare(b.friendlyName))\n        .map((bundleDescriptor: IBundleDescriptor) => ({\n          displayValue: bundleDescriptor.friendlyName,\n          value: bundleDescriptor.id\n        }));\n    });\n\n    this.rxRecordDefinitionCacheService\n      .getRecordDefinition(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name)\n      .subscribe((recordDefinition: IRecordDefinition) => {\n        this.processorOptions = chain(recordDefinition.fieldDefinitions)\n          .find({\n            id: RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor\n          })\n          .get('optionNamesById')\n          .map((optionName, optionId) => ({\n            displayValue: optionName,\n            value: optionId\n          }))\n          .value();\n      });\n\n    if (!this.isEditMode) {\n      this.rxRecordInstanceService\n        .getNew(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name)\n        .subscribe((recordInstance: RecordInstance) => (this.recordInstance = recordInstance));\n    } else {\n      this.rxRecordInstanceService\n        .get(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name, this.dockedPanelContext.getData().recordId)\n        .subscribe((recordInstance: RecordInstance) => {\n          this.recordInstance = recordInstance;\n          this.setFormControlValues();\n\n          this.callbackUrl = [\n            location.origin,\n            'api/rx/application/webhook_callback',\n            this.recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.id].value,\n            this.rxOverlayService.getCurrentOverlayContext().tenantId\n          ].join('/');\n\n          this.metadataFields = this.rxJsonParserService.tryParseJson(\n            this.recordInstance.fieldInstances[\n              RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.configMetadata\n            ].value\n          );\n\n          this.generateMetadataFieldFormControls();\n        });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.webhookCallbackConfigurationForm.dirty;\n  }\n\n  private setFormControlValues(): void {\n    this.webhookCallbackConfigurationForm\n      .get('configurationName')\n      .setValue(\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.name].value\n      );\n\n    const bundleOption: RxSelectOption = find(this.bundleIdOptions, {\n      value:\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.bundleId].value\n    });\n\n    this.webhookCallbackConfigurationForm.get('bundleId').setValue([\n      {\n        value: bundleOption.value,\n        displayValue: bundleOption.displayValue\n      }\n    ]);\n\n    const processorOption: RxSelectOption = find(this.processorOptions, {\n      value: String(\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor].value\n      )\n    });\n\n    this.webhookCallbackConfigurationForm.get('processor').setValue([\n      {\n        value: processorOption.value,\n        displayValue: processorOption.displayValue\n      }\n    ]);\n  }\n\n  private removeMetadataFieldFormControls(): void {\n    Object.keys(this.webhookCallbackConfigurationForm.controls).forEach((key) => {\n      if (!has(this.defaultControls, key)) {\n        this.webhookCallbackConfigurationForm.removeControl(key);\n      }\n    });\n  }\n\n  private generateMetadataFieldFormControls(): void {\n    this.metadataFields.forEach((field: IMetadataField) => {\n      this.webhookCallbackConfigurationForm.addControl(field.name, new FormControl(field.value || ''));\n    });\n  }\n\n  loadMetadataFields(): void {\n    this.rxWebhookCallbackConfigurationService.getMetadataFields().subscribe((metadataFieldsByProcessorId) => {\n      this.metadataFields =\n        metadataFieldsByProcessorId[this.webhookCallbackConfigurationForm.get('processor').value[0].value];\n\n      this.removeMetadataFieldFormControls();\n      this.generateMetadataFieldFormControls();\n    });\n  }\n\n  saveConfiguration(): void {\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.name,\n      this.webhookCallbackConfigurationForm.get('configurationName').value\n    );\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.bundleId,\n      this.webhookCallbackConfigurationForm.get('bundleId').value[0].value\n    );\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor,\n      this.webhookCallbackConfigurationForm.get('processor').value[0].value\n    );\n\n    forEach(this.metadataFields, (field: IMetadataField) => {\n      field.value = this.webhookCallbackConfigurationForm.get(field.name).value;\n    });\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.configMetadata,\n      JSON.stringify(this.metadataFields)\n    );\n\n    if (this.isEditMode) {\n      this.rxRecordInstanceService.save(this.recordInstance).subscribe(() => this.successCallback());\n    } else {\n      this.rxRecordInstanceService.create(this.recordInstance).subscribe(() => this.successCallback());\n    }\n  }\n\n  private successCallback(): void {\n    this.rxNotificationService.addSuccessMessage(\n      this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configurations-saved.message'\n      )\n    );\n    this.dockedPanelContext.close(null);\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"webhookCallbackConfigurationForm\">\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      rx-id=\"configuration-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configuration-name.label' | translate }}\"\n      formControlName=\"configurationName\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.bundle-name.label' | translate }}\"\n      rx-id=\"bundle-name\"\n      formControlName=\"bundleId\"\n      [options]=\"bundleIdOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.processor.label' | translate }}\"\n      rx-id=\"processor\"\n      formControlName=\"processor\"\n      [options]=\"processorOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n      (onSelectionChange)=\"loadMetadataFields()\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      *ngFor=\"let field of metadataFields\"\n      label=\"{{ field.name }}\"\n      [isPassword]=\"field.secure\"\n      formControlName=\"{{ field.name }}\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <div class=\"form-group\">\n      <label class=\"form-control-label\">{{\n        'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.callback-url.label' | translate\n      }}</label>\n\n      <div class=\"callback-url bg-secondary p-1\" *ngIf=\"isEditMode\">\n        {{ callbackUrl }}\n      </div>\n\n      <adapt-alert\n        *ngIf=\"!isEditMode\"\n        [config]=\"{\n          content: 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.url-alert.message' | translate,\n          type: 'inline',\n          variant: 'info'\n        }\"\n      ></adapt-alert>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    [disabled]=\"webhookCallbackConfigurationForm.pristine || webhookCallbackConfigurationForm.invalid\"\n    (click)=\"saveConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button type=\"button\" adapt-button (click)=\"cancel()\" btn-type=\"secondary\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n"]}