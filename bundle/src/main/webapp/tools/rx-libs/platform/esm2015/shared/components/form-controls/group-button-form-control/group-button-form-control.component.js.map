{"version":3,"file":"group-button-form-control.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/shared/components/form-controls/group-button-form-control/group-button-form-control.component.ts","../../../../../../../../libs/platform/shared/components/form-controls/group-button-form-control/group-button-form-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,iBAAiB,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAC/E,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACnD,OAAO,EAAE,yBAAyB,EAAgB,MAAM,uBAAuB,CAAC;AAEhF,OAAO,EAAE,aAAa,EAAE,MAAM,mCAAmC,CAAC;AAElE,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;;;;;AAcnC,MAAM,OAAO,+BAAgC,SAAQ,aAA8B;IASjF,YAAoB,iBAAoC;QACtD,KAAK,EAAE,CAAC;QADU,sBAAiB,GAAjB,iBAAiB,CAAmB;IAExD,CAAC;IAED,mBAAmB,CAAC,iBAA4B;QAC9C,MAAM,KAAK,GAAG,SAAS,CAAC,iBAAiB,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC;QAEzE,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC;IAED,YAAY,CAAC,KAAsB;QACjC,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;IAC1B,CAAC;IAEO,WAAW,CAAC,KAAsB;QACxC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC;IACtE,CAAC;IAEO,QAAQ,CAAC,IAAkB;QACjC,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAClC,IAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,EAAE;gBACvE,IAAI,QAAQ,EAAE;oBACZ,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;iBACzB;qBAAM;oBACL,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC7B,IAAI,CAAC,yBAAyB,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACtD,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;iBACxC;YACH,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;SACzB;IACH,CAAC;;4HAzCU,+BAA+B;gHAA/B,+BAA+B,uFAR/B;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,+BAA+B;YAC5C,KAAK,EAAE,IAAI;SACZ;KACF,qFAGU,yBAAyB,qFCrBtC,q4BA+BA;2FDXa,+BAA+B;kBAZ3C,SAAS;mBAAC;oBACT,QAAQ,EAAE,8BAA8B;oBACxC,WAAW,EAAE,4CAA4C;oBACzD,SAAS,EAAE,CAAC,4CAA4C,CAAC;oBACzD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,iCAAiC;4BAC5C,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;wGAGC,yBAAyB;sBADxB,SAAS;uBAAC,yBAAyB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;gBAItD,OAAO;sBADN,KAAK","sourcesContent":["import { ChangeDetectorRef, Component, Input, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AdaptButtonGroupComponent, ButtonConfig } from '@bmc-ux/adapt-angular';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IGroupButtonFormControlOptions } from './group-button-control-options.interface';\nimport { findIndex } from 'lodash';\n\n@Component({\n  selector: 'rx-group-button-form-control',\n  templateUrl: './group-button-form-control.component.html',\n  styleUrls: ['./group-button-form-control.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: GroupButtonFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class GroupButtonFormControlComponent extends ValueAccessor<string | number> implements IFormControlComponent {\n  @ViewChild(AdaptButtonGroupComponent, { static: true })\n  adaptButtonGroupComponent: AdaptButtonGroupComponent;\n\n  @Input()\n  options: IGroupButtonFormControlOptions;\n\n  model: boolean[];\n\n  constructor(private changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  onGroupButtonChange(groupButtonValues: boolean[]): void {\n    const index = findIndex(groupButtonValues, (buttonValue) => buttonValue);\n\n    this.setValue(this.options.items[index]);\n  }\n\n  onWriteValue(value: string | number): void {\n    this.updateModel(value);\n  }\n\n  private updateModel(value: string | number): void {\n    this.model = this.options.items.map((item) => item.value === value);\n  }\n\n  private setValue(item: ButtonConfig): void {\n    if (this.options.beforeValueChange) {\n      this.options.beforeValueChange(this.value, item.value).then((response) => {\n        if (response) {\n          this.value = item.value;\n        } else {\n          this.updateModel(this.value);\n          this.adaptButtonGroupComponent.writeValue(this.model);\n          this.changeDetectorRef.detectChanges();\n        }\n      });\n    } else {\n      this.value = item.value;\n    }\n  }\n}\n","<div class=\"form-group\" [ngClass]=\"{ 'is-required': options.required }\">\n  <adapt-rx-control-label\n    [label]=\"options.label\"\n    [showRequiredLabel]=\"!!options.required\"\n    [tooltip]=\"\n      options.tooltip\n        ? {\n            content: popoverContent,\n            popoverMode: options.tooltip.popoverMode,\n            placement: options.tooltip.placement,\n            iconName: options.tooltip.iconName\n          }\n        : null\n    \"\n  ></adapt-rx-control-label>\n\n  <div class=\"mt-1\">\n    <adapt-button-group\n      [(ngModel)]=\"model\"\n      (ngModelChange)=\"onGroupButtonChange($event)\"\n      [disabled]=\"isDisabled\"\n      [config]=\"options.items\"\n      [size]=\"options.size || 'small'\"\n    >\n    </adapt-button-group>\n  </div>\n</div>\n\n<ng-template #popoverContent>\n  <span [innerHtml]=\"options.tooltip.content\"></span>\n</ng-template>\n"]}