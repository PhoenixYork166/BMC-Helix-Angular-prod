{"version":3,"file":"date-time-form-control.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/shared/components/form-controls/date-time-form-control/date-time-form-control.component.ts","../../../../../../../../libs/platform/shared/components/form-controls/date-time-form-control/date-time-form-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAU,MAAM,eAAe,CAAC;AACzD,OAAO,EAAE,WAAW,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AAChE,OAAO,EAAE,aAAa,EAAE,MAAM,oBAAoB,CAAC;AAGnD,OAAO,EAAE,oBAAoB,EAAoB,MAAM,uBAAuB,CAAC;AAC/E,OAAO,MAAM,MAAM,YAAY,CAAC;AAChC,OAAO,EAAE,MAAM,EAAe,MAAM,QAAQ,CAAC;;;;AAa7C,MAAM,OAAO,4BAA6B,SAAQ,aAAqB;IAXvE;;QAkBE,sBAAiB,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC;QAExC,eAAU,GAAG,oBAAoB,CAAC,QAAQ,CAAC;KAoC5C;IAlCC,QAAQ;QACN,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,KAAuB,EAAE,EAAE;YACxE,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE;gBAC3D,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;oBAClB,KAAK,CAAC,IAAI,IAAI,CAAC;oBACf,KAAK,CAAC,KAAK,IAAI,CAAC;oBAChB,KAAK,CAAC,IAAI,IAAI,CAAC;oBACf,KAAK,CAAC,KAAK;oBACX,KAAK,CAAC,OAAO;oBACb,KAAK,CAAC,OAAO,IAAI,CAAC;iBACnB,CAAC,CAAC,WAAW,EAAE,CAAC;aAClB;iBAAM;gBACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aACnB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAExB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAClB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;gBAC9B,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE;gBACnB,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;gBACjB,KAAK,EAAE,IAAI,CAAC,IAAI,EAAE;gBAClB,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE;aACxB,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACvC;IACH,CAAC;;yHA5CU,4BAA4B;6GAA5B,4BAA4B,8GAR5B;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,4BAA4B;YACzC,KAAK,EAAE,IAAI;SACZ;KACF,iDClBH,4MAQA;2FDYa,4BAA4B;kBAXxC,SAAS;mBAAC;oBACT,QAAQ,EAAE,2BAA2B;oBACrC,WAAW,EAAE,yCAAyC;oBACtD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,8BAA8B;4BACzC,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;8BAGC,OAAO;sBADN,KAAK;gBAIN,UAAU;sBADT,KAAK","sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ValueAccessor } from '../../form-builder';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { IDateFormControlOptions } from '../date-form-control';\nimport { RxDatetimePickerMode, RxDatetimeStruct } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { isNull, isUndefined } from 'lodash';\n\n@Component({\n  selector: 'rx-date-time-form-control',\n  templateUrl: './date-time-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: DateTimeFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class DateTimeFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IDateFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  datePickerControl = new FormControl('');\n\n  pickerMode = RxDatetimePickerMode.DateTime;\n\n  ngOnInit(): void {\n    this.datePickerControl.valueChanges.subscribe((value: RxDatetimeStruct) => {\n      if (value && !isNull(value.hours) && !isNull(value.minutes)) {\n        this.value = moment([\n          value.year || 0,\n          value.month || 0,\n          value.date || 0,\n          value.hours,\n          value.minutes,\n          value.seconds || 0\n        ]).toISOString();\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  writeValue(value: string): void {\n    super.writeValue(value);\n\n    const date = moment(this.value);\n\n    if (date.isValid()) {\n      this.datePickerControl.setValue({\n        year: date.year(),\n        month: date.month(),\n        date: date.date(),\n        hours: date.hour(),\n        minutes: date.minutes()\n      });\n    } else {\n      this.datePickerControl.setValue(null);\n    }\n  }\n}\n","<adapt-rx-datetime\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [mode]=\"pickerMode\"\n  [required]=\"options.required\"\n  [formControl]=\"datePickerControl\"\n>\n</adapt-rx-datetime>\n"]}