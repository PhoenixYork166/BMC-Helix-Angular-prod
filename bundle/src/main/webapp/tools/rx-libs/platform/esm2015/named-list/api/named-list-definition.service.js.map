{"version":3,"file":"named-list-definition.service.js","sourceRoot":"","sources":["../../../../../../libs/platform/named-list/api/named-list-definition.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport {\n  IHttpGetParams,\n  IHttpOptions,\n  RX_BUNDLE,\n  RxCommandFactoryService,\n  RxFeatureService\n} from '@helix/platform/shared/api';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { RX_NAMED_LIST_DEFINITION } from './named-list-definition.constant';\nimport { INamedListDefinition } from './named-list-definition.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxNamedListDefinitionService {\n  constructor(\n    private httpClient: HttpClient,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxFeatureService: RxFeatureService\n  ) {}\n\n  get(namedListDefinitionName: string, options?: IHttpGetParams): Observable<INamedListDefinition> {\n    return this.httpClient.get<INamedListDefinition>(this.getUrl(namedListDefinitionName), options).pipe(\n      tap((definition: INamedListDefinition) => {\n        if (this.rxFeatureService.isFeatureEnabled('DRD21-43015')) {\n          definition.searchBehavior ??= RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.contains;\n        }\n      })\n    );\n  }\n\n  getNew(): Observable<INamedListDefinition> {\n    const definition: Partial<INamedListDefinition> = {\n      name: '',\n      allowOverlay: false,\n      scope: RX_BUNDLE.definitionScopeTypes.bundle,\n      recordDefinitionName: null,\n      labelFieldId: null,\n      valueFieldId: null\n    };\n\n    if (this.rxFeatureService.isFeatureEnabled('DRD21-43015')) {\n      definition.searchBehavior = RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.contains;\n    }\n\n    return of(definition);\n  }\n\n  create(namedListDefinition: INamedListDefinition): Observable<HttpResponse<any>> {\n    return this.httpClient.post(this.getUrl(), namedListDefinition, { observe: 'response' });\n  }\n\n  update(namedListDefinition: INamedListDefinition, options?: IHttpOptions): Observable<any> {\n    return this.httpClient.put(this.getUrl(namedListDefinition.name), namedListDefinition, options);\n  }\n\n  private getUrl(namedListDefinitionName?: string): string {\n    return namedListDefinitionName\n      ? `/api/rx/application/namedlist/namedlistdefinition/${encodeURIComponent(namedListDefinitionName)}`\n      : '/api/rx/application/namedlist/namedlistdefinition';\n  }\n\n  rename(oldNamedListDefinitionName: string, newNamedListDefinitionName: string): Observable<any> {\n    return this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.namedlist.command.RenameNamedListDefinitionCommand')\n      .execute({\n        name: oldNamedListDefinitionName,\n        newName: newNamedListDefinitionName\n      });\n  }\n\n  revertCustomization(namedListDefinitionName: string): Observable<any> {\n    return this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.namedlist.command.RevertNamedListDefinitionCommand')\n      .execute({ namedListDefinitionName });\n  }\n\n  delete(definitionNames: string[]): Observable<any> {\n    return this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.namedlist.command.DeleteNamedListDefinitionsCommand')\n      .execute({ definitionNames });\n  }\n}\n"]}