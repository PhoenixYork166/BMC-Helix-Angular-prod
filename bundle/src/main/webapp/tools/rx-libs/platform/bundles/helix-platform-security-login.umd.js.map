{"version":3,"file":"helix-platform-security-login.umd.js","sources":["../../../../libs/platform/security/login/login-page/login-page.component.ts","../../../../libs/platform/security/login/login-page/login-page.component.html","../../../../libs/platform/security/login/login-page/login-page-routing.module.ts","../../../../libs/platform/security/login/login-page/login-page.module.ts","../../../../libs/platform/security/login/helix-platform-security-login.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IBundleDescriptor, RxAuthService, RxBundleService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { get } from 'lodash';\nimport { EMPTY, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-login-page',\n  templateUrl: './login-page.component.html'\n})\nexport class LoginPageComponent {\n  userName: string;\n  userPassword: string;\n  timeout: any;\n  isLoading = false;\n  bundleFriendlyName = '';\n  shouldReloadPage = true;\n  areStylesLoaded = false;\n\n  footerItems = {\n    content: {\n      copyright: 'Copyright 1997 - 2023 BMC Software, Inc.',\n      info: this.translateService.instant('login.trademark'),\n      helixLogo: true\n    }\n  };\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private title: Title,\n    private rxAuthService: RxAuthService,\n    private rxBundleService: RxBundleService,\n    private translateService: TranslateService\n  ) {\n    this.shouldReloadPage = get(this.router.getCurrentNavigation(), 'extras.state.shouldReloadPage');\n\n    if (this.shouldReloadPage) {\n      window.location.reload();\n    } else {\n      this.title.setTitle('Login');\n\n      this.activatedRoute.paramMap.subscribe((params) => {\n        const bundleId = params.get('bundleId');\n\n        this.rxBundleService\n          .getFromJsonp(bundleId)\n          .pipe(\n            catchError(() => {\n              this.router.navigate(['unknown-application']);\n\n              return EMPTY;\n            })\n          )\n          .subscribe((bundleDescriptor: IBundleDescriptor) => {\n            if (bundleDescriptor.isApplication) {\n              this.bundleFriendlyName = bundleDescriptor.friendlyName;\n              this.title.setTitle(`Login - ${this.bundleFriendlyName}`);\n            } else {\n              this.router.navigate(['unknown-application']);\n            }\n          });\n      });\n    }\n  }\n\n  login(): void {\n    this.isLoading = true;\n\n    this.rxAuthService\n      .login(this.userName, this.userPassword)\n      .pipe(\n        catchError((err) => {\n          this.isLoading = false;\n\n          return throwError(err);\n        })\n      )\n      .subscribe();\n  }\n}\n","<link rel=\"stylesheet\" href=\"/helix/assets/adapt-css/dist/css/adapt-css-bs4.min.css\" (load)=\"areStylesLoaded = true\" />\n\n<adapt-login\n  productName=\"{{ bundleFriendlyName }}\"\n  logoClass=\"logo-bmc-helix logo-light\"\n  [footerConfig]=\"footerItems\"\n  *ngIf=\"!shouldReloadPage && areStylesLoaded\"\n>\n  <form class=\"form\" novalidate autocomplete=\"off\" method=\"post\">\n    <adapt-rx-textfield\n      class=\"form-group textfield\"\n      rx-id=\"username\"\n      [label]=\"'login.username' | translate\"\n      [name]=\"'username'\"\n      [placeholder]=\"'login.username' | translate\"\n      [autofocus]=\"true\"\n      [(ngModel)]=\"userName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group textfield\"\n      rx-id=\"password\"\n      [isPassword]=\"true\"\n      [label]=\"'login.password' | translate\"\n      [placeholder]=\"'login.password' | translate\"\n      autocomplete=\"off\"\n      [(ngModel)]=\"userPassword\"\n      [ngModelOptions]=\"{ standalone: true }\"\n    >\n    </adapt-rx-textfield>\n\n    <button\n      adapt-button\n      btn-type=\"primary\"\n      size=\"block\"\n      rx-id=\"sign-in-button\"\n      type=\"submit\"\n      class=\"form__button mb-0\"\n      (click)=\"login()\"\n      [disabled]=\"!userName || isLoading\"\n    >\n      {{ 'login.login' | translate }}\n    </button>\n  </form>\n</adapt-login>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { RxLoginLocalizationResolver, RxApplicationLoaderResolver } from '@helix/platform/shared/api';\nimport { LoginPageComponent } from './login-page.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPageComponent,\n    resolve: {\n      loader: RxApplicationLoaderResolver,\n      RxLoginLocalizationResolver\n    },\n    pathMatch: 'full'\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptLoginPageModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { AdaptTextFieldModule } from '@bmc-ux/obsolete';\nimport { TranslateModule } from '@ngx-translate/core';\n\nimport { LoginPageRoutingModule } from './login-page-routing.module';\nimport { LoginPageComponent } from './login-page.component';\n\n@NgModule({\n  declarations: [LoginPageComponent],\n  imports: [\n    CommonModule,\n    LoginPageRoutingModule,\n    TranslateModule,\n    FormsModule,\n    AdaptLoginPageModule,\n    AdaptTextFieldModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule\n  ]\n})\nexport class LoginPageModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["get","catchError","EMPTY","throwError","Component","RxApplicationLoaderResolver","RouterModule","NgModule","CommonModule","TranslateModule","FormsModule","AdaptLoginPageModule","AdaptTextFieldModule","AdaptButtonModule","AdaptRxTextfieldModule"],"mappings":"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"}