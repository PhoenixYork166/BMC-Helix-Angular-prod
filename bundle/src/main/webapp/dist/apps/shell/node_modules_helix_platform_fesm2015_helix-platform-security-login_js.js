(self.webpackChunkhelix=self.webpackChunkhelix||[]).push([["node_modules_helix_platform_fesm2015_helix-platform-security-login_js"],{"./node_modules/@helix/platform/fesm2015/helix-platform-security-login.js":(e,t,o)=>{"use strict";o.r(t),o.d(t,{LoginPageModule:()=>v});var n=o("./node_modules/@angular/core/fesm2015/core.js"),a=o("./node_modules/@angular/common/fesm2015/common.js"),r=o("./node_modules/@angular/forms/fesm2015/forms.js"),l=o("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),i=o("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),s=o("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),d=o("./node_modules/@angular/router/fesm2015/router.js"),u=o("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),p=o("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js"),c=o("lodash"),m=o("rxjs"),g=o("./node_modules/rxjs/_esm2015/operators/index.js");const f=function(){return{standalone:!0}};function h(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-login",2),n["\u0275\u0275elementStart"](1,"form",3),n["\u0275\u0275elementStart"](2,"adapt-rx-textfield",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().userName=t}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"adapt-rx-textfield",5),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().userPassword=t}),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",6),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().login()}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275propertyInterpolate"]("productName",e.bundleFriendlyName),n["\u0275\u0275property"]("footerConfig",e.footerItems),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](3,14,"login.username"))("name","username")("placeholder",n["\u0275\u0275pipeBind1"](4,16,"login.username"))("autofocus",!0)("ngModel",e.userName),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("isPassword",!0)("label",n["\u0275\u0275pipeBind1"](6,18,"login.password"))("placeholder",n["\u0275\u0275pipeBind1"](7,20,"login.password"))("ngModel",e.userPassword)("ngModelOptions",n["\u0275\u0275pureFunction0"](24,f)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",!e.userName||e.isLoading),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,22,"login.login")," ")}}class x{constructor(e,t,o,n,a,r){this.activatedRoute=e,this.router=t,this.title=o,this.rxAuthService=n,this.rxBundleService=a,this.translateService=r,this.isLoading=!1,this.bundleFriendlyName="",this.shouldReloadPage=!0,this.areStylesLoaded=!1,this.footerItems={content:{copyright:"Copyright 1997 - 2023 BMC Software, Inc.",info:this.translateService.instant("login.trademark"),helixLogo:!0}},this.shouldReloadPage=(0,c.get)(this.router.getCurrentNavigation(),"extras.state.shouldReloadPage"),this.shouldReloadPage?window.location.reload():(this.title.setTitle("Login"),this.activatedRoute.paramMap.subscribe(e=>{const t=e.get("bundleId");this.rxBundleService.getFromJsonp(t).pipe((0,g.catchError)(()=>(this.router.navigate(["unknown-application"]),m.EMPTY))).subscribe(e=>{e.isApplication?(this.bundleFriendlyName=e.friendlyName,this.title.setTitle(`Login - ${this.bundleFriendlyName}`)):this.router.navigate(["unknown-application"])})}))}login(){this.isLoading=!0,this.rxAuthService.login(this.userName,this.userPassword).pipe((0,g.catchError)(e=>(this.isLoading=!1,(0,m.throwError)(e)))).subscribe()}}x.\u0275fac=function(e){return new(e||x)(n["\u0275\u0275directiveInject"](d.ActivatedRoute),n["\u0275\u0275directiveInject"](d.Router),n["\u0275\u0275directiveInject"](p.Title),n["\u0275\u0275directiveInject"](u.RxAuthService),n["\u0275\u0275directiveInject"](u.RxBundleService),n["\u0275\u0275directiveInject"](s.TranslateService))},x.\u0275cmp=n["\u0275\u0275defineComponent"]({type:x,selectors:[["rx-login-page"]],decls:2,vars:1,consts:[["rel","stylesheet","href","/helix/assets/adapt-css/dist/css/adapt-css-bs4.min.css",3,"load"],["logoClass","logo-bmc-helix logo-light",3,"productName","footerConfig",4,"ngIf"],["logoClass","logo-bmc-helix logo-light",3,"productName","footerConfig"],["novalidate","","autocomplete","off","method","post",1,"form"],["rx-id","username",1,"form-group","textfield",3,"label","name","placeholder","autofocus","ngModel","ngModelChange"],["rx-id","password","autocomplete","off",1,"form-group","textfield",3,"isPassword","label","placeholder","ngModel","ngModelOptions","ngModelChange"],["adapt-button","","btn-type","primary","size","block","rx-id","sign-in-button","type","submit",1,"form__button","mb-0",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"link",0),n["\u0275\u0275listener"]("load",function(){return t.areStylesLoaded=!0}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](1,h,11,25,"adapt-login",1)),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.shouldReloadPage&&t.areStylesLoaded))},directives:[a.NgIf,l.AdaptLoginPageComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,l.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel,l.AdaptButtonComponent],pipes:[s.TranslatePipe],encapsulation:2});const b=[{path:"",component:x,resolve:{loader:u.RxApplicationLoaderResolver,RxLoginLocalizationResolver:u.RxLoginLocalizationResolver},pathMatch:"full"}];class M{}M.\u0275fac=function(e){return new(e||M)},M.\u0275mod=n["\u0275\u0275defineNgModule"]({type:M,imports:[d.RouterModule],exports:[d.RouterModule]}),M.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.RouterModule.forChild(b)],d.RouterModule]});class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=n["\u0275\u0275defineNgModule"]({type:v,declarations:[x],imports:[a.CommonModule,M,s.TranslateModule,r.FormsModule,l.AdaptLoginPageModule,i.AdaptTextFieldModule,l.AdaptButtonModule,l.AdaptRxTextfieldModule]}),v.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[a.CommonModule,M,s.TranslateModule,r.FormsModule,l.AdaptLoginPageModule,i.AdaptTextFieldModule,l.AdaptButtonModule,l.AdaptRxTextfieldModule]]})}}]);
//# sourceMappingURL=node_modules_helix_platform_fesm2015_helix-platform-security-login_js.js.map