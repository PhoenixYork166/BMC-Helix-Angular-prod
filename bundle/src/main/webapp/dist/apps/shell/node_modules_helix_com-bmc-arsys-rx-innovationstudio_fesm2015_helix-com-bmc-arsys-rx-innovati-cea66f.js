(self.webpackChunkhelix=self.webpackChunkhelix||[]).push([["node_modules_helix_com-bmc-arsys-rx-innovationstudio_fesm2015_helix-com-bmc-arsys-rx-innovati-cea66f"],{"./node_modules/@helix/com-bmc-arsys-rx-innovationstudio/fesm2015/helix-com-bmc-arsys-rx-innovationstudio.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ComBmcArsysRxInnovationstudioModule:()=>Mr});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-document-designer.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-designer.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-config-designer.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer-page.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-designer.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-shell-designer-page.js"),p=i("./node_modules/@angular/router/fesm2015/router.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-event-designer.js"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-designer.js"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-designer.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-web-api-designer.js"),y=i("lodash"),b=i("./node_modules/rxjs/_esm2015/operators/index.js"),x=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),C=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),D=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),I=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),R=i("rxjs"),w=i("./node_modules/@angular/common/fesm2015/http.js"),E=i("./node_modules/@angular/forms/fesm2015/forms.js"),F=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),M=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),T=i("./node_modules/@helix/platform/fesm2015/helix-platform-document-api.js"),O=i("./node_modules/@helix/platform/fesm2015/helix-platform-web-api-api.js"),N=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),A=i("./node_modules/@helix/platform/fesm2015/helix-platform-rule-api.js"),P=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),j=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),_=i("./node_modules/@helix/platform/fesm2015/helix-platform-event-api.js"),V=i("./node_modules/@helix/platform/fesm2015/helix-platform-event-statistics-api.js"),k=i("./node_modules/@helix/platform/fesm2015/helix-platform-chatbot-api.js"),B=i("./node_modules/file-saver/dist/FileSaver.min.js"),$=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),L=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),G=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js"),z=i("./node_modules/moment-es6/index.js"),U=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-components.js");const q=["selectBundleForm"],X=["customizationStatusCellTemplate"],W=["isEnabledCellTemplate"],H=["nameCellTemplate"],Q=["scopeCellTemplate"];function K(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.groupTitle)}}function J(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](3).onClick(t.id)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275attribute"]("rx-id",e.rxId),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,e.labelKey)," ")}}function Y(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,K,2,1,"div",14),o["\u0275\u0275template"](2,J,3,4,"button",15),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.groupTitle),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.groupTitle)}}function Z(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",9),o["\u0275\u0275elementStart"](2,"button",10),o["\u0275\u0275element"](3,"adapt-icon",11),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",12),o["\u0275\u0275template"](7,Y,3,2,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isDisabled),o["\u0275\u0275attribute"]("rx-id",e.rxId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("name",e.icon),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,5,e.labelKey)," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.subActions)}}function ee(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-icon",11),2&e){const e=o["\u0275\u0275nextContext"](2).$implicit;o["\u0275\u0275property"]("name",e.icon)}}function te(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",18),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().onClick(t.id)}),o["\u0275\u0275template"](2,ee,1,1,"adapt-icon",19),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.isDisabled),o["\u0275\u0275attribute"]("rx-id",e.rxId),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.icon),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,4,e.labelKey)," ")}}function ie(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Z,8,7,"ng-container",8),o["\u0275\u0275template"](2,te,5,6,"ng-container",8),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==e.subActions?null:e.subActions.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!(null!=e.subActions&&e.subActions.length))}}function ne(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",20),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("routerLink",i.editRouterLink+e.$ID$),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,e.name)," ")}}function oe(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxCustomizationStatus")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.customizationPerspective),"\n")}}function re(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.isEnabled?"com.bmc.arsys.rx.client.common.yes.label":"com.bmc.arsys.rx.client.common.no.label"),"\n")}}function ae(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionScopePipe")),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](1,1,e.scope,i.bundleDescriptor),"\n")}}const se=function(e){return{busy:e}},le=["documentNameCellTemplate"];function de(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}const ce=["resourceTypeCellTemplate"],pe=["availableFieldsGrid"],ue=["selectedFieldsGrid"];function me(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxRecordDefinitionResourceType")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.resourceType),"\n")}}const fe=["typeCellTemplate"],he=["deleteCellTemplate"];function ge(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-select",15),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formControl",i.selectedFieldsGroup.controls[e.path])("options",i.fieldTypes)("optionFormatter",i.optionFormatter)("popupMaxHeight",290)}}function ve(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().unselectField(t)}),o["\u0275\u0275elementEnd"]()}}function ye(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-radiobutton",8),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e)("label",e)}}const be=["recordIdFieldsStepRecordGrid"],xe=["externalColumnCellTemplate"],Ce=["externalColumnIdCellTemplate"];function Se(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",9),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("innerHTML",e.sectionInfoTooltip,o["\u0275\u0275sanitizeHtml"])}}function De(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",10),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).dataItem.selectedExternalColumns=t})("ngModelChange",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().onExternalColumnChange(t)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",i.externalColumns)("optionFormatter",i.externalColumnOptionFormatter)("emptyOption",!0)("ngModel",e.selectedExternalColumns)("appendToBody",!0)}}function Ie(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",10),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).dataItem.selectedExternalColumns=t})("ngModelChange",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().onExternalColumnChange(t)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",i.externalColumnIds)("optionFormatter",i.externalColumnIdOptionFormatter)("emptyOption",!0)("ngModel",e.selectedExternalColumns)("appendToBody",!0)}}const Re=["tableSelectionStepRecordGrid"],we="[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}rx-record-grid[_ngcontent-%COMP%]{height:100%}",Ee=["webApiNameCellTemplate"];function Fe(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function Me(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",5),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("config",e.alertConfig)}}function Te(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",6),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("inline",!0)("multiple",!0)("options",e)("optionFormatter",i.optionFormatter)("selectAllButton",!0)("deselectAllButton",!0)("texts",i.selectTexts)("popupMaxHeight","100%")("formControl",i.primarySelectedFieldsFormControl)("label",o["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.primary-record.label"))}}function Oe(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",7),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("inline",!0)("multiple",!0)("options",e)("optionFormatter",i.optionFormatter)("selectAllButton",!0)("deselectAllButton",!0)("texts",i.selectTexts)("popupMaxHeight","100%")("formControl",i.secondarySelectedFieldsFormControl)("label",o["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.secondary-record.label"))}}function Ne(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"rx-expression-form-control",1),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).openEditor()}),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",o["\u0275\u0275pipeBind1"](2,2,t.rxWizardModalComponent.context$).joinCriteria)("options",e)}}function Ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,Ne,3,4,"ng-container",0),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isExpressionFormControlVisible)}}const Pe=["recordDefinitionTypeTemplate"];function je(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"axRecordDefinitionType"),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,e)," ")}}const _e=["definitionNameCellTemplate"],Ve=["eventNameCellTemplate"];function ke(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.eventName),"\n")}}function Be(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",2),o["\u0275\u0275elementStart"](1,"div",3),o["\u0275\u0275element"](2,"rx-definition-picker",15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",e.viewDefinitionPickerOptions)}}function $e(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",2),o["\u0275\u0275elementStart"](1,"div",3),o["\u0275\u0275element"](2,"adapt-rx-textfield",16),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.innovation-studio.configurations.external-link.label")))}function Le(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",3),o["\u0275\u0275element"](3,"adapt-rx-textfield",17),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275element"](7,"adapt-rx-textfield",18),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,2,"com.bmc.arsys.rx.innovation-studio.configurations.first-menu.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,4,"com.bmc.arsys.rx.innovation-studio.configurations.second-menu.label")))}const Ge=["componentCellTemplate"];function ze(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().dataItem;return o["\u0275\u0275nextContext"]().editAdminSetting(t)}),o["\u0275\u0275elementStart"](1,"a",5),o["\u0275\u0275listener"]("click",function(){return!1}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().dataItem;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.component," ")}}function Ue(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"a",6),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().dataItem,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("routerLink",t.editRouterLink+e.component),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.component," ")}}function qe(e,t){if(1&e&&(o["\u0275\u0275template"](0,ze,3,1,"div",2),o["\u0275\u0275template"](1,Ue,3,2,"div",3)),2&e){const e=t.dataItem;o["\u0275\u0275property"]("ngIf","CustomView"===e.custom),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","CommonSettings"===e.custom)}}function Xe(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-record-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function We(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-view-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function He(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-process-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function Qe(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-rule-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function Ke(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-association-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function Je(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-named-list-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function Ye(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-document-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function Ze(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-web-api-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function et(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-event-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function tt(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-event-statistics-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function it(e,t){if(1&e&&o["\u0275\u0275element"](0,"ax-chatbot-definition-tab",5),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("bundleDescriptor",e)}}function nt(e,t){1&e&&o["\u0275\u0275element"](0,"ax-configuration-definition-tab")}function ot(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-tabset",1),o["\u0275\u0275listener"]("tab-active-changed",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onTabChanged(t)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementStart"](2,"adapt-tab-panel",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,Xe,1,1,"ax-record-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"adapt-tab-panel",2),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275template"](7,We,1,1,"ax-view-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-tab-panel",2),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275template"](10,He,1,1,"ax-process-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"adapt-tab-panel",2),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275template"](13,Qe,1,1,"ax-rule-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"adapt-tab-panel",2),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275template"](16,Ke,1,1,"ax-association-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"adapt-tab-panel",2),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275template"](19,Je,1,1,"ax-named-list-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"adapt-tab-panel",2),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275template"](22,Ye,1,1,"ax-document-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"adapt-tab-panel",2),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275template"](25,Ze,1,1,"ax-web-api-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"adapt-tab-panel",2),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275template"](28,et,1,1,"ax-event-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"adapt-tab-panel",2),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275template"](31,tt,1,1,"ax-event-statistics-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"adapt-tab-panel",2),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275template"](34,it,1,1,"ax-chatbot-definition-tab",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"adapt-tab-panel",2),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275template"](37,nt,1,0,"ax-configuration-definition-tab",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("tab-active",o["\u0275\u0275pipeBind1"](1,26,e.activeTabIndex$))("fullHeight",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](3,28,e.tabs[0].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[0].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](6,30,e.tabs[1].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[1].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](9,32,e.tabs[2].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[2].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](12,34,e.tabs[3].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[3].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](15,36,e.tabs[4].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[4].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](18,38,e.tabs[5].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[5].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](21,40,e.tabs[6].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[6].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](24,42,e.tabs[7].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[7].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](27,44,e.tabs[8].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[8].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](30,46,e.tabs[9].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[9].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](33,48,e.tabs[10].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[10].isVisited),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](36,50,e.tabs[11].titleKey)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.tabs[11].isVisited)}}const rt=["definitionsDataGrid"],at=["recordNameCellTemplate"],st=["dataFilterCellTemplate"],lt=["ignoreRulesCellTemplate"],dt=["duplicateDataActionTypeCellTemplate"];function ct(e,t){1&e&&(o["\u0275\u0275element"](0,"div",18),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-bundle-content-data.tooltip"),o["\u0275\u0275sanitizeHtml"])}function pt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-expression-form-control",19),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openGlobalDataFilterExpressionEditor()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.globalDataFilterExpressionFormControlOptions)("formControl",e.addDataForm.controls.globalDataFilter)}}function ut(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-select",20),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.duplicateConfigurationDataActionTypeOptions)("optionFormatter",e.duplicateDataActionTypesOptionFormatter)}}function mt(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function ft(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"rx-expression-form-control",21),o["\u0275\u0275listener"]("events",function(){const t=o["\u0275\u0275restoreView"](e),i=t.dataItem,n=t.column;return o["\u0275\u0275nextContext"]().openDataFilterColumnExpressionEditor(i,n.field)})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",e.dataFilterColumnExpressionFormControlOptions)("ngModel",e[i.field])("disabled",!n.selectedDataSources[e.dataSource])}}function ht(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-rx-switch",22),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e),n=i.dataItem,r=i.column;return o["\u0275\u0275nextContext"]().updateDataImportOptionsByRecordDefinitionName(t,n,r.field)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",e[i.field])("disabled",!n.selectedDataSources[e.dataSource])}}function gt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-rx-select",23),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e),n=i.dataItem,r=i.column;return o["\u0275\u0275nextContext"]().updateDataImportOptionsByRecordDefinitionName(t,n,r.field)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",n.duplicateDataActionTypeOptions)("optionFormatter",n.duplicateDataActionTypesOptionFormatter)("ngModel",e[i.field])("disabled",!n.selectedDataSources[e.dataSource])}}const vt=function(e){return{count:e}};function yt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-expression-form-control",16),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openGlobalDataFilterExpressionEditor()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.globalDataFilterExpressionFormControlOptions)("formControl",e.addDataForm.controls.globalDataFilter)}}function bt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-select",17),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.duplicateConfigurationDataActionTypeOptions)("optionFormatter",e.duplicateDataActionTypesOptionFormatter)}}function xt(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function Ct(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"rx-expression-form-control",18),o["\u0275\u0275listener"]("events",function(){const t=o["\u0275\u0275restoreView"](e),i=t.dataItem,n=t.column;return o["\u0275\u0275nextContext"]().openDataFilterColumnExpressionEditor(i,n.field)})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",e.dataFilterColumnExpressionFormControlOptions)("ngModel",e[i.field])}}function St(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-rx-switch",19),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().updateDataImportOptionsByRecordDefinitionName(t,i.name,"ignoreRuleExecution")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",e[i.field])}}function Dt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-rx-select",20),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().updateDataImportOptionsByRecordDefinitionName(t,i.name,"duplicateDataActionType")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",n.duplicateDataActionTypeOptions)("optionFormatter",n.duplicateDataActionTypesOptionFormatter)("ngModel",e[i.field])}}function It(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-rx-textfield",14),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.innovation-studio.packaging.package-name.label"))}const Rt=function(e){return{content:e,iconName:"question_circle_o",placement:"right"}};function wt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-textfield",15),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](20);o["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("label",o["\u0275\u0275pipeBind1"](1,5,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.update-from-version.label"))("pattern",e.versionRegexp)("readonly",!0)("tooltip",o["\u0275\u0275pureFunction1"](7,Rt,(null==e.options||null==e.options.fields.bundleUpdateFromVersion?null:e.options.fields.bundleUpdateFromVersion.tooltip)||t))}}function Et(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275element"](1,"adapt-rx-select",17),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("inline",!0)("multiple",!0)("options",o["\u0275\u0275pipeBind1"](2,9,e.bundlesList$))("optionFormatter",e.optionFormatter)("selectAllButton",!0)("deselectAllButton",!0)("popupMaxHeight",560)("formControl",e.optionsForm.controls.dependentBundles)("label",o["\u0275\u0275pipeBind1"](3,11,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.depends-on.label"))}}function Ft(e,t){1&e&&(o["\u0275\u0275element"](0,"div",18),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.update-from-version.tooltip"),o["\u0275\u0275sanitizeHtml"])}function Mt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"div",18),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,null==e.options||null==e.options.fields.version?null:e.options.fields.version.tooltip),o["\u0275\u0275sanitizeHtml"])}}function Tt(e,t){if(1&e&&o["\u0275\u0275template"](0,Mt,2,3,"div",19),2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](24);o["\u0275\u0275property"]("ngIf",null==e.options||null==e.options.fields.version?null:e.options.fields.version.tooltip)("ngIfElse",t)}}function Ot(e,t){1&e&&(o["\u0275\u0275element"](0,"div",18),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.version.tooltip"),o["\u0275\u0275sanitizeHtml"])}function Nt(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-empty-state",8),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"))}function At(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275elementStart"](2,"input",10),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.selected=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"span",11),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",e.selected)("disabled",e.disallowChangeOrder),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](5,3,e.name))}}function Pt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"h6"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"ul"),o["\u0275\u0275elementStart"](5,"li",5),o["\u0275\u0275pipe"](6,"async"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"li",5),o["\u0275\u0275pipe"](10,"async"),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"li",5),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"li",5),o["\u0275\u0275pipe"](18,"async"),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"li",5),o["\u0275\u0275pipe"](22,"async"),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](3,11,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.included.label"),":"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](6,13,e.isDefinitionsToDeployByTypeIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,15,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.customized-definitions.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](10,17,e.isDataImportOptionsByRecordDefinitionNameIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,19,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.data-items.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](14,21,e.isConfigurationDataIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,23,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.configuration-data.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](18,25,e.isApprovalConfigurationDataIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,27,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.approval-configurations.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](22,29,!(null!=e.options&&e.options.isInstallOperation)&&e.isDefinitionsToDeleteByTypeIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,31,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.definitions-to-delete.label")," ")}}function jt(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"h6"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"ul"),o["\u0275\u0275elementStart"](5,"li",5),o["\u0275\u0275pipe"](6,"async"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"li",5),o["\u0275\u0275pipe"](10,"async"),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"li",5),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"li",5),o["\u0275\u0275pipe"](18,"async"),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"li",5),o["\u0275\u0275pipe"](22,"async"),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](3,11,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.not-included.label"),":"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("hidden",o["\u0275\u0275pipeBind1"](6,13,e.isDefinitionsToDeployByTypeIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,15,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.customized-definitions.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",o["\u0275\u0275pipeBind1"](10,17,e.isDataImportOptionsByRecordDefinitionNameIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,19,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.data-items.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",o["\u0275\u0275pipeBind1"](14,21,e.isConfigurationDataIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,23,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.configuration-data.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!(null!=e.options&&e.options.isContentPackageOperation&&!o["\u0275\u0275pipeBind1"](18,25,e.isApprovalConfigurationDataIncluded$))),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,27,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.approval-configurations.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",o["\u0275\u0275pipeBind1"](22,29,e.isDefinitionsToDeleteByTypeIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,31,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.definitions-to-delete.label")," ")}}function _t(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",8),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",9),o["\u0275\u0275element"](5,"div",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.creating-package.message")," "))}const Vt=function(e){return{content:e,dismissible:!1,type:"inline",variant:"success"}};function kt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",11),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](1,Vt,e.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.packaging-completed.message")))}}function Bt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-textarea",13),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.common.messages.label")),o["\u0275\u0275property"]("ngModel",e.operationStatusMessage)("disabledStyleForReadonlyState",!0)("readonly",!0)}}const $t=function(e){return{content:e,dismissible:!1,type:"inline",variant:"danger"}};function Lt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"adapt-alert",11),o["\u0275\u0275template"](2,Bt,2,6,"adapt-rx-textarea",12),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](2,$t,e.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.packaging-failed.message"))),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.operationStatusMessage)}}function Gt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275template"](1,_t,6,3,"div",3),o["\u0275\u0275template"](2,kt,1,3,"adapt-alert",7),o["\u0275\u0275template"](3,Lt,3,4,"div",3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e===i.operationStatuses.pending),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e===i.operationStatuses.succeeded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e===i.operationStatuses.failed)}}const zt=["displayTypeWithCellTemplate"];function Ut(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}const qt=function(e,t){return{count:e,packageType:t}};function Xt(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function Wt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-table",27),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSelectionChange(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("columns",i.viewTypeControl.value[0]?i.expandedRowColumns.definitions:i.expandedRowColumns.data)("value",e.subTableItems)("sortable",!0)("sortMode","multiple")("selectionMode","multiple")("selection",i.gridSelectedItems)}}function Ht(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"adapt-table",22),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("columns",i.viewTypeControl.value[0]?i.expandedRowColumns.definitions:i.expandedRowColumns.data)("value",e.subTableItems)("sortable",!0)("sortMode","multiple")}}const Qt=["fileInput"];function Kt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",15),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pipeBind1"](1,2,e.shellDesignerLink$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.bundle-details.navigation.label")," ")}}function Jt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).createInstallPackage()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",24),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).createUpdatePackage()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.innovation-studio.create-install-package.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.innovation-studio.create-update-package.label")," "))}function Yt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",25),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).createContentPackage()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",26),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().downloadContentPackage(t)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).manageContentPackages()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"button",28),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).openContentPackageImportLogsModal()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.create-content-package.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,6,"com.bmc.arsys.rx.innovation-studio.download-content-package.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,8,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,10,"com.bmc.arsys.rx.innovation-studio.content-package-import-logs.label")," "))}function Zt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",29),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().importDefinitionsAndData(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.innovation-studio.import-definition-and-data.label")," "))}const ei=function(e){return{bundleType:e}};function ti(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",30),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().updateBundle(t)}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",31),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().reinstallBundle(t)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",32),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().uninstallBundle(t)}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3).ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](3,3,"com.bmc.arsys.rx.innovation-studio.update-bundle.menu.label",o["\u0275\u0275pureFunction1"](12,ei,e.type.toLowerCase()))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](6,6,"com.bmc.arsys.rx.innovation-studio.reinstall-bundle.menu.label",o["\u0275\u0275pureFunction1"](14,ei,e.type.toLowerCase()))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](9,9,"com.bmc.arsys.rx.innovation-studio.uninstall-bundle.menu.label",o["\u0275\u0275pureFunction1"](16,ei,e.type.toLowerCase()))," ")}}function ii(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",33),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().downloadTranslations(t.id)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",34),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().uploadTranslations(t)}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",20),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](3).ngIf;return o["\u0275\u0275nextContext"]().publishChatEnabledService(t.id)}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.innovation-studio.translations.menu.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,7,"com.bmc.arsys.rx.innovation-studio.download-translations.menu.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.innovation-studio.upload-translations.menu.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,11,"com.bmc.arsys.rx.innovation-studio.chat.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,13,"com.bmc.arsys.rx.innovation-studio.publish-chat-enabled-service.label")," "))}function ni(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Jt,7,6,"ng-container",21),o["\u0275\u0275template"](5,Yt,13,12,"ng-container",21),o["\u0275\u0275elementStart"](6,"div",20),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,Zt,3,3,"button",22),o["\u0275\u0275template"](10,ti,10,18,"ng-container",21),o["\u0275\u0275template"](11,ii,16,15,"ng-container",21),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2).ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,7,"com.bmc.arsys.rx.innovation-studio.packaging.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isBundleFromCurrentOverlayGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isBundleFromCurrentOverlayGroup),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,9,"com.bmc.arsys.rx.innovation-studio.deployment.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.isBundleFromCurrentOverlayGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isBundleFromCurrentOverlayGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isFoundationBundle)}}function oi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2).ngIf;return o["\u0275\u0275nextContext"]().publishChatEnabledService(t.id)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.innovation-studio.chat.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.innovation-studio.publish-chat-enabled-service.label")," "))}function ri(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275elementStart"](1,"button",17),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,ni,12,11,"div",18),o["\u0275\u0275template"](5,oi,7,6,"div",18),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.innovation-studio.actions.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.isBusinessAnalyst),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isBusinessAnalyst)}}function ai(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",36),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275propertyInterpolate"]("href",o["\u0275\u0275pipeBind1"](1,2,e.applicationLink$),o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.visit-deployed-application.label")," ")}}function si(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",37),o["\u0275\u0275elementStart"](1,"strong"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",38),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"strong"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",38),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"strong"),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div"),o["\u0275\u0275text"](15),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,6,e.type===t.bundleTypes.application?"com.bmc.arsys.rx.client.common.application-id.label":"com.bmc.arsys.rx.client.common.library-id.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.id),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](8,8,"com.bmc.arsys.rx.innovation-studio.bundle-details.version.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.version),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](13,10,"com.bmc.arsys.rx.innovation-studio.bundle-details.developer.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.developerName)}}function li(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",1),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",3),o["\u0275\u0275template"](3,Kt,4,6,"a",4),o["\u0275\u0275template"](4,ri,6,5,"div",5),o["\u0275\u0275template"](5,ai,4,6,"a",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",7),o["\u0275\u0275element"](7,"adapt-icon",8),o["\u0275\u0275elementStart"](8,"h1",9),o["\u0275\u0275text"](9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"adapt-icon",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"span",11),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"input",12,13),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onClickFileInput(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,si,16,12,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275reference"](16);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.isApplication),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isActionMenuVisible),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isApplication),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("title",e.friendlyName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.friendlyName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("autoClose","outside")("adaptPopover",i),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.description),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("multiple",!1)}}const di=["dataEditorGrid"],ci=["displayIdColumnTemplate"];function pi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"a",9),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().editRecord(t.$ID$)}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e[1]," ")}}const ui=["processPreview"],mi=function(e){return{controls:e}},fi=function(e){return[e]};function hi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-form-builder",6),o["\u0275\u0275listener"]("modelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onModelChange(t)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](4,fi,o["\u0275\u0275pureFunction1"](2,mi,e.inputParamsControls)))("model",e.inputParamsModel)}}function gi(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.innovation-studio.process-management.run-process.no-input-params.label")))}function vi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"textarea",6),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.logs)}}function yi(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-empty-state",7),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("type","config")("label",e.emptyStateLabel)}}function bi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().downloadLog()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.download.label")," "))}const xi=["contextKeyCellTemplate"],Ci=["processDefinitionCellTemplate"];function Si(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-record-grid",29),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("config",t.getRecordGridConfig(e))}}function Di(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"adapt-tab-panel",27),o["\u0275\u0275pipe"](2,"lowercase"),o["\u0275\u0275template"](3,Si,1,1,"rx-record-grid",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).ngIf,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adapt-tab-title",n.tabs[e].title)("badge",i.processInstanceCounts[e])("badge-type",n.tabs[e].badgeType),o["\u0275\u0275attribute"]("rx-id",o["\u0275\u0275pipeBind1"](2,5,"process-instances-tab-panel-"+e)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",n.activatedTabs[e])}}function Ii(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",23),o["\u0275\u0275elementStart"](1,"adapt-rx-select",24),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onTimeframeChange(t)}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"adapt-tabset",25),o["\u0275\u0275listener"]("tab-active-changed",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).tabChanged(t)}),o["\u0275\u0275template"](4,Di,4,7,"ng-container",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](2,7,"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.select.label"))("ngModel",e.selectedTimeframe)("options",e.timeframes)("optionFormatter",e.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("type","pills")("tab-active",e.activeTabIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.processInstanceStatuses)}}function Ri(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275element"](1,"adapt-empty-state",31),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.innovation-studio.process-management.process-history-disabled.message")))}function wi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275elementStart"](2,"h5",6),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",7),o["\u0275\u0275elementStart"](5,"rx-breadcrumb-bar",8),o["\u0275\u0275listener"]("selectedItem",function(){const t=o["\u0275\u0275restoreView"](e).ngIf;return o["\u0275\u0275nextContext"]().resetProcessSelection(t.processDefinitionOptions[0])}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",9),o["\u0275\u0275elementStart"](7,"button",10),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().close()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",11),o["\u0275\u0275elementStart"](11,"adapt-sidebar",12),o["\u0275\u0275elementStart"](12,"adapt-sidebar-item",13),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementStart"](14,"div",14),o["\u0275\u0275elementStart"](15,"div",15),o["\u0275\u0275elementStart"](16,"button",16),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().runProcess()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"button",17),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).ngIf;return o["\u0275\u0275nextContext"]().previewProcess(t.processActionButtonsState.isRunButtonDisabled)}),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",18),o["\u0275\u0275elementStart"](23,"adapt-rx-select",19),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedProcess=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().refreshData()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",20),o["\u0275\u0275template"](25,Ii,5,9,"div",21),o["\u0275\u0275template"](26,Ri,3,3,"div",22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptTooltip",e.bundleDescriptor.friendlyName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.bundleDescriptor.friendlyName," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("items",e.breadcrumbItems),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,25,"com.bmc.arsys.rx.client.common.close.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("openedId",0)("adjustMainContainerWidth",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("iconClass","d-icon-layout_preview")("headerTitle",o["\u0275\u0275pipeBind1"](13,27,"com.bmc.arsys.rx.innovation-studio.process-management.process-sidebar.title")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",e.processActionButtonsState.isRunButtonDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,29,"com.bmc.arsys.rx.innovation-studio.process-management.run-process.button.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.processActionButtonsState.isViewButtonDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](21,31,"com.bmc.arsys.rx.innovation-studio.process-management.view-process.button.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",i.selectedProcess)("options",e.processDefinitionOptions)("optionFormatter",i.optionFormatter)("enableFilter",!0)("inline",!0)("selectAllButton",!1)("deselectAllButton",!1)("texts",i.texts)("multiple",!1)("singleSelectStyle","line")("popupMaxHeight","100%"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isProcessHistoryEnabled),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!1===e.isProcessHistoryEnabled)}}const Ei=function(e,t,i){return["/",e,"process","instance",t,i]};function Fi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275elementStart"](1,"a",33),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction3"](4,Ei,i.innovationStudioBundleId,e.processDefinitionName,e.instanceId)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](3,2,e.contextKey||"com.bmc.arsys.rx.innovation-studio.process-management.process-instance.label")," ")}}function Mi(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.processDefinitionName),"\n")}}function Ti(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275element"](1,"div",16),o["\u0275\u0275elementEnd"]())}function Oi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",17),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.bundleCreationFinishedMessage," ")}}function Ni(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"p",18),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.bundleCreationFinishedMessage," ")}}function Ai(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",19),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().create()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](7);o["\u0275\u0275property"]("disabled",e.bundleCreationStatus===e.deploymentStatus.InProgress||t.pristine||t.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.create.label")," ")}}const Pi=["nameColumnTemplate"];function ji(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-button-group",17),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().editableBundleSelectorModel=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().toggleEditableBundles(t)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngModel",e.editableBundleSelectorModel)("config",e.editableBundleSelectorConfig)("multiselectable",!1)("uncheckable",!1)}}function _i(e,t){1&e&&o["\u0275\u0275element"](0,"div",18)}function Vi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"button",20),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",21),o["\u0275\u0275elementStart"](5,"button",22),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.createBundle(t.bundleTypes.application)}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",23),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]();return t.createBundle(t.bundleTypes.library)}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,5,"com.bmc.arsys.rx.client.common.application.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,7,"com.bmc.arsys.rx.client.common.library.label")," "))}function ki(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",24),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openFileDialog()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.innovation-studio.workspace.install.button.label")," "))}function Bi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",25),o["\u0275\u0275elementStart"](1,"a",26),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("href",e.smartReportingUrl,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.innovation-studio.workspace.reports.button.label")," ")}}const $i=function(e,t){return["/",e,t]};function Li(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",27),o["\u0275\u0275elementStart"](1,"a",28),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("routerLink",o["\u0275\u0275pureFunction2"](2,$i,n.innovationStudioBundleId,e.id)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e[i.field]," ")}}var Gi,zi;!function(e){e.Records="record-definitions",e.Views="view-definitions",e.Processes="process-definitions",e.Rules="rule-definitions",e.Associations="association-definitions",e.NamedLists="named-list-definitions",e.Documents="document-definitions",e.WebAPIs="web-api-definitions",e.Events="event-definitions",e.EventStatistics="event-statistics-definitions",e.Chatbots="chatbot-definitions",e.Configurations="config-definitions"}(Gi||(Gi={})),function(e){e.Content="CONTENT",e.Install="INSTALL",e.Update="UPDATE"}(zi||(zi={}));const Ui={new:"new",copy:"copy",delete:"delete",rename:"rename",revertCustomization:"revert-customization"},qi={standardDefinitionActionNames:Ui,standardDefinitionActions:{[Ui.copy]:{labelKey:"com.bmc.arsys.rx.client.common.copy.label",id:Ui.copy,disabled:!0,rxId:"copy-button",icon:"files_copy_o"},[Ui.new]:{labelKey:"com.bmc.arsys.rx.client.common.new.label",id:Ui.new,disabled:!0,rxId:"new-button",icon:"plus_circle"},[Ui.delete]:{labelKey:"com.bmc.arsys.rx.client.common.delete.label",id:Ui.delete,disabled:!0,rxId:"delete-button",icon:"trash"},[Ui.rename]:{labelKey:"com.bmc.arsys.rx.client.common.rename.label",id:Ui.rename,disabled:!0,rxId:"rename-button",icon:"field_text"},[Ui.revertCustomization]:{labelKey:"com.bmc.arsys.rx.innovation-studio.definition-actions.revert-customization.label",id:Ui.revertCustomization,disabled:!0,rxId:"revert-button",icon:"undo"}},definitionGridColumns:{name:{title:"com.bmc.arsys.rx.client.common.name.label",fieldId:"name"},scope:{title:"com.bmc.arsys.rx.client.admin.web-api-connections.scope.label",fieldId:"scope",visible:!1},customizationPerspective:{title:"com.bmc.arsys.rx.client.admin.cognitive-search.status.label",fieldId:"customizationPerspective",visible:!1},lastUpdateTime:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.modified-date.label",fieldId:"lastUpdateTime"},lastChangedBy:{title:"com.bmc.arsys.rx.client.common.modified-by.label",fieldId:"lastChangedBy"},isEnabled:{title:"com.bmc.arsys.rx.client.approval.notification-configuration.enabled-field.label",fieldId:"isEnabled"}},configurationGridColumns:{component:{title:"com.bmc.arsys.rx.client.common.name.label",fieldId:"component"},componentType:{title:"com.bmc.arsys.rx.client.common.item-type.label",fieldId:"componentType"},status:{title:"com.bmc.arsys.rx.client.common.status.label",fieldId:"status"}},tabs:[{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.records.label",id:Gi.Records},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.views.label",id:Gi.Views},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.processes.label",id:Gi.Processes},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.rules.label",id:Gi.Rules},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.associations.label",id:Gi.Associations},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.named-lists.label",id:Gi.NamedLists},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.documents.label",id:Gi.Documents},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.web-apis.label",id:Gi.WebAPIs},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.events.label",id:Gi.Events},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.event-statistics.label",id:Gi.EventStatistics},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.chatbots.label",id:Gi.Chatbots},{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.label",id:Gi.Configurations}],errorCodes:{packageCreationAlreadyInProgress:6117},packageExportStatuses:{packageCreated:"PackageCreated",pendingPackageCreate:"PendingPackageCreate",error:"Error"},packageDeployStatuses:{error:"Error",deployed:"Deployed"},duplicateDataActions:{create:{value:"CREATE_NEW_RECORD",displayName:"Create New"},ignore:{value:"THROW_ERROR",displayName:"Ignore"},merge:{value:"MERGE",displayName:"Merge"},overwrite:{value:"REPLACE",displayName:"Overwrite"}},definitionTypes:{association:"ASSOCIATION",document:"DOCUMENT",event:"EVENT",eventStatistics:"EVENT_STATISTICS",namedList:"NAMED_LIST",process:"PROCESS",record:"RECORD",rule:"RULE",view:"VIEW",webApi:"WEBAPI"}},Xi="com.bmc.arsys.rx.application.common.CopyDefinitionCommand";var Wi;!function(e){e.Document="document",e.Event="event",e.EventStatistics="event-statistics",e.NamedList="named-list",e.Process="process",e.Record="record",e.Rule="rule",e.View="view",e.WebApi="web-api"}(Wi||(Wi={}));const Hi={[Wi.Document]:"DOCUMENT_DEFINITION",[Wi.Event]:"EVENT_DEFINITION",[Wi.EventStatistics]:"EVENT_STATISTICS_DEFINITION",[Wi.NamedList]:"NAMED_LIST",[Wi.Process]:"PROCESS_DEFINITION",[Wi.Record]:"RECORD_DEFINITION",[Wi.Rule]:"RULE_DEFINITION",[Wi.View]:"VIEW_DEFINITION",[Wi.WebApi]:"WEBAPI_DEFINITION"};class Qi extends I.RxModalClass{constructor(e,t,i,n,o,r,a,s,l){super(e,l),this.activeModalRef=e,this.rxOverlayService=t,this.rxGlobalCacheService=i,this.rxNotificationService=n,this.router=o,this.translateService=r,this.rxDefinitionNameService=a,this.httpClient=s,this.injector=l,this.targetBundle=[],this.autoFocusTargetBundleField=!0,this.config=this.activeModalRef.getData(),this.definitionDisplayName=this.rxDefinitionNameService.getDisplayName(this.config.definitionName),this.bundles$=this.rxGlobalCacheService.getBundleDescriptors().pipe((0,b.startWith)([]),(0,b.map)(e=>e.filter(e=>![h.RX_APPLICATION.settingsBundleId,h.RX_APPLICATION.standardlib,h.RX_APPLICATION.innovationStudioBundleId,h.RX_APPLICATION.platformBundleId].includes(e.id)&&this.rxOverlayService.areNewDefinitionsAllowedSync(e)).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName))),(0,b.tap)(e=>{const t=e.find(e=>e.id===this.rxDefinitionNameService.getBundleId(this.config.definitionName));t&&(this.targetBundle=(0,y.castArray)(t),this.autoFocusTargetBundleField=!1)}))}isDirty(){return this.selectBundleForm.dirty}optionFormatter(e){return e.friendlyName}copyDefinition(){const e=this.rxDefinitionNameService.getDefinitionName(this.targetBundle[0].id,this.definitionDisplayName);this.allowDismiss=!1,this.httpClient.post(h.RX_RESOURCE_URLS.command,{resourceType:Xi,type:Hi[this.config.definitionType],srcName:this.config.definitionName,destName:e}).pipe((0,b.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.definition-copied.message")),this.activeModalRef.close(),this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.config.definitionType,this.config.editFragment||"edit",e])})}cancel(){this.activeModalRef.dismiss(C.DismissReasons.CLOSE_BTN)}}Qi.\u0275fac=function(e){return new(e||Qi)(o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](w.HttpClient),o["\u0275\u0275directiveInject"](o.Injector))},Qi.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Qi,selectors:[["ax-copy-definition"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](q,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.selectBundleForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:29,consts:[[1,"modal-header"],[1,"modal-title"],["data-dismiss","modal","type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],["selectBundleForm","ngForm"],["rx-id","application-name","required","","name","targetBundle",1,"mb-3",3,"autofocus","ngModel","options","optionFormatter","disabled","label","ngModelChange"],["rx-id","definition-name","name","definition","required","",1,"mb-6",3,"autofocus","label","ngModel","disabled","ngModelChange"],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","ok-button",3,"adaptInlineLoader","disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"form",null,4),o["\u0275\u0275elementStart"](8,"adapt-rx-select",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.targetBundle=e}),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"adapt-rx-textfield",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.definitionDisplayName=e}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",7),o["\u0275\u0275elementStart"](14,"button",8),o["\u0275\u0275listener"]("click",function(){return t.copyDefinition()}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",9),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](7);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,17,"com.bmc.arsys.rx.innovation-studio.copy-definition.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,21,"com.bmc.arsys.rx.innovation-studio.copy-definition.target-application.label")),o["\u0275\u0275property"]("autofocus",t.autoFocusTargetBundleField)("ngModel",t.targetBundle)("options",o["\u0275\u0275pipeBind1"](9,19,t.bundles$))("optionFormatter",t.optionFormatter)("disabled",!t.allowDismiss),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,23,"com.bmc.arsys.rx.innovation-studio.definition-name.label")),o["\u0275\u0275property"]("autofocus",!t.autoFocusTargetBundleField)("ngModel",t.definitionDisplayName)("disabled",!t.allowDismiss),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",e.pristine||e.invalid||!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,25,"com.bmc.arsys.rx.client.common.copy.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,27,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[E["\u0275NgNoValidate"],E.NgControlStatusGroup,E.NgForm,C.AdaptRxSelectComponent,E.RequiredValidator,E.NgControlStatus,E.NgModel,C.AdaptRxTextfieldComponent,C.AdaptButtonComponent,C.AdaptInlineStandaloneDirective],pipes:[x.TranslatePipe,n.AsyncPipe],encapsulation:2});class Ki{constructor(e){this.rxModalService=e}openCopyDefinitionComponentModal(e,t,i){return this.rxModalService.openModal({content:Qi,data:{definitionName:e.name,definitionType:t,editFragment:i},size:"sm"})}}Ki.\u0275fac=function(e){return new(e||Ki)(o["\u0275\u0275inject"](I.RxModalService))},Ki.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ki,factory:Ki.\u0275fac,providedIn:"root"});class Ji{constructor(e,t,i,n){this.translateService=e,this.rxBundleCacheService=t,this.rxSessionExpirationService=i,this.rxGainsightConfiguratorService=n,this.customAction=new o.EventEmitter,this.deleteDefinition=new o.EventEmitter,this.renameDefinition=new o.EventEmitter,this.revertCustomization=new o.EventEmitter,this.copyDefinition=new o.EventEmitter,this.addDefinition=new o.EventEmitter,this.rowSelectionChanged=new o.EventEmitter,this.destroyed$=new R.ReplaySubject(1)}set definitionActions(e){this._definitionActions=(e||[]).map(e=>Object.assign(Object.assign({},qi.standardDefinitionActions[e.id]||{}),e))}get definitionActions(){return this._definitionActions}set gridColumns(e){this._gridColumns=e.map(e=>{const t=Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)});return e.fieldId===qi.definitionGridColumns.customizationPerspective.fieldId?t.cellTemplate=this.customizationStatusCellTemplate:e.fieldId===qi.definitionGridColumns.isEnabled.fieldId?t.cellTemplate=this.isEnabledCellTemplate:e.fieldId!==qi.definitionGridColumns.name.fieldId||e.cellTemplate?e.fieldId!==qi.definitionGridColumns.scope.fieldId||e.cellTemplate||(t.cellTemplate=this.scopeCellTemplate):t.cellTemplate=this.nameCellTemplate,e.fieldId===qi.definitionGridColumns.lastUpdateTime.fieldId&&(t.sortable={direction:F.ColumnSortDirection.Desc,priority:0}),t})}get gridColumns(){return this._gridColumns}ngOnInit(){var e;null!==(e=this.editRouterLink)&&void 0!==e||(this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit/`),this.recordGridConfig$=(0,R.of)({guid:`ax-${this.definitionType}-definitions-grid`,enableRowSelection:F.RowSelectionMode.Multiple,getRecordDefinition:()=>(0,R.of)(this.recordDefinition),columns:this.gridColumns,enableFiltering:!1,useExternalFiltering:!1,recordIdField:qi.definitionGridColumns.name.fieldId,styles:"flex-fill",getData:()=>this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMapTo)(this.definitions$)),emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.definition-tab.no-definition.label")}),this.recordGrid.rowSelectionChanged.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rowSelectionChanged.emit((0,y.cloneDeep)(e))}),this.rxBundleCacheService.getCurrentBundleDescriptor().subscribe(e=>this.bundleDescriptor=e),this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:"Bundle workspace"}})}onClick(e){switch(e){case qi.standardDefinitionActionNames.copy:this.copyDefinition.emit(this.recordGrid.api.getFirstSelectedRow());break;case qi.standardDefinitionActionNames.delete:this.deleteDefinition.emit(this.recordGrid.api.getSelectedRows());break;case qi.standardDefinitionActionNames.revertCustomization:this.revertCustomization.emit(this.recordGrid.api.getSelectedRows());break;case qi.standardDefinitionActionNames.rename:this.renameDefinition.emit({selectedRow:this.recordGrid.api.getFirstSelectedRow(),definitionNames:(0,y.map)(this.recordGrid.adaptTableConfig.data,qi.definitionGridColumns.name.fieldId)});break;case qi.standardDefinitionActionNames.new:this.addDefinition.emit();break;default:this.customAction.emit({actionId:e,selectedRows:this.recordGrid.api.getSelectedRows()})}}ngOnChanges(e){var t,i;!0===(null===(t=e.isActionInProgress)||void 0===t?void 0:t.currentValue)?this.busySubscription=R.NEVER.subscribe():null===(i=this.busySubscription)||void 0===i||i.unsubscribe()}trackByFn(e){return e.id}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2"])}getDeleteSelectedDefinitionMessage(){const e=this.recordGrid.api.getSelectedRows(),t=this.recordGrid.api.getVisibleRows(),i=(0,y.intersectionBy)(e,t,e=>e.name).length===e.length;let n;return n=e.length>1?i?this.translateService.instant("com.bmc.arsys.rx.innovation-studio.delete-definitions-confirmation.message"):this.translateService.instant("com.bmc.arsys.rx.innovation-studio.delete-hidden-definitions-confirmation.message",{count:e.length}):i?this.translateService.instant("com.bmc.arsys.rx.innovation-studio.delete-definition-confirmation.message"):this.translateService.instant("com.bmc.arsys.rx.innovation-studio.delete-hidden-definition-confirmation.message"),n}}Ji.\u0275fac=function(e){return new(e||Ji)(o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](D.RxGainsightConfiguratorService))},Ji.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ji,selectors:[["ax-definition-tab"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](X,7),o["\u0275\u0275viewQuery"](W,7),o["\u0275\u0275viewQuery"](H,7),o["\u0275\u0275viewQuery"](Q,7),o["\u0275\u0275viewQuery"](F.RecordGridComponent,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.customizationStatusCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.isEnabledCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.nameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.scopeCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{isActionInProgress:"isActionInProgress",definitionType:"definitionType",definitionActions:"definitionActions",gridColumns:"gridColumns",definitions$:"definitions$",recordDefinition:"recordDefinition",editRouterLink:"editRouterLink"},outputs:{customAction:"customAction",deleteDefinition:"deleteDefinition",renameDefinition:"renameDefinition",revertCustomization:"revertCustomization",copyDefinition:"copyDefinition",addDefinition:"addDefinition",rowSelectionChanged:"rowSelectionChanged"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:6,consts:[[1,"d-flex","flex-row","ml-1"],[4,"ngFor","ngForOf","ngForTrackBy"],["nameCellTemplate",""],["customizationStatusCellTemplate",""],["isEnabledCellTemplate",""],["scopeCellTemplate",""],[3,"config"],[3,"options"],[4,"ngIf"],["adaptDropdown","","placement","bottom-left",1,"dropdown"],["adapt-button","","btn-type","tertiary","adaptDropdownToggle","",1,"pl-0","ml-4",3,"disabled"],[3,"name"],["adaptDropdownMenu","",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-header",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-header"],[1,"dropdown-item",3,"click"],["adapt-button","","btn-type","tertiary",1,"px-3",3,"disabled","click"],[3,"name",4,"ngIf"],[3,"routerLink"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,ie,3,2,"ng-container",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,ne,3,4,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,oe,2,3,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](6,re,2,3,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](8,ae,2,4,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275element"](10,"rx-record-grid",6),o["\u0275\u0275element"](11,"rx-busy-indicator",7)),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.definitionActions)("ngForTrackBy",t.trackByFn),o["\u0275\u0275advance"](9),o["\u0275\u0275property"]("config",t.recordGridConfig$),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](4,se,t.busySubscription)))},directives:[n.NgForOf,F.RecordGridComponent,I.RxBusyIndicatorComponent,n.NgIf,C.AdaptDropdownDirective,C.AdaptButtonComponent,C.AdaptDropdownToggleDirective,C.AdaptIconComponent,C.AdaptDropdownMenuDirective,p.RouterLinkWithHref],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe,h.RxCustomizationStatusPipe,h.RxDefinitionScopePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}']});class Yi extends h.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.datasource.datapage.DataSourceDataPageQuery"),this.injector=e}}Yi.\u0275fac=function(e){return new(e||Yi)(o["\u0275\u0275inject"](o.Injector))},Yi.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Yi,factory:Yi.\u0275fac});class Zi{constructor(e,t,i,n,o){this.httpClient=e,this.rxDataSourceDataPageService=t,this.rxDocumentDefinitionDataPageService=i,this.rxSessionExpirationService=n,this.rxWebApiDefinitionDataPageService=o}getArsTables(e,t,i,n,o=[]){const r={pageSize:e,startIndex:t,dataSourceName:i};return n.length&&Object.assign(r,{tableName:n}),o.length&&Object.assign(r,{sortBy:o}),this.rxDataSourceDataPageService.get({params:r})}getArsTableDefinition(e,t){return this.httpClient.get(`/api/rx/application/datasource/table/${e}/${t}`)}getDataSourceNames(e){return this.httpClient.get(`/api/rx/application/datasource/type/${e}`)}getDataSourceTypes(){return this.httpClient.get("/api/rx/application/datasource/type")}getWebApiDefinitions(){return this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>this.rxWebApiDefinitionDataPageService.get()))}getWebApiDocuments(e){return this.rxDocumentDefinitionDataPageService.get().pipe((0,b.map)(t=>((0,y.remove)(t.data,t=>!e[t.name]),t.totalSize=t.data.length,t)))}}Zi.\u0275fac=function(e){return new(e||Zi)(o["\u0275\u0275inject"](w.HttpClient),o["\u0275\u0275inject"](Yi),o["\u0275\u0275inject"](T.RxDocumentDefinitionDataPageService),o["\u0275\u0275inject"](h.RxSessionExpirationService),o["\u0275\u0275inject"](O.RxWebApiDefinitionDataPageService))},Zi.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Zi,factory:Zi.\u0275fac});class en{constructor(e,t,i){this.rxExternalDataService=e,this.rxWizardModalComponent=t,this.translateService=i,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){this.sectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.document-selection.label");const e=[{fieldId:qi.definitionGridColumns.name.fieldId,title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),cellTemplate:this.documentNameCellTemplate}],t={fieldDefinitions:[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]};this.recordGridConfig$=(0,R.of)({columns:e,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.document-selection.grid.empty-state.label"),enableRowSelection:F.RowSelectionMode.Single,enableFiltering:!1,recordIdField:qi.definitionGridColumns.name.fieldId,styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)(t),getData:()=>this.context.webApi?this.rxExternalDataService.getWebApiDocuments(this.getWebApiRequests()):(0,R.of)({totalSize:0,data:[]})}),this.recordGrid.rowSelectionChanged.pipe((0,b.skip)(2),(0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({document:(0,y.head)(e)||null})});const i=this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$));i.pipe((0,b.map)(e=>e.webApi),(0,b.distinctUntilChanged)(y.isEqual),(0,b.skip)(1)).subscribe(()=>{this.rxWizardModalComponent.api.updateContext({document:null}),this.recordGrid.api.refresh().subscribe()});const n=(0,R.combineLatest)([this.rxWizardModalComponent.steps$,this.rxWizardModalComponent.tabIndex$]).pipe((0,b.map)(([e,t])=>"document-selection"===e[t].id),(0,b.takeUntil)(this.destroyed$)),o=i.pipe((0,b.map)(e=>e.document),(0,b.distinctUntilChanged)(y.isEqual));(0,R.combineLatest)([n,o]).pipe((0,b.filter)(([e,t])=>e),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(([e,t])=>{t?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getWebApiRequests(){return this.context.webApi.requestDefinitions.reduce((e,t)=>(t.body&&!e[t.body]&&(e[t.body]=t.body),t.output&&!e[t.output]&&(e[t.output]=t.output),e),{})}}en.\u0275fac=function(e){return new(e||en)(o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},en.\u0275cmp=o["\u0275\u0275defineComponent"]({type:en,selectors:[["ax-document-selection-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),o["\u0275\u0275viewQuery"](le,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.documentNameCellTemplate=e.first)}},inputs:{context:"context"},decls:4,vars:3,consts:[[3,"label","showRequiredLabel"],[3,"config"],["documentNameCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-rx-control-label",0),o["\u0275\u0275element"](1,"rx-record-grid",1),o["\u0275\u0275template"](2,de,2,3,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("label",t.sectionLabel)("showRequiredLabel",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[C.AdaptRxControlLabelComponent,F.RecordGridComponent],pipes:[h.RxDefinitionNamePipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}rx-record-grid[_ngcontent-%COMP%]{height:100%}"]});class tn{constructor(e,t){this.rxWizardModalComponent=e,this.translateService=t,this.externalFieldIdPath="fieldMapping.externalFieldId",this.availableExternalColumns=[],this.selectedExternalColumns=[],this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){this.availableFieldsSectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.available-fields.section.label"),this.selectedFieldsSectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.selected-fields.section.label"),this.rxWizardModalComponent.api.enableFinishButton();this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$)).pipe((0,b.map)(e=>e.mappedInternalFields),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(()=>this.updateGridsData());const e={columns:[{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"name"},{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.field-id.label"),fieldId:"id",sortable:{direction:F.ColumnSortDirection.Asc,priority:1}},{title:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label"),fieldId:"resourceType",cellTemplate:this.resourceTypeCellTemplate}],enableColumnSelection:!1,enableFiltering:!1,enableRowSelection:F.RowSelectionMode.Multiple,recordIdField:"id",styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)({fieldDefinitions:[{id:"name",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"id",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"resourceType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]})};this.availableFieldsGridConfig$=(0,R.of)((0,y.defaults)({emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.available-fields.grid.empty-state.label"),getData:()=>(0,R.of)({totalSize:this.availableExternalColumns.length,data:this.availableExternalColumns})},e)),this.selectedFieldsGridConfig$=(0,R.of)((0,y.defaults)({emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.selected-fields.grid.empty-state.label"),getData:()=>(0,R.of)({totalSize:this.selectedExternalColumns.length,data:this.selectedExternalColumns})},e))}deselectColumns(){const e=(0,y.map)(this.selectedFieldsGrid.api.getSelectedRows(),"id");this.moveColumns(e,this.selectedExternalColumns,this.availableExternalColumns)}selectColumns(){const e=(0,y.map)(this.availableFieldsGrid.api.getSelectedRows(),"id");this.moveColumns(e,this.availableExternalColumns,this.selectedExternalColumns)}getAvailableColumns(){return(0,y.reject)(this.context.externalTableDefinition.fieldDefinitions,e=>this.isAssociatedColumn(e)||this.isSelectedColumn(e))}getExternalFieldId(e){return(0,y.get)(e,this.externalFieldIdPath)}isAssociatedColumn(e){return(0,y.some)(this.context.mappedInternalFields,[this.externalFieldIdPath,this.getExternalFieldId(e)])}isSelectedColumn(e){return(0,y.some)(this.selectedExternalColumns,[this.externalFieldIdPath,this.getExternalFieldId(e)])}moveColumns(e,t,i){(0,y.chain)(t).remove(t=>(0,y.includes)(e,t.id)).forEach(e=>i.push(e)).value(),this.refreshElements(),this.rxWizardModalComponent.api.updateContext({selectedExternalFields:this.selectedExternalColumns})}refreshElements(){var e,t;null===(e=this.availableFieldsGrid)||void 0===e||e.api.refresh().subscribe(),null===(t=this.selectedFieldsGrid)||void 0===t||t.api.refresh().subscribe()}updateGridsData(){this.selectedExternalColumns=[],this.availableExternalColumns=this.getAvailableColumns(),this.refreshElements()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}tn.\u0275fac=function(e){return new(e||tn)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},tn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:tn,selectors:[["ax-field-selection-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ce,7),o["\u0275\u0275viewQuery"](pe,5),o["\u0275\u0275viewQuery"](ue,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.resourceTypeCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.availableFieldsGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.selectedFieldsGrid=e.first)}},inputs:{context:"context"},decls:14,vars:6,consts:[[1,"rx-external-record-wizard__content"],[1,"rx-external-record-wizard__content--left"],[3,"label"],[3,"config"],["availableFieldsGrid",""],[1,"rx-external-record-wizard__content--middle"],["type","button","adapt-button","","btn-type","secondary","rx-id","select-button",1,"d-icon-angle_right",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","deselect-button",1,"d-icon-angle_left",3,"disabled","click"],[1,"rx-external-record-wizard__content--right"],["selectedFieldsGrid",""],["resourceTypeCellTemplate",""]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"adapt-rx-control-label",2),o["\u0275\u0275element"](3,"rx-record-grid",3,4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"button",6),o["\u0275\u0275listener"]("click",function(){return t.selectColumns()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",7),o["\u0275\u0275listener"]("click",function(){return t.deselectColumns()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",8),o["\u0275\u0275element"](9,"adapt-rx-control-label",2),o["\u0275\u0275element"](10,"rx-record-grid",3,9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,me,2,3,"ng-template",null,10,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](4),i=o["\u0275\u0275reference"](11);o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.availableFieldsSectionLabel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.availableFieldsGridConfig$),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!(null!=e&&e.api.getSelectedRowCount())),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!(null!=i&&i.api.getSelectedRowCount())),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.selectedFieldsSectionLabel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.selectedFieldsGridConfig$)}},directives:[C.AdaptRxControlLabelComponent,F.RecordGridComponent,C.AdaptButtonComponent],pipes:[S.RxRecordDefinitionResourceTypePipe],styles:["[_nghost-%COMP%]{display:flex;height:100%}[_nghost-%COMP%]   .rx-external-record-wizard__content[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .rx-external-record-wizard__content--left[_ngcontent-%COMP%], [_nghost-%COMP%]   .rx-external-record-wizard__content--right[_ngcontent-%COMP%]{flex:0 0 45%;max-width:45%}[_nghost-%COMP%]   .rx-external-record-wizard__content--middle[_ngcontent-%COMP%]{flex:0 0 10%;display:flex;flex-direction:column;justify-content:center;align-items:center}[_nghost-%COMP%]   .rx-external-record-wizard__content--middle[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:first-child){margin-top:5px}[_nghost-%COMP%]   rx-record-grid[_ngcontent-%COMP%]{height:calc(100% - 1.5rem)}"]});class nn{constructor(e,t,i,n,o){this.rxDefinitionNameService=e,this.rxDocumentDefinitionService=t,this.rxJsonParserService=i,this.rxWizardModalComponent=n,this.translateService=o,this.selectedDocumentTreeNodes=[],this.treeWrap=C.TreeWrap.WrapAll,this.selectedDocumentSchemaFields=[],this.selectedFieldsGroup=new E.FormGroup({}),this.mappingGroup=new E.FormGroup({displayId:new E.FormControl([]),id:new E.FormControl([])}),this.supportedFieldTypes=["boolean","character","dateOnly","dateTime","decimal","integer","real","timeOnly"],this.fieldTypes=(0,y.sortBy)((0,y.reduce)(S.RX_RECORD_DEFINITION.dataTypes,(e,t,i)=>((0,y.includes)(this.supportedFieldTypes,i)&&e.push(t),e),[]),"displayName"),this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){this.availableFieldsSectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.available-fields.section.label"),this.mapToDisplayIdLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.map-to-display-id.label"),this.mapToIdLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.map-to-id.label"),this.selectedFieldsSectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.selected-fields.section.label");const e=[{fieldId:qi.definitionGridColumns.name.fieldId,title:this.translateService.instant(qi.definitionGridColumns.name.title)},{fieldId:"type",title:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label"),sortable:!1,cellTemplate:this.typeCellTemplate},{fieldId:"delete",title:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),sortable:!1,cellTemplate:this.deleteCellTemplate}],t={fieldDefinitions:[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"type",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"delete",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]};this.recordGridConfig$=(0,R.of)({columns:e,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.grid.empty-state.label"),enableFiltering:!1,enableRowSelection:null,recordIdField:qi.definitionGridColumns.name.fieldId,styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)(t),getData:()=>(0,R.of)({data:this.selectedDocumentSchemaFields,totalSize:this.selectedDocumentSchemaFields.length})});const i=this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$));i.pipe((0,b.map)(e=>{var t;return null===(t=e.document)||void 0===t?void 0:t.name}),(0,b.distinctUntilChanged)(y.isEqual),(0,b.switchMap)(e=>(this.selectedDocumentTreeNodes=[],this.selectedDocumentSchemaFields=[],this.rxWizardModalComponent.api.updateContext({documentSchemaFields:[],nonDocumentSchemaFields:[]}),e?this.rxDocumentDefinitionService.get(e):(0,R.of)())),(0,b.skipWhile)(y.isEmpty)).subscribe(e=>{this.documentTree=[{data:e.guid,label:this.rxDefinitionNameService.getDisplayName(e.name),children:this.prepareTreeForAdapt(e.documentSchema,[]),expanded:!0,disallowMultipleNodeSelection:!0}],this.recordGrid.api.refresh().subscribe()});const n=(0,R.combineLatest)([this.rxWizardModalComponent.steps$,this.rxWizardModalComponent.tabIndex$]).pipe((0,b.map)(([e,t])=>"field-tree-selection"===e[t].id),(0,b.takeUntil)(this.destroyed$)),o=i.pipe((0,b.map)(e=>e.documentSchemaFields),(0,b.distinctUntilChanged)(y.isEqual));(0,R.combineLatest)([n,o]).pipe((0,b.filter)(([e,t])=>e),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(([e,t])=>{t.length?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton(),(0,y.forEach)(this.mappingGroup.controls,e=>{e.value.length&&!(0,y.some)(t,["path",e.value[0].path])&&e.reset([])})}),this.mappingGroup.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{var t,i;const n={displayId:e.displayId&&(null===(t=e.displayId[0])||void 0===t?void 0:t.path)||"",id:e.id&&(null===(i=e.id[0])||void 0===i?void 0:i.path)||""};this.rxWizardModalComponent.api.updateContext({selectedFieldMapping:n})}),this.selectedFieldsGroup.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=(0,y.cloneDeep)(t.documentSchemaFields);i.forEach(t=>{t.type=e[t.path][0].resourceType}),this.rxWizardModalComponent.api.updateContext({documentSchemaFields:i})})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getCoreFieldMappingOptions(){return(0,y.sortBy)(this.selectedDocumentSchemaFields,"name")}optionFormatter(e){return e.displayName||e.name}selectFields(){this.selectedDocumentSchemaFields=this.selectedDocumentTreeNodes.reduce((e,t)=>{if(!t.children){const i={name:t.name,path:t.path,type:S.RX_RECORD_DEFINITION.dataTypes.character.resourceType};t.disallowMultipleNodeSelection||(t.disallowMultipleNodeSelection=!0,this.selectedFieldsGroup.setControl(t.path,new E.FormControl([S.RX_RECORD_DEFINITION.dataTypes.character]))),e.push(i)}return e},[]),this.rxWizardModalComponent.api.updateContext({documentSchemaFields:(0,y.cloneDeep)(this.selectedDocumentSchemaFields)}),this.recordGrid.api.refresh().subscribe()}unselectField(e){(0,y.find)(this.selectedDocumentTreeNodes,{data:e.path}).disallowMultipleNodeSelection=!1,this.selectedDocumentTreeNodes=this.selectedDocumentTreeNodes.filter(t=>{var i;return t.data!==e.path&&!(null===(i=t.children)||void 0===i?void 0:i.some(t=>t.data===e.path))}),(0,y.remove)(this.selectedDocumentSchemaFields,{path:e.path}),this.rxWizardModalComponent.api.updateContext({documentSchemaFields:(0,y.cloneDeep)(this.selectedDocumentSchemaFields)}),this.recordGrid.api.refresh().subscribe()}prepareTreeForAdapt(e,t){let i=this.rxJsonParserService.tryParseJson(e,{});return(0,y.isArray)(i)&&(i=(0,y.head)(i)),this.deepProcessJson(i,"",[],t)}deepProcessJson(e,t,i,n,o){return(0,y.reduce)(e,(e,r,a)=>{const s=(t?t+"||":"")+a;(0,y.some)(n,["path",s]);let l=null;const d={name:a,label:a,data:s,path:s,type:S.RX_RECORD_DEFINITION.resourceTypes.character,isArray:(0,y.isArray)(r),parent:o,children:null,expanded:!0,disallowMultipleNodeSelection:null};if((0,y.isArray)(r)){i.some(e=>-1!==s.indexOf(e))||(i.push(s),l=this.flattenListStructure(r,s,i,n,d))}else(0,y.isObject)(r)&&(l=this.deepProcessJson(r,s,i,n,d));return d.children=l,d.disallowMultipleNodeSelection=Boolean(l),e.push(d),e},[])}flattenListStructure(e,t,i,n,o){const r=(0,y.head)(e);return(0,y.isObject)(r)?this.deepProcessJson(r,t,i,n,o):[]}}nn.\u0275fac=function(e){return new(e||nn)(o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](T.RxDocumentDefinitionService),o["\u0275\u0275directiveInject"](M.RxJsonParserService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},nn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:nn,selectors:[["ax-field-tree-selection-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),o["\u0275\u0275viewQuery"](fe,7),o["\u0275\u0275viewQuery"](he,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.typeCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.deleteCellTemplate=e.first)}},decls:17,vars:15,consts:[[1,"row"],[1,"col-5","d-flex","flex-column","pr-0","mh-100"],[3,"label"],[1,"border","h-100","p-1","field-tree-wrapper"],["selectionMode","checkbox",3,"selection","value","wrap","selectionChange"],[1,"col-1","d-flex","align-items-center"],["type","button","adapt-button","","btn-type","secondary","rx-id","add-button",1,"d-icon-angle_right",3,"click"],[1,"col-6","d-flex","flex-column","pl-0"],[3,"label","showRequiredLabel"],[1,"form-group",3,"config"],[1,"d-flex","flex-column","control-width"],["appendToBody","true",1,"form-group",3,"formControl","label","options","optionFormatter"],["appendToBody","true",3,"formControl","label","options","optionFormatter"],["typeCellTemplate",""],["deleteCellTemplate",""],["appendToBody","true",1,"type-selector",3,"formControl","options","optionFormatter","popupMaxHeight"],["adapt-button","","btn-type","tertiary","type","button",1,"unselect-field-button","d-icon-minus_circle","text-danger",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"adapt-rx-control-label",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"adapt-tree",4),o["\u0275\u0275listener"]("selectionChange",function(e){return t.selectedDocumentTreeNodes=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",5),o["\u0275\u0275elementStart"](6,"button",6),o["\u0275\u0275listener"]("click",function(){return t.selectFields()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",7),o["\u0275\u0275element"](8,"adapt-rx-control-label",8),o["\u0275\u0275element"](9,"rx-record-grid",9),o["\u0275\u0275elementStart"](10,"div",10),o["\u0275\u0275element"](11,"adapt-rx-select",11),o["\u0275\u0275element"](12,"adapt-rx-select",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,ge,1,4,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](15,ve,1,0,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.availableFieldsSectionLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("selection",t.selectedDocumentTreeNodes)("value",t.documentTree)("wrap",t.treeWrap),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("label",t.selectedFieldsSectionLabel)("showRequiredLabel",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.mappingGroup.controls.displayId)("label",t.mapToDisplayIdLabel)("options",t.getCoreFieldMappingOptions())("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formControl",t.mappingGroup.controls.id)("label",t.mapToIdLabel)("options",t.getCoreFieldMappingOptions())("optionFormatter",t.optionFormatter))},directives:[C.AdaptRxControlLabelComponent,C.AdaptTreeComponent,C.AdaptButtonComponent,F.RecordGridComponent,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective],styles:["[_nghost-%COMP%]{display:flex;height:100%}[_nghost-%COMP%]     .rx-custom-cell{max-height:38px}[_nghost-%COMP%]     .type-selector, [_nghost-%COMP%]     .unselect-field-button{margin:-.5rem -13px}rx-record-grid[_ngcontent-%COMP%]{height:100%}.field-tree-wrapper[_ngcontent-%COMP%]{overflow:auto}"]});class on{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxWizardModalComponent=t,this.translateService=i,this.availableOperationTypes=["GET"],this.operationTypeFormControl=new E.FormControl("GET",null),this.webApiRequestNameFormControl=new E.FormControl([],E.Validators.required),this.destroyed$=new R.ReplaySubject(1),this.optionFormatter=e=>this.rxDefinitionNameService.getDisplayName(e.displayValue)}ngOnInit(){this.operationTypeLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.operation-selection.operation-type.section.label"),this.webApiRequestLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.operation-selection.web-api-request.section.label");const e=this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$));e.pipe((0,b.map)(e=>e.document),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(e=>{this.webApiRequestNameFormControl.setValue([]),this.availableRequests=e?this.context.webApi.requestDefinitions.reduce((t,i)=>((0,y.includes)(this.availableOperationTypes,i.method)&&i.output===e.name&&t.push({webRequestGuid:i.guid,displayValue:i.name,method:i.method}),t),[]):[]}),e.pipe((0,b.map)(e=>e.operations),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(e=>{e?this.rxWizardModalComponent.api.enableFinishButton():this.rxWizardModalComponent.api.disableFinishButton()}),this.webApiRequestNameFormControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({operations:e.length?e.map(e=>({webRequestGuid:e.webRequestGuid,operation:e.method})):null})})}}on.\u0275fac=function(e){return new(e||on)(o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},on.\u0275cmp=o["\u0275\u0275defineComponent"]({type:on,selectors:[["ax-operation-selection-step"]],inputs:{context:"context"},decls:11,vars:9,consts:[[1,"row"],[1,"col-2"],[3,"label"],[1,"col-10"],[3,"label","showRequiredLabel"],[3,"formControl"],[3,"value","label",4,"ngFor","ngForOf"],[3,"options","required","formControl","optionFormatter"],[3,"value","label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"adapt-rx-control-label",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275element"](4,"adapt-rx-control-label",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",0),o["\u0275\u0275elementStart"](6,"div",1),o["\u0275\u0275elementStart"](7,"adapt-rx-radiobutton-group",5),o["\u0275\u0275template"](8,ye,1,2,"adapt-rx-radiobutton",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",3),o["\u0275\u0275element"](10,"adapt-rx-select",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.operationTypeLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.webApiRequestLabel)("showRequiredLabel",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formControl",t.operationTypeFormControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.availableOperationTypes),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.availableRequests)("required",!0)("formControl",t.webApiRequestNameFormControl)("optionFormatter",t.optionFormatter))},directives:[C.AdaptRxControlLabelComponent,C.AdaptRxRadiobuttonGroupComponent,E.NgControlStatus,E.FormControlDirective,n.NgForOf,C.AdaptRxSelectComponent,E.RequiredValidator,C.AdaptRxRadiobuttonComponent],encapsulation:2});class rn{constructor(e,t,i){this.rxExternalDataService=e,this.rxWizardModalComponent=t,this.translateService=i,this.externalColumns=[],this.externalColumnIds=[],this.internalFieldsForMapping=[],this.rawExternalColumns=[],this.gridRowsData=[],this.destroyed$=new R.ReplaySubject(1),this.externalColumnOptionFormatter=e=>e.name,this.externalColumnIdOptionFormatter=e=>e.id}ngOnInit(){this.sectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.label"),this.sectionInfoLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.section-info.label"),this.sectionInfoTooltip=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.section-info.tooltip"),this.rxWizardModalComponent.api.disableNextButton();this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$)).pipe((0,b.map)(e=>e.tableName),(0,b.distinctUntilChanged)(y.isEqual),(0,b.switchMap)(e=>(this.rawExternalColumns=[],this.gridRowsData=[],this.externalColumnIds=[],this.externalColumns=[],this.recordIdFieldsStepRecordGrid&&this.recordIdFieldsStepRecordGrid.api.refresh().subscribe(),e?(this.internalFieldsForMapping=(0,y.chain)(S.RX_RECORD_DEFINITION.coreFields).filter(e=>S.RX_RECORD_DEFINITION.externalRecordDefinitionCoreFieldIds.includes(e.id)).map(e=>(0,y.defaults)((0,y.cloneDeep)(e),{fieldMapping:{externalFieldId:String(e.id)}})).value(),this.rxExternalDataService.getArsTableDefinition(this.context.dataSourceName,e)):(this.internalFieldsForMapping=[],this.rxWizardModalComponent.api.updateContext({externalTableDefinition:{},mappedInternalFields:[]}),(0,R.of)()))),(0,b.skipWhile)(y.isEmpty)).subscribe(e=>{this.rawExternalColumns=e.fieldDefinitions,this.setGridRowsData(),this.rxWizardModalComponent.api.updateContext({externalTableDefinition:e,mappedInternalFields:(0,y.cloneDeep)(this.internalFieldsForMapping)}),this.externalColumnIds=this.rawExternalColumns.map(e=>({id:e.fieldMapping.externalFieldId,name:e.name})),this.externalColumns=(0,y.sortBy)(this.externalColumnIds,"name"),this.recordIdFieldsStepRecordGrid.api.refresh().subscribe()});const e=[{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.grid.record-id-field.label"),fieldId:"name"},{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.grid.field-id.label"),fieldId:"id"},{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.grid.external-record-id-field.label"),fieldId:"externalColumnName",sortable:!1,cellTemplate:this.externalColumnCellTemplate},{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.grid.external-field-id.label"),fieldId:"externalColumnId",sortable:!1,cellTemplate:this.externalColumnIdCellTemplate}];this.recordIdFieldsRecordGridConfig$=(0,R.of)({columns:e,enableColumnSelection:!1,enableFiltering:!1,enableRowSelection:null,recordIdField:"id",styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)({fieldDefinitions:[{id:"name",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"id",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"externalColumnName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"externalColumnId",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]}),getData:()=>(0,R.of)({totalSize:this.gridRowsData.length,data:this.gridRowsData})}),this.rxWizardModalComponent.api.enableNextButton()}onExternalColumnChange(e){var t;const i=this.internalFieldsForMapping.find(t=>t.id===e.id);i.fieldMapping.externalFieldId=(null===(t=e.selectedExternalColumns[0])||void 0===t?void 0:t.id)||String(i.id),this.setGridRowsData(),this.rxWizardModalComponent.api.updateContext({mappedInternalFields:(0,y.cloneDeep)(this.internalFieldsForMapping)}),this.recordIdFieldsStepRecordGrid.api.refresh().subscribe()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}setGridRowsData(){this.internalFieldsForMapping.forEach(e=>{const t=this.rawExternalColumns.find(t=>t.fieldMapping.externalFieldId===e.fieldMapping.externalFieldId),i=[];t&&i.push({id:t.fieldMapping.externalFieldId,name:t.name});const n=this.gridRowsData.find(({id:t})=>t===e.id);n?n.selectedExternalColumns=i:this.gridRowsData.push({id:e.id,name:e.name,selectedExternalColumns:i})})}}rn.\u0275fac=function(e){return new(e||rn)(o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},rn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:rn,selectors:[["ax-record-id-fields-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](be,5),o["\u0275\u0275viewQuery"](xe,7),o["\u0275\u0275viewQuery"](Ce,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordIdFieldsStepRecordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.externalColumnCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.externalColumnIdCellTemplate=e.first)}},inputs:{context:"context"},decls:13,vars:4,consts:[[1,"section-title"],[1,"section-label",3,"label"],["tooltipContentTemplate",""],[1,"section-info"],["name","info_circle_o_adapt","width","250","placement","bottom",3,"adaptPopover"],[3,"config"],["recordIdFieldsStepRecordGrid",""],["externalColumnCellTemplate",""],["externalColumnIdCellTemplate",""],[1,"text-left",3,"innerHTML"],[3,"options","optionFormatter","emptyOption","ngModel","appendToBody","ngModelChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"adapt-rx-control-label",1),o["\u0275\u0275template"](2,Se,1,1,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](4,"span",3),o["\u0275\u0275element"](5,"adapt-icon",4),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"rx-record-grid",5,6),o["\u0275\u0275template"](9,De,1,5,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](11,Ie,1,5,"ng-template",null,8,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](3);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",t.sectionLabel),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("adaptPopover",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",t.sectionInfoLabel," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordIdFieldsRecordGridConfig$)}},directives:[C.AdaptRxControlLabelComponent,C.AdaptIconComponent,C.AdaptPopoverDirective,F.RecordGridComponent,C.AdaptRxSelectComponent,E.NgControlStatus,E.NgModel],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .section-label[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .section-info[_ngcontent-%COMP%]{color:#00a79d}[_nghost-%COMP%]     .rx-custom-cell{max-height:38px}[_nghost-%COMP%]     adapt-rx-select{margin:-.5rem -13px}rx-record-grid[_ngcontent-%COMP%]{height:100%}']});class an{constructor(e,t,i){this.rxExternalDataService=e,this.rxWizardModalComponent=t,this.translateService=i,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){this.sectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.table-selection.label");const e=this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$));e.pipe((0,b.map)(e=>e.dataSourceName),(0,b.distinctUntilChanged)(y.isEqual),(0,b.skip)(1)).subscribe(()=>{this.selectedRow=null,this.rxWizardModalComponent.api.updateContext({tableName:""}),this.tableSelectionStepRecordGrid.api.refresh().subscribe()});const t=(0,R.combineLatest)([this.rxWizardModalComponent.steps$,this.rxWizardModalComponent.tabIndex$]).pipe((0,b.map)(([e,t])=>"table-selection"===e[t].id),(0,b.takeUntil)(this.destroyed$)),i=e.pipe((0,b.map)(e=>e.tableName),(0,b.distinctUntilChanged)(y.isEqual));(0,R.combineLatest)([t,i]).pipe((0,b.filter)(([e,t])=>e),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(([e,t])=>{t?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()});const n=[{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"name"}];this.tableSelectionRecordGridConfig$=(0,R.of)({columns:n,enableColumnSelection:!1,enableFiltering:!1,enableRowSelection:F.RowSelectionMode.Single,recordIdField:"name",styles:"flex-fill",useExternalFiltering:!0,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.table-selection.grid.empty-state.label"),getRecordDefinition:()=>(0,R.of)({fieldDefinitions:[{id:"name",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]}),getData:e=>this.context.dataSourceName?this.rxExternalDataService.getArsTables(e.pageSize,e.startIndex,this.context.dataSourceName,e.searchText,e.sortBy):(0,R.of)({totalSize:0,data:[]})}),this.tableSelectionStepRecordGrid.rowSelectionChanged.pipe((0,b.skip)(2),(0,b.takeUntil)(this.destroyed$)).subscribe(e=>{e.length?(this.selectedRow=e[0],this.rxWizardModalComponent.api.updateContext({tableName:this.selectedRow.name})):this.selectedRow&&this.tableSelectionStepRecordGrid.api.setSelectedRows(this.selectedRow)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}an.\u0275fac=function(e){return new(e||an)(o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},an.\u0275cmp=o["\u0275\u0275defineComponent"]({type:an,selectors:[["ax-table-selection-step"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Re,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.tableSelectionStepRecordGrid=e.first)}},inputs:{context:"context"},decls:3,vars:3,consts:[[3,"label","showRequiredLabel"],[3,"config"],["tableSelectionStepRecordGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-rx-control-label",0),o["\u0275\u0275element"](1,"rx-record-grid",1,2)),2&e&&(o["\u0275\u0275property"]("label",t.sectionLabel)("showRequiredLabel",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.tableSelectionRecordGridConfig$))},directives:[C.AdaptRxControlLabelComponent,F.RecordGridComponent],styles:[we]});class sn{constructor(e,t,i){this.rxExternalDataService=e,this.rxWizardModalComponent=t,this.translateService=i,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){this.sectionLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.web-api-selection.label");const e=this.rxWizardModalComponent.context$.pipe((0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$));e.pipe((0,b.map)(e=>e.dataSourceName),(0,b.distinctUntilChanged)(y.isEqual),(0,b.skip)(1)).subscribe(()=>{this.rxWizardModalComponent.api.updateContext({webApi:null}),this.recordGrid.api.refresh().subscribe()});const t=(0,R.combineLatest)([this.rxWizardModalComponent.steps$,this.rxWizardModalComponent.tabIndex$]).pipe((0,b.map)(([e,t])=>"web-api-selection"===e[t].id),(0,b.takeUntil)(this.destroyed$)),i=e.pipe((0,b.map)(e=>e.webApi),(0,b.distinctUntilChanged)(y.isEqual));(0,R.combineLatest)([t,i]).pipe((0,b.filter)(([e,t])=>e),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(([e,t])=>{t?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()});const n=[{fieldId:qi.definitionGridColumns.name.fieldId,title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),cellTemplate:this.webApiNameCellTemplate}],o={fieldDefinitions:[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]};this.recordGridConfig$=(0,R.of)({columns:n,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.web-api-selection.grid.empty-state.label"),enableRowSelection:F.RowSelectionMode.Single,enableFiltering:!1,recordIdField:qi.definitionGridColumns.name.fieldId,styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)(o),getData:()=>this.context.dataSourceName?this.rxExternalDataService.getWebApiDefinitions():(0,R.of)({totalSize:0,data:[]})}),this.recordGrid.rowSelectionChanged.pipe((0,b.skip)(2),(0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({webApi:(0,y.head)(e)||null})})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}sn.\u0275fac=function(e){return new(e||sn)(o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},sn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:sn,selectors:[["ax-web-api-selection-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),o["\u0275\u0275viewQuery"](Ee,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.webApiNameCellTemplate=e.first)}},inputs:{context:"context"},decls:4,vars:3,consts:[[3,"label","showRequiredLabel"],[3,"config"],["webApiNameCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-rx-control-label",0),o["\u0275\u0275element"](1,"rx-record-grid",1),o["\u0275\u0275template"](2,Fe,2,3,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("label",t.sectionLabel)("showRequiredLabel",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[C.AdaptRxControlLabelComponent,F.RecordGridComponent],pipes:[h.RxDefinitionNamePipe],styles:[we]});class ln{constructor(e,t,i,n){this.componentFactoryResolver=e,this.rxExternalDataService=t,this.rxWizardModalComponent=i,this.translateService=n,this.destroyed$=new R.ReplaySubject(1),this.dataSourceTypeFormControl=new E.FormControl([],E.Validators.required),this.dataSourceTypes=[],this.dataSourceNameFormControl=new E.FormControl([],E.Validators.required),this.dataSourceNames=[]}ngOnInit(){this.dataSourceNameLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.data-source.data-source-name.label"),this.dataSourceTypeLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.data-source.data-source-type.label"),this.rxWizardModalComponent.api.disableNextButton(),this.rxExternalDataService.getDataSourceTypes().subscribe(e=>this.dataSourceTypes=e.filter(e=>e!==S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom)),this.dataSourceTypeFormControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{const t=e[0];t===S.RX_RECORD_DEFINITION.externalRecordDefinitionDataSourceTypes.webApi?(this.rxWizardModalComponent.api.removeNextSteps(1),this.rxWizardModalComponent.api.addStep({id:"web-api-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.web-api-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(sn)}),this.rxWizardModalComponent.api.addStep({id:"document-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.document-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(en)}),this.rxWizardModalComponent.api.addStep({id:"field-tree-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-tree-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(nn)}),this.rxWizardModalComponent.api.addStep({id:"operation-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.operation-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(on)})):(this.rxWizardModalComponent.api.removeNextSteps(1),this.rxWizardModalComponent.api.addStep({id:"table-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.table-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(an)}),this.rxWizardModalComponent.api.addStep({id:"record-id-fields",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.record-id-fields.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(rn)}),this.rxWizardModalComponent.api.addStep({id:"field-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.field-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(tn)})),this.rxWizardModalComponent.api.updateContext({dataSourceType:t}),this.dataSourceNameFormControl.value.length&&(this.dataSourceNames=[],this.dataSourceNameFormControl.setValue([])),this.rxExternalDataService.getDataSourceNames(t).subscribe(e=>this.dataSourceNames=e)}),this.dataSourceNameFormControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({dataSourceName:e[0]})}),this.rxWizardModalComponent.context$.pipe((0,b.takeUntil)(this.destroyed$),(0,b.map)(({dataSourceType:e,dataSourceName:t})=>({dataSourceType:e,dataSourceName:t})),(0,b.distinctUntilChanged)(y.isEqual)).subscribe(({dataSourceType:e,dataSourceName:t})=>{e&&t?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ln.\u0275fac=function(e){return new(e||ln)(o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},ln.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ln,selectors:[["ax-data-source-step"]],decls:3,vars:8,consts:[[1,"d-flex","flex-column","control-width"],[1,"form-group",3,"label","options","required","formControl"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"adapt-rx-select",1),o["\u0275\u0275element"](2,"adapt-rx-select",1),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",t.dataSourceTypeLabel)("options",t.dataSourceTypes)("required",!0)("formControl",t.dataSourceTypeFormControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",t.dataSourceNameLabel)("options",t.dataSourceNames)("required",!0)("formControl",t.dataSourceNameFormControl))},directives:[C.AdaptRxSelectComponent,E.RequiredValidator,E.NgControlStatus,E.FormControlDirective],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.control-width[_ngcontent-%COMP%]{max-width:400px}']});class dn{constructor(e,t,i,n,o){this.componentFactoryResolver=e,this.rxIdService=t,this.rxFieldDefinitionManagerService=i,this.rxWizardService=n,this.translateService=o,this.systemFieldsNames={idFieldName:"Record ID",displayIdFieldName:"Request ID"}}open(){const e={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.title"),allowFinish:!0,finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),steps:[{id:"data-source",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.data-source.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ln)}]};return this.rxWizardService.open({context:{},options:e}).then(e=>{const t=(null==e?void 0:e.webApi)?{vendorSchemaDescriptor:{dataSourceEntity:{webApiDefinitionGuid:e.webApi.guid,documentDefinitionGuid:e.document.guid},dataSourceOperations:e.operations},tableName:e.dataSourceName}:{};return e?Object.assign({dataSourceName:e.dataSourceName,fieldDefinitions:e.webApi?this.getWebApiFieldDefinitions(e):this.getArsFieldDefinitions(e),resourceType:S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType,tableName:e.tableName},t):null})}getArsFieldDefinitions(e){const t=(0,y.map)(e.mappedInternalFields,e=>(e.fieldMapping.resourceType=S.RX_RECORD_DEFINITION.externalFieldMapping,e)),i=(0,y.chain)(e.selectedExternalFields).reject(function(t){const i="fieldMapping.externalFieldId";return(0,y.some)(e.mappedInternalFields,[i,(0,y.get)(t,i)])}).map(e=>(e.id=this.rxIdService.generate(),e.fieldOption===S.RecordFieldOption.System&&(e.fieldOption=S.RecordFieldOption.Required),["lastChangedBy","lastUpdateTime"].forEach(t=>{delete e[t]}),e)).value();return t.concat(i)}getWebApiFieldDefinitions(e){var t,i;let n=[];return(null===(t=e.selectedFieldMapping)||void 0===t?void 0:t.id)&&(n=(0,y.reject)(e.nonDocumentSchemaFields,{name:this.systemFieldsNames.idFieldName})),(null===(i=e.selectedFieldMapping)||void 0===i?void 0:i.displayId)&&(n=(0,y.reject)(n,{name:this.systemFieldsNames.displayIdFieldName})),[...e.documentSchemaFields,...n].map(t=>{var i,n;if((null===(i=e.selectedFieldMapping)||void 0===i?void 0:i.id)===t.path||t.name===this.systemFieldsNames.idFieldName)return o(S.RX_RECORD_DEFINITION.coreFieldIds.id,t);if((null===(n=e.selectedFieldMapping)||void 0===n?void 0:n.displayId)===t.path||t.name===this.systemFieldsNames.displayIdFieldName)return o(S.RX_RECORD_DEFINITION.coreFieldIds.displayId,t);function o(e,t){const i=(0,y.find)(S.RX_RECORD_DEFINITION.coreFields,{id:e});return Object.assign({fieldMapping:{resourceType:S.RX_RECORD_DEFINITION.externalFieldMapping,externalFieldId:t.path}},i)}const r=this.rxFieldDefinitionManagerService.getNewFieldDefinitionModel(t.type,{name:t.name});return Object.assign({fieldMapping:{resourceType:S.RX_RECORD_DEFINITION.externalFieldMapping,externalFieldId:t.path}},r)})}}dn.\u0275fac=function(e){return new(e||dn)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](M.RxIdService),o["\u0275\u0275inject"](f.RxFieldDefinitionManagerService),o["\u0275\u0275inject"](D.RxWizardService),o["\u0275\u0275inject"](x.TranslateService))},dn.\u0275prov=o["\u0275\u0275defineInjectable"]({token:dn,factory:dn.\u0275fac});class cn{constructor(e,t,i,n,o,r){this.rxWizardModalComponent=e,this.translateService=t,this.rxDefinitionNameService=i,this.rxFieldDefinitionService=n,this.rxGuidService=o,this.rxRecordDefinitionService=r,this.notificationMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.notification.message"),this.destroyed$=new R.ReplaySubject(1),this.alertConfig={content:this.notificationMessage,variant:"info",type:"inline",dismissible:!1},this.selectTexts={headerText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.select.header"),numberOptionsText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.select.fields.label"),checked:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.select.selected.label")},this.primarySelectedFieldsFormControl=new E.FormControl([]),this.secondarySelectedFieldsFormControl=new E.FormControl([])}ngOnInit(){this.rxWizardModalComponent.api.enableFinishButton();const e=this.rxWizardModalComponent.context$.pipe((0,b.tap)(e=>{e.selectedFields||(this.primarySelectedFieldsFormControl.setValue([]),this.secondarySelectedFieldsFormControl.setValue([]))}),(0,b.shareReplay)(1),(0,b.takeUntil)(this.destroyed$)),t=e.pipe((0,b.pluck)("primaryRecordDefinitionName"),(0,b.distinctUntilChanged)(),(0,b.filter)(Boolean),(0,b.shareReplay)(1)),i=e.pipe((0,b.pluck)("secondaryRecordDefinitionName"),(0,b.distinctUntilChanged)(),(0,b.filter)(Boolean),(0,b.shareReplay)(1));(0,R.combineLatest)([t,i]).subscribe(([e,t])=>{this.selectLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.select.label",{primaryRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(e),secondaryRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(t)})}),this.primaryAvailableFields$=t.pipe((0,b.switchMap)(e=>this.rxRecordDefinitionService.get(e,{},!0)),(0,b.map)(e=>this.getJoinFieldDefinitions(e,S.RX_RECORD_DEFINITION.sourceRecordTypes.primary))),this.secondaryAvailableFields$=i.pipe((0,b.switchMap)(e=>this.rxRecordDefinitionService.get(e,{},!0)),(0,b.map)(e=>this.getJoinFieldDefinitions(e,S.RX_RECORD_DEFINITION.sourceRecordTypes.secondary)));const n=this.primarySelectedFieldsFormControl.valueChanges.pipe((0,b.startWith)([])),o=this.secondarySelectedFieldsFormControl.valueChanges.pipe((0,b.startWith)([])),r=(0,R.combineLatest)([n,o]).pipe((0,b.map)(([e,t])=>{const i=(0,y.map)(e,"name"),n=(0,y.map)(t,"name");return(0,y.intersection)(i,n).concat((0,y.intersection)((0,y.map)(S.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFields,"name"),i.concat(n)))}),(0,b.shareReplay)(1));this.hasDuplicates$=r.pipe((0,b.map)(e=>!!e.length)),(0,R.combineLatest)([n,o]).pipe((0,b.withLatestFrom)(r,t,i),(0,b.takeUntil)(this.destroyed$)).subscribe(([[e,t],i,n,o])=>{const r=(0,y.chain)(e).concat(t).map("fieldMapping.sourceFieldId").filter((e,t,i)=>(0,y.includes)(i,e,t+1)).union(S.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFieldIds).value(),a=this.rxDefinitionNameService.getDisplayName(n),s=this.rxDefinitionNameService.getDisplayName(o);this.rxWizardModalComponent.api.updateContext({selectedFields:(0,y.concat)(e,t).filter(e=>this.rxFieldDefinitionService.isJoinedField(e)).map(e=>{const t=(0,y.cloneDeep)(e);return(0,y.includes)(i,t.name)&&(t.fieldMapping.source===S.RX_RECORD_DEFINITION.sourceRecordTypes.primary?t.name=`${t.name} - ${a}`:t.name=`${t.name} - ${s}`),(0,y.includes)(r,t.fieldMapping.sourceFieldId)||(t.customId=t.fieldMapping.sourceFieldId),t}).concat(S.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFields)})})}optionFormatter(e){return e.name}getJoinFieldDefinitions(e,t){return(0,y.map)(null==e?void 0:e.fieldDefinitions,e=>{const i=(0,y.cloneDeep)(e);return i.fieldMapping={resourceType:S.RX_RECORD_DEFINITION.joinFieldMapping,sourceFieldId:e.id,source:t},i.id=this.rxGuidService.generate("rx-"),i.searchDefinition&&(i.searchDefinition=null),delete i.lastUpdateTime,i})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}cn.\u0275fac=function(e){return new(e||cn)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](S.RxFieldDefinitionService),o["\u0275\u0275directiveInject"](M.RxGuidService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionService))},cn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:cn,selectors:[["ax-field-selection-step"]],decls:11,vars:10,consts:[[1,"d-flex","flex-column","mh-100"],["class","mb-3",3,"config",4,"ngIf"],[1,"d-flex","flex-row","select-container"],["class","d-flex flex-column h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label",4,"ngIf"],["class","ml-4 d-flex flex-column h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label",4,"ngIf"],[1,"mb-3",3,"config"],[1,"d-flex","flex-column","h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label"],[1,"ml-4","d-flex","flex-column","h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div"),o["\u0275\u0275template"](2,Me,1,1,"adapt-alert",1),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"label"),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275template"](7,Te,2,12,"adapt-rx-select",3),o["\u0275\u0275pipe"](8,"async"),o["\u0275\u0275template"](9,Oe,2,12,"adapt-rx-select",4),o["\u0275\u0275pipe"](10,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](3,4,t.hasDuplicates$)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t.selectLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](8,6,t.primaryAvailableFields$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](10,8,t.secondaryAvailableFields$)))},directives:[n.NgIf,C.AdaptAlertComponent,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective],pipes:[n.AsyncPipe,x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%}[_nghost-%COMP%]     adapt-rx-select{width:100%;max-width:400px}[_nghost-%COMP%]     adapt-rx-select .rx-select__options-wrapper{flex:1 1 auto;overflow:auto}.select-container[_ngcontent-%COMP%]{overflow:auto}']});class pn extends h.RxExpressionConfigurator{constructor(e,t,i){super(),this.commonDataDictionary$=null;const n=i.get(x.TranslateService),o=i.get(h.RxDefinitionNameService),r=[{recordDefinitionName:o.getDisplayName(e.name),label:`(${n.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.primary.label")})`,type:S.RX_RECORD_DEFINITION.sourceRecordTypes.primary,fieldDefinitions:e.fieldDefinitions},{recordDefinitionName:o.getDisplayName(t.name),label:`(${n.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.secondary.label")})`,type:S.RX_RECORD_DEFINITION.sourceRecordTypes.secondary,fieldDefinitions:t.fieldDefinitions}];this.commonDataDictionary$=(0,R.of)(r.map(e=>({label:`${e.recordDefinitionName} ${e.label}`,expanded:!0,children:(0,y.chain)(e.fieldDefinitions).map(t=>{if(t.resourceType!==S.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType)return{label:`${e.recordDefinitionName}.${t.name}`,icon:"d-icon-field_text",expression:`\${${e.recordDefinitionName}.${e.type}.${t.name}}`}}).compact().sortBy(e=>e.label.toLocaleLowerCase()).value()})))}}class un{constructor(e,t,i,n,o){this.injector=e,this.translateService=t,this.rxExpressionEditorService=i,this.rxWizardModalComponent=n,this.rxRecordDefinitionCacheService=o,this.isExpressionFormControlVisible=!1,this.destroyed$=new R.ReplaySubject(1),this.expressionFormControlLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.on-statement.label"),this.expressionFormControlTooltip=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.on-statement.tooltip")}ngOnInit(){const e=this.rxWizardModalComponent.context$.pipe((0,b.pluck)("primaryRecordDefinitionName"),(0,b.distinctUntilChanged)(),(0,b.filter)(Boolean),(0,b.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))),t=this.rxWizardModalComponent.context$.pipe((0,b.pluck)("secondaryRecordDefinitionName"),(0,b.distinctUntilChanged)(),(0,b.filter)(Boolean),(0,b.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e)));this.expressionOptions$=(0,R.combineLatest)([e,t]).pipe((0,b.tap)(()=>{this.isExpressionFormControlVisible=!1,setTimeout(()=>{this.isExpressionFormControlVisible=!0})}),(0,b.map)(([e,t])=>(this.expressionConfigurator=new pn(e,t,this.injector),this.expressionConfigurator.configureForProperty({propertyPath:"joinCriteria",operators:h.ExpressionOperatorRowsByGroup.get(h.ExpressionOperatorGroup.All)}),{dataDictionary$:this.expressionConfigurator.getDataDictionary("joinCriteria"),label:this.expressionFormControlLabel,tooltip:{iconName:"question_circle_o",content:this.expressionFormControlTooltip},operators:this.expressionConfigurator.getOperators("joinCriteria")})))}openEditor(){this.rxWizardModalComponent.context$.pipe((0,b.pluck)("joinCriteria"),(0,b.take)(1),(0,b.switchMap)(e=>this.rxExpressionEditorService.openEditor({property:{value:e,path:"joinCriteria",label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.on-statement.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]}))).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({joinCriteria:e.value})})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}un.\u0275fac=function(e){return new(e||un)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](D.RxExpressionEditorService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionCacheService))},un.\u0275cmp=o["\u0275\u0275defineComponent"]({type:un,selectors:[["ax-join-criteria-step"]],decls:5,vars:6,consts:[[4,"ngIf"],[3,"ngModel","options","events"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"p"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,Ae,2,1,"div",0),o["\u0275\u0275pipe"](4,"async")),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.info"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](4,4,t.expressionOptions$)))},directives:[n.NgIf,D.ExpressionFormControlComponent,E.NgControlStatus,E.NgModel],pipes:[x.TranslatePipe,n.AsyncPipe],encapsulation:2});class mn{constructor(e,t){this.translateService=e,this.rxWizardModalComponent=t,this.destroyed$=new R.ReplaySubject(1),this.definitionPickerConfig={label:"",definitionType:D.RxDefinitionPickerType.Record,availableDefinitionPickerStates:{definitionButtonsGroups:[D.RxDefinitionPickerScope.Bundle,D.RxDefinitionPickerScope.All],search:D.RxDefinitionPickerScope.All},required:!0},this.primaryDefinitionPickerConfig=Object.assign(Object.assign({},this.definitionPickerConfig),{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.record-definitions.primary-record.label")}),this.secondaryDefinitionPickerConfig=Object.assign(Object.assign({},this.definitionPickerConfig),{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.record-definitions.secondary-record.label")}),this.joinTypes=[S.RX_RECORD_DEFINITION.joinTypes.inner,S.RX_RECORD_DEFINITION.joinTypes.outer],this.primaryRecordDefinitionNameFormControl=new E.FormControl("",E.Validators.required),this.secondaryRecordDefinitionNameFormControl=new E.FormControl("",E.Validators.required),this.joinTypeFormControl=new E.FormControl([],E.Validators.required)}optionFormatter(e){return e.displayName}ngOnInit(){this.rxWizardModalComponent.api.disableFinishButton(),this.rxWizardModalComponent.api.disableNextButton(),this.primaryRecordDefinitionNameFormControl.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i={primaryRecordDefinitionName:e};e!==t.primaryRecordDefinitionName&&(i.joinCriteria=null,i.selectedFields=null),this.rxWizardModalComponent.api.updateContext(i)}),this.secondaryRecordDefinitionNameFormControl.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i={secondaryRecordDefinitionName:e};e!==t.primaryRecordDefinitionName&&(i.joinCriteria=null,i.selectedFields=null),this.rxWizardModalComponent.api.updateContext(i)}),this.joinTypeFormControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxWizardModalComponent.api.updateContext({joinType:(0,y.head)(e).value})}),this.rxWizardModalComponent.context$.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{e.primaryRecordDefinitionName&&e.secondaryRecordDefinitionName&&e.joinType?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}mn.\u0275fac=function(e){return new(e||mn)(o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent))},mn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:mn,selectors:[["ax-record-definitions-step"]],decls:5,vars:11,consts:[[1,"d-flex","flex-column","control-width"],[1,"form-group",3,"options","formControl"],[3,"required","label","options","optionFormatter","formControl"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-definition-picker",1),o["\u0275\u0275element"](2,"rx-definition-picker",1),o["\u0275\u0275element"](3,"adapt-rx-select",2),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",t.primaryDefinitionPickerConfig)("formControl",t.primaryRecordDefinitionNameFormControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",t.secondaryDefinitionPickerConfig)("formControl",t.secondaryRecordDefinitionNameFormControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("required",!0)("label",o["\u0275\u0275pipeBind1"](4,9,"com.bmc.arsys.rx.innovation-studio.join-record-wizard.record-definitions.type.label"))("options",t.joinTypes)("optionFormatter",t.optionFormatter)("formControl",t.joinTypeFormControl))},directives:[D.RxDefinitionPickerComponent,E.NgControlStatus,E.FormControlDirective,C.AdaptRxSelectComponent,E.RequiredValidator],pipes:[x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.control-width[_ngcontent-%COMP%]{max-width:400px}']});class fn{constructor(e,t,i){this.rxWizardService=e,this.translateService=t,this.componentFactoryResolver=i,this.title=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.title"),this.finishButtonLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.save.label")}open(){const e={title:this.title,allowFinish:!0,finishButtonLabel:this.finishButtonLabel,steps:[{id:"record-definitions",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.record-definitions.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(mn)},{id:"join-criteria",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(un)},{id:"field-selection",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.title"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(cn)}]};return this.rxWizardService.open({context:{},options:e}).then(e=>e?{primaryRecordDefinitionName:e.primaryRecordDefinitionName,secondaryRecordDefinitionName:e.secondaryRecordDefinitionName,joinCriteria:e.joinCriteria,joinType:e.joinType,resourceType:S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType,fieldDefinitions:e.selectedFields}:null)}}fn.\u0275fac=function(e){return new(e||fn)(o["\u0275\u0275inject"](D.RxWizardService),o["\u0275\u0275inject"](x.TranslateService),o["\u0275\u0275inject"](o.ComponentFactoryResolver))},fn.\u0275prov=o["\u0275\u0275defineInjectable"]({token:fn,factory:fn.\u0275fac});const hn={recordDefinitionName:"AR System Archive Policy",fieldIds:{runNow:357}};class gn extends I.RxModalClass{constructor(e,t,i,n,o,r,a,s){super(i,e),this.injector=e,this.formBuilder=t,this.activeModalRef=i,this.rxExternalDataService=n,this.rxRecordDefinitionService=o,this.rxDefinitionNameService=r,this.rxBundleCache=a,this.router=s,this.initForm(),this.customDataSourceNames$=this.rxExternalDataService.getDataSourceNames(S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom).pipe((0,b.startWith)([]))}submit(){const e=this.createCustomRecordForm.value,t=this.rxDefinitionNameService.getDefinitionName(this.rxBundleCache.bundleId,e.name),i={name:t,dataSourceName:e.dataSourceName[0],resourceType:S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType,fieldDefinitions:[{resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character,name:"Display ID",id:1,fieldOption:S.RX_RECORD_DEFINITION.fieldOptions.system},{resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character,name:"ID",id:379,fieldOption:S.RX_RECORD_DEFINITION.fieldOptions.system},{resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character,name:"Data Provider ID",id:380,fieldOption:S.RX_RECORD_DEFINITION.fieldOptions.required}]};this.allowDismiss=!1,this.rxRecordDefinitionService.create(i).pipe((0,b.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record","edit",t])})}cancel(){this.dismissDialog()}initForm(){this.createCustomRecordForm=this.formBuilder.group({name:this.formBuilder.control(null,[E.Validators.required]),dataSourceName:this.formBuilder.control(null,[E.Validators.required])})}}gn.\u0275fac=function(e){return new(e||gn)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](E.FormBuilder),o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](Zi),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](p.Router))},gn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:gn,selectors:[["ax-create-custom-record"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:24,consts:[[1,"modal-header"],[1,"modal-title"],["data-dismiss","modal","type","button","rx-id","x-button",1,"close","close-inverse",3,"disabled","click"],[1,"modal-body"],[3,"formGroup"],["autofocus","","rx-id","name","name","name","formControlName","name",1,"d-block","form-group",3,"label"],["rx-id","data-source-name","name","dataSourceName","formControlName","dataSourceName",1,"form-group",3,"label","disabled","options"],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","create-button",3,"adaptInlineLoader","disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"form",4),o["\u0275\u0275element"](7,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275element"](9,"adapt-rx-select",6),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275pipe"](11,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275elementStart"](13,"button",8),o["\u0275\u0275listener"]("click",function(){return t.submit()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"button",9),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,12,"com.bmc.arsys.rx.innovation-studio.create-custom-record-modal.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.createCustomRecordForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,14,"com.bmc.arsys.rx.client.common.name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,16,"com.bmc.arsys.rx.innovation-studio.create-custom-record-modal.data-source-name.label")),o["\u0275\u0275property"]("disabled",!t.allowDismiss)("options",o["\u0275\u0275pipeBind1"](11,18,t.customDataSourceNames$)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",t.createCustomRecordForm.pristine||t.createCustomRecordForm.invalid||!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,20,"com.bmc.arsys.rx.client.common.create.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,22,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[E["\u0275NgNoValidate"],E.NgControlStatusGroup,E.FormGroupDirective,C.AdaptRxTextfieldComponent,E.NgControlStatus,E.FormControlName,C.AdaptRxSelectComponent,C.AdaptButtonComponent,C.AdaptInlineStandaloneDirective],pipes:[x.TranslatePipe,n.AsyncPipe],encapsulation:2});class vn extends h.RxExpressionConfigurator{constructor(e,t,i){super(),this.primaryRecordDefinition$=e,this.secondaryRecordDefinition$=t,this.injector=i,this.translateService=this.injector.get(x.TranslateService),this.rxDefinitionNameService=this.injector.get(h.RxDefinitionNameService),this.commonDataDictionary$=(0,R.combineLatest)([this.primaryRecordDefinition$,this.secondaryRecordDefinition$]).pipe((0,b.map)(([e,t])=>{if(e&&t){return[{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.name),label:`(${this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.primary.label")})`,type:S.RX_RECORD_DEFINITION.sourceRecordTypes.primary,fieldDefinitions:e.fieldDefinitions},{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(t.name),label:`(${this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.secondary.label")})`,type:S.RX_RECORD_DEFINITION.sourceRecordTypes.secondary,fieldDefinitions:t.fieldDefinitions}].map(e=>({label:`${e.recordDefinitionName} ${e.label}`,expanded:!0,children:(0,y.chain)(e.fieldDefinitions).reject({resourceType:S.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType}).map(t=>({label:`${e.recordDefinitionName}.${t.name}`,icon:"d-icon-field_text",expression:`\${${e.recordDefinitionName}.${e.type}.${t.name}}`})).sortBy(e=>e.label.toLocaleLowerCase()).value()}))}return[]}))}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:h.ExpressionOperatorRowsByGroup.get(h.ExpressionOperatorGroup.AllServer)})}}class yn extends I.RxModalClass{constructor(e,t,i,n,o,r,a,s,l,d,c){super(t,e),this.injector=e,this.activeModalRef=t,this.rxRecordDefinitionService=i,this.rxDefinitionNameService=n,this.rxBundleCache=o,this.router=r,this.translateService=a,this.rxRecordDefinitionCacheService=s,this.rxExpressionEditorService=l,this.rxRecordDesignerService=d,this.changeDetector=c,this.destroyed$=new R.ReplaySubject(1),this.expressionFormControlLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-join-record-modal.join-criteria.on-statement.label"),this.expressionFormControlTooltip=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-join-record-modal.join-criteria.on-statement.tooltip"),this.primaryRecordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-join-record-modal.primary-record.label"),definitionType:D.RxDefinitionPickerType.Record,required:!0},this.secondaryRecordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-join-record-modal.secondary-record.label"),definitionType:D.RxDefinitionPickerType.Record,required:!0},this.joinTypes=[S.RX_RECORD_DEFINITION.joinTypes.inner,S.RX_RECORD_DEFINITION.joinTypes.outer],this.primaryRecordDefinitionNameFormControl=new E.FormControl("",E.Validators.required),this.secondaryRecordDefinitionNameFormControl=new E.FormControl("",E.Validators.required),this.primaryRecordDefinition$=this.primaryRecordDefinitionNameFormControl.valueChanges.pipe((0,b.startWith)(null),(0,b.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e):(0,R.of)(null)),(0,b.shareReplay)(1)),this.secondaryRecordDefinition$=this.secondaryRecordDefinitionNameFormControl.valueChanges.pipe((0,b.startWith)(null),(0,b.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e):(0,R.of)(null)),(0,b.shareReplay)(1)),this.createJoinRecordForm=new E.FormGroup({name:new E.FormControl("",E.Validators.required),primaryRecordDefinitionName:this.primaryRecordDefinitionNameFormControl,secondaryRecordDefinitionName:this.secondaryRecordDefinitionNameFormControl,joinType:new E.FormControl([],E.Validators.required),joinCriteria:new E.FormControl("")}),this.expressionConfigurator=new vn(this.primaryRecordDefinition$,this.secondaryRecordDefinition$,this.injector),this.expressionFormControlOptions={label:this.expressionFormControlLabel,tooltip:{iconName:"question_circle_o",content:this.expressionFormControlTooltip},dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}}ngOnInit(){super.ngOnInit(),(0,R.combineLatest)([this.primaryRecordDefinition$,this.secondaryRecordDefinition$]).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(()=>{this.createJoinRecordForm.controls.joinCriteria.reset()})}optionFormatter(e){return e.displayName}openEditor(){this.rxExpressionEditorService.openEditor({property:{value:this.createJoinRecordForm.controls.joinCriteria.value,path:"joinCriteria",label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-join-record-modal.join-criteria.on-statement.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]}).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.createJoinRecordForm.controls.joinCriteria.setValue(e.value),this.changeDetector.markForCheck()})}createRecord(){const e=this.createJoinRecordForm.value,t=this.rxDefinitionNameService.getDefinitionName(this.rxBundleCache.bundleId,e.name),i={allowFieldsOverlay:!1,allowIndexesOverlay:!1,allowNonAdminToDeleteRecordInstances:!1,allowOtherPropertiesOverlay:!1,allowPermissionsOverlay:!1,name:t,primaryRecordDefinitionName:e.primaryRecordDefinitionName,secondaryRecordDefinitionName:e.secondaryRecordDefinitionName,joinType:e.joinType[0].value,joinCriteria:this.rxRecordDesignerService.getJoinCriteriaArExpression(e.joinCriteria,e.primaryRecordDefinitionName,e.secondaryRecordDefinitionName),resourceType:S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType,fieldDefinitions:[{resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character,name:"Display ID",id:1,fieldOption:S.RX_RECORD_DEFINITION.fieldOptions.system},{resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character,name:"ID",id:379,fieldOption:S.RX_RECORD_DEFINITION.fieldOptions.system}]};this.allowDismiss=!1,this.rxRecordDefinitionService.create(i).pipe((0,b.finalize)(()=>{this.allowDismiss=!0,this.changeDetector.markForCheck()})).subscribe(()=>{this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record","edit2",t])})}cancel(){this.dismissDialog()}}yn.\u0275fac=function(e){return new(e||yn)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](D.RxExpressionEditorService),o["\u0275\u0275directiveInject"](f.RxRecordDesignerService),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef))},yn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:yn,selectors:[["rx-create-join-record"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:26,consts:[[1,"modal-header"],[1,"modal-title"],["data-dismiss","modal","type","button","rx-id","x-button",1,"close","close-inverse",3,"disabled","click"],[1,"modal-body"],[1,"d-flex","flex-column","control-width"],[3,"formGroup"],["autofocus","","rx-id","name","formControlName","name",1,"d-block","form-group",3,"label"],["rx-id","primary-record-definition-name","formControlName","primaryRecordDefinitionName",1,"d-block","form-group",3,"options"],["rx-id","secondary-record-definition-name","formControlName","secondaryRecordDefinitionName",1,"d-block","form-group",3,"options"],["rx-id","join-type","formControlName","joinType",1,"d-block","form-group",3,"required","label","options","optionFormatter"],["rx-id","join-criteria","formControlName","joinCriteria",1,"d-block","form-group",3,"options","events"],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","create-button",3,"adaptInlineLoader","disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"form",5),o["\u0275\u0275element"](8,"adapt-rx-textfield",6),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"rx-definition-picker",7),o["\u0275\u0275element"](11,"rx-definition-picker",8),o["\u0275\u0275element"](12,"adapt-rx-select",9),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementStart"](14,"rx-expression-form-control",10),o["\u0275\u0275listener"]("events",function(){return t.openEditor()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",11),o["\u0275\u0275elementStart"](16,"button",12),o["\u0275\u0275listener"]("click",function(){return t.createRecord()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"button",13),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,16,"com.bmc.arsys.rx.client.record-designer.create-new-join-record-editor.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formGroup",t.createJoinRecordForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,18,"com.bmc.arsys.rx.client.common.name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.primaryRecordDefinitionPickerOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",t.secondaryRecordDefinitionPickerOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("required",!0)("label",o["\u0275\u0275pipeBind1"](13,20,"com.bmc.arsys.rx.innovation-studio.create-join-record-modal.join-type.label"))("options",t.joinTypes)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.expressionFormControlOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",t.createJoinRecordForm.pristine||t.createJoinRecordForm.invalid||!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,22,"com.bmc.arsys.rx.client.common.create.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](21,24,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[E["\u0275NgNoValidate"],E.NgControlStatusGroup,E.FormGroupDirective,C.AdaptRxTextfieldComponent,E.NgControlStatus,E.FormControlName,D.RxDefinitionPickerComponent,C.AdaptRxSelectComponent,E.RequiredValidator,D.ExpressionFormControlComponent,C.AdaptButtonComponent,C.AdaptInlineStandaloneDirective],pipes:[x.TranslatePipe],encapsulation:2,changeDetection:0});class bn{constructor(e){this.translateService=e}transform(e){let t="";return e.recordDefinitionType===S.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType&&(t=this.translateService.instant("com.bmc.arsys.rx.client.record-definition.type.regular.label")),e.recordDefinitionType===S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType&&(t=this.translateService.instant("com.bmc.arsys.rx.client.record-definition.type.join.label")),e.recordDefinitionType===S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType&&(t=e.type===S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom?this.translateService.instant("com.bmc.arsys.rx.innovation-studio.record.type.custom.label"):this.translateService.instant("com.bmc.arsys.rx.client.record-definition.type.external.label")),e.isAuditRecordDefinition&&(t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.record.audit.label",{recordType:t})),e.archiveSourceRecordDefinitionName&&(t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.record.archive.label",{recordType:t})),t}}bn.\u0275fac=function(e){return new(e||bn)(o["\u0275\u0275directiveInject"](x.TranslateService,16))},bn.\u0275pipe=o["\u0275\u0275definePipe"]({name:"axRecordDefinitionType",type:bn,pure:!0});class xn{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u,m,f,h){this.rxRecordDefinitionDataPageService=e,this.rxBundleCache=t,this.rxOverlayService=i,this.rxModalService=n,this.translateService=o,this.rxCommandFactoryService=r,this.router=a,this.rxCopyDefinitionService=s,this.joinRecordWizardService=l,this.externalRecordWizardService=d,this.rxRecordDefinitionService=c,this.rxNotificationService=p,this.rxRecordInstanceService=u,this.rxRecordInstanceUpdateService=m,this.rxRecordInstanceDataPageService=f,this.rxFeatureService=h,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.destroyed$=new R.ReplaySubject(1),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)),(0,b.takeUntil)(this.destroyed$)),this.gridColumns=[],this.isActionInProgress=!1,this.dataEditorRoute=this.rxFeatureService.isFeatureEnabled("DRD21-10996")?"edit-data-new":"edit-data"}ngOnInit(){this.rxFeatureService.isFeatureEnabled("DRD21-15263")&&(this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/record/edit2/`),this.areNewDefinitionsAllowed=this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor),this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,{fieldId:"recordDefinitionType",title:"com.bmc.arsys.rx.client.common.item-type.label",index:3,cellTemplate:this.recordDefinitionTypeTemplate},qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"recordDefinitionType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxRecordDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","customizationPerspective","recordDefinitionType","overlayGroupId","overlayDescriptor","isAuditRecordDefinition","scope","externalDataSourceType","archiveSourceRecordDefinitionName","type"]}})}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.record.command.DeleteRecordDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)(!1)),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}getDefinitionActions(e){var t,i,n;const o=this.rxOverlayService.isBundleEditable(this.rxBundleCache.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.areNewDefinitionsAllowed,subActions:[{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.new.regular-record.label",id:S.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType,rxId:S.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType},{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.new.join-record.label",id:S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType,rxId:S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType},{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.new.external-record.label",id:S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType,rxId:S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType},{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.new.custom-record.label",id:S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom,rxId:S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom}]},{id:qi.standardDefinitionActionNames.rename,isDisabled:!o||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!o||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:1!==e.length||!o},{id:qi.standardDefinitionActionNames.delete,isDisabled:!o||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)},{id:"archive",labelKey:"com.bmc.arsys.rx.innovation-studio.definition-actions.archive.label",rxId:"archive",icon:"file_o_gear",isDisabled:1!==e.length||e[0].recordDefinitionType!==S.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType},{id:"edit-data",labelKey:"com.bmc.arsys.rx.innovation-studio.definition-actions.edit-data.label",rxId:"edit-data",icon:"storages",isDisabled:1!==e.length||(null===(t=e[0])||void 0===t?void 0:t.recordDefinitionType)===S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType&&(!(null===(i=e[0])||void 0===i?void 0:i.externalDataSourceType)||(null===(n=e[0])||void 0===n?void 0:n.externalDataSourceType)===S.RX_RECORD_DEFINITION.externalRecordDefinitionDataSourceTypes.webApi)}]}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onCustomAction(e){switch(e.actionId){case S.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType:this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record",this.rxFeatureService.isFeatureEnabled("DRD21-15263")?"new2":"new",this.rxBundleCache.bundleId]);break;case S.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType:this.rxFeatureService.isFeatureEnabled("DRD21-15263")?this.rxModalService.openModal({content:yn,size:"sm"}).catch(y.noop):this.joinRecordWizardService.open().then(e=>{e&&this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record","new",this.rxBundleCache.bundleId],{state:{designerOptions:e}})});break;case S.RX_RECORD_DEFINITION.recordDefinitionTypes.external.recordDefinitionType:this.externalRecordWizardService.open().then(e=>{e&&this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record","new",this.rxBundleCache.bundleId],{state:{designerOptions:e}})});break;case S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom:this.rxModalService.openModal({content:gn,size:"sm"}).catch(y.noop);break;case"edit-data":this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"record",this.dataEditorRoute,e.selectedRows[0][g.RowDataItemIdFieldName]]);break;case"archive":this.rxRecordDefinitionService.get(e.selectedRows[0].name).pipe((0,b.take)(1),(0,b.switchMap)(e=>{var t,i,n;if((null===(t=e.archiveDescriptor)||void 0===t?void 0:t.isEnabled)&&"NONE"!==(null===(i=e.archiveDescriptor)||void 0===i?void 0:i.archiveType)){let t="";const i=null===(n=e.archiveDescriptor)||void 0===n?void 0:n.archiveType;return"COPY_TO_ARCHIVE_AND_DELETE_FROM_SOURCE"===i?t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.tabs.records.archive-and-delete.confirmation.message",{recordAge:e.archiveDescriptor.ageQualifierInDays}):"DELETE_FROM_SOURCE"===i&&(t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.tabs.records.delete-without-archiving.confirmation.message",{recordAge:e.archiveDescriptor.ageQualifierInDays})),(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:t}))}return this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.tabs.records.archiving-disabled.message")),(0,R.of)(null)}),(0,b.switchMap)(t=>t?this.rxRecordInstanceDataPageService.post({params:{recorddefinition:hn.recordDefinitionName,pageSize:1,startIndex:0,propertySelection:S.RX_RECORD_DEFINITION.coreFieldIds.id,queryExpression:`'${S.RX_RECORD_DEFINITION.coreFieldIds.description}' = "${e.selectedRows[0].name}"`}}).pipe((0,b.switchMap)(e=>this.rxRecordInstanceService.get(hn.recordDefinitionName,e.data[0][S.RX_RECORD_DEFINITION.coreFieldIds.id])),(0,b.switchMap)(e=>(e.setFieldValue(hn.fieldIds.runNow,1),this.rxRecordInstanceUpdateService.execute(e))),(0,b.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.tabs.records.archiving-started.message"))})):(0,R.of)(null))).subscribe()}}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.Record).catch(y.noop)}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.record.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxRecordDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxRecordDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}xn.\u0275fac=function(e){return new(e||xn)(o["\u0275\u0275directiveInject"](S.RxRecordDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Ki),o["\u0275\u0275directiveInject"](fn),o["\u0275\u0275directiveInject"](dn),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionService),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceUpdateService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](h.RxFeatureService))},xn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:xn,selectors:[["ax-record-definition-tab"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Pe,7),o["\u0275\u0275viewQuery"](Ji,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordDefinitionTypeTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:4,vars:9,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","editRouterLink","copyDefinition","customAction","deleteDefinition","renameDefinition","revertCustomization","rowSelectionChanged"],["recordDefinitionTypeTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("copyDefinition",function(e){return t.onCopyDefinition(e)})("customAction",function(e){return t.onCustomAction(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("renameDefinition",function(e){return t.onRenameDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,je,3,3,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,7,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","record")("editRouterLink",t.editRouterLink)},directives:[Ji],pipes:[n.AsyncPipe,bn],encapsulation:2});class Cn{constructor(e,t,i,n,o,r,a,s,l){this.rxOverlayService=e,this.rxViewDefinitionDataPageService=t,this.rxModalService=i,this.translateService=n,this.rxCommandFactoryService=o,this.router=r,this.rxBundleCacheService=a,this.rxViewDefinitionService=s,this.rxCopyDefinitionService=l,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.gridColumns=[],this.isActionInProgress=!1}getNewViewSubAction(e){return{id:String(e.id),rxId:"view-layout-template-"+e.id,labelKey:e.label}}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.areNewDefinitionsAllowed,subActions:(0,y.concat)({groupTitle:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.view.layout-flexible.menu.label")},(0,y.filter)(g.RX_VIEW_LAYOUTS,{layoutType:g.LayoutTypes.Flexible}).map(this.getNewViewSubAction),{groupTitle:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.view.layout-fixed.menu.label")},(0,y.filter)(g.RX_VIEW_LAYOUTS,{layoutType:g.LayoutTypes.Fixed}).map(this.getNewViewSubAction))},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:1!==e.length||!t},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}ngOnInit(){this.areNewDefinitionsAllowed=this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor),this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxViewDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","scope","customizationPerspective","overlayGroupId","overlayDescriptor"],viewType:g.RX_VIEW_DEFINITION.types.regular,excludeExtensionViews:!1}})}onCustomAction(e){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"view","new",this.rxBundleCacheService.bundleId],{queryParams:{layoutTemplate:e.actionId}})}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.View).catch(y.noop)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.view.command.DeleteViewDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.view.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxViewDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxViewDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}}Cn.\u0275fac=function(e){return new(e||Cn)(o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](g.RxViewDefinitionDataPageService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](g.RxViewDefinitionService),o["\u0275\u0275directiveInject"](Ki))},Cn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Cn,selectors:[["ax-view-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","rowSelectionChanged","copyDefinition","customAction","deleteDefinition","renameDefinition","revertCustomization"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("customAction",function(e){return t.onCustomAction(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("renameDefinition",function(e){return t.onRenameDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","view")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const Sn="manageProcesses",Dn={active:"ACTIVE",suspended:"SUSPENDED",errored:"ERRORED",completed:"COMPLETED"},In={suspend:"SUSPEND",resume:" RESUME",cancel:"CANCEL",viewLog:"VIEW_LOG",downloadLog:"DOWNLOAD_LOG"};class Rn{constructor(e,t,i,n,o,r,a,s,l,d){this.adaptModalService=e,this.router=t,this.rxOverlayService=i,this.rxBundleCacheService=n,this.rxCommandFactoryService=o,this.rxProcessDefinitionDataPageService=r,this.rxModalService=a,this.translateService=s,this.rxCopyDefinitionService=l,this.rxFeatureService=d,this.gridColumns=[],this.isActionInProgress=!1,this.definitions$=this.rxProcessDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","scope","customizationPerspective","overlayGroupId","overlayDescriptor","isEnabled"],bundleId:this.rxBundleCacheService.bundleId}}),this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)))}ngOnInit(){this.rxFeatureService.isFeatureEnabled("DRD21-11025")&&(this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/process/edit2/`),this.areNewDefinitionsAllowed=this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor),this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective,qi.definitionGridColumns.isEnabled];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.isEnabled.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t}}onCustomAction({actionId:e,selectedRows:t}){if(e===Sn){const e=[h.RX_APPLICATION.innovationStudioBundleId,"process","manage",this.rxBundleCacheService.bundleId];t.length>0?this.router.navigate(e,{queryParams:{definitionName:t[0].name}}):this.router.navigate(e)}}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.Process,this.rxFeatureService.isFeatureEnabled("DRD21-11025")?"edit2":"edit").catch(y.noop)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.process.command.DeleteProcessDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"process",this.rxFeatureService.isFeatureEnabled("DRD21-11025")?"new2":"new",this.rxBundleCacheService.bundleId])}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.process.command.RevertProcessDefinitionCommand").execute({processDefinitionName:e.name}))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.process.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.process.command.RenameProcessDefinitionCommand").execute({name:e.name,newName:t})),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.areNewDefinitionsAllowed},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)},{id:Sn,isDisabled:!t||e.length>1,labelKey:"com.bmc.arsys.rx.innovation-studio.manage-processes.menu.label",rxId:"manage-processes-button",icon:"flow"}]}}Rn.\u0275fac=function(e){return new(e||Rn)(o["\u0275\u0275directiveInject"](C.AdaptModalService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](N.RxProcessDefinitionDataPageService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](Ki),o["\u0275\u0275directiveInject"](h.RxFeatureService))},Rn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Rn,selectors:[["ax-process-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:9,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","editRouterLink","rowSelectionChanged","deleteDefinition","customAction","copyDefinition","addDefinition","renameDefinition","revertCustomization"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("customAction",function(e){return t.onCustomAction(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("addDefinition",function(){return t.onAddDefinition()})("renameDefinition",function(e){return t.onRenameDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,7,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","process")("editRouterLink",t.editRouterLink)},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const wn={primaryRecordDefinition:{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.rules.grid.primary-record-definition.label",fieldId:"primaryRecordDefinition"},triggerEvent:{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.rules.grid.trigger-event.label",fieldId:"triggerEvent"},executionOrder:{titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.rules.grid.execution-order.label",fieldId:"executionOrder"},recordDefinitionNames:{fieldId:"recordDefinitionNames"}},En="com.bmc.arsys.rx.application.rule.command.DeleteRuleDefinitionsCommand";class Fn{constructor(e,t,i,n,o,r,a,s,l,d,c,p){this.router=e,this.rxRuleTriggerEventPipe=t,this.rxRuleDefinitionService=i,this.rxOverlayService=n,this.rxRuleDefinitionDataPageService=o,this.rxModalService=r,this.translateService=a,this.rxCommandFactoryService=s,this.rxBundleCacheService=l,this.rxGlobalCacheService=d,this.rxCopyDefinitionService=c,this.rxDefinitionNameService=p,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.definitions$=(0,R.forkJoin)([this.rxBundleCacheService.bundleId$.pipe((0,b.take)(1),(0,b.switchMap)(e=>this.rxGlobalCacheService.getBundleDescriptor(e))),this.rxRuleDefinitionDataPageService.get({params:{propertySelection:[qi.definitionGridColumns.name.fieldId,wn.recordDefinitionNames.fieldId,wn.triggerEvent.fieldId,qi.definitionGridColumns.lastUpdateTime.fieldId,qi.definitionGridColumns.lastChangedBy.fieldId,qi.definitionGridColumns.isEnabled.fieldId,qi.definitionGridColumns.scope.fieldId,qi.definitionGridColumns.customizationPerspective.fieldId,"overlayGroupId"]}})]).pipe((0,b.map)(([e,t])=>(t.data=(0,y.map)(t.data,t=>(t.scope===h.RX_BUNDLE.definitionScopeTypes.bundle?t.scope=e.isApplication?h.RX_BUNDLE.definitionScopeNames.application:h.RX_BUNDLE.definitionScopeNames.library:t.scope=h.RX_BUNDLE.definitionScopeNames.public,(0,y.assign)(t,{primaryRecordDefinition:this.rxDefinitionNameService.getDisplayName(t.recordDefinitionNames[0])||this.translateService.instant("com.bmc.arsys.rx.client.common.not-applicable.label"),executionOrder:t.triggerEvent.executionOrder,triggerEvent:this.rxRuleTriggerEventPipe.transform(t.triggerEvent)}))),t))),this.gridColumns=[],this.isActionInProgress=!1}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.areNewDefinitionsAllowed},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!this.areNewDefinitionsAllowed||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}ngOnInit(){this.areNewDefinitionsAllowed=this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor),this.gridColumns=[qi.definitionGridColumns.name,{title:wn.primaryRecordDefinition.titleKey,fieldId:wn.primaryRecordDefinition.fieldId},{title:wn.triggerEvent.titleKey,fieldId:wn.triggerEvent.fieldId},{title:wn.executionOrder.titleKey,fieldId:wn.executionOrder.fieldId},qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.isEnabled,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:wn.primaryRecordDefinition.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:wn.executionOrder.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:wn.triggerEvent.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.isEnabled.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t}}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.rule.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxRuleDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.Rule).catch(y.noop)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType(En).execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxRuleDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"rule","new",this.rxBundleCacheService.bundleId])}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}}Fn.\u0275fac=function(e){return new(e||Fn)(o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](A.RxRuleTriggerEventPipe),o["\u0275\u0275directiveInject"](A.RxRuleDefinitionService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](A.RxRuleDefinitionDataPageService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](Ki),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService))},Fn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Fn,selectors:[["ax-rule-definition-tab"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ji,7),o["\u0275\u0275viewQuery"](_e,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionNameCellTemplate=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},features:[o["\u0275\u0275ProvidersFeature"]([A.RxRuleTriggerEventPipe])],decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","addDefinition","rowSelectionChanged","renameDefinition","copyDefinition","deleteDefinition","revertCustomization"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)})("renameDefinition",function(e){return t.onRenameDefinition(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","rule")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const Mn={firstRecord:{titleKey:"com.bmc.arsys.rx.client.association.grid.first-record.title",fieldId:"firstRecord"},cardinalityString:{titleKey:"com.bmc.arsys.rx.client.association.grid.cardinality.title",fieldId:"cardinalityString"},secondRecord:{titleKey:"com.bmc.arsys.rx.client.association.grid.second-record.title",fieldId:"secondRecord"},shouldCascadeDeleteString:{titleKey:"com.bmc.arsys.rx.client.association.grid.constraints.title",fieldId:"shouldCascadeDeleteString"}};class Tn{constructor(e,t,i,n,o,r,a,s,l,d,c,p){this.rxAssociationDefinitionDataPageService=e,this.rxAssociationDefinitionService=t,this.rxOverlayService=i,this.rxModalService=n,this.translateService=o,this.rxCommandFactoryService=r,this.rxBundleCacheService=a,this.rxFeatureService=s,this.router=l,this.rxDefinitionNameService=d,this.rxAssociationConstraintsPipe=c,this.rxAssociationCardinalityPipe=p,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.gridColumns=[],this.isActionInProgress=!1}ngOnInit(){this.rxFeatureService.isFeatureEnabled("DRD21-14986")&&(this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/association/edit2/`),this.gridColumns=[qi.definitionGridColumns.name,{title:Mn.firstRecord.titleKey,fieldId:Mn.firstRecord.fieldId},{title:Mn.cardinalityString.titleKey,fieldId:Mn.cardinalityString.fieldId},{title:Mn.secondRecord.titleKey,fieldId:Mn.secondRecord.fieldId},qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,{title:Mn.shouldCascadeDeleteString.titleKey,fieldId:Mn.shouldCascadeDeleteString.fieldId},qi.definitionGridColumns.isEnabled,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Mn.firstRecord.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Mn.cardinalityString.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Mn.secondRecord.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Mn.shouldCascadeDeleteString.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.isEnabled.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}];this.cardinalityStrings={ONE_TO_ONE:this.rxAssociationCardinalityPipe.transform(P.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value),ONE_TO_MANY:this.rxAssociationCardinalityPipe.transform(P.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value),MANY_TO_MANY:this.rxAssociationCardinalityPipe.transform(P.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)},this.shouldCascadeDeleteStrings={true:this.rxAssociationConstraintsPipe.transform(!0),false:this.rxAssociationConstraintsPipe.transform(!1)};const t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxAssociationDefinitionDataPageService.get({params:{propertySelection:["name","nodeAId","cardinality","nodeBId","shouldCascadeDelete","lastUpdateTime","lastChangedBy","customizationPerspective","isEnabled","scope","overlayGroupId","overlayDescriptor"]}}).pipe((0,b.map)(e=>({totalSize:e.totalSize,data:e.data.map(e=>Object.assign(Object.assign({},e),{firstRecord:this.rxDefinitionNameService.getDisplayName(e.nodeAId),secondRecord:this.rxDefinitionNameService.getDisplayName(e.nodeBId),cardinalityString:this.cardinalityStrings[e.cardinality],shouldCascadeDeleteString:this.shouldCascadeDeleteStrings[String(e.shouldCascadeDelete)]}))})))}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"association",this.rxFeatureService.isFeatureEnabled("DRD21-14986")?"new2":"new",this.rxBundleCacheService.bundleId])}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.association.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxAssociationDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.association.command.DeleteAssociationDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxAssociationDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}}Tn.\u0275fac=function(e){return new(e||Tn)(o["\u0275\u0275directiveInject"](P.RxAssociationDefinitionDataPageService),o["\u0275\u0275directiveInject"](P.RxAssociationDefinitionService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxFeatureService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](P.RxAssociationConstraintsPipe),o["\u0275\u0275directiveInject"](P.RxAssociationCardinalityPipe))},Tn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Tn,selectors:[["ax-association-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},features:[o["\u0275\u0275ProvidersFeature"]([P.RxAssociationCardinalityPipe,P.RxAssociationConstraintsPipe])],decls:2,vars:9,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","editRouterLink","addDefinition","renameDefinition","deleteDefinition","revertCustomization","rowSelectionChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("renameDefinition",function(e){return t.onRenameDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,7,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","association")("editRouterLink",t.editRouterLink)},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const On={recordDefinitionName:{title:"com.bmc.arsys.rx.innovation-studio.tabs.named-lists.column.record-definition-name.label",fieldId:"recordDefinitionName"}};class Nn{constructor(e,t,i,n,o,r,a,s,l,d){this.rxNamedListDefinitionDataPageService=e,this.rxOverlayService=t,this.rxBundleCacheService=i,this.translateService=n,this.rxModalService=o,this.rxCommandFactoryService=r,this.rxNamedListDefinitionService=a,this.router=s,this.rxCopyDefinitionService=l,this.rxDefinitionNameService=d,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.isActionInProgress=!1,this.definitions$=this.rxNamedListDefinitionDataPageService.get({params:{propertySelection:["name","recordDefinitionName","lastUpdateTime","lastChangedBy","customizationPerspective","scope","overlayGroupId","overlayDescriptor"]}}).pipe((0,b.tap)(e=>{e.data.forEach(e=>{e.recordDefinitionName=this.rxDefinitionNameService.getDisplayName(e.recordDefinitionName)})})),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)))}ngOnInit(){this.gridColumns=[qi.definitionGridColumns.name,{title:On.recordDefinitionName.title,fieldId:On.recordDefinitionName.fieldId},qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:On.recordDefinitionName.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t}}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"named-list","new",this.rxBundleCacheService.bundleId])}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.named-list.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxNamedListDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxNamedListDefinitionService.delete(t).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxNamedListDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.NamedList,"edit").catch(y.noop)}}Nn.\u0275fac=function(e){return new(e||Nn)(o["\u0275\u0275directiveInject"](j.RxNamedListDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](j.RxNamedListDefinitionService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Ki),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService))},Nn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Nn,selectors:[["ax-named-list-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","addDefinition","renameDefinition","copyDefinition","deleteDefinition","revertCustomization","rowSelectionChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("renameDefinition",function(e){return t.onRenameDefinition(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","named-list")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});class An{constructor(e,t,i,n,o,r,a,s,l,d){this.rxDocumentDefinitionDataPageService=e,this.rxDocumentDefinitionService=t,this.rxFeatureService=i,this.rxOverlayService=n,this.rxModalService=o,this.translateService=r,this.rxCommandFactoryService=a,this.rxBundleCacheService=s,this.router=l,this.rxCopyDefinitionService=d,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.gridColumns=[],this.isActionInProgress=!1}ngOnInit(){this.rxFeatureService.isFeatureEnabled("DRD21-14961")&&(this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/document/edit2/`),this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxDocumentDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","customizationPerspective","scope","overlayGroupId","overlayDescriptor"]}})}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"document",this.rxFeatureService.isFeatureEnabled("DRD21-14961")?"new2":"new",this.rxBundleCacheService.bundleId])}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.document.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxDocumentDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}getEditDefinitionUrl(){return`${window.location.origin}/innovationstudio/index.html#/app/bundle/${this.rxBundleCacheService.bundleId}/document/`}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.document.command.DeleteDocumentDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxDocumentDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.Document,this.rxFeatureService.isFeatureEnabled("DRD21-14961")?"edit2":"edit").catch(y.noop)}}An.\u0275fac=function(e){return new(e||An)(o["\u0275\u0275directiveInject"](T.RxDocumentDefinitionDataPageService),o["\u0275\u0275directiveInject"](T.RxDocumentDefinitionService),o["\u0275\u0275directiveInject"](h.RxFeatureService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Ki))},An.\u0275cmp=o["\u0275\u0275defineComponent"]({type:An,selectors:[["ax-document-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:9,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","editRouterLink","addDefinition","renameDefinition","copyDefinition","deleteDefinition","revertCustomization","rowSelectionChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("renameDefinition",function(e){return t.onRenameDefinition(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,7,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","document")("editRouterLink",t.editRouterLink)},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const Pn={definitionGridColumns:{description:{title:"com.bmc.arsys.rx.client.admin.chatbots.description.title",fieldId:"description"}}};class jn{constructor(e,t,i,n,o,r,a,s,l){this.rxWebApiDefinitionDataPageService=e,this.rxWebApiDefinitionService=t,this.rxOverlayService=i,this.rxModalService=n,this.translateService=o,this.rxCommandFactoryService=r,this.rxBundleCacheService=a,this.router=s,this.rxCopyDefinitionService=l,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.gridColumns=[],this.isActionInProgress=!1}ngOnInit(){this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.scope,Pn.definitionGridColumns.description];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Pn.definitionGridColumns.description.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxWebApiDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","description","scope","customizationPerspective","overlayGroupId","overlayDescriptor"]}})}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||!(1===e.length&&this.rxOverlayService.isCustomizationEnabled("allowOverlay",e[0]))},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"web-api","new",this.rxBundleCacheService.bundleId])}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.web-api.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:(0,y.lowerFirst)(i)}),size:"sm",content:D.RenameDefinitionModalComponent,data:{definitionName:e.name,infoText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.info.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxWebApiDefinitionService.rename(e.name,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.webapi.command.DeleteWebApiDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.WebApi).catch(y.noop)}}jn.\u0275fac=function(e){return new(e||jn)(o["\u0275\u0275directiveInject"](O.RxWebApiDefinitionDataPageService),o["\u0275\u0275directiveInject"](O.RxWebApiDefinitionService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Ki))},jn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:jn,selectors:[["ax-web-api-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","addDefinition","copyDefinition","renameDefinition","deleteDefinition","rowSelectionChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("copyDefinition",function(e){return t.onCopyDefinition(e)})("renameDefinition",function(e){return t.onRenameDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","web-api")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});class _n{constructor(e,t,i,n,o,r,a,s,l){this.rxEventDefinitionDataPageService=e,this.rxOverlayService=t,this.translateService=i,this.rxModalService=n,this.rxCommandFactoryService=o,this.rxBundleCacheService=r,this.rxEventDefinitionService=a,this.rxCopyDefinitionService=s,this.router=l,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.gridColumns=[],this.isActionInProgress=!1,this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)))}ngOnInit(){this.gridColumns=[qi.definitionGridColumns.name,qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.isEnabled,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.isEnabled.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxEventDefinitionDataPageService.get({params:{propertySelection:["name","lastUpdateTime","lastChangedBy","isEnabled","customizationPerspective","scope"]}})}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"event","new",this.rxBundleCacheService.bundleId])}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.event.command.DeleteEventDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxEventDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.Event).catch(y.noop)}}_n.\u0275fac=function(e){return new(e||_n)(o["\u0275\u0275directiveInject"](_.RxEventDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](_.RxEventDefinitionService),o["\u0275\u0275directiveInject"](Ki),o["\u0275\u0275directiveInject"](p.Router))},_n.\u0275cmp=o["\u0275\u0275defineComponent"]({type:_n,selectors:[["ax-event-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","addDefinition","deleteDefinition","copyDefinition","revertCustomization","rowSelectionChanged"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","event")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});const Vn={eventName:{title:"com.bmc.arsys.rx.innovation-studio.tabs.event-statistics.grid.event.label",fieldId:"eventName"}};class kn{constructor(e,t,i,n,o,r,a,s,l){this.rxEventStatisticsDefinitionDataPageService=e,this.rxOverlayService=t,this.translateService=i,this.rxModalService=n,this.rxCommandFactoryService=o,this.rxBundleCacheService=r,this.rxEventStatisticsDefinitionService=a,this.router=s,this.rxCopyDefinitionService=l,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.gridColumns=[],this.isActionInProgress=!1,this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)))}ngOnInit(){this.gridColumns=[qi.definitionGridColumns.name,{title:Vn.eventName.title,fieldId:Vn.eventName.fieldId,cellTemplate:this.eventNameCellTemplate},qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy,qi.definitionGridColumns.isEnabled,qi.definitionGridColumns.scope,qi.definitionGridColumns.customizationPerspective];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Vn.eventName.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.isEnabled.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean},{id:qi.definitionGridColumns.scope.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.definitions$=this.rxEventStatisticsDefinitionDataPageService.get({params:{propertySelection:["name","eventName","lastUpdateTime","lastChangedBy","isEnabled","customizationPerspective","scope"]}})}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.revertCustomization,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.customizedInThisOverlayGroup)},{id:qi.standardDefinitionActionNames.copy,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length||(0,y.some)(e,e=>e.customizationPerspective!==h.RX_OVERLAY.customizationPerspective.createdInThisOverlayGroup)}]}onAddDefinition(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"event-statistics","new",this.rxBundleCacheService.bundleId])}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.event.command.DeleteEventStatisticsDefinitionsCommand").execute({definitionNames:t}).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRevertCustomization(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.revert-customization.confirmation.message")})).pipe((0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>t?(0,R.forkJoin)(e.map(e=>this.rxEventStatisticsDefinitionService.revertCustomization(e.name))).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onCopyDefinition(e){this.rxCopyDefinitionService.openCopyDefinitionComponentModal(e,Wi.EventStatistics).catch(y.noop)}}kn.\u0275fac=function(e){return new(e||kn)(o["\u0275\u0275directiveInject"](V.RxeventStatisticsDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](V.RxEventStatisticsDefinitionService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Ki))},kn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:kn,selectors:[["ax-event-statistics-definition-tab"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ji,7),o["\u0275\u0275viewQuery"](Ve,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.eventNameCellTemplate=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:4,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","addDefinition","deleteDefinition","copyDefinition","revertCustomization","rowSelectionChanged"],["eventNameCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("addDefinition",function(){return t.onAddDefinition()})("deleteDefinition",function(e){return t.onDeleteDefinition(e)})("copyDefinition",function(e){return t.onCopyDefinition(e)})("revertCustomization",function(e){return t.onRevertCustomization(e)})("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,ke,2,3,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","event-statistics")},directives:[Ji],pipes:[n.AsyncPipe,h.RxDefinitionNamePipe],encapsulation:2});const Bn={description:{titleKey:"com.bmc.arsys.rx.client.common.description.label",fieldId:"description"}};class $n{constructor(e,t,i,n,o,r,a,s){this.router=e,this.rxChatbotDefinitionDataPageService=t,this.rxDefinitionNameService=i,this.rxOverlayService=n,this.rxBundleCacheService=o,this.rxModalService=r,this.translateService=a,this.rxChatbotDefinitionService=s,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e))),this.definitions$=this.rxChatbotDefinitionDataPageService.get(),this.gridColumns=[],this.isActionInProgress=!1,this.botNameMaxLength=this.rxBundleCacheService.bundleId===h.RX_APPLICATION.chatbotBundleId?254:254-(this.rxBundleCacheService.bundleId+":").length}getDefinitionActions(e){const t=this.rxOverlayService.isBundleEditable(this.rxBundleCacheService.bundleId);return[{id:qi.standardDefinitionActionNames.new,isDisabled:!this.rxOverlayService.areNewDefinitionsAllowedSync(this.bundleDescriptor)},{id:qi.standardDefinitionActionNames.rename,isDisabled:!t||1!==e.length},{id:qi.standardDefinitionActionNames.delete,isDisabled:!t||0===e.length}]}ngOnInit(){this.gridColumns=[qi.definitionGridColumns.name,{title:Bn.description.titleKey,fieldId:Bn.description.fieldId},qi.definitionGridColumns.lastUpdateTime,qi.definitionGridColumns.lastChangedBy];const e=[{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Bn.description.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t}}onAddDefinition(){const e=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.chatbot.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.new-chatbot.title"),size:"sm",content:D.RenameDefinitionModalComponent,data:{autoFocus:!1,maxLength:this.botNameMaxLength,fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:e}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:e}),definitionType:e,definitionNames:(0,y.map)(this.definitionTabComponent.recordGrid.adaptTableConfig.data,qi.definitionGridColumns.name.fieldId)}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.withLatestFrom)(this.rxBundleCacheService.getCurrentBundleDescriptor()),(0,b.switchMap)(([e,t])=>{const i=this.rxBundleCacheService.bundleId===h.RX_APPLICATION.chatbotBundleId?e:this.rxDefinitionNameService.getDefinitionName(this.rxBundleCacheService.bundleId,e);return this.rxChatbotDefinitionService.create(i,t).pipe((0,b.tap)(()=>{this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"chatbot","edit",i])}))}),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRenameDefinition({selectedRow:e,definitionNames:t}){const i=this.translateService.instant("com.bmc.arsys.rx.client.definition-type.chatbot.label");(0,R.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.title",{definitionType:i.toLowerCase()}),size:"sm",content:D.RenameDefinitionModalComponent,data:{maxLength:this.botNameMaxLength,definitionName:e.name,fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.definition-name.label",{definitionType:i}),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.rename-definition-modal.name-validation.message",{definitionType:i}),definitionType:i,definitionNames:t}}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.switchMap)(t=>this.rxChatbotDefinitionService.rename(e.id,t)),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}onDeleteDefinition(e){(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.switchMap)(t=>{const i=(0,y.find)(e,{id:k.RX_CHATBOTS.chatbotSettings.defaultBotId});return i&&t?(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.configurations-delete-confirmation.message",{defaultChatbotName:i[qi.definitionGridColumns.name.fieldId]})})):t?(0,R.of)(!0):(0,R.of)(!1)}),(0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(t=>t?this.rxChatbotDefinitionService.delete((0,y.map)(e,"id")).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}}$n.\u0275fac=function(e){return new(e||$n)(o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxChatbotDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](k.RxChatbotDefinitionService))},$n.\u0275cmp=o["\u0275\u0275defineComponent"]({type:$n,selectors:[["ax-chatbot-definition-tab"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ji,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first)}},inputs:{bundleDescriptor:"bundleDescriptor"},decls:2,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitions$","isActionInProgress","definitionType","rowSelectionChanged","addDefinition","renameDefinition","deleteDefinition"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)})("addDefinition",function(){return t.onAddDefinition()})("renameDefinition",function(e){return t.onRenameDefinition(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)("definitionType","chatbot")},directives:[Ji],pipes:[n.AsyncPipe],encapsulation:2});class Ln extends I.RxModalClass{constructor(e,t,i,n,o,r){super(t,e),this.injector=e,this.dockedPanelContext=t,this.formBuilder=i,this.translateService=n,this.rxAdminSettingsService=o,this.rxNotificationService=r,this.isEditMode=this.dockedPanelContext.getData().editMode,this.settingForm=this.createSettingForm(),this.adminSetting=this.dockedPanelContext.getData().selectedAdminSetting,this.viewDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.view.label"),definitionType:D.RxDefinitionPickerType.View,required:!0},this.permissionEditorOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),type:"externalconfig",permissionScope:h.RX_PERMISSION.permissionScope.all}}ngOnInit(){super.ngOnInit(),this.isEditMode&&this.initializeSettingForm()}createSettingForm(){return this.formBuilder.group({componentName:"",registeredModuleName:"",innovationStudio:!1,application:!this.isEditMode,componentLabel:"",firstMenu:"",secondMenu:"",externalLink:"",permissions:""})}initializeSettingForm(){this.settingForm.get("componentName").setValue(this.adminSetting.componentName),this.settingForm.controls.componentName.disable(),this.settingForm.get("registeredModuleName").setValue(this.adminSetting.registeredModuleName),this.settingForm.get("externalLink").setValue(this.adminSetting.externalLink),this.adminSetting.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.both.value?(this.settingForm.get("innovationStudio").setValue(!0),this.settingForm.get("application").setValue(!0)):this.adminSetting.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.innovationStudio.value?(this.settingForm.get("innovationStudio").setValue(!0),this.settingForm.get("application").setValue(!1)):this.adminSetting.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.application.value&&this.settingForm.get("application").setValue(!0),this.settingForm.get("componentLabel").setValue(this.adminSetting.localeList[0].componentLabel),this.settingForm.get("permissions").setValue(this.adminSetting.permissions),this.settingForm.get("firstMenu").setValue(this.adminSetting.localeList[0].firstMenu),this.settingForm.get("secondMenu").setValue(this.adminSetting.localeList[0].secondMenu)}saveAdminSetting(){const e=this.transformFormControlData();this.settingForm.markAsPristine(),this.isEditMode?this.rxAdminSettingsService.updateAdminSetting(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.configurations.setting-saved.message")),this.dockedPanelContext.close(e)}):this.rxAdminSettingsService.createAdminSetting(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.configurations.setting-saved.message")),this.dockedPanelContext.close(e)})}transformFormControlData(){const e=(0,y.cloneDeep)(this.settingForm.value);return this.isEditMode&&(e.componentName=this.adminSetting.componentName),e.localeList=[],e.viewToOpen="CustomView",e.innovationStudio&&e.application?e.showInLocation=h.RX_ADMINISTRATION.settingAccessOptions.both.value:e.innovationStudio?e.showInLocation=h.RX_ADMINISTRATION.settingAccessOptions.innovationStudio.value:e.application?e.showInLocation=h.RX_ADMINISTRATION.settingAccessOptions.application.value:e.showInLocation=h.RX_ADMINISTRATION.settingAccessOptions.none.value,e.localeList.push(Object.assign({locale:"en"},(0,y.pick)(e,["componentLabel","firstMenu","secondMenu"]))),this.adminSetting.linkType===h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.value?(e.linkType=this.adminSetting.linkType,e.externalLink=null,e.viewComponent=!0):(e.linkType=this.adminSetting.linkType,e.viewComponent=!1,e.registeredModuleName=null),e.permissions||(e.permissions=[]),delete e.firstMenu,delete e.secondMenu,delete e.componentLabel,delete e.innovationStudio,delete e.application,e}isSettingActive(){return this.settingForm.get("innovationStudio").value||this.settingForm.get("application").value}isInBundleSetting(){return this.adminSetting.linkType===h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.value}cancel(){this.dockedPanelContext.dismiss(C.DismissReasons.CLOSE_BTN)}isDirty(){var e;return this.settingForm.dirty||(null===(e=this.rxPermissionEditorComponent)||void 0===e?void 0:e.isDirty())}}Ln.\u0275fac=function(e){return new(e||Ln)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](C.DockedPanelContext),o["\u0275\u0275directiveInject"](E.FormBuilder),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxAdminSettingsService),o["\u0275\u0275directiveInject"](h.RxNotificationService))},Ln.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ln,selectors:[["ax-admin-setting-editor"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](D.RxPermissionEditorComponent,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.rxPermissionEditorComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:32,vars:24,consts:[[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12"],["rx-id","component-name","formControlName","componentName","required","true",1,"d-block","form-group",3,"label"],["class","row",4,"ngIf"],[3,"label"],["formControlName","innovationStudio","rx-id","innovation-studio","label","Innovation Studio",1,"d-block","form-group"],["formControlName","application","rx-id","application",1,"d-block","form-group",3,"label"],["rx-id","component-label","formControlName","componentLabel","required","true",1,"d-block","form-group",3,"label"],["rx-id","permissions","formControlName","permissions",1,"d-block","form-group",3,"options"],[4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",1,"mr-2",3,"click"],["formControlName","registeredModuleName","rx-id","view","required","true",1,"d-block","form-group",3,"options"],["rx-id","external-link","formControlName","externalLink","required","true",1,"d-block","form-group",3,"label"],["rx-id","first-menu","formControlName","firstMenu","required","true",1,"d-block","form-group",3,"label"],["rx-id","second-menu","formControlName","secondMenu",1,"d-block","form-group",3,"label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275element"](4,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,Be,3,1,"div",5),o["\u0275\u0275template"](7,$e,4,3,"div",5),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275elementStart"](9,"div",3),o["\u0275\u0275element"](10,"adapt-rx-control-label",6),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",2),o["\u0275\u0275elementStart"](13,"div",3),o["\u0275\u0275element"](14,"adapt-rx-checkbox",7),o["\u0275\u0275element"](15,"adapt-rx-checkbox",8),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",2),o["\u0275\u0275elementStart"](18,"div",3),o["\u0275\u0275element"](19,"adapt-rx-textfield",9),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",2),o["\u0275\u0275elementStart"](22,"div",3),o["\u0275\u0275element"](23,"rx-permission-editor",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](24,Le,9,6,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",12),o["\u0275\u0275elementStart"](26,"button",13),o["\u0275\u0275listener"]("click",function(){return t.saveAdminSetting()}),o["\u0275\u0275text"](27),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"button",14),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.settingForm),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,12,"com.bmc.arsys.rx.innovation-studio.configurations.component-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isInBundleSetting()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isInBundleSetting()),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,14,"com.bmc.arsys.rx.innovation-studio.configurations.enable-access-from.label")),o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](16,16,"com.bmc.arsys.rx.client.common.application.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,18,"com.bmc.arsys.rx.innovation-studio.configurations.component-label.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",t.permissionEditorOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSettingActive()),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.settingForm.pristine||t.settingForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](28,20,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](31,22,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[E["\u0275NgNoValidate"],E.NgControlStatusGroup,E.FormGroupDirective,C.AdaptRxTextfieldComponent,E.NgControlStatus,E.FormControlName,E.RequiredValidator,n.NgIf,C.AdaptRxControlLabelComponent,C.AdaptRxCheckboxComponent,D.RxPermissionEditorComponent,C.AdaptButtonComponent,D.RxDefinitionPickerComponent],pipes:[x.TranslatePipe],encapsulation:2});const Gn={definitionGridColumns:{showInLocation:{title:"com.bmc.arsys.rx.innovation-studio.configurations.grid.column.access.title",fieldId:"showInLocation"}}},zn={shared:{configurationType:"shared-settings",labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.setting-type.shared.label"},inbundle:{configurationType:"in-bundle-settings",labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.setting-type.in-bundle.label"},external:{configurationType:"external-settings",labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.setting-type.external.label"}};class Un{constructor(e,t,i,n,o,r,a){this.rxAdminComponentDataPageQuery=e,this.rxModalService=t,this.translateService=i,this.rxAdminSettingsService=n,this.router=o,this.rxBundleCache=r,this.rxFeatureService=a,this.definitions$=this.rxAdminComponentDataPageQuery.get().pipe((0,b.map)(e=>({totalSize:e.totalSize,data:e.data.map(e=>(e.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.application.value?e.showInLocation=this.translateService.instant("com.bmc.arsys.rx.client.common.application.label"):e.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.innovationStudio.value?e.showInLocation="Innovation Studio":e.showInLocation===h.RX_ADMINISTRATION.settingAccessOptions.both.value?e.showInLocation=`${this.translateService.instant("com.bmc.arsys.rx.client.common.application.label")}, Innovation Studio`:e.showInLocation=this.translateService.instant("com.bmc.arsys.rx.client.common.none.label"),Object.assign(Object.assign({},e),{name:e.component,componentType:this.getComponentType(e)})))}))),this.isActionInProgress=!1,this.rowSelectionChanged$=new R.BehaviorSubject([]),this.definitionType="config",this.definitionActions$=this.rowSelectionChanged$.pipe((0,b.map)(e=>this.getDefinitionActions(e)))}ngOnInit(){this.rxFeatureService.isFeatureEnabled("DRD21-14987")?this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit2/${this.rxBundleCache.bundleId}:`:this.editRouterLink=`/${h.RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit/${this.rxBundleCache.bundleId}:`,this.gridColumns=[{title:qi.configurationGridColumns.component.title,fieldId:qi.configurationGridColumns.component.fieldId,cellTemplate:this.componentCellTemplate,sortable:{direction:F.ColumnSortDirection.Asc,priority:0}},qi.configurationGridColumns.componentType,Gn.definitionGridColumns.showInLocation];const e=[{id:qi.configurationGridColumns.component.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.configurationGridColumns.componentType.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:Gn.definitionGridColumns.showInLocation.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}],t=e.reduce((e,t)=>(e[t.id]=t,e),{});this.recordDefinition={fieldDefinitions:e,fieldDefinitionsById:t},this.settingTypeLabels={external:this.translateService.instant(zn.external.labelKey),inBundle:this.translateService.instant(zn.inbundle.labelKey),shared:this.translateService.instant(zn.shared.labelKey)}}getComponentType(e){return"External Location"===e.uiLocation?this.settingTypeLabels.external:"CommonSettings"===e.custom?this.settingTypeLabels.shared:this.settingTypeLabels.inBundle}getDefinitionActions(e){return[{id:qi.standardDefinitionActionNames.new,subActions:[{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.shared-setting.label",id:h.RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType,rxId:h.RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType},{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.label",id:h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType,rxId:h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType},{labelKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.label",id:h.RX_ADMINISTRATION.configurationSettingTypes.external.configurationType,rxId:h.RX_ADMINISTRATION.configurationSettingTypes.external.configurationType}]},{id:qi.standardDefinitionActionNames.delete,isDisabled:0===e.length}]}onCustomAction(e){e.actionId===h.RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType?this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.definitionType,this.rxFeatureService.isFeatureEnabled("DRD21-14987")?"new2":"new",this.rxBundleCache.bundleId]):e.actionId===h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType?this.openInBundleSettingsEditor({editMode:!1,titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.title",selectedAdminSetting:{linkType:h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.value}}):e.actionId===h.RX_ADMINISTRATION.configurationSettingTypes.external.configurationType&&this.openInBundleSettingsEditor({editMode:!1,titleKey:"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.title",selectedAdminSetting:{linkType:h.RX_ADMINISTRATION.configurationSettingTypes.external.value}})}editAdminSetting(e){"CustomView"===e.custom&&this.rxAdminSettingsService.getAdminSetting(e.component).subscribe(e=>{this.openInBundleSettingsEditor({editMode:!0,titleKey:this.getTitleKey(e.linkType),selectedAdminSetting:e})})}openInBundleSettingsEditor(e){(0,R.from)(this.rxModalService.openDockedPanel({title:this.translateService.instant(e.titleKey),content:Ln,size:g.OpenViewActionModalSize.Small,data:Object.assign({},e)}).catch(y.noop)).pipe((0,b.filter)(Boolean),(0,b.tap)(()=>{this.isActionInProgress=!0}),(0,b.finalize)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())).subscribe()}getTitleKey(e){return e===h.RX_ADMINISTRATION.configurationSettingTypes.inbundle.value?"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.label":"com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.label"}onDeleteDefinition(e){const t=e.map(e=>e.name);(0,R.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.definitionTabComponent.getDeleteSelectedDefinitionMessage()})).pipe((0,b.tap)(e=>{this.isActionInProgress=e}),(0,b.switchMap)(e=>e?this.rxAdminSettingsService.deleteAdminSetting(t).pipe((0,b.tap)(()=>{this.isActionInProgress=!1}),(0,b.switchMap)(()=>this.definitionTabComponent.recordGrid.api.refresh())):(0,R.of)({})),(0,b.finalize)(()=>{this.isActionInProgress=!1})).subscribe()}onRowSelectionChanged(e){this.rowSelectionChanged$.next(e)}}Un.\u0275fac=function(e){return new(e||Un)(o["\u0275\u0275directiveInject"](h.RxAdminComponentDataPageService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxAdminSettingsService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxFeatureService))},Un.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Un,selectors:[["ax-configuration-definition-tab"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ji,7),o["\u0275\u0275viewQuery"](Ge,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionTabComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.componentCellTemplate=e.first)}},decls:4,vars:8,consts:[[3,"definitionActions","gridColumns","recordDefinition","definitionType","definitions$","isActionInProgress","rowSelectionChanged","customAction","deleteDefinition"],["componentCellTemplate",""],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"routerLink","click"],[3,"routerLink"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ax-definition-tab",0),o["\u0275\u0275listener"]("rowSelectionChanged",function(e){return t.onRowSelectionChanged(e)})("customAction",function(e){return t.onCustomAction(e)})("deleteDefinition",function(e){return t.onDeleteDefinition(e)}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,qe,2,2,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e&&o["\u0275\u0275property"]("definitionActions",o["\u0275\u0275pipeBind1"](1,6,t.definitionActions$))("gridColumns",t.gridColumns)("recordDefinition",t.recordDefinition)("definitionType","config-definition")("definitions$",t.definitions$)("isActionInProgress",t.isActionInProgress)},directives:[Ji,n.NgIf,p.RouterLinkWithHref],pipes:[n.AsyncPipe],encapsulation:2});class qn{constructor(e,t,i,n,o,r,a){this.activatedRoute=e,this.rxBundleCacheService=t,this.rxGlobalCacheService=i,this.rxOverlayService=n,this.rxPageTitleService=o,this.translateService=r,this.router=a,this.tabs=qi.tabs.map(e=>Object.assign(Object.assign({},e),{isVisited:!1})),this.bundleDescriptor$=this.rxBundleCacheService.getCurrentBundleDescriptor(),this.activeTabIndex$=this.activatedRoute.params.pipe((0,b.pluck)("tab"),(0,b.map)(e=>(0,y.findIndex)(qi.tabs,{id:e})),(0,b.tap)(e=>{-1===e?this.router.navigate([Gi.Records],{relativeTo:this.activatedRoute.parent}):(this.tabs[e].isVisited=!0,this.setPageTitle(qi.tabs[e].titleKey))}))}onTabChanged(e){const t=qi.tabs[e.index];this.router.navigate([t.id],{relativeTo:this.activatedRoute.parent})}setPageTitle(e){this.rxGlobalCacheService.getBundleFriendlyName(this.rxBundleCacheService.bundleId).pipe((0,b.take)(1)).subscribe(t=>{this.rxPageTitleService.set([this.translateService.instant(e),t],this.rxGlobalCacheService.applicationId)})}}qn.\u0275fac=function(e){return new(e||qn)(o["\u0275\u0275directiveInject"](p.ActivatedRoute),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxPageTitleService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](p.Router))},qn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:qn,selectors:[["ax-bundle-definitions"]],decls:2,vars:3,consts:[[3,"tab-active","fullHeight","tab-active-changed",4,"ngIf"],[3,"tab-active","fullHeight","tab-active-changed"],[3,"adapt-tab-title"],[3,"bundleDescriptor",4,"ngIf"],[4,"ngIf"],[3,"bundleDescriptor"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,ot,38,52,"adapt-tabset",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.bundleDescriptor$))},directives:[n.NgIf,C.AdaptTabsComponent,C.AdaptTabsPanelComponent,xn,Cn,Rn,Fn,Tn,Nn,An,jn,_n,kn,$n,Un],pipes:[n.AsyncPipe,x.TranslatePipe],styles:["[_nghost-%COMP%]{height:100%}[_nghost-%COMP%]     adapt-tabset .tab-content{padding:0}"]});const Xn={deploymentStatuses:{succeeded:["Deployed","DeployedWithImportWarning","Undeployed","PackageCreated","UndeployedVersion"],failed:["Error","DeployedWithImportError"],pending:["PendingDeploy","ReadyDeploy","Deploying","PendingUndeploy","ReadyUndeploy","Undeploying","PendingPackageCreate"]},deploymentStatusPollInterval:5e3};class Wn{constructor(e,t,i,n){this.httpClient=e,this.ngZone=t,this.translateService=i,this.rxFileService=n,this.createBundleUrl="/api/rx/application/bundle/bundledescriptor/",this.deployBundleUrl="/api/rx/application/bundle/deploymentpackage/",this.deploymentStatusUrl="/api/rx/application/bundle/deploymentstatus",this.cancelPolling$=new R.Subject}create(e){return this.httpClient.post(this.createBundleUrl,e,{observe:"response"})}downloadContentPackage(e,t){return this.httpClient.get(`${this.deployBundleUrl}${e}/${t}`,{responseType:"arraybuffer",observe:"response"}).pipe((0,b.tap)(e=>{const t=new Uint8Array(e.body),i=new Blob([t],{type:e.headers.get("content-type")}),n=this.rxFileService.extractFileName(e);this.ngZone.runOutsideAngular(()=>{(0,B.saveAs)(i,n)})}))}download(e,t){return this.httpClient.get(this.deployBundleUrl+`${e}/${t}`,{observe:"response",responseType:"arraybuffer"})}install(e){const t=new FormData;return t.append("file",e),this.httpClient.post(this.deployBundleUrl,t,{headers:new w.HttpHeaders({"Expect-Package-Type":"INSTALL"}),observe:"response"})}reinstall(e,t){const i=new FormData;return i.append("file",t),this.httpClient.post(this.deployBundleUrl,i,{headers:new w.HttpHeaders({"Expect-Package-Type":"INSTALL","Reinstall-To-Bundle-Id":e}),observe:"response"})}update(e){const t=new FormData;return t.append("file",e),this.httpClient.post(this.deployBundleUrl,t,{headers:new w.HttpHeaders({"Expect-Package-Type":"UPDATE"}),observe:"response"})}import(e,t){const i=new FormData;return i.append("file",t),this.httpClient.post(this.deployBundleUrl,i,{headers:new w.HttpHeaders({"Expect-Package-Type":"EXPORT","Reinstall-To-Bundle-Id":e}),observe:"response"})}uninstall(e){return this.httpClient.delete(this.deployBundleUrl+`${e}`,{observe:"response"})}buildStatusMessage(e){const t="\n",i=(0,y.isEmpty)(e.errorMessages)?"":(0,y.chain)(e.errorMessages).unshift(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.errors.label")).join(t).value(),n=(0,y.isEmpty)(e.definitionsStatusContent)?"":(0,y.chain)(e.definitionsStatusContent).unshift(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.definition.status.messages.label")).join(t).value(),o=(0,y.isEmpty)(e.tenantDataStatusContent)?[]:Object.keys(e.tenantDataStatusContent).map(i=>(0,y.chain)(e.tenantDataStatusContent[i]).unshift(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.data.status.messages.label",{tenant:i})).join(t).value());return(0,y.chain)(o).unshift(i,n).compact().join(t+t).value()}pollDeploymentStatus(e,t){return(0,R.timer)(0,Xn.deploymentStatusPollInterval).pipe((0,b.takeUntil)(this.cancelPolling$),(0,b.switchMap)(()=>this.httpClient.get((t||this.deploymentStatusUrl)+`/${e}`)),(0,b.tap)(e=>{Xn.deploymentStatuses.failed.includes(e.packageDeployStatus)||Xn.deploymentStatuses.failed.includes(e.packageExportStatus)?(this.cancelPolling$.next(),e.errorMessage=this.buildStatusMessage(e.deploymentParsedStatus)):(Xn.deploymentStatuses.succeeded.includes(e.packageDeployStatus)||Xn.deploymentStatuses.succeeded.includes(e.packageExportStatus))&&(this.cancelPolling$.next(),e.isFinished=!0)}))}}Wn.\u0275fac=function(e){return new(e||Wn)(o["\u0275\u0275inject"](w.HttpClient),o["\u0275\u0275inject"](o.NgZone),o["\u0275\u0275inject"](x.TranslateService),o["\u0275\u0275inject"](M.RxFileService))},Wn.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Wn,factory:Wn.\u0275fac,providedIn:"root"});class Hn extends h.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.bundle.datapage.CreatePackageStatusDataPageQuery"),this.injector=e}}Hn.\u0275fac=function(e){return new(e||Hn)(o["\u0275\u0275inject"](o.Injector))},Hn.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Hn,factory:Hn.\u0275fac,providedIn:"root"});class Qn extends h.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.localization.datapage.LocalizedStringsDataPageQuery"),this.injector=e}}Qn.\u0275fac=function(e){return new(e||Qn)(o["\u0275\u0275inject"](o.Injector))},Qn.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Qn,factory:Qn.\u0275fac,providedIn:"root"});const Kn={duplicateDataActionTypes:{THROW_ERROR:"Ignore",CREATE_NEW_RECORD:"Create New",REPLACE:"Overwrite",MERGE:"Merge"}};class Jn extends h.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(x.TranslateService),this.commonDataDictionary$=(0,R.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-groups.title"),icon:"d-icon-dollar",expression:"$GROUPS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-group-ids.title"),icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-roles.title"),icon:"d-icon-dollar",expression:"$ROLES$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user-locale.title"),icon:"d-icon-dollar",expression:"$LOCALE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-week-day.title"),icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.null.title"),icon:"d-icon-dollar",expression:"$NULL$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.server-url.title"),icon:"d-icon-dollar",expression:"$SERVERURL$"}]}])}}class Yn extends h.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(x.TranslateService),this.commonDataDictionary$=(0,R.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-groups.title"),icon:"d-icon-dollar",expression:"$GROUPS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-group-ids.title"),icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-roles.title"),icon:"d-icon-dollar",expression:"$ROLES$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user-locale.title"),icon:"d-icon-dollar",expression:"$LOCALE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-week-day.title"),icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.null.title"),icon:"d-icon-dollar",expression:"$NULL$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.server-url.title"),icon:"d-icon-dollar",expression:"$SERVERURL$"}]},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.common-core-fields.title"),expanded:!0,children:S.RX_RECORD_DEFINITION.coreFields.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`}))}])}}class Zn{constructor(e,t,i,n,o,r,a,s){this.injector=e,this.rxDefinitionNameService=t,this.rxExpressionEditorService=i,this.rxModalService=n,this.rxRecordDefinitionCacheService=o,this.rxRecordGridUtilsService=r,this.rxWizardModalComponent=a,this.translateService=s,this.recordDefinitionsFormControl=new E.FormControl,this.duplicateDataActionTypeOptions=(0,y.keys)(Kn.duplicateDataActionTypes),this.recordDefinitions=[],this.selectedDataSources={},this.selectedDefinitions=[],this.duplicateConfigurationDataActionTypeOptions=(0,y.chain)(Kn.duplicateDataActionTypes).pick(["THROW_ERROR","REPLACE"]).keys().value(),this.destroyed$=new R.ReplaySubject(1),this.optionFormatter=this.optionFormatter.bind(this),this.titleFormatter=this.titleFormatter.bind(this)}ngOnInit(){this.dataFilterColumnExpressionConfigurator=new Jn(this.injector),this.globalDataFilterExpressionConfigurator=new Yn(this.injector),this.globalDataFilterExpressionConfigurator.configureForProperty({propertyPath:"globalDataFilter",operators:this.globalDataFilterExpressionConfigurator.getOperatorRowsByGroup(h.ExpressionOperatorGroup.All),dataDictionary$:this.globalDataFilterExpressionConfigurator.commonDataDictionary$}),this.globalDataFilterExpressionFormControlOptions={isLabelHidden:!0,dataDictionary$:this.globalDataFilterExpressionConfigurator.getDataDictionary("globalDataFilter"),operators:this.globalDataFilterExpressionConfigurator.getOperators(),clickToBuildExpressionLabel:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.global-data-filter.click-to-build-expression.label")};const e=[{fieldId:"dataSource",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label"),wrapText:!0,cellTemplate:this.recordNameCellTemplate},{fieldId:qi.definitionGridColumns.name.fieldId,title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.name.label"),wrapText:!0,visible:!1,cellTemplate:this.recordNameCellTemplate},{fieldId:"aliasName",wrapText:!0,title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.alias-name.label"),visible:!1},{fieldId:"dataFilterExpression",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label"),cellTemplate:this.dataFilterCellTemplate},{fieldId:"dataFilterColumnExpressionFormControlOptions",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label"),visible:!1},{fieldId:"ignoreRuleExecution",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.ignore-rules.label"),cellTemplate:this.ignoreRulesCellTemplate},{fieldId:"duplicateDataActionType",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.duplicates.label"),cellTemplate:this.duplicateDataActionTypeCellTemplate}].filter(e=>(0,y.includes)(this.options.gridConfig.columns,e.fieldId)),t={fieldDefinitions:[{id:"dataSource",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"aliasName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"dataFilterExpression",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"dataFilterColumnExpressionFormControlOptions",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.object},{id:"ignoreRuleExecution",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"duplicateDataActionType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}].filter(e=>(0,y.includes)(this.options.gridConfig.columns,e.id))};this.rxWizardModalComponent.context$.pipe((0,b.take)(1)).subscribe(e=>{e.cache.recordDefinitions.forEach(e=>{this.dataFilterColumnExpressionConfigurator.configureForProperty({propertyPath:`dataFilterExpression:${e.name}`,operators:this.dataFilterColumnExpressionConfigurator.getOperatorRowsByGroup(h.ExpressionOperatorGroup.All),dataDictionary$:this.dataFilterColumnExpressionConfigurator.commonDataDictionary$.pipe((0,b.switchMap)(t=>this.rxRecordGridUtilsService.getAssociationDescriptors(e.name).pipe((0,b.switchMap)(i=>(0,R.forkJoin)([this.rxRecordDefinitionCacheService.getRecordDefinition(e.name),...i.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName))]).pipe((0,b.map)(n=>[t[0],{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.definition-fields.title",{definitionName:this.rxDefinitionNameService.getDisplayName(e.name)}),expanded:!0,children:[...(0,y.chain)(n).find({name:e.name}).get("fieldDefinitions").map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`})).value(),(0,y.isEmpty)(i)?[]:{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition-associations.title"),children:i.map(e=>({label:`${this.rxDefinitionNameService.getDisplayName(e.recordDefinitionName)} (${e.label})`,children:this.getAssociationsDataDictionary(n,e.recordDefinitionName,e)}))}]}]))))))})});let t=[],i=[];const n=e.cache.recordDefinitions.filter(e=>e.type!==S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom).reduce((t,i)=>{const n={duplicateDataActionType:[this.options.gridConfig.defaultDuplicateDataActionType],aliasName:i.aliasName,name:i.name,dataSource:i.aliasName||this.rxDefinitionNameService.getDisplayName(i.name),shouldExportData:i.shouldExportData,ignoreRuleExecution:!1,disabled:i.disabled||i.selected,selected:i.selected,dataFilter:i.dataFilter,dataFilterExpression:i.dataFilterExpression||null,defaultFilter:i.defaultFilter||null,dataFilterColumnExpressionFormControlOptions:{isLabelHidden:!0,operators:this.dataFilterColumnExpressionConfigurator.getOperators(),dataDictionary$:this.dataFilterColumnExpressionConfigurator.getDataDictionary(`dataFilterExpression:${i.name}`)}},o=e.bundleFriendlyNamesById[this.rxDefinitionNameService.getBundleId(n.name)];return t[o]=t[o]||[],t[o].push(n),t},{});this.recordDefinitions=(0,y.reduce)(n,(e,n,o)=>(e.push({name:o,children:n}),i=i.concat(n.filter(e=>e.selected)),t=t.concat(n),e),[]),this.addDataForm=new E.FormGroup({globalDataFilter:new E.FormControl(null),isConfigurationDataIncluded:new E.FormControl(e.deploymentPackageDescriptor.isConfigurationDataIncluded),duplicateConfigurationDataActionType:new E.FormControl([e.deploymentPackageDescriptor.duplicateDataActionTypeForConfigurationData])}),this.recordDefinitionsFormControl.valueChanges.pipe((0,b.startWith)(null),(0,b.pairwise)(),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=this.definitionsDataGrid.api.getSelectedRows();let n;e&&e.length!==t.length&&this.definitionsDataGrid.api.refresh().subscribe(),n=e?(0,y.differenceBy)(t,e,"dataSource"):t.filter(e=>!e.selected),this.definitionsDataGrid.api.setSelectedRows([...n,...i.filter(e=>(0,y.find)(t,{dataSource:e.dataSource}))])}),this.recordDefinitionsFormControl.patchValue(i),this.definitionsDataGrid.rowSelectionChanged.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(i=>{const n=(0,y.cloneDeep)(e.deploymentPackageDescriptor),o=(0,y.find)(i,"isSingleSelect");this.selectedDataSources={},this.selectedDefinitions=[],i.forEach(e=>{this.selectedDataSources[e.dataSource]=!0,this.selectedDefinitions.push((0,y.find)(t,{dataSource:e.dataSource}))}),i.length>1&&o?this.isSingleSelectDataSourceSelected?this.rxModalService.alert({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.single-select-data-source-selected.message",{dataSource:o.dataSource})}).then(()=>{this.definitionsDataGrid.api.setSelectedRows([o])}):this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.single-select-data-source-selection-confirmation.message",{dataSource:o.dataSource})}).then(e=>{e?(this.isSingleSelectDataSourceSelected=!0,this.definitionsDataGrid.api.setSelectedRows([o])):(this.isSingleSelectDataSourceSelected=!1,this.definitionsDataGrid.api.setSelectedRows((0,y.reject)(i,o)))}):(this.isSingleSelectDataSourceSelected&&!o&&(this.isSingleSelectDataSourceSelected=!1),(0,y.assign)(n,{dataImportOptionsByRecordDefinitionName:this.getDataImportOptionsByRecordDefinitionName(this.selectedDefinitions)}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:n,isPackageDataModified:!0},i.length>0))})}),this.addDataForm.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);(0,y.assign)(i,{isConfigurationDataIncluded:e.isConfigurationDataIncluded,duplicateDataActionTypeForConfigurationData:(0,y.head)(e.duplicateConfigurationDataActionType)}),e.globalDataFilter&&(0,y.assign)(i,{dataImportOptionsByRecordDefinitionName:this.getDataImportOptionsByRecordDefinitionName(this.selectedDefinitions)}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0})}),this.recordGridConfig$=(0,R.of)({columns:e,enableRowSelection:F.RowSelectionMode.Multiple,enableFiltering:!1,recordIdField:"dataSource",styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,R.of)(t),getData:()=>(0,R.of)({data:this.recordDefinitionsFormControl.value,totalSize:this.recordDefinitionsFormControl.value.length})})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}optionFormatter(e){return this.rxDefinitionNameService.getDisplayName(e.dataSource)}titleFormatter(e){return(0,y.chain)(e).map(this.optionFormatter).join(", ").truncate({length:200}).value()||this.translateService.instant("com.bmc.arsys.rx.client.common.select.label")}duplicateDataActionTypesOptionFormatter(e){return Kn.duplicateDataActionTypes[e]}openDataFilterColumnExpressionEditor(e,t){this.rxWizardModalComponent.api.markDirty(),this.rxExpressionEditorService.openEditor({property:{path:`dataFilterExpression:${e.name}`,value:e[t],label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label")},expressionConfigurator:this.dataFilterColumnExpressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.legend.activity-result.label"),icon:"d-icon-field_text"}]}).pipe((0,b.tap)(i=>{e[t]=i.value,this.updateDataImportOptionsByRecordDefinitionName(i.value,e,t)})).subscribe()}openGlobalDataFilterExpressionEditor(){this.rxWizardModalComponent.api.markDirty(),this.rxExpressionEditorService.openEditor({property:{path:"globalDataFilter",value:this.addDataForm.controls.globalDataFilter.value,label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.global-data-filter-expression-editor.label")},expressionConfigurator:this.globalDataFilterExpressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]}).subscribe(e=>{this.addDataForm.controls.globalDataFilter.setValue(e.value)})}updateDataImportOptionsByRecordDefinitionName(e,t,i){this.rxWizardModalComponent.context$.pipe((0,b.take)(1)).subscribe(n=>{const o=(0,y.cloneDeep)(n.deploymentPackageDescriptor),r=this.recordDefinitionsFormControl.value,a=(0,y.find)(r,{dataSource:t.dataSource});o.dataImportOptionsByRecordDefinitionName[a.name][i]=(0,y.isArray)(e)?(0,y.head)(e):e,this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:o}),a[i]=e,this.recordDefinitionsFormControl.setValue(r)})}getAssociationsDataDictionary(e,t,i){return(0,y.find)(e,{name:t}).fieldDefinitions.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'recordContext._associations.${i.associationDefinition.guid}.${i.nodeSide}[0].${e.id}'`}))}getDataImportOptionsByRecordDefinitionName(e){return e.reduce((e,t)=>{var i,n;const o={duplicateDataActionType:(0,y.head)(t.duplicateDataActionType),ignoreRuleExecution:t.ignoreRuleExecution};o.defaultFilter=t.defaultFilter,o.dataFilterExpression=t.dataFilterExpression,o.dataFilterColumnExpressionFormControlOptions=t.dataFilterColumnExpressionFormControlOptions;const r=(0,y.chain)([t.defaultFilter,t.dataFilterExpression,this.addDataForm.controls.globalDataFilter.value]).compact().map(e=>`(${e})`).join(" AND ").value();return r&&((null===(i=e[t.name])||void 0===i?void 0:i.dataFilter)?o.dataFilter=`${null===(n=e[t.name])||void 0===n?void 0:n.dataFilter} OR (${r})`:o.dataFilter=r),e[t.name]=o,e},{})}}Zn.\u0275fac=function(e){return new(e||Zn)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](D.RxExpressionEditorService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](F.RxRecordGridUtilsService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},Zn.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Zn,selectors:[["ax-add-bundle-content-data-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](rt,7),o["\u0275\u0275viewQuery"](at,7),o["\u0275\u0275viewQuery"](st,7),o["\u0275\u0275viewQuery"](lt,7),o["\u0275\u0275viewQuery"](dt,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionsDataGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataFilterCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ignoreRulesCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.duplicateDataActionTypeCellTemplate=e.first)}},inputs:{options:"options"},decls:31,vars:28,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],["placement","bottom","appendToBody","true","maxWidth","400",1,"d-icon-right-question_circle_o",3,"adaptPopover"],["tooltipContentTemplate",""],[1,"mb-3"],[3,"formGroup"],[1,"d-flex","mb-3","justify-content-between"],[1,"add-data-record-definitions-select",3,"formControl","options","optionFormatter","multiple","selectAllButton","deselectAllButton","enableFilter","titleFormatter"],["class","d-flex ml-4",3,"options","formControl","events",4,"ngIf"],[1,"mb-3",3,"config"],["definitionsDataGrid",""],[1,"d-flex","pb-3"],["formControlName","isConfigurationDataIncluded",1,"add-data-is-configuration-data-included-checkbox","pr-3",3,"label"],["class","flex-grow-1","appendToBody","true","formControlName","duplicateConfigurationDataActionType",3,"options","optionFormatter",4,"ngIf"],["recordNameCellTemplate",""],["dataFilterCellTemplate",""],["ignoreRulesCellTemplate",""],["duplicateDataActionTypeCellTemplate",""],[3,"innerHTML"],[1,"d-flex","ml-4",3,"options","formControl","events"],["appendToBody","true","formControlName","duplicateConfigurationDataActionType",1,"flex-grow-1",3,"options","optionFormatter"],[3,"options","ngModel","disabled","events","ngModelChange"],[3,"ngModel","disabled","ngModelChange"],["appendToBody","true",3,"options","optionFormatter","ngModel","disabled","ngModelChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"span",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div"),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ct,2,3,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](10,"div",4),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerStart"](13,5),o["\u0275\u0275elementStart"](14,"div",6),o["\u0275\u0275element"](15,"adapt-rx-select",7),o["\u0275\u0275template"](16,pt,1,2,"rx-expression-form-control",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"rx-record-grid",9,10),o["\u0275\u0275elementStart"](19,"div",11),o["\u0275\u0275element"](20,"adapt-rx-checkbox",12),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275template"](22,ut,1,2,"adapt-rx-select",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](23,mt,2,3,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](25,ft,2,3,"ng-template",null,15,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](27,ht,2,2,"ng-template",null,16,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](29,gt,2,4,"ng-template",null,17,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](9);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,17,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",e),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](7,19,null==t.options?null:t.options.countTitle,o["\u0275\u0275pureFunction1"](26,vt,t.selectedDefinitions.length))," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,22,null==t.options?null:t.options.descriptionTitle)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.addDataForm),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.recordDefinitionsFormControl)("options",t.recordDefinitions)("optionFormatter",t.optionFormatter)("multiple",!0)("selectAllButton",!0)("deselectAllButton",!0)("enableFilter",!0)("titleFormatter",t.titleFormatter),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==t.options?null:t.options.showGlobalFilterExpressionEditor),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](21,24,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.include-configuration-data-in-the-package.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.addDataForm.controls.isConfigurationDataIncluded.value)}},directives:[C.AdaptPopoverDirective,E.NgControlStatusGroup,E.FormGroupDirective,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective,n.NgIf,F.RecordGridComponent,C.AdaptRxCheckboxComponent,E.FormControlName,D.ExpressionFormControlComponent,E.NgModel,C.AdaptRxSwitchComponent],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}rx-record-grid[_ngcontent-%COMP%]{height:100%}.add-data-record-definitions-select[_ngcontent-%COMP%], .add-data-is-configuration-data-included-checkbox[_ngcontent-%COMP%]{width:400px}']});const eo={duplicateDataActionTypes:{THROW_ERROR:"Ignore",CREATE_NEW_RECORD:"Create New",REPLACE:"Overwrite",MERGE:"Merge"}};class to extends h.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(x.TranslateService),this.commonDataDictionary$=(0,R.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-groups.title"),icon:"d-icon-dollar",expression:"$GROUPS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-group-ids.title"),icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-roles.title"),icon:"d-icon-dollar",expression:"$ROLES$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user-locale.title"),icon:"d-icon-dollar",expression:"$LOCALE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-week-day.title"),icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.null.title"),icon:"d-icon-dollar",expression:"$NULL$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.server-url.title"),icon:"d-icon-dollar",expression:"$SERVERURL$"}]}])}}class io extends h.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(x.TranslateService),this.commonDataDictionary$=(0,R.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.labe"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-groups.title"),icon:"d-icon-dollar",expression:"$GROUPS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-group-ids.title"),icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-roles.title"),icon:"d-icon-dollar",expression:"$ROLES$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-user-locale.title"),icon:"d-icon-dollar",expression:"$LOCALE$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.current-week-day.title"),icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.null.title"),icon:"d-icon-dollar",expression:"$NULL$"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.general-group.pill.server-url.title"),icon:"d-icon-dollar",expression:"$SERVERURL$"}]},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.common-core-fields.title"),expanded:!0,children:S.RX_RECORD_DEFINITION.coreFields.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`}))}])}}class no{constructor(e,t,i,n,o,r,a){this.injector=e,this.rxDefinitionNameService=t,this.rxExpressionEditorService=i,this.rxRecordDefinitionCacheService=n,this.rxRecordGridUtilsService=o,this.rxWizardModalComponent=r,this.translateService=a,this.duplicateDataActionTypeOptions=(0,y.keys)(eo.duplicateDataActionTypes),this.recordDefinitions=[],this.duplicateConfigurationDataActionTypeOptions=(0,y.chain)(eo.duplicateDataActionTypes).pick(["THROW_ERROR","REPLACE"]).keys().value(),this.destroyed$=new R.ReplaySubject(1),this.optionFormatter=this.optionFormatter.bind(this)}isDeleteButtonDisabled(){let e=!0;if(this.definitionsDataGrid){const t=this.definitionsDataGrid.api.getSelectedRows();e=!t.length||Boolean((0,y.find)(t,"shouldExportData"))}return e}ngOnInit(){this.dataFilterColumnExpressionConfigurator=new to(this.injector),this.globalDataFilterExpressionConfigurator=new io(this.injector),this.globalDataFilterExpressionConfigurator.configureForProperty({propertyPath:"globalDataFilter",operators:this.globalDataFilterExpressionConfigurator.getOperatorRowsByGroup(h.ExpressionOperatorGroup.All),dataDictionary$:this.globalDataFilterExpressionConfigurator.commonDataDictionary$}),this.globalDataFilterExpressionFormControlOptions={isLabelHidden:!0,dataDictionary$:this.globalDataFilterExpressionConfigurator.getDataDictionary("globalDataFilter"),operators:this.globalDataFilterExpressionConfigurator.getOperators(),clickToBuildExpressionLabel:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.global-data-filter.click-to-build-expression.label")};const e=[{fieldId:"dataSource",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label"),wrapText:!0},{fieldId:qi.definitionGridColumns.name.fieldId,title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.name.label"),wrapText:!0,visible:!1,cellTemplate:this.recordNameCellTemplate},{fieldId:"aliasName",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.alias-name.label"),visible:!1},{fieldId:"dataFilterExpression",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label"),cellTemplate:this.dataFilterCellTemplate},{fieldId:"dataFilterColumnExpressionFormControlOptions",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label"),visible:!1},{fieldId:"ignoreRuleExecution",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.ignore-rules.label"),cellTemplate:this.ignoreRulesCellTemplate},{fieldId:"duplicateDataActionType",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.duplicates.label"),cellTemplate:this.duplicateDataActionTypeCellTemplate}].filter(e=>(0,y.includes)(this.options.gridConfig.columns,e.fieldId)),t={fieldDefinitions:[{id:"dataSource",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.name.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"aliasName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"dataFilterExpression",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"dataFilterColumnExpressionFormControlOptions",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.object},{id:"ignoreRuleExecution",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"duplicateDataActionType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}].filter(e=>(0,y.includes)(this.options.gridConfig.columns,e.id))};this.rxWizardModalComponent.context$.pipe((0,b.take)(1)).subscribe(e=>{e.cache.recordDefinitions.forEach(e=>{this.dataFilterColumnExpressionConfigurator.configureForProperty({propertyPath:`dataFilterExpression:${e.name}`,operators:this.dataFilterColumnExpressionConfigurator.getOperatorRowsByGroup(h.ExpressionOperatorGroup.All),dataDictionary$:this.dataFilterColumnExpressionConfigurator.commonDataDictionary$.pipe((0,b.switchMap)(t=>this.rxRecordGridUtilsService.getAssociationDescriptors(e.name).pipe((0,b.switchMap)(i=>(0,R.forkJoin)([this.rxRecordDefinitionCacheService.getRecordDefinition(e.name),...i.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName))]).pipe((0,b.map)(n=>[t[0],{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.data-dictionary.values.definition-fields.title",{definitionName:this.rxDefinitionNameService.getDisplayName(e.name)}),expanded:!0,children:[...(0,y.chain)(n).find({name:e.name}).get("fieldDefinitions").map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`})).value(),(0,y.isEmpty)(i)?[]:{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition-associations.title"),children:i.map(e=>({label:`${this.rxDefinitionNameService.getDisplayName(e.recordDefinitionName)} (${e.label})`,children:this.getAssociationsDataDictionary(n,e.recordDefinitionName,e)}))}]}]))))))})});const t=[];this.recordDefinitions=e.cache.recordDefinitions.filter(e=>e.type!==S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom).map(e=>{const i={duplicateDataActionType:[this.options.gridConfig.defaultDuplicateDataActionType],name:e.name,dataSource:e.aliasName||this.rxDefinitionNameService.getDisplayName(e.name),shouldExportData:e.shouldExportData,ignoreRuleExecution:!1,disabled:e.shouldExportData,selected:e.shouldExportData};return i.selected&&t.push(i),i}),this.addDataForm=new E.FormGroup({globalDataFilter:new E.FormControl(null),isConfigurationDataIncluded:new E.FormControl(e.deploymentPackageDescriptor.isConfigurationDataIncluded),duplicateConfigurationDataActionType:new E.FormControl([e.deploymentPackageDescriptor.duplicateDataActionTypeForConfigurationData]),recordDefinitions:new E.FormControl(t)});const i=(0,y.cloneDeep)(e.deploymentPackageDescriptor);(0,y.assign)(i,{dataImportOptionsByRecordDefinitionName:this.getDataImportOptionsByRecordDefinitionName(t)}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i},!1)}),this.addDataForm.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor),n=i.isConfigurationDataIncluded;(0,y.assign)(i,{isConfigurationDataIncluded:e.isConfigurationDataIncluded,duplicateDataActionTypeForConfigurationData:(0,y.head)(e.duplicateConfigurationDataActionType),dataImportOptionsByRecordDefinitionName:this.getDataImportOptionsByRecordDefinitionName(e.recordDefinitions)}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0}),n===e.isConfigurationDataIncluded&&this.definitionsDataGrid.api.refresh().subscribe()}),this.recordGridConfig$=(0,R.of)({columns:e,enableRowSelection:F.RowSelectionMode.Multiple,enableFiltering:!1,recordIdField:"dataSource",styles:"flex-fill",useExternalFiltering:!1,actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.remove.label"),style:"tertiary",iconCls:"trash",disabled:this.isDeleteButtonDisabled.bind(this),actions:[{name:this.deleteDefinitionsDataFromSelection.bind(this)}]}],getRecordDefinition:()=>(0,R.of)(t),getData:()=>(0,R.of)({data:this.addDataForm.controls.recordDefinitions.value,totalSize:this.addDataForm.controls.recordDefinitions.value.length})})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}optionFormatter(e){return e.dataSource}duplicateDataActionTypesOptionFormatter(e){return eo.duplicateDataActionTypes[e]}openDataFilterColumnExpressionEditor(e,t){this.rxExpressionEditorService.openEditor({property:{path:`dataFilterExpression:${e.name}`,value:e[t],label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label")},expressionConfigurator:this.dataFilterColumnExpressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.legend.activity-result.label"),icon:"d-icon-field_text"}]}).subscribe(t=>{const i=this.addDataForm.controls.recordDefinitions.value;(0,y.find)(i,{name:e.name}).dataFilterExpression=t.value,this.addDataForm.controls.recordDefinitions.setValue(i)})}openGlobalDataFilterExpressionEditor(){this.rxExpressionEditorService.openEditor({property:{path:"globalDataFilter",value:this.addDataForm.controls.globalDataFilter.value,label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.global-data-filter-expression-editor.label")},expressionConfigurator:this.globalDataFilterExpressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]}).subscribe(e=>{this.addDataForm.controls.globalDataFilter.setValue(e.value)})}deleteDefinitionsDataFromSelection(){const e=this.definitionsDataGrid.api.getSelectedRows();this.addDataForm.controls.recordDefinitions.patchValue(this.addDataForm.controls.recordDefinitions.value.filter(t=>!(0,y.find)(e,{dataSource:t.dataSource})))}updateDataImportOptionsByRecordDefinitionName(e,t,i){const n=(0,y.cloneDeep)(this.context.deploymentPackageDescriptor);n.dataImportOptionsByRecordDefinitionName[t][i]=(0,y.isArray)(e)?(0,y.head)(e):e,this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:n})}getAssociationsDataDictionary(e,t,i){return(0,y.find)(e,{name:t}).fieldDefinitions.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'recordContext._associations.${i.associationDefinition.guid}.${i.nodeSide}[0].${e.id}'`}))}getDataImportOptionsByRecordDefinitionName(e){return e.reduce((e,t)=>{const i={duplicateDataActionType:(0,y.head)(t.duplicateDataActionType),ignoreRuleExecution:t.ignoreRuleExecution};return e[t.name]=i,e},{})}}no.\u0275fac=function(e){return new(e||no)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](D.RxExpressionEditorService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](F.RxRecordGridUtilsService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},no.\u0275cmp=o["\u0275\u0275defineComponent"]({type:no,selectors:[["ax-add-data-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](rt,5),o["\u0275\u0275viewQuery"](at,7),o["\u0275\u0275viewQuery"](st,7),o["\u0275\u0275viewQuery"](lt,7),o["\u0275\u0275viewQuery"](dt,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionsDataGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataFilterCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ignoreRulesCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.duplicateDataActionTypeCellTemplate=e.first)}},inputs:{context:"context",options:"options"},decls:28,vars:26,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],[1,"mb-3"],[3,"formGroup"],[1,"d-flex","mb-3","justify-content-between"],[1,"add-data-record-definitions-select",3,"formControl","options","optionFormatter","multiple","selectAllButton","deselectAllButton","enableFilter"],["class","d-flex",3,"options","formControl","events",4,"ngIf"],[1,"mb-3",3,"config"],["definitionsDataGrid",""],[1,"d-flex","pb-3"],["formControlName","isConfigurationDataIncluded",1,"add-data-is-configuration-data-included-checkbox","pr-3",3,"label"],["class","flex-grow-1","appendToBody","true","formControlName","duplicateConfigurationDataActionType",3,"options","optionFormatter",4,"ngIf"],["recordNameCellTemplate",""],["dataFilterCellTemplate",""],["ignoreRulesCellTemplate",""],["duplicateDataActionTypeCellTemplate",""],[1,"d-flex",3,"options","formControl","events"],["appendToBody","true","formControlName","duplicateConfigurationDataActionType",1,"flex-grow-1",3,"options","optionFormatter"],[3,"options","ngModel","events","ngModelChange"],[3,"ngModel","ngModelChange"],["appendToBody","true",3,"options","optionFormatter","ngModel","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",2),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerStart"](10,3),o["\u0275\u0275elementStart"](11,"div",4),o["\u0275\u0275element"](12,"adapt-rx-select",5),o["\u0275\u0275template"](13,yt,1,2,"rx-expression-form-control",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](14,"rx-record-grid",7,8),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275element"](17,"adapt-rx-checkbox",10),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275template"](19,bt,1,2,"adapt-rx-select",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](20,xt,2,3,"ng-template",null,12,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](22,Ct,2,2,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](24,St,2,1,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](26,Dt,2,3,"ng-template",null,15,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,15,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](6,17,null==t.options?null:t.options.countTitle,o["\u0275\u0275pureFunction1"](24,vt,null==t.addDataForm||null==t.addDataForm.controls||null==t.addDataForm.controls.recordDefinitions||null==t.addDataForm.controls.recordDefinitions.value?null:t.addDataForm.controls.recordDefinitions.value.length))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,20,null==t.options?null:t.options.descriptionTitle)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.addDataForm),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.addDataForm.controls.recordDefinitions)("options",t.recordDefinitions)("optionFormatter",t.optionFormatter)("multiple",!0)("selectAllButton",!0)("deselectAllButton",!0)("enableFilter",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==t.options?null:t.options.showGlobalFilterExpressionEditor),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](18,22,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.include-configuration-data-in-the-package.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.addDataForm.controls.isConfigurationDataIncluded.value))},directives:[E.NgControlStatusGroup,E.FormGroupDirective,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective,n.NgIf,F.RecordGridComponent,C.AdaptRxCheckboxComponent,E.FormControlName,D.ExpressionFormControlComponent,E.NgModel,C.AdaptRxSwitchComponent],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}rx-record-grid[_ngcontent-%COMP%]{height:100%}.add-data-record-definitions-select[_ngcontent-%COMP%], .add-data-is-configuration-data-included-checkbox[_ngcontent-%COMP%]{width:400px}']});class oo{constructor(e,t){this.rxWizardModalComponent=e,this.axBundleDeploymentService=t}download(){this.rxWizardModalComponent.context$.pipe((0,b.take)(1),(0,b.switchMap)(e=>this.axBundleDeploymentService.downloadContentPackage(e.deploymentPackageDescriptor.id,e.packageGuid))).subscribe()}}oo.\u0275fac=function(e){return new(e||oo)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](Wn))},oo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:oo,selectors:[["ax-download-wizard-step"]],decls:6,vars:6,consts:[[1,"mt-0"],["adapt-button","","type","button","btn-type","primary","rx-id","download-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"h5",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.download()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,4,"com.bmc.arsys.rx.client.common.download.label"),"\n"))},directives:[C.AdaptButtonComponent],pipes:[x.TranslatePipe],encapsulation:2});class ro{constructor(e,t){this.rxWizardModalComponent=e,this.translateService=t,this.versionRegexp=/^((\d+\.\d+)(\.\d+)?)(.*)$/,this.isApplication$=this.rxWizardModalComponent.context$.pipe((0,b.take)(1),(0,b.pluck)("bundleDetails","isApplication")),this.bundlesList$=this.rxWizardModalComponent.context$.pipe((0,b.take)(1),(0,b.map)(e=>e.bundleDescriptors.sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)).reduce((t,i)=>((0,y.includes)([h.RX_APPLICATION.standardlib,h.RX_APPLICATION.innovationStudioBundleId,h.RX_APPLICATION.platformBundleId,e.bundleDetails.id],i.id)||t.push(Object.assign({},i)),t),[])),(0,b.shareReplay)(1)),this.destroyed$=new R.ReplaySubject(1),this.versionIncrementValidator=e=>t=>{let i=!0;return(null==e?void 0:e.value)&&t.value&&this.versionRegexp.test(t.value)&&(i=this.isValidateIncrementation(e.value,t.value)),i?null:{invalidVersion:{value:t.value,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.version-increment.error.message")}}}}ngOnInit(){(0,R.combineLatest)([this.bundlesList$,this.rxWizardModalComponent.context$]).pipe((0,b.take)(1)).subscribe(([e,t])=>{var i,n,o,r,a,s;const l=e.filter(e=>(0,y.some)(t.bundleDetails.dependentBundles,{id:e.id})),d={};(null===(n=null===(i=this.options)||void 0===i?void 0:i.fields)||void 0===n?void 0:n.bundleUpdateFromVersion)&&(d.bundleUpdateFromVersion=new E.FormControl(t.deploymentPackageDescriptor.bundleUpdateFromVersion)),(null===(r=null===(o=this.options)||void 0===o?void 0:o.fields)||void 0===r?void 0:r.customPackageName)&&(d.customPackageName=new E.FormControl(t.deploymentPackageDescriptor.customPackageName)),Object.assign(d,{id:new E.FormControl(t.bundleDetails.id),friendlyName:new E.FormControl(t.deploymentPackageDescriptor.friendlyName,[E.Validators.required]),version:new E.FormControl(t.deploymentPackageDescriptor.version,(0,y.compact)([E.Validators.required,E.Validators.pattern(this.versionRegexp),(null===(s=null===(a=this.options)||void 0===a?void 0:a.fields)||void 0===s?void 0:s.bundleUpdateFromVersion)?this.versionIncrementValidator(d.bundleUpdateFromVersion):null])),description:new E.FormControl(t.deploymentPackageDescriptor.description,[E.Validators.required]),dependentBundles:new E.FormControl(l)}),this.optionsForm=new E.FormGroup(d);const c=(0,y.cloneDeep)(t.deploymentPackageDescriptor);(0,y.assign)(c,{friendlyName:t.bundleDetails.friendlyName,version:t.bundleDetails.version,description:t.bundleDetails.description,id:t.bundleDetails.id,dependentBundles:l.map(e=>({id:e.id,name:e.friendlyName,version:e.version}))}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:c},!1)}),this.optionsForm.valueChanges.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.context$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);(0,y.assign)(i,e),i.dependentBundles=e.dependentBundles.map(e=>({id:e.id,name:e.friendlyName,version:e.version})),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i}),this.optionsForm.valid?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}optionFormatter(e){return`${e.friendlyName}, ${e.version}`}isValidateIncrementation(e,t){let i=!1;const n=this.getBaseVersion(t),o=this.getBaseVersion(e);if(n){const e=n.split("."),t=o.split("."),r=e.length===t.length?+(0,y.last)(e)>=+(0,y.last)(t):+(0,y.last)((0,y.initial)(e))>=+(0,y.last)(t),a=3===t.length?2:3,s=2===a?"(\\.\\d+)":"(\\.\\d+)(\\.\\d+)?";i=new RegExp("^"+o.match(this.versionRegexp)[a]+s+"$").test(n)&&r}return i}getBaseVersion(e){const t=e.match(this.versionRegexp);return t?t[1]:null}}ro.\u0275fac=function(e){return new(e||ro)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},ro.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ro,selectors:[["ax-options-wizard-step"]],inputs:{options:"options"},decls:25,vars:37,consts:[[1,"mt-0"],[3,"formGroup"],[1,"row","h-100"],[1,"col-6"],["class","d-block form-group","formControlName","customPackageName","name","customPackageName","required","true",3,"label",4,"ngIf"],["formControlName","friendlyName","required","true","name","friendlyName",1,"d-block","form-group",3,"label","readonly","disabledStyleForReadonlyState"],["class","d-block form-group","formControlName","bundleUpdateFromVersion","name","bundleUpdateFromVersion",3,"disabledStyleForReadonlyState","label","pattern","readonly","tooltip",4,"ngIf"],["formControlName","version","required","true","name","version",1,"d-block","form-group",3,"label","readonly","disabledStyleForReadonlyState","pattern","tooltip"],["formControlName","description","required","true","name","description",1,"d-block","form-group",3,"label","readonly","disabledStyleForReadonlyState"],["formControlName","id","name","id",1,"d-block","form-group",3,"label","readonly","disabledStyleForReadonlyState"],["class","col-6 d-flex flex-column h-100",4,"ngIf"],["bundleUpdateFromVersionTooltip",""],["versionTooltip",""],["defaultVersionTooltip",""],["formControlName","customPackageName","name","customPackageName","required","true",1,"d-block","form-group",3,"label"],["formControlName","bundleUpdateFromVersion","name","bundleUpdateFromVersion",1,"d-block","form-group",3,"disabledStyleForReadonlyState","label","pattern","readonly","tooltip"],[1,"col-6","d-flex","flex-column","h-100"],[1,"h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","popupMaxHeight","formControl","label"],[3,"innerHTML"],[3,"innerHTML",4,"ngIf","ngIfElse"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"h5",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerStart"](3,1),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275template"](6,It,2,3,"adapt-rx-textfield",4),o["\u0275\u0275element"](7,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275template"](10,wt,2,9,"adapt-rx-textfield",6),o["\u0275\u0275element"](11,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275element"](13,"adapt-rx-textfield",8),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275element"](15,"adapt-rx-textfield",9),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275pipe"](17,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](18,Et,4,13,"div",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](19,Ft,2,3,"ng-template",null,11,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](21,Tt,1,2,"ng-template",null,12,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](23,Ot,2,3,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](22);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,21,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.optionsForm),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",null==t.options?null:t.options.fields.customPackageName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](8,23,o["\u0275\u0275pipeBind1"](9,25,t.isApplication$)?"com.bmc.arsys.rx.client.common.application-name.label":"com.bmc.arsys.rx.client.common.library-name.label"))("readonly",null==t.options||null==t.options.fields.friendlyName?null:t.options.fields.friendlyName.disabled)("disabledStyleForReadonlyState",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",null==t.options||null==t.options.fields?null:t.options.fields.bundleUpdateFromVersion),o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("mb-0",null==t.optionsForm.controls.version.errors?null:t.optionsForm.controls.version.errors.invalidVersion),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](12,27,(null==t.options||null==t.options.fields.version?null:t.options.fields.version.label)||"com.bmc.arsys.rx.client.common.version.label"))("readonly",null==t.options||null==t.options.fields.version?null:t.options.fields.version.disabled)("disabledStyleForReadonlyState",!0)("pattern",t.versionRegexp)("tooltip",null!=t.options&&(null!=t.options.fields.version&&t.options.fields.version.hideTooltip)?null:o["\u0275\u0275pureFunction1"](35,Rt,e)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](14,29,"com.bmc.arsys.rx.client.common.description.label"))("readonly",null==t.options||null==t.options.fields.description?null:t.options.fields.description.disabled)("disabledStyleForReadonlyState",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](16,31,o["\u0275\u0275pipeBind1"](17,33,t.isApplication$)?"com.bmc.arsys.rx.client.common.application-id.label":"com.bmc.arsys.rx.client.common.library-id.label"))("readonly",!0)("disabledStyleForReadonlyState",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!(null!=t.options&&(null!=t.options.fields.dependentBundlesList&&t.options.fields.dependentBundlesList.hidden)))}},directives:[E.NgControlStatusGroup,E.FormGroupDirective,n.NgIf,C.AdaptRxTextfieldComponent,E.NgControlStatus,E.FormControlName,E.RequiredValidator,E.PatternValidator,C.AdaptRxSelectComponent,E.FormControlDirective],pipes:[x.TranslatePipe,n.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.ax-dependent-bundles-list[_ngcontent-%COMP%]{overflow-y:scroll}"]});class ao{constructor(e,t){this.rxWizardModalComponent=e,this.rxArrayUtilsService=t,this.recordDefinitions=[]}ngOnInit(){this.rxWizardModalComponent.context$.pipe((0,b.take)(1)).subscribe(e=>{var t;const i=(0,y.cloneDeep)(e.deploymentPackageDescriptor);if(null===(t=this.options)||void 0===t?void 0:t.importRecordDefinitionFromCache)i.dataImportOptionsByRecordDefinitionName=(0,y.reduce)((0,y.filter)(e.cache.recordDefinitions,"shouldExportData"),(e,t,i)=>(this.recordDefinitions.push({name:t.name,importOrder:i}),e[t.name]={importOrder:i},e),{});else{let t=0;(0,y.forEach)(i.dataImportOptionsByRecordDefinitionName,(i,n)=>{const o=(0,y.find)(e.cache.recordDefinitions,{name:n});this.recordDefinitions.push({name:n,importOrder:t++,disallowChangeOrder:o.disallowChangeOrder})})}this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i},!1),this.updateIndexes(!1)}),this.rxWizardModalComponent.context$.pipe((0,b.skip)(1)).subscribe(e=>{let t=this.recordDefinitions.length;this.recordDefinitions=(0,y.sortBy)((0,y.transform)(e.deploymentPackageDescriptor.dataImportOptionsByRecordDefinitionName,(i,n,o)=>{let r;const a=(0,y.find)(this.recordDefinitions,{name:o}),s=(0,y.find)(e.cache.recordDefinitions,{name:o});(0,y.isUndefined)(s.initialFixedOrder)||s.initialFixedOrder!==(null==a?void 0:a.importOrder)?a&&(r=a.importOrder):r=s.initialFixedOrder,i.push({name:o,importOrder:(0,y.isUndefined)(r)?t++:r,disallowChangeOrder:s.disallowChangeOrder,selected:null==a?void 0:a.selected})},[]),"importOrder")})}isMoveDownButtonDisabled(){return!this.recordDefinitions.length||(0,y.last)(this.recordDefinitions).selected||!(0,y.find)(this.recordDefinitions,"selected")}isMoveUpButtonDisabled(){return!this.recordDefinitions.length||(0,y.head)(this.recordDefinitions).selected||!(0,y.find)(this.recordDefinitions,"selected")}moveDown(){this.recordDefinitions=this.rxArrayUtilsService.moveArrayElements(this.recordDefinitions,this.getSelectedIndexes(),1),this.updateIndexes()}moveUp(){this.recordDefinitions=this.rxArrayUtilsService.moveArrayElements(this.recordDefinitions,this.getSelectedIndexes(),-1),this.updateIndexes()}trackBy(e,t){return t.name}getSelectedIndexes(){return this.recordDefinitions.reduce((e,t,i)=>(t.selected&&e.push(i),e),[])}updateIndexes(e=!0){this.rxWizardModalComponent.context$.pipe((0,b.take)(1)).subscribe(t=>{const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);this.recordDefinitions.forEach((e,t)=>{e.importOrder=t,i.dataImportOptionsByRecordDefinitionName[e.name].importOrder=t}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0},e)})}}ao.\u0275fac=function(e){return new(e||ao)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](M.RxArrayUtilsService))},ao.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ao,selectors:[["ax-order-data-wizard-step"]],inputs:{options:"options"},decls:15,vars:11,consts:[[1,"mt-0"],[1,"d-flex","row"],["adapt-button","","btn-type","tertiary","rx-id","move-up-button",1,"d-icon-triangle_up_adapt",3,"disabled","click"],["adapt-button","","btn-type","tertiary","rx-id","move-down-button",1,"d-icon-triangle_down_adapt",3,"disabled","click"],[1,"d-flex","flex-column","border","h-100","p-2","record-definitions-list"],[1,"d-flex","justify-content-center"],["class","align-self-center","type","objects",3,"label",4,"ngIf"],["class","checkbox p-2 text-break",4,"ngFor","ngForOf","ngForTrackBy"],["type","objects",1,"align-self-center",3,"label"],[1,"checkbox","p-2","text-break"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],[1,"checkbox__item"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"h5",0),o["\u0275\u0275text"](1,"Data"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275text"](3,"Move data items up or down to set the order in which the data will be loaded onto target systems:"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",1),o["\u0275\u0275elementStart"](5,"button",2),o["\u0275\u0275listener"]("click",function(){return t.moveUp()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",3),o["\u0275\u0275listener"]("click",function(){return t.moveDown()}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",4),o["\u0275\u0275elementStart"](12,"div",5),o["\u0275\u0275template"](13,Nt,2,3,"adapt-empty-state",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,At,6,5,"div",7),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",t.isMoveUpButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,7,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.order-data.move-up.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isMoveDownButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,9,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.order-data.move-down.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",!t.recordDefinitions.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.recordDefinitions)("ngForTrackBy",t.trackBy))},directives:[C.AdaptButtonComponent,n.NgIf,n.NgForOf,C.AdaptEmptyStateComponent,E.CheckboxControlValueAccessor,E.NgControlStatus,E.NgModel],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.record-definitions-list[_ngcontent-%COMP%]{overflow-y:auto}"]});class so{constructor(e,t,i,n,o,r,a){this.httpClient=e,this.axBundleDeploymentService=t,this.rxCommandFactoryService=i,this.rxServerErrorHandlerService=n,this.rxUtilityModalsService=o,this.rxWizardModalComponent=r,this.translateService=a,this.queueCreateDeploymentPackageCommand=this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.bundledeploy.command.QueueCreateDeploymentPackageCommand"),this.destroyed$=new R.ReplaySubject(1),this.operationStatusSubject=new R.BehaviorSubject(""),this.operationStatus$=this.operationStatusSubject.asObservable(),this.operationStatusMessage=null,this.operationStatuses={pending:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.status.pending.label"),failed:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.status.failed.label"),succeeded:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.status.succeeded.label")},this.isApprovalConfigurationDataIncluded$=this.rxWizardModalComponent.context$.pipe((0,b.map)(e=>!(0,y.isEmpty)(e.deploymentPackageDescriptor.approvalConfigurationQueryOptions))),this.isConfigurationDataIncluded$=this.rxWizardModalComponent.context$.pipe((0,b.map)(e=>this.options.isInstallOperation||e.deploymentPackageDescriptor.isConfigurationDataIncluded)),this.isDataImportOptionsByRecordDefinitionNameIncluded$=this.rxWizardModalComponent.context$.pipe((0,b.map)(e=>this.options.isInstallOperation||!(0,y.isEmpty)(e.deploymentPackageDescriptor.dataImportOptionsByRecordDefinitionName))),this.isDefinitionsToDeleteByTypeIncluded$=this.rxWizardModalComponent.context$.pipe((0,b.map)(e=>this.options.isInstallOperation||!(0,y.isEmpty)(e.deploymentPackageDescriptor.definitionsToDeleteByType))),this.isDefinitionsToDeployByTypeIncluded$=this.rxWizardModalComponent.context$.pipe((0,b.map)(e=>this.options.isInstallOperation||!(0,y.isEmpty)(e.deploymentPackageDescriptor.definitionsToDeployByType))),this.isPackageDataEmpty$=(0,R.combineLatest)([this.isDefinitionsToDeployByTypeIncluded$,this.isDataImportOptionsByRecordDefinitionNameIncluded$,this.isConfigurationDataIncluded$,this.isDefinitionsToDeleteByTypeIncluded$]).pipe((0,b.map)(e=>e.every(e=>!e))),this.isCreatePackageButtonDisabled$=this.rxWizardModalComponent.context$.pipe((0,b.withLatestFrom)(this.isPackageDataEmpty$,this.operationStatus$),(0,b.map)(([e,t,i])=>i===this.operationStatuses.pending||!e.isPackageDataModified||t))}ngOnInit(){var e;this.isAllPackageDataIncluded$=(0,R.combineLatest)([this.isDefinitionsToDeployByTypeIncluded$,this.isDataImportOptionsByRecordDefinitionNameIncluded$,this.isConfigurationDataIncluded$,this.isDefinitionsToDeleteByTypeIncluded$].concat((null===(e=this.options)||void 0===e?void 0:e.isContentPackageOperation)?[this.isApprovalConfigurationDataIncluded$]:[])).pipe((0,b.map)(e=>e.every(Boolean))),this.rxWizardModalComponent.steps$.pipe((0,b.withLatestFrom)(this.rxWizardModalComponent.tabIndex$,this.operationStatus$),(0,b.takeUntil)(this.destroyed$)).subscribe(([e,t,i])=>{"package"===e[t].id&&i!==this.operationStatuses.succeeded&&this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}createPackage(e=!1){this.rxWizardModalComponent.context$.pipe((0,b.take)(1),(0,b.tap)(()=>{var e;this.rxWizardModalComponent.api.updateContext({isPackageDataModified:!1}),this.operationStatusSubject.next(this.operationStatuses.pending),(null===(e=this.options)||void 0===e?void 0:e.isContentPackageOperation)&&(this.rxWizardModalComponent.api.setFinishButtonLabel(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.close-and-continue-packaging.label")),this.rxWizardModalComponent.api.complete())}),(0,b.map)(t=>{const i={bundlePackageDescriptor:(0,y.cloneDeep)(t.deploymentPackageDescriptor),shouldForce:e};return(0,y.forEach)(i.bundlePackageDescriptor.dataImportOptionsByRecordDefinitionName,e=>{delete e.dataFilterColumnExpressionFormControlOptions,delete e.dataFilterExpression,delete e.defaultFilter}),i}),(0,b.switchMap)(e=>this.queueCreateDeploymentPackageCommand.execute(e,{responseType:"text"})),(0,b.tap)(e=>{this.guid=(0,y.last)(e.split("/")),this.rxWizardModalComponent.api.updateContext({packageGuid:this.guid})}),(0,b.switchMap)(()=>this.axBundleDeploymentService.pollDeploymentStatus(this.guid,"/api/rx/application/bundle/createpackagestatus").pipe((0,b.takeUntil)(this.destroyed$))),(0,b.tap)(e=>{e.isFinished?(this.operationStatusSubject.next(this.operationStatuses.succeeded),this.rxWizardModalComponent.api.setFinishButtonLabel(this.translateService.instant("com.bmc.arsys.rx.client.common.close.label")),this.rxWizardModalComponent.api.complete(),this.rxWizardModalComponent.api.enableNextButton()):e.errorMessage&&(this.operationStatusSubject.next(this.operationStatuses.failed),this.operationStatusMessage=e.errorMessage)}),(0,b.catchError)(e=>{this.operationStatusSubject.next(this.operationStatuses.failed),this.rxWizardModalComponent.api.disableNextButton(),this.rxWizardModalComponent.api.renew();const t=this.rxServerErrorHandlerService.getServerResponseErrorDetails(e.error);return(0,y.some)(t,{messageNumber:qi.errorCodes.packageCreationAlreadyInProgress})&&this.rxUtilityModalsService.confirm(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.creation-operation-in-progress.message")).then(e=>{e?this.createPackage(!0):this.rxWizardModalComponent.api.updateContext({isPackageDataModified:!0})}),R.EMPTY})).subscribe()}}so.\u0275fac=function(e){return new(e||so)(o["\u0275\u0275directiveInject"](w.HttpClient),o["\u0275\u0275directiveInject"](Wn),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxServerErrorHandlerService),o["\u0275\u0275directiveInject"](I.RxUtilityModalsService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},so.\u0275cmp=o["\u0275\u0275defineComponent"]({type:so,selectors:[["ax-package-wizard-step"]],inputs:{options:"options"},decls:17,vars:24,consts:[[1,"mt-0"],["adapt-button","","btn-type","primary","rx-id","create-package-button","type","button",3,"disabled","click"],["rx-id","empty-package-message",1,"empty-package-warning","d-icon-left-exclamation_triangle",3,"hidden"],[4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"hidden"],[1,"mt-4"],[3,"config",4,"ngIf"],[1,"mb-3"],[1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-intermediate","w-100"],[3,"config"],["rx-id","messages-textarea","rows","13",3,"label","ngModel","disabledStyleForReadonlyState","readonly",4,"ngIf"],["rx-id","messages-textarea","rows","13",3,"label","ngModel","disabledStyleForReadonlyState","readonly"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"h5",0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createPackage()}),o["\u0275\u0275pipe"](4,"async"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"span",2),o["\u0275\u0275pipe"](8,"async"),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,Pt,25,33,"ng-container",3),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275template"](13,jt,25,33,"ng-container",3),o["\u0275\u0275pipe"](14,"async"),o["\u0275\u0275template"](15,Gt,4,3,"div",4),o["\u0275\u0275pipe"](16,"async")),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,8,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",o["\u0275\u0275pipeBind1"](4,10,t.isCreatePackageButtonDisabled$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,12,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.create-package.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!o["\u0275\u0275pipeBind1"](8,14,t.isPackageDataEmpty$)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,16,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.empty-package.message"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!o["\u0275\u0275pipeBind1"](12,18,t.isPackageDataEmpty$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!o["\u0275\u0275pipeBind1"](14,20,t.isAllPackageDataIncluded$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](16,22,t.operationStatus$)))},directives:[C.AdaptButtonComponent,n.NgIf,C.AdaptAlertComponent,C.AdaptRxTextareaComponent,E.NgControlStatus,E.NgModel],pipes:[x.TranslatePipe,n.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.empty-package-warning[_ngcontent-%COMP%]{margin-left:15px}.empty-package-warning[_ngcontent-%COMP%]:before{color:#f1b521}']});class lo{constructor(e,t,i,n,o){this.rxDataPageService=e,this.rxDefinitionNameService=t,this.rxSessionExpirationService=i,this.translateService=n,this.rxWizardModalComponent=o,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){var e;const t=[{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.record-definition.label"),fieldId:"recordDefinitionName",sortable:{direction:F.ColumnSortDirection.Asc,priority:0}},{title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-approval-configurations.flow-group.label"),fieldId:"flowGroupName",sortable:{direction:F.ColumnSortDirection.Asc,priority:1}}],i={fieldDefinitions:[{id:"recordDefinitionName",resourceType:S.RX_RECORD_DEFINITION.dataTypes.character.resourceType},{id:"flowGroupName",resourceType:S.RX_RECORD_DEFINITION.dataTypes.character.resourceType}]};this.recordGridConfig$=(0,R.of)({columns:t,enableColumnSelection:!1,enableRowSelection:null===(e=this.options.gridConfig)||void 0===e?void 0:e.enableRowSelection,recordIdField:"definitionNameWithFlowGroup",styles:"flex-fill",useExternalFiltering:!1,expandGroups:!0,getRecordDefinition:()=>(0,R.of)(i),getData:()=>(this.rxWizardModalComponent.api.disableNextButton(),this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>this.rxDataPageService.withType("com.bmc.arsys.rx.approval.application.datapage.ApprovalConfigurationsDataPageQuery").get({params:{startIndex:-1,pageSize:0,bundleId:this.context.deploymentPackageDescriptor.id}}).pipe((0,b.map)(e=>{this.selectedDefinitionCount=0;const t=(0,y.reduce)(e.data[0],(e,t,i)=>{const n=this.context.bundleFriendlyNamesById[this.rxDefinitionNameService.getBundleId(i)],o=this.rxDefinitionNameService.getDisplayName(i);let r=(0,y.find)(e,{groupValue:n});return r?t.forEach(e=>{r.items.push({definitionName:i,bundleName:n,recordDefinitionName:o,flowGroupName:e,definitionNameWithFlowGroup:`${e}:${i}`})}):(r={groupValue:n,groupField:"bundleName",items:t.map(e=>({definitionName:i,bundleName:n,recordDefinitionName:o,flowGroupName:e,definitionNameWithFlowGroup:`${e}:${i}`}))},e.push(r)),e},[]);return{data:t,totalSize:t.length}})))))}),(0,R.combineLatest)([this.recordGrid.rowSelectionChanged,this.rxWizardModalComponent.context$.pipe((0,b.take)(1))]).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.selectedDefinitionCount=e.length;const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);i.approvalConfigurationQueryOptions=(0,y.chain)(e).groupBy("definitionName").map((e,t)=>({recordDefinitionName:t,flowGroups:(0,y.map)(e,"flowGroupName")})).value(),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0},this.selectedDefinitionCount>0)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onDataLoaded(){this.rxWizardModalComponent.api.enableNextButton()}}lo.\u0275fac=function(e){return new(e||lo)(o["\u0275\u0275directiveInject"](h.RxDataPageFactoryService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent))},lo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:lo,selectors:[["ax-select-approval-configurations-wizard-step"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{context:"context",options:"options"},decls:11,vars:13,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],[1,"mb-3"],[3,"config","dataLoaded"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",2),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"rx-record-grid",3),o["\u0275\u0275listener"]("dataLoaded",function(){return t.onDataLoaded()}),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-approval-configurations.approval-configurations.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](6,6,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-approval-configurations.approval-configurations-count.label",o["\u0275\u0275pureFunction1"](11,vt,t.selectedDefinitionCount))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-approval-configurations.selected-approval-configurations.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[F.RecordGridComponent],pipes:[x.TranslatePipe],styles:[we]});class co{constructor(e,t,i,n,o,r,a,s){this.rxBundleCacheService=e,this.rxDataPageService=t,this.rxDefinitionNameService=i,this.rxRecordDefinitionDataPageService=n,this.rxSessionExpirationService=o,this.rxStringService=r,this.rxWizardModalComponent=a,this.translateService=s,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){var e;this.currentBundleId=this.rxBundleCacheService.bundleId,this.rxWizardModalComponent.api.updateContext({cache:{}},!1);const t=[{title:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label"),fieldId:"displayType",filterable:!1,sortable:{direction:F.ColumnSortDirection.Asc,priority:0}},{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"displayName",searchable:!1,filterable:!1,visible:!1},{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"definitionTypeWithName",cellTemplate:this.displayTypeWithCellTemplate},{title:this.translateService.instant("com.bmc.arsys.rx.client.bundle-name.label"),fieldId:"bundleName",visible:!1,filterable:!1,sortable:{direction:F.ColumnSortDirection.Asc,priority:1}},qi.definitionGridColumns.lastChangedBy,Object.assign(Object.assign({},qi.definitionGridColumns.lastUpdateTime),{sortable:{direction:F.ColumnSortDirection.Asc,priority:2}})].map(e=>Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)})),i={fieldDefinitions:[{id:"displayType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"displayName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"definitionTypeWithName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"bundleName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime}]},n={propertySelection:["name","lastUpdateTime","lastChangedBy"]},o={propertySelection:[...n.propertySelection,"shouldExportData"]},r={excludeExtensionViews:!1,propertySelection:[...n.propertySelection]},a={requireDependent:!0,recursive:!0,propertySelection:[...n.propertySelection,"internal","type"]};this.recordGridConfig$=(0,R.of)({columns:t,enableColumnSelection:!1,enableFiltering:!0,enableRowSelection:(null===(e=this.options.gridConfig)||void 0===e?void 0:e.enableRowSelection)||null,recordIdField:"definitionTypeWithName",styles:"flex-fill",useExternalFiltering:!1,expandGroups:!0,getRecordDefinition:()=>(0,R.of)(i),getData:e=>(this.rxWizardModalComponent.api.disableNextButton(),this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>(0,R.combineLatest)([this.rxWizardModalComponent.context$.pipe((0,b.take)(1)),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentAssociationDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentDocumentDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentEventDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentEventStatisticsDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentNamedListDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentProcessDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentRecordDefinitionDataPageQuery").get({params:o}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentRuleDefinitionDataPageQuery").get({params:n}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentViewDefinitionDataPageQuery").get({params:r}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentWebApiDefinitionDataPageQuery").get({params:n}),this.rxRecordDefinitionDataPageService.get({params:a}),this.rxDataPageService.withType("com.bmc.arsys.rx.application.bundle.datapage.BundleContentRecordInstanceProviderDataPageQuery").get({params:n})]).pipe((0,b.map)(([e,t,i,n,o,r,a,s,l,d,c,p,u])=>{const m="com.bmc.arsys",f=u.data.reduce((t,i,n)=>(i.selected=!0,i.initialFixedOrder=n,i.internal||(0,y.startsWith)(i.name,m)&&!(0,y.startsWith)(this.currentBundleId,m)||(i.defaultFilter=i.dataFilter,i.dataFilter=null,i.duplicateDataActionType=this.options.gridConfig.defaultDuplicateDataActionType,i.ignoreRuleExecution=!1,i.bundleName=e.bundleFriendlyNamesById[this.rxDefinitionNameService.getBundleId(i.name)],t.push(i)),t),[]),g=p.data.filter(e=>!(0,y.find)(f,{name:e.name})).reduce((t,i)=>(i.internal||(0,y.startsWith)(i.name,m)&&!(0,y.startsWith)(this.currentBundleId,m)||(i.defaultFilter=i.dataFilter,i.dataFilter=null,i.duplicateDataActionType=this.options.gridConfig.defaultDuplicateDataActionType,i.ignoreRuleExecution=!1,i.bundleName=e.bundleFriendlyNamesById[this.rxDefinitionNameService.getBundleId(i.name)],t.push(i)),t),[]),v=[...f,...g];this.rxWizardModalComponent.api.updateContext({cache:{recordDefinitions:(0,y.cloneDeep)(v)}},!1),this.selectedDefinitionCount=0;const b=(0,y.reduce)({association:t,document:i,event:n,eventStatistics:o,namedList:r,process:a,record:s,rule:l,view:d,webApi:c},(t,i,n)=>{const o=this.rxStringService.prettify(n),r=i.data.reduce((t,i)=>{if(i.customizationPerspective!==h.RX_OVERLAY.operationTypes.notCustomizedInThisOverlayGroup){i.type=n,i.displayType=o,i.displayName=this.rxDefinitionNameService.getDisplayName(i.name),i.definitionTypeWithName=`${n}:${i.name}`,i.bundleId=this.rxDefinitionNameService.getBundleId(i.name),i.bundleFriendlyName=e.bundleFriendlyNamesById[i.bundleId],i.bundleIdWithDefinitionType=`${i.bundleId}:${n}`;let r=(0,y.find)(t,{groupValue:i.bundleIdWithDefinitionType});r?r.items.push(i):(r={groupTitle:i.bundleFriendlyName,groupValue:i.bundleIdWithDefinitionType,groupField:"bundleName",items:[i]},t.push(r))}return t},[]);return t.concat(r.length?[{groupValue:o,groupField:"displayType",items:r}]:[])},[]);return{data:b,totalSize:b.length}})))))}),(0,R.combineLatest)([this.recordGrid.rowSelectionChanged,this.rxWizardModalComponent.context$.pipe((0,b.take)(1))]).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.selectedDefinitionCount=e.length;const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);i.definitionsToDeployByType=e.reduce((e,t)=>{var i;const n=qi.definitionTypes[t.type];return e[n]=null!==(i=e[n])&&void 0!==i?i:[],e[n].push(t.name),e},{}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0},this.selectedDefinitionCount>0)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onDataLoaded(){this.rxWizardModalComponent.api.enableNextButton()}}co.\u0275fac=function(e){return new(e||co)(o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxDataPageFactoryService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](M.RxStringService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},co.\u0275cmp=o["\u0275\u0275defineComponent"]({type:co,selectors:[["ax-select-bundle-content-definitions-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),o["\u0275\u0275viewQuery"](zt,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.displayTypeWithCellTemplate=e.first)}},inputs:{options:"options"},decls:13,vars:14,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],[1,"mb-3"],[3,"config","dataLoaded"],["displayTypeWithCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",2),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"rx-record-grid",3),o["\u0275\u0275listener"]("dataLoaded",function(){return t.onDataLoaded()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,Ut,2,3,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.customized-definitions.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](6,6,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.definitions-count.label",o["\u0275\u0275pureFunction2"](11,qt,t.selectedDefinitionCount,t.options.displayName.toLowerCase()))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-bundle-content-definitions.select-customized-definitions-to-include-in-the-package-content-package.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[F.RecordGridComponent],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe],styles:[we]});class po extends h.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.definitionhistory.datapage.DefinitionHistoryDataPageQuery"),this.injector=e}}po.\u0275fac=function(e){return new(e||po)(o["\u0275\u0275inject"](o.Injector))},po.\u0275prov=o["\u0275\u0275defineInjectable"]({token:po,factory:po.\u0275fac,providedIn:"root"});class uo{constructor(e,t,i,n,o,r){this.definitionHistoryDataPageService=e,this.rxDefinitionNameService=t,this.rxSessionExpirationService=i,this.rxStringService=n,this.rxWizardModalComponent=o,this.translateService=r,this.selectedDefinitionCount=0,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){const e=[{title:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label"),fieldId:"displayType",sortable:{priority:0,direction:F.ColumnSortDirection.Asc},filterable:!1},{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"objectName",wrapText:!0,cellTemplate:this.recordNameCellTemplate},{fieldId:"createdBy",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-by.label")},{fieldId:"createDate",title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-date.label"),sortable:{priority:2,direction:F.ColumnSortDirection.Asc}},{fieldId:"bundleName",title:this.translateService.instant("com.bmc.arsys.rx.client.bundle-name.label"),sortable:{priority:1,direction:F.ColumnSortDirection.Asc},filterable:!1,visible:!1}].map(e=>Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)})),t={fieldDefinitions:[{id:"objectName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"createdBy",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"createDate",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:"displayType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"bundleName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]};(0,R.combineLatest)([this.recordGrid.rowSelectionChanged,this.rxWizardModalComponent.context$.pipe((0,b.take)(1))]).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);this.selectedDefinitionCount=e.length,i.definitionsToDeleteByType=e.reduce((e,t)=>{var i;const n=qi.definitionTypes[t.type];return e[n]=null!==(i=e[n])&&void 0!==i?i:[],e[n].push(t.objectName),e},{}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0},this.selectedDefinitionCount>0)}),this.recordGridConfig$=(0,R.of)({columns:e,enableColumnSelection:!1,enableFiltering:!0,enableRowSelection:F.RowSelectionMode.Multiple,recordIdField:"definitionTypeWithName",styles:"flex-fill",useExternalFiltering:!1,expandGroups:!0,getRecordDefinition:()=>(0,R.of)(t),getData:e=>(this.rxWizardModalComponent.api.disableNextButton(),this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>{var e;const t={operationType:"DELETE"};return(null===(e=this.options)||void 0===e?void 0:e.isContentPackageOperation)&&(t.requireDependent=!0,t.recursive=!0,t.requireLatestVersion=!0),(0,R.combineLatest)([this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"ASSOCIATION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"DOCUMENT_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"EVENT_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"EVENT_STATISTICS_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"NAMED_LIST"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"PROCESS_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"RECORD_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"RULE_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"VIEW_DEFINITION"},t)}),this.definitionHistoryDataPageService.get({params:Object.assign({objectType:"WEBAPI_DEFINITION"},t)})]).pipe((0,b.map)(([e,t,i,n,o,r,a,s,l,d])=>{const c=(0,y.reduce)({association:e,document:t,event:i,eventStatistic:n,namedList:o,process:r,record:a,rule:s,view:l,webApi:d},(e,t,i)=>{const n=t.data,o=this.rxStringService.prettify(i);return n.forEach(e=>{e.type=i,e.displayType=o,e.displayName=this.rxDefinitionNameService.getDisplayName(e.objectName),e.definitionTypeWithName=`${i}:${e.objectName}`}),e.concat(n.length?[{groupValue:o,groupField:"type",items:n}]:[])},[]);return{data:c,totalSize:c.length}}))})))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onDataLoaded(){this.rxWizardModalComponent.api.enableNextButton()}}uo.\u0275fac=function(e){return new(e||uo)(o["\u0275\u0275directiveInject"](po),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](M.RxStringService),o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](x.TranslateService))},uo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:uo,selectors:[["ax-select-definitions-to-delete-wizard-step"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](at,7),o["\u0275\u0275viewQuery"](F.RecordGridComponent,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{options:"options"},decls:15,vars:16,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],["name","question_circle_o","placement","bottom","maxWidth","400",1,"ml-2",3,"adaptPopover"],[1,"mb-3"],[3,"config","dataLoaded"],["recordNameCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-icon",2),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",3),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"rx-record-grid",4),o["\u0275\u0275listener"]("dataLoaded",function(){return t.onDataLoaded()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,Xt,2,3,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-definitions.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.tooltip")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](8,9,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-definitions-count.label",o["\u0275\u0275pureFunction1"](14,vt,t.selectedDefinitionCount))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,12,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.selected-deleted-definitions.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[C.AdaptIconComponent,C.AdaptPopoverDirective,F.RecordGridComponent],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe],styles:[we]});class mo{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u,m,f){this.rxWizardModalComponent=e,this.rxAssociationDefinitionDataPageService=t,this.rxDefinitionNameService=i,this.rxDocumentDefinitionDataPageService=n,this.rxEventDefinitionDataPageService=o,this.rxEventStatisticsDefinitionDataPageService=r,this.rxNamedListDefinitionDataPageService=a,this.rxProcessDefinitionDataPageService=s,this.rxRecordDefinitionDataPageService=l,this.rxRuleDefinitionDataPageService=d,this.rxSessionExpirationService=c,this.rxStringService=p,this.rxViewDefinitionDataPageService=u,this.rxWebApiDefinitionDataPageService=m,this.translateService=f,this.selectedDefinitionCount=0,this.destroyed$=new R.ReplaySubject(1)}ngOnInit(){var e,t;this.rxWizardModalComponent.api.updateContext({cache:{}},!1);const i=[{title:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label"),fieldId:"displayType",sortable:{direction:F.ColumnSortDirection.Desc,priority:0}},{title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:"displayName"},qi.definitionGridColumns.lastChangedBy,Object.assign({sortable:{direction:F.ColumnSortDirection.Desc,priority:1}},qi.definitionGridColumns.lastUpdateTime),qi.definitionGridColumns.customizationPerspective].map(e=>Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)})),n={fieldDefinitions:[{id:"displayType",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:"displayName",resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastChangedBy.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},{id:qi.definitionGridColumns.lastUpdateTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:qi.definitionGridColumns.customizationPerspective.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character}]},o={propertySelection:["name","lastUpdateTime","lastChangedBy","customizationPerspective"]},r={propertySelection:[...o.propertySelection,"shouldExportData","type"]},a={excludeExtensionViews:!1,propertySelection:[...o.propertySelection]};this.recordGridConfig$=(0,R.of)({columns:i,enableColumnSelection:!1,enableRowSelection:(null===(e=this.options.gridConfig)||void 0===e?void 0:e.enableRowSelection)||null,recordIdField:"definitionTypeWithName",styles:"flex-fill",useExternalFiltering:!1,expandGroups:!0,getRecordDefinition:()=>(0,R.of)(n),getData:e=>(this.rxWizardModalComponent.api.disableNextButton(),this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>(0,R.combineLatest)([this.rxRecordDefinitionDataPageService.get({params:r}),this.rxAssociationDefinitionDataPageService.get({params:o}),this.rxDocumentDefinitionDataPageService.get({params:o}),this.rxEventDefinitionDataPageService.get({params:o}),this.rxEventStatisticsDefinitionDataPageService.get({params:o}),this.rxNamedListDefinitionDataPageService.get({params:o}),this.rxProcessDefinitionDataPageService.get({params:o}),this.rxRuleDefinitionDataPageService.get({params:o}),this.rxViewDefinitionDataPageService.get({params:a}),this.rxWebApiDefinitionDataPageService.get({params:a})]).pipe((0,b.map)(([e,t,i,n,o,r,a,s,l,d])=>{this.rxWizardModalComponent.api.updateContext({cache:{recordDefinitions:(0,y.cloneDeep)(e.data)}},!1),this.selectedDefinitionCount=0;const c=(0,y.reduce)({association:t,document:i,event:n,eventStatistic:o,namedList:r,process:a,record:e,rule:s,view:l,webApi:d},(e,t,i)=>{var n;const o=(0,y.reject)(t.data,e=>e.customizationPerspective===h.RX_OVERLAY.operationTypes.notCustomizedInThisOverlayGroup),r=this.rxStringService.prettify(i);return o.forEach(e=>{e.type=i,e.displayType=r,e.displayName=this.rxDefinitionNameService.getDisplayName(e.name),e.definitionTypeWithName=`${i}:${e.name}`}),(null===(n=this.options.gridConfig)||void 0===n?void 0:n.enableRowSelection)||(this.selectedDefinitionCount+=o.length),e.concat((null==o?void 0:o.length)?[{groupValue:r,groupField:"displayType",items:o}]:[])},[]);return{data:c,totalSize:c.length}})))))}),(null===(t=this.options.gridConfig)||void 0===t?void 0:t.enableRowSelection)&&(0,R.combineLatest)([this.recordGrid.rowSelectionChanged,this.rxWizardModalComponent.context$.pipe((0,b.take)(1))]).pipe((0,b.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.selectedDefinitionCount=e.length;const i=(0,y.cloneDeep)(t.deploymentPackageDescriptor);i.definitionsToDeployByType=e.reduce((e,t)=>{var i;const n=qi.definitionTypes[t.type];return e[n]=null!==(i=e[n])&&void 0!==i?i:[],e[n].push(t.name),e},{}),this.rxWizardModalComponent.api.updateContext({deploymentPackageDescriptor:i,isPackageDataModified:!0},this.selectedDefinitionCount>0)})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onDataLoaded(){this.rxWizardModalComponent.api.enableNextButton()}}mo.\u0275fac=function(e){return new(e||mo)(o["\u0275\u0275directiveInject"](D.RxWizardModalComponent),o["\u0275\u0275directiveInject"](P.RxAssociationDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](T.RxDocumentDefinitionDataPageService),o["\u0275\u0275directiveInject"](_.RxEventDefinitionDataPageService),o["\u0275\u0275directiveInject"](V.RxeventStatisticsDefinitionDataPageService),o["\u0275\u0275directiveInject"](j.RxNamedListDefinitionDataPageService),o["\u0275\u0275directiveInject"](N.RxProcessDefinitionDataPageService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionDataPageService),o["\u0275\u0275directiveInject"](A.RxRuleDefinitionDataPageService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](M.RxStringService),o["\u0275\u0275directiveInject"](g.RxViewDefinitionDataPageService),o["\u0275\u0275directiveInject"](O.RxWebApiDefinitionDataPageService),o["\u0275\u0275directiveInject"](x.TranslateService))},mo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:mo,selectors:[["ax-select-definitions-wizard-step"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](F.RecordGridComponent,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{options:"options"},decls:11,vars:14,consts:[[1,"d-flex","justify-content-between"],[1,"mt-0"],[1,"mb-3"],[3,"config","dataLoaded"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",2),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"rx-record-grid",3),o["\u0275\u0275listener"]("dataLoaded",function(){return t.onDataLoaded()}),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.customized-definitions.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](6,6,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.definitions-count.label",o["\u0275\u0275pureFunction2"](11,qt,t.selectedDefinitionCount,t.options.displayName.toLowerCase()))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.definitions-included-in-the-package.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[F.RecordGridComponent],pipes:[x.TranslatePipe],styles:[we]});const fo={packageRegistry:{recordDefinitionName:"BundleDeploy:PackageRegistry",fieldIds:{deployError:3292,type:3303,bundlePackageDescriptor:3311,name:3276,packageDeployStatus:S.RX_RECORD_DEFINITION.coreFieldIds.status}},packageTypes:{content:3}},ho={messageTypes:{all:"ALL"},importStatuses:{IMPORT_DEFINITIONS_SUCCESS:"success",IMPORT_DEFINITIONS_WARNING:"warning",IMPORT_DEFINITIONS_ERROR:"error",IMPORT_DEFINITIONS_UNCHANGED:"unchanged"},definitionTypeMap:{DOCUMENT_DEFINITION:"Document",EVENT_DEFINITION:"Event",EVENT_STATISTICS_DEFINITION:"Event Statistic",NAMED_LIST:"Names List",PROCESS_DEFINITION:"Process",RECORD_DEFINITION:"Record",RULE_DEFINITION:"Rule",VIEW_DEFINITION:"View",WEBAPI_DEFINITION:"Web API"}};class go extends I.RxModalClass{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u){super(e,n),this.activeModalRef=e,this.axBundleDeploymentService=t,this.datePipe=i,this.injector=n,this.rxBundleCacheService=o,this.rxDefinitionNameService=r,this.rxGlobalCacheService=a,this.rxJsonParserService=s,this.rxModalService=l,this.rxRecordInstanceDataPageService=d,this.rxRecordInstanceService=c,this.rxStringService=p,this.translateService=u,this.busyConfig={busy:null,sticky:!0,message:this.translateService.instant("com.bmc.arsys.rx.client.loading-data.label"),loaderType:C.LoaderType.LINE},this.viewTypes=[!0,!1],this.messageTypes=[!0,!1,!1,!1],this.packageCreationDateControl=new E.FormControl([]),this.packageNameControl=new E.FormControl(""),this.createdByControl=new E.FormControl(""),this.viewTypeControl=new E.FormControl(this.viewTypes),this.messagesTypeControl=new E.FormControl(this.messageTypes),this.buttonGroupConfig=[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.definitions.label")},{name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.title")}],this.messagesButtonGroupConfig=[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"),value:ho.messageTypes.all},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.success.label"),value:"SUCCESS"},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),value:"WARNING"},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.error.label"),value:"ERROR"},{name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.content-package-import-logs.unchanged.label"),value:"UNCHANGED"}],this.selectedPackageContent={},this.gridColumns=[{field:"bundleName",header:""}],this.expandedRowColumns={data:[{field:"dataSource",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label")},{field:"successCount",header:this.translateService.instant("com.bmc.arsys.rx.client.common.success.label")},{field:"warningCount",header:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label")},{field:"errorCount",header:this.translateService.instant("com.bmc.arsys.rx.client.common.error.label")},{field:"UnchangedCount",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.content-package-import-logs.unchanged.label")}],definitions:[{field:"definitionType",header:this.translateService.instant("com.bmc.arsys.rx.client.common.definition-type.label")},{field:"success",header:this.translateService.instant("com.bmc.arsys.rx.client.common.success.label")},{field:"warning",header:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label")},{field:"error",header:this.translateService.instant("com.bmc.arsys.rx.client.common.error.label")},{field:"Unchanged",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.content-package-import-logs.unchanged.label")}]},this.messagesGridColumns={data:[{field:"dataSource",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label"),width:"20%"},{field:"message",header:this.translateService.instant("com.bmc.arsys.rx.client.common.message.label")}],definitions:[{field:"definitionType",header:this.translateService.instant("com.bmc.arsys.rx.client.common.definition-type.label"),width:"20%"},{field:"name",header:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")},{field:"message",header:this.translateService.instant("com.bmc.arsys.rx.client.common.message.label")}]},this.gridData=[],this.messagesGridData=[],this.gridSelectedItems=[],this.expandedRowKeys={},this.packagesList$=this.rxRecordInstanceDataPageService.post({params:{recorddefinition:fo.packageRegistry.recordDefinitionName,propertySelection:[S.RX_RECORD_DEFINITION.coreFieldIds.createdBy,S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate,S.RX_RECORD_DEFINITION.coreFieldIds.id,...(0,y.values)(fo.packageRegistry.fieldIds)],queryExpression:[`'${fo.packageRegistry.fieldIds.name}'="${this.rxBundleCacheService.bundleId}"`,`'${fo.packageRegistry.fieldIds.type}'=${fo.packageTypes.content}`,`'${fo.packageRegistry.fieldIds.deployError}'!=$NULL$`,`'${fo.packageRegistry.fieldIds.packageDeployStatus}'="${qi.packageDeployStatuses.deployed}"`].join(" AND "),sortBy:-S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate}}).pipe((0,b.map)(e=>e.data)),this.packagesList=[],this.destroyed$=new R.ReplaySubject(1),this.optionFormatter=this.optionFormatter.bind(this)}ngOnInit(){super.ngOnInit(),this.busyConfig.busy=this.packagesList$.pipe((0,b.take)(1)).subscribe(e=>{e.length&&this.packageCreationDateControl.setValue([e[0]]),this.packagesList=e}),this.packageCreationDateControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{const t=(0,y.first)(e);t?(this.packageNameControl.setValue(t[fo.packageRegistry.fieldIds.name]),this.createdByControl.setValue(t[S.RX_RECORD_DEFINITION.coreFieldIds.createdBy]),this.selectedPackageContent=this.rxJsonParserService.tryParseJson(t[fo.packageRegistry.fieldIds.deployError])):this.selectedPackageContent={},this.updateGridData()}),this.viewTypeControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.viewTypes=e,this.gridSelectedItems=[],this.updateGridData(),this.updateMessagesGridData()}),this.messagesTypeControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.messageTypes=e,this.updateMessagesGridData()})}updateGridData(){var e,t,i,n;this.viewTypes[0]&&(null===(t=null===(e=this.selectedPackageContent)||void 0===e?void 0:e.overallImportSummary)||void 0===t?void 0:t.definition)?this.gridData=this.selectedPackageContent.overallImportSummary.definition.reduce((e,t)=>(t.status.forEach(i=>{const n=this.rxDefinitionNameService.getBundleId(i.name);let o=(0,y.find)(e,{groupValue:n});if(o){let e=(0,y.find)(o.subTableItems,{definitionType:ho.definitionTypeMap[t.definitionType]});e||(e={definitionType:ho.definitionTypeMap[t.definitionType],error:0,statuses:[],success:0,unchanged:0,warning:0},o.subTableItems.push(e)),e[ho.importStatuses[i.messageType]]++,e.statuses.push(i)}else{const r={definitionType:ho.definitionTypeMap[t.definitionType],error:0,statuses:[i],success:0,unchanged:0,warning:0};r[ho.importStatuses[i.messageType]]++,o={bundleName:n,groupValue:n,groupField:"bundleName",subTableItems:[r]},this.rxGlobalCacheService.getBundleFriendlyName(n).pipe((0,b.take)(1)).subscribe(e=>{o.bundleName=e,this.expandedRowKeys[e]=!0}),e.push(o)}}),e),[]):this.viewTypes[1]&&(null===(n=null===(i=this.selectedPackageContent)||void 0===i?void 0:i.overallImportSummary)||void 0===n?void 0:n.data)&&(this.gridData=this.selectedPackageContent.overallImportSummary.data.reduce((e,t)=>{const i=this.rxDefinitionNameService.getBundleId(t.recordDefinitionName),n=this.rxDefinitionNameService.getDisplayName(t.recordDefinitionName),o=Object.assign({dataSource:n},t);let r=(0,y.find)(e,{groupValue:i});return r?r.subTableItems.push(o):(r={bundleName:i,groupValue:i,groupField:"bundleName",subTableItems:[o]},this.rxGlobalCacheService.getBundleFriendlyName(i).pipe((0,b.take)(1)).subscribe(e=>{r.bundleName=e}),e.push(r)),e},[]))}updateMessagesGridData(){const e=this.messagesButtonGroupConfig[this.messageTypes.indexOf(!0)].value;this.viewTypes[0]?this.messagesGridData=this.gridSelectedItems.reduce((t,i)=>[...t,...i.statuses.reduce((t,n)=>[...t,...n.messages.reduce((t,o)=>((e===ho.messageTypes.all||(0,y.startsWith)(o,e))&&t.push({definitionType:i.definitionType,message:o,name:this.rxDefinitionNameService.getDisplayName(n.name)}),t),[])],[])],[]):this.viewTypes[1]&&(this.messagesGridData=this.gridSelectedItems.reduce((t,i)=>[...t,...i.messages.reduce((t,n)=>((e===ho.messageTypes.all||(0,y.startsWith)(n,e))&&t.push({dataSource:i.dataSource,message:n}),t),[])],[]))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}optionFormatter(e){return this.datePipe.transform(e[S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate],"medium")}onSelectionChange(e){this.gridSelectedItems=e,this.updateMessagesGridData()}close(){this.activeModalRef.close()}}go.\u0275fac=function(e){return new(e||go)(o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](Wn),o["\u0275\u0275directiveInject"](n.DatePipe),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](M.RxJsonParserService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceService),o["\u0275\u0275directiveInject"](M.RxStringService),o["\u0275\u0275directiveInject"](x.TranslateService))},go.\u0275cmp=o["\u0275\u0275defineComponent"]({type:go,selectors:[["ax-content-package-import-logs"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:42,vars:64,consts:[[1,"modal-header"],[1,"modal-title"],["rx-id","x-button","type","button",1,"close","dp-close",3,"click"],[1,"modal-body","d-flex","flex-column"],[1,"container-fluid","mb-3","pr-0",3,"ngBusy"],[1,"row","flex-nowrap"],[1,"row","col-12","pr-0"],[1,"col","pl-0"],["appendToBody","true","rx-id","package-creation-date-select",3,"options","optionFormatter","popupMaxHeight","formControl","label"],[1,"col"],["name","packageName","rx-id","package-name-field",3,"disabledStyleForReadonlyState","label","readonly","formControl"],["name","createdBy","rx-id","created-by-field",3,"disabledStyleForReadonlyState","label","readonly","formControl"],[1,"col","pr-0"],[3,"label"],[3,"config","multiselectable","uncheckable","formControl"],[1,"adapt-table-toolbar","adapt-table-toolbar_bordered","font-weight-bold","px-5","pt-2"],[1,"h-100"],[1,"h-50"],["scrollHeight","flex",1,"application-library-table",3,"bordered","columns","sortable","value","dataKey","expandedRowKeys","expandedRowTemplate","scrollable"],[1,"h-50","overflow-hidden","border-bottom"],[1,"d-flex","my-2",3,"label"],[1,"my-2"],[1,"mb-2",3,"config","multiselectable","uncheckable","formControl"],["scrollHeight","190px",3,"bordered","columns","dataKey","sortable","sortMode","value","scrollable"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"],["expandedRowTemplate",""],[3,"columns","value","sortable","sortMode","selectionMode","selection","selectionChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275element"](11,"adapt-rx-select",8),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",9),o["\u0275\u0275element"](14,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275element"](17,"adapt-rx-textfield",11),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",12),o["\u0275\u0275element"](20,"adapt-rx-control-label",13),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275element"](22,"adapt-button-group",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",15),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"div",16),o["\u0275\u0275elementStart"](28,"div",17),o["\u0275\u0275element"](29,"adapt-table",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",19),o["\u0275\u0275element"](31,"adapt-rx-control-label",20),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementStart"](33,"div",21),o["\u0275\u0275element"](34,"adapt-button-group",22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](35,"adapt-table",23),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"div",24),o["\u0275\u0275elementStart"](37,"button",25),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](38),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](40,Wt,2,6,"ng-template",null,26,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](41);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,44,"com.bmc.arsys.rx.innovation-studio.content-package-import-logs.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275attribute"]("aria-label",o["\u0275\u0275pipeBind1"](5,46,"com.bmc.arsys.rx.client.common.close.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngBusy",t.busyConfig),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",t.packagesList)("optionFormatter",t.optionFormatter)("popupMaxHeight",560)("formControl",t.packageCreationDateControl)("label",o["\u0275\u0275pipeBind1"](12,48,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.package-creation-date.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("label",o["\u0275\u0275pipeBind1"](15,50,"com.bmc.arsys.rx.innovation-studio.packaging.package-name.label"))("readonly",!0)("formControl",t.packageNameControl),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("label",o["\u0275\u0275pipeBind1"](18,52,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.created-by.label"))("readonly",!0)("formControl",t.createdByControl),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](21,54,"com.bmc.arsys.rx.client.common.action-view.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.buttonGroupConfig)("multiselectable",!1)("uncheckable",!1)("formControl",t.viewTypeControl),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](25,56,"com.bmc.arsys.rx.client.common.application.label"),"/",o["\u0275\u0275pipeBind1"](26,58,"com.bmc.arsys.rx.client.common.library.label")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("bordered",!0)("columns",t.gridColumns)("sortable",!0)("value",t.gridData)("dataKey","bundleName")("expandedRowKeys",t.expandedRowKeys)("expandedRowTemplate",e)("scrollable",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](32,60,"com.bmc.arsys.rx.client.common.messages.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("config",t.messagesButtonGroupConfig)("multiselectable",!1)("uncheckable",!1)("formControl",t.messagesTypeControl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("bordered",!0)("columns",t.viewTypeControl.value[0]?t.messagesGridColumns.definitions:t.messagesGridColumns.data)("dataKey","definitionType")("sortable",!0)("sortMode","multiple")("value",t.messagesGridData)("scrollable",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](39,62,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[C.AdaptBusyDirective,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective,C.AdaptRxTextfieldComponent,C.AdaptRxControlLabelComponent,C.AdaptButtonGroupComponent,$.AdaptTableComponent,C.AdaptButtonComponent],pipes:[x.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}adapt-table.application-library-table[_ngcontent-%COMP%]  .ui-table-thead{display:none}adapt-table.application-library-table[_ngcontent-%COMP%]  adapt-table .ui-table-thead{display:table-header-group}"]});class vo extends I.RxModalClass{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u){super(e,n),this.activeModalRef=e,this.axBundleDeploymentService=t,this.datePipe=i,this.injector=n,this.rxBundleCacheService=o,this.rxDefinitionNameService=r,this.rxGlobalCacheService=a,this.rxJsonParserService=s,this.rxModalService=l,this.rxRecordInstanceDataPageService=d,this.rxRecordInstanceService=c,this.rxStringService=p,this.translateService=u,this.busyConfig={busy:null,sticky:!0,message:this.translateService.instant("com.bmc.arsys.rx.client.common.loading-data"),loaderType:C.LoaderType.LINE},this.viewType=[!0,!1],this.packageCreationDateControl=new E.FormControl([]),this.packageNameControl=new E.FormControl(""),this.createdByControl=new E.FormControl(""),this.viewTypeControl=new E.FormControl(this.viewType),this.buttonGroupConfig=[{name:"Definitions",value:this.translateService.instant("com.bmc.arsys.rx.client.common.definitions.label")},{name:"Data",value:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.title")}],this.gridColumns=[{field:"bundleName",header:""}],this.gridData=[],this.expandedRowColumns={definitions:[{field:"type",header:this.translateService.instant("com.bmc.arsys.rx.client.common.definition-type.label")},{field:"name",header:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")}],data:[{field:"dataSource",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label")},{field:"dataFilter",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label")},{field:"ignoreRuleExecution",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.ignore-rules.label")},{field:"duplicateDataActionType",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.duplicates.label")}]},this.expandedRowKeys={},this.packagesList$=this.rxRecordInstanceDataPageService.post({params:{recorddefinition:fo.packageRegistry.recordDefinitionName,propertySelection:[S.RX_RECORD_DEFINITION.coreFieldIds.createdBy,S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate,S.RX_RECORD_DEFINITION.coreFieldIds.id,...(0,y.values)(fo.packageRegistry.fieldIds)],queryExpression:[`'${fo.packageRegistry.fieldIds.name}'="${this.rxBundleCacheService.bundleId}"`,`'${fo.packageRegistry.fieldIds.type}'=${fo.packageTypes.content}`,`'${fo.packageRegistry.fieldIds.bundlePackageDescriptor}'!=$NULL$`].join(" AND "),sortBy:-S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate}}).pipe((0,b.map)(e=>e.data)),this.packageCreationDateTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.manage-content-packages.package-creation-date.tooltip")},this.packagesList=[],this.destroyed$=new R.ReplaySubject(1),this.optionFormatter=this.optionFormatter.bind(this)}ngOnInit(){super.ngOnInit(),this.busyConfig.busy=this.packagesList$.pipe((0,b.take)(1)).subscribe(e=>{e.length&&this.packageCreationDateControl.setValue([e[0]]),this.packagesList=e}),this.packageCreationDateControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{const t=(0,y.first)(e);t?(this.selectedPackageContent=this.rxJsonParserService.tryParseJson(t[fo.packageRegistry.fieldIds.bundlePackageDescriptor]),this.createdByControl.setValue(t[S.RX_RECORD_DEFINITION.coreFieldIds.createdBy]),this.packageNameControl.setValue(this.selectedPackageContent.customPackageName)):this.selectedPackageContent={},this.updateGridData()}),this.viewTypeControl.valueChanges.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.viewType=e,this.updateGridData()})}updateGridData(){var e,t;this.viewType[0]&&(null===(e=this.selectedPackageContent)||void 0===e?void 0:e.definitionsToDeployByType)?this.gridData=(0,y.reduce)(this.selectedPackageContent.definitionsToDeployByType,(e,t,i)=>{const n=this.rxStringService.prettify(i);return t.forEach(t=>{const i={type:n,bundle:this.rxDefinitionNameService.getBundleId(t),name:this.rxDefinitionNameService.getDisplayName(t)};let o=(0,y.find)(e,{groupValue:i.bundle});o?o.subTableItems.push(i):(o={bundleName:i.bundle,groupValue:i.bundle,groupField:"bundleName",subTableItems:[i]},this.rxGlobalCacheService.getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(t)).pipe((0,b.take)(1)).subscribe(e=>{o.bundleName=e,this.expandedRowKeys[e]=!0}),e.push(o))}),e},[]):this.viewType[1]&&(null===(t=this.selectedPackageContent)||void 0===t?void 0:t.dataImportOptionsByRecordDefinitionName)&&(this.gridData=(0,y.reduce)(this.selectedPackageContent.dataImportOptionsByRecordDefinitionName,(e,t,i)=>{const n=this.rxDefinitionNameService.getBundleId(i);t.dataSource=this.rxDefinitionNameService.getDisplayName(i);let o=(0,y.find)(e,{groupValue:n});return o?o.subTableItems.push(t):(o={bundleName:n,groupValue:n,groupField:"bundleName",subTableItems:[t]},this.rxGlobalCacheService.getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(i)).pipe((0,b.take)(1)).subscribe(e=>{o.bundleName=e,this.expandedRowKeys[e]=!0}),e.push(o)),e},[]))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}optionFormatter(e){return this.datePipe.transform(e[S.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate],"medium")}downloadPackage(){this.axBundleDeploymentService.download((0,y.first)(this.packageCreationDateControl.value)[fo.packageRegistry.fieldIds.name],(0,y.first)(this.packageCreationDateControl.value)[S.RX_RECORD_DEFINITION.coreFieldIds.id]).subscribe(e=>{M.RxFileService.saveFile(e)})}deletePackage(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.manage-content-packages.delete-confirmation.message")}).then(e=>{e&&(this.busyConfig.busy=this.rxRecordInstanceService.delete(fo.packageRegistry.recordDefinitionName,(0,y.first)(this.packageCreationDateControl.value)[S.RX_RECORD_DEFINITION.coreFieldIds.id]).pipe((0,b.switchMapTo)(this.packagesList$),(0,b.take)(1)).subscribe(e=>{this.packagesList=e,this.gridData=[],this.packageCreationDateControl.setValue([]),this.packageNameControl.setValue(""),this.createdByControl.setValue("")}))})}close(){this.activeModalRef.close()}}vo.\u0275fac=function(e){return new(e||vo)(o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](Wn),o["\u0275\u0275directiveInject"](n.DatePipe),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](M.RxJsonParserService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](S.RxRecordInstanceService),o["\u0275\u0275directiveInject"](M.RxStringService),o["\u0275\u0275directiveInject"](x.TranslateService))},vo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:vo,selectors:[["ax-manage-content-packages"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:40,vars:59,consts:[[1,"modal-header"],[1,"modal-title"],["rx-id","x-button","type","button",1,"close","dp-close",3,"click"],[1,"modal-body","d-flex","flex-column"],[1,"container-fluid","mb-3","pr-0",3,"ngBusy"],[1,"row","flex-nowrap"],[1,"row","col-12","pr-0"],[1,"col","pl-0"],["appendToBody","true","rx-id","package-creation-date-select",3,"options","optionFormatter","popupMaxHeight","formControl","label","tooltip"],[1,"col"],["name","packageName","rx-id","package-name-field",3,"disabledStyleForReadonlyState","label","readonly","formControl"],["name","createdBy","rx-id","created-by-field",3,"disabledStyleForReadonlyState","label","readonly","formControl"],[1,"col","pr-0"],[3,"label"],[3,"config","multiselectable","uncheckable","formControl"],[1,"adapt-table-toolbar","adapt-table-toolbar_bordered","font-weight-bold","px-5","pt-2"],["scrollHeight","flex",3,"bordered","columns","sortable","value","dataKey","expandedRowTemplate","expandedRowKeys","scrollable"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","download-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","delete-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"],["expandedRowTemplate",""],[3,"columns","value","sortable","sortMode"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"div",7),o["\u0275\u0275element"](11,"adapt-rx-select",8),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",9),o["\u0275\u0275element"](14,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275element"](17,"adapt-rx-textfield",11),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",12),o["\u0275\u0275element"](20,"adapt-rx-control-label",13),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275element"](22,"adapt-button-group",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",15),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](27,"adapt-table",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"div",17),o["\u0275\u0275elementStart"](29,"button",18),o["\u0275\u0275listener"]("click",function(){return t.downloadPackage()}),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"button",19),o["\u0275\u0275listener"]("click",function(){return t.deletePackage()}),o["\u0275\u0275text"](33),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"button",20),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](36),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](38,Ht,2,4,"ng-template",null,21,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](39);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,37,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275attribute"]("aria-label",o["\u0275\u0275pipeBind1"](5,39,"com.bmc.arsys.rx.client.common.close.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngBusy",t.busyConfig),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",t.packagesList)("optionFormatter",t.optionFormatter)("popupMaxHeight",560)("formControl",t.packageCreationDateControl)("label",o["\u0275\u0275pipeBind1"](12,41,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.package-creation-date.label"))("tooltip",t.packageCreationDateTooltip),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("label",o["\u0275\u0275pipeBind1"](15,43,"com.bmc.arsys.rx.innovation-studio.packaging.package-name.label"))("readonly",!0)("formControl",t.packageNameControl),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("label",o["\u0275\u0275pipeBind1"](18,45,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.created-by.label"))("readonly",!0)("formControl",t.createdByControl),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](21,47,"com.bmc.arsys.rx.client.common.action-view.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.buttonGroupConfig)("multiselectable",!1)("uncheckable",!1)("formControl",t.viewTypeControl),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](25,49,"com.bmc.arsys.rx.client.common.application.label"),"/",o["\u0275\u0275pipeBind1"](26,51,"com.bmc.arsys.rx.client.common.library.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("bordered",!0)("columns",t.gridColumns)("sortable",!0)("value",t.gridData)("dataKey","bundleName")("expandedRowTemplate",e)("expandedRowKeys",t.expandedRowKeys)("scrollable",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!(null!=t.packageCreationDateControl.value&&t.packageCreationDateControl.value.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](31,53,"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!(null!=t.packageCreationDateControl.value&&t.packageCreationDateControl.value.length)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](34,55,"com.bmc.arsys.rx.innovation-studio.manage-content-packages.delete-package.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](37,57,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[C.AdaptBusyDirective,C.AdaptRxSelectComponent,E.NgControlStatus,E.FormControlDirective,C.AdaptRxTextfieldComponent,C.AdaptRxControlLabelComponent,C.AdaptButtonGroupComponent,$.AdaptTableComponent,C.AdaptButtonComponent],pipes:[x.TranslatePipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}adapt-table[_ngcontent-%COMP%]  .ui-table-thead{display:none}adapt-table[_ngcontent-%COMP%]  adapt-table .ui-table-thead{display:table-header-group}"]});class yo{constructor(e,t){this.bundleDescriptor=e,this.injector=t;const i=t.get(h.RxOverlayService),n=t.get(h.RxCurrentUserService);t.get(h.RxBundleService);this.friendlyName=e.friendlyName,this.description=e.description,this.version=e.displayVersion||e.version,this.developerId=e.developerId,this.developerName=e.developerName,this.id=e.id,this.hasCustomEntryPoint=e.hasCustomEntryPoint,this.containsJavaScript=e.containsJavaScript;const o=i.getCurrentOverlayContext();this.isBundleFromCurrentOverlayGroup=o&&e.overlayGroupId===o.overlayGroupId&&e.customizationPerspective===h.RX_OVERLAY.bundleCustomizationOperationTypes.createdInThisOverlayGroup,this.type=e.isApplication?h.RX_BUNDLE.bundleTypes.application:h.RX_BUNDLE.bundleTypes.library,this.isFoundationBundle=e.id===h.RX_APPLICATION.platformBundleIds.foundation,this.isActionMenuVisible=this.isFoundationBundle||this.isBundleFromCurrentOverlayGroup||!e.platformBundle,this.isBusinessAnalyst=n.isBusinessAnalyst(),this.isApplication=e.isApplication}}class bo{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u,m,f,g,v,y,x,C,S){this.activatedRoute=e,this.componentFactoryResolver=t,this.rxAngularApplicationService=i,this.rxBundleCacheService=n,this.rxBundleService=o,this.rxWizardService=r,this.injector=a,this.axBundleDeploymentService=s,this.rxModalService=l,this.translateService=d,this.adaptModalService=c,this.router=p,this.axLocalizedStringsDataPageQuery=u,this.ngZone=m,this.rxLocalizedStringsLoaderService=f,this.rxNotificationService=g,this.rxGlobalCacheService=v,this.rxCreatePackageStatusDataPageService=y,this.rxOverlayService=x,this.renderer=C,this.rxSessionExpirationService=S,this.loadData$=new R.BehaviorSubject(!0),this.bundleTypes=h.RX_BUNDLE.bundleTypes,this.bundleDescriptor$=(0,R.combineLatest)([this.activatedRoute.params.pipe((0,b.pluck)("bundleId")),this.loadData$]).pipe((0,b.tap)(([e])=>{this.rxBundleCacheService.bundleId=e}),(0,b.switchMap)(([e])=>this.rxGlobalCacheService.getBundleDescriptor(e)),(0,b.shareReplay)(1)),this.bundleDetails$=this.bundleDescriptor$.pipe((0,b.map)(e=>new yo(e,this.injector)),(0,b.shareReplay)(1)),this.applicationLink$=this.bundleDetails$.pipe((0,b.switchMap)(e=>this.rxAngularApplicationService.isAngularJsApplication(e.id)),(0,b.withLatestFrom)(this.bundleDetails$),(0,b.map)(([e,t])=>t.hasCustomEntryPoint?`/${t.id}/index.html`:e?`/innovationsuite/index.html#/${t.id}`:`/helix/index.html#/${t.id}`),(0,b.shareReplay)(1)),this.shellDesignerLink$=this.bundleDetails$.pipe((0,b.map)(e=>`/${h.RX_APPLICATION.innovationStudioBundleId}/shell/${e.id}`))}ngOnInit(){this.bundleDescriptor$.pipe((0,b.take)(1)).subscribe(e=>{this.rxOverlayService.areNewDefinitionsAllowedSync(e)||this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-details.read-only-definitions.warning"))})}createContentPackage(){(0,R.combineLatest)([this.rxBundleService.get(this.rxBundleCacheService.bundleId),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([e,t])=>{const i={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-content-package.label"),allowFinish:!0,finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.close.label"),notificationMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.create-content-package.notification"),steps:[{id:"selectDefinitions",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(co),options:{displayName:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.content-package.label"),gridConfig:{defaultDuplicateDataActionType:"THROW_ERROR",enableRowSelection:F.RowSelectionMode.Multiple}}},{id:"addData",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(Zn),options:{countTitle:"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.create-content.count",descriptionTitle:"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.create-content.description",showGlobalFilterExpressionEditor:!0,gridConfig:{defaultDuplicateDataActionType:qi.duplicateDataActions.ignore.value,columns:["dataSource","name","aliasName","dataFilter","dataFilterExpression","ignoreRuleExecution","duplicateDataActionType"]}}},{id:"orderData",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.order-data.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ao)},{id:"selectApprovalConfigurations",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-approval-configurations.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(lo),options:{gridConfig:{enableRowSelection:F.RowSelectionMode.Multiple}}},{id:"selectDefinitionsToDelete",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(uo),options:{gridConfig:{enableRowSelection:F.RowSelectionMode.Multiple},isInstallOperation:!1,isContentPackageOperation:!0}},{id:"options",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ro),options:{fields:{customPackageName:{},friendlyName:{disabled:!0},version:{disabled:!0,hideTooltip:!0},description:{disabled:!0},dependentBundlesList:{hidden:!0}}}},{id:"package",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(so),options:{isInstallOperation:!1,isContentPackageOperation:!0}},{id:"download",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(oo)}]},n=(0,y.assign)((0,y.pick)(e,["id","name","isApplication","friendlyName","version","groupId","description","dependentBundles"]),{type:e.isApplication?h.RX_BUNDLE.bundleTypes.application:h.RX_BUNDLE.bundleTypes.library}),o=t.reduce((e,t)=>(e[t.id]=t.friendlyName,e),{}),r=(0,y.chain)(t).reject({id:h.RX_APPLICATION.standardlib}).reject({id:e.id}).reject({id:h.RX_APPLICATION.innovationStudioBundleId}).value();(0,y.forEach)(r,e=>{e.isDependedOn=Boolean((0,y.find)(n.dependentBundles,{id:e.id}))});const a={bundleDescriptors:t,bundleDetails:n,bundleFriendlyNamesById:o,dependentBundlesList:r,deploymentPackageDescriptor:{customPackageName:e.id,packageType:zi.Content,id:e.id,name:e.name,friendlyName:e.friendlyName,version:e.version,description:e.description,groupId:e.groupId,developerName:e.developerName,isApplication:e.isApplication,containsJavaScript:e.containsJavaScript,overlayGroupId:"",hasCustomEntryPoint:!0,userRequestedDependentBundles:null,isConfigurationDataIncluded:!1,duplicateDataActionTypeForConfigurationData:qi.duplicateDataActions.ignore.value,definitionsToDeployByType:{},definitionsToDeleteByType:{},dataImportOptionsByRecordDefinitionName:{},approvalConfigurationQueryOptions:[]}};this.rxWizardService.open({context:a,options:i}).then(y.noop)})}openContentPackageImportLogsModal(){this.rxModalService.openModal({content:go,size:"rx-lg"}).catch(y.noop)}createInstallPackage(){(0,R.combineLatest)([this.rxBundleService.get(this.rxBundleCacheService.bundleId),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([e,t])=>{const i={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-install-package.label"),allowFinish:!0,finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.close.label"),notificationMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.install-package.notification"),steps:[{id:"selectDefinitions",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(mo),options:{displayName:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.install-package.label")}},{id:"orderData",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.order-data.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ao),options:{importRecordDefinitionFromCache:!0}},{id:"options",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ro)},{id:"package",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(so),options:{isInstallOperation:!0,isContentPackageOperation:!1}},{id:"download",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(oo)}]},n={bundleDetails:e,bundleDescriptors:t,deploymentPackageDescriptor:{packageType:zi.Install,id:e.id,name:e.friendlyName,friendlyName:e.friendlyName,version:e.version,description:e.description,developerName:e.developerName,isApplication:e.isApplication,containsJavaScript:e.containsJavaScript,overlayGroupId:"",hasCustomEntryPoint:!0,userRequestedDependentBundles:null,isConfigurationDataIncluded:!1,duplicateDataActionTypeForConfigurationData:qi.duplicateDataActions.ignore.value,definitionsToDeployByType:{},definitionsToDeleteByType:{},dataImportOptionsByRecordDefinitionName:{}}};this.rxWizardService.open({context:n,options:i}).then(y.noop)})}createUpdatePackage(){(0,R.combineLatest)([this.rxBundleService.get(this.rxBundleCacheService.bundleId),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([e,t])=>{const i={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-update-package.label"),allowFinish:!0,finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.close.label"),notificationMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.create-update-package.notification"),steps:[{id:"selectDefinitions",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(mo),options:{displayName:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.update-package.label"),subtitleMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions.message"),gridConfig:{enableRowSelection:F.RowSelectionMode.Multiple}}},{id:"addData",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(no),options:{countTitle:"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.update-package.count",descriptionTitle:"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.update-package.description",showGlobalFilterExpressionEditor:!1,gridConfig:{columns:["dataSource","name"],defaultDuplicateDataActionType:qi.duplicateDataActions.ignore.value}}},{id:"orderData",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.order-data.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ao)},{id:"selectDefinitionsToDelete",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(uo),options:{gridConfig:{enableRowSelection:F.RowSelectionMode.Multiple}}},{id:"options",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ro),options:{fields:{bundleUpdateFromVersion:{},version:{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.update-to-version.label"),tooltip:"com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.options.update-to-version.tooltip"}}}},{id:"package",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.package.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(so),options:{isInstallOperation:!1,isContentPackageOperation:!1}},{id:"download",name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(oo)}]},n={bundleDetails:e,bundleDescriptors:t,deploymentPackageDescriptor:{bundleUpdateFromVersion:e.version,containsJavaScript:e.containsJavaScript,dataImportOptionsByRecordDefinitionName:{},definitionsToDeleteByType:{},definitionsToDeployByType:{},description:e.description,developerName:e.developerName,duplicateDataActionTypeForConfigurationData:qi.duplicateDataActions.ignore.value,friendlyName:e.friendlyName,hasCustomEntryPoint:!0,id:e.id,isApplication:e.isApplication,isConfigurationDataIncluded:!1,name:e.friendlyName,overlayGroupId:"",packageType:zi.Update,version:e.version,userRequestedDependentBundles:null}};this.rxWizardService.open({context:n,options:i}).then(y.noop)})}downloadTranslations(e){this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>this.axLocalizedStringsDataPageQuery.get({params:{startIndex:0,pageSize:0,includeStringsFromUserOverlayOnly:!1,locale:"default",bundleId:e}}))).subscribe(e=>{const t=new Blob([JSON.stringify(e.data[0],null,"\t")],{type:"application/json"});this.ngZone.runOutsideAngular(()=>{(0,B.saveAs)(t,"localizable-strings.json")})})}manageContentPackages(){this.rxModalService.openModal({content:vo,size:"rx-lg"}).catch(y.noop)}openConfirmationModal(e){return this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:I.RX_MODAL.modalStyles.warning,message:e})}onClickFileInput(e){e.target.value=""}reinstallBundle(e){const t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.confirmation.message",{bundleName:e.friendlyName});this.openConfirmationModal(t).then(t=>{if(t){this.renderer.setAttribute(this.fileInput.nativeElement,"accept",".zip");const t=this.renderer.listen(this.fileInput.nativeElement,"change",i=>{const n=i.target,o=(0,y.toArray)(n.files)[0];if(o){const t={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.label"),status:I.ProgressIndicatorStatus.InProgress,header:e.friendlyName,subHeader:null==o?void 0:o.name.replace(/\.zip$/i,""),inProgressMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.in-progress.label"),finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.success.message",{bundleType:e.type}),operationStatusMessage:"",failedMessage:""};this.openModal(I.ProgressIndicatorModalComponent,t).then(()=>{t.status===I.ProgressIndicatorStatus.Finished?window.location.reload():this.loadData$.next(!0)}).catch(y.noop),this.axBundleDeploymentService.reinstall(e.id,o).pipe((0,b.catchError)(i=>(t.status=I.ProgressIndicatorStatus.Failed,t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.failure.message",{bundleType:e.type}),(0,R.throwError)(i)))).subscribe(i=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(i.headers.get("location").split("/"))).subscribe(i=>{i.isFinished?(t.status=I.ProgressIndicatorStatus.Finished,t.operationStatusMessage=this.axBundleDeploymentService.buildStatusMessage(i.deploymentParsedStatus)):i.errorMessage&&(t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.reinstall-bundle.failure.message",{bundleType:e.type}),t.status=I.ProgressIndicatorStatus.Failed,t.operationStatusMessage=i.errorMessage)})}),n.value=""}t()});this.renderer.selectRootElement(this.fileInput.nativeElement,!0).click()}})}uninstallBundle(e){const t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.confirmation.message",{bundleName:e.friendlyName});this.openConfirmationModal(t).then(t=>{if(t){const t={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.label"),status:I.ProgressIndicatorStatus.InProgress,header:e.friendlyName,subHeader:`${e.type} (${e.id}, ${e.developerId})`,inProgressMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.uninstalling.label"),finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.success.message",{bundleType:e.type}),operationStatusMessage:"",failedMessage:""};this.openModal(I.ProgressIndicatorModalComponent,t).then(()=>this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"workspace"]).then(()=>window.location.reload())).catch(y.noop),this.axBundleDeploymentService.uninstall(e.id).pipe((0,b.catchError)(e=>(t.status=I.ProgressIndicatorStatus.Failed,t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.failure.message"),(0,R.throwError)(e)))).subscribe(e=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(e.headers.get("location").split("/").slice(0,-1))).subscribe(e=>{e.isFinished?t.status=I.ProgressIndicatorStatus.Finished:e.errorMessage&&(t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.uninstall-bundle.failure.message"),t.status=I.ProgressIndicatorStatus.Failed,t.operationStatusMessage=e.errorMessage)})})}})}updateBundle(e){const t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.confirmation.message",{bundleName:e.friendlyName});this.openConfirmationModal(t).then(t=>{if(t){this.renderer.setAttribute(this.fileInput.nativeElement,"accept",".zip");const t=this.renderer.listen(this.fileInput.nativeElement,"change",i=>{const n=i.target,o=(0,y.toArray)(n.files)[0];if(o){const t={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.label"),status:I.ProgressIndicatorStatus.InProgress,header:e.friendlyName,subHeader:null==o?void 0:o.name.replace(/\.zip$/i,""),inProgressMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.in-progress.label"),finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.success.message",{bundleType:e.type}),operationStatusMessage:"",failedMessage:""};this.openModal(I.ProgressIndicatorModalComponent,t).then(()=>{t.status===I.ProgressIndicatorStatus.Finished?window.location.reload():this.loadData$.next(!0)}).catch(y.noop),this.axBundleDeploymentService.update(o).pipe((0,b.catchError)(i=>(t.status=I.ProgressIndicatorStatus.Failed,t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.failure.message",{bundleType:e.type}),(0,R.throwError)(i)))).subscribe(i=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(i.headers.get("location").split("/"))).subscribe(i=>{i.isFinished?t.status=I.ProgressIndicatorStatus.Finished:i.errorMessage&&(t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.update-bundle.failure.message",{bundleType:e.type}),t.status=I.ProgressIndicatorStatus.Failed,t.operationStatusMessage=i.errorMessage)})}),n.value=""}t()});this.renderer.selectRootElement(this.fileInput.nativeElement,!0).click()}})}uploadTranslations(e){const t=this.renderer.listen(this.fileInput.nativeElement,"change",i=>{const n=i.target,o=(0,y.toArray)(n.files)[0],r=new FileReader,a=[],s=[],l=[];o&&(r.onloadend=()=>{const t=(0,y.attempt)(JSON.parse.bind(null,r.result));Object.keys(t).map(i=>{const n=t[i];(0,y.isObject)(n)||this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.upload-translations.locale-error.message")),a.push(this.rxLocalizedStringsLoaderService.uploadTranslation(e.id,i,n).pipe((0,b.tap)(()=>{s.push(i)}),(0,b.catchError)(()=>(l.push(i),(0,R.of)({})))))}),(0,R.forkJoin)(a).subscribe(()=>{l.length>0&&this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.upload-translations.partial-failure.message",{locales:l.join(" ")})),0===s.length&&this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.upload-translations.failure.message")),0===l.length&&this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.upload-translations.success.message"))})},r.onerror=()=>{this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.upload-translations.file-load-failure.message"))},r.readAsText(o),n.value=""),t()});this.renderer.setAttribute(this.fileInput.nativeElement,"accept",".json"),this.renderer.selectRootElement(this.fileInput.nativeElement,!0).click()}importDefinitionsAndData(e){const t=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.confirmation.message");this.openConfirmationModal(t).then(t=>{if(t){this.renderer.setAttribute(this.fileInput.nativeElement,"accept",".zip");const t=this.renderer.listen(this.fileInput.nativeElement,"change",i=>{const n=i.target,o=(0,y.toArray)(n.files)[0];if(o){const t={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.label"),status:I.ProgressIndicatorStatus.InProgress,header:e.friendlyName,subHeader:o.name.replace(/\.zip$/i,""),inProgressMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.in-progress.label"),finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.success.message"),operationStatusMessage:"",failedMessage:""};this.openModal(I.ProgressIndicatorModalComponent,t).then(()=>{t.status===I.ProgressIndicatorStatus.Finished?window.location.reload():this.loadData$.next(!0)}).catch(y.noop),this.axBundleDeploymentService.import(e.id,o).pipe((0,b.catchError)(e=>(t.status=I.ProgressIndicatorStatus.Failed,t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.failure.message"),(0,R.throwError)(e)))).subscribe(e=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(e.headers.get("location").split("/"))).subscribe(e=>{e.isFinished?t.status=I.ProgressIndicatorStatus.Finished:e.errorMessage&&(t.failedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.import-definition-and-data.failure.message"),t.status=I.ProgressIndicatorStatus.Failed,t.operationStatusMessage=e.errorMessage)})}),n.value=""}t()});this.renderer.selectRootElement(this.fileInput.nativeElement,!0).click()}})}openModal(e,t){return this.adaptModalService.open({content:e,data:t,size:"sm",isDialog:!0,hideBackdrop:!1})}downloadContentPackage(e){this.rxCreatePackageStatusDataPageService.get({params:{startIndex:0,pageSize:-1,bundleId:e.id}}).subscribe(t=>{const i=(0,y.find)(null==t?void 0:t.data,{packageType:"CONTENT"});if((null==i?void 0:i.packageExportStatus)===qi.packageExportStatuses.packageCreated)this.axBundleDeploymentService.download(e.id,i.packageId).subscribe(e=>{M.RxFileService.saveFile(e)});else if((null==i?void 0:i.packageExportStatus)===qi.packageExportStatuses.pendingPackageCreate)this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.download-content-package.package-creation-in-progress.error.message"));else if((null==i?void 0:i.packageExportStatus)===qi.packageExportStatuses.error){const e={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.download-content-package.label"),status:I.ProgressIndicatorStatus.Failed,finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.download-content-package.package-creation-failed.error.message"),operationStatusMessage:this.axBundleDeploymentService.buildStatusMessage(i.deploymentParsedStatus)};this.openModal(I.ProgressIndicatorModalComponent,e)}else this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.download-content-package.package-not-available.error.message"))})}publishChatEnabledService(e){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,"chatbot",e,"publish-chat-enabled-service"])}}bo.\u0275fac=function(e){return new(e||bo)(o["\u0275\u0275directiveInject"](p.ActivatedRoute),o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](h.RxAngularApplicationService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxBundleService),o["\u0275\u0275directiveInject"](D.RxWizardService),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](Wn),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](C.AdaptModalService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](Qn),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](h.RxLocalizedStringsLoaderService),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](Hn),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](o.Renderer2),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService))},bo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:bo,selectors:[["ax-bundle-details"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Qt,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.fileInput=e.first)}},decls:3,vars:3,consts:[["class","d-flex flex-column py-3",4,"ngIf"],[1,"d-flex","flex-column","py-3"],[1,"d-flex","flex-row-reverse","align-items-center","justify-content-between","flex-fill","pl-4"],[1,"d-flex","flex-row"],["adapt-button","","btn-type","tertiary","size","large","rx-id","navigation-button","class","d-icon-left-app_eye",3,"routerLink",4,"ngIf"],["class","dropdown","adaptDropdown","","placement","bottom-right",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","large","class","d-icon-left-pop_up","rx-id","visit-deployed-application-button","target","_blank",3,"href",4,"ngIf"],[1,"d-flex","flex-row","align-items-center","rx-ellipsis"],["name","app",1,"mr-3","app-icon"],[1,"m-0","py-2","rx-ellipsis",3,"title"],["name","info_circle_o_adapt","placement","bottom",1,"ml-2","mt-1",3,"autoClose","adaptPopover"],[1,"text-tertiary","ml-6","pl-3","rx-ellipsis"],["type","file","accept",".zip","hidden","","rx-id","package-file-input",3,"multiple","click"],["fileInput",""],["popover",""],["adapt-button","","btn-type","tertiary","size","large","rx-id","navigation-button",1,"d-icon-left-app_eye",3,"routerLink"],["adaptDropdown","","placement","bottom-right",1,"dropdown"],["adapt-button","","adaptDropdownToggle","","btn-type","tertiary","size","large","rx-id","actions-buttons",1,"d-icon-left-action_button_cursor"],["class","dropdown-menu","adaptDropdownMenu","",4,"ngIf"],["adaptDropdownMenu","",1,"dropdown-menu"],[1,"dropdown-header"],[4,"ngIf"],["rx-id","import-definitions-and-data-menu-item","class","dropdown-item",3,"click",4,"ngIf"],["rx-id","create-install-package-menu-item",1,"dropdown-item",3,"click"],["rx-id","create-update-package-menu-item",1,"dropdown-item",3,"click"],["rx-id","create-content-package-menu-item",1,"dropdown-item",3,"click"],["rx-id","download-content-package-menu-item",1,"dropdown-item",3,"click"],["rx-id","manage-content-packages-menu-item",1,"dropdown-item",3,"click"],["rx-id","content-package-import-logs-menu-item",1,"dropdown-item",3,"click"],["rx-id","import-definitions-and-data-menu-item",1,"dropdown-item",3,"click"],["rx-id","update-menu-item",1,"dropdown-item",3,"click"],["rx-id","reinstall-menu-item",1,"dropdown-item",3,"click"],["rx-id","uninstall-menu-item",1,"dropdown-item",3,"click"],["rx-id","download-translations-menu-item",1,"dropdown-item",3,"click"],["rx-id","upload-translations-menu-item",1,"dropdown-item",3,"click"],["rx-id","enable-chat-for-service",1,"dropdown-item",3,"click"],["adapt-button","","btn-type","tertiary","size","large","rx-id","visit-deployed-application-button","target","_blank",1,"d-icon-left-pop_up",3,"href"],[1,"bundle-info-popover"],[1,"mb-2"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,li,17,9,"div",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275element"](2,"router-outlet")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.bundleDetails$))},directives:[n.NgIf,p.RouterOutlet,C.AdaptIconComponent,C.AdaptPopoverDirective,C.AdaptButtonComponent,p.RouterLinkWithHref,C.AdaptDropdownDirective,C.AdaptDropdownToggleDirective,C.AdaptDropdownMenuDirective],pipes:[n.AsyncPipe,x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.app-icon[_ngcontent-%COMP%]{font-size:2rem}.bundle-info-popover[_ngcontent-%COMP%]{font-size:.75rem}']});class xo{constructor(e,t,i,n){this.rxGuidService=e,this.rxDefaultRecordEditorInputType=t,this.rxFieldDefinitionService=i,this.translateService=n}getViewDefinition(e,t,i=!0){const n=this.rxGuidService.generate(),o=this.rxGuidService.generate(),r=this.rxGuidService.generate(),a=this.rxGuidService.generate(),s=this.rxGuidService.generate(),l=t?F.RecordEditorMode.Edit:F.RecordEditorMode.Create,d=this.getComponentDefinitions(e,l,r);return{guid:s,layout:JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:[r]}]},{name:"footer",height:60,columns:[{children:[o]}]}]}),outputParams:[{name:"recordInstance",source:"${view.components."+r+".recordInstance}"}],inputParams:[],componentDefinitions:[{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:r,type:g.RxViewComponentType.RecordEditor,propertiesByName:{recordInstanceId:`"${t}"`,mode:l,recordDefinitionName:e.name,styles:"p-0 border-0",allowEdit:i?"1":"0"},componentDefinitions:d,layout:JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:d.map(e=>e.guid)}]}]})},{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:o,type:g.RxViewComponentType.ButtonBar,propertiesByName:{alignment:"right",hidden:"0"},layout:JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:[a,n]}]}]}),componentDefinitions:[{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:n,type:g.RxViewComponentType.ActionButton,propertiesByName:{label:i?this.translateService.instant("com.bmc.arsys.rx.client.common.cancel.label"):this.translateService.instant("com.bmc.arsys.rx.client.common.close.label"),style:"secondary",size:"default"},componentDefinitions:[{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:g.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxCloseViewAction",actAsCancel:"true"}}]},{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:a,type:g.RxViewComponentType.ActionButton,propertiesByName:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),hidden:i?"0":"1",style:"primary",disabled:"NOT${view.components."+r+".canSave}",size:"default"},componentDefinitions:[{resourceType:g.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:g.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxSaveAction",targetApi:"${view.api}",closeAfterSave:!0}}]}]}]}}getComponentDefinitions(e,t,i){const n=[S.RX_RECORD_DEFINITION.fieldOptions.required,S.RX_RECORD_DEFINITION.fieldOptions.optional];t===F.RecordEditorMode.Edit&&n.push(S.RX_RECORD_DEFINITION.fieldOptions.system);const o=[];for(let r=0;r<n.length;r++){const a=this.getFieldComponentDefinitions(e,t,i,n[r]);o.push({resourceType:g.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:this.rxGuidService.generate(),type:g.RxViewComponentType.Container,propertiesByName:{rowWrap:F.ContainerRowWrap.Sm,columnCount:"2",styles:r+1!==n.length?"border-bottom pb-4":""},componentDefinitions:a,layout:JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:a.filter((e,t)=>t%2==0).map(e=>e.guid),span:"6"},{children:a.filter((e,t)=>t%2==1).map(e=>e.guid),span:"6"}]}]})})}return o}getFieldComponentDefinitions(e,t,i,n){return(0,y.reject)(e.fieldDefinitions,e=>t===F.RecordEditorMode.Create&&this.rxFieldDefinitionService.isSystemField(e)).filter(e=>e.fieldOption===n).map(e=>{const t={resourceType:g.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:this.rxDefaultRecordEditorInputType.getFieldTypeByFieldDefinition(e),propertiesByName:{fieldId:e.id,recordDefinition:"${view.components."+i+".recordDefinition}",recordInstance:"${view.components."+i+".recordInstance}",label:e.name}};return e.resourceType===S.RX_RECORD_DEFINITION.dataTypes.character.resourceType&&e.namedListDefinition&&(t.propertiesByName.enableMultiSelection="true"),t}).sort((e,t)=>e.propertiesByName.label.localeCompare(t.propertiesByName.label))}}xo.\u0275fac=function(e){return new(e||xo)(o["\u0275\u0275inject"](M.RxGuidService),o["\u0275\u0275inject"](F.RxDefaultRecordEditorInputType),o["\u0275\u0275inject"](S.RxFieldDefinitionService),o["\u0275\u0275inject"](x.TranslateService))},xo.\u0275prov=o["\u0275\u0275defineInjectable"]({token:xo,factory:xo.\u0275fac,providedIn:"root"});class Co{constructor(e,t,i,n,o,r,a,s,l,d,c,p){this.rxRecordEditorBuilder=e,this.route=t,this.router=i,this.translateService=n,this.rxDefinitionNameService=o,this.rxGlobalCacheService=r,this.rxPageTitleService=a,this.rxRecordDefinitionCacheService=s,this.rxBundleCacheService=l,this.viewComponentEventManager=d,this.rxOpenViewActionService=c,this.rxEditRecordsViewActionService=p,this.destroyed$=new R.ReplaySubject(1),this.recordDefinitionName$=this.route.params.pipe((0,b.map)(e=>e.definitionName),(0,b.shareReplay)(1)),this.recordDefinition$=this.recordDefinitionName$.pipe((0,b.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))),this.dataEditorGridConfig$=this.recordDefinition$.pipe((0,b.tap)(e=>{var t;this.recordDefinition=e,this.isCustomRecordDefinition=(null===(t=this.recordDefinition)||void 0===t?void 0:t.type)===S.RX_RECORD_DEFINITION.externalRecordDefinitionTypes.custom}),(0,b.map)(e=>{const t=(0,y.map)(S.RX_RECORD_DEFINITION.coreFields,"id"),i=(0,y.map)(e.fieldDefinitions,e=>({title:e.name,fieldId:String(e.id),visible:e.id!==S.RX_RECORD_DEFINITION.coreFieldIds.notifierListening&&(0,y.includes)(t,e.id),cellTemplate:e.id!==S.RX_RECORD_DEFINITION.coreFieldIds.displayId||this.isCustomRecordDefinition?void 0:this.displayIdColumnTemplate}));return{recordDefinitionName:e.name,columns:i,getRecordDefinition:()=>(0,R.of)(e),guid:"rx-data-editor-"+e.guid,styles:"flex-fill",enableRowSelection:this.isCustomRecordDefinition?null:F.RowSelectionMode.Multiple,actionButtons:[{label:this.isRecordEditable(this.recordDefinition)?this.translateService.instant("com.bmc.arsys.rx.client.common.edit.label"):this.translateService.instant("com.bmc.arsys.rx.client.common.action-view.label"),icon:this.isRecordEditable(this.recordDefinition)?"pencil":"eye",style:"tertiary",actions:[{name:()=>{1===this.dataEditorGrid.api.getSelectedRowCount()?this.editRecord(this.dataEditorGrid.api.getSelectedRows()[0][S.RX_RECORD_DEFINITION.coreFieldIds.id]):this.rxEditRecordsViewActionService.execute({recordDefinitionName:e.name,records:this.dataEditorGrid.api}).subscribe()}}],disabled:()=>this.isCustomRecordDefinition||!this.isRecordEditable(this.recordDefinition)&&1!==this.dataEditorGrid.api.getSelectedRowCount()},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),icon:"trash",style:"tertiary",actions:[{name:"rxDeleteRecordsAction",params:{recordDefinitionName:e.name,records:this.dataEditorGrid.api}}],disabled:this.isCustomRecordDefinition}],rowActionButtons:[]}}),(0,b.shareReplay)(1)),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.recordDefinitionName$.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxBundleCacheService.bundleId=this.rxDefinitionNameService.getBundleId(e),this.setPageTitle(e)})}close(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"record-definitions"])}createRecord(){this.viewComponentEventManager.executeActions([{guid:"rx-data-editor-new-"+this.recordDefinition.guid,name:"rxOpenViewAction",parameters:{viewDefinitionName:this.rxRecordEditorBuilder.getViewDefinition(this.recordDefinition,null,this.isRecordEditable(this.recordDefinition)),viewParams:null,presentation:{title:this.translateService.instant("com.bmc.arsys.rx.client.data-editor.new-record.title"),modalSize:G.RX_OPEN_VIEW.modalSize.Large,type:G.RX_OPEN_VIEW.type.DockedRightModal}}}],()=>this.dataEditorGrid.api.refresh().subscribe()).catch(R.noop)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}editRecord(e){this.viewComponentEventManager.executeActions([{guid:"rx-data-editor-edit-"+e,name:"rxOpenViewAction",parameters:{viewDefinitionName:this.rxRecordEditorBuilder.getViewDefinition(this.recordDefinition,e,this.isRecordEditable(this.recordDefinition)),viewParams:null,presentation:{title:this.isRecordEditable(this.recordDefinition)?this.translateService.instant("com.bmc.arsys.rx.client.data-editor.edit-record.title"):this.translateService.instant("com.bmc.arsys.rx.client.data-editor.view-record.title"),modalSize:G.RX_OPEN_VIEW.modalSize.Large,type:G.RX_OPEN_VIEW.type.DockedRightModal}}}],()=>this.dataEditorGrid.api.refresh().subscribe()).catch(R.noop)}isRecordEditable(e){return!e.isAuditRecordDefinition}setPageTitle(e){this.rxGlobalCacheService.getBundleFriendlyName(this.rxBundleCacheService.bundleId).pipe((0,b.take)(1)).subscribe(t=>{this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.data-editor.title"),t],this.rxGlobalCacheService.applicationId)})}}Co.\u0275fac=function(e){return new(e||Co)(o["\u0275\u0275directiveInject"](xo),o["\u0275\u0275directiveInject"](p.ActivatedRoute),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](h.RxPageTitleService),o["\u0275\u0275directiveInject"](S.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](L.ViewComponentEventManager),o["\u0275\u0275directiveInject"](G.RxOpenViewActionService),o["\u0275\u0275directiveInject"](G.RxEditRecordsViewActionService))},Co.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Co,selectors:[["ax-record-data-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](di,5),o["\u0275\u0275viewQuery"](ci,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataEditorGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.displayIdColumnTemplate=e.first)}},decls:18,vars:16,consts:[[1,"header","d-flex","align-items-center"],[1,"ml-3"],[1,"ml-auto","m-2"],["rx-id","close-button","size","small","adapt-button","","type","button","rx-id","close-button","btn-type","secondary",3,"click"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-left-plus_circle",3,"disabled","click"],["rx-id","data-editor-grid",3,"config"],["dataEditorGrid",""],["displayIdColumnTemplate",""],[1,"rx-ellipsis"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"rxDefinitionNamePipe"),o["\u0275\u0275pipe"](5,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275elementStart"](7,"button",3),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div"),o["\u0275\u0275elementStart"](11,"button",4),o["\u0275\u0275listener"]("click",function(){return t.createRecord()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](14,"rx-record-grid",5,6),o["\u0275\u0275template"](16,pi,3,1,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](3,6,"com.bmc.arsys.rx.client.data-editor.title")," (",o["\u0275\u0275pipeBind1"](4,8,o["\u0275\u0275pipeBind1"](5,10,t.recordDefinitionName$)),") "),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,12,"com.bmc.arsys.rx.client.common.close.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",(null==t.recordDefinition?null:t.recordDefinition.isAuditRecordDefinition)||t.isCustomRecordDefinition),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,14,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.dataEditorGridConfig$))},directives:[C.AdaptButtonComponent,F.RecordGridComponent],pipes:[x.TranslatePipe,h.RxDefinitionNamePipe,n.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}.header[_ngcontent-%COMP%]{background:#f0f1f1;border-bottom:1px solid #d6d7d8}']});const So={designerPageTitleKeys:{association:"com.bmc.arsys.rx.client.association-designer.title",document:"com.bmc.arsys.rx.client.document-designer.title",chatbot:"com.bmc.arsys.rx.client.chatbot-designer.title",config:"com.bmc.arsys.rx.client.config-designer.title",event:"com.bmc.arsys.rx.client.event-designer.title","event-statistics":"com.bmc.arsys.rx.client.event-statistics-designer.title","named-list":"com.bmc.arsys.rx.client.named-list-designer.title",process:"com.bmc.arsys.rx.client.process-designer.title",record:"com.bmc.arsys.rx.client.record-designer.title",rule:"com.bmc.arsys.rx.client.rule-designer.title",view:"com.bmc.arsys.rx.client.view-designer.title","web-api":"com.bmc.arsys.rx.client.web-api-designer.title"},legacyDesignerNames:{processPreview:"process-preview",chatWizard:"chat-wizard",recordDataEditor:"record-data-editor"},designerModes:{new:"new",edit:"edit"}};class Do{constructor(e,t,i,n,o,r,a,s,l,d,c,u){this.router=e,this.activatedRoute=t,this.rxDefinitionNameService=i,this.rxPageTitleService=n,this.rxGlobalCacheService=o,this.translateService=r,this.rxComponentCanDeactivateGuard=a,this.rxUtilityModalsService=s,this.rxIframeService=l,this.rxJsonParserService=d,this.rxPreviousStateService=c,this.rxGainsightConfiguratorService=u,this.isDefinitionDirty=!1,this.destroyed$=new R.ReplaySubject(1),this.designerOptions=(0,y.get)(this.router.getCurrentNavigation(),"extras.state.designerOptions"),this.router.events.pipe((0,b.filter)(e=>e instanceof p.NavigationEnd),(0,b.withLatestFrom)(this.activatedRoute.data,(e,t)=>t),(0,b.startWith)(void 0),(0,b.pairwise)(),(0,b.withLatestFrom)(this.activatedRoute.params,this.activatedRoute.queryParams),(0,b.tap)(([[e,t],i])=>{((null==e?void 0:e.designerMode)&&t.designerMode&&e.designerMode!==So.designerModes.new&&t.designerMode!==So.designerModes.edit||(null==e?void 0:e.definitionType)!==t.definitionType)&&(this.intervalId=setInterval(y.noop,1e5),this.busySubscription=R.NEVER.subscribe()),this.currentBundleId=i.bundleId||this.rxDefinitionNameService.getBundleId(i.definitionName)||this.activatedRoute.parent.snapshot.data.defaultBundleId,this.setPageTitle(this.currentBundleId,this.activatedRoute.parent.snapshot.data.definitionType,this.activatedRoute.snapshot.data.legacyDesignerName,i.definitionName)}),(0,b.map)(([e,t,i])=>this.buildDesignerUrl(this.currentBundleId,this.activatedRoute.parent.snapshot.data.definitionType,this.activatedRoute.snapshot.data.legacyDesignerName,t,i)),(0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxIframeService.showIframe(e),this.iframeComponentApi=this.rxIframeService.getIframeApi()})}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:`${(0,y.capitalize)(this.activatedRoute.snapshot.data.definitionType)} designer`}})}ngOnDestroy(){this.rxComponentCanDeactivateGuard.setPageComponent(null),this.destroyed$.next(),this.destroyed$.complete(),this.rxIframeService.hideIframe()}canDeactivate(){return!this.isDefinitionDirty}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges().then(e=>(e&&(this.isDefinitionDirty=!1),e))}onMessage(e){var t,i;const n=this.rxJsonParserService.tryParseJson(e.data);switch(null==n?void 0:n.messageType){case h.RX_DESIGNER.messageTypes.designerLoaded:null===(t=this.busySubscription)||void 0===t||t.unsubscribe(),clearInterval(this.intervalId);break;case h.RX_DESIGNER.messageTypes.closeDesigner:"shell"===this.activatedRoute.parent.snapshot.data.definitionType||this.activatedRoute.snapshot.data.legacyDesignerName===So.legacyDesignerNames.processPreview?this.rxPreviousStateService.goToPrevState():this.activatedRoute.snapshot.data.legacyDesignerName===So.legacyDesignerNames.chatWizard?this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.activatedRoute.snapshot.params.bundleId]):this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.currentBundleId,`${this.activatedRoute.parent.snapshot.data.definitionType}-definitions`]);break;case h.RX_DESIGNER.messageTypes.afterSave:n.payload.isEditMode||this.router.navigate(["edit",n.payload.definitionName],{relativeTo:this.activatedRoute.parent}),this.isDefinitionDirty=!1;break;case h.RX_DESIGNER.messageTypes.waitingForDesignerOptions:this.iframeComponentApi.postMessageToFrame({messageType:"designerOptions",payload:this.designerOptions});break;case h.RX_DESIGNER.messageTypes.designerLoadFailed:null===(i=this.busySubscription)||void 0===i||i.unsubscribe(),clearInterval(this.intervalId),(0,R.from)(this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.currentBundleId,`${this.activatedRoute.parent.snapshot.data.definitionType}-definitions`])).pipe((0,b.switchMap)(()=>{const e=n.payload.err;return(0,R.throwError)(new w.HttpErrorResponse({error:e.data,headers:new w.HttpHeaders(e.config.headers),status:e.status,statusText:e.statusText,url:e.config.url}))})).subscribe();break;case h.RX_DESIGNER.messageTypes.definitionStatusChanged:this.isDefinitionDirty=n.payload.isDirty}}buildDesignerUrl(e,t,i,n,o){const{definitionName:r,instanceId:a}=n,s=window.rx.logger.getCategories(),l=s.length?`?debug=${s.join(",")}`:"",d=`/${h.RX_APPLICATION.innovationStudioBundleId}/index.html${l}#`;if(i===So.legacyDesignerNames.processPreview)return`${d}/app/bundle/${e}/iprocess-instance/view/${r}/${a}`;if(i===So.legacyDesignerNames.chatWizard)return`${d}/app/bundle/${e}/enable-chat-for-service`;if(i===So.legacyDesignerNames.recordDataEditor)return`${d}/app/bundle/${e}/irecord-data-editor/${r}`;if("shell"===t)return`${d}/app/bundle/${e}/ishell/config`;{let i=`${d}/app/bundle/${e}/i${t}/${r||""}`;if(!(0,y.isEmpty)(o)){i+=`?${(0,y.map)(o,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&")}`}return this.designerOptions?`${i}?waitForDesignerOptions=true`:i}}setPageTitle(e,t,i,n){this.rxGlobalCacheService.getBundleFriendlyName(e).pipe((0,b.take)(1)).subscribe(e=>{i===So.legacyDesignerNames.processPreview?this.rxPageTitleService.set([this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.process-preview.title"),e],this.rxGlobalCacheService.applicationId):i===So.legacyDesignerNames.recordDataEditor?this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(n),this.translateService.instant("com.bmc.arsys.rx.client.data-editor.title"),e],this.rxGlobalCacheService.applicationId):i===So.legacyDesignerNames.chatWizard?this.rxPageTitleService.set([this.translateService.instant("com.bmc.arsys.rx.innovation-studio.publish-chat-enabled-service.label"),e],h.RX_APPLICATION.innovationStudioBundleId):"shell"===t?this.rxPageTitleService.set([h.RX_APPLICATION.shellDefinitionName,e],h.RX_APPLICATION.innovationStudioBundleId):this.rxPageTitleService.set([n?this.rxDefinitionNameService.getDisplayName(n):this.translateService.instant("com.bmc.arsys.rx.client.create-new.title"),this.translateService.instant(So.designerPageTitleKeys[t]),e],this.rxGlobalCacheService.applicationId)})}}Do.\u0275fac=function(e){return new(e||Do)(o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](p.ActivatedRoute),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](h.RxPageTitleService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxComponentCanDeactivateGuard),o["\u0275\u0275directiveInject"](I.RxUtilityModalsService),o["\u0275\u0275directiveInject"](D.RxIframeService),o["\u0275\u0275directiveInject"](M.RxJsonParserService),o["\u0275\u0275directiveInject"](h.RxPreviousStateService),o["\u0275\u0275directiveInject"](D.RxGainsightConfiguratorService))},Do.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Do,selectors:[["ax-designer-frame"]],hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("message",function(e){return t.onMessage(e)},!1,o["\u0275\u0275resolveWindow"])},decls:1,vars:3,consts:[[3,"options"]],template:function(e,t){1&e&&o["\u0275\u0275element"](0,"rx-busy-indicator",0),2&e&&o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](1,se,t.busySubscription))},directives:[I.RxBusyIndicatorComponent],styles:["[_nghost-%COMP%]{position:relative;display:block;height:100%}"]});const Io={status:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.status.label",fieldId:"status",visible:!1,filterable:!1,searchable:!1,sortable:!0},contextKey:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.context-key.label",fieldId:"contextKey",searchable:!1,sortable:!1},instanceId:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.process-id.label",fieldId:"instanceId",filterable:!1,searchable:!0,sortable:!0},processDefinitionName:{title:"com.bmc.arsys.rx.client.common.process-definition.label",fieldId:"processDefinitionName",searchable:!1,filterable:!1,sortable:!0},owner:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.owner.label",fieldId:"owner",searchable:!1,sortable:!0},startTime:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.start-time.label",fieldId:"startTime",searchable:!1,filterable:!1,sortable:!0},endTime:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.completed-time.label",fieldId:"endTime",searchable:!1,filterable:!1,sortable:!0},isStartInstanceError:{title:"com.bmc.arsys.rx.innovation-studio.process-management.grid-column.process-start-error.label",fieldId:"isStartInstanceError",searchable:!1,filterable:!1,sortable:!0}},Ro={status:{id:Io.status.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},processDefinitionName:{id:Io.processDefinitionName.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},startTime:{id:Io.startTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},endTime:{id:Io.endTime.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.dateTime},contextKey:{id:Io.contextKey.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},instanceId:{id:Io.instanceId.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},owner:{id:Io.owner.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.character},isStartInstanceError:{id:Io.isStartInstanceError.fieldId,resourceType:S.RX_RECORD_DEFINITION.resourceTypes.boolean}},wo={statusTabs:{[Dn.active]:{title:"com.bmc.arsys.rx.innovation-studio.process-management.status.active.label",badgeType:"primary",status:Dn.active,guid:"rx-process-management-grid-active",gridColumns:[Io.contextKey,Io.instanceId,Io.processDefinitionName,Io.owner,Io.startTime,Io.status],fieldDefinitions:[Ro.contextKey,Ro.instanceId,Ro.processDefinitionName,Ro.owner,Ro.startTime,Ro.status]},[Dn.suspended]:{title:"com.bmc.arsys.rx.innovation-studio.process-management.status.suspended.label",badgeType:"warning",status:Dn.suspended,guid:"rx-process-management-grid-suspended",gridColumns:[Io.contextKey,Io.instanceId,Io.processDefinitionName,Io.owner,Io.startTime,Io.status],fieldDefinitions:[Ro.contextKey,Ro.instanceId,Ro.processDefinitionName,Ro.owner,Ro.startTime,Ro.status]},[Dn.errored]:{title:"com.bmc.arsys.rx.innovation-studio.process-management.status.errored.label",badgeType:"danger",status:Dn.errored,guid:"rx-process-management-grid-errored",gridColumns:[Io.contextKey,Io.instanceId,Io.processDefinitionName,Io.owner,Io.startTime,Io.isStartInstanceError,Io.status],fieldDefinitions:[Ro.contextKey,Ro.instanceId,Ro.processDefinitionName,Ro.owner,Ro.startTime,Ro.isStartInstanceError,Ro.status]},[Dn.completed]:{title:"com.bmc.arsys.rx.innovation-studio.process-management.status.completed.label",badgeType:"success",status:Dn.completed,guid:"rx-process-management-grid-completed",gridColumns:[Io.contextKey,Io.instanceId,Io.processDefinitionName,Io.owner,Io.startTime,Io.endTime,Io.status],fieldDefinitions:[Ro.contextKey,Ro.instanceId,Ro.processDefinitionName,Ro.owner,Ro.startTime,Ro.endTime,Ro.status]}},timeframes:[{id:"$LASTHOUR$",label:"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.last-hour.label",value:z.default.duration(1,"hour")},{id:"$LASTDAY$",label:"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.last-day.label",value:z.default.duration(1,"day")},{id:"$LASTWEEK$",label:"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.last-week.label",value:z.default.duration(1,"week")},{id:"$LASTMONTH$",label:"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.last-month.label",value:z.default.duration(1,"month")},{id:"$LASTTHREEMONTHS$",label:"com.bmc.arsys.rx.innovation-studio.process-management.timeframe.last-three-months.label",value:z.default.duration(3,"month")}],processInstanceGridColumns:Io};class Eo{constructor(e){this.activeModalRef=e,this.processDefinitionName=this.activeModalRef.getData().processDefinitionName,this.isRunButtonDisabled=this.activeModalRef.getData().allowRun,this.processPreviewConfiguration$=(0,R.of)({processDefinitionName:this.processDefinitionName,zoomToFit:!0})}zoomIn(){this.processPreview.zoomIn()}zoomOut(){this.processPreview.zoomOut()}}Eo.\u0275fac=function(e){return new(e||Eo)(o["\u0275\u0275directiveInject"](C.ActiveModalRef))},Eo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Eo,selectors:[["ax-process-preview-modal"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ui,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.processPreview=e.first)}},decls:15,vars:8,consts:[[1,"canvas-toolbar"],["adapt-button","","type","button",1,"zoom-in",3,"click"],[1,"d-icon-search_plus"],["adapt-button","","type","button",1,"zoom-out",3,"click"],[1,"d-icon-search_minus"],[3,"config"],["processPreview",""],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","ok-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",0),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.zoomIn()}),o["\u0275\u0275element"](3,"span",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",3),o["\u0275\u0275listener"]("click",function(){return t.zoomOut()}),o["\u0275\u0275element"](5,"span",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"rx-process-preview",5,6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",7),o["\u0275\u0275elementStart"](9,"button",8),o["\u0275\u0275listener"]("click",function(){return t.activeModalRef.close()}),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"button",9),o["\u0275\u0275listener"]("click",function(){return t.activeModalRef.dismiss()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("config",t.processPreviewConfiguration$),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.isRunButtonDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,4,"com.bmc.arsys.rx.innovation-studio.process-management.run-process.button.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,6,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[C.AdaptButtonComponent,U.RxProcessPreviewComponent],pipes:[x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.canvas-toolbar[_ngcontent-%COMP%]{background:#f0f1f1;border-bottom:1px solid #d6d7d8}']});class Fo{constructor(e){this.rxNumberUtilsService=e}buildInputParamsControls(e){const t=[];return(0,y.forEach)(e,e=>{const i={name:e.name,options:{label:e.name,required:"REQUIRED"===e.fieldOption},defaultValue:e.defaultValue||null,dataType:e.resourceType,validators:[]};switch(i.options.required&&i.validators.push(E.Validators.required),e.resourceType){case S.RX_RECORD_DEFINITION.resourceTypes.selection:{const t=e;i.component=D.SelectFormControlComponent,i.options=Object.assign(Object.assign({},i.options),{options:(0,y.map)(t.optionNamesById,(e,t)=>({id:t,name:e})),emptyOption:!i.options.required});break}case S.RX_RECORD_DEFINITION.resourceTypes.recordInstance:i.component=D.RecordInstanceFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.character:i.component=D.TextFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.boolean:i.component=D.BooleanFormControlComponent,i.options.label="",i.options.description=e.name,i.options.shouldDisplayAsCheckbox=i.options.required;break;case S.RX_RECORD_DEFINITION.resourceTypes.decimal:case S.RX_RECORD_DEFINITION.resourceTypes.integer:case S.RX_RECORD_DEFINITION.resourceTypes.real:i.component=D.CounterFormControlComponent,i.options.allowIntegerOnly=e.resourceType===S.RX_RECORD_DEFINITION.resourceTypes.integer,this.rxNumberUtilsService.isFiniteNumberString(e.defaultValue)&&(i.defaultValue=Number(e.defaultValue));break;case S.RX_RECORD_DEFINITION.resourceTypes.dateOnly:i.component=D.DateFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.dateTime:i.component=D.DateTimeFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.timeOnly:i.component=D.TimeFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.attachment:i.component=D.AttachmentFormControlComponent;break;case S.RX_RECORD_DEFINITION.resourceTypes.list:e.subType===N.RX_PROCESS_DEFINITION.processVariableSubTypes.attachment?(i.component=D.AttachmentFormControlComponent,i.options.filesCount="1000"):i.component=D.InputListFormControlComponent;break;default:i.component=D.TextFormControlComponent}t.push(i)}),t}buildInputParamsModel(e){const t={};return(0,y.forEach)(e,e=>{var i;e.resourceType===S.RX_RECORD_DEFINITION.resourceTypes.boolean?"1"===e.defaultValue?t[e.name]=!0:"0"===e.defaultValue?t[e.name]=!1:t[e.name]=e.defaultValue:t[e.name]=null!==(i=e.defaultValue)&&void 0!==i?i:null}),t}}Fo.\u0275fac=function(e){return new(e||Fo)(o["\u0275\u0275inject"](M.RxNumberUtilsService))},Fo.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Fo,factory:Fo.\u0275fac,providedIn:"root"});class Mo{constructor(e,t){this.context=e,this.manageProcessesService=t,this.inputParamsControls=this.manageProcessesService.buildInputParamsControls(e.getData().inputParams),this.inputParamsModel=this.manageProcessesService.buildInputParamsModel(e.getData().inputParams)}onModelChange(e){this.inputParamsModel=Object.assign(Object.assign({},this.inputParamsModel),e)}startProcess(){this.onBeforeStart(),this.context.close(this.inputParamsModel)}isRunButtonDisabled(){let e=!1;return this.inputParamsControls.filter(e=>e.options.required).map(t=>{const i=this.inputParamsModel[t.name];switch(t.dataType){case S.RX_RECORD_DEFINITION.resourceTypes.character:case S.RX_RECORD_DEFINITION.resourceTypes.object:((0,y.isEmpty)(i)||0===(null==i?void 0:i.trim().length))&&(e=!0);break;case S.RX_RECORD_DEFINITION.resourceTypes.recordInstance:((0,y.isEmpty)(i)||!(0,y.has)(i,"id")||!(0,y.has)(i,"recordDefinitionName")||(0,y.isEmpty)(i.id)||(0,y.isEmpty)(i.recordDefinitionName))&&(e=!0);break;default:((0,y.isNull)(i)||(0,y.isUndefined)(i))&&(e=!0)}}),e}onBeforeStart(){this.inputParamsControls.map(e=>{const t=this.inputParamsModel[e.name];switch(e.dataType){case S.RX_RECORD_DEFINITION.resourceTypes.boolean:this.inputParamsModel[e.name]=!0===t?"1":!1===t?"0":t;break;case S.RX_RECORD_DEFINITION.resourceTypes.decimal:case S.RX_RECORD_DEFINITION.resourceTypes.integer:case S.RX_RECORD_DEFINITION.resourceTypes.real:this.inputParamsModel[e.name]=(null==t?void 0:t.toString())||null;break;case S.RX_RECORD_DEFINITION.resourceTypes.character:this.inputParamsModel[e.name]=null==t?void 0:t.trim();break;case S.RX_RECORD_DEFINITION.resourceTypes.object:this.inputParamsModel[e.name]=(null==t?void 0:t.trim())||null}})}}Mo.\u0275fac=function(e){return new(e||Mo)(o["\u0275\u0275directiveInject"](C.DockedPanelContext),o["\u0275\u0275directiveInject"](Fo))},Mo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Mo,selectors:[["ax-process-run-modal"]],decls:10,vars:9,consts:[[1,"modal-body"],[3,"config","model","modelChange",4,"ngIf"],[4,"ngIf"],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","ok-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"],[3,"config","model","modelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,hi,1,6,"rx-form-builder",1),o["\u0275\u0275template"](2,gi,3,3,"span",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"button",4),o["\u0275\u0275listener"]("click",function(){return t.startProcess()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",5),o["\u0275\u0275listener"]("click",function(){return t.context.dismiss(0)}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.inputParamsControls.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",0===t.inputParamsControls.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isRunButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.innovation-studio.process-management.run-process.button.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,7,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[n.NgIf,C.AdaptButtonComponent,D.FormBuilderComponent],pipes:[x.TranslatePipe],encapsulation:2});class To{constructor(e,t,i,n,o){this.activeModalRef=e,this.translateService=t,this.ngZone=i,this.rxNotificationService=n,this.rxProcessInstanceService=o,this.emptyStateLabel=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.no-log.label"),this.logs=this.activeModalRef.getData().logContent}downloadLog(){this.rxProcessInstanceService.downloadLog(this.activeModalRef.getData().processDefinitionName,this.activeModalRef.getData().instanceId).subscribe(e=>{if((null==e?void 0:e.size)>0){const t=new Blob([e],{type:e.type});this.ngZone.runOutsideAngular(()=>{(0,B.saveAs)(t,"process.log")})}else this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.no-log.label"),"")})}}To.\u0275fac=function(e){return new(e||To)(o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](N.RxProcessInstanceService))},To.\u0275cmp=o["\u0275\u0275defineComponent"]({type:To,selectors:[["ax-process-view-log-modal"]],decls:8,vars:6,consts:[[1,"modal-body"],["class","form-control","readonly","",4,"ngIf"],[3,"type","label",4,"ngIf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","download-log-button",3,"click",4,"ngIf"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"],["readonly","",1,"form-control"],[3,"type","label"],["adapt-button","","type","button","btn-type","primary","rx-id","download-log-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,vi,2,1,"textarea",1),o["\u0275\u0275template"](2,yi,1,2,"adapt-empty-state",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275template"](4,bi,3,3,"button",4),o["\u0275\u0275elementStart"](5,"button",5),o["\u0275\u0275listener"]("click",function(){return t.activeModalRef.dismiss()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.logs),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.logs),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.logs),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,4,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[n.NgIf,C.AdaptButtonComponent,C.AdaptEmptyStateComponent],pipes:[x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}textarea[_ngcontent-%COMP%]{color:#000;resize:none}.modal-body[_ngcontent-%COMP%]{justify-content:center;display:flex}adapt-empty-state[_ngcontent-%COMP%]{align-self:center}']});class Oo{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u,m,f,g,v,x,C,S,D,I,w){this.activatedRoute=e,this.adaptDockedPanelService=t,this.adaptModalService=i,this.errorHandler=n,this.ngZone=o,this.router=r,this.rxBundleCacheService=a,this.rxCommandFactoryService=s,this.rxDefinitionNameService=l,this.rxGainsightConfiguratorService=d,this.rxGlobalCacheService=c,this.rxModalService=p,this.rxNotificationService=u,this.rxPageTitleService=m,this.rxPreviousStateService=f,this.rxProcessDefinitionDataPageService=g,this.rxProcessDefinitionService=v,this.rxProcessInstanceDataPageService=x,this.rxProcessInstanceCountsByStatusDataPageService=C,this.rxProcessInstanceService=S,this.rxSessionExpirationService=D,this.rxSystemConfigurationService=I,this.translateService=w,this.activatedTabs={[Dn.active]:!1,[Dn.suspended]:!1,[Dn.errored]:!1,[Dn.completed]:!1},this.busySubscription=R.NEVER.subscribe(),this.innovationStudioBundleId=h.RX_APPLICATION.innovationStudioBundleId,this.processInstanceStatuses=[Dn.active,Dn.suspended,Dn.errored,Dn.completed],this.selectedTimeframe=[],this.tabs=(0,y.mapValues)(wo.statusTabs,e=>Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)})),this.texts={searchPlaceholder:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label")},this.timeframes=wo.timeframes.map(e=>Object.assign(Object.assign({},e),{label:this.translateService.instant(e.label)})),this.activeTabStatus=Dn.active,this.destroyed$=new R.ReplaySubject(1),this.refreshProcessInstanceCountsSubject=new R.Subject,this.refreshProcessDataSubject=new R.BehaviorSubject(!0),this.breadcrumbItems$=(0,R.combineLatest)([this.refreshProcessInstanceCountsSubject,this.refreshProcessDataSubject]).pipe((0,b.map)(()=>{const e=[{data:{},label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.manage-processes.menu.label")}];return this.selectedProcess&&this.selectedProcess[0].data.name&&e.push({label:this.rxDefinitionNameService.getDisplayName(this.selectedProcess[0].data.name),data:{}}),e})),this.bundleId$=this.activatedRoute.params.pipe((0,b.pluck)("bundleId"),(0,b.shareReplay)(1)),this.bundleDescriptor$=this.bundleId$.pipe((0,b.switchMap)(e=>this.rxGlobalCacheService.getBundleDescriptor(e))),this.isProcessHistoryEnabled$=this.rxSystemConfigurationService.getConfiguration("Process-History-Level").pipe((0,b.take)(1),(0,b.map)(e=>0!==e.value),(0,b.shareReplay)(1)),this.processActionButtonsState$=(0,R.combineLatest)([this.refreshProcessInstanceCountsSubject,this.refreshProcessDataSubject]).pipe((0,b.switchMap)(()=>(0,R.of)({isRunButtonDisabled:!this.selectedProcess||!this.selectedProcess[0].data.isEnabled,isViewButtonDisabled:!this.selectedProcess||(0,y.isEmpty)(this.selectedProcess[0].data.name)}))),this.processDefinitionOptions$=this.bundleId$.pipe((0,b.switchMap)(e=>(0,R.combineLatest)([this.activatedRoute.queryParams.pipe((0,b.pluck)("definitionName")),this.getProcessDefinitions(e)]).pipe((0,b.map)(([e,t])=>{var i;e=e||"";const n=t.data.map(e=>({label:this.rxDefinitionNameService.getDisplayName(e.name),data:e}));n.unshift({label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.all-processes.label"),data:{name:""}});const o=null!==(i=n.find(t=>t.data.name===e))&&void 0!==i?i:n[0];return this.resetProcessSelection(o),this.refreshProcessInstanceCountsSubject.next(),n})))),this.processInstanceCounts$=this.refreshProcessInstanceCountsSubject.pipe((0,b.switchMap)(()=>{var e;const t={pageSize:-1,startedAfter:(0,z.default)().subtract(this.selectedTimeframe[0].value).toISOString()},i=(null===(e=this.selectedProcess[0])||void 0===e?void 0:e.data.name)?Object.assign(Object.assign({},t),{processDefinitionName:this.selectedProcess[0].data.name}):t;return this.rxProcessInstanceCountsByStatusDataPageService.get({params:i}).pipe((0,b.map)(e=>e.data[0]),(0,b.catchError)(e=>(this.errorHandler.handleError(e),(0,R.of)({status:"",data:[]}))))}),(0,b.map)(e=>(0,y.transform)(e,(e,t,i)=>e[i]=t,{}))),this.vm$=(0,R.combineLatest)([this.bundleDescriptor$,this.processDefinitionOptions$,this.isProcessHistoryEnabled$,this.processInstanceCounts$,this.processActionButtonsState$,this.breadcrumbItems$]).pipe((0,b.map)(([e,t,i,n,o,r])=>({bundleDescriptor:e,processDefinitionOptions:t,isProcessHistoryEnabled:i,processInstanceCounts:n,processActionButtonsState:o,breadcrumbItems:r})),(0,b.tap)(()=>{this.busySubscription.unsubscribe()}),(0,b.catchError)(e=>(this.busySubscription.unsubscribe(),this.errorHandler.handleError(e),(0,R.of)({bundleDescriptor:{friendlyName:"",id:""},processDefinitionOptions:[],isProcessHistoryEnabled:!0,processInstanceCounts:[0,0,0,0],processActionButtonsState:{isRunButtonDisabled:!0,isViewButtonDisabled:!0},breadcrumbItems:[]}))))}ngOnInit(){this.activatedRoute.params.pipe((0,b.pluck)("bundleId"),(0,b.take)(1),(0,b.takeUntil)(this.destroyed$)).subscribe(e=>{this.rxBundleCacheService.bundleId=e,this.setPageTitle()}),this.activatedRoute.queryParams.pipe((0,b.takeUntil)(this.destroyed$)).subscribe(e=>{let t={};const i=(0,y.findIndex)(this.processInstanceStatuses,t=>t===e.status),n=(0,y.find)(this.timeframes,{id:e.timeframe});-1!==i?(this.activeTabIndex=i,this.activeTabStatus=e.status):t=Object.assign(Object.assign({},t),{status:Dn.active}),n?this.selectedTimeframe=[n]:t=Object.assign(Object.assign({},t),{timeframe:(0,y.head)(this.timeframes).id}),(0,y.isEmpty)(t)?this.activatedTabs[e.status]?this.refreshData():this.activatedTabs[e.status]=!0:this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:t,queryParamsHandling:"merge"})}),this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:"Manage processes"}})}ngOnDestroy(){this.refreshProcessDataSubject.complete(),this.refreshProcessInstanceCountsSubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2","subProductLevel3"])}close(){this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"process-definitions"])}getRecordGridConfig(e){return(0,R.of)({enableFiltering:!0,columns:this.getGridColumns(e),enableRowSelection:F.RowSelectionMode.Multiple,getRecordDefinition:()=>(0,R.of)(this.getRecordDefinition(e)),recordIdField:wo.processInstanceGridColumns.instanceId.fieldId,actionButtons:this.getActionButtons(),emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.no-processes.label"),guid:wo.statusTabs[e].guid,searchFieldPlaceholderText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.search.placeholder"),getData:t=>((0,y.remove)(t.propertySelection,e=>e===String(S.RX_RECORD_DEFINITION.coreFieldIds.id)),this.refreshProcessInstanceCountsSubject.next(!0),this.getProcessInstanceRuns(Object.assign({},(0,y.omit)(t,["shouldIncludeTotalSize","recorddefinition","searchText"])),this.tabs[e].status)),styles:"flex-fill"})}onTimeframeChange(e){this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{timeframe:(0,y.head)(e).id},queryParamsHandling:"merge"})}optionFormatter(e){return e.label}previewProcess(e){this.adaptModalService.open({title:this.rxDefinitionNameService.getDisplayName(this.selectedProcess[0].data.name),content:Eo,data:{processDefinitionName:this.selectedProcess[0].data.name,allowRun:e}}).then(()=>{this.runProcess()}).catch(y.noop)}refreshData(){this.isProcessHistoryEnabled$.subscribe(e=>{var t;e?null===(t=this.getCurrentGrid())||void 0===t||t.api.refresh().subscribe():this.refreshProcessDataSubject.next(!0);const i=this.selectedProcess&&this.selectedProcess[0].data.name||"",n=[h.RX_APPLICATION.innovationStudioBundleId,"process","manage",this.rxBundleCacheService.bundleId],o=this.activatedRoute.snapshot.queryParams;i?this.router.navigate(n,{queryParams:{definitionName:i},queryParamsHandling:"merge"}):this.router.navigate(n,{queryParams:(0,y.omit)(o,"definitionName")})})}resetProcessSelection(e){this.selectedProcess=[e],this.refreshData()}runProcess(){this.rxProcessDefinitionService.getInputParams(this.selectedProcess[0].data.name).subscribe(e=>{(0,R.from)(this.adaptDockedPanelService.open({title:this.rxDefinitionNameService.getDisplayName(this.selectedProcess[0].data.name),content:Mo,size:"lg",data:{inputParams:e}})).pipe((0,b.switchMap)(e=>(0,y.some)(e,e=>(0,y.some)(e,e=>e instanceof File))?this.runProcessWithAttachments(e):this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.process.command.StartProcessInstanceCommand").execute({processDefinitionName:this.selectedProcess[0].data.name,processInputValues:e})),(0,b.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.run-process.success.message")),this.refreshData()}),(0,b.catchError)(e=>(e!==C.DismissReasons.CLOSE_BTN&&this.refreshData(),(0,R.throwError)(e)))).subscribe()})}tabChanged({index:e}){this.activeTabStatus=this.processInstanceStatuses[e],this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{status:this.activeTabStatus},queryParamsHandling:"merge"})}executeAction(e,t){const i=(0,y.castArray)(this.getCurrentGrid().api.getSelectedRows()).map(i=>{const n={processDefinitionName:i.processDefinitionName,processInstanceId:i.instanceId};return this.rxCommandFactoryService.forResourceType(e).execute(t?Object.assign(Object.assign({},n),{cancelReason:t}):n)});(0,R.forkJoin)(i).pipe((0,b.finalize)(()=>{this.refreshData()})).subscribe()}getActionButtons(){return[{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.suspend.button.label"),style:"tertiary",iconCls:"pause_circle_o",hidden:()=>this.isActionButtonDisabled(In.suspend),actions:[{name:()=>{this.executeAction("com.bmc.arsys.rx.application.process.command.SuspendProcessInstanceCommand")}}]},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.resume.button.label"),style:"tertiary",iconCls:"play_o",hidden:()=>this.isActionButtonDisabled(In.resume),actions:[{name:()=>{this.executeAction("com.bmc.arsys.rx.application.process.command.ActivateProcessInstanceCommand")}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.cancel.label"),style:"tertiary",iconCls:"cross_adapt",hidden:()=>this.isActionButtonDisabled(In.cancel),actions:[{name:()=>{this.rxModalService.prompt({title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.cancel-process.label"),modalStyle:I.RX_MODAL.modalStyles.prompt,message:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.cancellation-reason.label")}).then(e=>{e.response&&this.executeAction("com.bmc.arsys.rx.application.process.command.CancelProcessInstanceCommand",e.answer)})}}]},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.view-log.button.label"),style:"tertiary",iconCls:"monitor_gear_eye",disabled:()=>this.isActionButtonDisabled(In.viewLog),actions:[{name:()=>{const e=this.getCurrentGrid().api.getFirstSelectedRow();this.rxProcessInstanceService.getLog(e.processDefinitionName,e.instanceId).subscribe(t=>{this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.title",{processDefinitionName:this.rxDefinitionNameService.getDisplayName(e.processDefinitionName),processInstanceId:e.instanceId}),content:To,size:g.OpenViewActionModalSize.Xlarge,data:t}).catch(y.noop)})}}]},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.download-log.button.label"),style:"tertiary",iconCls:"download",disabled:()=>this.isActionButtonDisabled(In.downloadLog),actions:[{name:()=>{const e=this.getCurrentGrid().api.getFirstSelectedRow();this.rxProcessInstanceService.downloadLog(e.processDefinitionName,e.instanceId).subscribe(e=>{if((null==e?void 0:e.size)>0){const t=new Blob([e],{type:e.type});this.ngZone.runOutsideAngular(()=>{(0,B.saveAs)(t,"process.log")})}else this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.process-management.view-log.modal.no-log.label"),"")})}}]}]}getCurrentGrid(){return this.recordGrids.find(e=>e.guid===wo.statusTabs[this.activeTabStatus].guid)}getGridColumns(e){return wo.statusTabs[e].gridColumns.map(e=>{const t=Object.assign(Object.assign({},e),{title:this.translateService.instant(e.title)});return e.fieldId===wo.processInstanceGridColumns.contextKey.fieldId?t.cellTemplate=this.contextKeyCellTemplate:e.fieldId===wo.processInstanceGridColumns.processDefinitionName.fieldId&&(t.cellTemplate=this.processDefinitionCellTemplate),t})}getProcessDefinitions(e){return this.rxSessionExpirationService.keepSessionAlive().pipe((0,b.switchMap)(()=>this.rxProcessDefinitionDataPageService.get({params:{propertySelection:["name","isEnabled"],bundleId:e}}).pipe((0,b.catchError)(e=>(this.errorHandler.handleError(e),this.rxProcessDefinitionDataPageService.getEmptyDataPage())))))}getProcessInstanceRuns(e,t){var i;const n=Object.assign(Object.assign({},e),{startedAfter:(0,z.default)().subtract(this.selectedTimeframe[0].value).toISOString()}),o=(null===(i=this.selectedProcess[0])||void 0===i?void 0:i.data.name)?Object.assign(Object.assign({},n),{processDefinitionName:this.selectedProcess[0].data.name}):n;return this.rxProcessInstanceDataPageService.get({params:Object.assign(Object.assign({},o),{status:t})}).pipe((0,b.map)(e=>Object.assign(Object.assign({},e),{status:t})),(0,b.catchError)(e=>(this.errorHandler.handleError(e),(0,R.of)({status:"",data:[]}))))}getRecordDefinition(e){const t=wo.statusTabs[e].fieldDefinitions,i=t.reduce((e,t)=>(e[t.id]=t,e),{});return{fieldDefinitions:t,fieldDefinitionsById:i}}isActionButtonDisabled(e){const t=this.getCurrentGrid().api.getSelectedRows();switch(e){case In.suspend:return(0,y.some)(t,e=>e.status!==Dn.active);case In.resume:return(0,y.some)(t,e=>e.status!==Dn.suspended);case In.cancel:return(0,y.some)(t,e=>e.status!==Dn.suspended&&e.status!==Dn.active);case In.downloadLog:case In.viewLog:return 1!==t.length;default:return!0}}runProcessWithAttachments(e){const t=new FormData,i=(0,y.pickBy)(e,e=>(0,y.some)(e,e=>e instanceof File));(0,y.forOwn)(i,(i,n)=>{i.forEach(e=>{t.append(n,e)}),delete e[n]});const n={processDefinitionName:this.selectedProcess[0].data.name,resourceType:"com.bmc.arsys.rx.application.process.command.StartProcessInstanceCommand",processInputValues:e};return t.append("commandInstance",JSON.stringify(n)),this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.process.command.StartProcessInstanceCommand").execute(t)}setPageTitle(){this.rxGlobalCacheService.getBundleFriendlyName(this.rxBundleCacheService.bundleId).pipe((0,b.take)(1)).subscribe(e=>{this.rxPageTitleService.set([this.translateService.instant("com.bmc.arsys.rx.innovation-studio.manage-processes.menu.label"),e],this.rxGlobalCacheService.applicationId)})}}Oo.\u0275fac=function(e){return new(e||Oo)(o["\u0275\u0275directiveInject"](p.ActivatedRoute),o["\u0275\u0275directiveInject"](C.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](C.AdaptModalService),o["\u0275\u0275directiveInject"](o.ErrorHandler),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](h.RxBundleCacheService),o["\u0275\u0275directiveInject"](h.RxCommandFactoryService),o["\u0275\u0275directiveInject"](h.RxDefinitionNameService),o["\u0275\u0275directiveInject"](D.RxGainsightConfiguratorService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](I.RxModalService),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](h.RxPageTitleService),o["\u0275\u0275directiveInject"](h.RxPreviousStateService),o["\u0275\u0275directiveInject"](N.RxProcessDefinitionDataPageService),o["\u0275\u0275directiveInject"](N.RxProcessDefinitionService),o["\u0275\u0275directiveInject"](N.RxProcessInstanceDataPageService),o["\u0275\u0275directiveInject"](N.RxProcessInstanceCountsByStatusDataPageService),o["\u0275\u0275directiveInject"](N.RxProcessInstanceService),o["\u0275\u0275directiveInject"](h.RxSessionExpirationService),o["\u0275\u0275directiveInject"](h.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](x.TranslateService))},Oo.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Oo,selectors:[["ax-process-management"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](xi,7),o["\u0275\u0275viewQuery"](Ci,7),o["\u0275\u0275viewQuery"](F.RecordGridComponent,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.contextKeyCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.processDefinitionCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrids=e)}},decls:7,vars:6,consts:[["class","h-100",4,"ngIf"],["contextKeyCellTemplate",""],["processDefinitionCellTemplate",""],[3,"options"],[1,"h-100"],[1,"header","d-flex","align-items-center"],[1,"rx-ellipsis","col-2","pb-1",3,"adaptTooltip"],[1,"breadcrumbs-container","pt-1"],[3,"items","selectedItem"],[1,"ml-auto","m-2"],["rx-id","close-button","adapt-button","","type","button","size","small","btn-type","secondary",3,"click"],[1,"process-management-container"],[3,"openedId","adjustMainContainerWidth"],[3,"iconClass","headerTitle"],[1,"d-flex","flex-column","h-100"],[1,"d-flex","justify-content-start","mb-3"],["adapt-button","","type","button","btn-type","primary","rx-id","run-button","size","small",1,"mr-2","d-icon-left-play_o",3,"disabled","click"],["adapt-button","","type","button","rx-id","view-button","size","small","btn-type","secondary",1,"d-icon-left-eye",3,"disabled","click"],[1,"process-list","h-100"],[1,"h-100","d-flex",3,"ngModel","options","optionFormatter","enableFilter","inline","selectAllButton","deselectAllButton","texts","multiple","singleSelectStyle","popupMaxHeight","ngModelChange"],[1,"main","h-100"],["class","h-100 d-flex flex-column",4,"ngIf"],["class","d-flex align-items-center justify-content-center h-100",4,"ngIf"],[1,"h-100","d-flex","flex-column"],["rx-id","timeframe","name","timeframe",1,"form-group","d-block",3,"label","ngModel","options","optionFormatter","ngModelChange"],["rx-id","tabs",1,"h-100",3,"type","tab-active","tab-active-changed"],[4,"ngFor","ngForOf"],[3,"adapt-tab-title","badge","badge-type"],["class","pt-3",3,"config",4,"ngIf"],[1,"pt-3",3,"config"],[1,"d-flex","align-items-center","justify-content-center","h-100"],["type","objects",3,"label"],[1,"rx-ellipsis"],[3,"routerLink"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,wi,27,33,"div",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275template"](2,Fi,4,8,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,Mi,2,3,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275element"](6,"rx-busy-indicator",3)),2&e&&(o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,2,t.vm$)),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](4,se,t.busySubscription)))},directives:[n.NgIf,I.RxBusyIndicatorComponent,C.AdaptTooltipDirective,I.RxBreadcrumbBarComponent,C.AdaptButtonComponent,C.AdaptSidebarComponent,C.AdaptSidebarItemComponent,C.AdaptRxSelectComponent,E.NgControlStatus,E.NgModel,C.AdaptTabsComponent,n.NgForOf,C.AdaptTabsPanelComponent,F.RecordGridComponent,C.AdaptEmptyStateComponent,p.RouterLinkWithHref],pipes:[n.AsyncPipe,x.TranslatePipe,n.LowerCasePipe,h.RxDefinitionNamePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{position:relative;display:block;height:100%}adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}.header[_ngcontent-%COMP%]{background:#f0f1f1;border-bottom:1px solid #d6d7d8}.breadcrumbs-container[_ngcontent-%COMP%]{font-size:.9375rem}.process-management-container[_ngcontent-%COMP%]{height:calc(100% - 60px)}.process-list[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]  .rx-select__controls{display:none}[_nghost-%COMP%]  .rx-select__options-wrapper{width:100%}[_nghost-%COMP%]  .tab-content{padding:0}[_nghost-%COMP%]  .tab-content>.active{display:flex;flex-direction:column}']});class No{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxGlobalCacheService=t,this.router=i}canActivate(e){const t=e.params.definitionName,i=this.rxDefinitionNameService.getBundleId(t);return this.rxGlobalCacheService.getBundleDescriptor(i).pipe((0,b.map)(e=>!e.isApplication||this.rxDefinitionNameService.getDisplayName(t)!==h.RX_APPLICATION.shellDefinitionName||this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"shell",i])))}}No.\u0275fac=function(e){return new(e||No)(o["\u0275\u0275inject"](h.RxDefinitionNameService),o["\u0275\u0275inject"](h.RxGlobalCacheService),o["\u0275\u0275inject"](p.Router))},No.\u0275prov=o["\u0275\u0275defineInjectable"]({token:No,factory:No.\u0275fac,providedIn:"root"});class Ao{constructor(e,t,i){this.context=e,this.translateService=t,this.axBundleDeploymentService=i,this.bundleId="",this.bundleCreationStatus="",this.bundleCreationFinishedMessage="",this.bundleName="",this.bundleShortName="",this.deploymentStatus=I.ProgressIndicatorStatus,this.groupId="",this.type=this.context.getData().type===h.RX_BUNDLE.bundleTypes.application?this.translateService.instant("com.bmc.arsys.rx.client.common.application.label"):this.translateService.instant("com.bmc.arsys.rx.client.common.library.label"),this.bundleNameTooltip=new h.Tooltip(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-bundle.name.tooltip",{bundleType:this.type.toLowerCase()})),this.bundleShortNameTooltip=new h.Tooltip(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-bundle.short-name.tooltip",{bundleType:this.type.toLowerCase()})),this.groupIdTooltip=new h.Tooltip(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-bundle.group-id.tooltip",{bundleType:this.type.toLowerCase()}))}create(){this.bundleCreationStatus=I.ProgressIndicatorStatus.InProgress,this.axBundleDeploymentService.create({id:this.bundleId,name:this.bundleShortName,friendlyName:this.bundleName,developerId:this.groupId,isApplication:this.context.getData().type===h.RX_BUNDLE.bundleTypes.application}).pipe((0,b.catchError)(e=>(this.bundleCreationStatus=I.ProgressIndicatorStatus.Failed,this.bundleCreationFinishedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-bundle.failure.message",{bundleType:this.type}),(0,R.throwError)(e)))).subscribe(e=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(e.headers.get("location").split("/"))).subscribe(e=>{e.isFinished?(this.bundleCreationStatus=I.ProgressIndicatorStatus.Finished,this.bundleCreationFinishedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.bundle.create.successful.label",{bundleType:this.type})):e.errorMessage&&(this.bundleCreationStatus=I.ProgressIndicatorStatus.Failed,this.bundleCreationFinishedMessage=e.errorMessage)})})}close(e){(0,y.isEmpty)(e)||this.bundleCreationStatus!==I.ProgressIndicatorStatus.Finished?this.context.close():this.context.close({bundleId:e})}dismiss(){this.context.dismiss()}setBundleId(){this.bundleId=`${this.groupId}.${this.bundleShortName}`}}var Po,jo;Ao.\u0275fac=function(e){return new(e||Ao)(o["\u0275\u0275directiveInject"](C.ActiveModalRef),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](Wn))},Ao.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ao,selectors:[["ax-create-bundle-modal"]],decls:24,vars:48,consts:[[1,"modal-header"],[1,"modal-title"],["data-dismiss","modal","type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],["createBundleForm","ngForm"],["rx-id","bundle-name","maxlength","254","required","true","name","bundleName",1,"d-block","form-group",3,"label","ngModel","tooltip","autofocus","disabled","ngModelChange"],["rx-id","bundle-short-name","required","true","name","bundleShortName","pattern","^([a-zA-Z0-9]+|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9])$",1,"d-block","form-group",3,"label","ngModel","tooltip","disabled","ngModelChange"],["rx-id","group-id","pattern","[a-zA-Z][a-zA-Z0-9_]*(\\.[a-zA-Z0-9_]+)*","required","true","name","groupId",1,"d-block","form-group",3,"label","ngModel","tooltip","disabled","ngModelChange"],["rx-id","id","name","bundleId",1,"d-block","form-group",3,"label","ngModel","disabled","ngModelChange"],["class","progress","rx-id","progress-bar",4,"ngIf"],["class","d-icon-left-check_adapt","rx-id","operation-succeeded-message",4,"ngIf"],["class","d-icon-left-exclamation_triangle","rx-id","operation-failed-message",4,"ngIf"],[1,"modal-footer","d-flex","w-100"],["adapt-button","","type","button","btn-type","primary","rx-id","create-button",3,"disabled","click",4,"ngIf"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"disabled","click"],["rx-id","progress-bar",1,"progress"],["role","progressbar","aria-valuenow","100","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-intermediate",2,"width","100%"],["rx-id","operation-succeeded-message",1,"d-icon-left-check_adapt"],["rx-id","operation-failed-message",1,"d-icon-left-exclamation_triangle"],["adapt-button","","type","button","btn-type","primary","rx-id","create-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.dismiss()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"form",null,4),o["\u0275\u0275elementStart"](8,"adapt-rx-textfield",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.bundleName=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-textfield",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.bundleShortName=e})("ngModelChange",function(){return t.setBundleId()}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"adapt-rx-textfield",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.groupId=e})("ngModelChange",function(){return t.setBundleId()}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"adapt-rx-textfield",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.bundleId=e}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,Ti,2,0,"div",9),o["\u0275\u0275template"](17,Oi,2,1,"p",10),o["\u0275\u0275template"](18,Ni,2,1,"p",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",12),o["\u0275\u0275template"](20,Ai,3,4,"button",13),o["\u0275\u0275elementStart"](21,"button",14),o["\u0275\u0275listener"]("click",function(){return t.close(t.bundleId)}),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](3,24,"com.bmc.arsys.rx.innovation-studio.workspace.bundle.new.label",o["\u0275\u0275pureFunction1"](40,ei,t.type.toLowerCase()))," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.bundleCreationStatus===t.deploymentStatus.InProgress),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind2"](9,27,"com.bmc.arsys.rx.innovation-studio.workspace.bundle.name.label",o["\u0275\u0275pureFunction1"](42,ei,t.type))),o["\u0275\u0275property"]("ngModel",t.bundleName)("tooltip",t.bundleNameTooltip)("autofocus",!0)("disabled",t.bundleCreationStatus===t.deploymentStatus.InProgress||t.bundleCreationStatus===t.deploymentStatus.Finished),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind2"](11,30,"com.bmc.arsys.rx.innovation-studio.workspace.bundle.short-name.label",o["\u0275\u0275pureFunction1"](44,ei,t.type))),o["\u0275\u0275property"]("ngModel",t.bundleShortName)("tooltip",t.bundleShortNameTooltip)("disabled",t.bundleCreationStatus===t.deploymentStatus.InProgress||t.bundleCreationStatus===t.deploymentStatus.Finished),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,33,"com.bmc.arsys.rx.innovation-studio.workspace.groupId.label")),o["\u0275\u0275property"]("ngModel",t.groupId)("tooltip",t.groupIdTooltip)("disabled",t.bundleCreationStatus===t.deploymentStatus.InProgress||t.bundleCreationStatus===t.deploymentStatus.Finished),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind2"](15,35,"com.bmc.arsys.rx.innovation-studio.workspace.bundle.id.label",o["\u0275\u0275pureFunction1"](46,ei,t.type))),o["\u0275\u0275property"]("ngModel",t.bundleId)("disabled",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.bundleCreationStatus===t.deploymentStatus.InProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.bundleCreationStatus===t.deploymentStatus.Finished),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.bundleCreationStatus===t.deploymentStatus.Failed),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.bundleCreationStatus!==t.deploymentStatus.Finished),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",t.bundleCreationStatus===t.deploymentStatus.InProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](23,38,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[E["\u0275NgNoValidate"],E.NgControlStatusGroup,E.NgForm,C.AdaptRxTextfieldComponent,E.MaxLengthValidator,E.RequiredValidator,E.NgControlStatus,E.NgModel,E.PatternValidator,n.NgIf,C.AdaptButtonComponent],pipes:[x.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.d-icon-left-check_adapt[_ngcontent-%COMP%]:before{color:#00a79d}.d-icon-left-exclamation_triangle[_ngcontent-%COMP%]:before{color:#f83200}']}),function(e){e.All="all",e.Applications="applications",e.Libraries="libraries"}(Po||(Po={})),function(e){e.All="all",e.Editable="editable"}(jo||(jo={}));class _o{constructor(e,t,i,n,o,r,a,s,l,d,c,p){this.rxCurrentUserService=e,this.rxGlobalCacheService=t,this.rxOverlayService=i,this.rxPageTitleService=n,this.translateService=o,this.rxSmartReportingService=r,this.rxNotificationService=a,this.axBundleDeploymentService=s,this.adaptModalService=l,this.router=d,this.renderer=c,this.rxGainsightConfiguratorService=p,this.bundleTypeSelectorModel=[!0,!1,!1],this.bundleTypes=h.RX_BUNDLE.bundleTypes,this.editableBundles=this.rxCurrentUserService.getEditableBundles(),this.editableBundleSelectorModel=[!1,!0],this.isBusinessAnalyst=this.rxCurrentUserService.isBusinessAnalyst(),this.isShared=this.rxOverlayService.getCurrentOverlayContext().isShared,this.isInstallBundleActionAvailable=this.rxCurrentUserService.isAdministrator()&&!this.isShared,this.innovationStudioBundleId=h.RX_APPLICATION.innovationStudioBundleId,this.isLoadingData=!0,this.isNewBundleActionAvailable=!this.isShared,this.texts={emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.no-editable-bundles.label")},this.applicationLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.application.label"),this.bundleTypeSelector$=new R.BehaviorSubject(Po.All),this.destroyed$=new R.ReplaySubject(1),this.editableBundleSelector$=new R.BehaviorSubject(jo.Editable),this.libraryLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.library.label"),this.bundles$=this.rxGlobalCacheService.getBundleDescriptors().pipe((0,b.map)(e=>e.filter(e=>e.id!==h.RX_APPLICATION.settingsBundleId&&e.id!==h.RX_APPLICATION.standardlib&&e.id!==h.RX_APPLICATION.innovationStudioBundleId&&e.id!==h.RX_APPLICATION.platformBundleId).map(e=>Object.assign(Object.assign({},e),{type:e.isApplication?this.applicationLabel:this.libraryLabel,isEditable:!this.isBusinessAnalyst||(0,y.includes)(this.editableBundles,e.id)}))),(0,b.tap)(()=>{this.isLoadingData=!1}),(0,b.catchError)(e=>(this.isLoadingData=!1,(0,R.throwError)(e)))),this.bundlesToDisplay$=(0,R.combineLatest)([this.bundleTypeSelector$,this.editableBundleSelector$,this.bundles$]).pipe((0,b.map)(([e,t,i])=>i.filter(i=>(e===Po.All||e===Po.Applications&&i.isApplication||e===Po.Libraries&&!i.isApplication)&&(t===jo.All||i.isEditable))),(0,b.takeUntil)(this.destroyed$)),this.bundleTypeSelectorConfig=[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"),value:Po.All},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.applications.label"),value:Po.Applications},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.libraries.label"),value:Po.Libraries}],this.editableBundleSelectorConfig=[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"),value:jo.All},{name:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.bundle.editable.label"),value:jo.Editable}]}ngOnInit(){this.columns=[{field:"friendlyName",header:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),cellTemplate:this.nameColumnTemplate},{field:"type",header:this.translateService.instant("com.bmc.arsys.rx.client.common.item-type.label")},{field:"developerName",header:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.column.developer.label")},{field:"displayVersion",header:this.translateService.instant("com.bmc.arsys.rx.client.common.version.label")},{field:"id",hidden:!0}],this.rxSmartReportingService.getSmartReportingUrl().subscribe(e=>{this.smartReportingUrl=e}),this.setPageTitle(),this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:"Workspace"}})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete(),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2"])}updateBundleType(e){this.bundleTypeSelector$.next(this.bundleTypeSelectorConfig[(0,y.findIndex)(e,Boolean)].value)}toggleEditableBundles(e){this.editableBundleSelector$.next(this.editableBundleSelectorConfig[(0,y.findIndex)(e,Boolean)].value)}openFileDialog(){this.renderer.selectRootElement(this.fileInput.nativeElement,!0).click()}onClickFileInput(e){e.target.value=""}onChangeFileInput(e){var t;const i=(0,y.toArray)(e.target.files),n={title:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.install.button.label"),status:I.ProgressIndicatorStatus.InProgress,header:this.translateService.instant("com.bmc.arsys.rx.client.common.application-or-library.label"),subHeader:null===(t=i[0])||void 0===t?void 0:t.name.replace(/\.zip$/i,""),inProgressMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.installing.label"),finishedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.install-successful.label"),failedMessage:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.install-failed.label"),operationStatusMessage:""};this.openModal(I.ProgressIndicatorModalComponent,n).then(()=>window.location.reload()).catch(y.noop),this.axBundleDeploymentService.install(i[0]).pipe((0,b.catchError)(e=>(n.status=I.ProgressIndicatorStatus.Failed,n.finishedMessage=this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.install-failed.label"),(0,R.throwError)(e)))).subscribe(e=>{this.axBundleDeploymentService.pollDeploymentStatus((0,y.last)(e.headers.get("location").split("/"))).subscribe(e=>{e.isFinished?(n.status=I.ProgressIndicatorStatus.Finished,n.operationStatusMessage=this.axBundleDeploymentService.buildStatusMessage(e.deploymentParsedStatus)):e.errorMessage&&(n.status=I.ProgressIndicatorStatus.Failed,n.operationStatusMessage=e.errorMessage)})})}createBundle(e){this.openModal(Ao,{type:e}).then(t=>{const i=null==t?void 0:t.bundleId;i&&(this.rxGlobalCacheService.clear(),this.router.navigate([h.RX_APPLICATION.innovationStudioBundleId,i]).then(()=>{window.location.reload()}),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.create-bundle.success.message",{bundleType:e.toLowerCase()})))}).catch(y.noop)}openModal(e,t){return this.adaptModalService.open({content:e,data:t,size:"sm",isDialog:!0,hideBackdrop:!1})}setPageTitle(){this.rxPageTitleService.set(this.translateService.instant("com.bmc.arsys.rx.innovation-studio.workspace.page.label"),this.rxGlobalCacheService.applicationId)}}_o.\u0275fac=function(e){return new(e||_o)(o["\u0275\u0275directiveInject"](h.RxCurrentUserService),o["\u0275\u0275directiveInject"](h.RxGlobalCacheService),o["\u0275\u0275directiveInject"](h.RxOverlayService),o["\u0275\u0275directiveInject"](h.RxPageTitleService),o["\u0275\u0275directiveInject"](x.TranslateService),o["\u0275\u0275directiveInject"](h.RxSmartReportingService),o["\u0275\u0275directiveInject"](h.RxNotificationService),o["\u0275\u0275directiveInject"](Wn),o["\u0275\u0275directiveInject"](C.AdaptModalService),o["\u0275\u0275directiveInject"](p.Router),o["\u0275\u0275directiveInject"](o.Renderer2),o["\u0275\u0275directiveInject"](D.RxGainsightConfiguratorService))},_o.\u0275cmp=o["\u0275\u0275defineComponent"]({type:_o,selectors:[["ax-workspace"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Qt,5),o["\u0275\u0275viewQuery"](Pi,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.fileInput=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.nameColumnTemplate=e.first)}},decls:23,vars:28,consts:[[1,"d-flex","flex-column","h-100"],[1,"row","w-100","align-items-center"],[1,"h1","px-6","py-3","m-0"],[1,"d-flex","py-3"],[1,"pl-6","pt-3","pr-2","workspace-toolbar-label","mb-2"],["size","small","rx-id","select-bundle-type",1,"pt-1",3,"ngModel","config","multiselectable","uncheckable","ngModelChange"],["class","pl-5 pt-1","size","small","rx-id","select-bundle-type-ba",3,"ngModel","config","multiselectable","uncheckable","ngModelChange",4,"ngIf"],[1,"d-flex","py-3","align-items-center"],["class","split-line ml-4",4,"ngIf"],["class","dropdown","adaptDropdown","",4,"ngIf"],["adapt-button","","type","file","btn-type","tertiary","class","d-icon-left-download","rx-id","install-button",3,"click",4,"ngIf"],["type","file","accept",".zip","hidden","","rx-id","install-file-input",3,"multiple","change","click"],["fileInput",""],["class","ml-auto py-3",4,"ngIf"],[1,"h-100"],["dataKey","friendlyName","sortField","friendlyName",1,"mt-2",3,"value","columns","sortable","sortOrder","loading","scrollable","scrollHeight","hasEmptyState","texts","bordered"],["nameColumnTemplate",""],["size","small","rx-id","select-bundle-type-ba",1,"pl-5","pt-1",3,"ngModel","config","multiselectable","uncheckable","ngModelChange"],[1,"split-line","ml-4"],["adaptDropdown","",1,"dropdown"],["adapt-button","","adaptDropdownToggle","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start"],["adaptDropdownMenu","",1,"dropdown-menu"],["rx-id","create-application",1,"dropdown-item",3,"click"],["rx-id","create-library",1,"dropdown-item",3,"click"],["adapt-button","","type","file","btn-type","tertiary","rx-id","install-button",1,"d-icon-left-download",3,"click"],[1,"ml-auto","py-3"],["rx-id","reports-link","target","_blank",1,"d-icon-file_chart","d-icon-left","px-4","py-2",3,"href"],[1,"rx-ellipsis"],[3,"routerLink"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h1",2),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"span",4),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"adapt-button-group",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.bundleTypeSelectorModel=e})("ngModelChange",function(e){return t.updateBundleType(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,ji,1,4,"adapt-button-group",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",7),o["\u0275\u0275template"](12,_i,1,0,"div",8),o["\u0275\u0275template"](13,Vi,11,9,"div",9),o["\u0275\u0275template"](14,ki,3,3,"button",10),o["\u0275\u0275elementStart"](15,"input",11,12),o["\u0275\u0275listener"]("change",function(e){return t.onChangeFileInput(e)})("click",function(e){return t.onClickFileInput(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](17,Bi,4,4,"div",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",14),o["\u0275\u0275element"](19,"adapt-table",15),o["\u0275\u0275pipe"](20,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,Li,3,5,"ng-template",null,16,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,22,"com.bmc.arsys.rx.innovation-studio.workspace.page.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,24,"com.bmc.arsys.rx.innovation-studio.workspace.show.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.bundleTypeSelectorModel)("config",t.bundleTypeSelectorConfig)("multiselectable",!1)("uncheckable",!1),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isBusinessAnalyst),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",(t.isInstallBundleActionAvailable||t.isNewBundleActionAvailable)&&!t.isBusinessAnalyst),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isNewBundleActionAvailable&&!t.isBusinessAnalyst),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isInstallBundleActionAvailable&&!t.isBusinessAnalyst),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("multiple",!1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.smartReportingUrl),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",o["\u0275\u0275pipeBind1"](20,26,t.bundlesToDisplay$))("columns",t.columns)("sortable",!0)("sortOrder",1)("loading",t.isLoadingData)("scrollable",!0)("scrollHeight","flex")("hasEmptyState",t.isBusinessAnalyst&&0===t.editableBundles.length)("texts",t.texts)("bordered",!0))},directives:[C.AdaptButtonGroupComponent,E.NgControlStatus,E.NgModel,n.NgIf,$.AdaptTableComponent,C.AdaptDropdownDirective,C.AdaptButtonComponent,C.AdaptDropdownToggleDirective,C.AdaptDropdownMenuDirective,p.RouterLinkWithHref],pipes:[x.TranslatePipe,n.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.workspace-toolbar-label[_ngcontent-%COMP%]{font-size:.75rem}.split-line[_ngcontent-%COMP%]{height:1.125rem;border-left:1px solid #d6d7d8}']});class Vo{constructor(e,t,i,n,o){this.rxBundleService=e,this.rxLogService=t,this.rxGlobalCacheService=i,this.rxViewActionRegistryService=n,this.rxViewComponentRegistryService=o}resolve(){let e=[];return this.rxGlobalCacheService.getLicensedBundleDescriptors().pipe((0,b.map)(e=>e.filter(e=>e.containsAngular)),(0,b.tap)(t=>e=t),(0,b.map)(e=>e.map(e=>e.id)),(0,b.switchMap)(e=>e.length?this.rxBundleService.loadBundles(e,!0):(0,R.of)(e)),(0,b.switchMap)(e=>this.rxViewComponentRegistryService.resolveAsyncDescriptors().pipe((0,b.map)(()=>e))),(0,b.tap)(t=>{const i=this.rxViewComponentRegistryService.getRegisteredComponents(),n=this.rxViewActionRegistryService.getRegisteredActions();(0,y.forEach)(t,t=>{if(t.isBundleCompiled){const o=(0,y.find)(e,{id:t.bundleId});if(o){const e=(0,y.filter)(o.uiOptions.viewComponents,e=>!i.has(e)),t=(0,y.filter)(o.uiOptions.viewActions,e=>!n.has(e));(0,y.isEmpty)(e)||this.rxLogService.warning(`${o.id}: Unregistered view components found in the manifest \n ${e}`),(0,y.isEmpty)(t)||this.rxLogService.warning(`${o.id}: Unregistered view actions found in the manifest \n ${t}`)}}})}),(0,b.shareReplay)(1))}}Vo.\u0275fac=function(e){return new(e||Vo)(o["\u0275\u0275inject"](h.RxBundleService),o["\u0275\u0275inject"](h.RxLogService),o["\u0275\u0275inject"](h.RxGlobalCacheService),o["\u0275\u0275inject"](g.RxViewActionRegistryService),o["\u0275\u0275inject"](g.RxViewComponentRegistryService))},Vo.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Vo,factory:Vo.\u0275fac,providedIn:"root"});class ko{constructor(e,t,i,n,o){this.router=e,this.rxAngularApplicationService=t,this.rxDefinitionNameService=i,this.rxViewDefinitionService=n,this.rxLogService=o}canActivate(e,t){const{bundleId:i}=e.params;return(0,R.forkJoin)({isAngularJsApplication:this.rxAngularApplicationService.isAngularJsApplication(i),shellViewDefinition:this.rxViewDefinitionService.get(this.rxDefinitionNameService.getDefinitionName(i,h.RX_APPLICATION.shellDefinitionName))}).pipe((0,b.map)(({isAngularJsApplication:t,shellViewDefinition:n})=>{const o=t&&!(0,y.includes)(n.layout,'"outlets"');return o&&"shell"===e.parent.routeConfig.path?this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"shell-legacy",i]):!(!o&&"shell-legacy"===e.parent.routeConfig.path)||this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"shell",i])}),(0,b.catchError)(e=>(this.rxLogService.error(e.message),(0,R.of)(this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,i,"record-definitions"])))))}}ko.\u0275fac=function(e){return new(e||ko)(o["\u0275\u0275inject"](p.Router),o["\u0275\u0275inject"](h.RxAngularApplicationService),o["\u0275\u0275inject"](h.RxDefinitionNameService),o["\u0275\u0275inject"](g.RxViewDefinitionService),o["\u0275\u0275inject"](h.RxLogService))},ko.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ko,factory:ko.\u0275fac,providedIn:"root"});class Bo{constructor(e,t,i,n,o){this.router=e,this.rxAngularApplicationService=t,this.rxDefinitionNameService=i,this.rxViewDefinitionService=n,this.rxLogService=o}canActivate(e,t){const{bundleId:i,definitionName:n}=e.params,o=i||this.rxDefinitionNameService.getBundleId(n);return(0,R.forkJoin)({isAngularJsViewDesigner:this.rxAngularApplicationService.isAngularJsViewDesignerBundle(o),viewDefinition:n?this.rxViewDefinitionService.get(n,{headers:new w.HttpHeaders({"Design-Time":"true","default-bundle-scope":o})}):(0,R.of)(null)}).pipe((0,b.map)(({isAngularJsViewDesigner:t,viewDefinition:i})=>{var r,a,s,l;if(e.routeConfig.path.includes("new"))return t&&"legacy-designer"!==(null===(r=e.routeConfig.data)||void 0===r?void 0:r.routerGroup)?this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"view","new-legacy",o],{queryParams:e.queryParams}):!(!t&&"legacy-designer"===(null===(a=e.routeConfig.data)||void 0===a?void 0:a.routerGroup))||this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"view","new",o],{queryParams:e.queryParams});const d=t&&!(0,y.includes)(null==i?void 0:i.layout,'"outlets"');return d||"legacy-designer"!==(null===(s=e.routeConfig.data)||void 0===s?void 0:s.routerGroup)?!d||"legacy-designer"===(null===(l=e.routeConfig.data)||void 0===l?void 0:l.routerGroup)||this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"view","edit-legacy",n]):this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,"view","edit",n])}),(0,b.catchError)(e=>(this.rxLogService.error(e.message),(0,R.of)(this.router.createUrlTree([h.RX_APPLICATION.innovationStudioBundleId,o,"view-definitions"])))))}}Bo.\u0275fac=function(e){return new(e||Bo)(o["\u0275\u0275inject"](p.Router),o["\u0275\u0275inject"](h.RxAngularApplicationService),o["\u0275\u0275inject"](h.RxDefinitionNameService),o["\u0275\u0275inject"](g.RxViewDefinitionService),o["\u0275\u0275inject"](h.RxLogService))},Bo.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Bo,factory:Bo.\u0275fac,providedIn:"root"});class $o{constructor(e,t,i,n){this.rxGlobalCacheService=e,this.router=t,this.rxSessionService=i,this.rxLogService=n,this.defaultUrlTree=this.router.parseUrl("/innovationstudio")}canActivate(e,t){return this.rxSessionService.sessionActive$.pipe((0,b.switchMap)(()=>this.checkBundleState(e)))}checkBundleState(e){const t=e.paramMap.get("bundleId");return this.rxGlobalCacheService.getBundleDescriptor(t).pipe((0,b.map)(e=>!!e||(this.rxLogService.warning(`Invalid bundle ID: ${t}. Redirecting to home page.`),this.defaultUrlTree)))}}$o.\u0275fac=function(e){return new(e||$o)(o["\u0275\u0275inject"](h.RxGlobalCacheService),o["\u0275\u0275inject"](p.Router),o["\u0275\u0275inject"](h.RxSessionService),o["\u0275\u0275inject"](h.RxLogService))},$o.\u0275prov=o["\u0275\u0275defineInjectable"]({token:$o,factory:$o.\u0275fac,providedIn:"root"});const Lo=[{path:"",redirectTo:"workspace",pathMatch:"full"},{path:"workspace",component:_o,pathMatch:"full"},{path:"record",canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",data:{definitionType:"record",routerGroup:"legacy-designer"},children:[{path:"new2/:bundleId",component:f.RecordDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-15263"}},{path:"edit2/:definitionName",component:f.RecordDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-15263"}},{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:"edit-data-new/:definitionName",component:Co,data:{featureId:"DRD21-10996"},canActivate:[h.RxFeatureGuard]},{path:"edit-data/:definitionName",component:Do,data:{routerGroup:"legacy-designer",legacyDesignerName:So.legacyDesignerNames.recordDataEditor}}]},{path:"view",data:{definitionType:"view",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{AxBundleResolver:Vo,RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:l.ViewDesignerPageComponent,canActivate:[$o,Bo]},{path:"edit/:definitionName",component:l.ViewDesignerPageComponent,canActivate:[No,Bo]},{path:"new-legacy/:bundleId",component:Do,canActivate:[$o,Bo],data:{routerGroup:"legacy-designer"}},{path:"edit-legacy/:definitionName",component:Do,canActivate:[No,Bo],data:{routerGroup:"legacy-designer"}}]},{path:"process",data:{definitionType:"process",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],runGuardsAndResolvers:"always",children:[{path:"new2/:bundleId",component:d.ProcessDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},data:{featureId:"DRD21-11025"}},{path:"edit2/:definitionName",component:d.ProcessDesignerPageComponent,canActivate:[h.RxFeatureGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},data:{featureId:"DRD21-11025"}},{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:"manage/:bundleId",component:Oo,canActivate:[$o]},{path:"instance/:definitionName/:instanceId",component:Do,data:{routerGroup:"legacy-designer",legacyDesignerName:So.legacyDesignerNames.processPreview}}]},{path:"rule",data:{definitionType:"rule",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}}]},{path:"association",data:{definitionType:"association",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:"new2/:bundleId",component:a.RxAssociationDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-14986"}},{path:"edit2/:definitionName",component:a.RxAssociationDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-14986"}}]},{path:"named-list",data:{definitionType:"named-list"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:m.RxNamedListDesignerPageComponent,canActivate:[$o]},{path:"edit/:definitionName",component:m.RxNamedListDesignerPageComponent}]},{path:"web-api",data:{definitionType:"web-api",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:"new2/:bundleId",component:v.RxWebApiDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-17752"}},{path:"edit2/:definitionName",component:v.RxWebApiDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-17752"}}]},{path:"document",data:{definitionType:"document",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new2/:bundleId",component:r.DocumentDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-14961"}},{path:"edit2/:definitionName",component:r.DocumentDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-14961"}},{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}}]},{path:"event",data:{definitionType:"event",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:"new2/:bundleId",component:u.RxEventDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-17753"}},{path:"edit2/:definitionName",component:u.RxEventDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-17753"}}]},{path:"event-statistics",data:{definitionType:"event-statistics",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],runGuardsAndResolvers:"always",children:[{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}}]},{path:"chatbot",data:{definitionType:"chatbot",defaultBundleId:h.RX_APPLICATION.chatbotBundleId,routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],runGuardsAndResolvers:"always",children:[{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}},{path:":bundleId/publish-chat-enabled-service",component:Do,data:{routerGroup:"legacy-designer",legacyDesignerName:So.legacyDesignerNames.chatWizard}}]},{path:"shell",data:{definitionType:"shell"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxViewComponentResolver:g.RxViewComponentResolver,RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:":bundleId",component:c.RxShellDesignerPageComponent,canActivate:[$o,ko]}]},{path:"shell-legacy",data:{definitionType:"shell",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],resolve:{RxKeepSessionAliveResolver:h.RxKeepSessionAliveResolver},runGuardsAndResolvers:"always",children:[{path:":bundleId",component:Do,canActivate:[$o,ko],data:{routerGroup:"legacy-designer"}}]},{path:":bundleId",component:bo,canActivate:[$o],children:[{path:"",redirectTo:"record-definitions"},{canDeactivate:[h.RxComponentCanDeactivateGuard],path:":tab",data:{routeReuseStrategy:h.RX_APPLICATION.routeReuseStrategies.checkParentParams},component:qn}]},{path:"config",data:{definitionType:"config",routerGroup:"legacy-designer"},canDeactivate:[h.RxComponentCanDeactivateGuard],runGuardsAndResolvers:"always",children:[{path:"new2/:bundleId",component:s.ConfigDesignerPageComponent,canActivate:[$o,h.RxFeatureGuard],data:{featureId:"DRD21-14987"}},{path:"edit2/:definitionName",component:s.ConfigDesignerPageComponent,canActivate:[h.RxFeatureGuard],data:{featureId:"DRD21-14987"}},{path:"new/:bundleId",component:Do,canActivate:[$o],data:{routerGroup:"legacy-designer",designerMode:So.designerModes.new}},{path:"edit/:definitionName",component:Do,data:{routerGroup:"legacy-designer",designerMode:So.designerModes.edit}}]}];class Go{}Go.\u0275fac=function(e){return new(e||Go)},Go.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Go,imports:[p.RouterModule],exports:[p.RouterModule]}),Go.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[p.RouterModule.forChild(Lo)],p.RouterModule]});class zo{}zo.\u0275fac=function(e){return new(e||zo)},zo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:zo,declarations:[Ji],imports:[n.CommonModule,C.AdaptButtonModule,C.AdaptIconModule,C.AdaptDropdownModule,h.RxDefinitionModule,F.RecordGridModule,I.RxBusyIndicatorModule,h.RxOverlayModule,x.TranslateModule,p.RouterModule],exports:[Ji]}),zo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,C.AdaptButtonModule,C.AdaptIconModule,C.AdaptDropdownModule,h.RxDefinitionModule,F.RecordGridModule,I.RxBusyIndicatorModule,h.RxOverlayModule,x.TranslateModule,p.RouterModule]]});class Uo{}Uo.\u0275fac=function(e){return new(e||Uo)},Uo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Uo,declarations:[Tn],imports:[n.CommonModule,zo,h.RxDefinitionModule,P.RxAssociationPipesModule],exports:[Tn]}),Uo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule,P.RxAssociationPipesModule]]});class qo{}qo.\u0275fac=function(e){return new(e||qo)},qo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:qo,declarations:[An],imports:[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule],exports:[An]}),qo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule]]});class Xo{}Xo.\u0275fac=function(e){return new(e||Xo)},Xo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Xo,declarations:[gn],imports:[n.CommonModule,E.ReactiveFormsModule,I.RxModalModule,C.AdaptRxTextfieldModule,C.AdaptRxSelectModule,C.AdaptButtonModule,C.AdaptBusyModule,x.TranslateModule]}),Xo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,E.ReactiveFormsModule,I.RxModalModule,C.AdaptRxTextfieldModule,C.AdaptRxSelectModule,C.AdaptButtonModule,C.AdaptBusyModule,x.TranslateModule]]});class Wo{}Wo.\u0275fac=function(e){return new(e||Wo)},Wo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Wo,declarations:[yn],imports:[n.CommonModule,E.ReactiveFormsModule,I.RxModalModule,C.AdaptRxTextfieldModule,C.AdaptRxSelectModule,C.AdaptButtonModule,C.AdaptBusyModule,x.TranslateModule,D.ExpressionFormControlModule,D.RxDefinitionPickerModule]}),Wo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,E.ReactiveFormsModule,I.RxModalModule,C.AdaptRxTextfieldModule,C.AdaptRxSelectModule,C.AdaptButtonModule,C.AdaptBusyModule,x.TranslateModule,D.ExpressionFormControlModule,D.RxDefinitionPickerModule]]});class Ho{}Ho.\u0275fac=function(e){return new(e||Ho)},Ho.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Ho,declarations:[ln,en,tn,nn,on,rn,an,sn],imports:[C.AdaptButtonModule,C.AdaptIconModule,C.AdaptRxFormControlModule,C.AdaptRxRadiobuttonModule,C.AdaptRxSelectModule,C.AdaptTooltipModule,C.AdaptTreeModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,S.RxRecordDefinitionResourceTypePipeModule,f.RecordDesignerModule,D.RxWizardModule,x.TranslateModule,C.AdaptPopoverModule]}),Ho.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[dn,Yi,Zi],imports:[[C.AdaptButtonModule,C.AdaptIconModule,C.AdaptRxFormControlModule,C.AdaptRxRadiobuttonModule,C.AdaptRxSelectModule,C.AdaptTooltipModule,C.AdaptTreeModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,S.RxRecordDefinitionResourceTypePipeModule,f.RecordDesignerModule,D.RxWizardModule,x.TranslateModule,C.AdaptPopoverModule]]});class Qo{}Qo.\u0275fac=function(e){return new(e||Qo)},Qo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Qo,declarations:[mn,un,cn],imports:[n.CommonModule,D.RxDefinitionPickerModule,x.TranslateModule,C.AdaptRxSelectModule,D.RxWizardModule,C.AdaptAlertModule,E.FormsModule,E.ReactiveFormsModule,D.ExpressionFormControlModule]}),Qo.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[fn],imports:[[n.CommonModule,D.RxDefinitionPickerModule,x.TranslateModule,C.AdaptRxSelectModule,D.RxWizardModule,C.AdaptAlertModule,E.FormsModule,E.ReactiveFormsModule,D.ExpressionFormControlModule]]});class Ko{}Ko.\u0275fac=function(e){return new(e||Ko)},Ko.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Ko,declarations:[xn,bn],imports:[n.CommonModule,zo,Ho,Qo,Xo,Wo],exports:[xn]}),Ko.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,Ho,Qo,Xo,Wo]]});class Jo{}Jo.\u0275fac=function(e){return new(e||Jo)},Jo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Jo,declarations:[Cn],imports:[n.CommonModule,zo,p.RouterModule,h.RxDefinitionModule,D.RenameDefinitionModalModule],exports:[Cn]}),Jo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,p.RouterModule,h.RxDefinitionModule,D.RenameDefinitionModalModule]]});class Yo{}Yo.\u0275fac=function(e){return new(e||Yo)},Yo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Yo,declarations:[Mo],imports:[n.CommonModule,E.FormsModule,D.RxFormBuilderModule,x.TranslateModule,C.AdaptButtonModule]}),Yo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,E.FormsModule,D.RxFormBuilderModule,x.TranslateModule,C.AdaptButtonModule]]});class Zo{}Zo.\u0275fac=function(e){return new(e||Zo)},Zo.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Zo,declarations:[Eo],imports:[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,U.RxProcessPreviewModule]}),Zo.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,U.RxProcessPreviewModule]]});class er{}er.\u0275fac=function(e){return new(e||er)},er.\u0275mod=o["\u0275\u0275defineNgModule"]({type:er,declarations:[To],imports:[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,C.AdaptEmptyStateModule,U.RxProcessPreviewModule]}),er.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,C.AdaptEmptyStateModule,U.RxProcessPreviewModule]]});class tr{}tr.\u0275fac=function(e){return new(e||tr)},tr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:tr,declarations:[Oo],imports:[n.CommonModule,C.AdaptButtonModule,C.AdaptDockedPanelModule,x.TranslateModule,C.AdaptIconModule,C.AdaptTreeModule,C.AdaptTabsModule,C.AdaptRxSelectModule,C.AdaptRxFormControlModule,E.FormsModule,h.RxDefinitionModule,F.RecordGridModule,Zo,er,Yo,D.RxFormBuilderModule,I.RxBusyIndicatorModule,I.RxBreadcrumbBarModule,C.AdaptTooltipModule,C.AdaptEmptyStateModule,C.AdaptSidebarModule,p.RouterModule]}),tr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,C.AdaptButtonModule,C.AdaptDockedPanelModule,x.TranslateModule,C.AdaptIconModule,C.AdaptTreeModule,C.AdaptTabsModule,C.AdaptRxSelectModule,C.AdaptRxFormControlModule,E.FormsModule,h.RxDefinitionModule,F.RecordGridModule,Zo,er,Yo,D.RxFormBuilderModule,I.RxBusyIndicatorModule,I.RxBreadcrumbBarModule,C.AdaptTooltipModule,C.AdaptEmptyStateModule,C.AdaptSidebarModule,p.RouterModule]]});class ir{}ir.\u0275fac=function(e){return new(e||ir)},ir.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ir,declarations:[Rn],imports:[n.CommonModule,zo,tr,h.RxDefinitionModule],exports:[Rn]}),ir.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,tr,h.RxDefinitionModule]]});class nr{}nr.\u0275fac=function(e){return new(e||nr)},nr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:nr,declarations:[Fn],imports:[n.CommonModule,zo,p.RouterModule,h.RxDefinitionModule,A.RxRulePipesModule],exports:[Fn]}),nr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,p.RouterModule,h.RxDefinitionModule,A.RxRulePipesModule]]});class or{}or.\u0275fac=function(e){return new(e||or)},or.\u0275mod=o["\u0275\u0275defineNgModule"]({type:or,declarations:[Nn],imports:[n.CommonModule,zo,h.RxDefinitionModule],exports:[Nn]}),or.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule]]});class rr{}rr.\u0275fac=function(e){return new(e||rr)},rr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:rr,declarations:[jn],imports:[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule],exports:[jn]}),rr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule]]});class ar{}ar.\u0275fac=function(e){return new(e||ar)},ar.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ar,declarations:[$n],imports:[n.CommonModule,zo,h.RxDefinitionModule],exports:[$n]}),ar.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule]]});class sr{}sr.\u0275fac=function(e){return new(e||sr)},sr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:sr,declarations:[_n],imports:[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule],exports:[_n]}),sr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule]]});class lr{}lr.\u0275fac=function(e){return new(e||lr)},lr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:lr,declarations:[kn],imports:[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule],exports:[kn]}),lr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,zo,h.RxDefinitionModule,x.TranslateModule]]});class dr{}dr.\u0275fac=function(e){return new(e||dr)},dr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:dr,declarations:[Un,Ln],imports:[C.AdaptModalModule,C.AdaptButtonModule,n.CommonModule,zo,p.RouterModule,x.TranslateModule,E.ReactiveFormsModule,D.RxDefinitionPickerModule,D.RxPermissionEditorModule,C.AdaptRxTextfieldModule,C.AdaptRxLabelModule,C.AdaptRxCheckboxModule],exports:[Un]}),dr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptModalModule,C.AdaptButtonModule,n.CommonModule,zo,p.RouterModule,x.TranslateModule,E.ReactiveFormsModule,D.RxDefinitionPickerModule,D.RxPermissionEditorModule,C.AdaptRxTextfieldModule,C.AdaptRxLabelModule,C.AdaptRxCheckboxModule]]});class cr{}cr.\u0275fac=function(e){return new(e||cr)},cr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:cr,declarations:[qn],imports:[C.AdaptTabsModule,ir,Uo,ar,n.CommonModule,or,qo,Ko,nr,p.RouterModule,x.TranslateModule,Jo,sr,lr,rr,dr],exports:[qn]}),cr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptTabsModule,ir,Uo,ar,n.CommonModule,or,qo,Ko,nr,p.RouterModule,x.TranslateModule,Jo,sr,lr,rr,dr]]});class pr{}pr.\u0275fac=function(e){return new(e||pr)},pr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:pr,declarations:[Zn],imports:[C.AdaptButtonModule,C.AdaptDropdownModule,C.AdaptIconModule,C.AdaptRxCheckboxModule,C.AdaptRxSelectModule,C.AdaptRxSwitchModule,n.CommonModule,D.ExpressionFormControlModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,D.RxDefinitionPickerModule,x.TranslateModule,C.AdaptPopoverModule],exports:[Zn]}),pr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptButtonModule,C.AdaptDropdownModule,C.AdaptIconModule,C.AdaptRxCheckboxModule,C.AdaptRxSelectModule,C.AdaptRxSwitchModule,n.CommonModule,D.ExpressionFormControlModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,D.RxDefinitionPickerModule,x.TranslateModule,C.AdaptPopoverModule]]});class ur{}ur.\u0275fac=function(e){return new(e||ur)},ur.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ur,declarations:[no],imports:[C.AdaptButtonModule,C.AdaptDropdownModule,C.AdaptIconModule,C.AdaptRxCheckboxModule,C.AdaptRxSelectModule,C.AdaptRxSwitchModule,n.CommonModule,D.ExpressionFormControlModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,D.RxDefinitionPickerModule,x.TranslateModule],exports:[no]}),ur.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptButtonModule,C.AdaptDropdownModule,C.AdaptIconModule,C.AdaptRxCheckboxModule,C.AdaptRxSelectModule,C.AdaptRxSwitchModule,n.CommonModule,D.ExpressionFormControlModule,E.FormsModule,E.ReactiveFormsModule,F.RecordGridModule,h.RxDefinitionModule,D.RxDefinitionPickerModule,x.TranslateModule]]});class mr{}mr.\u0275fac=function(e){return new(e||mr)},mr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:mr,declarations:[oo],imports:[n.CommonModule,C.AdaptButtonModule,x.TranslateModule],exports:[oo]}),mr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,C.AdaptButtonModule,x.TranslateModule]]});class fr{}fr.\u0275fac=function(e){return new(e||fr)},fr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:fr,declarations:[ro],imports:[C.AdaptRxCheckboxModule,C.AdaptRxLabelModule,C.AdaptRxTextfieldModule,C.AdaptTreeModule,C.AdaptRxSelectModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,I.ReadOnlyFieldModule,x.TranslateModule],exports:[ro]}),fr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptRxCheckboxModule,C.AdaptRxLabelModule,C.AdaptRxTextfieldModule,C.AdaptTreeModule,C.AdaptRxSelectModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,I.ReadOnlyFieldModule,x.TranslateModule]]});class hr{}hr.\u0275fac=function(e){return new(e||hr)},hr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:hr,declarations:[ao],imports:[n.CommonModule,E.FormsModule,x.TranslateModule,C.AdaptButtonModule,h.RxDefinitionModule,C.AdaptEmptyStateModule],exports:[ao]}),hr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,E.FormsModule,x.TranslateModule,C.AdaptButtonModule,h.RxDefinitionModule,C.AdaptEmptyStateModule]]});class gr{}gr.\u0275fac=function(e){return new(e||gr)},gr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:gr,declarations:[so],imports:[n.CommonModule,C.AdaptAlertModule,C.AdaptButtonModule,x.TranslateModule,C.AdaptRxTextareaModule,E.FormsModule],exports:[so]}),gr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,C.AdaptAlertModule,C.AdaptButtonModule,x.TranslateModule,C.AdaptRxTextareaModule,E.FormsModule]]});class vr{}vr.\u0275fac=function(e){return new(e||vr)},vr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:vr,declarations:[lo],imports:[n.CommonModule,F.RecordGridModule,x.TranslateModule],exports:[lo]}),vr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,F.RecordGridModule,x.TranslateModule]]});class yr{}yr.\u0275fac=function(e){return new(e||yr)},yr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:yr,declarations:[co],imports:[n.CommonModule,F.RecordGridModule,h.RxDefinitionModule,x.TranslateModule],exports:[co]}),yr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,F.RecordGridModule,h.RxDefinitionModule,x.TranslateModule]]});class br{}br.\u0275fac=function(e){return new(e||br)},br.\u0275mod=o["\u0275\u0275defineNgModule"]({type:br,declarations:[uo],imports:[n.CommonModule,F.RecordGridModule,x.TranslateModule,C.AdaptPopoverModule,C.AdaptIconModule,h.RxDefinitionModule],exports:[uo]}),br.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,F.RecordGridModule,x.TranslateModule,C.AdaptPopoverModule,C.AdaptIconModule,h.RxDefinitionModule]]});class xr{}xr.\u0275fac=function(e){return new(e||xr)},xr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:xr,declarations:[mo],imports:[n.CommonModule,F.RecordGridModule,x.TranslateModule],exports:[mo]}),xr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,F.RecordGridModule,x.TranslateModule]]});class Cr{}Cr.\u0275fac=function(e){return new(e||Cr)},Cr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Cr,declarations:[go],imports:[C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptRxSelectModule,C.AdaptRxTextfieldModule,n.CommonModule,E.FormsModule,x.TranslateModule,I.RxBusyIndicatorModule,E.ReactiveFormsModule,F.RecordGridModule,C.AdaptRxLabelModule,$.AdaptTableModule,C.AdaptBusyModule]}),Cr.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[n.DatePipe],imports:[[C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptRxSelectModule,C.AdaptRxTextfieldModule,n.CommonModule,E.FormsModule,x.TranslateModule,I.RxBusyIndicatorModule,E.ReactiveFormsModule,F.RecordGridModule,C.AdaptRxLabelModule,$.AdaptTableModule,C.AdaptBusyModule]]});class Sr{}Sr.\u0275fac=function(e){return new(e||Sr)},Sr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Sr,declarations:[vo],imports:[C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptRxSelectModule,C.AdaptRxTextfieldModule,n.CommonModule,E.FormsModule,x.TranslateModule,I.RxBusyIndicatorModule,E.ReactiveFormsModule,F.RecordGridModule,C.AdaptRxLabelModule,$.AdaptTableModule,C.AdaptBusyModule]}),Sr.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[n.DatePipe],imports:[[C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptRxSelectModule,C.AdaptRxTextfieldModule,n.CommonModule,E.FormsModule,x.TranslateModule,I.RxBusyIndicatorModule,E.ReactiveFormsModule,F.RecordGridModule,C.AdaptRxLabelModule,$.AdaptTableModule,C.AdaptBusyModule]]});class Dr{}Dr.\u0275fac=function(e){return new(e||Dr)},Dr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Dr,declarations:[bo],imports:[n.CommonModule,C.AdaptButtonModule,C.AdaptTabsModule,p.RouterModule,C.AdaptIconModule,C.AdaptPopoverModule,C.AdaptDropdownModule,x.TranslateModule,pr,ur,Cr,mr,Sr,fr,hr,gr,vr,yr,br,xr],exports:[bo]}),Dr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,C.AdaptButtonModule,C.AdaptTabsModule,p.RouterModule,C.AdaptIconModule,C.AdaptPopoverModule,C.AdaptDropdownModule,x.TranslateModule,pr,ur,Cr,mr,Sr,fr,hr,gr,vr,yr,br,xr]]});class Ir{}Ir.\u0275fac=function(e){return new(e||Ir)},Ir.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Ir,declarations:[Co],imports:[n.CommonModule,D.RxIframeModule,I.RxBusyIndicatorModule,x.TranslateModule,F.RecordGridModule,C.AdaptButtonModule,h.RxDefinitionModule,F.ActionButtonModule],exports:[Co]}),Ir.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,D.RxIframeModule,I.RxBusyIndicatorModule,x.TranslateModule,F.RecordGridModule,C.AdaptButtonModule,h.RxDefinitionModule,F.ActionButtonModule]]});class Rr{}Rr.\u0275fac=function(e){return new(e||Rr)},Rr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Rr,declarations:[Do],imports:[n.CommonModule,D.RxIframeModule,I.RxBusyIndicatorModule],exports:[Do]}),Rr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,D.RxIframeModule,I.RxBusyIndicatorModule]]});class wr{}wr.\u0275fac=function(e){return new(e||wr)},wr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:wr,declarations:[Ao],imports:[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,C.AdaptRxTextfieldModule,E.FormsModule,E.ReactiveFormsModule]}),wr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,x.TranslateModule,C.AdaptButtonModule,C.AdaptRxTextfieldModule,E.FormsModule,E.ReactiveFormsModule]]});class Er{}Er.\u0275fac=function(e){return new(e||Er)},Er.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Er,declarations:[_o],imports:[n.CommonModule,$.AdaptTableModule,E.FormsModule,E.ReactiveFormsModule,C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptDropdownModule,x.TranslateModule,wr,p.RouterModule]}),Er.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,$.AdaptTableModule,E.FormsModule,E.ReactiveFormsModule,C.AdaptButtonModule,C.AdaptButtonGroupModule,C.AdaptDropdownModule,x.TranslateModule,wr,p.RouterModule]]});class Fr{}Fr.\u0275fac=function(e){return new(e||Fr)},Fr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Fr,declarations:[Qi],imports:[C.AdaptButtonModule,C.AdaptRxSelectModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,x.TranslateModule,C.AdaptRxTextfieldModule,C.AdaptBusyModule]}),Fr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[C.AdaptButtonModule,C.AdaptRxSelectModule,n.CommonModule,E.FormsModule,E.ReactiveFormsModule,x.TranslateModule,C.AdaptRxTextfieldModule,C.AdaptBusyModule]]});class Mr{}Mr.\u0275fac=function(e){return new(e||Mr)},Mr.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Mr,imports:[n.CommonModule,Go,Dr,cr,Rr,r.DocumentDesignerPageModule,Fr,Ir,Er,l.RxViewDesignerPageModule,c.RxShellDesignerPageModule,a.RxAssociationDesignerPageModule,m.RxNamedListDesignerPageModule,d.ProcessDesignerPageModule,f.RecordDesignerPageModule,v.RxWebApiDesignerPageModule,u.RxEventDesignerPageModule,s.ConfigDesignerPageModule]}),Mr.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,Go,Dr,cr,Rr,r.DocumentDesignerPageModule,Fr,Ir,Er,l.RxViewDesignerPageModule,c.RxShellDesignerPageModule,a.RxAssociationDesignerPageModule,m.RxNamedListDesignerPageModule,d.ProcessDesignerPageModule,f.RecordDesignerPageModule,v.RxWebApiDesignerPageModule,u.RxEventDesignerPageModule,s.ConfigDesignerPageModule]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-approval-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ApprovalConsoleComponent:()=>Ce,ApprovalConsoleModule:()=>De,ApprovalConsoleRegistrationModule:()=>Se});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),s=i("rxjs"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),c=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),p=i("lodash"),u=i("./node_modules/@angular/common/fesm2015/http.js"),m=i("./node_modules/rxjs/_esm2015/operators/index.js"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),h=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),v=i("./node_modules/@angular/forms/fesm2015/forms.js"),y=i("./node_modules/moment-es6/index.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),x=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js");function C(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"strong"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.displayValue),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.value," ")}}function S(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.approval.console.overwrite-justification-reason.warning")," "))}function D(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",3),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.console.no-request-selected.message"))}function I(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",6),2&e){const e=t.$implicit;n["\u0275\u0275propertyInterpolate"]("label",e.label),n["\u0275\u0275propertyInterpolate"]("value",e.value)}}function R(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275template"](1,I,1,2,"rx-read-only-field",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",!i.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e)}}const w=function(e){return{busy:e}},E=["requestApproversGrid"];function F(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",2),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.console.no-request-selected.message"))}function M(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-grid",3,4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.gridConfig$)}}function T(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"strong"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",11),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.displayValue),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.value," ")}}const O=["requestQuestionsGrid"];function N(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",3),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.console.no-request-selected.message"))}function A(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",4),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().askNewQuestion()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isNewQuestionButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.approval.console.questions.new.label"),"\n")}}function P(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-grid",5,6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.gridConfig$)}}const j=["requestCommentsGrid"];function _(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",3),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.console.no-request-selected.message"))}function V(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",4),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addNewComment()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.approval.console.comments.new.label"),"\n"))}function k(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-grid",5,6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.gridConfig$)}}const B=["requestAttachmentsGrid"];function $(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",2),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.console.no-request-selected.message"))}function L(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-grid",3,4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.gridConfig$)}}const G=["requestDetailsTabs"],z=["resolvedFieldCellTemplate"],U=["definitionNameCellTemplate"],q=["approvalRequestsGrid"];function X(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-tab-panel",22),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",e.label),n["\u0275\u0275property"]("badge",i[e.countType])("badge-type",e.badgeType)}}function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-tabset",20),n["\u0275\u0275listener"]("tab-active-changed",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().fetchApprovalRequests(t)}),n["\u0275\u0275template"](1,X,1,3,"adapt-tab-panel",21),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("tab-active",0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.approvalRequestTypes)}}function H(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-record-grid",23,24),n["\u0275\u0275listener"]("dataLoaded",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDataLoaded()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.gridConfig$)}}function Q(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"]("(",e.currentRequestId,")")}}function K(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-approval-request-approvers",25),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("approvalRequest",e.selectedApprovalRequest)("gridType",e.selectedApprovalRequestsTab.gridType)}}function J(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-approval-request-questions",26),n["\u0275\u0275listener"]("questionSubmitted",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onQuestionSubmitted()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("approvalRequest",e.selectedApprovalRequest)("gridType",e.selectedApprovalRequestsTab.gridType)("requestsTabStatus",e.selectedApprovalRequestsTab.status)}}function Y(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-approval-request-comments",25),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("approvalRequest",e.selectedApprovalRequest)("gridType",e.selectedApprovalRequestsTab.gridType)}}function Z(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-approval-request-attachments",25),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("approvalRequest",e.selectedApprovalRequest)("gridType",e.selectedApprovalRequestsTab.gridType)}}function ee(e,t){if(1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function te(e,t){if(1&e&&n["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=t.column;n["\u0275\u0275textInterpolate1"](" ",e.resolvedDisplayValues[i.field],"\n")}}class ie extends a.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.SignatureDetailDataPageQuery"),this.injector=e}}var ne,oe,re;ie.\u0275fac=function(e){return new(e||ie)(n["\u0275\u0275inject"](n.Injector))},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac,providedIn:"root"}),function(e){e.Pending="Pending",e.Hold="On Hold",e.MoreInfo="More Information",e.RequestMoreInfo="Request More Information",e.NeedsAttention="Needs Attention",e.Approved="Approved",e.Rejected="Rejected",e.Cancelled="Cancelled",e.Error="Error",e.Closed="Closed"}(ne||(ne={})),function(e){e.ApprovalRequests="approvalRequests",e.NeedAttentionRequests="needAttentionRequests"}(oe||(oe={})),function(e){e.Approved="Approved",e.Rejected="Rejected",e.OnHold="OnHold",e.Reassign="Reassign"}(re||(re={}));const ae={approvalServerCommand:"com.bmc.arsys.rx.approval.application.command.ApprovalServerCommand",approvalCommandForm:"AP:Signature",approvalUserNameField:101,approvalRequestTypes:{pending:{status:ne.Pending,countType:"pendingCount",gridType:oe.ApprovalRequests,badgeType:"warning",labelKey:"com.bmc.arsys.rx.client.approval.console.request.pending.label"},onHold:{status:ne.Hold,countType:"holdCount",gridType:oe.ApprovalRequests,badgeType:"warning",labelKey:"com.bmc.arsys.rx.client.approval.console.request.hold.label"},moreInfo:{status:ne.RequestMoreInfo,countType:"moreInformationCount",gridType:oe.ApprovalRequests,badgeType:"info",labelKey:"com.bmc.arsys.rx.client.approval.console.request.more-info.label"},needAttention:{status:ne.NeedsAttention,countType:"needAttentionCount",gridType:oe.NeedAttentionRequests,badgeType:"warning",labelKey:"com.bmc.arsys.rx.client.approval.console.request.needs-attention.label"},approved:{status:ne.Approved,countType:"approvedCount",gridType:oe.ApprovalRequests,badgeType:"success",labelKey:"com.bmc.arsys.rx.client.approval.console.request.approved.label"},rejected:{status:ne.Rejected,countType:"rejectedCount",gridType:oe.ApprovalRequests,badgeType:"danger",labelKey:"com.bmc.arsys.rx.client.approval.console.request.rejected.label"},cancelled:{status:ne.Cancelled,countType:"cancelledCount",gridType:oe.ApprovalRequests,badgeType:"secondary",labelKey:"com.bmc.arsys.rx.client.approval.console.request.canceled.label"},error:{status:ne.Error,countType:"errorCount",gridType:oe.ApprovalRequests,badgeType:"danger",labelKey:"com.bmc.arsys.rx.client.approval.console.request.errored.label"},closed:{status:ne.Closed,countType:"closedCount",gridType:oe.ApprovalRequests,badgeType:"secondary",labelKey:"com.bmc.arsys.rx.client.approval.console.request.closed.label"}},approvalRequestsGrid:{fields:{application:"application",summary:"summary",requester:"requester",status:"status",request:"request",createDateSig:"createDateSig",process:"process",signatureInstanceID:"signatureInstanceID",justificationReasonField:"justification",sigTermStateDate:"sigTermStateDate",signatureID:"signatureID",otherDetail1:"otherDetail1",otherDetail2:"otherDetail2",otherDetail3:"otherDetail3",otherDetail4:"otherDetail4",justificationRequired:"justificationRequired",canReassign:"canReassign",processInstanceId:"processInstanceId",ifMultipleApprovers:"ifMultipleApprovers",actingAs:"actingAs"}},needAttentionRequestsGrid:{definition:"AP:More Information",fields:{fromUser:"2",toUser:"4",description:"14506",application:"10050",requestID:"10051",attachment:"14893",question:"13300",response:"13301",state:"11016"}},requestDetailsGrid:{definition:"AP:QCI-Detail-Join",approverDefinition:"AP:PreviewInfo",questionDefinition:"AP:Question-Comment-Info",questionTypeValue:0,commentTypeValue:1,fields:{from:2,to:4,application:11001,type:11002,signatureID:11003,request:11004,requestNumber:13334,process:1e4,response:11005,question:11006,attachment:11011,approver:14201}}};class se extends a.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.ApprovalUsersDataPageQuery"),this.injector=e}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275inject"](n.Injector))},se.\u0275prov=n["\u0275\u0275defineInjectable"]({token:se,factory:se.\u0275fac,providedIn:"root"});class le{constructor(e,t,i,n,o){this.httpClient=e,this.rxSignatureDetailDataPageService=t,this.rxCurrentUserService=i,this.rxRecordInstanceUtilsService=n,this.rxApprovalUsersDataPageService=o}getApprovalRequestCounts(){return this.httpClient.get(`/api/${a.RX_APPLICATION.approvalBundleId}/rx/application/approval/counts?ignoreAlternateUser=false`)}getRequestLabelDetails(e,t){return this.httpClient.get(`/api/${a.RX_APPLICATION.approvalBundleId}/rx/application/approval/labels/${encodeURIComponent(e)}/${encodeURIComponent(t)}`)}getCurrentRequestDetails(e,t){return this.rxSignatureDetailDataPageService.get({params:{request:e,application:t,ignoreAssignedUser:!0}}).pipe((0,m.map)(e=>e.data[0]))}approveRequest(e){return this.httpClient.post(a.RX_RESOURCE_URLS.command,{resourceType:ae.approvalServerCommand,commands:e})}rejectRequest(e){return this.httpClient.post(a.RX_RESOURCE_URLS.command,{resourceType:ae.approvalServerCommand,commands:e})}holdRequest(e){return this.httpClient.post(a.RX_RESOURCE_URLS.command,{resourceType:ae.approvalServerCommand,commands:e})}reassignRequest(e){return this.httpClient.post(a.RX_RESOURCE_URLS.command,{resourceType:ae.approvalServerCommand,commands:e})}getCommandPayload(e,t){return{formName:ae.approvalCommandForm,requestID:t,command:e}}saveQuestion(e,t){return this.httpClient.post(`/api/${a.RX_APPLICATION.approvalBundleId}/rx/application/approval/moreinformation/${t}`,e)}saveAttachment(e,t){return this.httpClient.post(`${d.RX_RECORD_DEFINITION.recordInstanceAttachment}/${encodeURIComponent(ae.needAttentionRequestsGrid.definition)}/${t}`,e)}getApprovalUsers(e,t,i){const n={startIndex:e,pageSize:t,propertySelection:["loginName","fullName"]};return n.queryExpression=`'${ae.approvalUserNameField}'!="${this.rxCurrentUserService.getName()}"`,i&&(n.queryExpression+=` AND ('${d.RX_RECORD_DEFINITION.coreFieldIds.description}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(i)}%" OR '${ae.approvalUserNameField}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(i)}%")`),this.rxApprovalUsersDataPageService.get({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,m.map)(e=>({totalSize:e.totalSize,options:e.data.map(({fullName:e,loginName:t})=>({displayValue:e,value:t}))})))}}le.\u0275fac=function(e){return new(e||le)(n["\u0275\u0275inject"](u.HttpClient),n["\u0275\u0275inject"](ie),n["\u0275\u0275inject"](a.RxCurrentUserService),n["\u0275\u0275inject"](d.RxRecordInstanceUtilsService),n["\u0275\u0275inject"](se))},le.\u0275prov=n["\u0275\u0275defineInjectable"]({token:le,factory:le.\u0275fac,providedIn:"root"});class de extends f.RxModalClass{constructor(e,t,i,n,o){super(i,o),this.translateService=e,this.rxNotificationService=t,this.activeModalRef=i,this.rxApprovalConsoleService=n,this.injector=o,this.selectedUser=[],this.userLoaderFunc=this.getApprovalUsers.bind(this)}isDirty(){return!!this.selectedUser.length}reassign(){this.allowDismiss=!1;const e=(0,p.map)(this.activeModalRef.getData().selectedRequestInstanceIds,e=>Object.assign({assignToApprovers:this.selectedUser[0].value},this.rxApprovalConsoleService.getCommandPayload(re.Reassign,e)));this.rxApprovalConsoleService.reassignRequest(e).pipe((0,m.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request.reassigned.message")),this.activeModalRef.close(!0)})}cancel(){this.activeModalRef.dismiss(h.DismissReasons.CLOSE_BTN)}getApprovalUsers(e,t,i){return this.rxApprovalConsoleService.getApprovalUsers(e,t,i)}optionFormatter(e){return`${e.value} ${e.displayValue}`}}de.\u0275fac=function(e){return new(e||de)(n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](n.Injector))},de.\u0275cmp=n["\u0275\u0275defineComponent"]({type:de,selectors:[["rx-approval-request-reassign"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:21,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],[1,"form-group","d-block",3,"label","ngModel","optionLoader","required","template","optionFormatter","ngModelChange"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"adaptInlineLoader","disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"],["optionTemplate",""],[1,"text-secondary"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",2),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275elementStart"](6,"rx-select-with-pagination",4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedUser=e}),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",5),n["\u0275\u0275elementStart"](9,"button",6),n["\u0275\u0275listener"]("click",function(){return t.reassign()}),n["\u0275\u0275text"](10),n["\u0275\u0275pipe"](11,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"button",7),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,C,4,2,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](16);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,13,"com.bmc.arsys.rx.client.approval.console.request.reassign-dialog.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,15,"com.bmc.arsys.rx.client.approval.console.request.reassign.label")),n["\u0275\u0275property"]("ngModel",t.selectedUser)("optionLoader",t.userLoaderFunc)("required",!0)("template",e)("optionFormatter",t.optionFormatter),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",!t.selectedUser.length||!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](11,17,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](14,19,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[g.RxSelectWithPaginationComponent,v.NgControlStatus,v.NgModel,v.RequiredValidator,h.AdaptButtonComponent,h.AdaptInlineStandaloneDirective],pipes:[c.TranslatePipe],encapsulation:2});class ce extends f.RxModalClass{constructor(e,t,i,n,o,r){super(e,r),this.activeModalRef=e,this.rxRecordInstanceService=t,this.rxNotificationService=i,this.translateService=n,this.rxApprovalConsoleService=o,this.injector=r,this.request=this.activeModalRef.getData().selectedRequest,this.attachment=[],this.enableCustomDownload=!0,this.existingAttachmentName=this.request[ae.needAttentionRequestsGrid.fields.attachment],this.downloadAttachment=()=>{this.rxRecordInstanceService.downloadAttachment(ae.needAttentionRequestsGrid.definition,Number(ae.needAttentionRequestsGrid.fields.attachment),this.request[d.RX_RECORD_DEFINITION.coreFieldIds.id],this.request[ae.needAttentionRequestsGrid.fields.attachment])}}isDirty(){return!this.isSaveButtonDisabled()}ngOnInit(){super.ngOnInit(),this.existingAttachmentName&&(this.attachment=this.getExistingFile())}sendResponse(){this.allowDismiss=!1,this.rxRecordInstanceService.get(ae.needAttentionRequestsGrid.definition,this.request[d.RX_RECORD_DEFINITION.coreFieldIds.id]).pipe((0,m.switchMap)(e=>(e.setFieldValue(Number(ae.needAttentionRequestsGrid.fields.response),this.response),this.rxRecordInstanceService.save(e))),(0,m.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-added.message"))}),(0,m.switchMap)(()=>{if(this.shouldSaveAttachment){const e=new FormData;return e.append(ae.needAttentionRequestsGrid.fields.attachment,this.attachment[0].data,this.attachment[0].data.name),this.rxApprovalConsoleService.saveAttachment(e,this.request[d.RX_RECORD_DEFINITION.coreFieldIds.id])}return(0,s.of)(null)}),(0,m.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.activeModalRef.close(!0)})}onRemovedFileFromQueue(){this.enableCustomDownload=!1}onAfterFilesAdded(){this.shouldSaveAttachment=!0}cancel(){this.activeModalRef.dismiss(h.DismissReasons.CLOSE_BTN)}getExistingFile(){return[{data:new File([],this.existingAttachmentName),inUploading:!1,inDeleting:!1,uploaded:100,error:!1,errorText:"",allowDeletion:!0}]}isSaveButtonDisabled(){var e;return!this.allowDismiss||!this.response||this.existingAttachmentName&&!(null===(e=this.attachment[0])||void 0===e?void 0:e.data)}}ce.\u0275fac=function(e){return new(e||ce)(n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](d.RxRecordInstanceService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](n.Injector))},ce.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ce,selectors:[["rx-approval-request-question-response"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:36,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],[1,"d-block","form-group",3,"label","value"],["rows","2",1,"d-block","form-group",3,"label","ngModel","required","autofocus","ngModelChange"],["adaptRequired","",3,"ngModel","required","showMaxSizeRestriction","enableCustomDownload","customDownload","reusable","label","ngModelChange","removedFileFromQueue","afterFilesAdded"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","adaptInlineLoader","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",2),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275element"](6,"rx-read-only-field",4),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275element"](8,"rx-read-only-field",4),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementStart"](10,"adapt-rx-textarea",5),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.response=e}),n["\u0275\u0275pipe"](11,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"adapt-rx-uploader",6),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.attachment=e})("removedFileFromQueue",function(){return t.onRemovedFileFromQueue()})("afterFilesAdded",function(){return t.onAfterFilesAdded()}),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",7),n["\u0275\u0275elementStart"](15,"button",8),n["\u0275\u0275listener"]("click",function(){return t.sendResponse()}),n["\u0275\u0275text"](16),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"button",9),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](19),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,22,"com.bmc.arsys.rx.client.approval.console.question-response-dialog.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,24,"com.bmc.arsys.rx.client.approval.console.question-response-dialog.to-field.label")),n["\u0275\u0275propertyInterpolate"]("value",t.request[2]),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](9,26,"com.bmc.arsys.rx.client.common.question.label")),n["\u0275\u0275propertyInterpolate"]("value",t.request[13300]),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](11,28,"com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-field.label")),n["\u0275\u0275property"]("ngModel",t.response)("required",!0)("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](13,30,"com.bmc.arsys.rx.client.common.attachment.label")),n["\u0275\u0275property"]("ngModel",t.attachment)("required",t.existingAttachmentName)("showMaxSizeRestriction",!1)("enableCustomDownload",t.enableCustomDownload)("customDownload",t.downloadAttachment)("reusable",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled())("adaptInlineLoader",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](17,32,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](20,34,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.ReadOnlyFieldComponent,h.AdaptRxTextareaComponent,v.NgControlStatus,v.NgModel,v.RequiredValidator,h.AdaptRxUploaderComponent,h.AdaptButtonComponent,h.AdaptInlineStandaloneDirective],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]     rx-read-only-field .read-only-content{max-height:9em;overflow-y:auto;word-break:break-all;white-space:pre-wrap}[_nghost-%COMP%]     adapt-rx-uploader .adapt-uploader-file-uploaded{display:none}"]});class pe extends f.RxModalClass{constructor(e,t,i,n,o){super(e,o),this.activeModalRef=e,this.rxNotificationService=t,this.translateService=i,this.rxApprovalConsoleService=n,this.injector=o,this.currentRequestIndex=0,this.requests=[],this.title=this.activeModalRef.getData().modalTitle,this.commandType=this.activeModalRef.getData().commandType}isDirty(){return(0,p.some)(this.requests,e=>e.reason)}ngOnInit(){super.ngOnInit(),this.requests=(0,p.map)(this.activeModalRef.getData().selectedRequests,e=>({requestId:e[ae.approvalRequestsGrid.fields.request],requestSignatureInstanceId:e[ae.approvalRequestsGrid.fields.signatureInstanceID],reason:null,isReasonRequired:"TO_APPROVE_OR_REJECT"===e.justificationRequired||this.commandType===re.Approved&&"TO_APPROVE"===e.justificationRequired||this.commandType===re.Rejected&&"TO_REJECT"===e.justificationRequired}))}isSaveButtonDisabled(){return!this.allowDismiss||(0,p.some)(this.requests,e=>e.isReasonRequired&&this.isReasonEmpty(e.reason))&&!this.shouldApplySameReasonToAll}goToPreviousRequest(){this.currentRequestIndex--}goToNextRequest(){this.currentRequestIndex++}saveRequests(){this.allowDismiss=!1;const e=this.requests[this.currentRequestIndex].reason,t=[...(0,p.map)(this.requests,t=>Object.assign({justificationOrReason:this.shouldApplySameReasonToAll?e:t.reason},this.rxApprovalConsoleService.getCommandPayload(this.commandType,t.requestSignatureInstanceId)))];this.rxApprovalConsoleService.rejectRequest(t).pipe((0,m.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(this.commandType===re.Rejected?"com.bmc.arsys.rx.client.approval.console.request.rejected.message":"com.bmc.arsys.rx.client.approval.console.request.approved.message")),this.activeModalRef.close(!0)})}cancel(){this.activeModalRef.dismiss(h.DismissReasons.CLOSE_BTN)}isReasonEmpty(e){return!(0,p.trim)(e)}}pe.\u0275fac=function(e){return new(e||pe)(n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](n.Injector))},pe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pe,selectors:[["rx-approval-request-action-reason-input"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:36,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],["rx-id","request-id",1,"form-group","d-block",3,"label","ngModel","readonly","ngModelChange"],["rx-id","justification-reason","rows","2",1,"d-block","form-group",3,"label","ngModel","required","autofocus","ngModelChange"],["rx-id","all-request-reason",1,"d-block","mb-2",3,"ngModel","disabled","label","ngModelChange"],["class","text-warning",4,"ngIf"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","secondary","rx-id","previous-button",1,"mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","next-button",1,"mr-auto",3,"disabled","click"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","adaptInlineLoader","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"],[1,"text-warning"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",2),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"adapt-rx-textfield",4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.requests[t.currentRequestIndex].requestId=e}),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-rx-textarea",5),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.requests[t.currentRequestIndex].reason=e}),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-rx-switch",6),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.shouldApplySameReasonToAll=e}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,S,3,3,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275elementStart"](13,"button",9),n["\u0275\u0275listener"]("click",function(){return t.goToPreviousRequest()}),n["\u0275\u0275text"](14),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"button",10),n["\u0275\u0275listener"]("click",function(){return t.goToNextRequest()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](19,"button",11),n["\u0275\u0275listener"]("click",function(){return t.saveRequests()}),n["\u0275\u0275text"](20),n["\u0275\u0275pipe"](21,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](22,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](23),n["\u0275\u0275pipe"](24,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](6,22,"com.bmc.arsys.rx.client.approval.configuration.grid.column.requestId")),n["\u0275\u0275property"]("ngModel",t.requests[t.currentRequestIndex].requestId)("readonly",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](8,24,"com.bmc.arsys.rx.client.approval.justification-reason.label")),n["\u0275\u0275property"]("ngModel",t.requests[t.currentRequestIndex].reason)("required",t.requests[t.currentRequestIndex].isReasonRequired)("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](10,26,"com.bmc.arsys.rx.client.approval.console.apply-common-justification-reason.label")),n["\u0275\u0275property"]("ngModel",t.shouldApplySameReasonToAll)("disabled",t.isReasonEmpty(t.requests[t.currentRequestIndex].reason)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.shouldApplySameReasonToAll),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",0===t.currentRequestIndex||t.shouldApplySameReasonToAll),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](15,28,"com.bmc.arsys.rx.client.common.previous-step.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.currentRequestIndex===t.requests.length-1||t.shouldApplySameReasonToAll),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](18,30,"com.bmc.arsys.rx.client.common.next-step.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled())("adaptInlineLoader",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](21,32,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](24,34,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.AdaptRxTextfieldComponent,v.NgControlStatus,v.NgModel,h.AdaptRxTextareaComponent,v.RequiredValidator,h.AdaptRxSwitchComponent,o.NgIf,h.AdaptButtonComponent,h.AdaptInlineStandaloneDirective],pipes:[c.TranslatePipe],encapsulation:2});class ue{constructor(e){this.datePipe=e}formatValue(e){const t="h:mm:ss A",i="M/D/YYYY";return!/^\d+$/.test(e)&&(0,y.default)(e,[`${i} ${t}`,y.default.ISO_8601],!0).isValid()?e=this.datePipe.transform(new Date(e),"medium"):(0,y.default)(e,i,!0).isValid()?e=this.datePipe.transform(new Date(e),"mediumDate"):(0,y.default)(e,t,!0).isValid()&&(e=(0,y.default)(e,t).format("HH:mm A")),e}}ue.\u0275fac=function(e){return new(e||ue)(n["\u0275\u0275inject"](o.DatePipe))},ue.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ue,factory:ue.\u0275fac});class me{constructor(e,t,i,n,o){this.rxApprovalConsoleHelperService=e,this.rxDefinitionNameService=t,this.datePipe=i,this.translateService=n,this.rxApprovalConsoleService=o,this.approvalRequest$=new s.Subject,this.allRequestFields$=this.approvalRequest$.pipe((0,m.tap)(()=>{this.busy=s.NEVER.subscribe()}),(0,m.switchMap)(e=>this.gridType===oe.NeedAttentionRequests?this.rxApprovalConsoleService.getCurrentRequestDetails(e[ae.needAttentionRequestsGrid.fields.requestID],e[ae.needAttentionRequestsGrid.fields.application]):(0,s.of)(e)),(0,m.switchMap)(e=>(0,s.combineLatest)([(0,s.of)(e),this.rxApprovalConsoleService.getRequestLabelDetails(e.application,e.process)])),(0,m.map)(([e,t])=>{const i=[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request-id.label"),value:e.resolvedDisplayValues.request||e.request},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.requester.label"),value:e.resolvedDisplayValues.requester||e.requester},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request-date.label"),value:this.datePipe.transform(e.createDateSig,"medium")},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),value:e.resolvedDisplayValues.summary||e.summary},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label"),value:this.statuses[e.status]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.status-date.label"),value:this.datePipe.transform(e.sigTermStateDate,"medium")}];e.actionDate&&i.push({label:"",value:this.datePipe.transform(e.actionDate,"medium")}),e.justification&&i.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification-reason.label"),value:e.justification});const n={14508:e.resolvedDisplayValues.otherDetail1,14509:e.resolvedDisplayValues.otherDetail2,14510:e.resolvedDisplayValues.otherDetail3,14511:e.resolvedDisplayValues.otherDetail4};return(0,p.forEach)(t,(e,o)=>{e&&i.push({label:t[o],value:this.rxApprovalConsoleHelperService.formatValue(n[o])})}),i.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.activity-log.label"),value:`${this.rxDefinitionNameService.getDisplayName(e.application)} ${e.resolvedDisplayValues.request||e.request}, ${e.resolvedDisplayValues.requester||e.requester}`}),i}),(0,m.tap)(()=>{this.busy=s.EMPTY.subscribe()})),this.statuses={[ne.Pending]:this.translateService.instant(ae.approvalRequestTypes.pending.labelKey),[ne.RequestMoreInfo]:this.translateService.instant(ae.approvalRequestTypes.moreInfo.labelKey),[ne.Hold]:this.translateService.instant(ae.approvalRequestTypes.onHold.labelKey),[ne.MoreInfo]:this.translateService.instant(ae.approvalRequestTypes.moreInfo.labelKey),[ne.NeedsAttention]:this.translateService.instant(ae.approvalRequestTypes.needAttention.labelKey),[ne.Approved]:this.translateService.instant(ae.approvalRequestTypes.approved.labelKey),[ne.Rejected]:this.translateService.instant(ae.approvalRequestTypes.rejected.labelKey),[ne.Cancelled]:this.translateService.instant(ae.approvalRequestTypes.cancelled.labelKey),[ne.Error]:this.translateService.instant(ae.approvalRequestTypes.error.labelKey),[ne.Closed]:this.translateService.instant(ae.approvalRequestTypes.closed.labelKey)}}ngOnChanges(e){var t;(null===(t=e.approvalRequest)||void 0===t?void 0:t.currentValue)&&this.approvalRequest$.next(e.approvalRequest.currentValue)}}me.\u0275fac=function(e){return new(e||me)(n["\u0275\u0275directiveInject"](ue),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](o.DatePipe),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](le))},me.\u0275cmp=n["\u0275\u0275defineComponent"]({type:me,selectors:[["rx-approval-request-general-details"]],inputs:{approvalRequest:"approvalRequest",gridType:"gridType"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:7,consts:[[3,"options"],["type","alerts",3,"label",4,"ngIf"],["class","pt-2 pl-3",3,"hidden",4,"ngIf"],["type","alerts",3,"label"],[1,"pt-2","pl-3",3,"hidden"],["class","d-block form-group",3,"label","value",4,"ngFor","ngForOf"],[1,"d-block","form-group",3,"label","value"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"rx-busy-indicator",0),n["\u0275\u0275template"](1,D,2,3,"adapt-empty-state",1),n["\u0275\u0275template"](2,R,2,2,"div",2),n["\u0275\u0275pipe"](3,"async")),2&e&&(n["\u0275\u0275property"]("options",n["\u0275\u0275pureFunction1"](5,w,t.busy)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](3,3,t.allRequestFields$)))},directives:[f.RxBusyIndicatorComponent,o.NgIf,h.AdaptEmptyStateComponent,o.NgForOf,f.ReadOnlyFieldComponent],pipes:[o.AsyncPipe,c.TranslatePipe],styles:["[_nghost-%COMP%]{display:block;position:relative;min-height:65%}"]});class fe{constructor(e,t,i){this.translateService=e,this.rxApprovalConsoleService=t,this.rxRecordInstanceDataPageService=i}ngOnInit(){this.gridConfig$=(0,s.of)({enableRowSelection:null,getData:e=>this.getApproversData(e),columns:this.getColumns(),getRecordDefinition:()=>(0,s.of)(this.getRecordDefinition()),recordDefinitionName:ae.requestDetailsGrid.approverDefinition,styles:"flex-fill"})}ngOnChanges(e){var t,i;(null===(t=e.approvalRequest)||void 0===t?void 0:t.currentValue)&&(null===(i=this.requestApproversGrid)||void 0===i||i.api.refresh().subscribe())}getApproversData(e){return(0,s.iif)(()=>this.gridType===oe.NeedAttentionRequests,this.rxApprovalConsoleService.getCurrentRequestDetails(this.approvalRequest[ae.needAttentionRequestsGrid.fields.requestID],this.approvalRequest[ae.needAttentionRequestsGrid.fields.application]),(0,s.of)(this.approvalRequest)).pipe((0,m.switchMap)(t=>this.rxRecordInstanceDataPageService.post({params:(0,p.omit)(Object.assign(Object.assign({},e),{shouldIncludeTotalSize:!0,[ae.requestDetailsGrid.fields.requestNumber]:t[ae.approvalRequestsGrid.fields.request],[ae.requestDetailsGrid.fields.process]:t[ae.approvalRequestsGrid.fields.process]}),["searchText","propertySelection"])})))}getRecordDefinition(){return{fieldDefinitions:[{id:ae.requestDetailsGrid.fields.approver,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:d.RX_RECORD_DEFINITION.coreFieldIds.status,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{0:this.translateService.instant(ae.approvalRequestTypes.pending.labelKey),1:this.translateService.instant(ae.approvalRequestTypes.approved.labelKey),2:this.translateService.instant(ae.approvalRequestTypes.rejected.labelKey),3:this.translateService.instant(ae.approvalRequestTypes.onHold.labelKey),4:this.translateService.instant(ae.approvalRequestTypes.moreInfo.labelKey),5:this.translateService.instant(ae.approvalRequestTypes.cancelled.labelKey),6:this.translateService.instant(ae.approvalRequestTypes.error.labelKey),7:this.translateService.instant(ae.approvalRequestTypes.closed.labelKey)}}]}}getColumns(){return[{index:0,fieldId:ae.requestDetailsGrid.fields.approver.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.approvers.grid.approver.title"),filterable:!1,sortable:!1},{index:1,fieldId:d.RX_RECORD_DEFINITION.coreFieldIds.status.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label")}]}}fe.\u0275fac=function(e){return new(e||fe)(n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](d.RxRecordInstanceDataPageService))},fe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fe,selectors:[["rx-approval-request-approvers"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](E,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requestApproversGrid=e.first)}},inputs:{approvalRequest:"approvalRequest",gridType:"gridType"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["type","objects",3,"label",4,"ngIf"],[3,"config",4,"ngIf"],["type","objects",3,"label"],[3,"config"],["requestApproversGrid",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,F,2,3,"adapt-empty-state",0),n["\u0275\u0275template"](1,M,2,1,"rx-record-grid",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest))},directives:[o.NgIf,h.AdaptEmptyStateComponent,l.RecordGridComponent],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]     rx-record-grid .adapt-table-search-toolbar-container{display:none}"]});class he extends f.RxModalClass{constructor(e,t,i,n,o){super(n,o),this.rxApprovalConsoleService=e,this.rxNotificationService=t,this.translateService=i,this.activeModalRef=n,this.injector=o,this.selectedUser=[],this.userLoaderFunc=this.getApprovalUsers.bind(this),this.attachment=[]}isDirty(){var e,t;return!!(this.question||(null===(e=this.attachment[0])||void 0===e?void 0:e.data)||(null===(t=this.selectedUser[0])||void 0===t?void 0:t.value))}saveQuestion(){var e;this.allowDismiss=!1;const t=new FormData,i=this.activeModalRef.getData().selectedRequest;t.append("to",this.selectedUser[0].value),t.append("question",this.question),t.append("application",i.application),t.append("applicationRequestId",i.resolvedDisplayValues.request),t.append("signatureID",i.signatureID),(null===(e=this.attachment[0])||void 0===e?void 0:e.data)&&t.append("attachment",this.attachment[0].data,this.attachment[0].data.name),this.rxApprovalConsoleService.saveQuestion(t,"question").pipe((0,m.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.console.questions.question-added.message")),this.activeModalRef.close(!0)})}cancel(){this.activeModalRef.dismiss(h.DismissReasons.CLOSE_BTN)}getApprovalUsers(e,t,i){return this.rxApprovalConsoleService.getApprovalUsers(e,t,i)}optionFormatter(e){return`${e.value} ${e.displayValue}`}}he.\u0275fac=function(e){return new(e||he)(n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},he.\u0275cmp=n["\u0275\u0275defineComponent"]({type:he,selectors:[["rx-approval-request-question"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:33,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],[1,"form-group","d-block",3,"label","ngModel","optionLoader","required","template","optionFormatter","ngModelChange"],["rows","2",1,"d-block","form-group",3,"label","ngModel","required","autofocus","ngModelChange"],["adaptRequired","",3,"ngModel","enableDnD","showMaxSizeRestriction","label","ngModelChange"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","adaptInlineLoader","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"],["optionTemplate",""],[1,"text-secondary"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",2),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275elementStart"](6,"rx-select-with-pagination",4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedUser=e}),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"adapt-rx-textarea",5),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.question=e}),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-rx-uploader",6),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.attachment=e}),n["\u0275\u0275pipe"](11,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",7),n["\u0275\u0275elementStart"](13,"button",8),n["\u0275\u0275listener"]("click",function(){return t.saveQuestion()}),n["\u0275\u0275text"](14),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"button",9),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](19,T,4,2,"ng-template",null,10,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](20);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,21,"com.bmc.arsys.rx.client.approval.console.questions.new.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,23,"com.bmc.arsys.rx.client.common.send-to.label")),n["\u0275\u0275property"]("ngModel",t.selectedUser)("optionLoader",t.userLoaderFunc)("required",!0)("template",e)("optionFormatter",t.optionFormatter),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](9,25,"com.bmc.arsys.rx.client.common.question.label")),n["\u0275\u0275property"]("ngModel",t.question)("required",!0)("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](11,27,"com.bmc.arsys.rx.client.common.attachment.label")),n["\u0275\u0275property"]("ngModel",t.attachment)("enableDnD",!0)("showMaxSizeRestriction",!1),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",!t.selectedUser.length||!t.question||!t.allowDismiss)("adaptInlineLoader",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](15,29,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](18,31,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[g.RxSelectWithPaginationComponent,v.NgControlStatus,v.NgModel,v.RequiredValidator,h.AdaptRxTextareaComponent,h.AdaptRxUploaderComponent,h.AdaptButtonComponent,h.AdaptInlineStandaloneDirective],pipes:[c.TranslatePipe],encapsulation:2});class ge{constructor(e,t,i,o,r,a){this.translateService=e,this.rxRecordInstanceService=t,this.rxModalService=i,this.adaptModalService=o,this.rxApprovalConsoleService=r,this.rxRecordInstanceDataPageService=a,this.questionSubmitted=new n.EventEmitter}ngOnInit(){this.gridConfig$=(0,s.of)({enableRowSelection:null,getData:e=>this.getQuestionData(e),columns:this.getQuestionColumns(),getRecordDefinition:()=>(0,s.of)(this.getQuestionRecordDefinition()),recordDefinitionName:ae.requestDetailsGrid.definition,styles:"flex-fill"})}ngOnChanges(e){var t,i;(null===(t=e.approvalRequest)||void 0===t?void 0:t.currentValue)&&(null===(i=this.requestQuestionsGrid)||void 0===i||i.api.refresh().subscribe())}isNewQuestionButtonDisabled(){return!(0,p.includes)([ne.Pending,ne.Hold],this.requestsTabStatus)}askNewQuestion(){this.rxModalService.openModal({content:he,size:"sm",data:{selectedRequest:this.approvalRequest}}).then(e=>{e&&this.questionSubmitted.emit()}).catch(p.noop)}getQuestionData(e){return(0,s.iif)(()=>this.gridType===oe.NeedAttentionRequests,this.rxApprovalConsoleService.getCurrentRequestDetails(this.approvalRequest[ae.needAttentionRequestsGrid.fields.requestID],this.approvalRequest[ae.needAttentionRequestsGrid.fields.application]),(0,s.of)(this.approvalRequest)).pipe((0,m.switchMap)(t=>this.rxRecordInstanceDataPageService.post({params:(0,p.omit)(Object.assign(Object.assign({},e),{shouldIncludeTotalSize:!0,[ae.requestDetailsGrid.fields.application]:t.application,[ae.requestDetailsGrid.fields.type]:ae.requestDetailsGrid.questionTypeValue,[ae.requestDetailsGrid.fields.request]:t.request}),["searchText"])})))}getQuestionColumns(){return[{index:0,fieldId:ae.requestDetailsGrid.fields.to.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.questions.grid.column.question-to.title")},{index:1,fieldId:ae.requestDetailsGrid.fields.from.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.from.label")},{index:2,fieldId:ae.requestDetailsGrid.fields.question.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.question.label"),clickable:!0,actions:[{name:(e,t)=>{this.showQuestionDetails(t)}}],filterable:!1,sortable:!1},{index:3,fieldId:ae.requestDetailsGrid.fields.response.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.questions.grid.column.response.title"),filterable:!1,sortable:!1},{index:4,fieldId:d.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1,filterable:!1},{index:5,fieldId:ae.requestDetailsGrid.fields.attachment.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.attachment.label"),clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(ae.requestDetailsGrid.questionDefinition,Number(ae.requestDetailsGrid.fields.attachment),t[d.RX_RECORD_DEFINITION.coreFieldIds.id].split("|")[0],t[ae.requestDetailsGrid.fields.attachment])}}]}]}getQuestionRecordDefinition(){return{fieldDefinitions:[{id:ae.requestDetailsGrid.fields.to,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.from,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.question,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.response,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.attachment,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.attachment},{id:d.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character}]}}showQuestionDetails(e){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.question-response-dialog.title"),content:f.ReadOnlyFieldsModalComponent,size:"sm",data:{fields:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.send-to.label"),value:e[ae.requestDetailsGrid.fields.to]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.question.label"),value:e[ae.requestDetailsGrid.fields.question]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-field.label"),value:e[ae.requestDetailsGrid.fields.response]||this.translateService.instant("com.bmc.arsys.rx.client.approval.console.question-response-dialog.not-responded.message")}]}}).catch(p.noop)}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](d.RxRecordInstanceService),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](h.AdaptModalService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](d.RxRecordInstanceDataPageService))},ge.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ge,selectors:[["rx-approval-request-questions"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](O,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requestQuestionsGrid=e.first)}},inputs:{approvalRequest:"approvalRequest",requestsTabStatus:"requestsTabStatus",gridType:"gridType"},outputs:{questionSubmitted:"questionSubmitted"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[["type","rules",3,"label",4,"ngIf"],["type","button","class","p-0 mb-2 d-icon-plus_circle align-self-start","adapt-button","","btn-type","tertiary","rx-id","new-question-button",3,"disabled","click",4,"ngIf"],[3,"config",4,"ngIf"],["type","rules",3,"label"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-question-button",1,"p-0","mb-2","d-icon-plus_circle","align-self-start",3,"disabled","click"],[3,"config"],["requestQuestionsGrid",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,N,2,3,"adapt-empty-state",0),n["\u0275\u0275template"](1,A,3,4,"button",1),n["\u0275\u0275template"](2,P,2,1,"rx-record-grid",2)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest))},directives:[o.NgIf,h.AdaptEmptyStateComponent,h.AdaptButtonComponent,l.RecordGridComponent],pipes:[c.TranslatePipe],encapsulation:2});class ve extends f.RxModalClass{constructor(e,t,i,n,o){super(e,o),this.activeModalRef=e,this.translateService=t,this.rxNotificationService=i,this.rxApprovalConsoleService=n,this.injector=o,this.attachment=[]}isDirty(){var e;return!(!this.comment&&!(null===(e=this.attachment[0])||void 0===e?void 0:e.data))}saveComment(){var e;this.allowDismiss=!1;const t=new FormData,i=this.activeModalRef.getData().selectedRequest;t.append("comments",this.comment),t.append("application",i.application),t.append("applicationRequestId",i.resolvedDisplayValues.request),t.append("signatureID",i.signatureID),(null===(e=this.attachment[0])||void 0===e?void 0:e.data)&&t.append("attachment",this.attachment[0].data,this.attachment[0].data.name),this.rxApprovalConsoleService.saveQuestion(t,"comment").pipe((0,m.finalize)(()=>{this.allowDismiss=!0})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.console.comments.comment-added.message")),this.activeModalRef.close(!0)})}cancel(){this.activeModalRef.dismiss(h.DismissReasons.CLOSE_BTN)}isCommentEmpty(){return!(0,p.trim)(this.comment)}}ve.\u0275fac=function(e){return new(e||ve)(n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](n.Injector))},ve.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ve,selectors:[["rx-approval-request-comment"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:25,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],["rows","3",1,"d-block","form-group",3,"label","ngModel","required","autofocus","ngModelChange"],["adaptRequired","",3,"ngModel","enableDnD","showMaxSizeRestriction","label","ngModelChange"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","adaptInlineLoader","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",2),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275elementStart"](6,"adapt-rx-textarea",4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.comment=e}),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"adapt-rx-uploader",5),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.attachment=e}),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",6),n["\u0275\u0275elementStart"](11,"button",7),n["\u0275\u0275listener"]("click",function(){return t.saveComment()}),n["\u0275\u0275text"](12),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"button",8),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,15,"com.bmc.arsys.rx.client.approval.console.comments.new.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,17,"com.bmc.arsys.rx.client.common.comment.label")),n["\u0275\u0275property"]("ngModel",t.comment)("required",!0)("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](9,19,"com.bmc.arsys.rx.client.common.attachment.label")),n["\u0275\u0275property"]("ngModel",t.attachment)("enableDnD",!0)("showMaxSizeRestriction",!1),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.isCommentEmpty()||!t.allowDismiss)("adaptInlineLoader",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](13,21,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.allowDismiss),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](16,23,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.AdaptRxTextareaComponent,v.NgControlStatus,v.NgModel,v.RequiredValidator,h.AdaptRxUploaderComponent,h.AdaptButtonComponent,h.AdaptInlineStandaloneDirective],pipes:[c.TranslatePipe],encapsulation:2});class ye extends a.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.ApprovalQCIDataPageQuery"),this.injector=e}}ye.\u0275fac=function(e){return new(e||ye)(n["\u0275\u0275inject"](n.Injector))},ye.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ye,factory:ye.\u0275fac,providedIn:"root"});class be{constructor(e,t,i,n,o,r,a){this.rxApprovalQCIDataPageService=e,this.rxModalService=t,this.rxApprovalConsoleService=i,this.adaptModalService=n,this.rxDataPageService=o,this.rxRecordInstanceService=r,this.translateService=a}ngOnInit(){this.gridConfig$=(0,s.of)({enableRowSelection:null,getData:e=>this.getCommentData(e),columns:this.getCommentColumns(),getRecordDefinition:()=>(0,s.of)(this.getCommentRecordDefinition()),recordDefinitionName:ae.requestDetailsGrid.definition,styles:"flex-fill"})}ngOnChanges(e){var t,i;(null===(t=e.approvalRequest)||void 0===t?void 0:t.currentValue)&&(null===(i=this.requestCommentsGrid)||void 0===i||i.api.refresh().subscribe())}addNewComment(){this.rxModalService.openModal({content:ve,size:"sm",data:{selectedRequest:this.selectedRequest}}).then(e=>{e&&this.requestCommentsGrid.api.refresh().subscribe()}).catch(p.noop)}getCommentData(e){return(0,s.iif)(()=>this.gridType===oe.NeedAttentionRequests,this.rxApprovalConsoleService.getCurrentRequestDetails(this.approvalRequest[ae.needAttentionRequestsGrid.fields.requestID],this.approvalRequest[ae.needAttentionRequestsGrid.fields.application]),(0,s.of)(this.approvalRequest)).pipe((0,m.tap)(e=>{this.selectedRequest=e}),(0,m.switchMap)(t=>this.rxApprovalQCIDataPageService.get({params:(0,p.omit)(Object.assign(Object.assign({},e),{shouldIncludeTotalSize:!0,[ae.requestDetailsGrid.fields.application]:t.application,[ae.requestDetailsGrid.fields.signatureID]:t.signatureID,[ae.requestDetailsGrid.fields.type]:ae.requestDetailsGrid.commentTypeValue,[ae.requestDetailsGrid.fields.request]:t.request}),["searchText"])})))}getCommentColumns(){return[{index:1,fieldId:ae.requestDetailsGrid.fields.from.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.submitter.label")},{index:2,fieldId:ae.requestDetailsGrid.fields.response.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.comment.label"),clickable:!0,actions:[{name:(e,t)=>{this.showCommentDetails(t)}}],sortable:!1},{index:3,fieldId:ae.requestDetailsGrid.fields.attachment.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.attachment.label"),clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(ae.requestDetailsGrid.questionDefinition,Number(ae.requestDetailsGrid.fields.attachment),t[d.RX_RECORD_DEFINITION.coreFieldIds.id].split("|")[0],t[ae.requestDetailsGrid.fields.attachment])}}]},{index:4,fieldId:d.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1,filterable:!1}]}getCommentRecordDefinition(){return{fieldDefinitions:[{id:ae.requestDetailsGrid.fields.from,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.response,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.attachment,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.attachment},{id:d.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character}]}}showCommentDetails(e){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.common.comment.label"),content:f.ReadOnlyFieldsModalComponent,data:{fields:[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.submitter.label"),value:e[ae.requestDetailsGrid.fields.from]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.comment.label"),value:e[ae.requestDetailsGrid.fields.response]}]},size:"sm"}).catch(p.noop)}}be.\u0275fac=function(e){return new(e||be)(n["\u0275\u0275directiveInject"](ye),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](h.AdaptModalService),n["\u0275\u0275directiveInject"](a.RxDataPageFactoryService),n["\u0275\u0275directiveInject"](d.RxRecordInstanceService),n["\u0275\u0275directiveInject"](c.TranslateService))},be.\u0275cmp=n["\u0275\u0275defineComponent"]({type:be,selectors:[["rx-approval-request-comments"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](j,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requestCommentsGrid=e.first)}},inputs:{approvalRequest:"approvalRequest",gridType:"gridType"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[["type","events",3,"label",4,"ngIf"],["type","button","class","p-0 mb-2 d-icon-plus_circle align-self-start","adapt-button","","btn-type","tertiary","rx-id","new-comment-button",3,"click",4,"ngIf"],[3,"config",4,"ngIf"],["type","events",3,"label"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-comment-button",1,"p-0","mb-2","d-icon-plus_circle","align-self-start",3,"click"],[3,"config"],["requestCommentsGrid",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,_,2,3,"adapt-empty-state",0),n["\u0275\u0275template"](1,V,3,3,"button",1),n["\u0275\u0275template"](2,k,2,1,"rx-record-grid",2)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest))},directives:[o.NgIf,h.AdaptEmptyStateComponent,h.AdaptButtonComponent,l.RecordGridComponent],pipes:[c.TranslatePipe],encapsulation:2});class xe{constructor(e,t,i,n){this.rxApprovalConsoleService=e,this.translateService=t,this.rxRecordInstanceService=i,this.rxRecordInstanceDataPageService=n}ngOnInit(){this.gridConfig$=(0,s.of)({enableRowSelection:null,getData:e=>this.getAttachmentData(e),columns:this.getAttachmentColumns(),getRecordDefinition:()=>(0,s.of)(this.getAttachmentRecordDefinition()),recordDefinitionName:ae.requestDetailsGrid.definition,styles:"flex-fill"})}ngOnChanges(e){var t,i;(null===(t=e.approvalRequest)||void 0===t?void 0:t.currentValue)&&(null===(i=this.requestAttachmentsGrid)||void 0===i||i.api.refresh().subscribe())}getAttachmentData(e){return(0,s.iif)(()=>this.gridType===oe.NeedAttentionRequests,this.rxApprovalConsoleService.getCurrentRequestDetails(this.approvalRequest[ae.needAttentionRequestsGrid.fields.requestID],this.approvalRequest[ae.needAttentionRequestsGrid.fields.application]),(0,s.of)(this.approvalRequest)).pipe((0,m.switchMap)(t=>this.rxRecordInstanceDataPageService.post({params:(0,p.omit)(Object.assign(Object.assign({},e),{shouldIncludeTotalSize:!0,[ae.requestDetailsGrid.fields.application]:t.application,[ae.requestDetailsGrid.fields.request]:t.request}),["searchText","propertySelection"])}).pipe((0,m.map)(e=>(e.data=(0,p.reject)(e.data,e=>!e[ae.requestDetailsGrid.fields.attachment]),e)))))}getAttachmentColumns(){return[{index:0,fieldId:ae.requestDetailsGrid.fields.from.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.submitter.label")},{index:1,fieldId:ae.requestDetailsGrid.fields.attachment.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.attachments.grid.file-name.title"),clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(ae.requestDetailsGrid.questionDefinition,Number(ae.requestDetailsGrid.fields.attachment),t[d.RX_RECORD_DEFINITION.coreFieldIds.id].split("|")[0],t[ae.requestDetailsGrid.fields.attachment])}}]},{index:2,fieldId:d.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1,filterable:!1}]}getAttachmentRecordDefinition(){return{fieldDefinitions:[{id:ae.requestDetailsGrid.fields.from,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.requestDetailsGrid.fields.attachment,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.attachment},{id:d.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character}]}}}xe.\u0275fac=function(e){return new(e||xe)(n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](d.RxRecordInstanceService),n["\u0275\u0275directiveInject"](d.RxRecordInstanceDataPageService))},xe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xe,selectors:[["rx-approval-request-attachments"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](B,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requestAttachmentsGrid=e.first)}},inputs:{approvalRequest:"approvalRequest",gridType:"gridType"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["type","grid",3,"label",4,"ngIf"],[3,"config",4,"ngIf"],["type","grid",3,"label"],[3,"config"],["requestAttachmentsGrid",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,$,2,3,"adapt-empty-state",0),n["\u0275\u0275template"](1,L,2,1,"rx-record-grid",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.approvalRequest),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.approvalRequest))},directives:[o.NgIf,h.AdaptEmptyStateComponent,l.RecordGridComponent],pipes:[c.TranslatePipe],encapsulation:2});class Ce extends x.BaseViewComponent{constructor(e,t,i,n,o,r,a,l,c,u,f,h,g){super(),this.rxStringService=e,this.rxApprovalConsoleHelperService=t,this.rxCurrentUserService=i,this.translateService=n,this.rxModalService=o,this.rxNotificationService=r,this.rxApprovalConsoleService=a,this.rxRecordInstanceService=l,this.adaptModalService=c,this.rxSignatureDetailDataPageService=u,this.recordGridFilterService=f,this.rxRecordInstanceDataPageService=h,this.rxDefinitionNameService=g,this.selectedApprovalRequestsTab=ae.approvalRequestTypes.pending,this.approvalRequestTypes=(0,p.map)(ae.approvalRequestTypes,e=>Object.assign(Object.assign({},e),{label:this.translateService.instant(e.labelKey)})),this.dataLoaded$=new s.Subject,this.attentionGridParams={recorddefinition:ae.needAttentionRequestsGrid.definition,[d.RX_RECORD_DEFINITION.coreFieldIds.assignee]:this.rxCurrentUserService.getName(),[d.RX_RECORD_DEFINITION.coreFieldIds.status]:"0",[ae.needAttentionRequestsGrid.fields.state]:"0"},this.needAttentionRequestCount$=this.rxRecordInstanceDataPageService.post({params:this.attentionGridParams}),this.availableRequestCount$=this.dataLoaded$.pipe((0,m.switchMap)(()=>(0,s.forkJoin)([this.rxApprovalConsoleService.getApprovalRequestCounts(),this.needAttentionRequestCount$]))).pipe((0,m.map)(([e,t])=>Object.assign(Object.assign({},e),{needAttentionCount:t.totalSize}))),this.activeTabIndex=0,this.selectedRecordsInSequence=[]}ngOnInit(){this.updateGridConfig()}onDataLoaded(){var e;null===(e=this.gridSubscription)||void 0===e||e.unsubscribe(),this.gridSubscription=this.approvalRequestsGrid.adaptTable.selectionChange.subscribe(e=>{const t=(0,p.isNil)(this.selectedApprovalRequest)?e[0]:e[e.length-1];this.isReassignButtonDisabled=(0,p.some)(e,e=>"No"===e.canReassign),this.selectedRecordsInSequence=this.approvalRequestsGrid.api.getSelectedRows(!0),this.selectedRecordIndex=(0,p.findIndex)(this.selectedRecordsInSequence,{[r.RowDataItemIdFieldName]:null==t?void 0:t[r.RowDataItemIdFieldName]}),this.selectedApprovalRequest=t}),this.dataLoaded$.next()}approveRequest(){this.rxModalService.openModal({content:pe,size:"sm",data:{commandType:re.Approved,selectedRequests:this.approvalRequestsGrid.api.getSelectedRows(),modalTitle:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.approve-request-dialog.title")}}).then(e=>{e&&this.reloadGridData()}).catch(p.noop)}rejectRequest(){this.rxModalService.openModal({content:pe,size:"sm",data:{commandType:re.Rejected,selectedRequests:this.approvalRequestsGrid.api.getSelectedRows(),modalTitle:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.reject-request-dialog.title")}}).then(e=>{e&&this.reloadGridData()}).catch(p.noop)}holdRequest(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request.hold-dialog.message")}).then(e=>{if(e){const e=(0,p.map)(this.approvalRequestsGrid.api.getSelectedRows(),e=>this.rxApprovalConsoleService.getCommandPayload(re.OnHold,e[ae.approvalRequestsGrid.fields.signatureInstanceID]));this.rxApprovalConsoleService.holdRequest(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request.hold-success.message")),this.reloadGridData()})}})}reassignRequest(){this.rxModalService.openModal({content:de,size:"sm",data:{selectedRequestInstanceIds:(0,p.map)(this.approvalRequestsGrid.api.getSelectedRows(),e=>e.signatureInstanceID)}}).then(e=>{e&&this.reloadGridData()}).catch(p.noop)}isHoldButtonDisabled(){return this.selectedApprovalRequestsTab.status===ne.Hold}get currentRequestId(){var e,t;return(null===(e=this.selectedApprovalRequest)||void 0===e?void 0:e.request)||(null===(t=this.selectedApprovalRequest)||void 0===t?void 0:t[ae.needAttentionRequestsGrid.fields.requestID])}get selectedApprovalRequestCount(){var e,t;return(null===(t=null===(e=this.approvalRequestsGrid)||void 0===e?void 0:e.api)||void 0===t?void 0:t.getSelectedRowCount())||0}fetchApprovalRequests(e){this.approvalRequestsGrid.adaptTableConfig.selectedItems=[],this.selectedApprovalRequest=null,this.selectedApprovalRequestsTab=this.approvalRequestTypes[e.index],this.updateGridConfig()}showNextRequestDetails(){this.selectedApprovalRequest=this.selectedRecordsInSequence[++this.selectedRecordIndex]}showPreviousRequestDetails(){this.selectedApprovalRequest=this.selectedRecordsInSequence[--this.selectedRecordIndex]}isPreviousButtonDisabled(){return 0===this.selectedApprovalRequestCount||this.selectedRecordIndex<=0}isNextButtonDisabled(){return 0===this.selectedApprovalRequestCount||this.selectedRecordIndex===this.selectedRecordsInSequence.length-1}isApprovalRequestGrid(){return this.selectedApprovalRequestsTab.gridType===oe.ApprovalRequests}isNeedAttentionGrid(){return this.selectedApprovalRequestsTab.gridType===oe.NeedAttentionRequests}onTabChanged(e){e.event&&(this.activeTabIndex=e.index)}needAttentionGridColumns(){return[{index:0,fieldId:ae.needAttentionRequestsGrid.fields.fromUser,title:this.translateService.instant("com.bmc.arsys.rx.client.common.from.label")},{index:1,fieldId:ae.needAttentionRequestsGrid.fields.toUser,title:this.translateService.instant("com.bmc.arsys.rx.client.common.send-to.label")},{index:2,fieldId:ae.needAttentionRequestsGrid.fields.description,title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),clickable:!0,actions:[{name:(e,t)=>{this.openQuestionResponseDialog(t)}}]},{index:3,fieldId:ae.needAttentionRequestsGrid.fields.application,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.needs-attention.grid.column.application.title"),cellTemplate:this.definitionNameCellTemplate},{index:4,fieldId:ae.needAttentionRequestsGrid.fields.requestID,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.needs-attention.grid.column.request.title")},{index:5,fieldId:ae.needAttentionRequestsGrid.fields.attachment,title:this.translateService.instant("com.bmc.arsys.rx.client.common.attachment.label"),clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(ae.needAttentionRequestsGrid.definition,Number(ae.needAttentionRequestsGrid.fields.attachment),t[d.RX_RECORD_DEFINITION.coreFieldIds.id],t[ae.needAttentionRequestsGrid.fields.attachment])}}]},{index:6,fieldId:ae.needAttentionRequestsGrid.fields.question,title:this.translateService.instant("com.bmc.arsys.rx.client.common.question.label"),visible:!1,filterable:!1,sortable:!1},{index:7,fieldId:d.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1,filterable:!1}]}ngOnDestroy(){this.dataLoaded$.complete(),this.gridSubscription.unsubscribe()}onQuestionSubmitted(){this.reloadGridData()}getData(e){const t=this.recordGridFilterService.generateTextFilterQuery(e.searchText,this.approvalRequestsGrid.adaptTableConfig.columns),i=(0,p.cloneDeep)(this.approvalRequestsGrid.state.advancedFiltering.selectedFilters),n=(0,p.find)(i,{filterOptionId:ae.approvalRequestsGrid.fields.application});if(n){const e=(0,p.find)(this.approvalRequestsGrid.state.advancedFiltering.selectedFilters,{filterOptionId:ae.approvalRequestsGrid.fields.application});e.value.filterValue=(0,p.map)(e.value.filterValue,e=>this.rxDefinitionNameService.getDisplayName(e)),n.value.filterValue=(0,p.map)(n.value.filterValue,e=>`%${e}`)}const o=this.recordGridFilterService.addQueries(this.approvalRequestsGrid.buildQueryByAdvancedFilters(i),t);return o&&(e.queryExpression=o),e.propertySelection.push(ae.approvalRequestsGrid.fields.ifMultipleApprovers),this.rxSignatureDetailDataPageService.get({params:(0,p.omit)(Object.assign(Object.assign({},e),{status:this.selectedApprovalRequestsTab.status,shouldIncludeTotalSize:!0,ignoreAlternateUser:!1,propertySelection:e.propertySelection.filter(e=>e!==ae.approvalRequestsGrid.fields.actingAs)}),["searchText","recorddefinition"])}).pipe((0,m.tap)(e=>{e.data.forEach(e=>{e.otherDetail1=this.rxApprovalConsoleHelperService.formatValue(e.otherDetail1),e.otherDetail2=this.rxApprovalConsoleHelperService.formatValue(e.otherDetail2),e.otherDetail3=this.rxApprovalConsoleHelperService.formatValue(e.otherDetail3),e.otherDetail4=this.rxApprovalConsoleHelperService.formatValue(e.otherDetail4)})}))}getNeedAttentionData(e){const t=(0,p.omit)(Object.assign(Object.assign({},this.attentionGridParams),e),["searchText"]);return this.rxRecordInstanceDataPageService.post({params:t})}updateGridConfig(){this.shouldShowGrid=!1,this.gridConfig$=this.prepareGridConfiguration(),setTimeout(()=>{this.shouldShowGrid=!0})}prepareGridConfiguration(){const e={enableFiltering:!0,enableRowSelection:l.RowSelectionMode.Multiple};return this.isApprovalRequestGrid()?(0,s.of)(Object.assign(Object.assign({},e),{actionButtons:this.getActionButtons(),getData:e=>this.getData(e),columns:this.getColumns(),getRecordDefinition:()=>(0,s.of)(this.getRecordDefinition()),recordIdField:ae.approvalRequestsGrid.fields.signatureInstanceID,styles:"flex-fill",guid:`ap-${this.rxStringService.toRxId(this.selectedApprovalRequestsTab.status)}-grid`})):this.isNeedAttentionGrid()?(0,s.of)(Object.assign(Object.assign({},e),{recordDefinitionName:ae.needAttentionRequestsGrid.definition,getData:e=>this.getNeedAttentionData(e),columns:this.needAttentionGridColumns(),styles:"flex-fill",guid:"ap-need-attention-grid"})):void 0}getActionButtons(){return(0,p.includes)([ne.Pending,ne.RequestMoreInfo,ne.Hold],this.selectedApprovalRequestsTab.status)?[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.button.approve.label"),style:"success",iconCls:"check_circle_o",size:"small",actions:[{name:()=>this.approveRequest()}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.button.reject.label"),style:"critical",iconCls:"cross_circle_o",size:"small",actions:[{name:()=>this.rejectRequest()}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.button.hold.label"),style:"warning",iconCls:"pause_circle_o",size:"small",disabled:()=>this.isHoldButtonDisabled(),actions:[{name:()=>this.holdRequest()}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.button.reassign.label"),iconCls:"user_arrow_o",style:"secondary",size:"small",disabled:()=>this.isReassignButtonDisabled,actions:[{name:()=>this.reassignRequest()}]}]:[]}reloadGridData(){this.selectedApprovalRequest=null,this.approvalRequestsGrid.api.refresh().subscribe()}openQuestionResponseDialog(e){this.rxModalService.openModal({content:ce,size:"sm",data:{selectedRequest:e}}).then(e=>{e&&this.reloadGridData()}).catch(p.noop)}getColumns(){return[{fieldId:ae.approvalRequestsGrid.fields.application,title:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition.label"),cellTemplate:this.definitionNameCellTemplate},{fieldId:ae.approvalRequestsGrid.fields.summary,title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),cellTemplate:this.resolvedFieldCellTemplate,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.requester,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.requester.label"),cellTemplate:this.resolvedFieldCellTemplate,sortable:!0},{fieldId:ae.approvalRequestsGrid.fields.status,title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label"),filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.request,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request-id.label"),cellTemplate:this.resolvedFieldCellTemplate,sortable:!0},{fieldId:ae.approvalRequestsGrid.fields.actingAs,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.acting-as.title"),filterable:!1,searchable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.createDateSig,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.request-date.label"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.process,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.process.title"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.signatureInstanceID,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.signature-instance-id.title"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.justificationReasonField,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.justification.title"),visible:!1,filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.sigTermStateDate,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.status-updated-on.title"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.signatureID,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.signature-id.title"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.otherDetail1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.other-detail1.title"),visible:!1,filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.otherDetail2,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.other-detail2.title"),visible:!1,filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.otherDetail3,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.other-detail3.title"),visible:!1,filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.otherDetail4,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.other-detail4.title"),visible:!1,filterable:!1,sortable:!1},{fieldId:ae.approvalRequestsGrid.fields.justificationRequired,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification.require-on.label"),visible:!1,filterable:!1},{fieldId:ae.approvalRequestsGrid.fields.processInstanceId,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.console.grid.column.process-instance-id.title"),visible:!1,filterable:!1,sortable:!1}]}getRecordDefinition(){return{fieldDefinitions:[{id:ae.approvalRequestsGrid.fields.application,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.summary,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.requester,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.status,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{[ne.Pending]:this.translateService.instant(ae.approvalRequestTypes.pending.labelKey),[ne.RequestMoreInfo]:this.translateService.instant(ae.approvalRequestTypes.moreInfo.labelKey),[ne.Approved]:this.translateService.instant(ae.approvalRequestTypes.approved.labelKey),[ne.Rejected]:this.translateService.instant(ae.approvalRequestTypes.rejected.labelKey),[ne.Cancelled]:this.translateService.instant(ae.approvalRequestTypes.cancelled.labelKey),[ne.Error]:this.translateService.instant(ae.approvalRequestTypes.error.labelKey),[ne.Hold]:this.translateService.instant(ae.approvalRequestTypes.onHold.labelKey),[ne.Closed]:this.translateService.instant(ae.approvalRequestTypes.closed.labelKey)}},{id:ae.approvalRequestsGrid.fields.request,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.actingAs,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.createDateSig,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:ae.approvalRequestsGrid.fields.process,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.signatureInstanceID,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.justificationReasonField,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.sigTermStateDate,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:ae.approvalRequestsGrid.fields.signatureID,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.otherDetail1,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.otherDetail2,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.otherDetail3,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.otherDetail4,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character},{id:ae.approvalRequestsGrid.fields.justificationRequired,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{[a.JustificationRequirement.RequiredForApproval]:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification.require-on.approval.label"),[a.JustificationRequirement.RequiredForRejection]:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification.require-on.rejection.label"),[a.JustificationRequirement.RequiredForApprovalOrRejection]:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification.require-on.approval-rejection.label"),[a.JustificationRequirement.NotRequired]:this.translateService.instant("com.bmc.arsys.rx.client.common.not-applicable.label")}},{id:ae.approvalRequestsGrid.fields.processInstanceId,resourceType:d.RX_RECORD_DEFINITION.resourceTypes.character}]}}}Ce.\u0275fac=function(e){return new(e||Ce)(n["\u0275\u0275directiveInject"](b.RxStringService),n["\u0275\u0275directiveInject"](ue),n["\u0275\u0275directiveInject"](a.RxCurrentUserService),n["\u0275\u0275directiveInject"](c.TranslateService),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](le),n["\u0275\u0275directiveInject"](d.RxRecordInstanceService),n["\u0275\u0275directiveInject"](h.AdaptModalService),n["\u0275\u0275directiveInject"](ie),n["\u0275\u0275directiveInject"](l.RxRecordGridFilterService),n["\u0275\u0275directiveInject"](d.RxRecordInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService))},Ce.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ce,selectors:[["rx-approval-console"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](G,5),n["\u0275\u0275viewQuery"](z,7),n["\u0275\u0275viewQuery"](U,7),n["\u0275\u0275viewQuery"](q,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requestDetailsTabs=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.resolvedFieldCellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.definitionNameCellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.approvalRequestsGrid=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:37,vars:35,consts:[[1,"row","h-100"],[1,"col-12","col-md-7","d-flex","flex-column","flex-fill","h-100"],[1,"mt-0"],["type","pills","rx-id","approval-requests-tabs",3,"tab-active","tab-active-changed",4,"ngIf"],[3,"config","dataLoaded",4,"ngIf"],[1,"col-12","col-md-5","mt-4","mt-md-0","d-flex","flex-column","flex-fill","h-100"],[1,"mb-1"],["type","button","adapt-button","","btn-type","secondary","size","small","rx-id","prev-button",1,"d-icon-left-angle_left","mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","size","small","rx-id","next-button",1,"d-icon-left-angle_right","mr-3",3,"disabled","click"],[1,"d-inline-block","my-0","align-middle"],[4,"ngIf"],["type","pills","rx-id","request-details-tabs",1,"d-flex","flex-column","flex-fill","h-100",3,"tab-active","tab-active-changed"],["requestDetailsTabs",""],["badge-type","primary",3,"adapt-tab-title"],[3,"approvalRequest","gridType"],[3,"adapt-tab-title"],["class","d-flex flex-column flex-fill h-100",3,"approvalRequest","gridType",4,"ngIf"],["class","d-flex flex-column flex-fill h-100",3,"approvalRequest","gridType","requestsTabStatus","questionSubmitted",4,"ngIf"],["definitionNameCellTemplate",""],["resolvedFieldCellTemplate",""],["type","pills","rx-id","approval-requests-tabs",3,"tab-active","tab-active-changed"],[3,"adapt-tab-title","badge","badge-type",4,"ngFor","ngForOf"],[3,"adapt-tab-title","badge","badge-type"],[3,"config","dataLoaded"],["approvalRequestsGrid",""],[1,"d-flex","flex-column","flex-fill","h-100",3,"approvalRequest","gridType"],[1,"d-flex","flex-column","flex-fill","h-100",3,"approvalRequest","gridType","requestsTabStatus","questionSubmitted"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"h2",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,W,2,2,"adapt-tabset",3),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275template"](7,H,2,1,"rx-record-grid",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",5),n["\u0275\u0275elementStart"](9,"div",6),n["\u0275\u0275elementStart"](10,"button",7),n["\u0275\u0275listener"]("click",function(){return t.showPreviousRequestDetails()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"button",8),n["\u0275\u0275listener"]("click",function(){return t.showNextRequestDetails()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"h2",9),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275template"](15,Q,2,1,"span",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"adapt-tabset",11,12),n["\u0275\u0275listener"]("tab-active-changed",function(e){return t.onTabChanged(e)}),n["\u0275\u0275elementStart"](18,"adapt-tab-panel",13),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275element"](20,"rx-approval-request-general-details",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](21,"adapt-tab-panel",15),n["\u0275\u0275pipe"](22,"translate"),n["\u0275\u0275template"](23,K,1,2,"rx-approval-request-approvers",16),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](24,"adapt-tab-panel",15),n["\u0275\u0275pipe"](25,"translate"),n["\u0275\u0275template"](26,J,1,3,"rx-approval-request-questions",17),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](27,"adapt-tab-panel",15),n["\u0275\u0275pipe"](28,"translate"),n["\u0275\u0275template"](29,Y,1,2,"rx-approval-request-comments",16),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](30,"adapt-tab-panel",15),n["\u0275\u0275pipe"](31,"translate"),n["\u0275\u0275template"](32,Z,1,2,"rx-approval-request-attachments",16),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](33,ee,2,3,"ng-template",null,18,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](35,te,1,1,"ng-template",null,19,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,19,"com.bmc.arsys.rx.client.approval.console.requests.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](6,21,t.availableRequestCount$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.shouldShowGrid),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.isPreviousButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",t.isNextButtonDisabled()),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](14,23,"com.bmc.arsys.rx.client.approval.console.request-details.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.currentRequestId),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("tab-active",0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](19,25,"com.bmc.arsys.rx.client.common.general-items.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("approvalRequest",t.selectedApprovalRequest)("gridType",t.selectedApprovalRequestsTab.gridType),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](22,27,"com.bmc.arsys.rx.client.approval.console.approvers.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",1===t.activeTabIndex),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](25,29,"com.bmc.arsys.rx.client.approval.console.questions.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",2===t.activeTabIndex),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](28,31,"com.bmc.arsys.rx.client.approval.console.comments.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",3===t.activeTabIndex),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](31,33,"com.bmc.arsys.rx.client.approval.console.attachments.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",4===t.activeTabIndex))},directives:[o.NgIf,h.AdaptButtonComponent,h.AdaptTabsComponent,h.AdaptTabsPanelComponent,me,o.NgForOf,l.RecordGridComponent,fe,ge,be,xe],pipes:[c.TranslatePipe,o.AsyncPipe,a.RxDefinitionNamePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;padding:1rem;height:100%}[_nghost-%COMP%]  adapt-tabset .tab-content{padding:.5rem 0 0}[_nghost-%COMP%]  rx-record-grid{height:100%}[_nghost-%COMP%]  rx-record-grid .rx-action-button_success button{background:#89c341;border-color:#78ac36}[_nghost-%COMP%]  rx-record-grid .rx-action-button_success button:hover{background-color:#78ac36}[_nghost-%COMP%]  rx-record-grid .rx-action-button_critical button{background:#f83200;border-color:#d72b00}[_nghost-%COMP%]  rx-record-grid .rx-action-button_critical button:hover{background-color:#d72b00}[_nghost-%COMP%]  rx-record-grid .rx-action-button_warning button{color:#313538;background:#f1b521;border-color:#e3a50e}[_nghost-%COMP%]  rx-record-grid .rx-action-button_warning button:hover{background-color:#e3a50e}[_nghost-%COMP%]  rx-record-grid .rx-action-button_warning button:disabled{color:#313538;background-color:#f6cf6f}']});class Se{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-approval-console",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ce),name:"Approval console",isPageComponent:!0,availableInBundles:[a.RX_APPLICATION.approvalBundleId]})}}Se.\u0275fac=function(e){return new(e||Se)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](r.RxViewComponentRegistryService))},Se.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Se,declarations:[Ce,me,de,fe,ge,be,xe,ce,he,ve,pe],imports:[o.CommonModule,l.RecordGridModule,h.AdaptButtonModule,h.AdaptDropdownModule,v.FormsModule,c.TranslateModule,h.AdaptTabsModule,f.ReadOnlyFieldModule,f.RxBusyIndicatorModule,a.RxDefinitionModule,g.RxSelectWithPaginationModule,h.AdaptEmptyStateModule,h.AdaptRxTextareaModule,h.AdaptRxUploaderModule,h.AdaptBusyModule,h.AdaptDownloadModule,h.AdaptRxLabelModule,h.AdaptRxSwitchModule,h.AdaptAlertModule,h.AdaptRxTextfieldModule]}),Se.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ue],imports:[[o.CommonModule,l.RecordGridModule,h.AdaptButtonModule,h.AdaptDropdownModule,v.FormsModule,c.TranslateModule,h.AdaptTabsModule,f.ReadOnlyFieldModule,f.RxBusyIndicatorModule,a.RxDefinitionModule,g.RxSelectWithPaginationModule,h.AdaptEmptyStateModule,h.AdaptRxTextareaModule,h.AdaptRxUploaderModule,h.AdaptBusyModule,h.AdaptDownloadModule,h.AdaptRxLabelModule,h.AdaptRxSwitchModule,h.AdaptAlertModule,h.AdaptRxTextfieldModule]]});class De{}De.\u0275fac=function(e){return new(e||De)},De.\u0275mod=n["\u0275\u0275defineNgModule"]({type:De,imports:[Se]}),De.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[],imports:[[Se]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-association-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxAssociationDesignerComponent:()=>ge,RxAssociationDesignerModule:()=>De,RxAssociationDesignerPageComponent:()=>ve,RxAssociationDesignerPageModule:()=>Ie});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@angular/router/fesm2015/router.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),l=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),d=i("./node_modules/@angular/forms/fesm2015/forms.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),m=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),f=i("lodash"),h=i("rxjs"),g=i("./node_modules/rxjs/_esm2015/operators/index.js"),v=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),y=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js");function b(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"adapt-rx-control-label",25),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275element"](3,"adapt-rx-checkbox",26),n["\u0275\u0275element"](4,"adapt-rx-checkbox",27),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](2,6,"com.bmc.arsys.rx.client.association-designer.add-constraints-field.label"))("tooltip",t.cascadeDeleteTooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",e.cascadeDeleteLabel)("readonly",e.isExistingDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.recordAssociationLabel)("readonly",e.isModalityDisabled||e.isReadOnly)}}function x(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-revert-customization",28),n["\u0275\u0275listener"]("events",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onRevertCustomization(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("options",e.revertCustomizationControlOptions)}}function C(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-scope-customization-control",29),2&e){const e=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("options",e.scopeCustomizationControlOptions)}}function S(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-code-viewer",30),n["\u0275\u0275pipe"](1,"json")),2&e){const e=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("code",n["\u0275\u0275pipeBind1"](1,4,e.definitionForJsonViewer))("lang","javascript")("hasToolbar",!1)("theme","light")}}function D(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"rx-designer-header",1),n["\u0275\u0275listener"]("toggleDesignMode",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleDesignMode()})("save",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveDefinition()})("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().closeDesigner.emit()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-sidebar",3),n["\u0275\u0275elementStart"](4,"adapt-sidebar-item",4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementStart"](7,"rx-validation-issues",5),n["\u0275\u0275listener"]("correctIssue",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCorrectIssue(t)}),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",6),n["\u0275\u0275elementStart"](10,"h1",7),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"form",8),n["\u0275\u0275element"](15,"adapt-rx-textfield",9),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275element"](17,"adapt-rx-textarea",10),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementStart"](19,"div",11),n["\u0275\u0275element"](20,"rx-definition-picker",12),n["\u0275\u0275element"](21,"div",13),n["\u0275\u0275element"](22,"adapt-rx-select",14),n["\u0275\u0275pipe"](23,"translate"),n["\u0275\u0275element"](24,"div",15),n["\u0275\u0275element"](25,"rx-definition-picker",16),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](26,"div",11),n["\u0275\u0275element"](27,"adapt-rx-textfield",17),n["\u0275\u0275pipe"](28,"translate"),n["\u0275\u0275element"](29,"div",18),n["\u0275\u0275element"](30,"div",19),n["\u0275\u0275element"](31,"div",18),n["\u0275\u0275element"](32,"adapt-rx-textfield",20),n["\u0275\u0275pipe"](33,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](34,b,5,8,"div",0),n["\u0275\u0275element"](35,"hr"),n["\u0275\u0275template"](36,x,1,1,"rx-revert-customization",21),n["\u0275\u0275template"](37,C,1,1,"rx-scope-customization-control",22),n["\u0275\u0275element"](38,"adapt-rx-checkbox",23),n["\u0275\u0275pipe"](39,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](40,S,2,6,"adapt-code-viewer",24),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("breadcrumbItems",e.breadcrumbItems)("isDesignMode",!e.definitionForJsonViewer)("isSaveButtonDisabled",e.isSaveButtonDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",e.definitionForJsonViewer),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("openedId",0),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](5,42,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](6,44,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("definitionTypeDisplayName",n["\u0275\u0275pipeBind1"](8,46,"com.bmc.arsys.rx.client.common.association-definition.label"))("issueSections",e.validationIssues),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",e.isExistingDefinition?n["\u0275\u0275pipeBind1"](12,48,"com.bmc.arsys.rx.client.association-designer.edit-association.title"):n["\u0275\u0275pipeBind1"](13,50,"com.bmc.arsys.rx.client.association-designer.create-association.title")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("formGroup",i.associationForm),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](16,52,"com.bmc.arsys.rx.client.association-designer.name-field.label")),n["\u0275\u0275property"]("disabledStyleForReadonlyState",!0)("readonly",e.isExistingDefinition)("required",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](18,54,"com.bmc.arsys.rx.client.common.description.label"))("disabled",e.isReadOnly),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("options",i.firstRecordDefinitionPickerOptions)("formControl",i.associationForm.get("nodeAId"))("isDisabled",e.isExistingDefinition),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](23,56,"com.bmc.arsys.rx.client.association-designer.cardinality-field.label"))("options",i.cardinalities)("formControl",i.associationForm.get("cardinality"))("optionFormatter",i.cardinalityOptionsFormatter)("disabled",e.isExistingDefinition),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("options",i.secondRecordDefinitionPickerOptions)("formControl",i.associationForm.get("nodeBId"))("isDisabled",e.isExistingDefinition),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](28,58,"com.bmc.arsys.rx.client.association-designer.first-record-role-field.label"))("disabled",e.isReadOnly)("tooltip",i.firstRecordDefinitionRoleTooltip),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](33,60,"com.bmc.arsys.rx.client.association-designer.second-record-role-field.label"))("disabled",e.isReadOnly)("tooltip",i.secondRecordDefinitionRoleTooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.canCascadeDelete),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.revertCustomizationControlOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.scopeCustomizationControlOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.isReadOnly)("label",n["\u0275\u0275pipeBind1"](39,62,"com.bmc.arsys.rx.client.association-designer.enable-association.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.definitionForJsonViewer)}}function I(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-association-designer",1),n["\u0275\u0275listener"]("definitionSaved",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionSaved(t)})("definitionErrorLoading",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCloseDesigner()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("configuration",e.configuration)}}class R{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxRecordDefinitionService=t,this.rxRecordDefinitionCacheService=i}getDefinitionModelFromDefinition(e){return{cardinality:[(0,f.find)(Object.values(c.RX_ASSOCIATION_DEFINITION.cardinality),{value:e.cardinality})],customizationOptions:{scope:e.scope,allowOverlay:e.allowOverlay},description:e.description,guid:e.guid,isEnabled:e.isEnabled,lastChangedBy:e.lastChangedBy,lastUpdateTime:e.lastUpdateTime,name:e.name,nodeAId:e.nodeAId,nodeAKeys:e.nodeAKeys,nodeAModality:e.nodeAModality,nodeAName:e.nodeAName,nodeBId:e.nodeBId,nodeBKeys:e.nodeBKeys,nodeBName:e.nodeBName,overlayDescriptor:e.overlayDescriptor,overlayGroupId:e.overlayGroupId,shouldCascadeDelete:e.shouldCascadeDelete,tags:e.tags}}getDefinitionFromDefinitionModel(e){return{allowOverlay:e.customizationOptions.allowOverlay,cardinality:e.cardinality[0].value,description:e.description,guid:e.guid,isEnabled:e.isEnabled,name:e.name,lastUpdateTime:e.lastUpdateTime,nodeAId:e.nodeAId,nodeAKeys:e.nodeAKeys,nodeAModality:e.cardinality[0].value===c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value?c.RxModalityType.Optional:e.nodeAModality,nodeAName:e.nodeAName,nodeBId:e.nodeBId,nodeBKeys:e.cardinality[0].value===c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value?[p.RX_RECORD_DEFINITION.coreFieldIds.id]:e.nodeBKeys,nodeBName:e.nodeBName,scope:e.customizationOptions.scope,shouldCascadeDelete:e.cardinality[0].value!==c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value&&e.shouldCascadeDelete,overlayDescriptor:e.overlayDescriptor,overlayGroupId:e.overlayGroupId,tags:e.tags}}getRecordDefinition(e,t=!1){return t?this.rxRecordDefinitionService.get(e,{},!0):this.rxRecordDefinitionCacheService.getRecordDefinition(e)}getForeignKeyFieldName(e){return(e.nodeAName||this.rxDefinitionNameService.getDisplayName(e.nodeAId)).toUpperCase()+"_ID"}getForeignKeyFieldId(e,t=!1){return this.getRecordDefinition(e.nodeBId,t).pipe((0,g.map)(t=>{var i;const n=this.getForeignKeyFieldName(e);return null===(i=t.fieldDefinitions.find(e=>e.name===n))||void 0===i?void 0:i.id}))}}R.\u0275fac=function(e){return new(e||R)(n["\u0275\u0275inject"](a.RxDefinitionNameService),n["\u0275\u0275inject"](p.RxRecordDefinitionService),n["\u0275\u0275inject"](p.RxRecordDefinitionCacheService))},R.\u0275prov=n["\u0275\u0275defineInjectable"]({token:R,factory:R.\u0275fac,providedIn:"root"});const w=(0,m.createAction)("[Association Designer] Init",(0,m.props)()),E=(0,m.createAction)("[Association Designer] Load Definition"),F=(0,m.createAction)("[Association Designer] Load Definition Success",(0,m.props)()),M=(0,m.createAction)("[Association Designer] Init Definition Model",(0,m.props)()),T=(0,m.createAction)("[Association Designer] Update Definition Model From Designer",(0,m.props)()),O=(0,m.createAction)("[Association Designer] Mark Designer Pristine"),N=(0,m.createAction)("[Association Designer] Mark Designer Dirty"),A=(0,m.createAction)("[Association Designer] Toggle Design Mode"),P=(0,m.createAction)("[Association Designer] Revert Customization"),j=(0,m.createAction)("[Association Designer] Save Definition"),_=(0,m.createAction)("[Association Designer] Get Record Definition",(0,m.props)()),V=(0,m.createAction)("[Association Designer] Get Record Definition Error"),k=(0,m.createAction)("[Association Designer] Get Foreign Key Field ID Error"),B=(0,m.createAction)("[Association Designer] Check For Missing Foreign Key Field",(0,m.props)()),$=(0,m.createAction)("[Association Designer] Foreign Key Field Missing Check Success",(0,m.props)()),L=(0,m.createAction)("[Association Designer] Create Foreign Key Field",(0,m.props)()),G=(0,m.createAction)("[Association Designer] Create Foreign Key Field Success"),z=(0,m.createAction)("[Association Designer] Create Foreign Key Field Error"),U=(0,m.createAction)("[Association Designer] Get Created Foreign Key Field ID"),q=(0,m.createAction)("[Association Designer] Get Created Foreign Key Field ID Success",(0,m.props)()),X=(0,m.createAction)("[Association Designer] Get Created Foreign Key Field ID Error"),W=(0,m.createAction)("[Association Designer] Create Or Update Definition"),H=(0,m.createAction)("[Association Designer] Get Created Foreign Key Field"),Q=(0,m.createAction)("[Association Designer] Get Created Foreign Key Field Error"),K=(0,m.createAction)("[Association Designer] Remove Created Foreign Key Field",(0,m.props)()),J=(0,m.createAction)("[Association Designer] Remove Created Foreign Key Field Success"),Y=(0,m.createAction)("[Association Designer] Remove Created Foreign Key Field Error"),Z=(0,m.createAction)("[Association Designer] Save Definition Success",(0,m.props)()),ee=(0,m.createAction)("[Association Designer] Create Definition Error"),te=(0,m.createAction)("[Association Designer] Update Definition Error"),ie=(0,m.createAction)("[Association Designer] Destroy"),ne="associationDesigner",oe=(0,m.createFeatureSelector)(ne),re=(0,m.createSelector)(oe,e=>e.model),ae=(0,m.createSelector)(re,e=>e.isDesignMode),se=(0,m.createSelector)(re,e=>e.bundleId),le=(0,m.createSelector)(re,e=>e.definitionName),de=(0,m.createSelector)(re,e=>e.definitionModel),ce=(0,m.createSelector)(re,e=>e.definitionModelFromDefinition),pe=(0,m.createSelector)(re,e=>e.isDirty),ue=(0,m.createSelector)(re,e=>e.isForeignKeyCreated),me=(0,m.createSelector)(re,e=>e.isForeignKeyMissing),fe=(0,m.createSelector)(re,e=>e.savedDefinitionName),he=(0,m.createSelector)(re,e=>e.originalDefinition);class ge{constructor(e,t,i,o,r,l,m,v,y){this.store$=e,this.associationDesignerService=t,this.rxGlobalCacheService=i,this.rxAssociationCardinalityPipe=o,this.rxDefinitionNameService=r,this.translateService=l,this.rxOverlayService=m,this.rxNotificationService=v,this.renderer=y,this.definitionSaved=new n.EventEmitter,this.definitionErrorLoading=new n.EventEmitter,this.closeDesigner=new n.EventEmitter,this.destroyed$=new h.ReplaySubject(1),this.firstRecordDefinitionPickerOptions={availableDefinitionPickerStates:{definitionButtonsGroups:[u.RxDefinitionPickerScope.Bundle,u.RxDefinitionPickerScope.All],search:u.RxDefinitionPickerScope.All},definitionType:u.RxDefinitionPickerType.RegularDataRecord,label:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.first-record-field.label"),required:!0,tooltip:new a.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.association-designer.first-record-field.tooltip"))},this.secondRecordDefinitionPickerOptions={availableDefinitionPickerStates:{definitionButtonsGroups:[u.RxDefinitionPickerScope.Bundle,u.RxDefinitionPickerScope.Rx],search:u.RxDefinitionPickerScope.Rx},definitionType:u.RxDefinitionPickerType.RegularDataRecord,label:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.second-record-field.label"),required:!0,tooltip:new a.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.association-designer.second-record-field.tooltip"))},this.firstRecordDefinitionRoleTooltip=new a.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.association-designer.first-record-role-field.tooltip")),this.secondRecordDefinitionRoleTooltip=new a.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.association-designer.second-record-role-field.tooltip")),this.cascadeDeleteTooltip=new a.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.association-designer.should-cascade-delete.tooltip")),this.cardinalities=Object.values(c.RX_ASSOCIATION_DEFINITION.cardinality),this.validDefinitionNameRegex=p.RX_RECORD_DEFINITION.validDefinitionNameRegex,this.associationForm=new d.FormGroup({name:new d.FormControl(""),description:new d.FormControl,nodeAId:new d.FormControl,nodeBId:new d.FormControl,nodeAName:new d.FormControl,nodeBName:new d.FormControl,nodeAModality:new d.FormControl,cardinality:new d.FormControl([c.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne]),shouldCascadeDelete:new d.FormControl,isEnabled:new d.FormControl(!0),customizationOptions:new d.FormControl}),this.isSavingInProgressSubject=new h.BehaviorSubject(!1),this.isDesignMode$=this.store$.select(ae),this.isDirty$=this.store$.select(pe),this.originalDefinition$=this.store$.select(he),this.bundleFriendlyName$=this.store$.select(se).pipe((0,g.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.definitionModelFromDefinition$=this.store$.select(ce),this.definitionModel$=this.store$.select(de).pipe((0,g.tap)(e=>{this.associationForm.patchValue({name:this.rxDefinitionNameService.getDisplayName(e.name),description:e.description,nodeAId:e.nodeAId,nodeBId:e.nodeBId,nodeAName:e.nodeAName,nodeBName:e.nodeBName,nodeAModality:e.nodeAModality===c.RX_ASSOCIATION_DEFINITION.modality.required,cardinality:[this.getCardinalityByValue(e.cardinality[0].value)],shouldCascadeDelete:e.shouldCascadeDelete,isEnabled:e.isEnabled,customizationOptions:{allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope}},{emitEvent:!1})}),(0,g.shareReplay)(1)),this.isExistingDefinition$=this.definitionModelFromDefinition$.pipe((0,g.map)(e=>Boolean(e.lastUpdateTime)),(0,g.shareReplay)(1)),this.isCustomizationEnabled$=this.definitionModelFromDefinition$.pipe((0,g.map)(e=>this.rxOverlayService.isCustomizationEnabled(null,e))),this.scopeCustomizationControlOptions$=this.definitionModelFromDefinition$.pipe((0,g.map)(e=>({allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor,isDisabled:!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e),definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.common.association-definition.label").toLowerCase()}))),this.revertCustomizationControlOptions$=this.definitionModelFromDefinition$.pipe((0,g.map)(e=>({allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor}))),this.validationIssues$=(0,h.combineLatest)([this.definitionModel$,this.isExistingDefinition$]).pipe((0,g.map)(([e,t])=>this.validate(e,t)),(0,g.shareReplay)(1)),this.definitionFromDefinitionModel$=this.definitionModel$.pipe((0,g.map)(e=>this.associationDesignerService.getDefinitionFromDefinitionModel(e))),this.definitionForJsonViewer$=this.isDesignMode$.pipe((0,g.switchMap)(e=>e?(0,h.of)(null):(0,h.combineLatest)([this.definitionFromDefinitionModel$,this.originalDefinition$]).pipe((0,g.map)(([e,t])=>Object.assign(Object.assign({},t),e))))),this.areNewDefinitionsAllowed$=this.store$.select(se).pipe((0,g.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e))),this.isReadOnly$=this.definitionFromDefinitionModel$.pipe((0,g.filter)(e=>!!e.lastUpdateTime),(0,g.withLatestFrom)(this.areNewDefinitionsAllowed$),(0,g.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,g.tap)(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),(0,g.startWith)(!1),(0,g.shareReplay)(1)),this.hasValidationErrors$=this.validationIssues$.pipe((0,g.map)(e=>(0,f.some)(e,{issues:[{type:s.ValidationIssueType.Error}]}))),this.cascadeDeleteLabel$=this.definitionModel$.pipe((0,g.map)(e=>this.translateService.instant("com.bmc.arsys.rx.client.association-designer.should-cascade-delete.label",{firstRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.nodeAId),firstRecordDefinitionRole:e.nodeAName?this.translateService.instant("com.bmc.arsys.rx.client.association-designer.node-name.label",{nodeName:e.nodeAName}):"",secondRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.nodeBId),secondRecordDefinitionRole:e.nodeBName?this.translateService.instant("com.bmc.arsys.rx.client.association-designer.node-name.label",{nodeName:e.nodeBName}):""}))),this.recordAssociationLabel$=this.definitionModel$.pipe((0,g.map)(e=>this.translateService.instant("com.bmc.arsys.rx.client.association-designer.require-record-association.label",{firstRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.nodeAId),firstRecordDefinitionRole:e.nodeAName?this.translateService.instant("com.bmc.arsys.rx.client.association-designer.node-name.label",{nodeName:e.nodeAName}):"",secondRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.nodeBId),secondRecordDefinitionRole:e.nodeBName?this.translateService.instant("com.bmc.arsys.rx.client.association-designer.node-name.label",{nodeName:e.nodeBName}):""}))),this.isModalityDisabled$=this.definitionModel$.pipe((0,g.withLatestFrom)(this.isCustomizationEnabled$),(0,g.map)(([{shouldCascadeDelete:e,nodeAId:t,nodeBId:i},n])=>!n||!(e&&t&&i))),this.isSaveButtonDisabled$=(0,h.combineLatest)([this.isDirty$,this.hasValidationErrors$,this.isReadOnly$,this.isSavingInProgressSubject]).pipe((0,g.map)(([e,t,i,n])=>!e||t||i||n)),this.breadcrumbItems$=this.definitionModel$.pipe((0,g.filter)(Boolean),(0,g.map)(e=>[{label:this.rxDefinitionNameService.getDisplayName(e.name)||`<${this.translateService.instant("com.bmc.arsys.rx.client.association-designer.new-association.label")}>`,data:{}}])),this.canCascadeDelete$=this.definitionModel$.pipe((0,g.takeUntil)(this.destroyed$),(0,g.map)(e=>e.cardinality[0].value!==c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)),this.vm$=(0,h.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.canCascadeDelete$,this.cascadeDeleteLabel$,this.hasValidationErrors$,this.isExistingDefinition$,this.isModalityDisabled$,this.isSaveButtonDisabled$,this.recordAssociationLabel$,this.revertCustomizationControlOptions$,this.scopeCustomizationControlOptions$,this.validationIssues$,this.definitionForJsonViewer$,this.isReadOnly$]).pipe((0,g.map)(([e,t,i,n,o,r,a,s,l,d,c,p,u,m])=>({breadcrumbItems:e,bundleFriendlyName:t,canCascadeDelete:i,cascadeDeleteLabel:n,hasValidationErrors:o,isExistingDefinition:r,isModalityDisabled:a,isSaveButtonDisabled:s,recordAssociationLabel:l,revertCustomizationControlOptions:d,scopeCustomizationControlOptions:c,validationIssues:p,definitionForJsonViewer:u,isReadOnly:m}))),this.cardinalityOptionsFormatter=e=>this.rxAssociationCardinalityPipe.transform(e.value)}ngOnInit(){this.associationForm.valueChanges.pipe((0,g.distinctUntilChanged)(f.isEqual),(0,g.withLatestFrom)(this.store$.select(se)),(0,g.tap)(([e,t])=>{this.store$.dispatch(T({definitionModelFromDesigner:{customizationOptions:e.customizationOptions,description:e.description,isEnabled:e.isEnabled,nodeAId:e.nodeAId,nodeAName:e.nodeAName,nodeBId:e.nodeBId,nodeBName:e.nodeBName,shouldCascadeDelete:e.shouldCascadeDelete,name:this.rxDefinitionNameService.getDefinitionName(t,e.name),cardinality:e.cardinality,nodeAModality:e.nodeAModality?c.RX_ASSOCIATION_DEFINITION.modality.required:c.RX_ASSOCIATION_DEFINITION.modality.optional}}))})).subscribe(),this.definitionModel$.pipe((0,g.distinctUntilChanged)((e,t)=>e.nodeBId===t.nodeBId&&e.nodeAName===t.nodeAName&&e.shouldCascadeDelete===t.shouldCascadeDelete&&e.nodeAModality===t.nodeAModality),(0,g.filter)(e=>!e.lastUpdateTime&&!!e.nodeBId&&e.cardinality[0].value!==c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value),(0,g.switchMap)(e=>this.associationDesignerService.getForeignKeyFieldId(e)),(0,g.withLatestFrom)(this.definitionModel$),(0,g.tap)(([e,t])=>{e?this.store$.dispatch(T({definitionModelFromDesigner:Object.assign(Object.assign({},t),{nodeBKeys:[e]})})):this.store$.dispatch(T({definitionModelFromDesigner:Object.assign(Object.assign({},t),{nodeBKeys:[p.RX_RECORD_DEFINITION.coreFieldIds.id]})}))}),(0,g.takeUntil)(this.destroyed$)).subscribe(),this.associationForm.get("shouldCascadeDelete").valueChanges.pipe((0,g.takeUntil)(this.destroyed$),(0,g.tap)(e=>{e||this.associationForm.patchValue({nodeAModality:!1})})).subscribe(),this.store$.select(fe).pipe((0,g.skip)(1),(0,g.takeUntil)(this.destroyed$)).subscribe(e=>{this.definitionSaved.emit(e)})}ngOnChanges(e){e.configuration.currentValue&&this.store$.dispatch(w({payload:this.configuration}))}canDeactivate(){let e=!0;return this.isDirty$.pipe((0,g.take)(1)).subscribe(t=>{e=!t}),e}toggleDesignMode(){this.store$.dispatch(A())}onCorrectIssue(e){"input"===e.data.type?this.renderer.selectRootElement(`[rx-id="${e.data.id}"] input`,!0).focus():this.renderer.selectRootElement(`[rx-id="${e.data.id}"] [rx-id="toggle-button"]`,!0).click()}validate(e,t){const i=[];return t||((0,f.isEmpty)((0,f.trim)(this.rxDefinitionNameService.getDisplayName(e.name)))&&i.push({type:s.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.name-field.label")}),data:{id:"name",type:"input"}}),e.name&&!p.RX_RECORD_DEFINITION.validFullDefinitionName.test(e.name)&&i.push({type:s.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.name-field.label")}),data:{id:"name",type:"input"}}),(0,f.isEmpty)(e.nodeAId)&&i.push({type:s.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.first-record-field.label")}),data:{id:"first-record",type:"definition-picker"}}),(0,f.isEmpty)(e.nodeBId)&&i.push({type:s.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.second-record-field.label")}),data:{id:"second-record",type:"definition-picker"}})),i.length?[{title:this.translateService.instant("com.bmc.arsys.rx.client.association-designer.new-association.label"),issues:i}]:[]}onRevertCustomization(e){e.type===u.RX_REVERT_CUSTOMIZATION.events.revertCustomization&&this.store$.dispatch(P())}getCardinalityByValue(e){return(0,f.find)(this.cardinalities,{value:e})}saveDefinition(){this.store$.dispatch(j())}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.isSavingInProgressSubject.complete(),this.store$.dispatch(ie())}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275directiveInject"](m.Store),n["\u0275\u0275directiveInject"](R),n["\u0275\u0275directiveInject"](a.RxGlobalCacheService),n["\u0275\u0275directiveInject"](c.RxAssociationCardinalityPipe),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](a.RxOverlayService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](n.Renderer2))},ge.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ge,selectors:[["rx-association-designer"]],inputs:{configuration:"configuration"},outputs:{definitionSaved:"definitionSaved",definitionErrorLoading:"definitionErrorLoading",closeDesigner:"closeDesigner"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"bundleName","breadcrumbItems","isDesignMode","isSaveButtonDisabled","toggleDesignMode","save","closeDesigner"],[1,"rx-designer-component",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],["rx-id","validation-issues",3,"headerTitle","tooltipText","iconClass"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],[1,"main","rx-designer-container","h-100"],[1,"mt-0"],[1,"rx-association-designer-form","d-block",3,"formGroup"],["formControlName","name","id","association-name","rx-id","name",1,"d-block","form-group",3,"label","disabledStyleForReadonlyState","readonly","required"],["rx-id","description","formControlName","description",1,"d-block","form-group",3,"label","disabled"],[1,"d-flex","justify-center","align-items-center","w-100"],["rx-id","first-record","required","true",1,"form-group","d-block","flex-grow-1","rx-association-input",3,"options","formControl","isDisabled"],[1,"rx-association-designer-arrow-1"],["rx-id","cardinality",1,"form-group","d-block","flex-grow-1","rx-association-input",3,"label","options","formControl","optionFormatter","disabled"],[1,"rx-association-designer-arrow-2"],["rx-id","second-record","required","true",1,"form-group","d-block","flex-grow-1","rx-association-input",3,"options","formControl","isDisabled"],["rx-id","first-record-role","formControlName","nodeAName",1,"d-block","form-group","w-100",3,"label","disabled","tooltip"],[1,"rx-association-designer-arrow-placeholder"],[1,"flex-grow-1","w-100"],["rx-id","second-record-role","formControlName","nodeBName",1,"d-block","form-group","w-100",3,"label","disabled","tooltip"],[3,"options","events",4,"ngIf"],["class","d-block mb-5","formControlName","customizationOptions",3,"options",4,"ngIf"],["rx-id","is-enabled","formControlName","isEnabled",3,"disabled","label"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],["rx-id","add-constraints",3,"label","tooltip"],["rx-id","cascade-delete","formControlName","shouldCascadeDelete",3,"label","readonly"],["rx-id","required-association","formControlName","nodeAModality",3,"label","readonly"],[3,"options","events"],["formControlName","customizationOptions",1,"d-block","mb-5",3,"options"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,D,41,64,"ng-container",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[o.NgIf,u.RxDesignerHeaderComponent,v.AdaptSidebarComponent,v.AdaptSidebarItemComponent,s.RxValidationIssuesComponent,d["\u0275NgNoValidate"],d.NgControlStatusGroup,d.FormGroupDirective,v.AdaptRxTextfieldComponent,d.NgControlStatus,d.FormControlName,d.RequiredValidator,v.AdaptRxTextareaComponent,u.RxDefinitionPickerComponent,d.FormControlDirective,v.AdaptRxSelectComponent,v.AdaptRxCheckboxComponent,v.AdaptRxControlLabelComponent,u.RxRevertCustomizationComponent,u.CustomizationOptionsComponent,v.AdaptCodeViewerComponent],pipes:[o.AsyncPipe,l.TranslatePipe,o.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-designer-component[_ngcontent-%COMP%]{height:calc(100% - 50px)}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;padding:1rem}.rx-association-designer-form[_ngcontent-%COMP%]{max-width:700px}.rx-association-designer-arrow-1[_ngcontent-%COMP%], .rx-association-designer-arrow-2[_ngcontent-%COMP%], .rx-association-designer-arrow-placeholder[_ngcontent-%COMP%]{margin-top:8px;width:30px;height:2px;position:relative;flex-shrink:0}.rx-association-designer-arrow-1[_ngcontent-%COMP%]:before, .rx-association-designer-arrow-2[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;background-color:#959899;top:0;left:0;width:100%;height:100%}.rx-association-designer-arrow-2[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;right:0;top:-3px;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:10px solid #959899}.rx-association-input[_ngcontent-%COMP%]{width:213px}adapt-rx-textarea[_ngcontent-%COMP%]     textarea{resize:none}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}[_nghost-%COMP%]     .adapt-sidebar-main{overflow:auto}'],changeDetection:0});class ve{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.router=t,this.rxBundleCacheService=i,this.rxComponentCanDeactivateGuard=n,this.rxDefinitionNameService=o,this.rxPageTitleService=r,this.rxUtilityModalsService=a,this.translateService=s,this.isInitialized=!1,this.definitionsRoute="association-definitions",this.pageTitle=this.translateService.instant("com.bmc.arsys.rx.client.association-designer.title")}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewDefinition=!e,this.configuration=Object.assign(Object.assign({},this.configuration),{bundleId:this.rxBundleCacheService.bundleId,definitionName:e}),this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.pageTitle])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}canDeactivate(){var e,t;return null===(t=null===(e=this.designerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}onCloseDesigner(){this.router.navigate([a.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,this.definitionsRoute])}onDefinitionSaved(e){this.isNewDefinition&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}}ve.\u0275fac=function(e){return new(e||ve)(n["\u0275\u0275directiveInject"](r.ActivatedRoute),n["\u0275\u0275directiveInject"](r.Router),n["\u0275\u0275directiveInject"](a.RxBundleCacheService),n["\u0275\u0275directiveInject"](a.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](a.RxPageTitleService),n["\u0275\u0275directiveInject"](s.RxUtilityModalsService),n["\u0275\u0275directiveInject"](l.TranslateService))},ve.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ve,selectors:[["rx-association-designer-page"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ge,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.designerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,I,1,1,"rx-association-designer",0),2&e&&n["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[o.NgIf,ge],encapsulation:2});class ye{constructor(e,t,i,n,o,r,a,s,l,d,u){this.store$=e,this.actions$=t,this.errorHandler=i,this.rxDefinitionUpdateService=n,this.associationDesignerService=o,this.rxRecordDefinitionService=r,this.rxComponentCanDeactivateGuard=a,this.rxAssociationDefinitionService=s,this.rxModalService=l,this.rxNotificationService=d,this.translateService=u,this.initAssociationDesigner$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(w),(0,g.map)(()=>E()))),this.loadDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(E),(0,g.withLatestFrom)(this.store$.select(le)),(0,g.switchMap)(([e,t])=>t?this.rxAssociationDefinitionService.get(t):this.rxAssociationDefinitionService.getNew()),(0,g.map)(e=>F({definition:e})))),this.loadDefinitionSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(F),(0,g.map)(e=>M({definition:e.definition,definitionModel:this.associationDesignerService.getDefinitionModelFromDefinition(e.definition)})))),this.saveDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(j),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.map)(([e,t])=>t.cardinality[0].value===c.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value?W():_({checkForMissingFieldAction:!0})))),this.getRecordDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(_),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>this.associationDesignerService.getRecordDefinition(t.nodeBId,!0).pipe((0,g.map)(t=>e.checkForMissingFieldAction?B({definition:t}):e.createForeignKeyFieldAction?L({definition:t}):void 0),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(V()))))))),this.checkForMissingForeignKeyField$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(B),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>{if(t.lastUpdateTime){if(t.lastUpdateTime){const i=(0,f.reject)(t.nodeBKeys,t=>(0,f.some)(e.definition.fieldDefinitions,{id:t}));return[$({payload:{updatedForeignKeyFieldId:null,isForeignKeyFieldMissing:i.length>0}})]}return[$({payload:{updatedForeignKeyFieldId:null,isForeignKeyFieldMissing:!1}})]}return this.associationDesignerService.getForeignKeyFieldId(t,!0).pipe((0,g.map)(e=>$({payload:{updatedForeignKeyFieldId:e,isForeignKeyFieldMissing:!e}})),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(k()))))}))),this.foreignKeyFieldMissingCheckSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)($),(0,g.withLatestFrom)(this.store$.select(me)),(0,g.map)(([e,t])=>t?_({createForeignKeyFieldAction:!0}):W()))),this.createForeignKeyField$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(L),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>{const i=(0,f.cloneDeep)(e.definition);return i.fieldDefinitions.push({resourceType:p.RX_RECORD_DEFINITION.dataTypes.character.resourceType,name:this.associationDesignerService.getForeignKeyFieldName(t),description:null,fieldOption:p.RecordFieldOption.Optional,maxLength:254,defaultValue:null}),this.rxRecordDefinitionService.update(i).pipe((0,g.map)(()=>G()),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(z()))))}))),this.createForeignKeyFieldSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(G),(0,g.map)(()=>U()))),this.getCreatedForeignKeyFieldId$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(U),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>this.associationDesignerService.getForeignKeyFieldId(t,!0).pipe((0,g.map)(e=>q({fieldId:e})),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(X()))))))),this.getCreatedForeignKeyFieldIdSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(q),(0,g.map)(()=>W()))),this.createOrUpdateDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(W),(0,g.withLatestFrom)(this.store$.select(de),this.store$.select(he)),(0,g.switchMap)(([e,t,i])=>{const n=this.associationDesignerService.getDefinitionFromDefinitionModel(t);return t.lastUpdateTime?this.rxDefinitionUpdateService.execute(this.rxAssociationDefinitionService.update.bind(this.rxAssociationDefinitionService,Object.assign(Object.assign({},i),n))).pipe((0,g.map)(()=>Z({savedDefinitionName:t.name})),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(te())))):this.rxAssociationDefinitionService.create(n).pipe((0,g.map)(e=>{var i;const n=decodeURIComponent((0,f.last)(null===(i=null==e?void 0:e.headers)||void 0===i?void 0:i.get("location").split("/"))||"")||t.name;return Z({savedDefinitionName:n})}),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(ee()))))}))),this.createDefinitionError$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(ee),(0,g.map)(()=>H()))),this.getCreatedForeignKeyField$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(H),(0,g.withLatestFrom)(this.store$.select(ue)),(0,g.filter)(([e,t])=>t),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>(0,h.forkJoin)([this.associationDesignerService.getForeignKeyFieldId(t,!0),this.associationDesignerService.getRecordDefinition(t.nodeBId,!0)]).pipe((0,g.map)(([e,t])=>(t.fieldDefinitions=(0,f.reject)(t.fieldDefinitions,{id:e}),K({foreignKeyFieldId:e,definition:t}))),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(Q()))))))),this.removeCreatedForeignKeyField$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(K),(0,g.withLatestFrom)(this.store$.select(ue)),(0,g.filter)(([e,t])=>t),(0,g.switchMap)(([e])=>{const t=Object.assign(Object.assign({},e.definition),{fieldDefinitions:(0,f.reject)(e.definition.fieldDefinitions,{id:e.foreignKeyFieldId})});return this.rxRecordDefinitionService.update(t).pipe((0,g.map)(()=>J()),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(Y()))))}))),this.saveDefinitionSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(Z),(0,g.withLatestFrom)(this.store$.select(le)),(0,g.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.definition-saved-successfully.message",{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.common.association-definition.label")}))}),(0,g.filter)(([e,t])=>!!t),(0,g.map)(()=>E()))),this.revertCustomization$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(P),(0,g.withLatestFrom)(this.store$.select(de)),(0,g.switchMap)(([e,t])=>this.rxAssociationDefinitionService.revertCustomization(t.name)),(0,g.tap)(()=>{this.rxComponentCanDeactivateGuard.disable(),window.location.reload()})),{dispatch:!1}),this.markPristine$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(M,j,Z),(0,g.map)(()=>O()))),this.markDirty$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(T,V,k,z,Q,ee,te,Y),(0,g.map)(()=>N())))}}ye.\u0275fac=function(e){return new(e||ye)(n["\u0275\u0275inject"](m.Store),n["\u0275\u0275inject"](y.Actions),n["\u0275\u0275inject"](n.ErrorHandler),n["\u0275\u0275inject"](a.RxDefinitionUpdateService),n["\u0275\u0275inject"](R),n["\u0275\u0275inject"](p.RxRecordDefinitionService),n["\u0275\u0275inject"](a.RxComponentCanDeactivateGuard),n["\u0275\u0275inject"](c.RxAssociationDefinitionService),n["\u0275\u0275inject"](s.RxModalService),n["\u0275\u0275inject"](a.RxNotificationService),n["\u0275\u0275inject"](l.TranslateService))},ye.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ye,factory:ye.\u0275fac});const be={cardinality:[{value:c.RxCardinalityType.OneToOne,labelKey:"com.bmc.arsys.rx.client.association.cardinality.one-to-one.label"}],description:null,guid:null,isEnabled:!0,name:null,nodeAId:null,nodeAKeys:[p.RX_RECORD_DEFINITION.coreFieldIds.id],nodeBKeys:[p.RX_RECORD_DEFINITION.coreFieldIds.id],nodeAModality:c.RxModalityType.Optional,nodeAName:null,nodeBId:null,nodeBName:null,shouldCascadeDelete:!1,customizationOptions:{allowOverlay:!0,scope:"PUBLIC"}},xe={bundleId:null,definitionName:null,isDesignMode:!0,definitionModel:be,definitionModelFromDefinition:be,isDirty:!1,isForeignKeyMissing:!1,isForeignKeyCreated:!1,savedDefinitionName:null,originalDefinition:null},Ce=(0,m.createReducer)(xe,(0,m.on)(w,(e,{payload:t})=>Object.assign(Object.assign({},xe),{bundleId:t.bundleId,definitionName:t.definitionName,isForeignKeyCreated:!1})),(0,m.on)(M,(e,{definition:t,definitionModel:i})=>Object.assign(Object.assign({},e),{definitionModel:i,definitionModelFromDefinition:i,originalDefinition:t})),(0,m.on)(T,(e,{definitionModelFromDesigner:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),t)})),(0,m.on)(A,e=>Object.assign(Object.assign({},e),{isDesignMode:!e.isDesignMode})),(0,m.on)($,(e,{payload:t})=>Object.assign(Object.assign({},e),{isForeignKeyMissing:t.isForeignKeyFieldMissing,definitionModel:Object.assign(Object.assign({},e.definitionModel),{nodeBKeys:t.updatedForeignKeyFieldId?[t.updatedForeignKeyFieldId]:e.definitionModel.nodeBKeys})})),(0,m.on)(z,e=>Object.assign(Object.assign({},e),{isForeignKeyCreated:!1})),(0,m.on)(G,e=>Object.assign(Object.assign({},e),{isForeignKeyCreated:!0})),(0,m.on)(q,(e,{fieldId:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{nodeBKeys:[t]})})),(0,m.on)(Z,(e,{savedDefinitionName:t})=>Object.assign(Object.assign({},e),{savedDefinitionName:t})),(0,m.on)(O,e=>Object.assign(Object.assign({},e),{isDirty:!1})),(0,m.on)(N,e=>Object.assign(Object.assign({},e),{isDirty:!0})),(0,m.on)(ie,e=>Object.assign({},xe)));function Se(e,t){return Ce(e,t)}class De{}De.\u0275fac=function(e){return new(e||De)},De.\u0275mod=n["\u0275\u0275defineNgModule"]({type:De,declarations:[ge],imports:[v.AdaptSidebarModule,o.CommonModule,d.FormsModule,d.ReactiveFormsModule,u.RxDesignerHeaderModule,s.RxValidationIssuesModule,u.RxDefinitionPickerModule,c.RxAssociationPipesModule,u.CustomizationOptionsModule,u.RxRevertCustomizationModule,v.AdaptTabsModule,v.AdaptRxFormsModule,v.AdaptCodeViewerModule,l.TranslateModule,m.StoreFeatureModule,y.EffectsFeatureModule],exports:[ge]}),De.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[c.RxAssociationCardinalityPipe,a.RxDefinitionNamePipe],imports:[[v.AdaptSidebarModule,o.CommonModule,d.FormsModule,d.ReactiveFormsModule,u.RxDesignerHeaderModule,s.RxValidationIssuesModule,u.RxDefinitionPickerModule,c.RxAssociationPipesModule,u.CustomizationOptionsModule,u.RxRevertCustomizationModule,v.AdaptTabsModule,v.AdaptRxFormsModule,v.AdaptCodeViewerModule,l.TranslateModule,m.StoreModule.forFeature(ne,{model:Se}),y.EffectsModule.forFeature([ye])]]});class Ie{}Ie.\u0275fac=function(e){return new(e||Ie)},Ie.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ie,declarations:[ve],imports:[o.CommonModule,De],exports:[ve]}),Ie.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,De]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-chatbot-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RX_CHATBOTS:()=>l,RxChatbotDefinitionService:()=>d});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),r=i("rxjs"),a=i("./node_modules/rxjs/_esm2015/operators/index.js"),s=i("lodash");const l={chatbotSettings:{defaultBotId:"AGGADGG8ECDC0AP0PA6EPJSIGS75QX",recordDefinitionName:"Chatbot Configuration",recordFieldIds:{name:1770,bundleId:61001}},componentSettings:{componentName:"Global Chatbot Configuration Settings",settingNames:{displayChatbotsDropdown:"DisplayChatbotsDropdown"}},sections:{chatbotConfigurations:{title:"com.bmc.arsys.rx.client.admin.chatbots.chatbot-configurations.title",isExpanded:!0},globalChatbotSettings:{title:"com.bmc.arsys.rx.client.admin.chatbots.global-chatbot-settings.title",displayChatbotsDropdown:!1,isExpanded:!1}}};class d{constructor(e,t){this.rxRecordInstanceService=e,this.rxRecordInstanceUpdateService=t}delete(e){return(0,r.forkJoin)((0,s.map)(e,e=>this.rxRecordInstanceService.delete(l.chatbotSettings.recordDefinitionName,e)))}create(e,t){return this.rxRecordInstanceService.getNew(l.chatbotSettings.recordDefinitionName).pipe((0,a.switchMap)(i=>(i.setFieldValue(l.chatbotSettings.recordFieldIds.name,e),i.setFieldValue(l.chatbotSettings.recordFieldIds.bundleId,t.id),i.setFieldValue(o.RX_RECORD_DEFINITION.coreFieldIds.description,`${t.friendlyName} Chatbot configuration`),this.rxRecordInstanceService.create(i))))}rename(e,t){return this.rxRecordInstanceService.get(l.chatbotSettings.recordDefinitionName,e).pipe((0,a.switchMap)(e=>(e.setFieldValue(l.chatbotSettings.recordFieldIds.name,t),this.rxRecordInstanceUpdateService.execute(e))))}}d.\u0275fac=function(e){return new(e||d)(n["\u0275\u0275inject"](o.RxRecordInstanceService),n["\u0275\u0275inject"](o.RxRecordInstanceUpdateService))},d.\u0275prov=n["\u0275\u0275defineInjectable"]({token:d,factory:d.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-config-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ImpactRowVisibility:()=>o,RxConfigDefinitionService:()=>d,ShowInLocationOptions:()=>n});var n,o,r=i("./node_modules/@angular/common/fesm2015/http.js"),a=i("./node_modules/@angular/core/fesm2015/core.js"),s=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),l=i("rxjs");!function(e){e.Application="Application",e.InnovationStudio="InnovationStudio",e.Both="Both",e.None="None"}(n||(n={})),function(e){e.User="User",e.None="None"}(o||(o={}));class d{constructor(e,t){this.httpClient=e,this.translateService=t,this.url="/api/rx/application/admin-settings/component"}getComponents(){return this.httpClient.get("/api/rx/application/admin-settings/components-list")}get(e){return this.httpClient.get(`${this.url}/${encodeURIComponent(e)}`)}update(e,t){return this.httpClient.put(`${this.url}/${encodeURIComponent(e)}`,t)}create(e){return this.httpClient.post(`${this.url}`,e)}getNew(e){return(0,l.of)({viewToOpen:"CommonSettings",componentName:null,externalLink:null,impactRowVisibility:o.None,localeList:[{componentLabel:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.default-component-label.label"),firstMenu:null,locale:"en",secondMenu:null}],parentComponentName:null,permissions:[],registeredModuleName:null,settingMetaData:[],showInLocation:e?n.Application:n.InnovationStudio,supportsMultiple:!1,viewComponent:!1})}}d.\u0275fac=function(e){return new(e||d)(a["\u0275\u0275inject"](r.HttpClient),a["\u0275\u0275inject"](s.TranslateService))},d.\u0275prov=a["\u0275\u0275defineInjectable"]({token:d,factory:d.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-config-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ConfigDesignerComponent:()=>Ee,ConfigDesignerModule:()=>je,ConfigDesignerPageComponent:()=>_e,ConfigDesignerPageModule:()=>Ve,RX_CONFIG_DESIGNER:()=>O});var n=i("./node_modules/@helix/platform/fesm2015/helix-platform-config-api.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@angular/core/fesm2015/core.js"),a=i("./node_modules/@angular/forms/fesm2015/forms.js"),s=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),l=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),f=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),h=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),g=i("lodash"),v=i("rxjs"),y=i("./node_modules/rxjs/_esm2015/operators/index.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),x=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),C=i("./node_modules/@ngrx/component-store/fesm2015/ngrx-component-store.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),D=i("./node_modules/@angular/router/fesm2015/router.js");const I=["createNewFieldDropdown"];function R(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",23),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).$implicit;return r["\u0275\u0275nextContext"](2).addNewField(t.dataType)}),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",e.displayName," ")}}function w(e,t){if(1&e&&(r["\u0275\u0275element"](0,"adapt-code-viewer",24),r["\u0275\u0275pipe"](1,"json")),2&e){const e=r["\u0275\u0275nextContext"]().ngIf;r["\u0275\u0275property"]("code",r["\u0275\u0275pipeBind1"](1,4,e.definitionForJsonViewer))("lang","javascript")("hasToolbar",!1)("theme","light")}}const E=function(e){return{content:e,variant:"info",type:"inline"}};function F(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"rx-designer-header",1),r["\u0275\u0275listener"]("save",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().saveDefinition()})("closeDesigner",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().closeDesigner.emit()})("breadcrumbSelected",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onBreadcrumbSelected()})("toggleDesignMode",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().toggleDesignMode()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](2,"adapt-sidebar",2),r["\u0275\u0275listener"]("isPanelOpenedCurrently",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onSidebarToggle(t)}),r["\u0275\u0275elementStart"](3,"adapt-sidebar-item",3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275elementStart"](6,"rx-form-builder",4),r["\u0275\u0275listener"]("modelChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onDefinitionModelChange(t)})("formInitialized",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onFormInitialized()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"adapt-sidebar-item",5),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementStart"](10,"rx-form-builder",6),r["\u0275\u0275listener"]("modelChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onSelectedFieldModelChange(t)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](11,"adapt-alert",7),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"adapt-sidebar-item",8),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275pipe"](15,"translate"),r["\u0275\u0275elementStart"](16,"rx-validation-issues",9),r["\u0275\u0275listener"]("correctIssue",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onCorrectIssue(t)}),r["\u0275\u0275pipe"](17,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",10),r["\u0275\u0275elementStart"](19,"h1",11),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"rxDefinitionNamePipe"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"section",12),r["\u0275\u0275elementStart"](23,"div",13),r["\u0275\u0275elementStart"](24,"div",14,15),r["\u0275\u0275elementStart"](26,"button",16),r["\u0275\u0275text"](27),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",17),r["\u0275\u0275template"](30,R,2,1,"button",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"button",19),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().editFieldGroups()}),r["\u0275\u0275text"](32),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"button",20),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().deleteSelectedField()}),r["\u0275\u0275text"](35),r["\u0275\u0275pipe"](36,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"adapt-table",21),r["\u0275\u0275listener"]("selectionChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onSelectionChange(t)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](38,w,2,6,"adapt-code-viewer",22),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("isSaveButtonDisabled",e.isSaveButtonDisabled)("breadcrumbItems",e.breadcrumbItems)("isDesignMode",!e.definitionForJsonViewer),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("openedId",0)("adjustMainContainerWidth",!0)("hidden",e.definitionForJsonViewer),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("headerTitle",r["\u0275\u0275pipeBind1"](4,42,"com.bmc.arsys.rx.client.config-designer.config-properties.title.label"))("tooltipText",r["\u0275\u0275pipeBind1"](5,44,"com.bmc.arsys.rx.client.config-designer.config-properties.title.label")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("config",e.definitionInspectorConfig)("model",e.definitionModel)("focusEditor$",i.inspectorFocusEditor$),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("headerTitle",r["\u0275\u0275pipeBind1"](8,46,"com.bmc.arsys.rx.client.common.settings.label"))("tooltipText",r["\u0275\u0275pipeBind1"](9,48,"com.bmc.arsys.rx.client.common.settings.label")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("config",e.selectedFieldInspectorConfig)("model",e.selectedFieldModel)("guid",e.selectedFieldGuid)("focusEditor$",i.inspectorFocusEditor$),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("hidden",e.selectedFieldModel)("config",r["\u0275\u0275pureFunction1"](66,E,r["\u0275\u0275pipeBind1"](12,50,"com.bmc.arsys.rx.client.designer.validation.no-field-selected.message"))),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("headerTitle",r["\u0275\u0275pipeBind1"](14,52,"com.bmc.arsys.rx.client.designer.validation-issues.label")),r["\u0275\u0275propertyInterpolate"]("tooltipText",r["\u0275\u0275pipeBind1"](15,54,"com.bmc.arsys.rx.client.designer.validation-issues.label")),r["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("issueSections",e.validationIssues)("definitionTypeDisplayName",r["\u0275\u0275pipeBind1"](17,56,"com.bmc.arsys.rx.client.config-definition.label")),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,58,i.configuration.definitionName)||e.definitionDisplayName||i.newTitle," "),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](28,60,"com.bmc.arsys.rx.client.designer.new-field.button.label")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",i.dataTypes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",!e.fieldGridRows.length),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](33,62,"com.bmc.arsys.rx.client.config-designer.edit-field-groups.label")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",!e.selectedFieldGridRows.length),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](36,64,"com.bmc.arsys.rx.client.common.delete.label")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",e.fieldGridRows)("selection",e.selectedFieldGridRows)("columns",i.columns)("scrollable",!0)("sortable",!0)("resizableColumns",!1)("bordered",!0)("dataKey","guid")("selectionMode","single"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.definitionForJsonViewer)}}function M(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"adapt-rx-list-builder",3),r["\u0275\u0275listener"]("listItemAdd",function(t){const i=r["\u0275\u0275restoreView"](e).ngIf;return r["\u0275\u0275nextContext"]().onGroupAdd(t,i.groups)})("listItemRemove",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onGroupRemove(t)})("listItemUpdate",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onGroupRename(t)})("ngModelChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onGroupChange(t)}),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"adapt-rx-select",4),r["\u0275\u0275listener"]("ngModelChange",function(t){const i=r["\u0275\u0275restoreView"](e).ngIf;return r["\u0275\u0275nextContext"]().onAvailableFieldsChange(t,i.availableFields)}),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",5),r["\u0275\u0275elementStart"](8,"button",6),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().moveToSelected()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",7),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().moveToAvailable()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"adapt-rx-list-builder",8),r["\u0275\u0275listener"]("listItemRemove",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onFieldRemove(t)})("ngModelChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onSelectedFieldsChange(t)})("dragend",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onDragEnd()}),r["\u0275\u0275pipe"](11,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"div",9),r["\u0275\u0275elementStart"](13,"button",10),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().saveFieldGroups()}),r["\u0275\u0275text"](14),r["\u0275\u0275pipe"](15,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"button",11),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().cancel()}),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](3),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](4,26,"com.bmc.arsys.rx.client.config-designer.field-groups.label")),r["\u0275\u0275property"]("ngModel",e.groups)("customSort",i.alphabeticSort)("hideListAreaLabel",!0)("texts",i.listBuilderTexts)("itemValidation",i.itemValidation),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](6,28,"com.bmc.arsys.rx.client.config-designer.available-fields.label")),r["\u0275\u0275property"]("options",e.availableFields)("ngModel",e.checkedAvailableFields)("deselectAllButton",!0)("selectAllButton",!0)("enableFilter",!0)("inline",!0)("multiple",!0)("singleSelectStyle","marker")("optionFormatter",i.optionFormatter),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",!e.checkedAvailableFields.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",!e.checkedSelectedFields.length),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](11,30,"com.bmc.arsys.rx.client.config-designer.selected-fields.label")),r["\u0275\u0275property"]("ngModel",e.selectedFields)("hideSearchField",!0)("hideListAreaLabel",!0)("hideEdit",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",!e.isDirty),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](15,32,"com.bmc.arsys.rx.client.common.save.label")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](18,34,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}function T(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"rx-config-designer",1),r["\u0275\u0275listener"]("definitionSaved",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onDefinitionSaved(t)})("definitionErrorLoading",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("closeDesigner",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().onCloseDesigner()}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("configuration",e.configuration)}}const O={featureSelector:"configDesigner",settingAccessOptions:{application:{label:"Application",value:n.ShowInLocationOptions.Application},innovationStudio:{label:"Innovation Studio",value:n.ShowInLocationOptions.InnovationStudio},both:{value:n.ShowInLocationOptions.Both},none:{value:n.ShowInLocationOptions.None}},dataTypes:{attachment:{labelKey:"com.bmc.arsys.rx.client.common.data-types.attachment.label",resourceType:"com.bmc.arsys.rx.admin-settings.AttachmentFieldDefinition"},color:{labelKey:"com.bmc.arsys.rx.client.common.data-types.color.label",resourceType:"com.bmc.arsys.rx.admin-settings.ColorChooserFieldDefinition"},secure:{labelKey:"com.bmc.arsys.rx.client.common.data-types.secure.label",resourceType:"com.bmc.arsys.rx.admin-settings.SecureDataFieldDefinition"}}};class N{getDefinitionFromDefinitionModel(e){return{componentName:e.componentName,showInLocation:e.isSettingAccessibleInApplication&&e.isSettingAccessibleInInnovationStudio?O.settingAccessOptions.both.value:e.isSettingAccessibleInApplication?O.settingAccessOptions.application.value:e.isSettingAccessibleInInnovationStudio?O.settingAccessOptions.innovationStudio.value:O.settingAccessOptions.none.value,supportsMultiple:e.supportsMultiple,parentComponentName:e.parentComponentName,impactRowVisibility:(0,g.isNil)(e.parentComponentName)&&e.supportsMultiple?e.impactRowVisibility:n.ImpactRowVisibility.None,permissions:e.permissions,registeredModuleName:e.registeredModuleName,viewComponent:e.viewComponent,externalLink:e.externalLink,viewToOpen:e.viewToOpen,localeList:[{componentLabel:e.componentLabel,firstMenu:(0,g.isNil)(e.parentComponentName)&&(e.isSettingAccessibleInApplication||e.isSettingAccessibleInInnovationStudio)?e.firstMenu:null,secondMenu:(0,g.isNil)(e.parentComponentName)&&(e.isSettingAccessibleInApplication||e.isSettingAccessibleInInnovationStudio)?e.secondMenu:null,locale:"en-US"}],settingMetaData:e.fields.map(e=>{var t,i;return{dataType:e.dataType,defaultValue:e.dataType===d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?e.selectionFieldOptionProperties.defaultValue:e.defaultValue,minValue:e.minValue,maxValue:e.maxValue,fieldOrder:e.fieldOrder,id:e.id,keySetting:e.keySetting,required:e.required,optionNamesById:null===(t=e.selectionFieldOptionProperties)||void 0===t?void 0:t.optionNamesById,optionLabelsById:null===(i=e.selectionFieldOptionProperties)||void 0===i?void 0:i.optionLabelsById,localeList:[Object.assign(Object.assign({},e.localeList[0]),{settingLabel:e.settingLabel})]}})}}}N.\u0275fac=function(e){return new(e||N)},N.\u0275prov=r["\u0275\u0275defineInjectable"]({token:N,factory:N.\u0275fac,providedIn:"root"});class A{constructor(e){this.injector=e,this.translateService=this.injector.get(f.TranslateService),this.defaultFieldGroupName=this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label")}getNewFieldDefinitionModel(e){return Object.assign({dataType:this.dataType,required:!1,defaultValue:null,localeList:[{locale:"en",fieldGrouping:this.defaultFieldGroupName,settingLabel:e.id}]},e)}getFieldInspectorConfig(e){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"id",component:p.TextFormControlComponent,isDisabled:!e.isNew,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label"),required:!0}},{name:"settingLabel",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.field-label.label"),required:!0}},{name:"dataType",component:p.SelectFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.data-type.label"),options:[{id:O.dataTypes.attachment.resourceType,name:this.translateService.instant(O.dataTypes.attachment.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.boolean.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.character.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.character.labelKey)},{id:O.dataTypes.color.resourceType,name:this.translateService.instant(O.dataTypes.color.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.dateOnly.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.decimal.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.integer.labelKey)},{id:O.dataTypes.secure.resourceType,name:this.translateService.instant(O.dataTypes.secure.labelKey)},{id:d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType,name:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.selection.labelKey)}]}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.details.label"),controls:[{name:"required",component:p.SwitchFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.required-field.label")}},{name:"keySetting",component:p.SwitchFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.key-field.label")}}]}]}validate(e){const t=[];return(0,g.trim)(e.id)||t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")}),data:{propertyName:"id",guid:e.guid}}),(0,g.trim)(e.settingLabel)||t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.field-label.label")}),data:{propertyName:"settingLabel",guid:e.guid}}),t}}class P extends A{constructor(e){super(e),this.dataType=O.dataTypes.attachment.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.pop(),t[1].controls.push({name:"maxValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.max-file-size.label"),allowIntegerOnly:!0,minValue:0,maxValue:b.RX_NUMBER.maxInteger}}),t}}P.\u0275fac=function(e){return new(e||P)(r["\u0275\u0275inject"](r.Injector))},P.\u0275prov=r["\u0275\u0275defineInjectable"]({token:P,factory:P.\u0275fac,providedIn:"root"});class j extends A{constructor(e){super(e),this.dataType=d.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"defaultValue",component:p.SelectFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),emptyOption:!0,options:[{id:"true",name:this.translateService.instant("com.bmc.arsys.rx.client.common.true")},{id:"false",name:this.translateService.instant("com.bmc.arsys.rx.client.common.false")}]}}),t}}j.\u0275fac=function(e){return new(e||j)(r["\u0275\u0275inject"](r.Injector))},j.\u0275prov=r["\u0275\u0275defineInjectable"]({token:j,factory:j.\u0275fac,providedIn:"root"});class _ extends A{constructor(e,t){super(e),this.rxNumberUtilsService=t,this.dataType=d.RX_RECORD_DEFINITION.dataTypes.character.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"minValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),allowIntegerOnly:!0,minValue:0,maxValue:b.RX_NUMBER.maxInteger}},{name:"maxValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label"),allowIntegerOnly:!0,minValue:0,maxValue:b.RX_NUMBER.maxInteger}},{name:"defaultValue",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),t}validate(e){const t=super.validate(e);return this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&Number(e.minValue)<0&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-min-length-error.message"),data:{propertyName:"minValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.maxValue)<0&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-min-length-error.message"),data:{propertyName:"maxValue",guid:e.guid}}),e.minValue&&Number(e.minValue)>b.RX_NUMBER.maxInteger&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),maxValue:b.RX_NUMBER.maxInteger}),data:{propertyName:"minValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)>b.RX_NUMBER.maxInteger&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label"),maxValue:b.RX_NUMBER.maxInteger}),data:{propertyName:"maxValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.minValue)>Number(e.maxValue)&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label")}),data:{propertyName:"minValue",guid:e.guid}}),t}}_.\u0275fac=function(e){return new(e||_)(r["\u0275\u0275inject"](r.Injector),r["\u0275\u0275inject"](b.RxNumberUtilsService))},_.\u0275prov=r["\u0275\u0275defineInjectable"]({token:_,factory:_.\u0275fac,providedIn:"root"});class V extends A{constructor(e){super(e),this.dataType=O.dataTypes.color.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"defaultValue",component:p.ColorPickerFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),t}}V.\u0275fac=function(e){return new(e||V)(r["\u0275\u0275inject"](r.Injector))},V.\u0275prov=r["\u0275\u0275defineInjectable"]({token:V,factory:V.\u0275fac,providedIn:"root"});class k extends A{constructor(e){super(e),this.dataType=d.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"defaultValue",component:p.DateFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),t}}k.\u0275fac=function(e){return new(e||k)(r["\u0275\u0275inject"](r.Injector))},k.\u0275prov=r["\u0275\u0275defineInjectable"]({token:k,factory:k.\u0275fac,providedIn:"root"});class B extends A{constructor(e,t){super(e),this.rxNumberUtilsService=t}validate(e){const t=super.validate(e);return e.minValue&&Number(e.minValue)<this.minValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),minValue:this.minValue}),data:{propertyName:"minValue",guid:e.guid}}),e.minValue&&Number(e.minValue)>this.maxValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),maxValue:this.maxValue}),data:{propertyName:"minValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)<this.minValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),minValue:this.minValue}),data:{propertyName:"maxValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)>this.maxValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),maxValue:this.maxValue}),data:{propertyName:"maxValue",guid:e.guid}}),e.defaultValue&&Number(e.defaultValue)<this.minValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),minValue:this.minValue}),data:{propertyName:"defaultValue",guid:e.guid}}),e.defaultValue&&Number(e.defaultValue)>this.maxValue&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),maxValue:this.maxValue}),data:{propertyName:"defaultValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.defaultValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&Number(e.defaultValue)>=this.minValue&&Number(e.defaultValue)<Number(e.minValue)&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),minValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label")}),data:{propertyName:"defaultValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.defaultValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.defaultValue)<=this.maxValue&&Number(e.defaultValue)>Number(e.maxValue)&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label")}),data:{propertyName:"defaultValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.minValue)>Number(e.maxValue)&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label")}),data:{propertyName:"minValue",guid:e.guid}}),t}}B.\u0275fac=function(e){return new(e||B)(r["\u0275\u0275inject"](r.Injector),r["\u0275\u0275inject"](b.RxNumberUtilsService))},B.\u0275prov=r["\u0275\u0275defineInjectable"]({token:B,factory:B.\u0275fac,providedIn:"root"});class $ extends B{constructor(){super(...arguments),this.dataType=d.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,this.minValue=b.RX_NUMBER.minDecimal,this.maxValue=b.RX_NUMBER.maxDecimal}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"minValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),minValue:b.RX_NUMBER.minDecimal,maxValue:b.RX_NUMBER.maxDecimal}},{name:"maxValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),minValue:b.RX_NUMBER.minDecimal,maxValue:b.RX_NUMBER.maxDecimal}},{name:"defaultValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),minValue:b.RX_NUMBER.minDecimal,maxValue:b.RX_NUMBER.maxDecimal}}),t}}$.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"]($)))(t||$)}}(),$.\u0275prov=r["\u0275\u0275defineInjectable"]({token:$,factory:$.\u0275fac,providedIn:"root"});class L extends B{constructor(){super(...arguments),this.dataType=d.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,this.minValue=b.RX_NUMBER.minInteger,this.maxValue=b.RX_NUMBER.maxInteger}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.splice(1,0,{name:"minValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),minValue:b.RX_NUMBER.minInteger,maxValue:b.RX_NUMBER.maxInteger,allowIntegerOnly:!0}},{name:"maxValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),minValue:b.RX_NUMBER.minInteger,maxValue:b.RX_NUMBER.maxInteger,allowIntegerOnly:!0}},{name:"defaultValue",component:p.CounterFormControlComponent,options:{allowIntegerOnly:!0,minValue:b.RX_NUMBER.minInteger,maxValue:b.RX_NUMBER.maxInteger,label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),t}}L.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](L)))(t||L)}}(),L.\u0275prov=r["\u0275\u0275defineInjectable"]({token:L,factory:L.\u0275fac,providedIn:"root"});class G extends A{constructor(e,t){super(e),this.rxNumberUtilsService=t,this.dataType=O.dataTypes.secure.resourceType}getFieldInspectorConfig(e){const t=super.getFieldInspectorConfig(e);return t[1].controls.pop(),t[1].controls.splice(t[1].controls.length,0,{name:"minValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),allowIntegerOnly:!0,minValue:0,maxValue:b.RX_NUMBER.maxInteger}},{name:"maxValue",component:p.CounterFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label"),allowIntegerOnly:!0,minValue:0,maxValue:b.RX_NUMBER.maxInteger}}),t}validate(e){const t=super.validate(e);return this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&Number(e.minValue)<0&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-min-length-error.message"),data:{propertyName:"minValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.maxValue)<0&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-max-length-error.message"),data:{propertyName:"maxValue",guid:e.guid}}),e.minValue&&Number(e.minValue)>b.RX_NUMBER.maxInteger&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),maxValue:b.RX_NUMBER.maxInteger}),data:{propertyName:"minValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)>b.RX_NUMBER.maxInteger&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label"),maxValue:b.RX_NUMBER.maxInteger}),data:{propertyName:"maxValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.minValue)>Number(e.maxValue)&&t.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.min-length.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.max-length.label")}),data:{propertyName:"minValue",guid:e.guid}}),t}}G.\u0275fac=function(e){return new(e||G)(r["\u0275\u0275inject"](r.Injector),r["\u0275\u0275inject"](b.RxNumberUtilsService))},G.\u0275prov=r["\u0275\u0275defineInjectable"]({token:G,factory:G.\u0275fac,providedIn:"root"});class z extends A{constructor(e){super(e),this.dataType=d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType}getFieldInspectorConfig(e){var t,i,n;const o=super.getFieldInspectorConfig(e);return o[1].controls.splice(1,0,{name:"selectionFieldOptionProperties",component:p.SelectionFieldOptionsComponent,options:{defaultValue:null===(t=e.selectionFieldOptionProperties)||void 0===t?void 0:t.defaultValue,optionNamesById:null===(i=e.selectionFieldOptionProperties)||void 0===i?void 0:i.optionNamesById,optionLabelsById:null===(n=e.selectionFieldOptionProperties)||void 0===n?void 0:n.optionLabelsById}}),o}validate(e){var t;const i=super.validate(e);return(0,g.isEmpty)(null===(t=e.selectionFieldOptionProperties)||void 0===t?void 0:t.optionNamesById)&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.options.label")}),data:{propertyName:"selectionFieldOptionProperties",guid:e.guid}}),i}}z.\u0275fac=function(e){return new(e||z)(r["\u0275\u0275inject"](r.Injector))},z.\u0275prov=r["\u0275\u0275defineInjectable"]({token:z,factory:z.\u0275fac,providedIn:"root"});class U{constructor(e,t,i,n,o,r,a,s,l){this.fieldServices=new Map,this.fieldServices.set(O.dataTypes.attachment.resourceType,e),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType,t),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.character.resourceType,i),this.fieldServices.set(O.dataTypes.color.resourceType,n),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,o),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,r),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a),this.fieldServices.set(O.dataTypes.secure.resourceType,s),this.fieldServices.set(d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType,l)}getNewFieldDefinitionModel(e,t){return this.fieldServices.get(e).getNewFieldDefinitionModel(t)}getFieldInspectorConfig(e,t){return this.fieldServices.get(e).getFieldInspectorConfig(t)}validate(e){return this.fieldServices.get(e.dataType).validate(e)}}U.\u0275fac=function(e){return new(e||U)(r["\u0275\u0275inject"](P),r["\u0275\u0275inject"](j),r["\u0275\u0275inject"](_),r["\u0275\u0275inject"](V),r["\u0275\u0275inject"](k),r["\u0275\u0275inject"]($),r["\u0275\u0275inject"](L),r["\u0275\u0275inject"](G),r["\u0275\u0275inject"](z))},U.\u0275prov=r["\u0275\u0275defineInjectable"]({token:U,factory:U.\u0275fac,providedIn:"root"});const q=(0,h.createAction)("[Config Designer] Init",(0,h.props)()),X=(0,h.createAction)("[Config Designer] Load Parent Components"),W=(0,h.createAction)("[Config Designer] Load Parent Components Success",(0,h.props)()),H=(0,h.createAction)("[Config Designer] Load Definition"),Q=(0,h.createAction)("[Config Designer] Load Definition Success",(0,h.props)()),K=(0,h.createAction)("[Config Designer] Init Definition Model",(0,h.props)()),J=(0,h.createAction)("[Config Designer] Mark Designer Pristine"),Y=(0,h.createAction)("[Config Designer] Mark Designer Dirty"),Z=(0,h.createAction)("[Config Designer] Update Definition Model From Designer",(0,h.props)()),ee=(0,h.createAction)("[Config Designer] Update Selected Field Model",(0,h.props)()),te=(0,h.createAction)("[Config Designer] Create New Field Model",(0,h.props)()),ie=(0,h.createAction)("[Config Designer] Add Field Model",(0,h.props)()),ne=(0,h.createAction)("[Config Designer] Clear Selected Field GUID"),oe=(0,h.createAction)("[Config Designer] Set Selected Field GUID",(0,h.props)()),re=(0,h.createAction)("[Config Designer] Delete Selected Field"),ae=(0,h.createAction)("[Config Designer] Delete Selected Field Success"),se=(0,h.createAction)("[Config Designer] Toggle Design Mode"),le=(0,h.createAction)("[Config Designer] Edit Field Groups"),de=(0,h.createAction)("[Config Designer] Set Inspector Tab Index",(0,h.props)()),ce=(0,h.createAction)("[Config Designer] Save Definition"),pe=(0,h.createAction)("[Config Designer] Update Definition",(0,h.props)()),ue=(0,h.createAction)("[Config Designer] Save Definition Success",(0,h.props)()),me=(0,h.createAction)("[Config Designer] Save Definition Error"),fe=(0,h.createAction)("[Config Designer] Destroy"),he=(0,h.createFeatureSelector)(O.featureSelector),ge=(0,h.createSelector)(he,e=>e.model),ve=(0,h.createSelector)(ge,e=>e.bundleId),ye=(0,h.createSelector)(ge,e=>e.definitionName),be=(0,h.createSelector)(ge,e=>e.isDesignMode),xe=(0,h.createSelector)(ge,e=>e.inspectorTabIndex),Ce=(0,h.createSelector)(ge,e=>e.parentComponents),Se=(0,h.createSelector)(ge,e=>e.selectedFieldGuid),De=(0,h.createSelector)(ge,e=>e.definitionModelFromDefinition),Ie=(0,h.createSelector)(ge,e=>e.definitionModel),Re=(0,h.createSelector)(ge,e=>e.isDirty),we=(0,h.createSelector)(ge,e=>e.savedDefinitionName);class Ee{constructor(e,t,i,n,o,a){this.store$=e,this.configDesignerService=t,this.rxGlobalCacheService=i,this.translateService=n,this.rxDefinitionNameService=o,this.fieldDefinitionManagerService=a,this.definitionSaved=new r.EventEmitter,this.definitionErrorLoading=new r.EventEmitter,this.closeDesigner=new r.EventEmitter,this.newTitle=`<${this.translateService.instant("com.bmc.arsys.rx.client.config-designer.new-configuration.title")}>`,this.dataTypes=[{displayName:this.translateService.instant(O.dataTypes.attachment.labelKey),dataType:O.dataTypes.attachment.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.boolean.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType},{displayName:this.translateService.instant(O.dataTypes.color.labelKey),dataType:O.dataTypes.color.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.character.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.character.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.dateOnly.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.integer.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.integer.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.selection.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType},{displayName:this.translateService.instant(d.RX_RECORD_DEFINITION.dataTypes.decimal.labelKey),dataType:d.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType},{displayName:this.translateService.instant(O.dataTypes.secure.labelKey),dataType:O.dataTypes.secure.resourceType}].sort((e,t)=>e.displayName.localeCompare(t.displayName)),this.trueLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.true"),this.falseLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.false"),this.yesLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.yes.label"),this.noLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.no.label"),this.destroyed$=new v.ReplaySubject(1),this.isApplication$=this.store$.select(ve).pipe((0,y.switchMap)(e=>this.rxGlobalCacheService.getBundleDescriptor(e)),(0,y.map)(e=>e.isApplication)),this.inspectorTabIndexSubject=new v.Subject,this.inspectorTabIndex$=this.store$.select(xe),this.selectedFieldGuid$=this.store$.select(Se),this.parentComponents$=this.store$.select(Ce),this.isDirty$=this.store$.select(Re),this.bundleFriendlyName$=this.store$.select(ve).pipe((0,y.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.definitionModel$=this.store$.select(Ie),this.definitionDisplayName$=this.definitionModel$.pipe((0,y.map)(e=>e.componentName),(0,y.startWith)(null)),this.validationIssues$=this.definitionModel$.pipe((0,y.map)(e=>this.validate(e)),(0,y.shareReplay)(1)),this.hasValidationErrors$=this.validationIssues$.pipe((0,y.map)(e=>(0,g.some)(e,{issues:[{type:u.ValidationIssueType.Error}]}))),this.isSaveButtonDisabled$=(0,v.combineLatest)([this.hasValidationErrors$,this.isDirty$]).pipe((0,y.map)(([e,t])=>e||!t),(0,y.startWith)(!0)),this.definitionInspectorConfig$=(0,v.combineLatest)([this.parentComponents$,this.bundleFriendlyName$,this.isApplication$,this.definitionModel$]).pipe((0,y.map)(([e,t,i,n])=>this.getDefinitionInspectorConfig(e,t,i,n))),this.inspectorFocusEditorSubject=new v.Subject,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.fieldGridRows$=this.definitionModel$.pipe((0,y.map)(e=>e.fields.map(e=>{var t,i;return{id:e.id,guid:e.guid,required:e.required?this.yesLabel:this.noLabel,defaultValue:e.dataType===d.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType?this.getBooleanDisplayValue(e.defaultValue):e.dataType===O.dataTypes.color.resourceType?(0,g.toUpper)(e.defaultValue):e.dataType===d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?null===(t=e.selectionFieldOptionProperties.optionNamesById)||void 0===t?void 0:t[e.selectionFieldOptionProperties.defaultValue]:e.defaultValue,keySetting:e.keySetting?this.yesLabel:this.noLabel,dataType:this.getDataTypeName(e.dataType),fieldGrouping:null===(i=e.localeList[0])||void 0===i?void 0:i.fieldGrouping}}))),this.selectedFieldGridRows$=this.selectedFieldGuid$.pipe((0,y.withLatestFrom)(this.fieldGridRows$),(0,y.map)(([e,t])=>e?[(0,g.find)(t,{guid:e})]:[]),(0,y.startWith)([])),this.selectedFieldModel$=(0,v.combineLatest)([this.selectedFieldGuid$,this.definitionModel$]).pipe((0,y.map)(([e,t])=>(0,g.find)(t.fields,{guid:e})),(0,y.startWith)(null),(0,y.shareReplay)(1)),this.selectedFieldInspectorConfig$=this.selectedFieldModel$.pipe((0,y.map)(e=>e?this.fieldDefinitionManagerService.getFieldInspectorConfig(e.dataType,{isNew:e.isNew,selectionFieldOptionProperties:e.selectionFieldOptionProperties}):null)),this.breadcrumbItems$=(0,v.combineLatest)([this.definitionDisplayName$,this.selectedFieldModel$]).pipe((0,y.map)(([e,t])=>[{data:null,label:this.rxDefinitionNameService.getDisplayName(this.configuration.definitionName)||e||this.newTitle},{data:null,label:null==t?void 0:t.id}].filter(e=>e.label))),this.definitionFromDefinitionModel$=this.definitionModel$.pipe((0,y.map)(e=>this.configDesignerService.getDefinitionFromDefinitionModel(e))),this.isDesignMode$=this.store$.select(be),this.definitionForJsonViewer$=this.isDesignMode$.pipe((0,y.switchMap)(e=>e?(0,v.of)(null):this.definitionFromDefinitionModel$)),this.vm$=(0,v.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.definitionDisplayName$,this.definitionForJsonViewer$,this.definitionInspectorConfig$,this.definitionModel$,this.fieldGridRows$,this.hasValidationErrors$,this.isSaveButtonDisabled$,this.selectedFieldGridRows$,this.selectedFieldGuid$,this.selectedFieldInspectorConfig$,this.selectedFieldModel$,this.validationIssues$]).pipe((0,y.map)(([e,t,i,n,o,r,a,s,l,d,c,p,u,m])=>({breadcrumbItems:e,bundleFriendlyName:t,definitionDisplayName:i,definitionForJsonViewer:n,definitionInspectorConfig:o,definitionModel:r,fieldGridRows:a,hasValidationErrors:s,isSaveButtonDisabled:l,selectedFieldGridRows:d,selectedFieldGuid:c,selectedFieldInspectorConfig:p,selectedFieldModel:u,validationIssues:m}))),this.columns=[{field:"id",header:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label"),filterable:!1},{field:"dataType",header:this.translateService.instant("com.bmc.arsys.rx.client.common.data-type.label"),filterable:!1},{field:"required",header:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.grid.column.required-field.title"),filterable:!1},{field:"defaultValue",header:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),filterable:!1},{field:"fieldGrouping",header:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.grid.column.field-group.title"),filterable:!1},{field:"keySetting",header:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.grid.column.key-field.title"),filterable:!1}]}ngOnChanges(e){e.configuration.currentValue&&this.store$.dispatch(q({payload:this.configuration}))}ngOnInit(){this.inspectorTabIndexSubject.pipe((0,y.skip)(1),(0,y.takeUntil)(this.destroyed$)).subscribe(e=>{this.store$.dispatch(de({inspectorTabIndex:e}))}),this.inspectorTabIndex$.pipe((0,y.skip)(1),(0,y.takeUntil)(this.destroyed$)).subscribe(e=>{(0,g.isNull)(e)||this.adaptSidebarComponent.openPanel(e)}),this.store$.select(we).pipe((0,y.skip)(1),(0,y.takeUntil)(this.destroyed$)).subscribe(e=>{this.definitionSaved.emit(e)})}onSelectionChange(e){this.store$.dispatch(oe({guid:null==e?void 0:e.guid}))}canDeactivate(){let e=!0;return this.isDirty$.pipe((0,y.take)(1)).subscribe(t=>{e=!t}),e}saveDefinition(){this.store$.dispatch(ce())}onCorrectIssue(e){e.data.noFieldAdded&&this.createNewFieldDropdown.open(),e.data.guid?this.store$.dispatch(oe({guid:e.data.guid})):this.store$.dispatch(de({inspectorTabIndex:0})),e.data.editFieldGroups&&this.store$.dispatch(le()),setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:e.data.propertyName,data:e.data.data}),10)}onDefinitionModelChange(e){this.store$.dispatch(Z({definitionModelFromDesigner:e}))}onSelectedFieldModelChange(e){this.store$.dispatch(ee({selectedFieldModel:e}))}validate(e){const t=this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.must-be-unique.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")}),i=[],o=[];if((0,g.chain)(e.fields).clone().reverse().forEach((e,i,n)=>{let r=[];(0,g.find)(n,t=>e.id===t.id,i+1)&&r.push({type:u.ValidationIssueType.Error,description:t,data:{propertyName:"id",guid:e.guid}}),e.localeList[0].fieldGrouping||r.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.field-has-no-group.message"),data:{editFieldGroups:!0,guid:e.guid}}),r=r.concat(this.fieldDefinitionManagerService.validate(e)),r.length&&o.push({title:e.id,issues:r})}).value(),(0,g.isEmpty)((0,g.trim)(e.componentName))&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.component-name.label")}),data:{propertyName:"componentName"}}),(0,g.isEmpty)((0,g.trim)(e.componentLabel))&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.component-label.label")}),data:{propertyName:"componentLabel"}}),(0,g.isNil)(e.parentComponentName)&&(e.isSettingAccessibleInInnovationStudio||e.isSettingAccessibleInApplication)&&!e.firstMenu&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.first-menu.label")}),data:{propertyName:"firstMenu"}}),e.fields.length||i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.setting-has-no-fields-error.message"),data:{noFieldAdded:!0}}),e.impactRowVisibility===n.ImpactRowVisibility.User){(0,g.filter)(e.fields,{keySetting:!0}).length>1&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.multiple-key-fields-not-allowed-error.message"),data:{propertyName:"keySetting"}})}if(!(0,g.isNil)(e.parentComponentName)){(0,g.uniqBy)(e.fields,"localeList[0].fieldGrouping").length>1&&i.push({type:u.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.multiple-field-groups-not-allowed-error.message"),data:{propertyName:"parentComponentName"}})}let r=[];return i.length&&r.push({title:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.title"),issues:i}),r=r.concat((0,g.reverse)(o)),r}addNewField(e,t=!1){this.store$.dispatch(te({resourceType:e,isLoginNameField:t}))}editFieldGroups(){this.store$.dispatch(le())}getDataTypeName(e){return(0,g.find)(this.dataTypes,{dataType:e}).displayName}onBreadcrumbSelected(){this.store$.dispatch(ne())}toggleDesignMode(){this.store$.dispatch(se())}onSidebarToggle(e){this.inspectorTabIndexSubject.next(e.id)}getDefinitionInspectorConfig(e,t,i,o){const r=[],a=[];return a.push({name:"componentName",component:p.TextFormControlComponent,isDisabled:Boolean(this.configuration.definitionName),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.component-name.label"),required:!0}}),(0,g.isNil)(o.parentComponentName)&&(a.push({name:"",component:p.LabelFormControlComponent,options:{labelKey:"com.bmc.arsys.rx.client.config-designer.config-properties.enable-access-from.label"}}),a.push({name:"isSettingAccessibleInInnovationStudio",component:p.BooleanFormControlComponent,options:{label:"Innovation Studio",shouldDisplayAsCheckbox:!0}}),i&&a.push({name:"isSettingAccessibleInApplication",component:p.BooleanFormControlComponent,options:{label:t,shouldDisplayAsCheckbox:!0}})),a.push({name:"componentLabel",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.component-label.label"),required:!0}}),a.push({name:"supportsMultiple",component:p.SwitchFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.repeat-setting.label")}}),a.push({name:"parentComponentName",component:p.SelectFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.parent-setting.label"),options:e.filter(e=>e!==o.componentName).map(e=>({id:e,name:e})),emptyOption:!0}}),(0,g.isNil)(o.parentComponentName)&&o.supportsMultiple&&a.push({name:"impactRowVisibility",component:p.SelectFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.visibility.label"),options:[{id:n.ImpactRowVisibility.None,name:this.translateService.instant("com.bmc.arsys.rx.client.common.none.label")},{id:n.ImpactRowVisibility.User,name:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.visibility.options.user.label")}],beforeValueChange:(e,t)=>{if(t===n.ImpactRowVisibility.User){(0,g.find)(o.fields,{id:"LoginName",dataType:d.RX_RECORD_DEFINITION.dataTypes.character.resourceType})||setTimeout(()=>{this.addNewField(d.RX_RECORD_DEFINITION.dataTypes.character.resourceType,!0)})}return Promise.resolve(!0)}}}),o.impactRowVisibility!==n.ImpactRowVisibility.User&&a.push({name:"permissions",component:p.RxPermissionEditorComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.permissions.label"),type:"config",permissionScope:c.RX_PERMISSION.permissionScope.all}}),r.push({label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:a}),(0,g.isNil)(o.parentComponentName)&&(o.isSettingAccessibleInApplication||o.isSettingAccessibleInInnovationStudio)&&r.push({label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.navigation-section.label"),controls:[{name:"firstMenu",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.first-menu.label"),required:!0}},{name:"secondMenu",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.config-properties.second-menu.label")}}]}),r}getBooleanDisplayValue(e){return"true"===e?this.trueLabel:"false"===e?this.falseLabel:null}deleteSelectedField(){this.store$.dispatch(re())}onFormInitialized(){this.inspectorFocusEditorSubject.next({editorName:"componentName",data:{}})}destroyConfigDesigner(){this.store$.dispatch(fe())}ngOnDestroy(){this.inspectorTabIndexSubject.complete(),this.inspectorFocusEditorSubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.destroyConfigDesigner()}}Ee.\u0275fac=function(e){return new(e||Ee)(r["\u0275\u0275directiveInject"](h.Store),r["\u0275\u0275directiveInject"](N),r["\u0275\u0275directiveInject"](c.RxGlobalCacheService),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](c.RxDefinitionNameService),r["\u0275\u0275directiveInject"](U))},Ee.\u0275cmp=r["\u0275\u0275defineComponent"]({type:Ee,selectors:[["rx-config-designer"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](s.AdaptSidebarComponent,5),r["\u0275\u0275viewQuery"](I,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.adaptSidebarComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.createNewFieldDropdown=e.first)}},inputs:{configuration:"configuration"},outputs:{definitionSaved:"definitionSaved",definitionErrorLoading:"definitionErrorLoading",closeDesigner:"closeDesigner"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"bundleName","isSaveButtonDisabled","breadcrumbItems","isDesignMode","save","closeDesigner","breadcrumbSelected","toggleDesignMode"],["position","right",1,"h-100",3,"openedId","adjustMainContainerWidth","hidden","isPanelOpenedCurrently"],["iconClass","d-icon-pencil",3,"headerTitle","tooltipText"],[3,"config","model","focusEditor$","modelChange","formInitialized"],["iconClass","d-icon-gear",3,"headerTitle","tooltipText"],[3,"config","model","guid","focusEditor$","modelChange"],[1,"p-3",3,"hidden","config"],[3,"iconClass","headerTitle","tooltipText"],[3,"issueSections","definitionTypeDisplayName","correctIssue"],[1,"main","h-100","d-flex","flex-column"],[1,"mt-0"],[1,"h-100","d-flex","flex-column"],[1,"d-flex","border","border-bottom-0"],["adaptDropdown","",1,"dropdown"],["createNewFieldDropdown",""],["adapt-button","","adaptDropdownToggle","","type","button","btn-type","tertiary","rx-id","new-field-button",1,"d-icon-plus_circle"],["adaptDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["adapt-button","","type","button","btn-type","tertiary","rx-id","edit-field-groups-button",1,"d-icon-list_ordered",3,"disabled","click"],["adapt-button","","type","button","btn-type","tertiary","rx-id","delete-field-button",1,"d-icon-trash",3,"disabled","click"],["scrollHeight","flex",3,"value","selection","columns","scrollable","sortable","resizableColumns","bordered","dataKey","selectionMode","selectionChange"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,F,39,68,"ng-container",0),r["\u0275\u0275pipe"](1,"async")),2&e&&r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[o.NgIf,p.RxDesignerHeaderComponent,s.AdaptSidebarComponent,s.AdaptSidebarItemComponent,p.FormBuilderComponent,s.AdaptAlertComponent,u.RxValidationIssuesComponent,s.AdaptDropdownDirective,s.AdaptButtonComponent,s.AdaptDropdownToggleDirective,s.AdaptDropdownMenuDirective,o.NgForOf,l.AdaptTableComponent,s.AdaptCodeViewerComponent],pipes:[o.AsyncPipe,f.TranslatePipe,c.RxDefinitionNamePipe,o.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper{border-top:0}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper .adapt-sidebar-panel-content{padding:0}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper .card{border-left:0;border-right:0}']});const Fe={componentLabel:null,componentName:null,externalLink:null,firstMenu:null,impactRowVisibility:n.ImpactRowVisibility.None,isSettingAccessibleInApplication:!1,isSettingAccessibleInInnovationStudio:!1,parentComponentName:null,permissions:[],registeredModuleName:null,secondMenu:null,supportsMultiple:!1,viewComponent:!1,viewToOpen:null,fields:[]},Me={bundleId:null,definitionName:null,isDesignMode:!0,inspectorTabIndex:0,selectedFieldGuid:null,definitionModel:Fe,definitionModelFromDefinition:Fe,parentComponents:[],isDirty:!1,savedDefinitionName:null},Te=(0,h.createReducer)(Me,(0,h.on)(q,(e,{payload:t})=>Object.assign(Object.assign({},Me),{bundleId:t.bundleId,definitionName:t.definitionName})),(0,h.on)(K,(e,{definitionModelFromDefinition:t})=>Object.assign(Object.assign({},e),{definitionModelFromDefinition:t,definitionModel:t})),(0,h.on)(J,e=>Object.assign(Object.assign({},e),{isDirty:!1})),(0,h.on)(Y,e=>Object.assign(Object.assign({},e),{isDirty:!0})),(0,h.on)(W,(e,{parentComponents:t})=>Object.assign(Object.assign({},e),{parentComponents:t})),(0,h.on)(de,(e,{inspectorTabIndex:t})=>Object.assign(Object.assign({},e),{inspectorTabIndex:t})),(0,h.on)(oe,(e,{guid:t})=>Object.assign(Object.assign({},e),{selectedFieldGuid:t,inspectorTabIndex:t&&!(0,g.isNull)(e.inspectorTabIndex)?1:e.inspectorTabIndex})),(0,h.on)(ne,e=>Object.assign(Object.assign({},e),{selectedFieldGuid:null,inspectorTabIndex:(0,g.isNull)(e.inspectorTabIndex)?e.inspectorTabIndex:0})),(0,h.on)(se,e=>Object.assign(Object.assign({},e),{isDesignMode:!e.isDesignMode})),(0,h.on)(Z,(e,{definitionModelFromDesigner:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),t)})),(0,h.on)(ee,(e,{selectedFieldModel:t})=>{const i=(0,g.cloneDeep)(e.definitionModel),n=(0,g.findIndex)(i.fields,{guid:e.selectedFieldGuid});return i.fields[n]=t,Object.assign(Object.assign({},e),{definitionModel:i})}),(0,h.on)(ie,(e,{newFieldModel:t})=>{const i=(0,g.cloneDeep)(e.definitionModel);return i.fields.push(t),Object.assign(Object.assign({},e),{definitionModel:i})}),(0,h.on)(ae,e=>{const t=(0,g.cloneDeep)(e.definitionModel);return(0,g.remove)(t.fields,{guid:e.selectedFieldGuid}),Object.assign(Object.assign({},e),{definitionModel:t})}),(0,h.on)(ue,(e,{savedDefinitionName:t})=>Object.assign(Object.assign({},e),{savedDefinitionName:t})),(0,h.on)(fe,e=>Object.assign({},Me)));function Oe(e,t){return Te(e,t)}class Ne extends C.ComponentStore{constructor(){super({fields:[],isDirty:!1,groups:[],selectedGroupName:null}),this.fields$=this.select(e=>e.fields),this.groups$=this.select(e=>e.groups),this.selectedGroupName$=this.select(e=>e.selectedGroupName),this.availableFields$=this.select(this.fields$,this.selectedGroupName$,(e,t)=>e.filter(e=>e.groupName!==t).map((e,t)=>({name:e.name,id:t,guid:e.guid,checked:e.checked}))),this.checkedAvailableFields$=this.select(this.availableFields$,e=>e.filter(e=>e.checked)),this.selectedFields$=this.select(this.fields$,this.selectedGroupName$,(e,t)=>(0,g.chain)(e).filter(e=>e.groupName===t).sortBy("fieldOrder").map((e,t)=>({name:e.name,id:t,guid:e.guid,selected:e.checked})).value()),this.checkedSelectedFields$=this.select(this.selectedFields$,e=>e.filter(e=>e.selected)),this.isDirty$=this.select(e=>e.isDirty),this.vm$=this.select(this.groups$,this.fields$,this.availableFields$,this.checkedAvailableFields$,this.selectedFields$,this.checkedSelectedFields$,this.isDirty$,(e,t,i,n,o,r,a)=>({groups:e,fields:t,availableFields:i,checkedAvailableFields:n,selectedFields:o,checkedSelectedFields:r,isDirty:a})),this.selectGroup=this.updater((e,t)=>{const i=e.groups.map(e=>Object.assign(Object.assign({},e),{selected:e.name===t}));return Object.assign(Object.assign({},e),{groups:i,selectedGroupName:t})}),this.markDirty=this.updater(e=>Object.assign(Object.assign({},e),{isDirty:!0})),this.checkField=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.guid===t?Object.assign(Object.assign({},e),{checked:!0}):e)})),this.uncheckField=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.guid===t?Object.assign(Object.assign({},e),{checked:!1}):e)})),this.sortSelectedFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>{const i=t.indexOf(e.guid);return i>-1?Object.assign(Object.assign({},e),{fieldOrder:i}):e})})),this.assignCheckedFields=this.updater(e=>{let t=e.fields.filter(t=>t.groupName===e.selectedGroupName).length;return Object.assign(Object.assign({},e),{fields:e.fields.map(i=>i.checked?Object.assign(Object.assign({},i),{checked:!1,groupName:e.selectedGroupName,fieldOrder:t++}):i),isDirty:!0})}),this.unassignCheckedFields=this.updater(e=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.checked?Object.assign(Object.assign({},e),{checked:!1,fieldOrder:null,groupName:null}):e),isDirty:!0})),this.removeField=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.guid===t?Object.assign(Object.assign({},e),{groupName:null,fieldOrder:null}):e),isDirty:!0})),this.removeGroup=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.groupName===t?Object.assign(Object.assign({},e),{groupName:null,fieldOrder:null}):e),groups:(0,g.reject)(e.groups,{name:t}),isDirty:!0})),this.renameGroup=this.updater((e,t)=>Object.assign(Object.assign({},e),{fields:e.fields.map(e=>e.groupName===t.oldName?Object.assign(Object.assign({},e),{groupName:t.newName}):e),isDirty:!0}))}}Ne.\u0275fac=function(e){return new(e||Ne)},Ne.\u0275prov=r["\u0275\u0275defineInjectable"]({token:Ne,factory:Ne.\u0275fac});class Ae extends u.RxModalClass{constructor(e,t,i,n,o){super(n,o),this.fieldGroupsEditorStore=e,this.translateService=t,this.rxNotificationService=i,this.activeModalRef=n,this.destroyed$=new v.ReplaySubject(1),this.listBuilderTexts={searchPlaceholder:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.field-groups-list.placeholder")},this.duplicateGroupMsg=this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.duplicate-value.message"),this.itemValidation=(e,t,i)=>(0,g.some)(t,t=>(0,g.trim)(t.name)===(0,g.trim)(e))?this.duplicateGroupMsg:null,this.vm$=this.fieldGroupsEditorStore.vm$}ngOnInit(){super.ngOnInit(),this.fieldGroupsEditorStore.isDirty$.pipe((0,y.filter)(Boolean),(0,y.take)(1)).subscribe(()=>{this.markAsDirty()});const e=this.activeModalRef.getData().fields.map(e=>({guid:e.guid,name:e.id,groupName:e.localeList[0].fieldGrouping,fieldOrder:e.fieldOrder,checked:!1})),t=(0,g.chain)(e).map((e,t)=>({name:e.groupName,id:t,guid:e.guid})).filter(e=>!!e.name).uniqBy("name").sort((e,t)=>e.name.localeCompare(t.name)).value();this.fieldGroupsEditorStore.patchState({fields:e,groups:t})}onGroupChange(e){var t;this.fieldGroupsEditorStore.selectGroup(null===(t=e.find(e=>e.selected))||void 0===t?void 0:t.name)}onGroupAdd(e,t){t.forEach(t=>{t.selected=t===e})}onGroupRemove(e){this.fieldGroupsEditorStore.removeGroup(e.name)}onGroupRename([e,t]){this.fieldGroupsEditorStore.renameGroup({oldName:e.name,newName:t.name})}onAvailableFieldsChange(e,t){t.forEach(t=>{(0,g.some)(e,{guid:t.guid})?this.fieldGroupsEditorStore.checkField(t.guid):this.fieldGroupsEditorStore.uncheckField(t.guid)})}onSelectedFieldsChange(e){e.forEach(e=>{e.selected?this.fieldGroupsEditorStore.checkField(e.guid):this.fieldGroupsEditorStore.uncheckField(e.guid)}),this.fieldGroupsEditorStore.sortSelectedFields(e.map(e=>e.guid))}onDragEnd(){this.fieldGroupsEditorStore.markDirty()}moveToSelected(){this.fieldGroupsEditorStore.assignCheckedFields()}moveToAvailable(){this.fieldGroupsEditorStore.unassignCheckedFields()}onFieldRemove(e){this.fieldGroupsEditorStore.removeField(e.guid)}alphabeticSort(e,t){return e.name.localeCompare(t.name)}optionFormatter(e){return e.name}saveFieldGroups(){this.fieldGroupsEditorStore.fields$.pipe((0,y.take)(1)).subscribe(e=>{this.activeModalRef.close({fields:e})})}cancel(){this.activeModalRef.dismiss(s.DismissReasons.CLOSE_BTN)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Ae.\u0275fac=function(e){return new(e||Ae)(r["\u0275\u0275directiveInject"](Ne),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](c.RxNotificationService),r["\u0275\u0275directiveInject"](s.ActiveModalRef),r["\u0275\u0275directiveInject"](r.Injector))},Ae.\u0275cmp=r["\u0275\u0275defineComponent"]({type:Ae,selectors:[["rx-field-groups-editor"]],features:[r["\u0275\u0275ProvidersFeature"]([Ne]),r["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"designer-modal-body","modal-body","d-flex","mh-100","flex-column"],[1,"d-flex","h-100","flex-fill"],["selectionMode","single","rx-id","field-groups-list",1,"flex-grow-1","mr-3",3,"ngModel","customSort","hideListAreaLabel","texts","itemValidation","label","listItemAdd","listItemRemove","listItemUpdate","ngModelChange"],["popupMaxHeight","100%","rx-id","available-fields-list",1,"flex-grow-1","h-100","d-flex","flex-column",3,"options","ngModel","deselectAllButton","selectAllButton","enableFilter","inline","label","multiple","singleSelectStyle","optionFormatter","ngModelChange"],[1,"mx-2","d-flex","flex-column"],["type","button","adapt-button","","btn-type","secondary","rx-id","move-to-selected-button",1,"d-icon-right-angle_right","mt-auto","mb-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","move-to-available-button",1,"d-icon-right-angle_left","mb-auto",3,"disabled","click"],["selectionMode","multiple","rx-id","selected-fields-list",1,"flex-grow-1",3,"ngModel","hideSearchField","hideListAreaLabel","hideEdit","label","listItemRemove","ngModelChange","dragend"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-field-groups-button",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,M,19,36,"ng-container",0),r["\u0275\u0275pipe"](1,"async")),2&e&&r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[o.NgIf,s.AdaptRxListBuilderComponent,a.NgControlStatus,a.NgModel,s.AdaptRxSelectComponent,s.AdaptButtonComponent],pipes:[o.AsyncPipe,f.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]     adapt-rx-select{width:30%;overflow:auto}[_nghost-%COMP%]     adapt-rx-select .rx-select__options-wrapper{flex:1 1 auto}[_nghost-%COMP%]     adapt-rx-list-builder{overflow:auto;width:30%}[_nghost-%COMP%]     adapt-rx-list-builder .adapt-list-builder{height:100%}[_nghost-%COMP%]     adapt-rx-list-builder .adapt-list-container{flex-grow:1}[_nghost-%COMP%]     adapt-rx-list-builder .adapt-list-builder, [_nghost-%COMP%]     adapt-rx-list-builder .adapt-list-builder__wrp{display:flex;flex-direction:column;height:100%}']});class Pe{constructor(e,t,i,n,o,r,a,s,l,c,p,m){this.store$=e,this.actions$=t,this.errorHandler=i,this.configDesignerService=n,this.rxModalService=o,this.rxNotificationService=r,this.translateService=a,this.fieldDefinitionManagerService=s,this.rxGuidService=l,this.rxConfigDefinitionService=c,this.rxGlobalCacheService=p,this.rxDefinitionNameService=m,this.initConfigDesigner$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(q),(0,y.map)(e=>X()))),this.loadParentComponents$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(X),(0,y.switchMap)(()=>this.rxConfigDefinitionService.getComponents()),(0,y.map)(e=>W({parentComponents:e})))),this.setParentComponents$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(W),(0,y.map)(()=>H()))),this.loadDefinition$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(H),(0,y.withLatestFrom)(this.store$.select(ve)),(0,y.switchMap)(([e,t])=>this.rxGlobalCacheService.getBundleDescriptor(t)),(0,y.withLatestFrom)(this.store$.select(ye)),(0,y.switchMap)(([e,t])=>t?this.rxConfigDefinitionService.get(this.rxDefinitionNameService.getDisplayName(t)):this.rxConfigDefinitionService.getNew(e.isApplication)),(0,y.map)(e=>Q({definition:e})))),this.loadDefinitionSuccess$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(Q),(0,y.map)(e=>{const t={externalLink:e.definition.externalLink,impactRowVisibility:e.definition.impactRowVisibility,parentComponentName:e.definition.parentComponentName,registeredModuleName:e.definition.registeredModuleName,supportsMultiple:e.definition.supportsMultiple,viewComponent:e.definition.viewComponent,viewToOpen:e.definition.viewToOpen,componentName:e.definition.componentName,permissions:e.definition.permissions,componentLabel:e.definition.localeList[0].componentLabel,firstMenu:e.definition.localeList[0].firstMenu,secondMenu:e.definition.localeList[0].secondMenu,isSettingAccessibleInInnovationStudio:e.definition.showInLocation===O.settingAccessOptions.innovationStudio.value||e.definition.showInLocation===O.settingAccessOptions.both.value,isSettingAccessibleInApplication:e.definition.showInLocation===O.settingAccessOptions.application.value||e.definition.showInLocation===O.settingAccessOptions.both.value,fields:e.definition.settingMetaData.map(e=>{var t,i,n;return{dataType:e.dataType,defaultValue:null!==(t=e.defaultValue)&&void 0!==t?t:null,fieldOrder:e.fieldOrder,id:e.id,keySetting:e.keySetting,localeList:e.localeList,guid:this.rxGuidService.generate(),maxValue:null!==(i=e.maxValue)&&void 0!==i?i:null,minValue:null!==(n=e.minValue)&&void 0!==n?n:null,selectionFieldOptionProperties:{defaultValue:e.defaultValue,optionNamesById:e.optionNamesById,optionLabelsById:e.optionLabelsById},required:e.required,settingLabel:e.localeList[0].settingLabel,isNew:!1}})};return K({definitionModelFromDefinition:t})}))),this.markPristine$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(K,ce,ue),(0,y.map)(()=>J()))),this.clearSelectedField$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(K,ae),(0,y.map)(()=>ne()))),this.markDirty$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(Z,ee,ie,ae,me),(0,y.map)(()=>Y()))),this.createNewFieldModel$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(te),(0,y.withLatestFrom)(this.store$.select(Ie)),(0,y.map)(([e,t])=>{let i,n=0;const o=this.translateService.instant("com.bmc.arsys.rx.client.designer.default-field-name.label");do{i=`${o} ${++n}`}while((0,g.some)(t.fields,{id:i}));const r=this.rxGuidService.generate(),a=this.fieldDefinitionManagerService.getNewFieldDefinitionModel(e.resourceType,{id:e.isLoginNameField?"LoginName":i,isNew:!0,guid:r,keySetting:e.isLoginNameField,settingLabel:e.isLoginNameField?this.translateService.instant("com.bmc.arsys.rx.client.config-designer.login-name-field.label"):i,minValue:null,maxValue:null,selectionFieldOptionProperties:e.resourceType===d.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?{defaultValue:null,optionNamesById:null,optionLabelsById:null}:null});return ie({newFieldModel:a})}))),this.addNewFieldModel$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(ie),(0,y.map)(e=>oe({guid:e.newFieldModel.guid})))),this.editFieldGroups$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(le),(0,y.withLatestFrom)(this.store$.select(Ie)),(0,y.switchMap)(([e,t])=>(0,v.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.edit-field-groups.label"),content:Ae,data:{fields:t.fields},size:S.OpenViewActionModalSize.Large}).catch(g.noop))),(0,y.filter)(Boolean),(0,y.withLatestFrom)(this.store$.select(Ie)),(0,y.map)(([e,t])=>{const i=t.fields.map(t=>{const i=e.fields.find(e=>e.guid===t.guid);return Object.assign(Object.assign({},t),{fieldOrder:i.fieldOrder,localeList:[Object.assign(Object.assign({},t.localeList[0]),{fieldGrouping:i.groupName})]})});return Z({definitionModelFromDesigner:Object.assign(Object.assign({},t),{fields:i})})}))),this.deleteSelectedField$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(re),(0,y.switchMap)(()=>(0,v.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:u.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.designer.delete-fields-warning.message")}))),(0,y.filter)(Boolean),(0,y.map)(()=>ae()))),this.saveDefinition$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(ce),(0,y.withLatestFrom)(this.store$.select(De),this.store$.select(Ie),this.store$.select(ye),this.store$.select(ve)),(0,y.switchMap)(([e,t,i,n,o])=>{const r=this.configDesignerService.getDefinitionFromDefinitionModel(i);return n?t.impactRowVisibility!==i.impactRowVisibility||t.parentComponentName!==i.parentComponentName||t.supportsMultiple!==i.supportsMultiple?(0,v.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:u.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.config-designer.setting-data-will-be-deleted-warning.message")})).pipe((0,y.filter)(Boolean),(0,y.map)(()=>pe({definition:r}))):[pe({definition:r})]:this.rxConfigDefinitionService.create(r).pipe((0,y.map)(e=>ue({savedDefinitionName:`${o}:${i.componentName}`})),(0,y.catchError)(e=>(this.errorHandler.handleError(e),(0,v.of)(me()))))}))),this.updateDefinition$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(pe),(0,y.switchMap)(e=>this.rxConfigDefinitionService.update(e.definition.componentName,e.definition).pipe((0,y.map)(t=>ue({savedDefinitionName:`${e.definition.componentName}`})),(0,y.catchError)(e=>(this.errorHandler.handleError(e),(0,v.of)(me()))))))),this.saveDefinitionSuccess$=(0,x.createEffect)(()=>this.actions$.pipe((0,x.ofType)(ue),(0,y.withLatestFrom)(this.store$.select(ye)),(0,y.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.definition-saved-successfully.message",{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.config-definition.label")}))}),(0,y.filter)(([e,t])=>!!t),(0,y.map)(()=>H())))}}Pe.\u0275fac=function(e){return new(e||Pe)(r["\u0275\u0275inject"](h.Store),r["\u0275\u0275inject"](x.Actions),r["\u0275\u0275inject"](r.ErrorHandler),r["\u0275\u0275inject"](N),r["\u0275\u0275inject"](u.RxModalService),r["\u0275\u0275inject"](c.RxNotificationService),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](U),r["\u0275\u0275inject"](b.RxGuidService),r["\u0275\u0275inject"](n.RxConfigDefinitionService),r["\u0275\u0275inject"](c.RxGlobalCacheService),r["\u0275\u0275inject"](c.RxDefinitionNameService))},Pe.\u0275prov=r["\u0275\u0275defineInjectable"]({token:Pe,factory:Pe.\u0275fac});class je{}je.\u0275fac=function(e){return new(e||je)},je.\u0275mod=r["\u0275\u0275defineNgModule"]({type:je,declarations:[Ee,Ae],imports:[s.AdaptAccordionModule,s.AdaptButtonModule,s.AdaptDropdownModule,s.AdaptRxTextfieldModule,m.RecordGridModule,o.CommonModule,a.FormsModule,p.FormControlsModule,p.RxDesignerHeaderModule,u.RxBladeModule,u.RxValidationIssuesModule,u.RxJsonViewerModule,p.RxFormBuilderModule,s.AdaptRxCheckboxModule,s.AdaptRxLabelModule,f.TranslateModule,m.RecordGridModule,d.RxRecordDefinitionResourceTypePipeModule,s.AdaptAlertModule,u.RxLineLoaderModule,l.AdaptTableModule,a.ReactiveFormsModule,p.RxDefinitionPickerModule,s.AdaptRxRadiobuttonModule,s.AdaptRxSelectModule,p.ExpressionFormControlModule,s.AdaptBusyModule,s.AdaptRxCounterModule,s.AdaptCodeViewerModule,s.AdaptSidebarModule,c.RxDefinitionModule,s.AdaptRxListBuilderModule,h.StoreFeatureModule,x.EffectsFeatureModule],exports:[Ee]}),je.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[s.AdaptAccordionModule,s.AdaptButtonModule,s.AdaptDropdownModule,s.AdaptRxTextfieldModule,m.RecordGridModule,o.CommonModule,a.FormsModule,p.FormControlsModule,p.RxDesignerHeaderModule,u.RxBladeModule,u.RxValidationIssuesModule,u.RxJsonViewerModule,p.RxFormBuilderModule,s.AdaptRxCheckboxModule,s.AdaptRxLabelModule,f.TranslateModule,m.RecordGridModule,d.RxRecordDefinitionResourceTypePipeModule,s.AdaptAlertModule,u.RxLineLoaderModule,l.AdaptTableModule,a.ReactiveFormsModule,p.RxDefinitionPickerModule,s.AdaptRxRadiobuttonModule,s.AdaptRxSelectModule,p.ExpressionFormControlModule,s.AdaptBusyModule,s.AdaptRxCounterModule,s.AdaptCodeViewerModule,s.AdaptSidebarModule,c.RxDefinitionModule,s.AdaptRxListBuilderModule,h.StoreModule.forFeature(O.featureSelector,{model:Oe}),x.EffectsModule.forFeature([Pe])]]});class _e{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.rxBundleCacheService=t,this.rxDefinitionNameService=i,this.rxUtilityModalsService=n,this.rxPageTitleService=o,this.router=r,this.translateService=a,this.rxComponentCanDeactivateGuard=s,this.isInitialized=!1,this.destroyed$=new v.ReplaySubject(1)}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.activatedRoute.params.pipe((0,y.takeUntil)(this.destroyed$)).subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewConfig=!e,this.configuration=Object.assign(Object.assign({},this.configuration),{definitionName:e,bundleId:this.rxBundleCacheService.bundleId}),this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.config-designer.title")])})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}onDefinitionSaved(e){this.isNewConfig&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}onCloseDesigner(){this.router.navigate([c.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"config-definitions"])}canDeactivate(){var e,t;return null===(t=null===(e=this.configDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}}_e.\u0275fac=function(e){return new(e||_e)(r["\u0275\u0275directiveInject"](D.ActivatedRoute),r["\u0275\u0275directiveInject"](c.RxBundleCacheService),r["\u0275\u0275directiveInject"](c.RxDefinitionNameService),r["\u0275\u0275directiveInject"](u.RxUtilityModalsService),r["\u0275\u0275directiveInject"](c.RxPageTitleService),r["\u0275\u0275directiveInject"](D.Router),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](c.RxComponentCanDeactivateGuard))},_e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:_e,selectors:[["rx-config-designer-page"]],viewQuery:function(e,t){if(1&e&&r["\u0275\u0275viewQuery"](Ee,5),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.configDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&r["\u0275\u0275template"](0,T,1,1,"rx-config-designer",0),2&e&&r["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[o.NgIf,Ee],encapsulation:2});class Ve{}Ve.\u0275fac=function(e){return new(e||Ve)},Ve.\u0275mod=r["\u0275\u0275defineNgModule"]({type:Ve,declarations:[_e],imports:[o.CommonModule,je],exports:[_e]}),Ve.\u0275inj=r["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,je]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-dataload-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{DataImportComponent:()=>ve,DataImportRegistrationModule:()=>ye,DataloadModule:()=>_e});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),s=i("./node_modules/@angular/forms/fesm2015/forms.js"),l=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),d=i("rxjs"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),m=i("lodash"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),h=i("./node_modules/@angular/common/fesm2015/http.js"),g=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),v=i("./node_modules/rxjs/_esm2015/operators/index.js"),y=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),x=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js");function C(e,t){1&e&&n["\u0275\u0275element"](0,"rx-line-loader")}function S(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.fileUploadedNotProcessedMsg," ")}}const D=function(e){return{content:e,type:"inline",variant:"warning"}};function I(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-alert",8),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](1,D,e.processStartInfo))}}function R(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",4),n["\u0275\u0275template"](2,S,2,1,"div",5),n["\u0275\u0275template"](3,I,1,3,"adapt-alert",6),n["\u0275\u0275element"](4,"adapt-table",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.fileUploadedNotProcessedMsg),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.processStartInfo),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",i.fileUploadedNotProcessedMsg)("columns",i.columns)("bordered",!0)("value",e)("wrapCellText",!0)}}const w=["dataImportConfigurationForm"],E=function(e){return{"mr-3":e}};function F(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",17),2&e){const e=t.$implicit,i=t.index;n["\u0275\u0275property"]("value",e.value)("label",e.displayValue)("ngClass",n["\u0275\u0275pureFunction1"](3,E,0===i))}}function M(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-definition-picker",18),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDefinitionChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.recordPickerOptions)("ngModel",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name)}}function T(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-definition-picker",19),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDefinitionChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.associationPickerOptions)("ngModel",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name)}}function O(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",27),n["\u0275\u0275elementStart"](1,"div",21),n["\u0275\u0275element"](2,"adapt-rx-control-label",22),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",28),n["\u0275\u0275element"](5,"adapt-rx-control-label",22),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.source-fields.label")),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.target-fields.label")))}function N(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275element"](1,"div",30),n["\u0275\u0275elementEnd"]())}const A=function(){return{standalone:!0}},P=function(e){return{"text-tertiary":e}};function j(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"div",32),n["\u0275\u0275elementStart"](2,"adapt-rx-select",33),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.sourceField.fieldName=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).updateDataChangesToSheetMapContext()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"div",34),n["\u0275\u0275elementStart"](4,"div",32),n["\u0275\u0275elementStart"](5,"adapt-rx-select",35),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.targetField=t})("onSelectionChange",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](3).onTargetFieldSelection(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",36),n["\u0275\u0275elementStart"](7,"button",37),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](3).removeMapping(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.sourceField.fieldName)("options",i.sourceFieldNameList)("required",!0)("enableFilter",!0)("ngModelOptions",n["\u0275\u0275pureFunction0"](14,A)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngModel",e.targetField)("options",i.targetFieldList)("optionFormatter",i.optionFormatter)("required",!0)("enableFilter",!0)("disabled",i.isRequiredTargetField(e.targetField))("ngModelOptions",n["\u0275\u0275pureFunction0"](15,A)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",i.isRequiredTargetField(e.targetField))("ngClass",n["\u0275\u0275pureFunction1"](16,P,i.isRequiredTargetField(e.targetField)))}}function _(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",20),n["\u0275\u0275elementStart"](2,"div",21),n["\u0275\u0275element"](3,"adapt-rx-control-label",22),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",21),n["\u0275\u0275elementStart"](6,"button",23),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).addFieldMapping()}),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,O,7,6,"div",24),n["\u0275\u0275template"](10,N,2,0,"div",25),n["\u0275\u0275template"](11,j,8,18,"div",26),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.mapping-title.title")),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,7,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.types.manual-mapping.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.areFieldsLoading),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings)}}function V(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275elementStart"](1,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().autoMapping()}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"adapt-rx-radiobutton-group",12),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionTypeChange()}),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275template"](6,F,1,5,"adapt-rx-radiobutton",13),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,M,1,2,"rx-definition-picker",14),n["\u0275\u0275template"](8,T,1,2,"rx-definition-picker",15),n["\u0275\u0275template"](9,_,12,9,"div",16),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.areFieldsLoading),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,8,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.types.auto-mapping.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](5,10,"com.bmc.arsys.rx.client.common.definition.label")),n["\u0275\u0275property"]("ngModel",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.definitionTypeOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type===e.definitionTypes.record),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type===e.definitionTypes.association),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name)}}function k(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",38),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().selectedMatchDuplicateByFields=t}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,9,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.match-by.label")),n["\u0275\u0275property"]("ngModel",e.selectedMatchDuplicateByFields)("options",e.matchDuplicateByFields)("multiple",!0)("enableFilter",!0)("selectAllButton",!0)("deselectAllButton",!0)("optionFormatter",e.optionFormatter)("required",!e.shouldGenerateNewIdForDuplicateRecords())}}const B=function(e){return{"d-block form-group":e}};function $(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",39),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.isSelected=t}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index;n["\u0275\u0275propertyInterpolate"]("label",e.name),n["\u0275\u0275propertyInterpolate"]("name","data-option"+e.id),n["\u0275\u0275property"]("ngModel",e.isSelected)("ngClass",n["\u0275\u0275pureFunction1"](5,B,2===i)),n["\u0275\u0275attribute"]("rx-id","data-option"+e.id)}}function L(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",40),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.example.label"),": ",e.timeFormatExample," ")}}function G(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"strong"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",40),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.name),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("e.g. ",e.example,"")}}function z(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-textfield",8),n["\u0275\u0275listener"]("onFocus",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateWizardButtons()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.dataload.import.attachment-type.zip.content-file.label")),n["\u0275\u0275property"]("autofocus",!0))}function U(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.example.label")," Worksheet.xlsx "))}const q=function(e){return{busy:e}},X=["grid"],W=["recordNamesCellTemplate"],H=["statusInfoCellTemplate"];function Q(e,t){if(1&e&&n["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275textInterpolate1"](" ",i.getRecordNames(e),"\n")}}function K(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",5),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().showStatusInfo(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.action-view.label")))}function J(e,t){1&e&&n["\u0275\u0275element"](0,"rx-line-loader")}function Y(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.exportConfiguredNotProcessedMsg," ")}}function Z(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-alert",8),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](1,D,e.processStartInfo))}}function ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",4),n["\u0275\u0275template"](2,Y,2,1,"div",5),n["\u0275\u0275template"](3,Z,1,3,"adapt-alert",6),n["\u0275\u0275element"](4,"adapt-table",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.exportConfiguredNotProcessedMsg),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.processStartInfo),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",i.exportConfiguredNotProcessedMsg)("columns",i.columns)("bordered",!0)("value",e)("wrapCellText",!0)}}function te(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton",23),n["\u0275\u0275listener"]("checkedChange",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().clearFieldsSelection(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index;n["\u0275\u0275property"]("value",e.value)("label",e.displayValue)("ngClass",n["\u0275\u0275pureFunction1"](3,E,0===i))}}function ie(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-definition-picker",24),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.name=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().onDefinitionChange(t,i)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("options",t.recordPickerOptions)("ngModel",e.name)}}function ne(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-definition-picker",25),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.name=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().onDefinitionChange(t,i)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("options",t.associationPickerOptions)("ngModel",e.name)}}function oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",27),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).$implicit.criteria.fields=t}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"](),i=t.$implicit,o=t.index,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.client.dataload.export.new-configuration.fields.label")),n["\u0275\u0275property"]("ngModel",i.criteria.fields)("options",e)("required",!0)("multiple",!0)("enableFilter",!0)("selectAllButton",!0)("deselectAllButton",!0)("optionFormatter",r.optionFormatter),n["\u0275\u0275attribute"]("rx-id","definition-"+o+"_fields")}}function re(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,oe,2,12,"adapt-rx-select",26),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.type===t.definitionTypes.record)}}function ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",28),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().openExportingDataPreview(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",t.isPreviewDisabled(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.dataload.export.new-configuration.preview-data.label")," ")}}function se(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",11),n["\u0275\u0275elementStart"](1,"span",12),n["\u0275\u0275elementStart"](2,"button",13),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().remove(t)}),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"adapt-accordion-tab",14),n["\u0275\u0275elementStart"](6,"adapt-rx-radiobutton-group",15),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.type=t}),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275template"](8,te,1,5,"adapt-rx-radiobutton",16),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,ie,1,2,"rx-definition-picker",17),n["\u0275\u0275template"](10,ne,1,2,"rx-definition-picker",18),n["\u0275\u0275elementStart"](11,"div",19),n["\u0275\u0275template"](12,re,2,1,"div",20),n["\u0275\u0275pipe"](13,"async"),n["\u0275\u0275elementStart"](14,"rx-expression-form-control",21),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.criteria.filter=t})("events",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().onExpressionEvent(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,ae,3,4,"button",22),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,12,"com.bmc.arsys.rx.client.common.remove.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,14,"com.bmc.arsys.rx.client.dataload.export.new-configuration.definition.label")),n["\u0275\u0275property"]("ngModel",e.type)("required",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",o.definitionTypeOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.type===o.definitionTypes.record),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.type===o.definitionTypes.association),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](13,16,o.definitionFields$[i])),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",o.dataFilterExpressionOptions)("ngModel",e.criteria.filter),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.type===o.definitionTypes.record)}}function le(e,t){if(1&e&&n["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275textInterpolate1"](" ",i.getRecordNames(e),"\n")}}function de(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",5),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().showStatusInfo(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.action-view.label")))}const ce="[_nghost-%COMP%]{display:block;padding:1rem;height:100%}[_nghost-%COMP%]  rx-record-grid{height:100%}",pe={recordDefinitionName:"com.bmc.arsys.rx.dataload:Data Load Files",archiveTrueValue:1,uploadFileStepId:"uploadDataFile",temporaryStepConfig:{id:"temporaryStep",name:"",componentFactory:null},attachmentTypes:{xlsx:{value:1,extension:"xlsx"},zip:{value:2,extension:"zip"}},fields:{importJobName:536870913,uploadedOn:536870914,importJobDescription:536870915,dataFile:536870916,attachmentOut:536870917,message:536870918,attachmentType:536870919,archivedWorksheetFileName:536870920,isArchived:536870921,mappingConfig:536870923},dataStatuses:{all:-1,queued:6,new:0,processing:1,processed:2,stopping:7,stopped:8,errored:3},mergeOptions:{generateNewIds:1,rejectDuplicates:2,generateNewIdsForDuplicates:3,updateRecords:4,replaceRecords:5}};class ue{constructor(e){this.httpClient=e,this.url=`/api/${a.RX_APPLICATION.dataloadBundleId}/rx/application/dataload/`}runLoadProcess(e){return this.httpClient.post(`${this.url}${e}`,{})}stopDataProcessing(e){return this.httpClient.post(`${this.url}stop/${e}`,{})}getDataRecordWorksheet(e){return this.httpClient.get(`${this.url}${e}/input_file_conf`)}getEmptyCurrentSheetDataMapConfig(e){return{name:e,configurations:{definitionMappings:{targetDefinition:{type:null,name:null},fieldMappings:[]},dataHandlingOptions:[],timeFormatOptions:null,duplicateHandlingOptions:{matchDuplicateBy:[],handleDuplicateBy:null}}}}}ue.\u0275fac=function(e){return new(e||ue)(n["\u0275\u0275inject"](h.HttpClient))},ue.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ue,factory:ue.\u0275fac,providedIn:"root"});class me{constructor(e,t,i,n,o){this.datePipe=e,this.rxTranslateService=t,this.rxJsonParserService=i,this.activeModalRef=n,this.rxRecordInstanceDataPageService=o,this.statusData$=this.rxRecordInstanceDataPageService.post({params:{[p.RX_RECORD_DEFINITION.coreFieldIds.id]:this.activeModalRef.getData().dataRecordId,recorddefinition:pe.recordDefinitionName}}).pipe((0,v.map)(e=>{e.data[0][p.RX_RECORD_DEFINITION.coreFieldIds.status]===pe.dataStatuses.processing&&(this.processStartInfo=`${this.rxTranslateService.instant("com.bmc.arsys.rx.client.dataload.process-started.message")} ${this.datePipe.transform(e.data[0][p.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate],"medium")}`);const t=(0,m.get)(this.rxJsonParserService.tryParseJson(e.data[0][pe.fields.message],[]),"dataLoadProgressStatus");return t?(0,m.map)(t,e=>Object.assign(Object.assign({},e),{updateTime:this.datePipe.transform(e.updateTime,"medium")})):(this.fileUploadedNotProcessedMsg=e.data[0][pe.fields.message],[])})),this.columns=[{field:"updateTime",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.dataload.status-info-grid.column.updated-date.title"),sortable:!1,width:"20%"},{field:"status",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.common.status.label"),width:"20%"},{field:"message",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.common.message.label"),width:"80%"}]}close(){this.activeModalRef.close()}}me.\u0275fac=function(e){return new(e||me)(n["\u0275\u0275directiveInject"](o.DatePipe),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](u.RxJsonParserService),n["\u0275\u0275directiveInject"](g.ActiveModalRef),n["\u0275\u0275directiveInject"](p.RxRecordInstanceDataPageService))},me.\u0275cmp=n["\u0275\u0275defineComponent"]({type:me,selectors:[["dl-import-record-status-info"]],decls:8,vars:7,consts:[["loaderTemplate",""],[4,"ngIf","ngIfElse"],[1,"modal-footer"],["adapt-button","","btn-type","secondary","rx-id","close-button","type","button",3,"click"],[1,"data-status-info"],[4,"ngIf"],[3,"config",4,"ngIf"],["rx-id","imported-status-info-grid",3,"hidden","columns","bordered","value","wrapCellText"],[3,"config"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,C,1,0,"ng-template",null,0,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](2,R,5,7,"div",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementStart"](4,"div",2),n["\u0275\u0275elementStart"](5,"button",3),n["\u0275\u0275listener"]("click",function(){return t.close()}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](1);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](3,3,t.statusData$))("ngIfElse",e),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,5,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[o.NgIf,g.AdaptButtonComponent,f.RxLineLoaderComponent,y.AdaptTableComponent,g.AdaptAlertComponent],pipes:[o.AsyncPipe,l.TranslatePipe],styles:[".data-status-info[_ngcontent-%COMP%]{padding:15px}"]});class fe{constructor(e){this.httpClient=e,this.url=`/api/${a.RX_APPLICATION.dataloadBundleId}/rx/application/dataexport/`}isRecordDefinitionResponse(e){return!(0,m.isUndefined)(e.fieldDefinitions)}startDataExport(e){return this.httpClient.post(`${this.url}${e}`,{})}}fe.\u0275fac=function(e){return new(e||fe)(n["\u0275\u0275inject"](h.HttpClient))},fe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:fe,factory:fe.\u0275fac,providedIn:"root"});class he{constructor(e,t,i,n,o,r,a,s,l,c){this.dataImportService=e,this.dataExportService=t,this.rxRecordDefinitionCacheService=i,this.changeDetectorRef=n,this.rxModalService=o,this.rxWizardModalComponent=r,this.definitionNameService=a,this.translateService=s,this.rxAssociationDefinitionService=l,this.rxNotificationService=c,this.sourceFieldNameList=[],this.targetFieldList=[],this.definitionTypes={record:"record",association:"association"},this.definitionTypeOptions=[{value:this.definitionTypes.record,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.record.label")},{value:this.definitionTypes.association,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.association.label")}],this.recordPickerOptions={label:"",definitionType:b.RxDefinitionPickerType.Record,availableDefinitionPickerStates:{definitionButtonsGroups:[b.RX_DEFINITION_PICKER.definitionScopes.all],search:b.RX_DEFINITION_PICKER.definitionScopes.all}},this.associationPickerOptions={label:"",definitionType:b.RxDefinitionPickerType.Association,availableDefinitionPickerStates:{definitionButtonsGroups:[b.RX_DEFINITION_PICKER.definitionScopes.all],search:b.RX_DEFINITION_PICKER.definitionScopes.all}},this.destroyed$=new d.ReplaySubject(1),this.duplicateHandlingOptions=[{id:pe.mergeOptions.generateNewIds,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.generating-new-id-for-all")},{id:pe.mergeOptions.generateNewIdsForDuplicates,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.generating-new-id-for-duplicates")},{id:pe.mergeOptions.rejectDuplicates,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.rejecting-duplicate")},{id:pe.mergeOptions.replaceRecords,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.replacing-existing-records")},{id:pe.mergeOptions.updateRecords,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.updating-old-with-new")}],this.dataOptions=[{id:1,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.options.remove-leading-spaces-and-tabs"),isSelected:!1},{id:2,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.options.remove-trailing-spaces-and-tabs"),isSelected:!1},{id:3,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.tabs.options.truncate-long-strings"),isSelected:!1}],this.matchDuplicateByFields=[],this.selectedMatchDuplicateByFields=[],this.dateTimeFormatOptions=[{id:1,name:"dd/MM/yy",example:"25/11/21"},{id:2,name:"dd/MM/yyyy",example:"25/11/2021"},{id:3,name:"MM/dd/yyyy",example:"11/25/2021"},{id:4,name:"yyyy/MM/dd",example:"2021/11/25"},{id:5,name:"yyyy-MM-dd'T'HH:mm:ss:SSSZ",example:"2021-11-25T11:12:13:000+0530"}]}ngOnInit(){this.excelSheetName=this.options.sheetName,this.currentSheetDataImportMapping=this.dataImportService.getEmptyCurrentSheetDataMapConfig(this.excelSheetName),this.currentExcelSheetConfiguration=this.context.excelSheetsConfiguration[this.excelSheetName],this.sourceFieldNameList=(0,m.map)(this.currentExcelSheetConfiguration.fields,"name"),this.currentSheetDataImportMapping.configurations.duplicateHandlingOptions.handleDuplicateBy=[(0,m.find)(this.duplicateHandlingOptions,{id:pe.mergeOptions.generateNewIds})];Boolean(this.context.clonedConfigurationInstanceId)&&this.context.isClonedConfigMatched?(this.currentSheetDataImportMapping=(0,m.cloneDeep)(this.getRefactoredClonedConfiguration((0,m.find)(this.context.dataImportContext.dataImportConfigurations.sheets,{name:this.excelSheetName}))),setTimeout(()=>this.updateDataChangesToSheetMapContext()),this.getRecordDefinitionName()?this.loadTargetAndOtherFields(!1,!1):this.setTypeFromExcelSheet()):this.setTypeFromExcelSheet()}ngAfterViewInit(){this.dataImportConfigurationForm.control.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>setTimeout(()=>this.updateDataChangesToSheetMapContext()))}removeMapping(e){this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings.splice(e,1)}addFieldMapping(e=null,t=null){this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings.push({sourceField:{fieldName:e?[e]:null},targetField:t?[t]:null}),this.updateWizardButtons()}setDefinitionTypeNameFromExcelSheet(){this.setTypeFromExcelSheet(),this.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name=this.currentExcelSheetConfiguration.definition.value}setTypeFromExcelSheet(){this.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type=this.getTypeFromExcelSheet()}autoMapping(){this.clearMappingFields(),this.setDefinitionTypeNameFromExcelSheet(),this.loadTargetAndOtherFields(!0)}loadTargetAndOtherFields(e=!1,t=!1){this.areFieldsLoading=!0,this.requiredFieldNames=[],(0,d.iif)(()=>this.isDefinitionTypeRecord(),this.rxRecordDefinitionCacheService.getRecordDefinition(this.getRecordDefinitionName()),this.rxAssociationDefinitionService.get(this.getRecordDefinitionName())).pipe((0,v.map)(e=>{this.dataExportService.isRecordDefinitionResponse(e)?this.targetFieldList=e.fieldDefinitions.sort(function(e,t){if(e.fieldOption===p.RecordFieldOption.Required&&!e.defaultValue)return-1;t.name.localeCompare(e.name)}).map(e=>(this.isMappingFieldDefinitionRequired(e)&&(this.requiredFieldNames.push(e.name),t&&this.addFieldMapping(null,{name:e.name,_fieldId:e.id})),{name:e.name,_fieldId:e.id})):this.targetFieldList=[{name:e.nodeAName||"",_fieldId:e.nodeAKeys[0]||""},{name:e.nodeBName||"",_fieldId:e.nodeBKeys[0]}].filter(e=>e.name)}),(0,v.tap)(()=>{e&&this.generateAutoMappingFields()}),(0,v.finalize)(()=>{this.areFieldsLoading=!1})).subscribe(()=>{this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings=(0,m.sortBy)(this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings,e=>(0,m.get)(e,"targetField[0].name"))})}isMappingFieldDefinitionRequired(e){return e.fieldOption===p.RecordFieldOption.Required&&!e.defaultValue}generateAutoMappingFields(){(0,m.forEach)(this.sourceFieldNameList,e=>{const t=this.targetFieldList.find(t=>e===t.name||e===String(t._fieldId));t?this.addFieldMapping(e,t):this.addFieldMapping(e,null)});const e=(0,m.flatten)((0,m.map)(this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings,"targetField"));(0,m.forEach)(this.targetFieldList,t=>{!(0,m.find)(e,{name:t.name})&&this.isRequiredTargetField(t)&&this.addFieldMapping(null,t)})}onDefinitionChange(e){this.clearMappingFields(),e&&(this.definitionNameService.getBundleId(e)?this.loadTargetAndOtherFields(!1,!0):this.showInvalidDefinitionSelectedMsg())}clearMappingFields(){this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings=[]}getRecordDefinitionName(e){return e?this.currentExcelSheetConfiguration.definition.value:this.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name}clearDefinitionSelection(){this.changeDetectorRef.detectChanges(),this.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.name=null}onDefinitionTypeChange(){this.clearMappingFields(),this.clearDefinitionSelection()}showInvalidDefinitionSelectedMsg(){this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.global-record-not-allowed.message")),this.clearDefinitionSelection()}isDefinitionTypeRecord(){return this.currentSheetDataImportMapping.configurations.definitionMappings.targetDefinition.type===this.definitionTypes.record}optionFormatter(e){return e.name}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}isStepActive(){var e;return this.rxWizardModalComponent.api.isCurrentStepActive(null===(e=this.currentExcelSheetConfiguration)||void 0===e?void 0:e.stepId)}onTargetFieldSelection(e,t){(0,m.flow)(e=>(0,m.filter)(e,(e,i)=>i!==t),t=>(0,m.find)(t,t=>{var i,n;return t.targetField&&(null===(i=null==t?void 0:t.targetField[0])||void 0===i?void 0:i.name)===(null===(n=e.options[0])||void 0===n?void 0:n.name)}),e=>e)(this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings)?(this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.target-field-already-selected.message.title")),e.preventDefault()):setTimeout(()=>this.updateDataChangesToSheetMapContext())}isRequiredTargetField(e){return(0,m.includes)(this.requiredFieldNames,(null==e?void 0:e.name)||(0,m.get)(e,"[0].name"))}shouldGenerateNewIdForDuplicateRecords(){var e;return this.currentSheetDataImportMapping.configurations.duplicateHandlingOptions.handleDuplicateBy&&1===(null===(e=this.currentSheetDataImportMapping.configurations.duplicateHandlingOptions.handleDuplicateBy[0])||void 0===e?void 0:e.id)}onTabActivated(e){if(1===e.index){this.matchDuplicateByFields=(0,m.flow)(e=>(0,m.map)(e,"targetField"),m.compact,m.flatten)(this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings);const e=(0,m.find)(this.matchDuplicateByFields,{_fieldId:p.RX_RECORD_DEFINITION.coreFieldIds.id});e&&!this.selectedMatchDuplicateByFields.length&&(this.selectedMatchDuplicateByFields=[e]),this.selectedMatchDuplicateByFields=(0,m.intersectionBy)(this.matchDuplicateByFields,this.selectedMatchDuplicateByFields,"name")}}getTypeFromExcelSheet(){return(0,m.lowerCase)(this.currentExcelSheetConfiguration.definition.name)}get timeFormatExample(){var e;return this.currentSheetDataImportMapping.configurations.timeFormatOptions&&(null===(e=this.currentSheetDataImportMapping.configurations.timeFormatOptions[0])||void 0===e?void 0:e.example)}areFieldMappingsInvalid(){return(0,m.some)(this.currentSheetDataImportMapping.configurations.definitionMappings.fieldMappings,e=>!e.sourceField.fieldName||!e.targetField)}updateWizardButtons(){this.rxWizardModalComponent.config.options.allowFinish=this.rxWizardModalComponent.activeTabIndex===this.rxWizardModalComponent.config.options.steps.length-1,this.dataImportConfigurationForm.invalid||this.areFieldMappingsInvalid()?(this.rxWizardModalComponent.api.disableNextButton(),this.rxWizardModalComponent.api.disableFinishButton()):(this.rxWizardModalComponent.api.enableNextButton(),this.rxWizardModalComponent.api.enableFinishButton())}updateDataChangesToSheetMapContext(){this.updateWizardButtons(),this.rxWizardModalComponent.api.markDirty();const e=(0,m.cloneDeep)(this.currentSheetDataImportMapping.configurations);(0,m.filter)(e.definitionMappings.fieldMappings,e=>e.targetField).forEach(e=>{e.sourceField={fieldName:(0,m.get)(e.sourceField,"fieldName[0]")},e.targetField=e.targetField[0]}),e.duplicateHandlingOptions.handleDuplicateBy=(0,m.get)(e.duplicateHandlingOptions.handleDuplicateBy,"[0].id"),this.shouldGenerateNewIdForDuplicateRecords()?e.duplicateHandlingOptions.matchDuplicateBy=[]:e.duplicateHandlingOptions.matchDuplicateBy=(0,m.map)(this.selectedMatchDuplicateByFields,e=>({_fieldId:e._fieldId,name:e.name})),e.dataHandlingOptions=this.dataOptions.filter(e=>e.isSelected).map(e=>e.id),e.timeFormatOptions=(0,m.get)(e.timeFormatOptions,"[0].name");(0,m.find)(this.context.dataImportContext.dataImportConfigurations.sheets,{name:this.excelSheetName}).configurations=e}getRefactoredClonedConfiguration(e){return(0,m.forEach)(e.configurations.definitionMappings.fieldMappings,e=>{e.targetField=[e.targetField],e.sourceField.fieldName=[e.sourceField.fieldName]}),this.dataOptions.forEach(t=>{t.isSelected=(0,m.includes)(e.configurations.dataHandlingOptions,t.id)}),e.configurations.timeFormatOptions=e.configurations.timeFormatOptions?[(0,m.find)(this.dateTimeFormatOptions,{name:e.configurations.timeFormatOptions})]:[],e.configurations.duplicateHandlingOptions.handleDuplicateBy=e.configurations.duplicateHandlingOptions.handleDuplicateBy?[(0,m.find)(this.duplicateHandlingOptions,{id:e.configurations.duplicateHandlingOptions.handleDuplicateBy})]:[(0,m.find)(this.duplicateHandlingOptions,{id:pe.mergeOptions.generateNewIds})],e.configurations.duplicateHandlingOptions.matchDuplicateBy.length&&(this.selectedMatchDuplicateByFields=e.configurations.duplicateHandlingOptions.matchDuplicateBy),e}}he.\u0275fac=function(e){return new(e||he)(n["\u0275\u0275directiveInject"](ue),n["\u0275\u0275directiveInject"](fe),n["\u0275\u0275directiveInject"](p.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](b.RxWizardModalComponent),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](x.RxAssociationDefinitionService),n["\u0275\u0275directiveInject"](a.RxNotificationService))},he.\u0275cmp=n["\u0275\u0275defineComponent"]({type:he,selectors:[["dl-data-import-mapping-step"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](w,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.dataImportConfigurationForm=e.first)}},inputs:{context:"context",options:"options"},decls:19,vars:27,consts:[["dataImportConfigurationForm","ngForm"],["type","pills",3,"tab-active","tab-active-changed"],[3,"adapt-tab-title"],["class","mt-2",4,"ngIf"],["name","handleDuplicatesBy","rx-id","handle-duplicates-by",1,"d-block","form-group","mt-2",3,"label","ngModel","options","optionFormatter","ngModelChange"],["class","d-block form-group","name","matchDuplicatesBy","rx-id","match-duplicates-by",3,"label","ngModel","options","multiple","enableFilter","selectAllButton","deselectAllButton","optionFormatter","required","ngModelChange",4,"ngIf"],[3,"ngModel","label","ngClass","name","ngModelChange",4,"ngFor","ngForOf"],["name","dateFormat","rx-id","date-format",1,"d-block","mb-1",3,"label","ngModel","options","optionFormatter","optionContentTemplate","ngModelChange"],["class","text-tertiary",4,"ngIf"],["optionTemplate",""],[1,"mt-2"],["adapt-button","","btn-type","primary","type","button","rx-id","auto-mapping","size","small",1,"d-icon-left-arrow_schema","form-group",3,"disabled","click"],["name","definitionType","rx-id","definition-type",3,"ngModel","label","ngModelChange"],["class","radio-inline m-0",3,"value","label","ngClass",4,"ngFor","ngForOf"],["class","d-block form-group","rx-id","record-definition-picker","name","recordDefinitionName",3,"options","ngModel","ngModelChange",4,"ngIf"],["class","d-block form-group","rx-id","association-definition-picker","name","associationDefinitionName",3,"options","ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],[1,"radio-inline","m-0",3,"value","label","ngClass"],["rx-id","record-definition-picker","name","recordDefinitionName",1,"d-block","form-group",3,"options","ngModel","ngModelChange"],["rx-id","association-definition-picker","name","associationDefinitionName",1,"d-block","form-group",3,"options","ngModel","ngModelChange"],[1,"row","border-bottom","form-group"],[1,"col-6"],[3,"label"],["adapt-button","","btn-type","tertiary","type","button","rx-id","add-mapping",1,"d-icon-left-plus_circle","float-right","py-0","px-2",3,"click"],["class","row",4,"ngIf"],["class","loader-container",4,"ngIf"],["class","row no-gutters",4,"ngFor","ngForOf"],[1,"row"],[1,"col-6","pl-0"],[1,"loader-container"],[1,"loader-section"],[1,"row","no-gutters"],[1,"col-5"],["rx-id","source-field-names",1,"d-block","form-group",3,"ngModel","options","required","enableFilter","ngModelOptions","ngModelChange"],[1,"col-1","d-icon-arrow_right","text-tertiary","mt-2","text-center"],["rx-id","target-fields",1,"d-block","form-group",3,"ngModel","options","optionFormatter","required","enableFilter","disabled","ngModelOptions","ngModelChange","onSelectionChange"],[1,"col-1","pl-3"],["adapt-button","","btn-type","tertiary","type","button","rx-id","remove-mapping-button",1,"d-icon-minus_circle","text-danger","form-group","px-0",3,"disabled","ngClass","click"],["name","matchDuplicatesBy","rx-id","match-duplicates-by",1,"d-block","form-group",3,"label","ngModel","options","multiple","enableFilter","selectAllButton","deselectAllButton","optionFormatter","required","ngModelChange"],[3,"ngModel","label","ngClass","name","ngModelChange"],[1,"text-tertiary"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"form",null,0),n["\u0275\u0275elementStart"](2,"adapt-tabset",1),n["\u0275\u0275listener"]("tab-active-changed",function(e){return t.onTabActivated(e)}),n["\u0275\u0275elementStart"](3,"adapt-tab-panel",2),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275template"](5,V,10,12,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"adapt-tab-panel",2),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementStart"](8,"adapt-rx-select",4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.currentSheetDataImportMapping.configurations.duplicateHandlingOptions.handleDuplicateBy=e}),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,k,2,11,"adapt-rx-select",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"adapt-tab-panel",2),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275template"](13,$,1,7,"adapt-rx-checkbox",6),n["\u0275\u0275elementStart"](14,"adapt-rx-select",7),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.currentSheetDataImportMapping.configurations.timeFormatOptions=e}),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](16,L,3,4,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](17,G,4,2,"ng-template",null,9,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](18);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("tab-active",0),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](4,17,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.data-mapping.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isStepActive()),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](7,19,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.title")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](9,21,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.duplicate-handling.handle-by.label")),n["\u0275\u0275property"]("ngModel",t.currentSheetDataImportMapping.configurations.duplicateHandlingOptions.handleDuplicateBy)("options",t.duplicateHandlingOptions)("optionFormatter",t.optionFormatter),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.shouldGenerateNewIdForDuplicateRecords()),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("adapt-tab-title",n["\u0275\u0275pipeBind1"](12,23,"com.bmc.arsys.rx.client.common.options.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.dataOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](15,25,"com.bmc.arsys.rx.client.dataload.import.wizard.tabs.options.date-format.label")),n["\u0275\u0275property"]("ngModel",t.currentSheetDataImportMapping.configurations.timeFormatOptions)("options",t.dateTimeFormatOptions)("optionFormatter",t.optionFormatter)("optionContentTemplate",e),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.timeFormatExample)}},directives:[s["\u0275NgNoValidate"],s.NgControlStatusGroup,s.NgForm,g.AdaptTabsComponent,g.AdaptTabsPanelComponent,o.NgIf,g.AdaptRxSelectComponent,s.NgControlStatus,s.NgModel,o.NgForOf,g.AdaptButtonComponent,g.AdaptRxRadiobuttonGroupComponent,g.AdaptRxRadiobuttonComponent,o.NgClass,b.RxDefinitionPickerComponent,g.AdaptRxControlLabelComponent,s.RequiredValidator,g.AdaptRxCheckboxComponent],pipes:[l.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]  adapt-rx-radiobutton .radio{margin:8px 0}[_nghost-%COMP%]  .dropdown-item{white-space:normal;word-break:break-all}adapt-rx-select[_ngcontent-%COMP%], rx-definition-picker[_ngcontent-%COMP%]{max-width:400px}']});class ge{constructor(e,t,i,n,o,r,a,s,l){this.rxRecordInstanceService=e,this.rxNotificationService=t,this.dataImportService=i,this.rxModalService=n,this.translateService=o,this.formBuilder=r,this.rxWizardModalComponent=a,this.rxWizardService=s,this.componentFactoryResolver=l,this.isWorksheetProcessed=!1,this.destroyed$=new d.ReplaySubject(1),this.processCustomizedImport$=new d.Subject,this.saveDataFileConfiguration=this.processCustomizedImport$.pipe((0,v.takeUntil)(this.destroyed$),(0,v.tap)(()=>{this.busy=d.NEVER.subscribe()}),(0,v.switchMap)(()=>this.isWorksheetProcessed?(0,d.of)(null):(0,d.iif)(()=>!!this.context.createdRecordInstanceId,this.rxRecordInstanceService.get(pe.recordDefinitionName,this.context.createdRecordInstanceId),this.rxRecordInstanceService.getNew(pe.recordDefinitionName)).pipe((0,v.switchMap)(e=>(this.updateRecordInstanceFields(e),this.context.createdRecordInstanceId?this.rxRecordInstanceService.save(e):this.rxRecordInstanceService.create(e))),(0,v.tap)(e=>{this.context.createdRecordInstanceId||(this.context.createdRecordInstanceId=null==e?void 0:e.id)}))),(0,v.switchMap)(()=>this.isWorksheetProcessed?(0,d.of)(null):this.dataImportService.getDataRecordWorksheet(this.context.createdRecordInstanceId)),(0,v.withLatestFrom)((0,d.timer)(0).pipe((0,v.switchMap)(()=>{var e;return(null===(e=this.context)||void 0===e?void 0:e.clonedConfigurationInstanceId)?this.rxRecordInstanceService.get(pe.recordDefinitionName,this.context.clonedConfigurationInstanceId):(0,d.of)(null)}))),(0,v.tap)(()=>{this.busy.unsubscribe()}),(0,v.switchMap)(([e,t])=>{if(this.isWorksheetProcessed)return(0,d.of)({gotoNextStep:!0});if(null==e?void 0:e.sheets){if(this.isWorksheetProcessed=!0,this.uploadedExcelSheets=e.sheets,this.rxWizardModalComponent.api.removeStep(1),(0,m.forEach)(this.uploadedExcelSheets,e=>{const t=(0,m.camelCase)(e.sheetName);e.configurations.stepId=t,this.context.excelSheetsConfiguration[e.sheetName]=e.configurations,this.rxWizardModalComponent.api.addStep({id:t,name:e.sheetName,options:{sheetName:e.sheetName},componentFactory:this.componentFactoryResolver.resolveComponentFactory(he)}),this.context.dataImportContext.dataImportConfigurations.sheets.push(this.dataImportService.getEmptyCurrentSheetDataMapConfig(e.sheetName))}),this.context.clonedConfigurationInstanceId){const i=JSON.parse(t.fieldInstances[pe.fields.mappingConfig].value)||{dataImportConfigurations:{sheets:[]}},n=i.dataImportConfigurations.sheets.filter(t=>!e.sheets.some(e=>e.sheetName===t.name));return i.dataImportConfigurations.sheets.length!==e.sheets.length||n.length?(0,d.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.configuration-mismatch.message"),buttons:{confirmButton:this.translateService.instant("com.bmc.arsys.rx.client.common.cancel.label"),dismissButton:this.translateService.instant("com.bmc.arsys.rx.client.common.continue.label")}})).pipe((0,v.switchMap)(e=>(0,d.iif)(()=>e,this.deleteCreatedDataImportInstance(),(0,d.of)({recordDeleted:!1}))),(0,v.tap)(e=>{e.recordDeleted?(this.rxWizardModalComponent.api.markPristine(),this.rxWizardModalComponent.close()):this.goToDataConfigurationStep()})):(this.context.dataImportContext.dataImportConfigurations.sheets=i.dataImportConfigurations.sheets,this.context.isClonedConfigMatched=!0,(0,d.of)({gotoNextStep:!0}))}return(0,d.of)({gotoNextStep:!0})}return this.isWorksheetProcessed=!1,this.uploadDataFileForm.markAsDirty(),this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.invalid-attachment-uploaded-error.message")),this.deleteCreatedDataImportInstance()})).subscribe(e=>{e.gotoNextStep&&setTimeout(()=>this.goToDataConfigurationStep())})}ngOnInit(){this.rxWizardModalComponent.next$.pipe((0,v.filter)(e=>e===pe.uploadFileStepId),(0,v.takeUntil)(this.destroyed$)).subscribe(()=>{this.saveDataloadFileAndProceedToConfigurations()}),this.rxWizardModalComponent.api.disableNextButton(),this.uploadDataFileForm=this.formBuilder.group({importJobName:[null,[s.Validators.required,s.Validators.maxLength(254)]],importJobDescription:[null,s.Validators.maxLength(254)],dataFile:null,archivedWorksheetFileName:[null,[s.Validators.required,s.Validators.maxLength(254)]]}),this.uploadDataFileForm.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(()=>{this.updateWizardButtons();const e={importJobName:this.uploadDataFileForm.get("importJobName").value,importJobDescription:this.uploadDataFileForm.get("importJobDescription").value,attachmentType:this.isZipAttachmentUploaded?pe.attachmentTypes.zip.value:pe.attachmentTypes.xlsx.value,archivedWorksheetFileName:this.uploadDataFileForm.get("archivedWorksheetFileName").value};this.rxWizardModalComponent.api.updateContext({importJobInfo:e})})}updateWizardButtons(){this.uploadDataFileForm.pristine||this.uploadDataFileForm.invalid?this.rxWizardModalComponent.api.disableNextButton():this.rxWizardModalComponent.api.enableNextButton()}saveDataloadFile(){this.rxWizardModalComponent.api.disableNextButton(),this.uploadDataFileForm.markAsPristine(),this.rxWizardModalComponent.api.markPristine(),this.rxRecordInstanceService.getNew(pe.recordDefinitionName).pipe((0,v.switchMap)(e=>(this.updateRecordInstanceFields(e),this.rxRecordInstanceService.create(e)))).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.data-record-saved.message")),this.rxWizardModalComponent.close()})}saveDataloadFileAndProceedToConfigurations(){this.isCustomizedImportStarted=!0,this.rxWizardModalComponent.api.disableNextButton(),this.uploadDataFileForm.markAsPristine(),this.processCustomizedImport$.next()}handleWorksheetNameInput(){this.isZipAttachmentUploaded?this.uploadDataFileForm.get("archivedWorksheetFileName").enable():this.uploadDataFileForm.get("archivedWorksheetFileName").disable()}onAfterFilesAdded(e){e.length&&(this.isWorksheetProcessed=!1,this.isZipAttachmentUploaded=this.isZipExtension(e[0].data.name),this.handleWorksheetNameInput())}onRemovedFileFromQueue(){this.isZipAttachmentUploaded=!1,this.handleWorksheetNameInput(),this.uploadDataFileForm.controls.archivedWorksheetFileName.setValue("")}getAllowedTypes(){return[pe.attachmentTypes.zip.extension,pe.attachmentTypes.xlsx.extension]}isZipExtension(e){return e.split(".").pop().toLowerCase()===pe.attachmentTypes.zip.extension}deleteCreatedDataImportInstance(){return this.rxRecordInstanceService.delete(pe.recordDefinitionName,this.context.createdRecordInstanceId).pipe((0,v.tap)(()=>{this.context.createdRecordInstanceId=null}),(0,v.map)(()=>({recordDeleted:!0})))}goToDataConfigurationStep(){this.rxWizardModalComponent.next(!0)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}updateRecordInstanceFields(e){e.setFieldValue(pe.fields.importJobName,this.uploadDataFileForm.get("importJobName").value),e.setFieldValue(pe.fields.importJobDescription,this.uploadDataFileForm.get("importJobDescription").value),e.setFieldValue(pe.fields.attachmentType,this.isZipAttachmentUploaded?pe.attachmentTypes.zip.value:pe.attachmentTypes.xlsx.value),e.setFieldValue(pe.fields.dataFile,this.uploadDataFileForm.get("dataFile").value[0].data),e.setFieldValue(pe.fields.archivedWorksheetFileName,this.uploadDataFileForm.get("archivedWorksheetFileName").value)}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275directiveInject"](p.RxRecordInstanceService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](ue),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](s.FormBuilder),n["\u0275\u0275directiveInject"](b.RxWizardModalComponent),n["\u0275\u0275directiveInject"](b.RxWizardService),n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver))},ge.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ge,selectors:[["dl-upload-data-file-step"]],inputs:{context:"context"},decls:13,vars:23,consts:[[3,"options"],[1,"d-flex","flex-column","flex-fill","h-100",3,"formGroup"],["formControlName","importJobName","rx-id","import-job-name",1,"d-block","form-group",3,"label","autofocus"],["formControlName","importJobDescription","rx-id","import-job-description",1,"d-block","form-group",3,"label"],["formControlName","dataFile","rx-id","data-file",1,"d-block","form-group",3,"label","required","showMaxSizeRestriction","allowedTypes","afterFilesAdded","removedFileFromQueue"],["class","d-block mb-1","formControlName","archivedWorksheetFileName","rx-id","archived-worksheet-file-name",3,"label","autofocus","onFocus",4,"ngIf"],["class","text-tertiary form-group",4,"ngIf"],["adapt-button","","type","button","btn-type","primary","rx-id","quick-import-button",1,"mt-auto","align-self-end",3,"disabled","click"],["formControlName","archivedWorksheetFileName","rx-id","archived-worksheet-file-name",1,"d-block","mb-1",3,"label","autofocus","onFocus"],[1,"text-tertiary","form-group"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"rx-busy-indicator",0),n["\u0275\u0275elementStart"](1,"form",1),n["\u0275\u0275element"](2,"adapt-rx-textfield",2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275element"](4,"adapt-rx-textfield",3),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementStart"](6,"adapt-rx-uploader",4),n["\u0275\u0275listener"]("afterFilesAdded",function(e){return t.onAfterFilesAdded(e)})("removedFileFromQueue",function(){return t.onRemovedFileFromQueue()}),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,z,2,4,"adapt-rx-textfield",5),n["\u0275\u0275template"](9,U,3,3,"div",6),n["\u0275\u0275elementStart"](10,"button",7),n["\u0275\u0275listener"]("click",function(){return t.saveDataloadFile()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("options",n["\u0275\u0275pureFunction1"](21,q,t.busy)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",t.uploadDataFileForm),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](3,13,"com.bmc.arsys.rx.client.dataload.import.import-job-name.label")),n["\u0275\u0275property"]("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](5,15,"com.bmc.arsys.rx.client.dataload.import.import-job-description.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,17,"com.bmc.arsys.rx.client.dataload.import.data-file.label")),n["\u0275\u0275property"]("required",!0)("showMaxSizeRestriction",!1)("allowedTypes",t.getAllowedTypes()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isZipAttachmentUploaded),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isZipAttachmentUploaded),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",t.uploadDataFileForm.pristine||t.uploadDataFileForm.invalid||t.isCustomizedImportStarted),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](12,19,"com.bmc.arsys.rx.client.dataload.import.wizard.quick-data-import.label")," "))},directives:[f.RxBusyIndicatorComponent,s["\u0275NgNoValidate"],s.NgControlStatusGroup,s.FormGroupDirective,g.AdaptRxTextfieldComponent,s.NgControlStatus,s.FormControlName,g.AdaptRxUploaderComponent,s.RequiredValidator,o.NgIf,g.AdaptButtonComponent],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]{position:relative;display:block;height:100%}"]});class ve{constructor(e,t,i,n,o,r,a,s,l,d,c){this.componentFactoryResolver=e,this.rxModalService=t,this.rxDefinitionNameService=i,this.rxNotificationService=n,this.rxWizardService=o,this.translateService=r,this.rxRecordInstanceService=a,this.adaptModalService=s,this.rxJsonParserService=l,this.dataImportService=d,this.rxRecordInstanceDataPageService=c,this.hostClass="d-flex mh-100 flex-column"}ngOnInit(){this.gridConfig$=(0,d.of)({guid:"dl-import-grid",actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.grid.load-data.label"),style:"tertiary",iconCls:"arrow_right_square_input",actions:[{name:()=>{this.loadDataFromSelectedRecords()}}],disabled:()=>!(0,m.some)(this.grid.api.getSelectedRows(),this.isNewOrStoppedRecord)},{label:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.clone-configuration.label"),style:"tertiary",icon:"files_copy_o",actions:[{name:()=>{this.cloneDataImportConfiguration()}}],disabled:()=>1!==this.grid.api.getSelectedRows().length},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.deleteSelectedDataRecords()}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.archive.label"),style:"tertiary",iconCls:"file_o_archive",actions:[{name:()=>{this.archiveSelectedDataRecords()}}],disabled:()=>this.areAllSelectedArchived()},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.stop.label"),style:"tertiary",iconCls:"pause",actions:[{name:()=>this.stopSelectedRecordProcessing()}],disabled:()=>!(0,m.some)(this.grid.api.getSelectedRows(),this.isProcessingOrQueuedRecord)}],recordDefinitionName:pe.recordDefinitionName,enableRowSelection:c.RowSelectionMode.Multiple,columns:this.getColumns(),getData:e=>this.getData(e),styles:"flex-fill"})}getData(e){return this.rxRecordInstanceDataPageService.post({params:Object.assign({},(0,m.omit)(Object.assign(Object.assign({},e),{propertySelection:[String(pe.fields.importJobName),String(pe.fields.uploadedOn),String(pe.fields.importJobDescription),String(pe.fields.dataFile),String(pe.fields.attachmentOut),String(p.RX_RECORD_DEFINITION.coreFieldIds.status),String(pe.fields.isArchived),String(pe.fields.mappingConfig),String(p.RX_RECORD_DEFINITION.coreFieldIds.id)]}),["searchText"]))})}isNewOrStoppedRecord(e){return e[p.RX_RECORD_DEFINITION.coreFieldIds.status]===pe.dataStatuses.new||e[p.RX_RECORD_DEFINITION.coreFieldIds.status]===pe.dataStatuses.stopped}areAllSelectedArchived(){return(0,m.every)(this.grid.api.getSelectedRows(),e=>1===e[pe.fields.isArchived])}newDataImport(e=null){this.dataloadWizardContext={clonedConfigurationInstanceId:e,createdRecordInstanceId:null,isClonedConfigMatched:!1,dataImportContext:{dataImportConfigurations:{sheets:[]}},excelSheetsConfiguration:{}},this.rxWizardService.open({context:this.dataloadWizardContext,options:{title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.title"),finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),steps:[{id:pe.uploadFileStepId,name:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.steps.upload-data-file.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(ge),handlesNext:!0},pe.temporaryStepConfig]}}).then(e=>{e?this.savePrepareDataImportConfiguration():this.grid.api.refresh().subscribe()})}loadDataFromSelectedRecords(){(0,m.filter)(this.grid.api.getSelectedRows(),this.isNewOrStoppedRecord).length<this.grid.api.getSelectedRows().length?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.already-loaded-data-warning.message")}).then(e=>{e&&this.loadDataFromFile()}):this.loadDataFromFile()}isProcessingOrQueuedRecord(e){return e[p.RX_RECORD_DEFINITION.coreFieldIds.status]===pe.dataStatuses.processing||e[p.RX_RECORD_DEFINITION.coreFieldIds.status]===pe.dataStatuses.queued}stopSelectedRecordProcessing(){(0,m.filter)(this.grid.api.getSelectedRows(),this.isProcessingOrQueuedRecord).length!==this.grid.api.getSelectedRows().length?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.stop-data-processing-warning.message")}).then(e=>{e&&this.stopRecordProcessing()}):this.stopRecordProcessing()}stopRecordProcessing(){const e=(0,m.filter)(this.grid.api.getSelectedRows(),this.isProcessingOrQueuedRecord).map(e=>this.dataImportService.stopDataProcessing(e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.grid.api.refresh().subscribe()})}deleteSelectedDataRecords(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.delete-import-record-confirmation.message")}).then(e=>{if(e){const e=(0,m.map)(this.grid.api.getSelectedRows(),e=>this.rxRecordInstanceService.delete(pe.recordDefinitionName,e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.delete-import-record-success.message")),this.grid.api.refresh().subscribe()})}})}archiveSelectedDataRecords(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.archive-records-warning.message")}).then(e=>{if(e){const e=(0,m.filter)(this.grid.api.getSelectedRows(),{[pe.fields.isArchived]:0}).map(e=>this.rxRecordInstanceService.get(pe.recordDefinitionName,e[p.RX_RECORD_DEFINITION.coreFieldIds.id]).pipe((0,v.switchMap)(t=>(t.id=e[p.RX_RECORD_DEFINITION.coreFieldIds.id],t.displayId=e[p.RX_RECORD_DEFINITION.coreFieldIds.displayId],t.setFieldValue(pe.fields.isArchived,pe.archiveTrueValue),this.rxRecordInstanceService.save(t)))));(0,d.forkJoin)(e).subscribe(()=>{this.grid.api.refresh().subscribe()})}})}cloneDataImportConfiguration(){this.newDataImport(this.grid.api.getFirstSelectedRow()[p.RX_RECORD_DEFINITION.coreFieldIds.id])}loadDataFromFile(){const e=(0,m.filter)(this.grid.api.getSelectedRows(),this.isNewOrStoppedRecord).map(e=>this.dataImportService.runLoadProcess(e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.grid.api.refresh().subscribe()})}getRecordNames(e){return(0,m.map)((0,m.get)(this.rxJsonParserService.tryParseJson(e[pe.fields.mappingConfig]),"dataImportConfigurations.sheets"),"configurations.definitionMappings.targetDefinition.name").filter(Boolean).map(e=>this.rxDefinitionNameService.getDisplayName(e)).join(", ")}showStatusInfo(e){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label"),content:me,data:{dataRecordId:e[p.RX_RECORD_DEFINITION.coreFieldIds.id]},size:"lg"}).catch(m.noop)}getColumns(){return[{fieldId:String(pe.fields.importJobName),title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")},{fieldId:String(pe.fields.uploadedOn),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.wizard.steps.uploaded-on.label")},{fieldId:String(pe.fields.importJobDescription),title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")},{fieldId:String(pe.fields.mappingConfig),title:this.translateService.instant("com.bmc.arsys.rx.client.common.definitions.label"),cellTemplate:this.recordNamesCellTemplate,sortable:!1},{fieldId:String(pe.fields.dataFile),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.grid.data-load-input.title"),sortable:!1,filterable:!1,clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(pe.recordDefinitionName,pe.fields.dataFile,t[p.RX_RECORD_DEFINITION.coreFieldIds.id],t[pe.fields.dataFile])}}]},{fieldId:String(pe.fields.attachmentOut),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.import.grid.data-load-result.title"),sortable:!1,filterable:!1,clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(pe.recordDefinitionName,pe.fields.attachmentOut,t[p.RX_RECORD_DEFINITION.coreFieldIds.id],t[pe.fields.attachmentOut])}}]},{fieldId:String(p.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label")},{fieldId:String(pe.fields.isArchived),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.grid.column.archived-record.title")},{fieldId:String(pe.fields.message),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.grid.column.status-message.title"),cellTemplate:this.statusInfoCellTemplate,alignment:c.RecordGridColumnAlignment.Center,filterable:!1,sortable:!1},{fieldId:String(p.RX_RECORD_DEFINITION.coreFieldIds.id),visible:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label")}]}savePrepareDataImportConfiguration(){this.rxRecordInstanceService.get(pe.recordDefinitionName,this.dataloadWizardContext.createdRecordInstanceId).pipe((0,v.switchMap)(e=>(e.setFieldValue(pe.fields.mappingConfig,JSON.stringify(this.dataloadWizardContext.dataImportContext)),e.setFieldValue(pe.fields.importJobName,this.dataloadWizardContext.importJobInfo.importJobName),e.setFieldValue(pe.fields.importJobDescription,this.dataloadWizardContext.importJobInfo.importJobDescription),e.setFieldValue(pe.fields.attachmentType,this.dataloadWizardContext.importJobInfo.attachmentType),e.setFieldValue(pe.fields.archivedWorksheetFileName,this.dataloadWizardContext.importJobInfo.archivedWorksheetFileName),this.rxRecordInstanceService.save(e))),(0,v.switchMap)(()=>this.grid.api.refresh())).subscribe()}}ve.\u0275fac=function(e){return new(e||ve)(n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](b.RxWizardService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](p.RxRecordInstanceService),n["\u0275\u0275directiveInject"](g.AdaptModalService),n["\u0275\u0275directiveInject"](u.RxJsonParserService),n["\u0275\u0275directiveInject"](ue),n["\u0275\u0275directiveInject"](p.RxRecordInstanceDataPageService))},ve.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ve,selectors:[["dl-data-import"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](X,5),n["\u0275\u0275viewQuery"](W,7),n["\u0275\u0275viewQuery"](H,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.grid=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordNamesCellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.statusInfoCellTemplate=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.hostClass)},decls:9,vars:4,consts:[["adapt-button","","type","button","btn-type","tertiary","rx-id","new-import-button",1,"d-icon-plus_circle","px-0","align-self-start",3,"click"],[3,"config"],["grid",""],["recordNamesCellTemplate",""],["statusInfoCellTemplate",""],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275listener"]("click",function(){return t.newDataImport()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-record-grid",1,2),n["\u0275\u0275template"](5,Q,1,1,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,K,3,3,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.dataload.import.new-import.title"),"\n"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("config",t.gridConfig$))},directives:[g.AdaptButtonComponent,c.RecordGridComponent],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]{display:block;padding:1rem;height:100%}[_nghost-%COMP%]  rx-record-grid{height:100%}"]});class ye{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"dl-dataload-data-import",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ve),name:"Data import",isPageComponent:!0,availableInBundles:[a.RX_APPLICATION.dataloadBundleId]})}}ye.\u0275fac=function(e){return new(e||ye)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](r.RxViewComponentRegistryService))},ye.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ye,declarations:[ve,me,ge,he],imports:[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,g.AdaptPopoverModule,y.AdaptTableModule,f.RxLineLoaderModule,g.AdaptRxTextfieldModule,g.AdaptRxUploaderModule,g.AdaptRxSelectModule,s.ReactiveFormsModule,g.AdaptTabsModule,g.AdaptRxRadiobuttonModule,b.RxDefinitionPickerModule,g.AdaptRxLabelModule,g.AdaptAlertModule,g.AdaptRxCheckboxModule,f.RxBusyIndicatorModule]}),ye.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,g.AdaptPopoverModule,y.AdaptTableModule,f.RxLineLoaderModule,g.AdaptRxTextfieldModule,g.AdaptRxUploaderModule,g.AdaptRxSelectModule,s.ReactiveFormsModule,g.AdaptTabsModule,g.AdaptRxRadiobuttonModule,b.RxDefinitionPickerModule,g.AdaptRxLabelModule,g.AdaptAlertModule,g.AdaptRxCheckboxModule,f.RxBusyIndicatorModule]]});const be="com.bmc.arsys.rx.dataload:Data Export Form",xe=1,Ce="associationDefinitionDataFilter",Se={name:536870913,generatedFile:536870914,startTime:536870915,endTime:536870916,progressDetail:536870917,message:536870918,configurations:536870919,isArchive:536870920,fileName:536870921,configDescription:536870922},De={new:0,processing:1,processed:2,failed:3};class Ie{constructor(e,t,i,n,o){this.datePipe=e,this.rxTranslateService=t,this.rxJsonParserService=i,this.activeModalRef=n,this.rxRecordInstanceDataPageService=o,this.statusData$=this.rxRecordInstanceDataPageService.post({params:{[p.RX_RECORD_DEFINITION.coreFieldIds.id]:this.activeModalRef.getData().dataRecordId,recorddefinition:be}}).pipe((0,v.map)(e=>{e.data[0][p.RX_RECORD_DEFINITION.coreFieldIds.status]===De.processing&&(this.processStartInfo=`${this.rxTranslateService.instant("com.bmc.arsys.rx.client.dataload.process-started.message")} ${this.datePipe.transform(e.data[0][p.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate],"medium")}`);const t=(0,m.get)(this.rxJsonParserService.tryParseJson(e.data[0][Se.message],[]),"dataExportProgressStatus");return t?(0,m.map)(t,e=>Object.assign(Object.assign({},e),{updateTime:this.datePipe.transform(e.updateTime,"medium")})):(this.exportConfiguredNotProcessedMsg=e.data[0][Se.message],[])})),this.columns=[{field:"updateTime",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.dataload.status-info-grid.column.updated-date.title"),sortable:!1,width:"20%"},{field:"status",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.common.status.label"),width:"20%"},{field:"message",header:this.rxTranslateService.instant("com.bmc.arsys.rx.client.common.message.label"),width:"80%"}]}close(){this.activeModalRef.close()}}Ie.\u0275fac=function(e){return new(e||Ie)(n["\u0275\u0275directiveInject"](o.DatePipe),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](u.RxJsonParserService),n["\u0275\u0275directiveInject"](g.ActiveModalRef),n["\u0275\u0275directiveInject"](p.RxRecordInstanceDataPageService))},Ie.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ie,selectors:[["dl-export-record-status-info"]],decls:8,vars:7,consts:[["loaderTemplate",""],[4,"ngIf","ngIfElse"],[1,"modal-footer"],["adapt-button","","btn-type","secondary","rx-id","close-button","type","button",3,"click"],[1,"data-status-info"],[4,"ngIf"],[3,"config",4,"ngIf"],["rx-id","exported-status-info-grid",3,"hidden","columns","bordered","value","wrapCellText"],[3,"config"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,J,1,0,"ng-template",null,0,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](2,ee,5,7,"div",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementStart"](4,"div",2),n["\u0275\u0275elementStart"](5,"button",3),n["\u0275\u0275listener"]("click",function(){return t.close()}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](1);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](3,3,t.statusData$))("ngIfElse",e),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,5,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[o.NgIf,g.AdaptButtonComponent,f.RxLineLoaderComponent,y.AdaptTableComponent,g.AdaptAlertComponent],pipes:[o.AsyncPipe,l.TranslatePipe],styles:[".data-status-info[_ngcontent-%COMP%]{padding:15px}"]});class Re extends a.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(l.TranslateService),this.rxDefinitionNameService=this.injector.get(a.RxDefinitionNameService),this.rxRecordDefinitionCacheService=this.injector.get(p.RxRecordDefinitionCacheService),this.rxAssociationDefinitionCacheService=this.injector.get(x.RxAssociationDefinitionCacheService),this.commonDataDictionary$=(0,d.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"}]}])}geDataDefinitionField(e,t){return t?(0,d.iif)(()=>"record"===e,this.rxRecordDefinitionCacheService.getRecordDefinition(t),this.rxAssociationDefinitionCacheService.getAssociationDefinition(t).pipe((0,v.map)(e=>e.nodeAId),(0,v.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e)))).pipe((0,v.withLatestFrom)(this.commonDataDictionary$),(0,v.map)(([e,t])=>[...t,{label:this.rxDefinitionNameService.getDisplayName(e.name),children:e.fieldDefinitions.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`}))}])):(0,d.of)([])}}class we{constructor(e,t){this.activeModalRef=e,this.rxRecordInstanceDataPageService=t,this.gridContext=this.activeModalRef.getData()}ngOnInit(){this.gridConfig=(0,d.of)({recordDefinitionName:this.gridContext.definitionName,enableRowSelection:c.RowSelectionMode.Multiple,columns:(0,m.sortBy)(this.gridContext.selectedFields,"visibleOnPreviewPriority").map((e,t)=>({title:e.name,fieldId:e.id.toString(),visible:t<9})),styles:"flex-fill h-100",getData:e=>this.getData(e)})}getData(e){return e.queryExpression=[e.queryExpression,this.gridContext.queryFilter].filter(Boolean).join("AND"),this.rxRecordInstanceDataPageService.post({params:(0,m.omit)(Object.assign({},e),["searchText"])})}close(){this.activeModalRef.dismiss(g.DismissReasons.CLOSE_BTN)}}we.\u0275fac=function(e){return new(e||we)(n["\u0275\u0275directiveInject"](g.ActiveModalRef),n["\u0275\u0275directiveInject"](p.RxRecordInstanceDataPageService))},we.\u0275cmp=n["\u0275\u0275defineComponent"]({type:we,selectors:[["dl-export-data-preview"]],decls:6,vars:4,consts:[[1,"p-4","data-preview-modal-body"],[3,"config"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"rx-record-grid",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"button",3),n["\u0275\u0275listener"]("click",function(){return t.close()}),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",t.gridConfig),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,2,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[c.RecordGridComponent,g.AdaptButtonComponent],pipes:[l.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.data-preview-modal-body[_ngcontent-%COMP%]{overflow:auto;flex-grow:1;height:645px}']});class Ee extends f.RxModalClass{constructor(e,t,i,n,o,r,a,s,l,c,p){super(c,p),this.rxFieldDefinitionService=e,this.rxRecordInstanceService=t,this.rxRecordDefinitionService=i,this.adaptModalService=n,this.rxNotificationService=o,this.rxExpressionEditorService=r,this.translateService=a,this.changeDetectorRef=s,this.definitionNameService=l,this.dockedPanelContext=c,this.injector=p,this.index$=new d.BehaviorSubject(null),this.recordDefinitionNames$=[],this.definitionFields$=[],this.destroyed$=new d.ReplaySubject(1),this.exportConfiguration={exportConfigName:null,exportConfigDescription:null,definitions:[]},this.recordPickerOptions={label:"",definitionType:b.RxDefinitionPickerType.Record,availableDefinitionPickerStates:{definitionButtonsGroups:[b.RX_DEFINITION_PICKER.definitionScopes.all],search:b.RX_DEFINITION_PICKER.definitionScopes.all},required:!0},this.associationPickerOptions={label:"",definitionType:b.RxDefinitionPickerType.Association,availableDefinitionPickerStates:{definitionButtonsGroups:[b.RX_DEFINITION_PICKER.definitionScopes.all],search:b.RX_DEFINITION_PICKER.definitionScopes.all},required:!0},this.definitionTypes={record:"record",association:"association"},this.definitionTypeOptions=[{value:this.definitionTypes.record,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.record.label")},{value:this.definitionTypes.association,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.association.label")}]}ngOnInit(){super.ngOnInit(),this.expressionConfigurator=new Re(this.injector),this.expressionConfigurator.configureForProperty({propertyPath:Ce,dataDictionary$:this.index$.pipe((0,v.switchMap)(e=>this.recordDefinitionNames$[e].pipe((0,v.switchMap)(t=>this.expressionConfigurator.geDataDefinitionField(this.exportConfiguration.definitions[e].type,t))))),operators:this.expressionConfigurator.getOperatorRowsByGroup(a.ExpressionOperatorGroup.All)}),this.dataFilterExpressionOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.new-configuration.data-filters.label"),dataDictionary$:this.expressionConfigurator.getDataDictionary(Ce),operators:this.expressionConfigurator.getOperators(Ce)}}addDefinition(){this.markAsDirty();const e=this.exportConfiguration.definitions.length;this.recordDefinitionNames$[e]=new d.BehaviorSubject(null),this.definitionFields$[e]=this.recordDefinitionNames$[e].pipe((0,v.takeUntil)(this.destroyed$),(0,v.switchMap)(t=>(0,d.iif)(()=>t&&this.exportConfiguration.definitions[e].type===this.definitionTypes.record,this.rxRecordDefinitionService.get(t),(0,d.of)({fieldDefinitions:[]}))),(0,v.map)(e=>e.fieldDefinitions.sort((e,t)=>this.rxFieldDefinitionService.isCoreField(e)?-1:this.rxFieldDefinitionService.isCoreField(t)?1:e.fieldOption===p.RX_RECORD_DEFINITION.fieldOptions.required?-1:t.fieldOption===p.RX_RECORD_DEFINITION.fieldOptions.required?1:Number(e.id)-Number(t.id)).map((e,t)=>({name:e.name,id:e.id,disabled:e.fieldOption===p.RX_RECORD_DEFINITION.fieldOptions.required&&null===e.defaultValue,visibleOnPreviewPriority:t}))),(0,v.tap)(t=>{this.exportConfiguration.definitions[e].criteria.fields=t.filter(e=>e.disabled).map(e=>Object.assign({},e))})),this.exportConfiguration.definitions.push({type:"record",name:null,criteria:{filter:null,fields:[]}})}remove(e){this.exportConfiguration.definitions.splice(e,1)}cancel(){this.dockedPanelContext.dismiss(g.DismissReasons.CLOSE_BTN)}onDefinitionChange(e,t){e&&!this.definitionNameService.getBundleId(e)?(this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.global-record-not-allowed.message")),this.changeDetectorRef.detectChanges(),this.exportConfiguration.definitions[t].name=null):(this.exportConfiguration.definitions[t].criteria.filter=null,this.index$.next(t),this.recordDefinitionNames$[t].next(e))}onExpressionEvent(e){this.index$.next(e),this.rxExpressionEditorService.openEditor({property:{path:Ce,value:this.exportConfiguration.definitions[e].criteria.filter,label:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.new-configuration.data-filters.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.expression-editor.legend.activity-result.label"),icon:"d-icon-field_text"}]}).subscribe(t=>{this.exportConfiguration.definitions[e].criteria.filter=t.value||null})}isSaveButtonDisabled(){return this.isSaveInProgress||!this.exportConfiguration.definitions.length||(0,m.some)(this.exportConfiguration.definitions,e=>e.type===this.definitionTypes.record&&(!e.name||!e.criteria.fields.length)||e.type===this.definitionTypes.association&&!e.name)}saveExportConfiguration(){this.isSaveInProgress=!0,this.rxRecordInstanceService.getNew(be).pipe((0,v.switchMap)(e=>(e.setFieldValue(Se.name,this.exportConfiguration.exportConfigName),e.setFieldValue(Se.configDescription,this.exportConfiguration.exportConfigDescription),e.setFieldValue(Se.configurations,JSON.stringify({definitions:(0,m.map)((0,m.cloneDeep)(this.exportConfiguration.definitions),e=>(e.criteria.fields=(0,m.map)(e.criteria.fields,e=>({id:e.id,name:e.name})),e))})),this.rxRecordInstanceService.create(e))),(0,v.finalize)(()=>{this.isSaveInProgress=!1})).subscribe(()=>{this.dockedPanelContext.close(null)})}clearFieldsSelection(e){this.exportConfiguration.definitions[e].name=null,this.exportConfiguration.definitions[e].criteria.filter=null,this.exportConfiguration.definitions[e].criteria.fields=[]}openExportingDataPreview(e){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.new-configuration.preview-data.label"),content:we,size:"lg",data:{definitionName:e.name,selectedFields:e.criteria.fields,queryFilter:e.criteria.filter}}).catch(m.noop)}isPreviewDisabled(e){return!e.name||!e.criteria.fields.length}ngOnDestroy(){(0,m.forEach)(this.recordDefinitionNames$,e=>e.complete()),this.index$.complete(),this.destroyed$.next(),this.destroyed$.complete()}optionFormatter(e){return e.name}}Ee.\u0275fac=function(e){return new(e||Ee)(n["\u0275\u0275directiveInject"](p.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](p.RxRecordInstanceService),n["\u0275\u0275directiveInject"](p.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](g.AdaptModalService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](b.RxExpressionEditorService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](g.DockedPanelContext),n["\u0275\u0275directiveInject"](n.Injector))},Ee.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ee,selectors:[["dl-data-export-configuration"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:23,consts:[[1,"dp-body"],["rx-id","export-config-name","name","exportConfigName","maxlength","254",1,"form-group","d-block",3,"label","ngModel","required","autofocus","ngModelChange"],["exportConfigName","ngModel"],["rx-id","export-config-description","name","exportConfigDescription","maxlength","254",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["exportConfigDescription","ngModel"],["adapt-button","","type","button","btn-type","tertiary","rx-id","add-definition-button",1,"d-icon-plus_circle","px-0",3,"click"],[3,"multiselect"],["class","position-relative form-group",4,"ngFor","ngForOf"],[1,"dp-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"adaptInlineLoader","disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"],[1,"position-relative","form-group"],[1,"actions"],["adapt-button","","size","small","type","button",1,"d-icon-left-cross_adapt","py-0","pr-3","btn","btn-sm",3,"click"],["isOpen","true",1,"w-100","d-block"],[3,"ngModel","label","required","ngModelChange"],["class","radio-inline m-0",3,"value","label","ngClass","checkedChange",4,"ngFor","ngForOf"],["class","d-block form-group","rx-id","record-definition-picker",3,"options","ngModel","ngModelChange",4,"ngIf"],["class","d-block form-group","rx-id","association-definition-picker",3,"options","ngModel","ngModelChange",4,"ngIf"],[3,"hidden"],[4,"ngIf"],["rx-id","data-filter",1,"d-block","form-group",3,"options","ngModel","ngModelChange","events"],["type","button","adapt-button","","btn-type","secondary","rx-id","preview-button",3,"disabled","click",4,"ngIf"],[1,"radio-inline","m-0",3,"value","label","ngClass","checkedChange"],["rx-id","record-definition-picker",1,"d-block","form-group",3,"options","ngModel","ngModelChange"],["rx-id","association-definition-picker",1,"d-block","form-group",3,"options","ngModel","ngModelChange"],["class","d-block form-group",3,"ngModel","label","options","required","multiple","enableFilter","selectAllButton","deselectAllButton","optionFormatter","ngModelChange",4,"ngIf"],[1,"d-block","form-group",3,"ngModel","label","options","required","multiple","enableFilter","selectAllButton","deselectAllButton","optionFormatter","ngModelChange"],["type","button","adapt-button","","btn-type","secondary","rx-id","preview-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"adapt-rx-textfield",1,2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.exportConfiguration.exportConfigName=e})("ngModelChange",function(){return t.markAsDirty()}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"adapt-rx-textfield",3,4),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.exportConfiguration.exportConfigDescription=e})("ngModelChange",function(){return t.markAsDirty()}),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",5),n["\u0275\u0275listener"]("click",function(){return t.addDefinition()}),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-accordion",6),n["\u0275\u0275template"](11,se,16,18,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275elementStart"](13,"button",9),n["\u0275\u0275listener"]("click",function(){return t.saveExportConfiguration()}),n["\u0275\u0275text"](14),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"button",10),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](2),i=n["\u0275\u0275reference"](5);n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](3,13,"com.bmc.arsys.rx.client.common.name.label")),n["\u0275\u0275property"]("ngModel",t.exportConfiguration.exportConfigName)("required",!0)("autofocus",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](6,15,"com.bmc.arsys.rx.client.common.description.label")),n["\u0275\u0275property"]("ngModel",t.exportConfiguration.exportConfigDescription),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,17,"com.bmc.arsys.rx.client.dataload.export.new-configuration.add-definition-button.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.exportConfiguration.definitions),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("adaptInlineLoader",t.isSaveInProgress)("disabled",e.invalid||i.invalid||t.isSaveButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](15,19,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](18,21,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[g.AdaptRxTextfieldComponent,s.MaxLengthValidator,s.NgControlStatus,s.NgModel,s.RequiredValidator,g.AdaptButtonComponent,g.AdaptAccordionComponent,o.NgForOf,g.AdaptInlineStandaloneDirective,g.AdaptAccordionTabComponent,g.AdaptRxRadiobuttonGroupComponent,o.NgIf,b.ExpressionFormControlComponent,g.AdaptRxRadiobuttonComponent,o.NgClass,b.RxDefinitionPickerComponent,g.AdaptRxSelectComponent],pipes:[l.TranslatePipe,o.AsyncPipe],styles:[".actions[_ngcontent-%COMP%]{position:absolute;top:4px;right:35px;z-index:1}"]});class Fe{constructor(e,t,i,n,o,r,a,s){this.dataExportService=e,this.rxModalService=t,this.translateService=i,this.rxDefinitionNameService=n,this.adaptModalService=o,this.rxJsonParserService=r,this.rxNotificationService=a,this.rxRecordInstanceService=s,this.hostClass="d-flex mh-100 flex-column"}ngOnInit(){this.gridConfig$=(0,d.of)({guid:"dl-export-grid",actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.export-data.label"),style:"tertiary",iconCls:"arrow_right_square_input",actions:[{name:()=>this.startDataExportProcess()}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.archive.label"),style:"tertiary",iconCls:"file_o_archive",actions:[{name:()=>{this.archiveExportRecords()}}],disabled:()=>(0,m.every)(this.grid.api.getSelectedRows(),e=>e[Se.isArchive]===xe)},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.deleteExportRecords()}}]}],recordDefinitionName:be,enableRowSelection:c.RowSelectionMode.Multiple,columns:this.getColumns(),styles:"flex-fill"})}startDataExportProcess(){this.grid.api.getSelectedRows().filter(e=>e[p.RX_RECORD_DEFINITION.coreFieldIds.status]===De.new).length!==this.grid.api.getSelectedRows().length?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.data-already-exported-warning.message")}).then(e=>{e&&this.startDataExport()}):this.startDataExport()}startDataExport(){const e=(0,m.map)(this.grid.api.getSelectedRows(),e=>this.dataExportService.startDataExport(e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.grid.api.refresh().subscribe()})}getRecordNames(e){return(0,m.map)((0,m.get)(this.rxJsonParserService.tryParseJson(e[Se.configurations],[]),"definitions"),"name").filter(Boolean).map(e=>this.rxDefinitionNameService.getDisplayName(e)).join(", ")}deleteExportRecords(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.delete-data-warning.message")}).then(e=>{if(e){const e=(0,m.map)(this.grid.api.getSelectedRows(),e=>this.rxRecordInstanceService.delete(be,e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.delete-export-record-success.message")),this.grid.api.refresh().subscribe()})}})}archiveExportRecords(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.archive-records-warning.message")}).then(e=>{if(e){const e=(0,m.filter)(this.grid.api.getSelectedRows(),{[Se.isArchive]:0}).map(e=>this.rxRecordInstanceService.get(be,e[p.RX_RECORD_DEFINITION.coreFieldIds.id]).pipe((0,v.switchMap)(t=>(t.id=e[p.RX_RECORD_DEFINITION.coreFieldIds.id],t.displayId=e[p.RX_RECORD_DEFINITION.coreFieldIds.displayId],t.setFieldValue(Se.isArchive,xe),this.rxRecordInstanceService.save(t)))));(0,d.forkJoin)(e).subscribe(()=>{this.grid.api.refresh().subscribe()})}})}newExport(){this.rxModalService.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.new-configuration.label"),content:Ee,data:{}}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}showStatusInfo(e){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label"),content:Ie,data:{dataRecordId:e[p.RX_RECORD_DEFINITION.coreFieldIds.id]},size:"lg"}).catch(m.noop)}getColumns(){return[{fieldId:String(Se.name),title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")},{fieldId:String(Se.endTime),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.grid.column.exported-on.title")},{fieldId:String(Se.configDescription),title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")},{fieldId:String(Se.configurations),title:this.translateService.instant("com.bmc.arsys.rx.client.common.definitions.label"),sortable:!1,cellTemplate:this.recordNamesCellTemplate},{fieldId:String(Se.generatedFile),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.export.grid.column.export-output-file.title"),sortable:!1,filterable:!1,clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(be,Se.generatedFile,t[p.RX_RECORD_DEFINITION.coreFieldIds.id],t[Se.generatedFile])}}]},{fieldId:String(p.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.common.status.label")},{fieldId:String(Se.isArchive),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.grid.column.archived-record.title")},{fieldId:String(Se.message),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.grid.column.status-message.title"),sortable:!1,filterable:!1,cellTemplate:this.statusInfoCellTemplate},{fieldId:String(p.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1}]}}Fe.\u0275fac=function(e){return new(e||Fe)(n["\u0275\u0275directiveInject"](fe),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](a.RxDefinitionNameService),n["\u0275\u0275directiveInject"](g.AdaptModalService),n["\u0275\u0275directiveInject"](u.RxJsonParserService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](p.RxRecordInstanceService))},Fe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fe,selectors:[["dl-data-export"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](X,5),n["\u0275\u0275viewQuery"](W,7),n["\u0275\u0275viewQuery"](H,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.grid=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordNamesCellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.statusInfoCellTemplate=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.hostClass)},decls:9,vars:4,consts:[["adapt-button","","type","button","btn-type","tertiary","rx-id","new-export-button",1,"d-icon-plus_circle","px-0","align-self-start",3,"click"],[3,"config"],["grid",""],["recordNamesCellTemplate",""],["statusInfoCellTemplate",""],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275listener"]("click",function(){return t.newExport()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-record-grid",1,2),n["\u0275\u0275template"](5,le,1,1,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,de,3,3,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.dataload.export.new.label"),"\n"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("config",t.gridConfig$))},directives:[g.AdaptButtonComponent,c.RecordGridComponent],pipes:[l.TranslatePipe],styles:[ce]});class Me{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"dl-dataload-data-export",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Fe),name:"Data export",isPageComponent:!0,availableInBundles:[a.RX_APPLICATION.dataloadBundleId]})}}Me.\u0275fac=function(e){return new(e||Me)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](r.RxViewComponentRegistryService))},Me.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Me,declarations:[Fe,Ie,Ee,we],imports:[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,f.RxLineLoaderModule,g.AdaptAlertModule,y.AdaptTableModule,s.ReactiveFormsModule,g.AdaptRxTextfieldModule,g.AdaptAccordionModule,b.RxDefinitionPickerModule,g.AdaptRxRadiobuttonModule,g.AdaptRxSelectModule,b.ExpressionFormControlModule,g.AdaptBusyModule]}),Me.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,f.RxLineLoaderModule,g.AdaptAlertModule,y.AdaptTableModule,s.ReactiveFormsModule,g.AdaptRxTextfieldModule,g.AdaptAccordionModule,b.RxDefinitionPickerModule,g.AdaptRxRadiobuttonModule,g.AdaptRxSelectModule,b.ExpressionFormControlModule,g.AdaptBusyModule]]});const Te="com.bmc.arsys.rx.dataload:Data Load Template",Oe={templateName:8,dataLoadTemplateVersion:304412331,dataloadTemplateDescription:304412341,template:304412351,isActive:304412361,bundleFriendlyName:304412371,bundleId:61001},Ne={xlsx:"xlsx",zip:"zip"};class Ae extends f.RxModalClass{constructor(e,t,i,n,o,r,s){super(r,o),this.translateService=e,this.rxNotificationService=t,this.rxGlobalCacheService=i,this.rxRecordInstanceService=n,this.injector=o,this.dockedPanelContext=r,this.formBuilder=s,this.destroyed$=new d.ReplaySubject(1),this.isEditMode=this.dockedPanelContext.getData().isEditMode,this.enableCustomDownload=!0,this.applicationOptions$=this.rxGlobalCacheService.getBundleDescriptors().pipe((0,v.takeUntil)(this.destroyed$),(0,v.map)(e=>e.filter(e=>![a.RX_APPLICATION.innovationStudioBundleId,a.RX_APPLICATION.standardlib].includes(e.id)).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)).map(e=>({displayValue:e.friendlyName,value:e.id})))),this.downloadAttachment=()=>{this.rxRecordInstanceService.downloadAttachment(Te,Oe.template,this.dockedPanelContext.getData().templateRecordInstanceId,this.recordInstance.fieldInstances[Oe.template].value)}}isDirty(){return this.dataTemplateForm.dirty}ngOnInit(){super.ngOnInit(),this.dataTemplateForm=this.formBuilder.group({application:[[],s.Validators.required],templateName:[null,[s.Validators.required,s.Validators.maxLength(254)]],version:[null,[s.Validators.required,s.Validators.maxLength(254)]],isActive:null,description:[null,s.Validators.maxLength(500)],template:[null,s.Validators.required]}),this.dataTemplateForm.get("isActive").setValue(0),this.busy=(0,d.iif)(()=>this.isEditMode,this.rxRecordInstanceService.get(Te,this.dockedPanelContext.getData().templateRecordInstanceId),this.rxRecordInstanceService.getNew(Te)).pipe((0,v.tap)(e=>{this.recordInstance=e,this.isEditMode&&this.setTemplateFormValues()}),(0,v.switchMap)(()=>(0,d.iif)(()=>this.isEditMode,this.applicationOptions$.pipe((0,v.take)(1)),(0,d.of)([]))),(0,v.map)(e=>(0,m.find)(e,{displayValue:this.recordInstance.fieldInstances[Oe.bundleFriendlyName].value})),(0,v.tap)(e=>{this.isEditMode&&this.dataTemplateForm.get("application").setValue([e])})).subscribe()}setTemplateFormValues(){this.dataTemplateForm.get("templateName").setValue(this.recordInstance.fieldInstances[Oe.templateName].value),this.dataTemplateForm.get("version").setValue(this.recordInstance.fieldInstances[Oe.dataLoadTemplateVersion].value),this.dataTemplateForm.get("isActive").setValue(this.recordInstance.fieldInstances[Oe.isActive].value),this.dataTemplateForm.get("description").setValue(this.recordInstance.fieldInstances[Oe.dataloadTemplateDescription].value),this.dataTemplateForm.get("template").setValue([{data:new File([],this.recordInstance.fieldInstances[Oe.template].value),inUploading:!1,inDeleting:!1,uploaded:100,error:!1,errorText:"",allowDeletion:!0}])}optionFormatter(e){return e.displayValue}saveTemplate(){this.recordInstance.setFieldValue(Oe.bundleFriendlyName,this.dataTemplateForm.get("application").value[0].displayValue),this.recordInstance.setFieldValue(Oe.bundleId,this.dataTemplateForm.get("application").value[0].value),this.recordInstance.setFieldValue(Oe.templateName,this.dataTemplateForm.get("templateName").value),this.recordInstance.setFieldValue(Oe.dataLoadTemplateVersion,this.dataTemplateForm.get("version").value),this.recordInstance.setFieldValue(Oe.isActive,this.dataTemplateForm.get("isActive").value),this.recordInstance.setFieldValue(Oe.dataloadTemplateDescription,this.dataTemplateForm.get("description").value),this.recordInstance.setFieldValue(Oe.template,this.dataTemplateForm.get("template").value[0].data),this.isEditMode?this.rxRecordInstanceService.save(this.recordInstance).subscribe(()=>this.successCallback()):this.rxRecordInstanceService.create(this.recordInstance).subscribe(()=>this.successCallback())}onRemovedFileFromQueue(){this.enableCustomDownload=!1}cancel(){this.dockedPanelContext.dismiss(g.DismissReasons.CLOSE_BTN)}successCallback(){this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.templates.template-saved.message")),this.dockedPanelContext.close(null)}getAllowedTypes(){return[Ne.xlsx,Ne.zip]}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}Ae.\u0275fac=function(e){return new(e||Ae)(n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](a.RxGlobalCacheService),n["\u0275\u0275directiveInject"](p.RxRecordInstanceService),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](g.DockedPanelContext),n["\u0275\u0275directiveInject"](s.FormBuilder))},Ae.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ae,selectors:[["dl-data-template-editor"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:47,consts:[[3,"options"],[1,"dp-body"],[3,"formGroup"],["rx-id","application","formControlName","application",1,"form-group","d-block",3,"label","options","optionFormatter","autofocus"],["rx-id","template-name","formControlName","templateName",1,"form-group","d-block",3,"label"],["rx-id","version","formControlName","version",1,"form-group","d-block",3,"label"],["formControlName","isActive",3,"label"],[3,"value","label"],["rx-id","description","formControlName","description","rows","4",1,"form-group","d-block",3,"label"],["formControlName","template",3,"label","showMaxSizeRestriction","enableCustomDownload","customDownload","reusable","allowedTypes","removedFileFromQueue"],[1,"dp-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"rx-busy-indicator",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"form",2),n["\u0275\u0275element"](3,"adapt-rx-select",3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275element"](6,"adapt-rx-textfield",4),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275element"](8,"adapt-rx-textfield",5),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementStart"](10,"adapt-rx-radiobutton-group",6),n["\u0275\u0275pipe"](11,"translate"),n["\u0275\u0275element"](12,"adapt-rx-radiobutton",7),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275element"](14,"adapt-rx-radiobutton",7),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](16,"adapt-rx-textarea",8),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementStart"](18,"adapt-rx-uploader",9),n["\u0275\u0275listener"]("removedFileFromQueue",function(){return t.onRemovedFileFromQueue()}),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](20,"div",10),n["\u0275\u0275elementStart"](21,"button",11),n["\u0275\u0275listener"]("click",function(){return t.saveTemplate()}),n["\u0275\u0275text"](22),n["\u0275\u0275pipe"](23,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](24,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](25),n["\u0275\u0275pipe"](26,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("options",n["\u0275\u0275pureFunction1"](45,q,t.busy)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("formGroup",t.dataTemplateForm),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](4,23,"com.bmc.arsys.rx.client.common.application.label")),n["\u0275\u0275property"]("options",n["\u0275\u0275pipeBind1"](5,25,t.applicationOptions$))("optionFormatter",t.optionFormatter)("autofocus",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](7,27,"com.bmc.arsys.rx.client.dataload.templates.template-name.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](9,29,"com.bmc.arsys.rx.client.common.version.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](11,31,"com.bmc.arsys.rx.client.dataload.templates.is-active-template.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](13,33,"com.bmc.arsys.rx.client.common.yes.label")),n["\u0275\u0275property"]("value",1),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](15,35,"com.bmc.arsys.rx.client.common.no.label")),n["\u0275\u0275property"]("value",0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](17,37,"com.bmc.arsys.rx.client.common.description.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](19,39,"com.bmc.arsys.rx.client.common.template.label")),n["\u0275\u0275property"]("showMaxSizeRestriction",!1)("enableCustomDownload",t.enableCustomDownload)("customDownload",t.downloadAttachment)("reusable",!0)("allowedTypes",t.getAllowedTypes()),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.dataTemplateForm.pristine||t.dataTemplateForm.invalid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](23,41,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](26,43,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.RxBusyIndicatorComponent,s["\u0275NgNoValidate"],s.NgControlStatusGroup,s.FormGroupDirective,g.AdaptRxSelectComponent,s.NgControlStatus,s.FormControlName,g.AdaptRxTextfieldComponent,g.AdaptRxRadiobuttonGroupComponent,g.AdaptRxRadiobuttonComponent,g.AdaptRxTextareaComponent,g.AdaptRxUploaderComponent,g.AdaptButtonComponent],pipes:[l.TranslatePipe,o.AsyncPipe],styles:["[_nghost-%COMP%]     adapt-rx-uploader .adapt-uploader-file-uploaded{display:none}"]});class Pe{constructor(e,t,i,n){this.rxNotificationService=e,this.rxModalService=t,this.translateService=i,this.rxRecordInstanceService=n,this.hostClass="d-flex mh-100 flex-column",this.showDeprecated=!1}ngOnInit(){this.gridConfig$=(0,d.of)({guid:"dl-templates-grid",actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.deleteSelectedDataTemplate()}}]}],recordDefinitionName:Te,enableRowSelection:c.RowSelectionMode.Multiple,columns:this.getColumns(),getRecordDefinition:()=>(0,d.of)(this.getRecordDefinition()),styles:"flex-fill"})}deleteSelectedDataTemplate(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:f.RX_MODAL.modalStyles.default,message:this.translateService.instant("com.bmc.arsys.rx.client.dataload.templates.template-delete-warning.message")}).then(e=>{if(e){const e=(0,m.map)(this.grid.api.getSelectedRows(),e=>this.rxRecordInstanceService.delete(Te,e[p.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,d.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.dataload.templates.template-delete-success.message")),this.grid.api.refresh().subscribe()})}})}getColumns(){return[{fieldId:String(Oe.templateName),title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),clickable:!0,actions:[{name:(e,t)=>{this.editDataTemplate(t)}}]},{fieldId:String(Oe.bundleFriendlyName),title:this.translateService.instant("com.bmc.arsys.rx.client.common.application.label")},{fieldId:String(Oe.dataloadTemplateDescription),title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")},{fieldId:String(Oe.dataLoadTemplateVersion),title:this.translateService.instant("com.bmc.arsys.rx.client.common.version.label")},{fieldId:String(Oe.template),title:this.translateService.instant("com.bmc.arsys.rx.client.common.download.label"),sortable:!1,filterable:!1,clickable:!0,actions:[{name:(e,t)=>{this.rxRecordInstanceService.downloadAttachment(Te,Oe.template,t[p.RX_RECORD_DEFINITION.coreFieldIds.id],t[Oe.template])}}]},{fieldId:String(Oe.isActive),title:this.translateService.instant("com.bmc.arsys.rx.client.dataload.templates.is-active-template.label"),visible:!1},{fieldId:String(p.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1}]}editDataTemplate(e){this.openDockedPanel(!0,e[p.RX_RECORD_DEFINITION.coreFieldIds.id])}createDataTemplate(){this.openDockedPanel(!1)}openDockedPanel(e,t){return this.rxModalService.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.common.template.label"),content:Ae,data:{isEditMode:e,templateRecordInstanceId:t}}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}getRecordDefinition(){return{fieldDefinitions:[{id:Oe.templateName,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character},{id:Oe.bundleFriendlyName,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character},{id:Oe.isActive,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{1:this.translateService.instant("com.bmc.arsys.rx.client.common.yes.label"),0:this.translateService.instant("com.bmc.arsys.rx.client.common.no.label")}},{id:Oe.dataloadTemplateDescription,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character},{id:Oe.dataLoadTemplateVersion,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character},{id:Oe.template,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character},{id:p.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:p.RX_RECORD_DEFINITION.resourceTypes.character}]}}}Pe.\u0275fac=function(e){return new(e||Pe)(n["\u0275\u0275directiveInject"](a.RxNotificationService),n["\u0275\u0275directiveInject"](f.RxModalService),n["\u0275\u0275directiveInject"](l.TranslateService),n["\u0275\u0275directiveInject"](p.RxRecordInstanceService))},Pe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pe,selectors:[["dl-data-templates"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](X,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.hostClass)},decls:5,vars:4,consts:[["adapt-button","","type","button","btn-type","tertiary","rx-id","new-template-button",1,"d-icon-plus_circle","px-0","align-self-start",3,"click"],[3,"config"],["grid",""]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275listener"]("click",function(){return t.createDataTemplate()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-record-grid",1,2)),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.dataload.templates.new-template.label"),"\n"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("config",t.gridConfig$))},directives:[g.AdaptButtonComponent,c.RecordGridComponent],pipes:[l.TranslatePipe],styles:[ce]});class je{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"dl-dataload-data-templates",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Pe),name:"Data templates",isPageComponent:!0,availableInBundles:[a.RX_APPLICATION.dataloadBundleId]})}}je.\u0275fac=function(e){return new(e||je)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](r.RxViewComponentRegistryService))},je.\u0275mod=n["\u0275\u0275defineNgModule"]({type:je,declarations:[Pe,Ae],imports:[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,g.AdaptRxSelectModule,s.ReactiveFormsModule,g.AdaptRxTextfieldModule,g.AdaptRxRadiobuttonModule,g.AdaptRxUploaderModule,g.AdaptRxTextareaModule,f.RxBusyIndicatorModule]}),je.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[g.AdaptButtonModule,o.CommonModule,s.FormsModule,l.TranslateModule,c.RecordGridModule,g.AdaptRxSelectModule,s.ReactiveFormsModule,g.AdaptRxTextfieldModule,g.AdaptRxRadiobuttonModule,g.AdaptRxUploaderModule,g.AdaptRxTextareaModule,f.RxBusyIndicatorModule]]});class _e{}_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_e,imports:[ye,Me,je]}),_e.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[],imports:[[ye,Me,je]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-document-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxDocumentDefinitionDataPageService:()=>s,RxDocumentDefinitionService:()=>l});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),r=i("./node_modules/@angular/common/fesm2015/http.js"),a=i("rxjs");class s extends o.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.document.datapage.DocumentDefinitionDataPageQuery"),this.injector=e}}s.\u0275fac=function(e){return new(e||s)(n["\u0275\u0275inject"](n.Injector))},s.\u0275prov=n["\u0275\u0275defineInjectable"]({token:s,factory:s.\u0275fac,providedIn:"root"});class l{constructor(e,t){this.httpClient=e,this.rxCommandFactoryService=t}get(e,t){return this.httpClient.get(this.getUrl(e),t)}getNew(){return(0,a.of)({allowOverlay:!1,documentSchema:null,name:null,scope:o.RX_BUNDLE.definitionScopeTypes.bundle})}create(e){return this.httpClient.post(this.getUrl(),e,{observe:"response"})}update(e,t){return this.httpClient.put(this.getUrl(e.name),e,t)}delete(e){return this.httpClient.delete(this.getUrl(e))}revertCustomization(e){return this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.document.command.RevertDocumentDefinitionCommand").execute({documentDefinitionName:e})}rename(e,t){return this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.document.command.RenameDocumentDefinitionCommand").execute({name:e,newName:t})}getUrl(e){return e?`/api/rx/application/document/documentdefinition/${encodeURIComponent(e)}`:"/api/rx/application/document/documentdefinition"}}l.\u0275fac=function(e){return new(e||l)(n["\u0275\u0275inject"](r.HttpClient),n["\u0275\u0275inject"](o.RxCommandFactoryService))},l.\u0275prov=n["\u0275\u0275defineInjectable"]({token:l,factory:l.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-document-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{DocumentDesignerPageComponent:()=>Q,DocumentDesignerPageModule:()=>ie});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/router/fesm2015/router.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),s=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),l=i("./node_modules/@angular/forms/fesm2015/forms.js"),d=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),m=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),f=i("lodash"),h=i("rxjs"),g=i("./node_modules/rxjs/_esm2015/operators/index.js"),v=i("./node_modules/@angular/common/fesm2015/common.js"),y=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-document-api.js");function x(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-code-viewer",12),n["\u0275\u0275pipe"](1,"json")),2&e){const e=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("code",n["\u0275\u0275pipeBind1"](1,4,e.definitionForJsonViewer))("lang","javascript")("hasToolbar",!1)("theme","light")}}function C(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"rx-designer-header",1),n["\u0275\u0275listener"]("toggleDesignMode",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onToggleDesignMode()})("save",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()})("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().closeDesigner.emit()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-sidebar",3),n["\u0275\u0275elementStart"](4,"adapt-sidebar-item",4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementStart"](7,"rx-form-builder",5),n["\u0275\u0275listener"]("editorEvent",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onEditorEvent(t)})("formInitialized",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionInspectorInitialized()})("modelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionModelChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"adapt-sidebar-item",6),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementStart"](11,"rx-validation-issues",7),n["\u0275\u0275listener"]("correctIssue",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCorrectIssue(t)}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",8),n["\u0275\u0275element"](14,"adapt-rx-control-label",9),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275element"](16,"textarea",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](17,x,2,6,"adapt-code-viewer",11),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("breadcrumbItems",e.breadcrumbItems)("isDesignMode",!e.definitionForJsonViewer)("isSaveButtonDisabled",e.isSaveButtonDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!!e.definitionForJsonViewer),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("openedId",0),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](5,22,"com.bmc.arsys.rx.client.common.properties.label")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](6,24,"com.bmc.arsys.rx.client.common.properties.label")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("config",e.definitionInspectorConfig)("focusEditor$",i.inspectorFocusEditor$)("isReadOnly",e.isReadOnly)("model",e.definitionModel),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](9,26,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](10,28,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("definitionTypeDisplayName",n["\u0275\u0275pipeBind1"](12,30,"com.bmc.arsys.rx.client.document-definition.label"))("issueSections",e.validationIssues),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](15,32,"com.bmc.arsys.rx.client.document-designer.document-schema.label"))("showRequiredLabel",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("formControl",i.schemaFormControl)("readonly",e.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.definitionForJsonViewer)}}function S(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-document-designer",1),n["\u0275\u0275listener"]("definitionSaved",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionSaved(t)})("definitionErrorLoading",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCloseDesigner()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("configuration",e.configuration)}}class D{getDefinitionFromDefinitionModel(e,t){return{lastUpdateTime:e.lastUpdateTime,lastChangedBy:e.lastChangedBy,owner:e.owner,name:`${t}:${e.name}`,description:e.description,overlayGroupId:e.overlayGroupId,scope:e.customizationOptions.scope,guid:e.guid,allowOverlay:e.customizationOptions.allowOverlay,overlayDescriptor:e.overlayDescriptor,documentSchema:e.documentSchema}}}D.\u0275fac=function(e){return new(e||D)},D.\u0275prov=n["\u0275\u0275defineInjectable"]({token:D,factory:D.\u0275fac,providedIn:"root"});const I=(0,m.createAction)("[Document Designer] Init",(0,m.props)()),R=(0,m.createAction)("[Document Designer] Load Definition"),w=(0,m.createAction)("[Document Designer] Load Definition Success",(0,m.props)()),E=(0,m.createAction)("[Document Designer] Init Definition Model",(0,m.props)()),F=(0,m.createAction)("[Document Designer] Mark Designer Pristine"),M=(0,m.createAction)("[Document Designer] Mark Designer Dirty"),T=(0,m.createAction)("[Document Designer] Update Definition Model From Designer",(0,m.props)()),O=(0,m.createAction)("[Document Designer] Toggle Design Mode"),N=(0,m.createAction)("[Document Designer] Revert Customization"),A=(0,m.createAction)("[Document Designer] Save Definition"),P=(0,m.createAction)("[Document Designer] Save Definition Success",(0,m.props)()),j=(0,m.createAction)("[Document Designer] Save Definition Error"),_=(0,m.createAction)("[Document Designer] Destroy"),V="documentDesigner",k=(0,m.createFeatureSelector)(V),B=(0,m.createSelector)(k,e=>e.model),$=(0,m.createSelector)(B,e=>e.bundleId),L=(0,m.createSelector)(B,e=>e.definitionName),G=(0,m.createSelector)(B,e=>e.isDesignMode),z=(0,m.createSelector)(B,e=>e.definitionModelFromDefinition),U=(0,m.createSelector)(B,e=>e.definitionModel),q=(0,m.createSelector)(B,e=>e.isDirty),X=(0,m.createSelector)(B,e=>e.savedDefinitionName),W=(0,m.createSelector)(B,e=>e.originalDefinition);class H{constructor(e,t,i,o,r,s,d,c){this.store$=e,this.renderer=t,this.rxGlobalCacheService=i,this.rxJsonParserService=o,this.rxNotificationService=r,this.rxOverlayService=s,this.translateService=d,this.documentDesignerService=c,this.definitionSaved=new n.EventEmitter,this.definitionErrorLoading=new n.EventEmitter,this.closeDesigner=new n.EventEmitter,this.schemaFormControl=new l.FormControl("",{updateOn:"blur"}),this.isDirty$=this.store$.select(q),this.definitionModel$=this.store$.select(U),this.isDesignMode$=this.store$.select(G),this.bundleId$=this.store$.select($),this.destroyed$=new h.ReplaySubject(1),this.originalDefinition$=this.store$.select(W),this.inspectorFocusEditorSubject=new h.Subject,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.bundleFriendlyName$=this.bundleId$.pipe((0,g.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.validationIssues$=this.definitionModel$.pipe((0,g.map)(e=>this.validate(e)),(0,g.shareReplay)(1)),this.hasValidationErrors$=this.validationIssues$.pipe((0,g.map)(e=>(0,f.some)(e,{issues:[{type:a.ValidationIssueType.Error}]}))),this.definitionFromDefinitionModel$=this.definitionModel$.pipe((0,g.withLatestFrom)(this.bundleId$),(0,g.map)(([e,t])=>this.documentDesignerService.getDefinitionFromDefinitionModel(e,t))),this.areNewDefinitionsAllowed$=this.store$.select($).pipe((0,g.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e))),this.isReadOnly$=this.definitionFromDefinitionModel$.pipe((0,g.filter)(e=>!!e.lastUpdateTime),(0,g.withLatestFrom)(this.areNewDefinitionsAllowed$),(0,g.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,g.tap)(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),(0,g.startWith)(!1),(0,g.shareReplay)(1)),this.isSaveButtonDisabled$=(0,h.combineLatest)([this.hasValidationErrors$,this.isDirty$,this.isReadOnly$]).pipe((0,g.map)(([e,t,i])=>e||!t||i),(0,g.startWith)(!0)),this.definitionForJsonViewer$=this.isDesignMode$.pipe((0,g.switchMap)(e=>e?(0,h.of)(null):(0,h.combineLatest)([this.definitionFromDefinitionModel$,this.originalDefinition$]).pipe((0,g.map)(([e,t])=>Object.assign(Object.assign({},t),e))))),this.breadcrumbItems$=this.definitionModel$.pipe((0,g.map)(e=>[{label:e.name||`<${this.translateService.instant("com.bmc.arsys.rx.client.document-designer.new-document.label")}>`,data:{}}])),this.definitionInspectorConfig$=this.definitionModel$.pipe((0,g.map)(e=>{const t=!Boolean(e.lastUpdateTime)||this.rxOverlayService.isCustomizationEnabled("allowOverlay",e);return this.getFormBuilderConfig(e,t)})),this.vm$=(0,h.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.definitionModel$,this.hasValidationErrors$,this.isReadOnly$,this.definitionForJsonViewer$,this.isSaveButtonDisabled$,this.definitionInspectorConfig$,this.validationIssues$]).pipe((0,g.map)(([e,t,i,n,o,r,a,s,l])=>({breadcrumbItems:e,bundleFriendlyName:t,definitionModel:i,hasValidationErrors:n,isReadOnly:o,definitionForJsonViewer:r,isSaveButtonDisabled:a,definitionInspectorConfig:s,validationIssues:l})))}ngOnInit(){this.schemaFormControl.valueChanges.pipe((0,g.takeUntil)(this.destroyed$)).subscribe(e=>{this.store$.dispatch(T({definitionModelFromDesigner:{documentSchema:e}}))}),this.store$.select(z).pipe((0,g.takeUntil)(this.destroyed$)).subscribe(e=>{this.schemaFormControl.patchValue(e.documentSchema,{emitEvent:!1})}),this.store$.select(X).pipe((0,g.skip)(1),(0,g.takeUntil)(this.destroyed$),(0,g.filter)(Boolean)).subscribe(e=>{this.definitionSaved.emit(e)})}ngOnChanges(e){e.configuration.currentValue&&this.store$.dispatch(I({payload:this.configuration}))}onEditorEvent(e){e.type===p.RX_REVERT_CUSTOMIZATION.events.revertCustomization&&this.store$.dispatch(N())}canDeactivate(){let e=!0;return this.isDirty$.pipe((0,g.take)(1)).subscribe(t=>{e=!t}),e}onCorrectIssue(e){"documentSchema"===e.data.propertyName?this.renderer.selectRootElement("#document-schema").focus():(this.inspectorSidebar.openPanel(0),setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:e.data.propertyName,data:e.data.data}),10))}onSave(){this.store$.dispatch(A())}onToggleDesignMode(){this.store$.dispatch(O())}onDefinitionModelChange(e){this.store$.dispatch(T({definitionModelFromDesigner:e}))}onDefinitionInspectorInitialized(){setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:"name",data:{}}),10)}getFormBuilderConfig(e,t){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"name",component:p.TextFormControlComponent,isDisabled:Boolean(e.lastUpdateTime),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"description",component:p.TextareaFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{component:p.RxRevertCustomizationComponent,options:{allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor}},{name:"customizationOptions",component:p.CustomizationOptionsComponent,isDisabled:!t,options:{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.document-definition.label").toLowerCase(),allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor}}]}]}validate(e){const t=[];return(0,f.isEmpty)((0,f.trim)(e.name))&&t.push({type:a.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.document-designer.document-name.label")}),data:{propertyName:"name"}}),e.name&&!c.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.name)&&t.push({type:a.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.document-designer.document-name.label")}),data:{propertyName:"name"}}),(0,f.isEmpty)((0,f.trim)(e.documentSchema))?t.push({type:a.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.document-designer.document-schema.label")}),data:{propertyName:"documentSchema"}}):(0,f.isUndefined)(this.rxJsonParserService.tryParseJson(e.documentSchema))&&t.push({type:a.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.document-designer.validation.json-is-not-valid.message"),data:{propertyName:"documentSchema"}}),t.length?[{title:this.translateService.instant("com.bmc.arsys.rx.client.document-designer.title"),issues:t}]:[]}ngOnDestroy(){this.inspectorFocusEditorSubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.store$.dispatch(_())}}H.\u0275fac=function(e){return new(e||H)(n["\u0275\u0275directiveInject"](m.Store),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](r.RxGlobalCacheService),n["\u0275\u0275directiveInject"](u.RxJsonParserService),n["\u0275\u0275directiveInject"](r.RxNotificationService),n["\u0275\u0275directiveInject"](r.RxOverlayService),n["\u0275\u0275directiveInject"](s.TranslateService),n["\u0275\u0275directiveInject"](D))},H.\u0275cmp=n["\u0275\u0275defineComponent"]({type:H,selectors:[["rx-document-designer"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](d.AdaptSidebarComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inspectorSidebar=e.first)}},inputs:{configuration:"configuration"},outputs:{definitionSaved:"definitionSaved",definitionErrorLoading:"definitionErrorLoading",closeDesigner:"closeDesigner"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"bundleName","breadcrumbItems","isDesignMode","isSaveButtonDisabled","toggleDesignMode","save","closeDesigner"],[1,"rx-designer-component",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],["iconClass","d-icon-pencil",3,"headerTitle","tooltipText"],[3,"config","focusEditor$","isReadOnly","model","editorEvent","formInitialized","modelChange"],[3,"headerTitle","tooltipText","iconClass"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],[1,"main","rx-designer-container","h-100"],[3,"label","showRequiredLabel"],["name","documentSchema","required","","id","document-schema","rx-id","document-schema",1,"form-control","h-100",3,"formControl","readonly"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,C,18,34,"ng-container",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[v.NgIf,p.RxDesignerHeaderComponent,d.AdaptSidebarComponent,d.AdaptSidebarItemComponent,p.FormBuilderComponent,a.RxValidationIssuesComponent,d.AdaptRxControlLabelComponent,l.DefaultValueAccessor,l.RequiredValidator,l.NgControlStatus,l.FormControlDirective,d.AdaptCodeViewerComponent],pipes:[v.AsyncPipe,s.TranslatePipe,v.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-designer-component[_ngcontent-%COMP%]{height:calc(100% - 50px)}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;padding:1rem}textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}[_nghost-%COMP%]     .adapt-sidebar-main{overflow:auto}']});class Q{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.router=t,this.rxBundleCacheService=i,this.rxComponentCanDeactivateGuard=n,this.rxDefinitionNameService=o,this.rxPageTitleService=r,this.rxUtilityModalsService=a,this.translateService=s,this.isInitialized=!1,this.definitionsRoute="document-definitions",this.pageTitle=this.translateService.instant("com.bmc.arsys.rx.client.document-designer.title")}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewDefinition=!e,this.configuration=Object.assign(Object.assign({},this.configuration),{bundleId:this.rxBundleCacheService.bundleId,definitionName:e}),this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.pageTitle])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}canDeactivate(){var e,t;return null===(t=null===(e=this.designerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}onCloseDesigner(){this.router.navigate([r.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,this.definitionsRoute])}onDefinitionSaved(e){this.isNewDefinition&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}}Q.\u0275fac=function(e){return new(e||Q)(n["\u0275\u0275directiveInject"](o.ActivatedRoute),n["\u0275\u0275directiveInject"](o.Router),n["\u0275\u0275directiveInject"](r.RxBundleCacheService),n["\u0275\u0275directiveInject"](r.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](r.RxDefinitionNameService),n["\u0275\u0275directiveInject"](r.RxPageTitleService),n["\u0275\u0275directiveInject"](a.RxUtilityModalsService),n["\u0275\u0275directiveInject"](s.TranslateService))},Q.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Q,selectors:[["rx-document-designer-page"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](H,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.designerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,S,1,1,"rx-document-designer",0),2&e&&n["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[v.NgIf,H],encapsulation:2});const K={name:null,documentSchema:null,customizationOptions:{allowOverlay:null,scope:null}},J={bundleId:null,definitionName:null,isDesignMode:!0,definitionModel:K,definitionModelFromDefinition:K,isDirty:!1,savedDefinitionName:null,originalDefinition:null},Y=(0,m.createReducer)(J,(0,m.on)(I,(e,{payload:t})=>Object.assign(Object.assign({},J),{bundleId:t.bundleId,definitionName:t.definitionName})),(0,m.on)(E,(e,{definition:t,definitionModel:i})=>Object.assign(Object.assign({},e),{definitionModel:i,definitionModelFromDefinition:i,originalDefinition:t})),(0,m.on)(F,e=>Object.assign(Object.assign({},e),{isDirty:!1})),(0,m.on)(M,e=>Object.assign(Object.assign({},e),{isDirty:!0})),(0,m.on)(O,e=>Object.assign(Object.assign({},e),{isDesignMode:!e.isDesignMode})),(0,m.on)(T,(e,{definitionModelFromDesigner:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),t)})),(0,m.on)(P,(e,{savedDefinitionName:t})=>Object.assign(Object.assign({},e),{savedDefinitionName:t})),(0,m.on)(_,e=>Object.assign({},J)));function Z(e,t){return Y(e,t)}class ee{constructor(e,t,i,n,o,r,a,s,l){this.store$=e,this.actions$=t,this.errorHandler=i,this.rxDefinitionUpdateService=n,this.documentDesignerService=o,this.rxNotificationService=r,this.translateService=a,this.rxDocumentDefinitionService=s,this.rxDefinitionNameService=l,this.initDocumentDesigner$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(I),(0,g.map)(e=>R()))),this.loadDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(R),(0,g.withLatestFrom)(this.store$.select(L)),(0,g.switchMap)(([e,t])=>t?this.rxDocumentDefinitionService.get(t):this.rxDocumentDefinitionService.getNew()),(0,g.map)(e=>w({definition:e})))),this.loadDefinitionSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(w),(0,g.map)(e=>{let t={customizationOptions:{scope:e.definition.scope,allowOverlay:e.definition.allowOverlay},description:e.definition.description,documentSchema:e.definition.documentSchema,guid:e.definition.guid,lastChangedBy:e.definition.lastChangedBy,lastUpdateTime:e.definition.lastUpdateTime,name:this.rxDefinitionNameService.getDisplayName(e.definition.name),overlayDescriptor:e.definition.overlayDescriptor,overlayGroupId:e.definition.overlayGroupId,owner:e.definition.owner};return E({definition:e.definition,definitionModel:t})}))),this.revertCustomization$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(N),(0,g.withLatestFrom)(this.store$.select(U),this.store$.select($)),(0,g.switchMap)(([e,t,i])=>this.rxDocumentDefinitionService.revertCustomization(`${i}:${t.name}`)),(0,g.map)(()=>R()))),this.markPristine$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(E,A),(0,g.map)(()=>F()))),this.markDirty$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(T,j),(0,g.map)(()=>M()))),this.saveDefinition$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(A),(0,g.withLatestFrom)(this.store$.select(U),this.store$.select(W),this.store$.select($)),(0,g.switchMap)(([e,t,i,n])=>{const o=this.documentDesignerService.getDefinitionFromDefinitionModel(t,n);return(o.lastUpdateTime?this.rxDefinitionUpdateService.execute(this.rxDocumentDefinitionService.update.bind(this.rxDocumentDefinitionService,Object.assign(Object.assign({},i),o))):this.rxDocumentDefinitionService.create(o)).pipe((0,g.map)(e=>{const i=decodeURIComponent((0,f.last)(null==e?void 0:e.headers.get("location").split("/"))||"")||this.rxDefinitionNameService.getDefinitionName(n,t.name);return P({savedDefinitionName:i})}),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(j()))))}))),this.saveDefinitionSuccess$=(0,y.createEffect)(()=>this.actions$.pipe((0,y.ofType)(P),(0,g.withLatestFrom)(this.store$.select(L)),(0,g.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.definition-saved-successfully.message",{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.document-definition.label")}))}),(0,g.filter)(([e,t])=>!!t),(0,g.map)(()=>R())))}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275inject"](m.Store),n["\u0275\u0275inject"](y.Actions),n["\u0275\u0275inject"](n.ErrorHandler),n["\u0275\u0275inject"](r.RxDefinitionUpdateService),n["\u0275\u0275inject"](D),n["\u0275\u0275inject"](r.RxNotificationService),n["\u0275\u0275inject"](s.TranslateService),n["\u0275\u0275inject"](b.RxDocumentDefinitionService),n["\u0275\u0275inject"](r.RxDefinitionNameService))},ee.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ee,factory:ee.\u0275fac});class te{}te.\u0275fac=function(e){return new(e||te)},te.\u0275mod=n["\u0275\u0275defineNgModule"]({type:te,declarations:[H],imports:[d.AdaptCodeViewerModule,d.AdaptRxLabelModule,d.AdaptSidebarModule,d.AdaptTabsModule,v.CommonModule,l.FormsModule,s.TranslateModule,p.RxDesignerHeaderModule,p.RxFormBuilderModule,a.RxJsonViewerModule,a.RxValidationIssuesModule,l.ReactiveFormsModule,m.StoreFeatureModule,y.EffectsFeatureModule],exports:[H]}),te.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.AdaptCodeViewerModule,d.AdaptRxLabelModule,d.AdaptSidebarModule,d.AdaptTabsModule,v.CommonModule,l.FormsModule,s.TranslateModule,p.RxDesignerHeaderModule,p.RxFormBuilderModule,a.RxJsonViewerModule,a.RxValidationIssuesModule,l.ReactiveFormsModule,m.StoreModule.forFeature(V,{model:Z}),y.EffectsModule.forFeature([ee])]]});class ie{}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ie,declarations:[Q],imports:[v.CommonModule,te,s.TranslateModule],exports:[Q]}),ie.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[v.CommonModule,te,s.TranslateModule]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-event-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxEventDefinitionDataPageService:()=>r,RxEventDefinitionService:()=>a});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js");class r extends o.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.event.datapage.EventDefinitionDataPageQuery"),this.injector=e}}r.\u0275fac=function(e){return new(e||r)(n["\u0275\u0275inject"](n.Injector))},r.\u0275prov=n["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"});class a{constructor(e){this.rxCommandFactoryService=e,this.revertCustomizationCommand=this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.event.command.RevertEventDefinitionCommand")}revertCustomization(e){return this.revertCustomizationCommand.execute({eventDefinitionName:e})}}a.\u0275fac=function(e){return new(e||a)(n["\u0275\u0275inject"](o.RxCommandFactoryService))},a.\u0275prov=n["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-event-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxEventDesignerComponent:()=>v,RxEventDesignerModule:()=>y,RxEventDesignerPageComponent:()=>b,RxEventDesignerPageModule:()=>x});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/forms/fesm2015/forms.js"),a=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),d=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),c=i("rxjs"),p=i("./node_modules/rxjs/_esm2015/operators/index.js"),u=i("lodash"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),f=i("./node_modules/@angular/router/fesm2015/router.js");function h(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-code-viewer",10),o["\u0275\u0275pipe"](1,"json"),o["\u0275\u0275pipe"](2,"async")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("code",o["\u0275\u0275pipeBind1"](1,4,o["\u0275\u0275pipeBind1"](2,6,e.eventDefinition$)))("lang","javascript")("hasToolbar",!1)("theme","light")}}function g(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-event-designer",1),o["\u0275\u0275listener"]("eventDefinitionSaved",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onEventDefinitionSaved(t)})("eventDefinitionErrorLoading",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onEventDefinitionErrorLoading()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCloseDesigner()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("eventDefinitionName",e.eventDefinitionName)}}class v{constructor(e,t,i,n,r){this.rxGlobalCacheService=e,this.rxBundleCacheService=t,this.rxDefinitionNameService=i,this.translateService=n,this.rxOverlayService=r,this.eventDefinitionSaved=new o.EventEmitter,this.eventDefinitionErrorLoading=new o.EventEmitter,this.closeDesigner=new o.EventEmitter,this.isDesignMode=!0,this.isExistingEvent=!1,this.isCustomizationEnabled=!0,this.bundleFriendlyName$=this.rxGlobalCacheService.getBundleFriendlyName(this.rxBundleCacheService.bundleId),this.validationIssues$=new c.BehaviorSubject([]),this.hasValidationErrors$=this.validationIssues$.pipe((0,p.map)(e=>Boolean((0,u.filter)(e,{issues:[{type:l.ValidationIssueType.Error}]}).length)),(0,p.distinctUntilChanged)()),this.eventDefinition$=new c.BehaviorSubject(null),this.isSavingInProgress$=new c.BehaviorSubject(!1),this.bundleId=this.rxBundleCacheService.bundleId,this.isBundleEditable=this.rxOverlayService.isBundleEditable(this.bundleId),this.destroyed$=new c.ReplaySubject(1)}ngOnInit(){this.eventDefinitionName,this.breadcrumbItems$=this.eventDefinition$.pipe((0,p.map)(e=>[{label:this.rxDefinitionNameService.getDisplayName(null==e?void 0:e.name)||`<${this.translateService.instant("com.bmc.arsys.rx.client.event-designer.new-event.label")}>`,data:{}}])),this.isSaveButtonDisabled$=(0,c.combineLatest)([this.validationIssues$,this.isSavingInProgress$]).pipe((0,p.map)(([[e],t])=>Boolean(null==e?void 0:e.issues)||!this.isBundleEditable||t))}canDeactivate(){return!0}toggleDesignMode(){this.isDesignMode=!this.isDesignMode}onCorrectIssue(e){}validate(e){const t=[];return t.length?[{title:this.translateService.instant("com.bmc.arsys.rx.client.event-designer.new-event.label"),issues:t}]:[]}onRevertCustomization(e){}saveDefinition(){}}v.\u0275fac=function(e){return new(e||v)(o["\u0275\u0275directiveInject"](m.RxGlobalCacheService),o["\u0275\u0275directiveInject"](m.RxBundleCacheService),o["\u0275\u0275directiveInject"](m.RxDefinitionNameService),o["\u0275\u0275directiveInject"](d.TranslateService),o["\u0275\u0275directiveInject"](m.RxOverlayService))},v.\u0275cmp=o["\u0275\u0275defineComponent"]({type:v,selectors:[["rx-event-designer"]],inputs:{eventDefinitionName:"eventDefinitionName"},outputs:{eventDefinitionSaved:"eventDefinitionSaved",eventDefinitionErrorLoading:"eventDefinitionErrorLoading",closeDesigner:"closeDesigner"},decls:23,vars:39,consts:[[3,"bundleName","breadcrumbItems","isDesignMode","isSaveButtonDisabled","toggleDesignMode","save","closeDesigner"],[1,"rx-component-designer",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],["iconClass","d-icon-pencil",3,"headerTitle","tooltipText"],["iconClass","d-icon-gear"],[3,"headerTitle","tooltipText","iconClass"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],[1,"main","rx-designer-container","h-100"],[1,"mt-0"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-designer-header",0),o["\u0275\u0275listener"]("toggleDesignMode",function(){return t.toggleDesignMode()})("save",function(){return t.saveDefinition()})("closeDesigner",function(){return t.closeDesigner.emit()}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",1),o["\u0275\u0275elementStart"](5,"adapt-sidebar",2),o["\u0275\u0275element"](6,"adapt-sidebar-item",3),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275element"](9,"adapt-sidebar-item",4),o["\u0275\u0275elementStart"](10,"adapt-sidebar-item",5),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275pipe"](13,"async"),o["\u0275\u0275elementStart"](14,"rx-validation-issues",6),o["\u0275\u0275listener"]("correctIssue",function(e){return t.onCorrectIssue(e)}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275pipe"](16,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",7),o["\u0275\u0275elementStart"](18,"h1",8),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,h,3,8,"adapt-code-viewer",9)),2&e&&(o["\u0275\u0275property"]("bundleName",o["\u0275\u0275pipeBind1"](1,15,t.bundleFriendlyName$))("breadcrumbItems",o["\u0275\u0275pipeBind1"](2,17,t.breadcrumbItems$))("isDesignMode",t.isDesignMode)("isSaveButtonDisabled",o["\u0275\u0275pipeBind1"](3,19,t.isSaveButtonDisabled$)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("hidden",!t.isDesignMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("openedId",0),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("headerTitle",o["\u0275\u0275pipeBind1"](7,21,"com.bmc.arsys.rx.client.common.properties.label")),o["\u0275\u0275propertyInterpolate"]("tooltipText",o["\u0275\u0275pipeBind1"](8,23,"com.bmc.arsys.rx.client.common.properties.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("headerTitle",o["\u0275\u0275pipeBind1"](11,25,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275propertyInterpolate"]("tooltipText",o["\u0275\u0275pipeBind1"](12,27,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275property"]("iconClass",o["\u0275\u0275pipeBind1"](13,29,t.hasValidationErrors$)?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("definitionTypeDisplayName",o["\u0275\u0275pipeBind1"](15,31,"com.bmc.arsys.rx.client.common.event-definition.label"))("issueSections",o["\u0275\u0275pipeBind1"](16,33,t.validationIssues$)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.isExistingEvent?o["\u0275\u0275pipeBind1"](20,35,"com.bmc.arsys.rx.client.event-designer.edit-event.title"):o["\u0275\u0275pipeBind1"](21,37,"com.bmc.arsys.rx.client.event-designer.create-event.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!t.isDesignMode))},directives:[s.RxDesignerHeaderComponent,a.AdaptSidebarComponent,a.AdaptSidebarItemComponent,l.RxValidationIssuesComponent,n.NgIf,a.AdaptCodeViewerComponent],pipes:[n.AsyncPipe,d.TranslatePipe,n.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-component-designer[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:calc(100% - 50px);overflow:hidden}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:auto;padding:1rem}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}']});class y{}y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=o["\u0275\u0275defineNgModule"]({type:y,declarations:[v],imports:[a.AdaptCodeViewerModule,a.AdaptRxFormsModule,a.AdaptSidebarModule,a.AdaptTabsModule,n.CommonModule,s.CustomizationOptionsModule,r.FormsModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,s.RxDesignerHeaderModule,s.RxFormBuilderModule,l.RxJsonViewerModule,s.RxRevertCustomizationModule,l.RxValidationIssuesModule,d.TranslateModule],exports:[v]}),y.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptCodeViewerModule,a.AdaptRxFormsModule,a.AdaptSidebarModule,a.AdaptTabsModule,n.CommonModule,s.CustomizationOptionsModule,r.FormsModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,s.RxDesignerHeaderModule,s.RxFormBuilderModule,l.RxJsonViewerModule,s.RxRevertCustomizationModule,l.RxValidationIssuesModule,d.TranslateModule]]});class b{constructor(e,t,i,n,o,r,a,s){this.rxUtilityModalService=e,this.rxBundleCacheService=t,this.rxDefinitionNameService=i,this.rxPageTitleService=n,this.rxComponentCanDeactivateGuard=o,this.translateService=r,this.activatedRoute=a,this.router=s,this.isInitialized=!1,this.destroyed$=new c.ReplaySubject(1)}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.activatedRoute.params.pipe((0,p.takeUntil)(this.destroyed$)).subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewEvent=!e,this.eventDefinitionName=e,this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.event-designer.title")])})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}onCloseDesigner(){this.router.navigate([m.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"event-definitions"])}confirmDeactivation(){return this.rxUtilityModalService.confirmUnsavedChanges()}canDeactivate(){var e,t;return null===(t=null===(e=this.eventDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}onEventDefinitionSaved(e){this.isNewEvent&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onEventDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}}b.\u0275fac=function(e){return new(e||b)(o["\u0275\u0275directiveInject"](l.RxUtilityModalsService),o["\u0275\u0275directiveInject"](m.RxBundleCacheService),o["\u0275\u0275directiveInject"](m.RxDefinitionNameService),o["\u0275\u0275directiveInject"](m.RxPageTitleService),o["\u0275\u0275directiveInject"](m.RxComponentCanDeactivateGuard),o["\u0275\u0275directiveInject"](d.TranslateService),o["\u0275\u0275directiveInject"](f.ActivatedRoute),o["\u0275\u0275directiveInject"](f.Router))},b.\u0275cmp=o["\u0275\u0275defineComponent"]({type:b,selectors:[["rx-event-designer-page"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](v,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.eventDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"eventDefinitionName","eventDefinitionSaved","eventDefinitionErrorLoading","closeDesigner",4,"ngIf"],[3,"eventDefinitionName","eventDefinitionSaved","eventDefinitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,g,1,1,"rx-event-designer",0),2&e&&o["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[n.NgIf,v],encapsulation:2});class x{}x.\u0275fac=function(e){return new(e||x)},x.\u0275mod=o["\u0275\u0275defineNgModule"]({type:x,declarations:[b],imports:[n.CommonModule,y],exports:[b]}),x.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,y]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-event-statistics-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxEventStatisticsDefinitionService:()=>a,RxeventStatisticsDefinitionDataPageService:()=>r});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js");class r extends o.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.event.datapage.EventStatisticsDefinitionDataPageQuery"),this.injector=e}}r.\u0275fac=function(e){return new(e||r)(n["\u0275\u0275inject"](n.Injector))},r.\u0275prov=n["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"});class a{constructor(e){this.rxCommandFactoryService=e}revertCustomization(e){return this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.event.command.RevertEventStatisticsDefinitionCommand").execute({eventStatisticsDefinitionName:e})}}a.\u0275fac=function(e){return new(e||a)(n["\u0275\u0275inject"](o.RxCommandFactoryService))},a.\u0275prov=n["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-named-list-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxNamedListDesignerComponent:()=>ue,RxNamedListDesignerModule:()=>ye,RxNamedListDesignerPageComponent:()=>be,RxNamedListDesignerPageModule:()=>xe,RxNamedListExpressionConfigurator:()=>V});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),a=i("./node_modules/@angular/forms/fesm2015/forms.js"),s=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),c=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),f=i("lodash"),h=i("rxjs"),g=i("./node_modules/rxjs/_esm2015/operators/index.js"),v=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),y=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),b=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),x=i("./node_modules/@angular/router/fesm2015/router.js");function C(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addField()}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275element"](2,"span",12),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",o["\u0275\u0275pipeBind1"](1,2,e.isAddButtonDisabled$)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,4,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.add-field.label")," ")}}function S(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"button",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().expandAll()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",15),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().collapseAll()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function D(e,t){1&e&&o["\u0275\u0275element"](0,"div",31)}function I(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275elementStart"](1,"div",33),o["\u0275\u0275elementStart"](2,"button",34),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().index,n=o["\u0275\u0275nextContext"](2);return t.stopPropagation(),n.moveField(i,i+1)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",35),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().index,n=o["\u0275\u0275nextContext"](2);return t.stopPropagation(),n.moveField(i,i-1)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",36),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().index,n=o["\u0275\u0275nextContext"](2);return t.stopPropagation(),n.removeField(i)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.last,i=e.first;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",i),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function R(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275template"](1,D,1,0,"div",20),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",21),o["\u0275\u0275listener"]("open",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).accordionExpansionState[t.value.guid]=!0})("close",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).accordionExpansionState[t.value.guid]=!1}),o["\u0275\u0275elementStart"](3,"div",22),o["\u0275\u0275elementStart"](4,"div",23),o["\u0275\u0275elementStart"](5,"div",24),o["\u0275\u0275elementStart"](6,"div",25),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,I,7,5,"div",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",27),o["\u0275\u0275elementStart"](10,"rx-select-form-control",28),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).onFieldSelect(i,t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](11,"adapt-rx-checkbox",29),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275element"](13,"adapt-rx-checkbox",30),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.config.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",e)("isOpen",e.invalid||i.accordionExpansionState[e.value.guid]),o["\u0275\u0275advance"](3),o["\u0275\u0275classProp"]("pl-0",i.config.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",e.value.fieldName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.value.fieldName," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",e.controls.id)("options",i.fieldSelectionConfig),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,14,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.visible-field.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,16,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.searchable-field.label"))}}function w(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275listener"]("cdkDropListDropped",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFieldDrop(t)}),o["\u0275\u0275elementStart"](1,"adapt-accordion",17),o["\u0275\u0275template"](2,R,15,18,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.fieldsFormArray.controls)}}function E(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",37),o["\u0275\u0275element"](1,"adapt-empty-state",38),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.empty-state.message")))}function F(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",39),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.fieldsFormArray.invalid||e.fieldsFormArray.pristine),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function M(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",6),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.empty-state.message")))}function T(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-button",13),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](3).removeContextualLabelField(t)}),o["\u0275\u0275elementEnd"]()}}function O(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275elementStart"](1,"strong",10),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"adapt-button",11),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](3).editContextualLabelField(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,T,1,0,"adapt-button",12),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.isFieldRemovable)}}function N(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275template"](1,O,5,2,"div",8),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.fieldNames)}}function A(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"adapt-button",2),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openContextualLabelFieldsEditor()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"adapt-icon",3),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,M,3,3,"span",4),o["\u0275\u0275template"](8,N,2,1,"div",5),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf;o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isEditorDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](6,7,"com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.tooltip")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.fieldNames.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.fieldNames.length)}}function P(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-code-viewer",10),o["\u0275\u0275pipe"](1,"json")),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("code",o["\u0275\u0275pipeBind1"](1,4,e.definitionForJsonViewer))("lang","javascript")("hasToolbar",!1)("theme","light")}}function j(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"rx-designer-header",1),o["\u0275\u0275listener"]("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().closeDesigner.emit()})("save",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSave()})("toggleDesignMode",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onToggleDesignMode()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"adapt-sidebar",3),o["\u0275\u0275elementStart"](4,"adapt-sidebar-item",4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"rx-validation-issues",5),o["\u0275\u0275listener"]("correctIssue",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCorrectIssue(t)}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"h1",7),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"rx-form-builder",8),o["\u0275\u0275listener"]("editorEvent",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onEditorEvent(t)})("formInitialized",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFormInitialized()})("modelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onModelChange(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,P,2,6,"adapt-code-viewer",9),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("breadcrumbItems",e.breadcrumbItems)("isSaveButtonDisabled",e.isSaveButtonDisabled)("isDesignMode",!e.definitionForJsonViewer),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",e.definitionForJsonViewer),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("openedId",0),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("headerTitle",o["\u0275\u0275pipeBind1"](5,16,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275propertyInterpolate"]("tooltipText",o["\u0275\u0275pipeBind1"](6,18,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("definitionTypeDisplayName",o["\u0275\u0275pipeBind1"](8,20,"com.bmc.arsys.rx.client.common.named-list-definition.label"))("issueSections",e.validationIssues),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",e.isExistingDefinition?o["\u0275\u0275pipeBind1"](12,22,"com.bmc.arsys.rx.client.named-list-designer.edit-named-list.title"):o["\u0275\u0275pipeBind1"](13,24,"com.bmc.arsys.rx.client.named-list-designer.create-named-list.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("config",e.definitionInspectorConfig)("model",e.definitionModel)("focusEditor$",i.inspectorFocusEditor$),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.definitionForJsonViewer)}}function _(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-named-list-designer",1),o["\u0275\u0275listener"]("definitionSaved",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onDefinitionSaved(t)})("definitionErrorLoading",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCloseDesigner()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configuration",e.configuration)}}class V extends m.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.translateService=this.injector.get(c.TranslateService),this.commonDataDictionary$=(0,h.of)([]),this.generalGroup={label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),hidden:!0,children:[{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$"}]}}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:m.ExpressionOperatorRowsByGroup.get(m.ExpressionOperatorGroup.AllClient)})}namedListExpressionDataDictionary(e){const t={label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.expression-configurator.record-instance.label"),expanded:!0};return e.recordDefinitionName?this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,g.map)(e=>(t.children=e?(0,f.flow)(e=>(0,f.map)(e,e=>{if(e.resourceType!==u.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType)return{label:e.name,icon:"d-icon-arrow_right_square_input",expression:`'${e.name}'`}}),f.compact)(e.fieldDefinitions):[],[t,this.generalGroup]))):(0,h.of)([this.generalGroup])}}const k="namedListDesigner",B=(0,v.createFeatureSelector)(k),$=(0,v.createSelector)(B,e=>e.model),L=(0,v.createSelector)($,e=>e.bundleId),G=(0,v.createSelector)($,e=>e.definitionName),z=(0,v.createSelector)($,e=>e.isDesignMode),U=(0,v.createSelector)($,e=>e.definitionModelFromDefinition),q=(0,v.createSelector)($,e=>e.definitionModel),X=(0,v.createSelector)($,e=>e.isDirty),W=(0,v.createSelector)($,e=>e.savedDefinitionName),H=(0,v.createSelector)($,e=>e.originalDefinition),Q=(0,v.createAction)("[Named List Designer] Init",(0,v.props)()),K=(0,v.createAction)("[Named List Designer] Load Definition"),J=(0,v.createAction)("[Named List Designer] Load Definition Success",(0,v.props)()),Y=(0,v.createAction)("[Named List Designer] Init Definition Data",(0,v.props)()),Z=(0,v.createAction)("[Named List Designer] Clear Fields"),ee=(0,v.createAction)("[Named List Designer] Mark Designer Pristine"),te=(0,v.createAction)("[Named List Designer] Mark Designer Dirty"),ie=(0,v.createAction)("[Named List Designer] Update Definition Model From Designer",(0,v.props)()),ne=(0,v.createAction)("[Named List Designer] Revert Customization"),oe=(0,v.createAction)("[Named List Designer] Toggle Design Mode"),re=(0,v.createAction)("[Named List Designer] Save Definition"),ae=(0,v.createAction)("[Named List Designer] Save Definition Success",(0,v.props)()),se=(0,v.createAction)("[Named List Designer] Save Definition Error"),le=(0,v.createAction)("[Named List Designer] Destroy");class de{getDefinitionFromDefinitionModel(e,t){return{allowOverlay:e.customizationOptions.allowOverlay,description:e.description,fields:e.fields,guid:e.guid,labelFieldId:e.labelFieldId,lastChangedBy:e.lastChangedBy,lastUpdateTime:e.lastUpdateTime,name:e.name?`${t}:${e.name}`:null,overlayDescriptor:e.customizationOptions.overlayDescriptor,overlayGroupId:e.customizationOptions.overlayGroupId,owner:e.owner,queryCriteria:e.queryCriteria,recordDefinitionName:e.recordDefinitionName,scope:e.customizationOptions.scope,searchBehavior:e.searchBehavior,tags:e.tags,valueFieldId:e.valueFieldId,version:e.version}}}de.\u0275fac=function(e){return new(e||de)},de.\u0275prov=o["\u0275\u0275defineInjectable"]({token:de,factory:de.\u0275fac,providedIn:"root"});class ce extends d.RxModalClass{constructor(e,t,i,n,o){super(e,o),this.activeModalRef=e,this.formBuilder=t,this.rxGuidService=i,this.translateService=n,this.config=this.activeModalRef.getData(),this.fieldsFormArray=this.formBuilder.array([]),this.accordionExpansionState={},this.fieldSelectionConfig={label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.field.label"),required:!0,options:this.config.options},this.fieldNameById=this.config.options.reduce((e,{id:t,name:i})=>(e[t]=i,e),{}),this.isAddButtonDisabled$=this.fieldsFormArray.valueChanges.pipe((0,g.startWith)([]),(0,g.map)(()=>this.fieldsFormArray.length>=p.RX_NAMED_LIST_DEFINITION.maxNumberOfContextualLabelFields))}ngOnInit(){super.ngOnInit(),(0,f.forEach)(this.config.contextualLabelFields,(e,t)=>{var i;const n=this.rxGuidService.generate();this.accordionExpansionState[n]=this.config.activeFieldIndex===t,this.fieldsFormArray.push(this.getFormGroup(Object.assign(Object.assign({guid:n},e),{fieldName:null!==(i=this.fieldNameById[e.id])&&void 0!==i?i:""})))}),this.config.isReadOnly&&this.fieldsFormArray.disable()}isDirty(){return this.fieldsFormArray.dirty}ngAfterViewInit(){this.config.activeFieldIndex&&this.accordionTabEls.toArray()[this.config.activeFieldIndex].nativeElement.scrollIntoView({block:"nearest"})}save(){const e=this.fieldsFormArray.getRawValue().map(({id:e,searchable:t,visible:i})=>({id:e,searchable:t,visible:i}));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(s.DismissReasons.CLOSE_BTN)}addField(){const e=this.rxGuidService.generate();this.fieldsFormArray.push(this.getFormGroup({guid:e,fieldName:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.new-field.title"),id:null,searchable:!1,visible:!0})),this.accordionExpansionState[e]=!0,setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}moveField(e,t){(0,r.moveItemInArray)(this.fieldsFormArray.controls,e,t),this.fieldsFormArray.markAsDirty()}onFieldDrop(e){(0,r.moveItemInArray)(this.fieldsFormArray.controls,e.previousIndex,e.currentIndex),this.fieldsFormArray.markAsDirty()}removeField(e){this.fieldsFormArray.removeAt(e),this.fieldsFormArray.markAsDirty()}collapseAll(){(0,f.forEach)(this.accordionExpansionState,(e,t)=>{this.accordionExpansionState[t]=!1})}expandAll(){(0,f.forEach)(this.accordionExpansionState,(e,t)=>this.accordionExpansionState[t]=!0)}onFieldSelect(e,t){e.get("fieldName").setValue(this.fieldNameById[t])}getFormGroup(e){return this.formBuilder.group(Object.assign(Object.assign({},e),{id:[e.id,[this.isFieldIdUnknown(),this.isDoubleUsedField.bind(this)]]}))}isFieldIdUnknown(){const e=this.config.options.map(({id:e})=>e);return t=>!t.parent||(0,f.isNull)(t.value)||e.includes(t.value)?null:{unknownField:{message:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.unknown-field.message")}}}isDoubleUsedField(e){return e.dirty&&e.value&&e.root.value.length>1&&e.root.value.some(t=>t.id===e.value)?{duplicated:{message:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.editor.duplicated-field.message")}}:null}}ce.\u0275fac=function(e){return new(e||ce)(o["\u0275\u0275directiveInject"](s.ActiveModalRef),o["\u0275\u0275directiveInject"](a.FormBuilder),o["\u0275\u0275directiveInject"](y.RxGuidService),o["\u0275\u0275directiveInject"](c.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},ce.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ce,selectors:[["rx-contextual-label-fields-editor-modal"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](s.AdaptAccordionTabComponent,5,o.ElementRef),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:10,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","pl-0 pr-0","rx-id","add-contextual-label-field-button","adapt-button","","type","button","btn-type","tertiary",3,"disabled","click",4,"ngIf"],["class","btn-group",4,"ngIf"],["id","selected-field","class","designer-modal-accordion-wrapper","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-contextual-label-field-button","adapt-button","","type","button","btn-type","tertiary",1,"pl-0","pr-0",3,"disabled","click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["id","selected-field","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"formGroup","isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[1,"row","align-items-start","px-3"],["rx-id","contextual-label-field-id",3,"formControl","options","ngModelChange"],["rx-id","contextual-label-field-visible","formControlName","visible",1,"ml-5",3,"label"],["rx-id","contextual-label-field-searchable","formControlName","searchable",1,"ml-5",3,"label"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275template"](5,C,5,6,"button",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,S,7,6,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,w,3,2,"div",6),o["\u0275\u0275template"](8,E,3,3,"div",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",8),o["\u0275\u0275template"](10,F,3,4,"button",9),o["\u0275\u0275elementStart"](11,"button",10),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.fieldsFormArray.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.fieldsFormArray.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.fieldsFormArray.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?o["\u0275\u0275pipeBind1"](13,6,"com.bmc.arsys.rx.client.common.close.label"):o["\u0275\u0275pipeBind1"](14,8,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[n.NgIf,s.AdaptButtonComponent,r.CdkDropList,s.AdaptAccordionComponent,n.NgForOf,r.CdkDrag,s.AdaptAccordionTabComponent,a.NgControlStatusGroup,a.FormGroupDirective,l.SelectFormControlComponent,a.NgControlStatus,a.FormControlDirective,s.AdaptRxCheckboxComponent,a.FormControlName,r.CdkDragHandle,s.AdaptEmptyStateComponent],pipes:[c.TranslatePipe,n.AsyncPipe],styles:['.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-accordion-tab[_ngcontent-%COMP%]   adapt-rx-checkbox[_ngcontent-%COMP%]{height:38px;margin-top:1.5rem}rx-select-form-control[_ngcontent-%COMP%]{width:400px}'],changeDetection:0});class pe extends l.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.translateService=t,this.vmSubject=new h.BehaviorSubject({fieldNames:[],isEditorDisabled:!0,isFieldRemovable:!1}),this.vm$=this.vmSubject.asObservable()}ngOnInit(){var e;null!==(e=this.value)&&void 0!==e||(this.value=[]),this.updateViewValues()}focus(e){this.openContextualLabelFieldsEditor(e.fieldIndex)}onWriteValue(e){(0,f.isNil)(e)||this.updateViewValues()}ngOnChanges(e){this.updateViewValues()}updateViewValues(){const e=this.value.map(e=>{var t,i;return null!==(i=null===(t=this.options.options.find(({id:t})=>t===e.id))||void 0===t?void 0:t.name)&&void 0!==i?i:""});this.vmSubject.next({fieldNames:e,isEditorDisabled:this.isDisabled&&!e.length,isFieldRemovable:!this.isDisabled})}openContextualLabelFieldsEditor(e){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.edit-fields.label"),data:{contextualLabelFields:this.value?(0,f.cloneDeep)(this.value):[],options:this.options.options,isReadOnly:this.isDisabled,activeFieldIndex:e},content:ce,testID:"edit-contextual-label-fields"}).then(e=>{this.value=e}).catch(f.noop)}editContextualLabelField(e){this.openContextualLabelFieldsEditor(e)}removeContextualLabelField(e){this.value=(0,f.without)(this.value,this.value[e])}}pe.\u0275fac=function(e){return new(e||pe)(o["\u0275\u0275directiveInject"](d.RxModalService),o["\u0275\u0275directiveInject"](c.TranslateService))},pe.\u0275cmp=o["\u0275\u0275defineComponent"]({type:pe,selectors:[["rx-contextual-label-fields"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:pe,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"pb-1"],["btn-type","tertiary","rx-id","open-contextual-label-fields-editor-link",1,"d-icon-plus_circle","p-0",3,"disabled","click"],["name","question_circle_o","placement","right","maxWidth","400",1,"ml-2",3,"adaptPopover"],["class","text-tertiary","rx-id","contextual-label-empty-state",4,"ngIf"],["rx-id","contextual-label-fields",4,"ngIf"],["rx-id","contextual-label-empty-state",1,"text-tertiary"],["rx-id","contextual-label-fields"],["class","d-flex border rounded px-2 mb-1 align-items-center",4,"ngFor","ngForOf"],[1,"d-flex","border","rounded","px-2","mb-1","align-items-center"],[1,"flex-grow-1"],["btn-type","tertiary","rx-id","edit-button",1,"d-icon-right-pencil","p-1",3,"click"],["btn-type","tertiary","class","d-icon-right-cross_adapt p-1","rx-id","remove-button",3,"click",4,"ngIf"],["btn-type","tertiary","rx-id","remove-button",1,"d-icon-right-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,A,9,9,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,s.AdaptButtonComponent,s.AdaptIconComponent,s.AdaptPopoverDirective,n.NgForOf],pipes:[n.AsyncPipe,c.TranslatePipe],encapsulation:2,changeDetection:0});class ue{constructor(e,t,i,n,r,a,s,l,c,p,m){this.injector=e,this.store$=t,this.namedListDesignerService=i,this.rxGlobalCacheService=n,this.rxModalService=r,this.rxRecordDefinitionCacheService=a,this.translateService=s,this.rxOverlayService=l,this.rxNotificationService=c,this.rxExpressionEditorService=p,this.rxFeatureService=m,this.definitionSaved=new o.EventEmitter,this.definitionErrorLoading=new o.EventEmitter,this.closeDesigner=new o.EventEmitter,this.bundleId$=this.store$.select(L),this.bundleFriendlyName$=this.bundleId$.pipe((0,g.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.destroyed$=new h.ReplaySubject(1),this.expressionConfigurator=new V(this.injector),this.isFormInitialized=!1,this.definitionModel$=this.store$.select(q),this.isDirty$=this.store$.select(X),this.originalDefinition$=this.store$.select(H),this.definitionModelFromDefinition$=this.store$.select(U),this.definitionFromDefinitionModel$=this.definitionModel$.pipe((0,g.withLatestFrom)(this.bundleId$),(0,g.map)(([e,t])=>this.namedListDesignerService.getDefinitionFromDefinitionModel(e,t))),this.recordDefinition$=this.definitionModel$.pipe((0,g.switchMap)(e=>e.recordDefinitionName?this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName):(0,h.of)(null)),(0,g.shareReplay)(1)),this.textFieldNameOptions$=this.recordDefinition$.pipe((0,g.map)(e=>e?e.fieldDefinitions.filter(({resourceType:e})=>[u.RX_RECORD_DEFINITION.resourceTypes.character,u.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter].includes(e)).map(({id:e,name:t})=>({id:e,name:t})):[])),this.validationIssues$=(0,h.combineLatest)([this.definitionModel$,this.textFieldNameOptions$]).pipe((0,g.map)(([e,t])=>this.validate(e,t)),(0,g.shareReplay)(1)),this.hasValidationErrors$=this.validationIssues$.pipe((0,g.map)(e=>(0,f.some)(e,{issues:[{type:d.ValidationIssueType.Error}]}))),this.areNewDefinitionsAllowed$=this.bundleId$.pipe((0,g.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e))),this.isReadOnly$=this.definitionFromDefinitionModel$.pipe((0,g.filter)(e=>!!e.lastUpdateTime),(0,g.withLatestFrom)(this.areNewDefinitionsAllowed$),(0,g.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,g.tap)(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),(0,g.startWith)(!1),(0,g.shareReplay)(1)),this.isSaveButtonDisabled$=(0,h.combineLatest)([this.hasValidationErrors$,this.isReadOnly$,this.isDirty$]).pipe((0,g.map)(([e,t,i])=>e||t||!i)),this.inspectorFocusEditorSubject=new h.Subject,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.isExistingDefinition$=this.definitionModelFromDefinition$.pipe((0,g.map)(e=>Boolean(e.lastUpdateTime))),this.breadcrumbItems$=this.definitionModel$.pipe((0,g.map)(e=>[{label:e.name||`<${this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.new-named-list.label")}>`,data:{}}])),this.definitionInspectorConfig$=(0,h.combineLatest)([this.definitionModel$,this.recordDefinition$,this.textFieldNameOptions$,this.isReadOnly$]).pipe((0,g.map)(([e,t,i,n])=>this.getFormBuilderConfig(e,t,i,n))),this.isDesignMode$=this.store$.select(z),this.definitionForJsonViewer$=this.isDesignMode$.pipe((0,g.switchMap)(e=>e?(0,h.of)(null):(0,h.combineLatest)([this.definitionFromDefinitionModel$,this.originalDefinition$]).pipe((0,g.map)(([e,t])=>Object.assign(Object.assign({},t),e))))),this.vm$=(0,h.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.hasValidationErrors$,this.isExistingDefinition$,this.isSaveButtonDisabled$,this.definitionForJsonViewer$,this.definitionModel$,this.definitionInspectorConfig$,this.validationIssues$]).pipe((0,g.map)(([e,t,i,n,o,r,a,s,l])=>({breadcrumbItems:e,bundleFriendlyName:t,hasValidationErrors:i,isExistingDefinition:n,isSaveButtonDisabled:o,definitionForJsonViewer:r,definitionModel:a,definitionInspectorConfig:s,validationIssues:l})))}ngOnChanges(e){e.configuration.currentValue&&this.store$.dispatch(Q({payload:this.configuration}))}ngOnInit(){this.store$.select(W).pipe((0,g.skip)(1),(0,g.filter)(Boolean),(0,g.takeUntil)(this.destroyed$)).subscribe(e=>{this.definitionSaved.emit(e)}),this.expressionConfigurator.configureForProperty({propertyPath:"queryCriteria",dataDictionary$:this.definitionModel$.pipe((0,g.switchMap)(e=>this.expressionConfigurator.namedListExpressionDataDictionary(e))),operators:m.ExpressionOperatorRowsByGroup.get(m.ExpressionOperatorGroup.All)})}canDeactivate(){let e=!0;return this.isDirty$.pipe((0,g.take)(1)).subscribe(t=>{e=!t}),e}onToggleDesignMode(){this.store$.dispatch(oe())}onCorrectIssue(e){this.inspectorFocusEditorSubject.next({editorName:e.data.propertyName,data:e.data.data})}onModelChange(e){this.isFormInitialized&&this.store$.dispatch(ie({definitionModelFromDesigner:e}))}onFormInitialized(){this.isFormInitialized=!0}onEditorEvent(e){e.type===l.RX_REVERT_CUSTOMIZATION.events.revertCustomization&&this.revertCustomization(),e.type===l.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&this.openExpressionEditor(e)}openExpressionEditor(e){this.definitionModel$.pipe((0,g.take)(1)).subscribe(t=>{this.rxExpressionEditorService.openEditor({property:{path:e.payload.propertyPath,value:t.queryCriteria,label:e.payload.propertyLabel},isReadOnly:e.payload.isReadOnly,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field-name.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.store$.dispatch(ie({definitionModelFromDesigner:{queryCriteria:e.value}}))})})}revertCustomization(){this.store$.dispatch(ne())}onSave(){this.store$.dispatch(re())}validate(e,t){var i;const n=[];return(0,f.isEmpty)((0,f.trim)(e.name))?n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")}),data:{propertyName:"name"}}):u.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.name)||n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.name-validation.message"),data:{propertyName:"name"}}),(0,f.isEmpty)((0,f.trim)(e.recordDefinitionName))&&n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.record-definition-field.label")}),data:{propertyName:"recordDefinitionName"}}),(0,f.isNil)(e.labelFieldId)&&n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.display-name-field.label")}),data:{propertyName:"labelFieldId"}}),(0,f.isNil)(e.valueFieldId)&&n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.value-field.label")}),data:{propertyName:"valueFieldId"}}),e.recordDefinitionName&&(null===(i=e.fields)||void 0===i||i.forEach((e,i)=>{t.some(({id:t})=>t===e.id)||n.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.contextual-label-fields.unknown-field.message"),data:{propertyName:"fields",data:{fieldIndex:i}}})})),n.length?[{title:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.new-named-list.label"),issues:n}]:[]}getFieldNameOptions(e){return e.fieldDefinitions.map(({id:e,name:t})=>({id:e,name:t}))}getFormBuilderConfig(e,t,i,n){return[{controls:[{name:"name",component:l.TextFormControlComponent,isDisabled:Boolean(e.lastUpdateTime),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,isDisabled:n,options:{definitionType:l.RxDefinitionPickerType.Record,label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.record-definition-field.label"),required:!0,beforeValueChange:t=>{var i;if(Boolean(t)&&(e.labelFieldId||e.valueFieldId||(null===(i=e.fields)||void 0===i?void 0:i.length)||e.queryCriteria)){const e=this.rxFeatureService.isFeatureEnabled("DRD21-43103")?this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.clear-values-confirmation.message"):"Display name field, Value field, and Filter expression will be cleared. Do you want to continue?";return this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:d.RX_MODAL.modalStyles.warning,message:e}).then(e=>(e&&setTimeout(()=>{this.store$.dispatch(Z())}),e))}return Promise.resolve(!0)}}},{name:"queryCriteria",component:l.ExpressionFormControlComponent,isDisabled:!e.recordDefinitionName||n,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.filter-expression-field.label"),tooltip:new m.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.filter-expression-field.tooltip")),dataDictionary$:this.expressionConfigurator.getDataDictionary("queryCriteria"),operators:this.expressionConfigurator.getOperators()}},{name:"searchBehavior",component:l.SelectFormControlComponent,isDisabled:n,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.search-behavior-field.label"),tooltip:new m.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.search-behavior-field.tooltip")),required:!0,options:[{id:p.RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.contains,name:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.search-behavior.contains.label")},{id:p.RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.startsWith,name:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.search-behavior.starts-with.label")},{id:p.RX_NAMED_LIST_DEFINITION.searchBehaviorTypes.exactMatch,name:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.search-behavior.exact-match.label")}],emptyOption:!1,sortAlphabetically:!1},hidden:!this.rxFeatureService.isFeatureEnabled("DRD21-43015")},{name:"labelFieldId",component:l.SelectFormControlComponent,isDisabled:!e.recordDefinitionName||n,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.display-name-field.label"),required:!0,tooltip:new m.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.display-name-field.tooltip")),emptyOption:!0,options:t?this.getFieldNameOptions(t):[]}},{name:"valueFieldId",component:l.SelectFormControlComponent,isDisabled:!e.recordDefinitionName||n,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.value-field.label"),required:!0,tooltip:new m.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.value-field.tooltip")),emptyOption:!0,options:t?this.getFieldNameOptions(t):[]}},{name:"fields",component:pe,isDisabled:!e.recordDefinitionName||n,options:{options:i},hidden:!this.rxFeatureService.isFeatureEnabled("DRD21-43103")},{component:l.RxRevertCustomizationComponent,options:{allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.customizationOptions.overlayGroupId,overlayDescriptor:e.customizationOptions.overlayDescriptor}},{name:"customizationOptions",component:l.CustomizationOptionsComponent,isDisabled:n,options:{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.named-list-definition.label").toLowerCase(),allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.customizationOptions.overlayGroupId,overlayDescriptor:e.customizationOptions.overlayDescriptor}}]}]}ngOnDestroy(){this.inspectorFocusEditorSubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.store$.dispatch(le())}}ue.\u0275fac=function(e){return new(e||ue)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](v.Store),o["\u0275\u0275directiveInject"](de),o["\u0275\u0275directiveInject"](m.RxGlobalCacheService),o["\u0275\u0275directiveInject"](d.RxModalService),o["\u0275\u0275directiveInject"](u.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](c.TranslateService),o["\u0275\u0275directiveInject"](m.RxOverlayService),o["\u0275\u0275directiveInject"](m.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxExpressionEditorService),o["\u0275\u0275directiveInject"](m.RxFeatureService))},ue.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ue,selectors:[["rx-named-list-designer"]],inputs:{configuration:"configuration"},outputs:{definitionSaved:"definitionSaved",definitionErrorLoading:"definitionErrorLoading",closeDesigner:"closeDesigner"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"bundleName","breadcrumbItems","isSaveButtonDisabled","isDesignMode","closeDesigner","save","toggleDesignMode"],[1,"rx-designer-component",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],["rx-id","validation-issues",3,"headerTitle","tooltipText","iconClass"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],[1,"main","rx-designer-container","h-100"],[1,"mt-0"],[3,"config","model","focusEditor$","editorEvent","formInitialized","modelChange"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,j,16,26,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,l.RxDesignerHeaderComponent,s.AdaptSidebarComponent,s.AdaptSidebarItemComponent,d.RxValidationIssuesComponent,l.FormBuilderComponent,s.AdaptCodeViewerComponent],pipes:[n.AsyncPipe,c.TranslatePipe,n.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-designer-component[_ngcontent-%COMP%]{height:calc(100% - 50px)}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;padding:1rem}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}[_nghost-%COMP%]     .adapt-sidebar-main{overflow:auto}'],changeDetection:0});class me{constructor(e,t,i,n,o,r,a,s,l,d){this.store$=e,this.actions$=t,this.errorHandler=i,this.rxDefinitionUpdateService=n,this.namedListDesignerService=o,this.rxNotificationService=r,this.translateService=a,this.rxNamedListDefinitionService=s,this.rxDefinitionNameService=l,this.rxComponentCanDeactivateGuard=d,this.initNamedListDesigner$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(Q),(0,g.map)(e=>K()))),this.loadDefinition$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(K),(0,g.withLatestFrom)(this.store$.select(G)),(0,g.switchMap)(([e,t])=>t?this.rxNamedListDefinitionService.get(t):this.rxNamedListDefinitionService.getNew()),(0,g.map)(e=>J({definition:e})))),this.loadDefinitionSuccess$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(J),(0,g.map)(e=>{let t={version:e.definition.version,lastUpdateTime:e.definition.lastUpdateTime,lastChangedBy:e.definition.lastChangedBy,owner:e.definition.owner,name:this.rxDefinitionNameService.getDisplayName(e.definition.name),tags:e.definition.tags,description:e.definition.description,guid:e.definition.guid,recordDefinitionName:e.definition.recordDefinitionName,queryCriteria:e.definition.queryCriteria,searchBehavior:e.definition.searchBehavior,labelFieldId:e.definition.labelFieldId,valueFieldId:e.definition.valueFieldId,fields:e.definition.fields,customizationOptions:{isDisabled:!1,definitionTypeDisplayName:null,allowOverlay:e.definition.allowOverlay,scope:e.definition.scope,overlayGroupId:e.definition.overlayGroupId,overlayDescriptor:e.definition.overlayDescriptor}};return Y({definition:e.definition,definitionModel:t})}))),this.revertCustomization$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(ne),(0,g.withLatestFrom)(this.store$.select(q),this.store$.select(L)),(0,g.switchMap)(([e,t,i])=>this.rxNamedListDefinitionService.revertCustomization(`${i}:${t.name}`)),(0,g.tap)(()=>{this.rxComponentCanDeactivateGuard.disable(),window.location.reload()})),{dispatch:!1}),this.markPristine$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(Y,re),(0,g.map)(()=>ee()))),this.markDirty$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(ie,se),(0,g.map)(()=>te()))),this.saveDefinition$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(re),(0,g.withLatestFrom)(this.store$.select(q),this.store$.select(H),this.store$.select(L)),(0,g.switchMap)(([e,t,i,n])=>{const o=Object.assign(Object.assign({},i),this.namedListDesignerService.getDefinitionFromDefinitionModel(t,n));return(o.lastUpdateTime?this.rxDefinitionUpdateService.execute(this.rxNamedListDefinitionService.update.bind(this.rxNamedListDefinitionService,o)):this.rxNamedListDefinitionService.create(o)).pipe((0,g.map)(e=>{const i=decodeURIComponent((0,f.last)(null==e?void 0:e.headers.get("location").split("/"))||"")||this.rxDefinitionNameService.getDefinitionName(n,t.name);return ae({savedDefinitionName:i})}),(0,g.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(se()))))}))),this.saveDefinitionSuccess$=(0,b.createEffect)(()=>this.actions$.pipe((0,b.ofType)(ae),(0,g.withLatestFrom)(this.store$.select(G)),(0,g.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.definition-saved-successfully.message",{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.common.named-list-definition.label")}))}),(0,g.filter)(([e,t])=>!!t),(0,g.map)(()=>K())))}}me.\u0275fac=function(e){return new(e||me)(o["\u0275\u0275inject"](v.Store),o["\u0275\u0275inject"](b.Actions),o["\u0275\u0275inject"](o.ErrorHandler),o["\u0275\u0275inject"](m.RxDefinitionUpdateService),o["\u0275\u0275inject"](de),o["\u0275\u0275inject"](m.RxNotificationService),o["\u0275\u0275inject"](c.TranslateService),o["\u0275\u0275inject"](p.RxNamedListDefinitionService),o["\u0275\u0275inject"](m.RxDefinitionNameService),o["\u0275\u0275inject"](m.RxComponentCanDeactivateGuard))},me.\u0275prov=o["\u0275\u0275defineInjectable"]({token:me,factory:me.\u0275fac});const fe={name:null,customizationOptions:{allowOverlay:!1,overlayGroupId:null,overlayDescriptor:null,scope:"BUNDLE",isDisabled:!1,definitionTypeDisplayName:null}},he={bundleId:null,definitionName:null,isDesignMode:!0,definitionModel:fe,definitionModelFromDefinition:fe,isDirty:!1,savedDefinitionName:null,originalDefinition:null},ge=(0,v.createReducer)(he,(0,v.on)(Q,(e,{payload:t})=>Object.assign(Object.assign({},he),{bundleId:t.bundleId,definitionName:t.definitionName})),(0,v.on)(Y,(e,{definition:t,definitionModel:i})=>Object.assign(Object.assign({},e),{definitionModel:i,definitionModelFromDefinition:i,originalDefinition:t})),(0,v.on)(Z,e=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{fields:[],queryCriteria:null,labelFieldId:null,valueFieldId:null})})),(0,v.on)(ee,e=>Object.assign(Object.assign({},e),{isDirty:!1})),(0,v.on)(te,e=>Object.assign(Object.assign({},e),{isDirty:!0})),(0,v.on)(oe,e=>Object.assign(Object.assign({},e),{isDesignMode:!e.isDesignMode})),(0,v.on)(ie,(e,{definitionModelFromDesigner:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),t)})),(0,v.on)(ae,(e,{savedDefinitionName:t})=>Object.assign(Object.assign({},e),{savedDefinitionName:t})),(0,v.on)(le,e=>Object.assign({},he)));function ve(e,t){return ge(e,t)}class ye{}ye.\u0275fac=function(e){return new(e||ye)},ye.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ye,declarations:[pe,ce,ue],imports:[s.AdaptAccordionModule,s.AdaptButtonModule,s.AdaptCodeViewerModule,s.AdaptEmptyStateModule,s.AdaptIconModule,s.AdaptPopoverModule,s.AdaptSidebarModule,s.AdaptTabsModule,s.AdaptRxFormsModule,n.CommonModule,r.DragDropModule,a.FormsModule,a.ReactiveFormsModule,l.RxDesignerHeaderModule,l.RxFormBuilderModule,d.RxValidationIssuesModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,l.SelectFormControlModule,l.CustomizationOptionsModule,l.RxRevertCustomizationModule,c.TranslateModule,v.StoreFeatureModule,b.EffectsFeatureModule],exports:[ue]}),ye.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdaptAccordionModule,s.AdaptButtonModule,s.AdaptCodeViewerModule,s.AdaptEmptyStateModule,s.AdaptIconModule,s.AdaptPopoverModule,s.AdaptSidebarModule,s.AdaptTabsModule,s.AdaptRxFormsModule,n.CommonModule,r.DragDropModule,a.FormsModule,a.ReactiveFormsModule,l.RxDesignerHeaderModule,l.RxFormBuilderModule,d.RxValidationIssuesModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,l.SelectFormControlModule,l.CustomizationOptionsModule,l.RxRevertCustomizationModule,c.TranslateModule,v.StoreModule.forFeature(k,{model:ve}),b.EffectsModule.forFeature([me])]]});class be{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.router=t,this.rxBundleCacheService=i,this.rxComponentCanDeactivateGuard=n,this.rxDefinitionNameService=o,this.rxPageTitleService=r,this.rxUtilityModalsService=a,this.translateService=s,this.isInitialized=!1,this.definitionsRoute="named-list-definitions",this.pageTitle=this.translateService.instant("com.bmc.arsys.rx.client.named-list-designer.title")}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewDefinition=!e,this.configuration={bundleId:this.rxBundleCacheService.bundleId,definitionName:e},this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.pageTitle])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}canDeactivate(){var e,t;return null===(t=null===(e=this.designerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}onCloseDesigner(){this.router.navigate([m.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,this.definitionsRoute])}onDefinitionSaved(e){this.isNewDefinition&&this.router.navigate(["edit",e],{relativeTo:this.activatedRoute.parent})}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}}be.\u0275fac=function(e){return new(e||be)(o["\u0275\u0275directiveInject"](x.ActivatedRoute),o["\u0275\u0275directiveInject"](x.Router),o["\u0275\u0275directiveInject"](m.RxBundleCacheService),o["\u0275\u0275directiveInject"](m.RxComponentCanDeactivateGuard),o["\u0275\u0275directiveInject"](m.RxDefinitionNameService),o["\u0275\u0275directiveInject"](m.RxPageTitleService),o["\u0275\u0275directiveInject"](d.RxUtilityModalsService),o["\u0275\u0275directiveInject"](c.TranslateService))},be.\u0275cmp=o["\u0275\u0275defineComponent"]({type:be,selectors:[["rx-named-list-designer-page"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ue,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.designerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,_,1,1,"rx-named-list-designer",0),2&e&&o["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[n.NgIf,ue],encapsulation:2});class xe{}xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275mod=o["\u0275\u0275defineNgModule"]({type:xe,declarations:[be],imports:[n.CommonModule,ye],exports:[be]}),xe.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,ye]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-process-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxProcessInstancePreviewComponent:()=>m,RxProcessInstancePreviewModule:()=>f,RxProcessPreviewComponent:()=>h,RxProcessPreviewModule:()=>g});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("rxjs"),r=i("./node_modules/rxjs/_esm2015/operators/index.js"),a=i("lodash"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-elements.js"),d=i("./node_modules/@angular/common/fesm2015/common.js"),c=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js");class m{constructor(e,t,i,n){this.element=e,this.rxProcessDefinitionCacheService=t,this.rxProcessInstanceService=i,this.rxRappidPaperService=n,this.zoomToFit=!1,this.processInstance={},this.destroyed$=new o.ReplaySubject(1),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.config.pipe((0,r.distinctUntilChanged)(a.isEqual),(0,r.filter)(e=>e.processDefinitionName&&e.processInstanceId),(0,r.tap)(e=>{this.onClick=e.onClick,this.processDefinitionName=e.processDefinitionName,this.processInstanceId=e.processInstanceId,this.zoomToFit=e.zoomToFit}),(0,r.switchMap)(e=>(0,o.forkJoin)([this.rxProcessDefinitionCacheService.getProcessDefinition(e.processDefinitionName),this.rxProcessInstanceService.get(e.processDefinitionName,e.processInstanceId)]).pipe((0,r.map)(([e,t])=>{this.processDefinition=e,this.processInstance=t}))),(0,r.shareReplay)(1)).pipe((0,r.tap)(()=>this.initialize()),(0,r.takeUntil)(this.destroyed$)).subscribe()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}initialize(){this.paperScroller=this.rxRappidPaperService.init(this.element.nativeElement),this.rxRappidPaperService.setGraph(this.paperScroller,this.processDefinition,this.processInstance,this.zoomToFit),this.onClick&&(this.paperScroller.options.paper.on("blank:pointerdown",()=>{this.onClick({processDefinition:this.processDefinition,processInstance:this.processInstance,cellView:null})}),this.paperScroller.options.paper.on("cell:pointerup",e=>{this.onClick({processDefinition:this.processDefinition,processInstance:this.processInstance,cellView:e})}))}zoomIn(){this.paperScroller.zoom(.2,{max:4})}zoomOut(){this.paperScroller.zoom(-.2,{min:.2})}}m.\u0275fac=function(e){return new(e||m)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](s.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](s.RxProcessInstanceService),n["\u0275\u0275directiveInject"](l.RxRappidPaperService))},m.\u0275cmp=n["\u0275\u0275defineComponent"]({type:m,selectors:[["rx-process-instance-preview"]],inputs:{config:"config"},decls:0,vars:0,template:function(e,t){},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;height:600px;width:100%}[_nghost-%COMP%]  .joint-element{cursor:default}[_nghost-%COMP%]  .joint-link{color:#f9f9fa}[_nghost-%COMP%]  .joint-link:hover .marker-arrowheads, [_nghost-%COMP%]  .joint-link:hover .tool-remove, [_nghost-%COMP%]  .joint-link:hover .marker-vertices, [_nghost-%COMP%]  .joint-link:hover .marker-arrowheads, [_nghost-%COMP%]  .joint-link:hover .link-tools{opacity:0;cursor:default}[_nghost-%COMP%]  .joint-link .connection-wrap:hover{opacity:0}[_nghost-%COMP%]  .joint-link .connection-wrap{cursor:default}']});class f{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-process-instance-preview",componentFactory:this.componentFactoryResolver.resolveComponentFactory(m)})}}f.\u0275fac=function(e){return new(e||f)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](p.RxViewComponentRegistryService))},f.\u0275mod=n["\u0275\u0275defineNgModule"]({type:f,declarations:[m],imports:[d.CommonModule,u.RuntimeViewModule,c.TranslateModule],exports:[m]}),f.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.CommonModule,u.RuntimeViewModule,c.TranslateModule]]});class h{constructor(e,t,i,n,r){this.element=e,this.rxProcessDefinitionCacheService=t,this.rxProcessElementService=i,this.rxProcessElementSearchService=n,this.rxRappidPaperService=r,this.zoomToFit=!1,this.destroyed$=new o.ReplaySubject(1),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.config.pipe((0,r.distinctUntilChanged)(a.isEqual),(0,r.filter)(e=>e.processDefinitionName),(0,r.tap)(e=>{this.onClick=e.onClick,this.processDefinitionName=e.processDefinitionName,this.zoomToFit=e.zoomToFit}),(0,r.switchMap)(e=>this.rxProcessDefinitionCacheService.getProcessDefinition(e.processDefinitionName).pipe((0,r.tap)(e=>{this.processDefinition=e}))),(0,r.shareReplay)(1)).pipe((0,r.tap)(()=>this.initialize()),(0,r.takeUntil)(this.destroyed$)).subscribe()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}initialize(){let e;e=this.processDefinition.layout?this.rxProcessElementService.getGraph(this.processDefinition):this.getGraph(this.processDefinition),this.paperScroller=this.rxRappidPaperService.init(this.element.nativeElement,e,this.zoomToFit),this.onClick&&(this.paperScroller.options.paper.on("blank:pointerdown",()=>{this.onClick({processDefinition:this.processDefinition,cellView:null})}),this.paperScroller.options.paper.on("cell:pointerup",e=>{this.onClick({processDefinition:this.processDefinition,cellView:e})}))}zoomIn(){this.paperScroller.zoom(.2,{max:4})}zoomOut(){this.paperScroller.zoom(-.2,{min:.2})}getGraph(e){const t=this.rxProcessElementSearchService.filter(e,e=>e.resourceType===s.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction||e.resourceType===s.RX_PROCESS_DEFINITION.processElementResourceTypes.userTask||e.resourceType===s.RX_PROCESS_DEFINITION.processElementResourceTypes.receiveTask||e.resourceType===s.RX_PROCESS_DEFINITION.processElementResourceTypes.callActivity).length,i=new joint.shapes.bpmn.Event({size:{width:50,height:50},attrs:{".label":{fill:"gray",text:"Start"}},eventType:"start",position:{x:50,y:50}}),n=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:e.inputParams.length||0},g:{"stroke-opacity":0}},position:{x:60,y:60}}),o=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:"Actions",fill:"gray"},g:{"stroke-opacity":0}},position:{x:235,y:110}}),r=new joint.shapes.basic.Rect({size:{width:30,height:30},attrs:{text:{text:"1"},g:{"stroke-opacity":0}},position:{x:410,y:60}}),a=new joint.shapes.bpmn.Event({size:{width:50,height:50},attrs:{".label":{fill:"gray",text:s.RX_PROCESS_DEFINITION.processElementDisplayNames.endEvent}},eventType:"end",position:{x:400,y:50}}),l=new joint.shapes.basic.Rect({size:{width:200,height:50},attrs:{text:{text:String(t)}},position:{x:150,y:50},eventType:"start"}),d=new joint.shapes.bpmn.Flow({source:{x:100,y:75},target:{id:l.id}}),c=new joint.shapes.bpmn.Flow({source:{id:l.id},target:{x:400,y:75}}),p=new joint.dia.Graph;return p.addCells([i,a,l,d,c,n,r,o]),p.toJSON()}}h.\u0275fac=function(e){return new(e||h)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](s.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](l.RxProcessElementService),n["\u0275\u0275directiveInject"](s.RxProcessElementSearchService),n["\u0275\u0275directiveInject"](l.RxRappidPaperService))},h.\u0275cmp=n["\u0275\u0275defineComponent"]({type:h,selectors:[["rx-process-preview"]],inputs:{config:"config"},decls:0,vars:0,template:function(e,t){},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;height:600px;width:100%}[_nghost-%COMP%]  .joint-element{cursor:default}[_nghost-%COMP%]  .joint-link{color:#f9f9fa}[_nghost-%COMP%]  .joint-link:hover .marker-arrowheads, [_nghost-%COMP%]  .joint-link:hover .tool-remove, [_nghost-%COMP%]  .joint-link:hover .marker-vertices, [_nghost-%COMP%]  .joint-link:hover .marker-arrowheads, [_nghost-%COMP%]  .joint-link:hover .link-tools{opacity:0;cursor:default}[_nghost-%COMP%]  .joint-link .connection-wrap:hover{opacity:0}[_nghost-%COMP%]  .joint-link .connection-wrap{cursor:default}']});class g{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-process-preview",componentFactory:this.componentFactoryResolver.resolveComponentFactory(h)})}}g.\u0275fac=function(e){return new(e||g)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](p.RxViewComponentRegistryService))},g.\u0275mod=n["\u0275\u0275defineNgModule"]({type:g,declarations:[h],imports:[d.CommonModule,u.RuntimeViewModule,c.TranslateModule],exports:[h]}),g.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.CommonModule,u.RuntimeViewModule,c.TranslateModule]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-process-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ProcessDesignerComponent:()=>E,ProcessDesignerModule:()=>F,ProcessDesignerPageComponent:()=>M,ProcessDesignerPageModule:()=>T,RxProcessDesignerService:()=>R});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),a=i("lodash"),s=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-elements.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-server-actions.js"),m=i("rxjs"),f=i("./node_modules/rxjs/_esm2015/operators/index.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),v=i("./node_modules/@angular/router/fesm2015/router.js");const y=["inspectorSidebar"];function b(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-form-builder",17),n["\u0275\u0275listener"]("modelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onSelectedElementModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",e.selectedElementInspectorConfig)("model",e.selectedElementModel)("designerItemModel",t.selectedElementInspectorDesignerItemModel$)("focusEditor$",t.focusSelectedElementInspector$)("isReadOnly",e.isReadOnly)}}const x=function(e){return{content:e,variant:"info",type:"inline"}};function C(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-alert",18),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](3,x,n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.process-designer.inspector.missing-element.label")))}function S(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-code-viewer",19),n["\u0275\u0275pipe"](1,"json")),2&e){const e=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("hasToolbar",!1)("code",n["\u0275\u0275pipeBind1"](1,2,e.definitionForCodeViewer))}}function D(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"rx-designer-header",1),n["\u0275\u0275listener"]("breadcrumbSelected",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBreadcrumbSelected(t.data.guid)})("toggleDesignMode",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleDesignMode()})("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().closeDesigner.emit()})("save",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveDefinition()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-sidebar",3,4),n["\u0275\u0275elementStart"](5,"adapt-sidebar-item",5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementStart"](8,"rx-form-builder",6),n["\u0275\u0275listener"]("formInitialized",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionInspectorInitialized()})("modelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionModelChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-sidebar-item",7),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275pipe"](11,"translate"),n["\u0275\u0275template"](12,b,1,5,"rx-form-builder",8),n["\u0275\u0275template"](13,C,2,5,"ng-template",null,9,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](15,"adapt-sidebar-item",10),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementStart"](18,"rx-validation-issues",11),n["\u0275\u0275listener"]("correctIssue",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCorrectIssue(t)}),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](20,"div",12),n["\u0275\u0275elementStart"](21,"rx-blade",13),n["\u0275\u0275elementStart"](22,"rx-designer-palette",14),n["\u0275\u0275listener"]("elementDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onPaletteElementDropped(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](23,"rx-designer-canvas",15),n["\u0275\u0275listener"]("elementSelected",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCanvasElementSelected(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](24,S,2,4,"adapt-code-viewer",16),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275reference"](14),o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("breadcrumbItems",e.breadcrumbItems)("isSaveButtonDisabled",e.isSaveButtonDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",e.definitionForCodeViewer),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("openedId",0),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](6,27,"com.bmc.arsys.rx.client.process-designer.inspector.process-properties.title")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](7,29,"com.bmc.arsys.rx.client.process-designer.inspector.process-properties.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("config",e.definitionInspectorConfig)("model",e.definitionModel)("focusEditor$",o.focusDefinitionInspector$)("isReadOnly",e.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](10,31,"com.bmc.arsys.rx.client.process-designer.inspector.element-properties.title")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](11,33,"com.bmc.arsys.rx.client.process-designer.inspector.element-properties.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",e.selectedElementInspectorConfig)("ngIfElse",i),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("headerTitle",n["\u0275\u0275pipeBind1"](16,35,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275propertyInterpolate"]("tooltipText",n["\u0275\u0275pipeBind1"](17,37,"com.bmc.arsys.rx.client.designer.validation-issues.label")),n["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("issueSections",e.validationIssueSections)("definitionTypeDisplayName",n["\u0275\u0275pipeBind1"](19,39,"com.bmc.arsys.rx.client.common.process-definition.label")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("title","Palette")("isExpanded",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("tree",e.paletteElementsTree),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("configuration",e.canvasConfiguration)("graph",e.graph)("droppedElement",o.droppedElement),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.definitionForCodeViewer)}}function I(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-process-designer",1),n["\u0275\u0275listener"]("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCloseDesigner()})("definitionErrorLoading",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("definitionSaved",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDefinitionSaved(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("configuration",e.configuration)}}class R{constructor(e,t,i,n,o,r){this.rxActionTypeUtilsService=e,this.rxBundleCacheService=t,this.rxDesignerCacheService=i,this.rxGlobalCacheService=n,this.rxProcessDefinitionService=o,this.rxProcessElementRegistryService=r}buildPalette(e,t){const i=(0,a.reduce)(this.rxProcessElementRegistryService.getAll(),(e,t)=>(t.displayName&&e.push({group:t.group,label:t.displayName,paletteItem:t.paletteItem,value:{actionTypeName:this.rxProcessDefinitionService.getServerActionTypeName(t.type),resourceType:t.resourceType,type:t.type}}),e),[]),n=(0,a.reduce)(e,(e,n)=>((0,a.some)(i,e=>e.value.actionTypeName===n.actionTypeName)||e.push({group:this.rxActionTypeUtilsService.getActionTypeBundleFriendlyName(t,n)||g.RX_PROCESS_DEFINITION.standardProcessElementGroups.platformActions.name,label:n.displayName||this.rxActionTypeUtilsService.prettifyActionTypeName(n.actionTypeName),paletteItem:{border:d.RX_DESIGNER.paletteItemBorder.solid,icon:{path:n.isDeprecated?d.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.info:d.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.gear,position:d.RX_DESIGNER.paletteIconPosition.top},label:d.RX_DESIGNER.paletteItemLabel.inner,shape:d.RX_DESIGNER.paletteItemShape.rectangle},value:{actionTypeName:n.actionTypeName,resourceType:g.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction,type:this.rxProcessDefinitionService.getServerActionModelType(n.actionTypeName)}}),e),[]);return(0,a.chain)([...i,...n]).sortBy("label").reduce((e,t)=>{const i=(0,a.find)(e,{label:t.group});return i?i.children.push(t):e.push({label:t.group,children:[t]}),e},[]).sortBy("label").sortBy(e=>{var t;const i=(0,a.find)(g.RX_PROCESS_DEFINITION.processElementGroups,{name:e.label});return null!==(t=null==i?void 0:i.priority)&&void 0!==t?t:g.RX_PROCESS_DEFINITION.standardProcessElementGroups.default.priority}).value()}}R.\u0275fac=function(e){return new(e||R)(n["\u0275\u0275inject"](d.RxActionTypeUtilsService),n["\u0275\u0275inject"](d.RxBundleCacheService),n["\u0275\u0275inject"](d.RxDesignerCacheService),n["\u0275\u0275inject"](d.RxGlobalCacheService),n["\u0275\u0275inject"](g.RxProcessDefinitionService),n["\u0275\u0275inject"](g.RxProcessElementRegistryService))},R.\u0275prov=n["\u0275\u0275defineInjectable"]({token:R,factory:R.\u0275fac,providedIn:"root"});class w extends joint.dia.Graph{constructor(e){super(e.options),this.rxEndEventService=e.injector.get(p.RxEndEventService),this.rxIdService=e.injector.get(h.RxIdService),this.rxJsonParserService=e.injector.get(h.RxJsonParserService),this.rxProcessElementRegistryService=e.injector.get(g.RxProcessElementRegistryService),this.rxProcessElementSearchService=e.injector.get(g.RxProcessElementSearchService),this.rxProcessService=e.injector.get(p.RxProcessService),this.rxStartEventService=e.injector.get(p.RxStartEventService)}reset(){this.off("add"),this.off("change"),this.clear()}addDefaultElements(e){this.addCell(this.rxProcessService.getShape({definitionModel:e,id:this.get("processId")}));if((0,a.chain)(this.getCells()).reject({id:this.get("processId")}).isEmpty().value()){const e=30;this.addCells([this.rxStartEventService.getShape({position:{x:e,y:(c.RX_DESIGNER_CANVAS.paperOptions.height-e)/2}}),this.rxEndEventService.getShape({position:{x:c.RX_DESIGNER_CANVAS.paperOptions.width-2*e,y:(c.RX_DESIGNER_CANVAS.paperOptions.height-e)/2}})])}}getDefinitionFromGraph(){return Object.assign(Object.assign({},this.getDefinitionBase(this.getCell(this.get("processId")))),{flowElements:this.getFlowElements(this.getCells()),layout:this.getLayout(this.get("cells").models)})}loadGraphFromDefinition(e){return this.fromJSON(this.getJsonObject(e))}getDefinitionBase(e){return this.rxProcessService.getDefinitionFromModel(e.prop("definitionModel"))}getFlowElements(e){return(0,a.chain)(e).reject({id:this.get("processId")}).map(e=>{const t=e.prop("elementModel");return this.rxProcessElementRegistryService.get(t.type).elementService.getDefinitionFromModel(t)}).value()}getJsonObject(e){const t=this.rxJsonParserService.tryParseJson(e.layout,{cells:[]});return t.cells.forEach(i=>{const n=(0,a.chain)(t.cells).filter({parent:i.id}).map("id").value();n.length&&(i.embeds=n),i.ownerProcessDefinitionName=e.lastUpdateTime?e.name:e.guid;const o=this.rxProcessElementSearchService.findByGuid(e,this.rxIdService.get(i.id)),r=this.rxProcessElementRegistryService.get(i.type).elementService;i.elementModel=r.getModelFromDefinition(o)}),t}getLayout(e){const t=(0,a.chain)(e).reject({id:this.get("processId")}).map(e=>{if((0,a.isFunction)(e.getLayout))return this.adaptCell(e.getLayout())}).value();return t.length?JSON.stringify({cells:t}):null}adaptCell(e){return this.removeRedundantProperties(e)}removeRedundantProperties(e){let t;(0,a.has)(e,'attrs[".label"]')&&(t={".label":(0,a.clone)(e.attrs[".label"])});let i=(0,a.pick)(e,["collapsedSize","content","expanded","flowType","id","labels","parent","position","size","source","target","type","vertices","z"]);return t&&(i.attrs=t),i}}class E{constructor(e,t,i,o,r,s,d,c,p,u,h,g,v,y,b){this.injector=e,this.rxBundleCacheService=t,this.rxCommandManagerService=i,this.rxDesignerCacheService=o,this.rxGlobalCacheService=r,this.rxGuidService=s,this.rxIdService=d,this.rxOverlayService=c,this.rxProcessDataDictionaryService=p,this.rxProcessDefinitionService=u,this.rxProcessDesignerService=h,this.rxProcessElementRegistryService=g,this.rxProcessElementSearchService=v,this.rxProcessService=y,this.translateService=b,this.closeDesigner=new n.EventEmitter,this.definitionErrorLoading=new n.EventEmitter,this.definitionSaved=new n.EventEmitter,this.bundleIdSubject=new m.BehaviorSubject(null),this.definitionModelChangeSubject=new m.Subject,this.selectedElementModelChangeSubject=new m.Subject,this.definitionNameSubject=new m.BehaviorSubject(null),this.destroyed$=new m.ReplaySubject(1),this.focusDefinitionInspectorSubject=new m.BehaviorSubject(null),this.focusSelectedElementInspectorSubject=new m.BehaviorSubject(null),this.graph=new w({injector:this.injector,options:{processId:this.rxGuidService.generate()}}),this.graphChangeSubject=new m.Subject,this.graphChange$=this.graphChangeSubject.pipe((0,f.shareReplay)(1)),this.isDesignModeSubject=new m.BehaviorSubject(!0),this.selectedElementGuidSubject=new m.BehaviorSubject(null),this.selectedElementGuid$=this.selectedElementGuidSubject.pipe((0,f.distinctUntilChanged)(a.isEqual),(0,f.shareReplay)(1)),this.paletteElementsTree$=(0,m.forkJoin)([this.rxBundleCacheService.getActionTypes(),this.rxGlobalCacheService.getBundleDescriptors(),this.rxGlobalCacheService.getFunctionDescriptors()]).pipe((0,f.tap)(([e,t,i])=>{this.rxDesignerCacheService.setActionTypes(e),this.rxDesignerCacheService.setFunctionDescriptors(i)}),(0,f.map)(([e,t])=>this.rxProcessDesignerService.buildPalette(e,t)),(0,f.shareReplay)(1)),this.definition$=(0,m.combineLatest)([this.definitionNameSubject,this.paletteElementsTree$]).pipe((0,f.switchMap)(([e])=>e?this.rxProcessDefinitionService.get(e):this.rxProcessDefinitionService.getNew()),(0,f.shareReplay)(1)),this.isReadOnly$=(0,m.combineLatest)([this.definition$,this.bundleIdSubject.pipe((0,f.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e)))]).pipe((0,f.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,f.distinctUntilChanged)(),(0,f.shareReplay)(1)),this.definitionModelFromDefinition$=this.definition$.pipe((0,f.map)(e=>this.rxProcessService.getModelFromDefinition(e,this.configuration.bundleId))),this.graph$=(0,m.combineLatest)([this.definition$,this.definitionModelFromDefinition$,this.isReadOnly$]).pipe((0,f.tap)(([e,t,i])=>{i||(this.graph.on("add",(e,t,i)=>{this.graphChangeSubject.next(this.graph)}),this.graph.on("change",(e,t,i)=>{e.changed.position||this.graphChangeSubject.next(this.graph)})),this.graph.loadGraphFromDefinition(e),this.graph.addDefaultElements(t)}),(0,f.map)(()=>this.graph),(0,f.shareReplay)(1)),this.definitionModelFromGraph$=this.graphChange$.pipe((0,f.map)(e=>e.getCell(e.get("processId")).prop("definitionModel")),(0,f.distinctUntilChanged)(a.isEqual)),this.definitionModel$=(0,m.merge)(this.definitionModelFromDefinition$,this.definitionModelFromGraph$).pipe((0,f.shareReplay)(1)),this.definitionInspectorConfig$=this.definitionModel$.pipe((0,f.map)(e=>this.rxProcessService.getInspectorConfig(e))),this.selectedElementModelFromDefinition$=(0,m.combineLatest)([this.definition$,this.selectedElementGuid$]).pipe((0,f.map)(([e,t])=>{let i=null;if(t){const n=this.rxProcessElementSearchService.find(e,{guid:t});if(n){const o=(0,a.find)(JSON.parse(e.layout).cells,{id:this.rxIdService.getBase(t)});i=this.rxProcessElementRegistryService.get(o.type).elementService.getModelFromDefinition(n)}}return i})),this.selectedElementModelFromGraph$=(0,m.combineLatest)([this.graphChange$,this.selectedElementGuid$]).pipe((0,f.map)(([e,t])=>{let i=null;if(t){i=e.getCell(this.rxIdService.getBase(t)).prop("elementModel")}return i})),this.selectedElementModel$=(0,m.merge)(this.selectedElementModelFromDefinition$,this.selectedElementModelFromGraph$).pipe((0,f.tap)(e=>{var t;(null===(t=this.inspectorSidebar)||void 0===t?void 0:t.isPanelOpened)&&((0,a.isEmpty)(e)?this.openInspectorSidebarPanel(0):this.openInspectorSidebarPanel(1))}),(0,f.shareReplay)(1)),this.selectedElementInspectorConfig$=(0,m.combineLatest)([this.selectedElementModel$,this.definitionModel$]).pipe((0,f.map)(([e,t])=>{let i=null;if(e){i=this.rxProcessElementRegistryService.get(e.type).elementService.getInspectorConfig(e,{processDefinitionModel:t})}return i})),this.definitionForCodeViewer$=this.isDesignModeSubject.pipe((0,f.switchMap)(e=>e?(0,m.of)(null):this.graph$.pipe((0,f.take)(1),(0,f.map)(e=>e.getDefinitionFromGraph())))),this.bundleFriendlyName$=this.bundleIdSubject.pipe((0,f.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.canvasConfiguration$=this.isReadOnly$.pipe((0,f.map)(e=>({elementRegistry:this.rxProcessElementRegistryService,enableMultiSelection:!0,interactive:!e,isReadOnly:e,showToolbar:!0}))),this.breadcrumbItems$=(0,m.combineLatest)([this.definitionModel$,this.selectedElementModel$]).pipe((0,f.map)(([e,t])=>{const i=[{label:e.name||`<${this.translateService.instant("com.bmc.arsys.rx.client.process-designer.new-process.label")}>`,data:{}}];return t&&i.push({label:t.label,data:{}}),i})),this.elementValidationIssueSections$=this.graphChange$.pipe((0,f.switchMap)(e=>{const t=(0,a.reject)(e.getCells(),{id:e.get("processId")});return(0,m.forkJoin)(t.map(e=>{const i=e.prop("elementModel"),n=e.prop("type"),o=this.rxProcessElementRegistryService.get(n);return o.elementService.validate(i,(0,a.reject)(t,{id:i.id})).pipe((0,f.map)(t=>({title:e.prop("elementModel").label||this.translateService.instant(o.displayName),issues:t})))}))})),this.processValidationIssueSection$=this.graphChange$.pipe((0,f.switchMap)(e=>{const t=e.getCell(e.get("processId"));return this.rxProcessService.validate(t.prop("definitionModel"),(0,a.reject)(e.getCells(),{id:t.id}))}),(0,f.map)(e=>({title:this.translateService.instant("com.bmc.arsys.rx.client.process-definition.label"),issues:e}))),this.validationIssueSections$=(0,m.combineLatest)([this.processValidationIssueSection$,this.elementValidationIssueSections$]).pipe((0,f.map)(([e,t])=>{const i=[];return(0,a.isEmpty)(e.issues)||i.push(e),t.forEach(e=>{(0,a.isEmpty)(e.issues)||i.push(e)}),i}),(0,f.shareReplay)(1)),this.hasValidationErrors$=this.validationIssueSections$.pipe((0,f.map)(e=>(0,a.some)(e,e=>(0,a.find)(e.issues,{type:l.ValidationIssueType.Error}))),(0,f.distinctUntilChanged)(),(0,f.shareReplay)(1)),this.isSaveButtonDisabled$=(0,m.combineLatest)([this.hasValidationErrors$,this.isReadOnly$]).pipe((0,f.map)(([e,t])=>e||t),(0,f.startWith)(!0)),this.selectedElementInspectorDesignerItemModel$=(0,m.combineLatest)([this.selectedElementModel$,this.graph$]).pipe((0,f.map)(([e,t])=>({elementModel:e,graph:t}))),this.focusDefinitionInspector$=this.focusDefinitionInspectorSubject.asObservable(),this.focusSelectedElementInspector$=this.focusSelectedElementInspectorSubject.asObservable(),this.vm$=(0,m.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.canvasConfiguration$,this.definitionForCodeViewer$,this.definitionInspectorConfig$,this.definitionModel$,this.graph$,this.hasValidationErrors$,this.isReadOnly$,this.isSaveButtonDisabled$,this.paletteElementsTree$,this.selectedElementInspectorConfig$,this.selectedElementModel$,this.validationIssueSections$]).pipe((0,f.map)(([e,t,i,n,o,r,a,s,l,d,c,p,u,m])=>({breadcrumbItems:e,bundleFriendlyName:t,canvasConfiguration:i,definitionForCodeViewer:n,definitionInspectorConfig:o,definitionModel:r,graph:a,hasValidationErrors:s,isReadOnly:l,isSaveButtonDisabled:d,paletteElementsTree:c,selectedElementInspectorConfig:p,selectedElementModel:u,validationIssueSections:m})))}ngOnInit(){this.definitionModelChangeSubject.pipe((0,f.debounceTime)(300),(0,f.withLatestFrom)(this.graph$),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=t.getCell(t.get("processId")),n=this.rxCommandManagerService.get();n.initBatchCommand(),(0,a.forEach)(e,(e,t)=>{i.prop(`definitionModel/${t}`,e)}),n.storeBatchCommand()}),this.selectedElementModelChangeSubject.pipe((0,f.debounceTime)(300),(0,f.withLatestFrom)(this.graph$),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{const i=t.getCell(this.rxIdService.getBase(e.guid)),n=this.rxCommandManagerService.get();n.initBatchCommand(),(0,a.forEach)(e,(e,t)=>{i.prop(`elementModel/${t}`,e)}),n.storeBatchCommand()})}ngOnChanges(e){e.configuration.currentValue.definitionName&&(this.graph.reset(),this.rxProcessDataDictionaryService.clear(),this.isDesignModeSubject.next(!0),this.definitionNameSubject.next(e.configuration.currentValue.definitionName)),e.configuration.currentValue.bundleId&&this.bundleIdSubject.next(e.configuration.currentValue.bundleId)}ngOnDestroy(){this.rxProcessDataDictionaryService.clear(),this.bundleIdSubject.complete(),this.definitionModelChangeSubject.complete(),this.definitionNameSubject.complete(),this.focusDefinitionInspectorSubject.complete(),this.focusSelectedElementInspectorSubject.complete(),this.graphChangeSubject.complete(),this.isDesignModeSubject.complete(),this.selectedElementGuidSubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete()}canDeactivate(){return!0}onBreadcrumbSelected(e){e?this.openInspectorSidebarPanel(1):this.openInspectorSidebarPanel(0)}onCanvasElementSelected(e){e||this.openInspectorSidebarPanel(0),this.selectedElementGuidSubject.next(e)}onCorrectIssue(e){this.openInspectorSidebarPanel(e.data.inspectorTabIndex),0===e.data.inspectorTabIndex?setTimeout(()=>this.focusDefinitionInspectorSubject.next({editorName:e.data.propertyName,data:e.data}),10):1===e.data.inspectorTabIndex&&(this.selectedElementGuidSubject.next(e.data.guid),setTimeout(()=>this.focusSelectedElementInspectorSubject.next({editorName:e.data.propertyName,data:e.data}),10))}onDefinitionInspectorInitialized(){this.focusDefinitionInspectorSubject.next({editorName:"name",data:{}})}onDefinitionModelChange(e){this.definitionModelChangeSubject.next(e)}onPaletteElementDropped(e){this.droppedElement=e}onSelectedElementModelChange(e){this.selectedElementModelChangeSubject.next(e)}saveDefinition(){this.graph$.pipe((0,f.take)(1),(0,f.map)(e=>e.getDefinitionFromGraph())).subscribe()}toggleDesignMode(){this.isDesignModeSubject.next(!this.isDesignModeSubject.value)}openInspectorSidebarPanel(e){this.inspectorSidebar.openPanel(e)}}E.\u0275fac=function(e){return new(e||E)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](d.RxBundleCacheService),n["\u0275\u0275directiveInject"](d.RxCommandManagerService),n["\u0275\u0275directiveInject"](d.RxDesignerCacheService),n["\u0275\u0275directiveInject"](d.RxGlobalCacheService),n["\u0275\u0275directiveInject"](h.RxGuidService),n["\u0275\u0275directiveInject"](h.RxIdService),n["\u0275\u0275directiveInject"](d.RxOverlayService),n["\u0275\u0275directiveInject"](g.RxProcessDataDictionaryService),n["\u0275\u0275directiveInject"](g.RxProcessDefinitionService),n["\u0275\u0275directiveInject"](R),n["\u0275\u0275directiveInject"](g.RxProcessElementRegistryService),n["\u0275\u0275directiveInject"](g.RxProcessElementSearchService),n["\u0275\u0275directiveInject"](p.RxProcessService),n["\u0275\u0275directiveInject"](r.TranslateService))},E.\u0275cmp=n["\u0275\u0275defineComponent"]({type:E,selectors:[["rx-process-designer"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](y,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inspectorSidebar=e.first)}},inputs:{configuration:"configuration"},outputs:{closeDesigner:"closeDesigner",definitionErrorLoading:"definitionErrorLoading",definitionSaved:"definitionSaved"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"bundleName","breadcrumbItems","isSaveButtonDisabled","breadcrumbSelected","toggleDesignMode","closeDesigner","save"],[1,"rx-designer-component",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],["inspectorSidebar",""],["iconClass","d-icon-pencil",3,"headerTitle","tooltipText"],[3,"config","model","focusEditor$","isReadOnly","formInitialized","modelChange"],["iconClass","d-icon-gear",3,"headerTitle","tooltipText"],["rxInspector","",3,"config","model","designerItemModel","focusEditor$","isReadOnly","modelChange",4,"ngIf","ngIfElse"],["missingElementAlert",""],[3,"headerTitle","tooltipText","iconClass"],[3,"issueSections","definitionTypeDisplayName","correctIssue"],[1,"main"],["rx-id","palette",3,"title","isExpanded"],[3,"tree","elementDropped"],[3,"configuration","graph","droppedElement","elementSelected"],["class","full-size","theme","light","lang","javascript",3,"hasToolbar","code",4,"ngIf"],["rxInspector","",3,"config","model","designerItemModel","focusEditor$","isReadOnly","modelChange"],[1,"p-3","definition-valid-message",3,"config"],["theme","light","lang","javascript",1,"full-size",3,"hasToolbar","code"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,D,25,41,"ng-container",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[o.NgIf,c.RxDesignerHeaderComponent,s.AdaptSidebarComponent,s.AdaptSidebarItemComponent,c.FormBuilderComponent,l.RxValidationIssuesComponent,l.RxBladeComponent,c.RxDesignerPaletteComponent,c.RxDesignerCanvasComponent,c.InspectorDirective,s.AdaptAlertComponent,s.AdaptCodeViewerComponent],pipes:[o.AsyncPipe,r.TranslatePipe,o.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]     rx-blade .content{z-index:100}[_nghost-%COMP%]     .adapt-sidebar-main{padding:0}[_nghost-%COMP%]     .adapt-sidebar-main .main{height:100%}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-panel-content{padding:0}[_nghost-%COMP%]     adapt-accordion-tab>.card:first-child{border:0}[_nghost-%COMP%]     .joint-element .body{stroke:#626668}[_nghost-%COMP%]     .joint-element polygon{stroke-width:2}[_nghost-%COMP%]     .joint-element path{stroke:#626668}.rx-designer-component[_ngcontent-%COMP%]{height:calc(100% - 50px)}.rx-designer-component[_ngcontent-%COMP%]   rx-designer-canvas[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0}']}),joint.shapes.rx=joint.shapes.rx||{};class F{constructor(){(0,a.assign)(joint.shapes.bpmn.icons,d.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons)}}F.\u0275fac=function(e){return new(e||F)},F.\u0275mod=n["\u0275\u0275defineNgModule"]({type:F,declarations:[E],imports:[s.AdaptAlertModule,s.AdaptCodeViewerModule,s.AdaptSidebarModule,s.AdaptTabsModule,o.CommonModule,l.RxBladeModule,c.RxDesignerCanvasModule,c.RxDesignerHeaderModule,c.RxDesignerPaletteModule,c.RxFormBuilderModule,c.RxInspectorModule,l.RxJsonViewerModule,p.RxProcessElementsModule,u.RxServerActionsModule,l.RxValidationIssuesModule,r.TranslateModule],exports:[E]}),F.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[s.AdaptAlertModule,s.AdaptCodeViewerModule,s.AdaptSidebarModule,s.AdaptTabsModule,o.CommonModule,l.RxBladeModule,c.RxDesignerCanvasModule,c.RxDesignerHeaderModule,c.RxDesignerPaletteModule,c.RxFormBuilderModule,c.RxInspectorModule,l.RxJsonViewerModule,p.RxProcessElementsModule,u.RxServerActionsModule,l.RxValidationIssuesModule,r.TranslateModule]]});class M{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.router=t,this.rxBundleCacheService=i,this.rxComponentCanDeactivateGuard=n,this.rxDefinitionNameService=o,this.rxPageTitleService=r,this.rxUtilityModalsService=a,this.translateService=s,this.isInitialized=!1}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewProcess=!e,this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.process-designer.title")]),this.configuration=Object.assign(Object.assign({},this.configuration),{bundleId:this.rxBundleCacheService.bundleId,definitionName:e})})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}canDeactivate(){var e,t;return null===(t=null===(e=this.processDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}onCloseDesigner(){this.router.navigate([d.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"process-definitions"])}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}onDefinitionSaved(e){this.isNewProcess&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}}M.\u0275fac=function(e){return new(e||M)(n["\u0275\u0275directiveInject"](v.ActivatedRoute),n["\u0275\u0275directiveInject"](v.Router),n["\u0275\u0275directiveInject"](d.RxBundleCacheService),n["\u0275\u0275directiveInject"](d.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](d.RxDefinitionNameService),n["\u0275\u0275directiveInject"](d.RxPageTitleService),n["\u0275\u0275directiveInject"](l.RxUtilityModalsService),n["\u0275\u0275directiveInject"](r.TranslateService))},M.\u0275cmp=n["\u0275\u0275defineComponent"]({type:M,selectors:[["rx-process-designer-page"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](E,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.processDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","closeDesigner","definitionErrorLoading","definitionSaved",4,"ngIf"],[3,"configuration","closeDesigner","definitionErrorLoading","definitionSaved"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,I,1,1,"rx-process-designer",0),2&e&&n["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[o.NgIf,E],encapsulation:2});class T{}T.\u0275fac=function(e){return new(e||T)},T.\u0275mod=n["\u0275\u0275defineNgModule"]({type:T,declarations:[M],imports:[o.CommonModule,F],exports:[M]}),T.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,F]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-process-elements.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxEndEventRegistrationModule:()=>R,RxEndEventService:()=>x,RxExpressionInputMapInspectorWidgetComponent:()=>F,RxExpressionInputMapInspectorWidgetModule:()=>P,RxProcessAction:()=>O,RxProcessActionExpressionConfigurator:()=>M,RxProcessActionRegistrationModule:()=>A,RxProcessActionService:()=>T,RxProcessActionView:()=>N,RxProcessElementService:()=>$,RxProcessElementsModule:()=>L,RxProcessService:()=>E,RxProcessShapeMixin:()=>C,RxProcessShapeViewMixin:()=>D,RxRappidPaperService:()=>q,RxStartEventRegistrationModule:()=>B,RxStartEventService:()=>j,rx:()=>G});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),s=i("rxjs"),l=i("lodash"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),m=i("./node_modules/rxjs/_esm2015/operators/index.js"),f=i("./node_modules/@angular/common/fesm2015/common.js"),h=i("./node_modules/@angular/forms/fesm2015/forms.js"),g=i("./node_modules/backbone/backbone.js");const v=["expressionInputMapInspector"];function y(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-expression-form-control",3),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).$implicit,i=n["\u0275\u0275nextContext"]().ngIf,o=n["\u0275\u0275nextContext"]();return o.openExpressionEditor(t,i,o.expressionInputMapInspectorElementRef)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().ngIf;n["\u0275\u0275property"]("options",e.options)("propertyPath",e.name)("ngModel",i.inputMap[e.name])}}function b(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",null,1),n["\u0275\u0275template"](2,y,1,3,"rx-expression-form-control",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.config)}}class x{constructor(e,t){this.rxStringService=e,this.translateService=t}getDefinitionFromModel(e){return{description:e.description,guid:e.guid,name:e.name,resourceType:e.resourceType}}getInspectorConfig(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"label",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.label.label")}},{name:"description",component:p.TextareaFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{name:"guid",component:p.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label")}}]}]}getModelFromDefinition(e){let t={description:"",guid:null,label:"",name:a.RX_PROCESS_DEFINITION.processElementDisplayNames.endEvent,resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.endEvent,type:a.RX_PROCESS_DEFINITION.processElementTypes.endEvent};return e&&(t=Object.assign(Object.assign({},t),{description:e.description,guid:e.guid,label:e.name,name:e.name,resourceType:e.resourceType})),t}getShape(e){return new joint.shapes.rx.EndEvent({elementModel:this.getModelFromDefinition(),position:e.position})}setCommonDataDictionaryBranch(e,t){}validate(e,t){const i=[];t.filter(t=>t.prop("targetNode")===e.guid).length<1&&i.push({type:d.ValidationIssueType.Warning,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.is-required.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.inbound-sequence-flow.label")}),data:{guid:e.guid,inspectorTabIndex:1}});const n=t.filter(t=>t.prop("sourceNode")===e.guid);return(0,l.isEmpty)(n)||i.push({type:d.ValidationIssueType.Warning,description:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.end-event.validation.outbound-sequence-flow.message"),data:{guid:e.guid,inspectorTabIndex:1}}),this.rxStringService.isEmptySafe(e.label)&&(0,l.some)(t,t=>t.prop("label")===e.label)&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.must-be-unique.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.label.label")}),data:{guid:e.guid,inspectorTabIndex:1,propertyName:"label"}}),(0,s.of)(i)}}function C(e){return class extends e{constructor(){super(...arguments),this.labelPath="content"}initialize(e){super.initialize(e),this.on("change:size",this.onSizeChange),this.on("change:position",this.onPositionChange),this.on("change:id",this.onIdChange),this.on("change:elementModel",this.onElementModelChange),this.prop("elementModel/guid",r.RxRootInjector.injector.get(c.RxIdService).get(this.get("id")));const t=this.get("labelPath")||"content";this.prop("elementModel/label",this.prop(t))}getCommandManager(){return r.RxRootInjector.injector.get(r.RxCommandManagerService).get()}canBeEmbedded(e,t){const i=!(0,l.isEmpty)(t.model.getNeighbors(this)),n=(0,l.chain)(this.getEmbeddedCells()).filter({isBoundaryEvent:!0}).some(e=>!(0,l.isEmpty)(t.model.getNeighbors(e)));return!i&&!n}canEmbedElement(e,t){return!1}getLabel(){return this.prop("elementModel/label")}getLayout(){return(0,l.omit)(this.toJSON(),["elementModel","embeds","layout","parentProcessDefinition","ownerProcessDefinitionName","localizableProperties","inputMapFields"])}getParentId(){return this.get("parent")}onActivityTypeChange(e,t){switch(t){case"task":e.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":2,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"},rect:{rx:4,ry:4}});break;case"event-sub-process":e.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":2,"stroke-dasharray":"1,2"},path:{ref:".outer"},image:{ref:".outer"},rect:{rx:4,ry:4}});break;case"call-activity":e.attr({".inner":{visibility:"hidden"},".outer":{"stroke-width":4,"stroke-dasharray":"none"},path:{ref:".outer"},image:{ref:".outer"},rect:{rx:4,ry:4}})}}updateContent(){const e=this.get("content"),t=this.id?e:(0,l.truncate)(e,{length:20}),i=t===e?"":e;joint.env.test("svgforeignobject")?this.attr({".content":{html:(0,l.escape)(t),title:i}}):this.attr({".content":{text:t,title:i}})}updateName(){this.prop("elementModel/name",this.getLabel()||this.get("defaultName"))}onIdChange(e,t){const i=e.prop("elementModel/guid");i&&e.prop("lastId",r.RxRootInjector.injector.get(c.RxIdService).getBase(i),{silent:!0}),e.prop("elementModel/guid",r.RxRootInjector.injector.get(c.RxIdService).get(t),{silent:!0})}onElementModelChange(e,t,i){if("elementModel/label"===i.propertyPath){const t=this.get("labelPath")||"content";t&&e.prop(t,this.getLabel())}this.updateName()}onPositionChange(e,t,i){if(!i.translateBy&&i.propertyValue){const e=this.previous("position"),i={cx:e.x-t.x,cy:e.y-t.y};this.getEmbeddedCells().forEach(e=>{e._snapToParentBorder&&e._snapToParentBorder(this,i)})}}onSizeChange(e){e.getEmbeddedCells().forEach(e=>{e.isBoundaryEvent&&e._snapToParentBorder&&e._snapToParentBorder(e)})}}}x.\u0275fac=function(e){return new(e||x)(n["\u0275\u0275inject"](c.RxStringService),n["\u0275\u0275inject"](o.TranslateService))},x.\u0275prov=n["\u0275\u0275defineInjectable"]({token:x,factory:x.\u0275fac,providedIn:"root"});class S extends(C(joint.shapes.bpmn.Event)){initialize(e){super.initialize(e)}defaults(){return joint.util.deepSupplement({attrs:{".label":{fill:"gray"}},defaultName:a.RX_PROCESS_DEFINITION.processElementDisplayNames.endEvent,eventType:"end",icon:"transparent",labelPath:"attrs/.label/text",size:{width:30,height:30},type:a.RX_PROCESS_DEFINITION.processElementTypes.endEvent},joint.shapes.bpmn.Event.prototype.defaults)}}function D(e){return class extends e{initialize(e){super.initialize(e)}canInteract(){return(0,l.isFunction)(this.paper.options.interactive)?this.paper.options.interactive(this):this.paper.options.interactive}prepareEmbedding(){const e=!(0,l.isEmpty)(this.paper.model.getNeighbors(this.model)),t=(0,l.chain)(this.model.getEmbeddedCells()).filter({isBoundaryEvent:!0}).some(function(e){return!(0,l.isEmpty)(this.paper.model.getNeighbors(e))});!this.model.get("parent")||e||t||joint.dia.ElementView.prototype.prepareEmbedding.apply(this,arguments)}getEmbeddedBBox(){let e;const t=(0,l.filter)(this.model.getEmbeddedCells(),e=>e&&"rx.SequenceFlow"!==e.get("type")&&!e.isBoundaryEvent);if(t.length){const i=(0,l.chain)(t).map(e=>{var t=this.paper.findViewByModel(e);return new joint.V(t.el).bbox(!1,this.paper.viewport)}).value(),n=(0,l.min)((0,l.map)(i,e=>e.x)),o=(0,l.min)((0,l.map)(i,e=>e.y)),r=(0,l.max)((0,l.map)(i,e=>e.x+e.width)),a=(0,l.max)((0,l.map)(i,e=>e.y+e.height));e=joint.g.rect(n,o,r-n,a-o)}else e=joint.g.rect(0,0,0,0);return e}}}class I extends(D(joint.dia.ElementView)){initialize(e){super.initialize(e)}sgResize(e){this.scalableNode.attr("transform","scale(0.5,0.5)"),super.update()}}class R{constructor(e,t,i){t.register({displayName:i.instant("com.bmc.arsys.rx.client.process-designer.elements.end-event.display-name.label"),elementService:e,group:a.RX_PROCESS_DEFINITION.standardProcessElementGroups.events.name,paletteItem:{border:r.RX_DESIGNER.paletteItemBorder.bold,label:r.RX_DESIGNER.paletteItemLabel.outer,shape:r.RX_DESIGNER.paletteItemShape.circle},resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.endEvent,shapeClass:S,shapeType:"EndEvent",type:a.RX_PROCESS_DEFINITION.processElementTypes.endEvent,viewShapeClass:I,viewShapeType:"EndEventView"})}}R.\u0275fac=function(e){return new(e||R)(n["\u0275\u0275inject"](x),n["\u0275\u0275inject"](a.RxProcessElementRegistryService),n["\u0275\u0275inject"](o.TranslateService))},R.\u0275mod=n["\u0275\u0275defineNgModule"]({type:R}),R.\u0275inj=n["\u0275\u0275defineInjector"]({});class w extends joint.dia.Element{constructor(e){super(e),this.markup="<g></g>"}defaults(){return joint.util.defaultsDeep({position:{x:0,y:0},size:{width:1,height:1},type:"rx.Process"},super.defaults)}}class E{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxStringService=t,this.translateService=i}getDefinitionFromModel(e){return{allowOverlay:e.customizationOptions.allowOverlay,contextKeyParam:e.contextKeyParam,description:e.description,guid:e.guid,inputParams:e.inputParams,isEnabled:e.isEnabled,localVariables:e.localVariables,name:this.rxDefinitionNameService.getDefinitionName(e.bundleId,e.name),outputParams:e.outputParams,overlayDescriptor:e.overlayDescriptor,overlayGroupId:e.overlayGroupId,permissions:e.permissions,runAsUser:a.RX_PROCESS_DEFINITION.runAsUser[e.runAsUser].definitionValue,scope:e.customizationOptions.scope}}getInspectorConfig(e){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"name",component:p.TextFormControlComponent,isDisabled:Boolean(e.lastUpdateTime),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"description",component:p.TextareaFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{name:"guid",component:p.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label")}},{name:"owner",component:p.TextFormControlComponent,hidden:!Boolean(e.owner),isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.owner.label")}},{name:"lastUpdateTime",component:p.TextFormControlComponent,hidden:!Boolean(e.lastUpdateTime),isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-date.label")}},{name:"lastChangedBy",component:p.TextFormControlComponent,hidden:!Boolean(e.lastChangedBy),isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-by.label")}},{component:p.RxRevertCustomizationComponent,options:{overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor}},{name:"customizationOptions",component:p.CustomizationOptionsComponent,options:{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.process-definition.label").toLowerCase(),allowOverlay:e.customizationOptions.allowOverlay,scope:e.customizationOptions.scope,overlayGroupId:e.overlayGroupId,overlayDescriptor:e.overlayDescriptor}},{name:"isEnabled",component:p.SwitchFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.process-enabled.label")}},{name:"runAsUser",component:p.SelectFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.run-as.label"),tooltip:new r.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.run-as.tooltip")),options:[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.administrator.label"),id:a.RX_PROCESS_DEFINITION.runAsUser.administrator.modelValue},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.current-user.label"),id:a.RX_PROCESS_DEFINITION.runAsUser.currentUser.modelValue}]}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.variables.label"),controls:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),controls:[{name:"permissions",component:p.RxPermissionEditorComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),type:"process"}}]}]}getModelFromDefinition(e,t){return{bundleId:t,contextKeyParam:e.contextKeyParam,customizationOptions:{allowOverlay:e.allowOverlay,scope:e.scope},description:e.description,guid:e.guid,inputParams:e.inputParams,isEnabled:e.isEnabled,lastChangedBy:e.lastChangedBy,lastUpdateTime:e.lastUpdateTime,localVariables:e.localVariables,name:Boolean(e.lastUpdateTime)?this.rxDefinitionNameService.getDisplayName(e.name):e.name,outputParams:e.outputParams,overlayDescriptor:null,overlayGroupId:e.overlayGroupId,owner:e.owner,permissions:e.permissions,runAsUser:e.runAsUser?a.RX_PROCESS_DEFINITION.runAsUser.currentUser.modelValue:a.RX_PROCESS_DEFINITION.runAsUser.administrator.modelValue}}getShape(e){return new w(e)}validate(e,t){const i=[];this.rxStringService.isEmptySafe(e.name)&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")}),data:{propertyName:"name",inspectorTabIndex:0}}),e.name&&!u.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.name)&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")}),data:{propertyName:"name",inspectorTabIndex:0}});1!=t.filter(e=>e.prop("type")===a.RX_PROCESS_DEFINITION.processElementTypes.startEvent).length&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.validation.single-start-event.message"),data:{inspectorTabIndex:0}});const n=t.filter(e=>e.prop("type")===a.RX_PROCESS_DEFINITION.processElementTypes.endEvent);return(0,l.isEmpty)(n)&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.validation.no-end-event.label"),data:{inspectorTabIndex:0}}),(0,s.of)(i)}}E.\u0275fac=function(e){return new(e||E)(n["\u0275\u0275inject"](r.RxDefinitionNameService),n["\u0275\u0275inject"](c.RxStringService),n["\u0275\u0275inject"](o.TranslateService))},E.\u0275prov=n["\u0275\u0275defineInjectable"]({token:E,factory:E.\u0275fac,providedIn:"root"});class F extends p.InspectorWidgetBase{constructor(e,t,i,n,o){super(o),this.renderer=e,this.rxDesignerCacheService=t,this.rxExpressionEditorService=i,this.rxIdService=n,this.injector=o,this.destroyed$=new s.ReplaySubject(1)}ngOnInit(){this.elementModel$=this.designerItemModel.pipe((0,m.pluck)("elementModel"),(0,m.takeUntil)(this.destroyed$)),this.graph$=this.designerItemModel.pipe((0,m.pluck)("graph"),(0,m.takeUntil)(this.destroyed$)),this.patchConfig(this.options)}ngOnChanges(e){(0,l.isEqual)(e.options.currentValue,e.options.previousValue)||this.patchConfig(e.options.currentValue)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}openExpressionEditor(e,t,i){this.graph$.pipe((0,m.take)(1)).subscribe(n=>{this.rxExpressionEditorService.openEditor({expressionConfigurator:this.options.expressionConfigurator,expressionPropertyNavigator:{getProperties:this.getExpressionProperties.bind(this,t,i)},isReadOnly:!1,property:{path:`inputMap/${e.name}`,value:t.inputMap[e.name],label:e.options.label}}).pipe((0,m.takeUntil)(this.destroyed$)).subscribe(e=>{n.getCell(this.rxIdService.getBase(t.guid)).prop(`elementModel/${e.path}`,e.value)})})}getExpressionProperties(e,t){return(0,s.of)(e.inputMap).pipe((0,m.map)(e=>Array.from(this.renderer.selectRootElement(t.nativeElement,!0).querySelectorAll("rx-expression-form-control")).map(t=>{const i=t.getAttribute("property-path");return{path:`inputMap/${i}`,value:e[i],label:t.getAttribute("property-label")}})))}patchConfig(e){this.config=e.expressionInputMapInspectorOptions.map(t=>({name:t.name,options:{label:t.label,dataDictionary$:e.expressionConfigurator.getDataDictionary(`inputMap/${t.name}`),operators:e.expressionConfigurator.getOperators(`inputMap/${t.name}`)}}))}}F.\u0275fac=function(e){return new(e||F)(n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](r.RxDesignerCacheService),n["\u0275\u0275directiveInject"](p.RxExpressionEditorService),n["\u0275\u0275directiveInject"](c.RxIdService),n["\u0275\u0275directiveInject"](n.Injector))},F.\u0275cmp=n["\u0275\u0275defineComponent"]({type:F,selectors:[["rx-expression-input-map-inspector-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](v,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.expressionInputMapInspectorElementRef=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],["expressionInputMapInspector",""],[3,"options","propertyPath","ngModel","events",4,"ngFor","ngForOf"],[3,"options","propertyPath","ngModel","events"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,b,3,1,"div",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.elementModel$))},directives:[f.NgIf,f.NgForOf,p.ExpressionFormControlComponent,h.NgControlStatus,h.NgModel],pipes:[f.AsyncPipe],styles:["[_nghost-%COMP%]     rx-expression-form-control:not(:last-child) button{margin-bottom:5px}"]});class M extends r.RxServerActionExpressionConfigurator{constructor(e){super(e),this.injector=e,this.configureForProperty({propertyPath:/outputMap\/.*/,dataDictionary$:this.getOutputMapDataDictionary()})}getDataDictionaryService(){return this.injector.get(a.RxProcessDataDictionaryService)}getOutputMapDataDictionary(){return this.commonDataDictionary$}}class T extends r.RxServerActionService{constructor(e){super(e),this.injector=e,this.rxActionTypeUtilsService=e.get(r.RxActionTypeUtilsService),this.rxProcessDataDictionaryService=e.get(a.RxProcessDataDictionaryService)}getDefinitionFromModel(e){return{actionTypeName:e.actionTypeName,description:e.description,guid:e.guid,inputMap:this.getInputMapFromModel(e),multiInstanceLoopDefinition:e.multiInstanceLoopDefinition,name:e.name,outputMap:e.outputMap,resourceType:e.resourceType,runAsUser:a.RX_PROCESS_DEFINITION.runAsUser[e.runAsUser].definitionValue}}getExpressionConfigurator(){var e;return null!==(e=this.expressionConfigurator)&&void 0!==e?e:this.expressionConfigurator=new(this.getExpressionConfiguratorClass())(this.injector)}getInspectorConfig(e,t){const i=[{name:"actionTypeName",component:p.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.server-action-properties.action-type-name.label")}},{name:"label",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.label.label"),required:!0}},{name:"description",component:p.TextareaFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{name:"guid",component:p.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label")}},{name:"runAsUser",component:p.SelectFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.process.run-as.label"),tooltip:new r.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.inspector.run-as.tooltip")),options:[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.administrator.label"),id:a.RX_PROCESS_DEFINITION.runAsUser.administrator.modelValue},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.current-user.label"),id:a.RX_PROCESS_DEFINITION.runAsUser.currentUser.modelValue},{name:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.process-action.inherit-from-process.label"),id:a.RX_PROCESS_DEFINITION.runAsUser.inheritFromProcess.modelValue}]}}];return e.isDeprecated&&i.unshift({name:"isDeprecated",component:p.LabelFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.server-action-properties.deprecated.label",{definitionType:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.process.label")})}}),[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:i},{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.element-properties.input-map.label"),controls:[this.getInputMapInspectorWidgetConfig(e)]},{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.element-properties.output-map.label"),controls:[{name:"outputMap",component:p.AssignmentExpressionListFormControlComponent,options:{confirmationMessage:"com.bmc.arsys.rx.client.designer.inspector.delete-output-map-item-confirmation.message",sourceFieldOptions:{expressionConfigurator:this.getExpressionConfigurator(),options:{dataDictionary$:this.getExpressionConfigurator().getDataDictionary("outputMap"),operators:this.getExpressionConfigurator().getOperators("outputMap")}},targetFieldOptions:{type:p.AssignmentExpressionListTargetFieldType.Select,options:{options:(0,l.chain)([...t.processDefinitionModel.inputParams,...t.processDefinitionModel.outputParams,...t.processDefinitionModel.localVariables]).map("name").uniq().map(e=>({name:e,id:e})).value()}}}}]}]}getModelFromDefinition(e){const t=super.getActionTypeByName(e.actionTypeName),i=t.displayName||this.rxActionTypeUtilsService.prettifyActionTypeName(t.actionTypeName);return e.guid?{actionTypeName:e.actionTypeName,deprecatedText:t.deprecatedText,description:e.description,guid:e.guid,inputMap:this.getInputMapFromDefinition(e),isDeprecated:t.isDeprecated,label:e.name,multiInstanceLoopDefinition:e.multiInstanceLoopDefinition,name:e.name,outputMap:e.outputMap,resourceType:e.resourceType,runAsUser:this.getRunAsUserFromDefinition(e),type:this.getElementType(t.actionTypeName)}:{actionTypeName:t.actionTypeName,deprecatedText:t.deprecatedText,description:"",guid:"",inputMap:{},isDeprecated:t.isDeprecated,label:i,multiInstanceLoopDefinition:null,name:i,outputMap:[],resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction,runAsUser:a.RX_PROCESS_DEFINITION.runAsUser.inheritFromProcess.modelValue,type:this.getElementType(t.actionTypeName)}}getShape(e){return new(this.getClass())(super.getClassConfig(e))}setCommonDataDictionaryBranch(e,t){this.rxProcessDataDictionaryService.setCommonActivitiesDataDictionaryBranch(e,t)}validate(e,t){return super.validateServerAction(e,t).pipe((0,m.map)(i=>{const n=[...i],o=t.filter(t=>t.prop("targetNode")===e.guid),r=t.filter(t=>t.prop("sourceNode")===e.guid);return(0,l.isEmpty)(o)&&n.push({type:d.ValidationIssueType.Warning,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.is-required.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.inbound-sequence-flow.label")}),data:{guid:e.guid,inspectorTabIndex:1}}),1!==r.length&&n.push({type:d.ValidationIssueType.Warning,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.is-required.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.outbound-sequence-flow.label")}),data:{guid:e.guid,inspectorTabIndex:1}}),n}))}buildDataDictionaryBranch(e){const t=super.getActionTypeByName(e.actionTypeName).outputParams;return(0,l.isEmpty)(t)?(0,s.of)(null):this.buildOutputDataDictionaryBranch(e,t).pipe((0,m.map)(i=>{const n=this.rxActionTypeUtilsService.isActionParameterArrayOrList(t[0]);if((0,l.isArray)(i)){let o=i;return(0,l.isEmpty)(i)&&(o=this.buildDefaultOutputDataDictionaryBranch(t[0].dataTypeDetail)),{label:e.label,icon:"d-icon-arrow_chart",children:[{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.keywords.output.label"),icon:"d-icon-arrow_chart",expression:"${activityResults."+e.guid+".output"+(n?"[0]}":"}"),children:this.updateOutputDataDictionaryBranch(o,e.guid,n)}]}}return null}))}buildOutputDataDictionaryBranch(e,t){return(0,s.of)([])}getClass(){return joint.shapes.rx.ProcessAction}getDefinitionInputMapParam(e,t){return{assignTarget:e,expression:t}}getElementType(e){return a.RX_PROCESS_DEFINITION.processElementTypes.processAction}getExpressionConfiguratorClass(){return M}getInputMapInspectorWidgetConfig(e){const t=this.getActionTypeByName(e.actionTypeName);return{component:F,options:{expressionConfigurator:this.getExpressionConfigurator(),expressionInputMapInspectorOptions:t.inputParams.map(e=>({name:e.name,label:e.displayName||this.rxStringService.prettify(e.name)}))}}}getInputMapFromDefinition(e){const t=super.getActionTypeByName(e.actionTypeName),i=t?(0,l.transform)(t.inputParams,(e,t)=>e[t.name]="",{}):{};return(0,l.transform)((null==e?void 0:e.inputMap)||[],(e,t)=>e[t.assignTarget]=t.expression,i)}buildDefaultOutputDataDictionaryBranch(e,t){return(0,l.isEmpty)(e)?null:e.map(e=>{const i=this.rxActionTypeUtilsService.isActionParameterArrayOrList(e),n=(t?t+"."+e.name:e.name)+(i?"[0]":"");return{label:this.rxStringService.prettify(e.name),outputPropertyPath:n,children:this.buildDefaultOutputDataDictionaryBranch(e.dataTypeDetail,n)}})}getInputMapFromModel(e){return(0,l.reduce)(e.inputMap,(e,t,i)=>{let n;return(0,l.isEmpty)(t)||(n=this.getDefinitionInputMapParam(i,t),n&&e.push(n)),e},[])}getOutputDataDictionaryExpression(e,t,i){return"${activityResults."+e+".output"+(t?"[0].":".")+i+"}"}getRunAsUserFromDefinition(e){let t;switch(e.runAsUser){case!0:t=a.RX_PROCESS_DEFINITION.runAsUser.currentUser.modelValue;break;case!1:t=a.RX_PROCESS_DEFINITION.runAsUser.administrator.modelValue;break;default:t=a.RX_PROCESS_DEFINITION.runAsUser.inheritFromProcess.modelValue}return t}updateOutputDataDictionaryBranch(e,t,i){return(0,l.isEmpty)(e)?null:e.map(e=>{let n=e.expression;return e.outputPropertyPath&&(n=(0,l.isArray)(e.outputPropertyPath)?e.outputPropertyPath.map(e=>this.getOutputDataDictionaryExpression(t,i,e)):this.getOutputDataDictionaryExpression(t,i,e.outputPropertyPath)),{label:e.label,icon:n?"d-icon-arrow_chart":null,expression:n,children:this.updateOutputDataDictionaryBranch(e.children,t,i)}})}}T.\u0275fac=function(e){return new(e||T)(n["\u0275\u0275inject"](n.Injector))},T.\u0275prov=n["\u0275\u0275defineInjectable"]({token:T,factory:T.\u0275fac,providedIn:"root"});class O extends((0,r.RxServerActionMixin)(C(joint.shapes.bpmn.Activity))){defaults(){return joint.util.deepSupplement({attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}},icon:"gear",size:{width:90,height:60},type:a.RX_PROCESS_DEFINITION.processElementTypes.processAction},super.defaults)}initialize(e){super.initialize(e)}getElementService(e){return r.RxRootInjector.injector.get(a.RxProcessElementRegistryService).get(e).elementService}}class N extends((0,r.RxServerActionViewMixin)(D(joint.shapes.bpmn.ActivityView))){initialize(e){super.initialize(e)}}class A{constructor(e,t){e.register({elementService:t,group:a.RX_PROCESS_DEFINITION.standardProcessElementGroups.platformActions.name,paletteItem:{border:r.RX_DESIGNER.paletteItemBorder.bold,icon:{path:r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.gear,position:r.RX_DESIGNER.paletteIconPosition.top},label:r.RX_DESIGNER.paletteItemLabel.outer,shape:r.RX_DESIGNER.paletteItemShape.rectangle},resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction,shapeClass:O,shapeType:"ProcessAction",type:a.RX_PROCESS_DEFINITION.processElementTypes.processAction,viewShapeClass:N,viewShapeType:"ProcessActionView"})}}A.\u0275fac=function(e){return new(e||A)(n["\u0275\u0275inject"](a.RxProcessElementRegistryService),n["\u0275\u0275inject"](T))},A.\u0275mod=n["\u0275\u0275defineNgModule"]({type:A}),A.\u0275inj=n["\u0275\u0275defineInjector"]({});class P{}P.\u0275fac=function(e){return new(e||P)},P.\u0275mod=n["\u0275\u0275defineNgModule"]({type:P,declarations:[F],imports:[f.CommonModule,p.ExpressionFormControlModule,h.FormsModule,p.RxFormBuilderModule,p.RxInspectorModule],exports:[F]}),P.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,p.ExpressionFormControlModule,h.FormsModule,p.RxFormBuilderModule,p.RxInspectorModule]]});class j{constructor(e,t){this.rxStringService=e,this.translateService=t}getDefinitionFromModel(e){return{description:e.description,guid:e.guid,name:e.name,resourceType:e.resourceType}}getInspectorConfig(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"label",component:p.TextFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.label.label")}},{name:"description",component:p.TextareaFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{name:"guid",component:p.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label")}}]}]}getModelFromDefinition(e){let t={description:"",guid:null,label:"",name:a.RX_PROCESS_DEFINITION.processElementDisplayNames.startEvent,resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.startEvent,type:a.RX_PROCESS_DEFINITION.processElementTypes.startEvent};return e&&(t=Object.assign(Object.assign({},t),{description:e.description,guid:e.guid,label:e.name,name:e.name,resourceType:e.resourceType})),t}getShape(e){return new joint.shapes.rx.StartEvent({elementModel:this.getModelFromDefinition(),position:e.position})}setCommonDataDictionaryBranch(e,t){}validate(e,t){const i=[],n=t.filter(t=>t.prop("targetNode")===e.guid);(0,l.isEmpty)(n)||i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.start-event.validation.inbound-sequence-flow.message"),data:{guid:e.guid,inspectorTabIndex:1}});return 1!=t.filter(t=>t.prop("sourceNode")===e.guid).length&&i.push({type:d.ValidationIssueType.Warning,description:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.elements.start-event.validation.single-outbound-sequence-flow.message"),data:{guid:e.guid,inspectorTabIndex:1}}),this.rxStringService.isEmptySafe(e.label)&&(0,l.some)(t,t=>t.prop("label")===e.label)&&i.push({type:d.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.must-be-unique.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.label.label")}),data:{guid:e.guid,inspectorTabIndex:1,propertyName:"label"}}),(0,s.of)(i)}}j.\u0275fac=function(e){return new(e||j)(n["\u0275\u0275inject"](c.RxStringService),n["\u0275\u0275inject"](o.TranslateService))},j.\u0275prov=n["\u0275\u0275defineInjectable"]({token:j,factory:j.\u0275fac,providedIn:"root"});class _ extends(C(joint.shapes.bpmn.Event)){defaults(){return joint.util.deepSupplement({attrs:{".label":{fill:"gray"}},defaultName:a.RX_PROCESS_DEFINITION.processElementDisplayNames.startEvent,eventType:"start",icon:"transparent",labelPath:"attrs/.label/text",size:{width:30,height:30},type:a.RX_PROCESS_DEFINITION.processElementTypes.startEvent},super.defaults)}initialize(e){super.initialize(e)}}class k extends(D(joint.dia.ElementView)){initialize(e){super.initialize(e)}sgResize(e){this.scalableNode.attr("transform","scale(0.5,0.5)"),super.update()}}class B{constructor(e,t,i){e.register({displayName:i.instant("com.bmc.arsys.rx.client.process-designer.elements.start-event.display-name.label"),elementService:t,group:a.RX_PROCESS_DEFINITION.standardProcessElementGroups.events.name,paletteItem:{border:r.RX_DESIGNER.paletteItemBorder.solid,label:r.RX_DESIGNER.paletteItemLabel.outer,shape:r.RX_DESIGNER.paletteItemShape.circle},resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.startEvent,shapeClass:_,shapeType:"StartEvent",type:a.RX_PROCESS_DEFINITION.processElementTypes.startEvent,viewShapeClass:k,viewShapeType:"StartEventView"})}}B.\u0275fac=function(e){return new(e||B)(n["\u0275\u0275inject"](a.RxProcessElementRegistryService),n["\u0275\u0275inject"](j),n["\u0275\u0275inject"](o.TranslateService))},B.\u0275mod=n["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=n["\u0275\u0275defineInjector"]({});class ${constructor(e,t,i){this.rxIdService=e,this.rxJsonParserService=t,this.rxProcessElementSearchService=i}getGraph(e){const t=this.rxJsonParserService.tryParseJson(e.layout,{cells:[]});return t.cells.forEach(i=>{const n=(0,l.map)((0,l.filter)(t.cells,{parent:i.id}),"id");(0,l.startsWith)(i.type,"rx.CallActivity")&&(i.type="rx.CallActivity"),(0,l.startsWith)(i.type,"rx.ProcessActions")&&(i.type="rx.ProcessAction"),n.length&&(i.embeds=n),i.processDefinitionName=e.name;const o=this.rxProcessElementSearchService.find(e,{guid:this.rxIdService.get(i.id)});(null==o?void 0:o.multiInstanceLoopDefinition)&&(i.multiInstanceLoopDefinition=o.multiInstanceLoopDefinition)}),t}}$.\u0275fac=function(e){return new(e||$)(n["\u0275\u0275inject"](c.RxIdService),n["\u0275\u0275inject"](c.RxJsonParserService),n["\u0275\u0275inject"](a.RxProcessElementSearchService))},$.\u0275prov=n["\u0275\u0275defineInjectable"]({token:$,factory:$.\u0275fac,providedIn:"root"});class L{}var G;L.\u0275fac=function(e){return new(e||L)},L.\u0275mod=n["\u0275\u0275defineNgModule"]({type:L,imports:[f.CommonModule,R,P,r.RxOverlayModule,A,B]}),L.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,R,P,r.RxOverlayModule,A,B]]}),joint.util.deepSupplement(joint.shapes.bpmn.Activity.prototype.defaults,{attrs:{".body":{refWidth:1,refHeight:1}},markup:['<g class="rotatable">','<rect class="body outer"/>','<rect class="body inner"/>',joint.env.test("svgforeignobject")?'<foreignObject class="fobj"><body xmlns="http://www.w3.org/1999/xhtml"><div class="content"/></body></foreignObject>':'<text class="content"/>','<g class="rx-icon-container">','<image class="icon-multi-instance-sequential"/>','<image class="icon-multi-instance-parallel"/>','<path class="sub-process"/>',"</g>",'<image class="icon"/>',"</g>"].join("")}),function(e){class t extends joint.shapes.bpmn.Activity{initialize(e){super.initialize(e);const t=this.getEmbeddedCells(),i=(0,l.size)((0,l.reject)(t,"isBoundaryEvent"));let n;i===t.length&&(n=this.get("embeds")),this.collection&&this.get("expanded")&&!i&&(0,l.isUndefined)(n)&&r.RxRootInjector.injector.get(a.RxProcessDefinitionCacheService).getProcessDefinition(this.get("processDefinitionName")).subscribe(e=>{const t=r.RxRootInjector.injector.get(a.RxProcessElementSearchService).findByGuid(e,`rx-${this.get("id")}`)||{};this.expand(e,r.RxRootInjector.injector.get($).getGraph(t))})}expand(e,t){t.cells=(0,l.sortBy)(t.cells,e=>"rx.SequenceFlow"===e.type||"rx.TextAnnotationAssociation"===e.type);const i=[];(0,l.forEach)(t.cells,t=>{const n=new(joint.util.getByPath(this.collection.cellNamespace,t.type,"."))(t);if(n.get("expanded")){const t=r.RxRootInjector.injector.get(a.RxProcessElementSearchService).findByGuid(e,`rx-${n.get("id")}`)||{};n.expand.call(this,e,r.RxRootInjector.injector.get($).getGraph(t))}i.push(n)}),this.collection.add(i),this.attr({".sub-process":{display:"none",visibility:"hidden"}})}}e.BaseExpandableProcessShape=t;class i extends t{defaults(){return joint.util.deepSupplement({activityType:"call-activity",expanded:!1,subProcess:!0,attrs:{path:{transform:"scale(0.3, 0.3)","ref-dy":-15},rect:{rx:2,ry:2}}},joint.shapes.bpmn.Activity.prototype.defaults)}}e.BaseCallActivity=i;class n extends joint.shapes.bpmn.Activity{static initMultiInstanceIcons(e){const t=(0,l.cloneDeep)(e.get("attrs")),i={width:10,height:10,y:1};t[".sub-process"]={d:"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15",stroke:"#000000",fill:"transparent",transform:"scale(0.3, 0.3) translate(0, 6)"},t[".sub-process"].display=e.prop("subProcess")?"":"none",t[".icon-multi-instance-sequential"]=(0,l.cloneDeep)(i),t[".icon-multi-instance-parallel"]=(0,l.cloneDeep)(i),t[".icon-multi-instance-sequential"]["xlink:href"]=r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.multiInstanceSequential,t[".icon-multi-instance-parallel"]["xlink:href"]=r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.multiInstanceParallel,t[".rx-icon-container"]={ref:".body","x-alignment":"middle","ref-x":.5,"ref-dy":-15},(0,l.defaults)(t[".icon"],t.image),delete t.image,delete t.path,e.unset("attrs",{silent:!0}),e.set("attrs",t)}static updateMultiInstanceIcons(e){const t=e.prop("loopType"),i=(0,l.cloneDeep)(e.get("attrs"));i[".icon-multi-instance-sequential"].display="true"===t?"":"none",i[".icon-multi-instance-parallel"].display="false"===t?"":"none",e.prop("subProcess")&&(i[".sub-process"].transform=t?"scale(0.3, 0.3) translate(50, 6)":"scale(0.3, 0.3) translate(0, 6)"),e.unset("attrs",{silent:!0}),e.set("attrs",i,{rxSilent:!0})}}e.BaseStaticMultiInstance=n;class o extends joint.shapes.bpmn.Activity{initialize(e){super.initialize(e),e.multiInstanceLoopDefinition&&this.prop("loopType",String(e.multiInstanceLoopDefinition.isSequential),{silent:!0}),n.initMultiInstanceIcons(this),n.updateMultiInstanceIcons(this)}}e.BaseMultiInstance=o;e.CallActivity=class extends i{initialize(e){super.initialize(e),e.multiInstanceLoopDefinition&&this.prop("loopType",String(e.multiInstanceLoopDefinition.isSequential),{silent:!0}),n.initMultiInstanceIcons(this),n.updateMultiInstanceIcons(this)}defaults(){return joint.util.deepSupplement({type:"rx.CallActivity"},i.prototype.defaults())}};e.Connector=class extends o{defaults(){return joint.util.deepSupplement({type:"rx.Connector",icon:"connector",attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}}},joint.shapes.bpmn.Activity.prototype.defaults)}};class s extends joint.shapes.bpmn.Event{defaults(){return joint.util.deepSupplement({type:"rx.EndEvent",eventType:"end",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Event.prototype.defaults)}}e.EndEvent=s;class d extends joint.shapes.bpmn.Event{defaults(){return joint.util.deepSupplement({type:"rx.ErrorBoundaryEvent",eventType:"intermediate",icon:"errorBoundary",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Event.prototype.defaults)}}e.ErrorBoundaryEvent=d;class c extends joint.shapes.bpmn.Event{defaults(){return joint.util.deepSupplement({type:"rx.ErrorEndEvent",eventType:"end",icon:"errorEnd",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Event.prototype.defaults)}}e.ErrorEndEvent=c;class p extends joint.shapes.bpmn.Gateway{defaults(){return joint.util.deepSupplement({type:"rx.ExclusiveGateway",icon:"cross",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Gateway.prototype.defaults)}}e.ExclusiveGateway=p;class u extends joint.shapes.bpmn.Gateway{defaults(){return joint.util.deepSupplement({type:"rx.ParallelGateway",icon:"plus",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Gateway.prototype.defaults)}}e.ParallelGateway=u;class m extends joint.shapes.bpmn.Activity{defaults(){return joint.util.deepSupplement({type:"rx.ProcessAction",icon:"gear",attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}},size:{width:70,height:60}},joint.shapes.bpmn.Activity.prototype.defaults)}}e.ProcessAction=m;e.ReceiveTask=class extends o{defaults(){return joint.util.deepSupplement({type:"rx.ReceiveTask",icon:"message",attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}}},joint.shapes.bpmn.Activity.prototype.defaults)}};class f extends joint.shapes.bpmn.Flow{defaults(){return joint.util.deepSupplement({type:"rx.SequenceFlow",router:{name:"manhattan",args:{step:5}}},joint.shapes.bpmn.Flow.prototype.defaults)}}e.SequenceFlow=f;class h extends joint.shapes.bpmn.Event{defaults(){return joint.util.deepSupplement({type:"rx.StartEvent",eventType:"start",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Event.prototype.defaults)}}e.StartEvent=h;e.SubProcess=class extends t{initialize(e){super.initialize(e),e.multiInstanceLoopDefinition&&this.prop("loopType",String(e.multiInstanceLoopDefinition.isSequential),{silent:!0}),n.initMultiInstanceIcons(this),n.updateMultiInstanceIcons(this)}defaults(){return joint.util.deepSupplement({type:"rx.SubProcess",activityType:"event-sub-process",expanded:!1,subProcess:!0,attrs:{rect:{rx:4,ry:4}}},joint.shapes.bpmn.Activity.prototype.defaults)}};class g extends joint.shapes.bpmn.Annotation{defaults(){return joint.util.deepSupplement({type:"rx.TextAnnotation",attrs:{rect:{rx:2,ry:2}}},joint.shapes.bpmn.Annotation.prototype.defaults)}}e.TextAnnotation=g;class v extends joint.shapes.bpmn.Flow{defaults(){return joint.util.deepSupplement({type:"rx.TextAnnotationAssociation",flowType:"association"},joint.shapes.bpmn.Flow.prototype.defaults)}}e.TextAnnotationAssociation=v;class y extends joint.shapes.bpmn.Event{defaults(){return joint.util.deepSupplement({type:"rx.TimerEvent",eventType:"intermediate",icon:"clock",attrs:{".label":{fill:"gray"}}},joint.shapes.bpmn.Event.prototype.defaults)}}e.TimerEvent=y;e.UserTask=class extends o{defaults(){return joint.util.deepSupplement({type:"rx.UserTask",icon:"user",attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}}},joint.shapes.bpmn.Activity.prototype.defaults)}};class b extends joint.shapes.bpmn.Activity{defaults(){return joint.util.deepSupplement({type:"rx.WebRequest",icon:"webRequest",attrs:{".icon":{width:12,height:12,"ref-x":3,"ref-y":3},rect:{rx:4,ry:4}}},joint.shapes.bpmn.Activity.prototype.defaults)}}e.WebRequest=b}(G||(G={}));var z=Object.freeze({__proto__:null,get rx(){return G}});class U extends g.View{constructor(e){super(),this.selectors={bpmn:{"bpmn.Event":".scalable circle.outer","bpmn.Annotation":".rotatable path.stroke",link:"path.connection","bpmn.Flow":"path.connection","bpmn.Gateway":".scalable polygon.body","bpmn.Activity":".scalable rect.outer","basic.Rect":".scalable rect"},rx:{"rx.TextAnnotation":".rotatable path.stroke","rx.TextAnnotationAssociation":"path.connection","rx.SequenceFlow":"path.connection","rx.ParallelGateway":".scalable polygon.body","rx.ExclusiveGateway":".scalable polygon.body","rx.StartEvent":".scalable circle.outer","rx.EndEvent":".scalable circle.outer","rx.SubProcess":".rotatable rect.outer","rx.ReceiveTask":".rotatable rect.outer","rx.UserTask":".rotatable rect.outer","rx.Connector":".rotatable rect.outer","rx.TimerEvent":".scalable circle.outer","rx.WebRequest":".rotatable rect.outer"}},this.cellView=e,this.listenTo(this.cellView.paper,"scale translate",this.update),this.$el=this.cellView.$el}init(e){this.options=(0,l.extend)({},(0,l.result)(this,"options"),e||{}),this.cellView.model.on("remove",this.eraseHighlightAndRemove),this.update()}update(){this.eraseHighlight(),this.drawHighlight()}eraseHighlightAndRemove(e){this.eraseHighlight(),g.View.prototype.remove.apply(this,arguments)}eraseHighlight(){this.cellViewHighlighter&&this.cellViewHighlighter.remove()}drawHighlight(){let e;switch(!0){case this.cellView.model instanceof G.ProcessAction:case this.cellView.model instanceof G.BaseCallActivity:e=".rotatable rect.outer";break;default:e=this.selectors.rx[this.cellView.model.prop("type")]||this.selectors.bpmn[this.cellView.model.prop("type")]}const t=this.cellView.$el.find(e).first(),i=t[0]?V(t[0]).clone():void 0;i&&(i.attr({stroke:this.options.color,"stroke-width":this.options.strokeWidth}),"circle"===i.node.tagName&&i.attr({r:this.options.circleRadius}),this.cellViewHighlighter=i,t.closest("g").prepend(i.node))}}class q{constructor(e,t,i,n){this.rxIdService=e,this.rxProcessElementService=t,this.rxProcessElementSearchService=i,this.rxTreeService=n,this.green="#89c341",this.gray="#999999",this.red="#f83200",(0,l.assign)(joint.shapes.bpmn.icons,r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons)}init(e,t,i=!1){const n=new joint.dia.Paper({width:e.width||1,height:e.height||1,model:new joint.dia.Graph({},{cellNamespace:z}),cellViewNamespace:z,interactive:!1,theme:"rx"}),o=new joint.ui.PaperScroller({autoResizePaper:!0,paper:n,padding:{padding:10}});return e.appendChild(o.render().el),o.options.paper.on("blank:pointerdown",o.startPanning),this.resetScroll(o),t&&(o.options.paper.model.fromJSON(t),i&&this.zoomToFit(o)),o}setGraph(e,t,i,n=!1){const o=this.rxProcessElementService.getGraph(t),r=e.options.paper;if(r.model.fromJSON(o),n&&this.zoomToFit(e),(0,l.forEach)(i.activities,e=>{const i=this.rxIdService.getBase(e.activityId),n=r.findViewByModel(i);if(n)if(e.activities.length&&n.model.get("expanded")){const i=this.rxTreeService.flattenTree(e,"activities"),n=r.model.getElements(),o=(0,l.map)(n,"id"),a=(0,l.compact)((0,l.map)(n,e=>e.get("originalGuid")));(0,l.forEach)(i,e=>{((0,l.includes)(o,this.rxIdService.getBase(e.activityId))||a&&(0,l.includes)(a,e.activityId))&&this.highlightActivity(e,r,t)}),this.highlightActivity(e,r,t)}else this.highlightActivity(e,r,t)}),i.exceptionMessage){const e=new RegExp("\\(("+c.RX_GUID.baseIdPattern+")\\)","i").exec(i.exceptionMessage);if(e[0]){const i=this.rxIdService.getBase(e[1]);this.highlightCell(i,r,this.red,t)}}this.resetScroll(e)}highlight(e,t){if(e instanceof joint.dia.CellView){new U(e).init({strokeWidth:10,color:t})}}highlightActivity(e,t,i){const n=this.rxIdService.getBase(e.activityId),o=e.endTime?this.gray:this.green;this.highlightCell(n,t,o,i)}highlightCell(e,t,i,n){const o=t.model.getElements();let r,a;(0,l.includes)((0,l.map)(o,"id"),e)||(r=(0,l.find)(o,t=>t.get("originalGuid")===this.rxIdService.get(e)),e=r?r.id:e),a=t.findViewByModel(e),a?this.highlight(a,i):(this.highlightVisibleErroredCell(e,!1,t,n),t.model.on("change",(0,l.debounce)(()=>{this.highlightVisibleErroredCell(e,!0,t,n)},100)))}highlightVisibleErroredCell(e,t,i,n){const o=this.rxProcessElementSearchService.findOwner(n,this.rxIdService.get(e));let r,a;t&&(a=(0,l.find)(o.flowElements,{guid:this.rxIdService.get(e)}),r=i.findViewByModel(this.rxIdService.getBase(a.guid))),r||(r=i.findViewByModel(this.rxIdService.getBase(o.guid))),r?this.highlight(r,this.red):this.highlightVisibleErroredCell(o.guid,!1,i,n)}resetScroll(e){e.el.scrollTop=0,e.el.scrollLeft=0}zoomToFit(e){setTimeout(()=>{e.zoomToFit({padding:10})})}}q.\u0275fac=function(e){return new(e||q)(n["\u0275\u0275inject"](c.RxIdService),n["\u0275\u0275inject"]($),n["\u0275\u0275inject"](a.RxProcessElementSearchService),n["\u0275\u0275inject"](c.RxTreeService))},q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:q,factory:q.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-process-server-actions.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RX_RECORD_SERVER_ACTION:()=>S,RxCreateListProcessAction:()=>b,RxCreateListProcessActionService:()=>x,RxRecordServerActionExpressionConfiguratorMixin:()=>w,RxRecordServerActionMixin:()=>M,RxRecordServerActionModule:()=>N,RxRecordServerActionServiceMixin:()=>D,RxServerActionsModule:()=>A});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-elements.js"),l=i("rxjs"),d=i("./node_modules/rxjs/_esm2015/operators/index.js"),c=i("lodash"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),m=i("./node_modules/@angular/common/fesm2015/common.js"),f=i("./node_modules/@angular/forms/fesm2015/forms.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js");function v(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-definition-picker",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().ngIf;return n["\u0275\u0275nextContext"]().onSampleRecordDefinitionChange(t,i)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("options",t.sampleRecordDefinitionPickerOptions)("ngModel",e.inputMap.sampleRecordDefinitionName)}}function y(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"rx-definition-picker",1),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).ngIf;return n["\u0275\u0275nextContext"]().onRecordDefinitionChange(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,v,1,2,"rx-definition-picker",2),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementStart"](4,"rx-expression-form-control",3),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).ngIf;return n["\u0275\u0275nextContext"]().openExpressionEditor(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",i.recordDefinitionPickerOptions)("ngModel",e.inputMap.recordDefinitionName),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](3,6,i.isDynamicRecordDefinitionName$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",i.recordIDExpressionOptions)("propertyPath","inputMap/recordID")("ngModel",e.inputMap.recordID)}}class b extends s.RxProcessAction{initialize(e){super.initialize(e)}}class x extends s.RxProcessActionService{constructor(e,t){super(t),this.rxProcessDefinitionService=e,this.injector=t}getInputMapInspectorWidgetConfig(){return{component:s.RxExpressionInputMapInspectorWidgetComponent,options:{expressionConfigurator:this.getExpressionConfigurator(),expressionInputMapInspectorOptions:[{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.server-actions.create-list.source-list.label"),name:"Source List"},{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.server-actions.create-list.item-to-add.label"),name:"Item To Add"}]}}}getElementType(e){return this.rxProcessDefinitionService.getServerActionModelType(e)}getClass(){return joint.shapes.rx.ProcessActions.createList}}x.\u0275fac=function(e){return new(e||x)(n["\u0275\u0275inject"](a.RxProcessDefinitionService),n["\u0275\u0275inject"](n.Injector))},x.\u0275prov=n["\u0275\u0275defineInjectable"]({token:x,factory:x.\u0275fac,providedIn:"root"});class C{constructor(e,t,i){t.register({displayName:i.instant("com.bmc.arsys.rx.client.designer.server-actions.create-list.name.label"),elementService:e,group:a.RX_PROCESS_DEFINITION.standardProcessElementGroups.platformActions.name,paletteItem:{border:r.RX_DESIGNER.paletteItemBorder.solid,icon:{path:r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.gear,position:r.RX_DESIGNER.paletteIconPosition.top},label:r.RX_DESIGNER.paletteItemLabel.inner,shape:r.RX_DESIGNER.paletteItemShape.rectangle},resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction,shapeClass:b,shapeType:"ProcessActions.createList",type:"rx.ProcessActions.createList",viewShapeClass:s.RxProcessActionView,viewShapeType:"ProcessActions.createListView"})}}C.\u0275fac=function(e){return new(e||C)(n["\u0275\u0275inject"](x),n["\u0275\u0275inject"](a.RxProcessElementRegistryService),n["\u0275\u0275inject"](o.TranslateService))},C.\u0275mod=n["\u0275\u0275defineNgModule"]({type:C,imports:[s.RxExpressionInputMapInspectorWidgetModule]}),C.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[s.RxExpressionInputMapInspectorWidgetModule]]});const S={dynamicRecordDefinitionNameRegex:/\${.*}/};function D(e){return class extends e{constructor(...e){super(...e)}getRecordDefinitionInputMapParam(e,t){return"recordDefinitionName"===e?t.match(S.dynamicRecordDefinitionNameRegex)?{assignTarget:e,expression:t}:{assignTarget:e,expression:'"'+t+'"'}:"sampleRecordDefinitionName"===e?{assignTarget:e,expression:'"'+t+'"'}:super.getDefinitionInputMapParam(e,t)}getRecordDefinitionNameFromInputMap(e){let t=null;return e.recordDefinitionName&&(e.recordDefinitionName.match(S.dynamicRecordDefinitionNameRegex)?e.sampleRecordDefinitionName&&(t=e.sampleRecordDefinitionName):t=e.recordDefinitionName),t}getRecordInputMapModel(e){return(0,c.reduce)((null==e?void 0:e.inputMap)||[],(e,t)=>{const i=t.assignTarget;return"recordDefinitionName"===i?t.expression.match(S.dynamicRecordDefinitionNameRegex)?e[i]=t.expression:e[i]=t.expression.replace(/^"|"$/g,""):e[i]="sampleRecordDefinitionName"===i?t.expression.replace(/^"|"$/g,""):t.expression,e},{recordDefinitionName:null,sampleRecordDefinitionName:null,recordID:null})}}}class I extends h.InspectorWidgetBase{constructor(e,t,i,n){super(n),this.rxExpressionEditorService=e,this.rxIdService=t,this.translateService=i,this.injector=n,this.destroyed$=new l.ReplaySubject(1)}ngOnInit(){this.elementModel$=this.designerItemModel.pipe((0,d.pluck)("elementModel"),(0,d.takeUntil)(this.destroyed$)),this.isDynamicRecordDefinitionName$=this.elementModel$.pipe((0,d.map)(e=>null==e?void 0:e.inputMap.recordDefinitionName),(0,d.distinctUntilChanged)(),(0,d.map)(e=>S.dynamicRecordDefinitionNameRegex.test(e))),this.graph$=this.designerItemModel.pipe((0,d.pluck)("graph"),(0,d.takeUntil)(this.destroyed$)),this.patchOptions(this.options)}ngOnChanges(e){(0,c.isEqual)(e.options.currentValue,e.options.previousValue)||this.patchOptions(e.options.currentValue)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onRecordDefinitionChange(e,t){this.graph$.pipe((0,d.take)(1)).subscribe(i=>{i.getCell(this.rxIdService.getBase(t.guid)).prop("elementModel/inputMap/recordDefinitionName",e)})}onSampleRecordDefinitionChange(e,t){this.graph$.pipe((0,d.take)(1)).subscribe(i=>{i.getCell(this.rxIdService.getBase(t.guid)).prop("elementModel/inputMap/sampleRecordDefinitionName",e)})}openExpressionEditor(e){this.graph$.pipe((0,d.take)(1)).subscribe(t=>{this.rxExpressionEditorService.openEditor({expressionConfigurator:this.options.expressionConfigurator,isReadOnly:!1,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field-name.label"),icon:"d-icon-arrow_right_square_input"}],property:{path:"inputMap/recordID",value:e.inputMap.recordID,label:"Record ID"}}).pipe((0,d.takeUntil)(this.destroyed$)).subscribe(i=>{t.getCell(this.rxIdService.getBase(e.guid)).prop("elementModel/inputMap/recordID",i.value)})})}patchOptions(e){this.recordDefinitionPickerOptions={label:"Record definition name",definitionType:h.RxDefinitionPickerType.Record,required:!0},this.sampleRecordDefinitionPickerOptions={label:"Sample record definition name",definitionType:h.RxDefinitionPickerType.Record,required:!0},this.recordIDExpressionOptions={label:"Record ID",dataDictionary$:e.expressionConfigurator.getDataDictionary("inputMap/recordID"),operators:e.expressionConfigurator.getOperators("inputMap/recordID"),isRequired:!0}}}I.\u0275fac=function(e){return new(e||I)(n["\u0275\u0275directiveInject"](h.RxExpressionEditorService),n["\u0275\u0275directiveInject"](p.RxIdService),n["\u0275\u0275directiveInject"](o.TranslateService),n["\u0275\u0275directiveInject"](n.Injector))},I.\u0275cmp=n["\u0275\u0275defineComponent"]({type:I,selectors:[["rx-get-record-input-map-inspector-widget"]],features:[n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],["name","recordDefinition","rx-id","record-definition",3,"options","ngModel","ngModelChange"],["name","sampleRecordDefinition","rx-id","sample-record-definition",3,"options","ngModel","ngModelChange",4,"ngIf"],["rx-id","record-id",3,"options","propertyPath","ngModel","events"],["name","sampleRecordDefinition","rx-id","sample-record-definition",3,"options","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,y,5,8,"div",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.elementModel$))},directives:[m.NgIf,h.RxDefinitionPickerComponent,f.NgControlStatus,f.NgModel,h.ExpressionFormControlComponent],pipes:[m.AsyncPipe],styles:["[_nghost-%COMP%]  rx-definition-picker .dropdown{margin-bottom:15px}"]});class R{}function w(e){return class extends e{constructor(...e){super(...e)}validateInputMapExpression(e,t){let i=!0;return"recordDefinitionName"===e&&t&&!t.match(S.dynamicRecordDefinitionNameRegex)&&(i=!1),(0,l.of)(i)}}}R.\u0275fac=function(e){return new(e||R)},R.\u0275mod=n["\u0275\u0275defineNgModule"]({type:R,declarations:[I],imports:[m.CommonModule,h.RxDefinitionPickerModule,f.FormsModule,h.ExpressionFormControlModule],exports:[I]}),R.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.CommonModule,h.RxDefinitionPickerModule,f.FormsModule,h.ExpressionFormControlModule]]});class E extends(w(s.RxProcessActionExpressionConfigurator)){constructor(e){super(e),this.injector=e}}class F extends(function(e){return class extends e{constructor(...e){super(...e)}getDefinitionInputMapParam(e,t){return super.getRecordDefinitionInputMapParam(e,t)}getInputMapFromDefinition(e){return super.getRecordInputMapModel(e)}}}(D(s.RxProcessActionService))){constructor(e,t,i,n,o){super(o),this.rxDefinitionNameService=e,this.rxProcessDefinitionService=t,this.rxRecordDefinitionCacheService=i,this.rxTreeService=n,this.injector=o}buildOutputDataDictionaryBranch(e){const t=super.getRecordDefinitionNameFromInputMap(e.inputMap);return t?this.rxRecordDefinitionCacheService.getRecordAssociationTree(t).pipe((0,d.switchMap)(e=>{const i=(0,c.chain)(e).map("value").compact().map("recordDefinitionName").push(t).value();return this.rxRecordDefinitionCacheService.getRecordDefinitions(i).pipe((0,d.map)(i=>this.getOutputChildrenBranch(t,e,i)))})):(0,l.of)(null)}getClass(){return joint.shapes.rx.ProcessActions.getRecord}getElementType(e){return this.rxProcessDefinitionService.getServerActionModelType(e)}getExpressionConfiguratorClass(){return E}getInputMapInspectorWidgetConfig(){return{component:I,options:{expressionConfigurator:this.getExpressionConfigurator()}}}getAssociationsBranch(e,t,i){return(0,c.isEmpty)(e)?null:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.keywords.associations.label"),children:e.map(e=>{let n=`_associations.${e.value.associationDefintionGuid}.${e.value.nodeSide}[0]`;const o=e.value.recordDefinitionName;n=i?`${i}.${n}`:n;return{label:e.value.nodeName!==o?`${this.rxDefinitionNameService.getDisplayName(o)} (${this.rxDefinitionNameService.getDisplayName(e.value.nodeName)})`:this.rxDefinitionNameService.getDisplayName(o),outputPropertyPath:n,children:this.getAssociationChildren(o,e.children,t,n)}})}}getAssociationChildren(e,t,i,n){const o=this.getAssociationsBranch(t,i,n),r=(0,c.chain)(i).find({name:e}).get("fieldDefinitions").map(function(e){return{label:e.name,outputPropertyPath:`${n}.${e.id}`}}).value();return(0,c.isEmpty)(o)||r.push(o),r}getOutputChildrenBranch(e,t,i){const n=this.getAssociationsBranch(t,i),o=(0,c.chain)(i).find({name:e}).get("fieldDefinitions").map(e=>({label:e.name,outputPropertyPath:[e.id,e.name]})).value();return(0,c.isEmpty)(n)||o.push(n),o}}function M(e){return class extends e{initialize(e){super.initialize(e),this.lastRecordDefinitionName=this.getRecordDefinitionName(),this.lastSampleRecordDefinitionName=this.getSampleRecordDefinitionName(),this.lastRecordDefinitionName&&(this.lastRecordDefinitionName.match(S.dynamicRecordDefinitionNameRegex)?this.selectExpressionDropdownValue=h.RX_SELECT_EXPRESSION_DROPDOWN.dropDownOptionsValue.expression:this.selectExpressionDropdownValue=h.RX_SELECT_EXPRESSION_DROPDOWN.dropDownOptionsValue.select)}afterRecordDefinitionNameChange(e){this.lastRecordDefinitionName=e,this.getCommandManager().storeBatchCommand()}afterSampleRecordDefinitionNameChange(e){this.lastSampleRecordDefinitionName=e,this.getCommandManager().storeBatchCommand()}getRecordDefinitionName(){const e=this.getInputMap().recordDefinitionName;return e?e.replace(/^"|"$/g,""):null}getRecordDefinitionNameChangeConfirmationMessageKey(){return"com.bmc.arsys.rx.client.process-designer.inspector.clear-input-output-maps-confirmation.message"}getSampleRecordDefinitionName(){const e=this.getInputMap().sampleRecordDefinitionName;return e?e.replace(/^"|"$/g,""):null}onInputMapChanged(e,t,i,n,a){"recordDefinitionName"===i&&(a?this.lastRecordDefinitionName=n:n!==this.lastRecordDefinitionName&&(this.getCommandManager().initBatchCommand(),this.lastRecordDefinitionName?r.RxRootInjector.injector.get(g.RxModalService).confirm({title:r.RxRootInjector.injector.get(o.TranslateService).instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:g.RX_MODAL.modalStyles.warning,message:r.RxRootInjector.injector.get(o.TranslateService).instant(this.getRecordDefinitionNameChangeConfirmationMessageKey())}).then(e=>{e?this.afterRecordDefinitionNameChange(n):(this.getCommandManager().storeBatchCommand(),this.getCommandManager().cancel())}).catch(()=>{this.getCommandManager().storeBatchCommand(),this.getCommandManager().cancel()}):this.afterRecordDefinitionNameChange(n)),n&&(n.match(S.dynamicRecordDefinitionNameRegex)?this.selectExpressionDropdownValue=h.RX_SELECT_EXPRESSION_DROPDOWN.dropDownOptionsValue.expression:this.selectExpressionDropdownValue=h.RX_SELECT_EXPRESSION_DROPDOWN.dropDownOptionsValue.select)),"sampleRecordDefinitionName"===i&&(a?this.lastSampleRecordDefinitionName=n:n!==this.lastSampleRecordDefinitionName&&(this.getCommandManager().initBatchCommand(),this.lastSampleRecordDefinitionName?r.RxRootInjector.injector.get(g.RxModalService).confirm({title:r.RxRootInjector.injector.get(o.TranslateService).instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:g.RX_MODAL.modalStyles.warning,message:r.RxRootInjector.injector.get(o.TranslateService).instant(this.getRecordDefinitionNameChangeConfirmationMessageKey())}).then(()=>{this.afterSampleRecordDefinitionNameChange(n)}).catch(()=>{this.getCommandManager().storeBatchCommand(),this.getCommandManager().cancel()}):this.afterSampleRecordDefinitionNameChange(n)))}}}F.\u0275fac=function(e){return new(e||F)(n["\u0275\u0275inject"](r.RxDefinitionNameService),n["\u0275\u0275inject"](a.RxProcessDefinitionService),n["\u0275\u0275inject"](u.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](p.RxTreeService),n["\u0275\u0275inject"](n.Injector))},F.\u0275prov=n["\u0275\u0275defineInjectable"]({token:F,factory:F.\u0275fac,providedIn:"root"});class T extends(function(e){return class extends e{initialize(e){super.initialize(e)}afterRecordDefinitionNameChange(e){this.lastRecordDefinitionName=e,this.clearOutputMap(),this.setInputMap((0,c.assign)(this.getInputMap(),{recordDefinitionName:this.lastRecordDefinitionName,sampleRecordDefinitionName:null,attachmentFieldID:""})),this.getCommandManager().storeBatchCommand()}afterSampleRecordDefinitionNameChange(e){this.lastSampleRecordDefinitionName=e,this.clearOutputMap(),this.setInputMap((0,c.assign)(this.getInputMap(),{recordDefinitionName:this.lastRecordDefinitionName,sampleRecordDefinitionName:this.lastSampleRecordDefinitionName})),this.getCommandManager().storeBatchCommand()}getRecordDefinitionNameChangeConfirmationMessageKey(){return"com.bmc.arsys.rx.client.process-designer.inspector.clear-output-map-confirmation.message"}}}(M(s.RxProcessAction))){initialize(e){super.initialize(e)}}class O{constructor(e,t,i){t.register({displayName:i.instant("com.bmc.arsys.rx.client.designer.server-actions.get-record.name.label"),elementService:e,group:a.RX_PROCESS_DEFINITION.standardProcessElementGroups.platformActions.name,paletteItem:{border:r.RX_DESIGNER.paletteItemBorder.solid,icon:{path:r.RX_DESIGNER_ELEMENT_SHAPE.bpmnIcons.gear,position:r.RX_DESIGNER.paletteIconPosition.top},label:r.RX_DESIGNER.paletteItemLabel.inner,shape:r.RX_DESIGNER.paletteItemShape.rectangle},resourceType:a.RX_PROCESS_DEFINITION.processElementResourceTypes.processAction,shapeClass:T,shapeType:"ProcessActions.getRecord",type:"rx.ProcessActions.getRecord",viewShapeClass:s.RxProcessActionView,viewShapeType:"ProcessActions.getRecordView"})}}O.\u0275fac=function(e){return new(e||O)(n["\u0275\u0275inject"](F),n["\u0275\u0275inject"](a.RxProcessElementRegistryService),n["\u0275\u0275inject"](o.TranslateService))},O.\u0275mod=n["\u0275\u0275defineNgModule"]({type:O,imports:[R]}),O.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[R]]});class N{}N.\u0275fac=function(e){return new(e||N)},N.\u0275mod=n["\u0275\u0275defineNgModule"]({type:N,imports:[O]}),N.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[O]]});class A{}A.\u0275fac=function(e){return new(e||A)},A.\u0275mod=n["\u0275\u0275defineNgModule"]({type:A,imports:[C,N]}),A.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[C,N]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-record-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RecordDesignerComponent:()=>pi,RecordDesignerModule:()=>vi,RecordDesignerPageComponent:()=>yi,RecordDesignerPageModule:()=>bi,RxFieldDefinitionManagerService:()=>pt,RxRecordDesignerService:()=>li});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/forms/fesm2015/forms.js"),a=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),s=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),m=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),f=i("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),h=i("lodash"),g=i("rxjs"),v=i("./node_modules/rxjs/_esm2015/operators/index.js"),y=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),b=i("./node_modules/@ngrx/component-store/fesm2015/ngrx-component-store.js"),x=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),C=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),D=i("./node_modules/moment-es6/index.js"),I=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),R=i("./node_modules/@angular/router/fesm2015/router.js");const w=["recordCustomizationOptionsEditorForm"],E=["recordFieldsColumnTemplate"],F=function(e){return{iconName:"question_circle_o",content:e,placement:"bottom",popoverMode:!0}},M=function(e){return{definitionType:e}};function T(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"form",null,3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"adapt-rx-select",5),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().scope=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onScopeChange(t)}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"h5"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"adapt-rx-checkbox",7),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().allowOverlay=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().handleAllowOverlayChange()}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",6),o["\u0275\u0275elementStart"](15,"h6"),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",8),o["\u0275\u0275elementStart"](19,"div",9),o["\u0275\u0275elementStart"](20,"div"),o["\u0275\u0275elementStart"](21,"adapt-rx-checkbox",10),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().customizationOptions.allowOtherPropertiesOverlay=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onRecordCustomizationOptionChange()}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div"),o["\u0275\u0275elementStart"](24,"adapt-rx-checkbox",11),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().customizationOptions.allowPermissionsOverlay=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onRecordCustomizationOptionChange()}),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",9),o["\u0275\u0275elementStart"](27,"div"),o["\u0275\u0275elementStart"](28,"adapt-rx-checkbox",12),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().customizationOptions.allowIndexesOverlay=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onRecordCustomizationOptionChange()}),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div"),o["\u0275\u0275elementStart"](31,"adapt-rx-checkbox",13),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().customizationOptions.allowFieldsOverlay=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onRecordCustomizationOptionChange()}),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](33,"adapt-table",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"div",15),o["\u0275\u0275elementStart"](35,"button",16),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](36),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"button",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().cancel()}),o["\u0275\u0275text"](39),o["\u0275\u0275pipe"](40,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275reference"](3),n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,34,"com.bmc.arsys.rx.client.record-designer.scope-customization-options-editor.scope.label")),o["\u0275\u0275property"]("options",n.scopeSelectionOptions)("optionFormatter",n.optionFormatter)("tooltip",o["\u0275\u0275pureFunction1"](57,F,o["\u0275\u0275pipeBind1"](7,36,"com.bmc.arsys.rx.client.designer.scope-customization-options.scope.tooltip")))("ngModel",n.scope)("disabled",n.isDisabled),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,38,"com.bmc.arsys.rx.client.customization-options-editor.customization-options.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind2"](13,40,"com.bmc.arsys.rx.client.customization-options-editor.allow-future-customization.label",o["\u0275\u0275pureFunction1"](59,M,n.data.definitionTypeDisplayName))),o["\u0275\u0275property"]("ngModel",n.allowOverlay)("disabled",e.areCustomizationOptionsDisabled),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,43,"com.bmc.arsys.rx.client.record-designer.scope-customization-options.allow-future-customizations-to.label")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](22,45,"com.bmc.arsys.rx.client.record-designer.scope-customization-options.properties.label")),o["\u0275\u0275property"]("ngModel",n.customizationOptions.allowOtherPropertiesOverlay)("disabled",e.areCustomizationOptionsDisabled),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](25,47,"com.bmc.arsys.rx.client.record-designer.scope-customization-options.permissions.label")),o["\u0275\u0275property"]("ngModel",n.customizationOptions.allowPermissionsOverlay)("disabled",e.areCustomizationOptionsDisabled),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](29,49,"com.bmc.arsys.rx.client.record-designer.scope-customization-options.search-indexes.label")),o["\u0275\u0275property"]("ngModel",n.customizationOptions.allowIndexesOverlay)("disabled",e.areCustomizationOptionsDisabled),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](32,51,"com.bmc.arsys.rx.client.record-designer.scope-customization-options.fields.label")),o["\u0275\u0275property"]("ngModel",n.customizationOptions.allowFieldsOverlay)("disabled",e.areCustomizationOptionsDisabled),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",n.fields)("columns",n.columns)("scrollable",!0)("sortable",!1)("resizableColumns",!1)("bordered",!1)("filterable",!1)("dataKey","name"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!i.dirty),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](37,53,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](40,55,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}function O(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",18),o["\u0275\u0275elementStart"](1,"div",19),o["\u0275\u0275elementStart"](2,"label"),o["\u0275\u0275elementStart"](3,"input",20),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e);return i.dataItem[i.column.field]=t})("change",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFieldsPropertyChange()}),o["\u0275\u0275pipe"](4,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"div",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e[i.field])("disabled",o["\u0275\u0275pipeBind1"](4,2,n.isFieldsOverlayDisabled$))}}const N=function(e){return{definitionScopeName:e}},A=function(e){return{allowOverlayLabel:e}};function P(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"adapt-button",1),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openCustomizationOptionsEditor()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-icon",2),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"p",3),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",4),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.designer.scope-customization-options.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,6,"com.bmc.arsys.rx.client.designer.scope-customization-options.scope.tooltip")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](8,8,"com.bmc.arsys.rx.client.designer.scope-customization-options.scope.label",o["\u0275\u0275pureFunction1"](14,N,e.definitionScopeName))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](11,11,"com.bmc.arsys.rx.client.designer.scope-customization-options.customization.label",o["\u0275\u0275pureFunction1"](16,A,i.allowOverlayLabel))," ")}}function j(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"label"),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"adapt-rx-checkbox",3),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).isInheritingCoreFields=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onInheritCoreFieldsChange()}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"adapt-rx-checkbox",3),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).inheritanceDescriptor.isInheritingRules=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onInheritanceDescriptorChange()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"adapt-rx-checkbox",3),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).inheritanceDescriptor.isInheritingFieldPermissions=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onInheritanceDescriptorChange()}),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"adapt-rx-checkbox",3),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).inheritanceDescriptor.isInheritingAssociations=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onInheritanceDescriptorChange()}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"adapt-rx-checkbox",3),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).inheritanceDescriptor.isInheritingFieldAuditOptions=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onInheritanceDescriptorChange()}),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,16,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.inherit.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,18,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.core-fields.label")),o["\u0275\u0275property"]("ngModel",t.isInheritingCoreFields)("disabled",e.isCoreFieldsOptionDisabled),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,20,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.rules.label")),o["\u0275\u0275property"]("ngModel",t.inheritanceDescriptor.isInheritingRules)("disabled",e.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,22,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.field-permissions.label")),o["\u0275\u0275property"]("ngModel",t.inheritanceDescriptor.isInheritingFieldPermissions)("disabled",e.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.associations.label")),o["\u0275\u0275property"]("ngModel",t.inheritanceDescriptor.isInheritingAssociations)("disabled",e.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,26,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.audit-field-properties.label")),o["\u0275\u0275property"]("ngModel",t.inheritanceDescriptor.isInheritingFieldAuditOptions)("disabled",e.isReadOnly)}}function _(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",1),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().inheritanceOptions.isSharedInstanceStorage=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onInheritanceOptionsChange()}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-checkbox",1),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().inheritanceOptions.isAbstract=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onInheritanceOptionsChange()}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"adapt-rx-checkbox",1),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().inheritanceOptions.isFinal=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onInheritanceOptionsChange()}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"rx-definition-picker",2),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().inheritFrom=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onRecordDefinitionNameChange(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,j,15,28,"div",0),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,16,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.share-data-with-inheritors.label")),o["\u0275\u0275property"]("ngModel",i.inheritanceOptions.isSharedInstanceStorage)("disabled",e.isSharedInstanceStorageDisabled)("tooltip",o["\u0275\u0275pureFunction1"](28,F,o["\u0275\u0275pipeBind1"](3,18,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.share-data-with-inheritors.tooltip"))),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,20,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.make-abstract.label")),o["\u0275\u0275property"]("ngModel",i.inheritanceOptions.isAbstract)("disabled",e.isReadOnly)("tooltip",o["\u0275\u0275pureFunction1"](30,F,o["\u0275\u0275pipeBind1"](6,22,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.make-abstract.tooltip"))),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,24,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.make-final.label")),o["\u0275\u0275property"]("ngModel",i.inheritanceOptions.isFinal)("disabled",e.isMakeFinalDisabled||e.isReadOnly)("tooltip",o["\u0275\u0275pureFunction1"](32,F,o["\u0275\u0275pipeBind1"](9,26,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.make-final.tooltip"))),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",i.recordDefinitionPickerOptions)("ngModel",i.inheritFrom)("disabled",e.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.inheritFrom)}}function V(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).addNewSearchField()}),o["\u0275\u0275element"](1,"span",12),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.record-designer.search-fields.add-search-field.button.label")," "))}function k(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",13),o["\u0275\u0275elementStart"](1,"button",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).toggleOpen(!0)}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",15),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).toggleOpen(!1)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function B(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",30),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"](3).onRemoveSearchField(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function $(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",31),o["\u0275\u0275listener"]("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](4).onSearchCategoryChange()}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](4);o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.record-designer.search-fields.search-category-name.label")),o["\u0275\u0275property"]("disabled",e.isReadOnly)}}function L(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"adapt-accordion-tab",20),o["\u0275\u0275listener"]("open",function(){return o["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!0)})("close",function(){return o["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!1)}),o["\u0275\u0275elementStart"](2,"div",21),o["\u0275\u0275elementStart"](3,"div",22),o["\u0275\u0275elementStart"](4,"div",23),o["\u0275\u0275elementStart"](5,"div",24),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",25),o["\u0275\u0275template"](8,B,3,3,"button",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",27),o["\u0275\u0275elementStart"](10,"adapt-rx-select",28),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](3).onSelectedFieldChange(t)}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,$,2,4,"adapt-rx-textfield",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).ngIf,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",e)("isOpen",e.get("isOpen").value),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",null==e.get("searchFieldName").value[0]?null:e.get("searchFieldName").value[0].name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,11,"com.bmc.arsys.rx.client.record-designer.search-fields.field.label")),o["\u0275\u0275property"]("ngClass",n.recordDefinition.enableCognitiveSearch?"d-block col-12":"d-block col-6")("options",i.availableFields)("optionFormatter",n.optionFormatter)("optionContentTemplate",n.optionTemplate)("disabled",n.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!n.recordDefinition.enableCognitiveSearch&&e.get("isCategoryVisible").value)}}function G(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275elementStart"](1,"adapt-accordion",17),o["\u0275\u0275template"](2,L,13,13,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.searchFields)}}function z(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",32),o["\u0275\u0275element"](1,"adapt-empty-state",33),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.record-designer.search-fields.empty-state.message")))}function U(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",34),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).saveSearchFields()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).cancel()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!e.isValid||!e.isDirty),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}function q(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",36),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).cancel()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.close.label")," "))}function X(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275template"](5,V,4,3,"button",5),o["\u0275\u0275template"](6,k,7,6,"div",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,G,3,2,"div",7),o["\u0275\u0275template"](8,z,3,3,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",9),o["\u0275\u0275template"](10,U,7,7,"div",0),o["\u0275\u0275template"](11,q,3,3,"button",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",!i.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.searchFields.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.searchFields.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.searchFields.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isReadOnly)}}const W='[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}';function H(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-button",2),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openEditor()}),o["\u0275\u0275element"](1,"span",3),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.record-designer.search-fields.search-field-editor.title"),"\n"))}function Q(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](2).removeSearchField(t)}),o["\u0275\u0275elementEnd"]()}}function K(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275elementStart"](1,"div",6),o["\u0275\u0275elementStart"](2,"span",7),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Q,1,0,"button",8),o["\u0275\u0275elementStart"](5,"button",9),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).openEditor(t.id)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",10),o["\u0275\u0275elementStart"](7,"span"),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.options.isReadOnly),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,3,e.searchDefinition.enableFTSSearch?"com.bmc.arsys.rx.client.record-designer.search-fields.full-text-search.label":"com.bmc.arsys.rx.client.record-designer.search-fields.cognitive-search.label")," ")}}function J(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,K,10,5,"div",4),o["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e)}}const Y=["nameCellTemplate"],Z=["enforceCellTemplate"];function ee(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}function te(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.yes.label")))}function ie(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.no.label")))}function ne(e,t){if(1&e&&(o["\u0275\u0275template"](0,te,3,3,"span",12),o["\u0275\u0275template"](1,ie,3,3,"span",12)),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275property"]("ngIf",e[i.field]),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e[i.field])}}function oe(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"a",8),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,3,e.name)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("href",e.url,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,5,e.secondRecord)," ")}}function re(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",10),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).addIndex()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.record-designer.indexes.add-index.label")," "))}function ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,e.indexName||"com.bmc.arsys.rx.client.record-designer.indexes.new-index.label")," ")}}const se=function(e){return{indexName:e}};function le(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](2,1,"com.bmc.arsys.rx.client.record-designer.indexes.automatic-index.label",o["\u0275\u0275pureFunction1"](4,se,e.indexName)))}}function de(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",28),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit,n=o["\u0275\u0275nextContext"](2);return t.stopPropagation(),n.removeIndex(i.guid)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}const ce=function(e){return{iconName:"question_circle_o",content:e,placement:"top",popoverMode:!0}};function pe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-accordion",11),o["\u0275\u0275elementStart"](1,"div",12),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",13),o["\u0275\u0275listener"]("open",function(){return o["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return o["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),o["\u0275\u0275elementStart"](3,"div",14),o["\u0275\u0275elementStart"](4,"div",15),o["\u0275\u0275elementStart"](5,"div",16),o["\u0275\u0275elementStart"](6,"div",17),o["\u0275\u0275template"](7,ae,3,3,"span",0),o["\u0275\u0275template"](8,le,3,6,"span",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",18),o["\u0275\u0275template"](10,de,3,3,"button",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"adapt-rx-checkbox",20),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).updateIndexUniqueValue(i,t)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"adapt-rx-checkbox",21),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.ignoreBlankValues=t})("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).updateIndexIgnoreBlankValue(i,t)}),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",22),o["\u0275\u0275elementStart"](17,"adapt-rx-select",23),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).onAvailableFieldsChange(t,i)}),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",24),o["\u0275\u0275elementStart"](20,"button",25),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).moveToSelected(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"button",26),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).moveToAvailable(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"adapt-rx-list-builder",27),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).onSelectedFieldsChange(t,i)})("listItemRemove",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](2).onFieldRemove(t,i)})("dragend",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onDragEnd()}),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("isOpen",e.isOpen),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("title",e.indexName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isAutomaticIndex),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.isReadOnly&&!e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,32,"com.bmc.arsys.rx.client.record-designer.indexes.unique-index-checkbox.label")),o["\u0275\u0275property"]("ngModel",e.unique)("disabled",i.isReadOnly||e.isAutomaticIndex),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,34,"com.bmc.arsys.rx.client.record-designer.indexes.ignore-blank-values.label")),o["\u0275\u0275property"]("ngModel",e.ignoreBlankValues)("disabled",i.isReadOnly||e.isAutomaticIndex)("tooltip",o["\u0275\u0275pureFunction1"](44,ce,o["\u0275\u0275pipeBind1"](15,36,"com.bmc.arsys.rx.client.record-designer.indexes.ignore-blank-values.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](18,38,"com.bmc.arsys.rx.client.record-designer.indexes.available-fields.label")),o["\u0275\u0275property"]("options",e.availableFields)("ngModel",e.checkedAvailableFields)("disabled",i.isReadOnly||e.isAutomaticIndex)("deselectAllButton",!0)("selectAllButton",!0)("enableFilter",!0)("inline",!0)("multiple",!0)("singleSelectStyle","marker")("optionFormatter",i.optionFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!e.checkedAvailableFields.length||e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!e.isMoveToAvailableButtonEnabled||e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](24,42,"com.bmc.arsys.rx.client.record-designer.indexes.selected-fields.label")),o["\u0275\u0275property"]("ngModel",e.selectedFields)("disabled",i.isReadOnly||e.isAutomaticIndex)("hideSearchField",!0)("hideEdit",!0)("tooltip",o["\u0275\u0275pureFunction1"](46,ce,o["\u0275\u0275pipeBind1"](23,40,"com.bmc.arsys.rx.client.record-designer.indexes.selected-fields.tooltip")))}}function ue(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",29),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).save()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",30),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).cancel()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!e.isDirty),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}function me(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",31),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).cancel()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.common.close.label")," "))}const fe=function(e){return{content:e,variant:"info",type:"inline"}};function he(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275element"](2,"adapt-alert",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275template"](5,re,3,3,"button",4),o["\u0275\u0275elementStart"](6,"button",5),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().expandAll()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"button",6),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().collapseAll()}),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275template"](13,pe,25,48,"adapt-accordion",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",9),o["\u0275\u0275template"](15,ue,7,7,"div",0),o["\u0275\u0275template"](16,me,4,3,"div",0),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](14,fe,o["\u0275\u0275pipeBind1"](3,8,"com.bmc.arsys.rx.client.record-designer.indexes.information"))),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!i.isReadOnly),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.common.expand-all.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,12,"com.bmc.arsys.rx.client.common.collapse-all.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.indexes)("ngForTrackBy",i.trackByIndex),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!i.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isReadOnly)}}function ge(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](2,1,e.indexName||"com.bmc.arsys.rx.client.record-designer.indexes.new-index.label"))}}function ve(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-icon",10),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind2"](2,2,"com.bmc.arsys.rx.client.record-designer.indexes.automatic-index.label",o["\u0275\u0275pureFunction1"](9,se,o["\u0275\u0275pipeBind1"](3,5,e.indexName||"com.bmc.arsys.rx.client.record-designer.indexes.new-index.label")))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.client.record-designer.indexes.system-index.tooltip"))}}function ye(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"]().openIndexesEditor(t)}),o["\u0275\u0275elementEnd"]()}}function be(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",12),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"]().removeIndex(t)}),o["\u0275\u0275elementEnd"]()}}const xe=function(e){return{fieldCount:e}};function Ce(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275elementStart"](2,"span",5),o["\u0275\u0275template"](3,ge,3,3,"span",6),o["\u0275\u0275template"](4,ve,6,11,"span",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,ye,1,0,"button",7),o["\u0275\u0275template"](6,be,1,0,"button",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",9),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",e.indexName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isAutomaticIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!i.options.isReadOnly&&!e.isAutomaticIndex),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](9,7,e.unique?"com.bmc.arsys.rx.client.record-designer.indexes.unique-index.label":"com.bmc.arsys.rx.client.record-designer.indexes.non-unique-index.label.value"),", ",1===e.indexFieldIds.length?o["\u0275\u0275pipeBind1"](10,9,"com.bmc.arsys.rx.client.record-designer.indexes.one-field-index.label"):o["\u0275\u0275pipeBind2"](11,11,"com.bmc.arsys.rx.client.record-designer.indexes.many-fields-index.label",o["\u0275\u0275pureFunction1"](14,xe,e.indexFieldIds.length))," ")}}const Se=function(e){return{overriddenFields:e}};function De(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"p"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"ul"),o["\u0275\u0275elementStart"](5,"li"),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.issues-info.message")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](8,4,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.issues-overridden-properties-info.message",o["\u0275\u0275pureFunction1"](7,Se,e.overriddenRecordProperties.fields)))}}const Ie=function(e){return{overriddenSecurityLabels:e}};function Re(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"p"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"ul"),o["\u0275\u0275elementStart"](5,"li"),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.issues-overridden-security-labels-info.message")," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](8,4,"com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.issues-security-labels-info.message",o["\u0275\u0275pureFunction1"](7,Ie,e.overriddenRecordProperties.securityLabels)))}}function we(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,De,9,9,"div",1),o["\u0275\u0275template"](2,Re,9,9,"div",1),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.overriddenRecordProperties.fields.length>0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",(null==e.overriddenRecordProperties.securityLabels?null:e.overriddenRecordProperties.securityLabels.length)>0)}}function Ee(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",9),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("config",e.alertConfig)}}function Fe(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",10),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("inline",!0)("multiple",!0)("options",e.primaryAvailableFields)("optionFormatter",t.optionFormatter)("selectAllButton",!0)("deselectAllButton",!0)("texts",t.selectTexts)("popupMaxHeight","100%")("formControl",t.primarySelectedFieldsFormControl)("label",o["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.client.record-designer.definition-properties.primary.label"))}}function Me(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",11),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("inline",!0)("multiple",!0)("options",e.secondaryAvailableFields)("optionFormatter",t.optionFormatter)("selectAllButton",!0)("deselectAllButton",!0)("texts",t.selectTexts)("popupMaxHeight","100%")("formControl",t.secondarySelectedFieldsFormControl)("label",o["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.client.record-designer.definition-properties.secondary.label"))}}function Te(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275template"](3,Ee,1,1,"adapt-alert",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"label"),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275template"](7,Fe,2,12,"adapt-rx-select",4),o["\u0275\u0275template"](8,Me,2,12,"adapt-rx-select",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"button",7),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().cancel()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.hasDuplicates),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.selectLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.primaryAvailableFields),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.secondaryAvailableFields),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",0===e.selectedFields.length),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,7,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,9,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}const Oe=["requiredCellTemplate"],Ne=["dataTypeCellTemplate"],Ae=["inheritedCellTemplate"];function Pe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",20),o["\u0275\u0275elementStart"](1,"button",21),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).openAddNewField()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",22),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).deleteSelectedField()}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isDeleteFieldButtonDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,6,"com.bmc.arsys.rx.client.common.delete.label")," ")}}function je(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",28),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"](3).addNewField(t.resourceType)}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).ngIf;o["\u0275\u0275property"]("disabled",!i.isFieldsCustomizationAllowed||i.isReadOnly),o["\u0275\u0275attribute"]("rx-id","field-data-type-"+e.shortName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.displayName," ")}}function _e(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",20),o["\u0275\u0275elementStart"](1,"div",23),o["\u0275\u0275elementStart"](2,"button",24),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",25),o["\u0275\u0275template"](6,je,2,3,"button",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",22),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).deleteSelectedField()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"button",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).copySelectedField()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,6,"com.bmc.arsys.rx.client.designer.new-field.button.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.dataTypes),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.isDeleteFieldButtonDisabled||e.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,8,"com.bmc.arsys.rx.client.common.delete.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isCopyFieldButtonDisabled||e.isReadOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,10,"com.bmc.arsys.rx.client.common.copy.label")," ")}}function Ve(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-code-viewer",29),o["\u0275\u0275pipe"](1,"json")),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("code",o["\u0275\u0275pipeBind1"](1,4,e.definitionForJsonViewer))("lang","javascript")("hasToolbar",!1)("theme","light")}}function ke(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0,5),o["\u0275\u0275elementStart"](1,"rx-designer-header",6),o["\u0275\u0275listener"]("save",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().saveDefinition()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().closeDesigner.emit()})("breadcrumbSelected",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onBreadcrumbSelected()})("toggleDesignMode",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().toggleDesignMode()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"adapt-sidebar",7),o["\u0275\u0275listener"]("isPanelOpenedCurrently",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSidebarToggle(t)}),o["\u0275\u0275elementStart"](3,"adapt-sidebar-item",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"rx-form-builder",9),o["\u0275\u0275listener"]("modelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onDefinitionModelChange(t)})("formInitialized",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFormInitialized()})("editorEvent",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onEditorEvent(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"adapt-sidebar-item",10),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementStart"](10,"rx-form-builder",11),o["\u0275\u0275listener"]("modelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSelectedFieldModelChange(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](11,"adapt-alert",12),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"adapt-sidebar-item",13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementStart"](16,"rx-validation-issues",14),o["\u0275\u0275listener"]("correctIssue",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCorrectIssue(t)}),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",15),o["\u0275\u0275elementStart"](19,"h1",16),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,Pe,7,8,"div",17),o["\u0275\u0275template"](23,_e,13,12,"div",17),o["\u0275\u0275elementStart"](24,"adapt-table",18),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSelectionChange(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](25,Ve,2,6,"adapt-code-viewer",19),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("bundleName",e.bundleFriendlyName)("isSaveButtonDisabled",e.isSaveButtonDisabled)("breadcrumbItems",e.breadcrumbItems)("isDesignMode",e.isDesignMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("openedId",0)("adjustMainContainerWidth",!0)("hidden",e.definitionForJsonViewer),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("headerTitle",o["\u0275\u0275pipeBind1"](4,40,"com.bmc.arsys.rx.client.common.properties.label"))("tooltipText",o["\u0275\u0275pipeBind1"](5,42,"com.bmc.arsys.rx.client.common.properties.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("config",e.definitionInspectorConfig)("model",e.definitionModel)("focusEditor$",i.inspectorFocusEditor$),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("headerTitle",o["\u0275\u0275pipeBind1"](8,44,"com.bmc.arsys.rx.client.common.settings.label"))("tooltipText",o["\u0275\u0275pipeBind1"](9,46,"com.bmc.arsys.rx.client.common.settings.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("config",e.selectedFieldInspectorConfig)("model",e.selectedFieldModel)("guid",e.selectedFieldGuid)("focusEditor$",i.inspectorFocusEditor$),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("hidden",e.selectedFieldModel)("config",o["\u0275\u0275pureFunction1"](58,fe,o["\u0275\u0275pipeBind1"](12,48,"com.bmc.arsys.rx.client.designer.validation.no-field-selected.message"))),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("headerTitle",o["\u0275\u0275pipeBind1"](14,50,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275propertyInterpolate"]("tooltipText",o["\u0275\u0275pipeBind1"](15,52,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275property"]("iconClass",e.hasValidationErrors?"d-icon-exclamation_triangle text-danger":e.hasValidationWarnings?"d-icon-exclamation_triangle text-warning-icon":"d-icon-exclamation_triangle"),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("issueSections",e.validationIssues)("definitionTypeDisplayName",o["\u0275\u0275pipeBind1"](17,54,"com.bmc.arsys.rx.client.record-definition.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](21,56,i.configuration.definitionName)||e.definitionDisplayName||i.newTitle," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isJoinOrExternalRecord),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isJoinOrExternalRecord),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("value",e.fieldGridRows)("selection",e.selectedFieldGridRows)("columns",i.columns)("scrollable",!0)("sortable",!0)("resizableColumns",!0)("bordered",!0)("filterable",!1)("dataKey","guid")("disableRowSelection",!1)("selectionMode","single"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.definitionForJsonViewer)}}function Be(e,t){1&e&&(o["\u0275\u0275element"](0,"span",31),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.record-designer.core-field.tooltip"))}function $e(e,t){if(1&e&&(o["\u0275\u0275template"](0,Be,2,3,"span",30),o["\u0275\u0275text"](1)),2&e){const e=t.dataItem;o["\u0275\u0275property"]("ngIf",e.isCoreField),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.resourceType,"\n")}}function Le(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxRecordDefinitionFieldOption")),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e.fieldOption),"\n")}}function Ge(e,t){1&e&&o["\u0275\u0275element"](0,"span",33)}function ze(e,t){if(1&e&&o["\u0275\u0275template"](0,Ge,1,0,"span",32),2&e){const e=t.dataItem;o["\u0275\u0275property"]("ngIf",e.isInherited)}}function Ue(e,t){if(1&e&&o["\u0275\u0275text"](0),2&e){const e=t.dataItem;o["\u0275\u0275textInterpolate1"](" ",e.sourceRecord,"\n")}}function qe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-record-designer",1),o["\u0275\u0275listener"]("definitionSaved",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onDefinitionSaved(t)})("definitionErrorLoading",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onDefinitionErrorLoading()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCloseDesigner()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configuration",e.configuration)}}class Xe extends p.RxModalClass{constructor(e,t,i,n){super(t,i),this.rxModalService=e,this.activeModalRef=t,this.injector=i,this.translateService=n,this.data=this.activeModalRef.getData(),this.scopeSelectionOptions=this.data.scopeSelectionOptions,this.recordDefinition=this.data.recordDefinition,this.customizationControlProperties=["allowPermissionsOverlay","allowOtherPropertiesOverlay","allowIndexesOverlay","allowFieldsOverlay"],this.initialCustomizationOptions=this.recordDefinition.customizationOptions,this.allowOverlay=(0,h.includes)(Object.values(this.initialCustomizationOptions),!0),this.fields=(0,h.cloneDeep)(this.recordDefinition.fields),this.customizationOptions={allowOtherPropertiesOverlay:this.initialCustomizationOptions.allowOtherPropertiesOverlay||!1,allowPermissionsOverlay:this.initialCustomizationOptions.allowPermissionsOverlay||!1,allowIndexesOverlay:this.initialCustomizationOptions.allowIndexesOverlay||!1,allowFieldsOverlay:this.initialCustomizationOptions.allowFieldsOverlay||!1},this.isFieldsOverlayAllowedSubject=new g.BehaviorSubject(this.initialCustomizationOptions.allowFieldsOverlay),this.isDisabled=this.data.overlayOperation!==d.RX_OVERLAY.operationTypes.createdInThisOverlayGroup,this.definitionScopeName=(0,h.find)(this.scopeSelectionOptions,{name:this.data.definitionScopeName}),this.scope=[this.definitionScopeName],this.isPublicSubject=new g.BehaviorSubject(this.scope[0].id===d.RX_BUNDLE.definitionScopes.public.type),this.areCustomizationOptionsDisabled$=this.isPublicSubject.pipe((0,v.map)(e=>!e||this.isDisabled)),this.isFieldsOverlayDisabled$=(0,g.combineLatest)([this.areCustomizationOptionsDisabled$,this.isFieldsOverlayAllowedSubject]).pipe((0,v.map)(([e,t])=>e||!t)),this.vm$=this.areCustomizationOptionsDisabled$.pipe((0,v.map)(e=>({areCustomizationOptionsDisabled:e})))}onFieldsPropertyChange(){this.recordCustomizationOptionsEditorForm.control.markAsDirty()}ngOnInit(){super.ngOnInit(),this.columns=[{field:"name",header:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label")},{field:"allowOtherPropertiesOverlay",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.scope-customization-options.allow-properties-customization.label"),cellTemplate:this.recordFieldsColumnTemplate,headerClass:"pl-6"},{field:"allowPermissionsOverlay",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.scope-customization-options.allow-permissions-customization.label"),cellTemplate:this.recordFieldsColumnTemplate,headerClass:"pl-6"}]}optionFormatter(e){return e.name}save(){this.scope[0].id===d.RX_BUNDLE.definitionScopeTypes.public?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.scope-customization-options.definition-scope-to-public.warning")}).then(e=>{e&&this.closeModal()}).catch(h.noop):this.data.definitionScopeName===d.RX_BUNDLE.definitionScopeNames.public?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.scope-customization-options.change-scope-from-public-warning.message")}).then(e=>{e&&this.closeModal()}).catch(h.noop):this.closeModal()}onScopeChange(e){this.isPublicSubject.next(e[0].id===d.RX_BUNDLE.definitionScopes.public.type)}closeModal(){const e=Object.assign(Object.assign({},this.recordCustomizationOptionsEditorForm.form.value),{fields:this.fields});e.scope=e.scope[0].id,this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}handleAllowOverlayChange(){Object.keys(this.customizationOptions).forEach(e=>this.customizationOptions[e]=this.allowOverlay),this.isFieldsOverlayAllowedSubject.next(this.allowOverlay)}onRecordCustomizationOptionChange(){this.allowOverlay=this.customizationOptions.allowFieldsOverlay||this.customizationOptions.allowIndexesOverlay||this.customizationOptions.allowOtherPropertiesOverlay||this.customizationOptions.allowPermissionsOverlay,this.isFieldsOverlayAllowedSubject.next(this.customizationOptions.allowFieldsOverlay)}isDirty(){return this.recordCustomizationOptionsEditorForm.dirty}ngOnDestroy(){this.isFieldsOverlayAllowedSubject.complete(),this.isPublicSubject.complete()}}Xe.\u0275fac=function(e){return new(e||Xe)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](m.TranslateService))},Xe.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Xe,selectors:[["rx-record-customization-options-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](w,5),o["\u0275\u0275viewQuery"](E,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordCustomizationOptionsEditorForm=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordFieldsColumnTemplate=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:3,consts:[[4,"ngIf"],["recordFieldsColumnTemplate",""],[1,"designer-modal-body","modal-body"],["recordCustomizationOptionsEditorForm","ngForm"],[1,"w-25"],["rx-id","scope-selection","name","scope",3,"label","options","optionFormatter","tooltip","ngModel","disabled","ngModelChange"],[1,"w-100"],["rx-id","allow-customization-checkbox","name","allowOverlay",3,"label","ngModel","disabled","ngModelChange"],[1,"w-100","d-flex"],[1,"w-50"],["name","allowOtherPropertiesOverlay","rx-id","properties-checkbox",3,"label","ngModel","disabled","ngModelChange"],["name","allowPermissionsOverlay","rx-id","permissions-checkbox",3,"label","ngModel","disabled","ngModelChange"],["name","allowIndexesOverlay","rx-id","search-indexes-checkbox",3,"label","ngModel","disabled","ngModelChange"],["name","allowFieldsOverlay","rx-id","fields-checkbox",3,"label","ngModel","disabled","ngModelChange"],["scrollHeight","340px",3,"value","columns","scrollable","sortable","resizableColumns","bordered","filterable","dataKey"],[1,"modal-footer"],["rx-id","save-button","type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button","rx-id","cancel-button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"checkbox","m-0","pl-4"],[1,"checkbox__label","pl-6","ml-6"],["type","checkbox","role","checkbox",1,"checkbox__input",3,"ngModel","disabled","ngModelChange","change"],[1,"checkbox__item"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,T,41,61,"ng-container",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275template"](2,O,6,4,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"])),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptRxCheckboxComponent,s.AdaptTableComponent,r.CheckboxControlValueAccessor],pipes:[n.AsyncPipe,m.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}'],changeDetection:0});class We extends c.ValueAccessor{constructor(e,t,i,n){super(),this.rxModalService=e,this.rxBundleCacheService=t,this.rxOverlayService=i,this.translateService=n,this.scopeNameSubject=new g.BehaviorSubject(""),this.scopeSelectionOptions$=this.rxBundleCacheService.getDefinitionScopeSelectionOptions().pipe((0,v.map)(e=>e),(0,v.tap)(e=>this.scopeSelectionOptions=e)),this.definitionScopeName$=this.scopeNameSubject.pipe((0,v.mergeMap)(e=>this.rxBundleCacheService.getDefinitionScopeName(e).pipe((0,v.map)(e=>e),(0,v.tap)(e=>this.definitionScopeName=e)))),this.vm$=(0,g.combineLatest)([this.definitionScopeName$,this.scopeSelectionOptions$]).pipe((0,v.map)(([e,t])=>({definitionScopeName:e,scopeSelectionOptions:t})))}ngOnInit(){this.options&&this.updateValues()}ngOnChanges(e){e.options&&this.updateValues()}getOverlayOperation(){var e;return this.rxOverlayService.getOverlayOperation(this.options.recordDefinition.overlayGroupId,(null===(e=this.options.recordDefinition.overlayDescriptor)||void 0===e?void 0:e.parentOverlayGroupId)||null)}updateValues(){this.setAllowOverlayLabel(this.options.recordDefinition.customizationOptions.allowOtherPropertiesOverlay),this.scopeNameSubject.next(this.options.recordDefinition.customizationOptions.scope),this.options.recordDefinition.overlayGroupId?this.overlayOperation=this.getOverlayOperation():this.overlayOperation=d.RX_OVERLAY.operationTypes.createdInThisOverlayGroup}openCustomizationOptionsEditor(){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.designer.scope-customization-options.title"),content:Xe,blockKeyboard:!1,data:{definitionScopeName:this.definitionScopeName,allowOverlay:this.options.recordDefinition.customizationOptions.allowOtherPropertiesOverlay,scopeSelectionOptions:this.scopeSelectionOptions,isDisabled:this.options.isDisabled,overlayOperation:this.overlayOperation,definitionTypeDisplayName:this.options.definitionTypeDisplayName,recordDefinition:this.options.recordDefinition}}).then(e=>{this.setAllowOverlayLabel(e.allowOverlay),this.definitionScopeName=this.scopeSelectionOptions.find(t=>t.id===e.scope).name,this.value=e}).catch(h.noop)}setAllowOverlayLabel(e){this.allowOverlayLabel=e?d.RX_OVERLAY.overlayAllowedLabels.allowed:d.RX_OVERLAY.overlayAllowedLabels.notAllowed}ngOnDestroy(){this.scopeNameSubject.complete()}}We.\u0275fac=function(e){return new(e||We)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](d.RxBundleCacheService),o["\u0275\u0275directiveInject"](d.RxOverlayService),o["\u0275\u0275directiveInject"](m.TranslateService))},We.\u0275cmp=o["\u0275\u0275defineComponent"]({type:We,selectors:[["rx-scope-record-customization-control"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:We,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],["btn-type","tertiary","rx-id","open-customization-options-editor-link",1,"p-0",3,"click"],["name","question_circle_o","placement","right",1,"ml-2",3,"adaptPopover"],["rx-id","scope",1,"mb-0","pt-2"],["rx-id","customization",1,"pt-2"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,P,12,18,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,a.AdaptButtonComponent,a.AdaptIconComponent,a.AdaptPopoverDirective],pipes:[n.AsyncPipe,m.TranslatePipe],encapsulation:2});class He{}He.\u0275fac=function(e){return new(e||He)},He.\u0275mod=o["\u0275\u0275defineNgModule"]({type:He,declarations:[We,Xe],imports:[n.CommonModule,r.FormsModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,f.AdaptCheckbox2Module,a.AdaptPopoverModule,a.AdaptIconModule,a.AdaptRxCheckboxModule,r.ReactiveFormsModule,m.TranslateModule,s.AdaptTableModule],exports:[We]}),He.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.FormsModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,f.AdaptCheckbox2Module,a.AdaptPopoverModule,a.AdaptIconModule,a.AdaptRxCheckboxModule,r.ReactiveFormsModule,m.TranslateModule,s.AdaptTableModule]]});class Qe{constructor(e,t){this.rxFieldDefinitionService=e,this.rxRecordDefinitionService=t}isFieldEditable(e){return!this.rxFieldDefinitionService.isReadOnly(e)&&!this.rxFieldDefinitionService.isJoinedField(e)&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)}isNameEditable(e){return!this.rxFieldDefinitionService.isInheritedField(e)&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)&&!(e.lastUpdateTime&&this.rxFieldDefinitionService.isOverlayMode(e))}isDescriptionEditable(e,t){return this.rxRecordDefinitionService.isJoinRecord(t)?(0,h.includes)(l.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFieldIds,e.id)&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e):!this.rxFieldDefinitionService.isReadOnly(e)&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)}isRequiredEditable(e){const t=!this.rxFieldDefinitionService.isExternalRecordField(e)&&(0,h.includes)(l.RX_RECORD_DEFINITION.alwaysRequiredNonSystemFieldIds,e.id);return this.isFieldEditable(e)&&!t}isSubmitEditable(e,t){return this.isFieldEditable(e)&&!t.isAuditRecordDefinition}arePermissionsEditable(e,t){return e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.id&&this.rxFieldDefinitionService.isPermissionsCustomizationEnabled(e)&&!(this.rxFieldDefinitionService.isJoinedField(e)&&e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.displayId)&&!t.isAuditRecordDefinition&&!(0,h.includes)(l.RX_RECORD_DEFINITION.AR_AUDIT_FIELD_IDS,e.id)||e.allowPermissionsEdit}isAuditingEditable(e,t){return!this.rxFieldDefinitionService.isJoinedField(e)&&!this.rxFieldDefinitionService.isInheritedField(e)&&!t.isAuditRecordDefinition}isFieldIdDisabled(e,t=!1){return Boolean(e.lastUpdateTime)||!this.rxFieldDefinitionService.isJoinedField(e)&&(this.rxFieldDefinitionService.isReservedField(e,t)||this.rxFieldDefinitionService.isInheritedField(e))}isDefaultValueEditable(e,t){return!(this.rxFieldDefinitionService.isReadOnly(e)&&e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.displayId)&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)&&!this.rxRecordDefinitionService.isJoinRecord(t)&&!t.isAuditRecordDefinition}isLengthEditable(e,t){let i=!1;if(!this.rxRecordDefinitionService.isJoinRecord(t)){let n=!1;e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.displayId&&(n=this.rxFieldDefinitionService.isReadOnly(e)||(0,h.includes)(l.RX_RECORD_DEFINITION.AR_CORE_FIELD_IDS,e.id)),i=!n&&this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)&&!t.isAuditRecordDefinition}return i}isStoreEncryptedVisible(e,t){return!this.rxRecordDefinitionService.isCustomRecord(t)&&!this.rxFieldDefinitionService.isExternalRecordField(e)}isStoreEncryptedEditable(e){return this.isFieldEditable(e)&&!(0,h.includes)(l.RX_RECORD_DEFINITION.keyFieldIds,e.id)}isStoreHashedVisible(e,t){return!this.rxRecordDefinitionService.isCustomRecord(t)&&!this.rxFieldDefinitionService.isExternalRecordField(e)}isStoreHashedEditable(e,t){return this.isFieldEditable(e)&&!(0,h.includes)(l.RX_RECORD_DEFINITION.coreFieldIds,e.id)&&!t.isAuditRecordDefinition}isNamedListEditable(e,t){return this.isFieldEditable(e)&&!(0,h.includes)(l.RX_RECORD_DEFINITION.keyFieldIds,e.id)&&!t.isAuditRecordDefinition}isFieldMappingEditable(e){return this.rxFieldDefinitionService.isPropertiesCustomizationEnabled(e)}}Qe.\u0275fac=function(e){return new(e||Qe)(o["\u0275\u0275inject"](l.RxFieldDefinitionService),o["\u0275\u0275inject"](l.RxRecordDefinitionService))},Qe.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Qe,factory:Qe.\u0275fac,providedIn:"root"});class Ke extends c.ValueAccessor{ngOnInit(){this.isRequired=this.value===l.RecordFieldOption.Required||this.value===l.RecordFieldOption.System}onSelectionChange(){this.value=this.isRequired?l.RecordFieldOption.Required:l.RecordFieldOption.Optional}}Ke.\u0275fac=function(){let e;return function(t){return(e||(e=o["\u0275\u0275getInheritedFactory"](Ke)))(t||Ke)}}(),Ke.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ke,selectors:[["rx-field-option-editor"]],features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Ke,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:5,consts:[[3,"label"],[3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-rx-control-label",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-rx-switch",1),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.isRequired=e})("ngModelChange",function(){return t.onSelectionChange()}),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.record-designer.field-properties.required-field.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.isRequired)("disabled",t.isDisabled))},directives:[a.AdaptRxControlLabelComponent,a.AdaptRxSwitchComponent,r.NgControlStatus,r.NgModel],pipes:[m.TranslatePipe],encapsulation:2,changeDetection:0});class Je{constructor(e){this.injector=e,this.translateService=this.injector.get(m.TranslateService),this.rxIdService=this.injector.get(y.RxIdService),this.rxFieldDefinitionService=this.injector.get(l.RxFieldDefinitionService),this.rxFieldDefinitionInspectorHelperService=this.injector.get(Qe),this.rxRecordDefinitionService=this.injector.get(l.RxRecordDefinitionService)}getNewFieldDefinitionModel(e){return Object.assign({id:this.rxIdService.generate(),name:this.translateService.instant("com.bmc.arsys.rx.client.designer.default-field-name.label"),description:null,fieldOption:l.RX_RECORD_DEFINITION.fieldOptions.optional,defaultValue:null,allowPermissionsOverlay:!0,allowOtherPropertiesOverlay:!0,resourceType:this.resourceType},e)}getFieldInspectorConfig(e,t,i){this.rxFieldDefinitionService.isJoinedField(e),this.rxFieldDefinitionService.isExternalRecordField(e);return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"name",component:c.TextFormControlComponent,isDisabled:!this.rxFieldDefinitionInspectorHelperService.isNameEditable(e),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"description",component:c.TextareaFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isDescriptionEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")}},{name:"resourceType",component:c.SelectFormControlComponent,isDisabled:!0,options:{required:!0,label:this.translateService.instant("com.bmc.arsys.rx.client.common.data-type.label"),options:[{id:l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.attachment.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.boolean.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.dateOnly.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.dateTime.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.decimal.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.real.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.real.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.integer.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.selection.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.character.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.character.labelKey)},{id:l.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType,name:this.translateService.instant(l.RX_RECORD_DEFINITION.dataTypes.timeOnly.labelKey)}]}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.details.label"),controls:[{name:"fieldOption",component:Ke,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isRequiredEditable(e)},{name:"anyUserAllowedToSubmit",component:c.SwitchFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isSubmitEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.allow-anyone-to-submit.label")}},{name:"permissions",component:c.RxPermissionEditorComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.arePermissionsEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),type:"config",permissionScope:d.RX_PERMISSION.permissionScope.all}},{name:"",component:c.LabelFormControlComponent,options:{labelKey:"com.bmc.arsys.rx.client.record-designer.definition-properties.auditing.title"}},{name:"audit",component:c.BooleanFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isAuditingEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.audit.label"),tooltip:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.audit.tooltip"),shouldDisplayAsCheckbox:!0}},{name:"copy",component:c.BooleanFormControlComponent,isDisabled:e.audit||i||!this.rxFieldDefinitionInspectorHelperService.isAuditingEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.copy.label"),tooltip:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.copy.tooltip"),shouldDisplayAsCheckbox:!0}},{name:"id",component:c.CounterFormControlComponent,isDisabled:this.rxFieldDefinitionInspectorHelperService.isFieldIdDisabled(e,e.isNewField),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.field-id.label"),allowIntegerOnly:!0}}]}]}validate(e,t){const i=[];return(0,h.isEmpty)((0,h.trim)(e.name))&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")}),data:{propertyName:"name",guid:e.guid}}),l.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.name)||i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")}),data:{propertyName:"name",guid:e.guid}}),e.lastUpdateTime||!(0,h.isNumber)(e.id)||this.rxFieldDefinitionService.isExternalRecordField(e)||!(0,h.inRange)(e.id,1,l.RX_RECORD_DEFINITION.AR_MAX_RESERVED_FIELD_ID+1)||(0,h.includes)(l.RX_RECORD_DEFINITION.AR_CORE_FIELD_IDS,e.id)||i.push({type:p.ValidationIssueType.Warning,data:{propertyName:"id",guid:e.guid},description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.field-id-in-bmc-reserved-range-warning.message")}),e.id&&!(0,h.inRange)(e.id,1,y.RX_NUMBER.maxInteger+1)&&i.push({type:p.ValidationIssueType.Error,data:{propertyName:"id",guid:e.guid},description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-field-id-range.message",{max:y.RX_NUMBER.maxInteger})}),i}}class Ye extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"maxSize",component:c.CounterFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.max-file-size.label"),allowIntegerOnly:!0,minValue:0,maxValue:y.RX_NUMBER.maxInteger}}),n}}Ye.\u0275fac=function(e){return new(e||Ye)(o["\u0275\u0275inject"](o.Injector))},Ye.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ye,factory:Ye.\u0275fac,providedIn:"root"});class Ze extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"defaultValue",component:c.SelectFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),emptyOption:!0,options:[{id:"0",name:this.translateService.instant("com.bmc.arsys.rx.client.common.true")},{id:"1",name:this.translateService.instant("com.bmc.arsys.rx.client.common.false")}]}}),n}}Ze.\u0275fac=function(e){return new(e||Ze)(o["\u0275\u0275inject"](o.Injector))},Ze.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ze,factory:Ze.\u0275fac,providedIn:"root"});class et extends Je{constructor(e,t){super(e),this.rxNumberUtilsService=t,this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.character.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return this.rxFieldDefinitionInspectorHelperService.isStoreEncryptedVisible(e,t)&&n[1].controls.push({name:"shouldPersistEncrypted",component:c.SwitchFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isStoreEncryptedEditable(e),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.store-encrypted.label")}}),this.rxFieldDefinitionInspectorHelperService.isStoreHashedVisible(e,t)&&n[1].controls.push({name:"shouldPersistHashed",component:c.SwitchFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isStoreHashedEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.store-hashed.label")}}),n[1].controls=n[1].controls.concat([{name:"namedListDefinition",component:c.RxDefinitionPickerComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isNamedListEditable(e,t),options:{definitionType:c.RxDefinitionPickerType.NamedList,label:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.named-list.label")}},{name:"maxLength",component:c.CounterFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isLengthEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.length.label"),tooltip:e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.displayId||this.rxRecordDefinitionService.isJoinRecord(t)||e.isNewField?void 0:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.display-id.length.tooltip"),allowIntegerOnly:!0,minValue:0}},{name:"defaultValue",component:c.TextFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isDefaultValueEditable(e,t),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),tooltip:e.id!==l.RX_RECORD_DEFINITION.coreFieldIds.displayId||this.rxRecordDefinitionService.isJoinRecord(t)||e.isNewField?void 0:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.display-id.default-value.tooltip")),allowIntegerOnly:!0}},{name:"pattern",component:c.SelectFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isFieldEditable(e),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.label"),emptyOption:!0,options:[{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.alphabetical.label"),id:"$ALPHA$"},{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.alphanumeric.label"),id:"$ALNUM$"},{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.lowercase.label"),id:"$LOWER$"},{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.named-list.label"),id:"$NAMEDLIST$"},{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.numeric.label"),id:"$DIGIT$"},{name:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.pattern.options.uppercase.label"),id:"$UPPER$"}]}}]),n}validate(e,t){const i=super.validate(e,t);return this.rxNumberUtilsService.isFiniteOrNumberString(e.maxLength)&&Number(e.maxLength)<0&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-min-length-error.message"),data:{propertyName:"maxLength",guid:e.guid}}),e.id===l.RX_RECORD_DEFINITION.coreFieldIds.displayId&&(this.rxRecordDefinitionService.isRegularRecord(t)||this.rxRecordDefinitionService.isExternalRecord(t))&&(1===e.maxLength||(0,h.inRange)(e.maxLength,5,16)||i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-max-length.message"),data:{propertyName:"maxLength",guid:e.guid}}),(1!==e.maxLength&&e.maxLength<=(0,h.size)(e.defaultValue)||1===e.maxLength&&(0,h.size)(e.defaultValue)>=15)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-display-id-range.message"),data:{propertyName:"maxLength",guid:e.guid}})),i}}et.\u0275fac=function(e){return new(e||et)(o["\u0275\u0275inject"](o.Injector),o["\u0275\u0275inject"](y.RxNumberUtilsService))},et.\u0275prov=o["\u0275\u0275defineInjectable"]({token:et,factory:et.\u0275fac,providedIn:"root"});class tt extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"defaultValue",isDisabled:i,component:c.DateFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),n}}tt.\u0275fac=function(e){return new(e||tt)(o["\u0275\u0275inject"](o.Injector))},tt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:tt,factory:tt.\u0275fac,providedIn:"root"});class it extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"defaultValue",component:c.DateTimeFormControlComponent,isDisabled:i||!this.rxFieldDefinitionInspectorHelperService.isFieldEditable(e),options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),n}}it.\u0275fac=function(e){return new(e||it)(o["\u0275\u0275inject"](o.Injector))},it.\u0275prov=o["\u0275\u0275defineInjectable"]({token:it,factory:it.\u0275fac,providedIn:"root"});class nt extends Je{constructor(e,t){super(e),this.rxNumberUtilsService=t}validate(e,t){const i=super.validate(e,t);return e.defaultValue&&Number(e.defaultValue)<this.minValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),minValue:this.minValue}),data:{propertyName:"defaultValue",guid:e.guid}}),e.defaultValue&&Number(e.defaultValue)>this.maxValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),maxValue:this.maxValue}),data:{propertyName:"defaultValue",guid:e.guid}}),e.minValue&&Number(e.minValue)<this.minValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),minValue:this.minValue}),data:{propertyName:"minValue",guid:e.guid}}),e.minValue&&Number(e.minValue)>this.maxValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),maxValue:this.maxValue}),data:{propertyName:"minValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)<this.minValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),minValue:this.minValue}),data:{propertyName:"maxValue",guid:e.guid}}),e.maxValue&&Number(e.maxValue)>this.maxValue&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),maxValue:this.maxValue}),data:{propertyName:"maxValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.defaultValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&Number(e.defaultValue)>=this.minValue&&Number(e.defaultValue)<Number(e.minValue)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-small-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),minValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label")}),data:{propertyName:"defaultValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.defaultValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.defaultValue)<=this.maxValue&&Number(e.defaultValue)>Number(e.maxValue)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label")}),data:{propertyName:"defaultValue",guid:e.guid}}),this.rxNumberUtilsService.isFiniteOrNumberString(e.minValue)&&this.rxNumberUtilsService.isFiniteOrNumberString(e.maxValue)&&Number(e.minValue)>Number(e.maxValue)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.value-is-too-large-error.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),maxValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label")}),data:{propertyName:"minValue",guid:e.guid}}),(0,h.isNil)(e.minValue)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label")}),data:{propertyName:"minValue",guid:e.guid}}),(0,h.isNil)(e.maxValue)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label")}),data:{propertyName:"maxValue",guid:e.guid}}),this.resourceType!==l.RX_RECORD_DEFINITION.dataTypes.integer.resourceType&&(0,h.isNil)(e.precision)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.precision.label")}),data:{propertyName:"maxValue",guid:e.guid}}),i}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls=n[1].controls.concat([{name:"precision",component:c.CounterFormControlComponent,isDisabled:i,options:(0,h.omitBy)({label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.field-properties.precision.label"),required:!0,allowIntegerOnly:!0,minValue:this.minPrecision,maxValue:this.maxPrecision},h.isNil)},{name:"minValue",component:c.CounterFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-min-value.label"),required:!0,allowIntegerOnly:this.allowOnlyInteger,minValue:this.minValue,maxValue:this.maxValue}},{name:"maxValue",component:c.CounterFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.designer.field-properties.integer-max-value.label"),required:!0,allowIntegerOnly:this.allowOnlyInteger,minValue:this.minValue,maxValue:this.maxValue}},{name:"defaultValue",component:c.CounterFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label"),allowIntegerOnly:this.allowOnlyInteger,minValue:this.minValue,maxValue:this.maxValue}}]),n}}nt.\u0275fac=function(e){return new(e||nt)(o["\u0275\u0275inject"](o.Injector),o["\u0275\u0275inject"](y.RxNumberUtilsService))},nt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:nt,factory:nt.\u0275fac,providedIn:"root"});class ot extends nt{constructor(){super(...arguments),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,this.minPrecision=0,this.maxPrecision=9,this.minValue=y.RX_NUMBER.minDecimal,this.maxValue=y.RX_NUMBER.maxDecimal,this.allowOnlyInteger=!1}getNewFieldDefinitionModel(e){return super.getNewFieldDefinitionModel(Object.assign(Object.assign({},e),{precision:2,minValue:this.minValue,maxValue:this.maxValue}))}validate(e,t){const i=super.validate(e,t);return(0,h.inRange)(e.precision,this.minPrecision,this.maxPrecision+1)||i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-precision-range.message",{min:this.minPrecision,max:this.maxPrecision}),data:{propertyName:"precision",guid:e.guid}}),i}}ot.\u0275fac=function(){let e;return function(t){return(e||(e=o["\u0275\u0275getInheritedFactory"](ot)))(t||ot)}}(),ot.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ot,factory:ot.\u0275fac,providedIn:"root"});class rt extends nt{constructor(){super(...arguments),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,this.minPrecision=null,this.maxPrecision=null,this.minValue=y.RX_NUMBER.minInteger,this.maxValue=y.RX_NUMBER.maxInteger,this.allowOnlyInteger=!0}getNewFieldDefinitionModel(e){return super.getNewFieldDefinitionModel(Object.assign(Object.assign({},e),{minValue:this.minValue,maxValue:this.maxValue}))}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.splice(7,1),n}}rt.\u0275fac=function(){let e;return function(t){return(e||(e=o["\u0275\u0275getInheritedFactory"](rt)))(t||rt)}}(),rt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:rt,factory:rt.\u0275fac,providedIn:"root"});class at extends c.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.translateService=t}localize(){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.title"),data:{valueByLocale:Object.assign({},this.value),hideCurrentLocale:!0,isReadOnly:this.options.isReadOnly},size:"sm",content:c.LocalizedCharacterFieldValueModalComponent}).then(e=>{e&&(this.value=e.valueByLocale)}).catch(h.noop)}}at.\u0275fac=function(e){return new(e||at)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](m.TranslateService))},at.\u0275cmp=o["\u0275\u0275defineComponent"]({type:at,selectors:[["rx-localized-character-field-editor"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:at,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:4,consts:[["type","button",1,"localize-button","btn","btn-link","focusable","d-icon-left-pencil","p-0","float-end",3,"click"],[1,"pl-1"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"button",0),o["\u0275\u0275listener"]("click",function(){return t.localize()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",1),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.view-components.localized-character-field.button.localize.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t.value["en-US"]))},pipes:[m.TranslatePipe],encapsulation:2});class st extends Je{constructor(e,t){super(e),this.rxNumberUtilsService=t,this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType}getNewFieldDefinitionModel(e){return super.getNewFieldDefinitionModel(Object.assign(Object.assign({},e),{maxLength:254}))}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls=n[1].controls.concat([{name:"maxLength",component:c.CounterFormControlComponent,isDisabled:i,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.length.label"),minValue:0,maxValue:254,allowIntegerOnly:!0}},{name:"defaultValueByLocale",component:at,options:{isReadOnly:i}}]),n}validate(e,t){const i=super.validate(e,t);return this.rxNumberUtilsService.isFiniteOrNumberString(e.maxLength)&&Number(e.maxLength)<0&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-min-length-error.message"),data:{propertyName:"maxLength",guid:e.guid}}),i}}st.\u0275fac=function(e){return new(e||st)(o["\u0275\u0275inject"](o.Injector),o["\u0275\u0275inject"](y.RxNumberUtilsService))},st.\u0275prov=o["\u0275\u0275defineInjectable"]({token:st,factory:st.\u0275fac,providedIn:"root"});class lt extends nt{constructor(){super(...arguments),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.real.resourceType,this.maxPrecision=null,this.minValue=-1845e16,this.maxValue=1845e16,this.allowOnlyInteger=!1,this.AR_PRECISION_NONE=-1}getNewFieldDefinitionModel(e){return super.getNewFieldDefinitionModel(Object.assign(Object.assign({},e),{precision:6,minValue:this.minValue,maxValue:this.maxValue}))}validate(e,t){const i=super.validate(e,t);return(!isFinite(e.precision)||e.precision<1&&e.precision!=this.AR_PRECISION_NONE)&&i.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-real-field-precision-range.message"),data:{propertyName:"precision",guid:e.guid}}),i}}lt.\u0275fac=function(){let e;return function(t){return(e||(e=o["\u0275\u0275getInheritedFactory"](lt)))(t||lt)}}(),lt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:lt,factory:lt.\u0275fac,providedIn:"root"});class dt extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"selectionFieldOptionProperties",component:c.SelectionFieldOptionsComponent,options:{isReadOnly:!this.rxFieldDefinitionInspectorHelperService.isFieldEditable(e)}}),n}validate(e,t){var i;const n=super.validate(e,t);return(0,h.isEmpty)(null===(i=e.selectionFieldOptionProperties)||void 0===i?void 0:i.optionNamesById)&&n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.options.label")}),data:{propertyName:"selectionFieldOptionProperties",guid:e.guid}}),n}}dt.\u0275fac=function(e){return new(e||dt)(o["\u0275\u0275inject"](o.Injector))},dt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:dt,factory:dt.\u0275fac,providedIn:"root"});class ct extends Je{constructor(e){super(e),this.resourceType=l.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType}getFieldInspectorConfig(e,t,i){const n=super.getFieldInspectorConfig(e,t,i);return n[1].controls.push({name:"defaultValue",isDisabled:i,component:c.TimeFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.default-value.label")}}),n}}ct.\u0275fac=function(e){return new(e||ct)(o["\u0275\u0275inject"](o.Injector))},ct.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ct,factory:ct.\u0275fac,providedIn:"root"});class pt{constructor(e,t,i,n,o,r,a,s,d,c,p){this.fieldServices=new Map,this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType,e),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType,t),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.character.resourceType,i),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType,n),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType,o),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,r),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType,a),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,s),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,d),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.real.resourceType,c),this.fieldServices.set(l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType,p)}getNewFieldDefinitionModel(e,t){return this.fieldServices.get(e).getNewFieldDefinitionModel(t)}getFieldInspectorConfig(e,t,i){return this.fieldServices.get(e.resourceType).getFieldInspectorConfig(e,t,i)}validate(e,t){return this.fieldServices.get(e.resourceType).validate(e,t)}}pt.\u0275fac=function(e){return new(e||pt)(o["\u0275\u0275inject"](Ye),o["\u0275\u0275inject"](Ze),o["\u0275\u0275inject"](et),o["\u0275\u0275inject"](st),o["\u0275\u0275inject"](it),o["\u0275\u0275inject"](tt),o["\u0275\u0275inject"](ct),o["\u0275\u0275inject"](rt),o["\u0275\u0275inject"](ot),o["\u0275\u0275inject"](lt),o["\u0275\u0275inject"](dt))},pt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:pt,factory:pt.\u0275fac,providedIn:"root"});class ut extends c.ValueAccessor{constructor(e,t,i,n,o,r){super(),this.translateService=e,this.rxFieldDefinitionManagerService=t,this.rxRecordDefinitionCacheService=i,this.rxNotificationService=n,this.rxGuidService=o,this.rxFieldDefinitionService=r,this.inheritanceDescriptor={inheritingFrom:"",isInheritingRules:!0,isInheritingFieldPermissions:!0,isInheritingAssociations:!0,isInheritingFieldAuditOptions:!0},this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.record-to-inherit.label"),definitionType:c.RxDefinitionPickerType.InheritableRecord,availableDefinitionPickerStates:{definitionButtonsGroups:[c.RxDefinitionPickerScope.Bundle,c.RxDefinitionPickerScope.All],search:c.RxDefinitionPickerScope.All}},this.destroyed$=new g.ReplaySubject(1),this.isReadOnlySubject=new g.BehaviorSubject(!1),this.isSharedInstanceStorageLockedSubject=new g.BehaviorSubject(!0),this.inheritingFromSubject=new g.BehaviorSubject(""),this.isMakeFinalDisabledSubject=new g.BehaviorSubject(!1),this.isSharedInstanceStorageDisabled$=(0,g.combineLatest)([this.isReadOnlySubject,this.isSharedInstanceStorageLockedSubject]).pipe((0,v.map)(([e,t])=>e||t)),this.inheritFromRecordDefinition$=this.inheritingFromSubject.pipe((0,v.switchMap)(e=>(0,g.iif)(()=>Boolean(e),this.rxRecordDefinitionCacheService.getRecordDefinition(e),(0,g.of)(null))),(0,v.tap)(e=>{e&&(this.inheritFromRecordDefinition=e,this.isInheritingCoreFields=!1,e.isSharedInstanceStorage?(this.inheritanceOptions.isSharedInstanceStorage=!0,this.updateInheritanceOptions(),this.state.inheritCoreFieldsAutomatically=!0,this.isInheritingCoreFields=!0):(this.isNew&&(this.inheritanceOptions.isSharedInstanceStorage=!1),this.state.inheritCoreFieldsAutomatically=!1),this.inheritanceDescriptor.isInheritingRules=!0,this.inheritedFieldDefinitions=this.getInheritedFieldDefinitions(e),(0,h.forEach)(e.securityLabels,function(e){e.inherited=!0}),this.setValue())})),this.isCoreFieldsOptionDisabled$=(0,g.combineLatest)([this.isReadOnlySubject,this.inheritFromRecordDefinition$]).pipe((0,v.map)(([e,t])=>!this.inheritFrom||e||this.state.inheritCoreFieldsAutomatically||this.state.lockCoreFieldInheritanceOption)),this.vm$=(0,g.combineLatest)([this.isReadOnlySubject,this.isSharedInstanceStorageDisabled$,this.isMakeFinalDisabledSubject,this.isCoreFieldsOptionDisabled$]).pipe((0,v.map)(([e,t,i,n])=>({isReadOnly:e,isSharedInstanceStorageDisabled:t,isMakeFinalDisabled:i,isCoreFieldsOptionDisabled:n})))}ngOnInit(){this.options&&this.updateValues()}updateInheritanceOptions(){this.isMakeFinalDisabledSubject.next(this.isReadOnlySubject.value||this.inheritanceOptions.isSharedInstanceStorage&&!this.inheritingFromSubject.value),this.inheritanceOptions.isSharedInstanceStorage&&this.inheritanceOptions.isFinal&&!this.inheritFromRecordDefinition&&(this.inheritanceOptions.isFinal=!1)}onInheritanceOptionsChange(){this.updateInheritanceOptions(),this.setValue()}onInheritanceDescriptorChange(){this.inheritanceDescriptor.isInheritingFieldPermissions&&(this.inheritedFieldDefinitions=this.getInheritedFieldDefinitions(this.inheritFromRecordDefinition)),this.setValue()}ngOnChanges(e){e.options&&this.updateValues()}onRecordDefinitionNameChange(e){this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.inherited-fields-remaining-info.message")),e?this.inheritingFromSubject.next(e):(this.inheritedFieldDefinitions=[],this.setValue())}onInheritCoreFieldsChange(){this.inheritedFieldDefinitions=this.getInheritedFieldDefinitions(this.inheritFromRecordDefinition),this.setValue()}getInheritedFieldDefinitions(e){var t;const i=(0,h.union)((0,h.keys)(this.rxFieldDefinitionManagerService.getNewFieldDefinitionModel(l.RX_RECORD_DEFINITION.resourceTypes.character,null)),["isInherited","anyUserAllowedToSubmit","displayType","explicitPermissions","fieldMapping","fieldTypeName","maxLength","maxSize","maxValue","minValue","namedListDefinition","optionNamesById","optionLabelsById","precision","resourceType","searchable","shouldPersistEncrypted","shouldPersistHashed","tags","version"]);(null===(t=this.inheritanceDescriptor)||void 0===t?void 0:t.isInheritingFieldPermissions)&&i.push("permissions");const n=(0,h.map)(e.fieldDefinitions,e=>(e.isInherited=!0,Object.assign(Object.assign({},(0,h.pick)(e,i)),{guid:this.rxGuidService.generate(),isCoreField:this.rxFieldDefinitionService.isCoreField(e),selectionFieldOptionProperties:e.resourceType===l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?{defaultValue:null,optionNamesById:e.optionNamesById,optionLabelsById:e.optionLabelsById}:null})));return this.isInheritingCoreFields||(0,h.remove)(n,function(e){return(0,h.includes)(l.RX_RECORD_DEFINITION.arCoreFieldIds,e.id)}),n}updateValues(){var e;if(this.options){const t=this.options.recordDefinition;this.inheritanceOptions=Object.assign({},t.recordInheritanceSelector.inheritanceOptions),t.recordInheritanceSelector.inheritanceDescriptor&&(this.inheritanceDescriptor=Object.assign({},t.recordInheritanceSelector.inheritanceDescriptor),this.inheritFrom=this.inheritanceDescriptor.inheritingFrom),this.isNew=!t.lastUpdateTime,this.isReadOnlySubject.next(this.options.isReadOnly),this.isSharedInstanceStorageLockedSubject.next(!this.isNew||!(0,h.isEmpty)(this.inheritFrom)),(null===(e=t.inheritanceDescriptor)||void 0===e?void 0:e.inheritingFrom)&&(this.isSharedInstanceStorageLockedSubject.next(!0),this.rxRecordDefinitionCacheService.getRecordDefinition(t.inheritanceDescriptor.inheritingFrom).pipe((0,v.take)(1)).subscribe(e=>{if(e.isSharedInstanceStorage)this.state.inheritCoreFieldsAutomatically=!0,this.isInheritingCoreFields=!0;else{var i=t.fields;this.isInheritingCoreFields=(0,h.some)(i,function(e){return e.isInherited&&(0,h.includes)(l.RX_RECORD_DEFINITION.arCoreFieldIds,e.id)})}})),this.state={editMode:!this.isNew,inheritCoreFieldsAutomatically:!1,lockCoreFieldInheritanceOption:!this.isNew}}}setValue(){this.value={inheritanceOptions:this.inheritanceOptions,inheritanceDescriptor:this.inheritFrom?Object.assign(Object.assign({},this.inheritanceDescriptor),{inheritingFrom:this.inheritFrom}):null,isInheritingCoreFields:this.inheritFrom?this.isInheritingCoreFields:null,inheritedFieldDefinitions:this.inheritedFieldDefinitions}}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.isReadOnlySubject.complete(),this.isSharedInstanceStorageLockedSubject.complete(),this.inheritingFromSubject.complete(),this.isMakeFinalDisabledSubject.complete()}}ut.\u0275fac=function(e){return new(e||ut)(o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](pt),o["\u0275\u0275directiveInject"](l.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](d.RxNotificationService),o["\u0275\u0275directiveInject"](y.RxGuidService),o["\u0275\u0275directiveInject"](l.RxFieldDefinitionService))},ut.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ut,selectors:[["rx-record-inheritance-selector"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:ut,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"label","ngModel","disabled","tooltip","ngModelChange"],["name","inherit-from","rx-id","record-definition-name-field",1,"form-group","d-block",3,"options","ngModel","disabled","ngModelChange"],[3,"label","ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,_,12,34,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,a.AdaptRxCheckboxComponent,r.NgControlStatus,r.NgModel,c.RxDefinitionPickerComponent],pipes:[n.AsyncPipe,m.TranslatePipe],encapsulation:2});class mt{}mt.\u0275fac=function(e){return new(e||mt)},mt.\u0275mod=o["\u0275\u0275defineNgModule"]({type:mt,declarations:[ut],imports:[n.CommonModule,r.FormsModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,f.AdaptCheckbox2Module,a.AdaptPopoverModule,a.AdaptIconModule,a.AdaptRxCheckboxModule,r.ReactiveFormsModule,m.TranslateModule,s.AdaptTableModule,c.RxDefinitionPickerModule],exports:[ut]}),mt.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.FormsModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,f.AdaptCheckbox2Module,a.AdaptPopoverModule,a.AdaptIconModule,a.AdaptRxCheckboxModule,r.ReactiveFormsModule,m.TranslateModule,s.AdaptTableModule,c.RxDefinitionPickerModule]]});class ft extends b.ComponentStore{constructor(){super({searchFields:[],isDirty:!1,isCategoryVisible:!0,isValid:!0,availableFields:[],searchDefinition:{}}),this.searchFields$=this.select(e=>e.searchFields),this.availableFields$=this.select(e=>e.availableFields),this.isDirty$=this.select(e=>e.isDirty),this.isValid$=this.select(e=>e.isValid),this.vm$=this.select(this.availableFields$,this.searchFields$,this.isDirty$,this.isValid$,(e,t,i,n)=>({availableFields:e,searchFields:t,isDirty:i,isValid:n})),this.toggleOpen=this.updater((e,t)=>{const i=[...e.searchFields];return i.forEach(e=>{e.get("isOpen").setValue(t)}),Object.assign(Object.assign({},e),{searchFields:i})}),this.updateFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{searchFields:[...e.searchFields,t],isValid:!1})),this.updateAvailableFields=this.updater((e,t)=>{const i=[...e.searchFields];return i.forEach(i=>{i.get("isCategoryVisible").setValue((0,h.find)(e.availableFields,{id:t.id}).resourceType!==l.RX_RECORD_DEFINITION.resourceTypes.attachment)}),Object.assign(Object.assign({},e),{availableFields:e.availableFields.filter(e=>e.id!==t.id),isDirty:!0,searchFields:i,isValid:!e.searchFields.some(e=>e.invalid)})}),this.removeSearchField=this.updater((e,t)=>Object.assign(Object.assign({},e),{isDirty:!0,searchFields:e.searchFields.filter((e,i)=>t!==i),isValid:!e.searchFields.some(e=>e.invalid)})),this.markDirty=this.updater(e=>Object.assign(Object.assign({},e),{isDirty:!0,isValid:!e.searchFields.some(e=>e.invalid)}))}}ft.\u0275fac=function(e){return new(e||ft)},ft.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ft,factory:ft.\u0275fac});class ht extends p.RxModalClass{constructor(e,t,i,n,o){super(t,n),this.searchFieldsEditorModalStore=e,this.activeModalRef=t,this.formBuilder=i,this.injector=n,this.rxFieldDefinitionService=o,this.vm$=this.searchFieldsEditorModalStore.vm$,this.destroyed$=new g.ReplaySubject(1),this.recordDefinition=this.activeModalRef.getData().recordDefinition,this.isReadOnly=this.activeModalRef.getData().isReadOnly}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}ngOnInit(){super.ngOnInit(),this.searchFieldsEditorModalStore.isDirty$.pipe((0,v.filter)(Boolean),(0,v.take)(1)).subscribe(()=>{this.markAsDirty()});const e=this.activeModalRef.getData().searchFields.map((e,t)=>this.formBuilder.group({id:e.id,searchFieldName:[[e],r.Validators.required],category:e.searchDefinition.searchCategoryName,isOpen:e.id===this.activeModalRef.getData().searchFieldIndex,isCategoryVisible:e.resourceType!==l.RX_RECORD_DEFINITION.resourceTypes.attachment,searchDefinition:e.searchDefinition})),t=this.recordDefinition.fields.filter(e=>this.rxFieldDefinitionService.isSearchable(e,this.recordDefinition)).filter(t=>e.every(e=>e.get("id").value!==t.id));this.searchFieldsEditorModalStore.patchState({searchFields:e,availableFields:t})}optionFormatter(e){return e.name}toggleOpen(e){this.searchFieldsEditorModalStore.toggleOpen(e)}addNewSearchField(){this.searchFieldsEditorModalStore.updateFields(this.formBuilder.group({id:"",searchFieldName:[[],r.Validators.required],category:"",isOpen:!0,isCategoryVisible:!0,searchDefinition:{enableFTSSearch:!1,enableCognitiveSearch:!1}}))}onSelectedFieldChange(e){this.searchFieldsEditorModalStore.updateAvailableFields(e[0])}onSearchCategoryChange(){this.searchFieldsEditorModalStore.markDirty()}onRemoveSearchField(e){this.searchFieldsEditorModalStore.removeSearchField(e)}saveSearchFields(){this.searchFieldsEditorModalStore.searchFields$.pipe((0,v.take)(1)).subscribe(e=>{this.activeModalRef.close(e)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ht.\u0275fac=function(e){return new(e||ht)(o["\u0275\u0275directiveInject"](ft),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](l.RxFieldDefinitionService))},ht.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ht,selectors:[["rx-search-field-editor-modal"]],features:[o["\u0275\u0275ProvidersFeature"]([ft]),o["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["adapt-button","","btn-type","tertiary","class","mt-2 p-0","rx-id","add-new-search-field-button",3,"click",4,"ngIf"],["class","btn-group ml-auto",4,"ngIf"],["class","border-bottom pb-1 d-flex align-items-center","id","selected-search-field","class","designer-modal-accordion-wrapper",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","secondary","rx-id","close-button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","rx-id","add-new-search-field-button",1,"mt-2","p-0",3,"click"],[1,"d-icon-plus_circle"],[1,"btn-group","ml-auto"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["id","selected-search-field",1,"designer-modal-accordion-wrapper"],[3,"multiselect"],["class","designer-modal-accordion-content",4,"ngFor","ngForOf"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"formGroup","isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title"],[1,"right-header-block"],["class","d-icon-left-cross_adapt p-1 pr-4 ml-3","adapt-button","","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],[1,"row","form-group"],["rx-id","available-fields","formControlName","searchFieldName",3,"ngClass","label","options","optionFormatter","optionContentTemplate","disabled","ngModelChange"],["class","d-block col-6","rx-id","search-field-category","formControlName","category",3,"label","disabled","ngModelChange",4,"ngIf"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["rx-id","search-field-category","formControlName","category",1,"d-block","col-6",3,"label","disabled","ngModelChange"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","config",1,"w-100",3,"label"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"],["type","button","adapt-button","","btn-type","secondary","rx-id","close-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,X,12,6,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,a.AdaptButtonComponent,a.AdaptAccordionComponent,n.NgForOf,a.AdaptAccordionTabComponent,r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,n.NgClass,a.AdaptRxTextfieldComponent,a.AdaptEmptyStateComponent],pipes:[n.AsyncPipe,m.TranslatePipe],styles:[W]});class gt extends c.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.translateService=t,this.searchFieldsSubject=new g.BehaviorSubject([]),this.searchFields$=this.searchFieldsSubject.asObservable().pipe((0,v.shareReplay)(1))}ngOnInit(){this.options&&this.updateValues()}ngOnChanges(e){e.options&&this.updateValues()}ngOnDestroy(){this.searchFieldsSubject.complete()}updateValues(){const e=this.options.recordDefinitionModel.fields.filter(e=>{var t,i;return(e.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.character||e.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.attachment)&&Boolean(e.searchDefinition)&&((null===(t=e.searchDefinition)||void 0===t?void 0:t.enableFTSSearch)||(null===(i=e.searchDefinition)||void 0===i?void 0:i.enableCognitiveSearch))});this.searchFieldsSubject.next(e)}openEditor(e){this.searchFields$.pipe((0,v.take)(1)).subscribe(t=>{this.rxModalService.openModal({content:ht,title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.search-fields.search-field-editor.title"),data:{searchFields:t,fieldDefinitions:this.options.recordDefinitionModel.fields,recordDefinition:this.options.recordDefinitionModel,searchFieldIndex:e,isReadOnly:this.options.isReadOnly}}).then(e=>{const t=e.map(e=>{var t;const i=this.options.recordDefinitionModel.fields.find(t=>{var i;return(null===(i=e.get("searchFieldName"))||void 0===i?void 0:i.value[0].id)===t.id});if(i)return Object.assign(Object.assign({},i),{searchDefinition:Object.assign(Object.assign({},i.searchDefinition),{enableCognitiveSearch:Boolean(this.options.recordDefinitionModel.enableCognitiveSearch),enableFTSSearch:(null===(t=i.searchDefinition)||void 0===t?void 0:t.enableFTSSearch)||!Boolean(this.options.recordDefinitionModel.enableCognitiveSearch),stripTagsForSearch:!1,enableLiteralSearch:!1,searchCategoryName:e.get("category").value}),overlayDescriptor:Object.assign(Object.assign({},i.overlayDescriptor),{otherPropertiesOverlayType:d.RX_OVERLAY.overlayTypes.overwrite})})});this.value=t,this.searchFieldsSubject.next(t)}).catch(h.noop)})}removeSearchField(e){this.searchFields$.pipe((0,v.take)(1)).subscribe(t=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.search-fields.delete-confirmation.message",{name:e.name})}).then(i=>{if(i){const i=t.filter(t=>t.name!==e.name);this.value=i,this.searchFieldsSubject.next(i)}})})}}gt.\u0275fac=function(e){return new(e||gt)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](m.TranslateService))},gt.\u0275cmp=o["\u0275\u0275defineComponent"]({type:gt,selectors:[["rx-search-field-editor-control-control"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:gt,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:4,consts:[["type","button","class","p-0 pb-1","btn-type","tertiary","rx-id","add-search-field-button",3,"click",4,"ngIf"],[4,"ngIf"],["type","button","btn-type","tertiary","rx-id","add-search-field-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-left-plus_circle"],["class","rx-search-field",4,"ngFor","ngForOf"],[1,"rx-search-field"],[1,"rx-selected-column__header-container"],["rx-id","card-title",1,"rx-search-field__header-title"],["type","button","class","rx-button-unstyled d-icon-cross btn-link float-right","rx-id","remove-search-field",3,"click",4,"ngIf"],["type","button","rx-id","edit-button",1,"rx-button-unstyled","d-icon-left-pencil","btn-link","float-right",3,"click"],["rx-id","search-field-type",1,"rx-search-field-type"],["type","button","rx-id","remove-search-field",1,"rx-button-unstyled","d-icon-cross","btn-link","float-right",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,H,4,3,"adapt-button",0),o["\u0275\u0275template"](1,J,2,1,"div",1),o["\u0275\u0275pipe"](2,"async")),2&e&&(o["\u0275\u0275property"]("ngIf",!t.isDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](2,2,t.searchFields$)))},directives:[n.NgIf,a.AdaptButtonComponent,n.NgForOf],pipes:[n.AsyncPipe,m.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-search-field[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-search-field__header-container[_ngcontent-%COMP%]{display:flex}.rx-search-field__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;font-size:14px}.rx-search-field-type[_ngcontent-%COMP%]{color:#959899;font-size:10px;overflow:hidden;text-overflow:ellipsis}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}'],changeDetection:0});class vt{}vt.\u0275fac=function(e){return new(e||vt)},vt.\u0275mod=o["\u0275\u0275defineNgModule"]({type:vt,declarations:[gt,ht],imports:[n.CommonModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,a.AdaptRxFormControlModule,a.AdaptRxTextfieldModule,a.AdaptAccordionModule,p.RxModalModule,r.ReactiveFormsModule,m.TranslateModule,a.AdaptEmptyStateModule],exports:[gt,ht]}),vt.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,a.AdaptTooltipModule,a.AdaptRxSelectModule,a.AdaptButtonModule,a.AdaptRxFormControlModule,a.AdaptRxTextfieldModule,a.AdaptAccordionModule,p.RxModalModule,r.ReactiveFormsModule,m.TranslateModule,a.AdaptEmptyStateModule]]});const yt=(0,x.createAction)("[Record Designer] Init",(0,x.props)()),bt=(0,x.createAction)("[Record Designer] Load Definition"),xt=(0,x.createAction)("[Record Designer] Clear Search Fields"),Ct=(0,x.createAction)("[Record Designer] Load Definition Success",(0,x.props)()),St=(0,x.createAction)("[Record Designer] Init Definition Model",(0,x.props)()),Dt=(0,x.createAction)("[Record Designer] Mark Designer Pristine"),It=(0,x.createAction)("[Record Designer] Mark Designer Dirty"),Rt=(0,x.createAction)("[Record Designer] Toggle Design Mode"),wt=(0,x.createAction)("[Record Designer] Update Definition Model From Designer",(0,x.props)()),Et=(0,x.createAction)("[Record Designer] Update Selected Field Model",(0,x.props)()),Ft=(0,x.createAction)("[Record Designer] Set Inspector Tab Index",(0,x.props)()),Mt=(0,x.createAction)("[Record Designer] Create New Field Model",(0,x.props)()),Tt=(0,x.createAction)("[Record Designer] Add Field Model",(0,x.props)()),Ot=(0,x.createAction)("[Record Designer] Add New Field Models",(0,x.props)()),Nt=(0,x.createAction)("[Record Designer] Set Selected Field GUID",(0,x.props)()),At=(0,x.createAction)("[Record Designer] Clear Selected Field GUID"),Pt=(0,x.createAction)("[Record Designer] Delete Selected Field"),jt=(0,x.createAction)("[Record Designer] Copy Selected Field"),_t=(0,x.createAction)("[Record Designer] Check If Field Used By Indexes"),Vt=(0,x.createAction)("[Record Designer] Delete Selected Field Success"),kt=(0,x.createAction)("[Record Designer] Delete Selected Field Error"),Bt=((0,x.createAction)("[Record Designer] Save Definition"),(0,x.createAction)("[Record Designer] Save Definition Success",(0,x.props)())),$t=(0,x.createAction)("[Record Designer] Destroy"),Lt={featureSelector:"recordDesigner",joinCriteriaPath:"joinCriteria",archiveDataCriteriaPath:"archiveDataCriteria",archiving:{types:{doNotArchive:{nameKey:"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.types.do-not-archive.label",id:l.ArchiveType.None},archiveAndDeleteSourceRecord:{nameKey:"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.types.archive-and-delete-source-record.label",id:l.ArchiveType.CopyToArchiveAndDeleteFromSource},deleteSourceRecord:{nameKey:"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.types.delete-source-record.label",id:l.ArchiveType.DeleteFromSource}}}},Gt=(0,x.createFeatureSelector)(Lt.featureSelector),zt=(0,x.createSelector)(Gt,e=>e.model),Ut=(0,x.createSelector)(zt,e=>e.definitionName),qt=(0,x.createSelector)(zt,e=>e.bundleId),Xt=(0,x.createSelector)(zt,e=>e.isDesignMode),Wt=(0,x.createSelector)(zt,e=>e.isDirty),Ht=(0,x.createSelector)(zt,e=>e.inspectorTabIndex),Qt=(0,x.createSelector)(zt,e=>e.definitionModel),Kt=(0,x.createSelector)(zt,e=>e.definitionModelFromDefinition),Jt=(0,x.createSelector)(zt,e=>e.selectedFieldGuid),Yt=(0,x.createSelector)(zt,e=>e.savedDefinitionName);class Zt{constructor(e,t,i,n){this.rxFieldDefinitionService=e,this.translateService=t,this.rxDefinitionNameService=i,this.rxFieldDefinitionManagerService=n}validate(e){var t;const i=this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.must-be-unique.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")}),n=[],o=[];if((0,h.chain)(e.fields).clone().reverse().forEach((t,n,r)=>{let a=[];(0,h.find)(r,e=>t.name===e.name,n+1)&&a.push({type:p.ValidationIssueType.Error,description:i,data:{propertyName:"name",guid:t.guid}}),t.id&&(0,h.find)(r,e=>t.id===e.id,n+1)&&a.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.duplicate-field-id-error.message"),data:{propertyName:"id",guid:t.guid}}),e.resourceType!==l.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType||t.lastUpdateTime||(0,h.includes)(l.RX_RECORD_DEFINITION.coreFieldIds,t.id)||!(0,h.includes)(l.RX_RECORD_DEFINITION.AR_CORE_FIELD_IDS,t.id)||a.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-field-id.message",{fieldId:t.id}),data:{editFieldGroups:!0,guid:t.guid}}),a=a.concat(this.rxFieldDefinitionManagerService.validate(t,e)),a.length&&o.push({title:t.name,issues:a})}).value(),(0,h.isEmpty)((0,h.trim)(e.name))&&n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.record-name.label")}),data:{propertyName:"name"}}),l.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.name)||n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition.label")}),data:{propertyName:"name"}}),null==e?void 0:e.isAuditingEnabled){const t=this.rxDefinitionNameService.getDisplayName(e.auditRecordDefinitionName);(0,h.isEmpty)((0,h.trim)(t))&&n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-audit-definition-name.message"),data:{propertyName:"auditRecordDefinitionName"}}),l.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(t)||n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audit-record-definition-name.label")}),data:{propertyName:"auditRecordDefinitionName"}})}if(e.isArchivingEnabled&&e.archiveType===Lt.archiving.types.archiveAndDeleteSourceRecord.id){const t=this.rxDefinitionNameService.getDisplayName(e.archiveRecordDefinitionName);(0,h.isEmpty)((0,h.trim)(t))&&n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-archive-definition-name.message"),data:{propertyName:"archiveRecordDefinitionName"}}),l.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(t)||n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message",{propertyName:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archive-record-definition-name.label")}),data:{propertyName:"archiveRecordDefinitionName"}})}if(e.weightedRelevancyFields){const i=(0,h.find)(e.fields,{id:null===(t=e.weightedRelevancyFields)||void 0===t?void 0:t.TITLE});i&&!i.searchDefinition&&n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.validation.invalid-text-search-enabled-field.message"),data:{propertyName:"searchTitleField"}})}(0,h.forEach)(e.indexDefinitions,(e,t)=>{e.indexFieldIds.length||n.push({type:p.ValidationIssueType.Error,description:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.indexes.no-field-selected.message",{indexName:e.indexName||this.translateService.instant("com.bmc.arsys.rx.client.record-designer.indexes.new-index.label")}),data:{indexToEditIndex:t,propertyName:"indexDefinitions"}})});let r=[];return n.length&&r.push({title:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition.label"),issues:n}),r=r.concat((0,h.reverse)(o)),r}}Zt.\u0275fac=function(e){return new(e||Zt)(o["\u0275\u0275inject"](l.RxFieldDefinitionService),o["\u0275\u0275inject"](m.TranslateService),o["\u0275\u0275inject"](d.RxDefinitionNameService),o["\u0275\u0275inject"](pt))},Zt.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Zt,factory:Zt.\u0275fac,providedIn:"root"});class ei extends p.RxModalClass{constructor(e,t,i){super(e,i),this.activeModalRef=e,this.translateService=t,this.injector=i,this.isOverlayMode=this.activeModalRef.getData().isOverlayMode,this.isReadOnly=this.activeModalRef.getData().isReadOnly,this.actualAssociationsToFollow=this.activeModalRef.getData().actualAssociationsToFollow,this.selectedAssociationsToFollow=this.activeModalRef.getData().selectedAssociationsToFollow,this.associationType=this.selectedAssociationsToFollow.selectionType,this.associationTypes={followParent:l.AssociationSelectionType.FollowParent,selected:l.AssociationSelectionType.Selected,allEnforced:l.AssociationSelectionType.AllEnforced,all:l.AssociationSelectionType.All},this.columns=[],this.associationGridRows=this.activeModalRef.getData().associationDefinitions.map(e=>({name:e.name,firstRecord:e.nodeAId,secondRecord:e.nodeBId,enforced:e.nodeAModality===C.RX_ASSOCIATION_DEFINITION.modality.required,isSelectionDisabled:this.isReadOnly,isAssociationSelectedInBase:this.isOverlayMode&&this.actualAssociationsToFollow.specificAssociationNames.includes(e.name)})),this.selectedAssociationGridRows=[]}ngOnInit(){super.ngOnInit(),this.columns=[{field:"name",header:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),cellTemplate:this.nameCellTemplate},{field:"firstRecord",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.association-first-record.label"),cellTemplate:this.nameCellTemplate},{field:"secondRecord",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.association-second-record.label"),cellTemplate:this.nameCellTemplate},{field:"enforced",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.enforced-association.label"),cellTemplate:this.enforceCellTemplate}],this.selectAssociations(),this.selectedAssociationGridRows=this.selectedAssociationGridRows.concat(this.associationGridRows.filter(e=>(0,h.includes)(this.selectedAssociationsToFollow.specificAssociationNames,e.name)))}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}onSelectionChange(e){this.markAsDirty(),this.selectedAssociationGridRows=e}disabledRowSelectionResolver(e){return e.isSelectionDisabled||e.isAssociationSelectedInBase}selectAssociations(){this.selectedAssociationGridRows=[],this.associationType===l.AssociationSelectionType.Selected?this.enableRowSelection():this.associationType===l.AssociationSelectionType.All?(this.selectedAssociationGridRows=[...this.associationGridRows],this.disableRowSelection()):this.associationType===l.AssociationSelectionType.AllEnforced?(this.selectedAssociationGridRows=this.associationGridRows.filter(e=>e.enforced),this.disableRowSelectionForEnforcedAssociations()):this.associationType===l.AssociationSelectionType.FollowParent&&this.disableRowSelection(),!this.isOverlayMode||this.actualAssociationsToFollow.selectionType!==l.AssociationSelectionType.AllEnforced&&this.actualAssociationsToFollow.selectionType!==l.AssociationSelectionType.Selected||this.selectAssociationsFromBase()}selectAssociationsFromBase(){this.selectedAssociationGridRows=this.selectedAssociationGridRows.concat(this.associationGridRows.filter(e=>(0,h.includes)(this.actualAssociationsToFollow.specificAssociationNames,e.name)))}disableRowSelectionForEnforcedAssociations(){this.associationGridRows.forEach(e=>{e.isSelectionDisabled=this.isReadOnly||e.enforced})}disableRowSelection(){this.associationGridRows.forEach(e=>{e.isSelectionDisabled=!0})}enableRowSelection(){this.associationGridRows.forEach(e=>{e.isSelectionDisabled=this.isReadOnly})}save(){let e=[];this.associationType===l.AssociationSelectionType.Selected?e=(0,h.map)(this.selectedAssociationGridRows,"name"):this.associationType===l.AssociationSelectionType.AllEnforced&&(e=this.selectedAssociationGridRows.filter(e=>!e.enforced).map(e=>e.name)),this.activeModalRef.close({specificAssociationNames:e,selectionType:this.associationType})}}ei.\u0275fac=function(e){return new(e||ei)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},ei.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ei,selectors:[["rx-archive-associations-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Y,7),o["\u0275\u0275viewQuery"](Z,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.nameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.enforceCellTemplate=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:43,consts:[[1,"modal-body","designer-modal-body","d-flex","mh-100","flex-column"],[3,"ngModel","ngModelChange"],["rx-id","selected-associations",1,"radio-inline",3,"label","value","disabled"],["rx-id","all-associations",1,"radio-inline",3,"label","value","disabled"],["rx-id","all-enforced-associations",1,"radio-inline",3,"label","value","disabled"],["rx-id","follow-parent-association",1,"radio-inline",3,"label","value","disabled"],["scrollHeight","flex",3,"value","selection","columns","scrollable","sortable","resizableColumns","bordered","filterable","dataKey","disableRowSelection","selectionMode","disabledRowSelectionResolver","selectionChange"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"],["nameCellTemplate",""],["enforceCellTemplate",""],[4,"ngIf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-radiobutton-group",1),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.associationType=e})("ngModelChange",function(){return t.markAsDirty(),t.selectAssociations()}),o["\u0275\u0275element"](5,"adapt-rx-radiobutton",2),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"adapt-rx-radiobutton",3),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275element"](9,"adapt-rx-radiobutton",4),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275element"](11,"adapt-rx-radiobutton",5),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"adapt-table",6),o["\u0275\u0275listener"]("selectionChange",function(e){return t.onSelectionChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",7),o["\u0275\u0275elementStart"](15,"button",8),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",9),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,ee,2,3,"ng-template",null,10,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](23,ne,2,2,"ng-template",null,11,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,29,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.select-associations-to-follow.message")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.associationType),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,31,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.selected-associations.label")),o["\u0275\u0275property"]("value",t.associationTypes.selected)("disabled",t.isReadOnly||t.isOverlayMode&&(t.actualAssociationsToFollow.selectionType===t.associationTypes.all||t.actualAssociationsToFollow.selectionType===t.associationTypes.allEnforced||t.actualAssociationsToFollow.selectionType===t.associationTypes.followParent)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,33,"com.bmc.arsys.rx.client.common.all.label")),o["\u0275\u0275property"]("value",t.associationTypes.all)("disabled",t.isReadOnly||t.isOverlayMode&&(t.actualAssociationsToFollow.selectionType===t.associationTypes.all||t.actualAssociationsToFollow.selectionType===t.associationTypes.followParent)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,35,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.all-enforced-associations.label")),o["\u0275\u0275property"]("value",t.associationTypes.allEnforced)("disabled",t.isReadOnly||t.isOverlayMode&&(t.actualAssociationsToFollow.selectionType===t.associationTypes.all||t.actualAssociationsToFollow.selectionType===t.associationTypes.followParent)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,37,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.follow-parent-associations.label")),o["\u0275\u0275property"]("value",t.associationTypes.followParent)("disabled",t.isReadOnly||t.isOverlayMode&&(t.actualAssociationsToFollow.selectionType===t.associationTypes.selected||t.actualAssociationsToFollow.selectionType===t.associationTypes.all||t.actualAssociationsToFollow.selectionType===t.associationTypes.allEnforced||t.actualAssociationsToFollow.selectionType===t.associationTypes.followParent)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",t.associationGridRows)("selection",t.selectedAssociationGridRows)("columns",t.columns)("scrollable",!0)("sortable",!0)("resizableColumns",!1)("bordered",!0)("filterable",!1)("dataKey","name")("disableRowSelection",!1)("selectionMode","multiple")("disabledRowSelectionResolver",t.disabledRowSelectionResolver),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.isDirty()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,39,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,41,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[a.AdaptRxRadiobuttonGroupComponent,r.NgControlStatus,r.NgModel,a.AdaptRxRadiobuttonComponent,s.AdaptTableComponent,a.AdaptButtonComponent,n.NgIf],pipes:[m.TranslatePipe,d.RxDefinitionNamePipe],styles:[W],changeDetection:0});class ti extends p.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.missingAssociations=this.activeModalRef.getData().missingAssociations}ngOnInit(){super.ngOnInit()}close(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}}ti.\u0275fac=function(e){return new(e||ti)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},ti.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ti,selectors:[["rx-missing-archive-definitions-modal-selector"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:10,consts:[[1,"modal-body","pt-0"],[1,"row"],[1,"col-sm"],[1,"font-weight-bold"],["class","row mb-2",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","secondary","rx-id","close-button",3,"click"],[1,"row","mb-2"],["target","_blank",1,"d-icon-left-pop_up",3,"href"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"h6",3),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275elementStart"](7,"h6",3),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,oe,8,7,"div",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",5),o["\u0275\u0275elementStart"](12,"button",6),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,4,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.association-name.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,6,"com.bmc.arsys.rx.client.common.record-definition-name.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.missingAssociations),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,8,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[n.NgForOf,a.AdaptButtonComponent],pipes:[m.TranslatePipe,d.RxDefinitionNamePipe],encapsulation:2});class ii extends c.ValueAccessor{constructor(e,t,i,n){super(),this.rxModalService=e,this.translateService=t,this.rxRecordDefinitionCacheService=i,this.rxNotificationService=n,this.associationLabels={[l.AssociationSelectionType.Selected]:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.selected-associations.label"),[l.AssociationSelectionType.All]:this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"),[l.AssociationSelectionType.AllEnforced]:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.all-enforced-associations.label"),[l.AssociationSelectionType.FollowParent]:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.follow-parent-associations.label")},this.recordDefinitionNameSubject=new g.BehaviorSubject(null),this.associationToFollowSubject=new g.BehaviorSubject({specificAssociationNames:[],selectionType:l.AssociationSelectionType.FollowParent}),this.associationDefinitions$=this.recordDefinitionNameSubject.pipe((0,v.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,v.map)(t=>(0,h.reject)(t[e],{cardinality:C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany}).filter(t=>t.nodeAId===e))):(0,g.of)([])),(0,v.shareReplay)(1)),this.validAssociations$=this.associationDefinitions$.pipe((0,v.map)(e=>{const t=this.value.selectionType,i=e.filter(e=>(0,h.includes)(this.value.specificAssociationNames,e.name));let n=[];return t===l.AssociationSelectionType.Selected?n=i:t===l.AssociationSelectionType.All?n=e:t===l.AssociationSelectionType.AllEnforced&&(n=e.filter(e=>e.nodeAModality===C.RX_ASSOCIATION_DEFINITION.modality.required).concat(i)),n})),this.missingAssociations$=this.validAssociations$.pipe((0,v.switchMap)(e=>(0,g.forkJoin)(e.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.nodeBId).pipe((0,v.filter)(e=>{var t;return!(null===(t=e.archiveDescriptor)||void 0===t?void 0:t.isEnabled)}),(0,v.map)(()=>({name:e.name,secondRecord:e.nodeBId,url:`${window.location.origin}/helix/index.html#/${d.RX_APPLICATION.innovationStudioBundleId}/record/edit2/${e.nodeBId}`}))))).pipe((0,v.defaultIfEmpty)([])))),this.associationLabel$=(0,g.combineLatest)([this.associationToFollowSubject,this.associationDefinitions$]).pipe((0,v.map)(([e,t])=>{let i;if(e.selectionType===l.AssociationSelectionType.AllEnforced){const n=(0,h.filter)(t,t=>(0,h.includes)(e.specificAssociationNames,t.name));i=(0,h.some)(n,e=>e.nodeAModality!==C.RX_ASSOCIATION_DEFINITION.modality.required)?`${this.associationLabels[l.AssociationSelectionType.AllEnforced]} + ${this.associationLabels[l.AssociationSelectionType.Selected]}`:this.associationLabels[l.AssociationSelectionType.AllEnforced]}else i=this.associationLabels[e.selectionType];return i}))}ngOnChanges(e){var t,i;const n=e.options.previousValue.definitionModel.lastUpdateTime?`${e.options.previousValue.bundleId}:${e.options.previousValue.definitionModel.name}`:null===(t=e.options.previousValue.definitionModel.recordInheritanceSelector.inheritanceDescriptor)||void 0===t?void 0:t.inheritingFrom,o=e.options.currentValue.definitionModel.lastUpdateTime?`${e.options.currentValue.bundleId}:${e.options.currentValue.definitionModel.name}`:null===(i=e.options.currentValue.definitionModel.recordInheritanceSelector.inheritanceDescriptor)||void 0===i?void 0:i.inheritingFrom;o!==n&&this.recordDefinitionNameSubject.next(o),o||(this.value={specificAssociationNames:[],selectionType:l.AssociationSelectionType.FollowParent},this.associationToFollowSubject.next(this.value))}ngOnInit(){var e;const t=this.options.definitionModel.lastUpdateTime?`${this.options.bundleId}:${this.options.definitionModel.name}`:null===(e=this.options.definitionModel.recordInheritanceSelector.inheritanceDescriptor)||void 0===e?void 0:e.inheritingFrom;this.recordDefinitionNameSubject.next(t),this.associationToFollowSubject.next(this.value)}openAssociationSelector(){this.associationDefinitions$.pipe((0,v.take)(1)).subscribe(e=>{this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.associations-to-follow.label"),data:{associationDefinitions:e,selectedAssociationsToFollow:this.value,actualAssociationsToFollow:this.options.definitionModelFromDefinition.associationsToFollowForArchive,isOverlayMode:this.options.isOverlayMode,isReadOnly:this.options.isReadOnly},content:ei}).then(e=>{this.value=e,this.associationToFollowSubject.next(this.value)}).catch(h.noop)})}openMissingDefinitionsModal(){this.missingAssociations$.pipe((0,v.take)(1)).subscribe(e=>{e.length?this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.missing-archive-definitions.label"),data:{missingAssociations:e},size:"sm",content:ti}).catch(h.noop):this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.no-missing-archive-definitions.message"))})}}ii.\u0275fac=function(e){return new(e||ii)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](l.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](d.RxNotificationService))},ii.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ii,selectors:[["rx-archive-associations"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:ii,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:15,vars:12,consts:[[1,"d-inline-flex","align-items-center","mb-1"],["adapt-button","","type","button","btn-type","tertiary","rx-id","associations-to-follow-button",1,"d-icon-plus_circle","p-0",3,"click"],["name","question_circle_o","placement","right",1,"ml-2",3,"adaptPopover"],[1,"border","pl-2","p-1","form-group"],[1,"d-icon-left-arrow_schema","font-weight-bold"],[1,"d-inline-flex","align-items-center"],["name","exclamation_triangle",1,"text-warning-icon"],["btn-type","tertiary","rx-id","open-missing-definitions-button",1,"p-0","pl-1",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"button",1),o["\u0275\u0275listener"]("click",function(){return t.openAssociationSelector()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-icon",2),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275elementStart"](7,"span",4),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",5),o["\u0275\u0275element"](11,"adapt-icon",6),o["\u0275\u0275elementStart"](12,"adapt-button",7),o["\u0275\u0275listener"]("click",function(){return t.openMissingDefinitionsModal()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.associations-to-follow.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,6,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.associations-to-follow.tooltip")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,8,t.associationLabel$)," "),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,10,"com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.missing-archive-definitions.label")," "))},directives:[a.AdaptButtonComponent,a.AdaptIconComponent,a.AdaptPopoverDirective],pipes:[m.TranslatePipe,n.AsyncPipe],encapsulation:2,changeDetection:0});class ni extends b.ComponentStore{constructor(e){super({indexes:[],isDirty:!1}),this.rxGuidService=e,this.isDirty$=this.select(e=>e.isDirty),this.indexes$=this.select(e=>e.indexes),this.addIndex=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:[...e.indexes,t],isDirty:!0})),this.updateIndex=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.guid?Object.assign({},t):e),isDirty:!0})),this.removeIndex=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.filter(e=>e.guid!==t),isDirty:!0})),this.checkAvailableFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.indexGuid?Object.assign(Object.assign({},e),{checkedAvailableFields:[...t.checkedFields]}):e)})),this.toggleSelectedFieldChecked=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>{if(e.guid===t.indexGuid){const i=e.selectedFields.map(e=>e.id===t.indexField.id?Object.assign({},e):e);return Object.assign(Object.assign({},e),{selectedFields:i,isMoveToAvailableButtonEnabled:(0,h.some)(i,"selected")})}return e})})),this.assignCheckedFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.guid?Object.assign(Object.assign({},e),{selectedFields:[...e.selectedFields,...e.checkedAvailableFields].map((e,t)=>Object.assign(Object.assign({},e),{selected:!1,fieldOrder:t++})),availableFields:[...e.availableFields.filter(t=>!(0,h.some)(e.checkedAvailableFields,{id:t.id}))],checkedAvailableFields:[]}):e),isDirty:!0})),this.unassignCheckedFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.guid?Object.assign(Object.assign({},e),{selectedFields:e.selectedFields.filter(e=>!e.selected),availableFields:[...e.availableFields,...e.selectedFields.filter(e=>e.selected)].map(e=>Object.assign(Object.assign({},e),{fieldOrder:null})).sort((e,t)=>e.name.localeCompare(t.name)),isMoveToAvailableButtonEnabled:!1}):e),isDirty:!0})),this.sortSelectedFields=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.indexGuid?Object.assign(Object.assign({},e),{selectedFields:[...t.fields.map((e,t)=>Object.assign(Object.assign({},e),{fieldOrder:t}))]}):e)})),this.removeField=this.updater((e,t)=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>e.guid===t.indexGuid?Object.assign(Object.assign({},e),{selectedFields:e.selectedFields.filter(e=>e.id!==t.field.id),availableFields:[...e.availableFields,t.field].sort((e,t)=>e.name.localeCompare(t.name))}):e),isDirty:!0})),this.expandAll=this.updater(e=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>Object.assign(Object.assign({},e),{isOpen:!0}))})),this.collapseAll=this.updater(e=>Object.assign(Object.assign({},e),{indexes:e.indexes.map(e=>Object.assign(Object.assign({},e),{isOpen:!1}))})),this.markDirty=this.updater(e=>Object.assign(Object.assign({},e),{isDirty:!0})),this.vm$=this.select(this.indexes$,this.isDirty$,(e,t)=>({indexes:e,isDirty:t}))}initialize(e){this.patchState({isDirty:!1,indexes:e.indexes.map((t,i)=>Object.assign(Object.assign({},t),{availableFields:(0,h.reject)(e.fields,e=>e.isNewField||t.indexFieldIds.includes(e.id)).map(e=>({id:e.id,name:e.name,fieldOrder:null})).sort((e,t)=>e.name.localeCompare(t.name)),checkedAvailableFields:[],selectedFields:e.fields.filter(e=>!e.isNewField&&t.indexFieldIds.includes(e.id)).sort((e,i)=>t.indexFieldIds.indexOf(e.id)-t.indexFieldIds.indexOf(i.id)).map((e,t)=>({id:e.id,name:e.name,fieldOrder:t})),guid:this.rxGuidService.generate(),isOpen:(null==e?void 0:e.indexToEditIndex)===i,isMoveToAvailableButtonEnabled:!1}))})}}ni.\u0275fac=function(e){return new(e||ni)(o["\u0275\u0275inject"](y.RxGuidService))},ni.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ni,factory:ni.\u0275fac});class oi extends p.RxModalClass{constructor(e,t,i,n){super(i,n),this.recordIndexesEditorStore=e,this.rxGuidService=t,this.activeModalRef=i,this.injector=n,this.isReadOnly=this.activeModalRef.getData().isReadOnly,this.indexesEditorOptions=this.activeModalRef.getData(),this.vm$=this.recordIndexesEditorStore.vm$}ngOnInit(){super.ngOnInit(),this.recordIndexesEditorStore.isDirty$.pipe((0,v.filter)(Boolean),(0,v.take)(1)).subscribe(()=>{this.markAsDirty()}),this.recordIndexesEditorStore.initialize(this.indexesEditorOptions)}ngAfterViewInit(){var e;null===(e=this.accordionTabEls.get(this.indexesEditorOptions.indexToEditIndex))||void 0===e||e.nativeElement.scrollIntoView({block:"nearest"})}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}addIndex(){this.recordIndexesEditorStore.addIndex({guid:this.rxGuidService.generate(),indexName:null,unique:!1,ignoreBlankValues:!1,indexFieldIds:[],availableFields:this.indexesEditorOptions.fields.filter(e=>!e.isNewField).map(e=>Object.assign(Object.assign({},e),{fieldOrder:null})).sort((e,t)=>e.name.localeCompare(t.name)),checkedAvailableFields:[],selectedFields:[],isOpen:!0,isAutomaticIndex:!1,isMoveToAvailableButtonEnabled:!1})}updateIndexUniqueValue(e,t){this.recordIndexesEditorStore.updateIndex(Object.assign(Object.assign({},e),{unique:t}))}updateIndexIgnoreBlankValue(e,t){this.recordIndexesEditorStore.updateIndex(Object.assign(Object.assign({},e),{ignoreBlankValues:t}))}removeIndex(e){this.recordIndexesEditorStore.removeIndex(e)}moveToSelected(e){this.recordIndexesEditorStore.assignCheckedFields(e)}moveToAvailable(e){this.recordIndexesEditorStore.unassignCheckedFields(e)}onAvailableFieldsChange(e,t){this.recordIndexesEditorStore.checkAvailableFields({indexGuid:t.guid,checkedFields:e})}onSelectedFieldsChange(e,t){e.forEach(e=>{this.recordIndexesEditorStore.toggleSelectedFieldChecked({indexGuid:t.guid,indexField:e})}),this.recordIndexesEditorStore.sortSelectedFields({indexGuid:t.guid,fields:e})}onDragEnd(){this.recordIndexesEditorStore.markDirty()}onFieldRemove(e,t){this.recordIndexesEditorStore.removeField({indexGuid:t.guid,field:e})}save(){this.recordIndexesEditorStore.indexes$.pipe((0,v.take)(1)).subscribe(e=>{this.activeModalRef.close(e.map(e=>({isAutomaticIndex:e.isAutomaticIndex,indexName:e.indexName,unique:e.unique,ignoreBlankValues:e.ignoreBlankValues,indexFieldIds:(0,h.map)(e.selectedFields,"id")})))})}expandAll(){this.recordIndexesEditorStore.expandAll()}collapseAll(){this.recordIndexesEditorStore.collapseAll()}trackByIndex(e){return e}optionFormatter(e){return e.name}}oi.\u0275fac=function(e){return new(e||oi)(o["\u0275\u0275directiveInject"](ni),o["\u0275\u0275directiveInject"](y.RxGuidService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},oi.\u0275cmp=o["\u0275\u0275defineComponent"]({type:oi,selectors:[["rx-record-indexes-editor"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](a.AdaptAccordionTabComponent,5,o.ElementRef),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[o["\u0275\u0275ProvidersFeature"]([ni]),o["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"designer-modal-body","modal-body","d-flex","mh-100","flex-column"],[1,"flex-shrink-0",3,"config"],[1,"text-right","btn-group"],["type","button","adapt-button","","btn-type","tertiary","rx-id","add-index-button","class","d-icon-left-plus_circle float-left px-0",3,"click",4,"ngIf"],["type","button","adapt-button","","btn-type","tertiary","rx-id","expand-button",1,"ml-auto",3,"click"],["type","button","adapt-button","","btn-type","tertiary","rx-id","collapse-button",1,"pr-0",3,"click"],[1,"designer-modal-accordion-wrapper"],["class","d-block",3,"multiselect",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],["type","button","adapt-button","","btn-type","tertiary","rx-id","add-index-button",1,"d-icon-left-plus_circle","float-left","px-0",3,"click"],[1,"d-block",3,"multiselect"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],[1,"right-header-block"],["class","d-icon-left-cross_adapt py-0 pr-3 btn btn-sm","adapt-button","","size","small","type","button","rx-id","remove-index-button",3,"click",4,"ngIf"],[3,"ngModel","disabled","label","ngModelChange"],[3,"ngModel","disabled","label","tooltip","ngModelChange"],[1,"d-flex","flex-fill"],["popupMaxHeight","100%","rx-id","available-field-list",1,"flex-grow-1","d-flex","flex-column",3,"options","ngModel","disabled","deselectAllButton","selectAllButton","enableFilter","inline","label","multiple","singleSelectStyle","optionFormatter","ngModelChange"],[1,"mx-2","d-flex","flex-column"],["type","button","adapt-button","","btn-type","secondary","rx-id","move-to-selected-button",1,"d-icon-right-angle_right","mt-auto","mb-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","move-to-available-button",1,"d-icon-right-angle_left","mb-auto",3,"disabled","click"],["selectionMode","multiple","rx-id","selected-field-list",1,"flex-grow-1",3,"ngModel","disabled","hideSearchField","hideEdit","tooltip","label","ngModelChange","listItemRemove","dragend"],["adapt-button","","size","small","type","button","rx-id","remove-index-button",1,"d-icon-left-cross_adapt","py-0","pr-3","btn","btn-sm",3,"click"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"],["type","button","adapt-button","","btn-type","secondary","rx-id","close-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,he,17,16,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,a.AdaptAlertComponent,a.AdaptButtonComponent,n.NgForOf,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptRxCheckboxComponent,r.NgControlStatus,r.NgModel,a.AdaptRxSelectComponent,a.AdaptRxListBuilderComponent],pipes:[n.AsyncPipe,m.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]  adapt-rx-select{width:30%}[_nghost-%COMP%]  adapt-rx-select .rx-select__options-wrapper{height:350px;flex:1 1 auto;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]  adapt-rx-list-builder{width:30%}[_nghost-%COMP%]  adapt-rx-list-builder .adapt-list-builder{height:100%}[_nghost-%COMP%]  adapt-rx-list-builder .adapt-list-container{height:350px;flex-grow:1;overflow:auto}[_nghost-%COMP%]  adapt-rx-list-builder .adapt-list-builder, [_nghost-%COMP%]  adapt-rx-list-builder .adapt-list-builder__wrp{display:flex;flex-direction:column;height:100%}'],changeDetection:0});class ri extends c.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.translateService=t}openIndexesEditor(e=null){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.indexes.edit-indexes.label"),data:{indexes:this.value,indexToEditIndex:e,isReadOnly:this.options.isReadOnly,fields:this.options.definitionModel.fields},content:oi,size:S.OpenViewActionModalSize.Large}).then(e=>{this.value=e}).catch(h.noop)}removeIndex(e){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.indexes.delete-index-confirmation.message")}).then(t=>{t&&(this.value=this.value.filter((t,i)=>i!==e))})}focus(e){(null==e?void 0:e.indexToEditIndex)?this.openIndexesEditor(e.indexToEditIndex):this.openIndexesEditor()}}ri.\u0275fac=function(e){return new(e||ri)(o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](m.TranslateService))},ri.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ri,selectors:[["rx-record-indexes"]],inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:ri,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:4,consts:[["btn-type","tertiary","rx-id","open-indexes-editor",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],["class","record-index rounded mb-1 border font-weight-bold",4,"ngFor","ngForOf"],[1,"record-index","rounded","mb-1","border","font-weight-bold"],[1,"d-flex","mb-1"],["rx-id","record-index-name",3,"title"],[4,"ngIf"],["class","ml-auto rx-button-unstyled d-icon-left-pencil btn-link","type","button","rx-id","open-index-editor",3,"click",4,"ngIf"],["type","button","class","rx-button-unstyled d-icon-cross btn-link","rx-id","remove-index",3,"click",4,"ngIf"],[1,"caption","ellipsis"],["name","question_circle_o",1,"ml-2",3,"adaptPopover"],["type","button","rx-id","open-index-editor",1,"ml-auto","rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-index",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"adapt-button",0),o["\u0275\u0275listener"]("click",function(){return t.openIndexesEditor()}),o["\u0275\u0275element"](1,"span",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Ce,12,16,"div",2)),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.record-designer.indexes.edit-indexes.label"),"\n"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.value))},directives:[a.AdaptButtonComponent,n.NgForOf,n.NgIf,a.AdaptIconComponent,a.AdaptPopoverDirective],pipes:[m.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.record-index[_ngcontent-%COMP%]{padding:5px 10px;word-break:break-all}.record-index[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{color:#959899;font-size:10px}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class ai{constructor(e,t,i){this.rxFieldDefinitionService=e,this.rxOverlayService=t,this.translateService=i}getDefinitionInspectorConfig(e,t,i,n,o,r,a,s,p,u){var m,f;let g=[];const v=!e&&t.overlayOperation!==d.RX_OVERLAY.operationTypes.createdInThisOverlayGroup,y=Boolean(t.isAuditRecordDefinition),b=t.archiveType===Lt.archiving.types.deleteSourceRecord.id,x=t.archiveType===Lt.archiving.types.doNotArchive.id,C=Object.values(Lt.archiving.types).map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.nameKey)})),S=Object.values(l.RX_RECORD_DEFINITION.joinTypes).map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.displayName),id:e.value})),D=[{name:"weightedRelevancyTitle",component:c.SelectFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.title-field.label"),options:t.fields.filter(e=>(0,h.isNumber)(e.id)&&((0,h.get)(e,"searchDefinition.enableFTSSearch")||(0,h.get)(e,"searchDefinition.enableCognitiveSearch"))&&!(0,h.includes)([t.weightedRelevancyEnvironment,t.weightedRelevancyKeywords],e.id)).map(e=>({name:e.name,id:e.id})),tooltip:new d.Tooltip(this.translateService.instant(t.enableCognitiveSearch?"com.bmc.arsys.rx.client.record-designer.definition-properties.title-field-cognitive-search.tooltip":"com.bmc.arsys.rx.client.record-designer.definition-properties.title-field-fts.tooltip"))}},{name:"weightedRelevancyEnvironment",component:c.SelectFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.environment-field.label"),options:t.fields.filter(e=>(0,h.isNumber)(e.id)&&((0,h.get)(e,"searchDefinition.enableFTSSearch")||(0,h.get)(e,"searchDefinition.enableCognitiveSearch"))&&!(0,h.includes)([t.weightedRelevancyTitle,t.weightedRelevancyKeywords],e.id)).map(e=>({name:e.name,id:e.id})),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.environment-field.tooltip"))}},{name:"weightedRelevancyKeywords",component:c.SelectFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.keywords-field.label"),options:t.fields.filter(e=>(0,h.isNumber)(e.id)&&((0,h.get)(e,"searchDefinition.enableFTSSearch")||(0,h.get)(e,"searchDefinition.enableCognitiveSearch"))&&!(0,h.includes)([t.weightedRelevancyTitle,t.weightedRelevancyEnvironment],e.id)).map(e=>({name:e.name,id:e.id})),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.keywords-field.tooltip"))}}];return t.resourceType===l.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType&&(g=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"name",component:c.TextFormControlComponent,isDisabled:!e,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"description",component:c.TextareaFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{component:c.RxRevertCustomizationComponent,options:{overlayGroupId:t.overlayGroupId,overlayDescriptor:t.overlayDescriptor}},{name:"customizationOptions",component:We,isDisabled:!o||p,options:{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.record-definition.label").toLowerCase(),recordDefinition:t}},{name:"allowNonAdminToDeleteRecordInstances",component:c.SwitchFormControlComponent,isDisabled:y||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.allow-non-admin-users-to-delete-records.label")}},{name:"owner",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.owner.label")}},{name:"lastUpdateTime",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-date.label")}},{name:"lastChangedBy",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-by.label")}},{name:"permissions",component:c.RxPermissionEditorComponent,isDisabled:!a||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),type:d.RX_PERMISSION.editorContexts.record}},{name:"shouldExportData",component:c.SwitchFormControlComponent,isDisabled:!o||y||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.should-export-data.label"),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.should-export-data.tooltip"))}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.title"),controls:[{name:"recordInheritanceSelector",component:ut,options:{recordDefinition:t,isReadOnly:v||!o||y}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),controls:[{name:"enableCognitiveSearch",component:c.SwitchFormControlComponent,isDisabled:p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.enable-cognitive-search.label")}},{name:"recordSearchFields",component:gt,options:{recordDefinitionModel:t,isReadOnly:!o||y||p}},...D]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.indexes.title"),controls:[{name:"indexDefinitions",component:ri,options:{isReadOnly:!r||p,definitionModel:t}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.display-value.title"),controls:[{name:"displayFieldIdInAssociation",component:c.SelectFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.associated-display-field.title"),options:t.fields.filter(e=>this.rxFieldDefinitionService.canBeAssociatedDisplayField(e)).map(e=>({id:e.id,name:e.name})).sort((e,t)=>e.name.localeCompare(t.name)),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.associated-display-field.tooltip"))}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.auditing.title"),controls:[{name:"isAuditingEnabled",component:c.SwitchFormControlComponent,isDisabled:p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.enabled.label")}},{name:"auditRecordDefinitionName",component:c.TextFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audit-record-definition-name.label")}},{name:"auditSourceRecordDefinitionName",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audited-from.label")}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.title"),controls:[{name:"isArchivingEnabled",component:c.SwitchFormControlComponent,isDisabled:!o||v||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.enabled.label")}},{name:"archiveType",component:c.SelectFormControlComponent,isDisabled:!o||v||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audit-record-operation.label"),options:C}},{name:"includeAttachments",component:c.BooleanFormControlComponent,isDisabled:!o||x||v||b||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.include-attachments.label"),shouldDisplayAsCheckbox:!0}},{name:"archiveRecordDefinitionName",component:c.TextFormControlComponent,isDisabled:!o||x||v||b||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archive-record-definition-name.label")}},{name:"ageQualifierInDays",component:c.CounterFormControlComponent,isDisabled:!o||x||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.record-age.label"),tooltip:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.record-age.tooltip"),allowIntegerOnly:!0}},{name:"ageQualifierFieldId",component:c.SelectFormControlComponent,isDisabled:!o||x||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.record-age-field.label"),options:t.fields.filter(e=>e.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.dateTime).map(e=>({name:e.name,id:e.id})).sort((e,t)=>e.name.localeCompare(t.name))}},{name:"archiveDescription",component:c.TextFormControlComponent,isDisabled:!o||x||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")}},{name:"archiveDataCriteria",component:c.ExpressionFormControlComponent,isDisabled:!o||x||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.record-filter.label"),dataDictionary$:u.getDataDictionary(Lt.archiveDataCriteriaPath),operators:u.getOperators(Lt.archiveDataCriteriaPath),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.record-filter.tooltip"))}},{name:"associationsToFollowForArchive",component:ii,options:{definitionModel:t,definitionModelFromDefinition:i,bundleId:n,isOverlayMode:v,isReadOnly:!o||x}}]}]),t.resourceType===l.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType&&(g=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),controls:[{name:"name",component:c.TextFormControlComponent,isDisabled:!e,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),required:!0}},{name:"description",component:c.TextareaFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label"),rows:3}},{name:"primaryRecordDefinitionName",component:c.RxDefinitionPickerComponent,isDisabled:!0,options:{definitionType:c.RxDefinitionPickerType.Record,label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.primary-record.label")}},{name:"secondaryRecordDefinitionName",component:c.RxDefinitionPickerComponent,isDisabled:!0,options:{definitionType:c.RxDefinitionPickerType.Record,label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.secondary-record.label")}},{name:"joinType",component:c.SelectFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.join-type.label"),options:S}},{name:"joinCriteria",component:c.ExpressionFormControlComponent,isDisabled:p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.join-criteria.label"),dataDictionary$:u.getDataDictionary(Lt.joinCriteriaPath),operators:u.getOperators(Lt.joinCriteriaPath)}},{component:c.RxRevertCustomizationComponent,options:{overlayGroupId:t.overlayGroupId,overlayDescriptor:t.overlayDescriptor}},{name:"customizationOptions",component:We,isDisabled:!o||p,options:{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.record-definition.label").toLowerCase(),recordDefinition:t}},{name:"owner",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.owner.label")}},{name:"lastUpdateTime",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-date.label")}},{name:"lastChangedBy",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.modified-by.label")}},{name:"permissions",component:c.RxPermissionEditorComponent,isDisabled:!a||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.permissions.label"),type:d.RX_PERMISSION.editorContexts.record}},{name:"shouldExportData",component:c.SwitchFormControlComponent,isDisabled:!o||y||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.should-export-data.label"),tooltip:new d.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.should-export-data.tooltip"))}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),controls:[{name:"enableCognitiveSearch",component:c.SwitchFormControlComponent,isDisabled:p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.enable-cognitive-search.label")}},{name:"recordSearchFields",component:gt,options:{recordDefinitionModel:t,isReadOnly:!o||y||p}},...D]},{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.auditing.title"),controls:[{name:"isAuditingEnabled",component:c.SwitchFormControlComponent,isDisabled:p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.enabled.label")}},{name:"auditRecordDefinitionName",component:c.TextFormControlComponent,isDisabled:!o||p,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audit-record-definition-name.label")}},{name:"auditSourceRecordDefinitionName",component:c.TextFormControlComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.audited-from.label")}}]}]),v&&(null===(m=g[0])||void 0===m||m.controls.splice((0,h.findIndex)(g[0].controls,{name:"shouldExportData"}),1)),e&&(null===(f=g[0])||void 0===f||f.controls.splice((0,h.findIndex)(g[0].controls,{name:"owner"}),3)),g}}ai.\u0275fac=function(e){return new(e||ai)(o["\u0275\u0275inject"](l.RxFieldDefinitionService),o["\u0275\u0275inject"](d.RxOverlayService),o["\u0275\u0275inject"](m.TranslateService))},ai.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ai,factory:ai.\u0275fac,providedIn:"root"});class si extends p.RxModalClass{constructor(e,t){super(t,e),this.injector=e,this.activeModalRef=t,this.overriddenRecordProperties=this.activeModalRef.getData().overriddenRecordProperties}close(e){this.activeModalRef.close(e)}}si.\u0275fac=function(e){return new(e||si)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](a.ActiveModalRef))},si.\u0275cmp=o["\u0275\u0275defineComponent"]({type:si,selectors:[["rx-localized-character-default-value-selector"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:10,consts:[[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","yes-button",3,"click"],["adapt-button","","type","button","btn-type","secondary","rx-id","no-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,we,3,2,"ng-container",1),o["\u0275\u0275elementStart"](2,"p"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275elementStart"](6,"button",3),o["\u0275\u0275listener"]("click",function(){return t.close("continue")}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"button",4),o["\u0275\u0275listener"]("click",function(){return t.close("cancel")}),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.overriddenRecordProperties),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,4,"com.bmc.arsys.rx.client.common.continue-confirmation.message")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,6,"com.bmc.arsys.rx.client.common.yes.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,8,"com.bmc.arsys.rx.client.common.no.label")," "))},directives:[n.NgIf,a.AdaptButtonComponent],pipes:[m.TranslatePipe],encapsulation:2});class li{constructor(e,t,i,n,o,r,a){this.rxDefinitionNameService=e,this.rxFieldDefinitionService=t,this.rxGuidService=i,this.rxOverlayService=n,this.rxRecordDefinitionService=o,this.rxLocalizationService=r,this.rxDateUtilService=a}getJoinCriteriaExpression(e,t,i){const n=new RegExp("\\$(?!NULL)([\\w .]+)\\$","g"),o=new RegExp("'([^']+)'","g");return(e||"").replace(n,"${"+this.rxDefinitionNameService.getDisplayName(t)+"."+l.RX_RECORD_DEFINITION.sourceRecordTypes.primary+".$1}").replace(o,"${"+this.rxDefinitionNameService.getDisplayName(i)+"."+l.RX_RECORD_DEFINITION.sourceRecordTypes.secondary+".$1}")}getJoinCriteriaArExpression(e,t,i){const n=new RegExp("\\${"+this.rxDefinitionNameService.getDisplayName(t)+"\\."+l.RX_RECORD_DEFINITION.sourceRecordTypes.primary+"\\.([^}]+)}","g"),o=new RegExp("\\${"+this.rxDefinitionNameService.getDisplayName(i)+"\\."+l.RX_RECORD_DEFINITION.sourceRecordTypes.secondary+"\\.([^}]+)}","g");return(e||"").replace(n,"#$1#").replace(/#/g,"$").replace(o,"'$1'")}getDefinitionFromDefinitionModel(e,t){var i,n,o;return{allowFieldsOverlay:e.customizationOptions.allowFieldsOverlay,allowNonAdminToDeleteRecordInstances:e.allowNonAdminToDeleteRecordInstances,allowIndexesOverlay:e.customizationOptions.allowIndexesOverlay,allowOtherPropertiesOverlay:e.customizationOptions.allowOtherPropertiesOverlay,allowPermissionsOverlay:e.customizationOptions.allowPermissionsOverlay,enableCognitiveSearch:e.enableCognitiveSearch,description:e.description,guid:e.guid,indexDefinitions:e.resourceType===l.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType?e.indexDefinitions.map(e=>(0,h.omit)(e,"isAutomaticIndex")):void 0,inheritanceDescriptor:e.recordInheritanceSelector.inheritanceDescriptor,isAbstract:null===(i=e.recordInheritanceSelector.inheritanceOptions)||void 0===i?void 0:i.isAbstract,isFinal:null===(n=e.recordInheritanceSelector.inheritanceOptions)||void 0===n?void 0:n.isFinal,isSharedInstanceStorage:null===(o=e.recordInheritanceSelector.inheritanceOptions)||void 0===o?void 0:o.isSharedInstanceStorage,joinCriteria:e.joinCriteria?this.getJoinCriteriaArExpression(e.joinCriteria,e.primaryRecordDefinitionName,e.secondaryRecordDefinitionName):void 0,joinType:e.joinType,lastChangedBy:e.lastChangedBy,lastUpdateTime:e.lastUpdateTime?(0,D.default)(e.lastUpdateTime).format():null,name:`${t}:${e.name}`,overlayGroupId:e.overlayGroupId,owner:e.owner,overlayDescriptor:e.overlayDescriptor,permissions:e.permissions,primaryRecordDefinitionName:e.primaryRecordDefinitionName,resourceType:e.resourceType,secondaryRecordDefinitionName:e.secondaryRecordDefinitionName,shouldExportData:e.shouldExportData,scope:e.customizationOptions.scope,tags:e.tags,version:e.version,weightedRelevancyFields:{TITLE:e.weightedRelevancyTitle,ENVIRONMENT:e.weightedRelevancyEnvironment,KEYWORDS:e.weightedRelevancyKeywords},displayFieldIdInAssociation:(0,h.find)(e.fields,{id:e.displayFieldIdInAssociation})?e.displayFieldIdInAssociation:null,archiveDescriptor:{ageQualifierFieldId:e.ageQualifierFieldId,ageQualifierInDays:e.ageQualifierInDays,archiveRecordDefinitionName:e.archiveRecordDefinitionName,description:e.archiveDescription,archiveType:e.archiveType,includeAttachments:e.includeAttachments,archiveDataCriteria:e.archiveDataCriteria,isEnabled:e.isArchivingEnabled},associationsToFollowForArchive:e.associationsToFollowForArchive,auditDescriptor:{isEnabled:e.isAuditingEnabled,auditRecordDefinitionName:e.auditRecordDefinitionName,auditDataCriteria:e.auditDataCriteria,associatedAuditFieldsByAssociationName:e.associatedAuditFieldsByAssociationName},auditSourceRecordDefinitionName:e.auditSourceRecordDefinitionName,fieldDefinitions:e.fields.map(e=>{var t,i;const n={resourceType:e.resourceType,lastUpdateTime:e.lastUpdateTime,lastChangedBy:e.lastChangedBy,owner:e.owner,name:e.name,tags:e.tags,description:e.description,overlayGroupId:e.overlayGroupId,id:(0,h.isNumber)(e.id)?e.id:"",fieldOption:e.fieldOption,permissions:e.permissions,fieldTypeName:e.fieldTypeName,isInherited:e.isInherited,explicitPermissions:e.explicitPermissions,overlayDescriptor:e.overlayDescriptor,fieldMapping:e.fieldMapping,allowPermissionsOverlay:e.allowPermissionsOverlay,allowOtherPropertiesOverlay:e.allowOtherPropertiesOverlay,auditOption:e.audit?"AUDIT_AND_COPY":e.copy?"COPY":null,allowPermissionsEdit:e.allowPermissionsEdit,maxLength:e.maxLength,searchDefinition:e.searchDefinition,namedListDefinition:e.namedListDefinition,shouldPersistEncrypted:e.shouldPersistEncrypted,shouldPersistHashed:e.shouldPersistHashed,pattern:e.pattern,anyUserAllowedToSubmit:e.anyUserAllowedToSubmit};return e.resourceType===l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType?n.defaultValueByLocale=e.defaultValueByLocale:e.resourceType===l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?(n.defaultValue=e.selectionFieldOptionProperties.defaultValue,n.optionNamesById=null===(t=e.selectionFieldOptionProperties)||void 0===t?void 0:t.optionNamesById,n.optionLabelsById=null===(i=e.selectionFieldOptionProperties)||void 0===i?void 0:i.optionLabelsById):e.resourceType!==l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType&&(n.defaultValue=e.defaultValue),n})}}getDefinitionModelFromDefinition(e){var t,i,n,o,r,a,s,d,c,p,u,m,f,g,v,y,b,x;return{allowNonAdminToDeleteRecordInstances:e.allowNonAdminToDeleteRecordInstances,isArchivingEnabled:null===(t=e.archiveDescriptor)||void 0===t?void 0:t.isEnabled,ageQualifierFieldId:null===(i=e.archiveDescriptor)||void 0===i?void 0:i.ageQualifierFieldId,ageQualifierInDays:null===(n=e.archiveDescriptor)||void 0===n?void 0:n.ageQualifierInDays,archiveRecordDefinitionName:null===(o=e.archiveDescriptor)||void 0===o?void 0:o.archiveRecordDefinitionName,archiveDescription:null===(r=e.archiveDescriptor)||void 0===r?void 0:r.description,archiveType:null===(a=e.archiveDescriptor)||void 0===a?void 0:a.archiveType,includeAttachments:null===(s=e.archiveDescriptor)||void 0===s?void 0:s.includeAttachments,archiveDataCriteria:null===(d=e.archiveDescriptor)||void 0===d?void 0:d.archiveDataCriteria,associationsToFollowForArchive:{specificAssociationNames:(null===(c=e.associationsToFollowForArchive)||void 0===c?void 0:c.specificAssociationNames)||[],selectionType:(null===(p=e.associationsToFollowForArchive)||void 0===p?void 0:p.selectionType)||l.AssociationSelectionType.FollowParent},isAuditingEnabled:null===(u=e.auditDescriptor)||void 0===u?void 0:u.isEnabled,auditRecordDefinitionName:null===(m=e.auditDescriptor)||void 0===m?void 0:m.auditRecordDefinitionName,auditDataCriteria:null===(f=e.auditDescriptor)||void 0===f?void 0:f.auditDataCriteria,associatedAuditFieldsByAssociationName:null===(g=e.auditDescriptor)||void 0===g?void 0:g.associatedAuditFieldsByAssociationName,auditSourceRecordDefinitionName:e.auditSourceRecordDefinitionName,customizationOptions:{allowFieldsOverlay:e.allowFieldsOverlay,allowIndexesOverlay:e.allowIndexesOverlay,allowOtherPropertiesOverlay:e.allowOtherPropertiesOverlay,allowPermissionsOverlay:e.allowPermissionsOverlay,allowOverlay:!1,fields:e.fieldDefinitions,scope:e.scope},description:e.description,displayFieldIdInAssociation:e.displayFieldIdInAssociation,enableCognitiveSearch:e.enableCognitiveSearch,fullPermissions:e.fullPermissions,guid:e.guid||this.rxGuidService.generate(),indexDefinitions:null===(v=e.indexDefinitions)||void 0===v?void 0:v.map(e=>Object.assign(Object.assign({},e),{isAutomaticIndex:this.rxRecordDefinitionService.isAutomaticIndex(e)})),isAuditRecordDefinition:e.isAuditRecordDefinition,joinCriteria:this.getJoinCriteriaExpression(e.joinCriteria,e.primaryRecordDefinitionName,e.secondaryRecordDefinitionName),joinType:e.joinType,lastUpdateTime:e.lastUpdateTime?this.rxDateUtilService.formatDate(e.lastUpdateTime,"medium"):e.lastUpdateTime,lastChangedBy:e.lastChangedBy,localizableStringsByFieldId:e.localizableStringsByFieldId,name:this.rxDefinitionNameService.getDisplayName(e.name),overlayDescriptor:e.overlayDescriptor,overlayGroupId:e.overlayGroupId,overlayOperation:this.rxOverlayService.getOverlayOperation(e.overlayGroupId,e.overlayDescriptor?e.overlayDescriptor.parentOverlayGroupId:null),owner:e.owner,permissions:e.permissions,primaryRecordDefinitionName:e.primaryRecordDefinitionName,secondaryRecordDefinitionName:e.secondaryRecordDefinitionName,recordInheritanceSelector:{inheritanceDescriptor:e.inheritanceDescriptor,inheritanceOptions:{isAbstract:e.isAbstract,isSharedInstanceStorage:e.isSharedInstanceStorage,isFinal:e.isFinal},isInheritingCoreFields:null,inheritedFieldDefinitions:[]},recordSearchFields:e.fieldDefinitions.filter(e=>e.searchDefinition),recordInstancePrefix:e.recordInstancePrefix,recordTypeName:e.recordTypeName,resourceType:e.resourceType,rowSecurityPropagations:e.rowSecurityPropagations,securityLabels:e.securityLabels,shouldExportData:e.shouldExportData,tags:e.tags,upgradeVersion:e.upgradeVersion,version:e.version,weightedRelevancyTitle:null===(y=e.weightedRelevancyFields)||void 0===y?void 0:y.TITLE,weightedRelevancyEnvironment:null===(b=e.weightedRelevancyFields)||void 0===b?void 0:b.ENVIRONMENT,weightedRelevancyKeywords:null===(x=e.weightedRelevancyFields)||void 0===x?void 0:x.KEYWORDS,fields:e.fieldDefinitions.map(e=>({allowOtherPropertiesOverlay:e.allowOtherPropertiesOverlay,allowPermissionsEdit:e.allowPermissionsEdit,allowPermissionsOverlay:e.allowPermissionsOverlay,anyUserAllowedToSubmit:e.anyUserAllowedToSubmit,audit:"AUDIT_AND_COPY"===e.auditOption,copy:"AUDIT_AND_COPY"===e.auditOption||"COPY"===e.auditOption,defaultValue:e.defaultValue,defaultValueByLocale:e.defaultValueByLocale,description:e.description,explicitPermissions:e.explicitPermissions,fieldMapping:e.fieldMapping,fieldOption:e.fieldOption,fieldTypeName:e.fieldTypeName,guid:this.rxGuidService.generate(),id:(0,h.isNumber)(e.id)?e.id:e.customId||"",isCoreField:this.rxFieldDefinitionService.isCoreField(e),isInherited:e.isInherited,isNewField:!1,lastChangedBy:e.lastChangedBy,lastUpdateTime:e.lastUpdateTime,maxLength:e.maxLength,maxSize:e.maxSize,maxValue:e.maxValue,minValue:e.minValue,name:e.name,overlayDescriptor:e.overlayDescriptor,overlayGroupId:e.overlayGroupId,owner:e.owner,permissions:e.permissions,precision:e.precision,resourceType:e.resourceType,searchDefinition:e.searchDefinition,selectionFieldOptionProperties:{defaultValue:e.defaultValue,optionNamesById:e.optionNamesById,optionLabelsById:e.optionLabelsById},shouldPersistEncrypted:e.shouldPersistEncrypted,shouldPersistHashed:e.shouldPersistHashed,namedListDefinition:e.namedListDefinition,pattern:e.pattern,tags:e.tags}))}}}li.\u0275fac=function(e){return new(e||li)(o["\u0275\u0275inject"](d.RxDefinitionNameService),o["\u0275\u0275inject"](l.RxFieldDefinitionService),o["\u0275\u0275inject"](y.RxGuidService),o["\u0275\u0275inject"](d.RxOverlayService),o["\u0275\u0275inject"](l.RxRecordDefinitionService),o["\u0275\u0275inject"](d.RxLocalizationService),o["\u0275\u0275inject"](y.RxDateUtilsService))},li.\u0275prov=o["\u0275\u0275defineInjectable"]({token:li,factory:li.\u0275fac});class di extends d.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.rxRecordDefinitionCacheService=this.injector.get(l.RxRecordDefinitionCacheService),this.translateService=this.injector.get(m.TranslateService),this.commonDataDictionary$=(0,g.of)([]),this.generalGroup={label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),hidden:!0,children:[{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$"}]}}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:d.ExpressionOperatorRowsByGroup.get(d.ExpressionOperatorGroup.AllClient)})}recordExpressionDataDictionary(e,t){const i={label:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition.label"),expanded:!0};return(0,g.iif)(()=>!!e.lastUpdateTime,this.rxRecordDefinitionCacheService.getRecordDefinition(`${t}:${e.name}`).pipe((0,v.map)(e=>({fields:e.fieldDefinitions}))),(0,g.of)(e)).pipe((0,v.map)(e=>(i.children=e.fields.filter(e=>e.resourceType!==l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType).map(e=>({label:e.name,icon:"d-icon-arrow_right_square_input",expression:`'${e.name}'`})),[i,this.generalGroup])))}}class ci extends p.RxModalClass{constructor(e,t,i,n,o,a,s){super(n,s),this.translateService=e,this.rxGuidService=t,this.rxRecordDefinitionService=i,this.activeModalRef=n,this.rxDefinitionNameService=o,this.rxFieldDefinitionService=a,this.injector=s,this.notificationMessage=this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.notification.message"),this.destroyed$=new g.ReplaySubject(1),this.primaryRecordDefinitionName=this.activeModalRef.getData().primaryRecordDefinitionName,this.secondaryRecordDefinitionName=this.activeModalRef.getData().secondaryRecordDefinitionName,this.selectLabel=this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.select.label",{primaryRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(this.primaryRecordDefinitionName),secondaryRecordDefinitionName:this.rxDefinitionNameService.getDisplayName(this.secondaryRecordDefinitionName)}),this.addedPrimaryFields=this.activeModalRef.getData().addedFields.filter(e=>!(0,h.includes)(l.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFieldIds,e.id)&&(0,h.get)(e,"fieldMapping.source")===l.RX_RECORD_DEFINITION.sourceRecordTypes.primary),this.addedSecondaryFields=this.activeModalRef.getData().addedFields.filter(e=>!(0,h.includes)(l.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFieldIds,e.id)&&(0,h.get)(e,"fieldMapping.source")===l.RX_RECORD_DEFINITION.sourceRecordTypes.secondary),this.primarySelectedFieldsFormControl=new r.FormControl([]),this.secondarySelectedFieldsFormControl=new r.FormControl([]),this.primarySelectedFields$=this.primarySelectedFieldsFormControl.valueChanges.pipe((0,v.startWith)([]),(0,v.shareReplay)(1)),this.secondarySelectedFields$=this.secondarySelectedFieldsFormControl.valueChanges.pipe((0,v.startWith)([])),this.primaryAvailableFields$=this.rxRecordDefinitionService.get(this.primaryRecordDefinitionName,{},!0).pipe((0,v.map)(e=>(0,h.orderBy)(this.getJoinFieldDefinitions(e,l.RX_RECORD_DEFINITION.sourceRecordTypes.primary).filter(e=>!(0,h.includes)((0,h.map)(this.addedPrimaryFields,this.getSourceFieldId),this.getSourceFieldId(e))),["name"],["asc"]))),this.secondaryAvailableFields$=this.rxRecordDefinitionService.get(this.secondaryRecordDefinitionName,{},!0).pipe((0,v.map)(e=>(0,h.orderBy)(this.getJoinFieldDefinitions(e,l.RX_RECORD_DEFINITION.sourceRecordTypes.secondary).filter(e=>!(0,h.includes)((0,h.map)(this.addedSecondaryFields,this.getSourceFieldId),this.getSourceFieldId(e))),["name"],["asc"]))),this.duplicateNames$=(0,g.combineLatest)([this.primarySelectedFields$,this.secondarySelectedFields$]).pipe((0,v.map)(([e,t])=>{const i=[...(0,h.map)(e,"name"),...(0,h.map)(this.addedPrimaryFields,"name")],n=[...(0,h.map)(t,"name"),...(0,h.map)(this.addedSecondaryFields,"name")];return(0,h.intersection)(i,n).concat((0,h.intersection)((0,h.map)(l.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFields,"name"),i.concat(n)))}),(0,v.shareReplay)(1)),this.hasDuplicates$=this.duplicateNames$.pipe((0,v.map)(e=>!!e.length)),this.selectedFields$=(0,g.combineLatest)([this.primarySelectedFields$,this.secondarySelectedFields$,this.duplicateNames$]).pipe((0,v.map)(([e,t,i])=>{const n=(0,h.chain)(e).concat(t).map("fieldMapping.sourceFieldId").filter((e,t,i)=>(0,h.includes)(i,e,t+1)).value();return(0,h.concat)(e,t).filter(e=>this.rxFieldDefinitionService.isJoinedField(e)).map(e=>{const t=(0,h.cloneDeep)(e);return(0,h.includes)(i,t.name)&&(t.fieldMapping.source===l.RX_RECORD_DEFINITION.sourceRecordTypes.primary?t.name=`${t.name} - ${this.rxDefinitionNameService.getDisplayName(this.primaryRecordDefinitionName)}`:t.name=`${t.name} - ${this.rxDefinitionNameService.getDisplayName(this.secondaryRecordDefinitionName)}`),(0,h.includes)(n,t.fieldMapping.sourceFieldId)||(t.customId=t.fieldMapping.sourceFieldId),t})}),(0,v.shareReplay)(1)),this.vm$=(0,g.combineLatest)([this.primaryAvailableFields$,this.secondaryAvailableFields$,this.hasDuplicates$,this.selectedFields$]).pipe((0,v.map)(([e,t,i,n])=>({primaryAvailableFields:e,secondaryAvailableFields:t,hasDuplicates:i,selectedFields:n}))),this.alertConfig={content:this.notificationMessage,variant:"info",type:"inline",dismissible:!1},this.selectTexts={headerText:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.select.header.label"),numberOptionsText:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.select.fields.label"),checked:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.select.selected.label"),searchPlaceholder:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label")}}ngOnInit(){super.ngOnInit(),this.selectedFields$.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.selectedFields=e)}save(){this.activeModalRef.close(this.selectedFields)}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}optionFormatter(e){return e.name}getSourceFieldId(e){return e.fieldMapping.sourceFieldId}getJoinFieldDefinitions(e,t){return(0,h.map)(null==e?void 0:e.fieldDefinitions,e=>{const i=(0,h.cloneDeep)(e);return i.fieldMapping={resourceType:l.RX_RECORD_DEFINITION.joinFieldMapping,sourceFieldId:e.id,source:t},i.id=this.rxGuidService.generate("rx-"),i.searchDefinition&&(i.searchDefinition=null),delete i.lastUpdateTime,i})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}ci.\u0275fac=function(e){return new(e||ci)(o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](y.RxGuidService),o["\u0275\u0275directiveInject"](l.RxRecordDefinitionService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](d.RxDefinitionNameService),o["\u0275\u0275directiveInject"](l.RxFieldDefinitionService),o["\u0275\u0275directiveInject"](o.Injector))},ci.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ci,selectors:[["rx-add-join-fields-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"modal-body","d-flex","flex-column","mh-100"],["class","mb-3",3,"config",4,"ngIf"],[1,"d-flex","flex-row","select-container"],["rx-id","primary-fields","class","d-flex flex-column h-100","enableFilter","true",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label",4,"ngIf"],["rx-id","secondary-fields","class","ml-3 d-flex flex-column h-100","enableFilter","true",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label",4,"ngIf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"],[1,"mb-3",3,"config"],["rx-id","primary-fields","enableFilter","true",1,"d-flex","flex-column","h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label"],["rx-id","secondary-fields","enableFilter","true",1,"ml-3","d-flex","flex-column","h-100",3,"inline","multiple","options","optionFormatter","selectAllButton","deselectAllButton","texts","popupMaxHeight","formControl","label"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,Te,16,11,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,a.AdaptButtonComponent,a.AdaptAlertComponent,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlDirective],pipes:[n.AsyncPipe,m.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%}[_nghost-%COMP%]   .modal-body[_ngcontent-%COMP%]{height:645px!important}[_nghost-%COMP%]     adapt-rx-select{width:100%;max-width:400px}[_nghost-%COMP%]     adapt-rx-select .rx-select__options-wrapper{flex:1 1 auto;overflow-y:auto;overflow-x:hidden;height:625px}.select-container[_ngcontent-%COMP%]{overflow:auto}'],changeDetection:0});class pi{constructor(e,t,i,n,r,a,s,d,c,u,m,f,y,b,x,C,S,D){this.store$=e,this.rxNotificationService=t,this.rxOverlayService=i,this.rxRecordDefinitionValidatorService=n,this.rxRecordDesignerInspectorService=r,this.rxDefinitionNameService=a,this.rxFieldDefinitionManagerService=s,this.rxRecordDefinitionService=d,this.rxGlobalCacheService=c,this.translateService=u,this.datePipe=m,this.rxModalService=f,this.rxFieldDefinitionService=y,this.rxRecordDesignerService=b,this.rxExpressionEditorService=x,this.rxRecordDefinitionCacheService=C,this.rxGuidService=S,this.injector=D,this.definitionSaved=new o.EventEmitter,this.definitionErrorLoading=new o.EventEmitter,this.closeDesigner=new o.EventEmitter,this.newTitle=`<${this.translateService.instant("com.bmc.arsys.rx.client.record-designer.new-record.title")}>`,this.definition=null,this.isInheritColumnHidden=!0,this.isJoinRecordDefinition=!1,this.dataTypes=[l.RX_RECORD_DEFINITION.dataTypes.attachment,l.RX_RECORD_DEFINITION.dataTypes.boolean,l.RX_RECORD_DEFINITION.dataTypes.character,l.RX_RECORD_DEFINITION.dataTypes.dateOnly,l.RX_RECORD_DEFINITION.dataTypes.dateTime,l.RX_RECORD_DEFINITION.dataTypes.localizedCharacter,l.RX_RECORD_DEFINITION.dataTypes.timeOnly,l.RX_RECORD_DEFINITION.dataTypes.integer,l.RX_RECORD_DEFINITION.dataTypes.selection,l.RX_RECORD_DEFINITION.dataTypes.decimal,l.RX_RECORD_DEFINITION.dataTypes.real].sort((e,t)=>e.displayName.localeCompare(t.displayName)),this.inspectorTabIndexSubject=new g.Subject,this.inspectorTabIndex$=this.store$.select(Ht),this.selectedFieldGuid$=this.store$.select(Jt),this.destroyed$=new g.ReplaySubject(1),this.inspectorFocusEditorSubject=new g.Subject,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.bundleId$=this.store$.select(qt),this.isDesignMode$=this.store$.select(Xt),this.definitionModel$=this.store$.select(Qt),this.isDirty$=this.store$.select(Wt),this.bundleFriendlyName$=this.bundleId$.pipe((0,v.switchMap)(e=>this.rxGlobalCacheService.getBundleFriendlyName(e))),this.definitionDisplayName$=this.definitionModel$.pipe((0,v.map)(e=>this.rxDefinitionNameService.getDisplayName(e.name)),(0,v.startWith)(null)),this.definitionModelFromDefinition$=this.store$.select(Kt).pipe((0,v.shareReplay)(1)),this.primaryRecordDefinition$=this.definitionModelFromDefinition$.pipe((0,v.pluck)("primaryRecordDefinitionName"),(0,v.distinctUntilChanged)(),(0,v.filter)(Boolean),(0,v.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))),this.secondaryRecordDefinition$=this.definitionModelFromDefinition$.pipe((0,v.pluck)("secondaryRecordDefinitionName"),(0,v.distinctUntilChanged)(),(0,v.filter)(Boolean),(0,v.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))),this.joinRecordDataDictionary$=(0,g.combineLatest)([this.primaryRecordDefinition$,this.secondaryRecordDefinition$]).pipe((0,v.map)(([e,t])=>[{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.name),label:`(${this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.primary.label")})`,type:l.RX_RECORD_DEFINITION.sourceRecordTypes.primary,fieldDefinitions:e.fieldDefinitions},{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(t.name),label:`(${this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.secondary.label")})`,type:l.RX_RECORD_DEFINITION.sourceRecordTypes.secondary,fieldDefinitions:t.fieldDefinitions}]),(0,v.map)(e=>e.map(e=>({label:`${e.recordDefinitionName} ${e.label}`,expanded:!0,children:(0,h.chain)(e.fieldDefinitions).map(t=>{if(t.resourceType!==l.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType)return{label:`${e.recordDefinitionName}.${t.name}`,icon:"d-icon-field_text",expression:`\${${e.recordDefinitionName}.${e.type}.${t.name}}`}}).compact().sortBy(e=>e.label.toLocaleLowerCase()).value()})))),this.isNewDefinition$=this.definitionModelFromDefinition$.pipe((0,v.map)(e=>!Boolean(e.lastUpdateTime))),this.isJoinRecordDefinition$=this.definitionModelFromDefinition$.pipe((0,v.map)(e=>this.rxRecordDefinitionService.isJoinRecord(e)),(0,v.shareReplay)(1)),this.definitionFromDefinitionModel$=(0,g.combineLatest)([this.definitionModel$,this.bundleId$]).pipe((0,v.map)(([e,t])=>this.rxRecordDesignerService.getDefinitionFromDefinitionModel(e,t))),this.isFieldsCustomizationAllowed$=this.definitionFromDefinitionModel$.pipe((0,v.map)(e=>this.rxOverlayService.isCustomizationEnabled("allowFieldsOverlay",e)),(0,v.distinctUntilChanged)(),(0,v.shareReplay)(1)),this.isPropertiesCustomizationAllowed$=this.definitionFromDefinitionModel$.pipe((0,v.map)(e=>this.rxOverlayService.isCustomizationEnabled("allowOtherPropertiesOverlay",e)),(0,v.distinctUntilChanged)(),(0,v.shareReplay)(1)),this.isPermissionsCustomizationAllowed$=this.definitionFromDefinitionModel$.pipe((0,v.map)(e=>this.rxOverlayService.isCustomizationEnabled("allowPermissionsOverlay",e)),(0,v.distinctUntilChanged)(),(0,v.shareReplay)(1)),this.isIndexCustomizationAllowed$=this.definitionFromDefinitionModel$.pipe((0,v.map)(e=>this.rxOverlayService.isCustomizationEnabled("allowIndexesOverlay",e)),(0,v.distinctUntilChanged)(),(0,v.shareReplay)(1)),this.areNewDefinitionsAllowed$=this.bundleId$.pipe((0,v.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e))),this.isReadOnly$=this.definitionFromDefinitionModel$.pipe((0,v.filter)(e=>!!e.lastUpdateTime),(0,v.withLatestFrom)(this.areNewDefinitionsAllowed$,this.isFieldsCustomizationAllowed$,this.isPropertiesCustomizationAllowed$,this.isPermissionsCustomizationAllowed$,this.isIndexCustomizationAllowed$),(0,v.map)(([e,t,i,n,o,r])=>!t||!i&&!n&&!o&&!r),(0,v.tap)(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),(0,v.startWith)(!1),(0,v.shareReplay)(1)),this.definitionInspectorConfig$=(0,g.combineLatest)([this.isNewDefinition$,this.definitionModel$,this.definitionModelFromDefinition$,this.bundleId$,this.isPropertiesCustomizationAllowed$,this.isIndexCustomizationAllowed$,this.isPermissionsCustomizationAllowed$,this.isFieldsCustomizationAllowed$,this.isReadOnly$]).pipe((0,v.map)(([e,t,i,n,o,r,a,s,l])=>this.rxRecordDesignerInspectorService.getDefinitionInspectorConfig(e,t,i,n,o,r,a,s,l,this.expressionConfigurator))),this.fieldGridRows$=this.definitionModel$.pipe((0,v.map)(e=>e.fields.map(t=>{var i,n;const o=(0,h.invert)(l.RX_RECORD_DEFINITION.sourceRecordTypes)[null===(i=t.fieldMapping)||void 0===i?void 0:i.source];return{guid:t.guid,name:t.name,id:(0,h.isNumber)(t.id)?t.id:"",isInherited:t.isInherited,fieldOption:t.fieldOption,defaultValue:t.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.selection?null===(n=t.selectionFieldOptionProperties.optionNamesById)||void 0===n?void 0:n[t.selectionFieldOptionProperties.defaultValue]:t.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.dateOnly?this.datePipe.transform(t.defaultValue):t.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.dateTime?this.datePipe.transform(t.defaultValue,"medium"):t.defaultValue,resourceType:this.translateService.instant((0,h.find)(l.RX_RECORD_DEFINITION.dataTypes,{resourceType:t.resourceType}).labelKey),isCoreField:this.rxFieldDefinitionService.isCoreField(t),sourceRecord:(0,h.includes)(l.RX_RECORD_DEFINITION.joinRecordDefinitionCoreFieldIds,t.id)?"":this.translateService.instant("com.bmc.arsys.rx.client.record-designer.grid.column.source-record.label",{recordName:this.rxDefinitionNameService.getDisplayName(e[o+"RecordDefinitionName"]),recordType:(0,h.capitalize)(o)})}}))),this.isExternalRecordDefinition$=this.definitionModel$.pipe((0,v.map)(e=>this.rxRecordDefinitionService.isExternalRecord(e))),this.selectedFieldGridRows$=this.selectedFieldGuid$.pipe((0,v.withLatestFrom)(this.fieldGridRows$),(0,v.map)(([e,t])=>e?[(0,h.find)(t,{guid:e})]:[]),(0,v.startWith)([])),this.selectedFieldModel$=(0,g.combineLatest)([this.selectedFieldGuid$,this.definitionModel$]).pipe((0,v.map)(([e,t])=>(0,h.find)(t.fields,{guid:e})),(0,v.startWith)(null),(0,v.shareReplay)(1)),this.selectedFieldInspectorConfig$=this.selectedFieldModel$.pipe((0,v.withLatestFrom)(this.definitionModel$,this.isReadOnly$),(0,v.map)(([e,t,i])=>e?this.rxFieldDefinitionManagerService.getFieldInspectorConfig(e,t,i):null)),this.isJoinOrExternalRecord$=(0,g.combineLatest)([this.isJoinRecordDefinition$,this.isExternalRecordDefinition$]).pipe((0,v.map)(([e,t])=>e||t)),this.validationIssues$=this.definitionModel$.pipe((0,v.map)(e=>this.rxRecordDefinitionValidatorService.validate(e))),this.hasValidationErrors$=this.validationIssues$.pipe((0,v.map)(e=>(0,h.some)(e,{issues:[{type:p.ValidationIssueType.Error}]})),(0,v.distinctUntilChanged)()),this.hasValidationWarnings$=this.validationIssues$.pipe((0,v.map)(e=>(0,h.some)(e,{issues:[{type:p.ValidationIssueType.Warning}]})),(0,v.distinctUntilChanged)()),this.isSaveButtonDisabled$=(0,g.combineLatest)([this.hasValidationErrors$,this.isDirty$,this.isReadOnly$]).pipe((0,v.map)(([e,t,i])=>e||!t||i),(0,v.startWith)(!0)),this.breadcrumbItems$=(0,g.combineLatest)([this.definitionDisplayName$,this.selectedFieldModel$]).pipe((0,v.map)(([e,t])=>{var i;return[{data:null,label:this.rxDefinitionNameService.getDisplayName(null===(i=this.definition)||void 0===i?void 0:i.name)||e||this.newTitle},{data:null,label:null==t?void 0:t.name}].filter(e=>e.label)})),this.definitionForJsonViewer$=this.isDesignMode$.pipe((0,v.switchMap)(e=>e?(0,g.of)(null):this.definitionFromDefinitionModel$)),this.overriddenRecordProperties$=(0,g.combineLatest)([this.definitionModelFromDefinition$,this.definitionModel$]).pipe((0,v.scan)((e,[t,i])=>{const n=(0,h.intersectionBy)(t.fields,i.recordInheritanceSelector.inheritedFieldDefinitions,"id");return e=Object.assign(Object.assign({},e),{fields:(0,h.map)(n,"name").join(", ")})},{})),this.isDeleteFieldButtonDisabled$=this.selectedFieldModel$.pipe((0,v.withLatestFrom)(this.definitionModel$),(0,v.map)(([e,t])=>!e||t.isAuditRecordDefinition||this.rxFieldDefinitionService.isCoreField(e)||e.isInherited||!this.rxFieldDefinitionService.isFieldInUserOverlay(e))),this.isCopyFieldButtonDisabled$=this.selectedFieldModel$.pipe((0,v.withLatestFrom)(this.isFieldsCustomizationAllowed$,this.bundleId$),(0,v.map)(([e,t,i])=>!e||this.rxFieldDefinitionService.isCoreField(e)||e.isInherited||!t||!this.rxOverlayService.isBundleEditable(i))),this.expressionConfigurator=new di(this.injector),this.dataDictionary$=this.definitionModelFromDefinition$.pipe((0,v.withLatestFrom)(this.store$.select(qt)),(0,v.takeUntil)(this.destroyed$),(0,v.switchMap)(([e,t])=>this.expressionConfigurator.recordExpressionDataDictionary(e,t))),this.isInheritColumnHidden$=this.definitionModel$.pipe((0,v.map)(e=>{var t;return(0,h.isEmpty)(null===(t=e.recordInheritanceSelector)||void 0===t?void 0:t.inheritedFieldDefinitions)}),(0,v.distinctUntilChanged)(),(0,v.startWith)(!0)),this.vm$=(0,g.combineLatest)([this.breadcrumbItems$,this.bundleFriendlyName$,this.definitionDisplayName$,this.definitionInspectorConfig$,this.definitionModel$,this.hasValidationErrors$,this.hasValidationWarnings$,this.validationIssues$,this.isSaveButtonDisabled$,this.fieldGridRows$,this.selectedFieldGridRows$,this.definitionForJsonViewer$,this.isDesignMode$,this.selectedFieldModel$,this.selectedFieldInspectorConfig$,this.selectedFieldGuid$,this.isFieldsCustomizationAllowed$,this.isDeleteFieldButtonDisabled$,this.isCopyFieldButtonDisabled$,this.isJoinOrExternalRecord$,this.isReadOnly$]).pipe((0,v.map)(([e,t,i,n,o,r,a,s,l,d,c,p,u,m,f,h,g,v,y,b,x])=>({breadcrumbItems:e,bundleFriendlyName:t,definitionDisplayName:i,definitionInspectorConfig:n,definitionModel:o,hasValidationErrors:r,hasValidationWarnings:a,validationIssues:s,isSaveButtonDisabled:l,fieldGridRows:d,selectedFieldGridRows:c,definitionForJsonViewer:p,isDesignMode:u,selectedFieldModel:m,selectedFieldInspectorConfig:f,selectedFieldGuid:h,isFieldsCustomizationAllowed:g,isDeleteFieldButtonDisabled:v,isCopyFieldButtonDisabled:y,isJoinOrExternalRecord:b,isReadOnly:x}))),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.inspectorTabIndex$.pipe((0,v.skip)(1),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{(0,h.isNull)(e)||this.adaptSidebarComponent.openPanel(e)}),this.inspectorTabIndexSubject.pipe((0,v.skip)(1),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.store$.dispatch(Ft({inspectorTabIndex:e}))}),this.store$.select(Yt).pipe((0,v.skip)(1),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.definitionSaved.emit(e)}),this.expressionConfigurator.configureForProperty({propertyPath:Lt.archiveDataCriteriaPath,dataDictionary$:this.dataDictionary$,operators:d.ExpressionOperatorRowsByGroup.get(d.ExpressionOperatorGroup.All)}),this.expressionConfigurator.configureForProperty({propertyPath:Lt.joinCriteriaPath,dataDictionary$:this.joinRecordDataDictionary$,operators:d.ExpressionOperatorRowsByGroup.get(d.ExpressionOperatorGroup.All)}),(0,g.combineLatest)([this.isInheritColumnHidden$,this.isJoinRecordDefinition$]).pipe((0,v.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.isInheritColumnHidden=e,this.isJoinRecordDefinition=t}),this.columns=[{field:"name",header:this.translateService.instant("com.bmc.arsys.rx.client.common.field-name.label")},{field:"sourceRecord",header:this.translateService.instant("Source Record"),hidden:()=>!this.isJoinRecordDefinition},{field:"id",header:this.translateService.instant("com.bmc.arsys.rx.client.common.field-id.label")},{field:"isInherited",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.grid.column.inherited.title"),hidden:()=>this.isInheritColumnHidden,cellTemplate:this.inheritedCellTemplate},{field:"resourceType",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.grid.column.data-type.title"),cellTemplate:this.dataTypeCellTemplate},{field:"fieldOption",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.grid.column.is-required-field.title"),cellTemplate:this.requiredCellTemplate},{field:"defaultValue",header:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.grid.column.default-value.title")}]}ngOnChanges(e){e.configuration.currentValue&&this.store$.dispatch(yt({payload:this.configuration}))}onEditorEvent(e){e.type===c.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&e.payload.propertyPath===Lt.archiveDataCriteriaPath&&this.definitionModel$.pipe((0,v.take)(1)).subscribe(t=>{this.rxExpressionEditorService.openEditor({property:{path:Lt.archiveDataCriteriaPath,value:t.archiveDataCriteria,label:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.archiving.record-filter.label")},isReadOnly:e.payload.isReadOnly,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field-name.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.store$.dispatch(wt({definitionModelFromDesigner:{archiveDataCriteria:e.value}}))})}),e.type===c.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&e.payload.propertyPath===Lt.joinCriteriaPath&&this.definitionModel$.pipe((0,v.take)(1)).subscribe(t=>{this.rxExpressionEditorService.openEditor({property:{path:Lt.joinCriteriaPath,value:t.joinCriteria,label:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.on-statement.label")},isReadOnly:e.payload.isReadOnly,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field-name.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.store$.dispatch(wt({definitionModelFromDesigner:{joinCriteria:e.value}}))})})}onSelectionChange(e){this.store$.dispatch(Nt({guid:null==e?void 0:e.guid}))}onDefinitionModelChange(e){this.store$.dispatch(wt({definitionModelFromDesigner:e}))}onSelectedFieldModelChange(e){this.store$.dispatch(Et({selectedFieldModel:e}))}toggleDesignMode(){this.store$.dispatch(Rt())}onSidebarToggle(e){this.inspectorTabIndexSubject.next(e.id)}addNewField(e){this.store$.dispatch(Mt({resourceType:e}))}openAddNewField(){this.definitionModel$.pipe((0,v.take)(1)).subscribe(e=>{this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.definition-properties.add-fields.title"),content:ci,size:"rx-md",blockKeyboard:!1,data:{primaryRecordDefinitionName:e.primaryRecordDefinitionName,secondaryRecordDefinitionName:e.secondaryRecordDefinitionName,addedFields:e.fields}}).then(e=>{const t=e.map(e=>Object.assign(Object.assign({},e),{guid:this.rxGuidService.generate(),id:null,defaultValueByLocale:{},selectionFieldOptionProperties:e.resourceType===l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?{defaultValue:e.defaultValue,optionNamesById:e.optionNamesById,optionLabelsById:e.optionLabelsById}:null}));this.store$.dispatch(Ot({newFieldModels:t}))}).catch(h.noop)})}copySelectedField(){this.store$.dispatch(jt())}deleteSelectedField(){this.store$.dispatch(Pt())}onBreadcrumbSelected(){this.store$.dispatch(At())}canDeactivate(){let e=!0;return this.isDirty$.pipe((0,v.take)(1)).subscribe(t=>{e=!t}),e}saveDefinition(){(0,g.combineLatest)([this.definitionFromDefinitionModel$,this.isNewDefinition$,this.overriddenRecordProperties$]).pipe((0,v.take)(1),(0,v.switchMap)(([e,t,i])=>t?this.rxRecordDefinitionService.create(e):t||(0,h.isEmpty)(i.fields)?this.rxRecordDefinitionService.update(e):(0,g.from)(this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.record-inheritance-selector.inheritance-issue-modal.title"),content:si,data:{overriddenRecordProperties:i},size:"sm"})).pipe((0,v.filter)(e=>"continue"===e),(0,v.switchMap)(()=>this.rxRecordDefinitionService.update(e)))),(0,v.withLatestFrom)(this.store$.select(Qt),this.store$.select(qt))).subscribe(([e,t,i])=>{this.store$.dispatch(Bt({savedDefinitionName:`${i}:${t.name}`}))})}onCorrectIssue(e){e.data.guid?this.store$.dispatch(Nt({guid:e.data.guid})):this.store$.dispatch(Ft({inspectorTabIndex:0})),setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:e.data.propertyName,data:e.data}),10)}onFormInitialized(){this.inspectorFocusEditorSubject.next({editorName:"name",data:{}})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.inspectorTabIndexSubject.complete(),this.inspectorFocusEditorSubject.complete(),this.store$.dispatch($t())}}pi.\u0275fac=function(e){return new(e||pi)(o["\u0275\u0275directiveInject"](x.Store),o["\u0275\u0275directiveInject"](d.RxNotificationService),o["\u0275\u0275directiveInject"](d.RxOverlayService),o["\u0275\u0275directiveInject"](Zt),o["\u0275\u0275directiveInject"](ai),o["\u0275\u0275directiveInject"](d.RxDefinitionNameService),o["\u0275\u0275directiveInject"](pt),o["\u0275\u0275directiveInject"](l.RxRecordDefinitionService),o["\u0275\u0275directiveInject"](d.RxGlobalCacheService),o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](n.DatePipe),o["\u0275\u0275directiveInject"](p.RxModalService),o["\u0275\u0275directiveInject"](l.RxFieldDefinitionService),o["\u0275\u0275directiveInject"](li),o["\u0275\u0275directiveInject"](c.RxExpressionEditorService),o["\u0275\u0275directiveInject"](l.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](y.RxGuidService),o["\u0275\u0275directiveInject"](o.Injector))},pi.\u0275cmp=o["\u0275\u0275defineComponent"]({type:pi,selectors:[["rx-record-designer"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](a.AdaptSidebarComponent,5),o["\u0275\u0275viewQuery"](Oe,7),o["\u0275\u0275viewQuery"](Ne,7),o["\u0275\u0275viewQuery"](Ae,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.adaptSidebarComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.requiredCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataTypeCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.inheritedCellTemplate=e.first)}},inputs:{configuration:"configuration"},outputs:{definitionSaved:"definitionSaved",definitionErrorLoading:"definitionErrorLoading",closeDesigner:"closeDesigner"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:10,vars:3,consts:[["class","p-0",4,"ngIf"],["dataTypeCellTemplate",""],["requiredCellTemplate",""],["inheritedCellTemplate",""],["sourceFieldCellTemplate",""],[1,"p-0"],[3,"bundleName","isSaveButtonDisabled","breadcrumbItems","isDesignMode","save","closeDesigner","breadcrumbSelected","toggleDesignMode"],["position","right",1,"h-100",3,"openedId","adjustMainContainerWidth","hidden","isPanelOpenedCurrently"],["iconClass","d-icon-pencil",3,"headerTitle","tooltipText"],[3,"config","model","focusEditor$","modelChange","formInitialized","editorEvent"],["iconClass","d-icon-gear",3,"headerTitle","tooltipText"],[3,"config","model","guid","focusEditor$","modelChange"],[1,"p-3",3,"hidden","config"],[3,"iconClass","headerTitle","tooltipText"],[3,"issueSections","definitionTypeDisplayName","correctIssue"],[1,"main","h-100","d-flex","flex-column"],[1,"mt-0","mb-2"],["class","d-flex border border-bottom-0",4,"ngIf"],["scrollHeight","flex",3,"value","selection","columns","scrollable","sortable","resizableColumns","bordered","filterable","dataKey","disableRowSelection","selectionMode","selectionChange"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"d-flex","border","border-bottom-0"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-field-button",1,"d-icon-plus_circle","align-self-start",3,"disabled","click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","delete-field-button",1,"d-icon-trash",3,"disabled","click"],["adaptDropdown","",1,"dropdown"],["adapt-button","","type","button","adaptDropdownToggle","","btn-type","tertiary","rx-id","new-field-button",1,"d-icon-plus_circle"],["adaptDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item",3,"disabled","click",4,"ngFor","ngForOf"],["adapt-button","","btn-type","tertiary","type","button","rx-id","copy-field-button",1,"d-icon-list_ordered",3,"disabled","click"],[1,"dropdown-item",3,"disabled","click"],[1,"full-size",3,"code","lang","hasToolbar","theme"],["class","icon d-icon-lock pr-2",3,"adaptPopover",4,"ngIf"],[1,"icon","d-icon-lock","pr-2",3,"adaptPopover"],["class","icon d-icon-check pr-2",4,"ngIf"],[1,"icon","d-icon-check","pr-2"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,ke,26,60,"ng-container",0),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275template"](2,$e,2,2,"ng-template",null,1,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](4,Le,2,3,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](6,ze,1,1,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](8,Ue,1,1,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.vm$))},directives:[n.NgIf,c.RxDesignerHeaderComponent,a.AdaptSidebarComponent,a.AdaptSidebarItemComponent,c.FormBuilderComponent,a.AdaptAlertComponent,p.RxValidationIssuesComponent,s.AdaptTableComponent,a.AdaptButtonComponent,a.AdaptDropdownDirective,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective,n.NgForOf,a.AdaptCodeViewerComponent,a.AdaptPopoverDirective],pipes:[n.AsyncPipe,m.TranslatePipe,d.RxDefinitionNamePipe,n.JsonPipe,l.RxRecordDefinitionFieldOptionPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-component-designer[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:calc(100% - 50px);overflow:hidden}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:auto;padding:1rem}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper{border-top:0}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper .adapt-sidebar-panel-content{padding:0}[_nghost-%COMP%]     adapt-sidebar .adapt-sidebar-wrapper .card{border-left:0;border-right:0}']});const ui={isArchivingEnabled:!1,archiveDescription:null,ageQualifierFieldId:null,ageQualifierInDays:null,archiveRecordDefinitionName:null,archiveType:l.ArchiveType.None,includeAttachments:null,archiveDataCriteria:null,associationsToFollowForArchive:{selectionType:l.AssociationSelectionType.FollowParent,specificAssociationNames:[]},isAuditingEnabled:!1,auditRecordDefinitionName:null,auditDataCriteria:null,associatedAuditFieldsByAssociationName:{},customizationOptions:{allowOverlay:!1,allowFieldsOverlay:!1,allowIndexesOverlay:!1,allowOtherPropertiesOverlay:!1,allowPermissionsOverlay:!1,fields:[],scope:null},recordInheritanceSelector:{inheritanceOptions:{isSharedInstanceStorage:!1,isAbstract:!1,isFinal:!1},inheritanceDescriptor:{inheritingFrom:null,isInheritingRules:!1,isInheritingFieldPermissions:!1,isInheritingAssociations:!1,isInheritingFieldAuditOptions:!1},isInheritingCoreFields:!1,inheritedFieldDefinitions:[]},recordSearchFields:[],overlayOperation:null,weightedRelevancyTitle:void 0,weightedRelevancyKeywords:void 0,weightedRelevancyEnvironment:void 0,fields:[],indexDefinitions:[]},mi={bundleId:null,definitionName:null,selectedFieldGuid:null,inspectorTabIndex:0,isDesignMode:!0,definitionModel:ui,definitionModelFromDefinition:ui,isDirty:!1,savedDefinitionName:null},fi=(0,x.createReducer)(mi,(0,x.on)(yt,(e,{payload:t})=>Object.assign(Object.assign({},mi),{bundleId:t.bundleId,definitionName:t.definitionName})),(0,x.on)(St,(e,{definitionModelFromDefinition:t})=>Object.assign(Object.assign({},e),{definitionModelFromDefinition:t,definitionModel:t})),(0,x.on)(wt,(e,{definitionModelFromDesigner:t})=>{const i=Object.assign(Object.assign({},e.definitionModel),t),n=i.recordInheritanceSelector.inheritanceDescriptor?i.recordInheritanceSelector.inheritedFieldDefinitions:[];return Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},i),{includeAttachments:i.archiveType===Lt.archiving.types.deleteSourceRecord.id,fields:(0,h.chain)(i.fields).differenceBy(n,"id").concat(n).map(e=>{const t=i.recordSearchFields.find(t=>t.id===e.id),n=t?t.searchDefinition:(0,h.isUndefined)(e.searchDefinition)?void 0:null,o=i.customizationOptions.allowFieldsOverlay&&i.customizationOptions.fields.find(t=>t.id===e.id);return Object.assign(Object.assign({},e),{searchDefinition:n,allowOtherPropertiesOverlay:o?o.allowOtherPropertiesOverlay:e.allowOtherPropertiesOverlay,allowPermissionsOverlay:o?o.allowPermissionsOverlay:e.allowPermissionsOverlay,isInherited:e.isCoreField?Boolean(i.recordInheritanceSelector.isInheritingCoreFields):e.isInherited})}).orderBy("id").value()})})}),(0,x.on)(Et,(e,{selectedFieldModel:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{fields:e.definitionModel.fields.map(e=>e.guid===t.guid?Object.assign(Object.assign({},t),{copy:!!t.audit||t.copy}):e)})})),(0,x.on)(xt,e=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{recordSearchFields:[],fields:e.definitionModel.fields.map(e=>Object.assign(Object.assign({},e),{searchDefinition:(0,h.isUndefined)(e.searchDefinition)?void 0:null}))})})),(0,x.on)(Rt,e=>Object.assign(Object.assign({},e),{isDesignMode:!e.isDesignMode})),(0,x.on)(Dt,e=>Object.assign(Object.assign({},e),{isDirty:!1})),(0,x.on)(It,e=>Object.assign(Object.assign({},e),{isDirty:!0})),(0,x.on)(Ft,(e,{inspectorTabIndex:t})=>Object.assign(Object.assign({},e),{inspectorTabIndex:t})),(0,x.on)(Nt,(e,{guid:t})=>Object.assign(Object.assign({},e),{selectedFieldGuid:t,inspectorTabIndex:t&&!(0,h.isNull)(e.inspectorTabIndex)?1:e.inspectorTabIndex})),(0,x.on)(At,e=>Object.assign(Object.assign({},e),{selectedFieldGuid:null,inspectorTabIndex:(0,h.isNull)(e.inspectorTabIndex)?e.inspectorTabIndex:0})),(0,x.on)(Tt,(e,{newFieldModel:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{fields:[...e.definitionModel.fields,Object.assign({},t)]})})),(0,x.on)(Ot,(e,{newFieldModels:t})=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{fields:[...e.definitionModel.fields,...t]}),isDirty:!0})),(0,x.on)(Vt,e=>Object.assign(Object.assign({},e),{definitionModel:Object.assign(Object.assign({},e.definitionModel),{fields:e.definitionModel.fields.filter(t=>t.guid!==e.selectedFieldGuid)})})),(0,x.on)(Bt,(e,{savedDefinitionName:t})=>Object.assign(Object.assign({},e),{savedDefinitionName:t})),(0,x.on)($t,e=>Object.assign({},mi)));function hi(e,t){return fi(e,t)}class gi{constructor(e,t,i,n,o,r,a,s,d){this.store$=e,this.actions$=t,this.rxFieldDefinitionManagerService=i,this.rxRecordDefinitionService=n,this.rxModalService=o,this.rxNotificationService=r,this.translateService=a,this.rxGuidService=s,this.rxRecordDesignerService=d,this.initRecordDesigner$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(yt),(0,v.map)(()=>bt()))),this.loadDefinition$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(bt),(0,v.withLatestFrom)(this.store$.select(Ut)),(0,v.switchMap)(([e,t])=>t?this.rxRecordDefinitionService.get(t,{},!0):this.rxRecordDefinitionService.getNew()),(0,v.map)(e=>Ct({definition:e})))),this.loadDefinitionSuccess$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Ct),(0,v.map)(e=>St({definitionModelFromDefinition:this.rxRecordDesignerService.getDefinitionModelFromDefinition(e.definition)})))),this.createNewFieldModel$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Mt),(0,v.withLatestFrom)(this.store$.select(Qt)),(0,v.map)(([e,t])=>{let i,n=0;const o=this.translateService.instant("com.bmc.arsys.rx.client.designer.default-field-name.label");do{i=`${o} ${++n}`}while((0,h.some)(t.fields,{name:i}));const r=this.rxGuidService.generate(),a=this.rxFieldDefinitionManagerService.getNewFieldDefinitionModel(e.resourceType,{id:null,isNewField:!0,name:i,guid:r,minValue:null,maxValue:null,defaultValueByLocale:{},selectionFieldOptionProperties:e.resourceType===l.RX_RECORD_DEFINITION.dataTypes.selection.resourceType?{defaultValue:null,optionNamesById:null,optionLabelsById:null}:null});return Tt({newFieldModel:a})}))),this.clearSearchFields$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(wt),(0,v.withLatestFrom)(this.store$.select(Qt)),(0,v.map)(([e,t])=>t),(0,v.distinctUntilChanged)((e,t)=>(0,h.isEqual)(e.enableCognitiveSearch,t.enableCognitiveSearch)),(0,v.filter)(e=>e.enableCognitiveSearch&&!(0,h.isEmpty)(e.recordSearchFields)),(0,v.switchMap)(()=>(0,g.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.search-fields.clear-search-fields-confirmation.message")}))),(0,v.filter)(Boolean),(0,v.map)(()=>xt()))),this.addNewFieldModel$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Tt),(0,v.map)(e=>Nt({guid:e.newFieldModel.guid})))),this.copySelectedField$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(jt),(0,v.withLatestFrom)(this.store$.select(Qt),this.store$.select(Jt)),(0,v.map)(([e,t,i])=>{const n=t.fields.find(e=>e.guid===i),o=Object.assign(Object.assign({},n),{id:null,guid:this.rxGuidService.generate(),name:this.translateService.instant("com.bmc.arsys.rx.client.designer.default-field-copy-name.label",{fieldName:n.name}),selectionFieldOptionProperties:Object.assign(Object.assign({},n.selectionFieldOptionProperties),{optionLabelsById:n.resourceType===l.RX_RECORD_DEFINITION.resourceTypes.selection?(0,h.mapValues)(n.selectionFieldOptionProperties.optionNamesById,()=>this.rxGuidService.generate()):null})});return Tt({newFieldModel:o})}))),this.deleteSelectedField$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Pt),(0,v.switchMap)(()=>(0,g.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.delete-field-warning.message")}))),(0,v.filter)(Boolean),(0,v.map)(()=>_t()))),this.checkIfFieldUsedByIndexes$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(_t),(0,v.withLatestFrom)(this.store$.select(Qt),this.store$.select(Jt)),(0,v.switchMap)(([e,t,i])=>{const n=(0,h.find)(t.fields,{guid:i});return(0,h.some)(t.indexDefinitions,e=>(0,h.includes)(e.indexFieldIds,n.id))?(0,g.from)(this.rxModalService.alert({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:p.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.record-designer.indexes.field-used-by-indexes.message",{fieldName:n.name})})).pipe((0,v.map)(()=>kt())):[Vt()]}))),this.saveDefinitionSuccess$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Bt),(0,v.withLatestFrom)(this.store$.select(Ut),this.store$.select(qt)),(0,v.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.definition-saved-successfully.message",{definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.record-definition.label")}))}),(0,v.filter)(([e,t,i])=>!!t),(0,v.map)(([e,t,i])=>yt({payload:{definitionName:t,bundleId:i}})))),this.clearSelectedField$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(St,Vt),(0,v.map)(()=>At()))),this.markPristine$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(St,Bt),(0,v.map)(()=>Dt()))),this.markDirty$=(0,I.createEffect)(()=>this.actions$.pipe((0,I.ofType)(Tt,wt,Et,Vt),(0,v.map)(()=>It())))}}gi.\u0275fac=function(e){return new(e||gi)(o["\u0275\u0275inject"](x.Store),o["\u0275\u0275inject"](I.Actions),o["\u0275\u0275inject"](pt),o["\u0275\u0275inject"](l.RxRecordDefinitionService),o["\u0275\u0275inject"](p.RxModalService),o["\u0275\u0275inject"](d.RxNotificationService),o["\u0275\u0275inject"](m.TranslateService),o["\u0275\u0275inject"](y.RxGuidService),o["\u0275\u0275inject"](li))},gi.\u0275prov=o["\u0275\u0275defineInjectable"]({token:gi,factory:gi.\u0275fac});class vi{}vi.\u0275fac=function(e){return new(e||vi)},vi.\u0275mod=o["\u0275\u0275defineNgModule"]({type:vi,declarations:[pi,at,si,ii,ei,ti,Ke,ci,ri,oi],imports:[a.AdaptCodeViewerModule,a.AdaptRxLabelModule,a.AdaptTabsModule,a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCheckboxModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptPopoverModule,a.AdaptIconModule,n.CommonModule,r.FormsModule,c.RxDesignerHeaderModule,p.RxModalModule,p.RxValidationIssuesModule,m.TranslateModule,r.ReactiveFormsModule,u.RecordGridModule,c.RxFormBuilderModule,d.RxDefinitionModule,l.RxRecordDefinitionFieldOptionPipeModule,He,mt,vt,s.AdaptTableModule,a.AdaptSidebarModule,x.StoreFeatureModule,I.EffectsFeatureModule,a.AdaptAlertModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSwitchModule,a.AdaptPopoverModule,a.AdaptAccordionModule,a.AdaptRxListBuilderModule],exports:[pi]}),vi.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[n.DatePipe,li],imports:[[a.AdaptCodeViewerModule,a.AdaptRxLabelModule,a.AdaptTabsModule,a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCheckboxModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptPopoverModule,a.AdaptIconModule,n.CommonModule,r.FormsModule,c.RxDesignerHeaderModule,p.RxModalModule,p.RxValidationIssuesModule,m.TranslateModule,r.ReactiveFormsModule,u.RecordGridModule,c.RxFormBuilderModule,d.RxDefinitionModule,l.RxRecordDefinitionFieldOptionPipeModule,He,mt,vt,s.AdaptTableModule,a.AdaptSidebarModule,x.StoreModule.forFeature(Lt.featureSelector,{model:hi}),I.EffectsModule.forFeature([gi]),a.AdaptAlertModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSwitchModule,a.AdaptPopoverModule,a.AdaptAccordionModule,a.AdaptRxListBuilderModule]]});class yi{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.rxBundleCacheService=t,this.rxDefinitionNameService=i,this.rxUtilityModalsService=n,this.rxPageTitleService=o,this.router=r,this.translateService=a,this.rxComponentCanDeactivateGuard=s,this.isInitialized=!1}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewRecord=!e,this.configuration={definitionName:e,bundleId:this.rxBundleCacheService.bundleId},this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.record-designer.title")])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}onDefinitionSaved(e){this.isNewRecord&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}onCloseDesigner(){this.router.navigate([d.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"record-definitions"])}canDeactivate(){var e,t;return null===(t=null===(e=this.recordDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}}yi.\u0275fac=function(e){return new(e||yi)(o["\u0275\u0275directiveInject"](R.ActivatedRoute),o["\u0275\u0275directiveInject"](d.RxBundleCacheService),o["\u0275\u0275directiveInject"](d.RxDefinitionNameService),o["\u0275\u0275directiveInject"](p.RxUtilityModalsService),o["\u0275\u0275directiveInject"](d.RxPageTitleService),o["\u0275\u0275directiveInject"](R.Router),o["\u0275\u0275directiveInject"](m.TranslateService),o["\u0275\u0275directiveInject"](d.RxComponentCanDeactivateGuard))},yi.\u0275cmp=o["\u0275\u0275defineComponent"]({type:yi,selectors:[["rx-record-designer-page"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](pi,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","definitionSaved","definitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,qe,1,1,"rx-record-designer",0),2&e&&o["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[n.NgIf,pi],encapsulation:2});class bi{}bi.\u0275fac=function(e){return new(e||bi)},bi.\u0275mod=o["\u0275\u0275defineNgModule"]({type:bi,declarations:[yi],imports:[n.CommonModule,vi],exports:[yi]}),bi.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,vi]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-rule-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RX_RULE_DEFINITION:()=>p,RxRuleDefinitionDataPageService:()=>c,RxRuleDefinitionService:()=>v,RxRulePipesModule:()=>f,RxRuleTriggerEventPipe:()=>u,RxRuleTriggerTimeCriteriaDisplayValuePipe:()=>m,renameRuleDefinitionCommand:()=>h,revertRuleCustomizationResourceType:()=>g});var n=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/common/fesm2015/common.js"),a=i("./node_modules/moment-es6/index.js"),s=i("lodash"),l=i("./node_modules/@angular/common/fesm2015/http.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js");class c extends n.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.rule.datapage.RuleDefinitionDataPageQuery"),this.injector=e}}c.\u0275fac=function(e){return new(e||c)(o["\u0275\u0275inject"](o.Injector))},c.\u0275prov=o["\u0275\u0275defineInjectable"]({token:c,factory:c.\u0275fac,providedIn:"root"});const p={ruleElementResourceTypes:{scheduleTime:"com.bmc.arsys.rx.services.rule.domain.ScheduleTime",intervalTime:"com.bmc.arsys.rx.services.rule.domain.IntervalTime"},actionTypeNames:{connector:"connector"},timerTypes:{interval:"Interval",schedule:"Schedule"}};class u{transform(e){let t="";return e&&e.timeCriteria?e.timeCriteria.resourceType===p.ruleElementResourceTypes.scheduleTime?t=p.timerTypes.schedule:e.timeCriteria.resourceType===p.ruleElementResourceTypes.intervalTime&&(t=p.timerTypes.interval):e&&e.eventTypes?t=e.eventTypes.join(", "):e&&e.eventTypeDisplayName&&(t=e.eventTypeDisplayName),t}}u.\u0275fac=function(e){return new(e||u)},u.\u0275pipe=o["\u0275\u0275definePipe"]({name:"rxRuleTriggerEventPipe",type:u,pure:!0});class m{transform(e){let t;switch(e.resourceType){case p.ruleElementResourceTypes.intervalTime:t=this.buildIntervalTimeDisplayValue(e);break;case p.ruleElementResourceTypes.scheduleTime:t=this.buildScheduleTimeDisplayValue(e);break;default:t=""}return t}buildIntervalTimeDisplayValue(e){const t=[];function i(e,t,i){return e?`${e} ${e>1?i:t}`:""}return t.push(i(e.days,"day","days")),t.push(i(e.hours,"hour","hours")),t.push(i(e.minutes,"minute","minutes")),`Every ${(0,s.compact)(t).join(", ")}`}buildScheduleTimeDisplayValue(e){var t,i;const n={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7};function o(e){const t=e.length>1?` and ${e.pop()}`:"";return`${e.join(", ")}${t}`}const r=(0,s.chain)(e.weekDays).map(s.toLower).map(s.startCase).sortBy(e=>n[e]).value(),l=(0,s.sortBy)(e.hours).map(t=>(0,a.default)(`${t}:${e.minute}`,["H:mm"],"en").format("h:mmA")),d=(null===(t=e.monthDays)||void 0===t?void 0:t.length)?`On dates ${o((0,s.sortBy)(e.monthDays))} of every month`:"";return`${d}${(null===(i=e.weekDays)||void 0===i?void 0:i.length)?`${d?", and every ":"Every "}${o(r)}`:""}${` at ${o(l)}`}`}}m.\u0275fac=function(e){return new(e||m)},m.\u0275pipe=o["\u0275\u0275definePipe"]({name:"rxRuleTriggerTimeCriteriaDisplayValue",type:m,pure:!0});class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=o["\u0275\u0275defineNgModule"]({type:f,declarations:[u,m],imports:[r.CommonModule],exports:[u,m]}),f.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[r.CommonModule]]});const h="com.bmc.arsys.rx.application.rule.command.RenameRuleDefinitionCommand",g="com.bmc.arsys.rx.application.rule.command.RevertRuleDefinitionCommand";class v{constructor(e,t,i){this.httpClient=e,this.rxGuidService=t,this.rxCommandFactoryService=i,this.renameCommand=i.forResourceType(h),this.revertCustomizationCommand=i.forResourceType(g)}get(e){return this.httpClient.get(this.getUrl(e))}rename(e,t){return this.renameCommand.execute({name:e,newName:t})}revertCustomization(e){return this.revertCustomizationCommand.execute({ruleDefinitionName:e})}update(e){return this.httpClient.put(this.getUrl(e.name),e)}getUrl(e){return`/api/rx/application/rule/ruledefinition/${encodeURIComponent(e)}`}}v.\u0275fac=function(e){return new(e||v)(o["\u0275\u0275inject"](l.HttpClient),o["\u0275\u0275inject"](d.RxGuidService),o["\u0275\u0275inject"](n.RxCommandFactoryService))},v.\u0275prov=o["\u0275\u0275defineInjectable"]({token:v,factory:v.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ApplyGridFilterViewActionModule:()=>N,AssociateViewActionModule:()=>U,AvcAssociateActionModule:()=>X,CloseViewActionModule:()=>H,DeleteRecordsViewActionModule:()=>K,DisassociateViewActionModule:()=>Z,EditRecordsViewActionModule:()=>oe,LaunchProcessDesignerActionModule:()=>Fe,LaunchProcessViewActionModule:()=>le,LaunchUrlViewActionModule:()=>ue,OpenViewActionModule:()=>G,ProcessDesignerElementPickerModule:()=>Re,RX_OPEN_VIEW:()=>A,RefreshViewActionModule:()=>fe,RxApplyGridFilterActionName:()=>F,RxApplyGridFilterViewActionService:()=>M,RxAssociateViewActionService:()=>j,RxAvcAssociateActionService:()=>q,RxCloseViewActionService:()=>W,RxDeleteRecordsViewActionService:()=>Q,RxDisassociateViewActionService:()=>J,RxEditRecordsViewActionService:()=>ne,RxLaunchProcessDesignerActionService:()=>De,RxLaunchProcessViewActionService:()=>se,RxLaunchUrlViewActionService:()=>de,RxOpenViewActionService:()=>P,RxOpenViewModelHelperService:()=>$,RxProcessDesignerElementPickerComponent:()=>Ie,RxRefreshViewActionService:()=>me,RxSaveViewActionService:()=>he,RxSetPropertyViewActionService:()=>ve,RxUnknownViewActionDesignManager:()=>Te,RxUnknownViewActionService:()=>Me,SaveViewActionModule:()=>ge,SetPropertyViewActionModule:()=>Ce,UnknownViewActionModule:()=>Ne,ViewActionsDesignModule:()=>_e,ViewActionsModule:()=>Ae});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),s=i("rxjs"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),c=i("./node_modules/rxjs/_esm2015/operators/index.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),m=i("lodash"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),h=i("./node_modules/@angular/router/fesm2015/router.js"),g=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),y=i("./node_modules/@angular/common/fesm2015/common.js"),b=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),x=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),C=i("./node_modules/@angular/forms/fesm2015/forms.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),D=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");function I(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275element"](1,"adapt-rx-textarea",9),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.messages.label")),n["\u0275\u0275property"]("ngModel",e.data.details)}}function R(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275element"](1,"div",3),n["\u0275\u0275elementEnd"]())}const w=["dropdownButton"];function E(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",8),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().clearDefinition(t)}),n["\u0275\u0275elementEnd"]()}}const F="rxApplyGridFilterAction";class M{execute(e){return e.targetApi?e.targetApi.applyFilters?(e.targetApi.applyFilters(e.filters,e.mode),s.EMPTY):((0,s.throwError)(new a.RxError(`${F}: target component does not support applyFilters API.`)),s.EMPTY):(0,s.throwError)(new a.RxError("rxApplyGridFilterAction: component is not specified."))}}M.\u0275fac=function(e){return new(e||M)},M.\u0275prov=n["\u0275\u0275defineInjectable"]({token:M,factory:M.\u0275fac,providedIn:"root"});class T extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.viewDesignerFacade=this.injector.get(l.ViewDesignerFacade),this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxRecordGridDesignUtilsService=this.injector.get(p.RxRecordGridDesignUtilsService),this.rxRecordGridFilterSelectHelperService=this.injector.get(p.RxRecordGridFilterSelectHelperService),this.sandbox.children$.pipe((0,c.first)(),(0,c.withLatestFrom)(this.sandbox.actionProperties$.pipe((0,c.pluck)("filters"))),(0,c.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{const i=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(e);this.sandbox.updateActionProperties({filterValue:{basicFilters:i,filtersJson:t}})});this.sandbox.actionProperties$.pipe((0,c.pluck)("filterValue"),(0,c.distinctUntilChanged)()).pipe((0,c.skip)(1),(0,c.takeUntil)(this.sandbox.destroyed$)).subscribe(({filtersJson:e,basicFilters:t})=>{const i=this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(t);this.sandbox.setChildren(i),this.sandbox.updateActionProperties({filters:e})});const i=this.sandbox.actionProperties$.pipe((0,c.pluck)("mode"),(0,c.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,c.pluck)("targetApi"),(0,c.distinctUntilChanged)()).pipe((0,c.map)(T.extractGuidFromExpression));(0,s.merge)(n.pipe((0,c.skip)(1)),i.pipe((0,c.filter)(e=>e===o.ApplyGridFilterMode.Clear))).pipe((0,c.takeUntil)(this.sandbox.destroyed$)).subscribe(()=>{this.sandbox.updateActionProperties({filterValue:{basicFilters:null,filtersJson:null}})});const r=n.pipe((0,c.switchMap)(e=>e?this.viewDesignerFacade.getComponent(e):(0,s.of)(null)),(0,c.map)(e=>(null==e?void 0:e.type)===p.RX_RECORD_GRID.type?e.data:null)),a=r.pipe((0,c.map)(e=>{var t;return null!==(t=null==e?void 0:e.recordDefinitionName)&&void 0!==t?t:null}),(0,c.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e):(0,s.of)(null))),d=r.pipe((0,c.map)(e=>{var t;return null!==(t=null==e?void 0:e.columns)&&void 0!==t?t:[]})),m=a.pipe((0,c.withLatestFrom)(d),(0,c.map)(([e,t])=>{const i=t.filter(e=>e.filterable).map(e=>e.fieldId);return e?Object.assign(Object.assign({},e),{fieldDefinitions:e.fieldDefinitions.filter(e=>i.includes(String(e.id)))}):null})),f=d.pipe((0,c.map)(e=>this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(e)));(0,s.combineLatest)([m,i]).pipe((0,c.withLatestFrom)(f,d),(0,c.takeUntil)(this.sandbox.destroyed$)).subscribe(([[e,t],i,n])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,i,t,n))})}static getInitialProperties(e){return Object.assign({targetApi:null,mode:o.ApplyGridFilterMode.Append,filterValue:{filtersJson:null,basicFilters:null}},e)}getPropertiesByName(){return(0,m.omit)(super.getPropertiesByName(),"filterValue")}getActionEditorConfig(e,t,i,n){const a=new r.Tooltip("<b>Begin</b><p>Begin a batch of filter updates.</p><br><b>Append</b><p>Applied filters are added with the AND operator; existing filters for the specified fields are removed.</p><br><b>Remove</b><p>Existing filters are removed if they match the applied filters.</p><br><b>Overwrite</b><p>All existing filters are replaced with the applied filters.</p><br><b>Merge</b><p>Existing filters with a range of values are replaced with the matching applied filters; existing filters for the other fields are combined with the matching applied filters using the OR operator; applied filters for new fields are added with the AND operator.</p><br><b>Clear</b><p>All existing filters are removed.</p><br><b>End</b><p>Apply all pending filter updates executed in a batch.</p>");a.maxWidth=310;const s=[{name:"targetApi",component:d.ExpressionFormControlComponent,options:{label:"Record grid",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"mode",component:d.RadioFormControlComponent,options:{label:"Mode",tooltip:a,items:[{label:"Begin",value:o.ApplyGridFilterMode.Begin},{label:"Append",value:o.ApplyGridFilterMode.Append},{label:"Remove",value:o.ApplyGridFilterMode.Remove},{label:"Overwrite",value:o.ApplyGridFilterMode.Overwrite},{label:"Merge",value:o.ApplyGridFilterMode.Merge},{label:"Clear",value:o.ApplyGridFilterMode.Clear},{label:"End",value:o.ApplyGridFilterMode.End}]}}],l={name:"filterValue",component:p.RecordGridFilterSelectControlComponent,options:{primaryRecordDefinition:e,selectedFieldIds:n.map(e=>e.fieldId),namedFilterOptions:t,anchorDisabled:!e}},c={name:"emptyFilterMessage",component:d.ValidationFormControlComponent,options:{text:"Record grid expression required to define a filter.",messageType:d.MessageType.Error,customStyle:{"margin-top":"-1rem"}}};return(0,m.includes)([o.ApplyGridFilterMode.Begin,o.ApplyGridFilterMode.End,o.ApplyGridFilterMode.Clear],i)||(s.push(l),e||s.push(c)),s}static extractGuidFromExpression(e){var t;const i=null==e?void 0:e.match(/^\${view\.components\.([0-9a-z-]+)\.api}$/);return null!==(t=i&&i[1])&&void 0!==t?t:null}}class O{constructor(e,t){this.rxJsonParserService=e,this.rxRecordGridFilterHelperService=t}adaptDefinition({componentDefinitions:e,propertiesByName:t}){const i=e.map(e=>{let t=e.propertiesByName.value;const i=this.rxJsonParserService.tryParseJson(t);return i&&i[o.RecordGridNamedFilterOptionKey]&&(t=i),{guid:e.guid,fieldId:e.propertiesByName.fieldId,value:t}});t.filters=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(t.filters,i)}}O.\u0275fac=function(e){return new(e||O)(n["\u0275\u0275inject"](a.RxJsonParserService),n["\u0275\u0275inject"](p.RxRecordGridFilterHelperService))},O.\u0275prov=n["\u0275\u0275defineInjectable"]({token:O,factory:O.\u0275fac,providedIn:"root"});class N{constructor(e,t,i,n){this.rxViewActionRegistryService=e,this.rxApplyGridFilterViewActionService=t,this.rxApplyGridFilterViewActionDefinitionAdapterService=i,this.rxViewActionDefinitionAdapterRegistryService=n,this.rxViewActionRegistryService.register({name:F,label:"Apply grid filter",bundleId:r.RX_APPLICATION.platformBundleId,service:t,designModel:T,parameters:[{name:"targetApi",label:"Record grid",isRequired:!0,enableExpressionEvaluation:!0},{name:"mode",label:"Mode"},{name:"filters"}]}),n.registerRuntimeAdapter(F,this.rxApplyGridFilterViewActionDefinitionAdapterService)}}N.\u0275fac=function(e){return new(e||N)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](M),n["\u0275\u0275inject"](O),n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService))},N.\u0275mod=n["\u0275\u0275defineNgModule"]({type:N}),N.\u0275inj=n["\u0275\u0275defineInjector"]({});const A={actionName:"rxOpenViewAction",modalSize:o.OpenViewActionModalSize,type:o.OpenViewActionType,launchBehavior:o.OpenViewActionLaunchBehavior};class P{constructor(e,t,i,n,o){this.adaptDockedPanelService=e,this.adaptModalService=t,this.router=i,this.rxRuntimeViewUtilsService=n,this.rxViewActionUtilsService=o}execute(e){const t=(0,m.transform)(e.viewParams,(e,t,i)=>{e[i]=(0,m.isObject)(t)?JSON.stringify(t):String(null!=t?t:"")},{});return this.rxRuntimeViewUtilsService.isViewCancellable(e.viewDefinitionName).pipe((0,c.switchMap)(i=>{let n;const o={configuration:{viewDefinitionName:e.viewDefinitionName,inputParams:t,onRegisterApi(e){n=e}},title:e.presentation.title,notification:e.presentation.notification,isCancellable:i},r={beforeDismiss:e=>{const t=!Object.values(g.DismissReasons).includes(e);return t||e===g.DismissReasons.BACKDROP_CLICK&&!i||n.cancel().pipe((0,c.take)(1),(0,c.catchError)(e=>e?(0,s.throwError)(e):s.EMPTY)).subscribe(),t},blockKeyboard:!i,content:v.RuntimeViewModalComponent,size:e.presentation.modalSize,data:o};switch(e.presentation.type){case A.type.FullWidth:return this.openFullWidth(e.presentation.launchBehavior,e.viewDefinitionName,t);case A.type.CenteredModal:return this.adaptModalService.open(r);case A.type.DockedLeftModal:return this.adaptDockedPanelService.open((0,m.defaults)({direction:g.DockedPanelDirection.LEFT},r));case A.type.DockedRightModal:return this.adaptDockedPanelService.open((0,m.defaults)({direction:g.DockedPanelDirection.RIGHT},r));default:return this.openFullWidth(e.presentation.launchBehavior,e.viewDefinitionName,t)}}))}openFullWidth(e,t,i){const n=this.rxViewActionUtilsService.generateViewUrl(t,i);return e===A.launchBehavior.NewWindow?(window.open(`${window.location.pathname}#${n}`),(0,s.throwError)(null)):(0,s.from)(this.router.navigateByUrl(n)).pipe((0,c.switchMapTo)((0,s.throwError)(null)))}}P.\u0275fac=function(e){return new(e||P)(n["\u0275\u0275inject"](g.AdaptDockedPanelService),n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](h.Router),n["\u0275\u0275inject"](v.RxRuntimeViewUtilsService),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},P.\u0275prov=n["\u0275\u0275defineInjectable"]({token:P,factory:P.\u0275fac,providedIn:"root"});class j{constructor(e,t,i,n,o){this.rxAssociationInstanceService=e,this.rxOpenViewActionService=t,this.rxAssociationDefinitionService=i,this.rxLogService=n,this.rxViewActionUtilsService=o}execute(e){return e.associatedRecordId?(0,s.forkJoin)([this.getInstanceIds(e),this.rxAssociationDefinitionService.get(e.associationDefinitionName)]).pipe((0,c.switchMap)(([t,i])=>{let n=[],o=[];return t.length?(e.associationDefinitionRole===f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value?(n=t,o=[e.associatedRecordId]):e.associationDefinitionRole===f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value&&(n=[e.associatedRecordId],o=t),i.cardinality===f.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value?(n=n[0],o=o[0]):i.cardinality===f.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value&&(n=n[0]),this.rxAssociationInstanceService.associateRecords(e.associationDefinitionName,n,o,e.useDefaultRoles,e.nodeARole,e.nodeBRole).pipe((0,c.mapTo)(t))):(0,s.of)(t)})):(0,s.throwError)(new a.RxError("rxAssociateAction: Associated Record ID is not defined."))}getInstanceIds(e){return this.rxOpenViewActionService.execute({presentation:{modalSize:A.modalSize.Large,type:A.type.DockedRightModal},viewDefinitionName:e.viewDefinitionName,viewParams:null}).pipe((0,c.map)(e=>{const t=(0,m.flow)(e=>(0,m.map)(e,e=>this.rxViewActionUtilsService.extractRecordIds(e)),m.flatten,m.compact,m.uniq)(e);return this.rxLogService.debug(`RxAssociateAction: associating ${t.length} record(s)`),t}))}}j.\u0275fac=function(e){return new(e||j)(n["\u0275\u0275inject"](f.RxAssociationInstanceService),n["\u0275\u0275inject"](P),n["\u0275\u0275inject"](f.RxAssociationDefinitionService),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},j.\u0275prov=n["\u0275\u0275defineInjectable"]({token:j,factory:j.\u0275fac,providedIn:"root"});class _{constructor(){this.modalSizeMap={small:A.modalSize.Small,medium:A.modalSize.Medium,large:A.modalSize.Large}}adaptDefinition(e){const t=(0,m.get)(e,"propertiesByName",{});if(t.name===A.actionName){const e=t.presentation.modalSize;this.modalSizeMap[e]&&(t.presentation.modalSize=this.modalSizeMap[e])}}}_.\u0275fac=function(e){return new(e||_)},_.\u0275prov=n["\u0275\u0275defineInjectable"]({token:_,factory:_.\u0275fac,providedIn:"root"});const V=[{id:o.OpenViewActionModalSize.Xsmall,name:"Extra Small (450 px)"},{id:o.OpenViewActionModalSize.Small,name:"Small (650 px)"},{id:o.OpenViewActionModalSize.Medium,name:"Medium (800 px)"},{id:o.OpenViewActionModalSize.Large,name:"Large (1024 px)"},{id:o.OpenViewActionModalSize.Xlarge,name:"Extra Large (1200 px)"},{id:o.OpenViewActionModalSize.Xxlarge,name:"Extra Extra Large (1600 px)"},{id:o.OpenViewActionModalSize.FullSize,name:"Full Size"}],k=[{id:o.OpenViewActionType.FullWidth,name:"Full width"},{id:o.OpenViewActionType.CenteredModal,name:"Centered modal"},{id:o.OpenViewActionType.DockedLeftModal,name:"Docked left modal"},{id:o.OpenViewActionType.DockedRightModal,name:"Docked right modal"}],B=[{id:o.OpenViewActionLaunchBehavior.NewWindow,name:"Open in a new tab"},{id:o.OpenViewActionLaunchBehavior.SameWindow,name:"Open in the same tab"}];class ${getOpenViewInspector(e,t,i,n){const a=e.map(e=>({name:`viewParams.${e.name}`,component:d.ExpressionFormControlComponent,options:{label:e.name,dataDictionary$:n.getDataDictionary(e.name),operators:n.getOperators(e.name)}})),s=t===o.OpenViewActionType.FullWidth,l=t===o.OpenViewActionType.CenteredModal&&i===o.OpenViewActionModalSize.FullSize;return[{name:"viewDefinitionName",component:d.RxDefinitionPickerComponent,options:{label:"View",required:!0,definitionType:d.RxDefinitionPickerType.View}},...a,{name:"presentation.type",component:d.SelectFormControlComponent,options:{label:"Presentation",tooltip:new r.Tooltip("Select how to display the view in the application."),options:k,sortAlphabetically:!1}},...s?[{name:"presentation.launchBehavior",component:d.SelectFormControlComponent,options:{label:"Launch behavior",options:B,sortAlphabetically:!0}}]:[{name:"presentation.modalSize",component:d.SelectFormControlComponent,options:{label:"Size",options:t===o.OpenViewActionType.CenteredModal?V:V.filter(e=>e.id!==o.OpenViewActionModalSize.FullSize),sortAlphabetically:!1}},...l?[]:[{name:"presentation.title",component:d.TextFormControlComponent,options:{label:"Title"}}]]]}}$.\u0275fac=function(e){return new(e||$)},$.\u0275prov=n["\u0275\u0275defineInjectable"]({token:$,factory:$.\u0275fac,providedIn:"root"});class L extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.sandbox=t,this.rxViewDefinitionCacheService=this.injector.get(o.RxViewDefinitionCacheService),this.rxOpenViewModelHelperService=this.injector.get($);const i=this.sandbox.actionProperties$.pipe((0,c.pluck)("viewDefinitionName"),(0,c.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,c.pluck)("presentation.type"),(0,c.distinctUntilChanged)()),r=this.sandbox.actionProperties$.pipe((0,c.pluck)("presentation.modalSize"),(0,c.distinctUntilChanged)());(0,s.combineLatest)([i,n,r]).pipe((0,c.switchMap)(([e,t,i])=>this.getActionEditorConfig(e,t,i))).subscribe(e=>this.sandbox.setActionPropertyEditorConfig(e)),i.pipe((0,c.switchMap)(e=>this.getViewOutputParams(e))).subscribe(e=>{this.sandbox.setActionOutputDataDictionary(e.map(({name:e})=>({label:e,expression:this.getOutputExpressionForPropertyPath(e)})))}),n.pipe((0,c.skip)(1)).subscribe(e=>{let t=this.sandbox.getActionProperties();e===o.OpenViewActionType.FullWidth?(t["presentation.launchBehavior"]=o.OpenViewActionLaunchBehavior.SameWindow,t=(0,m.omit)(t,["presentation.modalSize","presentation.title"])):(t=(0,m.omit)(t,["presentation.launchBehavior"]),t["presentation.modalSize"]&&this.sandbox.getActionPropertyValue("presentation.modalSize")!==o.OpenViewActionModalSize.FullSize||(t["presentation.modalSize"]=o.OpenViewActionModalSize.Medium)),this.sandbox.setActionProperties(t)}),r.pipe((0,c.skip)(1)).subscribe(e=>{e===o.OpenViewActionModalSize.FullSize&&this.sandbox.setActionProperties((0,m.omit)(this.sandbox.getActionProperties(),["presentation.title"]))})}static getInitialProperties(e){return Object.assign({viewDefinitionName:null,"presentation.type":o.OpenViewActionType.FullWidth,"presentation.launchBehavior":o.OpenViewActionLaunchBehavior.SameWindow},e)}getActionEditorConfig(e,t,i){return this.getViewInputParams(e).pipe((0,c.map)(e=>this.rxOpenViewModelHelperService.getOpenViewInspector(e,t,i,this.expressionConfigurator)))}getViewInputParams(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,c.pluck)("inputParams")):(0,s.of)([])}getViewOutputParams(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,c.pluck)("outputParams")):(0,s.of)([])}}class G{constructor(e,t,i,n){this.rxViewActionDefinitionAdapterRegistryService=e,this.openViewDefinitionAdapterService=t,this.rxViewActionRegistryService=i,this.rxOpenViewActionService=n,this.rxViewActionRegistryService.register({name:A.actionName,label:"Open view",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxOpenViewActionService,designModel:L,parameters:[{name:"viewDefinitionName",label:"View",isRequired:!0},{name:"viewParams",enableExpressionEvaluation:!0},{name:"presentation",attributes:[{name:"title",localizable:!0}]}]}),e.registerRuntimeAdapter(A.actionName,this.openViewDefinitionAdapterService)}}G.\u0275fac=function(e){return new(e||G)(n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](_),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](P))},G.\u0275mod=n["\u0275\u0275defineNgModule"]({type:G,imports:[y.CommonModule,v.RuntimeViewModule,g.AdaptDockedPanelModule]}),G.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[y.CommonModule,v.RuntimeViewModule,g.AdaptDockedPanelModule]]});class z extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(r.RxDefinitionNameService),this.rxAssociationDefinitionService=this.injector.get(f.RxAssociationDefinitionService);const i=this.sandbox.actionProperties$.pipe((0,c.pluck)("recordDefinitionName"),(0,c.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,c.pluck)("associationDefinitionName"),(0,c.distinctUntilChanged)()),o=i.pipe((0,c.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,c.map)(t=>t[e].map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,s.of)([]))),a=n.pipe((0,c.switchMap)(e=>e?this.rxAssociationDefinitionService.get(e):(0,s.of)(null)),(0,c.shareReplay)(1)),l=a.pipe((0,c.map)(e=>!!e&&e.nodeAId===e.nodeBId)),d=a.pipe((0,c.map)(e=>!!e&&e.cardinality===f.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)),p=this.sandbox.actionProperties$.pipe((0,c.pluck)("useDefaultRoles"),(0,c.map)(Boolean),(0,c.distinctUntilChanged)());p.pipe((0,c.distinctUntilChanged)(),(0,c.skip)(1)).subscribe(e=>{e&&this.sandbox.setActionProperties((0,m.omit)(this.sandbox.getActionProperties(),["nodeARole","nodeBRole"]))});const h=a.pipe((0,c.map)(e=>e?[{id:f.RxAssociatedRecordNodeSide.NodeA,name:e.nodeAName||f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:f.RxAssociatedRecordNodeSide.NodeB,name:e.nodeBName||f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]));i.pipe((0,c.skip)(1)).subscribe(()=>{this.sandbox.updateActionProperties({associationDefinitionName:null,associationDefinitionRole:null})}),a.pipe((0,c.skip)(1),(0,c.withLatestFrom)(l,i)).subscribe(([e,t,i])=>{if(e&&!t){const t=i===e.nodeAId?f.RxAssociatedRecordNodeSide.NodeA:f.RxAssociatedRecordNodeSide.NodeB;this.sandbox.updateActionProperties({associationDefinitionRole:t})}else this.sandbox.updateActionProperties({associationDefinitionRole:null})}),(0,s.combineLatest)([i,o,h,p]).pipe((0,c.withLatestFrom)(l,d)).subscribe(([[e,t,i,n],o,r])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,t,i,o,r,n))})}static getInitialProperties(e){return Object.assign({recordDefinitionName:null,associationDefinitionName:null,associationDefinitionRole:null,associatedRecordId:null,viewDefinitionName:null},e)}getActionEditorConfig(e,t,i,n,o,r){return[{name:"recordDefinitionName",component:d.RxDefinitionPickerComponent,options:{label:"Record definition to associate",definitionType:d.RxDefinitionPickerType.StandardDataRecord,required:!0}},...e?[{name:"associationDefinitionName",component:d.SelectFormControlComponent,options:{label:"Association to use",options:t,required:!0}},{name:"associationDefinitionRole",component:d.SelectFormControlComponent,isDisabled:!n,options:{label:"Associated record node side",required:!0,options:i}},{name:"associatedRecordId",component:d.ExpressionFormControlComponent,options:{label:"Associated record ID",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"viewDefinitionName",component:d.RxDefinitionPickerComponent,options:{label:"View for selecting or creating associated records",required:!0,definitionType:d.RxDefinitionPickerType.View}},...o?[{name:"useDefaultRoles",component:d.SwitchFormControlComponent,options:{label:"Use default roles"}},...o&&r?[]:[{name:"nodeARole",component:d.ExpressionFormControlComponent,options:{label:"First record role",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"nodeBRole",component:d.ExpressionFormControlComponent,options:{label:"Second record role",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}}]]:[]]:[]]}}class U{constructor(e,t){this.rxViewActionRegistryService=e,this.rxAssociateViewActionService=t,this.rxViewActionRegistryService.register({name:"rxAssociateAction",label:"Associate records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxAssociateViewActionService,designModel:z,parameters:[{name:"recordDefinitionName",label:"Record definition to associate",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"associationDefinitionName",label:"Association to use",isRequired:!0},{name:"associationDefinitionRole",label:"Associated record node side",isRequired:!0},{name:"associatedRecordId",label:"Associated record ID",enableExpressionEvaluation:!0,isRequired:!0},{name:"viewDefinitionName",label:"View for selecting or creating associated records",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"useDefaultRoles"},{name:"nodeARole",enableExpressionEvaluation:!0},{name:"nodeBRole",enableExpressionEvaluation:!0}]})}}U.\u0275fac=function(e){return new(e||U)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](j))},U.\u0275mod=n["\u0275\u0275defineNgModule"]({type:U,imports:[G]}),U.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[G]]});class q{constructor(e,t,i,n){this.rxGuidService=e,this.rxOpenViewActionService=t,this.rxStringService=i,this.rxRecordInstanceUtilsService=n}execute(e){return this.rxOpenViewActionService.execute({viewDefinitionName:e.viewDefinitionName,viewParams:null,presentation:{modalSize:o.OpenViewActionModalSize.Large,type:o.OpenViewActionType.DockedRightModal}}).pipe((0,c.tap)(t=>{const i=(0,m.flow)(e=>(0,m.map)(e,e=>this.extractRecordInstance(e)),m.flatten,m.compact,m.uniq)(t);e.associationViewComponent.associate(i)}),(0,c.switchMapTo)(s.EMPTY))}extractRecordInstance(e){let t=[];if((0,m.isFunction)(e.getSelectedRows))t=(0,m.map)(e.getSelectedRows(),this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance);else if((0,m.isObject)(e)&&this.rxStringService.isNonEmptyString(e[o.RowDataItemIdFieldName]))t.push(this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance(e));else if((0,m.isArray)(e)&&(0,m.some)(e,m.isObject))t=(0,m.map)(e,this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance);else if((0,m.isObject)(e)&&(0,m.isObject)(e.fieldInstances)&&e.id)t.push(e);else if((0,m.isObject)(e)&&(0,m.isObject)(e.fieldInstances)&&!e.id){const i=this.rxGuidService.generate();e.id=i,e.fieldInstances[u.RX_RECORD_DEFINITION.coreFieldIds.id].value=i,e.isNewInstance=!0,t.push(e)}return t}}q.\u0275fac=function(e){return new(e||q)(n["\u0275\u0275inject"](a.RxGuidService),n["\u0275\u0275inject"](P),n["\u0275\u0275inject"](a.RxStringService),n["\u0275\u0275inject"](u.RxRecordInstanceUtilsService))},q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:q,factory:q.\u0275fac,providedIn:"root"});class X{constructor(e,t){this.rxViewActionRegistryService=e,this.rxAvcAssociateActionService=t,this.rxViewActionRegistryService.register({name:"rxAvcAssociate",label:"Avc associate",bundleId:r.RX_APPLICATION.platformBundleId,hidden:!0,service:this.rxAvcAssociateActionService,parameters:[{name:"viewDefinitionName"},{name:"associationViewComponent",enableExpressionEvaluation:!0}]})}}X.\u0275fac=function(e){return new(e||X)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](q))},X.\u0275mod=n["\u0275\u0275defineNgModule"]({type:X,imports:[y.CommonModule]}),X.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[y.CommonModule]]});class W{execute(e){return e.actAsCancel?e.viewApi.cancel():s.EMPTY.pipe((0,c.tap)({complete(){e.viewApi.close()}}))}}W.\u0275fac=function(e){return new(e||W)},W.\u0275prov=n["\u0275\u0275defineInjectable"]({token:W,factory:W.\u0275fac,providedIn:"root"});class H{constructor(e,t){this.rxViewActionRegistryService=e,this.rxCloseViewActionService=t,this.rxViewActionRegistryService.register({name:"rxCloseViewAction",label:"Close view",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxCloseViewActionService,parameters:[{name:"viewApi",enableExpressionEvaluation:!0,defaultValue:"${view.api}"},{name:"actAsCancel",label:"Act as cancel",editor:d.SwitchFormControlComponent,type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean}]})}}H.\u0275fac=function(e){return new(e||H)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](W))},H.\u0275mod=n["\u0275\u0275defineNgModule"]({type:H}),H.\u0275inj=n["\u0275\u0275defineInjector"]({});class Q{constructor(e,t,i,n,o,r,a){this.rxLogService=e,this.rxModalService=t,this.translateService=i,this.rxNotificationService=n,this.rxRecordInstanceService=o,this.rxViewActionUtilsService=r,this.rxStringService=a}execute(e){if((0,m.isEmpty)(e.recordDefinitionName)&&e.records&&(0,m.isFunction)(e.records.getRecordDefinitionName)&&(e.recordDefinitionName=e.records.getRecordDefinitionName()),this.rxStringService.isNonEmptyString(e.recordDefinitionName)){let t=[];e.records&&(t=(0,m.isFunction)(e.records.getSelectedRows)?(0,m.castArray)(e.records.getSelectedRows()):(0,m.castArray)(e.records));const i=this.rxViewActionUtilsService.extractRecordIds(t);if(i.length){const t=1===i.length?"com.bmc.arsys.rx.client.view-actions.delete-record.confirmation-dialog.message":"com.bmc.arsys.rx.client.view-actions.delete-records.confirmation-dialog.message";return(0,s.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:x.RX_MODAL.modalStyles.warning,message:this.translateService.instant(t,{count:i.length})})).pipe((0,c.switchMap)(t=>{if(t){const t=i.map(t=>this.rxRecordInstanceService.delete(e.recordDefinitionName,t));return(0,s.forkJoin)(t).pipe((0,c.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-actions.delete-records.records-deleted.message"))}),(0,c.switchMapTo)((0,m.isFunction)(e.records.refresh)?e.records.refresh():s.EMPTY))}return(0,s.throwError)(null)}))}return this.rxLogService.debug("rxDeleteRecordsAction: no records to delete."),s.EMPTY}return(0,s.throwError)(new a.RxError("rxDeleteRecordsAction: Record Definition Name is not defined."))}}Q.\u0275fac=function(e){return new(e||Q)(n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](x.RxModalService),n["\u0275\u0275inject"](b.TranslateService),n["\u0275\u0275inject"](r.RxNotificationService),n["\u0275\u0275inject"](u.RxRecordInstanceService),n["\u0275\u0275inject"](o.RxViewActionUtilsService),n["\u0275\u0275inject"](a.RxStringService))},Q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Q,factory:Q.\u0275fac,providedIn:"root"});class K{constructor(e,t){this.rxViewActionRegistryService=e,this.rxDeleteRecordsViewActionService=t,this.rxViewActionRegistryService.register({name:"rxDeleteRecordsAction",label:"Delete records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxDeleteRecordsViewActionService,parameters:[{name:"records",label:"Records",enableExpressionEvaluation:!0,isRequired:!0,editor:d.ExpressionFormControlComponent,tooltip:new r.Tooltip("Build an expression that evaluates to one of the following:<br>\n            1) Record grid<br>\n            2) A collection of record instances or<br>\n            3) A collection of record instance IDs. <br>For options 2 and 3, select a record definition in the field below.")},{name:"recordDefinitionName",label:"Record definition",type:o.ViewComponentPropertyType.String,editor:d.RxDefinitionPickerComponent,editorOptions:{definitionType:d.RxDefinitionPickerType.StandardDataRecord},defaultValue:null}]})}}K.\u0275fac=function(e){return new(e||K)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](Q))},K.\u0275mod=n["\u0275\u0275defineNgModule"]({type:K}),K.\u0275inj=n["\u0275\u0275defineInjector"]({});class J{constructor(e,t,i,n){this.rxLogService=e,this.rxViewActionUtilsService=t,this.rxAssociationDefinitionService=i,this.rxAssociationInstanceService=n}execute(e){if(!e.associatedRecordId)return(0,s.throwError)(new a.RxError("rxDisassociateAction: Associated Record ID is not defined."));const t=this.rxViewActionUtilsService.extractRecordIds(e.disassociatedRecordIds);return this.rxLogService.debug(`RxDisassociateAction: disassociating ${t.length} record(s)`),t.length?this.rxAssociationDefinitionService.get(e.associationDefinitionName).pipe((0,c.switchMap)(()=>{let i,n=[];return e.associationDefinitionRole===f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value?(i=t,n=[e.associatedRecordId]):e.associationDefinitionRole===f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value&&(i=[e.associatedRecordId],n=t),this.rxAssociationInstanceService.disassociateRecords(e.associationDefinitionName,i,n).pipe((0,c.mapTo)(t))})):(0,s.of)([])}}J.\u0275fac=function(e){return new(e||J)(n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](o.RxViewActionUtilsService),n["\u0275\u0275inject"](f.RxAssociationDefinitionService),n["\u0275\u0275inject"](f.RxAssociationInstanceService))},J.\u0275prov=n["\u0275\u0275defineInjectable"]({token:J,factory:J.\u0275fac,providedIn:"root"});class Y extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(r.RxDefinitionNameService),this.rxAssociationDefinitionService=this.injector.get(f.RxAssociationDefinitionService);const i=this.sandbox.actionProperties$.pipe((0,c.pluck)("recordDefinitionName"),(0,c.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,c.pluck)("associationDefinitionName"),(0,c.distinctUntilChanged)()),o=i.pipe((0,c.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,c.map)(t=>t[e].map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,s.of)([]))),a=n.pipe((0,c.switchMap)(e=>e?this.rxAssociationDefinitionService.get(e):(0,s.of)(null)),(0,c.shareReplay)(1)),l=a.pipe((0,c.map)(e=>!!e&&e.nodeAId===e.nodeBId)),d=a.pipe((0,c.map)(e=>e?[{id:f.RxAssociatedRecordNodeSide.NodeA,name:e.nodeAName||f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:f.RxAssociatedRecordNodeSide.NodeB,name:e.nodeBName||f.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]));i.pipe((0,c.skip)(1)).subscribe(()=>{this.sandbox.updateActionProperties({associationDefinitionName:null,associationDefinitionRole:null})}),a.pipe((0,c.skip)(1),(0,c.withLatestFrom)(l,i)).subscribe(([e,t,i])=>{if(e&&!t){const t=i===e.nodeAId?f.RxAssociatedRecordNodeSide.NodeA:f.RxAssociatedRecordNodeSide.NodeB;this.sandbox.updateActionProperties({associationDefinitionRole:t})}else this.sandbox.updateActionProperties({associationDefinitionRole:null})}),(0,s.combineLatest)([i,o,d]).pipe((0,c.withLatestFrom)(l)).subscribe(([[e,t,i],n])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,t,i,n))})}static getInitialProperties(e){return Object.assign({recordDefinitionName:null,associationDefinitionName:null,associationDefinitionRole:null,associatedRecordId:null,disassociatedRecordIds:null},e)}getActionEditorConfig(e,t,i,n){return[{name:"recordDefinitionName",component:d.RxDefinitionPickerComponent,options:{label:"Record definition to disassociate",definitionType:d.RxDefinitionPickerType.StandardDataRecord,required:!0}},...e?[{name:"associationDefinitionName",component:d.SelectFormControlComponent,options:{label:"Association to use",options:t,required:!0}},{name:"associationDefinitionRole",component:d.SelectFormControlComponent,isDisabled:!n,options:{label:"Associated record node side",required:!0,options:i}},{name:"associatedRecordId",component:d.ExpressionFormControlComponent,options:{label:"Associated record ID",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"disassociatedRecordIds",component:d.ExpressionFormControlComponent,options:{label:"Records to disassociate",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}}]:[]]}}class Z{constructor(e,t){this.rxViewActionRegistryService=e,this.rxDisassociateViewActionService=t,this.rxViewActionRegistryService.register({name:"rxDisassociateAction",label:"Disassociate records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxDisassociateViewActionService,designModel:Y,parameters:[{name:"recordDefinitionName",label:"Record definition to disassociate",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"associationDefinitionName",label:"Association to use",isRequired:!0},{name:"associationDefinitionRole",label:"Associated record node side",isRequired:!0},{name:"associatedRecordId",label:"Associated record ID",enableExpressionEvaluation:!0,isRequired:!0},{name:"disassociatedRecordIds",label:"Records to disassociate",enableExpressionEvaluation:!0,isRequired:!0}]})}}Z.\u0275fac=function(e){return new(e||Z)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](J))},Z.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Z}),Z.\u0275inj=n["\u0275\u0275defineInjector"]({});class ee{constructor(e){this.activeModelRef=e,this.data=this.activeModelRef.getData()}close(){this.activeModelRef.close()}hasActionResultDetails(e){return["warningCount","errorCount","infoCount","successCount"].some(t=>e.summary[t])}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275directiveInject"](g.ActiveModalRef))},ee.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ee,selectors:[["rx-edit-records-result-modal"]],decls:18,vars:19,consts:[[1,"modal-body"],[1,"mb-2"],[1,"mr-1","text-success-icon",3,"name"],[1,"mr-1","text-warning-icon",3,"name"],[1,"mr-1","text-danger-icon",3,"name"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"mt-2"],["readonly","","rows","15",1,"resize-none",3,"label","ngModel"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275element"](2,"adapt-icon",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",1),n["\u0275\u0275element"](6,"adapt-icon",3),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div"),n["\u0275\u0275element"](10,"adapt-icon",4),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](13,I,3,4,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",6),n["\u0275\u0275elementStart"](15,"button",7),n["\u0275\u0275listener"]("click",function(){return t.close()}),n["\u0275\u0275text"](16),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","check_circle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](4,11,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.updated-successfully.label"),": ",t.data.summary.successCount," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("name","exclamation_circle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](8,13,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.updated-with-warnings.label"),": ",t.data.summary.warningCount," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("name","exclamation_triangle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](12,15,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.update-failures.label"),": ",t.data.summary.errorCount," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.hasActionResultDetails(t.data)&&t.data.details),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](17,17,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[g.AdaptIconComponent,y.NgIf,g.AdaptRxTextareaComponent,C.NgControlStatus,C.NgModel],pipes:[b.TranslatePipe],styles:["[_nghost-%COMP%]     .resize-none{resize:none}"]});class te{constructor(e,t,i){this.adaptModalService=e,this.translateService=t,this.rxCommandFactoryService=i,this.resourceType="com.bmc.arsys.rx.application.record.command.UpdateRecordInstancesCommand",this.editRecordsCommand=this.rxCommandFactoryService.forResourceType(this.resourceType)}editRecords(e){return this.editRecordsCommand.execute(e)}showActionResults(e){return this.adaptModalService.open({size:"sm",title:this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.title"),data:e,content:ee}).catch(m.noop)}runAction(e,t){const i=this.prepareRecordData(e,t),n=new FormData;return n.append("commandInstance",JSON.stringify(i.commandInstance)),(0,m.forEach)(i.attachments,e=>{n.append(e.key,e.file)}),Object.keys(i||{}).map(e=>{"commandInstance"!==e&&"attachments"!==e&&n.append(e,JSON.stringify(i[e]))}),this.editRecords(n).pipe((0,c.map)(e=>this.prepareActionResults(e,i)),(0,c.switchMap)(e=>(0,s.from)(Promise.resolve(this.showActionResults(e)))))}cleanUnchangedFields(e){return(0,m.forIn)(e.fieldInstances,(t,i)=>{(0,m.isNull)(t.value)&&delete e.fieldInstances[i]})}prepareFiles(e,t){return(0,m.values)(e).filter(e=>(0,m.has)(e,"file")).map(e=>({key:t?t+"/"+e.id:e.id,file:e.file}))}cleanFiles(e){return Object.keys(e).map((t,i)=>{e[t].hasOwnProperty("file")?delete e[t]:delete e[t].file}),e}prepareAssociationInstancesForSaving(e){return(0,m.transform)(e,(e,t,i)=>{(0,m.forEach)(t,(t,n)=>{(0,m.isEmpty)(t.pending)||e.push({associationDefinitionName:i,recordInstanceIds:(0,m.map)(t.pending,"id"),nodeSide:n,resourceType:u.RX_RECORD_INSTANCE.association.operationResourceTypes.associate})})},[])}prepareRecordData(e,t){const i=(0,m.pick)(t,["resourceType","recordDefinitionName","fieldInstances"]);i.fieldInstances=this.cleanUnchangedFields(i);const n=this.prepareFiles(i.fieldInstances);i.fieldInstances=this.cleanFiles(i.fieldInstances);const o=this.prepareAssociationInstancesForSaving(t.associationInstances),r={shouldOverrideOptimisticLock:!1,commandInstance:{resourceType:"com.bmc.arsys.rx.application.record.command.UpdateRecordInstancesCommand"},recordInstanceIds:e,recordInstance:i,attachments:n};return(0,m.isEmpty)(o)||(r.associationOperations=o.map(e=>Object.assign(Object.assign({},e),{nodeSide:e.nodeSide.split(":")[0]}))),r}prepareActionResults(e,t){const i=t.recordInstanceIds.length,n=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.details.record-instance-id.label"),o={successCount:0,errorCount:0,warningCount:0,infoCount:0};let a;return(0,m.isEmpty)(e)?a="":(o.errorCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.error])).length,o.warningCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.warning])).length,o.infoCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.info])).length,o.successCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.success])).length,a=(0,m.map)(e,(e,t)=>n+": "+t+"\n"+(0,m.values)(e).map(this.convertMessageToString).join(", ")).join("\n\n")),o.successCount=i-o.errorCount-o.warningCount,{summary:o,details:a}}convertMessageToString(e){return`${e.messageType}: ${(0,m.values)([e.messageText,e.appendedText]).join(" ")}`}}te.\u0275fac=function(e){return new(e||te)(n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](b.TranslateService),n["\u0275\u0275inject"](r.RxCommandFactoryService))},te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:te,factory:te.\u0275fac,providedIn:"root"});class ie{constructor(e,t,i,n,o){this.rxGuidService=e,this.rxDefaultRecordEditorInputType=t,this.rxFieldDefinitionService=i,this.translateService=n,this.rxSystemConfigurationService=o}getViewDefinition(e,t){const i=this.rxGuidService.generate(),n=this.rxGuidService.generate(),r=this.rxGuidService.generate(),a=this.rxGuidService.generate(),s=this.rxGuidService.generate(),l=this.getComponentDefinitions(t,r);return{guid:s,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[r]}]},{name:"footer",height:60,columns:[{children:[n]}]}]}),outputParams:[{name:"recordInstance",source:"${view.components."+r+".recordInstance}"}],inputParams:[],componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:r,type:o.RxViewComponentType.RecordEditor,propertiesByName:{recordInstanceId:"null",mode:p.RecordEditorMode.BulkEdit,recordDefinitionName:e,styles:"p-0 border-0"},componentDefinitions:l,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:l.map(e=>e.guid)}]}]})},{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:n,type:o.RxViewComponentType.ButtonBar,propertiesByName:{alignment:"right",hidden:"0"},layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[a,i]}]}]}),componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:i,type:o.RxViewComponentType.ActionButton,propertiesByName:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.cancel.label"),style:"secondary",size:"default"},componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxCloseViewAction",actAsCancel:"true"}}]},{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:a,type:o.RxViewComponentType.ActionButton,propertiesByName:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),style:"primary",disabled:"NOT${view.components."+r+".canSave}",size:"default"},componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxCloseViewAction",actAsCancel:"false"}}]}]}]}}getComponentDefinitions(e,t){this.rxSystemConfigurationService.getConfigurationSync("Submitter-Mode")===r.RX_ADMINISTRATION.submitterModes.locked&&(e=e.filter(e=>Number(e.fieldId)!==u.RX_RECORD_DEFINITION.coreFieldIds.createdBy));const i=this.getFieldContainerComponentDefinitions(e,t);return[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Container,propertiesByName:{rowWrap:p.ContainerRowWrap.Sm,columnCount:"1"},componentDefinitions:i,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:i.map(e=>e.guid)}]}]})}]}getFieldContainerComponentDefinitions(e,t){return e.filter(e=>!this.rxFieldDefinitionService.isSystemField(e.fieldDefinition)).map(e=>{let i,n;const r=Boolean(e.associationDescriptor);r?(i=o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,n=o.RxViewComponentType.Association):(i=o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,n=this.rxDefaultRecordEditorInputType.getFieldTypeByFieldDefinition(e.fieldDefinition));const a={resourceType:i,guid:this.rxGuidService.generate(),type:n,propertiesByName:{fieldId:e.fieldDefinition.id,recordDefinition:"${view.components."+t+".recordDefinition}",recordInstance:"${view.components."+t+".recordInstance}",label:e.title,fieldOption:u.RX_RECORD_DEFINITION.fieldOptions.optional}};return r&&(a.componentDefinitions=[],(0,m.assign)(a.propertiesByName,{associatedRecordNodeSide:e.associationDescriptor.nodeSide,editingMode:p.RxAssociationEditingMode.Dropdown,associationDefinitionName:e.associationDescriptor.associationDefinition.name,recordDefinitionName:e.associationDescriptor.recordDefinitionName})),a}).reduce((e,t,i,n)=>(i%2==0&&e.push({resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Container,propertiesByName:{rowWrap:p.ContainerRowWrap.Sm,columnCount:"2"},componentDefinitions:n.slice(i,i+2),layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[t.guid],span:"6"},{children:n.length>i+1?[n[i+1].guid]:[],span:"6"}]}]})}),e),[])}}ie.\u0275fac=function(e){return new(e||ie)(n["\u0275\u0275inject"](a.RxGuidService),n["\u0275\u0275inject"](p.RxDefaultRecordEditorInputType),n["\u0275\u0275inject"](u.RxFieldDefinitionService),n["\u0275\u0275inject"](b.TranslateService),n["\u0275\u0275inject"](r.RxSystemConfigurationService))},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac,providedIn:"root"});class ne{constructor(e,t,i,n,o,r,a,s){this.rxEditRecordsViewBuilder=e,this.rxEditRecordsDataService=t,this.rxLogService=i,this.rxRecordGridUtilsService=n,this.translateService=o,this.rxDefinitionNameService=r,this.openViewAction=a,this.rxViewActionUtilsService=s}execute(e){let{recordDefinitionName:t}=e;if((0,m.isNil)(e.records))return(0,s.throwError)(new a.RxError("rxEditRecordsAction: no records to edit."));if((0,m.isEmpty)(t)&&(0,m.isFunction)(e.records.getRecordDefinitionName)&&(t=e.records.getRecordDefinitionName()),t){const i=this.rxViewActionUtilsService.extractRecordIds(e.records);if(i.length)return(0,s.from)(this.rxRecordGridUtilsService.getColumnDescriptors(t,e.records)).pipe((0,c.switchMap)(n=>{const o=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.view.title",{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(t)}),r=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.view.notification");return this.openViewAction.execute({presentation:{modalSize:A.modalSize.Large,title:o,notification:r,type:A.type.DockedRightModal},viewDefinitionName:this.rxEditRecordsViewBuilder.getViewDefinition(t,n),viewParams:null}).pipe((0,c.switchMap)(t=>t&&t.recordInstance?this.rxEditRecordsDataService.runAction(i,t.recordInstance).pipe((0,c.switchMap)(()=>(0,m.isFunction)(e.records.refresh)?e.records.refresh():s.EMPTY)):s.EMPTY))}));this.rxLogService.debug("rxEditRecordsAction: no records to edit.")}else this.rxLogService.error("rxEditRecordsAction: Record Definition Name is not defined.");return s.EMPTY}}ne.\u0275fac=function(e){return new(e||ne)(n["\u0275\u0275inject"](ie),n["\u0275\u0275inject"](te),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](p.RxRecordGridUtilsService),n["\u0275\u0275inject"](b.TranslateService),n["\u0275\u0275inject"](r.RxDefinitionNameService),n["\u0275\u0275inject"](P),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},ne.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ne,factory:ne.\u0275fac,providedIn:"root"});class oe{constructor(e,t){this.rxViewActionRegistryService=e,this.rxEditRecordsActionService=t,this.rxViewActionRegistryService.register({name:"rxEditRecordsAction",label:"Edit records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxEditRecordsActionService,parameters:[{name:"records",label:"Records",isRequired:!0,tooltip:new r.Tooltip("Build an expression that evaluates to one of the following:<br>\n            1) Record Grid;<br>\n            2) A collection of Record Instances, or<br>\n            3) A collection of Record Instance IDs. <br>For options 2 and 3, select a Record Definition in the field below."),enableExpressionEvaluation:!0,editor:d.ExpressionFormControlComponent},{name:"recordDefinitionName",label:"Record definition",type:o.ViewComponentPropertyType.String,editor:d.RxDefinitionPickerComponent,editorOptions:{definitionType:d.RxDefinitionPickerType.StandardDataRecord},defaultValue:null}]})}}oe.\u0275fac=function(e){return new(e||oe)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ne))},oe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oe,declarations:[ee],imports:[y.CommonModule,g.AdaptIconModule,b.TranslateModule,C.FormsModule,g.AdaptRxTextareaModule]}),oe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[y.CommonModule,g.AdaptIconModule,b.TranslateModule,C.FormsModule,g.AdaptRxTextareaModule]]});class re{constructor(e,t,i){this.rxProcessDefinitionService=e,this.rxViewActionRegistryService=t,this.rxViewExpressionValidatorService=i}validate(e,t){return e.processDefinitionName?this.rxProcessDefinitionService.get(e.processDefinitionName).pipe((0,c.switchMap)(i=>(0,s.combineLatest)([this.validateInputParams(e,t,i.inputParams),this.validateInputParamExpressions(e,t,i.inputParams)])),(0,c.map)(m.flatten)):(0,s.of)([])}validateInputParamExpressions(e,t,i){const n=this.rxViewActionRegistryService.get(e.name),o=i.filter(t=>e[`actionProcessInputParams.${t.name}`]).map(i=>this.rxViewExpressionValidatorService.validate(e[`actionProcessInputParams.${i.name}`],t,n.label).pipe((0,c.map)(e=>e.map(e=>Object.assign(Object.assign({},e),{description:`${n.label} action: ${e.description}`})))));return(0,s.combineLatest)(o).pipe((0,c.defaultIfEmpty)([]),(0,c.map)(m.flatten))}validateInputParams(e,t,i){const n=this.rxViewActionRegistryService.get(e.name),o=[];return(0,m.forEach)(i,i=>{const r=`actionProcessInputParams.${i.name}`;"REQUIRED"===i.fieldOption&&(0,m.isEmpty)(e[r])&&o.push({type:"error",description:`${n.label}: ${i.name} cannot be blank.`,propertyName:t})}),(0,s.of)(o)}}re.\u0275fac=function(e){return new(e||re)(n["\u0275\u0275inject"](S.RxProcessDefinitionService),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](l.RxViewExpressionValidatorService))},re.\u0275prov=n["\u0275\u0275defineInjectable"]({token:re,factory:re.\u0275fac});class ae extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxProcessDefinitionCacheService=this.injector.get(S.RxProcessDefinitionCacheService),this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.defaultProps={processDefinitionName:null,waitForProcessCompletion:!1};const i=this.sandbox.actionProperties$.pipe((0,c.pluck)("processDefinitionName"),(0,c.distinctUntilChanged)());i.pipe((0,c.skip)(1)).subscribe(e=>{this.sandbox.setActionProperties({processDefinitionName:e,waitForProcessCompletion:!1})}),i.pipe((0,c.switchMap)(e=>e?this.rxProcessDefinitionCacheService.getProcessDefinition(e):(0,s.of)(null))).subscribe(e=>this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e))),this.sandbox.actionProperties$.pipe((0,c.map)(e=>[e.processDefinitionName,e.waitForProcessCompletion]),(0,c.distinctUntilChanged)(m.isEqual),(0,c.switchMap)(([e,t])=>this.getActionOutputDataDictionary(e,t))).subscribe(e=>this.sandbox.setActionOutputDataDictionary(e))}static getInitialProperties(e){return Object.assign({processDefinitionName:null,waitForProcessCompletion:!1},e)}getActionEditorConfig(e){return[{name:"processDefinitionName",component:d.RxDefinitionPickerComponent,options:{label:"Process to start",definitionType:d.RxDefinitionPickerType.Process,required:!0}},{name:"waitForProcessCompletion",component:d.SwitchFormControlComponent,isDisabled:!e||!e.synchronous,options:{label:"Wait for process completion",tooltip:new r.Tooltip("If a process runs synchronously, it is possible to get output data from the process once the process completes. Enable Wait for completion in order to define an output map for the selected process.")}},...e?(0,m.map)(e.inputParams,e=>({name:`actionProcessInputParams.${e.name}`,component:d.ExpressionFormControlComponent,options:{label:e.name,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:"REQUIRED"===e.fieldOption}})):[]]}getActionOutputDataDictionary(e,t){return t?this.rxProcessDefinitionCacheService.getOutputParams(e).pipe((0,c.switchMap)(e=>(0,s.forkJoin)(e.map(e=>{let t;if(e.fieldTypeName===S.RX_PROCESS_DEFINITION.processVariableTypes.record){const i=e;t=this.rxRecordDefinitionCacheService.getRecordDefinition(i.recordDefinitionName).pipe((0,c.map)(e=>({label:i.name,expression:this.getOutputExpressionForPropertyPath(i.name),children:(0,m.map)(e.fieldDefinitions,e=>({label:e.name,expression:this.getOutputExpressionForPropertyPath(`${i.name}.${e.id}`)}))})))}else t=(0,s.of)({label:e.name,expression:this.getOutputExpressionForPropertyPath(e.name)});return t})))):(0,s.of)([])}}class se{constructor(e,t,i,n,o,r,a){this.rxJsonParserService=e,this.rxLogService=t,this.rxProcessDefinitionCacheService=i,this.rxRecordDefinitionCacheService=n,this.rxProcessInstanceCommandsService=o,this.rxProcessInstanceService=r,this.rxRecordInstanceService=a}execute(e){let t,i;return this.rxProcessInstanceCommandsService.start(e.processDefinitionName,e.actionProcessInputParams).pipe((0,c.switchMap)(i=>{if(e.waitForProcessCompletion){const n=i.headers.get("location");return t=n?(0,m.last)(n.split("/")):null,this.rxProcessDefinitionCacheService.getOutputParams(e.processDefinitionName)}return(0,s.of)(null)}),(0,c.switchMap)(n=>(0,m.isEmpty)(n)?(0,s.of)(null):(i=n.reduce((e,t)=>(e[t.name]=t,e),{}),this.rxProcessInstanceService.get(e.processDefinitionName,`${t}/processOutputVariables`))),(0,c.switchMap)(e=>{const t={};return(0,m.forEach)(e,(e,n)=>{if(i[n].fieldTypeName===S.RX_PROCESS_DEFINITION.processVariableTypes.record){const i=this.rxJsonParserService.tryParseJson(e);i&&i.recordDefinitionName&&i.id?t[n]=this.rxRecordInstanceService.get(i.recordDefinitionName,i.id).pipe((0,c.map)(e=>(0,m.reduce)(e.fieldInstances,(e,t)=>(e[t.id]=t.value,e),{}))):this.rxLogService.warning("rxLaunchProcessAction: unknown format for record instance as output data for process")}else t[n]=(0,s.of)(e)}),(0,s.forkJoin)(t)}))}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275inject"](a.RxJsonParserService),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](S.RxProcessDefinitionCacheService),n["\u0275\u0275inject"](u.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](S.RxProcessInstanceCommandsService),n["\u0275\u0275inject"](S.RxProcessInstanceService),n["\u0275\u0275inject"](u.RxRecordInstanceService))},se.\u0275prov=n["\u0275\u0275defineInjectable"]({token:se,factory:se.\u0275fac,providedIn:"root"});class le{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxLaunchProcessViewActionService=t,this.rxLaunchProcessViewActionDesignManagerService=i,this.rxViewActionRegistryService.register({name:"rxLaunchProcessAction",label:"Launch process",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchProcessViewActionService,designManager:this.rxLaunchProcessViewActionDesignManagerService,designModel:ae,parameters:[{name:"processDefinitionName",label:"Process to start",type:o.ViewComponentPropertyType.String,isRequired:!0},{name:"waitForProcessCompletion",type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean},{name:"actionProcessInputParams",label:"Input map",enableExpressionEvaluation:!0}]})}}le.\u0275fac=function(e){return new(e||le)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](se),n["\u0275\u0275inject"](re))},le.\u0275mod=n["\u0275\u0275defineNgModule"]({type:le}),le.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[re]});class de{execute(e){return e.url?(window.open(e.url,o.RX_LAUNCH_BEHAVIOR[e.launchBehavior].target),s.EMPTY):(0,s.throwError)(new a.RxError("rxLaunchUrlAction: URL is not specified."))}}de.\u0275fac=function(e){return new(e||de)},de.\u0275prov=n["\u0275\u0275defineInjectable"]({token:de,factory:de.\u0275fac,providedIn:"root"});class ce extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())}static getInitialProperties(e){return Object.assign({url:null,launchBehavior:o.RX_LAUNCH_BEHAVIOR.newWindow.value},e)}getActionEditorConfig(){return[{name:"url",component:d.ExpressionFormControlComponent,options:{label:"URL",isRequired:!0,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"launchBehavior",component:d.SelectFormControlComponent,options:{label:"Launch behavior",options:(0,m.map)(o.RX_LAUNCH_BEHAVIOR,e=>({name:e.content,id:e.value})),sortAlphabetically:!1}}]}}class pe{adaptDefinition(e){var t;const i=(0,m.get)(e,"propertiesByName",{});i.launchBehavior=null!==(t=i.launchBehavior)&&void 0!==t?t:o.RX_LAUNCH_BEHAVIOR.newWindow.value}}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:pe,factory:pe.\u0275fac,providedIn:"root"});class ue{constructor(e,t,i,n){this.rxViewActionDefinitionAdapterRegistryService=e,this.rxViewActionRegistryService=t,this.rxLaunchUrlViewActionService=i,this.rxLaunchUrlActionDefinitionAdapterService=n,this.rxViewActionRegistryService.register({name:"rxLaunchUrlAction",label:"Launch URL",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchUrlViewActionService,designModel:ce,parameters:[{name:"url",label:"URL",enableExpressionEvaluation:!0,isRequired:!0},{name:"launchBehavior",label:"Launch behavior"}]}),e.registerRuntimeAdapter("rxLaunchUrlAction",this.rxLaunchUrlActionDefinitionAdapterService)}}ue.\u0275fac=function(e){return new(e||ue)(n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](de),n["\u0275\u0275inject"](pe))},ue.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ue}),ue.\u0275inj=n["\u0275\u0275defineInjector"]({});class me{execute(e){return e.component?(0,m.isFunction)(e.component.refresh)?e.component.refresh():(0,s.throwError)(new a.RxError("rxRefreshAction: target component does not support refresh API.")):(0,s.throwError)(new a.RxError("rxRefreshAction: component is not specified."))}}me.\u0275fac=function(e){return new(e||me)},me.\u0275prov=n["\u0275\u0275defineInjectable"]({token:me,factory:me.\u0275fac,providedIn:"root"});class fe{constructor(e,t){this.rxViewActionRegistryService=e,this.rxRefreshViewActionService=t,this.rxViewActionRegistryService.register({name:"rxRefreshAction",label:"Refresh",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxRefreshViewActionService,parameters:[{name:"component",label:"View/Component",enableExpressionEvaluation:!0,isRequired:!0,editor:d.ExpressionFormControlComponent}]})}}fe.\u0275fac=function(e){return new(e||fe)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](me))},fe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:fe}),fe.\u0275inj=n["\u0275\u0275defineInjector"]({});class he{execute(e){if((0,m.isFunction)(e.targetApi.save)){const t=(0,m.isFunction)(e.viewApi.close)?s.EMPTY.pipe((0,c.tap)({complete(){e.viewApi.close()}})):(0,s.throwError)(new a.RxError("rxSaveAction: target view does not support close API."));return(0,s.concat)(e.targetApi.save(e.closeAfterSave),e.closeAfterSave?t:s.EMPTY)}return(0,s.throwError)(new a.RxError("rxSaveAction: target view/component does not support save API."))}}he.\u0275fac=function(e){return new(e||he)},he.\u0275prov=n["\u0275\u0275defineInjectable"]({token:he,factory:he.\u0275fac,providedIn:"root"});class ge{constructor(e,t){this.rxViewActionRegistryService=e,this.rxSaveViewActionService=t,this.rxViewActionRegistryService.register({name:"rxSaveAction",label:"Save",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxSaveViewActionService,parameters:[{name:"targetApi",label:"View/Component",editor:d.ExpressionFormControlComponent,isRequired:!0,enableExpressionEvaluation:!0},{name:"closeAfterSave",label:"Close after save",editor:d.SwitchFormControlComponent,type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean},{name:"viewApi",enableExpressionEvaluation:!0,defaultValue:"${view.api}"}]})}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](he))},ge.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ge}),ge.\u0275inj=n["\u0275\u0275defineInjector"]({});class ve{execute(e){let t=(0,s.throwError)(new a.RxError("rxSetPropertyAction: component is not specified."));if(e.componentApi&&(0,m.isFunction)(e.componentApi.setProperty)&&e.propertyPath){const i=e.propertyPath.match(/^\$\{view\.components\.[0-9a-z-]+\.(.+)}$/);i&&i[1]&&(t=e.componentApi.setProperty(i[1],e.propertyValue))}return(0,s.isObservable)(t)?t:s.EMPTY}}ve.\u0275fac=function(e){return new(e||ve)},ve.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ve,factory:ve.\u0275fac});class ye extends l.RxViewActionExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.configureForProperty({propertyPath:"propertyPath",dataDictionary$:e.get(l.RxViewDataDictionaryService).settablePropertiesDataDictionary$,operators:this.getOperatorRowsByGroup(r.ExpressionOperatorGroup.MathClient)})}}class be extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.expressionConfigurator=new ye(this.injector,this.sandbox.descriptor.name,this.guid),this.sandbox.actionProperties$.pipe((0,c.take)(1)).subscribe(()=>this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())),this.sandbox.actionProperties$.pipe((0,c.pluck)("propertyPath"),(0,c.distinctUntilChanged)()).subscribe(e=>{let t=null;if(e&&e.length){const i=e.match(/\${view\.components\.([0-9a-z-]+)\..+}/);i&&i[1]&&(t=`\${view.components.${i[1]}.api}`)}this.sandbox.updateActionProperties({componentApi:t})})}static getInitialProperties(e){return Object.assign({componentApi:null,propertyPath:null,propertyValue:null},e)}getActionEditorConfig(){return[{name:"propertyPath",component:d.ExpressionFormControlComponent,options:{label:"Property path",dataDictionary$:this.expressionConfigurator.getDataDictionary("propertyPath"),operators:this.expressionConfigurator.getOperators("propertyPath"),isRequired:!0}},{name:"propertyValue",component:d.ExpressionFormControlComponent,options:{label:"Property value",dataDictionary$:this.expressionConfigurator.getDataDictionary("propertyValue"),operators:this.expressionConfigurator.getOperators("propertyValue")}}]}}class xe{validate(e,t){return(0,s.of)(e.propertyPath&&!/\${view\.components\.([0-9a-z-]+)\..+}/.test(e.propertyPath)?[{type:"error",description:"Set property action: Property path is invalid.",propertyName:t}]:[])}}xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:xe,factory:xe.\u0275fac});class Ce{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxSetPropertyViewActionService=t,this.rxSetPropertyViewActionDesignManagerService=i,this.rxViewActionRegistryService.register({name:"rxSetPropertyAction",label:"Set property",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxSetPropertyViewActionService,designModel:be,designManager:i,parameters:[{name:"componentApi",label:"Component API",enableExpressionEvaluation:!0},{name:"propertyPath",label:"Property path",isRequired:!0},{name:"propertyValue",enableExpressionEvaluation:!0}]})}}Ce.\u0275fac=function(e){return new(e||Ce)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ve),n["\u0275\u0275inject"](xe))},Ce.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ce}),Ce.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ve,xe]});class Se{constructor(e,t,i,n,o,r,a){this.rxApplicationLoaderService=e,this.rxBundleCacheService=t,this.rxJsonParserService=i,this.rxProcessDefinitionCacheService=n,this.domSanitizer=o,this.activeModalRef=r,this.rxUtilityModalsService=a,this.isProcessDesignerLoadingInProgress=!0,this.isDefinitionDirty=!1,this.context=r;const s=this.context.getData();localStorage.setItem("ProcessDesignerPaletteElements",s.paletteElements),this.iframeSrc=this.domSanitizer.bypassSecurityTrustResourceUrl(`/com.bmc.arsys.rx.innovationstudio/index.html#/app/bundle/${this.rxBundleCacheService.bundleId}/iprocess/${s.processDefinitionName?s.processDefinitionName:""}`)}onMessage(e){if(e.data){const t=this.rxJsonParserService.tryParseJson(e.data);if(t)switch(t.messageType){case r.RX_DESIGNER.messageTypes.designerLoaded:this.isProcessDesignerLoadingInProgress=!1;break;case r.RX_DESIGNER.messageTypes.afterSave:this.isDefinitionDirty=!1;break;case r.RX_DESIGNER.messageTypes.definitionStatusChanged:this.isDefinitionDirty=t.payload.isDirty;break;case r.RX_DESIGNER.messageTypes.closeDesigner:t.payload.processDefinitionName?this.isDefinitionDirty?this.rxUtilityModalsService.confirmUnsavedChanges().then(e=>{e&&this.closeProcessDesigner(t.payload.processDefinitionName)}):this.closeProcessDesigner(t.payload.processDefinitionName):this.isDefinitionDirty?this.rxUtilityModalsService.confirmUnsavedChanges().then(e=>{e&&this.context.dismiss(g.DismissReasons.CLOSE_BTN)}):this.context.dismiss(g.DismissReasons.CLOSE_BTN)}}}closeProcessDesigner(e){this.rxProcessDefinitionCacheService.clearCache([e]),this.context.close({processDefinitionName:e})}}Se.\u0275fac=function(e){return new(e||Se)(n["\u0275\u0275directiveInject"](r.RxApplicationLoaderService),n["\u0275\u0275directiveInject"](r.RxBundleCacheService),n["\u0275\u0275directiveInject"](a.RxJsonParserService),n["\u0275\u0275directiveInject"](S.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](D.DomSanitizer),n["\u0275\u0275directiveInject"](g.ActiveModalRef),n["\u0275\u0275directiveInject"](x.RxUtilityModalsService))},Se.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Se,selectors:[["rx-process-designer-frame"]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("message",function(e){return t.onMessage(e)},!1,n["\u0275\u0275resolveWindow"])},decls:2,vars:2,consts:[["id","rx-application-loader-container","class","position-absolute w-100",4,"ngIf"],[1,"h-100",3,"src"],["id","rx-application-loader-container",1,"position-absolute","w-100"],[1,"rx-application-loader"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,R,2,0,"div",0),n["\u0275\u0275element"](1,"iframe",1)),2&e&&(n["\u0275\u0275property"]("ngIf",t.isProcessDesignerLoadingInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("src",t.iframeSrc,n["\u0275\u0275sanitizeResourceUrl"]))},directives:[y.NgIf],styles:["[_nghost-%COMP%]{height:100vh}"]});class De{constructor(e,t){this.adaptModalService=e,this.rxProcessDefinitionCacheService=t}execute(e){return e.processDefinitionName?this.rxProcessDefinitionCacheService.getProcessDefinition(e.processDefinitionName).pipe((0,c.switchMap)(()=>this.openModal(e))):(0,s.defer)(()=>(0,s.from)(this.openModal(e)))}openModal(e){return this.adaptModalService.open({content:Se,size:o.OpenViewActionModalSize.FullSize,data:e})}}De.\u0275fac=function(e){return new(e||De)(n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](S.RxProcessDefinitionCacheService))},De.\u0275prov=n["\u0275\u0275defineInjectable"]({token:De,factory:De.\u0275fac,providedIn:"root"});class Ie extends d.ValueAccessor{constructor(e,t,i,n,o){super(),this.rxDesignerStencilBuilder=e,this.rxJsonParserService=t,this.rxProcessElementsService=i,this.renderer=n,this.translateService=o,this.selection=[],this.destroyed$=new s.ReplaySubject(1)}ngOnInit(){const e=this.innerValue;this.selectedPaletteElements="*"===e?"*":this.rxJsonParserService.tryParseJson(e,null),this.rxDesignerStencilBuilder.buildElementsTree(this.rxProcessElementsService.getProcessElements(),S.RX_PROCESS_DEFINITION.standardProcessElementGroups).pipe((0,c.take)(1)).subscribe(e=>{(0,m.forEach)(e,e=>{var t;e.expanded=!0,e.allChildElementsSelected=!0,(null===(t=this.selectedPaletteElements)||void 0===t?void 0:t.length)&&((0,m.forEach)(e.children,t=>{"*"===this.selectedPaletteElements||(0,m.some)(this.selectedPaletteElements,e=>(0,m.isEqual)(e,t.value))?this.selection.push(t):e.allChildElementsSelected=!1}),e.allChildElementsSelected&&this.selection.push(e))}),this.processElementsTree=[{label:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.all-elements.label"),expanded:!0,children:e}],this.stencilElements=(0,m.flatten)((0,m.map)(e,"children")),"*"===this.selectedPaletteElements&&(this.selection.push(...this.processElementsTree),this.selectedPaletteElements=(0,m.map)(this.stencilElements,"value")),this.updatePickerFakeInputValue()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onSelectionChange(){this.selectedPaletteElements=this.selection.filter(e=>!e.children).map(e=>e.value),0===this.selectedPaletteElements.length?(this.selectedPaletteElements=null,this.value=null):this.stencilElements.length===this.selectedPaletteElements.length?this.value="*":this.value=JSON.stringify(this.selectedPaletteElements),this.updatePickerFakeInputValue()}updatePickerFakeInputValue(){(0,m.isEmpty)(this.selectedPaletteElements)?this.selectedPaletteElementsByLabel="":this.stencilElements.length===this.selectedPaletteElements.length?this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"):1===this.selectedPaletteElements.length?this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.process-designer.one-element-selected.label"):this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.process-designer.many-elements-selected.label",{count:this.selectedPaletteElements.length})}clearDefinition(e){e.stopPropagation(),this.selection=[],this.selectedPaletteElements=null,this.selectedPaletteElementsByLabel="",this.value=null}setDropdownWidth(){setTimeout(()=>{const e=this.renderer.selectRootElement(this.dropdownButton.nativeElement,!0);this.dropdownWidth=Math.max(e.clientWidth)+2})}}Ie.\u0275fac=function(e){return new(e||Ie)(n["\u0275\u0275directiveInject"](r.RxDesignerStencilBuilder),n["\u0275\u0275directiveInject"](a.RxJsonParserService),n["\u0275\u0275directiveInject"](S.RxProcessElementsService),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](b.TranslateService))},Ie.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ie,selectors:[["rx-process-designer-element-picker"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](w,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.dropdownButton=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:C.NG_VALUE_ACCESSOR,useExisting:Ie,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:8,consts:[[3,"label"],["adaptDropdown","","appendToBody","true","autoClose","outside","placement","bottom-left",1,"dropdown",3,"onOpen"],["adaptDropdownToggle","","rx-id","toggle-button","type","button",1,"btn","btn-secondary","d-flex","text-center","w-100"],["dropdownButton",""],[1,"rx-selected-item","text-left","flex-grow-1"],["rx-id","clear-button","class","d-icon-cross_adapt btn-link",3,"click",4,"ngIf"],["adaptDropdownMenu","",1,"dropdown-menu","px-3"],[3,"value","selectionMode","selection","selectionChange"],["rx-id","clear-button",1,"d-icon-cross_adapt","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-control-label",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275listener"]("onOpen",function(){return t.setDropdownWidth()}),n["\u0275\u0275elementStart"](2,"button",2,3),n["\u0275\u0275elementStart"](4,"span",4),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,E,1,0,"span",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",6),n["\u0275\u0275elementStart"](8,"adapt-tree",7),n["\u0275\u0275listener"]("selectionChange",function(e){return t.selection=e})("selectionChange",function(){return t.onSelectionChange()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("label",t.options.label),n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](t.selectedPaletteElementsByLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.value),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("width",t.dropdownWidth,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",t.processElementsTree)("selectionMode","checkbox")("selection",t.selection))},directives:[g.AdaptRxControlLabelComponent,g.AdaptDropdownDirective,g.AdaptDropdownToggleDirective,y.NgIf,g.AdaptDropdownMenuDirective,g.AdaptTreeComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-item[_ngcontent-%COMP%]{min-height:20px}span[rx-id=clear-button][_ngcontent-%COMP%]{cursor:pointer;margin-right:5px}span[rx-id=clear-button][_ngcontent-%COMP%]:not(:hover){color:#313538}.dropdown-menu[_ngcontent-%COMP%]{height:400px}']});class Re{}Re.\u0275fac=function(e){return new(e||Re)},Re.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Re,declarations:[Ie],imports:[y.CommonModule,C.FormsModule,g.AdaptRxCheckboxModule,g.AdaptDropdownModule,g.AdaptRxLabelModule,g.AdaptTreeModule],exports:[Ie]}),Re.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[y.CommonModule,C.FormsModule,g.AdaptRxCheckboxModule,g.AdaptDropdownModule.forRoot(),g.AdaptRxLabelModule,g.AdaptTreeModule]]});class we extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.sandbox=t,this.translateService=this.injector.get(b.TranslateService),this.sandbox.actionProperties$.pipe((0,c.take)(1)).subscribe(()=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig()),this.sandbox.setActionOutputDataDictionary([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.process-definition-name.label"),expression:this.getOutputExpressionForPropertyPath("processDefinitionName")}])})}static getInitialProperties(e){return Object.assign({processDefinitionName:null,paletteElements:null},e)}getActionEditorConfig(){return[{name:"processDefinitionName",component:d.DefinitionPickerOrExpressionFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.process-definition-name.label"),definitionType:d.RxDefinitionPickerType.Process,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"paletteElements",component:Ie,options:{label:"Available palette elements"}}]}}class Ee{constructor(e){this.rxDefaultExpressionEvaluatorService=e}evaluate(e,t){let i=e;return u.RX_RECORD_DEFINITION.validFullDefinitionName.test(e)||(i=this.rxDefaultExpressionEvaluatorService.evaluate(e,t)),i}parseExpression(e){let t;return u.RX_RECORD_DEFINITION.validFullDefinitionName.test(e)||(t=this.rxDefaultExpressionEvaluatorService.parseExpression(e)),t}}Ee.\u0275fac=function(e){return new(e||Ee)(n["\u0275\u0275inject"](o.RxDefaultExpressionEvaluatorService))},Ee.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ee,factory:Ee.\u0275fac});class Fe{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxLaunchProcessDesignerActionService=t,this.rxLaunchProcessDesignerExpressionActionEvaluatorService=i,this.rxViewActionRegistryService.register({name:"rxLaunchProcessDesignerAction",label:"Launch process designer",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchProcessDesignerActionService,designModel:we,parameters:[{name:"processDefinitionName",label:"Process definition name",type:o.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxLaunchProcessDesignerExpressionActionEvaluatorService},{name:"paletteElements",label:"Available palette elements",type:o.ViewComponentPropertyType.String}]})}}Fe.\u0275fac=function(e){return new(e||Fe)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](De),n["\u0275\u0275inject"](Ee))},Fe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Fe,declarations:[Se],imports:[y.CommonModule,S.RxProcessApiModule,d.RxIframeModule]}),Fe.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Ee],imports:[[y.CommonModule,S.RxProcessApiModule,d.RxIframeModule]]});class Me{execute(){return s.EMPTY}}Me.\u0275fac=function(e){return new(e||Me)},Me.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Me,factory:Me.\u0275fac});class Te{validate(e,t){return(0,s.of)([{type:"error",description:`Unknown action: ${e.name}`,propertyName:t}])}}Te.\u0275fac=function(e){return new(e||Te)},Te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Te,factory:Te.\u0275fac});class Oe extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.sandbox.actionProperties$.pipe((0,c.take)(1)).subscribe(e=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e))})}getActionEditorConfig(e){return(0,m.keys)(e).map(e=>({name:e,component:d.TextFormControlComponent,isDisabled:!0,options:{label:e}}))}}class Ne{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxUnknownViewActionService=t,this.rxUnknownViewActionDesignManager=i,this.rxViewActionRegistryService.register({name:"rxUnknownViewAction",label:"Unknown",bundleId:r.RX_APPLICATION.platformBundleId,designModel:Oe,designManager:this.rxUnknownViewActionDesignManager,service:this.rxUnknownViewActionService,parameters:[],hidden:!0})}}Ne.\u0275fac=function(e){return new(e||Ne)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](Me),n["\u0275\u0275inject"](Te))},Ne.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ne}),Ne.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Me,Te]});class Ae{}Ae.\u0275fac=function(e){return new(e||Ae)},Ae.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ae,imports:[N,U,X,H,K,Z,oe,le,Fe,ue,G,fe,ge,Ce,Ne]}),Ae.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[N,U,X,H,K,Z,oe,le,Fe,ue,G,fe,ge,Ce,Ne]]});class Pe{constructor(e,t,i){this.viewDesignerFacade=e,this.rxRecordGridDesignUtilsService=t,this.rxRecordGridFilterHelperService=i;const n=this.viewDesignerFacade.getComponentsByType(o.RxViewComponentType.Action).pipe((0,c.map)(e=>e.filter(e=>e.data.name===F)),(0,c.shareReplay)({refCount:!0,bufferSize:1})),r=n.pipe((0,c.map)(e=>e.map(e=>T.extractGuidFromExpression(e.data.targetApi))),(0,c.map)(e=>(0,m.sortBy)((0,m.uniq)((0,m.compact)(e)))),(0,c.filter)(e=>Boolean(e.length)),(0,c.distinctUntilChanged)((e,t)=>(0,m.isEqual)(e,t)),(0,c.shareReplay)({refCount:!0,bufferSize:1})),a=r.pipe((0,c.switchMap)(e=>{const t=e.map(e=>this.getActionsToUpdate(e,n));return(0,s.merge)(...t)})),l=r.pipe((0,c.switchMap)(e=>{const t=e.map(e=>this.getGridDefinitionChanges(e).pipe((0,c.skip)(1),(0,c.map)(()=>e),(0,c.withLatestFrom)(n),(0,c.map)(([e,t])=>t.filter(t=>t.data.targetApi.includes(e)).map(e=>{const t=(0,m.cloneDeep)(e);return t.data.filters=null,{component:t,children:[]}}))));return(0,s.merge)(...t)}));(0,s.merge)(l,a).subscribe(e=>{e.forEach(e=>{this.viewDesignerFacade.updateComponentProperties(e.component.guid,e.component.data),this.viewDesignerFacade.setChildren(e.component.guid,e.children)})})}getActionsToUpdate(e,t){return this.getGridColumnChanges(e).pipe((0,c.skip)(1),(0,c.withLatestFrom)(t),(0,c.switchMap)(([e,t])=>{const i=t.filter(t=>t.data.targetApi.includes(e.guid)).map(e=>this.viewDesignerFacade.getChildComponents(e.guid).pipe((0,c.map)(t=>Object.assign(Object.assign({},(0,m.cloneDeep)(e)),{children:t})),(0,c.take)(1)));return(0,s.forkJoin)(i).pipe((0,c.map)(t=>{const i=e.columns.map(e=>e.fieldId);return t.reduce((e,t)=>{const n=this.getUpdatedFilterComponents((0,m.omit)(t,"children"),t.children,i);return n?e.concat(n):e},[])}))}))}getGridColumnChanges(e){return this.viewDesignerFacade.getComponentPropertyValue(e,"columns").pipe((0,c.filter)(e=>Array.isArray(e)),(0,c.map)(t=>({guid:e,columns:t.map(e=>({fieldId:e.fieldId,namedFilterOptions:e.namedFilterOptions}))})),(0,c.distinctUntilChanged)(m.isEqual))}getGridDefinitionChanges(e){return this.viewDesignerFacade.getComponentPropertyValue(e,"recordDefinitionName").pipe((0,c.distinctUntilChanged)())}getUpdatedFilterComponents(e,t,i){const n=t.filter(e=>i.includes(e.data.fieldId));if(n.length!==t.length){const t=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(n),i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.data.filters,t);return e.data.filters=i?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(i),t):null,{component:e,children:n}}return null}validate(e,t){const i=e.filters||(0,m.includes)([o.ApplyGridFilterMode.Begin,o.ApplyGridFilterMode.End,o.ApplyGridFilterMode.Clear],e.mode)?null:{type:"error",description:"Apply grid filter action: Filter is required",propertyName:t};return(0,s.of)(e.targetApi).pipe((0,c.map)(e=>T.extractGuidFromExpression(e)),(0,c.switchMap)(e=>e?this.viewDesignerFacade.getComponent(e):(0,s.of)(null)),(0,c.take)(1),(0,c.map)(n=>{const o=[];return e.targetApi&&(null==n?void 0:n.type)!==p.RX_RECORD_GRID.type&&o.push({type:"error",description:"Apply grid filter action: Record grid expression must point to a record grid.",propertyName:t}),e.targetApi&&!o.length&&i&&o.push(i),o}))}}Pe.\u0275fac=function(e){return new(e||Pe)(n["\u0275\u0275inject"](l.ViewDesignerFacade),n["\u0275\u0275inject"](p.RxRecordGridDesignUtilsService),n["\u0275\u0275inject"](p.RxRecordGridFilterHelperService))},Pe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Pe,factory:Pe.\u0275fac});class je{constructor(e,t){this.rxViewActionRegistryService=e,this.rxApplyGridFilterViewActionDesignManagerService=t,this.rxViewActionRegistryService.registerDesignManager(F,t)}}je.\u0275fac=function(e){return new(e||je)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](Pe))},je.\u0275mod=n["\u0275\u0275defineNgModule"]({type:je}),je.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Pe]});class _e{}_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_e,imports:[Ae,je]}),_e.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ae,je]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionButtonComponent:()=>Ds,ActionButtonDesignComponent:()=>xs,ActionButtonDesignModule:()=>Ss,ActionButtonIconAlignment:()=>gs,ActionButtonModule:()=>Is,ActionButtonSize:()=>hs,ActionButtonStyle:()=>ms,AssociationDesignModule:()=>El,AssociationManagerFactory:()=>dl,AssociationModule:()=>vl,AssociationRegistrationModule:()=>Ol,AttachmentFieldComponent:()=>kl,AttachmentFieldDesignComponent:()=>Pl,AttachmentFieldDesignModule:()=>jl,AttachmentFieldModule:()=>$l,AttachmentFieldRegistrationModule:()=>Ll,BaseRecordEditorFieldComponent:()=>_l,BaseRecordEditorFieldDesign:()=>Nl,BooleanFieldComponent:()=>Wl,BooleanFieldDesignComponent:()=>ql,BooleanFieldDesignModule:()=>Xl,BooleanFieldModule:()=>Hl,BooleanFieldRegistrationModule:()=>Ql,ButtonBarComponent:()=>Ms,ButtonBarDesignComponent:()=>Ns,ButtonBarDesignModel:()=>Os,ButtonBarDesignModule:()=>As,ButtonBarModule:()=>Ts,ChatbotUserMappingComponent:()=>sm,ChatbotUserMappingRegistrationModule:()=>lm,ColumnSortDirection:()=>Vc,ContainerComponent:()=>Ps,ContainerDesignComponent:()=>Gs,ContainerDesignModule:()=>zs,ContainerModule:()=>_s,ContainerRowWrap:()=>ks,DateFieldComponent:()=>ed,DateFieldDesignComponent:()=>Jl,DateFieldDesignModule:()=>Yl,DateFieldModule:()=>td,DateFieldRegistrationModule:()=>id,DateTimeFieldComponent:()=>sd,DateTimeFieldDesignComponent:()=>od,DateTimeFieldDesignModule:()=>rd,DateTimeFieldModule:()=>ld,DateTimeFieldRegistrationModule:()=>dd,DecimalFieldComponent:()=>fd,DecimalFieldDesignComponent:()=>pd,DecimalFieldDesignModule:()=>ud,DecimalFieldModule:()=>hd,DecimalFieldRegistrationModule:()=>gd,DeprecatedActionButtonStyle:()=>fs,ExtensionContainerDesignComponent:()=>gc,ExtensionContainerDesignModule:()=>vc,ExtensionContainerRegistrationModule:()=>yc,ExtensionContainerSectionComponent:()=>pc,FieldComponentsModule:()=>Oc,GainsightAdminOptInRegistrationModule:()=>jm,IframeLoginEventComponent:()=>cm,IframeLoginEventRegistrationModule:()=>pm,ImageComponent:()=>$u,ImageDesignComponent:()=>ju,ImageDesignModule:()=>_u,ImageModule:()=>Lu,IntegerFieldComponent:()=>md,IntegerFieldDesignComponent:()=>yd,IntegerFieldDesignModule:()=>bd,IntegerFieldModule:()=>xd,IntegerFieldRegistrationModule:()=>Cd,LocalizedCharacterFieldComponent:()=>Rc,LocalizedCharacterFieldRegistrationModule:()=>Tc,PageComponent:()=>Kp,PageComponentDefinitionAdapterService:()=>Au,PageDesignComponent:()=>Ou,PageDesignModule:()=>Nu,PageModule:()=>Pu,RECORD_EDITOR:()=>Us,RX_ASSOCIATION:()=>ul,RX_BASE_FIELD_PROPERTIES:()=>Fl,RX_RECORD_GRID:()=>jc,RX_RECORD_GRID_DESIGN:()=>Qc,RecordEditorComponent:()=>sl,RecordEditorDesignComponent:()=>Ys,RecordEditorDesignModule:()=>el,RecordEditorMode:()=>qs,RecordEditorModule:()=>cl,RecordEditorState:()=>Xs,RecordGridColumnAlignment:()=>Ac,RecordGridColumnEditorControlComponent:()=>ep,RecordGridColumnEditorModalComponent:()=>Zc,RecordGridComponent:()=>ou,RecordGridDesignComponent:()=>zp,RecordGridDesignDefinitionMode:()=>np,RecordGridDesignModule:()=>Qp,RecordGridFilterMode:()=>ip,RecordGridFilterSelectControlComponent:()=>xp,RecordGridFilterSelectControlModule:()=>Op,RecordGridModule:()=>su,RichTextComponent:()=>lu,RichTextDesignComponent:()=>fu,RichTextDesignModule:()=>gu,RichTextModule:()=>pu,RichTextareaFieldComponent:()=>Sc,RichTextareaFieldDesignComponent:()=>xc,RichTextareaFieldDesignModule:()=>Cc,RichTextareaFieldModule:()=>Dc,RichTextareaFieldRegistrationModule:()=>Ic,RowSelectionMode:()=>op,RxAssociationComponent:()=>hl,RxAssociationDesignComponent:()=>Rl,RxAssociationEditingMode:()=>ml,RxAssociationManagerService:()=>tl,RxDefaultRecordEditorInputType:()=>pl,RxExtensionContainerComponent:()=>dc,RxExtensionContainerModule:()=>fc,RxLocalizedCharacterFieldModule:()=>wc,RxRecordEditorUtilsService:()=>il,RxRecordGridAdvancedFilterValue:()=>rp,RxRecordGridAdvancedFilteringService:()=>ap,RxRecordGridDesignUtilsService:()=>Lp,RxRecordGridFilterHelperService:()=>sp,RxRecordGridFilterSelectHelperService:()=>Np,RxRecordGridFilterService:()=>lp,RxRecordGridQueryExpressionEvaluatorService:()=>au,RxRecordGridUtilsService:()=>_c,RxTabContainerComponent:()=>Cu,RxTabPanelComponent:()=>Su,RxTabPanelModule:()=>Ru,SelectGroupComponent:()=>Ad,SelectGroupComponentDefinitionAdapterService:()=>jd,SelectGroupDesignComponent:()=>$d,SelectGroupDesignModel:()=>Bd,SelectGroupFieldComponent:()=>Pd,SelectGroupModule:()=>_d,SelectGroupRegistrationModule:()=>Gd,SelectionFieldComponent:()=>Td,SelectionFieldDesignComponent:()=>wd,SelectionFieldDesignModule:()=>Ed,SelectionFieldModule:()=>Od,SelectionFieldRegistrationModule:()=>Nd,ServiceListComponent:()=>bu,ServiceListDesignComponent:()=>vu,ServiceListDesignModule:()=>yu,ServiceListModule:()=>xu,TabPanelDesignModule:()=>Mu,TextFieldComponent:()=>Wd,TextFieldDesignComponent:()=>Ud,TextFieldDesignModule:()=>qd,TextFieldExpressionConfigurator:()=>Xd,TextFieldModule:()=>Hd,TextFieldMultiSelectionType:()=>Md,TextFieldRegistrationModule:()=>Qd,TextareaFieldComponent:()=>Zd,TextareaFieldDesignComponent:()=>Jd,TextareaFieldDesignModule:()=>Yd,TextareaFieldModule:()=>ec,TextareaFieldRegistrationModule:()=>tc,TimeFieldComponent:()=>ac,TimeFieldDesignComponent:()=>nc,TimeFieldDesignModule:()=>oc,TimeFieldModule:()=>sc,TimeFieldRegistrationModule:()=>lc,UploaderFactory:()=>Bl,ViewComponentsModule:()=>_m});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("rxjs"),r=i("./node_modules/rxjs/_esm2015/operators/index.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),p=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),u=i("lodash"),m=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),f=i("./node_modules/@angular/common/fesm2015/common.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),g=i("./node_modules/css-element-queries/index.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),y=i("./node_modules/angular-split/fesm2015/angular-split.js"),b=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),x=i("./node_modules/@angular/forms/fesm2015/forms.js"),C=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),D=i("./node_modules/tslib/tslib.es6.js"),I=i("./node_modules/moment-es6/index.js"),R=i("./node_modules/bignumber.js/bignumber.js"),w=i.n(R),E=i("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),F=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),M=i("./node_modules/ckeditor4-angular/fesm2015/ckeditor4-angular.js"),T=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),O=i("./node_modules/file-saver/dist/FileSaver.min.js"),N=i("./node_modules/@angular/router/fesm2015/router.js"),A=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js"),P=i("./node_modules/@angular/common/fesm2015/http.js");const j=function(e,t){return[e,t]};function _(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",1),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().api.click(t)}),n["\u0275\u0275elementStart"](1,"span"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("btn-type",e.buttonType)("ngClass",n["\u0275\u0275pureFunction2"](5,j,e.state.icon,e.state.cls))("disabled",e.isDisabled)("size",e.state.size),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.state.buttonLabel)}}function V(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",1),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().api.click(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.state.label,"\n")}}const k=["dropdownToggle"],B=["buttonItems"],$=function(e){return{"nav-item--hidden":e}};function L(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275element"](1,"rx-runtime-view-canvas-item",5,6),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,$,e.showInDropdown)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("layout",e)}}function G(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-button-bar-dropdown-item-component",13),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)("guid",e.guid)}}function z(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,G,1,3,"rx-button-bar-dropdown-item-component",12),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.showInDropdown)}}const U=function(){return["bottom-right","bottom-left","bottom","top-right","top-left","top","auto"]};function q(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275element"](1,"button",8,9),n["\u0275\u0275elementStart"](3,"div",10),n["\u0275\u0275template"](4,z,2,1,"ng-container",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("placement",n["\u0275\u0275pureFunction0"](5,U)),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("id","rx-"+e.guid),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("aria-labelledby","rx-"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByFn)}}function X(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",1),n["\u0275\u0275template"](1,L,3,4,"div",2),n["\u0275\u0275template"](2,q,5,6,"div",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",e.alignClass),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByFn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isDropdownVisible)}}function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"as-split-area",2),n["\u0275\u0275elementStart"](1,"rx-canvas-item-column",3),n["\u0275\u0275listener"]("dropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDropListDropped(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isReadOnly",o.isReadOnly)("colIndex",i)("column",e)("layout",o.layout)}}function H(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",16),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).selectedFieldIdsModel[i.id]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).updateApplyButtonDisabledStatus()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",17),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",i.selectedFieldIdsModel[e.id]),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.name)}}function Q(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",11),n["\u0275\u0275elementStart"](1,"div",12),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"adapt-button",13),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().select(t.groupLabel)}),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,H,5,2,"div",14),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.groupLabel," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.selectAllFieldsInGroupButtonLabel," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.fields)("ngForTrackBy",i.trackById)}}function K(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1,"No Fields Found"),n["\u0275\u0275elementEnd"]())}const J=["openModalButton"];function Y(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",7),n["\u0275\u0275text"](1,"No fields added."),n["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().removeField(t.guid)}),n["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"div",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",10),n["\u0275\u0275elementStart"](5,"small"),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",11),n["\u0275\u0275template"](8,Z,1,0,"span",12),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.componentName),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.options.isDisabled)}}function te(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",2)}function ie(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275element"](1,"div",4),n["\u0275\u0275elementStart"](2,"span"),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,1,"com.bmc.arsys.rx.client.common.loading-data")))}function ne(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-editor.invalid-record.message"),"\n"))}function oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",10),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).switchToEditState()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.edit.label")," "))}function re(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onSaveClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",12),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCancelClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.cancel.label")," "))}function se(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275template"](2,oe,3,3,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-runtime-view-canvas-outlet"),n["\u0275\u0275template"](4,re,3,4,"button",8),n["\u0275\u0275template"](5,ae,3,3,"button",9),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isEditStateAvailable()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isSaveButtonAvailable()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancelButtonAvailable())}}function le(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",8),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.label)}}function de(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,": "),n["\u0275\u0275elementEnd"]())}const ce=function(e){return{"font-weight-bold":e}};function pe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"li",4),n["\u0275\u0275template"](1,le,2,1,"span",5),n["\u0275\u0275template"](2,de,2,0,"span",6),n["\u0275\u0275elementStart"](3,"span",7),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,ce,!i.isEditableState())),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.value)}}function ue(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",9),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.config.onDelete(t.config.id)}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.common.remove.label"))}function me(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",2),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("value",e.getAssociatedValue())}}function fe(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-control-label",9),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275property"]("label",e.label)}}function he(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"rx-runtime-view-canvas-outlet"),n["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275element"](1,"rx-record-preview-card",13),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](5);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",e.existingPreviewConfigurations[0]||e.pendingPreviewConfigurations[0])}}function ve(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,ge,2,1,"div",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.existingPreviewConfigurations.length||e.pendingPreviewConfigurations.length)}}function ye(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function be(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).loadExistingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}function xe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",12),n["\u0275\u0275template"](2,ye,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,be,3,3,"button",15),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.existingPreviewConfigurations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationManager.totalExistingCount>e.existingPreviewConfigurations.length+e.associationManager.deleted.length)}}function Ce(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,ve,2,1,"div",5),n["\u0275\u0275template"](3,xe,4,2,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitch",e.associationManager.cardinalityType),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",e.associationManager.cardinalityTypes.One)}}function Se(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function De(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).loadExistingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}const Ie=function(e){return{count:e}};function Re(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275elementStart"](1,"div",20),n["\u0275\u0275elementStart"](2,"span",21),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"button",22),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).deleteAllExisting()}),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",12),n["\u0275\u0275template"](10,Se,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,De,3,3,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",e.associationManager.totalExistingCount>1?n["\u0275\u0275pipeBind2"](4,5,"com.bmc.arsys.rx.client.view-components.record-editor.association.total-items.label",n["\u0275\u0275pureFunction1"](12,Ie,e.associationManager.totalExistingCount)):n["\u0275\u0275pipeBind1"](5,8,"com.bmc.arsys.rx.client.view-components.record-editor.association.single-item.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("hidden",!e.areActionsAvailable||e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.existingPreviewConfigurations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationManager.totalExistingCount>e.existingPreviewConfigurations.length+e.associationManager.deleted.length)}}function we(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function Ee(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).showPendingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}function Fe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",23),n["\u0275\u0275elementStart"](1,"div",24),n["\u0275\u0275elementStart"](2,"div",25),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",26),n["\u0275\u0275elementStart"](6,"span",21),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"button",22),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).deleteAllPending()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275template"](14,we,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,Ee,3,3,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,6,"com.bmc.arsys.rx.client.view-components.record-editor.association.pending-associations.label")," : "),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",e.totalPendingCount>1?n["\u0275\u0275pipeBind2"](8,8,"com.bmc.arsys.rx.client.view-components.record-editor.association.total-items.label",n["\u0275\u0275pureFunction1"](15,Ie,e.totalPendingCount)):n["\u0275\u0275pipeBind1"](9,11,"com.bmc.arsys.rx.client.view-components.record-editor.association.single-item.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("hidden",!e.areActionsAvailable||e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](12,13,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.getPendingPreviewConfigurations()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.totalPendingCount>e.currentPendingCount)}}function Me(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Re,12,14,"div",17),n["\u0275\u0275template"](2,Fe,16,17,"div",18),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.existingPreviewConfigurations.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.pendingPreviewConfigurations.length)}}const Te=function(e){return{"read-state":e}};function Oe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275template"](1,fe,1,1,"adapt-rx-control-label",7),n["\u0275\u0275template"](2,he,2,0,"div",8),n["\u0275\u0275template"](3,Ce,4,2,"div",8),n["\u0275\u0275template"](4,Me,3,2,"div",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](6,Te,e.isReadModeEnabled())),n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled()||e.existingPreviewConfigurations.length>0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.areActionsAvailable),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isReadModeEnabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled())}}function Ne(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"rx-select-with-pagination",27),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",e.formControl)("readonly",e.isDisabled)("label",e.label)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)("optionLoader",e.optionLoaderFunc)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)}}function Ae(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Ne,2,7,"div",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled())}}function Pe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275template"](1,Oe,5,8,"div",4),n["\u0275\u0275template"](2,Ae,2,1,"div",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngSwitch",e.editingMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","views"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","dropdown")}}function je(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",22),n["\u0275\u0275elementStart"](1,"div",23),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addField(t.data)}),n["\u0275\u0275elementStart"](2,"button",24),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addField(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",25),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.data.name)}}function _e(e,t){if(1&e&&n["\u0275\u0275template"](0,je,5,2,"div",21),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",e.data)}}const Ve=function(){return["selected-fields"]};function ke(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275elementStart"](1,"adapt-tree",19),n["\u0275\u0275template"](2,_e,1,1,"ng-template",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListConnectedTo",n["\u0275\u0275pureFunction0"](3,Ve)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e.availableFieldTreeNodes)("wrap",e.treeWrap)}}function Be(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",27),n["\u0275\u0275elementEnd"]())}function $e(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",4),n["\u0275\u0275text"](3,"Available fields"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",14),n["\u0275\u0275elementStart"](5,"div",15),n["\u0275\u0275template"](6,ke,3,4,"div",16),n["\u0275\u0275template"](7,Be,2,0,"ng-template",null,17,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](8),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngIf",t.availableFieldTreeNodes.length)("ngIfElse",e)}}function Le(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275elementStart"](1,"button",29),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",30),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Ge(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",39),n["\u0275\u0275elementStart"](1,"div",40),n["\u0275\u0275elementStart"](2,"button",41),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.$implicit,r=i.index,a=n["\u0275\u0275nextContext"]();return t.stopPropagation(),a.onMoveDown(o,r)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",42),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.$implicit,r=i.index,a=n["\u0275\u0275nextContext"]();return t.stopPropagation(),a.onMoveUp(o,r)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",43),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().onRemove(t)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function ze(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",32),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](2,"div",33),n["\u0275\u0275elementStart"](3,"div",34),n["\u0275\u0275elementStart"](4,"div",35),n["\u0275\u0275elementStart"](5,"div",36),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Ge,7,5,"div",37),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"adapt-rx-textfield",38),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.labelText=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().canSave=!0}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragDisabled",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("title",i.fieldLabelsMap[e.data.fieldId]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.fieldLabelsMap[e.data.fieldId]," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.labelText)}}function Ue(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",44),n["\u0275\u0275elementEnd"]())}function qe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",45),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.canSave),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Xe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",6),n["\u0275\u0275elementStart"](1,"strong",7),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",8),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).editField(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",9),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).removeField(t.guid)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isDisabled)}}function We(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",4),n["\u0275\u0275template"](1,Xe,5,3,"li",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectedFields)}}function He(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-canvas-item",1),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("interactive",!1)("layout",e)("isReadOnly",i.isReadOnly)}}function Qe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",18),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.data.label)}}function Ke(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,": "),n["\u0275\u0275elementEnd"]())}function Je(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"li",14),n["\u0275\u0275template"](1,Qe,2,1,"span",15),n["\u0275\u0275template"](2,Ke,2,0,"span",16),n["\u0275\u0275elementStart"](3,"span",17),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.label),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.name)}}function Ye(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementStart"](2,"label",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275element"](6,"rx-canvas-outlet",4),n["\u0275\u0275elementStart"](7,"button",5),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"adapt-empty-state",6),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275elementStart"](13,"div",9),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275element"](15,"button",11),n["\u0275\u0275elementStart"](16,"ul",12),n["\u0275\u0275template"](17,Je,5,3,"li",13),n["\u0275\u0275pipe"](18,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,8,e.model.label$)),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,10,e.model.label$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("containerComponent",e.containerComponent),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!e.hidePlaceholder),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,12,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",e.hidePlaceholder),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!e.hidePlaceholder),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](18,14,e.model.displayedFields$))}}function Ze(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275element"](3,"adapt-rx-select",19),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](2,3,e.model.label$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](4,5,e.model.label$))("disabled",!0)}}const et=function(){return[]};function tt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-downloader",6),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275property"]("config",e.readStateConfig)}}function it(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"label",4),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,tt,1,1,"adapt-downloader",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.getDisplayValue())}}function nt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,it,4,3,"div",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2),t=n["\u0275\u0275reference"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.getDisplayValue())("ngIfElse",t)}}function ot(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,nt,2,2,"ng-container",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}const rt=function(e){return{"attachment-disabled":e}};function at(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-uploader",7),n["\u0275\u0275listener"]("removedFileFromQueue",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().removeAttachment(t)})("deletedFile",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().removeAttachment(t)})("afterFilesAdded",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addAttachment(t)})("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](13,rt,e.isDisabled))("reusable",!0)("label",e.label)("readonly",e.isDisabled)("required",e.isRequired)("allowDeletion",!1)("uploadMode",e.mode)("selectionMode",e.selectionMode)("filesCount",e.filesCount)("maxFileSize",e.maxFileSize)("chunkSize",e.chunkSize)("texts",e.texts)("formControl",e.attachmentFormControl)}}function st(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",8),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("value","-")}}function lt(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",3),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function dt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"strong"),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,lt,2,0,"span",1),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-rx-switch",2),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,4,e.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](6,6,e.model.isRequired$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.booleanValue)("disabled",!0)}}function ct(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t}),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.booleanValue)("label",n["\u0275\u0275pipeBind1"](2,4,e.model.label$))("required",n["\u0275\u0275pipeBind1"](3,6,e.model.isRequired$))("disabled",!0)}}const pt=["booleanComponent"];function ut(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function mt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ut,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function ft(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-boolean",4,5),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t})("rxBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",e.isHidden)("label",e.label)("isDisabled",e.isDisabled)("required",e.isRequired)("shouldDisplayAsCheckbox",e.shouldDisplayAsCheckbox)("ngModel",e.booleanValue)}}function ht(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function gt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ht,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function vt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)}}function yt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function bt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,yt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function xt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("mode",e.pickerMode)}}const Ct=["counterComponent"];function St(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Dt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,St,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function It(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-counter",4,5),n["\u0275\u0275listener"]("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()})("onFocus",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onFocus()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.counterFormControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("required",e.isRequired)("min",e.fieldDefinition.minValue)("max",e.fieldDefinition.maxValue)("adaptMin",e.fieldDefinition.minValue)("adaptMax",e.fieldDefinition.maxValue)}}function Rt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function wt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Rt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Et(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-counter",4),n["\u0275\u0275listener"]("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()})("onFocus",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onFocus()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.counterFormControl)("required",e.isRequired)("min",e.fieldDefinition.minValue)("max",e.fieldDefinition.maxValue)("adaptMin",e.fieldDefinition.minValue)("adaptMax",e.fieldDefinition.maxValue)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("requiredLabel",n["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.client.common.required-field.label"))}}function Ft(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-select",2),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,4,e.model.label$))("options",n["\u0275\u0275pureFunction0"](8,et))("disabled",!0)("required",n["\u0275\u0275pipeBind1"](2,6,e.model.isRequired$))}}function Mt(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",10),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function Tt(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",11)}function Ot(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"label",4),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,Mt,2,0,"span",5),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-rx-radiobutton-group",6),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().isRadioButtonMode=t}),n["\u0275\u0275template"](8,Tt,1,0,"adapt-rx-radiobutton",7),n["\u0275\u0275pipe"](9,"async"),n["\u0275\u0275element"](10,"adapt-rx-radiobutton",8),n["\u0275\u0275element"](11,"adapt-rx-radiobutton",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,5,e.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](6,7,e.model.isRequired$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.isRadioButtonMode)("disabled",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!n["\u0275\u0275pipeBind1"](9,9,e.model.isRequired$))}}function Nt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function At(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Nt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Pt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",8),2&e){const e=t.$implicit,i=t.last;n["\u0275\u0275classMapInterpolate1"]("mt-0 ",i?"mb-1":"",""),n["\u0275\u0275property"]("value",e.id)("label",e.name)}}function jt(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",6),n["\u0275\u0275template"](1,Pt,1,5,"adapt-rx-radiobutton",7),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("name",e.guid)("formControl",e.formControl)("readonly",e.isDisabled)("label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectOptions)}}function _t(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",9),n["\u0275\u0275listener"]("onPopupOpenChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onPopupStatusChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.selectOptions)("required",e.isRequired)("label",e.label)("formControl",e.selectFormControl)("readonly",e.isDisabled)("optionFormatter",e.optionFormatter)("enableFilter",!0)("emptyOption",!e.isRequired)}}function Vt(e,t){if(1&e&&(n["\u0275\u0275template"](0,jt,2,5,"adapt-rx-radiobutton-group",4),n["\u0275\u0275template"](1,_t,1,8,"adapt-rx-select",5)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.isRadioButtonMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isRadioButtonMode)}}function kt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Bt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,kt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function $t(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-select-with-pagination",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.formControl)("required",e.isRequired)("readonly",e.isDisabled)("optionLoader",e.optionLoaderFunc)("showDefaultTitle",e.showDefaultTitle)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)}}const Lt=function(){return{iconName:"question_circle_o",content:"This is the record definition that provides the option values for this named list.",placement:"top",popoverMode:!0}};function Gt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-textfield",5),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.sourceRecordDefinitionDisplayName)("tooltip",n["\u0275\u0275pureFunction0"](2,Lt))}}const zt=function(){return{iconName:"question_circle_o",content:"Select the field in the source record definition that filters the option values for this named list.",placement:"top",popoverMode:!0}};function Ut(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",6),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectFilterField(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.filterField)("options",e.filterFieldIdOptions)("optionFormatter",e.optionFormatter)("disabled",e.fieldformGroup.disabled)("tooltip",n["\u0275\u0275pureFunction0"](5,zt))}}const qt=function(e){return{"form-group d-block":e}};function Xt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",6),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().removeField(t)}),n["\u0275\u0275elementEnd"]()}}function Wt(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,Xt,1,0,"button",4),n["\u0275\u0275element"](3,"rx-select-group-field",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!o.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("fieldformGroup",e)("index",i)("targetFieldOptions",o.options.targetFieldOptions)}}function Ht(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",3),n["\u0275\u0275pipe"](1,"async")),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.data.label||"<No Label>")("required",n["\u0275\u0275pipeBind1"](1,3,i.model.isFieldRequired(e)))("disabled",!0)}}function Qt(e,t){if(1&e&&(n["\u0275\u0275template"](0,Ht,2,5,"adapt-rx-textfield",2),n["\u0275\u0275pipe"](1,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](1,2,e.model.fieldsDesignData$))("ngForTrackBy",e.trackByFn)}}function Kt(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",4)}function Jt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",4),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Yt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Jt,1,2,"rx-read-only-field",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Zt(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",7),n["\u0275\u0275pipe"](1,"translate")),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("isPassword",e.isPasswordField)("formControl",e.formControl)("maxlength",e.maxLength)("required",e.isRequired)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("autocomplete",!e.isPasswordField)("requiredLabel",n["\u0275\u0275pipeBind1"](1,9,"com.bmc.arsys.rx.client.common.required-field.label"))}}function ei(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-select-with-pagination",8),n["\u0275\u0275listener"]("toggleDropdown",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onToggleDropdown(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2),t=n["\u0275\u0275reference"](4);n["\u0275\u0275property"]("showDefaultTitle",e.showDefaultTitle)("label",e.label)("formControl",e.formControl)("readonly",e.isDisabled)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)("optionLoader",e.optionLoaderFunc)("required",e.isRequired)("isMultiSelectionMode",e.isMultipleSelectionEnabled)("template",t)}}function ti(e,t){if(1&e&&(n["\u0275\u0275template"](0,Zt,2,11,"adapt-rx-textfield",5),n["\u0275\u0275template"](1,ei,1,10,"rx-select-with-pagination",6)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",!e.isNamedListAttached),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isNamedListAttached)}}function ii(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",12),n["\u0275\u0275elementStart"](1,"small"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e," ")}}function ni(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275template"](1,ii,3,1,"span",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.contextualFields)}}function oi(e,t){if(1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275template"](1,ni,2,2,"div",9)),2&e){const e=t.$implicit;n["\u0275\u0275textInterpolate1"](" ",e.displayValue," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.contextualFields)}}function ri(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function ai(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ri,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function si(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textarea",4),n["\u0275\u0275pipe"](1,"translate")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("formControl",e.formControl)("required",e.isRequired)("maxlength",e.maxLength)("rows",3)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("label",e.label)("requiredLabel",n["\u0275\u0275pipeBind1"](1,8,"com.bmc.arsys.rx.client.common.required-field.label"))}}function li(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function di(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,li,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function ci(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("mode",e.pickerMode)}}function pi(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")}function ui(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",3),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function mi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"ckeditor",4),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",e.ckEditorConfig)("type",e.ckEditorType)("readOnly",!0)("ngModel",e.getDisplayValue())}}function fi(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,mi,4,5,"div",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function hi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"adapt-rx-control-label",5),n["\u0275\u0275elementStart"](2,"ckeditor",6),n["\u0275\u0275listener"]("dataChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().setFieldValue(t)})("blur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"adapt-rx-feedback",7,8),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](4),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("has-danger",e.hasUIErrorState),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",t.label)("showRequiredLabel",t.isRequired),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("data",t.formControl.value)("config",t.ckEditorConfig)("type",t.ckEditorType)("readOnly",t.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("errors",t.formControl.errors)("controlTouched",t.formControl.touched)}}function gi(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function vi(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,gi,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function yi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275element"](1,"adapt-rx-control-label",5),n["\u0275\u0275elementStart"](2,"button",6),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().selectLocalizedValue()}),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](5,"adapt-rx-textfield",7)}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("has-danger",e.formControl.errors&&e.formControl.touched),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.label)("id",e.guid)("showRequiredLabel",e.isRequired),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.isDisabled),n["\u0275\u0275attribute"]("aria-describedby",e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,13,"com.bmc.arsys.rx.client.view-components.localized-character-field.button.localize.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("readonly",!0)("formControl",e.formControl)("disabledStyleForReadonlyState",!0)("required",e.isRequired),n["\u0275\u0275attribute"]("aria-describedby",e.guid)}}function bi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"label",2),n["\u0275\u0275elementStart"](1,"input",3),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().column.alignment=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("btn btn-sm rounded btn-secondary ",e.icon,""),n["\u0275\u0275classProp"]("active",i.column.alignment===e.value)("disabled",i.isReadOnly),n["\u0275\u0275property"]("adaptTooltip",e.name),n["\u0275\u0275attribute"]("rx-id",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e.value)("ngModel",i.column.alignment)("disabled",i.isReadOnly),n["\u0275\u0275attribute"]("rx-id",e.value)}}function xi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addCellProperties()}),n["\u0275\u0275element"](1,"span",14),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.cell-display-properties.add-cell-display-property.button.label")," "))}function Ci(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",17),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Si(e,t){1&e&&n["\u0275\u0275element"](0,"div",46)}function Di(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",47),n["\u0275\u0275elementStart"](1,"div",48),n["\u0275\u0275elementStart"](2,"button",49),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveCellProperties(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveCellProperties(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",51),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeCellProperties(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}const Ii=function(e,t){return{active:e,"disabled not-allowed":t}};function Ri(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",21),n["\u0275\u0275template"](1,Si,1,0,"div",22),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",23),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!0)})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!1)}),n["\u0275\u0275elementStart"](3,"div",24),n["\u0275\u0275elementStart"](4,"div",25),n["\u0275\u0275elementStart"](5,"div",26),n["\u0275\u0275elementStart"](6,"div",27),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,Di,7,5,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",29),n["\u0275\u0275elementStart"](10,"rx-expression-form-control",30),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openExpressionEditor(t.get("fieldValueCondition"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",31),n["\u0275\u0275elementStart"](12,"div",32),n["\u0275\u0275element"](13,"adapt-rx-control-label",33),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementStart"](15,"adapt-rx-switch",34),n["\u0275\u0275listener"]("ngModelChange",function(){const t=n["\u0275\u0275restoreView"](e).$implicit,i=n["\u0275\u0275nextContext"](2);return i.markAsDirty(),i.resetIconAndTextProps(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"adapt-rx-select",35),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-icon-picker-form-control",36),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](19,"adapt-rx-select",37),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](21,"div",29),n["\u0275\u0275elementStart"](22,"adapt-rx-select",38),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](23,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](24,"adapt-rx-select",39),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](25,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](26,"adapt-rx-select",40),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](27,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](28,"div",41),n["\u0275\u0275elementStart"](29,"div",42),n["\u0275\u0275elementStart"](30,"label",43),n["\u0275\u0275elementStart"](31,"input",44),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).toggleProp(t.get("bold"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](32,"label",45),n["\u0275\u0275elementStart"](33,"input",44),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).toggleProp(t.get("italic"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"](2),r=n["\u0275\u0275reference"](17);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",e)("isOpen",e.get("isOpen").value),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title","Cell display properties "+(i+1)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" Cell display properties ",i+1," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",o.queryExpressionOptions),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](14,42,"com.bmc.arsys.rx.client.view-components.cell-display-properties.display-as-badge-field.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](17,44,"com.bmc.arsys.rx.client.view-components.cell-display-properties.badge-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.badgeColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.iconPickerOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](20,46,"com.bmc.arsys.rx.client.view-components.cell-display-properties.icon-position-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.iconPositions)("optionFormatter",o.optionFormatter),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](23,48,"com.bmc.arsys.rx.client.view-components.cell-display-properties.text-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.textColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](25,50,"com.bmc.arsys.rx.client.view-components.cell-display-properties.background-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.backgroundColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](27,52,"com.bmc.arsys.rx.client.view-components.cell-display-properties.font-size-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.fontSizes)("optionFormatter",o.optionFormatter),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](54,Ii,e.get("bold").value,e.get("displayAsBadge").value||o.config.isReadOnly)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.get("displayAsBadge").value||o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](57,Ii,e.get("italic").value,e.get("displayAsBadge").value||o.config.isReadOnly)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.get("displayAsBadge").value||o.config.isReadOnly)}}function wi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275listener"]("cdkDropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectedCellPropertyDrop(t)}),n["\u0275\u0275elementStart"](1,"adapt-accordion",19),n["\u0275\u0275template"](2,Ri,34,60,"div",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.propsFormArray.controls)}}function Ei(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",52),n["\u0275\u0275element"](1,"adapt-empty-state",53),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.cell-display-properties.empty-state.message")))}function Fi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",54),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.propsFormArray.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Mi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",55),n["\u0275\u0275element"](1,"div",56),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",e.value?"color-option-box rounded mr-2 "+i.colorsList[e.value]:""),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ti(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275text"](1,"No cell display properties added."),n["\u0275\u0275elementEnd"]())}function Oi(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275text"](1,"Cell display properties added."),n["\u0275\u0275elementEnd"]())}function Ni(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addNamedFilterOption()}),n["\u0275\u0275element"](1,"span",12),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.named-filter-options.add-named-filter-option.button.label")," "))}function Ai(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",15),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Pi(e,t){1&e&&n["\u0275\u0275element"](0,"div",29)}function ji(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",30),n["\u0275\u0275elementStart"](1,"div",31),n["\u0275\u0275elementStart"](2,"button",32),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveNamedFilterOption(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",33),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveNamedFilterOption(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",34),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeNamedFilterOption(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function _i(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275template"](1,Pi,1,0,"div",20),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",21),n["\u0275\u0275elementStart"](3,"div",22),n["\u0275\u0275elementStart"](4,"div",23),n["\u0275\u0275elementStart"](5,"div",24),n["\u0275\u0275elementStart"](6,"div",25),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,ji,7,5,"div",26),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-rx-textfield",27),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"rx-expression-form-control",28),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openExpressionEditor(t.get("title"),t.get("filterExpression"))})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",e)("isOpen",i.accordionTabs[e.get("guid").value]),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.get("title").value),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.get("title").value," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.view-components.named-filter-options.name-field.label")),n["\u0275\u0275property"]("required",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",i.queryExpressionOptions)("required",!0)}}function Vi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16),n["\u0275\u0275listener"]("cdkDropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectedNamedFilterOptionDrop(t)}),n["\u0275\u0275elementStart"](1,"adapt-accordion",17),n["\u0275\u0275template"](2,_i,12,16,"div",18),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.namedFilterOptionsFormArray.controls)}}function ki(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",35),n["\u0275\u0275element"](1,"adapt-empty-state",36),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.named-filter-options.empty-state.message")))}function Bi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",37),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.namedFilterOptionsFormArray.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const $i='[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}';function Li(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275element"](1,"span",7),n["\u0275\u0275element"](2,"adapt-icon",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip)}}function Gi(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275text"](1,"No named filter options added."),n["\u0275\u0275elementEnd"]())}function zi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeFilterOption(t)}),n["\u0275\u0275elementEnd"]()}}function Ui(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",12),n["\u0275\u0275elementStart"](1,"strong",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).editNamedFilterOption(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,zi,1,0,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isDisabled)}}function qi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",10),n["\u0275\u0275template"](1,Ui,5,2,"li",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.value)}}const Xi=["selectedColumnsDropList"],Wi=["associatedAvailableColumnsDropList"],Hi=["draggableSelectedColumn"],Qi=["draggableAssociatedAvailableColumn"];function Ki(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",22),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ji(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",23,24),n["\u0275\u0275listener"]("cdkDragStarted",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).onAssociatedAvailableColumnsDragStarted()}),n["\u0275\u0275elementStart"](2,"div",25),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addColumn(t.data.availableColumn)}),n["\u0275\u0275elementStart"](3,"button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addColumn(t.data.availableColumn)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"span",27),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data.availableColumn),n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](e.label)}}function Yi(e,t){if(1&e&&(n["\u0275\u0275template"](0,Ki,2,2,"span",20),n["\u0275\u0275template"](1,Ji,6,2,"div",21)),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",!e.data.availableColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.availableColumn)}}const Zi=function(){return["selectedColumnsDropList"]};function en(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16,17),n["\u0275\u0275elementStart"](2,"adapt-tree",18),n["\u0275\u0275listener"]("onNodeExpand",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onNodeExpand(t)}),n["\u0275\u0275template"](3,Yi,2,2,"ng-template",19),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListData",e.filteredColumns)("cdkDropListConnectedTo",n["\u0275\u0275pureFunction0"](4,Zi)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("value",e.availableColumnsTree)("wrap",e.treeWrap)}}function tn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275element"](1,"adapt-empty-state",29),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-column.available-columns.empty-state.message")))}function nn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",4),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",13),n["\u0275\u0275elementStart"](6,"div",14),n["\u0275\u0275template"](7,en,4,5,"div",15),n["\u0275\u0275template"](8,tn,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,3,"com.bmc.arsys.rx.client.view-components.record-grid-column.available-columns.title")," "),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!e.isTreeEmpty()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isTreeEmpty())}}function on(e,t){1&e&&n["\u0275\u0275element"](0,"div",44)}function rn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](2).index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeColumn(i)}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function an(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275elementStart"](1,"div",46),n["\u0275\u0275elementStart"](2,"button",47),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveColumn(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",48),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveColumn(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,rn,3,3,"button",49),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first,o=e.$implicit,r=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!r.isActionsColumn(o.fieldId))}}function sn(e,t){1&e&&n["\u0275\u0275element"](0,"div")}function ln(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,sn,1,0,"div",51),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275reference"](14),i=n["\u0275\u0275reference"](12),o=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",o.isActionsColumn(e.fieldId))("ngIfThen",t)("ngIfElse",i)}}function dn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",68),n["\u0275\u0275element"](1,"span",69),n["\u0275\u0275element"](2,"adapt-icon",70),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip.content)}}function cn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",64),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",65),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).$implicit[i.name]=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"](2).$implicit;return n["\u0275\u0275nextContext"](2).onColumnCheckboxPropertyChange(t,o,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",66),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,dn,3,2,"span",67),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2).$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",t[e.name])("disabled",!i.isPropertyEditable(t,e.name)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.tooltip)}}function pn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-column-editor-alignment",71),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).markAsDirty()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2).$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("isReadOnly",i.isReadOnly)("column",t)("columnProperty",e)("ngModel",t.alignment)}}const un=function(){return["visible","sortable","filterable","searchable","wrapText"]};function mn(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,cn,6,4,"div",62),n["\u0275\u0275template"](2,pn,1,4,"rx-column-editor-alignment",63),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pureFunction0"](2,un).includes(e.name)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf","alignment"===e.name)}}function fn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-select-form-control",72),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).$implicit.typeaheadKeystrokeCount=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).markAsDirty()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",t.typeaheadKeystrokeCountOptions)("ngModel",e.typeaheadKeystrokeCount)("disabled",t.isReadOnly)}}function hn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-expression-form-control",73,74),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).$implicit.additionalQueryCriteria=t})("events",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275reference"](1),i=n["\u0275\u0275nextContext"](2).$implicit;return n["\u0275\u0275nextContext"](2).openAdditionalQueryCriteriaExpressionEditor(i,t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.additionalQueryCriteriaExpressionOptions)("ngModel",e.additionalQueryCriteria)("disabled",t.isReadOnly)}}function gn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-textfield",52),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.title=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",53),n["\u0275\u0275template"](3,mn,3,3,"ng-container",54),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",55),n["\u0275\u0275elementStart"](5,"rx-stepper-with-units-form-control",56),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,fn,1,3,"rx-select-form-control",57),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,hn,2,3,"rx-expression-form-control",58),n["\u0275\u0275elementStart"](8,"rx-cell-display-properties",59),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.cellDisplayProperties=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"rx-named-filter-options",60),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.namedFilterOptions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"rx-action-list-control",61),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.actions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,20,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-header-field.label")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.title),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.columnProperties)("ngForTrackBy",t.trackByForColumnProperties),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",t.columnWidthPropertyOptions)("ngModel",e.width),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterable&&e.fieldDefinition.namedListDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterable&&e.fieldDefinition.namedListDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("columns",t.columns)("columnName",e.title)("disabled",t.isReadOnly)("ngModel",e.cellDisplayProperties),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("tooltip",n["\u0275\u0275pipeBind1"](10,22,"com.bmc.arsys.rx.client.view-components.record-grid-column.named-filter-options-field.tooltip")),n["\u0275\u0275property"]("column",e)("disabled",t.isReadOnly)("ngModel",e.namedFilterOptions),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("tooltip",n["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-actions-field.tooltip")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.actions)}}function vn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",64),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",65),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).$implicit[i.name]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",66),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2).$implicit,o=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",i[e.name])("disabled",!o.isPropertyEditable(i,e.name)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label)}}function yn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-textfield",75),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.title=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"rx-stepper-with-units-form-control",56),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",53),n["\u0275\u0275template"](4,vn,5,3,"div",76),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-header-field.label")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",t.columnWidthPropertyOptions)("ngModel",e.width),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.actionsColumnProperties)("ngForTrackBy",t.trackByForColumnProperties)}}function bn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",32,33),n["\u0275\u0275listener"]("cdkDragStarted",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onColumnDragStarted()}),n["\u0275\u0275template"](2,on,1,0,"div",34),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",35),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",36),n["\u0275\u0275elementStart"](5,"div",37),n["\u0275\u0275elementStart"](6,"div",38),n["\u0275\u0275elementStart"](7,"div",39),n["\u0275\u0275text"](8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,an,5,3,"div",40),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,ln,2,3,"ng-container",41),n["\u0275\u0275template"](11,gn,13,26,"ng-template",null,42,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](13,yn,5,9,"ng-template",null,43,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isOpen)}}function xn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-accordion",30),n["\u0275\u0275template"](1,bn,15,10,"div",31),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("multiselect",!1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByForColumns)}}function Cn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275element"](1,"adapt-empty-state",77),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-column.selected-columns.empty-state.message")))}function Sn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",78),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Dn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275text"](1," No grid columns added. "),n["\u0275\u0275elementEnd"]())}function In(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).openEditor(t.guid)}),n["\u0275\u0275elementEnd"]()}}function Rn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeColumn(t)}),n["\u0275\u0275elementEnd"]()}}function wn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"]("\u2013 ",e.associationDescriptor.label,"")}}const En=function(e){return{"d-icon-left-arrow_schema":e}};function Fn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275elementStart"](2,"span",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,In,1,0,"button",10),n["\u0275\u0275template"](5,Rn,1,0,"button",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",12),n["\u0275\u0275text"](7),n["\u0275\u0275template"](8,wn,2,1,"span",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](7,En,e.associationDescriptor))("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title||e.fallbackTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isActionsColumn(e.fieldId)&&!i.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",i.getColumnResourceTypeName(e)," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationDescriptor)}}function Mn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,Dn,2,0,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Fn,9,9,"div",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",0===e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",i.getSortedColumns(e))("ngForTrackBy",i.trackByForColumns)}}function Tn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",3),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).namedFilterOptionsModel[i.guid]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onNamedFilterOptionChange()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.title)("ngModel",i.namedFilterOptionsModel[e.guid])}}function On(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",1),n["\u0275\u0275template"](1,Tn,1,2,"adapt-rx-checkbox",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.namedFilterOptions)("ngForTrackBy",e.trackByOptionGuid)}}function Nn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",3),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function An(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onValueChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("inline",!0)("multiple",!0)("optionFormatter",e.selectOptionFormatter)("options",e.getSelectOptions())("popupMaxHeight",null)("ngModel",e.selectedValues)}}function Pn(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",6),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("value",e.filterControlsComponent.getBooleanTypeBlankValue())("label",e.filterControlsComponent.texts.configsTexts.blankLabel)("testID",e.filterControlsComponent.testID+"_radio_blank")("disabled",e.filterControlsComponent.isInputDisabled(e.filterControlsComponent.getBooleanTypeBlankValue()))}}function jn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",5),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onValueChangeRequired(t)}),n["\u0275\u0275element"](1,"adapt-rx-radiobutton",6),n["\u0275\u0275element"](2,"adapt-rx-radiobutton",6),n["\u0275\u0275template"](3,Pn,1,4,"adapt-rx-radiobutton",7),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.filterValue?e.filterValue.filterValue[0]:null),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",!1)("label",e.filterControlsComponent.texts.configsTexts.falseLabel)("testID",e.filterControlsComponent.testID+"_radio_false")("disabled",e.filterControlsComponent.isInputDisabled(!1)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",!0)("label",e.filterControlsComponent.texts.configsTexts.trueLabel)("testID",e.filterControlsComponent.testID+"_radio_true")("disabled",e.filterControlsComponent.isInputDisabled(!0)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterControlsComponent.getBooleanTypeOptionParams().hasBlankValue)}}function _n(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function Vn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275element"](1,"div",8),n["\u0275\u0275elementEnd"]())}function kn(e,t){if(1&e&&n["\u0275\u0275text"](0),2&e){const e=t.tag;let i;n["\u0275\u0275textInterpolate1"](" ",null!==(i=e.displayValue)&&void 0!==i?i:e.value,"\n")}}function Bn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",12),n["\u0275\u0275elementStart"](1,"small"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e," ")}}function $n(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275template"](1,Bn,3,1,"span",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().result;n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.contextualFields)}}function Ln(e,t){if(1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275template"](1,$n,2,2,"div",9)),2&e){const e=t.result;let i;n["\u0275\u0275textInterpolate1"](" ",null!==(i=e.displayValue)&&void 0!==i?i:e.value," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.contextualFields)}}function Gn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",3),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function zn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",8),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function Un(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function qn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](6);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Xn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](8);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Wn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](10);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Hn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",8),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onTimeTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("hasSeconds",!0)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Qn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",9),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDateTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Kn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",8),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDateTimeTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("hasSeconds",!0)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Jn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",2),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}const Yn=["optionalBooleanFilter"],Zn=["requiredBooleanFilter"],eo=["inputsForStringWithTypeAheadTemplate"],to=["inputsForStringTypeTemplate"],io=["inputsForNumberTypeTemplate"],no=["inputsForTimeTypeTemplate"],oo=["inputsForDateTypeTemplate"],ro=["inputsForDatetimeTypeTemplate"],ao=["inputsForSelectionTypeTemplate"];function so(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-boolean-filter",9),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("isRequired",!1)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function lo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-boolean-filter",9),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("isRequired",!0)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function co(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-string-with-type-ahead-filter",10),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function po(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-string-filter",10),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function uo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-number-filter",11),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function mo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.Time)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function fo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.Date)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function ho(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.DateTime)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function go(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-selection-filter",11),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function vo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-tag",2),n["\u0275\u0275listener"]("remove",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275elementStart"](1,"span",3),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();let o;n["\u0275\u0275property"]("removable",!i.isDisabled)("disabled",i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",null!==(o=null==e.data.value?null:e.data.value.title)&&void 0!==o?o:e.text),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text)}}function yo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"adapt-tag",8),n["\u0275\u0275listener"]("remove",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onRemoveFilterTag(t)}),n["\u0275\u0275elementStart"](2,"span",3),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);let o;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("removable",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",null!==(o=null==e.data.value?null:e.data.value.title)&&void 0!==o?o:e.text),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text)}}function bo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275elementStart"](1,"button",5),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",6),n["\u0275\u0275template"](5,yo,4,3,"div",7),n["\u0275\u0275pipe"](6,"slice"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("appendToBody",!0)("placement",e.restTagsDropdownPlacement),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind2"](3,5,"com.bmc.arsys.rx.client.view-components.record-grid.filters.show-more-filters.label",e.getTranslateParams())," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind2"](6,8,e.tags,-e.getRestTagsCount()))("ngForTrackBy",e.trackByForFilterTags)}}const xo=function(){return["right","bottom","bottom-right","auto"]};function Co(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"adapt-advanced-filter",3,4),n["\u0275\u0275listener"]("selectedFiltersChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onAdvancedFiltersChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"rx-filter-tags",5),n["\u0275\u0275listener"]("removeTag",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](2),t=n["\u0275\u0275nextContext"](),i=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",t.isDisabled)("appendDropdownToBody",!0)("enableSavedFilters",!1)("filterOptions",t.advancedFilterData.filterOptions)("selectedFilters",t.advancedFilterData.selectedFilters)("texts",t.advancedFilterData.filterTexts)("applyFiltersByUserAction",!0)("filterOptionsCustomAreaTemplate",i)("selectedFiltersIndicationStyle","mark")("anchorDisabled",t.options.anchorDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("isDisabled",t.isDisabled)("tags",n["\u0275\u0275pipeBind1"](4,14,t.getTags(e.filtersExpressionsTags)))("tagsLimit",t.options.tagsLimit)("restTagsDropdownPlacement",n["\u0275\u0275pureFunction0"](16,xo))}}function So(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",11),2&e){const e=t.$implicit;n["\u0275\u0275property"]("value",e.value)("label",e.name)}}function Do(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"adapt-accordion"),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",8),n["\u0275\u0275elementStart"](3,"adapt-rx-radiobutton-group",9),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onGroupFilterValueModelChange(t)}),n["\u0275\u0275template"](4,So,1,2,"adapt-rx-radiobutton",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title","Show filters for: "+e.getGroupFilterName(e.groupFilterValue))("multiline",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.groupFilterValue),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.groupFilterItems)}}function Io(e,t){if(1&e&&n["\u0275\u0275template"](0,Do,5,4,"div",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.groupFilterItems.length>1)}}const Ro=["filterPresetsForm"];function wo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addFilterPreset()}),n["\u0275\u0275element"](1,"span",15),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.add-filter-preset.button.label")," "))}function Eo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16),n["\u0275\u0275elementStart"](1,"button",17),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",18),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Fo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275elementStart"](1,"button",30),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.removeFilterPreset(i)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function Mo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"rx-record-grid-filter-select-control",31),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.filterSelect=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name","filterPresetFilterSelect-"+e.guid)("disabled",t.isReadOnly)("options",e.filterSelectOptions)("ngModel",e.filterSelect)}}function To(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",20,21),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](3,"div",22),n["\u0275\u0275elementStart"](4,"div",23),n["\u0275\u0275elementStart"](5,"div",24),n["\u0275\u0275elementStart"](6,"div",25),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,Fo,4,3,"div",26),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-rx-textfield",27),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()})("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.title=t}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Mo,2,4,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275reference"](2),o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](10,11,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.name-field.label")),n["\u0275\u0275property"]("name","filterPresetTitle-"+e.guid)("required",!0)("disabled",o.isReadOnly)("rxCustomValidators",o.getCheckPresetTitleDuplicateValidator(e))("ngModel",e.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.isOpenOrCloseAnimationProcessing)}}function Oo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",32),n["\u0275\u0275element"](1,"adapt-empty-state",33),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.empty-state.message")))}function No(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",34),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSaveChangesClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](9);n["\u0275\u0275property"]("disabled",t.form.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Ao(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-control-label",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.options.label)("tooltip",null==e.options?null:e.options.tooltip)}}function Po(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",5),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().openEditor()}),n["\u0275\u0275element"](1,"span",6),n["\u0275\u0275text"](2," Edit filter presets\n"),n["\u0275\u0275elementEnd"]()}}function jo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().openEditor(t)}),n["\u0275\u0275elementEnd"]()}}function _o(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().removeFilterPreset(t)}),n["\u0275\u0275elementEnd"]()}}function Vo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275elementStart"](2,"span",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,jo,1,0,"button",10),n["\u0275\u0275template"](5,_o,1,0,"button",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",12),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("Filters: ",e.recordGridFilters.length,"")}}function ko(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",15),n["\u0275\u0275text"](1," No filter presets added. "),n["\u0275\u0275elementEnd"]())}const Bo=["rowActionsForm"],$o=["selectedRowActionsDropList"],Lo=["draggableSelectedRowAction"];function Go(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",15),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addRowAction()}),n["\u0275\u0275element"](1,"span",16),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.add-row-action.button.label")," "))}function zo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",17),n["\u0275\u0275elementStart"](1,"button",18),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",19),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Uo(e,t){1&e&&n["\u0275\u0275element"](0,"div",39)}function qo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",40),n["\u0275\u0275elementStart"](1,"div",41),n["\u0275\u0275elementStart"](2,"button",42),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveRowAction(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",43),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveRowAction(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",44),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().removeRowAction(i,t)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function Xo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",20,21),n["\u0275\u0275template"](2,Uo,1,0,"div",22),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",23),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",24),n["\u0275\u0275elementStart"](5,"div",25),n["\u0275\u0275elementStart"](6,"div",26),n["\u0275\u0275elementStart"](7,"div",27),n["\u0275\u0275text"](8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,qo,7,5,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",29),n["\u0275\u0275elementStart"](11,"adapt-rx-textfield",30),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.label=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"rx-icon-picker-form-control",31),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.icon=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",29),n["\u0275\u0275elementStart"](15,"rx-definition-picker",32),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.recordDefinitionName=t})("ngModelChange",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onRecordDefinitionChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"rx-select-form-control",33),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.fieldId=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275pipe"](17,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-expression-form-control",34),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"recordInstance")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](19,"div",29),n["\u0275\u0275elementStart"](20,"rx-expression-form-control",35),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"disabled")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](21,"rx-expression-form-control",36),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"hidden")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](22,"rx-select-form-control",37),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.availableOnDevices=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](23,"div",29),n["\u0275\u0275elementStart"](24,"rx-action-list-control",38),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.actions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](12,46,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.label-field.label")),n["\u0275\u0275property"]("disabled",i.isReadOnly)("required",!0)("name","label_"+e.guid)("ngModel",e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.iconPickerOptions)("name","icon_"+e.guid)("ngModel",e.icon),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("isDisabled",i.isReadOnly)("options",i.recordDefinitionPickerOptions)("ngModel",e.recordDefinitionName)("name","recordDefinition_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",n["\u0275\u0275pipeBind1"](17,48,e.securityFieldDefinitions$)||i.selectFormControlOptions)("ngModel",e.fieldId)("name","fieldId_"+e.guid)("disabled",!e.recordDefinitionName||i.isReadOnly)("appendToBody",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!e.recordDefinitionName||i.isReadOnly)("options",i.getExpressionFormControlOptions("recordInstance"))("ngModel",e.recordInstance)("name","recordInstance_"+e.guid),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.getExpressionFormControlOptions("disabled"))("ngModel",e.disabled)("name","disabled_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.getExpressionFormControlOptions("hidden"))("ngModel",e.hidden)("name","hidden_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",i.availableOnDevicesFormControlOptions)("ngModel",e.availableOnDevices)("name","availableOnDevices_"+e.guid)("disabled",i.isReadOnly)("appendToBody",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.actions)("name","action_"+e.guid)}}function Wo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275element"](1,"adapt-empty-state",46),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.empty-state.message")))}function Ho(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",47),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveActions()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](10);n["\u0275\u0275property"]("disabled",t.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Qo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",5),n["\u0275\u0275text"](1," No row actions added. "),n["\u0275\u0275elementEnd"]())}function Ko(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275elementStart"](1,"div",7),n["\u0275\u0275elementStart"](2,"span",8),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",9),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).openEditor(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"button",10),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index,i=n["\u0275\u0275nextContext"]().ngIf;return n["\u0275\u0275nextContext"]().removeRowAction(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Jo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Qo,2,0,"span",3),n["\u0275\u0275template"](2,Ko,6,2,"div",4),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByForRowActions)}}const Yo=["adaptRxSelect"];function Zo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"label",5),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.options.label)}}function er(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",6,7),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("options",e)("required",i.options.required)("disabled",i.isDisabled)("ngModel",i.selectedColumnOption)("optionFormatter",i.optionFormatter)("emptyOption",!0)}}function tr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"button",9),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.setSortDirection(t.ColumnSortDirection.Asc)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"button",10),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.setSortDirection(t.ColumnSortDirection.Desc)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",e.selectedSortDirection===e.ColumnSortDirection.Asc),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",e.selectedSortDirection===e.ColumnSortDirection.Desc)}}const ir=function(e){return{"is-required":e}};function nr(e,t){1&e&&n["\u0275\u0275element"](0,"div",25)}function or(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275text"](1," visible "),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.title)}}function rr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",27),n["\u0275\u0275elementStart"](1,"div",28),n["\u0275\u0275elementStart"](2,"button",29),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveColumn(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",30),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveColumn(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i)}}function ar(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275template"](1,nr,1,0,"div",14),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",15),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](3,"div",16),n["\u0275\u0275elementStart"](4,"div",17),n["\u0275\u0275elementStart"](5,"div",18),n["\u0275\u0275elementStart"](6,"div",19),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,or,2,1,"div",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,rr,4,2,"div",21),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-rx-textfield",22),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.title=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"adapt-rx-checkbox",23),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.data.visible=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"rx-stepper-with-units-form-control",24),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.data.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragDisabled",i.isReadOnly)("cdkDragData",e),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title||e.fallbackTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.visible),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",!0)("ngModel",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.data.visible)("disabled",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",i.columnWidthPropertyOptions)("ngModel",e.data.width)}}function sr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",31),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function lr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tag",26),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e)}}function dr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",27),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().openPresetColumnsModal(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" +",e.tags.restCount," more ")}}function cr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",14),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](2,"div",15),n["\u0275\u0275elementStart"](3,"div",16),n["\u0275\u0275elementStart"](4,"div",17),n["\u0275\u0275elementStart"](5,"div",18),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openPresetColumnsModal(t)}),n["\u0275\u0275element"](8,"span",20),n["\u0275\u0275text"](9," Edit grid columns "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",21),n["\u0275\u0275template"](11,lr,2,1,"adapt-tag",22),n["\u0275\u0275template"](12,dr,2,1,"button",23),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"rx-record-grid-sort-editor-control",24),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.sortModel=t})("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onSortChange(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"rx-record-grid-filter-select-control",25),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.filters=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("title",e.presetName),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.presetName," "),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngForOf",e.tags.items),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.tags.restCount),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",e.sortEditorControlOptions)("disabled",i.isReadOnly)("ngModel",e.sortModel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",e.filterSelectControlOptions)("disabled",i.isReadOnly)("ngModel",e.filters)}}function pr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",28),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function ur(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",7),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).openEditor()}),n["\u0275\u0275element"](1,"span",8),n["\u0275\u0275text"](2," Edit view presets "),n["\u0275\u0275elementEnd"]()}}function mr(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1," No presets added. "),n["\u0275\u0275elementEnd"]())}function fr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275elementStart"](1,"strong",11),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",12),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openEditor(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function hr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275template"](1,ur,3,0,"adapt-button",3),n["\u0275\u0275template"](2,mr,2,0,"span",4),n["\u0275\u0275elementStart"](3,"div",5),n["\u0275\u0275template"](4,fr,4,2,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",!i.options.recordDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.currentPresetSelectorGuid&&0===e.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByGuid)}}const gr=["filterTemplate"],vr=["visibleColumnsMenuTemplate"];function yr(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",5)}function br(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",6),n["\u0275\u0275listener"]("beforeViewComponentDrop",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBeforeViewComponentDrop(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](1,"adapt-table",7,8),n["\u0275\u0275listener"]("onSort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSort(t)}),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("dropListOrientation","horizontal")("dropPredicate",e.model.actionButtonDropPredicate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("columns",n["\u0275\u0275pipeBind1"](3,15,e.adaptTableConfig$).columns)("sortable",!e.isReadOnly)("scrollable",!0)("scrollHeight","80px")("sortMode","single")("toolbarConfig",n["\u0275\u0275pipeBind1"](4,17,e.adaptTableConfig$).toolbarConfig)("filterable",!1)("sortField",n["\u0275\u0275pipeBind1"](5,19,e.adaptTableConfig$).sortMeta.field)("sortOrder",n["\u0275\u0275pipeBind1"](6,21,e.adaptTableConfig$).sortMeta.order)("bordered",!0)("totalRecords",0)("hasEmptyState",!1)("dontEmitLazyLoadOnInputChange",!1)}}function xr(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",11),n["\u0275\u0275text"](1," Filter "),n["\u0275\u0275elementEnd"]())}function Cr(e,t){if(1&e&&(n["\u0275\u0275element"](0,"span",9),n["\u0275\u0275template"](1,xr,2,0,"div",10),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](2,1,e.model.enableFiltering$))}}function Sr(e,t){}const Dr=["cardLayoutSortModalTemplate"];function Ir(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"div",16),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",17),n["\u0275\u0275elementStart"](4,"div",18),n["\u0275\u0275elementStart"](5,"button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onSortDescClick(t)}),n["\u0275\u0275element"](6,"span",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onSortAscClick(t)}),n["\u0275\u0275element"](8,"span",21),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.header),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngClass",i.getSortDescBtnClass(e)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",i.getSortAscBtnClass(e))}}function Rr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275elementStart"](2,"div",7),n["\u0275\u0275elementStart"](3,"div",8),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",9),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,Ir,9,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div"),n["\u0275\u0275element"](11,"textarea",11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275elementStart"](14,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().clearAllSorting()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](17,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).close;return n["\u0275\u0275nextContext"]().applySorting(),t()}),n["\u0275\u0275text"](18),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](20,"button",13),n["\u0275\u0275listener"]("click",function(){return(0,n["\u0275\u0275restoreView"](e).close)()}),n["\u0275\u0275text"](21),n["\u0275\u0275pipe"](22,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,8,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.field.column.title")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.order.column.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.getSortableColumns()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("value",e.getCurrentSortingSummary())("placeholder",n["\u0275\u0275pipeBind1"](12,12,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.field.summary.empty.title")),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](16,14,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.clear-all.button.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](19,16,"com.bmc.arsys.rx.client.common.apply.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](22,18,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}const wr=["adaptTable"],Er=["adaptAdvancedFilter"],Fr=["cardLayoutRowDetailsTemplate"],Mr=["cellTemplate"],Tr=["leftCustomSectionTemplate"],Or=["rightCustomSectionTemplate"],Nr=["rowActionButtonsTemplate"];function Ar(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",20),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",21),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onColumnVisibilityChange(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.header||e.fallbackTitle)("ngModel",!e.hidden)}}function Pr(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",22),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275property"]("type","search")("label",n["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.view-components.record-grid.visible-columns-menu.empty.label"))}function jr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-search",17),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().columnSearchText=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSearchColumns()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Ar,2,2,"div",18),n["\u0275\u0275template"](3,Pr,2,4,"adapt-empty-state",19)}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.columnSearchText)("placeholder",n["\u0275\u0275pipeBind1"](1,6,"com.bmc.arsys.rx.client.view-components.record-grid.visible-columns-menu.search.placeholder"))("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.filteredVisibleColumns)("ngForTrackBy",e.trackByColumnField),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.filteredVisibleColumns.length)}}function _r(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275text"](1),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedText()," ")}}function Vr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",25),n["\u0275\u0275text"](2),n["\u0275\u0275elementStart"](3,"button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).loadTotalRowCount()}),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedTextFirstPart()," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.getLoadRecordCountLinkText()," "),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedTextSecondPart()," ")}}function kr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",23),n["\u0275\u0275template"](1,_r,2,1,"ng-container",24),n["\u0275\u0275template"](2,Vr,6,3,"ng-container",24),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isTotalRecordCountKnown),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isTotalRecordCountKnown)}}function Br(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",34),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"](3);n["\u0275\u0275property"]("guid",i.guid)("config",o.getActionButtonConfig(e,i.config))("runtimeViewModelApi",i.runtimeViewModelApi)}}function $r(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",32),n["\u0275\u0275template"](1,Br,1,3,"ng-template",null,33,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](2);n["\u0275\u0275property"]("adaptSubnavItem",e)}}function Lr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275template"](1,$r,3,1,"div",29),n["\u0275\u0275elementStart"](2,"div",30),n["\u0275\u0275element"](3,"button",31),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.actionButtons)}}function Gr(e,t){if(1&e&&n["\u0275\u0275template"](0,Lr,4,1,"div",27),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.shouldDisplayActionButtons)}}const zr=function(e,t){return{"d-inline-block":e,"d-block":t}};function Ur(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-advanced-filter",39,40),n["\u0275\u0275listener"]("selectedFiltersChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onAdvancedFiltersChange(t)})("deleteSavedFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeleteSavedFilterPreset(t)})("createNewFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCreateNewFilterPreset(t)})("updateSavedFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onUpdateSavedFilterPreset(t)})("activeSavedFilterChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActiveSavedAdvancedFilterChange(t)})("beforeActiveSavedFilterChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onBeforeActiveSavedFilterChange(t)})("editSavedFilterClick",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onEditSavedFilterClick(t)})("filterExpressionTagsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onAdvancedFilterExpressionTagsChanged(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](12,zr,e.hidden,!e.hidden))("appendDropdownToBody",!0)("texts",t.state.advancedFiltering.filterTexts)("showAnchorButtonLabel",!e.collapsed)("filterOptions",t.state.advancedFiltering.filterOptions)("selectedFilters",t.state.advancedFiltering.selectedFilters)("savedFilters",t.state.advancedFiltering.savedFilters)("enableSavedFilters",!!t.guid&&t.state.enableFilterPresets)("activeSavedFilter",t.state.advancedFiltering.activeSavedFilter)("isLoading",t.state.advancedFiltering.isLoading)("selectedFiltersIndicationStyle","mark")("applyFiltersByUserAction",!0)}}function qr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",41),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid.filters.number-of-active-filters.label",n["\u0275\u0275pureFunction1"](4,Ie,e.state.advancedFiltering.toolbarTags.length)))}}const Xr=function(e){return{"d-block":e}};function Wr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",35),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRefreshClick()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Ur,2,15,"adapt-advanced-filter",36),n["\u0275\u0275template"](3,qr,3,6,"span",37),n["\u0275\u0275elementStart"](4,"rx-filter-tags",38),n["\u0275\u0275listener"]("removeTag",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](9,Xr,e.hidden)),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.common.refresh.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.state.enableFiltering),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(e.collapsed||e.hidden)&&i.state.advancedFiltering.toolbarTags.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",e.collapsed||e.hidden)("tags",i.state.advancedFiltering.toolbarTags)("tagsLimit",i.state.filterTagsLimit)}}function Hr(e,t){}const Qr=function(e){return{"rx-cell-wrap":e}},Kr=function(e,t){return{column:e,dataItem:t}};function Jr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",44,45),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275reference"](1),o=n["\u0275\u0275nextContext"](),r=o.column,a=o.dataItem;return n["\u0275\u0275nextContext"]().onCellClick(t,[r],a,i)})("mouseover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCellMouseOver(t)}),n["\u0275\u0275elementStart"](2,"span",46,47),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275template"](4,Hr,0,0,"ng-template",48),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](1),t=n["\u0275\u0275reference"](3),i=n["\u0275\u0275nextContext"](),o=i.column,r=i.dataItem,a=n["\u0275\u0275nextContext"](),s=n["\u0275\u0275reference"](25),l=n["\u0275\u0275reference"](13);n["\u0275\u0275classProp"]("rx-selected-custom-cell",a.isCellSelected(e)),n["\u0275\u0275property"]("rxCellDisplayProps",o.cellDisplayProperties)("rxCellDisplayPropsBadgeElem",t)("rxCellDisplayPropsDataItem",r)("adaptPopover",s)("autoClose",!1)("popoverClass","table-filtering")("triggers","manual")("appendToBody",!0)("placement","top"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](14,Qr,o.wrapText)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngTemplateOutlet",o.customTemplate||l)("ngTemplateOutletContext",n["\u0275\u0275pureFunction2"](16,Kr,o,r))}}function Yr(e,t){}function Zr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",49,45),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275reference"](1),o=n["\u0275\u0275nextContext"](),r=o.column,a=o.dataItem;return n["\u0275\u0275nextContext"]().onCellClick(t,[r],a,i)})("mouseover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCellMouseOver(t)}),n["\u0275\u0275elementStart"](2,"span",46),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275template"](3,Yr,0,0,"ng-template",48),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](1),t=n["\u0275\u0275nextContext"](),i=t.column,o=t.dataItem,r=n["\u0275\u0275nextContext"](),a=n["\u0275\u0275reference"](25),s=n["\u0275\u0275reference"](13);n["\u0275\u0275classProp"]("rx-selected-custom-cell",r.isCellSelected(e)),n["\u0275\u0275property"]("adaptPopover",a)("autoClose",!1)("popoverClass","table-filtering")("triggers","manual")("appendToBody",!0)("placement","top"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](11,Qr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",i.customTemplate||s)("ngTemplateOutletContext",n["\u0275\u0275pureFunction2"](13,Kr,i,o))}}function ea(e,t){if(1&e&&(n["\u0275\u0275template"](0,Jr,5,19,"div",42),n["\u0275\u0275template"](1,Zr,4,16,"div",43)),2&e){const e=t.column;n["\u0275\u0275property"]("ngIf",e.cellDisplayProperties),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.cellDisplayProperties)}}function ta(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Qr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t),"")}}function ia(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",55),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](),i=t.dataItem,o=t.column,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(i,o,r.getCellValue(i,o))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.dataItem,r=i.column,a=n["\u0275\u0275nextContext"]();return a.downloadAttachment(o,r,a.getCellValue(o,r),t)}),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Qr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t)," ")}}function na(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",56),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](),i=t.dataItem,o=t.column;return n["\u0275\u0275nextContext"]().gridEvents.cellClick(i,o.field)})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.dataItem,r=i.column;return n["\u0275\u0275nextContext"]().gridEvents.cellKeyDown(t,o,r.field)}),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Qr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t)," ")}}function oa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",57),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.dataItem,i=e.column,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("routerLink","/"+t[i.field+"$ROUTER_LINK$"])("queryParams",t[i.field+"$QUERY_PARAMS$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,Qr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(t,i)," ")}}function ra(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",58),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.dataItem,i=e.column,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("href",t[i.field+"$LAUNCH_URL$"],n["\u0275\u0275sanitizeUrl"])("target",t[i.field+"$TARGET$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,Qr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(t,i)," ")}}function aa(e,t){if(1&e&&(n["\u0275\u0275template"](0,ta,3,4,"ng-container",24),n["\u0275\u0275template"](1,ia,3,4,"a",50),n["\u0275\u0275template"](2,na,3,4,"a",51),n["\u0275\u0275template"](3,oa,3,6,"a",52),n["\u0275\u0275template"](4,ra,3,6,"a",53)),2&e){const e=t.dataItem,i=t.column;n["\u0275\u0275property"]("ngIf",(!i.clickable||i.clickableWithHref&&!e[i.field+"$ROUTER_LINK$"]&&!e[i.field+"$LAUNCH_URL$"])&&!i.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.clickable&&i.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickable&&!i.clickableWithHref),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickableWithHref&&e[i.field+"$ROUTER_LINK$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickableWithHref&&e[i.field+"$LAUNCH_URL$"])}}function sa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-card-layout-cell-header",59),n["\u0275\u0275listener"]("sort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSortCards(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.column,i=n["\u0275\u0275nextContext"](),o=n["\u0275\u0275reference"](1);n["\u0275\u0275property"]("title",e.header||e.fallbackTitle)("columns",i.adaptTableConfig.columns)("adaptTable",o)("openDialog",i.openSortByDialog)}}function la(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-card-layout-cell-header",59),n["\u0275\u0275listener"]("sort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSortCards(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.column,i=n["\u0275\u0275nextContext"](),o=n["\u0275\u0275reference"](1);n["\u0275\u0275property"]("title",e.header||e.fallbackTitle)("columns",i.adaptTableConfig.columns)("adaptTable",o)("openDialog",i.openSortByDialog)}}function da(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",62),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275attribute"]("data-testid",e.testId+"-name"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.header||e.fallbackTitle,": ")}}function ca(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",60),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCellClick(t)}),n["\u0275\u0275template"](1,da,2,2,"div",61),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.visibleColumns)("ngForTrackBy",e.trackByColumnField)}}const pa=function(e){return{dataItem:e}};function ua(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementContainer"](1,48),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).dataItem;n["\u0275\u0275nextContext"]();const t=n["\u0275\u0275reference"](29);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,pa,e))}}function ma(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function fa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",55),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().dataItem,o=n["\u0275\u0275nextContext"]();return o.downloadAttachment(i,t,o.getCellValue(i,t))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().dataItem,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(o,i,r.getCellValue(o,i),t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function ha(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",56),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().dataItem;return n["\u0275\u0275nextContext"]().gridEvents.cellClick(i,t.field)})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().dataItem;return n["\u0275\u0275nextContext"]().gridEvents.cellKeyDown(t,o,i.field)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function ga(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",57),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("routerLink","/"+t[e.field+"$ROUTER_LINK$"])("queryParams",t[e.field+"$QUERY_PARAMS$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function va(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",58),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("href",t[e.field+"$LAUNCH_URL$"],n["\u0275\u0275sanitizeUrl"])("target",t[e.field+"$TARGET$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function ya(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",62),n["\u0275\u0275template"](1,ua,2,4,"div",24),n["\u0275\u0275template"](2,ma,2,1,"div",24),n["\u0275\u0275template"](3,fa,2,1,"a",50),n["\u0275\u0275template"](4,ha,2,1,"a",51),n["\u0275\u0275template"](5,ga,2,3,"a",52),n["\u0275\u0275template"](6,va,2,3,"a",53),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().dataItem;n["\u0275\u0275attribute"]("data-testid",e.testId+"-value"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(!e.clickable||e.clickableWithHref&&!i[e.field+"$ROUTER_LINK$"]&&!i[e.field+"$LAUNCH_URL$"])&&!e.isDownloadableAttachment&&!e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.clickable&&e.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickable&&!e.clickableWithHref),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickableWithHref&&i[e.field+"$ROUTER_LINK$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickableWithHref&&i[e.field+"$LAUNCH_URL$"])}}function ba(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",66),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().dataItem,o=n["\u0275\u0275nextContext"]();return o.onFilterBySelection(t,o.visibleColumns,i)}),n["\u0275\u0275elementEnd"]()}}function xa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",63),n["\u0275\u0275template"](1,ya,7,7,"div",61),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,ba,1,0,"button",64),n["\u0275\u0275elementStart"](3,"button",65),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).dataItem,i=n["\u0275\u0275nextContext"]();return i.openRowDetails(i.adaptTableConfig.columns,t)}),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.visibleColumns)("ngForTrackBy",e.trackByColumnField),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isFilterBySelectionButtonVisible),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](4,4,"com.bmc.arsys.rx.client.view-components.record-grid.cards.record-details.button.label"))}}function Ca(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",75),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().getData,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t().rowDataItem,e)," ")}}function Sa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",76),n["\u0275\u0275elementStart"](1,"a",77),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().getData,o=n["\u0275\u0275nextContext"]();return o.downloadAttachment(i().rowDataItem,t,o.getCellValue(i().rowDataItem,t))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().getData,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(o().rowDataItem,i,r.getCellValue(o().rowDataItem,i),t)}),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().getData,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t().rowDataItem,e),"")}}function Da(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",76),n["\u0275\u0275elementContainer"](1,48),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).getData;n["\u0275\u0275nextContext"]();const t=n["\u0275\u0275reference"](29);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,pa,e().rowDataItem))}}function Ia(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",71),n["\u0275\u0275elementStart"](1,"div",72),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Ca,2,1,"div",73),n["\u0275\u0275template"](4,Sa,3,1,"div",74),n["\u0275\u0275template"](5,Da,2,4,"div",74),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("",e.header||e.fallbackTitle,":"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isDownloadableAttachment&&!e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isRowActionsColumn)}}function Ra(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",67),n["\u0275\u0275template"](1,Ia,6,4,"div",68),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",69),n["\u0275\u0275elementStart"](3,"button",70),n["\u0275\u0275listener"]("click",function(){return(0,n["\u0275\u0275restoreView"](e).close)()}),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.getData;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e().columns),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,2,"com.bmc.arsys.rx.client.common.close.label")," ")}}function wa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",78),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().applyFilterBySelection()}),n["\u0275\u0275elementEnd"]()}}function Ea(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",84),2&e){const e=t.$implicit;n["\u0275\u0275property"]("guid",e.guid)("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)}}function Fa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",79),n["\u0275\u0275listener"]("onOpen",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().onRowActionOpen(t)}),n["\u0275\u0275element"](1,"button",80),n["\u0275\u0275elementStart"](2,"div",81),n["\u0275\u0275template"](3,Ea,1,3,"rx-action-button",82),n["\u0275\u0275elementStart"](4,"div",83),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.rowActionButtons),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,2,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.no-actions-available.label")," ")}}function Ma(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",89),2&e){const e=t.$implicit;n["\u0275\u0275property"]("guid",e.guid)("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)}}function Ta(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",85),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("onOpen",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().onRowActionOpen(t)}),n["\u0275\u0275elementStart"](1,"button",86),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",87),n["\u0275\u0275template"](5,Ma,1,3,"rx-action-button",88),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.dropdown.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.rowActionButtons)}}function Oa(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")}function Na(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",6),2&e){const e=n["\u0275\u0275nextContext"](2).$implicit;n["\u0275\u0275property"]("layout",e)}}function Aa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tab-panel",5),n["\u0275\u0275template"](1,Na,1,1,"rx-runtime-view-canvas-item",4),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("adapt-tab-title",e.state.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.canRenderContentForTab(e))}}function Pa(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",6),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("layout",e)}}function ja(e,t){if(1&e&&(n["\u0275\u0275template"](0,Aa,2,2,"adapt-tab-panel",3),n["\u0275\u0275template"](1,Pa,1,1,"rx-runtime-view-canvas-item",4)),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",!i.isHiddenTab(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.isHiddenTab(e)&&i.canRenderContentForTab(e))}}function _a(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-tabset",1),n["\u0275\u0275listener"]("tab-active-changed",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActiveTabChanged(t.index)}),n["\u0275\u0275template"](1,ja,2,2,"ng-template",2),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("fullHeight",!0)("tab-active",e.getActiveTabIndexForAdaptTabset()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByForTabs)}}const Va=["adaptTabset"];function ka(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-tab-panel",4),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("adapt-tab-title",e.data.label)("icon-close",!i.isReadOnly&&i.components.length&&i.components.length>1)("id",e.guid)}}function Ba(e,t){if(1&e&&n["\u0275\u0275element"](0,"img",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275styleProp"]("max-width",e.state.maxWidth),n["\u0275\u0275property"]("src",e.state.imageUrl,n["\u0275\u0275sanitizeUrl"]),n["\u0275\u0275attribute"]("alt",e.state.altText)}}function $a(e,t){if(1&e&&n["\u0275\u0275element"](0,"span",4),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("aria-label",e.state.altText)}}function La(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Ba,1,4,"img",1),n["\u0275\u0275template"](2,$a,1,1,"span",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("d-flex ",e.state.alignmentStyle," image-container"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state.imageUrl),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state.isImageBroken)}}function Ga(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"p",6),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.view-preset-selector.view-preset-already-exists.error.message")," "))}function za(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275element"](1,"adapt-icon",15),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.strings.maxRecipientsWarning," ")}}function Ua(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"strong"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div"),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.result;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.emailAddress)}}function qa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.strings.customPresetsTitle)}}function Xa(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-icon",17),2&e){const e=n["\u0275\u0275nextContext"](5);n["\u0275\u0275property"]("adaptTooltip",e.strings.sharedTooltip)}}function Wa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",15),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](4).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275template"](2,Xa,1,1,"adapt-icon",16),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](4);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.userSharedViewPresetGuid&&i.isSharingFeatureEnabled)}}function Ha(e,t){1&e&&n["\u0275\u0275element"](0,"div",18)}function Qa(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,qa,2,1,"div",6),n["\u0275\u0275template"](2,Wa,3,4,"button",12),n["\u0275\u0275template"](3,Ha,1,0,"div",13),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isSharingFeatureEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.state.customViewPresetOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isSharingFeatureEnabled)}}function Ka(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",22),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](4).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](4);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ja(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",14),n["\u0275\u0275text"](2),n["\u0275\u0275elementStart"](3,"button",19),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).onAddSharedPresetsClick()}),n["\u0275\u0275element"](4,"adapt-icon",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,Ka,2,3,"button",21),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.strings.sharedPresetsTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("adaptTooltip",e.strings.addSharedViewPresets),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.state.sharedViewPresetOptions)}}function Ya(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.strings.systemPresetsTitle)}}function Za(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",23),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](3).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](3);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function es(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",24),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.editedViewPresetTagLabel," ")}}function ts(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",25),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).saveViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.strings.saveLabel," ")}}function is(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).saveAsViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.strings.saveAsLabel," ")}}function ns(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",35),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).discardViewPresetChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.discardChangesButtonLabel," ")}}function os(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",36),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).saveAsViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.saveAsLabel," ")}}function rs(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",37),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).renameViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.renameLabel," ")}}function as(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",38),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](4);return t.deleteViewPreset(t.state.appliedViewPresetOption)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.deleteLabel," ")}}function ss(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",39),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).shareViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.shareLabel," ")}}function ls(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",27),n["\u0275\u0275element"](1,"button",28),n["\u0275\u0275elementStart"](2,"div",29),n["\u0275\u0275template"](3,ns,2,1,"adapt-button",30),n["\u0275\u0275template"](4,os,2,1,"adapt-button",31),n["\u0275\u0275template"](5,rs,2,1,"adapt-button",32),n["\u0275\u0275template"](6,as,2,1,"adapt-button",33),n["\u0275\u0275template"](7,ss,2,1,"adapt-button",34),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.isOperationInProgress)("showCaret",!1),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.isSharingEnabled&&!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&!e.isViewPresetEdited)}}function ds(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"button",4),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",5),n["\u0275\u0275template"](5,Qa,4,3,"ng-container",0),n["\u0275\u0275template"](6,Ja,6,3,"ng-container",0),n["\u0275\u0275template"](7,Ya,2,1,"div",6),n["\u0275\u0275template"](8,Za,2,3,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,es,2,1,"span",8),n["\u0275\u0275template"](10,ts,2,2,"adapt-button",9),n["\u0275\u0275template"](11,is,2,2,"adapt-button",10),n["\u0275\u0275template"](12,ls,8,7,"div",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.state.appliedViewPresetOption.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("dropdown-menu ",t.isSharingFeatureEnabled?"preset-selector":"",""),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.customViewPresetOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.isSharingEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isSharingFeatureEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.state.systemViewPresetOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.appliedViewPresetOption.isSystem||t.state.appliedViewPresetOption.isShared||!e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited||!t.state.appliedViewPresetOption.isSystem)}}function cs(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ds,13,13,"div",1),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state)}}function ps(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0,2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h1"),n["\u0275\u0275elementStart"](3,"span",4),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div"),n["\u0275\u0275elementStart"](7,"adapt-agreement-card",5),n["\u0275\u0275listener"]("stateChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.adaptAgreementState=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",6),n["\u0275\u0275elementStart"](9,"adapt-rx-switch",7),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.useAdaptRadar=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",8),n["\u0275\u0275elementStart"](11,"adapt-rx-switch",9),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.loadGainsightFromBmcIt=t}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"adapt-rx-select",10),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.deploymentTypeOptions=t}),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](15,"adapt-rx-select",11),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.environmentTypeOptions=t}),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](17,"div",12),n["\u0275\u0275elementStart"](18,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().save()}),n["\u0275\u0275text"](19),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](5,22,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("showOrganizationSettings",!0)("showMarketingSection",!1)("multiProductUsage",!1)("showShadow",!1)("state",e.adaptAgreementState),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isLabelBefore",!0)("size","lg")("ngModel",e.useAdaptRadar),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.load-gainsight-script-from-bmc-it.label")),n["\u0275\u0275property"]("isLabelBefore",!0)("size","lg")("ngModel",e.loadGainsightFromBmcIt),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](14,26,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.deployment-type.label")),n["\u0275\u0275property"]("options",i.deploymentTypeOptions)("optionFormatter",i.optionFormatter)("ngModel",e.deploymentTypeOptions),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](16,28,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.environment-type.label")),n["\u0275\u0275property"]("options",i.environmentTypeOptions)("ngModel",e.environmentTypeOptions),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](20,30,"com.bmc.arsys.rx.client.common.save.label")," ")}}function us(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275element"](1,"adapt-empty-state",15),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.gainsight.feature-is-disabled.label")))}var ms,fs,hs,gs;!function(e){e.Primary="primary",e.Secondary="secondary",e.Tertiary="tertiary"}(ms||(ms={})),function(e){e.Link="link",e.Clear="clear"}(fs||(fs={})),function(e){e.Small="small",e.Default="default",e.Large="large"}(hs||(hs={})),function(e){e.Left="left",e.Right="right"}(gs||(gs={}));class vs{getButtonType(e){let t;switch(e){case ms.Secondary:t="secondary";break;case ms.Tertiary:t="tertiary";break;default:t="primary"}return t}getIconCssClass(e,t=gs.Left){return e?`d-icon-${t}-${e}`:""}}vs.\u0275fac=function(e){return new(e||vs)},vs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:vs,factory:vs.\u0275fac});const ys="actions";class bs extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.viewActionValidatorService=this.injector.get(c.RxViewActionValidatorService),this.translateService=this.injector.get(p.TranslateService),this.label$=this.sandbox.getComponentPropertyValue("labelKey").pipe((0,r.switchMap)(e=>e?(0,o.of)(this.translateService.instant(e)):this.sandbox.getComponentPropertyValue("label")),(0,r.takeUntil)(this.sandbox.destroyed$)),this.style$=this.sandbox.getComponentPropertyValue("style"),this.size$=this.sandbox.getComponentPropertyValue("size"),this.icon$=this.sandbox.getComponentPropertyValue("icon"),this.iconAlignment$=this.sandbox.getComponentPropertyValue("iconAlignment"),this.fieldDefinitions$=this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions),(0,r.catchError)(()=>(0,o.of)([]))):(0,o.of)([])))}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({iconAlignment:gs.Left,label:"New button",size:hs.Default,icon:null,style:ms.Primary,recordDefinitionName:null,fieldId:null,recordInstance:null},d.RX_DISABLED_PROP_DEFAULT_VALUE),d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){(0,o.combineLatest)([this.sandbox.componentProperties$,this.fieldDefinitions$]).pipe((0,r.map)(([e,t])=>this.getInspectorConfig(e,t)),(0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)});const e=this.sandbox.getChildComponents();(0,o.combineLatest)([e.pipe((0,r.switchMap)(e=>this.viewActionValidatorService.validate(e,ys))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(c.validateCssClassNames)),this.sandbox.getComponentPropertyValue(d.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(c.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.setValidationIssues(e)}),this.fieldDefinitions$.pipe((0,r.withLatestFrom)(this.componentProperties$),(0,r.map)(([e,t])=>this.getInspectorConfig(t,e))).subscribe(e=>this.sandbox.updateInspectorConfig(e)),this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.pairwise)()).subscribe(([e,t])=>{e&&e!==t&&this.sandbox.updateComponentProperties({fieldId:null,recordInstance:null})}),this.label$.subscribe(e=>{this.sandbox.setBreadcrumbs(e)}),this.sandbox.getComponentPropertyValue("action").pipe((0,r.switchMap)(e=>e?o.EMPTY:this.label$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[{label:"Disabled",expression:this.getExpressionForProperty("disabled")},{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}setValidationIssues(e){this.sandbox.setValidationIssues(e)}getInspectorConfig(e,t){const i=[{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",tooltip:new s.Tooltip("The view component will be hidden if the user has no access to the specified record definition."),definitionType:l.RxDefinitionPickerType.StandardDataRecord}}];return e.recordDefinitionName&&i.push({name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",tooltip:new s.Tooltip("The view component will be hidden if the user has no access to the specified field, or disabled if the user only has View permission for the specified field. <br><br> Record definition name, Field name, and Record instance must all be specified in order to control the disabled/hidden state of the view component using field permissions."),options:t.map(e=>({name:e.name,id:String(e.id)})),emptyOption:!0}},{name:"recordInstance",component:l.ExpressionInspectorControlComponent,options:{label:"Record instance",tooltip:new s.Tooltip("Expression pointing to a record instance that provides the field permission details.")}}),{inspectorSectionConfigs:[{label:"General",controls:[{name:"label",component:l.TextFormControlComponent,options:{label:"Label"}},{name:"style",component:l.SelectFormControlComponent,options:{label:"Style",required:!0,options:(0,u.map)(ms,(e,t)=>({id:e,name:t}))}},{name:"size",component:l.SelectFormControlComponent,options:{label:"Size",options:(0,u.map)(hs,(e,t)=>({id:e,name:t})),sortAlphabetically:!1}},{name:"icon",component:l.IconPickerFormControlComponent,options:{label:"Icon"}},{name:"iconAlignment",component:l.SelectFormControlComponent,options:{label:"Icon alignment",options:(0,u.map)(gs,(e,t)=>({id:e,name:t}))}},(0,c.getDisabledFieldInspectorConfig)(),...(0,c.getStandardPropsInspectorConfigs)()]},{label:"Actions",controls:[{widgetName:ys,component:c.ActionListWidgetComponent}]},{label:"Security",controls:i}]}}}class xs{constructor(e){this.rxActionButtonService=e}ngOnInit(){this.iconCssClass$=(0,o.combineLatest)([this.model.icon$,this.model.iconAlignment$]).pipe((0,r.map)(([e,t])=>this.rxActionButtonService.getIconCssClass(e,t))),this.buttonType$=this.model.style$.pipe((0,r.map)(e=>this.rxActionButtonService.getButtonType(e))),this.size$=this.model.size$.pipe((0,r.map)(e=>e||hs.Default))}}xs.\u0275fac=function(e){return new(e||xs)(n["\u0275\u0275directiveInject"](vs))},xs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xs,selectors:[["rx-action-button-design"]],inputs:{model:"model"},decls:6,vars:12,consts:[["adapt-button","",3,"btn-type","size","ngClass"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("btn-type",n["\u0275\u0275pipeBind1"](1,4,t.buttonType$))("size",n["\u0275\u0275pipeBind1"](2,6,t.size$))("ngClass",n["\u0275\u0275pipeBind1"](3,8,t.iconCssClass$)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,10,t.model.label$),"\n"))},directives:[m.AdaptButtonComponent,f.NgClass],pipes:[f.AsyncPipe],encapsulation:2,changeDetection:0});class Cs{constructor(){this.deprecatedButtonStyles=[fs.Link,fs.Clear]}adaptDefinition(e){(0,u.includes)(this.deprecatedButtonStyles,e.propertiesByName.style)&&(e.propertiesByName.style=ms.Tertiary),e.propertiesByName.size||(e.propertiesByName.size=hs.Small),e.propertiesByName.icon&&(e.propertiesByName.icon=(0,u.get)(d.RX_LEGACY_ICONS,e.propertiesByName.icon,e.propertiesByName.icon))}}Cs.\u0275fac=function(e){return new(e||Cs)},Cs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Cs,factory:Cs.\u0275fac});class Ss{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.actionButtonAdapterService=t,this.rxDefinitionAdapterRegistryService.registerDesignAdapter(d.RxViewComponentType.ActionButton,this.actionButtonAdapterService)}}Ss.\u0275fac=function(e){return new(e||Ss)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Cs))},Ss.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ss,declarations:[xs],imports:[f.CommonModule,m.AdaptButtonModule,c.ViewDesignerCanvasModule,c.ActionListWidgetModule,l.IconPickerFormControlModule]}),Ss.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs,Cs],imports:[[f.CommonModule,m.AdaptButtonModule,c.ViewDesignerCanvasModule,c.ActionListWidgetModule,l.IconPickerFormControlModule]]});class Ds extends h.BaseViewComponent{constructor(e,t,i,n){super(),this.rxLogService=e,this.translateService=t,this.rxNotificationService=i,this.rxActionButtonService=n,this.api={click:this.click.bind(this),setProperty:this.setProperty.bind(this)},this.state={},this.isActionInProgress=!1,this.isDisabled=!1,this.buttonType=""}get hostClass(){const e=this.state,t=`${d.RxViewComponentType.ActionButton}_${e.style}`;return e.styles?`${t} ${e.styles}`:t}ngOnInit(){this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{if(Object.assign(this.state,e),e.labelKey?this.state.buttonLabel=this.translateService.instant(e.labelKey):this.state.buttonLabel=e.label,this.state.icon="",this.state.cls=e.cls||"",e.iconCls||e.icon){const t=e.iconCls||e.icon,i=(e.label||e.labelKey)&&e.iconAlignment||"left";this.state.icon=this.rxActionButtonService.getIconCssClass(t,i)}e.iconCls&&e.icon&&this.rxLogService.warning("iconCls option is specified, icon will be ignored."),e.cls||(this.buttonType=this.rxActionButtonService.getButtonType(this.state.style)),e.cls&&e.style&&this.rxLogService.warning("cls option is specified, style will be ignored."),this.validateRecordDefinitionName(),this.isHidden=this.isHiddenFunc(),this.isDisabled=this.isDisabledFunc()})}click(){if(!this.isDisabled)return this.isActionInProgress=!0,this.isDisabled=!0,this.triggerViewActions().then(e=>{this.isActionInProgress=!1,this.isDisabled=this.isDisabledFunc()}).catch(e=>{this.isActionInProgress=!1,this.isDisabled=this.isDisabledFunc()})}isDisabledFunc(){return Boolean(this.state.disabled)||this.isActionInProgress||this.state.recordInstance&&this.state.fieldId&&this.state.recordInstance.recordDefinitionName===this.state.recordDefinitionName&&(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)})&&(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)}).permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view}isHiddenFunc(){return this.isHidden=Boolean(this.state.hidden)||this.state.recordInstance&&(this.state.recordInstance.recordDefinitionName!==this.state.recordDefinitionName||this.state.fieldId&&!(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)}))}setProperty(e,t){if(!(0,u.includes)(["hidden","disabled"],e))return(0,o.throwError)(`Action Button: property ${e} is not settable.`);this.state[e]=t,this.notifyPropertyChanged(e,this.state[e])}validateRecordDefinitionName(){if(this.state.recordInstance&&this.state.recordInstance.recordDefinitionName!==this.state.recordDefinitionName){const e=this.translateService.instant("com.bmc.arsys.rx.client.view-components.action-button.component-name.label",{label:this.state.label}),t=this.translateService.instant("com.bmc.arsys.rx.client.view-components.action-button.configuration-error.message",{componentName:e});this.rxNotificationService.addErrorMessage(t)}}}Ds.\u0275fac=function(e){return new(e||Ds)(n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](vs))},Ds.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ds,selectors:[["rx-action-button"]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.hostClass)},inputs:{guid:"guid",config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["adapt-button","","type","button","class","mw-100 rx-ellipsis",3,"btn-type","ngClass","disabled","size","click",4,"ngIf"],["adapt-button","","type","button",1,"mw-100","rx-ellipsis",3,"btn-type","ngClass","disabled","size","click"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,_,3,8,"button",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,m.AdaptButtonComponent,f.NgClass],styles:["[_nghost-%COMP%]{display:block}"]});class Is{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.actionButtonAdapterService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(d.RxViewComponentType.ActionButton,this.actionButtonAdapterService)}}var Rs;Is.\u0275fac=function(e){return new(e||Is)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Cs))},Is.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Is,declarations:[Ds],imports:[m.AdaptButtonModule,f.CommonModule,p.TranslateModule,m.AdaptIconModule],exports:[Ds]}),Is.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs,Cs],imports:[[m.AdaptButtonModule,f.CommonModule,p.TranslateModule,m.AdaptIconModule]]}),function(e){e.Left="left",e.Right="right",e.Center="center"}(Rs||(Rs={}));const ws={alignmentOptions:{left:{id:Rs.Left,name:"Left",cls:"align-left"},center:{id:Rs.Center,name:"Center",cls:"align-center"},right:{id:Rs.Right,name:"Right",cls:"align-right"}}};class Es{getAlignClass(e){return(0,u.get)(ws.alignmentOptions,[e,"cls"],"")}}Es.\u0275fac=function(e){return new(e||Es)},Es.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Es,factory:Es.\u0275fac});class Fs extends Ds{}Fs.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Fs)))(t||Fs)}}(),Fs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fs,selectors:[["rx-button-bar-dropdown-item-component"]],inputs:{guid:"guid",config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["type","button","class","dropdown-item",3,"disabled","click",4,"ngIf"],["type","button",1,"dropdown-item",3,"disabled","click"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,V,2,2,"button",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf],encapsulation:2});class Ms extends h.BaseViewComponent{constructor(e,t,i,n,r,a){super(),this.elementRef=e,this.runtimeCanvasItemComponent=t,this.changeDetector=i,this.ngZone=n,this.rxButtonBarService=r,this.renderer=a,this.api={setProperty:this.setProperty.bind(this)},this.childLayouts=null,this.isDropdownVisible=!1,this.resize$=new o.Subject,this.onResizeThrottled=(0,u.throttle)(this.onResize.bind(this),100)}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.alignClass=this.rxButtonBarService.getAlignClass(e.alignment)}),this.childLayouts=(0,u.get)(this.runtimeCanvasItemComponent.getChildren(d.RX_VIEW_DEFINITION.defaultOutletName),"[0].children")}ngAfterViewInit(){const e=this.renderer.selectRootElement(this.elementRef.nativeElement,!0);if(!(0,u.isEmpty)(this.childLayouts)){const t=this.childLayouts.map(e=>e.config);this.ngZone.runOutsideAngular(()=>{this.resizeSensor=new g.ResizeSensor(e,e=>{this.ngZone.run(()=>this.resize$.next(e))})}),(0,o.merge)(...t,this.resize$).pipe((0,r.map)(t=>t.width||e.offsetWidth),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.onResizeThrottled(e))}this.onResize(e.offsetWidth),this.changeDetector.detectChanges()}ngOnDestroy(){super.ngOnDestroy(),this.resizeSensor&&this.resizeSensor.detach()}onResize(e){let t=0;const i=this.dropdownToggleButton?this.renderer.selectRootElement(this.dropdownToggleButton.nativeElement,!0).offsetWidth:0;this.buttonItemsQueryList.forEach((n,o)=>{t+=this.renderer.selectRootElement(n.nativeElement,!0).offsetWidth;const r=Math.floor(e)>=Math.ceil(t)+i;this.childLayouts[o].showInDropdown=!r,!(0,u.isUndefined)(this.childLayouts[o-1])&&this.childLayouts.filter(e=>e.showInDropdown).length<2&&(this.childLayouts[o-1].showInDropdown=!r)}),this.isDropdownVisible=!(0,u.isEmpty)(this.childLayouts)&&(0,u.last)(this.childLayouts).showInDropdown}trackByFn(e,t){return t.guid}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Button Bar: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}Ms.\u0275fac=function(e){return new(e||Ms)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](h.RuntimeViewCanvasItemComponent),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](Es),n["\u0275\u0275directiveInject"](n.Renderer2))},Ms.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ms,selectors:[["rx-button-bar"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](k,5,n.ElementRef),n["\u0275\u0275viewQuery"](B,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.dropdownToggleButton=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.buttonItemsQueryList=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","button-container",3,"ngClass",4,"ngIf"],[1,"button-container",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","dropdown","adaptDropdown","",3,"placement",4,"ngIf"],[3,"ngClass"],[3,"layout"],["buttonItems",""],["adaptDropdown","",1,"dropdown",3,"placement"],["type","button","adaptDropdownToggle","",1,"btn","btn-secondary","rx-toggle"],["dropdownToggle",""],["adaptDropdownMenu","",1,"dropdown-menu"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"config","runtimeViewModelApi","guid",4,"ngIf"],[3,"config","runtimeViewModelApi","guid"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,X,3,4,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",t.childLayouts&&!t.isHidden)},directives:[f.NgIf,f.NgClass,f.NgForOf,h.RuntimeViewCanvasItemComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,Fs],styles:["[_nghost-%COMP%]{display:block}.button-container[_ngcontent-%COMP%]{display:flex}.button-container.align-center[_ngcontent-%COMP%]{justify-content:center}.button-container.align-right[_ngcontent-%COMP%]{justify-content:flex-end}.button-container.align-left[_ngcontent-%COMP%]{justify-content:flex-start}.button-container[_ngcontent-%COMP%]   rx-runtime-view-canvas-item[_ngcontent-%COMP%]{display:inline-block}.button-container[_ngcontent-%COMP%]   rx-runtime-view-canvas-item[_ngcontent-%COMP%]:not(:has( > [hidden]))[_ngcontent-%COMP%]{padding-right:5px}.rx-toggle[_ngcontent-%COMP%]{padding-left:1px;height:100%}"]});class Ts{}Ts.\u0275fac=function(e){return new(e||Ts)},Ts.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ts,declarations:[Ms,Fs],imports:[f.CommonModule,h.RuntimeViewCanvasModule,m.AdaptDropdownModule],exports:[Ms]}),Ts.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Es],imports:[[f.CommonModule,h.RuntimeViewCanvasModule,m.AdaptDropdownModule.forRoot()]]});class Os extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.hasChildren$=this.sandbox.getChildComponentGuids().pipe((0,r.map)(e=>!(0,u.isEmpty)(e))),this.componentProperties$=this.sandbox.componentProperties$}static getInitialProperties(e){return Object.assign(Object.assign({alignment:Rs.Left,name:null},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])}),this.componentProperties$.subscribe(e=>{this.validate(e)})}dropPredicate(e){return e.draggedViewComponentDescriptor.type===d.RxViewComponentType.ActionButton}validate(e){this.sandbox.setValidationIssues((0,c.validateStandardProps)(e))}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Button bar.")}},{name:"alignment",component:l.SelectFormControlComponent,options:{label:"Alignment",options:(0,u.values)(ws.alignmentOptions),sortAlphabetically:!1}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}}class Ns{constructor(e){this.rxButtonBarService=e,this.alignment="",this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.model.componentProperties$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.alignment=this.rxButtonBarService.getAlignClass(e.alignment)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Ns.\u0275fac=function(e){return new(e||Ns)(n["\u0275\u0275directiveInject"](Es))},Ns.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ns,selectors:[["rx-button-bar-design"]],inputs:{model:"model"},decls:2,vars:6,consts:[["dropListOrientation","horizontal",1,"button-bar-design-container","border",3,"ngClass","dropPredicate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("border-transparent",n["\u0275\u0275pipeBind1"](1,4,t.model.hasChildren$)),n["\u0275\u0275property"]("ngClass",t.alignment)("dropPredicate",t.model.dropPredicate))},directives:[c.CanvasOutletComponent,f.NgClass],pipes:[f.AsyncPipe],styles:["[_nghost-%COMP%]  .button-bar-design-container{display:block}[_nghost-%COMP%]  .button-bar-design-container.align-center .cdk-drop-list{justify-content:center}[_nghost-%COMP%]  .button-bar-design-container.align-right .cdk-drop-list{justify-content:flex-end}[_nghost-%COMP%]  .button-bar-design-container.align-left .cdk-drop-list{justify-content:flex-start}[_nghost-%COMP%]  .button-bar-design-container rx-canvas-item-container{min-width:100%}[_nghost-%COMP%]  .button-bar-design-container rx-canvas-item-container .cdk-drop-list{min-height:50px;display:flex;flex-flow:row wrap}.border-transparent[_ngcontent-%COMP%]{border-color:transparent!important}"]});class As{}As.\u0275fac=function(e){return new(e||As)},As.\u0275mod=n["\u0275\u0275defineNgModule"]({type:As,declarations:[Ns],imports:[f.CommonModule,c.ViewDesignerCanvasModule]}),As.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Es],imports:[[f.CommonModule,c.ViewDesignerCanvasModule]]});class Ps extends h.BaseViewComponent{constructor(e,t){super(),this.elementRef=e,this.renderer=t,this.state={},this.api={setProperty:this.setProperty.bind(this)}}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.state=Object.assign({},e)})}setProperty(e,t){if("hidden"!==e){const t=this.renderer.selectRootElement(this.elementRef.nativeElement,!0).tagName.toLowerCase();return(0,o.throwError)(`${t}: property ${e} is not settable.`)}this.state.hidden=t,this.notifyPropertyChanged(e,t)}}Ps.\u0275fac=function(e){return new(e||Ps)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2))},Ps.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ps,selectors:[["rx-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"hidden"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("hidden",t.state.hidden)},directives:[h.RuntimeViewCanvasOutletComponent],styles:["[_nghost-%COMP%]{display:block}.rx-auto-fill[_nghost-%COMP%] >rx-runtime-view-canvas-outlet>rx-runtime-view-canvas-item-container{display:flex;flex-direction:column;height:100%}"]});class js{constructor(e,t){this.viewDefinitionParserService=e,this.rxJsonParserService=t,this.componentDefinitionType=d.RxViewComponentType.Container}adaptDefinition(e){this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type===this.componentDefinitionType).map(e=>e.componentDefinition).forEach(e=>{if(e.layout){let t=this.rxJsonParserService.tryParseJson(e.layout);if(t&&t.componentDefinitionId){const i=t.columns.map(t=>{const i=e.propertiesByName.rowWrap||"sm",n=t.span||12;return{cssClass:`${"xs"===i?`col-${n}`:`col-${i}-${n}`} ${"xs"!==i?`rx-mb-${i}`:""}`,children:t.children.map(e=>e.componentDefinitionId)}});t={outlets:[{name:"DEFAULT",columns:i}]},e.layout=JSON.stringify(t)}else t&&t.outlets&&(t.outlets.forEach(t=>{t.columns.filter(e=>!e.cssClass).forEach(t=>{const i=e.propertiesByName.rowWrap||"sm",n=t.span||12,o="xs"===i?`col-${n}`:`col-${i}-${n}`,r="xs"!==i?`rx-mb-${i}`:"";t.cssClass=`${o} ${r}`})}),e.layout=JSON.stringify(t))}})}}js.\u0275fac=function(e){return new(e||js)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},js.\u0275prov=n["\u0275\u0275defineInjectable"]({token:js,factory:js.\u0275fac,providedIn:"root"});class _s{constructor(e,t){this.containerComponentDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,t.registerRuntimeAdapter(d.RxViewComponentType.Container,this.containerComponentDefinitionAdapterService)}}_s.\u0275fac=function(e){return new(e||_s)(n["\u0275\u0275inject"](js),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},_s.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_s,declarations:[Ps],imports:[f.CommonModule,h.RuntimeViewCanvasModule],exports:[Ps]}),_s.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,h.RuntimeViewCanvasModule]]});class Vs extends c.CanvasItemContainerComponent{constructor(e,t,i,o){super(e,t),this.canvasItemApi=e,this.canvasOutletHelperService=t,this.elementRef=i,this.renderer=o,this.maxNumberOfColumns=12,this.defaultGutterStep=50,this.percentSpanSize=100/this.maxNumberOfColumns,this.gutterStep=this.defaultGutterStep,this.columnResize=new n.EventEmitter}onWindowResize(){this.setGutterStep()}ngAfterViewInit(){const e=this.outlet.columns.map(e=>e.span);this.setSpanSizes(e),this.setGutterStep()}onDragEnd(e){const t=this.getPercentToSpanSizes(e.sizes);this.columnResize.emit(t),this.setSpanSizes(t)}getPercentToSpanSizes(e){return e.map(e=>Math.round(e*this.maxNumberOfColumns/100))}setSpanSizes(e){this.splitComponent.setVisibleAreaSizes(this.getSpanToPercentSizes(e))}getSpanToPercentSizes(e){return e.map(e=>e*this.percentSpanSize)}setGutterStep(){const e=this.renderer.selectRootElement(this.elementRef.nativeElement,!0);this.gutterStep=Math.round(e.clientWidth/this.maxNumberOfColumns)||this.defaultGutterStep}}var ks;Vs.\u0275fac=function(e){return new(e||Vs)(n["\u0275\u0275directiveInject"](c.ViewDesignerCanvasItemApiToken),n["\u0275\u0275directiveInject"](c.CanvasOutletHelperService),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2))},Vs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vs,selectors:[["rx-container-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](y.SplitComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.splitComponent=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("resize",function(){return t.onWindowResize()},!1,n["\u0275\u0275resolveWindow"])},outputs:{columnResize:"columnResize"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:9,consts:[["unit","percent","gutterSize","1",3,"gutterStep","dragEnd"],["minSize","8",4,"ngFor","ngForOf","ngForTrackBy"],["minSize","8"],[3,"isReadOnly","colIndex","column","layout","dropListDropped"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"as-split",0),n["\u0275\u0275listener"]("dragEnd",function(e){return t.onDragEnd(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,W,2,4,"as-split-area",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("selected",n["\u0275\u0275pipeBind1"](1,7,t.layout.isSelected$))("readonly",t.isReadOnly),n["\u0275\u0275property"]("gutterStep",t.gutterStep),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.outlet.columns)("ngForTrackBy",t.trackByColFn))},directives:[y.SplitComponent,f.NgForOf,y.SplitAreaDirective,c.CanvasItemColumnComponent],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}as-split[_ngcontent-%COMP%]:not(.readonly).selected    >.as-split-gutter{visibility:visible}as-split[_ngcontent-%COMP%]     as-split-area{height:revert!important;min-height:200px}as-split[_ngcontent-%COMP%]     as-split-area>rx-canvas-item-column{height:100%}as-split[_ngcontent-%COMP%]     as-split-area>rx-canvas-item-column>.cdk-drop-list{height:100%;min-height:auto}as-split[_ngcontent-%COMP%]     .as-split-gutter{visibility:hidden;height:revert!important;position:relative;background-color:#d6d7d8!important}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon{border:1px solid #d6d7d8;height:72px!important;width:11px!important;background:white!important;border-radius:2px;position:absolute}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:hover:before, as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:hover:after{background-color:#d6d7d8}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:before, as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:after{display:inline-block;content:"";position:absolute;top:50%;width:2px;height:64px;background-color:#f0f1f1;border-radius:2px;transform:translateY(-50%);transition:background-color .25s ease}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:before{left:2px}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:after{left:5px}']}),function(e){e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e.Xxl="xxl"}(ks||(ks={}));const Bs={type:d.RxViewComponentType.Container,maxColumnSpan:12,rowWrapOptions:{xs:{id:ks.Xs,name:"Extra Small (No wrapping)"},sm:{id:ks.Sm,name:"Small (576 px)"},md:{id:ks.Md,name:"Medium (768 px)"},lg:{id:ks.Lg,name:"Large (992 px)"},xl:{id:ks.Xl,name:"Extra Large (1200 px)"},xxl:{id:ks.Xxl,name:"Extra Extra Large (1600 px)"}}},$s=d.RX_VIEW_DEFINITION.styles.map(e=>({text:e.name,data:{value:e.id}}));class Ls extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.hasChildren$=this.sandbox.getChildComponentGuids().pipe((0,r.map)(e=>!(0,u.isEmpty)(e)))}static getInitialProperties(e){return Object.assign(Object.assign({name:null,rowWrap:ks.Sm,columnCount:"1"},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.componentProperties$.subscribe(e=>this.validate(e)),this.sandbox.getComponentPropertyValue("columnCount").pipe((0,r.skip)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setLayout(this.getDefaultColumnSpans(Number(e)))}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}validate(e){this.sandbox.setValidationIssues((0,c.validateStandardProps)(e))}getPropertiesByName(e){const t=Object.assign({},e);return t.styles||delete t.styles,t}setContainerLayout(e){this.sandbox.setLayout(e)}getDefaultColumnSpans(e){const t=[],i=Math.floor(Bs.maxColumnSpan/e);return(0,u.times)(e,()=>t.push(i)),t[t.length-1]=Bs.maxColumnSpan%e+i,t}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Container.")}},{name:"columnCount",component:l.SelectFormControlComponent,options:{label:"Number of columns",required:!0,tooltip:new s.Tooltip("Resize container columns on the canvas by dragging the dashed column separator line."),options:(0,u.times)(6,e=>({id:(++e).toString(),name:e.toString()}))}},{name:"rowWrap",component:l.SelectFormControlComponent,options:{label:"Row wrap",sortAlphabetically:!1,options:(0,u.values)(Bs.rowWrapOptions),tooltip:new s.Tooltip("The Row wrap property controls the layout of multi-column containers based on\n                    the width of the view. When the width of the view is decreased to a width less\n                    than the selected Row wrap value, each container column after the first one\n                    wraps onto a new line.")}},(0,c.getHiddenFieldInspectorConfig)(),(0,c.getAvailableOnDevicesInspectorConfig)(),(0,c.getStylesFieldInspectorConfig)($s)]}]}}}class Gs{constructor(){this.containerCanvasItemComponent=Vs,this.destroyed$=new o.ReplaySubject(1)}ngAfterViewInit(){this.canvasOutletComponent.containerComponentInstance.columnResize.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.model.setContainerLayout(e)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Gs.\u0275fac=function(e){return new(e||Gs)},Gs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Gs,selectors:[["rx-container-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](c.CanvasOutletComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.canvasOutletComponent=e.first)}},inputs:{model:"model"},decls:2,vars:5,consts:[[1,"border","d-block",3,"containerComponent"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("has-children",n["\u0275\u0275pipeBind1"](1,3,t.model.hasChildren$)),n["\u0275\u0275property"]("containerComponent",t.containerCanvasItemComponent))},directives:[c.CanvasOutletComponent],pipes:[f.AsyncPipe],styles:[".has-children[_ngcontent-%COMP%]    >rx-container-canvas-item>as-split>as-split-area{min-height:auto}"]});class zs{}zs.\u0275fac=function(e){return new(e||zs)},zs.\u0275mod=n["\u0275\u0275defineNgModule"]({type:zs,declarations:[Gs,Vs],imports:[f.CommonModule,c.ViewDesignerCanvasModule,y.AngularSplitModule,b.DragDropModule]}),zs.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs],imports:[[f.CommonModule,c.ViewDesignerCanvasModule,y.AngularSplitModule,b.DragDropModule]]});const Us={type:d.RxViewComponentType.RecordEditor,fieldTypes:{[a.RX_RECORD_DEFINITION.resourceTypes.character]:d.RxViewComponentType.Character,[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]:d.RxViewComponentType.DateTime,[a.RX_RECORD_DEFINITION.resourceTypes.selection]:d.RxViewComponentType.Selection,[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]:d.RxViewComponentType.Time,[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]:d.RxViewComponentType.Date,[a.RX_RECORD_DEFINITION.resourceTypes.boolean]:d.RxViewComponentType.Boolean,[a.RX_RECORD_DEFINITION.resourceTypes.attachment]:d.RxViewComponentType.Attachment,[a.RX_RECORD_DEFINITION.resourceTypes.integer]:d.RxViewComponentType.Integer,[a.RX_RECORD_DEFINITION.resourceTypes.real]:d.RxViewComponentType.Floating,[a.RX_RECORD_DEFINITION.resourceTypes.decimal]:d.RxViewComponentType.Decimal,[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]:d.RxViewComponentType.LocalizedCharacter}};var qs,Xs,Ws;!function(e){e.Create="CREATE",e.Edit="EDIT",e.BulkEdit="BULK EDIT",e.Temporary="TEMPORARY"}(qs||(qs={})),function(e){e.Read="READ",e.Edit="EDIT"}(Xs||(Xs={}));class Hs{constructor(e,t){this.context=e,this.stringService=t,this.selectedFieldIdsModel={},this.availableFieldGroups=[],this.hideSystemFields=!1,this.isApplyButtonDisabled=!0,this.selectedFieldDefinitionIds=[],this.availableFieldDefinitions=[]}ngOnInit(){const e=this.context.getData();this.availableFieldDefinitions=e.availableFields,this.selectedFieldDefinitionIds=e.selectedFieldIds,this.hideSystemFields=Boolean(e.hideSystemFields),this.availableFieldGroups=this.groupFieldsByFieldOption(this.availableFieldDefinitions),this.selectedFieldIdsModel=this.idsToModel(this.selectedFieldDefinitionIds)}closeModal(){this.context.close(this.modelToIds(this.selectedFieldIdsModel))}search(e){this.availableFieldGroups=this.groupFieldsByFieldOption(this.availableFieldDefinitions).map(t=>Object.assign(Object.assign({},t),{fields:t.fields.filter(t=>this.stringService.caseInsensitiveSearch(t.name,e))})).filter(e=>!(0,u.isEmpty)(e.fields))}select(e){if("all"===e){const e=this.availableFieldDefinitions.filter(e=>e.fieldOption!==a.RecordFieldOption.System||!this.hideSystemFields).map(e=>e.id);this.selectedFieldIdsModel=this.idsToModel(e)}else{const t=this.availableFieldGroups.find(t=>t.groupLabel===e).fields.map(e=>e.id);this.selectedFieldIdsModel=Object.assign(Object.assign({},this.selectedFieldIdsModel),this.idsToModel(t))}this.updateApplyButtonDisabledStatus()}updateApplyButtonDisabledStatus(){this.isApplyButtonDisabled=!(0,u.xor)(this.selectedFieldDefinitionIds,this.modelToIds(this.selectedFieldIdsModel)).length}groupFieldsByFieldOption(e){const t=(0,u.groupBy)(e,"fieldOption"),i=[a.RecordFieldOption.Required,a.RecordFieldOption.Optional];return this.hideSystemFields||i.push(a.RecordFieldOption.System),i.filter(e=>t[e]).map(e=>({groupLabel:`${this.stringService.prettify(e)} fields`,selectAllFieldsInGroupButtonLabel:`Select all ${e.toLowerCase()} fields`,fields:t[e].map(({id:e,name:t})=>({id:e,name:t})).sort((e,t)=>e.name.localeCompare(t.name))}))}trackByLabel(e,t){return t.groupLabel}trackById(e,t){return t.id}idsToModel(e,t=!0){return e.filter(Boolean).reduce((e,i)=>(e[i]=t,e),{})}modelToIds(e){return(0,u.reduce)(e,(e,t,i)=>(t&&e.push(i),e),[])}}Hs.\u0275fac=function(e){return new(e||Hs)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](v.RxStringService))},Hs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hs,selectors:[["ng-component"]],decls:14,vars:7,consts:[[1,"modal-header","pr-0"],[1,"modal-title","pl-0","mr-auto"],["adapt-button","","type","button","size","small","btn-type","primary","rx-id","apply-button",1,"mr-5",3,"disabled","click"],["adapt-button","","type","button","size","small","btn-type","tertiary","rx-id","x-button",1,"close","my-1",3,"click"],[1,"modal-body"],[1,"body-controls"],["btn-type","tertiary","rx-id","select-all-button",1,"pl-0",3,"click"],[1,"form-group",3,"placeholder","ngModel","ngModelChange"],[1,"rx-record-definition-fields"],["class","rx-record-definition-field-group",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"rx-record-definition-field-group"],[1,"font-weight-bold"],["btn-type","tertiary",1,"py-0","pl-0",3,"click"],["class","checkbox",4,"ngFor","ngForOf","ngForTrackBy"],[1,"checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkbox__item"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2,"Quick edit fields"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",2),n["\u0275\u0275listener"]("click",function(){return t.closeModal()}),n["\u0275\u0275text"](4," Apply "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"button",3),n["\u0275\u0275listener"]("click",function(){return t.context.dismiss(0)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",4),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275elementStart"](8,"adapt-button",6),n["\u0275\u0275listener"]("click",function(){return t.select("all")}),n["\u0275\u0275text"](9," Select all "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-rx-textfield",7),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.search(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",8),n["\u0275\u0275template"](12,Q,6,4,"div",9),n["\u0275\u0275template"](13,K,2,0,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.isApplyButtonDisabled),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("placeholder","Search fields")("ngModel",t.searchQuery),n["\u0275\u0275attribute"]("rx-id","search-field"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.availableFieldGroups)("ngForTrackBy",t.trackByLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===t.availableFieldGroups.length))},directives:[m.AdaptButtonComponent,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,f.NgForOf,f.NgIf,x.CheckboxControlValueAccessor],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.modal-title[_ngcontent-%COMP%]{margin:auto 0}span[rx-id=x-button][_ngcontent-%COMP%]{cursor:pointer;margin:auto 0}span[rx-id=x-button][_ngcontent-%COMP%]:hover{color:#959899}.body-controls[_ngcontent-%COMP%]{display:flex}.body-controls[_ngcontent-%COMP%]   adapt-rx-textfield[_ngcontent-%COMP%]{flex:1}.rx-record-definition-fields[_ngcontent-%COMP%]{padding:10px;border:1px solid #d6d7d8;max-height:300px;overflow:auto}.rx-record-definition-field-group[_ngcontent-%COMP%]{margin-bottom:20px}']});class Qs extends l.InspectorWidgetBase{constructor(e,t,i){super(e),this.adaptModalService=t,this.renderer=i,this.encapsulateClass=!0}focus(){this.renderer.selectRootElement(this.openModalButton.nativeElement,!0).click()}openModal(){(0,o.combineLatest)([this.designerItemModel.childFieldIds$,this.designerItemModel.recordFieldDefinitionItems$,this.designerItemModel.isExtensionView$,this.designerItemModel.associationDefinitionName$]).pipe((0,r.take)(1),(0,r.concatMap)(([e,t,i,n])=>this.adaptModalService.open({content:Hs,data:{selectedFieldIds:e,availableFields:i&&n?t.filter(e=>e.resourceType!==a.RX_RECORD_DEFINITION.resourceTypes.attachment):t,hideSystemFields:this.options.hideSystemFields},size:"sm",hideBackdrop:!1,customClass:"rx-record-editor-field-selector-modal"}))).subscribe(e=>{this.designerItemModel.updateSelectedFieldComponents(e)})}removeField(e){this.designerItemModel.removeComponent([e])}trackByGuid(e,t){return t.guid}}Qs.\u0275fac=function(e){return new(e||Qs)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](n.Renderer2))},Qs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Qs,selectors:[["rx-fields-inspector-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](J,7,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.openModalButton=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-record-definition-fields",t.encapsulateClass)},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:8,consts:[["btn-type","tertiary","rx-id","open-modal-button",1,"px-0","py-0",3,"hidden","click"],["openModalButton",""],[1,"d-icon-plus_circle"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],[1,"mt-2"],["class","rx-field-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-tertiary"],[1,"rx-field-item"],[1,"rx-field-name"],[1,"rx-field-type"],[1,"rx-action-button"],["class","d-icon-cross btn-link","rx-id","delete-button",3,"click",4,"ngIf"],["rx-id","delete-button",1,"d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0,1),n["\u0275\u0275listener"]("click",function(){return t.openModal()}),n["\u0275\u0275element"](2,"span",2),n["\u0275\u0275text"](3," Quick edit fields\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,Y,2,0,"span",4),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275template"](8,ee,9,3,"div",6),n["\u0275\u0275pipe"](9,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("hidden",t.options.isDisabled),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngIf",0===n["\u0275\u0275pipeBind1"](6,4,t.designerItemModel.selectedFieldComponents$).length),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](9,6,t.designerItemModel.selectedFieldComponents$))("ngForTrackBy",t.trackByGuid))},directives:[m.AdaptButtonComponent,f.NgIf,f.NgForOf],pipes:[f.AsyncPipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-record-definition-fields .rx-field-item{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;font-size:12px;display:flex;justify-content:space-between;word-break:break-all}.rx-record-definition-fields .rx-field-name{font-weight:var(--font-weight-bold)}.rx-record-definition-fields .rx-field-type{color:#959899}.rx-record-definition-fields .d-icon-cross{cursor:pointer}.rx-record-definition-fields .d-icon-cross:not(:hover){color:#313538}.rx-record-editor-field-selector-modal .modal{justify-content:flex-end}.rx-record-editor-field-selector-modal .modal-scroll-container{padding:15px;min-height:0}.rx-record-editor-field-selector-modal .modal-dialog{margin:auto 0 0 auto;min-height:0;width:350px}\n'],encapsulation:2,changeDetection:0});class Ks{constructor(e,t,i,n,o,r,a,s){this.rxRecordDefinitionCacheService=e,this.rxModalService=t,this.rxFieldDefinitionService=i,this.rxViewDefinitionCacheService=n,this.rxAssociationDefinitionDataPageService=o,this.rxDefinitionNameService=r,this.rxViewComponentRegistryService=a,this.rxViewDefinitionParserService=s}getRecordFieldDefinitionItems(e){return e.fieldDefinitions.map(e=>({id:String(e.id),name:e.name,resourceType:e.resourceType,fieldOption:e.fieldOption,viewComponentType:this.getViewComponentType(e)}))}getViewComponentType(e){let t=Us.fieldTypes[e.resourceType];return e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.character&&(t=e.namedListDefinition||(0,u.inRange)(e.maxLength,1,255)?d.RxViewComponentType.Character:d.RxViewComponentType.Textarea),e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.real&&(t=d.RxViewComponentType.Decimal),t}getComponentProperties(e){const t=["recordDefinitionName","mode","allowEdit"];return(0,u.flow)(e=>(0,u.omit)(e,"showReadOnlyState"),e=>(0,u.omitBy)(e,(e,i)=>!t.includes(i)&&((0,u.isNil)(e)||""===e)))(e)}getRecordDefinition(e){return e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)}validate(e,t,i,n,o=!1,r=!1){const s=[];if(t.recordDefinitionName||s.push(e.createError("Record definition name cannot be blank.","recordDefinitionName")),o&&t.recordDefinitionName&&!t.associationDefinitionName&&s.push(e.createError("Association to use cannot be blank.","associationDefinitionName")),r||t.mode!==qs.Edit||t.recordInstanceId||s.push(e.createError("Record ID cannot be blank.","recordInstanceId")),i&&t.recordDefinitionName&&t.mode===qs.Create){i.resourceType===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType&&s.push(e.createWarning("You have configured a record editor to create join record instances.\n                        Please ensure that one or more processes or rules have been defined to perform the creation\n                        of the join record instance.",void 0,!0));const o=n.map(e=>i.fieldDefinitions.find(t=>t.id===Number(e))).filter(this.rxFieldDefinitionService.isSystemField).map(e=>e.name);if(o.length&&s.push(e.createError(`System fields (${o.join(", ")}) cannot be present when Record editor is in Create mode.`)),!r||t.associationDefinitionName){const t=i.fieldDefinitions.filter(e=>{const t=e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter,i=e.defaultValue||(0,u.isFinite)(e.defaultValue)||t&&!(0,u.isEmpty)(e.defaultValueByLocale);return e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required&&!i}).filter(e=>!n.includes(String(e.id))).map(e=>e.name);t.length&&s.push(e.createError(`Required fields are missing: ${t.join(", ")}.`))}}return s.push(...(0,c.validateStandardProps)(t)),s}getViewDefinition(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,r.catchError)(()=>(0,o.of)(null))):(0,o.of)(null)}getInspector(e,t,i,n=[],o=!1,r=[],a=!1,d){const p={inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Record editor.")}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!0,beforeValueChange:(e,t)=>Boolean(e)?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"All view components will be removed from the Record editor. Do you want to continue?"}):Promise.resolve(!0)}},{name:"mode",component:l.GroupButtonFormControlComponent,options:{label:"Mode",tooltip:new s.Tooltip("<b>Record editor modes:</b><br><ul><li>Create mode is for creating new records.</li><li>Edit mode is for updating records.</li><li>Temporary mode is for holding data that does not need to be saved.</li></ul>"),required:!0,items:[{name:"Create",value:qs.Create},{name:"Edit",value:qs.Edit},{name:"Temporary",value:qs.Temporary}],beforeValueChange:d}}]}]},u=p.inspectorSectionConfigs[0].controls;t!==qs.Edit||o||(u.push({name:"recordInstanceId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",tooltip:new s.Tooltip("Enter the record ID of the record that the users need to edit."),isRequired:!0}}),u.push({name:"showReadOnlyState",component:l.SwitchFormControlComponent,options:{label:"Enable read state"}}),i&&u.push({name:"defaultState",component:l.GroupButtonFormControlComponent,options:{label:"Default state",items:[{name:"Read",value:Xs.Read},{name:"Edit",value:Xs.Edit}]}}),u.push({name:"allowEdit",component:l.OptionalExpressionInspectorControlComponent,options:{label:"Allow edit"}})),u.push((0,c.getAvailableOnDevicesInspectorConfig)(),(0,c.getStylesFieldInspectorConfig)()),o&&(u.splice(1,0,{name:"label",component:l.TextFormControlComponent,options:{label:"Display label",tooltip:new s.Tooltip("Enter a Display label for the Record editor. When this view is injected into the view to extend,\n              the Display label will be shown above the Record editor's fields. If a Display label is not defined,\n              the name of the source application or library will be shown above the fields.")}}),e&&u.splice(3,0,{name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{label:"Association to use",options:r,emptyOption:!a,required:a}}));const m={label:"Form contents",controls:[{component:Qs,options:{label:"Selected fields",hideSystemFields:t===qs.Create}}]};return e&&p.inspectorSectionConfigs.push(m),p}getAssociationOptions(e,t){return e&&t?this.getAssociations(e,t).pipe((0,r.map)(t=>t.data.filter(t=>t.nodeAId===e).map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,o.of)([])}getAssociations(e,t){return this.rxAssociationDefinitionDataPageService.get({params:{propertySelection:["name","scope","nodeAId"],firstRecordDefinitionName:e,secondRecordDefinitionName:t,cardinality:C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value,nodeAModality:C.RX_ASSOCIATION_DEFINITION.modality.required,shouldCascadeDelete:!0},headers:{"default-bundle-scope":""}})}getTargetRecordEditorProperties(e,t){let i;return e&&t&&(i=this.rxViewDefinitionParserService.findParentComponentDefinition(e,{guid:t},e=>e.type===d.RxViewComponentType.RecordEditor)),(0,u.get)(i,"propertiesByName",{})}confirmSystemFieldRemoval(){return(0,o.from)(this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"System fields will be removed. Do you want to continue?"}))}getSystemFieldModelGuids(e,t){return(0,u.isEmpty)(e)?[]:e.reduce((e,i)=>{const n=t.fieldDefinitions.find(e=>String(e.id)===i.data.fieldId);return this.rxFieldDefinitionService.isSystemField(n)&&e.push(i.guid),e},[])}isFieldComponent(e){return![d.RxViewComponentType.Action,d.RxViewComponentType.ActionButton,d.RxViewComponentType.Association,d.RxViewComponentType.AssociatedRecordField].includes(e.type)&&Boolean(this.rxViewComponentRegistryService.get(e.type).properties.find(e=>"fieldId"===e.name))}}Ks.\u0275fac=function(e){return new(e||Ks)(n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](S.RxModalService),n["\u0275\u0275inject"](a.RxFieldDefinitionService),n["\u0275\u0275inject"](d.RxViewDefinitionCacheService),n["\u0275\u0275inject"](C.RxAssociationDefinitionDataPageService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](d.RxViewDefinitionParserService))},Ks.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ks,factory:Ks.\u0275fac});class Js extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService),this.rxViewComponentRegistryService=this.injector.get(d.RxViewComponentRegistryService),this.rxRecordEditorDesignHelpersService=this.injector.get(Ks),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.updateInspector$=new o.Subject,this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.mode$=this.sandbox.getComponentPropertyValue("mode"),this.showReadOnlyState$=this.sandbox.getComponentPropertyValue("showReadOnlyState"),this.targetExtensionContainerGuid$=this.sandbox.getViewPropertyValue("targetExtensionContainerGuid"),this.targetViewDefinitionName$=this.sandbox.getViewPropertyValue("targetViewDefinitionName"),this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>this.rxRecordEditorDesignHelpersService.getRecordDefinition(e)),(0,r.shareReplay)(1)),this.childComponentGuids$=this.sandbox.getChildComponentGuids().pipe((0,r.shareReplay)(1)),this.allChildFieldComponentGuids$=this.sandbox.getChildComponentGuids(e=>this.rxRecordEditorDesignHelpersService.isFieldComponent(e),!0).pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.shareReplay)(1)),this.isExtensionView$=this.targetViewDefinitionName$.pipe((0,r.map)(Boolean),(0,r.shareReplay)(1)),this.childFieldIds$=this.allChildFieldComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.sandbox.getComponentPropertyValue("fieldId",e))).pipe((0,r.map)(u.uniq)):(0,o.of)([])),(0,r.shareReplay)(1)),this.selectedFieldComponents$=this.allChildFieldComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>(0,o.combineLatest)([this.sandbox.getComponent(e).pipe((0,r.take)(1),(0,r.map)(e=>this.rxViewComponentRegistryService.get(e.type).name)),this.sandbox.getComponentPropertyValue("fieldId",e),this.sandbox.getComponentPropertyValue("label",e)]).pipe((0,r.map)(([t,i,n])=>({fieldId:i,label:n||"<No field selected>",componentName:t,guid:e}))))):(0,o.of)([])),(0,r.shareReplay)(1)),this.associationComponentGuids$=this.sandbox.getChildComponentGuids(e=>e.type===d.RxViewComponentType.Association,!0).pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.associationDefinitionName$=this.sandbox.getComponentPropertyValue("associationDefinitionName"),this.hasChildren$=this.childComponentGuids$.pipe((0,r.map)(e=>Boolean(e.length)),(0,r.distinctUntilChanged)(),(0,r.shareReplay)(1)),this.systemFieldComponentGuids$=this.recordDefinition$.pipe((0,r.mergeMap)(e=>e?this.selectedFieldComponents$.pipe((0,r.map)(t=>t.filter(t=>{const i=e.fieldDefinitions.find(e=>String(e.id)===t.fieldId);return this.rxFieldDefinitionService.isSystemField(i)}).map(e=>e.guid)),(0,r.take)(1)):(0,o.of)([]))),this.recordFieldDefinitionItems$=this.recordDefinition$.pipe((0,r.map)(e=>e?this.rxRecordEditorDesignHelpersService.getRecordFieldDefinitionItems(e):[]),(0,r.shareReplay)(1))}static getInitialProperties(e){const t=Object.assign(Object.assign({name:null,label:null,mode:qs.Edit,recordInstanceId:null,recordDefinitionName:null,associationDefinitionName:null,defaultState:e.defaultState||null,allowEdit:"1",styles:null},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e);return Object.assign(Object.assign({},t),{showReadOnlyState:Boolean(t.defaultState),allowEdit:t.mode===qs.Edit?t.allowEdit:null})}rxInit(){const e=(0,o.combineLatest)([this.targetViewDefinitionName$.pipe((0,r.switchMap)(e=>this.rxRecordEditorDesignHelpersService.getViewDefinition(e))),this.targetExtensionContainerGuid$]).pipe((0,r.map)(([e,t])=>this.rxRecordEditorDesignHelpersService.getTargetRecordEditorProperties(e,t)));this.associationOptions$=(0,o.combineLatest)([e,this.recordDefinitionName$]).pipe((0,r.switchMap)(([e,t])=>this.rxRecordEditorDesignHelpersService.getAssociationOptions(e.recordDefinitionName,t))),this.isAssociationRequired$=(0,o.combineLatest)([this.isExtensionView$,this.recordDefinitionName$,e]).pipe((0,r.map)(([e,t,i])=>e&&t!==i.recordDefinitionName)),this.updateInspector$.pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.isExtensionView$,this.associationOptions$,this.isAssociationRequired$,e]).pipe((0,r.first)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{recordDefinitionName:e,mode:t,showReadOnlyState:i},n,o,r,a])=>{n&&!e&&(e=a.recordDefinitionName,t=a.mode,this.sandbox.updateComponentProperties({mode:t,recordDefinitionName:e})),this.updateInspector$.next(this.rxRecordEditorDesignHelpersService.getInspector(e,t,i,[],n,o,r,this._onBeforeModeChange.bind(this)))}),this.mode$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties(e===qs.Create||e===qs.Temporary?Object.assign(Object.assign({},t),{recordInstanceId:null,defaultState:null,allowEdit:null,showReadOnlyState:null}):Object.assign(Object.assign({},t),{defaultState:null,allowEdit:"1",showReadOnlyState:!1}))}),this.showReadOnlyState$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties(Object.assign(Object.assign({},t),{defaultState:e?Xs.Read:null}))}),(0,o.combineLatest)([(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.sandbox.getComponentPropertyValue("mode"),this.showReadOnlyState$]).pipe((0,r.skip)(1)),this.recordFieldDefinitionItems$,this.isExtensionView$,this.associationOptions$,this.isAssociationRequired$]).pipe((0,r.map)(([[e,t,i],n,o,r,a])=>this.rxRecordEditorDesignHelpersService.getInspector(e,t,i,n,o,r,a,this._onBeforeModeChange.bind(this))),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(this.updateInspector$),this.recordDefinitionName$.pipe((0,r.pairwise)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{e&&(this.sandbox.setChildren([]),this.sandbox.updateComponentProperties({associationDefinitionName:null}))}),this.associationOptions$.pipe((0,r.skip)(1),(0,r.filter)(e=>1===e.length),(0,r.withLatestFrom)(this.isAssociationRequired$),(0,r.filter)(([,e])=>e),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([[{id:e}]])=>this.sandbox.updateComponentProperties({associationDefinitionName:e})),(0,o.combineLatest)([this.sandbox.componentProperties$,this.recordDefinition$,this.childFieldIds$,this.isAssociationRequired$,this.isExtensionView$]).pipe((0,r.map)(([e,t,i,n,o])=>this.rxRecordEditorDesignHelpersService.validate(this.sandbox,e,t,i,n,o)),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("name").pipe((0,r.map)(e=>e||null),(0,r.distinctUntilChanged)()),this.recordDefinition$]).pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this._setSettableProperties(e,t),this._setCommonDataDictionary(e,t)})}removeComponent(e){this.sandbox.removeComponents(e)}updateSelectedFieldComponents(e){this.selectedFieldComponents$.pipe((0,r.take)(1),(0,r.mergeMap)(t=>{const i=e.filter(e=>!t.find(t=>t.fieldId===e)),n=i.length?this.recordFieldDefinitionItems$.pipe((0,r.map)(e=>i.map(t=>{const{viewComponentType:i,name:n}=e.find(e=>e.id===t);return{type:i,propertiesByName:{fieldId:t,label:n}}})),(0,r.take)(1)):(0,o.of)([]),a=new Set(e),s=t.filter(e=>e.fieldId).filter(e=>!a.has(e.fieldId)).map(e=>e.guid);return(0,o.forkJoin)([n,(0,o.of)(s)])}),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{e.length&&this.sandbox.addComponent(e),t.length&&this.sandbox.removeComponents(t)})}getPropertiesByName(e){return this.rxRecordEditorDesignHelpersService.getComponentProperties(e)}_dropPredicate(e){var t;return null===(t=e.draggedViewComponentDescriptor.options)||void 0===t?void 0:t.canBeEmbeddedInRecordEditor}_onBeforeModeChange(e,t){return e!==qs.Create&&t===qs.Create?this.systemFieldComponentGuids$.pipe((0,r.mergeMap)(e=>e.length?this.rxRecordEditorDesignHelpersService.confirmSystemFieldRemoval().pipe((0,r.tap)(t=>{t&&this.sandbox.removeComponents(e)})):(0,o.of)(!0)),(0,r.take)(1)).toPromise():Promise.resolve(!0)}dropPredicate(e){var t;return null===(t=e.draggedViewComponentDescriptor.options)||void 0===t?void 0:t.canBeEmbeddedInRecordEditor}_setCommonDataDictionary(e,t){const i=this._getComponentName(e,t);this.sandbox.setCommonDataDictionary(this._getCommonProps(i,t))}_setSettableProperties(e,t){const i=this._getComponentName(e,t);this.sandbox.setSettablePropertiesDataDictionary(i,[{label:"Edit state",expression:this.getExpressionForProperty("editState")},{label:"Read state",expression:this.getExpressionForProperty("readState")},...t?[{label:"Record instance",children:t.fieldDefinitions.map(e=>({label:e.name,expression:this.getExpressionForProperty(`recordInstance.fieldInstances.${e.id}.value`)}))}]:[]])}_getCommonProps(e,t){return{label:e,expression:this.getExpressionForProperty("api"),children:[{label:"Can save",expression:this.getExpressionForProperty("canSave")},{label:"In read state",expression:this.getExpressionForProperty("inReadState")},{label:"Is dirty",expression:this.getExpressionForProperty("isDirty")},{label:"Is valid",expression:this.getExpressionForProperty("isValid")},{label:"Record definition name",expression:this.getExpressionForProperty("recordDefinitionName")},{label:"Record instance",expression:this.getExpressionForProperty("recordInstance"),children:t?this._getRecordInstanceChildProps(t):[]},{label:"Record instance ID",expression:this.getExpressionForProperty("recordInstanceId")}]}}_getRecordInstanceChildProps(e){return(0,u.flow)(e=>(0,u.reject)(e,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.attachment}),e=>(0,u.map)(e,e=>{const t={label:e.name,expression:this.getExpressionForProperty(`recordInstance.fieldInstances.${e.id}.value`)};if(e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection){const i=t.autocompleteOptions=(0,u.map)(e.optionNamesById,(t,i)=>({label:t,expression:this.getExpressionForProperty(`recordDefinition.fieldDefinitionsById[${e.id}].optionsById[${i}].id`)}));t.children=[{label:`${e.name} (Option name)`,expression:this.getExpressionForProperty(`selectionFieldOptionNamesById.${e.id}`)},{label:"Options",children:i}]}return t}))(e.fieldDefinitions)}_getComponentName(e,t){let i=this.sandbox.descriptor.name;const n=t?this.rxDefinitionNameService.getDisplayName(t.name):null;return n&&e?i+=` (${n}: ${e})`:n?i+=` (${n})`:e&&(i+=` (${e})`),i}}class Ys{ngOnInit(){this.dropPredicateFn=this.model._dropPredicate.bind(this.model)}}Ys.\u0275fac=function(e){return new(e||Ys)},Ys.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ys,selectors:[["rx-record-editor-design"]],inputs:{model:"model"},decls:3,vars:4,consts:[["type","objects","label","Drop fields from the Palette here or select a Record definition and add fields in the Properties panel.",4,"ngIf"],[3,"dropPredicate"],["type","objects","label","Drop fields from the Palette here or select a Record definition and add fields in the Properties panel."]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,te,1,0,"adapt-empty-state",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275element"](2,"rx-canvas-outlet",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!1===n["\u0275\u0275pipeBind1"](1,2,t.model.hasChildren$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("dropPredicate",t.dropPredicateFn))},directives:[f.NgIf,c.CanvasOutletComponent,m.AdaptEmptyStateComponent],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{border:1px solid #d6d7d8;display:block;position:relative;padding:1rem;min-height:200px}adapt-empty-state[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}rx-canvas-outlet[_ngcontent-%COMP%]    >rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{min-height:calc(200px - 1rem * 2)}']});class Zs{}Zs.\u0275fac=function(e){return new(e||Zs)},Zs.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Zs,declarations:[Hs,Qs],imports:[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptRxTextfieldModule],exports:[Qs]}),Zs.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptRxTextfieldModule]]});class el{}el.\u0275fac=function(e){return new(e||el)},el.\u0275mod=n["\u0275\u0275defineNgModule"]({type:el,declarations:[Ys],imports:[f.CommonModule,l.RxDefinitionPickerModule,x.FormsModule,l.FormControlsModule,c.ViewDesignerCanvasModule,Zs,m.AdaptEmptyStateModule]}),el.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Ks],imports:[[f.CommonModule,l.RxDefinitionPickerModule,x.FormsModule,l.FormControlsModule,c.ViewDesignerCanvasModule,Zs,m.AdaptEmptyStateModule]]}),function(e){e.One="ONE",e.Many="MANY"}(Ws||(Ws={}));let tl=class{constructor(e,t,i,n,s,l,d){this.options=e,this.rxAssociationInstanceDataPageService=t,this.rxRecordDefinitionCacheService=i,this.rxRecordInstanceUtilsService=n,this.rxRecordInstanceService=s,this.rxJsonParserService=l,this.rxAssociationDefinitionCacheService=d,this.extensions=[],this.existing=[],this.pending=[],this.deleted=[],this.existingSubject$=new o.BehaviorSubject([]),this.existing$=this.existingSubject$.asObservable(),this.pendingSubject$=new o.BehaviorSubject([]),this.pending$=this.pendingSubject$.asObservable(),this.extensionsSubject$=new o.BehaviorSubject([]),this.extensions$=this.extensionsSubject$.asObservable(),this.cardinalityTypes=Ws,this.totalExistingCount=0,this.associationDefinition=null,this.cardinalityType=null,this.remainingAssociatedRecordCount=0,this.getExistingAssociationInstances$=(0,o.defer)(()=>this.getExistingAssociationInstances()).pipe((0,r.share)()),(0,u.assign)(this.options,{canLoadAssociations:Boolean(this.options.associatedRecordInstanceId),pageSize:10,startIndex:0}),this.extensions=this.options.associationInstances.extensions,this.existing=this.options.associationInstances.existing,this.pending=this.options.associationInstances.pending,this.deleted=this.options.associationInstances.deleted,this.options.fieldIds=this.options.fieldIds||[],this.mergeFieldIds([a.RX_RECORD_DEFINITION.coreFieldIds.id])}initialize(){return this.isDataLoading=!0,this.initialize$||(this.initialize$=(0,o.forkJoin)([this.rxAssociationDefinitionCacheService.getAssociationDefinition(this.options.associationDefinitionName),this.rxRecordDefinitionCacheService.getRecordDefinition(this.options.recordDefinitionName)]).pipe((0,r.tap)(([e,t])=>{this.isDataLoading=!1,this.associationDefinition=e,this.recordDefinition=t,this.cardinalityType=this.getCardinalityType(this.associationDefinition.cardinality,this.options.associatedRecordNodeSide),this.options.allFieldIds&&(this.options.fieldIds=(0,u.map)(this.recordDefinition.fieldDefinitions,"id"),this.mergeFieldIds([a.RX_RECORD_DEFINITION.coreFieldIds.id]))}))),this.initialize$}loadExistingAssociations(){return this.options.canLoadAssociations?this.initialize().pipe((0,r.switchMap)(()=>this.getExistingAssociationInstances$.pipe((0,r.tap)(e=>{(0,u.forEach)(e.data,e=>{this.addToExisting(this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance(e))}),this.options.startIndex+=e.data.length,this.remainingAssociatedRecordCount=e.totalSize-this.options.startIndex})))):(0,o.of)([])}loadExtensions(){return this.initialize().pipe((0,r.switchMap)(()=>this.getExtensionRecordInstance().pipe((0,r.tap)(e=>{e&&this.addExtension(e)}))))}addToExisting(e){const t=this.isInExisting(e.id);t?this.isDefaultNodeRoleUsed(t)&&!this.isDefaultNodeRoleUsed(this.options.rolesConfig)&&((0,u.remove)(this.existing,t),e.rolesConfig=this.options.rolesConfig,this.existing.push(e),this.existingSubject$.next(this.existing)):(this.options.rolesConfig&&!e.rolesConfig&&(e.rolesConfig=this.options.rolesConfig),this.existing.push(e),this.existingSubject$.next(this.existing))}isDefaultNodeRoleUsed(e){return this.rxJsonParserService.tryParseJson((0,u.get)(e,"rolesConfig.useDefaultRoles",!0))}addToPending(e,t){if(!(0,u.isEmpty)(e)&&this.associationDefinition)if(this.cardinalityType===Ws.Many){const i=(0,u.filter)(e,e=>!this.isInExisting(e.id)&&!this.isInDeleted(e.id)&&!this.isInPending(e.id));t&&(0,u.forEach)(i,e=>{e.rolesConfig=t}),Array.prototype.push.apply(this.pending,i),this.pendingSubject$.next(this.pending);const n=(0,u.remove)(this.deleted,t=>(0,u.find)(e,{id:t.id}));(0,u.forEach)(n,e=>{this.addToExisting(e)})}else if(this.cardinalityType===Ws.One){const t=e[0];switch(!0){case(0,u.isEmpty)(this.existing)&&(0,u.isEmpty)(this.deleted):this.pending.length=0,this.pending.push(t);break;case(0,u.isEmpty)(this.existing):const e=this.deleted[0];this.pending.length=0,e.id===t.id?this.addToExisting(this.deleted.splice(0,1)[0]):this.pending.push(t);break;case(0,u.isEmpty)(this.deleted):const i=this.existing[0];i.id!==t.id&&(this.deleteFromExisting(i.id),this.pending.length=0,this.pending.push(t))}this.pendingSubject$.next(this.pending)}}addExtension(e){this.extensions.push(e),this.extensionsSubject$.next(this.extensions)}restore(){this.extensionsSubject$.next(this.extensions),(0,u.forEach)(this.deleted,e=>{this.addToExisting(e)}),this.deleted.splice(0,this.deleted.length),this.deleteAllPending()}reset(){this.existing.splice(0,this.existing.length),this.pending.splice(0,this.pending.length),this.deleted.splice(0,this.deleted.length),this.totalExistingCount=0,this.options.startIndex=0}delete(e){this.isInExisting(e)?this.deleteFromExisting(e):this.isInPending(e)&&this.deleteFromPending(e)}deleteAllExisting(){const e=(0,u.map)(this.existing,"id");(0,u.forEach)(e,e=>{this.deleteFromExisting(e)})}deleteAllPending(){this.pending.splice(0,this.pending.length),this.pendingSubject$.next(this.pending)}mergeFieldIds(e){e&&(this.options.fieldIds=(0,u.uniq)(this.options.fieldIds.concat(e)))}extendOptions(e){e.fieldIds&&this.mergeFieldIds(e.fieldIds),this.options.allFieldIds=e.allFieldIds}getCardinalityType(e,t){let i;switch(!0){case e===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value:i=Ws.One;break;case e===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value:i=t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value?Ws.Many:Ws.One;break;case e===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value:i=Ws.Many}return i}getExtensionRecordInstance(e=!0){const t=e?a.RX_RECORD_DEFINITION.coreFieldIds.id:this.options.fieldIds.join(",");return this.rxAssociationInstanceDataPageService.post({params:{associationDefinition:this.options.associationDefinitionName,nodeToQuery:this.options.associatedRecordNodeSide,associatedRecordInstanceId:this.options.associatedRecordInstanceId,propertySelection:t}}).pipe((0,r.map)(e=>e.data[0]),(0,r.switchMap)(t=>t&&e?this.rxRecordInstanceService.get(this.options.recordDefinitionName,t[a.RX_RECORD_DEFINITION.coreFieldIds.id]):t&&!e?(0,o.of)(this.rxRecordInstanceService.createInstanceFromDataPageRow(t,this.recordDefinition)):(0,o.of)(null)))}getExistingAssociationInstances(){const e={pageSize:this.options.pageSize,startIndex:this.options.startIndex,associationDefinition:this.options.associationDefinitionName,nodeToQuery:this.options.associatedRecordNodeSide,associatedRecordInstanceId:this.options.associatedRecordInstanceId,propertySelection:this.options.fieldIds.join(","),useDefaultRoleNames:!1,nodeARoleName:"",nodeBRoleName:""};return this.options.rolesConfig.useDefaultRoles?(e.useDefaultRoleNames=this.options.rolesConfig.useDefaultRoles,delete e.nodeARoleName,delete e.nodeBRoleName):(delete e.useDefaultRoleNames,e.nodeARoleName=this.options.rolesConfig.nodeARole||"",e.nodeBRoleName=this.options.rolesConfig.nodeBRole||""),this.rxAssociationInstanceDataPageService.post({params:e})}isInExisting(e){return(0,u.find)(this.existing,{id:e})}isInPending(e){return(0,u.find)(this.pending,{id:e})}getFieldIds(){return(0,u.clone)(this.options.fieldIds)}isInDeleted(e){return(0,u.find)(this.deleted,{id:e})}deleteFromExisting(e){const t=(0,u.remove)(this.existing,{id:e})[0];this.deleted.push(t),this.existingSubject$.next(this.existing)}deleteFromPending(e){(0,u.remove)(this.pending,{id:e}),this.pendingSubject$.next(this.pending)}destroy(){this.existingSubject$.complete(),this.pendingSubject$.complete(),this.extensionsSubject$.complete()}};tl=(0,D.__decorate)([(0,D.__param)(0,(0,n.Optional)()),(0,D.__metadata)("design:paramtypes",[Object,C.RxAssociationInstanceDataPageService,a.RxRecordDefinitionCacheService,a.RxRecordInstanceUtilsService,a.RxRecordInstanceService,v.RxJsonParserService,C.RxAssociationDefinitionCacheService])],tl);class il{getComponentDefinitionsAsFlatList(e){return(0,u.flattenDeep)((0,u.transform)(e,(e,t)=>{t.resourceType!==d.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent?e.push(t):t.propertiesByName.recordDefinitionName||e.push(...this.getComponentDefinitionsAsFlatList(t.componentDefinitions))}))}getSelectionFieldOptionNames(e,t){const i={};return(0,u.filter)(e.fieldDefinitions,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.selection}).forEach(n=>{const o=(0,u.get)(e.localizableStringsByFieldId,n.id),r=t.fieldInstances[n.id];if(r)if((0,u.isObject)(n.optionNamesById)&&o&&(0,u.isEmpty)(o)){const e=n.optionNamesById[r.value];i[n.id]=o[e]}else i[n.id]=n.optionNamesById[r.value];else i[n.id]=""}),i}}il.\u0275fac=function(e){return new(e||il)},il.\u0275prov=n["\u0275\u0275defineInjectable"]({token:il,factory:il.\u0275fac});class nl extends x.FormControl{constructor(){super(...arguments),this._touchedSubject=new o.BehaviorSubject(this.touched),this.touched$=this._touchedSubject.asObservable().pipe((0,r.distinctUntilChanged)())}markAsTouched(e){super.markAsTouched(e),this._touchedSubject.next(this.touched)}markAsUntouched(e){super.markAsUntouched(e),this._touchedSubject.next(this.touched)}}const ol="%",rl="baseFormGroup";class al extends x.FormGroup{constructor(e,t){super({}),this.rxGuidService=e,this.rxRecordInstanceUtilsService=t}addFieldControl(e,t,i=null,n,o){const r=new nl("",n,o),a=this.controls[rl];return r.setValue(i),a?a.addControl(this.getControlId(e,t),r):this.addControl(rl,new x.FormGroup({[this.getControlId(e,t)]:r})),r}addAssociatedFieldControl(e,t,i,n=null,o,r){const a=i.join(ol),s=this.controls[a],l=new nl(n,o,r);return s?s.addControl(this.getControlId(e,t),l):this.addControl(a,new x.FormGroup({[this.getControlId(e,t)]:l})),l}resetFieldControls(e,t){const i=this.controls[t?t.join(ol):rl];e?i.reset(this.prepareFormGroupState(e,i)):i.reset()}syncFormControlValues(e,t,i,n={}){this.getControlsBoundToRecordField(String(e),i).forEach(e=>{!1!==n.markAsDirty&&e.markAsDirty(),!1!==n.markAsTouched&&e.markAsTouched(),this.rxRecordInstanceUtilsService.isFieldValueEqual(e.value,t)||e.setValue(t)})}getFieldIds(e){const t=this.controls[e?e.join(ol):rl];return t?(0,u.reduce)(t.controls,(e,t,i)=>{const n=this.getFieldId(i);return t instanceof x.FormControl&&!(0,u.includes)(e,n)&&e.push(n),e},[]):[]}clearAndReset(){(0,u.forOwn)(this.controls,(e,t)=>this.removeControl(t)),this.reset()}markInvalidControlsAsTouched(){(0,u.forEach)(this.controls,e=>{(0,u.forEach)(e.controls,e=>{e.invalid&&e.markAsTouched()})})}getFormControl(e,t,i){let n,o;return o=this.controls[i?i.join(ol):rl],o&&(n=o.get(this.getControlId(e,t))),n}getControlsBoundToRecordField(e,t){const i=this.controls[t||rl];return(0,u.reduce)(i.controls,(t,i,n)=>(i instanceof x.FormControl&&this.getFieldId(n)===e&&t.push(i),t),[])}getControlId(e,t){return`${e}:${t||this.rxGuidService.generate()}`}getFieldId(e){return e.split(":")[0]}prepareFormGroupState(e,t){return(0,u.reduce)(t.controls,(t,i,n)=>(t[n]=e[this.getFieldId(n)],t),{})}}al.\u0275fac=function(e){return new(e||al)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](a.RxRecordInstanceUtilsService))},al.\u0275prov=n["\u0275\u0275defineInjectable"]({token:al,factory:al.\u0275fac});class sl extends h.BaseViewComponent{constructor(e,t,i,n,a,s,l,d,c,p,u,m,f){super(),this.rxRecordInstanceService=e,this.rxRecordInstanceUpdateService=t,this.translateService=i,this.rxGlobalEventsService=n,this.rxNotificationService=a,this.rxRecordDefinitionService=s,this.rxRecordEditorUtilsService=l,this.rxRecordInstanceUtilsService=d,this.rxStringService=c,this.rxLogService=p,this.rxUtilityModalsService=u,this.rxAssociationManagerServiceFactory=f,this.api={refresh:this.refresh.bind(this),isDirty:this.isDirty.bind(this),isReady:this.isReady.bind(this),isValid:this.isValid.bind(this),notifyComponentReady:this.notifyComponentReady.bind(this),save:this.save.bind(this),setProperty:this.setProperty.bind(this),setFieldValue:this.setFieldValue.bind(this),getFieldValue:this.getFieldValue.bind(this),getAssociationManager:this.getAssociationManager.bind(this),getFieldControl:this.getFieldControl.bind(this),downloadAttachment:this.downloadAttachment.bind(this),getAttachmentDownloadUrl:this.getAttachmentDownloadUrl.bind(this),getPermissionType:this.getPermissionType.bind(this),getFieldInstanceProp:this.getFieldInstanceProp.bind(this),getRecordEditorMode:this.getRecordEditorMode.bind(this),setFieldInstanceProp:this.setFieldInstanceProp.bind(this),markAsDirty:this.markAsDirty.bind(this)},this.state={recordInstanceId:"",recordDefinitionName:"",recordInstance:null,recordDefinition:null,isDataLoading:!1,isDirty:!1,isSaving:!1,canSave:!1,mode:null,isReadOnlyStateAvailable:!1,defaultState:null,currentState:Xs.Edit,form:null,selectionFieldOptionNamesById:{},allowEdit:null},this.recordInstanceChangedSubject=new o.Subject,this.notReadyComponentIds={},this.associationManagers={},this.associationInstances={},this.recordInstanceChanged$=this.recordInstanceChangedSubject.asObservable(),this.state.form=m,this.state.form.statusChanges.pipe((0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.notifyPropertyChanged("isValid",this.isValid())})}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.notifyPropertyChanged("isDirty",this.state.isDirty),this.notifyPropertyChanged("canSave",this.state.canSave);const e=this.config.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.tap)(e=>Object.assign(this.state,e)));e.pipe((0,r.take)(1)).subscribe(e=>{e.mode===qs.Create?this.notifyPropertyChanged("inReadState",!1):e.mode===qs.Temporary?(this.notifyPropertyChanged("inReadState",!1),this.updateCanSaveProperty()):this.state.defaultState&&(this.state.isReadOnlyStateAvailable=!0)}),(0,o.merge)(e.pipe((0,r.takeWhile)(e=>e.mode===qs.Edit)),e.pipe((0,r.takeWhile)(e=>(0,u.includes)([qs.Create,qs.BulkEdit,qs.Temporary],e.mode)),(0,r.take)(1))).pipe((0,r.map)(e=>e.recordInstanceId||null),(0,r.distinctUntilChanged)(),(0,r.switchMap)(()=>this.initializeRecordInstance().pipe((0,r.catchError)(e=>(this.rxRecordInstanceUtilsService.isNoRecordFoundError(e)&&this.runtimeViewModelApi.cancel(!0).subscribe(),(0,o.throwError)(e))))),(0,r.takeUntil)(this.destroyed$)).subscribe(),e.pipe((0,r.takeWhile)(e=>e.mode===qs.Edit),(0,r.pluck)("allowEdit"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{const t=e?this.state.defaultState||Xs.Edit:Xs.Read;this.setRecordEditorState(t)})}downloadAttachment(e){this.isInEditMode()&&!this.isNewAttachment(e)&&this.rxRecordInstanceService.downloadAttachment(this.state.recordDefinitionName,e,this.state.recordInstanceId,this.state.recordInstance.fieldInstances[e].value)}getAttachmentDownloadUrl(e){let t="";return this.isInEditMode()&&!this.isNewAttachment(e)&&(t=this.rxRecordInstanceService.getAttachmentDownloadUrl(this.state.recordDefinitionName,e,this.state.recordInstanceId)),t}getAssociationManager(e){const t=(0,u.values)(e.rolesConfig).join("_"),i=(0,u.compact)([e.associationDefinitionName,t,e.associatedRecordNodeSide]).join(":");let n=this.associationManagers[i];return n?n.extendOptions(e):(e.associationInstances=this.getAssociationInstances(e.associationDefinitionName,e.associatedRecordNodeSide,t),n=this.rxAssociationManagerServiceFactory(e),(0,o.merge)(n.pending$,n.existing$).pipe((0,r.filter)(()=>0!==n.deleted.length||0!==n.pending.length),(0,r.take)(1)).subscribe(()=>this.markAsDirty()),n.extensions$.pipe((0,r.filter)(e=>!(0,u.isEmpty)(e)),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.syncRecordInstanceWithForm(e.associatedRecordPath),this.notifyPropertyChanged("recordInstance",this.state.recordInstance)}),this.associationManagers[i]=n),n}markAsDirty(){this.state.form.markAsTouched(),this.state.form.markAsDirty(),this.updateIsDirtyProperty(),this.updateCanSaveProperty()}refresh(){return this.isInEditMode()&&this.state.currentState===Xs.Read?this.initializeRecordInstance().pipe((0,r.catchError)(e=>this.handleNoRecordFoundError(e))):o.EMPTY}isDirty(){return!this.isInTemporaryMode()&&this.state.form.dirty}isReady(){return(0,u.isEmpty)(this.notReadyComponentIds)}notifyComponentReady(e,t){t?delete this.notReadyComponentIds[e]:this.notReadyComponentIds[e]=!0}setProperty(e,t){const i=e.match(/^recordInstance\.fieldInstances\.(\d+)\.value$/),n="readState"===e&&!t||"editState"===e&&t;if("readState"===e&&t||"editState"===e&&!t){if(this.state.currentState!==Xs.Read)return this.cancel()}else if(n)this.state.currentState!==Xs.Edit&&this.switchToEditState();else{if(!i)return(0,o.throwError)(`Record editor: property ${e} is not settable.`);{const e=Number(i[1]);this.setFieldValue(e,t)}}}setFieldValue(e,t,i,n={}){this.state.recordInstance&&this.state.recordInstance.getRecordInstance(i)&&this.state.recordInstance.isFieldValueChanged(e,t,i)&&(this.state.recordInstance.setFieldValue(e,t,i),this.state.form.syncFormControlValues(String(e),this.state.recordInstance.getFieldValue(e,i),i&&i.join(ol),n),this.updateSelectionFieldOptionNames(this.state.recordInstance),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.updateIsDirtyProperty(),this.updateCanSaveProperty())}getFieldValue(e,t){return this.state.recordInstance&&this.state.recordInstance.getFieldValue(e,t)}save(e=!1){if(this.isInTemporaryMode())return this.rxLogService.debug("Record Editor: skip saving record instance in Temporary mode."),o.EMPTY;if(this.isValid()){if(this.canSave()){let t;return this.state.isSaving=!0,this.updateCanSaveProperty(),this.isInCreateMode()?t=this.rxRecordInstanceService.create(this.state.recordInstance).pipe((0,r.tap)(t=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message")),this.state.recordInstanceId||((0,u.set)(this.state.recordInstance,`fieldInstances[${a.RX_RECORD_DEFINITION.coreFieldIds.id}].value`,t.id),this.state.recordInstance.id=t.id,this.state.recordInstanceId=t.id),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.notifyPropertyChanged("recordInstanceId",this.state.recordInstanceId),e||this.rxGlobalEventsService.viewActionsCompleted$.pipe((0,r.take)(1),(0,r.switchMap)(()=>this.initializeRecordInstance()),(0,r.takeUntil)(this.destroyed$)).subscribe()}),(0,r.switchMapTo)(o.EMPTY)):this.isInEditMode()&&(t=this.rxRecordInstanceUpdateService.execute(this.state.recordInstance).pipe((0,r.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message"))}),(0,r.switchMap)(()=>this.initializeRecordInstance().pipe((0,r.catchError)(e=>this.handleNoRecordFoundError(e)),(0,r.tap)({complete:()=>{this.state.isReadOnlyStateAvailable&&this.setRecordEditorState(Xs.Read)}}))))),t.pipe((0,r.tap)({complete:()=>{this.state.form.markAsPristine()}}),(0,r.finalize)(()=>{this.state.isSaving=!1,this.updateCanSaveProperty(),this.updateIsDirtyProperty()}))}return this.rxLogService.debug("Record Editor: cannot save unmodified record instance."),(0,o.throwError)(null)}return this.state.form.markInvalidControlsAsTouched(),this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.validation-error.message")),(0,o.throwError)(null)}getFieldControl(e,t,i=[],n){const a=this.state.form.getFormControl(String(e),t,n);if(a)return a;const s=this.state.recordInstance?this.state.recordInstance.getFieldValue(e,n):null,l=this.getFieldInstanceControlValidator(e,n);let d;return(i=Array.isArray(i)?i:[i]).push(l),d=n?this.state.form.addAssociatedFieldControl(String(e),t,n,s,i):this.state.form.addFieldControl(String(e),t,s,i),d.valueChanges.pipe((0,r.distinctUntilChanged)(this.rxRecordInstanceUtilsService.isFieldValueEqual),(0,r.observeOn)(o.asyncScheduler),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.setFieldValue(e,d.value,n,{markAsDirty:d.dirty,markAsTouched:!1})}),d}getPermissionType(e,t){const i=this.state.recordInstance?this.state.recordInstance.getFieldInstance(e,t):null;return i?(0,u.get)(i,"permissionType")||a.RX_RECORD_DEFINITION.fieldPermissionTypes.change:null}getFieldInstanceProp(e,t,i){return this.state.recordInstance&&this.state.recordInstance.getFieldProp(e,t,i)}getRecordEditorMode(){return this.state.mode}setFieldInstanceProp(e,t,i,n){this.state.recordInstance&&this.state.recordInstance.setFieldProp(e,t,i,n)}isValid(){return this.state.form.valid}switchToEditState(){this.setRecordEditorState(Xs.Edit)}isEditStateAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Read&&Boolean(this.state.recordInstanceId)&&Boolean(this.state.allowEdit)}isSaveButtonAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Edit}isSaveButtonDisabled(){return!this.canSave()}isCancelButtonAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Edit&&this.isInEditMode()}cancel(){if(this.state.isReadOnlyStateAvailable&&this.state.recordInstance){if(this.isDirty())return(0,o.defer)(()=>(0,o.from)(this.rxUtilityModalsService.confirmUnsavedChanges())).pipe((0,r.switchMap)(e=>e?(this.restoreRecordEditor(),this.setRecordEditorState(Xs.Read),o.EMPTY):(0,o.throwError)(null)));this.setRecordEditorState(Xs.Read)}return o.EMPTY}canSave(){return!!this.isInTemporaryMode()||!this.state.isSaving&&(this.isInCreateMode()||this.isDirty())}isConfigValid(){return!this.isInEditMode()||this.rxStringService.isNonEmptyString(this.state.recordInstanceId)}onSaveClick(){this.save().pipe((0,r.take)(1),(0,r.catchError)(e=>null===e?(0,o.of)(e):(0,o.throwError)(e))).subscribe()}onCancelClick(){this.cancel().subscribe()}initializeRecordInstance(){let e=o.EMPTY;return this.isConfigValid()?(this.state.isDataLoading=!0,e=this.getRecordInstance().pipe((0,r.tap)(e=>{this.setRecordInstance(e),this.setRecordDefinition(e.recordDefinition),this.updateSelectionFieldOptionNames(e)}),(0,r.switchMapTo)(o.EMPTY),(0,r.catchError)(e=>(o.asapScheduler.schedule(()=>{this.setRecordInstance(null),this.setRecordDefinition(null)}),(0,o.throwError)(e))),(0,r.finalize)(()=>{this.state.isDataLoading=!1}))):(""===this.state.recordInstanceId||(0,u.isNil)(this.state.recordInstanceId)||this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.invalid-record-instance-id.message")),this.state.recordInstance&&(this.setRecordInstance(null),this.setRecordDefinition(null))),e}handleNoRecordFoundError(e){const t=this.rxRecordInstanceUtilsService.isNoRecordFoundError(e);return t&&(this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.no-access-to-record.message")),this.runtimeViewModelApi.cancel(!0).subscribe()),(0,o.throwError)(t?null:e)}updateIsDirtyProperty(){const e=this.isDirty();this.state.isDirty!==e&&(this.state.isDirty=e,this.notifyPropertyChanged("isDirty",e))}updateCanSaveProperty(){const e=this.canSave();this.state.canSave!==e&&(this.state.canSave=e,this.notifyPropertyChanged("canSave",e))}setRecordInstance(e){(0,u.forEach)(this.associationManagers,e=>e.destroy()),this.associationInstances={},this.associationManagers={},e&&!e.associationInstances&&(e.associationInstances={},this.associationInstances=e.associationInstances),this.state.recordInstance=e,this.state.recordInstanceId=e&&e.id,e?this.syncRecordInstanceWithForm():this.state.form.clearAndReset(),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.notifyPropertyChanged("recordInstanceId",this.state.recordInstanceId),this.updateIsDirtyProperty(),this.updateCanSaveProperty(),e&&this.recordInstanceChangedSubject.next()}getFieldInstanceControlValidator(e,t){return i=>this.state.recordInstance&&this.state.recordInstance.validateSingleField(e,i.value,t)}setRecordDefinition(e){e&&(this.isInBulkEditMode()&&(e=this.rxRecordDefinitionService.setFieldDefinitionsToOptional(e)),e.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(e)),this.state.recordDefinition=e,this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}getRecordInstance(){return this.isInCreateMode()||this.isInTemporaryMode()?this.state.recordInstance?(this.state.recordInstance=this.state.recordInstance.getOriginalRecordInstance(),(0,o.of)(this.state.recordInstance)):this.rxRecordInstanceService.getNew(this.state.recordDefinitionName):this.isInBulkEditMode()?this.rxRecordInstanceService.getEmpty(this.state.recordDefinitionName):this.isInEditMode()?this.rxRecordInstanceService.get(this.state.recordDefinitionName,this.state.recordInstanceId):void 0}getAssociationInstances(e,t,i){const n=(0,u.compact)([t,i]).join(":");let o=(0,u.get)(this.associationInstances,[e,n]);return o||(o={existing:[],pending:[],deleted:[],extensions:[]},(0,u.set)(this.associationInstances,[e,n],o)),o}setRecordEditorState(e){this.state.currentState=e,this.notifyPropertyChanged("inReadState",e===Xs.Read)}isInCreateMode(){return this.state.mode===qs.Create}isInBulkEditMode(){return this.state.mode===qs.BulkEdit}isInEditMode(){return this.state.mode===qs.Edit}isInTemporaryMode(){return this.state.mode===qs.Temporary}isNewAttachment(e){return Boolean(this.state.recordInstance.fieldInstances[e].file)}updateSelectionFieldOptionNames(e){if(e&&(0,u.get)(this.state.recordDefinition,"fieldDefinitions")){const t=this.rxRecordEditorUtilsService.getSelectionFieldOptionNames(this.state.recordDefinition,e);(0,u.isEqual)(this.state.selectionFieldOptionNamesById,t)||this.notifyPropertyChanged("selectionFieldOptionNamesById",t)}}syncRecordInstanceWithForm(e){const t=this.state.form.getFieldIds(e);if(!(0,u.isEmpty)(t)){const i=t.reduce((t,i)=>(t[i]=this.state.recordInstance.getFieldValue(Number(i),e),t),{});this.state.form.resetFieldControls(i,e)}}restoreRecordEditor(){this.state.recordInstance.revertFieldInstances(),(0,u.forEach)(this.associationManagers,e=>e.restore()),this.syncRecordInstanceWithForm(),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.updateIsDirtyProperty(),this.updateCanSaveProperty()}}sl.\u0275fac=function(e){return new(e||sl)(n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUpdateService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxGlobalEventsService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](il),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService),n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](S.RxUtilityModalsService),n["\u0275\u0275directiveInject"](al),n["\u0275\u0275directiveInject"](tl))},sl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sl,selectors:[["rx-record-editor"]],inputs:{config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275ProvidersFeature"]([al]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","loader-container",4,"ngIf"],[4,"ngIf"],["class","clearfix",4,"ngIf"],[1,"loader-container"],[1,"loader-inline","mr-1"],[1,"clearfix"],[1,"d-flex","justify-content-end"],["class","py-0 mb-1","adapt-button","","size","small","btn-type","tertiary",3,"click",4,"ngIf"],["class","mr-1 mt-3","rx-id","save-button","adapt-button","","btn-type","primary","size","small",3,"disabled","click",4,"ngIf"],["class","mt-3","rx-id","cancel-button","adapt-button","","btn-type","secondary","size","small",3,"click",4,"ngIf"],["adapt-button","","size","small","btn-type","tertiary",1,"py-0","mb-1",3,"click"],["rx-id","save-button","adapt-button","","btn-type","primary","size","small",1,"mr-1","mt-3",3,"disabled","click"],["rx-id","cancel-button","adapt-button","","btn-type","secondary","size","small",1,"mt-3",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ie,5,3,"div",0),n["\u0275\u0275template"](1,ne,3,3,"div",1),n["\u0275\u0275template"](2,se,6,3,"div",2)),2&e&&(n["\u0275\u0275property"]("ngIf",t.state.isDataLoading&&!t.state.recordInstance),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!(t.state.isDataLoading||t.isConfigValid()&&t.state.recordInstance)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.recordInstance&&t.isConfigValid()))},directives:[f.NgIf,h.RuntimeViewCanvasOutletComponent,m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8;padding:1rem;position:relative}']});class ll{constructor(e){this.viewDefinitionParserService=e}adaptDefinition(e){const t=(0,u.get)(e,"propertiesByName");t.mode===qs.Edit&&(0,u.isUndefined)(t.allowEdit)&&(t.allowEdit="1"),this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type!==d.RxViewComponentType.ActionButton&&(e.componentDefinition.propertiesByName.hasOwnProperty("fieldId")||e.componentDefinition.type===d.RxViewComponentType.Association)).map(e=>e.componentDefinition).forEach(t=>{Object.assign(t.propertiesByName,{api:`\${view.components.${e.guid}.api}`,inReadState:`\${view.components.${e.guid}.inReadState}`,recordDefinition:`\${view.components.${e.guid}.recordDefinition}`,recordInstance:`\${view.components.${e.guid}.recordInstance}`})})}}function dl(e,t,i,n,o,r){return function(a){return new tl(a,e,t,i,n,o,r)}}ll.\u0275fac=function(e){return new(e||ll)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService))},ll.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ll,factory:ll.\u0275fac});class cl{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.recordEditorComponentDefinitionAdapterService=t,e.registerRuntimeAdapter(d.RxViewComponentType.RecordEditor,this.recordEditorComponentDefinitionAdapterService)}}cl.\u0275fac=function(e){return new(e||cl)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](ll))},cl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:cl,declarations:[sl],imports:[f.CommonModule,h.RuntimeViewCanvasModule,x.ReactiveFormsModule,m.AdaptButtonModule,S.RxModalModule,p.TranslateModule,m.AdaptAlertModule],exports:[sl]}),cl.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ll,il,{provide:tl,useFactory:dl,deps:[C.RxAssociationInstanceDataPageService,a.RxRecordDefinitionCacheService,a.RxRecordInstanceUtilsService,a.RxRecordInstanceService,v.RxJsonParserService,C.RxAssociationDefinitionCacheService]}],imports:[[f.CommonModule,h.RuntimeViewCanvasModule,x.ReactiveFormsModule,m.AdaptButtonModule,S.RxModalModule,p.TranslateModule,m.AdaptAlertModule.forRoot()]]});class pl{constructor(){this.resourceTypeFieldTypeMap={},this.initResourceTypeFieldTypeMap()}getFieldTypeByFieldDefinition(e){return(0,u.isFunction)(this.resourceTypeFieldTypeMap[e.resourceType])?this.resourceTypeFieldTypeMap[e.resourceType](e):this.resourceTypeFieldTypeMap[e.resourceType]}initResourceTypeFieldTypeMap(){this.resourceTypeFieldTypeMap=Object.assign(Object.assign({},Us.fieldTypes),{[a.RX_RECORD_DEFINITION.resourceTypes.character]:e=>e.namedListDefinition||(0,u.inRange)(e.maxLength,1,255)?d.RxViewComponentType.Character:d.RxViewComponentType.Textarea})}}pl.\u0275fac=function(e){return new(e||pl)},pl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:pl,factory:pl.\u0275fac,providedIn:"root"});const ul={actions:{associate:"associate",createAndAssociate:"createAndAssociate"},componentTypes:{associationFilter:"rx-association-filter",associatedRecordField:"rx-associated-record-field"}};var ml;!function(e){e.Dropdown="dropdown",e.Views="views"}(ml||(ml={}));class fl{ngOnInit(){this.maxFieldValueLength=this.config.maxFieldValueLength||200}isEditableState(){return this.config.state===Xs.Edit}}fl.\u0275fac=function(e){return new(e||fl)},fl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fl,selectors:[["rx-record-preview-card"]],inputs:{config:"config"},decls:4,vars:2,consts:[[1,"rx-record-preview-card","d-flex","align-items-start","justify-content-between","w-100"],["tabindex","0",1,"rx-card-fields","d-flex","flex-column","list-unstyled","focusable","mb-0"],["class","d-flex rx-card-field",4,"ngFor","ngForOf"],["class","btn btn-link d-icon-cross p-0","adapt-button","","size","small","btn-type","tertiary",3,"click",4,"ngIf"],[1,"d-flex","rx-card-field"],["class","rx-card-field-label",4,"ngIf"],[4,"ngIf"],[1,"rx-card-field-value","px-1",3,"ngClass"],[1,"rx-card-field-label"],["adapt-button","","size","small","btn-type","tertiary",1,"btn","btn-link","d-icon-cross","p-0",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"ul",1),n["\u0275\u0275template"](2,pe,5,6,"li",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,ue,2,3,"button",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.config.fields),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isEditableState()))},directives:[f.NgForOf,f.NgIf,f.NgClass,m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex}.rx-record-preview-card[_ngcontent-%COMP%]{flex:1}.rx-card-field[_ngcontent-%COMP%]{flex:1;line-height:20px}.rx-card-field[_ngcontent-%COMP%]:not(:first-child){color:#959899}.rx-card-fields[_ngcontent-%COMP%]{flex:1;white-space:nowrap;min-width:0}.rx-card-field-label[_ngcontent-%COMP%]{flex-shrink:0;max-width:30%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.rx-card-field-value[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}']});class hl extends h.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.datePipe=e,this.rxAssociationDefinitionService=t,this.rxAssociationInstanceDataPageService=i,this.rxRecordDefinitionInheritanceDataPageService=n,this.rxRecordInstanceDataPageService=o,this.rxRecordInstanceUtilsService=r,this.isDisabled=!1,this.api={associate:e=>{this.associationManager.addToPending(e,this.extractRolesConfig())}},this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.optionLoaderFunc=this.getAssociationsOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.existingPreviewConfigurations=[],this.pendingPreviewConfigurations=[],this.selectedOptions=[],this.pendingPageSize=10,this.currentPendingCount=10,this.totalPendingCount=0,this.associationCandidateRecordInstances=[],this.fieldDefinitions={},this.fieldId=null,this.fields=[],this.inReadState=!1,this.label=null,this.recordDefinition=null,this.recordDefinitionName=null,this.useDefaultRoles=null,this.nodeARole=null,this.nodeBRole=null,this.formControl=new x.FormControl("",null),this.isHidden=!1}ngOnInit(){super.ngOnInit();const e=this.config.pipe((0,r.filter)(e=>Boolean(e.api&&e.recordDefinition)),(0,r.takeUntil)(this.destroyed$));e.pipe((0,r.take)(1)).subscribe(e=>{this.onConfigInitialized(e),this.onConfigUpdated(e)}),e.pipe((0,r.skip)(1)).subscribe(this.onConfigUpdated.bind(this)),this.notifyPropertyChanged("api",this.api),this.previewRolesConfig=this.extractRolesConfig()}ngAfterViewInit(){this.editingMode===ml.Dropdown&&this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(),(0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.updateSelectedOptions()})}onConfigInitialized(e){this.associationDefinitionName=e.associationDefinitionName,this.associatedRecordNodeSide=e.associatedRecordNodeSide,this.editingMode=e.editingMode||ml.Views,this.fieldId=e.fieldId,this.fields=e.fields,this.recordDefinition=e.recordDefinition,this.recordDefinitionName=e.recordDefinitionName,this.recordEditorApi=e.api,this.state=e.state,this.useDefaultRoles=e.useDefaultRoles,this.nodeARole=e.nodeARole,this.nodeBRole=e.nodeBRole,this.fieldId&&(this.fieldDefinition=e.recordDefinition.fieldDefinitions.find(e=>e.id===Number(this.fieldId)))}onConfigUpdated(e){var t;const i=Boolean(e.inReadState),n=Boolean(e.disabled)||this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view;let s=!1;this.isHidden=Boolean(e.hidden),this.areActionsAvailable=!i&&this.editingMode===ml.Views,this.isDisabled!==n&&(this.isDisabled=n,s=!0),this.inReadState!==i&&(this.inReadState=i,s=!0),s&&this.existingPreviewConfigurations.length&&this.updatePreviewCardConfigState(),this.label=(0,u.isUndefined)(e.label)?null!==(t=this.fieldDefinition.name)&&void 0!==t?t:"":e.label,this.selectWithPaginationComponent&&this.associationFilter&&(0,u.get)(e,"associationFilter[0]")&&this.associationFilter.recordInstanceId!==e.associationFilter[0].recordInstanceId&&(this.recordEditorApi.isReady()&&this.deleteAllExisting(),this.deleteAllPending(),this.selectWithPaginationComponent.resetLoadedOptions(),this.associationCandidateRecordInstances=[],this.associationFilterNodeSide||this.rxAssociationDefinitionService.get(this.associationFilter.associationDefinitionName).pipe((0,r.switchMap)(e=>{if(e.nodeAId===this.recordDefinitionName)this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeA;else{if(e.nodeBId!==this.recordDefinitionName)return this.rxRecordDefinitionInheritanceDataPageService.get({params:{recorddefinition:this.recordDefinitionName}}).pipe((0,r.tap)(t=>{const i=t.data;if((0,u.includes)(i,e.nodeAId))this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeA;else{if(!(0,u.includes)(i,e.nodeBId))throw new Error("No matches for association definition node side within inheritance ancestors.");this.associatedRecordNodeSide=C.RxAssociatedRecordNodeSide.NodeB}}));this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeB}return o.EMPTY})).subscribe()),this.associationFilter=(0,u.head)(e.associationFilter),e.recordInstance&&this.recordInstance!==e.recordInstance&&(this.recordInstance=e.recordInstance,this.isDisabled=!0,this.notifyPropertyChanged("isDisabled",this.isDisabled),this.recordEditorApi.notifyComponentReady(this.guid,!1),this.associationManager=this.getAssociationManager(),this.associationManager.initialize().pipe((0,r.delay)(0),(0,r.switchMap)(()=>this.associationManager.loadExistingAssociations()),(0,r.tap)(()=>{this.isDisabled=Boolean(e.disabled)||this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view,this.notifyPropertyChanged("isDisabled",this.isDisabled),this.areActionsAvailable=!this.inReadState&&this.editingMode===ml.Views,this.editingMode===ml.Views&&(this.fieldDefinitions=(0,u.transform)(this.fields,(e,t)=>{const i=(0,u.find)(this.associationManager.recordDefinition.fieldDefinitions,{id:Number(t.fieldId)});e[i.id]=i},{})),this.associationManager.existing$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.onAssociationsChanged(e,"existingPreviewConfigurations"),this.updateTotalExistingAssociationsCount()}),this.associationManager.pending$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.onAssociationsChanged(e,"pendingPreviewConfigurations"),this.totalPendingCount=this.pendingPreviewConfigurations.length}),(0,o.combineLatest)([this.associationManager.pending$,this.associationManager.existing$]).pipe((0,r.take)(1)).subscribe(()=>{this.recordEditorApi.notifyComponentReady(this.guid,!0)})})).subscribe())}getAssociationManager(){const e=this.fieldId?[this.fieldId,a.RX_RECORD_DEFINITION.coreFieldIds.id]:(0,u.map)(this.fields,"fieldId");return this.recordEditorApi.getAssociationManager({associationDefinitionName:this.associationDefinitionName,associatedRecordNodeSide:this.associatedRecordNodeSide||C.RX_ASSOCIATION_DEFINITION.roles.second.value,associatedRecordInstanceId:this.recordInstance.id,recordDefinitionName:this.recordDefinitionName,fieldIds:e,rolesConfig:this.extractRolesConfig()})}getAssociationsOptionPage(e,t,i){const n={pageSize:t,startIndex:e,recorddefinition:this.recordDefinitionName,propertySelection:this.associationManager.getFieldIds()};let s;return this.associationFilter?this.associationFilter.recordInstanceId&&(n.associationDefinition=this.associationFilter.associationDefinitionName,n.associatedRecordInstanceId=this.associationFilter.recordInstanceId,n.nodeToQuery=this.associationFilterNodeSide,s=this.rxAssociationInstanceDataPageService):(n.sortBy=this.fieldId,i&&(n.queryExpression=`('${this.fieldId}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(i)}%")`),s=this.rxRecordInstanceDataPageService),s?s.post({params:n}).pipe((0,r.map)(e=>(this.associationCandidateRecordInstances.push(...e.data),{totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e[this.fieldId]||"",value:e[a.RX_RECORD_DEFINITION.coreFieldIds.id]}))}))):(0,o.of)({options:[],totalSize:0})}deleteAllExisting(){this.associationManager.deleteAllExisting()}deleteAllPending(){this.associationManager.deleteAllPending()}loadExistingAssociations(){this.associationManager.loadExistingAssociations().pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.updateTotalExistingAssociationsCount())}isReadModeEnabled(){return this.inReadState}isEditModeEnabled(){return!this.inReadState}getAssociatedValue(){return(0,u.get)(this,"selectedOptions[0].displayValue")}viewToModelValueAdapter(e){return e.map(e=>e.value).join(";")}modelToViewValueAdapter(e){return e?(0,u.castArray)(this.selectedOptions):[]}resetDropdownSelection(){this.selectedOptions=[]}updatePreviewCardConfigState(){(0,u.forEach)(this.existingPreviewConfigurations,e=>{e.state=this.getStateForPreviewConfiguration()})}updateSelectedOptions(){if(this.formControl.value&&!(0,u.isNil)(this.formControl.value)){const e={id:this.formControl.value,fieldInstances:null},t=(0,u.find)(this.associationCandidateRecordInstances,function(t){return t[a.RX_RECORD_DEFINITION.coreFieldIds.id]===e.id});e.fieldInstances=(0,u.transform)(t,function(e,t,i){e[i]={value:t}},{}),this.associationManager.addToPending([e],null)}else this.deleteAllExisting(),this.deleteAllPending()}buildPreviewConfig(e,t,i){return{id:e.id,state:i,onDelete:e=>{this.associationManager.delete(e)},fields:(0,u.map)(t,t=>{const i=this.fieldDefinitions[t.fieldId],n=e.fieldInstances[t.fieldId];let o;return n&&(o=n.value),i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType&&(o=i.optionNamesById[o]),(i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType||i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType&&(0,u.isString)(o))&&(o=this.datePipe.transform(o,"mediumDate")),{label:t.label,value:o||"<unknown>",index:t.index,fieldId:t.fieldId}})}}showPendingAssociations(){this.currentPendingCount+=this.pendingPageSize}getPendingPreviewConfigurations(){return this.pendingPreviewConfigurations.slice(0,this.currentPendingCount)}extractRolesConfig(){return{useDefaultRoles:this.useDefaultRoles,nodeARole:this.nodeARole,nodeBRole:this.nodeBRole}}updateTotalExistingAssociationsCount(){this.associationManager.totalExistingCount=(this.associationManager.remainingAssociatedRecordCount||0)+this.existingPreviewConfigurations.length}getStateForPreviewConfiguration(){return this.areActionsAvailable&&!this.isDisabled?Xs.Edit:Xs.Read}getFirstAssociationRecord(){return this.associationManager.existing[0]||this.associationManager.pending[0]||{}}onAssociationsChanged(e,t){var i;const n=this.getFirstAssociationRecord();if(this.notifyPropertyChanged("firstAssociatedRecord",{id:n.id||""}),this.editingMode===ml.Views){const i=e.filter(e=>(0,u.every)(this.previewRolesConfig,u.isEmpty)||(0,u.isEqual)(this.previewRolesConfig,e.rolesConfig));this[t]=this.rebuildPreviewConfigurations(i)}else this.editingMode===ml.Dropdown&&(n.id?this.selectedOptions=[{displayValue:null===(i=n.fieldInstances[this.fieldId])||void 0===i?void 0:i.value,value:n.id}]:this.resetDropdownSelection(),this.formControl.setValue(n.id))}rebuildPreviewConfigurations(e){const t=this.getStateForPreviewConfiguration();return(0,u.map)(e,e=>this.buildPreviewConfig(e,this.fields,t))}}hl.\u0275fac=function(e){return new(e||hl)(n["\u0275\u0275directiveInject"](f.DatePipe),n["\u0275\u0275directiveInject"](C.RxAssociationDefinitionService),n["\u0275\u0275directiveInject"](C.RxAssociationInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionInheritanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService))},hl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hl,selectors:[["rx-association"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-field-disabled",t.isDisabled)},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"label","value",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[3,"label","value"],[3,"ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"ngClass"],[3,"label",4,"ngIf"],[4,"ngIf"],[3,"label"],[4,"ngSwitchDefault"],["class","list-group",4,"ngIf"],[1,"list-group"],[1,"list-group-item",3,"config"],["class","list-group-item",3,"config",4,"ngFor","ngForOf"],["adapt-button","","size","small","btn-type","tertiary","type","button",3,"click",4,"ngIf"],["adapt-button","","size","small","btn-type","tertiary","type","button",3,"click"],["class","form-group",4,"ngIf"],["class","form-group mt-3",4,"ngIf"],[1,"form-group"],[1,"d-flex","justify-content-end","pb-1"],[1,"preview-count"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","py-0",3,"hidden","click"],[1,"form-group","mt-3"],[1,"d-flex","justify-content-between"],[1,"m-0"],[1,"d-flex","pb-1"],[3,"formControl","readonly","label","modelToViewValueAdapter","optionLoader","viewToModelValueAdapter"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,me,1,2,"rx-read-only-field",0),n["\u0275\u0275template"](1,Pe,3,3,"div",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.isHidden&&t.isReadModeEnabled()&&(0===t.existingPreviewConfigurations.length||"dropdown"===t.editingMode)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isHidden))},directives:[f.NgIf,S.ReadOnlyFieldComponent,f.NgSwitch,f.NgSwitchCase,f.NgClass,m.AdaptRxControlLabelComponent,h.RuntimeViewCanvasOutletComponent,f.NgSwitchDefault,fl,f.NgForOf,m.AdaptButtonComponent,l.RxSelectWithPaginationComponent,x.NgControlStatus,x.FormControlDirective],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]  rx-runtime-view-canvas-item-container{display:flex}[_nghost-%COMP%]  .rx-runtime-view-canvas-item-margin{margin-bottom:0}[_nghost-%COMP%]  rx-runtime-view-canvas-item+rx-runtime-view-canvas-item{margin-left:5px}[_nghost-%COMP%]  .read-state .form-control-label{font-weight:var(--font-weight-normal)}.rx-group-title[_ngcontent-%COMP%]{font-size:.8125rem;color:#959899;display:flex;align-items:center}.rx-preview-existing-head[_ngcontent-%COMP%]{margin-top:-30px}.rx-preview-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#959899;vertical-align:middle}']});class gl{constructor(e){this.rxViewDefinitionParserService=e}adaptDefinition(e,t){const i=this.getTargetRecordEditorComponentDefinition(t,e),n=e.componentDefinitions.filter(e=>e.type===d.RxViewComponentType.ActionButton),o=(0,u.sortBy)(n,e=>e.propertiesByName.action===ul.actions.associate?0:1);e.propertiesByName.state=i.propertiesByName.mode,e.propertiesByName.useDefaultRoles="true"===e.propertiesByName.useDefaultRoles,e.propertiesByName.fields=(0,u.flow)(e=>(0,u.filter)(e,{type:ul.componentTypes.associatedRecordField}),e=>(0,u.map)(e,e=>({fieldId:e.propertiesByName.fieldId,label:e.propertiesByName.label,index:Number(e.propertiesByName.index)})),e=>(0,u.sortBy)(e,"index"))(e.componentDefinitions),e.layout=JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:o.map(e=>e.guid)}]}]}),e.componentDefinitions.filter(e=>e.type===d.RxViewComponentType.ActionButton).forEach(t=>{t.propertiesByName.disabled=e.propertiesByName.disabled+" OR ${view.components."+e.guid+".isDisabled}"})}getTargetRecordEditorComponentDefinition(e,t){return this.rxViewDefinitionParserService.findParentComponentDefinition(e,t,e=>e.type===d.RxViewComponentType.RecordEditor)}}gl.\u0275fac=function(e){return new(e||gl)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService))},gl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:gl,factory:gl.\u0275fac});class vl{constructor(e,t){this.rxAssociationDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(d.RxViewComponentType.Association,this.rxAssociationDefinitionAdapterService)}}vl.\u0275fac=function(e){return new(e||vl)(n["\u0275\u0275inject"](gl),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},vl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:vl,declarations:[hl,fl],imports:[m.AdaptButtonModule,m.AdaptRxFormControlModule,f.CommonModule,x.FormsModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,h.RuntimeViewCanvasModule,l.RxSelectWithPaginationModule,p.TranslateModule]}),vl.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[f.DatePipe,gl],imports:[[m.AdaptButtonModule,m.AdaptRxFormControlModule,f.CommonModule,x.FormsModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,h.RuntimeViewCanvasModule,l.RxSelectWithPaginationModule,p.TranslateModule]]});class yl extends S.RxModalClass{constructor(e,t,i,n){super(i,n),this.rxStringService=e,this.rxGuidService=t,this.activeModalRef=i,this.injector=n,this.availableFieldTreeNodes=[],this.canSave=!1,this.selectedFields=[],this.treeWrap=m.TreeWrap.WrapAll,this.config=this.activeModalRef.getData()}isDirty(){return this.canSave}ngOnInit(){super.ngOnInit(),this.fieldLabelsMap=(0,u.transform)(this.config.fields,(e,t)=>{e[t.id]=t.name},{}),this.availableFieldTreeNodes=this.config.fields.map(e=>({data:e,label:e.name})).sort((e,t)=>e.label.localeCompare(t.label)),this.selectedFields=(0,u.map)(this.config.selectedFields,e=>{const t=this.config.fields.find(t=>t.id===Number(e.data.fieldId));return Object.assign(Object.assign({},e),{labelText:e.data.label,indexOrder:Number(e.data.index),descriptor:t,isOpen:e===this.config.fieldToEdit})}),this.refreshFieldDescriptorsList()}addField(e){this.canSave=!0,this.selectedFields.push({guid:this.rxGuidService.generate(),data:{fieldId:String(e.id),label:e.name,index:String(this.selectedFields.length)},descriptor:e,labelText:e.name,indexOrder:this.selectedFields.length,isOpen:!0}),this.refreshFieldDescriptorsList()}onSelectedFieldsListDrop(e){this.addField(e.item.data)}onSave(){const e=this.selectedFields.map(e=>({guid:e.guid,type:"rx-associated-record-field",data:{fieldId:e.data.fieldId,index:String(e.indexOrder),label:e.labelText}}));this.activeModalRef.close(e)}onRemove(e){this.canSave=!0,(0,u.pull)(this.selectedFields,e),this.refreshFieldDescriptorsList()}onMoveUp(e,t){this.canSave=!0;const i=this.selectedFields[t-1];i&&(i.indexOrder++,e.indexOrder--,this.sortFields())}onMoveDown(e,t){this.canSave=!0;const i=this.selectedFields[t+1];i&&(i.indexOrder--,e.indexOrder++,this.sortFields())}toggleOpen(e){this.selectedFields.forEach(t=>t.isOpen=e)}sortFields(){this.selectedFields=(0,u.sortBy)(this.selectedFields,e=>e.indexOrder)}refreshFieldDescriptorsList(){const e=this.selectedFields.map(e=>String(e.data.fieldId));this.filteredFieldDescriptors=this.config.fields.filter(t=>!(0,u.includes)(e,String(t.id))).sort((e,t)=>e.name.localeCompare(t.name))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}yl.\u0275fac=function(e){return new(e||yl)(n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},yl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yl,selectors:[["rx-association-record-field-selector-editor-dialog"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:14,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"mt-2"],["class","btn-group",4,"ngIf"],["id","selected-fields","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled",4,"ngFor","ngForOf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],[1,"card-block"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngIf","ngIfElse"],["adaptTreeEmptyStateTemplate",""],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["filter","true",3,"value","wrap"],["adaptTreeNodeTemplate",""],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData",4,"ngIf"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData"],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["label","No fields found","type","search",1,"w-100"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragDisabled"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["label","Label",1,"text-aria-resize",3,"ngModel","ngModelChange"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["label","No fields selected","type","config",1,"w-100"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,$e,9,2,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"h4",4),n["\u0275\u0275text"](6,"Selected fileds"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Le,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",6),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedFieldsListDrop(e)}),n["\u0275\u0275elementStart"](9,"adapt-accordion",7),n["\u0275\u0275template"](10,ze,9,6,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Ue,2,0,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",10),n["\u0275\u0275template"](13,qe,3,4,"button",11),n["\u0275\u0275elementStart"](14,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.config.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",t.selectedFields.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.selectedFields),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.selectedFields.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](16,10,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,12,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,b.CdkDropList,m.AdaptAccordionComponent,f.NgForOf,m.AdaptButtonComponent,m.AdaptTreeComponent,m.AdaptTreeNodeTemplateDirective,b.CdkDrag,m.AdaptEmptyStateComponent,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}']});class bl extends l.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.renderer=t,this.selectedFields=[]}focus(){this.renderer.selectRootElement(this.openModalButton.nativeElement,!0).click()}openFieldSelector(e){this.rxModalService.openModal({title:this.options.label,data:{fields:this.options.fields,selectedFields:this.value,fieldToEdit:e,isReadOnly:this.isDisabled},content:yl}).then(e=>{this.value=e}).catch(u.noop)}onSetValue(){this.updateSortedFieldList()}onWriteValue(e){this.updateSortedFieldList()}removeField(e){this.value=this.value.filter(t=>t.guid!==e)}editField(e){this.openFieldSelector(e)}updateSortedFieldList(){this.selectedFields=(0,u.sortBy)(this.value,e=>Number(e.data.index)).map(e=>Object.assign(Object.assign({},e),{label:this.options.fields.find(t=>t.id===Number(e.data.fieldId)).name}))}}bl.\u0275fac=function(e){return new(e||bl)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](n.Renderer2))},bl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bl,selectors:[["rx-association-record-field-selector-form-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](J,7,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.openModalButton=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:bl,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["adapt-button","","type","button","btn-type","tertiary",1,"px-0","py-0",3,"disabled","click"],["openModalButton",""],["name","plus_circle",1,"mr-1"],["class","list-unstyled mb-0 mt-2",4,"ngIf"],[1,"list-unstyled","mb-0","mt-2"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-pencil","p-1",3,"disabled","click"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-cross_adapt","p-1",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0,1),n["\u0275\u0275listener"]("click",function(){return t.openFieldSelector()}),n["\u0275\u0275element"](2,"adapt-icon",2),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,We,2,1,"ul",3)),2&e&&(n["\u0275\u0275property"]("disabled",t.isDisabled),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",t.options.label,"\n"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.selectedFields.length>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,f.NgIf,f.NgForOf],encapsulation:2});class xl{}xl.\u0275fac=function(e){return new(e||xl)},xl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xl,declarations:[yl],imports:[f.CommonModule,m.AdaptRxSearchModule,m.AdaptButtonModule,m.AdaptAccordionModule,x.FormsModule,m.AdaptRxTextfieldModule,b.DragDropModule,m.AdaptTreeModule,m.AdaptEmptyStateModule,p.TranslateModule],exports:[yl]}),xl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxSearchModule,m.AdaptButtonModule,m.AdaptAccordionModule,x.FormsModule,m.AdaptRxTextfieldModule,b.DragDropModule,m.AdaptTreeModule,m.AdaptEmptyStateModule,p.TranslateModule]]});class Cl{}Cl.\u0275fac=function(e){return new(e||Cl)},Cl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cl,declarations:[bl],imports:[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptIconModule,xl],exports:[bl]}),Cl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptIconModule,xl]]});class Sl{constructor(e,t,i,n){this.rxRecordDefinitionCacheService=e,this.rxAssociationDefinitionDataPageService=t,this.rxGuidService=i,this.rxDefinitionNameService=n}getDropdownModeInspectorControls(e,t){return[{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field to display",options:e?e.filter(e=>[a.RX_RECORD_DEFINITION.resourceTypes.character,a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter].includes(e.resourceType)).map(e=>({id:String(e.id),name:e.name})):[],emptyOption:!0,required:!0}},{name:"filterByAssociation",component:l.SelectFormControlComponent,options:{label:"Filter by association",options:t?t.map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})):[],emptyOption:!0}}]}getDisplayedFieldsControl(e){return{name:"displayedFields",component:bl,options:{label:"Show/Hide fields",fields:e,required:!0}}}getRecordIdControl(){return{name:"recordId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",isRequired:!0}}}getUseDefaultRolesControl(){return{name:"useDefaultRoles",component:l.SwitchFormControlComponent,options:{label:"Use default roles"}}}getNodeABRoleControls(){return[{name:"nodeARole",component:l.ExpressionInspectorControlComponent,options:{label:"First record role"}},{name:"nodeBRole",component:l.ExpressionInspectorControlComponent,options:{label:"Second record role"}}]}getViewModeInspectorControls(){return[{name:"viewDefinitionNameForSelect",component:l.RxDefinitionPickerComponent,options:{label:"View for selecting associated records",definitionType:l.RxDefinitionPickerType.View,required:!0}},{name:"viewDefinitionNameForCreate",component:l.RxDefinitionPickerComponent,options:{label:"View for creating associated records",definitionType:l.RxDefinitionPickerType.View}}]}getInitialInspectorControls(e){return[{name:"label",component:l.TextFormControlComponent,options:{label:"Display label"}},(0,c.getDisabledFieldInspectorConfig)(),...(0,c.getStandardPropsInspectorConfigs)()]}getInitialProperties(){return Object.assign(Object.assign({associatedRecordNodeSide:"",associationDefinitionName:"",displayedFields:[],editingMode:ml.Views,fieldId:null,filterByAssociation:"",label:null,nodeARole:"",nodeBRole:"",recordDefinition:"",recordDefinitionName:"",recordId:"",recordInstance:"",useDefaultRoles:!0,viewDefinitionNameForCreate:"",viewDefinitionNameForSelect:""},d.RX_DISABLED_PROP_DEFAULT_VALUE),d.RX_STANDARD_PROPS_DEFAULT_VALUES)}getActionButtonDefinition(e,t,i){return{type:d.RxViewComponentType.ActionButton,guid:this.rxGuidService.generate(),propertiesByName:{labelKey:t===ul.actions.associate?"com.bmc.arsys.rx.client.view-components.record-editor.association.button.associate.label":"com.bmc.arsys.rx.client.view-components.record-editor.association.button.create-new.label",style:"secondary",action:t},children:[{guid:this.rxGuidService.generate(),type:d.RxViewComponentType.Action,propertiesByName:{name:"rxAvcAssociate",associationViewComponent:`\${view.components.${i}.api}`,viewDefinitionName:t===ul.actions.associate?e.viewDefinitionNameForSelect:e.viewDefinitionNameForCreate}}],insertIndex:t===ul.actions.associate?0:1}}isCardinalityOne(e,t){const i=t.find(t=>t.name===e.associationDefinitionName);return Boolean(i&&(i.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value||i.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value&&e.associatedRecordNodeSide===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value))}getAvailableAssociations(e,t){const i={headers:{"default-bundle-scope":""},params:{firstRecordDefinitionName:e,secondRecordDefinitionName:t,requireDependent:!0}};return this.rxAssociationDefinitionDataPageService.get(i).pipe((0,r.map)(e=>e.data))}getRecordDefinition(e){return this.rxRecordDefinitionCacheService.getRecordDefinition(e)}getFieldsInChildComponentsWithNames(e,t){return e.reduce((e,i)=>{const n=t.find(e=>e.id===Number(i.data.fieldId));return e.push(Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{name:n?n.name:i.data.label})})),e},[])}cleanEditingModeDependentData(e){e.editingMode===ml.Dropdown?(e.viewDefinitionNameForSelect=null,e.viewDefinitionNameForCreate=null,e.displayedFields=[]):(e.filterByAssociation=null,e.recordId=null,e.fieldId=null)}getNodeSideOptions(e){return e.nodeAId===e.nodeBId?[{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,name:e.nodeAName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,name:e.nodeBName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]}resetRolesData(e){e.useDefaultRoles=!1,e.nodeARole=null,e.nodeBRole=null}validate(e,t,i,n){const o=[];return t.recordDefinitionName||o.push(e.createError("Record definition to associate cannot be blank.","recordDefinitionName")),t.recordDefinitionName&&!t.associationDefinitionName&&o.push(e.createError("Association to Use cannot be blank.","associationDefinitionName")),t.associationDefinitionName&&(i.nodeAId!==i.nodeBId||t.associatedRecordNodeSide||o.push(e.createError("Associated Record Node Side cannot be blank.","fieldId"))),t.editingMode!==ml.Views&&t.editingMode?t.editingMode===ml.Dropdown&&(t.filterByAssociation&&!n.recordId&&o.push(e.createError("Record ID cannot be blank.","recordId")),t.fieldId||o.push(e.createError("Field to display cannot be blank.","fieldId"))):(t.recordDefinitionName&&0===n.displayedFields.length&&o.push(e.createError("Preview Fields cannot be empty.","displayedFields")),t.viewDefinitionNameForSelect||o.push(e.createError("View for selecting associated records cannot be blank.","viewDefinitionNameForSelect"))),o.push(...(0,c.validateStandardProps)(t)),o}}Sl.\u0275fac=function(e){return new(e||Sl)(n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](C.RxAssociationDefinitionDataPageService),n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](s.RxDefinitionNameService))},Sl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Sl,factory:Sl.\u0275fac});class Dl extends c.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxAssociationDefinitionCacheService=this.injector.get(C.RxAssociationDefinitionCacheService),this.rxGuidService=this.injector.get(v.RxGuidService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.associationDesignHelperService=this.injector.get(Sl),this.updateInspector$=new o.Subject,this.childComponents$=this.sandbox.getChildComponentsTree(),this.associationChildComponentsData$=this.getChildComponentsData(),this.associationDefinitions=[],this.associationDefinitionFilters=[],this.recordDefinitionFields=[],this.associatedRecordNodeSide=[],this.isManyToManyAssociation=!1,this.editingMode$=this.sandbox.getComponentPropertyValue("editingMode"),this.label$=this.sandbox.getComponentPropertyValue("label"),this.updateInspector$.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)});const i=t.getComponentPropertyValue("recordDefinitionName").pipe((0,r.switchMap)(e=>e?this.updateRecordDefinitionFields(e):(0,o.of)([])));this.displayedFields$=(0,o.combineLatest)([this.sandbox.getChildComponents(e=>e.type===ul.componentTypes.associatedRecordField),i]).pipe((0,r.map)(([e,t])=>this.associationDesignHelperService.getFieldsInChildComponentsWithNames(e,t))),this.recordEditorGuid$=this.sandbox.getParentComponentGuid(d.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.otherAssociationRecordEditorComponentGuids$=this.recordEditorGuid$.pipe((0,r.map)(e=>this.sandbox.getComponentModel(e)),(0,r.switchMap)(e=>e.associationComponentGuids$.pipe((0,r.map)(e=>e.filter(e=>e!==this.sandbox.guid)))),(0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.recordDefinitionNameFromHostRecordEditor$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.recordDefinitionNameFromHostRecordEditor$.pipe((0,r.switchMap)(e=>e?(0,o.combineLatest)([this.sandbox.componentProperties$,this.associationChildComponentsData$]).pipe((0,r.switchMap)(([t,i])=>{const n=e?this.generateInitialUpdateParameters(t):[];return(n.length>0?(0,o.combineLatest)(n):(0,o.of)(null)).pipe((0,r.map)(()=>({componentProperties:Object.assign(Object.assign({},i),t),recordDefinitionRecordEditorName:e})))}),(0,r.take)(1)):(0,o.of)({componentProperties:null,recordDefinitionRecordEditorName:null})),(0,r.withLatestFrom)(this.recordEditorGuid$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{componentProperties:e,recordDefinitionRecordEditorName:t},i])=>{const n=this.associationDesignHelperService.getInitialProperties(),o=Object.assign(Object.assign(Object.assign({},n),e),{useDefaultRoles:Boolean("true"===(null==e?void 0:e.useDefaultRoles))});this.recordEditorGuid=i,this.sandbox.updateComponentProperties(o),this.updateInspector$.next(this.getInspectorConfig(o,t,i))});const n=this.childComponents$.pipe((0,r.map)(e=>e.map(e=>e.guid)));this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.skip)(1),(0,r.withLatestFrom)(n),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties({recordDefinitionName:e,label:null,associationDefinitionName:null,associatedRecordNodeSide:null,editingMode:ml.Views,viewDefinitionNameForSelect:null,viewDefinitionNameForCreate:null,fieldId:null,useDefaultRoles:!1,nodeARole:null,nodeBRole:null,displayedFields:[],filterByAssociation:null,recordId:null}),this.sandbox.removeComponents(t)}),this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.skip)(1),(0,r.concatMapTo)(this.sandbox.componentProperties$),(0,r.concatMap)(e=>(0,o.combineLatest)([this.updateAssociationDefinitionsOptions(e.recordDefinitionName),this.updateRecordDefinitionFields(e.recordDefinitionName),this.updateAssociationDefinitionsFilterOptions(e.recordDefinitionName),this.updateAssociationNodeSideOptions(e.associationDefinitionName),this.updatePreviousDropdownFieldDefinition(e.recordDefinitionName,e.fieldId)]).pipe((0,r.take)(1),(0,r.mapTo)(e))),(0,r.withLatestFrom)(this.recordDefinitionNameFromHostRecordEditor$,this.recordEditorGuid$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t,i])=>{this.updateInspector$.next(this.getInspectorConfig(e,t,i))}),this.sandbox.getComponentPropertyValue("editingMode").pipe((0,r.skip)(1),(0,r.withLatestFrom)(n),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties({editingMode:e,viewDefinitionNameForSelect:null,viewDefinitionNameForCreate:null,fieldId:null,useDefaultRoles:!1,nodeARole:null,nodeBRole:null,displayedFields:[],filterByAssociation:null,recordId:null}),this.sandbox.removeComponents(t)}),this.sandbox.componentProperties$.pipe((0,r.skip)(1),(0,r.pairwise)(),(0,r.withLatestFrom)(this.childComponents$),(0,r.switchMap)(([[e,t],i])=>{const n=Object.assign({},t),a=[];switch(!0){case e.viewDefinitionNameForSelect!==t.viewDefinitionNameForSelect:this.updateChildActionButtonDefinition(t,i,ul.actions.associate);break;case e.viewDefinitionNameForCreate!==t.viewDefinitionNameForCreate:this.updateChildActionButtonDefinition(t,i,ul.actions.createAndAssociate);break;case e.filterByAssociation!==t.filterByAssociation:case e.recordId!==t.recordId:const o=i.find(e=>e.type===ul.componentTypes.associationFilter);this.updateAssociationFilterComponent(t,o);break;case!(0,u.isEqual)(e.displayedFields,t.displayedFields):this.updateComponentRecordFields(t.displayedFields,i);break;case e.associationDefinitionName!==t.associationDefinitionName:n.editingMode=ml.Views,this.associationDesignHelperService.cleanEditingModeDependentData(n),t.associationDefinitionName?a.push(this.rxAssociationDefinitionCacheService.getAssociationDefinition(t.associationDefinitionName).pipe((0,r.map)(e=>{n.associatedRecordNodeSide=e.nodeAId===t.recordDefinitionName?C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,this.setIsManyToManyAssociation(e),this.sandbox.updateComponentProperties(n),this.isManyToManyAssociation&&this.associationDesignHelperService.resetRolesData(n)}))):this.isManyToManyAssociation=!1,a.push(this.updateAssociationNodeSideOptions(t.associationDefinitionName));break;case e.associatedRecordNodeSide!==t.associatedRecordNodeSide:n.editingMode=ml.Views,this.associationDesignHelperService.cleanEditingModeDependentData(n);break;case e.useDefaultRoles!==t.useDefaultRoles:!0===t.useDefaultRoles&&(n.nodeARole=null,n.nodeBRole=null);break;case e.nodeARole!==t.nodeARole||e.nodeBRole!==t.nodeBRole:(0,u.isUndefined)(t.useDefaultRoles)?(0,u.defaults)(n,{nodeARole:null,nodeBRole:null,useDefaultRoles:!1}):n.useDefaultRoles=!1}return(a.length>0?(0,o.combineLatest)(a):(0,o.of)(null)).pipe((0,r.map)(e=>({parameters:e,componentProperties:n})),(0,r.withLatestFrom)(this.recordDefinitionNameFromHostRecordEditor$,this.recordEditorGuid$))}),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{parameters:e,componentProperties:t},i,n])=>{const o=this.associationDesignHelperService.getInitialProperties();this.recordEditorGuid=n,this.updateInspector$.next(this.getInspectorConfig(Object.assign(Object.assign({},o),t),i,n))}),this.sandbox.getComponentPropertyValue("fieldId").pipe((0,r.map)(e=>(0,u.isNil)(e)?null:e),(0,r.distinctUntilChanged)(),(0,r.pairwise)()).pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.filter)(([e,t])=>Boolean(t.editingMode===ml.Dropdown)),(0,r.switchMap)(([[e,t],i])=>this.associationDesignHelperService.getRecordDefinition(i.recordDefinitionName).pipe((0,r.map)(n=>{var o,r;const a=null===(o=n.fieldDefinitions.find(t=>t.id===Number(e)))||void 0===o?void 0:o.name,s=null===(r=n.fieldDefinitions.find(e=>e.id===Number(t)))||void 0===r?void 0:r.name;return i.label&&a!==i.label?i.label:s}))),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateComponentProperties({label:e})}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.associationChildComponentsData$.pipe((0,r.distinctUntilChanged)(u.isEqual))]).pipe((0,r.switchMap)(([e,t])=>(e.associationDefinitionName?this.rxAssociationDefinitionCacheService.getAssociationDefinition(e.associationDefinitionName):(0,o.of)({})).pipe((0,r.map)(i=>this.associationDesignHelperService.validate(this.sandbox,e,i,t)))),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.label$,this.sandbox.getComponentPropertyValue("associationDefinitionName").pipe((0,r.map)(e=>e?this.rxDefinitionNameService.getDisplayName(e):null))]).pipe((0,r.map)(([e,t])=>{let i=this.sandbox.descriptor.name;return t&&e?i+=` (${t}: ${e})`:(t||e)&&(i+=` (${t||e})`),i}),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[{label:"Disabled",expression:this.getExpressionForProperty("disabled")},{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}static getInitialProperties(e){return Object.assign(Object.assign({},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}getPropertiesByName(e){return(0,u.omit)(Object.assign(Object.assign({},e),{recordInstance:this.recordEditorGuid?`\${view.components.${this.recordEditorGuid}.recordInstance}`:e.recordInstance,recordDefinition:this.recordEditorGuid?`\${view.components.${this.recordEditorGuid}.recordDefinition}`:e.recordDefinition}),["displayedFields","filterByAssociation","recordId","viewDefinitionNameForSelect","viewDefinitionNameForCreate"])}updateAssociationFilterComponent(e,t){if(t&&this.sandbox.removeComponents([t.guid]),e.filterByAssociation){const t={guid:this.rxGuidService.generate(),type:ul.componentTypes.associationFilter,propertiesByName:{associationDefinitionName:e.filterByAssociation,recordInstanceId:e.recordId}};this.sandbox.addComponent([t])}}updateChildActionButtonDefinition(e,t,i){const n=t.find(e=>e.type===d.RxViewComponentType.ActionButton&&e.data.action===i),o=i===ul.actions.createAndAssociate?e.viewDefinitionNameForCreate:e.viewDefinitionNameForSelect;if(n&&this.sandbox.removeComponents([n.guid]),o){const t=this.associationDesignHelperService.getActionButtonDefinition(e,i,this.sandbox.guid);this.sandbox.addComponent([t])}}updateComponentRecordFields(e,t){const i=t.filter(e=>e.type===ul.componentTypes.associatedRecordField).map(e=>e.guid),n=e.map(e=>({type:ul.componentTypes.associatedRecordField,guid:this.rxGuidService.generate(),propertiesByName:{fieldId:e.data.fieldId,label:e.data.label||"",index:e.data.index}}));i.length>0&&this.sandbox.removeComponents(i),this.sandbox.addComponent(n)}getChildComponentsData(){return this.childComponents$.pipe((0,r.map)(e=>{var t,i;const n={},o=e.filter(e=>e.type===ul.componentTypes.associationFilter);n.displayedFields=e.filter(e=>e.type===ul.componentTypes.associatedRecordField),o.length>0&&(n.recordId=null===(t=o[0].data)||void 0===t?void 0:t.recordInstanceId,n.filterByAssociation=null===(i=o[0].data)||void 0===i?void 0:i.associationDefinitionName);const r=this.getViewDefinitionNameForAssociation(e,ul.actions.createAndAssociate);r&&(n.viewDefinitionNameForCreate=r);const a=this.getViewDefinitionNameForAssociation(e,ul.actions.associate);return a&&(n.viewDefinitionNameForSelect=a),n}))}generateInitialUpdateParameters(e){const t=[];return e.recordDefinitionName&&(t.push(this.updateRecordDefinitionFields(e.recordDefinitionName)),e.fieldId&&t.push(this.updatePreviousDropdownFieldDefinition(e.recordDefinitionName,e.fieldId)),t.push(this.updateAssociationDefinitionsOptions(e.recordDefinitionName))),e.associationDefinitionName&&(t.push(this.updateAssociationDefinitionsFilterOptions(e.recordDefinitionName)),t.push(this.rxAssociationDefinitionCacheService.getAssociationDefinition(e.associationDefinitionName).pipe((0,r.map)(e=>this.setIsManyToManyAssociation(e))))),e.associatedRecordNodeSide&&t.push(this.updateAssociationNodeSideOptions(e.associationDefinitionName)),t}updatePreviousDropdownFieldDefinition(e,t){return this.updateRecordDefinitionFields(e).pipe((0,r.map)(e=>this.previousDropdownFieldDefinition=e.find(e=>e.id===Number(t))))}setIsManyToManyAssociation(e){e&&(this.isManyToManyAssociation=e.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)}getViewDefinitionNameForAssociation(e,t){const i=e.find(e=>{var i;return(null===(i=e.data)||void 0===i?void 0:i.action)===t});return i&&i.children?this.getViewDefinitionNameFromActionButton(i):null}getViewDefinitionNameFromActionButton(e){const t=e.children.find(e=>e.type===d.RxViewComponentType.Action);return(0,u.get)(t,"data.viewDefinitionName",null)}updateRecordDefinitionFields(e){return(e?this.associationDesignHelperService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions)):(0,o.of)([])).pipe((0,r.tap)(e=>this.recordDefinitionFields=e))}updateAssociationNodeSideOptions(e){return(e?this.rxAssociationDefinitionCacheService.getAssociationDefinition(e).pipe((0,r.map)(e=>this.associationDesignHelperService.getNodeSideOptions(e))):(0,o.of)([])).pipe((0,r.tap)(e=>this.associatedRecordNodeSide=e))}updateAssociationDefinitionsOptions(e){return this.recordDefinitionNameFromHostRecordEditor$.pipe((0,r.switchMap)(t=>e&&t?this.associationDesignHelperService.getAvailableAssociations(e,t):(0,o.of)([])),(0,r.tap)(e=>this.associationDefinitions=e))}updateAssociationDefinitionsFilterOptions(e){return this.otherAssociationRecordEditorComponentGuids$.pipe((0,r.mergeMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e))).pipe((0,r.take)(1)):(0,o.of)([])),(0,r.switchMap)(t=>t.length&&e?(0,o.merge)(...t.map(t=>this.associationDesignHelperService.getAvailableAssociations(e,t))):(0,o.of)([])),(0,r.map)(e=>this.associationDefinitionFilters=e))}getInspectorConfig(e,t,i){const n={inspectorSectionConfigs:[{label:"General",controls:[]}]};if(t){const t=n.inspectorSectionConfigs[0].controls;t.push({name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition to associate",definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!0}}),e.recordDefinitionName&&t.push({name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{label:"Association to use",options:this.associationDefinitions.map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})),emptyOption:!0,required:!0}}),e.recordDefinitionName&&this.associatedRecordNodeSide.length>0&&t.push({name:"associatedRecordNodeSide",component:l.SelectFormControlComponent,options:{label:"Associated record node Side",options:this.associatedRecordNodeSide,required:!0}}),e.recordDefinitionName&&this.associationDesignHelperService.isCardinalityOne(e,this.associationDefinitions)&&t.push({name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Association editing mode",options:(0,u.map)(ml,(e,t)=>({id:e,name:t})),required:!0}}),e.editingMode&&e.editingMode!==ml.Views||(t.push(...this.associationDesignHelperService.getViewModeInspectorControls()),this.isManyToManyAssociation&&e.associationDefinitionName&&(t.push(this.associationDesignHelperService.getUseDefaultRolesControl()),e.useDefaultRoles||t.push(...this.associationDesignHelperService.getNodeABRoleControls())),e.recordDefinitionName&&t.push(this.associationDesignHelperService.getDisplayedFieldsControl(this.recordDefinitionFields))),e.editingMode===ml.Dropdown&&(t.push(...this.associationDesignHelperService.getDropdownModeInspectorControls(this.recordDefinitionFields,this.associationDefinitionFilters)),e.filterByAssociation&&t.push(this.associationDesignHelperService.getRecordIdControl())),t.push(...this.associationDesignHelperService.getInitialInspectorControls(this.expressionConfigurator))}else n.inspectorSectionConfigs[0].controls=[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",componentGuid:i,propertyName:"recordDefinitionName"}}];return n}}class Il{}Il.\u0275fac=function(e){return new(e||Il)},Il.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Il,selectors:[["rx-association-design-item-container"]],inputs:{outlet:"outlet",isReadOnly:"isReadOnly",layout:"layout"},decls:1,vars:1,consts:[["class","mr-1",3,"interactive","layout","isReadOnly",4,"ngFor","ngForOf"],[1,"mr-1",3,"interactive","layout","isReadOnly"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,He,1,3,"rx-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.outlet.columns[0].children)},directives:[f.NgForOf,c.CanvasItemComponent],styles:["[_nghost-%COMP%]{display:flex}"]});class Rl{constructor(){this.hidePlaceholder=!1,this.destroyed$=new o.ReplaySubject(1),this.containerComponent=Il}ngOnInit(){this.model.displayedFields$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hidePlaceholder=e.length>0})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Rl.\u0275fac=function(e){return new(e||Rl)},Rl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Rl,selectors:[["rx-association-field-design"]],inputs:{model:"model"},decls:4,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-block","form-control-label"],[1,"d-flex","flex-wrap"],[1,"flex-grow-1",3,"containerComponent"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","py-0","align-right",3,"hidden"],["type","objects","label","Add fields in the Properties panel.",3,"hidden"],[1,"form-group","mt-2",3,"hidden"],[1,"list-group"],[1,"list-group-item"],[1,"rx-record-preview-card","w-100"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","float-right","d-icon-cross","p-0"],[1,"list-unstyled","mb-0"],["class","rx-record-preview-card__field",4,"ngFor","ngForOf"],[1,"rx-record-preview-card__field"],["class","rx-record-preview-card__label",4,"ngIf"],[4,"ngIf"],[1,"rx-record-preview-card__value"],[1,"rx-record-preview-card__label"],["ngModel","",3,"label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,Ye,19,16,"div",1),n["\u0275\u0275template"](3,Ze,5,7,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngSwitch",n["\u0275\u0275pipeBind1"](1,3,t.model.editingMode$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngSwitchCase","views"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","dropdown"))},directives:[f.NgSwitch,f.NgSwitchCase,c.CanvasOutletComponent,m.AdaptButtonComponent,m.AdaptEmptyStateComponent,f.NgForOf,f.NgIf,m.AdaptRxSelectComponent,x.NgControlStatus,x.NgModel],pipes:[f.AsyncPipe,p.TranslatePipe],encapsulation:2});class wl{adaptDefinition(e){var t,i,n,o,r;if(!e.layout){const t=e.componentDefinitions.filter(e=>e.type===d.RxViewComponentType.ActionButton).map(e=>e.guid);e.layout=JSON.stringify({outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:t}]}]})}const a={editingMode:null!==(t=e.propertiesByName.editingMode)&&void 0!==t?t:ml.Views,nodeARole:null!==(i=e.propertiesByName.nodeARole)&&void 0!==i?i:null,nodeBRole:null!==(n=e.propertiesByName.nodeBRole)&&void 0!==n?n:null,styles:null!==(o=e.propertiesByName.styles)&&void 0!==o?o:null,useDefaultRoles:null!==(r=e.propertiesByName.useDefaultRoles)&&void 0!==r&&r};Object.assign(e.propertiesByName,a)}}wl.\u0275fac=function(e){return new(e||wl)},wl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:wl,factory:wl.\u0275fac});class El{constructor(e,t){t.registerDesignAdapter(d.RxViewComponentType.Association,e)}}El.\u0275fac=function(e){return new(e||El)(n["\u0275\u0275inject"](wl),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},El.\u0275mod=n["\u0275\u0275defineNgModule"]({type:El,declarations:[Rl,Il],imports:[f.CommonModule,m.AdaptButtonModule,p.TranslateModule,Cl,m.AdaptRxSelectModule,x.FormsModule,m.AdaptEmptyStateModule,c.ViewDesignerCanvasModule]}),El.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Sl,wl],imports:[[f.CommonModule,m.AdaptButtonModule,p.TranslateModule,Cl,m.AdaptRxSelectModule,x.FormsModule,m.AdaptEmptyStateModule,c.ViewDesignerCanvasModule]]});const Fl=["api","disabled","recordDefinition","recordInstance","hidden","inReadState","value"].map(e=>{const t={name:e,enableExpressionEvaluation:!0};return["hidden","disabled"].includes(e)&&(t.type=d.ViewComponentPropertyType.Boolean),t});Fl.push({name:"label",localizable:!0},{name:"fieldId"},d.RX_AVAILABLE_ON_DEVICES_PROP_DESC);const Ml="Record editor inputs";class Tl extends c.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.injector=e,this.componentGuid=t,this.componentModel=i,this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.configureForProperty({propertyPath:"recordId",dataDictionary$:i.recordEditorGuid$.pipe((0,r.concatMap)(e=>this.getCommonDataDictionary(this.getRecordEditorBranch(e),e)))})}getRecordEditorBranch(e){const t=this.componentModel.otherAssociationRecordEditorComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.componentModel.sandbox.getComponentPropertyValue("associationDefinitionName",e).pipe((0,r.map)(t=>({label:this.rxDefinitionNameService.getDisplayName(t),children:[{label:"First associated record",children:[{label:"ID",expression:`\${view.components.${e}.firstAssociatedRecord.id}`}]}]}))))).pipe((0,r.map)(e=>({label:"Associations",children:e}))):(0,o.of)(null)));return this.getComponentCommonDataDictionary(e).pipe((0,r.switchMap)(e=>t.pipe((0,r.map)(t=>t?Object.assign(Object.assign({},e),{children:[t,...e.children]}):e))))}}class Ol{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Association,isContainerComponent:!0,designComponentModel:Dl,bundleId:s.RX_APPLICATION.platformBundleId,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Rl),expressionConfigurator:Tl,componentFactory:this.componentFactoryResolver.resolveComponentFactory(hl),canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),options:{canBeEmbeddedInRecordEditor:!0},name:"Association",group:Ml,icon:"arrow_schema",properties:Fl.concat({name:"recordInstance",enableExpressionEvaluation:!0}),outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}]},{type:ul.componentTypes.associationFilter,configPropertyName:"associationFilter",properties:[{name:"associationDefinitionName"},{name:"recordInstanceId",enableExpressionEvaluation:!0}],isDataComponent:!0},{type:ul.componentTypes.associatedRecordField,configPropertyName:"associatedRecordField",isDataComponent:!0,properties:[{name:"label",localizable:!0}]})}}Ol.\u0275fac=function(e){return new(e||Ol)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Ol.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ol,imports:[vl,El]}),Ol.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[vl,El]]});class Nl extends c.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService)}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({fieldId:null,label:null,value:null},d.RX_DISABLED_PROP_DEFAULT_VALUE),d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.pipeline()}pipeline(){this.parentGuid$=this.sandbox.getParentComponentGuid(d.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.recordEditorMode$=this.parentGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("mode",e))),this.recordDefinitionName$=this.parentGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)),(0,r.distinctUntilChanged)()),this.selectedFieldDefinition$=this.sandbox.getComponentPropertyValue("fieldId").pipe((0,r.switchMap)(e=>this.recordDefinition$.pipe((0,r.map)(t=>t&&e&&t.fieldDefinitions.find(t=>t.id===Number(e))||null))),(0,r.shareReplay)(1)),this.isRequired$=this.selectedFieldDefinition$.pipe((0,r.map)(e=>e&&e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required)),this.isSystemField$=this.selectedFieldDefinition$.pipe((0,r.startWith)(!1),(0,r.map)(e=>this.rxFieldDefinitionService.isSystemField(e))),this.selectedFieldDefinition$.pipe((0,r.pairwise)(),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.filter)(([[e,t],i])=>t&&(e&&e.name===i.label||!i.label)),(0,r.map)(([[e,t]])=>t.name)).subscribe(e=>{this.sandbox.updateComponentProperties({label:e})}),this.availableFieldDefinitions$=(0,o.combineLatest)([this.recordDefinition$,this.recordEditorMode$]).pipe((0,r.map)(([e,t])=>e&&e.fieldDefinitions?e.fieldDefinitions.filter(e=>(0,u.includes)(this.fieldResourceTypes,e.resourceType)).filter(e=>{const i=this.rxFieldDefinitionService.isSystemField(e);return!i||i&&t===qs.Edit}):[]),(0,r.shareReplay)(1)),this.label$=this.sandbox.componentProperties$.pipe((0,r.map)(e=>e&&e.fieldId?e.label:"<No field selected>")),this.sandbox.componentProperties$.pipe((0,r.mergeMap)(e=>this.validate(e)),(0,r.distinctUntilChanged)(u.isEqual)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),this.availableFieldDefinitions$.pipe((0,r.switchMap)(()=>this.getInspectorConfig())).subscribe(e=>{this.sandbox.updateInspectorConfig(e)}),this.sandbox.componentProperties$.pipe((0,r.switchMap)(()=>this.getBreadcrumb()),(0,r.distinctUntilChanged)()).subscribe(e=>{this.sandbox.setBreadcrumbs(e)}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("label"),this.selectedFieldDefinition$]).pipe((0,r.map)(([e,t])=>e||(t?`[${t.name}]`:`[${this.sandbox.descriptor.name}]`)),(0,r.distinctUntilChanged)()).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,this.getSettableProperties())})}getPropertiesByName(e){const t=Object.assign({},e);return t.styles||delete t.styles,t}validate(e){const t=[];return(0,u.isEmpty)(e.fieldId)&&t.push(this.sandbox.createError("Field name cannot be blank.","fieldId")),t.push(...(0,c.validateStandardProps)(e)),(0,o.of)(t)}getBreadcrumb(){return(0,o.of)(null).pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.map)(([e,t])=>t.label))}getInspectorConfig(){return(0,o.of)(null).pipe((0,r.withLatestFrom)(this.availableFieldDefinitions$,this.recordDefinitionName$,this.parentGuid$,this.isSystemField$),(0,r.map)(([e,t,i,n,o])=>this.getBaseInspectorConfig(t,i,n,o)))}getSettableProperties(){return[...(0,u.find)(this.sandbox.descriptor.properties,{name:"disabled"})?[{label:"Disabled",expression:`\${view.components.${this.sandbox.guid}.disabled}`}]:[],...(0,u.find)(this.sandbox.descriptor.properties,{name:"disabled"})?[{label:"Hidden",expression:`\${view.components.${this.sandbox.guid}.hidden}`}]:[]]}getBaseInspectorFields(e,t){return[].concat([{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",required:!0,options:e.map(e=>({name:e.name,id:String(e.id)}))}},{name:"label",component:l.TextFormControlComponent,options:{label:"Display label"}}],t?[]:[{name:"value",component:l.ExpressionInspectorControlComponent,options:{label:"Value"}},(0,c.getDisabledFieldInspectorConfig)()],(0,c.getStandardPropsInspectorConfigs)())}getBaseInspectorConfig(e,t,i,n){const o=this.rxDefinitionNameService.getDisplayName(t||"");let r;return r=t?e.length?this.getBaseInspectorFields(e,n):[{component:l.ValidationFormControlComponent,options:{text:`${o} does not have fields that can be bound to this field type.`,componentGuid:i,propertyName:"recordDefinitionName"}}]:[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",componentGuid:i,propertyName:"recordDefinitionName"}}],{inspectorSectionConfigs:[{label:"General",controls:r}]}}}class Al extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.attachment]}static getInitialProperties(e){const t=Nl.getInitialProperties(e);return delete t.value,t}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>(e.inspectorSectionConfigs[0].controls=e.inspectorSectionConfigs[0].controls.filter(e=>"value"!==e.name),e)))}}class Pl{}Pl.\u0275fac=function(e){return new(e||Pl)},Pl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pl,selectors:[["rx-attachment-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","label"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-uploader",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,4,t.model.isRequired$))("ngModel",n["\u0275\u0275pureFunction0"](8,et))("disabled",!0)("label",n["\u0275\u0275pipeBind1"](2,6,t.model.label$))},directives:[m.AdaptRxUploaderComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],pipes:[f.AsyncPipe],styles:["adapt-rx-uploader[_ngcontent-%COMP%]     .adapt-rx-uploader__restrict{display:none}"]});class jl{}jl.\u0275fac=function(e){return new(e||jl)},jl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:jl,declarations:[Pl],imports:[f.CommonModule,x.FormsModule,m.AdaptRxUploaderModule]}),jl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptRxUploaderModule]]});class _l extends h.BaseViewComponent{constructor(e){super(),this.injector=e,this.isRequired=!1,this.isDisabled=!1,this.translateService=this.injector.get(p.TranslateService),this.api={setProperty:this.setProperty.bind(this)},this.inReadState=!1,this.isLoading=!0,this.validationErrorMessage=null}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.configReady$=this.config.pipe((0,r.filter)(e=>Boolean(e.api&&e.recordDefinition)),(0,r.takeUntil)(this.destroyed$)),this.recordInstance$=this.configReady$.pipe((0,r.pluck)("recordInstance"),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)),this.recordInstance$.subscribe(this.subscribeOnConfigValueChange.bind(this)),this.configReady$.pipe((0,r.take)(1)).subscribe(e=>{this.isLoading=!1,this.onConfigInitialized(e),this.onConfigUpdated(e)}),this.configReady$.pipe((0,r.skip)(1),(0,r.filter)(e=>Boolean(e.recordInstance)),(0,r.takeUntil)(this.destroyed$)).subscribe(this.onConfigUpdated.bind(this))}setFieldValue(e,t={}){(0,u.isEqual)(e,this.formControl.value)||(!1!==t.markAsDirty&&this.formControl.markAsDirty(),!1!==t.markAsTouched&&this.formControl.markAsTouched(),this.formControl.setValue(e))}getFieldValue(){var e;return null===(e=this.formControl)||void 0===e?void 0:e.value}getDisplayValue(){return this.getFieldValue()}onConfigInitialized(e){this.fieldId=Number(e.fieldId),this.fieldDefinition=(0,u.find)(e.recordDefinition.fieldDefinitions,{id:this.fieldId}),this.isRequired=this.fieldDefinition.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required,this.recordEditorApi=e.api,this.formControl=this.recordEditorApi.getFieldControl(this.fieldId,this.guid,this.getFieldValidators(),e.associatedRecordPath),this.associatedRecordPath=e.associatedRecordPath,this.permissionType=this.recordEditorApi.getPermissionType(this.fieldId,this.associatedRecordPath),this.subscribeOnConfigValueChange(),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.checkValidation(),this.updateValidationMessage()}),this.isAlwaysDisabled=this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view||this.injector.get(a.RxFieldDefinitionService).isSystemField(this.fieldDefinition),this.isAlwaysHidden=!this.permissionType;const t=e.api.getRecordEditorMode();if(Number(e.fieldId)===a.RX_RECORD_DEFINITION.coreFieldIds.createdBy){const e=this.injector.get(s.RxSystemConfigurationService).getConfigurationSync("Submitter-Mode");this.isAlwaysDisabled=this.isAlwaysDisabled||t===qs.Edit&&e===s.RX_ADMINISTRATION.submitterModes.locked}}onConfigUpdated(e){const t=this.isAlwaysDisabled||Boolean(e.disabled);this.isDisabled!==t&&(this.isDisabled=t,this.isDisabled||this.formControl.updateValueAndValidity(),this.checkValidation()),this.isHidden=this.isAlwaysHidden||Boolean(e.hidden),this.label=(0,u.isUndefined)(e.label)?this.fieldDefinition.name:e.label,this.inReadState=Boolean(e.inReadState)}getFieldValidators(){return[]}getRequiredFieldValidationError(){return this.translateService.instant("com.bmc.arsys.rx.client.view-components.validation.required.message")}getFieldInstanceProp(e,t=this.fieldId,i=this.associatedRecordPath){return this.recordEditorApi.getFieldInstanceProp(t,e,i)}setFieldInstanceProp(e,t,i=this.fieldId,n=this.associatedRecordPath){this.recordEditorApi.setFieldInstanceProp(i,e,t,n)}setProperty(e,t){if(!(0,u.includes)(["hidden","disabled"],e))return(0,o.throwError)(`Field property ${e} is not settable.`);this.notifyPropertyChanged(e,t)}subscribeOnConfigValueChange(){const e=this.configReady$.pipe((0,r.pluck)("value"),(0,r.filter)(e=>!(0,u.isUndefined)(e)),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.recordInstance$),(0,r.takeUntil)(this.destroyed$));e.pipe((0,r.take)(1)).subscribe(e=>{(0,u.isNull)(e)||this.setFieldValue(e,{markAsTouched:!1,markAsDirty:!1})}),e.pipe((0,r.skip)(1)).subscribe(e=>this.setFieldValue(e))}checkValidation(){this.isDisabled&&this.formControl.invalid&&(this.formControl.setErrors(null),this.updateValidationMessage())}updateValidationMessage(){this.formControl.errors?(this.formControl.errors.required&&(this.formControl.errors.required=this.getRequiredFieldValidationError()),this.validationErrorMessage=(0,u.values)(this.formControl.errors).join(", ")):this.validationErrorMessage=null}}_l.\u0275fac=function(e){return new(e||_l)(n["\u0275\u0275directiveInject"](n.Injector))},_l.\u0275dir=n["\u0275\u0275defineDirective"]({type:_l,hostVars:4,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-field-required",t.isRequired)("rx-field-disabled",t.isDisabled)},inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]]});const Vl={defaultOptions:{filesCount:1,mode:m.UploaderMode.Manual,selectionMode:m.UploaderSelectionMode.File,chunkSize:"100KB",maxFileSize:"2GB"}};class kl extends _l{constructor(e){super(e),this.filesCount=Vl.defaultOptions.filesCount,this.mode=Vl.defaultOptions.mode,this.selectionMode=Vl.defaultOptions.selectionMode,this.chunkSize=Vl.defaultOptions.chunkSize,this.maxFileSize=Vl.defaultOptions.maxFileSize,this.showFiles=[],this.texts={},this.readStateConfig={fileName:null,downloadURL:null}}onConfigInitialized(e){super.onConfigInitialized(e),this.attachmentFormControl=new x.FormControl(this.showFiles),this.maxFileSize=this.fieldDefinition.maxSize?(0,u.toString)(this.fieldDefinition.maxSize):Vl.defaultOptions.maxFileSize,this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.filter)(e=>!(e instanceof File)),(0,r.distinctUntilChanged)((e,t)=>e===t&&(0,u.has)(this.attachmentFormControl.value,"[0].downloadURL")),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.attachmentFormControl.reset(),this.addAttachedFileToAttachmentList(this.getFieldValue())}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.attachmentFormControl.markAsTouched():this.attachmentFormControl.markAsUntouched()})}addAttachedFileToAttachmentList(e){if(e){const t=this.recordEditorApi.getAttachmentDownloadUrl(this.fieldId);let i;i={data:{name:e},isUploading:!0},t&&(i.downloadURL=t),this.showFiles=[i]}else this.showFiles=[];this.attachmentFormControl.setValue(this.showFiles)}onConfigUpdated(e){super.onConfigUpdated(e),this.inReadState&&(this.readStateConfig={fileName:this.getDisplayValue(),downloadURL:this.recordEditorApi.getAttachmentDownloadUrl(this.fieldId)})}removeAttachment(e){e&&(this.attachment=null),this.addAttachedFileToAttachmentList(),this.setFieldValue(this.attachment)}addAttachment(e){const t=(0,u.first)(e);t&&(this.attachment=t.data,this.setFieldValue(this.attachment))}onBlur(){this.formControl.markAsTouched()}}function Bl(){return new a.UploaderService}kl.\u0275fac=function(e){return new(e||kl)(n["\u0275\u0275directiveInject"](n.Injector))},kl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kl,selectors:[["rx-attachment-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["emptyReadonlyField",""],[4,"ngIf","ngIfElse"],["aria-hidden","true"],["class","d-block",3,"config",4,"ngIf"],[1,"d-block",3,"config"],[3,"ngClass","reusable","label","readonly","required","allowDeletion","uploadMode","selectionMode","filesCount","maxFileSize","chunkSize","texts","formControl","removedFileFromQueue","deletedFile","afterFilesAdded","onBlur"],[3,"label","value"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ot,2,2,"ng-container",0),n["\u0275\u0275template"](1,at,1,15,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,st,1,2,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,m.AdaptDownloaderComponent,m.AdaptRxUploaderComponent,f.NgClass,x.RequiredValidator,x.NgControlStatus,x.FormControlDirective,S.ReadOnlyFieldComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}  .d-icon-exclamation_triangle{display:none}  .adapt-rx-uploader__restrict{display:none}  .upload-status{display:none}  .adapt-uploader-item{border-top:0;height:37px!important;border-bottom:0}  .adapt-rx-uploader-file-attach-btn__wrp{max-width:100%}  .adapt-rx-uploader-attach-btn{overflow:hidden;text-overflow:ellipsis;max-width:100%}  .adapt-uploader-file{margin-left:0;padding-bottom:10px;padding-left:0!important;flex:auto;height:100%;border-bottom:1px solid #f0f1f1}  .adapt-uploader-status{margin-right:20px;width:15px;border-bottom:1px solid #f0f1f1}  .attachment-disabled .adapt-uploader-list-files-zone__header{margin:0;display:none}  .attachment-disabled .empty-state{display:none}  .attachment-disabled .empty-state__container{margin:0;padding:0}  .attachment-disabled .empty-state__label{margin-top:0;text-align:left}']});class $l{}$l.\u0275fac=function(e){return new(e||$l)},$l.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$l,declarations:[kl],imports:[m.AdaptRxUploaderModule,f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule,m.AdaptDownloadModule]}),$l.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxUploaderModule.forRoot({uploader:{provide:"UploaderService",useFactory:Bl,deps:[]}}),f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule,m.AdaptDownloadModule]]});class Ll{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Attachment,componentFactory:this.componentFactoryResolver.resolveComponentFactory(kl),properties:Fl,name:"Attachment",group:Ml,icon:"paperclip",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Pl),designComponentModel:Al,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}var Gl,zl;Ll.\u0275fac=function(e){return new(e||Ll)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Ll.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ll,imports:[$l,jl]}),Ll.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[$l,jl]]}),function(e){e.Checkbox="checkbox",e.Switch="switch"}(Gl||(Gl={})),function(e){e[e.True=1]="True",e[e.False=0]="False"}(zl||(zl={}));class Ul extends Nl{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.boolean]}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Nl.getInitialProperties()),{editingMode:Gl.Switch}),e)}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>this.editInspectorConfig(e)))}editInspectorConfig(e){const t=(0,u.findIndex)(e.inspectorSectionConfigs[0].controls,e=>"value"===e.name),i={name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Editing mode",tooltip:new s.Tooltip("An optional Boolean field will always be displayed as a Switch."),required:!1,options:(0,u.map)(Gl,(e,t)=>({id:e,name:t}))}};return-1!==t&&e.inspectorSectionConfigs[0].controls.splice(t,0,i),e}}class ql{constructor(){this.shouldDisplayAsCheckbox=!1,this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){const e=this.model.componentProperties$.pipe((0,r.map)(e=>e.editingMode||Gl.Switch));(0,o.combineLatest)([e,this.model.isRequired$]).pipe((0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.shouldDisplayAsCheckbox=t&&e===Gl.Checkbox})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ql.\u0275fac=function(e){return new(e||ql)},ql.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ql,selectors:[["rx-boolean-field-design"]],inputs:{model:"model"},decls:2,vars:2,consts:[[4,"ngIf"],["class","form-control-required",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],[1,"form-control-required"],[3,"ngModel","label","required","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,dt,8,8,"ng-container",0),n["\u0275\u0275template"](1,ct,4,8,"ng-container",0)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.shouldDisplayAsCheckbox),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.shouldDisplayAsCheckbox))},directives:[f.NgIf,m.AdaptRxSwitchComponent,x.NgControlStatus,x.NgModel,m.AdaptRxCheckboxComponent,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class Xl{}Xl.\u0275fac=function(e){return new(e||Xl)},Xl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xl,declarations:[ql],imports:[f.CommonModule,x.FormsModule,m.AdaptRxSwitchModule,m.AdaptRxCheckboxModule],exports:[ql]}),Xl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptRxSwitchModule,m.AdaptRxCheckboxModule]]});class Wl extends _l{constructor(e,t){super(e),this.rxBooleanPipe=t}get booleanValue(){const e=this.getFieldValue();return(0,u.isNull)(e)?null:Boolean(e)}set booleanValue(e){(0,u.isNull)(e)?this.setFieldValue(null):this.setFieldValue(Number(e))}getDisplayValue(){const e=super.getDisplayValue();return(0,u.isNil)(e)?"-":this.rxBooleanPipe.transform(e)}onConfigInitialized(e){super.onConfigInitialized(e),this.editingMode=e.editingMode}onConfigUpdated(e){super.onConfigUpdated(e),this.shouldDisplayAsCheckbox&&null===this.getFieldValue()&&this.setFieldValue(zl.False,{markAsDirty:!1,markAsTouched:!1})}ngAfterViewInit(){this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{var t,i;return e?null===(t=this.ngModel)||void 0===t?void 0:t.control.markAsTouched():null===(i=this.ngModel)||void 0===i?void 0:i.control.markAsUntouched()})}get shouldDisplayAsCheckbox(){return this.editingMode===Gl.Checkbox&&this.isRequired}onBlur(){this.formControl.markAsTouched()}}Wl.\u0275fac=function(e){return new(e||Wl)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](s.RxBooleanPipe))},Wl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wl,selectors:[["rx-boolean-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](pt,5,x.NgModel),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ngModel=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"hidden","label","isDisabled","required","shouldDisplayAsCheckbox","ngModel","ngModelChange","rxBlur"],["booleanComponent",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,mt,2,2,"ng-container",0),n["\u0275\u0275template"](1,ft,2,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,l.RxBooleanComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],encapsulation:2});class Hl{}Hl.\u0275fac=function(e){return new(e||Hl)},Hl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hl,declarations:[Wl],imports:[f.CommonModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,p.TranslateModule,x.ReactiveFormsModule,x.FormsModule,l.RxBooleanModule]}),Hl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,p.TranslateModule,x.ReactiveFormsModule,x.FormsModule,l.RxBooleanModule]]});class Ql{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Boolean,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Wl),properties:Fl,name:"Boolean",group:Ml,icon:"switcher_check",designComponentModel:Ul,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ql),options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Ql.\u0275fac=function(e){return new(e||Ql)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Ql.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ql,imports:[Hl,Xl]}),Ql.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Hl,Xl]]});class Kl extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]}}class Jl{}Jl.\u0275fac=function(e){return new(e||Jl)},Jl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jl,selectors:[["rx-date-field-design"]],inputs:{model:"model"},decls:3,vars:8,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,4,t.model.isRequired$))("ngModel",t.dateValue)("disabled",!0)("label",n["\u0275\u0275pipeBind1"](2,6,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],pipes:[f.AsyncPipe],encapsulation:2});class Yl{}Yl.\u0275fac=function(e){return new(e||Yl)},Yl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yl,declarations:[Jl],imports:[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]}),Yl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]]});class Zl extends m.AdaptRxDatetimeAdapter{constructor(){super(...arguments),this.storeDateFormat="YYYY-MM-DD"}fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)([e.year||0,e.month||0,e.date||0]).format(this.storeDateFormat):null}}Zl.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Zl)))(t||Zl)}}(),Zl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zl,factory:Zl.\u0275fac});class ed extends _l{constructor(e,t){super(e),this.datePipe=t}getDisplayValue(){const e=super.getDisplayValue();if(e)return this.datePipe.transform(e,"mediumDate")}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:m.RxDatetimePickerMode.Date}}:null}]}}ed.\u0275fac=function(e){return new(e||ed)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](f.DatePipe))},ed.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ed,selectors:[["rx-date-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:Zl}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","required","formControl","readonly","disabledStyleForReadonlyState"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,gt,2,2,"ng-container",0),n["\u0275\u0275template"](1,vt,1,5,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,x.RequiredValidator,x.NgControlStatus,x.FormControlDirective],encapsulation:2});class td{}td.\u0275fac=function(e){return new(e||td)},td.\u0275mod=n["\u0275\u0275defineNgModule"]({type:td,declarations:[ed],imports:[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),td.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[f.DatePipe],imports:[[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class id{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Date,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ed),properties:Fl,name:"Date",group:Ml,icon:"calendar",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Jl),designComponentModel:Kl,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}id.\u0275fac=function(e){return new(e||id)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},id.\u0275mod=n["\u0275\u0275defineNgModule"]({type:id,imports:[td,Yl]}),id.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[td,Yl]]});class nd extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]}}class od{constructor(){this.pickerMode=m.RxDatetimePickerMode.DateTime}}od.\u0275fac=function(e){return new(e||od)},od.\u0275cmp=n["\u0275\u0275defineComponent"]({type:od,selectors:[["rx-date-time-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","mode","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateTimeValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,5,t.model.isRequired$))("ngModel",t.dateTimeValue)("disabled",!0)("mode",t.pickerMode)("label",n["\u0275\u0275pipeBind1"](2,7,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],pipes:[f.AsyncPipe],encapsulation:2});class rd{}rd.\u0275fac=function(e){return new(e||rd)},rd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:rd,declarations:[od],imports:[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]}),rd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]]});class ad extends m.AdaptRxDatetimeAdapter{fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)([e.year||0,e.month||0,e.date||0,e.hours||0,e.minutes||0,e.seconds||0]).toISOString():null}}ad.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](ad)))(t||ad)}}(),ad.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ad,factory:ad.\u0275fac});class sd extends _l{constructor(e,t){super(e),this.datePipe=t,this.pickerMode=m.RxDatetimePickerMode.DateTime}getDisplayValue(){const e=super.getDisplayValue();if(e)return this.datePipe.transform(e,"medium")}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:this.pickerMode,hasSeconds:!0}}:null}]}}sd.\u0275fac=function(e){return new(e||sd)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](f.DatePipe))},sd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sd,selectors:[["rx-date-time-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:ad}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["hasSeconds","true",3,"label","required","formControl","readonly","disabledStyleForReadonlyState","mode"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,bt,2,2,"ng-container",0),n["\u0275\u0275template"](1,xt,1,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,x.RequiredValidator,x.NgControlStatus,x.FormControlDirective],encapsulation:2});class ld{}ld.\u0275fac=function(e){return new(e||ld)},ld.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ld,declarations:[sd],imports:[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),ld.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[f.DatePipe],imports:[[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class dd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.DateTime,componentFactory:this.componentFactoryResolver.resolveComponentFactory(sd),properties:Fl,name:"Date/Time",group:Ml,icon:"calendar_clock_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(od),designComponentModel:nd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}dd.\u0275fac=function(e){return new(e||dd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},dd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:dd,imports:[ld,rd]}),dd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[ld,rd]]});class cd extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.decimal,a.RX_RECORD_DEFINITION.resourceTypes.real]}}class pd{}pd.\u0275fac=function(e){return new(e||pd)},pd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pd,selectors:[["rx-decimal-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class ud{}ud.\u0275fac=function(e){return new(e||ud)},ud.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ud,declarations:[pd],imports:[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]}),ud.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]]});class md extends _l{constructor(e){super(e),this.hasFocus=!1,this.decimalPipe=e.get(f.DecimalPipe)}onConfigInitialized(e){super.onConfigInitialized(e),this.counterFormControl=new x.FormControl(this.formControl.value,this.formControl.validator),this.counterFormControl.valueChanges.pipe((0,r.filter)(e=>!(0,u.isEqual)(this.formControl.value,e)),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.setFieldValue(e)}),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.hasFocus||this.counterFormControl.setValue(this.formControl.value)}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.counterFormControl.markAsTouched():this.counterFormControl.markAsUntouched()})}onBlur(){this.hasFocus=!1,this.formControl.markAsTouched()}onFocus(){this.hasFocus=!0}getDisplayValue(){const e=this.getFieldValue();return(0,u.isNil)(e)?e:this.decimalPipe.transform(String(e))}setFieldValue(e){if(!(0,u.isNull)(e)&&(0,u.isFinite)(e)){const t=new(w())(e);t.eq(this.formControl.value)||(this.formControl.markAsDirty(),this.formControl.setValue(t))}else super.setFieldValue(e)}}md.\u0275fac=function(e){return new(e||md)(n["\u0275\u0275directiveInject"](n.Injector))},md.\u0275cmp=n["\u0275\u0275defineComponent"]({type:md,selectors:[["rx-integer-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Ct,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.counterComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["adaptIntegerNumber","",1,"mb-0",3,"label","formControl","readonly","disabledStyleForReadonlyState","required","min","max","adaptMin","adaptMax","onBlur","onFocus"],["counterComponent",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Dt,2,2,"ng-container",0),n["\u0275\u0275template"](1,It,2,9,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxCounterComponent,m.AdaptIntegerNumberValidatorDirective,x.NgControlStatus,x.FormControlDirective,x.RequiredValidator,m.AdaptMinValidatorDirective,m.AdaptMaxValidatorDirective],encapsulation:2});class fd extends md{getDisplayValue(){const e=this.getFieldValue(),t=this.fieldDefinition.precision,i=-1===t?null:`1.${t}-${t}`;return(0,u.isNil)(e)?e:this.decimalPipe.transform(String(e),i)}}fd.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](fd)))(t||fd)}}(),fd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fd,selectors:[["rx-decimal-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[1,"mb-0",3,"label","formControl","required","min","max","adaptMin","adaptMax","readonly","disabledStyleForReadonlyState","requiredLabel","onBlur","onFocus"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,wt,2,2,"ng-container",0),n["\u0275\u0275template"](1,Et,2,12,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxCounterComponent,x.NgControlStatus,x.FormControlDirective,x.RequiredValidator,m.AdaptMinValidatorDirective,m.AdaptMaxValidatorDirective],pipes:[p.TranslatePipe],encapsulation:2});class hd{}hd.\u0275fac=function(e){return new(e||hd)},hd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:hd,declarations:[fd],imports:[E.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,f.CommonModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),hd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[E.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,f.CommonModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class gd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t;const i=this.componentFactoryResolver.resolveComponentFactory(fd);e.register({type:d.RxViewComponentType.Decimal,aliases:[d.RxViewComponentType.Floating],componentFactory:i,properties:Fl,name:"Decimal",group:Ml,icon:"field_decimal_number",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(pd),designComponentModel:cd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}gd.\u0275fac=function(e){return new(e||gd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},gd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gd,imports:[hd,ud]}),gd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hd,ud]]});class vd extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.integer]}}class yd{}yd.\u0275fac=function(e){return new(e||yd)},yd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yd,selectors:[["rx-integer-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class bd{}bd.\u0275fac=function(e){return new(e||bd)},bd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:bd,declarations:[yd],imports:[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]}),bd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]]});class xd{}xd.\u0275fac=function(e){return new(e||xd)},xd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xd,declarations:[md],imports:[E.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule]}),xd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[E.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule]]});class Cd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Integer,componentFactory:this.componentFactoryResolver.resolveComponentFactory(md),properties:Fl,name:"Integer",group:Ml,icon:"field_integer_number",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(yd),designComponentModel:vd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Cd.\u0275fac=function(e){return new(e||Cd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Cd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cd,imports:[xd,bd]}),Cd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[xd,bd]]});const Sd={id:null,name:"None"},Dd={radioButtons:"Radio Buttons",dropdown:"Dropdown"},Id={radioButtons:"radio-buttons",dropdown:"dropdown"};class Rd extends Nl{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.selection],this.editingMode$=this.sandbox.componentProperties$.pipe((0,r.map)(e=>e.editingMode))}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Nl.getInitialProperties()),{editingMode:Id.dropdown}),e)}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>this.editInspectorConfig(e)))}editInspectorConfig(e){const t=(0,u.findIndex)(e.inspectorSectionConfigs[0].controls,e=>"value"===e.name),i={name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Editing mode",required:!1,options:[{id:Id.dropdown,name:Dd.dropdown},{id:Id.radioButtons,name:Dd.radioButtons}]}};return-1!==t&&e.inspectorSectionConfigs[0].controls.splice(t,0,i),e}}class wd{ngOnInit(){this.model.editingMode$.subscribe(e=>{this.setMode(e)})}setMode(e){this.isRadioButtonMode=e===Id.radioButtons}}wd.\u0275fac=function(e){return new(e||wd)},wd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:wd,selectors:[["rx-selection-field-design"]],inputs:{model:"model"},decls:2,vars:2,consts:[["class","rx-pointer-events-none","ngModel","",3,"label","options","disabled","required",4,"ngIf"],[4,"ngIf"],["ngModel","",1,"rx-pointer-events-none",3,"label","options","disabled","required"],[1,"form-group"],[1,"form-control-label"],["class","form-control-required",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],["value","None","label","None",4,"ngIf"],["label","Option 1"],["label","Option 2"],[1,"form-control-required"],["value","None","label","None"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Ft,3,9,"adapt-rx-select",0),n["\u0275\u0275template"](1,Ot,12,11,"ng-container",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.isRadioButtonMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isRadioButtonMode))},directives:[f.NgIf,m.AdaptRxSelectComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator,m.AdaptRxRadiobuttonGroupComponent,m.AdaptRxRadiobuttonComponent],pipes:[f.AsyncPipe],styles:["adapt-select{width:100%}"]});class Ed{}var Fd,Md;Ed.\u0275fac=function(e){return new(e||Ed)},Ed.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ed,declarations:[wd],imports:[f.CommonModule,m.AdaptRxRadiobuttonModule,x.FormsModule,m.AdaptRxSelectModule]}),Ed.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxRadiobuttonModule,x.FormsModule,m.AdaptRxSelectModule]]}),function(e){e.RadioButton="radio-buttons",e.Dropdown="dropdown"}(Fd||(Fd={}));class Td extends _l{getSelectValue(){return(0,u.isNil)(this.formControl.value)?[]:(0,u.compact)([this.selectOptions.find(e=>e.id===Number(this.formControl.value))])}onConfigInitialized(e){super.onConfigInitialized(e),this.isRadioButtonMode=e.editingMode===Fd.RadioButton,this.generateControlOptions(this.fieldDefinition),this.selectFormControl=new x.FormControl(this.getSelectValue()),this.selectFormControl.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.setFieldValue((0,u.get)(e,"[0].id",null))}),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.selectFormControl.setValue(this.getSelectValue())}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.selectFormControl.markAsTouched():this.selectFormControl.markAsUntouched()})}generateControlOptions(e){this.selectOptions=(0,u.map)(e.optionLabelsById,(e,t)=>({name:e,id:Number(t)})),!this.isRequired&&this.isRadioButtonMode&&this.selectOptions.unshift(Sd)}getDisplayValue(){return this.fieldDefinition.optionLabelsById[this.formControl.value]}optionFormatter(e){return e.name}onPopupStatusChange(e){e||this.formControl.markAsTouched()}}Td.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Td)))(t||Td)}}(),Td.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Td,selectors:[["rx-selection-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"name","formControl","readonly","label",4,"ngIf"],[3,"options","required","label","formControl","readonly","optionFormatter","enableFilter","emptyOption","onPopupOpenChange",4,"ngIf"],[3,"name","formControl","readonly","label"],[3,"value","label","class",4,"ngFor","ngForOf"],[3,"value","label"],[3,"options","required","label","formControl","readonly","optionFormatter","enableFilter","emptyOption","onPopupOpenChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,At,2,2,"ng-container",0),n["\u0275\u0275template"](1,Vt,2,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxRadiobuttonGroupComponent,x.NgControlStatus,x.FormControlDirective,f.NgForOf,m.AdaptRxRadiobuttonComponent,m.AdaptRxSelectComponent,x.RequiredValidator],encapsulation:2});class Od{}Od.\u0275fac=function(e){return new(e||Od)},Od.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Od,declarations:[Td],imports:[m.AdaptRxFormControlModule,m.AdaptRxRadiobuttonModule,f.CommonModule,S.ReadOnlyFieldModule,x.FormsModule,x.ReactiveFormsModule,p.TranslateModule,m.AdaptRxLabelModule,m.AdaptRxSelectModule]}),Od.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxFormControlModule,m.AdaptRxRadiobuttonModule,f.CommonModule,S.ReadOnlyFieldModule,x.FormsModule,x.ReactiveFormsModule,p.TranslateModule,m.AdaptRxLabelModule,m.AdaptRxSelectModule]]});class Nd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Selection,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Td),properties:Fl,name:"Select",group:Ml,icon:"field_dropdown",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(wd),designComponentModel:Rd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Nd.\u0275fac=function(e){return new(e||Nd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Nd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Nd,imports:[Od,Ed]}),Nd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Od,Ed]]});class Ad extends h.BaseViewComponent{constructor(){super(...arguments),this.fieldComponents=new Map}registerFieldComponent(e,t){this.fieldComponents.set(e,t)}getValueForPreviousField(e){const t=this.fieldComponents.get(e-1);return t?t.getFieldValue():null}resetValueForNextFields(e){const t=e+1,i=this.fieldComponents.get(t);i&&(i.resetFieldValue(),this.resetValueForNextFields(t))}}Ad.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Ad)))(t||Ad)}}(),Ad.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ad,selectors:[["rx-select-group"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")},directives:[h.RuntimeViewCanvasOutletComponent],encapsulation:2});class Pd extends _l{constructor(e,t,i,n){super(e),this.selectGroupComponent=t,this.rxNamedListDefinitionService=i,this.rxNamedListService=n,this.optionLoaderFunc=this.getNamedListOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.selectedOptions=[]}onConfigInitialized(e){super.onConfigInitialized(e),this.fieldIndex=Number(e.index),this.namedListDefinitionName=e.namedListDefinitionName,this.selectGroupComponent.registerFieldComponent(this.fieldIndex,this);const t=this.rxNamedListDefinitionService.get(this.namedListDefinitionName).pipe((0,r.take)(1)),i=this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$));(0,o.combineLatest)([t,i]).subscribe(([t])=>{this.namedListDefinition=t,this.fieldIdToFilterBy=e.optionFilterFieldId||t.valueFieldId,this.updateSelectedOption(),this.formControl.dirty?this.selectGroupComponent.resetValueForNextFields(this.fieldIndex):this.resetLoadedOptions()})}resetFieldValue(){super.setFieldValue(null),this.resetLoadedOptions()}getDisplayValue(){return this.readOnlyValue}getNamedListOptionPage(e,t,i){return this.rxNamedListService.getOptionPage(this.namedListDefinition,i,this.getSelectionQueryCriteria(),e,t)}viewToModelValueAdapter(e){return(0,u.get)(e,"[0].value","")}modelToViewValueAdapter(e){return(0,u.isNil)(e)?[]:this.selectedOptions}updateSelectedOption(){let e;if(this.showDefaultTitle=!1,(0,u.isEmpty)(this.formControl.value))e=(0,o.of)([]);else{const t=(0,u.get)(this.selectWithPaginationComponent,"options",[]),i=(0,u.find)(t,{value:this.formControl.value});e=i?(0,o.of)([i]):this.rxNamedListService.getOptionsForValues(this.namedListDefinition,[this.formControl.value])}e.pipe((0,r.take)(1)).subscribe(e=>{this.showDefaultTitle=!0,this.selectedOptions=e,(0,u.isEmpty)(e)&&this.formControl.value&&(this.selectedOptions=[{displayValue:null,value:this.formControl.value}]),this.formControl.dirty&&this.formControl.markAsTouched(),this.triggerModelToViewValueUpdate(),this.updateReadOnlyValue()})}resetLoadedOptions(){this.selectWithPaginationComponent&&this.selectWithPaginationComponent.resetLoadedOptions()}getSelectionQueryCriteria(){let e=null;if(this.fieldIndex>0){const t=this.selectGroupComponent.getValueForPreviousField(this.fieldIndex);t&&(e=`('${this.fieldIdToFilterBy}' = "${t}")`)}return e}updateReadOnlyValue(){this.readOnlyValue=(0,u.get)(this.selectedOptions,"[0].displayValue",null)}triggerModelToViewValueUpdate(){this.formControl.setValue(this.formControl.value,{emitEvent:!1})}}Pd.\u0275fac=function(e){return new(e||Pd)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](Ad),n["\u0275\u0275directiveInject"](F.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](F.RxNamedListService))},Pd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pd,selectors:[["rx-select-group-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","formControl","required","readonly","optionLoader","showDefaultTitle","viewToModelValueAdapter","modelToViewValueAdapter"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Bt,2,2,"ng-container",0),n["\u0275\u0275template"](1,$t,1,8,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,l.RxSelectWithPaginationComponent,x.NgControlStatus,x.FormControlDirective,x.RequiredValidator],encapsulation:2});class jd{adaptDefinition(e){e.componentDefinitions.forEach(t=>{(0,u.assign)(t.propertiesByName,{disabled:e.propertiesByName.disabled,hidden:e.propertiesByName.hidden,index:Number(t.propertiesByName.index)}),delete t.propertiesByName.labelId});const t={outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:(0,u.sortBy)(e.componentDefinitions,"propertiesByName.index").map(e=>e.guid)}]}]};e.propertiesByName=(0,u.omit)(e.propertiesByName,["disabled","hidden","recordInstance","recordDefinition"]),e.layout=JSON.stringify(t)}}jd.\u0275fac=function(e){return new(e||jd)},jd.\u0275prov=n["\u0275\u0275defineInjectable"]({token:jd,factory:jd.\u0275fac});class _d{constructor(e,t){this.viewComponentDefinitionAdapterRegistryService=e,this.selectGroupComponentDefinitionAdapterService=t,e.registerRuntimeAdapter(d.RxViewComponentType.SelectGroup,this.selectGroupComponentDefinitionAdapterService)}}_d.\u0275fac=function(e){return new(e||_d)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](jd))},_d.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_d,declarations:[Ad,Pd],imports:[f.CommonModule,h.RuntimeViewCanvasModule,x.ReactiveFormsModule,l.RxSelectWithPaginationModule,S.ReadOnlyFieldModule]}),_d.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[jd],imports:[[f.CommonModule,h.RuntimeViewCanvasModule,x.ReactiveFormsModule,l.RxSelectWithPaginationModule,S.ReadOnlyFieldModule]]});class Vd{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxNamedListDefinitionCacheService=t,this.rxRecordDefinitionCacheService=i,this.definitionPickerOptions={label:"Named list for options",definitionType:l.RxDefinitionPickerType.NamedList,required:!0},this.filterField=[],this.filterFieldIdOptions=[],this.sourceRecordDefinitionDisplayName="",this.fieldId=[]}ngOnInit(){this.onNamedListDefinitionNameChange(!1)}onNamedListDefinitionNameChange(e=!0){(0,o.of)(this.fieldformGroup.get("namedListDefinitionName").value).pipe((0,r.switchMap)(e=>e?this.rxNamedListDefinitionCacheService.getNamedListDefinition(e).pipe((0,r.map)(e=>e.recordDefinitionName)):(0,o.of)(null)),(0,r.take)(1)).subscribe(t=>{this.fieldformGroup.get("sourceRecordDefinitionName").setValue(t,{emitEvent:e}),this.filterFieldIdOptions=[],this.setFilterId(),this.index>0&&(this.setOptionFilterFieldIdOptions(),this.setSourceRecordDefinitionDisplayName())})}setFilterId(){const e=this.fieldformGroup.get("fieldId").value;this.fieldId=(0,u.isEmpty)(e)?[]:[this.targetFieldOptions.find(t=>t.id===e)]}setSourceRecordDefinitionDisplayName(){const e=this.fieldformGroup.get("sourceRecordDefinitionName").value;this.sourceRecordDefinitionDisplayName=e&&this.rxDefinitionNameService.getDisplayName(e)}setOptionFilterFieldIdOptions(){const e=this.fieldformGroup.get("sourceRecordDefinitionName").value;this.filterField=[],e&&this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions.map(e=>({name:e.name,id:String(e.id)})))).subscribe(e=>{const t=this.fieldformGroup.get("optionFilterFieldId").value;this.filterFieldIdOptions=e,this.filterField=(0,u.isEmpty)(t)?[]:[this.filterFieldIdOptions.find(e=>e.id===t)]})}optionFormatter(e){return e.name}onSelectFilterField(e){this.fieldformGroup.get("optionFilterFieldId").setValue((0,u.head)(e).id)}onSelectField(e){this.fieldformGroup.get("fieldId").setValue((0,u.head)(e).id)}}Vd.\u0275fac=function(e){return new(e||Vd)(n["\u0275\u0275directiveInject"](s.RxDefinitionNameService),n["\u0275\u0275directiveInject"](F.RxNamedListDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService))},Vd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vd,selectors:[["rx-select-group-field"]],inputs:{fieldformGroup:"fieldformGroup",index:"index",targetFieldOptions:"targetFieldOptions"},decls:6,vars:13,consts:[["label","Display label","required","true","rx-id","display-label-field",1,"form-group","d-block",3,"formControl"],["required","true","rx-id","named-list-definition-name-field",1,"form-group","d-block",3,"options","formControl","ngModelChange"],["label","Field for storing selected option value","rx-id","selected-option-value-target-field",3,"ngModel","options","optionFormatter","required","disabled","ngClass","ngModelChange"],["label","Source record definition","class","form-group d-block","disabled","","rx-id","source-record-definition-name-field",3,"ngModel","tooltip",4,"ngIf"],["label","Field for filtering option values","rx-id","option-values-filter-field",3,"ngModel","options","optionFormatter","disabled","tooltip","ngModelChange",4,"ngIf"],["label","Source record definition","disabled","","rx-id","source-record-definition-name-field",1,"form-group","d-block",3,"ngModel","tooltip"],["label","Field for filtering option values","rx-id","option-values-filter-field",3,"ngModel","options","optionFormatter","disabled","tooltip","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"adapt-rx-textfield",0),n["\u0275\u0275elementStart"](2,"rx-definition-picker",1),n["\u0275\u0275listener"]("ngModelChange",function(){return t.onNamedListDefinitionNameChange()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"adapt-rx-select",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSelectField(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,Gt,1,3,"adapt-rx-textfield",3),n["\u0275\u0275template"](5,Ut,1,6,"adapt-rx-select",4),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.fieldformGroup.get("label")),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",t.definitionPickerOptions)("formControl",t.fieldformGroup.get("namedListDefinitionName")),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",t.fieldId)("options",t.targetFieldOptions)("optionFormatter",t.optionFormatter)("required",!0)("disabled",t.fieldformGroup.disabled)("ngClass",n["\u0275\u0275pureFunction1"](11,qt,t.index>0)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.index>0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.index>0))},directives:[m.AdaptRxTextfieldComponent,x.RequiredValidator,x.NgControlStatus,x.FormControlDirective,l.RxDefinitionPickerComponent,m.AdaptRxSelectComponent,x.NgModel,f.NgClass,f.NgIf],encapsulation:2});class kd extends l.InspectorWidgetBase{constructor(e,t,i,n){super(n),this.formBuilder=e,this.rxGuidService=t,this.rxModalService=i,this.formArray=this.formBuilder.array([]),this.maxSelectGroupFieldCount=6,this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.designerItemModel.fieldProperties$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.onWriteValue(e)),this.setDisabledState(this.isDisabled)}onWriteValue(e){var t;null===(t=this.valueChangeSubscription)||void 0===t||t.unsubscribe();const i=e.sort((e,t)=>Number(e.index)-Number(t.index)).map(e=>this.formBuilder.group(Object.assign(Object.assign({},(0,u.omit)(e,"index")),{sourceRecordDefinitionName:{value:null,disabled:!0}})));this.formArray=this.formBuilder.array(i),this.valueChangeSubscription=this.formArray.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(this.onFormValueChange.bind(this))}onFormValueChange(e){const t=e.map((e,t)=>{const i=Object.assign(Object.assign({},(0,u.omit)(e,["sourceRecordDefinitionName","optionFilterFieldId"])),{index:String(t),fieldId:e.namedListDefinitionName?e.fieldId:null});return t>0&&(i.optionFilterFieldId=e.namedListDefinitionName?e.optionFilterFieldId:null),i});this.designerItemModel.onFieldPropertiesChange(t)}addField(){this.formArray.push(this.getFieldFormGroup())}removeField(e){this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Are you sure you want to delete this field?"}).then(t=>{t&&this.formArray.removeAt(e)})}isAddFieldButtonDisabled(){return this.isDisabled||this.formArray.length>=this.maxSelectGroupFieldCount}trackByFn(e,t){return t.get("guid").value}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getFieldFormGroup(){return this.formBuilder.group({guid:this.rxGuidService.generate(),label:null,namedListDefinitionName:null,fieldId:null,sourceRecordDefinitionName:null,optionFilterFieldId:null})}setDisabledState(e){e?this.formArray.disable():this.formArray.enable()}}kd.\u0275fac=function(e){return new(e||kd)(n["\u0275\u0275directiveInject"](x.FormBuilder),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](n.Injector))},kd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kd,selectors:[["rx-field-set-form-control"]],inputs:{options:"options",isDisabled:"isDisabled"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["btn-type","tertiary","rx-id","add-field-button",1,"d-icon-plus_circle","px-0","py-0",3,"disabled","click"],["class","card mt-2","rx-id","select-group-field-card",4,"ngFor","ngForOf","ngForTrackBy"],["rx-id","select-group-field-card",1,"card","mt-2"],[1,"card-block","p-2"],["class","close position-relative","type","button","aria-label","Remove","rx-id","remove-field-button",3,"click",4,"ngIf"],[3,"fieldformGroup","index","targetFieldOptions"],["type","button","aria-label","Remove","rx-id","remove-field-button",1,"close","position-relative",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.addField()}),n["\u0275\u0275text"](1," Add dependent field\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Wt,4,4,"div",1)),2&e&&(n["\u0275\u0275property"]("disabled",t.isAddFieldButtonDisabled()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.formArray.controls)("ngForTrackBy",t.trackByFn))},directives:[m.AdaptButtonComponent,f.NgForOf,f.NgIf,Vd],styles:[".close[_ngcontent-%COMP%]{z-index:1}"]});class Bd extends c.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService),this.recordEditorGuid$=this.sandbox.getParentComponentGuid(d.RxViewComponentType.RecordEditor).pipe((0,r.take)(1),(0,r.shareReplay)(1)),this.recordEditorMode$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("mode",e))),this.recordDefinitionName$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.fieldDefinitions$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)),(0,r.distinctUntilChanged)(),(0,r.map)(e=>e&&e.fieldDefinitions?(0,u.filter)(e.fieldDefinitions,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}):[]),(0,r.shareReplay)(1)),this.inspectorTargetFieldOptions$=(0,o.combineLatest)([this.fieldDefinitions$,this.recordEditorMode$]).pipe((0,r.map)(([e,t])=>[(0,u.filter)(e,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}),t]),(0,r.map)(([e,t])=>(0,u.flow)(e=>(0,u.filter)(e,e=>{const i=this.rxFieldDefinitionService.isSystemField(e);return!i||i&&t===qs.Edit}),e=>(0,u.map)(e,e=>({name:e.name,id:String(e.id)})),e=>(0,u.sortBy)(e,"name"))(e)),(0,r.shareReplay)(1)),this.fieldsDesignData$=this.sandbox.getChildComponents(),this.fieldProperties$=this.fieldsDesignData$.pipe((0,r.map)(e=>(0,u.map)(e,e=>Object.assign(Object.assign({},e.data),{guid:e.guid})))),(0,o.combineLatest)([this.recordDefinitionName$,this.inspectorTargetFieldOptions$,this.recordEditorGuid$]).pipe((0,r.take)(1)).subscribe(([e,t,i])=>{this.sandbox.updateInspectorConfig(this.getBaseInspectorConfig(t,e,i))}),this.inspectorTargetFieldOptions$.pipe((0,r.withLatestFrom)(this.recordDefinitionName$,this.recordEditorGuid$)).subscribe(([e,t,i])=>{this.sandbox.updateInspectorConfig(this.getBaseInspectorConfig(e,t,i))}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.fieldProperties$]).pipe((0,r.switchMap)(([e,t])=>this.validate(e,t))).subscribe(e=>{this.sandbox.setValidationIssues(e)})}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},d.RX_DISABLED_PROP_DEFAULT_VALUE),d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}onFieldPropertiesChange(e){const t=this.getFieldComponentPayloads(e);this.sandbox.setChildren(t)}isFieldRequired(e){return this.fieldDefinitions$.pipe((0,r.map)(t=>{const i=e.data.fieldId&&(0,u.find)(t,{id:Number(e.data.fieldId)});return Boolean(i)&&i.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required}))}getPropertiesByName(e){return(0,u.pick)(e,["disabled","hidden","styles",d.RX_AVAILABLE_ON_DEVICES_PROP_NAME])}validate(e,t){const i=[];if((0,u.isEmpty)(t))i.push("Field set cannot be empty.");else{const e=(0,u.filter)(t,e=>e.label);e.length!==t.length&&i.push("Display label cannot be blank."),(0,u.uniqBy)(e,"label").length!==e.length&&i.push("Display labels must be unique."),(0,u.reject)(t,e=>e.namedListDefinitionName).length&&i.push("Named list for options cannot be blank."),(0,u.reject)(t,e=>e.fieldId).length&&i.push("Field for storing selected option value cannot be blank.")}const n=i.map(e=>this.sandbox.createError(e)).concat((0,c.validateStandardProps)(e));return(0,o.of)(n)}getFieldComponentPayloads(e){return(0,u.map)(e,e=>({type:d.RxViewComponentType.SelectGroupField,guid:e.guid,data:(0,u.omit)(e,"guid")}))}getBaseInspectorConfig(e,t,i){const n={label:"General",controls:[]};return n.controls=t?[(0,c.getDisabledFieldInspectorConfig)(),...(0,c.getStandardPropsInspectorConfigs)()]:[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",propertyName:"recordDefinitionName",componentGuid:i}}],{inspectorSectionConfigs:t?[n,{label:"Field set",controls:[{component:kd,options:{targetFieldOptions:e}}]}]:[n]}}}class $d{trackByFn(e,t){return t.data.guid}}$d.\u0275fac=function(e){return new(e||$d)},$d.\u0275cmp=n["\u0275\u0275defineComponent"]({type:$d,selectors:[["rx-select-group-design"]],inputs:{model:"model"},decls:4,vars:4,consts:[[3,"ngIf","ngIfElse"],["placeholderTemplate",""],["ngModel","","rx-id","select-group-field","class","form-group d-block",3,"label","required","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["ngModel","","rx-id","select-group-field",1,"form-group","d-block",3,"label","required","disabled"],["type","objects","label","Add dependent fields in the Properties panel."]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,Qt,2,4,"ng-template",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,Kt,1,0,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,2,t.model.fieldsDesignData$).length)("ngIfElse",e)}},directives:[f.NgIf,f.NgForOf,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator,m.AdaptEmptyStateComponent],pipes:[f.AsyncPipe],encapsulation:2});class Ld{}Ld.\u0275fac=function(e){return new(e||Ld)},Ld.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ld,declarations:[$d,kd,Vd],imports:[x.FormsModule,f.CommonModule,m.AdaptButtonModule,x.ReactiveFormsModule,l.RxDefinitionPickerModule,m.AdaptRxTextfieldModule,m.AdaptRxSelectModule,m.AdaptEmptyStateModule],exports:[$d,kd,Vd]}),Ld.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.FormsModule,f.CommonModule,m.AdaptButtonModule,x.ReactiveFormsModule,l.RxDefinitionPickerModule,m.AdaptRxTextfieldModule,m.AdaptRxSelectModule,m.AdaptEmptyStateModule]]});class Gd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.SelectGroup,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ad),properties:[d.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Select group",designComponentFactory:t.resolveComponentFactory($d),designComponentModel:Bd,isContainerComponent:!0,group:Ml,icon:"field_dropdowns",options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId},{type:d.RxViewComponentType.SelectGroupField,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Pd),properties:Fl,isDataComponent:!0})}}Gd.\u0275fac=function(e){return new(e||Gd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Gd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Gd,imports:[_d,Ld]}),Gd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[_d,Ld]]});class zd extends Nl{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character],this.translateService=this.injector.get(p.TranslateService)}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Nl.getInitialProperties()),{enableMultiSelection:null,additionalQueryCriteria:null}),e)}getInspectorConfig(){return this.selectedFieldDefinition$.pipe((0,r.switchMap)(e=>super.getInspectorConfig().pipe((0,r.map)(t=>(null==e?void 0:e.namedListDefinition)?this.getNamedListInspectorConfig(t,e):t))))}getNamedListInspectorConfig(e,t){const i=new c.NamedListFilterExpressionConfigurator(t,this.injector),n={name:"enableMultiSelection",component:l.SwitchFormControlComponent,options:{label:"Enable multi-selection"}},o=[{name:"namedListDefinitionName",component:l.RxDefinitionPickerComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.named-list.label"),definitionType:l.RX_DEFINITION_PICKER.definitionTypes.namedList.type}},{name:"additionalQueryCriteria",component:l.ExpressionFormControlComponent,options:{label:"Additional named list filter",tooltip:new s.Tooltip("Build a filter to apply at runtime in addition to the filter, if any, specified in the named list definition."),dataDictionary$:i.getDataDictionary(),operators:i.getOperators()}}];return e.inspectorSectionConfigs[0].controls.push(n),e.inspectorSectionConfigs[0].controls.push(...o),this.sandbox.updateComponentProperties({namedListDefinitionName:t.namedListDefinition}),e}getPropertiesByName(e){return(0,u.omit)(super.getPropertiesByName(e),"namedListDefinitionName")}}class Ud{}Ud.\u0275fac=function(e){return new(e||Ud)},Ud.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ud,selectors:[["rx-character-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class qd{}qd.\u0275fac=function(e){return new(e||qd)},qd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:qd,declarations:[Ud],imports:[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]}),qd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]]});class Xd extends c.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.injector=e,this.componentGuid=t,this.componentModel=i;const n=this.componentModel.selectedFieldDefinition$.pipe((0,r.filter)(e=>Boolean(e.namedListDefinition)),(0,r.switchMap)(e=>new c.NamedListFilterExpressionConfigurator(e,this.injector).getDataDictionary()));this.configureForProperty({propertyPath:"additionalQueryCriteria",dataDictionary$:n,operators:s.ExpressionOperatorRowsByGroup.get(s.ExpressionOperatorGroup.AllServer)})}}!function(e){e.Enabled="true",e.Disabled="false"}(Md||(Md={}));class Wd extends _l{constructor(e,t,i,n){super(e),this.fieldDefinitionService=t,this.rxNamedListDefinitionService=i,this.rxNamedListService=n,this.optionLoaderFunc=this.getNamedListOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.selectedOptions=[],this.multiSelectDelimiter=";",this.isDropdownOpen=!1}onConfigInitialized(e){if(super.onConfigInitialized(e),this.isPasswordField=(0,u.includes)(a.RX_RECORD_DEFINITION.passwordFieldIds,this.fieldId)||this.fieldDefinition.shouldPersistHashed,this.namedListDefinitionName=this.fieldDefinition.namedListDefinition,this.isNamedListAttached=Boolean(this.namedListDefinitionName),this.isMultipleSelectionEnabled=e.enableMultiSelection===Md.Enabled,this.fieldDefinition.maxLength&&!this.fieldDefinitionService.isSystemField(this.fieldDefinition)&&(this.maxLength=this.fieldDefinition.maxLength),this.isNamedListAttached){const e=this.rxNamedListDefinitionService.get(this.namedListDefinitionName).pipe((0,r.shareReplay)(1),(0,r.take)(1)),t=this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.startWith)(this.formControl.value),(0,r.filter)(()=>!this.isDropdownOpen),(0,r.takeUntil)(this.destroyed$));this.config.pipe((0,r.debounceTime)(250),(0,r.pluck)("additionalQueryCriteria"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{(0,u.isNil)(this.additionalQueryCriteria)||(this.selectWithPaginationComponent.resetLoadedOptions(),this.setFieldValue(null)),this.additionalQueryCriteria=e}),(0,o.combineLatest)([e,t]).subscribe(([e])=>{this.namedListDefinition=e,this.updateSelection()})}}getDisplayValue(){let e=super.getDisplayValue();return this.isPasswordField?e="********":this.isNamedListAttached&&(e=this.namedListFormattedValue),e}getNamedListOptionPage(e,t,i){return this.rxNamedListService.getOptionPage(this.namedListDefinition,i,this.additionalQueryCriteria,e,t)}viewToModelValueAdapter(e){return this.selectedOptions=e,this.updateNamedListFormattedValue(),e.map(e=>e.value).join(this.multiSelectDelimiter)}modelToViewValueAdapter(e){return e?this.selectedOptions:[]}onToggleDropdown(e){this.isDropdownOpen=e}getOptionValues(e){return e?(0,u.compact)(e.split(this.multiSelectDelimiter)):[]}updateSelection(){this.showDefaultTitle=!1;const e=this.getOptionValues(this.formControl.value);if(!this.isMultipleSelectionEnabled&&e.length>1)this.selectedOptions=[{displayValue:null,value:this.formControl.value}],this.triggerModelToViewValueUpdate(),this.updateNamedListFormattedValue();else{const t=(0,u.get)(this.selectWithPaginationComponent,"options",[]);(e.every(e=>t.find(t=>t.value===e))?(0,o.of)(t):this.rxNamedListService.getOptionsForValues(this.namedListDefinition,e)).subscribe(t=>{this.showDefaultTitle=!0,!this.isMultipleSelectionEnabled&&e.length>1?this.selectedOptions=[{displayValue:null,value:this.formControl.value}]:this.selectedOptions=e.map(e=>(0,u.find)(t,{value:e})||{displayValue:null,value:e}),this.formControl.dirty&&this.formControl.markAsTouched(),this.triggerModelToViewValueUpdate(),this.updateNamedListFormattedValue()})}}updateNamedListFormattedValue(){if(this.isMultipleSelectionEnabled){const e=50;this.namedListFormattedValue=this.selectedOptions.slice(0,e).map(e=>e.displayValue).filter(Boolean).join(", ")||null,this.selectedOptions.length>=e&&(this.namedListFormattedValue+="...")}else this.namedListFormattedValue=this.selectedOptions.length?(0,u.first)(this.selectedOptions).displayValue:null}triggerModelToViewValueUpdate(){this.formControl.setValue(this.formControl.value,{emitEvent:!1})}}Wd.\u0275fac=function(e){return new(e||Wd)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](F.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](F.RxNamedListService))},Wd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wd,selectors:[["rx-text-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["namedListOptionTemplate",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","isPassword","formControl","maxlength","required","readonly","disabledStyleForReadonlyState","autocomplete","requiredLabel",4,"ngIf"],[3,"showDefaultTitle","label","formControl","readonly","viewToModelValueAdapter","modelToViewValueAdapter","optionLoader","required","isMultiSelectionMode","template","toggleDropdown",4,"ngIf"],[3,"label","isPassword","formControl","maxlength","required","readonly","disabledStyleForReadonlyState","autocomplete","requiredLabel"],[3,"showDefaultTitle","label","formControl","readonly","viewToModelValueAdapter","modelToViewValueAdapter","optionLoader","required","isMultiSelectionMode","template","toggleDropdown"],["class","text-secondary text-truncate",3,"title",4,"ngIf"],[1,"text-secondary","text-truncate",3,"title"],["class","breadcrumb-item active",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Yt,2,2,"ng-container",0),n["\u0275\u0275template"](1,ti,2,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,oi,2,2,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.FormControlDirective,x.MaxLengthValidator,x.RequiredValidator,l.RxSelectWithPaginationComponent,f.NgForOf],pipes:[p.TranslatePipe],encapsulation:2});class Hd{}Hd.\u0275fac=function(e){return new(e||Hd)},Hd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hd,declarations:[Wd],imports:[f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule,l.RxSelectWithPaginationModule,m.AdaptRxTextfieldModule],exports:[Wd]}),Hd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,S.ReadOnlyFieldModule,x.ReactiveFormsModule,p.TranslateModule,l.RxSelectWithPaginationModule,m.AdaptRxTextfieldModule]]});class Qd{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxRecordQueryExpressionEvaluatorService=i,e.register({type:d.RxViewComponentType.Character,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Wd),properties:[...Fl,{name:"enableMultiSelection",designType:d.ViewComponentPropertyType.Boolean},{name:"namedListDefinitionName",designType:d.ViewComponentPropertyType.String},{name:"additionalQueryCriteria",designType:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordQueryExpressionEvaluatorService}],name:"Text",group:Ml,icon:"field_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ud),designComponentModel:zd,expressionConfigurator:Xd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Qd.\u0275fac=function(e){return new(e||Qd)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxRecordQueryExpressionEvaluatorService))},Qd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Qd,imports:[Hd,qd]}),Qd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Hd,qd]]});class Kd extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character]}}class Jd{}Jd.\u0275fac=function(e){return new(e||Jd)},Jd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jd,selectors:[["rx-textarea-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","","rows","3",1,"rx-pointer-events-none",3,"label","required","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textarea",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,3,t.model.label$))("required",n["\u0275\u0275pipeBind1"](2,5,t.model.isRequired$))("disabled",!0)},directives:[m.AdaptRxTextareaComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class Yd{}Yd.\u0275fac=function(e){return new(e||Yd)},Yd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yd,declarations:[Jd],imports:[f.CommonModule,m.AdaptRxTextareaModule,x.FormsModule]}),Yd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxTextareaModule,x.FormsModule]]});class Zd extends _l{constructor(e,t){super(e),this.rxFieldDefinitionService=t}onConfigInitialized(e){super.onConfigInitialized(e),this.fieldDefinition.maxLength&&!this.rxFieldDefinitionService.isSystemField(this.fieldDefinition)&&(this.maxLength=this.fieldDefinition.maxLength)}}Zd.\u0275fac=function(e){return new(e||Zd)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService))},Zd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zd,selectors:[["rx-textarea-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"formControl","required","maxlength","rows","readonly","disabledStyleForReadonlyState","label","requiredLabel"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ai,2,2,"ng-container",0),n["\u0275\u0275template"](1,si,2,10,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxTextareaComponent,x.NgControlStatus,x.FormControlDirective,x.RequiredValidator,x.MaxLengthValidator],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]     textarea{resize:none}[_nghost-%COMP%]     rx-read-only-field .read-only-content{max-height:6em;overflow-y:auto;word-break:break-all;white-space:pre-wrap}"]});class ec{}ec.\u0275fac=function(e){return new(e||ec)},ec.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ec,declarations:[Zd],imports:[f.CommonModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule,m.AdaptRxTextareaModule]}),ec.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule,m.AdaptRxTextareaModule]]});class tc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Textarea,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Zd),properties:Fl,name:"Textarea",group:Ml,icon:"area_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Jd),designComponentModel:Kd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}tc.\u0275fac=function(e){return new(e||tc)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},tc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:tc,imports:[ec,Yd]}),tc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[ec,Yd]]});class ic extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]}}class nc{constructor(){this.pickerMode=m.RxDatetimePickerMode.Time}}nc.\u0275fac=function(e){return new(e||nc)},nc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:nc,selectors:[["rx-time-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"ngModel","required","disabled","mode","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.timeValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("ngModel",t.timeValue)("required",n["\u0275\u0275pipeBind1"](1,5,t.model.isRequired$))("disabled",!0)("mode",t.pickerMode)("label",n["\u0275\u0275pipeBind1"](2,7,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class oc{}oc.\u0275fac=function(e){return new(e||oc)},oc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oc,declarations:[nc],imports:[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]}),oc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,f.CommonModule,x.FormsModule]]});class rc extends m.AdaptRxDatetimeAdapter{constructor(){super(...arguments),this.storeTimeFormat="HH:mm:ss"}fromModel(e){let t=null;const i=(0,I.default)(e,"LTS");return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)({hour:e.hours||0,minute:e.minutes||0,seconds:e.seconds||0}).format(this.storeTimeFormat):null}}rc.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](rc)))(t||rc)}}(),rc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:rc,factory:rc.\u0275fac});class ac extends _l{constructor(e,t){super(e),this.datePipe=t,this.pickerMode=m.RxDatetimePickerMode.Time}getDisplayValue(){var e;const t=super.getDisplayValue();if(t){const i=(0,I.default)(t,"LTS").toDate();return null!==(e=this.datePipe.transform(i,"mediumTime"))&&void 0!==e?e:"-"}return"-"}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value,"LTS"):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:this.pickerMode,hasSeconds:!0}}:null}]}}ac.\u0275fac=function(e){return new(e||ac)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](f.DatePipe))},ac.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ac,selectors:[["rx-time-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:rc}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["hasSeconds","true",3,"label","required","formControl","readonly","disabledStyleForReadonlyState","mode"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,di,2,2,"ng-container",0),n["\u0275\u0275template"](1,ci,1,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,x.RequiredValidator,x.NgControlStatus,x.FormControlDirective],encapsulation:2});class sc{}sc.\u0275fac=function(e){return new(e||sc)},sc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:sc,declarations:[ac],imports:[m.AdaptRxDatetimeModule,f.CommonModule,S.ReadOnlyFieldModule,p.TranslateModule,x.ReactiveFormsModule]}),sc.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[f.DatePipe],imports:[[m.AdaptRxDatetimeModule,f.CommonModule,S.ReadOnlyFieldModule,p.TranslateModule,x.ReactiveFormsModule]]});class lc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Time,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ac),properties:Fl,name:"Time",group:Ml,icon:"clock_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(nc),designComponentModel:ic,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}lc.\u0275fac=function(e){return new(e||lc)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},lc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:lc,imports:[sc,oc]}),lc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[sc,oc]]});class dc extends h.BaseViewComponent{constructor(e,t){super(),this.rxRecordDefinitionCacheService=e,this.rxRecordDefinitionService=t,this.recordDefinitions={}}ngOnInit(){super.ngOnInit(),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state=e})}loadRecordDefinition(e){this.rxRecordDefinitionCacheService.getRecordDefinition(e).subscribe(t=>{t.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(t),this.recordDefinitions[e]=t,this.notifyPropertyChanged("recordDefinitions",this.recordDefinitions)})}}dc.\u0275fac=function(e){return new(e||dc)(n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService))},dc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:dc,selectors:[["rx-extension-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"hidden"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("hidden",t.state.hidden)},directives:[h.RuntimeViewCanvasOutletComponent],encapsulation:2});class cc{getSelectionFieldOptionNamesByIdExpression(e){return`${e}:selectionFieldOptionNamesById`}}cc.\u0275fac=function(e){return new(e||cc)},cc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:cc,factory:cc.\u0275fac});class pc extends h.BaseViewComponent{constructor(e,t,i,n,o){super(),this.rxExtensionContainerComponent=e,this.rxRecordInstanceService=t,this.rxRecordEditorUtilsService=i,this.rxExtensionContainerHelperService=n,this.recordEditorComponent=o,this.isInitialized=!1,this.selectionFieldOptionNamesById=null}ngOnInit(){super.ngOnInit(),(0,o.combineLatest)([this.config,this.recordEditorComponent.recordInstanceChanged$.pipe((0,r.startWith)(null))]).pipe((0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{if(e.recordDefinitionName&&this.rxExtensionContainerComponent.loadRecordDefinition(e.recordDefinitionName),!e.associationDefinitionName)return this.isInitialized=!0;if(e.api){let t=null;this.recordEditorComponent.state.mode===qs.Edit&&(t=this.recordEditorComponent.state.recordInstance.id);const i=e.api.getAssociationManager({associationDefinitionName:e.associationDefinitionName,associatedRecordNodeSide:C.RX_ASSOCIATION_DEFINITION.roles.second.value,associatedRecordInstanceId:t,recordDefinitionName:e.recordDefinitionName,allFieldIds:!0,associatedRecordPath:e.associatedRecordPath});let n;this.recordEditorComponent.state.mode===qs.Edit?n=i.loadExtensions().pipe((0,r.switchMap)(e=>(0,u.isEmpty)(i.extensions)?this.addNewRecordInstanceToExtension(i):(0,o.of)(e))):this.recordEditorComponent.state.mode!==qs.Create&&this.recordEditorComponent.state.mode!==qs.Temporary||(n=(0,o.forkJoin)([i.initialize(),this.addNewRecordInstanceToExtension(i)])),n.pipe((0,r.tap)(()=>{this.isInitialized=!0}),(0,r.switchMap)(()=>{const e=i.extensions$.pipe((0,r.map)(e=>e[0]),(0,r.tap)(e=>this.updateSelectionFieldOptionNames(e)),(0,r.shareReplay)(1));return e.pipe((0,r.switchMap)(e=>e.fieldValueChanged$),(0,r.withLatestFrom)(e))}),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.updateSelectionFieldOptionNames(t)})}})}addNewRecordInstanceToExtension(e){return this.rxRecordInstanceService.getNew(e.options.recordDefinitionName).pipe((0,r.tap)(t=>{t.isNewInstance=!0,e.addExtension(t)}))}updateSelectionFieldOptionNames(e){if((0,u.get)(e,"recordDefinition.fieldDefinitions")){const t=this.rxRecordEditorUtilsService.getSelectionFieldOptionNames(e.recordDefinition,e);if(!(0,u.isEqual)(this.selectionFieldOptionNamesById,t)){const e=this.rxExtensionContainerHelperService.getSelectionFieldOptionNamesByIdExpression(this.guid);this.rxExtensionContainerComponent.notifyPropertyChanged(e,t)}}}}pc.\u0275fac=function(e){return new(e||pc)(n["\u0275\u0275directiveInject"](dc),n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](il),n["\u0275\u0275directiveInject"](cc),n["\u0275\u0275directiveInject"](sl))},pc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pc,selectors:[["rx-extension-container-section"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"h5"),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,pi,1,0,"rx-runtime-view-canvas-outlet",0)),2&e){let e;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](null==(e=n["\u0275\u0275pipeBind1"](2,2,t.config))?null:e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isInitialized)}},directives:[f.NgIf,h.RuntimeViewCanvasOutletComponent],pipes:[f.AsyncPipe],encapsulation:2});const uc={type:d.RxViewComponentType.ExtensionContainer,recordDefinitionsReferencingExpression:"recordDefinitions",extensionContainerSectionComponent:"rx-extension-container-section"};class mc{constructor(e,t,i,n,o,r,a,s,l,d){this.rxViewDefinitionParserService=e,this.rxViewDefinitionDataPageService=t,this.rxGlobalCacheService=i,this.rxDefinitionNameService=n,this.rxTreeService=o,this.rxExtensionContainerHelperService=r,this.rxNotificationService=a,this.rxRuntimeViewUtilsService=s,this.rxViewDefinitionLocalizationService=l,this.translateService=d}adaptDefinition(e,t){const i=this.getTargetRecordEditorComponentDefinition(t,e);return e.propertiesByName.mode=i.propertiesByName.mode,this.getExtensionViewDefinitions(e.guid).pipe((0,r.map)(this.getViewDefinitionMap.bind(this)),(0,r.map)(this.filterDuplicatedRecordEditorComponentDefinitions.bind(this)),(0,r.map)(e=>this.filterIncompatibleRecordEditorComponentDefinitions(e,i)),(0,r.switchMap)(this.setRecordEditorLabels.bind(this)),(0,r.map)(this.getExtensionRecordEditorComponentDefinitions.bind(this)),(0,r.switchMap)(n=>{const a=()=>{e.componentDefinitions=[],e.resourceType=d.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,(0,u.forEach)(n,t=>{this.processRecordEditorComponentDefinition(t,i,e),e.componentDefinitions.push(this.getExtensionContainerSectionViewComponentDefinition(t,i))});const t=e.componentDefinitions.map(e=>e.guid);return e.layout=JSON.stringify({outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:t}]}]}),n},s=n.map(e=>(0,o.combineLatest)([...this.rxRuntimeViewUtilsService.runAdaptersForComponents(t,e)]));return(0,o.combineLatest)(s).pipe((0,r.tap)({complete:()=>a()}))}))}getExtensionViewDefinitions(e){return this.rxViewDefinitionDataPageService.get({params:{propertySelection:["name","targetExtensionContainerGuid","targetViewDefinitionName","componentDefinitions","localizableStringsByComponentId","lastUpdateTime"],viewType:d.ViewDefinitionType.Regular,targetExtensionContainerGuid:e,excludeExtensionViews:!1},headers:{"default-bundle-scope":""}}).pipe((0,r.map)(e=>{const t=[];return(0,u.forEach)(e.data,e=>{var i;this.rxViewDefinitionLocalizationService.applyLocalization(e);const n=null===(i=e.componentDefinitions[0])||void 0===i?void 0:i.propertiesByName.associationDefinitionName;(0,u.isString)(n)&&(t.includes(n)?this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.extension-container.duplicate-extensions.warning")):t.push(n))}),e.data}))}getTargetRecordEditorComponentDefinition(e,t){return this.rxViewDefinitionParserService.findParentComponentDefinition(e,t,e=>e.type===d.RxViewComponentType.RecordEditor)}getViewDefinitionMap(e){return(0,u.reduce)(e,(e,t)=>{const i=t.componentDefinitions[0];return i&&e.push({viewDefinition:t,recordEditorComponentDefinition:i}),e},[])}filterDuplicatedRecordEditorComponentDefinitions(e){return(0,u.values)((0,u.reduce)(e,(e,t)=>{if(!t.recordEditorComponentDefinition.propertiesByName.associationDefinitionName)return e[t.recordEditorComponentDefinition.guid]=t,e;const i=[t.recordEditorComponentDefinition.propertiesByName.recordDefinitionName,t.recordEditorComponentDefinition.propertiesByName.associationDefinitionName].join("");return e[i]?(0,I.default)(t.viewDefinition.lastUpdateTime)<(0,I.default)(e[i].viewDefinition.lastUpdateTime)&&(e[i]=t):e[i]=t,e},{}))}filterIncompatibleRecordEditorComponentDefinitions(e,t){return(0,u.filter)(e,e=>{const i=e.recordEditorComponentDefinition.propertiesByName.mode===t.propertiesByName.mode,n=t.propertiesByName.recordDefinitionName===e.recordEditorComponentDefinition.propertiesByName.recordDefinitionName,o=e.recordEditorComponentDefinition.propertiesByName.associationDefinitionName;return n&&!o&&i||o&&i})}setRecordEditorLabels(e){return(0,o.forkJoin)([...e.map(e=>{let t;return t=e.recordEditorComponentDefinition.propertiesByName.label?(0,o.of)(e.recordEditorComponentDefinition.propertiesByName.label):this.rxGlobalCacheService.getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(e.viewDefinition.name)),t.pipe((0,r.map)(t=>(e.recordEditorComponentDefinition.propertiesByName.label=t,e)))})])}getExtensionRecordEditorComponentDefinitions(e){return(0,u.map)(e,"recordEditorComponentDefinition")}processRecordEditorComponentDefinition(e,t,i){return this.rxTreeService.flattenTree(e,"componentDefinitions").forEach(n=>{this.patchFieldComponentExpressions(n,e,t,i)}),e}patchFieldComponentExpressions(e,t,i,n){const o=t.propertiesByName.associationDefinitionName?[i.guid,".","recordInstance.associationInstances['",t.propertiesByName.associationDefinitionName,"'].",C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,".extensions[0]"].join(""):[i.guid,".recordInstance"].join(""),r=[o,".recordDefinitionName"].join(""),a=t.propertiesByName.associationDefinitionName?[n.guid,".",uc.recordDefinitionsReferencingExpression,"['",t.propertiesByName.recordDefinitionName,"']"].join(""):[i.guid,".recordDefinition"].join(""),s=[o,".id"].join("");let l;l=t.propertiesByName.associationDefinitionName?[n.guid,".",this.rxExtensionContainerHelperService.getSelectionFieldOptionNamesByIdExpression(t.guid)].join(""):`${i.guid}.selectionFieldOptionNamesById`;const d=[{regExp:new RegExp(t.guid+".recordInstanceId","g"),expression:s},{regExp:new RegExp(t.guid+".recordInstance","g"),expression:o},{regExp:new RegExp(t.guid+".recordDefinitionName","g"),expression:r},{regExp:new RegExp(t.guid+".recordDefinition","g"),expression:a},{regExp:new RegExp(t.guid+".selectionFieldOptionNamesById","g"),expression:l},{regExp:new RegExp(`${t.guid}\\.(\\w+)}`,"g"),expression:`${i.guid}.$1}`}];["disabled","hidden","value","html"].filter(t=>(0,u.isString)(e.propertiesByName[t])).forEach(t=>{(0,u.forEach)(d,i=>{e.propertiesByName[t]=e.propertiesByName[t].replace(i.regExp,i.expression)})}),e.propertiesByName.api=`\${view.components.${i.guid}.api}`,e.propertiesByName.inReadState=`\${view.components.${i.guid}.inReadState}`,t.propertiesByName.associationDefinitionName&&(e.propertiesByName.associatedRecordPath=[t.propertiesByName.associationDefinitionName,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,"extensions",0]),e.propertiesByName.recordInstance&&(e.propertiesByName.recordInstance=["${view.components.",o,"}"].join("")),e.propertiesByName.recordDefinition&&(e.propertiesByName.recordDefinition=["${view.components.",a,"}"].join(""))}getExtensionContainerSectionViewComponentDefinition(e,t){return{guid:e.guid,type:uc.extensionContainerSectionComponent,layout:e.layout,resourceType:d.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,componentDefinitions:e.componentDefinitions,propertiesByName:{label:e.propertiesByName.label,styles:e.propertiesByName.styles,recordDefinitionName:e.propertiesByName.recordDefinitionName,associationDefinitionName:e.propertiesByName.associationDefinitionName,[d.RX_AVAILABLE_ON_DEVICES_PROP_NAME]:e.propertiesByName[d.RX_AVAILABLE_ON_DEVICES_PROP_NAME],api:`\${view.components.${t.guid}.api}`,associatedRecordPath:[e.propertiesByName.associationDefinitionName,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,"extensions",0]}}}}mc.\u0275fac=function(e){return new(e||mc)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService),n["\u0275\u0275inject"](d.RxViewDefinitionDataPageService),n["\u0275\u0275inject"](s.RxGlobalCacheService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](v.RxTreeService),n["\u0275\u0275inject"](cc),n["\u0275\u0275inject"](s.RxNotificationService),n["\u0275\u0275inject"](h.RxRuntimeViewUtilsService),n["\u0275\u0275inject"](d.RxViewDefinitionLocalizationService),n["\u0275\u0275inject"](p.TranslateService))},mc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:mc,factory:mc.\u0275fac});class fc{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.rxExtensionContainerDefinitionAdapterService=t,e.registerRuntimeAdapter(uc.type,this.rxExtensionContainerDefinitionAdapterService)}}fc.\u0275fac=function(e){return new(e||fc)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](mc))},fc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:fc,declarations:[dc,pc],imports:[f.CommonModule,h.RuntimeViewCanvasModule],exports:[dc]}),fc.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[mc,cc],imports:[[f.CommonModule,h.RuntimeViewCanvasModule]]});class hc extends c.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.parentGuid$=this.sandbox.getParentComponentGuid(d.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.initialProperties=Object.assign({name:"",recordDefinition:"",recordInstance:""},d.RX_STANDARD_PROPS_DEFAULT_VALUES),(0,o.combineLatest)([this.parentGuid$,this.componentProperties$]).pipe((0,r.first)()).subscribe(([e,t])=>{const i=Object.assign(Object.assign(Object.assign({},this.initialProperties),t),{recordInstance:`\${view.components.${e}.recordInstance}`,recordDefinition:`\${view.components.${e}.recordDefinition}`});this.sandbox.updateComponentProperties(i),this.sandbox.updateInspectorConfig(this.getInspectorConfig())}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("name").pipe((0,r.map)(e=>{if((0,u.isEmpty)(e))return this.sandbox.createError("Name cannot be blank.","name")})),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(c.validateCssClassNames)),this.sandbox.getComponentPropertyValue(d.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(c.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e))}getInspectorConfig(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",required:!0,tooltip:new s.Tooltip("Enter a name to uniquely identify the Extension container")}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}}class gc{}gc.\u0275fac=function(e){return new(e||gc)},gc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:gc,selectors:[["rx-extension-container-design"]],inputs:{model:"model"},decls:1,vars:0,consts:[["type","objects","label","Contains fields from extensions of the record definition."]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",0)},directives:[m.AdaptEmptyStateComponent],encapsulation:2});class vc{}vc.\u0275fac=function(e){return new(e||vc)},vc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:vc,declarations:[gc],imports:[f.CommonModule,m.AdaptEmptyStateModule]}),vc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptEmptyStateModule]]});class yc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:uc.type,componentFactory:this.componentFactoryResolver.resolveComponentFactory(dc),properties:d.RX_STANDARD_PROPS_DESC,outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Extension container",group:Ml,icon:"widget",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(gc),designComponentModel:hc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId},{type:uc.extensionContainerSectionComponent,componentFactory:this.componentFactoryResolver.resolveComponentFactory(pc),properties:[{name:"api",enableExpressionEvaluation:!0}],outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}]})}}yc.\u0275fac=function(e){return new(e||yc)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},yc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:yc,imports:[fc,vc]}),yc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[fc,vc]]});class bc extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character]}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.withLatestFrom)(this.availableFieldDefinitions$),(0,r.map)(([e,t])=>{const i=t.filter(e=>!e.maxLength).map(e=>({id:String(e.id),name:e.name})),n=(0,u.cloneDeep)(e);return n.inspectorSectionConfigs[0].controls[0].options.options=[...i],n}))}}class xc{constructor(e){this.rxCkEditorConfiguratorService=e,this.ckEditorType="divarea",this.ckEditorConfig=this.rxCkEditorConfiguratorService.getCKEditorConfig()}}xc.\u0275fac=function(e){return new(e||xc)(n["\u0275\u0275directiveInject"](d.RxCkEditorConfiguratorService))},xc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xc,selectors:[["rx-rich-textarea-field-design"]],inputs:{model:"model"},decls:8,vars:9,consts:[["class","form-control-required",4,"ngIf"],[1,"mt-1"],[3,"type","config","readOnly"],[1,"form-control-required"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"strong"),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275template"](4,ui,2,0,"span",0),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",1),n["\u0275\u0275element"](7,"ckeditor",2),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,5,t.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](5,7,t.model.isRequired$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("type",t.ckEditorType)("config",t.ckEditorConfig)("readOnly",!0))},directives:[f.NgIf,M.CKEditorComponent],pipes:[f.AsyncPipe],styles:["ckeditor[_ngcontent-%COMP%]     .cke_inner{box-shadow:none}"]});class Cc{}Cc.\u0275fac=function(e){return new(e||Cc)},Cc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cc,declarations:[xc],imports:[f.CommonModule,M.CKEditorModule]}),Cc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,M.CKEditorModule]]});class Sc extends _l{constructor(e,t){super(e),this.rxCkEditorConfiguratorService=t,this.ckEditorType="divarea",this.ckEditorConfig=this.rxCkEditorConfiguratorService.getCKEditorConfig()}setFieldValue(e,t={}){null===this.formControl.value&&""===e||super.setFieldValue(e)}onBlur(){this.formControl.markAsTouched()}}Sc.\u0275fac=function(e){return new(e||Sc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](d.RxCkEditorConfiguratorService))},Sc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Sc,selectors:[["rx-rich-textarea-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["class","read-only-content-wrapper focusable","tabindex","0",4,"ngIf","ngIfElse"],["tabindex","0",1,"read-only-content-wrapper","focusable"],[3,"config","type","readOnly","ngModel"],[3,"label","showRequiredLabel"],[3,"data","config","type","readOnly","dataChange","blur"],[3,"errors","controlTouched"],["adaptRxFeedbackRef",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,fi,2,2,"ng-container",0),n["\u0275\u0275template"](1,hi,5,10,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,M.CKEditorComponent,x.NgControlStatus,x.NgModel,m.AdaptRxControlLabelComponent,m.AdaptRxFeedbackComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}ckeditor[_ngcontent-%COMP%]     .cke_inner{box-shadow:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke{border:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke_top{display:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke_editable{padding:0}.has-danger[_ngcontent-%COMP%]     .cke{border-color:#f83200}']});class Dc{}Dc.\u0275fac=function(e){return new(e||Dc)},Dc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Dc,declarations:[Sc],imports:[f.CommonModule,x.FormsModule,m.AdaptRxFormControlModule,p.TranslateModule,x.ReactiveFormsModule,M.CKEditorModule]}),Dc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptRxFormControlModule,p.TranslateModule,x.ReactiveFormsModule,M.CKEditorModule]]});class Ic{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.RichTextarea,properties:Fl,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Sc),name:"Rich text area",icon:"text_colorpicker_adapt",group:Ml,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(xc),designComponentModel:bc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Ic.\u0275fac=function(e){return new(e||Ic)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Ic.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ic,imports:[Cc,Dc]}),Ic.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Cc,Dc]]});class Rc extends _l{constructor(e,t,i){super(e),this.rxModalService=t,this.rxLocalizationService=i}onConfigUpdated(e){super.onConfigUpdated(e);const t=this.getFieldValue();if(this.hideCurrentLocale=this.getFieldInstanceProp("hideCurrentLocale"),e.value===t){const e=this.getFieldInstanceProp("valueByLocale");e[this.rxLocalizationService.currentLocale]=t,this.setFieldInstanceProp("valueByLocale",e)}}shouldShowValidationError(){return this.isRequired&&!this.formControl.value&&(this.formControl.touched||this.formControl.dirty)}selectLocalizedValue(){const e=this.getFieldInstanceProp("valueByLocale");this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.title"),data:{fieldDefinition:this.fieldDefinition,valueByLocale:(0,u.cloneDeep)(e),hideCurrentLocale:this.hideCurrentLocale},size:"sm",content:l.LocalizedCharacterFieldValueModalComponent}).then(e=>{e&&this.setLocalizedFieldValue(e.valueByLocale,e.currentLocaleValue)}).catch(u.noop)}setLocalizedFieldValue(e,t){const i=this.rxLocalizationService.currentLocale,n=t||e[i]||e["en-US"],o=this.getFieldInstanceProp("valueByLocale");(0,u.isEqual)(e,o)||(this.setFieldInstanceProp("valueByLocale",e),this.formControl.markAsDirty(),this.recordEditorApi.markAsDirty()),this.setFieldValue(n)}}Rc.\u0275fac=function(e){return new(e||Rc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](s.RxLocalizationService))},Rc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Rc,selectors:[["rx-localized-character-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[1,"d-flex","justify-content-between"],[3,"label","id","showRequiredLabel"],["type","button",1,"localize-button","btn","btn-link","focusable","d-icon-left-pencil","p-0",3,"disabled","click"],[1,"mb-0",3,"readonly","formControl","disabledStyleForReadonlyState","required"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,vi,2,2,"ng-container",0),n["\u0275\u0275template"](1,yi,6,15,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxControlLabelComponent,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.FormControlDirective,x.RequiredValidator],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.localize-button[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]     .form-control-feedback{color:#f83200}[_nghost-%COMP%]     .has-danger .form-control{border-color:#f83200!important}']});class wc{}wc.\u0275fac=function(e){return new(e||wc)},wc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wc,declarations:[Rc],imports:[f.CommonModule,x.FormsModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptTooltipModule,m.AdaptButtonModule,p.TranslateModule,m.AdaptBusyModule,S.RxBusyIndicatorModule,m.AdaptRxTextfieldModule,x.ReactiveFormsModule]}),wc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptTooltipModule,m.AdaptButtonModule,p.TranslateModule,m.AdaptBusyModule.forRoot(),S.RxBusyIndicatorModule,m.AdaptRxTextfieldModule,x.ReactiveFormsModule]]});class Ec extends Nl{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]}}class Fc{}Fc.\u0275fac=function(e){return new(e||Fc)},Fc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fc,selectors:[["rx-localized-character-field-design"]],inputs:{model:"model"},decls:5,vars:7,consts:[["type","button",1,"btn","float-end","p-0","btn-link","d-icon-left-pencil"],["ngModel","",1,"rx-pointer-events-none",3,"label","required","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275text"](1,"Localize"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](2,"adapt-rx-textfield",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](3,3,t.model.label$))("required",n["\u0275\u0275pipeBind1"](4,5,t.model.isRequired$))("disabled",!0))},directives:[m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator],pipes:[f.AsyncPipe],encapsulation:2});class Mc{}Mc.\u0275fac=function(e){return new(e||Mc)},Mc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mc,declarations:[Fc],imports:[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]}),Mc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxTextfieldModule,x.FormsModule]]});class Tc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.LocalizedCharacter,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Rc),properties:Fl,name:"Localized text",icon:"field_text_mapmarker",group:Ml,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Fc),designComponentModel:Ec,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Tc.\u0275fac=function(e){return new(e||Tc)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Tc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Tc,imports:[wc,Mc]}),Tc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[wc,Mc]]});class Oc{}var Nc,Ac;Oc.\u0275fac=function(e){return new(e||Oc)},Oc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Oc,imports:[Ol,Ll,Ql,id,dd,gd,Cd,Nd,tc,Gd,Qd,lc,yc,Tc,Ic],exports:[Ol,Ll,Ql,id,dd,gd,Cd,Nd,tc,Gd,Qd,lc,yc,Tc,Ic]}),Oc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ol,Ll,Ql,id,dd,gd,Cd,Nd,tc,Gd,Qd,lc,yc,Tc,Ic],Ol,Ll,Ql,id,dd,gd,Cd,Nd,tc,Gd,Qd,lc,yc,Tc,Ic]}),function(e){e.Xsmall="450",e.Small="650",e.Medium="800",e.Large="1024",e.Xlarge="1200",e.Xxlarge="1600"}(Nc||(Nc={})),function(e){e.Default="false",e.Left="Left",e.Right="Right",e.Center="Center"}(Ac||(Ac={}));const Pc=[{name:"visible",defaultValue:!0,label:"Visible"},{name:"sortable",defaultValue:!0,label:"Sortable",tooltip:new s.Tooltip("Sorting will be disabled for character fields longer than 4000 characters.")},{name:"filterable",defaultValue:!0,label:"Filterable"},{name:"searchable",label:"Searchable",defaultValue:!0},{name:"width",label:"",defaultValue:null,options:{label:"Width",defaultUnit:"px",units:[{name:"pixels",id:"px"},{name:"percent",id:"%"}],stepperOptionByUnits:{px:{minValue:1},"%":{minValue:1,maxValue:100}}}},{name:"wrapText",defaultValue:!1,label:"Wrap text"},{name:"alignment",defaultValue:!1,label:"Alignment",selectionValues:[{name:"Align left",value:Ac.Left,icon:"d-icon-align_left_adapt"},{name:"Center",value:Ac.Center,icon:"d-icon-align_center_adapt"},{name:"Align right",value:Ac.Right,icon:"d-icon-align_right_adapt"}]},{name:"typeaheadKeystrokeCount",label:"",defaultValue:1,options:{label:"Typeahead keystroke count",options:[{id:0,name:"0"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"}],emptyOption:!1}}],jc={type:"rx-record-grid",version:"1.0",defaultColumnMinWidth:45,defaultRowHeight:37,components:{filter:"rx-record-grid-filter",column:"rx-record-grid-column",filterPreset:"rx-record-grid-filter-preset",viewPreset:"rx-record-grid-view-preset",columnViewPreset:"rx-record-grid-column-view-preset"},columnAlignment:{left:"Left",right:"Right",center:"Center"},selectionTypes:{multiple:"multiple",single:"single"},userPreferences:{filters:"filters",columns:"columns"},cardLayoutWidthOptions:[{id:Nc.Xsmall,name:"Extra Small (450px)"},{id:Nc.Small,name:"Small (650px)"},{id:Nc.Medium,name:"Medium (800px)"},{id:Nc.Large,name:"Large (1024px)"},{id:Nc.Xlarge,name:"Extra Large (1200px)"},{id:Nc.Xxlarge,name:"Extra Extra Large (1600px)"}],actionsColumnProperties:[{name:"visible",defaultValue:!0,label:"Visible"}],columnProperties:Pc,sharedFilterPresets:{recordDefinitionName:"Record Grid Filter Presets",fields:{recordGridGuid:300000001,name:300000002,filterExpression:300000003,sortOrder:300000004,isDefault:300000005}},defaultFilter:"{}",associatedFieldIdPrefixPattern:d.RX_EXPRESSION_EVALUATOR.associatedFieldIdPrefixPattern,defaultPageSize:50,rowActionsOutletName:"ROW_ACTIONS",actionsColumnFieldDefinition:{name:"Actions",id:"$ACTIONS$"},numberOfFiltersOptions:[{id:0,name:"None"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"}],defaultTypeaheadKeystrokeCount:1,externalPresetFilterOptionId:"$EXTERNAL_PRESET$"};class _c{constructor(e,t,i,n,o){this.rxLogService=e,this.rxRecordDefinitionCacheService=t,this.stringService=i,this.rxDefinitionNameService=n,this.rxFieldDefinitionService=o}getColumnDescriptors(e,t){return this.rxRecordDefinitionCacheService.getRecordDefinition(e).toPromise().then(e=>{if((0,u.isFunction)(t.getColumns)){const i=t.getColumns().map((e,t)=>({fieldId:e.field,index:t,title:e.header,fieldDefinition:e.fieldDefinition}));return Promise.all(i.filter(e=>this.isAssociatedRecordFieldId(e.fieldId)).map(t=>this.getAssociationDescriptor(t.fieldId,e).toPromise().then(e=>{t.associationDescriptor=e}))).then((0,u.constant)(i))}return e.fieldDefinitions.map((e,t)=>({fieldId:e.id,index:t,title:e.name,fieldDefinition:e}))})}getAssociationDescriptors(e){return(0,o.forkJoin)([this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e),this.rxRecordDefinitionCacheService.getRecordDefinition(e)]).pipe((0,r.map)(([t,i])=>{const n=[];return(0,u.forEach)(t[e],t=>{const o=t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value;t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value||(this.isNeedSide(t.nodeBId,e,i)&&n.push({associationDefinition:t,recordDefinitionName:t.nodeAId,nodeSide:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,label:this.getAssociationLabel(t,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA)}),this.isNeedSide(t.nodeAId,e,i)&&!o&&n.push({associationDefinition:t,recordDefinitionName:t.nodeBId,nodeSide:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,label:this.getAssociationLabel(t,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB)}))}),(0,u.sortBy)(n,"label")}))}getFieldDefinition(e,t){const i=this.getFieldLocator(e),n=new o.AsyncSubject;let a;return i.fieldId===jc.actionsColumnFieldDefinition.id?(0,o.of)(jc.actionsColumnFieldDefinition):(a=i.associationGuid?this.getAssociationDescriptors(t.name).pipe((0,r.map)(e=>this.findAssociationDescriptor(e,i)),(0,r.filter)(e=>Boolean(e)),(0,r.map)(e=>e.associationDefinition[C.RX_ASSOCIATED_RECORD_NODE_SIDES[e.nodeSide].recordDefinitionNameKey]),(0,r.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))).toPromise():Promise.resolve(t),a.then(e=>{let t;e&&(t=(0,u.find)(e.fieldDefinitions,{id:Number(i.fieldId)||i.fieldId})),n.next(t),n.complete()}),n)}isAssociatedRecordFieldId(e){return!(0,u.some)(this.getFieldLocator(e),u.isUndefined)}getFieldIdForGridColumn(e,t){return t?`recordContext._associations.${t.associationDefinition.guid}.${t.nodeSide}[0].${e}`:String(e)}getAssociationDescriptor(e,t){const i=this.getFieldLocator(e);let n=(0,o.of)(null);return i.associationGuid&&(n=this.getAssociationDescriptors(t.name).pipe((0,r.map)(e=>this.findAssociationDescriptor(e,i)))),n}getDisplayFieldDescriptor(e,t,i){const n=this.getFieldLocator(e);return this.isAssociatedRecordFieldId(e)?this.rxRecordDefinitionCacheService.getRecordDefinition(i).pipe((0,r.map)(e=>{const t=n.fieldId===String(a.RX_RECORD_DEFINITION.coreFieldIds.id),i=String(t&&e.displayFieldIdInAssociation||n.fieldId);return(0,u.find)(e.fieldDefinitions,e=>String(e.id)===i)})):(0,o.of)((0,u.find)(t.fieldDefinitions,t=>String(t.id)===e))}getColumnLabel(e,t){return t?`${t.label} > ${e.name}`:e.name}findAssociationDescriptor(e,t){return(0,u.find)(e,e=>e.associationDefinition.guid===t.associationGuid&&e.nodeSide===t.associationNodeSide)}getFieldLocator(e){const t=new RegExp("(?:"+jc.associatedFieldIdPrefixPattern+")?(.+)").exec(e);return{associationGuid:t[1],associationNodeSide:t[2],fieldId:t[3]}}isNeedSide(e,t,i){return(0,u.includes)([t,(0,u.get)(i,"inheritanceDescriptor.inheritingFrom")],e)}getAssociationLabel(e,t){let i,n=this.rxDefinitionNameService.getDisplayName(e.name);return e.nodeAId===e.nodeBId&&(t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA&&(i=e.nodeAName),t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB&&(i=e.nodeBName),i=i||t.defaultName,n+=" ("+i+")"),n}isSharedFilterPresetTag(e){return e.data.isSharedFilterPreset}getTestIdForGridColumn(e){if(this.isAssociatedRecordFieldId(e)){const t=this.getFieldLocator(e);return`field-id-${t.associationGuid}-${t.fieldId}`}return`field-id-${e}`}isSearchable(e,t){return(0,u.includes)([a.RX_RECORD_DEFINITION.dataTypes.character.resourceType,a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType,a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType],e.resourceType)&&!this.rxFieldDefinitionService.isPassword(e)&&!this.rxFieldDefinitionService.isSecured(e)&&!this.rxFieldDefinitionService.isDataProviderIdField(e,t)}}var Vc,kc,Bc,$c;_c.\u0275fac=function(e){return new(e||_c)(n["\u0275\u0275inject"](s.RxLogService),n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](a.RxFieldDefinitionService))},_c.\u0275prov=n["\u0275\u0275defineInjectable"]({token:_c,factory:_c.\u0275fac,providedIn:"root"}),function(e){e.Asc="asc",e.Desc="desc"}(Vc||(Vc={}));class Lc{constructor(e){this.rxJsonParserService=e}parseConfigString(e){return!!e&&(!!(0,u.includes)(["1","true"],e)||!(0,u.includes)(["0","false"],e)&&((0,u.isString)(e)?this.rxJsonParserService.tryParseJson(e,!1):((0,u.isObject)(e)||!!(0,u.isBoolean)(e))&&e))}getBooleanValue(e){return this.parseConfigString(e)}getColumnSortOrder(e){return e===Vc.Asc?T.SortOrder.Asc:T.SortOrder.Desc}getColumnSortDirection(e){return e===T.SortOrder.Asc?Vc.Asc:Vc.Desc}configDeepClone(e){const t=(0,u.cloneDeep)((0,u.omit)(e,["columns"])),i=this.columnsDeepClone(e.columns);return(0,u.assign)(t,{columns:i})}columnsDeepClone(e){return(0,u.map)(e,this.columnDeepClone)}columnDeepClone(e){const t=(0,u.cloneDeep)((0,u.omit)(e,["cellTemplate"]));return(0,u.assign)(t,{cellTemplate:e.cellTemplate})}}Lc.\u0275fac=function(e){return new(e||Lc)(n["\u0275\u0275inject"](v.RxJsonParserService))},Lc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Lc,factory:Lc.\u0275fac,providedIn:"root"});class Gc{trackByForAlignmentOptions(e,t){return t||e}}Gc.\u0275fac=function(e){return new(e||Gc)},Gc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Gc,selectors:[["rx-column-editor-alignment"]],inputs:{column:"column",isReadOnly:"isReadOnly",columnProperty:"columnProperty"},decls:2,vars:2,consts:[["data-toggle","buttons",1,"btn-group","py-2","btn-group-toggle"],[3,"class","active","disabled","adaptTooltip",4,"ngFor","ngForOf","ngForTrackBy"],[3,"adaptTooltip"],["size","small","type","radio","name","selectionValue.name",3,"value","ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,bi,2,13,"label",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.columnProperty.selectionValues)("ngForTrackBy",t.trackByForAlignmentOptions))},directives:[f.NgForOf,m.AdaptTooltipDirective,x.RadioControlValueAccessor,x.DefaultValueAccessor,x.NgControlStatus,x.NgModel],styles:[".alignment-field[_ngcontent-%COMP%]{min-width:140px}"]}),function(e){e.Small="small",e.Large="large"}(kc||(kc={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Active="active",e.Info="info",e.Success="success",e.Warning="warning",e.Danger="danger"}(Bc||(Bc={})),function(e){e.Left="left",e.Right="right",e.ReplaceText="replaceText"}($c||($c={}));const zc={[Bc.Primary]:"text-primary",[Bc.Secondary]:"text-secondary",[Bc.Light]:"text-white",[Bc.Active]:"text-active",[Bc.Info]:"text-info",[Bc.Success]:"text-success",[Bc.Warning]:"text-warning",[Bc.Danger]:"text-danger"},Uc={[Bc.Primary]:"bg-primary",[Bc.Secondary]:"bg-secondary",[Bc.Active]:"bg-active",[Bc.Info]:"bg-info",[Bc.Success]:"bg-success",[Bc.Warning]:"bg-warning",[Bc.Danger]:"bg-danger"},qc={colorsList:[{label:"Default",value:null},{label:"Primary",value:Bc.Primary},{label:"Secondary",value:Bc.Secondary},{label:"Light",value:Bc.Light},{label:"Active",value:Bc.Active},{label:"Information",value:Bc.Info},{label:"Success",value:Bc.Success},{label:"Warning",value:Bc.Warning},{label:"Danger",value:Bc.Danger}],iconPositions:[{label:"Left",value:$c.Left},{label:"Right",value:$c.Right},{label:"Replace text",value:$c.ReplaceText}],fontSizes:[{label:"Default",value:null},{label:"Small",value:kc.Small},{label:"Large",value:kc.Large}]};class Xc extends s.RxExpressionConfigurator{cellDisplayExpressionDataDictionary(e){return e.length?(0,o.of)(e.map(e=>({label:e.label,icon:"d-icon-field_text",expression:`\${view.components.grid.clickableRow.${e.fieldId}}`,resourceType:e.fieldDefinition.resourceType}))):(0,o.of)([])}}class Wc extends S.RxModalClass{constructor(e,t,i,n,r){super(e,r),this.activeModalRef=e,this.rxExpressionEditorService=t,this.formBuilder=i,this.translateService=n,this.injector=r,this.destroyed$=new o.ReplaySubject(1),this.config=this.activeModalRef.getData(),this.propsFormArray=this.formBuilder.array([]),this.iconPositions=qc.iconPositions,this.textColors=qc.colorsList,this.fontSizes=qc.fontSizes,this.colorsList=Uc,this.backgroundColors=qc.colorsList.filter(e=>e.value!==Bc.Light),this.badgeColors=qc.colorsList.filter(e=>![Bc.Light,Bc.Active,null].includes(e.value)),this.iconPickerOptions={label:"Icon",appendToBody:!0,required:!1}}ngOnInit(){super.ngOnInit(),this.expressionConfigurator=new Xc,this.expressionConfigurator.configureForProperty({propertyPath:"cellDisplayProperties",dataDictionary$:this.expressionConfigurator.cellDisplayExpressionDataDictionary(this.config.columns),operators:this.expressionConfigurator.getOperatorRowsByGroup(s.ExpressionOperatorGroup.AllClient)}),this.queryExpressionOptions={label:"Field value condition",dataDictionary$:this.expressionConfigurator.getDataDictionary("cellDisplayProperties"),operators:this.expressionConfigurator.getOperators("cellDisplayProperties"),isRequired:!0},(0,u.forEach)(this.config.cellDisplayProperties,e=>this.propsFormArray.push(this.getFormGroup(e)))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}addCellProperties(){this.markAsDirty(),this.propsFormArray.push(this.getFormGroup({fieldValueCondition:"",displayAsBadge:!1,badgeColor:null,icon:null,iconPosition:null,textColor:null,backgroundColor:null,fontSize:null,bold:!1,italic:!1,isOpen:!0})),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeCellProperties(e){this.propsFormArray.removeAt(e),this.markAsDirty()}optionFormatter(e){return e.label}getFormGroup(e){var t;const i=this.formBuilder.group({fieldValueCondition:[e.fieldValueCondition,x.Validators.required],displayAsBadge:[e.displayAsBadge],badgeColor:{value:this.getSelectValue(this.badgeColors,"value",e.badgeColor),disabled:!e.displayAsBadge},icon:{value:e.icon,disabled:e.displayAsBadge},iconPosition:{value:this.getSelectValue(this.iconPositions,"value",e.iconPosition),disabled:!e.icon},textColor:{value:this.getSelectValue(this.textColors,"value",e.textColor),disabled:e.displayAsBadge},backgroundColor:{value:this.getSelectValue(this.backgroundColors,"value",e.backgroundColor),disabled:e.displayAsBadge},fontSize:{value:this.getSelectValue(this.fontSizes,"value",e.fontSize),disabled:e.displayAsBadge},bold:[e.bold],italic:[e.italic],isOpen:[null!==(t=e.isOpen)&&void 0!==t&&t]});return i.controls.displayAsBadge.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e&&i.controls.badgeColor.disabled&&i.controls.badgeColor.reset({value:[this.badgeColors[0]],disabled:!1}),!e&&i.controls.badgeColor.enabled&&i.controls.badgeColor.reset({value:[],disabled:!0})}),i.controls.icon.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e&&i.controls.iconPosition.disabled&&i.controls.iconPosition.reset({value:[this.iconPositions[0]],disabled:!1}),!e&&i.controls.iconPosition.enabled&&i.controls.iconPosition.reset({value:[],disabled:!0})}),i}getSelectValue(e,t,i){const n=e.find(e=>e[t]===i);return n?[n]:[]}openExpressionEditor(e){this.rxExpressionEditorService.openEditor({property:{path:"cellDisplayProperties",value:e.value,label:"Cell display properties"},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.column.label"),icon:"d-icon-field_text"}]}).subscribe(t=>{e.setValue(t.value),this.markAsDirty()})}moveCellProperties(e,t){(0,b.moveItemInArray)(this.propsFormArray.controls,e,t),this.markAsDirty()}onSelectedCellPropertyDrop(e){(0,b.moveItemInArray)(this.propsFormArray.controls,e.previousIndex,e.currentIndex),this.markAsDirty()}toggleProp(e){e.setValue(!e.value),this.markAsDirty()}toggleOpen(e){this.propsFormArray.controls.forEach(t=>{t.get("isOpen").setValue(e)})}resetIconAndTextProps(e){const t=e.get("displayAsBadge").value;e.get("icon").reset({value:null,disabled:t}),e.get("textColor").reset({value:[this.textColors[0]],disabled:t}),e.get("backgroundColor").reset({value:[this.backgroundColors[0]],disabled:t}),e.get("fontSize").reset({value:[this.fontSizes[0]],disabled:t}),e.get("bold").reset({value:!1,disabled:t}),e.get("italic").reset({value:!1,disabled:t})}onSave(){const e=this.propsFormArray.getRawValue().map(e=>Object.assign(Object.assign({},e),{icon:(0,u.get)(e,"icon",null),badgeColor:(0,u.get)(e,"badgeColor[0].value",null),iconPosition:(0,u.get)(e,"iconPosition[0].value",null),textColor:(0,u.get)(e,"textColor[0].value",null),backgroundColor:(0,u.get)(e,"backgroundColor[0].value",null),fontSize:(0,u.get)(e,"fontSize[0].value",null)})).map(e=>Object.assign({},(0,u.omit)(e,"isOpen")));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Wc.\u0275fac=function(e){return new(e||Wc)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](x.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](n.Injector))},Wc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wc,selectors:[["rx-cell-display-properties-editor"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:10,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","pl-0 pr-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["adaptPopover","Cell display properties will be applied based on the first field value condition evaluating to true.","placement","bottom","appendToBody","true",1,"d-icon-right-question_circle_o","ml-1","mt-1"],["class","btn-group",4,"ngIf"],["id","selected-cell-property","class","designer-modal-accordion-wrapper","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["optionTemplate",""],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"pl-0","pr-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["id","selected-cell-property","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"formGroup","isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[1,"row"],["formControlName","fieldValueCondition","rx-id","query-expression-field",1,"form-group","d-block","col-12",3,"options","events"],[1,"row","form-group"],[1,"col-3"],[3,"label"],["formControlName","displayAsBadge",3,"disabled","ngModelChange"],["formControlName","badgeColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","icon",1,"d-block","col-3",3,"disabled","options","ngModelChange"],["formControlName","iconPosition",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","ngModelChange"],["formControlName","textColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","backgroundColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","fontSize",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","ngModelChange"],[1,"col-3","pt-4","d-flex","align-item-center"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-secondary","d-icon-bold_adapt",3,"ngClass"],["type","checkbox","name","fontStyle",3,"disabled","click"],[1,"btn","btn-secondary","ml-2","d-icon-italic_adapt",3,"ngClass"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","grid",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],[1,"d-flex","align-items-center"],[3,"ngClass"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div"),n["\u0275\u0275template"](5,xi,4,3,"button",4),n["\u0275\u0275element"](6,"span",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Ci,7,6,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,wi,3,2,"div",7),n["\u0275\u0275template"](9,Ei,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",9),n["\u0275\u0275template"](11,Fi,3,4,"button",10),n["\u0275\u0275elementStart"](12,"button",11),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](16,Mi,3,2,"ng-template",null,12,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.propsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.propsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.propsFormArray.controls.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](14,6,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](15,8,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,m.AdaptPopoverDirective,m.AdaptButtonComponent,b.CdkDropList,m.AdaptAccordionComponent,f.NgForOf,b.CdkDrag,m.AdaptAccordionTabComponent,x.NgControlStatusGroup,x.FormGroupDirective,l.ExpressionFormControlComponent,x.NgControlStatus,x.FormControlName,m.AdaptRxControlLabelComponent,m.AdaptRxSwitchComponent,m.AdaptRxSelectComponent,l.IconPickerFormControlComponent,f.NgClass,b.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}.color-option-box[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px}']});class Hc extends l.ValueAccessor{constructor(e){super(),this.rxModalService=e}openPropertiesEditor(){this.rxModalService.openModal({title:`Edit cell display properties for ${this.columnName}`,data:{cellDisplayProperties:this.value?(0,u.cloneDeep)(this.value):[],isReadOnly:this.isDisabled,columns:this.columns},content:Wc,size:d.OpenViewActionModalSize.Large,testID:"edit-cell-display-properties"}).then(e=>{this.value=e}).catch(u.noop)}}Hc.\u0275fac=function(e){return new(e||Hc)(n["\u0275\u0275directiveInject"](S.RxModalService))},Hc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hc,selectors:[["rx-cell-display-properties"]],inputs:{columnName:"columnName",columns:"columns"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:Hc,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:2,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0",3,"click"],["name","plus_circle",1,"mr-1"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],[1,"text-tertiary"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openPropertiesEditor()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit cell display properties\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275template"](4,Ti,2,0,"span",3),n["\u0275\u0275template"](5,Oi,2,0,"span",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!(null!=t.value&&t.value.length)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(null==t.value?null:t.value.length)>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,f.NgIf],encapsulation:2});const Qc={keywords:{label:"Keywords",children:[{label:"Current user",icon:"d-icon-dollar",expression:"$USER$"},{label:"Current date",icon:"d-icon-dollar",expression:"$DATE$"},{label:"Current time",icon:"d-icon-dollar",expression:"$TIME$"},{label:"Current date and time",icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:"Current week day",icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:"Current groups",icon:"d-icon-dollar",expression:"$GROUPS$"},{label:"Current group IDs",icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:"Current roles",icon:"d-icon-dollar",expression:"$ROLES$"},{label:"Current user locale",icon:"d-icon-dollar",expression:"$LOCALE$"},{label:"Current server URL",icon:"d-icon-dollar",expression:"$SERVERURL$"},{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$",hidden:!0}]}};class Kc extends c.RxViewExpressionConfigurator{constructor(e,t,i,n){super(e),this.injector=e,this.activeModalRef=t,this.rxViewDataDictionaryService=i,this.rxDefaultExpressionEvaluatorService=n,this.commonDataDictionary$=this.rxViewDataDictionaryService.commonDataDictionary$.pipe((0,r.map)(e=>[{expression:`'${this.activeModalRef.getData().column.fieldId}'`,icon:"d-icon-file_o_gear",label:this.activeModalRef.getData().column.title},Qc.keywords,...e.slice(2)]))}getExpressionEvaluator(){return this.rxDefaultExpressionEvaluatorService}}Kc.\u0275fac=function(e){return new(e||Kc)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](m.ActiveModalRef),n["\u0275\u0275inject"](c.RxViewDataDictionaryService),n["\u0275\u0275inject"](d.RxDefaultExpressionEvaluatorService))},Kc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Kc,factory:Kc.\u0275fac});class Jc extends S.RxModalClass{constructor(e,t,i,n,o,r,a){super(e,a),this.activeModalRef=e,this.rxGuidService=t,this.rxExpressionEditorService=i,this.formBuilder=n,this.translateService=o,this.expressionConfigurator=r,this.config=this.activeModalRef.getData(),this.namedFilterOptionsFormArray=this.formBuilder.array([]),this.accordionTabs={}}ngOnInit(){super.ngOnInit(),this.expressionConfigurator.configureForProperty({propertyPath:"namedFilterOptions",operators:s.ExpressionOperatorRowsByGroup.get(s.ExpressionOperatorGroup.All)}),this.queryExpressionOptions={label:"Filter",dataDictionary$:this.expressionConfigurator.getDataDictionary("namedFilterOptions"),operators:this.expressionConfigurator.getOperators("namedFilterOptions"),isRequired:!0},(0,u.forEach)(this.config.namedFilterOptions,(e,t)=>{this.accordionTabs[e.guid]=t===this.config.activeIndex,this.namedFilterOptionsFormArray.push(this.getFormGroup(e))}),this.config.isReadOnly&&this.namedFilterOptionsFormArray.disable()}ngAfterViewInit(){this.config.activeIndex&&this.accordionTabEls.toArray()[this.config.activeIndex].nativeElement.scrollIntoView({block:"nearest"})}addNamedFilterOption(){this.markAsDirty();const e=this.rxGuidService.generate();this.accordionTabs[e]=!0;let t="New filter option",i=0,n=!1;const o=(0,u.map)(this.namedFilterOptionsFormArray.getRawValue(),"title");do{t=0===i?t:`New filter option ${i}`,i++,n=(0,u.includes)(o,t)}while(n);this.namedFilterOptionsFormArray.push(this.getFormGroup({data:{title:t,filterExpression:"",index:this.namedFilterOptionsFormArray.length},guid:e})),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeNamedFilterOption(e){this.namedFilterOptionsFormArray.removeAt(e),this.markAsDirty()}openExpressionEditor(e,t){this.rxExpressionEditorService.openEditor({property:{path:"namedFilterOptions",value:t.value,label:e.value},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"}]}).subscribe(e=>{t.setValue(e.value),this.markAsDirty()})}moveNamedFilterOption(e,t){(0,b.moveItemInArray)(this.namedFilterOptionsFormArray.controls,e,t),this.markAsDirty()}onSelectedNamedFilterOptionDrop(e){(0,b.moveItemInArray)(this.namedFilterOptionsFormArray.controls,e.previousIndex,e.currentIndex),this.markAsDirty()}onSave(){const e=this.namedFilterOptionsFormArray.getRawValue().map(({guid:e,title:t,filterExpression:i},n)=>({guid:e,data:{title:t,filterExpression:i,index:n}}));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}toggleOpen(e){(0,u.forEach)(this.accordionTabs,(t,i)=>{this.accordionTabs[i]=e})}getCheckTitleDuplicateValidator(e){return t=>{const i=t.value;return i&&this.namedFilterOptionsFormArray.controls.some(t=>t.value.title===i&&t.value.guid!==e.guid)?{duplicateFilterOptionName:{message:"Filter option with this name already exists."}}:null}}getFormGroup(e){return this.formBuilder.group({guid:e.guid,title:[e.data.title,[x.Validators.required,this.getCheckTitleDuplicateValidator(e).bind(this),e=>{var t;return(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.includes(";"))?{invalidName:{message:"A filter option name cannot contain any of the following characters: ;"}}:null}]],filterExpression:[e.data.filterExpression,x.Validators.required]})}}Jc.\u0275fac=function(e){return new(e||Jc)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](x.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](Kc),n["\u0275\u0275directiveInject"](n.Injector))},Jc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jc,selectors:[["rx-named-filter-options-editor-modal"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275ProvidersFeature"]([Kc]),n["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:10,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],["class","designer-modal-accordion-wrapper","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"formGroup","isOpen"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["rx-id","filter-option-name-field","formControlName","title","rxNoWhitespace","",1,"form-group","d-block",3,"label","required","ngModelChange"],["formControlName","filterExpression","rx-id","query-expression-field",3,"options","required","events","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,Ni,4,3,"button",4),n["\u0275\u0275template"](5,Ai,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,Vi,3,2,"div",6),n["\u0275\u0275template"](7,ki,3,3,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",8),n["\u0275\u0275template"](9,Bi,3,4,"button",9),n["\u0275\u0275elementStart"](10,"button",10),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](12,6,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](13,8,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,m.AdaptButtonComponent,b.CdkDropList,m.AdaptAccordionComponent,f.NgForOf,b.CdkDrag,m.AdaptAccordionTabComponent,x.NgControlStatusGroup,x.FormGroupDirective,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.FormControlName,v.RxNoWhitespaceValidator,x.RequiredValidator,l.ExpressionFormControlComponent,b.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:[$i]});class Yc extends l.ValueAccessor{constructor(e){super(),this.rxModalService=e}openNamedFilterOptions(e){this.rxModalService.openModal({title:`Edit named filter options for ${this.column.title}`,data:{namedFilterOptions:this.value?(0,u.cloneDeep)(this.value):[],isReadOnly:this.isDisabled,activeIndex:e,column:this.column},content:Jc,size:d.OpenViewActionModalSize.Large,testID:"edit-named-filter-options"}).then(e=>{this.value=e}).catch(u.noop)}editNamedFilterOption(e){this.openNamedFilterOptions(e)}removeFilterOption(e){this.value=(0,u.without)(this.value,e)}}Yc.\u0275fac=function(e){return new(e||Yc)(n["\u0275\u0275directiveInject"](S.RxModalService))},Yc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Yc,selectors:[["rx-named-filter-options"]],inputs:{column:"column",tooltip:"tooltip"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:Yc,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0","pb-1",3,"click"],["name","plus_circle",1,"mr-1"],["class","align-middle",4,"ngIf"],["rx-id","named-filter-options"],["class","text-tertiary",4,"ngIf"],["class","list-unstyled mb-0",4,"ngIf"],[1,"align-middle"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],[1,"text-tertiary"],[1,"list-unstyled","mb-0"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto","text-break"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","edit-button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openNamedFilterOptions()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit named filter options\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Li,3,2,"span",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,Gi,2,0,"div",4),n["\u0275\u0275template"](6,qi,2,1,"ul",5),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.tooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!(null!=t.value&&t.value.length)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(null==t.value?null:t.value.length)>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,f.NgIf,m.AdaptPopoverDirective,f.NgForOf],encapsulation:2});class Zc extends S.RxModalClass{constructor(e,t,i,n,o,r,a,l,d,c,p){super(e,d),this.activeModalRef=e,this.rxModalService=t,this.definitionNameService=i,this.rxRecordGridUtilsService=n,this.rxFieldDefinitionService=o,this.rxRecordDefinitionCacheService=r,this.rxGuidService=a,this.ngZone=l,this.injector=d,this.translateService=c,this.rxExpressionEditorService=p,this.columnProperties=jc.columnProperties,this.actionsColumnProperties=jc.actionsColumnProperties,this.filteredColumns=[],this.availableColumnsTree=[],this.startedLoadingAssociationDescriptors=!1,this.treeWrap=m.TreeWrap.WrapAll,this.columnWidthPropertyOptions=this.columnProperties.find(({name:e})=>"width"===e).options,this.typeaheadKeystrokeCountOptions=Object.assign(Object.assign({},this.columnProperties.find(({name:e})=>"typeaheadKeystrokeCount"===e).options),{tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-column.keystroke-count.tooltip"))});const f=this.activeModalRef.getData().columnParams;this.activeColumn=f.activeColumn,this.activeActionIndex=f.activeActionIndex,this.recordDefinition=f.recordDefinition,this.isReadOnly=f.isReadOnly,this.columns=f.columns.map(e=>{const t=e.fieldDefinition.namedListDefinition?this.getAdditionalQueryCriteriaExpressionOptions(e):null;return Object.assign(Object.assign({},e),{isOpen:e===this.activeColumn,label:this.rxRecordGridUtilsService.getColumnLabel(e.fieldDefinition,e.associationDescriptor),clickable:!(0,u.isEmpty)(e.actions),additionalQueryCriteriaExpressionOptions:t})}).sort((e,t)=>e.index-t.index),this.getAvailableColumnsTree()}ngAfterViewInit(){this.updateSelectedColumnsDropList(),this.openActiveAction();const e=(0,u.findIndex)(this.columns,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}isActionsColumn(e){return e===jc.actionsColumnFieldDefinition.id}updateSelectedColumnsDropList(){this.updateColumnsDropList(this.draggableSelectedColumns,this.selectedColumnsDropList)}updateAssociatedAvailableColumnsDropList(){this.updateColumnsDropList(this.draggableAssociatedAvailableColumns,this.associatedAvailableColumnsDropList)}updateColumnsDropList(e,t){const i=e.toArray(),n=this.columns;i.sort((e,t)=>n.indexOf(e.data)-n.indexOf(t.data)),t._dropListRef.withItems(i.map(e=>{const i=e._dragRef;return i._initialContainer||(i._initialContainer=t._dropListRef),e._dragRef}))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}onDropInSelectedColumnsContainer(e){e.previousContainer!==e.container&&this.isColumnEditorAvailableColumn(e.item.data)?this.addColumn(e.item.data,e.currentIndex):e.previousIndex!==e.currentIndex&&this.moveColumn(e.previousIndex,e.currentIndex)}onColumnCheckboxPropertyChange(e,t,i){"filterable"===i.name&&t.fieldDefinition.namedListDefinition&&(e?t.typeaheadKeystrokeCount=jc.defaultTypeaheadKeystrokeCount:(t.typeaheadKeystrokeCount=null,t.additionalQueryCriteria=null)),this.markAsDirty()}onColumnDragStarted(){this.updateSelectedColumnsDropList()}onAssociatedAvailableColumnsDragStarted(){this.onColumnDragStarted(),this.updateAssociatedAvailableColumnsDropList()}isColumnEditorAvailableColumn(e){return Boolean(e.fieldDefinitionName)}moveColumn(e,t){this.markAsDirty(),(0,b.moveItemInArray)(this.columns,e,t),this.updateColumnIndexes()}removeColumn(e){this.markAsDirty();const t=this.columns[e];this.columns.splice(e,1);const i=t.associationDescriptor?this.getAssociatedAvailableColumnsNode(t.associationDescriptor.label):this.availableColumnsTree[0];i&&i.data.allAvailableColumns&&(i.data.allAvailableColumns.push(this.getColumnMetadata(t.fieldDefinition,t.associationDescriptor)),this.updateAvailableColumnsTree())}getAssociatedAvailableColumnsNode(e){return this.availableColumnsTree.find(t=>t.data.associationDescriptor&&t.data.associationDescriptor.label===e)}getAvailableColumnsTree(){const e={children:null,leaf:!1,expanded:!0,expandedIcon:"d-icon-file_text",collapsedIcon:"d-icon-file_text",label:this.definitionNameService.getDisplayName(this.recordDefinition.name),key:this.definitionNameService.getDisplayName(this.recordDefinition.name),data:{allAvailableColumns:null}};this.startedLoadingAssociationDescriptors||(this.startedLoadingAssociationDescriptors=!0,this.rxRecordGridUtilsService.getAssociationDescriptors(this.recordDefinition.name).subscribe(t=>{(t=t.slice()).sort((e,t)=>e.label.localeCompare(t.label)),this.availableColumnsTree=t.map(e=>({children:null,leaf:!1,expandedIcon:"d-icon-arrow_schema",collapsedIcon:"d-icon-arrow_schema",label:e.label,key:e.associationDefinition.name,data:{associationDescriptor:e,allAvailableColumns:null}})),this.availableColumnsTree.unshift(e),this.availableColumnsTree.forEach(e=>{this.onNodeExpand({node:e})})}))}updateAvailableColumnsTree(){this.availableColumnsTree.forEach(e=>{const t=e.data.allAvailableColumns;if(t){const i=this.sortAvailableColumns(t),n=e.data.associationDescriptor?e.data.associationDescriptor.associationDefinition.name:this.recordDefinition.name;e.children=i.map(e=>({children:null,leaf:!0,label:e.fieldDefinitionName,key:`${n}-${e.fieldDefinition.id}`,data:{availableColumn:e}}))}})}onNodeExpand({node:e}){const t=e.data.associationDescriptor;t&&!e.data.allAvailableColumns?(e.data.allAvailableColumns=[],this.rxRecordDefinitionCacheService.getRecordDefinition(t.recordDefinitionName).subscribe(i=>{e.data.allAvailableColumns=this.getAvailableColumns(i,t),this.updateAvailableColumnsTree()})):t||(e.data.allAvailableColumns=this.getAvailableColumns(this.recordDefinition),this.updateAvailableColumnsTree())}addColumn(e,t){if(this.markAsDirty(),!(0,u.find)(this.columns,t=>t.fieldId===e.fieldId)){const i=e.fieldDefinition.namedListDefinition?this.getAdditionalQueryCriteriaExpressionOptions(e):null,n=Object.assign(Object.assign({},this.getColumnEditorColumnData(e)),{additionalQueryCriteriaExpressionOptions:i});(0,u.isNil)(t)?this.columns.push(n):this.columns.splice(t,0,n),this.updateColumnIndexes(),this.removeFromAvailableColumns(e),setTimeout(()=>{this.accordionTabEls.toArray()[null!=t?t:this.columns.length-1].nativeElement.scrollIntoView()})}}getColumnEditorColumnData(e){const t={guid:this.rxGuidService.generate(),label:e.label,fieldId:e.fieldId,associationDescriptor:e.associationDescriptor,fieldDefinition:e.fieldDefinition,actions:[],title:e.fieldDefinitionName,isOpen:!0};return(0,u.forEach)(jc.columnProperties,i=>{"sortable"===i.name?t.sortable=e.isSortable:"searchable"===i.name?t.searchable=this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.recordDefinition):t[i.name]=i.defaultValue}),t}removeFromAvailableColumns(e){if(e.associationDescriptor){const t=this.getAssociatedAvailableColumnsNode(e.associationDescriptor.label);(0,u.remove)(t.data.allAvailableColumns,e)}else(0,u.remove)(this.availableColumnsTree[0].data.allAvailableColumns,e);this.updateAvailableColumnsTree()}sortAvailableColumns(e){return this.filteredColumns=e.sort((e,t)=>e.fieldDefinitionName.localeCompare(t.fieldDefinitionName)),this.filteredColumns}getAvailableColumns(e,t){return e.fieldDefinitions.map(e=>this.getColumnMetadata(e,t)).filter(e=>!(0,u.find)(this.columns,t=>t.fieldId===e.fieldId))}getColumnMetadata(e,t){return{fieldDefinitionName:e.name,label:this.rxRecordGridUtilsService.getColumnLabel(e,t),fieldId:this.rxRecordGridUtilsService.getFieldIdForGridColumn(e.id,t),isSortable:this.rxFieldDefinitionService.isSortable(e),associationDescriptor:t,fieldDefinition:e}}saveChanges(){const e={columns:this.columns.map(e=>{const t=e.filterable&&e.fieldDefinition.namedListDefinition;return{actions:e.actions,alignment:e.alignment,fieldId:e.fieldId,filterable:e.filterable,filterType:e.filterType,guid:e.guid,index:e.index,sortable:e.sortable,searchable:e.searchable,title:e.title,visible:e.visible,associationDescriptor:e.associationDescriptor,fieldDefinition:e.fieldDefinition,cellDisplayProperties:e.cellDisplayProperties,namedFilterOptions:e.namedFilterOptions,width:e.width,wrapText:e.wrapText,typeaheadKeystrokeCount:t?e.typeaheadKeystrokeCount:null,additionalQueryCriteria:t?e.additionalQueryCriteria:null}})};this.activeModalRef.close(e)}trackByForColumns(e,t){return t.fieldId}trackByForColumnProperties(e,t){return t.name}isPropertyEditable(e,t){return"searchable"===t?!this.isReadOnly&&this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.recordDefinition):!this.isReadOnly}updateColumnIndexes(){this.columns.forEach((e,t)=>{e.index=t})}openActiveAction(){this.activeColumn&&this.activeActionIndex>=0&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const e=this.actionListControlComponents.find(e=>e.value===this.activeColumn.actions);e&&e.focus({actionIndex:this.activeActionIndex})})})}isTreeEmpty(){return(0,u.every)(this.availableColumnsTree,e=>0===e.data.allAvailableColumns.length)}openAdditionalQueryCriteriaExpressionEditor(e,t){const i=new c.NamedListFilterExpressionConfigurator(e.fieldDefinition,this.injector);this.rxExpressionEditorService.openEditor({property:{path:"additionalQueryCriteria",value:e.additionalQueryCriteria,label:"Additional named list filter"},isReadOnly:this.isReadOnly,expressionConfigurator:i,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(i=>{e.additionalQueryCriteria=i.value,t.value=i.value,t.onWriteValue(i.value),this.markAsDirty()})}getAdditionalQueryCriteriaExpressionOptions(e){const t=new c.NamedListFilterExpressionConfigurator(e.fieldDefinition,this.injector);return{label:"Additional named list filter",tooltip:new s.Tooltip("Build a filter to apply at runtime in addition to the filter, if any, specified in the named list definition."),dataDictionary$:t.getDataDictionary(),operators:t.getOperators()}}}Zc.\u0275fac=function(e){return new(e||Zc)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](s.RxDefinitionNameService),n["\u0275\u0275directiveInject"](_c),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService))},Zc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zc,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Xi,5,b.CdkDropList),n["\u0275\u0275viewQuery"](Wi,5,b.CdkDropList),n["\u0275\u0275viewQuery"](Hi,5,b.CdkDrag),n["\u0275\u0275viewQuery"](Qi,5,b.CdkDrag),n["\u0275\u0275viewQuery"](c.ActionListControlComponent,5),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectedColumnsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.associatedAvailableColumnsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableSelectedColumns=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableAssociatedAvailableColumns=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponents=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:16,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"mt-2"],["id","selectedColumnsDropList","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],["selectedColumnsDropList","cdkDropList"],[3,"multiselect",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],[1,"card-block","d-flex","flex-column"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo",4,"ngIf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo"],["associatedAvailableColumnsDropList","cdkDropList"],["filter","true",3,"value","wrap","onNodeExpand"],["adaptTreeNodeTemplate",""],[3,"title",4,"ngIf"],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData","cdkDragStarted",4,"ngIf"],[3,"title"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData","cdkDragStarted"],["draggableAssociatedAvailableColumn",""],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled","cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled","cdkDragStarted"],["draggableSelectedColumn",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[4,"ngIf"],["dataColumnEditorTemplate",""],["actionsColumnEditorTemplate",""],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["class","d-icon-left-cross_adapt p-1 pr-4 ml-3","adapt-button","","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"rx-record-grid-column-editor-text-field",3,"label","disabled","ngModel","ngModelChange"],[1,"d-flex","flex-wrap"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-row"],[1,"d-block","col-5","p-0",3,"options","ngModel","ngModelChange"],["class","d-block col-5 p-0 pb-2 pl-5",3,"options","ngModel","disabled","ngModelChange",4,"ngIf"],["rx-id","additional-query-criteria-expression","class","d-block p-0 pb-2",3,"options","ngModel","disabled","ngModelChange","events",4,"ngIf"],[1,"d-block","pb-2",3,"columns","columnName","disabled","ngModel","ngModelChange"],[1,"d-block","pb-2",3,"column","disabled","ngModel","tooltip","ngModelChange"],[1,"d-block",3,"disabled","ngModel","tooltip","ngModelChange"],["class","checkbox rx-record-grid-column-editor__checkbox-field",4,"ngIf"],["class","flex-fill","ngDefaultControl","",3,"isReadOnly","column","columnProperty","ngModel","ngModelChange",4,"ngIf"],[1,"checkbox","rx-record-grid-column-editor__checkbox-field"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],[1,"checkbox__item"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],["ngDefaultControl","",1,"flex-fill",3,"isReadOnly","column","columnProperty","ngModel","ngModelChange"],[1,"d-block","col-5","p-0","pb-2","pl-5",3,"options","ngModel","disabled","ngModelChange"],["rx-id","additional-query-criteria-expression",1,"d-block","p-0","pb-2",3,"options","ngModel","disabled","ngModelChange","events"],["additionalQueryCriteriaExpression",""],[1,"rx-record-grid-column-editor-text-field","d-block","form-group",3,"label","disabled","ngModel","ngModelChange"],["class","checkbox rx-record-grid-column-editor__checkbox-field",4,"ngFor","ngForOf","ngForTrackBy"],["type","grid",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,nn,9,5,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"h4",4),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",5,6),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedColumnsContainer(e)}),n["\u0275\u0275template"](10,xn,2,3,"adapt-accordion",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Cn,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",9),n["\u0275\u0275template"](13,Sn,3,4,"button",10),n["\u0275\u0275elementStart"](14,"button",11),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,10,"com.bmc.arsys.rx.client.view-components.record-grid-column.selected-columns.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("cdkDropListData",t.columns),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.columns.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.columns.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](16,12,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,b.CdkDropList,m.AdaptButtonComponent,m.AdaptTreeComponent,m.AdaptTreeNodeTemplateDirective,b.CdkDrag,m.AdaptEmptyStateComponent,m.AdaptAccordionComponent,f.NgForOf,m.AdaptAccordionTabComponent,b.CdkDragHandle,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,l.StepperWithUnitsFormControlComponent,Hc,Yc,c.ActionListControlComponent,x.CheckboxControlValueAccessor,m.AdaptIconComponent,m.AdaptPopoverDirective,Gc,x.DefaultValueAccessor,l.SelectFormControlComponent,l.ExpressionFormControlComponent],pipes:[p.TranslatePipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content{position:relative}.designer-modal-accordion-content.cdk-drag-preview{z-index:1200!important}.designer-modal-drag-handle{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content{width:100%;display:flex}.designer-modal-card-title-content .left-header-block,.designer-modal-card-title-content .right-header-block{display:flex;align-items:center}.designer-modal-card-title-content .left-header-block{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons{display:flex;font-size:19px}.rx-card{overflow:auto}.rx-tree-draggable-node{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview{z-index:1200!important}.rx-tree-draggable-node.cdk-drag{opacity:1}.rx-tree-node-label{word-break:break-all}rx-form-builder{max-width:400px}.rx-record-grid-column-editor__checkbox-field{flex-basis:20%;min-width:140px}.rx-record-grid-column-editor__checkbox-field+.rx-record-grid-column-editor__checkbox-field{margin-top:calc(.5rem + 1px)!important}\n'],encapsulation:2,changeDetection:0});class ep extends l.ValueAccessor{constructor(e,t,i,n){super(),this.rxModalService=e,this.rxFieldDefinitionService=t,this.rxRecordGridConfigUtilsService=i,this.rxRecordGridUtilsService=n,this.updateColumnsSubject=new o.BehaviorSubject([]),this.columns$=this.updateColumnsSubject.pipe((0,r.switchMap)(e=>(0,o.forkJoin)(e.map(e=>(0,o.forkJoin)([this.rxRecordGridUtilsService.getAssociationDescriptor(e.fieldId,this.options.recordDefinition),this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.options.recordDefinition)]).pipe((0,r.map)(([t,i])=>({associationDescriptor:t,fieldDefinition:i,inspectorColumn:e}))))).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.map(e=>{var t;return Object.assign(Object.assign({},e.inspectorColumn),{fieldDefinition:e.fieldDefinition,associationDescriptor:e.associationDescriptor,title:null===(t=e.inspectorColumn.title)||void 0===t?void 0:t.trim(),searchable:(0,u.has)(e.inspectorColumn,"searchable")?this.rxRecordGridConfigUtilsService.getBooleanValue(e.inspectorColumn.searchable):e.inspectorColumn.filterable&&this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.options.recordDefinition),fallbackTitle:`[${e.fieldDefinition.name}]`})})),(0,r.shareReplay)(1))))}ngOnChanges(e){var t;(null===(t=e.options)||void 0===t?void 0:t.previousValue)&&e.options.currentValue.recordDefinition.name!==e.options.previousValue.recordDefinition.name&&this.updateColumnsSubject.next(this.value)}onWriteValue(e){this.updateColumnsSubject.next(e)}removeColumn(e){this.updateValue(this.value.filter(t=>t.fieldId!==e.fieldId))}updateValue(e){this.value=e,this.onWriteValue(e)}openEditor(e,t){this.columns$.pipe((0,r.take)(1)).subscribe(i=>{const n={isReadOnly:this.isDisabled,columns:i,activeColumn:i.find(t=>t.guid===e),recordDefinition:this.options.recordDefinition,activeActionIndex:t};this.rxModalService.openModal({title:"Edit grid columns",content:Zc,data:{columnParams:n},size:d.OpenViewActionModalSize.Large,testID:"edit-grid-columns"}).then(e=>{e&&e.columns&&this.updateValue(e.columns)}).catch(u.noop)})}focus(e){this.openEditor(null==e?void 0:e.columnGuid,null==e?void 0:e.actionIndex)}getColumnResourceTypeName(e){const t=a.RX_RECORD_DEFINITION.resourceTypesByFullName[e.fieldDefinition.resourceType];return(0,u.get)(a.RX_RECORD_DEFINITION.dataTypes[t],"displayName","")}getSortedColumns(e){return e.sort((e,t)=>e.index-t.index)}trackByForColumns(e,t){return t.fieldId}isActionsColumn(e){return e===jc.actionsColumnFieldDefinition.id}ngOnDestroy(){this.updateColumnsSubject.complete()}}var tp,ip,np,op;ep.\u0275fac=function(e){return new(e||ep)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](Lc),n["\u0275\u0275directiveInject"](_c))},ep.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ep,selectors:[["rx-record-grid-column-editor"]],inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:ep,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:3,consts:[["btn-type","tertiary","rx-id","open-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[4,"ngIf"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],["class","rx-selected-column",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-tertiary"],[1,"rx-selected-column"],[1,"rx-selected-column__header-container"],["rx-id","card-title",1,"rx-selected-column__header-title",3,"ngClass","title"],["type","button","class","rx-button-unstyled d-icon-left-pencil btn-link","rx-id","open-editor",3,"click",4,"ngIf"],["type","button","class","rx-button-unstyled d-icon-cross btn-link","rx-id","remove-column",3,"click",4,"ngIf"],["rx-id","column-type",1,"rx-column-type"],["type","button","rx-id","open-editor",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-column",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openEditor()}),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275text"](2," Edit grid columns\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Mn,4,3,"div",2),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,1,t.columns$)))},directives:[m.AdaptButtonComponent,f.NgIf,f.NgForOf,f.NgClass],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-column[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-column__header-container[_ngcontent-%COMP%]{display:flex;margin-bottom:5px}.rx-selected-column__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;font-size:14px}.rx-column-type[_ngcontent-%COMP%]{color:#959899;font-size:10px;overflow:hidden;text-overflow:ellipsis}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']}),function(e){e.And="AND",e.Or="OR"}(tp||(tp={}));class rp{constructor(e,t=[]){this.namedOptions=[],this.filterValue=e,Array.isArray(t)&&(this.namedOptions=t)}get length(){return(Array.isArray(this.filterValue)?this.filterValue.length:(0,u.isNil)(this.filterValue)?0:1)+this.namedOptions.length}static isEmpty(e){return e instanceof rp&&!e.length}static isEmptyWithRange(e){return e instanceof rp&&!e.namedOptions.length&&m.AdvancedFilterDataTypesConfigsService.isEmptyOnEmptyValues(e.filterValue)}}class ap{constructor(e,t,i,n,o,r){this.rxRecordDefinitionService=e,this.rxObjectUtilsService=t,this.rxRecordGridUtilsService=i,this.rxNamedListService=n,this.advancedFilterDataTypesConfigsService=o,this.adaptTranslateService=r,this.translation=this.adaptTranslateService.getCurrentLanguage(),this.adaptTexts={fromLabel:this.translation["adapt.advancedFilter.configsTexts.fromLabel"],toLabel:this.translation["adapt.advancedFilter.configsTexts.toLabel"],trueLabel:this.translation["adapt.advancedFilter.configsTexts.trueLabel"],falseLabel:this.translation["adapt.advancedFilter.configsTexts.falseLabel"],blankLabel:this.translation["adapt.advancedFilter.configsTexts.blankLabel"],validationErrors:{invalidRangeName:this.translation["adapt.advancedFilter.validationErrors.invalidRangeName"],invalidRangeText:this.translation["adapt.advancedFilter.validationErrors.invalidRangeText"],numberTypeTexts:{fromValueMustBeNumber:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.fromValueMustBeNumber"],toValueMustBeNumber:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.toValueMustBeNumber"],invalidBetweenMinAndMax:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidBetweenMinAndMax"],invalidMinValue:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidMinValue"],invalidMaxValue:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidMaxValue"]}}},this.defaultConfig=this.advancedFilterDataTypesConfigsService.getConfigs(this.adaptTexts)}addAssociationFieldsToFieldDefinitionsById(e,t,i){return t.forEach(t=>{i.find(e=>e.name===t.recordDefinitionName).fieldDefinitions.forEach(i=>{const n=this.rxRecordGridUtilsService.getFieldIdForGridColumn(i.id,t);e[n]||this.rxRecordDefinitionService.addFieldDefinitionToMap(i,e,n)})}),e=Object.assign(Object.assign({},e),this.rxObjectUtilsService.expandProperties(e))}getAdvancedFilterOption(e,t,i,n,o,r,s,l,d,c){const p={id:e,label:t,dataType:n.filterOptionDataType,isHidden:o,data:(0,u.isFunction)(n.getDataForAdvancedFilter)?n.getDataForAdvancedFilter(i,e):null};if(l=null!=l?l:[],n.filterOptionDataType===m.AdvancedFilterOptionDataType.boolean&&(p.inputsTemplate=i.fieldOption!==a.RecordFieldOption.Required?r.optionalBooleanFilter:r.requiredBooleanFilter,p.customConfig={getExpressionFieldTips:e=>{const t=e.data,i=(null==t?void 0:t.selectOptions)||[];return this.getNamedFilterOptionTips(l,e,p.customConfig).concat(i.map(t=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp([t.id]),e,p.customConfig,!1,(0,m.formatAdvancedFilterTagText)(e,t.name))))},formatValueForTag:(e,t)=>{const i=t.data,n=(null==i?void 0:i.selectOptions)||[],o=e.filterValue.map(e=>n.find(t=>t.id===e).name);return this.buildTagLabel(o,this.getNamedOptionTitles(e,l))},needRemoveTagValue:e=>rp.isEmpty(e),updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e,i.data.isRequired),parseTagFieldExpression:(e,t)=>{const i=m.AdvancedFilterDataTypesConfigsService.getExpressionRawValues(e,t),n=this.getFilterValueFromString(l,i),o=e.data,r=(null==o?void 0:o.selectOptions)||[];return n.filterValue=n.filterValue.map(e=>{var t;e=e.trim().toLowerCase();const i=r.find(t=>t.name.toLowerCase()===e);return null!==(t=null==i?void 0:i.id)&&void 0!==t?t:null}).filter(e=>!(0,u.isNil)(e))||[],n.length?{value:n}:null}}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.string&&(i.namedListDefinition?(p.inputsTemplate=r.inputsForStringWithTypeAheadTemplate,p.data=Object.assign(Object.assign({},p.data),{typeaheadKeystrokeCount:d,additionalQueryCriteria:c})):p.inputsTemplate=r.inputsForStringTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmpty(e),formatValueForTag:(e,t)=>this.buildTagLabel(e.filterValue,this.getNamedOptionTitles(e,l)),getExpressionFieldTips:(e,t)=>[...this.getNamedFilterOptionTips(l,e,p.customConfig),m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp,e,p.customConfig,!0,(0,m.formatAdvancedFilterTagText)(e,""))],updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e),parseTagFieldExpression:(e,t)=>this.parseStringTagFieldExpression(e,t,l)}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.selection&&(p.inputsTemplate=r.inputsForSelectionTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmpty(e),formatValueForTag:(e,t)=>{const i=this.defaultConfig[n.filterOptionDataType].formatValueForTag(e.filterValue,t);return this.buildTagLabel(i,this.getNamedOptionTitles(e,l))},getExpressionFieldTips:(e,t)=>{const i=e.data,n=i&&i.selectOptions||[];return this.getNamedFilterOptionTips(l,e,p.customConfig).concat(n.map(t=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp([t.id]),e,p.customConfig,!1,(0,m.formatAdvancedFilterTagText)(e,t.name))))},updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e),parseTagFieldExpression:(e,t)=>this.parseStringTagFieldExpression(e,t,l)}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.datetime&&(p.inputsTemplate=r.inputsForDatetimeTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.datetime,"ll LTS")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.date&&(p.inputsTemplate=r.inputsForDateTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.date,"ll")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.time&&(p.inputsTemplate=r.inputsForTimeTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.time,"LTS")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.number&&(p.inputsTemplate=r.inputsForNumberTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmptyWithRange(e),getExpressionFieldTips:(e,t)=>this.getNamedFilterOptionTips(l,e,p.customConfig,[null,null]).concat(this.defaultConfig[n.filterOptionDataType].getExpressionFieldTips(e,t)),updateFilterValue:(e,t,i)=>(e.filterValue=this.defaultConfig[n.filterOptionDataType].updateFilterValue(e.filterValue,t.filterValue,i),e.namedOptions=(0,u.uniq)(t.namedOptions.concat(e.namedOptions)),e),formatValueForTag:e=>{const t=e.filterValue.filter(e=>null!=e).join(" - ");return this.buildTagLabel(t,this.getNamedOptionTitles(e,l))},parseTagFieldExpression:(e,t)=>{var i,o;const{value:r,label:a}=this.getExpressionRawValues(e,t);if(!r)return null;const s=this.getFilterValueFromString(l,r);return s.filterValue=null!==(o=null===(i=this.defaultConfig[n.filterOptionDataType].parseTagFieldExpression(e,`${a} ${s.filterValue[0]}`))||void 0===i?void 0:i.value)&&void 0!==o?o:[],s.length?{value:s}:null},validateValue:(e,t)=>this.defaultConfig[n.filterOptionDataType].validateValue(e.filterValue,t)}),s){const e={getTagText:(e,t,i)=>`${s}: ${i}`};p.customConfig=Object.assign(Object.assign({},p.customConfig),e)}return p}parseStringTagFieldExpression(e,t,i){const n=m.AdvancedFilterDataTypesConfigsService.getExpressionRawValues(e,t);if(!n)return null;const o=this.getFilterValueFromString(i,n);return o.length?{value:o}:null}updateFilterValue(e,t,i=!1){return i||(t.filterValue=(0,u.uniq)(e.filterValue.concat(t.filterValue))),t.namedOptions=(0,u.uniq)(e.namedOptions.concat(t.namedOptions)),t}buildTagLabel(e,t,i=", ",n="; "){return[(0,u.isString)(e)?e:(0,u.isArray)(e)&&!(0,u.isEmpty)(e)?this.rxNamedListService.isNamedListOption(e[0])?e.map(e=>{var t;return null!==(t=e.displayValue)&&void 0!==t?t:e.value}).join(i):e.join(i):"",...t].filter(Boolean).join(n)}getNamedOptionTitles(e,t){const i=t.map(e=>e.guid);return e.namedOptions.sort((e,t)=>i.indexOf(e)-i.indexOf(t)).map(e=>{var i;return null===(i=t.find(t=>t.guid===e))||void 0===i?void 0:i.title})}getDatetimeCustomConfig(e,t,i,n){return{getExpressionFieldTips:(n,o)=>this.getNamedFilterOptionTips(e,n,t.customConfig).concat(this.defaultConfig[i].getExpressionFieldTips(n,o)),needRemoveTagValue:e=>rp.isEmptyWithRange(e),formatValueForTag:t=>{const i=t.filterValue.filter(e=>e).map(e=>(0,I.default)(e).format(n)).join(" - ");return this.buildTagLabel(i,this.getNamedOptionTitles(t,e))},updateFilterValue:(e,t,n)=>(e.filterValue=this.defaultConfig[i].updateFilterValue(e.filterValue,t.filterValue,n),e.namedOptions=(0,u.uniq)(t.namedOptions.concat(e.namedOptions)),e),parseTagFieldExpression:(t,n)=>{var o,r;const{value:a}=this.getExpressionRawValues(t,n);if(!a)return null;const s=this.getFilterValueFromString(e,a),[l]=n.split("; ");return s.filterValue=null!==(r=null===(o=this.defaultConfig[i].parseTagFieldExpression(t,l))||void 0===o?void 0:o.value)&&void 0!==r?r:[],s.length?{value:s}:null},validateValue:(e,t)=>this.defaultConfig[i].validateValue(e.filterValue,t)}}getExpressionRawValues(e,t){return[`${e.label}:`,`${e.label} ${this.adaptTexts.fromLabel}`,`${e.label} ${this.adaptTexts.toLabel}`].reduce((e,i)=>(t.startsWith(i)&&(e.label=i,e.value=t.replace(i,"").trim()),e),{label:null,value:null})}getFilterValueFromString(e,t){const i=(null!=t?t:"").trim().split(";").filter(e=>!(0,m.isEmptyOrWhitespace)(e)).map(e=>e.trim()),n=new rp([]);return i.forEach(t=>{var i;const o=null===(i=e.find(e=>e.title===t))||void 0===i?void 0:i.guid;o?n.namedOptions.push(o):n.filterValue.push(...t.split(",").map(e=>e.trim()).filter(Boolean))}),n.namedOptions=(0,u.uniq)(n.namedOptions),n}getNamedFilterOptionTips(e,t,i,n=[]){return(null!=e?e:[]).map(e=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp(n,[e.guid]),t,i,!1,(0,m.formatAdvancedFilterTagText)(t,e.title)))}}ap.\u0275fac=function(e){return new(e||ap)(n["\u0275\u0275inject"](a.RxRecordDefinitionService),n["\u0275\u0275inject"](v.RxObjectUtilsService),n["\u0275\u0275inject"](_c),n["\u0275\u0275inject"](F.RxNamedListService),n["\u0275\u0275inject"](m.AdvancedFilterDataTypesConfigsService),n["\u0275\u0275inject"](m.AdaptTranslateService))},ap.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ap,factory:ap.\u0275fac});class sp{constructor(e){this.rxJsonParserService=e,this.filtersKeywords=["$NULL$","$TIME$","$DATE$","$TIMESTAMP$","$USER$"]}getRecordGridFilterDataFromPredefinedFilter(e,t){return!(0,u.isEmpty)(t)&&e&&(e=this.normalizeFilterString(e,t)),this.clearFilterData(this.rxJsonParserService.tryParseJson(e))}normalizeFilterString(e,t){return(0,u.forEach)(t,t=>{const i=Object.assign({[t.fieldId]:t.value},t.$DISPLAYVALUE$&&{$DISPLAYVALUE$:t.$DISPLAYVALUE$});e=e.replace(`"${t.guid}"`,JSON.stringify(i))}),e}denormalizeFilterString(e,t){return(0,u.forEach)(t,t=>{const i=Object.assign({[t.fieldId]:t.value},t.$DISPLAYVALUE$&&{$DISPLAYVALUE$:t.$DISPLAYVALUE$});e=i.$DISPLAYVALUE$?JSON.stringify(JSON.parse(e),this.replacer(this.denormalize(t.guid,i))):e.replace(JSON.stringify(i),`"${t.guid}"`)}),e}replacer(e){return(t,i)=>"string"==typeof t&&e[t]?e[t](i):i}denormalize(e,t){return(0,u.reduce)(d.RecordGridFilterOperator,(i,n)=>(i[n]=i=>(0,u.isEqual)(i,t)?e:i,i),{})}clearFilterData(e){const t=(0,u.keys)(e);let i=e;if(!(0,u.isEmpty)(t)){const n=t[0];switch(!0){case(0,u.includes)(["or","and"],n):{const t=e[n].map(this.clearFilterData.bind(this)).filter(e=>Boolean(e));(0,u.isEmpty)(t)?i=null:e[n]=t;break}case(0,u.isString)(e[n]):i=null}}return i}replaceKeywords(e){const t='([^|^"])"('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"(?!")',i='([^|^"])"""('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"""(?!")',n=new RegExp(t,"g"),o=new RegExp(i,"g");return e.replace(n,"$1$2").replace(o,'$1"$2"')}}sp.\u0275fac=function(e){return new(e||sp)(n["\u0275\u0275inject"](v.RxJsonParserService))},sp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:sp,factory:sp.\u0275fac,providedIn:"root"});class lp{constructor(e,t,i,n,o,r,a){this.rxStringService=e,this.rxRecordGridUtilsService=t,this.rxJsonParserService=i,this.rxRecordGridAdvancedFilteringService=n,this.rxRecordDefinitionService=o,this.rxObjectUtilsService=r,this.rxRecordGridFilterHelperService=a,this.filtersKeywords=["$NULL$","$TIME$","$DATE$","$TIMESTAMP$","$USER$"]}clearFilterData(e){const t=(0,u.keys)(e);let i=e;if(!(0,u.isEmpty)(t)){const n=t[0];switch(!0){case(0,u.includes)(["or","and"],n):{const t=e[n].map(this.clearFilterData.bind(this)).filter(e=>Boolean(e));(0,u.isEmpty)(t)?i=null:e[n]=t;break}case(0,u.isString)(e[n]):i=null}}return i}getFilterForAvailableColumns(e,t){const i=(0,u.keys)(e);let n=e;if(!(0,u.isEmpty)(i)){const o=i[0],r=Object.keys(e[o])[0];switch(!0){case(0,u.includes)(["or","and"],o):{const i=e[o].map(e=>this.getFilterForAvailableColumns(e,t)).filter(e=>Boolean(e));(0,u.isEmpty)(i)?n=null:e[o]=i;break}case!(0,u.some)(t,{fieldId:r}):n=null;break;case(0,u.includes)(["eq"],o):{const i=(0,u.find)(t,{fieldId:r}).fieldDefinition;i.resourceType!==a.RX_RECORD_DEFINITION.resourceTypes.selection||(0,u.has)(i.optionNamesById,e[o][r])||(n=null);break}}}return n}replaceKeywords(e){const t='([^|^"])"('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"(?!")',i='([^|^"])"""('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"""(?!")',n=new RegExp(t,"g"),o=new RegExp(i,"g");return e.replace(n,"$1$2").replace(o,'$1"$2"')}generateTextFilterQuery(e,t){let i=null;if(e){const n=t.filter(e=>!e.hidden&&e.searchable).map(t=>{const i=this.getQueryFilterField(t.field);let n="";return t.filterType===a.RX_RECORD_DEFINITION.dataTypes.character.shortName||t.filterType===a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.shortName?n=`${i} LIKE "%${this.escapeDoubleQuotes(e).replace(/[%_]/g,"\\$&")}%"`:isNaN(e)||(n=`${i} = "${this.escapeDoubleQuotes(e)}"`),n}).filter(Boolean).join(" OR ");i=n?`(${n})`:""}return i}addQueries(...e){return(0,u.filter)(e,Boolean).join(" AND ")}joinQueryFilters(e,t){const i=e.join(t===tp.And?" AND ":" OR ");return i?`(${i})`:""}getAdvancedFilterData(e,t,i,n,a,s){return(0,o.forkJoin)(e&&e.and?e.and.map(e=>{const l=Object.keys(e)[0],d=e[l],c=(0,u.values)(d[0])[0],p=String(Object.keys(c)[0]);let m=t[p];return(m?(0,o.of)(m):this.rxRecordGridUtilsService.getFieldDefinition(p,n)).pipe((0,r.filter)(Boolean),(0,r.map)(e=>{m=e;const o=i[m.resourceType];if(!t[p]){this.rxRecordDefinitionService.addFieldDefinitionToMap(m,t,p),t=n.fieldDefinitionsById=Object.assign(Object.assign({},t),this.rxObjectUtilsService.expandProperties(t));const e=this.rxRecordGridUtilsService.findAssociationDescriptor(s,this.rxRecordGridUtilsService.getFieldLocator(p));a.push(this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(p,this.rxRecordGridUtilsService.getColumnLabel(m,e),m,o,!0))}return o.getSelectedAdvancedFilterData(l,d,m,p)}))}):[]).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.filter(Boolean)))}getQueryFromRecordGridFilterData(e,t){const i=[d.RecordGridFilterOperator.Eq,d.RecordGridFilterOperator.Like,d.RecordGridFilterOperator.Ne,d.RecordGridFilterOperator.Lt,d.RecordGridFilterOperator.Lte,d.RecordGridFilterOperator.Gt,d.RecordGridFilterOperator.Gte,d.RecordGridFilterOperator.In,"regex"],n=e=>(0,u.reduce)(e,(e,i,n)=>e+(0,u.reduce)(i,(e,i,o)=>{const r=t[o];let s=n,l=i;if(!!r&&(0,u.includes)([a.RX_RECORD_DEFINITION.dataTypes.character.resourceType,a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType],r.resourceType)){const{isLikeOperation:e,filterValue:t}=this.getStringDataTypeFilterData(i,r);s=e?d.RecordGridFilterOperator.Like:s,l=t}return"$DISPLAYVALUE$"===o?e:e+this.getQueryExpression(l,o,s)},""),"");let o=e=>(e=>(0,u.intersection)(i.slice(),(0,u.keys)(e)).length>0)(e)?n(e):(0,u.reduce)(e,(e,t,i)=>{const n=(0,u.map)(t,o);switch(i){case d.RecordGridFilterDataLogic.And:return e+`(${n.join(" AND ")})`;case d.RecordGridFilterDataLogic.Or:return e+`(${n.join(" OR ")})`;default:return e+`(${n.join(" AND ")})`}},"");return o=o.bind(this),o(e)}getSelectedFiltersFromPredefinedFilter(e,t,i,n,o,r,a){const s=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e,this.deserializeNamedOptions(t));return this.getAdvancedFilterData(s,i,n,o,r,a)}getRecordGridFilterDataFromAdvancedFilter(e,t,i,n){const o=e.map(e=>{let o=null;const r=String(e.filterOptionId),a=t[r];if(a){o=i[a.resourceType].getRecordGridFilterData(e.value,a,r,n&&n[r])}return o});return o.length?{and:o}:{}}getQueryFilterField(e){return this.rxRecordGridUtilsService.isAssociatedRecordFieldId(e)?`\${${e}}`:`'${e}'`}buildQueryFilter(e,t,i){const n=(0,u.isString)(i)&&!this.filtersKeywords.includes(i),o=(0,u.isString)(i)?n?`"${this.escapeDoubleQuotes(i)}"`:i:String(i);return`${this.getQueryFilterField(e)} ${t} ${o}`}filterRows(e,t,i,n){const o=this.getRecordGridFilterDataFromAdvancedFilter(t,i.fieldDefinitionsById,n);return e.filter(e=>e.groupField?(e.items=this.getFilteredItems(e.items,o,i),e.items.length):(0,u.every)(o.and,t=>this.matchRow(e,t,i)))}getFilteredItems(e,t,i){return(0,u.reduce)(e,(e,n)=>{let{items:o=[]}=n;return!n.items&&(0,u.every)(t.and,e=>this.matchRow(n,e,i))?e.push(n):(o=this.getFilteredItems(o,t,i),o.length&&e.push(Object.assign(Object.assign({},n),{items:o}))),e},[])}matchRow(e,t,i){const n=(0,u.findKey)(t);switch(n){case"and":return(0,u.every)(t[n],t=>this.checkCondition(e,t,i));case"or":return(0,u.some)(t[n],t=>this.checkCondition(e,t,i));default:return!1}}checkCondition(e,t,i){const n=(0,u.findKey)(t),o=(0,u.findKey)(t[n]),r=t[n][o],s=e[o];if(i.fieldDefinitionsById[o].resourceType!==a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType)return"eq"===n&&this.rxStringService.caseInsensitiveIsEqual(s,r);switch(n){case"eq":return(0,I.default)(s).isSame(r);case"lte":return(0,I.default)(s).isSameOrBefore(r);case"lt":return(0,I.default)(s).isBefore(r);case"gte":return(0,I.default)(s).isSameOrAfter(r);case"gt":return(0,I.default)(s).isAfter(r);default:return!1}}escapeDoubleQuotes(e){return e.replace(/"/g,'""')}getQueryExpression(e,t,i){const n=(0,u.isString)(e)?'"'+e+'"':e;switch(t=this.getQueryFilterField(t),i){case d.RecordGridFilterOperator.Eq:return t+"="+n;case d.RecordGridFilterOperator.Like:return t+" LIKE "+n;case d.RecordGridFilterOperator.Ne:return t+"!="+n;case d.RecordGridFilterOperator.Lt:return t+"<"+n;case d.RecordGridFilterOperator.Lte:return t+"<="+n;case d.RecordGridFilterOperator.Gt:return t+">"+n;case d.RecordGridFilterOperator.Gte:return t+">="+n;case d.RecordGridFilterOperator.In:return t+" IN "+n;default:return t+"="+n}}getStringDataTypeFilterData(e,t){let i=!1;if(!(0,u.get)(t.searchDefinition,"enableFTSSearch"))if((0,u.includes)(e,"%")){const t=e.split(/\\\\/);i=(0,u.some)(t,e=>e.replace(/\\%/g,"").match("%")),i||(e=(0,u.map)(t,e=>e.replace(/\\%/g,"%")).join("\\"))}else e=e.replace("\\\\","\\");return{isLikeOperation:i,filterValue:e}}clearRemovedNamedFilterOptions(e,t){return e.reduce((e,i)=>{var n,o;const r=null!==(o=null===(n=t[i.filterOptionId])||void 0===n?void 0:n.map(e=>e.guid))&&void 0!==o?o:[];return i.value.namedOptions=i.value.namedOptions.filter(e=>r.includes(e)),rp.isEmptyWithRange(i.value)||e.push(i),e},[])}deserializeNamedOptions(e){return e.map(e=>{const t=this.rxJsonParserService.tryParseJson(e.value);return t&&t[d.RecordGridNamedFilterOptionKey]?Object.assign(Object.assign({},e),{value:t}):e})}}lp.\u0275fac=function(e){return new(e||lp)(n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](_c),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](ap),n["\u0275\u0275inject"](a.RxRecordDefinitionService),n["\u0275\u0275inject"](v.RxObjectUtilsService),n["\u0275\u0275inject"](sp))},lp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:lp,factory:lp.\u0275fac});class dp{constructor(e,t,i,n,o,r,a){this.rxRecordGridFilterService=e,this.rxNumberUtilsService=t,this.rxNamedListService=i,this.translateService=n,this.rxRecordInstanceUtilsService=o,this.rxRecordGridUtilsService=r,this.rxDefinitionNameService=a,this.associatedFieldIdPatternRegExp=new RegExp(`'(${jc.associatedFieldIdPrefixPattern}\\d+)'`,"g")}getConfigs(){const e={filterOptionDataType:m.AdvancedFilterOptionDataType.string,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),r=(0,u.chain)(e.value.filterValue).filter(Boolean).map(e=>{const{isLikeOperation:n,filterValue:o}=this.rxRecordGridFilterService.getStringDataTypeFilterData((0,u.get)(e,"value",e),t);return this.rxRecordGridFilterService.buildQueryFilter(i,n?"like":"=",o.trim())}).concat(o).value();return this.rxRecordGridFilterService.joinQueryFilters(r,tp.Or)},getRecordGridFilterData:(e,t,i,n)=>{const o=this.getNamedFilterOptionsOperators(e,i);return{or:e.filterValue.map(e=>{const n=this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Eq,i,(0,u.get)(e,"value",e).trim()),o=(0,u.get)(e,"displayValue");return t.namedListDefinition&&o&&(n.eq.$DISPLAYVALUE$=o),n}).concat(o)}},getSelectedAdvancedFilterData:(e,t,i,n)=>{const o=[],r=[],a=[];e===d.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0],s=e[t][n];if((0,u.isString)(s))if(i.namedListDefinition){const i=e[t].$DISPLAYVALUE$;r.push({displayValue:i,value:s,title:"",contextualFields:[]})}else o.push(s);else s[d.RecordGridNamedFilterOptionKey]&&a.push(s[d.RecordGridNamedFilterOptionKey])});const s=(0,u.isEmpty)(r)?new rp(o,a):new rp(r,a);return{filterOptionId:n,value:s}},getToolbarTagInfo:({primaryRecordDefinition:e,value:t,tag:i,fieldId:n,namedFilterOptions:s})=>{const l=this.rxRecordGridUtilsService.getFieldLocator(n);let d;return this.rxRecordGridUtilsService.getAssociationDescriptor(n,e).pipe((0,r.mergeMap)(t=>(d=t,this.rxRecordGridUtilsService.getDisplayFieldDescriptor(n,e,d&&d.recordDefinitionName))),(0,r.mergeMap)(e=>{let n;if(l.fieldId!==String(e.id)){const i=this.rxNamedListService.getNamesFromTypeAheadOptions(t.filterValue);n=this.rxRecordInstanceUtilsService.getFieldValues(d.recordDefinitionName,i,[String(a.RX_RECORD_DEFINITION.coreFieldIds.id),String(e.id)]).pipe((0,r.map)(i=>{const n=(0,u.compact)([this.rxDefinitionNameService.getDisplayName(d.associationDefinition.name),e.name]).join(" > "),o=t.filterValue.map(t=>{const n=(0,u.find)(i,e=>e[a.RX_RECORD_DEFINITION.coreFieldIds.id]===t);return n?n[e.id]:t});return{displayValues:new rp(o),label:n}}))}else n=(0,o.of)({displayValues:t,label:i.data.filterOption.label});return n.pipe((0,r.map)(({displayValues:e,label:t})=>{const i=e.filterValue.map(e=>{var t,i;const n=(0,u.get)(e,"value",e),o=null!==(t=(0,u.get)(e,"displayValue"))&&void 0!==t?t:(0,u.get)(e,"value",e),r="$USER$"===n?this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.me.label"):o;return{tooltip:(null==e?void 0:e.displayValue)?`${e.displayValue} (${e.value})`:null!==(i=null==e?void 0:e.value)&&void 0!==i?i:e,text:r}}).concat(e.namedOptions.map(e=>{var t;const i=(null===(t=s.find(t=>t.guid===e))||void 0===t?void 0:t.title)||e;return{text:i,tooltip:i}}));return{text:`${t}: ${i.map(e=>e.text).join(", ")}`,tooltip:`${t}: ${i.map(e=>e.tooltip).join(", ")}`}}))}))},getDataForAdvancedFilter:e=>e},t={filterOptionDataType:m.AdvancedFilterOptionDataType.number,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue,s=[];this.rxNumberUtilsService.isFiniteOrNumberString(r)&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",String(r))),this.rxNumberUtilsService.isFiniteOrNumberString(a)&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",String(a)));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue,r=[];return this.rxNumberUtilsService.isFiniteOrNumberString(n)&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Gte,i,String(n))),this.rxNumberUtilsService.isFiniteOrNumberString(o)&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Lte,i,String(o))),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getDataForAdvancedFilter:e=>({minValue:e.minValue,maxValue:e.maxValue}),getSelectedAdvancedFilterData:(e,t,i,n)=>{let o=[null,null];const r=e=>{const t=(0,u.find)(e,e=>e[d.RecordGridFilterOperator.Gte]);if(t){const e=parseFloat(t[d.RecordGridFilterOperator.Gte][n]);this.rxNumberUtilsService.isFiniteOrNumberString(e)&&(o[0]=e)}const i=(0,u.find)(e,e=>e[d.RecordGridFilterOperator.Lte]);if(i){const e=parseFloat(i[d.RecordGridFilterOperator.Lte][n]);this.rxNumberUtilsService.isFiniteOrNumberString(e)&&(o[1]=e)}};if(e===d.RecordGridFilterDataLogic.And)r(t);else if(e===d.RecordGridFilterDataLogic.Or){const e=(0,u.find)(t,e=>e[d.RecordGridFilterDataLogic.And]);if(e)r(e[d.RecordGridFilterDataLogic.And]);else if(1===t.length){let e=t[0][d.RecordGridFilterOperator.Eq][n];"$NULL$"===e||e[d.RecordGridNamedFilterOptionKey]||(e=parseFloat(e),o=[e,e])}}const a=this.getNamedFilterOptionGuids(t,n);return{filterOptionId:n,value:new rp(o,a)}}};return{[a.RX_RECORD_DEFINITION.resourceTypes.character]:e,[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]:e,[a.RX_RECORD_DEFINITION.resourceTypes.attachment]:e,[a.RX_RECORD_DEFINITION.resourceTypes.integer]:t,[a.RX_RECORD_DEFINITION.resourceTypes.decimal]:t,[a.RX_RECORD_DEFINITION.resourceTypes.real]:t,[a.RX_RECORD_DEFINITION.resourceTypes.selection]:{filterOptionDataType:m.AdvancedFilterOptionDataType.selection,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e);return this.rxRecordGridFilterService.joinQueryFilters(e.value.filterValue.map(e=>this.rxRecordGridFilterService.buildQueryFilter(i,"=",e)).concat(o),tp.Or)},getDataForAdvancedFilter:e=>{const t=(0,u.map)(e.optionLabelsById,(e,t)=>({id:t,name:e}));return e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.optional&&t.unshift({id:"$NULL$",name:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.blank.label")}),{selectOptions:t,selectTexts:null}},getRecordGridFilterData:(e,t,i)=>{const n=this.getNamedFilterOptionsOperators(e,i);return{or:e.filterValue.map(e=>this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Eq,i,e)).concat(n)}},getSelectedAdvancedFilterData:(e,t,i,n)=>{const o=[],r=[];return e===d.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0];if(t===d.RecordGridFilterOperator.Eq){const i=e[t][n];(0,u.isString)(i)?o.push(i):i[d.RecordGridNamedFilterOptionKey]&&r.push(i[d.RecordGridNamedFilterOptionKey])}}),{filterOptionId:n,value:new rp(o,r)}}},[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]:{filterOptionDataType:m.AdvancedFilterOptionDataType.time,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];r&&r.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.format("HH:mm:ss"))),a&&a.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.format("HH:mm:ss")));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return n&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Gte,i,n&&n.isValid()?n.format("HH:mm:ss"):"")),o&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Lte,i,o&&o.isValid()?o.format("HH:mm:ss"):"")),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>{let o=[null,null];const r=e=>{const t=(0,u.find)(e,e=>e[d.RecordGridFilterOperator.Gte]);if(t){const e=(0,I.default)(t[d.RecordGridFilterOperator.Gte][n],"LTS");e.isValid()&&(o[0]=e)}const i=(0,u.find)(e,e=>e[d.RecordGridFilterOperator.Lte]);if(i){const e=(0,I.default)(i[d.RecordGridFilterOperator.Lte][n],"LTS");e.isValid()&&(o[1]=e)}};if(e===d.RecordGridFilterDataLogic.And)r(t);else if(e===d.RecordGridFilterDataLogic.Or){const e=(0,u.find)(t,e=>e[d.RecordGridFilterDataLogic.And]);if(e)r(e[d.RecordGridFilterDataLogic.And]);else if(1===t.length){let e=t[0][d.RecordGridFilterOperator.Eq][n];"$NULL$"===e||e[d.RecordGridNamedFilterOptionKey]||(e=(0,I.default)(e,"LTS"),o=[e,e])}}const a=this.getNamedFilterOptionGuids(t,n);return{filterOptionId:n,value:new rp(o,a)}}},[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]:{filterOptionDataType:m.AdvancedFilterOptionDataType.date,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];r&&r.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.format("YYYY-MM-DD"))),a&&a.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.format("YYYY-MM-DD")));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return n&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Gte,i,n&&n.isValid()?n.format("YYYY-MM-DD"):"")),o&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Lte,i,o&&o.isValid()?o.format("YYYY-MM-DD"):"")),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>this.getDateSelectedAdvancedFilterData(n,e,t)},[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]:{filterOptionDataType:m.AdvancedFilterOptionDataType.datetime,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];(null==r?void 0:r.isValid())&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.toISOString())),(null==a?void 0:a.isValid())&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.toISOString()));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return(null==n?void 0:n.isValid())&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Gte,i,n.toISOString())),(null==o?void 0:o.isValid())&&r.push(this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Lte,i,o.toISOString())),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>this.getDateSelectedAdvancedFilterData(n,e,t)},[a.RX_RECORD_DEFINITION.resourceTypes.boolean]:{filterOptionDataType:m.AdvancedFilterOptionDataType.boolean,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e);return this.rxRecordGridFilterService.joinQueryFilters((0,u.castArray)(e.value.filterValue).map(e=>this.rxRecordGridFilterService.buildQueryFilter(i,"=",this.getBooleanFilterValue(e))).concat(o),tp.Or)},getRecordGridFilterData:(e,t,i)=>({or:(0,u.castArray)(e.filterValue).map(e=>this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Eq,i,this.getBooleanFilterValue(e))).concat(this.getNamedFilterOptionsOperators(e,i))}),getDataForAdvancedFilter:e=>({selectOptions:[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.true"),id:!0},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.false"),id:!1},{name:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.blank.label"),id:"blank"}],isRequired:e.fieldOption===a.RecordFieldOption.Required}),getSelectedAdvancedFilterData:(e,t,i,n)=>{let o;if(i.fieldOption===a.RecordFieldOption.Required)if(1===t.length){const e=(0,u.find)(t,e=>e[d.RecordGridFilterOperator.Eq]);if(e){const t=e[d.RecordGridFilterOperator.Eq][n];o="$NULL$"===t?null:["true"===t]}}else o=null;else o=[],e===d.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0];if(t===d.RecordGridFilterOperator.Eq){const i=e[t][n];if(!i[d.RecordGridNamedFilterOptionKey])switch(i){case"true":o.push(!0);break;case"$NULL$":o.push(m.booleanDataTypeBlankValue);break;default:o.push(!1)}}});const r=this.getNamedFilterOptionGuids(t,n);return o?{filterOptionId:n,value:new rp(o,r)}:null}},[a.RX_RECORD_DEFINITION.resourceTypes.recordInstance]:null,[a.RX_RECORD_DEFINITION.resourceTypes.object]:null,[a.RX_RECORD_DEFINITION.resourceTypes.recordInstanceProcessVariable]:null,[a.RX_RECORD_DEFINITION.resourceTypes.localizedFieldInstance]:null}}getDateSelectedAdvancedFilterData(e,t,i){let n=[null,null];const o=t=>{const i=(0,u.find)(t,e=>e[d.RecordGridFilterOperator.Gte]);if(i){const t=(0,I.default)(i[d.RecordGridFilterOperator.Gte][e]);t.isValid()&&(n[0]=t)}const o=(0,u.find)(t,e=>e[d.RecordGridFilterOperator.Lte]);if(o){const t=(0,I.default)(o[d.RecordGridFilterOperator.Lte][e]);t.isValid()&&(n[1]=t)}};if(t===d.RecordGridFilterDataLogic.And)o(i);else if(t===d.RecordGridFilterDataLogic.Or){const t=(0,u.find)(i,e=>e[d.RecordGridFilterDataLogic.And]);if(t)o(t[d.RecordGridFilterDataLogic.And]);else if(1===i.length){let t=i[0][d.RecordGridFilterOperator.Eq][e];"$NULL$"===t||t[d.RecordGridNamedFilterOptionKey]||(t=(0,I.default)(t),n=[t,t])}}return{filterOptionId:e,value:new rp(n,this.getNamedFilterOptionGuids(i,e))}}getFilterRangeDataOperator(e,t){const i={and:e};return t.length?{or:e.length?t.concat(i):t}:i}getNamedFilterOptionGuids(e,t){return e.filter(e=>e[d.RecordGridFilterOperator.Eq]).map(e=>{const i=e[d.RecordGridFilterOperator.Eq][t];return i?i[d.RecordGridNamedFilterOptionKey]:null}).filter(e=>Boolean(e))}getSelectedNamedOptionExpressions(e,t){return e.filter(e=>t.value.namedOptions.includes(e.guid)).map(e=>e.filterExpression.replace(this.associatedFieldIdPatternRegExp,"${$1}"))}getNamedFilterOptionsOperators(e,t){return e.namedOptions.map(e=>this.getRecordGridFilterOperator(d.RecordGridFilterOperator.Eq,t,{[d.RecordGridNamedFilterOptionKey]:e}))}getRecordGridFilterOperator(e,t,i){return{[e]:{[t]:i}}}getBooleanFilterValue(e){return e?e===m.booleanDataTypeBlankValue?"$NULL$":"true":"false"}}dp.\u0275fac=function(e){return new(e||dp)(n["\u0275\u0275inject"](lp),n["\u0275\u0275inject"](v.RxNumberUtilsService),n["\u0275\u0275inject"](F.RxNamedListService),n["\u0275\u0275inject"](p.TranslateService),n["\u0275\u0275inject"](a.RxRecordInstanceUtilsService),n["\u0275\u0275inject"](_c),n["\u0275\u0275inject"](s.RxDefinitionNameService))},dp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:dp,factory:dp.\u0275fac});class cp{constructor(){this.defaultFilterValue=[],this.namedFilterOptionsChange=new n.EventEmitter,this.namedFilterOptionsModel={}}set filterValue(e){const t=null==e?void 0:e.namedOptions;this._filterValue=e,Object.keys(this.namedFilterOptionsModel).forEach(e=>this.namedFilterOptionsModel[e]=!1),null==t||t.forEach(e=>this.namedFilterOptionsModel[e]=!0)}get filterValue(){return this._filterValue}trackByOptionGuid(e,t){return t.guid}onNamedFilterOptionChange(){var e,t;const i=this.getSelectedNamedOptionsIds();this.namedFilterOptionsChange.emit(i);const n=new rp(null!==(t=null===(e=this.filterValue)||void 0===e?void 0:e.filterValue)&&void 0!==t?t:this.defaultFilterValue,i);this.filterControlsComponent.onFilterOptionModelChange(n)}getSelectedNamedOptionsIds(){return(0,u.reduce)(this.namedFilterOptionsModel,(e,t,i)=>(t&&e.push(i),e),[])}}cp.\u0275fac=function(e){return new(e||cp)},cp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:cp,selectors:[["rx-named-filter-options-list"]],inputs:{namedFilterOptions:"namedFilterOptions",filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",defaultFilterValue:"defaultFilterValue"},outputs:{namedFilterOptionsChange:"namedFilterOptionsChange"},decls:1,vars:1,consts:[["class","options-wrapper",4,"ngIf"],[1,"options-wrapper"],["class","dropdown-item p-0 text-break",3,"label","ngModel","ngModelChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown-item","p-0","text-break",3,"label","ngModel","ngModelChange"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,On,2,2,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length)},directives:[f.NgIf,f.NgForOf,m.AdaptRxCheckboxComponent,x.NgControlStatus,x.NgModel],styles:[".options-wrapper[_ngcontent-%COMP%]{margin-top:-1.5rem;margin-bottom:-2px}adapt-rx-checkbox[_ngcontent-%COMP%]:not(:last-child){margin-bottom:14px}.dropdown-item[_ngcontent-%COMP%]{white-space:normal}"]});class pp{constructor(){this.namedFilterOptions=[],this.isRequired=!1}set filterValue(e){const t=this.getSelectOptions();this._filterValue=e,this.selectedValues=(null==e?void 0:e.filterValue)?e.filterValue.map(e=>(0,u.find)(t,{id:e})):[]}get filterValue(){return this._filterValue}selectOptionFormatter(e){return e.name}onValueChange(e){var t;const i=e.map(e=>e.id);this.filterControlsComponent.onFilterOptionModelChange(new rp(i,null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}getSelectOptions(){var e;return(null===(e=this.filterOption.data)||void 0===e?void 0:e.selectOptions)||[]}onValueChangeRequired(e){var t,i,n;const o=Array.isArray(null===(t=this.filterValue)||void 0===t?void 0:t.filterValue)?this.filterValue.filterValue[0]:null===(i=this.filterValue)||void 0===i?void 0:i.filterValue;this.filterControlsComponent.onFilterOptionModelChange(new rp(e===o?null:[e],null===(n=this.filterValue)||void 0===n?void 0:n.namedOptions))}}pp.\u0275fac=function(e){return new(e||pp)},pp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pp,selectors:[["rx-boolean-filter"]],inputs:{filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",namedFilterOptions:"namedFilterOptions",isRequired:"isRequired"},decls:4,vars:3,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],["class","advanced-filter__rx-select advanced-filter__rx-select_simple",3,"inline","multiple","optionFormatter","options","popupMaxHeight","ngModel","ngModelChange",4,"ngIf","ngIfElse"],["inputsForBooleanTypeTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[1,"advanced-filter__rx-select","advanced-filter__rx-select_simple",3,"inline","multiple","optionFormatter","options","popupMaxHeight","ngModel","ngModelChange"],[1,"advanced-filter__radiobutton-group",3,"ngModel","ngModelChange"],["name","booleanTypeGroup",1,"advanced-filter__radiobutton",3,"value","label","testID","disabled"],["name","booleanTypeGroup","class","advanced-filter__radiobutton",3,"value","label","testID","disabled",4,"ngIf"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,Nn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275template"](1,An,1,6,"adapt-rx-select",1),n["\u0275\u0275template"](2,jn,4,10,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isRequired)("ngIfElse",e)}},directives:[f.NgIf,cp,m.AdaptRxSelectComponent,x.NgControlStatus,x.NgModel,m.AdaptRxRadiobuttonGroupComponent,m.AdaptRxRadiobuttonComponent],encapsulation:2});class up{constructor(e,t,i){this.rxNamedListService=e,this.rxNamedListDefinitionService=t,this.rxFeatureService=i,this.namedFilterOptions=[],this.selectedValues=[],this.isSearchInProgress=!1,this.search=e=>e.pipe((0,r.debounceTime)(250),(0,r.distinctUntilChanged)(),(0,r.tap)(()=>{this.isSearchInProgress=!0}),(0,r.switchMap)(e=>this.getSelectOptions(e)),(0,r.finalize)(()=>{this.isSearchInProgress=!1}))}set filterValue(e){this._filterValue=e,this.selectedValues=(null==e?void 0:e.filterValue)||[]}get filterValue(){return this._filterValue}ngOnInit(){var e;this.namedListDefinition$=this.rxNamedListDefinitionService.get(this.filterOption.data.namedListDefinition).pipe((0,r.shareReplay)(1)),this.typeaheadKeystrokeCount=null!==(e=this.filterOption.data.typeaheadKeystrokeCount)&&void 0!==e?e:jc.defaultTypeaheadKeystrokeCount}onValueChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e.map(e=>this.rxNamedListService.isNamedListOption(e)?e:{displayValue:void 0,value:e,title:"",contextualFields:[]}),null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}getSelectOptions(e){return e.length>=this.typeaheadKeystrokeCount?this.namedListDefinition$.pipe((0,r.switchMap)(t=>this.rxNamedListService.getOptionPageByLabelOrValue(t,e,this.filterOption.data.additionalQueryCriteria).pipe((0,r.map)(e=>e.options)))):(0,o.of)([])}}up.\u0275fac=function(e){return new(e||up)(n["\u0275\u0275directiveInject"](F.RxNamedListService),n["\u0275\u0275directiveInject"](F.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](s.RxFeatureService))},up.\u0275cmp=n["\u0275\u0275defineComponent"]({type:up,selectors:[["rx-string-with-type-ahead-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:9,vars:11,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[2,"position","relative"],[3,"search","ngModel","replaceModelOnWrite","selectItemTemplate","tagTemplate","openDropdownOnFocus","placeholder","ngModelChange"],["class","position-absolute text-info inline-loader",4,"ngIf"],["tagTemplate",""],["selectItemTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[1,"position-absolute","text-info","inline-loader"],[1,"d-icon-circle_75_o","animated","infinite","spin-360","transition-out","slow"],["class","text-secondary selection-item-contextual-fields text-truncate",3,"title",4,"ngIf"],[1,"text-secondary","selection-item-contextual-fields","text-truncate",3,"title"],["class","breadcrumb-item active",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,_n,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"adapt-tag-field",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onValueChange(e)}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,Vn,2,0,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,kn,1,1,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,Ln,2,2,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](6),i=n["\u0275\u0275reference"](8);n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("search",t.search)("ngModel",t.selectedValues)("replaceModelOnWrite",!0)("selectItemTemplate",i)("tagTemplate",e)("openDropdownOnFocus",0===t.typeaheadKeystrokeCount)("placeholder",n["\u0275\u0275pipeBind1"](3,9,"com.bmc.arsys.rx.client.view-components.record-grid.filters.typeahead.placeholder")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isSearchInProgress)}},directives:[f.NgIf,m.AdaptMetatagComponent,x.NgControlStatus,x.NgModel,cp,f.NgForOf],pipes:[p.TranslatePipe],styles:[".inline-loader[_ngcontent-%COMP%]{z-index:10;right:15px;top:8px}.selection-item-contextual-fields[_ngcontent-%COMP%]{max-width:300px}"]});class mp{constructor(){this.namedFilterOptions=[]}onStringTypeFilterOptionModelChange(e,t){var i,n;const o=e.filter(e=>!(0,m.isEmptyOrWhitespace)((0,m.getTagText)(e)));o.length<e.length&&(0,u.isEqual)(o,(null===(i=this.filterValue)||void 0===i?void 0:i.filterValue)||[])?t.writeValue(o):this.filterControlsComponent.onFilterOptionModelChange(new rp(o,null===(n=this.filterValue)||void 0===n?void 0:n.namedOptions))}}mp.\u0275fac=function(e){return new(e||mp)},mp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:mp,selectors:[["rx-string-filter"]],inputs:{filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",namedFilterOptions:"namedFilterOptions"},decls:3,vars:9,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],["mainCls","advanced-filter__string-tag-field","popupClass","advanced-filter__typeahead-window",3,"ngModel","testID","delimiterSymbol","placeholder","replaceModelOnWrite","disabled","hideLabel","ngModelChange"],["stringDataTypeTagField",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275template"](0,Gn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"adapt-tag-field",1,2),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](2);return t.onStringTypeFilterOptionModelChange(i,o)}),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",(null==t.filterValue?null:t.filterValue.filterValue)||n["\u0275\u0275pureFunction0"](8,et))("testID",t.filterControlsComponent.testID)("delimiterSymbol",null)("placeholder",t.filterControlsComponent.texts.stringTypeTagFieldPlaceholder)("replaceModelOnWrite",!0)("disabled",t.filterControlsComponent.isInputDisabled())("hideLabel",!0))},directives:[f.NgIf,m.AdaptMetatagComponent,x.NgControlStatus,x.NgModel,cp],encapsulation:2});class fp{getNumberDataTypeModel(e,t){return e&&e.filterValue?e.filterValue[t]:null}onNumberTypeFilterOptionModelChange(e,t,i){t.onFilterOptionModelChange(new rp(i,null==e?void 0:e.namedOptions))}}fp.\u0275fac=function(e){return new(e||fp)},fp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fp,selectors:[["rx-number-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:8,vars:15,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[1,"d-flex"],[1,"advanced-filter__counter-from-wrap"],[1,"advanced-filter__counter-from",3,"label","ngModel","min","max","disabled","testID","ngModelChange"],["counterFrom",""],[1,"advanced-filter__counter-to-wrap"],[1,"advanced-filter__counter-to",3,"label","ngModel","min","max","disabled","testID","ngModelChange"],["counterTo",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275template"](0,zn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-rx-counter",3,4),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](7);return t.onNumberTypeFilterOptionModelChange(t.filterValue,t.filterControlsComponent,[i,o?t.getNumberDataTypeModel(t.filterValue,1):null])}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",5),n["\u0275\u0275elementStart"](6,"adapt-rx-counter",6,7),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](4);return t.onNumberTypeFilterOptionModelChange(t.filterValue,t.filterControlsComponent,[o?t.getNumberDataTypeModel(t.filterValue,0):null,i])}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("has-danger",t.filterControlsComponent.hasValidationErrors),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",t.filterControlsComponent.texts.counterFromLabel)("ngModel",t.getNumberDataTypeModel(t.filterValue,0))("min",t.filterControlsComponent.getNumberDataTypeMinAllowedValue())("max",t.filterControlsComponent.getNumberDataTypeMaxAllowedValue())("disabled",t.filterControlsComponent.isInputDisabled())("testID",t.filterControlsComponent.testID+"_from"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("label",t.filterControlsComponent.texts.counterToLabel)("ngModel",t.getNumberDataTypeModel(t.filterValue,1))("min",t.filterControlsComponent.getNumberDataTypeMinAllowedValue())("max",t.filterControlsComponent.getNumberDataTypeMaxAllowedValue())("disabled",t.filterControlsComponent.isInputDisabled())("testID",t.filterControlsComponent.testID+"_to"))},directives:[f.NgIf,m.AdaptRxCounterComponent,x.NgControlStatus,x.NgModel,cp],encapsulation:2});class hp extends m.AdaptRxDatetimeAdapter{fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){var t,i,n,o,r,a;let s=null;if(e){const l=(0,I.default)();s=e.parseError?I.default.invalid({invalidFormat:!0,parsedDateParts:[e.parseError.query],meridiem:e.parseError.use12HoursTime?"12":"24"}):(0,I.default)([null!==(t=e.year)&&void 0!==t?t:l.year(),null!==(i=e.month)&&void 0!==i?i:l.month(),null!==(n=e.date)&&void 0!==n?n:l.date(),null!==(o=e.hours)&&void 0!==o?o:0,null!==(r=e.minutes)&&void 0!==r?r:0,null!==(a=e.seconds)&&void 0!==a?a:0])}return s}}hp.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](hp)))(t||hp)}}(),hp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:hp,factory:hp.\u0275fac});class gp{constructor(){this.rxDatetimePickerMode=m.RxDatetimePickerMode}onTimeTypeFilterOptionModelChange(e){this.onDateTimeTypeFilterOptionModelChange(e)}onDateTypeFilterOptionModelChange(e){e[0]&&e[0].isValid()&&(e[0]=e[0].startOf("day")),e[1]&&e[1].isValid()&&(e[1]=e[1].startOf("day")),this.onDateTimeTypeFilterOptionModelChange(e)}onDateTimeTypeFilterOptionModelChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e,null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}}gp.\u0275fac=function(e){return new(e||gp)},gp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:gp,selectors:[["rx-date-time-range-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions",mode:"mode"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:hp}])],decls:11,vars:5,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["inputsForTimeTypeTemplate",""],["inputsForDateTypeTemplate",""],["inputsForDatetimeTypeTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[3,"ngTemplateOutlet"],[1,"advanced-filter__datetime",3,"ngModel","testID","mode","hasSeconds","inline","inlineLight","texts","disabled","ngModelChange"],[1,"advanced-filter__datetime",3,"ngModel","testID","mode","inline","inlineLight","texts","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Un,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementContainerStart"](1,1),n["\u0275\u0275template"](2,qn,1,1,"ng-container",2),n["\u0275\u0275template"](3,Xn,1,1,"ng-container",2),n["\u0275\u0275template"](4,Wn,1,1,"ng-container",2),n["\u0275\u0275elementContainerEnd"](),n["\u0275\u0275template"](5,Hn,1,8,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,Qn,1,7,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](9,Kn,1,8,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitch",t.mode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.Time),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.Date),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.DateTime))},directives:[f.NgIf,f.NgSwitch,f.NgSwitchCase,cp,f.NgTemplateOutlet,m.AdaptRxDatetimeRangeComponent,x.NgControlStatus,x.NgModel],encapsulation:2});class vp{set filterValue(e){this._filterValue=e;const t=this.getSelectionTypeOptions();this.selectionTypeModel=t.length&&(null==e?void 0:e.filterValue)?e.filterValue.map(e=>t.find(t=>t.id===e)):null}get filterValue(){return this._filterValue}getSelectionTypeOptions(){var e;const t=this.filterOption.data;return null!==(e=null==t?void 0:t.selectOptions)&&void 0!==e?e:[]}onSelectionTypeFilterOptionModelChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e.map(e=>e.id),null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}}vp.\u0275fac=function(e){return new(e||vp)},vp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vp,selectors:[["rx-selection-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:2,vars:14,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[1,"advanced-filter__rx-select",3,"inline","multiple","selectAllButton","deselectAllButton","enableFilter","optionFormatter","options","texts","popupMaxHeight","ngModel","disabledOptionResolver","ngModelChange"],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Jn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"adapt-rx-select",1),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSelectionTypeFilterOptionModelChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("advanced-filter__rx-select_simple",t.filterControlsComponent.canShowSimpleInlineSelect()),n["\u0275\u0275property"]("inline",!0)("multiple",!0)("selectAllButton",!0)("deselectAllButton",!0)("enableFilter",!t.filterControlsComponent.canShowSimpleInlineSelect())("optionFormatter",t.filterControlsComponent.selectOptionFormatter)("options",t.filterControlsComponent.getSelectionTypeOptions())("texts",t.filterControlsComponent.getSelectionTypeTexts())("popupMaxHeight",null)("ngModel",t.selectionTypeModel)("disabledOptionResolver",t.filterControlsComponent.disabledSelectInputResolverBind))},directives:[f.NgIf,m.AdaptRxSelectComponent,x.NgControlStatus,x.NgModel,cp],encapsulation:2});class yp{constructor(){this.rxDatetimePickerMode=m.RxDatetimePickerMode,this.namedFilterOptionsGetter=e=>[]}}yp.\u0275fac=function(e){return new(e||yp)},yp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yp,selectors:[["rx-advanced-filtering-fields-provider"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Yn,7),n["\u0275\u0275viewQuery"](Zn,7),n["\u0275\u0275viewQuery"](eo,7),n["\u0275\u0275viewQuery"](to,7),n["\u0275\u0275viewQuery"](io,7),n["\u0275\u0275viewQuery"](no,7),n["\u0275\u0275viewQuery"](oo,7),n["\u0275\u0275viewQuery"](ro,7),n["\u0275\u0275viewQuery"](ao,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.optionalBooleanFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requiredBooleanFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForStringWithTypeAheadTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForStringTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForNumberTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForTimeTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForDateTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForDatetimeTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForSelectionTypeTemplate=e.first)}},inputs:{namedFilterOptionsGetter:"namedFilterOptionsGetter"},decls:18,vars:0,consts:[["optionalBooleanFilter",""],["requiredBooleanFilter",""],["inputsForStringWithTypeAheadTemplate",""],["inputsForStringTypeTemplate",""],["inputsForNumberTypeTemplate",""],["inputsForTimeTypeTemplate",""],["inputsForDateTypeTemplate",""],["inputsForDatetimeTypeTemplate",""],["inputsForSelectionTypeTemplate",""],[3,"filterControlsComponent","filterOption","filterValue","isRequired","namedFilterOptions"],[3,"filterControlsComponent","filterOption","filterValue","namedFilterOptions"],[3,"filterOption","filterValue","filterControlsComponent","namedFilterOptions"],[3,"filterOption","filterValue","filterControlsComponent","mode","namedFilterOptions"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,so,1,5,"ng-template",null,0,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](2,lo,1,5,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](4,co,1,4,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](6,po,1,4,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,uo,1,4,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](10,mo,1,5,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](12,fo,1,5,"ng-template",null,6,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](14,ho,1,5,"ng-template",null,7,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](16,go,1,4,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"]))},directives:[pp,up,mp,fp,gp,vp],encapsulation:2});class bp{constructor(e){this.rxRecordGridUtilsService=e,this.restTagsDropdownPlacement=["bottom","bottom-right","auto"],this.removeTag=new n.EventEmitter,this.trackByForFilterTags=this.trackByForFilterTags.bind(this)}getTranslateParams(){return{count:this.getRestTagsCount()}}getRestTagsCount(){return this.tagsLimit&&this.tags?this.tags.length-this.tagsLimit:0}onRemoveFilterTag(e){const t=e.data.filterOption,i=(0,u.clone)(this.tags);let n;if((0,u.isNull)(t))n=(0,u.findIndex)(i,e=>this.rxRecordGridUtilsService.isSharedFilterPresetTag(e));else{const t=e.data.filterOption.id;n=(0,u.findIndex)(i,e=>(0,u.get)(e.data.filterOption,"id")===t)}n>-1&&i.splice(n,1),this.removeTag.emit({removedTag:e,newTags:i})}trackByForFilterTags(e,t){return this.rxRecordGridUtilsService.isSharedFilterPresetTag(t)?e:t.data.filterOption.id||e}}bp.\u0275fac=function(e){return new(e||bp)(n["\u0275\u0275directiveInject"](_c))},bp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bp,selectors:[["rx-filter-tags"]],inputs:{tags:"tags",isDisabled:"isDisabled",tagsLimit:"tagsLimit",restTagsDropdownPlacement:"restTagsDropdownPlacement"},outputs:{removeTag:"removeTag"},decls:4,vars:7,consts:[["class","mr-1","type","active",3,"removable","disabled","remove",4,"ngFor","ngForOf","ngForTrackBy"],["adaptDropdown","",3,"appendToBody","placement",4,"ngIf"],["type","active",1,"mr-1",3,"removable","disabled","remove"],[1,"filter-tags__tag-text",3,"title"],["adaptDropdown","",3,"appendToBody","placement"],["adaptDropdownToggle","","type","button",1,"filter-tags__dropdown-toggle","btn","btn-link","p-0","ml-1"],["adaptDropdownMenu","",1,"dropdown-menu","filter-tags__dropdown-menu","p-2"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","active",3,"removable","remove"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,vo,3,4,"adapt-tag",0),n["\u0275\u0275pipe"](2,"slice"),n["\u0275\u0275template"](3,bo,7,11,"span",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind3"](2,3,t.tags,0,t.tagsLimit?t.tagsLimit:null==t.tags?null:t.tags.length))("ngForTrackBy",t.trackByForFilterTags),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.getRestTagsCount()>0))},directives:[f.NgForOf,f.NgIf,m.AdaptTagComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective],pipes:[f.SlicePipe,p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.filter-tags__dropdown-toggle[_ngcontent-%COMP%]:after{border:0!important}.filter-tags__tag-text[_ngcontent-%COMP%]{display:table-cell;max-width:190px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.filter-tags__dropdown-menu[_ngcontent-%COMP%]   .filter-tags__tag-text[_ngcontent-%COMP%]{max-width:350px}'],changeDetection:0});class xp extends l.ValueAccessor{constructor(e,t,i,n,r,a,s,l,d,c,p,u){super(),this.injector=e,this.rxModalService=t,this.rxRecordGridUtilsService=i,this.rxRecordGridFilterConfigService=n,this.rxRecordDefinitionCacheService=r,this.rxRecordGridFilterService=a,this.rxRecordGridFilterHelperService=s,this.rxRecordDefinitionService=l,this.rxGuidService=d,this.rxRecordGridAdvancedFilteringService=c,this.rxGlobalCacheService=p,this.rxDefinitionNameService=u,this.advancedFilterData={filterOptions:[],selectedFilters:[],filterTexts:{initialDropdownAnchorLabel:"Filter"},recordGridFilterConfigs:null,fieldDefinitionsById:{},fieldDefinitionsInitialized$:new o.Subject,filterValueInitialized$:new o.Subject,associationDescriptors:[]},this.subscription=new o.Subscription,this.getNamedFilterOptions=this.getNamedFilterOptions.bind(this),this.initEmptyValue(),this.advancedFilterData.recordGridFilterConfigs=this.rxRecordGridFilterConfigService.getConfigs(),this.subscription.add((0,o.combineLatest)([this.advancedFilterData.filterValueInitialized$,this.advancedFilterData.fieldDefinitionsInitialized$]).subscribe(()=>{this.initSelectedAdvancedFilters(this.value)}))}getGroupFilterName(e){var t;return null===(t=this.groupFilterItems.find(t=>t.value===e))||void 0===t?void 0:t.name}onGroupFilterValueModelChange(e){this.groupFilterValue=e}ngOnInit(){this.initFilterOptions()}initEmptyValue(){this.innerValue={basicFilters:null,filtersJson:null}}ngOnChanges(e){var t,i;e.options&&e.options.previousValue&&(null===(t=e.options.currentValue.primaryRecordDefinition)||void 0===t?void 0:t.name)!==(null===(i=e.options.previousValue.primaryRecordDefinition)||void 0===i?void 0:i.name)&&(this.initEmptyValue(),this.advancedFilterData.selectedFilters=[],this.advancedFilterData.filterOptions=[],this.initFilterOptions())}initFilterOptions(){this.groupFilterItems=[],this.options.primaryRecordDefinition&&this.rxRecordGridUtilsService.getAssociationDescriptors(this.options.primaryRecordDefinition.name).pipe((0,r.switchMap)(e=>{this.advancedFilterData.associationDescriptors=e;const t=(0,u.uniq)(e.map(e=>e.recordDefinitionName));return(t.length?(0,o.forkJoin)(t.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))):(0,o.of)([])).pipe((0,r.map)(t=>({recordDefinitions:t,associationDescriptors:e})))}),(0,r.take)(1)).subscribe(({recordDefinitions:e,associationDescriptors:t})=>{const i=(0,u.cloneDeep)(this.options.primaryRecordDefinition);[i,...e].forEach(e=>{e.fieldDefinitionsById||(e.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(e))}),this.groupFilterValue=i.name,this.advancedFilterData.fieldDefinitionsById=this.rxRecordGridAdvancedFilteringService.addAssociationFieldsToFieldDefinitionsById(i.fieldDefinitionsById,t,e),t.forEach(t=>{const i=(0,u.find)(e,e=>e.name===t.recordDefinitionName);this.groupFilterItems.push({name:t.label,value:t.label}),this.advancedFilterData.filterOptions.push(...this.getFilterOptions(i,t,t.label))}),this.groupFilterItems=this.groupFilterItems.sort((e,t)=>e.name.localeCompare(t.name));const n=this.rxDefinitionNameService.getDisplayName(i.name);this.advancedFilterData.filterOptions.push(...this.getFilterOptions(i,null,null)),this.groupFilterItems.unshift({name:n,value:i.name}),this.advancedFilterData.fieldDefinitionsInitialized$.next()})}onRemoveFilterTag(e){const t=this.advancedFilterData.selectedFilters.slice(),i=e.removedTag.data.filterOption.id,n=(0,u.findIndex)(t,e=>e.filterOptionId===i);t.splice(n,1),this.onAdvancedFiltersChange(t)}getFilterOptions(e,t,i){return e.fieldDefinitions.map(e=>{const n=this.advancedFilterData.recordGridFilterConfigs[e.resourceType],o=this.rxRecordGridUtilsService.getColumnLabel(e,null),r=this.rxRecordGridUtilsService.getFieldIdForGridColumn(e.id,t),a=this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(r,o,e,n,!1,{optionalBooleanFilter:this.fieldsProvider.optionalBooleanFilter,requiredBooleanFilter:this.fieldsProvider.requiredBooleanFilter,inputsForStringWithTypeAheadTemplate:this.fieldsProvider.inputsForStringWithTypeAheadTemplate,inputsForStringTypeTemplate:this.fieldsProvider.inputsForStringTypeTemplate,inputsForNumberTypeTemplate:this.fieldsProvider.inputsForNumberTypeTemplate,inputsForTimeTypeTemplate:this.fieldsProvider.inputsForTimeTypeTemplate,inputsForDateTypeTemplate:this.fieldsProvider.inputsForDateTypeTemplate,inputsForDatetimeTypeTemplate:this.fieldsProvider.inputsForDatetimeTypeTemplate,inputsForSelectionTypeTemplate:this.fieldsProvider.inputsForSelectionTypeTemplate},i?`${i} > ${o}`:null,this.options.namedFilterOptions?this.options.namedFilterOptions[r]:[]),s=t?t.label:this.options.primaryRecordDefinition.name;return a.isHidden=()=>{var e;return this.groupFilterValue!==s||!1===(null===(e=this.options.selectedFieldIds)||void 0===e?void 0:e.includes(r))},a}).sort((e,t)=>e.label.localeCompare(t.label))}ngOnDestroy(){this.subscription.unsubscribe()}onAdvancedFiltersChange(e){this.advancedFilterData.selectedFilters=e;const t=this.value.basicFilters||[],i=(0,u.reduce)(e,(e,i)=>{const n=i.filterOptionId,o=this.advancedFilterData.fieldDefinitionsById[n],r=this.advancedFilterData.recordGridFilterConfigs[o.resourceType].getRecordGridFilterData(i.value,o,n);return(r.or||r.and).forEach(i=>{const o=(0,u.values)(i)[0][n],r=(0,u.values)(i)[0].$DISPLAYVALUE$,a=(0,u.find)(t,t=>t.fieldId===n&&t.value===o&&(0,u.every)(e,e=>e.guid!==t.guid)),s={fieldId:n,value:o,$DISPLAYVALUE$:r,guid:a&&a.guid||this.rxGuidService.generate()};e.push(s)}),e},[]),n=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(e,this.advancedFilterData.fieldDefinitionsById,this.advancedFilterData.recordGridFilterConfigs);let o=(0,u.isEmpty)(n)?null:JSON.stringify(n);o&&(o=this.rxRecordGridFilterHelperService.denormalizeFilterString(o,i)),this.filtersModel={basicFilters:i,filtersJson:o},this.value={basicFilters:i,filtersJson:o}}onWriteValue(e){(0,u.isEqual)(this.filtersModel,e)||this.advancedFilterData.filterValueInitialized$.next()}initSelectedAdvancedFilters(e){(null==e?void 0:e.filtersJson)&&!(0,u.isEmpty)(e.basicFilters)&&this.rxRecordGridFilterService.getSelectedFiltersFromPredefinedFilter(e.filtersJson,e.basicFilters,this.advancedFilterData.fieldDefinitionsById,this.advancedFilterData.recordGridFilterConfigs,this.options.primaryRecordDefinition,this.advancedFilterData.filterOptions,this.advancedFilterData.associationDescriptors).pipe((0,r.map)(e=>this.options.namedFilterOptions?this.rxRecordGridFilterService.clearRemovedNamedFilterOptions(e,this.options.namedFilterOptions):e)).subscribe(e=>{this.advancedFilterData.selectedFilters=e})}getNamedFilterOptions(e){return this.options.namedFilterOptions?this.options.namedFilterOptions[e.id]:[]}getTags(e){var t;const i=(null!==(t=null==e?void 0:e.filter(e=>(0,u.isEmpty)(e.data.validationErrors)))&&void 0!==t?t:[]).map(e=>{var t,i;if(e.data.filterOption){const n=e.data.filterOption.id,o=e.data.filterOption.data,a=this.advancedFilterData.recordGridFilterConfigs[null==o?void 0:o.resourceType];if((0,u.isFunction)(null==a?void 0:a.getToolbarTagInfo))return a.getToolbarTagInfo({primaryRecordDefinition:this.options.primaryRecordDefinition,fieldDefinition:o,value:e.data.value,tag:e,fieldId:n,namedFilterOptions:null!==(i=null===(t=this.options.namedFilterOptions)||void 0===t?void 0:t[n])&&void 0!==i?i:[]}).pipe((0,r.tap)(t=>e.data.value.title=t.tooltip),(0,r.map)(t=>Object.assign(Object.assign({},e),{text:t.text})))}return(0,o.of)(Object.assign({},e))});return i.length?(0,o.forkJoin)(i):(0,o.of)([])}}xp.\u0275fac=function(e){return new(e||xp)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](_c),n["\u0275\u0275directiveInject"](dp),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](lp),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](ap),n["\u0275\u0275directiveInject"](s.RxGlobalCacheService),n["\u0275\u0275directiveInject"](s.RxDefinitionNameService))},xp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xp,selectors:[["rx-record-grid-filter-select-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](yp,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.fieldsProvider=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:xp,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:2,consts:[[4,"ngIf"],["filterOptionsCustomAreaTemplate",""],[3,"namedFilterOptionsGetter"],[3,"hidden","appendDropdownToBody","enableSavedFilters","filterOptions","selectedFilters","texts","applyFiltersByUserAction","filterOptionsCustomAreaTemplate","selectedFiltersIndicationStyle","anchorDisabled","selectedFiltersChange"],["advancedFilter",""],[3,"isDisabled","tags","tagsLimit","restTagsDropdownPlacement","removeTag"],["class","p-3 pt-4 pb-4",4,"ngIf"],[1,"p-3","pt-4","pb-4"],[3,"title","multiline"],[1,"advanced-filter__radiobutton-group",3,"ngModel","ngModelChange"],["name","booleanTypeGroup","class","advanced-filter__radiobutton",3,"value","label",4,"ngFor","ngForOf"],["name","booleanTypeGroup",1,"advanced-filter__radiobutton",3,"value","label"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Co,5,17,"ng-container",0),n["\u0275\u0275template"](1,Io,1,1,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](3,"rx-advanced-filtering-fields-provider",2)),2&e&&(n["\u0275\u0275property"]("ngIf",t.advancedFilterData.filterOptions),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("namedFilterOptionsGetter",t.getNamedFilterOptions))},directives:[f.NgIf,yp,m.AdaptAdvancedFilterComponent,bp,m.AdaptAccordionComponent,m.AdaptAccordionTabComponent,m.AdaptRxRadiobuttonGroupComponent,x.NgControlStatus,x.NgModel,f.NgForOf,m.AdaptRxRadiobuttonComponent],pipes:[f.AsyncPipe],styles:["[_nghost-%COMP%]     .filter-tags__tag-text{max-width:185px!important}"]}),function(e){e.Basic="basic",e.Expression="expression"}(ip||(ip={}));class Cp{}Cp.\u0275fac=function(e){return new(e||Cp)},Cp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cp,declarations:[bp],imports:[f.CommonModule,m.AdaptTagModule,m.AdaptDropdownModule,p.TranslateModule],exports:[bp]}),Cp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptTagModule,m.AdaptDropdownModule,p.TranslateModule]]});class Sp{}Sp.\u0275fac=function(e){return new(e||Sp)},Sp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Sp,declarations:[cp],imports:[f.CommonModule,m.AdaptRxCheckboxModule,x.FormsModule],exports:[cp]}),Sp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxCheckboxModule,x.FormsModule]]});class Dp{}Dp.\u0275fac=function(e){return new(e||Dp)},Dp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Dp,imports:[f.CommonModule,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,p.TranslateModule,m.AdaptTagModule,x.FormsModule,m.AdaptDropdownModule,m.AdaptMetatagModule,Sp,Cp],exports:[Cp,Sp]}),Dp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,p.TranslateModule,m.AdaptTagModule,x.FormsModule,m.AdaptDropdownModule.forRoot(),m.AdaptMetatagModule,Sp,Cp],Cp,Sp]});class Ip{}Ip.\u0275fac=function(e){return new(e||Ip)},Ip.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ip,declarations:[mp],imports:[f.CommonModule,x.FormsModule,Sp,m.AdaptMetatagModule],exports:[mp]}),Ip.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,Sp,m.AdaptMetatagModule]]});class Rp{}Rp.\u0275fac=function(e){return new(e||Rp)},Rp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rp,declarations:[fp],imports:[f.CommonModule,x.FormsModule,Sp,m.AdaptRxCounterModule],exports:[fp]}),Rp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,Sp,m.AdaptRxCounterModule]]});class wp{}wp.\u0275fac=function(e){return new(e||wp)},wp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wp,declarations:[gp],imports:[f.CommonModule,x.FormsModule,Sp,m.AdaptRxDatetimeModule],exports:[gp]}),wp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,Sp,m.AdaptRxDatetimeModule]]});class Ep{}Ep.\u0275fac=function(e){return new(e||Ep)},Ep.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ep,declarations:[vp],imports:[f.CommonModule,x.FormsModule,Sp,m.AdaptRxSelectModule],exports:[vp]}),Ep.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,Sp,m.AdaptRxSelectModule]]});class Fp{}Fp.\u0275fac=function(e){return new(e||Fp)},Fp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Fp,declarations:[pp],imports:[f.CommonModule,Sp,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,x.FormsModule],exports:[pp]}),Fp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,Sp,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,x.FormsModule]]});class Mp{}Mp.\u0275fac=function(e){return new(e||Mp)},Mp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mp,declarations:[up],imports:[f.CommonModule,Sp,m.AdaptMetatagModule,x.FormsModule,p.TranslateModule],exports:[up]}),Mp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,Sp,m.AdaptMetatagModule,x.FormsModule,p.TranslateModule]]});class Tp{}Tp.\u0275fac=function(e){return new(e||Tp)},Tp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Tp,declarations:[yp],imports:[f.CommonModule,Ip,Rp,wp,Ep,Fp,Mp],exports:[yp]}),Tp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,Ip,Rp,wp,Ep,Fp,Mp]]});class Op{}Op.\u0275fac=function(e){return new(e||Op)},Op.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Op,declarations:[xp],imports:[f.CommonModule,m.AdaptAdvancedFilteringModule,Dp,m.AdaptAccordionModule,m.AdaptRxRadiobuttonModule,x.FormsModule,Tp],exports:[xp]}),Op.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptAdvancedFilteringModule,Dp,m.AdaptAccordionModule,m.AdaptRxRadiobuttonModule,x.FormsModule,Tp]]});class Np{getNamedFilterOptionsFromColumns(e){return e.reduce((e,t)=>{var i;return(null===(i=t.namedFilterOptions)||void 0===i?void 0:i.length)&&(e[t.fieldId]=t.namedFilterOptions.map(e=>Object.assign(Object.assign({guid:e.guid},e.data),{index:(0,u.toNumber)(e.data.index)})).sort((e,t)=>e.index-t.index)),e},{})}}Np.\u0275fac=function(e){return new(e||Np)},Np.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Np,factory:Np.\u0275fac,providedIn:"root"});class Ap extends S.RxModalClass{constructor(e,t,i,n){super(e,n),this.activeModalRef=e,this.rxModalService=t,this.rxGuidService=i,this.injector=n,this.filterPresets=[],this.params=this.activeModalRef.getData();const o=this.params.activeFilterPreset;this.recordDefinition=this.params.primaryRecordDefinition,this.selectedFieldIds=this.params.selectedFieldIds,this.isReadOnly=this.params.isReadOnly,this.filterPresets=(0,u.map)(this.params.filterPresets,e=>this.createFilterPresetEditorData(e,e===o))}ngAfterViewInit(){const e=(0,u.findIndex)(this.filterPresets,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}addFilterPreset(){this.markAsDirty(),this.filterPresets.push(this.createFilterPresetEditorData({guid:this.rxGuidService.generate(),title:"New preset"+(0===this.filterPresets.length?"":" "+this.filterPresets.length),filters:"",recordGridFilters:[]},!0)),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeFilterPreset(e){this.markAsDirty(),this.filterPresets.splice(e,1)}createFilterPresetEditorData(e,t){return Object.assign(Object.assign({},e),{isOpen:t,filterSelectOptions:{primaryRecordDefinition:this.recordDefinition,tagsLimit:2,namedFilterOptions:this.params.namedFilterOptions,selectedFieldIds:this.selectedFieldIds},filterSelect:{basicFilters:e.recordGridFilters,filtersJson:e.filters}})}getCheckPresetTitleDuplicateValidator(e){return t=>{const i=t.value;return i&&this.filterPresets.some(t=>t.title===i&&t.guid!==e.guid)?{duplicatePresetName:{message:"Duplicate Name"}}:null}}trackByForFilterPresets(e,t){return t.guid}toggleOpen(e){this.filterPresets.forEach(t=>t.isOpen=e)}onSaveChangesClick(){const e={filterPresets:this.filterPresets.map(e=>({filters:e.filterSelect.filtersJson,recordGridFilters:e.filterSelect.basicFilters,guid:e.guid,title:e.title}))};(0,u.some)(e.filterPresets,e=>(0,u.isEmpty)(e.recordGridFilters))?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"The filter preset will not filter records because no filters have been specified. Do you want to continue?"}).then(t=>{t&&this.activeModalRef.close(e)}):this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Ap.\u0275fac=function(e){return new(e||Ap)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.Injector))},Ap.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ap,selectors:[["rx-record-grid-filter-preset-editor-modal"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Ro,7,x.NgForm),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterPresetsForm=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:12,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],[1,"designer-modal-accordion-wrapper"],[3,"multiselect"],["filterPresetsForm","ngForm"],["class","designer-modal-accordion-content",4,"ngFor","ngForOf","ngForTrackBy"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"isOpen","open","close"],["accordionTab",""],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["rxNoWhitespace","",3,"label","name","required","disabled","rxCustomValidators","ngModel","ngModelChange"],[4,"ngIf"],[1,"right-header-block"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[3,"name","disabled","options","ngModel","ngModelChange"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,wo,4,3,"button",4),n["\u0275\u0275template"](5,Eo,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6),n["\u0275\u0275elementStart"](7,"adapt-accordion",7),n["\u0275\u0275elementStart"](8,"form",null,8),n["\u0275\u0275template"](10,To,12,13,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Oo,3,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",11),n["\u0275\u0275template"](13,No,3,4,"button",12),n["\u0275\u0275elementStart"](14,"button",13),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.filterPresets.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.filterPresets)("ngForTrackBy",t.trackByForFilterPresets),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.filterPresets.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](16,8,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,10,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,m.AdaptAccordionComponent,x["\u0275NgNoValidate"],x.NgControlStatusGroup,x.NgForm,f.NgForOf,m.AdaptButtonComponent,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,v.RxNoWhitespaceValidator,x.RequiredValidator,S.RxCustomValidatorsDirective,x.NgControlStatus,x.NgModel,xp,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content{position:relative}.designer-modal-accordion-content.cdk-drag-preview{z-index:1200!important}.designer-modal-drag-handle{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content{width:100%;display:flex}.designer-modal-card-title-content .left-header-block,.designer-modal-card-title-content .right-header-block{display:flex;align-items:center}.designer-modal-card-title-content .left-header-block{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons{display:flex;font-size:19px}.rx-card{overflow:auto}.rx-tree-draggable-node{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview{z-index:1200!important}.rx-tree-draggable-node.cdk-drag{opacity:1}.rx-tree-node-label{word-break:break-all}rx-form-builder{max-width:400px}\n'],encapsulation:2});class Pp extends l.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.rxRecordGridFilterSelectHelperService=t,this.filterPresets=[]}onWriteValue(e){this.filterPresets=e.slice(),this.filterPresets.sort((e,t)=>e.title.localeCompare(t.title))}removeFilterPreset(e){this.updateValue(this.filterPresets.filter(t=>t.guid!==e.guid))}updateValue(e){this.value=e,this.onWriteValue(e)}openEditor(e){const t=this.options.columns.map(e=>e.fieldId),i=this.options.primaryRecordDefinition.fieldDefinitions.filter(e=>t.includes(e.id.toString())),n=this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(this.options.columns),o={filterPresets:this.filterPresets,activeFilterPreset:e,isReadOnly:this.isDisabled,namedFilterOptions:n,primaryRecordDefinition:(0,u.cloneDeep)(Object.assign(Object.assign({},this.options.primaryRecordDefinition),{fieldDefinitions:i})),selectedFieldIds:t};this.rxModalService.openModal({title:"Edit filter presets",content:Ap,size:d.OpenViewActionModalSize.Large,testID:"edit-filter-presets",data:o}).then(e=>{e&&e.filterPresets&&this.updateValue(e.filterPresets)}).catch(u.noop)}trackByForFilterPresets(e,t){return t.guid}}Pp.\u0275fac=function(e){return new(e||Pp)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](Np))},Pp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pp,selectors:[["rx-record-grid-filter-preset-editor"]],inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:Pp,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label","tooltip",4,"ngIf"],["btn-type","tertiary","rx-id","open-modal-button","class","p-0 pb-1",3,"click",4,"ngIf"],["class","rx-selected-filter-preset",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-tertiary",4,"ngIf"],[3,"label","tooltip"],["btn-type","tertiary","rx-id","open-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[1,"rx-selected-filter-preset"],[1,"rx-selected-filter-preset__header-container"],["rx-id","card-title",1,"rx-selected-filter-preset__header-title",3,"title"],["type","button","class","rx-button-unstyled d-icon-left-pencil btn-link","rx-id","open-editor",3,"click",4,"ngIf"],["type","button","class","rx-button-unstyled d-icon-cross btn-link","rx-id","remove-filter-preset",3,"click",4,"ngIf"],["rx-id","filter-count",1,"rx-filter-count"],["type","button","rx-id","open-editor",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-filter-preset",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"],[1,"text-tertiary"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Ao,1,2,"adapt-rx-control-label",0),n["\u0275\u0275template"](1,Po,3,0,"adapt-button",1),n["\u0275\u0275elementStart"](2,"div"),n["\u0275\u0275template"](3,Vo,8,5,"div",2),n["\u0275\u0275template"](4,ko,2,0,"span",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.options.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.filterPresets)("ngForTrackBy",t.trackByForFilterPresets),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===t.filterPresets.length))},directives:[f.NgIf,f.NgForOf,m.AdaptRxControlLabelComponent,m.AdaptButtonComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-filter-preset[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-filter-preset__header-container[_ngcontent-%COMP%]{display:flex;margin-bottom:5px}.rx-selected-filter-preset__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:.875rem}.rx-filter-count[_ngcontent-%COMP%]{font-size:.625rem;color:#959899}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class jp extends S.RxModalClass{constructor(e,t,i,n,o,r,a,d){super(e,d),this.context=e,this.adaptModalService=t,this.rxExpressionEditorService=i,this.translateService=n,this.rxRecordDefinitionCacheService=o,this.ngZone=r,this.rxGuidService=a,this.injector=d,this.rowActions=[],this.selectFormControlOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.field-name.label"),tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.field-name.tooltip")),options:[],emptyOption:!0},this.availableOnDevicesFormControlOptions=(0,c.getAvailableOnDevicesInspectorConfig)().options,this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.security-definition-name.label"),tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.security-definition-name.tooltip")),definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!1},this.iconPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.icon.label"),appendToBody:!0,required:!1}}ngOnInit(){super.ngOnInit();const e=this.context.getData();this.expressionConfigurator=e.expressionConfigurator,this.rowActionIndex=e.rowActionIndex,this.activeActionIndex=e.activeActionIndex,this.isReadOnly=e.isReadOnly,this.rowActions=(0,u.cloneDeep)(e.rowActions).map((e,t)=>(this.setSecurityFieldDefinitions(e),Object.assign(Object.assign({},e),{isOpen:t===this.rowActionIndex})))}ngAfterViewInit(){this.openActiveAction(),this.rowActionIndex&&this.accordionTabEls.toArray()[this.rowActionIndex].nativeElement.scrollIntoView({block:"nearest"})}cancel(){this.context.dismiss(m.DismissReasons.CLOSE_BTN)}trackByGuid(e,t){return t.guid}addRowAction(){this.markAsDirty(),this.rowActions.push(Object.assign({guid:this.rxGuidService.generate(),label:"New row action"+(0===this.rowActions.length?"":" "+this.rowActions.length),icon:"",recordDefinitionName:null,fieldId:null,recordInstance:null,disabled:null,hidden:null,actions:[],isOpen:!0,securityFieldDefinitions$:(0,o.of)(this.getSelectFormControlOptions())},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE)),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeRowAction(e,t){t.stopPropagation(),this.markAsDirty(),this.rowActions.splice(e,1)}openExpressionEditor(e,t,i){this.rxExpressionEditorService.openEditor({property:{path:i,value:t[i],label:this.getRowActionLabel(i)},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.markAsDirty(),t[i]=e.value})}getExpressionFormControlOptions(e){return{label:this.getRowActionLabel(e),tooltip:"recordInstance"===e?new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.recordInstance.tooltip")):null,dataDictionary$:this.context.getData().expressionConfigurator.getDataDictionary(e),operators:this.context.getData().expressionConfigurator.getOperators(e)}}saveActions(){const e=this.rowActions.map(e=>Object.assign(Object.assign({},(0,u.omit)(e,["isOpen","securityFieldDefinitions$"])),{action:"rowAction"}));this.context.close(e)}moveRowAction(e,t){(0,b.moveItemInArray)(this.rowActions,e,t),this.markAsDirty()}onDropInSelectedRowActionsContainer(e){(0,b.moveItemInArray)(this.rowActions,e.previousIndex,e.currentIndex),this.markAsDirty()}onRecordDefinitionChange(e){this.markAsDirty(),e.fieldId=null,this.setSecurityFieldDefinitions(e)}setSecurityFieldDefinitions(e){e.securityFieldDefinitions$=e.recordDefinitionName?this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(e=>this.getSelectFormControlOptions(e))):(0,o.of)(this.getSelectFormControlOptions())}getRowActionLabel(e){let t;switch(e){case"disabled":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.disabled.label";break;case"hidden":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.hidden.label";break;case"recordInstance":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.recordInstance.label"}return this.translateService.instant(t)}getSelectFormControlOptions(e=null){return Object.assign(Object.assign({},this.selectFormControlOptions),{options:e?e.fieldDefinitions.map(e=>({name:e.name,id:String(e.id)})):[]})}openActiveAction(){this.activeActionIndex>=0&&this.rowActionIndex>=0&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const e=this.actionListControlComponents.find(e=>{var t;return(0,u.isEqual)(e.value,null===(t=this.rowActions[this.rowActionIndex])||void 0===t?void 0:t.actions)});e&&e.focus({actionIndex:this.activeActionIndex})})})}toggleOpen(e){this.rowActions.forEach(t=>t.isOpen=e)}}jp.\u0275fac=function(e){return new(e||jp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.Injector))},jp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:jp,selectors:[["rx-record-grid-row-action-editor-modal"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Bo,7,x.NgForm),n["\u0275\u0275viewQuery"]($o,5,b.CdkDropList),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),n["\u0275\u0275viewQuery"](Lo,5,b.CdkDrag),n["\u0275\u0275viewQuery"](c.ActionListControlComponent,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rowActionsForm=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectedRowActionsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableSelectedRowAction=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponents=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:13,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],["id","selectedRowActionsDropList","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],["selectedRowActionsDropList","cdkDropList"],[3,"multiselect"],["rowActionsForm","ngForm"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf","ngForTrackBy"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["draggableSelectedRowAction",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[1,"d-flex","row"],["rx-id","label","rxNoWhitespace","",1,"form-group","d-block","col-4",3,"label","disabled","required","name","ngModel","ngModelChange"],["rx-id","icon",1,"form-group","d-block","col-4","px-2",3,"disabled","options","name","ngModel","ngModelChange"],["rx-id","recordDefinition",1,"form-group","d-block","col-4",3,"isDisabled","options","ngModel","name","ngModelChange"],["rx-id","fieldId",1,"col-4","px-2",3,"options","ngModel","name","disabled","appendToBody","ngModelChange"],["propertyPath","recordInstance","rx-id","recordInstance",1,"col-4",3,"disabled","options","ngModel","name","events"],["propertyPath","disabled","rx-id","disabled",1,"col-4",3,"disabled","options","ngModel","name","events"],["propertyPath","hidden","rx-id","hidden",1,"col-4",3,"disabled","options","ngModel","name","events"],["rx-id","availableOnDevices","required","",1,"col-4","px-2",3,"options","ngModel","name","disabled","appendToBody","ngModelChange"],[1,"d-inline-block","col-4","mt-2",3,"ngModel","name","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,Go,4,3,"button",4),n["\u0275\u0275template"](5,zo,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6,7),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedRowActionsContainer(e)}),n["\u0275\u0275elementStart"](8,"adapt-accordion",8),n["\u0275\u0275elementStart"](9,"form",null,9),n["\u0275\u0275template"](11,Xo,25,50,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](12,Wo,3,3,"div",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275template"](14,Ho,3,4,"button",13),n["\u0275\u0275elementStart"](15,"button",14),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](16),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.rowActions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("cdkDropListData",t.rowActions),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.rowActions)("ngForTrackBy",t.trackByGuid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.rowActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](17,9,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](18,11,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[f.NgIf,b.CdkDropList,m.AdaptAccordionComponent,x["\u0275NgNoValidate"],x.NgControlStatusGroup,x.NgForm,f.NgForOf,m.AdaptButtonComponent,b.CdkDrag,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,v.RxNoWhitespaceValidator,x.RequiredValidator,x.NgControlStatus,x.NgModel,l.IconPickerFormControlComponent,l.RxDefinitionPickerComponent,l.SelectFormControlComponent,l.ExpressionFormControlComponent,c.ActionListControlComponent,b.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe,f.AsyncPipe],styles:[$i]});class _p extends l.InspectorWidgetBase{constructor(e,t,i){super(e),this.injector=e,this.rxModalService=t,this.translateService=i,this.rowActions$=this.designerItemModel.rowActionButtonComponents$.pipe((0,r.map)(e=>e.map(e=>{const t=e.children.map(e=>(0,u.omit)(e,"type","children"));return Object.assign(Object.assign({},(0,u.pick)(e.data,["recordDefinitionName","recordInstance","fieldId","icon","disabled","hidden","label",d.RX_AVAILABLE_ON_DEVICES_PROP_NAME])),{guid:e.guid,actions:t})})),(0,r.shareReplay)(1))}openEditor(e,t){this.rowActions$.pipe((0,r.take)(1),(0,r.switchMap)(i=>(0,o.from)(this.rxModalService.openModal({content:jp,title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.modal.title"),size:d.OpenViewActionModalSize.Large,testID:"edit-row-actions",data:{expressionConfigurator:this.designerItemModel.expressionConfigurator,isReadOnly:this.isDisabled,rowActionIndex:e,rowActions:i,activeActionIndex:t}})))).subscribe({next:e=>this.designerItemModel.setRowActions(e),error:u.noop})}trackByForRowActions(e,t){return t.label}removeRowAction(e,t){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:S.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.row-action-delete.warning",{name:t[e].label})}).then(i=>{i&&(t.splice(e,1),this.designerItemModel.setRowActions(t))})}focus(e){this.openEditor(e.rowActionIndex,e.actionIndex)}}_p.\u0275fac=function(e){return new(e||_p)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](p.TranslateService))},_p.\u0275cmp=n["\u0275\u0275defineComponent"]({type:_p,selectors:[["rx-record-grid-row-action-editor-widget"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["btn-type","tertiary","rx-id","open-row-action-editor-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[4,"ngIf"],["rx-id","no-row-actions","class","text-tertiary",4,"ngIf"],["rx-id","row-actions-list","class","rx-selected-row-action",4,"ngFor","ngForOf","ngForTrackBy"],["rx-id","no-row-actions",1,"text-tertiary"],["rx-id","row-actions-list",1,"rx-selected-row-action"],[1,"rx-selected-row-action__header-container"],["rx-id","row-action",1,"rx-selected-row-action__header-title",3,"title"],["type","button","rx-id","edit-button",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-button",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openEditor()}),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275text"](2," Edit row actions\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Jo,3,3,"div",2),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,1,t.rowActions$)))},directives:[m.AdaptButtonComponent,f.NgIf,f.NgForOf],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-row-action[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-row-action__header-container[_ngcontent-%COMP%]{display:flex}.rx-selected-row-action__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;font-size:14px}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class Vp extends l.ValueAccessor{constructor(e,t,i){super(),this.renderer=e,this.rxRecordGridUtilsService=t,this.rxStringService=i,this.ColumnSortDirection=Vc,this.updateOptionsSubject=new o.BehaviorSubject(null),this.columnOptions$=this.updateOptionsSubject.pipe((0,r.switchMap)(()=>this.options.gridColumns&&this.options.recordDefinition?(0,o.forkJoin)(this.options.gridColumns.filter(e=>e.sortable).map(e=>this.rxStringService.isEmptySafe(e.title)?this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.options.recordDefinition).pipe((0,r.map)(t=>({id:e.fieldId,name:`[${t.name}]`}))):(0,o.of)({id:e.fieldId,name:e.title}))).pipe((0,r.defaultIfEmpty)([])):(0,o.of)([]))),this.selectedColumnOption=[]}get selectedSortDirection(){return this.value?this.value.direction:null}ngOnChanges(e){var t,i,n;!(null===(t=e.options)||void 0===t?void 0:t.previousValue)||(0,u.isEqual)(e.options.currentValue.gridColumns,e.options.previousValue.gridColumns)&&(null===(i=e.options.currentValue.recordDefinition)||void 0===i?void 0:i.name)===(null===(n=e.options.previousValue.recordDefinition)||void 0===n?void 0:n.name)||this.updateOptionsSubject.next()}onWriteValue(e){this.columnOptions$.pipe((0,r.take)(1)).subscribe(t=>{this.selectedColumnOption=e?[t.find(t=>t.id===e.fieldId)]:[]})}focus(){this.renderer.selectRootElement(this.adaptRxSelect.selectButtonRef.nativeElement,!0).focus()}onSelectModelChange(e){this.selectedColumnOption=e,this.value=(0,u.isEmpty)(e)?null:{fieldId:(0,u.head)(e).id,direction:Vc.Asc}}setSortDirection(e){this.value=Object.assign(Object.assign({},this.value),{direction:e})}optionFormatter(e){return e.name}ngOnDestroy(){this.updateOptionsSubject.complete()}}Vp.\u0275fac=function(e){return new(e||Vp)(n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](_c),n["\u0275\u0275directiveInject"](v.RxStringService))},Vp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vp,selectors:[["rx-record-grid-sort-editor-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Yo,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptRxSelect=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:x.NG_VALUE_ACCESSOR,useExisting:Vp,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:8,consts:[[1,"form-group",3,"ngClass"],["class","form-control-label",4,"ngIf"],[1,"d-flex"],["class","pr-1 w-100",3,"options","required","disabled","ngModel","optionFormatter","emptyOption","ngModelChange",4,"ngIf"],["class","btn-group","data-toggle","buttons",4,"ngIf"],[1,"form-control-label"],[1,"pr-1","w-100",3,"options","required","disabled","ngModel","optionFormatter","emptyOption","ngModelChange"],["adaptRxSelect",""],["data-toggle","buttons",1,"btn-group"],["adapt-button","","btn-type","secondary","type","button",1,"pl-2","pr-2","d-icon-arrow_up",3,"click"],["adapt-button","","btn-type","secondary","type","button",1,"pl-2","pr-2","d-icon-arrow_down",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,Zo,2,1,"label",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275template"](3,er,2,6,"adapt-rx-select",3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,tr,3,4,"div",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](6,ir,t.options.required)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.options.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,4,t.columnOptions$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.selectedColumnOption.length))},directives:[f.NgClass,f.NgIf,m.AdaptRxSelectComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel,m.AdaptButtonComponent],pipes:[f.AsyncPipe],encapsulation:2}),function(e){e.Record="record",e.Association="association"}(np||(np={}));class kp extends S.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.params=this.activeModalRef.getData(),this.presetColumns=this.params.presetColumns.map((e,t)=>{const i=this.params.gridColumns.find(t=>t.fieldId===e.data.fieldId);return Object.assign(Object.assign({},(0,u.cloneDeep)(e)),{isOpen:0===t,title:i.title,fallbackTitle:i.fallbackTitle})}),this.isReadOnly=this.params.isReadOnly,this.columnWidthPropertyOptions=jc.columnProperties.find(({name:e})=>"width"===e).options,this.presetColumns.sort((e,t)=>e.data.index-t.data.index)}expandAllColumns(e){e.stopPropagation(),this.presetColumns.forEach(e=>e.isOpen=!0)}collapseAllColumns(e){e.stopPropagation(),this.presetColumns.forEach(e=>e.isOpen=!1)}saveChanges(){this.activeModalRef.close({presetColumns:this.presetColumns.map(e=>(0,u.omit)(e,["isOpen","title"]))})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}moveColumn(e,t){this.markAsDirty(),(0,b.moveItemInArray)(this.presetColumns,e,t),this.updateColumnIndexes()}onDropInSelectedColumnsContainer(e){this.moveColumn(e.previousIndex,e.currentIndex)}trackByGuid(e,t){return t.guid}updateColumnIndexes(){this.presetColumns.forEach((e,t)=>{e.data.index=t})}}kp.\u0275fac=function(e){return new(e||kp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},kp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kp,selectors:[["rx-record-grid-view-preset-columns-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:16,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","justify-content-end"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragDisabled","cdkDragData"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],[1,"rx-ellipsis",3,"title"],["class","designer-modal-card-sub-title ml-2",3,"title",4,"ngIf"],["class","right-header-block",4,"ngIf"],["label","Column header",3,"disabled","ngModel","ngModelChange"],["label","Visible",3,"ngModel","disabled","ngModelChange"],[1,"d-block","col-5","p-0",3,"options","ngModel","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"designer-modal-card-sub-title","ml-2",3,"title"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div",4),n["\u0275\u0275elementStart"](5,"button",5),n["\u0275\u0275listener"]("click",function(e){return t.expandAllColumns(e)}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",6),n["\u0275\u0275listener"]("click",function(e){return t.collapseAllColumns(e)}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedColumnsContainer(e)}),n["\u0275\u0275elementStart"](12,"adapt-accordion",8),n["\u0275\u0275template"](13,ar,13,16,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275template"](15,sr,3,4,"button",11),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,8,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,10,"com.bmc.arsys.rx.client.common.collapse-all.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("cdkDropListData",t.presetColumns),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.presetColumns)("ngForTrackBy",t.trackByGuid),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](18,12,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](19,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptButtonComponent,b.CdkDropList,m.AdaptAccordionComponent,f.NgForOf,f.NgIf,b.CdkDrag,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,x.NgControlStatus,x.NgModel,m.AdaptRxCheckboxComponent,l.StepperWithUnitsFormControlComponent,b.CdkDragHandle],pipes:[p.TranslatePipe],styles:[$i]});class Bp extends S.RxModalClass{constructor(e,t,i,n,a,s,l){super(e,t),this.activeModalRef=e,this.injector=t,this.rxModalService=i,this.rxRecordGridDesignUtilsService=n,this.rxRecordGridFilterSelectHelperService=a,this.rxRecordGridUtilsService=s,this.rxStringService=l,this.params=this.activeModalRef.getData(),this.presets=[],this.isReadOnly=this.params.isReadOnly,this.gridColumns$=this.params.gridColumns&&this.params.recordDefinition?(0,o.forkJoin)(this.params.gridColumns.map(e=>this.rxStringService.isEmptySafe(e.title)?this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.params.recordDefinition).pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{fallbackTitle:`[${t.name}]`}))):(0,o.of)(Object.assign(Object.assign({},e),{fallbackTitle:`[${e.title}]`})))).pipe((0,r.defaultIfEmpty)([])):(0,o.of)([])}ngOnInit(){super.ngOnInit(),this.gridColumns$.pipe((0,r.take)(1)).subscribe(e=>{this.namedFilterOptions=this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(e),this.presets=this.params.presetsList.map(({guid:t,name:i},n)=>{const o=this.params.viewPresets.find(({data:e})=>e.viewPresetGuid===t),r=e.filter(e=>e.filterable).map(e=>e.fieldId),a=o.data.viewPresetGuid,s=(0,u.cloneDeep)(o.children.filter(e=>e.type===jc.components.columnViewPreset)),l=s.find(e=>(0,u.isObject)(e.data.sortable)),d=l?{fieldId:l.data.fieldId,direction:l.data.sortable.direction}:null;return{presetName:i,gridColumns:e,presetColumns:s,guid:a,tags:this.getTags(s,e),isOpen:this.params.activePreset?this.params.activePreset===a:0===n,sortModel:d,filters:{basicFilters:this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(o.children),filtersJson:o.data.filters},filterSelectControlOptions:{primaryRecordDefinition:Object.assign(Object.assign({},this.params.recordDefinition),{fieldDefinitions:this.params.recordDefinition.fieldDefinitions.filter(e=>r.includes(String(e.id)))}),selectedFieldIds:e.map(e=>e.fieldId),namedFilterOptions:this.namedFilterOptions},sortEditorControlOptions:{label:"Initial column sort",gridColumns:(0,u.sortBy)(e,"title"),recordDefinition:this.params.recordDefinition}}})})}saveChanges(){this.activeModalRef.close({presets:this.presets})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}expandAll(e){e.stopPropagation(),this.presets.forEach(e=>e.isOpen=!0)}collapseAll(e){e.stopPropagation(),this.presets.forEach(e=>e.isOpen=!1)}openPresetColumnsModal(e){this.rxModalService.openModal({title:`Edit grid columns for ${e.presetName}`,content:kp,size:d.OpenViewActionModalSize.Large,data:{gridColumns:e.gridColumns,presetColumns:e.presetColumns,isReadOnly:this.isReadOnly},testID:"edit-grid-columns-for-view-preset"}).then(t=>{(null==t?void 0:t.presetColumns)&&(e.presetColumns=t.presetColumns,e.tags=this.getTags(e.presetColumns,e.gridColumns),this.markAsDirty())}).catch(u.noop)}trackByPreset(e,t){return t.guid}getTags(e,t){const i=e.filter(e=>e.data.visible).map(e=>{const i=t.find(t=>t.fieldId===e.data.fieldId);return i.title||i.fallbackTitle}),n=i.slice(0,5);return{items:n,restCount:i.length-n.length}}onSortChange(e,t){t.presetColumns.forEach(t=>{t.data.sortable=t.data.fieldId===(null==e?void 0:e.fieldId)?(0,u.pick)(e,"direction"):null}),this.markAsDirty()}}Bp.\u0275fac=function(e){return new(e||Bp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](Lp),n["\u0275\u0275directiveInject"](Np),n["\u0275\u0275directiveInject"](_c),n["\u0275\u0275directiveInject"](v.RxStringService))},Bp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bp,selectors:[["rx-record-grid-edit-view-presets-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:15,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","justify-content-end"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],[1,"designer-modal-accordion-wrapper"],[3,"multiselect"],["class","designer-modal-accordion-content",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["btn-type","tertiary","rx-id","open-grid-preset-columns-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[1,"mb-3"],["type","active",4,"ngFor","ngForOf"],["class","btn-link rx-button-unstyled ml-1","type","button",3,"click",4,"ngIf"],[1,"d-block","w-50",3,"options","disabled","ngModel","ngModelChange"],[3,"options","disabled","ngModel","ngModelChange"],["type","active"],["type","button",1,"btn-link","rx-button-unstyled","ml-1",3,"click"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div",4),n["\u0275\u0275elementStart"](5,"button",5),n["\u0275\u0275listener"]("click",function(e){return t.expandAll(e)}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",6),n["\u0275\u0275listener"]("click",function(e){return t.collapseAll(e)}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275elementStart"](12,"adapt-accordion",8),n["\u0275\u0275template"](13,cr,15,11,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275template"](15,pr,3,4,"button",11),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,7,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,9,"com.bmc.arsys.rx.client.common.collapse-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.presets)("ngForTrackBy",t.trackByPreset),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](18,11,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](19,13,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptButtonComponent,m.AdaptAccordionComponent,f.NgForOf,f.NgIf,m.AdaptAccordionTabComponent,Vp,x.NgControlStatus,x.NgModel,xp,m.AdaptTagComponent],pipes:[p.TranslatePipe],styles:[$i]});class $p extends l.InspectorWidgetBase{constructor(e,t,i,n,a,s,l){super(e),this.injector=e,this.rxModalService=t,this.viewDesignerFacade=i,this.rxGuidService=n,this.rxRecordGridDesignUtilsService=a,this.rxRecordGridFilterHelperService=s,this.rxJsonParserService=l,this.currentPresetSelectorGuid$=new o.ReplaySubject(1),this.presetSelectors$=this.viewDesignerFacade.getComponentsByType(d.RxViewComponentType.ViewPresetSelector),this.presetSelectorOptions$=this.presetSelectors$.pipe((0,r.map)(e=>e.map(({guid:e,data:t})=>({id:e,name:t.name})))),this.destroyed$=new o.ReplaySubject(1),this.selectedPresetsList$=this.currentPresetSelectorGuid$.pipe((0,r.tap)(e=>this.updateViewPresetSelectorProp(e)),(0,r.switchMap)(e=>this.rxRecordGridDesignUtilsService.getPresetsList(e)),(0,r.shareReplay)({refCount:!0,bufferSize:1}),(0,r.takeUntil)(this.destroyed$)),this.viewPresetSelectorProp$=this.designerItemModel.sandbox.getComponentPropertyValue("viewPresetSelector"),this.gridColumnGuids$=this.designerItemModel.sandbox.getChildComponentGuids(e=>e.type===jc.components.column),this.selectOptions={options:[],emptyOption:!0,label:"View preset selector",beforeValueChange:(e,t)=>e&&e!==t?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"All record grid view presets will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}ngOnChanges(e){var t,i;(null===(t=e.options.currentValue.recordDefinition)||void 0===t?void 0:t.name)!==(null===(i=e.options.previousValue.recordDefinition)||void 0===i?void 0:i.name)&&(this.currentPresetSelectorGuid=null,this.currentPresetSelectorGuid$.next(null))}ngOnInit(){this.presetSelectorOptions$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.selectOptions.options=e}),this.viewPresetSelectorProp$.pipe((0,r.first)(),(0,r.map)(e=>this.designerItemModel.extractViewPresetSelectorGuid(e)),(0,r.withLatestFrom)(this.presetSelectorOptions$),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{var i;const n=null===(i=t.find(t=>t.id===e))||void 0===i?void 0:i.id;n&&(this.currentPresetSelectorGuid=n,this.currentPresetSelectorGuid$.next(this.currentPresetSelectorGuid))}),this.gridColumnGuids$.pipe((0,r.filter)(()=>!!this.currentPresetSelectorGuid),(0,r.switchMap)(e=>(0,o.combineLatest)(e.map(e=>(0,o.combineLatest)([this.designerItemModel.sandbox.getComponentPropertyValue("sortable",e),this.designerItemModel.sandbox.getComponentPropertyValue("filterable",e),this.viewDesignerFacade.getChildComponents(e,e=>e.type===jc.components.filterPreset)])))),(0,r.distinctUntilChanged)(u.isEqual),(0,r.debounceTime)(100),(0,r.switchMap)(()=>this.designerItemModel.columns$.pipe((0,r.first)())),(0,r.withLatestFrom)(this.designerItemModel.childComponentsTree$.pipe((0,r.map)(e=>(0,u.cloneDeep)(e)))),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.updateColumnPresets(t,e)})}updateColumnPresets(e,t){const i=e.filter(e=>e.type===jc.components.viewPreset).map(e=>{const i=e.children.filter(e=>e.type===jc.components.columnViewPreset),n=this.getPresetFilterComponentsForColumns(e,t),o=t.map(e=>{const t=i.find(t=>t.data.fieldId===e.fieldId);if(t)return e.sortable||(t.data.sortable=null),t;{const t=this.rxRecordGridDesignUtilsService.getColumnPresetPayload(e);return t.data.visible=!1,t.data.index=null,t.data.width=null,t}}).map((e,t,i)=>(null===e.data.index&&(e.data.index=Math.max(...i.map(e=>e.data.index))+1),e));return e.children=[...o,...n],e});this.designerItemModel.sandbox.setChildrenByType(i,[jc.components.viewPreset])}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getPresetFilterComponentsForColumns(e,t){const i=t.filter(e=>e.filterable).map(e=>e.fieldId),n=e.children.filter(e=>e.type!==jc.components.columnViewPreset),o=n.reduce((e,n)=>{var o,r,a;if(i.includes(n.data.fieldId)){const i=(null!==(r=null===(o=t.find(e=>e.fieldId===n.data.fieldId))||void 0===o?void 0:o.namedFilterOptions)&&void 0!==r?r:[]).map(e=>e.guid);let s=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData([n]);s=this.deserializeNamedOptions(s);const l=null===(a=s[0].value)||void 0===a?void 0:a[d.RecordGridNamedFilterOptionKey];l?i.includes(l)&&e.push(n):e.push(n)}return e},[]);if(n.length){if(o.length<n.length){const t=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(o),i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.data.filters,t);e.data.filters=i?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(i),t):null}return o}return n}deserializeNamedOptions(e){return e.map(e=>{const t=this.rxJsonParserService.tryParseJson(e.value);return t&&t[d.RecordGridNamedFilterOptionKey]?Object.assign(Object.assign({},e),{value:t}):e})}openEditor(e){(0,o.combineLatest)([this.designerItemModel.gridViewPresets$,this.selectedPresetsList$,this.designerItemModel.columns$,this.designerItemModel.recordDefinition$]).pipe((0,r.first)(),(0,r.takeUntil)(this.destroyed$)).subscribe(([t,i,n,o])=>{this.rxModalService.openModal({title:"Edit view presets",content:Bp,size:d.OpenViewActionModalSize.Large,data:{viewPresets:t,presetsList:i,gridColumns:n,recordDefinition:o,activePreset:null==e?void 0:e.guid,isReadOnly:this.isDisabled}}).then(e=>{this.onPresetModalClose(e)}).catch(u.noop)})}trackByGuid(e,t){return t.name}onPresetModalClose(e){e&&e.presets&&this.designerItemModel.childComponentsTree$.pipe((0,r.first)(),(0,r.map)(e=>(0,u.cloneDeep)(e)),(0,r.takeUntil)(this.destroyed$)).subscribe(t=>{e.presets.forEach(e=>{const i=t.find(t=>t.type===jc.components.viewPreset&&t.data.viewPresetGuid===e.guid);if(i){const t=e.presetColumns.map(e=>this.rxRecordGridDesignUtilsService.getColumnPresetPayload(e.data)),n=this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(e.filters.basicFilters);i.data={viewPresetGuid:e.guid,filters:e.filters.filtersJson},i.children=[...t,...n]}}),this.designerItemModel.sandbox.setChildren(t)})}updateViewPresetSelectorProp(e){this.designerItemModel.sandbox.updateComponentProperties({viewPresetSelector:e?`\${view.components.${e}.api}`:null})}}$p.\u0275fac=function(e){return new(e||$p)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](c.ViewDesignerFacade),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](Lp),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](v.RxJsonParserService))},$p.\u0275cmp=n["\u0275\u0275defineComponent"]({type:$p,selectors:[["rx-record-grid-view-presets-widget"]],inputs:{options:"options"},features:[n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:6,consts:[["rx-id","preset-selector",1,"d-block","mb-3",3,"options","ngModel","disabled","ngModelChange"],[3,"hidden",4,"ngIf"],[3,"hidden"],["btn-type","tertiary","rx-id","edit-view-presets-button","class","p-0 pb-1",3,"click",4,"ngIf"],["rx-id","no-presets","class","text-tertiary",4,"ngIf"],["rx-id","presets-list"],["class","border mb-1 pr-2 d-flex justify-content-between text-break",4,"ngFor","ngForOf","ngForTrackBy"],["btn-type","tertiary","rx-id","edit-view-presets-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-left-plus_circle"],["rx-id","no-presets",1,"text-tertiary"],[1,"border","mb-1","pr-2","d-flex","justify-content-between","text-break"],["rx-id","preset-name",1,"preset-name",3,"title"],["type","button","rx-id","edit-button",1,"rx-button-unstyled","d-icon-pencil","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-select-form-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.currentPresetSelectorGuid=e})("ngModelChange",function(e){return t.currentPresetSelectorGuid$.next(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](1,hr,5,5,"div",1),n["\u0275\u0275pipe"](2,"async")),2&e&&(n["\u0275\u0275property"]("options",t.selectOptions)("ngModel",t.currentPresetSelectorGuid)("disabled",t.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](2,4,t.selectedPresetsList$)))},directives:[l.SelectFormControlComponent,x.NgControlStatus,x.NgModel,f.NgIf,f.NgForOf,m.AdaptButtonComponent],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.preset-name[_ngcontent-%COMP%]{padding:5px 10px;font-size:14px}.d-icon-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class Lp{constructor(e,t,i,n,o,r,a,s,l,d){this.rxGuidService=e,this.rxRecordGridConfigUtilsService=t,this.rxDefinitionNameService=i,this.rxFeatureService=n,this.rxModalService=o,this.rxRecordGridUtilsService=r,this.rxRecordGridFilterHelperService=a,this.translateService=s,this.viewDesignerFacade=l,this.rxJsonParserService=d}getColumnActionComponentPayloads(e){return(0,u.map)(e,e=>Object.assign(Object.assign({},e),{type:d.RxViewComponentType.Action}))}getNamedFilterOptionPayloads(e){return(0,u.map)(e,e=>Object.assign(Object.assign({},e),{type:jc.components.filterPreset}))}getGridFilterComponentPayloads(e){return(0,u.map)(e,e=>({guid:e.guid,type:jc.components.filter,data:Object.assign({fieldId:e.fieldId,value:e.value},e.$DISPLAYVALUE$&&{$DISPLAYVALUE$:e.$DISPLAYVALUE$})}))}getColumnComponentPayloads(e,t){return(0,u.map)(e,(e,i)=>{let n="false";(null==t?void 0:t.fieldId)===e.fieldId&&!1!==e.sortable?n=JSON.stringify({direction:t.direction}):((0,u.isObject)(e.sortable)||!0===e.sortable)&&(n="true");const o={alignment:e.alignment,fieldId:e.fieldId,filterable:e.filterable,filterType:e.filterType,index:String(e.index),sortable:n,title:e.title,searchable:e.searchable,visible:e.visible,cellDisplayProperties:e.cellDisplayProperties,width:e.width,wrapText:e.wrapText,typeaheadKeystrokeCount:e.typeaheadKeystrokeCount,additionalQueryCriteria:e.additionalQueryCriteria};return{type:jc.components.column,guid:e.guid,insertIndex:i,outletName:d.RX_VIEW_DEFINITION.defaultOutletName,data:o,children:[...this.getColumnActionComponentPayloads(e.actions),...this.getNamedFilterOptionPayloads(e.namedFilterOptions)]}})}getGridFilterPresetComponentPayloads(e,t){const i=t.reduce((e,t)=>e.concat(...t.namedFilterOptions.map(e=>e.guid)),[]),n=t.map(e=>e.fieldId);return(0,u.map)(e,e=>{const t=e.recordGridFilters.filter(e=>n.includes(e.fieldId)).filter(e=>{const t=(0,u.isObject)(e.value)?e.value:this.rxJsonParserService.tryParseJson(e.value);return!(null==t?void 0:t[d.RecordGridNamedFilterOptionKey])||i.includes(t[d.RecordGridNamedFilterOptionKey])}),o=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,t);return{guid:e.guid,type:jc.components.filterPreset,data:{title:e.title,filters:o?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(o),t):null},children:(0,u.map)(t,e=>({guid:e.guid,type:jc.components.filter,data:Object.assign({fieldId:e.fieldId,value:e.value},e.$DISPLAYVALUE$&&{$DISPLAYVALUE$:e.$DISPLAYVALUE$})}))}})}getFilterPresetDescriptorsFromChildData(e){return(0,u.map)(e.filter(e=>e.type===jc.components.filterPreset),e=>({filters:e.data.filters,recordGridFilters:(0,u.map)((0,u.filter)(e.children,e=>e.type===jc.components.filter),e=>({fieldId:e.data.fieldId,value:e.data.value,guid:e.guid,$DISPLAYVALUE$:e.data.$DISPLAYVALUE$})),title:e.data.title,guid:e.guid})).filter(e=>{var t;return(null===(t=e.recordGridFilters)||void 0===t?void 0:t.length)>0})}getActionsFromComponent(e){return(0,u.map)((0,u.filter)(e.children,e=>e.type===d.RxViewComponentType.Action),e=>Object.assign(Object.assign({},e),{data:Object.assign({},e.data)}))}getNamedFilterOptionsFromComponent(e){return e.children.filter(e=>e.type===jc.components.filterPreset).map(e=>Object.assign(Object.assign({},e),{data:Object.assign({},e.data)}))}getDefaultColumns(e){let t=[];if(e){const i=e.fieldDefinitions,n=a.RX_RECORD_DEFINITION.coreFieldIds;t=[{title:(0,u.find)(i,e=>e.id===n.displayId).name,fieldId:String(n.displayId),searchable:!0}],e.resourceType===a.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType&&(t.push({title:(0,u.find)(i,e=>e.id===n.modifiedDate).name,fieldId:String(n.modifiedDate),searchable:!1}),t.push({title:(0,u.find)(i,e=>e.id===n.description).name,fieldId:String(n.description),searchable:!0}));const o=(0,u.reduce)(jc.columnProperties,(e,t)=>(e[t.name]=t.defaultValue,e),{});(0,u.forEach)(t,(e,t)=>(0,u.defaults)(e,o,{index:t,guid:this.rxGuidService.generate()}))}return t}getInitialSortColumnModel(e){const t=(0,u.find)(e,e=>(0,u.isObject)(e.sortable));return t?{direction:t.sortable.direction,fieldId:t.fieldId}:null}getInspectorColumnsFromDesignData(e){return e.map(e=>{const t=e.data;return Object.assign(Object.assign({},(0,u.pick)(t,["alignment","fieldId","filterType","searchable","title","cellDisplayProperties","width","typeaheadKeystrokeCount","additionalQueryCriteria"])),{actions:this.getActionsFromComponent(e),namedFilterOptions:this.getNamedFilterOptionsFromComponent(e),guid:e.guid,filterable:this.rxRecordGridConfigUtilsService.getBooleanValue(t.filterable)||(0,u.isUndefined)(t.filterable),sortable:this.rxRecordGridConfigUtilsService.parseConfigString(t.sortable)||(0,u.isUndefined)(t.sortable),visible:this.rxRecordGridConfigUtilsService.getBooleanValue(t.visible)||(0,u.isUndefined)(t.visible),wrapText:this.rxRecordGridConfigUtilsService.getBooleanValue(t.wrapText),index:Number(t.index)})})}getComponentProperties(e){var t,i,n;return{bordered:null===(t=e.bordered)||void 0===t||t,expandable:e.expandable,name:e.name,recordDefinitionName:e.recordDefinitionName,showDataForAllLocales:e.showDataForAllLocales,associationDefinitionName:e.associationDefinitionName,associatedRecordNodeSide:e.associatedRecordNodeSide,associatedRecordId:e.associatedRecordId,associatedRoleName:e.associatedRoleName,filterExpression:e.filterExpression,filters:(0,u.isObject)(e.filters)?e.filters.filtersJson:e.filters,defaultFilterPreset:this.getDefaultFilterPreset(e),cardLayoutWidth:e.cardLayoutWidth,enableFiltering:e.enableFiltering,requiredFilters:null!==(i=e.requiredFilters)&&void 0!==i?i:0,getDataForHiddenColumns:null===(n=e.getDataForHiddenColumns)||void 0===n||n,enableFilterPresets:e.enableFilterPresets,enableRowSelection:e.enableRowSelection,styles:e.styles,striped:!!e.striped,viewPresetSelector:e.viewPresetSelector,[d.RX_AVAILABLE_ON_DEVICES_PROP_NAME]:e[d.RX_AVAILABLE_ON_DEVICES_PROP_NAME]}}getDefaultFilterPreset(e){return e.defaultFilterPreset&&e.filterPresets?e.filterPresets.some(t=>t.guid===e.defaultFilterPreset)?e.defaultFilterPreset:null:e.defaultFilterPreset&&!e.filterPresets?e.defaultFilterPreset:null}getComponentDesignProperties(e,t,i,n,o){const r=this.getInspectorColumnsFromDesignData(i);return e=Object.assign(Object.assign({},t),e),Object.assign(Object.assign({},e),{mode:e.associationDefinitionName?np.Association:np.Record,filters:{basicFilters:n,filtersJson:e.filters},filterMode:e.filterExpression?ip.Expression:ip.Basic,filterPresets:o,initialSortColumn:this.getInitialSortColumnModel(r),columns:r})}getActionButtonDescriptorsFromChildData(e){return e.filter(e=>e.type===d.RxViewComponentType.ActionButton)}getGridViewPresetsFromChildData(e){return e.filter(e=>e.type===jc.components.viewPreset)}getBasicRecordGridFiltersFromChildData(e){return(0,u.map)(e.filter(e=>e.type===jc.components.filter),e=>({fieldId:e.data.fieldId,value:e.data.value,guid:e.guid,$DISPLAYVALUE$:e.data.$DISPLAYVALUE$}))}getRowActionButtonPayloads(e){return e.map(e=>({type:d.RxViewComponentType.ActionButton,guid:e.guid,data:(0,u.omit)(e,"actions","guid"),outletName:jc.rowActionsOutletName,children:this.getColumnActionComponentPayloads(e.actions)}))}getInspector(e,t,i){const n=Boolean(e.recordDefinitionName&&t),o=[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Record grid.")}},{name:"mode",component:l.GroupButtonFormControlComponent,options:{required:!1,label:"Mode",items:[{value:np.Record,name:"Record"},{value:np.Association,name:"Association"}]}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:e.mode===np.Association?"Record definition to show":"Record definition name",definitionType:e.mode===np.Association?l.RxDefinitionPickerType.RegularDataRecord:l.RxDefinitionPickerType.Record,required:!0,beforeValueChange:(t,i)=>!(0,u.isEmpty)(e.columns)&&Boolean(t)?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Initial column sort, initial filters, and added grid columns will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}],r=[{name:"cardLayoutWidth",component:l.SelectFormControlComponent,options:{label:"Card layout width",sortAlphabetically:!1,options:jc.cardLayoutWidthOptions,emptyOption:!0,tooltip:new s.Tooltip("The width of the Record grid view component at which it will switch to card layout.")}},{name:"initialSortColumn",component:Vp,options:{label:"Initial column sort",gridColumns:(0,u.sortBy)(e.columns,"title"),recordDefinition:t}},{name:"enableRowSelection",component:l.OptionalSelectFormControlComponent,options:{label:"Enable row selection",options:[{id:jc.selectionTypes.multiple,name:"Multiple rows"},{id:jc.selectionTypes.single,name:"Single row"}]}},{name:"expandable",component:l.SwitchFormControlComponent,hidden:!this.rxFeatureService.isFeatureEnabled("DRD21-44922"),options:{label:"Enable grid width expansion",tooltip:new s.Tooltip("If enabled, the grid will expand in width to accommodate wider columns. If one or more columns extend beyond the right border of the grid, a horizontal scroll bar will appear.<br>Column width will be converted to pixels if grid width expansion mode is enabled.")}},{name:"bordered",component:l.SwitchFormControlComponent,options:{label:"Show border lines"}},{name:"striped",component:l.SwitchFormControlComponent,options:{label:"Show striped rows"}},{name:"showDataForAllLocales",component:l.SwitchFormControlComponent,options:{label:"Show data for all locales",tooltip:new s.Tooltip("If enabled, data for all locales will be displayed in the grid at runtime. If disabled, only data for current locale will be displayed.")}},(0,c.getAvailableOnDevicesInspectorConfig)(),(0,c.getStylesFieldInspectorConfig)()];if(e.mode===np.Association){n&&o.push({name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{required:!0,label:"Association to use",options:(0,u.map)(i,e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})),emptyOption:!0}});const t=(0,u.find)(i,t=>t.name===e.associationDefinitionName);t&&t.nodeAId===t.nodeBId&&o.push({name:"associatedRecordNodeSide",component:l.SelectFormControlComponent,options:{required:!0,label:"Associated record node side",options:[{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,name:t.nodeAName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,name:t.nodeBName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}],emptyOption:!0}}),o.push({name:"associatedRecordId",component:l.ExpressionInspectorControlComponent,options:{label:"Associated record ID",isRequired:!0}}),t&&t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value&&o.push({name:"associatedRoleName",component:l.ExpressionInspectorControlComponent,options:{label:"Associated role name"}})}n&&(o.push({name:"columns",component:ep,options:{recordDefinition:t}}),o.push({name:"getDataForHiddenColumns",component:l.SwitchFormControlComponent,options:{label:"Get data for hidden columns",tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.get-data-for-hidden-columns.tooltip"))}}),o.push({widgetName:"rowActions",component:_p}));const a=[{name:"enableFiltering",component:l.SwitchFormControlComponent,options:{label:"Enable filtering"}},{name:"requiredFilters",component:l.SelectFormControlComponent,isDisabled:!e.enableFiltering,options:{label:"Required number of filters",sortAlphabetically:!1,options:jc.numberOfFiltersOptions,emptyOption:!1,tooltip:new s.Tooltip("Data will be displayed in the grid only if a) the number of applied filters is greater than or equal to the required number of filters, or b) a search is performed.")}}];n&&(a.push({name:"filterMode",component:l.GroupButtonFormControlComponent,options:{label:"Initial filters",items:[{name:"Basic",value:ip.Basic},{name:"Expression",value:ip.Expression}],tooltip:new s.Tooltip("Select the records that should be displayed on the deployed application UI. Application users can add filters in the deployed application."),beforeValueChange:(t,i)=>i===ip.Expression&&e.filters.filtersJson||i===ip.Basic&&e.filterExpression?this.rxModalService.confirm({title:"Change filter type",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Current filter will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}),e.filterMode===ip.Basic?a.push({name:"filters",component:xp,options:{primaryRecordDefinition:t}}):a.push({name:"filterExpression",component:l.ExpressionInspectorControlComponent,options:{label:"Initial filters",isLabelHidden:!0}}),a.push({name:"enableFilterPresets",component:l.SwitchFormControlComponent,isDisabled:!e.enableFiltering,options:{label:"Enable filter presets"}}),a.push({name:"filterPresets",component:Pp,options:{label:"Filter presets",tooltip:new s.Tooltip("Predefine sets of record grid filters users can apply."),primaryRecordDefinition:t,columns:e.columns.filter(e=>e.filterable)}})),(0,u.isEmpty)(e.filterPresets)||a.push({name:"defaultFilterPreset",component:l.SelectFormControlComponent,options:{label:"Default filter preset",tooltip:new s.Tooltip("Select a filter preset to be applied when a user opens this view for the first time."),options:(0,u.map)(e.filterPresets,e=>({id:e.guid,name:e.title})),emptyOption:!0}});return{inspectorSectionConfigs:[{label:"General",controls:o},{label:"Filters",controls:a},{label:"Presentation",controls:r},{label:"View presets",controls:[{component:$p,options:{recordDefinition:t}}]}]}}getColumnDataDictionaryBranch(e,t,i,n,a,s){const l=(0,o.combineLatest)([n,a]).pipe((0,r.switchMap)(([t,i])=>i?this.getColumnsDataDictionaryBuilder(e,t,i).pipe((0,r.map)(t=>({label:this.rxDefinitionNameService.getDisplayName(i.name),expression:`\${view.components.${e}.api}`,children:[{label:"First selected row",expression:`\${view.components.${e}.firstSelectedRow}`,children:t("firstSelectedRow")},{label:"Is user allowed to delete records",expression:`\${view.components.${e}.isUserAllowedToDeleteRecords}`},{label:"Last action row",expression:`\${view.components.${e}.clickableRow}`,children:t("clickableRow")},{label:"Selected rows",expression:`\${view.components.${e}.selectedRows}`,children:t("fieldValuesByFieldId")},{label:"Selected row count",expression:`\${view.components.${e}.selectedRowCount}`},{label:"Total row count",expression:`\${view.components.${e}.totalRowCount}`},{label:"Query expression",expression:`\${view.components.${e}.queryExpression}`},{label:"Last refresh time",expression:`\${view.components.${e}.lastRefreshTime}`}]})),(0,r.take)(1)):(0,o.of)(null)));return(0,o.combineLatest)([i,l,s]).pipe((0,r.map)(([e,i,n])=>i?Object.assign(Object.assign({},i),{label:this.getComponentName(t,i.label,n,e)}):null))}getColumnsDataDictionaryBuilder(e,t,i){return(t.length?(0,o.forkJoin)(t.map(t=>this.rxRecordGridUtilsService.getFieldDefinition(t.data.fieldId,i).pipe((0,r.filter)(e=>!!e),(0,r.map)(i=>this.getColumnDataDictionaryBranchBuilder(e,t,i))))):(0,o.of)([])).pipe((0,r.map)(e=>t=>e.map(e=>e.call(this,t))))}getColumnDataDictionaryBranchBuilder(e,t,i){const n=i.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?(0,u.map)(i.optionNamesById,(i,n)=>({label:i,expression:`\${view.components.${e}.recordDefinition.fieldDefinitionsById[${t.data.fieldId}].optionsById[${n}].id}`})):void 0;return o=>{var r;return{label:(null===(r=t.data.title)||void 0===r?void 0:r.trim())||`[${i.name}]`,expression:`\${view.components.${e}.${o}.${t.data.fieldId}}`,autocompleteOptions:n,children:i.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:`${t.data.title} (Option name)`,expression:`\${view.components.${e}.${o}.selectionFieldOptionNamesById.${t.data.fieldId}}`},{label:"Options",children:n}]:null}}}getComponentName(e,t,i,n){const o=[t,i,n].filter(Boolean);return o.length?`${e} (${o.join(": ")})`:e}getGridViewPresetPayload(e,t){return{type:jc.components.viewPreset,guid:this.rxGuidService.generate(),data:{viewPresetGuid:e,filters:null},children:t.map(e=>this.getColumnPresetPayload(e))}}getColumnPresetPayload(e){return{type:jc.components.columnViewPreset,data:{fieldId:e.fieldId,index:e.index,visible:e.visible,sortable:(0,u.isObject)(e.sortable)?e.sortable:null,width:e.width}}}getPresetsList(e){return e?this.viewDesignerFacade.getChildComponents(e).pipe((0,r.map)(e=>e.sort((e,t)=>e.data.index-t.data.index)),(0,r.map)(e=>e.map(e=>({guid:e.guid,name:e.data.label}))),(0,r.debounceTime)(50)):(0,o.of)([])}}Lp.\u0275fac=function(e){return new(e||Lp)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](Lc),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](s.RxFeatureService),n["\u0275\u0275inject"](S.RxModalService),n["\u0275\u0275inject"](_c),n["\u0275\u0275inject"](sp),n["\u0275\u0275inject"](p.TranslateService),n["\u0275\u0275inject"](c.ViewDesignerFacade),n["\u0275\u0275inject"](v.RxJsonParserService))},Lp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Lp,factory:Lp.\u0275fac,providedIn:"root"});class Gp extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxViewActionValidatorService=this.injector.get(c.RxViewActionValidatorService),this.rxRecordGridDesignUtilsService=this.injector.get(Lp),this.rxGuidService=this.injector.get(v.RxGuidService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.preservedRecordDefinition=null,this.preservedRecordAssociationDefinitions=[],this.currentGridDesignProperties=null,this.componentPropertiesChangeFromCanvas$=new o.Subject,this.columns$=this.sandbox.getComponentPropertyValue("columns"),this.enableFiltering$=this.sandbox.getComponentPropertyValue("enableFiltering"),this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.associationDefinitionName$=this.sandbox.getComponentPropertyValue("associationDefinitionName"),this.associatedRecordNodeSide$=this.sandbox.getComponentPropertyValue("associatedRecordNodeSide"),this.childComponentsTree$=this.sandbox.getChildComponentsTree(),this.viewPresetSelectors$=this.sandbox.getComponentsByType(d.RxViewComponentType.ViewPresetSelector),this.gridViewPresets$=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getGridViewPresetsFromChildData(e))),this.viewPresetSelectorGuid$=this.sandbox.getComponentPropertyValue("viewPresetSelector").pipe((0,r.map)(e=>this.extractViewPresetSelectorGuid(e)),(0,r.shareReplay)({refCount:!0,bufferSize:1})),this.selectedPresetsList$=this.viewPresetSelectorGuid$.pipe((0,r.switchMap)(e=>this.rxRecordGridDesignUtilsService.getPresetsList(e)),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)),this.rowActionButtonGuids$=this.sandbox.getLayout(this.sandbox.guid).pipe((0,r.filter)(Boolean),(0,r.map)(e=>{const t=(0,u.find)(e.outlets,{name:jc.rowActionsOutletName});return(0,u.head)(t.columns).children}),(0,r.shareReplay)(1))}static getInitialProperties(e){return Object.assign(Object.assign({},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}rxInit(){const e=Object.assign({bordered:!0,expandable:!1,name:null,mode:np.Record,recordDefinitionName:null,showDataForAllLocales:!1,associationDefinitionName:null,associatedRecordId:null,associatedRoleName:null,enableRowSelection:jc.selectionTypes.multiple,styles:null,cardLayoutWidth:null,enableFiltering:!0,getDataForHiddenColumns:!0,requiredFilters:0,enableFilterPresets:!0,defaultFilterPreset:null,initialSortColumn:null,columns:[],filterMode:ip.Basic,filters:{basicFilters:[],filtersJson:null},filterExpression:null,filterPresets:[],striped:!1},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE);this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>this.getRecordDefinition(e)),(0,r.shareReplay)(1)),this.recordAssociationDefinitions$=this.recordDefinitionName$.pipe((0,r.mergeMap)(e=>this.getRecordAssociationDefinitions(e)),(0,r.shareReplay)(1));const t=this.childComponentsTree$.pipe((0,r.map)(e=>e.filter(e=>e.type===jc.components.column)),(0,r.distinctUntilChanged)(u.isEqual)),i=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(e)),(0,r.distinctUntilChanged)(u.isEqual)),n=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getFilterPresetDescriptorsFromChildData(e)),(0,r.distinctUntilChanged)(u.isEqual));this.actionButtonComponents$=this.childComponentsTree$.pipe((0,r.withLatestFrom)(this.rowActionButtonGuids$),(0,r.map)(([e,t])=>this.rxRecordGridDesignUtilsService.getActionButtonDescriptorsFromChildData(e).filter(e=>!(0,u.includes)(t,e.guid)))),this.rowActionButtonComponents$=this.childComponentsTree$.pipe((0,r.withLatestFrom)(this.rowActionButtonGuids$),(0,r.map)(([e,t])=>this.rxRecordGridDesignUtilsService.getActionButtonDescriptorsFromChildData(e).filter(e=>(0,u.includes)(t,e.guid)))),this.viewPresetSelectors$.pipe((0,r.map)(e=>e.map(e=>e.guid).sort()),(0,r.distinctUntilChanged)(u.isEqual),(0,r.withLatestFrom)(this.viewPresetSelectorGuid$),(0,r.filter)(([e,t])=>t&&!e.includes(t)),(0,r.switchMap)(()=>this.childComponentsTree$.pipe((0,r.take)(1))),(0,r.map)(e=>e.filter(e=>e.type!==jc.components.viewPreset)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setChildren(e),this.sandbox.updateComponentProperties({viewPresetSelector:null})}),this.sandbox.viewModelsInitialized$.pipe((0,r.withLatestFrom)(this.rowActionButtonComponents$),(0,r.map)(([e,t])=>t),(0,r.filter)(e=>!!e.length)).subscribe(e=>{e.forEach(e=>{this.sandbox.getComponentModel(e.guid).setValidationIssues([])})}),(0,o.merge)(this.sandbox.componentProperties$.pipe((0,r.skip)(1)),this.componentPropertiesChangeFromCanvas$).pipe((0,r.distinctUntilChanged)((e,t)=>(0,u.isEqual)(this.currentGridDesignProperties,t)),(0,r.mergeMap)(e=>{const t=this.currentGridDesignProperties;return t.recordDefinitionName!==e.recordDefinitionName?(0,o.zip)(this.getRecordDefinition(e.recordDefinitionName),this.getRecordAssociationDefinitions(e.recordDefinitionName)).pipe((0,r.map)(()=>[t,e])):(0,o.of)([t,e])}),(0,r.withLatestFrom)(this.actionButtonComponents$,this.rowActionButtonComponents$,this.gridViewPresets$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([[e,t],i,n,o])=>{const r=this.preservedRecordDefinition,a=this.preservedRecordAssociationDefinitions;let s;if(t.enableFiltering?!e.enableFiltering&&t.enableFiltering&&(s={enableFilterPresets:!0}):s={enableFilterPresets:!1},e.recordDefinitionName!==t.recordDefinitionName)if(s={filterPresets:[],filters:{basicFilters:[],filtersJson:null},initialSortColumn:null,associationDefinitionName:null,filterExpression:null},r){const e=this.rxRecordGridDesignUtilsService.getDefaultColumns(r),t=this.rxRecordGridDesignUtilsService.getColumnComponentPayloads(e,null);t.push(...i),this.sandbox.setChildren(t),s.columns=e}else this.sandbox.setChildren(i),s.columns=[];else{const r=(0,u.pick)(t,"columns","initialSortColumn","filters","filterPresets"),a=(0,u.pick)(e,"columns","initialSortColumn","filters","filterPresets");if(!(0,u.isEqual)(a,r)){const e=this.rxRecordGridDesignUtilsService.getColumnComponentPayloads(r.columns,r.initialSortColumn),t=this.rxRecordGridDesignUtilsService.getInspectorColumnsFromDesignData(e);e.push(...this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(r.filters.basicFilters||[]));const a=this.rxRecordGridDesignUtilsService.getGridFilterPresetComponentPayloads(r.filterPresets,t.filter(e=>e.filterable));e.push(...a),r.filterPresets=this.rxRecordGridDesignUtilsService.getFilterPresetDescriptorsFromChildData(a),e.push(...i,...n,...o),this.sandbox.setChildren(e),s={columns:t,initialSortColumn:this.rxRecordGridDesignUtilsService.getInitialSortColumnModel(t),filterPresets:r.filterPresets}}}e.filterMode!==t.filterMode&&(s=t.filterMode===ip.Basic?{filterExpression:null}:{filters:{basicFilters:[],filtersJson:null}}),e.associationDefinitionName!==t.associationDefinitionName&&(s=Object.assign(Object.assign({},s||{}),{associatedRecordNodeSide:this.getAssociatedRecordNodeSide(t,a)})),e.mode!==t.mode&&(s={associationDefinitionName:null,associatedRecordId:null,associatedRoleName:null,associatedRecordNodeSide:null}),t=Object.assign(Object.assign({},t),s),e.enableFiltering&&!t.enableFiltering&&(s=Object.assign(Object.assign({},s),{requiredFilters:0})),this.updateComponentPropertiesAndConfig(t,s,r,a)}),(0,o.combineLatest)([this.recordDefinitionName$.pipe((0,r.map)(e=>e?null:this.sandbox.createError("Record definition name cannot be blank.","recordDefinitionName"))),t.pipe((0,r.switchMap)(e=>this.validateColumns(e))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(c.validateCssClassNames)),this.sandbox.getComponentPropertyValue("mode").pipe((0,r.switchMap)(e=>e===np.Association?this.validateAssociationModeProps():this.actionButtonComponents$.pipe((0,r.switchMap)(e=>this.validateActionButtons(e))))),this.rowActionButtonComponents$.pipe((0,r.switchMap)(e=>this.validateRowActions(e))),this.sandbox.getComponentPropertyValue(d.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(c.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.compact),(0,r.map)(u.flatten),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.recordDefinition$,this.recordAssociationDefinitions$,t,i,n]).pipe((0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([t,i,n,o,r,a])=>{const s=this.rxRecordGridDesignUtilsService.getComponentDesignProperties(t,e,o,r,a);this.updateComponentPropertiesAndConfig(s,s,i,n)});const a=this.sandbox.getComponentPropertyValue("name").pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),s=this.associationDefinitionName$.pipe((0,r.map)(e=>this.rxDefinitionNameService.getDisplayName(e)),(0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$));this.rxRecordGridDesignUtilsService.getColumnDataDictionaryBranch(this.sandbox.guid,this.sandbox.descriptor.name,a,t,this.recordDefinition$,s).pipe((0,r.skipWhile)(u.isEmpty),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setCommonDataDictionary(e)}),(0,o.combineLatest)([this.recordDefinitionName$.pipe((0,r.map)(e=>this.rxDefinitionNameService.getDisplayName(e))),s,a]).pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getComponentName(this.sandbox.descriptor.name,...e)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[])}),this.selectedPresetsList$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.childComponentsTree$,this.columns$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t,i])=>{this.updatePresetViewComponents(t,e,i)})}updatePresetViewComponents(e,t,i){const n=e.filter(e=>e.type===jc.components.viewPreset),o=t.map(({guid:e})=>{const t=n.find(t=>t.data.viewPresetGuid===e);return null!=t?t:this.rxRecordGridDesignUtilsService.getGridViewPresetPayload(e,i)});this.sandbox.setChildrenByType(o,[jc.components.viewPreset])}getAssociatedRecordNodeSide(e,t){const i=e.associationDefinitionName?t.find(({name:t})=>t===e.associationDefinitionName):null;return i?i.nodeAId===e.recordDefinitionName?C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value:null}actionButtonDropPredicate(e){return e.draggedViewComponentDescriptor.type===d.RxViewComponentType.ActionButton}getPropertiesByName(e){return this.rxRecordGridDesignUtilsService.getComponentProperties(e)}setRowActions(e){this.rowActionButtonGuids$.pipe((0,r.take)(1),(0,r.withLatestFrom)(this.childComponentsTree$)).subscribe(([t,i])=>{const n=i.filter(e=>!(0,u.includes)(t,e.guid));n.push(...this.rxRecordGridDesignUtilsService.getRowActionButtonPayloads(e)),this.sandbox.setChildren(n),this.toggleActionsColumn(e.length>0)})}extractViewPresetSelectorGuid(e){var t;const i=null==e?void 0:e.match(/^\${view\.components\.([0-9a-z-]+)\.api}$/);return null!==(t=i&&i[1])&&void 0!==t?t:null}toggleActionsColumn(e){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(t=>{const i=(0,u.cloneDeep)(t.columns),n=(0,u.find)(i,{fieldId:jc.actionsColumnFieldDefinition.id});e&&!n?i.push({fieldId:jc.actionsColumnFieldDefinition.id,guid:this.rxGuidService.generate(),title:jc.actionsColumnFieldDefinition.name,visible:!0,index:i.length,filterable:!1,sortable:!1,searchable:!1}):e||((0,u.pull)(i,n),i.forEach((e,t)=>{e.index=t})),this.updateComponentPropertiesAndConfig(t,{columns:i},this.preservedRecordDefinition,this.preservedRecordAssociationDefinitions)})}updateComponentPropertiesAndConfig(e,t,i,n){this.currentGridDesignProperties=e,t&&this.sandbox.updateComponentProperties(t),this.sandbox.updateInspectorConfig(this.rxRecordGridDesignUtilsService.getInspector(e,i,n))}getRecordDefinition(e){return e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>(0,o.of)(null)),(0,r.tap)(e=>this.preservedRecordDefinition=e)):(this.preservedRecordDefinition=null,(0,o.of)(null))}getRecordAssociationDefinitions(e){return e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,r.map)(t=>t[e]||[]),(0,r.catchError)(e=>(0,o.of)([])),(0,r.tap)(e=>this.preservedRecordAssociationDefinitions=e)):(this.preservedRecordAssociationDefinitions=[],(0,o.of)([]))}validateColumns(e){return e.length?this.validateColumnActions(e):(0,o.of)([this.sandbox.createError("Record grid must have at least one column.","columns")])}validateColumnActions(e){return(0,o.combineLatest)(e.map(e=>{const t=(0,u.filter)(e.children,{type:d.RxViewComponentType.Action});return this.rxViewActionValidatorService.validate(t,"columns").pipe((0,r.map)(t=>t.map(t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{columnGuid:e.guid})}))))})).pipe((0,r.map)(u.flatten))}validateRowActions(e){return e.length?(0,o.combineLatest)(e.map((e,t)=>this.rxViewActionValidatorService.validate(e.children,"rowActions").pipe((0,r.map)(e=>e.map(e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{rowActionIndex:t})})))))).pipe((0,r.map)(u.flatten)):(0,o.of)([])}validateAssociationModeProps(){return(0,o.combineLatest)([(0,o.combineLatest)([this.associationDefinitionName$,this.associatedRecordNodeSide$]).pipe((0,r.map)(([e,t])=>e?t?null:this.sandbox.createError("Associated record node side cannot be blank.","associatedRecordNodeSide"):this.sandbox.createError("Association definition name cannot be blank.","associationDefinitionName"))),this.sandbox.getComponentPropertyValue("associatedRecordId").pipe((0,r.map)(e=>e?null:this.sandbox.createError("Associated record ID cannot be blank.","associatedRecordId")))]).pipe((0,r.map)(u.compact))}validateActionButtons(e){const t=(0,u.flatten)(e.map(e=>e.children)).filter(({data:e})=>"rxDeleteRecordsAction"===e.name&&e.recordDefinitionName);return t.length?(0,o.combineLatest)(t.map(({data:e})=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(({resourceType:e})=>e===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType?this.sandbox.createWarning("You have configured a Record grid action to delete Join records. Please ensure that one or more processes or rules have been defined to perform the deletion of the selected Join record instances."):null)))).pipe((0,r.map)(u.compact)):(0,o.of)([])}}class zp{constructor(e,t){this.rxRecordGridConfigUtilsService=e,this.rxRecordGridUtilsService=t}ngOnInit(){this.adaptTableConfig$=this.model.columns$.pipe((0,r.map)(e=>{const t=(0,u.sortBy)(e,e=>e.index),i=t.find(e=>(0,u.isObject)(e.sortable));let n={field:null,order:null};if(i){const e=i.sortable;n={field:String(i.fieldId),order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(e.direction)}}return{columns:t.map(e=>({field:e.fieldId,header:e.title,sortable:Boolean(e.sortable),hidden:!e.visible,testId:this.rxRecordGridUtilsService.getTestIdForGridColumn(e.fieldId)})),sortMeta:n,toolbarConfig:{counter:!1,quickFilter:!0,filter:!0,filterTemplate:this.filterTemplate,filterResults:!1,visibleColumnsMenu:!0,visibleColumnsMenuTemplate:this.visibleColumnsMenuTemplate,quickFilterTriggerable:!0}}}),(0,r.shareReplay)(1)),this.hasRecordDefinitionName$=this.model.recordDefinition$.pipe((0,r.map)(Boolean),(0,r.shareReplay)(1))}onSort(e){this.adaptTableConfig$.pipe((0,r.take)(1)).subscribe(t=>{if(!(0,u.isEqual)(e,t.sortMeta)){let t;const i=this.model.currentGridDesignProperties.columns.find(t=>t.fieldId===e.field);t=(0,u.isObject)(i.sortable)?i.sortable.direction===Vc.Desc?null:{fieldId:i.fieldId,direction:Vc.Desc}:{fieldId:i.fieldId,direction:Vc.Asc},this.model.componentPropertiesChangeFromCanvas$.next(Object.assign(Object.assign({},this.model.currentGridDesignProperties),{initialSortColumn:t}))}})}onBeforeViewComponentDrop(e){e.draggedViewComponentDescriptor.type!==d.RxViewComponentType.ActionButton||e.draggedViewComponentGuid||(e.initialPropertiesByName=Object.assign(Object.assign({},e.initialPropertiesByName),{style:ms.Tertiary}))}}zp.\u0275fac=function(e){return new(e||zp)(n["\u0275\u0275directiveInject"](Lc),n["\u0275\u0275directiveInject"](_c))},zp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:zp,selectors:[["rx-record-grid-design"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](gr,7),n["\u0275\u0275viewQuery"](vr,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.visibleColumnsMenuTemplate=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:10,vars:8,consts:[[1,"rx-record-grid-design"],["type","objects","label","Select a record definition and edit grid columns in the Properties panel.",4,"ngIf","ngIfElse"],["gridTemplate",""],["filterTemplate",""],["visibleColumnsMenuTemplate",""],["type","objects","label","Select a record definition and edit grid columns in the Properties panel."],[1,"rx-record-grid-design__action-buttons-canvas",3,"dropListOrientation","dropPredicate","beforeViewComponentDrop"],[1,"rx-record-grid-design__table",3,"columns","sortable","scrollable","scrollHeight","rowExpandMode","sortMode","toolbarConfig","filterable","sortField","sortOrder","bordered","totalRecords","hasEmptyState","dontEmitLazyLoadOnInputChange","onSort"],["adaptTable",""],[1,"rx-record-grid-design__toolbar-item","btn-link","d-icon-refresh","grid-toolbar-icon","mx-2","p-1"],["class","btn-link px-0 d-icon-left-filter d-icon-right-triangle_down",4,"ngIf"],[1,"btn-link","px-0","d-icon-left-filter","d-icon-right-triangle_down"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,yr,1,0,"adapt-empty-state",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275template"](4,br,7,23,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,Cr,3,3,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,Sr,0,0,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](5);n["\u0275\u0275classProp"]("border",!n["\u0275\u0275pipeBind1"](1,4,t.hasRecordDefinitionName$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!n["\u0275\u0275pipeBind1"](3,6,t.hasRecordDefinitionName$))("ngIfElse",e)}},directives:[f.NgIf,m.AdaptEmptyStateComponent,c.CanvasOutletComponent,T.AdaptTableComponent],pipes:[f.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     rx-canvas-item-container{min-width:100%}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     .cdk-drop-list{background-color:#f0f1f1;border:1px solid #d6d7d8;border-bottom:0;min-height:48px;display:flex;flex-flow:row wrap}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     .cdk-drop-list:empty:after{content:"Drop Action buttons here";display:block;text-align:center;width:100%;line-height:48px;color:#959899;font-size:.875rem}.rx-record-grid-design__toolbar-item[_ngcontent-%COMP%]{font-size:.9375rem}.rx-record-grid-design__table[_ngcontent-%COMP%]     .adapt-table-toolbar{pointer-events:none}'],changeDetection:0});class Up{constructor(e,t){this.rxJsonParserService=e,this.rxViewDefinitionParserService=t}adaptDefinition(e){var t,i,n,o,r;const a=this.rxJsonParserService.tryParseJson(e.layout),s=(0,u.find)(a.outlets,{name:jc.rowActionsOutletName});e.propertiesByName.enableFilterPresets=null!==(t=e.propertiesByName.enableFilterPresets)&&void 0!==t?t:"true",s?(0,u.forEach)(null===(i=s.columns[0])||void 0===i?void 0:i.children,t=>{const i=(0,u.find)(e.componentDefinitions,{guid:t});(0,u.pull)(e.componentDefinitions,i).push(i)}):a.outlets.push(d.RxViewLayout.getOutlet(jc.rowActionsOutletName)),e.layout=JSON.stringify(a),Object.assign(e.propertiesByName,{expandable:null!==(n=e.propertiesByName.expandable)&&void 0!==n&&n,showDataForAllLocales:null!==(o=e.propertiesByName.showDataForAllLocales)&&void 0!==o&&o,requiredFilters:null!==(r=e.propertiesByName.requiredFilters)&&void 0!==r?r:"true"===e.propertiesByName.requireFiltering?1:0}),delete e.propertiesByName.requireFiltering,this.rxViewDefinitionParserService.getComponents(e).map(e=>e.componentDefinition).forEach(e=>{var t,i;e.type===jc.components.column&&Object.assign(e.propertiesByName,{wrapText:null!==(t=e.propertiesByName.wrapText)&&void 0!==t&&t,typeaheadKeystrokeCount:Number(null!==(i=e.propertiesByName.typeaheadKeystrokeCount)&&void 0!==i?i:jc.defaultTypeaheadKeystrokeCount)})})}}Up.\u0275fac=function(e){return new(e||Up)(n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](d.RxViewDefinitionParserService))},Up.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Up,factory:Up.\u0275fac,providedIn:"root"});class qp{}qp.\u0275fac=function(e){return new(e||qp)},qp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:qp,declarations:[Vp],imports:[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptRxSelectModule],exports:[Vp]}),qp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,m.AdaptButtonModule,m.AdaptRxSelectModule]]});class Xp{}Xp.\u0275fac=function(e){return new(e||Xp)},Xp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xp,declarations:[kp],imports:[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,m.AdaptRxTextfieldModule,f.CommonModule,b.DragDropModule,x.FormsModule,l.StepperWithUnitsFormControlModule,p.TranslateModule],exports:[kp]}),Xp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,m.AdaptRxTextfieldModule,f.CommonModule,b.DragDropModule,x.FormsModule,l.StepperWithUnitsFormControlModule,p.TranslateModule]]});class Wp{}Wp.\u0275fac=function(e){return new(e||Wp)},Wp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wp,declarations:[Bp],imports:[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptTagModule,f.CommonModule,x.FormsModule,Op,qp,Xp,p.TranslateModule],exports:[Bp]}),Wp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptTagModule,f.CommonModule,x.FormsModule,Op,qp,Xp,p.TranslateModule]]});class Hp{}Hp.\u0275fac=function(e){return new(e||Hp)},Hp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hp,declarations:[$p],imports:[f.CommonModule,m.AdaptButtonModule,x.FormsModule,Wp,l.SelectFormControlModule],exports:[$p]}),Hp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptButtonModule,x.FormsModule,Wp,l.SelectFormControlModule]]});class Qp{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.rxRecordGridDesignAdapterService=t,this.rxDefinitionAdapterRegistryService.registerDesignAdapter(jc.type,this.rxRecordGridDesignAdapterService)}}Qp.\u0275fac=function(e){return new(e||Qp)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Up))},Qp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Qp,declarations:[zp,ep,Zc,Gc,Pp,Ap,_p,jp,Hc,Wc,Yc,Jc],imports:[f.CommonModule,x.FormsModule,x.ReactiveFormsModule,qp,m.AdaptButtonModule,m.AdaptTooltipModule,m.AdaptAccordionModule,E.AdaptTextFieldModule,m.AdaptRxSearchModule,m.AdaptTreeModule,m.AdaptRxCheckboxModule,m.AdaptRxRadiobuttonModule,c.ActionListControlModule,l.GroupButtonFormControlModule,b.DragDropModule,l.ExpressionEditorModule,m.AdaptAdvancedFilteringModule,m.AdaptRxTextfieldModule,S.RxDirectivesModule,m.AdaptRxLabelModule,Dp,c.ViewDesignerCanvasModule,T.AdaptTableModule,m.AdaptEmptyStateModule,s.RxDefinitionModule,m.AdaptRxSelectModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,m.AdaptIconModule,p.TranslateModule,l.SelectFormControlModule,v.RxUniqueValidatorModule,m.AdaptRxSwitchModule,l.IconPickerFormControlModule,m.AdaptPopoverModule,Tp,Hp,Op,l.StepperWithUnitsFormControlModule,v.RxNoWhitespaceValidatorModule]}),Qp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,x.FormsModule,x.ReactiveFormsModule,qp,m.AdaptButtonModule,m.AdaptTooltipModule,m.AdaptAccordionModule,E.AdaptTextFieldModule,m.AdaptRxSearchModule,m.AdaptTreeModule,m.AdaptRxCheckboxModule,m.AdaptRxRadiobuttonModule,c.ActionListControlModule,l.GroupButtonFormControlModule,b.DragDropModule,l.ExpressionEditorModule,m.AdaptAdvancedFilteringModule,m.AdaptRxTextfieldModule,S.RxDirectivesModule,m.AdaptRxLabelModule,Dp,c.ViewDesignerCanvasModule,T.AdaptTableModule,m.AdaptEmptyStateModule,s.RxDefinitionModule,m.AdaptRxSelectModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,m.AdaptIconModule,p.TranslateModule,l.SelectFormControlModule,v.RxUniqueValidatorModule,m.AdaptRxSwitchModule,l.IconPickerFormControlModule,m.AdaptPopoverModule,Tp,Hp,Op,l.StepperWithUnitsFormControlModule,v.RxNoWhitespaceValidatorModule]]});class Kp extends h.BaseViewComponent{constructor(){super()}}Kp.\u0275fac=function(e){return new(e||Kp)},Kp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kp,selectors:[["rx-page"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")},directives:[h.RuntimeViewCanvasOutletComponent],encapsulation:2});class Jp{constructor(e,t){this.context=e,this.translateService=t,this.alertConfig={content:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.filter-by-selection.dialog.info.message"),type:"section",dismissible:!1,variant:"info",icon:!0},this.options=this.context.getData().filterableFields}optionFormatter(e){return e.name}apply(){this.context.close(this.field[0].id)}}Jp.\u0275fac=function(e){return new(e||Jp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](p.TranslateService))},Jp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jp,selectors:[["rx-filter-by-card-selection"]],decls:11,vars:16,consts:[[3,"config"],[1,"modal-body","pt-0"],[3,"label","options","ngModel","required","optionFormatter","popupClass","ngModelChange"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","apply-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-alert",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"adapt-rx-select",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.field=e}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"button",4),n["\u0275\u0275listener"]("click",function(){return t.apply()}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",5),n["\u0275\u0275listener"]("click",function(){return t.context.dismiss()}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("config",t.alertConfig),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](3,10,"com.bmc.arsys.rx.client.view-components.record-grid.cards.filter-by-selection.dialog.field.label"))("options",t.options)("ngModel",t.field)("required",!0)("optionFormatter",t.optionFormatter)("popupClass","rx-filter-by-card-selection-field-dropdown"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",!t.field),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,12,"com.bmc.arsys.rx.client.common.apply.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptAlertComponent,m.AdaptRxSelectComponent,x.NgControlStatus,x.NgModel,x.RequiredValidator,m.AdaptButtonComponent],pipes:[p.TranslatePipe],encapsulation:2});class Yp{constructor(e,t,i,n,o){this.rxGuidService=e,this.rxFieldDefinitionService=t,this.rxRecordGridConfigUtilsService=i,this.rxRecordGridUtilsService=n,this.translateService=o}getGridConfig(e){const t=(0,u.defaults)(this.rxRecordGridConfigUtilsService.configDeepClone(e),{associatedRecordId:null,associatedRoleName:null,enableColumnSelection:!0,enableFiltering:!0,expandable:!1,useExternalFiltering:!0,enableRowSelection:jc.selectionTypes.multiple,filterExpression:null,filters:jc.defaultFilter,filterTagsLimit:3,recordIdField:a.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),emptyStateWithFilterLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),searchFieldPlaceholderText:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),styles:""});return t.recordDefinitionName||(e.getRecordDefinition||(0,o.throwError)(new v.RxError("getRecordDefinition function must be defined if recordDefinitionName is not set.")),e.getData||(0,o.throwError)(new v.RxError("getData function must be defined if recordDefinitionName is not set."))),t.enableFiltering=Boolean(t.enableFiltering),t.cardLayoutWidth=parseFloat(t.cardLayoutWidth)||null,t}getColumnsWithMetadata(e,t,i){const n=this.rxRecordGridConfigUtilsService.columnsDeepClone(t);this.allowedOpenViewActionExpressionsForHrefRegex=new RegExp(`^\\$\\{view\\.components\\.${e}\\.(clickableRow|recordDefinition)\\.|^\\$\\{view\\.inputParams\\.`);const s=n.map(e=>this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,i).pipe((0,r.map)(t=>{var n;let o=t.resourceType?this.getFieldDefinitionResourceTypeShortName(t.resourceType):null;o===a.RX_RECORD_DEFINITION.dataTypes.attachment.shortName&&(o=a.RX_RECORD_DEFINITION.dataTypes.character.shortName);const r=this.rxRecordGridConfigUtilsService.getBooleanValue(e.filterable)||(0,u.isUndefined)(e.filterable),s=(0,u.has)(e,"searchable")?this.rxRecordGridConfigUtilsService.getBooleanValue(e.searchable):r&&this.rxRecordGridUtilsService.isSearchable(t,i);return Object.assign(Object.assign({},e),{clickable:this.rxRecordGridConfigUtilsService.getBooleanValue(e.clickable),filterable:r,sortable:this.rxRecordGridConfigUtilsService.parseConfigString(e.sortable)||(0,u.isUndefined)(e.sortable),visible:this.rxRecordGridConfigUtilsService.getBooleanValue(e.visible)||(0,u.isUndefined)(e.visible),searchable:s,fieldDefinition:t,filterType:o,clickableWithHref:this.isColumnClickableWithHref(e),title:null===(n=e.title)||void 0===n?void 0:n.trim(),fallbackTitle:`[${t.name}]`})})));return(0,o.forkJoin)(s)}getSelectionFieldOptionLabelsByFieldId(e,t){return(0,u.reduce)(e,(e,i)=>{const n=t.fieldDefinitionsById[i.fieldId];return n.resourceType===a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType&&(e[i.fieldId]=n.optionLabelsById),e},{})}getFieldDefinitionResourceTypeShortName(e){return e.split(".").pop().replace(/fieldDefinition/i,"")}isColumnClickableWithHref(e){let t=!1;return this.rxRecordGridConfigUtilsService.getBooleanValue(e.clickable)&&(t=e.actions.every(e=>(e.name===d.RX_VIEW_ACTION.viewActionNames.launchUrl||e.name===d.RX_VIEW_ACTION.viewActionNames.openView&&e.presentation.launchBehavior===d.OpenViewActionLaunchBehavior.SameWindow&&e.presentation.type===d.OpenViewActionType.FullWidth&&this.canViewParamsBeEvaluatedForHref(e.viewParams))&&this.canExpressionBeEvaluatedForHref(e.$condition$))),t}canViewParamsBeEvaluatedForHref(e){return(0,u.every)(e,e=>this.canExpressionBeEvaluatedForHref(e))}canExpressionBeEvaluatedForHref(e){return(0,u.every)(null==e?void 0:e.match(/\$\{[^{]*\}/g),e=>this.allowedOpenViewActionExpressionsForHrefRegex.test(e))}}Yp.\u0275fac=function(e){return new(e||Yp)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](a.RxFieldDefinitionService),n["\u0275\u0275inject"](Lc),n["\u0275\u0275inject"](_c),n["\u0275\u0275inject"](p.TranslateService))},Yp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Yp,factory:Yp.\u0275fac,providedIn:"root"});class Zp{constructor(e){this.rxRecordInstanceDataPageService=e,this.cache={}}getSharedFilterPresets(e){if(!this.cache[e]){const t=this.getQueryParams(e);return this.rxRecordInstanceDataPageService.post({params:t}).pipe((0,r.map)(t=>this.cache[e]=(0,u.map)(t.data,e=>({id:e[a.RX_RECORD_DEFINITION.coreFieldIds.id],name:e[jc.sharedFilterPresets.fields.name],filters:[{filterOptionId:jc.externalPresetFilterOptionId,value:e[a.RX_RECORD_DEFINITION.coreFieldIds.id]}],isCreatedByOtherUsers:!0,filterExpression:e[jc.sharedFilterPresets.fields.filterExpression],isDefault:e[jc.sharedFilterPresets.fields.isDefault]}))))}return(0,o.of)(this.cache[e])}getQueryParams(e){const t=`('${jc.sharedFilterPresets.fields.recordGridGuid}'="${e}")`,i=[a.RX_RECORD_DEFINITION.coreFieldIds.id,jc.sharedFilterPresets.fields.name,jc.sharedFilterPresets.fields.filterExpression,jc.sharedFilterPresets.fields.isDefault].join(","),n=[jc.sharedFilterPresets.fields.sortOrder,jc.sharedFilterPresets.fields.name].join(",");return{pageSize:-1,startIndex:0,queryExpression:t,propertySelection:i,shouldIncludeTotalSize:!1,recorddefinition:jc.sharedFilterPresets.recordDefinitionName,sortBy:n}}}Zp.\u0275fac=function(e){return new(e||Zp)(n["\u0275\u0275inject"](a.RxRecordInstanceDataPageService))},Zp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zp,factory:Zp.\u0275fac});class eu{constructor(e,t,i,n,o){this.recordGridConfigUtilsService=e,this.rxUserPreferencesService=t,this.rxRecordGridFilterService=i,this.rxRecordGridFilterHelperService=n,this.rxObjectUtilsService=o,this.initialPreferences={columns:[],filterPresets:[],filters:null,visibleCardFieldIds:[],appliedExternalFilterPresetGuid:null,viewPresets:{}},this.preferences=Object.assign({},this.initialPreferences)}saveUserPreferences(e,t,i){t.cardLayoutColumns?this.preferences.visibleCardFieldIds=this.getVisibleCardFieldIds(t):this.preferences.columns=this.getColumnsPreferences(t),this.preferences.filterPresets=i.advancedFiltering.savedFilters.filter(e=>!e.isCreatedByOtherUsers).map(e=>this.getPreferencesFilterPresets(e,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs));const n=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(i.advancedFiltering.selectedFilters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs);this.preferences.filters=n;const o=i.advancedFiltering.appliedSharedFilterPreset;if(this.preferences.appliedExternalFilterPresetGuid=o&&o.id,this.selectedViewPresetGuid){const e=this.preferences.viewPresets[this.selectedViewPresetGuid],i={viewPresetGuid:this.selectedViewPresetGuid,columns:this.getColumnsPreferences(t),filters:(0,u.isEmpty)(n)?null:n};(0,u.isEqual)(e.initial,i)?this.discardViewPresetChanges(this.selectedViewPresetGuid):e.edited=i}this.save(e,this.preferences)}get(e){return this.preferences=Object.assign({},this.initialPreferences),this.rxUserPreferencesService.getUiComponentPreferences(e).pipe((0,r.map)(e=>(0,u.assign)(this.preferences,e)))}getAppliedSharedFilterPresetGuid(){return this.preferences.appliedExternalFilterPresetGuid}applyUserPreferencesForColumns(e,t,i){this.reviseColumnPreferences(this.preferences.columns,e)&&this.save(i,this.preferences);let n=this.getColumnSortMeta(this.preferences.columns);this.sortColumnsConfigs(e.columns),this.setColumnsWidths(e.columns,this.preferences.columns,e.columnResizeMode),n=(0,u.filter)(n,t=>(0,u.some)(e.columns,e=>e.field===t.field)),this.preferences.columns.length&&(e.multiSortMeta=n),e.cardLayoutColumns?this.setCardFieldsVisibility(e.columns):this.setColumnsVisibility(e.columns,t)}reviseColumnPreferences(e,{columns:t}){let i=!1;if(e.length){const n=(0,u.map)(t,"field"),o=(0,u.remove)(e,({fieldId:e})=>!n.includes(e));let r=o.some(({sort:e})=>Boolean(e));const a=e.length,s=[];if(t.forEach((t,i)=>{var n;const o=(0,u.find)(e,{fieldId:t.field});o?(null!==(n=o.width)&&void 0!==n||(o.width=t.width),t.sortable?s.push(o):o.sort&&(r=!0)):e.splice(i,0,{fieldId:t.field,index:i,visible:!t.hidden,width:t.width})}),r){const t=this.getColumnSortMeta(s);this.updateColumnSortPreferences(e,t)}i=!(0,u.isEmpty)(o)||a<e.length||r}return i}applyUserPreferences(e,t,i,n){var a,s,l,d;let c;if(i.viewPresetSelector||this.applyUserPreferencesForColumns(e,t,i.guid),null==i?void 0:i.enableFiltering){let o=!1;this.preferences.filterPresets.forEach(e=>{var i,n,r,a;const s=null===(n=null===(i=e.filterData)||void 0===i?void 0:i.and)||void 0===n?void 0:n.length;e.filterData=this.rxRecordGridFilterService.getFilterForAvailableColumns(e.filterData,t.filter(e=>e.filterable)),s!==(null===(a=null===(r=e.filterData)||void 0===r?void 0:r.and)||void 0===a?void 0:a.length)&&(o=!0)}),this.preferences.filterPresets=this.preferences.filterPresets.filter(e=>!(0,u.isEmpty)(e.filterData));const p=(0,u.cloneDeep)(null===(a=this.preferences.filters)||void 0===a?void 0:a.and);this.preferences.filters=this.rxRecordGridFilterService.getFilterForAvailableColumns(this.preferences.filters,t.filter(e=>e.filterable)),!o&&(null===(l=null===(s=this.preferences.filters)||void 0===s?void 0:s.and)||void 0===l?void 0:l.length)===(null==p?void 0:p.length)&&(0,u.isEqual)(p,null===(d=this.preferences.filters)||void 0===d?void 0:d.and)||this.save(i.guid,this.preferences),i.advancedFiltering.savedFilters=this.getAdvancedFilterPresets(this.preferences.filterPresets,!1),i.predefinedFilterPresets=i.predefinedFilterPresets.filter(e=>!(0,u.isNull)(e.filters));const m=i.predefinedFilterPresets.map(e=>{var t;return{title:e.title,guid:e.guid,filterData:this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,this.rxRecordGridFilterService.deserializeNamedOptions(null!==(t=e.recordGridFilters)&&void 0!==t?t:[]))}}).filter(e=>e.filterData),f=this.getAdvancedFilterPresets(m,!0);if(i.advancedFiltering.savedFilters.push(...f),n){if(this.getAppliedSharedFilterPresetGuid()){const e=(0,u.find)(n,{id:this.getAppliedSharedFilterPresetGuid()});i.advancedFiltering.appliedSharedFilterPreset=e,i.advancedFiltering.activeSavedFilter=e}i.advancedFiltering.savedFilters.push(...n)}const h=(0,u.isString)(i.defaultFilterPreset)?(0,u.find)(f,e=>e.id===i.defaultFilterPreset):i.defaultFilterPreset,g=(0,u.find)(n,e=>e.isDefault);if((0,u.isEmpty)(this.preferences.filters)){if(this.rxObjectUtilsService.isEmptyObject(this.preferences.filters)&&!i.advancedFiltering.appliedSharedFilterPreset)g&&!h&&(i.advancedFiltering.appliedSharedFilterPreset=g,i.advancedFiltering.activeSavedFilter=g);else if((0,u.isNull)(this.preferences.filters)&&!i.advancedFiltering.appliedSharedFilterPreset)if(h){const t=(0,u.isString)(i.defaultFilterPreset)?h.filterData:h;c=this.rxRecordGridFilterService.getAdvancedFilterData(t,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(t=>{i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(t,e.columns),(0,u.isString)(i.defaultFilterPreset)&&(h.filters=i.advancedFiltering.selectedFilters,i.advancedFiltering.activeSavedFilter=h)}))}else g&&(i.advancedFiltering.appliedSharedFilterPreset=g,i.advancedFiltering.activeSavedFilter=g)}else c=this.rxRecordGridFilterService.getAdvancedFilterData(this.preferences.filters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(t=>{const n=this.getFilterForAvailableNamedFilterOptions(t,i.namedFilterOptions);i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(n,e.columns.filter(e=>e.filterable)),this.preferences.filters=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(i.advancedFiltering.selectedFilters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs),i.advancedFiltering.appliedSharedFilterPreset&&this.addExternalPresetToSelectedFilters(i)}));i.advancedFiltering.appliedSharedFilterPreset&&this.addExternalPresetToSelectedFilters(i)}return c||(0,o.of)(null)}applySharedViewPreset(e,t,i,n){return this.preferences.viewPresets[i]?this.preferences.viewPresets[i].initial=Object.assign(Object.assign({},n),{viewPresetGuid:i}):this.preferences.viewPresets[i]={initial:Object.assign(Object.assign({},n),{viewPresetGuid:i})},this.applyViewPresetInner(i,t,e)}applyViewPreset(e,t,i){const n=e.viewPresets.find(e=>e.viewPresetGuid===i);if(n&&!(0,u.has)(this.preferences.viewPresets,[i,"edited"])){const t=this.createSystemViewPresetPreferences(n,e.columnsWithMetadata);this.preferences.viewPresets[i]={initial:t}}else if(!this.preferences.viewPresets[i]&&this.selectedViewPresetGuid){const e=this.preferences.viewPresets[this.selectedViewPresetGuid];this.preferences.viewPresets[i]={initial:Object.assign(Object.assign({},(0,u.cloneDeep)(e.edited||e.initial)),{viewPresetGuid:i})}}return this.applyViewPresetInner(i,t,e)}applyViewPresetInner(e,t,i){const n=this.preferences.viewPresets[e],a=(null==n?void 0:n.edited)||(null==n?void 0:n.initial);let s=(0,o.of)(null);return a&&(this.selectedViewPresetGuid=a.viewPresetGuid,this.updateColumnsOrder(t.columns,a.columns),this.updateColumnsVisibility(t.columns,a.columns),this.setColumnsWidths(t.columns,a.columns,t.columnResizeMode),this.updateGridSorting(a,t),s=this.rxRecordGridFilterService.getAdvancedFilterData(a.filters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(e=>{const n=this.getFilterForAvailableNamedFilterOptions(e,i.namedFilterOptions);i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(n,t.columns.filter(e=>e.filterable))}))),s}isCurrentViewPresetEdited(){var e;return Boolean(null===(e=this.preferences.viewPresets[this.selectedViewPresetGuid])||void 0===e?void 0:e.edited)}addExternalPresetToSelectedFilters(e){const t=(0,u.cloneDeep)(e.advancedFiltering.selectedFilters);t.push({filterOptionId:jc.externalPresetFilterOptionId,value:e.advancedFiltering.appliedSharedFilterPreset.id}),e.advancedFiltering.selectedFilters=t}createSystemViewPresetPreferences(e,t){const i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,e.recordGridFilters?this.rxRecordGridFilterService.deserializeNamedOptions(e.recordGridFilters):[]),n=e.columnViewPresets.sort((e,t)=>e.index-t.index).map((e,i)=>{var n,o;const r=(0,u.has)(e,"width")?e.width:null!==(o=null===(n=(0,u.find)(t,{fieldId:e.fieldId}))||void 0===n?void 0:n.width)&&void 0!==o?o:null,a=Object.assign(Object.assign({},(0,u.omit)(e,"sortable")),{index:i,width:r});return e.sortable&&(a.sort={priority:0,direction:e.sortable.direction}),a});return(0,u.cloneDeep)({columns:n,filters:i,viewPresetGuid:e.viewPresetGuid})}deleteViewPreset(e){delete this.preferences.viewPresets[e]}isExistingViewPreset(e){return(0,u.has)(this.preferences.viewPresets,e)}discardViewPresetChanges(e){var t;null===(t=this.preferences.viewPresets[e])||void 0===t||delete t.edited}updateGridSorting(e,t){let i=this.getColumnSortMeta(e.columns);i=(0,u.filter)(i,e=>(0,u.some)(t.columns,t=>t.sortable&&t.field===e.field)),t.multiSortMeta=i}getAdvancedFilterPresets(e,t){return e.map(e=>{const i={id:e.guid,name:e.title,filters:null,filterData:e.filterData,isCreatedByOtherUsers:t};return e.appliedSharedFilterPresetGuid&&(i.appliedSharedFilterPresetGuid=e.appliedSharedFilterPresetGuid,i.filters=[{filterOptionId:jc.externalPresetFilterOptionId,value:e.appliedSharedFilterPresetGuid}]),i}).sort((e,t)=>e.name.localeCompare(t.name))}getColumnsPreferences({columns:e,multiSortMeta:t}){const i=e.map(({field:e,hidden:t,width:i},n)=>({fieldId:e,index:n,visible:!t,width:i}));return this.updateColumnSortPreferences(i,t),i}getPreferencesFilterPresets(e,t,i){const n={guid:e.id,title:e.name,filterData:e.filters?this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(e.filters,t,i):e.filterData};return e.appliedSharedFilterPresetGuid&&(n.appliedSharedFilterPresetGuid=e.appliedSharedFilterPresetGuid),n}getVisibleCardFieldIds({columns:e,multiSortMeta:t}){return this.updateColumnSortPreferences(this.preferences.columns,t),e.filter(e=>!e.hidden).map(e=>parseInt(e.field,10)||e.field)}updateColumnSortPreferences(e,t){t&&(e.forEach(e=>{delete e.sort}),t.forEach(({field:t,order:i},n)=>{const o=e.find(e=>e.fieldId===t);o&&(o.sort={priority:n,direction:this.recordGridConfigUtilsService.getColumnSortDirection(i)})}))}save(e,t){if(e){const i={preferences:JSON.stringify(t),componentTypeName:jc.type,version:jc.version,componentId:e};this.rxUserPreferencesService.setUiComponentPreferences(i,e).subscribe()}}sortColumnsConfigs(e){this.updateColumnsOrder(e,this.preferences.columns)}updateColumnsOrder(e,t){const i=(0,u.reduce)(e,(e,i,n)=>{const o=(0,u.find)(t,e=>e.fieldId===i.field);return e[i.field]=o?o.index:n,e},{});e.sort((e,t)=>i[e.field]-i[t.field])}setColumnsVisibility(e,t){const i=this.preferences.columns;(0,u.isEmpty)(i)?e.forEach(e=>{const i=(0,u.find)(t,t=>t.fieldId===e.field);e.hidden=!!i&&!i.visible}):this.updateColumnsVisibility(e,i)}updateColumnsVisibility(e,t){e.forEach(e=>{const i=(0,u.find)(t,t=>t.fieldId===e.field);i&&(e.hidden=!i.visible)})}setColumnsWidths(e,t,i){t.length&&e.forEach(e=>{const n=(0,u.find)(t,{fieldId:e.field});if(n){const t=(0,u.endsWith)(n.width,"px");i!==T.ResizeMode.Expand||t?(e.width=/[0-9]+$/.test(n.width)?`${n.width}%`:n.width,t&&parseInt(e.width)<45&&(e.minWidth=e.width)):(e.width=null,e.minWidth=null)}})}setCardFieldsVisibility(e){const t=this.preferences.visibleCardFieldIds;if((0,u.isEmpty)(t)){const t=5;let i=0;e.forEach(e=>{i>=t?e.hidden=!0:e.hidden||i++})}else e.forEach(e=>e.hidden=!(0,u.some)(t,t=>String(t)===e.field))}getColumnSortMeta(e){return(0,u.flow)(e=>(0,u.filter)(e,"sort"),e=>(0,u.sortBy)(e,"sort.priority"),e=>(0,u.map)(e,e=>({field:e.fieldId,order:this.recordGridConfigUtilsService.getColumnSortOrder(e.sort.direction)})))(e)}getFiltersForSelectedColumns(e,t){return e.filter(e=>(0,u.some)(t,{field:e.filterOptionId}))}getFilterForAvailableNamedFilterOptions(e,t){return e.map(e=>(e.value.namedOptions=(0,u.isEmpty)(t)?[]:e.value.namedOptions.filter(i=>(0,u.some)(t[Number(e.filterOptionId)],{guid:i})),e)).filter(e=>!rp.isEmptyWithRange(e.value))}saveViewPreset(e){const t=this.preferences.viewPresets[e];(null==t?void 0:t.edited)&&(t.initial=(0,u.cloneDeep)(t.edited),delete t.edited)}getSharedViewPresetData(){const e=this.preferences.viewPresets[this.selectedViewPresetGuid],t=e.edited||e.initial;return{columns:t.columns,filters:t.filters}}}eu.\u0275fac=function(e){return new(e||eu)(n["\u0275\u0275inject"](Lc),n["\u0275\u0275inject"](s.RxUserPreferencesService),n["\u0275\u0275inject"](lp),n["\u0275\u0275inject"](sp),n["\u0275\u0275inject"](v.RxObjectUtilsService))},eu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:eu,factory:eu.\u0275fac}),function(e){e.Multiple="multiple",e.Single="single"}(op||(op={}));class tu{constructor(e,t){this.modalService=e,this.translateService=t,this.sort=new n.EventEmitter}onSortMenuItemClick(){this.multiSortMeta=this.adaptTable.multiSortMeta||[],this.openDialog({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.title"),content:this.cardLayoutSortModalTemplate}).catch(()=>{})}getSortableColumns(){return this.columns.filter(e=>this.adaptTable.isSortableColumn(e)).sort((e,t)=>e.header.localeCompare(t.header))}onSortAscClick(e){this.changeSort(e,T.SortOrder.Asc)}onSortDescClick(e){this.changeSort(e,T.SortOrder.Desc)}changeSort(e,t){const i=this.getColumnSortIndex(e),n=this.multiSortMeta[i];n?n.order===t?this.multiSortMeta.splice(i,1):n.order=t:this.multiSortMeta.push({field:e.field,order:t})}getColumnSort(e){return this.multiSortMeta[this.getColumnSortIndex(e)]}getColumnSortIndex(e){return this.multiSortMeta.findIndex(t=>t.field===e.field)}hasColumnSortOrder(e,t){const i=this.getColumnSort(e);return!!i&&i.order===t}getSortAscBtnClass(e){return this.getSortBtnClass(e,T.SortOrder.Asc)}getSortDescBtnClass(e){return this.getSortBtnClass(e,T.SortOrder.Desc)}getSortBtnClass(e,t){const i=this.hasColumnSortOrder(e,t);return{"btn-success":i,"btn-secondary":!i}}clearAllSorting(){this.multiSortMeta=[]}applySorting(){this.sort.emit(this.multiSortMeta)}getCurrentSortingSummary(){const e={[T.SortOrder.Asc]:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.sort.ascending"),[T.SortOrder.Desc]:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.sort.descending")};return this.multiSortMeta.map((t,i)=>`${i+1}. ${this.columns.find(e=>e.field===t.field).header} (${e[t.order]})`).join("\n")}}tu.\u0275fac=function(e){return new(e||tu)(n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](p.TranslateService))},tu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:tu,selectors:[["rx-card-layout-cell-header"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Dr,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cardLayoutSortModalTemplate=e.first)}},inputs:{title:"title",columns:"columns",adaptTable:"adaptTable",openDialog:"openDialog"},outputs:{sort:"sort"},decls:9,vars:7,consts:[["adaptDropdown","",1,"dropdown","header-cell-menu-btn",3,"appendToBody","restoreFocusAfterClose"],["id","card-column-menu-dropdown-toggle","type","button","adaptDropdownToggle","",1,"d-icon-ellipsis","adapt-table-sort-menu__kebab","py-2","btn","btn-link",3,"showCaret"],["aria-labelledby","card-column-menu-dropdown-toggle","adaptDropdownMenu","","tabindex","0",1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["cardLayoutSortModalTemplate",""],[1,"modal-body","rx-record-grid-sort-by-dialog"],[1,"rx-card-fields"],[1,"rx-card-fields__headers"],[1,"rx-card-fields__headers-field"],[1,"rx-card-fields__headers-order"],["class","rx-card-field",4,"ngFor","ngForOf"],["rows","4","disabled","","title","summary",1,"form-control","rx-sort-summary",3,"value","placeholder"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"rx-card-field"],[1,"rx-card-field__name"],[1,"rx-card-field__order"],[1,"btn-group"],[1,"btn","btn-xs",3,"ngClass","click"],[1,"d-icon-arrow_down"],[1,"d-icon-arrow_up"]],template:function(e,t){1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275elementStart"](1,"div",0),n["\u0275\u0275element"](2,"button",1),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275elementStart"](4,"button",3),n["\u0275\u0275listener"]("click",function(){return t.onSortMenuItemClick()}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Rr,23,20,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275textInterpolate1"]("",t.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("appendToBody",!0)("restoreFocusAfterClose",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("showCaret",!1),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.view-components.record-grid.card-column-menu.items.sort-by.label")," "))},directives:[m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,f.NgForOf,f.NgClass],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.header-cell-menu-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields[_ngcontent-%COMP%]{border:1px solid #d6d7d8;display:flex;flex-direction:column;height:370px;overflow-y:auto}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers[_ngcontent-%COMP%]{font-weight:var(--font-weight-bold);display:flex;height:35px;align-items:center;border-bottom:1px solid #d6d7d8;color:#666;flex-shrink:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #d6d7d8;align-items:center;height:35px;flex-shrink:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field[_ngcontent-%COMP%]:last-child{border-bottom:none}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field__name[_ngcontent-%COMP%]{flex:3;padding-left:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field__order[_ngcontent-%COMP%]{flex:1;padding-left:5px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers-field[_ngcontent-%COMP%]{flex:3;padding-left:10px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers-order[_ngcontent-%COMP%]{flex:1;padding-left:5px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-sort-summary[_ngcontent-%COMP%]{margin-top:15px;resize:none}']});class iu{constructor(e,t,i){this.adaptTable=e,this.ngZone=t,this.renderer=i,this.changedCardLayout=new n.EventEmitter,this.hasCardLayout=!1,this._hasViewInitialized=!1}set cardLayoutWidth(e){if(this._cardLayoutWidth=e,this._hasViewInitialized){const{offsetWidth:e}=this.renderer.selectRootElement(this.adaptTable.el.nativeElement,!0);this.changeTableCardLayout(e)}}get cardLayoutWidth(){return this._cardLayoutWidth}ngAfterViewInit(){setTimeout(()=>{const e=this.renderer.selectRootElement(this.recordGridElementRef.nativeElement,!0);this.changeTableCardLayout(e.offsetWidth)}),this.ngZone.runOutsideAngular(()=>{this.resizeSensor=new g.ResizeSensor(this.recordGridElementRef.nativeElement,e=>{this.ngZone.run(()=>{this.changeTableCardLayout(e.width)})})}),this._hasViewInitialized=!0}changeTableCardLayout(e){const t=e<=this.cardLayoutWidth;if(this.hasCardLayout===t||!e)return;this.hasCardLayout=t;const i=this.adaptTable;this.scrollToFirstVisibleRow(),t?this.renderer.addClass(i.el.nativeElement,"rx-table-card-layout"):this.renderer.removeClass(i.el.nativeElement,"rx-table-card-layout"),i.tableService.onValueChange(i.value),this.changedCardLayout.emit({cardLayoutColumns:t?this.getCardLayoutColumns():null})}getCardLayoutColumns(){return[{field:"fields",header:"Fields",filterable:!1,sortable:!1,headerTitleTemplate:this.cardLayoutFieldsHeaderTemplate,width:"35%",dataCellClass:this.getDataCellClass.bind(this),cellTemplate:this.cardLayoutFieldsDataCellTemplate,testId:"fields-column"},{field:"fields",header:"Values",filterable:!1,sortable:!1,headerTitleTemplate:this.cardLayoutValuesHeaderTemplate,width:"65%",dataCellClass:this.getDataCellClass.bind(this),cellTemplate:this.cardLayoutValuesDataCellTemplate,testId:"values-column"}]}getDataCellClass(){return`${this.recordGridGetDataCellClass()} rx-card-layout-data-cell`}scrollToFirstVisibleRow(){const e=this.adaptTable;if(e.scrollable){const t=this.renderer.selectRootElement(e.el.nativeElement,!0).querySelector(".ui-table-scrollable-body"),i=t&&t.scrollTop;if(i){const n=e.dataRows.find(e=>{const t=e.element.nativeElement;return t.offsetTop+t.offsetHeight>=i});if(n){let e=n.element.nativeElement;const o=(i-e.offsetTop)/e.offsetHeight;this.ngZone.onStable.pipe((0,r.take)(1)).subscribe(()=>{e=n.element.nativeElement,t.scrollTop=e.offsetTop+e.offsetHeight*o})}}}}ngOnDestroy(){this.resizeSensor.detach()}}iu.\u0275fac=function(e){return new(e||iu)(n["\u0275\u0275directiveInject"](T.AdaptTableComponent,1),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.Renderer2))},iu.\u0275dir=n["\u0275\u0275defineDirective"]({type:iu,selectors:[["","rxCardLayout",""]],inputs:{cardLayoutFieldsHeaderTemplate:"cardLayoutFieldsHeaderTemplate",cardLayoutValuesHeaderTemplate:"cardLayoutValuesHeaderTemplate",cardLayoutFieldsDataCellTemplate:"cardLayoutFieldsDataCellTemplate",cardLayoutValuesDataCellTemplate:"cardLayoutValuesDataCellTemplate",recordGridGetDataCellClass:["cardLayoutGetDataCellClass","recordGridGetDataCellClass"],recordGridElementRef:["cardLayoutRecordGridElementRef","recordGridElementRef"],cardLayoutWidth:"cardLayoutWidth"},outputs:{changedCardLayout:"changedCardLayout"}});class nu{constructor(e,t){this.rxExpressionEvaluatorService=e,this.rxObjectUtilsService=t,this.evaluationData={}}ngOnInit(){this.updateCellClasses()}ngOnChanges(e){e.rxCellDisplayPropsDataItem.firstChange||e.rxCellDisplayPropsDataItem.currentValue===e.rxCellDisplayPropsDataItem.previousValue||this.updateCellClasses()}getActiveProps(e){return e.find(e=>this.rxExpressionEvaluatorService.tryEvaluate(e.fieldValueCondition,this.evaluationData))||null}getCellCssClasses(e){const t=[];return e.displayAsBadge||(e.bold&&t.push("font-weight-bold"),e.italic&&t.push("font-italic"),e.fontSize===kc.Small?t.push("small"):e.fontSize===kc.Large&&t.push("large"),e.textColor&&t.push(zc[e.textColor]),e.backgroundColor&&t.push(Uc[e.backgroundColor]),e.icon&&(e.iconPosition===$c.ReplaceText?t.push(`d-icon-${e.icon}`):t.push(`d-icon-${e.iconPosition}-${e.icon}`))),t}getSpanCssClasses(e){return e.displayAsBadge?["badge",`badge-${e.badgeColor}`]:e.iconPosition===$c.ReplaceText?["hidden"]:[]}updateCellClasses(){var e;if(null===(e=this.rxCellDisplayProps)||void 0===e?void 0:e.length){let e="";const t=Object.assign(Object.assign({},this.rxCellDisplayPropsDataItem),this.rxObjectUtilsService.expandProperties(this.rxCellDisplayPropsDataItem));(0,u.set)(this.evaluationData,"view.components.grid.clickableRow",t);const i=this.getActiveProps(this.rxCellDisplayProps);if(i){e=this.getCellCssClasses(i).join(" ")}if(this.rxCellDisplayPropsBadgeElem){const e=i?this.getSpanCssClasses(i):[];this.rxCellDisplayPropsBadgeElem.classList.value="",this.rxCellDisplayPropsBadgeElem.classList.add(...e)}this.cssClasses=e}}}nu.\u0275fac=function(e){return new(e||nu)(n["\u0275\u0275directiveInject"](d.RxExpressionEvaluatorService),n["\u0275\u0275directiveInject"](v.RxObjectUtilsService))},nu.\u0275dir=n["\u0275\u0275defineDirective"]({type:nu,selectors:[["","rxCellDisplayProps",""]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.cssClasses)},inputs:{rxCellDisplayProps:"rxCellDisplayProps",rxCellDisplayPropsBadgeElem:"rxCellDisplayPropsBadgeElem",rxCellDisplayPropsDataItem:"rxCellDisplayPropsDataItem"},features:[n["\u0275\u0275NgOnChangesFeature"]]});class ou extends h.BaseViewComponent{constructor(e,t,i,r,a,s,l,d,c,p,m,f,h,g,v,y,b,x,C,S,D,I,R,w,E,F,M,O,N,A,P,j,_,V,k,B){super(),this.adaptDeviceDetectionService=e,this.adaptModalService=t,this.changeDetector=i,this.datePipe=r,this.decimalPipe=a,this.ngZone=s,this.rxAssociationInstanceDataPageService=l,this.rxBooleanPipe=d,this.rxCurrentUserService=c,this.rxExpressionEvaluatorService=p,this.rxFieldDefinitionService=m,this.rxGridConfiguratorService=f,this.rxGuidService=h,this.rxLogService=g,this.rxNotificationService=v,this.rxObjectUtilsService=y,this.rxRecordDefinitionCacheService=b,this.rxRecordDefinitionService=x,this.rxRecordGridAdvancedFilteringService=C,this.rxRecordGridConfigUtilsService=S,this.rxRecordGridFilterConfigService=D,this.rxRecordGridFilterService=I,this.rxRecordGridFilterHelperService=R,this.rxRecordGridSharedFilterPresetsCacheService=w,this.rxRecordGridUserPreferencesService=E,this.rxRecordGridUtilsService=F,this.rxRecordInstanceDataPageService=M,this.rxRecordInstanceService=O,this.rxViewActionService=N,this.rxViewActionUtilsService=A,this.translateService=P,this.elementRef=j,this.rxStringService=_,this.rxGlobalEventsService=V,this.pageComponent=k,this.runtimeViewCanvasItemComponent=B,this.dataLoaded=new n.EventEmitter,this.isExportInProgress=!1,this.lastPropertySelection=[],this.adaptTableConfig={data:[],columns:[],columnResizeMode:T.ResizeMode.Fit,cardLayoutColumns:null,bordered:!0,scrollable:!0,striped:!1,toolbarConfig:{counter:!1,quickFilter:!0,leftCustomSection:!0,leftCustomSectionTemplate:null,filter:!0,filterTemplate:null,filterResults:!1,filterResultsTemplate:null,rightCustomSection:!1,rightCustomSectionTemplate:null,visibleColumnsMenu:!0,visibleColumnsMenuTemplate:null,quickFilterTriggerable:!0,export:{exportTypes:[{type:T.ExportType.CSV}],showExportForSelected:!0}},filterable:!1,selectedItems:[],filters:{},rows:50,first:0,multiSortMeta:null,rowSelectionMode:null,isLoadingData:!1,totalRecords:null,primaryKey:null,isLoadingMoreData:!1,texts:null,expandedGroupsKeys:{},virtualScroll:!0,virtualRowHeight:jc.defaultRowHeight},this.actionButtons=null,this.adaptTableHeaderSelectionMode=T.AdaptTableHeaderSelectionMode.Chunk,this.api={applyViewPreset:this.applyViewPreset.bind(this),shareViewPreset:this.shareViewPreset.bind(this),refresh:this.refresh.bind(this),setFilter:this.setFilter.bind(this),deleteViewPreset:this.deleteViewPreset.bind(this),discardViewPresetChanges:this.discardViewPresetChanges.bind(this),getColumns:this.getColumns.bind(this),getRecordDefinitionName:this.getRecordDefinitionName.bind(this),getSelectedRows:this.getSelectedRows.bind(this),getFirstSelectedRow:this.getFirstSelectedRow.bind(this),getSelectedRowCount:this.getSelectedRowCount.bind(this),setSelectedRows:this.onRowsSelectionChange.bind(this),getVisibleRows:this.getVisibleRows.bind(this),saveViewPreset:this.saveViewPreset.bind(this),applyFilters:this.applyFilters.bind(this)},this.filteredVisibleColumns=[],this.getDataCellClassBind=this.getDataCellClass.bind(this),this.gridEvents={cellClick:(e,t)=>{const i=this.state.columnsWithMetadata.find(e=>e.fieldId===t);this.addSelectionFieldOptionNames(e),e=this.expandRowProperties(e),this.state.lastActionRow=e,this.notifyPropertyChanged("clickableRow",e,null),this.executeViewActions(i.guid,(0,u.get)(i,"actions"),e).catch(u.noop)},cellKeyDown:(e,t,i)=>{(0,u.includes)(["Space","Enter"],e.code)&&(this.gridEvents.cellClick(t,i),e.preventDefault())}},this.isFilterBySelectionButtonVisible=!1,this.isUserAllowedToDeleteRecords=!1,this.openSortByDialog=this.openSortByDialogFn.bind(this),this.rowActionButtons=null,this.rowSelectionChanged=new o.BehaviorSubject([]),this.selectedFilteredRowsCount=0,this.shouldDisplayActionButtons=!1,this.showCellTooltip=!1,this.sortedColumnsByTitle=[],this.state={actionButtons:[],rowActionButtons:[],lastActionRow:null,associatedRecordId:null,associatedRoleName:null,associatedRecordNodeSide:null,associationDefinitionName:null,bordered:!0,cardLayoutWidth:null,columns:[],columnsWithMetadata:[],defaultFilterPreset:null,enableFiltering:!1,requiredFilters:0,getDataForHiddenColumns:!0,enableFilterPresets:!0,enableRowSelection:op.Multiple,expandable:!1,filterExpression:null,filters:null,filterTagsLimit:null,getData:null,recordDefinition:null,associationDescriptors:[],recordDefinitionName:null,recordGridFilters:[],recordIdField:null,showDataForAllLocales:null,striped:!1,styles:null,initialFilters:null,expandGroups:!1,advancedFiltering:{activeSavedFilter:null,savedFilters:[],filterOptions:[],selectedFilters:[],recordGridFilterConfigs:null,filterTexts:null,hasLoadedSharedFilterPresets:!1,isLoading:!1,appliedSharedFilterPreset:null,toolbarTags:[],pendingSelectedFilters:[],selectedCardValues:{}},emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),emptyStateWithFilterLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),searchFieldPlaceholderText:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),enableColumnSelection:!0,namedFilterOptions:null,predefinedFilterPresets:[],viewPresetSelector:null,virtualScroll:!0},this.visibleColumns=[],this.cellValueFormatters={},this.clickableWithHrefColumnActions={},this.dataLoadContextSubject=new o.Subject,this.popovers=[],this.userPreferencesChanged$=new o.Subject,this.exportSelectedRowText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-row.label"),this.exportSelectedRowsText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-rows.label"),this.pendingFiltersToApply=null,this.getNamedFilterOptions=this.getNamedFilterOptions.bind(this),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$)}onClickOutside(e){!(e.target.closest(".ui-table-tbody")||e.target.closest(".popover.table-filtering")||e.target.closest(".rx-filter-by-card-selection-dialog")||e.target.closest(".rx-filter-by-card-selection-field-dropdown"))&&this.clearSelectedCells()}get isTotalRecordCountKnown(){return!(0,u.isNull)(this.adaptTableConfig.totalRecords)}ngOnInit(){super.ngOnInit(),this.isProgrammaticUse=Boolean(this.pageComponent)||!this.runtimeViewCanvasItemComponent,this.isProgrammaticUse&&(this.adaptTableConfig.toolbarConfig.export=null),this.notifyPropertyChanged("api",this.api),this.initializationCompleted$=this.config.pipe((0,r.take)(1),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.tap)(e=>{Object.assign(this.state,e)}),(0,r.switchMap)(()=>{this.state.guid&&(this.guid=this.state.guid);const e=[this.initRecordDefinitions()];return this.guid&&(this.userPreferencesChanged$.pipe((0,r.debounceTime)(1e3),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.rxRecordGridUserPreferencesService.saveUserPreferences(this.guid,this.adaptTableConfig,this.state),this.checkIfViewPresetEdited()}),e.push(this.rxRecordGridUserPreferencesService.get(this.guid))),(0,o.forkJoin)(e)}),(0,r.switchMap)(()=>this.initGrid()),(0,r.shareReplay)(1)),this.initializationCompleted$.subscribe();const e=(0,o.combineLatest)([this.initializationCompleted$,this.dataLoaded,this.config.pipe((0,r.skip)(1),(0,r.debounceTime)(250),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.takeUntil)(this.destroyed$))]).pipe((0,r.map)(([e,t,i])=>i));e.pipe((0,r.map)(e=>(0,u.differenceBy)(e.columns,this.state.columns,"additionalQueryCriteria")),(0,r.filter)(e=>e.length>0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e.forEach(e=>{this.state.advancedFiltering.filterOptions.find(t=>t.id===e.fieldId).data.additionalQueryCriteria=e.additionalQueryCriteria;const t=this.state.columns.findIndex(t=>t.fieldId===e.fieldId);this.state.columns[t].additionalQueryCriteria=e.additionalQueryCriteria})});const t=new Map;e.pipe((0,r.debounceTime)(10),(0,r.map)(e=>this.getNamedFilterOptionsState(e.columns)),(0,r.withLatestFrom)(this.dataLoadContextSubject),(0,r.filter)(([e,t])=>!(0,u.isEqual)(e,t.namedFilterOptions)),(0,r.tap)(([e])=>{this.state.namedFilterOptions=e}),(0,r.map)(([e])=>Object.values(e).reduce((e,t)=>e.concat(t),[])),(0,r.map)(e=>{const i=this.state.advancedFiltering.selectedFilters.reduce((e,t)=>e.concat(t.value.namedOptions),[]);return e.some(e=>{const n=Boolean(t.get(e.guid));n||t.set(e.guid,e);const o=e.filterExpression!==t.get(e.guid).filterExpression,r=i.includes(e.guid)&&(o||!n);return o&&t.set(e.guid,e),r})}),(0,r.filter)(e=>e),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.loadRowData()}),e.pipe((0,r.debounceTime)(10),(0,r.withLatestFrom)(this.dataLoadContextSubject),(0,r.filter)(([e,t])=>e.associatedRecordId!==t.associatedRecordId||e.associatedRoleName!==t.associatedRoleName||e.filterExpression!==t.filterExpression),(0,r.tap)(([e])=>{Object.assign(this.state,e)})).subscribe(()=>{this.loadRowData()}),this.config.pipe((0,r.map)(e=>e.viewPresetSelector),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state.viewPresetSelector=e}),this.isProgrammaticUse&&(e.pipe((0,r.map)(e=>({actionButtons:e.actionButtons,rowActionButtons:e.rowActionButtons})),(0,r.distinctUntilChanged)(u.isEqual)).subscribe(({actionButtons:e,rowActionButtons:t})=>{this.state.actionButtons=e,this.actionButtons=this.getProgrammaticActionButtons(this.state.actionButtons),this.state.rowActionButtons=t,this.rowActionButtons=this.getProgrammaticActionButtons(this.state.rowActionButtons)}),e.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.tap)(e=>{Object.assign(this.state,e),this.state.advancedFiltering.selectedFilters=[],this.adaptTableConfig.multiSortMeta=[]}),(0,r.switchMap)(()=>{this.state.guid&&(this.guid=this.state.guid);const e=[this.initRecordDefinitions()];return this.guid&&e.push(this.rxRecordGridUserPreferencesService.get(this.guid)),(0,o.forkJoin)(e)}),(0,r.switchMap)(()=>this.initGrid())).subscribe()),this.adaptTableConfig.virtualScroll=this.state.virtualScroll;const i=this.adaptTableConfig.toolbarConfig;i.visibleColumnsMenu=this.state.enableColumnSelection,i.visibleColumnsMenuTemplate=this.visibleColumnsMenuTemplate,i.rightCustomSectionTemplate=this.rightCustomSectionTemplate,i.leftCustomSectionTemplate=this.leftCustomSectionTemplate,i.filterTemplate=this.filterTemplate,this.notifyPropertyChanged("totalRowCount",0),this.notifyPropertyChanged("selectedRows",[]),this.notifyPropertyChanged("selectedRowCount",0),this.notifyPropertyChanged("fieldValuesByFieldId",{}),this.notifyPropertyChanged("firstSelectedRow",null),this.notifyPropertyChanged("queryExpression",""),this.notifyPropertyChanged("lastRefreshTime",""),this.initAdvancedFilterTexts(),this.initCustomTexts(),this.rxGlobalEventsService.viewActionsCompleted$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>{(0,u.isEmpty)(this.pendingFiltersToApply)||this.onAdvancedFiltersChange(this.pendingFiltersToApply),this.pendingFiltersToApply=null})}ngAfterViewInit(){this.actionButtonComponents.changes.pipe((0,r.switchMap)(e=>(0,o.merge)(...e.map(e=>(0,o.of)({guid:e.guid,propertyName:"api",newValue:e.api,oldValue:null})),...e.map(e=>e.propertyChanged.asObservable())))).subscribe(e=>this.propertyChanged.emit(e))}ngOnDestroy(){super.ngOnDestroy(),this.dataLoadContextSubject.complete(),this.userPreferencesChanged$.complete()}applyFilterBySelection(){(0,u.isEmpty)(this.state.advancedFiltering.selectedCardValues)?this.applyPendingSelectedFilters():(this.cardLayoutOpenedModal=this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filter-by-selection.title"),content:Jp,data:{filterableFields:this.visibleColumns.filter(e=>{if(e.filterable){const t=this.state.recordDefinition.fieldDefinitionsById[e.field];return!(t.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(t))}return!1}).map(e=>({id:e.field,name:e.header||e.fallbackTitle}))},customClass:"rx-filter-by-card-selection-dialog"}),this.cardLayoutOpenedModal.then(e=>{this.state.advancedFiltering.pendingSelectedFilters=[{filterOptionId:e,value:this.state.advancedFiltering.selectedCardValues[e]}],this.applyPendingSelectedFilters()}).catch(u.noop))}buildQueryByAdvancedFilters(e){const t=e.map(e=>{var t;let i=null;const n=e.filterOptionId,o=this.state.recordDefinition.fieldDefinitionsById[n];if(o){i=this.state.advancedFiltering.recordGridFilterConfigs[o.resourceType].getQueryFilter(e,o,n,null!==(t=this.state.namedFilterOptions[n])&&void 0!==t?t:[])}return i});return this.rxRecordGridFilterService.addQueries(...t)}downloadAttachment(e,t,i,n){if(!n||(0,u.includes)(["Space","Enter"],n.code))if(this.rxRecordGridUtilsService.isAssociatedRecordFieldId(t.field)){const n=this.rxRecordGridUtilsService.getFieldLocator(t.field),o=(0,u.find)(this.state.associationDescriptors,{associationDefinition:{guid:n.associationGuid}});this.rxAssociationInstanceDataPageService.post({params:{pageSize:1,startIndex:0,associationDefinition:o.associationDefinition.name,nodeToQuery:n.associationNodeSide,associatedRecordInstanceId:e[a.RX_RECORD_DEFINITION.coreFieldIds.id],propertySelection:a.RX_RECORD_DEFINITION.coreFieldIds.id}}).pipe((0,r.take)(1)).subscribe(e=>{const t=e.data[0][a.RX_RECORD_DEFINITION.coreFieldIds.id];this.rxRecordInstanceService.downloadAttachment(o.recordDefinitionName,Number(n.fieldId),t,i)})}else this.rxRecordInstanceService.downloadAttachment(this.state.recordDefinitionName,Number(t.field),e[a.RX_RECORD_DEFINITION.coreFieldIds.id],i)}executeViewActions(e,t,i){if(this.isProgrammaticUse){return(0,u.sortBy)(t,"index").reduce((e,t)=>(0,u.isFunction)(t.name)?e.then(e=>t.name(e,i)):(0,u.isString)(t.name)?e.then(e=>(()=>{this.rxViewActionService.execute(t.name.toString(),t.params).subscribe()})()):e,Promise.resolve())}return this.runtimeViewModelApi.triggerViewActions(e,h.VIEW_COMPONENT_DEFAULT_EVENT_NAME)}getActionButtonConfig(e,t){return e?t.pipe((0,r.map)(e=>Object.assign(Object.assign({},e),{cls:"dropdown-item"}))):t}getCellValue(e,t){return(0,this.cellValueFormatters[t.field])(e[t.field])}getDataCellClass(){return this.popovers.length?"rx-cell-selection-mode":""}getLoadRecordCountLinkText(){return`${this.adaptTableConfig.data.length}+`}getMultipleRowsSelectedText(){return this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.multiple-rows-selected.label",{count:this.adaptTableConfig.selectedItems.length,total:this.isTotalRecordCountKnown?this.adaptTableConfig.totalRecords:this.getLoadRecordCountLinkText()})}getMultipleRowsSelectedTextFirstPart(){const e=this.getMultipleRowsSelectedText();return e.substring(0,e.indexOf(this.getLoadRecordCountLinkText()))}getMultipleRowsSelectedTextSecondPart(){const e=this.getMultipleRowsSelectedText(),t=this.getLoadRecordCountLinkText();return e.substring(e.indexOf(t)+t.length)}getNamedFilterOptions(e){return this.state.namedFilterOptions[e.id]}getSharedFilterPresets(){this.state.advancedFiltering.isLoading=!0;const e=()=>{this.state.advancedFiltering.isLoading=!1,this.state.advancedFiltering.hasLoadedSharedFilterPresets=!0};return this.rxRecordGridSharedFilterPresetsCacheService.getSharedFilterPresets(this.guid).pipe((0,r.catchError)(t=>(e(),(0,o.throwError)(t))),(0,r.tap)(()=>{e()}))}getSortedColumnsByTitle(){return this.adaptTableConfig.columns.slice().sort((e,t)=>e.header.localeCompare(t.header))}getToolbarTags(e){const t=(e||[]).map(e=>{if(e.data.filterOption&&e.data.filterOption.id!==jc.externalPresetFilterOptionId){const t=e.data.filterOption.id,i=this.state.recordDefinition.fieldDefinitionsById[t],n=this.state.advancedFiltering.recordGridFilterConfigs[i.resourceType];if((0,u.isFunction)(n.getToolbarTagInfo))return n.getToolbarTagInfo({primaryRecordDefinition:this.state.recordDefinition,fieldDefinition:i,value:e.data.value,tag:e,fieldId:t,namedFilterOptions:this.state.namedFilterOptions[t]}).pipe((0,r.tap)(t=>e.data.value.title=t.tooltip),(0,r.map)(t=>Object.assign(Object.assign({},e),{text:t.text})))}return(0,o.of)(Object.assign({},e))});return t.length?(0,o.forkJoin)(t):(0,o.of)([])}getVisibleColumns(){return this.adaptTable.getVisibleColumns(this.adaptTableConfig.columns)}getVisibleRows(){return this.adaptTableConfig.data}handleHeaderCheckboxToggle(e){this.setSelectedFilteredRowsCount()}isCellSelected(e){return(0,u.some)(this.popovers,t=>t===e)}loadSavedFilterPresetFilters(e){return this.state.advancedFiltering.isLoading=!0,this.rxRecordGridFilterService.getAdvancedFilterData(e.filterData,this.state.recordDefinition.fieldDefinitionsById,this.state.advancedFiltering.recordGridFilterConfigs,this.state.recordDefinition,this.state.advancedFiltering.filterOptions,this.state.associationDescriptors).pipe((0,r.tap)(t=>{e.filters=(e.filters||[]).concat(t),this.state.advancedFiltering.isLoading=!1}))}loadTotalRowCount(){this.getTotalRowCount().subscribe(e=>{this.adaptTableConfig.totalRecords=e.totalSize})}onActiveSavedAdvancedFilterChange(e){this.state.advancedFiltering.activeSavedFilter=e}onAdvancedFilterExpressionTagsChanged(e){if(e.filterExpressionTags.every(e=>(0,u.isEmpty)(e.data.validationErrors))){const t=this.state.advancedFiltering.toolbarTags;this.updateToolbarTags(e.filterExpressionTags),t!==this.state.advancedFiltering.toolbarTags&&this.changeDetector.detectChanges()}}onAdvancedFiltersChange(e){this.state.advancedFiltering.appliedSharedFilterPreset=null;const t=this.getAppliedExternalPresetFilter(e);if(t){const e=this.state.advancedFiltering.savedFilters.find(e=>e.id===t.value);if(this.isSharedFilterPreset(e))this.state.advancedFiltering.appliedSharedFilterPreset=e;else if(e.appliedSharedFilterPresetGuid){const t=(0,u.find)(this.state.advancedFiltering.savedFilters,{id:e.appliedSharedFilterPresetGuid});this.state.advancedFiltering.appliedSharedFilterPreset=t}}this.adaptTableConfig.first=0,this.state.advancedFiltering.selectedFilters=e,this.adaptTableConfig.isLoadingMoreData=!1,this.updateAdaptTableFilters(),this.userPreferencesChanged$.next(),this.updateToolbarTags(this.state.advancedFiltering.toolbarTags),this.state.useExternalFiltering?this.loadRowData(!1):this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows)}onBeforeActiveSavedFilterChange(e){const t=e.savedFilterToSelect;t&&(t.filters&&this.areNonExternalPresetFiltersApplied(t.filters)||this.loadSavedFilterPresetFilters(t).subscribe())}onCellClick(e,t,i,n,o){!!e.target.closest("a")?this.clearSelectedCells():(this.popovers.length&&(e.metaKey||e.ctrlKey||this.clearSelectedCells()),t&&this.toggleCellSelection(t.filter(e=>!e.isRowActionsColumn),i,n,o))}onFilterBySelection(e,t,i){this.onCellClick(e,t,i,null,!0),this.applyFilterBySelection()}onCellMouseOver(e){const t=e.currentTarget;this.showCellTooltip=t.offsetWidth<t.scrollWidth}onChangedCardLayout(e){this.adaptTableConfig.cardLayoutColumns=e.cardLayoutColumns,this.clearSelectedCells(),this.cardLayoutOpenedModal&&(this.cardLayoutOpenedModal.reject(),this.cardLayoutOpenedModal=null),this.guid&&this.rxRecordGridUserPreferencesService.applyUserPreferencesForColumns(this.adaptTableConfig,this.state.columnsWithMetadata,this.guid),this.visibleColumns=this.getVisibleColumns(),this.adaptTableConfig.virtualRowHeight=this.getVirtualRowHeight()}onColReorder(e){this.visibleColumns=this.getVisibleColumns(),this.userPreferencesChanged$.next()}onColumnResize(){const e=this.adaptTable.el.nativeElement.getBoundingClientRect(),t=null==e?void 0:e.width,i=this.adaptTable.dataHeaderCells.reduce((e,t)=>e+t.element.nativeElement.offsetWidth,0),n=100*i/(t*this.getVisibleColumns().length)+"%",o=(0,u.reduce)(this.adaptTable.dataHeaderCells.toArray(),(e,t)=>{const n=t.data.renderingColumn.columnsConfigs[0];let o=null;return i&&(o=(0,u.endsWith)(n.width,"px")||this.state.expandable?`${t.element.nativeElement.offsetWidth}px`:`${(0,u.round)(t.element.nativeElement.offsetWidth/i*100,2)}%`),e[n.field]=o,e},{});this.adaptTableConfig.columns.forEach(e=>{var t;e.hidden||(e.width=null!==(t=o[e.field])&&void 0!==t?t:n)}),this.userPreferencesChanged$.next()}onColumnVisibilityChange(e,t){t.hidden===e&&(t.hidden=!e,this.userPreferencesChanged$.next(),this.visibleColumns=this.getVisibleColumns(),this.adaptTableConfig.virtualRowHeight=this.getVirtualRowHeight(),e?this.lastPropertySelection.includes(t.field)||this.loadRowData():this.avoidSystemColumnExpansion())}onCreateNewFilterPreset(e){const t={filters:e.filters,name:e.name,id:this.rxGuidService.generate()},i=this.getAppliedExternalPresetFilter(e.filters);i&&(t.appliedSharedFilterPresetGuid=i.value),this.state.advancedFiltering.savedFilters.push(t),this.state.advancedFiltering.activeSavedFilter=t,this.userPreferencesChanged$.next()}onDeleteSavedFilterPreset(e){(0,u.remove)(this.state.advancedFiltering.savedFilters,t=>t.id===e.id),this.userPreferencesChanged$.next()}onEditSavedFilterClick(e){let t=null;e.savedFilter.appliedSharedFilterPresetGuid&&(t=e=>e),e.savedFilter.filters&&this.areNonExternalPresetFiltersApplied(e.savedFilter.filters)?e.savedFilter.appliedSharedFilterPresetGuid&&(e.preventDefault(),e.initSavedFilterEditing(t.bind(this))):(e.preventDefault(),this.loadSavedFilterPresetFilters(e.savedFilter).subscribe(()=>{e.initSavedFilterEditing(t&&t.bind(this))}))}onExport(e){if(this.isExportInProgress)return void this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-in-progress.message"));const t=this.getVisibleColumns().filter(e=>!e.isRowActionsColumn);if(!t.length)return void this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.no-data-to-export.message"));const i=t.map(e=>e.header||e.fallbackTitle);let n;if(e.selectionOnly)n=(0,o.of)((0,u.intersectionBy)(this.adaptTableConfig.data,this.getSelectedRows(),d.RowDataItemIdFieldName));else{const e=this.getHeaders(),i=this.prepareQueryParamsAndQueryArgs(!1);i.pageSize=-1,i.propertySelection=t.map(e=>e.field),delete i.cursor,this.isExportInProgress=!0,n=this.getDataPageService().post({params:i,headers:e}).pipe((0,r.map)(e=>e.data),(0,r.finalize)(()=>{this.isExportInProgress=!1}))}n.subscribe(e=>{const n=this.getCellValues(e,t);this.exportDataToCsv(n,i)})}onLazyLoad(e){this.state.useExternalFiltering?(e.loadMore||e.eventSource!==T.AdaptTableEventSource.LoadMore)&&(this.adaptTableConfig.multiSortMeta=e.multiSortMeta,this.adaptTableConfig.filters=e.filters,this.adaptTableConfig.isLoadingMoreData=e.loadMore,this.loadRowData(e.loadMore)):e.eventSource===T.AdaptTableEventSource.FilterChange&&(this.adaptTableConfig.filters=e.filters,this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows))}onRefreshClick(){this.state.useExternalFiltering||this.loadRowData(!1);const e=this.adaptTable.toolbarComponent.getQuickFilterInputValue();this.adaptTable.setQuickFilter(e)}onRemoveFilterTag(e){this.state.advancedFiltering.activeSavedFilter=null;const t=this.state.advancedFiltering.selectedFilters.slice(),i=e.removedTag.data.filterOption.id,n=(0,u.findIndex)(t,e=>e.filterOptionId===i);t.splice(n,1),this.onAdvancedFiltersChange(t),this.setToolbarTags(e.newTags)}onRowsSelectionChange(e){const t=e?(0,u.castArray)(e):[],i=this.adaptTableConfig.selectedItems;this.shouldDisplayActionButtons=!(0,u.isEmpty)(t)&&!(0,u.isEmpty)(this.actionButtons),this.expandSelectedRowsProperties(t),this.adaptTableConfig.selectedItems=t,this.adaptTableConfig.toolbarConfig=Object.assign(Object.assign(Object.assign({},this.adaptTableConfig.toolbarConfig),{quickFilter:!this.shouldDisplayActionButtons,leftCustomSectionFixed:this.shouldDisplayActionButtons,rightCustomSectionFixed:this.shouldDisplayActionButtons,leftCustomSection:this.shouldDisplayActionButtons,filter:!this.shouldDisplayActionButtons}),this.state.toolbarConfig),this.adaptTableConfig.texts=Object.assign(Object.assign({},this.adaptTableConfig.texts),{exportSelected:this.getExportSelectedText(t)}),this.addSelectionFieldOptionNames(t[0]),this.notifyPropertyChanged("selectedRows",t,i),this.notifyPropertyChanged("selectedRowCount",t.length,i.length),this.notifyPropertyChanged("firstSelectedRow",t[0],i[0]),this.notifyPropertyChanged("fieldValuesByFieldId",this.prepareFieldsValueByFieldIdData(t),{}),this.rowSelectionChanged.next(t)}onSearchColumns(){this.filteredVisibleColumns=this.sortedColumnsByTitle.filter(e=>this.rxStringService.caseInsensitiveSearch(e.header,this.columnSearchText))}onSort(e){this.applySorting(e.multisortmeta)}onSortCards(e){this.applySorting(e),this.loadRowData()}onRowActionOpen(e){var t;null===(t=(0,u.last)(this.popovers))||void 0===t||t.close(),this.addSelectionFieldOptionNames(e);const i=this.expandRowProperties(e);this.state.lastActionRow=i,this.notifyPropertyChanged("clickableRow",i,null)}onUpdateSavedFilterPreset(e){const t=(0,u.find)(this.state.advancedFiltering.savedFilters,t=>t.id===e.oldSavedFilter.id);t&&(t.appliedSharedFilterPresetGuid&&!(0,u.find)(e.newSavedFilter.filters,e=>e.filterOptionId===jc.externalPresetFilterOptionId)&&delete t.appliedSharedFilterPresetGuid,Object.assign(t,e.newSavedFilter),this.userPreferencesChanged$.next())}openRowDetails(e,t){var i;null===(i=(0,u.last)(this.popovers))||void 0===i||i.close(),this.cardLayoutOpenedModal=this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.record-details.dialog.title"),content:this.cardLayoutRowDetailsTemplate,data:{columns:e,rowDataItem:t}}),this.cardLayoutOpenedModal.catch(u.noop)}setToolbarTags(e){this.state.advancedFiltering.toolbarTags=e,this.updateToolbarItems()}trackByColumnField(e,t){return t.field}updateToolbarTags(e){this.getToolbarTags(e).subscribe(e=>{this.setToolbarTags(e)})}addAssociationFieldsToRecordDefinition(e){const t=this.state.recordDefinition.fieldDefinitionsById;e.forEach(e=>{t[e.fieldId]||this.rxRecordDefinitionService.addFieldDefinitionToMap(e.fieldDefinition,t,e.fieldId)}),this.state.recordDefinition.fieldDefinitionsById=Object.assign(Object.assign({},t),this.rxObjectUtilsService.expandProperties(t)),this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}areNonExternalPresetFiltersApplied(e){return e.some(e=>e.filterOptionId!==jc.externalPresetFilterOptionId)}getAppliedExternalPresetFilter(e){return e.find(e=>e.filterOptionId===jc.externalPresetFilterOptionId)}prepareFieldsValueByFieldIdData(e){const t=(0,u.map)(this.adaptTableConfig.columns,"field");return(0,u.reduce)(e,(e,i,n)=>(t.forEach(function(t){e[t]=e[t]||[],e[t][n]=i[t]}),e),{})}addSelectionFieldOptionNames(e){e&&(e.selectionFieldOptionNamesById=(0,u.transform)(this.selectionFieldOptionLabelsByFieldId,(t,i,n)=>{t[n]=i[e[n]]},{}))}applyFilters(e,t){this.initializationCompleted$.pipe((0,r.switchMap)(()=>this.rxRecordGridFilterService.getAdvancedFilterData(e,this.state.recordDefinition.fieldDefinitionsById,this.state.advancedFiltering.recordGridFilterConfigs,this.state.recordDefinition,this.state.advancedFiltering.filterOptions,this.state.associationDescriptors)),(0,r.take)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{let i,n=(0,u.isEmpty)(this.pendingFiltersToApply)?(0,u.cloneDeep)(this.state.advancedFiltering.selectedFilters):this.pendingFiltersToApply;switch(t){case d.ApplyGridFilterMode.Begin:this.pendingFiltersToApply?i=this.pendingFiltersToApply:this.pendingFiltersToApply=[];break;case d.ApplyGridFilterMode.Append:i=[...n.filter(t=>!e.find(e=>e.filterOptionId===t.filterOptionId)),...e];break;case d.ApplyGridFilterMode.Remove:i=n.reduce((t,i)=>{const n=e.find(e=>e.filterOptionId===i.filterOptionId);return n?(this.isRangeFilter(i.filterOptionId)?(0,u.isEqual)(i.value.filterValue,n.value.filterValue)&&(i.value.filterValue=[null,null]):i.value.filterValue=i.value.filterValue.filter(e=>!n.value.filterValue.includes(e)),i.value.namedOptions=i.value.namedOptions.filter(e=>!n.value.namedOptions.includes(e)),rp.isEmptyWithRange(i.value)||t.push(i)):t.push(i),t},[]);break;case d.ApplyGridFilterMode.Merge:i=[...n,...e].reduce((e,t)=>{const i=e.find(e=>e.filterOptionId===t.filterOptionId);return i?(this.isRangeFilter(t.filterOptionId)?i.value.filterValue=[...t.value.filterValue]:i.value.filterValue=(0,u.uniq)(i.value.filterValue.concat(t.value.filterValue)),i.value.namedOptions=(0,u.uniq)(i.value.namedOptions.concat(t.value.namedOptions))):e.push(t),e},[]);break;case d.ApplyGridFilterMode.Overwrite:this.state.advancedFiltering.appliedSharedFilterPreset=null,this.state.advancedFiltering.activeSavedFilter=null,i=e;break;case d.ApplyGridFilterMode.Clear:this.state.advancedFiltering.appliedSharedFilterPreset=null,this.state.advancedFiltering.activeSavedFilter=null,i=[],this.pendingFiltersToApply&&(this.state.advancedFiltering.selectedFilters=[]);break;case d.ApplyGridFilterMode.End:this.pendingFiltersToApply&&(i=this.pendingFiltersToApply,this.pendingFiltersToApply=null)}this.pendingFiltersToApply?this.pendingFiltersToApply=i||[]:i&&this.onAdvancedFiltersChange(i)})}applyPendingSelectedFilters(){const e=(0,u.cloneDeep)(this.state.advancedFiltering.selectedFilters);(0,u.forEach)(this.state.advancedFiltering.pendingSelectedFilters,t=>{const i=(0,u.find)(e,{filterOptionId:t.filterOptionId});let n=[];switch(this.state.recordDefinition.fieldDefinitionsById[t.filterOptionId].resourceType){case a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType:n=t.value.map(e=>(0,I.default)(e)),n=[I.default.min(n),I.default.max(n)];break;case a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType:n=t.value.map(e=>(0,I.default)(e,"LTS")),n=[I.default.min(n),I.default.max(n)];break;case a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.real.resourceType:n=[(0,u.min)(t.value),(0,u.max)(t.value)];break;case a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType:n=t.value.map(e=>"$NULL$"===e?"blank":1===e);break;default:n=(0,u.uniq)(t.value.map(e=>String(e)))}i?i.value.filterValue=n:(t.value=new rp(n),e.push(t))}),this.onAdvancedFiltersChange(e),this.clearSelectedCells()}applySorting(e){this.adaptTableConfig.multiSortMeta=e,this.userPreferencesChanged$.next(),this.state.useExternalFiltering||(this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.data))}applyViewPreset(e,t,i){var n;return e===(null===(n=this.state.viewPresetSelector)||void 0===n?void 0:n.getGuid())?this.applyViewPresetInner(t,i):o.EMPTY}shareViewPreset(e){var t;return e===(null===(t=this.state.viewPresetSelector)||void 0===t?void 0:t.getGuid())?(0,o.of)(this.rxRecordGridUserPreferencesService.getSharedViewPresetData()):(0,o.of)(null)}applyViewPresetInner(e,t){return this.initializationCompleted$.pipe((0,r.switchMap)(()=>{const i=t&&t[this.guid];return i?this.rxRecordGridUserPreferencesService.applySharedViewPreset(this.state,this.adaptTableConfig,e,i):this.rxRecordGridUserPreferencesService.applyViewPreset(this.state,this.adaptTableConfig,e)}),(0,r.take)(1),(0,r.tap)(()=>{this.loadRowData(),this.userPreferencesChanged$.next(),this.checkIfViewPresetEdited()}))}areUserFiltersApplied(){return this.isSearchApplied()||Boolean(this.state.advancedFiltering.appliedSharedFilterPreset)||!(0,u.isEmpty)(this.state.advancedFiltering.selectedFilters)}isSearchApplied(){const e=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim();return Boolean(e)}checkIfViewPresetEdited(){this.state.viewPresetSelector&&this.rxRecordGridUserPreferencesService.isCurrentViewPresetEdited()&&this.state.viewPresetSelector.markAppliedViewPresetAsEdited()}clearSelectedCells(){var e;null===(e=(0,u.last)(this.popovers))||void 0===e||e.close(),this.popovers=[],this.state.advancedFiltering.pendingSelectedFilters=[],this.state.advancedFiltering.selectedCardValues={}}compareRows(e,t){const i=this.adaptTableConfig.multiSortMeta;return(0,u.reduce)(i,(i,n)=>{let o,r;if(e.groupField&&t.groupField?(o=e.groupField===n.field?e.groupValue:null,r=t.groupField===n.field?t.groupValue:null):(o=e[n.field],r=t[n.field]),isNaN(o)||isNaN(r))i=i||n.order*(0,u.toString)(o).localeCompare((0,u.toString)(r));else{const e=Number(o),t=Number(r);i=i||n.order*(e<t?-1:e>t?1:0)}return i},0)}createCsvExportFile(e){const t=new Blob([`\ufeff${e}`],{type:"text/csv;charset=utf-8"});this.ngZone.runOutsideAngular(()=>{(0,O.saveAs)(t,`${this.getExportFileName()}.csv`)})}deleteViewPreset(e){return this.rxRecordGridUserPreferencesService.deleteViewPreset(e),this.userPreferencesChanged$.next(),o.EMPTY}discardViewPresetChanges(e,t){return this.rxRecordGridUserPreferencesService.isExistingViewPreset(e)?(this.rxRecordGridUserPreferencesService.discardViewPresetChanges(e),this.applyViewPresetInner(e,t)):o.EMPTY}enrichRowEntity(e){let t={};if(!(0,u.isEmpty)(this.clickableWithHrefColumnActions)){this.addSelectionFieldOptionNames(e);const i=this.expandRowProperties(e);(0,u.set)(this.clickableWithHrefActionExpressionEvaluationData,`view.components.${this.guid}.clickableRow`,i),t=(0,u.reduce)(this.clickableWithHrefColumnActions,(e,t,i)=>{const n=this.findEnabledGridAction(t);return(null==n?void 0:n.name)===d.RX_VIEW_ACTION.viewActionNames.openView?(e[`${i}$ROUTER_LINK$`]=this.rxViewActionUtilsService.generateViewUrl(n.viewDefinitionName),e[`${i}$QUERY_PARAMS$`]=this.evaluateViewInputParameters(n.viewParams)):(null==n?void 0:n.name)===d.RX_VIEW_ACTION.viewActionNames.launchUrl?(e[`${i}$LAUNCH_URL$`]=this.rxExpressionEvaluatorService.tryEvaluate(n.url,this.clickableWithHrefActionExpressionEvaluationData),e[`${i}$TARGET$`]=d.RX_LAUNCH_BEHAVIOR[n.launchBehavior].target):(e[`${i}$LAUNCH_URL$`]=null,e[`${i}$ROUTER_LINK$`]=null),e},{})}return Object.assign({},e,{[d.RowDataItemIdFieldName]:e[this.adaptTableConfig.primaryKey]},t)}expandRowProperties(e){return Object.assign(Object.assign({},e),this.rxObjectUtilsService.expandProperties(e))}expandSelectedRowsProperties(e){(0,u.forEach)(e,(t,i)=>{e[i]=this.expandRowProperties(t)})}exportDataToCsv(e,t){const i=`${`"${t.join('","')}"\n`}${e.map(e=>`"${e.join('","')}"\n`).join("")}`;this.createCsvExportFile(i)}evaluateViewInputParameters(e){const t={};return(0,u.forEach)(e,(e,i)=>{const n=this.rxExpressionEvaluatorService.tryEvaluate(e,this.clickableWithHrefActionExpressionEvaluationData);t[i]=n||""}),t}filterRows(e){const t=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim();let i=(0,u.cloneDeep)(e);if(t){const e=this.getVisibleColumns();i=i.filter(i=>(0,u.some)(e,n=>i.groupField?!!this.rxStringService.caseInsensitiveSearch(i.groupValue,t)||(i.items=this.getFilteredItems(i.items,e,t),i.items.length):this.rxStringService.caseInsensitiveSearch(this.getCellValue(i,n),t)))}if((0,u.isEmpty)(this.state.advancedFiltering.selectedFilters)||(i=this.rxRecordGridFilterService.filterRows(i,this.state.advancedFiltering.selectedFilters,this.state.recordDefinition,this.state.advancedFiltering.recordGridFilterConfigs)),this.adaptTableConfig.multiSortMeta&&(this.state.expandGroups?this.sortRows(i):i.sort((e,t)=>this.compareRows(e,t))),this.state.expandGroups){const e=t=>{const i=t.filter(e=>e.items);let n=t.length-i.length;return null==i||i.forEach(t=>n+=e(t.items)),n};this.adaptTableConfig.totalRecords=e(i)}else this.adaptTableConfig.totalRecords=i.length;return i}findEnabledGridAction(e){return e.find(e=>{const t=e.$condition$;return!1!==this.rxExpressionEvaluatorService.tryEvaluate(t,this.clickableWithHrefActionExpressionEvaluationData)})}getAdvancedFilterOptions(){return(0,u.reduce)(this.state.recordDefinition.fieldDefinitionsById,(e,t,i)=>{var n;if(!(0,u.isUndefined)(t.id)){const o=this.adaptTableConfig.columns.find(e=>e.field===i),r=!o||!o.filterable,a=this.state.advancedFiltering.recordGridFilterConfigs[t.resourceType],s=null==o?void 0:o.additionalQueryCriteria;a&&e.push(this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(i,o?o.header||o.fallbackTitle:t.name,t,a,r,{optionalBooleanFilter:this.fieldsProvider.optionalBooleanFilter,requiredBooleanFilter:this.fieldsProvider.requiredBooleanFilter,inputsForStringWithTypeAheadTemplate:this.fieldsProvider.inputsForStringWithTypeAheadTemplate,inputsForStringTypeTemplate:this.fieldsProvider.inputsForStringTypeTemplate,inputsForNumberTypeTemplate:this.fieldsProvider.inputsForNumberTypeTemplate,inputsForTimeTypeTemplate:this.fieldsProvider.inputsForTimeTypeTemplate,inputsForDateTypeTemplate:this.fieldsProvider.inputsForDateTypeTemplate,inputsForDatetimeTypeTemplate:this.fieldsProvider.inputsForDatetimeTypeTemplate,inputsForSelectionTypeTemplate:this.fieldsProvider.inputsForSelectionTypeTemplate},null,this.state.namedFilterOptions[i],null!==(n=null==o?void 0:o.typeaheadKeystrokeCount)&&void 0!==n?n:null,(null==o?void 0:o.filterable)?s:null))}return e},[]).sort((e,t)=>e.label.localeCompare(t.label))}getAssociationDescriptors(){const e=this.getRecordDefinitionName();return e?this.rxRecordGridUtilsService.getAssociationDescriptors(e):(0,o.of)([])}getBaseDataPageParams(){const e=this.state,t={recorddefinition:e.recordDefinitionName};return Boolean(e.associationDefinitionName)&&Object.assign(t,{associatedRecordInstanceId:e.associatedRecordId,associationDefinition:e.associationDefinitionName,nodeToQuery:e.associatedRecordNodeSide,recordDefinitionToQuery:e.recordDefinitionName}),e.associatedRoleName&&(t.roleName=e.associatedRoleName),t}getCellValueFormatter(e){const t=e.fieldDefinition;let i=e=>e;switch(t.resourceType){case a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType:i=e=>this.rxBooleanPipe.transform(e);break;case a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType:i=t=>this.selectionFieldOptionLabelsByFieldId[e.fieldId][t];break;case a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType:i=e=>this.datePipe.transform(e,"medium");break;case a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType:i=e=>this.datePipe.transform(e);break;case a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType:i=e=>e?this.datePipe.transform(new Date(`2000-01-01T${e}`),"mediumTime"):e;break;case a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType:i=e=>{const t=(0,u.get)(e,"name");return(0,u.isString)(t)?t:e};break;case a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.real.resourceType:{const e=t.precision,n=(0,u.isNil)(e)||-1===e?null:`1.${e}-${e}`;i=e=>this.decimalPipe.transform(e,n);break}case a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType:i=e=>this.decimalPipe.transform(e)}return i}getCellValues(e,t){return e.map(e=>t.map(t=>this.getCellValue(e,t)))}getColumns(){return this.adaptTableConfig.columns.map(e=>{const t=(0,u.find)(this.state.columnsWithMetadata,{fieldId:e.field});return{field:e.field,header:e.header,hidden:(0,m.getValueOrFunc)(e.hidden),fieldDefinition:t.fieldDefinition}})}getData(e){return this.getDataBase(e,!1).pipe((0,r.tap)(e=>{this.cursor=e.cursor||void 0}))}getDataBase(e,t){var i,n;let o;const r=this.prepareQueryParamsAndQueryArgs(t);if(null===(i=r.queryExpression)||void 0===i?void 0:i.includes(d.RX_EXPRESSION_EVALUATOR.operands.undefined))return this.rxLogService.debug(`Query expression contains undefined operands: ${r.queryExpression}`),this.rxRecordInstanceDataPageService.getEmptyDataPage();if(this.state.enableFiltering&&!this.isSearchApplied()&&this.state.requiredFilters>this.state.advancedFiltering.selectedFilters.length)return this.rxNotificationService.addWarningMessage(this.getFiltersRequiredMessage(this.state.requiredFilters),this.translateService.instant("com.bmc.arsys.rx.client.common.alert.label")),this.rxRecordInstanceDataPageService.getEmptyDataPage();if((0,u.isNumber)(e)&&(r.startIndex=e),0===e&&delete r.cursor,this.lastQueryExpression=null!==(n=r.queryExpression)&&void 0!==n?n:"",t||(this.lastPropertySelection=r.propertySelection),this.state.getData)o=this.state.getData(Object.assign(Object.assign({},r),{searchText:(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim()}));else if(this.hasAssociationAndEmptyRecordId())o=this.rxAssociationInstanceDataPageService.getEmptyDataPage();else{o=this.getDataPageService().post({params:r,headers:this.getHeaders()})}return o}getDataCellStyle(e){let t="";switch(e.alignment){case jc.columnAlignment.left:t="left";break;case jc.columnAlignment.right:t="right";break;case jc.columnAlignment.center:t="center";break;default:const i=[a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType];-1!==e.fieldDefinition.resourceType.search(i.join("|"))&&(t="right")}return{"text-align":t}}getDataPageService(){return Boolean(this.state.associationDefinitionName)?this.rxAssociationInstanceDataPageService:this.rxRecordInstanceDataPageService}getExportFileName(){return`${this.datePipe.transform(new Date,"yyyy-MM-dd")} Grid Data`}getFilteredItems(e,t,i){return e.filter(e=>{let n;return e.groupField?this.rxStringService.caseInsensitiveSearch(e.groupValue,i)?n=!0:(e.items=this.getFilteredItems(e.items,t,i),n=e.items.length):n=(0,u.some)(t,t=>this.rxStringService.caseInsensitiveSearch(this.getCellValue(e,t),i)),n})}getFirstSelectedRow(){return(0,u.get)(this.adaptTableConfig.selectedItems,"0",null)}getGridColumnDefinitions(e){const t=[];return e.slice().sort((e,t)=>e.index-t.index).map(e=>{let i;const n=this.rxRecordGridConfigUtilsService.parseConfigString(e.sortable),o=this.rxRecordGridUtilsService.getTestIdForGridColumn(e.fieldId);(0,u.isObject)(n)?(i=!0,this.adaptTableConfig.multiSortMeta?this.adaptTableConfig.multiSortMeta.splice(n.priority,0,{field:e.fieldId,order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(n.direction)}):this.adaptTableConfig.multiSortMeta=[{field:e.fieldId,order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(n.direction)}]):i=n;const r=(0,u.endsWith)(e.width,"px"),a=this.adaptTableConfig.columnResizeMode!==T.ResizeMode.Expand||r?e.width:null,s=r&&parseInt(a)<jc.defaultColumnMinWidth?a:null;e.fieldId===jc.actionsColumnFieldDefinition.id?t.push({field:e.fieldId,header:e.title,fallbackTitle:e.fallbackTitle,width:a,minWidth:s,hidden:!e.visible,cellTemplate:this.rowActionButtonsTemplate,editTemplate:null,filterTemplate:null,headerTitleTemplate:null,cellTooltip:null,headerTooltip:null,headerClass:null,filterable:e.filterable,searchable:e.searchable,sortable:i,editable:!1,customTemplate:this.rowActionButtonsTemplate,clickable:!1,dataCellClass:"rx-row-action-cell",isRowActionsColumn:!0,testId:o}):(t.push({field:e.fieldId,header:e.title,fallbackTitle:e.fallbackTitle,width:a,minWidth:s,hidden:!e.visible,cellTemplate:this.cellTemplate,editTemplate:null,filterTemplate:null,headerTitleTemplate:null,cellTooltip:e=>this.showCellTooltip&&this.getCellValue(e.dataItem,e.column)||null,headerTooltip:e.headerTooltip,dataCellClass:this.getDataCellClass.bind(this),dataCellStyle:this.getDataCellStyle(e),headerClass:null,sortable:i,editable:null,filterable:e.filterable,searchable:e.searchable,filterName:null,filterParams:null,clickable:e.clickable,filterType:e.filterType,isDownloadableAttachment:this.isDownloadableAttachmentColumn(e),clickableWithHref:e.clickableWithHref,customTemplate:e.cellTemplate,wrapText:e.wrapText,referenced:e.referenced,cellDisplayProperties:e.cellDisplayProperties,typeaheadKeystrokeCount:e.typeaheadKeystrokeCount,additionalQueryCriteria:e.additionalQueryCriteria,testId:o}),this.cellValueFormatters[e.fieldId]=this.getCellValueFormatter(e))}),t}getGridData(e){const t=()=>{this.adaptTableConfig.isLoadingData=!1,this.adaptTableConfig.isLoadingMoreData=!1};return this.adaptTableConfig.isLoadingData=!0,this.getData(e?this.adaptTableConfig.data.length:0).pipe((0,r.tap)(i=>{t();const n=i.data.map(this.enrichRowEntity.bind(this));if(this.state.useExternalFiltering?e?(this.adaptTableConfig.data=this.adaptTableConfig.data.concat(n),(0===n.length||n.length<this.adaptTableConfig.rows)&&(this.adaptTableConfig.totalRecords=this.adaptTableConfig.data.length)):(this.adaptTableConfig.data=n,n.length<this.adaptTableConfig.rows?this.adaptTableConfig.totalRecords=n.length:this.adaptTableConfig.totalRecords=null):(this.adaptTableConfig.originalRows=n,this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows)),this.state.expandGroups){this.adaptTableConfig.expandedGroupsKeys={};const e=t=>{t.forEach(t=>{if(t.items){const i=this.adaptTableConfig.expandedGroupsKeys[t.groupField];i?i[t.groupValue]=!0:this.adaptTableConfig.expandedGroupsKeys[t.groupField]={[t.groupValue]:!0},e(t.items)}})};e(this.adaptTableConfig.data)}this.adaptTableConfig.toolbarConfig.rightCustomSection=Boolean(this.state.enableRowSelection&&this.adaptTableConfig.data.length),this.notifyPropertyChanged("totalRowCount",this.adaptTableConfig.data.length),this.notifyPropertyChanged("queryExpression",this.lastQueryExpression),this.notifyPropertyChanged("lastRefreshTime",(new Date).toISOString()),e||(this.onRowsSelectionChange([]),this.scrollToTop()),this.setSelectedFilteredRowsCount(),this.dataLoaded.emit(),this.dataLoadContextSubject.next({associatedRecordId:this.state.associatedRecordId,associatedRoleName:this.state.associatedRoleName,filterExpression:this.state.filterExpression,namedFilterOptions:this.state.namedFilterOptions}),this.changeDetector.markForCheck()}),(0,r.catchError)(e=>(t(),(0,o.throwError)(e))))}getHeaders(){return{"Should-Query-All-Locales":this.state.showDataForAllLocales?"true":[]}}getNamedFilterOptionsState(e){return e.reduce((e,t)=>(t.predefinedFilterPresets&&(e[t.fieldId]=t.predefinedFilterPresets.sort((e,t)=>e.index-t.index)),e),{})}getProgrammaticActionButtons(e){return e.map(e=>{let t;return t=(0,u.isFunction)(e.disabled)||(0,u.isFunction)(e.hidden)?this.rowSelectionChanged.pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{disabled:(0,u.isFunction)(e.disabled)?e.disabled(t):e.disabled,hidden:(0,u.isFunction)(e.hidden)?e.hidden(t):e.hidden}))):(0,o.of)(e),{guid:e.guid,config:t,runtimeViewModelApi:{triggerViewActions:(t,i)=>this.executeViewActions(e.guid,(0,u.get)(e,"actions"),this.state.lastActionRow)},factory:null,outlets:null}})}getRecordDefinition(){return this.state.getRecordDefinition?this.state.getRecordDefinition().pipe((0,r.tap)(e=>this.rxRecordDefinitionService.applyLocalization(e))):this.rxRecordDefinitionCacheService.getRecordDefinition(this.state.recordDefinitionName)}getRecordDefinitionName(){return this.state.recordDefinitionName}getSelectedRowCount(){return this.adaptTableConfig.selectedItems.length}getSelectedRows(e=!1){return e?(0,u.intersectionBy)(this.adaptTableConfig.data,this.adaptTableConfig.selectedItems,d.RowDataItemIdFieldName):this.adaptTableConfig.selectedItems}getTotalRowCount(){return this.getDataBase(null,!0)}getVirtualRowHeight(){var e;if(!(null===(e=this.adaptTableConfig.cardLayoutColumns)||void 0===e?void 0:e.length))return jc.defaultRowHeight;return 32*this.visibleColumns.length+6}hasAssociationAndEmptyRecordId(){return Boolean(this.state.associationDefinitionName)&&!this.state.associatedRecordId}initActionButtons(){this.isProgrammaticUse?this.actionButtons=this.getProgrammaticActionButtons(this.state.actionButtons):this.actionButtons=(0,u.get)(this.runtimeViewCanvasItemComponent.getChildren(d.RX_VIEW_DEFINITION.defaultOutletName),"[0].children")}initAdvancedFilterTexts(){this.state.advancedFiltering.filterTexts={initialDropdownAnchorLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.filter-data.label")}}initCustomTexts(){this.adaptTableConfig.texts={searchPlaceholder:this.state.searchFieldPlaceholderText,emptyStateLabelText:this.state.emptyStateLabelText,emptyStateWithFilterLabelText:this.state.emptyStateWithFilterLabelText,exportEntireDocument:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-all-rows.label"),exportSelected:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-rows.label")}}initGrid(){return this.state.guid=this.guid,(0,o.forkJoin)([this.rxGridConfiguratorService.getColumnsWithMetadata(this.guid,this.state.columns,this.state.recordDefinition),this.guid&&this.state.enableFiltering?this.getSharedFilterPresets():(0,o.of)(null)]).pipe((0,r.switchMap)(([e,t])=>(this.state.columnsWithMetadata=e,this.state.namedFilterOptions=this.getNamedFilterOptionsState(e),this.isUserAllowedToDeleteRecords=!!this.state.recordDefinition&&(!1!==this.state.recordDefinition.allowNonAdminToDeleteRecordInstances||this.rxCurrentUserService.isAdministrator()),this.notifyPropertyChanged("isUserAllowedToDeleteRecords",this.isUserAllowedToDeleteRecords),this.addAssociationFieldsToRecordDefinition(e),this.selectionFieldOptionLabelsByFieldId=this.rxGridConfiguratorService.getSelectionFieldOptionLabelsByFieldId(this.state.columns,this.state.recordDefinition),this.adaptTableConfig.columnResizeMode=this.state.expandable?T.ResizeMode.Expand:T.ResizeMode.Fit,this.adaptTableConfig.columns=this.getGridColumnDefinitions(e),this.state.advancedFiltering.recordGridFilterConfigs=this.rxRecordGridFilterConfigService.getConfigs(),this.state.advancedFiltering.filterOptions=this.getAdvancedFilterOptions(),this.state.advancedFiltering.filterOptions.push({id:jc.externalPresetFilterOptionId,label:jc.externalPresetFilterOptionId,dataType:m.AdvancedFilterOptionDataType.custom,isHidden:!0,customConfig:{getTagText:e=>{var t;return null===(t=this.state.advancedFiltering.savedFilters.find(t=>t.id===e))||void 0===t?void 0:t.name}}}),this.adaptTableConfig.rowSelectionMode=this.state.enableRowSelection,this.adaptTableConfig.primaryKey=this.state.recordIdField,this.adaptTableConfig.bordered=this.state.bordered,this.adaptTableConfig.striped=this.state.striped,this.adaptTableConfig.toolbarConfig.rightCustomSection=Boolean(this.state.enableRowSelection&&this.adaptTableConfig.data.length),this.state.initialFilters=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(this.state.filters,this.state.recordGridFilters),this.clickableWithHrefColumnActions=(0,u.reduce)(e,(e,t)=>(t.clickableWithHref&&(e[t.fieldId]=t.actions),e),{}),(0,u.isEmpty)(this.clickableWithHrefColumnActions)||(this.clickableWithHrefActionExpressionEvaluationData={view:{components:{[this.guid]:{recordDefinition:this.state.recordDefinition}},inputParams:this.runtimeViewModelApi.getViewInputParameters()}}),this.guid?this.rxRecordGridUserPreferencesService.applyUserPreferences(this.adaptTableConfig,this.state.columnsWithMetadata,this.state,t):(0,o.of)(null))),(0,r.tap)(()=>{this.sortedColumnsByTitle=this.getSortedColumnsByTitle(),this.filteredVisibleColumns=this.sortedColumnsByTitle,this.visibleColumns=this.getVisibleColumns(),this.isFilterBySelectionButtonVisible=this.state.enableFiltering&&(0,u.some)(this.visibleColumns,"filterable"),this.initActionButtons(),this.initRowActionButtons(),this.state.viewPresetSelector||(this.avoidSystemColumnExpansion(),this.loadRowData()),this.updateToolbarTags(this.state.advancedFiltering.toolbarTags),this.updateAdaptTableFilters()}))}avoidSystemColumnExpansion(){if(this.adaptTableConfig.cardLayoutColumns)return void this.avoidSystemCardColumnExpansion();const e=[],t=[],i=(0,u.find)(this.adaptTableConfig.columns,{field:jc.actionsColumnFieldDefinition.id,hidden:!1});let n=0,o=0,r=0;if(this.adaptTableConfig.columns.every(a=>{if(!a.hidden){if((0,u.isNil)(a.width))return!1;const s=parseFloat(a.width);a.width.endsWith("px")?(e.push(a),a!==i&&(n=Math.max(n,s))):(t.push(a),r+=s,a!==i&&(o=Math.max(o,s)))}return!0})&&r<100){const a=Boolean(t.length),s=Boolean(e.length);a&&!s&&t.forEach(e=>{e.width=`${(parseFloat(e.width)/r*100).toFixed(4)}%`}),!a&&s&&(1===e.length&&i?(i.width=null,i.minWidth=null):(0,u.findLast)(e,e=>parseInt(e.width)===n&&e!==i&&(e.width=null,e.minWidth=null,!0))),a&&s&&(1===t.length&&i?(i.width=null,i.minWidth=null):(0,u.findLast)(t,e=>parseFloat(e.width)===o&&e!==i&&(e.width=null,!0)))}}avoidSystemCardColumnExpansion(){if(!this.adaptDeviceDetectionService.iosPlatform())return;const e=this.adaptTable.dataHeaderCells.reduce((e,t)=>e+t.element.nativeElement.offsetWidth,0)-33;this.adaptTableConfig.cardLayoutColumns.forEach(t=>{t.width=`${(parseFloat(t.width)*e/100).toFixed(4)}px`})}initRecordDefinitions(){this.setRecordDefinition(null),this.state.associationDescriptors=[];const e=(0,u.some)(this.state.columns,e=>this.rxRecordGridUtilsService.isAssociatedRecordFieldId(e.fieldId));return(0,o.forkJoin)([this.getRecordDefinition(),e?this.getAssociationDescriptors():(0,o.of)([])]).pipe((0,r.tap)(([e,t])=>{this.setRecordDefinition(e),this.state.associationDescriptors=t}),(0,r.map)(([e])=>e))}initRowActionButtons(){this.isProgrammaticUse?this.rowActionButtons=this.getProgrammaticActionButtons(this.state.rowActionButtons):this.rowActionButtons=(0,u.get)(this.runtimeViewCanvasItemComponent.getChildren(jc.rowActionsOutletName),"[0].children")}isDownloadableAttachmentColumn(e){const t=(0,u.get)(this.state.recordDefinition,"resourceType"),i=(0,u.get)(e,"fieldDefinition.resourceType");return!this.isProgrammaticUse&&(t===a.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType||t===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType)&&i===a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType}isRangeFilter(e){const t=[a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType,a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType,a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType],i=this.state.recordDefinition.fieldDefinitionsById[e];return(0,u.includes)(t,i.resourceType)}isSharedFilterPreset(e){return Boolean(e.filterExpression)}loadRowData(e){this.getGridData(e).subscribe()}openSortByDialogFn(e){return this.cardLayoutOpenedModal=this.adaptModalService.open(e),this.cardLayoutOpenedModal}prepareQueryParamsAndQueryArgs(e){const t=this.adaptTableConfig.primaryKey,i=Object.assign(Object.assign({},this.getBaseDataPageParams()),{shouldIncludeTotalSize:e,pageSize:e?0:this.adaptTableConfig.rows,startIndex:e?0:this.adaptTableConfig.first});this.cursor&&!e&&(i.cursor=this.cursor),e||(i.propertySelection=(0,u.chain)(this.adaptTableConfig.columns.filter(e=>!e.isRowActionsColumn&&(this.state.getDataForHiddenColumns||!e.hidden||e.referenced)).map(e=>e.field)).union([t]).value());const n=this.adaptTableConfig.multiSortMeta;!e&&n&&n.length&&(i.sortBy=n.map(e=>e.order===T.SortOrder.Asc?`${e.field}`:`-${e.field}`));const o=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim(),r=this.rxRecordGridFilterService.generateTextFilterQuery(o,this.adaptTableConfig.columns),a=this.state.advancedFiltering.appliedSharedFilterPreset,s=a&&a.filterExpression?`(${a.filterExpression})`:null,l=this.rxRecordGridFilterService.addQueries(this.rxRecordGridFilterService.getQueryFromRecordGridFilterData(this.state.initialFilters,this.state.recordDefinition.fieldDefinitionsById),this.buildQueryByAdvancedFilters(this.state.advancedFiltering.selectedFilters),r,this.state.filterExpression,s);return l&&(i.queryExpression=l),i}refresh(){return this.initializationCompleted$.pipe((0,r.switchMap)(()=>this.getGridData()),(0,r.switchMapTo)(o.EMPTY))}saveViewPreset(e){return this.rxRecordGridUserPreferencesService.saveViewPreset(e),this.userPreferencesChanged$.next(),o.EMPTY}scrollToTop(){if(this.adaptTable){const e=this.adaptTable.getScrollableBodyElement();e&&(e.scrollTop=0)}}setFilter(e){this.state.advancedFiltering.selectedFilters=e}setRecordDefinition(e){this.state.recordDefinition=(0,u.cloneDeep)(e),e&&(this.state.recordDefinition.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(this.state.recordDefinition)),this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}setSelectedFilteredRowsCount(){this.selectedFilteredRowsCount=this.adaptTable.hasFilter()?this.getSelectedRows().length:0}sortRows(e){e.sort((e,t)=>this.compareRows(e,t)),(0,u.forEach)(e,e=>{var t;(null===(t=e.items)||void 0===t?void 0:t.length)&&this.sortRows(e.items)})}toggleCellSelection(e,t,i,n){if(this.state.enableFiltering)if(n){const n=e.filter(e=>{const t=this.state.recordDefinition.fieldDefinitionsById[e.field],i=t.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(t);return e.filterable&&!i}),o=this.isCellSelected(i);(0,u.forEach)(n,e=>{if(e.filterable){const i=t[e.field]||0===t[e.field]?t[e.field]:"$NULL$";this.state.advancedFiltering.selectedCardValues[e.field]?o?(0,u.remove)(this.state.advancedFiltering.selectedCardValues[e.field],i):this.state.advancedFiltering.selectedCardValues[e.field].push(i):this.state.advancedFiltering.selectedCardValues[e.field]=[i]}})}else{const n=e[0];if(n.filterable){const e=(0,u.find)(this.state.advancedFiltering.pendingSelectedFilters,{filterOptionId:n.field}),o=t[n.field]||0===t[n.field]?t[n.field]:"$NULL$",r=this.state.recordDefinition.fieldDefinitionsById[n.field],s=this.isRangeFilter(n.field),l=r.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(r),d=!(s&&e&&2===e.value.length||l&&e||"$NULL$"===o&&(s||l));if(e)if(this.isCellSelected(i)){const t=(0,u.findIndex)(e.value,o);e.value.splice(t,1),this.trackPopoverAnchor(i),e.value.length||(0,u.remove)(this.state.advancedFiltering.pendingSelectedFilters,e)}else d&&(e.value.push(o),this.trackPopoverAnchor(i));else if(d){const e={filterOptionId:n.field,value:[o]};this.state.advancedFiltering.pendingSelectedFilters.push(e),this.trackPopoverAnchor(i)}}}}trackPopoverAnchor(e){var t,i;if(this.isCellSelected(e)){const i=e===(0,u.last)(this.popovers);(0,u.remove)(this.popovers,e),i&&(e.close(),null===(t=(0,u.last)(this.popovers))||void 0===t||t.open())}else null===(i=(0,u.last)(this.popovers))||void 0===i||i.close(),this.popovers.push(e),e.open()}updateAdaptTableFilters(){const e=this.adaptTable.filters.global;this.adaptTable.filters=this.areUserFiltersApplied()?{dummyFilter:{}}:{},e&&(this.adaptTable.filters.global=e)}updateToolbarItems(){if(this.adaptTable){const e=this.adaptTable.toolbarComponent,t=e.toolbarContentItems.find(e=>e.adaptToolbarItem===T.ToolbarItemsByPriority.FILTER);setTimeout(()=>{t&&!t.itemContext.hidden&&e.updateToolbarItems()})}}getExportSelectedText(e){return e.length>1?this.exportSelectedRowsText:this.exportSelectedRowText}getFiltersRequiredMessage(e){return e>1?this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.require-filtering.missing-filters-warning.message",{requiredFiltersCount:e}):this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.require-filtering.missing-filter-warning.message")}}ou.\u0275fac=function(e){return new(e||ou)(n["\u0275\u0275directiveInject"](m.AdaptDeviceDetectionService),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](f.DatePipe),n["\u0275\u0275directiveInject"](f.DecimalPipe),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](C.RxAssociationInstanceDataPageService),n["\u0275\u0275directiveInject"](s.RxBooleanPipe),n["\u0275\u0275directiveInject"](s.RxCurrentUserService),n["\u0275\u0275directiveInject"](d.RxExpressionEvaluatorService),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](Yp),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](v.RxObjectUtilsService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](ap),n["\u0275\u0275directiveInject"](Lc),n["\u0275\u0275directiveInject"](dp),n["\u0275\u0275directiveInject"](lp),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](Zp),n["\u0275\u0275directiveInject"](eu),n["\u0275\u0275directiveInject"](_c),n["\u0275\u0275directiveInject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](d.RxViewActionService),n["\u0275\u0275directiveInject"](d.RxViewActionUtilsService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](s.RxGlobalEventsService),n["\u0275\u0275directiveInject"](Kp,8),n["\u0275\u0275directiveInject"](h.RuntimeViewCanvasItemComponent,8))},ou.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ou,selectors:[["rx-record-grid"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](wr,7),n["\u0275\u0275viewQuery"](Er,5),n["\u0275\u0275viewQuery"](Fr,7),n["\u0275\u0275viewQuery"](Mr,7),n["\u0275\u0275viewQuery"](gr,7),n["\u0275\u0275viewQuery"](Tr,7),n["\u0275\u0275viewQuery"](Or,7),n["\u0275\u0275viewQuery"](Nr,7),n["\u0275\u0275viewQuery"](vr,7),n["\u0275\u0275viewQuery"](yp,7),n["\u0275\u0275viewQuery"](Ds,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptTable=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptAdvancedFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cardLayoutRowDetailsTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.leftCustomSectionTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rightCustomSectionTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rowActionButtonsTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.visibleColumnsMenuTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.fieldsProvider=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionButtonComponents=e)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("click",function(e){return t.onClickOutside(e)},!1,n["\u0275\u0275resolveDocument"])},inputs:{config:"config"},outputs:{dataLoaded:"dataLoaded"},features:[n["\u0275\u0275ProvidersFeature"]([eu]),n["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:40,consts:[["rxCardLayout","","scrollHeight","flex",3,"cardLayoutWidth","cardLayoutFieldsHeaderTemplate","cardLayoutFieldsDataCellTemplate","cardLayoutValuesDataCellTemplate","cardLayoutValuesHeaderTemplate","cardLayoutRecordGridElementRef","cardLayoutGetDataCellClass","value","columns","rows","first","scrollable","sortable","rowExpandMode","sortMode","resizableColumns","columnResizeMode","selectionMode","selection","toolbarConfig","filterable","filters","multiSortMeta","dataKey","bordered","totalRecords","totalRecordsInGroup","lazy","lazyLoadOnInit","loading","enableInfiniteScrolling","expandedGroupsKeys","loadingMore","suppressTooltip","virtualScroll","virtualRowHeight","striped","texts","selectedFilteredRowsCount","headerSelectionMode","changedCardLayout","selectionChange","onSort","onLazyLoad","onColReorder","onColResize","export","onHeaderCheckboxToggle"],["adaptTable",""],["visibleColumnsMenuTemplate",""],["rightCustomSectionTemplate",""],["leftCustomSectionTemplate",""],["filterTemplate",""],["cellTemplate",""],["defaultCellTemplate",""],["cardLayoutFieldsHeaderTemplate",""],["cardLayoutValuesHeaderTemplate",""],["cardLayoutFieldsDataCellTemplate",""],["cardLayoutValuesDataCellTemplate",""],["cardLayoutRowDetailsTemplate",""],["filterButton",""],["rowActionButtonsTemplate",""],["cardLayoutRowActionButtonsTemplate",""],[3,"namedFilterOptionsGetter"],[3,"ngModel","placeholder","autofocus","ngModelChange"],["class","dropdown-item visible-columns-item px-3",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"type","label",4,"ngIf"],[1,"dropdown-item","visible-columns-item","px-3",3,"click"],[1,"m-0","adapt-table-toolbar__column-visibility-control",3,"label","ngModel","ngModelChange"],[3,"type","label"],["rx-id","selected-row-count",1,"px-2"],[4,"ngIf"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-link","p-0","mx-1",3,"click"],["class","pl-1 w-100 align-items-center",3,"adaptSubnav",4,"ngIf"],[1,"pl-1","w-100","align-items-center",3,"adaptSubnav"],[3,"adaptSubnavItem",4,"ngFor","ngForOf"],[3,"adaptSubnavDropdown"],["type","button",1,"btn","btn-secondary","btn-xs","d-icon-triangle_down","ml-1"],[3,"adaptSubnavItem"],["actionButtonTemplate",""],[1,"m-1",3,"guid","config","runtimeViewModelApi"],["type","button","rx-id","refresh-button",1,"btn","btn-link","d-icon-refresh","grid-toolbar-icon","ml-2","p-1",3,"ngClass","click"],["class","ml-2",3,"ngClass","appendDropdownToBody","texts","showAnchorButtonLabel","filterOptions","selectedFilters","savedFilters","enableSavedFilters","activeSavedFilter","isLoading","selectedFiltersIndicationStyle","applyFiltersByUserAction","selectedFiltersChange","deleteSavedFilter","createNewFilter","updateSavedFilter","activeSavedFilterChange","beforeActiveSavedFilterChange","editSavedFilterClick","filterExpressionTagsChanged",4,"ngIf"],["class","btn-link ml-1",4,"ngIf"],[1,"ml-2",3,"hidden","tags","tagsLimit","removeTag"],[1,"ml-2",3,"ngClass","appendDropdownToBody","texts","showAnchorButtonLabel","filterOptions","selectedFilters","savedFilters","enableSavedFilters","activeSavedFilter","isLoading","selectedFiltersIndicationStyle","applyFiltersByUserAction","selectedFiltersChange","deleteSavedFilter","createNewFilter","updateSavedFilter","activeSavedFilterChange","beforeActiveSavedFilterChange","editSavedFilterClick","filterExpressionTagsChanged"],["adaptAdvancedFilter",""],[1,"btn-link","ml-1"],["class","rx-custom-cell rx-ellipsis",3,"rxCellDisplayProps","rxCellDisplayPropsBadgeElem","rxCellDisplayPropsDataItem","adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","rx-selected-custom-cell","click","mouseover",4,"ngIf"],["class","rx-custom-cell rx-ellipsis",3,"adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","rx-selected-custom-cell","click","mouseover",4,"ngIf"],[1,"rx-custom-cell","rx-ellipsis",3,"rxCellDisplayProps","rxCellDisplayPropsBadgeElem","rxCellDisplayPropsDataItem","adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","click","mouseover"],["popoverAnchor","adaptPopover"],[3,"ngClass","click"],["badgeElem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rx-custom-cell","rx-ellipsis",3,"adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","click","mouseover"],["tabindex","0","class","attachment-link",3,"click","keydown",4,"ngIf"],["tabindex","0","class","no-href-link",3,"click","keydown",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],[3,"href","target",4,"ngIf"],[3,"ngClass"],["tabindex","0",1,"attachment-link",3,"click","keydown"],["tabindex","0",1,"no-href-link",3,"click","keydown"],[3,"routerLink","queryParams"],[3,"href","target"],[3,"title","columns","adaptTable","openDialog","sort"],[1,"rx-card-layout-cell",3,"click"],["class","rx-card-layout-cell-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"rx-card-layout-cell-item"],[1,"rx-card-layout-cell-values","rx-card-layout-cell"],["adapt-button","","rx-id","filter-by-selection-button","class","btn btn-link d-icon-filter_adapt filter-by-selection-icon",3,"click",4,"ngIf"],["rx-id","show-record-details-button",1,"btn","btn-link","d-icon-pop_up","record-details-icon",3,"click"],["adapt-button","","rx-id","filter-by-selection-button",1,"btn","btn-link","d-icon-filter_adapt","filter-by-selection-icon",3,"click"],[1,"modal-body","rx-record-details"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"row","mb-3"],[1,"col-sm-4","font-weight-bold","rx-text-break"],["class","col-sm-8 rx-text-break",4,"ngIf"],["class","col-sm-8",4,"ngIf"],[1,"col-sm-8","rx-text-break"],[1,"col-sm-8"],["tabindex","0",1,"row-details-attachment-link",3,"click","keydown"],["adapt-button","","btn-type","tertiary","size","small",1,"d-icon-filter_adapt","p-0",3,"click"],["adaptDropdown","","appendToBody","true",1,"dropdown","dropdown-kabob",3,"onOpen"],["id","row-actions-dropdown-button","adaptDropdownToggle","",1,"dropdown-kabob-btn"],["aria-labelledby","row-actions-dropdown-button","adaptDropdownMenu","",1,"dropdown-menu"],["class","action-button-list",3,"guid","config","runtimeViewModelApi",4,"ngFor","ngForOf"],[1,"empty-list-label","pl-3"],[1,"action-button-list",3,"guid","config","runtimeViewModelApi"],["adaptDropdown","","appendToBody","true",1,"dropdown","mb-1",3,"click","onOpen"],["id","card-layout-dropdown-button","size","xtra-small","adaptDropdownToggle","",1,"btn","btn-secondary","btn-xs"],["aria-labelledby","card-layout-dropdown-button","adaptDropdownMenu","",1,"dropdown-menu"],["class","row-actions-dropdown-item",3,"guid","config","runtimeViewModelApi",4,"ngFor","ngForOf"],[1,"row-actions-dropdown-item",3,"guid","config","runtimeViewModelApi"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-table",0,1),n["\u0275\u0275listener"]("changedCardLayout",function(e){return t.onChangedCardLayout(e)})("selectionChange",function(e){return t.onRowsSelectionChange(e)})("onSort",function(e){return t.onSort(e)})("onLazyLoad",function(e){return t.onLazyLoad(e)})("onColReorder",function(e){return t.onColReorder(e)})("onColResize",function(){return t.onColumnResize()})("export",function(e){return t.onExport(e)})("onHeaderCheckboxToggle",function(e){return t.handleHeaderCheckboxToggle(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,jr,4,8,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](4,kr,3,2,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](6,Gr,1,1,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,Wr,5,11,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](10,ea,2,2,"ng-template",null,6,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](12,aa,5,5,"ng-template",null,7,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](14,sa,1,4,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](16,la,1,4,"ng-template",null,9,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](18,ca,2,2,"ng-template",null,10,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](20,xa,5,6,"ng-template",null,11,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](22,Ra,6,4,"ng-template",null,12,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](24,wa,1,0,"ng-template",null,13,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](26,Fa,7,4,"ng-template",null,14,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](28,Ta,6,4,"ng-template",null,15,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](30,"rx-advanced-filtering-fields-provider",16)),2&e){const e=n["\u0275\u0275reference"](15),i=n["\u0275\u0275reference"](17),o=n["\u0275\u0275reference"](19),r=n["\u0275\u0275reference"](21);n["\u0275\u0275property"]("cardLayoutWidth",t.state.cardLayoutWidth)("cardLayoutFieldsHeaderTemplate",e)("cardLayoutFieldsDataCellTemplate",o)("cardLayoutValuesDataCellTemplate",r)("cardLayoutValuesHeaderTemplate",i)("cardLayoutRecordGridElementRef",t.elementRef)("cardLayoutGetDataCellClass",t.getDataCellClassBind)("value",t.adaptTableConfig.data)("columns",t.adaptTableConfig.cardLayoutColumns||t.adaptTableConfig.columns)("rows",t.adaptTableConfig.rows)("first",t.adaptTableConfig.first)("scrollable",t.adaptTableConfig.scrollable)("sortable",!0)("sortMode","multiple")("resizableColumns",!0)("columnResizeMode",t.adaptTableConfig.columnResizeMode)("selectionMode",t.adaptTableConfig.rowSelectionMode)("selection",t.adaptTableConfig.selectedItems)("toolbarConfig",t.adaptTableConfig.toolbarConfig)("filterable",t.adaptTableConfig.filterable)("filters",t.adaptTableConfig.filters)("multiSortMeta",t.adaptTableConfig.multiSortMeta)("dataKey",t.adaptTableConfig.primaryKey)("bordered",t.adaptTableConfig.bordered)("totalRecords",t.adaptTableConfig.totalRecords)("totalRecordsInGroup",t.state.expandGroups?t.adaptTableConfig.totalRecords:0)("lazy",!0)("lazyLoadOnInit",!1)("loading",t.adaptTableConfig.isLoadingData)("enableInfiniteScrolling",!0)("expandedGroupsKeys",t.adaptTableConfig.expandedGroupsKeys)("loadingMore",t.adaptTableConfig.isLoadingMoreData)("suppressTooltip",!1)("virtualScroll",t.adaptTableConfig.virtualScroll)("virtualRowHeight",t.adaptTableConfig.virtualRowHeight)("striped",t.adaptTableConfig.striped)("texts",t.adaptTableConfig.texts)("selectedFilteredRowsCount",t.selectedFilteredRowsCount)("headerSelectionMode",t.adaptTableHeaderSelectionMode),n["\u0275\u0275advance"](30),n["\u0275\u0275property"]("namedFilterOptionsGetter",t.getNamedFilterOptions)}},directives:[T.AdaptTableComponent,iu,yp,m.AdaptRxSearchComponent,x.NgControlStatus,x.NgModel,f.NgForOf,f.NgIf,m.AdaptRxCheckboxComponent,m.AdaptEmptyStateComponent,m.AdaptSubnavComponent,m.AdaptSubnavDropdownComponent,m.AdaptSubnavItemComponent,Ds,f.NgClass,bp,m.AdaptAdvancedFilterComponent,nu,m.AdaptPopoverDirective,f.NgTemplateOutlet,N.RouterLinkWithHref,tu,m.AdaptButtonComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;height:420px}[_nghost-%COMP%]     .rx-table-card-layout .adapt-selection-cell{vertical-align:middle!important}[_nghost-%COMP%]     .rx-table-card-layout .c-header-name{width:100%}[_nghost-%COMP%]     .rx-card-layout-data-cell{position:relative}[_nghost-%COMP%]     .rx-card-layout-cell-item{padding:0;line-height:32px;min-height:32px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]     .rx-card-layout-cell-values>div:first-child .rx-card-layout-cell-item{padding-right:20px}[_nghost-%COMP%]     .rx-card-layout-cell-icon, [_nghost-%COMP%]     .filter-by-selection-icon, [_nghost-%COMP%]     .record-details-icon{top:2px;padding:2px;position:absolute}[_nghost-%COMP%]     .record-details-icon{right:7px}[_nghost-%COMP%]     .filter-by-selection-icon{right:25px}[_nghost-%COMP%]     adapt-table td.at-data-cell{padding:0;-moz-user-select:text}[_nghost-%COMP%]     adapt-table td.rx-cell-selection-mode:focus{outline:none!important}[_nghost-%COMP%]     adapt-table adapt-table-toolbar rx-action-button{margin:5px}[_nghost-%COMP%]     adapt-table adapt-table-toolbar rx-action-button .btn-link{padding-right:0;padding-left:0}[_nghost-%COMP%]     adapt-table .at-wrap-cell-text .at-data-cell{word-break:break-word}[_nghost-%COMP%]     .rx-row-action-cell .dropdown{margin-top:3px}.rx-custom-cell[_ngcontent-%COMP%]{min-height:36px;padding:.5rem 13px}.rx-custom-cell[_ngcontent-%COMP%]   .rx-cell-wrap[_ngcontent-%COMP%]{white-space:normal;text-overflow:clip;word-break:break-word}.rx-selected-custom-cell[_ngcontent-%COMP%]{outline:1px solid #00a79d!important;border-color:transparent!important;outline-offset:-1px}.rx-card-layout-cell[_ngcontent-%COMP%]{padding:3px 10px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn{width:100%;text-align:left;background:none;border:0;font-size:.8125rem}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn:before{width:18px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn>span{margin-left:18px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn[class^=d-icon-left]>span{margin-left:0!important}.grid-toolbar-icon[_ngcontent-%COMP%]{font-size:16px}.no-href-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.attachment-link[_ngcontent-%COMP%], .row-details-attachment-link[_ngcontent-%COMP%]{cursor:pointer}  .table-filtering.popover.popover-mobile{height:auto;display:block;top:auto!important;bottom:0;width:100vw}  .table-filtering.popover.popover-mobile .a-popover-wrap{margin:0}  .table-filtering.popover.popover-mobile .close{display:none}  .visible-columns-dropdown{padding-top:0;width:14rem}.action-button-list[_ngcontent-%COMP%]:not(:empty) ~ .empty-list-label[_ngcontent-%COMP%]{display:none}.empty-list-label[_ngcontent-%COMP%]{color:#959899}.visible-columns-item[_ngcontent-%COMP%]{white-space:normal;word-break:break-word}']});class ru{constructor(e,t,i){this.viewDefinitionParserService=e,this.rxJsonParserService=t,this.rxRecordGridConfigUtilsService=i}adaptDefinition(e,t){const i=e.componentDefinitions.filter(({type:e})=>e===jc.components.column).map(({propertiesByName:e})=>e.cellDisplayProperties).filter(Boolean);this.viewDefinitionParserService.getComponents(e).map(e=>e.componentDefinition).forEach(n=>{var o,r,a,s;switch(n.type){case jc.type:{n.propertiesByName.enableFilterPresets=null!==(o=n.propertiesByName.enableFilterPresets)&&void 0!==o?o:"true",n.propertiesByName.requiredFilters=null!==(r=n.propertiesByName.requiredFilters)&&void 0!==r?r:"true"===n.propertiesByName.requireFiltering?1:0;const e=this.rxJsonParserService.tryParseJson(n.layout),t=(0,u.filter)(n.componentDefinitions,{type:d.RxViewComponentType.ActionButton}),i=this.getActionButtonsForOutlet(e,jc.rowActionsOutletName,t);i.forEach(e=>{e.propertiesByName=Object.assign(Object.assign({},e.propertiesByName),{cls:"dropdown-item",styles:"p-0"})}),(0,u.without)(t,...i).forEach(e=>{[ms.Primary,ms.Secondary].includes(e.propertiesByName.style)&&(e.propertiesByName.size=hs.Small)});break}case jc.components.column:{let o=null;if(!this.rxRecordGridConfigUtilsService.getBooleanValue(e.propertiesByName.getDataForHiddenColumns)){const r=e.guid,a=n.propertiesByName.fieldId,s=t.viewComponentExpressions.some(e=>e.includes(`\${view.components.${r}.firstSelectedRow.${a}`)||e.includes(`\${view.components.${r}.clickableRow.${a}`)),l=i.some(e=>e.includes(`\${view.components.grid.clickableRow.${a}`));o=s||l}const r={actions:[],clickable:!1,guid:n.guid,wrapText:null!==(a=n.propertiesByName.wrapText)&&void 0!==a&&a,referenced:o,typeaheadKeystrokeCount:null!==(s=n.propertiesByName.typeaheadKeystrokeCount)&&void 0!==s?s:jc.defaultTypeaheadKeystrokeCount},l=(0,u.filter)(n.componentDefinitions,{type:"rx-action"}).map(e=>e.propertiesByName);l.length&&(r.clickable=!0,r.actions=l),Object.assign(n.propertiesByName,r);break}case jc.components.filterPreset:case jc.components.filter:Object.assign(n.propertiesByName,{guid:n.guid})}})}getActionButtonsForOutlet(e,t,i){const n=(0,u.chain)(e.outlets).filter({name:t}).head().get("columns[0].children",[]).value();return(0,u.filter)(i,e=>n.includes(e.guid))}}ru.\u0275fac=function(e){return new(e||ru)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](Lc))},ru.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ru,factory:ru.\u0275fac});class au extends d.RxRecordQueryExpressionEvaluatorService{}au.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](au)))(t||au)}}(),au.\u0275prov=n["\u0275\u0275defineInjectable"]({token:au,factory:au.\u0275fac});class su{constructor(e,t){this.rxRecordGridDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,t.registerRuntimeAdapter(jc.type,this.rxRecordGridDefinitionAdapterService)}}su.\u0275fac=function(e){return new(e||su)(n["\u0275\u0275inject"](ru),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},su.\u0275mod=n["\u0275\u0275defineNgModule"]({type:su,declarations:[ou,iu,tu,Jp,nu],imports:[s.RxDefinitionModule,f.CommonModule,h.RuntimeViewCanvasModule,T.AdaptTableModule,E.AdaptSelectModule,x.FormsModule,m.AdaptRxCheckboxModule,m.AdaptRxSelectModule,m.AdaptAlertModule,m.AdaptPopoverModule,m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptDropdownModule,p.TranslateModule,Is,m.AdaptSubnavModule,m.AdaptAdvancedFilteringModule,Dp,N.RouterModule,Tp,m.AdaptRxSearchModule,m.AdaptEmptyStateModule],exports:[ou]}),su.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[f.DatePipe,f.DecimalPipe,s.RxBooleanPipe,Yp,Lc,ru,lp,_c,dp,au,Zp,ap],imports:[[s.RxDefinitionModule,f.CommonModule,h.RuntimeViewCanvasModule,T.AdaptTableModule.forRoot(),E.AdaptSelectModule,x.FormsModule,m.AdaptRxCheckboxModule,m.AdaptRxSelectModule,m.AdaptAlertModule.forRoot(),m.AdaptPopoverModule.forRoot(),m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptDropdownModule,p.TranslateModule,Is,m.AdaptSubnavModule,m.AdaptAdvancedFilteringModule,Dp,N.RouterModule,Tp,m.AdaptRxSearchModule,m.AdaptEmptyStateModule]]});class lu extends h.BaseViewComponent{constructor(e,t){super(),this.sanitizer=e,this.rxCkEditorConfiguratorService=t,this.filter=new CKEDITOR.filter(""),this.api={setProperty:this.setProperty.bind(this)},this.filter.allow(this.rxCkEditorConfiguratorService.getContentRules())}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.html=this.updateHtml(e.html)})}updateHtml(e){if(e){e=e.replace(/\n/g,"<br>");const t=CKEDITOR.htmlParser.fragment.fromHtml(e),i=new CKEDITOR.htmlParser.basicWriter;this.filter.applyTo(t),t.writeHtml(i),e=i.getHtml(!0)}else e="";return this.sanitizer.bypassSecurityTrustHtml(e)}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Rich text: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}lu.\u0275fac=function(e){return new(e||lu)(n["\u0275\u0275directiveInject"](A.DomSanitizer),n["\u0275\u0275directiveInject"](d.RxCkEditorConfiguratorService))},lu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:lu,selectors:[["rx-rich-text"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[["tabindex","0",1,"text-container","focusable",3,"hidden","innerHTML"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"div",0),2&e&&(n["\u0275\u0275property"]("hidden",t.isHidden)("innerHTML",t.html,n["\u0275\u0275sanitizeHtml"]),n["\u0275\u0275attribute"]("aria-hidden",t.isHidden))},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.text-container[_ngcontent-%COMP%]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}']});class du{constructor(e){this.rxDefaultExpressionEvaluatorService=e}evaluate(e,t){const i=document.createElement("div");return i.innerHTML=e,i.querySelectorAll(`span[${d.RX_RICH_TEXT.expressionAttributeName}]`).forEach(e=>{const i=this.rxDefaultExpressionEvaluatorService.evaluate(e.getAttribute(d.RX_RICH_TEXT.expressionAttributeName),t),n=document.createTextNode((0,u.isNil)(i)?"":i);e.parentElement.replaceChild(n,e)}),i.innerHTML}}du.\u0275fac=function(e){return new(e||du)(n["\u0275\u0275inject"](d.RxDefaultExpressionEvaluatorService))},du.\u0275prov=n["\u0275\u0275defineInjectable"]({token:du,factory:du.\u0275fac});class cu{constructor(e){this.rxCkEditorConfiguratorService=e,this.filter=new CKEDITOR.filter(""),this.filter.allow(this.rxCkEditorConfiguratorService.getContentRules())}adaptDefinition(e){if(e.propertiesByName.html){const t=CKEDITOR.dtd.$removeEmpty.span;CKEDITOR.dtd.$removeEmpty.span=0;const i=CKEDITOR.htmlParser.fragment.fromHtml(e.propertiesByName.html),n=new CKEDITOR.htmlParser.basicWriter;this.filter.applyTo(i),i.writeHtml(n),e.propertiesByName.html=n.getHtml(!0),CKEDITOR.dtd.$removeEmpty.span=t}}}cu.\u0275fac=function(e){return new(e||cu)(n["\u0275\u0275inject"](d.RxCkEditorConfiguratorService))},cu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:cu,factory:cu.\u0275fac});class pu{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.richTextDefinitionAdapterService=t,e.registerRuntimeAdapter(d.RxViewComponentType.RichText,this.richTextDefinitionAdapterService)}}pu.\u0275fac=function(e){return new(e||pu)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](cu))},pu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pu,declarations:[lu],imports:[f.CommonModule,M.CKEditorModule],exports:[lu]}),pu.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[du],imports:[[f.CommonModule,M.CKEditorModule]]});const uu={title:!1,skin:"rich-text,skins/rich-text/",toolbar:[["Bold","Italic","Strike","Underline","-","Link","Unlink","-","NumberedList","BulletedList","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","-","ExpressionEditor"],"/",["Format","Styles","Font","FontSize","TextColor"]],stylesSet:[{name:"Italic Title",element:"h2",attributes:{class:"italic-title"}},{name:"Subtitle",element:"h3",attributes:{class:"subtitle"}},{name:"Special Container",element:"div",attributes:{class:"special-containers"}},{name:"Marker",element:"span",attributes:{class:"marker"}},{name:"Small",element:"small"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Compact Table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",class:"compact-table"}},{name:"Borderless Table",element:"table",attributes:{class:"borderless-table"}},{name:"Square Bulleted List",element:"ul",attributes:{class:"square-bulleted-list"}}],format_tags:"p;h1;h2;h3;pre",extraPlugins:"expression-editor, colordialog",extraAllowedContent:"span [rx-expression, contenteditable, title] (rx-expression)"};class mu extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.html$=this.sandbox.getComponentPropertyValue("html")}static getInitialProperties(e){return Object.assign(Object.assign({name:null,html:null},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.componentProperties$.subscribe(e=>{const t=e.html?[]:[this.sandbox.createError("Rich text value cannot be blank.")];t.push(...(0,c.validateStandardProps)(e)),this.sandbox.setValidationIssues(t)}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Rich text component")}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}updateComponentProperties(e){this.sandbox.updateComponentProperties(e)}}class fu{constructor(e,t,i,n,r,a){this.rxExpressionEditorService=e,this.rxTreeService=t,this.rxExpressionParserService=i,this.renderer2=n,this.document=r,this.ngZone=a,this.type="inline",this.ckConfig=uu,this.formControl=new x.FormControl(null),this.destroyed$=new o.ReplaySubject(1),this.removeExpressionLabels=this.setExpressionLabelHtml.bind(this,null),this.addExpressionLabels=this.setExpressionLabelHtml.bind(this,this.getExpressionWithLabels.bind(this))}ngOnInit(){this.model.expressionConfigurator.getDataDictionary().pipe((0,r.withLatestFrom)(this.model.html$),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.flatDataDictionary=this.rxTreeService.flatten({children:e}),this.formControl.setValue(this.addExpressionLabels(t))}),this.formControl.valueChanges.pipe((0,r.map)(e=>this.removeExpressionLabels(e)),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.model.updateComponentProperties({html:e})}),this.model.html$.pipe((0,r.take)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.formControl.setValue(this.addExpressionLabels(e))})}onEditorReady(e){this.isReadOnly&&(this.ckConfig.toolbar=[],this.document.getElementById(`${e.editor.id}_top`).style.display="none"),this.ckEditor.instance.on("openExpressionEditor",e=>{const t=e.data&&e.data.getAttribute(d.RX_RICH_TEXT.expressionAttributeName);this.ngZone.runTask(()=>this.rxExpressionEditorService.openEditor({property:{path:"html",value:t,label:"Rich Text"},expressionConfigurator:this.model.expressionConfigurator}).pipe((0,r.takeUntil)(this.destroyed$)).subscribe({next:({path:i,value:n})=>{if(n){const i=this.getExpressionWithLabels(n);t?(e.data.setAttribute(d.RX_RICH_TEXT.expressionAttributeName,n),e.data.setHtml(i),this.ckEditor.instance.fire("saveSnapshot")):this.ckEditor.instance.insertHtml(`<span contenteditable="false" ${d.RX_RICH_TEXT.expressionAttributeName}="${(0,u.escape)(n)}">${i}</span>`)}else e.data.remove(),this.ckEditor.instance.fire("saveSnapshot");this.moveCursorToEnd()},error:()=>{this.moveCursorToEnd()}}))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getExpressionWithLabels(e){return this.rxExpressionParserService.parse(e,(e,t)=>{if(e!==s.ExpressionParserToken.RxStringExpression){const e=this.flatDataDictionary.find(e=>e.expression===t),i=e&&e.label?(0,u.escape)(e.label):t;return`<span title="${i}">${i}</span>`}return t})}moveCursorToEnd(){const e=this.ckEditor.instance.createRange();e.moveToElementEditEnd(e.root),this.ckEditor.instance.getSelection().selectRanges([e])}setExpressionLabelHtml(e,t){const i=this.renderer2.createElement("div");return i.innerHTML=t,i.querySelectorAll(`span[${d.RX_RICH_TEXT.expressionAttributeName}]`).forEach(t=>t.innerHTML=e?e(t.getAttribute(d.RX_RICH_TEXT.expressionAttributeName)):null),i.innerHTML.replace(/<br>/g,"<br />")}}fu.\u0275fac=function(e){return new(e||fu)(n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](v.RxTreeService),n["\u0275\u0275directiveInject"](s.RxExpressionParserService),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](f.DOCUMENT),n["\u0275\u0275directiveInject"](n.NgZone))},fu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fu,selectors:[["rx-rich-text-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](M.CKEditorComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ckEditor=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:1,vars:6,consts:[[1,"border",3,"formControl","config","type","readOnly","ready"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ckeditor",0),n["\u0275\u0275listener"]("ready",function(e){return t.onEditorReady(e)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("border-transparent",t.formControl.value),n["\u0275\u0275property"]("formControl",t.formControl)("config",t.ckConfig)("type",t.type)("readOnly",t.isReadOnly))},directives:[M.CKEditorComponent,x.NgControlStatus,x.FormControlDirective],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}ckeditor[_ngcontent-%COMP%]{min-height:42px;display:block;border:1px solid #d6d7d8}ckeditor.border-transparent[_ngcontent-%COMP%]{border-color:transparent!important}ckeditor[_ngcontent-%COMP%]     [rx-expression]{padding:2px 5px;display:inline-block;color:#7c7f81;background-color:#f0f1f1;border-radius:2px;-webkit-user-select:all;user-select:all}ckeditor[_ngcontent-%COMP%]     [rx-expression] span{padding:2px 5px;background-color:#d6d7d8;border-radius:2px}ckeditor[_ngcontent-%COMP%]     .cke_editable{padding:5px;outline:none}']});class hu{constructor(){const e=this;CKEDITOR.plugins.add("expression-editor",{init(t){t.addCommand("insertExpression",{exec:()=>(t.fire("openExpressionEditor",null),!0)}),t.on("doubleclick",i=>{const n=e.getSelectedExpressionElement(i.data.element);n&&t.fire("openExpressionEditor",n)},null,null,0),t.ui.addButton("ExpressionEditor",{label:"Insert Expression",command:"insertExpression",toolbar:"",icon:CKEDITOR.plugins.getPath("expression-editor")+"toolbar.png"})}})}getSelectedExpressionElement(e){if(e.is("span")&&e.hasAttribute("rx-expression"))return e;{const t=e.getParent();if(t.is("span")&&t.hasAttribute("rx-expression"))return t}}clearSelection(e){const t=e.getSelection();t&&t.removeAllRanges()}}hu.\u0275fac=function(e){return new(e||hu)},hu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:hu,factory:hu.\u0275fac,providedIn:"root"});class gu{constructor(e,t,i){this.rxExpressionEditorPluginService=e,this.rxDefinitionAdapterRegistryService=t,this.richTextDefinitionAdapterService=i,t.registerDesignAdapter(d.RxViewComponentType.RichText,this.richTextDefinitionAdapterService)}}gu.\u0275fac=function(e){return new(e||gu)(n["\u0275\u0275inject"](hu),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](cu))},gu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gu,declarations:[fu],imports:[f.CommonModule,M.CKEditorModule,x.ReactiveFormsModule]}),gu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,M.CKEditorModule,x.ReactiveFormsModule]]});class vu{}vu.\u0275fac=function(e){return new(e||vu)},vu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vu,selectors:[["rx-service-list-design"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-md-12"],["label","Service list","required","true","disabled","true","ngModel",""]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275element"](2,"adapt-rx-select",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]())},directives:[m.AdaptRxSelectComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],encapsulation:2});class yu{}yu.\u0275fac=function(e){return new(e||yu)},yu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:yu,declarations:[vu],imports:[f.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule,m.AdaptRxSelectModule,x.FormsModule]}),yu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule,m.AdaptRxSelectModule,x.FormsModule]]});class bu extends h.BaseViewComponent{constructor(e){super(),this.httpClient=e,this.isDisabled=!0,this.serviceListOptions=[],this.service={id:null,name:null,guid:null}}ngOnInit(){super.ngOnInit();const e=this.config.pipe((0,r.pluck)("serviceRequestId"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$));this.httpClient.get("/api/com.bmc.dsm.chatbot/rx/application/chatbot/services").pipe((0,r.withLatestFrom)(e),(0,r.finalize)(()=>{this.isDisabled=!1}),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.serviceListOptions=(0,u.flow)(e=>(0,u.groupBy)(e,"groupName"),e=>(0,u.map)(e,(e,t)=>({name:t,children:(0,u.map)(e,e=>({id:e.id,name:e.name,guid:e.guid}))})))((null==e?void 0:e.catalogDetailsList)||[]),this.selectServiceRequest(t)}),e.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.selectServiceRequest(e)})}selectServiceRequest(e){let t;(0,u.forEach)(this.serviceListOptions,i=>{if(t)return!1;t=(0,u.find)(i.children,{id:e})}),this.service=t?[{id:t.id,name:t.name,guid:t.guid}]:[]}onSelectionChange(e){const t=e.options[0];this.notifyPropertyChanged("serviceRequestId",t.id),this.notifyPropertyChanged("serviceRequestName",t.name),this.notifyPropertyChanged("serviceRequestGuid",t.guid)}optionFormatter(e){return e.name}}bu.\u0275fac=function(e){return new(e||bu)(n["\u0275\u0275directiveInject"](P.HttpClient))},bu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bu,selectors:[["rx-service-list"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:4,consts:[["label","Service name","required","true","enableFilter","true",3,"options","disabled","ngModel","optionFormatter","onSelectionChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-select",0),n["\u0275\u0275listener"]("onSelectionChange",function(e){return t.onSelectionChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.serviceListOptions)("disabled",t.isDisabled)("ngModel",t.service)("optionFormatter",t.optionFormatter)},directives:[m.AdaptRxSelectComponent,x.RequiredValidator,x.NgControlStatus,x.NgModel],encapsulation:2});class xu{}xu.\u0275fac=function(e){return new(e||xu)},xu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xu,declarations:[bu],imports:[f.CommonModule,m.AdaptRxSelectModule,x.FormsModule],exports:[bu]}),xu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxSelectModule,x.FormsModule]]});class Cu extends Ps{constructor(){super(...arguments),this.state={enableLazyLoading:!1,label:""}}}Cu.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Cu)))(t||Cu)}}(),Cu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Cu,selectors:[["rx-tab-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,Oa,1,0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.state.hidden)},directives:[f.NgIf,h.RuntimeViewCanvasOutletComponent],styles:["[_nghost-%COMP%]{display:block}"]});class Su extends h.BaseViewComponent{constructor(e){super(),this.runtimeCanvasItemComponent=e,this.childLayouts=[],this.state={activeTabIndex:null},this.api={setProperty:this.setProperty.bind(this)}}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state=Object.assign(Object.assign({},this.state),e),this.isHidden=Boolean(this.state.hidden)}),this.childLayouts=(0,u.get)(this.runtimeCanvasItemComponent.getChildren(d.RX_VIEW_DEFINITION.defaultOutletName),"[0].children"),this.childLayouts.forEach(e=>{e.state={enableLazyLoading:!1,label:"",isRendered:!1,hidden:0},e.config.pipe((0,r.tap)(t=>{e.state=Object.assign(Object.assign({},e.state),t)}),(0,r.pluck)("hidden"),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.ensureActiveTabIsSet()})}),this.trySetFirstVisibleTab()}setProperty(e,t){if("hidden"===e)this.state.hidden=t,this.notifyPropertyChanged(e,t);else{if("activeTabIndex"!==e)return(0,o.throwError)(`Tab panel: property ${e} is not settable.`);this.setActiveTabIndex(parseInt(t,10))}}trackByForTabs(e,t){return t.guid}canRenderContentForTab(e){return!e.state.enableLazyLoading||e.state.isRendered}getAllTabsData(){let e=0;return this.childLayouts.map(t=>({adaptTabsetIndex:this.isHiddenTab(t)?null:e++,tab:t}))}isHiddenTab(e){return Boolean(e.state.hidden)}getActiveTabIndexForAdaptTabset(){return(0,u.isNull)(this.state.activeTabIndex)?0:this.getAllTabsData()[this.state.activeTabIndex].adaptTabsetIndex}onActiveTabChanged(e){const t=(0,u.findIndex)(this.getAllTabsData(),t=>t.adaptTabsetIndex===e);this.activateTab(t)}setActiveTabIndex(e){const t=this.childLayouts[e];t&&!this.isHiddenTab(t)&&this.activateTab(e)}activateTab(e){this.state.activeTabIndex=e,(0,u.isNil)(e)||(this.childLayouts[e].state.isRendered=!0),this.notifyPropertyChanged("activeTabIndex",e)}ensureActiveTabIsSet(){const e=this.childLayouts;(0,u.every)(e,e=>this.isHiddenTab(e))?this.activateTab(null):(!(0,u.isNull)(this.state.activeTabIndex)&&this.isHiddenTab(e[this.state.activeTabIndex])||(0,u.isNull)(this.state.activeTabIndex))&&this.trySetFirstVisibleTab()}trySetFirstVisibleTab(){const e=(0,u.findIndex)(this.childLayouts,e=>!this.isHiddenTab(e));-1!==e&&this.activateTab(e)}}Su.\u0275fac=function(e){return new(e||Su)(n["\u0275\u0275directiveInject"](h.RuntimeViewCanvasItemComponent))},Su.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Su,selectors:[["rx-tab-panel"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"fullHeight","tab-active","tab-active-changed",4,"ngIf"],[3,"fullHeight","tab-active","tab-active-changed"],["ngFor","",3,"ngForOf","ngForTrackBy"],[3,"adapt-tab-title",4,"ngIf"],[3,"layout",4,"ngIf"],[3,"adapt-tab-title"],[3,"layout"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,_a,2,4,"adapt-tabset",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf,m.AdaptTabsComponent,f.NgForOf,m.AdaptTabsPanelComponent,h.RuntimeViewCanvasItemComponent],encapsulation:2});class Du{constructor(e,t){this.viewDefinitionParserService=e,this.rxJsonParserService=t}adaptDefinition(e){this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type===d.RxViewComponentType.TabPanel).map(e=>e.componentDefinition).forEach(e=>{if(e.layout){let t=this.rxJsonParserService.tryParseJson(e.layout);if(t&&t.componentDefinitionId){const i=t.columns.map(e=>({children:e.children.map(e=>e.columns[0].children[0].componentDefinitionId)}));t={outlets:[{name:"DEFAULT",columns:i}]},e.layout=JSON.stringify(t)}}})}}Du.\u0275fac=function(e){return new(e||Du)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},Du.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Du,factory:Du.\u0275fac});class Iu extends js{constructor(e,t){super(e,t),this.componentDefinitionType=d.RxViewComponentType.TabContainer}}Iu.\u0275fac=function(e){return new(e||Iu)(n["\u0275\u0275inject"](d.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},Iu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Iu,factory:Iu.\u0275fac});class Ru{constructor(e,t,i){this.rxTabPanelComponentDefinitionAdapterService=e,this.rxTabContainerComponentDefinitionAdapterService=t,this.rxDefinitionAdapterRegistryService=i,i.registerRuntimeAdapter(d.RxViewComponentType.TabPanel,e),i.registerRuntimeAdapter(d.RxViewComponentType.TabContainer,t)}}Ru.\u0275fac=function(e){return new(e||Ru)(n["\u0275\u0275inject"](Du),n["\u0275\u0275inject"](Iu),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},Ru.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ru,declarations:[Su,Cu],imports:[f.CommonModule,h.RuntimeViewCanvasModule,m.AdaptTabsModule],exports:[Su,Cu]}),Ru.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Du,Iu],imports:[[f.CommonModule,h.RuntimeViewCanvasModule,m.AdaptTabsModule.forRoot()]]});class wu extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.tabContainerGuids$=this.sandbox.getChildComponentGuids().pipe((0,r.shareReplay)(1)),this.tabContainerComponents$=this.sandbox.getChildComponents(e=>e.type===d.RxViewComponentType.TabContainer).pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.selectedTabGuid$=new o.ReplaySubject(null)}static getInitialProperties(e){return Object.assign(Object.assign({name:null},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.componentProperties$.subscribe(e=>this.validate(e)),this.tabContainerGuids$.pipe((0,r.map)(e=>!(0,u.isEmpty)(e)),(0,r.take)(1)).subscribe(e=>{e||this.sandbox.setChildren([{type:d.RxViewComponentType.TabContainer,data:{label:"Tab 1"}},{type:d.RxViewComponentType.TabContainer,data:{label:"Tab 2"}}])}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")},{label:"Active Tab Index",expression:this.getExpressionForProperty("activeTabIndex")}])})}addTab(){this.sandbox.addComponent({type:d.RxViewComponentType.TabContainer,propertiesByName:{label:"New tab"}})}removeTab(e){this.sandbox.removeComponents([e]),(0,o.combineLatest)([this.selectedTabGuid$,this.tabContainerGuids$]).pipe((0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([t,i])=>{e===t&&this.selectTab(i[0])})}selectTab(e,t=!1){this.selectedTabGuid$.next(e),t||setTimeout(()=>{this.sandbox.selectComponent(e)})}dropPredicate(){return!1}moveComponent(e,t){this.sandbox.moveComponent(e,t,this.sandbox.guid)}validate(e){this.sandbox.setValidationIssues((0,c.validateStandardProps)(e))}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Tab panel")}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}}class Eu{constructor(e){this.rxUtilityModalsService=e,this.components=[],this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.model.tabContainerComponents$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.components=e,this.adaptTabset.checkActiveIndex()}),this.model.tabContainerComponents$.pipe((0,r.take)(1)).subscribe(e=>{this.model.selectTab((0,u.first)(e).guid,!0)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}trackByForTabs(e,t){return t.guid}onTabClicked(e){this.activeTabChanged(e)}onTabAdded(e){e.stopPropagation(),this.model.addTab(),setTimeout(()=>{this.adaptTabset.setActiveTab(this.components.length-1,!0,new MouseEvent("click"))})}activeTabChanged({index:e,event:t}){t.stopPropagation(),this.model.tabContainerGuids$.pipe((0,r.take)(1)).subscribe(t=>{this.model.selectTab(t[e])})}onTabDropped(e){for(let t=0;t<this.components.length;t++)if(this.components[t].guid!==e[t].id){if(this.components[t].guid===e[t+1].id){this.model.moveComponent(e[t].id,t);break}this.model.moveComponent(this.components[t].guid,(0,u.findIndex)(e,{id:this.components[t].guid}));break}}removeTab({index:e}){this.rxUtilityModalsService.confirm("Are you sure you want to delete this view component?").then(t=>{t&&this.model.tabContainerGuids$.pipe((0,r.take)(1)).subscribe(t=>{this.model.removeTab(t[e])})})}}Eu.\u0275fac=function(e){return new(e||Eu)(n["\u0275\u0275directiveInject"](S.RxUtilityModalsService))},Eu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Eu,selectors:[["rx-tab-panel-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Va,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptTabset=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:4,vars:5,consts:[[3,"allow-tabs-adding","enableDnD","tab-index-closed","tab-active-changed","tabClicked","tabDropped","add-tab-clicked"],["adaptTabset",""],[3,"adapt-tab-title","icon-close","id",4,"ngFor","ngForOf","ngForTrackBy"],[3,"dropPredicate"],[3,"adapt-tab-title","icon-close","id"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tabset",0,1),n["\u0275\u0275listener"]("tab-index-closed",function(e){return t.removeTab(e)})("tab-active-changed",function(e){return t.activeTabChanged(e)})("tabClicked",function(e){return t.onTabClicked(e)})("tabDropped",function(e){return t.onTabDropped(e)})("add-tab-clicked",function(e){return t.onTabAdded(e)}),n["\u0275\u0275template"](2,ka,1,3,"adapt-tab-panel",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-canvas-outlet",3)),2&e&&(n["\u0275\u0275property"]("allow-tabs-adding",!t.isReadOnly)("enableDnD",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.components)("ngForTrackBy",t.trackByForTabs),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dropPredicate",t.model.dropPredicate))},directives:[m.AdaptTabsComponent,f.NgForOf,c.CanvasOutletComponent,m.AdaptTabsPanelComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8}[_nghost-%COMP%]  .adapt-tabset>.tab-container>.tab-content{display:none}[_nghost-%COMP%] >rx-canvas-outlet>rx-canvas-item-container>div>div>rx-canvas-item-column>.cdk-drop-list>.cdk-drag>.canvas-item{border-width:0;padding:0}[_nghost-%COMP%] >rx-canvas-outlet>rx-canvas-item-container>div>div>rx-canvas-item-column>.cdk-drop-list>.cdk-drag>.canvas-item>.canvas-item-header{display:none}']});class Fu extends Gs{constructor(e){super(),this.tabPanelDesignComponent=e}ngOnInit(){this.tabPanelDesignComponent.model.selectedTabGuid$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(this.model.selectedTabGuid$)}}Fu.\u0275fac=function(e){return new(e||Fu)(n["\u0275\u0275directiveInject"](Eu))},Fu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fu,selectors:[["rx-tab-container-design"]],inputs:{model:"model"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:2,consts:[[3,"skipParentPredicate","containerComponent"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("skipParentPredicate",!0)("containerComponent",t.containerCanvasItemComponent)},directives:[c.CanvasOutletComponent],encapsulation:2});class Mu{}Mu.\u0275fac=function(e){return new(e||Mu)},Mu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mu,declarations:[Eu,Fu],imports:[f.CommonModule,m.AdaptButtonModule,m.AdaptTabsModule,c.ViewDesignerCanvasModule]}),Mu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptButtonModule,m.AdaptTabsModule,c.ViewDesignerCanvasModule]]});class Tu extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxViewComponentRegistryService=this.injector.get(d.RxViewComponentRegistryService),this.componentName$=this.sandbox.getChildComponents().pipe((0,r.filter)(e=>e.length>0),(0,r.map)(e=>{const t=e[0].type,i=this.rxViewComponentRegistryService.get(t);return(null==i?void 0:i.name)||d.RX_VIEW_DEFINITION.unknownPageComponent.name}))}}class Ou{}Ou.\u0275fac=function(e){return new(e||Ou)},Ou.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ou,selectors:[["rx-page-design"]],inputs:{model:"model"},decls:2,vars:3,consts:[["type","objects",3,"label"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,1,t.model.componentName$))},directives:[m.AdaptEmptyStateComponent],pipes:[f.AsyncPipe],encapsulation:2,changeDetection:0});class Nu{}Nu.\u0275fac=function(e){return new(e||Nu)},Nu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Nu,declarations:[Ou],imports:[f.CommonModule,m.AdaptEmptyStateModule]}),Nu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptEmptyStateModule]]});class Au{adaptDefinition(e){e.layout=JSON.stringify({outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:e.componentDefinitions[0].guid}]}]})}}Au.\u0275fac=function(e){return new(e||Au)},Au.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Au,factory:Au.\u0275fac});class Pu{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.pageComponentDefinitionAdapterService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(d.RxViewComponentType.Page,this.pageComponentDefinitionAdapterService)}}Pu.\u0275fac=function(e){return new(e||Pu)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Au))},Pu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Pu,declarations:[Kp],imports:[f.CommonModule,h.RuntimeViewCanvasModule],exports:[Kp]}),Pu.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Au],imports:[[f.CommonModule,h.RuntimeViewCanvasModule]]});class ju{}ju.\u0275fac=function(e){return new(e||ju)},ju.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ju,selectors:[["rx-image-design"]],decls:2,vars:0,consts:[[1,"placeholder","d-flex","justify-content-center","align-items-center"],[1,"component-icon","d-icon-attachment_image_adapt"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275elementEnd"]())},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8}.placeholder[_ngcontent-%COMP%]{height:132px;color:#959899}.component-icon[_ngcontent-%COMP%]{height:100px;width:100px;font-size:100px;position:relative}.component-icon[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;right:0;left:0}']});class _u{}var Vu;_u.\u0275fac=function(e){return new(e||_u)},_u.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_u,declarations:[ju],imports:[f.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule]}),_u.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule]]}),function(e){e.Left="left",e.Center="center",e.Right="right"}(Vu||(Vu={}));const ku=[{id:Vu.Left,name:"Left"},{id:Vu.Center,name:"Center"},{id:Vu.Right,name:"Right"}],Bu={[Vu.Left]:"justify-content-start",[Vu.Center]:"justify-content-center",[Vu.Right]:"justify-content-end"};class $u extends h.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.rxRecordInstanceService=e,this.rxLogService=t,this.httpClient=i,this.domSanitizer=n,this.translateService=o,this.rxRecordInstanceUtilsService=r,this.state={recordDefinitionName:"",recordInstanceId:"",fieldId:"",maxWidth:"",imageUrl:null,isImageBroken:!1,alignmentStyle:"",altText:""},this.api={setProperty:this.setProperty.bind(this)},this.fileName=""}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api);this.config.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.tap)(e=>{const t=Object.assign({},e);this.isHidden=t.hidden,!this.state.alignmentStyle&&t.alignment&&(t.alignmentStyle=this.getAlignmentStyle(t.alignment)),delete t.alignment,this.state=Object.assign(Object.assign({},this.state),t)}),(0,r.shareReplay)(1)).pipe((0,r.map)(()=>this.state.recordInstanceId?this.state.recordInstanceId:null),(0,r.filter)(e=>Boolean(e)),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{const t=this.rxRecordInstanceService.getAttachmentDownloadUrl(this.state.recordDefinitionName,Number(this.state.fieldId),e);this.httpClient.get(t,{responseType:"blob",observe:"response"}).subscribe({next:e=>{const t=e.body;if(this.fileName=this.rxRecordInstanceUtilsService.tryParseContentDisposition(e.headers.get("content-disposition")),t&&"image"===t.type.split("/")[0]){const e=new FileReader;e.onloadend=()=>{this.state.imageUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(e.result),this.state.isImageBroken=!1,this.state.altText=this.fileName},e.onerror=this.onImageLoadFailed.bind(this),e.readAsDataURL(t)}else this.rxLogService.warning("rx-image: attachment is not a valid image."),this.onImageLoadFailed()},error:e=>{this.state.imageUrl=null,this.state.isImageBroken=!1,this.state.altText=""}})})}onImageLoadFailed(){this.state.imageUrl=null,this.state.isImageBroken=!0,this.state.altText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.image.invalid-image.label",{imageName:this.fileName})}getAlignmentStyle(e){return Bu[e]}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Image: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}$u.\u0275fac=function(e){return new(e||$u)(n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](P.HttpClient),n["\u0275\u0275directiveInject"](A.DomSanitizer),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService))},$u.\u0275cmp=n["\u0275\u0275defineComponent"]({type:$u,selectors:[["rx-image"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],["class","image",3,"src","max-width",4,"ngIf"],["role","img","class","broken-image d-icon-broken_image",4,"ngIf"],[1,"image",3,"src"],["role","img",1,"broken-image","d-icon-broken_image"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,La,3,5,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[f.NgIf],styles:[".broken-image[_ngcontent-%COMP%]{font-size:64px}.image[_ngcontent-%COMP%]{align-self:flex-start}.image-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}"]});class Lu{}Lu.\u0275fac=function(e){return new(e||Lu)},Lu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Lu,declarations:[$u],imports:[f.CommonModule],exports:[$u]}),Lu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule]]});class Gu{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:d.RxViewComponentType.ActionButton,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ds),properties:[{name:"recordDefinitionName"},{name:"fieldId"},{name:"recordInstance",enableExpressionEvaluation:!0},{name:"label",localizable:!0},d.RX_DISABLED_PROP_DESC,...d.RX_STANDARD_PROPS_DESC],name:"Action button",isContainerComponent:!0,options:{canBeEmbeddedInRecordEditor:!0},group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"action_button_cursor",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(xs),designComponentModel:bs,bundleId:s.RX_APPLICATION.platformBundleId})}}Gu.\u0275fac=function(e){return new(e||Gu)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},Gu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Gu,imports:[Ss,Is]}),Gu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ss,Is]]});class zu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.ButtonBar,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ms),outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],properties:d.RX_STANDARD_PROPS_DESC,name:"Button bar",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"button_panel_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ns),designComponentModel:Os,options:{canBeEmbeddedInRecordEditor:!0},bundleId:s.RX_APPLICATION.platformBundleId})}}zu.\u0275fac=function(e){return new(e||zu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},zu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:zu,imports:[Ts,As]}),zu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ts,As]]});class Uu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.Container,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ps),properties:d.RX_STANDARD_PROPS_DESC,outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Container",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"layout",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Gs),designComponentModel:Ls,options:{canBeEmbeddedInRecordEditor:!0},bundleId:s.RX_APPLICATION.platformBundleId})}}Uu.\u0275fac=function(e){return new(e||Uu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Uu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Uu,imports:[_s,zs]}),Uu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[_s,zs]]});class qu extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.attachmentFields$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.getAttachmentFieldsFromRecordDefinition(e):(0,o.of)([]))),this.rxModalService=this.injector.get(S.RxModalService),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.maxWidthUnits=[{name:"pixels",id:"px"},{name:"%",id:"%"}]}static getInitialProperties(e){return Object.assign(Object.assign({name:null,recordDefinitionName:null,recordInstanceId:null,fieldId:null,maxWidth:null,alignment:Vu.Left},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(e=>{this.sandbox.updateInspectorConfig(this.getInspector(e))}),this.recordDefinitionName$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{const i=Object.assign(Object.assign({},t),{recordInstanceId:null,fieldId:null});this.sandbox.updateComponentProperties(i),this.sandbox.updateInspectorConfig(this.getInspector(i))}),this.attachmentFields$.pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateInspectorConfig(this.getInspector(t,e))}),(0,o.combineLatest)([this.validateEmptyProp("recordDefinitionName","Record definition name cannot be blank."),this.validateEmptyProp("recordInstanceId","Record instance ID cannot be blank."),this.validateEmptyProp("fieldId","Field ID cannot be blank."),this.sandbox.getComponentPropertyValue("maxWidth").pipe((0,r.map)(e=>this.validateMaxWidth(e))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(c.validateCssClassNames)),this.sandbox.getComponentPropertyValue(d.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(c.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}getAttachmentFieldsFromRecordDefinition(e){return this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions.filter(e=>e.resourceType===a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType).map(({id:e,name:t})=>({id:e.toString(),name:t}))))}getInspector(e,t=[]){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Image view component.")}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",definitionType:l.RxDefinitionPickerType.RegularRecord,beforeValueChange:(t,i)=>Boolean(t)&&e.recordInstanceId&&e.fieldId?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Record Instance ID and Field ID will be cleared. Do you want to continue?"}):Promise.resolve(!0),required:!0}},{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",options:t,required:!0}},{name:"recordInstanceId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",isRequired:!0}},{name:"alignment",component:l.SelectFormControlComponent,options:{label:"Horizontal alignment",options:ku}},{name:"maxWidth",component:l.StepperWithUnitsFormControlComponent,options:{label:"Maximum width",defaultUnit:"px",units:this.maxWidthUnits,stepperOptionByUnits:{px:{minValue:0},"%":{minValue:0,maxValue:100,defaultValue:100}}}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}validateEmptyProp(e,t){return this.sandbox.getComponentPropertyValue(e).pipe((0,r.map)(i=>i?null:this.sandbox.createError(t,e)))}validateMaxWidth(e){if(e){const t=e.match(/^([+-]?\d+(?:\.\d+)?)(.*)/);if(t){const e=Number(t[1]);if("%"===t[2]&&e>100)return this.sandbox.createError("Maximum width cannot be greater than 100%.");if(e<0)return this.sandbox.createError("Maximum width should be a positive number.")}}}}class Xu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:d.RxViewComponentType.Image,componentFactory:this.componentFactoryResolver.resolveComponentFactory($u),name:"Image",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,options:{canBeEmbeddedInRecordEditor:!0},properties:[{name:"recordInstanceId",enableExpressionEvaluation:!0},...d.RX_STANDARD_PROPS_DESC],designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ju),designComponentModel:qu,icon:"attachment_image_adapt",bundleId:s.RX_APPLICATION.platformBundleId})}}Xu.\u0275fac=function(e){return new(e||Xu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Xu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xu,imports:[Lu,_u]}),Xu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Lu,_u]]});class Wu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:d.RxViewComponentType.Page,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Kp),outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Page",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ou),designComponentModel:Tu,hidden:!0,bundleId:s.RX_APPLICATION.platformBundleId})}}Wu.\u0275fac=function(e){return new(e||Wu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Wu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wu,imports:[Pu,Nu]}),Wu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Pu,Nu]]});class Hu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.RecordEditor,componentFactory:this.componentFactoryResolver.resolveComponentFactory(sl),properties:[{name:"recordInstanceId",enableExpressionEvaluation:!0},{name:"allowEdit",enableExpressionEvaluation:!0},{name:"label",localizable:!0},d.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Record editor",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"file_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ys),designComponentModel:Js,bundleId:s.RX_APPLICATION.platformBundleId})}}Hu.\u0275fac=function(e){return new(e||Hu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Hu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hu,imports:[cl,el]}),Hu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[cl,el]]});class Qu extends c.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.componentGuid=t,this.componentModel=i,this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.rxRecordGridUtilsService=this.injector.get(_c),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService);const n=this.getComponentCommonDataDictionary().pipe((0,r.switchMap)(e=>e?i.recordDefinition$.pipe((0,r.concatMap)(e=>this.rxRecordGridUtilsService.getAssociationDescriptors(e.name).pipe((0,r.concatMap)(e=>e.length?(0,o.forkJoin)(e.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{recordDefinition:t}))))):(0,o.of)([])),(0,r.map)(i=>e?{label:"Filter by",children:[{label:this.rxDefinitionNameService.getDisplayName(e.name),icon:"d-icon-file_o_gear",children:e.fieldDefinitions.map(e=>{const i=e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?(0,u.map)(e.optionNamesById,(i,n)=>({label:i,expression:`\${view.components.${t}.recordDefinition.fieldDefinitionsById[${e.id}].optionsById[${n}].id}`})):void 0;return{label:e.name,icon:"d-icon-file_o_gear",expression:`'${e.id}'`,children:e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:"Options",children:i}]:null,autocompleteOptions:i}})},...i?i.map(e=>({label:this.rxDefinitionNameService.getDisplayName(e.associationDefinition.name),icon:"d-icon-file_o_gear",children:e.recordDefinition.fieldDefinitions.map(t=>({label:t.name,icon:"d-icon-file_o_gear",expression:`'\${recordContext._associations.${e.associationDefinition.guid}.${e.nodeSide}[0].${t.id}}'`}))})):[]]}:[]))),(0,r.map)(t=>Object.assign(Object.assign({},e),{children:[t,...e.children]}))):(0,o.of)(null)));this.configureForProperty({propertyPath:"filterExpression",operators:this.getOperatorRowsByGroup(s.ExpressionOperatorGroup.AllServer),dataDictionary$:this.getCommonDataDictionary(n).pipe((0,r.map)(e=>[Qc.keywords,...e.filter(e=>"General"!==e.label&&"Functions"!==e.label)||[]]))})}}class Ku{constructor(e,t,i,n){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,this.rxRecordGridQueryExpressionEvaluatorService=i,this.rxRecordQueryExpressionEvaluatorService=n,t.register({type:jc.type,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ou),properties:[{name:"recordDefinitionName",type:d.ViewComponentPropertyType.String},{name:"enableRowSelection",type:d.ViewComponentPropertyType.String},{name:"enableFiltering",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"getDataForHiddenColumns",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"requiredFilters",type:d.ViewComponentPropertyType.Number,designType:d.ViewComponentPropertyType.Number,enableExpressionEvaluation:!0},{name:"showDataForAllLocales",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"expandable",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean},{name:"bordered",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"striped",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"defaultFilterPreset",type:d.ViewComponentPropertyType.String},{name:"filters",type:d.ViewComponentPropertyType.String},{name:"filterExpression",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordGridQueryExpressionEvaluatorService},{name:"selectedRows",type:d.ViewComponentPropertyType.String},{name:"firstSelectedRow",type:d.ViewComponentPropertyType.String},{name:"clickableRow",type:d.ViewComponentPropertyType.String},{name:"selectedRowCount",type:d.ViewComponentPropertyType.Number},{name:"totalRowCount",type:d.ViewComponentPropertyType.Number},{name:"isUserAllowedToDeleteRecords",type:d.ViewComponentPropertyType.Boolean},{name:"associationDefinitionName",type:d.ViewComponentPropertyType.String},{name:"associatedRecordNodeSide",type:d.ViewComponentPropertyType.String},{name:"associatedRecordId",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"associatedRoleName",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"enableFilterPresets",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"queryExpression",type:d.ViewComponentPropertyType.String},{name:"lastRefreshTime",type:d.ViewComponentPropertyType.String},{name:"viewPresetSelector",enableExpressionEvaluation:!0},d.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName},{name:jc.rowActionsOutletName}],name:"Record grid",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"table",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(zp),designComponentModel:Gp,expressionConfigurator:Qu,bundleId:s.RX_APPLICATION.platformBundleId},{type:jc.components.column,configPropertyName:"columns",properties:[{name:"title",type:d.ViewComponentPropertyType.String,localizable:!0},{name:"fieldId",type:d.ViewComponentPropertyType.String},{name:"visible",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"sortable",type:d.ViewComponentPropertyType.String},{name:"filterable",type:d.ViewComponentPropertyType.String,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"clickable",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"index",type:d.ViewComponentPropertyType.Number},{name:"alignment",type:d.ViewComponentPropertyType.String},{name:"cellDisplayProperties",designType:d.ViewComponentPropertyType.Array,type:d.ViewComponentPropertyType.Array},{name:"wrapText",type:d.ViewComponentPropertyType.Boolean},{name:"typeaheadKeystrokeCount",type:d.ViewComponentPropertyType.Number},{name:"additionalQueryCriteria",type:d.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordQueryExpressionEvaluatorService}],isDataComponent:!0,isContainerComponent:!0},{type:jc.components.filter,configPropertyName:"recordGridFilters",properties:[{name:"value",type:d.ViewComponentPropertyType.String},{name:"fieldId",type:d.ViewComponentPropertyType.String},{name:"$DISPLAYVALUE$",type:d.ViewComponentPropertyType.String},{name:"label",localizable:!0}],isDataComponent:!0},{type:jc.components.filterPreset,configPropertyName:"predefinedFilterPresets",properties:[{name:"title",type:d.ViewComponentPropertyType.String,localizable:!0},{name:"filters",type:d.ViewComponentPropertyType.String},{name:"filterExpression",enableExpressionEvaluation:!0,evaluatorService:this.rxRecordGridQueryExpressionEvaluatorService}],isDataComponent:!0,isContainerComponent:!0},{type:jc.components.viewPreset,configPropertyName:"viewPresets",properties:[{name:"viewPresetGuid",type:d.ViewComponentPropertyType.String},{name:"filters",type:d.ViewComponentPropertyType.String}],isDataComponent:!0,isContainerComponent:!0},{type:jc.components.columnViewPreset,configPropertyName:"columnViewPresets",properties:[{name:"fieldId",type:d.ViewComponentPropertyType.String},{name:"index",designType:d.ViewComponentPropertyType.Number,type:d.ViewComponentPropertyType.Number},{name:"visible",designType:d.ViewComponentPropertyType.Boolean,type:d.ViewComponentPropertyType.Boolean},{name:"sortable",designType:d.ViewComponentPropertyType.Object,type:d.ViewComponentPropertyType.Object}],isDataComponent:!0,isContainerComponent:!0})}}Ku.\u0275fac=function(e){return new(e||Ku)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](au),n["\u0275\u0275inject"](d.RxRecordQueryExpressionEvaluatorService))},Ku.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ku,imports:[su,Qp]}),Ku.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[su,Qp]]});class Ju{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxRichTextExpressionEvaluatorService=i,e.register({type:d.RxViewComponentType.RichText,componentFactory:this.componentFactoryResolver.resolveComponentFactory(lu),properties:[{name:"html",enableExpressionEvaluation:!0,evaluatorService:this.rxRichTextExpressionEvaluatorService,localizable:!0},...d.RX_STANDARD_PROPS_DESC],name:"Rich text",isContainerComponent:!0,options:{canBeEmbeddedInRecordEditor:!0},group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(fu),designComponentModel:mu,bundleId:s.RX_APPLICATION.platformBundleId})}}Ju.\u0275fac=function(e){return new(e||Ju)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](du))},Ju.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ju,imports:[pu,gu]}),Ju.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[cu],imports:[[pu,gu]]});class Yu extends c.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.hiddenOnCanvas$=new o.BehaviorSubject(!1),this.selectedTabGuid$=new o.Subject,this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("label").pipe((0,r.map)(e=>e?null:this.sandbox.createError("Label cannot be blank.","label"))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(c.validateCssClassNames)),this.sandbox.getComponentPropertyValue(d.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(c.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.selectedTabGuid$.pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.hiddenOnCanvas$.next(this.sandbox.guid!==e)}),this.sandbox.getComponentPropertyValue("columnCount").pipe((0,r.skip)(1)).subscribe(e=>{this.sandbox.setLayout(this.getDefaultColumnSpans(Number(e)))}),this.sandbox.getComponentPropertyValue("label").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}]),this.sandbox.setBreadcrumbs(e)})}static getInitialProperties(e){return Object.assign(Object.assign({columnCount:"1",enableLazyLoading:!1,label:"",rowWrap:ks.Sm},d.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}setContainerLayout(e){this.sandbox.setLayout(e)}getDefaultColumnSpans(e){const t=[],i=Math.floor(Bs.maxColumnSpan/e);return(0,u.times)(e,()=>t.push(i)),t[t.length-1]=Bs.maxColumnSpan%e+i,t}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"label",component:l.TextFormControlComponent,options:{label:"Label",required:!0}},{name:"enableLazyLoading",component:l.SwitchFormControlComponent,options:{label:"Enable lazy loading"}},{name:"columnCount",component:l.SelectFormControlComponent,options:{label:"Number of columns",required:!0,tooltip:new s.Tooltip("Resize container columns on the canvas by dragging the dashed column separator line."),options:(0,u.times)(6,e=>({id:(++e).toString(),name:e.toString()}))}},{name:"rowWrap",component:l.SelectFormControlComponent,options:{label:"Row wrap",sortAlphabetically:!1,options:(0,u.values)(Bs.rowWrapOptions),tooltip:new s.Tooltip("The Row wrap property controls the layout of multi-column containers based on\n                    the width of the view. When the width of the view is decreased to a width less\n                    than the selected Row wrap value, each container column after the first one\n                    wraps onto a new line.")}},...(0,c.getStandardPropsInspectorConfigs)()]}]}}}class Zu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.TabPanel,componentFactory:t.resolveComponentFactory(Su),properties:d.RX_STANDARD_PROPS_DESC,outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],options:{canBeEmbeddedInRecordEditor:!0},name:"Tab panel",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"app_tab",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Eu),designComponentModel:wu,bundleId:s.RX_APPLICATION.platformBundleId},{type:d.RxViewComponentType.TabContainer,componentFactory:t.resolveComponentFactory(Cu),properties:[...d.RX_STANDARD_PROPS_DESC,{name:"label",type:d.ViewComponentPropertyType.String,localizable:!0},{name:"enableLazyLoading",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0}],outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Tab",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,hidden:!0,icon:"app_tab",designComponentFactory:t.resolveComponentFactory(Fu),designComponentModel:Yu,bundleId:s.RX_APPLICATION.platformBundleId})}}Zu.\u0275fac=function(e){return new(e||Zu)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Zu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Zu,imports:[Ru,Mu]}),Zu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ru,Mu]]});class em extends c.ViewDesignerComponentModel{static getInitialProperties(e){return Object.assign({serviceRequestId:null,serviceRequestName:null,serviceRequestGuid:null},e)}rxInit(){this.sandbox.getComponentPropertyValue("serviceRequestId").pipe((0,r.map)(e=>e?[]:[this.sandbox.createError("Selected service request ID cannot be blank.","serviceRequestId")]),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector()),this.sandbox.setCommonDataDictionary(this.getCommonProps())})}getCommonProps(){return{label:this.sandbox.descriptor.name,expression:this.getExpressionForProperty("api"),children:[{label:"Service request ID",expression:this.getExpressionForProperty("serviceRequestId")},{label:"Service request name",expression:this.getExpressionForProperty("serviceRequestName")},{label:"Service request GUID",expression:this.getExpressionForProperty("serviceRequestGuid")}]}}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"serviceRequestId",component:l.ExpressionInspectorControlComponent,options:{label:"Service request ID",isRequired:!0}},{name:"serviceRequestName",component:l.ExpressionInspectorControlComponent,options:{label:"Service request name"}},{name:"serviceRequestGuid",component:l.ExpressionInspectorControlComponent,options:{label:"Service request GUID"}}]}]}}}class tm{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:d.RxViewComponentType.ServiceList,componentFactory:this.componentFactoryResolver.resolveComponentFactory(bu),name:"Service list",group:c.RX_VIEW_DESIGNER.stencilGroups.chatbotComponents.label,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(d.RxViewComponentType.RecordEditor),properties:[{name:"serviceRequestId",enableExpressionEvaluation:!0,type:d.ViewComponentPropertyType.String},{name:"serviceRequestName",enableExpressionEvaluation:!0,type:d.ViewComponentPropertyType.String},{name:"serviceRequestGuid",enableExpressionEvaluation:!0,type:d.ViewComponentPropertyType.String}],designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(vu),designComponentModel:em,icon:"field_dropdown",bundleId:s.RX_APPLICATION.chatbotBundleId,availableInBundles:[s.RX_APPLICATION.chatbotBundleId]})}}tm.\u0275fac=function(e){return new(e||tm)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},tm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:tm,imports:[xu,yu]}),tm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[xu,yu]]});class im extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.label=`Unknown component: ${this.sandbox.componentType}`}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(e=>{this.sandbox.updateInspectorConfig(this.getInspector(e)),this.sandbox.setValidationIssues([this.sandbox.createError(this.label)])})}getInspector(e){return{inspectorSectionConfigs:[{label:"General",controls:(0,u.keys)(e).map(e=>({name:e,component:l.TextFormControlComponent,options:{label:e},isDisabled:!0}))}]}}}class nm{}nm.\u0275fac=function(e){return new(e||nm)},nm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:nm,selectors:[["rx-unknown"]],inputs:{model:"model"},decls:1,vars:1,consts:[["type","objects",3,"label"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",0),2&e&&n["\u0275\u0275property"]("label",t.model.label)},directives:[m.AdaptEmptyStateComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{border:1px solid #d6d7d8;display:block;position:relative;padding:1rem;height:200px}'],changeDetection:0});class om{}om.\u0275fac=function(e){return new(e||om)},om.\u0275mod=n["\u0275\u0275defineNgModule"]({type:om,declarations:[nm],imports:[f.CommonModule,m.AdaptEmptyStateModule]}),om.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptEmptyStateModule]]});class rm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:d.RxViewComponentType.Unknown,outlets:[{name:d.RX_VIEW_DEFINITION.defaultOutletName}],name:"Unknown",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(nm),designComponentModel:im,hidden:!0,bundleId:s.RX_APPLICATION.platformBundleId})}}rm.\u0275fac=function(e){return new(e||rm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},rm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:rm,imports:[om]}),rm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[om]]});const am={commands:{createUserMapping:"com.bmc.arsys.rx.application.chat.command.CreateChatUserMappingCommand"},mappingStatus:{check:"check",failed:"failed",inProgress:"inProgress",missingParameters:"missingParameters",pending:"pending",success:"success"},messages:{check:"com.bmc.arsys.rx.settings.check",failed:"com.bmc.arsys.rx.settings.failed",inProgress:"com.bmc.arsys.rx.settings.inProgress",missingParameters:"com.bmc.arsys.rx.settings.missingParameters",pending:"com.bmc.arsys.rx.settings.pending",success:"com.bmc.arsys.rx.settings.success"}};class sm extends h.BaseViewComponent{constructor(e,t,i){super(),this.translateService=e,this.rxCommandFactoryService=t,this.rxNotificationService=i,this.encryptedChatUserAndChatId=null,this.chatbotProvider=null,this.isMappingInProgress=!1,this.message="",this.mappingStatus=""}ngOnInit(){this.isMappingInProgress=!1,this.config.pipe((0,r.take)(1)).subscribe(e=>{this.encryptedChatUserAndChatId=e.encryptedChatUserAndChatId,this.chatbotProvider=e.chatbotProvider,this.encryptedChatUserAndChatId?this.mappingStatus=am.mappingStatus.pending:(this.mappingStatus=am.mappingStatus.missingParameters,this.rxNotificationService.addErrorMessage(this.translateService.instant(am.messages.missingParameters))),this.updateMessage()})}isMappingButtonVisible(){return this.mappingStatus===am.mappingStatus.pending}mapUser(){this.isMappingInProgress=!0,this.mappingStatus=am.mappingStatus.inProgress,this.updateMessage();const e={encryptedChatUserAndChatId:this.encryptedChatUserAndChatId,chatbotProvider:this.chatbotProvider};this.rxCommandFactoryService.forResourceType(am.commands.createUserMapping).execute(e).pipe((0,r.catchError)(e=>(this.mappingStatus=am.mappingStatus.failed,this.updateMessage(),this.isMappingInProgress=!1,(0,o.throwError)(e)))).subscribe(()=>{this.mappingStatus=am.mappingStatus.success,this.updateMessage(),this.isMappingInProgress=!1})}updateMessage(){this.message=this.translateService.instant(am.messages[this.mappingStatus])}}sm.\u0275fac=function(e){return new(e||sm)(n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxCommandFactoryService),n["\u0275\u0275directiveInject"](s.RxNotificationService))},sm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sm,selectors:[["com-bmc-arsys-rx-user-mapping"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:9,consts:[[1,"text-center","mt-1","container"],[1,"text-logo"],[1,"mt-4"],["rx-id","verify-bmc-cloud-account","adapt-button","","btn-type","primary","size","large","type","button",1,"mt-4",3,"disabled","hidden","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"span",1),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",2),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div"),n["\u0275\u0275elementStart"](8,"button",3),n["\u0275\u0275listener"]("click",function(){return t.mapUser()}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.settings.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](t.message),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.isMappingInProgress)("hidden",!t.isMappingButtonVisible()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,7,"com.bmc.arsys.rx.settings.verify-cloud-account")," "))},directives:[m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.container[_ngcontent-%COMP%]{width:400px;margin:auto}.text-logo[_ngcontent-%COMP%]{font-size:var(--h1-font-size)}']});class lm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"com-bmc-arsys-rx-user-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(sm),name:"Chatbot User Mapping",availableInBundles:[s.RX_APPLICATION.settingsBundleId],hidden:!0,properties:[{name:"encryptedChatUserAndChatId",enableExpressionEvaluation:!0},{name:"chatbotProvider",enableExpressionEvaluation:!0}]})}}lm.\u0275fac=function(e){return new(e||lm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},lm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:lm,declarations:[sm],imports:[m.AdaptButtonModule,f.CommonModule,x.FormsModule,p.TranslateModule]}),lm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptButtonModule,f.CommonModule,x.FormsModule,p.TranslateModule]]});const dm="LOGIN_SUCCESSFUL";class cm extends h.BaseViewComponent{ngOnInit(){var e;null===(e=window.opener)||void 0===e||e.postMessage(dm,"*")}}cm.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](cm)))(t||cm)}}(),cm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:cm,selectors:[["com-bmc-arsys-rx-settings-iframe-login-event"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["src","/com.bmc.arsys.rx.settings/resources/images/login-successful.gif","alt","Login successful",1,"login-verification"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"img",0)},styles:[".login-verification[_ngcontent-%COMP%]{top:50%;left:50%;position:fixed;transform:translate(-50%,-50%);width:670px}"]});class pm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"com-bmc-arsys-rx-settings-iframe-login-event",componentFactory:this.componentFactoryResolver.resolveComponentFactory(cm),name:"IFrame Login Event",availableInBundles:[s.RX_APPLICATION.settingsBundleId],hidden:!0})}}pm.\u0275fac=function(e){return new(e||pm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},pm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pm,declarations:[cm],imports:[f.CommonModule]}),pm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule]]});class um{constructor(e){this.rxSmartReportingService=e}ngOnInit(){this.rxSmartReportingService.openSmartReporting("_self",{query:this.runtimeViewModelApi.getViewInputParameters().param}).subscribe()}}um.\u0275fac=function(e){return new(e||um)(n["\u0275\u0275directiveInject"](s.RxSmartReportingService))},um.\u0275cmp=n["\u0275\u0275defineComponent"]({type:um,selectors:[["rx-smart-reporting-redirector"]],inputs:{runtimeViewModelApi:"runtimeViewModelApi"},decls:3,vars:3,consts:[[1,"p-3"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.smart-reporting-redirector.message")))},pipes:[p.TranslatePipe],encapsulation:2});class mm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-smart-reporting-redirector",componentFactory:this.componentFactoryResolver.resolveComponentFactory(um),name:"Smart reporting redirector",isPageComponent:!0,hidden:!0,availableInBundles:[s.RX_APPLICATION.settingsBundleId]})}}mm.\u0275fac=function(e){return new(e||mm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},mm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:mm,declarations:[um],imports:[p.TranslateModule]}),mm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[p.TranslateModule]]});const fm="23503_SHARABLE_VIEW_PRESET",hm={user:{recordDefinitionName:"CTM:People",fields:{fullName:1000000017,lastName:1000000018,firstName:1000000019,loginId:a.RX_RECORD_DEFINITION.coreFieldIds.assignee,recordId:a.RX_RECORD_DEFINITION.coreFieldIds.id,email:1000000048}},sharedViewPreset:{recordDefinitionName:"com.bmc.arsys.rx.settings:SharedViewPreset",fields:{viewPresetName:58200,viewName:58201,viewPresetInfo:58202,viewPresetSelectorGuid:58203,sharedUsers:58204,id:a.RX_RECORD_DEFINITION.coreFieldIds.id,ownerFullName:58205}}};class gm{constructor(e,t,i,n){this.rxRecordInstanceDataPageService=e,this.rxRecordInstanceService=t,this.httpClient=i,this.rxJsonParserService=n}searchUsers(e){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:hm.user.recordDefinitionName,propertySelection:[hm.user.fields.fullName,hm.user.fields.email,hm.user.fields.loginId],pageSize:s.RX_DATA_PAGE.defaultPageSize,queryExpression:[hm.user.fields.fullName,hm.user.fields.email,hm.user.fields.loginId].map(t=>`('${t}' LIKE "%${e}%")`).join(" OR ")}}).pipe((0,r.map)(e=>e.data))}getSharedViewPresets(e,t){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:hm.sharedViewPreset.recordDefinitionName,queryExpression:[`'${hm.sharedViewPreset.fields.viewPresetSelectorGuid}' = "${e}"`].join(" AND "),propertySelection:[hm.sharedViewPreset.fields.viewPresetName,hm.sharedViewPreset.fields.id,hm.sharedViewPreset.fields.ownerFullName,hm.sharedViewPreset.fields.sharedUsers]}}).pipe((0,r.map)(e=>e.data.filter(e=>this.rxJsonParserService.tryParseJson(e[hm.sharedViewPreset.fields.sharedUsers],[]).find(e=>e.loginId===t))))}getSharedViewPreset(e){return this.rxRecordInstanceService.get(hm.sharedViewPreset.recordDefinitionName,e)}createSharedViewPreset(e){return this.httpClient.post(this.getUrl(),e,{responseType:"text"})}updateSharedViewPreset(e,t){return this.httpClient.put(this.getUrl(e),t)}deleteSharedViewPreset(e){return this.rxRecordInstanceService.delete(hm.sharedViewPreset.recordDefinitionName,e)}getUrl(e){return e?`/api/rx/application/configuration/viewpreset/${e}`:"/api/rx/application/configuration/viewpreset"}}gm.\u0275fac=function(e){return new(e||gm)(n["\u0275\u0275inject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275inject"](a.RxRecordInstanceService),n["\u0275\u0275inject"](P.HttpClient),n["\u0275\u0275inject"](v.RxJsonParserService))},gm.\u0275prov=n["\u0275\u0275defineInjectable"]({token:gm,factory:gm.\u0275fac,providedIn:"root"});class vm{constructor(e,t,i,n){this.rxShareViewPresetDataService=e,this.rxStringService=t,this.rxJsonParserService=i,this.rxCurrentUserService=n}getAutocompleteSearch(e){return e.pipe((0,r.debounceTime)(250),(0,r.distinctUntilChanged)(),(0,r.switchMap)(e=>{const t=e.trim();return t.length>0?this.rxShareViewPresetDataService.searchUsers(t):(0,o.of)([])}),(0,r.map)(e=>e.map(e=>({text:e[hm.user.fields.fullName],data:{loginId:e[hm.user.fields.loginId],fullName:e[hm.user.fields.fullName],emailAddress:e[hm.user.fields.email]}}))))}getSharedViewPresetUsers(e){return this.rxShareViewPresetDataService.getSharedViewPreset(e).pipe((0,r.map)(e=>this.rxJsonParserService.tryParseJson(null==e?void 0:e.fieldInstances[hm.sharedViewPreset.fields.sharedUsers].value,[])))}getSharedViewPresetData(e){return this.rxShareViewPresetDataService.getSharedViewPreset(e).pipe((0,r.map)(e=>({viewPresetName:null==e?void 0:e.fieldInstances[hm.sharedViewPreset.fields.viewPresetName].value,sharedViewPresets:this.rxJsonParserService.tryParseJson(null==e?void 0:e.fieldInstances[hm.sharedViewPreset.fields.viewPresetInfo].value,null)})))}createUpdateSharedViewPreset(e,t){return t?this.rxShareViewPresetDataService.updateSharedViewPreset(t,e).pipe((0,r.map)(()=>t)):this.rxShareViewPresetDataService.createSharedViewPreset(e)}saveSharedViewPreset(e,t){const i=e.sharedUsers?(0,o.of)(e.sharedUsers):this.getSharedViewPresetUsers(t);return(0,o.combineLatest)([e.runtimeViewModelApi.shareViewPreset(e.presetSelectorGuid),i]).pipe((0,r.map)(([t,i])=>({viewPresetName:e.currentViewPreset.label,viewName:"",viewPresetGuid:e.presetSelectorGuid,submitter:this.rxCurrentUserService.get().fullName,sharedUsers:i,presetInformation:JSON.stringify(t)})),(0,r.switchMap)(e=>this.createUpdateSharedViewPreset(e,t)))}deleteSharedViewPreset(e){return this.rxShareViewPresetDataService.deleteSharedViewPreset(e)}getSharedViewPresetsForCurrentUser(e){return this.rxShareViewPresetDataService.getSharedViewPresets(e,this.rxCurrentUserService.getName()).pipe((0,r.map)(e=>e.map(e=>({label:e[hm.sharedViewPreset.fields.viewPresetName],guid:e[hm.sharedViewPreset.fields.id],ownerFullName:e[hm.sharedViewPreset.fields.ownerFullName]}))))}}vm.\u0275fac=function(e){return new(e||vm)(n["\u0275\u0275inject"](gm),n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](s.RxCurrentUserService))},vm.\u0275prov=n["\u0275\u0275defineInjectable"]({token:vm,factory:vm.\u0275fac,providedIn:"root"});class ym{constructor(e,t){this.rxUserPreferencesService=e,this.rxShareViewPresetService=t}save(e){const t=e.customViewPresetOptions.map(e=>(0,u.pick)(e,["guid","label","userSharedViewPresetGuid"])),i=e.sharedViewPresetOptions.map(e=>(0,u.pick)(e,["guid","label"])),n={preferences:JSON.stringify({customViewPresets:t,sharedViewPresets:i,viewPresetGuid:e.appliedViewPresetOption.guid}),componentTypeName:d.RxViewComponentType.ViewPresetSelector,version:"1.0",componentId:this.viewPresetSelectorGuid};return this.rxUserPreferencesService.setUiComponentPreferences(n,this.viewPresetSelectorGuid)}applyUserPreferences(e,t){return this.viewPresetSelectorGuid=e,this.get(e).pipe((0,r.map)(e=>(t.customViewPresetOptions=e.customViewPresets,e.sharedViewPresets&&(t.sharedViewPresetOptions=e.sharedViewPresets.map(e=>Object.assign(Object.assign({},e),{isShared:!0}))),t.appliedViewPresetOption=(0,u.find)(t.customViewPresetOptions,{guid:e.viewPresetGuid})||(0,u.find)(t.systemViewPresetOptions,{guid:e.viewPresetGuid})||(0,u.find)(t.sharedViewPresetOptions,{guid:e.viewPresetGuid})||t.systemViewPresetOptions[0],t)),(0,r.switchMap)(e=>this.checkSharedViewPresets(e)))}get(e){return this.rxUserPreferencesService.getUiComponentPreferences(e).pipe((0,r.map)(e=>null!=e?e:{customViewPresets:[],sharedViewPresets:[],viewPresetGuid:null}))}checkSharedViewPresets(e){return e.sharedViewPresetOptions.length?this.rxShareViewPresetService.getSharedViewPresetsForCurrentUser(this.viewPresetSelectorGuid).pipe((0,r.map)(t=>{let i=!1,n=null;if(e.sharedViewPresetOptions=e.sharedViewPresetOptions.reduce((e,n)=>{const o=t.find(e=>e.guid===n.guid);return o?(n.label!==o.label&&(n.label=o.label,i=!0),e.push(n)):i=!0,e},[]),e.appliedViewPresetOption.isShared){const t=e.sharedViewPresetOptions.find(t=>t.guid===e.appliedViewPresetOption.guid);t&&e.isSharingEnabled||(t||(n=e.appliedViewPresetOption.guid),e.appliedViewPresetOption=e.systemViewPresetOptions[0])}return{state:e,shouldUpdatePreferences:i,removedPresetGuid:n}})):(0,o.of)({state:e,shouldUpdatePreferences:!1,removedPresetGuid:null})}}ym.\u0275fac=function(e){return new(e||ym)(n["\u0275\u0275inject"](s.RxUserPreferencesService),n["\u0275\u0275inject"](vm))},ym.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ym,factory:ym.\u0275fac});class bm extends S.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.viewPresetNameFormControl=new x.FormControl(""),this.destroyed$=new o.ReplaySubject(1),this.modalData=this.activeModalRef.getData(),this.viewPresetNameFormControl.setValue(this.modalData.viewPresetName),this.viewPresetNameFormControl.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.viewPresetNameFormControl.dirty&&e===this.modalData.viewPresetName&&this.viewPresetNameFormControl.reset(this.modalData.viewPresetName)})}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}save(){this.activeModalRef.close(this.generateUniqueViewPresetName(this.viewPresetNameFormControl.value))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}isViewPresetNameUnique(e){const t=e.trim();return!this.modalData.existingViewPresetNames.some(e=>e===t)}generateUniqueViewPresetName(e){const t=e.trim();let i=t,n=1;for(;!this.isViewPresetNameUnique(i);)i=`${t}-${n++}`;return i}}bm.\u0275fac=function(e){return new(e||bm)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},bm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bm,selectors:[["rx-rename-view-preset"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:12,consts:[[1,"modal-body"],["name","viewPresetName","rx-id","view-preset-name-field","required","true","rxNoWhitespace","",3,"formControl","label","maxlength","autofocus"],["class","text-info m-0 pt-1",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"text-info","m-0","pt-1"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"adapt-rx-textfield",1),n["\u0275\u0275template"](2,Ga,3,3,"p",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"button",4),n["\u0275\u0275listener"]("click",function(){return t.save()}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",5),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.viewPresetNameFormControl)("label",t.modalData.fieldLabel)("maxlength",254)("autofocus",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isViewPresetNameUnique(t.viewPresetNameFormControl.value)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.viewPresetNameFormControl.invalid||t.viewPresetNameFormControl.pristine),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,8,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,10,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptRxTextfieldComponent,x.RequiredValidator,v.RxNoWhitespaceValidator,x.NgControlStatus,x.FormControlDirective,x.MaxLengthValidator,f.NgIf,m.AdaptButtonComponent],pipes:[p.TranslatePipe],encapsulation:2});class xm{constructor(e){this.translateService=e,this.users=[],this.remove=new n.EventEmitter,this.recordGridConfig$=this.getRecordGridConfig()}ngOnChanges(e){e.users.currentValue&&!e.users.firstChange&&this.recordGrid.api.refresh().subscribe()}getRecordGridConfig(){const e=[{fieldId:"fullName",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.grid.column.name.title")},{fieldId:"emailAddress",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.grid.column.email.title")}],t={fieldDefinitions:[{id:"fullName",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character},{id:"emailAddress",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}]};return(0,o.of)({columns:e,enableFiltering:!1,enableRowSelection:op.Multiple,recordIdField:"loginId",styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.remove.label"),style:"tertiary",iconCls:"minus_circle_o",disabled:()=>0===this.recordGrid.api.getSelectedRows().length,actions:[{name:()=>{const e=this.recordGrid.api.getSelectedRows().map(e=>e.loginId);this.remove.emit(e)}}]}],getRecordDefinition:()=>(0,o.of)(t),getData:()=>(0,o.of)({data:this.users,totalSize:this.users.length})})}}xm.\u0275fac=function(e){return new(e||xm)(n["\u0275\u0275directiveInject"](p.TranslateService))},xm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xm,selectors:[["rx-share-view-preset-users-grid"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ou,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{users:"users"},outputs:{remove:"remove"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-record-grid",0),2&e&&n["\u0275\u0275property"]("config",t.recordGridConfig$)},directives:[ou],encapsulation:2,changeDetection:0});class Cm extends S.RxModalClass{constructor(e,t,i,n,a,s,l){super(e,t),this.activeModalRef=e,this.injector=t,this.formBuilder=i,this.translateService=n,this.rxShareViewPresetService=a,this.rxCurrentUserService=s,this.rxNotificationService=l,this.maxRecipients=100,this.strings={users:{label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.users-control.label"),placeholder:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.users-control.placeholder")},addButton:this.translateService.instant("com.bmc.arsys.rx.client.common.add.label"),notifyRecipients:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.notify-recipients.label"),recipients:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.recipients.label"),savedNotification:{title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.saved-notification.title"),message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.saved-notification.message")},removedNotification:{title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.removed-notification.title"),message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.removed-notification.message")},maxRecipientsWarning:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.max-users-warning.message",{maxUserCount:this.maxRecipients})},this.form=this.formBuilder.group({users:this.formBuilder.control([]),notifyRecipients:this.formBuilder.control(!1)}),this.modalData=this.activeModalRef.getData(),this.runtimeViewModelApi=this.modalData.runtimeViewModelApi,this.selectedUsers=[],this.destroyed$=new o.ReplaySubject(1),this.currentUserLoginName=this.rxCurrentUserService.getName(),this.isSelectedUsersChanged=!1,this.search=e=>this.rxShareViewPresetService.getAutocompleteSearch(e).pipe((0,r.map)(e=>{const t=this.selectedUsers.map(e=>e.loginId),i=this.form.get("users").value.map(({data:e})=>e.loginId);return e.filter(e=>e.data.loginId!==this.currentUserLoginName&&!t.includes(e.data.loginId)&&!i.includes(e.data.loginId))}))}get isRecipientsLimitReached(){return this.form.get("users").value.length+this.selectedUsers.length>this.maxRecipients}ngOnInit(){super.ngOnInit(),this.loadExistingSharedViewPresetUsers()}loadExistingSharedViewPresetUsers(){this.modalData.currentViewPreset.userSharedViewPresetGuid&&(this.sharedViewPresetInstanceGuid=this.modalData.currentViewPreset.userSharedViewPresetGuid,this.rxShareViewPresetService.getSharedViewPresetUsers(this.sharedViewPresetInstanceGuid).subscribe(e=>{this.selectedUsers=e}))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}save(){this.selectedUsers.length?this.saveViewPreset():this.removeViewPreset()}removeViewPreset(){this.rxShareViewPresetService.deleteSharedViewPreset(this.sharedViewPresetInstanceGuid).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.strings.removedNotification.message,this.strings.removedNotification.title),this.activeModalRef.close(null)})}saveViewPreset(){this.rxShareViewPresetService.saveSharedViewPreset({runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.modalData.currentViewPreset,presetSelectorGuid:this.modalData.presetSelectorGuid,sharedUsers:this.selectedUsers},this.sharedViewPresetInstanceGuid).subscribe(e=>{this.rxNotificationService.addSuccessMessage(this.strings.savedNotification.message,this.strings.savedNotification.title),this.activeModalRef.close(e)})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}onAdd(){const e=this.form.get("users").value.map(e=>Object.assign({},e.data));this.selectedUsers=this.selectedUsers.concat(e),this.form.get("users").setValue([]),this.isSelectedUsersChanged=!0}removeSelectedUsers(e){this.selectedUsers=this.selectedUsers.filter(t=>!e.includes(t.loginId)),this.isSelectedUsersChanged=!0,this.markAsDirty()}isSaveButtonDisabled(){return!(this.sharedViewPresetInstanceGuid&&this.isSelectedUsersChanged||!this.sharedViewPresetInstanceGuid&&this.selectedUsers.length>0)}}Cm.\u0275fac=function(e){return new(e||Cm)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](x.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](vm),n["\u0275\u0275directiveInject"](s.RxCurrentUserService),n["\u0275\u0275directiveInject"](s.RxNotificationService))},Cm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Cm,selectors:[["rx-share-view-preset"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:19,consts:[[1,"modal-body"],[3,"formGroup"],[1,"row","row-no-gutters"],[1,"col"],["formControlName","users","rx-id","users-input",3,"label","placeholder","replaceModelOnWrite","suppressManual","search","selectItemTemplate","ngModelChange"],["class","warning mb-3",4,"ngIf"],[1,"col-auto","pl-0"],["adapt-button","","type","button","btn-type","secondary","rx-id","add-button",1,"add-button",3,"disabled","click"],[3,"label"],[3,"users","remove"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["selectItemTemplate",""],[1,"warning","mb-3"],["name","exclamation_triangle",1,"text-warning"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"form",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"adapt-tag-field",4),n["\u0275\u0275listener"]("ngModelChange",function(){return t.markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,za,3,1,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6),n["\u0275\u0275elementStart"](7,"button",7),n["\u0275\u0275listener"]("click",function(){return t.onAdd()}),n["\u0275\u0275elementStart"](8,"span"),n["\u0275\u0275text"](9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"adapt-rx-control-label",8),n["\u0275\u0275elementStart"](11,"rx-share-view-preset-users-grid",9),n["\u0275\u0275listener"]("remove",function(e){return t.removeSelectedUsers(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",10),n["\u0275\u0275elementStart"](13,"button",11),n["\u0275\u0275listener"]("click",function(){return t.save()}),n["\u0275\u0275text"](14),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](19,Ua,4,2,"ng-template",null,13,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](20);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",t.form),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("label",t.strings.users.label)("placeholder",t.strings.users.placeholder)("replaceModelOnWrite",!0)("suppressManual",!0)("search",t.search)("selectItemTemplate",e),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isRecipientsLimitReached),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.form.get("users").value.length||t.isRecipientsLimitReached),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](t.strings.addButton),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",t.strings.recipients),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("users",t.selectedUsers),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](15,15,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](18,17,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[x["\u0275NgNoValidate"],x.NgControlStatusGroup,x.FormGroupDirective,m.AdaptMetatagComponent,x.NgControlStatus,x.FormControlName,f.NgIf,m.AdaptButtonComponent,m.AdaptRxControlLabelComponent,xm,m.AdaptIconComponent],pipes:[p.TranslatePipe],styles:[".add-button[_ngcontent-%COMP%]{margin-top:23px}.warning[_ngcontent-%COMP%]{margin-top:-10px}[_nghost-%COMP%]  adapt-tag-field .adapt-mt-wrapper{min-height:80px;padding-right:5px}[_nghost-%COMP%]  adapt-tag-field .adapt-mt-wrapper .adapt-mt{max-height:72px!important}"]});class Sm extends S.RxModalClass{constructor(e,t,i){super(e,t),this.activeModalRef=e,this.injector=t,this.translateService=i,this.recordGridConfig$=(0,o.of)({columns:[{fieldId:"label",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.preset-name.title")},{fieldId:"ownerFullName",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.shared-by.title")}],enableFiltering:!1,enableRowSelection:op.Multiple,recordIdField:"guid",styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,getRecordDefinition:()=>(0,o.of)({fieldDefinitions:[{id:"label",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character},{id:"ownerFullName",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}]}),getData:()=>(0,o.of)({data:this.presets,totalSize:this.presets.length})}),this.modalData=this.activeModalRef.getData(),this.presets=this.modalData.newPresets}ngOnInit(){super.ngOnInit(),this.isAddButtonDisabled$=this.recordGrid.rowSelectionChanged.pipe((0,r.map)(u.isEmpty))}add(){const e=this.recordGrid.api.getSelectedRows().map(({label:e,guid:t})=>({label:e,guid:t}));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Sm.\u0275fac=function(e){return new(e||Sm)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService))},Sm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Sm,selectors:[["rx-add-shared-view-presets"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ou,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:13,consts:[[1,"modal-body"],[1,"mb-4",2,"white-space","pre-line"],[3,"config"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","add-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](4,"rx-record-grid",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275elementStart"](6,"button",4),n["\u0275\u0275listener"]("click",function(){return t.add()}),n["\u0275\u0275pipe"](7,"async"),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"button",5),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.description.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("config",t.recordGridConfig$),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](7,7,t.isAddButtonDisabled$)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.client.common.add.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](12,11,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[ou,m.AdaptButtonComponent],pipes:[p.TranslatePipe,f.AsyncPipe],encapsulation:2,changeDetection:0});class Dm extends h.BaseViewComponent{constructor(e,t,i,n,a,s,l,d,c){super(),this.changeDetectorRef=e,this.rxGuidService=t,this.rxModalService=i,this.rxUtilityModalsService=n,this.rxViewPresetSelectorUserPreferencesService=a,this.translateService=s,this.rxFeatureService=l,this.rxNotificationService=d,this.rxShareViewPresetService=c,this.api={getGuid:()=>this.guid,markAppliedViewPresetAsEdited:this.markAppliedViewPresetAsEdited.bind(this)},this.isOperationInProgressSubject=new o.BehaviorSubject(!1),this.isViewPresetEditedSubject=new o.BehaviorSubject(!1),this.viewPresetSelectorModel$=(0,o.combineLatest)([this.isOperationInProgressSubject,this.isViewPresetEditedSubject]).pipe((0,r.map)(([e,t])=>({isOperationInProgress:e,isViewPresetEdited:t}))),this.strings={deleteLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),discardChangesButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.discard-changes.button.label"),editedViewPresetTagLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.edited-view-preset-tag.label"),renameLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.rename.label"),saveLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),saveAsLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save-as.label"),shareLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share.button.label"),systemPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.system.label"),sharedPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.shared-with-me.label"),customPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.created-by-me.label"),sharedTooltip:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.shared-preset.tooltip"),addSharedViewPresets:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.title")},this.userPreferencesChangedSubject=new o.Subject,this.isSharingFeatureEnabled=this.rxFeatureService.isFeatureEnabled(fm),this.userPreferencesChangedSubject.pipe((0,r.switchMap)(()=>this.rxViewPresetSelectorUserPreferencesService.save(this.state)),(0,r.takeUntil)(this.destroyed$)).subscribe()}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.take)(1),(0,r.map)(e=>({systemViewPresetOptions:e.viewPresets,customViewPresetOptions:[],sharedViewPresetOptions:[],appliedViewPresetOption:null,isSharingEnabled:e.enableSharing&&this.isSharingFeatureEnabled})),(0,r.switchMap)(e=>this.rxViewPresetSelectorUserPreferencesService.applyUserPreferences(this.guid,e)),(0,r.tap)(({state:e,shouldUpdatePreferences:t,removedPresetGuid:i})=>{this.state=e,this.changeDetectorRef.detectChanges(),this.isOperationInProgressSubject.next(!0),i&&this.runtimeViewModelApi.deleteViewPreset(i).subscribe(),t&&this.userPreferencesChangedSubject.next()}),(0,r.switchMap)(()=>this.applyViewPreset(this.state.appliedViewPresetOption)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}ngOnDestroy(){super.ngOnDestroy(),this.isOperationInProgressSubject.complete(),this.isViewPresetEditedSubject.complete(),this.userPreferencesChangedSubject.complete()}deleteViewPreset(e){this.rxUtilityModalsService.confirm(this.translateService.instant(e.userSharedViewPresetGuid?"com.bmc.arsys.rx.client.view-components.view-preset-selector.delete-shared-view-preset-confirmation.message":"com.bmc.arsys.rx.client.view-components.view-preset-selector.delete-view-preset-confirmation.message")).then(t=>{if(t){const t=this.state.appliedViewPresetOption.guid;this.state.appliedViewPresetOption=this.state.systemViewPresetOptions[0],this.isViewPresetEditedSubject.next(!1),this.state.customViewPresetOptions=(0,u.reject)(this.state.customViewPresetOptions,{guid:t}),this.state.sharedViewPresetOptions=(0,u.reject)(this.state.sharedViewPresetOptions,{guid:t}),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.runtimeViewModelApi.applyViewPreset(this.guid,this.state.appliedViewPresetOption.guid).pipe((0,r.finalize)(()=>{(e.userSharedViewPresetGuid?this.rxShareViewPresetService.deleteSharedViewPreset(e.userSharedViewPresetGuid):(0,o.of)(null)).pipe((0,r.switchMap)(()=>this.runtimeViewModelApi.deleteViewPreset(t)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()})).subscribe()}}).catch(u.noop)}discardViewPresetChanges(){this.rxUtilityModalsService.confirm(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.discard-changes-confirmation.message")).then(e=>{if(e){this.isViewPresetEditedSubject.next(!1),this.isOperationInProgressSubject.next(!0);const e=this.state.appliedViewPresetOption;(0,o.iif)(()=>e.isShared,this.getSharedViewPresetData(e).pipe((0,r.switchMap)(t=>this.runtimeViewModelApi.discardViewPresetChanges(e.guid,t))),this.runtimeViewModelApi.discardViewPresetChanges(e.guid)).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}}).catch(u.noop)}renameViewPreset(){this.openRenamingModal(this.strings.renameLabel,!0).then(e=>{this.state.appliedViewPresetOption.label=e,this.state.customViewPresetOptions=(0,u.sortBy)(this.state.customViewPresetOptions,"label"),this.userPreferencesChangedSubject.next(),this.changeDetectorRef.detectChanges(),this.state.appliedViewPresetOption.userSharedViewPresetGuid&&this.saveSharedViewPreset().subscribe()}).catch(u.noop)}selectPreset(e){this.state.appliedViewPresetOption=e,this.isViewPresetEditedSubject.next(!1),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.applyViewPreset(e).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}saveAsViewPreset(){this.openRenamingModal(this.strings.saveAsLabel).then(e=>{const t={guid:this.rxGuidService.generate(),label:e};this.state.customViewPresetOptions.push(t),this.state.customViewPresetOptions=(0,u.sortBy)(this.state.customViewPresetOptions,"label"),this.state.appliedViewPresetOption=t,this.isViewPresetEditedSubject.next(!1),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.runtimeViewModelApi.applyViewPreset(this.guid,this.state.appliedViewPresetOption.guid).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}).catch(u.noop)}saveViewPreset(){this.isViewPresetEditedSubject.next(!1),this.isOperationInProgressSubject.next(!0);(this.state.appliedViewPresetOption.userSharedViewPresetGuid?this.saveSharedViewPreset():(0,o.of)(null)).pipe((0,r.switchMap)(()=>this.runtimeViewModelApi.saveViewPreset(this.state.appliedViewPresetOption.guid)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}shareViewPreset(){this.rxModalService.openModal({content:Cm,title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.title"),data:{runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.state.appliedViewPresetOption,presetSelectorGuid:this.guid},size:"sm"}).then(e=>{this.state.appliedViewPresetOption.userSharedViewPresetGuid=e,this.userPreferencesChangedSubject.next()}).catch(u.noop)}onAddSharedPresetsClick(){this.rxShareViewPresetService.getSharedViewPresetsForCurrentUser(this.guid).subscribe(e=>{const t=this.state.sharedViewPresetOptions.map(e=>e.guid),i=e.filter(e=>!t.includes(e.guid));i.length?this.openAddSharedPresetsModal(i):this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.no-new-presets.message"),this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.no-new-presets.title"))})}openAddSharedPresetsModal(e){this.rxModalService.openModal({content:Sm,title:this.strings.addSharedViewPresets,data:{presetSelectorGuid:this.guid,newPresets:e},size:"sm"}).then(e=>{this.state.sharedViewPresetOptions=this.state.sharedViewPresetOptions.concat(e.map(e=>Object.assign(Object.assign({},e),{isShared:!0}))),this.userPreferencesChangedSubject.next(),e.length&&this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.presets-added.message"),this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.presets-added.title"))}).catch(u.noop)}markAppliedViewPresetAsEdited(){this.isViewPresetEditedSubject.next(!0)}openRenamingModal(e,t){let i=[...this.state.customViewPresetOptions,...this.state.systemViewPresetOptions];return t&&(i=i.filter(e=>e.guid!==this.state.appliedViewPresetOption.guid)),this.rxModalService.openModal({content:bm,data:{fieldLabel:e,existingViewPresetNames:i.map(({label:e})=>e),viewPresetName:this.state.appliedViewPresetOption.label},size:"sm"})}applyViewPreset(e){return e.isShared?this.getSharedViewPresetData(e).pipe((0,r.switchMap)(t=>this.runtimeViewModelApi.applyViewPreset(this.guid,e.guid,t)),(0,r.catchError)(t=>this.handleSharedViewPresetLoadError(t,e))):this.runtimeViewModelApi.applyViewPreset(this.guid,e.guid)}saveSharedViewPreset(){return this.rxShareViewPresetService.saveSharedViewPreset({runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.state.appliedViewPresetOption,presetSelectorGuid:this.guid},this.state.appliedViewPresetOption.userSharedViewPresetGuid)}getSharedViewPresetData(e){return this.rxShareViewPresetService.getSharedViewPresetData(e.guid).pipe((0,r.map)(({viewPresetName:t,sharedViewPresets:i})=>(e.label=t,i)))}handleSharedViewPresetLoadError(e,t){return 404===e.status?(this.state.sharedViewPresetOptions=this.state.sharedViewPresetOptions.filter(e=>e.guid!==t.guid),this.runtimeViewModelApi.deleteViewPreset(t.guid).subscribe(),this.selectPreset(this.state.systemViewPresetOptions[0]),o.EMPTY):(0,o.throwError)(e)}}Dm.\u0275fac=function(e){return new(e||Dm)(n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](S.RxUtilityModalsService),n["\u0275\u0275directiveInject"](ym),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxFeatureService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](vm))},Dm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Dm,selectors:[["rx-view-preset-selector"]],inputs:{config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275ProvidersFeature"]([ym]),n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","btn-group align-items-center",4,"ngIf"],[1,"btn-group","align-items-center"],["adaptDropdown",""],["adapt-button","","adaptDropdownToggle","","type","button","btn-type","tertiary","rx-id","toggle-button",1,"text-default","font-weight-bold","text-left",3,"disabled"],["adaptDropdownMenu","","tabindex","0"],["class","dropdown-heading",4,"ngIf"],["class","dropdown-item","type","button","rx-id","system-view-preset",3,"active","click",4,"ngFor","ngForOf"],["class","badge badge-secondary extra-small mx-2",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-floppy p-2","rx-id","save-button",3,"disabled","click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-save_all_o","rx-id","save-as-button",3,"disabled","click",4,"ngIf"],["class","dropdown header-cell-menu-btn","adaptDropdown","",4,"ngIf"],["class","dropdown-item","type","button","rx-id","custom-view-preset",3,"active","click",4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-heading"],["type","button","rx-id","custom-view-preset",1,"dropdown-item",3,"click"],["name","users","class","btn-link float-end ml-2",3,"adaptTooltip",4,"ngIf"],["name","users",1,"btn-link","float-end","ml-2",3,"adaptTooltip"],[1,"dropdown-divider"],["type","button","rx-id","add-preset-button",1,"btn","btn-link","float-end","p-0","pl-1","btn-add-shared",3,"adaptTooltip","click"],["name","plus"],["class","dropdown-item","type","button","rx-id","shared-view-preset",3,"active","click",4,"ngFor","ngForOf"],["type","button","rx-id","shared-view-preset",1,"dropdown-item",3,"click"],["type","button","rx-id","system-view-preset",1,"dropdown-item",3,"click"],[1,"badge","badge-secondary","extra-small","mx-2"],["btn-type","tertiary","rx-id","save-button",1,"d-icon-left-floppy","p-2",3,"disabled","click"],["btn-type","tertiary","rx-id","save-as-button",1,"d-icon-left-save_all_o",3,"disabled","click"],["adaptDropdown","",1,"dropdown","header-cell-menu-btn"],["rx-id","more-actions-toggle-button","type","button","adaptDropdownToggle","",1,"d-icon-ellipsis","btn","btn-link","px-0",3,"disabled","showCaret"],["adaptDropdownMenu","","tabindex","0",1,"dropdown-menu"],["btn-type","tertiary","class","d-icon-left-undo_adapt dropdown-item","rx-id","discard-changes-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-save_all_o dropdown-item","rx-id","save-as-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-field_text dropdown-item","rx-id","rename-selected-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-trash_adapt dropdown-item","rx-id","remove-selected-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-share dropdown-item","rx-id","share-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","rx-id","discard-changes-button",1,"d-icon-left-undo_adapt","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","save-as-button",1,"d-icon-left-save_all_o","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","rename-selected-view-preset-button",1,"d-icon-left-field_text","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","remove-selected-view-preset-button",1,"d-icon-left-trash_adapt","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","share-view-preset-button",1,"d-icon-left-share","dropdown-item",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,cs,2,1,"ng-container",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.viewPresetSelectorModel$))},directives:[f.NgIf,m.AdaptDropdownDirective,m.AdaptButtonComponent,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,f.NgForOf,m.AdaptIconComponent,m.AdaptTooltipDirective],pipes:[f.AsyncPipe],styles:["button[rx-id=toggle-button][_ngcontent-%COMP%], button[rx-id=shared-view-preset][_ngcontent-%COMP%]{white-space:normal;word-break:break-word}.preset-selector[_ngcontent-%COMP%]   .dropdown-heading[_ngcontent-%COMP%]{padding:.375rem .875rem;font-weight:bold}.preset-selector[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding-left:1.75rem}.btn-add-shared[_ngcontent-%COMP%]{margin-top:-1px}"],changeDetection:0});class Im{adaptDefinition(e){e.componentDefinitions.sort((e,t)=>e.propertiesByName.index-t.propertiesByName.index).forEach(e=>{Object.assign(e.propertiesByName,{guid:e.guid,isSystem:!0})})}}Im.\u0275fac=function(e){return new(e||Im)},Im.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Im,factory:Im.\u0275fac});class Rm{}Rm.\u0275fac=function(e){return new(e||Rm)},Rm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rm,declarations:[Cm,xm],imports:[m.AdaptMetatagModule,m.AdaptButtonModule,x.ReactiveFormsModule,p.TranslateModule,su,f.CommonModule,m.AdaptIconModule,m.AdaptRxLabelModule]}),Rm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptMetatagModule,m.AdaptButtonModule,x.ReactiveFormsModule,p.TranslateModule,su,f.CommonModule,m.AdaptIconModule,m.AdaptRxLabelModule]]});class wm{}wm.\u0275fac=function(e){return new(e||wm)},wm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wm,declarations:[Sm],imports:[f.CommonModule,p.TranslateModule,m.AdaptButtonModule,su]}),wm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,p.TranslateModule,m.AdaptButtonModule,su]]});class Em{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.viewPresetSelectorAdapterService=t,e.registerRuntimeAdapter(d.RxViewComponentType.ViewPresetSelector,this.viewPresetSelectorAdapterService)}}Em.\u0275fac=function(e){return new(e||Em)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Im))},Em.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Em,declarations:[bm,Dm],imports:[m.AdaptButtonModule,m.AdaptDropdownModule,m.AdaptRxTextfieldModule,m.AdaptTooltipModule,f.CommonModule,x.ReactiveFormsModule,v.RxUniqueValidatorModule,p.TranslateModule,v.RxNoWhitespaceValidatorModule,Rm,wm,m.AdaptIconModule],exports:[Dm]}),Em.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Im],imports:[[m.AdaptButtonModule,m.AdaptDropdownModule,m.AdaptRxTextfieldModule,m.AdaptTooltipModule,f.CommonModule,x.ReactiveFormsModule,v.RxUniqueValidatorModule,p.TranslateModule,v.RxNoWhitespaceValidatorModule,Rm,wm,m.AdaptIconModule]]});class Fm extends l.InspectorWidgetBase{constructor(e,t){super(e),this.injector=e,this.translateService=t,this.editedPreset=null,this.presets=[],this.strings={cannotBeBlank:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:"View preset name"}),duplicateValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.duplicate-value.message")},this.itemValidationFn=this.itemValidation.bind(this)}ngOnInit(){this.designerItemModel.sandbox.getChildComponents().pipe((0,r.first)(),(0,r.takeUntil)(this.designerItemModel.sandbox.destroyed$)).subscribe(e=>{e.sort((e,t)=>e.data.index-t.data.index),this.presets=e.map(e=>({name:e.data.label,id:e.guid}))})}onPresetsListChange(e){e.forEach(e=>{e.name=(0,u.trim)(e.name)}),this.presets=(0,u.cloneDeep)(e);const t=e.map(({name:e,id:t},i)=>({type:d.RxViewComponentType.ViewPreset,guid:String(t),data:{label:e,index:i}}));this.designerItemModel.sandbox.setChildren(t)}onListItemAdd(){this.presets.push(this.presets.shift())}onListItemEdit(e){this.editedPreset=e}onListItemUpdate(){this.editedPreset=null}focus(){this.adaptRxListBuilderComponent.inputEl.nativeElement.focus()}itemValidation(e,t,i){let n=null;const o=(0,u.chain)(t).reject(e=>i&&e.id===this.editedPreset.id).map("name").value(),r=(0,u.trim)(e);return 0===r.length?n=this.strings.cannotBeBlank:o.includes(r)&&(n=this.strings.duplicateValue),n}}Fm.\u0275fac=function(e){return new(e||Fm)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService))},Fm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fm,selectors:[["rx-presets-list-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptRxListBuilderComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptRxListBuilderComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:6,consts:[[3,"label","ngModel","hideListAreaLabel","texts","readonly","itemValidation","ngModelChange","listItemAdd","listItemEdit","listItemUpdate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-list-builder",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.presets=e})("ngModelChange",function(e){return t.onPresetsListChange(e)})("listItemAdd",function(){return t.onListItemAdd()})("listItemEdit",function(e){return t.onListItemEdit(e)})("listItemUpdate",function(){return t.onListItemUpdate()}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("label","View preset names")("ngModel",t.presets)("hideListAreaLabel",!0)("texts",t.options.texts)("readonly",t.isDisabled)("itemValidation",t.itemValidationFn)},directives:[m.AdaptRxListBuilderComponent,x.NgControlStatus,x.NgModel],styles:[""]});class Mm extends c.ViewDesignerComponentModel{constructor(){super(...arguments),this.presetComponentGuids$=this.sandbox.getChildComponentGuids(),this.otherPresetSelectorsNames$=this.sandbox.getComponentsByType(d.RxViewComponentType.ViewPresetSelector).pipe((0,r.map)(e=>e.filter(e=>e.guid!==this.sandbox.guid).map(e=>e.data.name.trim()))),this.label$=this.sandbox.getChildComponents().pipe((0,r.map)(e=>e.sort((e,t)=>e.data.index-t.data.index)),(0,r.map)(e=>e[0]?e[0].data.label:"No view presets added"),(0,r.takeUntil)(this.sandbox.destroyed$)),this.rxFeatureService=this.injector.get(s.RxFeatureService)}static getInitialProperties(e){return Object.assign(Object.assign({name:"View preset selector",styles:null,enableSharing:!1},d.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}rxInit(){this.sandbox.updateInspectorConfig(this.setInspectorConfig()),(0,o.combineLatest)([this.sandbox.componentProperties$,this.presetComponentGuids$]).pipe((0,r.withLatestFrom)(this.otherPresetSelectorsNames$),(0,r.map)(([[e,t],i])=>this.validate(e,t,i)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)})}setInspectorConfig(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",required:!0}},{component:Fm,widgetName:"presetsList"},this.rxFeatureService.isFeatureEnabled(fm)?{name:"enableSharing",component:l.SwitchFormControlComponent,options:{label:"Enable sharing"}}:null,(0,c.getAvailableOnDevicesInspectorConfig)(),(0,c.getStylesFieldInspectorConfig)()].filter(Boolean)}]}}validate(e,t,i){let n=[];const o=e.name.trim();return o?i.includes(o)&&n.push(this.sandbox.createError("Name must be unique.","name")):n.push(this.sandbox.createError("Name cannot be blank.","name")),t.length||n.push(this.sandbox.createError("At least one view preset must be added.","presetsList")),n=n.concat((0,c.validateStandardProps)(e)),n}}class Tm{}Tm.\u0275fac=function(e){return new(e||Tm)},Tm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Tm,selectors:[["rx-view-preset-selector-design"]],inputs:{model:"model"},decls:3,vars:3,consts:[["adapt-button","","btn-type","tertiary","type","button","readonly","",1,"dropdown-toggle","text-default","font-weight-bold","text-left"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,t.model.label$),"\n"))},directives:[m.AdaptButtonComponent],pipes:[f.AsyncPipe],styles:["button[_ngcontent-%COMP%]{white-space:normal;word-break:break-word}"]});class Om{}Om.\u0275fac=function(e){return new(e||Om)},Om.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Om,declarations:[Fm],imports:[f.CommonModule,m.AdaptRxListBuilderModule,x.FormsModule],exports:[Fm]}),Om.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,m.AdaptRxListBuilderModule,x.FormsModule]]});class Nm{}Nm.\u0275fac=function(e){return new(e||Nm)},Nm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Nm,declarations:[Tm],imports:[f.CommonModule,Om,m.AdaptButtonModule]}),Nm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[f.CommonModule,Om,m.AdaptButtonModule]]});class Am{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:d.RxViewComponentType.ViewPresetSelector,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Dm),properties:[{name:"styles"},{name:"enableSharing",type:d.ViewComponentPropertyType.Boolean,designType:d.ViewComponentPropertyType.Boolean},d.RX_AVAILABLE_ON_DEVICES_PROP_DESC],isContainerComponent:!0,name:"View preset selector",group:c.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"screens_triangle_down_circle",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Tm),designComponentModel:Mm,bundleId:s.RX_APPLICATION.platformBundleId},{type:d.RxViewComponentType.ViewPreset,configPropertyName:"viewPresets",isDataComponent:!0,properties:[{name:"label",localizable:!0},{name:"index",designType:d.ViewComponentPropertyType.Number,type:d.ViewComponentPropertyType.Number}]})}}Am.\u0275fac=function(e){return new(e||Am)(n["\u0275\u0275inject"](d.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Am.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Am,imports:[Nm,Em]}),Am.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Nm,Em]]});class Pm extends h.BaseViewComponent{constructor(e,t,i){super(),this.translateService=e,this.rxNotificationService=t,this.rxGainsightConfiguratorService=i,this.deploymentTypeOptions=l.RX_GAINSIGHT.deploymentTypes,this.environmentTypeOptions=l.RX_GAINSIGHT.environmentTypes,this.vm$=this.rxGainsightConfiguratorService.getGainsightConfiguration(s.RX_APPLICATION.innovationStudioBundleId).pipe((0,r.take)(1),(0,r.filter)(e=>Boolean(e)),(0,r.map)(e=>e.settings),(0,r.map)(e=>({deploymentTypeOptions:this.deploymentTypeOptions.filter(t=>t.name===e.deploymentType),environmentTypeOptions:[e.environmentType],useAdaptRadar:e.useAdaptRadar,loadGainsightFromBmcIt:e.loadGainsightFromBmcIt,adaptAgreementState:{organizationPerformance:e.enableGainsight,accountMarketing:!1,accountPerformance:!1,organizationMarketing:!1}})),(0,r.shareReplay)(1))}optionFormatter(e){return e.name}save(){this.vm$.pipe((0,r.take)(1),(0,r.map)(e=>Object.assign(Object.assign({},e),{deploymentType:e.deploymentTypeOptions[0].id,environmentType:e.environmentTypeOptions[0],enableGainsight:e.adaptAgreementState.organizationPerformance})),(0,r.switchMap)(e=>this.rxGainsightConfiguratorService.saveGainsightConfiguration(e))).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.gainsight.gainsight-settings-saved.success.message"))})}}Pm.\u0275fac=function(e){return new(e||Pm)(n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](l.RxGainsightConfiguratorService))},Pm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pm,selectors:[["rx-gainsight-admin-opt-in"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[["class","p-0",4,"ngIf","ngIfElse"],["emptyStateTemplate",""],[1,"p-0"],[1,"mt-1","container"],[1,"text-logo"],["rx-id","enable-gainsight",3,"showOrganizationSettings","showMarketingSection","multiProductUsage","showShadow","state","stateChange"],[1,"pt-4","pl-0","col-md-4",3,"hidden"],["label","Use ADAPT Radar","name","useAdaptRadar","rx-id","use-adapt-radar",3,"isLabelBefore","size","ngModel","ngModelChange"],[1,"pt-4","pl-0","col-md-4"],["name","loadGainsightFromBmcIt","rx-id","load-gainsight-from-bmc",3,"isLabelBefore","size","label","ngModel","ngModelChange"],["name","deploymentType","rx-id","deployment-type",1,"col-md-3","pt-4","pl-0",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","environmentType","rx-id","environment-type",1,"col-md-3","pt-4","pl-0",3,"label","options","ngModel","ngModelChange"],[1,"modal-footer","mt-4"],["rx-id","save-button","adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"click"],[1,"d-flex","align-items-center","justify-content-center","h-100"],["type","config",1,"w-100",3,"label"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,ps,21,32,"ng-container",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,us,3,3,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,2,t.vm$))("ngIfElse",e)}},directives:[f.NgIf,m.AdaptAgreementCardComponent,m.AdaptRxSwitchComponent,x.NgControlStatus,x.NgModel,m.AdaptRxSelectComponent,m.AdaptButtonComponent,m.AdaptEmptyStateComponent],pipes:[f.AsyncPipe,p.TranslatePipe],styles:["[_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content div:nth-of-type(2)>adapt-rx-switch, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content hr:nth-of-type(2)~div, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content h4, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content hr:nth-of-type(3){display:none}"],changeDetection:0});class jm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-gainsight-admin-opt-in",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Pm),name:"Gainsight Admin Opt In",hidden:!0,availableInBundles:[s.RX_APPLICATION.settingsBundleId]})}}jm.\u0275fac=function(e){return new(e||jm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxViewComponentRegistryService))},jm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:jm,declarations:[Pm],imports:[p.TranslateModule,m.AdaptAgreementModule,m.AdaptRxSelectModule,x.FormsModule,m.AdaptRxSwitchModule,f.CommonModule,m.AdaptButtonModule,m.AdaptEmptyStateModule]}),jm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[p.TranslateModule,m.AdaptAgreementModule,m.AdaptRxSelectModule,x.FormsModule,m.AdaptRxSwitchModule,f.CommonModule,m.AdaptButtonModule,m.AdaptEmptyStateModule]]});class _m{}_m.\u0275fac=function(e){return new(e||_m)},_m.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_m,imports:[Gu,zu,lm,Uu,Hu,Oc,pm,Ku,Ju,Zu,Wu,Xu,tm,mm,rm,Am,jm]}),_m.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Gu,zu,lm,Uu,Hu,Oc,pm,Ku,Ju,Zu,Wu,Xu,tm,mm,rm,Am,jm]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-designer-page.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxViewDesignerPageModule:()=>C,ViewDesignerPageComponent:()=>x});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),l=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),d=i("./node_modules/@angular/router/fesm2015/router.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),p=i("rxjs"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),m=i("lodash"),f=i("./node_modules/rxjs/_esm2015/operators/index.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-approval-components.js"),y=i("./node_modules/@helix/platform/fesm2015/helix-platform-dataload-components.js");function b(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-view-designer",1),o["\u0275\u0275listener"]("viewDefinitionSaved",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onViewDefinitionSaved(t)})("viewDefinitionErrorLoading",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onViewDefinitionErrorLoading()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCloseDesigner()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configuration",e.configuration)}}class x{constructor(e,t,i,n,o,r,a,s){this.activatedRoute=e,this.bundleCacheService=t,this.definitionNameService=i,this.rxUtilityModalsService=n,this.rxPageTitleService=o,this.router=r,this.translateService=a,this.rxComponentCanDeactivateGuard=s}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=(0,p.combineLatest)([this.activatedRoute.params,this.activatedRoute.queryParams.pipe((0,f.pluck)("layoutTemplate"))]).subscribe(([{definitionName:e,bundleId:t},i])=>{this.bundleCacheService.bundleId=t||this.definitionNameService.getBundleId(e),this.isNewView=!e,this.configuration=Object.assign(Object.assign({},this.configuration),{viewDefinitionName:e,bundleId:this.bundleCacheService.bundleId,layoutTemplate:(0,m.toNumber)(i)||h.RX_VIEW_DEFINITION.defaultLayoutTemplateId,paletteComponentsPredicate:e=>!(0,m.values)(h.RX_SHELL.navBar).includes(e.type)}),this.rxPageTitleService.set([this.definitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.view-designer.title")])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}onViewDefinitionSaved(e){this.isNewView&&this.router.navigate(["edit",e],{relativeTo:this.activatedRoute.parent})}onViewDefinitionErrorLoading(){this.router.navigate(["new",this.bundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}onCloseDesigner(){this.router.navigate([c.RX_APPLICATION.innovationStudioBundleId,this.bundleCacheService.bundleId,"view-definitions"])}canDeactivate(){var e,t;return null===(t=null===(e=this.viewDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}}x.\u0275fac=function(e){return new(e||x)(o["\u0275\u0275directiveInject"](d.ActivatedRoute),o["\u0275\u0275directiveInject"](c.RxBundleCacheService),o["\u0275\u0275directiveInject"](c.RxDefinitionNameService),o["\u0275\u0275directiveInject"](u.RxUtilityModalsService),o["\u0275\u0275directiveInject"](c.RxPageTitleService),o["\u0275\u0275directiveInject"](d.Router),o["\u0275\u0275directiveInject"](l.TranslateService),o["\u0275\u0275directiveInject"](c.RxComponentCanDeactivateGuard))},x.\u0275cmp=o["\u0275\u0275defineComponent"]({type:x,selectors:[["rx-view-designer-page"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](s.RxViewDesignerComponent,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.viewDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"configuration","viewDefinitionSaved","viewDefinitionErrorLoading","closeDesigner",4,"ngIf"],[3,"configuration","viewDefinitionSaved","viewDefinitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,b,1,1,"rx-view-designer",0),2&e&&o["\u0275\u0275property"]("ngIf",t.configuration)},directives:[n.NgIf,s.RxViewDesignerComponent],styles:["[_nghost-%COMP%]{display:flex;height:100%}"]});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=o["\u0275\u0275defineNgModule"]({type:C,declarations:[x],imports:[n.CommonModule,l.TranslateModule,r.AdaptModalModule,s.ViewDesignerModule,g.ViewComponentsModule,a.ViewActionsDesignModule,v.ApprovalConsoleModule,y.DataloadModule],exports:[x]}),C.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,l.TranslateModule,r.AdaptModalModule,s.ViewDesignerModule,g.ViewComponentsModule,a.ViewActionsDesignModule,v.ApprovalConsoleModule,y.DataloadModule]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionListControlComponent:()=>vi,ActionListControlModule:()=>yi,ActionListEditorDialogComponent:()=>hi,ActionListEditorDialogModule:()=>gi,ActionListWidgetComponent:()=>Si,ActionListWidgetModule:()=>Di,CanvasItemApi:()=>zt,CanvasItemColumnComponent:()=>Qt,CanvasItemComponent:()=>Xt,CanvasItemContainerComponent:()=>Kt,CanvasOutletComponent:()=>Jt,CanvasOutletHelperService:()=>Ht,DesignerComponent:()=>Yt,DesignerModule:()=>ri,DropComponentData:()=>Ut,NamedListFilterExpressionConfigurator:()=>ci,RX_AVAILABLE_ON_DEVICES_OPTIONS:()=>Ri,RX_VIEW_DESIGNER:()=>ei,RX_VIEW_MODEL:()=>ii,RuntimeViewParamsModalComponent:()=>si,RuntimeViewParamsModalModule:()=>li,RxComponentPermissionEditorWidgetComponent:()=>bi,RxComponentPermissionEditorWidgetModule:()=>xi,RxViewActionExpressionConfigurator:()=>di,RxViewActionValidatorService:()=>Oi,RxViewComponentExpressionConfigurator:()=>Vt,RxViewCustomizationOptionsComponent:()=>kt,RxViewCustomizationOptionsModule:()=>Ci,RxViewDataDictionaryService:()=>jt,RxViewDesignerActionModel:()=>ui,RxViewDesignerComponent:()=>ni,RxViewDesignerDefaultActionModel:()=>mi,RxViewDesignerHelperService:()=>Zt,RxViewDesignerPaletteModule:()=>ai,RxViewExpressionConfigurator:()=>_t,RxViewExpressionValidatorService:()=>Pt,RxViewModel:()=>Lt,RxViewRevertCustomizationComponent:()=>Bt,RxViewRevertCustomizationModule:()=>$t,ViewDesignerCanvasComponent:()=>Wt,ViewDesignerCanvasItemApiToken:()=>Gt,ViewDesignerCanvasModule:()=>oi,ViewDesignerComponentModel:()=>Ii,ViewDesignerFacade:()=>Et,ViewDesignerModule:()=>Yi,ViewDesignerPaletteComponent:()=>ti,getAvailableOnDevicesInspectorConfig:()=>wi,getDisabledFieldInspectorConfig:()=>Fi,getHiddenFieldInspectorConfig:()=>Ei,getStandardPropsInspectorConfigs:()=>Ti,getStylesFieldInspectorConfig:()=>Mi,validateAvailableOnDevicesProp:()=>Nt,validateCssClassName:()=>Tt,validateCssClassNames:()=>Ot,validateStandardProps:()=>At});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),u=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),m=i("lodash"),f=i("rxjs"),h=i("./node_modules/rxjs/_esm2015/operators/index.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),v=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),y=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),b=i("./node_modules/@angular/forms/fesm2015/forms.js"),x=i("./node_modules/@angular/common/fesm2015/common.js"),C=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),S=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),D=i("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),I=i("./node_modules/tslib/tslib.es6.js");const R=["container"];function w(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-canvas-item",1),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.layout)("isReadOnly",e.isReadOnly)}}function E(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",9),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().remove(t,i)}),n["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275listener"]("cdkDragEntered",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDragEntered(t)})("cdkDragStarted",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDragStarted(t)}),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275listener"]("click",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onSelectComponent(t,i)}),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementStart"](3,"div",4),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275element"](5,"span",5),n["\u0275\u0275elementStart"](6,"span",6),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,E,1,0,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](9,"rx-canvas-item",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("canvas-item-wrapper mw-100 canvas-",e.descriptor.type,""),n["\u0275\u0275property"]("cdkDragData",i.getViewComponentDragData(e))("cdkDragDisabled",i.isReadOnly||(null==e.descriptor.options?null:e.descriptor.options.static)),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",n["\u0275\u0275pipeBind1"](2,12,e.isSelected$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",!n["\u0275\u0275pipeBind1"](4,14,e.isSelected$)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!(i.isReadOnly||null!=e.descriptor.options&&e.descriptor.options.static)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("layout",e)("isReadOnly",i.isReadOnly)}}const M=function(e){return{columnIndex:e}},T=function(e){return{"col-border":e}},O=function(e){return{"mb-3":e}};function N(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"rx-canvas-item-column",3),n["\u0275\u0275listener"]("dropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDropListDropped(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=t.last,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMap"](e.span?"col-"+e.span:"col"),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](9,T,!o)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](11,O,!o))("isReadOnly",r.isReadOnly)("colIndex",i)("column",e)("layout",r.layout)}}function A(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",1),n["\u0275\u0275listener"]("beforeViewComponentDrop",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().viewDesignerCanvasComponent.beforeComponentDropInRoot.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("border",i.canvasItemComponent.layout.outlets.length>1)("default-outlet",e.name===i.defaultOutletName),n["\u0275\u0275property"]("name",e.name)}}function P(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275element"](2,"span"),n["\u0275\u0275elementStart"](3,"span",9),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",i.getViewComponentDragData(e)),n["\u0275\u0275attribute"]("rx-id",e.type),n["\u0275\u0275advance"](2),n["\u0275\u0275classMapInterpolate1"]("item-image d-icon-",e.icon||"wall",""),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("title",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function j(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-accordion-tab",4),n["\u0275\u0275elementStart"](1,"div",5),n["\u0275\u0275template"](2,P,5,7,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("title",e.name)("isOpen",!0),n["\u0275\u0275attribute"]("rx-id",i.stringService.toRxId(e.name)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("cdkDropListConnectedTo",i.allowedDropListIds),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.components)("ngForTrackBy",i.trackByNameFn)}}const _=function(){return[]},V=function(e){return{multiselect:!0,tabs:e}},k=["viewPropertyInspector"],B=["viewComponentPropertyInspector"];function $(e,t){if(1&e&&(n["\u0275\u0275element"](0,"rx-view-designer-palette",19),n["\u0275\u0275pipe"](1,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("components",n["\u0275\u0275pipeBind1"](1,2,e.paletteComponents$))("allowedDropListIds",e.canvasDndListIds)}}const L=function(){return{content:"There are no view components to display. View with a Page view component cannot contain any other view components.",variant:"info",type:"inline"}};function G(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-alert",20),2&e&&n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction0"](1,L))}const z=function(){return{content:"This view is not editable. There are no view components to display.",variant:"info",type:"inline"}};function U(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-alert",20),2&e&&n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction0"](1,z))}function q(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-code-viewer",21),n["\u0275\u0275pipe"](1,"json"),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("code",n["\u0275\u0275pipeBind1"](1,4,n["\u0275\u0275pipeBind1"](2,6,e.viewDesignerFacade.viewDefinition$)))("lang","javascript")("hasToolbar",!1)("theme","light")}}const X=function(e){return{content:e,variant:"info",type:"inline"}};function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"adapt-rx-textfield",5),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().inputParams[i]=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.first,o=t.index,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e)("autofocus",i)("ngModel",r.inputParams[e]),n["\u0275\u0275attribute"]("rx-id","input-param-"+(o+1))}}function H(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",25),n["\u0275\u0275elementStart"](1,"div",26),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](4).addAction(t.data)}),n["\u0275\u0275elementStart"](2,"button",27),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](4).addAction(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",28),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.data.label)}}function Q(e,t){if(1&e&&n["\u0275\u0275template"](0,H,5,2,"div",24),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",e.data)}}function K(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",21),n["\u0275\u0275elementStart"](1,"adapt-tree",22),n["\u0275\u0275template"](2,Q,1,1,"ng-template",23),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListConnectedTo","selected-action-list"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e)("wrap",t.treeWrap)}}function J(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275element"](1,"adapt-empty-state",30),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.action-list.available-actions.empty-state.message")))}function Y(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275template"](1,K,3,3,"div",19),n["\u0275\u0275template"](2,J,3,3,"ng-template",null,20,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.length)("ngIfElse",i)}}function Z(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",5),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",16),n["\u0275\u0275template"](6,Y,4,2,"div",17),n["\u0275\u0275pipe"](7,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,2,"com.bmc.arsys.rx.client.view-components.action-list.available-actions.title")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](7,4,e.availableActionTreeNodes$))}}function ee(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"button",32),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",33),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function te(e,t){1&e&&n["\u0275\u0275element"](0,"div",44)}function ie(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e[i.name]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e[i.name]," ")}}function ne(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",46),n["\u0275\u0275elementStart"](1,"div",47),n["\u0275\u0275elementStart"](2,"button",48),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveAction(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",49),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveAction(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.removeAction(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",34,35),n["\u0275\u0275template"](2,te,1,0,"div",36),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",37),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",38),n["\u0275\u0275elementStart"](5,"div",39),n["\u0275\u0275elementStart"](6,"div",40),n["\u0275\u0275template"](7,ie,2,2,"div",41),n["\u0275\u0275pipe"](8,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,ne,7,5,"div",42),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"rx-form-builder",43),n["\u0275\u0275listener"]("modelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit,o=n["\u0275\u0275nextContext"]();return i.model.sandbox.updateActionProperties(t),o.markEditorAsDirty()})("editorEvent",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit,o=n["\u0275\u0275reference"](1);return n["\u0275\u0275nextContext"]().onEvent(t,i.model,o)}),n["\u0275\u0275pipe"](11,"async"),n["\u0275\u0275pipe"](12,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](8,11,i.actionLabelsMap$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",n["\u0275\u0275pipeBind1"](11,13,e.config$))("model",n["\u0275\u0275pipeBind1"](12,15,e.model.sandbox.actionProperties$))("isReadOnly",i.config.isReadOnly)}}function re(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275element"](1,"adapt-empty-state",51),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.empty-state.message")))}function ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",52),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](1,2,e.isSaveButtonDisabled$)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.common.save.label")," ")}}function se(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275element"](1,"span",7),n["\u0275\u0275element"](2,"adapt-icon",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip)}}function le(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1,"No actions added."),n["\u0275\u0275elementEnd"]())}function de(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeAction(t)}),n["\u0275\u0275elementEnd"]()}}function ce(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",12),n["\u0275\u0275elementStart"](1,"strong",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).editAction(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,de,1,0,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](i.actionLabelsMap[e.data.name]),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isDisabled)}}function pe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",10),n["\u0275\u0275template"](1,ce,5,2,"li",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectedActions)}}function ue(e,t){const i=t[e];return t[null==i?void 0:i.parentGuid]}function me(e,t){const i=[e];let n=ue(e,t),o=n?n.guid:null;for(;o;)i.unshift(o),n=ue(o,t),o=n?n.guid:null;return i}function fe(e,t){if(t.layout){if(p.RxViewLayout.hasChild(t.layout,e))return!0}return!!t.childDataComponentGuids&&(0,m.includes)(t.childDataComponentGuids,e)}function he(e,t,i,n,o=0,r=0){const a=Object.assign({},e);return a.layout={outlets:e.layout.outlets.map(e=>{if(e.name===i){const i=[...e.columns];return n=isFinite(n)?n:i[o].children.length,i[o]||(i[o]={children:[]},r&&(i[o].span=r)),i[o]={children:[...i[o].children.slice(0,n),t,...i[o].children.slice(n)],span:i[o].span},Object.assign(Object.assign({},e),{columns:i})}return e})},a}function ge(e,t){const i=Object.assign({},t);return(0,m.some)(i.childDataComponentGuids,t=>e===t)&&(i.childDataComponentGuids=i.childDataComponentGuids.filter(t=>t!==e)),t.layout&&p.RxViewLayout.hasChild(t.layout,e)&&(i.layout=p.RxViewLayout.removeChildFromLayout(t.layout,e)),i}function ve(e){const t=[];return e.childDataComponentGuids&&t.push(...e.childDataComponentGuids),e.layout&&t.push(...p.RxViewLayout.getViewLayoutChildGuids(e.layout)),(0,m.uniq)(t)}function ye(e,t){const i=ve(e);return i.reduce((e,i)=>(e.push(...ye(t[i],t)),e),i)}class be{constructor(){this.componentIcon="d-icon-file_o",this.componentPropertyIcon="d-icon-file_o_gear",this.settablePropertiesIcon="d-icon-arrow_right_square_input",this.actionOutputIcon="d-icon-arrow_chart"}getActionOutputDataDictionaryBranch(e,t){return{label:e,icon:"d-icon-arrow_chart",children:(0,m.map)(t,e=>this.buildDataDictionaryBranch(e,this.actionOutputIcon))}}getComponentCommonDataDictionaryBranch(e){return Object.assign(Object.assign({},e),{icon:this.componentIcon,children:(0,m.flow)(e=>(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,this.componentPropertyIcon)),m.compact)(e.children)})}getSettablePropertiesDataDictionary(e){return(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,this.settablePropertiesIcon))}buildDataDictionaryBranch(e,t){const i=Object.assign({},e);return e.expression&&(i.icon=t),e.children&&(i.children=(0,m.flow)(e=>(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,t)),m.compact)(e.children)),i}}be.\u0275fac=function(e){return new(e||be)},be.\u0275prov=n["\u0275\u0275defineInjectable"]({token:be,factory:be.\u0275fac,providedIn:"root"});class xe{constructor(){this.componentsCommon=null,this.componentsCommonSubject=new f.ReplaySubject(1),this.componentsCommon$=this.componentsCommonSubject.asObservable(),this.viewCommon=null,this.viewCommonSubject=new f.ReplaySubject(1),this.viewCommon$=this.viewCommonSubject.asObservable(),this.actionsOutput=[],this.actionsOutputSubject=new f.ReplaySubject(1),this.actionsOutput$=this.actionsOutputSubject.asObservable(),this.settableProperties=null,this.settablePropertiesSubject=new f.ReplaySubject(1),this.settableProperties$=this.settablePropertiesSubject.asObservable()}setCommonDataDictionaryBranch(e,t){this.setComponentCommon((0,m.isEmpty)(t)?(0,m.omit)(this.componentsCommon,[e]):Object.assign(Object.assign({},this.componentsCommon),{[e]:t}))}setViewCommonDataDictionaryBranch(e){this.setViewCommon(e)}setSettablePropertiesDataDictionary(e){this.setSettableProperties(Object.assign(Object.assign({},this.settableProperties),e.reduce((e,{guid:t,componentName:i,dataDictionary:n})=>(e[t]={componentName:i,dataDictionary:n},e),{})))}removeDataDictionaryForComponents(e){e.some(e=>(0,m.has)(this.componentsCommon,e))&&this.setComponentCommon((0,m.omit)(this.componentsCommon,e)),e.some(e=>(0,m.has)(this.settableProperties,e))&&this.setSettableProperties((0,m.omit)(this.settableProperties,e))}setActionOutputDataDictionaryBranch(e,t,i){this.setActionsOutput((0,m.flow)(n=>[...(0,m.reject)(n,{guid:e}),{guid:e,index:t,dataDictionaryBranch:i}],e=>(0,m.sortBy)(e,"index"))(this.actionsOutput))}updateActionOutputDataDictionaryBranchOrder(e){this.setActionsOutput((0,m.flow)(t=>(0,m.map)(t,t=>Object.assign(Object.assign({},t),{index:e[t.guid]})),e=>(0,m.sortBy)(e,"index"))(this.actionsOutput))}removeActionOutputDataDictionaryBranch(e){this.setActionsOutput((0,m.reject)(this.actionsOutput,{guid:e}))}removeAllActionOutputDataDictionaryBranches(){this.setActionsOutput(null)}clear(){this.setComponentCommon(null),this.setViewCommon(null),this.setSettableProperties(null),this.setActionsOutput([])}setComponentCommon(e){this.componentsCommon=e,this.componentsCommonSubject.next(this.componentsCommon)}setViewCommon(e){this.viewCommon=e,this.viewCommonSubject.next(this.viewCommon)}setActionsOutput(e){this.actionsOutput=e,this.actionsOutputSubject.next(this.actionsOutput)}setSettableProperties(e){this.settableProperties=e,this.settablePropertiesSubject.next(this.settableProperties)}}xe.\u0275fac=function(e){return new(e||xe)},xe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:xe,factory:xe.\u0275fac,providedIn:"root"});class Ce{constructor(){this.onChangeSubject=new f.Subject,this.configs=new Map,this.onChange$=this.onChangeSubject.asObservable()}clear(){this.configs.clear()}set(e,t){this.configs.set(e,t),this.onChangeSubject.next({guid:e,config:t})}get(e){return this.configs.get(e)}delete(e){this.onChangeSubject.next({guid:e,config:null}),this.configs.delete(e)}}Ce.\u0275fac=function(e){return new(e||Ce)},Ce.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ce,factory:Ce.\u0275fac,providedIn:"root"});const Se=(0,y.createAction)("[View Component] Components Removed",(0,y.props)()),De=(0,y.createAction)("[View Component] Initialize Component Models",(0,y.props)()),Ie=(0,y.createAction)("[View Component] Initialize Data Component Models",(0,y.props)()),Re=(0,y.createAction)("[View Component] Set Validation Issues",(0,y.props)()),we=(0,y.createAction)("[View Component] Set Expression Validation Issues",(0,y.props)()),Ee=(0,y.createAction)("[View Component] Set Component Properties",(0,y.props)()),Fe=(0,y.createAction)("[View Component] Set Child Components",(0,y.props)()),Me=(0,y.createAction)("[View Component] Set Breadcrumbs",(0,y.props)()),Te=(0,y.createAction)("[View Component] Select Component",(0,y.props)()),Oe=(0,y.createAction)("[View Component] Set Component Layout",(0,y.props)()),Ne=(0,y.createAction)("[View Component] Move Component",(0,y.props)()),Ae=(0,y.createAction)("[View Component] Insert Component",(0,y.props)()),Pe=(0,y.createAction)("[View Component] Add New Components",(0,y.props)()),je=(0,y.createAction)("[View Component] Update Component Model",(0,y.props)()),_e=(0,y.createAction)("[View Component] Remove Components",(0,y.props)());class Ve{constructor(e){this.store$=e}dispatch(e){this.store$.dispatch(e)}}Ve.\u0275fac=function(e){return new(e||Ve)(n["\u0275\u0275inject"](y.Store))},Ve.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ve,factory:Ve.\u0275fac,providedIn:"root"});const ke=(0,y.createAction)("[View Designer] View Definition Save Success",(0,y.props)()),Be=(0,y.createAction)("[View Designer] View Definition Save Error"),$e=(0,y.createAction)("[View Designer] View Definition Load Success",(0,y.props)()),Le=(0,y.createAction)("[View Designer] View Definition Load Error"),Ge=(0,y.createAction)("[View Designer] Set Generated View Definition",(0,y.props)()),ze=(0,y.createAction)("[View Designer] Load View Definition",(0,y.props)()),Ue=(0,y.createAction)("[View Designer] Bundle Friendly Name Load Success",(0,y.props)()),qe=(0,y.createAction)("[View Designer] Bundle Friendly Name Load Error",(0,y.props)()),Xe=(0,y.createAction)("[View Designer] View Models Initialized"),We=(0,y.createAction)("[View Designer] View Models Updated After Save"),He=(0,y.createAction)("[View Designer] Update View Model",(0,y.props)()),Qe=(0,y.createAction)("[View Designer] Set View Model",(0,y.props)()),Ke=(0,y.createAction)("[View Designer] Select Inspector Tab",(0,y.props)()),Je=(0,y.createAction)("[View Designer] Save View Definition",(0,y.props)()),Ye=(0,y.createAction)("[View Designer] Run Preview"),Ze=(0,y.createAction)("[View Designer] Load Bundle Friendly Name"),et=(0,y.createAction)("[View Designer] Generate View Definition",(0,y.props)()),tt=(0,y.createAction)("[View Designer] Clear Canvas"),it=(0,y.createAction)("[View Designer] Init",(0,y.props)()),nt=(0,y.createAction)("[View Designer] Destroy"),ot=(0,y.createFeatureSelector)("viewDesigner"),rt=(0,y.createSelector)(ot,e=>e.model),at=(0,y.createSelector)(rt,e=>e.viewDesignModel),st=(0,y.createSelector)(at,(e,{propertyName:t})=>(0,m.get)(e,t)),lt=(0,y.createSelector)(rt,e=>e.viewComponentDesignModels),dt=(0,y.createSelector)(rt,e=>{var t;return null===(t=Object.values(e.viewComponentDesignModels)[0])||void 0===t?void 0:t.type}),ct=(0,y.createSelector)(lt,(e,{guid:t})=>e[t]),pt=(0,y.createSelector)(ct,e=>null==e?void 0:e.parentGuid),ut=(0,y.createSelector)(lt,(e,{guid:t,propertyName:i})=>e[t]?i?(0,m.get)(e[t].propertiesByName,i):e[t].propertiesByName:null),mt=(0,y.createSelector)(lt,(e,{guid:t})=>e[t]?e[t].type:null),ft=(0,y.createSelector)(ct,e=>null==e?void 0:e.layout),ht=(0,y.createSelector)(ct,e=>null==e?void 0:e.permissions),gt=(0,y.createSelector)(ct,e=>null==e?void 0:e.childDataComponentGuids),vt=(0,y.createSelector)(ot,e=>e.ui),yt=(0,y.createSelector)(vt,e=>e.isViewDefinitionLoading),bt=(0,y.createSelector)(vt,e=>e.friendlyBundleName),xt=(0,y.createSelector)(vt,e=>e.currentBundleId),Ct=(0,y.createSelector)(ot,e=>e.viewDefinition),St=(0,y.createSelector)(ot,e=>e.validation),Dt=(0,y.createSelector)(ot,e=>e.breadcrumbs),It=(0,y.createSelector)(vt,e=>e.selectedInspectorTabId),Rt=(0,y.createSelector)(vt,e=>e.selectedComponentGuid),wt=(0,y.createSelector)(vt,e=>e.areViewModelsReady);(0,y.createSelector)(Rt,lt,(e,t)=>{if(t&&e){const i=t[e];return i?i.propertiesByName:null}return null});class Et{constructor(e,t,i,n,o,r,a,s){this.dispatcher=e,this.store$=t,this.actions$=i,this.rxViewDesignerInspectorService=n,this.rxGuidService=o,this.rxViewDataDictionaryBuilderService=r,this.rxViewDataDictionaryService=a,this.rxOverlayService=s,this.viewDefinition$=this.store$.select(Ct),this.validationIssues$=this.store$.select(St),this.breadcrumbs$=this.store$.select(Dt),this.viewDesignerModelState$=this.store$.select(rt),this.viewModel$=this.store$.select(at).pipe((0,h.filter)(Boolean)),this.viewModelGuid$=this.getViewPropertyValue("guid"),this.viewComponentModels$=this.store$.select(lt),this.firstViewComponentModelType$=this.store$.select(dt),this.isExtensionView$=this.getViewPropertyValue("targetViewDefinitionName").pipe((0,h.map)(Boolean),(0,h.shareReplay)(1)),this.isExtensionContainerSet$=this.getViewPropertyValue("targetExtensionContainerGuid").pipe((0,h.map)(Boolean),(0,h.shareReplay)(1)),this.allComponentGuids$=this.viewComponentModels$.pipe((0,h.map)(e=>new Set(Object.keys(e))),(0,h.shareReplay)({refCount:!0,bufferSize:1})),this.selectedComponentGuid$=this.store$.select(Rt).pipe((0,h.switchMap)(e=>this.viewModelGuid$.pipe((0,h.map)(t=>e===t?null:e),(0,h.take)(1)))),this.selectedComponentProperties$=this.selectedComponentGuid$.pipe((0,h.switchMap)(e=>e?this.getComponentProperties(e):(0,f.of)(null))),this.isViewDefinitionLoading$=this.store$.select(yt),this.selectedInspectorTabId$=this.store$.select(It),this.bundleFriendlyName$=this.store$.select(bt),this.currentBundleId$=this.store$.select(xt),this.viewInspectorLayout$=(0,f.merge)(this.viewModelGuid$,this.rxViewDesignerInspectorService.onChange$.pipe((0,h.withLatestFrom)(this.viewModelGuid$),(0,h.filter)(([e,t])=>e.guid===t),(0,h.map)(([e,t])=>t))).pipe((0,h.map)(e=>{const t=this.rxViewDesignerInspectorService.get(e);return t?t.inspectorSectionConfigs:null})),this.selectedComponentInspectorLayout$=(0,f.merge)(this.selectedComponentGuid$.pipe((0,h.distinctUntilChanged)()),this.rxViewDesignerInspectorService.onChange$.pipe((0,h.withLatestFrom)(this.selectedComponentGuid$),(0,h.filter)(([e,t])=>e.guid===t),(0,h.map)(([e,t])=>t))).pipe((0,h.map)(e=>{const t=this.rxViewDesignerInspectorService.get(e);return t?t.inspectorSectionConfigs:null})),this.isViewReadOnly$=(0,f.combineLatest)([this.viewModel$,this.currentBundleId$.pipe((0,h.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e)))]).pipe((0,h.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,h.distinctUntilChanged)(),(0,h.shareReplay)(1)),this.viewDefinitionLoadError$=this.actions$.pipe((0,v.ofType)(Le)),this.viewDefinitionSaveSuccess$=this.actions$.pipe((0,v.ofType)(ke)),this.initViewDesigner$=this.actions$.pipe((0,v.ofType)(it)),this.destroyViewDesignerSubject=new f.Subject,this.destroyViewDesigner$=this.destroyViewDesignerSubject.asObservable(),this.viewModelsInitialized$=this.actions$.pipe((0,v.ofType)(Xe)),this.areViewModelsReady$=this.store$.select(wt),this.viewCommonDataDictionaryState$=this.rxViewDataDictionaryService.viewCommon$,this.componentsCommonDataDictionaryState$=this.rxViewDataDictionaryService.componentsCommon$,this.actionsDataDictionaryState$=this.rxViewDataDictionaryService.actionsOutput$,this.settablePropertiesDataDictionaryState$=this.rxViewDataDictionaryService.settableProperties$,this.settablePropertiesDataDictionarySubject=new f.Subject,(0,f.merge)(this.settablePropertiesDataDictionarySubject.pipe((0,h.bufferToggle)(this.initViewDesigner$,e=>this.viewModelsInitialized$)),this.viewModelsInitialized$.pipe((0,h.switchMap)(()=>this.settablePropertiesDataDictionarySubject.pipe((0,h.map)(e=>[e]),(0,h.takeUntil)(this.initViewDesigner$))))).subscribe(e=>{this.rxViewDataDictionaryService.setSettablePropertiesDataDictionary(e)})}getComponentModel(e){return this.store$.select(ct,{guid:e})}initViewDesigner(e){this.dispatcher.dispatch(it({payload:e}))}destroyViewDesigner(){this.destroyViewDesignerSubject.next(),this.dispatcher.dispatch(nt())}selectComponent(e){this.dispatcher.dispatch(Te({guid:e}))}insertComponent(e){this.dispatcher.dispatch(Ae(Object.assign(Object.assign({columnIndex:(0,m.isFinite)(e.data&&e.data.columnIndex)?e.data.columnIndex:0},e),{data:{guid:e.data.draggedViewComponentGuid,type:e.data.draggedViewComponentDescriptor.type,initialPropertiesByName:e.data.initialPropertiesByName}})))}selectInspectorTab(e){this.dispatcher.dispatch(Ke(e))}generateViewDefinition(e){this.dispatcher.dispatch(et({payload:e}))}updateComponentProperties(e,t){this.dispatcher.dispatch(je({payload:[{guid:e,partialModel:{propertiesByName:t}}]}))}updateComponentModel(e,t){this.dispatcher.dispatch(je({payload:[{guid:e,partialModel:t}]}))}getComponentProperties(e){return this.store$.select(ut,{guid:e})}getComponentPropertyValue(e,t){return this.store$.select(ut,{guid:e,propertyName:t}).pipe((0,h.withLatestFrom)(this.getComponentModel(e)),(0,h.switchMap)(([e,t])=>t?(0,f.of)(e):f.EMPTY))}getComponentType(e){return this.store$.select(mt,{guid:e})}getComponentPermissions(e){return this.store$.select(ht,{guid:e})}getComponentLayout(e){return this.store$.select(ft,{guid:e})}updateSelectedComponentProperties(e){this.selectedComponentGuid$.pipe((0,h.take)(1)).subscribe(t=>{this.updateComponentProperties(t,e)})}saveViewDefinition(e){this.dispatcher.dispatch(Je({payload:e}))}updateViewProperties(e){this.dispatcher.dispatch(He({payload:e}))}setViewProperties(e){this.dispatcher.dispatch(Qe({payload:e}))}getViewPropertyValue(e){return this.store$.select(st,{propertyName:e}).pipe((0,h.switchMapTo)(this.viewModel$.pipe((0,h.map)(t=>t[e]),(0,h.take)(1))),(0,h.distinctUntilChanged)())}runPreview(){this.dispatcher.dispatch(Ye())}clearCanvas(){this.dispatcher.dispatch(tt())}setComponentInspector(e,t){this.rxViewDesignerInspectorService.set(e,t)}setValidationIssues(e,t){this.dispatcher.dispatch(Re({guid:e,issues:t}))}setExpressionValidationIssues(e){this.dispatcher.dispatch(we({issues:e}))}setViewInspectorConfig(e){this.viewModelGuid$.pipe((0,h.take)(1)).subscribe(t=>{this.setComponentInspector(t,e)})}removeViewComponents(e,t){e.length&&this.dispatcher.dispatch(_e({guids:e,selectParent:t}))}setComponentSettablePropertiesDataDictionary(e,t,i){this.settablePropertiesDataDictionarySubject.next({guid:e,componentName:t,dataDictionary:this.rxViewDataDictionaryBuilderService.getSettablePropertiesDataDictionary(i)})}setComponentCommonDataDictionaryBranch(e,t){this.rxViewDataDictionaryService.setCommonDataDictionaryBranch(e,t?this.rxViewDataDictionaryBuilderService.getComponentCommonDataDictionaryBranch(t):null)}setViewCommonDataDictionaryBranch(e){this.rxViewDataDictionaryService.setViewCommonDataDictionaryBranch(e)}removeAllActionDataDictionaryBranches(){this.rxViewDataDictionaryService.removeAllActionOutputDataDictionaryBranches()}removeActionDataDictionaryBranch(e){this.rxViewDataDictionaryService.removeActionOutputDataDictionaryBranch(e)}setActionDataDictionaryBranch(e,t,i,n=null){this.rxViewDataDictionaryService.setActionOutputDataDictionaryBranch(e,t,this.rxViewDataDictionaryBuilderService.getActionOutputDataDictionaryBranch(i,n))}updateActionDataDictionaryBranchOrder(e){this.rxViewDataDictionaryService.updateActionOutputDataDictionaryBranchOrder(e)}getChildComponentGuids(e,t=!1,i){return(0,f.combineLatest)([this.store$.select(ft,{guid:e}),this.store$.select(gt,{guid:e})]).pipe((0,h.switchMap)(()=>this.getComponentModel(e).pipe((0,h.take)(1))),(0,h.switchMap)(e=>e?(0,f.of)((0,m.compact)([...e.layout?p.RxViewLayout.getViewLayoutChildGuids(e.layout):[],...e.childDataComponentGuids||[]])):f.EMPTY),(0,h.switchMap)(e=>e.length&&t?(0,f.combineLatest)(e.map(e=>this.getChildComponentGuids(e,!0))).pipe((0,h.map)(m.flatten),(0,h.map)(t=>[...t,...e])):(0,f.of)(e)),(0,h.switchMap)(e=>e.length?this.viewComponentModels$.pipe((0,h.map)(t=>{let n=e.filter(e=>t[e]);return i&&(n=n.filter(e=>i({type:t[e].type,guid:t[e].guid,data:t[e].propertiesByName}))),n}),(0,h.take)(1)):(0,f.of)(e)))}getChildComponents(e,t){return this.getChildComponentGuids(e,!1,t).pipe((0,h.switchMap)(e=>e.length?(0,f.combineLatest)(e.map(e=>this.getComponentProperties(e).pipe((0,h.withLatestFrom)(this.getComponentModel(e)),(0,h.switchMap)(([t,i])=>i?(0,f.of)({type:i.type,data:t,guid:e}):f.EMPTY)))):(0,f.of)([])))}getComponent(e){return this.getComponentModel(e).pipe((0,h.map)(e=>e?{data:e.propertiesByName,guid:e.guid,type:e.type}:null))}getComponentsByType(e){return this.viewComponentModels$.pipe((0,h.map)(t=>(0,m.filter)(t,{type:e}).map(e=>({guid:e.guid,data:e.propertiesByName,type:e.type}))))}getChildComponentTree(e){return this.viewComponentModels$.pipe((0,h.map)(t=>{const i=e=>ve(e).reduce((e,n)=>(t[n]&&e.push({guid:n,data:t[n].propertiesByName,type:t[n].type,children:i(t[n])}),e),[]);return t[e]?i(t[e]):[]}))}getParentComponentGuid(e,t){return this.store$.select(pt,{guid:e}).pipe((0,h.switchMap)(e=>e&&t?this.store$.select(mt,{guid:e}).pipe((0,h.switchMap)(i=>i===t?(0,f.of)(e):this.getParentComponentGuid(e,t))):(0,f.of)(e||null)))}setChildren(e,t){this.dispatcher.dispatch(Fe({payload:{guid:e,data:t}}))}}Et.\u0275fac=function(e){return new(e||Et)(n["\u0275\u0275inject"](Ve),n["\u0275\u0275inject"](y.Store),n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](be),n["\u0275\u0275inject"](xe),n["\u0275\u0275inject"](l.RxOverlayService))},Et.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Et,factory:Et.\u0275fac,providedIn:"root"});class Ft{constructor(){this.models=new Map}clear(){this.models.clear()}set(e,t){this.models.set(e,t)}get(e){return this.models.get(e)}delete(e){this.models.delete(e)}}Ft.\u0275fac=function(e){return new(e||Ft)},Ft.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ft,factory:Ft.\u0275fac,providedIn:"root"});class Mt{constructor(e,t,i,n){this.rxDefinitionNameService=e,this.rxBundleCacheService=t,this.viewDesignerModels=i,this.rxViewDefinitionLocalizationService=n}generate(e,t,i=!1){const n=e,o=(0,m.omit)(n,"displayName","layout","layoutName","pageComponent","isAngularJsView");return o.name=o.name||this.rxDefinitionNameService.getDefinitionName(this.rxBundleCacheService.bundleId,n.displayName),o.componentDefinitions=this.generateComponentDefinitions(n,t),i&&(o.localizableStringsByComponentId=this.rxViewDefinitionLocalizationService.extractLocalizableStrings(o)),delete o.localizablePropertyToStringGuidMap,o.layout=JSON.stringify(n.layout),o}generateComponentDefinitions(e,t){return ve(e).map(e=>{const i=Object.assign({},t[e]),n=this.viewDesignerModels.get(e),o=(0,m.isFunction)(null==n?void 0:n.getPropertiesByName)?n.getPropertiesByName(i.propertiesByName):i.propertiesByName;return i.propertiesByName=this.serializeComponentDefinitionProperties(o),delete i.parentGuid,i.type!==p.RxViewComponentType.Action&&(0,m.has)(i.propertiesByName,"name")&&(i.propertiesByName.name&&(i.name=i.propertiesByName.name),delete i.propertiesByName.name),(i.layout||i.childDataComponentGuids)&&(i.componentDefinitions=this.generateComponentDefinitions(i,t),delete i.childDataComponentGuids),i.layout&&(i.layout=JSON.stringify(i.layout)),i})}serializeComponentDefinitionProperties(e){return(0,m.transform)(e,(e,t,i)=>{switch(!0){case(0,m.isArray)(t):case(0,m.isNumber)(t):case(0,m.isBoolean)(t):case(0,m.isPlainObject)(t):e[i]=JSON.stringify(t);break;case(0,m.isObject)(t):const n=Object.create(null);t.forEach((e,t)=>n[t]=e),e[i]=JSON.stringify(n);break;case(0,m.isFunction)(t):case(0,m.isUndefined)(t):e[i]=null;break;default:e[i]=t}},{})}}function Tt(e){return!/^[a-z][-\w]+$/gi.test((0,m.isObject)(e)?e.data.value:e)}function Ot(e){const t=[];if(e){e.split(" ").some(Tt)&&t.push({type:"error",propertyName:"styles",description:"CSS class name is invalid."})}return t}function Nt(e){const t=[];return(null==e?void 0:e.length)||t.push({type:"error",propertyName:p.RX_AVAILABLE_ON_DEVICES_PROP_NAME,description:"At least one device must be selected."}),t}function At(e){return[...Ot(e[p.RX_STYLES_PROP_NAME]),...Nt(e[p.RX_AVAILABLE_ON_DEVICES_PROP_NAME])]}Mt.\u0275fac=function(e){return new(e||Mt)(n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](Ft),n["\u0275\u0275inject"](p.RxViewDefinitionLocalizationService))},Mt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Mt,factory:Mt.\u0275fac,providedIn:"root"});class Pt{constructor(e,t,i,n,o){this.rxDefaultExpressionValidatorService=e,this.rxDefaultExpressionEvaluatorService=t,this.rxStringService=i,this.rxExpressionParserService=n,this.viewDesignerFacade=o}validate(e,t,i=this.rxStringService.prettify(t),n=this.rxDefaultExpressionEvaluatorService){let o=(0,f.of)([]);if(this.rxDefaultExpressionValidatorService.isValid(e,n)){if(this.rxStringService.isNonEmptyString(e)){const i=new Set;if(this.rxExpressionParserService.parse(e,(e,t)=>{if(e===l.ExpressionParserToken.RxExpression||e===l.ExpressionParserToken.SingleQuoteRxExpression){const e=/\${view\.components\.([0-9a-z-]+)\..+}/.exec(t);e&&e[1]&&i.add(e[1])}return t}),i.size){const e=Array.from(i);o=this.viewDesignerFacade.allComponentGuids$.pipe((0,h.map)(t=>e.filter(e=>!t.has(e))),(0,h.distinctUntilChanged)(m.isEqual),(0,h.map)(e=>e.map(()=>({type:"error",description:"Expression references a non-existent view component.",propertyName:t}))))}}}else o=(0,f.of)([{type:"error",description:`${i} must be a valid expression.`,propertyName:t}]);return o}}Pt.\u0275fac=function(e){return new(e||Pt)(n["\u0275\u0275inject"](p.RxDefaultExpressionValidatorService),n["\u0275\u0275inject"](p.RxDefaultExpressionEvaluatorService),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxExpressionParserService),n["\u0275\u0275inject"](Et))},Pt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Pt,factory:Pt.\u0275fac,providedIn:"root"});class jt{constructor(e,t,i,n,o){this.viewDesignerFacade=e,this.rxViewDataDictionaryBuilderService=t,this.rxViewComponentRegistryService=i,this.rxObjectUtilsService=n,this.rxDataDictionaryUtils=o,this.componentsCommonDataDictionaryStateClone$=this.viewDesignerFacade.componentsCommonDataDictionaryState$.pipe((0,h.map)(e=>e?this.rxObjectUtilsService.cloneDeep(e):{}),(0,h.shareReplay)(1)),this.viewCommonDataDictionaryStateClone$=this.viewDesignerFacade.viewCommonDataDictionaryState$.pipe((0,h.filter)(Boolean),(0,h.map)(e=>this.rxObjectUtilsService.cloneDeep(e)),(0,h.shareReplay)(1)),this.commonDataDictionary$=this.getCommonDataDictionary(),this.settablePropertiesDataDictionary$=this.viewDesignerFacade.settablePropertiesDataDictionaryState$.pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewDesignerModelState$),(0,h.map)(([e,t])=>this.rxObjectUtilsService.cloneDeep(this.getSettablePropsDataDictionary(e,t))))}getActionDataDictionary(e){return(0,f.combineLatest)([this.viewDesignerFacade.actionsDataDictionaryState$,this.getCommonDataDictionary()]).pipe((0,h.map)(([t,i])=>{const n=(0,m.find)(t,{guid:e});return[{label:"Actions",children:n?(0,m.flow)(e=>(0,m.take)(e,n.index),e=>(0,m.map)(e,"dataDictionaryBranch"),m.compact,e=>(0,m.filter)(e,e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length}),e=>this.rxObjectUtilsService.cloneDeep(e))(t):[]},...i]}),(0,h.distinctUntilChanged)(m.isEqual))}getComponentCommonDataDictionary(e){return this.componentsCommonDataDictionaryStateClone$.pipe((0,h.map)(t=>t[e]))}getCommonDataDictionary(e){return(0,f.combineLatest)([this.viewCommonDataDictionaryStateClone$,this.componentsCommonDataDictionaryStateClone$.pipe((0,h.map)(t=>Object.values(e?Object.assign(Object.assign({},t),e):t)))]).pipe((0,h.map)(([e,t])=>[{label:"General",children:[{label:"Current user",icon:"d-icon-dollar",expression:"${keywords.user}"},{label:"New line",icon:"d-icon-dollar",expression:"${keywords.newLine}"}]},{label:"Functions",children:this.rxDataDictionaryUtils.getFunctionsDataDictionaryBranch(p.RX_EXPRESSION_FUNCTIONS)},Object.assign(Object.assign({},e),{children:[{label:"Components",children:(0,m.compact)(t),expanded:!0},...e.children]})]))}getSettablePropsDataDictionary(e,t){return ve(t.viewDesignModel).map(i=>this.getSettablePropsDataDictionaryBranch(i,t,e,!0)).filter(Boolean)}getSettablePropsDataDictionaryBranch(e,t,i,n=!1){const o=i[e],r=t.viewComponentDesignModels[e],a=this.rxViewComponentRegistryService.get(r.type),s=a.outlets&&r.layout?p.RxViewLayout.getViewLayoutChildGuids(r.layout):null,l=(0,m.map)(s,e=>this.getSettablePropsDataDictionaryBranch(e,t,i)).filter(Boolean),d=(0,m.get)(o,"dataDictionary",[]);if(l.length||d.length)return{label:(null==o?void 0:o.componentName)||a.name,expanded:n,children:l.length&&d.length?[{label:"Components",children:l},{label:"Properties",children:d}]:l.length?l:d}}}jt.\u0275fac=function(e){return new(e||jt)(n["\u0275\u0275inject"](Et),n["\u0275\u0275inject"](be),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](g.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxDataDictionaryUtils))},jt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:jt,factory:jt.\u0275fac,providedIn:"root"});class _t extends l.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.rxExpressionHelperService=this.injector.get(p.RxExpressionHelperService)}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{dataDictionary$:this.commonDataDictionary$,operators:l.ExpressionOperatorRowsByGroup.get(l.ExpressionOperatorGroup.AllClient),validateExpression:(e,t)=>{let i=!0;const n=this.getExpressionEvaluator(e);try{n.parseExpression(this.rxExpressionHelperService.prepare(t))}catch(o){i=!1}return(0,f.of)(i)}})}}class Vt extends _t{constructor(e,t,i,n){super(e),this.injector=e,this.componentGuid=t,this.componentModel=i,this.componentType=n,this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.rxViewDataDictionaryService=this.injector.get(jt),this.rxViewComponentRegistryService=this.injector.get(p.RxViewComponentRegistryService),this.commonDataDictionary$=this.rxViewDataDictionaryService.commonDataDictionary$}getExpressionEvaluator(e){var t;const i=this.componentType&&this.rxViewComponentRegistryService.get(this.componentType).properties.find(t=>t.name===e);return(0,m.isFunction)(null===(t=null==i?void 0:i.evaluatorService)||void 0===t?void 0:t.parseExpression)?i.evaluatorService:this.rxDefaultExpressionEvaluatorService}getCommonDataDictionary(e,t=this.componentGuid){return e?e.pipe((0,h.switchMap)(e=>this.rxViewDataDictionaryService.getCommonDataDictionary({[t]:e}))):this.commonDataDictionary$}getComponentCommonDataDictionary(e){return this.rxViewDataDictionaryService.getComponentCommonDataDictionary(e||this.componentGuid)}}class kt{constructor(e,t,i){this.viewDesignerFacade=e,this.rxOverlayService=t,this.translateService=i,this.destroyed$=new f.ReplaySubject(1)}ngOnInit(){(0,f.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("allowOverlay"),this.viewDesignerFacade.getViewPropertyValue("scope"),this.viewDesignerFacade.getViewPropertyValue("overlayGroupId"),this.viewDesignerFacade.getViewPropertyValue("overlayDescriptor"),this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime")]).pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewModel$),(0,h.takeUntil)(this.destroyed$)).subscribe(([[e,t,i,n,o],r])=>{this.controlOptions={allowOverlay:e,scope:t,overlayGroupId:i,overlayDescriptor:n,isDisabled:!this.rxOverlayService.isCustomizationEnabled("allowOverlay",r),definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.view-definition.label").toLowerCase()}})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}setCustomization(e){this.viewDesignerFacade.updateViewProperties(e)}}kt.\u0275fac=function(e){return new(e||kt)(n["\u0275\u0275directiveInject"](Et),n["\u0275\u0275directiveInject"](l.RxOverlayService),n["\u0275\u0275directiveInject"](u.TranslateService))},kt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kt,selectors:[["rx-view-customization-options"]],inputs:{options:"options"},decls:1,vars:2,consts:[[3,"options","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-scope-customization-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.value=e})("ngModelChange",function(e){return t.setCustomization(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.controlOptions)("ngModel",t.value)},directives:[d.CustomizationOptionsComponent,b.NgControlStatus,b.NgModel],encapsulation:2});class Bt{constructor(e){this.viewDesignerFacade=e,this.events=new n.EventEmitter,this.controlOptions$=(0,f.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("allowOverlay"),this.viewDesignerFacade.getViewPropertyValue("scope"),this.viewDesignerFacade.getViewPropertyValue("overlayGroupId"),this.viewDesignerFacade.getViewPropertyValue("overlayDescriptor")]).pipe((0,h.map)(([e,t,i,n])=>({allowOverlay:e,scope:t,overlayGroupId:i,overlayDescriptor:n})))}}Bt.\u0275fac=function(e){return new(e||Bt)(n["\u0275\u0275directiveInject"](Et))},Bt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bt,selectors:[["rx-view-revert-customization"]],inputs:{options:"options",isDisabled:"isDisabled"},outputs:{events:"events"},decls:2,vars:4,consts:[[3,"options","isDisabled","events"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-revert-customization",0),n["\u0275\u0275listener"]("events",function(e){return t.events.emit(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",n["\u0275\u0275pipeBind1"](1,2,t.controlOptions$))("isDisabled",t.isDisabled)},directives:[d.RxRevertCustomizationComponent],pipes:[x.AsyncPipe],encapsulation:2});class $t{}$t.\u0275fac=function(e){return new(e||$t)},$t.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$t,declarations:[Bt],imports:[x.CommonModule,d.RxRevertCustomizationModule]}),$t.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,d.RxRevertCustomizationModule]]});class Lt{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u){this.injector=e,this.viewDesignerFacade=t,this.rxStringService=i,this.rxOverlayService=n,this.rxViewComponentRegistryService=o,this.rxBundleCacheService=r,this.rxModalService=a,this.rxViewDefinitionCacheService=s,this.rxViewDefinitionParserService=l,this.rxGuidService=d,this.viewDesignerDispatcher=c,this.rxDefinitionNameService=p,this.rxViewExpressionValidatorService=u,this.expressionConfigurator=new Vt(this.injector,null,this),this.destroyed$=new f.ReplaySubject(1),this.allViewDefinitionNamesByBundleId$=this.viewDesignerFacade.currentBundleId$.pipe((0,h.filter)(Boolean),(0,h.switchMap)(e=>this.rxViewDefinitionCacheService.getViewDefinitionNames(e).pipe((0,h.map)(e=>e.map(e=>this.rxDefinitionNameService.getDisplayNameForValidation(e)))))),this.targetExtensionContainerOptions$=this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,h.switchMap)(e=>e?this.getTargetExtensionContainerOptions(e).pipe((0,h.take)(1)):(0,f.of)(null)),(0,h.shareReplay)(1)),this.targetViewDefinition$=this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,h.filter)(Boolean),(0,h.switchMap)(e=>this.rxViewDefinitionCacheService.getViewDefinition(e))),this.init()}init(){this.viewDesignerFacade.initViewDesigner$.pipe((0,h.concatMapTo)(this.viewDesignerFacade.viewModelsInitialized$.pipe((0,h.switchMapTo)((0,f.combineLatest)([this.viewDesignerFacade.viewComponentModels$.pipe((0,h.map)(e=>{const t=Object.values(e).find(e=>e.type===p.RxViewComponentType.Page);return t?e[t.childDataComponentGuids[0]].type:null})),this.viewDesignerFacade.viewModel$,this.targetExtensionContainerOptions$]).pipe((0,h.take)(1))))),(0,h.takeUntil)(this.destroyed$)).subscribe(([e,t,i])=>{this.viewDesignerFacade.updateViewProperties({pageComponent:e}),this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(Object.assign(Object.assign({},t),{pageComponent:e}),i))}),this.viewDesignerFacade.initViewDesigner$.pipe((0,h.switchMapTo)(this.targetExtensionContainerOptions$.pipe((0,h.skip)(1),(0,h.withLatestFrom)(this.viewDesignerFacade.viewModel$))),(0,h.takeUntil)(this.destroyed$)).subscribe(([e,t])=>this.onTargetExtensionContainerOptionsChange(e,t)),this.viewDesignerFacade.initViewDesigner$.pipe((0,h.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("pageComponent").pipe((0,h.skip)(1),(0,h.switchMapTo)((0,f.combineLatest)([this.viewDesignerFacade.viewModel$,this.viewDesignerFacade.viewComponentModels$,this.targetExtensionContainerOptions$]).pipe((0,h.take)(1))))),(0,h.takeUntil)(this.destroyed$)).subscribe(([e,t,i])=>this.onPageComponentChange(e,t,i)),this.viewDesignerFacade.initViewDesigner$.pipe((0,h.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,h.skip)(1))),(0,h.switchMap)(()=>this.viewDesignerFacade.viewComponentModels$.pipe((0,h.first)())),(0,h.takeUntil)(this.destroyed$)).subscribe(e=>{(0,m.isEmpty)(e)||this.viewDesignerFacade.clearCanvas()}),this.viewDesignerFacade.initViewDesigner$.pipe((0,h.switchMapTo)((0,f.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("styles").pipe((0,h.map)(Ot)),this.validateDisplayName(),this.validateInputParams(),this.validateOutputParamExpressions(),this.validateExtensionContainer()]).pipe((0,h.map)(m.flatten),(0,h.map)(m.compact),(0,h.withLatestFrom)(this.viewDesignerFacade.viewModelGuid$))),(0,h.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.viewDesignerFacade.setValidationIssues(t,e)}),this.viewDesignerFacade.initViewDesigner$.pipe((0,h.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("inputParams")),(0,h.takeUntil)(this.destroyed$)).subscribe(e=>this.viewDesignerFacade.setViewCommonDataDictionaryBranch(this.getViewCommonDataDictionary(e))),this.viewDesignerFacade.getViewPropertyValue("targetExtensionContainerGuid").pipe((0,h.withLatestFrom)(this.targetViewDefinition$),(0,h.map)(([e,t])=>this.getTargetRecordDefinitionName(t,e)),(0,h.distinctUntilChanged)(),(0,h.switchMapTo)(this.viewDesignerFacade.viewComponentModels$.pipe((0,h.take)(1))),(0,h.filter)(e=>!(0,m.isEmpty)(e)),(0,h.takeUntil)(this.destroyed$)).subscribe(()=>this.viewDesignerFacade.clearCanvas())}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getTargetExtensionContainerOptions(e){return this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,h.map)(e=>this.rxViewDefinitionParserService.getComponents(e).filter(({componentDefinition:e})=>e.type===p.RxViewComponentType.ExtensionContainer).map(({componentDefinition:e})=>({id:e.guid,name:e.propertiesByName.name||e.name}))))}onTargetExtensionContainerOptionsChange(e,t){this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(t,e)),e?1===e.length&&this.viewDesignerFacade.updateViewProperties({targetExtensionContainerGuid:e[0].id}):this.viewDesignerFacade.updateViewProperties({targetExtensionContainerGuid:null})}onPageComponentChange(e,t,i){const n=(0,m.find)(t,{type:p.RxViewComponentType.Page});this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(e,i));const o=[];if(e.pageComponent){if(n)this.viewDesignerFacade.updateComponentModel(n.childDataComponentGuids[0],{type:e.pageComponent});else{const i=this.rxGuidService.generate();(0,m.isEmpty)(t)||this.viewDesignerFacade.removeViewComponents(ve(e)),o.push(De({payload:[{componentModel:{guid:i,resourceType:p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,type:p.RxViewComponentType.Page,propertiesByName:{},parentGuid:e.guid},insertIndex:0,columnIndex:0,outletName:p.RX_VIEW_DEFINITION.defaultOutletName}]}),Ie({payload:[{componentModel:{guid:this.rxGuidService.generate(),type:e.pageComponent,resourceType:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,propertiesByName:{},parentGuid:i}}]}))}this.viewDesignerFacade.updateViewProperties({inputParams:[],outputParams:[]})}else n&&this.viewDesignerFacade.removeViewComponents([n.guid]);o.forEach(e=>this.viewDesignerDispatcher.dispatch(e))}getInspector(e,t=[]){const i=!Boolean(e.lastUpdateTime)||this.rxOverlayService.isCustomizationEnabled("allowOverlay",e),n=this.rxViewComponentRegistryService.getBundlePageComponents(this.rxBundleCacheService.bundleId).map(e=>({id:e.type,name:e.name}));e.pageComponent&&!this.rxViewComponentRegistryService.get(e.pageComponent)&&n.unshift({name:p.RX_VIEW_DEFINITION.unknownPageComponent.name,id:e.pageComponent});const o={name:"pageComponent",component:d.SelectFormControlComponent,options:{label:"Page component",options:n,beforeValueChange:(e,t)=>this.viewDesignerFacade.viewModel$.pipe((0,h.take)(1),(0,h.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,h.map)(([i,n])=>!(null==e?void 0:e.length)&&t.length&&(i.inputParams.length||i.outputParams.length||!(0,m.isEmpty)(n)))).toPromise().then(e=>!e||this.rxModalService.confirm({title:"Warning",modalStyle:c.RX_MODAL.modalStyles.warning,message:"The view canvas, input and output parameters will be cleared. Do you want to continue?"})),emptyOption:!0}},r={name:"targetExtensionContainerGuid",component:d.SelectFormControlComponent,options:{label:"Extension container",tooltip:new l.Tooltip("Select an extension container in the view to extend where record editor fields from this view will be injected.\n            The records defined for the view to extend and for this view must be associated one-to-one."),options:t||[],required:!0,beforeValueChange:(e,t)=>this.isTargetRecordDefinitionChanged(e,t).pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,h.map)(([e,t])=>!(0,m.isEmpty)(t)&&e),(0,h.take)(1)).toPromise().then(e=>!e||this.rxModalService.confirm({title:"Warning",modalStyle:c.RX_MODAL.modalStyles.warning,message:"The view canvas will be cleared. Do you want to continue?"}))}},a=[{label:"General",controls:[{name:"displayName",component:d.TextFormControlComponent,isDisabled:Boolean(e.lastUpdateTime),options:{required:!0,label:"Name"}},{name:"description",component:d.TextareaFormControlComponent,isDisabled:!i,options:{label:"Description",rows:3}},{name:"layoutName",component:d.TextFormControlComponent,isDisabled:!0,options:{label:"Layout template"}},{name:"targetViewDefinitionName",component:d.RxDefinitionPickerComponent,isDisabled:!i,options:{label:"View to extend",tooltip:new l.Tooltip("Select a view to extend in order to inject this view into it.\n                The view to extend may be read-only, but must contain at least one Record editor with an Extension container."),definitionType:d.RxDefinitionPickerType.View,beforeValueChange:(e,t)=>this.viewDesignerFacade.viewComponentModels$.pipe((0,h.first)(),(0,h.withLatestFrom)(this.viewDesignerFacade.viewModel$)).toPromise().then(([i,n])=>{const o=Boolean(!(null==e?void 0:e.length)&&t.length&&(n.inputParams.length||n.outputParams.length));let r;return!(0,m.isEmpty)(i)&&o?r="The view canvas, input and output parameters will be cleared. Do you want to continue?":(0,m.isEmpty)(i)?o&&(r="The input and output parameters will be cleared. Do you want to continue?"):r="The view canvas will be cleared. Do you want to continue?",!r||this.rxModalService.confirm({title:"Warning",modalStyle:c.RX_MODAL.modalStyles.warning,message:r})})}},{name:"styles",component:d.TagsFormControlComponent,isDisabled:!i,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new l.Tooltip("Enter CSS class names to apply to this view."),errorCheck:Tt}},{name:"permissions",component:d.RxPermissionEditorComponent,isDisabled:!i,options:{label:"Permissions",type:"view"}},{component:Bt},{component:kt}]},{label:"Input parameters",controls:[{name:"inputParams",component:d.ListFormControlComponent,isDisabled:!i,options:{addItemText:"Add",emptyListText:"No input parameters added.",items:[{label:"Name",propertyName:"name"}]}}]},{label:"Output parameters",controls:[{name:"outputParams",component:d.ListFormControlComponent,isDisabled:!i,options:{addItemText:"Add",emptyListText:"No output parameters added.",items:[{label:"Name",propertyName:"name"},{label:"Source",propertyName:"source",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}]}}]}];if(n.length&&a[0].controls.splice(2,0,o),e.pageComponent&&(a.splice(1,2),a[0].controls.splice((0,m.findIndex)(a[0].controls,{name:"targetViewDefinitionName"}),1)),e.targetViewDefinitionName){const e=(0,m.findIndex)(a[0].controls,{name:"targetViewDefinitionName"});a[0].controls.splice(e+1,0,r),a[0].controls.splice((0,m.findIndex)(a[0].controls,{name:"pageComponent"}),1),a.splice(1,2),this.viewDesignerFacade.updateViewProperties({inputParams:[],outputParams:[]})}return{inspectorSectionConfigs:a}}validateDisplayName(){return this.viewDesignerFacade.getViewPropertyValue("displayName").pipe((0,h.switchMap)(e=>(0,f.combineLatest)([(0,f.of)(e?s.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e)?null:{type:"error",propertyName:"displayName",description:"View name can only contain letters, numbers, spaces, dashes, and underscores."}:{type:"error",propertyName:"displayName",description:"View name cannot be blank."}),this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime").pipe((0,h.switchMap)(t=>e&&!t?this.allViewDefinitionNamesByBundleId$.pipe((0,h.map)(i=>!t&&(null==i?void 0:i.some(t=>this.rxStringService.caseInsensitiveIsEqual(e,t)))?{type:"error",propertyName:"displayName",description:"View definition with this name already exists."}:null),(0,h.take)(1)):(0,f.of)(null)),(0,h.take)(1))]))).pipe((0,h.map)(m.compact))}validateInputParams(){return this.viewDesignerFacade.getViewPropertyValue("inputParams").pipe((0,h.map)(e=>{const t=(0,m.flow)(e=>(0,m.map)(e,e=>e.name),m.compact)(e),i=(0,m.uniq)(t),n=[];return e.length&&t.length!==e.length&&n.push({type:"error",propertyName:"inputParams",description:"Input parameter name cannot be blank."}),t.length!==i.length&&n.push({type:"error",propertyName:"inputParams",description:"Input parameter names must be unique."}),n}))}validateOutputParamExpressions(){return this.viewDesignerFacade.getViewPropertyValue("outputParams").pipe((0,h.map)(e=>(0,m.map)(e,e=>e.source).filter(Boolean)),(0,h.distinctUntilChanged)(m.isEqual),(0,h.switchMap)(e=>e.length?(0,f.combineLatest)(e.map(e=>this.rxViewExpressionValidatorService.validate(e,"source","Output parameter source"))).pipe((0,h.map)(m.flatten)):(0,f.of)([])))}validateExtensionContainer(){return(0,f.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName"),this.viewDesignerFacade.getViewPropertyValue("targetExtensionContainerGuid")]).pipe((0,h.map)(([e,t])=>e&&!t?{type:"error",propertyName:"targetExtensionContainerGuid",description:"Extension container cannot be blank."}:null))}getViewCommonDataDictionary(e){return{label:"View",expression:"${view.api}",icon:"d-icon-file_o",expanded:!0,children:[...(0,m.isEmpty)(e)?[]:[{label:"Input parameters",expanded:!0,children:e.filter(e=>e.name).map(e=>({label:e.name,expression:`\${view.inputParams.${e.name}}`,icon:"d-icon-arrow_right_square_input"}))}],{label:"Properties",expanded:!0,children:[{label:"Is valid",expression:"${view.isValid}",icon:"d-icon-arrow_right_square_input"}]}]}}isTargetRecordDefinitionChanged(e,t){return this.targetViewDefinition$.pipe((0,h.map)(i=>this.getTargetRecordDefinitionName(i,e)!==this.getTargetRecordDefinitionName(i,t)))}getTargetRecordDefinitionName(e,t){const i=this.rxViewDefinitionParserService.findParentComponentDefinition(e,{guid:t},e=>e.type===p.RxViewComponentType.RecordEditor);return null==i?void 0:i.propertiesByName.recordDefinitionName}}Lt.\u0275fac=function(e){return new(e||Lt)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](Et),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxOverlayService),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](c.RxModalService),n["\u0275\u0275inject"](p.RxViewDefinitionCacheService),n["\u0275\u0275inject"](p.RxViewDefinitionParserService),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](Ve),n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](Pt))},Lt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Lt,factory:Lt.\u0275fac});const Gt=new n.InjectionToken("CanvasItemApi");class zt{constructor(){this.core=null}registerCoreApi(e){this.core=e}}zt.\u0275fac=function(e){return new(e||zt)},zt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:zt,factory:zt.\u0275fac});class Ut{constructor(e,t,i,n){this.data=e,this.targetGuid=t,this.outletName=i,this.insertIndex=n}}class qt{constructor(){this.componentSelectSubject=new f.ReplaySubject,this.componentRemoveSubject=new f.ReplaySubject,this.componentDropSubject=new f.ReplaySubject,this.componentDrop$=this.componentDropSubject.asObservable(),this.componentSelect$=this.componentSelectSubject.asObservable(),this.componentRemove$=this.componentRemoveSubject.asObservable()}selectComponent(e){this.componentSelectSubject.next(e)}removeComponent(e){this.componentRemoveSubject.next(e)}dropComponent(e,t,i,n){this.componentDropSubject.next(new Ut(e,t,i,n))}}qt.\u0275fac=function(e){return new(e||qt)},qt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:qt,factory:qt.\u0275fac});class Xt{constructor(e,t,i,n){this.injector=e,this.renderer=t,this.canvasItemApi=i,this.viewDesignerCanvasService=n,this.interactive=!0,this.childContainers=new Map}ngOnInit(){this.initializeItemApi()}ngOnChanges(e){const t=e.layout;if(t){const e=(0,m.get)(t,"previousValue.guid"),i=(0,m.get)(t,"currentValue.guid"),n=(0,m.get)(t,"previousValue.outlets"),o=(0,m.get)(t,"currentValue.outlets");e!==i?(this.componentReference&&this.cleanUp(),this.renderViewComponent()):(0,m.isEqual)(n,o)||o.forEach(e=>{const t=this.childContainers.get(e.name);t&&(t.instance.outlet=e,t.instance.layout=this.layout)})}}ngOnDestroy(){this.cleanUp()}cleanUp(){this.componentReference.destroy(),this.childContainers.clear()}registerOutlet(e,t,i){const n=this.layout.outlets.find(t=>t.name===e),o=this.renderContainerComponent(t,n,i);return this.childContainers.set(e,o),o}onSelectComponent(e){this.interactive&&(e.stopPropagation(),this.viewDesignerCanvasService.selectComponent(this.layout.guid))}dropComponent(e,t,i=p.RX_VIEW_DEFINITION.defaultOutletName){this.viewDesignerCanvasService.dropComponent(e,this.layout.guid,i,t)}initializeItemApi(){this.canvasItemApi.registerCoreApi({dropComponent:this.dropComponent.bind(this),registerOutlet:this.registerOutlet.bind(this)})}renderViewComponent(){this.componentReference=this.container.createComponent(this.layout.factory,null,this.injector);const e=this.componentReference.instance,t=this.componentReference.location.nativeElement;e.guid=this.layout.guid,e.model=this.layout.model,e.isReadOnly=this.isReadOnly,this.renderer.setAttribute(t,"rx-view-component-id",this.layout.guid)}renderContainerComponent(e,t,i){const n=e.createComponent(i);return n.instance.outlet=t,n.instance.layout=this.layout,n.instance.isReadOnly=this.isReadOnly,n}}Xt.\u0275fac=function(e){return new(e||Xt)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](qt))},Xt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Xt,selectors:[["rx-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](R,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{layout:"layout",interactive:"interactive",isReadOnly:"isReadOnly"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:Gt,useClass:zt}]),n["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:3,consts:[[3,"hidden","click"],["container",""]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275listener"]("click",function(e){return t.onSelectComponent(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementContainer"](2,null,1),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("hidden",n["\u0275\u0275pipeBind1"](1,1,null==t.layout||null==t.layout.model?null:t.layout.model.hiddenOnCanvas$))},pipes:[x.AsyncPipe],encapsulation:2});class Wt{constructor(e){this.viewDesignerCanvasService=e,this.componentSelect=new n.EventEmitter,this.componentDrop=new n.EventEmitter,this.componentRemove=new n.EventEmitter,this.beforeComponentDropInRoot=new n.EventEmitter}ngOnInit(){this.viewDesignerCanvasService.componentSelect$.subscribe(e=>{this.componentSelect.emit(e)}),this.viewDesignerCanvasService.componentRemove$.subscribe(e=>{this.componentRemove.emit(e)}),this.viewDesignerCanvasService.componentDrop$.subscribe(e=>{this.componentDrop.emit(e)})}}Wt.\u0275fac=function(e){return new(e||Wt)(n["\u0275\u0275directiveInject"](qt))},Wt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wt,selectors:[["rx-view-designer-canvas"]],inputs:{layout:"layout",isReadOnly:"isReadOnly"},outputs:{componentSelect:"componentSelect",componentDrop:"componentDrop",componentRemove:"componentRemove",beforeComponentDropInRoot:"beforeComponentDropInRoot"},features:[n["\u0275\u0275ProvidersFeature"]([qt])],decls:1,vars:1,consts:[["class","root-item",3,"layout","isReadOnly",4,"ngIf"],[1,"root-item",3,"layout","isReadOnly"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,w,1,2,"rx-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngIf",t.layout)},directives:[x.NgIf,Xt],encapsulation:2,changeDetection:0});class Ht{constructor(){this.beforeViewComponentDropSubject=new f.ReplaySubject,this.beforeViewComponentDrop$=this.beforeViewComponentDropSubject.asObservable()}setBeforeViewComponentDropState(e){this.beforeViewComponentDropSubject.next(e)}canBeDropped(e){let t=!0;return(0,m.isFunction)(e.draggedViewComponentDescriptor.canBeInsertedInto)&&(t=e.draggedViewComponentDescriptor.canBeInsertedInto(e.dropTargetViewComponentWithParents.map(e=>e.type))),t&&(t=(!e.draggedViewComponentGuid||!this._isParentRecordEditorChanging(this.containerComponentInstance.layout.viewComponentWithParents,e.draggedViewComponentParents))&&this.componentDropPredicate(e)),t}componentDropPredicate(e,t=!1){return(t||this.dropPredicate(e))&&(!this.parentOutletComponent||this.parentOutletComponent.componentDropPredicate(e,this.skipParentPredicate))}_isParentRecordEditorChanging(e,t){const i=(0,m.find)(e,{type:p.RxViewComponentType.RecordEditor}),n=(0,m.find)(t,{type:p.RxViewComponentType.RecordEditor}),o=Boolean(i)&&Boolean(n)&&i.guid!==n.guid,r=!i&&Boolean(n),a=!n&&Boolean(i);return o||r||a}}Ht.\u0275fac=function(e){return new(e||Ht)},Ht.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ht,factory:Ht.\u0275fac});class Qt{constructor(e,t){this.viewDesignerCanvasService=e,this.canvasOutletHelperService=t,this.dropListDropped=new n.EventEmitter,this.dropListEnterPredicateBind=(0,m.throttle)(this.dropListEnterPredicate.bind(this),200)}ngOnInit(){this.dropListOrientation=this.canvasOutletHelperService.dropListOrientation}getViewComponentDragData(e){return{draggedViewComponentGuid:e.guid,draggedViewComponentDescriptor:e.descriptor,draggedViewComponentParents:this.layout.viewComponentWithParents}}onDragEntered(e){this.enforceDragToSelf(e.container)}onDragStarted(e){this.enforceDragToSelf(e.source.dropContainer)}remove(e,t){e.stopPropagation(),this.viewDesignerCanvasService.removeComponent(t.guid)}onSelectComponent(e,t){e.stopPropagation(),this.viewDesignerCanvasService.selectComponent(t.guid)}trackByFn(e,t){return t.guid}dropListEnterPredicate(e){return this.canvasOutletHelperService.canBeDropped(Object.assign(Object.assign({},e.data),{dropTargetViewComponentWithParents:this.layout.viewComponentWithParents||[]}))}enforceDragToSelf(e){let t=e.connectedTo;t=t.reduce((e,t)=>{if((0,m.isString)(t)){const i=C.CdkDropList._dropLists.find(e=>e.id===t);i&&e.push(i)}return e},[]);const i=e._dropListRef;f.asapScheduler.schedule(()=>{i.connectedTo(t.map(e=>e._dropListRef))})}}Qt.\u0275fac=function(e){return new(e||Qt)(n["\u0275\u0275directiveInject"](qt),n["\u0275\u0275directiveInject"](Ht))},Qt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Qt,selectors:[["rx-canvas-item-column"]],inputs:{isReadOnly:"isReadOnly",colIndex:"colIndex",column:"column",layout:"layout"},outputs:{dropListDropped:"dropListDropped"},decls:2,vars:9,consts:[["cdkDropList","",3,"cdkDropListOrientation","cdkDropListConnectedTo","cdkDropListEnterPredicate","cdkDropListData","id","cdkDropListDropped"],["cdkDrag","",3,"class","cdkDragData","cdkDragDisabled","cdkDragEntered","cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",3,"cdkDragData","cdkDragDisabled","cdkDragEntered","cdkDragStarted"],[1,"canvas-item",3,"click"],["cdkDragHandle","",1,"canvas-item-header",3,"hidden"],[1,"icon","d-icon-dots","mr-1"],[1,"label"],["class","remove-button btn btn-sm btn-link d-icon-cross_adapt p-0 px-1","type","button","aria-label","Close",3,"click",4,"ngIf"],[3,"layout","isReadOnly"],["type","button","aria-label","Close",1,"remove-button","btn","btn-sm","btn-link","d-icon-cross_adapt","p-0","px-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.dropListDropped.next(e)}),n["\u0275\u0275template"](1,F,10,16,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("cdkDropListOrientation",t.dropListOrientation)("cdkDropListConnectedTo",t.column.dndListIds)("cdkDropListEnterPredicate",t.dropListEnterPredicateBind)("cdkDropListData",n["\u0275\u0275pureFunction1"](7,M,t.colIndex))("id",t.column.listId),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.column.children)("ngForTrackBy",t.trackByFn))},directives:[C.CdkDropList,x.NgForOf,C.CdkDrag,C.CdkDragHandle,x.NgIf,Xt],pipes:[x.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}.cdk-drop-list[_ngcontent-%COMP%]{min-height:100px}.cdk-drop-list[_ngcontent-%COMP%] > .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5}.card-header[_ngcontent-%COMP%]{cursor:move}.canvas-item-wrapper.cdk-drag-preview[_ngcontent-%COMP%]{background:white;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.canvas-item[_ngcontent-%COMP%]{border:1px solid transparent;position:relative;padding:3px}.canvas-item.active[_ngcontent-%COMP%]{border-color:#20c997}.canvas-item-header[_ngcontent-%COMP%]{color:#fff;position:absolute;top:0;right:0;padding:1px 0 1px 5px;background:#20c997;cursor:move;z-index:1;display:flex}.canvas-item-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{white-space:nowrap}.remove-button[_ngcontent-%COMP%]{color:#fff}']});class Kt{constructor(e,t){this.canvasItemApi=e,this.canvasOutletHelperService=t}trackByColFn(e,t){return t.listId}onDropListDropped(e){const t=Object.assign(Object.assign({},e.item.data),{initialPropertiesByName:{},columnIndex:e.container.data.columnIndex});this.canvasOutletHelperService.setBeforeViewComponentDropState(t),t.preventDrop||this.canvasItemApi.core.dropComponent(t,e.currentIndex,this.outlet.name)}}Kt.\u0275fac=function(e){return new(e||Kt)(n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](Ht))},Kt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kt,selectors:[["rx-canvas-item-container"]],inputs:{outlet:"outlet",isReadOnly:"isReadOnly",layout:"layout"},decls:2,vars:2,consts:[[1,"row"],[3,"class","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[3,"ngClass","isReadOnly","colIndex","column","layout","dropListDropped"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,N,2,13,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.outlet.columns)("ngForTrackBy",t.trackByColFn))},directives:[x.NgForOf,x.NgClass,Qt],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.col-border[_ngcontent-%COMP%]{border-right:1px dashed #d6d7d8}']});class Jt{constructor(e,t,i,o){this.canvasItemApi=e,this.parentOutletComponent=t,this.canvasOutletHelperService=i,this.componentFactoryResolver=o,this.containerComponentInstance=null,this.destroyed$=new f.ReplaySubject(1),this.name=p.RX_VIEW_DEFINITION.defaultOutletName,this.skipParentPredicate=!1,this.dropListOrientation="vertical",this.beforeViewComponentDrop=new n.EventEmitter,this.dropPredicate=()=>!0}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}ngOnInit(){this.containerComponentInstance=this.canvasItemApi.core.registerOutlet(this.name,this.container,this.componentFactoryResolver.resolveComponentFactory(this.containerComponent||Kt)).instance,this.canvasOutletHelperService.dropListOrientation=this.dropListOrientation,this.canvasOutletHelperService.parentOutletComponent=this.parentOutletComponent,this.canvasOutletHelperService.dropPredicate=this.dropPredicate,this.canvasOutletHelperService.skipParentPredicate=this.skipParentPredicate,this.canvasOutletHelperService.containerComponentInstance=this.containerComponentInstance,this.canvasOutletHelperService.beforeViewComponentDrop$.pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.beforeViewComponentDrop.emit(e)})}canBeDropped(e){return this.canvasOutletHelperService.canBeDropped(e)}componentDropPredicate(e,t=!1){return this.canvasOutletHelperService.componentDropPredicate(e,t)}}Jt.\u0275fac=function(e){return new(e||Jt)(n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](Jt,12),n["\u0275\u0275directiveInject"](Ht),n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver))},Jt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jt,selectors:[["rx-canvas-outlet"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](R,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{name:"name",skipParentPredicate:"skipParentPredicate",containerComponent:"containerComponent",dropListOrientation:"dropListOrientation",dropPredicate:"dropPredicate"},outputs:{beforeViewComponentDrop:"beforeViewComponentDrop"},features:[n["\u0275\u0275ProvidersFeature"]([Ht])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class Yt{constructor(e,t){this.canvasItemComponent=e,this.viewDesignerCanvasComponent=t,this.defaultOutletName=p.RX_VIEW_DEFINITION.defaultOutletName}trackByFn(e,t){return t.name}}Yt.\u0275fac=function(e){return new(e||Yt)(n["\u0275\u0275directiveInject"](Xt),n["\u0275\u0275directiveInject"](Wt))},Yt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Yt,selectors:[["rx-designer"]],decls:1,vars:2,consts:[[3,"border","default-outlet","name","beforeViewComponentDrop",4,"ngFor","ngForOf","ngForTrackBy"],[3,"name","beforeViewComponentDrop"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,A,1,5,"rx-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.canvasItemComponent.layout.outlets)("ngForTrackBy",t.trackByFn)},directives:[x.NgForOf,Jt],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}rx-canvas-outlet[_ngcontent-%COMP%]{display:block}rx-canvas-outlet.default-outlet[_ngcontent-%COMP%]:not(:only-child)    >rx-canvas-item-container>.row>*>rx-canvas-item-column>.cdk-drop-list{min-height:300px}rx-canvas-outlet.default-outlet[_ngcontent-%COMP%]:only-child    >rx-canvas-item-container>.row>*>rx-canvas-item-column>.cdk-drop-list{min-height:calc(100vh - 155px)}rx-canvas-outlet.border[_ngcontent-%COMP%]{border:1px solid #d6d7d8}rx-canvas-outlet[_ngcontent-%COMP%] + rx-canvas-outlet[_ngcontent-%COMP%]{margin-top:10px}']});class Zt{constructor(e,t,i,n){this.viewDesignerFacade=e,this.rxViewComponentRegistryService=t,this.componentFactoryResolver=i,this.viewDesignerModels=n,this.designerComponentFactory=this.componentFactoryResolver.resolveComponentFactory(Yt),this.canvasDndListIds=[],this.extensionViewAllowedComponentTypes=new Set([p.RxViewComponentType.Container,p.RxViewComponentType.RichText,p.RxViewComponentType.RecordEditor,p.RxViewComponentType.Character,p.RxViewComponentType.Textarea,p.RxViewComponentType.Boolean,p.RxViewComponentType.Date,p.RxViewComponentType.DateTime,p.RxViewComponentType.Time,p.RxViewComponentType.Decimal,p.RxViewComponentType.Floating,p.RxViewComponentType.Integer,p.RxViewComponentType.LocalizedCharacter,p.RxViewComponentType.Selection,p.RxViewComponentType.SelectGroup,p.RxViewComponentType.RichTextarea,p.BwfViewComponentType.DynamicNamedList]),this.canvasLayout$=this.getRecursiveViewLayoutGuids().pipe((0,h.switchMap)(e=>e.length?this.viewDesignerFacade.areViewModelsReady$.pipe((0,h.filter)(Boolean),(0,h.switchMapTo)(this.viewDesignerFacade.viewDesignerModelState$.pipe((0,h.take)(1)))):this.viewDesignerFacade.viewDesignerModelState$.pipe((0,h.take)(1))),(0,h.map)(e=>{const t=e.viewDesignModel,i=e.viewComponentDesignModels;return this.canvasDndListIds.length=0,{guid:t.guid,factory:this.designerComponentFactory,outlets:t.layout.outlets.map(e=>({name:e.name,columns:e.columns.map((n,o)=>{const r=String(`${t.guid}-${e.name}-${o}`);return t.type!==p.ViewDefinitionType.Shell&&this.canvasDndListIds.push(r),Object.assign(Object.assign({},n),{children:n.children.map(e=>this.initializeCanvasItem(e,i,this.canvasDndListIds)),listId:r,dndListIds:this.canvasDndListIds})})})),model:null,descriptor:null,isSelected$:(0,f.of)(!1)}}),(0,h.tap)(()=>{this.canvasDndListIds.reverse()})),this.viewBreadcrumbItem$=this.viewDesignerFacade.getViewPropertyValue("displayName").pipe((0,h.concatMap)(e=>(0,f.of)(e?e===l.RX_APPLICATION.shellDefinitionName?"Application shell":e:"<New view>")),(0,h.withLatestFrom)(this.viewDesignerFacade.viewModelGuid$),(0,h.map)(([e,t])=>({label:e,data:{guid:t}}))),this.selectedComponentBreadcrumbItems$=this.viewDesignerFacade.selectedComponentGuid$.pipe((0,h.switchMap)(e=>e?(0,f.combineLatest)([this.viewDesignerFacade.breadcrumbs$,this.viewDesignerFacade.getParentComponentGuid(e)]).pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,h.map)(([[t],i])=>(0,m.isEmpty)(i)?[]:me(e,i).map(e=>{let n=t[e];if(!n){const t=i[e];n=this.rxViewComponentRegistryService.get(t.type).name}return{label:n,data:{guid:e}}}))):(0,f.of)([]))),this.breadcrumbItems$=(0,f.combineLatest)([this.viewBreadcrumbItem$,this.selectedComponentBreadcrumbItems$]).pipe((0,h.map)(([e,t])=>[e,...t])),this.validationIssues$=this.viewDesignerFacade.validationIssues$.pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewDesignerModelState$),(0,h.map)(([e,t])=>(0,m.flow)(e=>(0,m.mergeWith)(Object.assign({},e.issues),e.expressionIssues,(e=[],t=[])=>e.concat(t)),e=>(0,m.reduce)(e,(e,i,n)=>{var o;let r;if((null===(o=t.viewDesignModel)||void 0===o?void 0:o.guid)===n)r=t.viewDesignModel.displayName||"View designer";else if(t.viewComponentDesignModels[n]){const e=t.viewComponentDesignModels[n].type,i=this.rxViewComponentRegistryService.get(e);r=i&&i.name}return r&&e.push({title:r,issues:i.map(e=>({type:e.type,description:e.description,disableCorrection:e.disableCorrection,data:{guid:n,propertyName:e.propertyName,data:e.data}}))}),e},[]))(e)))}getLicensedComponents(){return this.rxViewComponentRegistryService.getLicensedComponents().pipe((0,h.first)(),(0,h.map)(e=>e.filter(e=>!this.rxViewComponentRegistryService.isDataComponentDescriptor(e)&&!e.hidden&&!e.isPageComponent)))}getRecursiveViewLayoutGuids(){return this.viewDesignerFacade.getViewPropertyValue("layout").pipe((0,h.switchMap)(e=>this.getRecursiveComponentLayoutGuids(e)))}getRecursiveComponentLayoutGuids(e){const t=p.RxViewLayout.getViewLayoutChildGuids(e);return t.length?(0,f.combineLatest)(t.map(e=>this.viewDesignerFacade.getComponentLayout(e).pipe((0,h.switchMap)(e=>e?this.getRecursiveComponentLayoutGuids(e).pipe((0,h.map)(e=>[...e,...t])):(0,f.of)(t))))):(0,f.of)([])}initializeCanvasItem(e,t,i){const n=t[e],o=this.rxViewComponentRegistryService.get(n.type),r={guid:n.guid,descriptor:o,factory:o.designComponentFactory,model:this.viewDesignerModels.get(n.guid),outlets:[],isSelected$:this.viewDesignerFacade.selectedComponentGuid$.pipe((0,h.map)(e=>e===n.guid)),label:o.name};return n.layout&&(r.viewComponentWithParents=me(n.guid,t).map(e=>({guid:e,type:t[e].type})),n.layout.outlets.forEach(e=>{const o={name:e.name,columns:e.columns.map((o,r)=>{const a=`${n.guid}-${e.name}-${r}`;return i.push(a),{children:o.children.map(e=>this.initializeCanvasItem(e,t,i)),span:o.span,listId:a,dndListIds:i}})};r.outlets.push(o)})),r}}Zt.\u0275fac=function(e){return new(e||Zt)(n["\u0275\u0275inject"](Et),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](Ft))},Zt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zt,factory:Zt.\u0275fac,providedIn:"root"});const ei={stencilGroups:{basicComponents:{label:"Basic components"},chatbotComponents:{label:"Chatbot components"},recordEditorInputs:{label:"Record editor inputs"}},inspectorTabs:{viewProperties:{tabId:0},componentProperties:{tabId:1},validationIssues:{tabId:2}}};class ti{constructor(e){this.stringService=e,this.allowedDropListIds=[],this.filterFormControl=new b.FormControl,this.componentsSubject$=new f.ReplaySubject(1)}set components(e){this.componentsSubject$.next(e)}ngOnInit(){this.viewComponentGroups$=(0,f.combineLatest)([this.filterFormControl.valueChanges.pipe((0,h.debounceTime)(200),(0,h.startWith)(null)),this.componentsSubject$]).pipe((0,h.map)(([e,t])=>(0,m.flow)(e=>(0,m.groupBy)(e,e=>e.group),e=>(0,m.map)(e,(e,t)=>({name:t,components:(0,m.sortBy)(e,e=>isFinite(e.index)?e.index:e.name)})),e=>(0,m.sortBy)(e,e=>e.name===ei.stencilGroups.basicComponents.label?"1":e.name===ei.stencilGroups.recordEditorInputs.label?"2":"3"+(0,m.lowerCase)(e.name)),t=>e?t.map(t=>Object.assign(Object.assign({},t),{components:t.components.filter(t=>this.stringService.caseInsensitiveSearch(t.name,e))})).filter(e=>e.components.length):t)(t)))}getViewComponentDragData(e){return{draggedViewComponentDescriptor:e}}trackByNameFn(e,t){return t.name}ngOnDestroy(){this.componentsSubject$.complete()}}ti.\u0275fac=function(e){return new(e||ti)(n["\u0275\u0275directiveInject"](g.RxStringService))},ti.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ti,selectors:[["rx-view-designer-palette"]],inputs:{components:"components",allowedDropListIds:"allowedDropListIds"},decls:5,vars:9,consts:[[1,"search-field-container"],["rx-id","stencil-search-field","placeholder","Search",3,"formControl"],[3,"config"],[3,"title","isOpen",4,"ngFor","ngForOf","ngForTrackBy"],[3,"title","isOpen"],["cdkDropList","","cdkDropListSortingDisabled","",1,"group-items-container",3,"cdkDropListConnectedTo"],["class","group-item","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"group-item",3,"cdkDragData"],[1,"group-item-inner"],[1,"item-name",3,"title"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"adapt-rx-search",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"adapt-accordion",2),n["\u0275\u0275template"](3,j,3,6,"adapt-accordion-tab",3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.filterFormControl),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](7,V,n["\u0275\u0275pureFunction0"](6,_))),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](4,4,t.viewComponentGroups$))("ngForTrackBy",t.trackByNameFn))},directives:[S.AdaptRxSearchComponent,b.NgControlStatus,b.FormControlDirective,S.AdaptAccordionComponent,x.NgForOf,S.AdaptAccordionTabComponent,C.CdkDropList,C.CdkDrag],pipes:[x.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}.group-items-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.group-items-container[_ngcontent-%COMP%]   .group-item.cdk-drag-placeholder[_ngcontent-%COMP%]{width:33.3%}.group-item[_ngcontent-%COMP%]{border-right:1px solid #d6d7d8;border-bottom:1px solid #d6d7d8;text-align:center;width:33.3%;cursor:move;height:90px;padding:3px 0}.group-item.cdk-drag-preview[_ngcontent-%COMP%]{background:white;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.group-item.cdk-drag-placeholder[_ngcontent-%COMP%]{border:0;width:100px;height:40px;padding:0;position:relative;z-index:3}.group-item.cdk-drag-placeholder[_ngcontent-%COMP%]   .group-item-inner[_ngcontent-%COMP%]{border:1px solid #d6d7d8;background:#fff}.group-item[_ngcontent-%COMP%]:nth-child(3n){border-right:none}.group-item-inner[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.item-image[_ngcontent-%COMP%]{color:#626668;font-size:40px;height:54px;flex-grow:1}.item-name[_ngcontent-%COMP%]{font-size:10px;overflow:hidden;height:34px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:1!important}adapt-accordion-tab[_ngcontent-%COMP%]     .card-block{padding:0}.form-group[_ngcontent-%COMP%]{margin:10px 20px}.search-field-container[_ngcontent-%COMP%]{padding:.9375rem}'],changeDetection:0});const ii=new n.InjectionToken("RX_VIEW_MODEL");class ni{constructor(e,t,i,o,r,a,s,l,d,c,u,m,g,v,y,b,x,C,S,D,I,R,w){this.viewDesignerFacade=e,this.rxNotificationService=t,this.rxDefinitionPickerCacheService=i,this.rxNamedListDefinitionCacheService=o,this.rxModalService=r,this.translateService=a,this.rxUtilityModalsService=s,this.rxViewDesignerHelperService=l,this.rxExpressionEditorService=d,this.rxViewDefinitionService=c,this.rxComponentCanDeactivateGuard=u,this.rxViewDefinitionGeneratorService=m,this.rxViewDesignerModels=g,this.rxLogService=v,this.injector=y,this.renderer=b,this.rxRecordDefinitionCacheService=x,this.rxAssociationDefinitionCacheService=C,this.rxProcessDefinitionCacheService=S,this.rxViewDefinitionCacheService=D,this.rxGainsightConfiguratorService=I,this.rxDefinitionNameService=R,this.rxFeatureService=w,this.viewDefinitionSaved=new n.EventEmitter,this.viewDefinitionErrorLoading=new n.EventEmitter,this.closeDesigner=new n.EventEmitter,this.destroyed$=new f.ReplaySubject(1),this.inspectorFocusEditorSubject=new f.Subject,this.isViewDefinitionChanged$=new f.BehaviorSubject(!1),this.validationIssues$=this.rxViewDesignerHelperService.validationIssues$.pipe((0,h.shareReplay)(1),(0,h.takeUntil)(this.destroyed$)),this.breadcrumbItems$=this.rxViewDesignerHelperService.breadcrumbItems$,this.canvasLayout$=this.rxViewDesignerHelperService.canvasLayout$,this.canvasDndListIds=this.rxViewDesignerHelperService.canvasDndListIds,this.extensionViewRootComponentType=p.RxViewComponentType.RecordEditor,this.isDesignMode=!0,this.isStencilExpanded=!0,this.isInspectorExpanded=!0,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.viewComponentInspectorEmptyText$=this.viewDesignerFacade.selectedComponentInspectorLayout$.pipe((0,h.switchMap)(e=>e?(0,f.of)(null):this.viewDesignerFacade.selectedComponentGuid$.pipe((0,h.withLatestFrom)(this.viewDesignerFacade.viewModel$),(0,h.map)(([e,t])=>e&&e!==t.guid?"Selected component has no properties.":"Select a component to view its properties here."))),(0,h.shareReplay)({refCount:!0,bufferSize:1})),this.selectedComponentModel$=this.viewDesignerFacade.selectedComponentGuid$.pipe((0,h.map)(e=>this.rxViewDesignerModels.get(e))),this.isReadOnly$=this.viewDesignerFacade.isViewReadOnly$,this.paletteComponents$=(0,f.combineLatest)([this.viewDesignerFacade.isExtensionView$.pipe((0,h.tap)(e=>this.isExtensionView=e)),this.viewDesignerFacade.isExtensionContainerSet$.pipe((0,h.tap)(e=>this.isExtensionContainerSet=e)),this.rxViewDesignerHelperService.getLicensedComponents().pipe((0,h.map)(e=>this.configuration.paletteComponentsPredicate?e.filter(e=>this.configuration.paletteComponentsPredicate(e)):e))]).pipe((0,h.switchMap)(([e,t,i])=>e?this.viewDesignerFacade.firstViewComponentModelType$.pipe((0,h.map)(e=>e===this.extensionViewRootComponentType?i.filter(({type:e})=>e!==this.extensionViewRootComponentType&&this.rxViewDesignerHelperService.extensionViewAllowedComponentTypes.has(e)):i.filter(({type:e})=>e===this.extensionViewRootComponentType))):(0,f.of)(i)));const E=this.injector.get(ii,null,n.InjectFlags.Optional);this.rxViewModel=E||this.injector.get(Lt),this.rxDefinitionPickerCacheService.registerConsumer(),this.rxNamedListDefinitionCacheService.registerConsumer(this.destroyed$),this.rxAssociationDefinitionCacheService.registerConsumer(this.destroyed$),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$),this.rxViewDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.isPreviewAvailable$=this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime").pipe((0,h.map)(e=>!this.configuration.disablePreview&&(Boolean(e)||!(0,m.isUndefined)(this.configuration.viewDefinitionName))),(0,h.takeUntil)(this.destroyed$)),this.viewDefinitionName$=this.viewDesignerFacade.getViewPropertyValue("name"),this.viewDesignerFacade.getViewPropertyValue("pageComponent").pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.isPageView=Boolean(e)}),this.viewDesignerFacade.viewDefinitionSaveSuccess$.pipe((0,h.takeUntil)(this.destroyed$)).subscribe(({viewDefinitionName:e})=>{this.rxNotificationService.addSuccessMessage("View definition saved successfully."),this.viewDefinitionSaved.emit(e),this.initViewDesigner()}),this.viewDesignerFacade.viewDefinitionLoadError$.pipe((0,h.takeUntil)(this.destroyed$)).subscribe(()=>this.viewDefinitionErrorLoading.emit()),this.hasValidationErrors$=this.validationIssues$.pipe((0,h.map)(e=>Boolean((0,m.filter)(e,{issues:[{type:c.ValidationIssueType.Error}]}).length)),(0,h.distinctUntilChanged)()),this.hasValidationWarning$=this.validationIssues$.pipe((0,h.map)(e=>Boolean((0,m.filter)(e,{issues:[{type:c.ValidationIssueType.Warning}]}).length)),(0,h.distinctUntilChanged)()),this.isSaveButtonDisabled$=(0,f.combineLatest)([this.hasValidationErrors$,this.viewDesignerFacade.areViewModelsReady$,this.isViewDefinitionChanged$,this.isReadOnly$]).pipe((0,h.map)(([e,t,i,n])=>e||!t||!i||n),(0,h.startWith)(!0)),this.isReadOnly$.pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),this.rxFeatureService.isFeatureEnabled("DRD21-11744")&&this.viewDefinitionName$.pipe((0,h.take)(1)).subscribe(e=>{this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:this.rxDefinitionNameService.getDisplayName(e)==l.RX_APPLICATION.shellDefinitionName?"Shell designer":"View designer"}})})}ngOnChanges(e){e.configuration.currentValue&&this.initViewDesigner(!0)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.inspectorFocusEditorSubject.complete(),this.isViewDefinitionChanged$.complete(),this.rxDefinitionPickerCacheService.unRegisterConsumer(),this.viewDesignerFacade.destroyViewDesigner(),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2","subProductLevel3"])}initViewDesigner(e=!1){var t;this.isViewDefinitionChanged$.getValue()&&this.isViewDefinitionChanged$.next(!1),null===(t=this.viewDefinitionChangeSubscription)||void 0===t||t.unsubscribe(),e&&this.viewDesignerFacade.initViewDesigner((0,m.pick)(this.configuration,["bundleId","viewDefinitionName","layoutTemplate"])),this.initViewDefinitionChangeSubscription()}initViewDefinitionChangeSubscription(){this.viewDefinitionChangeSubscription=this.viewDesignerFacade.areViewModelsReady$.pipe((0,h.filter)(Boolean),(0,h.take)(1),(0,h.switchMap)(()=>(0,f.combineLatest)([this.viewDesignerFacade.viewModel$,this.viewDesignerFacade.viewComponentModels$]).pipe((0,h.map)(([e,t])=>this.rxViewDefinitionGeneratorService.generate(e,t)),(0,h.distinctUntilChanged)(m.isEqual),(0,h.skip)(1),(0,h.take)(1),(0,h.takeUntil)(this.destroyed$))),(0,h.takeUntil)(this.destroyed$)).subscribe(()=>{this.isViewDefinitionChanged$.next(!0)})}onSelectComponent(e){this.viewDesignerFacade.selectComponent(e)}onDropComponent(e){this.viewDesignerFacade.insertComponent(e)}onRemoveComponent(e){this.rxUtilityModalsService.confirm("Are you sure you want to delete this view component?").then(t=>{t&&(this.viewDesignerFacade.removeViewComponents([e],!0),this.isPageView&&this.viewDesignerFacade.updateViewProperties({pageComponent:null}))})}onInspectorTabChange(e){this.viewDesignerFacade.selectInspectorTab({tabId:e.index})}toggleDesignMode(){this.isDesignMode&&this.viewDesignerFacade.generateViewDefinition(),this.isDesignMode=!this.isDesignMode}onComponentPropertiesChange(e){this.viewDesignerFacade.updateSelectedComponentProperties(e)}onEditorEvent(e,t){e.type===d.RX_VALIDATION_FORM_CONTROL.events.correctValidationIssue&&this.correctValidationIssue(e.payload.componentGuid,e.payload.propertyName),e.type===d.RX_REVERT_CUSTOMIZATION.events.revertCustomization&&this.revertCustomization(),e.type===d.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&this.openExpressionEditor(e.payload,t)}getExpressionProperties(e){return(this.viewComponentPropertyInspectorElementRef===e?this.viewDesignerFacade.selectedComponentProperties$:this.viewDesignerFacade.viewModel$).pipe((0,h.map)(t=>Array.from(this.renderer.selectRootElement(e.nativeElement,!0).querySelectorAll("rx-expression-form-control")).map(e=>{const i=e.getAttribute("property-path");return{path:i,value:(0,m.get)(t,i),label:e.getAttribute("property-label")}})))}openExpressionEditor(e,t){const i=this.viewComponentPropertyInspectorElementRef===t,n=i?this.viewDesignerFacade.selectedComponentProperties$:this.viewDesignerFacade.viewModel$;(0,f.combineLatest)([this.viewDesignerFacade.selectedComponentGuid$,n]).pipe((0,h.take)(1),(0,h.switchMap)(([o,r])=>{const a=i?this.rxViewDesignerModels.get(o):this.rxViewModel,s=null==a?void 0:a.expressionConfigurator;return s?this.rxExpressionEditorService.openEditor({property:{path:e.propertyPath,value:(0,m.get)(r,e.propertyPath),label:e.propertyLabel},isReadOnly:e.isReadOnly,expressionConfigurator:s,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}],expressionPropertyNavigator:{getProperties:this.getExpressionProperties.bind(this,t)}}).pipe((0,h.withLatestFrom)(n),(0,h.map)(([{path:e,value:t},i])=>{if(i.hasOwnProperty(e))return{[e]:t};{const n=(0,m.toPath)(e)[0];return(0,m.set)({[n]:(0,m.cloneDeep)(i[n])},e,t)}})):(this.rxLogService.debug("View designer: Expression editor cannot be opened without expression configurator."),f.EMPTY)}),(0,h.takeUntil)(this.destroyed$)).subscribe(e=>i?this.viewDesignerFacade.updateSelectedComponentProperties(e):this.viewDesignerFacade.updateViewProperties(e))}saveViewDefinition(){this.viewDesignerFacade.viewModel$.pipe((0,h.take)(1),(0,h.switchMap)(e=>{const t=e.type===p.ViewDefinitionType.Shell?"If you save your changes now, you will not be able to run this application using the old UI. Do you want to continue?":"If you save this view definition, you will not be able to open it in the old view designer. Do you want to continue?";return e.isAngularJsView?this.rxModalService.confirm({title:"Warning",modalStyle:c.RX_MODAL.modalStyles.warning,message:t}):(0,f.of)(!0)}),(0,h.filter)(Boolean),(0,h.takeUntil)(this.destroyed$)).subscribe(()=>{this.viewDesignerFacade.saveViewDefinition()})}onCorrectIssue(e){this.correctValidationIssue(e.data.guid,e.data.propertyName,e.data.data)}correctValidationIssue(e,t,i){this.viewDesignerFacade.selectComponent(e),setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:t,data:i}),10)}revertCustomization(){this.viewDefinitionName$.pipe((0,h.switchMap)(e=>this.rxViewDefinitionService.revertCustomization(e)),(0,h.takeUntil)(this.destroyed$)).subscribe(()=>{this.rxComponentCanDeactivateGuard.disable(),window.location.reload()})}onViewPropertiesChange(e){this.viewDesignerFacade.updateViewProperties(e)}showPreview(){this.viewDesignerFacade.runPreview()}canDeactivate(){let e=!0;return(0,f.combineLatest)([this.isViewDefinitionChanged$,this.isReadOnly$]).pipe((0,h.map)(([e,t])=>!e||t),(0,h.take)(1)).subscribe(t=>{e=t}),e}onBeforeComponentDropInRoot(e){this.isExtensionView&&(this.isExtensionContainerSet?e.draggedViewComponentDescriptor.type!==p.RxViewComponentType.RecordEditor&&(this.rxNotificationService.addWarningMessage("This view component can only be added inside a Record editor."),e.preventDrop=!0):(this.rxNotificationService.addWarningMessage("Select Extension container before adding view components."),e.preventDrop=!0))}}ni.\u0275fac=function(e){return new(e||ni)(n["\u0275\u0275directiveInject"](Et),n["\u0275\u0275directiveInject"](l.RxNotificationService),n["\u0275\u0275directiveInject"](d.RxDefinitionPickerCacheService),n["\u0275\u0275directiveInject"](r.RxNamedListDefinitionCacheService),n["\u0275\u0275directiveInject"](c.RxModalService),n["\u0275\u0275directiveInject"](u.TranslateService),n["\u0275\u0275directiveInject"](c.RxUtilityModalsService),n["\u0275\u0275directiveInject"](Zt),n["\u0275\u0275directiveInject"](d.RxExpressionEditorService),n["\u0275\u0275directiveInject"](p.RxViewDefinitionService),n["\u0275\u0275directiveInject"](l.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](Mt),n["\u0275\u0275directiveInject"](Ft),n["\u0275\u0275directiveInject"](l.RxLogService),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](s.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](o.RxAssociationDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](p.RxViewDefinitionCacheService),n["\u0275\u0275directiveInject"](d.RxGainsightConfiguratorService),n["\u0275\u0275directiveInject"](l.RxDefinitionNameService),n["\u0275\u0275directiveInject"](l.RxFeatureService))},ni.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ni,selectors:[["rx-view-designer"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](k,5,n.ElementRef),n["\u0275\u0275viewQuery"](B,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.viewPropertyInspectorElementRef=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.viewComponentPropertyInspectorElementRef=e.first)}},inputs:{configuration:"configuration"},outputs:{viewDefinitionSaved:"viewDefinitionSaved",viewDefinitionErrorLoading:"viewDefinitionErrorLoading",closeDesigner:"closeDesigner"},features:[n["\u0275\u0275ProvidersFeature"]([Lt]),n["\u0275\u0275NgOnChangesFeature"]],decls:45,vars:87,consts:[[3,"bundleName","breadcrumbItems","isDesignMode","isPreviewAvailable","isSaveButtonDisabled","breadcrumbSelected","toggleDesignMode","showPreview","save","closeDesigner"],[1,"rx-component-view-designer",3,"hidden"],["rx-id","palette",3,"title","isExpanded","toggle"],[3,"components","allowedDropListIds",4,"ngIf"],["class","p-3",3,"config",4,"ngIf"],[1,"rx-view-designer-container"],[1,"flex-grow-1",3,"layout","isReadOnly","componentSelect","componentRemove","componentDrop","beforeComponentDropInRoot"],["dockTo","right","rx-id","properties",3,"title","isExpanded","toggle"],["customCssTabContent","p-0","justify","justified",3,"tab-active","tab-active-changed"],["icon","d-icon-pencil"],[3,"focusEditor$","config","model","isReadOnly","modelChange","editorEvent"],["viewPropertyInspector",""],["icon","d-icon-gear"],["rxInspector","",3,"designerItemModel","focusEditor$","config","model","guid","isReadOnly","modelChange","editorEvent"],["viewComponentPropertyInspector",""],[1,"p-3",3,"hidden","config"],["icon","d-icon-exclamation_triangle"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[3,"components","allowedDropListIds"],[1,"p-3",3,"config"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-designer-header",0),n["\u0275\u0275listener"]("breadcrumbSelected",function(e){return t.onSelectComponent(e.data.guid)})("toggleDesignMode",function(){return t.toggleDesignMode()})("showPreview",function(){return t.showPreview()})("save",function(){return t.saveViewDefinition()})("closeDesigner",function(){return t.closeDesigner.emit()}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",1),n["\u0275\u0275elementStart"](6,"rx-blade",2),n["\u0275\u0275listener"]("toggle",function(){return t.isStencilExpanded=!t.isStencilExpanded}),n["\u0275\u0275template"](7,$,2,4,"rx-view-designer-palette",3),n["\u0275\u0275pipe"](8,"async"),n["\u0275\u0275template"](9,G,1,2,"adapt-alert",4),n["\u0275\u0275pipe"](10,"async"),n["\u0275\u0275template"](11,U,1,2,"adapt-alert",4),n["\u0275\u0275pipe"](12,"async"),n["\u0275\u0275pipe"](13,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"section",5),n["\u0275\u0275elementStart"](15,"rx-view-designer-canvas",6),n["\u0275\u0275listener"]("componentSelect",function(e){return t.onSelectComponent(e)})("componentRemove",function(e){return t.onRemoveComponent(e)})("componentDrop",function(e){return t.onDropComponent(e)})("beforeComponentDropInRoot",function(e){return t.onBeforeComponentDropInRoot(e)}),n["\u0275\u0275pipe"](16,"async"),n["\u0275\u0275pipe"](17,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-blade",7),n["\u0275\u0275listener"]("toggle",function(){return t.isInspectorExpanded=!t.isInspectorExpanded}),n["\u0275\u0275elementStart"](19,"adapt-tabset",8),n["\u0275\u0275listener"]("tab-active-changed",function(e){return t.onInspectorTabChange(e)}),n["\u0275\u0275pipe"](20,"async"),n["\u0275\u0275pipe"](21,"async"),n["\u0275\u0275pipe"](22,"async"),n["\u0275\u0275elementStart"](23,"adapt-tab-panel",9),n["\u0275\u0275elementStart"](24,"rx-form-builder",10,11),n["\u0275\u0275listener"]("modelChange",function(e){return t.onViewPropertiesChange(e)})("editorEvent",function(e){return t.onEditorEvent(e,t.viewPropertyInspectorElementRef)}),n["\u0275\u0275pipe"](26,"async"),n["\u0275\u0275pipe"](27,"async"),n["\u0275\u0275pipe"](28,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](29,"adapt-tab-panel",12),n["\u0275\u0275elementStart"](30,"rx-form-builder",13,14),n["\u0275\u0275listener"]("modelChange",function(e){return t.onComponentPropertiesChange(e)})("editorEvent",function(e){return t.onEditorEvent(e,t.viewComponentPropertyInspectorElementRef)}),n["\u0275\u0275pipe"](32,"async"),n["\u0275\u0275pipe"](33,"async"),n["\u0275\u0275pipe"](34,"async"),n["\u0275\u0275pipe"](35,"async"),n["\u0275\u0275pipe"](36,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](37,"adapt-alert",15),n["\u0275\u0275pipe"](38,"async"),n["\u0275\u0275pipe"](39,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](40,"adapt-tab-panel",16),n["\u0275\u0275elementStart"](41,"rx-validation-issues",17),n["\u0275\u0275listener"]("correctIssue",function(e){return t.onCorrectIssue(e)}),n["\u0275\u0275pipe"](42,"translate"),n["\u0275\u0275pipe"](43,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](44,q,3,8,"adapt-code-viewer",18)),2&e&&(n["\u0275\u0275property"]("bundleName",n["\u0275\u0275pipeBind1"](1,35,t.viewDesignerFacade.bundleFriendlyName$))("breadcrumbItems",n["\u0275\u0275pipeBind1"](2,37,t.breadcrumbItems$))("isDesignMode",t.isDesignMode)("isPreviewAvailable",n["\u0275\u0275pipeBind1"](3,39,t.isPreviewAvailable$))("isSaveButtonDisabled",n["\u0275\u0275pipeBind1"](4,41,t.isSaveButtonDisabled$)),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("hidden",!t.isDesignMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title","Palette")("isExpanded",t.isStencilExpanded),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isPageView&&!n["\u0275\u0275pipeBind1"](8,43,t.isReadOnly$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isPageView&&!n["\u0275\u0275pipeBind1"](10,45,t.isReadOnly$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](12,47,!n["\u0275\u0275pipeBind1"](13,49,t.viewDesignerFacade.isViewDefinitionLoading$)&&t.isReadOnly$)),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("layout",n["\u0275\u0275pipeBind1"](16,51,t.canvasLayout$))("isReadOnly",n["\u0275\u0275pipeBind1"](17,53,t.isReadOnly$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("title","Properties")("isExpanded",t.isInspectorExpanded),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("has-validation-warning",n["\u0275\u0275pipeBind1"](20,55,t.hasValidationWarning$))("has-validation-errors",n["\u0275\u0275pipeBind1"](21,57,t.hasValidationErrors$)),n["\u0275\u0275property"]("tab-active",n["\u0275\u0275pipeBind1"](22,59,t.viewDesignerFacade.selectedInspectorTabId$)),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("focusEditor$",t.inspectorFocusEditor$)("config",n["\u0275\u0275pipeBind1"](26,61,t.viewDesignerFacade.viewInspectorLayout$))("model",n["\u0275\u0275pipeBind1"](27,63,t.viewDesignerFacade.viewModel$))("isReadOnly",n["\u0275\u0275pipeBind1"](28,65,t.isReadOnly$)),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("designerItemModel",n["\u0275\u0275pipeBind1"](32,67,t.selectedComponentModel$))("focusEditor$",t.inspectorFocusEditor$)("config",n["\u0275\u0275pipeBind1"](33,69,t.viewDesignerFacade.selectedComponentInspectorLayout$))("model",n["\u0275\u0275pipeBind1"](34,71,t.viewDesignerFacade.selectedComponentProperties$))("guid",n["\u0275\u0275pipeBind1"](35,73,t.viewDesignerFacade.selectedComponentGuid$))("isReadOnly",n["\u0275\u0275pipeBind1"](36,75,t.isReadOnly$)),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("hidden",!n["\u0275\u0275pipeBind1"](38,77,t.viewComponentInspectorEmptyText$))("config",n["\u0275\u0275pureFunction1"](85,X,n["\u0275\u0275pipeBind1"](39,79,t.viewComponentInspectorEmptyText$))),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("definitionTypeDisplayName",n["\u0275\u0275pipeBind1"](42,81,"com.bmc.arsys.rx.client.view-definition.label"))("issueSections",n["\u0275\u0275pipeBind1"](43,83,t.validationIssues$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",!t.isDesignMode))},directives:[d.RxDesignerHeaderComponent,c.RxBladeComponent,x.NgIf,Wt,S.AdaptTabsComponent,S.AdaptTabsPanelComponent,d.FormBuilderComponent,d.InspectorDirective,S.AdaptAlertComponent,c.RxValidationIssuesComponent,ti,S.AdaptCodeViewerComponent],pipes:[x.AsyncPipe,u.TranslatePipe,x.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-component-view-designer[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:calc(100% - 50px);overflow:hidden}.rx-view-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:auto;padding:2.2rem 1rem 1rem}[_nghost-%COMP%]     .has-validation-warning:not(.has-validation-errors) .nav-link .d-icon-exclamation_triangle{color:#f1b521}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}']});class oi{}oi.\u0275fac=function(e){return new(e||oi)},oi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oi,declarations:[Wt,Xt,Kt,Jt,Qt],imports:[x.CommonModule,C.DragDropModule],exports:[Wt,Jt,Xt,Qt]}),oi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,C.DragDropModule]]});class ri{}ri.\u0275fac=function(e){return new(e||ri)},ri.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ri,declarations:[Yt],imports:[oi,x.CommonModule]}),ri.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[oi,x.CommonModule]]});class ai{}ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ai,declarations:[ti],imports:[x.CommonModule,C.DragDropModule,b.ReactiveFormsModule,S.AdaptAccordionModule,D.AdaptTextFieldModule,S.AdaptRxSearchModule],exports:[ti]}),ai.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,C.DragDropModule,b.ReactiveFormsModule,S.AdaptAccordionModule,D.AdaptTextFieldModule,S.AdaptRxSearchModule]]});class si extends c.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.inputParams={},this.inputParamNames=this.activeModalRef.getData().inputParams}isDirty(){return(0,m.values)(this.inputParams).some(e=>e)}cancel(){this.activeModalRef.dismiss(S.DismissReasons.CLOSE_BTN)}}si.\u0275fac=function(e){return new(e||si)(n["\u0275\u0275directiveInject"](S.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},si.\u0275cmp=n["\u0275\u0275defineComponent"]({type:si,selectors:[["rx-runtime-view-params-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:1,consts:[[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["btn-type","primary","rx-id","ok-button",3,"click"],["btn-type","secondary","rx-id","cancel-button",3,"click"],[3,"label","autofocus","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,W,2,4,"div",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-button",3),n["\u0275\u0275listener"]("click",function(){return t.activeModalRef.close(t.inputParams)}),n["\u0275\u0275text"](4," OK "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"adapt-button",4),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](6," Cancel "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.inputParamNames))},directives:[x.NgForOf,S.AdaptButtonComponent,S.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #d6d7d8;padding:10px 15px}.modal-footer[_ngcontent-%COMP%]   adapt-button[_ngcontent-%COMP%]{margin-right:5px}']});class li{}li.\u0275fac=function(e){return new(e||li)},li.\u0275mod=n["\u0275\u0275defineNgModule"]({type:li,declarations:[si],imports:[x.CommonModule,b.FormsModule,S.AdaptButtonModule,S.AdaptModalModule,S.AdaptRxTextfieldModule],exports:[si]}),li.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,b.FormsModule,S.AdaptButtonModule,S.AdaptModalModule,S.AdaptRxTextfieldModule]]});class di extends _t{constructor(e,t,i){super(e),this.injector=e,this.actionType=t,this.actionGuid=i,this.rxViewDataDictionaryService=this.injector.get(jt),this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.rxViewActionRegistryService=this.injector.get(p.RxViewActionRegistryService),this.commonDataDictionary$=this.rxViewDataDictionaryService.getActionDataDictionary(this.actionGuid)}getExpressionEvaluator(e){const t=this.rxViewActionRegistryService.get(this.actionType).parameters.find(t=>t.name===e);return(0,m.get)(t,"evaluatorService",this.rxDefaultExpressionEvaluatorService)}}class ci extends _t{constructor(e,t){super(t),this.fieldDefinition=e,this.injector=t,this.rxNamedListDefinitionCacheService=this.injector.get(r.RxNamedListDefinitionCacheService),this.rxRecordDefinitionCacheService=this.injector.get(s.RxRecordDefinitionCacheService),this.rxViewDataDictionaryService=this.injector.get(jt),this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.commonDataDictionary$=this.rxNamedListDefinitionCacheService.getNamedListDefinition(this.fieldDefinition.namedListDefinition).pipe((0,h.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName)),(0,h.switchMap)(e=>this.getNamedListBranch(e)),(0,h.withLatestFrom)(this.rxViewDataDictionaryService.getCommonDataDictionary()),(0,h.map)(([e,t])=>[e,...t]))}getExpressionEvaluator(){return this.rxDefaultExpressionEvaluatorService}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:l.ExpressionOperatorRowsByGroup.get(l.ExpressionOperatorGroup.AllServer)})}getNamedListBranch(e){const t=(0,m.chain)(e.fieldDefinitions).reject({resourceType:s.RX_RECORD_DEFINITION.resourceTypes.attachment}).map(e=>({label:e.name,expression:`'${e.id}'`,icon:"d-icon-file_o_gear",children:e.resourceType===s.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:"Options",children:(0,m.map)(e.optionNamesById,(e,t)=>({label:e,expression:t,icon:"d-icon-file_o_gear"}))}]:[]})).sortBy("label").value();return(0,f.of)({label:"Filter by",expanded:!0,children:t})}}class pi{constructor(e,t,i,n){this.injector=e,this.descriptor=t,this.guid=i,this.initialProps=n,this.destroyedSubject=new f.Subject,this.viewDesignerFacade=this.injector.get(Et),this.actionPropertyEditorConfigSubject=new f.BehaviorSubject([]),this.actionPropertiesSubject=new f.BehaviorSubject(this.initialProps),this.children=[],this.children$=this.viewDesignerFacade.getChildComponents(this.guid),this.destroyed$=this.destroyedSubject.asObservable(),this.actionPropertyEditorConfig$=this.actionPropertyEditorConfigSubject.pipe((0,h.takeUntil)(this.destroyed$)),this.actionProperties$=this.actionPropertiesSubject.pipe((0,h.map)(()=>(0,m.omit)(this.getActionProperties(),["name"])),(0,h.distinctUntilChanged)(m.isEqual),(0,h.takeUntil)(this.destroyed$)),this.children$.pipe((0,h.first)(),(0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.setChildren(e)})}updateActionProperties(e){this.actionPropertiesSubject.next(Object.assign(Object.assign({},this.actionPropertiesSubject.getValue()),e))}setActionProperties(e){const{name:t,index:i}=this.actionPropertiesSubject.getValue();this.actionPropertiesSubject.next(Object.assign(Object.assign({$condition$:null},e),{name:t,index:i}))}getActionProperties(){return this.actionPropertiesSubject.getValue()}getActionPropertyValue(e){return this.actionPropertiesSubject.getValue()[e]}setActionPropertyEditorConfig(e){const t=new di(this.injector,this.descriptor.name,this.guid);e=[{name:"$condition$",component:d.ExpressionFormControlComponent,options:{label:"Condition",tooltip:new l.Tooltip("The action will execute if the condition is true, or if no condition is defined."),dataDictionary$:t.getDataDictionary(),operators:t.getOperators()}},...e],this.actionPropertyEditorConfigSubject.next(e)}getActionPropertyEditorConfig(){return this.actionPropertyEditorConfigSubject.getValue()}setActionOutputDataDictionary(e){this.viewDesignerFacade.setActionDataDictionaryBranch(this.guid,this.getActionPropertyValue("index"),this.descriptor.label,e)}setChildren(e){this.children=e}getChildren(){return this.children}onDestroy(){this.destroyedSubject.next(),this.destroyedSubject.complete()}}class ui{constructor(e,t){this.injector=e,this.sandbox=t,this.guid=this.sandbox.guid,this.expressionConfigurator=new di(this.injector,this.sandbox.descriptor.name,this.sandbox.guid)}getExpressionConfigurator(){return this.expressionConfigurator}getPropertiesByName(){return this.sandbox.getActionProperties()}getChildren(){return this.sandbox.getChildren()}getOutputExpressionForPropertyPath(e){return`\${view.components.${this.guid}.output.${e}}`}}class mi extends ui{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.defaultProps=this.sandbox.descriptor.parameters.reduce((e,t)=>(e[t.name]=t.defaultValue,e),{}),this.sandbox.actionProperties$.pipe((0,h.take)(1)).subscribe(e=>{this.sandbox.updateActionProperties(Object.assign(Object.assign({},this.defaultProps),e)),this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())})}getActionEditorConfig(){return this.sandbox.descriptor.parameters.filter(e=>e.editor).map(e=>({name:e.name,component:e.editor,options:Object.assign({label:e.label,isRequired:e.isRequired,tooltip:e.tooltip},e.editor===d.ExpressionFormControlComponent?{dataDictionary$:this.expressionConfigurator.getDataDictionary(e.name),operators:this.expressionConfigurator.getOperators(e.name)}:e.editorOptions||{})}))}}class fi{constructor(e){this.injector=e,this.models=new Map}create(e,t,i){var n;const o=new pi(this.injector,e,t,(0,m.isFunction)(null===(n=null==e?void 0:e.designModel)||void 0===n?void 0:n.getInitialProperties)?Object.assign(Object.assign({},e.designModel.getInitialProperties((0,m.omit)(i,["index","name"]))),{name:i.name,index:i.index}):i),r=new(e.designModel||mi)(this.injector,o);return this.models.set(t,r),r}remove(e){this.models.delete(e)}get(e){return this.models.get(e)}ngOnDestroy(){this.models.forEach(e=>e.sandbox.onDestroy()),this.models.clear()}}fi.\u0275fac=function(e){return new(e||fi)(n["\u0275\u0275inject"](n.Injector))},fi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:fi,factory:fi.\u0275fac});class hi extends c.RxModalClass{constructor(e,t,i,n,o,r,a,s,l){super(i,l),this.rxViewActionRegistryService=e,this.rxStringService=t,this.activeModalRef=i,this.viewDesignerFacade=n,this.rxActionListModelManagerService=o,this.rxExpressionEditorService=r,this.rxGuidService=a,this.translateService=s,this.injector=l,this.availableActionDescriptors$=this.rxViewActionRegistryService.getLicensedActions(),this.selectedActions=[],this.config=this.activeModalRef.getData(),this.treeWrap=S.TreeWrap.WrapAll,this.destroyed$=new f.ReplaySubject(1),this.isEditorDirtySubject=new f.BehaviorSubject(!1),this.isSaveButtonDisabled$=this.isEditorDirtySubject.asObservable().pipe((0,h.map)(e=>!e)),this.availableActionTreeNodes$=this.availableActionDescriptors$.pipe((0,h.map)(e=>e.filter(e=>!e.hidden).sort((e,t)=>e.label.localeCompare(t.label)).map(e=>({data:e,label:e.label})))),this.actionLabelsMap$=this.availableActionDescriptors$.pipe((0,h.map)(e=>(0,m.transform)(e,(e,t)=>{e[t.name]=t.label},{}))),this.config.selectedActions=(0,m.map)(this.config.selectedActions,e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{index:(0,S.toNumber)(e.data.index)})})),this.selectedActions=(0,m.flow)(e=>(0,m.sortBy)(e,e=>e.data.index),e=>(0,m.map)(e,e=>{const t=this.rxViewActionRegistryService.get(e.data.name);this.viewDesignerFacade.setActionDataDictionaryBranch(e.guid,e.data.index,e.data.name);const i=this.rxActionListModelManagerService.create(t,e.guid,e.data);return{isOpen:Boolean(this.config.actionToEdit)&&e.guid===this.config.actionToEdit.guid,model:i,config$:i.sandbox.actionPropertyEditorConfig$.pipe((0,h.map)(e=>[{controls:e}])),name:t.name}}))(this.config.selectedActions)}isDirty(){return this.isEditorDirtySubject.getValue()}addAction(e,t=this.selectedActions.length){const i=this.rxGuidService.generate();this.viewDesignerFacade.setActionDataDictionaryBranch(i,t,e.name);const n=this.rxActionListModelManagerService.create(e,i,{name:e.name,index:t});this.selectedActions.splice(t,0,{isOpen:!0,model:n,config$:n.sandbox.actionPropertyEditorConfig$.pipe((0,h.map)(e=>[{controls:e}])),name:e.name}),this.updateIndexProp(),this.markEditorAsDirty(),setTimeout(()=>{this.accordionTabEls.toArray()[t].nativeElement.scrollIntoView({block:"nearest"})})}onSave(){const e=this.selectedActions.map(e=>{var t,i,n;return{guid:e.model.guid,data:e.model.getPropertiesByName(),children:null!==(n=null===(i=(t=e.model).getChildren)||void 0===i?void 0:i.call(t))&&void 0!==n?n:null}});this.activeModalRef.close(e)}removeAction(e){(0,m.pull)(this.selectedActions,e),this.rxActionListModelManagerService.remove(e.model.guid),this.viewDesignerFacade.removeActionDataDictionaryBranch(e.model.guid),this.markEditorAsDirty()}moveAction(e,t){(0,C.moveItemInArray)(this.selectedActions,e,t),this.updateIndexProp(),this.markEditorAsDirty()}toggleOpen(e){this.selectedActions.forEach(t=>t.isOpen=e)}onSelectedActionsListDrop(e){var t;const i=e.item.data;(null===(t=i.model)||void 0===t?void 0:t.guid)?this.moveAction(e.previousIndex,e.currentIndex):this.addAction(i,e.currentIndex)}openExpressionEditor(e,t,i,n=!1,o){this.rxExpressionEditorService.openEditor({property:{path:t,value:(0,m.get)(e.sandbox.getActionProperties(),t),label:i},isReadOnly:n,expressionConfigurator:e.getExpressionConfigurator(),legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}],expressionPropertyNavigator:{getProperties:()=>{const t=Array.from(o.querySelectorAll("rx-expression-form-control")).map(t=>{const i=t.getAttribute("property-path");return{path:i,value:(0,m.get)(e.sandbox.getActionProperties(),i),label:t.getAttribute("property-label")}});return(0,f.of)(t)}}}).pipe((0,h.map)(({path:t,value:i})=>{const n=e.sandbox.getActionProperties(),o=t in n?t:(0,m.toPath)(t)[0];return(0,m.set)({[o]:(0,m.cloneDeep)(n[o])},t,i)})).subscribe(t=>{e.sandbox.updateActionProperties(t),this.markEditorAsDirty()})}onEvent(e,t,i){e.type===d.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&this.openExpressionEditor(t,e.payload.propertyPath,e.payload.propertyLabel,e.payload.isReadOnly,i)}updateIndexProp(){this.selectedActions.forEach((e,t)=>{e.model.sandbox.updateActionProperties({index:t})}),this.viewDesignerFacade.updateActionDataDictionaryBranchOrder(this.selectedActions.reduce((e,t,i)=>(e[t.model.guid]=i,e),{}))}markEditorAsDirty(){this.isEditorDirtySubject.next(!0)}ngAfterViewInit(){const e=(0,m.findIndex)(this.selectedActions,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}ngOnDestroy(){this.isEditorDirtySubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.viewDesignerFacade.removeAllActionDataDictionaryBranches()}cancel(){this.activeModalRef.dismiss(S.DismissReasons.CLOSE_BTN)}}hi.\u0275fac=function(e){return new(e||hi)(n["\u0275\u0275directiveInject"](p.RxViewActionRegistryService),n["\u0275\u0275directiveInject"](g.RxStringService),n["\u0275\u0275directiveInject"](S.ActiveModalRef),n["\u0275\u0275directiveInject"](Et),n["\u0275\u0275directiveInject"](fi),n["\u0275\u0275directiveInject"](d.RxExpressionEditorService),n["\u0275\u0275directiveInject"](g.RxGuidService),n["\u0275\u0275directiveInject"](u.TranslateService),n["\u0275\u0275directiveInject"](n.Injector))},hi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hi,selectors:[["rx-action-list-editor-dialog"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](S.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275ProvidersFeature"]([fi]),n["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:20,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-center"],[1,"mt-2"],["name","question_circle_o","appendToBody","true",1,"ml-2",3,"adaptPopover"],["class","btn-group",4,"ngIf"],["id","selected-action-list","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],["class","card-block",4,"ngIf"],[1,"card-block"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngIf","ngIfElse"],["adaptTreeEmptyStateTemplate",""],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["filter","true",3,"value","wrap"],["adaptTreeNodeTemplate",""],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData",4,"ngIf"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData"],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["container",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["class","rx-ellipsis","rx-id","card-title",3,"title",4,"ngIf"],["class","right-header-block",4,"ngIf"],[1,"d-block",3,"config","model","isReadOnly","modelChange","editorEvent"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,Z,8,6,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275elementStart"](6,"h4",5),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](9,"adapt-icon",6),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,ee,7,6,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedActionsListDrop(e)}),n["\u0275\u0275elementStart"](13,"adapt-accordion",9),n["\u0275\u0275template"](14,oe,13,17,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,re,3,3,"div",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"div",12),n["\u0275\u0275template"](17,ae,4,6,"button",13),n["\u0275\u0275elementStart"](18,"button",14),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](19),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275pipe"](21,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.config.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,12,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("adaptPopover",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.tooltip")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.selectedActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.selectedActions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.selectedActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](20,16,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](21,18,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[x.NgIf,S.AdaptIconComponent,S.AdaptPopoverDirective,C.CdkDropList,S.AdaptAccordionComponent,x.NgForOf,S.AdaptButtonComponent,S.AdaptTreeComponent,S.AdaptTreeNodeTemplateDirective,C.CdkDrag,S.AdaptEmptyStateComponent,S.AdaptAccordionTabComponent,d.FormBuilderComponent,C.CdkDragHandle],pipes:[u.TranslatePipe,x.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]  .a-tree__node_leaf .a-tree__toggle{display:none}']});class gi{}gi.\u0275fac=function(e){return new(e||gi)},gi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gi,declarations:[hi],imports:[x.CommonModule,S.AdaptRxSearchModule,S.AdaptButtonModule,S.AdaptAccordionModule,C.DragDropModule,S.AdaptEmptyStateModule,d.ExpressionEditorModule,b.FormsModule,d.RxFormBuilderModule,S.AdaptIconModule,S.AdaptPopoverModule,u.TranslateModule,S.AdaptTreeModule],exports:[hi]}),gi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,S.AdaptRxSearchModule,S.AdaptButtonModule,S.AdaptAccordionModule,C.DragDropModule,S.AdaptEmptyStateModule,d.ExpressionEditorModule,b.FormsModule,d.RxFormBuilderModule,S.AdaptIconModule,S.AdaptPopoverModule,u.TranslateModule,S.AdaptTreeModule]]});class vi extends d.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.rxViewActionRegistryService=t,this.availableActions$=this.rxViewActionRegistryService.getLicensedActions(),this.selectedActions=[],this.availableActions$.subscribe(e=>{this.actionLabelsMap=(0,m.transform)(e,(e,t)=>{e[t.name]=t.label},{})})}focus(e){(null==e?void 0:e.actionIndex)>=0?this.openActionSelector(this.selectedActions.find(t=>t.data.index===e.actionIndex)):this.openActionSelector()}openActionSelector(e){this.rxModalService.openModal({title:"Edit actions",data:{selectedActions:this.value,actionToEdit:e,isReadOnly:this.isDisabled},content:hi,size:p.OpenViewActionModalSize.Large,testID:"edit-actions"}).then(e=>{this.value=e}).catch(m.noop)}onSetValue(){this.updateSortedActionsList()}onWriteValue(e){this.updateSortedActionsList()}removeAction(e){this.value=(0,m.without)(this.value,e)}editAction(e){this.openActionSelector(e)}updateSortedActionsList(){this.selectedActions=(0,m.sortBy)(this.value,e=>e.data.index)}}vi.\u0275fac=function(e){return new(e||vi)(n["\u0275\u0275directiveInject"](c.RxModalService),n["\u0275\u0275directiveInject"](p.RxViewActionRegistryService))},vi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vi,selectors:[["rx-action-list-control"]],inputs:{options:"options",tooltip:"tooltip"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:vi,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0","pb-1",3,"click"],["name","plus_circle",1,"mr-1"],["class","align-middle",4,"ngIf"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],["class","list-unstyled mb-0",4,"ngIf"],[1,"align-middle"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],[1,"text-tertiary"],[1,"list-unstyled","mb-0"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openActionSelector()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit actions\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,se,3,2,"span",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,le,2,0,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,pe,2,1,"ul",5)),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.tooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",0===t.selectedActions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.selectedActions.length>0))},directives:[S.AdaptButtonComponent,S.AdaptIconComponent,x.NgIf,S.AdaptPopoverDirective,x.NgForOf],encapsulation:2});class yi{}yi.\u0275fac=function(e){return new(e||yi)},yi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:yi,declarations:[vi],imports:[x.CommonModule,S.AdaptIconModule,S.AdaptButtonModule,gi,S.AdaptPopoverModule],exports:[vi]}),yi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,S.AdaptIconModule,S.AdaptButtonModule,gi,S.AdaptPopoverModule]]});class bi{constructor(e){this.viewDesignerFacade=e,this.permissions=[],this.destroyed$=new f.ReplaySubject(1)}ngOnInit(){this.viewDesignerFacade.getComponentPermissions(this.options.componentGuid).pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.permissions=e})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onPermissionsChange(e){this.viewDesignerFacade.updateComponentModel(this.options.componentGuid,{permissions:e})}}bi.\u0275fac=function(e){return new(e||bi)(n["\u0275\u0275directiveInject"](Et))},bi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bi,selectors:[["rx-component-permission-editor-widget"]],inputs:{options:"options",isDisabled:"isDisabled"},decls:1,vars:3,consts:[[3,"options","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-permission-editor",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.permissions=e})("ngModelChange",function(e){return t.onPermissionsChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.options)("disabled",t.isDisabled)("ngModel",t.permissions)},directives:[d.RxPermissionEditorComponent,b.NgControlStatus,b.NgModel],encapsulation:2});class xi{}xi.\u0275fac=function(e){return new(e||xi)},xi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xi,declarations:[bi],imports:[x.CommonModule,b.FormsModule,d.RxPermissionEditorModule]}),xi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,b.FormsModule,d.RxPermissionEditorModule]]});class Ci{}Ci.\u0275fac=function(e){return new(e||Ci)},Ci.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ci,declarations:[kt],imports:[x.CommonModule,b.FormsModule,d.CustomizationOptionsModule]}),Ci.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,b.FormsModule,d.CustomizationOptionsModule]]});class Si extends d.InspectorWidgetBase{constructor(e){super(e),this.injector=e,this.actions=[],this.modelSandbox=this.designerItemModel.sandbox,this.destroyed$=new f.ReplaySubject(1)}ngOnInit(){this.modelSandbox.getChildComponents().pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.actions=e})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onActionsChange(e){this.modelSandbox.setChildren(this.getActionComponentPayloads(e))}focus(e){this.actionListControlComponent.focus(e)}getActionComponentPayloads(e){return e.map(e=>Object.assign({type:p.RxViewComponentType.Action},e))}}Si.\u0275fac=function(e){return new(e||Si)(n["\u0275\u0275directiveInject"](n.Injector))},Si.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Si,selectors:[["rx-action-list-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](vi,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:5,consts:[[3,"disabled","ngModel","tooltip","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-action-list-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.actions=e})("ngModelChange",function(e){return t.onActionsChange(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](1,3,t.modelSandbox.isViewReadOnly$))("ngModel",t.actions)("tooltip",null==t.options?null:t.options.tooltip)},directives:[vi,b.NgControlStatus,b.NgModel],pipes:[x.AsyncPipe],encapsulation:2});class Di{}Di.\u0275fac=function(e){return new(e||Di)},Di.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Di,declarations:[Si],imports:[x.CommonModule,yi,b.FormsModule]}),Di.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,yi,b.FormsModule]]});class Ii{constructor(e,t){this.injector=e,this.sandbox=t}get expressionConfigurator(){return this._expressionConfigurator||(this._expressionConfigurator=new(this.sandbox.descriptor.expressionConfigurator||Vt)(this.injector,this.sandbox.guid,this,this.sandbox.descriptor.type)),this._expressionConfigurator}getExpressionForProperty(e){return`\${view.components.${this.sandbox.guid}.${e}}`}}const Ri=[{id:p.RxDevice.Desktop,name:"Desktop"},{id:p.RxDevice.Tablet,name:"Tablet"},{id:p.RxDevice.Mobile,name:"Mobile"}];function wi(){return{name:p.RX_AVAILABLE_ON_DEVICES_PROP_NAME,component:d.SelectFormControlComponent,options:{label:"Available on devices",options:Ri,multiple:!0,required:!0,hideSelectAllButton:!0,hideDeselectAllButton:!0}}}function Ei(){return{name:p.RX_HIDDEN_PROP_NAME,component:d.OptionalExpressionInspectorControlComponent,options:{label:"Hidden"}}}function Fi(){return{name:p.RX_DISABLED_PROP_NAME,component:d.OptionalExpressionInspectorControlComponent,options:{label:"Disabled"}}}function Mi(e=[]){return{name:p.RX_STYLES_PROP_NAME,component:d.TagsFormControlComponent,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new l.Tooltip("Enter CSS class names to apply to this view component."),errorCheck:Tt,autocompleteValues:e}}}function Ti(){return[Ei(),wi(),Mi()]}class Oi{constructor(e,t,i,n){this.rxViewActionRegistryService=e,this.rxStringService=t,this.rxLogService=i,this.rxViewExpressionValidatorService=n}validate(e,t){const i=(0,m.flow)(e=>e.map(({data:e})=>{const i=this.rxViewActionRegistryService.get(e.name);return[(0,f.of)(this.validateRequiredProps(e,i,t)),this.performCustomValidation(e,i,t),this.validateExpressions(e,i,t)]}),m.flatten)(e);return(0,f.combineLatest)([(0,f.of)(this.validateActionSequence(e,t)),...i]).pipe((0,h.map)(m.flatten))}performCustomValidation(e,t,i){const n=this.rxViewActionRegistryService.getDesignManager(t.name);return n?n.validate(e,i).pipe((0,h.map)(t=>t.map(t=>Object.assign(Object.assign({},t),{data:{actionIndex:e.index}})))):(0,f.of)([])}validateRequiredProps(e,t,i){return(0,m.flow)(t=>t.filter(t=>!0===t.isRequired&&this.rxStringService.isEmptySafe(e[t.name])),n=>n.map(n=>({type:"error",description:`${t.label} action: ${n.label||n.name} cannot be blank.`,propertyName:i,data:{actionIndex:e.index}})))(t.parameters)}validateExpressions(e,t,i){const n=t.parameters.filter(t=>!0===t.enableExpressionEvaluation&&e[t.name]).map(n=>this.rxViewExpressionValidatorService.validate(e[n.name],i,n.label||n.name,n.evaluatorService).pipe((0,h.map)(i=>i.map(i=>Object.assign(Object.assign({},i),{description:`${t.label} action: ${i.description}`,data:{actionIndex:e.index}})))));return n.length?(0,f.combineLatest)(n).pipe((0,h.map)(m.flatten)):(0,f.of)([])}validateActionSequence(e,t){return(0,m.flow)(e=>(0,m.map)(e,({data:i})=>{const n=this.rxViewActionRegistryService.get(i.name);return n?(0,m.map)(i,(o,r)=>{var a;if((null===(a=n.parameters.find(e=>e.name===r))||void 0===a?void 0:a.enableExpressionEvaluation)&&this.rxStringService.isNonEmptyString(o)){const a=o.match(/\${view\.components\.([0-9a-z-]+)\..+}/);if(a&&a[1]){const o=(0,m.find)(e,{guid:a[1]});if(Number(null==o?void 0:o.data.index)>Number(i.index))return{type:"error",description:`${n.label} action: invalid expression for ${r}.`,propertyName:t}}}}):[]}),m.flatten,m.compact)(e)}}Oi.\u0275fac=function(e){return new(e||Oi)(n["\u0275\u0275inject"](p.RxViewActionRegistryService),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxLogService),n["\u0275\u0275inject"](Pt))},Oi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Oi,factory:Oi.\u0275fac,providedIn:"root"});class Ni{constructor(e,t,i){this.injector=e,this.guid=t,this.descriptor=i,this.viewDesignerFacade=this.injector.get(Et),this.systemActions$=this.injector.get(v.Actions),this.viewDesignerDispatcher=this.injector.get(Ve),this.rxViewDesignerModels=this.injector.get(Ft),this.childModelsInitialized$=new f.BehaviorSubject(!1),this.dispatcher$=new f.Subject,this.breadcrumbs$=new f.ReplaySubject(1),this.setUpPublicStreams(),this.viewDesignerFacade.getComponentType(t).pipe((0,h.take)(1)).subscribe(e=>this.componentType=e),this.viewDesignerFacade.getComponentModel(this.guid).pipe((0,h.map)(e=>Boolean(e.lastUpdateTime||e.name)),(0,h.switchMap)(e=>e?this.viewDesignerFacade.viewModelsInitialized$:(0,f.of)(null)),(0,h.take)(1),(0,h.takeUntil)(this.destroyed$)).subscribe(()=>{this.childModelsInitialized$.next(!0)}),this.viewModelsInitialized$=this.viewDesignerFacade.viewModelsInitialized$.pipe((0,h.takeUntil)(this.destroyed$)),this.isComponentSelected$.pipe((0,h.filter)(e=>e),(0,h.first)(),(0,h.switchMap)(()=>this.breadcrumbs$),(0,h.distinctUntilChanged)(),(0,h.takeUntil)(this.destroyed$)).subscribe(e=>{this.dispatcher$.next(Me({guid:this.guid,label:e}))}),(0,f.merge)(this.dispatcher$.pipe((0,v.ofType)(Re),(0,h.skipWhile)(e=>0===e.issues.length)),this.dispatcher$.pipe((0,h.filter)(e=>e.type!==Re.type))).pipe((0,h.takeUntil)(this.destroyed$)).subscribe(e=>this.viewDesignerDispatcher.dispatch(e)),this.destroyed$.subscribe(()=>{this.childModelsInitialized$.complete(),this.dispatcher$.complete(),this.breadcrumbs$.complete()})}createError(e,t,i){return{type:"error",description:e,propertyName:t,disableCorrection:i}}createWarning(e,t,i){return{type:"warning",description:e,propertyName:t,disableCorrection:i}}getComponent(e){return this.viewDesignerFacade.getComponent(e)}getChildComponents(e){return this.childModelsInitialized$.asObservable().pipe((0,h.filter)(Boolean),(0,h.switchMapTo)(this.viewDesignerFacade.getChildComponents(this.guid,e)),(0,h.takeUntil)(this.destroyed$))}getChildComponentsTree(){return this.childModelsInitialized$.asObservable().pipe((0,h.filter)(e=>e),(0,h.switchMapTo)(this.viewDesignerFacade.getChildComponentTree(this.guid)),(0,h.shareReplay)(1),(0,h.takeUntil)(this.destroyed$))}getChildComponentGuids(e,t=!1){return this.childModelsInitialized$.asObservable().pipe((0,h.filter)(Boolean),(0,h.switchMapTo)(this.viewDesignerFacade.getChildComponentGuids(this.guid,t,e)),(0,h.takeUntil)(this.destroyed$))}setChildren(e,t){this.dispatcher$.next(Fe({payload:{guid:t||this.guid,data:e}}))}setChildrenByType(e,t){this.dispatcher$.next(Fe({payload:{guid:this.guid,data:e,types:t}}))}getParentComponentGuid(e){return this.viewDesignerFacade.getParentComponentGuid(this.guid,e).pipe((0,h.distinctUntilChanged)(),(0,h.takeUntil)(this.destroyed$))}setValidationIssues(e){this.dispatcher$.next(Re({issues:e,guid:this.guid}))}updateComponentProperties(e){this.viewDesignerFacade.updateComponentProperties(this.guid,e)}getComponentPropertyValue(e,t=this.guid){return this.viewDesignerFacade.getComponentPropertyValue(t,e).pipe((0,h.shareReplay)(1),(0,h.takeUntil)(this.destroyed$))}getViewPropertyValue(e){return this.viewDesignerFacade.getViewPropertyValue(e).pipe((0,h.shareReplay)(1),(0,h.takeUntil)(this.destroyed$))}updateInspectorConfig(e){this.viewDesignerFacade.setComponentInspector(this.guid,e)}setBreadcrumbs(e){this.breadcrumbs$.next(e)}addComponent(e){const t=(0,m.castArray)(e).map(e=>Object.assign(Object.assign({},e),{parentGuid:this.guid}));this.dispatcher$.next(Pe({payload:t}))}selectComponent(e){this.dispatcher$.next(Te({guid:e}))}removeComponents(e,t){this.viewDesignerFacade.removeViewComponents(e,t)}moveComponent(e,t,i){const n={guid:e},o=p.RX_VIEW_DEFINITION.defaultOutletName;this.dispatcher$.next(Ae({data:n,insertIndex:t,columnIndex:0,outletName:o,targetGuid:i}))}setLayout(e){this.dispatcher$.next(Oe({guid:this.guid,cols:e}))}getLayout(e){return this.viewDesignerFacade.getComponentLayout(e).pipe((0,h.shareReplay)(1),(0,h.takeUntil)(this.destroyed$))}setCommonDataDictionary(e){this.viewDesignerFacade.setComponentCommonDataDictionaryBranch(this.guid,e)}setSettablePropertiesDataDictionary(e,t){this.viewDesignerFacade.setComponentSettablePropertiesDataDictionary(this.guid,e,t)}getComponentModel(e){return this.rxViewDesignerModels.get(e)}getComponentsByType(e){return this.viewDesignerFacade.getComponentsByType(e).pipe((0,h.takeUntil)(this.destroyed$))}setUpPublicStreams(){const e=this.systemActions$.pipe((0,v.ofType)(Se),(0,h.filter)(e=>e.guids.includes(this.guid)));this.destroyed$=(0,f.merge)(e,this.viewDesignerFacade.initViewDesigner$,this.viewDesignerFacade.destroyViewDesigner$).pipe((0,h.mapTo)(!0),(0,h.first)()),this.componentProperties$=this.viewDesignerFacade.getComponentProperties(this.guid).pipe((0,h.filter)(Boolean),(0,h.takeUntil)(this.destroyed$),(0,h.shareReplay)(1)),this.isComponentSelected$=this.systemActions$.pipe((0,v.ofType)(Te),(0,h.map)(({guid:e})=>e===this.guid),(0,h.distinctUntilChanged)(),(0,h.startWith)(!1),(0,h.takeUntil)(this.destroyed$),(0,h.shareReplay)(1)),this.isViewReadOnly$=this.viewDesignerFacade.isViewReadOnly$}}class Ai{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.viewDesignerFacade=t,this.rxViewExpressionValidatorService=i,this.issuesObservableMap=new Map}registerComponents(e){e.forEach(e=>this.issuesObservableMap.set(e,this.getComponentValidationIssues(e))),this.initValidation()}unregisterComponents(e){e.forEach(e=>this.issuesObservableMap.delete(e)),this.initValidation()}unregisterAllComponents(){var e;this.issuesObservableMap.clear(),null===(e=this.validateSubscription)||void 0===e||e.unsubscribe()}initValidation(){var e;null===(e=this.validateSubscription)||void 0===e||e.unsubscribe(),this.validateSubscription=(0,f.combineLatest)(Array.from(this.issuesObservableMap.entries()).map(([e,t])=>t.pipe((0,h.map)(t=>({[e]:t}))))).pipe((0,h.map)(e=>(0,m.merge)({},...e)),(0,h.skipWhile)(e=>(0,m.every)(Object.values(e),m.isEmpty)),(0,h.debounceTime)(0)).subscribe(e=>{this.viewDesignerFacade.setExpressionValidationIssues(e)})}getComponentValidationIssues(e){return this.viewDesignerFacade.getComponentType(e).pipe((0,h.take)(1),(0,h.switchMap)(t=>{const i=this.rxViewComponentRegistryService.get(t),n=(0,m.filter)(null==i?void 0:i.properties,{enableExpressionEvaluation:!0}),o=(0,m.map)(n,"name"),r=new Map(n.map(e=>[e.name,e]));return o.length?(0,f.combineLatest)(o.map(t=>this.viewDesignerFacade.getComponentPropertyValue(e,t).pipe((0,h.switchMap)(i=>this.rxViewExpressionValidatorService.validate(i,t,r.get(t).label,r.get(t).evaluatorService).pipe((0,h.takeUntil)(this.viewDesignerFacade.allComponentGuids$.pipe((0,h.filter)(t=>!t.has(e))))))))).pipe((0,h.map)(m.flatten)):(0,f.of)([])}),(0,h.publishReplay)(1),(0,h.refCount)())}}Ai.\u0275fac=function(e){return new(e||Ai)(n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](Et),n["\u0275\u0275inject"](Pt))},Ai.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ai,factory:Ai.\u0275fac,providedIn:"root"});class Pi{getInitialComponentProperties(e,t){var i;let n=e;return(0,m.isFunction)(null===(i=t.designComponentModel)||void 0===i?void 0:i.getInitialProperties)&&(n=t.designComponentModel.getInitialProperties(e)),n}getDefaultComponentPermissions(e){var t;let i=null;return(0,m.isFunction)(null===(t=e.designComponentModel)||void 0===t?void 0:t.getDefaultPermissions)&&(i=e.designComponentModel.getDefaultPermissions()),i}}Pi.\u0275fac=function(e){return new(e||Pi)},Pi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Pi,factory:Pi.\u0275fac,providedIn:"root"});class ji{constructor(e,t,i,n,o,r,a,s,l,d){this.actions$=e,this.injector=t,this.viewDesignerModels=i,this.rxGuidService=n,this.store$=o,this.rxViewComponentRegistryService=r,this.rxViewDesignerInspectorService=a,this.rxViewExpressionValidatorRegistryService=s,this.rxViewDesignerStateHelperService=l,this.rxViewDataDictionaryStoreService=d,this.initializeComponentModel$=this.actions$.pipe((0,v.ofType)(De),(0,h.tap)(e=>{e.payload.forEach(({componentModel:e})=>{const t=this.rxViewComponentRegistryService.get(e.type),i=new Ni(this.injector,e.guid,t),n=new t.designComponentModel(this.injector,i);(0,m.isFunction)(n.rxInit)&&n.rxInit(),this.viewDesignerModels.set(e.guid,n)})}),(0,h.map)(()=>Xe())),this.registerComponentsValidation$=this.actions$.pipe((0,v.ofType)(Ie,De),(0,h.tap)(e=>this.rxViewExpressionValidatorRegistryService.registerComponents((0,m.map)(e.payload,e=>e.componentModel.guid)))),this.onComponentsRemoved$=this.actions$.pipe((0,v.ofType)(Se),(0,h.tap)(({guids:e})=>{this.rxViewExpressionValidatorRegistryService.unregisterComponents(e),this.rxViewDataDictionaryStoreService.removeDataDictionaryForComponents(e)})),this.unregisterAllComponentsValidation$=this.actions$.pipe((0,v.ofType)(it,nt),(0,h.tap)(()=>this.rxViewExpressionValidatorRegistryService.unregisterAllComponents())),this.insertComponent$=this.actions$.pipe((0,v.ofType)(Ae),(0,h.map)(e=>{const t={insertIndex:e.insertIndex,columnIndex:e.columnIndex,outletName:e.outletName,parentGuid:e.targetGuid};return e.data.guid?Ne(Object.assign(Object.assign({},t),{guid:e.data.guid})):Pe({payload:[Object.assign(Object.assign({},t),{type:e.data.type,selectComponent:!0,propertiesByName:e.data.initialPropertiesByName})]})})),this.addNewComponent$=this.actions$.pipe((0,v.ofType)(Pe),(0,h.withLatestFrom)(this.store$.select(lt)),(0,h.mergeMap)(([e,t])=>{const i=[],n=[],o=[];return e.payload.forEach(e=>{this.processAddComponentPayload(e,i,n,o,t)}),[i.length?De({payload:i}):null,n.length?Ie({payload:n}):null,o.length?Te({guid:(0,m.last)(o)}):null].filter(Boolean)})),this.removeComponent$=this.actions$.pipe((0,v.ofType)(_e),(0,h.filter)(({guids:e})=>!(0,m.isEmpty)(e)),(0,h.withLatestFrom)(this.store$.select(lt)),(0,h.mergeMap)(([e,t])=>{const i=e.guids.reduce((e,i)=>{const n=t[i];return n&&e.push(i,...ye(n,t)),e},[]),n=new Set(i);n.forEach(e=>{this.viewDesignerModels.delete(e),this.rxViewDesignerInspectorService.delete(e)});const o=[Se({guids:[...n]})];if(e.selectParent){const i=t[(0,m.last)(e.guids)];(null==i?void 0:i.parentGuid)&&o.push(Te({guid:i.parentGuid}))}return o})),this.setChildren$=this.actions$.pipe((0,v.ofType)(Fe),(0,h.map)(e=>e.payload),(0,h.withLatestFrom)(this.store$.select(lt)),(0,h.mergeMap)(([e,t])=>{const i=[],n=[],o=[],r=[];function a(e,t){const i={propertiesByName:e.data,guid:e.guid,parentGuid:t,type:e.type,columnIndex:e.columnIndex||0,insertIndex:e.insertIndex,outletName:e.outletName||p.RX_VIEW_DEFINITION.defaultOutletName};return e.children&&(i.children=(0,m.map)(e.children,t=>a(t,e.guid))),i}return function e(i){const s=i.data,l=s.map(e=>e.guid);let d=ve(t[i.guid]);i.types&&(d=d.filter(e=>i.types.includes(t[e].type)));const c=(0,m.difference)(d,l),p=(0,m.difference)(l,d),u=(0,m.difference)(d,p,c);n.push(...c);const f=s.reduce((e,t)=>((0,m.includes)(p,t.guid)&&e.push(a(t,i.guid)),e),[]);o.push(...f);const h=s.reduce((i,n)=>{if((0,m.includes)(u,n.guid)){const o=t[n.guid];(0,m.isEqual)(o.propertiesByName,n.data||{})||i.push({guid:n.guid,data:n.data}),n.children&&e({guid:n.guid,data:n.children})}return i},[]);r.push(...h)}(e),n.length&&i.push(_e({guids:n})),o.length&&i.push(Pe({payload:o})),r.length&&i.push(Ee({payload:r})),i}))}processAddComponentPayload(e,t,i,n,o){const r=this.rxViewComponentRegistryService.get(e.type),a=t.find(t=>t.componentModel.guid===e.parentGuid),s=o[e.parentGuid],l=a&&!a.componentModel.layout||s&&!s.layout,d={guid:e.guid||this.rxGuidService.generate(),type:e.type,parentGuid:e.parentGuid,propertiesByName:this.rxViewDesignerStateHelperService.getInitialComponentProperties(e.propertiesByName,r),permissions:this.rxViewDesignerStateHelperService.getDefaultComponentPermissions(r)};this.rxViewComponentRegistryService.isDataComponentDescriptor(r)||l?(d.resourceType=r.isContainerComponent?p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,i.push({componentModel:d})):(d.resourceType=r.outlets||r.isContainerComponent?p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,r.outlets&&(d.layout=p.RxViewLayout.getEmptyViewLayoutForOutletNames(r.outlets)),t.push({componentModel:d,insertIndex:e.insertIndex,columnIndex:e.columnIndex||0,outletName:e.outletName||p.RX_VIEW_DEFINITION.defaultOutletName}),e.selectComponent&&n.push(d.guid)),(0,m.forEach)(e.children,e=>{this.processAddComponentPayload(Object.assign(Object.assign({},e),{parentGuid:d.guid}),t,i,n,o)})}}ji.\u0275fac=function(e){return new(e||ji)(n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](Ft),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](y.Store),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](Ai),n["\u0275\u0275inject"](Pi),n["\u0275\u0275inject"](xe))},ji.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ji,factory:ji.\u0275fac}),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"initializeComponentModel$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"registerComponentsValidation$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"onComponentsRemoved$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"unregisterAllComponentsValidation$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"insertComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"addNewComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"removeComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"setChildren$",void 0);class _i{constructor(e,t,i,n,o,r,a,s,l,d,c,p,u,g,y,b,x,C,S,D,I,R,w,E){this.actions$=e,this.store$=t,this.rxBundleCacheService=i,this.rxDefinitionNameService=n,this.rxDefinitionUpdateService=o,this.rxGlobalCacheService=r,this.rxJsonParserService=a,this.rxViewComponentRegistryService=s,this.rxViewActionRegistryService=l,this.rxViewDefinitionService=d,this.viewDesignerModels=c,this.rxOldViewLayoutAdapterService=p,this.rxViewDefinitionParserService=u,this.rxLogService=g,this.rxModalService=y,this.errorHandler=b,this.rxUtilityModalsService=x,this.rxDefinitionAdapterRegistryService=C,this.rxViewDesignerInspectorService=S,this.rxViewDefinitionGeneratorService=D,this.rxViewDesignerStateHelperService=I,this.rxViewActionDefinitionAdapterRegistryService=R,this.rxGuidService=w,this.rxViewDataDictionaryStoreService=E,this.initViewDesigner$=this.actions$.pipe((0,v.ofType)(it),(0,h.switchMap)(({payload:e})=>{const{viewDefinitionName:t,layoutTemplate:i}=e;return this.clearStorages(),[Ze(),ze({viewDefinitionName:t,layoutTemplate:i})]})),this.destroyViewDesigner$=this.actions$.pipe((0,v.ofType)(nt),(0,h.tap)(()=>this.clearStorages())),this.loadFriendlyBundleName$=this.actions$.pipe((0,v.ofType)(Ze),(0,h.switchMap)(()=>this.rxGlobalCacheService.getBundleDescriptor(this.rxBundleCacheService.bundleId)),(0,h.switchMap)(e=>{let t;return t=e?(0,f.of)(Ue({friendlyBundleName:e.friendlyName})):(0,f.throwError)(`Bundle "${this.rxBundleCacheService.bundleId}" not found`),t.pipe((0,h.catchError)(e=>(this.errorHandler.handleError(e),(0,f.of)(qe({payload:e})))))})),this.loadViewDefinition$=this.actions$.pipe((0,v.ofType)(ze),(0,h.switchMap)(({viewDefinitionName:e,layoutTemplate:t})=>(e?this.rxViewDefinitionService.get(e):this.rxViewDefinitionService.getNew(t)).pipe((0,h.map)(e=>$e({viewDefinition:e})),(0,h.catchError)(e=>(this.errorHandler.handleError(e),(0,f.of)(Le())))))),this.viewDefinitionLoadSuccess$=this.actions$.pipe((0,v.ofType)($e),(0,h.withLatestFrom)(this.store$.select(at)),(0,h.mergeMap)(([e,t])=>t?this.getActionsToUpdateExistingViewModels(e.viewDefinition):this.getActionsToInitializeViewModels(e.viewDefinition))),this.selectViewComponent$=this.actions$.pipe((0,v.ofType)(Te),(0,h.withLatestFrom)(this.store$.select(at),this.store$.select(It)),(0,h.mergeMap)(([e,t,i])=>{const n=t.guid===e.guid?0:1;return n!==i?[Ke({tabId:n})]:[]})),this.generateViewDefinition$=this.actions$.pipe((0,v.ofType)(et),(0,h.withLatestFrom)(this.store$.select(at),this.store$.select(lt),(e,t,i)=>({viewModel:t,componentModels:i})),(0,h.map)(({viewModel:e,componentModels:t})=>this.rxViewDefinitionGeneratorService.generate(e,t)),(0,h.map)(e=>Ge({payload:e}))),this.saveViewDefinition$=this.actions$.pipe((0,v.ofType)(Je),(0,h.withLatestFrom)(this.store$.select(at),this.store$.select(lt),(e,t,i)=>({viewModel:t,components:i})),(0,h.switchMap)(({viewModel:e,components:t})=>{const i=this.rxViewDefinitionGeneratorService.generate(e,t,!0);return(i.lastUpdateTime?this.rxDefinitionUpdateService.execute(this.rxViewDefinitionService.update.bind(this.rxViewDefinitionService,i.name,i)):this.rxViewDefinitionService.create(i)).pipe((0,h.switchMap)(e=>{const t=decodeURIComponent((0,m.last)(null==e?void 0:e.headers.get("Location").split("/"))||"")||i.name;return[ke({viewDefinitionName:t}),i.lastUpdateTime?ze({viewDefinitionName:i.name}):null].filter(Boolean)}),(0,h.catchError)(e=>(this.errorHandler.handleError(e),(0,f.of)(Be()))))})),this.clearCanvas$=this.actions$.pipe((0,v.ofType)(tt),(0,h.withLatestFrom)(this.store$.select(at)),(0,h.map)(([e,t])=>_e({guids:ve(t)}))),this.runPreview$=this.actions$.pipe((0,v.ofType)(Ye),(0,h.withLatestFrom)(this.store$.select(at),(e,t)=>t),(0,h.switchMap)(e=>e.targetViewDefinitionName?this.rxViewDefinitionService.get(e.targetViewDefinitionName):(0,f.of)(e)),(0,h.tap)(e=>{const t=encodeURIComponent(e.name);let i=`/helix/index.html#/${this.rxBundleCacheService.bundleId}/preview/${t}`;e.inputParams.length?this.rxModalService.openModal({title:"Enter view parameter values",content:si,data:{inputParams:(0,m.map)(e.inputParams,"name")},size:"sm"}).catch(f.noop).then(e=>{const t=(0,m.map)(e,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`);i+=`?${t.join("&")}`,e&&window.open(i)}):window.open(i)}))}clearStorages(){this.viewDesignerModels.clear(),this.rxViewDesignerInspectorService.clear(),this.rxViewDataDictionaryStoreService.clear()}convertViewDefinitionToModel(e){const t=Boolean(e.lastUpdateTime)&&!(0,m.includes)(e.layout,'"outlets"');this.rxViewDefinitionParserService.getComponents(e).forEach(e=>this.rxOldViewLayoutAdapterService.convertLayout(e));const i=(0,m.omit)(e,["componentDefinitions","layout"]),n=this.rxJsonParserService.tryParseJson(e.layout);return i.layout=p.RxViewLayout.getEmptyViewLayoutForOutlets(n.outlets),i.displayName=decodeURIComponent(this.rxDefinitionNameService.getDisplayName(i.name)),i.layoutName=p.RxViewLayout.getLayoutName(i.layout),i.isAngularJsView=t,i}convertComponentDefinitionToModel(e,t,i){const n=(0,m.omit)(e,["componentDefinitions","layout"]);if(n.parentGuid=t,this.processComponentDefinitionProperties(n,i),this.isComponentHasLayout(e)){const t=this.rxJsonParserService.tryParseJson(e.layout);n.layout=p.RxViewLayout.getEmptyViewLayoutForOutlets(t.outlets)}return n}processComponentDefinitionProperties(e,t){e.propertiesByName=(0,m.transform)(e.propertiesByName,(e,i,n)=>{const o=(0,m.find)(t.properties||t.parameters,{name:n});if(o&&o.designType)if(!0==(o.designType===p.ViewComponentPropertyType.String))e[n]=i;else e[n]=this.rxJsonParserService.tryParseJson(i,i);else e[n]=i;return e},{}),this.rxGuidService.isGuid(e.name)||(e.propertiesByName.name=e.name),"type"in t&&(e.propertiesByName=this.rxViewDesignerStateHelperService.getInitialComponentProperties(e.propertiesByName,t))}traverseByComponents(e,t){const i=this.rxJsonParserService.tryParseJson(e.layout),n=e.componentDefinitions;i&&i.outlets.forEach(i=>{i.columns.forEach((o,r)=>{o.children.forEach((a,s)=>{const l=n.find(e=>e.guid===a);l&&(t(l,e.guid,i.name,s,r,o.span),l.componentDefinitions&&this.traverseByComponents(l,t))})})}),n.filter(e=>{const t=this.rxViewComponentRegistryService.get(e.type);return(null==t?void 0:t.isDataComponent)||(null==t?void 0:t.isPageComponent)}).forEach((i,n)=>{t(i,e.guid,null,n,0,0),i.componentDefinitions&&this.traverseByComponents(i,t)})}isComponentHasLayout(e){return Boolean(e.layout)}getActionsToInitializeViewModels(e){const t=(0,m.cloneDeep)(e),i=this.convertViewDefinitionToModel(t),n=[],o=[];return this.traverseByComponents(t,(e,i,r,a,s,l)=>{const d=this.rxViewComponentRegistryService.get(e.type);if(d&&!d.isPageComponent){const c=e.type===p.RxViewComponentType.Action?this.rxViewActionDefinitionAdapterRegistryService.getDesignAdapter(e.propertiesByName.name):this.rxDefinitionAdapterRegistryService.getDesignAdapter(e.type);let u;null==c||c.adaptDefinition(e,t),e.type===p.RxViewComponentType.Action&&(u=this.rxViewActionRegistryService.get(e.propertiesByName.name),u||(u=this.rxViewActionRegistryService.registerUnknownAction(e.propertiesByName.name)));const m=this.convertComponentDefinitionToModel(e,i,u||d);this.rxViewComponentRegistryService.isDataComponentDescriptor(d)||null===r?o.push({componentModel:m}):n.push({insertIndex:a,columnIndex:s,componentModel:m,outletName:r,columnSpan:l})}else if(this.rxViewDefinitionService.isPageView(t)){let t=this.rxViewComponentRegistryService.get(e.type);t||(t={type:e.type,name:p.RX_VIEW_DEFINITION.unknownPageComponent.name});const n=this.convertComponentDefinitionToModel(e,i,t);o.push({componentModel:n})}else{const t=Object.assign(Object.assign({},this.rxViewComponentRegistryService.get(p.RxViewComponentType.Unknown)),{type:e.type});this.rxViewComponentRegistryService.registerSync(t);const o=this.convertComponentDefinitionToModel(e,i,t);n.push({insertIndex:a,columnIndex:s,componentModel:o,outletName:r,columnSpan:l}),this.rxLogService.warning(`Cannot initialize view component. View Component Descriptor for ${e.type} not found.`)}}),[Qe({payload:i}),n.length?De({payload:n}):null,o.length?Ie({payload:o}):null,n.length?null:Xe()].filter(Boolean)}getActionsToUpdateExistingViewModels(e){const t=(0,m.cloneDeep)(e),i=this.rxViewDefinitionParserService.getComponents(t,!0).map(({componentDefinition:e})=>({guid:e.guid,partialModel:(0,m.omit)(e,["layout","propertiesByName","componentDefinitions"])}));return[He({payload:(0,m.omit)(t,["layout","componentDefinitions"])}),i.length?je({payload:i}):null,We()].filter(Boolean)}}function Vi(){return null}_i.\u0275fac=function(e){return new(e||_i)(n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](y.Store),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](l.RxDefinitionUpdateService),n["\u0275\u0275inject"](l.RxGlobalCacheService),n["\u0275\u0275inject"](g.RxJsonParserService),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](p.RxViewActionRegistryService),n["\u0275\u0275inject"](p.RxViewDefinitionService),n["\u0275\u0275inject"](Ft),n["\u0275\u0275inject"](p.RxOldViewLayoutAdapterService),n["\u0275\u0275inject"](p.RxViewDefinitionParserService),n["\u0275\u0275inject"](l.RxLogService),n["\u0275\u0275inject"](c.RxModalService),n["\u0275\u0275inject"](n.ErrorHandler),n["\u0275\u0275inject"](c.RxUtilityModalsService),n["\u0275\u0275inject"](l.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](Mt),n["\u0275\u0275inject"](Pi),n["\u0275\u0275inject"](p.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](xe))},_i.\u0275prov=n["\u0275\u0275defineInjectable"]({token:_i,factory:_i.\u0275fac}),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"initViewDesigner$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],_i.prototype,"destroyViewDesigner$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"loadFriendlyBundleName$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"loadViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"viewDefinitionLoadSuccess$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"selectViewComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"generateViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"saveViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],_i.prototype,"clearCanvas$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],_i.prototype,"runPreview$",void 0);const ki=(0,y.createReducer)(null,(0,y.on)(it,Vi),(0,y.on)(nt,Vi),(0,y.on)(Ge,(e,{payload:t})=>t));function Bi(e,t){return ki(e,t)}function $i(){return{}}const Li=(0,y.createReducer)({},(0,y.on)(it,$i),(0,y.on)(nt,$i),(0,y.on)(Me,(e,{guid:t,label:i})=>Object.assign(Object.assign({},e),{[t]:i})),(0,y.on)(Se,(e,{guids:t})=>{let i=e;return t.some(t=>(0,m.has)(e,t))&&(i=(0,m.omit)(e,t)),i}));function Gi(e,t){return Li(e,t)}function zi(){return{viewDesignModel:null,viewComponentDesignModels:{}}}const Ui=(0,y.createReducer)({viewDesignModel:null,viewComponentDesignModels:{}},(0,y.on)(it,zi),(0,y.on)(nt,zi),(0,y.on)(De,(e,{payload:t})=>{const i=Object.assign({},e);return t.forEach(e=>function(e,t){if(e.viewComponentDesignModels=Object.assign(Object.assign({},e.viewComponentDesignModels),{[t.componentModel.guid]:t.componentModel}),t.componentModel.parentGuid===e.viewDesignModel.guid)e.viewDesignModel=he(e.viewDesignModel,t.componentModel.guid,t.outletName,t.insertIndex,t.columnIndex,t.columnSpan);else{const i=e.viewComponentDesignModels[t.componentModel.parentGuid];if(i){const n=he(i,t.componentModel.guid,t.outletName,t.insertIndex,t.columnIndex,t.columnSpan);e.viewComponentDesignModels[n.guid]=n}}}(i,e)),i}),(0,y.on)(Ie,(e,{payload:t})=>{const i=Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign({},e.viewComponentDesignModels)});return t.forEach(e=>{const t=i.viewComponentDesignModels[e.componentModel.parentGuid];if(t){i.viewComponentDesignModels[e.componentModel.guid]=e.componentModel;const n=Object.assign(Object.assign({},t),{childDataComponentGuids:[...t.childDataComponentGuids||[],e.componentModel.guid]});i.viewComponentDesignModels[n.guid]=n}}),i}),(0,y.on)(Ne,(e,t)=>{const i=Object.assign({},e);if(fe(t.guid,e.viewDesignModel))i.viewDesignModel=ge(t.guid,i.viewDesignModel);else{let e=ue(t.guid,i.viewComponentDesignModels);e=ge(t.guid,e),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[e.guid]:e})}if(t.parentGuid===i.viewDesignModel.guid)i.viewDesignModel=he(i.viewDesignModel,t.guid,t.outletName,t.insertIndex,t.columnIndex);else{let e=i.viewComponentDesignModels[t.parentGuid];e=he(e,t.guid,t.outletName,t.insertIndex,t.columnIndex),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[e.guid]:e})}return i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[t.guid]:Object.assign(Object.assign({},i.viewComponentDesignModels[t.guid]),{parentGuid:t.parentGuid})}),i}),(0,y.on)(Se,(e,{guids:t})=>{const i=Object.assign(Object.assign({},e),{viewComponentDesignModels:(0,m.omit)(e.viewComponentDesignModels,t)});return t.forEach(t=>{if(fe(t,e.viewDesignModel))i.viewDesignModel=ge(t,i.viewDesignModel);else{let n=ue(t,e.viewComponentDesignModels);n&&i.viewComponentDesignModels[n.guid]&&(n=ge(t,i.viewComponentDesignModels[n.guid]),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[n.guid]:n}))}}),i}),(0,y.on)(Oe,(e,{guid:t,cols:i})=>{const n=e.viewComponentDesignModels[t],o=n.layout.outlets.find(e=>e.name===p.RX_VIEW_DEFINITION.defaultOutletName),r=(0,m.cloneDeep)(o.columns),a=r.splice(i.length);i.forEach((e,t)=>{r[t]?r[t].span=e:r[t]={span:e,children:[]}});const s=a.reduce((e,t)=>(e.push(...t.children),e),[]);if(s.length){const e=(0,m.last)(r);e.children=e.children.concat(s)}return Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),{[t]:Object.assign(Object.assign({},n),{layout:Object.assign(Object.assign({},n.layout),{outlets:n.layout.outlets.map(e=>Object.assign(Object.assign({},e),{columns:r}))})})})})}),(0,y.on)(Qe,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewDesignModel:t})),(0,y.on)(He,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewDesignModel:Object.assign(Object.assign({},e.viewDesignModel),t)})),(0,y.on)(ke,e=>e.viewDesignModel.isAngularJsView?Object.assign(Object.assign({},e),{viewDesignModel:Object.assign(Object.assign({},e.viewDesignModel),{isAngularJsView:!1})}):e),(0,y.on)(Ee,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),t.reduce((t,{guid:i,data:n})=>(t[i]=Object.assign(Object.assign({},e.viewComponentDesignModels[i]),{propertiesByName:n}),t),{}))})),(0,y.on)(je,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),t.filter(t=>e.viewComponentDesignModels[t.guid]).reduce((t,{guid:i,partialModel:n})=>(t[i]=Object.assign(Object.assign(Object.assign({},e.viewComponentDesignModels[i]),n),{propertiesByName:Object.assign(Object.assign({},e.viewComponentDesignModels[i].propertiesByName),n.propertiesByName)}),t),{}))})));function qi(e,t){return Ui(e,t)}function Xi(){return{selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null}}const Wi=(0,y.createReducer)({selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null},(0,y.on)(it,(e,{payload:t})=>Object.assign(Object.assign({},{selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null}),{currentBundleId:t.bundleId})),(0,y.on)(nt,Xi),(0,y.on)(Te,(e,{guid:t})=>Object.assign(Object.assign({},e),{selectedComponentGuid:t})),(0,y.on)(Ke,(e,{tabId:t})=>Object.assign(Object.assign({},e),{selectedInspectorTabId:t})),(0,y.on)(Se,(e,{guids:t})=>t.includes(e.selectedComponentGuid)?Object.assign(Object.assign({},e),{selectedComponentGuid:null}):Object.assign({},e)),(0,y.on)(Ue,(e,{friendlyBundleName:t})=>Object.assign(Object.assign({},e),{friendlyBundleName:t})),(0,y.on)(qe,e=>Object.assign(Object.assign({},e),{friendlyBundleName:null})),(0,y.on)(Je,ze,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!0,areViewModelsReady:!1})),(0,y.on)(ke,$e,Le,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!1})),(0,y.on)(Be,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!1,areViewModelsReady:!0})),(0,y.on)(We,Xe,e=>Object.assign(Object.assign({},e),{areViewModelsReady:!0})),(0,y.on)(De,e=>Object.assign(Object.assign({},e),{areViewModelsReady:!1})));function Hi(e,t){return Wi(e,t)}function Qi(){return{issues:{},expressionIssues:{}}}const Ki=(0,y.createReducer)({issues:{},expressionIssues:{}},(0,y.on)(it,nt,Qi),(0,y.on)(Re,(e,{guid:t,issues:i})=>{if(i.length)return Object.assign(Object.assign({},e),{issues:Object.assign(Object.assign({},e.issues),{[t]:i})});{let i=e;return(0,m.has)(i.issues,t)&&(i=Object.assign(Object.assign({},e),{issues:(0,m.omit)(e.issues,[t])})),i}}),(0,y.on)(we,(e,{issues:t})=>(0,m.isEmpty)(t)?e:Object.assign(Object.assign({},e),{expressionIssues:Object.assign(Object.assign({},(0,m.omit)(e.expressionIssues,Object.keys(t))),(0,m.omitBy)(t,m.isEmpty))})),(0,y.on)(Se,(e,{guids:t})=>{let i=e;return t.some(t=>(0,m.has)(e.issues,t))&&(i=Object.assign(Object.assign({},e),{issues:(0,m.omit)(e.issues,t)})),t.some(t=>(0,m.has)(e.expressionIssues,t))&&(i=Object.assign(Object.assign({},e),{expressionIssues:(0,m.omit)(e.expressionIssues,t)})),i}));function Ji(e,t){return Ki(e,t)}class Yi{}Yi.\u0275fac=function(e){return new(e||Yi)},Yi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yi,declarations:[ni],imports:[x.CommonModule,S.AdaptCodeViewerModule,S.AdaptTabsModule,c.RxBladeModule,d.RxFormBuilderModule,c.RxValidationIssuesModule,c.RxJsonViewerModule,ai,oi,ri,d.FormControlsModule,d.RxPermissionEditorModule,d.RxRevertCustomizationModule,p.ViewActionDesignModule,li,d.RxDesignerHeaderModule,S.AdaptAlertModule,d.RxInspectorModule,Ci,$t,u.TranslateModule,y.StoreFeatureModule,v.EffectsFeatureModule],exports:[ni]}),Yi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,S.AdaptCodeViewerModule,S.AdaptTabsModule.forRoot(),c.RxBladeModule,d.RxFormBuilderModule,c.RxValidationIssuesModule,c.RxJsonViewerModule,ai,oi,ri,d.FormControlsModule,d.RxPermissionEditorModule,d.RxRevertCustomizationModule,p.ViewActionDesignModule,li,d.RxDesignerHeaderModule,S.AdaptAlertModule,d.RxInspectorModule,Ci,$t,u.TranslateModule,y.StoreModule.forFeature("viewDesigner",{model:qi,viewDefinition:Bi,validation:Ji,ui:Hi,breadcrumbs:Gi}),v.EffectsModule.forFeature([_i,ji])]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{BaseViewComponent:()=>ae,RX_RUNTIME_VIEW:()=>ce,RuntimeLayoutItem:()=>z,RuntimeLayoutOutlet:()=>G,RuntimeLayoutOutletColumn:()=>L,RuntimeViewCanvasComponent:()=>oe,RuntimeViewCanvasItemComponent:()=>X,RuntimeViewCanvasItemContainerComponent:()=>W,RuntimeViewCanvasItemService:()=>q,RuntimeViewCanvasModule:()=>le,RuntimeViewCanvasOutletComponent:()=>se,RuntimeViewComponent:()=>re,RuntimeViewModalComponent:()=>de,RuntimeViewModel:()=>ie,RuntimeViewModelApi:()=>K,RuntimeViewModule:()=>pe,RuntimeViewRootComponent:()=>H,RxRuntimeViewRegistryService:()=>ne,RxRuntimeViewUtilsService:()=>ee,VIEW_COMPONENT_DEFAULT_EVENT_NAME:()=>Z,ViewComponentEventManager:()=>Y});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("rxjs"),r=i("./node_modules/rxjs/_esm2015/operators/index.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),d=i("lodash"),c=i("./node_modules/@angular/common/fesm2015/common.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),h=i("./node_modules/@angular/forms/fesm2015/forms.js"),g=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),v=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js");const y=["container"];function b(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}const x=function(e){return{$implicit:e}};function C(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275template"](1,b,1,0,"ng-container",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275nextContext"](2);const i=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngClass",e.cssClass?e.cssClass:e.span?"col-"+e.span:"col"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](3,x,e.children))}}function S(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",2),n["\u0275\u0275template"](2,C,2,5,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.columns)}}function D(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}function I(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,D,1,0,"ng-container",5),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,x,e.columns[0].children))}}function R(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",7,8),2&e){const e=t.$implicit;n["\u0275\u0275property"]("layout",e)}}function w(e,t){if(1&e&&n["\u0275\u0275template"](0,R,2,1,"rx-runtime-view-canvas-item",6),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByFn)}}const E=function(e,t,i){return[e,t,i]},F=function(e,t){return{"content-outlet":e,"outlet-padding":t}};function M(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item-container",1),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",i.isHidden(e))("columns",e.columns)("outlet",e)("ngClass",n["\u0275\u0275pureFunction2"](8,F,e.name===i.defaultOutletName,n["\u0275\u0275pureFunction3"](4,E,i.layoutRole.Header,i.layoutRole.Footer,i.defaultOutletName).includes(e.name)))}}function T(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",1),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.layout)}}function O(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-runtime-view-canvas",1),n["\u0275\u0275listener"]("componentPropertyChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().runtimeViewModel.onViewComponentPropertyChanged(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.runtimeViewLayoutService.layout)}}function N(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).closeModal()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.closeLabel)}}function A(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"span",9),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,N,1,1,"button",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancellable)}}function P(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,A,4,2,"div",7),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isBlade)("ngIfElse",t)}}function j(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).closeModal()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("aria-label",e.closeLabel)}}function _(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275elementStart"](1,"h5",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,j,1,1,"button",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancellable)}}const V=function(e){return{content:e,type:"inline",variant:"info"}};function k(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-alert",14),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](1,V,e.notification))}}const B=function(e,t){return{"modal-body p-0":e,"dp-content":t}},$=function(e){return{busy:e,loaderType:"lineLoader",delay:250,backdrop:!1,message:null}};class L{constructor(){this.children=[]}}class G{constructor(){this.children=[],this.columns=[new L],this.height=null}}class z{constructor(e){this.outlets=[],this.parent=null,this.runtimeViewModelApi=null,Object.assign(this,{guid:e.guid,config:e.config,parent:e.parent,runtimeViewModelApi:e.runtimeViewModelApi,factory:e.factory}),e.outlets&&this.initializeOutlets(e.outlets)}initializeOutlets(e){e.forEach(e=>{const t=new G;t.name=e.name,t.height=e.hasOwnProperty("height")?e.height:null,this.outlets.push(t)})}addLayoutItem(e,t){const i=this.outlets.find(e=>e.name===t.parentOutlet.name),n=t.parentOutlet.columns[t.columnIndex].children.indexOf(e.guid);t.parentOutlet.columns.forEach((e,t)=>{i.columns[t]||(i.columns[t]=new L),e.cssClass&&(i.columns[t].cssClass=e.cssClass),e.span&&(i.columns[t].span=e.span)}),e&&(i.columns[t.columnIndex].children[n]=e)}}class U{constructor(){this.componentPropertyChangedSubject=new o.Subject,this.componentPropertyChanged$=this.componentPropertyChangedSubject.asObservable()}onViewComponentPropertyChanged(e){this.componentPropertyChangedSubject.next(e)}}U.\u0275fac=function(e){return new(e||U)},U.\u0275prov=n["\u0275\u0275defineInjectable"]({token:U,factory:U.\u0275fac});class q{constructor(e,t,i){this.injector=e,this.componentFactoryResolver=t,this.runtimeViewCanvasService=i,this.hasMargin=!0,this.hasAutoFill=!1,this.hasAutoScroll=!1,this.isHidden=!1,this.destroyed$=new o.ReplaySubject(1)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}registerOutlet(e,t,i){const n=this.layout.outlets.find(t=>t.name===e);n&&this.renderContainerComponent(t,n,i)}getChildren(e){return this.layout.outlets.find(t=>t.name===e).columns.map(e=>Object.assign(Object.assign({},e),{children:e.children.filter(Boolean).map(e=>(0,d.pick)(e,"config","guid","runtimeViewModelApi","factory","outlets"))}))}renderViewComponent(){var e,t,i,n;this.componentRef=this.container.createComponent(this.layout.factory,null,this.injector),this.componentInstance=this.componentRef.instance,this.componentInstance.guid=this.layout.guid,this.componentInstance.config=this.layout.config,this.componentInstance.runtimeViewModelApi=this.layout.runtimeViewModelApi,null===(e=this.componentInstance.propertyChanged)||void 0===e||e.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.runtimeViewCanvasService.onViewComponentPropertyChanged(e)}),null===(t=this.componentInstance.hidden)||void 0===t||t.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasMargin=!e,this.isHidden=e}),null===(i=this.componentInstance.autoScroll)||void 0===i||i.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasAutoScroll=e}),null===(n=this.componentInstance.autoFill)||void 0===n||n.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasAutoFill=e})}renderContainerComponent(e,t,i){const n=i,o=e.createComponent(n);o.instance.columns=t.columns,o.instance.outlet=t}}q.\u0275fac=function(e){return new(e||q)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](U))},q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:q,factory:q.\u0275fac});class X{constructor(e){this.runtimeViewCanvasItemService=e}get hasMargin(){return this.runtimeViewCanvasItemService.hasMargin}get hasAutoFill(){return this.runtimeViewCanvasItemService.hasAutoFill&&!this.runtimeViewCanvasItemService.isHidden}get hasAutoScroll(){return this.runtimeViewCanvasItemService.hasAutoScroll}ngOnChanges(e){this.runtimeViewCanvasItemService.container||(this.runtimeViewCanvasItemService.container=this.container),e.layout.currentValue&&(this.runtimeViewCanvasItemService.layout=e.layout.currentValue,e.layout.previousValue&&this.container.clear(),this.runtimeViewCanvasItemService.renderViewComponent())}registerOutlet(e,t){this.runtimeViewCanvasItemService.registerOutlet(e,t)}getChildren(e){return this.runtimeViewCanvasItemService.getChildren(e)}}X.\u0275fac=function(e){return new(e||X)(n["\u0275\u0275directiveInject"](q))},X.\u0275cmp=n["\u0275\u0275defineComponent"]({type:X,selectors:[["rx-runtime-view-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](y,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},hostVars:6,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-runtime-view-canvas-item-margin",t.hasMargin)("rx-runtime-view-canvas-item-auto-fill",t.hasAutoFill)("rx-runtime-view-canvas-item-auto-scroll",t.hasAutoScroll)},inputs:{layout:"layout"},features:[n["\u0275\u0275ProvidersFeature"]([q]),n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class W{constructor(){this.columns=[]}get hostClass(){return this.outlet.height?`${this.outlet.height}px`:null}trackByFn(e,t){return(null==t?void 0:t.guid)||e}}W.\u0275fac=function(e){return new(e||W)},W.\u0275cmp=n["\u0275\u0275defineComponent"]({type:W,selectors:[["rx-runtime-view-canvas-item-container"]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275styleProp"]("min-height",t.hostClass)},inputs:{columns:"columns",outlet:"outlet"},decls:4,vars:2,consts:[[4,"ngIf"],["itemTpl",""],[1,"row","rx-runtime-view-canvas-item-container-row"],["class","rx-runtime-view-canvas-item-container-column",3,"ngClass",4,"ngFor","ngForOf"],[1,"rx-runtime-view-canvas-item-container-column",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"layout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"layout"],["item",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,S,3,1,"ng-container",0),n["\u0275\u0275template"](1,I,2,4,"ng-container",0),n["\u0275\u0275template"](2,w,1,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275property"]("ngIf",t.columns.length>1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",1===t.columns.length))},directives:[c.NgIf,c.NgForOf,c.NgClass,c.NgTemplateOutlet,X],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}rx-runtime-view-canvas-item[_ngcontent-%COMP%]{display:block}  .rx-runtime-view-canvas-item-margin:not(:last-child){margin-bottom:1rem}.rx-runtime-view-canvas-item-auto-fill[_ngcontent-%COMP%], .rx-runtime-view-canvas-item-container-row[_ngcontent-%COMP%], .rx-runtime-view-canvas-item-container-column[_ngcontent-%COMP%]{height:100%}.rx-runtime-view-canvas-item-container-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.rx-runtime-view-canvas-item-auto-scroll[_ngcontent-%COMP%]{overflow-y:auto}.rx-mb-sm[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 576px){.rx-mb-sm[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-sm[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-md[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 768px){.rx-mb-md[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-md[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-lg[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 992px){.rx-mb-lg[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-lg[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-xl[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 1200px){.rx-mb-xl[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-xl[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-xxl[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 1600px){.rx-mb-xxl[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-xxl[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}']});class H{constructor(e){this.runtimeCanvasItemComponent=e,this.defaultOutletName=s.RX_VIEW_DEFINITION.defaultOutletName,this.layoutRole=s.ViewLayoutRole}isHidden(e){return e.name===s.ViewLayoutRole.Header&&0===e.columns[0].children.length}}H.\u0275fac=function(e){return new(e||H)(n["\u0275\u0275directiveInject"](X))},H.\u0275cmp=n["\u0275\u0275defineComponent"]({type:H,selectors:[["rx-runtime-view-root"]],decls:1,vars:1,consts:[[3,"hidden","columns","outlet","ngClass",4,"ngFor","ngForOf"],[3,"hidden","columns","outlet","ngClass"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,M,1,11,"rx-runtime-view-canvas-item-container",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.runtimeCanvasItemComponent.layout.outlets)},directives:[c.NgForOf,W,c.NgClass],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}rx-runtime-view-canvas-item-container[_ngcontent-%COMP%]{padding:0 1rem}.outlet-padding[_ngcontent-%COMP%]{padding:1rem}.content-outlet[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}"]});class Q{constructor(e,t,i,n,o,r,a){this.rxViewComponentRegistryService=e,this.viewDefinitionParserService=t,this.factoryResolver=i,this.tree=n,this.rxJsonParserService=o,this.rxLogService=r,this.rxOldViewLayoutAdapterService=a}clear(){this.layout=null}init(e,t){this.runtimeViewModel=e,this.runtimeViewModelApi=t,this.viewDefinitionParserService.getComponents(e.viewDefinition).forEach(this.processDefinition.bind(this))}processDefinition(e){if(this.rxOldViewLayoutAdapterService.convertLayout(e),e.parentComponentDefinition){const t=this.rxViewComponentRegistryService.get(e.componentDefinition.type);if(e.componentDefinition.type!==s.RxViewComponentType.Action&&t&&!this.runtimeViewModel.isDataViewComponentDefinition(t)){const i=JSON.parse(e.parentComponentDefinition.layout);let n=0;const o=i.outlets.find(t=>t.columns.find((t,i)=>{const o=t.children.includes(e.componentDefinition.guid);return o&&(n=i),o}));if(o){const i=this.runtimeViewModel.viewComponentStates.get(e.componentDefinition.guid).config$.asObservable(),r=this.getLayoutItem(e.parentComponentDefinition.guid);r.addLayoutItem(new z({guid:e.componentDefinition.guid,config:i,parent:r,runtimeViewModelApi:this.runtimeViewModelApi,outlets:t.outlets,factory:t.componentFactory}),{parentOutlet:o,columnIndex:n})}else{const t=e.componentDefinition;this.rxLogService.warning(`Cannot render view component. ${t.type} (${t.guid}) is not used in layout.`)}}}else this.initializeView(e.componentDefinition)}initializeView(e){const t=this.rxJsonParserService.tryParseJson(e.layout);this.layout=new z({guid:e.guid,parent:null,runtimeViewModelApi:this.runtimeViewModelApi,outlets:t.outlets,factory:this.factoryResolver.resolveComponentFactory(H)})}getLayoutItem(e){return this.tree.flattenBy(this.layout,e=>e.outlets.reduce((e,t)=>(t.columns.forEach(t=>{t.children.forEach(t=>{e.push(t)})}),e),[])).find(t=>t.guid===e)}}Q.\u0275fac=function(e){return new(e||Q)(n["\u0275\u0275inject"](s.RxViewComponentRegistryService),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](l.RxTreeService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](s.RxOldViewLayoutAdapterService))},Q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Q,factory:Q.\u0275fac});class K{clear(){this.runtimeViewModel=null}init(e){this.runtimeViewModel||(this.runtimeViewModel=e)}triggerViewActions(e,t){return this.runtimeViewModel.triggerViewActions(e,t)}cancel(e){return this.runtimeViewModel.cancel(e)}close(){return this.runtimeViewModel.close()}getViewInputParameters(){return this.runtimeViewModel.getViewInputParameters()}applyViewPreset(e,t,i){return this.runtimeViewModel.applyViewPreset(e,t,i)}deleteViewPreset(e){return this.runtimeViewModel.deleteViewPreset(e)}discardViewPresetChanges(e,t){return this.runtimeViewModel.discardViewPresetChanges(e,t)}saveViewPreset(e){return this.runtimeViewModel.saveViewPreset(e)}shareViewPreset(e){return this.runtimeViewModel.shareViewPreset(e)}}K.\u0275fac=function(e){return new(e||K)},K.\u0275prov=n["\u0275\u0275defineInjectable"]({token:K,factory:K.\u0275fac});class J{constructor(e,t,i,n){this.propertyName=e,this.expression=t,this.rxExpressionEvaluatorService=i,this.customEvaluatorService=n}evaluate(e){return this.rxExpressionEvaluatorService.tryEvaluate(this.expression,e,this.customEvaluatorService)}hasDependency(e,t){return(0,d.includes)(this.expression,`${e}.${t}`)}hasTokens(){return(0,d.includes)(this.expression,"${view.")||this.hasKeywordTokens()}hasKeywordTokens(){return(0,d.includes)(this.expression,"${keywords.")}hasViewTokens(){return(0,d.includes)(this.expression,"${view.inputParams")||(0,d.includes)(this.expression,"${view.api")||this.hasViewIsValidToken()}hasViewIsValidToken(){return(0,d.includes)(this.expression,"${view.isValid}")}hasComponentTokens(){return(0,d.includes)(this.expression,"${view.components")}}class Y{constructor(e,t,i,n){this.rxGlobalEventsService=e,this.rxLogService=t,this.rxViewActionService=i,this.errorHandler=n}executeActions(e,t){return new Promise((i,n)=>{let a;(0,o.from)(e).pipe((0,r.mergeScan)((e,i)=>(this.rxLogService.debug("ACTION STARTED: "+i.name),this.rxViewActionService.execute(i.name,i.parameters).pipe((0,r.map)(e=>t(i,e)),(0,r.take)(1))),null,1)).subscribe({next:e=>a=e,error:e=>{n(e),this.rxGlobalEventsService.viewActionsCompleted$.next(),(0,d.castArray)(e).forEach(e=>{(0,d.isString)(e)?this.rxLogService.warning(e):e&&this.errorHandler.handleError(e)})},complete:()=>{this.rxGlobalEventsService.viewActionsCompleted$.next(),i(a)}})})}}Y.\u0275fac=function(e){return new(e||Y)(n["\u0275\u0275inject"](p.RxGlobalEventsService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](s.RxViewActionService),n["\u0275\u0275inject"](n.ErrorHandler))},Y.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Y,factory:Y.\u0275fac,providedIn:"root"});const Z="default";class ee{constructor(e,t,i,n,o){this.rxViewDefinitionService=e,this.rxViewDefinitionParserService=t,this.rxDefinitionAdapterRegistryService=i,this.rxViewActionDefinitionAdapterRegistryService=n,this.rxViewDefinitionCacheService=o}isViewCancellable(e){return(0,d.isString)(e)?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,r.map)(e=>this.hasPageComponent(e)||this.hasViewCancellingAction(e))):(0,o.of)(this.hasPageComponent(e)||this.hasViewCancellingAction(e))}runAdaptersForComponents(e,t){const i=this.rxViewDefinitionParserService.getComponents(t||e),n=new RegExp(`\\\${view.components.${l.RX_GUID.baseGuidPattern}.`);e.viewComponentExpressions=(0,d.chain)(i).map(e=>(0,d.values)(e.componentDefinition.propertiesByName)).flatten().map(e=>(0,d.isObject)(e)?(0,d.values)(e):e).flatten().filter(d.isString).filter(e=>n.test(e)).value();const a=i.reduce((t,{componentDefinition:i})=>{const n=i.type===s.RxViewComponentType.Action?this.rxViewActionDefinitionAdapterRegistryService.getRuntimeAdapter(i.propertiesByName.name):this.rxDefinitionAdapterRegistryService.getRuntimeAdapter(i.type);if(n){const a=n.adaptDefinition(i,e);t.push(a?a.pipe((0,r.take)(1)):o.EMPTY)}return t},[]);return(0,d.isEmpty)(a)?[o.EMPTY]:a}hasViewCancellingAction(e){return Boolean(this.rxViewDefinitionParserService.findViewComponent(e,e=>e.type===s.RxViewComponentType.Action&&"rxCloseViewAction"===e.propertiesByName.name&&"true"===e.propertiesByName.actAsCancel))}hasPageComponent(e){var t;return(null===(t=(0,d.head)(e.componentDefinitions))||void 0===t?void 0:t.type)===s.RxViewComponentType.Page}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275inject"](s.RxViewDefinitionService),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](p.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](s.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](s.RxViewDefinitionCacheService))},ee.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ee,factory:ee.\u0275fac,providedIn:"root"});class te{constructor(e,t,i){this.rxObjectUtilsService=e,this.rxJsonParserService=t,this.rxDeviceDetectionService=i}preProcessViewDefinition(e){var t;null===(t=e.componentDefinitions)||void 0===t||t.forEach(e=>{this.expandProperties(e)})}postProcessViewDefinition(e){var t;null===(t=e.componentDefinitions)||void 0===t||t.forEach(t=>{this.filterComponentsForDevice(t,e)})}expandProperties(e){e.propertiesByName=this.rxObjectUtilsService.expandProperties(e.propertiesByName),e.componentDefinitions&&e.componentDefinitions.forEach(e=>{this.expandProperties(e)})}filterComponentsForDevice(e,t){var i;if((this.rxJsonParserService.tryParseJson(null===(i=e.propertiesByName)||void 0===i?void 0:i[s.RX_AVAILABLE_ON_DEVICES_PROP_NAME],s.RX_AVAILABLE_ON_DEVICES_ALL_VALUE)||s.RX_AVAILABLE_ON_DEVICES_ALL_VALUE).includes(this.rxDeviceDetectionService.currentDevice))"componentDefinitions"in e&&e.componentDefinitions.forEach(t=>{this.filterComponentsForDevice(t,e)});else if(t.componentDefinitions=t.componentDefinitions.filter(t=>t!==e),t.layout){const i=s.RxViewLayout.removeChildFromLayout(this.rxJsonParserService.tryParseJson(t.layout),e.guid);t.layout=JSON.stringify(i)}}}te.\u0275fac=function(e){return new(e||te)(n["\u0275\u0275inject"](l.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](s.RxDeviceDetectionService))},te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:te,factory:te.\u0275fac,providedIn:"root"});class ie{constructor(e,t,i,n,r,a,s,l,d,c,p,u,m,f,h,g,v){this.rxBundleService=e,this.rxGlobalCacheService=t,this.rxViewComponentRegistryService=i,this.rxViewDefinitionAdapterService=n,this.rxViewDefinitionParserService=r,this.rxViewDefinitionService=a,this.rxRuntimeViewUtilsService=s,this.rxExpressionEvaluatorService=l,this.rxNotificationService=d,this.rxViewActionRegistryService=c,this.rxLogService=p,this.viewComponentEventManager=u,this.rxUtilityModalsService=m,this.rxViewDefinitionCacheService=f,this.rxObjectUtilsService=h,this.rxJsonParserService=g,this.rxCurrentUserService=v,this.api={save:this.save.bind(this),close:this.close.bind(this),cancel:this.cancel.bind(this),refresh:this.refresh.bind(this),canClose:this.canClose.bind(this),applyViewPreset:this.applyViewPreset.bind(this),deleteViewPreset:this.deleteViewPreset.bind(this),discardViewPresetChanges:this.discardViewPresetChanges.bind(this),saveViewPreset:this.saveViewPreset.bind(this)},this.saveSubject=new o.Subject,this.closeSubject=new o.Subject,this.cancelSubject=new o.Subject,this.save$=this.saveSubject.asObservable(),this.close$=this.closeSubject.asObservable(),this.cancel$=this.cancelSubject.asObservable(),this.viewComponentStates=new Map,this.evaluationData={view:{api:this.api,components:{},inputParams:{},isValid:!1},keywords:{user:this.rxCurrentUserService.getName(),newLine:"\n"}}}init(e){this.configuration=e,this.clear();return((0,d.isString)(e.viewDefinitionName)?this.rxViewDefinitionCacheService.getViewDefinition(e.viewDefinitionName):(0,o.of)(e.viewDefinitionName)).pipe((0,r.switchMap)(e=>{const t=this.rxViewDefinitionParserService.getComponents(e,!0).map(e=>e.componentDefinition.type===s.RxViewComponentType.Action?this.rxViewActionRegistryService.getActionOwnerBundleId(e.componentDefinition.propertiesByName.name):this.rxViewComponentRegistryService.getComponentOwnerBundleId(e.componentDefinition.type));return(0,o.merge)(...t).pipe((0,r.filter)(Boolean),(0,r.distinct)(),(0,r.reduce)((e,t)=>(e.push(t),e),[]),(0,r.switchMap)(t=>t.length?this.rxBundleService.loadBundles(t,!0).pipe((0,r.map)(()=>e)):(0,o.of)(e)),(0,r.switchMap)(e=>this.rxViewComponentRegistryService.resolveAsyncDescriptors().pipe((0,r.map)(()=>e))))}),(0,r.switchMap)(e=>this.processViewDefinition(e)))}clear(){this.viewComponentStates.clear(),this.evaluationData.view.components={},this.evaluationData.view.inputParams={}}save(e=!1){return this.callRuntimeComponentsApi("save",e).pipe((0,r.tap)({complete:()=>this.saveSubject.next()}))}close(){const e=this.evaluateViewOutputParams();return this.closeSubject.next(e),(0,o.of)(e)}cancel(e){return e?(this.cancelSubject.next(),o.EMPTY):this.isDirtyView().pipe((0,r.switchMap)(e=>e?this.rxUtilityModalsService.confirmUnsavedChanges():(0,o.of)(!0)),(0,r.tap)(e=>{e&&this.cancelSubject.next()}),(0,r.switchMap)(e=>e?o.EMPTY:(0,o.throwError)(null)))}refresh(){return this.callRuntimeComponentsApi("refresh")}canClose(){let e=!0;return this.isDirtyView().subscribe(t=>e=!t),e}applyViewPreset(e,t,i){return this.callRuntimeComponentsApi("applyViewPreset",e,t,i).pipe((0,r.switchMap)(()=>o.EMPTY))}deleteViewPreset(e){return this.callRuntimeComponentsApi("deleteViewPreset",e).pipe((0,r.switchMap)(()=>o.EMPTY))}discardViewPresetChanges(e,t){return this.callRuntimeComponentsApi("discardViewPresetChanges",e,t).pipe((0,r.switchMap)(()=>o.EMPTY))}saveViewPreset(e){return this.callRuntimeComponentsApi("saveViewPreset",e).pipe((0,r.switchMap)(()=>o.EMPTY))}shareViewPreset(e){return this.callRuntimeComponentsApi("shareViewPreset",e).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.filter(e=>Boolean(null==e?void 0:e.data)).reduce((e,t)=>(e[t.guid]=t.data,e),{})))}triggerViewActions(e,t){let i=Promise.resolve();const n=this.viewComponentStates.get(e);if(n){const o=n.eventStates[t];if(o){const t=o.map(e=>({guid:e.guid,name:e.name,parameters:e.config}));i=this.viewComponentEventManager.executeActions(t,(t,i)=>{this.onViewComponentActionOutputChanged(e,t.guid,i)})}else this.rxLogService.warning(`Cannot trigger view actions. View Action Trigger Event ${t} not found.`)}else this.rxLogService.warning(`Cannot trigger view actions. View Component ${e} not found.`);return i}onViewComponentPropertyChanged({guid:e,propertyName:t,newValue:i}){const n=this.viewComponentStates.get(e);n.publicState[t]=i,this.updateEvaluationData(n),"api"!==t&&(0,d.some)(n.componentDescriptor.properties,{name:t})&&(this.updateComponentConfigProperty(t,i,n),this.updateViewComponentConfig(n));const o=n.dependentViewComponentsMap.get(t);let r;o?r=o.map(e=>this.viewComponentStates.get(e)):(r=this.getDependentViewComponentStates(i=>i.hasDependency(e,t)),n.dependentViewComponentsMap.set(t,r.map(e=>e.guid))),r.forEach(i=>{this.evaluateDependentProperties(i,e,t)}),r.map(e=>e.isDataViewComponent?this.getParentViewComponent(e):e).forEach(e=>{this.updateViewComponentConfig(e)}),"isValid"===t&&this.triggerViewValidation(i)}isDataViewComponentDefinition(e){return void 0!==e.configPropertyName}getViewInputParameters(){return this.configuration.inputParams}isDirtyView(){const e=new o.ReplaySubject(1);let t=!1;return this.isUserInteractionDetected?this.callRuntimeComponentsApi("isDirty").pipe((0,r.tap)(e=>t=e.some(({data:e})=>e))).subscribe({complete:()=>e.next(t)}):e.next(t),e.asObservable().pipe((0,r.take)(1))}triggerViewValidation(e){if(e&&(e=Array.from(this.viewComponentStates.values()).filter(e=>(0,d.has)(e.publicState,"isValid")).every(e=>e.publicState.isValid)),this.evaluationData.view.isValid!==e){let t;this.evaluationData.view.isValid=e,this.dependentOnViewIsValidPropViewComponentGuids?t=this.dependentOnViewIsValidPropViewComponentGuids.map(e=>this.viewComponentStates.get(e)):(t=this.getDependentViewComponentStates(e=>e.hasViewIsValidToken()),this.dependentOnViewIsValidPropViewComponentGuids=t.map(e=>e.guid)),t.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasViewIsValidToken())}),o.asyncScheduler.schedule(()=>{t.forEach(this.updateViewComponentConfig.bind(this))})}}getParentViewComponent(e){let t=e;for(;t.isDataViewComponent;)t=this.viewComponentStates.get(t.parentViewComponentGuid);return t}getDependentViewComponentStates(e){return Array.from(this.viewComponentStates.values()).filter(t=>{const i=(0,d.some)(t.expressions,e),n=(0,d.some)(t.eventStates,t=>(0,d.some)(t,t=>(0,d.some)(t.expressions,e)));return i||n})}updateViewComponentConfig(e){e.config$.next(this.buildComponentConfig(e))}buildComponentConfig(e){const t=Object.assign({},e.configState);return this.buildComponentChildDataConfig(e,t),t}buildComponentChildDataConfig(e,t={}){const i=e.childViewComponentGuids.map(e=>this.viewComponentStates.get(e)).filter(e=>Boolean(e)).filter(e=>e.isDataViewComponent),n=(0,d.groupBy)(i,e=>e.configPropertyName);Object.keys(n).forEach(e=>{t[e]=n[e].map(e=>{const t=Object.assign({},e.configState);return this.buildComponentChildDataConfig(e,t),t})})}onViewComponentActionOutputChanged(e,t,i){const n=this.viewComponentStates.get(e);if(n){n.eventStates[Z].find(e=>e.guid===t).publicState.output=i,this.updateEvaluationData(n),this.evaluateDependentProperties(n,t,"output")}}evaluateViewOutputParams(){return this.viewDefinition.outputParams.reduce((e,t)=>(e[t.name]=this.rxExpressionEvaluatorService.tryEvaluate(t.source,this.evaluationData),e),{})}processViewDefinition(e){this.viewDefinition=this.rxObjectUtilsService.cloneDeep(e),this.rxViewDefinitionAdapterService.preProcessViewDefinition(this.viewDefinition);const t=this.rxRuntimeViewUtilsService.runAdaptersForComponents(this.viewDefinition);return(0,o.combineLatest)(t).pipe((0,r.switchMapTo)(o.EMPTY),(0,r.tap)({complete:()=>{this.rxViewDefinitionAdapterService.postProcessViewDefinition(this.viewDefinition),this.rxViewDefinitionParserService.getComponents(this.viewDefinition).forEach(this.processComponentDefinition.bind(this)),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasKeywordTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>!e.hasTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasViewTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasComponentTokens())}),this.viewComponentStates.forEach(e=>{this.updateViewComponentConfig(e)})}}))}processComponentDefinition(e){if(e.parentComponentDefinition){const t=e.componentDefinition,i=this.buildViewComponentState(e);i&&this.viewComponentStates.set(t.guid,i)}else{const t=(0,d.map)(e.componentDefinition.inputParams,"name"),i=(0,d.keys)(this.configuration.inputParams);i.length>0&&(0,d.every)(i,e=>/^\$[0-9]+\$$/.test(e))&&0===(0,d.intersection)(t,i).length?(0,d.forEach)(i,t=>{const i=Number(t.match(/^\$([0-9]+)\$$/)[1]),n=(0,d.get)(e.componentDefinition,`inputParams[${i}].name`);this.evaluationData.view.inputParams[n]=this.configuration.inputParams[t]}):(0,d.forEach)(t,e=>{this.evaluationData.view.inputParams[e]=this.configuration.inputParams[e]})}}buildViewComponentState(e){const t=e.componentDefinition,i=this.rxViewComponentRegistryService.get(t.type);if(i){const n={guid:t.guid,type:t.type,config$:new o.BehaviorSubject({}),expressions:[],eventStates:{[Z]:[]},configState:{},publicState:{},isDataViewComponent:!1,configPropertyName:null,parentViewComponentGuid:e.parentComponentDefinition.guid,childViewComponentGuids:[],dependentViewComponentsMap:new Map,componentDescriptor:i};return this.isDataViewComponentDefinition(i)&&(n.isDataViewComponent=!0,n.configPropertyName=i.configPropertyName),(0,d.forOwn)(t.propertiesByName,(e,t)=>{const o=(0,d.find)(i.properties,e=>t===e.name),r=o&&o.enableExpressionEvaluation;r&&n.expressions.push(new J(t,e,this.rxExpressionEvaluatorService,o.evaluatorService)),this.updateComponentConfigProperty(t,r?null:e,n)}),this.updateEvaluationData(n),this.isContainerComponentDefinition(t)&&(t.componentDefinitions.filter(e=>e.type===s.RxViewComponentType.Action).forEach(e=>{const t=this.buildViewComponentActionState(e);t&&n.eventStates[Z].push(t)}),n.eventStates[Z]=(0,d.sortBy)(n.eventStates[Z],"index"),n.childViewComponentGuids=t.componentDefinitions.filter(e=>e.type!==s.RxViewComponentType.Action).map(e=>e.guid)),n}t.type!==s.RxViewComponentType.Action&&this.rxLogService.warning(`Cannot initialize view component. View Component Descriptor for ${t.type} not found.`)}buildViewComponentActionState(e){const t=this.rxViewActionRegistryService.get(e.propertiesByName.name);if(t){const i={guid:e.guid,name:e.propertiesByName.name,index:(0,d.toNumber)(e.propertiesByName.index)||0,config:{},publicState:{},expressions:[]};return Object.keys(e.propertiesByName||{}).filter(e=>"name"!==e).map(n=>{const o=(t.parameters||[]).find(e=>n===e.name),r=o&&o.enableExpressionEvaluation;r&&this.initializeActionExpressionForProperty(i,o.evaluatorService,n,e.propertiesByName[n]),this.updateActionConfigProperty(n,r?null:e.propertiesByName[n],i)}),i}}initializeActionExpressionForProperty(e,t,i,n){(0,d.isObject)(n)?(0,d.forIn)(n,(n,o)=>{this.initializeActionExpressionForProperty(e,t,`${i}.${o}`,n)}):e.expressions.push(new J(i,n,this.rxExpressionEvaluatorService,t))}callRuntimeComponentsApi(e,...t){const i=new o.ReplaySubject(1),n=[],a=Array.from(this.viewComponentStates.values()).filter(t=>Boolean(t.publicState.api&&(0,d.isFunction)(t.publicState.api[e]))).map(i=>{let a=i.publicState.api[e].apply(null,t);return a&&a.then?a=(0,o.from)(a):a instanceof o.Observable||(a=(0,o.of)(a)),a.pipe((0,r.take)(1),(0,r.map)(e=>({guid:i.guid,data:e})),(0,r.tap)({error:e=>n.push(e)}),(0,r.catchError)(()=>o.EMPTY))});return(0,o.combineLatest)(a).subscribe({next:e=>i.next(e),complete:()=>(0,d.isEmpty)(n)?i.complete():i.error(n)}),i.asObservable()}evaluateComponentExpressions(e,t){e.expressions.filter(t).forEach(t=>{this.updateComponentConfigProperty(t.propertyName,this.evaluateExpression(t),e)}),this.updateEvaluationData(e),Object.keys(e.eventStates).forEach(i=>{e.eventStates[i].forEach(i=>{i.expressions.filter(t).forEach(t=>{this.updateActionConfigProperty(t.propertyName,this.evaluateExpression(t),i),this.updateEvaluationData(e)})})})}evaluateDependentProperties(e,t,i){this.evaluateComponentExpressions(e,e=>e.hasDependency(t,i))}evaluateExpression(e){let t;try{t=e.evaluate(this.evaluationData)}catch(i){t=null,this.rxNotificationService.addErrorMessage(i.message,"")}return t}updateComponentConfigProperty(e,t,i){const n=this.rxViewComponentRegistryService.get(i.type),o=(0,d.find)(n.properties,{name:e});i.configState[e]=this.processPropertyValue(t,o)}updateActionConfigProperty(e,t,i){const n=this.rxViewActionRegistryService.get(i.name);let o=(0,d.find)(n.parameters,{name:e});if(!o&&(0,d.includes)(e,".")){const t=e.split(".")[0];o=(0,d.find)(n.parameters,{name:t})}(0,d.set)(i.config,e,this.processPropertyValue(t,o))}updateEvaluationData(e){this.evaluationData.view.components[e.guid]=Object.assign(Object.assign({},e.configState),e.publicState),Object.keys(e.eventStates).forEach(t=>{e.eventStates[t].forEach(e=>{this.evaluationData.view.components[e.guid]=e.publicState})})}processPropertyValue(e,t){return t&&t.type&&!(0,d.isNil)(e)&&(t.type===s.ViewComponentPropertyType.Boolean?e=!(0,d.includes)(["0","false"],e)&&Boolean(e):t.type===s.ViewComponentPropertyType.Number?(e=Number(e),Number.isNaN(e)&&(e=null)):t.type===s.ViewComponentPropertyType.String?e=String(e):[s.ViewComponentPropertyType.Array,s.ViewComponentPropertyType.Object].includes(t.type)&&(e=this.rxJsonParserService.tryParseJson(e))),e}isContainerComponentDefinition(e){return void 0!==e.componentDefinitions}}ie.\u0275fac=function(e){return new(e||ie)(n["\u0275\u0275inject"](p.RxBundleService),n["\u0275\u0275inject"](p.RxGlobalCacheService),n["\u0275\u0275inject"](s.RxViewComponentRegistryService),n["\u0275\u0275inject"](te),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](s.RxViewDefinitionService),n["\u0275\u0275inject"](ee),n["\u0275\u0275inject"](s.RxExpressionEvaluatorService),n["\u0275\u0275inject"](p.RxNotificationService),n["\u0275\u0275inject"](s.RxViewActionRegistryService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](Y),n["\u0275\u0275inject"](u.RxUtilityModalsService),n["\u0275\u0275inject"](s.RxViewDefinitionCacheService),n["\u0275\u0275inject"](l.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](p.RxCurrentUserService))},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac});class ne{constructor(){this.activeRuntimeViews=[]}register(e){this.activeRuntimeViews.includes(e)||this.activeRuntimeViews.push(e)}getAll(){return this.activeRuntimeViews}unregister(e){(0,d.pull)(this.activeRuntimeViews,e)}}ne.\u0275fac=function(e){return new(e||ne)},ne.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ne,factory:ne.\u0275fac,providedIn:"root"});class oe{constructor(e){this.runtimeViewCanvasService=e,this.componentPropertyChanged=new n.EventEmitter,this.destroy$=new o.Subject}ngOnInit(){this.runtimeViewCanvasService.componentPropertyChanged$.pipe((0,r.takeUntil)(this.destroy$)).subscribe(e=>{this.componentPropertyChanged.emit(e)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}oe.\u0275fac=function(e){return new(e||oe)(n["\u0275\u0275directiveInject"](U))},oe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:oe,selectors:[["rx-runtime-view-canvas"]],inputs:{layout:"layout"},outputs:{componentPropertyChanged:"componentPropertyChanged"},features:[n["\u0275\u0275ProvidersFeature"]([U])],decls:1,vars:1,consts:[["class","root-item",3,"layout",4,"ngIf"],[1,"root-item",3,"layout"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,T,1,1,"rx-runtime-view-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngIf",t.layout)},directives:[c.NgIf,X],encapsulation:2});class re{constructor(e,t,i,r,a,s,l,d,c){this.runtimeViewModelApi=e,this.rxRecordDefinitionCacheService=t,this.runtimeViewLayoutService=i,this.runtimeViewModel=r,this.rxProcessDefinitionCacheService=a,this.rxRuntimeViewRegistryService=s,this.rxViewDefinitionCacheService=l,this.rxAssociationDefinitionCacheService=d,this.rxViewDefinitionService=c,this.destroyed$=new o.ReplaySubject(1),this.save=new n.EventEmitter,this.closeView=new n.EventEmitter,this.cancelView=new n.EventEmitter,this.beforeLoad=new n.EventEmitter,this.afterLoad=new n.EventEmitter,this.rxAssociationDefinitionCacheService.registerConsumer(this.destroyed$),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$),this.rxViewDefinitionCacheService.registerConsumer(this.destroyed$)}onTrigger(){this.runtimeViewModel.isUserInteractionDetected=!0}ngOnInit(){this.init(),this.runtimeViewModel.cancel$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.cancelView.emit()),this.runtimeViewModel.save$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.save.emit()),this.runtimeViewModel.close$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.closeView.emit(e))}ngOnChanges(e){e.configuration.currentValue&&e.configuration.previousValue&&e.configuration.currentValue.viewDefinitionName!==e.configuration.previousValue.viewDefinitionName&&(this.runtimeViewModelApi.clear(),this.runtimeViewLayoutService.clear(),this.configuration=e.configuration.currentValue,this.init())}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.rxRuntimeViewRegistryService.unregister(this.runtimeViewModel)}init(){this.beforeLoad.emit(),this.runtimeViewModel.init(this.configuration).subscribe({complete:()=>{this.runtimeViewModelApi.init(this.runtimeViewModel),this.runtimeViewLayoutService.init(this.runtimeViewModel,this.runtimeViewModelApi),this.hostClass=this.runtimeViewModel.viewDefinition.styles||"",this.rxViewDefinitionService.isPageView(this.runtimeViewModel.viewDefinition)&&(this.hostClass=this.hostClass+" rx-page-view"),this.viewDefinitionGuid=this.runtimeViewModel.viewDefinition.guid,this.runtimeViewModel.isUserInteractionDetected=!1,this.afterLoad.emit()}}),this.configuration.onRegisterApi&&this.configuration.onRegisterApi(this.runtimeViewModel.api),this.rxRuntimeViewRegistryService.register(this.runtimeViewModel)}}re.\u0275fac=function(e){return new(e||re)(n["\u0275\u0275directiveInject"](K),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](Q),n["\u0275\u0275directiveInject"](ie),n["\u0275\u0275directiveInject"](f.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](ne),n["\u0275\u0275directiveInject"](s.RxViewDefinitionCacheService),n["\u0275\u0275directiveInject"](m.RxAssociationDefinitionCacheService),n["\u0275\u0275directiveInject"](s.RxViewDefinitionService))},re.\u0275cmp=n["\u0275\u0275defineComponent"]({type:re,selectors:[["rx-runtime-view"]],hostVars:3,hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("focusin",function(){return t.onTrigger()}),2&e&&(n["\u0275\u0275attribute"]("rx-view-definition-guid",t.viewDefinitionGuid),n["\u0275\u0275classMap"](t.hostClass))},inputs:{configuration:"configuration"},outputs:{save:"save",closeView:"closeView",cancelView:"cancelView",beforeLoad:"beforeLoad",afterLoad:"afterLoad"},features:[n["\u0275\u0275ProvidersFeature"]([ie,K,Q]),n["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"layout","componentPropertyChanged",4,"ngIf"],[3,"layout","componentPropertyChanged"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,O,1,1,"rx-runtime-view-canvas",0),2&e&&n["\u0275\u0275property"]("ngIf",t.runtimeViewLayoutService.layout)},directives:[c.NgIf,oe],styles:[".rx-page-view[_nghost-%COMP%]     .outlet-padding{padding:0}.rx-page-view[_nghost-%COMP%]     rx-runtime-view-canvas-item{height:100%}"]});class ae{constructor(){this.customCssClasses="",this.autoFill=new n.EventEmitter,this.autoScroll=new n.EventEmitter,this.hidden=new n.EventEmitter,this.isComponentHidden=!1,this.destroyed$=new o.ReplaySubject(1),this.propertyChanged=new n.EventEmitter}get isHidden(){return this.isComponentHidden}set isHidden(e){this.hidden.emit(e),this.isComponentHidden=Boolean(e)}ngOnInit(){this.config.pipe((0,r.pluck)("styles"),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.customCssClasses=e||"",this.autoFill.emit(this.customCssClasses.includes("rx-auto-fill")),this.autoScroll.emit(this.customCssClasses.includes("rx-auto-scroll"))})}notifyPropertyChanged(e,t,i){this.propertyChanged.next({guid:this.guid,propertyName:e,newValue:t,oldValue:i})}triggerViewActions(e=this.guid,t=Z){return this.runtimeViewModelApi.triggerViewActions(e,t)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275dir=n["\u0275\u0275defineDirective"]({type:ae,hostVars:4,hostBindings:function(e,t){2&e&&(n["\u0275\u0275hostProperty"]("hidden",t.isHidden),n["\u0275\u0275attribute"]("rx-view-component-id",t.guid),n["\u0275\u0275classMap"](t.customCssClasses))},outputs:{autoFill:"autoFill",autoScroll:"autoScroll",hidden:"hidden"}});class se{constructor(e,t){this.runtimeViewCanvasItemService=e,this.componentFactoryResolver=t,this.name=s.RX_VIEW_DEFINITION.defaultOutletName}ngOnInit(){this.runtimeViewCanvasItemService.registerOutlet(this.name,this.container,this.componentFactoryResolver.resolveComponentFactory(W))}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275directiveInject"](q),n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver))},se.\u0275cmp=n["\u0275\u0275defineComponent"]({type:se,selectors:[["rx-runtime-view-canvas-outlet"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](y,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{name:"name"},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class le{}le.\u0275fac=function(e){return new(e||le)},le.\u0275mod=n["\u0275\u0275defineNgModule"]({type:le,declarations:[oe,X,W,se],imports:[c.CommonModule,h.FormsModule],exports:[se,oe,X,W]}),le.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[c.CommonModule,h.FormsModule]]});class de{constructor(e,t,i,n,o,r){this.rxRuntimeViewRegistryService=e,this.rxUtilityModalsService=t,this.translateService=i,this.changeDetector=n,this.activeModalRef=o,this.dockedPanelContext=r,this.isBlade=!1,this.context=r||o,this.isBlade=Boolean(r);const a=this.context.getData();this.configuration=a.configuration,this.title=a.title,this.notification=a.notification,this.isCancellable=a.isCancellable,this.closeLabel=i.instant("com.bmc.arsys.rx.client.common.close.label")}onCancelView(){this.context.dismiss(null)}closeModal(){this.context.dismiss(v.DismissReasons.CLOSE_BTN)}onClose(e){this.context.close(e)}onBeforeLoad(){this.busySubscription=o.NEVER.subscribe(),this.changeDetector.detectChanges()}onAfterLoad(){var e;null===(e=this.busySubscription)||void 0===e||e.unsubscribe()}}de.\u0275fac=function(e){return new(e||de)(n["\u0275\u0275directiveInject"](ne),n["\u0275\u0275directiveInject"](u.RxUtilityModalsService),n["\u0275\u0275directiveInject"](g.TranslateService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](v.ActiveModalRef,8),n["\u0275\u0275directiveInject"](v.DockedPanelContext,8))},de.\u0275cmp=n["\u0275\u0275defineComponent"]({type:de,selectors:[["rx-runtime-view-modal"]],decls:8,vars:10,consts:[[4,"ngIf"],["modalHeader",""],["class","pl-4 pt-4",3,"config",4,"ngIf"],[3,"ngClass"],[1,"position-relative"],[3,"options"],[3,"configuration","cancelView","closeView","beforeLoad","afterLoad"],["class","dp-header",4,"ngIf","ngIfElse"],[1,"dp-header"],[1,"dp-title"],["class","close dp-close","rx-id","x-button",3,"click",4,"ngIf"],["rx-id","x-button",1,"close","dp-close",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"pl-4","pt-4",3,"config"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,P,2,2,"ng-container",0),n["\u0275\u0275template"](1,_,4,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,k,1,3,"adapt-alert",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275element"](6,"rx-busy-indicator",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"rx-runtime-view",6),n["\u0275\u0275listener"]("cancelView",function(){return t.onCancelView()})("closeView",function(e){return t.onClose(e)})("beforeLoad",function(){return t.onBeforeLoad()})("afterLoad",function(){return t.onAfterLoad()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.title||t.isCancellable),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.notification),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](5,B,!t.isBlade,t.isBlade)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",n["\u0275\u0275pureFunction1"](8,$,t.busySubscription)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("configuration",t.configuration))},directives:[c.NgIf,c.NgClass,u.RxBusyIndicatorComponent,re,v.AdaptAlertComponent],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{min-height:34px}.dp-header[_ngcontent-%COMP%]{flex-direction:row!important}.dp-content[_ngcontent-%COMP%] > rx-runtime-view[_ngcontent-%COMP%]{height:100%}"]});const ce={actions:{save:"rx-runtime-view-save",close:"rx-runtime-view-close",cancel:"rx-runtime-view-cancel"}};class pe{}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pe,declarations:[re,H,de],imports:[c.CommonModule,le,g.TranslateModule,v.AdaptAlertModule,u.RxBusyIndicatorModule],exports:[le,re,H,de]}),pe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[c.CommonModule,le,g.TranslateModule,v.AdaptAlertModule,u.RxBusyIndicatorModule],le]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-shell-designer-page.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxShellDesignerPageComponent:()=>Y,RxShellDesignerPageModule:()=>Ie});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),a=i("./node_modules/@angular/router/fesm2015/router.js"),s=i("./node_modules/rxjs/_esm2015/operators/index.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),p=i("lodash"),u=i("rxjs"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),f=i("./node_modules/@angular/forms/fesm2015/forms.js"),h=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),v=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),y=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),x=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js");function C(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-view-designer",1),n["\u0275\u0275listener"]("closeDesigner",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCloseDesigner()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf;n["\u0275\u0275property"]("configuration",e)}}const S=["selectedRecordsForm"];function D(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",22),n["\u0275\u0275elementStart"](1,"div",23),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addRecord(t.data)}),n["\u0275\u0275elementStart"](2,"button",24),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addRecord(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",25),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.data.definitionName)}}function I(e,t){if(1&e&&n["\u0275\u0275template"](0,D,5,2,"div",21),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",e.data)}}const R=function(){return["selected-record-items"]};function w(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275elementStart"](1,"adapt-tree",19),n["\u0275\u0275template"](2,I,1,1,"ng-template",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListConnectedTo",n["\u0275\u0275pureFunction0"](3,R)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e.filteredRecordDefinitionItems)("wrap",e.treeWrap)}}function E(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",27),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.shell.shell-global-search-records.available-records.empty-state.message")))}function F(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",4),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",15),n["\u0275\u0275elementStart"](6,"div",16),n["\u0275\u0275template"](7,w,3,4,"div",17),n["\u0275\u0275template"](8,E,3,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,3,"com.bmc.arsys.rx.client.shell.shell-global-search-records.available-records.title")," "),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",e.filteredRecordDefinitionItems.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.filteredRecordDefinitionItems.length)}}function M(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275elementStart"](1,"button",29),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",30),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function T(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",39),n["\u0275\u0275elementStart"](1,"button",40),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.removeRecord(i)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function O(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",32),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](2,"div",33),n["\u0275\u0275elementStart"](3,"div",34),n["\u0275\u0275elementStart"](4,"div",35),n["\u0275\u0275elementStart"](5,"div",36),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,T,4,3,"div",37),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"rx-definition-picker",38),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.view=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragDisabled",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("title",e.definitionName),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.definitionName," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name","selectedRecordName-"+i)("isDisabled",o.config.isReadOnly)("options",o.definitionPickerOptions)("ngModel",e.view)}}function N(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",41),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.shell.shell-global-search-records.record-included-in-search-results.empty-state.message")))}function A(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",42),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](12);n["\u0275\u0275property"]("disabled",t.form.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function P(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",10),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).remove(t)}),n["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275elementStart"](2,"strong",7),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",8),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).edit(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,P,1,0,"button",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.definitionName),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isDisabled)}}function _(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275text"](2,"Records included in search results"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,j,6,2,"div",4),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.value)}}function V(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"p"),n["\u0275\u0275text"](1," No menu items have been defined. Drag and drop menu groups or menu items onto the canvas to define the menu. "),n["\u0275\u0275elementEnd"]())}function k(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}function B(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}const $=function(e){return{$implicit:e}};function L(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275template"](1,B,1,0,"ng-container",3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275nextContext"](3);const i=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,$,e))}}function G(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,k,1,0,"ng-container",3),n["\u0275\u0275template"](2,L,2,4,"div",4),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2),o=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",o)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](4,$,e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.children)("ngForTrackBy",i.trackByGuid)}}function z(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,V,2,0,"p",0),n["\u0275\u0275template"](2,G,3,6,"div",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByGuid)}}function U(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" (",t.actionNameToLabelMap[e.data.actionName],")")}}function q(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().remove(t)}),n["\u0275\u0275elementEnd"]()}}function X(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275elementStart"](1,"div",7),n["\u0275\u0275elementStart"](2,"div",8),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"span",9),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,U,2,1,"span",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",11),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().edit(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,q,1,0,"button",12),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.data.menuItemName||e.data.menuGroupName),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](i.menuItemTypeToLabelMap[e.type]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.actionName),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.canBeRemoved(e))}}function W(e,t){1&e&&n["\u0275\u0275element"](0,"span",9)}function H(e,t){1&e&&n["\u0275\u0275element"](0,"span",10)}const Q=function(){return["bottom-left"]},K=function(){return["bottom-right"]};class J{constructor(e){this.viewDesignerFacade=e,this.viewDesignerFacade.setViewInspectorConfig(this.getInspector())}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{component:r.RxViewRevertCustomizationComponent},{component:r.RxViewCustomizationOptionsComponent}]}]}}}J.\u0275fac=function(e){return new(e||J)(n["\u0275\u0275inject"](r.ViewDesignerFacade))},J.\u0275prov=n["\u0275\u0275defineInjectable"]({token:J,factory:J.\u0275fac});class Y{constructor(e,t,i,n,o,r,a,l){this.activatedRoute=e,this.rxComponentCanDeactivateGuard=t,this.rxUtilityModalsService=i,this.rxDefinitionNameService=n,this.rxPageTitleService=o,this.rxBundleCacheService=r,this.rxGlobalCacheService=a,this.rxPreviousStateService=l,this.configuration$=this.activatedRoute.params.pipe((0,s.pluck)("bundleId"),(0,s.switchMap)(e=>this.rxGlobalCacheService.getBundleDescriptor(e)),(0,s.tap)(e=>{this.rxBundleCacheService.bundleId=e.id,this.rxPageTitleService.set(["Application shell",e.friendlyName],d.RX_APPLICATION.innovationStudioBundleId)}),(0,s.map)(e=>({bundleId:e.id,viewDefinitionName:this.rxDefinitionNameService.getDefinitionName(e.id,d.RX_APPLICATION.shellDefinitionName),disablePreview:!0,paletteComponentsPredicate:e=>(0,p.values)(c.RX_SHELL.navBar).includes(e.type)})))}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this)}ngOnDestroy(){this.rxComponentCanDeactivateGuard.setPageComponent(null)}canDeactivate(){return!this.viewDesignerComponent||this.viewDesignerComponent.canDeactivate()}onCloseDesigner(){this.rxPreviousStateService.goToPrevState()}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}}Y.\u0275fac=function(e){return new(e||Y)(n["\u0275\u0275directiveInject"](a.ActivatedRoute),n["\u0275\u0275directiveInject"](d.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](l.RxUtilityModalsService),n["\u0275\u0275directiveInject"](d.RxDefinitionNameService),n["\u0275\u0275directiveInject"](d.RxPageTitleService),n["\u0275\u0275directiveInject"](d.RxBundleCacheService),n["\u0275\u0275directiveInject"](d.RxGlobalCacheService),n["\u0275\u0275directiveInject"](d.RxPreviousStateService))},Y.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Y,selectors:[["rx-shell-designer-page"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](r.RxViewDesignerComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.viewDesignerComponent=e.first)}},features:[n["\u0275\u0275ProvidersFeature"]([J,{provide:r.RX_VIEW_MODEL,useExisting:J}])],decls:2,vars:3,consts:[[3,"configuration","closeDesigner",4,"ngIf"],[3,"configuration","closeDesigner"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,C,1,1,"rx-view-designer",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.configuration$))},directives:[o.NgIf,r.RxViewDesignerComponent],pipes:[o.AsyncPipe],styles:[""]});class Z extends l.RxModalClass{constructor(e,t,i,n){super(e,n),this.activeModalRef=e,this.recordDefinitionDataPageService=t,this.definitionNameService=i,this.injector=n,this.config=this.activeModalRef.getData(),this.filteredRecordDefinitionItems=[],this.treeWrap=h.TreeWrap.WrapAll,this.DismissReasons=h.DismissReasons,this.definitionPickerOptions={label:"Display view when clicked",definitionType:m.RxDefinitionPickerType.View,required:!0}}ngOnInit(){super.ngOnInit(),this.selectedRecords=this.config.selectedRecords.map(e=>{var t;return Object.assign(Object.assign({},e),{isOpen:e.name===(null===(t=this.config.recordToEdit)||void 0===t?void 0:t.name)})}),this.getRecordDefinitions().subscribe(e=>{this.availableRecordDefinitionItems=e,this.updateFilteredItems()})}updateFilteredItems(){this.filteredRecordDefinitionItems=this.availableRecordDefinitionItems.filter(e=>!this.selectedRecords.find(t=>t.name===e.name)).map(e=>({data:e,label:e.definitionName}))}addRecord(e){this.markAsDirty(),this.selectedRecords.push(Object.assign(Object.assign({},e),{isOpen:!0,view:null})),this.updateFilteredItems(),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}toggleOpen(e){this.selectedRecords.forEach(t=>t.isOpen=e)}onSelectedRecordsListDrop(e){this.addRecord(e.item.data)}removeRecord(e){this.markAsDirty(),this.selectedRecords=this.selectedRecords.filter(t=>t.name!==e.name),this.updateFilteredItems()}onSave(){const e=this.selectedRecords.map(e=>({name:e.name,view:e.view,definitionName:e.definitionName}));this.activeModalRef.close(e)}getRecordDefinitions(){return this.recordDefinitionDataPageService.get({params:{propertySelection:"name",excludeCustomRecordDefinitions:!0}}).pipe((0,s.map)(e=>e.data.map(e=>({name:e.name,definitionName:this.definitionNameService.getDisplayName(e.name)}))))}ngAfterViewInit(){const e=(0,p.findIndex)(this.selectedRecords,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}}Z.\u0275fac=function(e){return new(e||Z)(n["\u0275\u0275directiveInject"](h.ActiveModalRef),n["\u0275\u0275directiveInject"](g.RxRecordDefinitionDataPageService),n["\u0275\u0275directiveInject"](d.RxDefinitionNameService),n["\u0275\u0275directiveInject"](n.Injector))},Z.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Z,selectors:[["rx-shell-global-search-records-modal"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](S,7,f.NgForm),n["\u0275\u0275viewQuery"](h.AdaptAccordionTabComponent,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectedRecordsForm=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:17,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"mt-2"],["class","btn-group",4,"ngIf"],["id","selected-record-items","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["selectedRecordsForm","ngForm"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled",4,"ngFor","ngForOf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],[1,"card-block"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngIf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["filter","true",3,"value","wrap"],["adaptTreeNodeTemplate",""],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData",4,"ngIf"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData"],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragDisabled"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["required","true",1,"d-block","w-50",3,"name","isDisabled","options","ngModel","ngModelChange"],[1,"right-header-block"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,F,9,5,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"h4",4),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,M,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",6),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedRecordsListDrop(e)}),n["\u0275\u0275elementStart"](10,"adapt-accordion",7),n["\u0275\u0275elementStart"](11,"form",null,8),n["\u0275\u0275template"](13,O,9,9,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](14,N,3,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](15,"div",11),n["\u0275\u0275template"](16,A,3,4,"button",12),n["\u0275\u0275elementStart"](17,"button",13),n["\u0275\u0275listener"]("click",function(){return t.activeModalRef.dismiss(t.DismissReasons.CLOSE_BTN)}),n["\u0275\u0275text"](18),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.config.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,11,"com.bmc.arsys.rx.client.shell.shell-global-search-records.record-included-in-search-results.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.selectedRecords.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.selectedRecords),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.selectedRecords.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](19,13,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](20,15,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[o.NgIf,v.CdkDropList,h.AdaptAccordionComponent,f["\u0275NgNoValidate"],f.NgControlStatusGroup,f.NgForm,o.NgForOf,h.AdaptButtonComponent,h.AdaptTreeComponent,h.AdaptTreeNodeTemplateDirective,v.CdkDrag,h.AdaptEmptyStateComponent,h.AdaptAccordionTabComponent,m.RxDefinitionPickerComponent,f.RequiredValidator,f.NgControlStatus,f.NgModel],pipes:[y.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]  .a-tree__node_leaf .a-tree__toggle{display:none}']});class ee extends m.ValueAccessor{constructor(e){super(),this.rxModalService=e}openModal(e){this.rxModalService.openModal({title:"Configure results view",data:{selectedRecords:this.value,recordToEdit:e,isReadOnly:this.isDisabled},content:Z,size:c.OpenViewActionModalSize.Large,testID:"configure-results-view"}).then(e=>{this.value=e}).catch(p.noop)}focus(){this.openModal()}edit(e){this.openModal(e)}remove(e){this.value=this.value.filter(t=>t!==e)}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275directiveInject"](l.RxModalService))},ee.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ee,selectors:[["rx-shell-global-search-records-control"]],inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:f.NG_VALUE_ACCESSOR,useExisting:ee,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:2,consts:[["btn-type","tertiary","rx-id","open-modal-button",1,"p-0","pb-1",3,"hidden","click"],[1,"d-icon-plus_circle"],[4,"ngIf"],[1,"my-1"],["class","border px-2 py-1 mb-1 global-records-list",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","global-records-list"],[1,"d-flex"],[1,"mr-auto","mt-1","d-flex","global-record-title","flex-fill","text-truncate"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","edit-button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openModal()}),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275text"](2," Configure results view\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,_,4,1,"ng-container",2)),2&e&&(n["\u0275\u0275property"]("hidden",t.isDisabled),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.value.length))},directives:[h.AdaptButtonComponent,o.NgIf,o.NgForOf],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.global-records-list[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.global-record-title[_ngcontent-%COMP%]{font-size:14px}']});class te extends m.InspectorWidgetBase{constructor(e,t){super(e),this.injector=e,this.rxUtilityModalsService=t,this.menuGroupLabel="Menu group",this.menuItemTypeToLabelMap={[c.RX_SHELL.navBar.menuItem]:"Menu item",[c.RX_SHELL.navBar.menuGroup]:this.menuGroupLabel,[c.RX_SHELL.navBar.userMenu]:this.menuGroupLabel},this.actionNameToLabelMap={[c.RX_SHELL.actions.launchURL]:"Launch URL",[c.RX_SHELL.actions.navigateToView]:"Navigate to view",[c.RX_SHELL.actions.navigateToSmartReporting]:"Navigate to Smart Reporting"}}edit(e){this.designerItemModel.selectMenuItem(e.guid)}remove(e){this.rxUtilityModalsService.confirm("Are you sure you want to delete this menu item?").then(t=>{t&&this.designerItemModel.removeMenuItem(e.guid)})}canBeRemoved(e){return e.type!==c.RX_SHELL.navBar.userMenu&&!this.isDisabled}trackByGuid(e,t){return t.guid}}te.\u0275fac=function(e){return new(e||te)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](l.RxUtilityModalsService))},te.\u0275cmp=n["\u0275\u0275defineComponent"]({type:te,selectors:[["rx-shell-menu-items-control"]],inputs:{options:"options",isDisabled:"isDisabled"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:3,consts:[[4,"ngIf"],["itemTpl",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","ml-2",4,"ngFor","ngForOf","ngForTrackBy"],[1,"ml-2"],[1,"border","px-2","py-1","mb-2","d-flex","align-items-start"],[1,"mr-auto"],[1,"font-weight-bold"],[1,"text-secondary"],["class","text-secondary",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","edit-button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,z,3,3,"ng-container",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,X,9,4,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.designerItemModel.menuItems$))},directives:[o.NgIf,o.NgForOf,o.NgTemplateOutlet,h.AdaptButtonComponent],pipes:[o.AsyncPipe],encapsulation:2});class ie extends r.ViewDesignerComponentModel{constructor(){super(...arguments),this.allowAppSwitching$=this.sandbox.getComponentPropertyValue("allowAppSwitching"),this.globalSearchEnabled$=this.sandbox.getComponentPropertyValue("globalSearchEnabled"),this.menuItems$=this.sandbox.getChildComponentsTree(),this.childMenuItemsCount$=this.sandbox.getChildComponentGuids(e=>e.type===c.RX_SHELL.navBar.menuItem,!0).pipe((0,s.map)(e=>e.length),(0,s.distinctUntilChanged)())}static getInitialProperties(e){const t=Object.assign(Object.assign({allowAppSwitching:!0,globalSearchDisabled:!0,globalSearchRecords:[]},e),{globalSearchUseDefault:!0,globalSearchCustomSearchState:null});return t.globalSearchEnabled=!t.globalSearchDisabled,t}rxInit(){this.sandbox.getComponentPropertyValue("globalSearchDisabled").subscribe(e=>{this.sandbox.updateInspectorConfig(this.getInspector(e))}),this.globalSearchEnabled$.subscribe(e=>{this.sandbox.updateComponentProperties({globalSearchDisabled:!e})}),(0,u.combineLatest)([this.sandbox.getComponentPropertyValue("globalSearchRecords"),this.sandbox.getComponentPropertyValue("globalSearchDisabled"),this.childMenuItemsCount$]).subscribe(([e,t,i])=>{this.sandbox.setValidationIssues(this.validate(e,t,i))})}getPropertiesByName(e){return(0,p.omit)(e,"globalSearchEnabled")}removeMenuItem(e){this.sandbox.removeComponents([e])}selectMenuItem(e){this.sandbox.selectComponent(e)}validate(e,t,i){const n=[];return 0===i&&n.push(this.sandbox.createError("Please add at least one menu item.")),t||0!==e.length||n.push(this.sandbox.createError("Please include at least one record in the global search results view.","globalSearchRecords")),n}getInspector(e){const t=[{name:"globalSearchEnabled",component:m.SwitchFormControlComponent,options:{label:"Enable global search"}}];return e||t.push({name:"globalSearchRecords",component:ee}),{inspectorSectionConfigs:[{label:"General",controls:[{name:"allowAppSwitching",component:m.SwitchFormControlComponent,options:{label:"Enable application launcher"}}]},{label:"Global search",controls:t},{label:"Menu items",controls:[{component:te,options:{model:this}}]}]}}}class ne{constructor(e){this.viewDesignerFacade=e}dropPredicate(e){return e.draggedViewComponentDescriptor.type!==c.RX_SHELL.navBar.action}dropPredicateAction(e){return e.draggedViewComponentDescriptor.type===c.RX_SHELL.navBar.action}}ne.\u0275fac=function(e){return new(e||ne)(n["\u0275\u0275directiveInject"](r.ViewDesignerFacade))},ne.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ne,selectors:[["rx-shell-design"]],inputs:{model:"model"},decls:15,vars:20,consts:[[1,"shell-design","d-flex","align-items-start","pl-2"],[1,"a-product"],[1,"a-product__logo","logo-light","logo-helix"],[1,"a-product__name"],[1,"a-sep"],["dropListOrientation","horizontal",1,"shell-design-outlet","d-block","flex-grow-1",3,"dropPredicate"],["dropListOrientation","horizontal",1,"shell-design-outlet","actions","d-block","flex-grow-1",3,"name","dropPredicate"],["class","shell-button d-icon-search ml-auto",4,"ngIf"],["class","shell-button d-icon-tiles ml-auto",4,"ngIf"],[1,"shell-button","d-icon-search","ml-auto"],[1,"shell-button","d-icon-tiles","ml-auto"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"span",1),n["\u0275\u0275element"](2,"span",2),n["\u0275\u0275elementStart"](3,"span",3),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](6,"span",4),n["\u0275\u0275elementStart"](7,"rx-canvas-outlet",5),n["\u0275\u0275pipe"](8,"async"),n["\u0275\u0275pipe"](9,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"rx-canvas-outlet",6),n["\u0275\u0275template"](11,W,1,0,"span",7),n["\u0275\u0275pipe"](12,"async"),n["\u0275\u0275template"](13,H,1,0,"span",8),n["\u0275\u0275pipe"](14,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,10,t.viewDesignerFacade.bundleFriendlyName$)," "),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("allow-app-switch",n["\u0275\u0275pipeBind1"](8,12,t.model.allowAppSwitching$))("global-search",n["\u0275\u0275pipeBind1"](9,14,t.model.globalSearchEnabled$)),n["\u0275\u0275property"]("dropPredicate",t.dropPredicate),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("name","actions")("dropPredicate",t.dropPredicateAction),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](12,16,t.model.globalSearchEnabled$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](14,18,t.model.allowAppSwitching$)))},directives:[r.CanvasOutletComponent,o.NgIf],pipes:[o.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.shell-design[_ngcontent-%COMP%]{background:#313538;color:#fff;min-height:50px;border-bottom:2px solid #f86e00;padding-right:60px}.shell-design-outlet[_ngcontent-%COMP%]    >rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{display:flex;flex-flow:row wrap;min-height:50px}[_nghost-%COMP%]  .shell-design-outlet.actions>rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{justify-content:flex-end}.shell-design-outlet[_ngcontent-%COMP%]     .canvas-rx-shell-user-menu{position:absolute;top:0;right:calc(-150px - 44px)}.shell-design-outlet.allow-app-switch[_ngcontent-%COMP%]     .canvas-rx-shell-user-menu, .shell-design-outlet.global-search[_ngcontent-%COMP%]     .canvas-rx-shell-user-menu{right:calc(-150px - 86px)}.shell-design-outlet.allow-app-switch.global-search[_ngcontent-%COMP%]     .canvas-rx-shell-user-menu{right:calc(-150px - 128px)}.shell-design-outlet.actions[_ngcontent-%COMP%]{max-width:150px;min-width:150px}.shell-button[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;width:42px;text-align:center}.a-product[_ngcontent-%COMP%]{margin-top:10px}']});class oe{}oe.\u0275fac=function(e){return new(e||oe)},oe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oe,declarations:[Z],imports:[o.CommonModule,f.FormsModule,v.DragDropModule,h.AdaptEmptyStateModule,h.AdaptButtonModule,h.AdaptAccordionModule,m.RxDefinitionPickerModule,h.AdaptTreeModule,y.TranslateModule],exports:[Z]}),oe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,f.FormsModule,v.DragDropModule,h.AdaptEmptyStateModule,h.AdaptButtonModule,h.AdaptAccordionModule,m.RxDefinitionPickerModule,h.AdaptTreeModule,y.TranslateModule]]});class re{}re.\u0275fac=function(e){return new(e||re)},re.\u0275mod=n["\u0275\u0275defineNgModule"]({type:re,declarations:[ee],imports:[o.CommonModule,h.AdaptButtonModule,oe],exports:[ee]}),re.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,h.AdaptButtonModule,oe]]});class ae{}ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ae,declarations:[te],imports:[o.CommonModule,h.AdaptButtonModule]}),ae.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,h.AdaptButtonModule]]});class se{constructor(e){this.rxGuidService=e}adaptDefinition(e){this.addAddUserMenu(e),this.addActionsOutlet(e)}addAddUserMenu(e){const t=this.rxGuidService.generate(),i={resourceType:c.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:t,type:c.RX_SHELL.navBar.userMenu,layout:JSON.stringify(c.RxViewLayout.getViewLayoutForDefaultOutlet()),componentDefinitions:[],propertiesByName:{menuGroupName:"User menu"}};if(!e.componentDefinitions.find(e=>e.type===c.RX_SHELL.navBar.userMenu)){const n=JSON.parse(e.layout);n.outlets[0].columns[0].children.push(t),e.layout=JSON.stringify(n),e.componentDefinitions.push(i)}}addActionsOutlet(e){const t=JSON.parse(e.layout);t.outlets.find(e=>e.name===c.RX_SHELL.outlets.actions)||(t.outlets.push(c.RxViewLayout.getOutlet(c.RX_SHELL.outlets.actions)),e.layout=JSON.stringify(t))}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275inject"](b.RxGuidService))},se.\u0275prov=n["\u0275\u0275defineInjectable"]({token:se,factory:se.\u0275fac});class le{constructor(e,t,i,n){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxDefinitionAdapterRegistryService=i,this.rxShellDesignAdapterService=n,e.register({type:c.RX_SHELL.componentName,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName},{name:c.RX_SHELL.outlets.actions}],properties:[{name:"allowAppSwitching",designType:c.ViewComponentPropertyType.Boolean},{name:"globalSearchDisabled",designType:c.ViewComponentPropertyType.Boolean},{name:"globalSearchUseDefault",designType:c.ViewComponentPropertyType.Boolean},{name:"globalSearchRecords",designType:c.ViewComponentPropertyType.Array}],name:"Navigation bar",hidden:!0,group:"Shell navigation",icon:"layout",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ne),designComponentModel:ie,bundleId:d.RX_APPLICATION.platformBundleId,options:{static:!0}}),this.rxDefinitionAdapterRegistryService.registerDesignAdapter(c.RX_SHELL.componentName,this.rxShellDesignAdapterService)}}le.\u0275fac=function(e){return new(e||le)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](se))},le.\u0275mod=n["\u0275\u0275defineNgModule"]({type:le,declarations:[ne],imports:[o.CommonModule,r.ViewDesignerCanvasModule,re,ae]}),le.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[se],imports:[[o.CommonModule,r.ViewDesignerCanvasModule,re,ae]]});class de extends r.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.label$=this.componentProperties$.pipe((0,s.pluck)("menuItemName")),this.isActionItem$=this.sandbox.getParentComponentGuid().pipe((0,s.switchMap)(e=>this.sandbox.getLayout(e)),(0,s.map)(e=>this.isActionItem(e))),this.menuItemIcon$=this.sandbox.getComponentPropertyValue("menuItemIcon"),this.iconClass$=this.menuItemIcon$.pipe((0,s.map)(e=>e?`d-icon-left-${e}`:"")),this.menuItemNameLabel="Label",this.rxViewDefinitionCacheService=this.injector.get(c.RxViewDefinitionCacheService),this.viewDesignerFacade=this.injector.get(r.ViewDesignerFacade),this.rxOpenViewModelHelperService=this.injector.get(x.RxOpenViewModelHelperService),this.shellActions={[c.RX_SHELL.actions.launchURL]:{name:c.RX_SHELL.actions.launchURL,label:"Launch URL",parameters:[{name:"url",component:m.TextFormControlComponent,options:{label:"URL",required:!0}},{name:"launchBehavior",component:m.SelectFormControlComponent,options:{label:"Launch behavior",options:(0,p.map)(c.RX_LAUNCH_BEHAVIOR,e=>({name:e.content,id:e.value})),required:!0,sortAlphabetically:!1}}],requiredParams:{url:"URL",launchBehavior:"Launch behavior"},defaultParams:{url:null,launchBehavior:c.RX_LAUNCH_BEHAVIOR.newWindow.value}},[c.RX_SHELL.actions.navigateToView]:{name:c.RX_SHELL.actions.navigateToView,label:"Open view",requiredParams:{viewDefinitionName:"View"},defaultParams:{viewDefinitionName:null,"viewParams.*":null,"presentation.type":c.OpenViewActionType.FullWidth,"presentation.launchBehavior":c.OpenViewActionLaunchBehavior.SameWindow,"presentation.modalSize":null,"presentation.title":null}},[c.RX_SHELL.actions.navigateToSmartReporting]:{name:c.RX_SHELL.actions.navigateToSmartReporting,label:"Navigate to Smart Reporting"}},this.viewDefinitionName$=this.sandbox.getComponentPropertyValue("viewDefinitionName"),this.inputParams$=this.viewDefinitionName$.pipe((0,s.switchMap)(e=>this.getViewInputParams(e)),(0,s.map)(e=>(0,p.map)(e,"name")),(0,s.tap)(e=>{this.currentViewInputNames=e})),this.currentViewInputNames=[],this.isInShellRoot$=this.sandbox.getParentComponentGuid().pipe((0,s.switchMap)(e=>this.viewDesignerFacade.getComponentType(e)),(0,s.map)(e=>e===c.RX_SHELL.componentName),(0,s.tap)(e=>this.isInShellRoot=e))}static getInitialProperties(e){const t=Object.assign({menuItemName:"New menu item",menuItemIcon:null,hidden:!1,styles:null,actionName:c.RX_SHELL.actions.navigateToView,"presentation.type":c.OpenViewActionType.FullWidth,"presentation.launchBehavior":c.OpenViewActionLaunchBehavior.SameWindow},e);return t.actionName===c.RX_SHELL.actions.navigateToState&&(t.actionName=c.RX_SHELL.actions.navigateToView,delete t.state),t.actionName===c.RX_SHELL.actions.navigateToView&&(t["presentation.modalSize"]=c.OpenViewActionModalSize.Medium),t}static getDefaultPermissions(){return[{ownerId:d.RX_PERMISSION.permissionDialogMetadata.viewComponent.defaultPermission,type:d.RX_PERMISSION.permissionDialogMetadata.viewComponent.defaultPermittedAction}]}rxInit(){(0,u.combineLatest)([this.componentProperties$,this.inputParams$,this.isInShellRoot$,this.isActionItem$]).subscribe(([e,t,i,n])=>{this.sandbox.updateInspectorConfig(this.getInspector(e,t,i,n)),this.sandbox.setValidationIssues(this.validate(e))}),this.viewDefinitionName$.pipe((0,s.skip)(1),(0,s.withLatestFrom)(this.componentProperties$)).subscribe(([e,t])=>{const i=this.getEmptyViewParams(t);(0,p.isEmpty)(i)||this.sandbox.updateComponentProperties(i)}),this.sandbox.getComponentPropertyValue("menuItemName").subscribe(e=>{this.sandbox.setBreadcrumbs(e)}),this.sandbox.getComponentPropertyValue("actionName").pipe((0,s.pairwise)(),(0,s.withLatestFrom)(this.componentProperties$)).subscribe(([[e,t],i])=>{const n=this.getActionDefaultProps(e,i),o=this.getActionDefaultProps(t,i),r=Object.assign(Object.assign({},n),o);(0,p.isEmpty)(r)||this.sandbox.updateComponentProperties(r)})}getPropertiesByName(e){const t=e.actionName===c.RX_SHELL.actions.navigateToView?this.currentViewInputNames.map(e=>`viewParams.${e}`):[],i=(0,p.reject)(this.getActionProps(e.actionName,e),t=>e["presentation.type"]===c.OpenViewActionType.FullWidth?"presentation.modalSize"===t||"presentation.title"===t:"presentation.launchBehavior"===t);return(0,p.pick)(e,"menuItemName","menuItemIcon","hidden","styles","actionName",...i,...t)}getEmptyViewParams(e){return(0,p.transform)(e,(e,t,i)=>{i.startsWith("viewParams")&&(e[i]=null)},{})}getActionDefaultProps(e,t){const i=this.shellActions[e];return(0,p.transform)(i.defaultParams,(e,i,n)=>{if(n.endsWith(".*")){const o=n.replace("*","");(0,p.forEach)(t,(t,n)=>{n.startsWith(o)&&(e[n]=i)})}else e[n]=i},{})}getActionProps(e,t){const i=this.shellActions[e];return(0,p.transform)(i.defaultParams,(e,t,i)=>{i.endsWith(".*")||e.push(i)},[])}getInspector(e,t,i,n=!1){var o;const a={inspectorSectionConfigs:[{label:"General",controls:[{name:"menuItemName",component:m.TextFormControlComponent,options:{label:this.menuItemNameLabel,required:!0}},{name:"hidden",component:m.SwitchFormControlComponent,options:{label:"Hidden"}},{name:"styles",component:m.TagsFormControlComponent,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new d.Tooltip("Enter CSS class names to apply to this view component."),errorCheck:r.validateCssClassName}},{component:r.RxComponentPermissionEditorWidgetComponent,options:{label:"Permissions",type:"view",componentGuid:this.sandbox.guid}}]}]},s={name:"menuItemIcon",component:m.IconPickerFormControlComponent,options:{label:"Icon"}};i&&!n||a.inspectorSectionConfigs[0].controls.splice(1,0,s);const l={label:"Action",controls:[{name:"actionName",component:m.SelectFormControlComponent,options:{label:"Action name",options:(0,p.map)(this.shellActions,e=>({name:e.label,id:e.name}))}}]};if(a.inspectorSectionConfigs.push(l),e.actionName){const i=this.shellActions[e.actionName];(null===(o=null==i?void 0:i.parameters)||void 0===o?void 0:o.length)&&l.controls.push(...i.parameters),e.actionName===c.RX_SHELL.actions.navigateToView&&l.controls.push(...this.rxOpenViewModelHelperService.getOpenViewInspector(t.map(e=>({name:e})),e["presentation.type"],e["presentation.modalSize"],this.expressionConfigurator))}return a}validate(e){const t=[];return(0,p.trim)(e.menuItemName)||t.push(this.sandbox.createError("Label cannot be blank.","menuItemName")),t.push(...this.validateActionParams(e),...(0,r.validateCssClassNames)(e.styles)),t}validateActionParams(e){const t=[],i=this.shellActions[e.actionName];return((0,p.keys)(i.requiredParams)||[]).filter(t=>!e[t]).forEach(e=>{t.push(this.sandbox.createError(`${i.requiredParams[e]||e} cannot be blank.`,e))}),t}getViewInputParams(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,s.pluck)("inputParams")):(0,u.of)([])}isActionItem(e){const t=null==e?void 0:e.outlets.find(e=>e.name===c.RX_SHELL.outlets.actions);return t&&c.RxViewLayout.outletHasChild(t,this.sandbox.guid)||!1}}class ce{}ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ce,selectors:[["rx-shell-menu-item-design"]],inputs:{model:"model"},decls:4,vars:6,consts:[[1,"label",3,"ngClass"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pipeBind1"](1,2,t.model.iconClass$)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](3,4,t.model.label$)))},directives:[o.NgClass],pipes:[o.AsyncPipe],styles:["[_nghost-%COMP%]{min-height:42px;display:flex;align-items:center}.label[_ngcontent-%COMP%]{padding:0 10px;font-size:14px;cursor:pointer}"]});class pe extends d.RxExpressionConfigurator{constructor(){super(...arguments),this.commonDataDictionary$=(0,u.of)([{label:"General",expanded:!0,children:[{label:"Current person ID",expression:"${keywords.personId}"},{label:"Current user ID",expression:"${keywords.userId}"}]}])}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:d.ExpressionOperatorRowsByGroup.get(d.ExpressionOperatorGroup.AllClient)})}}class ue{adaptDefinition(e){e.propertiesByName.menuItemIcon&&(e.propertiesByName.menuItemIcon=(0,p.get)(c.RX_LEGACY_ICONS,e.propertiesByName.menuItemIcon,e.propertiesByName.menuItemIcon))}}ue.\u0275fac=function(e){return new(e||ue)},ue.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ue,factory:ue.\u0275fac});class me{constructor(e,t,i,n){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxDefinitionAdapterRegistryService=i,this.rxShellMenuItemDesignAdapterService=n,e.register({type:c.RX_SHELL.navBar.menuItem,properties:[{name:"menuItemName",localizable:!0},{name:"hidden",designType:c.ViewComponentPropertyType.Boolean}],name:"Menu item",group:"Shell navigation",icon:"list",index:2,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ce),designComponentModel:de,bundleId:d.RX_APPLICATION.platformBundleId,expressionConfigurator:pe}),this.rxDefinitionAdapterRegistryService.registerDesignAdapter(c.RX_SHELL.navBar.menuItem,this.rxShellMenuItemDesignAdapterService)}}me.\u0275fac=function(e){return new(e||me)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](d.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](ue))},me.\u0275mod=n["\u0275\u0275defineNgModule"]({type:me,declarations:[ce],imports:[o.CommonModule]}),me.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ue],imports:[[o.CommonModule]]});class fe extends r.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.label$=this.componentProperties$.pipe((0,s.pluck)("menuGroupName"))}static getInitialProperties(e){return Object.assign({menuGroupName:"Menu group",hidden:!1,styles:null},e)}static getDefaultPermissions(){return[{ownerId:d.RX_PERMISSION.permissionDialogMetadata.viewComponent.defaultPermission,type:d.RX_PERMISSION.permissionDialogMetadata.viewComponent.defaultPermittedAction}]}rxInit(){this.sandbox.updateInspectorConfig(this.getInspector()),this.componentProperties$.subscribe(e=>{this.sandbox.setValidationIssues(this.validate(e))}),this.sandbox.getComponentPropertyValue("menuGroupName").subscribe(e=>{this.sandbox.setBreadcrumbs(e)})}validate(e){const t=[];return(0,p.trim)(e.menuGroupName)||t.push(this.sandbox.createError("Label cannot be blank.","menuGroupName")),t.push(...(0,r.validateCssClassNames)(e.styles)),t}getInspector(){return{inspectorSectionConfigs:[{label:"Properties",controls:[{name:"menuGroupName",component:m.TextFormControlComponent,options:{label:"Label",required:!0}},{name:"hidden",component:m.SwitchFormControlComponent,options:{label:"Hidden"}},{name:"styles",component:m.TagsFormControlComponent,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new d.Tooltip("Enter CSS class names to apply to this view component."),errorCheck:r.validateCssClassName}},{component:r.RxComponentPermissionEditorWidgetComponent,options:{label:"Permissions",type:"view",componentGuid:this.sandbox.guid}}]}]}}}class he{dropPredicate(e){return e.draggedViewComponentDescriptor.type===c.RX_SHELL.navBar.menuItem}}he.\u0275fac=function(e){return new(e||he)},he.\u0275cmp=n["\u0275\u0275defineComponent"]({type:he,selectors:[["rx-shell-menu-group-design"]],inputs:{model:"model"},decls:6,vars:7,consts:[["adaptDropdown","",3,"autoClose","placement"],["adaptDropdownToggle","",1,"label-wrapper","pr-0"],[1,"label","d-icon-right-angle_down"],["adaptDropdownMenu","",3,"dropPredicate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"span",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](5,"rx-canvas-outlet",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("autoClose",!1)("placement",n["\u0275\u0275pureFunction0"](6,Q)),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,4,t.model.label$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("dropPredicate",t.dropPredicate))},directives:[h.AdaptDropdownDirective,h.AdaptDropdownToggleDirective,r.CanvasOutletComponent,h.AdaptDropdownMenuDirective],pipes:[o.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.label-wrapper[_ngcontent-%COMP%]{min-height:42px;display:flex;align-items:center;cursor:pointer}.label[_ngcontent-%COMP%]{padding:0 10px;font-size:14px}rx-canvas-outlet[_ngcontent-%COMP%]{background:#313538;color:#fff;width:250px;overflow-x:hidden}rx-canvas-outlet[_ngcontent-%COMP%]    >rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{min-height:200px}']});class ge{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RX_SHELL.navBar.menuGroup,properties:[{name:"menuGroupName",localizable:!0},{name:"hidden",designType:c.ViewComponentPropertyType.Boolean}],name:"Menu",group:"Shell navigation",icon:"app_list",index:1,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(he),designComponentModel:fe,bundleId:d.RX_APPLICATION.platformBundleId,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}]})}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},ge.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ge,declarations:[he],imports:[o.CommonModule,r.ViewDesignerCanvasModule,r.RxComponentPermissionEditorWidgetModule,h.AdaptDropdownModule]}),ge.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,r.ViewDesignerCanvasModule,r.RxComponentPermissionEditorWidgetModule,h.AdaptDropdownModule]]});class ve{dropPredicate(e){return e.draggedViewComponentDescriptor.type===c.RX_SHELL.navBar.menuItem}}ve.\u0275fac=function(e){return new(e||ve)},ve.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ve,selectors:[["rx-shell-user-menu-design"]],decls:9,vars:4,consts:[["adaptDropdown","",3,"autoClose","placement"],["adaptDropdownToggle","",1,"label-wrapper","pr-0"],[1,"label","d-icon-user_circle","d-icon-right-angle_down"],["adaptDropdownMenu","",1,"drop"],[3,"dropPredicate"],[1,"d-icon-left-wrench_o","px-3","pt-2"],[1,"d-icon-left-exit","px-3","py-2"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275element"](2,"span",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275element"](4,"rx-canvas-outlet",4),n["\u0275\u0275elementStart"](5,"div",5),n["\u0275\u0275text"](6,"My Preferences"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",6),n["\u0275\u0275text"](8,"Sign Out"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("autoClose",!1)("placement",n["\u0275\u0275pureFunction0"](3,K)),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("dropPredicate",t.dropPredicate))},directives:[h.AdaptDropdownDirective,h.AdaptDropdownToggleDirective,h.AdaptDropdownMenuDirective,r.CanvasOutletComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.label-wrapper[_ngcontent-%COMP%]{min-height:42px;display:flex;align-items:center;cursor:pointer}.label[_ngcontent-%COMP%]{padding:0 5px;font-size:20px}.drop[_ngcontent-%COMP%]{background:#313538;color:#fff;width:250px}rx-canvas-outlet[_ngcontent-%COMP%]    >rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{min-height:200px}']});class ye extends r.ViewDesignerComponentModel{}class be{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RX_SHELL.navBar.userMenu,properties:[],name:"User menu",hidden:!0,group:"Shell navigation",icon:"cube_square",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ve),designComponentModel:ye,bundleId:d.RX_APPLICATION.platformBundleId,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],options:{static:!0}})}}be.\u0275fac=function(e){return new(e||be)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},be.\u0275mod=n["\u0275\u0275defineNgModule"]({type:be,declarations:[ve],imports:[o.CommonModule,r.ViewDesignerCanvasModule,h.AdaptDropdownModule]}),be.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,r.ViewDesignerCanvasModule,h.AdaptDropdownModule]]});class xe extends de{constructor(){super(...arguments),this.iconClass$=this.menuItemIcon$.pipe((0,s.map)(e=>e?`d-icon-${e}`:"")),this.menuItemNameLabel="Tooltip"}static getInitialProperties(e){var t;const i=super.getInitialProperties(Object.assign(Object.assign({},e),{menuItemName:null!==(t=null==e?void 0:e.menuItemName)&&void 0!==t?t:"New action"}));return i.menuItemIcon=i.menuItemIcon||"triangle_right_circle_o",i}validate(e){const t=super.validate(e);return e.menuItemIcon||t.push(this.sandbox.createError("Icon cannot be blank.","menuItemIcon")),t}}class Ce{}Ce.\u0275fac=function(e){return new(e||Ce)},Ce.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ce,selectors:[["rx-shell-action-design"]],inputs:{model:"model"},decls:3,vars:6,consts:[[1,"label",3,"ngClass","title"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"span",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pipeBind1"](1,2,t.model.iconClass$))("title",n["\u0275\u0275pipeBind1"](2,4,t.model.label$))},directives:[o.NgClass],pipes:[o.AsyncPipe],styles:["[_nghost-%COMP%]{min-height:42px;display:flex;align-items:center;justify-content:center;min-width:42px}.label[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}"]});class Se{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RX_SHELL.navBar.action,properties:[{name:"menuItemName",localizable:!0},{name:"hidden",designType:c.ViewComponentPropertyType.Boolean}],name:"Action",group:"Shell navigation",icon:"triangle_right_circle_o",index:3,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ce),designComponentModel:xe,bundleId:d.RX_APPLICATION.platformBundleId,expressionConfigurator:pe})}}Se.\u0275fac=function(e){return new(e||Se)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Se.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Se,declarations:[Ce],imports:[o.CommonModule]}),Se.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule]]});class De{}De.\u0275fac=function(e){return new(e||De)},De.\u0275mod=n["\u0275\u0275defineNgModule"]({type:De,imports:[le,me,ge,be,Se]}),De.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[le,me,ge,be,Se]]});class Ie{}Ie.\u0275fac=function(e){return new(e||Ie)},Ie.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ie,declarations:[Y],imports:[o.CommonModule,r.ViewDesignerModule,De],exports:[Y]}),Ie.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,r.ViewDesignerModule,De]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-web-api-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxWebApiDefinitionDataPageService:()=>r,RxWebApiDefinitionService:()=>a});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js");class r extends o.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.webapi.datapage.WebApiDefinitionDataPageQuery"),this.injector=e}}r.\u0275fac=function(e){return new(e||r)(n["\u0275\u0275inject"](n.Injector))},r.\u0275prov=n["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac,providedIn:"root"});class a{constructor(e){this.rxCommandFactoryService=e}rename(e,t){return this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.webapi.command.RenameWebApiDefinitionCommand").execute({name:e,newName:t})}}a.\u0275fac=function(e){return new(e||a)(n["\u0275\u0275inject"](o.RxCommandFactoryService))},a.\u0275prov=n["\u0275\u0275defineInjectable"]({token:a,factory:a.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-web-api-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RxWebApiDesignerComponent:()=>y,RxWebApiDesignerModule:()=>b,RxWebApiDesignerPageComponent:()=>x,RxWebApiDesignerPageModule:()=>C});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/forms/fesm2015/forms.js"),a=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),d=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),c=i("rxjs"),p=i("./node_modules/rxjs/_esm2015/operators/index.js"),u=i("lodash"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-web-api-api.js"),h=i("./node_modules/@angular/router/fesm2015/router.js");function g(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-code-viewer",8),o["\u0275\u0275pipe"](1,"json"),o["\u0275\u0275pipe"](2,"async")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("code",o["\u0275\u0275pipeBind1"](1,4,o["\u0275\u0275pipeBind1"](2,6,e.webApiDefinition$)))("lang","javascript")("hasToolbar",!1)("theme","light")}}function v(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-web-api-designer",1),o["\u0275\u0275listener"]("webApiDefinitionSaved",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onWebApiDefinitionSaved(t)})("webApiDefinitionErrorLoading",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onWebApiDefinitionErrorLoading()})("closeDesigner",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCloseDesigner()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("webApiDefinitionName",e.webApiDefinitionName)}}class y{constructor(e,t,i,n,r,a){this.rxGlobalCacheService=e,this.rxBundleCacheService=t,this.rxWebApiDefinitionService=i,this.rxDefinitionNameService=n,this.translateService=r,this.rxOverlayService=a,this.webApiDefinitionSaved=new o.EventEmitter,this.webApiDefinitionErrorLoading=new o.EventEmitter,this.closeDesigner=new o.EventEmitter,this.isDesignMode=!0,this.isExistingWebApi=!1,this.isCustomizationEnabled=!0,this.bundleFriendlyName$=this.rxGlobalCacheService.getBundleFriendlyName(this.rxBundleCacheService.bundleId),this.validationIssues$=new c.BehaviorSubject([]),this.hasValidationErrors$=this.validationIssues$.pipe((0,p.map)(e=>Boolean((0,u.filter)(e,{issues:[{type:l.ValidationIssueType.Error}]}).length)),(0,p.distinctUntilChanged)()),this.webApiDefinition$=new c.BehaviorSubject(null),this.isSavingInProgress$=new c.BehaviorSubject(!1),this.bundleId=this.rxBundleCacheService.bundleId,this.isBundleEditable=this.rxOverlayService.isBundleEditable(this.bundleId),this.destroyed$=new c.ReplaySubject(1)}ngOnInit(){this.webApiDefinitionName,this.breadcrumbItems$=this.webApiDefinition$.pipe((0,p.map)(e=>[{label:this.rxDefinitionNameService.getDisplayName(null==e?void 0:e.name)||`<${this.translateService.instant("com.bmc.arsys.rx.client.web-api-designer.new-web-api.label")}>`,data:{}}])),this.isSaveButtonDisabled$=(0,c.combineLatest)([this.validationIssues$,this.isSavingInProgress$]).pipe((0,p.map)(([[e],t])=>Boolean(null==e?void 0:e.issues)||!this.isBundleEditable||t))}canDeactivate(){return!0}toggleDesignMode(){this.isDesignMode=!this.isDesignMode}onCorrectIssue(e){}validate(e){const t=[];return t.length?[{title:this.translateService.instant("com.bmc.arsys.rx.client.web-api-designer.new-web-api.label"),issues:t}]:[]}onRevertCustomization(e){}saveDefinition(){}}y.\u0275fac=function(e){return new(e||y)(o["\u0275\u0275directiveInject"](m.RxGlobalCacheService),o["\u0275\u0275directiveInject"](m.RxBundleCacheService),o["\u0275\u0275directiveInject"](f.RxWebApiDefinitionService),o["\u0275\u0275directiveInject"](m.RxDefinitionNameService),o["\u0275\u0275directiveInject"](d.TranslateService),o["\u0275\u0275directiveInject"](m.RxOverlayService))},y.\u0275cmp=o["\u0275\u0275defineComponent"]({type:y,selectors:[["rx-web-api-designer"]],inputs:{webApiDefinitionName:"webApiDefinitionName"},outputs:{webApiDefinitionSaved:"webApiDefinitionSaved",webApiDefinitionErrorLoading:"webApiDefinitionErrorLoading",closeDesigner:"closeDesigner"},decls:22,vars:36,consts:[[3,"bundleName","breadcrumbItems","isDesignMode","isSaveButtonDisabled","toggleDesignMode","save","closeDesigner"],[1,"rx-component-designer",3,"hidden"],["position","right","panelWidth","280px",3,"openedId"],[3,"headerTitle","tooltipText","iconClass"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],[1,"main","rx-designer-container","h-100"],[1,"mt-0"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-designer-header",0),o["\u0275\u0275listener"]("toggleDesignMode",function(){return t.toggleDesignMode()})("save",function(){return t.saveDefinition()})("closeDesigner",function(){return t.closeDesigner.emit()}),o["\u0275\u0275pipe"](1,"async"),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",1),o["\u0275\u0275elementStart"](5,"adapt-sidebar",2),o["\u0275\u0275elementStart"](6,"adapt-sidebar-item",3),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275elementStart"](10,"rx-validation-issues",4),o["\u0275\u0275listener"]("correctIssue",function(e){return t.onCorrectIssue(e)}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",5),o["\u0275\u0275elementStart"](14,"h3",6),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"h4",6),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,g,3,8,"adapt-code-viewer",7)),2&e&&(o["\u0275\u0275property"]("bundleName",o["\u0275\u0275pipeBind1"](1,14,t.bundleFriendlyName$))("breadcrumbItems",o["\u0275\u0275pipeBind1"](2,16,t.breadcrumbItems$))("isDesignMode",t.isDesignMode)("isSaveButtonDisabled",o["\u0275\u0275pipeBind1"](3,18,t.isSaveButtonDisabled$)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("hidden",!t.isDesignMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("openedId",0),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("headerTitle",o["\u0275\u0275pipeBind1"](7,20,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275propertyInterpolate"]("tooltipText",o["\u0275\u0275pipeBind1"](8,22,"com.bmc.arsys.rx.client.designer.validation-issues.label")),o["\u0275\u0275property"]("iconClass",o["\u0275\u0275pipeBind1"](9,24,t.hasValidationErrors$)?"d-icon-exclamation_triangle text-danger":"d-icon-exclamation_triangle"),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("definitionTypeDisplayName",o["\u0275\u0275pipeBind1"](11,26,"com.bmc.arsys.rx.client.common.web-api-definition.label"))("issueSections",o["\u0275\u0275pipeBind1"](12,28,t.validationIssues$)),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",t.isExistingWebApi?o["\u0275\u0275pipeBind1"](16,30,"com.bmc.arsys.rx.client.web-api-designer.edit-web-api.title"):o["\u0275\u0275pipeBind1"](17,32,"com.bmc.arsys.rx.client.web-api-designer.new-web-api.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](20,34,"com.bmc.arsys.rx.client.web-api-designer.collection-details.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.isDesignMode))},directives:[s.RxDesignerHeaderComponent,a.AdaptSidebarComponent,a.AdaptSidebarItemComponent,l.RxValidationIssuesComponent,n.NgIf,a.AdaptCodeViewerComponent],pipes:[n.AsyncPipe,d.TranslatePipe,n.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-component-designer[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:calc(100% - 50px);overflow:hidden}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:auto;padding:1rem}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}']});class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=o["\u0275\u0275defineNgModule"]({type:b,declarations:[y],imports:[a.AdaptCodeViewerModule,a.AdaptRxFormsModule,a.AdaptSidebarModule,a.AdaptTabsModule,n.CommonModule,s.CustomizationOptionsModule,r.FormsModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,s.RxDesignerHeaderModule,s.RxRevertCustomizationModule,l.RxValidationIssuesModule,d.TranslateModule],exports:[y]}),b.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptCodeViewerModule,a.AdaptRxFormsModule,a.AdaptSidebarModule,a.AdaptTabsModule,n.CommonModule,s.CustomizationOptionsModule,r.FormsModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,s.RxDesignerHeaderModule,s.RxRevertCustomizationModule,l.RxValidationIssuesModule,d.TranslateModule]]});class x{constructor(e,t,i,n,o,r,a,s){this.rxUtilityModalService=e,this.rxBundleCacheService=t,this.rxDefinitionNameService=i,this.rxPageTitleService=n,this.rxComponentCanDeactivateGuard=o,this.translateService=r,this.activatedRoute=a,this.router=s,this.isInitialized=!1}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),this.subscription=this.activatedRoute.params.subscribe(({definitionName:e,bundleId:t})=>{this.rxBundleCacheService.bundleId=t||this.rxDefinitionNameService.getBundleId(e),this.isInitialized=!0,this.isNewWepApi=!e,this.webApiDefinitionName=e,this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(e),this.translateService.instant("com.bmc.arsys.rx.client.web-api-designer.title")])})}ngOnDestroy(){this.subscription.unsubscribe(),this.rxComponentCanDeactivateGuard.setPageComponent(null)}onCloseDesigner(){this.router.navigate([m.RX_APPLICATION.innovationStudioBundleId,this.rxBundleCacheService.bundleId,"web-api-definitions"])}confirmDeactivation(){return this.rxUtilityModalService.confirmUnsavedChanges()}canDeactivate(){var e,t;return null===(t=null===(e=this.webApiDesignerComponent)||void 0===e?void 0:e.canDeactivate())||void 0===t||t}onWebApiDefinitionSaved(e){this.isNewWepApi&&this.router.navigate(["edit2",e],{relativeTo:this.activatedRoute.parent})}onWebApiDefinitionErrorLoading(){this.router.navigate(["new2",this.rxBundleCacheService.bundleId],{relativeTo:this.activatedRoute.parent})}}x.\u0275fac=function(e){return new(e||x)(o["\u0275\u0275directiveInject"](l.RxUtilityModalsService),o["\u0275\u0275directiveInject"](m.RxBundleCacheService),o["\u0275\u0275directiveInject"](m.RxDefinitionNameService),o["\u0275\u0275directiveInject"](m.RxPageTitleService),o["\u0275\u0275directiveInject"](m.RxComponentCanDeactivateGuard),o["\u0275\u0275directiveInject"](d.TranslateService),o["\u0275\u0275directiveInject"](h.ActivatedRoute),o["\u0275\u0275directiveInject"](h.Router))},x.\u0275cmp=o["\u0275\u0275defineComponent"]({type:x,selectors:[["rx-web-api-designer-page"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](y,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.webApiDesignerComponent=e.first)}},decls:1,vars:1,consts:[[3,"webApiDefinitionName","webApiDefinitionSaved","webApiDefinitionErrorLoading","closeDesigner",4,"ngIf"],[3,"webApiDefinitionName","webApiDefinitionSaved","webApiDefinitionErrorLoading","closeDesigner"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,v,1,1,"rx-web-api-designer",0),2&e&&o["\u0275\u0275property"]("ngIf",t.isInitialized)},directives:[n.NgIf,y],encapsulation:2});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=o["\u0275\u0275defineNgModule"]({type:C,declarations:[x],imports:[n.CommonModule,b],exports:[x]}),C.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,b]]})},"./node_modules/@ngrx/component-store/fesm2015/ngrx-component-store.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ComponentStore:()=>l,INITIAL_STATE_TOKEN:()=>s,tapResponse:()=>d});var n=i("rxjs"),o=i("./node_modules/rxjs/_esm2015/operators/index.js"),r=i("./node_modules/@angular/core/fesm2015/core.js");function a(){return e=>new n.Observable(t=>{let i,o;const r=new n.Subscription;return r.add(e.subscribe({complete:()=>{i&&t.next(o),t.complete()},error:e=>{t.error(e)},next:e=>{o=e,i||(i=n.asapScheduler.schedule(()=>{t.next(o),i=void 0}),r.add(i))}})),r})}const s=new r.InjectionToken("@ngrx/component-store Initial State");class l{constructor(e){this.destroySubject$=new n.ReplaySubject(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new n.ReplaySubject(1),this.isInitialized=!1,this.notInitializedErrorMessage=`${this.constructor.name} has not been initialized yet. Please make sure it is initialized before updating/getting.`,this.state$=this.select(e=>e),e&&this.initState(e)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return t=>{let i;const r=((0,n.isObservable)(t)?t:(0,n.of)(t)).pipe((0,o.concatMap)(e=>this.isInitialized?(0,n.scheduled)([e],n.queueScheduler).pipe((0,o.withLatestFrom)(this.stateSubject$)):(0,n.throwError)(new Error(this.notInitializedErrorMessage))),(0,o.takeUntil)(this.destroy$)).subscribe({next:([t,i])=>{this.stateSubject$.next(e(i,t))},error:e=>{i=e,this.stateSubject$.error(e)}});if(i)throw i;return r}}initState(e){(0,n.scheduled)([e],n.queueScheduler).subscribe(e=>{this.isInitialized=!0,this.stateSubject$.next(e)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){const t="function"==typeof e?e(this.get()):e;this.updater((e,t)=>Object.assign(Object.assign({},e),t))(t)}get(e){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);let t;return this.stateSubject$.pipe((0,o.take)(1)).subscribe(i=>{t=e?e(i):i}),t}select(...e){const{observables:t,projector:i,config:r}=function(e){const t=Array.from(e);let i,n={debounce:!1};const o=t.pop();"function"!=typeof o?(n=Object.assign(Object.assign({},n),o),i=t.pop()):i=o;const r=t;return{observables:r,projector:i,config:n}}(e);let s;return s=0===t.length?this.stateSubject$.pipe(r.debounce?a():e=>e,(0,o.map)(i)):(0,n.combineLatest)(t).pipe(r.debounce?a():e=>e,(0,o.map)(e=>i(...e))),s.pipe((0,o.distinctUntilChanged)(),(0,o.shareReplay)({refCount:!0,bufferSize:1}),(0,o.takeUntil)(this.destroy$))}effect(e){const t=new n.Subject;return e(t).pipe((0,o.takeUntil)(this.destroy$)).subscribe(),e=>((0,n.isObservable)(e)?e:(0,n.of)(e)).pipe((0,o.takeUntil)(this.destroy$)).subscribe(e=>{t.next(e)})}}function d(e,t,i){return r=>r.pipe((0,o.tap)({next:e,error:t,complete:i}),(0,o.catchError)(()=>n.EMPTY))}l.\u0275fac=function(e){return new(e||l)(r["\u0275\u0275inject"](s,8))},l.\u0275prov=r["\u0275\u0275defineInjectable"]({token:l,factory:l.\u0275fac}),l.ctorParameters=()=>[{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[s]}]}]},"./node_modules/angular-split/fesm2015/angular-split.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{AngularSplitModule:()=>C,SplitAreaDirective:()=>x,SplitComponent:()=>b});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("rxjs"),a=i("./node_modules/rxjs/_esm2015/operators/index.js");const s=["gutterEls"];function l(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2,3),n["\u0275\u0275listener"]("mousedown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().startDragging(t,2*i+1,i+1)})("touchstart",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().startDragging(t,2*i+1,i+1)})("mouseup",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().clickGutter(t,i+1)})("touchend",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().clickGutter(t,i+1)}),n["\u0275\u0275element"](2,"div",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().index,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("flex-basis",t.gutterSize,"px")("order",2*e+1)}}function d(e,t){if(1&e&&n["\u0275\u0275template"](0,l,3,4,"div",1),2&e){const e=t.last;n["\u0275\u0275property"]("ngIf",!1===e)}}function c(e){return void 0!==e.changedTouches&&e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0!==e.clientX&&void 0!==e.clientY?{x:e.clientX,y:e.clientY}:null}function p(e,t){const i=e.nativeElement.getBoundingClientRect();return"horizontal"===t?i.width:i.height}function u(e){return"boolean"==typeof e?e:"false"!==e}function m(e,t){return null==e?t:(e=Number(e),!isNaN(e)&&e>=0?e:t)}function f(e,t){if("percent"===e){const e=t.reduce((e,t)=>null!==t?e+t:e,0);return t.every(e=>null!==e)&&e>99.9&&e<100.1}if("pixel"===e)return 1===t.filter(e=>null===e).length}function h(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function g(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function v(e,t,i,n){return t.reduce((t,i)=>{const o=function(e,t,i,n){if(0===i)return{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:t.sizePercentAtStart,pixelRemain:0};if(0===t.sizePixelAtStart&&i<0)return{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:i};if("percent"===e)return function(e,t,i){const n=e.sizePixelAtStart+t,o=n/i*100;if(t>0){if(null!==e.area.maxSize&&o>e.area.maxSize){const n=e.area.maxSize/100*i;return{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+t-n}}return{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:o>100?100:o,pixelRemain:0}}if(t<0){if(null!==e.area.minSize&&o<e.area.minSize){const n=e.area.minSize/100*i;return{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+t-n}}return o<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:o,pixelRemain:0}}}(t,i,n);if("pixel"===e)return function(e,t,i){const n=e.sizePixelAtStart+t;if(t>0)return null!==e.area.maxSize&&n>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0};if(t<0)return null!==e.area.minSize&&n<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+t-n,percentAfterAbsorption:-1,pixelRemain:n-e.area.minSize}:n<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}}(t,i)}(e,i,t.remain,n);return t.list.push(o),t.remain=o.pixelRemain,t},{remain:i,list:[]})}function y(e,t){"percent"===e?t.areaSnapshot.area.size=t.percentAfterAbsorption:"pixel"===e&&null!==t.areaSnapshot.area.size&&(t.areaSnapshot.area.size=t.areaSnapshot.sizePixelAtStart+t.pixelAbsorb)}class b{constructor(e,t,i,o){this.ngZone=e,this.elRef=t,this.cdRef=i,this.renderer=o,this._direction="horizontal",this._unit="percent",this._gutterSize=11,this._gutterStep=1,this._restrictMove=!1,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this._gutterDblClickDuration=0,this.dragStart=new n.EventEmitter(!1),this.dragEnd=new n.EventEmitter(!1),this.gutterClick=new n.EventEmitter(!1),this.gutterDblClick=new n.EventEmitter(!1),this.dragProgressSubject=new r.Subject,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hidedAreas=[],this._clickTimeout=null,this.direction=this._direction}set direction(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(e){this._gutterSize=m(e,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(e){this._gutterStep=m(e,1)}get gutterStep(){return this._gutterStep}set restrictMove(e){this._restrictMove=u(e)}get restrictMove(){return this._restrictMove}set useTransition(e){this._useTransition=u(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(e){this._disabled=u(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(e){this._gutterDblClickDuration=m(e,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new r.Observable(e=>this.transitionEndSubscriber=e).pipe((0,a.debounceTime)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(e){const t={component:e,order:0,size:0,minSize:null,maxSize:null};!0===e.visible?(this.displayedAreas.push(t),this.build(!0,!0)):this.hidedAreas.push(t)}removeArea(e){if(this.displayedAreas.some(t=>t.component===e)){const t=this.displayedAreas.find(t=>t.component===e);this.displayedAreas.splice(this.displayedAreas.indexOf(t),1),this.build(!0,!0)}else if(this.hidedAreas.some(t=>t.component===e)){const t=this.hidedAreas.find(t=>t.component===e);this.hidedAreas.splice(this.hidedAreas.indexOf(t),1)}}updateArea(e,t,i){!0===e.visible&&this.build(t,i)}showArea(e){const t=this.hidedAreas.find(t=>t.component===e);if(void 0===t)return;const i=this.hidedAreas.splice(this.hidedAreas.indexOf(t),1);this.displayedAreas.push(...i),this.build(!0,!0)}hideArea(e){const t=this.displayedAreas.find(t=>t.component===e);if(void 0===t)return;const i=this.displayedAreas.splice(this.displayedAreas.indexOf(t),1);i.forEach(e=>{e.order=0,e.size=0}),this.hidedAreas.push(...i),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(e=>null===e.size?"*":e.size)}setVisibleAreaSizes(e){if(e.length!==this.displayedAreas.length)return!1;const t=e.map(e=>m(e,null));return!1!==f(this.unit,t)&&(this.displayedAreas.forEach((e,i)=>e.component._size=t[i]),this.build(!1,!0),!0)}build(e,t){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(e=>null!==e.component.order)&&this.displayedAreas.sort((e,t)=>e.component.order-t.component.order),this.displayedAreas.forEach((e,t)=>{e.order=2*t,e.component.setStyleOrder(e.order)})),!0===t){const e=f(this.unit,this.displayedAreas.map(e=>e.component.size));switch(this.unit){case"percent":{const t=100/this.displayedAreas.length;this.displayedAreas.forEach(i=>{i.size=e?i.component.size:t,i.minSize=h(i),i.maxSize=g(i)});break}case"pixel":if(e)this.displayedAreas.forEach(e=>{e.size=e.component.size,e.minSize=h(e),e.maxSize=g(e)});else{const e=this.displayedAreas.filter(e=>null===e.component.size);if(0===e.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((e,t)=>{e.size=0===t?null:e.component.size,e.minSize=0===t?null:h(e),e.maxSize=0===t?null:g(e)});else if(e.length>1){let e=!1;this.displayedAreas.forEach(t=>{null===t.component.size?!1===e?(t.size=null,t.minSize=null,t.maxSize=null,e=!0):(t.size=100,t.minSize=null,t.maxSize=null):(t.size=t.component.size,t.minSize=h(t),t.maxSize=g(t))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(t=>{t.component.setStyleFlex(0,0,`calc( ${t.size}% - ${t.size/100*e}px )`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(e=>{null===e.size?1===this.displayedAreas.length?e.component.setStyleFlex(1,1,"100%",!1,!1):e.component.setStyleFlex(1,1,"auto",!1,!1):1===this.displayedAreas.length?e.component.setStyleFlex(0,0,"100%",!1,!1):e.component.setStyleFlex(0,0,`${e.size}px`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}clickGutter(e,t){const i=c(e);this.startPoint&&this.startPoint.x===i.x&&this.startPoint.y===i.y&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",t),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",t),this.stopDragging()},this.gutterDblClickDuration))}startDragging(e,t,i){e.preventDefault(),e.stopPropagation(),this.startPoint=c(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.snapshot={gutterNum:i,lastSteppedOffset:0,allAreasSizePixel:p(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(e=>{const i={area:e,sizePixelAtStart:p(e.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?e.size:-1};e.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[i]:this.snapshot.areasBeforeGutter.unshift(i):e.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[i]):this.snapshot.areasAfterGutter.push(i))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((e,t)=>e+t.sizePercentAtStart,0),0!==this.snapshot.areasBeforeGutter.length&&0!==this.snapshot.areasAfterGutter.length&&(this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.dragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.dragEvent.bind(this)))}),this.displayedAreas.forEach(e=>e.component.lockEvents()),this.isDragging=!0,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)))}dragEvent(e){if(e.preventDefault(),e.stopPropagation(),null!==this._clickTimeout&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1===this.isDragging)return;if(this.endPoint=c(e),null===this.endPoint)return;let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(t=-t);const i=Math.round(t/this.gutterStep)*this.gutterStep;if(i===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=i;let n=v(this.unit,this.snapshot.areasBeforeGutter,-i,this.snapshot.allAreasSizePixel),o=v(this.unit,this.snapshot.areasAfterGutter,i,this.snapshot.allAreasSizePixel);if(0!==n.remain&&0!==o.remain?Math.abs(n.remain)===Math.abs(o.remain)||(Math.abs(n.remain)>Math.abs(o.remain)?o=v(this.unit,this.snapshot.areasAfterGutter,i+n.remain,this.snapshot.allAreasSizePixel):n=v(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)):0!==n.remain?o=v(this.unit,this.snapshot.areasAfterGutter,i+n.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(n=v(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const e=[...n.list,...o.list],t=e.find(e=>0!==e.percentAfterAbsorption&&e.percentAfterAbsorption!==e.areaSnapshot.area.minSize&&e.percentAfterAbsorption!==e.areaSnapshot.area.maxSize);t&&(t.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-e.filter(e=>e!==t).reduce((e,t)=>e+t.percentAfterAbsorption,0))}n.list.forEach(e=>y(this.unit,e)),o.list.forEach(e=>y(this.unit,e)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(e){if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(e=>e.component.unlockEvents());this.dragListeners.length>0;){const e=this.dragListeners.pop();e&&e()}this.isDragging=!1,!this.endPoint||this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y||this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(e,t){const i=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:t,sizes:i}):"end"===e?this.dragEnd.emit({gutterNum:t,sizes:i}):"click"===e?this.gutterClick.emit({gutterNum:t,sizes:i}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:t,sizes:i}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(i)):"progress"===e&&this.dragProgressSubject.next({gutterNum:t,sizes:i})}ngOnDestroy(){this.stopDragging()}}b.\u0275fac=function(e){return new(e||b)(n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.Renderer2))},b.\u0275cmp=n["\u0275\u0275defineComponent"]({type:b,selectors:[["as-split"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](s,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.gutterEls=e)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick",transitionEnd:"transitionEnd"},exportAs:["asSplit"],ngContentSelectors:["*"],decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","as-split-gutter",3,"flex-basis","order","mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"as-split-gutter",3,"mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(e,t){1&e&&(n["\u0275\u0275projectionDef"](),n["\u0275\u0275projection"](0),n["\u0275\u0275template"](1,d,1,1,"ng-template",0)),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.displayedAreas))},directives:[o.NgForOf,o.NgIf],styles:['[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("")}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area, .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%]{transition:flex-basis .3s}'],changeDetection:0}),b.ctorParameters=()=>[{type:n.NgZone},{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.Renderer2}],b.propDecorators={direction:[{type:n.Input}],unit:[{type:n.Input}],gutterSize:[{type:n.Input}],gutterStep:[{type:n.Input}],restrictMove:[{type:n.Input}],useTransition:[{type:n.Input}],disabled:[{type:n.Input}],dir:[{type:n.Input}],gutterDblClickDuration:[{type:n.Input}],dragStart:[{type:n.Output}],dragEnd:[{type:n.Output}],gutterClick:[{type:n.Output}],gutterDblClick:[{type:n.Output}],transitionEnd:[{type:n.Output}],gutterEls:[{type:n.ViewChildren,args:["gutterEls"]}]};class x{constructor(e,t,i,n){this.ngZone=e,this.elRef=t,this.renderer=i,this.split=n,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(e){this._order=m(e,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(e){this._size=m(e,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(e){this._minSize=m(e,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(e){this._maxSize=m(e,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(e){this._lockSize=u(e),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(e){this._visible=u(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",e=>{"flex-basis"===e.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}setStyleFlex(e,t,i,n,o){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",i),!0===n?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===o?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",e=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",e=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const e=this.lockListeners.pop();e&&e()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}}x.\u0275fac=function(e){return new(e||x)(n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](b))},x.\u0275dir=n["\u0275\u0275defineDirective"]({type:x,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),x.ctorParameters=()=>[{type:n.NgZone},{type:n.ElementRef},{type:n.Renderer2},{type:b}],x.propDecorators={order:[{type:n.Input}],size:[{type:n.Input}],minSize:[{type:n.Input}],maxSize:[{type:n.Input}],lockSize:[{type:n.Input}],visible:[{type:n.Input}]};class C{static forRoot(){return{ngModule:C,providers:[]}}static forChild(){return{ngModule:C,providers:[]}}}C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=n["\u0275\u0275defineNgModule"]({type:C}),C.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](C,{declarations:function(){return[b,x]},imports:function(){return[o.CommonModule]},exports:function(){return[b,x]}})},"./node_modules/backbone/backbone.js":(e,t,i)=>{var n,o,r;r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global,n=[i("./node_modules/underscore/modules/index-all.js"),i("./node_modules/jquery/dist/jquery.js"),t],o=(function(e,t,i){r.Backbone=function(e,t,i,n){var o=e.Backbone,r=Array.prototype.slice;t.VERSION="1.4.0",t.$=n,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a,s=t.Events={},l=/\s+/,d=function(e,t,n,o,r){var a,s=0;if(n&&"object"==typeof n){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(a=i.keys(n);s<a.length;s++)t=d(e,t,a[s],n[a[s]],r)}else if(n&&l.test(n))for(a=n.split(l);s<a.length;s++)t=e(t,a[s],o,r);else t=e(t,n,o,r);return t};s.on=function(e,t,i){return this._events=d(c,this._events||{},e,t,{context:i,ctx:this,listening:a}),a&&((this._listeners||(this._listeners={}))[a.id]=a,a.interop=!1),this},s.listenTo=function(e,t,n){if(!e)return this;var o=e._listenId||(e._listenId=i.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),s=a=r[o];s||(this._listenId||(this._listenId=i.uniqueId("l")),s=a=r[o]=new g(this,e));var l=p(e,t,n,this);if(a=void 0,l)throw l;return s.interop&&s.on(t,n),this};var c=function(e,t,i,n){if(i){var o=e[t]||(e[t]=[]),r=n.context,a=n.ctx,s=n.listening;s&&s.count++,o.push({callback:i,context:r,ctx:r||a,listening:s})}return e},p=function(e,t,i,n){try{e.on(t,i,n)}catch(o){return o}};s.off=function(e,t,i){return this._events?(this._events=d(u,this._events,e,t,{context:i,listeners:this._listeners}),this):this},s.stopListening=function(e,t,n){var o=this._listeningTo;if(!o)return this;for(var r=e?[e._listenId]:i.keys(o),a=0;a<r.length;a++){var s=o[r[a]];if(!s)break;s.obj.off(t,n,this),s.interop&&s.off(t,n)}return i.isEmpty(o)&&(this._listeningTo=void 0),this};var u=function(e,t,n,o){if(e){var r,a=o.context,s=o.listeners,l=0;if(t||a||n){for(r=t?[t]:i.keys(e);l<r.length;l++){var d=e[t=r[l]];if(!d)break;for(var c=[],p=0;p<d.length;p++){var u=d[p];if(n&&n!==u.callback&&n!==u.callback._callback||a&&a!==u.context)c.push(u);else{var m=u.listening;m&&m.off(t,n)}}c.length?e[t]=c:delete e[t]}return e}for(r=i.keys(s);l<r.length;l++)s[r[l]].cleanup()}};s.once=function(e,t,i){var n=d(m,{},e,t,this.off.bind(this));return"string"==typeof e&&null==i&&(t=void 0),this.on(n,t,i)},s.listenToOnce=function(e,t,i){var n=d(m,{},t,i,this.stopListening.bind(this,e));return this.listenTo(e,n)};var m=function(e,t,n,o){if(n){var r=e[t]=i.once(function(){o(t,r),n.apply(this,arguments)});r._callback=n}return e};s.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),i=Array(t),n=0;n<t;n++)i[n]=arguments[n+1];return d(f,this._events,e,void 0,i),this};var f=function(e,t,i,n){if(e){var o=e[t],r=e.all;o&&r&&(r=r.slice()),o&&h(o,n),r&&h(r,[t].concat(n))}return e},h=function(e,t){var i,n=-1,o=e.length,r=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,a,s);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},g=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};g.prototype.on=s.on,g.prototype.off=function(e,t){var i;this.interop?(this._events=d(u,this._events,e,t,{context:void 0,listeners:void 0}),i=!this._events):(this.count--,i=0===this.count),i&&this.cleanup()},g.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,i.extend(t,s);var v=t.Model=function(e,t){var n=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var o=i.result(this,"defaults");n=i.defaults(i.extend({},o,n),o),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!i.iteratee(e,this)(this.attributes)},set:function(e,t,n){if(null==e)return this;var o;if("object"==typeof e?(o=e,n=t):(o={})[e]=t,n||(n={}),!this._validate(o,n))return!1;var r=n.unset,a=n.silent,s=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var d=this.attributes,c=this.changed,p=this._previousAttributes;for(var u in o)t=o[u],i.isEqual(d[u],t)||s.push(u),i.isEqual(p[u],t)?delete c[u]:c[u]=t,r?delete d[u]:d[u]=t;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=n);for(var m=0;m<s.length;m++)this.trigger("change:"+s[m],this,d[s[m]],n)}if(l)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t,n=this._changing?this._previousAttributes:this.attributes,o={};for(var r in e){var a=e[r];i.isEqual(n[r],a)||(o[r]=a,t=!0)}return!!t&&o},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=i.extend({parse:!0},e);var t=this,n=e.success;return e.success=function(i){var o=e.parse?t.parse(i,e):i;if(!t.set(o,e))return!1;n&&n.call(e.context,t,i,e),t.trigger("sync",t,i,e)},H(this,e),this.sync("read",this,e)},save:function(e,t,n){var o;null==e||"object"==typeof e?(o=e,n=t):(o={})[e]=t;var r=(n=i.extend({validate:!0,parse:!0},n)).wait;if(o&&!r){if(!this.set(o,n))return!1}else if(!this._validate(o,n))return!1;var a=this,s=n.success,l=this.attributes;n.success=function(e){a.attributes=l;var t=n.parse?a.parse(e,n):e;if(r&&(t=i.extend({},o,t)),t&&!a.set(t,n))return!1;s&&s.call(n.context,a,e,n),a.trigger("sync",a,e,n)},H(this,n),o&&r&&(this.attributes=i.extend({},l,o));var d=this.isNew()?"create":n.patch?"patch":"update";"patch"!==d||n.attrs||(n.attrs=o);var c=this.sync(d,this,n);return this.attributes=l,c},destroy:function(e){e=e?i.clone(e):{};var t=this,n=e.success,o=e.wait,r=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(i){o&&r(),n&&n.call(e.context,t,i,e),t.isNew()||t.trigger("sync",t,i,e)};var a=!1;return this.isNew()?i.defer(e.success):(H(this,e),a=this.sync("delete",this,e)),o||r(),a},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||W();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var y=t.Collection=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},C=function(e,t,i){i=Math.min(Math.max(i,0),e.length);var n,o=Array(e.length-i),r=t.length;for(n=0;n<o.length;n++)o[n]=e[n+i];for(n=0;n<r;n++)e[n+i]=t[n];for(n=0;n<o.length;n++)e[n+r+i]=o[n]};i.extend(y.prototype,s,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,x))},remove:function(e,t){t=i.extend({},t);var n=!i.isArray(e);e=n?[e]:e.slice();var o=this._removeModels(e,t);return!t.silent&&o.length&&(t.changes={added:[],merged:[],removed:o},this.trigger("update",this,t)),n?o[0]:o},set:function(e,t){if(null!=e){(t=i.extend({},b,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var n=!i.isArray(e);e=n?[e]:e.slice();var o=t.at;null!=o&&(o=+o),o>this.length&&(o=this.length),o<0&&(o+=this.length+1);var r,a,s=[],l=[],d=[],c=[],p={},u=t.add,m=t.merge,f=t.remove,h=!1,g=this.comparator&&null==o&&!1!==t.sort,v=i.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){r=e[a];var y=this.get(r);if(y){if(m&&r!==y){var x=this._isModel(r)?r.attributes:r;t.parse&&(x=y.parse(x,t)),y.set(x,t),d.push(y),g&&!h&&(h=y.hasChanged(v))}p[y.cid]||(p[y.cid]=!0,s.push(y)),e[a]=y}else u&&(r=e[a]=this._prepareModel(r,t))&&(l.push(r),this._addReference(r,t),p[r.cid]=!0,s.push(r))}if(f){for(a=0;a<this.length;a++)p[(r=this.models[a]).cid]||c.push(r);c.length&&this._removeModels(c,t)}var S=!1,D=!g&&u&&f;if(s.length&&D?(S=this.length!==s.length||i.some(this.models,function(e,t){return e!==s[t]}),this.models.length=0,C(this.models,s,0),this.length=this.models.length):l.length&&(g&&(h=!0),C(this.models,l,null==o?this.length:o),this.length=this.models.length),h&&this.sort({silent:!0}),!t.silent){for(a=0;a<l.length;a++)null!=o&&(t.index=o+a),(r=l[a]).trigger("add",r,this,t);(h||S)&&this.trigger("sort",this,t),(l.length||c.length||d.length)&&(t.changes={added:l,removed:c,merged:d},this.trigger("update",this,t))}return n?e[0]:e}},reset:function(e,t){t=t?i.clone(t):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return r.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var n=t.length;return i.isFunction(t)&&(t=t.bind(this)),1===n||i.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=i.extend({parse:!0},e)).success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t.call(e.context,n,i,e),n.trigger("sync",n,i,e)},H(this,e),this.sync("read",this,e)},create:function(e,t){var n=(t=t?i.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;n||this.add(e,t);var o=this,r=t.success;return t.success=function(e,t,i){n&&o.add(e,i),r&&r.call(i.context,e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},values:function(){return new D(this,I)},keys:function(){return new D(this,R)},entries:function(){return new D(this,w)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?i.clone(t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeModels:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.get(e[n]);if(o){var r=this.indexOf(o);this.models.splice(r,1),this.length--,delete this._byId[o.cid];var a=this.modelId(o.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=r,o.trigger("remove",o,this,t)),i.push(o),this._removeReference(o,t)}}return i},_isModel:function(e){return e instanceof v},_addReference:function(e,t){this._byId[e.cid]=e;var i=this.modelId(e.attributes);null!=i&&(this._byId[i]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var i=this.modelId(e.attributes);null!=i&&delete this._byId[i],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){if(t){if(("add"===e||"remove"===e)&&i!==this)return;if("destroy"===e&&this.remove(t,n),"change"===e){var o=this.modelId(t.previousAttributes()),r=this.modelId(t.attributes);o!==r&&(null!=o&&delete this._byId[o],null!=r&&(this._byId[r]=t))}}this.trigger.apply(this,arguments)}});var S="function"==typeof Symbol&&Symbol.iterator;S&&(y.prototype[S]=y.prototype.values);var D=function(e,t){this._collection=e,this._kind=t,this._index=0},I=1,R=2,w=3;S&&(D.prototype[S]=function(){return this}),D.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===I)e=t;else{var i=this._collection.modelId(t.attributes);e=this._kind===R?i:[i,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var E=t.View=function(e){this.cid=i.uniqueId("view"),this.preinitialize.apply(this,arguments),i.extend(this,i.pick(e,M)),this._ensureElement(),this.initialize.apply(this,arguments)},F=/^(\S+)\s*(.*)$/,M=["model","collection","el","id","attributes","className","tagName","events"];i.extend(E.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=i.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(i.isFunction(n)||(n=this[n]),n){var o=t.match(F);this.delegate(o[1],o[2],n.bind(this))}}return this},delegate:function(e,t,i){return this.$el.on(e+".delegateEvents"+this.cid,t,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,i){return this.$el.off(e+".delegateEvents"+this.cid,t,i),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});var T=function(e,t,i,n){switch(t){case 1:return function(){return e[i](this[n])};case 2:return function(t){return e[i](this[n],t)};case 3:return function(t,o){return e[i](this[n],N(t,this),o)};case 4:return function(t,o,r){return e[i](this[n],N(t,this),o,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[n]),e[i].apply(e,t)}}},O=function(e,t,n,o){i.each(n,function(i,n){t[n]&&(e.prototype[n]=T(t,i,n,o))})},N=function(e,t){return i.isFunction(e)?e:i.isObject(e)&&!t._isModel(e)?A(e):i.isString(e)?function(t){return t.get(e)}:e},A=function(e){var t=i.matches(e);return function(e){return t(e.attributes)}},P={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},j={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};i.each([[y,P,"models"],[v,j,"attributes"]],function(e){var t=e[0],n=e[1],o=e[2];t.mixin=function(e){var n=i.reduce(i.functions(e),function(e,t){return e[t]=0,e},{});O(t,e,n,o)},O(t,i,n,o)}),t.sync=function(e,n,o){var r=_[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:r,dataType:"json"};if(o.url||(a.url=i.result(n,"url")||W()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",o.emulateJSON&&(a.data._method=r);var s=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),s)return s.apply(this,arguments)}}"GET"===a.type||o.emulateJSON||(a.processData=!1);var l=o.error;o.error=function(e,t,i){o.textStatus=t,o.errorThrown=i,l&&l.call(o.context,e,t,i)};var d=o.xhr=t.ajax(i.extend(a,o));return n.trigger("request",n,d,o),d};var _={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var V=t.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,B=/(\(\?)?:\w+/g,$=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(V.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return t.history.route(e,function(i){var a=r._extractParameters(e,i);!1!==r.execute(o,a,n)&&(r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),t.history.trigger("route",r,n,a))}),this},execute:function(e,t,i){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(L,"\\$&").replace(k,"(?:$1)?").replace(B,function(e,t){return t?e:"([^/?]+)"}).replace($,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var G=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,q=/#.*$/;G.started=!1,i.extend(G.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(z,"")},start:function(e){if(G.started)throw new Error("Backbone.history has already been started");if(G.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(U,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,o=n.insertBefore(this.iframe,n.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var r=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),G.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),i.some(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0}))},navigate:function(e,t){if(!G.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var i=this.root;""!==e&&"?"!==e.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+e;e=e.replace(q,"");var o=this.decodeFragment(e);if(this.fragment!==o){if(this.fragment=o,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;t.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new G;var X=function(e,t){var n,o=this;return n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t),n.prototype=i.create(o.prototype,e),n.prototype.constructor=n,n.__super__=o.prototype,n};v.extend=y.extend=V.extend=E.extend=G.extend=X;var W=function(){throw new Error('A "url" property or function must be specified')},H=function(e,t){var i=t.error;t.error=function(n){i&&i.call(t.context,e,n,t),e.trigger("error",e,n,t)}};return t}(r,i,e,t)}).apply(t,n),void 0===o||(e.exports=o)},"./node_modules/css-element-queries/index.js":(e,t,i)=>{e.exports={ResizeSensor:i("./node_modules/css-element-queries/src/ResizeSensor.js"),ElementQueries:i("./node_modules/css-element-queries/src/ElementQueries.js")}},"./node_modules/css-element-queries/src/ElementQueries.js":function(e,t,i){"use strict";var n,o,r;"undefined"!=typeof window&&window,o=[i("./node_modules/css-element-queries/src/ResizeSensor.js")],void 0===(r="function"==typeof(n=function(e){var t=function(){var t,i={},n=[];function o(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function r(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function a(e,t){var i=t.split(/\d/),n=i[i.length-1];switch(t=parseFloat(t),n){case"px":default:return t;case"em":return t*o(e);case"rem":return t*o();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var r=document.documentElement.clientWidth/100,a=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===n?"min":"max"])(r,a)}}function s(e,t){var n,o,s,l,d,c,p,u;this.element=e;var m=["min-width","min-height","max-width","max-height"];this.call=function(){for(n in s=r(this.element),c={},i[t])i[t].hasOwnProperty(n)&&(o=i[t][n],l=a(this.element,o.value),d="width"===o.property?s.width:s.height,u=o.mode+"-"+o.property,p="","min"===o.mode&&d>=l&&(p+=o.value),"max"===o.mode&&d<=l&&(p+=o.value),c[u]||(c[u]=""),p&&-1===(" "+c[u]+" ").indexOf(" "+p+" ")&&(c[u]+=" "+p));for(var e in m)m.hasOwnProperty(e)&&(c[m[e]]?this.element.setAttribute(m[e],c[m[e]].substr(1)):this.element.removeAttribute(m[e]))}}function l(t,i){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,i)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()}))}function d(e,o,r,a){if(void 0===i[e]){i[e]=[];var s=n.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",n.push(e)}i[e].push({mode:o,property:r,value:a})}function c(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function p(e){var t=c(e);for(var n in i)if(i.hasOwnProperty(n))for(var o=t(n,e),r=0,a=o.length;r<a;r++)l(o[r],n)}function u(t){var i=[],n=[],o=[],r=0,a=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){i.push(t.children[l]);var d=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),c=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");o.push(c);var p={minWidth:d};n.push(p),d?t.children[l].style.display="none":(r=i.length-1,t.children[l].style.display="block")}function u(){var e,l=!1;for(e in i)i.hasOwnProperty(e)&&n[e].minWidth&&t.offsetWidth>n[e].minWidth&&(l=e);if(l||(l=r),a!==l)if(s[l])i[a].style.display="none",i[l].style.display="block",a=l;else{var d=new Image;d.onload=function(){i[l].src=o[l],i[a].style.display="none",i[l].style.display="block",s[l]=!0,a=l},d.src=o[l]}else i[l].src=o[l]}a=r,t.resizeSensorInstance=new e(t,u),u()}function m(){for(var e=c()("[data-responsive-image],[responsive-image]"),t=0,i=e.length;t<i;t++)u(e[t])}var f=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,h=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function g(e){var t,i,n,o;for(e=e.replace(/'/g,'"');null!==(t=f.exec(e));)for(i=t[1]+t[3],n=t[2];null!==(o=h.exec(n));)d(i,o[1],o[2],o[3])}function v(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||g(e);else for(var i=0,n=e.length;i<n;i++)1===e[i].type?-1!==(t=e[i].selectorText||e[i].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?g(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||g(t):4===e[i].type?v(e[i].cssRules||e[i].rules):3===e[i].type&&e[i].styleSheet.hasOwnProperty("cssRules")&&v(e[i].styleSheet.cssRules)}var y=!1;this.init=function(){var i="animationstart";void 0!==document.documentElement.style.webkitAnimationName?i="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?i="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(i="oanimationstart"),document.body.addEventListener(i,function(t){var i=t.target,o=i&&window.getComputedStyle(i,null),r=o&&o.getPropertyValue("animation-name");if(r&&-1!==r.indexOf("element-queries")){i.elementQueriesSensor=new e(i,function(){i.elementQueriesSetupInformation&&i.elementQueriesSetupInformation.call()});var a=window.getComputedStyle(i.resizeSensor,null).getPropertyValue("min-width");a=parseInt(a.replace("px","")),l(t.target,n[a])}}),y||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),y=!0);for(var o=0,r=document.styleSheets.length;o<r;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),v(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(a){}m()},this.findElementQueriesElements=function(e){p(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};var i=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){i(t.init)},t})?n.apply(t,o):n)||(e.exports=r)},"./node_modules/css-element-queries/src/ResizeSensor.js":function(e,t,i){"use strict";var n,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(n=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function n(e,t){var i=Object.prototype.toString.call(e),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,r=e.length;if(n)for(;o<r;o++)t(e[o]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function r(e,t){Object.keys(t).forEach(function(i){e.style[i]=t[i]})}var a=function(e,s){var l=0;function d(){var e,t,i=[];this.add=function(e){i.push(e)},this.call=function(n){for(e=0,t=i.length;e<t;e++)i[e].call(this,n)},this.remove=function(n){var o=[];for(e=0,t=i.length;e<t;e++)i[e]!==n&&o.push(i[e]);i=o},this.length=function(){return i.length}}function c(e,i){if(e)if(e.resizedAttached)e.resizedAttached.add(i);else{e.resizedAttached=new d,e.resizedAttached.add(i),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var n={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},a={position:"absolute",left:"0px",top:"0px",transition:"0s"};r(e.resizeSensor,n);var s=document.createElement("div");s.className="resize-sensor-expand",r(s,n);var c=document.createElement("div");r(c,a),s.appendChild(c);var p=document.createElement("div");p.className="resize-sensor-shrink",r(p,n);var u=document.createElement("div");r(u,a),r(u,{width:"200%",height:"200%"}),p.appendChild(u),e.resizeSensor.appendChild(s),e.resizeSensor.appendChild(p),e.appendChild(e.resizeSensor);var m=window.getComputedStyle(e),f=m?m.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&"sticky"!==f&&(e.style.position="relative");var h=!1,g=0,v=o(e),y=0,b=0,x=!0;l=0;var C=function(){var t=e.offsetWidth,i=e.offsetHeight;c.style.width=t+10+"px",c.style.height=i+10+"px",s.scrollLeft=t+10,s.scrollTop=i+10,p.scrollLeft=t+10,p.scrollTop=i+10},S=function(){if(x){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t(function(){l=0,S()})));x=!1}C()};e.resizeSensor.resetSensor=S;var D=function(){g=0,h&&(y=v.width,b=v.height,e.resizedAttached&&e.resizedAttached.call(v))},I=function(){v=o(e),(h=v.width!==y||v.height!==b)&&!g&&(g=t(D)),S()},R=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};R(s,"scroll",I),R(p,"scroll",I),l=t(function(){l=0,S()})}}n(e,function(e){c(e,s)}),this.detach=function(t){l||(i(l),l=0),a.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(a.reset=function(e){n(e,function(e){e.resizeSensor.resetSensor()})},a.detach=function(e,t){n(e,function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},"undefined"!=typeof MutationObserver){var s=new MutationObserver(function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=e[t].addedNodes,n=0;n<i.length;n++)i[n].resizeSensor&&a.reset(i[n])});document.addEventListener("DOMContentLoaded",function(e){s.observe(document.body,{childList:!0,subtree:!0})})}return a})?n.call(t,i,t,e):n)||(e.exports=o)},"./node_modules/jquery/dist/jquery.js":function(e,t){var i,n;!function(t,i){"use strict";"object"==typeof e.exports?e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}:i(t)}("undefined"!=typeof window?window:this,function(o,r){"use strict";var a=[],s=Object.getPrototypeOf,l=a.slice,d=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},c=a.push,p=a.indexOf,u={},m=u.toString,f=u.hasOwnProperty,h=f.toString,g=h.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},b=function(e){return null!=e&&e===e.window},x=o.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function S(e,t,i){var n,o,r=(i=i||x).createElement("script");if(r.text=e,t)for(n in C)(o=t[n]||t.getAttribute&&t.getAttribute(n))&&r.setAttribute(n,o);i.head.appendChild(r).parentNode.removeChild(r)}function D(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?u[m.call(e)]||"object":typeof e}var I="3.6.0",R=function(e,t){return new R.fn.init(e,t)};function w(e){var t=!!e&&"length"in e&&e.length,i=D(e);return!y(e)&&!b(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}R.fn=R.prototype={jquery:I,constructor:R,length:0,toArray:function(){return l.call(this)},get:function(e){return null==e?l.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=R.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return R.each(this,e)},map:function(e){return this.pushStack(R.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(R.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(R.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},R.extend=R.fn.extend=function(){var e,t,i,n,o,r,a=arguments[0]||{},s=1,l=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[s]||{},s++),"object"==typeof a||y(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=e[t],"__proto__"!==t&&a!==n&&(d&&n&&(R.isPlainObject(n)||(o=Array.isArray(n)))?(i=a[t],r=o&&!Array.isArray(i)?[]:o||R.isPlainObject(i)?i:{},o=!1,a[t]=R.extend(d,r,n)):void 0!==n&&(a[t]=n));return a},R.extend({expando:"jQuery"+(I+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==m.call(e))&&(!(t=s(e))||"function"==typeof(i=f.call(t,"constructor")&&t.constructor)&&h.call(i)===g)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){S(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,n=0;if(w(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){var i=t||[];return null!=e&&(w(Object(e))?R.merge(i,"string"==typeof e?[e]:e):c.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:p.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,o=e.length;n<i;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,i){for(var n=[],o=0,r=e.length,a=!i;o<r;o++)!t(e[o],o)!==a&&n.push(e[o]);return n},map:function(e,t,i){var n,o,r=0,a=[];if(w(e))for(n=e.length;r<n;r++)null!=(o=t(e[r],r,i))&&a.push(o);else for(r in e)null!=(o=t(e[r],r,i))&&a.push(o);return d(a)},guid:1,support:v}),"function"==typeof Symbol&&(R.fn[Symbol.iterator]=a[Symbol.iterator]),R.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var E=function(e){var t,i,n,o,r,a,s,l,d,c,p,u,m,f,h,g,v,y,b,x="sizzle"+1*new Date,C=e.document,S=0,D=0,I=le(),R=le(),w=le(),E=le(),F=function(e,t){return e===t&&(p=!0),0},M={}.hasOwnProperty,T=[],O=T.pop,N=T.push,A=T.push,P=T.slice,j=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",V="[\\x20\\t\\r\\n\\f]",k="(?:\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+V+"*("+k+")(?:"+V+"*([*^$|!~]?=)"+V+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+V+"*\\]",$=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",L=new RegExp(V+"+","g"),G=new RegExp("^"+V+"+|((?:^|[^\\\\])(?:\\\\.)*)"+V+"+$","g"),z=new RegExp("^"+V+"*,"+V+"*"),U=new RegExp("^"+V+"*([>+~]|"+V+")"+V+"*"),q=new RegExp(V+"|>"),X=new RegExp($),W=new RegExp("^"+k+"$"),H={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+V+"*(even|odd|(([+-]|)(\\d*)n|)"+V+"*(?:([+-]|)"+V+"*(\\d+)|))"+V+"*\\)|)","i"),bool:new RegExp("^(?:"+_+")$","i"),needsContext:new RegExp("^"+V+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+V+"*((?:-\\d)?\\d*)"+V+"*\\)|)(?=[^-]|$)","i")},Q=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+V+"?|\\\\([^\\r\\n\\f])","g"),ie=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},ne=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){u()},ae=xe(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{A.apply(T=P.call(C.childNodes),C.childNodes),T[C.childNodes.length].nodeType}catch(Re){A={apply:T.length?function(e,t){N.apply(e,P.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function se(e,t,n,o){var r,s,d,c,p,f,v,y=t&&t.ownerDocument,C=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==C&&9!==C&&11!==C)return n;if(!o&&(u(t),t=t||m,h)){if(11!==C&&(p=Z.exec(e)))if(r=p[1]){if(9===C){if(!(d=t.getElementById(r)))return n;if(d.id===r)return n.push(d),n}else if(y&&(d=y.getElementById(r))&&b(t,d)&&d.id===r)return n.push(d),n}else{if(p[2])return A.apply(n,t.getElementsByTagName(e)),n;if((r=p[3])&&i.getElementsByClassName&&t.getElementsByClassName)return A.apply(n,t.getElementsByClassName(r)),n}if(i.qsa&&!E[e+" "]&&(!g||!g.test(e))&&(1!==C||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===C&&(q.test(e)||U.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&i.scope||((c=t.getAttribute("id"))?c=c.replace(ne,oe):t.setAttribute("id",c=x)),s=(f=a(e)).length;s--;)f[s]=(c?"#"+c:":scope")+" "+be(f[s]);v=f.join(",")}try{return A.apply(n,y.querySelectorAll(v)),n}catch(S){E(e,!0)}finally{c===x&&t.removeAttribute("id")}}}return l(e.replace(G,"$1"),t,n,o)}function le(){var e=[];return function t(i,o){return e.push(i+" ")>n.cacheLength&&delete t[e.shift()],t[i+" "]=o}}function de(e){return e[x]=!0,e}function ce(e){var t=m.createElement("fieldset");try{return!!e(t)}catch(Re){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var i=e.split("|"),o=i.length;o--;)n.attrHandle[i[o]]=t}function ue(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function me(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ge(e){return de(function(t){return t=+t,de(function(i,n){for(var o,r=e([],i.length,t),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in i=se.support={},r=se.isXML=function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!Q.test(t||i&&i.nodeName||"HTML")},u=se.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:C;return a!=m&&9===a.nodeType&&a.documentElement?(f=(m=a).documentElement,h=!r(m),C!=m&&(o=m.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",re,!1):o.attachEvent&&o.attachEvent("onunload",re)),i.scope=ce(function(e){return f.appendChild(e).appendChild(m.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),i.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),i.getElementsByTagName=ce(function(e){return e.appendChild(m.createComment("")),!e.getElementsByTagName("*").length}),i.getElementsByClassName=Y.test(m.getElementsByClassName),i.getById=ce(function(e){return f.appendChild(e).id=x,!m.getElementsByName||!m.getElementsByName(x).length}),i.getById?(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i=t.getElementById(e);return i?[i]:[]}}):(n.filter.ID=function(e){var t=e.replace(te,ie);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},n.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var i,n,o,r=t.getElementById(e);if(r){if((i=r.getAttributeNode("id"))&&i.value===e)return[r];for(o=t.getElementsByName(e),n=0;r=o[n++];)if((i=r.getAttributeNode("id"))&&i.value===e)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):i.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;i=r[o++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},v=[],g=[],(i.qsa=Y.test(m.querySelectorAll))&&(ce(function(e){var t;f.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&g.push("[*^$]="+V+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||g.push("\\["+V+"*(?:value|"+_+")"),e.querySelectorAll("[id~="+x+"-]").length||g.push("~="),(t=m.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||g.push("\\["+V+"*name"+V+"*="+V+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||g.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||g.push(".#.+[+~]"),e.querySelectorAll("\\\f"),g.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=m.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&g.push("name"+V+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&g.push(":enabled",":disabled"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&g.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),g.push(",.*:")})),(i.matchesSelector=Y.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ce(function(e){i.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",$)}),g=g.length&&new RegExp(g.join("|")),v=v.length&&new RegExp(v.join("|")),t=Y.test(f.compareDocumentPosition),b=t||Y.test(f.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},F=t?function(e,t){if(e===t)return p=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!i.sortDetached&&t.compareDocumentPosition(e)===n?e==m||e.ownerDocument==C&&b(C,e)?-1:t==m||t.ownerDocument==C&&b(C,t)?1:c?j(c,e)-j(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return p=!0,0;var i,n=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r)return e==m?-1:t==m?1:o?-1:r?1:c?j(c,e)-j(c,t):0;if(o===r)return ue(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?ue(a[n],s[n]):a[n]==C?-1:s[n]==C?1:0},m):m},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(u(e),i.matchesSelector&&h&&!E[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t)))try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Re){E(t,!0)}return se(t,m,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=m&&u(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=m&&u(e);var o=n.attrHandle[t.toLowerCase()],r=o&&M.call(n.attrHandle,t.toLowerCase())?o(e,t,!h):void 0;return void 0!==r?r:i.attributes||!h?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(ne,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],o=0,r=0;if(p=!i.detectDuplicates,c=!i.sortStable&&e.slice(0),e.sort(F),p){for(;t=e[r++];)t===e[r]&&(o=n.push(r));for(;o--;)e.splice(n[o],1)}return c=null,e},o=se.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},n=se.selectors={cacheLength:50,createPseudo:de,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ie),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return H.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&X.test(i)&&(t=a(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|"+V+")"+e+"("+V+"|$)"))&&I(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var o=se.attr(n,e);return null==o?"!="===t:!t||(o+="","="===t?o===i:"!="===t?o!==i:"^="===t?i&&0===o.indexOf(i):"*="===t?i&&o.indexOf(i)>-1:"$="===t?i&&o.slice(-i.length)===i:"~="===t?(" "+o.replace(L," ")+" ").indexOf(i)>-1:"|="===t&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,n,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,i,l){var d,c,p,u,m,f,h=r!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(g){if(r){for(;h;){for(u=t;u=u[h];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;f=h="only"===e&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&y){for(b=(m=(d=(c=(p=(u=g)[x]||(u[x]={}))[u.uniqueID]||(p[u.uniqueID]={}))[e]||[])[0]===S&&d[1])&&d[2],u=m&&g.childNodes[m];u=++m&&u&&u[h]||(b=m=0)||f.pop();)if(1===u.nodeType&&++b&&u===t){c[e]=[S,m,b];break}}else if(y&&(b=m=(d=(c=(p=(u=t)[x]||(u[x]={}))[u.uniqueID]||(p[u.uniqueID]={}))[e]||[])[0]===S&&d[1]),!1===b)for(;(u=++m&&u&&u[h]||(b=m=0)||f.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++b||(y&&((c=(p=u[x]||(u[x]={}))[u.uniqueID]||(p[u.uniqueID]={}))[e]=[S,b]),u!==t)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,t){var i,o=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[x]?o(t):o.length>1?(i=[e,e,"",t],n.setFilters.hasOwnProperty(e.toLowerCase())?de(function(e,i){for(var n,r=o(e,t),a=r.length;a--;)e[n=j(e,r[a])]=!(i[n]=r[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:de(function(e){var t=[],i=[],n=s(e.replace(G,"$1"));return n[x]?de(function(e,t,i,o){for(var r,a=n(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),t[0]=null,!i.pop()}}),has:de(function(e){return function(t){return se(e,t).length>0}}),contains:de(function(e){return e=e.replace(te,ie),function(t){return(t.textContent||o(t)).indexOf(e)>-1}}),lang:de(function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ie).toLowerCase(),function(t){var i;do{if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!n.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ge(function(){return[0]}),last:ge(function(e,t){return[t-1]}),eq:ge(function(e,t,i){return[i<0?i+t:i]}),even:ge(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:ge(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:ge(function(e,t,i){for(var n=i<0?i+t:i>t?t:i;--n>=0;)e.push(n);return e}),gt:ge(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},n.pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[t]=me(t);for(t in{submit:!0,reset:!0})n.pseudos[t]=fe(t);function ye(){}function be(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function xe(e,t,i){var n=t.dir,o=t.next,r=o||n,a=i&&"parentNode"===r,s=D++;return t.first?function(t,i,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,o);return!1}:function(t,i,l){var d,c,p,u=[S,s];if(l){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,l))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(c=(p=t[x]||(t[x]={}))[t.uniqueID]||(p[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((d=c[r])&&d[0]===S&&d[1]===s)return u[2]=d[2];if(c[r]=u,u[2]=e(t,i,l))return!0}return!1}}function Ce(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function Se(e,t,i,n,o){for(var r,a=[],s=0,l=e.length,d=null!=t;s<l;s++)(r=e[s])&&(i&&!i(r,n,o)||(a.push(r),d&&t.push(s)));return a}function De(e,t,i,n,o,r){return n&&!n[x]&&(n=De(n)),o&&!o[x]&&(o=De(o,r)),de(function(r,a,s,l){var d,c,p,u=[],m=[],f=a.length,h=r||function(e,t,i){for(var n=0,o=t.length;n<o;n++)se(e,t[n],i);return i}(t||"*",s.nodeType?[s]:s,[]),g=!e||!r&&t?h:Se(h,u,e,s,l),v=i?o||(r?e:f||n)?[]:a:g;if(i&&i(g,v,s,l),n)for(d=Se(v,m),n(d,[],s,l),c=d.length;c--;)(p=d[c])&&(v[m[c]]=!(g[m[c]]=p));if(r){if(o||e){if(o){for(d=[],c=v.length;c--;)(p=v[c])&&d.push(g[c]=p);o(null,v=[],d,l)}for(c=v.length;c--;)(p=v[c])&&(d=o?j(r,p):u[c])>-1&&(r[d]=!(a[d]=p))}}else v=Se(v===a?v.splice(f,v.length):v),o?o(null,a,v,l):A.apply(a,v)})}function Ie(e){for(var t,i,o,r=e.length,a=n.relative[e[0].type],s=a||n.relative[" "],l=a?1:0,c=xe(function(e){return e===t},s,!0),p=xe(function(e){return j(t,e)>-1},s,!0),u=[function(e,i,n){var o=!a&&(n||i!==d)||((t=i).nodeType?c(e,i,n):p(e,i,n));return t=null,o}];l<r;l++)if(i=n.relative[e[l].type])u=[xe(Ce(u),i)];else{if((i=n.filter[e[l].type].apply(null,e[l].matches))[x]){for(o=++l;o<r&&!n.relative[e[o].type];o++);return De(l>1&&Ce(u),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(G,"$1"),i,l<o&&Ie(e.slice(l,o)),o<r&&Ie(e=e.slice(o)),o<r&&be(e))}u.push(i)}return Ce(u)}return ye.prototype=n.filters=n.pseudos,n.setFilters=new ye,a=se.tokenize=function(e,t){var i,o,r,a,s,l,d,c=R[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],d=n.preFilter;s;){for(a in i&&!(o=z.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=U.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(G," ")}),s=s.slice(i.length)),n.filter)!(o=H[a].exec(s))||d[a]&&!(o=d[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return t?s.length:s?se.error(e):R(e,l).slice(0)},s=se.compile=function(e,t){var i,o=[],r=[],s=w[e+" "];if(!s){for(t||(t=a(e)),i=t.length;i--;)(s=Ie(t[i]))[x]?o.push(s):r.push(s);s=w(e,function(e,t){var i=t.length>0,o=e.length>0,r=function(r,a,s,l,c){var p,f,g,v=0,y="0",b=r&&[],x=[],C=d,D=r||o&&n.find.TAG("*",c),I=S+=null==C?1:Math.random()||.1,R=D.length;for(c&&(d=a==m||a||c);y!==R&&null!=(p=D[y]);y++){if(o&&p){for(f=0,a||p.ownerDocument==m||(u(p),s=!h);g=e[f++];)if(g(p,a||m,s)){l.push(p);break}c&&(S=I)}i&&((p=!g&&p)&&v--,r&&b.push(p))}if(v+=y,i&&y!==v){for(f=0;g=t[f++];)g(b,x,a,s);if(r){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=O.call(l));x=Se(x)}A.apply(l,x),c&&!r&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return c&&(S=I,d=C),b};return i?de(r):r}(r,o)),s.selector=e}return s},l=se.select=function(e,t,i,o){var r,l,d,c,p,u="function"==typeof e&&e,m=!o&&a(e=u.selector||e);if(i=i||[],1===m.length){if((l=m[0]=m[0].slice(0)).length>2&&"ID"===(d=l[0]).type&&9===t.nodeType&&h&&n.relative[l[1].type]){if(!(t=(n.find.ID(d.matches[0].replace(te,ie),t)||[])[0]))return i;u&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(r=H.needsContext.test(e)?0:l.length;r--&&(d=l[r],!n.relative[c=d.type]);)if((p=n.find[c])&&(o=p(d.matches[0].replace(te,ie),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(r,1),!(e=o.length&&be(l)))return A.apply(i,o),i;break}}return(u||s(e,m))(o,t,!h,i,!t||ee.test(e)&&ve(t.parentNode)||t),i},i.sortStable=x.split("").sort(F).join("")===x,i.detectDuplicates=!!p,u(),i.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(m.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),i.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||pe(_,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),se}(o);R.find=E,R.expr=E.selectors,R.expr[":"]=R.expr.pseudos,R.uniqueSort=R.unique=E.uniqueSort,R.text=E.getText,R.isXMLDoc=E.isXML,R.contains=E.contains,R.escapeSelector=E.escape;var F=function(e,t,i){for(var n=[],o=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&R(e).is(i))break;n.push(e)}return n},M=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},T=R.expr.match.needsContext;function O(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function A(e,t,i){return y(t)?R.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?R.grep(e,function(e){return e===t!==i}):"string"!=typeof t?R.grep(e,function(e){return p.call(t,e)>-1!==i}):R.filter(t,e,i)}R.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?R.find.matchesSelector(n,e)?[n]:[]:R.find.matches(e,R.grep(t,function(e){return 1===e.nodeType}))},R.fn.extend({find:function(e){var t,i,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(R(e).filter(function(){for(t=0;t<n;t++)if(R.contains(o[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)R.find(e,o[t],i);return n>1?R.uniqueSort(i):i},filter:function(e){return this.pushStack(A(this,e||[],!1))},not:function(e){return this.pushStack(A(this,e||[],!0))},is:function(e){return!!A(this,"string"==typeof e&&T.test(e)?R(e):e||[],!1).length}});var P,j=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(R.fn.init=function(e,t,i){var n,o;if(!e)return this;if(i=i||P,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:j.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof R?t[0]:t,R.merge(this,R.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:x,!0)),N.test(n[1])&&R.isPlainObject(t))for(n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(o=x.getElementById(n[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==i.ready?i.ready(e):e(R):R.makeArray(e,this)}).prototype=R.fn,P=R(x);var _=/^(?:parents|prev(?:Until|All))/,V={children:!0,contents:!0,next:!0,prev:!0};function k(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}R.fn.extend({has:function(e){var t=R(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(R.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,o=this.length,r=[],a="string"!=typeof e&&R(e);if(!T.test(e))for(;n<o;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&R.find.matchesSelector(i,e))){r.push(i);break}return this.pushStack(r.length>1?R.uniqueSort(r):r)},index:function(e){return e?"string"==typeof e?p.call(R(e),this[0]):p.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(R.uniqueSort(R.merge(this.get(),R(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),R.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,i){return F(e,"parentNode",i)},next:function(e){return k(e,"nextSibling")},prev:function(e){return k(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,i){return F(e,"nextSibling",i)},prevUntil:function(e,t,i){return F(e,"previousSibling",i)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(O(e,"template")&&(e=e.content||e),R.merge([],e.childNodes))}},function(e,t){R.fn[e]=function(i,n){var o=R.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(o=R.filter(n,o)),this.length>1&&(V[e]||R.uniqueSort(o),_.test(e)&&o.reverse()),this.pushStack(o)}});var B=/[^\x20\t\r\n\f]+/g;function $(e){return e}function L(e){throw e}function G(e,t,i,n){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(i):e&&y(o=e.then)?o.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}R.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return R.each(e.match(B)||[],function(e,i){t[i]=!0}),t}(e):R.extend({},e);var t,i,n,o,r=[],a=[],s=-1,l=function(){for(o=o||e.once,n=t=!0;a.length;s=-1)for(i=a.shift();++s<r.length;)!1===r[s].apply(i[0],i[1])&&e.stopOnFalse&&(s=r.length,i=!1);e.memory||(i=!1),t=!1,o&&(r=i?[]:"")},d={add:function(){return r&&(i&&!t&&(s=r.length-1,a.push(i)),function t(i){R.each(i,function(i,n){y(n)?e.unique&&d.has(n)||r.push(n):n&&n.length&&"string"!==D(n)&&t(n)})}(arguments),i&&!t&&l()),this},remove:function(){return R.each(arguments,function(e,t){for(var i;(i=R.inArray(t,r,i))>-1;)r.splice(i,1),i<=s&&s--}),this},has:function(e){return e?R.inArray(e,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return o=a=[],r=i="",this},disabled:function(){return!r},lock:function(){return o=a=[],i||t||(r=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],a.push(i),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},R.extend({Deferred:function(e){var t=[["notify","progress",R.Callbacks("memory"),R.Callbacks("memory"),2],["resolve","done",R.Callbacks("once memory"),R.Callbacks("once memory"),0,"resolved"],["reject","fail",R.Callbacks("once memory"),R.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return R.Deferred(function(i){R.each(t,function(t,n){var o=y(e[n[4]])&&e[n[4]];r[n[1]](function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,i,n){var r=0;function a(e,t,i,n){return function(){var s=this,l=arguments,d=function(){var o,d;if(!(e<r)){if((o=i.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");d=o&&("object"==typeof o||"function"==typeof o)&&o.then,y(d)?n?d.call(o,a(r,t,$,n),a(r,t,L,n)):(r++,d.call(o,a(r,t,$,n),a(r,t,L,n),a(r,t,$,t.notifyWith))):(i!==$&&(s=void 0,l=[o]),(n||t.resolveWith)(s,l))}},c=n?d:function(){try{d()}catch(n){R.Deferred.exceptionHook&&R.Deferred.exceptionHook(n,c.stackTrace),e+1>=r&&(i!==L&&(s=void 0,l=[n]),t.rejectWith(s,l))}};e?c():(R.Deferred.getStackHook&&(c.stackTrace=R.Deferred.getStackHook()),o.setTimeout(c))}}return R.Deferred(function(o){t[0][3].add(a(0,o,y(n)?n:$,o.notifyWith)),t[1][3].add(a(0,o,y(e)?e:$)),t[2][3].add(a(0,o,y(i)?i:L))}).promise()},promise:function(e){return null!=e?R.extend(e,n):n}},r={};return R.each(t,function(e,o){var a=o[2],s=o[5];n[o[1]]=a.add,s&&a.add(function(){i=s},t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(o[3].fire),r[o[0]]=function(){return r[o[0]+"With"](this===r?void 0:this,arguments),this},r[o[0]+"With"]=a.fireWith}),n.promise(r),e&&e.call(r,r),r},when:function(e){var t=arguments.length,i=t,n=Array(i),o=l.call(arguments),r=R.Deferred(),a=function(e){return function(i){n[e]=this,o[e]=arguments.length>1?l.call(arguments):i,--t||r.resolveWith(n,o)}};if(t<=1&&(G(e,r.done(a(i)).resolve,r.reject,!t),"pending"===r.state()||y(o[i]&&o[i].then)))return r.then();for(;i--;)G(o[i],a(i),r.reject);return r.promise()}});var z=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;R.Deferred.exceptionHook=function(e,t){o.console&&o.console.warn&&e&&z.test(e.name)&&o.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},R.readyException=function(e){o.setTimeout(function(){throw e})};var U=R.Deferred();function q(){x.removeEventListener("DOMContentLoaded",q),o.removeEventListener("load",q),R.ready()}R.fn.ready=function(e){return U.then(e).catch(function(e){R.readyException(e)}),this},R.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--R.readyWait:R.isReady)||(R.isReady=!0,!0!==e&&--R.readyWait>0||U.resolveWith(x,[R]))}}),R.ready.then=U.then,"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?o.setTimeout(R.ready):(x.addEventListener("DOMContentLoaded",q),o.addEventListener("load",q));var X=function(e,t,i,n,o,r,a){var s=0,l=e.length,d=null==i;if("object"===D(i))for(s in o=!0,i)X(e,t,s,i[s],!0,r,a);else if(void 0!==n&&(o=!0,y(n)||(a=!0),d&&(a?(t.call(e,n),t=null):(d=t,t=function(e,t,i){return d.call(R(e),i)})),t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return o?e:d?t.call(e):l?t(e[0],i):r},W=/^-ms-/,H=/-([a-z])/g;function Q(e,t){return t.toUpperCase()}function K(e){return e.replace(W,"ms-").replace(H,Q)}var J=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=R.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},J(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,o=this.cache(e);if("string"==typeof t)o[K(t)]=i;else for(n in t)o[K(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][K(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(K):(t=K(t))in n?[t]:t.match(B)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||R.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!R.isEmptyObject(t)}};var Z=new Y,ee=new Y,te=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ie=/[A-Z]/g;function ne(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(ie,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:te.test(e)?JSON.parse(e):e)}(i)}catch(o){}ee.set(e,t,i)}else i=void 0;return i}R.extend({hasData:function(e){return ee.hasData(e)||Z.hasData(e)},data:function(e,t,i){return ee.access(e,t,i)},removeData:function(e,t){ee.remove(e,t)},_data:function(e,t,i){return Z.access(e,t,i)},_removeData:function(e,t){Z.remove(e,t)}}),R.fn.extend({data:function(e,t){var i,n,o,r=this[0],a=r&&r.attributes;if(void 0===e){if(this.length&&(o=ee.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=K(n.slice(5)),ne(r,n,o[n]));Z.set(r,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ee.set(this,e)}):X(this,function(t){var i;if(r&&void 0===t)return void 0!==(i=ee.get(r,e))||void 0!==(i=ne(r,e))?i:void 0;this.each(function(){ee.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ee.remove(this,e)})}}),R.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Z.get(e,t),i&&(!n||Array.isArray(i)?n=Z.access(e,t,R.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=R.queue(e,t),n=i.length,o=i.shift(),r=R._queueHooks(e,t);"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,function(){R.dequeue(e,t)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Z.get(e,i)||Z.access(e,i,{empty:R.Callbacks("once memory").add(function(){Z.remove(e,[t+"queue",i])})})}}),R.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?R.queue(this[0],e):void 0===t?this:this.each(function(){var i=R.queue(this,e,t);R._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&R.dequeue(this,e)})},dequeue:function(e){return this.each(function(){R.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,o=R.Deferred(),r=this,a=this.length,s=function(){--n||o.resolveWith(r,[r])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Z.get(r[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),o.promise(t)}});var oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+oe+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],se=x.documentElement,le=function(e){return R.contains(e.ownerDocument,e)},de={composed:!0};se.getRootNode&&(le=function(e){return R.contains(e.ownerDocument,e)||e.getRootNode(de)===e.ownerDocument});var ce=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&le(e)&&"none"===R.css(e,"display")};function pe(e,t,i,n){var o,r,a=20,s=n?function(){return n.cur()}:function(){return R.css(e,t,"")},l=s(),d=i&&i[3]||(R.cssNumber[t]?"":"px"),c=e.nodeType&&(R.cssNumber[t]||"px"!==d&&+l)&&re.exec(R.css(e,t));if(c&&c[3]!==d){for(l/=2,d=d||c[3],c=+l||1;a--;)R.style(e,t,c+d),(1-r)*(1-(r=s()/l||.5))<=0&&(a=0),c/=r;c*=2,R.style(e,t,c+d),i=i||[]}return i&&(c=+c||+l||0,o=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=o)),o}var ue={};function me(e){var t,i=e.ownerDocument,n=e.nodeName,o=ue[n];return o||(t=i.body.appendChild(i.createElement(n)),o=R.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ue[n]=o,o)}function fe(e,t){for(var i,n,o=[],r=0,a=e.length;r<a;r++)(n=e[r]).style&&(i=n.style.display,t?("none"===i&&(o[r]=Z.get(n,"display")||null,o[r]||(n.style.display="")),""===n.style.display&&ce(n)&&(o[r]=me(n))):"none"!==i&&(o[r]="none",Z.set(n,"display",i)));for(r=0;r<a;r++)null!=o[r]&&(e[r].style.display=o[r]);return e}R.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ce(this)?R(this).show():R(this).hide()})}});var he,ge,ve=/^(?:checkbox|radio)$/i,ye=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,be=/^$|^module$|\/(?:java|ecma)script/i;he=x.createDocumentFragment().appendChild(x.createElement("div")),(ge=x.createElement("input")).setAttribute("type","radio"),ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),he.appendChild(ge),v.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",v.option=!!he.lastChild;var xe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&O(e,t)?R.merge([e],i):i}function Se(e,t){for(var i=0,n=e.length;i<n;i++)Z.set(e[i],"globalEval",!t||Z.get(t[i],"globalEval"))}xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,v.option||(xe.optgroup=xe.option=[1,"<select multiple='multiple'>","</select>"]);var De=/<|&#?\w+;/;function Ie(e,t,i,n,o){for(var r,a,s,l,d,c,p=t.createDocumentFragment(),u=[],m=0,f=e.length;m<f;m++)if((r=e[m])||0===r)if("object"===D(r))R.merge(u,r.nodeType?[r]:r);else if(De.test(r)){for(a=a||p.appendChild(t.createElement("div")),s=(ye.exec(r)||["",""])[1].toLowerCase(),l=xe[s]||xe._default,a.innerHTML=l[1]+R.htmlPrefilter(r)+l[2],c=l[0];c--;)a=a.lastChild;R.merge(u,a.childNodes),(a=p.firstChild).textContent=""}else u.push(t.createTextNode(r));for(p.textContent="",m=0;r=u[m++];)if(n&&R.inArray(r,n)>-1)o&&o.push(r);else if(d=le(r),a=Ce(p.appendChild(r),"script"),d&&Se(a),i)for(c=0;r=a[c++];)be.test(r.type||"")&&i.push(r);return p}var Re=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Ee(){return!1}function Fe(e,t){return e===function(){try{return x.activeElement}catch(e){}}()==("focus"===t)}function Me(e,t,i,n,o,r){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)Me(e,s,i,n,t[s],r);return e}if(null==n&&null==o?(o=i,n=i=void 0):null==o&&("string"==typeof i?(o=n,n=void 0):(o=n,n=i,i=void 0)),!1===o)o=Ee;else if(!o)return e;return 1===r&&(a=o,o=function(e){return R().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=R.guid++)),e.each(function(){R.event.add(this,t,o,n,i)})}function Te(e,t,i){i?(Z.set(e,t,!1),R.event.add(e,t,{namespace:!1,handler:function(e){var n,o,r=Z.get(this,t);if(1&e.isTrigger&&this[t]){if(r.length)(R.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=l.call(arguments),Z.set(this,t,r),n=i(this,t),this[t](),r!==(o=Z.get(this,t))||n?Z.set(this,t,!1):o={},r!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else r.length&&(Z.set(this,t,{value:R.event.trigger(R.extend(r[0],R.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Z.get(e,t)&&R.event.add(e,t,we)}R.event={global:{},add:function(e,t,i,n,o){var r,a,s,l,d,c,p,u,m,f,h,g=Z.get(e);if(J(e))for(i.handler&&(i=(r=i).handler,o=r.selector),o&&R.find.matchesSelector(se,o),i.guid||(i.guid=R.guid++),(l=g.events)||(l=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return void 0!==R&&R.event.triggered!==t.type?R.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(B)||[""]).length;d--;)m=h=(s=Re.exec(t[d])||[])[1],f=(s[2]||"").split(".").sort(),m&&(p=R.event.special[m]||{},m=(o?p.delegateType:p.bindType)||m,p=R.event.special[m]||{},c=R.extend({type:m,origType:h,data:n,handler:i,guid:i.guid,selector:o,needsContext:o&&R.expr.match.needsContext.test(o),namespace:f.join(".")},r),(u=l[m])||((u=l[m]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,n,f,a)||e.addEventListener&&e.addEventListener(m,a)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),o?u.splice(u.delegateCount++,0,c):u.push(c),R.event.global[m]=!0)},remove:function(e,t,i,n,o){var r,a,s,l,d,c,p,u,m,f,h,g=Z.hasData(e)&&Z.get(e);if(g&&(l=g.events)){for(d=(t=(t||"").match(B)||[""]).length;d--;)if(m=h=(s=Re.exec(t[d])||[])[1],f=(s[2]||"").split(".").sort(),m){for(p=R.event.special[m]||{},u=l[m=(n?p.delegateType:p.bindType)||m]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=r=u.length;r--;)c=u[r],!o&&h!==c.origType||i&&i.guid!==c.guid||s&&!s.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(u.splice(r,1),c.selector&&u.delegateCount--,p.remove&&p.remove.call(e,c));a&&!u.length&&(p.teardown&&!1!==p.teardown.call(e,f,g.handle)||R.removeEvent(e,m,g.handle),delete l[m])}else for(m in l)R.event.remove(e,m+t[d],i,n,!0);R.isEmptyObject(l)&&Z.remove(e,"handle events")}},dispatch:function(e){var t,i,n,o,r,a,s=new Array(arguments.length),l=R.event.fix(e),d=(Z.get(this,"events")||Object.create(null))[l.type]||[],c=R.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=R.event.handlers.call(this,l,d),t=0;(o=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=o.elem,i=0;(r=o.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==r.namespace&&!l.rnamespace.test(r.namespace)||(l.handleObj=r,l.data=r.data,void 0!==(n=((R.event.special[r.origType]||{}).handle||r.handler).apply(o.elem,s))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,o,r,a,s=[],l=t.delegateCount,d=e.target;if(l&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(r=[],a={},i=0;i<l;i++)void 0===a[o=(n=t[i]).selector+" "]&&(a[o]=n.needsContext?R(o,this).index(d)>-1:R.find(o,this,null,[d]).length),a[o]&&r.push(n);r.length&&s.push({elem:d,handlers:r})}return d=this,l<t.length&&s.push({elem:d,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(R.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[R.expando]?e:new R.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ve.test(t.type)&&t.click&&O(t,"input")&&Te(t,"click",we),!1},trigger:function(e){var t=this||e;return ve.test(t.type)&&t.click&&O(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return ve.test(t.type)&&t.click&&O(t,"input")&&Z.get(t,"click")||O(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},R.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},R.Event=function(e,t){if(!(this instanceof R.Event))return new R.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Ee,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&R.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[R.expando]=!0},R.Event.prototype={constructor:R.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},R.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},R.event.addProp),R.each({focus:"focusin",blur:"focusout"},function(e,t){R.event.special[e]={setup:function(){return Te(this,e,Fe),!1},trigger:function(){return Te(this,e),!0},_default:function(){return!0},delegateType:t}}),R.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){R.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=e.relatedTarget,o=e.handleObj;return n&&(n===this||R.contains(this,n))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),R.fn.extend({on:function(e,t,i,n){return Me(this,e,t,i,n)},one:function(e,t,i,n){return Me(this,e,t,i,n,1)},off:function(e,t,i){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,R(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Ee),this.each(function(){R.event.remove(this,e,i,t)})}});var Oe=/<script|<style|<link/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pe(e,t){return O(e,"table")&&O(11!==t.nodeType?t:t.firstChild,"tr")&&R(e).children("tbody")[0]||e}function je(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function _e(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ve(e,t){var i,n,o,r,a,s;if(1===t.nodeType){if(Z.hasData(e)&&(s=Z.get(e).events))for(o in Z.remove(t,"handle events"),s)for(i=0,n=s[o].length;i<n;i++)R.event.add(t,o,s[o][i]);ee.hasData(e)&&(r=ee.access(e),a=R.extend({},r),ee.set(t,a))}}function ke(e,t){var i=t.nodeName.toLowerCase();"input"===i&&ve.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Be(e,t,i,n){t=d(t);var o,r,a,s,l,c,p=0,u=e.length,m=u-1,f=t[0],h=y(f);if(h||u>1&&"string"==typeof f&&!v.checkClone&&Ne.test(f))return e.each(function(o){var r=e.eq(o);h&&(t[0]=f.call(this,o,r.html())),Be(r,t,i,n)});if(u&&(r=(o=Ie(t,e[0].ownerDocument,!1,e,n)).firstChild,1===o.childNodes.length&&(o=r),r||n)){for(s=(a=R.map(Ce(o,"script"),je)).length;p<u;p++)l=o,p!==m&&(l=R.clone(l,!0,!0),s&&R.merge(a,Ce(l,"script"))),i.call(e[p],l,p);if(s)for(c=a[a.length-1].ownerDocument,R.map(a,_e),p=0;p<s;p++)l=a[p],be.test(l.type||"")&&!Z.access(l,"globalEval")&&R.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?R._evalUrl&&!l.noModule&&R._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):S(l.textContent.replace(Ae,""),l,c))}return e}function $e(e,t,i){for(var n,o=t?R.filter(t,e):e,r=0;null!=(n=o[r]);r++)i||1!==n.nodeType||R.cleanData(Ce(n)),n.parentNode&&(i&&le(n)&&Se(Ce(n,"script")),n.parentNode.removeChild(n));return e}R.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var n,o,r,a,s=e.cloneNode(!0),l=le(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||R.isXMLDoc(e)))for(a=Ce(s),n=0,o=(r=Ce(e)).length;n<o;n++)ke(r[n],a[n]);if(t)if(i)for(r=r||Ce(e),a=a||Ce(s),n=0,o=r.length;n<o;n++)Ve(r[n],a[n]);else Ve(e,s);return(a=Ce(s,"script")).length>0&&Se(a,!l&&Ce(e,"script")),s},cleanData:function(e){for(var t,i,n,o=R.event.special,r=0;void 0!==(i=e[r]);r++)if(J(i)){if(t=i[Z.expando]){if(t.events)for(n in t.events)o[n]?R.event.remove(i,n):R.removeEvent(i,n,t.handle);i[Z.expando]=void 0}i[ee.expando]&&(i[ee.expando]=void 0)}}}),R.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return X(this,function(e){return void 0===e?R.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Be(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pe(this,e).appendChild(e)})},prepend:function(){return Be(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Pe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Be(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(R.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return R.clone(this,e,t)})},html:function(e){return X(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!xe[(ye.exec(e)||["",""])[1].toLowerCase()]){e=R.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(R.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return Be(this,arguments,function(t){var i=this.parentNode;R.inArray(this,e)<0&&(R.cleanData(Ce(this)),i&&i.replaceChild(t,this))},e)}}),R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){R.fn[e]=function(e){for(var i,n=[],o=R(e),r=o.length-1,a=0;a<=r;a++)i=a===r?this:this.clone(!0),R(o[a])[t](i),c.apply(n,i.get());return this.pushStack(n)}});var Le=new RegExp("^("+oe+")(?!px)[a-z%]+$","i"),Ge=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=o),t.getComputedStyle(e)},ze=function(e,t,i){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];for(o in n=i.call(e),t)e.style[o]=r[o];return n},Ue=new RegExp(ae.join("|"),"i");function qe(e,t,i){var n,o,r,a,s=e.style;return(i=i||Ge(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||le(e)||(a=R.style(e,t)),!v.pixelBoxStyles()&&Le.test(a)&&Ue.test(t)&&(n=s.width,o=s.minWidth,r=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=o,s.maxWidth=r)),void 0!==a?a+"":a}function Xe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){d.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",se.appendChild(d).appendChild(c);var e=o.getComputedStyle(c);i="1%"!==e.top,l=12===t(e.marginLeft),c.style.right="60%",a=36===t(e.right),n=36===t(e.width),c.style.position="absolute",r=12===t(c.offsetWidth/3),se.removeChild(d),c=null}}function t(e){return Math.round(parseFloat(e))}var i,n,r,a,s,l,d=x.createElement("div"),c=x.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,R.extend(v,{boxSizingReliable:function(){return e(),n},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),i},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),r},reliableTrDimensions:function(){var e,t,i,n;return null==s&&(e=x.createElement("table"),t=x.createElement("tr"),i=x.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",i.style.height="9px",i.style.display="block",se.appendChild(e).appendChild(t).appendChild(i),n=o.getComputedStyle(t),s=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===t.offsetHeight,se.removeChild(e)),s}}))}();var We=["Webkit","Moz","ms"],He=x.createElement("div").style,Qe={};function Ke(e){var t=R.cssProps[e]||Qe[e];return t||(e in He?e:Qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=We.length;i--;)if((e=We[i]+t)in He)return e}(e)||e)}var Je=/^(none|table(?!-c[ea]).+)/,Ye=/^--/,Ze={position:"absolute",visibility:"hidden",display:"block"},et={letterSpacing:"0",fontWeight:"400"};function tt(e,t,i){var n=re.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function it(e,t,i,n,o,r){var a="width"===t?1:0,s=0,l=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(l+=R.css(e,i+ae[a],!0,o)),n?("content"===i&&(l-=R.css(e,"padding"+ae[a],!0,o)),"margin"!==i&&(l-=R.css(e,"border"+ae[a]+"Width",!0,o))):(l+=R.css(e,"padding"+ae[a],!0,o),"padding"!==i?l+=R.css(e,"border"+ae[a]+"Width",!0,o):s+=R.css(e,"border"+ae[a]+"Width",!0,o));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-s-.5))||0),l}function nt(e,t,i){var n=Ge(e),o=(!v.boxSizingReliable()||i)&&"border-box"===R.css(e,"boxSizing",!1,n),r=o,a=qe(e,t,n),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(a)){if(!i)return a;a="auto"}return(!v.boxSizingReliable()&&o||!v.reliableTrDimensions()&&O(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===R.css(e,"display",!1,n))&&e.getClientRects().length&&(o="border-box"===R.css(e,"boxSizing",!1,n),(r=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,i||(o?"border":"content"),r,n,a)+"px"}function ot(e,t,i,n,o){return new ot.prototype.init(e,t,i,n,o)}R.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=qe(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,r,a,s=K(t),l=Ye.test(t),d=e.style;if(l||(t=Ke(s)),a=R.cssHooks[t]||R.cssHooks[s],void 0===i)return a&&"get"in a&&void 0!==(o=a.get(e,!1,n))?o:d[t];"string"===(r=typeof i)&&(o=re.exec(i))&&o[1]&&(i=pe(e,t,o),r="number"),null!=i&&i==i&&("number"!==r||l||(i+=o&&o[3]||(R.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,n){var o,r,a,s=K(t);return Ye.test(t)||(t=Ke(s)),(a=R.cssHooks[t]||R.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,i)),void 0===o&&(o=qe(e,t,n)),"normal"===o&&t in et&&(o=et[t]),""===i||i?(r=parseFloat(o),!0===i||isFinite(r)?r||0:o):o}}),R.each(["height","width"],function(e,t){R.cssHooks[t]={get:function(e,i,n){if(i)return!Je.test(R.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?nt(e,t,n):ze(e,Ze,function(){return nt(e,t,n)})},set:function(e,i,n){var o,r=Ge(e),a=!v.scrollboxSize()&&"absolute"===r.position,s=(a||n)&&"border-box"===R.css(e,"boxSizing",!1,r),l=n?it(e,t,n,s,r):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-it(e,t,"border",!1,r)-.5)),l&&(o=re.exec(i))&&"px"!==(o[3]||"px")&&(e.style[t]=i,i=R.css(e,t)),tt(0,i,l)}}}),R.cssHooks.marginLeft=Xe(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-ze(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),R.each({margin:"",padding:"",border:"Width"},function(e,t){R.cssHooks[e+t]={expand:function(i){for(var n=0,o={},r="string"==typeof i?i.split(" "):[i];n<4;n++)o[e+ae[n]+t]=r[n]||r[n-2]||r[0];return o}},"margin"!==e&&(R.cssHooks[e+t].set=tt)}),R.fn.extend({css:function(e,t){return X(this,function(e,t,i){var n,o,r={},a=0;if(Array.isArray(t)){for(n=Ge(e),o=t.length;a<o;a++)r[t[a]]=R.css(e,t[a],!1,n);return r}return void 0!==i?R.style(e,t,i):R.css(e,t)},e,t,arguments.length>1)}}),R.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||R.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(R.cssNumber[i]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,i=ot.propHooks[this.prop];return this.options.duration?this.pos=t=R.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=R.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){R.fx.step[e.prop]?R.fx.step[e.prop](e):1!==e.elem.nodeType||!R.cssHooks[e.prop]&&null==e.elem.style[Ke(e.prop)]?e.elem[e.prop]=e.now:R.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},R.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},R.fx=ot.prototype.init,R.fx.step={};var rt,at,st=/^(?:toggle|show|hide)$/,lt=/queueHooks$/;function dt(){at&&(!1===x.hidden&&o.requestAnimationFrame?o.requestAnimationFrame(dt):o.setTimeout(dt,R.fx.interval),R.fx.tick())}function ct(){return o.setTimeout(function(){rt=void 0}),rt=Date.now()}function pt(e,t){var i,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)o["margin"+(i=ae[n])]=o["padding"+i]=e;return t&&(o.opacity=o.width=e),o}function ut(e,t,i){for(var n,o=(mt.tweeners[t]||[]).concat(mt.tweeners["*"]),r=0,a=o.length;r<a;r++)if(n=o[r].call(i,t,e))return n}function mt(e,t,i){var n,o,r=0,a=mt.prefilters.length,s=R.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=rt||ct(),i=Math.max(0,d.startTime+d.duration-t),n=1-(i/d.duration||0),r=0,a=d.tweens.length;r<a;r++)d.tweens[r].run(n);return s.notifyWith(e,[d,n,i]),n<1&&a?i:(a||s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d]),!1)},d=s.promise({elem:e,props:R.extend({},t),opts:R.extend(!0,{specialEasing:{},easing:R.easing._default},i),originalProperties:t,originalOptions:i,startTime:rt||ct(),duration:i.duration,tweens:[],createTween:function(t,i){var n=R.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(o)return this;for(o=!0;i<n;i++)d.tweens[i].run(1);return t?(s.notifyWith(e,[d,1,0]),s.resolveWith(e,[d,t])):s.rejectWith(e,[d,t]),this}}),c=d.props;for(!function(e,t){var i,n,o,r,a;for(i in e)if(o=t[n=K(i)],r=e[i],Array.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),(a=R.cssHooks[n])&&"expand"in a)for(i in r=a.expand(r),delete e[n],r)i in e||(e[i]=r[i],t[i]=o);else t[n]=o}(c,d.opts.specialEasing);r<a;r++)if(n=mt.prefilters[r].call(d,e,c,d.opts))return y(n.stop)&&(R._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return R.map(c,ut,d),y(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),R.fx.timer(R.extend(l,{elem:e,anim:d,queue:d.opts.queue})),d}R.Animation=R.extend(mt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return pe(i.elem,e,re.exec(t),i),i}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(B);for(var i,n=0,o=e.length;n<o;n++)i=e[n],mt.tweeners[i]=mt.tweeners[i]||[],mt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,o,r,a,s,l,d,c,p="width"in t||"height"in t,u=this,m={},f=e.style,h=e.nodeType&&ce(e),g=Z.get(e,"fxshow");for(n in i.queue||(null==(a=R._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,u.always(function(){u.always(function(){a.unqueued--,R.queue(e,"fx").length||a.empty.fire()})})),t)if(o=t[n],st.test(o)){if(delete t[n],r=r||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!g||void 0===g[n])continue;h=!0}m[n]=g&&g[n]||R.style(e,n)}if((l=!R.isEmptyObject(t))||!R.isEmptyObject(m))for(n in p&&1===e.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(d=g&&g.display)&&(d=Z.get(e,"display")),"none"===(c=R.css(e,"display"))&&(d?c=d:(fe([e],!0),d=e.style.display||d,c=R.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===R.css(e,"float")&&(l||(u.done(function(){f.display=d}),null==d&&(c=f.display,d="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",u.always(function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]})),l=!1,m)l||(g?"hidden"in g&&(h=g.hidden):g=Z.access(e,"fxshow",{display:d}),r&&(g.hidden=!h),h&&fe([e],!0),u.done(function(){for(n in h||fe([e]),Z.remove(e,"fxshow"),m)R.style(e,n,m[n])})),l=ut(h?g[n]:0,n,u),n in g||(g[n]=l.start,h&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?mt.prefilters.unshift(e):mt.prefilters.push(e)}}),R.speed=function(e,t,i){var n=e&&"object"==typeof e?R.extend({},e):{complete:i||!i&&t||y(e)&&e,duration:e,easing:i&&t||t&&!y(t)&&t};return R.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in R.fx.speeds?n.duration=R.fx.speeds[n.duration]:n.duration=R.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&R.dequeue(this,n.queue)},n},R.fn.extend({fadeTo:function(e,t,i,n){return this.filter(ce).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=R.isEmptyObject(e),r=R.speed(t,i,n),a=function(){var t=mt(this,R.extend({},e),r);(o||Z.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",r=R.timers,a=Z.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&lt.test(o)&&n(a[o]);for(o=r.length;o--;)r[o].elem!==this||null!=e&&r[o].queue!==e||(r[o].anim.stop(i),t=!1,r.splice(o,1));!t&&i||R.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,i=Z.get(this),n=i[e+"queue"],o=i[e+"queueHooks"],r=R.timers,a=n?n.length:0;for(i.finish=!0,R.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),R.each(["toggle","show","hide"],function(e,t){var i=R.fn[t];R.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(pt(t,!0),e,n,o)}}),R.each({slideDown:pt("show"),slideUp:pt("hide"),slideToggle:pt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){R.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),R.timers=[],R.fx.tick=function(){var e,t=0,i=R.timers;for(rt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||R.fx.stop(),rt=void 0},R.fx.timer=function(e){R.timers.push(e),R.fx.start()},R.fx.interval=13,R.fx.start=function(){at||(at=!0,dt())},R.fx.stop=function(){at=null},R.fx.speeds={slow:600,fast:200,_default:400},R.fn.delay=function(e,t){return e=R.fx&&R.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var n=o.setTimeout(t,e);i.stop=function(){o.clearTimeout(n)}})},function(){var e=x.createElement("input"),t=x.createElement("select").appendChild(x.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=x.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var ft,ht=R.expr.attrHandle;R.fn.extend({attr:function(e,t){return X(this,R.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){R.removeAttr(this,e)})}}),R.extend({attr:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===e.getAttribute?R.prop(e,t,i):(1===r&&R.isXMLDoc(e)||(o=R.attrHooks[t.toLowerCase()]||(R.expr.match.bool.test(t)?ft:void 0)),void 0!==i?null===i?void R.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:(e.setAttribute(t,i+""),i):o&&"get"in o&&null!==(n=o.get(e,t))?n:null==(n=R.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&O(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,o=t&&t.match(B);if(o&&1===e.nodeType)for(;i=o[n++];)e.removeAttribute(i)}}),ft={set:function(e,t,i){return!1===t?R.removeAttr(e,i):e.setAttribute(i,i),i}},R.each(R.expr.match.bool.source.match(/\w+/g),function(e,t){var i=ht[t]||R.find.attr;ht[t]=function(e,t,n){var o,r,a=t.toLowerCase();return n||(r=ht[a],ht[a]=o,o=null!=i(e,t,n)?a:null,ht[a]=r),o}});var gt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function yt(e){return(e.match(B)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function xt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}R.fn.extend({prop:function(e,t){return X(this,R.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[R.propFix[e]||e]})}}),R.extend({prop:function(e,t,i){var n,o,r=e.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&R.isXMLDoc(e)||(t=R.propFix[t]||t,o=R.propHooks[t]),void 0!==i?o&&"set"in o&&void 0!==(n=o.set(e,i,t))?n:e[t]=i:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=R.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(R.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),R.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){R.propFix[this.toLowerCase()]=this}),R.fn.extend({addClass:function(e){var t,i,n,o,r,a,s,l=0;if(y(e))return this.each(function(t){R(this).addClass(e.call(this,t,bt(this)))});if((t=xt(e)).length)for(;i=this[l++];)if(o=bt(i),n=1===i.nodeType&&" "+yt(o)+" "){for(a=0;r=t[a++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");o!==(s=yt(n))&&i.setAttribute("class",s)}return this},removeClass:function(e){var t,i,n,o,r,a,s,l=0;if(y(e))return this.each(function(t){R(this).removeClass(e.call(this,t,bt(this)))});if(!arguments.length)return this.attr("class","");if((t=xt(e)).length)for(;i=this[l++];)if(o=bt(i),n=1===i.nodeType&&" "+yt(o)+" "){for(a=0;r=t[a++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o!==(s=yt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):y(e)?this.each(function(i){R(this).toggleClass(e.call(this,i,bt(this),t),t)}):this.each(function(){var t,o,r,a;if(n)for(o=0,r=R(this),a=xt(e);t=a[o++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==i||((t=bt(this))&&Z.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Z.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+yt(bt(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;R.fn.extend({val:function(e){var t,i,n,o=this[0];return arguments.length?(n=y(e),this.each(function(i){var o;1===this.nodeType&&(null==(o=n?e.call(this,i,R(this).val()):e)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=R.map(o,function(e){return null==e?"":e+""})),(t=R.valHooks[this.type]||R.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))})):o?(t=R.valHooks[o.type]||R.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(o,"value"))?i:"string"==typeof(i=o.value)?i.replace(Ct,""):null==i?"":i:void 0}}),R.extend({valHooks:{option:{get:function(e){var t=R.find.attr(e,"value");return null!=t?t:yt(R.text(e))}},select:{get:function(e){var t,i,n,o=e.options,r=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?r+1:o.length;for(n=r<0?l:a?r:0;n<l;n++)if(((i=o[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!O(i.parentNode,"optgroup"))){if(t=R(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,o=e.options,r=R.makeArray(t),a=o.length;a--;)((n=o[a]).selected=R.inArray(R.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(e.selectedIndex=-1),r}}}}),R.each(["radio","checkbox"],function(){R.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=R.inArray(R(e).val(),t)>-1}},v.checkOn||(R.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),v.focusin="onfocusin"in o;var St=/^(?:focusinfocus|focusoutblur)$/,Dt=function(e){e.stopPropagation()};R.extend(R.event,{trigger:function(e,t,i,n){var r,a,s,l,d,c,p,u,m=[i||x],h=f.call(e,"type")?e.type:e,g=f.call(e,"namespace")?e.namespace.split("."):[];if(a=u=s=i=i||x,3!==i.nodeType&&8!==i.nodeType&&!St.test(h+R.event.triggered)&&(h.indexOf(".")>-1&&(g=h.split("."),h=g.shift(),g.sort()),d=h.indexOf(":")<0&&"on"+h,(e=e[R.expando]?e:new R.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:R.makeArray(t,[e]),p=R.event.special[h]||{},n||!p.trigger||!1!==p.trigger.apply(i,t))){if(!n&&!p.noBubble&&!b(i)){for(l=p.delegateType||h,St.test(l+h)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(i.ownerDocument||x)&&m.push(s.defaultView||s.parentWindow||o)}for(r=0;(a=m[r++])&&!e.isPropagationStopped();)u=a,e.type=r>1?l:p.bindType||h,(c=(Z.get(a,"events")||Object.create(null))[e.type]&&Z.get(a,"handle"))&&c.apply(a,t),(c=d&&a[d])&&c.apply&&J(a)&&(e.result=c.apply(a,t),!1===e.result&&e.preventDefault());return e.type=h,n||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(m.pop(),t)||!J(i)||d&&y(i[h])&&!b(i)&&((s=i[d])&&(i[d]=null),R.event.triggered=h,e.isPropagationStopped()&&u.addEventListener(h,Dt),i[h](),e.isPropagationStopped()&&u.removeEventListener(h,Dt),R.event.triggered=void 0,s&&(i[d]=s)),e.result}},simulate:function(e,t,i){var n=R.extend(new R.Event,i,{type:e,isSimulated:!0});R.event.trigger(n,null,t)}}),R.fn.extend({trigger:function(e,t){return this.each(function(){R.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return R.event.trigger(e,t,i,!0)}}),v.focusin||R.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){R.event.simulate(t,e.target,R.event.fix(e))};R.event.special[t]={setup:function(){var n=this.ownerDocument||this.document||this,o=Z.access(n,t);o||n.addEventListener(e,i,!0),Z.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this.document||this,o=Z.access(n,t)-1;o?Z.access(n,t,o):(n.removeEventListener(e,i,!0),Z.remove(n,t))}}});var It=o.location,Rt={guid:Date.now()},wt=/\?/;R.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{t=(new o.DOMParser).parseFromString(e,"text/xml")}catch(n){}return i=t&&t.getElementsByTagName("parsererror")[0],t&&!i||R.error("Invalid XML: "+(i?R.map(i.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Et=/\[\]$/,Ft=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,n){var o;if(Array.isArray(t))R.each(t,function(t,o){i||Et.test(e)?n(e,o):Ot(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,i,n)});else if(i||"object"!==D(t))n(e,t);else for(o in t)Ot(e+"["+o+"]",t[o],i,n)}R.param=function(e,t){var i,n=[],o=function(e,t){var i=y(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!R.isPlainObject(e))R.each(e,function(){o(this.name,this.value)});else for(i in e)Ot(i,e[i],t,o);return n.join("&")},R.fn.extend({serialize:function(){return R.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=R.prop(this,"elements");return e?R.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!R(this).is(":disabled")&&Tt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!ve.test(e))}).map(function(e,t){var i=R(this).val();return null==i?null:Array.isArray(i)?R.map(i,function(e){return{name:t.name,value:e.replace(Ft,"\r\n")}}):{name:t.name,value:i.replace(Ft,"\r\n")}}).get()}});var Nt=/%20/g,At=/#.*$/,Pt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,_t=/^(?:GET|HEAD)$/,Vt=/^\/\//,kt={},Bt={},$t="*/".concat("*"),Lt=x.createElement("a");function Gt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o=0,r=t.toLowerCase().match(B)||[];if(y(i))for(;n=r[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function zt(e,t,i,n){var o={},r=e===Bt;function a(s){var l;return o[s]=!0,R.each(e[s]||[],function(e,s){var d=s(t,i,n);return"string"!=typeof d||r||o[d]?r?!(l=d):void 0:(t.dataTypes.unshift(d),a(d),!1)}),l}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Ut(e,t){var i,n,o=R.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((o[i]?e:n||(n={}))[i]=t[i]);return n&&R.extend(!0,e,n),e}Lt.href=It.href,R.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:It.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(It.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":R.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ut(Ut(e,R.ajaxSettings),t):Ut(R.ajaxSettings,e)},ajaxPrefilter:Gt(kt),ajaxTransport:Gt(Bt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,n,r,a,s,l,d,c,p,u,m=R.ajaxSetup({},t),f=m.context||m,h=m.context&&(f.nodeType||f.jquery)?R(f):R.event,g=R.Deferred(),v=R.Callbacks("once memory"),y=m.statusCode||{},b={},C={},S="canceled",D={readyState:0,getResponseHeader:function(e){var t;if(d){if(!a)for(a={};t=jt.exec(r);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return d?r:null},setRequestHeader:function(e,t){return null==d&&(e=C[e.toLowerCase()]=C[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==d&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(d)D.always(e[D.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||S;return i&&i.abort(t),I(0,t),this}};if(g.promise(D),m.url=((e||m.url||It.href)+"").replace(Vt,It.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(B)||[""],null==m.crossDomain){l=x.createElement("a");try{l.href=m.url,l.href=l.href,m.crossDomain=Lt.protocol+"//"+Lt.host!=l.protocol+"//"+l.host}catch(w){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=R.param(m.data,m.traditional)),zt(kt,m,t,D),d)return D;for(p in(c=R.event&&m.global)&&0==R.active++&&R.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!_t.test(m.type),n=m.url.replace(At,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(Nt,"+")):(u=m.url.slice(n.length),m.data&&(m.processData||"string"==typeof m.data)&&(n+=(wt.test(n)?"&":"?")+m.data,delete m.data),!1===m.cache&&(n=n.replace(Pt,"$1"),u=(wt.test(n)?"&":"?")+"_="+Rt.guid+++u),m.url=n+u),m.ifModified&&(R.lastModified[n]&&D.setRequestHeader("If-Modified-Since",R.lastModified[n]),R.etag[n]&&D.setRequestHeader("If-None-Match",R.etag[n])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&D.setRequestHeader("Content-Type",m.contentType),D.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+$t+"; q=0.01":""):m.accepts["*"]),m.headers)D.setRequestHeader(p,m.headers[p]);if(m.beforeSend&&(!1===m.beforeSend.call(f,D,m)||d))return D.abort();if(S="abort",v.add(m.complete),D.done(m.success),D.fail(m.error),i=zt(Bt,m,t,D)){if(D.readyState=1,c&&h.trigger("ajaxSend",[D,m]),d)return D;m.async&&m.timeout>0&&(s=o.setTimeout(function(){D.abort("timeout")},m.timeout));try{d=!1,i.send(b,I)}catch(w){if(d)throw w;I(-1,w)}}else I(-1,"No Transport");function I(e,t,a,l){var p,u,b,x,C,S=t;d||(d=!0,s&&o.clearTimeout(s),i=void 0,r=l||"",D.readyState=e>0?4:0,p=e>=200&&e<300||304===e,a&&(x=function(e,t,i){for(var n,o,r,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){l.unshift(o);break}if(l[0]in i)r=l[0];else{for(o in i){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}a||(a=o)}r=r||a}if(r)return r!==l[0]&&l.unshift(r),i[r]}(m,D,a)),!p&&R.inArray("script",m.dataTypes)>-1&&R.inArray("json",m.dataTypes)<0&&(m.converters["text script"]=function(){}),x=function(e,t,i,n){var o,r,a,s,l,d={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(r=c.shift();r;)if(e.responseFields[r]&&(i[e.responseFields[r]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=r,r=c.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(a=d[l+" "+r]||d["* "+r]))for(o in d)if((s=o.split(" "))[1]===r&&(a=d[l+" "+s[0]]||d["* "+s[0]])){!0===a?a=d[o]:!0!==d[o]&&(r=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(w){return{state:"parsererror",error:a?w:"No conversion from "+l+" to "+r}}}return{state:"success",data:t}}(m,x,D,p),p?(m.ifModified&&((C=D.getResponseHeader("Last-Modified"))&&(R.lastModified[n]=C),(C=D.getResponseHeader("etag"))&&(R.etag[n]=C)),204===e||"HEAD"===m.type?S="nocontent":304===e?S="notmodified":(S=x.state,u=x.data,p=!(b=x.error))):(b=S,!e&&S||(S="error",e<0&&(e=0))),D.status=e,D.statusText=(t||S)+"",p?g.resolveWith(f,[u,S,D]):g.rejectWith(f,[D,S,b]),D.statusCode(y),y=void 0,c&&h.trigger(p?"ajaxSuccess":"ajaxError",[D,m,p?u:b]),v.fireWith(f,[D,S]),c&&(h.trigger("ajaxComplete",[D,m]),--R.active||R.event.trigger("ajaxStop")))}return D},getJSON:function(e,t,i){return R.get(e,t,i,"json")},getScript:function(e,t){return R.get(e,void 0,t,"script")}}),R.each(["get","post"],function(e,t){R[t]=function(e,i,n,o){return y(i)&&(o=o||n,n=i,i=void 0),R.ajax(R.extend({url:e,type:t,dataType:o,data:i,success:n},R.isPlainObject(e)&&e))}}),R.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),R._evalUrl=function(e,t,i){return R.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){R.globalEval(e,t,i)}})},R.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=R(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return y(e)?this.each(function(t){R(this).wrapInner(e.call(this,t))}):this.each(function(){var t=R(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=y(e);return this.each(function(i){R(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){R(this).replaceWith(this.childNodes)}),this}}),R.expr.pseudos.hidden=function(e){return!R.expr.pseudos.visible(e)},R.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},R.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Xt=R.ajaxSettings.xhr();v.cors=!!Xt&&"withCredentials"in Xt,v.ajax=Xt=!!Xt,R.ajaxTransport(function(e){var t,i;if(v.cors||Xt&&!e.crossDomain)return{send:function(n,r){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)s.setRequestHeader(a,n[a]);t=function(e){return function(){t&&(t=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?r(0,"error"):r(s.status,s.statusText):r(qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),i=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&o.setTimeout(function(){t&&i()})},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(t)throw l}},abort:function(){t&&t()}}}),R.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),R.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return R.globalEval(e),e}}}),R.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),R.ajaxTransport("script",function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(n,o){t=R("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&o("error"===e.type?404:200,e.type)}),x.head.appendChild(t[0])},abort:function(){i&&i()}}});var Wt,Ht=[],Qt=/(=)\?(?=&|$)|\?\?/;R.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||R.expando+"_"+Rt.guid++;return this[e]=!0,e}}),R.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,a,s=!1!==e.jsonp&&(Qt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Qt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Qt,"$1"+n):!1!==e.jsonp&&(e.url+=(wt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return a||R.error(n+" was not called"),a[0]},e.dataTypes[0]="json",r=o[n],o[n]=function(){a=arguments},i.always(function(){void 0===r?R(o).removeProp(n):o[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Ht.push(n)),a&&y(r)&&r(a[0]),a=r=void 0}),"script"}),v.createHTMLDocument=((Wt=x.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Wt.childNodes.length),R.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(v.createHTMLDocument?((n=(t=x.implementation.createHTMLDocument("")).createElement("base")).href=x.location.href,t.head.appendChild(n)):t=x),r=!i&&[],(o=N.exec(e))?[t.createElement(o[1])]:(o=Ie([e],t,r),r&&r.length&&R(r).remove(),R.merge([],o.childNodes)));var n,o,r},R.fn.load=function(e,t,i){var n,o,r,a=this,s=e.indexOf(" ");return s>-1&&(n=yt(e.slice(s)),e=e.slice(0,s)),y(t)?(i=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&R.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments,a.html(n?R("<div>").append(R.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,r||[e.responseText,t,e])})}),this},R.expr.pseudos.animated=function(e){return R.grep(R.timers,function(t){return e===t.elem}).length},R.offset={setOffset:function(e,t,i){var n,o,r,a,s,l,d=R.css(e,"position"),c=R(e),p={};"static"===d&&(e.style.position="relative"),s=c.offset(),r=R.css(e,"top"),l=R.css(e,"left"),("absolute"===d||"fixed"===d)&&(r+l).indexOf("auto")>-1?(a=(n=c.position()).top,o=n.left):(a=parseFloat(r)||0,o=parseFloat(l)||0),y(t)&&(t=t.call(e,i,R.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):c.css(p)}},R.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){R.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],o={top:0,left:0};if("fixed"===R.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===R.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((o=R(e).offset()).top+=R.css(e,"borderTopWidth",!0),o.left+=R.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-R.css(n,"marginTop",!0),left:t.left-o.left-R.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===R.css(e,"position");)e=e.offsetParent;return e||se})}}),R.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;R.fn[e]=function(n){return X(this,function(e,n,o){var r;if(b(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===o)return r?r[t]:e[n];r?r.scrollTo(i?r.pageXOffset:o,i?o:r.pageYOffset):e[n]=o},e,n,arguments.length)}}),R.each(["top","left"],function(e,t){R.cssHooks[t]=Xe(v.pixelPosition,function(e,i){if(i)return i=qe(e,t),Le.test(i)?R(e).position()[t]+"px":i})}),R.each({Height:"height",Width:"width"},function(e,t){R.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){R.fn[n]=function(o,r){var a=arguments.length&&(i||"boolean"!=typeof o),s=i||(!0===o||!0===r?"margin":"border");return X(this,function(t,i,o){var r;return b(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===o?R.css(t,i,s):R.style(t,i,o,s)},t,a?o:void 0,a)}})}),R.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){R.fn[t]=function(e){return this.on(t,e)}}),R.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),R.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){R.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});var Kt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;R.proxy=function(e,t){var i,n,o;if("string"==typeof t&&(i=e[t],t=e,e=i),y(e))return n=l.call(arguments,2),o=function(){return e.apply(t||this,n.concat(l.call(arguments)))},o.guid=e.guid=e.guid||R.guid++,o},R.holdReady=function(e){e?R.readyWait++:R.ready(!0)},R.isArray=Array.isArray,R.parseJSON=JSON.parse,R.nodeName=O,R.isFunction=y,R.isWindow=b,R.camelCase=K,R.type=D,R.now=Date.now,R.isNumeric=function(e){var t=R.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},R.trim=function(e){return null==e?"":(e+"").replace(Kt,"")},i=[],void 0===(n=(function(){return R}).apply(t,i))||(e.exports=n);var Jt=o.jQuery,Yt=o.$;return R.noConflict=function(e){return o.$===R&&(o.$=Yt),e&&o.jQuery===R&&(o.jQuery=Jt),R},void 0===r&&(o.jQuery=o.$=R),R})},"./node_modules/underscore/modules/_baseCreate.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/isObject.js"),o=i("./node_modules/underscore/modules/_setup.js");function r(e){if(!(0,n.default)(e))return{};if(o.nativeCreate)return(0,o.nativeCreate)(e);var t=function(){};t.prototype=e;var i=new t;return t.prototype=null,i}},"./node_modules/underscore/modules/_baseIteratee.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/underscore/modules/identity.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/isObject.js"),a=i("./node_modules/underscore/modules/isArray.js"),s=i("./node_modules/underscore/modules/matcher.js"),l=i("./node_modules/underscore/modules/property.js"),d=i("./node_modules/underscore/modules/_optimizeCb.js");function c(e,t,i){return null==e?n.default:(0,o.default)(e)?(0,d.default)(e,t,i):(0,r.default)(e)&&!(0,a.default)(e)?(0,s.default)(e):(0,l.default)(e)}},"./node_modules/underscore/modules/_cb.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/_baseIteratee.js"),r=i("./node_modules/underscore/modules/iteratee.js");function a(e,t,i){return n.default.iteratee!==r.default?n.default.iteratee(e,t):(0,o.default)(e,t,i)}},"./node_modules/underscore/modules/_chainResult.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/underscore.js");function o(e,t){return e._chain?(0,n.default)(t).chain():t}},"./node_modules/underscore/modules/_collectNonEnumProps.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/_has.js");function a(e,t){t=function(e){for(var t={},i=e.length,n=0;n<i;++n)t[e[n]]=!0;return{contains:function(e){return!0===t[e]},push:function(i){return t[i]=!0,e.push(i)}}}(t);var i=n.nonEnumerableProps.length,a=e.constructor,s=(0,o.default)(a)&&a.prototype||n.ObjProto,l="constructor";for((0,r.default)(e,l)&&!t.contains(l)&&t.push(l);i--;)(l=n.nonEnumerableProps[i])in e&&e[l]!==s[l]&&!t.contains(l)&&t.push(l)}},"./node_modules/underscore/modules/_createAssigner.js":(e,t,i)=>{"use strict";function n(e,t){return function(i){var n=arguments.length;if(t&&(i=Object(i)),n<2||null==i)return i;for(var o=1;o<n;o++)for(var r=arguments[o],a=e(r),s=a.length,l=0;l<s;l++){var d=a[l];t&&void 0!==i[d]||(i[d]=r[d])}return i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/_createEscaper.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/keys.js");function o(e){var t=function(t){return e[t]},i="(?:"+(0,n.default)(e).join("|")+")",o=RegExp(i),r=RegExp(i,"g");return function(e){return e=null==e?"":""+e,o.test(e)?e.replace(r,t):e}}},"./node_modules/underscore/modules/_createIndexFinder.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_getLength.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=i("./node_modules/underscore/modules/isNaN.js");function a(e,t,i){return function(a,s,l){var d=0,c=(0,n.default)(a);if("number"==typeof l)e>0?d=l>=0?l:Math.max(l+c,d):c=l>=0?Math.min(l+1,c):l+c+1;else if(i&&l&&c)return a[l=i(a,s)]===s?l:-1;if(s!=s)return(l=t(o.slice.call(a,d,c),r.default))>=0?l+d:-1;for(l=e>0?d:c-1;l>=0&&l<c;l+=e)if(a[l]===s)return l;return-1}}},"./node_modules/underscore/modules/_createPredicateIndexFinder.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/_getLength.js");function r(e){return function(t,i,r){i=(0,n.default)(i,r);for(var a=(0,o.default)(t),s=e>0?0:a-1;s>=0&&s<a;s+=e)if(i(t[s],s,t))return s;return-1}}},"./node_modules/underscore/modules/_createReduce.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/keys.js"),r=i("./node_modules/underscore/modules/_optimizeCb.js");function a(e){return function(t,i,a,s){var l=arguments.length>=3;return function(t,i,r,a){var s=!(0,n.default)(t)&&(0,o.default)(t),l=(s||t).length,d=e>0?0:l-1;for(a||(r=t[s?s[d]:d],d+=e);d>=0&&d<l;d+=e){var c=s?s[d]:d;r=i(r,t[c],c,t)}return r}(t,(0,r.default)(i,s,4),a,l)}}},"./node_modules/underscore/modules/_createSizePropertyCheck.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e){return function(t){var i=e(t);return"number"==typeof i&&i>=0&&i<=n.MAX_ARRAY_INDEX}}},"./node_modules/underscore/modules/_deepGet.js":(e,t,i)=>{"use strict";function n(e,t){for(var i=t.length,n=0;n<i;n++){if(null==e)return;e=e[t[n]]}return i?e:void 0}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/_escapeMap.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}},"./node_modules/underscore/modules/_executeBound.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_baseCreate.js"),o=i("./node_modules/underscore/modules/isObject.js");function r(e,t,i,r,a){if(!(r instanceof t))return e.apply(i,a);var s=(0,n.default)(e.prototype),l=e.apply(s,a);return(0,o.default)(l)?l:s}},"./node_modules/underscore/modules/_flatten.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/_getLength.js"),o=i("./node_modules/underscore/modules/_isArrayLike.js"),r=i("./node_modules/underscore/modules/isArray.js"),a=i("./node_modules/underscore/modules/isArguments.js");function s(e,t,i,l){if(l=l||[],t||0===t){if(t<=0)return l.concat(e)}else t=1/0;for(var d=l.length,c=0,p=(0,n.default)(e);c<p;c++){var u=e[c];if((0,o.default)(u)&&((0,r.default)(u)||(0,a.default)(u)))if(t>1)s(u,t-1,i,l),d=l.length;else for(var m=0,f=u.length;m<f;)l[d++]=u[m++];else i||(l[d++]=u)}return l}},"./node_modules/underscore/modules/_getByteLength.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_shallowProperty.js").default)("byteLength")},"./node_modules/underscore/modules/_getLength.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_shallowProperty.js").default)("length")},"./node_modules/underscore/modules/_group.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/each.js");function r(e,t){return function(i,r,a){var s=t?[[],[]]:{};return r=(0,n.default)(r,a),(0,o.default)(i,function(t,n){var o=r(t,n,i);e(s,t,o)}),s}}},"./node_modules/underscore/modules/_has.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e,t){return null!=e&&n.hasOwnProperty.call(e,t)}},"./node_modules/underscore/modules/_hasObjectTag.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("Object")},"./node_modules/underscore/modules/_isArrayLike.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createSizePropertyCheck.js"),o=i("./node_modules/underscore/modules/_getLength.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/_isBufferLike.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createSizePropertyCheck.js"),o=i("./node_modules/underscore/modules/_getByteLength.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/_keyInObj.js":(e,t,i)=>{"use strict";function n(e,t,i){return t in i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/_methodFingerprint.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ie11fingerprint:()=>a,mapMethods:()=>c,weakMapMethods:()=>p,setMethods:()=>u});var n=i("./node_modules/underscore/modules/_getLength.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/allKeys.js");function a(e){var t=(0,n.default)(e);return function(i){if(null==i)return!1;var a=(0,r.default)(i);if((0,n.default)(a))return!1;for(var l=0;l<t;l++)if(!(0,o.default)(i[e[l]]))return!1;return e!==p||!(0,o.default)(i[s])}}var s="forEach",l=["clear","delete"],d=["get","has","set"],c=l.concat(s,d),p=l.concat(d),u=["add"].concat(l,s,"has")},"./node_modules/underscore/modules/_optimizeCb.js":(e,t,i)=>{"use strict";function n(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return function(){return e.apply(t,arguments)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/_setup.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{VERSION:()=>n,root:()=>o,ArrayProto:()=>r,ObjProto:()=>a,SymbolProto:()=>s,push:()=>l,slice:()=>d,toString:()=>c,hasOwnProperty:()=>p,supportsArrayBuffer:()=>u,supportsDataView:()=>m,nativeIsArray:()=>f,nativeKeys:()=>h,nativeCreate:()=>g,nativeIsView:()=>v,_isNaN:()=>y,_isFinite:()=>b,hasEnumBug:()=>x,nonEnumerableProps:()=>C,MAX_ARRAY_INDEX:()=>S});var n="1.13.6",o="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},r=Array.prototype,a=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,l=r.push,d=r.slice,c=a.toString,p=a.hasOwnProperty,u="undefined"!=typeof ArrayBuffer,m="undefined"!=typeof DataView,f=Array.isArray,h=Object.keys,g=Object.create,v=u&&ArrayBuffer.isView,y=isNaN,b=isFinite,x=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1},"./node_modules/underscore/modules/_shallowProperty.js":(e,t,i)=>{"use strict";function n(e){return function(t){return null==t?void 0:t[e]}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/_stringTagBug.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{hasStringTagBug:()=>r,isIE11:()=>a});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/_hasObjectTag.js"),r=n.supportsDataView&&(0,o.default)(new DataView(new ArrayBuffer(8))),a="undefined"!=typeof Map&&(0,o.default)(new Map)},"./node_modules/underscore/modules/_tagTester.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e){var t="[object "+e+"]";return function(e){return n.toString.call(e)===t}}},"./node_modules/underscore/modules/_toBufferView.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_getByteLength.js");function o(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,(0,n.default)(e))}},"./node_modules/underscore/modules/_toPath.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/underscore.js");i("./node_modules/underscore/modules/toPath.js");function o(e){return n.default.toPath(e)}},"./node_modules/underscore/modules/_unescapeMap.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/invert.js"),o=i("./node_modules/underscore/modules/_escapeMap.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/after.js":(e,t,i)=>{"use strict";function n(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/allKeys.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/isObject.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=i("./node_modules/underscore/modules/_collectNonEnumProps.js");function a(e){if(!(0,n.default)(e))return[];var t=[];for(var i in e)t.push(i);return o.hasEnumBug&&(0,r.default)(e,t),t}},"./node_modules/underscore/modules/before.js":(e,t,i)=>{"use strict";function n(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/bind.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/_executeBound.js");const a=(0,n.default)(function(e,t,i){if(!(0,o.default)(e))throw new TypeError("Bind must be called on a function");var a=(0,n.default)(function(n){return(0,r.default)(e,a,t,this,i.concat(n))});return a})},"./node_modules/underscore/modules/bindAll.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/_flatten.js"),r=i("./node_modules/underscore/modules/bind.js");const a=(0,n.default)(function(e,t){var i=(t=(0,o.default)(t,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=t[i];e[n]=(0,r.default)(e[n],e)}return e})},"./node_modules/underscore/modules/chain.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/underscore.js");function o(e){var t=(0,n.default)(e);return t._chain=!0,t}},"./node_modules/underscore/modules/chunk.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e,t){if(null==t||t<1)return[];for(var i=[],o=0,r=e.length;o<r;)i.push(n.slice.call(e,o,o+=t));return i}},"./node_modules/underscore/modules/clone.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/isObject.js"),o=i("./node_modules/underscore/modules/isArray.js"),r=i("./node_modules/underscore/modules/extend.js");function a(e){return(0,n.default)(e)?(0,o.default)(e)?e.slice():(0,r.default)({},e):e}},"./node_modules/underscore/modules/compact.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/filter.js");function o(e){return(0,n.default)(e,Boolean)}},"./node_modules/underscore/modules/compose.js":(e,t,i)=>{"use strict";function n(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/contains.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/values.js"),r=i("./node_modules/underscore/modules/indexOf.js");function a(e,t,i,a){return(0,n.default)(e)||(e=(0,o.default)(e)),("number"!=typeof i||a)&&(i=0),(0,r.default)(e,t,i)>=0}},"./node_modules/underscore/modules/countBy.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_group.js"),o=i("./node_modules/underscore/modules/_has.js");const r=(0,n.default)(function(e,t,i){(0,o.default)(e,i)?e[i]++:e[i]=1})},"./node_modules/underscore/modules/create.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_baseCreate.js"),o=i("./node_modules/underscore/modules/extendOwn.js");function r(e,t){var i=(0,n.default)(e);return t&&(0,o.default)(i,t),i}},"./node_modules/underscore/modules/debounce.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/now.js");function r(e,t,i){var r,a,s,l,d,c=function(){var n=(0,o.default)()-a;t>n?r=setTimeout(c,t-n):(r=null,i||(l=e.apply(d,s)),r||(s=d=null))},p=(0,n.default)(function(n){return d=this,s=n,a=(0,o.default)(),r||(r=setTimeout(c,t),i&&(l=e.apply(d,s))),l});return p.cancel=function(){clearTimeout(r),r=s=d=null},p}},"./node_modules/underscore/modules/defaults.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createAssigner.js"),o=i("./node_modules/underscore/modules/allKeys.js");const r=(0,n.default)(o.default,!0)},"./node_modules/underscore/modules/defer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/partial.js"),o=i("./node_modules/underscore/modules/delay.js"),r=i("./node_modules/underscore/modules/underscore.js");const a=(0,n.default)(o.default,r.default,1)},"./node_modules/underscore/modules/delay.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/restArguments.js").default)(function(e,t,i){return setTimeout(function(){return e.apply(null,i)},t)})},"./node_modules/underscore/modules/difference.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/_flatten.js"),r=i("./node_modules/underscore/modules/filter.js"),a=i("./node_modules/underscore/modules/contains.js");const s=(0,n.default)(function(e,t){return t=(0,o.default)(t,!0,!0),(0,r.default)(e,function(e){return!(0,a.default)(t,e)})})},"./node_modules/underscore/modules/each.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_optimizeCb.js"),o=i("./node_modules/underscore/modules/_isArrayLike.js"),r=i("./node_modules/underscore/modules/keys.js");function a(e,t,i){var a,s;if(t=(0,n.default)(t,i),(0,o.default)(e))for(a=0,s=e.length;a<s;a++)t(e[a],a,e);else{var l=(0,r.default)(e);for(a=0,s=l.length;a<s;a++)t(e[l[a]],l[a],e)}return e}},"./node_modules/underscore/modules/escape.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createEscaper.js"),o=i("./node_modules/underscore/modules/_escapeMap.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/every.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/_isArrayLike.js"),r=i("./node_modules/underscore/modules/keys.js");function a(e,t,i){t=(0,n.default)(t,i);for(var a=!(0,o.default)(e)&&(0,r.default)(e),s=(a||e).length,l=0;l<s;l++){var d=a?a[l]:l;if(!t(e[d],d,e))return!1}return!0}},"./node_modules/underscore/modules/extend.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createAssigner.js"),o=i("./node_modules/underscore/modules/allKeys.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/extendOwn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createAssigner.js"),o=i("./node_modules/underscore/modules/keys.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/filter.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/each.js");function r(e,t,i){var r=[];return t=(0,n.default)(t,i),(0,o.default)(e,function(e,i,n){t(e,i,n)&&r.push(e)}),r}},"./node_modules/underscore/modules/find.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/findIndex.js"),r=i("./node_modules/underscore/modules/findKey.js");function a(e,t,i){var a=((0,n.default)(e)?o.default:r.default)(e,t,i);if(void 0!==a&&-1!==a)return e[a]}},"./node_modules/underscore/modules/findIndex.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_createPredicateIndexFinder.js").default)(1)},"./node_modules/underscore/modules/findKey.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/keys.js");function r(e,t,i){t=(0,n.default)(t,i);for(var r,a=(0,o.default)(e),s=0,l=a.length;s<l;s++)if(t(e[r=a[s]],r,e))return r}},"./node_modules/underscore/modules/findLastIndex.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_createPredicateIndexFinder.js").default)(-1)},"./node_modules/underscore/modules/findWhere.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/find.js"),o=i("./node_modules/underscore/modules/matcher.js");function r(e,t){return(0,n.default)(e,(0,o.default)(t))}},"./node_modules/underscore/modules/first.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/initial.js");function o(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[0]:(0,n.default)(e,e.length-t)}},"./node_modules/underscore/modules/flatten.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_flatten.js");function o(e,t){return(0,n.default)(e,t,!1)}},"./node_modules/underscore/modules/functions.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/isFunction.js");function o(e){var t=[];for(var i in e)(0,n.default)(e[i])&&t.push(i);return t.sort()}},"./node_modules/underscore/modules/get.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_toPath.js"),o=i("./node_modules/underscore/modules/_deepGet.js"),r=i("./node_modules/underscore/modules/isUndefined.js");function a(e,t,i){var a=(0,o.default)(e,(0,n.default)(t));return(0,r.default)(a)?i:a}},"./node_modules/underscore/modules/groupBy.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_group.js"),o=i("./node_modules/underscore/modules/_has.js");const r=(0,n.default)(function(e,t,i){(0,o.default)(e,i)?e[i].push(t):e[i]=[t]})},"./node_modules/underscore/modules/has.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_has.js"),o=i("./node_modules/underscore/modules/_toPath.js");function r(e,t){for(var i=(t=(0,o.default)(t)).length,r=0;r<i;r++){var a=t[r];if(!(0,n.default)(e,a))return!1;e=e[a]}return!!i}},"./node_modules/underscore/modules/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/index-all.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n.default});var n=i("./node_modules/underscore/modules/index-default.js"),o=i("./node_modules/underscore/modules/index.js"),r={};for(const a in o)"default"!==a&&(r[a]=()=>o[a]);i.d(t,r)},"./node_modules/underscore/modules/index-default.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/index.js"),o=(0,n.mixin)(n);o._=o;const r=o},"./node_modules/underscore/modules/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{VERSION:()=>n.VERSION,restArguments:()=>o.default,isObject:()=>r.default,isNull:()=>a.default,isUndefined:()=>s.default,isBoolean:()=>l.default,isElement:()=>d.default,isString:()=>c.default,isNumber:()=>p.default,isDate:()=>u.default,isRegExp:()=>m.default,isError:()=>f.default,isSymbol:()=>h.default,isArrayBuffer:()=>g.default,isDataView:()=>v.default,isArray:()=>y.default,isFunction:()=>b.default,isArguments:()=>x.default,isFinite:()=>C.default,isNaN:()=>S.default,isTypedArray:()=>D.default,isEmpty:()=>I.default,isMatch:()=>R.default,isEqual:()=>w.default,isMap:()=>E.default,isWeakMap:()=>F.default,isSet:()=>M.default,isWeakSet:()=>T.default,keys:()=>O.default,allKeys:()=>N.default,values:()=>A.default,pairs:()=>P.default,invert:()=>j.default,functions:()=>_.default,methods:()=>_.default,extend:()=>V.default,extendOwn:()=>k.default,assign:()=>k.default,defaults:()=>B.default,create:()=>$.default,clone:()=>L.default,tap:()=>G.default,get:()=>z.default,has:()=>U.default,mapObject:()=>q.default,identity:()=>X.default,constant:()=>W.default,noop:()=>H.default,toPath:()=>Q.default,property:()=>K.default,propertyOf:()=>J.default,matcher:()=>Y.default,matches:()=>Y.default,times:()=>Z.default,random:()=>ee.default,now:()=>te.default,escape:()=>ie.default,unescape:()=>ne.default,templateSettings:()=>oe.default,template:()=>re.default,result:()=>ae.default,uniqueId:()=>se.default,chain:()=>le.default,iteratee:()=>de.default,partial:()=>ce.default,bind:()=>pe.default,bindAll:()=>ue.default,memoize:()=>me.default,delay:()=>fe.default,defer:()=>he.default,throttle:()=>ge.default,debounce:()=>ve.default,wrap:()=>ye.default,negate:()=>be.default,compose:()=>xe.default,after:()=>Ce.default,before:()=>Se.default,once:()=>De.default,findKey:()=>Ie.default,findIndex:()=>Re.default,findLastIndex:()=>we.default,sortedIndex:()=>Ee.default,indexOf:()=>Fe.default,lastIndexOf:()=>Me.default,find:()=>Te.default,detect:()=>Te.default,findWhere:()=>Oe.default,each:()=>Ne.default,forEach:()=>Ne.default,map:()=>Ae.default,collect:()=>Ae.default,reduce:()=>Pe.default,foldl:()=>Pe.default,inject:()=>Pe.default,reduceRight:()=>je.default,foldr:()=>je.default,filter:()=>_e.default,select:()=>_e.default,reject:()=>Ve.default,every:()=>ke.default,all:()=>ke.default,some:()=>Be.default,any:()=>Be.default,contains:()=>$e.default,includes:()=>$e.default,include:()=>$e.default,invoke:()=>Le.default,pluck:()=>Ge.default,where:()=>ze.default,max:()=>Ue.default,min:()=>qe.default,shuffle:()=>Xe.default,sample:()=>We.default,sortBy:()=>He.default,groupBy:()=>Qe.default,indexBy:()=>Ke.default,countBy:()=>Je.default,partition:()=>Ye.default,toArray:()=>Ze.default,size:()=>et.default,pick:()=>tt.default,omit:()=>it.default,first:()=>nt.default,head:()=>nt.default,take:()=>nt.default,initial:()=>ot.default,last:()=>rt.default,rest:()=>at.default,tail:()=>at.default,drop:()=>at.default,compact:()=>st.default,flatten:()=>lt.default,without:()=>dt.default,uniq:()=>ct.default,unique:()=>ct.default,union:()=>pt.default,intersection:()=>ut.default,difference:()=>mt.default,unzip:()=>ft.default,transpose:()=>ft.default,zip:()=>ht.default,object:()=>gt.default,range:()=>vt.default,chunk:()=>yt.default,mixin:()=>bt.default,default:()=>xt.default});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/restArguments.js"),r=i("./node_modules/underscore/modules/isObject.js"),a=i("./node_modules/underscore/modules/isNull.js"),s=i("./node_modules/underscore/modules/isUndefined.js"),l=i("./node_modules/underscore/modules/isBoolean.js"),d=i("./node_modules/underscore/modules/isElement.js"),c=i("./node_modules/underscore/modules/isString.js"),p=i("./node_modules/underscore/modules/isNumber.js"),u=i("./node_modules/underscore/modules/isDate.js"),m=i("./node_modules/underscore/modules/isRegExp.js"),f=i("./node_modules/underscore/modules/isError.js"),h=i("./node_modules/underscore/modules/isSymbol.js"),g=i("./node_modules/underscore/modules/isArrayBuffer.js"),v=i("./node_modules/underscore/modules/isDataView.js"),y=i("./node_modules/underscore/modules/isArray.js"),b=i("./node_modules/underscore/modules/isFunction.js"),x=i("./node_modules/underscore/modules/isArguments.js"),C=i("./node_modules/underscore/modules/isFinite.js"),S=i("./node_modules/underscore/modules/isNaN.js"),D=i("./node_modules/underscore/modules/isTypedArray.js"),I=i("./node_modules/underscore/modules/isEmpty.js"),R=i("./node_modules/underscore/modules/isMatch.js"),w=i("./node_modules/underscore/modules/isEqual.js"),E=i("./node_modules/underscore/modules/isMap.js"),F=i("./node_modules/underscore/modules/isWeakMap.js"),M=i("./node_modules/underscore/modules/isSet.js"),T=i("./node_modules/underscore/modules/isWeakSet.js"),O=i("./node_modules/underscore/modules/keys.js"),N=i("./node_modules/underscore/modules/allKeys.js"),A=i("./node_modules/underscore/modules/values.js"),P=i("./node_modules/underscore/modules/pairs.js"),j=i("./node_modules/underscore/modules/invert.js"),_=i("./node_modules/underscore/modules/functions.js"),V=i("./node_modules/underscore/modules/extend.js"),k=i("./node_modules/underscore/modules/extendOwn.js"),B=i("./node_modules/underscore/modules/defaults.js"),$=i("./node_modules/underscore/modules/create.js"),L=i("./node_modules/underscore/modules/clone.js"),G=i("./node_modules/underscore/modules/tap.js"),z=i("./node_modules/underscore/modules/get.js"),U=i("./node_modules/underscore/modules/has.js"),q=i("./node_modules/underscore/modules/mapObject.js"),X=i("./node_modules/underscore/modules/identity.js"),W=i("./node_modules/underscore/modules/constant.js"),H=i("./node_modules/underscore/modules/noop.js"),Q=i("./node_modules/underscore/modules/toPath.js"),K=i("./node_modules/underscore/modules/property.js"),J=i("./node_modules/underscore/modules/propertyOf.js"),Y=i("./node_modules/underscore/modules/matcher.js"),Z=i("./node_modules/underscore/modules/times.js"),ee=i("./node_modules/underscore/modules/random.js"),te=i("./node_modules/underscore/modules/now.js"),ie=i("./node_modules/underscore/modules/escape.js"),ne=i("./node_modules/underscore/modules/unescape.js"),oe=i("./node_modules/underscore/modules/templateSettings.js"),re=i("./node_modules/underscore/modules/template.js"),ae=i("./node_modules/underscore/modules/result.js"),se=i("./node_modules/underscore/modules/uniqueId.js"),le=i("./node_modules/underscore/modules/chain.js"),de=i("./node_modules/underscore/modules/iteratee.js"),ce=i("./node_modules/underscore/modules/partial.js"),pe=i("./node_modules/underscore/modules/bind.js"),ue=i("./node_modules/underscore/modules/bindAll.js"),me=i("./node_modules/underscore/modules/memoize.js"),fe=i("./node_modules/underscore/modules/delay.js"),he=i("./node_modules/underscore/modules/defer.js"),ge=i("./node_modules/underscore/modules/throttle.js"),ve=i("./node_modules/underscore/modules/debounce.js"),ye=i("./node_modules/underscore/modules/wrap.js"),be=i("./node_modules/underscore/modules/negate.js"),xe=i("./node_modules/underscore/modules/compose.js"),Ce=i("./node_modules/underscore/modules/after.js"),Se=i("./node_modules/underscore/modules/before.js"),De=i("./node_modules/underscore/modules/once.js"),Ie=i("./node_modules/underscore/modules/findKey.js"),Re=i("./node_modules/underscore/modules/findIndex.js"),we=i("./node_modules/underscore/modules/findLastIndex.js"),Ee=i("./node_modules/underscore/modules/sortedIndex.js"),Fe=i("./node_modules/underscore/modules/indexOf.js"),Me=i("./node_modules/underscore/modules/lastIndexOf.js"),Te=i("./node_modules/underscore/modules/find.js"),Oe=i("./node_modules/underscore/modules/findWhere.js"),Ne=i("./node_modules/underscore/modules/each.js"),Ae=i("./node_modules/underscore/modules/map.js"),Pe=i("./node_modules/underscore/modules/reduce.js"),je=i("./node_modules/underscore/modules/reduceRight.js"),_e=i("./node_modules/underscore/modules/filter.js"),Ve=i("./node_modules/underscore/modules/reject.js"),ke=i("./node_modules/underscore/modules/every.js"),Be=i("./node_modules/underscore/modules/some.js"),$e=i("./node_modules/underscore/modules/contains.js"),Le=i("./node_modules/underscore/modules/invoke.js"),Ge=i("./node_modules/underscore/modules/pluck.js"),ze=i("./node_modules/underscore/modules/where.js"),Ue=i("./node_modules/underscore/modules/max.js"),qe=i("./node_modules/underscore/modules/min.js"),Xe=i("./node_modules/underscore/modules/shuffle.js"),We=i("./node_modules/underscore/modules/sample.js"),He=i("./node_modules/underscore/modules/sortBy.js"),Qe=i("./node_modules/underscore/modules/groupBy.js"),Ke=i("./node_modules/underscore/modules/indexBy.js"),Je=i("./node_modules/underscore/modules/countBy.js"),Ye=i("./node_modules/underscore/modules/partition.js"),Ze=i("./node_modules/underscore/modules/toArray.js"),et=i("./node_modules/underscore/modules/size.js"),tt=i("./node_modules/underscore/modules/pick.js"),it=i("./node_modules/underscore/modules/omit.js"),nt=i("./node_modules/underscore/modules/first.js"),ot=i("./node_modules/underscore/modules/initial.js"),rt=i("./node_modules/underscore/modules/last.js"),at=i("./node_modules/underscore/modules/rest.js"),st=i("./node_modules/underscore/modules/compact.js"),lt=i("./node_modules/underscore/modules/flatten.js"),dt=i("./node_modules/underscore/modules/without.js"),ct=i("./node_modules/underscore/modules/uniq.js"),pt=i("./node_modules/underscore/modules/union.js"),ut=i("./node_modules/underscore/modules/intersection.js"),mt=i("./node_modules/underscore/modules/difference.js"),ft=i("./node_modules/underscore/modules/unzip.js"),ht=i("./node_modules/underscore/modules/zip.js"),gt=i("./node_modules/underscore/modules/object.js"),vt=i("./node_modules/underscore/modules/range.js"),yt=i("./node_modules/underscore/modules/chunk.js"),bt=i("./node_modules/underscore/modules/mixin.js"),xt=i("./node_modules/underscore/modules/underscore-array-methods.js")},"./node_modules/underscore/modules/indexBy.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_group.js").default)(function(e,t,i){e[i]=t})},"./node_modules/underscore/modules/indexOf.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/sortedIndex.js"),o=i("./node_modules/underscore/modules/findIndex.js");const r=(0,i("./node_modules/underscore/modules/_createIndexFinder.js").default)(1,o.default,n.default)},"./node_modules/underscore/modules/initial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e,t,i){return n.slice.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))}},"./node_modules/underscore/modules/intersection.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_getLength.js"),o=i("./node_modules/underscore/modules/contains.js");function r(e){for(var t=[],i=arguments.length,r=0,a=(0,n.default)(e);r<a;r++){var s=e[r];if(!(0,o.default)(t,s)){var l;for(l=1;l<i&&(0,o.default)(arguments[l],s);l++);l===i&&t.push(s)}}return t}},"./node_modules/underscore/modules/invert.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/keys.js");function o(e){for(var t={},i=(0,n.default)(e),o=0,r=i.length;o<r;o++)t[e[i[o]]]=i[o];return t}},"./node_modules/underscore/modules/invoke.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/map.js"),a=i("./node_modules/underscore/modules/_deepGet.js"),s=i("./node_modules/underscore/modules/_toPath.js");const l=(0,n.default)(function(e,t,i){var n,l;return(0,o.default)(t)?l=t:(t=(0,s.default)(t),n=t.slice(0,-1),t=t[t.length-1]),(0,r.default)(e,function(e){var o=l;if(!o){if(n&&n.length&&(e=(0,a.default)(e,n)),null==e)return;o=e[t]}return null==o?o:o.apply(e,i)})})},"./node_modules/underscore/modules/isArguments.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/_has.js"),r=(0,n.default)("Arguments");!function(){r(arguments)||(r=function(e){return(0,o.default)(e,"callee")})}();const a=r},"./node_modules/underscore/modules/isArray.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/_tagTester.js");const r=n.nativeIsArray||(0,o.default)("Array")},"./node_modules/underscore/modules/isArrayBuffer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("ArrayBuffer")},"./node_modules/underscore/modules/isBoolean.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e){return!0===e||!1===e||"[object Boolean]"===n.toString.call(e)}},"./node_modules/underscore/modules/isDataView.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/isArrayBuffer.js"),a=i("./node_modules/underscore/modules/_stringTagBug.js"),s=(0,n.default)("DataView");const l=a.hasStringTagBug?function(e){return null!=e&&(0,o.default)(e.getInt8)&&(0,r.default)(e.buffer)}:s},"./node_modules/underscore/modules/isDate.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("Date")},"./node_modules/underscore/modules/isElement.js":(e,t,i)=>{"use strict";function n(e){return!(!e||1!==e.nodeType)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/isEmpty.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/_getLength.js"),o=i("./node_modules/underscore/modules/isArray.js"),r=i("./node_modules/underscore/modules/isString.js"),a=i("./node_modules/underscore/modules/isArguments.js"),s=i("./node_modules/underscore/modules/keys.js");function l(e){if(null==e)return!0;var t=(0,n.default)(e);return"number"==typeof t&&((0,o.default)(e)||(0,r.default)(e)||(0,a.default)(e))?0===t:0===(0,n.default)((0,s.default)(e))}},"./node_modules/underscore/modules/isEqual.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=i("./node_modules/underscore/modules/_getByteLength.js"),a=i("./node_modules/underscore/modules/isTypedArray.js"),s=i("./node_modules/underscore/modules/isFunction.js"),l=i("./node_modules/underscore/modules/_stringTagBug.js"),d=i("./node_modules/underscore/modules/isDataView.js"),c=i("./node_modules/underscore/modules/keys.js"),p=i("./node_modules/underscore/modules/_has.js"),u=i("./node_modules/underscore/modules/_toBufferView.js"),m="[object DataView]";function f(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&h(e,t,i,n)}function h(e,t,i,g){e instanceof n.default&&(e=e._wrapped),t instanceof n.default&&(t=t._wrapped);var v=o.toString.call(e);if(v!==o.toString.call(t))return!1;if(l.hasStringTagBug&&"[object Object]"==v&&(0,d.default)(e)){if(!(0,d.default)(t))return!1;v=m}switch(v){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return o.SymbolProto.valueOf.call(e)===o.SymbolProto.valueOf.call(t);case"[object ArrayBuffer]":case m:return h((0,u.default)(e),(0,u.default)(t),i,g)}var y="[object Array]"===v;if(!y&&(0,a.default)(e)){if((0,r.default)(e)!==(0,r.default)(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;y=!0}if(!y){if("object"!=typeof e||"object"!=typeof t)return!1;var b=e.constructor,x=t.constructor;if(b!==x&&!((0,s.default)(b)&&b instanceof b&&(0,s.default)(x)&&x instanceof x)&&"constructor"in e&&"constructor"in t)return!1}g=g||[];for(var C=(i=i||[]).length;C--;)if(i[C]===e)return g[C]===t;if(i.push(e),g.push(t),y){if((C=e.length)!==t.length)return!1;for(;C--;)if(!f(e[C],t[C],i,g))return!1}else{var S,D=(0,c.default)(e);if(C=D.length,(0,c.default)(t).length!==C)return!1;for(;C--;)if(S=D[C],!(0,p.default)(t,S)||!f(e[S],t[S],i,g))return!1}return i.pop(),g.pop(),!0}function g(e,t){return f(e,t)}},"./node_modules/underscore/modules/isError.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("Error")},"./node_modules/underscore/modules/isFinite.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/isSymbol.js");function r(e){return!(0,o.default)(e)&&(0,n._isFinite)(e)&&!isNaN(parseFloat(e))}},"./node_modules/underscore/modules/isFunction.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=(0,n.default)("Function"),a=o.root.document&&o.root.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof a&&(r=function(e){return"function"==typeof e||!1});const s=r},"./node_modules/underscore/modules/isMap.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/_stringTagBug.js"),r=i("./node_modules/underscore/modules/_methodFingerprint.js");const a=o.isIE11?(0,r.ie11fingerprint)(r.mapMethods):(0,n.default)("Map")},"./node_modules/underscore/modules/isMatch.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/keys.js");function o(e,t){var i=(0,n.default)(t),o=i.length;if(null==e)return!o;for(var r=Object(e),a=0;a<o;a++){var s=i[a];if(t[s]!==r[s]||!(s in r))return!1}return!0}},"./node_modules/underscore/modules/isNaN.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/isNumber.js");function r(e){return(0,o.default)(e)&&(0,n._isNaN)(e)}},"./node_modules/underscore/modules/isNull.js":(e,t,i)=>{"use strict";function n(e){return null===e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/isNumber.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("Number")},"./node_modules/underscore/modules/isObject.js":(e,t,i)=>{"use strict";function n(e){var t=typeof e;return"function"===t||"object"===t&&!!e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/isRegExp.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("RegExp")},"./node_modules/underscore/modules/isSet.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/_stringTagBug.js"),r=i("./node_modules/underscore/modules/_methodFingerprint.js");const a=o.isIE11?(0,r.ie11fingerprint)(r.setMethods):(0,n.default)("Set")},"./node_modules/underscore/modules/isString.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("String")},"./node_modules/underscore/modules/isSymbol.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("Symbol")},"./node_modules/underscore/modules/isTypedArray.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/_setup.js"),o=i("./node_modules/underscore/modules/isDataView.js"),r=i("./node_modules/underscore/modules/constant.js"),a=i("./node_modules/underscore/modules/_isBufferLike.js"),s=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const l=n.supportsArrayBuffer?function(e){return n.nativeIsView?(0,n.nativeIsView)(e)&&!(0,o.default)(e):(0,a.default)(e)&&s.test(n.toString.call(e))}:(0,r.default)(!1)},"./node_modules/underscore/modules/isUndefined.js":(e,t,i)=>{"use strict";function n(e){return void 0===e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/isWeakMap.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_tagTester.js"),o=i("./node_modules/underscore/modules/_stringTagBug.js"),r=i("./node_modules/underscore/modules/_methodFingerprint.js");const a=o.isIE11?(0,r.ie11fingerprint)(r.weakMapMethods):(0,n.default)("WeakMap")},"./node_modules/underscore/modules/isWeakSet.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_tagTester.js").default)("WeakSet")},"./node_modules/underscore/modules/iteratee.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/_baseIteratee.js");function r(e,t){return(0,o.default)(e,t,1/0)}n.default.iteratee=r},"./node_modules/underscore/modules/keys.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/isObject.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=i("./node_modules/underscore/modules/_has.js"),a=i("./node_modules/underscore/modules/_collectNonEnumProps.js");function s(e){if(!(0,n.default)(e))return[];if(o.nativeKeys)return(0,o.nativeKeys)(e);var t=[];for(var i in e)(0,r.default)(e,i)&&t.push(i);return o.hasEnumBug&&(0,a.default)(e,t),t}},"./node_modules/underscore/modules/last.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/rest.js");function o(e,t,i){return null==e||e.length<1?null==t||i?void 0:[]:null==t||i?e[e.length-1]:(0,n.default)(e,Math.max(0,e.length-t))}},"./node_modules/underscore/modules/lastIndexOf.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/findLastIndex.js");const o=(0,i("./node_modules/underscore/modules/_createIndexFinder.js").default)(-1,n.default)},"./node_modules/underscore/modules/map.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/_isArrayLike.js"),r=i("./node_modules/underscore/modules/keys.js");function a(e,t,i){t=(0,n.default)(t,i);for(var a=!(0,o.default)(e)&&(0,r.default)(e),s=(a||e).length,l=Array(s),d=0;d<s;d++){var c=a?a[d]:d;l[d]=t(e[c],c,e)}return l}},"./node_modules/underscore/modules/mapObject.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/keys.js");function r(e,t,i){t=(0,n.default)(t,i);for(var r=(0,o.default)(e),a=r.length,s={},l=0;l<a;l++){var d=r[l];s[d]=t(e[d],d,e)}return s}},"./node_modules/underscore/modules/matcher.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/extendOwn.js"),o=i("./node_modules/underscore/modules/isMatch.js");function r(e){return e=(0,n.default)({},e),function(t){return(0,o.default)(t,e)}}},"./node_modules/underscore/modules/max.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/values.js"),r=i("./node_modules/underscore/modules/_cb.js"),a=i("./node_modules/underscore/modules/each.js");function s(e,t,i){var s,l,d=-1/0,c=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var p=0,u=(e=(0,n.default)(e)?e:(0,o.default)(e)).length;p<u;p++)null!=(s=e[p])&&s>d&&(d=s);else t=(0,r.default)(t,i),(0,a.default)(e,function(e,i,n){((l=t(e,i,n))>c||l===-1/0&&d===-1/0)&&(d=e,c=l)});return d}},"./node_modules/underscore/modules/memoize.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_has.js");function o(e,t){var i=function(o){var r=i.cache,a=""+(t?t.apply(this,arguments):o);return(0,n.default)(r,a)||(r[a]=e.apply(this,arguments)),r[a]};return i.cache={},i}},"./node_modules/underscore/modules/min.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/values.js"),r=i("./node_modules/underscore/modules/_cb.js"),a=i("./node_modules/underscore/modules/each.js");function s(e,t,i){var s,l,d=1/0,c=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var p=0,u=(e=(0,n.default)(e)?e:(0,o.default)(e)).length;p<u;p++)null!=(s=e[p])&&s<d&&(d=s);else t=(0,r.default)(t,i),(0,a.default)(e,function(e,i,n){((l=t(e,i,n))<c||l===1/0&&d===1/0)&&(d=e,c=l)});return d}},"./node_modules/underscore/modules/mixin.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/each.js"),r=i("./node_modules/underscore/modules/functions.js"),a=i("./node_modules/underscore/modules/_setup.js"),s=i("./node_modules/underscore/modules/_chainResult.js");function l(e){return(0,o.default)((0,r.default)(e),function(t){var i=n.default[t]=e[t];n.default.prototype[t]=function(){var e=[this._wrapped];return a.push.apply(e,arguments),(0,s.default)(this,i.apply(n.default,e))}}),n.default}},"./node_modules/underscore/modules/negate.js":(e,t,i)=>{"use strict";function n(e){return function(){return!e.apply(this,arguments)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/noop.js":(e,t,i)=>{"use strict";function n(){}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/now.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=Date.now||function(){return(new Date).getTime()}},"./node_modules/underscore/modules/object.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_getLength.js");function o(e,t){for(var i={},o=0,r=(0,n.default)(e);o<r;o++)t?i[e[o]]=t[o]:i[e[o][0]]=e[o][1];return i}},"./node_modules/underscore/modules/omit.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/negate.js"),a=i("./node_modules/underscore/modules/map.js"),s=i("./node_modules/underscore/modules/_flatten.js"),l=i("./node_modules/underscore/modules/contains.js"),d=i("./node_modules/underscore/modules/pick.js");const c=(0,n.default)(function(e,t){var i,n=t[0];return(0,o.default)(n)?(n=(0,r.default)(n),t.length>1&&(i=t[1])):(t=(0,a.default)((0,s.default)(t,!1,!1),String),n=function(e,i){return!(0,l.default)(t,i)}),(0,d.default)(e,n,i)})},"./node_modules/underscore/modules/once.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/partial.js"),o=i("./node_modules/underscore/modules/before.js");const r=(0,n.default)(o.default,2)},"./node_modules/underscore/modules/pairs.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/keys.js");function o(e){for(var t=(0,n.default)(e),i=t.length,o=Array(i),r=0;r<i;r++)o[r]=[t[r],e[t[r]]];return o}},"./node_modules/underscore/modules/partial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/_executeBound.js"),r=i("./node_modules/underscore/modules/underscore.js"),a=(0,n.default)(function(e,t){var i=a.placeholder,n=function(){for(var r=0,a=t.length,s=Array(a),l=0;l<a;l++)s[l]=t[l]===i?arguments[r++]:t[l];for(;r<arguments.length;)s.push(arguments[r++]);return(0,o.default)(e,n,this,this,s)};return n});a.placeholder=r.default;const s=a},"./node_modules/underscore/modules/partition.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_group.js").default)(function(e,t,i){e[i?0:1].push(t)},!0)},"./node_modules/underscore/modules/pick.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/isFunction.js"),r=i("./node_modules/underscore/modules/_optimizeCb.js"),a=i("./node_modules/underscore/modules/allKeys.js"),s=i("./node_modules/underscore/modules/_keyInObj.js"),l=i("./node_modules/underscore/modules/_flatten.js");const d=(0,n.default)(function(e,t){var i={},n=t[0];if(null==e)return i;(0,o.default)(n)?(t.length>1&&(n=(0,r.default)(n,t[1])),t=(0,a.default)(e)):(n=s.default,t=(0,l.default)(t,!1,!1),e=Object(e));for(var d=0,c=t.length;d<c;d++){var p=t[d],u=e[p];n(u,p,e)&&(i[p]=u)}return i})},"./node_modules/underscore/modules/pluck.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/map.js"),o=i("./node_modules/underscore/modules/property.js");function r(e,t){return(0,n.default)(e,(0,o.default)(t))}},"./node_modules/underscore/modules/property.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_deepGet.js"),o=i("./node_modules/underscore/modules/_toPath.js");function r(e){return e=(0,o.default)(e),function(t){return(0,n.default)(t,e)}}},"./node_modules/underscore/modules/propertyOf.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/noop.js"),o=i("./node_modules/underscore/modules/get.js");function r(e){return null==e?n.default:function(t){return(0,o.default)(e,t)}}},"./node_modules/underscore/modules/random.js":(e,t,i)=>{"use strict";function n(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/range.js":(e,t,i)=>{"use strict";function n(e,t,i){null==t&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),r=0;r<n;r++,e+=i)o[r]=e;return o}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/reduce.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_createReduce.js").default)(1)},"./node_modules/underscore/modules/reduceRight.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/underscore/modules/_createReduce.js").default)(-1)},"./node_modules/underscore/modules/reject.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/filter.js"),o=i("./node_modules/underscore/modules/negate.js"),r=i("./node_modules/underscore/modules/_cb.js");function a(e,t,i){return(0,n.default)(e,(0,o.default)((0,r.default)(t)),i)}},"./node_modules/underscore/modules/rest.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e,t,i){return n.slice.call(e,null==t||i?1:t)}},"./node_modules/underscore/modules/restArguments.js":(e,t,i)=>{"use strict";function n(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),n=Array(i),o=0;o<i;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var r=Array(t+1);for(o=0;o<t;o++)r[o]=arguments[o];return r[t]=n,e.apply(this,r)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/result.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/isFunction.js"),o=i("./node_modules/underscore/modules/_toPath.js");function r(e,t,i){var r=(t=(0,o.default)(t)).length;if(!r)return(0,n.default)(i)?i.call(e):i;for(var a=0;a<r;a++){var s=null==e?void 0:e[t[a]];void 0===s&&(s=i,a=r),e=(0,n.default)(s)?s.call(e):s}return e}},"./node_modules/underscore/modules/sample.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/values.js"),r=i("./node_modules/underscore/modules/_getLength.js"),a=i("./node_modules/underscore/modules/random.js"),s=i("./node_modules/underscore/modules/toArray.js");function l(e,t,i){if(null==t||i)return(0,n.default)(e)||(e=(0,o.default)(e)),e[(0,a.default)(e.length-1)];var l=(0,s.default)(e),d=(0,r.default)(l);t=Math.max(Math.min(t,d),0);for(var c=d-1,p=0;p<t;p++){var u=(0,a.default)(p,c),m=l[p];l[p]=l[u],l[u]=m}return l.slice(0,t)}},"./node_modules/underscore/modules/shuffle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/sample.js");function o(e){return(0,n.default)(e,1/0)}},"./node_modules/underscore/modules/size.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_isArrayLike.js"),o=i("./node_modules/underscore/modules/keys.js");function r(e){return null==e?0:(0,n.default)(e)?e.length:(0,o.default)(e).length}},"./node_modules/underscore/modules/some.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/_isArrayLike.js"),r=i("./node_modules/underscore/modules/keys.js");function a(e,t,i){t=(0,n.default)(t,i);for(var a=!(0,o.default)(e)&&(0,r.default)(e),s=(a||e).length,l=0;l<s;l++){var d=a?a[l]:l;if(t(e[d],d,e))return!0}return!1}},"./node_modules/underscore/modules/sortBy.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/pluck.js"),r=i("./node_modules/underscore/modules/map.js");function a(e,t,i){var a=0;return t=(0,n.default)(t,i),(0,o.default)((0,r.default)(e,function(e,i,n){return{value:e,index:a++,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")}},"./node_modules/underscore/modules/sortedIndex.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_cb.js"),o=i("./node_modules/underscore/modules/_getLength.js");function r(e,t,i,r){for(var a=(i=(0,n.default)(i,r,1))(t),s=0,l=(0,o.default)(e);s<l;){var d=Math.floor((s+l)/2);i(e[d])<a?s=d+1:l=d}return s}},"./node_modules/underscore/modules/tap.js":(e,t,i)=>{"use strict";function n(e,t){return t(e),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/underscore/modules/template.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/underscore/modules/defaults.js"),o=i("./node_modules/underscore/modules/underscore.js"),r=(i("./node_modules/underscore/modules/templateSettings.js"),/(.)^/),a={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},s=/\\|'|\r|\n|\u2028|\u2029/g;function l(e){return"\\"+a[e]}var d=/^\s*(\w|\$)+\s*$/;function c(e,t,i){!t&&i&&(t=i),t=(0,n.default)({},t,o.default.templateSettings);var a=RegExp([(t.escape||r).source,(t.interpolate||r).source,(t.evaluate||r).source].join("|")+"|$","g"),c=0,p="__p+='";e.replace(a,function(t,i,n,o,r){return p+=e.slice(c,r).replace(s,l),c=r+t.length,i?p+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?p+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(p+="';\n"+o+"\n__p+='"),t}),p+="';\n";var u,m=t.variable;if(m){if(!d.test(m))throw new Error("variable is not a bare identifier: "+m)}else p="with(obj||{}){\n"+p+"}\n",m="obj";p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{u=new Function(m,"_",p)}catch(h){throw h.source=p,h}var f=function(e){return u.call(this,e,o.default)};return f.source="function("+m+"){\n"+p+"}",f}},"./node_modules/underscore/modules/templateSettings.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=i("./node_modules/underscore/modules/underscore.js").default.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g}},"./node_modules/underscore/modules/throttle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/now.js");function o(e,t,i){var o,r,a,s,l=0;i||(i={});var d=function(){l=!1===i.leading?0:(0,n.default)(),o=null,s=e.apply(r,a),o||(r=a=null)},c=function(){var c=(0,n.default)();l||!1!==i.leading||(l=c);var p=t-(c-l);return r=this,a=arguments,p<=0||p>t?(o&&(clearTimeout(o),o=null),l=c,s=e.apply(r,a),o||(r=a=null)):o||!1===i.trailing||(o=setTimeout(d,p)),s};return c.cancel=function(){clearTimeout(o),l=0,o=r=a=null},c}},"./node_modules/underscore/modules/times.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_optimizeCb.js");function o(e,t,i){var o=Array(Math.max(0,e));t=(0,n.default)(t,i,1);for(var r=0;r<e;r++)o[r]=t(r);return o}},"./node_modules/underscore/modules/toArray.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/underscore/modules/isArray.js"),o=i("./node_modules/underscore/modules/_setup.js"),r=i("./node_modules/underscore/modules/isString.js"),a=i("./node_modules/underscore/modules/_isArrayLike.js"),s=i("./node_modules/underscore/modules/map.js"),l=i("./node_modules/underscore/modules/identity.js"),d=i("./node_modules/underscore/modules/values.js"),c=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function p(e){return e?(0,n.default)(e)?o.slice.call(e):(0,r.default)(e)?e.match(c):(0,a.default)(e)?(0,s.default)(e,l.default):(0,d.default)(e):[]}},"./node_modules/underscore/modules/toPath.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/isArray.js");function r(e){return(0,o.default)(e)?e:[e]}n.default.toPath=r},"./node_modules/underscore/modules/underscore-array-methods.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/underscore.js"),o=i("./node_modules/underscore/modules/each.js"),r=i("./node_modules/underscore/modules/_setup.js"),a=i("./node_modules/underscore/modules/_chainResult.js");(0,o.default)(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r.ArrayProto[e];n.default.prototype[e]=function(){var i=this._wrapped;return null!=i&&(t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0]),(0,a.default)(this,i)}}),(0,o.default)(["concat","join","slice"],function(e){var t=r.ArrayProto[e];n.default.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),(0,a.default)(this,e)}});const s=n.default},"./node_modules/underscore/modules/underscore.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/_setup.js");function o(e){return e instanceof o?e:this instanceof o?void(this._wrapped=e):new o(e)}o.VERSION=n.VERSION,o.prototype.value=function(){return this._wrapped},o.prototype.valueOf=o.prototype.toJSON=o.prototype.value,o.prototype.toString=function(){return String(this._wrapped)}},"./node_modules/underscore/modules/unescape.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/_createEscaper.js"),o=i("./node_modules/underscore/modules/_unescapeMap.js");const r=(0,n.default)(o.default)},"./node_modules/underscore/modules/union.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/uniq.js"),r=i("./node_modules/underscore/modules/_flatten.js");const a=(0,n.default)(function(e){return(0,o.default)((0,r.default)(e,!0,!0))})},"./node_modules/underscore/modules/uniq.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/underscore/modules/isBoolean.js"),o=i("./node_modules/underscore/modules/_cb.js"),r=i("./node_modules/underscore/modules/_getLength.js"),a=i("./node_modules/underscore/modules/contains.js");function s(e,t,i,s){(0,n.default)(t)||(s=i,i=t,t=!1),null!=i&&(i=(0,o.default)(i,s));for(var l=[],d=[],c=0,p=(0,r.default)(e);c<p;c++){var u=e[c],m=i?i(u,c,e):u;t&&!i?(c&&d===m||l.push(u),d=m):i?(0,a.default)(d,m)||(d.push(m),l.push(u)):(0,a.default)(l,u)||l.push(u)}return l}},"./node_modules/underscore/modules/uniqueId.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=0;function o(e){var t=++n+"";return e?e+t:t}},"./node_modules/underscore/modules/unzip.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/underscore/modules/max.js"),o=i("./node_modules/underscore/modules/_getLength.js"),r=i("./node_modules/underscore/modules/pluck.js");function a(e){for(var t=e&&(0,n.default)(e,o.default).length||0,i=Array(t),a=0;a<t;a++)i[a]=(0,r.default)(e,a);return i}},"./node_modules/underscore/modules/values.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/keys.js");function o(e){for(var t=(0,n.default)(e),i=t.length,o=Array(i),r=0;r<i;r++)o[r]=e[t[r]];return o}},"./node_modules/underscore/modules/where.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/filter.js"),o=i("./node_modules/underscore/modules/matcher.js");function r(e,t){return(0,n.default)(e,(0,o.default)(t))}},"./node_modules/underscore/modules/without.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/difference.js");const r=(0,n.default)(function(e,t){return(0,o.default)(e,t)})},"./node_modules/underscore/modules/wrap.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/underscore/modules/partial.js");function o(e,t){return(0,n.default)(t,e)}},"./node_modules/underscore/modules/zip.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/underscore/modules/restArguments.js"),o=i("./node_modules/underscore/modules/unzip.js");const r=(0,n.default)(o.default)}}]);
//# sourceMappingURL=node_modules_helix_com-bmc-arsys-rx-innovationstudio_fesm2015_helix-com-bmc-arsys-rx-innovati-cea66f.js.map