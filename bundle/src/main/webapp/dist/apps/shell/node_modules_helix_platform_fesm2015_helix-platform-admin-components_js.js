(self.webpackChunkhelix=self.webpackChunkhelix||[]).push([["node_modules_helix_platform_fesm2015_helix-platform-admin-components_js"],{"./node_modules/@angular/cdk/fesm2015/clipboard.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{CDK_COPY_TO_CLIPBOARD_CONFIG:()=>s,CKD_COPY_TO_CLIPBOARD_CONFIG:()=>l,CdkCopyToClipboard:()=>c,Clipboard:()=>a,ClipboardModule:()=>d,PendingCopy:()=>r});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js");class r{constructor(e,t){this._document=t;const i=this._textarea=this._document.createElement("textarea"),n=i.style;n.position="fixed",n.top=n.opacity="0",n.left="-999em",i.setAttribute("aria-hidden","true"),i.value=e,this._document.body.appendChild(i)}copy(){const e=this._textarea;let t=!1;try{if(e){const i=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),i&&i.focus()}}catch(i){}return t}destroy(){const e=this._textarea;e&&(e.parentNode&&e.parentNode.removeChild(e),this._textarea=void 0)}}class a{constructor(e){this._document=e}copy(e){const t=this.beginCopy(e),i=t.copy();return t.destroy(),i}beginCopy(e){return new r(e,this._document)}}a.\u0275fac=function(e){return new(e||a)(o["\u0275\u0275inject"](n.DOCUMENT))},a.\u0275prov=o["\u0275\u0275defineInjectable"]({factory:function(){return new a(o["\u0275\u0275inject"](n.DOCUMENT))},token:a,providedIn:"root"}),a.ctorParameters=()=>[{type:void 0,decorators:[{type:o.Inject,args:[n.DOCUMENT]}]}];const s=new o.InjectionToken("CDK_COPY_TO_CLIPBOARD_CONFIG"),l=s;class c{constructor(e,t,i){this._clipboard=e,this._ngZone=t,this.text="",this.attempts=1,this.copied=new o.EventEmitter,this._pending=new Set,i&&null!=i.attempts&&(this.attempts=i.attempts)}copy(e=this.attempts){if(e>1){let t=e;const i=this._clipboard.beginCopy(this.text);this._pending.add(i);const n=()=>{const e=i.copy();e||! --t||this._destroyed?(this._currentTimeout=null,this._pending.delete(i),i.destroy(),this.copied.emit(e)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(n,1))};n()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(e=>e.destroy()),this._pending.clear(),this._destroyed=!0}}c.\u0275fac=function(e){return new(e||c)(o["\u0275\u0275directiveInject"](a),o["\u0275\u0275directiveInject"](o.NgZone),o["\u0275\u0275directiveInject"](l,8))},c.\u0275dir=o["\u0275\u0275defineDirective"]({type:c,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(e,t){1&e&&o["\u0275\u0275listener"]("click",function(){return t.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),c.ctorParameters=()=>[{type:a},{type:o.NgZone},{type:void 0,decorators:[{type:o.Optional},{type:o.Inject,args:[l]}]}],c.propDecorators={text:[{type:o.Input,args:["cdkCopyToClipboard"]}],attempts:[{type:o.Input,args:["cdkCopyToClipboardAttempts"]}],copied:[{type:o.Output,args:["cdkCopyToClipboardCopied"]}]};class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=o["\u0275\u0275defineNgModule"]({type:d}),d.\u0275inj=o["\u0275\u0275defineInjector"]({}),("undefined"==typeof ngJitMode||ngJitMode)&&o["\u0275\u0275setNgModuleScope"](d,{declarations:[c],exports:[c]})},"./node_modules/@bmc-ux/adapt-charts/fesm2015/bmc-ux-adapt-charts.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ADAPT_CHARTS_VERSION:()=>ci,AdaptAreaGraphComponent:()=>ot,AdaptChartAbstract:()=>w,AdaptChartColorStatus:()=>N,AdaptChartComponent:()=>Se,AdaptChartSliderType:()=>n,AdaptChartsModule:()=>di,AdaptFlowChartComponent:()=>li,AdaptFlowChartOrientation:()=>Ot,AdaptHeatmapAbstract:()=>je,AdaptHeatmapComponent:()=>We,AdaptLineGraphAbstract:()=>Ye,AdaptLineGraphComponent:()=>et,AdaptPieChartAbstract:()=>rt,AdaptPieChartComponent:()=>ct,AdaptScatterPlotAbstract:()=>dt,AdaptScatterPlotComponent:()=>mt,AdaptStackedChartAbstract:()=>I,AdaptStackedChartComponent:()=>ke,AdaptStackedChartType:()=>o,AdaptTextEllipsisDirective:()=>kt,AdaptTreemapAbstract:()=>ht,AdaptTreemapComponent:()=>Mt,ChartColorService:()=>B,ChartColorsFactory:()=>L,ChartGradientLegendComponent:()=>re,ChartLegendComponent:()=>H,STATUS_COLOR_RANGE:()=>V,textEllipsis:()=>_e});var n,o,r=i("./node_modules/@angular/core/fesm2015/core.js"),a=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),s=i("./node_modules/lodash-es/lodash.js"),l=i("./node_modules/bignumber.js/bignumber.js"),c=i.n(l),d=i("./node_modules/d3/index.js"),p=i("rxjs"),u=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js"),m=i("./node_modules/@angular/cdk/fesm2015/portal.js"),h=i("./node_modules/@angular/cdk/fesm2015/bidi.js"),f=i("./node_modules/rxjs/_esm2015/operators/index.js"),g=i("./node_modules/@angular/cdk/fesm2015/keycodes.js"),v=i("./node_modules/@angular/common/fesm2015/common.js"),x=i("./node_modules/@bmc-ux/dpl-iconfont/dist/module/index.js"),y=i("./node_modules/@angular/cdk/fesm2015/a11y.js"),b=i("./node_modules/d3-shape/src/index.js"),C=i("./node_modules/@angular/forms/fesm2015/forms.js"),S=i("./node_modules/@swimlane/ngx-graph/fesm2015/swimlane-ngx-graph.js");class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275dir=r["\u0275\u0275defineDirective"]({type:w,inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",legend:"legend",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",dataBuilder:"dataBuilder",noDataText:"noDataText"},outputs:{clickChart:"clickChart"}}),function(e){e.bar="bar",e.line="line",e.scatterplot="scatterplot"}(n||(n={})),function(e){e.Bar="bar",e.Column="column",e.Area="area"}(o||(o={}));class I extends w{}I.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](I)))(t||I)}}(),I.\u0275dir=r["\u0275\u0275defineDirective"]({type:I,inputs:{type:"type",xAxis:"xAxis",yAxis:"yAxis",series:"series",hideAxises:"hideAxises",seriesDisplay:"seriesDisplay",showSlider:"showSlider",slidePointsCount:"slidePointsCount"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const _=["chart"],D=["slider"],R=["dnd"],A=["overlay"],T=["overlayLeft"],F=["overlayRight"],E=function(){return{}};function M(e,t){if(1&e&&r["\u0275\u0275element"](0,"adapt-stacked-chart",11,12),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("suppressHeader",!0)("suppressLegend",!0)("renderLegend",!1)("showEmptyColIndicator",!1)("legend",null)("hideAxises",!0)("xAxis",e.xAxis)("yAxis",r["\u0275\u0275pureFunction0"](12,E))("series",e.data)("height",e.height-e.sliderPaddingTop)("type",e.stackedChartType)("seriesDisplay",e.stackedChart&&e.stackedChart.seriesDisplay)}}function O(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0,9),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275template"](2,M,2,13,"adapt-stacked-chart",10),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("ngSwitch",e.type),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngSwitchCase",e.chartSliderType.bar)}}let k=0;class j{constructor(e,t,i){this._elementRef=e,this._renderer=t,this._changeDetectorRef=i,this.chartSliderType=n,this.stackedChartType=o.Column,this.isActive=!1,this.sliderSpotWidth=50,this.initComplete=!1,this.height=45,this.leftShift=0,this.rangeChanged=new r.EventEmitter,this._inMotion=!1,this._categoryFilter=[],this._x=0,this._destroyed$=new p.ReplaySubject(1),k++,this.id=k,this.classPrefix="adapt-chart-slider",this.sliderPaddingTop=10}get overlayLeftWidth(){const e=this._sliderEl.nativeElement.getBoundingClientRect().left,{left:t}=this._dndEl.nativeElement.getBoundingClientRect();return t-e}get overlayRightWidth(){const e=this._sliderEl.nativeElement.getBoundingClientRect().left,t=this._sliderEl.nativeElement.getBoundingClientRect().width,{left:i,width:n}=this._dndEl.nativeElement.getBoundingClientRect();return t-(i-e)-n}ngOnInit(){this._dataCopy=this.data.slice(),this._bodyMouseMoveLn=this._renderer.listen("body","mousemove",e=>{if(this._inMotion){const{clientX:t}=e,{width:i}=this._dndEl.nativeElement.getBoundingClientRect(),n=this._sliderEl.nativeElement.getBoundingClientRect().width;let o=t-this._sliderEl.nativeElement.getBoundingClientRect().left-this._gap;o=o<0?0:o,o=o>n-i?n-i:o,this._updateOverlay(o)}}),this._bodyMouseUpLn=this._renderer.listen("body","mouseup",e=>{const{target:t}=e;t!==this._dndEl.nativeElement&&(this.isActive=!1),this._inMotion=!1})}ngAfterViewInit(){const{width:e}=this._sliderEl.nativeElement.getBoundingClientRect(),t=this._getDataLength(),i=Math.ceil(t/this.slidePointsCount);this.monitorsCount=i,this._width=e,this.sliderSpotWidth=e/i,this._updateOverlay(0),this.initComplete=!0,a.SafeCdr.detectChanges(this._changeDetectorRef)}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete(),this._bodyMouseMoveLn(),this._bodyMouseUpLn()}onMouseDown(e){const{clientX:t,target:i}=e,{left:n}=i.getBoundingClientRect();this._gap=Math.floor(t-n),this._inMotion=!0}onMouseOver(){this.isActive=!0}onMouseOut(){this._inMotion||(this.isActive=!1)}onSliderShift(e){const t=getComputedStyle(this._overlayEl.nativeElement),i=parseInt(t.width,10),n=parseInt(t.left,10),o=parseInt(getComputedStyle(this._sliderEl.nativeElement).width,10);let r;e?(r=n-i,r<0&&(r=0)):(r=n+i,r+i>o&&(r=o-i)),this._updateOverlay(r)}onClickSliderArea(e){if(this.isActive)return;const{clientX:t}=e,{left:i,width:n}=this._sliderEl.nativeElement.getBoundingClientRect();let o=t-i-this.sliderSpotWidth/2;o=o<0?0:o,o=o>n-this.sliderSpotWidth?n-this.sliderSpotWidth:o,this._updateOverlay(o)}updateSlider(e){const{height:t}=this._sliderEl.nativeElement.getBoundingClientRect();this._chartComponent.chartComponent.updateChart({w:e.w-this.leftShift,h:t-2*this.sliderPaddingTop})}showCategory(e){const t=this._categoryFilter.indexOf(e);-1!==t&&this._categoryFilter.splice(t,1),this._updateData()}hideCategory(e){this._categoryFilter.push(e),this._updateData()}_getDataLength(){return this.data[0].data.length}_updateOverlay(e=this._x){e!==this._x&&(this._x=e,this._recalculateDataRange()),this._recalculateSpotPosition()}_updateData(){const e=setTimeout(()=>{this.data=this._dataCopy.map(e=>{const{name:t}=e;let{data:i}=e;return-1!==this._categoryFilter.indexOf(t)&&(i=i.map(()=>0)),{name:t,data:i}}),clearTimeout(e)},250)}_recalculateSpotPosition(){const{width:e}=this._sliderEl.nativeElement.getBoundingClientRect(),t=e-this.sliderSpotWidth-this._x,i=this._x;this._renderer.setStyle(this._dndEl.nativeElement,"left",100*this._x/e+"%"),this._renderer.setStyle(this._overlayEl.nativeElement,"left",100*this._x/e+"%"),this._renderer.setStyle(this._overlayLeftEl.nativeElement,"width",100*i/e+"%"),this._renderer.setStyle(this._overlayRightEl.nativeElement,"width",100*t/e+"%")}_recalculateDataRange(){const{width:e}=this._sliderEl.nativeElement.getBoundingClientRect(),t=e/this._getDataLength();this.sliderSpotWidth=e/this.monitorsCount;const i=Math.floor(this._x/t),n=Math.floor((this._x+this.sliderSpotWidth)/t);this._startPoint!==i&&(this._startPoint=i,this._endPoint=n,this.rangeChanged.emit({startPiece:i,endPiece:n}))}}function P(e,t,i=5,n){n=(n||5)-2;const o=t;t-=2*i;const r=[];return e.each(function(){const e=d.select(this),a=e.text().split(/[ \f\n\r\t\v]+/).reverse(),s=e.style("text-anchor")||"start";let l,c,p=[],u=0,m=e.attr("y"),h=parseFloat(e.attr("dy")),f=1;isNaN(h)&&(h=0);if(d.select(e.node().parentNode).classed("tick"))switch(s){case"start":c=-t/2;break;case"middle":case"end":c=0}else switch(s){case"start":c=i;break;case"middle":c=o/2;break;case"end":c=o-i}m=+(null===m?n:m);let g=e.text(null).append("tspan").attr("x",c).attr("y",m).attr("dy",h+"em");for(;l=a.pop();)p.push(l),g.text(p.join(" ")),g.node().getComputedTextLength()>t&&p.length>1&&(p.pop(),g.text(p.join(" ")),p=[l],g=e.append("tspan").attr("x",c).attr("y",m).attr("dy",1.25*++u+h+"em").text(l),++f);r.push(f)}),r}var N;j.\u0275fac=function(e){return new(e||j)(r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef))},j.\u0275cmp=r["\u0275\u0275defineComponent"]({type:j,selectors:[["adapt-chart-slider"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](_,5),r["\u0275\u0275viewQuery"](D,7),r["\u0275\u0275viewQuery"](R,7),r["\u0275\u0275viewQuery"](A,7),r["\u0275\u0275viewQuery"](T,7),r["\u0275\u0275viewQuery"](F,7)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._chartComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._sliderEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._dndEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._overlayEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._overlayLeftEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._overlayRightEl=e.first)}},inputs:{type:"type",data:"data",xAxis:"xAxis",height:"height",slidePointsCount:"slidePointsCount",customColors:"customColors",stackedChart:"stackedChart",leftShift:"leftShift",containerWidth:"containerWidth"},outputs:{rangeChanged:"rangeChanged"},decls:30,vars:38,consts:[[3,"click"],["slider",""],["overlayLeft",""],[3,"ngClass","mouseover","mouseout","mousedown"],["dnd",""],[3,"keydown.arrowRight","keydown.arrowLeft"],[3,"ngSwitch",4,"ngIf"],["overlay",""],["overlayRight",""],[3,"ngSwitch"],[3,"suppressHeader","suppressLegend","renderLegend","showEmptyColIndicator","legend","hideAxises","xAxis","yAxis","series","height","type","seriesDisplay",4,"ngSwitchCase"],[3,"suppressHeader","suppressLegend","renderLegend","showEmptyColIndicator","legend","hideAxises","xAxis","yAxis","series","height","type","seriesDisplay"],["chart",""]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"div",0,1),r["\u0275\u0275listener"]("click",function(e){return t.onClickSliderArea(e)}),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275elementStart"](4,"div"),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275element"](6,"div",null,2),r["\u0275\u0275text"](8,"\n        "),r["\u0275\u0275elementStart"](9,"div",3,4),r["\u0275\u0275listener"]("mouseover",function(){return t.onMouseOver()})("mouseout",function(){return t.onMouseOut()})("mousedown",function(e){return t.onMouseDown(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](11,"\n        "),r["\u0275\u0275elementStart"](12,"div",5),r["\u0275\u0275listener"]("keydown.arrowRight",function(){return t.onSliderShift()})("keydown.arrowLeft",function(){return t.onSliderShift(!0)}),r["\u0275\u0275text"](13,"\n          "),r["\u0275\u0275template"](14,O,4,2,"ng-container",6),r["\u0275\u0275text"](15,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n        "),r["\u0275\u0275element"](17,"div",null,7),r["\u0275\u0275text"](19,"\n        "),r["\u0275\u0275element"](20,"div",null,8),r["\u0275\u0275text"](22,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n      "),r["\u0275\u0275elementStart"](24,"div"),r["\u0275\u0275text"](25,"\n        "),r["\u0275\u0275element"](26,"div"),r["\u0275\u0275text"](27,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n  ")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.classPrefix),r["\u0275\u0275styleProp"]("height",t.height,"px")("margin-left",t.leftShift,"px"),r["\u0275\u0275advance"](3),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-main"),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate2"]("",t.classPrefix,"-side-overlay ",t.classPrefix,"-side-overlay-right"),r["\u0275\u0275advance"](3),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-spot"),r["\u0275\u0275styleProp"]("width",100/t.monitorsCount,"%"),r["\u0275\u0275property"]("ngClass",t.isActive?t.classPrefix+"-spot-active":""),r["\u0275\u0275advance"](3),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-chart-zone"),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.initComplete),r["\u0275\u0275advance"](3),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-overlay"),r["\u0275\u0275styleProp"]("width",100/t.monitorsCount,"%"),r["\u0275\u0275advance"](3),r["\u0275\u0275classMapInterpolate2"]("",t.classPrefix,"-side-overlay ",t.classPrefix,"-side-overlay-left"),r["\u0275\u0275advance"](4),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-line-wrapper"),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-line"))},encapsulation:2}),function(e){e[e.Default=0]="Default",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Danger=3]="Danger",e[e.Custom=4]="Custom"}(N||(N={}));const V={Default:["#195560","#267f91"],Success:["#408600","#5da627"],Warning:["#FFBE00","#FFE438"],Danger:["#E80B30","#ff3a49"],Custom:["#0078CC","#009AF0"]};class L{static getGradientColors(){return["#488EE7","#1145AC","#8061C5","#7E1E85","#C94FAF","#E9345D","#EF6F70","#DD8A44","#E7B548","#D5DB51","#9DB957","#54C2C3","#89F4F4","#9CD0FB","#AAB2F5","#E6A8D7"]}static getHighDiffColors(){return["#6487EA","#E9862F","#875BCB","#EFB426","#90D1FF","#FF656C","#95BC44","#D83FB4","#00C5C4","#89008A","#D3DD27","#FB025A","#0242B3","#F0A3DA","#62F7F6","#AAB0FA"]}}class B{constructor(){this._gradientColors=L.getGradientColors(),this._highDiffColorsColors=L.getHighDiffColors()}static getColorRange(e,t){let i;if(e instanceof Array)i=e;else switch(e){case N.Success:i=V.Success;break;case N.Warning:i=V.Warning;break;case N.Danger:i=V.Danger;break;default:i=V.Default}const n=[],o=d.scaleLinear().range(i).domain([1,t]);for(let r=0;r<t;r++)n.push(d.color(o(r+1)).hex());return n}getColor(e,t){const i="high-diff"===t?this._highDiffColorsColors:this._gradientColors;return i[e%(i.length-1)]}getDarken(e,t,i){const n=i===a.ColorType.HEX?this._parseHEX(e):this._parseRGB(e);return Object.keys(n).forEach(e=>{n[e]=Math.floor((1-t)*n[e])}),`#${this._decToHEX(n.r)}${this._decToHEX(n.g)}${this._decToHEX(n.b)}`}getContrast(e,t){const i=t===a.ColorType.HEX?this._parseHEX(e):this._parseRGB(e);return(299*i.r+587*i.g+114*i.b)/1e3>=128?"#000":"#fff"}setColors(e){this._gradientColors=e}_parseHEX(e){const t=e.trim().slice(1);let i,n,o;return 3===t.length?(i=parseInt(t.substring(0,1)+t.substring(0,1),16),n=parseInt(t.substring(1,2)+t.substring(1,2),16),o=parseInt(t.substring(2,3)+t.substring(2,3),16)):(i=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16)),{r:i,g:n,b:o}}_parseRGB(e){const t=e.trim(),i=t.substring(4,t.length-1).replace(/ /g,"").split(","),[n,o,r]=i.map(e=>parseInt(e,10));return{r:n,g:o,b:r}}_decToHEX(e){const t=e.toString(16);return 1===t.length?"0"+t:t}}function $(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275elementStart"](2,"button",6),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).index,i=r["\u0275\u0275nextContext"]().index,n=r["\u0275\u0275nextContext"](2);return n.clickLegend(n.columnSize*i+t)})("mouseenter",function(t){const i=r["\u0275\u0275restoreView"](e).index,n=r["\u0275\u0275nextContext"]().index,o=r["\u0275\u0275nextContext"](2);return o.enterLegendItem(t,o.columnSize*n+i)})("mouseleave",function(t){const i=r["\u0275\u0275restoreView"](e).index,n=r["\u0275\u0275nextContext"]().index,o=r["\u0275\u0275nextContext"](2);return o.leaveLegendItem(t,o.columnSize*n+i)})("mousemove",function(t){const i=r["\u0275\u0275restoreView"](e).index,n=r["\u0275\u0275nextContext"]().index,o=r["\u0275\u0275nextContext"](2);return o.moveLegendItem(t,o.columnSize*n+i)}),r["\u0275\u0275text"](3,"\n              "),r["\u0275\u0275element"](4,"span",7),r["\u0275\u0275text"](5,"\n              "),r["\u0275\u0275elementStart"](6,"span",8),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n            "),r["\u0275\u0275element"](10,"br"),r["\u0275\u0275text"](11,"\n          "),r["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=r["\u0275\u0275nextContext"]().index,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("adapt-chart-legend-item__hidden",e.hidden),r["\u0275\u0275attribute"]("id",o.columnSize*n+i)("aria-checked",o.activeClick?!e.hidden:null)("aria-selected",o.activeClick?!e.hidden:null)("type",o.activeClick?"button":null)("role",o.activeClick?"option":"listitem"),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("border-color",o.getBorderColorById(o.columnSize*n+i))("background-color",o.getColorById(o.columnSize*n+i)),r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("text-active",o.legendFocus&&o.activeOption===o.columnSize*n+i),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.item)}}function G(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275template"](2,$,12,14,"ng-container",5),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByIndex)}}function z(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275template"](2,G,4,2,"div",3),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByIndex)}}function U(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",10),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).index;return r["\u0275\u0275nextContext"](2).clickLegend(t)}),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275element"](2,"span",7),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementStart"](4,"div",8),r["\u0275\u0275text"](5,"\n            "),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("border-color",n.getBorderColorById(i))("background-color",n.getColorById(i)),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.item)}}function q(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n        "),r["\u0275\u0275template"](1,U,10,5,"button",9),r["\u0275\u0275text"](2,"\n      ")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",e.legend)}}B.\u0275fac=function(e){return new(e||B)},B.\u0275prov=r["\u0275\u0275defineInjectable"]({token:B,factory:B.\u0275fac});const X=function(e){return{"adapt-chart-legend-mouse-over":e}};class H{constructor(e,t,i,n){this._chartColorService=e,this._deviceDetectionService=t,this._sanitize=i,this._ngZone=n,this.mainCls="",this.isScrolled=!1,this.columnsCount=1,this.focusable=!0,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this.categoryEnter=new r.EventEmitter,this.categoryLeave=new r.EventEmitter,this.categoryMove=new r.EventEmitter,this.legend=[],this.columns=[],this.isMouseOver=this.isMobile,this.activeOption=null,this.legendFocus=!1,this._destroyed$=new p.ReplaySubject(1)}get isMobile(){return this._deviceDetectionService.deviceTablet()||this._deviceDetectionService.deviceMobile()}ngOnInit(){this.initLegend()}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}legendKeydownHandler(e){var t;switch((0,a.getEventKeyCode)(e)){case g.DOWN_ARROW:case g.UP_ARROW:null===(t=this._listKeyManager)||void 0===t||t.onKeydown(e);break;case g.ENTER:case g.SPACE:(0,s.isNull)(this.activeOption)||(e.preventDefault(),this.clickLegend(this.activeOption));break;case g.TAB:this.toggleMouseOverStatus()}}keyManagerStateChange(e){var t;this._listKeyManager=e,this._ngZone.onStable.pipe((0,f.takeUntil)(this._destroyed$),(0,f.take)(1)).subscribe(()=>{var e;null===(e=this._listKeyManager)||void 0===e||e.setFirstItemActive()}),null===(t=this._listKeyManager)||void 0===t||t.change.pipe((0,f.takeUntil)(this._destroyed$)).subscribe(()=>{this.activeOption=this._listKeyManager.activeItemIndex})}parseColumns(){let e=new Array(this.columnsCount).fill([]);e=e.map((e,t)=>{const i=t*this.columnSize,n=this.legend.slice(),o=i+this.columnSize;return n.slice(i,o)}),this.columns=e,this.legend&&this.legend.length&&this.legend.length===this.items.length||this.initLegend()}getColorById(e){const t=this.customColors?this.customColors[e]:this._chartColorService.getColor(e,this.colorsPalette),i=this._chartColorService.getDarken(t,.14,a.ColorType.HEX),n=this.legend[e].hover?i:t;return this._sanitize.bypassSecurityTrustStyle(n)}getBorderColorById(e){const t=this.customColors?this.customColors[e]:this._chartColorService.getColor(e,this.colorsPalette),i=this._chartColorService.getDarken(t,.14,a.ColorType.HEX),n=this._chartColorService.getDarken(t,.24,a.ColorType.HEX),o=this.legend[e].hover?n:i;return this._sanitize.bypassSecurityTrustStyle(o)}clickLegend(e){const t=this.legend[e];!(0,s.isNull)(e)&&this.activeClick&&(t.hidden?this._showCategory(t):this._hideCategory(t))}toggleMouseOverStatus(){this.activeHover&&(this.isMobile?this.isMouseOver=!0:this.isMouseOver=!this.isMouseOver)}enterLegendItem(e,t){this.activeOption=t,this.legend[t].hover=!0,this.categoryEnter.emit({id:t,event:e})}leaveLegendItem(e,t){this.legend[t].hover=!1,this.categoryLeave.emit({id:t,event:e})}moveLegendItem(e,t){this.categoryMove.emit({id:t,event:e})}update(e){this.items=e,this.legend=this._getLegend(),this.columnSize=Math.ceil(this.items.length/this.columnsCount),this.parseColumns()}initLegend(){(0,a.isUndefined)(this.items)||!this.items.length||(0,s.isNull)(this.items)||(this.activeHover=!!(0,a.isUndefined)(this.activeHover)||this.activeHover,this.activeClick=!!(0,a.isUndefined)(this.activeClick)||this.activeClick,this.legend=this._getLegend(),this.columnSize=Math.ceil(this.items.length/this.columnsCount),this.parseColumns())}trackByIndex(e){return e}_getLegend(){return(0,s.isString)(this.items[0])?this.items.map(e=>({item:e,hidden:!1,hover:!1})):this.items.map(e=>({item:e.item,hidden:e.hidden,hover:!1}))}_showCategory(e){e.hidden=!1,this.categoryShow.emit(e.item)}_hideCategory(e){1!==this.legend.filter(e=>!e.hidden).length&&(e.hidden=!0,this.categoryHide.emit(e.item))}}H.id=0,H.\u0275fac=function(e){return new(e||H)(r["\u0275\u0275directiveInject"](B),r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](u.DomSanitizer),r["\u0275\u0275directiveInject"](r.NgZone))},H.\u0275cmp=r["\u0275\u0275defineComponent"]({type:H,selectors:[["adapt-chart-legend"]],hostVars:4,hostBindings:function(e,t){2&e&&(r["\u0275\u0275classMap"](t.mainCls),r["\u0275\u0275classProp"]("adapt-chart-legend-scrolled",t.isScrolled))},inputs:{mainCls:"mainCls",items:"items",columnsCount:["columns","columnsCount"],customColors:"customColors",colorsPalette:"colorsPalette",activeHover:"activeHover",activeClick:"activeClick",width:"width",focusable:"focusable"},outputs:{categoryShow:"categoryShow",categoryHide:"categoryHide",categoryEnter:"categoryEnter",categoryLeave:"categoryLeave",categoryMove:"categoryMove"},decls:9,vars:12,consts:[["adaptListKeyManager","","tabindex","0",1,"adapt-chart-legend",3,"ngClass","keyManagerStateChange","keydown","keyup.tab","mouseenter","mouseleave","focus","blur"],[4,"ngIf","ngIfElse"],["mobileLegend",""],["class","adapt-chart-legend-col",4,"ngFor","ngForOf","ngForTrackBy"],[1,"adapt-chart-legend-col"],[4,"ngFor","ngForOf","ngForTrackBy"],["adaptListKeyManagerItem","","tabindex","-1",1,"adapt-chart-legend-item",3,"click","mouseenter","mouseleave","mousemove"],[1,"adapt-chart-legend-item-color"],[1,"adapt-chart-legend-item-text"],["class","adapt-chart-legend-item","type","button",3,"click",4,"ngFor","ngForOf"],["type","button",1,"adapt-chart-legend-item",3,"click"]],template:function(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"div",0),r["\u0275\u0275listener"]("keyManagerStateChange",function(e){return t.keyManagerStateChange(e)})("keydown",function(e){return t.legendKeydownHandler(e)})("keyup.tab",function(){return t.toggleMouseOverStatus()})("mouseenter",function(){return t.toggleMouseOverStatus()})("mouseleave",function(){return t.toggleMouseOverStatus()})("focus",function(){return t.legendFocus=!0})("blur",function(){return t.legendFocus=!1}),r["\u0275\u0275text"](2,"\n      "),r["\u0275\u0275template"](3,z,4,2,"ng-container",1),r["\u0275\u0275text"](4,"\n\n      "),r["\u0275\u0275template"](5,q,3,1,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n  ")),2&e){const e=r["\u0275\u0275reference"](6);r["\u0275\u0275advance"](1),r["\u0275\u0275styleProp"]("width",t.isMobile?"100%":t.width+"px"),r["\u0275\u0275classProp"]("adapt-chart-legend-mobile",t.isMobile),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](10,X,t.isMouseOver)),r["\u0275\u0275attribute"]("role",t.activeClick?"listbox":"list")("aria-multiselectable",!!t.activeClick||null)("aria-activedescendant",t.activeOption),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!t.isMobile)("ngIfElse",e)}},directives:[a.AdaptListKeyManagerDirective,v.NgClass,v.NgIf,v.NgForOf,a.AdaptListKeyManagerItemDirective],styles:["[_nghost-%COMP%] {\n      position: relative;\n    }\n\n    .adapt-chart-legend-item[_ngcontent-%COMP%] {\n      background: transparent;\n      border: none;\n    }"]});const W=["svgBrushContainer"],Y=["slider"],Q=["chart"];function K(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275namespaceHTML"](),r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275element"](2,"div"),r["\u0275\u0275text"](3,"\n\n        "),r["\u0275\u0275element"](4,"div",6),r["\u0275\u0275text"](5,"\n\n        "),r["\u0275\u0275element"](6,"div"),r["\u0275\u0275text"](7,"\n      "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate2"]("",e.classPrefix,"-side-overlay ",e.classPrefix,"-side-overlay-right"),r["\u0275\u0275styleProp"]("top",e.sliderPaddingTop,"px")("height",e.height,"px")("width",e.getXPos(),"px"),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate1"]("",e.classPrefix,"-spot"),r["\u0275\u0275styleProp"]("top",e.sliderPaddingTop,"px")("z-index",1)("height",e.height+5,"px")("width",e.brushWidth,"px")("left",e.getXPos(),"px"),r["\u0275\u0275property"]("ngClass",e.isActive?e.classPrefix+"-spot-active":""),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate2"]("",e.classPrefix,"-side-overlay ",e.classPrefix,"-side-overlay-left"),r["\u0275\u0275styleProp"]("top",e.sliderPaddingTop,"px")("height",e.height,"px")("left",e.getXOverlayPos(),"px")("width",e.getRightOverlayWidth(),"px")}}const J=function(){return{}},Z=function(){return[]},ee=function(e,t){return{items:e,customColors:t}};class te{constructor(e){this._ngZone=e,this.isInitialized=!1,this.isActive=!1,this.height=35,this.leftShift=0,this.rangeChanged=new r.EventEmitter,this.scrollEnd=new r.EventEmitter,this._cX=0,this._inMotion=!1,this._destroyed$=new p.ReplaySubject(1),this.classPrefix="adapt-chart-slider",this.sliderPaddingTop=10}ngOnInit(){this._ngZone.onStable.pipe((0,f.takeUntil)(this._destroyed$),(0,f.take)(1)).subscribe(()=>{this.isInitialized=!0})}ngOnChanges(e){this.isInitialized&&e.slidePointsCount&&(this._g.select(".brush-wrp").remove(),this._initBrush())}ngAfterViewInit(){this._g=d.select(this._svgContainerEl.nativeElement),this._xMinValue=this._chartComponent.getXMinValue(this.data),this._xMaxValue=this._chartComponent.getXMaxValue(this.data),this._renderBrushXAxis(),this._initBrush()}ngOnDestroy(){this._destroyed$.next(!0),this._destroyed$.complete()}getXPos(){return parseFloat(this._dndEl.getAttribute("x"))||0}getXOverlayPos(){return this.getXPos()+this.brushWidth}getRightOverlayWidth(){return this.containerWidth-this.leftShift-this.getXOverlayPos()}showCategory(e){this._chartComponent.categoryShowHandler(e)}hideCategory(e){this._chartComponent.categoryHideHandler(e)}updateSlider(e){this.containerWidth=e.w;const{height:t}=this._sliderEl.nativeElement.getBoundingClientRect();this._chartComponent._updateChart({w:e.w-this.leftShift,h:t-2*this.sliderPaddingTop}),this.xBrush=d.scaleLinear().range([0,e.w-this.leftShift]).domain([this._xMinValue,this._xMaxValue]);this._g.select(".axis--x").call(this._getXAxisLineRenderer()),this._g.select(".brush-wrp").remove(),this._initBrush()}_renderBrushXAxis(){this._g.append("g").attr("class","axis axis--x").attr("transform",`translate(0, ${this.height})`).call(this._getXAxisLineRenderer())}_getXAxisLineRenderer(){return d.axisBottom(this.xBrush)}_initBrush(){const e=this;this._brush=d.brushX().extent([[0,0],[this.containerWidth-this.leftShift,this.height]]).on("brush",function(){e._brushed()}).on("end.brush",function(){e.scrollEnd.emit()}),this.brushWidth=Math.ceil(this.xBrush(this.xBrush.ticks()[this.slidePointsCount])),this._initBrushHandlers()}_initBrushHandlers(){const e=this;this._g.append("g").attr("class","brush-wrp").append("g").attr("class","brush").call(this._brush).call(this._brush.move,[this._cX,this._cX+this.brushWidth]).call(t=>t.select(".selection").attr("stroke",null).attr("fill-opacity","0.1").on("mouseover",function(){e.isActive=!0}).on("mousedown",function(){e._inMotion=!0}).on("mouseout",function(){e._inMotion||(e.isActive=!1)})).call(t=>t.select(".overlay").datum({type:"selection"}).on("mousedown",function(){const[t]=d.mouse(this),[i,n]=[t-e.brushWidth/2,t+e.brushWidth/2],[o,r]=e.xBrush.range();d.select(this.parentNode).call(e._brush.move,n>r?[r-e.brushWidth,r]:i<o?[o,o+e.brushWidth]:[i,n])})),this._g.selectAll(".brush-wrp > .brush > .handle").remove(),this._dndEl=this._svgContainerEl.nativeElement.querySelector("rect.selection")}_brushed(){this._cX=d.event.selection[0];const e=d.event.selection||this.xBrush.range();this.rangeChanged.emit(e.map(this.xBrush.invert,this.xBrush)),this._inMotion=!1}}function ie(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",6),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("tabIndex",e.focusable?0:-1),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.zeroText)}}te.\u0275fac=function(e){return new(e||te)(r["\u0275\u0275directiveInject"](r.NgZone))},te.\u0275cmp=r["\u0275\u0275defineComponent"]({type:te,selectors:[["adapt-area-graph-slider"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](W,5),r["\u0275\u0275viewQuery"](Y,5),r["\u0275\u0275viewQuery"](Q,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._svgContainerEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._sliderEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t._chartComponent=e.first)}},inputs:{xAxis:"xAxis",height:"height",slidePointsCount:"slidePointsCount",customColors:"customColors",xBrush:"xBrush",leftShift:"leftShift",containerWidth:"containerWidth",data:"data"},outputs:{rangeChanged:"rangeChanged",scrollEnd:"scrollEnd"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:19,vars:28,consts:[["slider",""],[3,"xAxis","yAxis","legend","series","height","disallowPadding","supressAxles","suppressLegend"],["chart",""],["xmlns","http://www.w3.org/2000/svg","tabindex","-1","role","graphic/image","aria-describedby","title desc",1,"adapt-chart-slider-brush-svg"],["svgBrushContainer",""],[4,"ngIf"],[3,"ngClass"]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"div",null,0),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275element"](4,"adapt-area-graph",1,2),r["\u0275\u0275text"](6,"\n\n      "),r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](7,"svg",3,4),r["\u0275\u0275text"](9,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n\n      "),r["\u0275\u0275template"](11,K,8,36,"ng-container",5),r["\u0275\u0275text"](12,"\n\n      "),r["\u0275\u0275namespaceHTML"](),r["\u0275\u0275elementStart"](13,"div"),r["\u0275\u0275text"](14,"\n        "),r["\u0275\u0275element"](15,"div"),r["\u0275\u0275text"](16,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n  ")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.classPrefix),r["\u0275\u0275styleProp"]("margin-left",t.leftShift,"px"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("xAxis",t.xAxis)("yAxis",r["\u0275\u0275pureFunction0"](23,J))("legend",r["\u0275\u0275pureFunction2"](25,ee,r["\u0275\u0275pureFunction0"](24,Z),t.customColors))("series",t.data)("height",t.height)("disallowPadding",!0)("supressAxles",!0)("suppressLegend",!0),r["\u0275\u0275advance"](3),r["\u0275\u0275attributeInterpolate2"]("viewbox","0 0 ",t.containerWidth-t.leftShift," ",t.height,""),r["\u0275\u0275attribute"]("width",t.containerWidth-t.leftShift)("height",t.height),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.isInitialized),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-line-wrapper"),r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate1"]("",t.classPrefix,"-line"))},encapsulation:2});const ne=function(e,t){return{width:e,height:t}},oe=function(e){return{backgroundImage:e}};class re{constructor(e,t){this._deviceDetectionService=e,this._ts=t,this.focusable=!0,this._defaultTexts={},this.setDefaultTexts(t.getCurrentLanguage())}get isMobile(){return this._deviceDetectionService.deviceTablet()||this._deviceDetectionService.deviceMobile()}ngOnInit(){var e;this.zeroColor=this.zeroColor||"#f0f0f1",this.increaseText=this.increaseText||this._defaultTexts.increaseText,this.decreaseText=this.decreaseText||this._defaultTexts.decreaseText,this.zeroText=null!==(e=this.zeroText)&&void 0!==e?e:this._defaultTexts.zeroText,this.height=this.height||"100%"}setDefaultTexts(e){this._defaultTexts.increaseText=e["adapt.chart.gradientLegend.increaseDefaultText"],this._defaultTexts.decreaseText=e["adapt.chart.gradientLegend.decreaseDefaultText"],this._defaultTexts.zeroText=e["adapt.chart.gradientLegend.zeroDefaultText"]}}re.\u0275fac=function(e){return new(e||re)(r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](a.AdaptTranslateService))},re.\u0275cmp=r["\u0275\u0275defineComponent"]({type:re,selectors:[["adapt-chart-gradient-legend"]],inputs:{increaseColor:"increaseColor",decreaseColor:"decreaseColor",zeroColor:"zeroColor",increaseText:"increaseText",decreaseText:"decreaseText",zeroText:"zeroText",height:"height",containerWidth:"containerWidth",focusable:"focusable"},decls:18,vars:12,consts:[["role","legend",1,"adapt-chart-legend","adapt-chart-legend__gradient",3,"ngStyle"],[1,"adapt-chart-legend__gradient-label","adapt-chart-legend__gradient-label_top",3,"tabIndex"],[1,"adapt-chart-legend__gradient-label","adapt-chart-legend__gradient-label_middle"],[3,"tabIndex",4,"ngIf"],[1,"adapt-chart-legend__gradient-label","adapt-chart-legend__gradient-label_bottom",3,"tabIndex"],[1,"adapt-chart-legend__gradient-block",3,"ngStyle"],[3,"tabIndex"]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"div",0),r["\u0275\u0275text"](2,"\n      "),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275elementStart"](6,"div",2),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275template"](8,ie,2,2,"span",3),r["\u0275\u0275text"](9,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n      "),r["\u0275\u0275elementStart"](11,"div",4),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](13,"\n      "),r["\u0275\u0275elementStart"](14,"div",5),r["\u0275\u0275text"](15,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n  ")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction2"](7,ne,t.isMobile?"100%":t.containerWidth?t.containerWidth+"px":"",t.height)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("tabIndex",t.focusable?0:-1),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n        ",t.increaseText,"\n      "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.zeroText),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("tabIndex",t.focusable?0:-1),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n        ",t.decreaseText,"\n      "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](10,oe,"linear-gradient(to bottom, "+t.increaseColor+", "+t.zeroColor+" 50%, "+t.decreaseColor+")")))},directives:[v.NgStyle,v.NgIf],encapsulation:2});const ae=["chartContainer"],se=["chartArea"],le=["svgContainer"],ce=["legend"],de=["legendComponent"],pe=["chartSlider"];function ue(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"h1",14),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e.$this.header.title)}}function me(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",15),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"](2).toggleLegend()}),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275element"](2,"span"),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementStart"](4,"span"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275classProp"]("d-icon-left-eye",e.isLegendHidden)("d-icon-left-eye_closed",!e.isLegendHidden),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",e.isLegendHidden?"Show":"Hide"," legend")}}function he(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",11),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,ue,2,1,"h1",12),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275template"](4,me,7,5,"button",13),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.$this.header.title),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",(null==e.$this||null==e.$this.header?null:e.$this.header.allowHideLegend)&&!e.isMobile&&!e.suppressLegend)}}function fe(e,t){1&e&&r["\u0275\u0275elementContainer"](0)}function ge(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"svg",16,17),r["\u0275\u0275text"](2,"\n          "),r["\u0275\u0275elementStart"](3,"desc",18),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n          "),r["\u0275\u0275element"](6,"g",19),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275styleProp"]("transition",e.transition),r["\u0275\u0275attributeInterpolate2"]("viewbox","0 0 ",e.currentSVGWidth," ",e.currentSVGHeight,""),r["\u0275\u0275attribute"]("aria-label",e.title||(null==e.$this||null==e.$this.header?null:e.$this.header.title)||"")("width",e.currentSVGWidth)("height",e.currentSVGHeight?e.currentSVGHeight+e.chartBottomPadding:e.currentSVGHeight),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.description),r["\u0275\u0275advance"](2),r["\u0275\u0275attribute"]("id",e.chartContainerId)("width",e.currentSVGWidth)}}const ve=function(e){return{"adapt-legend-zone__hidden":e}};function xe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",20),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"adapt-chart-gradient-legend",21),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n      "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275styleProp"]("width",e.isMobile?"100%":e.legendWidth+"px")("transition",e.transition),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](14,ve,!e.showLegend)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("containerWidth",e.legendWidth-25)("increaseColor",e.gradientLegend.increaseColor)("decreaseColor",e.gradientLegend.decreaseColor)("zeroColor",e.gradientLegend.zeroColor)("increaseText",e.gradientLegend.increaseText)("decreaseText",e.gradientLegend.decreaseText)("zeroText",e.gradientLegend.zeroText)("height",e.gradientLegend.height)("focusable",e.showLegend)}}function ye(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",20,22),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275elementStart"](3,"adapt-chart-legend",23,24),r["\u0275\u0275listener"]("categoryShow",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().categoryShow.emit(t)})("categoryHide",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().categoryHide.emit(t)})("categoryEnter",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().categoryEnter.emit(t)})("categoryLeave",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().categoryLeave.emit(t)})("categoryMove",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().categoryMove.emit(t)}),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275styleProp"]("width",e.isMobile?"100%":e.legendWidth+"px")("transition",e.transition),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](13,ve,!e.showLegend)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("focusable",e.showLegend)("activeHover",null==e.$this||null==e.$this.legend?null:e.$this.legend.activeHover)("activeClick",null==e.$this||null==e.$this.legend?null:e.$this.legend.activeClick)("customColors",null==e.$this||null==e.$this.legend?null:e.$this.legend.customColors)("items",null==e.$this||null==e.$this.legend?null:e.$this.legend.items)("width",e.legendWidth-30)("columns",null==e.$this||null==e.$this.legend?null:e.$this.legend.columns)("colorsPalette",e.colorsPalette)}}const be=["*",[["adapt-chart-slider"]],[["adapt-area-graph-slider"]]];let Ce=1;class Se extends w{constructor(e,t,i,n,o,s,l){super(),this._deviceDetectionService=e,this._directionality=t,this._domSanitizer=i,this._injector=n,this._ngZone=o,this._changeDetectorRef=s,this._overlayService=l,this.$this=this,this.renderLegend=!0,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this.categoryEnter=new r.EventEmitter,this.categoryLeave=new r.EventEmitter,this.categoryMove=new r.EventEmitter,this.clickChart=new r.EventEmitter,this.chartContainerId="chartContainer-",this.isLegendHidden=!1,this.legendWidth=250,this.defaultMaxAxisWidth=150,this._emptyText="No data to show...",this._tooltipOverlayDefaultOffset=6,this._tooltipDefaultCustomCls="adapt-chart-tooltip position-static",this._showEmptyText=!1,this._chartBottomPadding=0,this._destroyed$=new p.ReplaySubject(1);const c=(0,a.getOverlayConnectedPositions)(this._directionality.value,this._tooltipOverlayDefaultOffset);this._tooltipOverlayPlacements={top:c.top,bottom:c.bottom,left:c.left,right:c.right},this.id=Ce,this.chartContainerId+=Ce,Ce++}set data(e){this._data=e,this._isDataExists()?(this.hideTooltip(),this._drawChart()):this._showEmptyText=!0}get isMobile(){return this._deviceDetectionService.deviceMobile()||this._deviceDetectionService.deviceTablet()}get showHeader(){return!this.suppressHeader&&this.header&&this._isDataExists()&&(!(0,s.isUndefined)(this.header.title)||!(0,s.isUndefined)(this.header.subtitle)||!(0,s.isUndefined)(this.header.allowHideLegend))}get showLegend(){return!(this.isLegendHidden||this.suppressLegend||((0,s.isUndefined)(this.legend)||(0,s.isUndefined)(this.legend.items)||!this.legend.items.length)&&(0,s.isUndefined)(this.gradientLegend))}get chartWidth(){return(0,s.isUndefined)(this.width)?this.currentContainerWidth:this.width}get chartHeight(){return(0,s.isUndefined)(this.height)?this.currentContainerHeight:this.height}get transition(){return this._domSanitizer.bypassSecurityTrustStyle(`all ${a.ANIMATION_DURATION.fast}\n      ${a.ANIMATION_TIMING_FUNCTION.base.transitionIn}`)}get chartBottomPadding(){return this._chartBottomPadding}set chartBottomPadding(e){this._chartBottomPadding=e}ngOnInit(){this.legend&&this.legend.width&&(this.legendWidth=this.legend.width)}ngAfterViewInit(){(0,p.timer)(0,p.asapScheduler).pipe((0,f.takeUntil)(this._destroyed$)).subscribe(()=>{this.redrawChart()}),this.width&&this.height||this._showEmptyText&&this._drawEmptyText()}ngOnDestroy(){this._removeListeners(),this._destroyed$.next(!0),this._destroyed$.complete(),this.hideTooltip()}redrawChart(){const{width:e,height:t}=this.chartContainerEl.nativeElement.getBoundingClientRect();this.header&&(0,s.isUndefined)(this.header.allowHideLegend)&&(this.header.allowHideLegend=!0),e&&this._isDataExists()&&(this.currentContainerWidth=e,this.currentContainerHeight=t,this._initChart()),a.SafeCdr.detectChanges(this._changeDetectorRef)}showTooltip(e,t,i,n,o,r){this.hideTooltip(),this._ngZone.run(()=>{e instanceof Element?this._tooltipOverlayWithPortal=this._overlayService.openOverlayWithPortal(new m.ComponentPortal(a.AdaptTooltipComponent,null,this._injector),{origin:e,positionStrategy:"connected",scrollStrategy:"close",connectedPositions:this._getTooltipPositions(o,r)}):(this._tooltipOverlayWithPortal=this._overlayService.openOverlayWithPortal(new m.ComponentPortal(a.AdaptTooltipComponent,null,this._injector),{origin:e,positionStrategy:"float",scrollStrategy:"close"}),this._tooltipOverlayWithPortal.overlayRef.updatePosition()),this._tooltipOverlayWithPortal.componentRef.instance.content=t,this._tooltipOverlayWithPortal.componentRef.instance.visible=!0,this._tooltipOverlayWithPortal.componentRef.instance.customCls=`${this._tooltipDefaultCustomCls} `+n,i&&(this._tooltipOverlayWithPortal.componentRef.instance.context=i)})}hideTooltip(){this._tooltipOverlayWithPortal&&(this._tooltipOverlayWithPortal.destroy(),this._tooltipOverlayWithPortal=null)}updateTooltip(e,t){this._tooltipOverlayWithPortal&&(e&&(this._tooltipOverlayWithPortal.componentRef.instance.content=e),t&&(this._tooltipOverlayWithPortal.componentRef.instance.context=t),this._tooltipOverlayWithPortal.overlayRef.updatePosition())}toggleLegend(){const{width:e}=this.chartAreaEl.nativeElement.getBoundingClientRect();let t;this.isLegendHidden=!this.isLegendHidden,t=this.isMobile?{w:e,h:this.currentSVGHeight}:{w:e+(this.isLegendHidden?this.legendWidth:-this.legendWidth),h:this.currentSVGHeight},this._setChartSize(!0,!1),this.updateChart&&this.updateChart(t),(0,s.isUndefined)(this.chartSliderCmp)||this.chartSliderCmp.updateSlider(t),(0,s.isUndefined)(this.areaChartSliderCmp)||this.areaChartSliderCmp.updateSlider(t)}clear(){d.select(`#${this.chartContainerId}`).selectAll("*").remove()}clickChartArea(e){this.clickChart.emit(e)}updateLegend(e){this.renderLegend&&this.legendComponent.update(e)}getGroupAndDimensions(){const e=d.select(`#${this.chartContainerId}`);return this._setChartSize(),{group:e,w:this.currentSVGWidth,h:this.currentSVGHeight}}updateChartBottomPadding(e,t,i,n=!1){if(!n)return void(this.chartBottomPadding=0);const o=d.scaleBand();o.range([0,e]).domain(i.categories);const r=d.axisBottom(o).tickSizeOuter(0).tickPadding(12);t.select("g.fake-axis").remove();const a=t.append("g").attr("class","fake-axis").attr("style","display: none").attr("aria-hidden","true").call(r),s=[];if(a.selectAll("text").each(function(){const e=d.select(this).node().getComputedTextLength();s.push(e)}),s.length){const e=Math.max.apply(Math,s),t=e>this.defaultMaxAxisWidth?this.defaultMaxAxisWidth:e;this.chartBottomPadding=Math.sqrt(Math.pow(t,2)/2)}else this.chartBottomPadding=0}transformAxisTitles(e,t){const i=e.selectAll("text");i.style("text-anchor",t?"end":"middle").attr("dx",t?"-.8em":"0").attr("dy",t?".15em":"9").attr("transform",t?"rotate(-45)":"rotate(0)"),t&&i.call(P,this.defaultMaxAxisWidth)}_initChart(){this._setContainerSize(),this._setChartSize(),this._drawChart()}_setContainerSize(){const{width:e,height:t}=this;this.currentContainerWidth=(0,s.isUndefined)(e)?this.currentContainerWidth:e,this.currentContainerHeight=(0,s.isUndefined)(t)?this.currentContainerHeight:t}_setChartSize(e=!0,t=!0){if(t){const e=this.chartAreaEl.nativeElement.getBoundingClientRect().height,t=this.chartSliderEl.nativeElement.getBoundingClientRect().height;this.currentSVGHeight=e-t}if(e){const e=this.chartContainerEl.nativeElement.getBoundingClientRect().width;this.currentSVGWidth=e-(this.showLegend&&!this.isMobile?this.legendWidth:0)}}_drawChart(){if(!this.dataBuilder)return;const e=this.getGroupAndDimensions();e.group.selectAll("*").remove(),this.dataBuilder(e.group,{w:e.w,h:e.h})}_isDataExists(){return!(0,s.isUndefined)(this._data)&&!(0,s.isNull)(this._data)}_drawEmptyText(){d.select(`#${this.chartContainerId}`).append("text").attr("text-anchor","middle").style("transform","translate(50%, 50%)").style("font-size","13px").style("fill","currentcolor").classed("text-default",!0).text(this.noDataText||this._emptyText)}_removeListeners(){this._removeClickEventListener&&this._removeClickEventListener(),this._removeScrollEventListener&&this._removeScrollEventListener()}_getTooltipPositions(e,t){return(0,s.isNumber)(e)&&e!==this._tooltipOverlayDefaultOffset&&(this._tooltipOverlayDefaultOffset=e,this._tooltipOverlayPlacements.top.offsetY=-this._tooltipOverlayDefaultOffset,this._tooltipOverlayPlacements.bottom.offsetY=this._tooltipOverlayDefaultOffset,this._tooltipOverlayPlacements.left.offsetX=-this._tooltipOverlayDefaultOffset,this._tooltipOverlayPlacements.right.offsetX=this._tooltipOverlayDefaultOffset),t?[this._tooltipOverlayPlacements.right,this._tooltipOverlayPlacements.left,this._tooltipOverlayPlacements.top,this._tooltipOverlayPlacements.bottom]:[this._tooltipOverlayPlacements.top,this._tooltipOverlayPlacements.bottom,this._tooltipOverlayPlacements.left,this._tooltipOverlayPlacements.right]}}Se.\u0275fac=function(e){return new(e||Se)(r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](h.Directionality),r["\u0275\u0275directiveInject"](u.DomSanitizer),r["\u0275\u0275directiveInject"](r.Injector),r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](a.AdaptOverlayService))},Se.\u0275cmp=r["\u0275\u0275defineComponent"]({type:Se,selectors:[["adapt-chart"]],contentQueries:function(e,t,i){if(1&e&&(r["\u0275\u0275contentQuery"](i,j,5),r["\u0275\u0275contentQuery"](i,te,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartSliderCmp=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.areaChartSliderCmp=e.first)}},viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](ae,7),r["\u0275\u0275viewQuery"](se,7),r["\u0275\u0275viewQuery"](le,5),r["\u0275\u0275viewQuery"](ce,5),r["\u0275\u0275viewQuery"](de,5),r["\u0275\u0275viewQuery"](pe,7)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartContainerEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartAreaEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.svgContainerEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.legendEl=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.legendComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartSliderEl=e.first)}},inputs:{title:"title",description:"description",backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",legend:"legend",renderLegend:"renderLegend",gradientLegend:"gradientLegend",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",noDataText:"noDataText",dataBuilder:"dataBuilder",updateChart:"updateChart",colorsPalette:"colorsPalette",topSectionTemplate:"topSectionTemplate",data:"data"},outputs:{categoryShow:"categoryShow",categoryHide:"categoryHide",categoryEnter:"categoryEnter",categoryLeave:"categoryLeave",categoryMove:"categoryMove",clickChart:"clickChart"},features:[r["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:["*","adapt-chart-slider","adapt-area-graph-slider"],decls:35,vars:17,consts:[[1,"adapt-chart",3,"click"],["chartContainer",""],["class","adapt-chart-header",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"adapt-chart-body"],[1,"adapt-chart-zone"],["chartArea",""],["xmlns","http://www.w3.org/2000/svg","class","adapt-chart-svg","tabindex","0","role","graphic/image",3,"transition",4,"ngIf"],[1,"adapt-chart-slider-wrapper"],["chartSlider",""],["class","adapt-legend-zone",3,"width","transition","ngClass",4,"ngIf"],[1,"adapt-chart-header"],["class","adapt-chart-header-title m-0",4,"ngIf"],["class","adapt-chart-context-menu-btn","role","button",3,"click",4,"ngIf"],[1,"adapt-chart-header-title","m-0"],["role","button",1,"adapt-chart-context-menu-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","tabindex","0","role","graphic/image",1,"adapt-chart-svg"],["svgContainer",""],["id","desc"],[1,"adapt-chart-group"],[1,"adapt-legend-zone",3,"ngClass"],[3,"containerWidth","increaseColor","decreaseColor","zeroColor","increaseText","decreaseText","zeroText","height","focusable"],["legend",""],[3,"focusable","activeHover","activeClick","customColors","items","width","columns","colorsPalette","categoryShow","categoryHide","categoryEnter","categoryLeave","categoryMove"],["legendComponent",""]],template:function(e,t){1&e&&(r["\u0275\u0275projectionDef"](be),r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275elementStart"](2,"div",0,1),r["\u0275\u0275listener"]("click",function(e){return t.clickChartArea(e)}),r["\u0275\u0275text"](4,"\n\n    "),r["\u0275\u0275template"](5,he,6,2,"div",2),r["\u0275\u0275text"](6,"\n\n    "),r["\u0275\u0275text"](7,"\n    "),r["\u0275\u0275template"](8,fe,1,0,"ng-container",3),r["\u0275\u0275text"](9,"\n\n    "),r["\u0275\u0275elementStart"](10,"div",4),r["\u0275\u0275text"](11,"\n      "),r["\u0275\u0275elementStart"](12,"div",5,6),r["\u0275\u0275text"](14,"\n        "),r["\u0275\u0275projection"](15),r["\u0275\u0275text"](16,"\n        "),r["\u0275\u0275template"](17,ge,8,10,"svg",7),r["\u0275\u0275text"](18,"\n        "),r["\u0275\u0275elementStart"](19,"div",8,9),r["\u0275\u0275text"](21,"\n          "),r["\u0275\u0275projection"](22,1),r["\u0275\u0275text"](23,"\n          "),r["\u0275\u0275projection"](24,2),r["\u0275\u0275text"](25,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](26,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](27,"\n      "),r["\u0275\u0275template"](28,xe,5,16,"div",10),r["\u0275\u0275text"](29,"\n      "),r["\u0275\u0275template"](30,ye,7,15,"div",10),r["\u0275\u0275text"](31,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](32,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](33,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](34,"\n")),2&e&&(r["\u0275\u0275styleProp"]("height",t.chartHeight+t.chartBottomPadding,"px"),r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("width",t.chartWidth,"px")("height",t.chartHeight,"px"),r["\u0275\u0275classProp"]("adapt-chart-mobile",t.isMobile),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.showHeader),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngTemplateOutlet",t.topSectionTemplate),r["\u0275\u0275advance"](4),r["\u0275\u0275styleProp"]("width",0,"px")("background-color",t.$this.backgroundColor),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.dataBuilder),r["\u0275\u0275advance"](11),r["\u0275\u0275property"]("ngIf",t.gradientLegend),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.legend&&t.renderLegend))},directives:[v.NgIf,v.NgTemplateOutlet,v.NgClass,re,H],encapsulation:2});class we{}we.K=Math.pow(10,3),we.M=Math.pow(10,6),we.G=Math.pow(10,9),we.T=Math.pow(10,12);class Ie{transform(e,t=2){const i=Object.keys(we);let n;return i.some((t,o)=>{const r=i[o-1];if(e<we[t])if(r){const t=e%we[r];n=(e/we[r]).toFixed(t?1:0)+r}else n=Number(e.toFixed(6)).toString();return e<we[t]}),n}}function _e(e,t,i){let n="",o=i;const r=t.split(""),a=r.length;e.selectAll("*").remove();const s=e.append("tspan").attr("class","ellipsis").text("..."),l=e.insert("tspan",":first-child").text(r.join(""));for(l.node().getComputedTextLength()>o&&r.length&&(o=i-s.node().getComputedTextLength());l.node().getComputedTextLength()>o&&r.length;)r.pop(),l.text(r.join(""));return r.length===a?(s.remove(),n=l.text()):n=l.text()+"...",n}Ie.\u0275fac=function(e){return new(e||Ie)},Ie.\u0275pipe=r["\u0275\u0275definePipe"]({name:"cutNumber",type:Ie,pure:!0});const De=["tooltipTpl"],Re=["tooltipListInfoTpl"];function Ae(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"adapt-chart-slider",5),r["\u0275\u0275listener"]("rangeChanged",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().changeDataRange(t)}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("slidePointsCount",e.slidePointsCount)("height",e.sliderHeight)("xAxis",e.xAxis)("data",e.sliderData)("containerWidth",e.chartWidth)("customColors",null==e.legend?null:e.legend.customColors)("leftShift",e.leftShift)("type",e.sliderType)("stackedChart",e.getStackedChart())}}function Te(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275elementStart"](1,"div",6),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275elementStart"](3,"div"),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275element"](5,"span",7),r["\u0275\u0275text"](6,"\n          "),r["\u0275\u0275elementStart"](7,"span",8),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n          "),r["\u0275\u0275elementStart"](10,"span"),r["\u0275\u0275elementStart"](11,"b"),r["\u0275\u0275text"](12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](13,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n        "),r["\u0275\u0275elementStart"](15,"div"),r["\u0275\u0275text"](16,"\n          Total:\n          "),r["\u0275\u0275elementStart"](17,"span"),r["\u0275\u0275elementStart"](18,"b"),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](20,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](21,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](22,"\n    ")),2&e){const e=t.data;r["\u0275\u0275advance"](5),r["\u0275\u0275styleProp"]("background-color",null==e?null:e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",e.category,":"),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.value),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate"](e.total)}}function Fe(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275element"](2,"span",7),r["\u0275\u0275text"](3,"\n            "),r["\u0275\u0275elementStart"](4,"span",8),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n            "),r["\u0275\u0275elementStart"](7,"span"),r["\u0275\u0275elementStart"](8,"b"),r["\u0275\u0275text"](9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n          "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("background-color",null==e?null:e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("",e.category,":"),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.value)}}function Ee(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275template"](2,Fe,11,4,"ng-container",12),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0!==e.value)}}function Me(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275template"](3,Ee,4,1,"div",10),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275element"](5,"hr",11),r["\u0275\u0275text"](6,"\n        "),r["\u0275\u0275elementStart"](7,"div"),r["\u0275\u0275text"](8,"\n          Total:\n          "),r["\u0275\u0275elementStart"](9,"span"),r["\u0275\u0275elementStart"](10,"b"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](13,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](14,"\n    ")),2&e){const e=t.data;r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",e.seriesData),r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate"](e.total)}}let Oe=1;class ke extends I{constructor(e,t){super(),this._cutNumber=e,this._colorService=t,this.sliderType=n.bar,this.sliderHeight=36,this.heightZero=0,this.showSlider=!1,this.hasTotalLabels=!1,this.rotateXAxis=!1,this.scientificMode=!1,this.renderLegend=!0,this.showEmptyColIndicator=!0,this.clickChart=new r.EventEmitter,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this.alreadyChanged=!1,this._data=[],this._dataFull=[],this._colors=[],this._maxTicksCount=7,this._totalByCol={},this._categoryFilter=[],this._axisXThickness=50,this._axisYThickness=25,this._axisTitleThickness=20,this._legend={columns:2,activeHover:!0,activeClick:!0,width:250,customColors:null,items:[]},this._series=[],this._startDataPiece=0,this._cls={axis:"adapt-chart-axis",axisHidden:"adapt-chart-axis__hidden",axisTitle:"adapt-chart-axis-title",axisXTitle:"adapt-chart-axis-x-title",axisYTitle:"adapt-chart-axis-y-title",barXAxis:"bar-x-axis",barYAxis:"bar-y-axis",colXAxis:"col-x-axis",colYAxis:"col-y-axis",category:"adapt-chart-bars-category",areaGroup:"adapt-chart-area-group",areaTooltipLines:"adapt-chart-area-tooltip-lines",dataRect:"adapt-chart-data-rect",totalLabelsGroup:"total-labels-group",totalLabelsGroupItem:"total-labels-group-item",totalLabelItem:"total-label-item",thresholdLineArea:"threshold-line-area"},this._emptyColIndicatorWidth=22,this._emptyColIndicatorHeight=24,this.updateChart=this.updateChart.bind(this),this._dataBuilder=this._dataBuilder.bind(this),this._id="stacked-chart-"+Oe++}get isHorizontalSeries(){return"horizontal"===this.seriesDisplay}set series(e){if(this.sliderData=e,this._categoryFilter=[],e.forEach(e=>{e.hidden&&this._categoryFilter.push(e.name)}),this.showSlider?this._series=this._getDataRange():this._series=e,this.alreadyChanged){const e=this.chartComponent.getGroupAndDimensions();this._g=e.group,this._dim={w:e.w,h:e.h}}this._g&&this._dim&&this.chartComponent&&this.chartComponent.updateLegend(this.series.map(e=>({item:e.name,hidden:!!e.hidden,hover:!1})))}get series(){return this._series}set legend(e){this._legend=Object.assign(this._legend,e),this.alreadyChanged&&this.chartComponent.redrawChart()}get legend(){return{customColors:this._legend.customColors,activeHover:this._legend.activeHover,activeClick:this._legend.activeClick,columns:this._legend.columns,width:this._legend.width,items:this.series&&this.series.map(e=>({item:e.name,hidden:!!e.hidden}))}}get leftShift(){return this._margin.left}get chartWidth(){return this.width||this.chartComponent.chartWidth}get duration(){return 1e3*parseFloat(a.ANIMATION_DURATION.fast)}get _margin(){return{top:0,left:!this.hideAxises&&this.xAxis?(this.xAxis.thickness||this._axisXThickness)+(this.xAxis.title?this._axisTitleThickness:0):0,right:0,bottom:!this.hideAxises&&this.yAxis?(this.yAxis.thickness||this._axisYThickness)+(this.yAxis.title?this._axisTitleThickness:0):0}}ngOnInit(){this.scientificMode&&c().config({EXPONENTIAL_AT:4}),this.showSlider&&!this.slidePointsCount&&this._initSlidePointsCount(),this.alreadyChanged=!0}ngOnChanges(e){(e.type||e.showSlider||e.thresholdLine||e.seriesDisplay||e.hasTotalLabels||e.barWidth||e.rotateXAxis)&&this.alreadyChanged&&this._dim&&this.chartComponent.redrawChart()}updateChart(e){e?this._dim=e:e=this._dim,this._initData(),this._prepareOrdinal(),this._updateAxisX(e),this._updateAxisY(e),this._updateData(),this._updateThresholdLineArea()}_dataBuilder(e,t){this._g=e,this._dim=t,this._clear(),this._initData(),this._prepareOrdinal(),this._drawAxisX(e,t),this._drawAxisY(e,t),this._drawData(e),this._updateThresholdLineArea()}getStackedChart(){return this}categoryEnterHandler(e){const t=this._g.select(`[data-category-id='${e.id}']`),i=t.attr("fill"),n=this._colorService.getDarken(i,.15,a.ColorType.HEX);this._highlightColor=i,t.attr("fill",n)}categoryLeaveHandler(e){this._g.select(`[data-category-id='${e.id}']`).attr("fill",this._highlightColor)}categoryShowHandler(e){const t=this._categoryFilter.indexOf(e);-1!==t&&this._categoryFilter.splice(t,1),this.updateChart(null),(0,a.isUndefined)(this.chartSliderComponent)||this.chartSliderComponent.showCategory(e),this.categoryShow.emit({category:e})}categoryHideHandler(e){this._categoryFilter.push(e),this.updateChart(null),(0,a.isUndefined)(this.chartSliderComponent)||this.chartSliderComponent.hideCategory(e),this.categoryHide.emit({category:e})}clickChartArea(e){const t=e.target;if(t.classList.contains(this._cls.dataRect)){const i=d.select(t.parentNode).attr("fill"),n=t.parentNode.getAttribute("data-category-id"),o=this.series[n].name,r=t.getAttribute("data-id"),a=this._data[r][o],s=Object.keys(this._data[r]),l=this._data[r].name,c=s.indexOf("name");s.splice(c,1);const p=s.reduce((e,t)=>e+this._data[r][t],0);this.clickChart.emit({event:e,data:this.series.filter(e=>o===e.name)[0],axisCategory:l,color:i,categoryId:o,value:a,total:p})}}changeDataRange(e){this._startDataPiece=e.startPiece,this._endDataPiece=e.endPiece,this._series=this._getDataRange(),this._totalByCol={}}getFormattedSeries(e){const t=e.series.map(e=>({categoryName:e.name,seriesValues:Object.entries(e).filter(e=>"name"!==e[0])})).find(t=>t.categoryName===e.category),i=t.seriesValues.reduce((e,t)=>e+t[1],0);return t.seriesValues=t.seriesValues.map((e,t)=>({category:e[0],value:e[1],color:this.legend.customColors?this._getCustomColorById(t):this._colorService.getColor(t)})),{seriesData:t.seriesValues,total:i}}_initData(){this.showSlider&&(this._endDataPiece=this._endDataPiece||this.slidePointsCount);const e=this.showSlider?this.xAxis.categories.slice(this._startDataPiece,this._endDataPiece):this.xAxis.categories;this._data=[],this._dataFull=[],e.forEach((e,t)=>{const i={name:e};this.series.forEach(e=>{-1===this._categoryFilter.indexOf(e.name)?(i[e.name]=i[e.name]||0,i[e.name]+=e.data[t]):i[e.name]=0}),this._data.push(i)}),this.xAxis.categories.forEach((e,t)=>{const i={name:e};this.sliderData.forEach(e=>{-1===this._categoryFilter.indexOf(e.name)?(i[e.name]=i[e.name]||0,i[e.name]+=e.data[t]):i[e.name]=0}),this._dataFull.push(i)}),this._data.forEach(e=>{const{name:t}=e,i=Object.keys(e);this._totalByCol[t]=0,i.forEach(i=>{"name"!==i&&(this.scientificMode?this._totalByCol[t]=new(c())(this._totalByCol[t]).plus(e[i]):this._totalByCol[t]+=e[i])})})}_prepareOrdinal(){this._keys=this.series.map(e=>e.name),this._colors=[],this.series.forEach((e,t)=>{this._colors.push(this._legend.customColors?this._getCustomColorById(t):this._colorService.getColor(t))}),this._ordinal=d.scaleOrdinal().range(this._colors).domain(this._keys)}_drawAxisX(e,t){switch(this.type){case o.Bar:this._drawAxisXForBar(e,t);break;case o.Column:this._drawAxisXForColumn(e,t);break;case o.Area:this._drawAxisXForArea(e,t)}}_drawAxisXForBar(e,t){const i=this._getTicks().reverse();this._drawAxisTitle(e,t,this.xAxis.title,!0),this._xScale=d.scaleLinear(),this._xScale.rangeRound([t.w-this._margin.left-this._margin.right,0]).domain([i[0],0]),this._xAxisCall=d.axisBottom(this._xScale).tickValues(i).tickSize(-t.h+this._margin.top+this._margin.bottom).tickFormat((e,t)=>(0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver(e,t):this._getTickFormatForNumber(e)).tickPadding(15),e.append("g").attr("role","axis").attr("class",`${this._cls.axis} ${this._cls.barXAxis} ${this.hideAxises?this._cls.axisHidden:""}`).attr("transform",`translate(${this._margin.left}, ${t.h-this._margin.top-this._margin.bottom})`).transition().duration(this.duration).call(this._xAxisCall)}_drawAxisXForColumn(e,t){const i=t.w-this._margin.left-this._margin.right;setTimeout(()=>{e.select(`.${this._cls.axisXTitle}`).remove(),this._drawAxisTitle(e,t,this.xAxis.title)},this.duration+100),this._xScale=d.scaleBand(),this._xScale.range([0,i]).padding(.25).domain(this.showSlider?this.xAxis.categories.slice(this._startDataPiece,this._endDataPiece):this.xAxis.categories),this._xAxisCall=d.axisBottom(this._xScale).tickFormat((0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver:null).tickSizeOuter(0).tickPadding(12),this.chartComponent.updateChartBottomPadding(i,this._g,this.xAxis,this.rotateXAxis);const n=e.append("g").attr("role","title").attr("class",`${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises||this.rotateXAxis?this._cls.axisHidden:""}`).attr("transform",`translate(${this._margin.left}, ${t.h-this._margin.bottom})`);n.call(this._xAxisCall),this.rotateXAxis&&setTimeout(()=>{this.chartComponent.transformAxisTitles(n,this.rotateXAxis),this.hideAxises||n.classed(this._cls.axisHidden,null)},this.duration)}_drawAxisXForArea(e,t){const i=t.w-this._margin.left-this._margin.right;setTimeout(()=>{e.select(`.${this._cls.axisXTitle}`).remove(),this._drawAxisTitle(e,t,this.xAxis.title)},this.duration+100),this._xScale=d.scalePoint().range([0,this._dim.w-this._margin.left-this._margin.right]).domain(this.xAxis.categories),this._xAxisCall=d.axisBottom(this._xScale).tickFormat((0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver:null).tickSizeOuter(0).tickPadding(12),this.chartComponent.updateChartBottomPadding(i,this._g,this.xAxis,this.rotateXAxis);const n=e.append("g").attr("role","title").attr("class",`${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises||this.rotateXAxis?this._cls.axisHidden:""}`).attr("transform",`translate(${this._margin.left}, ${t.h-this._margin.bottom})`);n.call(this._xAxisCall),this.rotateXAxis&&setTimeout(()=>{this.chartComponent.transformAxisTitles(n,this.rotateXAxis),this.hideAxises||n.classed(this._cls.axisHidden,null)},this.duration)}_drawAxisY(e,t){switch(this.type){case o.Bar:this._drawAxisYForBar(e,t);break;case o.Column:case o.Area:this._drawAxisYForColumn(e,t)}}_drawAxisYForBar(e,t){const i=this;this._drawAxisTitle(e,t,this.yAxis.title),this._yScale=d.scaleBand().rangeRound([0,t.h-this._margin.top-this._margin.bottom]).padding(.25).domain(this.xAxis.categories),this._yAxisCall=d.axisLeft(this._yScale).tickSizeOuter(0).tickFormat(function(e){return i._getTickFormatForString(e,this)}),e.append("g").attr("role","axis").attr("class",`${this._cls.axis} ${this._cls.barYAxis} ${this.hideAxises?this._cls.axisHidden:""}`).attr("transform",`translate(${this._margin.left}, 0)`).transition().duration(this.duration).call(this._yAxisCall)}_drawAxisYForColumn(e,t){const i=this._getTicks().reverse();this._drawAxisTitle(e,t,this.yAxis.title,!0),this._yScale=d.scaleLinear().rangeRound([0,t.h-this._margin.bottom-this._margin.top]).domain([i[0],0]),this._yAxisCall=d.axisLeft(this._yScale).tickValues(i).tickPadding(8).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-t.w+this._margin.left+this._margin.right),e.append("g").attr("role","axis").attr("class",`${this._cls.axis} ${this._cls.colYAxis} ${this.hideAxises?this._cls.axisHidden:""}`).attr("transform",`translate(${this._margin.left}, 0)`).transition().duration(this.duration).call(this._yAxisCall)}_drawData(e){switch(this.type){case o.Bar:this._drawDataBars(e);break;case o.Column:this._drawDataColumns(e);break;case o.Area:this._drawDataArea(e)}}_drawDataBars(e){let t;const i=this;this._bars=e.append("g").attr("role","data").selectAll("g").data(d.stack().keys(this._keys)(this._data));const n=this._xScale;if(this._bars.enter().append("g").attr("data-category-id",(e,t)=>t).attr("role","group").attr("aria-label",function(e,t){return i.series[t].name}).attr("class",(e,t)=>`category-${t}`).attr("class",this._cls.category).attr("fill",e=>this._ordinal(e.key)).selectAll("rect").data(e=>e).enter().append("rect").attr("class",this._cls.dataRect).attr("role","item").attr("data-id",(e,t)=>t).attr("x",e=>n(e[0])+this._margin.left+1).attr("y",e=>this._getBarYPosition(e.data.name)).attr("width",e=>n(e[1])-n(e[0])==0?this.heightZero:n(e[1])-n(e[0])).attr("height",this.barWidth?this.barWidth:this._yScale.bandwidth()).on("mouseenter",function(e){const{target:n}=d.event,o=n.parentNode.getAttribute("data-category-id");i.chartComponent.showTooltip(n,i.tooltip||i.tooltipTemplate,{data:{color:t,category:i.series[o].name,value:i._dividePoints(e[0],e[1]),total:i._totalByCol[e.data.name],data:i.series[o],event:d.event}})}).on("mouseleave",function(){const e=d.select(this);i.chartComponent.hideTooltip(),e.attr("fill",null)}).on("mouseover",function(){const e=d.select(this);t=e.select(function(){return this.parentNode}).attr("fill");const n=i._colorService.getDarken(t,.15,a.ColorType.HEX);e.attr("fill",n)}),this.showEmptyColIndicator){Object.keys(this._totalByCol).filter(e=>0===this._totalByCol[e]).forEach(e=>{const t=this._yScale(e)-this._margin.top+this._yScale.bandwidth()/2-this._emptyColIndicatorHeight/2,i=this._margin.left+10;this._drawEmptyDataIndicator(i,t,e)})}this._bars.exit().remove()}_getBarYPosition(e){return this.barWidth?this._yScale(e)+this._margin.top+this._yScale.bandwidth()/2-this.barWidth/2:this._yScale(e)+this._margin.top}_getWidthForColumn(){return this.barWidth?this.barWidth:this.isHorizontalSeries?this._xScale.bandwidth()/this.series.length:this._xScale.bandwidth()}_getColumnYPosForHorizontalSeries(e){return this._yScale(e[0]?e[1]-e[0]:e[1])}_dividePoints(e,t){return this.scientificMode?new(c())(t).minus(e).toString():Number((t-e).toFixed(6)).toString()}_getColumnXPos(e,t){const i=this._xScale(e)+this._margin.left;return this.isHorizontalSeries?this.barWidth?i+(this._getCurrentCategoryIndex(t)-this.series.length/2)*this._getWidthForColumn()+this._xScale.bandwidth()/2:i+this._getCurrentCategoryIndex(t)*this._getWidthForColumn():this.barWidth?i+this._xScale.bandwidth()/2-this._getWidthForColumn()/2:i}_getColumnYPos(e){return this.isHorizontalSeries?this._getColumnYPosForHorizontalSeries(e):this._yScale(e[1])}_setYPos(e){return this._yScale(0)-this._getColumnYPosForHorizontalSeries(e)==0?this._getColumnYPos(e)-this.heightZero:this._getColumnYPos(e)}_setRectPositionAndScaleForColumnsType(e){return e.attr("x",(e,t,i)=>this._getColumnXPos(e.data.name,i[t])).attr("y",e=>this._setYPos(e)).attr("height",e=>this.isHorizontalSeries?this._yScale(0)-this._getColumnYPosForHorizontalSeries(e)==0?this.heightZero:this._yScale(0)-this._getColumnYPosForHorizontalSeries(e):this._yScale(e[0])-this._yScale(e[1])==0?this.heightZero:this._yScale(e[0])-this._yScale(e[1])).attr("width",()=>this._getWidthForColumn())}_drawDataColumns(e){let t;const i=this;this._bars=e.append("g").attr("role","data").selectAll("g").data(d.stack().keys(this._keys)(this._data));let n=this._bars.enter().append("g").attr("data-category-id",(e,t)=>t).attr("role","group").attr("aria-label",(e,t)=>this.series[t].name).attr("fill",e=>this._ordinal(e.key)).attr("class",this._cls.category).selectAll("rect").data(e=>e).enter().append("rect").attr("class",this._cls.dataRect).attr("role","item").attr("aria-label",e=>`${e.data.name}.: ${this._dividePoints(e[0],e[1])}`).attr("data-id",(e,t)=>t);if(n=this._setRectPositionAndScaleForColumnsType(n),this.showEmptyColIndicator){Object.keys(this._totalByCol).filter(e=>0===this._totalByCol[e]).forEach(e=>{const t=this._xScale(e)+this._margin.left+this._xScale.bandwidth()/2-this._emptyColIndicatorWidth/2,i=this._dim.h-this._margin.bottom-this._emptyColIndicatorHeight-10;this._drawEmptyDataIndicator(t,i,e)})}n.on("mouseenter",function(e){const{target:n}=d.event;let o=0,r=0;const a=Object.keys(e.data).filter(e=>"name"!==e);for(;r<a.length&&(e[0]!==o||e[1]!==o+e.data[a[r]]);r++)o+=e.data[a[r]];i.chartComponent.showTooltip(n,i.tooltip||i.tooltipTemplate,{data:{color:t,category:a[r],value:i._dividePoints(e[0],e[1]),total:i._totalByCol[e.data.name],data:i.series.filter(e=>e.name===a[r]),event:d.event}})}).on("mouseleave",function(){const e=d.select(this);i.chartComponent.hideTooltip(),e.attr("fill",null)}).on("mouseover",function(){const e=d.select(this);t=e.select(function(){return this.parentNode}).attr("fill");const n=i._colorService.getDarken(t,.15,a.ColorType.HEX);e.attr("fill",n)}),this._addTotalLabels(e),this._bars.exit().remove()}_drawDataArea(e){const t=d.stack().keys(this._keys)(this._data),i=this._getTicks();this._xScale=d.scalePoint(),this._xScale.range([this._margin.left+this._margin.right,this._dim.w]).domain(this.xAxis.categories),this._yScale=d.scaleLinear(),this._yScale.rangeRound([0,this._dim.h-this._margin.bottom-this._margin.top]).domain([i[i.length-1],0]);const n=d.area().x((e,t)=>this._xScale(this.xAxis.categories[t])).y0(e=>this._yScale(e[0])).y1(e=>this._yScale(e[1]));e.append("g").attr("class",this._cls.areaGroup).selectAll("path").data(t).join("path").attr("data-category-id",(e,t)=>t).attr("aria-label",(e,t)=>this.series[t].name).attr("fill",e=>this._ordinal(e.key)).attr("class",this._cls.category).attr("d",n),this._g.selectAll(`.${this._cls.areaTooltipLines}`).remove(),this._drawTooltipLinesForArea(e,this._dim)}_drawTooltipLinesForArea(e,t){const i=this,n=d.scalePoint().range([0,t.w-this._margin.left-this._margin.right]).domain(this.xAxis.categories),o=d.axisBottom(n).tickSize(-t.h+this._margin.top+this._margin.bottom).tickPadding(0),r=e.append("g").attr("role","axis").attr("class",`${this._cls.colYAxis} ${this._cls.areaTooltipLines}`).attr("transform",`translate(${this._margin.left}, ${t.h-this._margin.top-this._margin.bottom})`);r.transition().duration(this.duration).call(o),r.select("path").attr("opacity",0),r.selectAll("g text").remove(),r.selectAll("g line").attr("opacity",0),r.selectAll("g").append("rect").attr("pointer-events","all").attr("width",20).attr("height",t.h-this._margin.top-this._margin.bottom).attr("x",-10).attr("y",-t.h+this._margin.top+this._margin.bottom).on("mouseover",function(e){d.select(this.parentNode).select("line").attr("opacity",1);const{target:t}=d.event;i.chartComponent.showTooltip(t,i.tooltip||i.tooltipListInfoTemplate,{data:i.getFormattedSeries({category:e,series:i._data,event:d.event})},null,null,!0)}).on("mouseout",function(){d.select(this.parentNode).select("line").attr("opacity",0),i.chartComponent.hideTooltip()})}_addTotalLabels(e){const t=e.append("g").attr("class",this._cls.totalLabelsGroup).attr("opacity",this.hasTotalLabels?"1":"0").attr("text-anchor","middle");this._createTotalLabelsGroupsItems(t)}_createTotalLabelsGroupsItems(e){e.selectAll(`g.${this._cls.totalLabelsGroupItem}`).data(this._getTotalLabelsData()).enter().append("g").attr("class",this._cls.totalLabelsGroupItem).attr("opacity",e=>this._getTotalLabelGroupOpacity(e)).selectAll("g").data(e=>e).enter().append("g").attr("class",this._cls.totalLabelItem).attr("transform",(e,t,i)=>this._getTotalLabelTransform(e,i[t])).append("text").text(e=>this._getTotalLabelText(e)).attr("fill","currentColor").exit().remove()}_getTotalLabelGroupOpacity(e){return this.isHorizontalSeries&&-1!==this._categoryFilter.indexOf(e.key)?"0":"1"}_getTotalLabelText(e){const t=this.isHorizontalSeries?e[1]-e[0]:this._totalByCol[e.data.name];return this.totalLabelTextFormatter?this.totalLabelTextFormatter(t,e):t}_getTotalLabelTransform(e,t){return`translate(${this._getColumnXPos(e.data.name,t)+this._getWidthForColumn()/2}, ${this._getColumnYPos(e)-9})`}_getTotalLabelsData(){const e=d.stack().keys(this._keys)(this._data);return this.isHorizontalSeries?e:e.splice(-1)}_getCurrentCategoryIndex(e){return d.select(e.parentNode).datum().index}_getTicks(){const e=this._dataFull.map(e=>{const t=Object.keys(e).filter(e=>"name"!==e);return this.isHorizontalSeries?Math.max(...t.map(t=>e[t])):t.reduce((t,i)=>t+e[i],0)});let t=Math.max(...e);0===t&&(t=1),this.thresholdLine&&this.thresholdLine>t&&(t=this.thresholdLine);let i=Math.pow(10,Math.floor(Math.log10(t)))/2;const n=Math.pow(10,Math.floor(Math.log10(t)))/2;let o=Math.floor(t/i)+1;for(;o>=this._maxTicksCount;)i+=n,o=Math.floor(t/i)+1;return new Array(o).fill(0).map((e,t)=>(t+1)*i)}_clear(){this.chartComponent.clear(),this._data=[]}_updateData(){switch(this.type){case o.Bar:{const e=this._xScale;this._g.selectAll(`.${this._cls.category}`).data(d.stack().keys(this._keys)(this._data)).selectAll("rect").data(e=>e).attr("y",e=>this._yScale(e.data.name)+(this.barWidth?Math.floor(this._yScale.bandwidth()/2-this.barWidth/2):0)+this._margin.top).attr("height",this.barWidth||this._yScale.bandwidth()).transition().duration(this.duration).attr("width",t=>e(t[1])-e(t[0])).attr("x",t=>e(t[0])+this._margin.left+1);break}case o.Column:{const e=this._g.selectAll(`.${this._cls.category}`).data(d.stack().keys(this._keys)(this._data)).selectAll("rect").data(e=>e).transition().duration(this.duration);if(this._setRectPositionAndScaleForColumnsType(e),this.showEmptyColIndicator){const e=this;this._g.selectAll('g[class="tick empty-column"]').each(function(){const t=d.select(this),i=t.attr("aria-column"),n=e._xScale(i)+e._margin.left+e._xScale.bandwidth()/2-e._emptyColIndicatorWidth/2,o=e._dim.h-e._margin.bottom-e._emptyColIndicatorHeight-10;t.transition().duration(e.duration).attr("transform",`translate(${n}, ${o})`)})}break}case o.Area:this._g.selectAll(`.${this._cls.areaGroup}`).remove(),this._drawDataArea(this._g)}const e=this._g.selectAll(`.${this._cls.totalLabelsGroup}`);if(e.transition().duration(this.duration).attr("opacity",this.hasTotalLabels?"1":"0"),this.hasTotalLabels){const t=e.selectAll(`.${this._cls.totalLabelsGroupItem}`).data(this._getTotalLabelsData());t.exit().remove(),this._createTotalLabelsGroupsItems(e),t.attr("opacity",e=>this._getTotalLabelGroupOpacity(e)).selectAll(`.${this._cls.totalLabelItem}`).data(e=>e).transition().duration(this.duration).attr("transform",(e,t,i)=>this._getTotalLabelTransform(e,i[t])).selectAll("text").text(e=>this._getTotalLabelText(e))}}_updateThresholdLineArea(){let e=this._g.select(`.${this._cls.thresholdLineArea}`);if(!this.thresholdLine)return void e.remove();if(e.empty()){e=this._g.append("g").attr("class",this._cls.thresholdLineArea),e.append("rect").attr("class","threshold-area-rect").attr("x",0).attr("y",0).attr("fill","#000000").attr("style","pointer-events: none; opacity: .1;");const t=e.append("defs");t.append("marker").attr("class","threshold-line-marker").attr("id",`${this._id}-marker-start`).attr("viewBox","0 0 6 8").attr("markerWidth",6).attr("markerHeight",8).attr("refX",5).attr("refY",4).attr("orient","auto").append("path").attr("d","M 0 0 L 6 4 L 0 8 z"),t.append("marker").attr("class","threshold-line-marker").attr("id",`${this._id}-marker-end`).attr("viewBox","0 0 6 8").attr("markerWidth",6).attr("markerHeight",8).attr("refX",1).attr("refY",4).attr("orient","auto").append("path").attr("d","M 0 4 L 6 0 L 6 8 z"),e.append("line").attr("class","threshold-line").attr("stroke-width",1).attr("marker-start",`url(#${this._id}-marker-start)`).attr("marker-end",`url(#${this._id}-marker-end)`),e.append("text").attr("class","threshold-line-title-background"),e.append("text").attr("class","threshold-line-title")}const t=this._getTicks().pop(),i=this._dim.w-this._margin.left-this._margin.right,n=this._dim.h-this._margin.top-this._margin.bottom;switch(this.type){case o.Bar:{const o=i-i/t*this.thresholdLine,r=this._margin.left+i-o;e.select("rect.threshold-area-rect").transition().duration(this.duration).attr("transform",`translate(${r}, 0)`).attr("width",o).attr("height",n),e.select("line.threshold-line").transition().duration(this.duration).attr("x1",r).attr("x2",r).attr("y1",this._margin.top).attr("y2",this._margin.top+n),e.select("text.threshold-line-title-background").transition().duration(this.duration).attr("x",r).attr("y",this._margin.top+n).attr("text-anchor","middle").attr("dy","24").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine),e.select("text.threshold-line-title").transition().duration(this.duration).attr("x",r).attr("y",this._margin.top+n).attr("text-anchor","middle").attr("dy","24").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine);break}case o.Column:case o.Area:{const o=n-n/t*this.thresholdLine;e.select("rect.threshold-area-rect").transition().duration(this.duration).attr("transform",`translate(${this._margin.left}, 0)`).attr("width",i).attr("height",o),e.select("line.threshold-line").transition().duration(this.duration).attr("x1",this._margin.left).attr("x2",this._dim.w).attr("y1",o).attr("y2",o),e.select("text.threshold-line-title-background").transition().duration(this.duration).attr("x",this._margin.left-8).attr("y",o).attr("text-anchor","end").attr("dy",".32em").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine),e.select("text.threshold-line-title").transition().duration(this.duration).attr("x",this._margin.left-8).attr("y",o).attr("text-anchor","end").attr("dy",".32em").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine);break}}d.selectAll("g.tick").filter(e=>e===this.thresholdLine).remove()}_drawAxisTitle(e,t,i,n=!1){if(!(0,a.isString)(i)||this.hideAxises)return;let o;const r=e.append("g").attr("class",`${this._cls.axisTitle} ${n?this._cls.axisYTitle:this._cls.axisXTitle}`).attr("role","title");o=n?`rotate(-90) translate(-${(t.h-this._axisTitleThickness)/2} ${this._axisTitleThickness/2})`:`translate(${(t.w+this._axisTitleThickness)/2} ${t.h+this.chartComponent.chartBottomPadding})`,r.attr("transform",o).append("text").text(i).attr("text-anchor","middle").attr("transform",`translate(${this._axisTitleThickness/(n?2:1)} 0)`)}_updateAxisTitle(e,t){e.select(`.${this._cls.axisXTitle}`).transition().duration(this.duration).attr("transform",`translate(${(t.w+this._axisTitleThickness)/2} ${t.h+this.chartComponent.chartBottomPadding})`)}_updateAxisX(e){switch(this.type){case o.Bar:this._updateAxisXForBar(e);break;case o.Column:this._updateAxisXForColumn(e);break;case o.Area:this._updateAxisXForArea(e)}}_updateAxisXForBar(e){const t=this._getTicks().reverse();this._xScale=d.scaleLinear(),this._xScale.rangeRound([e.w-this._margin.left-this._margin.right,0]).domain([t[0],0]),this._xAxisCall=d.axisBottom(this._xScale).tickValues(t).tickSize(-e.h+this._margin.top+this._margin.bottom).tickFormat((e,t)=>(0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver(e,t):this._getTickFormatForNumber(e)).tickPadding(15),this._g.select(`.${this._cls.barXAxis}`).transition().duration(this.duration).call(this._xAxisCall)}_updateAxisXForColumn(e){this._xScale=d.scaleBand(),this._xScale.range([0,e.w-this._margin.left-this._margin.right]).padding(.25).domain(this.showSlider?this.xAxis.categories.slice(this._startDataPiece,this._endDataPiece):this.xAxis.categories),this._xAxisCall=d.axisBottom(this._xScale).tickFormat((0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver:null).tickSizeOuter(0).tickPadding(12),this.chartComponent.updateChartBottomPadding(e.w-this._margin.left-this._margin.right,this._g,this.xAxis,this.rotateXAxis);const t=this._g.select(`.${this._cls.colXAxis}`).attr("class",`${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises||this.rotateXAxis?this._cls.axisHidden:""}`);t.transition().duration(this.duration).call(this._xAxisCall),setTimeout(()=>{this.chartComponent.transformAxisTitles(t,this.rotateXAxis),this.hideAxises||t.classed(this._cls.axisHidden,null)},this.rotateXAxis?this.duration+100:0),this._updateAxisTitle(this._g,e)}_updateAxisXForArea(e){this._xScale=d.scalePoint(),this._xScale.range([0,e.w-this._margin.left-this._margin.right]).domain(this.showSlider?this.xAxis.categories.slice(this._startDataPiece,this._endDataPiece):this.xAxis.categories),this._xAxisCall=d.axisBottom(this._xScale).tickFormat((0,s.isFunction)(this.xAxisTickFormatResolver)?this.xAxisTickFormatResolver:null).tickSizeOuter(0).tickPadding(12),this.chartComponent.updateChartBottomPadding(e.w-this._margin.left-this._margin.right,this._g,this.xAxis,this.rotateXAxis);const t=this._g.select(`.${this._cls.colXAxis}`).attr("class",`${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises||this.rotateXAxis?this._cls.axisHidden:""}`);t.transition().duration(this.duration).call(this._xAxisCall),setTimeout(()=>{this.chartComponent.transformAxisTitles(t,this.rotateXAxis),this.hideAxises||t.classed(this._cls.axisHidden,null)},this.rotateXAxis?this.duration+100:0),this._updateAxisTitle(this._g,e)}_updateAxisY(e){switch(this.type){case o.Bar:this._updateAxisYForBar(e);break;case o.Column:case o.Area:this._updateAxisYForColumn(e)}}_updateAxisYForBar(e){const t=this;this._yScale=d.scaleBand().rangeRound([0,e.h-this._margin.top-this._margin.bottom]).padding(.25).domain(this.xAxis.categories),this._yAxisCall=d.axisLeft(this._yScale).tickSizeOuter(0).tickFormat(function(e){return t._getTickFormatForString(e,this)}),this._g.select(`.${this._cls.barYAxis}`).transition().duration(this.duration).call(this._yAxisCall)}_updateAxisYForColumn(e){const t=this._getTicks().reverse();this._yScale=d.scaleLinear().rangeRound([0,e.h-this._margin.bottom-this._margin.top]).domain([t[0],0]),this._yAxisCall=d.axisLeft(this._yScale).tickValues(t).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-e.w+this._margin.left+this._margin.right),this._g.select(`.${this._cls.colYAxis}`).transition().duration(this.duration).call(this._yAxisCall)}_getCustomColorById(e){const t=this._legend.customColors;return t[e%t.length]}_getDataRange(){return this.sliderData.map(e=>{const{name:t,hidden:i}=e;let{data:n}=e;return n=n.slice(this._startDataPiece,this._endDataPiece),{name:t,data:n,hidden:i}})}_getDataLength(){return this._series[0].data.length}_initSlidePointsCount(){const e=this._getDataLength();this.slidePointsCount=e<12?4:e>=12&&e<36?6:12,this.sliderMonitorsCount=Math.ceil(e/this.slidePointsCount)}_drawEmptyDataIndicator(e,t,i){const n=this._g.select('g[role="data"]').append("g").attr("role","group").attr("class","tick empty-column").attr("aria-label","empty column").attr("aria-column",i).attr("transform",`translate(${e}, ${t})`);n.append("rect").attr("role","item").attr("width",this._emptyColIndicatorWidth).attr("height",this._emptyColIndicatorHeight).attr("rx",2),n.append("text").attr("x",this._emptyColIndicatorWidth/2).attr("y",this._emptyColIndicatorHeight/2).attr("alignment-baseline","middle").attr("text-anchor","middle").attr("dy",".1rem").text("0")}_getTickFormatForNumber(e){return this.scientificMode?new(c())(e).toPrecision(2,2):this._cutNumber.transform(e,0)}_getTickFormatForString(e,t){const i=d.select(t),n=_e(i,e,this.xAxis?this.xAxis.thickness||this._axisXThickness:0);return n!==e&&i.on("mouseenter",()=>{const{target:t}=d.event;this.chartComponent.showTooltip(t,e)}).on("mouseleave",()=>{this.chartComponent.hideTooltip()}),n}}ke.\u0275fac=function(e){return new(e||ke)(r["\u0275\u0275directiveInject"](Ie),r["\u0275\u0275directiveInject"](B))},ke.\u0275cmp=r["\u0275\u0275defineComponent"]({type:ke,selectors:[["adapt-stacked-chart"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](De,7),r["\u0275\u0275viewQuery"](Re,7),r["\u0275\u0275viewQuery"](Se,7),r["\u0275\u0275viewQuery"](j,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.tooltipListInfoTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartSliderComponent=e.first)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",dataBuilder:"dataBuilder",type:"type",xAxis:"xAxis",yAxis:"yAxis",showSlider:"showSlider",hasTotalLabels:"hasTotalLabels",seriesDisplay:"seriesDisplay",totalLabelTextFormatter:"totalLabelTextFormatter",barWidth:"barWidth",slidePointsCount:"slidePointsCount",hideAxises:"hideAxises",rotateXAxis:"rotateXAxis",xAxisTickFormatResolver:"xAxisTickFormatResolver",scientificMode:"scientificMode",renderLegend:"renderLegend",thresholdLine:"thresholdLine",showEmptyColIndicator:"showEmptyColIndicator",series:"series",legend:"legend"},outputs:{clickChart:"clickChart",categoryShow:"categoryShow",categoryHide:"categoryHide"},features:[r["\u0275\u0275ProvidersFeature"]([Ie]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:16,consts:[[3,"width","title","description","height","header","legend","renderLegend","data","backgroundColor","suppressHeader","suppressLegend","tooltip","noDataText","updateChart","dataBuilder","categoryShow","categoryHide","categoryEnter","categoryLeave","clickChart"],["chart",""],[3,"slidePointsCount","height","xAxis","data","containerWidth","customColors","leftShift","type","stackedChart","rangeChanged",4,"ngIf"],["tooltipTpl",""],["tooltipListInfoTpl",""],[3,"slidePointsCount","height","xAxis","data","containerWidth","customColors","leftShift","type","stackedChart","rangeChanged"],[1,"adapt-chart-tooltip-content-container"],[1,"adapt-chart-tooltip-color-spot"],[1,"adapt-chart-tooltip-category"],[1,"chart-tooltip-content-container","align-start"],[4,"ngFor","ngForOf"],[1,"mt-1","mb-1"],[4,"ngIf"]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"adapt-chart",0,1),r["\u0275\u0275listener"]("categoryShow",function(e){return t.categoryShowHandler(e)})("categoryHide",function(e){return t.categoryHideHandler(e)})("categoryEnter",function(e){return t.categoryEnterHandler(e)})("categoryLeave",function(e){return t.categoryLeaveHandler(e)})("clickChart",function(e){return t.clickChartArea(e)}),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275template"](4,Ae,1,9,"adapt-chart-slider",2),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n\n    "),r["\u0275\u0275template"](7,Te,23,5,"ng-template",null,3,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](9,"\n    "),r["\u0275\u0275template"](10,Me,15,2,"ng-template",null,4,r["\u0275\u0275templateRefExtractor"])),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("width",t.width)("title",(null==t.header?null:t.header.title)||"Graph chart")("description",(null==t.header?null:t.header.subtitle)||"Graph chart")("height",t.height)("header",t.header)("legend",t.legend)("renderLegend",t.renderLegend)("data",t.series)("backgroundColor",t.backgroundColor)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("tooltip",t.tooltip)("noDataText",t.noDataText)("updateChart",t.updateChart)("dataBuilder",t._dataBuilder),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.showSlider))},directives:[Se,v.NgIf,j,v.NgForOf],encapsulation:2});class je extends w{}je.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](je)))(t||je)}}(),je.\u0275dir=r["\u0275\u0275defineDirective"]({type:je,inputs:{data:"data",xAxis:"xAxis",yAxis:"yAxis"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const Pe=["heatmapDefaultTooltip"],Ne=["menuAnchor"],Ve=["menuContainer"];function Le(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",12),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).$implicit,i=r["\u0275\u0275nextContext"](4);return i.callAction(i.menuData.target,i.menuData.event,i.menuData.context,t)}),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n              ",e.title,"\n            ")}}function Be(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275template"](2,Le,2,1,"button",11),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.menuData.actions)}}function $e(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n        "),r["\u0275\u0275elementStart"](1,"div",9),r["\u0275\u0275text"](2,"\n          "),r["\u0275\u0275template"](3,Be,4,1,"div",10),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n      ")),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.menuData&&e.menuData.actions&&e.menuData.actions.length)}}function Ge(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",4,5),r["\u0275\u0275listener"]("popupAnimationDone",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().popupAnimationDone()}),r["\u0275\u0275text"](2,"\n      "),r["\u0275\u0275element"](3,"button",6,7),r["\u0275\u0275text"](5,"\n      "),r["\u0275\u0275template"](6,$e,6,1,"ng-template",8),r["\u0275\u0275text"](7,"\n    "),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("adaptRadarDisableEventSending",!0)("appendToBody",!0)}function ze(e,t){if(1&e&&r["\u0275\u0275element"](0,"adapt-icon",18),2&e){const e=r["\u0275\u0275nextContext"]().context,t=r["\u0275\u0275nextContext"]();r["\u0275\u0275styleProp"]("color",e.status.iconColor||e.status.color||t.defaultColor),r["\u0275\u0275property"]("adaptRadarDisableEventSending",!0)("name",e.status.icon)}}function Ue(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"small",19),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().context;r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.info)}}function qe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"label",20),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"div",21),r["\u0275\u0275text"](6,"\n            "),r["\u0275\u0275element"](7,"div",22),r["\u0275\u0275text"](8,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().context;r["\u0275\u0275advance"](2),r["\u0275\u0275styleProp"]("margin-left",e.progress+"%"),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",e.progress,"%"),r["\u0275\u0275advance"](4),r["\u0275\u0275styleProp"]("width",e.progress+"%"),r["\u0275\u0275attribute"]("aria-valuenow",e.progress)}}function Xe(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275elementStart"](3,"div"),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275template"](5,ze,1,4,"adapt-icon",14),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275template"](8,Ue,5,1,"div",15),r["\u0275\u0275text"](9,"\n        "),r["\u0275\u0275template"](10,qe,10,6,"div",15),r["\u0275\u0275text"](11,"\n        "),r["\u0275\u0275elementStart"](12,"div",16),r["\u0275\u0275text"](13,"\n          "),r["\u0275\u0275element"](14,"div",17),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n    ")),2&e){const e=t.context;r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.status.icon),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n          ",e.name,"\n        "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.info),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.progress),r["\u0275\u0275advance"](4),r["\u0275\u0275styleProp"]("background-color",e.status.bg),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n          ",e.status.name,"\n        ")}}const He=14;class We extends je{constructor(e,t,i){super(),this._changeDetectorRef=e,this._renderer=t,this._iconConfig=i,this.hasActionMenu=!1,this.defaultColor=getComputedStyle(document.documentElement).getPropertyValue("--gray-900"),this._dataBuilder=(function(e,t){this._g=e,this._calculateMargin();const i=t.w-(this._margin.left+this._margin.right),n=t.h-(this._margin.top+this._margin.bottom),o=this._openTooltip.bind(this),r=this._closeTooltip.bind(this),s=this._openMenu.bind(this),l=this._margin,c=this._ellipsis,p=this.clickChart,u=this._getPreparedData(i,n),m=e=>this._iconConfig.getIcon(e),h=this._g.selectAll("g").attr("transform",`translate(${l.left} ${l.top})`).data(u).enter().append("g").attr("class",e=>`heatmap-node status-group-${e.data.status.name.split(" ").join("_").toLowerCase()}`).attr("id",e=>e.data.name.split(" ").join("_")).attr("transform",e=>`translate(${e.x0}, ${e.y0})`).on("mouseenter",function(e){const t=d.event.detail,i=d.select(this);0!==t&&"legend"===(null==t?void 0:t.eventSource)||o(i.node(),{context:e.data}),d.select(this).selectAll("rect").each(function(){const e=d.select(this).node();e.classList.contains("menu-icon")||(e.style.fill=d.rgb(e.style.fill).darker(.3).formatHex())})}).on("mouseleave",function(){r(),d.select(this).selectAll("rect").each(function(){const e=d.select(this).node();e.classList.contains("menu-icon")||(e.style.fill=d.rgb(e.style.fill).brighter(.3).formatHex())})}).on("click",function(e){r(),p.emit(e.data),d.event.stopPropagation()});h.append("g").attr("class","treemap-node-bg").each(function(e){const t=d.select(this);t.append("rect").attr("width",e.x1-e.x0).attr("height",e.y1-e.y0).attr("style",()=>`\n              fill: ${e.data.status.bg};\n              opacity: .6;\n              transition: fill .2s;\n              cursor: pointer;`),t.append("rect").attr("width",()=>{const t=e.data.progress?e.data.progress/100:1;return(e.x1-e.x0)*t}).attr("height",e.y1-e.y0).attr("style",()=>`\n              fill: ${e.data.status.bg};\n              transition: fill .2s;\n              cursor: pointer;`)});const f=getComputedStyle(document.documentElement).getPropertyValue("--gray-900");if(h.append("g").attr("class","treemap-node-text").each(function(e){const t=d.select(this);let i,n;e.data.status.icon&&e.y1-e.y0>60&&(i=t.append("g").attr("transform",`translate(${(e.x1-e.x0)/2-7}, 0)`).html(m(e.data.status.icon)).select("svg").attr("width",He).attr("height",He).attr("fill",e.data.status.iconColor||e.data.status.color||f));const o=t.append("text").attr("transform",`translate(${(e.x1-e.x0)/2}, 0)`).attr("dy",i?32:0).attr("text-anchor","middle").attr("fill",e.data.status.color||f).attr("style","font-size: 13px;");c(o,e.data.name,e.x1-e.x0-15),i?t.attr("transform",`translate(0, ${(e.y1-e.y0)/2-He})`):t.attr("transform",`translate(0, ${(e.y1-e.y0)/2+9})`),e.data.info&&e.y1-e.y0>40&&(n=t.append("text").attr("transform",`translate(${(e.x1-e.x0)/2}, 0)`).attr("dy",i?50:18).attr("text-anchor","middle").attr("fill",e.data.status.color||f).attr("style","font-size: 12px; opacity: .7"),c(n,e.data.info,e.x1-e.x0-15),i?t.attr("transform",`translate(0, ${(e.y1-e.y0)/2-He-9})`):t.attr("transform",`translate(0, ${(e.y1-e.y0)/2})`))}),h.append("g").attr("class","heatmap__actions-menu").each(function(e){if(e.data.actions){const t=d.select(this);t.append("rect").attr("class","menu-icon").attr("cursor","pointer").attr("fill","transparent").attr("height",20).attr("width",20).attr("transform",`translate(${e.x1-e.x0-24}, 10)`),t.append("g").attr("transform",`translate(${e.x1-e.x0-24}, 10)`).html(x.ai_ellipsis.data).select("svg").attr("cursor","pointer").attr("fill",f).attr("height",20).attr("width",20)}}).on("click",function(e){if(e.data.actions){const t=d.select(this);s(t.node(),d.event,e.data),d.event.stopPropagation()}}),this.xAxis){const e=d.scaleBand().domain(this.xAxis.categories).range([0,i]),t=d.axisBottom(e).tickSizeOuter(0).tickSize(0).tickPadding(10);this._g.append("g").attr("class","adapt-chart-axis xAxis").attr("transform",`translate(${l.left}, ${n})`).call(t)}if(this.yAxis){const e=d.scaleBand().domain(this.yAxis.categories).range([0,n]),t=d.axisLeft(e).tickSizeOuter(0).tickSize(0).tickPadding(10);this._g.append("g").attr("class","adapt-chart-axis").attr("transform",`translate(${l.left}, 0)`).call(t)}a.SafeCdr.detectChanges(this._changeDetectorRef)}).bind(this),this._updateChart=(function(e){this._calculateMargin();const t=e.w-(this._margin.left+this._margin.right),i=e.h-(this._margin.top+this._margin.bottom),n=this._getPreparedData(t,i);if(this._g.selectAll("g.heatmap-node").data(n).transition().duration(200).attr("transform",e=>`translate(${e.x0}, ${e.y0})`),this._g.selectAll("g.treemap-node-bg rect:first-child").data(n).transition().duration(200).attr("width",e=>e.x1-e.x0),this._g.selectAll("g.treemap-node-bg rect:last-child").data(n).transition().duration(200).attr("width",e=>{const t=e.data.progress?e.data.progress/100:1;return(e.x1-e.x0)*t}),this._g.selectAll("g.heatmap__actions-menu rect").data(n.filter(e=>e.data.actions)).transition().duration(200).attr("transform",e=>`translate(${e.x1-e.x0-24}, 10)`),this._g.selectAll("g.heatmap__actions-menu use").data(n.filter(e=>e.data.actions)).transition().duration(200).attr("transform",e=>`translate(${e.x1-e.x0-24}, 10)`),this._g.selectAll(".treemap-node-text").data(n).each(function(e){d.select(this).select("use").transition().duration(200).attr("transform",`translate(${(e.x1-e.x0)/2-7}, 0)`),d.select(this).selectAll("text").transition().duration(200).attr("transform",`translate(${(e.x1-e.x0)/2}, 0)`)}),this.xAxis){const e=d.scaleBand().domain(this.xAxis.categories).range([0,t]),i=d.axisBottom(e).tickSizeOuter(0).tickSize(0).tickPadding(10);this._g.select("g.adapt-chart-axis.xAxis").transition().duration(200).call(i)}}).bind(this),this.clickChart=new r.EventEmitter,this._margin={top:0,right:0,bottom:0,left:0},this._closeMenuBind=this._closeMenu.bind(this)}ngOnInit(){this.legend&&(this.legend.columns=1,this.legend.activeHover=!1,this.legend.activeClick=!1),this._initLegend()}ngOnDestroy(){this._removeListeners()}callAction(e,t,i,n){n.callback(e,t,i)}popupAnimationDone(){this.menuContainer.isOpen()?(this._removeClickEventListener=this._renderer.listen("document","click",this._closeMenuBind),this._removeScrollEventListener=this._renderer.listen("document","scroll",this._closeMenuBind)):this._removeListeners()}_categoryEnter(e){this._g.selectAll(`.status-group-${this._legend.items[e.id.toString()].split(" ").join("_").toLowerCase()}`).dispatch("mouseenter",{bubbles:!0,cancelable:!0,detail:{eventSource:"legend"}})}_categoryLeave(e){this._g.selectAll(`.status-group-${this._legend.items[e.id.toString()].split(" ").join("_").toLowerCase()}`).dispatch("mouseleave")}_calculateMargin(){this._margin.left=this.yAxis?60:0,this._margin.bottom=this.xAxis?38:0}_getPreparedData(e,t){const i=Math.round(e),n=this.data.items.length,o=Math.round(t/n),r=[];return this.data.items.forEach((e,t)=>{let n=0;e.forEach(e=>{n+=e.size});let a=this._margin.left+1;const s=i/n;e.forEach(e=>{r.push({data:e,x0:Math.round(a),y0:Math.round(this._margin.top+o*t),x1:Math.round(a+s*e.size-1),y1:Math.round(this._margin.top+o*t+o-1)}),a+=s*e.size})}),this.hasActionMenu=r.some(e=>e.data.actions&&e.data.actions.length),r}_openMenu(e,t,i){this._closeTooltip(),this.menuContainer.placement="bottom-right",this.menuContainer.positionTo=e,this.menuData={target:e,event:t,context:i,actions:i.actions},this.menuAnchor.toggleOpen(t),a.SafeCdr.detectChanges(this._changeDetectorRef)}_closeMenu(){this.menuContainer&&this.menuContainer.close(),this._removeListeners()}_openTooltip(e,t){this.chartBase.showTooltip(e,this.tooltip||this.heatmapDefaultTooltip,t)}_closeTooltip(){this.chartBase.hideTooltip()}_initLegend(){if(this.suppressLegend)return;const e=[];this.data.items.forEach(t=>{t.forEach(t=>{if(t.status){e.filter(e=>t.status.name===e.name).length||e.push({name:t.status.name,color:t.status.bg})}})}),e.length&&(this._legend={columns:1,items:e.map(e=>e.name),customColors:e.map(e=>e.color),activeHover:!1,activeClick:!1})}_ellipsis(e,t,i){const n=t.split(""),o=e.append("tspan").attr("class","ellipsis").text("..."),r=i-o.node().getComputedTextLength(),a=n.length,s=e.insert("tspan",":first-child").text(n.join(""));for(;s.node().getComputedTextLength()>r&&n.length;)n.pop(),s.text(n.join(""));n.length===a&&o.remove()}_removeListeners(){this._removeClickEventListener&&(this._removeClickEventListener(),this._removeClickEventListener=null),this._removeScrollEventListener&&(this._removeScrollEventListener(),this._removeScrollEventListener=null)}}We.\u0275fac=function(e){return new(e||We)(r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](a.AdaptIconConfig))},We.\u0275cmp=r["\u0275\u0275defineComponent"]({type:We,selectors:[["adapt-heatmap"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](Se,7),r["\u0275\u0275viewQuery"](Pe,7),r["\u0275\u0275viewQuery"](Ne,5,a.AdaptDropdownToggleDirective),r["\u0275\u0275viewQuery"](Ve,5,a.AdaptDropdownDirective)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartBase=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.heatmapDefaultTooltip=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.menuAnchor=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.menuContainer=e.first)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",legend:"legend",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",data:"data",xAxis:"xAxis",yAxis:"yAxis",noDataText:"noDataText"},outputs:{clickChart:"clickChart"},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:13,consts:[[3,"data","width","height","header","legend","backgroundColor","suppressHeader","suppressLegend","tooltip","dataBuilder","updateChart","noDataText","categoryEnter","categoryLeave"],["chartBase",""],["class","dropdown heatmap-chart_hidden-menu","adaptDropdown","",3,"adaptRadarDisableEventSending","appendToBody","popupAnimationDone",4,"ngIf"],["heatmapDefaultTooltip",""],["adaptDropdown","",1,"dropdown","heatmap-chart_hidden-menu",3,"adaptRadarDisableEventSending","appendToBody","popupAnimationDone"],["menuContainer",""],["adaptDropdownToggle","","type","button"],["menuAnchor",""],["adaptDropdownMenuTemplate",""],[1,"dropdown-menu"],[4,"ngIf"],["class","dropdown-item","type","button",3,"click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"click"],[1,"text-left"],["class","icon-inline",3,"adaptRadarDisableEventSending","name","color",4,"ngIf"],["class","pt-2",4,"ngIf"],[1,"pt-2"],[2,"width","8px","height","8px","margin","0 4px 1px 2px","display","inline-block","vertical-align","middle"],[1,"icon-inline",3,"adaptRadarDisableEventSending","name"],[1,"text-secondary"],[1,"progress-label"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary-muted"]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"adapt-chart",0,1),r["\u0275\u0275listener"]("categoryEnter",function(e){return t._categoryEnter(e)})("categoryLeave",function(e){return t._categoryLeave(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275template"](4,Ge,8,2,"div",2),r["\u0275\u0275text"](5,"\n\n    "),r["\u0275\u0275template"](6,Xe,18,7,"ng-template",null,3,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](8,"\n  ")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("data",t.data)("width",t.width)("height",t.height)("header",t.header)("legend",t._legend)("backgroundColor",t.backgroundColor)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("tooltip",t.tooltip)("dataBuilder",t._dataBuilder)("updateChart",t._updateChart)("noDataText",t.noDataText),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.hasActionMenu))},directives:[Se,v.NgIf,a.AdaptDropdownDirective,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuTemplateDirective,v.NgForOf,a.AdaptIconComponent],styles:[".heatmap-chart_hidden-menu[_ngcontent-%COMP%] {\n      opacity: 0;\n      visibility: hidden;\n      height: 0\n    }"]});class Ye extends w{}Ye.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](Ye)))(t||Ye)}}(),Ye.\u0275dir=r["\u0275\u0275defineDirective"]({type:Ye,inputs:{xAxis:"xAxis",yAxis:"yAxis",series:"series",hideAxises:"hideAxises"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const Qe=["tooltipTpl"];function Ke(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"adapt-area-graph-slider",3),r["\u0275\u0275listener"]("rangeChanged",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().rangeChanged(t)})("scrollEnd",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().scrollEnd()}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",e.sliderData)("xAxis",e.xAxis)("slidePointsCount",e.slidePointsCount)("customColors",null==e.legend?null:e.legend.customColors)("xBrush",e.xBrush)("leftShift",e.leftShift)("containerWidth",e.chartWidth)}}function Je(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div",4),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275elementStart"](3,"div",5),r["\u0275\u0275text"](4,"\n      "),r["\u0275\u0275element"](5,"span",6),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementStart"](7,"span",7),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n    "),r["\u0275\u0275elementStart"](11,"div"),r["\u0275\u0275text"](12),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275elementStart"](14,"b"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n\n    "),r["\u0275\u0275elementStart"](18,"div"),r["\u0275\u0275text"](19),r["\u0275\u0275elementStart"](20,"span"),r["\u0275\u0275elementStart"](21,"b"),r["\u0275\u0275text"](22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n")),2&e){const e=t.data,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275styleProp"]("background",null==e?null:e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.category),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",i.getTooltipXValueTitle(),":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.xValue),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",null==i.yAxis?null:i.yAxis.title,":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.yValue)}}let Ze=1;class et extends Ye{constructor(e,t,i,n,o){super(),this._cutNumber=e,this._deviceDetectionService=t,this._colorService=i,this._ngZone=n,this._changeDetectorRef=o,this.alreadyChanged=!1,this.sliderData=[],this.sliderDomainData=[],this._dataBuilderBind=this._dataBuilder.bind(this),this._updateChartBind=this._updateChart.bind(this),this.componentNumericalValues={circleRadius:6,maxTicksCount:7,axisShift:{top:0,right:0,bottom:25,left:25},margin:{top:0,right:0,bottom:25,left:50},marginMobile:40},this.circleRadius=this.componentNumericalValues.circleRadius,this._series=[],this._maxTicksCount=this.componentNumericalValues.maxTicksCount,this._data=[],this._isDeselected=[],this._colors=[],this._destroy$=new p.ReplaySubject(1),this._axisShift=Object.assign({},this.componentNumericalValues.axisShift),this.colorsPalette="gradient",this.supressAxles=!1,this.showLineCircles=!0,this.rotateXAxis=!1,this.showSlider=!1,this.disallowPadding=!1,this.scientificMode=!1,this.clickChart=new r.EventEmitter,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this._thresholdLine=null,this._legend={columns:1,activeHover:!0,activeClick:!0,width:250,customColors:null,items:[]},this._id="line-graph-"+Ze++}get _margin(){return{top:0,left:this.isMobile()?this.componentNumericalValues.marginMobile:this.disallowPadding?0:this.yAxis&&this.yAxis.title?this.componentNumericalValues.margin.left+this._axisShift.left:this.componentNumericalValues.margin.left,right:0,bottom:this.disallowPadding?0:this.xAxis&&this.xAxis.title?this.componentNumericalValues.margin.bottom+this._axisShift.bottom:this.componentNumericalValues.margin.bottom}}get duration(){return 1e3*parseFloat(a.ANIMATION_DURATION.fast)}set thresholdLine(e){this._thresholdLine=(0,s.isNumber)(e)?e:null,this.alreadyChanged&&this._updateThresholdLineArea()}get thresholdLine(){return this._thresholdLine}set legend(e){this._legend=Object.assign(this._legend,e),this.alreadyChanged&&this.chartComponent.redrawChart()}get legend(){return{customColors:this._legend.customColors,activeHover:this._legend.activeHover,activeClick:this._legend.activeClick,columns:this._legend.columns,width:this._legend.width,items:this.series.map(e=>({item:e.name,hidden:!!e.hidden}))}}set series(e){if(this._series=e,this._isDeselected=[],e.forEach(e=>{e.hidden&&this._isDeselected.push(e.name)}),this.sliderData=[...this.mapDataFromSeries(e)],this.alreadyChanged){const e=this.chartComponent.getGroupAndDimensions();this._g=e.group,this._dim={w:e.w,h:e.h}}this._g&&this._dim&&this.chartComponent&&this.chartComponent.updateLegend(this.series.map(e=>({item:e.name,hidden:!!e.hidden,hover:!1})))}get series(){return this._series}get leftShift(){return this._margin.left}get chartWidth(){return this.chartComponent.currentSVGWidth}ngOnInit(){this.scientificMode&&c().config({EXPONENTIAL_AT:4}),this.alreadyChanged=!0}ngOnChanges(e){this._dim&&(e[this.nameof("showLineCircles")]||e[this.nameof("supressAxles")]||e[this.nameof("rotateXAxis")]||e[this.nameof("showSlider")])&&this._detectViewChanges()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}_dataBuilder(e,t){this._g=e,this._dim=t,this._initClipPath(),this._clear(),this._initData(),this._initAxis(e,t),this._drawLines(e),this._drawDropShadow(),this._updateThresholdLineArea()}_updateChart(e,t=!1){this._dim=e,this._initData(),this._g&&this._g.select(`#${this._id}_clip > rect`).attr("width",e.w-(this._margin.left+this._margin.right)).attr("height",e.h-(this._margin.top+this._margin.bottom)),t||this._updateAxis(e),this._updateDataLines(),this._updateThresholdLineArea()}isMobile(){return this._deviceDetectionService.deviceMobile()||this._deviceDetectionService.deviceTablet()}categoryShowHandler(e){const t=this._isDeselected.indexOf(e);-1!==t&&this._isDeselected.splice(t,1),this._updateChart(this._dim,!0),this.series.forEach((t,i)=>{-1!==t.name.indexOf(e)&&(t.hidden=!1,this._g.select(`[data-line-graph-id='${i}']`).style("display","block"))}),(0,a.isUndefined)(this.chartSliderComponent)||this.chartSliderComponent.showCategory(e),this.categoryShow.emit({category:e})}categoryHideHandler(e){this._isDeselected.push(e),this.series.forEach((t,i)=>{-1!==t.name.indexOf(e)&&(t.hidden=!0,this._g.select(`[data-line-graph-id='${i}']`).style("display","none"))}),this._updateChart(this._dim,!0),(0,a.isUndefined)(this.chartSliderComponent)||this.chartSliderComponent.hideCategory(e),this.categoryHide.emit({category:e})}categoryEnter(e){if(-1===this._isDeselected.indexOf(this.series[e.id].name)){const t=this._g.select(`g[data-line-graph-id='${e.id}']`),i=t.select("path"),n=t.node().parentNode,o=i.attr("stroke");if(this._highLightColor=o,this._pathLines=n.querySelectorAll(".line-chart-lines"),this._pathLines.forEach(e=>{e.getAttribute("stroke")===o?(e.setAttribute("stroke-width","3"),this._pathLineCurrent=e):e.setAttribute("stroke-width","1")}),this.showLineCircles){this._g.select(".line-graph-circle-wrapper").node().querySelectorAll(".line-graph-circle").forEach(e=>{e.getAttribute("fill")!==o&&e.setAttribute("r","4")})}}}categoryLeave(){if(this._pathLineCurrent&&this._pathLineCurrent.setAttribute("stroke-width","2"),this._pathLines&&this._pathLines.forEach(e=>{e.classList.remove("line-graph-transition"),e.setAttribute("stroke-width","2")}),this.showLineCircles){this._g.select(".line-graph-circle-wrapper").node().querySelectorAll(".line-graph-circle").forEach(e=>{e.getAttribute("fill")!==this._highLightColor&&(e.classList.remove("line-graph-transition"),e.setAttribute("r","6"))})}}getTooltipXValueTitle(){return this.xAxis?this.xAxis.title:""}rangeChanged(e){this.sliderDomainData=e,this.rotateXAxis||this._updateXAxis(this._dim),this._updateDataLines()}scrollEnd(){this.rotateXAxis&&this._updateXAxis(this._dim)}getXAxisLineRenderer(e){return d.axisBottom(this._x).tickPadding(10).tickSize(-e.h+(this._margin.top+this._margin.bottom)).tickSizeOuter(0)}getYPosFunc(e,t){return d.scaleLinear().rangeRound([0,e.h-this._margin.bottom-this._margin.top]).domain([t[0],0])}getXPosFunc(e,t=[]){return d.scalePoint().range([0,e.w-(this._margin.left+this._margin.right)]).domain(this.xAxis.categories)}_getCustomColorById(e){const t=this.legend.customColors;return t[e%t.length]}_drawLines(e){const t=this;this._gW=e.append("g").attr("class","area-chart-data").attr("transform",`translate(${this._margin.left}, 0)`),this._line=this.getLineRenderer(),this._colors=[],this._data.forEach((e,i)=>{var n;this._colors.push((null===(n=this.legend.customColors)||void 0===n?void 0:n.length)?this._getCustomColorById(i):this._colorService.getColor(i,this.colorsPalette));const o=this._gW.append("g").attr("class","line-chart-line-g").attr("display",e.hidden?"none":"block").attr("id",this._colors[i]).attr("data-line-graph-id",i);this.drawLineForSeries(o,e,i),this.drawAreaForSeries(o,e,i),this.drawLineCircles(o,i,e).on("mouseover",function(i){t.onCircleMouseover(this,e,i)}).on("mouseout",function(){t.onCircleMouseout(this)})}),this.toggleLineCirclesVisibility(this._g,this.showLineCircles)}onCircleMouseout(e){const t=this.circleRadius;this.getCircleLine(e).attr("stroke-width","2");const i=d.select(e);this._gW.selectAll(".line-chart-lines").classed("line-graph-transition",!1).attr("stroke-width","2");const n=i.attr("fill-old");d.selectAll(".line-graph-circle-wrapper .line-graph-circle").each(function(){d.select(this).attr("fill")!==n&&d.select(this).classed("line-graph-transition",!1).attr("r",t)}),i.attr("fill",n).style("filter",null).attr("fill-old",null),this.chartComponent.hideTooltip()}onCircleMouseover(e,t,i){const n=d.select(e),o=this.getCircleLine(e),r=o.node(),a=n.attr("fill");n.attr("fill-old",a);const s=this.getCircleDarkenColor(a,o);d.selectAll(".line-chart-line-g").each(function(){d.select(this).attr("data-id")===a&&null!==this.nextElementSibling&&this.parentNode.appendChild(this)}),this._gW.selectAll(".line-chart-lines").each(function(){r===this?d.select(this).attr("stroke-width","3"):d.select(this).classed("line-graph-transition",!0).attr("stroke-width","1")}),d.selectAll(".line-graph-circle-wrapper .line-graph-circle").each(function(){d.select(this).attr("fill")!==a&&d.select(this).classed("line-graph-transition",!0).attr("r",4)}),this.showCircleTooltip(o.attr("stroke"),t,i),n.attr("r",8).style("filter","url(#drop-shadow)").attr("fill",s)}showCircleTooltip(e,t,i){this.chartComponent.showTooltip(d.event.target,this.tooltip||this.tooltipTemplate,{data:this.getTooltipData(e,t,i)})}getTooltipData(e,t,i){return{color:e,category:t.name,xValue:i.date,yValue:this.scientificMode?new(c())(i.data):i.data}}getCircleDarkenColor(e,t){return this._colorService.getDarken(e,.15,a.ColorType.HEX)}drawLineCircles(e,t,i){const n=e.append("g").attr("class","line-graph-circle-wrapper").attr("data-id",this._colors[t]).selectAll("dots").data(this.getDataForCirclesOrLines(i)).enter().append("circle").attr("r",this.circleRadius).attr("class","line-graph-circle").attr("fill",this.getCircleColor(t));return this.setCirclePosition(n)}toggleLineCirclesVisibility(e,t){e&&e.selectAll(".line-graph-circle-wrapper").style("display",t?"block":"none")}getDataForCirclesOrLines(e){return e.data}setCirclePosition(e){return e.attr("cx",e=>this._x(e.date)).attr("cy",e=>this._y(e.data))}drawLineForSeries(e,t,i){return e.append("path").datum(this.getDataForCirclesOrLines(t)).attr("clip-path",`url(#${this._id}_clip)`).attr("fill","none").attr("class","line-chart-lines").attr("stroke",this._colors[i]).attr("stroke-width","2").attr("d",this._line)}getCircleColor(e){return this._colors[e]}drawAreaForSeries(e,t,i){}getLineRenderer(){return d.line().x(e=>this._x(e.date)).y(e=>this._y(e.data))}updateLinesAreas(){}restrictXPosTicks(){}mapDataFromSeries(e){return e.map(e=>{const t=e.data.map((e,t)=>({date:this.xAxis.categories[t],data:e}));return{name:e.name,hidden:e.hidden,data:t}})}getDataYValues(e){return e.data.map(e=>e.data)}nameof(e){return e}_detectViewChanges(){this._updateChart(this._dim),a.SafeCdr.detectChanges(this._changeDetectorRef),this._ngZone.onStable.pipe((0,f.take)(1),(0,f.takeUntil)(this._destroy$)).subscribe(()=>{this._ngZone.run(()=>{this.chartComponent.redrawChart(),a.SafeCdr.detectChanges(this._changeDetectorRef)})})}_initAxis(e,t){const i=t.w-this._margin.left-this._margin.right,n=this._getTicks().reverse();this.yAxis&&this.yAxis.title&&e.append("g").attr("class","adapt-chart-axis-title").attr("transform",`rotate(-90) translate(-${(t.h-this._axisShift.bottom)/2} ${this._axisShift.left/2})`).style("opacity",this.supressAxles?0:1).append("text").text(this.yAxis.title).attr("text-anchor","middle").attr("transform",`translate(${this._axisShift.bottom/2} 0)`),this.xAxis&&this.xAxis.title&&e.append("g").attr("class","adapt-chart-axis-title adapt-chart-axis-title--x").attr("transform",`translate(${(t.w+this._axisShift.left)/2} ${t.h+this.chartComponent.chartBottomPadding})`).style("opacity",this.supressAxles?0:1).append("text").text(this.xAxis.title).attr("text-anchor","middle").attr("transform",`translate(${this._axisShift.left} 0)`),this.xAxis&&this.xAxis.categories&&(this._x=this.xBrush=this.getXPosFunc(t),this.restrictXPosTicks());const o=e.append("g").attr("class","axis axis--x");this.renderXAxis(t,o),this.rotateXAxis&&(this.chartComponent.transformAxisTitles(o,this.rotateXAxis),this.chartComponent.updateChartBottomPadding(i,e,this.xAxis,this.rotateXAxis));const r=(0,a.isUndefined)(this.yAxis.categories)?n:this.yAxis.categories.reverse();this._y=this.getYPosFunc(t,r),this.renderYAxis(e.append("g").attr("class","axis axis--y"),r,t)}renderYAxis(e,t,i){e.attr("transform",`translate(${this._margin.left}, 0)`).style("opacity",this.supressAxles?0:1).call(this.getYAxisRenderer(t,i))}getYAxisRenderer(e,t){return d.axisLeft(this._y).ticks(e).tickValues(e).tickFormat(e=>this.scientificMode?new(c())(e).toPrecision(2,2):this._cutNumber.transform(e,0)).tickSize(-t.w+(this._margin.left+this._margin.right)).tickPadding(3)}renderXAxis(e,t){t.attr("transform",`translate(${this._margin.left}, ${e.h-this._margin.top-this._margin.bottom})`).style("opacity",this.supressAxles?0:1).call(this.getXAxisLineRenderer(e))}_updateXAxis(e){if(this._x=this.getXPosFunc(e,this.showSlider&&this.slidePointsCount?this.sliderDomainData:[]),this._g){const t=this._g.select(".axis--x");t.attr("class","axis axis--x "+(this.rotateXAxis?"adapt-chart-axis__hidden":"")),this.renderXAxis(e,t),this.chartComponent.transformAxisTitles(t,this.rotateXAxis),this.chartComponent.updateChartBottomPadding(e.w-this._margin.left-this._margin.right,this._g,this.xAxis,this.rotateXAxis),t.classed("adapt-chart-axis__hidden",null),this._g.select(".adapt-chart-axis-title--x").transition().duration(this.duration).attr("transform",`translate(${(e.w+this._axisShift.left)/2} ${e.h+this.chartComponent.chartBottomPadding})`),this._g.selectAll(".adapt-chart-axis-title").style("opacity",this.supressAxles?0:1)}}_updateYAxis(e){const t=this._getTicks().reverse(),i=(0,a.isUndefined)(this.yAxis.categories)?t:this.yAxis.categories.reverse();this._y=this.getYPosFunc(e,i),this._g&&(this._g.select(".axis--y").attr("transform",`translate(${this._margin.left}, 0)`).transition().duration(this.duration).call(this.getYAxisRenderer(i,e)),this.renderYAxis(this._g.select(".axis--y").transition().duration(this.duration),i,e))}_updateAxis(e){this._updateXAxis(e),this._updateYAxis(e)}getCircleLine(e){return d.select(e.closest(".line-chart-line-g")).select(".line-chart-lines")}_updateDataLines(){this._line=this.getLineRenderer(),this._g&&(this._g.selectAll(".line-chart-lines").attr("d",this._line),this._g.selectAll(".line-graph-circle").each((e,t,i)=>{this.setCirclePosition(d.select(i[t]))})),this.toggleLineCirclesVisibility(this._g,this.showLineCircles),this.updateLinesAreas()}_initData(){this._data=this.mapDataFromSeries(this.series)}_getTicks(){let e=[];this._data.forEach(t=>{e=e.concat(this.getDataYValues(t))});let t=Math.max(...e);0===t&&(t=1),this.thresholdLine&&this.thresholdLine>t&&(t=this.thresholdLine);let i=Math.pow(10,Math.floor(Math.log10(t)))/2;const n=Math.pow(10,Math.floor(Math.log10(t)))/2;let o=Math.floor(t/i)+1;for(;o>=this._maxTicksCount;)i+=n,o=Math.floor(t/i)+1;return new Array(o).fill(0).map((e,t)=>(t+1)*i)}_initClipPath(){this._g.append("defs").append("svg:clipPath").attr("id",`${this._id}_clip`).append("svg:rect").attr("width",this._dim.w-(this._margin.left+this._margin.right)).attr("height",this._dim.h-(this._margin.top+this._margin.bottom)).attr("x",0).attr("y",0)}_clear(){this._data=[]}_updateThresholdLineArea(){const e="threshold-line-area";let t;if(this._g&&(t=this._g.select(`.${e}`)),!this.thresholdLine&&t)return void t.remove();if(null==t?void 0:t.empty()){t=this._g.append("g").attr("class",e),t.append("rect").attr("class","threshold-area-rect").attr("x",0).attr("y",0).attr("fill","#000000").attr("style","pointer-events: none; opacity: .1;");const i=t.append("defs");i.append("marker").attr("class","threshold-line-marker").attr("id",`${this._id}-marker-start`).attr("viewBox","0 0 6 8").attr("markerWidth",6).attr("markerHeight",8).attr("refX",5).attr("refY",4).attr("orient","auto").append("path").attr("d","M 0 0 L 6 4 L 0 8 z"),i.append("marker").attr("class","threshold-line-marker").attr("id",`${this._id}-marker-end`).attr("viewBox","0 0 6 8").attr("markerWidth",6).attr("markerHeight",8).attr("refX",1).attr("refY",4).attr("orient","auto").append("path").attr("d","M 0 4 L 6 0 L 6 8 z"),t.append("line").attr("class","threshold-line").attr("stroke-width",1).attr("marker-start",`url(#${this._id}-marker-start)`).attr("marker-end",`url(#${this._id}-marker-end)`),t.append("text").attr("class","threshold-line-title-background"),t.append("text").attr("class","threshold-line-title")}const i=this._getTicks().pop(),n=this._dim.w-this._margin.left-this._margin.right,o=this._dim.h-this._margin.top-this._margin.bottom,r=o-o/i*this.thresholdLine;t&&(t.select("rect.threshold-area-rect").transition().duration(this.duration).attr("transform",`translate(${this._margin.left}, 0)`).attr("width",n).attr("height",r),t.select("line.threshold-line").transition().duration(this.duration).attr("x1",this._margin.left).attr("x2",this._dim.w).attr("y1",r).attr("y2",r),t.select("text.threshold-line-title-background").transition().duration(this.duration).attr("x",this._margin.left-8).attr("y",r).attr("text-anchor","end").attr("dy",".32em").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine),t.select("text.threshold-line-title").transition().duration(this.duration).attr("x",this._margin.left-8).attr("y",r).attr("text-anchor","end").attr("dy",".32em").text(this.scientificMode?new(c())(this.thresholdLine).toPrecision(2,2):this.thresholdLine)),d.selectAll("g.tick").filter(e=>e===this.thresholdLine).remove()}_drawDropShadow(){const e=this._g.append("defs").append("filter").attr("id","drop-shadow").attr("x","-50%").attr("y","-50%").attr("width","180%").attr("height","180%").attr("filterUnits","userSpaceOnUse");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3),e.append("feOffset").attr("dx",0).attr("dy",1).attr("result","offsetBlur"),e.append("feOffset").attr("dx",0).attr("dy",2).attr("result","offsetBlur"),e.append("feColorMatrix").attr("type","matrix").attr("values","0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.22 0");const t=e.append("feMerge");t.append("feMergeNode"),t.append("feMergeNode").attr("in","SourceGraphic"),t.append("feMergeNode").attr("in","SourceGraphic")}}function tt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"adapt-area-graph-slider",3),r["\u0275\u0275listener"]("rangeChanged",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().rangeChanged(t)})("scrollEnd",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().scrollEnd()}),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("data",e.sliderData)("xAxis",e.xAxis)("slidePointsCount",e.slidePointsCount)("customColors",null==e.legend?null:e.legend.customColors)("xBrush",e.xBrush)("leftShift",e.leftShift)("containerWidth",e.chartWidth)}}function it(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div",4),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275elementStart"](3,"div",5),r["\u0275\u0275text"](4,"\n      "),r["\u0275\u0275element"](5,"span",6),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementStart"](7,"span",7),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n    "),r["\u0275\u0275elementStart"](11,"div"),r["\u0275\u0275text"](12),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275elementStart"](14,"b"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n\n    "),r["\u0275\u0275elementStart"](18,"div"),r["\u0275\u0275text"](19),r["\u0275\u0275elementStart"](20,"span"),r["\u0275\u0275elementStart"](21,"b"),r["\u0275\u0275text"](22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n")),2&e){const e=t.data,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275styleProp"]("background",null==e?null:e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.category),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",i.getTooltipXValueTitle(),":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.xValue),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",null==i.yAxis?null:i.yAxis.title,":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.yValue)}}et.\u0275fac=function(e){return new(e||et)(r["\u0275\u0275directiveInject"](Ie),r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](B),r["\u0275\u0275directiveInject"](r.NgZone),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef))},et.\u0275cmp=r["\u0275\u0275defineComponent"]({type:et,selectors:[["adapt-line-graph"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](Qe,7),r["\u0275\u0275viewQuery"](Se,7),r["\u0275\u0275viewQuery"](te,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartSliderComponent=e.first)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",colorsPalette:"colorsPalette",supressAxles:"supressAxles",noDataText:"noDataText",xAxis:"xAxis",yAxis:"yAxis",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",dataBuilder:"dataBuilder",updateChart:"updateChart",showLineCircles:"showLineCircles",rotateXAxis:"rotateXAxis",showSlider:"showSlider",slidePointsCount:"slidePointsCount",disallowPadding:"disallowPadding",scientificMode:"scientificMode",thresholdLine:"thresholdLine",legend:"legend",series:"series"},outputs:{clickChart:"clickChart",categoryShow:"categoryShow",categoryHide:"categoryHide"},features:[r["\u0275\u0275ProvidersFeature"]([Ie]),r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]],decls:8,vars:14,consts:[[3,"width","height","legend","data","backgroundColor","suppressHeader","suppressLegend","tooltip","header","noDataText","updateChart","dataBuilder","colorsPalette","categoryShow","categoryHide","categoryEnter","categoryLeave"],[3,"data","xAxis","slidePointsCount","customColors","xBrush","leftShift","containerWidth","rangeChanged","scrollEnd",4,"ngIf"],["tooltipTpl",""],[3,"data","xAxis","slidePointsCount","customColors","xBrush","leftShift","containerWidth","rangeChanged","scrollEnd"],[1,"chart-tooltip-content-container"],[1,"chart-tooltip-content-wrapper"],[1,"chart-tooltip-color-spot"],[1,"chart-tooltip-category"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"adapt-chart",0),r["\u0275\u0275listener"]("categoryShow",function(e){return t.categoryShowHandler(e)})("categoryHide",function(e){return t.categoryHideHandler(e)})("categoryEnter",function(e){return t.categoryEnter(e)})("categoryLeave",function(){return t.categoryLeave()}),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275template"](2,Ke,1,7,"adapt-area-graph-slider",1),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n\n"),r["\u0275\u0275template"](5,Je,26,7,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n")),2&e&&(r["\u0275\u0275property"]("width",t.width)("height",t.height)("legend",t.legend)("data",t.series)("backgroundColor",t.backgroundColor)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("tooltip",t.tooltip)("header",t.header)("noDataText",t.noDataText)("updateChart",t._updateChartBind)("dataBuilder",t._dataBuilderBind)("colorsPalette",t.colorsPalette),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.showSlider&&t.slidePointsCount&&t.chartWidth))},directives:[Se,v.NgIf,te],encapsulation:2});let nt=1;class ot extends et{constructor(){super(...arguments),this._data=[],this._series=[],this.circleRadius=4,this.areaOpacity=.25,this.areaOpacityForHovered=.75,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter}getTooltipXValueTitle(){return"x"}ngOnInit(){super.ngOnInit(),this._id="area-graph-"+nt++}ngAfterViewInit(){(0,p.timer)(0,p.asapScheduler).pipe((0,f.takeUntil)(this._destroy$)).subscribe(()=>{this._detectViewChanges()})}getXMaxValue(e){let t=e[0].xyPointData[0].x;return e.forEach(e=>{const i=e.xyPointData[e.xyPointData.length-1].x;i>t&&(t=i)}),t}getXMinValue(e){let t=e[0].xyPointData[0].x;return e.forEach(e=>{const i=e.xyPointData[0].x;i<t&&(t=i)}),t}getCircleColor(){return"transparent"}getLineRenderer(){return d.line().x(e=>this._xPos(e.x)).y(e=>this._y(e.y))}getXPosFunc(e,t=[]){const[i,n]=t;return d.scaleLinear().range([0,e.w-(this._margin.left+this._margin.right)]).domain([i||this.getXMinValue(this._data),n||this.getXMaxValue(this._data)])}getYPosFunc(e,t){return d.scaleLinear().range([0,e.h-this._margin.bottom-this._margin.top]).domain([t[0],0])}getXAxisLineRenderer(e){var t;const i=super.getXAxisLineRenderer(e),n=[...this.xAxis.categories];if(n&&n.length){const e=this.getXMaxValue(this._data),o=this.getXMinValue(this._data),r=(e-o)/(n.length-1);let a=n.map((e,t)=>o+r*t);if(this.showSlider&&(null===(t=this.sliderDomainData)||void 0===t?void 0:t.length)){const[e,t]=this.sliderDomainData;a=a.filter((i,o)=>{if((0,s.inRange)(i,e,t))return!0;n[o]=null})}return i.tickValues(a).tickFormat((e,t)=>n.filter(e=>!!e)[t])}return this.showSlider&&this.slidePointsCount&&i.ticks(this.slidePointsCount),this.formatXAxisValue?i.tickFormat(this.formatXAxisValue):i}mapDataFromSeries(e){return e.map(e=>({name:e.name,hidden:e.hidden,data:e.data,xyPointData:e.data}))}drawAreaForSeries(e,t,i){e.append("path").datum(t.xyPointData).classed("line-graph-transition line-chart-area",!0).attr("clip-path",`url(#${this._id}_clip)`).attr("fill",this._colors[i]).attr("fill-opacity",this.areaOpacity).attr("stroke","none").attr("d",this.getAreaFilling()).on("mouseover",(e,t,i)=>{this.fillAreaDarkerColor(i[t])}).on("mouseout",(e,t,i)=>{this.fillAreaDefaultColor(i[t])})}onCircleMouseover(e,t,i){super.onCircleMouseover(e,t,i),this.fillAreaDarkerColor(d.select(e.closest(".line-chart-line-g")).select(".line-chart-area").node())}onCircleMouseout(e){super.onCircleMouseout(e),this.fillAreaDefaultColor(d.select(e.closest(".line-chart-line-g")).select(".line-chart-area").node())}getCircleDarkenColor(e,t){return this._colorService.getDarken(t.attr("stroke"),.15,a.ColorType.HEX)}getDataForCirclesOrLines(e){return e.xyPointData}setCirclePosition(e){return e.attr("cx",e=>this._xPos(e.x)).attr("cy",e=>this._y(e.y))}updateLinesAreas(){this._g.selectAll(".line-chart-area").each((e,t,i)=>{d.select(i[t]).attr("d",this.getAreaFilling())})}restrictXPosTicks(){const e=this._x.ticks();this.showSlider&&this.slidePointsCount&&(this._x=d.scaleLinear().range([0,this._dim.w-(this._margin.left+this._margin.right)]).domain([e[0],e[this.slidePointsCount]]))}getTooltipData(e,t,i){return{color:e,category:t.name,xValue:i.x,yValue:this.scientificMode?new(c())(i.y).toPrecision(2,2):i.y}}getDataYValues(e){return e.xyPointData.map(e=>e.y)}get _xPos(){return this._x}getAreaFilling(){return d.area().x(e=>this._xPos(e.x)).y0(this._y(0)).y1(e=>this._y(e.y))}fillAreaDarkerColor(e){d.select(e).attr("fill-opacity",this.areaOpacityForHovered)}fillAreaDefaultColor(e){d.select(e).attr("fill-opacity",this.areaOpacity)}}ot.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](ot)))(t||ot)}}(),ot.\u0275cmp=r["\u0275\u0275defineComponent"]({type:ot,selectors:[["adapt-area-graph"]],inputs:{formatXAxisValue:"formatXAxisValue",getTooltipXValueTitle:"getTooltipXValueTitle"},outputs:{categoryShow:"categoryShow",categoryHide:"categoryHide"},features:[r["\u0275\u0275ProvidersFeature"]([Ie]),r["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:14,consts:[[3,"width","height","legend","data","backgroundColor","suppressHeader","suppressLegend","tooltip","header","noDataText","updateChart","dataBuilder","colorsPalette","categoryShow","categoryHide","categoryEnter","categoryLeave"],[3,"data","xAxis","slidePointsCount","customColors","xBrush","leftShift","containerWidth","rangeChanged","scrollEnd",4,"ngIf"],["tooltipTpl",""],[3,"data","xAxis","slidePointsCount","customColors","xBrush","leftShift","containerWidth","rangeChanged","scrollEnd"],[1,"chart-tooltip-content-container"],[1,"chart-tooltip-content-wrapper"],[1,"chart-tooltip-color-spot"],[1,"chart-tooltip-category"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"adapt-chart",0),r["\u0275\u0275listener"]("categoryShow",function(e){return t.categoryShowHandler(e)})("categoryHide",function(e){return t.categoryHideHandler(e)})("categoryEnter",function(e){return t.categoryEnter(e)})("categoryLeave",function(){return t.categoryLeave()}),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275template"](2,tt,1,7,"adapt-area-graph-slider",1),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n\n"),r["\u0275\u0275template"](5,it,26,7,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n")),2&e&&(r["\u0275\u0275property"]("width",t.width)("height",t.height)("legend",t.legend)("data",t.series)("backgroundColor",t.backgroundColor)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("tooltip",t.tooltip)("header",t.header)("noDataText",t.noDataText)("updateChart",t._updateChartBind)("dataBuilder",t._dataBuilderBind)("colorsPalette",t.colorsPalette),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.showSlider&&t.slidePointsCount&&t.chartWidth))},directives:[Se,v.NgIf,te],encapsulation:2});class rt extends w{}rt.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](rt)))(t||rt)}}(),rt.\u0275dir=r["\u0275\u0275defineDirective"]({type:rt,inputs:{innerRadius:"innerRadius",series:"series"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const at=["chart"],st=["tooltipTpl"];function lt(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275elementStart"](1,"div",3),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275element"](3,"span",4),r["\u0275\u0275text"](4,"\n        "),r["\u0275\u0275elementStart"](5,"span",5),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementStart"](8,"b"),r["\u0275\u0275text"](9,"\n          "),r["\u0275\u0275elementStart"](10,"span"),r["\u0275\u0275text"](11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](12,"\n          "),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275text"](14),r["\u0275\u0275pipe"](15,"percent"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](18,"\n    ")),2&e){const e=t.data;r["\u0275\u0275advance"](3),r["\u0275\u0275styleProp"]("background-color",e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.category),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](e.value),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"]("(",r["\u0275\u0275pipeBind1"](15,5,e.value/e.total),")")}}class ct extends rt{constructor(e){super(),this._colorService=e,this.$this=this,this.showLegendTooltip=!1,this.clickChart=new r.EventEmitter,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this.alreadyChanged=!1,this._dataBuilder=(function(e,t){this._clear(),this._g=e,this._dim=t,this._renderChart()}).bind(this),this._updateChart=(function(){const e=this,t=this._pie(this._data),i=this.series.map(e=>({name:e.name,y:-1===this._filter.indexOf(e.name)?e.y:0}));this.total=i.reduce((e,t)=>e+=t.y,0),this._initData(),this._path=this._path.data(this._pie(this._data)),this._path.transition().duration(this.duration).attrTween("d",function(i,n){const o=d.interpolate(t[n].startAngle,i.startAngle),r=d.interpolate(t[n].endAngle,i.endAngle);return function(t){return i.startAngle=o(t),i.endAngle=r(t),e._arc(i)}}),this.innerRadius>1&&this._g.selectAll(".adapt-pie-chart-main-label-sum").text(`${this.total}`)}).bind(this),this.donutProportion=.64,this._filter=[],this._cls={arc:"arc",arcPart:"arc-part",segment:"arc-segment",sectorIdentifier:"adapt-pie-chart-sector",summary:"adapt-pie-chart-summary",summaryLabel:"adapt-pie-chart-main-label",summaryText:"adapt-pie-chart-main-label-sum"},this._legend={columns:1,activeHover:!0,activeClick:!0,width:250,customColors:null,items:[]},this._series=[],this._legendTooltipPoint={x:0,y:0}}set series(e){if(this._series=e,e&&this._updateFilter(e),this.alreadyChanged){const e=this.chartComponent.getGroupAndDimensions();this._g=e.group,this._dim={w:e.w,h:e.h}}this._g&&this._dim&&this.chartComponent&&this.chartComponent.updateLegend(this.series.map(e=>({item:e.name,hidden:!!e.hidden,hover:!1})))}get series(){return this._series}set legend(e){this._legend=Object.assign(this._legend,e)}get legend(){return{customColors:this._legend.customColors,activeHover:this._legend.activeHover,activeClick:this._legend.activeClick,columns:this._legend.columns,width:this._legend.width,items:this.series&&this.series.map(e=>({item:e.name,hidden:!!e.hidden}))}}get duration(){return 1e3*parseFloat(a.ANIMATION_DURATION.fast)}ngOnInit(){this.header&&(this.header.allowHideLegend=!1)}ngOnChanges(){this.alreadyChanged&&this._g&&this._dim&&(this._data=[],this._updateFilter(this.series),this._clear(),this._renderChart(),this._updateChart()),this.alreadyChanged=!0}categoryEnter(e){const t=this._g.select(`#adapt-pie-chart-sector-${e.id}`),i=t.attr("fill"),n=this._colorService.getDarken(i,.15,a.ColorType.HEX);if(this._initialColor=i,t.attr("fill",n),this.showLegendTooltip){this._legendTooltipPoint.x=e.event.clientX,this._legendTooltipPoint.y=e.event.clientY;const t=e.id,i=this.tooltip||this.tooltipTemplate,n=this.series.map(e=>({name:e.name,y:-1===this._filter.indexOf(e.name)?e.y:0}));this.chartComponent.showTooltip(this._legendTooltipPoint,i,{data:{color:this._legend.customColors?this._getCustomColorById(t):this._colorService.getColor(t),category:n[t].name,value:this.series[t].y,total:this.total,data:this.series[t],event:e.event}})}}categoryLeave(e){this._g.select(`#adapt-pie-chart-sector-${e.id}`).attr("fill",this._initialColor),this.showLegendTooltip&&this.chartComponent.hideTooltip()}categoryMove(e){this._legendTooltipPoint.x=e.event.clientX,this._legendTooltipPoint.y=e.event.clientY,this.chartComponent.updateTooltip()}categoryShowHandler(e){const t=this._filter.indexOf(e);-1!==t&&(this._filter.splice(t,1),this._updateChart()),this.categoryShow.emit({category:e})}categoryHideHandler(e){this._filter.push(e),this._updateChart(),this.categoryHide.emit({category:e})}clickChartArea(e){var t;const i=e.target;if(i.classList.contains(this._cls.segment)){const n=(null===(t=i.parentNode)||void 0===t?void 0:t.getAttribute("id")).split("-").reverse()[0],o=this.series.reduce((e,t)=>e+t.y,0),r=d.select(i.parentNode).attr("fill");this.clickChart.emit({event:e,data:this.series[n],color:r,category:this.series[n].name,value:this.series[n].y,total:o})}}_renderChart(){this._initData(),this.innerRadius>0&&this._addSummary(),this._createColor(),this._createPie(),this._createDataChart()}_initData(){this._data=this.series.map(e=>-1===this._filter.indexOf(e.name)?e.y:0)}_createColor(){this._colors=this._data.map((e,t)=>this._legend.customColors?this._getCustomColorById(t):this._colorService.getColor(t)),this._radius=Math.min(this._dim.w,this._dim.h)/2,this._g.attr("transform",`translate(${this._radius} ${this._radius})`),this._arc=d.arc().innerRadius(this._getInnerRadius()).outerRadius(this._radius)}_createPie(){this._pie=d.pie().sort(null)}_createDataChart(){const e=this,t=this.tooltip||this.tooltipTemplate,i=this.series.map(e=>({name:e.name,y:-1===this._filter.indexOf(e.name)?e.y:0})),n=this._g.selectAll(`.${this._cls.arc}`).data(this._pie(this._data)).enter().each(e=>{e.outerRadius=this._radius}).append("g").attr("class",this._cls.arcPart).attr("id",(e,t)=>`${this._cls.sectorIdentifier}-${t}`).attr("fill",(e,t)=>this._colors[t]);this.total=i.reduce((e,t)=>e+=t.y,0),this._path=n.append("path").attr("class",this._cls.segment).attr("d",this._arc);const o={x:0,y:0};this._path.on("mouseenter",n=>{const{clientX:r,clientY:a}=d.event,{index:s,value:l}=n;o.x=r,o.y=a,this.chartComponent.showTooltip(o,t,{data:{color:e._legend.customColors?e._getCustomColorById(s):e._colorService.getColor(s),category:i[s].name,value:l,total:this.total,data:e.series[s],event:d.event}})}),this._path.on("mousemove",()=>{const{clientX:e,clientY:t}=d.event;o.x=e,o.y=t,this.chartComponent.updateTooltip()}),n.on("mouseenter",function(){e._initialColor=d.select(this).attr("fill"),d.select(this).attr("fill",e._colorService.getDarken(e._initialColor,.15,a.ColorType.HEX))}).on("mouseout",function(){e.chartComponent.hideTooltip(),d.select(this).attr("fill",e._initialColor)})}_getInnerRadius(){const e=this._radius*(1+this.donutProportion)/2;let t=this._radius*(1-2*(1-this.donutProportion)),i=0;if(this.innerRadius>0){const e=this._g.select(`.${this._cls.summary}`).node(),i=e?e.getBoundingClientRect().width:0;t=Math.floor(i/2)+15}return(!(0,a.isUndefined)(this.innerRadius)||this.innerRadius>0)&&(i=this.innerRadius,i=i<t?t:i,i=i>e?e:i),i}_clear(){this._g&&this._g.selectAll("*").remove()}_addSummary(){const e=this.series.map(e=>({name:e.name,y:-1===this._filter.indexOf(e.name)?e.y:0})),t=this._g.append("text").attr("class",this._cls.summary);this.total=e.reduce((e,t)=>e+=t.y,0),t.append("tspan").attr("text-anchor","middle").attr("x",0).attr("y","-.4em").attr("class",this._cls.summaryLabel).text("Total"),t.append("tspan").attr("text-anchor","middle").attr("x",0).attr("y",".8em").attr("class",this._cls.summaryText).text(`${this.total}`)}_getCustomColorById(e){const t=this._legend.customColors;return t[e%t.length]}_updateFilter(e){this._filter=[],e.forEach(e=>{e.hidden&&this._filter.push(e.name)})}}ct.\u0275fac=function(e){return new(e||ct)(r["\u0275\u0275directiveInject"](B))},ct.\u0275cmp=r["\u0275\u0275defineComponent"]({type:ct,selectors:[["adapt-pie-chart"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](Se,7),r["\u0275\u0275viewQuery"](at,7),r["\u0275\u0275viewQuery"](st,7)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartComponent=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chart=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",dataBuilder:"dataBuilder",innerRadius:"innerRadius",showLegendTooltip:"showLegendTooltip",series:"series",legend:"legend"},outputs:{clickChart:"clickChart",categoryShow:"categoryShow",categoryHide:"categoryHide"},features:[r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]],decls:7,vars:12,consts:[[3,"width","height","header","legend","data","backgroundColor","suppressHeader","suppressLegend","tooltip","noDataText","updateChart","dataBuilder","categoryEnter","categoryLeave","categoryMove","categoryShow","categoryHide","clickChart"],["chart",""],["tooltipTpl",""],[1,"adapt-pie-chart-tooltip"],[1,"adapt-pie-chart-tooltip__color"],[1,"adapt-pie-chart-tooltip__category"]],template:function(e,t){1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"adapt-chart",0,1),r["\u0275\u0275listener"]("categoryEnter",function(e){return t.categoryEnter(e)})("categoryLeave",function(e){return t.categoryLeave(e)})("categoryMove",function(e){return t.categoryMove(e)})("categoryShow",function(e){return t.categoryShowHandler(e)})("categoryHide",function(e){return t.categoryHideHandler(e)})("clickChart",function(e){return t.clickChartArea(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3,"\n\n    "),r["\u0275\u0275template"](4,lt,19,7,"ng-template",null,2,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](6,"\n  ")),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("width",t.$this.width)("height",t.$this.height)("header",t.$this.header)("legend",t.$this.legend)("data",t.series)("backgroundColor",t.$this.backgroundColor)("suppressHeader",t.$this.suppressHeader)("suppressLegend",t.$this.suppressLegend)("tooltip",t.$this.tooltip)("noDataText",t.noDataText)("updateChart",t._updateChart)("dataBuilder",t._dataBuilder))},directives:[Se],pipes:[v.PercentPipe],encapsulation:2});class dt extends w{}dt.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](dt)))(t||dt)}}(),dt.\u0275dir=r["\u0275\u0275defineDirective"]({type:dt,inputs:{xAxis:"xAxis",yAxis:"yAxis",series:"series",hideAxises:"hideAxises"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const pt=["tooltipTpl"];function ut(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275text"](4,"\n      "),r["\u0275\u0275element"](5,"span",4),r["\u0275\u0275text"](6,"\n      "),r["\u0275\u0275elementStart"](7,"span",5),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](10,"\n    "),r["\u0275\u0275elementStart"](11,"div"),r["\u0275\u0275text"](12),r["\u0275\u0275elementStart"](13,"span"),r["\u0275\u0275elementStart"](14,"b"),r["\u0275\u0275text"](15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](16,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](17,"\n\n    "),r["\u0275\u0275elementStart"](18,"div"),r["\u0275\u0275text"](19),r["\u0275\u0275elementStart"](20,"span"),r["\u0275\u0275elementStart"](21,"b"),r["\u0275\u0275text"](22),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](23,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](24,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](25,"\n")),2&e){const e=t.data,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275styleProp"]("background",null==e?null:e.color),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](null==e?null:e.category),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",null==i.xAxis?null:i.xAxis.title,":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.xValue),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",null==i.yAxis?null:i.yAxis.title,":\n      "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.yValue)}}class mt extends dt{constructor(e,t,i){super(),this._cutNumber=e,this._deviceDetectionService=t,this._colorService=i,this.alreadyChanged=!1,this.scientificMode=!1,this.clickChart=new r.EventEmitter,this.categoryShow=new r.EventEmitter,this.categoryHide=new r.EventEmitter,this._series=[],this._margin={top:0,right:0,bottom:25,left:30},this._colors=[],this._axisShift={top:0,right:0,bottom:25,left:25},this._axisScientificLeftShift=60,this._generatedData=[],this._isDeselected=[],this._legend={columns:1,activeHover:!0,activeClick:!0,width:250,customColors:null,items:[]},this._updateChart=e=>{this._updatedScatterChart(e)},this._dataBuilder=(e,t)=>{this._g=e,this._dim=t,this._initAxis(e,t),this._drawLines(e),this._drawDropShadow()}}set series(e){if(this._series=e,this._isDeselected=[],e.forEach(e=>{e.hidden&&this._isDeselected.push(e.name)}),this.alreadyChanged){const e=this.chartComponent.getGroupAndDimensions();this._g=e.group,this._dim={w:e.w,h:e.h}}this._g&&this._dim&&this.chartComponent&&this.chartComponent.updateLegend(this.series.map(e=>e.name))}get series(){return this._series}set legend(e){this._legend=Object.assign(this._legend,e),this.alreadyChanged&&this.chartComponent.redrawChart()}get legend(){return{customColors:this._legend.customColors,activeHover:this._legend.activeHover,activeClick:this._legend.activeClick,columns:this._legend.columns,width:this._legend.width,items:this.series&&this.series.map(e=>({item:e.name,hidden:!!e.hidden}))}}get duration(){return 1e3*parseFloat(a.ANIMATION_DURATION.fast)}get axisShiftLeft(){return this.scientificMode?this._axisScientificLeftShift:this._axisShift.left}ngOnInit(){this.isMobile()&&(this._margin.left=40),this.xAxis&&this.xAxis.title&&(this._margin.bottom+=this._axisShift.bottom),this.yAxis&&this.yAxis.title&&(this._margin.left+=this.axisShiftLeft),this.alreadyChanged=!0}isMobile(){return this._deviceDetectionService.deviceMobile()||this._deviceDetectionService.deviceTablet()}categoryShowHandler(e){const t=this._isDeselected.indexOf(e);-1!==t&&this._isDeselected.splice(t,1),this._updatedScatterChart(this._dim),this.series.forEach((t,i)=>{-1!==t.name.indexOf(e)&&(t.hidden=!1,this._g.select(`[data-line-graph-id='${i}']`).style("transition","all .3s ease").style("opacity","1").style("visibility","visible").attr("data-disabled","false"))}),this.categoryShow.emit({category:e})}categoryHideHandler(e){const t=this;this._isDeselected.push(e),this.series.forEach((t,i)=>{-1!==t.name.indexOf(e)&&(t.hidden=!0,this._g.select(`[data-line-graph-id='${i}']`).style("transition","all .3s ease").style("opacity","0").style("visibility","hidden"))}),d.selectAll(".scatter-regression-line").each(function(){d.select(this).attr("id")===t._highLightColor&&(t._regLine=d.select(this),t._regLine.style("visibility","hidden").style("opacity","0"))}),this._updatedScatterChart(this._dim),this.categoryHide.emit({category:e})}categoryEnter(e){const t=this;if(-1===this._isDeselected.indexOf(this.series[e.id].name)){const i=this._g.select(`[data-line-graph-id='${e.id}']  .scatter-plot-circle`).attr("fill"),n=t._colorService.getDarken(i,.22,a.ColorType.HEX);this._highLightColor=i,d.selectAll(".scatter-plot-circle-wrapper .scatter-plot-circle").each(function(){d.select(this).attr("fill").toLowerCase().trim()!==i.toLowerCase().trim()&&d.select(this).classed("scatter-transition",!0).attr("r",3.5)}),d.selectAll(".scatter-chart-line-g").each(function(){d.select(this).attr("id").toLowerCase().trim()===i.toLowerCase().trim()&&null!==this.nextElementSibling&&this.parentNode.appendChild(this)}),d.selectAll(".scatter-regression-line").each(function(){d.select(this).attr("id").toLowerCase().trim()===i.toLowerCase().trim()&&(t._regLine=d.select(this),t._regLine.style("visibility","visible").attr("stroke",n).style("opacity","1"))})}}categoryLeave(){const e=this;d.selectAll(".scatter-plot-circle-wrapper .scatter-plot-circle").each(function(){var t;d.select(this).attr("fill").toLowerCase().trim()!==(null===(t=e._highLightColor)||void 0===t?void 0:t.toLowerCase().trim())&&d.select(this).classed("scatter-transition",!1).attr("r",5)}),this._regLine&&this._regLine.attr("stroke",this._highLightColor).style("visibility","hidden").style("opacity","0")}_getCustomColorById(e){const t=this.legend.customColors;return t[e%t.length]}_updatedScatterChart(e){this._generatedData=[],this._updateAxis(e),this._updateDataLines()}_initAxis(e,t){if(this._generatedData=[],this.series){this.series.forEach(e=>e.data.map(e=>this._generatedData.push({data1:e[0],data2:e[1]}))),this.yAxis&&this.yAxis.title&&e.append("g").attr("class","adapt-chart-axis-title").attr("transform",`rotate(-90) translate(-${(t.h-this._axisShift.bottom)/2} ${this.axisShiftLeft/4})`).append("text").text(this.yAxis.title).attr("text-anchor","middle").attr("transform",`translate(${this._axisShift.bottom/2} 0)`),this.xAxis&&this.xAxis.title&&e.append("g").attr("class","adapt-chart-axis-title adapt-chart-axis-title--x").attr("transform",`translate(${(t.w+this.axisShiftLeft)/2} ${t.h})`).append("text").text(this.xAxis.title).attr("text-anchor","middle").attr("transform",`translate(${this.axisShiftLeft} 0)`),this._x=d.scaleLinear().domain([d.min(this._generatedData,e=>e.data1),d.max(this._generatedData,e=>e.data1)]).range([0,t.w-(this._margin.left+this._margin.right)]),this._y=d.scaleLinear().domain([d.min(this._generatedData,e=>e.data2),d.max(this._generatedData,e=>e.data2)]).range([t.h-this._margin.top-this._margin.bottom,0]),e.append("g").attr("class","axis axis--y").attr("transform",`translate(${this._margin.left}, 0)`).transition().duration(this.duration).call(d.axisLeft(this._y).ticks(7).tickPadding(10).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-t.w+(this._margin.left+this._margin.right)).tickSizeOuter(0)),e.append("g").attr("class","axis axis--x").attr("transform",`translate(${this._margin.left}, ${t.h-this._margin.top-this._margin.bottom})`).transition().duration(this.duration).call(d.axisBottom(this._x).tickPadding(10).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-t.h+(this._margin.top+this._margin.bottom)).tickSizeOuter(0));const i=this._generatedData.map(e=>e.data1),n=this._generatedData.map(e=>e.data2),o=this._leastSquaresequation(i,n);this._line=d.line().x(e=>this._x(e.data1)).y(e=>this._y(o(e.data1)))}}_updateAxis(e){this.series.forEach(e=>e.data.map(t=>{if(-1===this._isDeselected.indexOf(e.name))return this._generatedData.push({data1:t[0],data2:t[1]})})),this._g.select(".adapt-chart-axis-title--x").transition().duration(this.duration).attr("transform",`translate(${(e.w+this.axisShiftLeft)/2} ${e.h})`),this._x=d.scaleLinear().domain([d.min(this._generatedData,e=>e.data1),d.max(this._generatedData,e=>e.data1)]).range([0,e.w-(this._margin.left+this._margin.right)]),this._g.select(".axis--x").transition().duration(this.duration).attr("transform",`translate(${this._margin.left}, ${e.h-this._margin.top-this._margin.bottom})`).call(d.axisBottom(this._x).tickPadding(10).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-e.h+(this._margin.top+this._margin.bottom)).tickSizeOuter(0)),this._y=d.scaleLinear().domain([d.min(this._generatedData,e=>e.data2),d.max(this._generatedData,e=>e.data2)]).range([e.h-this._margin.top-this._margin.bottom,0]),this._g.select(".axis--y").transition().duration(this.duration).attr("transform",`translate(${this._margin.left}, 0)`).call(d.axisLeft(this._y).ticks(7).tickPadding(10).tickFormat(e=>this._getTickFormatForNumber(e)).tickSize(-e.w+(this._margin.left+this._margin.right)).tickSizeOuter(0));const t=this._generatedData.map(e=>e.data1),i=this._generatedData.map(e=>e.data2),n=this._leastSquaresequation(t,i);this._line=d.line().x(e=>this._x(e.data1)).y(e=>this._y(n(e.data1)))}_updateDataLines(){this._g.selectAll(".scatter-plot-circle").attr("cx",e=>this._x(e.data1)).attr("cy",e=>this._y(e.data2)),this._g.selectAll(".scatter-regression-line").attr("d",this._line)}_drawLines(e){const t=this;let i,n,o,r;this._gW=e.append("g").attr("transform",`translate(${this._margin.left}, 0)`),this.series&&(this._colors=[],this.series.map((e,t)=>this._colors.push(this.legend.customColors?this._getCustomColorById(t):this._colorService.getColor(t))),this.series.forEach((s,l)=>{this._generatedData=s.data.map(e=>({data1:e[0],data2:e[1]})),e.append("g").attr("transform",`translate(${this._margin.left}, 0)`).append("path").datum(this._generatedData).attr("id",this._colors[l]).attr("stroke",this._colors[l]).attr("fill","none").attr("stroke-width","2px").classed("scatter-regression-line",!0).style("opacity","0").style("visibility","hidden").attr("d",this._line);this._gW.append("g").attr("class","scatter-chart-line-g").style("opacity",s.hidden?0:1).style("visibility",s.hidden?"hidden":"visible").attr("id",this._colors[l]).attr("data-line-graph-id",l).append("g").attr("class","scatter-plot-circle-wrapper").attr("id",this._colors[l]).selectAll("dots").data(this._generatedData).enter().append("circle").attr("r",5).attr("class","scatter-plot-circle").attr("fill",this._colors[l]).attr("cx",e=>this._x(e.data1)).attr("cy",e=>this._y(e.data2)).on("mouseover",function(e){const l=d.select(this);i=l.attr("fill"),n=t._colorService.getDarken(i,.15,a.ColorType.HEX),r=t._colorService.getDarken(i,.22,a.ColorType.HEX),d.selectAll(".scatter-plot-circle-wrapper .scatter-plot-circle").each(function(){d.select(this).attr("fill")!==i&&d.select(this).classed("scatter-transition",!0).attr("r",3.5)}),d.selectAll(".scatter-chart-line-g").each(function(){d.select(this).attr("id")===i&&null!==this.nextElementSibling&&this.parentNode.appendChild(this)}),d.selectAll(".scatter-regression-line").each(function(){d.select(this).attr("id").toLowerCase().trim()===i.toLowerCase().trim()&&(o=d.select(this),o.style("visibility","visible").attr("stroke",r).style("opacity","1"))}),l.attr("r",7).style("opacity","1").style("filter","url(#drop-shadow)").attr("fill",n),t.chartComponent.showTooltip(d.event.target,t.tooltipTemplate,{data:{color:i,category:s.name,xValue:t.scientificMode?new(c())(e.data1).toPrecision(2,2):e.data1,yValue:t.scientificMode?new(c())(e.data2).toPrecision(2,2):e.data2}})}).on("mouseout",function(){d.selectAll(".scatter-plot-circle-wrapper .scatter-plot-circle").each(function(){d.select(this).attr("fill").toLowerCase().trim()!==i.toLowerCase().trim()&&d.select(this).classed("scatter-transition",!1).attr("r",5)}),o.attr("stroke",i).style("visibility","hidden").style("opacity","0"),d.select(this).style("opacity",".8").style("filter",null).attr("fill",i),t.chartComponent.hideTooltip()})}))}_leastSquaresequation(e,t){const i=(e,t)=>e+t,n=1*e.reduce(i)/e.length,o=1*t.reduce(i)/t.length,r=e.map(e=>Math.pow(e-n,2)).reduce(i),a=e.map((e,i)=>(e-n)*(t[i]-o)).reduce(i)/r,s=o-n*a;return function(e){return e*a+s}}_drawDropShadow(){const e=this._g.append("defs").append("filter").attr("id","drop-shadow").attr("x","-50%").attr("y","-50%").attr("width","180%").attr("height","180%").attr("filterUnits","userSpaceOnUse");e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3),e.append("feOffset").attr("dx",0).attr("dy",1).attr("result","offsetblur"),e.append("feOffset").attr("dx",0).attr("dy",2).attr("result","offsetblur"),e.append("feColorMatrix").attr("type","matrix").attr("values","0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.22 0");const t=e.append("feMerge");t.append("feMergeNode"),t.append("feMergeNode").attr("in","SourceGraphic"),t.append("feMergeNode").attr("in","SourceGraphic")}_getTickFormatForNumber(e){return this.scientificMode?new(c())(e).toPrecision(2,2):this._cutNumber.transform(e,0)}}mt.\u0275fac=function(e){return new(e||mt)(r["\u0275\u0275directiveInject"](Ie),r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](B))},mt.\u0275cmp=r["\u0275\u0275defineComponent"]({type:mt,selectors:[["adapt-scatter-plot"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](pt,7),r["\u0275\u0275viewQuery"](Se,7)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartComponent=e.first)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",series:"series",xAxis:"xAxis",yAxis:"yAxis",noDataText:"noDataText",legend:"legend",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",dataBuilder:"dataBuilder",updateChart:"updateChart",scientificMode:"scientificMode"},outputs:{clickChart:"clickChart",categoryShow:"categoryShow",categoryHide:"categoryHide"},features:[r["\u0275\u0275ProvidersFeature"]([Ie]),r["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:11,consts:[[3,"width","height","header","data","dataBuilder","legend","updateChart","backgroundColor","suppressHeader","suppressLegend","noDataText","categoryShow","categoryHide","categoryEnter","categoryLeave"],["tooltipTpl",""],[1,"chart-tooltip-content-container"],[1,"chart-tooltip-content-wrapper"],[1,"chart-tooltip-color-spot"],[1,"chart-tooltip-category"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"adapt-chart",0),r["\u0275\u0275listener"]("categoryShow",function(e){return t.categoryShowHandler(e)})("categoryHide",function(e){return t.categoryHideHandler(e)})("categoryEnter",function(e){return t.categoryEnter(e)})("categoryLeave",function(){return t.categoryLeave()}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](1,"\n\n"),r["\u0275\u0275template"](2,ut,26,7,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](4,"\n")),2&e&&r["\u0275\u0275property"]("width",t.width)("height",t.height)("header",t.header)("data",t.series)("dataBuilder",t._dataBuilder)("legend",t.legend)("updateChart",t._updateChart)("backgroundColor",t.backgroundColor)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("noDataText",t.noDataText)},directives:[Se],encapsulation:2});class ht extends w{}ht.\u0275fac=function(){let e;return function(t){return(e||(e=r["\u0275\u0275getInheritedFactory"](ht)))(t||ht)}}(),ht.\u0275dir=r["\u0275\u0275defineDirective"]({type:ht,inputs:{data:"data"},features:[r["\u0275\u0275InheritDefinitionFeature"]]});const ft=["treemapDefaultTooltip"],gt=["treemapGroupTooltip"],vt=["menuAnchor"],xt=["menuContainer"],yt=["optionsListRef"];function bt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",15),r["\u0275\u0275listener"]("click",function(){const t=r["\u0275\u0275restoreView"](e).$implicit,i=r["\u0275\u0275nextContext"](4);return i.callAction(i.menuData.target,i.menuData.event,i.menuData.context,t)}),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=r["\u0275\u0275nextContext"](4);r["\u0275\u0275classProp"]("text-active",n.isActiveDescendant(i)),r["\u0275\u0275propertyInterpolate1"]("id","treemap__actions__action-",i,""),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n          ",e.title,"\n        ")}}function Ct(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275template"](2,bt,2,4,"button",14),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.menuData.actions)}}function St(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275elementStart"](1,"div",11,12),r["\u0275\u0275listener"]("keydown",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"](2).keydownHandler(t)}),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275template"](4,Ct,4,1,"div",13),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n  ")}if(2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275attribute"]("aria-activedescendant",e.getActiveDescendant()),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.menuData&&e.menuData.actions&&e.menuData.actions.length)}}function wt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",6,7),r["\u0275\u0275listener"]("popupAnimationDone",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().popupAnimationDone()}),r["\u0275\u0275text"](2,"\n  "),r["\u0275\u0275element"](3,"button",8,9),r["\u0275\u0275text"](5,"\n  "),r["\u0275\u0275template"](6,St,7,2,"ng-template",10),r["\u0275\u0275text"](7,"\n"),r["\u0275\u0275elementEnd"]()}2&e&&r["\u0275\u0275property"]("adaptRadarDisableEventSending",!0)("appendToBody",!0)("restoreFocusAfterClose",!0)}function It(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div"),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275elementStart"](3,"strong"),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementStart"](6,"div"),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n")),2&e){const e=t.context;r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](e.name),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.size)}}function _t(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275elementStart"](1,"div",16),r["\u0275\u0275text"](2,"\n    "),r["\u0275\u0275element"](3,"span",17),r["\u0275\u0275text"](4),r["\u0275\u0275elementStart"](5,"strong"),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n  "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n")),2&e){const e=t.parentContext,i=t.childContext;r["\u0275\u0275advance"](3),r["\u0275\u0275styleProp"]("background-color",e.color),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("\n    ",e.name,": "),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](i.name)}}function Dt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"a",23),r["\u0275\u0275listener"]("click",function(t){r["\u0275\u0275restoreView"](e);const i=r["\u0275\u0275nextContext"]().$implicit,n=r["\u0275\u0275nextContext"](3);return n.navigateToGroup(t,i,n.data)}),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e)}}function Rt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](e)}}function At(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"li",21),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,Dt,2,1,"a",22),r["\u0275\u0275text"](3,"\n      "),r["\u0275\u0275template"](4,Rt,2,1,"ng-container",13),r["\u0275\u0275text"](5,"\n    "),r["\u0275\u0275elementEnd"]()),2&e){const e=t.last;r["\u0275\u0275classProp"]("active",e),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!e),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e)}}function Tt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"ol",19),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275template"](2,At,6,4,"li",20),r["\u0275\u0275text"](3,"\n  "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.breadCrumbs)}}function Ft(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n  "),r["\u0275\u0275template"](1,Tt,4,1,"ol",18),r["\u0275\u0275text"](2,"\n")),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.breadCrumbs.length)}}const Et=15;class Mt extends ht{constructor(e,t,i){super(),this._renderer=e,this._chartColorService=t,this._changeDetectorRef=i,this.hasActionMenu=!1,this.breadCrumbs=[],this.dataBuilderBind=this._dataBuilder.bind(this),this.updateChartBind=this._updateChart.bind(this),this.dataBuilderForGroupsBind=this._dataBuilderForGroups.bind(this),this.updateChartForGroupsBind=this._updateChartForGroups.bind(this),this.showSizeInName=!0,this.groupView=!1,this.clickChart=new r.EventEmitter,this.groupEntered=new r.EventEmitter,this._tooltipPoint={x:0,y:0},this._closeMenuBind=this._closeMenu.bind(this)}categoryEnter(e){this._getRelatedToLegendNodes(e.id.toString()).dispatch("mouseenter",{bubbles:!0,cancelable:!0,detail:{eventSource:"legend"}})}categoryLeave(e){this._getRelatedToLegendNodes(e.id.toString()).dispatch("mouseleave")}ngOnInit(){this.innerData=(0,s.cloneDeep)(this.data),this._initLegend()}ngOnChanges(e){e.data&&(this.innerData=e.data.currentValue,this.breadCrumbs=[],this._updateLegend(e.data.firstChange))}ngOnDestroy(){this._removeListeners()}popupAnimationDone(){this.menuContainer.isOpen()?(this.optionsListRef.nativeElement.focus(),this._listKeyManager=new y.ListKeyManager(this.items).withWrap(!1).withHomeAndEnd(),this._listKeyManager.setFirstItemActive(),this._removeClickEventListener=this._renderer.listen("document","click",this._closeMenuBind),this._removeScrollEventListener=this._renderer.listen("document","scroll",this._closeMenuBind)):(this._listKeyManager=null,this._removeListeners())}keydownHandler(e){if(this._listKeyManager)switch((0,a.getEventKeyCode)(e)){case g.DOWN_ARROW:case g.UP_ARROW:this._listKeyManager.onKeydown(e);break;case g.ENTER:this.callAction(this.menuData.target,this.menuData.event,this.menuData.context,this.menuData.actions[this._listKeyManager.activeItemIndex]),this.menuContainer.close();break;case g.TAB:this.menuContainer.isOpen()&&this.menuContainer.close()}}getActiveDescendant(){return this._listKeyManager?`treemap__actions__action-${this._listKeyManager.activeItemIndex}`:void 0}isActiveDescendant(e){var t;return e===(null===(t=this._listKeyManager)||void 0===t?void 0:t.activeItemIndex)}callAction(e,t,i,n){n.callback(e,t,i)}enterGroup(e,t){this.innerData=t.data,this._legend=this._prepareGroupLegend(),this.chartBase.updateLegend(this._legend.items),this.groupEntered.emit({event:e,data:t.data,node:t}),a.SafeCdr.detectChanges(this._changeDetectorRef)}updateBreadCrumbs(e){this.breadCrumbs.length||this.breadCrumbs.push(this.innerData.name),this.breadCrumbs.push(e.data.name)}navigateToGroup(e,t,i){if(i.name===t)return this.innerData=(0,s.cloneDeep)(i),this.breadCrumbs=this.breadCrumbs.slice(0,this.breadCrumbs.indexOf(t)+1),1===this.breadCrumbs.length&&(this.breadCrumbs=[]),this._legend=this._prepareGroupLegend(),this.chartBase.updateLegend(this._legend.items),this.groupEntered.emit({event:e,data:i}),void a.SafeCdr.detectChanges(this._changeDetectorRef);i.children&&i.children.forEach(i=>{this.navigateToGroup(e,t,i)})}_dataBuilder(e,t){const i=this;this._g=e;const n=this.innerData,o=this._openTooltip.bind(this),s=this._closeTooltip.bind(this),l=this._ellipsis,c=this.clickChart,p=this._openMenu.bind(this),u=this.showSizeInName,m=this._chartColorService;this.hasActionMenu=this._isDataContainsActions(n);const h=d.treemap().tile(d.treemapResquarify).size([t.w,t.h]).round(!0).paddingInner(1),f=d.hierarchy(n).eachBefore(e=>{e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name}).sum(e=>e.size).sort((e,t)=>t.height-e.height||t.value-e.value);h(f);let g="",v=[],x=0;const y=this._g.selectAll("g").data(f.leaves()).enter().append("g").attr("class",e=>`treemap-node status-group-${e.data.id.split(" ").join("_")}`).attr("id",e=>e.data.id.split(" ").join("_")).attr("transform",e=>`translate(${e.x0}, ${e.y0})`),b=y.append("g").attr("class","treemap-node__inner").attr("tabindex",0).attr("aria-label",e=>`${e.data.name}`+(u?` (${e.data.size})`:"")).on("mouseenter",function(e){const t=d.select(this).select("rect"),n=t.node().style.fill,r=d.select(this),l=e.data.id.split(".").join("_").split(" ").join("_"),c=d.event.detail;0!==c&&"legend"===(null==c?void 0:c.eventSource)||(o(r,{context:e.data},`treemap_tooltip treemap_tooltip__${l}`,1),i._tooltipEl=window.document.querySelector(`.treemap_tooltip__${l}`),(0,a.isDefined)(i._tooltipEl)&&(i._tooltipMouseleaveHandler=()=>{s(),i._tooltipEl.removeEventListener("mouseleave",i._tooltipMouseleaveHandler)},i._tooltipEl.addEventListener("mouseleave",i._tooltipMouseleaveHandler))),t.node().style.fill=d.rgb(n).darker(.3).formatHex()}).on("mouseleave",function(){var e,t,n;const o=d.select(this).select("rect"),r=o.node().style.fill;(null===(n=null===(t=null===(e=d.event)||void 0===e?void 0:e.toElement)||void 0===t?void 0:t.offsetParent)||void 0===n?void 0:n.classList.contains("adapt-tooltip-inner"))||(s(),i._removeTooltipMouseleaveListener()),o.node().style.fill=d.rgb(r).brighter(.3).formatHex()}).on("click",function(e){s(),i._removeTooltipMouseleaveListener(),c.emit(e.data),d.event.stopPropagation()});b.append("rect").attr("class","treemap__node-rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("style",function(e){if(!g||g!==e.parent.data.id){const t=e.parent.data.customColorsRange;(r.isDevMode&&t&&2!==t.length||t&&t[0]&&7!==t[0].length||t&&t[1]&&7!==t[1].length)&&(0,a.adaptError)('ADAPT-ANGULAR Error! \n Treemap component! \n Please pass correct color range. "customColorsRange" property should be an array of 2 values, and each value should be HEX format color 7 chars length each. (eg. customColorsRange: ["#000000", "#ffffff"])'),g=e.parent.data.id,v=B.getColorRange(e.parent.data.status===N.Custom?t:e.parent.data.status,e.parent.children.length),x=0}const t=e.data.color?e.data.color:v[x],i=e.parent.children[x];return(0,a.isDefined)(i)&&(i.bg=t,i.textColor=m.getContrast(t,a.ColorType.HEX)),x++,`\n          fill: ${t};\n          transition: fill .2s;\n          cursor: pointer;\n        `}),b.append("g").attr("class","treemap-node-text").each(function(e){const t=d.select(this);t.attr("id",`${e.data.id.split(" ").join("_")}_text`);const i=t.append("text").attr("class","treemap__node-name").attr("transform",`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).attr("style",()=>`\n              text-anchor: middle;\n              dominant-baseline: middle;\n              font-size: 13px;\n              fill: ${e.textColor};\n            `);l(i,`${e.data.name}`+(u?` (${e.data.size})`:""),e.x1-e.x0-Et);const n=t.append("text").attr("class","treemap__node-info-text").attr("transform",`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).attr("dy",22).attr("text-anchor","middle").attr("style",`font-size: 12px; opacity: .7; fill: ${e.textColor}`);e.data.info&&e.y1-e.y0>40&&l(n,e.data.info,e.x1-e.x0-Et)}),this._buildActionsMenu(y,p),a.SafeCdr.detectChanges(this._changeDetectorRef)}_updateChart(e){const t=this.innerData,i=this._ellipsis,n=this.showSizeInName;this.hasActionMenu=this._isDataContainsActions(t);const o=d.treemap().tile(d.treemapResquarify).size([e.w,e.h]).round(!0).paddingInner(1),r=d.hierarchy(t).eachBefore(e=>{e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name}).sum(e=>e.size).sort((e,t)=>t.height-e.height||t.value-e.value);o(r);const a=r.leaves();this._g.selectAll("g.treemap-node").data(a).transition().duration(200).attr("transform",e=>`translate(${e.x0}, ${e.y0})`),this._g.selectAll("g.treemap__actions-menu rect").data(a.filter(e=>e.data.actions)).transition().duration(200).attr("transform",e=>`translate(${e.x1-e.x0-24}, 10)`),this._g.selectAll("g.treemap__actions-menu use").data(a.filter(e=>e.data.actions)).transition().duration(200).attr("transform",e=>`translate(${e.x1-e.x0-24}, 10)`),this._g.selectAll("rect.treemap__node-rect").data(a).transition().duration(200).attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0),this._g.selectAll("text.treemap__node-name").data(a).transition().duration(200).attr("transform",e=>`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).each(function(e){d.select(this).text(""),i(d.select(this),`${e.data.name}`+(n?` (${e.data.size})`:""),e.x1-e.x0-Et)}),this._g.selectAll("text.treemap__node-info-text").data(a).transition().duration(200).attr("transform",e=>`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).each(function(e){d.select(this).text(""),e.data.info&&e.y1-e.y0>40&&i(d.select(this),e.data.info,e.x1-e.x0-Et)})}_dataBuilderForGroups(e,t){const i=this;this._g=e;const n=this.innerData,o=this._ellipsis,r=this.clickChart,s=this.showSizeInName,l=this._openMenu.bind(this);this.hasActionMenu=this._isDataContainsActions(n);const c=d.treemap().tile(d.treemapResquarify).size([t.w,t.h]).round(!0).paddingInner(1).paddingOuter(1),p=d.hierarchy(n).eachBefore(e=>{e.data.id=(e.parent?e.parent.data.id+".":"")+e.data.name}).sum(e=>{var t;return(null===(t=e.children)||void 0===t?void 0:t.length)?0:e.size}).sort((e,t)=>t.height-e.height||t.value-e.value);c(p);const u=this._g.selectAll("g").data(p.children).enter().append("g").attr("class",e=>{var t;return"treemap-node "+((null===(t=e.data.children)||void 0===t?void 0:t.length)?"treemap-node__parent":"treemap-node__child")}).attr("id",e=>e.data.id.split(" ").join("_")).attr("transform",e=>`translate(${e.x0}, ${e.y0})`),m=u.append("g").attr("class","treemap-node__inner").attr("tabindex",0).attr("aria-label",e=>`${e.data.name}`+(s?` (${e.data.size})`:"")).each(function(e){if(i.groupView&&e.children){d.select(this).attr("role","button").attr("aria-expanded",!1)}}).on("click",function(e){d.event.stopPropagation(),i.groupView&&e.children&&(i._activeNode=e,i.chartBase.hideTooltip(),i.updateBreadCrumbs(e),i.enterGroup(d.event,e))}).on("keydown",function(e){d.event.keyCode!==g.ENTER&&d.event.keyCode!==g.SPACE||i.groupView&&e.children&&(i._activeNode=e,i.chartBase.hideTooltip(),i.updateBreadCrumbs(e),i.enterGroup(d.event,e))}),h=m.filter(e=>{var t;return!!(null===(t=e.children)||void 0===t?void 0:t.length)}),f=m.filter(e=>{var t;return!(null===(t=e.children)||void 0===t?void 0:t.length)});h.size()>0&&(h.each(function(e){const t=d.select(this);t.append("rect").attr("width",e.x1-e.x0).attr("height",e.y1-e.y0).attr("fill","transparent").on("mouseenter",function(){i._hideParentLabel(t)}).on("mouseleave",function(){i._showParentLabel(t,e)}),e.children.forEach(n=>{const r=t.append("g").attr("class","treemap-node__child").attr("tabindex",0).attr("aria-label",n.data.name),l=r.append("rect").attr("class","treemap__node-rect").attr("transform",`translate(${n.x0-e.x0}, ${n.y0-e.y0})`).attr("width",n.x1-n.x0).attr("height",n.y1-n.y0).attr("style",`fill: ${n.data.color}; transition: fill .2s; cursor: pointer;`);r.on("mouseenter",function(){const o=l.node().style.fill;l.node().style.fill=d.rgb(o).darker(.3).formatHex(),i._hideParentLabel(t);const{clientX:r,clientY:a}=d.event;i._tooltipPoint.x=r,i._tooltipPoint.y=a,i.chartBase.showTooltip(i._tooltipPoint,i.treemapGroupTooltip,{parentContext:e.data,childContext:n.data})}).on("mousemove",function(){const{clientX:e,clientY:t}=d.event;i._tooltipPoint.x=e,i._tooltipPoint.y=t,i.chartBase.updateTooltip()}).on("mouseleave",function(){const n=l.node().style.fill;l.node().style.fill=d.rgb(n).brighter(.3).formatHex(),i._showParentLabel(t,e),i.chartBase.hideTooltip()});const c=r.append("text").attr("class","treemap__node-child-label").attr("opacity","0").attr("transform",`translate(${n.x0-e.x0+(n.x1-n.x0)/2}, ${n.y0-e.y0+(n.y1-n.y0)/2})`).attr("style",`text-anchor: middle; dominant-baseline: middle; font-size: 13px; fill: ${i._chartColorService.getContrast(n.data.color,a.ColorType.HEX)};`);o(c,`${n.data.name}`+(s?` (${n.data.size})`:""),n.x1-n.x0-Et)})}).on("mouseenter",function(){d.select(this).selectAll(".treemap__node-child-label").attr("opacity","1")}).on("mouseleave",function(){d.select(this).selectAll(".treemap__node-child-label").attr("opacity","0")}),h.append("g").attr("class","treemap-node-parent-label").each(function(e){d.select(this).append("foreignObject").attr("width",e.x1-e.x0).attr("height",1).attr("overflow","visible").attr("transform",`translate(0, ${(e.y1-e.y0)/2-30})`).append("xhtml:div").html(`\n                <div class="treemap__group-parent-tooltip shadow-1">\n                    <div class="treemap__group-parent-tooltip-color"\n                         style="background-color: ${e.data.color}; border-color: ${i._chartColorService.getDarken(e.data.color,.14,a.ColorType.HEX)};">&nbsp;</div>\n                    <div class="treemap__group-parent-tooltip-text align-start" id="${e.data.id.split(" ").join("_")}_text">${e.data.name}</div>\n                </div>\n            `).attr("class","treemap__group-parent-tooltip-wrapper")})),f.size()>0&&(f.append("rect").attr("class","treemap__node-rect").attr("width",e=>e.x1-e.x0).attr("height",e=>e.y1-e.y0).attr("style",e=>`fill: ${e.data.color}; transition: fill .2s; cursor: pointer;`).on("click",function(e){r.emit(e.data)}),f.append("g").attr("class","treemap-node-text treemap-node-text_no-child").each(function(e){const t=d.select(this),n=t.append("text").attr("class","treemap__node-name").attr("transform",`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).attr("style",`text-anchor: middle; dominant-baseline: middle; font-size: 13px; fill: ${i._chartColorService.getContrast(e.data.color,a.ColorType.HEX)};`);o(n,`${e.data.name}`+(s?` (${e.data.size})`:""),e.x1-e.x0-Et);const r=t.append("text").attr("class","treemap__node-info-text").attr("transform",`translate(${(e.x1-e.x0)/2}, ${(e.y1-e.y0)/2})`).attr("dy",22).attr("text-anchor","middle").attr("style",`font-size: 12px; opacity: .7; fill: ${i._chartColorService.getContrast(e.data.color,a.ColorType.HEX)}`);e.data.info&&e.y1-e.y0>40&&o(r,e.data.info,e.x1-e.x0-Et)})),this._buildActionsMenu(u,l)}_updateChartForGroups(e){this._g.selectAll("g").remove(),this._dataBuilderForGroups(this._g,e)}_showParentLabel(e,t){e.select(".treemap-node-parent-label > foreignObject").attr("style",`opacity: 1; height: 1px; overflow: visible; width: ${t.x1-t.x0}px;`)}_hideParentLabel(e){e.select(".treemap-node-parent-label > foreignObject").attr("style","opacity: 0; height: 1px; overflow: hidden; width: 0;")}_buildActionsMenu(e,t){const i=this;e.append("g").attr("class","treemap__actions-menu").each(function(e){if(e.data.actions){const t=d.select(this);t.attr("tabindex",0).attr("role","button").attr("aria-haspopup",!0).attr("aria-expanded",!1),t.append("rect").attr("cursor","pointer").attr("fill","transparent").attr("height",20).attr("width",20).attr("transform",`translate(${e.x1-e.x0-24}, 10)`),t.append("g").attr("transform",`translate(${e.x1-e.x0-24}, 10)`).html(x.ai_ellipsis.data).select("svg").attr("cursor","pointer").attr("fill",e.textColor).attr("height",20).attr("width",20)}}).on("click",function(e){e.data.actions&&(d.event.stopPropagation(),i._targetWithActions=d.select(this),t(d.event,e.data))}).on("keydown",function(e){var n,o;(null===(o=null===(n=e.data)||void 0===n?void 0:n.actions)||void 0===o?void 0:o.length)&&(d.event.keyCode!==g.ENTER&&d.event.keyCode!==g.DOWN_ARROW&&d.event.keyCode!==g.SPACE||(d.event.preventDefault(),i._targetWithActions=d.select(this),t(d.event,e.data)),d.event.keyCode===g.ESCAPE&&i.menuContainer.isOpen()&&(d.event.preventDefault(),i._closeMenu()))})}_openMenu(e,t){this._closeTooltip(),this.menuContainer.placement=["bottom-right","top-right","right","left"],this.menuContainer.positionTo=this._targetWithActions.node(),this.menuData={target:this._targetWithActions.node(),event:e,context:t,actions:t.actions},this.menuContainer.isOpen()?this._closeMenu():(this.menuContainer.open(e),this._targetWithActions.attr("aria-expanded",!0)),a.SafeCdr.detectChanges(this._changeDetectorRef)}_closeMenu(){var e;this.menuContainer&&(this.menuContainer.close(),null===(e=this._targetWithActions)||void 0===e||e.attr("aria-expanded",!1)),this._removeListeners()}_isDataContainsActions(e){return e.children.some(e=>e.actions&&e.actions.length||e.children&&e.children.some(e=>e.actions&&e.actions.length))}_openTooltip(e,t,i,n){this.chartBase.showTooltip(e.node(),this.tooltip||this.treemapDefaultTooltip,t,i,n)}_closeTooltip(){this.chartBase.hideTooltip(),this._removeListeners()}_prepareLegend(){let e=[];const t=this.innerData,i=this._flattenByChildren(t.children);if(i.some(e=>e.color)?e=i:((0,a.isDefined)(t.status)&&e.push({name:t.name,status:t.status,color:t.status===N.Custom?t.customColorsRange:B.getColorRange(t.status,1)}),t.children.forEach(t=>{if((0,a.isDefined)(t.status)){e.filter(e=>t.status!==N.Custom&&t.status===e.status).length||e.push({name:t.name,status:t.status,color:t.status===N.Custom?t.customColorsRange:B.getColorRange(t.status,1)})}})),e.length)return e.sort((e,t)=>e.status-t.status),Object.assign({columns:1,items:e.map(e=>e.name),customColors:e.map(e=>(0,s.isArray)(e.color)?e.color[0]:e.color),activeHover:!1,activeClick:!1},this.legend)}_prepareGroupLegend(){const e=this.innerData;if(e.children)return Object.assign({columns:1,items:e.children.map(e=>e.name),customColors:e.children.map(e=>(0,s.isArray)(e.color)?e.color[0]:e.color),activeHover:!1,activeClick:!1},this.legend)}_initLegend(){this.suppressLegend||this.gradientLegend||(this._legend=this.groupView?this._prepareGroupLegend():this._prepareLegend())}_updateLegend(e){this.suppressLegend||e||this.gradientLegend||(this._legend=this.groupView?this._prepareGroupLegend():this._prepareLegend(),this.chartBase.updateLegend(this._legend.items))}_ellipsis(e,t,i){const n=t.split(""),o=e.append("tspan").attr("class","ellipsis").text("..."),r=i-o.node().getComputedTextLength(),a=n.length,s=e.insert("tspan",":first-child").text(n.join(""));for(;s.node().getComputedTextLength()>r&&n.length;)n.pop(),s.text(n.join(""));n.length===a&&o.remove()}_removeListeners(){this._removeClickEventListener&&(this._removeClickEventListener(),this._removeClickEventListener=null),this._removeScrollEventListener&&(this._removeScrollEventListener(),this._removeScrollEventListener=null)}_removeTooltipMouseleaveListener(){(0,a.isDefined)(this._tooltipEl)&&(0,a.isFunction)(this._tooltipMouseleaveHandler)&&(this._tooltipEl.removeEventListener("mouseleave",this._tooltipMouseleaveHandler),this._tooltipEl=null,this._tooltipMouseleaveHandler=null)}_flattenByChildren(e,t=[]){return e.forEach(e=>{e.children?this._flattenByChildren(e.children,t):t.push(e)}),t}_getRelatedToLegendNodes(e){const t=this._legend.items[parseInt(e,10)];return this._g.selectAll(".treemap-node").filter(e=>e.data.id.indexOf(t)>-1)}}var Ot;Mt.\u0275fac=function(e){return new(e||Mt)(r["\u0275\u0275directiveInject"](r.Renderer2),r["\u0275\u0275directiveInject"](B),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef))},Mt.\u0275cmp=r["\u0275\u0275defineComponent"]({type:Mt,selectors:[["adapt-treemap"]],viewQuery:function(e,t){if(1&e&&(r["\u0275\u0275viewQuery"](Se,7),r["\u0275\u0275viewQuery"](ft,7),r["\u0275\u0275viewQuery"](gt,7),r["\u0275\u0275viewQuery"](vt,5,a.AdaptDropdownToggleDirective),r["\u0275\u0275viewQuery"](xt,5,a.AdaptDropdownDirective),r["\u0275\u0275viewQuery"](yt,5),r["\u0275\u0275viewQuery"](a.AdaptListKeyManagerItemDirective,5)),2&e){let e;r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.chartBase=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.treemapDefaultTooltip=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.treemapGroupTooltip=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.menuAnchor=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.menuContainer=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.optionsListRef=e.first),r["\u0275\u0275queryRefresh"](e=r["\u0275\u0275loadQuery"]())&&(t.items=e)}},inputs:{backgroundColor:"backgroundColor",width:"width",height:"height",header:"header",legend:"legend",gradientLegend:"gradientLegend",suppressHeader:"suppressHeader",suppressLegend:"suppressLegend",tooltip:"tooltip",data:"data",noDataText:"noDataText",showSizeInName:"showSizeInName",groupView:"groupView"},outputs:{clickChart:"clickChart",groupEntered:"groupEntered"},exportAs:["treemap"],features:[r["\u0275\u0275InheritDefinitionFeature"],r["\u0275\u0275NgOnChangesFeature"]],decls:14,vars:14,consts:[[3,"data","width","height","backgroundColor","header","legend","gradientLegend","suppressHeader","suppressLegend","dataBuilder","updateChart","noDataText","topSectionTemplate","categoryEnter","categoryLeave"],["chartBase",""],["class","dropdown treemap-chart_hidden-menu","adaptDropdown","",3,"adaptRadarDisableEventSending","appendToBody","restoreFocusAfterClose","popupAnimationDone",4,"ngIf"],["treemapDefaultTooltip",""],["treemapGroupTooltip",""],["treemapBreadCrumbsTemplate",""],["adaptDropdown","",1,"dropdown","treemap-chart_hidden-menu",3,"adaptRadarDisableEventSending","appendToBody","restoreFocusAfterClose","popupAnimationDone"],["menuContainer",""],["adaptDropdownToggle","","type","button"],["menuAnchor",""],["adaptDropdownMenuTemplate",""],["tabindex","0","aria-labelledby","dropdownMenu",1,"dropdown-menu",3,"keydown"],["optionsListRef",""],[4,"ngIf"],["class","dropdown-item","type","button","role","button","tabindex","-1","adaptListKeyManagerItem","",3,"text-active","id","click",4,"ngFor","ngForOf"],["type","button","role","button","tabindex","-1","adaptListKeyManagerItem","",1,"dropdown-item",3,"id","click"],[1,"treemap__group-tooltip"],[1,"adapt-chart-tooltip-color-spot","mr-1"],["class","breadcrumb mb-0",4,"ngIf"],[1,"breadcrumb","mb-0"],["class","breadcrumb-item",3,"active",4,"ngFor","ngForOf"],[1,"breadcrumb-item"],["href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",3,"click"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"adapt-chart",0,1),r["\u0275\u0275listener"]("categoryEnter",function(e){return t.categoryEnter(e)})("categoryLeave",function(e){return t.categoryLeave(e)}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](2,"\n\n"),r["\u0275\u0275template"](3,wt,8,3,"div",2),r["\u0275\u0275text"](4,"\n\n"),r["\u0275\u0275template"](5,It,10,2,"ng-template",null,3,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n\n"),r["\u0275\u0275template"](8,_t,9,4,"ng-template",null,4,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](10,"\n\n"),r["\u0275\u0275template"](11,Ft,3,1,"ng-template",null,5,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](13,"\n")),2&e){const e=r["\u0275\u0275reference"](12);r["\u0275\u0275property"]("data",t.innerData)("width",t.width)("height",t.height)("backgroundColor",t.backgroundColor)("header",t.header)("legend",t._legend)("gradientLegend",t.gradientLegend)("suppressHeader",t.suppressHeader)("suppressLegend",t.suppressLegend)("dataBuilder",t.groupView?t.dataBuilderForGroupsBind:t.dataBuilderBind)("updateChart",t.groupView?t.updateChartForGroupsBind:t.updateChartBind)("noDataText",t.noDataText)("topSectionTemplate",e),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.hasActionMenu)}},directives:[Se,v.NgIf,a.AdaptDropdownDirective,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuTemplateDirective,v.NgForOf,a.AdaptListKeyManagerItemDirective],encapsulation:2}),function(e){e.LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOP="BT"}(Ot||(Ot={}));class kt{constructor(e){this._el=e}ngOnChanges(e){if(e){_e((0,d.select)(this._el.nativeElement),this.text,this.width)}}}function jt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",5),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275element"](2,"div",6),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275elementEnd"]())}function Pt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",7),r["\u0275\u0275text"](1,"\n  "),r["\u0275\u0275element"](2,"adapt-empty-state",8),r["\u0275\u0275text"](3,"\n"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("type","chart")("inverted",e.emptyStateConfig.inverted)("label",e.emptyStateConfig.label)}}function Nt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275text"](1,"\n    "),r["\u0275\u0275elementStart"](2,"adapt-slider",9),r["\u0275\u0275listener"]("ngModelChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().zoomLevel=t}),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n    "),r["\u0275\u0275elementStart"](5,"button",10),r["\u0275\u0275listener"]("click",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().fitGraph()}),r["\u0275\u0275text"](6),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n  "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngModel",e.zoomLevel)("customStepChange",!0)("min",e.minZoomLevel)("max",e.maxZoomLevel)("formatter",e.sliderValueFormatter)("step",.05)("styleClass","adapt-flow-chart__zoom-slider"),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"]("\n      ",e.texts.fitGraphButton,"\n    ")}}function Vt(e,t){}kt.\u0275fac=function(e){return new(e||kt)(r["\u0275\u0275directiveInject"](r.ElementRef))},kt.\u0275dir=r["\u0275\u0275defineDirective"]({type:kt,selectors:[["text","adaptTextEllipsis",""]],inputs:{text:"text",width:"width"},features:[r["\u0275\u0275NgOnChangesFeature"]]});const Lt=function(e){return{$implicit:e}};function Bt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,Vt,0,0,"ng-template",17),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngTemplateOutlet",t.customTemplateConfig.nodeTemplate)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](2,Lt,e))}}function $t(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"svg"),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275element"](2,"g",40),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3).$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275attribute"]("class",e.iconCustomClass)("fill",t.getStatusColor(e.status))("height",t.mainIconDimension)("width",t.mainIconDimension)("x",t.mainIconLeftPadding)("y",t.mainIconTopPadding),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("innerHTML",t.getSvgIcon(e.icon),r["\u0275\u0275sanitizeHtml"])}}function Gt(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275element"](0,"line",41)),2&e){const e=r["\u0275\u0275nextContext"](3).$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275attribute"]("x1",0)("y1",t.defaultNodeHeight)("x2",e.dimension.width)("y2",t.defaultNodeHeight)}}function zt(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"svg"),r["\u0275\u0275text"](1,"\n              "),r["\u0275\u0275element"](2,"g",40),r["\u0275\u0275text"](3,"\n            "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](),t=e.$implicit,i=e.index,n=r["\u0275\u0275nextContext"](6);r["\u0275\u0275attribute"]("class",t.iconCustomClass)("fill",n.getStatusColor(t.status)||n.defaultLabelColor)("height",n.additionalIconDimension)("width",n.additionalIconDimension)("x",n.basicLeftPadding+n.additionalLeftPadding)("y",n.additionalIconTopPadding+i*n.additionalInfoRowHeight),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("innerHTML",n.getSvgIcon(t.icon),r["\u0275\u0275sanitizeHtml"])}}function Ut(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275element"](0,"line",41)),2&e){const e=r["\u0275\u0275nextContext"]().index,t=r["\u0275\u0275nextContext"](4).$implicit,i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275attribute"]("x1",0)("y1",i.additionalLineTopPadding+e*i.additionalInfoRowHeight)("x2",t.dimension.width)("y2",i.additionalLineTopPadding+e*i.additionalInfoRowHeight)}}function qt(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"g"),r["\u0275\u0275text"](1,"\n            "),r["\u0275\u0275template"](2,zt,4,7,"svg",3),r["\u0275\u0275text"](3,"\n            "),r["\u0275\u0275text"](4,"\n            "),r["\u0275\u0275elementStart"](5,"text",43),r["\u0275\u0275text"](6,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n            "),r["\u0275\u0275template"](8,Ut,1,4,"line",39),r["\u0275\u0275text"](9,"\n          "),r["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=t.index,n=t.last,o=r["\u0275\u0275nextContext"](4).$implicit,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.icon),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("text",e.text)("width",o.dimension.width-3*a.basicLeftPadding-a.additionalIconDimension),r["\u0275\u0275attribute"]("fill",a.defaultColor)("x",e.icon?3*a.basicLeftPadding:a.basicLeftPadding+a.additionalLeftPadding)("y",a.additionalTextTopPadding+i*a.additionalInfoRowHeight),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!n)}}function Xt(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"g"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275template"](2,qt,10,7,"g",42),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3).$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.data)("ngForTrackBy",t.trackByForNodeData)}}const Ht=function(e){return{filter:e}};function Wt(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"g",19),r["\u0275\u0275listener"]("click",function(t){r["\u0275\u0275restoreView"](e);const i=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](2).handleNodeClick(t,i)})("mouseover",function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](2).handleMouseOver(t)})("mouseleave",function(){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"](4).nodeHoverId=""}),r["\u0275\u0275text"](1,"\n        "),r["\u0275\u0275elementStart"](2,"defs"),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementStart"](4,"filter",20),r["\u0275\u0275text"](5,"\n            "),r["\u0275\u0275element"](6,"feGaussianBlur",21),r["\u0275\u0275text"](7,"\n            "),r["\u0275\u0275element"](8,"feOffset",22),r["\u0275\u0275text"](9,"\n            "),r["\u0275\u0275element"](10,"feOffset",23),r["\u0275\u0275text"](11,"\n            "),r["\u0275\u0275element"](12,"feFlood",24),r["\u0275\u0275text"](13,"\n            "),r["\u0275\u0275element"](14,"feFlood",25),r["\u0275\u0275text"](15,"\n            "),r["\u0275\u0275element"](16,"feComposite",26),r["\u0275\u0275text"](17,"\n            "),r["\u0275\u0275element"](18,"feComposite",27),r["\u0275\u0275text"](19,"\n            "),r["\u0275\u0275elementStart"](20,"feMerge"),r["\u0275\u0275text"](21,"\n              "),r["\u0275\u0275element"](22,"feMergeNode",28),r["\u0275\u0275text"](23,"\n              "),r["\u0275\u0275element"](24,"feMergeNode",29),r["\u0275\u0275text"](25,"\n              "),r["\u0275\u0275element"](26,"feMergeNode",30),r["\u0275\u0275text"](27,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](28,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](29,"\n\n          "),r["\u0275\u0275elementStart"](30,"filter",20),r["\u0275\u0275text"](31,"\n            "),r["\u0275\u0275element"](32,"feGaussianBlur",31),r["\u0275\u0275text"](33,"\n            "),r["\u0275\u0275element"](34,"feOffset",32),r["\u0275\u0275text"](35,"\n            "),r["\u0275\u0275element"](36,"feOffset",33),r["\u0275\u0275text"](37,"\n            "),r["\u0275\u0275element"](38,"feFlood",34),r["\u0275\u0275text"](39,"\n            "),r["\u0275\u0275element"](40,"feFlood",35),r["\u0275\u0275text"](41,"\n            "),r["\u0275\u0275element"](42,"feComposite",26),r["\u0275\u0275text"](43,"\n            "),r["\u0275\u0275element"](44,"feComposite",27),r["\u0275\u0275text"](45,"\n            "),r["\u0275\u0275elementStart"](46,"feMerge"),r["\u0275\u0275text"](47,"\n              "),r["\u0275\u0275element"](48,"feMergeNode",28),r["\u0275\u0275text"](49,"\n              "),r["\u0275\u0275element"](50,"feMergeNode",29),r["\u0275\u0275text"](51,"\n              "),r["\u0275\u0275element"](52,"feMergeNode",30),r["\u0275\u0275text"](53,"\n            "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](54,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](55,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](56,"\n        "),r["\u0275\u0275elementStart"](57,"rect",36),r["\u0275\u0275text"](58,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](59,"\n        "),r["\u0275\u0275elementStart"](60,"g"),r["\u0275\u0275text"](61,"\n          "),r["\u0275\u0275template"](62,$t,4,7,"svg",3),r["\u0275\u0275text"](63,"\n          "),r["\u0275\u0275elementStart"](64,"text",37),r["\u0275\u0275text"](65,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](66,"\n          "),r["\u0275\u0275text"](67,"\n          "),r["\u0275\u0275text"](68,"\n          "),r["\u0275\u0275elementStart"](69,"text",38),r["\u0275\u0275text"](70,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](71,"\n          "),r["\u0275\u0275template"](72,Gt,1,4,"line",39),r["\u0275\u0275text"](73,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](74,"\n        "),r["\u0275\u0275template"](75,Xt,4,2,"g",3),r["\u0275\u0275text"](76,"\n      "),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"](2).$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate1"]("id","shadow",t.componentLevelId,""),r["\u0275\u0275advance"](26),r["\u0275\u0275propertyInterpolate1"]("id","shadow-hover",t.componentLevelId,""),r["\u0275\u0275advance"](27),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](20,Ht,t.nodeHoverId&&t.nodeHoverId===e.id?"url(#shadow-hover"+t.componentLevelId+")":"url(#shadow"+t.componentLevelId+")")),r["\u0275\u0275attribute"]("rx","rounded"===e.type?t.nodeRoundRadix:0)("width",e.dimension.width)("height",e.dimension.height)("fill",t.defaultBackgroundColor),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",e.icon),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("text",e.label)("width",e.dimension.width-3*t.mainIconLeftPadding-t.mainIconDimension),r["\u0275\u0275attribute"]("fill",t.defaultLabelColor)("x",e.icon?t.mainTextLeftPadding:t.basicLeftPadding+t.additionalLeftPadding)("y",t.mainTextTopPadding),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("text",e.description)("width",e.dimension.width-3*t.mainIconLeftPadding-t.mainIconDimension),r["\u0275\u0275attribute"]("fill",t.defaultColor)("x",e.icon?t.mainTextLeftPadding:t.basicLeftPadding+t.additionalLeftPadding)("y",2*(t.mainTextTopPadding-t.mainTextTopGap)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.data&&e.data.length)}}function Yt(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275template"](1,Wt,77,22,"g",18),r["\u0275\u0275text"](2,"\n    ")),2&e){const e=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e&&e.dimension&&e.dimension.width)}}function Qt(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275template"](1,Bt,4,4,"ng-container",15),r["\u0275\u0275text"](2,"\n\n    "),r["\u0275\u0275template"](3,Yt,3,1,"ng-template",null,16,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](5,"\n  ")),2&e){const e=r["\u0275\u0275reference"](4),t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.customTemplateConfig?null:t.customTemplateConfig.nodeTemplate)("ngIfElse",e)}}function Kt(e,t){}function Jt(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,Kt,0,0,"ng-template",45),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngTemplateOutlet",e.customTemplateConfig.defsTemplate)}}function Zt(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](1,"marker",46),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275element"](3,"polygon",47),r["\u0275\u0275text"](4,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](5,"\n    ")),2&e){const e=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate1"]("id","arrow",e.componentLevelId,"")}}function ei(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275template"](1,Jt,4,1,"ng-container",15),r["\u0275\u0275text"](2,"\n\n    "),r["\u0275\u0275template"](3,Zt,6,1,"ng-template",null,44,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](5,"\n  ")),2&e){const e=r["\u0275\u0275reference"](4),t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.customTemplateConfig?null:t.customTemplateConfig.defsTemplate)("ngIfElse",e)}}function ti(e,t){}function ii(e,t){if(1&e&&(r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275text"](1,"\n      "),r["\u0275\u0275template"](2,ti,0,0,"ng-template",17),r["\u0275\u0275text"](3,"\n    "),r["\u0275\u0275elementContainerEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngTemplateOutlet",t.customTemplateConfig.linkTemplate)("ngTemplateOutletContext",r["\u0275\u0275pureFunction1"](2,Lt,e))}}function ni(e,t){if(1&e&&(r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](0,"g"),r["\u0275\u0275text"](1,"\n          "),r["\u0275\u0275elementStart"](2,"rect",51),r["\u0275\u0275text"](3,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4,"\n          "),r["\u0275\u0275elementStart"](5,"text",52),r["\u0275\u0275text"](6,"\n          "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](7,"\n        "),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2).$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275attribute"]("transform","translate("+e.midPoint.x+","+e.midPoint.y+")"),r["\u0275\u0275advance"](2),r["\u0275\u0275attribute"]("filter","url(#shadow"+t.componentLevelId+")"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("text",e.label)("width",70)}}function oi(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n      "),r["\u0275\u0275namespaceSVG"](),r["\u0275\u0275elementStart"](1,"g",49),r["\u0275\u0275text"](2,"\n        "),r["\u0275\u0275text"](3,"\n        "),r["\u0275\u0275elementStart"](4,"path",50),r["\u0275\u0275text"](5,"\n        "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](6,"\n        "),r["\u0275\u0275template"](7,ni,8,4,"g",3),r["\u0275\u0275text"](8,"\n      "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](9,"\n    ")),2&e){const e=r["\u0275\u0275nextContext"]().$implicit,t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](4),r["\u0275\u0275attribute"]("stroke-dasharray","stroke"===e.type?t.strokeLineLength:0)("marker-end","url(#arrow"+t.componentLevelId+")"),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",e.label&&e.midPoint)}}function ri(e,t){if(1&e&&(r["\u0275\u0275text"](0,"\n    "),r["\u0275\u0275template"](1,ii,4,4,"ng-container",15),r["\u0275\u0275text"](2,"\n\n    "),r["\u0275\u0275template"](3,oi,10,3,"ng-template",null,48,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](5,"\n  ")),2&e){const e=r["\u0275\u0275reference"](4),t=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==t.customTemplateConfig?null:t.customTemplateConfig.linkTemplate)("ngIfElse",e)}}const ai=function(){return[]};function si(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ngx-graph",11),r["\u0275\u0275listener"]("zoomChange",function(t){r["\u0275\u0275restoreView"](e);return r["\u0275\u0275nextContext"]().handleZoomChangeDebounced(t)}),r["\u0275\u0275text"](1,"\n\n  "),r["\u0275\u0275template"](2,Qt,6,2,"ng-template",null,12,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](4,"\n\n  "),r["\u0275\u0275template"](5,ei,6,2,"ng-template",null,13,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](7,"\n\n  "),r["\u0275\u0275template"](8,ri,6,2,"ng-template",null,14,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275text"](10,"\n"),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("links",e.links||r["\u0275\u0275pureFunction0"](17,ai))("nodes",e.nodes)("curve",e.curve)("draggingEnabled",!1)("layoutSettings",e.layoutSettings)("enableZoom",e.enableZoom)("zoomSpeed",e.zoomSpeed)("autoZoom",e.autoZoom)("autoCenter",e.autoCenter)("center$",e.center$)("zoomToFit$",e.zoomToFit$)("update$",e.update$)("panToNode$",e.panToNode$)("panningEnabled",!e.isIE)("zoomLevel",e.zoomLevel)("minZoomLevel",e.minZoomLevel)("maxZoomLevel",e.maxZoomLevel)}}class li{constructor(e,t,i,n){this._deviceDetection=e,this._changeDetectorRef=t,this._domSanitizer=i,this._iconConfig=n,this.center$=new p.Subject,this.zoomToFit$=new p.Subject,this.panToNode$=new p.Subject,this.update$=new p.Subject,this.mainTextLeftPadding=70,this.mainTextTopPadding=34,this.mainTextTopGap=6,this.mainIconDimension=40,this.mainIconLeftPadding=15,this.mainIconTopPadding=20,this.defaultNodeHeight=78,this.defaultNodeWidth=280,this.nodeRoundRadix=45,this.additionalInfoRowHeight=42,this.additionalIconDimension=13,this.basicLeftPadding=12,this.additionalLeftPadding=4,this.additionalIconTopPadding=93,this.additionalTextTopPadding=103,this.additionalLineTopPadding=120,this.defaultColor="currentcolor",this.defaultLabelColor="var(--color-active)",this.defaultBackgroundColor="#fff",this.strokeLineLength=4,this.layoutSettings={orientation:Ot.BOTTOM_TO_TOP},this.minZoomLevel=.1,this.maxZoomLevel=4,this.handleZoomChangeDebounced=(0,a.debounce)(this.handleZoomChange.bind(this),200),this.loading=!0,this.isIE=!1,this.nodeHoverId="",this.curve=b.curveCatmullRom,this.orientation=Ot.BOTTOM_TO_TOP,this.zoomSpeed=.04,this.enableZoom=!0,this.autoZoom=!1,this.autoCenter=!1,this.hasEmptyState=!0,this.clickNode=new r.EventEmitter,this.class="adapt-flow-chart",this._defaultTexts={fitGraphButton:"Fit to screen"},this._defaultEmptyStateConfig={label:"",inverted:!1}}ngOnInit(){this.componentLevelId=Math.floor(1e6*Math.random()).toString(),this.isIE=this._deviceDetection.isIE(),this.texts=Object.assign(Object.assign({},this._defaultTexts),this.texts),this.emptyStateConfig=Object.assign(Object.assign({},this._defaultEmptyStateConfig),this.emptyStateConfig),this.layoutSettings.orientation=this.orientation}ngOnChanges(e){const t=e.nodes;this.nodes&&t&&t.previousValue!==t.currentValue&&(this.nodes.forEach(e=>{e.dimension={width:e.dimension&&e.dimension.width||this.defaultNodeWidth,height:this.getNodeHeight(e)}}),this.autoCenterToNode&&(this.autoCenter&&(this.autoCenter=!1,(0,a.adaptWarn)('ADAPT-ANGULAR Warning! Flow chart component!\n          Seems like "autoCenter" is enabled with "autoCenterToNode".\n          In this case "autoCenter" will be disabled for correct work of "autoCenterToNode"')),setTimeout(()=>{this.panToNode$.next(this.autoCenterToNode),this.autoCenterToNode=null})),this.loading=!1)}showEmptyState(){return this.hasEmptyState&&!this.loading&&(!this.nodes||0===this.nodes.length)}showGraph(){return(0,a.toBoolean)(!this.loading&&this.nodes&&0!==this.nodes.length)}getStatusColor(e){return e||0===e?B.getColorRange(e,1)[0]:this.defaultColor}getSvgIcon(e){return this._domSanitizer.bypassSecurityTrustHtml(this._iconConfig.getIcon(e))}fitGraph(){this.zoomToFit$.next(!0),this.center$.next(!0)}handleNodeClick(e,t){this.clickNode.emit({event:e,node:t})}handleMouseOver(e){this.nodeHoverId=e.id}handleZoomMouseDown(){this._disableAutoZoom()}handleZoomChange(e){this._disableAutoZoom(),this.zoomLevel=e,a.SafeCdr.markForCheck(this._changeDetectorRef)}getNodeHeight(e){return e.data&&e.data.length?this.defaultNodeHeight+e.data.length*this.additionalInfoRowHeight:e.dimension&&e.dimension.height||this.defaultNodeHeight}trackByForNodeData(e){return e}sliderValueFormatter(e){if((0^e)===e)return e.toString();{const t=e.toString().split(".")[1].length>2?2:1;return e.toFixed(t)}}_disableAutoZoom(){this.autoZoom&&(this.autoZoom=!1),this.autoCenter&&(this.autoCenter=!1)}}li.\u0275fac=function(e){return new(e||li)(r["\u0275\u0275directiveInject"](a.AdaptDeviceDetectionService),r["\u0275\u0275directiveInject"](r.ChangeDetectorRef),r["\u0275\u0275directiveInject"](u.DomSanitizer),r["\u0275\u0275directiveInject"](a.AdaptIconConfig))},li.\u0275cmp=r["\u0275\u0275defineComponent"]({type:li,selectors:[["adapt-flow-chart"]],hostVars:4,hostBindings:function(e,t){2&e&&(r["\u0275\u0275classMap"](t.class),r["\u0275\u0275styleProp"]("background-color",t.backgroundColor))},inputs:{links:"links",nodes:"nodes",curve:"curve",orientation:"orientation",zoomSpeed:"zoomSpeed",enableZoom:"enableZoom",autoZoom:"autoZoom",autoCenter:"autoCenter",texts:"texts",autoCenterToNode:"autoCenterToNode",hasEmptyState:"hasEmptyState",emptyStateConfig:"emptyStateConfig",customTemplateConfig:"customTemplateConfig",backgroundColor:"backgroundColor"},outputs:{clickNode:"clickNode"},features:[r["\u0275\u0275NgOnChangesFeature"]],decls:12,vars:4,consts:[["class","loader-container adapt-flow-chart__loader",4,"ngIf"],["class","adapt-flow-chart__empty-state",4,"ngIf"],[1,"adapt-flow-chart__zoom-slider-wrapper"],[4,"ngIf"],["version","1.1",0,"xmlns","svg","http://www.w3.org/2000/svg",3,"links","nodes","curve","draggingEnabled","layoutSettings","enableZoom","zoomSpeed","autoZoom","autoCenter","center$","zoomToFit$","update$","panToNode$","panningEnabled","zoomLevel","minZoomLevel","maxZoomLevel","zoomChange",4,"ngIf"],[1,"loader-container","adapt-flow-chart__loader"],[1,"loader-section"],[1,"adapt-flow-chart__empty-state"],[3,"type","inverted","label"],["orientation","vertical",3,"ngModel","customStepChange","min","max","formatter","step","styleClass","ngModelChange"],[1,"adapt-flow-chart__zoom-fit-button",3,"click"],["version","1.1",0,"xmlns","svg","http://www.w3.org/2000/svg",3,"links","nodes","curve","draggingEnabled","layoutSettings","enableZoom","zoomSpeed","autoZoom","autoCenter","center$","zoomToFit$","update$","panToNode$","panningEnabled","zoomLevel","minZoomLevel","maxZoomLevel","zoomChange"],["nodeTemplate",""],["defsTemplate",""],["linkTemplate",""],[4,"ngIf","ngIfElse"],["defaultNodeTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","node",3,"click","mouseover","mouseleave",4,"ngIf"],[1,"node",3,"click","mouseover","mouseleave"],["height","150%",3,"id"],["in","SourceAlpha","stdDeviation","2.5","result","blur"],["dx","0","dy","2","result","offsetBlur"],["dx","0","dy","4","result","offsetBlur2","in","blur"],["flood-color","black","flood-opacity","0.14","result","offsetColor"],["flood-color","black","flood-opacity","0.06","result","offsetColor2"],["in","offsetColor","in2","offsetBlur","operator","in","result","offsetBlur"],["in","offsetColor2","in2","offsetBlur2","operator","in","result","offsetBlur2"],["in","offsetBlur"],["in","offsetBlur2"],["in","SourceGraphic"],["in","SourceAlpha","stdDeviation","7","result","blur"],["dx","0","dy","4","result","offsetBlur"],["dx","0","dy","9","result","offsetBlur2","in","blur"],["flood-color","black","flood-opacity","0.17","result","offsetColor"],["flood-color","black","flood-opacity","0.09","result","offsetColor2"],[1,"adapt-flow-chart__box",3,"ngStyle"],["alignment-baseline","central","adaptTextEllipsis","",1,"adapt-flow-chart__label",3,"text","width"],["alignment-baseline","central","adaptTextEllipsis","",3,"text","width"],["stroke","lightgrey",4,"ngIf"],[3,"innerHTML"],["stroke","lightgrey"],[4,"ngFor","ngForOf","ngForTrackBy"],["adaptTextEllipsis","",3,"text","width"],["defaultDefsTemplate",""],[3,"ngTemplateOutlet"],["markerWidth","8","markerHeight","7","refX","7","refY","3","orient","auto",3,"id"],["points","0 0, 8 3, 0 6","fill","#333"],["defaultLinkTemplate",""],[1,"edge"],["stroke-width","2","stroke","#333",1,"line"],["width","90","height","30","x","-45","y","-18","rx","3",1,"adapt-flow-chart__edge-label-bg"],["adaptTextEllipsis","","alignment-baseline","central",1,"adapt-flow-chart__edge-label-text",3,"text","width"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,jt,4,0,"div",0),r["\u0275\u0275text"](1,"\n\n"),r["\u0275\u0275template"](2,Pt,4,3,"div",1),r["\u0275\u0275text"](3,"\n\n"),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275text"](5,"\n  "),r["\u0275\u0275template"](6,Nt,8,8,"div",3),r["\u0275\u0275text"](7,"\n"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](8,"\n\n"),r["\u0275\u0275text"](9,"\n"),r["\u0275\u0275template"](10,si,11,18,"ngx-graph",4),r["\u0275\u0275text"](11,"\n")),2&e&&(r["\u0275\u0275property"]("ngIf",t.loading),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.showEmptyState()),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.showGraph()&&t.enableZoom),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",t.showGraph()))},directives:[v.NgIf,a.AdaptEmptyStateComponent,a.AdaptSliderComponent,C.NgControlStatus,C.NgModel,S.GraphComponent,v.NgTemplateOutlet,v.NgStyle,kt,v.NgForOf],encapsulation:2,changeDetection:0});const ci=new r.Version("12.25.0");class di{}di.\u0275fac=function(e){return new(e||di)},di.\u0275mod=r["\u0275\u0275defineNgModule"]({type:di}),di.\u0275inj=r["\u0275\u0275defineInjector"]({providers:[B],imports:[[a.AdaptTooltipModule,S.NgxGraphModule,C.FormsModule,a.AdaptSliderModule,a.AdaptEmptyStateModule,a.AdaptDropdownModule,v.CommonModule,a.AdaptListKeyManagerModule,a.AdaptIconModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](di,{declarations:[Se,We,et,mt,Mt,H,re,Ie,ct,ke,j,te,ot,li,kt],imports:[a.AdaptTooltipModule,S.NgxGraphModule,C.FormsModule,a.AdaptSliderModule,a.AdaptEmptyStateModule,a.AdaptDropdownModule,v.CommonModule,a.AdaptListKeyManagerModule,a.AdaptIconModule],exports:[Se,We,et,mt,Mt,H,re,ct,ke,ot,li,kt]}),r["\u0275\u0275setComponentScope"](j,[v.NgClass,v.NgIf,v.NgSwitch,v.NgSwitchCase,ke],[]),r["\u0275\u0275setComponentScope"](te,[ot,v.NgIf,v.NgClass],[])},"./node_modules/@helix/platform/fesm2015/helix-platform-admin-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdminComponentsModule:()=>xp,ApplicationIssuesAdminComponent:()=>Ba,ApplicationIssuesRegistrationModule:()=>$a,ApprovalConfigurationAdminComponent:()=>ns,ApprovalConfigurationRegistrationModule:()=>os,ApprovalNotificationsComponent:()=>ps,ApprovalNotificationsRegistrationModule:()=>us,ChatbotsAdminComponent:()=>fs,ChatbotsRegistrationModule:()=>gs,CloseDuplicateIssuesComponent:()=>Va,CognitiveConsumptionAdminComponent:()=>Rs,CognitiveConsumptionRegistrationModule:()=>As,CognitiveServiceAdminComponent:()=>Hs,CognitiveServiceRegistrationModule:()=>Ws,CognitiveTrainingAdminComponent:()=>sl,CognitiveTrainingRegistrationModule:()=>ll,ConnectorConfigurationAdminComponent:()=>Tl,ConnectorConfigurationRegistrationModule:()=>Fl,ConnectorMappingAdminComponent:()=>vl,ConnectorMappingRegistrationModule:()=>xl,DataSourceConnectionsAdminComponent:()=>Ll,DataSourceConnectionsRegistrationModule:()=>Bl,DataSourceMappingAdminComponent:()=>yl,DataSourceMappingModule:()=>bl,EmailProfilesAdminComponent:()=>ql,EmailProfilesRegistrationModule:()=>Xl,FunctionalRolesAdminComponent:()=>Kl,FunctionalRolesRegistrationModule:()=>Jl,HkmAccessMappingAdminComponent:()=>ic,HkmAccessMappingRegistrationModule:()=>nc,IframeSecurityAdminComponent:()=>ac,IframeSecurityRegistrationModule:()=>sc,IssueDetailsComponent:()=>Na,IssueReportingConfigurationAdminComponent:()=>Pc,IssueReportingConfigurationModule:()=>Nc,JitterbitApisAdminComponent:()=>gc,JitterbitApisRegistrationModule:()=>xc,JitterbitConfigurationAdminComponent:()=>Cc,JitterbitConfigurationRegistrationModule:()=>Sc,ManageTenantAdminComponent:()=>$c,ManageTenantRegistrationModule:()=>Gc,MulesoftApisAdminComponent:()=>_c,MulesoftApisRegistrationModule:()=>Dc,MulesoftConfigurationAdminComponent:()=>Fc,MulesoftConfigurationRegistrationModule:()=>Ec,OutgoingMailboxStatusAdminComponent:()=>qc,OutgoingMailboxStatusRegistrationModule:()=>Xc,PermissionsPolicyHeaderAdminComponent:()=>Hc,PermissionsPolicyHeaderRegistrationModule:()=>Wc,RealTimeTranslationAdminComponent:()=>Qc,RealTimeTranslationRegistrationModule:()=>Kc,RoleEditorComponent:()=>td,RolePermissionsAdminComponent:()=>nd,RolePermissionsRegistrationModule:()=>od,RssoOauthAdminComponent:()=>pd,RssoOauthRegistrationModule:()=>ud,RulePoolManagementAdminComponent:()=>yd,RulePoolManagementRegistrationModule:()=>bd,ServerInformationAdminComponent:()=>Sd,ServerInformationRegistrationModule:()=>wd,ServerLogsAdminComponent:()=>Dd,ServerLogsRegistrationModule:()=>Rd,ServicesProviderRegionAdminComponent:()=>Td,ServicesProviderRegionRegistrationModule:()=>Fd,SubmitIssueToSupportComponent:()=>La,SummarizationServiceAdminComponent:()=>Od,SummarizationServiceRegistrationModule:()=>kd,SummarizationTestingAdminComponent:()=>Pd,SummarizationTestingRegistrationModule:()=>Nd,ToneAnalysisTestingAdminComponent:()=>$d,ToneAnalysisTestingRegistrationModule:()=>Gd,VirtualChatConfigurationAdminComponent:()=>Qd,VirtualChatConfigurationRegistrationModule:()=>Kd,WebApiConnectionsAdminComponent:()=>sp,WebApiConnectionsRegistrationModule:()=>lp,WebApiMappingAdminComponent:()=>Cl,WebApiMappingRegistrationModule:()=>Sl,WebhookCallbackConfigurationAdminComponent:()=>up,WebhookCallbackConfigurationRegistrationModule:()=>mp});var n=i("./node_modules/@angular/common/fesm2015/common.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/forms/fesm2015/forms.js"),a=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),u=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),m=i("lodash"),h=i("rxjs"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),v=i("./node_modules/rxjs/_esm2015/operators/index.js"),x=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),y=i("./node_modules/@angular/router/fesm2015/router.js"),b=i("./node_modules/@angular/common/fesm2015/http.js"),C=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),w=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),I=i("./node_modules/@angular/compiler/fesm2015/compiler.js"),_=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),D=i("./node_modules/@helix/platform/fesm2015/helix-platform-chatbot-api.js"),R=i("./node_modules/@bmc-ux/adapt-charts/fesm2015/bmc-ux-adapt-charts.js"),A=i("./node_modules/moment-es6/index.js"),T=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),F=i("./node_modules/@bmc-ux/dpl-iconfont/dist/module/index.js"),E=i("./node_modules/@helix/platform/fesm2015/helix-platform-rule-api.js"),M=i("./node_modules/@angular/cdk/fesm2015/clipboard.js");const O=function(e){return{controls:e}},k=function(e){return[e]};function j(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-form-builder",11),o["\u0275\u0275listener"]("modelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"](2).$implicit;return o["\u0275\u0275nextContext"]().onModelChange(t,i)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2).$implicit;o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](4,k,o["\u0275\u0275pureFunction1"](2,O,e.propertyConfigs)))("model",e.settingValues)}}function P(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",9),o["\u0275\u0275template"](1,j,1,6,"rx-form-builder",10),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.settingValues)}}function N(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2).$implicit;return o["\u0275\u0275nextContext"]().addNewSetting(t)}),o["\u0275\u0275element"](1,"span",15),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.admin.add-new-setting.label")," "))}function V(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,N,4,3,"button",12),o["\u0275\u0275element"](2,"rx-record-grid",13),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.createPermission),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",e.recordGridConfig)}}function L(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-accordion-tab",6),o["\u0275\u0275template"](1,P,2,1,"div",7),o["\u0275\u0275template"](2,V,3,2,"div",8),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=t.index,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isOpen",0===i)("title",e.name)("disabled",n.isNew&&e.isComponent&&!n.isChildSetting),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.supportsMultiple||n.isChildSetting),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.supportsMultiple&&e.recordGridConfig&&!n.isChildSetting)}}function B(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().saveSettings()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",!e.isAbleToSave()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function $(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().resetSettings()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.admin.reset.label")," "))}function G(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",18),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCancel()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.cancel.label")," "))}const z=function(e,t,i){return{"justify-content-start":e,"justify-content-end":t,"dp-footer":i}},U=["editor"];function q(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275element"](1,"adapt-empty-state",4),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.admin.no-settings-available.message")),o["\u0275\u0275property"]("type","config"))}function X(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",10),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](3).addNewSetting()}),o["\u0275\u0275element"](1,"span",11),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.admin.add-new-setting.label")," "))}function H(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,X,4,3,"button",8),o["\u0275\u0275element"](2,"rx-record-grid",9),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.state.createPermission),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",e.state.recordGridConfig)}}function W(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",12),o["\u0275\u0275elementStart"](1,"rx-admin-common-settings-editor",13),o["\u0275\u0275listener"]("busy",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onBusy(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("componentName",e.state.componentName)("groups",e.state.commonSettingGroups)("isNew",!1)("createPermission",e.state.createPermission)("getRecordGridConfig",e.getRecordGridConfig)("openSettingsDetails",e.openSettingsDetails)}}function Y(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275template"](1,H,3,2,"ng-container",6),o["\u0275\u0275template"](2,W,2,6,"div",7),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.state.supportsMultiple),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.state.supportsMultiple)}}function Q(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-tree",9),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedTreeNode=t}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("value",e.navigationTree)("selection",e.selectedTreeNode)("filter",!0)("texts",e.texts)("wrap",e.treeWrap)}}function K(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-runtime-view",10),o["\u0275\u0275listener"]("beforeLoad",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onBeforeLoad()})("afterLoad",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onAfterLoad()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configuration",e.runtimeViewConfig)}}function J(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-admin-common-settings",11),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("componentName$",e.componentName$)}}function Z(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",12),o["\u0275\u0275element"](1,"adapt-empty-state",13),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("type","config")("label",e.emptyStateLabel)}}const ee=function(e){return{busy:e,loaderType:"lineLoader",delay:250,backdrop:!1,message:null}};function te(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h6",16),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"p",5),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275elementStart"](7,"div",3),o["\u0275\u0275elementStart"](8,"h6",17),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"p",5),o["\u0275\u0275text"](12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",3),o["\u0275\u0275elementStart"](14,"h6",18),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"p",5),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",3),o["\u0275\u0275elementStart"](21,"h6",19),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"p",5),o["\u0275\u0275text"](25),o["\u0275\u0275pipe"](26,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,8,"com.bmc.arsys.rx.client.admin.application-issues.case-id.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.issueFields[e.fieldIds.caseId]," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,10,"com.bmc.arsys.rx.client.admin.application-issues.case-status.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.issueFields.selectionFieldOptionNamesById[e.fieldIds.caseStatus]," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,12,"com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed-date.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](19,14,e.issueFields[e.fieldIds.caseStatusRefreshDate],"medium")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](23,17,"com.bmc.arsys.rx.client.admin.application-issues.submitted-date.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](26,19,e.issueFields[e.fieldIds.submittedToSupportDate],"medium")," ")}}function ie(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h6",20),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"p",5),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.admin.application-issues.related-issue-guid.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.issueFields[e.fieldIds.relatedRecordGuid]," ")}}const ne=["submittedIssuesGrid"];function oe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"button",16),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().initSearchQuery()}),o["\u0275\u0275element"](2,"span",17),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"span",18),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,2,"com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.knowledge-articles.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](7,4,"com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.search-knowledge-articles.message")))}const re=["issuesRecordGrid"];function ae(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",2),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"rx-record-grid",3,4),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.admin.application-issues.header.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",e.issuesRecordGridConfiguration$)}}const se=function(e,t){return{title:e,content:t,variant:"danger"}};function le(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",5),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction2"](5,se,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.access-denied.title"),o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.admin.access-denied.message")))}const ce=["paginationComponents"],de=["tree"],pe=function(e){return{variant:"warning",dismissible:!1,content:e}};function ue(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",24),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](1,pe,e.invalidMsg))}}function me(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",25),o["\u0275\u0275elementStart"](1,"rx-select-with-pagination",26),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedCompanies=t})("selectionChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onCompanySelectionChange()}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"rx-select-with-pagination",27,28),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedOrganizations=t})("selectionChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onOrganizationSelectionChange()})("toggleDropdown",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onToggleDropdown(t)}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"rx-select-with-pagination",29,28),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedDepartments=t})("toggleDropdown",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onToggleDropdown(t)}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](37),i=o["\u0275\u0275reference"](35);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,13,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label")),o["\u0275\u0275property"]("ngModel",e.selectedCompanies)("optionLoader",e.companyLoaderFunc),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,15,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label")),o["\u0275\u0275property"]("ngModel",e.selectedOrganizations)("optionLoader",e.organizationLoaderFunc)("template",t)("disabled",e.selectedCompanies.length>1),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,17,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label")),o["\u0275\u0275property"]("ngModel",e.selectedDepartments)("optionLoader",e.departmentLoaderFunc)("template",i)("disabled",e.selectedCompanies.length>1||e.selectedOrganizations.length>1)}}function he(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",25),o["\u0275\u0275elementStart"](1,"rx-select-with-pagination",26),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedSupportCompanies=t})("selectionChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSupportCompanySelectionChange()}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"rx-select-with-pagination",27,28),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedSupportOrganizations=t})("selectionChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSupportOrganizationSelectionChange()})("toggleDropdown",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onToggleDropdown(t)}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"rx-select-with-pagination",29,28),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedSupportGroups=t})("toggleDropdown",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onToggleDropdown(t)}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](37),i=o["\u0275\u0275reference"](35);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,13,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label")),o["\u0275\u0275property"]("ngModel",e.selectedSupportCompanies)("optionLoader",e.companyLoaderFunc),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,15,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label")),o["\u0275\u0275property"]("ngModel",e.selectedSupportOrganizations)("optionLoader",e.supportOrganizationLoaderFunc)("template",t)("disabled",e.selectedSupportCompanies.length>1),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,17,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label")),o["\u0275\u0275property"]("ngModel",e.selectedSupportGroups)("optionLoader",e.supportGroupLoaderFunc)("template",i)("disabled",e.selectedSupportCompanies.length>1||e.selectedSupportOrganizations.length>1)}}function fe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",35),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().$implicit.roles[i].selected=t}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275propertyInterpolate"]("label",e.name),o["\u0275\u0275property"]("ngModel",n.roles[i].selected)}}function ge(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-accordion-tab",33),o["\u0275\u0275template"](1,fe,1,2,"adapt-rx-checkbox",34),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275propertyInterpolate"]("title",e.applicationName),o["\u0275\u0275property"]("isOpen",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.roles)}}function ve(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",30),o["\u0275\u0275elementStart"](1,"adapt-accordion",31),o["\u0275\u0275template"](2,ge,2,3,"adapt-accordion-tab",32),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.availableFunctionRolesByApplication)}}function xe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li"),o["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",35),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).loadedUsers[i].selected=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",e[1000000019]+" "+e[1000000018]),o["\u0275\u0275property"]("ngModel",n.loadedUsers[i].selected)}}function ye(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",43),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).loadUsers()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.load-more.label")," "))}function be(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",44),o["\u0275\u0275element"](1,"div",45),o["\u0275\u0275elementStart"](2,"span",46),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](4,1,"com.bmc.arsys.rx.client.common.loading-data")))}function Ce(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",36),o["\u0275\u0275elementStart"](1,"ul",37),o["\u0275\u0275elementStart"](2,"div",38),o["\u0275\u0275elementStart"](3,"adapt-rx-search",39),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().userSearchTextInput=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().loadUsers(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,xe,2,2,"li",40),o["\u0275\u0275template"](5,ye,3,3,"button",41),o["\u0275\u0275template"](6,be,5,3,"div",42),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngModel",e.userSearchTextInput)("debounceTime",200),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.loadedUsers),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.showLoadMoreButton&&!e.loadingMore),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.loadingMore)}}function Se(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li"),o["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",35),o["\u0275\u0275listener"]("ngModelChange",function(t){const i=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).availableFields[i].selected=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",e.name),o["\u0275\u0275property"]("ngModel",n.availableFields[i].selected)}}function we(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",47),o["\u0275\u0275elementStart"](1,"ul",37),o["\u0275\u0275template"](2,Se,2,2,"li",40),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.availableFields)}}function Ie(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-tree",48,49),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedApproverSelection=t}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("value",e.selectedApprovers)("selection",e.selectedApproverSelection)("wrap",e.treeWrap)}}function _e(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",50),o["\u0275\u0275element"](1,"div",51),o["\u0275\u0275elementStart"](2,"div",52),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,1,"com.bmc.arsys.rx.client.empty-state.no-items-available.label")," "))}function De(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"strong"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",53),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.displayValue),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.value+i.separatorArrow+e.organization," ")}}function Re(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"strong"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",53),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.displayValue),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.value," ")}}const Ae=function(e){return{busy:e,loaderType:"section"}},Te=["approvalFlowsForm"];function Fe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275element"](1,"adapt-empty-state",30),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.empty-state.no-items-available.label")),o["\u0275\u0275property"]("type","list"))}function Ee(e,t){1&e&&o["\u0275\u0275element"](0,"div",34)}function Me(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",31),o["\u0275\u0275element"](1,"adapt-rx-radiobutton",32),o["\u0275\u0275template"](2,Ee,1,0,"div",33),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("value",e.flowGroup)("label",e.flowGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError)}}function Oe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",35),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().expandAll()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.expand-all.label")," "))}function ke(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",36),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().collapseAll()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function je(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",37),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,pe,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.configuration.flow.group-has-no-flows-error.message")))}function Pe(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-empty-state",30),o["\u0275\u0275pipe"](1,"translate")),2&e&&(o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.empty-state.no-items-available.label")),o["\u0275\u0275property"]("type","rules"))}function Ne(e,t){1&e&&o["\u0275\u0275element"](0,"div",61)}function Ve(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",37),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,pe,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.not-selected.message")))}function Le(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-counter",62),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.levels=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.index,i=e.$implicit;o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.approval.configuration.levels")),o["\u0275\u0275propertyInterpolate"]("name","levels"+t),o["\u0275\u0275property"]("min",1)("ngModel",i.levels)}}function Be(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",68),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).$implicit.applyApproverExclusion=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2),t=e.index,i=e.$implicit;o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.approval.configuration.apply-approver-exclusion.label")),o["\u0275\u0275propertyInterpolate"]("name","applyApproverExclusion"+t),o["\u0275\u0275property"]("ngModel",i.applyApproverExclusion)}}function $e(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",63),o["\u0275\u0275elementStart"](1,"label",64),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"button",65),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"]().selectFlowApprovers(t)}),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Be,2,5,"adapt-rx-checkbox",66),o["\u0275\u0275element"](8,"span",17),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementStart"](10,"div",67),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.client.approval.configuration.approvers")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,7,"com.bmc.arsys.rx.client.common.edit.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.isLevelUp),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adaptPopover",o["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.client.approval.configuration.apply-approver-exclusion.tooltip")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",e.approversDisplayValue," ")}}function Ge(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-expression-form-control",69),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.approverQualification=t})("events",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().index;return o["\u0275\u0275nextContext"]().onApproverQualificationEvent(t)}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.index,i=e.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("name","approverQualification"+t),o["\u0275\u0275property"]("options",n.qualifyApproversOptions)("ngModel",i.approverQualification)}}function ze(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",70),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.signingCriteria=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.index,i=e.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,5,"com.bmc.arsys.rx.client.approval.configuration.if.multiple.approvers")),o["\u0275\u0275propertyInterpolate"]("name","signingCriteria"+t),o["\u0275\u0275property"]("ngModel",i.signingCriteria)("options",i.signingCriteriaList)("optionFormatter",n.optionFormatter)}}function Ue(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",71),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.approvalOverridePercentage=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.index,i=e.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.approval.configuration.value.of")),o["\u0275\u0275propertyInterpolate"]("name","signingCriteriaPercentage"+t),o["\u0275\u0275property"]("ngModel",i.approvalOverridePercentage)("options",n.signingCriteriaPercentageList)}}function qe(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"div",56),o["\u0275\u0275elementStart"](2,"rx-definition-picker",72),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.approvalFlowOutcomeMappingList[0].processName=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",56),o["\u0275\u0275elementStart"](4,"rx-definition-picker",73),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.approvalFlowOutcomeMappingList[1].processName=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",56),o["\u0275\u0275elementStart"](6,"rx-definition-picker",74),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().$implicit.approvalFlowOutcomeMappingList[2].processName=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](),t=e.index,i=e.$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("name","processOnApproval"+t),o["\u0275\u0275property"]("options",n.processOnApproveOptions)("ngModel",i.approvalFlowOutcomeMappingList[0].processName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("name","processOnRejection"+t),o["\u0275\u0275property"]("options",n.processOnRejectOptions)("ngModel",i.approvalFlowOutcomeMappingList[1].processName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("name","processOnError"+t),o["\u0275\u0275property"]("options",n.processOnErrorOptions)("ngModel",i.approvalFlowOutcomeMappingList[2].processName)}}const Xe=function(e){return{"form-group":e}};function He(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",38),o["\u0275\u0275element"](1,"div",39),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",40),o["\u0275\u0275listener"]("open",function(){return o["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){const t=o["\u0275\u0275restoreView"](e).$implicit,i=o["\u0275\u0275nextContext"]();return t.isOpen=!1,i.markInvalidSelectedGroupAndFlows()}),o["\u0275\u0275elementStart"](3,"div",41),o["\u0275\u0275elementStart"](4,"div",42),o["\u0275\u0275elementStart"](5,"div",43),o["\u0275\u0275elementStart"](6,"div",44),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Ne,1,0,"div",45),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",46),o["\u0275\u0275elementStart"](10,"div",47),o["\u0275\u0275elementStart"](11,"button",48),o["\u0275\u0275listener"]("click",function(t){const i=o["\u0275\u0275restoreView"](e).index,n=o["\u0275\u0275nextContext"]();return t.stopPropagation(),n.moveFlowUp(i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"button",49),o["\u0275\u0275listener"]("click",function(t){const i=o["\u0275\u0275restoreView"](e).index,n=o["\u0275\u0275nextContext"]();return t.stopPropagation(),n.moveFlowDown(i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",50),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().removeFlow(t)}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](16,Ve,2,5,"adapt-alert",21),o["\u0275\u0275elementStart"](17,"adapt-rx-textfield",51),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.flowName=t}),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](19,Le,2,6,"adapt-rx-counter",52),o["\u0275\u0275elementStart"](20,"rx-expression-form-control",53),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.qualification=t})("events",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().onFlowQualificationEvent(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](21,$e,12,11,"div",54),o["\u0275\u0275template"](22,Ge,1,3,"rx-expression-form-control",55),o["\u0275\u0275elementStart"](23,"div",11),o["\u0275\u0275elementStart"](24,"div",56),o["\u0275\u0275template"](25,ze,2,7,"adapt-rx-select",57),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"div",56),o["\u0275\u0275template"](27,Ue,2,6,"adapt-rx-select",58),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](28,"hr",59),o["\u0275\u0275elementStart"](29,"h6"),o["\u0275\u0275text"](30),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](32,qe,7,9,"div",60),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,n=t.first,r=t.last,a=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("cdkDragData",e),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("isOpen",e.isOpen),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("title",a.getFlowName(e)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",a.getFlowName(e)," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.hasError),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",n),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",r),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,24,"com.bmc.arsys.rx.client.common.remove.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.hasError),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](18,26,"com.bmc.arsys.rx.client.approval.configuration.flow.general.flow-name.label")),o["\u0275\u0275propertyInterpolate"]("name","flowName"+i),o["\u0275\u0275property"]("ngModel",e.flowName)("autofocus",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isLevelUp),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("name","flowQualification"+i),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](30,Xe,!e.isLevelUp))("options",a.flowQualificationOptions)("ngModel",e.qualification),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isLevelUp),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isLevelUp),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!e.isLevelUp),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.isLevelUp&&2===(null==e.signingCriteria[0]?null:e.signingCriteria[0].value)),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](31,28,"com.bmc.arsys.rx.client.approval.configuration.flow.outcome.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isOpen)}}function We(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",82),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-exists.warning")," "))}function Ye(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",75),o["\u0275\u0275elementStart"](1,"div",76),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",77),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().flowGroupName=t})("keydown",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onKeyDownNew(t)}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,We,3,3,"div",78),o["\u0275\u0275elementStart"](7,"div",79),o["\u0275\u0275elementStart"](8,"button",80),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addNewFlowGroup()}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"button",81),o["\u0275\u0275listener"]("click",function(){return o["\u0275\u0275restoreView"](e).context.close()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,8,"com.bmc.arsys.rx.client.approval.configuration.flow.new.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,10,"com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-name.label")),o["\u0275\u0275property"]("ngModel",e.flowGroupName)("autofocus",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.flowGroupName&&e.isAddNewFlowGroupButtonDisabled()),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isAddNewFlowGroupButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,12,"com.bmc.arsys.rx.client.common.add.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,14,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}function Qe(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",82),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-exists.warning")," "))}function Ke(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",75),o["\u0275\u0275elementStart"](1,"div",76),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",83),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().flowGroupNewName=t})("keydown",function(t){const i=o["\u0275\u0275restoreView"](e).context;return o["\u0275\u0275nextContext"]().onKeyDownRename(t,i)}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,Qe,3,3,"div",78),o["\u0275\u0275elementStart"](7,"div",79),o["\u0275\u0275elementStart"](8,"button",84),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).context;return o["\u0275\u0275nextContext"]().renameFlowGroup(t)}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,7,"com.bmc.arsys.rx.client.approval.configuration.flow.rename.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,9,"com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-name.label")),o["\u0275\u0275property"]("ngModel",e.flowGroupNewName)("autofocus",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.flowGroupNewName&&e.isRenameFlowGroupButtonDisabled()),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.isRenameFlowGroupButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,11,"com.bmc.arsys.rx.client.approval.update.button.label")," ")}}const Je=function(e){return{"border-top":e}},Ze=["dropdownButton"],et=["fieldDefinitionPicker"];function tt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-control-label",13),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("label",e.options.label)("showRequiredLabel",e.options.required)}}function it(e,t){if(1&e&&o["\u0275\u0275element"](0,"span",14),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("adaptPopover",e.options.tooltip)}}function nt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"span",15),o["\u0275\u0275listener"]("click",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().clearFieldDefinition(t)}),o["\u0275\u0275elementEnd"]()}}function ot(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",24),o["\u0275\u0275listener"]("click",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit,n=o["\u0275\u0275nextContext"](4);return t.stopPropagation(),n.selectField(i)}),o["\u0275\u0275element"](1,"adapt-highlight",25),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275classProp"]("active",i.value===e.label),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("result",e.label)("term",i.searchText)}}function rt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",22),o["\u0275\u0275template"](1,ot,2,4,"button",23),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.fields)}}function at(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",18),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return t.isExpanded=!t.isExpanded}),o["\u0275\u0275element"](1,"span",19),o["\u0275\u0275element"](2,"span",20),o["\u0275\u0275elementStart"](3,"span"),o["\u0275\u0275text"](4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,rt,2,1,"div",21),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("open",e.isExpanded),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",e.isAssociatedRecord?"d-icon-arrow_schema":"d-icon-file_text"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.label," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isExpanded)}}function st(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ul",16),o["\u0275\u0275template"](1,at,6,5,"li",17),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.filteredFieldsTree)}}const lt=["definitionNameCellTemplate"],ct=["grid"];function dt(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxDefinitionNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,1,e[i.field]),"\n")}}const pt=["tabSetComponent"];function ut(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-self-approval-configuration",10),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("registeredRecordDefinitionName",e.selectedRecordDefinition)}}function mt(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-approval-flow-configuration",10),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("registeredRecordDefinitionName",e.selectedRecordDefinition)}}const ht=["fieldNameCellTemplate"];function ft(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",6),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().editApprovalConfiguration(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,e[i.field])," ")}}function gt(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"rxAssociatedRecordFieldNamePipe")),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](1,1,e[i.field],e.associationsLabels),"\n")}}const vt=function(e){return{"mr-3":e}};function xt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-radiobutton",27),2&e){const e=t.$implicit,i=t.index,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("label",e.label)("value",e.value)("disabled",n.isEditMode)("ngClass",o["\u0275\u0275pureFunction1"](4,vt,0===i))}}function yt(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-empty-state",34),o["\u0275\u0275pipe"](1,"translate")),2&e&&(o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.approval.notification-configuration.no-flows-available.message")),o["\u0275\u0275property"]("type","grid"))}function bt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-tree",35),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).selectedFlows=t})("selectionChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onSelectionChange()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("value",e.availableFlows)("selection",e.selectedFlows)("wrap",e.treeWrap)}}const Ct=function(e){return{"border-danger":e}};function St(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275element"](1,"adapt-rx-control-label",29),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementStart"](3,"div",30),o["\u0275\u0275elementStart"](4,"div",31),o["\u0275\u0275template"](5,yt,2,4,"adapt-empty-state",32),o["\u0275\u0275template"](6,bt,1,3,"adapt-tree",33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,5,"com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.flow.sub-label")),o["\u0275\u0275property"]("showRequiredLabel",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](7,Ct,e.isTreeTouched&&e.isNotificationOptionInvalid())),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!e.availableFlows.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.availableFlows.length)}}function wt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton",36),o["\u0275\u0275listener"]("checkedChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().handleSendToOptionSelection()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index;o["\u0275\u0275property"]("value",e.id)("label",e.name)("ngClass",o["\u0275\u0275pureFunction1"](3,vt,0===i))}}function It(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",37),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.approver-selection")),o["\u0275\u0275property"]("options",e.sendToOtherOptions)("optionFormatter",e.optionFormatter)("tooltip",e.approverSelectionTooltip)}}function _t(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",38),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().handleTemplateDependentFieldSelection(t)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.approval.notification-configuration.email-based-approval-field.label"))}function Dt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"adapt-rx-select",39),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"adapt-rx-select",40),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,6,"com.bmc.arsys.rx.client.approval.notification-configuration.email-outgoing-profile-field.label")),o["\u0275\u0275property"]("options",e.emailProfileOptions)("optionFormatter",e.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,8,"com.bmc.arsys.rx.client.approval.notification-configuration.template-field.label")),o["\u0275\u0275property"]("options",e.emailTemplateOptions)("optionFormatter",e.optionFormatter)}}function Rt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-expression-form-control",41),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().buildExpression("subject")}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.subjectExpressionFormControlOptions)}}function At(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-expression-form-control",42),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().buildExpression("message")}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.notificationMessageExpressionOptions)}}function Tt(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-definition-picker",43),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.processDefinitionPickerOptions)}}function Ft(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",44),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.approvalNotificationForm.pristine||e.approvalNotificationForm.invalid||e.isNotificationOptionInvalid()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Et(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",44),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().update()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.approvalNotificationForm.pristine||e.approvalNotificationForm.invalid||e.isNotificationOptionInvalid()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.approval.update.button.label")," ")}}const Mt=["recordGrid"],Ot=["chatbotConfigurationsRecordGrid"],kt=["nameColumnTemplate"],jt=["displayChatbotsDropdownSwitch"];function Pt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-accordion-tab",2),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-rx-switch",7,8),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().sections.globalChatbotSettings.displayChatbotsDropdown=t}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"button",9),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSaveClick()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](3),t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,6,t.sections.globalChatbotSettings.title))("isOpen",t.sections.globalChatbotSettings.isExpanded),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate1"]("label"," ",o["\u0275\u0275pipeBind1"](4,8,"com.bmc.arsys.rx.client.admin.chatbots.display-available-chatbots.label")," "),o["\u0275\u0275property"]("ngModel",t.sections.globalChatbotSettings.displayChatbotsDropdown),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!e.dirty),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,10,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Nt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"a",10),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).dataItem;return o["\u0275\u0275nextContext"]().openChatbot(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,n.getCellValue(e,i))," ")}}function Vt(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-radiobutton",7),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.$implicit;o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,2,e.label))("value",e.value)}}const Lt=["availableEmailNotificationRecipientsRecordGrid"],Bt=["notificationForm"];function $t(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-counter",21),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.value=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onThresholdCounterModelChange()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275styleProp"]("width",32,"%"),o["\u0275\u0275propertyInterpolate1"]("name","threshold-",e.id,""),o["\u0275\u0275propertyInterpolate1"]("label","Threshold ",e.id," (%)"),o["\u0275\u0275property"]("rxCustomValidators",i.getEmptyThresholdValuesValidator())("ngModel",e.value)}}function Gt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",24),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"button",25),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).onRemoveRecipientClick(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e," ")}}function zt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ul",22),o["\u0275\u0275template"](1,Gt,3,1,"li",23),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.selectedEmailRecipients)}}function Ut(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",26),o["\u0275\u0275elementStart"](1,"div",27),o["\u0275\u0275element"](2,"adapt-empty-state",28),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.recipient-not-selected.message")))}function qt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-stacked-chart",5),2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](4);o["\u0275\u0275property"]("header",e.chartConfig.header)("height",e.chartConfig.height)("width",e.chartConfig.width)("xAxis",e.chartConfig.xAxis)("yAxis",e.chartConfig.yAxis)("series",e.chartConfig.series)("tooltip",t)("type",e.chartConfig.type)("showSlider",e.chartConfig.showSlider)("slidePointsCount",e.chartConfig.slidePointsCount)("seriesDisplay",e.chartConfig.seriesDisplay)("suppressLegend",e.chartConfig.suppressLegend)("thresholdLine",e.isCapacityAvailable()?e.capacity.value:null)}}function Xt(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-area-graph",6),2&e){const e=o["\u0275\u0275nextContext"](),t=o["\u0275\u0275reference"](6);o["\u0275\u0275property"]("header",e.chartConfig.header)("height",e.chartConfig.height)("width",e.chartConfig.width)("xAxis",e.chartConfig.xAxis)("yAxis",e.chartConfig.yAxis)("series",e.chartConfig.series)("tooltip",t)("suppressLegend",e.chartConfig.suppressLegend)("thresholdLine",e.isCapacityAvailable()?e.capacity.value:null)}}function Ht(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"span",9),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.capacity.title,": "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.capacity.value)}}function Wt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"span",7),o["\u0275\u0275elementStart"](2,"span",8),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275elementStart"](6,"span",9),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Ht,4,2,"div",10)),2&e){const e=t.data,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("background",null==e?null:e.color),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.category),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",i.chartConfig.yAxis.title,": "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.value),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.capacity)}}function Yt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementStart"](2,"span",9),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.capacity.title,": "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.capacity.value)}}function Qt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"span",7),o["\u0275\u0275elementStart"](2,"span",8),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275elementStart"](6,"span",9),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div"),o["\u0275\u0275text"](9),o["\u0275\u0275elementStart"](10,"span",9),o["\u0275\u0275text"](11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,Yt,4,2,"div",10)),2&e){const e=t.data,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("background",null==e?null:e.color),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.category),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",i.chartConfig.xAxis.title,": "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](i.formatXAxisVal(e.xValue)),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",i.chartConfig.yAxis.title,": "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.yValue),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.capacity)}}function Kt(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",3),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onNotificationsClick()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.admin.cognitive-consumption-group.notifications.label"),"\n"))}function Jt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"rx-cognitive-consumption-chart",8),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("chart",e)("groupData",t.groupData)("licenceUsageCount",t.licenceUsageCount)}}function Zt(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h5",9),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",10),o["\u0275\u0275element"](5,"adapt-empty-state",11),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,e.title)),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.empty-state.no-data-to-display.label"))}}function ei(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275element"](2,"rx-busy-indicator",6),o["\u0275\u0275template"](3,Jt,2,3,"div",7),o["\u0275\u0275template"](4,Zt,7,6,"div",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](3,Ae,e.busy)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.licenceUsageCount.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.licenceUsageCount.length)}}function ti(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-consumption-group",7),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]().$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("group",e)("sectionId",i.id)("isAdministrator",n.isAdministrator)}}function ii(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h4",5),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,ti,1,3,"rx-cognitive-consumption-group",6),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,2,e.title)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.groups)}}function ni(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"label",16),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-alert",17),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.admin.cognitive-search.status.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",e.statusAlert)}}function oi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"label",16),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-alert",17),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.error.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",e.failedReasonAlert)}}function ri(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-definition-picker",18),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("options",e.options)}}function ai(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",19),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"async")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.cognitive-search.collection-id.label")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](2,5,e.collections$))("optionFormatter",e.optionFormatter)}}function si(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-select",20),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.cognitive-search.external-data-set-source.label")),o["\u0275\u0275property"]("options",e.externalDatasetSourceOptions)("optionFormatter",e.optionFormatter)}}function li(e,t){1&e&&(o["\u0275\u0275element"](0,"div",21),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.cognitive-search.data-set-range.tooltip"),o["\u0275\u0275sanitizeHtml"])}const ci=function(e){return{iconName:"question_circle_o",content:e,placement:"right",popoverMode:!0}},di=["searchDatasetConfigurationTemplate"],pi=["datasetTypeTemplate"];function ui(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",10),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"]().createNewSearchDataset(t.datasetType)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",!i.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,e.displayName)," ")}}function mi(e,t){if(1&e&&o["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275textInterpolate1"](" ",n.formatDataSource(e[i.field]),"\n")}}function hi(e,t){if(1&e&&o["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275textInterpolate1"](" ",n.getDatasetType(e[i.field]),"\n")}}function fi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",19),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const gi=function(){return[300,1200]},vi=function(){return[5,1200]},xi=function(){return{poweredByBmcHelix:"Powered by BMC Helix"}},yi=function(){return[120,3600]};function bi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",5),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const Ci='[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textfield[_ngcontent-%COMP%]{max-width:400px}';function Si(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",11),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](2).connectionInfo[i.name]=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2).$implicit,i=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().resetConnectionTest(t,i)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("name",e.name)("ngModel",t.connectionInfo[e.name])("label",o["\u0275\u0275pipeBind1"](1,6,e.label))("required",e.required)("isPassword",!0),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function wi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",12),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](2).connectionInfo[i.name]=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2).$implicit,i=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().resetConnectionTest(t,i)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("name",e.name)("ngModel",t.connectionInfo[e.name])("label",o["\u0275\u0275pipeBind1"](1,7,e.label))("required",e.required)("disabled",e.readonly)("pattern",e.pattern),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}const Ii=function(e){return{errorMessage:e}};function _i(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textarea",13),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"](2).connectionInfo[i.name]=t})("ngModelChange",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2).$implicit,i=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().resetConnectionTest(t,i)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("name",e.name)("ngModel",t.connectionInfo[e.name])("label",o["\u0275\u0275pipeBind1"](1,6,e.label))("required",e.required)("rxJson",o["\u0275\u0275pureFunction1"](8,Ii,e.jsonValidatorErrorMessage)),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Di(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",7),o["\u0275\u0275template"](1,Si,2,8,"adapt-rx-textfield",8),o["\u0275\u0275template"](2,wi,2,9,"adapt-rx-textfield",9),o["\u0275\u0275template"](3,_i,2,10,"adapt-rx-textarea",10),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","password"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","text"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","json"===e.type)}}function Ri(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"form",null,3),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",4),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,Di,4,3,"div",5),o["\u0275\u0275elementStart"](5,"rx-connection-tester",6),o["\u0275\u0275listener"]("testConnection",function(){const t=o["\u0275\u0275restoreView"](e).$implicit,i=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().onTestConnection(t,i)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](3,5,i.serviceDefinitions[e].title))("isOpen",i.serviceDefinitions[e].isOpen),o["\u0275\u0275attribute"]("rx-id",i.serviceDefinitions[e].id),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",i.serviceDefinitions[e].fields),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("status",i.connectionTestStatusesByServiceId[e])}}function Ai(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const Ti=["ownCognitivePoviderConfigurationForm"],Fi=function(e){return{iconName:"question_circle_o",content:e,placement:"bottom",popoverMode:!0}};function Ei(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",10),o["\u0275\u0275elementStart"](1,"adapt-rx-switch",11),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.value.isEnabled=t}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-select",12),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.value.region=t}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-textfield",13),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.value.apiKey=t}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("name",e.key+"ProviderEnable")("label",o["\u0275\u0275pipeBind1"](2,19,e.value.switchLabel))("ngModel",e.value.isEnabled)("disabled",e.value.hasApiKey)("tooltip",e.value.tooltipText?o["\u0275\u0275pureFunction1"](27,Fi,o["\u0275\u0275pipeBind1"](3,21,e.value.tooltipText)):null),o["\u0275\u0275attribute"]("rx-id","enable-cognitive-service-provider-"+e.key),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,23,"com.bmc.arsys.rx.client.admin.cognitive-service.region.label")),o["\u0275\u0275property"]("name",e.key+"ProviderRegion")("options",i.regions)("optionFormatter",i.optionFormatter)("ngModel",e.value.region)("disabled",!e.value.isEnabled||e.value.hasApiKey),o["\u0275\u0275attribute"]("rx-id","cognitive-service-provider-region-"+e.key),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,25,"com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label")),o["\u0275\u0275property"]("isPassword",!0)("name",e.key+"ProviderApiKey")("ngModel",e.value.apiKey)("disabled",!e.value.isEnabled||e.value.hasApiKey),o["\u0275\u0275attribute"]("rx-id","cognitive-service-provider-"+e.key+"-api-key")}}function Mi(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275element"](1,"adapt-rx-select",7),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275attribute"]("rx-id","select-block-cognitive-service-region--"+e.id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formControlName",e.id)("label",e.name)("options",i.regions)("optionFormatter",i.optionFormatter)}}function Oi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const ki=function(e){return{type:"inline",variant:"warning",content:e}},ji=function(){return{content:"Summarization service has not been configured.",type:"inline",variant:"warning"}};function Pi(e,t){1&e&&o["\u0275\u0275element"](0,"adapt-alert",2),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction0"](1,ji))}function Ni(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-connection-tester",10),o["\u0275\u0275listener"]("testConnection",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).onTestConnection()}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("status",e.connectionTestStatus)}}function Vi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Li(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"form",3),o["\u0275\u0275elementStart"](1,"adapt-accordion",4),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",5),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"adapt-rx-switch",6),o["\u0275\u0275listener"]("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().resetConnectionTest()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"adapt-rx-counter",7),o["\u0275\u0275listener"]("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().resetConnectionTest()}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Ni,1,1,"rx-connection-tester",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Vi,3,4,"button",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formGroup",e.summarizationConfigurationForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](3,9,"com.bmc.arsys.rx.client.admin.cognitive-service.summarization.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("min",1)("max",50)("formControl",e.summarizationConfigurationForm.controls.summarizationPercentage)("step",1)("tooltip",o["\u0275\u0275pureFunction1"](13,ci,o["\u0275\u0275pipeBind1"](6,11,"com.bmc.arsys.rx.client.admin.cognitive-service.summarization.percentage.tooltip"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isAdministratorOverlayConfigured)}}function Bi(e,t){1&e&&(o["\u0275\u0275element"](0,"div",5),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("innerHTML",o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.cognitive-service.tone-analyzer.tone-score-threshold.tooltip"),o["\u0275\u0275sanitizeHtml"])}function $i(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",6),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const Gi=["selectedConfiguration"];function zi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"adapt-button",9),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openOnboardServicesPanel()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-icon",10),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"]()}2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.admin.cognitive-service-component.button.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,4,"com.bmc.arsys.rx.client.admin.cognitive-service-component.tooltip")))}function Ui(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-chatbot",11,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)}}function qi(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-administration-credentials",11,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)}}function Xi(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-connections",13,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)("isNativeClassificationProvider",e.isNativeClassificationProvider)}}function Hi(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-summarization",11,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)}}function Wi(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-regions",11,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)}}function Yi(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-cognitive-service-tone-analyzer",11,12),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("isAdministrator",e.isAdministrator)("currentOverlayContext",e.currentOverlayContext)}}const Qi='[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}',Ki=["chatbotDataSetForm"];function Ji(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"label",12),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div"),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](6,4,e.dataSet.lastSubmittedDate,"medium"))}}function Zi(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",15),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).dataSet.locale=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.data-set-locale.label")),o["\u0275\u0275property"]("options",e.localeOptions)("optionFormatter",e.optionFormatter)("ngModel",e.dataSet.locale)}}const en=function(){return[]};function tn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"adapt-rx-select",13),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().dataSet.chatbotLocale=t}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275pipe"](3,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Zi,2,6,"adapt-rx-select",14),o["\u0275\u0275pipe"](5,"async"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,5,"com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.chatbot-locale.label")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](3,7,e.chatbotLocaleOptions$)||o["\u0275\u0275pureFunction0"](11,en))("optionFormatter",e.optionFormatter)("ngModel",e.dataSet.chatbotLocale),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](5,9,e.isChatbotTranslationEnabled$))}}const nn=function(){return["csv"]},on=["fileDataSetForm"],rn=function(e){return{content:e,type:"inline",variant:"danger"}};function an(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",16),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](1,rn,e.dataSet.machineLearningError))}}function sn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",13),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"label",14),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div"),o["\u0275\u0275elementStart"](9,"label",14),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div"),o["\u0275\u0275elementStart"](16,"label",14),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,an,1,3,"adapt-alert",15),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.client.admin.cognitive-training.status.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.dataSet.status.label),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,9,"com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](14,11,e.dataSet.lastSubmittedDate,"medium")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,14,"com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](21,16,e.dataSet.lastTrainedDate,"medium")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.dataSet.machineLearningError)}}const ln=["interactiveEvaluationForm"];function cn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",12),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.displayClassification(e)," ")}}function dn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275element"](1,"hr"),o["\u0275\u0275template"](2,cn,2,1,"div",11),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.classifications)}}const pn=function(){return{iconName:"question_circle_o",content:"Separate text entries for multiple fields with a comma.",placement:"right",popoverMode:!0}},un=["recordDataSetForm"];function mn(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-alert",18),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](1,rn,e.dataSet.machineLearningError))}}function hn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"div",15),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"label",16),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div"),o["\u0275\u0275text"](7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div"),o["\u0275\u0275elementStart"](9,"label",16),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div"),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div"),o["\u0275\u0275elementStart"](16,"label",16),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,mn,1,3,"adapt-alert",17),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.client.admin.cognitive-training.status.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](e.dataSet.status.label),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,9,"com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](14,11,e.dataSet.lastSubmittedDate,"medium")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,14,"com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](21,16,e.dataSet.lastTrainedDate,"medium")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.dataSet.machineLearningError)}}function fn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",19),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set.seed-data-required.label")," "))}function gn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"span",19),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set.no-seed-data-required.label")," "))}const vn=function(e){return{primaryRecordDefinition:e}};function xn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"rx-record-grid-filter-select-control",23),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).dataSet.dataSourceHistory.layout.queryExpressionBasic=t}),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](4,vn,o["\u0275\u0275pipeBind1"](2,2,e.recordDefinition$)))("ngModel",e.dataSet.dataSourceHistory.layout.queryExpressionBasic)}}function yn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"rx-expression-form-control",24),o["\u0275\u0275listener"]("events",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).openExpressionEditor()})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).dataSet.dataSourceHistory.queryExpression=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",e.queryExpressionOptions)("ngModel",e.dataSet.dataSourceHistory.queryExpression)}}function bn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"rx-group-button-form-control",20),o["\u0275\u0275listener"]("ngModelChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFilterModeChange()})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().dataSet.filterMode=t}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](2,xn,3,6,"div",2),o["\u0275\u0275template"](3,yn,2,2,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-select",21),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().dataSet.dataSourceHistory.layout.textFields=t}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275pipe"](6,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"adapt-rx-select",22),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().dataSet.dataSourceHistory.layout.categoryFields=t}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275pipe"](9,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",e.filterModeOptions)("ngModel",e.dataSet.filterMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isBasicFilterMode()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isExpressionFilterMode()),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,12,"com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.text-fields.label")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](6,14,e.fieldOptions$))("optionFormatter",e.fieldOptionsFormatter)("ngModel",e.dataSet.dataSourceHistory.layout.textFields),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,16,"com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.category-fields.label")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](9,18,e.fieldOptions$))("optionFormatter",e.fieldOptionsFormatter)("ngModel",e.dataSet.dataSourceHistory.layout.categoryFields)}}const Cn=["cognitiveTrainingRecordGrid"],Sn=["chatbotNameCellTemplate"],wn=["dataSourceHistoryNameCellTemplate"];function In(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",8),o["\u0275\u0275elementStart"](1,"button",9),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",10),o["\u0275\u0275elementStart"](5,"button",11),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2);return t.createDataSet(t.innovationSuiteDataSourceType.name)}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",12),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2);return t.createDataSet(t.fileDataSourceType.name)}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("autoFocusFirst",!1),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,6,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!e.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,8,e.innovationSuiteDataSourceType.displayName)," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!e.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,10,e.fileDataSourceType.displayName)," ")}}function _n(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",13),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"](2);return t.createDataSet(t.fileDataSourceType.name)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("disabled",!e.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.new.label")," ")}}function Dn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,In,11,12,"div",6),o["\u0275\u0275template"](2,_n,3,4,"button",7),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isAutoClassificationTrainingAndEvaluation()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isChatbotEvaluation())}}function Rn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",14),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().openInteractiveEvaluationBlade()}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",!e.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.admin.cognitive-training.cognitive-training-record-grid.interactive-evaluation.label"),"\n")}}function An(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",n.formatDataSourceHistory(e,i)," ")}}function Tn(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"rxDefinitionNamePipe"),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.dataItem,i=t.column,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,n.getCellValue(e,i))," ")}}function Fn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-tab-panel",6),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275element"](2,"rx-cognitive-training-record-grid",7),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](1,5,e.title)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("evaluationName",i.evaluationName)("tab",e)("recordDefinitionName",e.recordDefinitionName)("trainingType",n.trainingType)}}function En(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-tabset"),o["\u0275\u0275template"](1,Fn,3,7,"adapt-tab-panel",5),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.tabs)}}function Mn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-accordion-tab",3),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,En,2,1,"adapt-tabset",4),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](1,3,e.title))("isOpen",e.isExpanded),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",i.trainingType)}}const On=function(){return{type:"inline",variant:"info",icon:!0}};function kn(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"adapt-alert",14),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction0"](4,On)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.admin.comaround-knowledge.portal-cannot-be-selected.message")," "))}function jn(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-connection-mapping",4),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configurations",i.configurationList)("aliasMapping",e)}}function Pn(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-connection-mapping",4),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configurations",i.configurationList)("aliasMapping",e)}}function Nn(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-connection-mapping",4),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("configurations",i.configurationList)("aliasMapping",e)}}const Vn=["connectorConfigurationTemplate"],Ln=function(e,t){return{title:e,content:t,variant:"danger",dismissible:!1}};function Bn(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-alert",3),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction2"](3,Ln,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.connection-configuration.invalid-integration-service-configuration.message"),e.errorText))}}function $n(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",4),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().newConnectionConfiguration()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"rx-record-grid",3,5),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",e.gridConfig)}}const Gn=["providerPicker"];function zn(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-control-label",9),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,2,e.options.label))("showRequiredLabel",e.options.required)}}function Un(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",16),o["\u0275\u0275listener"]("click",function(t){const i=o["\u0275\u0275restoreView"](e).$implicit,n=o["\u0275\u0275nextContext"](4);return t.stopPropagation(),n.selectProvider(i)}),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](4);o["\u0275\u0275classProp"]("active",i.value===e),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,3,e))}}function qn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275template"](1,Un,4,5,"button",15),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.providers)}}function Xn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",12),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return t.isExpanded=!t.isExpanded}),o["\u0275\u0275element"](1,"span",13),o["\u0275\u0275elementStart"](2,"span"),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,qn,2,1,"div",14),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275classProp"]("open",e.isExpanded),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.label," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isExpanded)}}function Hn(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"ul",10),o["\u0275\u0275template"](1,Xn,5,4,"li",11),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.options.providersTree)}}function Wn(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-radiobutton",12),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.name)("label",e.name)}}const Yn=function(e){return{iconName:"question_circle_o",content:e,placement:"top",popoverMode:!0}};function Qn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",3),o["\u0275\u0275element"](3,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275element"](7,"adapt-rx-counter",5),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",2),o["\u0275\u0275elementStart"](10,"div",3),o["\u0275\u0275elementStart"](11,"adapt-rx-radiobutton-group",6),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().setAuthType(t)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275template"](13,Wn,1,2,"adapt-rx-radiobutton",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",2),o["\u0275\u0275elementStart"](15,"div",3),o["\u0275\u0275element"](16,"adapt-rx-textfield",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",3),o["\u0275\u0275element"](18,"adapt-rx-checkbox",9),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",2),o["\u0275\u0275elementStart"](22,"div",10),o["\u0275\u0275elementStart"](23,"rx-connection-tester",11),o["\u0275\u0275listener"]("testConnection",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onTestConnection()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,12,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,14,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label")),o["\u0275\u0275property"]("formControl",e.connectionPropertiesForm.controls.port)("min",0)("max",65535),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,16,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.dataSourceAuthenticationTypes),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("isPassword",!0)("disabled",e.isRasPasswordDisabled),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](19,18,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.use-current-user-permissions.label")),o["\u0275\u0275property"]("tooltip",o["\u0275\u0275pureFunction1"](22,Yn,o["\u0275\u0275pipeBind1"](20,20,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.permission.tooltip"))),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("status",e.connectionTestStatus)}}function Kn(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275element"](2,"rx-custom-data-source-provider-picker",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",e.customDataSourceProvidersPickerOptions)}}function Jn(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"div",2),o["\u0275\u0275elementStart"](2,"div",3),o["\u0275\u0275elementStart"](3,"adapt-rx-select",14),o["\u0275\u0275listener"]("onSelectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onWebApiChange(t)}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,3,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.web-api-connection.label")),o["\u0275\u0275property"]("options",e.webApis)("optionFormatter",e.optionFormatter)}}const Zn=["dataSourceConnectionsGrid"];function eo(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-radiobutton",10),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.$implicit;o["\u0275\u0275property"]("value",e.value.value)("label",o["\u0275\u0275pipeBind1"](1,2,e.value.label))}}const to=["emailProfilesGrid"],io=["mailboxFunctionCellTemplate"];function no(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",i.getMailboxFunctionType(e)," ")}}const oo=["functionalRoleEditorForm"];function ro(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",21),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).functionalRole.id=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.common.id.label")),o["\u0275\u0275property"]("ngModel",e.functionalRole.id)("readonly",!0)("disabledStyleForReadonlyState",!0)}}function ao(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-tree",22),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).selectedRoles=t}),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("value",e.availableRoles)("selection",e.selectedRoles)("wrap",e.treeWrap)}}function so(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",11),o["\u0275\u0275elementStart"](1,"div",12),o["\u0275\u0275elementStart"](2,"adapt-rx-select",13),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedApplication=t}),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",14),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().functionalRole.name=t}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-textfield",15),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().functionalRole.description=t}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ro,2,6,"adapt-rx-textfield",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",12),o["\u0275\u0275element"](10,"adapt-rx-control-label",17),o["\u0275\u0275elementStart"](11,"div",18),o["\u0275\u0275elementStart"](12,"div",19),o["\u0275\u0275template"](13,ao,1,3,"adapt-tree",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,12,"com.bmc.arsys.rx.client.common.application-or-library.label")),o["\u0275\u0275property"]("ngModel",e.selectedApplication)("options",e.applicationOptions)("optionFormatter",e.optionFormatter)("readonly",e.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,14,"com.bmc.arsys.rx.client.admin.functional-roles.functional-role-name.label")),o["\u0275\u0275property"]("ngModel",e.functionalRole.name)("rxCustomValidators",e.validatorFn),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,16,"com.bmc.arsys.rx.client.common.description.label")),o["\u0275\u0275property"]("ngModel",e.functionalRole.description),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",e.isEditMode),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",e.availableRoles.length)}}const lo=["functionalRolesRecordGrid"];function co(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",28),o["\u0275\u0275elementStart"](1,"span"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"button",29),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"]().deleteVisibilityGroup(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.supportGroupName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!1)}}const po=function(e){return{count:e}},uo=["itsmHkmMappingDataGrid"],mo=["statusColTemplate"],ho=["visibilityGroupColTemplate"];function fo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",15),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().setSelected(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275classProp"]("text-active",(null==e?null:e.permissionId)===(null==i.selectedCompany?null:i.selectedCompany.permissionId))("active",(null==e?null:e.permissionId)===(null==i.selectedCompany?null:i.selectedCompany.permissionId)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function go(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",15),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).$implicit;return o["\u0275\u0275nextContext"]().setSelectedLineOfBusiness(t)}),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275classProp"]("text-active",e.id===i.selectedLob.id)("active",e.id===i.selectedLob.id),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function vo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",21),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("animate",e.animation)("showAlert",!1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.unmapped.label")," ")}}function xo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",22),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("animate",e.animation)("showAlert",!1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.mapped.label")," ")}}function yo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275elementStart"](1,"div",17),o["\u0275\u0275elementStart"](2,"div",18),o["\u0275\u0275template"](3,vo,3,5,"adapt-badge",19),o["\u0275\u0275template"](4,xo,3,5,"adapt-badge",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem;o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!e.isMapped),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isMapped)}}function bo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"a",25),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().dataItem;return o["\u0275\u0275nextContext"]().openAccessMappingDialog(t)}),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().dataItem;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.supportGroupName)}}function Co(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().dataItem;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.supportGroupName," ")}}function So(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",16),o["\u0275\u0275template"](1,bo,3,1,"div",23),o["\u0275\u0275template"](2,Co,2,1,"div",23),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isMapped&&i.hasPortals()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isMapped||!i.hasPortals())}}const wo=["iframeAllowedSitesListBuilder"],Io=["trustedWebsitesListBuilder"];function _o(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-textfield",27),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.$implicit;o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,5,e.labelKey))("isPassword",e.isPassword)("formControlName",e.name)("required",e.isRequired),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Do(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275template"](2,_o,2,7,"adapt-rx-textfield",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",i.authTypeFields)}}function Ro(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Do,3,2,"div",23),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("authTypeDetails").controls)}}function Ao(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",31),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275elementStart"](4,"div",34),o["\u0275\u0275element"](5,"adapt-rx-control-label",35),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"span",36),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).removeCustomAuthTypeHeader(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-textfield",37),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-textfield",38),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.http-header.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](9,6,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](11,8,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder"))}}function To(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",39),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275elementStart"](4,"div",34),o["\u0275\u0275element"](5,"adapt-rx-control-label",35),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"span",36),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).removeCustomAuthTypeQueryParam(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-textfield",37),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-textfield",38),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.query-parameter.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](9,6,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](11,8,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder"))}}function Fo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",28),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addCustomAuthTypeHeader()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Ao,12,10,"div",29),o["\u0275\u0275elementStart"](5,"button",28),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addCustomAuthTypeQueryParam()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,To,12,10,"div",30),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.add-http-header.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("customAuthTypeHeaders").controls),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,6,"com.bmc.arsys.rx.client.admin.ipaas-apis.add-query-parameter.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("customAuthTypeQueryParams").controls)}}function Eo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",40),o["\u0275\u0275elementStart"](1,"div",41),o["\u0275\u0275element"](2,"adapt-rx-textfield",42),o["\u0275\u0275elementStart"](3,"button",43),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().removeHeader(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e)}}function Mo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",44),o["\u0275\u0275elementStart"](1,"div",41),o["\u0275\u0275element"](2,"adapt-rx-textfield",42),o["\u0275\u0275elementStart"](3,"button",43),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().removeQueryParameter(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e)}}const Oo=["groupNameForm"],ko=function(e,t){return{errorMessage:e,items:t}},jo=["ipaasApisGrid"],Po=["ipaasBaseApisConfiguration"];function No(e,t){if(1&e&&(o["\u0275\u0275element"](0,"adapt-rx-textfield",27),o["\u0275\u0275pipe"](1,"translate")),2&e){const e=t.$implicit;o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](1,5,e.labelKey))("isPassword",e.isPassword)("formControlName",e.name)("required",e.isRequired),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Vo(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",24),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275template"](2,No,2,7,"adapt-rx-textfield",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.index,i=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",i.authTypeFields)}}function Lo(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Vo,3,2,"div",23),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("authTypeDetails").controls)}}function Bo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",31),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275elementStart"](4,"div",34),o["\u0275\u0275element"](5,"adapt-rx-control-label",35),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"span",36),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).removeCustomAuthTypeHeader(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-textfield",37),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-textfield",38),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.http-header.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](9,6,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](11,8,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder"))}}function $o(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",39),o["\u0275\u0275elementStart"](1,"div",25),o["\u0275\u0275elementStart"](2,"div",32),o["\u0275\u0275elementStart"](3,"div",33),o["\u0275\u0275elementStart"](4,"div",34),o["\u0275\u0275element"](5,"adapt-rx-control-label",35),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"span",36),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"](2).removeCustomAuthTypeQueryParam(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-textfield",37),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-textfield",38),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.query-parameter.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](9,6,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](11,8,"com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder"))}}function Go(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"button",28),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addCustomAuthTypeHeader()}),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,Bo,12,10,"div",29),o["\u0275\u0275elementStart"](5,"button",28),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().addCustomAuthTypeQueryParam()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,$o,12,10,"div",30),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.admin.ipaas-apis.add-http-header.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("customAuthTypeHeaders").controls),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,6,"com.bmc.arsys.rx.client.admin.ipaas-apis.add-query-parameter.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.ipaasApiEditorForm.get("customAuthTypeQueryParams").controls)}}function zo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",40),o["\u0275\u0275elementStart"](1,"div",41),o["\u0275\u0275element"](2,"adapt-rx-textfield",42),o["\u0275\u0275elementStart"](3,"button",43),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().removeHeader(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e)}}function Uo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",44),o["\u0275\u0275elementStart"](1,"div",41),o["\u0275\u0275element"](2,"adapt-rx-textfield",42),o["\u0275\u0275elementStart"](3,"button",43),o["\u0275\u0275listener"]("click",function(){const t=o["\u0275\u0275restoreView"](e).index;return o["\u0275\u0275nextContext"]().removeQueryParameter(t)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroupName",e)}}function qo(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"adapt-rx-textfield",8),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.common.user-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.password.label")),o["\u0275\u0275property"]("isPassword",!0))}function Xo(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275element"](1,"adapt-rx-textfield",9),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementContainerEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-id.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-secret.label")),o["\u0275\u0275property"]("isPassword",!0))}function Ho(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",11),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,rn,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-missing.message")))}const Wo=function(e){return{content:e,type:"inline",variant:"success"}};function Yo(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",11),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,Wo,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.account-is-linked.message")))}const Qo=function(e){return{content:e,type:"inline",variant:"warning"}};function Ko(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",11),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,Qo,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.account-is-not-linked.message")))}function Jo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Yo,2,5,"adapt-alert",8),o["\u0275\u0275template"](2,Ko,2,5,"adapt-alert",8),o["\u0275\u0275elementStart"](3,"button",12),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).openWindow()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isAccountLinked),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!e.isAccountLinked),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.isAccountLinked),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,4,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.link-account.label")," ")}}function Zo(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"form",3),o["\u0275\u0275elementStart"](1,"adapt-accordion-tab",4),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275element"](3,"adapt-rx-textfield",5),o["\u0275\u0275element"](4,"adapt-rx-textfield",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"adapt-accordion-tab",7),o["\u0275\u0275template"](6,Ho,2,5,"adapt-alert",8),o["\u0275\u0275template"](7,Jo,6,6,"ng-container",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"button",10),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().saveConfig()}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("formGroup",e.issueReportingConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](2,6,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.bmc-service-cloud-account-configuration.label")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("ngIf",null===e.oauthUrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.oauthUrl),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.issueReportingConfigurationForm.pristine||e.issueReportingConfigurationForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,8,"com.bmc.arsys.rx.client.common.save.label")," ")}}const er=["manageTenantGrid"],tr=["permissionPolicyHeaderModel"];function ir(e,t){if(1&e&&(o["\u0275\u0275text"](0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"a",5),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.permissions-policy-header.syntax-information.message")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("href",e.syntaxUrl,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.syntaxUrl)}}const nr=function(e){return{iconName:"question_circle_o",content:e,placement:"right",popoverMode:!0,maxWidth:400}},or=["realTimeTranslationForm"],rr=["roleEditorForm"],ar=["rolesPermissionsRecordGrid"],sr=["serviceForm"];function lr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",8),o["\u0275\u0275listener"]("ngModelChange",function(t){return o["\u0275\u0275restoreView"](e).$implicit.value=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;o["\u0275\u0275property"]("name",e.name)("ngModel",e.value)("required",!0)("label",o["\u0275\u0275pipeBind1"](1,7,e.label))("pattern",e.pattern)("isPassword","password"===e.type),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function cr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"button",9),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);const t=o["\u0275\u0275nextContext"]().$implicit,i=o["\u0275\u0275reference"](1);return o["\u0275\u0275nextContext"]().save(t,i)}),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275reference"](1),i=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled",i.isSaveButtonDisabled(t))("adaptInlineLoader",i.isSaveInProgress(e)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,3,"com.bmc.arsys.rx.client.common.save.label")," ")}}function dr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",3,4),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",5),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275template"](4,lr,2,9,"adapt-rx-textfield",6),o["\u0275\u0275template"](5,cr,3,5,"button",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](3,5,e.title))("isOpen",e.isOpen),o["\u0275\u0275attribute"]("rx-id",e.rxId),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.fields),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",i.isSaveButtonVisible())}}function pr(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",20),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("innerHtml",e.strings.availablePoolsTooltip,o["\u0275\u0275sanitizeHtml"])}}function ur(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",21),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.label)}}function mr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span"),o["\u0275\u0275element"](1,"i",22),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.label)}}const hr=function(e){return{"text-success":e}};function fr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",23),o["\u0275\u0275element"](1,"i",24),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("adaptTooltip",e.data.name)("popupDelay",1e3),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](4,hr,e.data.isEditable)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.label)}}const gr=function(e){return{"text-danger":e}};function vr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",23),o["\u0275\u0275element"](1,"i",25),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("adaptTooltip",e.data.name)("popupDelay",1e3),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](4,gr,e.data.isEditable)),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"]("",e.label," ")}}function xr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",23),o["\u0275\u0275element"](1,"i",26),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("adaptTooltip",e.data.name)("popupDelay",1e3),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.label)}}function yr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",23),o["\u0275\u0275element"](1,"i",27),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275property"]("adaptTooltip",e.data.name)("popupDelay",1e3),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.label)}}function br(e,t){if(1&e&&o["\u0275\u0275element"](0,"div",43),2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275property"]("innerHTML",e.strings.ruleSummaryTooltip,o["\u0275\u0275sanitizeHtml"])}}function Cr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",44),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](e.name)}}function Sr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"a",45),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]().ngIf,t=o["\u0275\u0275nextContext"](2);o["\u0275\u0275propertyInterpolate"]("href",t.ruleDesignerLink+e.name,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function wr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-button",46),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](3).openReassignPoolDialog()}),o["\u0275\u0275element"](1,"span",47),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"](3);o["\u0275\u0275styleProp"]("vertical-align","baseline"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.strings.reassignButtonLabel," ")}}function Ir(e,t){if(1&e&&o["\u0275\u0275element"](0,"i",25),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](1,gr,e.isEditable))}}function _r(e,t){if(1&e&&o["\u0275\u0275element"](0,"i",48),2&e){const e=o["\u0275\u0275nextContext"]().ngIf;o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](1,gr,e.isEditable))}}function Dr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h5",28),o["\u0275\u0275text"](2),o["\u0275\u0275element"](3,"adapt-icon",29),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](4,br,1,1,"ng-template",null,30,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementStart"](6,"div",31),o["\u0275\u0275element"](7,"adapt-rx-control-label",32),o["\u0275\u0275template"](8,Cr,2,1,"span",33),o["\u0275\u0275template"](9,Sr,2,2,"ng-template",null,34,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",31),o["\u0275\u0275element"](12,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](13,"span"),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"rxRuleTriggerTimeCriteriaDisplayValue"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",35),o["\u0275\u0275elementStart"](17,"div",36),o["\u0275\u0275element"](18,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](19,"span"),o["\u0275\u0275text"](20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",36),o["\u0275\u0275element"](22,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](23,"span"),o["\u0275\u0275text"](24),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",36),o["\u0275\u0275element"](26,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](27,"span"),o["\u0275\u0275text"](28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",35),o["\u0275\u0275elementStart"](30,"div",36),o["\u0275\u0275elementStart"](31,"div",37),o["\u0275\u0275elementStart"](32,"span",38),o["\u0275\u0275text"](33),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](34,wr,3,3,"adapt-button",39),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"span"),o["\u0275\u0275template"](36,Ir,1,3,"i",40),o["\u0275\u0275text"](37),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"div",36),o["\u0275\u0275element"](39,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](40,"span"),o["\u0275\u0275text"](41),o["\u0275\u0275pipe"](42,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"div",36),o["\u0275\u0275element"](44,"adapt-rx-control-label",32),o["\u0275\u0275elementStart"](45,"span"),o["\u0275\u0275text"](46),o["\u0275\u0275pipe"](47,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](48,"h5"),o["\u0275\u0275text"](49),o["\u0275\u0275template"](50,_r,1,3,"i",41),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](51,"adapt-table",42),o["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=o["\u0275\u0275reference"](5),n=o["\u0275\u0275reference"](10),r=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",r.strings.ruleSummaryTitle," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adaptPopover",i),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("label",r.strings.ruleNameLabel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!r.isRuleDesignerAvailable())("ngIfElse",n),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("label",r.strings.timerDefinitionLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,28,e.timeCriteria)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("label",r.strings.numberOfRunsLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.numberOfRuns),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",r.strings.averageLatencyLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.avgWaitTime),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",r.strings.averageExecutionTimeLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.avgExecutionTime),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](r.strings.assignedPoolLabel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",e.isEditable),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",r.isAssignedPoolOutOfRange()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.designTimePoolNumber," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",r.strings.lastStartDateLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](42,30,e.lastStartTime,"medium")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("label",r.strings.lastEndDateLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind2"](47,33,e.lastEndTime,"medium")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",r.strings.ruleConflictsTitle," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",r.ruleConflictsTableConfig.data.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("columns",r.ruleConflictsTableConfig.columns)("bordered",!0)("sortable",!0)("texts",r.ruleConflictsTableConfig.texts)("value",r.ruleConflictsTableConfig.data)}}function Rr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",49),o["\u0275\u0275element"](1,"adapt-empty-state",50),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("type","rules")("label",e.strings.selectedRuleEmptyStateLabel)}}function Ar(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",3),o["\u0275\u0275elementStart"](1,"div",4),o["\u0275\u0275elementStart"](2,"h5",5),o["\u0275\u0275text"](3),o["\u0275\u0275element"](4,"adapt-icon",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,pr,1,1,"ng-template",null,7,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275element"](7,"adapt-rx-checkbox",8),o["\u0275\u0275elementStart"](8,"div",9),o["\u0275\u0275elementStart"](9,"adapt-tree",10),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().selectedRule=t}),o["\u0275\u0275template"](10,ur,3,1,"ng-template",11),o["\u0275\u0275template"](11,mr,3,1,"ng-template",12),o["\u0275\u0275template"](12,fr,3,6,"ng-template",13),o["\u0275\u0275template"](13,vr,3,6,"ng-template",14),o["\u0275\u0275template"](14,xr,3,3,"ng-template",15),o["\u0275\u0275template"](15,yr,3,3,"ng-template",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",17),o["\u0275\u0275template"](17,Dr,52,36,"div",18),o["\u0275\u0275template"](18,Rr,2,2,"ng-template",null,19,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275reference"](6),t=o["\u0275\u0275reference"](19),i=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",i.strings.availablePoolsLabel," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("adaptPopover",e),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("label",i.strings.showOnlyRulesWithIssuesLabel)("formControl",i.showOnlyRulesWithIssuesFormControl),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("value",i.availablePoolsTree)("selection",i.selectedRule)("wrap",i.treeWrap),o["\u0275\u0275advance"](8),o["\u0275\u0275property"]("ngIf",null==i.selectedRule?null:i.selectedRule.data)("ngIfElse",t)}}function Tr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",51),o["\u0275\u0275element"](1,"adapt-empty-state",52),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("type","rules")("label",e.strings.rulePoolsEmptyStateLabel)}}function Fr(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.admin.server-logs.minimum-of-one-minute.label")," "))}function Er(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div"),o["\u0275\u0275elementStart"](1,"h6",2),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](4,"adapt-rx-checkbox",16),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275element"](6,"adapt-rx-checkbox",17),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.client.admin.server-logs.additional-log-types-to-be-captured.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,5,"com.bmc.arsys.rx.client.admin.server-logs.sql.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,7,"com.bmc.arsys.rx.client.admin.server-logs.api.label")))}function Mr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",6),o["\u0275\u0275elementStart"](1,"rx-connection-tester",7),o["\u0275\u0275listener"]("testConnection",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onTestConnection()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"button",8),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().save()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("status",e.connectionTestStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,3,"com.bmc.arsys.rx.client.common.save.label")," ")}}const Or=["viewSummarizationDetailsTemplate"];function kr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275elementStart"](2,"div",6),o["\u0275\u0275element"](3,"adapt-alert",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("config",e.disableContent)}}function jr(e,t){if(1&e&&o["\u0275\u0275element"](0,"rx-record-grid",31,32),2&e){const e=o["\u0275\u0275nextContext"](2);o["\u0275\u0275property"]("config",e.gridConfig)}}const Pr=function(e){return{iconName:"question_circle_o",content:e,placement:"left",popoverMode:!0}},Nr=function(e){return{title:"",content:e,type:"inline",variant:"info"}};function Vr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275elementStart"](1,"div",5),o["\u0275\u0275elementStart"](2,"adapt-accordion",8),o["\u0275\u0275elementStart"](3,"adapt-accordion-tab",9),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"form",10),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",11),o["\u0275\u0275element"](8,"adapt-rx-select",12),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",4),o["\u0275\u0275elementStart"](11,"div",11),o["\u0275\u0275element"](12,"adapt-rx-textarea",13),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementStart"](14,"div",14),o["\u0275\u0275elementStart"](15,"div",15),o["\u0275\u0275element"](16,"adapt-rx-counter",16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div"),o["\u0275\u0275elementStart"](20,"button",17),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().summarizeUsingText()}),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div"),o["\u0275\u0275elementStart"](24,"button",18),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().resetInteractiveSummarizationTestingForm()}),o["\u0275\u0275text"](25),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"div",11),o["\u0275\u0275element"](28,"adapt-rx-textarea",19),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementStart"](30,"button",20),o["\u0275\u0275text"](31),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"adapt-accordion-tab",21),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementStart"](35,"form",10),o["\u0275\u0275elementStart"](36,"div",4),o["\u0275\u0275elementStart"](37,"div",22),o["\u0275\u0275element"](38,"adapt-rx-control-label",23),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275element"](40,"rx-definition-picker",24),o["\u0275\u0275element"](41,"adapt-rx-select",25),o["\u0275\u0275pipe"](42,"translate"),o["\u0275\u0275pipe"](43,"translate"),o["\u0275\u0275element"](44,"adapt-rx-select",26),o["\u0275\u0275pipe"](45,"translate"),o["\u0275\u0275element"](46,"adapt-rx-select",12),o["\u0275\u0275pipe"](47,"translate"),o["\u0275\u0275elementStart"](48,"div",14),o["\u0275\u0275elementStart"](49,"div",15),o["\u0275\u0275element"](50,"adapt-rx-counter",16),o["\u0275\u0275pipe"](51,"translate"),o["\u0275\u0275pipe"](52,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"div"),o["\u0275\u0275elementStart"](54,"button",27),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().summarizeUsingRecordInstance()}),o["\u0275\u0275text"](55),o["\u0275\u0275pipe"](56,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](57,"div"),o["\u0275\u0275elementStart"](58,"button",18),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().resetRecordSummarizationTestingForm()}),o["\u0275\u0275text"](59),o["\u0275\u0275pipe"](60,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](61,"div",28),o["\u0275\u0275element"](62,"adapt-alert",29),o["\u0275\u0275pipe"](63,"translate"),o["\u0275\u0275pipe"](64,"translate"),o["\u0275\u0275template"](65,jr,2,1,"rx-record-grid",30),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](4,46,"com.bmc.arsys.rx.client.admin.summarization-testing.interactive-summarization.title"))("isOpen",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",e.interactiveSummarizationTestingForm),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,48,"com.bmc.arsys.rx.client.admin.summarization-testing.data-source.label")),o["\u0275\u0275property"]("options",e.dataSourceOptions),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,50,"com.bmc.arsys.rx.client.admin.summarization-testing.text-input.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](17,52,"com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.label")),o["\u0275\u0275property"]("formControl",e.interactiveSummarizationTestingForm.controls.summarizationPercentage)("min",1)("max",50)("tooltip",o["\u0275\u0275pureFunction1"](88,Yn,o["\u0275\u0275pipeBind1"](18,54,"com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("adaptInlineLoader",e.isSummarizationInProgress)("disabled",e.interactiveSummarizationTestingForm.pristine||e.interactiveSummarizationTestingForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](22,56,"com.bmc.arsys.rx.client.admin.summarization-testing.summarize.button.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](26,58,"com.bmc.arsys.rx.client.common.reset.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](29,60,"com.bmc.arsys.rx.client.admin.summarization-testing.summary-output.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("cdkCopyToClipboard",e.interactiveSummarizationTestingForm.get("extractedSummaryText").value)("disabled",!e.interactiveSummarizationTestingForm.get("extractedSummaryText").value),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](32,62,"com.bmc.arsys.rx.client.common.copy.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](34,64,"com.bmc.arsys.rx.client.admin.summarization-testing.record-summarization.title"))("isOpen",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",e.recordSummarizationTestingForm),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](39,66,"com.bmc.arsys.rx.client.admin.summarization-testing.summarization-options.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",e.recordDefinitionPickerOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](42,68,"com.bmc.arsys.rx.client.admin.summarization-testing.text-input-field.label")),o["\u0275\u0275property"]("options",e.textInputFieldOptions)("optionFormatter",e.optionFormatter)("tooltip",o["\u0275\u0275pureFunction1"](90,Pr,o["\u0275\u0275pipeBind1"](43,70,"com.bmc.arsys.rx.client.admin.summarization-testing.text-input-field.tooltip"))),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](45,72,"com.bmc.arsys.rx.client.admin.summarization-testing.summary-output-field.label")),o["\u0275\u0275property"]("options",e.summaryOutputFieldOptions)("optionFormatter",e.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](47,74,"com.bmc.arsys.rx.client.admin.summarization-testing.data-source.label")),o["\u0275\u0275property"]("options",e.dataSourceOptions),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](51,76,"com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.label")),o["\u0275\u0275property"]("formControl",e.recordSummarizationTestingForm.controls.summarizationPercentage)("min",1)("max",50)("tooltip",o["\u0275\u0275pureFunction1"](92,Yn,o["\u0275\u0275pipeBind1"](52,78,"com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",e.isSummarizeButtonDisabled())("adaptInlineLoader",e.isRecordSummarizationInProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](56,80,"com.bmc.arsys.rx.client.admin.summarization-testing.summarize.button.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](60,82,"com.bmc.arsys.rx.client.common.reset.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("adaptPopover",o["\u0275\u0275pipeBind1"](64,86,"com.bmc.arsys.rx.client.admin.summarization-testing.select-records-alert.tooltip")),o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](94,Nr,o["\u0275\u0275pipeBind1"](63,84,"com.bmc.arsys.rx.client.admin.summarization-testing.select-records-alert.message"))),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",e.shouldShowGrid)}}function Lr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",33),o["\u0275\u0275elementStart"](1,"div",34),o["\u0275\u0275elementStart"](2,"div",35),o["\u0275\u0275elementStart"](3,"button",36),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().previous()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"button",37),o["\u0275\u0275listener"]("click",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().next()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",38),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",39),o["\u0275\u0275elementStart"](12,"div",4),o["\u0275\u0275elementStart"](13,"div",40),o["\u0275\u0275element"](14,"adapt-rx-control-label",41),o["\u0275\u0275elementStart"](15,"div",42),o["\u0275\u0275text"](16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",4),o["\u0275\u0275elementStart"](18,"div",40),o["\u0275\u0275element"](19,"adapt-rx-control-label",41),o["\u0275\u0275elementStart"](20,"div",43),o["\u0275\u0275text"](21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",44),o["\u0275\u0275elementStart"](23,"button",45),o["\u0275\u0275listener"]("click",function(){return(0,o["\u0275\u0275restoreView"](e).close)()}),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!e.index),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,11,"com.bmc.arsys.rx.client.common.previous-step.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.index===e.recordGridComponent.api.getSelectedRows().length-1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,13,"com.bmc.arsys.rx.client.common.next-step.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate2"](" Summarization ",e.index+1," of ",e.recordGridComponent.api.getSelectedRows().length," "),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label","Text input: "+e.recordSummarizationTestingForm.get("textInputField").value[0].name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.summarizedRecords.data[e.index][e.recordSummarizationTestingForm.get("textInputField").value[0].id]," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label","Summary output: "+e.recordSummarizationTestingForm.get("summaryOutputField").value[0].name),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.summarizedRecords.data[e.index][e.recordSummarizationTestingForm.get("summaryOutputField").value[0].id]," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](25,15,"com.bmc.arsys.rx.client.common.close.label")," ")}}const Br=["documentToneAnalysisForm"];function $r(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",27),o["\u0275\u0275text"](1),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.none.label")," "))}function Gr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",28),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.toneName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" (",e.score,") ")}}function zr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",28),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.toneName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" (",e.score,")")}}function Ur(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",29),o["\u0275\u0275elementStart"](1,"div",30),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div"),o["\u0275\u0275template"](4,zr,4,2,"adapt-badge",31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.text),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",null==e?null:e.scores)}}const qr=["userEngagementToneAnalysisForm"];function Xr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"adapt-badge",22),o["\u0275\u0275elementStart"](1,"b"),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.toneName),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" (",e.score,")")}}function Hr(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",19),o["\u0275\u0275elementStart"](1,"div",20),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div"),o["\u0275\u0275template"](4,Xr,4,2,"adapt-badge",21),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](e.text),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",null==e?null:e.scores)}}const Wr=["configurationForm"];function Yr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-select",11),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().selectionChange.emit({selection:t,fieldName:i.name})}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("name",e.name)("label",o["\u0275\u0275pipeBind1"](1,7,e.label))("options",e.selectOptions)("optionFormatter",t.optionFormatter)("ngModel",t.stepDetails[e.name])("required",e.required)("disabled",e.disabled)}}function Qr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",12),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("name",e.name)("ngModel",t.stepDetails[e.name])("required",e.required)("label",o["\u0275\u0275pipeBind1"](1,8,e.label))("isPassword","password"===e.type)("placeholder",e.placeholder)("rxCustomValidators",t.validate(e)),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Kr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-counter",13),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("name",e.name)("ngModel",t.stepDetails[e.name])("required",e.required)("label",o["\u0275\u0275pipeBind1"](1,8,e.label))("adaptMin",e.minValue)("adaptMax",e.maxValue)("placeholder",e.placeholder),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Jr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-counter",14),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("name",e.name)("ngModel",t.stepDetails[e.name])("required",e.required)("label",o["\u0275\u0275pipeBind1"](1,8,e.label))("adaptMin",e.minValue)("adaptMax",e.maxValue)("placeholder",e.placeholder),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function Zr(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"rx-name-value-pairs-editor",15),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275propertyInterpolate"]("addButtonLabel",o["\u0275\u0275pipeBind1"](1,3,e.label)),o["\u0275\u0275property"]("ngModel",t.stepDetails[e.name])("name",e.name)}}function ea(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-radiobutton",18),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("value",e.value)("label",n.getSelectionValue(e,i))}}function ta(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",16),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,ea,1,2,"adapt-rx-radiobutton",17),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngModel",t.stepDetails[e.name])("name",e.name)("label",o["\u0275\u0275pipeBind1"](1,4,e.label)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",e.selectOptions)}}function ia(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-radiobutton",18),2&e){const e=t.$implicit,i=o["\u0275\u0275nextContext"](2).$implicit,n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("value",e.value)("label",n.getSelectionValue(e,i))}}const na=function(e){return{iconName:"question_circle_o",content:e,placement:"auto",popoverMode:!0}};function oa(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",19),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"](2).authEndpoint=t})("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().onRadioButtonChange(t,i)}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275template"](3,ia,1,2,"adapt-rx-radiobutton",17),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngModel",t.authEndpoint)("name",e.name)("label",o["\u0275\u0275pipeBind1"](1,5,e.label))("tooltip",o["\u0275\u0275pureFunction1"](9,na,o["\u0275\u0275pipeBind1"](2,7,e.tooltip))),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",e.selectOptions)}}function ra(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"adapt-rx-textfield",20),o["\u0275\u0275listener"]("ngModelChange",function(t){o["\u0275\u0275restoreView"](e);const i=o["\u0275\u0275nextContext"]().$implicit;return o["\u0275\u0275nextContext"]().stepDetails[i.name]=t}),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]().$implicit,t=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("disabled","Custom"!=t.authEndpoint)("ngModel",t.stepDetails[e.name])("placeholder",o["\u0275\u0275pipeBind1"](1,5,e.placeholder))("required",e.required),o["\u0275\u0275attribute"]("rx-id",e.rxId)}}function aa(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275template"](1,Yr,2,9,"adapt-rx-select",3),o["\u0275\u0275template"](2,Qr,2,10,"adapt-rx-textfield",4),o["\u0275\u0275template"](3,Kr,2,10,"adapt-rx-counter",5),o["\u0275\u0275template"](4,Jr,2,10,"adapt-rx-counter",6),o["\u0275\u0275template"](5,Zr,2,5,"rx-name-value-pairs-editor",7),o["\u0275\u0275template"](6,ta,3,6,"adapt-rx-radiobutton-group",8),o["\u0275\u0275template"](7,oa,4,11,"adapt-rx-radiobutton-group",9),o["\u0275\u0275template"](8,ra,2,7,"adapt-rx-textfield",10),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","select"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","text"===e.type||"password"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","number"===e.type&&e.allowIntegerOnly),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","number"===e.type&&e.allowScientific),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","nameValuePairs"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","radio"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","serverEndpointRadio"===e.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","serverEndpointRadio"===e.type)}}function sa(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"rx-web-api-connection-wizard-step-fields",1),o["\u0275\u0275listener"]("formStatusChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFormStatusChange()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("step",e.wizardSteps[1])("stepDetails",e.webApiConnection.authTypeDetails)("webApiConnection",e.webApiConnection)}}function la(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"rx-web-api-connection-wizard-step-fields",1),o["\u0275\u0275listener"]("selectionChange",function(t){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onSelectionChange(t)})("formStatusChange",function(){o["\u0275\u0275restoreView"](e);return o["\u0275\u0275nextContext"]().onFormStatusChange()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("step",e.wizardSteps[0])("stepDetails",e.webApiConnection)("webApiConnection",e.webApiConnection)}}const ca=["webApiConnectionsRecordGrid"],da=["portCellTemplate"];function pa(e,t){if(1&e&&o["\u0275\u0275text"](0),2&e){const e=t.dataItem,i=t.column;o["\u0275\u0275textInterpolate1"](" ",e[i.field]," ")}}function ua(e,t){if(1&e&&o["\u0275\u0275element"](0,"adapt-rx-textfield",13),2&e){const e=t.$implicit;o["\u0275\u0275propertyInterpolate"]("label",e.name),o["\u0275\u0275propertyInterpolate"]("formControlName",e.name),o["\u0275\u0275property"]("isPassword",e.secure)}}function ma(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",14),o["\u0275\u0275text"](1),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",e.callbackUrl," ")}}const ha=function(e){return{content:e,type:"inline",variant:"info"}};function fa(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",15),o["\u0275\u0275pipe"](1,"translate")),2&e&&o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](3,ha,o["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.url-alert.message")))}const ga=["tagsTemplate"];function va(e,t){if(1&e&&(o["\u0275\u0275elementContainerStart"](0),o["\u0275\u0275elementStart"](1,"adapt-tag",7),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"truncate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("type","active")("removable",!1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](3,3,e,10)," ")}}function xa(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",5),o["\u0275\u0275template"](1,va,4,6,"ng-container",6),o["\u0275\u0275elementEnd"]()),2&e){const e=t.dataItem;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",e.tags)}}const ya={defaultImages:{"rx-theme-favicon-logo":{name:"favicon.ico",type:"image/x-icon"},"rx-theme-large-logo-light":{name:"company.svg",type:"image/svg+xml"},"rx-theme-large-logo-dark":{name:"company-dark.svg",type:"image/svg+xml"},"rx-theme-small-logo-light":{name:"company.svg",type:"image/svg+xml"},"rx-theme-small-logo-dark":{name:"company-dark.svg",type:"image/svg+xml"}},settingResourceTypes:{character:x.RX_RECORD_DEFINITION.resourceTypes.character,selection:x.RX_RECORD_DEFINITION.resourceTypes.selection,integer:x.RX_RECORD_DEFINITION.resourceTypes.integer,decimal:x.RX_RECORD_DEFINITION.resourceTypes.decimal,boolean:x.RX_RECORD_DEFINITION.resourceTypes.boolean,dateOnly:x.RX_RECORD_DEFINITION.resourceTypes.dateOnly,color:"com.bmc.arsys.rx.admin-settings.ColorChooserFieldDefinition",attachment:"com.bmc.arsys.rx.admin-settings.AttachmentFieldDefinition",secure:"com.bmc.arsys.rx.admin-settings.SecureDataFieldDefinition"}};class ba{constructor(e,t,i,n,o){this.rxAdminSettingsService=e,this.translateService=t,this.rxNotificationService=i,this.rxModalService=n,this.rxNumberUtilsService=o}openSettingsDetails({title:e,componentName:t,groups:i,ownerKeyValue:n,isChildSetting:o,childOwnerKeyValue:r,onDialogApiReady:a}){const s=o?!(n&&r):!n;return this.rxModalService.openDockedPanel({content:wa,size:"lg",title:e,data:{config:{componentName:t,groups:i,ownerKeyValue:n,isNew:s,isChildSetting:o,childOwnerKeyValue:r},onApiReady:e=>{null==a||a(e)}}})}createPropertyConfig(e){const t={name:e.id,isDisabled:!e.changePermission,dataType:e.dataType,options:{label:e.label,required:e.required},validators:[]};switch(e.required&&t.validators.push(r.Validators.required),e.defaultValue?t.defaultValue=e.defaultValue:t.defaultValue=null,e.dataType){case ya.settingResourceTypes.selection:t.component=s.SelectFormControlComponent,t.options=Object.assign(Object.assign({},t.options),{options:(0,m.map)(e.optionNamesById,(e,t)=>({id:t,name:e})),emptyOption:!e.required});break;case ya.settingResourceTypes.secure:case ya.settingResourceTypes.character:t.component=s.TextFormControlComponent,t.options.isPassword=e.dataType===ya.settingResourceTypes.secure,e.maxValue&&(t.options.maxLength=Number(e.maxValue),t.validators.push(r.Validators.maxLength(t.options.maxLength))),e.minValue&&(t.options.minLength=Number(e.minValue),t.validators.push(r.Validators.minLength(t.options.minLength)));break;case ya.settingResourceTypes.boolean:t.component=s.BooleanFormControlComponent,t.options.label="",t.options.description=e.label,t.options.shouldDisplayAsCheckbox=t.options.required,t.defaultValue?t.defaultValue="true"===t.defaultValue:t.options.required&&(t.defaultValue=!1);break;case ya.settingResourceTypes.color:t.component=s.ColorPickerFormControlComponent,t.defaultValue=t.defaultValue||null;break;case ya.settingResourceTypes.decimal:case ya.settingResourceTypes.integer:t.component=s.CounterFormControlComponent,t.options.allowIntegerOnly=e.dataType===ya.settingResourceTypes.integer,e.maxValue&&(t.options.maxValue=Number(e.maxValue),t.validators.push(r.Validators.max(Number(e.maxValue)))),e.minValue&&(t.options.minValue=Number(e.minValue),t.validators.push(r.Validators.min(Number(e.minValue)))),this.rxNumberUtilsService.isFiniteNumberString(e.defaultValue)&&(t.defaultValue=Number(e.defaultValue));break;case ya.settingResourceTypes.dateOnly:t.component=s.DateFormControlComponent;break;case ya.settingResourceTypes.attachment:t.component=s.AttachmentFormControlComponent,t.options.maxFileSize=e.maxValue;break;default:t.component=s.TextFormControlComponent}return t}getRecordGridConfig({componentName:e,controls:t,getCurrentGridFn:i,createPermission:n,groups:o,bladeTitle:r,ownerKeyValue:a,groupName:s,onDialogApiReady:c}){const p=a?`${s}/${a}`:e,u=t.map(e=>{const t={id:e.id,resourceType:e.dataType};return e.dataType===ya.settingResourceTypes.selection&&e.optionNamesById&&e.optionLabelsById&&(t.optionNamesById=e.optionNamesById,t.optionLabelsById=e.optionLabelsById),t}),f=u.reduce((e,t)=>(e[t.id]=(0,m.cloneDeep)(t),e),{}),g={fieldDefinitions:u,fieldDefinitionsById:f},x=t.map((e,t)=>({index:t,title:e.label,fieldId:e.id,visible:e.keySetting,sortable:!0,filterable:!1,alignment:d.RecordGridColumnAlignment.Left})),y=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.edit.label"),style:"tertiary",iconCls:"pencil",actions:[{name:()=>{const t=i(s),l=t.api.getFirstSelectedRow();if(n){const i=a||l.ownerKeyValue1,n=a?l.ownerKeyValue1:null;this.openSettingsDetails({title:r||s,componentName:e,groups:o,ownerKeyValue:i,isChildSetting:Boolean(s),childOwnerKeyValue:n,onDialogApiReady:c}).then(()=>{t.api.refresh().subscribe()}).catch(m.noop)}}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{const t=i(s),o=t.api.getFirstSelectedRow();n&&this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.admin-settings.delete-confirmation.message")}).then(i=>{i&&this.rxAdminSettingsService.deleteComponentSettings(`${s||e}/${o.ownerKeyValue1}`).pipe((0,v.switchMap)(()=>t.api.refresh())).subscribe()})}}]}];return(0,h.of)({actionButtons:n?y:[],enableRowSelection:d.RowSelectionMode.Single,getRecordDefinition:()=>(0,h.of)(g),getData:()=>this.rxAdminSettingsService.getComponentGridData(p).pipe((0,v.map)(e=>({data:e.rows,totalSize:e.rows.length}))),columns:x,enableFiltering:!1,useExternalFiltering:!1,recordIdField:"ownerKeyValue1"})}}ba.\u0275fac=function(e){return new(e||ba)(o["\u0275\u0275inject"](f.RxAdminSettingsService),o["\u0275\u0275inject"](u.TranslateService),o["\u0275\u0275inject"](f.RxNotificationService),o["\u0275\u0275inject"](l.RxModalService),o["\u0275\u0275inject"](g.RxNumberUtilsService))},ba.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ba,factory:ba.\u0275fac});class Ca{convertBase64ToFile(e,t,i){if(e){const n=(0,m.map)(atob(e),e=>e.charCodeAt(0)),o=new Uint8Array(n);return new File([o],t,{type:i})}return null}convertFileToBase64(e){return new h.Observable(t=>{const i=new FileReader;i.onloadend=()=>{const e=(0,m.last)(i.result.split(","));t.next(e),t.complete()},i.onerror=()=>{t.next(null)},i.readAsDataURL(e)})}}Ca.\u0275fac=function(e){return new(e||Ca)},Ca.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ca,factory:Ca.\u0275fac,providedIn:"root"});class Sa{constructor(e,t,i,n,r,a){this.rxAdminSettingsService=e,this.rxAdminFileUtilityService=t,this.rxNotificationService=i,this.rxModalService=n,this.translateService=r,this.ownerKeyValue="",this.closeEditor=new o.EventEmitter,this.busy=new o.EventEmitter,this.save=new o.EventEmitter,this.isInDockedPanel=!1,this.isInDockedPanel=!!a,this.class=this.isInDockedPanel?"dp-content":""}ngOnInit(){let e;if(this.isSettingsActionsAvailable=this.isChildSetting||(0,m.some)(this.groups,e=>!e.supportsMultiple),this.isChildSetting)this.groups=(0,m.cloneDeep)(this.groups),this.isNew?this.setGroupSettingValues(this.groups[0],[]):(this.busy.emit(!0),e=this.rxAdminSettingsService.getComponentSettings(`${this.groups[0].name}/${this.childOwnerKeyValue}`).pipe((0,v.tap)(e=>{this.groups[0].settings=e.values,this.setGroupSettingValues(this.groups[0],this.groups[0].settings)})));else if(this.isNew)(0,m.forEach)(this.groups,e=>{e.supportsMultiple||e.isComponent||this.setGroupSettingValues(e,[])});else{const t=this.ownerKeyValue?`${this.componentName}/${this.ownerKeyValue}`:this.componentName;this.busy.emit(!0),e=this.rxAdminSettingsService.getComponentSettings(t).pipe((0,v.tap)(e=>{this.ownerKeyValue=e.values.length?(0,m.last)(e.values).ownerKeyValue1:"",this.generalSettings=e.values,this.isNew=!Boolean(e.values.length),!this.assigneeGroup&&e.values.length&&(this.assigneeGroup=(0,m.last)(e.values).assigneeGroupPermission),(0,m.forEach)(this.groups,e=>{e.supportsMultiple||e.isComponent||this.setGroupSettingValues(e,this.generalSettings)})}),(0,v.switchMap)(()=>{const e=[];return!this.isNew&&this.ownerKeyValue&&(0,m.forEach)(this.groups,t=>{e.push(this.setChildSettings(t))}),(0,h.forkJoin)(e)}))}null==e||e.pipe((0,v.defaultIfEmpty)(null),(0,v.tap)(()=>this.busy.emit(!1)),(0,v.catchError)(e=>(this.busy.emit(!1),(0,h.throwError)(e)))).subscribe()}addNewSetting(e){const t=this.getCurrentGrid(e.name);return this.openSettingsDetails({title:e.name,componentName:this.componentName,groups:[e],ownerKeyValue:this.ownerKeyValue,isChildSetting:!0,onDialogApiReady:e=>this.dialogApi=e}).then(()=>{this.dialogApi=null,t.api.refresh().subscribe()}).catch(()=>{this.dialogApi=null,t.api.refresh().subscribe()})}getCurrentGrid(e){const t=(0,m.filter)(this.groups,"supportsMultiple"),i=(0,m.findIndex)(t,{name:e});return this.recordGridInstances.toArray()[i]}setChildSettings(e){if(e.isComponent){if(!e.supportsMultiple)return this.rxAdminSettingsService.getComponentSettings(`${this.componentName}/${e.name}/${this.ownerKeyValue}`).pipe((0,v.tap)(t=>{e.settings=t.values,this.setGroupSettingValues(e,e.settings)}));e.recordGridConfig=this.getRecordGridConfig({componentName:this.componentName,controls:e.controls,getCurrentGridFn:this.getCurrentGrid.bind(this),createPermission:this.createPermission,groups:[e],bladeTitle:e.name,ownerKeyValue:this.ownerKeyValue,groupName:e.name,onDialogApiReady:e=>this.dialogApi=e})}return(0,h.of)(!0)}onModelChange(e,t){t.settingValues=Object.assign(Object.assign({},t.settingValues),e)}setGroupSettingValues(e,t){const i={};(0,m.forEach)(e.propertyConfigs,e=>{const n=(0,m.find)(t,{settingName:e.name});if(n)if(n.settingValue)switch(e.dataType){case ya.settingResourceTypes.attachment:i[n.settingName]=[this.rxAdminFileUtilityService.convertBase64ToFile(n.settingValue,n.fileName,n.fileType)];break;case ya.settingResourceTypes.boolean:i[n.settingName]="true"===n.settingValue;break;case ya.settingResourceTypes.decimal:case ya.settingResourceTypes.integer:i[n.settingName]=Number(n.settingValue);break;default:i[n.settingName]=n.settingValue}else i[n.settingName]=null;else i[e.name]=e.defaultValue}),e.settingValues=Object.assign({},i)}getSettingWithValue(e,t){if(Array.isArray(t)){const i=t[0];return this.rxAdminFileUtilityService.convertFileToBase64(i).pipe((0,v.map)(t=>(e.fileName=i.name,e.fileType=i.type,e.settingValue=t,e)))}return e.settingValue=t,(0,h.of)(e)}saveSettings(){const e=[];if(this.isChildSetting){const t=this.groups[0];let i=[];t.settings&&t.settings.length?(i=i.concat((0,m.map)(t.settingValues,(e,i)=>{const n=(0,m.find)(t.propertyConfigs,{name:i});if(n&&!n.isDisabled){const n=(0,m.find)(t.settings,{settingName:i});return n.assigneeGroupPermission=this.assigneeGroup,this.getSettingWithValue(n,e)}return null})),i.length&&e.push((0,h.forkJoin)(i).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.updateComponentSettings(`${t.name}/${this.childOwnerKeyValue}`,e))))):(i=i.concat((0,m.map)(t.settingValues,(e,i)=>{const n=(0,m.find)(t.propertyConfigs,{name:i});if((0,m.isNull)(e)||!n||n.isDisabled)return null;{const n={componentName:t.name,parentComponentName:this.componentName,ownerKeyValue2:this.ownerKeyValue,settingName:i,assigneeGroupPermission:this.assigneeGroup};return this.getSettingWithValue(n,e)}}).filter(Boolean)),i.length&&e.push((0,h.forkJoin)(i).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.createComponentSettings(`${t.name}/${this.ownerKeyValue}`,e)))))}else if(this.isNew&&this.createPermission){const t=this.groups.filter(e=>!e.isComponent);let i=[];(0,m.forEach)(t,e=>{i=i.concat((0,m.map)(e.settingValues,(t,i)=>{const n=(0,m.find)(e.propertyConfigs,{name:i});if((0,m.isNull)(t)||!n||n.isDisabled)return null;{const e={componentName:this.componentName,settingName:i,assigneeGroupPermission:this.assigneeGroup};return this.getSettingWithValue(e,t)}}).filter(Boolean))}),i.length&&e.push((0,h.forkJoin)(i).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.createComponentSettings(this.componentName,e)),(0,v.switchMap)(e=>{const t=[];return this.ownerKeyValue=e,(0,m.forEach)(this.groups,e=>{t.push(this.setChildSettings(e))}),t.push(this.rxAdminSettingsService.getComponentSettings(`${this.componentName}/${e}`).pipe((0,v.tap)(e=>{this.generalSettings=e.values}))),(0,h.forkJoin)(t).pipe((0,v.tap)(()=>{this.isNew=!1}))})))}else{const t=this.groups.filter(e=>!e.isComponent),i=this.groups.filter(e=>e.isComponent);let n=[];(0,m.forEach)(t,e=>{n=n.concat((0,m.map)(e.settingValues,(t,i)=>{const n=(0,m.find)(e.propertyConfigs,{name:i});if(n&&!n.isDisabled){const e=(0,m.find)(this.generalSettings,{settingName:i});return e.assigneeGroupPermission=this.assigneeGroup,this.getSettingWithValue(e,t)}return null}).filter(Boolean))}),n.length&&e.push((0,h.forkJoin)(n).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.updateComponentSettings(`${this.componentName}/${this.ownerKeyValue}`,e))));let o=[];(0,m.forEach)(i,t=>{t.supportsMultiple||(t.settings&&t.settings.length?(o=o.concat((0,m.map)(t.settingValues,(e,i)=>{const n=(0,m.find)(t.propertyConfigs,{name:i});if(n&&!n.isDisabled){const n=(0,m.find)(t.settings,{settingName:i});return n.assigneeGroupPermission=this.assigneeGroup,this.getSettingWithValue(n,e)}return null}).filter(Boolean)),e.push((0,h.forkJoin)(o).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.updateComponentSettings(`${t.name}/${(0,m.last)(t.settings).ownerKeyValue1}`,e))))):(o=o.concat((0,m.map)(t.settingValues,(e,i)=>{const n=(0,m.find)(t.propertyConfigs,{name:i});if((0,m.isNull)(e)||!n||n.isDisabled)return null;{const n={componentName:t.name,parentComponentName:this.componentName,settingName:i,ownerKeyValue2:this.ownerKeyValue,assigneeGroupPermission:this.assigneeGroup};return this.getSettingWithValue(n,e)}}).filter(Boolean)),o.length&&e.push((0,h.forkJoin)(o).pipe((0,v.switchMap)(e=>this.rxAdminSettingsService.createComponentSettings(`${t.name}/${this.ownerKeyValue}`,e)),(0,v.switchMap)(()=>this.setChildSettings(t))))))})}e.length&&(this.busy.emit(!0),(0,h.forkJoin)(e).pipe((0,v.catchError)(e=>(this.busy.emit(!1),(0,h.throwError)(e)))).subscribe(()=>{this.rxNotificationService.addSuccessMessage("Settings saved successfully."),this.forms.forEach(e=>e.formGroup.markAsPristine()),this.busy.emit(!1),this.save.emit()}))}isAbleToSave(){return this.forms&&(0,m.every)(this.forms.toArray(),e=>e.formGroup.valid)&&this.forms.some(e=>e.formGroup.dirty)}resetSettings(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.reset-confirmation.message")}).then(e=>{e&&((0,m.chain)(this.groups).reject(e=>(0,m.isEmpty)(e.settingValues)).forEach(e=>{const t=(0,m.cloneDeep)(e.settingValues);(0,m.forEach)(e.propertyConfigs,e=>{e.dataType===ya.settingResourceTypes.attachment?t[e.name]=e.defaultValue?[this.rxAdminFileUtilityService.convertBase64ToFile(e.defaultValue,ya.defaultImages[e.name].name,ya.defaultImages[e.name].type)]:null:t[e.name]=e.defaultValue}),e.settingValues=t}).value(),this.forms.forEach(e=>e.formGroup.markAsDirty()))})}onCancel(){this.closeEditor.emit()}canClose(){var e,t;return!((null===(e=this.dialogApi)||void 0===e?void 0:e.isDirty())||(null===(t=this.forms)||void 0===t?void 0:t.some(e=>e.formGroup.dirty)))}}Sa.\u0275fac=function(e){return new(e||Sa)(o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](Ca),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](a.AdaptDockedPanelComponent,8))},Sa.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Sa,selectors:[["rx-admin-common-settings-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](d.RecordGridComponent,5),o["\u0275\u0275viewQuery"](s.FormBuilderComponent,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGridInstances=e),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.forms=e)}},hostVars:2,hostBindings:function(e,t){2&e&&o["\u0275\u0275classMap"](t.class)},inputs:{componentName:"componentName",ownerKeyValue:"ownerKeyValue",groups:"groups",createPermission:"createPermission",isNew:"isNew",isChildSetting:"isChildSetting",childOwnerKeyValue:"childOwnerKeyValue",getRecordGridConfig:"getRecordGridConfig",openSettingsDetails:"openSettingsDetails"},outputs:{closeEditor:"closeEditor",busy:"busy",save:"save"},decls:6,vars:12,consts:[[3,"multiselect"],[3,"isOpen","title","disabled",4,"ngFor","ngForOf"],[1,"pt-3",3,"ngClass"],["adapt-button","","class","mr-2","btn-type","primary","type","button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button",3,"click",4,"ngIf"],["adapt-button","","class","ml-2","btn-type","secondary","type","button",3,"click",4,"ngIf"],[3,"isOpen","title","disabled"],["class","property-controls",4,"ngIf"],[4,"ngIf"],[1,"property-controls"],[3,"config","model","modelChange",4,"ngIf"],[3,"config","model","modelChange"],["adapt-button","","type","button","class","px-0","btn-type","tertiary",3,"click",4,"ngIf"],[3,"config"],["adapt-button","","type","button","btn-type","tertiary",1,"px-0",3,"click"],[1,"d-icon-plus_circle"],["adapt-button","","btn-type","primary","type","button",1,"mr-2",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button",3,"click"],["adapt-button","","btn-type","secondary","type","button",1,"ml-2",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"adapt-accordion",0),o["\u0275\u0275template"](1,L,3,5,"adapt-accordion-tab",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275template"](3,B,3,4,"button",3),o["\u0275\u0275template"](4,$,3,3,"button",4),o["\u0275\u0275template"](5,G,3,3,"button",5),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275classProp"]("dp-body",t.isInDockedPanel),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.groups),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction3"](8,z,!t.isInDockedPanel,t.isInDockedPanel,t.isInDockedPanel)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSettingsActionsAvailable&&t.createPermission),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSettingsActionsAvailable&&t.createPermission),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isInDockedPanel))},directives:[a.AdaptAccordionComponent,n.NgForOf,n.NgClass,n.NgIf,a.AdaptAccordionTabComponent,s.FormBuilderComponent,d.RecordGridComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[".property-controls[_ngcontent-%COMP%]{max-width:400px}"]});class wa extends l.RxModalClass{constructor(e,t,i){super(e,t),this.context=e,this.injector=t,this.rxAdminCommonSettingsService=i,this.busySubscription=null,this.getRecordGridConfig=this.getRecordGridConfig.bind(this),this.openSettingsDetails=this.openSettingsDetails.bind(this)}ngOnInit(){super.ngOnInit();const e=this.context.getData();this.groups=(0,m.cloneDeep)(e.config.groups),this.isNew=e.config.isNew,this.ownerKeyValue=e.config.ownerKeyValue,this.childOwnerKeyValue=e.config.childOwnerKeyValue,this.componentName=e.config.componentName,this.isChildSetting=e.config.isChildSetting}isDirty(){return!!this.adminCommonSettingsEditorComponent&&!this.adminCommonSettingsEditorComponent.canClose()}onCloseEditor(){this.context.dismiss(a.DismissReasons.CLOSE_BTN)}onBusy(e){var t;e?this.busySubscription=h.NEVER.subscribe():null===(t=this.busySubscription)||void 0===t||t.unsubscribe()}getRecordGridConfig(e){return this.rxAdminCommonSettingsService.getRecordGridConfig(e)}openSettingsDetails(e){return this.rxAdminCommonSettingsService.openSettingsDetails(e)}onSave(){this.context.close(null)}}wa.\u0275fac=function(e){return new(e||wa)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](ba))},wa.\u0275cmp=o["\u0275\u0275defineComponent"]({type:wa,selectors:[["rx-admin-common-settings-blade"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](U,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.adminCommonSettingsEditorComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:10,consts:[[3,"busy"],[3,"componentName","isNew","groups","isChildSetting","ownerKeyValue","childOwnerKeyValue","createPermission","getRecordGridConfig","openSettingsDetails","closeEditor","busy","save"],["editor",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275elementStart"](1,"rx-admin-common-settings-editor",1,2),o["\u0275\u0275listener"]("closeEditor",function(){return t.onCloseEditor()})("busy",function(e){return t.onBusy(e)})("save",function(){return t.onSave()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("busy",t.busySubscription),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("componentName",t.componentName)("isNew",t.isNew)("groups",t.groups)("isChildSetting",t.isChildSetting)("ownerKeyValue",t.ownerKeyValue)("childOwnerKeyValue",t.childOwnerKeyValue)("createPermission",!0)("getRecordGridConfig",t.getRecordGridConfig)("openSettingsDetails",t.openSettingsDetails))},directives:[s.AdminSettingsComponent,Sa],styles:["rx-admin-settings[_ngcontent-%COMP%]{padding:0!important}"]});class Ia{constructor(e,t,i){this.rxModalService=e,this.rxAdminSettingsService=t,this.rxAdminCommonSettingsService=i,this.destroyed$=new h.ReplaySubject(1),this.getRecordGridConfig=this.getRecordGridConfig.bind(this),this.openSettingsDetails=this.openSettingsDetails.bind(this)}ngOnInit(){let e;this.componentName$.pipe((0,v.filter)(Boolean),(0,v.tap)(t=>{e=new h.Subject,this.componentName=t,this.state=null,this.busySubscription=e.pipe((0,v.take)(1)).subscribe()}),(0,v.switchMap)(e=>this.rxAdminSettingsService.getComponentDefinition(e)),(0,v.tap)(e=>{this.navigationMenuLabel=e.header}),(0,v.switchMap)(e=>{const t={headerLabel:e.header,createPermission:e.createPermission,componentName:e.compName,supportsMultiple:!1,commonSettingGroups:[]},i=[];return(0,m.forEach)(e.groups,e=>{const t=[],n={name:e.name,supportsMultiple:e.supportsMultiple,isComponent:e.component,settings:[]};n.isComponent?t.push(this.rxAdminSettingsService.getComponentDefinition(e.name).pipe((0,v.map)(e=>{const t=e.groups[0];return n.supportsMultiple&&(n.controls=t.controls),t.controls.map(e=>this.rxAdminCommonSettingsService.createPropertyConfig(e))}))):(0,m.forEach)(e.controls,e=>{t.push((0,h.of)(this.rxAdminCommonSettingsService.createPropertyConfig(e)))}),i.push((0,h.forkJoin)(t).pipe((0,v.map)(e=>(n.propertyConfigs=(0,m.flatten)(e),n))))}),i.length?(0,h.forkJoin)(i).pipe((0,v.map)(i=>{if(t.commonSettingGroups=i,e.supportsMultiple){t.supportsMultiple=!0;const i=(0,m.flatten)(e.groups.filter(e=>!e.component).map(e=>e.controls));t.recordGridConfig=this.rxAdminCommonSettingsService.getRecordGridConfig({componentName:t.componentName,controls:i,getCurrentGridFn:this.getCurrentGrid.bind(this),createPermission:t.createPermission,groups:t.commonSettingGroups,bladeTitle:t.headerLabel,ownerKeyValue:null,groupName:null,onDialogApiReady:e=>this.dialogApi=e}).pipe((0,v.map)(e=>Object.assign(Object.assign({},e),{styles:"h-auto flex-fill mw-100"})))}return t})):(0,h.of)(null)}),(0,v.takeUntil)(this.destroyed$)).subscribe(t=>{this.state=t,e.next()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}addNewSetting(){this.rxAdminCommonSettingsService.openSettingsDetails({title:this.state.headerLabel,componentName:this.componentName,groups:this.state.commonSettingGroups,onDialogApiReady:e=>this.dialogApi=e}).then(()=>{this.dialogApi=null,this.recordGridComponent.api.refresh().subscribe()}).catch(()=>{this.dialogApi=null})}onBusy(e){var t;e?this.busySubscription=h.NEVER.subscribe():null===(t=this.busySubscription)||void 0===t||t.unsubscribe()}getRecordGridConfig(e){return this.rxAdminCommonSettingsService.getRecordGridConfig(e)}openSettingsDetails(e){return this.rxAdminCommonSettingsService.openSettingsDetails(e)}getCurrentGrid(){return this.recordGridComponent}canClose(){var e,t,i;return Boolean(null!==(t=null===(e=this.adminCommonSettingsEditorComponent)||void 0===e?void 0:e.canClose())&&void 0!==t?t:!(null===(i=this.dialogApi)||void 0===i?void 0:i.isDirty()))}}Ia.\u0275fac=function(e){return new(e||Ia)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](ba))},Ia.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ia,selectors:[["rx-admin-common-settings"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](d.RecordGridComponent,5),o["\u0275\u0275viewQuery"](Sa,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGridComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.adminCommonSettingsEditorComponent=e.first)}},inputs:{componentName$:"componentName$"},decls:3,vars:4,consts:[[3,"busy","header"],["class","d-flex align-items-center justify-content-center h-100",4,"ngIf"],["class","d-flex flex-column align-items-start flex-fill",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[3,"type","label"],[1,"d-flex","flex-column","align-items-start","flex-fill"],[4,"ngIf"],["class","flex-fill w-100",4,"ngIf"],["adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],[3,"config"],["adapt-button","","type","button","btn-type","tertiary",3,"click"],[1,"d-icon-plus_circle"],[1,"flex-fill","w-100"],[3,"componentName","groups","isNew","createPermission","getRecordGridConfig","openSettingsDetails","busy"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275template"](1,q,3,4,"div",1),o["\u0275\u0275template"](2,Y,3,2,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("busy",t.busySubscription)("header",(null==t.state?null:t.state.headerLabel)||t.navigationMenuLabel),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.state),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.state))},directives:[s.AdminSettingsComponent,n.NgIf,a.AdaptEmptyStateComponent,d.RecordGridComponent,a.AdaptButtonComponent,Sa],pipes:[u.TranslatePipe],encapsulation:2});class _a{constructor(e){this.rxAdminSettingsService=e}getNavigationTreeConfig(){return this.rxAdminSettingsService.getAdminNavigationMenuItems().pipe((0,v.map)(this.buildTreeNodes.bind(this)))}buildTreeNodes(e,t){return(e||[]).filter(e=>"com.bmc.arsys.rx.settings"!==e.compName).sort((e,t)=>e.label.localeCompare(t.label)).map(e=>{const i={label:e.label,data:e,expanded:!1,selectable:Boolean(e.guid),key:(0,m.uniqueId)()};return i.children=e.items&&e.items.length?this.buildTreeNodes(e.items,i):[],t&&(i.parent=t),i})}}var Da,Ra;_a.\u0275fac=function(e){return new(e||_a)(o["\u0275\u0275inject"](f.RxAdminSettingsService))},_a.\u0275prov=o["\u0275\u0275defineInjectable"]({token:_a,factory:_a.\u0275fac}),function(e){e.RuntimeView="runtimeView",e.SharedView="sharedView"}(Da||(Da={})),function(e){e.InBundle="inBundle",e.External="external"}(Ra||(Ra={}));class Aa{constructor(e,t,i,n,o,r,s,l,c,d,p,u,m){this.rxAdminSettingsExplorerService=e,this.rxAdminSettingsService=t,this.rxGlobalCacheService=i,this.router=n,this.rxBundleCacheService=o,this.activatedRoute=r,this.rxPageTitleService=s,this.rxRuntimeViewRegistryService=l,this.rxUtilityModalsService=c,this.rxComponentCanDeactivateGuard=d,this.changeDetector=p,this.translateService=u,this.rxGainsightConfiguratorService=m,this.adminSettingViewType=Da,this.componentName$=new h.BehaviorSubject(""),this.treeWrap=a.TreeWrap.WrapAll,this.emptyStateLabel=this.translateService.instant("com.bmc.arsys.rx.client.admin.admin-settings-explorer.select-from-settings.label"),this.texts={filterPlaceholder:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label")},this.destroyed$=new h.ReplaySubject(1)}get selectedTreeNode(){return this.selectedTreeNodeValue}set selectedTreeNode(e){if(e.data.guid){const t=this.currentSettingGuid;this.currentSettingGuid=e.data.guid,this.router.navigate([e.data.guid],{relativeTo:this.activatedRoute.parent}).then(i=>{i?(this.selectedTreeNodeValue=e,this.displayView(e.data)):this.currentSettingGuid=t})}}ngOnInit(){this.rxComponentCanDeactivateGuard.setPageComponent(this),(0,h.combineLatest)([this.activatedRoute.params.pipe((0,v.pluck)("settingGuid")),this.rxAdminSettingsExplorerService.getNavigationTreeConfig()]).pipe((0,v.filter)(([e,t])=>e!==this.currentSettingGuid),(0,v.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.navigationTree||(this.navigationTree=t),this.currentSettingGuid=e,"root"!==e&&this.navigationTree.length?(this.selectedTreeNodeValue=this.findSelectedNode(e,this.navigationTree),this.selectedTreeNodeValue&&(this.expandParentNodes(this.selectedTreeNodeValue),this.displayView(this.selectedTreeNodeValue.data))):(this.selectedTreeNodeValue=null,this.viewType=null,this.setPageTitle())}),this.rxGlobalCacheService.applicationId===f.RX_APPLICATION.innovationStudioBundleId?this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:"Administration"}}):this.rxGainsightConfiguratorService.removeGlobalContext(null)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.rxComponentCanDeactivateGuard.setPageComponent(null),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2"])}canDeactivate(){return this.adminCommonSettingsComponent?this.adminCommonSettingsComponent.canClose():(0,m.every)(this.rxRuntimeViewRegistryService.getAll(),e=>e.canClose())}confirmDeactivation(){return this.rxUtilityModalsService.confirmUnsavedChanges()}onBeforeLoad(){this.busySubscription=h.NEVER.subscribe(),this.changeDetector.detectChanges()}onAfterLoad(){var e;null===(e=this.busySubscription)||void 0===e||e.unsubscribe()}setPageTitle(e){const t=[e,this.rxGlobalCacheService.applicationId===f.RX_APPLICATION.innovationStudioBundleId?this.translateService.instant("com.bmc.arsys.rx.client.common.administration.label"):this.translateService.instant("com.bmc.arsys.rx.client.common.settings.label")];this.rxPageTitleService.set(t,this.rxGlobalCacheService.applicationId)}findSelectedNode(e,t){let i;return(0,m.forEach)(t,t=>t.data.guid===e?(i=t,!1):(i=this.findSelectedNode(e,t.children),!i&&void 0)),i}expandParentNodes(e){e.parent&&(e.parent.expanded=!0,e.parent.parent&&this.expandParentNodes(e.parent))}displayView(e){this.setPageTitle(e.label),this.rxBundleCacheService.bundleId=e.defaultBundleScope,e.isCustom?e.linkType===Ra.InBundle?(this.viewType=Da.RuntimeView,this.runtimeViewConfig={viewDefinitionName:e.registeredModuleName}):e.linkType===Ra.External&&(window.open(e.externalLink,"_blank"),this.viewType=null,this.emptyStateLabel=this.translateService.instant("com.bmc.arsys.rx.client.admin.external-settings.empty-state.label")):(this.componentName$.next(e.compName),this.viewType=Da.SharedView)}}Aa.\u0275fac=function(e){return new(e||Aa)(o["\u0275\u0275directiveInject"](_a),o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](y.Router),o["\u0275\u0275directiveInject"](f.RxBundleCacheService),o["\u0275\u0275directiveInject"](y.ActivatedRoute),o["\u0275\u0275directiveInject"](f.RxPageTitleService),o["\u0275\u0275directiveInject"](p.RxRuntimeViewRegistryService),o["\u0275\u0275directiveInject"](l.RxUtilityModalsService),o["\u0275\u0275directiveInject"](f.RxComponentCanDeactivateGuard),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](s.RxGainsightConfiguratorService))},Aa.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Aa,selectors:[["rx-admin-settings-explorer"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ia,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.adminCommonSettingsComponent=e.first)}},features:[o["\u0275\u0275ProvidersFeature"]([_a])],decls:11,vars:16,consts:[[1,"position-relative","busy-indicator"],[3,"options"],[3,"openedId","adjustMainContainerWidth"],[3,"iconClass","headerTitle","aria-label"],["selectionMode","single",3,"value","selection","filter","texts","wrap","selectionChange",4,"ngIf"],[1,"main","rx-administration-settings-view"],[3,"configuration","beforeLoad","afterLoad",4,"ngIf"],[3,"componentName$",4,"ngIf"],["class","d-flex align-items-center justify-content-center h-100",4,"ngIf"],["selectionMode","single",3,"value","selection","filter","texts","wrap","selectionChange"],[3,"configuration","beforeLoad","afterLoad"],[3,"componentName$"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[3,"type","label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-busy-indicator",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"adapt-sidebar",2),o["\u0275\u0275elementStart"](3,"adapt-sidebar-item",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,Q,1,5,"adapt-tree",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275template"](8,K,1,1,"rx-runtime-view",6),o["\u0275\u0275template"](9,J,1,1,"rx-admin-common-settings",7),o["\u0275\u0275template"](10,Z,2,2,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](14,ee,t.busySubscription)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("openedId",0)("adjustMainContainerWidth",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("iconClass","d-icon-layout_preview")("headerTitle",o["\u0275\u0275pipeBind1"](4,10,"com.bmc.arsys.rx.client.common.settings.label"))("aria-label",o["\u0275\u0275pipeBind1"](5,12,"com.bmc.arsys.rx.client.common.settings.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.navigationTree),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.viewType===t.adminSettingViewType.RuntimeView),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.viewType===t.adminSettingViewType.SharedView),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.viewType))},directives:[l.RxBusyIndicatorComponent,a.AdaptSidebarComponent,a.AdaptSidebarItemComponent,n.NgIf,a.AdaptTreeComponent,p.RuntimeViewComponent,Ia,a.AdaptEmptyStateComponent],pipes:[u.TranslatePipe],styles:["adapt-tree[_ngcontent-%COMP%]     .a-tree__container{margin-left:10px}adapt-sidebar[_ngcontent-%COMP%]     .adapt-sidebar-main{padding:0}adapt-sidebar[_ngcontent-%COMP%]     button.close{margin:0}.rx-administration-settings-view[_ngcontent-%COMP%]{height:100%;overflow:auto}.busy-indicator[_ngcontent-%COMP%]{bottom:2px}[_nghost-%COMP%]   rx-runtime-view[_ngcontent-%COMP%]     rx-runtime-view-root, [_nghost-%COMP%]   rx-runtime-view[_ngcontent-%COMP%]     .content-outlet{overflow:visible}"]});const Ta=[{path:"",redirectTo:"root",pathMatch:"full"},{path:":settingGuid",component:Aa,pathMatch:"full",canDeactivate:[f.RxComponentCanDeactivateGuard]}];class Fa{}Fa.\u0275fac=function(e){return new(e||Fa)},Fa.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Fa,imports:[y.RouterModule],exports:[y.RouterModule]}),Fa.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[y.RouterModule.forChild(Ta)],y.RouterModule]});const Ea="Reported Errors",Ma={operationId:70100,applicationName:70101,messageType:70102,errorNumber:70103,errorMessage:70104,caseId:70106,caseStatus:70107,relatedRecordGuid:70108,userDescription:70109,submittedToSupportDate:70110,caseGuid:70111,caseStatusRefreshDate:70112},Oa={new:0,submitted:1},ka={code:12206,message:"com.bmc.arsys.rx.client.admin.application-issues.link-expired-error.message"},ja={caseStatusRefreshed:"com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed.message",duplicateIssuesClosed:"com.bmc.arsys.rx.client.admin.application-issues.duplicate-issues-closed.message",caseSubmitted:"com.bmc.arsys.rx.client.admin.application-issues.case-submitted.message"};class Pa{constructor(e,t){this.httpClient=e,this.rxSystemConfigurationService=t}getIssueReportingInfo(){return this.httpClient.get("/api/rx/application/oauth/token/IssueReporting")}getIssuesResource(){return(0,h.forkJoin)({issueReportingInfo:this.getIssueReportingInfo(),errorReportingInfo:this.rxSystemConfigurationService.getConfiguration("Error-Reporting-Service-Saas-Configuration")}).pipe((0,v.map)(e=>{const t=JSON.parse(e.errorReportingInfo.value);return{issueReportingInfo:e.issueReportingInfo,errorReportingValue:t}}))}}Pa.\u0275fac=function(e){return new(e||Pa)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](f.RxSystemConfigurationService))},Pa.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Pa,factory:Pa.\u0275fac,providedIn:"root"});class Na{constructor(e){this.dockedPanelContext=e}ngOnInit(){this.issueFields=this.dockedPanelContext.getData(),this.fieldIds=Ma,this.coreFieldIds=x.RX_RECORD_DEFINITION.coreFieldIds}close(){this.dockedPanelContext.close(a.DismissReasons.CLOSE_BTN)}}Na.\u0275fac=function(e){return new(e||Na)(o["\u0275\u0275directiveInject"](a.DockedPanelContext))},Na.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Na,selectors:[["rx-issue-detail"]],decls:57,vars:44,consts:[[1,"dp-body"],[4,"ngIf"],[1,"row"],[1,"col-4"],["rx-id","issue-status",1,"title-item","text-tertiary"],[1,"text-default"],["rx-id","reported-by",1,"title-item","text-tertiary"],["rx-id","reported-date",1,"title-item","text-tertiary"],["rx-id","application-name",1,"title-item","text-tertiary"],["rx-id","error-number",1,"title-item","text-tertiary"],["rx-id","error-message",1,"title-item","text-tertiary"],["rx-id","short-description",1,"title-item","text-tertiary"],["rx-id","operation-id",1,"title-item","text-tertiary"],["rx-id","guid",1,"title-item","text-tertiary"],[1,"dp-footer"],["adapt-button","","btn-type","secondary","rx-id","close-button",1,"mr-2",3,"click"],["rx-id","case-id",1,"text-tertiary"],["rx-id","case-status",1,"title-item","text-tertiary"],["rx-id","case-status-modified-date",1,"title-item","text-tertiary"],["rx-id","submitted-to-support-date",1,"title-item","text-tertiary"],["rx-id","related-record-guid",1,"title-item","text-tertiary"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,te,27,22,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"h6",4),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"p",5),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",3),o["\u0275\u0275elementStart"](10,"h6",6),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"p",5),o["\u0275\u0275text"](14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",3),o["\u0275\u0275elementStart"](16,"h6",7),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"p",5),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"date"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"h6",8),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"p",5),o["\u0275\u0275text"](26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"h6",9),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"p",5),o["\u0275\u0275text"](31),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"h6",10),o["\u0275\u0275text"](33),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](35,"p",5),o["\u0275\u0275text"](36),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"h6",11),o["\u0275\u0275text"](38),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"p",5),o["\u0275\u0275text"](41),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](42,"h6",12),o["\u0275\u0275text"](43),o["\u0275\u0275pipe"](44,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](45,"p",5),o["\u0275\u0275text"](46),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"h6",13),o["\u0275\u0275text"](48),o["\u0275\u0275pipe"](49,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](50,"p",5),o["\u0275\u0275text"](51),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](52,ie,6,4,"div",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"div",14),o["\u0275\u0275elementStart"](54,"button",15),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](55),o["\u0275\u0275pipe"](56,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.issueFields[t.fieldIds.caseId]),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,21,"com.bmc.arsys.rx.client.admin.application-issues.issue-status.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields.selectionFieldOptionNamesById[t.coreFieldIds.status]," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,23,"com.bmc.arsys.rx.client.admin.application-issues.reported-by.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.coreFieldIds.createdBy]," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,25,"com.bmc.arsys.rx.client.admin.application-issues.reported-date.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](21,27,t.issueFields[t.coreFieldIds.createdDate],"medium")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,30,"com.bmc.arsys.rx.client.admin.application-issues.application-name.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.fieldIds.applicationName]," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](29,32,"com.bmc.arsys.rx.client.admin.application-issues.error-number.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.fieldIds.errorNumber]," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](34,34,"com.bmc.arsys.rx.client.admin.application-issues.error-message.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.fieldIds.errorMessage]," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](39,36,"com.bmc.arsys.rx.client.admin.application-issues.user-description.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.fieldIds.userDescription]," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](44,38,"com.bmc.arsys.rx.client.admin.application-issues.operation-id.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.fieldIds.operationId]," "),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](49,40,"com.bmc.arsys.rx.client.common.guid.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",t.issueFields[t.coreFieldIds.id]," "),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.issueFields[t.fieldIds.relatedRecordGuid]),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](56,42,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[n.NgIf,a.AdaptButtonComponent],pipes:[u.TranslatePipe,n.DatePipe],encapsulation:2});class Va{constructor(e,t,i,n,o){this.adaptDockedPanelService=e,this.dockedPanelContext=t,this.rxCommandFactoryService=i,this.rxNotificationService=n,this.translateService=o,this.selectedIssuesGridColumns=[{field:`${Ma.applicationName}`,header:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.application-name.title")},{field:`${Ma.errorNumber}`,header:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-number.title")},{field:`${Ma.errorMessage}`,header:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-message.title"),sortable:!1}]}ngOnInit(){this.selectedIssuesData=this.dockedPanelContext.getData(),this.submittedIssuesGridConfiguration()}getSubmittedIssuesGridColumns(){return[{fieldId:`${Ma.applicationName}`,index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.application-name.title")},{fieldId:`${Ma.errorNumber}`,index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-number.title"),clickable:!0,actions:[{name:(e,t)=>this.showIssueDetails(t)}]},{fieldId:`${Ma.errorMessage}`,index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-message.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.createdDate}`,index:3,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.reported-date.title")},{fieldId:`${Ma.caseId}`,index:4,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.case-id.title")}]}submittedIssuesGridConfiguration(){this.submittedIssuesGridConfiguration$=(0,h.of)({recordDefinitionName:Ea,columns:this.getSubmittedIssuesGridColumns(),filterExpression:`'${x.RX_RECORD_DEFINITION.coreFieldIds.status}' = "${Oa.submitted}"`,styles:"flex-fill"})}cancel(){this.dockedPanelContext.close("")}closeSelectedIssues(){const e=(0,m.head)(this.submittedIssuesGrid.api.getSelectedRows());this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.support.command.UpdateIssuesAsDuplicateCommand").execute({recordId:e[x.RX_RECORD_DEFINITION.coreFieldIds.id],recordIds:(0,m.map)(this.dockedPanelContext.getData(),e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.id])}).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(ja.duplicateIssuesClosed)),this.dockedPanelContext.close("close")})}isCloseSelectedIssuesButtonDisabled(){return 0===this.submittedIssuesGrid.api.getSelectedRows().length}showIssueDetails(e){this.adaptDockedPanelService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.issue-details.title"),content:Na,size:"lg",data:e})}}Va.\u0275fac=function(e){return new(e||Va)(o["\u0275\u0275directiveInject"](a.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService))},Va.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Va,selectors:[["rx-close-duplicate-issues"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ne,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.submittedIssuesGrid=e.first)}},decls:21,vars:18,consts:[[1,"dp-body","d-flex","flex-column"],[1,"row"],[1,"col-12"],[1,"mt-0"],["rx-id","selected-issues-grid",3,"columns","bordered","sortable","value"],[1,"row","flex-fill"],[1,"col-12","d-flex","flex-column"],["rx-id","submitted-issues-grid",1,"flex-fill",3,"config"],["submittedIssuesGrid",""],[1,"dp-footer"],["rx-id","close-selected-issues-button","adapt-button","","btn-type","primary",1,"mr-2",3,"disabled","click"],["adapt-button","","btn-type","secondary","rx-id","cancel-button",1,"mr-2",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"h5",3),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"adapt-table",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"div",6),o["\u0275\u0275elementStart"](9,"h5"),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](12,"rx-record-grid",7,8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",9),o["\u0275\u0275elementStart"](15,"button",10),o["\u0275\u0275listener"]("click",function(){return t.closeSelectedIssues()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",11),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,10,"com.bmc.arsys.rx.client.admin.application-issues.selected-issues.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("columns",t.selectedIssuesGridColumns)("bordered",!0)("sortable",!0)("value",t.selectedIssuesData),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,12,"com.bmc.arsys.rx.client.admin.application-issues.duplicates.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.submittedIssuesGridConfiguration$),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.isCloseSelectedIssuesButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,14,"com.bmc.arsys.rx.client.admin.application-issues.close-selected.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,16,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[C.AdaptTableComponent,d.RecordGridComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class La extends l.RxModalClass{constructor(e,t,i,n,o,r,a,s,l){super(e,l),this.activeModalRef=e,this.formBuilder=t,this.rxApplicationIssuesService=i,this.rxCommandFactoryService=n,this.rxModalService=o,this.rxNotificationService=r,this.rxStringService=a,this.translateService=s,this.injector=l,this.issueSeverityOptions=[{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-critical.message"),id:1},{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-high.message"),id:2},{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-medium.message"),id:3},{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-low.message"),id:4}]}ngOnInit(){super.ngOnInit(),this.submitIssueForm=this.formBuilder.group({description:[],severity:[]}),this.issues=this.activeModalRef.getData().issues,this.rxApplicationIssuesService.getIssuesResource().subscribe(e=>{const{errorReportingValue:t}=e;this.supportCentralUrl=t.supportCentralUrl}),this.message=this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.reported-issues.title",{numberOfIssues:this.issues.length})}isDirty(){return this.submitIssueForm.dirty}initSearchQuery(){if(this.issues.length>=1){const e=`?fromproduct=helixplatform#q=${this.issues[0][Ma.errorMessage]}%20OR%20${this.issues[0][Ma.errorNumber]}&t=All&sort=relevancy&f:@bmcproductname=[${this.issues[0][Ma.applicationName]}]`;window.open(this.supportCentralUrl+e)}}submit(){this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.support.command.CreateSupportCaseCommand").execute({description:this.submitIssueForm.get("description").value,recordIds:(0,m.map)(this.issues,x.RX_RECORD_DEFINITION.coreFieldIds.id),severity:this.submitIssueForm.get("severity").value[0].id}).pipe((0,v.catchError)(e=>(e.error[0].messageNumber===ka.code&&this.rxNotificationService.addErrorMessage(ka.message),(0,h.throwError)(e)))).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(ja.caseSubmitted)),this.activeModalRef.close("cancel")})}optionFormatter(e){return e.name}cancel(){this.submitIssueForm.get("description")?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.cancel-submission.message")}).then(e=>{e&&this.activeModalRef.close()}):this.activeModalRef.close()}}La.\u0275fac=function(e){return new(e||La)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](Pa),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](g.RxStringService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},La.\u0275cmp=o["\u0275\u0275defineComponent"]({type:La,selectors:[["rx-submit-issue-to-support"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:12,consts:[[1,"modal-body","pt-0"],["class","row bg-info",4,"ngIf"],[1,"row","mt-2"],[1,"col-md-12"],["rx-id","message"],[3,"formGroup"],[1,"row"],[1,"col-12"],["rx-id","description","formControlName","description","label","Description","placeholder","Enter Issue Description","rows","7","required",""],[1,"row","mt-4","mb-4"],[1,"col-4"],["rx-id","severity","formControlName","severity","label","Severity","required","",3,"options","optionFormatter"],[1,"modal-footer"],["adapt-button","","btn-type","primary","rx-id","submit-case-button",1,"mr-2",3,"disabled","click"],["rx-id","cancel-button","adapt-button","","btn-type","secondary",1,"mr-2",3,"click"],[1,"row","bg-info"],["adapt-button","","rx-id","knowledge-articles-button","type","button","size","xtra-small",1,"btn","btn-secondary","m-2",3,"click"],["aria-hidden","true",1,"d-icon-lightbulb_o","p-2"],["rx-id","message",1,"mt-3","text-default-inverse"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,oe,8,6,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"p",4),o["\u0275\u0275text"](5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"form",5),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275elementStart"](8,"div",7),o["\u0275\u0275element"](9,"adapt-rx-textarea",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",9),o["\u0275\u0275elementStart"](11,"div",10),o["\u0275\u0275element"](12,"adapt-rx-select",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",12),o["\u0275\u0275elementStart"](14,"button",13),o["\u0275\u0275listener"]("click",function(){return t.submit()}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",14),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.supportCentralUrl),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](t.message),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.submitIssueForm),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("options",t.issueSeverityOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.submitIssueForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,8,"com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.submit-case.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,10,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[n.NgIf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextareaComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptRxSelectComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class Ba{constructor(e,t,i,n,o,r,a,s){this.adaptDockedPanelService=e,this.rxApplicationIssuesService=t,this.rxCommandFactoryService=i,this.rxCurrentUserService=n,this.rxDeleteRecordsViewActionService=o,this.translateService=r,this.rxNotificationService=a,this.rxModalService=s,this.isAdministrator=this.rxCurrentUserService.isAdministrator(),this.issuesRecordGridConfiguration$=new h.Observable(e=>{this.isAdministrator&&e.next({recordDefinitionName:Ea,columns:this.getIssueColumns(),actionButtons:this.getActionButtons(),styles:"flex-fill"}),e.complete()})}ngOnInit(){this.rxApplicationIssuesService.getIssuesResource().subscribe(e=>{const{issueReportingInfo:t,errorReportingValue:i}=e;this.issueReportingInfo=t,this.supportCentralUrl=i.supportCentralUrl})}getIssueColumns(){return[{fieldId:`${Ma.applicationName}`,index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.application-name.title")},{fieldId:`${Ma.errorNumber}`,index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-number.title"),clickable:!0,actions:[{name:(e,t)=>this.showIssueDetails(t)}]},{fieldId:`${Ma.errorMessage}`,index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.error-message.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.createdBy}`,index:3,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.reported-by.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.createdDate}`,index:4,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.reported-date.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.status}`,index:5,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.issue-status.title")},{fieldId:`${Ma.caseId}`,index:6,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.case-id.title")},{fieldId:`${Ma.caseStatus}`,index:7,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.case-status.title")},{fieldId:`${Ma.caseStatusRefreshDate}`,index:8,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed-date.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.displayId}`,index:9,title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.id}`,index:10,title:this.translateService.instant("com.bmc.arsys.rx.client.common.guid.label"),visible:!1},{fieldId:`${Ma.userDescription}`,index:11,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.user-description.title"),visible:!1},{fieldId:`${Ma.operationId}`,index:12,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.operation-id.title"),visible:!1},{fieldId:`${Ma.relatedRecordGuid}`,index:13,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.related-issue-guid.title"),visible:!1}]}getActionButtons(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.view-details.label"),style:"tertiary",disabled:()=>1!==this.issuesRecordGrid.api.getSelectedRowCount(),iconCls:"search_plus",actions:[{name:()=>{this.showIssueDetails(this.issuesRecordGrid.api.getFirstSelectedRow())}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.search-knowledge-articles.label"),style:"tertiary",disabled:()=>!this.supportCentralUrl||1!==this.issuesRecordGrid.api.getSelectedRowCount()||this.issuesRecordGrid.api.getSelectedRows()[0][x.RX_RECORD_DEFINITION.coreFieldIds.status]!==Oa.new,iconCls:"search",actions:[{name:()=>{const e=this.issuesRecordGrid.api.getSelectedRows(),t=`?fromproduct=helixplatform#q=${e[0][Ma.errorMessage]}%20OR%20${e[0][Ma.errorNumber]}&t=All&sort=relevancy&f:@bmcproductname=[${e[0][Ma.applicationName]}]`;window.open(this.supportCentralUrl+t)}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-to-bmc.label"),style:"tertiary",iconCls:"file_arrow_right",disabled:()=>!this.issueReportingInfo.configured||(0,m.some)(this.issuesRecordGrid.api.getSelectedRows(),e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.status]!==Oa.new),actions:[{name:()=>{this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.submit-to-support.title"),content:La,size:"default",data:{issues:this.issuesRecordGrid.api.getSelectedRows()}}).then(e=>{e&&this.issuesRecordGrid.api.refresh().subscribe()}).catch(m.noop)}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.refresh-case-status.label"),style:"tertiary",iconCls:"refresh",disabled:()=>!this.issueReportingInfo.configured||(0,m.some)(this.issuesRecordGrid.api.getSelectedRows(),e=>!e[Ma.caseId]),actions:[{name:()=>{const e=this.issuesRecordGrid.api.getSelectedRows();this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.support.command.UpdateSupportCaseStatusCommand").execute({recordIds:(0,m.map)(e,x.RX_RECORD_DEFINITION.coreFieldIds.id)}).pipe((0,v.catchError)(e=>(e.error[0].messageNumber===ka.code&&this.rxNotificationService.addErrorMessage(this.translateService.instant(ka.message)),(0,h.throwError)(e))),(0,v.tap)(()=>this.issuesRecordGrid.api.refresh().subscribe())).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(ja.caseStatusRefreshed))})}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.close-as-duplicates.label"),style:"tertiary",iconCls:"cross_adapt",disabled:()=>(0,m.some)(this.issuesRecordGrid.api.getSelectedRows(),e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.status]!==Oa.new),actions:[{name:()=>{this.adaptDockedPanelService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.close-duplicate-issues.title"),content:Va,data:this.issuesRecordGrid.api.getSelectedRows(),size:"lg"}).then(e=>{e&&this.issuesRecordGrid.api.refresh().subscribe()},()=>{})}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",iconCls:"trash",disabled:()=>(0,m.some)(this.issuesRecordGrid.api.getSelectedRows(),e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.status]===Oa.submitted),actions:[{name:()=>{this.rxDeleteRecordsViewActionService.execute({recordDefinitionName:Ea,records:this.issuesRecordGrid.api}).subscribe()}}]}]}showIssueDetails(e){this.adaptDockedPanelService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.issue-details.title"),content:Na,size:"lg",data:e})}}Ba.\u0275fac=function(e){return new(e||Ba)(o["\u0275\u0275directiveInject"](a.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](Pa),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](c.RxDeleteRecordsViewActionService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService))},Ba.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ba,selectors:[["rx-admin-application-issues"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](re,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.issuesRecordGrid=e.first)}},decls:2,vars:2,consts:[[3,"header",4,"ngIf"],["class","p-4",3,"config",4,"ngIf"],[3,"header"],["rx-id","issues-grid",3,"config"],["issuesRecordGrid",""],[1,"p-4",3,"config"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,ae,4,4,"rx-admin-settings",0),o["\u0275\u0275template"](1,le,3,8,"adapt-alert",1)),2&e&&(o["\u0275\u0275property"]("ngIf",t.isAdministrator),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isAdministrator))},directives:[n.NgIf,s.AdminSettingsComponent,d.RecordGridComponent,a.AdaptAlertComponent],pipes:[u.TranslatePipe],styles:[".icon-size[_ngcontent-%COMP%]{font-size:20px}"]});class $a{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-application-issues",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ba),name:"Application issues",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}$a.\u0275fac=function(e){return new(e||$a)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},$a.\u0275mod=o["\u0275\u0275defineNgModule"]({type:$a,declarations:[Ba,Na,Va,La],imports:[a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptRxSelectModule,a.AdaptRxTextareaModule,C.AdaptTableModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,d.RecordGridModule,u.TranslateModule]}),$a.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAlertModule.forRoot(),a.AdaptButtonModule,a.AdaptRxSelectModule,a.AdaptRxTextareaModule,C.AdaptTableModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,d.RecordGridModule,u.TranslateModule]]});const Ga={selfApproval:{apForm:{name:"AP:Form",fields:{formName:12e3,formRequestId:10014,notesField:10009,requester:10015,summary:10002,field3:10004,field4:10005,field5:10006,field6:10007,field7:61001,securityLabels:14850}},mapping:{name:"com.bmc.arsys.rx.approval:SelfApprovalMappingV2",fields:{precedence:10004,qualification:10001,auditInformation:12700,recordDefinition:1e4,approvalFlowName:10002,approvalFlowGuid:10003,hiddenQualification:10006,applicationBundleId:61001}},flowList:{name:"com.bmc.arsys.rx.approval:SelfApprovalFlowList",fields:{recordDefinition:1e4,selfApprovalFlowName:10001,selfApprovalFlowProcessDefinitionGuid:10002}}},flowQualificationProperty:"approvalQualification",approverQualificationProperty:"approverQualification",noApproverProvided:"NO_APPROVER_PROVIDED",signingCriteriaPercentageList:[50,60,70,80,90],approverCriteria:{oneMust:0,allMust:1,percentage:2},approverTypes:{functionalRole:"functionalRole",fieldIdentifying:"fieldIdentifying",people:"people",company:"company",org:"org",dept:"dept",supportCompany:"supportCompany",supportOrg:"supportOrg",supportGroup:"supportGroup"},approverFields:{companyField:1000000001,organizationField:1000000010,departmentField:200000006,supportOrgField:1000000014,supportGroupField:1000000015,firstName:1000000019,lastName:1000000018,remedyLoginId:4},valueSeparator:"_",approverSeparator:";",levelSeparator:"[:]",approverFormatPrefixes:{people:"U[:]",functionalRole:"FR[:]",company:"COM",companyOrg:"COMORG",companyOrgDept:"COMORGDEPT",supportCompany:"SCOM",supportCompanyOrg:"SCOMSORG",supportCompanyOrgGroup:"SCOMSORGSGRP"}};class za{constructor(e,t){this.httpClient=e,this.rxFunctionalRoleDataPageService=t,this.selfApprovalApi="/api/com.bmc.arsys.rx.approval/rx/application/approval/approvalmapping",this.registrationApi="/api/com.bmc.arsys.rx.approval/rx/application/approval/registration",this.flowConfigurationApi="/api/com.bmc.arsys.rx.approval/rx/application/approval/flowconfiguration"}getRegisteredRecordDetails(e){return this.httpClient.get(`${this.registrationApi}/${e}`)}registerRecord(e){return this.httpClient.post(this.registrationApi,e)}updateRecord(e){return this.httpClient.put(`${this.registrationApi}/${e.recordDefinition}`,e)}unRegisterRecord(e){return this.httpClient.delete(`${this.registrationApi}/${encodeURIComponent(e)}`)}createSelfApprovalConfiguration(e){return this.httpClient.post(this.selfApprovalApi,e)}updateSelfApprovalConfiguration(e,t){return this.httpClient.put(`${this.selfApprovalApi}/${Ga.selfApproval.mapping.name}/${e}`,t)}deleteSelfApprovalConfiguration(e){return this.httpClient.delete(`${this.selfApprovalApi}/${Ga.selfApproval.mapping.name}/${e}`)}getFunctionalRoles(){return this.functionalRoles$||(this.functionalRoles$=this.rxFunctionalRoleDataPageService.get({params:{pageSize:-1,propertySelection:["applicationName","name"]}}).pipe((0,v.map)(e=>e.data.map(e=>({id:e.id,name:e.name,applicationName:e.applicationName}))),(0,v.shareReplay)(1))),this.functionalRoles$}getApprovalFlowConfigurations(e){return this.httpClient.get(`${this.flowConfigurationApi}/${e}`)}updateApprovalFlowGroup(e,t,i){return this.httpClient.put(`${this.flowConfigurationApi}/${encodeURIComponent(i)}/flowGroupName/${encodeURIComponent(e)}`,t)}saveApprovalFlowGroup(e,t){return this.httpClient.post(`${this.flowConfigurationApi}/${encodeURIComponent(t)}/flowGroupName`,e)}getApprovalFlowGroup(e,t){return this.httpClient.get(`${this.flowConfigurationApi}/${encodeURIComponent(e)}/flowGroupName/${encodeURIComponent(t)}`)}deleteApprovalFlowGroup(e,t){return this.httpClient.delete(`${this.flowConfigurationApi}/${encodeURIComponent(t)}/flowGroupName/${encodeURIComponent(e)}`)}getCtmPeopleFormFields(e){return this.httpClient.get(`/api/com.bmc.arsys.rx.approval/rx/application/approval/recorddefinition/people/${e}`)}isFunctionalRole(e){return e.includes(Ga.approverFormatPrefixes.functionalRole)}getFunctionalRoleGuid(e){return e.split(Ga.levelSeparator)[1]}isApproverPeople(e){return e.includes(Ga.approverFormatPrefixes.people)}getApproverUser(e){return e.split(Ga.levelSeparator)[1]}isFieldIdentifyingApprover(e){return Boolean(e.match(/\$(.*?)\$/g))}getFieldIdentifyingApprover(e){return(0,m.trim)(e,"$")}getLastLabel(e){return e.split(Ga.levelSeparator).pop()}isCompany(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.company}isCompanyOrg(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.companyOrg}isCompanyOrgDept(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.companyOrgDept}isSupportCompany(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.supportCompany}isSupportCompanyOrg(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.supportCompanyOrg}isSupportCompanyOrgGroup(e){return e.split(Ga.levelSeparator)[0]===Ga.approverFormatPrefixes.supportCompanyOrgGroup}}za.\u0275fac=function(e){return new(e||za)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](f.RxFunctionalRoleDataPageService))},za.\u0275prov=o["\u0275\u0275defineInjectable"]({token:za,factory:za.\u0275fac,providedIn:"root"});class Ua extends f.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(u.TranslateService),this.rxDefinitionNameService=this.injector.get(f.RxDefinitionNameService),this.rxRecordDefinitionCacheService=this.injector.get(x.RxRecordDefinitionCacheService),this.rxAssociationNodeTreeDataPageService=this.injector.get(_.RxAssociationNodeTreeDataPageService),this.rxTreeService=this.injector.get(g.RxTreeService),this.rxApprovalConfigurationService=this.injector.get(za),this.errorHandler=this.injector.get(o.ErrorHandler),this.commonDataDictionary$=(0,h.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-user.title"),icon:"d-icon-dollar",expression:"$USER$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date.title"),icon:"d-icon-dollar",expression:"$DATE$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-time.title"),icon:"d-icon-dollar",expression:"$TIME$"},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title"),icon:"d-icon-dollar",expression:"$TIMESTAMP$"}]}])}approvalExpressionDataDictionary(e){const t={recorddefinition:e};return(0,h.combineLatest)([this.rxAssociationNodeTreeDataPageService.get({params:t}),this.commonDataDictionary$]).pipe((0,v.switchMap)(([t,i])=>{const n=t.data,o=(0,m.flow)(e=>e.map(e=>this.rxTreeService.flattenTree(e,"children").map(e=>e.value)),I.flatten,e=>e.map(e=>e.recordDefinitionName))(n),r=[this.rxRecordDefinitionCacheService.getRecordDefinition(e)];return(0,m.forEach)(o,e=>{r.push(this.rxRecordDefinitionCacheService.getRecordDefinition(e))}),(0,h.forkJoin)(r).pipe((0,v.map)(t=>{const o={definitionName:e,definitions:t,associationsByDefinition:{[e]:n}};return[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition.title"),children:[{label:this.rxDefinitionNameService.getDisplayName(e),children:this.getRecordDefinitionDataDictionary(o)}]},...i]}))}),(0,v.shareReplay)(1))}getRecordDefinitionDataDictionary(e){const t=(0,m.find)(e.definitions,{name:e.definitionName}),i=t.fieldDefinitions.map(t=>({label:t.name,icon:"d-icon-field_text",expression:e.association?`\${recordContext${e.parentAssociationExpression||""}._associations.${e.association.value.associationDefintionGuid}.${e.association.value.nodeSide}[0].${t.id}}`:`'${t.name}'`}));if(e.associationsByDefinition&&e.associationsByDefinition[t.name]){const t=this.getAssociationDataDictionary(e);t.length&&i.unshift({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition-associations.title"),children:t})}return i}getAssociationDataDictionary(e){const t=[];return e.associationsByDefinition[e.definitionName].length&&(0,m.forEach)(e.associationsByDefinition[e.definitionName],i=>{let n="";const o={};e.association&&(n=`._associations.${e.association.value.associationDefintionGuid}.${e.association.value.nodeSide}[0]`);const r=(0,m.find)(e.associationsByDefinition[e.definitionName],e=>e.value.recordDefinitionName===i.value.recordDefinitionName);r&&(o[i.value.recordDefinitionName]=r.children),t.push({label:i.value.nodeName!==i.value.recordDefinitionName?`${this.rxDefinitionNameService.getDisplayName(i.value.recordDefinitionName)} (${this.rxDefinitionNameService.getDisplayName(i.value.nodeName)})`:this.rxDefinitionNameService.getDisplayName(i.value.nodeName),children:this.getRecordDefinitionDataDictionary({definitionName:i.value.recordDefinitionName,definitions:e.definitions,associationsByDefinition:o,association:i,parentAssociationExpression:n}),expression:`\${recordContext${n}._associations.${i.value.associationDefintionGuid}.${i.value.nodeSide}[0]}`})}),t}getCtmPeopleFormFields(e){return(0,h.combineLatest)([this.rxApprovalConfigurationService.getCtmPeopleFormFields(this.rxDefinitionNameService.getBundleId(e||"")).pipe((0,v.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(null)))),this.commonDataDictionary$]).pipe((0,v.map)(([e,t])=>{const i=[...t];return e&&i.unshift({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label"),children:e.fieldDefinitions.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.name}'`}))}),i}),(0,v.shareReplay)(1))}}class qa extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.OrganizationDataPageQuery"),this.injector=e}}qa.\u0275fac=function(e){return new(e||qa)(o["\u0275\u0275inject"](o.Injector))},qa.\u0275prov=o["\u0275\u0275defineInjectable"]({token:qa,factory:qa.\u0275fac,providedIn:"root"});class Xa extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.SupportOrganizationDataPageQuery"),this.injector=e}}Xa.\u0275fac=function(e){return new(e||Xa)(o["\u0275\u0275inject"](o.Injector))},Xa.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Xa,factory:Xa.\u0275fac,providedIn:"root"});class Ha extends l.RxModalClass{constructor(e,t,i,n,o,r,s,l,c,d,p,u){super(t,u),this.rxTreeService=e,this.activeModalRef=t,this.rxModalService=i,this.translateService=n,this.rxGlobalCacheService=o,this.rxRecordInstanceUtilsService=r,this.rxOrganizationDataPageService=s,this.rxSupportOrganizationDataPageService=l,this.rxApprovalConfigurationService=c,this.rxRecordDefinitionCacheService=d,this.rxRecordInstanceDataPageService=p,this.injector=u,this.approverTypes=[],this.selectedApproverSelection=[],this.selectedApprovers=[],this.selectedCompanies=[],this.selectedOrganizations=[],this.selectedDepartments=[],this.selectedSupportCompanies=[],this.selectedSupportOrganizations=[],this.selectedSupportGroups=[],this.loadingMore=!1,this.pageSize=50,this.loadedUsers=[],this.showLoadMoreButton=!0,this.treeWrap=a.TreeWrap.WrapAll,this.availableFields=[],this.availableFunctionRolesByApplication=[],this.shouldShowTree=!0,this.separatorArrow=" > ",this.companyLoaderFunc=this.companyLoader.bind(this),this.organizationLoaderFunc=this.organizationLoader.bind(this),this.departmentLoaderFunc=this.departmentLoader.bind(this),this.supportOrganizationLoaderFunc=this.supportOrganizationLoader.bind(this),this.supportGroupLoaderFunc=this.supportGroupLoader.bind(this)}isDirty(){return this.hasUserInteracted}ngOnInit(){super.ngOnInit(),this.loadUsers(),this.loadFunctionalRoles(),this.loadFieldIdentifyingApproversApprovers(),this.approverTypes=[{value:Ga.approverTypes.company,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label"),disabled:this.activeModalRef.getData().isFieldIdentifyingApprover},{value:Ga.approverTypes.fieldIdentifying,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.field.identifying")},{value:Ga.approverTypes.functionalRole,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.functional.roles"),disabled:this.activeModalRef.getData().isFieldIdentifyingApprover},{value:Ga.approverTypes.people,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label"),disabled:this.activeModalRef.getData().isFieldIdentifyingApprover},{value:Ga.approverTypes.supportCompany,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label"),disabled:this.activeModalRef.getData().isFieldIdentifyingApprover}],this.invalidMsg=this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.field.identifying.warning"),this.approverType=[(0,m.find)(this.approverTypes,{value:this.activeModalRef.getData().isFieldIdentifyingApprover?Ga.approverTypes.fieldIdentifying:Ga.approverTypes.functionalRole})]}switchApproversTree(){this.selectedCompanies=[],this.selectedOrganizations=[],this.selectedDepartments=[],this.selectedSupportCompanies=[],this.selectedSupportOrganizations=[],this.selectedSupportGroups=[],this.availableFunctionRolesByApplication.forEach(e=>{e.roles.map(e=>e.selected=!1)}),this.loadedUsers.map(e=>e.selected=!1),this.availableFields.map(e=>e.selected=!1)}companyLoader(e,t,i){const n={startIndex:e,pageSize:t,recorddefinition:"COM:Company",propertySelection:[Ga.approverFields.companyField]};return i&&(n.queryExpression=this.getAdditionalQueryExpression(i,Ga.approverFields.companyField)),this.rxRecordInstanceDataPageService.post({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,v.map)(e=>({totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e[Ga.approverFields.companyField],value:this.getCompanyDataFormat(e[Ga.approverFields.companyField])}))})))}getCompanyDataFormat(e){return`${Ga.approverFormatPrefixes.company}${Ga.levelSeparator}${e}`}onToggleDropdown(e){e||this.resetLoadedOptions()}resetLoadedOptions(){this.paginationComponents.toArray().forEach(e=>e.resetLoadedOptions())}organizationLoader(e,t,i){const n={startIndex:e,pageSize:t};return i?n.organization=i:n.queryExpression=this.getDefaultSearchExpression(),1===this.selectedCompanies.length&&(n.company=this.selectedCompanies[0].displayValue),this.rxOrganizationDataPageService.get({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,v.map)(e=>({totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e.organization,value:e.company}))})))}departmentLoader(e,t,i){const n={recorddefinition:"CTM:People Organization",propertySelection:[Ga.approverFields.companyField,Ga.approverFields.organizationField,Ga.approverFields.departmentField]},o=[];return i&&o.push(this.getAdditionalQueryExpression(i,Ga.approverFields.departmentField)),1===this.selectedCompanies.length&&o.push(this.getAdditionalQueryExpression(this.selectedCompanies[0].displayValue,Ga.approverFields.companyField,!0)),1===this.selectedOrganizations.length&&o.push(this.getAdditionalQueryExpression(this.selectedOrganizations[0].displayValue,Ga.approverFields.organizationField,!0)),n.queryExpression=o.join(" AND "),this.rxRecordInstanceDataPageService.post({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,v.map)(e=>({totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e[Ga.approverFields.departmentField],value:e[Ga.approverFields.companyField],organization:e[Ga.approverFields.organizationField]}))})))}supportOrganizationLoader(e,t,i){const n={startIndex:e,pageSize:t};return i?n.supportOrganization=i:n.queryExpression=this.getDefaultSearchExpression(),1===this.selectedSupportCompanies.length&&(n.company=this.selectedSupportCompanies[0].displayValue),this.rxSupportOrganizationDataPageService.get({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,v.map)(e=>({totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e.supportOrganization,value:e.company}))})))}supportGroupLoader(e,t,i){const n={recorddefinition:"CTM:Support Group",propertySelection:[Ga.approverFields.companyField,Ga.approverFields.supportOrgField,Ga.approverFields.supportGroupField]},o=[];return i&&o.push(this.getAdditionalQueryExpression(i,Ga.approverFields.supportGroupField)),1===this.selectedSupportCompanies.length&&o.push(this.getAdditionalQueryExpression(this.selectedSupportCompanies[0].displayValue,Ga.approverFields.companyField,!0)),1===this.selectedSupportOrganizations.length&&o.push(this.getAdditionalQueryExpression(this.selectedSupportOrganizations[0].displayValue,Ga.approverFields.supportOrgField,!0)),n.queryExpression=o.join(" AND "),this.rxRecordInstanceDataPageService.post({params:Object.assign({startIndex:e,pageSize:t},n)}).pipe((0,v.map)(e=>({totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e[Ga.approverFields.supportGroupField],value:e[Ga.approverFields.companyField],organization:e[Ga.approverFields.supportOrgField]}))})))}getAdditionalQueryExpression(e,t,i){return i?`('${t}' = "${e.replace(/"/g,'""')}")`:`('${t}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(e)}%")`}loadUsers(e){const t={recorddefinition:"CTM:People",propertySelection:[Ga.approverFields.firstName,Ga.approverFields.lastName,Ga.approverFields.remedyLoginId],sortBy:Ga.approverFields.firstName};this.startIndex=(0,m.isUndefined)(this.startIndex)?0:this.startIndex+this.pageSize,this.loadingMore=!0,(0,m.isUndefined)(e)||(this.startIndex=0,this.loadedUsers=[]),this.userSearchTextInput&&(t.queryExpression=this.getUserQueryExpression()),this.rxRecordInstanceDataPageService.post({params:Object.assign({pageSize:this.pageSize,startIndex:this.startIndex},t)}).subscribe(e=>{this.loadedUsers=this.loadedUsers.concat(e.data),this.showLoadMoreButton=e.totalSize>this.loadedUsers.length,this.loadingMore=!1})}getUserQueryExpression(){return this.userSearchTextInput?`('${Ga.approverFields.firstName}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%") OR ('${Ga.approverFields.lastName}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%") OR ('${Ga.approverFields.remedyLoginId}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%")`:null}loadFunctionalRoles(){(0,h.forkJoin)([this.rxApprovalConfigurationService.getFunctionalRoles(),this.rxGlobalCacheService.getBundleDescriptors()]).pipe((0,v.tap)(([e,t])=>{const i=this.translateService.instant("com.bmc.arsys.rx.client.common.global-items.label");this.addExistingApproversToSelectedTree(e),this.availableFunctionRolesByApplication=(0,m.flow)(e=>(0,m.map)(e,e=>{const n=(0,m.find)(t,{id:e.applicationName});return Object.assign(Object.assign({},e),{applicationName:(null==n?void 0:n.friendlyName)||(null==n?void 0:n.id)||i})}),e=>(0,m.groupBy)(e,"applicationName"),e=>(0,m.map)(e,(e,t)=>({applicationName:t,roles:(0,m.map)(e,e=>({id:e.id,name:e.name,selected:!1})).sort((e,t)=>e.name.localeCompare(t.name))})).sort((e,t)=>e.applicationName.localeCompare(t.applicationName)))(e)})).subscribe()}removeApproversFromSelection(){this.hasUserInteracted=!0,(0,m.forEach)(this.selectedApprovers,e=>{(0,m.remove)(e.children,e=>this.tree.first.isSelected(e))}),this.selectedApprovers=this.selectedApprovers.filter(e=>e.children.length),this.selectedApproverSelection=[],this.reloadTree()}getNode(e,t,i){return{label:e,key:t,data:i}}getFunctionalRoleDataFormat(e){return`${Ga.approverFormatPrefixes.functionalRole}${e}`}transformFunctionRolesToNodeStructure(){const e=[];return this.availableFunctionRolesByApplication.forEach(t=>t.roles.filter(e=>e.selected).forEach(t=>e.push(this.getNode(`${t.name}`,`${t.id}`,this.getFunctionalRoleDataFormat(t.id))))),e}transformFieldsToNodeStructure(){return this.availableFields.filter(e=>e.selected).map(e=>this.getNode(`${e.name}`,`${e.name}`,`$${e.name}$`))}getPeopleDataFormat(e){return`${Ga.approverFormatPrefixes.people}${e}`}transformPeopleToNodeStructure(){return this.loadedUsers.filter(e=>e.selected).map(e=>this.getNode(`${e[Ga.approverFields.firstName]} ${e[Ga.approverFields.lastName]}`,`${e[4]}`,this.getPeopleDataFormat(e[Ga.approverFields.remedyLoginId])))}getOrgDataFormat(e,t){return`${Ga.approverFormatPrefixes.companyOrg}${Ga.levelSeparator}${e}${Ga.levelSeparator}${t}`}getDeptDataFormat(e,t,i){return`${Ga.approverFormatPrefixes.companyOrgDept}${Ga.levelSeparator}${e}${Ga.levelSeparator}${t}${Ga.levelSeparator}${i}`}getSupportOrgDataFormat(e,t){return`${Ga.approverFormatPrefixes.supportCompanyOrg}${Ga.levelSeparator}${e}${Ga.levelSeparator}${t}`}getSupportGroupDataFormat(e,t,i){return`${Ga.approverFormatPrefixes.supportCompanyOrgGroup}${Ga.levelSeparator}${e}${Ga.levelSeparator}${t}${Ga.levelSeparator}${i}`}transformToNodeStructure(e){return e.map(e=>{let t="",i=`${e.displayValue} `;return this.shouldMoveCompanies()?t=e.value:this.shouldMoveOrganizations()?(t=this.getOrgDataFormat(e.value,e.displayValue),i+=`(${e.value})`):this.shouldMoveDepartments()?(t=this.getDeptDataFormat(e.value,e.organization,e.displayValue),i+=`(${e.value}${this.separatorArrow}${e.organization})`):this.shouldMoveSupportCompanies()?t=`${Ga.approverFormatPrefixes.supportCompany}${Ga.levelSeparator}${e.displayValue}`:this.shouldMoveSupportOrganizations()?(t=this.getSupportOrgDataFormat(e.value,e.displayValue),i+=`(${e.value})`):this.shouldMoveSupportGroups()&&(t=this.getSupportGroupDataFormat(e.value,e.organization,e.displayValue),i+=`(${e.value}${this.separatorArrow}${e.organization})`),this.getNode(i,e.displayValue,t)})}onCompanySelectionChange(){this.selectedOrganizations=[],this.selectedDepartments=[]}onOrganizationSelectionChange(){this.selectedDepartments=[]}onSupportCompanySelectionChange(){this.selectedSupportOrganizations=[],this.selectedSupportGroups=[]}onSupportOrganizationSelectionChange(){this.selectedSupportGroups=[]}shouldMoveCompanies(){return this.selectedCompanies.length&&!this.selectedOrganizations.length&&!this.selectedDepartments.length}shouldMoveOrganizations(){return this.selectedOrganizations.length&&this.selectedCompanies.length<=1&&!this.selectedDepartments.length}shouldMoveDepartments(){return this.selectedDepartments.length&&this.selectedCompanies.length<=1&&this.selectedOrganizations.length<=1}shouldMoveSupportCompanies(){return this.selectedSupportCompanies.length&&!this.selectedSupportOrganizations.length&&!this.selectedSupportGroups.length}shouldMoveSupportOrganizations(){return this.selectedSupportOrganizations.length&&this.selectedSupportCompanies.length<=1&&!this.selectedSupportGroups.length}shouldMoveSupportGroups(){return this.selectedSupportGroups.length&&this.selectedSupportCompanies.length<=1&&this.selectedSupportOrganizations.length<=1}setFieldIdentifyingApprovers(){this.selectedApprovers=[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.field.identifying"),type:Ga.approverTypes.fieldIdentifying,children:this.transformFieldsToNodeStructure(),expanded:!0}]}moveToSelectedApprovers(){let e=(0,m.find)(this.selectedApprovers,{type:this.approverType[0].value});this.isFieldIdentifyingSelection()?this.selectedApprovers.length&&!(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.fieldIdentifying})?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.field-identifying-select.warning")}).then(e=>{e&&this.setFieldIdentifyingApprovers()}):this.setFieldIdentifyingApprovers():this.isFunctionalRoleSelection()?e?e.children.push(...this.transformFunctionRolesToNodeStructure()):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.functional.roles"),type:Ga.approverTypes.functionalRole,children:this.transformFunctionRolesToNodeStructure(),expanded:!0}):this.isPeopleSelection()?e?e.children.push(...this.transformPeopleToNodeStructure()):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label"),type:Ga.approverTypes.people,children:this.transformPeopleToNodeStructure(),expanded:!0}):this.isCompanySelection()?this.shouldMoveCompanies()?e?e.children.push(...this.transformToNodeStructure(this.selectedCompanies)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label"),type:Ga.approverTypes.company,children:this.transformToNodeStructure(this.selectedCompanies),expanded:!0}):this.shouldMoveOrganizations()?(e=(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.org}),e?e.children.push(...this.transformToNodeStructure(this.selectedOrganizations)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label"),type:Ga.approverTypes.org,children:this.transformToNodeStructure(this.selectedOrganizations),expanded:!0})):this.shouldMoveDepartments()&&(e=(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.dept}),e?e.children.push(...this.transformToNodeStructure(this.selectedDepartments)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label"),type:Ga.approverTypes.dept,children:this.transformToNodeStructure(this.selectedDepartments),expanded:!0})):this.isSupportCompanySelection()&&(this.shouldMoveSupportCompanies()?(e=(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.company}),e?e.children.push(...this.transformToNodeStructure(this.selectedSupportCompanies)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label"),type:Ga.approverTypes.company,children:this.transformToNodeStructure(this.selectedSupportCompanies),expanded:!0})):this.shouldMoveSupportOrganizations()?(e=(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.supportOrg}),e?e.children.push(...this.transformToNodeStructure(this.selectedSupportOrganizations)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label"),type:Ga.approverTypes.supportOrg,children:this.transformToNodeStructure(this.selectedSupportOrganizations),expanded:!0})):this.shouldMoveSupportGroups()&&(e=(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.supportGroup}),e?e.children.push(...this.transformToNodeStructure(this.selectedSupportGroups)):this.selectedApprovers.push({label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label"),type:Ga.approverTypes.supportGroup,children:this.transformToNodeStructure(this.selectedSupportGroups),expanded:!0}))),this.isFieldIdentifyingSelection()||(0,m.remove)(this.selectedApprovers,{type:Ga.approverTypes.fieldIdentifying}),e&&(e.expanded=!0,e.children=(0,m.uniqBy)(e.children,"key")),this.selectedApprovers=this.selectedApprovers.filter(e=>e.children.length).map(e=>(e.children.sort((e,t)=>e.label.localeCompare(t.label)),e)),this.hasUserInteracted=!0,this.reloadTree()}reloadTree(){this.shouldShowTree=!1,setTimeout(()=>this.shouldShowTree=!0)}loadFieldIdentifyingApproversApprovers(){this.rxRecordDefinitionCacheService.getRecordDefinition(this.activeModalRef.getData().registeredRecordDefinitionName).subscribe(e=>this.availableFields=e.fieldDefinitions.map(e=>({name:e.name,selected:!1})).sort((e,t)=>e.name.localeCompare(t.name)))}noApproverSelected(){return this.isFieldIdentifyingSelection()&&!(0,m.some)(this.availableFields,e=>e.selected)||this.isPeopleSelection()&&!(0,m.some)(this.loadedUsers,e=>e.selected)||this.isFunctionalRoleSelection()&&!(0,m.some)(this.availableFunctionRolesByApplication,e=>(0,m.some)(e.roles,e=>e.selected))||Boolean(this.isCompanySelection()&&!this.selectedCompanies.length&&!this.selectedOrganizations.length&&!this.selectedDepartments.length)}isInvalidFieIdentifyingApprover(){return this.isFieldIdentifyingSelection()&&(0,m.sumBy)(this.availableFields,"selected")>1}optionFormatter(e){return e.displayValue}isFieldIdentifyingSelection(){return this.approverType[0].value===Ga.approverTypes.fieldIdentifying}isCompanySelection(){return this.approverType[0].value===Ga.approverTypes.company}isSupportCompanySelection(){return this.approverType[0].value===Ga.approverTypes.supportCompany}isPeopleSelection(){return this.approverType[0].value===Ga.approverTypes.people}isFunctionalRoleSelection(){return this.approverType[0].value===Ga.approverTypes.functionalRole}completeSelection(){const e=(0,m.flow)(e=>(0,m.map)(e,"children"),m.flatten,e=>(0,m.map)(e,e=>{let t="";return(this.rxApprovalConfigurationService.isCompanyOrg(e.data)||this.rxApprovalConfigurationService.isCompanyOrgDept(e.data)||this.rxApprovalConfigurationService.isSupportCompanyOrg(e.data)||this.rxApprovalConfigurationService.isSupportCompanyOrgGroup(e.data))&&(t=this.rxApprovalConfigurationService.getLastLabel(e.data)),{value:e.data,displayValue:t||e.label}}))(this.selectedApprovers),t={value:e.map(e=>e.value).join(Ga.approverSeparator),displayValue:(0,m.flow)(e=>(0,m.take)(e,10),e=>(0,m.map)(e,"displayValue"),e=>(0,m.join)(e,", "))(e)};e.length>10&&(t.displayValue+="..."),this.activeModalRef.close(t)}getEmptyApproverTree(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.functional.roles"),type:Ga.approverTypes.functionalRole,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label"),type:Ga.approverTypes.people,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label"),type:Ga.approverTypes.company,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label"),type:Ga.approverTypes.org,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label"),type:Ga.approverTypes.dept,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label"),type:Ga.approverTypes.supportCompany,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label"),type:Ga.approverTypes.supportGroup,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label"),type:Ga.approverTypes.supportOrg,children:[]},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.field.identifying"),type:Ga.approverTypes.fieldIdentifying,children:[]}]}addExistingApproversToSelectedTree(e){this.selectedApprovers=this.getEmptyApproverTree();const t=this.activeModalRef.getData().existingApprovers.split(Ga.approverSeparator);(0,m.forEach)(t,t=>{this.rxApprovalConfigurationService.isFieldIdentifyingApprover(t)?(this.approverType=[(0,m.find)(this.approverTypes,{value:Ga.approverTypes.fieldIdentifying})],this.selectedApprovers=[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.field.identifying"),type:Ga.approverTypes.fieldIdentifying,children:[{label:this.rxApprovalConfigurationService.getFieldIdentifyingApprover(t),key:this.rxApprovalConfigurationService.getFieldIdentifyingApprover(t),data:`$${this.rxApprovalConfigurationService.getFieldIdentifyingApprover(t)}$`}],expanded:!0}]):this.rxApprovalConfigurationService.isFunctionalRole(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.functionalRole}).children.push({key:this.rxApprovalConfigurationService.getFunctionalRoleGuid(t),data:this.getFunctionalRoleDataFormat(this.rxApprovalConfigurationService.getFunctionalRoleGuid(t)),label:(0,m.get)((0,m.find)(e,{id:this.rxApprovalConfigurationService.getFunctionalRoleGuid(t)}),"name")}):this.rxApprovalConfigurationService.isApproverPeople(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.people}).children.push({key:t.split(Ga.levelSeparator)[1],label:t.split(Ga.levelSeparator)[1],data:this.getPeopleDataFormat(t.split(Ga.levelSeparator)[1])}):this.rxApprovalConfigurationService.isCompany(t)||this.rxApprovalConfigurationService.isSupportCompany(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.company}).children.push({label:this.rxApprovalConfigurationService.getLastLabel(t),key:`${this.rxApprovalConfigurationService.getLastLabel(t)}`,data:this.getCompanyDataFormat(this.rxApprovalConfigurationService.getLastLabel(t))}):this.rxApprovalConfigurationService.isCompanyOrg(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.org}).children.push({label:`${this.rxApprovalConfigurationService.getLastLabel(t)}${this.getHierarchyLabel(t)}`,key:`${this.rxApprovalConfigurationService.getLastLabel(t)}`,data:this.getOrgDataFormat(t.split(Ga.levelSeparator)[1],t.split(Ga.levelSeparator)[2])}):this.rxApprovalConfigurationService.isCompanyOrgDept(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.dept}).children.push({label:`${this.rxApprovalConfigurationService.getLastLabel(t)}${this.getHierarchyLabel(t)}`,key:`${this.rxApprovalConfigurationService.getLastLabel(t)}`,data:this.getDeptDataFormat(t.split(Ga.levelSeparator)[1],t.split(Ga.levelSeparator)[2],t.split(Ga.levelSeparator)[3])}):this.rxApprovalConfigurationService.isSupportCompanyOrg(t)?(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.supportOrg}).children.push({label:`${this.rxApprovalConfigurationService.getLastLabel(t)}${this.getHierarchyLabel(t)}`,key:`${this.rxApprovalConfigurationService.getLastLabel(t)}`,data:this.getSupportOrgDataFormat(t.split(Ga.levelSeparator)[1],t.split(Ga.levelSeparator)[2])}):this.rxApprovalConfigurationService.isSupportCompanyOrgGroup(t)&&(0,m.find)(this.selectedApprovers,{type:Ga.approverTypes.supportGroup}).children.push({label:`${this.rxApprovalConfigurationService.getLastLabel(t)}${this.getHierarchyLabel(t)}`,key:`${this.rxApprovalConfigurationService.getLastLabel(t)}`,data:this.getSupportGroupDataFormat(t.split(Ga.levelSeparator)[1],t.split(Ga.levelSeparator)[2],t.split(Ga.levelSeparator)[3])})}),this.selectedApprovers=this.selectedApprovers.filter(e=>e.children.length).map(e=>(e.children.sort((e,t)=>e.label.localeCompare(t.label)),e))}getHierarchyLabel(e){const t=e.split(Ga.levelSeparator);return t.shift(),t.pop(),`(${t.join(this.separatorArrow)})`}close(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}getDefaultSearchExpression(){return`${Ga.approverFields.companyField} != NULL`}}Ha.\u0275fac=function(e){return new(e||Ha)(o["\u0275\u0275directiveInject"](g.RxTreeService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceUtilsService),o["\u0275\u0275directiveInject"](qa),o["\u0275\u0275directiveInject"](Xa),o["\u0275\u0275directiveInject"](za),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](o.Injector))},Ha.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ha,selectors:[["rx-flow-approvers-selector"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ce,5),o["\u0275\u0275viewQuery"](de,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.paginationComponents=e),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.tree=e)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:38,vars:32,consts:[[1,"approver-modal-body"],[3,"options"],[3,"config",4,"ngIf"],[1,"d-flex","h-100"],[1,"flex-wrapper","d-flex","flex-column","mh-100","wrapper-max-width"],[1,"mt-1","mb-4"],["rx-id","approver-type",1,"d-block","form-group","w-75",3,"ngModel","options","optionFormatter","ngModelChange","onSelectionChange"],[1,"flex-fill","available-list"],["class","border section-wrapper flex-fill h-100",4,"ngIf"],["class","available-list d-flex flex-column flex-fill h-100 border-top functional-roles border",4,"ngIf"],["class","available-list user-list h-100 border section-wrapper",4,"ngIf"],["class","available-list h-100 border field-identifying section-wrapper",4,"ngIf"],["type","button","adapt-button","","btn-type","secondary","rx-id","move-button",1,"d-icon-right-angle_right","form-group","move-button",3,"disabled","click"],[1,"flex-wrapper","d-flex","flex-column","mh-100"],["type","button","adapt-button","","btn-type","secondary","rx-id","remove-button",1,"d-icon-left-trash","form-group","align-self-start",3,"disabled","click"],[1,"card","available-list","flex-fill"],[1,"card-block"],["filter","true","selectionMode","checkbox",3,"value","selection","wrap","selectionChange",4,"ngIf"],["class","vertical-center",4,"ngIf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"],["optionTemplate",""],["orgOptionTemplate",""],[3,"config"],[1,"border","section-wrapper","flex-fill","h-100"],["isMultiSelectionMode","true",1,"form-group","d-block",3,"label","ngModel","optionLoader","ngModelChange","selectionChange"],["isMultiSelectionMode","true",1,"form-group","d-block",3,"label","ngModel","optionLoader","template","disabled","ngModelChange","selectionChange","toggleDropdown"],["paginationComponents",""],["isMultiSelectionMode","true",1,"form-group","d-block",3,"label","ngModel","optionLoader","template","disabled","ngModelChange","toggleDropdown"],[1,"available-list","d-flex","flex-column","flex-fill","h-100","border-top","functional-roles","border"],[3,"multiselect"],[3,"title","isOpen",4,"ngFor","ngForOf"],[3,"title","isOpen"],[3,"label","ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"label","ngModel","ngModelChange"],[1,"available-list","user-list","h-100","border","section-wrapper"],[1,"list-unstyled"],[1,"border-bottom-0","user-search-wrapper"],["placeholder","Filter",3,"ngModel","debounceTime","ngModelChange"],[4,"ngFor","ngForOf"],["class","py-0","type","button","adapt-button","","btn-type","tertiary","rx-id","load-more-button",3,"click",4,"ngIf"],["class","loader-container",4,"ngIf"],["type","button","adapt-button","","btn-type","tertiary","rx-id","load-more-button",1,"py-0",3,"click"],[1,"loader-container"],[1,"loader-inline"],[1,"ml-2"],[1,"available-list","h-100","border","field-identifying","section-wrapper"],["filter","true","selectionMode","checkbox",3,"value","selection","wrap","selectionChange"],["tree",""],[1,"vertical-center"],[1,"empty-state","empty-state--config"],[1,"empty-state__label"],[1,"text-secondary"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-busy-indicator",1),o["\u0275\u0275template"](2,ue,1,3,"adapt-alert",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"h5",5),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-select",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.approverType=e})("onSelectionChange",function(){return t.switchApproversTree()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275template"](10,me,9,19,"div",8),o["\u0275\u0275template"](11,he,9,19,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,ve,3,2,"div",9),o["\u0275\u0275template"](13,Ce,7,5,"div",10),o["\u0275\u0275template"](14,we,3,1,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"button",12),o["\u0275\u0275listener"]("click",function(){return t.moveToSelectedApprovers()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"h5",5),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"button",14),o["\u0275\u0275listener"]("click",function(){return t.removeApproversFromSelection()}),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",15),o["\u0275\u0275elementStart"](24,"div",16),o["\u0275\u0275template"](25,Ie,2,3,"adapt-tree",17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](26,_e,5,3,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"div",19),o["\u0275\u0275elementStart"](28,"button",20),o["\u0275\u0275listener"]("click",function(){return t.completeSelection()}),o["\u0275\u0275text"](29),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"button",21),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](32),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](34,De,4,2,"ng-template",null,22,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](36,Re,4,2,"ng-template",null,23,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](30,Ae,t.busy)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isInvalidFieIdentifyingApprover()),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,20,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.available.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.approverType)("options",t.approverTypes)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isCompanySelection()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSupportCompanySelection()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isFunctionalRoleSelection()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isPeopleSelection()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isFieldIdentifyingSelection()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",t.isInvalidFieIdentifyingApprover()||t.noApproverSelected()),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,22,"com.bmc.arsys.rx.client.approval.configuration.flow.approvers.selected.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.selectedApproverSelection.length),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](22,24,"com.bmc.arsys.rx.client.common.remove.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.selectedApprovers.length&&t.shouldShowTree),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.selectedApprovers.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.hasUserInteracted),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](30,26,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](33,28,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[l.RxBusyIndicatorComponent,n.NgIf,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent,a.AdaptAlertComponent,s.RxSelectWithPaginationComponent,a.AdaptAccordionComponent,n.NgForOf,a.AdaptAccordionTabComponent,a.AdaptRxCheckboxComponent,a.AdaptRxSearchComponent,a.AdaptTreeComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]  .checkbox{margin:0}[_nghost-%COMP%]  .dropdown-item{white-space:normal}.approver-modal-body[_ngcontent-%COMP%]{padding:15px;height:645px}.available-list[_ngcontent-%COMP%]{overflow:auto}.section-wrapper[_ngcontent-%COMP%]{padding:15px}.flex-wrapper[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}.vertical-center[_ngcontent-%COMP%]{position:absolute;margin:auto;top:0;bottom:0;left:20px;right:20px;height:130px}.move-button[_ngcontent-%COMP%]{margin:325px 20px auto}.wrapper-max-width[_ngcontent-%COMP%]{max-width:365px}.loader-container[_ngcontent-%COMP%]{padding:0 16px}.user-search-wrapper[_ngcontent-%COMP%]{padding-bottom:15px}.user-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .field-identifying[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}[_nghost-%COMP%]     adapt-rx-checkbox .checkbox__item{white-space:normal;word-break:break-all}[_nghost-%COMP%]     .functional-roles .adapt-accordion adapt-accordion-tab:last-child .card{border-bottom:0}[_nghost-%COMP%]     .functional-roles .adapt-accordion adapt-accordion-tab .card{border-left:0;border-right:0}']});class Wa{constructor(e,t,i,n,o,r,a){this.injector=e,this.errorHandler=t,this.rxModalService=i,this.translateService=n,this.rxNotificationService=o,this.rxExpressionEditorService=r,this.rxApprovalConfigurationService=a,this.allAvailableFlowGroups=[],this.signingCriteriaList=[{value:Ga.approverCriteria.oneMust,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.one-must-approve")},{value:Ga.approverCriteria.allMust,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.all-must-approve")},{value:Ga.approverCriteria.percentage,displayValue:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.percentage-must-approve")}],this.signingCriteriaPercentageList=Ga.signingCriteriaPercentageList,this.processOnApproveOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-approve-label"),definitionType:s.RxDefinitionPickerType.PublicProcess},this.processOnRejectOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-rejection-label"),definitionType:s.RxDefinitionPickerType.PublicProcess},this.processOnErrorOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-error-label"),definitionType:s.RxDefinitionPickerType.PublicProcess},this.existingFlowGroupNames=[],this.isSaveInProgress=!1,this.destroyed$=new h.ReplaySubject(1),this.deletedFlowGroups=[],this.selectedFlowGroup=this.getEmptyFlowGroup()}getEmptyFlowGroup(){return{flowGroup:null,approvalFlowConfigurationList:[]}}ngOnInit(){this.expressionConfigurator=new Ua(this.injector),this.expressionConfigurator.configureForProperty({propertyPath:Ga.flowQualificationProperty,dataDictionary$:this.expressionConfigurator.approvalExpressionDataDictionary(this.registeredRecordDefinitionName),operators:this.expressionConfigurator.getOperatorRowsByGroup(f.ExpressionOperatorGroup.All)}),this.flowQualificationOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.qualification"),dataDictionary$:this.expressionConfigurator.getDataDictionary(Ga.flowQualificationProperty),operators:this.expressionConfigurator.getOperators(Ga.flowQualificationProperty),isRequired:!0},this.expressionConfigurator.configureForProperty({propertyPath:Ga.approverQualificationProperty,dataDictionary$:this.expressionConfigurator.getCtmPeopleFormFields(this.registeredRecordDefinitionName),operators:this.expressionConfigurator.getOperatorRowsByGroup(f.ExpressionOperatorGroup.All)}),this.qualifyApproversOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.general.qualify-approvers.label"),dataDictionary$:this.expressionConfigurator.getDataDictionary(Ga.approverQualificationProperty),operators:this.expressionConfigurator.getOperators(Ga.approverQualificationProperty)},this.rxApprovalConfigurationService.getFunctionalRoles().pipe((0,v.tap)(e=>{this.availableFunctionalRoles=e}),(0,v.switchMap)(()=>this.getFlowGroups())).subscribe()}ngAfterViewInit(){this.approvalFlowsForm.form.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(()=>{this.approvalFlowsForm.dirty&&(this.selectedFlowGroup.isDirty=!0)})}getFlowGroups(){return this.existingFlowGroupNames=[],this.deletedFlowGroups=[],this.rxApprovalConfigurationService.getApprovalFlowConfigurations(this.registeredRecordDefinitionName).pipe((0,v.tap)(e=>{var t;this.allAvailableFlowGroups=e.approvalFlowGroupConfigurations,(null===(t=this.allAvailableFlowGroups)||void 0===t?void 0:t.length)&&(this.allAvailableFlowGroups=this.allAvailableFlowGroups.map(e=>(e.isDirty=!1,e.hasError=!1,this.existingFlowGroupNames.push(e.flowGroup),e.approvalFlowConfigurationList=this.refactorFlowsResponse(e.approvalFlowConfigurationList),e)).sort((e,t)=>e.flowGroup.localeCompare(t.flowGroup)),this.selectedFlowGroup=this.selectedFlowGroup.flowGroup?(0,m.find)(this.allAvailableFlowGroups,{flowGroup:this.selectedFlowGroup.flowGroup}):this.allAvailableFlowGroups[0],this.collapseAll(),this.isSaveInProgress=!1)}))}preparePayload(e){const t=(0,m.cloneDeep)((0,m.omit)(e,["isDirty","hasError"]));return t.approvalFlowConfigurationList=(0,m.map)(t.approvalFlowConfigurationList,e=>((e=Object.assign({},(0,m.omit)(e,["isOpen","hasError","approversDisplayValue","isFieldIdentifyingApprover","signingCriteriaList"]))).approvalFlowOutcomeMappingList=(0,m.reject)(e.approvalFlowOutcomeMappingList,e=>!e.processName),e.flowName=(0,m.trim)(e.flowName),e.signingCriteria=e.signingCriteria[0].value,e.approvalOverridePercentage=e.signingCriteria===Ga.approverCriteria.percentage?e.approvalOverridePercentage[0]:0,e.approvers&&!this.rxApprovalConfigurationService.isFieldIdentifyingApprover(e.approvers)&&(e.approvers='\\"'+e.approvers+'\\"'),e.approvers=e.approvers||Ga.noApproverProvided,e)),t}canSave(){return!this.isSaveInProgress&&(this.areFlowGroupsValid()&&this.isDirty()||!!this.deletedFlowGroups.length)}isDirty(){var e;return(0,m.some)(this.allAvailableFlowGroups,e=>e.isDirty)||Boolean(null===(e=this.dialogApi)||void 0===e?void 0:e.isDirty())||!!this.deletedFlowGroups.length}areFlowGroupsValid(){return!(0,m.some)(this.allAvailableFlowGroups,this.isInvalidFlowGroup)}isInvalidFlowGroup(e){return!e.approvalFlowConfigurationList.length||(0,m.some)(e.approvalFlowConfigurationList,e=>!e.flowName||!e.qualification||e.isLevelUp&&e.levels<1||e.hasError)}hasFlowGroups(){return this.selectedFlowGroup.flowGroup}isInvalidFlow(e){return!e.flowName||!e.qualification||e.isLevelUp&&e.levels<1||!e.isLevelUp&&!e.approvers&&!e.approverQualification}markInvalidSelectedGroupAndFlows(){this.selectedFlowGroup.approvalFlowConfigurationList.forEach(e=>{e.hasError=this.isInvalidFlow(e)}),this.selectedFlowGroup.hasError=!this.selectedFlowGroup.approvalFlowConfigurationList.length||(0,m.some)(this.selectedFlowGroup.approvalFlowConfigurationList,e=>e.hasError)}markInvalidGroupsAndFlows(){this.allAvailableFlowGroups.forEach(e=>{e.approvalFlowConfigurationList.forEach(e=>{e.hasError=this.isInvalidFlow(e)}),e.hasError=!e.approvalFlowConfigurationList.length||(0,m.some)(e.approvalFlowConfigurationList,e=>e.hasError)})}saveFlowGroups(){this.approvalFlowsForm.form.markAsPristine();let e=0,t=0,i=0,n=0,o=0,r=0;const a=[],s=[],l=this.deletedFlowGroups.map(e=>this.rxApprovalConfigurationService.deleteApprovalFlowGroup(e,this.registeredRecordDefinitionName).pipe((0,v.map)(()=>({status:"Success"})),(0,v.catchError)(e=>(0,h.of)({status:"Failed",error:e}))));this.allAvailableFlowGroups.forEach(e=>{if(e.isDirty){this.isSaveInProgress=!0;const t=this.preparePayload(e);this.isExistingFlowGroup(t.flowGroup)||t.flowGroupOldName?a.push(this.rxApprovalConfigurationService.updateApprovalFlowGroup(t.flowGroupOldName||t.flowGroup,(0,m.omit)(t,"flowGroupOldName"),this.registeredRecordDefinitionName).pipe((0,v.map)(()=>({status:"Success"})),(0,v.catchError)(e=>(0,h.of)({status:"Failed",error:e})))):s.push(this.rxApprovalConfigurationService.saveApprovalFlowGroup(t,this.registeredRecordDefinitionName).pipe((0,v.switchMap)(()=>this.rxApprovalConfigurationService.getApprovalFlowGroup(this.registeredRecordDefinitionName,t.flowGroup)),(0,v.tap)(e=>{this.existingFlowGroupNames.push(e.flowGroup);const t=(0,m.find)(this.allAvailableFlowGroups,{flowGroup:e.flowGroup});t.isDirty=!1,(0,m.forEach)(t.approvalFlowConfigurationList,(t,i)=>{t.approvalProcessId=e.approvalFlowConfigurationList[i].approvalProcessId,t.guid=e.approvalFlowConfigurationList[i].guid})}),(0,v.map)(()=>({status:"Success"})),(0,v.catchError)(e=>(0,h.of)({status:"Failed",error:e}))))}}),(0,h.forkJoin)({createRequests:(0,h.forkJoin)(s).pipe((0,v.defaultIfEmpty)([])),updateRequests:(0,h.forkJoin)(a).pipe((0,v.defaultIfEmpty)([])),deleteRequests:(0,h.forkJoin)(l).pipe((0,v.defaultIfEmpty)([]))}).pipe((0,v.tap)(a=>{let s="";const l=(0,m.flatten)((0,m.map)(a,e=>(0,m.filter)(e,{status:"Failed"})));e=(0,m.filter)(a.createRequests,{status:"Failed"}).length,t=(0,m.filter)(a.createRequests,{status:"Success"}).length,i=(0,m.filter)(a.updateRequests,{status:"Failed"}).length,n=(0,m.filter)(a.updateRequests,{status:"Success"}).length,o=(0,m.filter)(a.deleteRequests,{status:"Failed"}).length,r=(0,m.filter)(a.deleteRequests,{status:"Success"}).length,t&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.created",{count:t})}\n`),n&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.updated",{count:n})}\n`),r&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.deleted",{count:r})}\n`),e&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.create-failed",{count:e})}\n`),i&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.update-failed",{count:i})}\n`),o&&(s+=`${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.delete-failed",{count:o})}\n`),e||i||o?this.rxNotificationService.addWarningMessage(s):this.rxNotificationService.addSuccessMessage(s),(0,m.forEach)(l,e=>{this.errorHandler.handleError(e.error)})}),(0,v.filter)(()=>!(e||i||o)),(0,v.switchMap)(()=>this.getFlowGroups())).subscribe({complete:()=>{this.isSaveInProgress=!1}})}onKeyDownNew(e){"Enter"!==e.code||this.isAddNewFlowGroupButtonDisabled()||this.addNewFlowGroup()}addNewFlowGroup(){this.markInvalidSelectedGroupAndFlows(),this.adaptPopoverDirective.close(),this.allAvailableFlowGroups.push({flowGroup:(0,m.trim)(this.flowGroupName),hasError:!0,approvalFlowConfigurationList:[]}),this.allAvailableFlowGroups.sort((e,t)=>e.flowGroup.localeCompare(t.flowGroup)),this.selectedFlowGroup=(0,m.find)(this.allAvailableFlowGroups,{flowGroup:(0,m.trim)(this.flowGroupName)}),this.flowGroupName=null}onKeyDownRename(e,t){"Enter"===e.code&&this.renameFlowGroup(t)}renameFlowGroup(e){this.isExistingFlowGroup()?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.updatingGroupName")}).then(e=>{e&&(this.selectedFlowGroup.isDirty=!0,this.selectedFlowGroup.flowGroupOldName=this.selectedFlowGroup.flowGroup,this.selectedFlowGroup.flowGroup=(0,m.trim)(this.flowGroupNewName))}):(this.selectedFlowGroup.flowGroup=(0,m.trim)(this.flowGroupNewName),e.close())}deleteFlowGroup(){this.isExistingFlowGroup()?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.confirm")}).then(e=>{e&&(this.deletedFlowGroups.push(this.selectedFlowGroup.flowGroup),(0,m.remove)(this.allAvailableFlowGroups,{flowGroup:this.selectedFlowGroup.flowGroup}),this.setEmptyFlowGroup())}):this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.common.unsaved-data.message")}).then(e=>{e&&((0,m.remove)(this.allAvailableFlowGroups,{flowGroup:this.selectedFlowGroup.flowGroup}),this.setEmptyFlowGroup())})}setEmptyFlowGroup(){this.selectedFlowGroup=this.getEmptyFlowGroup()}onFlowQualificationEvent(e){this.selectFlowQualificationExpression(e)}selectFlowQualificationExpression(e){this.rxExpressionEditorService.openEditor({property:{path:Ga.flowQualificationProperty,value:this.selectedFlowGroup.approvalFlowConfigurationList[e].qualification,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.qualification")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]},e=>this.dialogApi=e).subscribe(t=>{this.dialogApi=null,this.approvalFlowsForm.form.markAsDirty(),this.selectedFlowGroup.approvalFlowConfigurationList[e].qualification=t.value})}onApproverQualificationEvent(e){this.selectApproverQualificationExpression(e)}selectApproverQualificationExpression(e){this.rxExpressionEditorService.openEditor({property:{path:Ga.approverQualificationProperty,value:this.selectedFlowGroup.approvalFlowConfigurationList[e].approverQualification,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.general.qualify-approvers.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]},e=>this.dialogApi=e).subscribe(t=>{this.dialogApi=null,this.approvalFlowsForm.form.markAsDirty(),this.selectedFlowGroup.approvalFlowConfigurationList[e].approverQualification=t.value,this.updateFlowErrorState(e)})}updateFlowErrorState(e){this.selectedFlowGroup.approvalFlowConfigurationList[e].hasError=Boolean(!this.selectedFlowGroup.approvalFlowConfigurationList[e].approverQualification&&!this.selectedFlowGroup.approvalFlowConfigurationList[e].approvers),this.selectedFlowGroup.hasError=(0,m.some)(this.selectedFlowGroup.approvalFlowConfigurationList,e=>e.hasError)}getFlowEmptyOutcomes(){return[{processName:null,action:"2",statusOutcome:"1"},{processName:null,action:"2",statusOutcome:"2"},{processName:null,action:"2",statusOutcome:"6"}]}getEmptyGeneralApprovalFlow(){return{isOpen:!0,hasError:!1,approvalProcessId:null,flowName:"",processType:null,qualification:null,formattedQualification:null,precedence:this.selectedFlowGroup.approvalFlowConfigurationList.length,signingCriteria:this.getCriteria(),signingCriteriaList:this.getFlowCriteriaList(),approvalOverridePercentage:50,isLevelUp:!1,levels:null,approvers:"",applyApproverExclusion:!0,approversDisplayValue:"",approverQualification:null,approvalFlowOutcomeMappingList:this.getFlowEmptyOutcomes()}}getCriteria(e){return[(0,m.find)(this.getFlowCriteriaList(),{value:e||Ga.approverCriteria.oneMust})]}getFlowCriteriaList(){return(0,m.cloneDeep)(this.signingCriteriaList)}addNewGeneralFlow(){this.collapseAll(),setTimeout(()=>{this.selectedFlowGroup.approvalFlowConfigurationList.push(this.getEmptyGeneralApprovalFlow())})}addNewLevelUpFlow(){this.collapseAll(),setTimeout(()=>{this.selectedFlowGroup.approvalFlowConfigurationList.push(Object.assign(Object.assign({},this.getEmptyGeneralApprovalFlow()),{isLevelUp:!0}))})}selectFlowGroup(e){this.selectedFlowGroup=(0,m.find)(this.allAvailableFlowGroups,{flowGroup:e}),this.selectedFlowGroup.isDirty||this.approvalFlowsForm.form.markAsPristine(),this.collapseAll(),this.markInvalidGroupsAndFlows()}onSelectedFlowDrop(e){this.moveFlow(e.previousIndex,e.currentIndex)}moveFlow(e,t){(0,w.moveItemInArray)(this.selectedFlowGroup.approvalFlowConfigurationList,e,t),this.resetFlowPrecedences()}moveFlowUp(e){(0,w.moveItemInArray)(this.selectedFlowGroup.approvalFlowConfigurationList,e,e-1),this.resetFlowPrecedences()}moveFlowDown(e){(0,w.moveItemInArray)(this.selectedFlowGroup.approvalFlowConfigurationList,e,e+1),this.resetFlowPrecedences()}removeFlow(e){this.selectedFlowGroup.approvalFlowConfigurationList.splice(e,1),this.markInvalidSelectedGroupAndFlows(),this.resetFlowPrecedences()}resetFlowPrecedences(){this.approvalFlowsForm.form.markAsDirty(),this.selectedFlowGroup.approvalFlowConfigurationList=this.selectedFlowGroup.approvalFlowConfigurationList.map((e,t)=>(e.precedence=t,e))}optionFormatter(e){return e.displayValue}refactorFlowsResponse(e){return(0,m.flow)(e=>(0,m.sortBy)(e,"precedence"),e=>(0,m.map)(e,e=>{e.isOpen=!1;const t=(0,m.cloneDeep)(e.approvalFlowOutcomeMappingList);return e.approvalFlowOutcomeMappingList[0]=(0,m.find)(t,{statusOutcome:"1"})||this.getFlowEmptyOutcomes()[0],e.approvalFlowOutcomeMappingList[1]=(0,m.find)(t,{statusOutcome:"2"})||this.getFlowEmptyOutcomes()[1],e.approvalFlowOutcomeMappingList[2]=(0,m.find)(t,{statusOutcome:"6"})||this.getFlowEmptyOutcomes()[2],e.approvers&&e.approvers!==Ga.noApproverProvided||(e.approvers=""),e.approvers=e.approvers.replace(/\\"/g,""),e.approversDisplayValue=this.getApproversDisplay(e),e.signingCriteriaList=this.getFlowCriteriaList(),e.approvalOverridePercentage=[e.approvalOverridePercentage],e.signingCriteria=[{value:e.signingCriteria,displayValue:this.getCriteria(e.signingCriteria)[0].displayValue}],e}))(e)}isExistingFlowGroup(e=null){return this.existingFlowGroupNames.includes(e||this.selectedFlowGroup.flowGroup)}isRenameFlowGroupButtonDisabled(){return(0,m.trim)(this.flowGroupNewName)!==this.selectedFlowGroup.flowGroup&&(0,m.some)(this.allAvailableFlowGroups,e=>e.flowGroup.toLowerCase()===(0,m.trim)(this.flowGroupNewName.toLowerCase()))}isAddNewFlowGroupButtonDisabled(){return!this.flowGroupName||(0,m.some)(this.allAvailableFlowGroups,e=>e.flowGroup.toLowerCase()===(0,m.trim)(this.flowGroupName.toLowerCase()))}expandAll(){this.selectedFlowGroup.approvalFlowConfigurationList.forEach(e=>e.isOpen=!0)}collapseAll(){this.selectedFlowGroup.approvalFlowConfigurationList.forEach(e=>e.isOpen=!1)}selectFlowApprovers(e){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow.select-approvers-dialog.title")+": "+this.selectedFlowGroup.approvalFlowConfigurationList[e].flowName,data:{registeredRecordDefinitionName:this.registeredRecordDefinitionName,existingApprovers:this.selectedFlowGroup.approvalFlowConfigurationList[e].approvers,isFieldIdentifyingApprover:this.selectedFlowGroup.approvalFlowConfigurationList[e].isFieldIdentifyingApprover,onApiReady:e=>{this.dialogApi=e}},content:Ha,size:S.OpenViewActionModalSize.Large}).then(t=>{this.dialogApi=null,this.approvalFlowsForm.form.markAsDirty(),this.selectedFlowGroup.approvalFlowConfigurationList[e].approvers=t.value,this.selectedFlowGroup.approvalFlowConfigurationList[e].approversDisplayValue=t.displayValue,this.manageApproverCriteriaOption(e),this.updateFlowErrorState(e),this.selectedFlowGroup.isDirty=!0}).catch(()=>{this.dialogApi=null})}manageApproverCriteriaOption(e){this.rxApprovalConfigurationService.isFieldIdentifyingApprover(this.selectedFlowGroup.approvalFlowConfigurationList[e].approvers)&&(this.selectedFlowGroup.approvalFlowConfigurationList[e].signingCriteria=this.getCriteria(),(0,m.find)(this.selectedFlowGroup.approvalFlowConfigurationList[e].signingCriteriaList,{value:Ga.approverCriteria.percentage}).disabled=!0)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}getApproversDisplay(e){const t=e.approvers.split(Ga.approverSeparator);return(0,m.map)(t,t=>(this.rxApprovalConfigurationService.isFieldIdentifyingApprover(e.approvers)?(e.isFieldIdentifyingApprover=!0,t=this.rxApprovalConfigurationService.getFieldIdentifyingApprover(t)):t=this.rxApprovalConfigurationService.isFunctionalRole(t)?(0,m.get)((0,m.find)(this.availableFunctionalRoles,{id:this.rxApprovalConfigurationService.getFunctionalRoleGuid(t)}),"name"):this.rxApprovalConfigurationService.isApproverPeople(t)?this.rxApprovalConfigurationService.getApproverUser(t):this.rxApprovalConfigurationService.getLastLabel(t),t)).filter(Boolean).join(", ")}getFlowName(e){return e.flowName||(e.isLevelUp?`[${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow-group.level-flow.new.default-value")}]`:`[${this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.flow-group.general-flow.new.default-value")}]`)}}Wa.\u0275fac=function(e){return new(e||Wa)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](o.ErrorHandler),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](s.RxExpressionEditorService),o["\u0275\u0275directiveInject"](za))},Wa.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Wa,selectors:[["rx-approval-flow-configuration"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](a.AdaptPopoverDirective,5),o["\u0275\u0275viewQuery"](Te,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.adaptPopoverDirective=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.approvalFlowsForm=e.first)}},inputs:{registeredRecordDefinitionName:"registeredRecordDefinitionName"},decls:53,vars:48,consts:[[1,"row","d-flex","h-100"],[1,"col-3","border-right","d-flex","flex-column","h-100"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-flow-group-button","maxWidth","365","autoClose","outside","appendToBody","true","placement","bottom-left","fallbackPlacement","bottom",1,"d-icon-plus_circle","px-0","align-self-start",3,"adaptPopover"],[1,"available-list","border","p-3","flex-fill"],["class","vertical-center",4,"ngIf"],["type","button","adapt-button","","btn-type","tertiary","rx-id","rename-flow-group-button","maxWidth","365","autoClose","outside","appendToBody","true","placement","bottom-left","fallbackPlacement","bottom",1,"d-icon-field_text","px-0","pt-0",3,"disabled","adaptPopover","shown"],["type","button","adapt-button","","btn-type","tertiary","rx-id","delete-flow-group-button",1,"d-icon-trash","pt-0",3,"disabled","click"],["rx-id","available-flow-groups",1,"d-block","form-group",3,"ngModel","ngModelChange"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"col-9","d-flex","flex-column","h-100"],[1,"d-flex","flex-column","h-100"],[1,"row"],[1,"col-12","col-sm-6"],[1,"d-inline-flex","align-items-center"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-general-flow-button",1,"d-icon-plus_circle","px-0",3,"disabled","click"],["placement","right","appendToBody","true",1,"d-icon-right-question_circle_o","ml-1","mr-4",3,"adaptPopover"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-level-flow-button",1,"d-icon-plus_circle","px-0",3,"disabled","click"],["placement","right","appendToBody","true",1,"d-icon-right-question_circle_o","ml-1",3,"adaptPopover"],[1,"col-12","col-sm-6","text-right"],["type","button","adapt-button","","btn-type","tertiary","rx-id","expand-button",3,"click",4,"ngIf"],["type","button","adapt-button","","btn-type","tertiary","rx-id","collapse-button",3,"click",4,"ngIf"],[3,"config",4,"ngIf"],[1,"vertical-center"],[3,"type","label",4,"ngIf"],["cdkDropList","",1,"designer-modal-accordion-wrapper","flex-fill","pt-0",3,"ngClass","cdkDropListDropped"],["approvalFlowsForm","ngForm"],[1,"flex-fill",3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData",4,"ngFor","ngForOf"],["newFlowGroupTemplate",""],["renameFlowGroupTemplate",""],[3,"type","label"],[1,"d-flex","align-items-center"],[1,"mb-0","mt-0","wrap-word",3,"value","label"],["class","ml-1 mb-1 d-icon-exclamation_triangle text-danger",4,"ngIf"],[1,"ml-1","mb-1","d-icon-exclamation_triangle","text-danger"],["type","button","adapt-button","","btn-type","tertiary","rx-id","expand-button",3,"click"],["type","button","adapt-button","","btn-type","tertiary","rx-id","collapse-button",3,"click"],[3,"config"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData"],["cdkDragHandle","",1,"d-icon-left-dots","designer-modal-drag-handle"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","d-icon-exclamation_triangle text-danger",4,"ngIf"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-angle_up","px-3","py-1",3,"disabled","click"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-angle_down","px-3","py-1",3,"disabled","click"],["adapt-button","","size","small","type","button",1,"d-icon-left-cross_adapt","p-1","pr-4",3,"click"],["rx-id","flow-name","required","true","maxlength","254",1,"form-group","d-block",3,"label","ngModel","autofocus","name","ngModelChange"],["adaptMin","1","class","form-group d-block","rx-id","flow-levels","required","true",3,"min","label","ngModel","name","ngModelChange",4,"ngIf"],["rx-id","flow-qualification",1,"d-block",3,"ngClass","options","ngModel","name","ngModelChange","events"],["rx-id","flow-approvers","class","form-group",4,"ngIf"],["class","d-block form-group","rx-id","approver-qualification",3,"options","ngModel","name","ngModelChange","events",4,"ngIf"],[1,"col-12","col-sm-6","form-group"],["class","d-block","rx-id","signing-criteria",3,"label","ngModel","options","optionFormatter","name","ngModelChange",4,"ngIf"],["class","d-block","rx-id","signing-criteria-percentage",3,"label","ngModel","options","name","ngModelChange",4,"ngIf"],[1,"my-1"],["class","row",4,"ngIf"],[1,"d-icon-exclamation_triangle","text-danger"],["adaptMin","1","rx-id","flow-levels","required","true",1,"form-group","d-block",3,"min","label","ngModel","name","ngModelChange"],["rx-id","flow-approvers",1,"form-group"],[1,"form-control-label"],["type","button","adapt-button","","btn-type","tertiary","rx-id","edit-button",1,"d-icon-pencil","px-1","ml-3","mb-1",3,"click"],["class","checkbox-inline ml-4",3,"label","ngModel","name","ngModelChange",4,"ngIf"],[1,"approver-list","bg-secondary","p-1"],[1,"checkbox-inline","ml-4",3,"label","ngModel","name","ngModelChange"],["rx-id","approver-qualification",1,"d-block","form-group",3,"options","ngModel","name","ngModelChange","events"],["rx-id","signing-criteria",1,"d-block",3,"label","ngModel","options","optionFormatter","name","ngModelChange"],["rx-id","signing-criteria-percentage",1,"d-block",3,"label","ngModel","options","name","ngModelChange"],["rx-id","process-on-approval",3,"options","ngModel","name","ngModelChange"],["rx-id","process-on-rejection",3,"options","ngModel","name","ngModelChange"],["rx-id","process-on-error",3,"options","ngModel","name","ngModelChange"],[1,"flow-group-template"],[1,"text-center","mb-3","font-weight-bold"],["rx-id","new-flow-button","required","true","maxlength","254",1,"mb-1","d-block",3,"label","ngModel","autofocus","ngModelChange","keydown"],["class","text-danger",4,"ngIf"],[1,"text-right","mt-5"],["type","button","adapt-button","","btn-type","primary","rx-id","add-button",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",1,"ml-2",3,"click"],[1,"text-danger"],["rx-id","rename-flow-button","required","true","maxlength","254",1,"mb-1","d-block",3,"label","ngModel","autofocus","ngModelChange","keydown"],["type","button","adapt-button","","btn-type","primary","rx-id","rename-button",3,"disabled","click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"h5"),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"button",2),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",3),o["\u0275\u0275template"](9,Fe,3,4,"div",4),o["\u0275\u0275elementStart"](10,"button",5),o["\u0275\u0275listener"]("shown",function(){return t.flowGroupNewName=t.selectedFlowGroup.flowGroup}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",6),o["\u0275\u0275listener"]("click",function(){return t.deleteFlowGroup()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"adapt-rx-radiobutton-group",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectFlowGroup(e)})("ngModelChange",function(e){return t.selectedFlowGroup.flowGroup=e}),o["\u0275\u0275template"](17,Me,3,3,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",9),o["\u0275\u0275elementStart"](19,"div",10),o["\u0275\u0275elementStart"](20,"h5"),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",11),o["\u0275\u0275elementStart"](25,"div",12),o["\u0275\u0275elementStart"](26,"div",13),o["\u0275\u0275elementStart"](27,"button",14),o["\u0275\u0275listener"]("click",function(){return t.addNewGeneralFlow()}),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](30,"span",15),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",13),o["\u0275\u0275elementStart"](33,"button",16),o["\u0275\u0275listener"]("click",function(){return t.addNewLevelUpFlow()}),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](36,"span",17),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](38,"div",18),o["\u0275\u0275template"](39,Oe,3,3,"button",19),o["\u0275\u0275template"](40,ke,3,3,"button",20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](41,je,2,5,"adapt-alert",21),o["\u0275\u0275elementStart"](42,"div",22),o["\u0275\u0275template"](43,Pe,2,4,"adapt-empty-state",23),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](44,"div",24),o["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedFlowDrop(e)}),o["\u0275\u0275elementStart"](45,"form",null,25),o["\u0275\u0275elementStart"](47,"adapt-accordion",26),o["\u0275\u0275template"](48,He,33,32,"div",27),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](49,Ye,14,16,"ng-template",null,28,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](51,Ke,11,13,"ng-template",null,29,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](50),i=o["\u0275\u0275reference"](52);o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,26,"com.bmc.arsys.rx.client.approval.configuration.flow.available-flow-groups.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",e),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,28,"com.bmc.arsys.rx.client.approval.configuration.flow.new.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!t.allAvailableFlowGroups.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",!t.selectedFlowGroup.flowGroup)("adaptPopover",i),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,30,"com.bmc.arsys.rx.client.common.rename.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.selectedFlowGroup.flowGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,32,"com.bmc.arsys.rx.client.common.delete.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.selectedFlowGroup.flowGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.allAvailableFlowGroups),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate2"](" ",o["\u0275\u0275pipeBind1"](22,34,"com.bmc.arsys.rx.client.approval.configuration.flow.selected-flow-group.title"),": ",t.selectedFlowGroup.flowGroup||o["\u0275\u0275pipeBind1"](23,36,"com.bmc.arsys.rx.client.common.none.label")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("disabled",!t.selectedFlowGroup.flowGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](29,38,"com.bmc.arsys.rx.client.approval.configuration.flow.general.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("adaptPopover",o["\u0275\u0275pipeBind1"](31,40,"com.bmc.arsys.rx.client.approval.configuration.flow.general.info")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.selectedFlowGroup.flowGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](35,42,"com.bmc.arsys.rx.client.approval.configuration.flow.level.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("adaptPopover",o["\u0275\u0275pipeBind1"](37,44,"com.bmc.arsys.rx.client.approval.configuration.flow.level.info")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.selectedFlowGroup.approvalFlowConfigurationList.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.selectedFlowGroup.approvalFlowConfigurationList.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.selectedFlowGroup.flowGroup&&!t.selectedFlowGroup.approvalFlowConfigurationList.length),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.selectedFlowGroup.flowGroup&&!t.selectedFlowGroup.approvalFlowConfigurationList.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](46,Je,t.selectedFlowGroup.approvalFlowConfigurationList.length)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.selectedFlowGroup.approvalFlowConfigurationList)}},directives:[a.AdaptButtonComponent,a.AdaptPopoverDirective,n.NgIf,a.AdaptRxRadiobuttonGroupComponent,r.NgControlStatus,r.NgModel,n.NgForOf,w.CdkDropList,n.NgClass,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptAccordionComponent,a.AdaptEmptyStateComponent,a.AdaptRxRadiobuttonComponent,a.AdaptAlertComponent,w.CdkDrag,w.CdkDragHandle,a.AdaptAccordionTabComponent,a.AdaptRxTextfieldComponent,r.RequiredValidator,r.MaxLengthValidator,s.ExpressionFormControlComponent,a.AdaptRxCounterComponent,a.AdaptMinValidatorDirective,a.AdaptRxCheckboxComponent,a.AdaptRxSelectComponent,s.RxDefinitionPickerComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}.accordion-wrapper[_ngcontent-%COMP%]{max-height:540px;overflow:auto}.available-list[_ngcontent-%COMP%]{overflow:auto}.vertical-center[_ngcontent-%COMP%]{position:absolute;margin:auto;top:0;bottom:0;left:20px;right:20px;height:130px}.flow-group-template[_ngcontent-%COMP%]{width:290px}.approver-list[_ngcontent-%COMP%]{min-height:28px}.wrap-word[_ngcontent-%COMP%]{word-break:break-all}.left-header-block[_ngcontent-%COMP%]   .d-icon-exclamation_triangle[_ngcontent-%COMP%]{margin-left:5px}']});class Ya{constructor(e,t,i){this.rxRecordGridUtilsService=e,this.rxRecordDefinitionCacheService=t,this.rxDefinitionNameService=i}getAssociatedRecordFields(e){return this.rxRecordGridUtilsService.getAssociationDescriptors(e).pipe((0,v.switchMap)(e=>e.length?(e.sort((e,t)=>e.label.localeCompare(t.label)),(0,h.forkJoin)(e.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,v.map)(t=>({fields:this.getFieldDefinitions(t.fieldDefinitions,e),label:e.label,isAssociatedRecord:!0,isExpanded:!1,value:e.associationDefinition.name,associationDescriptor:e})))))):(0,h.of)([])),(0,v.shareReplay)({bufferSize:1,refCount:!0}))}getRecordFields(e){return(0,h.forkJoin)([this.getAssociatedRecordFields(e),this.rxRecordDefinitionCacheService.getRecordDefinition(e)]).pipe((0,v.map)(([t,i])=>[{fields:this.getFieldDefinitions(i.fieldDefinitions,null),isExpanded:!0,isAssociatedRecord:!1,label:this.rxDefinitionNameService.getDisplayName(e),value:e},...t]),(0,v.shareReplay)({bufferSize:1,refCount:!0}))}getFieldDefinitions(e,t){return e.filter(e=>e.resourceType!==x.RX_RECORD_DEFINITION.resourceTypes.attachment).map(e=>{const i=t?this.getFieldIdExpression(e.id,t):e.name;return{label:e.name,value:i}}).sort((e,t)=>e.label.localeCompare(t.label))}getFieldIdExpression(e,t){return`recordContext._associations.${t.associationDefinition.guid}.${t.nodeSide}[0].${e}`}}Ya.\u0275fac=function(e){return new(e||Ya)(o["\u0275\u0275inject"](d.RxRecordGridUtilsService),o["\u0275\u0275inject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275inject"](f.RxDefinitionNameService))},Ya.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ya,factory:Ya.\u0275fac,providedIn:"root"});class Qa extends s.ValueAccessor{constructor(e,t,i,n,o,r,a,s){super(),this.rxDefinitionNameService=e,this.rxRecordGridUtilsService=t,this.rxRecordDefinitionCacheService=i,this.translateService=n,this.rxFieldDefinitionPickerService=o,this.rxStringService=r,this.rxObjectUtilsService=a,this.renderer=s,this.defaultText=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.filteredFieldsTree=[],this.searchText=""}ngOnChanges(e){var t;const i=null===(t=e.options.currentValue)||void 0===t?void 0:t.fieldsTree;(null==i?void 0:i.length)?this.filteredFieldsTree=this.rxObjectUtilsService.cloneDeep(i):this.filteredFieldsTree=[],this.updateFieldLabel()}setDropdownWidth(){const e=this.renderer.selectRootElement(this.dropdownButton.nativeElement,!0);this.dropdownWidth=e.clientWidth+2}selectField(e){this.dropdown.close(),this.label=e.label,this.value=e.value}clearFieldDefinition(e){e.stopPropagation(),this.reset()}reset(){this.label="",this.value=""}updateFieldLabel(){this.value?-1!==this.value.indexOf("associations")?this.initializeAssociatedFieldLabel().subscribe(e=>this.label=e):this.label=this.value:this.label=""}initializeAssociatedFieldLabel(){if(this.options.recordDefinitionName)return this.rxRecordDefinitionCacheService.getRecordDefinition(this.options.recordDefinitionName).pipe((0,v.mergeMap)(e=>this.rxRecordGridUtilsService.getFieldDefinition(this.value,e).pipe((0,v.map)(e=>e.name))))}filterFields(e){this.filteredFieldsTree=this.rxObjectUtilsService.cloneDeep(this.options.fieldsTree),e&&(this.filteredFieldsTree=this.filteredFieldsTree.map(t=>Object.assign(Object.assign({},t),{fields:t.fields.filter(t=>this.rxStringService.caseInsensitiveSearch(t.label,e))})).filter(e=>e.fields.length))}}Qa.\u0275fac=function(e){return new(e||Qa)(o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](d.RxRecordGridUtilsService),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](Ya),o["\u0275\u0275directiveInject"](g.RxStringService),o["\u0275\u0275directiveInject"](g.RxObjectUtilsService),o["\u0275\u0275directiveInject"](o.Renderer2))},Qa.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Qa,selectors:[["rx-field-definition-picker"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ze,7),o["\u0275\u0275viewQuery"](et,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dropdownButton=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dropdown=e.first)}},inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Qa,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"],o["\u0275\u0275NgOnChangesFeature"]],decls:15,vars:14,consts:[[1,"d-flex"],[3,"label","showRequiredLabel",4,"ngIf"],["class","d-icon-right-question_circle_o ml-2","placement","right","appendToBody","true",3,"adaptPopover",4,"ngIf"],["adaptDropdown","","appendToBody","true",1,"dropdown",3,"autoClose","autoFocusFirst"],["fieldDefinitionPicker","adaptDropdown"],["rx-id","toggle-button","adaptDropdownToggle","","type","button",1,"btn","btn-secondary",3,"disabled","click"],["dropdownButton",""],[1,"rx-selected-item","rx-ellipsis"],["rx-id","clear-button","class","d-icon-cross_adapt btn-link",3,"click",4,"ngIf"],["adaptDropdownMenu","",1,"dropdown-menu","p-0"],[1,"dropdown-header"],["debounceTime","250",1,"py-2",3,"ngModel","placeholder","ngModelChange"],["class","records",4,"ngIf"],[3,"label","showRequiredLabel"],["placement","right","appendToBody","true",1,"d-icon-right-question_circle_o","ml-2",3,"adaptPopover"],["rx-id","clear-button",1,"d-icon-cross_adapt","btn-link",3,"click"],[1,"records"],["class","record rx-ellipsis",3,"click",4,"ngFor","ngForOf"],[1,"record","rx-ellipsis",3,"click"],["rx-id","expand-button",1,"expand-arrow","d-icon-angle_right"],[1,"px-1",3,"ngClass"],["class","fields",4,"ngIf"],[1,"fields"],["class","dropdown-item rx-ellipsis","type","button",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item","rx-ellipsis",3,"click"],[3,"result","term"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,tt,1,2,"adapt-rx-control-label",1),o["\u0275\u0275template"](2,it,1,1,"span",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3,4),o["\u0275\u0275elementStart"](5,"button",5,6),o["\u0275\u0275listener"]("click",function(){return t.setDropdownWidth()}),o["\u0275\u0275elementStart"](7,"span",7),o["\u0275\u0275text"](8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,nt,1,0,"span",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",9),o["\u0275\u0275elementStart"](11,"div",10),o["\u0275\u0275elementStart"](12,"adapt-rx-search",11),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.searchText=e})("ngModelChange",function(e){return t.filterFields(e)}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](14,st,2,1,"ul",12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.options.label),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",null==t.options?null:t.options.tooltip),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("autoClose","outside")("autoFocusFirst",!1),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.options.recordDefinitionName),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](t.label||t.defaultText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.value&&!t.isDisabled),o["\u0275\u0275advance"](1),o["\u0275\u0275styleProp"]("width",t.dropdownWidth,"px"),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](13,12,"com.bmc.arsys.rx.client.common.filter-data.label")),o["\u0275\u0275property"]("ngModel",t.searchText),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.filteredFieldsTree.length))},directives:[n.NgIf,a.AdaptDropdownDirective,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective,a.AdaptRxSearchComponent,r.NgControlStatus,r.NgModel,a.AdaptRxControlLabelComponent,a.AdaptPopoverDirective,n.NgForOf,n.NgClass,a.AdaptHighlightDirective],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.dropdown-header[_ngcontent-%COMP%]{border-bottom:1px solid #d6d7d8;display:flex;align-items:center;padding:0 10px;width:100%;height:50px}adapt-rx-search[_ngcontent-%COMP%]{flex-grow:1;align-items:center;margin:0}.expand-arrow[_ngcontent-%COMP%]{padding:5px;transition:.2s}.expand-arrow.open[_ngcontent-%COMP%]{transform:rotate(90deg)}.records[_ngcontent-%COMP%]{overflow-y:auto;margin:0;list-style:none;padding:5px 0;width:100%;height:275px}.record[_ngcontent-%COMP%]{width:100%;padding:0 5px;line-height:30px;cursor:pointer}span[rx-id=clear-button][_ngcontent-%COMP%]{cursor:pointer;margin-right:5px}span[rx-id=clear-button][_ngcontent-%COMP%]:not(:hover){color:#313538}span[rx-id=expand-button][_ngcontent-%COMP%]{display:inline-flex;width:15px}.rx-selected-item[_ngcontent-%COMP%]{flex-grow:1}.dropdown-menu[_ngcontent-%COMP%]{height:330px}.dropdown-toggle[_ngcontent-%COMP%]{width:100%;display:flex;text-align:left}.dropdown-item[_ngcontent-%COMP%]{padding:0 15px 0 30px}']});class Ka{constructor(e,t,i,n,r,a,l,c,d,p){this.formBuilder=e,this.changeDetector=t,this.translateService=i,this.rxDefinitionNameService=n,this.rxApprovalConfigurationService=r,this.rxRecordDefinitionCacheService=a,this.rxRecordInstanceDataPageService=l,this.rxNotificationService=c,this.rxRecordGridUtilsService=d,this.rxFieldDefinitionPickerService=p,this.recordRegistered=new o.EventEmitter,this.recordRegistrationForm=this.createRecordRegistrationForm(),this.recordDefinitionSecurityLabels=[],this.fieldNames=[],this.isSaveInProgress=!1,this.alertConfig={content:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record-registration.info"),type:"inline",variant:"info"},this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.definition"),definitionType:s.RxDefinitionPickerType.PublicRegularDataRecord,required:!0,availableDefinitionPickerStates:{definitionButtonsGroups:[s.RxDefinitionPickerScope.Rx],search:s.RxDefinitionPickerScope.Rx}},this.permissionTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.permissions.tooltip")},this.justificationTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.approval.justification.tooltip")},this.recordDefinitionName$=new h.BehaviorSubject(""),this.fieldsTree$=this.recordDefinitionName$.pipe((0,v.switchMap)(e=>e?this.rxFieldDefinitionPickerService.getRecordFields(e):(0,h.of)([]))),this.requesterFieldDefinitionPickerOptions$=(0,h.combineLatest)([this.recordDefinitionName$,this.fieldsTree$]).pipe((0,v.map)(([e,t])=>({recordDefinitionName:e,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.requester"),required:!0,tooltip:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.requester.tooltip"),fieldsTree:t}))),this.approverExclusionFieldDefinitionPickerOptions$=(0,h.combineLatest)([this.recordDefinitionName$,this.fieldsTree$]).pipe((0,v.map)(([e,t])=>({recordDefinitionName:e,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.approver-exclusion.label"),required:!1,tooltip:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.approver-exclusion.tooltip"),fieldsTree:t}))),this.summaryFieldDefinitionPickerOptions$=(0,h.combineLatest)([this.recordDefinitionName$,this.fieldsTree$]).pipe((0,v.map)(([e,t])=>({recordDefinitionName:e,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.summary"),required:!0,fieldsTree:t}))),this.notesFieldDefinitionPickerOptions$=(0,h.combineLatest)([this.recordDefinitionName$,this.fieldsTree$]).pipe((0,v.map)(([e,t])=>({recordDefinitionName:e,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.notes"),required:!1,fieldsTree:t}))),this.fieldDefinitionPickerOptions$=(0,h.combineLatest)([this.recordDefinitionName$,this.fieldsTree$]).pipe((0,v.map)(([e,t])=>({recordDefinitionName:e,required:!1,fieldsTree:t}))),this.destroyed$=new h.ReplaySubject(1),this.isNewConfiguration=!0}ngOnInit(){this.isEditMode&&this.initializeRecordRegistrationForm(),this.recordRegistrationForm.get("recordDefinition").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.onRecordDefinitionChange(e)),this.recordRegistrationForm.get("field3Mapping.fieldID").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.onFieldMappingChange("field3Mapping.label",e)),this.recordRegistrationForm.get("field4Mapping.fieldID").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.onFieldMappingChange("field4Mapping.label",e)),this.recordRegistrationForm.get("field5Mapping.fieldID").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.onFieldMappingChange("field5Mapping.label",e)),this.recordRegistrationForm.get("field6Mapping.fieldID").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.onFieldMappingChange("field6Mapping.label",e))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}createRecordRegistrationForm(){return this.formBuilder.group({recordDefinition:["",r.Validators.required],summaryField:["",r.Validators.required],requestorField:["",r.Validators.required],approverExclusionField:null,permissionsFromSecurityLabels:[[],r.Validators.nullValidator],requestIDField:"",notesField:"",justificationFieldName:[[],r.Validators.nullValidator],justificationRequired:this.formBuilder.group({toApprove:!1,toReject:!1}),field3Mapping:this.formBuilder.group(this.createAdditionalField()),field4Mapping:this.formBuilder.group(this.createAdditionalField()),field5Mapping:this.formBuilder.group(this.createAdditionalField()),field6Mapping:this.formBuilder.group(this.createAdditionalField())})}initializeRecordRegistrationForm(){(0,h.forkJoin)([this.rxRecordDefinitionCacheService.getRecordDefinition(this.registeredRecordDefinitionName),this.rxApprovalConfigurationService.getRegisteredRecordDetails(this.registeredRecordDefinitionName)]).subscribe(([e,t])=>{this.isNewConfiguration=t.isNewConfiguration,this.recordDefinition=e,this.recordRegistrationForm.get("recordDefinition").setValue(t.recordDefinition),this.recordRegistrationForm.controls.recordDefinition.disable(),this.recordRegistrationForm.get("summaryField").setValue(t.summaryField),this.recordRegistrationForm.get("requestorField").setValue(t.requestorField),this.recordRegistrationForm.get("requestIDField").setValue(t.requestIDField),this.recordRegistrationForm.get("notesField").setValue(t.notesField),this.recordRegistrationForm.get("approverExclusionField").setValue(t.approverExclusionField),t.field3Mapping&&this.recordRegistrationForm.get("field3Mapping").setValue(t.field3Mapping),t.field4Mapping&&this.recordRegistrationForm.get("field4Mapping").setValue(t.field4Mapping),t.field5Mapping&&this.recordRegistrationForm.get("field5Mapping").setValue(t.field5Mapping),t.field6Mapping&&this.recordRegistrationForm.get("field6Mapping").setValue(t.field6Mapping),this.recordRegistrationForm.get("justificationFieldName").setValue(t.justificationFieldName?[t.justificationFieldName]:[]),this.recordRegistrationForm.get("permissionsFromSecurityLabels").setValue(this.getSecurityLabels(t)),this.recordRegistrationForm.get("justificationRequired").setValue({toApprove:t.justificationRequired===f.JustificationRequirement.RequiredForApprovalOrRejection||t.justificationRequired===f.JustificationRequirement.RequiredForApproval,toReject:t.justificationRequired===f.JustificationRequirement.RequiredForApprovalOrRejection||t.justificationRequired===f.JustificationRequirement.RequiredForRejection})})}getSecurityLabels(e){return e.permissionsFromSecurityLabels.map(e=>this.recordDefinition.securityLabels.find(t=>t.id===e))}createAdditionalField(){return{fieldID:"",label:""}}onFieldMappingChange(e,t){t&&!t.includes("recordContext._associations")?this.recordRegistrationForm.get(e).setValue(t):t?this.setAssociatedRecordFieldLabel(t,e):this.recordRegistrationForm.get(e).setValue("")}setAssociatedRecordFieldLabel(e,t){this.rxRecordGridUtilsService.getFieldDefinition(e,this.recordDefinition).subscribe(e=>{this.recordRegistrationForm.get(t).setValue(e.name)})}onRecordDefinitionChange(e){e!==this.recordRegistrationForm.value.recordDefinition&&(this.reset(),this.recordDefinitionName$.next(e),e&&this.rxRecordDefinitionCacheService.getRecordDefinition(e).subscribe(e=>{this.recordDefinition=e,this.initializeFormControls()}))}initializeFormControls(){this.recordDefinitionSecurityLabels=(0,m.cloneDeep)(this.recordDefinition.securityLabels),this.fieldNames=this.recordDefinition.fieldDefinitions?this.recordDefinition.fieldDefinitions.filter(e=>e.resourceType!==x.RX_RECORD_DEFINITION.resourceTypes.attachment).map(e=>(1===e.id&&this.recordRegistrationForm.get("requestIDField").setValue(e.name),e.name)):[]}optionFormatter(e){return e.name}justificationReasonOptionFormatter(e){return e.name}save(){this.isSaveInProgress=!0,this.isEditMode?this.updateRecordRegistration():this.saveRecordRegistration()}canSave(){return!this.isSaveInProgress&&this.recordRegistrationForm.valid&&this.recordRegistrationForm.dirty}isFormValid(){return this.recordRegistrationForm.valid}isFormDirty(){return this.recordRegistrationForm.dirty}saveRecordRegistration(){const e=this.transformFormControlData();e.isNewConfiguration=!0,this.rxRecordInstanceDataPageService.post({params:{recorddefinition:Ga.selfApproval.apForm.name}}).subscribe(t=>{(0,m.find)(t.data,t=>t[Ga.selfApproval.apForm.fields.formName]===e.recordDefinition)?(this.isSaveInProgress=!1,this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.register.duplicate"))):this.rxApprovalConfigurationService.registerRecord(e).pipe((0,v.finalize)(()=>{this.isSaveInProgress=!1})).subscribe(()=>{this.isEditMode=!0,this.recordRegistrationForm.controls.recordDefinition.disable(),this.recordRegistered.emit(e.recordDefinition),this.recordRegistrationForm.markAsPristine(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.register.success"))})})}updateRecordRegistration(){const e=this.transformFormControlData();e.isNewConfiguration=this.isNewConfiguration,e.recordDefinition=this.recordRegistrationForm.get("recordDefinition").value,this.rxApprovalConfigurationService.updateRecord(e).pipe((0,v.finalize)(()=>{this.isSaveInProgress=!1})).subscribe(()=>{this.isEditMode=!0,this.recordRegistrationForm.markAsPristine(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.update",{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(e.recordDefinition)}))})}transformFormControlData(){const e=(0,m.cloneDeep)(this.recordRegistrationForm.value);return e.justificationFieldName=e.justificationFieldName.length?e.justificationFieldName.join():null,e.permissionsFromSecurityLabels=e.permissionsFromSecurityLabels?e.permissionsFromSecurityLabels.map(e=>e.id):null,e.permissionsFromSecurityLabels||delete e.permissionsFromSecurityLabels,e.justificationFieldName||delete e.justificationFieldName,this.updateAdditionalFieldLabel(e.field3Mapping),this.updateAdditionalFieldLabel(e.field4Mapping),this.updateAdditionalFieldLabel(e.field5Mapping),this.updateAdditionalFieldLabel(e.field6Mapping),e.justificationRequired.toApprove&&e.justificationRequired.toReject?e.justificationRequired=f.JustificationRequirement.RequiredForApprovalOrRejection:e.justificationRequired.toApprove?e.justificationRequired=f.JustificationRequirement.RequiredForApproval:e.justificationRequired.toReject?e.justificationRequired=f.JustificationRequirement.RequiredForRejection:e.justificationRequired=f.JustificationRequirement.NotRequired,e}updateAdditionalFieldLabel(e){""===e.fieldID||e.fieldID.includes("recordContext._associations")||""!==e.label||(e.label=e.fieldID)}reset(){this.recordDefinitionSecurityLabels=[],this.fieldNames=[],this.recordRegistrationForm.get("summaryField").setValue(""),this.recordRegistrationForm.get("requestorField").setValue(""),this.recordRegistrationForm.get("approverExclusionField").setValue(""),this.recordRegistrationForm.get("permissionsFromSecurityLabels").setValue([]),this.recordRegistrationForm.get("justificationRequired").setValue({toApprove:!1,toReject:!1}),this.recordRegistrationForm.get("justificationFieldName").setValue([]),this.recordRegistrationForm.get("requestIDField").setValue(""),this.recordRegistrationForm.get("notesField").setValue(""),this.recordRegistrationForm.get("field3Mapping").setValue(this.createAdditionalField()),this.recordRegistrationForm.get("field4Mapping").setValue(this.createAdditionalField()),this.recordRegistrationForm.get("field5Mapping").setValue(this.createAdditionalField()),this.recordRegistrationForm.get("field6Mapping").setValue(this.createAdditionalField())}handleJustificationField(){!this.recordRegistrationForm.dirty||this.recordRegistrationForm.get("justificationRequired").value.toApprove||this.recordRegistrationForm.get("justificationRequired").value.toReject||this.recordRegistrationForm.get("justificationFieldName").setValue([])}}Ka.\u0275fac=function(e){return new(e||Ka)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](za),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](d.RxRecordGridUtilsService),o["\u0275\u0275directiveInject"](Ya))},Ka.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ka,selectors:[["rx-record-registration"]],inputs:{registeredRecordDefinitionName:"registeredRecordDefinitionName",isEditMode:"isEditMode"},outputs:{recordRegistered:"recordRegistered"},decls:67,vars:73,consts:[[3,"config"],[3,"formGroup"],[1,"row"],[1,"col-4","form-group"],["formControlName","recordDefinition","rx-id","definition-field","required","true",3,"options"],["formControlName","requestorField","rx-id","requester-id-field",3,"options"],["formControlName","approverExclusionField","rx-id","approver-exclusion-field",3,"options"],["name","permissionsFromSecurityLabels","formControlName","permissionsFromSecurityLabels","rx-id","permissions-field",3,"options","label","optionFormatter","multiple","selectAllButton","deselectAllButton","disabled","tooltip"],["rx-id","request-id-field","formControlName","requestIDField",3,"label","readonly","disabledStyleForReadonlyState"],["formControlName","summaryField","rx-id","summary-field",3,"options"],["formControlName","notesField","rx-id","notes-field",3,"options"],[3,"label"],["formGroupName","justificationRequired"],["formControlName","toApprove",1,"checkbox-inline",3,"label","disabled","ngModelChange"],["formControlName","toReject",1,"checkbox-inline",3,"label","disabled","ngModelChange"],["formControlName","justificationFieldName","name","justificationFieldName","enableFilter","true","closeOnSelect","true","rx-id","justification-reason-field",3,"options","emptyOption","label","selectAllButton","deselectAllButton","disabled","tooltip","required"],[1,"col-4"],["formGroupName","field3Mapping",1,"row"],["formControlName","fieldID","rx-id","field3-mapping-field",3,"options"],["formControlName","label","name","field3MappingLabel","adaptRequired","",3,"disabled"],["formGroupName","field4Mapping",1,"row"],["formControlName","fieldID","rx-id","field4-mapping-field",3,"options"],["formControlName","label","name","field4MappingLabel","adaptRequired","",3,"disabled"],["formGroupName","field5Mapping",1,"row"],["rx-id","field5-mapping-field","formControlName","fieldID",3,"options"],["formControlName","label","name","field5MappingLabel","adaptRequired","",3,"disabled"],["formGroupName","field6Mapping",1,"row"],["rx-id","field6-mapping-field","formControlName","fieldID",3,"options"],["formControlName","label","name","field6MappingLabel","adaptRequired","",3,"disabled"]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275element"](4,"rx-definition-picker",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275element"](6,"rx-field-definition-picker",5),o["\u0275\u0275pipe"](7,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",3),o["\u0275\u0275element"](9,"rx-field-definition-picker",6),o["\u0275\u0275pipe"](10,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",2),o["\u0275\u0275elementStart"](12,"div",3),o["\u0275\u0275element"](13,"adapt-rx-select",7),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",3),o["\u0275\u0275element"](16,"adapt-rx-textfield",8),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",3),o["\u0275\u0275element"](19,"rx-field-definition-picker",9),o["\u0275\u0275pipe"](20,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",2),o["\u0275\u0275elementStart"](22,"div",3),o["\u0275\u0275element"](23,"rx-field-definition-picker",10),o["\u0275\u0275pipe"](24,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](25,"div",3),o["\u0275\u0275element"](26,"adapt-rx-control-label",11),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275elementStart"](28,"div",12),o["\u0275\u0275elementStart"](29,"adapt-rx-checkbox",13),o["\u0275\u0275listener"]("ngModelChange",function(){return t.handleJustificationField()}),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"adapt-rx-checkbox",14),o["\u0275\u0275listener"]("ngModelChange",function(){return t.handleJustificationField()}),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"div",3),o["\u0275\u0275element"](34,"adapt-rx-select",15),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"div",2),o["\u0275\u0275elementStart"](37,"div",16),o["\u0275\u0275element"](38,"adapt-rx-control-label",11),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"div",16),o["\u0275\u0275element"](41,"adapt-rx-control-label",11),o["\u0275\u0275pipe"](42,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"div",17),o["\u0275\u0275elementStart"](44,"div",3),o["\u0275\u0275element"](45,"rx-field-definition-picker",18),o["\u0275\u0275pipe"](46,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](47,"div",3),o["\u0275\u0275element"](48,"adapt-rx-textfield",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",20),o["\u0275\u0275elementStart"](50,"div",3),o["\u0275\u0275element"](51,"rx-field-definition-picker",21),o["\u0275\u0275pipe"](52,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"div",3),o["\u0275\u0275element"](54,"adapt-rx-textfield",22),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](55,"div",23),o["\u0275\u0275elementStart"](56,"div",3),o["\u0275\u0275element"](57,"rx-field-definition-picker",24),o["\u0275\u0275pipe"](58,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](59,"div",3),o["\u0275\u0275element"](60,"adapt-rx-textfield",25),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](61,"div",26),o["\u0275\u0275elementStart"](62,"div",3),o["\u0275\u0275element"](63,"rx-field-definition-picker",27),o["\u0275\u0275pipe"](64,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](65,"div",3),o["\u0275\u0275element"](66,"adapt-rx-textfield",28),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("config",t.alertConfig),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.recordRegistrationForm),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",t.recordDefinitionPickerOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](7,41,t.requesterFieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](10,43,t.approverExclusionFieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,45,"com.bmc.arsys.rx.client.approval.configuration.record.permissions")),o["\u0275\u0275property"]("options",t.recordDefinitionSecurityLabels)("optionFormatter",t.optionFormatter)("multiple",!0)("selectAllButton",!0)("deselectAllButton",!0)("disabled",!t.recordDefinitionSecurityLabels.length)("tooltip",t.permissionTooltip),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](17,47,"com.bmc.arsys.rx.client.approval.console.detail.RequestId")),o["\u0275\u0275property"]("readonly",!0)("disabledStyleForReadonlyState",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](20,49,t.summaryFieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](24,51,t.notesFieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](27,53,"com.bmc.arsys.rx.client.approval.justification.require-on.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](30,55,"com.bmc.arsys.rx.client.approval.justification.require-on.approval.label")),o["\u0275\u0275property"]("disabled",!t.fieldNames.length),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](32,57,"com.bmc.arsys.rx.client.approval.justification.require-on.rejection.label")),o["\u0275\u0275property"]("disabled",!t.fieldNames.length),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](35,59,"com.bmc.arsys.rx.client.approval.justification-reason.label")),o["\u0275\u0275property"]("options",t.fieldNames)("emptyOption",!0)("selectAllButton",!0)("deselectAllButton",!0)("disabled",!t.fieldNames.length)("tooltip",t.justificationTooltip)("required",t.recordRegistrationForm.get("justificationRequired").value.toApprove||t.recordRegistrationForm.get("justificationRequired").value.toReject),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](39,61,"com.bmc.arsys.rx.client.approval.configuration.record.fields")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](42,63,"com.bmc.arsys.rx.client.approval.configuration.record.fields.labels")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](46,65,t.fieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.recordRegistrationForm.get("field3Mapping").get("fieldID").value),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](52,67,t.fieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.recordRegistrationForm.get("field4Mapping").get("fieldID").value),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](58,69,t.fieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.recordRegistrationForm.get("field5Mapping").get("fieldID").value),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](64,71,t.fieldDefinitionPickerOptions$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.recordRegistrationForm.get("field6Mapping").get("fieldID").value))},directives:[a.AdaptAlertComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,s.RxDefinitionPickerComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,Qa,a.AdaptRxSelectComponent,a.AdaptRxTextfieldComponent,a.AdaptRxControlLabelComponent,r.FormGroupName,a.AdaptRxCheckboxComponent],pipes:[n.AsyncPipe,u.TranslatePipe],encapsulation:2});class Ja extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.ApprovalMappingDataPage"),this.injector=e}}Ja.\u0275fac=function(e){return new(e||Ja)(o["\u0275\u0275inject"](o.Injector))},Ja.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ja,factory:Ja.\u0275fac,providedIn:"root"});class Za{constructor(e,t,i,n,o,r,a,s,l,c,d){this.injector=e,this.formBuilder=t,this.rxModalService=i,this.translateService=n,this.rxGlobalCacheService=o,this.rxNotificationService=r,this.rxDefinitionNameService=a,this.rxExpressionEditorService=s,this.rxApprovalConfigurationService=l,this.rxRecordDefinitionCacheService=c,this.rxApprovalMappingDataPageService=d,this.alertConfig={content:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.information"),type:"inline",variant:"info"},this.processOptions=[]}ngOnInit(){this.isUpdateButtonVisible=!1,this.expressionConfigurator=new Ua(this.injector),this.expressionConfigurator.configureForProperty({propertyPath:"approvalQualification",dataDictionary$:this.expressionConfigurator.approvalExpressionDataDictionary(this.registeredRecordDefinitionName),operators:this.expressionConfigurator.getOperatorRowsByGroup(f.ExpressionOperatorGroup.All)}),this.options={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.approval-qualification-field.label"),dataDictionary$:this.expressionConfigurator.getDataDictionary("approvalQualification"),operators:this.expressionConfigurator.getOperators("approvalQualification"),isRequired:!0},this.selfApprovalConfigurationForm=this.formBuilder.group({qualificationExpression:null,precedence:null,auditInformation:null,process:[]}),this.gridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.edit.label"),style:"tertiary",icon:"pencil",actions:[{name:this.setCurrentRecordValuesToForm.bind(this)}],disabled:()=>this.grid.api.getSelectedRowCount()>1},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:this.deleteConfiguration.bind(this)}]}],recordDefinitionName:Ga.selfApproval.mapping.name,enableRowSelection:d.RowSelectionMode.Multiple,getData:e=>this.getData(e),getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:this.getColumns(),styles:"flex-fill"}),this.grid.adaptTable.selectionChange.subscribe(()=>{this.isUpdateButtonVisible=!1,this.clearFormValues()}),this.loadProcesses()}getData(e){const t=Object.assign(Object.assign({},(0,m.omit)(e,["searchText"])),{[Ga.selfApproval.mapping.fields.recordDefinition]:this.registeredRecordDefinitionName});return this.rxApprovalMappingDataPageService.get({params:t})}loadProcesses(){this.loadingProcesses=!0;const e={recorddefinition:Ga.selfApproval.flowList.name,propertySelection:[Ga.selfApproval.flowList.fields.recordDefinition,Ga.selfApproval.flowList.fields.selfApprovalFlowName,Ga.selfApproval.flowList.fields.selfApprovalFlowProcessDefinitionGuid].join(",")};this.rxApprovalMappingDataPageService.get({params:e}).pipe((0,v.map)(e=>{const t=(0,m.chain)(e.data).filter({[Ga.selfApproval.flowList.fields.recordDefinition]:this.registeredRecordDefinitionName}).map(e=>{const t=this.rxDefinitionNameService.getBundleId(e[Ga.selfApproval.flowList.fields.selfApprovalFlowName]);return this.rxGlobalCacheService.getBundleFriendlyName(t).pipe((0,v.map)(e=>({id:t,friendlyName:e})))}).value();(0,h.forkJoin)(t).subscribe(t=>{this.processOptions=(0,m.chain)(e.data).filter({[Ga.selfApproval.flowList.fields.recordDefinition]:this.registeredRecordDefinitionName}).map(e=>({id:this.rxDefinitionNameService.getBundleId(e[Ga.selfApproval.flowList.fields.selfApprovalFlowName]),processGuid:e[Ga.selfApproval.flowList.fields.selfApprovalFlowProcessDefinitionGuid],value:e[Ga.selfApproval.flowList.fields.selfApprovalFlowName],displayValue:this.rxDefinitionNameService.getDisplayName(e[Ga.selfApproval.flowList.fields.selfApprovalFlowName])})).groupBy("id").map((e,i)=>({name:(0,m.find)(t,{id:i}).friendlyName,children:(0,m.map)(e,e=>({value:e.value,displayValue:e.displayValue,processGuid:e.processGuid}))})).value()},()=>{},()=>this.loadingProcesses=!1)})).subscribe()}onEvent(){this.selectApprovalQualificationExpression()}selectApprovalQualificationExpression(){this.rxExpressionEditorService.openEditor({property:{path:"approvalQualification",value:this.selfApprovalConfigurationForm.value.qualificationExpression,label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.approval-qualification-field.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]},e=>this.dialogApi=e).subscribe(e=>{this.dialogApi=null,this.selfApprovalConfigurationForm.get("qualificationExpression").setValue(e.value),this.selfApprovalConfigurationForm.get("qualificationExpression").markAsDirty()})}createSelfApprovalConfiguration(){this.selfApprovalConfigurationForm.markAsPristine();const e=this.getSelfApprovalConfiguration();this.rxApprovalConfigurationService.createSelfApprovalConfiguration(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-saved.message")),this.clearFormValues(),this.grid.api.refresh().subscribe()})}updateSelfApprovalConfiguration(){this.selfApprovalConfigurationForm.markAsPristine();const e=this.getSelfApprovalConfiguration();e.id=this.grid.api.getFirstSelectedRow()[x.RX_RECORD_DEFINITION.coreFieldIds.id],this.rxApprovalConfigurationService.updateSelfApprovalConfiguration(this.grid.api.getFirstSelectedRow()[x.RX_RECORD_DEFINITION.coreFieldIds.id],e).subscribe(()=>{this.clearFormValues(),this.isUpdateButtonVisible=!1,this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-updated.message")),this.grid.api.refresh().subscribe()})}getSelfApprovalConfiguration(){const e=(0,m.get)(this.selfApprovalConfigurationForm.get("process").value,"[0]",{});return{auditText:this.selfApprovalConfigurationForm.value.auditInformation,precedence:this.selfApprovalConfigurationForm.value.precedence,qualification:this.selfApprovalConfigurationForm.value.qualificationExpression,description:this.registeredRecordDefinitionName,recordDefinition:this.registeredRecordDefinitionName,approvalFlowName:e.value||"",approvalFlowProcessDefinitionGUID:e.processGuid||"",approvalMappingRecordDefinition:Ga.selfApproval.mapping.name}}setCurrentRecordValuesToForm(){this.isUpdateButtonVisible=!0;const e=this.grid.api.getFirstSelectedRow();this.selfApprovalConfigurationForm.get("qualificationExpression").setValue(e[Ga.selfApproval.mapping.fields.qualification]),this.selfApprovalConfigurationForm.get("precedence").setValue(e[Ga.selfApproval.mapping.fields.precedence]),this.selfApprovalConfigurationForm.get("auditInformation").setValue(e[Ga.selfApproval.mapping.fields.auditInformation]);const t=e[Ga.selfApproval.mapping.fields.approvalFlowName]?[{value:e[Ga.selfApproval.mapping.fields.approvalFlowName],displayValue:this.rxDefinitionNameService.getDisplayName(e[Ga.selfApproval.mapping.fields.approvalFlowName])}]:[];this.selfApprovalConfigurationForm.get("process").setValue(t)}deleteConfiguration(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-delete-confirmation.message")}).then(e=>{if(e){const e=this.grid.api.getSelectedRows().map(e=>this.rxApprovalConfigurationService.deleteSelfApprovalConfiguration(e[x.RX_RECORD_DEFINITION.coreFieldIds.id]));(0,h.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-deleted.message")),this.clearFormValues(),this.isUpdateButtonVisible=!1,this.grid.api.refresh().subscribe()})}})}clearFormValues(){this.selfApprovalConfigurationForm.reset(),this.selfApprovalConfigurationForm.get("process").setValue([])}optionFormatter(e){return e.displayValue}getRecordDefinition(){return{fieldDefinitions:[{id:Ga.selfApproval.mapping.fields.hiddenQualification,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.mapping.fields.precedence,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.integer},{id:Ga.selfApproval.mapping.fields.auditInformation,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.mapping.fields.approvalFlowName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.mapping.fields.qualification,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.mapping.fields.recordDefinition,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.mapping.fields.approvalFlowGuid,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]}}getColumns(){return[{index:0,fieldId:String(Ga.selfApproval.mapping.fields.hiddenQualification),sortable:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.approvalExpression")},{index:1,fieldId:String(Ga.selfApproval.mapping.fields.precedence),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.precedence")},{index:2,fieldId:String(Ga.selfApproval.mapping.fields.auditInformation),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.auditInformation")},{index:3,fieldId:String(Ga.selfApproval.mapping.fields.approvalFlowName),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.processFlow")},{index:4,fieldId:String(Ga.selfApproval.mapping.fields.qualification),visible:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.expressionValue")},{index:5,fieldId:String(Ga.selfApproval.mapping.fields.recordDefinition),visible:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.recordDefinition"),cellTemplate:this.definitionNameCellTemplate},{index:6,fieldId:String(Ga.selfApproval.mapping.fields.approvalFlowGuid),visible:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.processFlowGUID")},{index:7,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),visible:!1,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.id")}]}isDirty(){var e;return this.selfApprovalConfigurationForm.dirty||Boolean(null===(e=this.dialogApi)||void 0===e?void 0:e.isDirty())}}Za.\u0275fac=function(e){return new(e||Za)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](s.RxExpressionEditorService),o["\u0275\u0275directiveInject"](za),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](Ja))},Za.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Za,selectors:[["rx-self-approval-configuration"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](lt,7),o["\u0275\u0275viewQuery"](ct,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},inputs:{registeredRecordDefinitionName:"registeredRecordDefinitionName"},decls:25,vars:26,consts:[[3,"config"],[3,"formGroup"],["formControlName","qualificationExpression","required","true",1,"d-block","form-group",3,"options","events"],[1,"row"],[1,"col-md-4","col-12"],[1,"col-12","form-group"],["rx-id","precedence","required","true","formControlName","precedence",3,"label"],["rx-id","process","formControlName","process","enableFilter","true","emptyOption","true",1,"d-block",3,"label","options","optionFormatter","loadingState"],[1,"col-md-8","col-12","form-group"],["formControlName","auditInformation","rx-id","audit-information","required","true","rows","5",3,"label"],["type","button","adapt-button","","btn-type","primary","rx-id","add-button","size","small",1,"d-icon-plus_adapt","form-group",3,"hidden","disabled","click"],["type","button","adapt-button","","btn-type","primary","rx-id","update-button","size","small",1,"form-group",3,"hidden","disabled","click"],["grid",""],["definitionNameCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275element"](0,"adapt-alert",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275elementStart"](2,"rx-expression-form-control",2),o["\u0275\u0275listener"]("events",function(){return t.onEvent()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"div",5),o["\u0275\u0275element"](7,"adapt-rx-counter",6),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",5),o["\u0275\u0275element"](10,"adapt-rx-select",7),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",8),o["\u0275\u0275element"](13,"adapt-rx-textarea",9),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"button",10),o["\u0275\u0275listener"]("click",function(){return t.createSelfApprovalConfiguration()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",11),o["\u0275\u0275listener"]("click",function(){return t.updateSelfApprovalConfiguration()}),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](21,"rx-record-grid",0,12),o["\u0275\u0275template"](23,dt,2,3,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("config",t.alertConfig),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.selfApprovalConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",t.options),o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,16,"com.bmc.arsys.rx.client.approval.configuration.precedence")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,18,"com.bmc.arsys.rx.client.approval.configuration.selfApproval.process")),o["\u0275\u0275property"]("options",t.processOptions)("optionFormatter",t.optionFormatter)("loadingState",t.loadingProcesses),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,20,"com.bmc.arsys.rx.client.approval.configuration.auditInformation")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",t.isUpdateButtonVisible)("disabled",t.selfApprovalConfigurationForm.pristine||t.selfApprovalConfigurationForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,22,"com.bmc.arsys.rx.client.common.add.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("hidden",!t.isUpdateButtonVisible)("disabled",t.selfApprovalConfigurationForm.pristine||t.selfApprovalConfigurationForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,24,"com.bmc.arsys.rx.client.approval.update.button.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig))},directives:[a.AdaptAlertComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,s.ExpressionFormControlComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptRxCounterComponent,a.AdaptRxSelectComponent,a.AdaptRxTextareaComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe,f.RxDefinitionNamePipe],styles:["rx-record-grid[_ngcontent-%COMP%]{height:262px}[_nghost-%COMP%]  rx-expression-form-control button{height:2rem}"]});class es extends l.RxModalClass{constructor(e,t,i,n){super(i,n),this.translateService=e,this.rxNotificationService=t,this.activeModalRef=i,this.injector=n,this.activatedTabs=[!0,!1,!1],this.selectedRecordDefinition=this.activeModalRef.getData().selectedRecordDefinition,this.editMode=this.activeModalRef.getData().editMode}isDirty(){var e,t,i;return(null===(e=this.recordRegistrationComponent)||void 0===e?void 0:e.isFormDirty())||(null===(t=this.approvalFlowConfigurationComponent)||void 0===t?void 0:t.isDirty())||(null===(i=this.selfApprovalConfigurationComponent)||void 0===i?void 0:i.isDirty())}onRecordRegistered(e){this.editMode=!0,this.selectedRecordDefinition=e}isSaveButtonDisabled(){var e,t,i;return this.editMode?!(null===(e=this.recordRegistrationComponent)||void 0===e?void 0:e.canSave())&&!(null===(t=this.approvalFlowConfigurationComponent)||void 0===t?void 0:t.canSave()):!(null===(i=this.recordRegistrationComponent)||void 0===i?void 0:i.canSave())}saveApprovalConfiguration(){var e,t,i,n,o,r,a,s;(null===(e=this.recordRegistrationComponent)||void 0===e?void 0:e.isFormDirty())&&(null===(t=this.recordRegistrationComponent)||void 0===t?void 0:t.isFormValid())?this.recordRegistrationComponent.save():(null===(i=this.recordRegistrationComponent)||void 0===i?void 0:i.isFormDirty())&&!(null===(n=this.recordRegistrationComponent)||void 0===n?void 0:n.isFormValid())&&(this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.validation.error")),this.tabSetComponent.setActiveTab(0,!0,null)),this.editMode&&(null===(o=this.approvalFlowConfigurationComponent)||void 0===o?void 0:o.canSave())&&(null===(r=this.approvalFlowConfigurationComponent)||void 0===r||r.markInvalidGroupsAndFlows(),(null===(a=this.approvalFlowConfigurationComponent)||void 0===a?void 0:a.areFlowGroupsValid())?this.approvalFlowConfigurationComponent.saveFlowGroups():(null===(s=this.approvalFlowConfigurationComponent)||void 0===s?void 0:s.hasFlowGroups())&&(this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.message.validation.error")),this.tabSetComponent.setActiveTab(2,!0,null)))}closeModal(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}}es.\u0275fac=function(e){return new(e||es)(o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},es.\u0275cmp=o["\u0275\u0275defineComponent"]({type:es,selectors:[["rx-approval-configuration-editor"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Wa,5),o["\u0275\u0275viewQuery"](Ka,5),o["\u0275\u0275viewQuery"](Za,5),o["\u0275\u0275viewQuery"](pt,5)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.approvalFlowConfigurationComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordRegistrationComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.selfApprovalConfigurationComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.tabSetComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:23,consts:[[1,"designer-modal-body","d-flex","mh-100","flex-column"],[3,"fullHeight","tab-active-changed"],["tabSetComponent",""],[3,"adapt-tab-title"],[3,"registeredRecordDefinitionName","isEditMode","recordRegistered"],[3,"adapt-tab-title","disabled"],[3,"registeredRecordDefinitionName",4,"ngIf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",3,"click"],[3,"registeredRecordDefinitionName"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"adapt-tabset",1,2),o["\u0275\u0275listener"]("tab-active-changed",function(e){return t.activatedTabs[e.index]=!0}),o["\u0275\u0275elementStart"](3,"adapt-tab-panel",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"rx-record-registration",4),o["\u0275\u0275listener"]("recordRegistered",function(e){return t.onRecordRegistered(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-tab-panel",5),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275template"](8,ut,1,1,"rx-self-approval-configuration",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"adapt-tab-panel",5),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275template"](11,mt,1,1,"rx-approval-flow-configuration",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275elementStart"](13,"button",8),o["\u0275\u0275listener"]("click",function(){return t.saveApprovalConfiguration()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"button",9),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("fullHeight",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](4,13,"com.bmc.arsys.rx.client.approval.configuration.tab.registration")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("registeredRecordDefinitionName",t.selectedRecordDefinition)("isEditMode",t.editMode),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](7,15,"com.bmc.arsys.rx.client.approval.configuration.tab.selfApproval")),o["\u0275\u0275property"]("disabled",!t.editMode),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.editMode&&t.activatedTabs[1]),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](10,17,"com.bmc.arsys.rx.client.approval.configuration.tab.approvalFlows")),o["\u0275\u0275property"]("disabled",!t.editMode),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.editMode&&t.activatedTabs[2]),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,19,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,21,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[a.AdaptTabsComponent,a.AdaptTabsPanelComponent,Ka,n.NgIf,a.AdaptButtonComponent,Za,Wa],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}']});class ts extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.RecordDefinitionRegistrationDataPageQuery"),this.injector=e}}ts.\u0275fac=function(e){return new(e||ts)(o["\u0275\u0275inject"](o.Injector))},ts.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ts,factory:ts.\u0275fac,providedIn:"root"});class is{transform(e,t){return(null==t?void 0:t[e])||e}}is.\u0275fac=function(e){return new(e||is)},is.\u0275pipe=o["\u0275\u0275definePipe"]({name:"rxAssociatedRecordFieldNamePipe",type:is,pure:!0});class ns{constructor(e,t,i,n,o,r){this.rxModalService=e,this.translateService=t,this.adaptModalService=i,this.rxNotificationService=n,this.rxApprovalConfigurationService=o,this.rxRecordDefinitionRegistrationDataPageService=r}ngOnInit(){this.gridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.de-register.button.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.unregisterRecord()}}]}],recordDefinitionName:Ga.selfApproval.apForm.name,filterExpression:"('61001'!=$NULL$ AND '61001'!=\"\" AND ('14860' != $NULL$ AND '14860' = 1 ))",getData:e=>this.getData(e),enableRowSelection:d.RowSelectionMode.Single,getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:this.getColumns(),styles:"flex-fill",enableFiltering:!1})}getData(e){return delete e.searchText,e.pageSize=-1,this.rxRecordDefinitionRegistrationDataPageService.get({params:e})}newApprovalConfiguration(){this.openApprovalConfiguration({editMode:!1,selectedRecordDefinition:""})}editApprovalConfiguration(e){this.openApprovalConfiguration({editMode:!0,selectedRecordDefinition:e[Ga.selfApproval.apForm.fields.formName]})}openApprovalConfiguration(e){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.main.title"),content:es,size:S.OpenViewActionModalSize.Large,data:Object.assign({},e)}).then(()=>{},()=>{this.grid.api.refresh().subscribe()}).catch(()=>{})}unregisterRecord(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.de-register.warning")}).then(e=>{e&&this.rxApprovalConfigurationService.unRegisterRecord(this.grid.api.getFirstSelectedRow()[Ga.selfApproval.apForm.fields.formName]).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.record.de-register.success")),this.grid.api.refresh().subscribe()})})}getRecordDefinition(){return{fieldDefinitions:[{id:Ga.selfApproval.apForm.fields.formName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.formRequestId,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.requester,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.summary,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.notesField,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.field3,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.field4,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.field5,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.field6,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.field7,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Ga.selfApproval.apForm.fields.securityLabels,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]}}getColumns(){return[{index:0,fieldId:String(Ga.selfApproval.apForm.fields.formName),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.recordDefinition"),cellTemplate:this.definitionNameCellTemplate},{index:1,fieldId:String(Ga.selfApproval.apForm.fields.formRequestId),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.requestId"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:2,fieldId:String(Ga.selfApproval.apForm.fields.requester),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.requester"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:3,fieldId:String(Ga.selfApproval.apForm.fields.summary),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.description"),cellTemplate:this.fieldNameCellTemplate},{index:4,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.formInstanceId"),visible:!1},{index:5,fieldId:String(Ga.selfApproval.apForm.fields.notesField),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.notes"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:6,fieldId:String(Ga.selfApproval.apForm.fields.field3),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.field3"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:7,fieldId:String(Ga.selfApproval.apForm.fields.field4),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.field4"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:8,fieldId:String(Ga.selfApproval.apForm.fields.field5),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.field5"),cellTemplate:this.fieldNameCellTemplate,visible:!1},{index:9,fieldId:String(Ga.selfApproval.apForm.fields.field6),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.field6"),visible:!1},{index:10,fieldId:String(Ga.selfApproval.apForm.fields.field7),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.field7"),visible:!1},{index:11,fieldId:String(Ga.selfApproval.apForm.fields.securityLabels),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.securityLabels"),visible:!1}]}}ns.\u0275fac=function(e){return new(e||ns)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](a.AdaptModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](za),o["\u0275\u0275directiveInject"](ts))},ns.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ns,selectors:[["rx-admin-approval-configuration"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](lt,7),o["\u0275\u0275viewQuery"](ht,7),o["\u0275\u0275viewQuery"](ct,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.fieldNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},decls:12,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],[3,"config"],["grid",""],["definitionNameCellTemplate",""],["fieldNameCellTemplate",""],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementContainerStart"](2),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.newApprovalConfiguration()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"rx-record-grid",2,3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ft,3,3,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](10,gt,2,4,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.approval.configuration.title")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe,f.RxDefinitionNamePipe,is],encapsulation:2});class os{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-approval-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ns),name:"Approval configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}os.\u0275fac=function(e){return new(e||os)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},os.\u0275mod=o["\u0275\u0275defineNgModule"]({type:os,declarations:[ns,Wa,is,Za,Ka,Qa,Ha,es],imports:[a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptHighlightModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,s.AdminSettingsModule,n.CommonModule,s.ExpressionFormControlModule,d.RecordGridModule,l.RxBusyIndicatorModule,s.RxDefinitionPickerModule,u.TranslateModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,r.FormsModule,a.AdaptDropdownModule,a.AdaptRxSearchModule,a.AdaptTreeModule,f.RxDefinitionModule,a.AdaptRxCounterModule,a.AdaptRxTextareaModule,a.AdaptPopoverModule,a.AdaptTooltipModule,w.DragDropModule,a.AdaptAccordionModule,a.AdaptRxRadiobuttonModule,a.AdaptBusyModule,s.RxSelectWithPaginationModule,a.AdaptRxCheckboxModule,a.AdaptRxValidatorsModule,a.AdaptEmptyStateModule]}),os.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptHighlightModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,s.AdminSettingsModule,n.CommonModule,s.ExpressionFormControlModule,d.RecordGridModule,l.RxBusyIndicatorModule,s.RxDefinitionPickerModule,u.TranslateModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,r.FormsModule,a.AdaptDropdownModule,a.AdaptRxSearchModule,a.AdaptTreeModule,f.RxDefinitionModule,a.AdaptRxCounterModule,a.AdaptRxTextareaModule,a.AdaptPopoverModule,a.AdaptTooltipModule,w.DragDropModule,a.AdaptAccordionModule,a.AdaptRxRadiobuttonModule,a.AdaptBusyModule,s.RxSelectWithPaginationModule,a.AdaptRxCheckboxModule,a.AdaptRxValidatorsModule,a.AdaptEmptyStateModule]]});const rs={approvalNotificationForm:{name:"AP: Approval Notification",fields:{status:x.RX_RECORD_DEFINITION.coreFieldIds.status,notificationName:x.RX_RECORD_DEFINITION.coreFieldIds.description,sendToOther:12300,method:12301,sendTo:12302,notificationMessage:12303,subject:12305,notifyOn:12307,additionalConditions:12308,useTemplate:14053,applicationName:14861,globalNotification:14862,applicationBundleId:61001}},apProcessDefinitionForm:{name:"AP:Process Definition",fields:{processName:1e4,application:10050}},approvalFlowConfiguration:{name:"com.bmc.arsys.rx.approval:ApprovalFlowConfiguration",fields:{flowGroup:10007,flowName:10008,recordDefinition:1e4,arApprovalProcessDefinitionGuid:57060}},arSystemEmailMailboxConfiguration:{name:"AR System Email Mailbox Configuration",fields:{mailboxFunction:18049}},arSystemAdministrationTextTemplate:{name:"AR System Administration: TextTemplate",fields:{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,name:41202,applicationBundleId:61001}}};class as extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.approval.application.datapage.ApprovalNotificationDataPageQuery")}}as.\u0275fac=function(e){return new(e||as)(o["\u0275\u0275inject"](o.Injector))},as.\u0275prov=o["\u0275\u0275defineInjectable"]({token:as,factory:as.\u0275fac,providedIn:"root"});class ss{constructor(e){this.httpClient=e,this.approvalNotificationApi="/api/com.bmc.arsys.rx.approval/rx/application/approval/configuration/notification"}getApprovalNotification(e){return this.httpClient.get(`${this.approvalNotificationApi}/${e}`)}createApprovalNotification(e){return this.httpClient.post(this.approvalNotificationApi,e)}updateApprovalNotification(e){return this.httpClient.put(`${this.approvalNotificationApi}/${e.notificationGuid}`,e)}deleteApprovalNotifications(e){return(0,h.forkJoin)((0,m.map)(e,e=>this.httpClient.delete(`${this.approvalNotificationApi}/${e}`)))}}ss.\u0275fac=function(e){return new(e||ss)(o["\u0275\u0275inject"](b.HttpClient))},ss.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ss,factory:ss.\u0275fac,providedIn:"root"});class ls extends f.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.translateService=this.injector.get(u.TranslateService),this.rxRecordDefinitionCacheService=this.injector.get(x.RxRecordDefinitionCacheService),this.commonDataDictionary$=(0,h.of)([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),children:[]}])}approvalNotificationExpressionDataDictionary(e,t){return e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,v.map)(e=>[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition.title"),children:e.fieldDefinitions.filter(e=>{var t;return e.resourceType!==x.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType&&"PRIMARY_RECORD_DEFINITION"===(null===(t=e.fieldMapping)||void 0===t?void 0:t.source)&&!(0,m.includes)([x.RX_RECORD_DEFINITION.coreFieldIds.displayId,x.RX_RECORD_DEFINITION.coreFieldIds.id,rs.approvalNotificationForm.fields.applicationBundleId],e.id)}).map(e=>({label:e.name.replace(new RegExp(" Primary$"),""),icon:"d-icon-field_text",expression:t?`'${e.name}'`:`'\${${e.name}}'`,resourceType:e.resourceType}))},{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$",hidden:!0}])):(0,h.of)([])}}const cs={aliasTypes:{dataSource:"DataSource",webRequest:"WebRequest",connector:"connector"},connector:{recordDefinitionName:"Connector Configurations",fields:{status:x.RX_RECORD_DEFINITION.coreFieldIds.status,id:x.RX_RECORD_DEFINITION.coreFieldIds.id,target_name:56110,connector_id:56111,connector_name:56112,connector_config_id:56113,connector_config_name:56114,connector_profile_id:56115,connector_profile_Name:56116}},webRequest:{recordDefinitionName:"WebAPI Connection",fields:{authentication:70034,hostname:70030,id:x.RX_RECORD_DEFINITION.coreFieldIds.id,name:x.RX_RECORD_DEFINITION.coreFieldIds.description,port:70031}},dataSource:{recordDefinitionName:"Data Source",fields:{name:x.RX_RECORD_DEFINITION.coreFieldIds.description,id:x.RX_RECORD_DEFINITION.coreFieldIds.id,sourceType:70051}},aliasMapping:{recordDefinitionName:"Alias Mapping",queryExpression:"'56150' != 'email'",fields:{status:x.RX_RECORD_DEFINITION.coreFieldIds.status,id:x.RX_RECORD_DEFINITION.coreFieldIds.id,aliasType:56150,aliasName:56153,aliasValue:56154,applicationId:56151,applicationName:56152}}};class ds extends l.RxModalClass{constructor(e,t,i,n,o,r,l,c,d,p){super(i,e),this.injector=e,this.formBuilder=t,this.activeModalRef=i,this.rxRecordDefinitionCacheService=n,this.rxExpressionEditorService=o,this.rxRecordInstanceDataPageService=r,this.rxApprovalNotificationsService=l,this.translateService=c,this.rxNotificationService=d,this.rxDefinitionNameService=p,this.recordDefinitions=[],this.sendToOtherOptions=[],this.emailProfileOptions=[],this.emailTemplateOptions=[],this.isEditMode=!1,this.groupedData={},this.processList=[],this.treeWrap=a.TreeWrap.WrapAll,this.selectedFlows=[],this.availableFlows=[],this.processDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.process-name-field.label"),definitionType:s.RxDefinitionPickerType.Process,required:!0,availableDefinitionPickerStates:{definitionButtonsGroups:[s.RxDefinitionPickerScope.All],search:s.RxDefinitionPickerScope.All}},this.notificationTypeTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.tooltip")},this.approverSelectionTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.approver-selection.tooltip")},this.sendToOptionValue={allApprovers:"0",selectedApprover:"1"},this.sendToOption=[{id:this.sendToOptionValue.allApprovers,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.all-approvers.name")},{id:this.sendToOptionValue.selectedApprover,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.other.name")}],this.globalNotificationOptionValue={global:"global",flows:"flows"},this.globalNotificationOptions=[{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.flow.label"),value:this.globalNotificationOptionValue.flows},{label:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.global.label"),value:this.globalNotificationOptionValue.global}],this.notificationMethodOptions=[{id:"2",name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.email.name")},{id:"5",name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.process.name")}],this.notifyOnOptions=[{id:0,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.new-signature.name")},{id:1,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.approve.name")},{id:2,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reject.name")},{id:9,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reassign.name")},{id:11,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.cancel.name")},{id:12,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info-provided.name")},{id:16,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.hold.name")},{id:17,name:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info.name")}]}handleTemplateDependentFieldSelection(e){e?(this.approvalNotificationForm.get("message").disable(),this.approvalNotificationForm.get("outgoingEmailProfile").enable()):(this.approvalNotificationForm.get("message").enable(),this.approvalNotificationForm.get("outgoingEmailProfile").disable())}optionFormatter(e){return e.name}ngOnInit(){super.ngOnInit(),this.approvalNotificationForm=this.createApprovalNotificationForm(),this.approvalNotificationData=this.activeModalRef.getData(),this.recordDefinitions=this.approvalNotificationData.recordDefinitions,this.emailTemplateOptions=this.approvalNotificationData.templateList,this.approvalNotification=this.approvalNotificationData.approvalNotification,this.isEditMode=Boolean(this.approvalNotification.notificationName),this.expressionConfigurator=new ls(this.injector),this.recordDefinitionSubject=new h.BehaviorSubject(""),this.subjectExpressionConfigurator=new ls(this.injector),this.subjectExpressionConfigurator.configureForProperty({propertyPath:"subject",dataDictionary$:this.recordDefinitionSubject.asObservable().pipe((0,v.switchMap)(e=>this.subjectExpressionConfigurator.approvalNotificationExpressionDataDictionary(e,!1))),operators:null}),this.expressionConfigurator.configureForProperty({propertyPath:"approvalNotification",dataDictionary$:this.recordDefinitionSubject.asObservable().pipe((0,v.switchMap)(e=>this.expressionConfigurator.approvalNotificationExpressionDataDictionary(e,!0))),operators:this.expressionConfigurator.getOperatorRowsByGroup(f.ExpressionOperatorGroup.All)}),this.expressionFormControlOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.label"),dataDictionary$:this.expressionConfigurator.getDataDictionary("approvalNotification"),operators:this.expressionConfigurator.getOperators("approvalNotification"),isRequired:!1,tooltip:{popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.tooltip")}},this.subjectExpressionFormControlOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.subject-field.label"),dataDictionary$:this.subjectExpressionConfigurator.getDataDictionary("subject"),operators:this.expressionConfigurator.getOperators("subject"),isRequired:this.isRequiredForEmail()},this.notificationMessageExpressionOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.common.message.label"),dataDictionary$:this.subjectExpressionConfigurator.getDataDictionary("subject"),operators:this.expressionConfigurator.getOperators("subject"),isRequired:this.isRequiredForEmail()},this.approvalNotificationForm.get("primaryRecordName").valueChanges.subscribe(e=>this.onRecordDefinitionChange(e)),this.approvalNotificationForm.get("notificationMethod").valueChanges.subscribe(e=>this.onNotificationMethodChange(e)),this.isEditMode&&this.initializeApprovalNotificationForm()}isDirty(){var e,t;return Boolean((null===(e=this.approvalNotificationForm)||void 0===e?void 0:e.dirty)||(null===(t=this.expressionDialogApi)||void 0===t?void 0:t.isDirty()))}ngOnDestroy(){this.recordDefinitionSubject.complete()}createApprovalNotificationForm(){return this.formBuilder.group({primaryRecordName:[[],r.Validators.required],notificationName:["",r.Validators.required],notifyOn:[[],r.Validators.required],additionalQualification:"",notificationType:this.globalNotificationOptionValue.flows,useTemplate:!1,outgoingEmailProfile:[{value:[],disabled:!0},r.Validators.required],approvalTemplate:[[],r.Validators.nullValidator],sendTo:["0"],subject:"",notificationMethod:[[this.notificationMethodOptions[0]],r.Validators.required],status:!0,message:"",approver:[{value:[],disabled:!0},r.Validators.required],rxProcessName:"",check:!1})}reset(){this.approvalNotificationForm.get("additionalQualification").setValue(""),this.approvalNotificationForm.get("rxProcessName").setValue(""),this.approvalNotificationForm.get("subject").setValue(""),this.approvalNotificationForm.get("message").setValue(""),this.approvalNotificationForm.get("sendTo").setValue("0"),this.approvalNotificationForm.get("notifyOn").setValue([]),this.approvalNotificationForm.get("notificationType").setValue(this.globalNotificationOptionValue.flows),this.approvalNotificationForm.get("useTemplate").setValue(!1),this.approvalNotificationForm.get("notificationMethod").setValue([this.notificationMethodOptions[0]]),this.approvalNotificationForm.get("outgoingEmailProfile").setValue([]),this.approvalNotificationForm.get("approvalTemplate").setValue([]),this.approvalNotificationForm.get("approver").setValue([]),this.approvalNotificationForm.get("status").setValue(!0)}onNotificationMethodChange(e){e[0].id===this.notificationMethodOptions[1].id?(this.approvalNotificationForm.get("subject").setValue(""),this.approvalNotificationForm.get("message").setValue(""),this.approvalNotificationForm.controls.subject.disable(),this.approvalNotificationForm.controls.message.disable(),this.approvalNotificationForm.controls.rxProcessName.enable()):e[0].id===this.notificationMethodOptions[0].id&&(this.approvalNotificationForm.get("rxProcessName").setValue(""),this.approvalNotificationForm.controls.rxProcessName.disable(),this.approvalNotificationForm.controls.subject.enable(),this.approvalNotificationForm.controls.message.enable())}handleSendToOptionSelection(){this.approvalNotificationForm.get("sendTo").value===this.sendToOptionValue.selectedApprover?this.approvalNotificationForm.get("approver").enable():this.approvalNotificationForm.get("approver").disable()}initializeApprovalNotification(e){return(0,h.forkJoin)([this.rxRecordDefinitionCacheService.getRecordDefinition(e+" Detail Signature"),this.rxRecordInstanceDataPageService.post({params:{recorddefinition:rs.arSystemEmailMailboxConfiguration.name,propertySelection:[x.RX_RECORD_DEFINITION.coreFieldIds.id],queryExpression:`'${x.RX_RECORD_DEFINITION.coreFieldIds.status}' = "0" AND '${rs.arSystemEmailMailboxConfiguration.fields.mailboxFunction}' = "1"`}}),this.rxRecordInstanceDataPageService.post({params:{recorddefinition:rs.approvalFlowConfiguration.name,propertySelection:(0,m.values)(rs.approvalFlowConfiguration.fields).join(),queryExpression:`'${rs.approvalFlowConfiguration.fields.recordDefinition}' == "${e}"`}})])}initializeApprovalNotificationForm(){this.approvalNotificationForm.get("notificationName").setValue(this.approvalNotification.notificationName),this.approvalNotificationForm.get("status").setValue("0"===this.approvalNotification.status),this.approvalNotificationForm.get("rxProcessName").setValue(this.approvalNotification.rxProcessName),this.approvalNotificationForm.get("subject").setValue(this.convertExpressionFromServerFormat(this.approvalNotification.subject)),this.approvalNotificationForm.get("message").setValue(this.convertExpressionFromServerFormat(this.approvalNotification.message)),this.approvalNotificationForm.get("sendTo").setValue(this.approvalNotification.sendTo),this.handleSendToOptionSelection(),this.approvalNotificationForm.get("additionalQualification").setValue(this.approvalNotification.additionalQualification),this.approvalNotificationForm.get("notifyOn").setValue((0,m.filter)(this.notifyOnOptions,{id:this.approvalNotification.notifyOn})),this.approvalNotificationForm.get("notificationType").setValue(1===this.approvalNotification.notificationType?this.globalNotificationOptionValue.global:this.globalNotificationOptionValue.flows),this.approvalNotificationForm.get("useTemplate").setValue("1"===this.approvalNotification.useTemplate),this.handleTemplateDependentFieldSelection(!0),this.approvalNotificationForm.get("notificationMethod").setValue((0,m.filter)(this.notificationMethodOptions,{id:this.approvalNotification.notificationMethod})),this.approvalNotificationForm.get("outgoingEmailProfile").setValue([{name:this.approvalNotification.emailProfile,id:this.approvalNotification.emailProfileGuid}]),this.approvalNotificationForm.get("approvalTemplate").setValue([{name:this.approvalNotification.approvalTemplateName,id:this.approvalNotification.approvalTemplateGuid}]),this.approvalNotificationForm.get("primaryRecordName").setValue(this.approvalNotification.primaryRecordName?[{value:this.approvalNotification.primaryRecordName,displayValue:this.rxDefinitionNameService.getDisplayName(this.approvalNotification.primaryRecordName)}]:[])}onRecordDefinitionChange(e){const t=this.approvalNotificationForm.value.primaryRecordName.length?this.approvalNotificationForm.value.primaryRecordName[0]:"",i=e[0].value,n=i+" Detail Signature";i!==t&&(this.isEditMode||this.reset(),this.recordDefinitionSubject.next(n),i&&this.initializeApprovalNotification(i).subscribe(([e,t,n])=>{this.prepareApprovalFlowTree(n),this.initializeSendToFromControlOptions(e),this.initializeEmailProfiles(t,i)}))}onSelectionChange(){this.isTreeTouched=!0,this.approvalNotificationForm.markAsDirty()}isGlobalNotification(){return this.isEditMode&&this.approvalNotificationForm.get("notificationType").value===this.globalNotificationOptionValue.global}prepareApprovalFlowTree(e){this.selectedFlows=[],this.availableFlows=(0,m.flow)(e=>(0,m.groupBy)(e,rs.approvalFlowConfiguration.fields.flowGroup),e=>(0,m.map)(e,(e,t)=>({label:t,disallowMultipleNodeSelection:this.isGlobalNotification(),expanded:!0,children:(0,m.map)(e,e=>{const i={label:e[rs.approvalFlowConfiguration.fields.flowName],key:e[rs.approvalFlowConfiguration.fields.arApprovalProcessDefinitionGuid],leaf:!0,data:t,disallowMultipleNodeSelection:this.isGlobalNotification()};return(0,m.includes)(this.approvalNotification.processList,e[rs.approvalFlowConfiguration.fields.arApprovalProcessDefinitionGuid])&&this.selectedFlows.push(i),i})})))(e.data),this.updateParentNodesForSelectedFlows()}updateParentNodesForSelectedFlows(){(0,m.forEach)(this.selectedFlows,e=>{const t=(0,m.find)(this.availableFlows,t=>t.label===e.data);(0,m.every)(t.children,e=>(0,m.includes)(this.selectedFlows,e))?this.selectedFlows.push(t):t.partialSelected=!0})}initializeEmailProfiles(e,t){let i=`'${cs.aliasMapping.fields.aliasType}' = "email"`,n="";t&&(i+=` AND ('${cs.aliasMapping.fields.applicationId}' = "${this.rxDefinitionNameService.getBundleId(t)}" OR '${cs.aliasMapping.fields.applicationId}' = "None")`),(0,m.forEach)(e.data,e=>{(0,m.isEmpty)(n)||(n+=" OR "),n+=`'${cs.aliasMapping.fields.aliasValue}' = "${e[x.RX_RECORD_DEFINITION.coreFieldIds.id]}"`}),n=n?" AND (("+n+"))":"",this.rxRecordInstanceDataPageService.post({params:{recorddefinition:"Alias Mapping",propertySelection:[cs.aliasMapping.fields.aliasName,x.RX_RECORD_DEFINITION.coreFieldIds.id,cs.aliasMapping.fields.applicationId],queryExpression:i+n}}).subscribe(e=>{this.emailProfileOptions=e.data.map(e=>({name:e[cs.aliasMapping.fields.aliasName],id:e[x.RX_RECORD_DEFINITION.coreFieldIds.id]}))})}initializeSendToFromControlOptions(e){e&&e.fieldDefinitions&&(this.sendToOtherOptions=this.filterFieldDefinitions(e.fieldDefinitions),this.approvalNotificationForm.get("approver").setValue((0,m.filter)(this.sendToOtherOptions,{id:this.approvalNotification.sendToOthers})))}filterFieldDefinitions(e){return e.filter(e=>{var t;return e.resourceType!==x.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType&&"PRIMARY_RECORD_DEFINITION"===(null===(t=e.fieldMapping)||void 0===t?void 0:t.source)&&!(0,m.includes)([x.RX_RECORD_DEFINITION.coreFieldIds.displayId,x.RX_RECORD_DEFINITION.coreFieldIds.id,rs.approvalNotificationForm.fields.applicationBundleId],e.id)}).map(e=>({name:e.name.replace(/ Primary$/,""),id:`'\${${e.name}}'`}))}buildExpression(e){this.selectApprovalNotificationExpression(e)}selectApprovalNotificationExpression(e){let t="";"additionalQualification"===e?t=this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.label"):"subject"===e?t=this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.subject-field.label"):"message"===e&&(t=this.translateService.instant("com.bmc.arsys.rx.client.common.message.label"));const i={property:{path:"additionalQualification"===e?"approvalNotification":"subject",value:this.approvalNotificationForm.get(e).value,label:t},expressionConfigurator:"additionalQualification"===e?this.expressionConfigurator:this.subjectExpressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-field_text"}]};this.rxExpressionEditorService.openEditor(i,e=>this.expressionDialogApi=e).subscribe(t=>{this.expressionDialogApi=null,this.approvalNotificationForm.get(e).setValue(t.value),this.approvalNotificationForm.get(e).markAsDirty()})}transformFormControlData(){var e,t;const i=(0,m.cloneDeep)(this.approvalNotificationForm.value);return i.primaryRecordName=i.primaryRecordName[0].value,i.notifyOn=i.notifyOn.length?i.notifyOn[0].id:"",i.notificationType===this.globalNotificationOptionValue.flows?(i.notificationType=0,i.processList=this.selectedFlows.filter(e=>e.leaf).map(e=>e.key)):i.notificationType=1,(null===(e=null==i?void 0:i.outgoingEmailProfile)||void 0===e?void 0:e.length)&&(i.emailProfile=i.outgoingEmailProfile[0].name,i.emailProfileGuid=i.outgoingEmailProfile[0].id),delete i.outgoingEmailProfile,i.approvalTemplate.length&&(i.approvalTemplateName=i.approvalTemplate.name,i.approvalTemplateGuid=i.approvalTemplate.id),delete i.approvalTemplate,i.sendToOthers=(null===(t=i.approver)||void 0===t?void 0:t.length)?i.approver[0].id:"",i.notificationMethod=i.notificationMethod.length?i.notificationMethod[0].id:"",i.notificationMethod===this.notificationMethodOptions[1].id?(i.subject=i.notificationName,i.message=i.notificationName):i.useTemplate&&(i.message=i.notificationName),i.useTemplate=i.useTemplate?"1":"0",i.status=i.status?"0":"1",i.subject=this.convertExpressionToServerFormat(i.subject),i.message=this.convertExpressionToServerFormat(i.message),delete i.approver,delete i.check,this.isEditMode&&(i.notificationGuid=this.approvalNotification.notificationGuid),i}save(){this.approvalNotificationForm.markAsPristine();const e=this.transformFormControlData();this.rxApprovalNotificationsService.createApprovalNotification(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-saved.message")),this.activeModalRef.close(e)})}update(){this.approvalNotificationForm.markAsPristine();const e=this.transformFormControlData();this.rxApprovalNotificationsService.updateApprovalNotification(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-updated.message")),this.activeModalRef.close(e)})}closeModal(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}shouldUseTemplate(){var e;return 0===(null===(e=this.approvalNotificationForm.get("notifyOn").value[0])||void 0===e?void 0:e.id)}showProcessDefinitionPicker(){var e;return"5"===(null===(e=this.approvalNotificationForm.get("notificationMethod").value[0])||void 0===e?void 0:e.id)}isRequiredForEmail(){var e;return"2"===(null===(e=this.approvalNotificationForm.get("notificationMethod").value[0])||void 0===e?void 0:e.id)}onNotifyChange(e){0!==e.options[0].id&&this.approvalNotificationForm.get("useTemplate").setValue(!1)}isNotificationOptionInvalid(){return this.approvalNotificationForm.get("notificationType").value===this.globalNotificationOptionValue.flows&&!this.selectedFlows.length}definitionOptionFormatter(e){return e.displayValue}convertExpressionFromServerFormat(e){const t=new RegExp("(\\$"+x.RX_RECORD_DEFINITION.validDefinitionNameRegExpString+"\\$)","g");return e&&e.replace(t,function(e){const t=e.replace(/\$/g,"");return t?"'${"+t+"}'":e})}convertExpressionToServerFormat(e){const t=new RegExp("('\\${"+x.RX_RECORD_DEFINITION.validDefinitionNameRegExpString+"}')","g");return e&&e.replace(t,function(e){return"$"+e.replace(/['${}]/g,"")+"$"})}}ds.\u0275fac=function(e){return new(e||ds)(o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](s.RxExpressionEditorService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](ss),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService))},ds.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ds,selectors:[["rx-approval-notification-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:38,vars:46,consts:[[1,"modal-body"],[3,"formGroup"],[1,"row"],[1,"col-12","col-md-6"],["formControlName","primaryRecordName","rx-id","record-definition-name",1,"d-block","form-group",3,"options","disabled","label","optionFormatter"],["rx-id","notification-name","formControlName","notificationName",1,"d-block","form-group",3,"label"],[1,"col-12","col-md-6","d-flex","flex-column"],["formControlName","notifyOn","rx-id","notify-on",1,"d-block","form-group",3,"options","optionFormatter","label","onSelectionChange"],["formControlName","additionalQualification","rx-id","additional-qualification","required","false",1,"d-block","form-group",3,"options","events"],["formControlName","notificationType","rx-id","notification-type",1,"d-block","form-group",3,"label","tooltip"],["class","radio-inline m-0",3,"label","value","disabled","ngClass",4,"ngFor","ngForOf"],["class","d-flex flex-column h-100",4,"ngIf"],[1,"col-md-6"],["formControlName","sendTo",1,"d-block","form-group",3,"label"],["class","radio-inline m-0","rx-id","send-to-option",3,"value","label","ngClass","checkedChange",4,"ngFor","ngForOf"],["class","d-block form-group","formControlName","approver","rx-id","approver",3,"label","options","optionFormatter","tooltip",4,"ngIf"],["formControlName","notificationMethod","rx-id","notification-method",1,"d-block","form-group",3,"options","optionFormatter","label"],["class","d-block form-group","formControlName","useTemplate","rx-id","use-template",3,"label","ngModelChange",4,"ngIf"],[4,"ngIf"],["class","d-block form-group","formControlName","subject","rx-id","subject","required","true",3,"options","events",4,"ngIf"],["class","d-block form-group","formControlName","message","rx-id","message","required","true",3,"options","events",4,"ngIf"],["class","d-block form-group","formControlName","rxProcessName","rx-id","definition-field","required","true",3,"options",4,"ngIf"],["formControlName","status","rx-id","status",3,"label","isLabelBefore"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button","class","mr-2",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","primary","type","button","class","mr-2","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",1,"mr-2",3,"click"],[1,"radio-inline","m-0",3,"label","value","disabled","ngClass"],[1,"d-flex","flex-column","h-100"],[3,"label","showRequiredLabel"],[1,"card","flex-fill",3,"ngClass"],[1,"card-block"],[3,"type","label",4,"ngIf"],["selectionMode","checkbox",3,"value","selection","wrap","selectionChange",4,"ngIf"],[3,"type","label"],["selectionMode","checkbox",3,"value","selection","wrap","selectionChange"],["rx-id","send-to-option",1,"radio-inline","m-0",3,"value","label","ngClass","checkedChange"],["formControlName","approver","rx-id","approver",1,"d-block","form-group",3,"label","options","optionFormatter","tooltip"],["formControlName","useTemplate","rx-id","use-template",1,"d-block","form-group",3,"label","ngModelChange"],["formControlName","outgoingEmailProfile","rx-id","outgoing-email-profile",1,"d-block","form-group",3,"options","optionFormatter","label"],["formControlName","approvalTemplate","rx-id","approval-template",1,"d-block","form-group",3,"options","optionFormatter","label"],["formControlName","subject","rx-id","subject","required","true",1,"d-block","form-group",3,"options","events"],["formControlName","message","rx-id","message","required","true",1,"d-block","form-group",3,"options","events"],["formControlName","rxProcessName","rx-id","definition-field","required","true",1,"d-block","form-group",3,"options"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275element"](4,"adapt-rx-select",4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",3),o["\u0275\u0275element"](7,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",2),o["\u0275\u0275elementStart"](10,"div",6),o["\u0275\u0275elementStart"](11,"adapt-rx-select",7),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.onNotifyChange(e)}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"rx-expression-form-control",8),o["\u0275\u0275listener"]("events",function(){return t.buildExpression("additionalQualification")}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"adapt-rx-radiobutton-group",9),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275template"](16,xt,1,6,"adapt-rx-radiobutton",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](17,St,7,9,"div",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",12),o["\u0275\u0275elementStart"](19,"adapt-rx-radiobutton-group",13),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275template"](21,wt,1,5,"adapt-rx-radiobutton",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](22,It,2,6,"adapt-rx-select",15),o["\u0275\u0275element"](23,"adapt-rx-select",16),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275template"](25,_t,2,3,"adapt-rx-checkbox",17),o["\u0275\u0275template"](26,Dt,5,10,"div",18),o["\u0275\u0275template"](27,Rt,1,1,"rx-expression-form-control",19),o["\u0275\u0275template"](28,At,1,1,"rx-expression-form-control",20),o["\u0275\u0275template"](29,Tt,1,1,"rx-definition-picker",21),o["\u0275\u0275element"](30,"adapt-rx-switch",22),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",23),o["\u0275\u0275template"](33,Ft,3,4,"button",24),o["\u0275\u0275template"](34,Et,3,4,"button",25),o["\u0275\u0275elementStart"](35,"button",26),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275text"](36),o["\u0275\u0275pipe"](37,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.approvalNotificationForm),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,30,"com.bmc.arsys.rx.client.approval.record-definition-field.label")),o["\u0275\u0275property"]("options",t.recordDefinitions)("disabled",t.isEditMode)("optionFormatter",t.definitionOptionFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,32,"com.bmc.arsys.rx.client.approval.notification-configuration.notification-name-field.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,34,"com.bmc.arsys.rx.client.approval.notification-configuration.notify-on-field.label")),o["\u0275\u0275property"]("options",t.notifyOnOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.expressionFormControlOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](15,36,"com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.label")),o["\u0275\u0275property"]("tooltip",t.notificationTypeTooltip),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.globalNotificationOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.approvalNotificationForm.get("notificationType").value===t.globalNotificationOptionValue.flows),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,38,"com.bmc.arsys.rx.client.approval.notification-configuration.send-to-field.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.sendToOption),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","1"===t.approvalNotificationForm.get("sendTo").value),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](24,40,"com.bmc.arsys.rx.client.approval.notification-configuration.notification-method-field.label")),o["\u0275\u0275property"]("options",t.notificationMethodOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.shouldUseTemplate()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.approvalNotificationForm.get("useTemplate").value),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","2"===t.approvalNotificationForm.get("notificationMethod").value[0].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf","2"===t.approvalNotificationForm.get("notificationMethod").value[0].id&&!t.approvalNotificationForm.get("useTemplate").value),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.showProcessDefinitionPicker()),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](31,42,"com.bmc.arsys.rx.client.approval.notification-configuration.enabled-field.label")),o["\u0275\u0275property"]("isLabelBefore",!1),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!t.isEditMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](37,44,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxTextfieldComponent,s.ExpressionFormControlComponent,r.RequiredValidator,a.AdaptRxRadiobuttonGroupComponent,n.NgForOf,n.NgIf,a.AdaptRxSwitchComponent,a.AdaptButtonComponent,a.AdaptRxRadiobuttonComponent,n.NgClass,a.AdaptRxControlLabelComponent,a.AdaptEmptyStateComponent,a.AdaptTreeComponent,a.AdaptRxCheckboxComponent,s.RxDefinitionPickerComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.approval-notification-flow[_ngcontent-%COMP%]{overflow-y:auto;max-height:320px}adapt-rx-textfield[_ngcontent-%COMP%], adapt-rx-select[_ngcontent-%COMP%], rx-definition-picker[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]  rx-expression-form-control button{height:2.38rem}[_nghost-%COMP%]  adapt-rx-radiobutton .radio{margin:8px 0}.card[_ngcontent-%COMP%]{min-height:152px;max-height:285px;overflow:auto}']});class ps extends p.BaseViewComponent{constructor(e,t,i,n,o,r,a,s,l){super(),this.rxModalService=e,this.adaptModalService=t,this.translateService=i,this.rxGlobalCacheService=n,this.rxDefinitionNameService=o,this.rxApprovalNotificationsDataPageService=r,this.rxApprovalNotificationsService=a,this.rxNotificationService=s,this.rxRecordInstanceDataPageService=l}ngOnInit(){this.editMode=!1,this.gridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.deleteNotification()}}]}],getData:e=>this.getData(e),getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:this.getColumns(),styles:"flex-fill",enableRowSelection:d.RowSelectionMode.Multiple})}createApprovalNotification(){this.editMode=!1,this.initializeApprovalNotificationForm({notificationName:"",primaryRecordName:""})}initializeApprovalNotificationForm(e){(0,h.forkJoin)([this.rxRecordInstanceDataPageService.post({params:{recorddefinition:Ga.selfApproval.apForm.name,propertySelection:Ga.selfApproval.apForm.fields.formName,queryExpression:`('${Ga.selfApproval.apForm.fields.field7}'!=$NULL$ OR '${Ga.selfApproval.apForm.fields.field7}'!="")`}}),this.rxRecordInstanceDataPageService.post({params:{recorddefinition:"AR System Administration: TextTemplate",propertySelection:(0,m.values)(rs.arSystemAdministrationTextTemplate.fields).join()}}),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([t,i,n])=>{const o=this.translateService.instant("com.bmc.arsys.rx.client.common.global-items.label"),r=(0,m.flow)(e=>(0,m.map)(e,e=>{const t=(0,m.find)(n,{id:this.rxDefinitionNameService.getBundleId(e[Ga.selfApproval.apForm.fields.formName])});return{value:e[Ga.selfApproval.apForm.fields.formName],displayValue:this.rxDefinitionNameService.getDisplayName(e[Ga.selfApproval.apForm.fields.formName]),applicationName:(null==t?void 0:t.friendlyName)||(null==t?void 0:t.id)||o}}),e=>(0,m.groupBy)(e,"applicationName"),e=>(0,m.map)(e,(e,t)=>({name:t,children:(0,m.map)(e,e=>({value:e.value,displayValue:e.displayValue}))})))(t.data),a=[];if(i.data.length){const e=(0,m.filter)(i.data,function(e){return e[rs.arSystemAdministrationTextTemplate.fields.applicationBundleId]!==f.RX_APPLICATION.approvalBundleId});(0,m.forEach)(e,function(e){a.push({name:e[rs.arSystemAdministrationTextTemplate.fields.name],guid:e[x.RX_RECORD_DEFINITION.coreFieldIds.id]})})}const s=this.editMode?this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.edit-approval-notification.title"):this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.new-approval-notification.title");this.openModal(s,{approvalNotification:this.editMode?e:{notificationName:"",primaryRecordName:""},recordDefinitions:r,templateList:a})})}openModal(e,t){this.rxModalService.openModal({title:e,content:ds,data:Object.assign({},t)}).then(e=>{e&&(this.recordGridComponent.api.refresh().subscribe(),this.editMode=!1)}).catch(m.noop)}deleteNotification(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.delete-selected-notification-confirmation.message")}).then(e=>{if(e){const e=this.recordGridComponent.api.getSelectedRows(),t=(0,m.map)(e,x.RX_RECORD_DEFINITION.coreFieldIds.id);this.rxApprovalNotificationsService.deleteApprovalNotifications(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-deleted.message")),this.recordGridComponent.api.refresh().subscribe()})}})}getData(e){const t=Object.values(rs.approvalNotificationForm.fields),i=`('${rs.approvalNotificationForm.fields.applicationBundleId}' != $NULL$)`,n=e.queryExpression?"("+i.substring(1,i.length-1)+" AND "+e.queryExpression.substring(1,e.queryExpression.length-1)+")":i;return e=Object.assign(Object.assign({},e),{propertySelection:t,queryExpression:n}),this.rxApprovalNotificationsDataPageService.get({params:e})}getRecordDefinition(){return{fieldDefinitions:[{id:rs.approvalNotificationForm.fields.notificationName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:rs.approvalNotificationForm.fields.notifyOn,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{0:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.new-signature.name"),1:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.approve.name"),2:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reject.name"),9:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reassign.name"),10:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.error.name"),11:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.cancel.name"),12:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info-provided.name"),16:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.hold.name"),17:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info.name")}},{id:rs.approvalNotificationForm.fields.method,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{2:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.email.name"),5:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.process.name")}},{id:rs.approvalNotificationForm.fields.status,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{0:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.active.value"),1:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.inactive.value")}},{id:rs.approvalNotificationForm.fields.applicationName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:rs.approvalNotificationForm.fields.globalNotification,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{0:this.translateService.instant("com.bmc.arsys.rx.client.common.no.label"),1:this.translateService.instant("com.bmc.arsys.rx.client.common.yes.label")}}]}}getColumns(){return[{index:0,fieldId:String(rs.approvalNotificationForm.fields.notificationName),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-name.title"),clickable:!0,actions:[{name:(e,t)=>this.editApprovalNotification(t)}]},{index:1,fieldId:String(rs.approvalNotificationForm.fields.applicationName),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.record-definition.title"),filterable:!1},{index:2,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.id.title"),visible:!1},{index:3,fieldId:String(rs.approvalNotificationForm.fields.notifyOn),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notify-on.title")},{index:4,fieldId:String(rs.approvalNotificationForm.fields.method),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-method.title")},{index:5,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.title")},{index:6,fieldId:String(rs.approvalNotificationForm.fields.globalNotification),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.global-notification.title")}]}editApprovalNotification(e){this.editMode=!0,this.rxApprovalNotificationsService.getApprovalNotification(e[x.RX_RECORD_DEFINITION.coreFieldIds.id]).subscribe(e=>{this.initializeApprovalNotificationForm(e)})}}ps.\u0275fac=function(e){return new(e||ps)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](a.AdaptModalService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](as),o["\u0275\u0275directiveInject"](ss),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService))},ps.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ps,selectors:[["rx-admin-approval-notifications"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Mt,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGridComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:7,consts:[[3,"header"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["rx-id","approval-notifications-grid",3,"config"],["recordGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createApprovalNotification()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.approval.notification-configuration.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class us{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-approval-notifications",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ps),name:"Approval notifications",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}us.\u0275fac=function(e){return new(e||us)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},us.\u0275mod=o["\u0275\u0275defineNgModule"]({type:us,declarations:[ps,ds],imports:[a.AdaptEmptyStateModule,s.AdminSettingsModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxSwitchModule,a.AdaptRxCheckboxModule,a.AdaptRxRadiobuttonModule,a.AdaptButtonModule,a.AdaptAccordionModule,n.CommonModule,s.ExpressionFormControlModule,d.RecordGridModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,u.TranslateModule,a.AdaptRxLabelModule,a.AdaptTreeModule]}),us.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptEmptyStateModule,s.AdminSettingsModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxSwitchModule,a.AdaptRxCheckboxModule,a.AdaptRxRadiobuttonModule,a.AdaptButtonModule,a.AdaptAccordionModule,n.CommonModule,s.ExpressionFormControlModule,d.RecordGridModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,u.TranslateModule,a.AdaptRxLabelModule,a.AdaptTreeModule]]});class ms extends p.BaseViewComponent{constructor(e,t,i,n,o){super(),this.formBuilder=e,this.rxCurrentUserService=t,this.rxNotificationService=i,this.rxSystemConfigurationService=n,this.translateService=o,this.isAdministrator=this.rxCurrentUserService.isAdministrator(),this.settingName="errorReportingServiceSaasConfiguration"}getConfiguration(){this.busy=this.rxSystemConfigurationService.getConfiguration(this.settingName).subscribe(e=>{this.bmcServiceCloudAccountConfigForm.patchValue(JSON.parse(e.value))})}saveConfig(){const e=this.bmcServiceCloudAccountConfigForm.getRawValue();this.rxSystemConfigurationService.setConfiguration(this.settingName,e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.save-successful.message")),this.bmcServiceCloudAccountConfigForm.markAsPristine()})}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>{var e;return null===(e=this.bmcServiceCloudAccountConfigForm)||void 0===e?void 0:e.dirty}}),this.isAdministrator&&(this.bmcServiceCloudAccountConfigForm=this.formBuilder.group({clientId:"",clientSecret:"",dataCenterUrl:"",authorizationUrl:"",serviceCloudInstanceUrl:"",supportCentralUrl:""}),this.getConfiguration())}}ms.\u0275fac=function(e){return new(e||ms)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},ms.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ms,selectors:[["rx-admin-bmc-service-cloud-account"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:28,consts:[[3,"header","busy"],[3,"formGroup"],["rx-id","client-id","formControlName","clientId","required","true",1,"d-block","form-group",3,"label"],["rx-id","client-secret","formControlName","clientSecret","required","true",1,"d-block","form-group",3,"label","isPassword"],["rx-id","data-center-url","formControlName","dataCenterUrl","required","true",1,"d-block","form-group",3,"label"],["rx-id","authorization-url","formControlName","authorizationUrl","required","true",1,"d-block","form-group",3,"label"],["rx-id","service-cloud-instance-url","formControlName","serviceCloudInstanceUrl","required","true",1,"d-block","form-group",3,"label"],["rx-id","support-central-url","formControlName","supportCentralUrl","required","true",1,"d-block","form-group",3,"label"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",1),o["\u0275\u0275element"](3,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275element"](5,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275element"](9,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275element"](11,"adapt-rx-textfield",6),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275element"](13,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementStart"](15,"button",8),o["\u0275\u0275listener"]("click",function(){return t.saveConfig()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,12,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.bmcServiceCloudAccountConfigForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,14,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-id.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,16,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-secret.label")),o["\u0275\u0275property"]("isPassword",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,18,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.data-center-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,20,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.authorization-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,22,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.service-cloud-instance-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,24,"com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.support-central-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.bmcServiceCloudAccountConfigForm.pristine||t.bmcServiceCloudAccountConfigForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,26,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textfield[_ngcontent-%COMP%]{max-width:400px}']});class hs{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-bmc-service-cloud-account",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ms),name:"BMC Service Cloud account",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}hs.\u0275fac=function(e){return new(e||hs)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},hs.\u0275mod=o["\u0275\u0275defineNgModule"]({type:hs,declarations:[ms],imports:[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,u.TranslateModule]}),hs.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,u.TranslateModule]]});class fs extends p.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.rxAdminSettingsService=e,this.rxChatbotDefinitionService=t,this.rxCurrentUserService=i,this.rxModalService=n,this.rxNotificationService=o,this.translateService=r,this.sections=(0,m.cloneDeep)(D.RX_CHATBOTS.sections),this.isAdministrator=this.rxCurrentUserService.isAdministrator()}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.displayChatbotsDropdownSwitch.dirty}),this.isAdministrator&&(this.busy=this.rxAdminSettingsService.getComponentSettings(D.RX_CHATBOTS.componentSettings.componentName,{"default-bundle-scope":f.RX_APPLICATION.settingsBundleId}).subscribe(e=>{this.componentSettings=e.values;const t=(0,m.find)(this.componentSettings,{settingName:D.RX_CHATBOTS.componentSettings.settingNames.displayChatbotsDropdown});this.sections.globalChatbotSettings.displayChatbotsDropdown=JSON.parse(t.settingValue)})),this.recordGridConfig=(0,h.of)({enableFiltering:!0,recordDefinitionName:D.RX_CHATBOTS.chatbotSettings.recordDefinitionName,enableRowSelection:d.RowSelectionMode.Multiple,columns:[{index:0,fieldId:String(D.RX_CHATBOTS.chatbotSettings.recordFieldIds.name),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.chatbot.title"),cellTemplate:this.nameColumnTemplate},{index:1,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.description.title")},{index:2,fieldId:String(D.RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.application-library-id.title")},{index:3,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.chatbot-id.title")}],actionButtons:[{label:"Rename",style:"tertiary",icon:"pencil",disabled:()=>!this.isAdministrator||1!==this.chatbotConfigurationsRecordGrid.api.getSelectedRows().length,actions:[{name:()=>{const e=(0,m.head)(this.chatbotConfigurationsRecordGrid.api.getSelectedRows());this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.rename-chatbot.title"),size:"sm",content:s.RenameDefinitionModalComponent,data:{definitionName:e[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.name],infoText:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.name-uniqueness-validation.message"),fieldLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.name.label"),validationErrorText:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.name-validation.message"),definitionType:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.chatbot.title"),definitionNames:this.chatbotConfigurationsRecordGrid.adaptTableConfig.data.filter(t=>t[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId]===e[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId]).map(e=>e[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.name])}}).then(t=>{this.rxChatbotDefinitionService.rename(e[x.RX_RECORD_DEFINITION.coreFieldIds.id],t).subscribe(()=>{this.refreshChatbotGrid()})}).catch(m.noop)}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",disabled:()=>!this.isAdministrator||0===this.chatbotConfigurationsRecordGrid.api.getSelectedRows().length,actions:[{name:()=>{let e=this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.delete-confirmation.message");const t=this.chatbotConfigurationsRecordGrid.api.getSelectedRows(),i=(0,m.map)(t,x.RX_RECORD_DEFINITION.coreFieldIds.id);if((0,m.includes)(i,D.RX_CHATBOTS.chatbotSettings.defaultBotId)){const i=(0,m.find)(t,[x.RX_RECORD_DEFINITION.coreFieldIds.id,D.RX_CHATBOTS.chatbotSettings.defaultBotId]);e=this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.configurations-delete-confirmation.message",{defaultChatbotName:i[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.name]})}this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:e}).then(e=>{e&&this.rxChatbotDefinitionService.delete(i).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.delete-success.message")),this.refreshChatbotGrid()})})}}]}]})}getCellValue(e,t){return e[t.field]}onSaveClick(){(0,m.find)(this.componentSettings,["settingName",D.RX_CHATBOTS.componentSettings.settingNames.displayChatbotsDropdown]).settingValue=(0,m.toString)(this.sections.globalChatbotSettings.displayChatbotsDropdown),this.rxAdminSettingsService.updateComponentSettings(`${D.RX_CHATBOTS.componentSettings.componentName}/${(0,m.head)(this.componentSettings).ownerKeyValue1}`,this.componentSettings).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.global-chatbot-settings-saved.message")),this.displayChatbotsDropdownSwitch.control.markAsPristine()})}openChatbot(e){if(e){const t=`/innovationstudio/index.html#/app/bundle/${e[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId]}/ichatbot/${encodeURIComponent(e[D.RX_CHATBOTS.chatbotSettings.recordFieldIds.name])}`;window.open(t)}}refreshChatbotGrid(){this.chatbotConfigurationsRecordGrid.api.refresh().subscribe()}}fs.\u0275fac=function(e){return new(e||fs)(o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](D.RxChatbotDefinitionService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService))},fs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:fs,selectors:[["rx-admin-chatbots"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ot,7),o["\u0275\u0275viewQuery"](kt,7),o["\u0275\u0275viewQuery"](jt,5,r.NgModel)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.chatbotConfigurationsRecordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.nameColumnTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.displayChatbotsDropdownSwitch=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:10,consts:[[3,"header"],[1,"pb-4",3,"multiselect"],[3,"title","isOpen"],[3,"config"],["chatbotConfigurationsRecordGrid",""],[3,"title","isOpen",4,"ngIf"],["nameColumnTemplate",""],["name","displayChatbotsDropdown",1,"d-block",3,"label","ngModel","ngModelChange"],["displayChatbotsDropdownSwitch","ngModel"],["rx-id","save-button","adapt-button","","btn-type","primary","size","small","type","button",1,"mt-4",3,"disabled","click"],["href","javascript:void(0)",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-accordion",1),o["\u0275\u0275elementStart"](3,"adapt-accordion-tab",2),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275element"](5,"rx-record-grid",3,4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Pt,8,12,"adapt-accordion-tab",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,Nt,3,3,"ng-template",null,6,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,6,"com.bmc.arsys.rx.client.admin.chatbots.header.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("multiselect",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("title",o["\u0275\u0275pipeBind1"](4,8,t.sections.chatbotConfigurations.title))("isOpen",t.sections.chatbotConfigurations.isExpanded),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isAdministrator))},directives:[s.AdminSettingsComponent,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,d.RecordGridComponent,n.NgIf,a.AdaptRxSwitchComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent],pipes:[u.TranslatePipe,f.RxDefinitionNamePipe],encapsulation:2});class gs{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-chatbots",componentFactory:this.componentFactoryResolver.resolveComponentFactory(fs),name:"Chatbots",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}var vs,xs;gs.\u0275fac=function(e){return new(e||gs)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},gs.\u0275mod=o["\u0275\u0275defineNgModule"]({type:gs,declarations:[fs],imports:[a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxSwitchModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,d.RecordGridModule,s.RenameDefinitionModalModule,f.RxDefinitionModule,l.RxDirectivesModule,u.TranslateModule]}),gs.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxSwitchModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,d.RecordGridModule,s.RenameDefinitionModalModule,f.RxDefinitionModule,l.RxDirectivesModule,u.TranslateModule]]}),function(e){e.Chat="chat",e.ChatByUser="chatbyuser",e.Classify="classify",e.SearchDiskUsage="searchdiskusage",e.SearchDocumentUsage="searchdocumentusage",e.Search="search"}(vs||(vs={})),function(e){e.Area="area",e.HorizontalColumn="horizontal-column"}(xs||(xs={}));const ys={sections:[{id:vs.Chat,title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-service-chatbot.title",groups:[{id:vs.Chat,label:"com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-conversations.label",unit:"N",charts:[{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.conversations.title",type:xs.HorizontalColumn},{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.conversation-summary.title",type:xs.Area}]}]},{id:vs.ChatByUser,title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.chatbot-users.title",groups:[{id:vs.ChatByUser,unit:"N",label:"com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-users.label",charts:[{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.users.title",type:xs.HorizontalColumn},{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.user-summary.title",type:xs.Area}]}]},{id:vs.Classify,title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-service-automation.title",groups:[{id:vs.Classify,label:"com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-api-calls.label",unit:"N",charts:[{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.api-calls.title",type:xs.HorizontalColumn},{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.api-call-summary.title",type:xs.Area}]}]},{id:vs.Search,title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-search.title",groups:[{id:vs.SearchDocumentUsage,label:"com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-documents.label",unit:"N",capacityName:"Count",charts:[{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.documents.title",type:xs.HorizontalColumn},{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.document-summary.title",type:xs.Area}]},{id:vs.SearchDiskUsage,label:"com.bmc.arsys.rx.client.admin.cognitive-consumption.document-size.label",unit:"GB",capacityName:"Size",charts:[{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.document-storage.title",type:xs.HorizontalColumn},{title:"com.bmc.arsys.rx.client.admin.cognitive-consumption.document-storage-summary.title",type:xs.Area}]}]}],settings:{countType:"BY_MONTH",licenseType:"com.bmc.arsys.rx.services.cognitive.CognitiveService",fields:{emailsAddressFieldId:103,consumedCapacityField:"consumedCapacity",thresholdReachedField:"thresholdReached",notificationDateField:"notificationDate",recipientsField:"recipients"}}},bs="/api/rx/application/telemetry/notification/config";class Cs{constructor(e){this.httpClient=e}getCognitiveConsumptionNotificationConfig(e){return this.httpClient.get(bs,{params:{action:e.action,domain:e.domain}})}postCognitiveConsumptionNotificationConfigEntity(e){return this.httpClient.post(bs,e)}putCognitiveConsumptionNotificationConfigEntity(e){return this.httpClient.put(bs,e)}getCognitiveConsumptionNotificationHistory(e){return this.httpClient.get("/api/rx/application/telemetry/notification/history",{params:{action:e.action,domain:e.domain}})}getCognitiveLicenseUsage(e,t,i){return this.httpClient.get(`/api/rx/application/license/licenseusage/${e}/${t}`,{params:{countType:i.countType,endDate:(0,A.default)(i.endDate,"YYYY-MM").endOf("month").format("YYYY-MM-DD")+"T23:59:59.999Z",startDate:(0,A.default)(i.startDate,"YYYY-MM").startOf("month").format("YYYY-MM-DD")+"T00:00:00.000Z"}})}}Cs.\u0275fac=function(e){return new(e||Cs)(o["\u0275\u0275inject"](b.HttpClient))},Cs.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Cs,factory:Cs.\u0275fac,providedIn:"root"});class Ss{constructor(e,t,i,n,o,r){this.activeModalRef=e,this.rxCognitiveConsumptionService=t,this.rxCsvService=i,this.rxFileService=n,this.rxUnitService=o,this.translateService=r,this.dateTimePickerMode=a.RxDatetimePickerMode.DateTime,this.parameters={startDate:"",endDate:"",countType:ys.settings.countType},this.periodOptions=[{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-twelve-months.label"),value:"12"},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-twenty-four-months.label"),value:"24"},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-thirty-six-months.label"),value:"36"},{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.selected-time-period.label"),value:"custom"}],this.csvData=[["Operation","Application","Period","Count"]],this.modalData=this.activeModalRef.getData()}ngOnInit(){this.period=(0,m.head)(this.periodOptions).value}onDownloadClick(){"custom"===this.period?(this.parameters.endDate=(0,A.default)((0,m.last)(this.customRange)).format("YYYY-MM"),this.parameters.startDate=(0,A.default)((0,m.head)(this.customRange)).format("YYYY-MM")):(this.parameters.endDate=(0,A.default)().format("YYYY-MM"),this.parameters.startDate=(0,A.default)(this.parameters.endDate,"YYYY-MM").add(-1*(0,m.parseInt)(this.period,10),"months").format("YYYY-MM"));const e=(0,m.filter)(ys.sections,e=>(0,m.includes)(this.modalData.sectionIds,e.id)),t=[];(0,m.forEach)(e,e=>{(0,m.forEach)(e.groups,e=>{t.push(e.id)})}),(0,h.forkJoin)((0,m.map)(t,e=>this.rxCognitiveConsumptionService.getCognitiveLicenseUsage(ys.settings.licenseType,e,this.parameters))).subscribe(t=>{(0,m.forEach)(t,t=>{const i=(0,m.find)(e,e=>(0,m.some)(e.groups,["id",t.operation])),n=(0,m.find)(i.groups,["id",t.operation]);(0,m.forEach)(t.licenseUsageCount,e=>{(0,m.forEach)(e.count,(t,o)=>{this.csvData.push([`${this.translateService.instant(i.title)} - ${this.translateService.instant((0,m.head)(n.charts).title)}`,e.bundleId,o,n.unit===g.RX_SIZE_UNITS.gigabytes.unit?this.rxUnitService.getValueWithUnits(t):t])})})});const i=this.rxCsvService.convertToCsv(this.csvData);this.rxFileService.createAndDownloadBlob(i,"text/csv;charset=utf-8;","report","csv"),this.activeModalRef.close()})}onCancelClick(){this.activeModalRef.dismiss()}}Ss.\u0275fac=function(e){return new(e||Ss)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](Cs),o["\u0275\u0275directiveInject"](g.RxCsvService),o["\u0275\u0275directiveInject"](g.RxFileService),o["\u0275\u0275directiveInject"](g.RxUnitService),o["\u0275\u0275directiveInject"](u.TranslateService))},Ss.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ss,selectors:[["rx-download-report-modal"]],decls:13,vars:14,consts:[[1,"modal-body"],["name","period",3,"ngModel","ngModelChange"],[3,"label","value",4,"ngFor","ngForOf"],["name","customDatetimeRange",3,"label","mode","disabled","ngModel","ngModelChange"],[1,"modal-footer"],["rx-id","download-button","adapt-button","","btn-type","primary","type","button",3,"click"],["rx-id","cancel-button","adapt-button","","btn-type","secondary","type","button",3,"click"],[3,"label","value"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form"),o["\u0275\u0275elementStart"](2,"adapt-rx-radiobutton-group",1),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.period=e}),o["\u0275\u0275template"](3,Vt,2,4,"adapt-rx-radiobutton",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-datetime-range",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.customRange=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"button",5),o["\u0275\u0275listener"]("click",function(){return t.onDownloadClick()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"button",6),o["\u0275\u0275listener"]("click",function(){return t.onCancelClick()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.period),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.periodOptions),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("label"," ",o["\u0275\u0275pipeBind1"](5,8,"com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.select-range.label"),""),o["\u0275\u0275property"]("mode",t.dateTimePickerMode)("disabled","custom"!==t.period)("ngModel",t.customRange),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,10,"com.bmc.arsys.rx.client.common.download.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,12,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxRadiobuttonGroupComponent,r.NgControlStatus,r.NgModel,n.NgForOf,a.AdaptRxDatetimeRangeComponent,a.AdaptButtonComponent,a.AdaptRxRadiobuttonComponent],pipes:[u.TranslatePipe],encapsulation:2});class ws{constructor(e,t,i){this.activeModalRef=e,this.rxCognitiveConsumptionService=t,this.translateService=i,this.modalData=this.activeModalRef.getData()}ngOnInit(){const e={fieldDefinitions:[{id:ys.settings.fields.consumedCapacityField,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:ys.settings.fields.thresholdReachedField,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:ys.settings.fields.notificationDateField,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.dateTime},{id:ys.settings.fields.recipientsField,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},t=[{index:0,fieldId:ys.settings.fields.consumedCapacityField,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.consumption-measure.title")},{index:1,fieldId:ys.settings.fields.thresholdReachedField,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.threshold-reached.title")},{index:2,fieldId:ys.settings.fields.notificationDateField,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.notification-date.title")},{index:3,fieldId:ys.settings.fields.recipientsField,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.email-recipient.title")}];this.recordGridConfig=(0,h.of)({columns:t,enableFiltering:!1,useExternalFiltering:!1,enableRowSelection:d.RowSelectionMode.Multiple,styles:"flex-fill",getRecordDefinition:()=>(0,h.of)(e),getData:()=>this.rxCognitiveConsumptionService.getCognitiveConsumptionNotificationHistory({action:this.modalData.groupId,domain:this.modalData.domain}).pipe((0,v.map)(e=>({data:e.entity,totalSize:e.entity.length})))})}onCloseClick(){this.activeModalRef.close()}}ws.\u0275fac=function(e){return new(e||ws)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](Cs),o["\u0275\u0275directiveInject"](u.TranslateService))},ws.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ws,selectors:[["rx-cognitive-consumption-notification-history-modal"]],decls:6,vars:4,consts:[[1,"modal-body","d-flex"],[3,"config"],[1,"modal-footer"],["rx-id","close-button","adapt-button","","btn-type","secondary","type","button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-record-grid",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"button",3),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,2,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[d.RecordGridComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]     rx-record-grid{height:auto}"]});class Is extends l.RxModalClass{constructor(e,t,i,n,o,r,a,s){super(e,s),this.activeModalRef=e,this.adaptModalService=t,this.rxCognitiveConsumptionService=i,this.rxCurrentUserService=n,this.rxLogService=o,this.rxNotificationService=r,this.translateService=a,this.injector=s,this.isEdit=!1,this.selectedEmailRecipients=[],this.thresholds=[{id:1,value:0},{id:2,value:0},{id:3,value:0}],this.modalData=this.activeModalRef.getData(),this.isAdministrator=this.rxCurrentUserService.isAdministrator()}ngOnInit(){super.ngOnInit(),(0,m.forEach)(ys.sections,e=>{const t=(0,m.find)(e.groups,["id",this.modalData.groupId]);t&&(this.group=t)}),this.label=`${this.translateService.instant(this.group.label)} (${this.group.unit})`,this.entity={action:this.modalData.groupId,capacity:0,domain:"com.bmc.dsm.innovationsuite.cognitive",emailIds:[],thresholds:[null,null,null]},this.busy=this.rxCognitiveConsumptionService.getCognitiveConsumptionNotificationConfig({action:this.entity.action,domain:this.entity.domain}).pipe((0,v.catchError)(e=>302===(0,m.get)(e,"error[0].messageNumber")?h.EMPTY:(0,h.throwError)(e))).subscribe(e=>{this.isEdit=!0,(0,m.merge)(this.entity,e.entity),this.thresholds=(0,m.map)(this.entity.thresholds,(e,t)=>({id:t+1,value:e||0})),this.selectedEmailRecipients=this.entity.emailIds}),this.recordGridConfig=(0,h.of)({enableFiltering:!1,recordDefinitionName:"User",enableRowSelection:d.RowSelectionMode.Multiple,filterExpression:`('${ys.settings.fields.emailsAddressFieldId}' != $NULL$)`,columns:[{index:0,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.full-name.title")},{index:1,fieldId:String(ys.settings.fields.emailsAddressFieldId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.primary-email-address.title")}]})}isDirty(){return this.notificationForm.dirty}canSelectRecipients(){const e=this.availableEmailNotificationRecipientsRecordGrid.api.getSelectedRows();return(0,m.inRange)((0,m.add)(e.length,this.selectedEmailRecipients.length),0,11)}getEmptyCapacityValueValidator(){return e=>{let t=null;return e.touched&&!e.value&&(t={emptyCapacityValue:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity-empty-validation.message")}}),t}}getEmptyThresholdValuesValidator(){return e=>{let t=null;return e.touched&&!e.value&&(0,m.every)(this.thresholds,["value",0])&&(t={emptyThresholdValues:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity-threshold-validation.message")}}),t}}isSaveButtonDisabled(){return this.notificationForm.invalid||(0,m.isEmpty)(this.selectedEmailRecipients)}onCloseClick(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}onMoveToSelectedClick(){const e=this.availableEmailNotificationRecipientsRecordGrid.api.getSelectedRows();this.canSelectRecipients()&&(0,m.forEach)(e,e=>{(0,m.includes)(this.selectedEmailRecipients,e[ys.settings.fields.emailsAddressFieldId])||this.selectedEmailRecipients.push(e[ys.settings.fields.emailsAddressFieldId])})}onNotificationHistoryClick(){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.notification-history.title"),content:ws,size:S.OpenViewActionModalSize.Large,data:{domain:this.entity.domain,groupId:this.modalData.groupId}}).catch(m.noop)}onRemoveRecipientClick(e){(0,m.pullAt)(this.selectedEmailRecipients,[e])}onSaveClick(){(0,m.forEach)(this.notificationForm.controls,e=>{e.markAsTouched(),e.updateValueAndValidity()});const e={action:this.entity.action,capacity:this.entity.capacity,domain:this.entity.domain,emailIds:this.selectedEmailRecipients,thresholds:(0,m.compact)((0,m.map)(this.thresholds,"value"))};this.notificationForm.valid&&(this.isEdit?this.rxCognitiveConsumptionService.putCognitiveConsumptionNotificationConfigEntity(e).subscribe(()=>{this.activeModalRef.close(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message"))}):this.rxCognitiveConsumptionService.postCognitiveConsumptionNotificationConfigEntity(e).subscribe(()=>{this.activeModalRef.close(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message"))}))}onThresholdCounterModelChange(){const e=(0,m.omit)(this.notificationForm.controls,"capacity");(0,m.forEach)(e,e=>{e.markAsTouched(),e.updateValueAndValidity()})}}Is.\u0275fac=function(e){return new(e||Is)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](a.AdaptModalService),o["\u0275\u0275directiveInject"](Cs),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxLogService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},Is.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Is,selectors:[["rx-cognitive-consumption-notification-modal"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Lt,7),o["\u0275\u0275viewQuery"](Bt,7,r.NgForm)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.availableEmailNotificationRecipientsRecordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.notificationForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:39,vars:35,consts:[[1,"modal-body","d-flex"],[3,"options"],[1,"d-flex","flex-column"],["notificationForm","ngForm"],[1,"mb-4"],[1,"m-0","mb-4"],["name","capacity","placeholder","0","min","0","max","100","required","",3,"label","rxCustomValidators","ngModel","ngModelChange"],[1,"d-flex","justify-content-between"],["placeholder","0","min","0","max","100","adaptIntegerNumber","",3,"width","name","label","rxCustomValidators","ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"d-flex","h-100"],[1,"col-6","d-flex","flex-column","h-100","p-0"],[1,"flex-grow-1",3,"config"],["availableEmailNotificationRecipientsRecordGrid",""],["adapt-button","","btn-type","secondary","type","button","rx-id","move-to-selected-button",1,"d-icon-angle_right","align-self-center","mx-4",3,"disabled","click"],[1,"col","d-flex","flex-column","h-100","p-0"],["class","list-group",4,"ngIf"],["class","card h-100",4,"ngIf"],[1,"modal-footer","d-flex"],["rx-id","notification-history-button","adapt-button","","btn-type","secondary","type","button",1,"mr-auto",3,"click"],["rx-id","save-button","adapt-button","","btn-type","primary","type","button",3,"disabled","click"],["rx-id","close-button","adapt-button","","btn-type","secondary","size","small","type","button",3,"click"],["placeholder","0","min","0","max","100","adaptIntegerNumber","",3,"name","label","rxCustomValidators","ngModel","ngModelChange"],[1,"list-group"],["class","list-group-item d-flex justify-content-between p-0 px-2",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","justify-content-between","p-0","px-2"],["adapt-button","","btn-type","tertiary","type","button","rx-id","remove-recipient",1,"d-icon-trash_adapt",3,"click"],[1,"card","h-100"],[1,"card-block"],["type","objects",3,"label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-busy-indicator",1),o["\u0275\u0275elementStart"](2,"form",2,3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"h5",5),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-counter",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.entity.capacity=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",4),o["\u0275\u0275elementStart"](10,"h5",5),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",7),o["\u0275\u0275template"](14,$t,1,6,"adapt-rx-counter",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",9),o["\u0275\u0275elementStart"](16,"div",10),o["\u0275\u0275elementStart"](17,"h5",5),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](20,"rx-record-grid",11,12),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"button",13),o["\u0275\u0275listener"]("click",function(){return t.onMoveToSelectedClick()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",14),o["\u0275\u0275elementStart"](24,"h5",5),o["\u0275\u0275text"](25),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](27,zt,2,1,"ul",15),o["\u0275\u0275template"](28,Ut,4,3,"div",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",17),o["\u0275\u0275elementStart"](30,"button",18),o["\u0275\u0275listener"]("click",function(){return t.onNotificationHistoryClick()}),o["\u0275\u0275text"](31),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](33,"button",19),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"button",20),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](37),o["\u0275\u0275pipe"](38,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](33,Ae,t.busy)),o["\u0275\u0275advance"](3),o["\u0275\u0275styleProp"]("width",32,"%"),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,19,"com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",t.label)("rxCustomValidators",t.getEmptyCapacityValueValidator())("ngModel",t.entity.capacity),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,21,"com.bmc.arsys.rx.client.admin.cognitive-consumption.capacity-consumption-thresholds.title")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.thresholds),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,23,"com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.available-email-recipient.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.canSelectRecipients()),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](26,25,"com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.selected-email-recipient.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.selectedEmailRecipients.length),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.selectedEmailRecipients.length),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](32,27,"com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.notification-history.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](35,29,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](38,31,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[l.RxBusyIndicatorComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxCounterComponent,r.RequiredValidator,l.RxCustomValidatorsDirective,r.NgControlStatus,r.NgModel,n.NgForOf,d.RecordGridComponent,a.AdaptButtonComponent,n.NgIf,a.AdaptEmptyStateComponent],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]     .card-block{display:flex;justify-content:center;align-items:center}"]});class _s{constructor(e,t,i){this.rxStringService=e,this.rxUnitService=t,this.translateService=i,this.areaChartType=xs.Area,this.horizontalColumnChartType=xs.HorizontalColumn}ngOnInit(){if(this.chartConfig={height:400,width:500,header:{title:this.translateService.instant(this.chart.title),allowHideLegend:!0},suppressLegend:this.isCapacityAvailable(),xAxis:{title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.x-axis-months.title"),categories:[]},yAxis:{title:`${this.translateService.instant(this.groupData.label)} (${this.groupData.unit})`},series:[]},this.chart.type===xs.HorizontalColumn){(0,m.assign)(this.chartConfig,{type:"column",seriesDisplay:"horizontal",showSlider:!0,slidePointsCount:3});const e=(0,m.flow)(e=>(0,m.map)(e,"count"),e=>(0,m.reduce)(e,m.assign,{}),e=>(0,m.mapValues)(e,(0,m.constant)(0)))(this.licenceUsageCount);(0,m.forEach)(this.licenceUsageCount,t=>{(0,m.defaults)(t.count,e)})}(0,m.forEach)(this.licenceUsageCount,e=>{const t=this.groupData.capacityName||this.rxStringService.prettify((0,m.last)((0,m.split)(e.bundleId,"."))),i=(0,m.map)(e.count,(e,t)=>{let i;const n=this.groupData.unit===g.RX_SIZE_UNITS.gigabytes.unit?this.rxUnitService.getValueWithoutUnitsByUnitType(e,g.RX_SIZE_UNITS.gigabytes.unit):e;return i=this.chart.type===xs.Area?{x:(0,A.default)(t).valueOf(),y:n}:n,i});this.chartConfig.series.push({name:t,data:i})});const e=(0,m.head)(this.licenceUsageCount);this.chartConfig.xAxis.categories=(0,m.map)((0,m.keys)(e.count),e=>(0,A.default)(e).format("MMM YYYY")),this.isCapacityAvailable()&&(this.capacity={title:`Capacity (${this.groupData.unit})`,value:this.groupData.unit===g.RX_SIZE_UNITS.gigabytes.unit?this.rxUnitService.getValueWithoutUnitsByUnitType(e.capacity,g.RX_SIZE_UNITS.gigabytes.unit):e.capacity})}formatXAxisVal(e){return(0,A.default)(e).format("MMM YYYY")}isCapacityAvailable(){return Boolean(this.groupData.capacityName)}}_s.\u0275fac=function(e){return new(e||_s)(o["\u0275\u0275directiveInject"](g.RxStringService),o["\u0275\u0275directiveInject"](g.RxUnitService),o["\u0275\u0275directiveInject"](u.TranslateService))},_s.\u0275cmp=o["\u0275\u0275defineComponent"]({type:_s,selectors:[["rx-cognitive-consumption-chart"]],inputs:{chart:"chart",groupData:"groupData",licenceUsageCount:"licenceUsageCount"},decls:7,vars:3,consts:[[3,"ngSwitch"],[3,"header","height","width","xAxis","yAxis","series","tooltip","type","showSlider","slidePointsCount","seriesDisplay","suppressLegend","thresholdLine",4,"ngSwitchCase"],[3,"header","height","width","xAxis","yAxis","series","tooltip","suppressLegend","thresholdLine",4,"ngSwitchCase"],["horizontalColumnChartTooltip",""],["areaChartTooltip",""],[3,"header","height","width","xAxis","yAxis","series","tooltip","type","showSlider","slidePointsCount","seriesDisplay","suppressLegend","thresholdLine"],[3,"header","height","width","xAxis","yAxis","series","tooltip","suppressLegend","thresholdLine"],[1,"chart-tooltip-color-spot"],[1,"chart-tooltip-category"],[1,"font-weight-semibold"],[4,"ngIf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementContainerStart"](0,0),o["\u0275\u0275template"](1,qt,1,13,"adapt-stacked-chart",1),o["\u0275\u0275template"](2,Xt,1,9,"adapt-area-graph",2),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275template"](3,Wt,9,6,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](5,Qt,13,8,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("ngSwitch",t.chart.type),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.horizontalColumnChartType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.areaChartType))},directives:[n.NgSwitch,n.NgSwitchCase,R.AdaptStackedChartComponent,R.AdaptAreaGraphComponent,n.NgIf],encapsulation:2});class Ds{constructor(e,t,i){this.rxModalService=e,this.rxCognitiveConsumptionService=t,this.translateService=i,this.parameters={startDate:"",endDate:(0,A.default)().format("YYYY-MM"),countType:ys.settings.countType}}ngOnInit(){this.generateCognitiveConsumptionGroup()}generateCognitiveConsumptionGroup(){this.licenceUsageCount=[],this.groupData=(0,m.omit)(this.group,["charts"]),this.parameters.startDate=(0,A.default)(this.parameters.endDate,"YYYY-MM").add(-36,"months").format("YYYY-MM"),this.busy=this.rxCognitiveConsumptionService.getCognitiveLicenseUsage(ys.settings.licenseType,this.group.id,this.parameters).subscribe(e=>{(0,m.forEach)(e.licenseUsageCount,e=>{e&&!(0,m.isEmpty)(e.count)&&this.licenceUsageCount.push(e)})})}onNotificationsClick(){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption-group.add-edit-notifications.title"),content:Is,size:"rx-lg",data:{groupId:this.group.id}}).catch(m.noop)}}Ds.\u0275fac=function(e){return new(e||Ds)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Cs),o["\u0275\u0275directiveInject"](u.TranslateService))},Ds.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ds,selectors:[["rx-cognitive-consumption-group"]],inputs:{group:"group",isAdministrator:"isAdministrator",sectionId:"sectionId"},decls:3,vars:2,consts:[["class","d-icon-envelope_o mb-4","adapt-button","","btn-type","tertiary","type","button","rx-id","notifications-button",3,"click",4,"ngIf"],[1,"d-flex","flex-row","flex-wrap"],["class","card mb-4 mr-4 placeholder",4,"ngFor","ngForOf"],["adapt-button","","btn-type","tertiary","type","button","rx-id","notifications-button",1,"d-icon-envelope_o","mb-4",3,"click"],[1,"card","mb-4","mr-4","placeholder"],[1,"card-block","p-4"],[3,"options"],[4,"ngIf"],[3,"chart","groupData","licenceUsageCount"],[1,"m-0"],[1,"mt-6","pt-4"],["type","chart",3,"label"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,Kt,3,3,"button",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275template"](2,ei,5,5,"div",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("ngIf",t.isAdministrator),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.group.charts))},directives:[n.NgIf,n.NgForOf,a.AdaptButtonComponent,l.RxBusyIndicatorComponent,_s,a.AdaptEmptyStateComponent],pipes:[u.TranslatePipe],styles:[".placeholder[_ngcontent-%COMP%]{min-width:550px;min-height:400px}"]});class Rs{constructor(e,t,i,n){this.adaptModalService=e,this.rxLicenseDataPageService=t,this.rxCurrentUserService=i,this.translateService=n}ngOnInit(){this.isAdministrator=this.rxCurrentUserService.isAdministrator(),this.busy=this.rxLicenseDataPageService.get({params:{startIndex:-1,pageSize:0,propertySelection:["name","serviceLicensedCount"].join(",")}}).subscribe(e=>{const t=(0,m.find)(e.data[0].serviceLicenseDescriptors,["name","HelixCognitiveChatbotPerUser"]).licensed;this.sectionIds=[t?vs.ChatByUser:vs.Chat,vs.Classify,vs.Search],this.sections=(0,m.filter)(ys.sections,e=>(0,m.includes)(this.sectionIds,e.id))})}onDownloadClick(){this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-consumption.download-csv-file.title"),type:"default",size:"sm",content:Ss,data:{sectionIds:this.sectionIds}}).catch(m.noop)}onRefreshClick(){this.cognitiveConsumptionGroups.forEach(e=>{e.generateCognitiveConsumptionGroup()})}}Rs.\u0275fac=function(e){return new(e||Rs)(o["\u0275\u0275directiveInject"](a.AdaptModalService),o["\u0275\u0275directiveInject"](f.RxLicenseDataPageService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](u.TranslateService))},Rs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Rs,selectors:[["rx-admin-cognitive-consumption"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ds,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.cognitiveConsumptionGroups=e)}},decls:10,vars:11,consts:[[3,"header","busy"],[1,"mb-4"],["adapt-button","","btn-type","tertiary","type","button","rx-id","refresh-button",1,"d-icon-refresh_adapt",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","download-button",1,"d-icon-download_csv",3,"click"],[4,"ngFor","ngForOf"],[1,"m-0","mb-4"],[3,"group","sectionId","isAdministrator",4,"ngFor","ngForOf"],[3,"group","sectionId","isAdministrator"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.onRefreshClick()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"button",3),o["\u0275\u0275listener"]("click",function(){return t.onDownloadClick()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](9,ii,5,4,"div",4),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,5,"com.bmc.arsys.rx.client.admin.cognitive-consumption.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.client.common.refresh.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,9,"com.bmc.arsys.rx.client.common.download.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.sections))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,n.NgForOf,Ds],pipes:[u.TranslatePipe],encapsulation:2});class As{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-cognitive-consumption",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Rs),name:"Cognitive consumption",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}As.\u0275fac=function(e){return new(e||As)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},As.\u0275mod=o["\u0275\u0275defineNgModule"]({type:As,declarations:[Rs,_s,Ds,ws,Is,Ss],imports:[a.AdaptButtonModule,R.AdaptChartsModule,a.AdaptEmptyStateModule,a.AdaptModalModule,a.AdaptRxCounterModule,a.AdaptRxDatetimeModule,a.AdaptRxListBuilderModule,a.AdaptRxRadiobuttonModule,s.AdminSettingsModule,n.CommonModule,d.RecordGridModule,l.RxBusyIndicatorModule,l.RxDirectivesModule,r.FormsModule,u.TranslateModule]}),As.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptButtonModule,R.AdaptChartsModule,a.AdaptEmptyStateModule,a.AdaptModalModule,a.AdaptRxCounterModule,a.AdaptRxDatetimeModule,a.AdaptRxListBuilderModule,a.AdaptRxRadiobuttonModule,s.AdminSettingsModule,n.CommonModule,d.RecordGridModule,l.RxBusyIndicatorModule,l.RxDirectivesModule,r.FormsModule,u.TranslateModule]]});const Ts={definitionName:"Cognitive Service Data Set Descriptor",resourceType:"com.bmc.arsys.rx.services.cognitive.domain.SearchDataSource",queryExpression:"'1732' = 2 AND '61001' = ",defaultLocale:"en",maxCollectionsPerProject:5,datasetTypes:{bmcHelixPlatForm:0,external:10},searchDatasetTypeOptions:[{displayName:"com.bmc.arsys.rx.client.admin.cognitive-search.bmc-helix-platform-data-set.label",datasetType:0},{displayName:"com.bmc.arsys.rx.client.admin.cognitive-search.external-data-set.label",datasetType:10}],externalDatasetSourceTypes:{rkm:"10",other:"20"},fields:{datasetId:1730,datasetName:1731,searchType:1732,datasetError:1733,dateLastSubmitted:1735,bundleId:61001,locale:1737,dataSource:1738,newDatasetId:1740,searchDatasetType:1815,externalDatasetSource:1817,confidenceThreshold:1821,projectId:1832},datasetStatus:{failed:{id:3,label:"com.bmc.arsys.rx.client.admin.cognitive-search.failed.label",variant:"danger"},inProgress:{id:5,label:"com.bmc.arsys.rx.client.admin.cognitive-search.in-progress.label",variant:"info"},created:{id:6,label:"com.bmc.arsys.rx.client.admin.cognitive-search.created.label",variant:"success"}},templateFields:{templateType:1818},templateTypes:{webChannel:"10",nonWebChannel:"20"},templateDefinitionName:"Cognitive Service Chatbot Knowledge Article Template",templateAssociationDefinitionName:"Cognitive Service Data Set To Cognitive Service Chatbot Knowledge Article Template"};class Fs extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.cognitive.datapage.CognitiveSearchProjectDataPageQuery"),this.injector=e}}Fs.\u0275fac=function(e){return new(e||Fs)(o["\u0275\u0275inject"](o.Injector))},Fs.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Fs,factory:Fs.\u0275fac,providedIn:"root"});class Es extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.cognitive.datapage.CognitiveSearchCollectionDataPageQuery"),this.injector=e}}Es.\u0275fac=function(e){return new(e||Es)(o["\u0275\u0275inject"](o.Injector))},Es.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Es,factory:Es.\u0275fac,providedIn:"root"});class Ms extends l.RxModalClass{constructor(e,t,i,n,o,r,a,l,c){super(t,c),this.formBuilder=e,this.dockedPanelContext=t,this.rxRecordInstanceService=i,this.rxNotificationService=n,this.rxBundleCacheService=o,this.rxCognitiveSearchProjectDataPageService=r,this.rxCognitiveSearchCollectionDataPageService=a,this.translateService=l,this.injector=c,this.externalDatasetSourceOptions=[{value:"10",displayValue:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.rkm.label")},{value:"20",displayValue:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.other.label")}],this.options={label:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition-name.label"),definitionType:s.RxDefinitionPickerType.Record,required:!0},this.searchLocaleOptions=["en","ar","fr","de","ja","it","pt","es"]}ngOnInit(){if(super.ngOnInit(),this.isEditMode=this.dockedPanelContext.getData().isEditMode,this.datasetType=this.dockedPanelContext.getData().datasetType,this.formatDataSource=this.dockedPanelContext.getData().formatDataSource,this.searchDatasetForm=this.formBuilder.group({datasetName:null,description:null,locale:[],recordDefinition:null,projectId:[],collectionId:[],externalDatasetSource:[],confidenceThreshold:0}),this.collections$=this.searchDatasetForm.controls.projectId.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.map)(e=>this.isExternalDataset()?null==e?void 0:e[0]:null),(0,v.filter)(Boolean),(0,v.switchMap)(e=>this.rxCognitiveSearchCollectionDataPageService.get({params:{projectId:e.id}})),(0,v.map)(e=>e.data.sort((e,t)=>e.name.localeCompare(t.name))),(0,v.startWith)([]),(0,v.tap)(e=>{!this.isEditMode&&this.isExternalDataset()&&(this.searchDatasetForm.controls.collectionId.setValue([]),e.length?this.searchDatasetForm.controls.collectionId.enable():this.searchDatasetForm.controls.collectionId.disable())})),this.projects$=this.rxCognitiveSearchProjectDataPageService.get().pipe((0,v.map)(e=>e.data.sort((e,t)=>e.name.localeCompare(t.name))),(0,v.startWith)([]),(0,v.shareReplay)(1),(0,v.tap)(()=>{this.isEditMode||this.searchDatasetForm.controls.projectId.enable()}),(0,v.map)(e=>!this.isEditMode&&this.isHelixPlatformDataset()?e.filter(e=>e.collectionCount<Ts.maxCollectionsPerProject):e)),this.isEditMode){this.searchDatasetForm.get("datasetName").disable(),this.searchDatasetForm.get("description").disable(),this.searchDatasetForm.get("locale").disable(),this.searchDatasetForm.get("recordDefinition").disable(),this.searchDatasetForm.get("projectId").disable(),this.searchDatasetForm.get("collectionId").disable(),this.searchDatasetForm.get("externalDatasetSource").disable();const e=this.rxRecordInstanceService.get(Ts.definitionName,this.dockedPanelContext.getData().recordId).pipe((0,v.tap)(e=>this.recordInstance=e)),t=(0,h.forkJoin)([e,this.projects$]).pipe((0,v.switchMap)(([e,t])=>{const i=e.fieldInstances[Ts.fields.projectId].value,n=t.find(e=>e.id===i);return n?this.searchDatasetForm.controls.projectId.setValue([n]):this.searchDatasetForm.controls.projectId.setValue([{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.project-not-found.label"),id:i}],{emitEvent:!1}),n?this.rxCognitiveSearchCollectionDataPageService.get({params:{projectId:i}}):this.rxCognitiveSearchCollectionDataPageService.getEmptyDataPage()}),(0,v.map)(e=>e.data),(0,v.withLatestFrom)(e)).subscribe(([e,t])=>{const i=t.fieldInstances[Ts.fields.datasetId].value,n=e.find(e=>e.id===i);this.searchDatasetForm.controls.collectionId.setValue([n||{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.collection-not-found.label"),id:i}]),this.setFormControlValues()});this.busyConfig={busy:t,loaderType:a.LoaderType.SECTION,message:"Loading"}}else this.searchDatasetForm.get("locale").setValue([this.searchLocaleOptions[0]]),this.searchDatasetForm.get("confidenceThreshold").setValue(0),this.searchDatasetForm.get("projectId").disable(),this.searchDatasetForm.get("collectionId").disable(),this.isHelixPlatformDataset()?this.searchDatasetForm.get("externalDatasetSource").disable():this.isExternalDataset()&&(this.searchDatasetForm.get("recordDefinition").disable(),this.searchDatasetForm.get("externalDatasetSource").setValue([(0,m.find)(this.externalDatasetSourceOptions,{value:Ts.externalDatasetSourceTypes.rkm})])),this.rxRecordInstanceService.getNew(Ts.definitionName).subscribe(e=>this.recordInstance=e)}isDirty(){return this.searchDatasetForm.dirty}isHelixPlatformDataset(){return this.datasetType===Ts.datasetTypes.bmcHelixPlatForm}isExternalDataset(){return this.datasetType===Ts.datasetTypes.external}setFormControlValues(){const e=(0,m.find)(Ts.datasetStatus,{id:this.recordInstance.fieldInstances[x.RX_RECORD_DEFINITION.coreFieldIds.status].value});this.statusAlert={content:this.translateService.instant(e.label),type:"inline",variant:e.variant},this.failedReasonAlert=this.recordInstance.fieldInstances[Ts.fields.datasetError].value?{content:this.recordInstance.fieldInstances[Ts.fields.datasetError].value,type:"page",variant:"warning",dismissible:!1}:null,this.searchDatasetForm.get("datasetName").setValue(this.recordInstance.fieldInstances[Ts.fields.datasetName].value),this.searchDatasetForm.get("description").setValue(this.recordInstance.fieldInstances[x.RX_RECORD_DEFINITION.coreFieldIds.description].value),this.searchDatasetForm.get("locale").setValue([this.recordInstance.fieldInstances[Ts.fields.locale].value]),this.isHelixPlatformDataset()?this.searchDatasetForm.get("recordDefinition").setValue(this.formatDataSource(this.recordInstance.fieldInstances[Ts.fields.dataSource].value)):this.isExternalDataset()&&this.searchDatasetForm.get("externalDatasetSource").setValue([(0,m.find)(this.externalDatasetSourceOptions,{value:String(this.recordInstance.fieldInstances[Ts.fields.externalDatasetSource].value)})]),this.searchDatasetForm.get("confidenceThreshold").setValue(this.recordInstance.fieldInstances[Ts.fields.confidenceThreshold].value)}optionFormatter(e){return e.displayValue||e.name}thresholdRangeValidator(){return e=>e.value&&!/^(0(\.[0-9]{1,6})?)|^(1(\.0{1,6})?)$/.test(e.value)?{thresholdOutOfRange:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.range-validation.message")}}:null}saveSearchDataset(){this.searchDatasetForm.markAsPristine(),this.isEditMode||(this.recordInstance.fieldInstances[Ts.fields.searchType].value=this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),this.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Ts.datasetStatus.inProgress.id),this.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,this.searchDatasetForm.get("description").value),this.recordInstance.setFieldValue(Ts.fields.datasetId,""),this.recordInstance.fieldInstances[Ts.fields.datasetId].value=this.recordInstance.setFieldValue(Ts.fields.datasetName,this.searchDatasetForm.get("datasetName").value),this.recordInstance.setFieldValue(Ts.fields.bundleId,this.rxBundleCacheService.bundleId),this.recordInstance.setFieldValue(Ts.fields.locale,this.searchDatasetForm.get("locale").value[0]),this.recordInstance.setFieldValue(Ts.fields.dateLastSubmitted,(0,A.default)()),this.recordInstance.setFieldValue(Ts.fields.searchDatasetType,this.datasetType),this.recordInstance.setFieldValue(Ts.fields.projectId,[this.searchDatasetForm.get("projectId").value[0].id]),this.isExternalDataset()?(this.recordInstance.setFieldValue(Ts.fields.datasetId,[this.searchDatasetForm.get("collectionId").value[0].id]),this.recordInstance.setFieldValue(Ts.fields.externalDatasetSource,this.searchDatasetForm.get("externalDatasetSource").value[0].value)):this.isHelixPlatformDataset()&&this.recordInstance.setFieldValue(Ts.fields.dataSource,JSON.stringify({resourceType:Ts.resourceType,recordDefinitions:[this.searchDatasetForm.get("recordDefinition").value]})),this.recordInstance.associationInstances=this.prepareAssociatedRecordInstance(this.recordInstance.fieldInstances[Ts.fields.datasetName].value)),this.recordInstance.setFieldValue(Ts.fields.confidenceThreshold,this.searchDatasetForm.get("confidenceThreshold").value),this.isEditMode?this.rxRecordInstanceService.save(this.recordInstance).subscribe(()=>this.successCallback()):this.rxRecordInstanceService.create(this.recordInstance).subscribe(()=>this.successCallback())}successCallback(){this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.search-data-save-successful.message")),this.dockedPanelContext.close(null)}prepareAssociatedRecordInstance(e){const t=(0,m.set)({},"nodeB",{pending:[{recordDefinitionName:Ts.templateDefinitionName,isNewInstance:!0,id:Ts.templateFields.templateType,fieldInstances:{[Ts.templateFields.templateType]:{id:Ts.templateFields.templateType,value:Ts.templateTypes.webChannel},[x.RX_RECORD_DEFINITION.coreFieldIds.description]:{id:x.RX_RECORD_DEFINITION.coreFieldIds.description,value:"Template for "+e}}},{recordDefinitionName:Ts.templateDefinitionName,isNewInstance:!0,id:Ts.templateFields.templateType,fieldInstances:{[Ts.templateFields.templateType]:{id:Ts.templateFields.templateType,value:Ts.templateTypes.nonWebChannel},[x.RX_RECORD_DEFINITION.coreFieldIds.description]:{id:x.RX_RECORD_DEFINITION.coreFieldIds.description,value:"Template for "+e}}}]});return(0,m.set)({},Ts.templateAssociationDefinitionName,t)}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}Ms.\u0275fac=function(e){return new(e||Ms)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxBundleCacheService),o["\u0275\u0275directiveInject"](Fs),o["\u0275\u0275directiveInject"](Es),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},Ms.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ms,selectors:[["rx-cognitive-search-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:27,vars:44,consts:[[1,"dp-body",3,"ngBusy"],["class","mb-1",4,"ngIf"],[3,"formGroup"],["rx-id","dataset-name","formControlName","datasetName","required","true",1,"form-group","d-block",3,"label"],["rx-id","description","formControlName","description","required","true",1,"form-group","d-block",3,"label"],["rx-id","locale","formControlName","locale","required","true",1,"form-group","d-block",3,"label","options"],["rx-id","project-id","formControlName","projectId","required","true",1,"form-group","d-block",3,"label","options","optionFormatter","tooltip"],["class","form-group d-block","formControlName","recordDefinition","rx-id","record-definition","required","true",3,"options",4,"ngIf"],["class","form-group d-block","rx-id","collection-id","formControlName","collectionId","required","true",3,"label","options","optionFormatter",4,"ngIf"],["class","form-group d-block","rx-id","external-data-set-source","formControlName","externalDatasetSource","required","true",3,"label","options","optionFormatter",4,"ngIf"],["adaptRange","","rx-id","confidence-threshold",1,"form-group","d-block",3,"label","max","min","formControl","rxCustomValidators","step","tooltip"],[1,"dp-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"],["popoverContent",""],[1,"mb-1"],[1,"form-control-label"],[3,"config"],["formControlName","recordDefinition","rx-id","record-definition","required","true",1,"form-group","d-block",3,"options"],["rx-id","collection-id","formControlName","collectionId","required","true",1,"form-group","d-block",3,"label","options","optionFormatter"],["rx-id","external-data-set-source","formControlName","externalDatasetSource","required","true",1,"form-group","d-block",3,"label","options","optionFormatter"],[2,"white-space","pre-wrap",3,"innerHTML"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,ni,5,4,"div",1),o["\u0275\u0275template"](2,oi,5,4,"div",1),o["\u0275\u0275elementStart"](3,"form",2),o["\u0275\u0275element"](4,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275element"](6,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275element"](8,"adapt-rx-select",5),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-select",6),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275template"](14,ri,1,1,"rx-definition-picker",7),o["\u0275\u0275template"](15,ai,3,7,"adapt-rx-select",8),o["\u0275\u0275template"](16,si,2,5,"adapt-rx-select",9),o["\u0275\u0275element"](17,"adapt-rx-counter",10),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"div",11),o["\u0275\u0275elementStart"](20,"button",12),o["\u0275\u0275listener"]("click",function(){return t.saveSearchDataset()}),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"button",13),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](24,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](25,li,2,3,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](26);o["\u0275\u0275property"]("ngBusy",t.busyConfig),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isEditMode&&t.statusAlert),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isEditMode&&t.failedReasonAlert),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.searchDatasetForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,24,"com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,26,"com.bmc.arsys.rx.client.common.description.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,28,"com.bmc.arsys.rx.client.admin.cognitive-search.locale.label")),o["\u0275\u0275property"]("options",t.searchLocaleOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,30,"com.bmc.arsys.rx.client.admin.cognitive-search.project-id.label")),o["\u0275\u0275property"]("options",o["\u0275\u0275pipeBind1"](12,32,t.projects$))("optionFormatter",t.optionFormatter)("tooltip",t.isHelixPlatformDataset()?o["\u0275\u0275pureFunction1"](40,ci,o["\u0275\u0275pipeBind1"](13,34,"com.bmc.arsys.rx.client.admin.cognitive-search.project-id.tooltip")):null),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("ngIf",t.isHelixPlatformDataset()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isExternalDataset()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isExternalDataset()),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](18,36,"com.bmc.arsys.rx.client.admin.cognitive-search.confidence-threshold.label")),o["\u0275\u0275property"]("max",1)("min",0)("formControl",t.searchDatasetForm.controls.confidenceThreshold)("rxCustomValidators",t.thresholdRangeValidator())("step",.1)("tooltip",o["\u0275\u0275pureFunction1"](42,ci,e)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.searchDatasetForm.pristine||t.searchDatasetForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](22,38,"com.bmc.arsys.rx.client.common.save.label")," ")}},directives:[a.AdaptBusyDirective,n.NgIf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptRxSelectComponent,a.AdaptRxCounterComponent,a.AdaptRangeValidatorDirective,r.FormControlDirective,l.RxCustomValidatorsDirective,a.AdaptButtonComponent,a.AdaptAlertComponent,s.RxDefinitionPickerComponent],pipes:[u.TranslatePipe,n.AsyncPipe],encapsulation:2});class Os extends p.BaseViewComponent{constructor(e,t,i,n,o,r,a,s,l){super(),this.formBuilder=e,this.rxModalService=t,this.rxCurrentUserService=i,this.rxBundleCacheService=n,this.rxNotificationService=o,this.rxRecordInstanceService=r,this.rxDefinitionNameService=a,this.translateService=s,this.rxRecordInstanceDataPageService=l,this.isAdministrator=this.rxCurrentUserService.isAdministrator()}ngOnInit(){this.searchDatasetTypes=Ts.searchDatasetTypeOptions.map(e=>Object.assign(Object.assign({},e),{displayName:this.translateService.instant(e.displayName)})),this.gridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:this.deleteSearchDataset.bind(this)}]}],enableFiltering:!0,recordDefinitionName:Ts.definitionName,enableRowSelection:d.RowSelectionMode.Multiple,getData:e=>this.getData(e),columns:this.getColumns(),filterExpression:`${Ts.queryExpression} "${this.rxBundleCacheService.bundleId}"`,styles:"flex-fill"})}getData(e){return this.rxRecordInstanceDataPageService.post({params:Object.assign({},(0,m.omit)(e,["searchText"]))})}createNewSearchDataset(e){this.openCognitiveSearchEditor(!1,e)}editSearchDataset(e){this.isAdministrator?this.openCognitiveSearchEditor(!0,e[Ts.fields.searchDatasetType],e[x.RX_RECORD_DEFINITION.coreFieldIds.id]):this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.warning.message"))}deleteSearchDataset(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.delete-confirmation.message")}).then(e=>{if(e){const e=[];(0,m.map)(this.grid.api.getSelectedRows(),t=>{e.push(this.rxRecordInstanceService.delete(Ts.definitionName,t[x.RX_RECORD_DEFINITION.coreFieldIds.id]))}),(0,h.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-deletion.message")),this.grid.api.refresh().subscribe()})}})}formatDataSource(e){return e?(0,m.map)(JSON.parse(e).recordDefinitions,e=>this.rxDefinitionNameService.getDisplayName(e)).join(", "):""}getDatasetType(e){return(0,m.find)(this.searchDatasetTypes,{datasetType:e}).displayName}getColumns(){return[{index:0,fieldId:String(Ts.fields.datasetName),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label"),clickable:!0,actions:[{name:(e,t)=>{this.editSearchDataset(t)}}]},{index:1,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.status.label")},{index:2,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.common.description.label")},{index:3,fieldId:String(Ts.fields.searchDatasetType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.type.title"),cellTemplate:this.datasetTypeTemplate},{index:4,fieldId:String(Ts.fields.locale),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.locale.label")},{index:5,fieldId:String(Ts.fields.dataSource),title:this.translateService.instant("com.bmc.arsys.rx.client.common.record-definition.label"),cellTemplate:this.definitionNameCellTemplate},{index:6,fieldId:String(Ts.fields.confidenceThreshold),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.confidence-threshold.label")},{index:7,fieldId:String(Ts.fields.datasetId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title"),visible:!1},{index:8,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.modifiedDate),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.date-modified.title"),visible:!1},{index:9,fieldId:String(Ts.fields.searchType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.search-type.title"),visible:!1},{index:10,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.displayId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.request-id.title"),visible:!1},{index:11,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title"),visible:!1},{index:12,fieldId:String(Ts.fields.datasetError),title:this.translateService.instant("com.bmc.arsys.rx.client.common.error.label"),visible:!1},{index:13,fieldId:String(Ts.fields.projectId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.project-id.title"),visible:!1}]}openCognitiveSearchEditor(e,t,i){return this.rxModalService.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.cognitive-search-data-set.title"),content:Ms,data:{isEditMode:e,datasetType:t,formatDataSource:this.formatDataSource.bind(this),recordId:i}}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}}Os.\u0275fac=function(e){return new(e||Os)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxBundleCacheService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService))},Os.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Os,selectors:[["rx-cognitive-search"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ct,7),o["\u0275\u0275viewQuery"](Ze,7),o["\u0275\u0275viewQuery"](di,7),o["\u0275\u0275viewQuery"](lt,7),o["\u0275\u0275viewQuery"](pi,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dropdownButton=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.searchDatasetConfigurationTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.definitionNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.datasetTypeTemplate=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:8,consts:[[3,"header"],["adaptDropdown","",1,"dropdown"],["adapt-button","","adaptDropdownToggle","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start"],["dropdownButton",""],["adaptDropdownMenu","",1,"dropdown-menu"],["class","dropdown-item",3,"disabled","click",4,"ngFor","ngForOf"],[3,"config"],["grid",""],["definitionNameCellTemplate",""],["datasetTypeTemplate",""],[1,"dropdown-item",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementContainerStart"](2),o["\u0275\u0275elementStart"](3,"div",1),o["\u0275\u0275elementStart"](4,"button",2,3),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",4),o["\u0275\u0275template"](9,ui,3,4,"button",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"rx-record-grid",6,7),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,mi,1,1,"ng-template",null,8,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](14,hi,1,1,"ng-template",null,9,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.admin.cognitive-search.header.title")),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,6,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.searchDatasetTypes),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.gridConfig))},directives:[s.AdminSettingsComponent,a.AdaptDropdownDirective,a.AdaptButtonComponent,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective,n.NgForOf,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class ks{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-cognitive-search",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Os),name:"Cognitive search",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}ks.\u0275fac=function(e){return new(e||ks)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},ks.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ks,declarations:[Os,Ms],imports:[n.CommonModule,a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,d.RecordGridModule,l.RxDirectivesModule,s.RxDefinitionPickerModule,u.TranslateModule,s.AdminSettingsModule,a.AdaptRxLabelModule,a.AdaptRxValidatorsModule,a.AdaptAlertModule,a.AdaptBusyModule]}),ks.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,d.RecordGridModule,l.RxDirectivesModule,s.RxDefinitionPickerModule,u.TranslateModule,s.AdminSettingsModule,a.AdaptRxLabelModule,a.AdaptRxValidatorsModule,a.AdaptAlertModule,a.AdaptBusyModule]]});const js="********",Ps=/^((http[s]?):\/)\/?([^:\/\s]+)((\/\w+)*\/)?([\w\-\.]+[^#?\s]+)(.*)?(#[\w\-]+)?$/,Ns={passwordMask:js,credentialsProvider:"WATSON",nativeProvider:"NATIVE",chatbot:{chatContextVariablesProcessName:"chatContextVariablesProcessName",systemSettings:{chatSessionIdleTimeout:900,chatUserIdleTimeout:30,chatbotNotificationsIdleTime:900,chatbotNotificationsMaxTime:3600,chatContextVariablesProcessName:"",removePoweredByBmcHelix:0}},cognitiveAdministrationCredentials:{systemSettingsKey:"cognitiveAdminTenantCredential",cognitiveAdminPlatformApiKey:"cognitiveAdminPlatformApiKey",payload:{WATSON:{cognitiveAdminPlatformApiKey:js}}},connections:{systemSettingKeys:{helixPortalUrl:"helixPortalUrl",helixServiceCredential:"helixServiceCredential",cognitiveServiceCredential:"cognitiveServiceCredential",classificationServiceProvider:"classificationServiceProvider",translationServiceProvider:"translationServiceProvider",serviceAccountCredential:"gcpServiceCredential",google:"gcpTranslationServiceCredential",microsoft:"microsoftServiceCredential"},cognitiveServiceCredentialKeys:{classification:"naturalLanguageClassifierAPIKey",discovery:"searchAPIKey",toneAnalyzer:"toneAnalyzerAPIKey"},payload:{helixClassifierKey:"",helixClassifierSecret:"",naturalLanguageClassifierAPIKey:"",searchAPIKey:"",toneAnalyzerAPIKey:"",serviceAccountCredentials:"",apiKey:""},serviceDefinitions:{helixClassifier:{id:"helixClassifier",title:"com.bmc.arsys.rx.client.admin.cognitive-service.helix-ade.title",isOpen:!0,isApiKeyTest:!0,serviceType:"NATURAL_LANGUAGE_CLASSIFIER",fields:[{label:"com.bmc.arsys.rx.client.admin.cognitive-service.helix-portal-url.label",name:"helixPortalUrl",readonly:!0,type:"text",required:!1},{name:"helixClassifierKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.access-key.label",type:"text",required:!0,rxId:"accessKey"},{name:"helixClassifierSecret",label:"com.bmc.arsys.rx.client.admin.cognitive-service.secret-key.label",type:"password",required:!0,rxId:"secretKey"}]},classification:{id:"classification",title:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant.title",model:"naturalLanguageClassifierAPIKey",isOpen:!0,isApiKeyTest:!0,serviceType:"NATURAL_LANGUAGE_CLASSIFIER",fields:[{name:"naturalLanguageClassifierAPIKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label",type:"password",required:!0,rxId:"api-key"}]},serviceAccountCredentials:{id:"serviceAccountCredentials",title:"com.bmc.arsys.rx.client.admin.cognitive-service.bmc-native.title",model:"serviceAccountCredentials",isOpen:!0,isApiKeyTest:!0,serviceType:"NATURAL_LANGUAGE_CLASSIFIER",fields:[{name:"serviceAccountCredentials",label:"com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.api-key.label",type:"json",required:!0,rxId:"api-key",jsonValidatorErrorMessage:"Credentials are invalid."}]},discovery:{id:"discovery",title:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-discovery.title",model:"searchAPIKey",isOpen:!1,isApiKeyTest:!0,serviceType:"SEARCH",fields:[{name:"searchAPIKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label",type:"password",required:!0,rxId:"api-key"}]},toneAnalyzer:{id:"toneAnalyzer",title:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-tone-analyzer.title",model:"toneAnalyzerAPIKey",isOpen:!1,isApiKeyTest:!0,serviceType:"TONE_ANALYZER",fields:[{name:"toneAnalyzerAPIKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label",type:"password",required:!0,rxId:"api-key"}]},microsoft:{id:"microsoft",title:"com.bmc.arsys.rx.client.admin.cognitive-service.microsoft-translator.title",isOpen:!1,isApiKeyTest:!1,fields:[{name:"apiKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.microsoft-azure-api-key.label",type:"password",required:!0,rxId:"microsoft-azure-api-key"},{name:"serviceURL",label:"com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.service-url.label",type:"text",required:!0,pattern:Ps,rxId:"microsoft-translator-service-url"},{name:"authURL",label:"com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.oauth-url.label",type:"text",required:!0,pattern:Ps,rxId:"microsoft-translator-oauth-url"}]},google:{id:"google",title:"com.bmc.arsys.rx.client.admin.cognitive-service.google-translation.title",model:"apiKey",isOpen:!1,isApiKeyTest:!1,fields:[{name:"apiKey",label:"com.bmc.arsys.rx.client.admin.cognitive-service.google-cloud-service-key.label",type:"json",required:!0,rxId:"google-cloud-service-key",jsonValidatorErrorMessage:"Service key is invalid."}]}}},cognitiveServiceRegions:{systemSettingsKey:"cognitiveServiceRegionTenantConfiguration",settings:[{id:"naturalLanguageClassifier",name:"Natural language classification"},{id:"conversation",name:"Chatbot"},{id:"search",name:"Cognitive search"},{id:"toneAnalyzer",name:"Tone analysis"}]},toneAnalyzer:{systemSettingsKey:"toneScoreThreshold"},summarization:{systemSettingsKey:"summarizationServiceTenantConfiguration"},onboard:{cognitiveProvidersList:[{id:"watson",name:"IBM Watson"}],providers:{watson:"WATSON"},providerServices:{watson:{naturalLanguageClassifier:{id:"naturalLanguageClassifier",apiKeyPropertyName:"naturalLanguageClassifierAPIKey",regionPropertyName:"naturalLanguageClassifierRegion",switchLabel:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant.title"},conversation:{id:"conversation",apiKeyPropertyName:"conversationAPIKey",regionPropertyName:"conversationRegion",switchLabel:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant-for-chatbot.message",tooltipText:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.conversation.tooltip"},toneAnalyzer:{id:"toneAnalyzer",apiKeyPropertyName:"toneAnalyzerAPIKey",regionPropertyName:"toneAnalyzerRegion",switchLabel:"com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-tone-analyzer.title"}}}},cognitiveServicesList:[{id:"chatbot",name:"com.bmc.arsys.rx.client.admin.chatbots.chatbot.title"},{id:"cognitiveAdministrationCredentials",name:"com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-administration-credentials.title"},{id:"connections",name:"com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-service-connections.title"},{id:"summarization",name:"com.bmc.arsys.rx.client.admin.summarization-service-configuration.title"},{id:"cognitiveServiceRegions",name:"com.bmc.arsys.rx.client.admin.cognitive-service.regions.title"},{id:"toneAnalyzerConfiguration",name:"com.bmc.arsys.rx.client.admin.cognitive-service.tone-analyzer.title"}],regionsList:[{id:"EU_DE",name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.germany.label"},{id:"AU_SYD",name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.sydney.label"},{id:"US_EAST",name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.us-east.label"},{id:"US_SOUTH",name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.us-south.label"},{id:"EU_GB",name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.uk.label"}],notificationMessages:{chatProviderSettingsSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.chat-provider-settings-saved.message",cognitiveAdministrationCredentialsSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.cognitive-administration-credentials-saved.message",toneAnalyzerConfigurationSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.tone-analyzer-configuration-saved.message",serviceRegionConfigurationSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-region-configuration-saved.message",serviceConnectionSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-connection-saved.message",summarizationConfigurationSaved:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.summarization-configuration-saved.message",serviceOnboarded:"com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-onboarded.message"}};class Vs extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.common.datapage.SystemConfigurationDataPageQuery"),this.injector=e}}Vs.\u0275fac=function(e){return new(e||Vs)(o["\u0275\u0275inject"](o.Injector))},Vs.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Vs,factory:Vs.\u0275fac,providedIn:"root"});class Ls{constructor(e,t,i){this.httpClient=e,this.rxCognitiveServiceSystemConfigurationDataPageService=t,this.rxProcessDefinitionDataPageService=i}filterMaskPassword(e){return e===Ns.passwordMask?"":e}getChatbotProcessDefinitionNames(){return this.rxProcessDefinitionDataPageService.get({headers:{"default-bundle-scope":f.RX_APPLICATION.chatbotBundleId},params:{propertySelection:["name"]}}).pipe((0,v.map)(e=>(0,m.map)(e.data,"name")))}getSystemSettings(e){return this.rxCognitiveServiceSystemConfigurationDataPageService.get({params:{name:e.join(",")}})}testConnection(e){return this.httpClient.post(f.RX_RESOURCE_URLS.command,e)}}Ls.\u0275fac=function(e){return new(e||Ls)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](Vs),o["\u0275\u0275inject"](T.RxProcessDefinitionDataPageService))},Ls.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ls,factory:Ls.\u0275fac,providedIn:"root"});class Bs{constructor(e,t,i,n,o,r){this.formBuilder=e,this.rxCognitiveServiceService=t,this.rxDefinitionNameService=i,this.rxNotificationService=n,this.rxSystemConfigurationService=o,this.translateService=r,this.initialChatbotProviderValues=(0,m.cloneDeep)(Ns.chatbot.systemSettings),this.chatbotProcessDefinitionNameOptions=[],this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.approverSelectionTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-service-component.user-idle.tooltip")},this.chatbotNotificationsIdleTimeTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-service-component.proactive-chatbot-notifications-idle-time.tooltip")},this.chatbotNotificationsMaxTimeTooltip={popoverMode:!0,iconName:"question_circle_o",placement:"right",content:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-service-component.proactive-chatbot-notifications-max-time.tooltip")},this.optionFormatter=e=>(0,m.get)(e,"name",this.defaultSelection)}ngOnInit(){this.chatbotProvidersForm=this.formBuilder.group({chatSessionIdleTimeout:Ns.chatbot.systemSettings.chatSessionIdleTimeout,chatUserIdleTimeout:Ns.chatbot.systemSettings.chatUserIdleTimeout,chatContextVariablesProcessName:[],chatbotNotificationsIdleTime:Ns.chatbot.systemSettings.chatbotNotificationsIdleTime,chatbotNotificationsMaxTime:Ns.chatbot.systemSettings.chatbotNotificationsMaxTime,removePoweredByBmcHelix:Ns.chatbot.systemSettings.removePoweredByBmcHelix}),(0,h.forkJoin)({processDefinitionNameOptions:this.getProcessDefinitionNameOptions(),settingsData:this.rxCognitiveServiceService.getSystemSettings((0,m.keys)(Ns.chatbot.systemSettings))}).subscribe(e=>{this.chatbotProcessDefinitionNameOptions=e.processDefinitionNameOptions,this.loadChatbotSystemSettings(e.settingsData.data)})}isFormDirty(){return this.chatbotProvidersForm.dirty}getProcessDefinitionNameOptions(){return this.rxCognitiveServiceService.getChatbotProcessDefinitionNames().pipe((0,v.map)(e=>e.sort().map(e=>({id:e,name:this.rxDefinitionNameService.getDisplayName(e)}))))}loadChatbotSystemSettings(e){(0,m.forEach)(e,e=>{let t;t=e.name===Ns.chatbot.chatContextVariablesProcessName?[this.chatbotProcessDefinitionNameOptions.find(t=>t.id===e.value)]:e.value,this.setFormFieldValue(e.name,t),this.initialChatbotProviderValues[e.name]=t})}setFormFieldValue(e,t){this.chatbotProvidersForm.controls[e].setValue(t)}setDefaultSessionIdleTimeout(){Ns.chatbot.systemSettings.chatSessionIdleTimeout!==this.chatbotProvidersForm.controls.chatSessionIdleTimeout.value&&(this.setFormFieldValue("chatSessionIdleTimeout",Ns.chatbot.systemSettings.chatSessionIdleTimeout),this.chatbotProvidersForm.markAsDirty())}setDefaultUserIdleTimeout(){Ns.chatbot.systemSettings.chatUserIdleTimeout!==this.chatbotProvidersForm.controls.chatUserIdleTimeout.value&&(this.setFormFieldValue("chatUserIdleTimeout",Ns.chatbot.systemSettings.chatUserIdleTimeout),this.chatbotProvidersForm.markAsDirty())}setDefaultChatbotNotificationsIdleTime(){Ns.chatbot.systemSettings.chatbotNotificationsIdleTime!==this.chatbotProvidersForm.controls.chatbotNotificationsIdleTime.value&&(this.setFormFieldValue("chatbotNotificationsIdleTime",Ns.chatbot.systemSettings.chatbotNotificationsIdleTime),this.chatbotProvidersForm.markAsDirty())}setDefaultChatbotNotificationsMaxTime(){Ns.chatbot.systemSettings.chatbotNotificationsMaxTime!==this.chatbotProvidersForm.controls.chatbotNotificationsMaxTime.value&&(this.setFormFieldValue("chatbotNotificationsMaxTime",Ns.chatbot.systemSettings.chatbotNotificationsMaxTime),this.chatbotProvidersForm.markAsDirty())}save(){const e=this.chatbotProvidersForm.getRawValue(),t=Object.keys(Ns.chatbot.systemSettings).reduce((t,i)=>{var n,o;let r=e[i];return(0,m.isArray)(r)&&(r=null!==(o=null===(n=r[0])||void 0===n?void 0:n.id)&&void 0!==o?o:""),(0,m.isEqual)(this.initialChatbotProviderValues[i],r)||t.push(this.rxSystemConfigurationService.setConfiguration(i,r)),t},[]);(0,h.forkJoin)(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.chatProviderSettingsSaved)),this.initialChatbotProviderValues=e,this.chatbotProvidersForm.markAsPristine()})}isSaveButtonDisabled(){return this.chatbotProvidersForm.pristine||this.chatbotProvidersForm.invalid}isSaveButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}}Bs.\u0275fac=function(e){return new(e||Bs)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},Bs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Bs,selectors:[["rx-cognitive-service-chatbot"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},decls:36,vars:64,consts:[[3,"formGroup"],["rx-id","accordion-chatbot-provider"],["isOpen","true",3,"title"],[1,"chat-session-idle-timeout","form-group"],["adaptRange","","rx-id","chatbot-provider-chat-session-idle-time","required","true",1,"adapt-counter-prefix","px-0","mr-2",3,"min","max","adaptRange","label","formControl"],["rx-id","chatbot-provider-default-chat-session-idle-time","btn-type","secondary",1,"align-self-baseline",3,"click"],["adaptRange","","rx-id","chatbot-provider-chat-user-idle-time","required","true",1,"adapt-counter-prefix","px-0","mr-2",3,"min","max","adaptRange","label","formControl","tooltip"],["rx-id","chatbot-provider-default-chat-user-idle-time","btn-type","secondary",1,"align-self-baseline",3,"click"],["rx-id","chat-context-variables-process-name","formControlName","chatContextVariablesProcessName","label","Chat context variables process name",1,"d-block","form-group",3,"options","optionFormatter"],[3,"label"],["rx-id","remove-powered-by-bmc-helix",3,"formControl","isLabelBefore"],["rx-id","accordion-proactive-chatbot-notifications"],[1,"proactive-chatbot-notifications-idle-time","form-group"],["adaptRange","","rx-id","notifications-idle-time","required","true",1,"adapt-counter-prefix","px-0","mr-2",3,"min","max","adaptRange","label","formControl","tooltip"],["rx-id","notifications-idle-time-default-button","btn-type","secondary",1,"align-self-baseline",3,"click"],[1,"proactive-chatbot-notifications-max-time","form-group"],["adaptRange","","rx-id","notifications-max-time","required","true",1,"adapt-counter-prefix","px-0","mr-2",3,"min","max","adaptRange","label","formControl","tooltip"],["rx-id","notifications-max-time-default-button","btn-type","secondary",1,"align-self-baseline",3,"click"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"adapt-accordion",1),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275element"](5,"adapt-rx-counter",4),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementStart"](7,"adapt-button",5),o["\u0275\u0275listener"]("click",function(){return t.setDefaultSessionIdleTimeout()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",3),o["\u0275\u0275element"](11,"adapt-rx-counter",6),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementStart"](13,"adapt-button",7),o["\u0275\u0275listener"]("click",function(){return t.setDefaultUserIdleTimeout()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](16,"adapt-rx-select",8),o["\u0275\u0275element"](17,"adapt-rx-control-label",9),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275element"](19,"adapt-rx-switch",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"adapt-accordion",11),o["\u0275\u0275elementStart"](21,"adapt-accordion-tab",2),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementStart"](23,"div",12),o["\u0275\u0275element"](24,"adapt-rx-counter",13),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementStart"](26,"adapt-button",14),o["\u0275\u0275listener"]("click",function(){return t.setDefaultChatbotNotificationsIdleTime()}),o["\u0275\u0275text"](27),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",15),o["\u0275\u0275element"](30,"adapt-rx-counter",16),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementStart"](32,"adapt-button",17),o["\u0275\u0275listener"]("click",function(){return t.setDefaultChatbotNotificationsMaxTime()}),o["\u0275\u0275text"](33),o["\u0275\u0275pipe"](34,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](35,fi,3,4,"button",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.chatbotProvidersForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](3,36,"com.bmc.arsys.rx.client.admin.cognitive-service.chatbot.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("min",300)("max",1200)("adaptRange",o["\u0275\u0275pureFunction0"](59,gi))("label",o["\u0275\u0275pipeBind1"](6,38,"com.bmc.arsys.rx.client.admin.cognitive-service.chat-session-idle.label"))("formControl",t.chatbotProvidersForm.controls.chatSessionIdleTimeout),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,40,"com.bmc.arsys.rx.client.common.default.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("min",5)("max",1200)("adaptRange",o["\u0275\u0275pureFunction0"](60,vi))("label",o["\u0275\u0275pipeBind1"](12,42,"com.bmc.arsys.rx.client.admin.cognitive-service.chat-user-idle.label"))("formControl",t.chatbotProvidersForm.controls.chatUserIdleTimeout)("tooltip",t.approverSelectionTooltip),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,44,"com.bmc.arsys.rx.client.common.default.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.chatbotProcessDefinitionNameOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind2"](18,46,"com.bmc.arsys.rx.client.admin.cognitive-service.remove-powered-by-bmc-helix.label",o["\u0275\u0275pureFunction0"](61,xi))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.chatbotProvidersForm.controls.removePoweredByBmcHelix)("isLabelBefore",!1),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](22,49,"com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("min",300)("max",1200)("adaptRange",o["\u0275\u0275pureFunction0"](62,gi))("label",o["\u0275\u0275pipeBind1"](25,51,"com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications-idle-time.label"))("formControl",t.chatbotProvidersForm.controls.chatbotNotificationsIdleTime)("tooltip",t.chatbotNotificationsIdleTimeTooltip),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](28,53,"com.bmc.arsys.rx.client.common.default.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("min",120)("max",3600)("adaptRange",o["\u0275\u0275pureFunction0"](63,yi))("label",o["\u0275\u0275pipeBind1"](31,55,"com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications-max-time.label"))("formControl",t.chatbotProvidersForm.controls.chatbotNotificationsMaxTime)("tooltip",t.chatbotNotificationsMaxTimeTooltip),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](34,57,"com.bmc.arsys.rx.client.common.default.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isSaveButtonVisible()))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptRxCounterComponent,a.AdaptRangeValidatorDirective,r.RequiredValidator,r.NgControlStatus,r.FormControlDirective,a.AdaptButtonComponent,a.AdaptRxSelectComponent,r.FormControlName,a.AdaptRxControlLabelComponent,a.AdaptRxSwitchComponent,n.NgIf],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.chat-session-idle-timeout[_ngcontent-%COMP%], .proactive-chatbot-notifications-idle-time[_ngcontent-%COMP%], .proactive-chatbot-notifications-max-time[_ngcontent-%COMP%]{display:flex}.chat-session-idle-timeout[_ngcontent-%COMP%]   adapt-button[_ngcontent-%COMP%], .proactive-chatbot-notifications-idle-time[_ngcontent-%COMP%]   adapt-button[_ngcontent-%COMP%], .proactive-chatbot-notifications-max-time[_ngcontent-%COMP%]   adapt-button[_ngcontent-%COMP%]{margin-top:1.5rem}adapt-rx-counter[_ngcontent-%COMP%], adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}']});class $s{constructor(e,t,i,n,o,r){this.formBuilder=e,this.rxCognitiveServiceService=t,this.rxCurrentUserService=i,this.rxNotificationService=n,this.rxSystemConfigurationService=o,this.translateService=r}ngOnInit(){this.cognitiveAdministrationCredentialsProvidersForm=this.formBuilder.group({cognitiveAdminPlatformApiKey:""}),this.loadSystemSettings()}isFormDirty(){return this.cognitiveAdministrationCredentialsProvidersForm.dirty}loadSystemSettings(){this.rxSystemConfigurationService.getConfiguration(Ns.cognitiveAdministrationCredentials.systemSettingsKey).subscribe(e=>{this.watsonAdminCredentialsData=JSON.parse(e.value),this.loadCognitiveAdminCredentialsValues()})}getWatsonAdminCredentialsData(e){return this.watsonAdminCredentialsData[Ns.credentialsProvider][e]||""}loadCognitiveAdminCredentialsValues(){let e="";this.watsonAdminCredentialsData[Ns.credentialsProvider]&&(e=this.getWatsonAdminCredentialsData(Ns.cognitiveAdministrationCredentials.cognitiveAdminPlatformApiKey)?Ns.passwordMask:""),this.cognitiveAdministrationCredentialsProvidersForm.controls.cognitiveAdminPlatformApiKey.setValue(e)}save(){const e=this.cognitiveAdministrationCredentialsProvidersForm.value.cognitiveAdminPlatformApiKey,t=(0,m.cloneDeep)(Ns.cognitiveAdministrationCredentials.payload);t[Ns.credentialsProvider][Ns.cognitiveAdministrationCredentials.cognitiveAdminPlatformApiKey]=this.rxCognitiveServiceService.filterMaskPassword(e),this.rxSystemConfigurationService.setConfiguration(Ns.cognitiveAdministrationCredentials.systemSettingsKey,JSON.stringify(t)).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.cognitiveAdministrationCredentialsSaved)),this.cognitiveAdministrationCredentialsProvidersForm.markAsPristine()})}isSaveButtonDisabled(){return this.cognitiveAdministrationCredentialsProvidersForm.pristine||this.cognitiveAdministrationCredentialsProvidersForm.invalid}isSaveButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}}$s.\u0275fac=function(e){return new(e||$s)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},$s.\u0275cmp=o["\u0275\u0275defineComponent"]({type:$s,selectors:[["rx-cognitive-service-administration-credentials"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},decls:7,vars:6,consts:[[3,"formGroup"],["isOpen","true",3,"title"],[1,"form-group"],["rx-id","platform-api-key","label","Platform API key","formControlName","cognitiveAdminPlatformApiKey","maxlength","254","required","true",1,"d-block",3,"isPassword"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"adapt-accordion"),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",1),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275element"](5,"adapt-rx-textfield",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,bi,3,4,"button",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.cognitiveAdministrationCredentialsProvidersForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-administration-credentials.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("isPassword",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSaveButtonVisible()))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.MaxLengthValidator,r.RequiredValidator,n.NgIf,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Ci]});class Gs{constructor(e,t,i,n,o,r){this.rxCognitiveServiceService=e,this.rxCurrentUserService=t,this.rxNotificationService=i,this.rxSystemConfigurationService=n,this.rxJsonParserService=o,this.translateService=r,this.connectionInfo=Ns.connections.payload,this.serviceDefinitions=Ns.connections.serviceDefinitions,this.availableServicesList=[],this.connectionTestStatusesByServiceId={},this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.isFormFieldChanged=!1,this.availableServices={classification:!0,discovery:!0,toneAnalyzer:!0}}ngOnInit(){this.rxSystemConfigurationService.queryConfiguration([Ns.connections.systemSettingKeys.cognitiveServiceCredential,Ns.connections.systemSettingKeys.classificationServiceProvider,Ns.connections.systemSettingKeys.translationServiceProvider,Ns.connections.systemSettingKeys.helixPortalUrl,Ns.connections.systemSettingKeys.helixServiceCredential]).pipe((0,v.finalize)(()=>this.loadServices())).subscribe(([e,t,i,n,o])=>{this.loadCognitiveSystemSettings(e),t.value===f.MachineLearningProviderNames.Helix&&(this.loadHelixCognitiveSystemSettings(o),this.connectionInfo[n.id]=n.value),this.loadClassificationServiceProvider(t),this.loadRealTimeTranslationProviders(i)})}isFormDirty(){return this.isFormFieldChanged}loadServices(){this.availableServicesList=(0,m.transform)(this.serviceDefinitions,(e,t,i)=>{this.availableServices[i]&&e.push(i)},[])}loadClassificationServiceProvider(e){if(this.isNativeClassificationProvider)return this.availableServices[this.serviceDefinitions.classification.id]=!1,this.availableServices[this.serviceDefinitions.serviceAccountCredentials.id]=!0,void this.rxSystemConfigurationService.getConfiguration(Ns.connections.systemSettingKeys.serviceAccountCredential).subscribe(e=>{this.connectionInfo.serviceAccountCredentials=e.value});e.value===f.MachineLearningProviderNames.Helix&&(this.availableServices[this.serviceDefinitions.classification.id]=!1,this.availableServices[this.serviceDefinitions.helixClassifier.id]=!0)}loadRealTimeTranslationProviders(e){const t=(0,m.toLower)(e.value);t&&(this.realTimeTranslationProvider=t,this.availableServices[this.serviceDefinitions[t].id]=!0,this.rxSystemConfigurationService.getConfiguration(Ns.connections.systemSettingKeys[t]).subscribe(e=>{t===this.serviceDefinitions.google.id?this.connectionInfo.apiKey=e.value:t===this.serviceDefinitions.microsoft.id&&(this.connectionInfo=(0,m.assign)(this.connectionInfo,this.rxJsonParserService.tryParseJson(e.value,{})))}))}loadHelixCognitiveSystemSettings(e){var t,i;const n=this.rxJsonParserService.tryParseJson(e.value);this.connectionInfo.helixClassifierKey=null!==(t=null==n?void 0:n.accessKey)&&void 0!==t?t:"",this.connectionInfo.helixClassifierSecret=null!==(i=null==n?void 0:n.secretKey)&&void 0!==i?i:""}loadCognitiveSystemSettings(e){const t=JSON.parse(e.value)[Ns.credentialsProvider];t&&(0,m.forIn)(t,(e,i)=>{this.connectionInfo[i]=t[i]})}isConnectionTestStatusInvalid(e){return!(this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared)||e.invalid||e.pristine}getConnectionTestPayload(e,t){const i=this.serviceDefinitions[e];if(!i.isApiKeyTest){return{credential:e===this.serviceDefinitions.google.id?t.value[i.model]:JSON.stringify(t.value),resourceType:"com.bmc.arsys.rx.application.cognitive.command.PingTranslationServiceCommand"}}const n=i.fields.filter(e=>!e.readonly);if(1===n.length)return{apiKey:t.value[i.model],serviceType:i.serviceType,resourceType:"com.bmc.arsys.rx.application.cognitive.command.PingCognitiveServiceCommand"};const[o,r]=n.map(e=>e.name);return{userName:t.value[o],password:t.value[r],serviceType:i.serviceType,resourceType:"com.bmc.arsys.rx.application.cognitive.command.PingCognitiveServiceCommand"}}resetConnectionTest(e,t){this.connectionTestStatus=l.ConnectionTestStatus.Unknown,this.isFormFieldChanged=t.dirty,this.connectionTestStatusesByServiceId[e]=this.isConnectionTestStatusInvalid(t)?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown}onTestConnection(e,t){const i=this.getConnectionTestPayload(e,t);this.rxCognitiveServiceService.testConnection(i).pipe((0,v.catchError)(t=>(this.connectionTestStatusesByServiceId[e]=l.ConnectionTestStatus.Failed,(0,h.throwError)(t)))).subscribe(()=>{this.connectionTestStatusesByServiceId[e]=l.ConnectionTestStatus.Passed,this.connectionTestStatus=l.ConnectionTestStatus.Passed})}save(){const e=[];if(this.isNativeClassificationProvider&&this.connectionTestStatusesByServiceId[this.serviceDefinitions.serviceAccountCredentials.id]===l.ConnectionTestStatus.Passed&&!(this.connectionTestStatusesByServiceId[this.serviceDefinitions.classification.id]===l.ConnectionTestStatus.Passed||this.connectionTestStatusesByServiceId[this.serviceDefinitions.discovery.id]===l.ConnectionTestStatus.Passed||this.connectionTestStatusesByServiceId[this.serviceDefinitions.toneAnalyzer.id]===l.ConnectionTestStatus.Passed||this.realTimeTranslationProvider&&this.connectionTestStatusesByServiceId[this.serviceDefinitions[this.realTimeTranslationProvider].id]===l.ConnectionTestStatus.Passed))e.push({name:Ns.connections.systemSettingKeys.serviceAccountCredential,value:JSON.stringify(JSON.parse(this.connectionInfo[this.serviceDefinitions.serviceAccountCredentials.id]))});else{if(this.realTimeTranslationProvider&&this.connectionTestStatusesByServiceId[this.serviceDefinitions[this.realTimeTranslationProvider].id]===l.ConnectionTestStatus.Passed){const t=this.serviceDefinitions[this.realTimeTranslationProvider].fields;e.push({name:Ns.connections.systemSettingKeys[this.realTimeTranslationProvider],value:this.realTimeTranslationProvider===this.serviceDefinitions.google.id?this.connectionInfo[t[0].name]:JSON.stringify((0,m.transform)(t,(e,t)=>{const i=t.name;return e[i]=this.connectionInfo[i]},{}))})}const t=(0,m.transform)(Ns.connections.cognitiveServiceCredentialKeys,(e,t,i)=>{if(this.connectionTestStatusesByServiceId[this.serviceDefinitions[i].id]===l.ConnectionTestStatus.Passed)return e[t]=this.connectionInfo[t]},{});(0,m.isEmpty)(t)||e.push({name:Ns.connections.systemSettingKeys.cognitiveServiceCredential,value:JSON.stringify({[Ns.credentialsProvider]:t})})}const{helixClassifier:t}=this.serviceDefinitions;t&&this.connectionTestStatusesByServiceId[t.id]===l.ConnectionTestStatus.Passed&&e.push({name:Ns.connections.systemSettingKeys.helixServiceCredential,value:JSON.stringify({accessKey:this.connectionInfo.helixClassifierKey,secretKey:this.connectionInfo.helixClassifierSecret})}),(0,h.forkJoin)(e.map(e=>this.rxSystemConfigurationService.setConfiguration(e.name,e.value))).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.serviceConnectionSaved)),this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.connectionTestStatusesByServiceId={},this.isFormFieldChanged=!1})}isSaveButtonDisabled(){return this.connectionTestStatus!==l.ConnectionTestStatus.Passed}isSaveButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}}Gs.\u0275fac=function(e){return new(e||Gs)(o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](g.RxJsonParserService),o["\u0275\u0275directiveInject"](u.TranslateService))},Gs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Gs,selectors:[["rx-cognitive-service-connections"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext",isNativeClassificationProvider:"isNativeClassificationProvider"},decls:3,vars:2,consts:[["multiselect","true"],[4,"ngFor","ngForOf"],["adapt-button","","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],["serviceForm","ngForm"],[1,"mb-3",3,"title","isOpen"],["class","form-group",4,"ngFor","ngForOf"],[1,"mt-1",3,"status","testConnection"],[1,"form-group"],["maxlength","254","class","d-block",3,"name","ngModel","label","required","isPassword","ngModelChange",4,"ngIf"],["class","d-block",3,"name","ngModel","label","required","disabled","pattern","ngModelChange",4,"ngIf"],["rows","6","class","d-block",3,"name","ngModel","label","required","rxJson","ngModelChange",4,"ngIf"],["maxlength","254",1,"d-block",3,"name","ngModel","label","required","isPassword","ngModelChange"],[1,"d-block",3,"name","ngModel","label","required","disabled","pattern","ngModelChange"],["rows","6",1,"d-block",3,"name","ngModel","label","required","rxJson","ngModelChange"],["adapt-button","","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"adapt-accordion",0),o["\u0275\u0275template"](1,Ri,6,7,"form",1),o["\u0275\u0275template"](2,Ai,3,4,"button",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.availableServicesList),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSaveButtonVisible()))},directives:[a.AdaptAccordionComponent,n.NgForOf,n.NgIf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptAccordionTabComponent,l.RxConnectionTesterComponent,a.AdaptRxTextfieldComponent,r.MaxLengthValidator,r.NgControlStatus,r.NgModel,r.RequiredValidator,r.PatternValidator,a.AdaptRxTextareaComponent,g.RxJsonValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Ci]});class zs extends l.RxModalClass{constructor(e,t,i,n,o,r,a,s,l){super(e,l),this.dockedPanelContext=e,this.rxCognitiveServiceService=t,this.rxCommandFactoryService=i,this.rxModalService=n,this.rxNotificationService=o,this.rxRecordInstanceDataPageService=r,this.rxSystemConfigurationService=a,this.translateService=s,this.injector=l,this.supportedCognitiveProviders=Ns.onboard.cognitiveProvidersList,this.cognitiveProvider=[Ns.onboard.cognitiveProvidersList[0]],this.regions=Ns.regionsList.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.providerServices={},this.defaultServiceId=Ns.onboard.cognitiveProvidersList[0].id,this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.optionFormatter=e=>(0,m.get)(e,"name",this.defaultSelection)}ngOnInit(){super.ngOnInit();const e={recorddefinition:f.RX_CHATBOT.chatbotLocales.recordDefinitionName,queryExpression:`'${f.RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId}'="${f.RX_CHATBOT.defaultChatbotId}"`,propertySelection:[f.RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId,f.RX_CHATBOT.chatbotLocales.fieldIds.providerPassword]};(0,h.forkJoin)({cognitiveServiceCredential:this.rxSystemConfigurationService.getConfiguration(Ns.connections.systemSettingKeys.cognitiveServiceCredential),cognitiveServiceRegions:this.rxSystemConfigurationService.getConfiguration(Ns.cognitiveServiceRegions.systemSettingsKey),botLocales:this.rxRecordInstanceDataPageService.post({params:e})}).subscribe(e=>{this.providerServices=Ns.onboard.providerServices[this.defaultServiceId],this.loadCredentialAndRegions(JSON.parse(e.cognitiveServiceCredential.value),JSON.parse(e.cognitiveServiceRegions.value)),this.setBotLocaleConversation(e.botLocales.data),this.loadServiceProviderApiKey()})}isDirty(){return this.ownCognitivePoviderConfigurationForm.dirty}loadCredentialAndRegions(e,t){const i=t[Ns.onboard.providers[this.defaultServiceId]];(0,m.forEach)(this.providerServices,(t,n)=>{if(t.apiKey=(0,m.get)(e[Ns.onboard.providers[this.defaultServiceId]],t.apiKeyPropertyName,""),(0,m.get)(i,n)){const e=this.regions.find(e=>e.id===i[n]);t.region=[e]}})}setBotLocaleConversation(e){const t=Ns.onboard.providerServices[this.defaultServiceId].conversation.id;this.providerServices[t].apiKey=(0,m.get)(e[0],f.RX_CHATBOT.chatbotLocales.fieldIds.providerPassword,"")}loadServiceProviderApiKey(){(0,m.forEach)(this.providerServices,e=>{e.isEnabled=e.hasApiKey=Boolean(e.apiKey)})}isOnboardButtonDisabled(){return this.isOnboardingInProgress||!(0,m.some)(this.providerServices,"isEnabled")||this.ownCognitivePoviderConfigurationForm.pristine||this.ownCognitivePoviderConfigurationForm.invalid}close(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}onboard(){this.isOnboardingInProgress=!0;const e={};e[Ns.onboard.providers[this.defaultServiceId]]=(0,m.transform)(this.providerServices,(e,t)=>{!t.hasApiKey&&t.isEnabled&&(e[t.apiKeyPropertyName]=t.apiKey,e[t.regionPropertyName]=(0,m.get)(t.region,"0.id",""))},{}),this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.cognitive.command.ConfigureOwnCognitiveProvidersCommand").execute({ownCognitiveProvidersConfiguration:JSON.stringify(e)}).pipe((0,v.catchError)(e=>(this.isOnboardingInProgress=!1,(0,h.throwError)(e)))).subscribe(()=>{this.loadServiceProviderApiKey(),this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.serviceOnboarded)),this.ownCognitivePoviderConfigurationForm.form.markAsPristine(),this.isOnboardingInProgress=!1})}keepKeyValueOrder(){return 0}}zs.\u0275fac=function(e){return new(e||zs)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},zs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:zs,selectors:[["rx-cognitive-service-onboard"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ti,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ownCognitivePoviderConfigurationForm=e.first)}},inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:22,consts:[[1,"dp-body"],["ownCognitivePoviderConfigurationForm","ngForm"],[1,"row"],[1,"col-sm-12"],["name","cognitiveProvider","rx-id","cognitive-provider",3,"label","options","optionFormatter","ngModel","ngModelChange"],[1,"mt-2","mb-2"],["class","card p-3 mb-3",4,"ngFor","ngForOf"],[1,"dp-footer","align-items-end"],["adapt-button","","btn-type","primary","type","button","activeText","Onboarding...","rx-id","onboarding-button",1,"mr-2",3,"adaptInlineLoader","disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","close-button",3,"disabled","click"],[1,"card","p-3","mb-3"],[1,"form-group",3,"name","label","ngModel","disabled","tooltip","ngModelChange"],["emptyOption","true",1,"form-group",3,"label","name","options","optionFormatter","ngModel","disabled","ngModelChange"],["maxlength","254","required","true",1,"form-group",3,"label","isPassword","name","ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",null,1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275elementStart"](5,"adapt-rx-select",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.cognitiveProvider=e}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",3),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,Ei,8,29,"div",6),o["\u0275\u0275pipe"](12,"keyvalue"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",7),o["\u0275\u0275elementStart"](14,"div"),o["\u0275\u0275elementStart"](15,"button",8),o["\u0275\u0275listener"]("click",function(){return t.onboard()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"button",9),o["\u0275\u0275listener"]("click",function(){return t.close()}),o["\u0275\u0275text"](19),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](5),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,11,"com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-provider.label")),o["\u0275\u0275property"]("options",t.supportedCognitiveProviders)("optionFormatter",t.optionFormatter)("ngModel",t.cognitiveProvider),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,13,"com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.instructions.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind2"](12,15,t.providerServices,t.keepKeyValueOrder)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("adaptInlineLoader",t.isOnboardingInProgress)("disabled",t.isOnboardButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,18,"com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.button.onboard.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isOnboardingInProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](20,20,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,n.NgForOf,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective,a.AdaptRxSwitchComponent,a.AdaptRxTextfieldComponent,r.MaxLengthValidator,r.RequiredValidator],pipes:[u.TranslatePipe,n.KeyValuePipe],encapsulation:2});class Us{constructor(e,t,i,n,o){this.formBuilder=e,this.rxCognitiveServiceService=t,this.rxNotificationService=i,this.rxSystemConfigurationService=n,this.translateService=o,this.settings=Ns.cognitiveServiceRegions.settings,this.regions=Ns.regionsList.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)}))}ngOnInit(){this.cognitiveServiceRegionConfigurationForm=this.formBuilder.group({naturalLanguageClassifier:[],conversation:[],search:[],toneAnalyzer:[]}),this.loadSystemSettings()}isFormDirty(){return this.cognitiveServiceRegionConfigurationForm.dirty}loadSystemSettings(){this.rxSystemConfigurationService.getConfiguration(Ns.cognitiveServiceRegions.systemSettingsKey).subscribe(e=>{let t=JSON.parse(e.value);t[Ns.credentialsProvider]&&(t=t[Ns.credentialsProvider],this.settings.forEach(e=>{if(!(0,m.isEmpty)(t[e.id])){const i=this.regions.find(i=>i.id===t[e.id]);this.cognitiveServiceRegionConfigurationForm.controls[e.id].setValue([i])}}))})}optionFormatter(e){return e.name}save(){const e=this.cognitiveServiceRegionConfigurationForm.getRawValue(),t=(0,m.mapValues)(e,function(e){return(0,m.get)(e,"[0].id","")});this.rxSystemConfigurationService.setConfiguration(Ns.cognitiveServiceRegions.systemSettingsKey,JSON.stringify({WATSON:t})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.serviceRegionConfigurationSaved)),this.cognitiveServiceRegionConfigurationForm.markAsPristine()})}isSaveButtonDisabled(){return this.cognitiveServiceRegionConfigurationForm.pristine}isSaveButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}}Us.\u0275fac=function(e){return new(e||Us)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},Us.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Us,selectors:[["rx-cognitive-service-regions"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},decls:8,vars:11,consts:[[3,"formGroup"],["rx-id","accordion-cognitive-service-region"],["isOpen","true",3,"title"],[1,"mb-4",3,"config"],["class","form-group",4,"ngFor","ngForOf"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],[1,"form-group"],["emptyOption","true",1,"d-block",3,"formControlName","label","options","optionFormatter"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"adapt-accordion",1),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-alert",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,Mi,2,5,"div",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](7,Oi,3,4,"button",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.cognitiveServiceRegionConfigurationForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("title",o["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.client.admin.cognitive-service.regions.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",o["\u0275\u0275pureFunction1"](9,ki,o["\u0275\u0275pipeBind1"](5,7,"com.bmc.arsys.rx.client.admin.cognitive-service.regions.warning"))),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.settings),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSaveButtonVisible()))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptAlertComponent,n.NgForOf,n.NgIf,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}']});class qs{constructor(e,t,i,n,o,r){this.rxCurrentUserService=e,this.rxCognitiveServiceService=t,this.rxNotificationService=i,this.rxSystemConfigurationService=n,this.formBuilder=o,this.translateService=r,this.connectionTestStatus=l.ConnectionTestStatus.Invalid}ngOnInit(){this.isAdministratorOverlayConfigured=this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared,this.testConnection().pipe((0,v.catchError)(e=>(this.isSummarizationServiceConfigured=!1,h.EMPTY))).subscribe(()=>{this.isSummarizationServiceConfigured=!0}),this.summarizationConfigurationForm=this.formBuilder.group({enableSummarization:{value:0,disabled:this.isEnableSummarizationCheckboxDisabled()},summarizationPercentage:""}),this.loadSystemSettings()}isFormDirty(){return this.summarizationConfigurationForm.dirty}loadSystemSettings(){this.rxSystemConfigurationService.getConfiguration(Ns.summarization.systemSettingsKey).subscribe(e=>{const t=JSON.parse(e.value);this.summarizationConfigurationForm.setValue(t)})}save(){const e=this.summarizationConfigurationForm.getRawValue();e.enableSummarization=e.enableSummarization?1:0;const t=(0,m.mapValues)(e,e=>e);this.rxSystemConfigurationService.setConfiguration(Ns.summarization.systemSettingsKey,JSON.stringify(t)).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.summarizationConfigurationSaved)),this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.summarizationConfigurationForm.markAsPristine()})}isSaveButtonDisabled(){return!(!this.summarizationConfigurationForm.controls.enableSummarization.value&&this.summarizationConfigurationForm.dirty)&&this.connectionTestStatus!==l.ConnectionTestStatus.Passed}isEnableSummarizationCheckboxDisabled(){return!(this.rxCurrentUserService.isAdministrator()&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared)}isConnectionTestStatusInvalid(){return!this.isAdministratorOverlayConfigured||this.summarizationConfigurationForm.invalid||this.summarizationConfigurationForm.pristine||!this.summarizationConfigurationForm.controls.enableSummarization.value}resetConnectionTest(){this.connectionTestStatus=this.isConnectionTestStatusInvalid()?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown,this.summarizationConfigurationForm.controls.enableSummarization.value?this.summarizationConfigurationForm.get("summarizationPercentage").enable():this.summarizationConfigurationForm.get("summarizationPercentage").disable()}testConnection(){return this.rxCognitiveServiceService.testConnection({resourceType:"com.bmc.arsys.rx.application.cognitive.command.PingSummarizationServiceCommand"})}onTestConnection(){this.testConnection().pipe((0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(()=>{this.connectionTestStatus=l.ConnectionTestStatus.Passed})}}qs.\u0275fac=function(e){return new(e||qs)(o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](u.TranslateService))},qs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:qs,selectors:[["rx-cognitive-service-summarization"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},decls:2,vars:2,consts:[[3,"config",4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"config"],[3,"formGroup"],["rx-id","accordion-summarization-configuration"],[3,"title"],["rx-id","enable-summarization-service","formControlName","enableSummarization","label","Enable summarization service",1,"form-group",3,"ngModelChange"],["adaptRange","","rx-id","summarization-percentage","label","Summarization %","required","true",1,"d-block","form-group",3,"min","max","formControl","step","tooltip","ngModelChange"],["class","mt-1",3,"status","testConnection",4,"ngIf"],["adapt-button","","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],[1,"mt-1",3,"status","testConnection"],["adapt-button","","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,Pi,1,2,"adapt-alert",0),o["\u0275\u0275template"](1,Li,9,15,"form",1)),2&e&&(o["\u0275\u0275property"]("ngIf",!1===t.isSummarizationServiceConfigured),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isSummarizationServiceConfigured))},directives:[n.NgIf,a.AdaptAlertComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptRxSwitchComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxCounterComponent,a.AdaptRangeValidatorDirective,r.RequiredValidator,r.FormControlDirective,l.RxConnectionTesterComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-counter[_ngcontent-%COMP%]{max-width:400px}']});class Xs{constructor(e,t,i,n,o){this.formBuilder=e,this.rxCognitiveServiceService=t,this.rxNotificationService=i,this.rxSystemConfigurationService=n,this.translateService=o}ngOnInit(){this.toneAnalyzerConfigurationForm=this.formBuilder.group({toneScoreThreshold:.5}),this.loadSystemSettings()}isFormDirty(){return this.toneAnalyzerConfigurationForm.dirty}loadSystemSettings(){this.rxSystemConfigurationService.getConfiguration(Ns.toneAnalyzer.systemSettingsKey).subscribe(e=>{this.toneAnalyzerConfigurationForm.controls[e.name].setValue(e.value)})}save(){this.rxSystemConfigurationService.setConfiguration(Ns.toneAnalyzer.systemSettingsKey,this.toneAnalyzerConfigurationForm.value.toneScoreThreshold).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(Ns.notificationMessages.toneAnalyzerConfigurationSaved)),this.toneAnalyzerConfigurationForm.markAsPristine()})}isSaveButtonDisabled(){return this.toneAnalyzerConfigurationForm.pristine||this.toneAnalyzerConfigurationForm.invalid}isSaveButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}}Xs.\u0275fac=function(e){return new(e||Xs)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},Xs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Xs,selectors:[["rx-cognitive-service-tone-analyzer"]],inputs:{isAdministrator:"isAdministrator",currentOverlayContext:"currentOverlayContext"},decls:7,vars:9,consts:[[3,"formGroup"],["title","Tone analyzer configuration","isOpen","true"],["adaptRange","","label","Tone score threshold","required","true","adaptFloatNumber","",1,"d-block","form-group",3,"max","min","formControl","step","tooltip"],["popoverContent",""],["adapt-button","","type","button","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","click",4,"ngIf"],[2,"white-space","pre-wrap",3,"innerHTML"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"adapt-accordion"),o["\u0275\u0275elementStart"](2,"adapt-accordion-tab",1),o["\u0275\u0275element"](3,"adapt-rx-counter",2),o["\u0275\u0275template"](4,Bi,2,3,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](6,$i,3,4,"button",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](5);o["\u0275\u0275property"]("formGroup",t.toneAnalyzerConfigurationForm),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("max",1)("min",.5)("formControl",t.toneAnalyzerConfigurationForm.controls.toneScoreThreshold)("step",.1)("tooltip",o["\u0275\u0275pureFunction1"](7,ci,e)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.isSaveButtonVisible())}},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,a.AdaptRxCounterComponent,a.AdaptRangeValidatorDirective,r.RequiredValidator,a.AdaptFloatNumberValidatorDirective,r.NgControlStatus,r.FormControlDirective,n.NgIf,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-counter[_ngcontent-%COMP%]{max-width:400px}']});class Hs extends p.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.rxModalService=e,this.rxCognitiveServiceService=t,this.rxCurrentUserService=i,this.rxOverlayService=n,this.rxSystemConfigurationService=o,this.translateService=r,this.cognitiveServices=Ns.cognitiveServicesList.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.selectedService=[this.cognitiveServices[2]],this.supportedCognitiveServices=[],this.isAdministrator=this.rxCurrentUserService.isAdministrator(),this.currentOverlayContext=this.rxOverlayService.getCurrentOverlayContext()}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.selectedConfiguration.isFormDirty()}),this.rxSystemConfigurationService.getConfiguration(Ns.connections.systemSettingKeys.classificationServiceProvider).subscribe(e=>{let t=this.cognitiveServices;Ns.nativeProvider===e.value&&(this.isNativeClassificationProvider=!0,t=(0,m.reject)(t,{id:Ns.cognitiveServicesList[1].id})),this.supportedCognitiveServices=t})}optionFormatter(e){return e.name}getSelectedServiceId(){return this.selectedService[0].id}isOwnCognitiveProviderButtonVisible(){return this.isAdministrator&&this.currentOverlayContext.overlayGroupId!==f.RX_OVERLAY.overlayGroupIds.base&&!this.currentOverlayContext.isShared}openOnboardServicesPanel(){this.rxModalService.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.label"),content:zs,size:"lg"}).catch(m.noop)}}Hs.\u0275fac=function(e){return new(e||Hs)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxOverlayService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](u.TranslateService))},Hs.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Hs,selectors:[["rx-admin-cognitive-service"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Gi,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.selectedConfiguration=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:17,consts:[[3,"header"],["class","mb-4 d-flex align-items-baseline",4,"ngIf"],[1,"mb-4","align-items-end"],[3,"label","options","ngModel","optionFormatter","ngModelChange"],[1,"row","pb-4"],[1,"col-12",3,"ngSwitch"],[3,"isAdministrator","currentOverlayContext",4,"ngSwitchCase"],[3,"isAdministrator","currentOverlayContext","isNativeClassificationProvider",4,"ngSwitchCase"],[1,"mb-4","d-flex","align-items-baseline"],["rx-id","onboard-services-button","btn-type","secondary",1,"text-truncate",3,"click"],["name","question_circle_o","placement","bottom","maxWidth","400",1,"ml-2",3,"adaptPopover"],[3,"isAdministrator","currentOverlayContext"],["selectedConfiguration",""],[3,"isAdministrator","currentOverlayContext","isNativeClassificationProvider"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,zi,6,6,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-select",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedService=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275template"](8,Ui,2,2,"rx-cognitive-service-chatbot",6),o["\u0275\u0275template"](9,qi,2,2,"rx-cognitive-service-administration-credentials",6),o["\u0275\u0275template"](10,Xi,2,3,"rx-cognitive-service-connections",7),o["\u0275\u0275template"](11,Hi,2,2,"rx-cognitive-service-summarization",6),o["\u0275\u0275template"](12,Wi,2,2,"rx-cognitive-service-regions",6),o["\u0275\u0275template"](13,Yi,2,2,"rx-cognitive-service-tone-analyzer",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate1"]("header"," ",o["\u0275\u0275pipeBind1"](1,13,"com.bmc.arsys.rx.client.admin.cognitive-service.header.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isOwnCognitiveProviderButtonVisible()),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,15,"com.bmc.arsys.rx.client.admin.cognitive-service.configure.label")),o["\u0275\u0275property"]("options",t.supportedCognitiveServices)("ngModel",t.selectedService)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngSwitch",t.getSelectedServiceId()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[0].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[1].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[2].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[3].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[4].id),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngSwitchCase",t.cognitiveServices[5].id))},directives:[s.AdminSettingsComponent,n.NgIf,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,n.NgSwitch,n.NgSwitchCase,a.AdaptButtonComponent,a.AdaptIconComponent,a.AdaptPopoverDirective,Bs,$s,Gs,qs,Us,Xs],pipes:[u.TranslatePipe],styles:[Qi]});class Ws{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,this.rxViewComponentRegistryService.register({type:"rx-admin-cognitive-service",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Hs),name:"Cognitive service",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}var Ys,Qs,Ks;Ws.\u0275fac=function(e){return new(e||Ws)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Ws.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Ws,declarations:[Hs,$s,Bs,Gs,zs,Us,qs,Xs],imports:[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxSwitchModule,a.AdaptRxTextareaModule,a.AdaptRxTextfieldModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,g.RxJsonModule,u.TranslateModule,a.AdaptRxLabelModule]}),Ws.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptAlertModule.forRoot(),a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxSwitchModule,a.AdaptRxTextareaModule,a.AdaptRxTextfieldModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,g.RxJsonModule,u.TranslateModule,a.AdaptRxLabelModule]]}),function(e){e.DataSets="dataSets",e.TestResults="testResults"}(Ys||(Ys={})),function(e){e.InnovationSuiteDataSource="innovationSuiteDataSource",e.FileDataSource="fileDataSource"}(Qs||(Qs={})),function(e){e.AutoClassificationTrainingAndEvaluation="autoClassificationTrainingAndEvaluation",e.ChatbotEvaluation="chatbotEvaluation"}(Ks||(Ks={}));const Js={settings:{sections:[{title:"com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation.title",evaluationName:Ks.AutoClassificationTrainingAndEvaluation,isExpanded:!0},{title:"com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-evaluation-ibm.watson.assistant.title",evaluationName:Ks.ChatbotEvaluation,isExpanded:!1}],tabs:{[Ys.DataSets]:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.data-sets.title",name:Ys.DataSets,deletionConfirmationMessage:"com.bmc.arsys.rx.client.admin.cognitive-training.data-set-delete-confirmation.message",deletionSuccessMessage:"com.bmc.arsys.rx.client.admin.cognitive-training.data-set-deleted.message",recordDefinitionName:"Cognitive Service Data Set Descriptor"},[Ys.TestResults]:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.test-results.title",name:Ys.TestResults,deletionConfirmationMessage:"com.bmc.arsys.rx.client.admin.cognitive-training.test-results-delete-confirmation.message",deletionSuccessMessage:"com.bmc.arsys.rx.client.admin.cognitive-training.test-results-deleted.message",recordDefinitionName:"Cognitive Service Test Results"}},evaluations:{[Ks.AutoClassificationTrainingAndEvaluation]:{name:Ks.AutoClassificationTrainingAndEvaluation,queryExpression:"'1732' = 0 AND '61001' = ",serviceProviderQueryExpresion:" AND '1820' = "},[Ks.ChatbotEvaluation]:{name:Ks.ChatbotEvaluation,queryExpression:"'1732' = 1 AND '61001' = "}},trainingTypes:{[f.MachineLearningProviderNames.Watson]:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-ibm-watson.title",displayName:"com.bmc.arsys.rx.client.admin.cognitive-training.ibm-watson-conversation.title",name:f.MachineLearningProviderNames.Watson,value:0,uniqueValue:0},[f.MachineLearningProviderNames.Native]:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-bmc-native-google.title",displayName:"com.bmc.arsys.rx.client.admin.cognitive-service.bmc-native.title",name:"native",value:0,uniqueValue:1},[f.MachineLearningProviderNames.Helix]:{title:"com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-helix-ade.title",displayName:"com.bmc.arsys.rx.client.admin.cognitive-service.helix-ade.title",name:f.MachineLearningProviderNames.Helix,value:0,uniqueValue:2},chatbot:{value:1}},dataSourceTypes:{[Qs.InnovationSuiteDataSource]:{displayName:"com.bmc.arsys.rx.client.admin.cognitive-search.bmc-helix-platform-data-set.label",name:Qs.InnovationSuiteDataSource,resourceType:"com.bmc.arsys.rx.services.cognitive.domain.InnovationSuiteDataSource",dataSourceHistory:{layout:{queryExpressionBasic:{filtersJson:null,basicFilters:null},textFields:[],categoryFields:[]},resourceType:"com.bmc.arsys.rx.services.cognitive.domain.InnovationSuiteDataSource",recordDefinitionName:"",queryExpression:"",trainingDataMapper:{resourceType:"com.bmc.arsys.rx.services.cognitive.domain.CategorizationTrainingDataMapper",textFields:[],categoryFields:[]},timeCriteria:null,isScheduleEnabled:!1}},[Qs.FileDataSource]:{displayName:"com.bmc.arsys.rx.client.admin.cognitive-training.csv-data-set.label",name:Qs.FileDataSource,resourceType:"com.bmc.arsys.rx.services.cognitive.domain.FileDataSource",dataSourceHistory:{resourceType:"com.bmc.arsys.rx.services.cognitive.domain.FileDataSource",fileName:""}}},commands:{classify:"com.bmc.arsys.rx.application.cognitive.command.AutomaticCategorySuggestionCommand",train:"com.bmc.arsys.rx.application.cognitive.command.TrainCognitiveServiceCommand",test:"com.bmc.arsys.rx.application.cognitive.command.TestChatbotCommand"},trainingStatuses:{untrained:{label:"Untrained",value:0},training:{label:"Training",value:1},trained:{label:"Trained",value:2},failed:{label:"Failed",value:3},pendingRetraining:{label:"Pending retraining",value:4},inProgress:{label:"In progress",value:5},created:{label:"Created",value:6}},evaluationStatuses:{queued:{label:"Queued",value:0},running:{label:"Running",value:10},completed:{label:"Completed",value:20},failed:{label:"Failed",value:30}},nativeProviderTrainingLocales:["de","en","es","fr","it","pt"],watsonProviderTrainingLocales:["ar","de","en","es","fr","it","ja","ko","nl","pt","zh-cn","zh-tw"],defaultTrainingLocale:"en",dataSetDefinitionName:"Cognitive Service Data Set Descriptor",testResultsDefinitionName:"Cognitive Service Test Results",fieldIds:{modifiedDate:6,evaluationStatus:7,instanceId:379,dataSetID:1730,dataSetName:1731,trainingType:1732,machineLearningError:1733,error:1733,dataSource:1734,dateLastSubmitted:1735,dateLastTrained:1736,locale:1737,dataSourceHistory:1738,developerId:1739,newDataSetId:1740,useSeedTrainingData:1741,resultCsv:1795,serviceInstanceGuid:1742,trainDataPercent:1796,testDataPercent:1797,trainingDataCsv:1798,testDataCsv:1799,accuracy:1806,precision:1807,recall:1808,fScore:1809,dateLastTested:1811,chatbotName:1816,classificationServiceProvider:1820,dataSetLocale:1829,bundleId:61001},defaultTrainDataPercentage:80,defaultTestDataPercentage:20}};class Zs{constructor(e,t){this.rxSystemConfigurationService=e,this.rxRecordInstanceDataPageService=t}getClassificationServiceProvider(){return this.rxSystemConfigurationService.getConfiguration("classificationServiceProvider")}getChatbotLocalesById(e){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:f.RX_CHATBOT.chatbotLocales.recordDefinitionName,propertySelection:(0,m.values)(f.RX_CHATBOT.chatbotLocales.fieldIds).join(","),queryExpression:`'${f.RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId}'="${e}"`}})}}Zs.\u0275fac=function(e){return new(e||Zs)(o["\u0275\u0275inject"](f.RxSystemConfigurationService),o["\u0275\u0275inject"](x.RxRecordInstanceDataPageService))},Zs.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Zs,factory:Zs.\u0275fac,providedIn:"root"});class el{getDataSourceType(e){let t;return e.fileName?t=Js.settings.dataSourceTypes.fileDataSource:e.recordDefinitionName&&(t=Js.settings.dataSourceTypes.innovationSuiteDataSource),t}getTrainingLocales(e){let t;return e===Js.settings.trainingTypes[f.MachineLearningProviderNames.Native].value?t=Js.settings.nativeProviderTrainingLocales:e===Js.settings.trainingTypes[f.MachineLearningProviderNames.Watson].value&&(t=Js.settings.watsonProviderTrainingLocales),t}}el.\u0275fac=function(e){return new(e||el)},el.\u0275prov=o["\u0275\u0275defineInjectable"]({token:el,factory:el.\u0275fac,providedIn:"root"});class tl extends l.RxModalClass{constructor(e,t,i,n,o,r,l){super(e,l),this.dockedPanelContext=e,this.rxChatbotDefinitionDataPageService=t,this.rxCognitiveTrainingService=i,this.rxCognitiveTrainingUtilsService=n,this.rxRecordInstanceService=o,this.translateService=r,this.injector=l,this.chatbotDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.name.label"),definitionType:s.RxDefinitionPickerType.Chatbot,required:!0},this.csvFileUploadMode=a.UploaderMode.Auto,this.chatbotDefinitionName$=new h.BehaviorSubject(""),this.chatbotDefinitions$=this.rxChatbotDefinitionDataPageService.get({headers:{"default-bundle-scope":""},params:{propertySelection:["chatbotName","id","enableTranslation"]}}).pipe((0,v.map)(e=>e.data)),this.chatbotDefinition$=(0,h.combineLatest)([this.chatbotDefinitionName$,this.chatbotDefinitions$]).pipe((0,v.map)(([e,t])=>(0,m.find)(t,{chatbotName:e})||null),(0,v.shareReplay)(1)),this.isChatbotTranslationEnabled$=this.chatbotDefinition$.pipe((0,v.map)(e=>1===(null==e?void 0:e.enableTranslation))),this.chatbotLocaleOptions$=this.chatbotDefinition$.pipe((0,v.switchMap)(e=>e?this.rxCognitiveTrainingService.getChatbotLocalesById(e.id).pipe((0,v.map)(e=>e.data.map(e=>e[f.RX_CHATBOT.chatbotLocales.fieldIds.locale]))):(0,h.of)([]))),this.optionFormatter=e=>e,this.contextData=this.dockedPanelContext.getData().data}ngOnInit(){super.ngOnInit(),this.localeOptions=this.rxCognitiveTrainingUtilsService.getTrainingLocales(Js.settings.trainingTypes.chatbot.value);const e=this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSource);this.dataSet={dataSetName:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSetName),description:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description),csvFile:null,chatbotLocale:[this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.locale)],chatbotDefinitionName:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.chatbotName),locale:[this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSetLocale)||Js.settings.defaultTrainingLocale],lastSubmittedDate:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dateLastSubmitted),status:(0,m.find)(Js.settings.trainingStatuses,{value:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status)})},e&&(this.contextData.editDataSet||this.contextData.copyDataSet)&&this.rxRecordInstanceService.getAttachment(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.getAttachmentRecordInstanceId).subscribe(t=>{this.dataSet.csvFile=[{data:(0,m.assign)(t,{name:e}),downloadURL:this.rxRecordInstanceService.getAttachmentDownloadUrl(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.recordInstance.id),isUploading:!0}]}),this.dataSet.chatbotDefinitionName&&this.chatbotDefinitionName$.next(this.dataSet.chatbotDefinitionName)}isDirty(){return this.chatbotDataSetForm.dirty}ngOnDestroy(){this.chatbotDefinitionName$.complete()}onChatbotDefinitionNameChange(e){this.dataSet.chatbotLocale=[],this.dataSet.locale=[],this.chatbotDefinitionName$.next(e)}onSaveClick(){this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSourceHistory,JSON.stringify({resourceType:this.contextData.dataSourceType.resourceType,fileName:this.dataSet.csvFile&&this.dataSet.csvFile[0].data.name})),this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"file",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data||null),this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"value",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data.name||null),this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,this.dataSet.description),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetLocale,this.dataSet.locale[0]||null),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dateLastSubmitted,(0,A.default)()),this.contextData.isNewDataSet||this.contextData.copyDataSet?(this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.bundleId,this.contextData.bundleId),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetName,this.dataSet.dataSetName),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetID,""),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.chatbotName,this.dataSet.chatbotDefinitionName),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.locale,this.dataSet.chatbotLocale[0]),this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.untrained.value),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.trainingType,Js.settings.trainingTypes.chatbot.value),this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")})):this.contextData.editDataSet&&(this.dataSet.status.value!==Js.settings.trainingStatuses.trained.value&&this.dataSet.status.value!==Js.settings.trainingStatuses.failed.value||this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.pendingRetraining.value),this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")}))}onCloseClick(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}tl.\u0275fac=function(e){return new(e||tl)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](f.RxChatbotDefinitionDataPageService),o["\u0275\u0275directiveInject"](Zs),o["\u0275\u0275directiveInject"](el),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},tl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:tl,selectors:[["rx-chatbot-data-set-blade"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Ki,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.chatbotDataSetForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:28,consts:[[1,"dp-body"],["chatbotDataSetForm","ngForm"],["class","d-flex justify-content-between m-0 mb-4",4,"ngIf"],["name","data-set-name","rx-id","data-set-name-field","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","description","rx-id","description-field","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","csv-file","rx-id","csv-file-field","required","","reusable","true",1,"form-group","d-block",3,"label","uploadMode","allowedTypes","ngModel","ngModelChange"],["name","chatbot-name","rx-id","chatbot-name-field","required","",1,"form-group","d-block",3,"options","ngModel","ngModelChange"],[4,"ngIf"],[1,"dp-footer"],["type","button","rx-id","save-button","adapt-button","","btn-type","primary",1,"mr-2",3,"disabled","click"],["type","button","rx-id","close-button","adapt-button","","btn-type","secondary",1,"mr-2",3,"click"],[1,"d-flex","justify-content-between","m-0","mb-4"],[1,"form-control-label"],["name","chatbot-locale","rx-id","chatbot-locale-field","required","",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"],["class","form-group d-block","name","locale","rx-id","locale-field","required","",3,"label","options","optionFormatter","ngModel","ngModelChange",4,"ngIf"],["name","locale","rx-id","locale-field","required","",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",null,1),o["\u0275\u0275template"](3,Ji,7,7,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.dataSetName=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-textfield",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.description=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-uploader",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.csvFile=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"rx-definition-picker",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.chatbotDefinitionName=e})("ngModelChange",function(e){return t.onChatbotDefinitionNameChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](11,tn,6,12,"div",7),o["\u0275\u0275pipe"](12,"async"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",8),o["\u0275\u0275elementStart"](14,"button",9),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"button",10),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.contextData.editDataSet),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,15,"com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.dataSetName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,17,"com.bmc.arsys.rx.client.common.description.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.description),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,19,"com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label")),o["\u0275\u0275property"]("uploadMode",t.csvFileUploadMode)("allowedTypes",o["\u0275\u0275pureFunction0"](27,nn))("ngModel",t.dataSet.csvFile),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.chatbotDefinitionPickerOptions)("ngModel",t.dataSet.chatbotDefinitionName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](12,21,t.chatbotDefinition$)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",e.pristine||e.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,23,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,25,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,n.NgIf,a.AdaptRxTextfieldComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptRxUploaderComponent,s.RxDefinitionPickerComponent,a.AdaptButtonComponent,a.AdaptRxSelectComponent],pipes:[u.TranslatePipe,n.AsyncPipe,n.DatePipe],encapsulation:2});class il extends l.RxModalClass{constructor(e,t,i,n){super(e,n),this.dockedPanelContext=e,this.rxCognitiveTrainingUtilsService=t,this.rxRecordInstanceService=i,this.injector=n,this.csvFileUploadMode=a.UploaderMode.Auto,this.optionFormatter=e=>e,this.contextData=this.dockedPanelContext.getData().data}ngOnInit(){super.ngOnInit(),this.localeOptions=this.rxCognitiveTrainingUtilsService.getTrainingLocales(this.contextData.trainingType.value);const e=this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSource);this.dataSet={dataSetName:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSetName),description:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description),csvFile:null,locale:[this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.locale)||Js.settings.defaultTrainingLocale],testDataPercent:this.contextData.isNewDataSet?Js.settings.defaultTestDataPercentage:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.testDataPercent),trainDataPercent:this.contextData.isNewDataSet?Js.settings.defaultTrainDataPercentage:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.trainDataPercent),status:(0,m.find)(Js.settings.trainingStatuses,{value:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status)}),lastSubmittedDate:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dateLastSubmitted),lastTrainedDate:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dateLastTrained),machineLearningError:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.machineLearningError)},e&&(this.contextData.editDataSet||this.contextData.copyDataSet)&&this.rxRecordInstanceService.getAttachment(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.getAttachmentRecordInstanceId).subscribe(t=>{this.dataSet.csvFile=[{data:(0,m.assign)(t,{name:e}),downloadURL:this.rxRecordInstanceService.getAttachmentDownloadUrl(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.recordInstance.id),isUploading:!0}]})}isDirty(){return this.fileDataSetForm.dirty}onTrainDataPercentCounterChange(e){this.dataSet.testDataPercent=100-e}onTestDataPercentCounterChange(e){this.dataSet.trainDataPercent=100-e}onSaveClick(){this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,this.dataSet.description),this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"file",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data||null),this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"value",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data.name||null),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSourceHistory,JSON.stringify({resourceType:this.contextData.dataSourceType.resourceType,fileName:this.dataSet.csvFile[0].data.name})),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.locale,this.dataSet.locale[0]),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dateLastSubmitted,(0,A.default)()),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.testDataPercent,this.dataSet.testDataPercent),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.trainDataPercent,this.dataSet.trainDataPercent),this.contextData.isNewDataSet||this.contextData.copyDataSet?(this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.bundleId,this.contextData.bundleId),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetName,this.dataSet.dataSetName),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetID,""),this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.untrained.value),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.classificationServiceProvider,this.contextData.trainingType.uniqueValue),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.trainingType,this.contextData.trainingType.value),this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")})):this.contextData.editDataSet&&(this.dataSet.status.value!==Js.settings.trainingStatuses.trained.value&&this.dataSet.status.value!==Js.settings.trainingStatuses.failed.value||this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.pendingRetraining.value),this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")}))}onCloseClick(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}il.\u0275fac=function(e){return new(e||il)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](el),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](o.Injector))},il.\u0275cmp=o["\u0275\u0275defineComponent"]({type:il,selectors:[["rx-file-data-set-blade"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](on,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.fileDataSetForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:42,consts:[[1,"dp-body"],["fileDataSetForm","ngForm"],[4,"ngIf"],["name","data-set-name","rx-id","data-set-name-field","required","",1,"form-group","d-block",3,"label","disabled","ngModel","ngModelChange"],["name","description","rx-id","description-field","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","training-type","rx-id","training-type-field","required","","disabled","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","csv-file","rx-id","csv-file-field","required","","reusable","true",1,"form-group","d-block",3,"label","uploadMode","allowedTypes","ngModel","ngModelChange"],["name","locale","rx-id","locale-field","required","",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","training-data","rx-id","training-data-field","placeholder","0","adaptMin","0","adaptMax","100","min","0","max","100","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","test-data","rx-id","test-data-field","placeholder","0","adaptMin","0","adaptMax","100","min","0","max","100","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],[1,"dp-footer"],["type","button","rx-id","save-button","adapt-button","","btn-type","primary",1,"mr-2",3,"disabled","click"],["type","button","rx-id","close-button","adapt-button","","btn-type","secondary",1,"mr-2",3,"click"],[1,"d-flex","justify-content-between","m-0","mb-3"],[1,"form-control-label"],[3,"config",4,"ngIf"],[3,"config"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",null,1),o["\u0275\u0275template"](3,sn,23,19,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.dataSetName=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-textfield",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.description=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-textfield",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.contextData.trainingType.displayName=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-uploader",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.csvFile=e}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"adapt-rx-select",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.locale=e}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"adapt-rx-counter",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onTrainDataPercentCounterChange(e)})("ngModelChange",function(e){return t.dataSet.trainDataPercent=e}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"adapt-rx-counter",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onTestDataPercentCounterChange(e)})("ngModelChange",function(e){return t.dataSet.testDataPercent=e}),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"div",10),o["\u0275\u0275elementStart"](19,"button",11),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"button",12),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.contextData.editDataSet),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,23,"com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")),o["\u0275\u0275property"]("disabled",t.contextData.editDataSet)("ngModel",t.dataSet.dataSetName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,25,"com.bmc.arsys.rx.client.admin.chatbots.description.title")),o["\u0275\u0275property"]("ngModel",t.dataSet.description),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,27,"com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label")),o["\u0275\u0275property"]("ngModel",t.contextData.trainingType.displayName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,29,"com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label")),o["\u0275\u0275property"]("uploadMode",t.csvFileUploadMode)("allowedTypes",o["\u0275\u0275pureFunction0"](41,nn))("ngModel",t.dataSet.csvFile),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,31,"com.bmc.arsys.rx.client.admin.cognitive-search.locale.label")),o["\u0275\u0275property"]("options",t.localeOptions)("optionFormatter",t.optionFormatter)("ngModel",t.dataSet.locale),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](15,33,"com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.trainDataPercent),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](17,35,"com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.testDataPercent),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",e.pristine||e.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](21,37,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,39,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,n.NgIf,a.AdaptRxTextfieldComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptRxUploaderComponent,a.AdaptRxSelectComponent,a.AdaptRxCounterComponent,a.AdaptMinValidatorDirective,a.AdaptMaxValidatorDirective,a.AdaptButtonComponent,a.AdaptAlertComponent],pipes:[u.TranslatePipe,n.DatePipe],encapsulation:2});class nl extends l.RxModalClass{constructor(e,t,i,n){super(e,n),this.dockedPanelContext=e,this.rxCommandFactoryService=t,this.rxRecordInstanceDataPageService=i,this.injector=n,this.classifications=[],this.evaluationText="",this.trainedDataSetOptions=[],this.optionFormatter=e=>e.name,this.contextData=this.dockedPanelContext.getData()}ngOnInit(){super.ngOnInit(),this.getDataSetList()}isDirty(){return this.interactiveEvaluationForm.dirty}getDataSetList(){const e={recorddefinition:Js.settings.dataSetDefinitionName,sortBy:Js.settings.fieldIds.dataSetName,queryExpression:this.contextData.evaluation.queryExpression+JSON.stringify(this.contextData.bundleId)+this.contextData.evaluation.serviceProviderQueryExpresion+this.contextData.trainingType.uniqueValue,propertySelection:[Js.settings.fieldIds.dataSetName,x.RX_RECORD_DEFINITION.coreFieldIds.status].join(",")};this.busy=this.rxRecordInstanceDataPageService.post({params:e}).subscribe(e=>{this.trainedDataSetOptions=(0,m.chain)(e.data).filter(e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.status]===Js.settings.trainingStatuses.trained.value||e[x.RX_RECORD_DEFINITION.coreFieldIds.status]===Js.settings.trainingStatuses.pendingRetraining.value).map(e=>({id:this.trainedDataSetOptions.length+1,name:e[Js.settings.fieldIds.dataSetName]})).value()})}classify(){this.rxCommandFactoryService.forResourceType(Js.settings.commands.classify).execute({textToClassify:this.evaluationText,trainingDataSetName:this.contextData.bundleId+":"+this.trainedDataSet[0].name}).subscribe(e=>{this.classifications=e})}displayClassification(e){return`${e.className} ${e.confidence.toFixed(2)}`}onCloseClick(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}nl.\u0275fac=function(e){return new(e||nl)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](o.Injector))},nl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:nl,selectors:[["rx-interactive-evaluation-blade"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ln,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.interactiveEvaluationForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:26,consts:[[1,"dp-body"],["interactiveEvaluationForm","ngForm"],[3,"options"],[1,"d-flex","flex-row","justify-content-between"],["name","trained-data-set","rx-id","trained-data-set-field","required","",1,"form-group","d-block","w-100",3,"label","options","optionFormatter","ngModel","ngModelChange"],["type","button","rx-id","refresh-button","adapt-button","","btn-type","tertiary",1,"d-icon-refresh_adapt",3,"click"],["name","evaluation-text","rx-id","evaluation-text-field","required","",1,"form-group","d-block",3,"label","tooltip","ngModel","ngModelChange"],["type","button","rx-id","classify-button","adapt-button","","btn-type","primary",3,"disabled","click"],[4,"ngIf"],[1,"dp-footer"],["type","button","rx-id","close-button","adapt-button","","btn-type","secondary",1,"mr-2",3,"click"],["class","card card-well mb-2",4,"ngFor","ngForOf"],[1,"card","card-well","mb-2"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",null,1),o["\u0275\u0275element"](3,"rx-busy-indicator",2),o["\u0275\u0275elementStart"](4,"div",3),o["\u0275\u0275elementStart"](5,"adapt-rx-select",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.trainedDataSet=e}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"button",5),o["\u0275\u0275listener"]("click",function(){return t.getDataSetList()}),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-textfield",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.evaluationText=e}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"button",7),o["\u0275\u0275listener"]("click",function(){return t.classify()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](15,dn,3,1,"div",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275elementStart"](17,"button",10),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](23,Ae,t.busy)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,13,"com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation-blade.trained-data-set.label")),o["\u0275\u0275property"]("options",t.trainedDataSetOptions)("optionFormatter",t.optionFormatter)("ngModel",t.trainedDataSet),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,15,"com.bmc.arsys.rx.client.common.refresh.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,17,"com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation-blade.text.label")),o["\u0275\u0275property"]("tooltip",o["\u0275\u0275pureFunction0"](25,pn))("ngModel",t.evaluationText),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",e.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,19,"com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation.classify.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.classifications),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,21,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,l.RxBusyIndicatorComponent,a.AdaptRxSelectComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent,a.AdaptRxTextfieldComponent,n.NgIf,n.NgForOf],pipes:[u.TranslatePipe],encapsulation:2});class ol extends f.RxExpressionConfigurator{constructor(){super(...arguments),this.commonDataDictionary$=(0,h.of)([{label:"Keywords",children:[{label:"Current user",icon:"d-icon-dollar",expression:"$USER$"},{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$",hidden:!0},{label:"Time stamp",icon:"d-icon-dollar",expression:"$TIMESTAMP$"}]}])}}class rl extends l.RxModalClass{constructor(e,t,i,n,o,r,l,c){super(e,c),this.dockedPanelContext=e,this.rxCognitiveTrainingUtilsService=t,this.rxDefinitionNameService=i,this.rxExpressionEditorService=n,this.rxRecordDefinitionCacheService=o,this.rxRecordInstanceService=r,this.translateService=l,this.injector=c,this.csvFileUploadMode=a.UploaderMode.Auto,this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.approval.record-definition-field.label"),definitionType:s.RxDefinitionPickerType.Record,required:!0},this.filterModeOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filters.label"),items:[{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.basic.label"),value:d.RecordGridFilterMode.Basic},{name:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.expression.label"),value:d.RecordGridFilterMode.Expression}]},this.recordDefinitionName$=new h.BehaviorSubject(""),this.recordDefinition$=this.recordDefinitionName$.pipe((0,v.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e):(0,h.of)(null)),(0,v.shareReplay)(1)),this.fieldOptions$=this.recordDefinition$.pipe((0,v.map)(e=>null==e?void 0:e.fieldDefinitions.map(e=>(0,m.pick)(e,["name","id"])).sort((e,t)=>e.name.localeCompare(t.name))),(0,v.shareReplay)(1)),this.optionFormatter=e=>e,this.fieldOptionsFormatter=e=>e.name,this.contextData=this.dockedPanelContext.getData().data}ngOnInit(){super.ngOnInit(),this.expressionConfigurator=new ol,this.expressionConfigurator.configureForProperty({propertyPath:"queryExpression",operators:this.expressionConfigurator.getOperatorRowsByGroup(f.ExpressionOperatorGroup.All),dataDictionary$:this.recordDefinition$.pipe((0,v.withLatestFrom)(this.expressionConfigurator.commonDataDictionary$),(0,v.map)(([e,t])=>[{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filter-by.label"),children:[{label:this.rxDefinitionNameService.getDisplayName(null==e?void 0:e.name),children:null==e?void 0:e.fieldDefinitions.map(e=>({label:e.name,icon:"d-icon-field_text",expression:`'${e.id}'`}))}]},t[0]]))}),this.queryExpressionOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.expression.label"),dataDictionary$:this.expressionConfigurator.getDataDictionary("queryExpression"),operators:this.expressionConfigurator.getOperators()},this.localeOptions=this.rxCognitiveTrainingUtilsService.getTrainingLocales(this.contextData.trainingType.value);const e=this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSource);this.dataSet={dataSetName:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSetName),description:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description),csvFile:null,locale:[this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.locale)||Js.settings.defaultTrainingLocale],useSeedTrainingData:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.useSeedTrainingData),testDataPercent:this.contextData.isNewDataSet?Js.settings.defaultTestDataPercentage:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.testDataPercent),trainDataPercent:this.contextData.isNewDataSet?Js.settings.defaultTrainDataPercentage:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.trainDataPercent),status:(0,m.find)(Js.settings.trainingStatuses,{value:this.contextData.recordInstance.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status)}),lastSubmittedDate:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dateLastSubmitted),lastTrainedDate:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dateLastTrained),machineLearningError:this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.machineLearningError)};let t=JSON.parse(this.contextData.recordInstance.getFieldValue(Js.settings.fieldIds.dataSourceHistory));t?(t.layout=JSON.parse(t.layout),t.layout.categoryFields=(0,m.map)(t.layout.categoryFields,e=>(0,m.pick)(e,["name","id"])),t.layout.textFields=(0,m.map)(t.layout.textFields,e=>(0,m.pick)(e,["name","id"])),t.layout.queryExpressionBasic={filtersJson:JSON.stringify(t.layout.queryExpressionBasic.filtersJson),basicFilters:t.layout.queryExpressionBasic.basicFilters}):t=this.contextData.dataSourceType.dataSourceHistory,this.dataSet.dataSourceHistory=t,this.dataSet.filterMode=t.queryExpression?d.RecordGridFilterMode.Expression:d.RecordGridFilterMode.Basic,e&&(this.contextData.editDataSet||this.contextData.copyDataSet)&&this.rxRecordInstanceService.getAttachment(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.getAttachmentRecordInstanceId).subscribe(t=>{this.dataSet.csvFile=[{data:(0,m.assign)(t,{name:e}),downloadURL:this.rxRecordInstanceService.getAttachmentDownloadUrl(Js.settings.dataSetDefinitionName,Js.settings.fieldIds.dataSource,this.contextData.recordInstance.id),isUploading:!0}]}),this.dataSet.dataSourceHistory.recordDefinitionName&&this.recordDefinitionName$.next(this.dataSet.dataSourceHistory.recordDefinitionName)}isDirty(){return this.recordDataSetForm.dirty}ngOnDestroy(){this.recordDefinitionName$.complete()}openExpressionEditor(){this.rxExpressionEditorService.openEditor({property:{path:"queryExpression",value:this.dataSet.dataSourceHistory.queryExpression,label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filter-expression.label")},expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.field.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.dataSet.dataSourceHistory.queryExpression=e.value})}isBasicFilterMode(){return this.dataSet.filterMode===d.RecordGridFilterMode.Basic}isExpressionFilterMode(){return this.dataSet.filterMode===d.RecordGridFilterMode.Expression}onRecordDefinitionNameChange(e){this.dataSet.filterMode=d.RecordGridFilterMode.Basic,this.dataSet.dataSourceHistory.layout.queryExpressionBasic={filtersJson:null,basicFilters:null},this.dataSet.dataSourceHistory.queryExpression=null,this.dataSet.dataSourceHistory.layout.textFields=[],this.dataSet.dataSourceHistory.layout.categoryFields=[],this.recordDefinitionName$.next(e)}onTrainDataPercentCounterChange(e){this.dataSet.testDataPercent=100-e}onTestDataPercentCounterChange(e){this.dataSet.trainDataPercent=100-e}onFilterModeChange(){this.dataSet.dataSourceHistory.layout.queryExpressionBasic={filtersJson:null,basicFilters:null},this.dataSet.dataSourceHistory.queryExpression=""}onSaveClick(){this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"file",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data||null),this.contextData.recordInstance.setFieldProp(Js.settings.fieldIds.dataSource,"value",!(0,m.isEmpty)(this.dataSet.csvFile)&&this.dataSet.csvFile[0].data.name||null),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dateLastSubmitted,(0,A.default)()),this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,this.dataSet.description),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.locale,this.dataSet.locale[0]),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.testDataPercent,this.dataSet.testDataPercent),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.trainDataPercent,this.dataSet.trainDataPercent),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSourceHistory,JSON.stringify({layout:JSON.stringify({queryExpressionBasic:{filtersJson:JSON.parse(this.dataSet.dataSourceHistory.layout.queryExpressionBasic.filtersJson),basicFilters:this.dataSet.dataSourceHistory.layout.queryExpressionBasic.basicFilters},textFields:this.dataSet.dataSourceHistory.layout.textFields,categoryFields:this.dataSet.dataSourceHistory.layout.categoryFields}),resourceType:this.contextData.dataSourceType.resourceType,recordDefinitionName:this.dataSet.dataSourceHistory.recordDefinitionName,queryExpression:this.dataSet.dataSourceHistory.queryExpression,trainingDataMapper:{resourceType:this.dataSet.dataSourceHistory.trainingDataMapper.resourceType,textFields:(0,m.map)(this.dataSet.dataSourceHistory.layout.textFields,"id"),categoryFields:(0,m.map)(this.dataSet.dataSourceHistory.layout.categoryFields,"id")},timeCriteria:this.dataSet.dataSourceHistory.timeCriteria,isScheduleEnabled:this.dataSet.dataSourceHistory.isScheduleEnabled})),this.contextData.isNewDataSet||this.contextData.copyDataSet?(this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.bundleId,this.contextData.bundleId),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetName,this.dataSet.dataSetName),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.dataSetID,""),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.classificationServiceProvider,this.contextData.trainingType.uniqueValue),this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.untrained.value),this.contextData.recordInstance.setFieldValue(Js.settings.fieldIds.trainingType,this.contextData.trainingType.value),this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")})):this.contextData.editDataSet&&(this.dataSet.status.value!==Js.settings.trainingStatuses.trained.value&&this.dataSet.status.value!==Js.settings.trainingStatuses.failed.value||this.contextData.recordInstance.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.status,Js.settings.trainingStatuses.pendingRetraining.value),this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(()=>{this.dockedPanelContext.close("save")}))}onCloseClick(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}rl.\u0275fac=function(e){return new(e||rl)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](el),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](s.RxExpressionEditorService),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},rl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:rl,selectors:[["rx-record-data-set-blade"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](un,5,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordDataSetForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:49,consts:[[1,"dp-body"],["recordDataSetForm","ngForm"],[4,"ngIf"],["name","data-set-name","rx-id","data-set-name-field","required","",1,"form-group","d-block",3,"label","disabled","ngModel","ngModelChange"],["name","description","rx-id","description-field","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","training-type","rx-id","training-type-field","required","","disabled","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["class","form-group d-block",4,"ngIf"],["name","csv-file","rx-id","csv-file-field","reusable","true",1,"form-group","d-block",3,"label","uploadMode","allowedTypes","ngModel","ngModelChange"],["name","locale","rx-id","locale-field","required","",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","record-definition-name","rx-id","record-definition-name-field","required","",1,"form-group","d-block",3,"options","ngModel","ngModelChange"],["name","training-data","rx-id","training-data-field","placeholder","0","adaptMin","0","adaptMax","100","min","0","max","100","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],["name","test-data","rx-id","test-data-field","placeholder","0","adaptMin","0","adaptMax","100","min","0","max","100","required","",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],[1,"dp-footer"],["type","button","rx-id","save-button","adapt-button","","btn-type","primary",1,"mr-2",3,"disabled","click"],["type","button","rx-id","close-button","adapt-button","","btn-type","secondary",1,"mr-2",3,"click"],[1,"d-flex","justify-content-between","m-0","mb-3"],[1,"form-control-label"],[3,"config",4,"ngIf"],[3,"config"],[1,"form-group","d-block"],["name","filter-mode","rx-id","filter-mode-field",1,"form-group","d-block",3,"options","ngModel","ngModelChange"],["name","text-fields","rx-id","text-fields-field","required","","multiple","true",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","category-fields","rx-id","category-fields-field","required","","multiple","true",1,"form-group","d-block",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","filters","rx-id","filters-field",1,"form-group","d-block",3,"options","ngModel","ngModelChange"],["name","query-expression","rx-id","query-expression-field",1,"form-group","d-block",3,"options","ngModel","events","ngModelChange"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",null,1),o["\u0275\u0275template"](3,hn,23,19,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-textfield",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.dataSetName=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-textfield",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.description=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-textfield",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.contextData.trainingType.displayName=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](10,fn,3,3,"span",6),o["\u0275\u0275template"](11,gn,3,3,"span",6),o["\u0275\u0275elementStart"](12,"adapt-rx-uploader",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.csvFile=e}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"adapt-rx-select",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.locale=e}),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"rx-definition-picker",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.dataSet.dataSourceHistory.recordDefinitionName=e})("ngModelChange",function(e){return t.onRecordDefinitionNameChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](17,bn,10,20,"div",2),o["\u0275\u0275pipe"](18,"async"),o["\u0275\u0275elementStart"](19,"adapt-rx-counter",10),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onTrainDataPercentCounterChange(e)})("ngModelChange",function(e){return t.dataSet.trainDataPercent=e}),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"adapt-rx-counter",11),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onTestDataPercentCounterChange(e)})("ngModelChange",function(e){return t.dataSet.testDataPercent=e}),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",12),o["\u0275\u0275elementStart"](24,"button",13),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](25),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"button",14),o["\u0275\u0275listener"]("click",function(){return t.onCloseClick()}),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](2);o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.contextData.editDataSet),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,28,"com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")),o["\u0275\u0275property"]("disabled",t.contextData.editDataSet)("ngModel",t.dataSet.dataSetName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,30,"com.bmc.arsys.rx.client.common.description.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.description),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,32,"com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label")),o["\u0275\u0275property"]("ngModel",t.contextData.trainingType.displayName),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.dataSet.useSeedTrainingData),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.dataSet.useSeedTrainingData),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,34,"com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label")),o["\u0275\u0275property"]("uploadMode",t.csvFileUploadMode)("allowedTypes",o["\u0275\u0275pureFunction0"](48,nn))("ngModel",t.dataSet.csvFile),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](15,36,"com.bmc.arsys.rx.client.admin.cognitive-search.locale.label")),o["\u0275\u0275property"]("options",t.localeOptions)("optionFormatter",t.optionFormatter)("ngModel",t.dataSet.locale),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",t.recordDefinitionPickerOptions)("ngModel",t.dataSet.dataSourceHistory.recordDefinitionName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](18,38,t.recordDefinition$)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,40,"com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.trainDataPercent),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](22,42,"com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label")),o["\u0275\u0275property"]("ngModel",t.dataSet.testDataPercent),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",e.pristine||e.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](26,44,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](29,46,"com.bmc.arsys.rx.client.common.close.label")," ")}},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,n.NgIf,a.AdaptRxTextfieldComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptRxUploaderComponent,a.AdaptRxSelectComponent,s.RxDefinitionPickerComponent,a.AdaptRxCounterComponent,a.AdaptMinValidatorDirective,a.AdaptMaxValidatorDirective,a.AdaptButtonComponent,a.AdaptAlertComponent,s.GroupButtonFormControlComponent,d.RecordGridFilterSelectControlComponent,s.ExpressionFormControlComponent],pipes:[u.TranslatePipe,n.AsyncPipe,n.DatePipe],encapsulation:2});class al{constructor(e,t,i,n,o,r,a,s,l,c,d){this.rxBundleCacheService=e,this.rxCommandFactoryService=t,this.rxCognitiveTrainingUtilsService=i,this.rxCurrentUserService=n,this.rxDefinitionNameService=o,this.rxJsonParserService=r,this.rxModalService=a,this.rxNotificationService=s,this.rxRecordInstanceDataPageService=l,this.rxRecordInstanceService=c,this.translateService=d,this.fileDataSourceType=Js.settings.dataSourceTypes[Qs.FileDataSource],this.innovationSuiteDataSourceType=Js.settings.dataSourceTypes[Qs.InnovationSuiteDataSource],this.bundleId=this.rxBundleCacheService.bundleId,this.isAdministrator=this.rxCurrentUserService.isAdministrator()}ngOnInit(){this.trainingType.displayName=this.translateService.instant(this.trainingType.displayName);const e={[Ks.AutoClassificationTrainingAndEvaluation]:{dataSets:[{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.train-and-test.label"),style:"tertiary",iconCls:"play_o",disabled:()=>this.isDataSetActionButtonDisabled(),actions:[{name:()=>{this.trainDataSet((0,m.head)(this.cognitiveTrainingRecordGrid.api.getSelectedRows()))}}]}],testResults:[]},[Ks.ChatbotEvaluation]:{dataSets:[{label:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.test.label"),style:"tertiary",iconCls:"play_o",disabled:()=>!this.isAdministrator||1!==this.cognitiveTrainingRecordGrid.api.getSelectedRows().length,actions:[{name:()=>{this.testDataSet((0,m.head)(this.cognitiveTrainingRecordGrid.api.getSelectedRows()))}}]}]},common:{dataSets:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.edit.label"),style:"tertiary",icon:"pencil",disabled:()=>this.isChatbotDataSetEditButtonDisabled(),actions:[{name:()=>{this.editDataSet((0,m.head)(this.cognitiveTrainingRecordGrid.api.getSelectedRows()))}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.copy.label"),style:"tertiary",icon:"files_copy_o",disabled:()=>!this.isAdministrator||1!==this.cognitiveTrainingRecordGrid.api.getSelectedRows().length,actions:[{name:()=>{this.copyDataSet((0,m.head)(this.cognitiveTrainingRecordGrid.api.getSelectedRows()))}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",disabled:()=>!this.isAdministrator,actions:[{name:()=>{this.delete()}}]}],testResults:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",disabled:()=>this.isTestResultsDeletionRestricted(),actions:[{name:()=>{this.delete()}}]}]}},t={[Ks.AutoClassificationTrainingAndEvaluation]:{dataSets:[{index:2,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.status.label")},{index:3,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.grid.column.description"),visible:!1},{index:4,fieldId:String(Js.settings.fieldIds.dataSourceHistory),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.data-source.label"),visible:!1,cellTemplate:this.dataSourceHistoryNameCellTemplate},{index:6,fieldId:String(Js.settings.fieldIds.trainingType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label")},{index:8,fieldId:String(Js.settings.fieldIds.locale),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.locale.label"),visible:!1},{index:11,fieldId:String(Js.settings.fieldIds.trainDataPercent),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.train-data-percent.label")},{index:12,fieldId:String(Js.settings.fieldIds.testDataPercent),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.test-data-percent.label")},{index:13,fieldId:String(Js.settings.fieldIds.classificationServiceProvider),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.classification-service-provider.label"),visible:!0}],testResults:[{index:6,fieldId:String(Js.settings.fieldIds.trainingDataCsv),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label"),clickable:!0,actions:[{name:(e,t)=>this.downloadTrainingData(t)}]}]},[Ks.ChatbotEvaluation]:{dataSets:[{index:2,fieldId:String(Js.settings.fieldIds.chatbotName),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.name.label"),visible:!0,cellTemplate:this.chatbotNameCellTemplate},{index:3,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.status),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.status.label"),visible:!1},{index:4,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.description.title")},{index:5,fieldId:String(Js.settings.fieldIds.dataSourceHistory),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.data-source.label"),cellTemplate:this.dataSourceHistoryNameCellTemplate},{index:7,fieldId:String(Js.settings.fieldIds.trainingType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label"),visible:!1},{index:9,fieldId:String(Js.settings.fieldIds.locale),title:"Locale"},{index:12,fieldId:String(Js.settings.fieldIds.dataSetLocale),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.data-set-locale.label"),visible:!1}]},common:{dataSets:[{index:0,fieldId:String(Js.settings.fieldIds.dataSetID),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title"),visible:!1},{index:1,fieldId:String(Js.settings.fieldIds.dataSetName),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")},{index:5,fieldId:String(Js.settings.fieldIds.dataSource),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.current-data-source.title"),visible:!1},{index:7,fieldId:String(Js.settings.fieldIds.dateLastTrained),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label"),visible:!1},{index:10,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.displayId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.request-id.title"),visible:!1},{index:10,fieldId:String(Js.settings.fieldIds.instanceId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title"),visible:!1}],testResults:[{index:0,fieldId:String(Js.settings.fieldIds.dataSetID),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title"),visible:!1},{index:1,fieldId:String(Js.settings.fieldIds.trainingType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.data-set-type.label"),visible:!1},{index:2,fieldId:String(Js.settings.fieldIds.dataSetName),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label")},{index:3,fieldId:String(Js.settings.fieldIds.evaluationStatus),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.evaluation-status.label")},{index:4,fieldId:String(Js.settings.fieldIds.dateLastTested),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.data-last-tested.label"),visible:!1},{index:5,fieldId:String(Js.settings.fieldIds.modifiedDate),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.modified-date.label"),visible:!1},{index:7,fieldId:String(Js.settings.fieldIds.testDataCsv),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label"),clickable:!0,actions:[{name:(e,t)=>this.downloadTestData(t)}]},{index:8,fieldId:String(Js.settings.fieldIds.accuracy),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.accuracy.label")},{index:9,fieldId:String(Js.settings.fieldIds.precision),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.precision.label")},{index:10,fieldId:String(Js.settings.fieldIds.recall),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.recall.label")},{index:11,fieldId:String(Js.settings.fieldIds.fScore),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.f-score.label")},{index:12,fieldId:String(Js.settings.fieldIds.resultCsv),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.results.label"),clickable:!0,actions:[{name:(e,t)=>this.downloadResults(t)}]},{index:13,fieldId:String(Js.settings.fieldIds.instanceId),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title"),visible:!1},{index:14,fieldId:String(Js.settings.fieldIds.error),title:this.translateService.instant("com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.error.name"),visible:!1}]}};this.evaluation=Js.settings.evaluations[this.evaluationName],this.recordGridConfig=(0,h.of)({enableFiltering:!0,enableRowSelection:d.RowSelectionMode.Multiple,recordDefinitionName:this.recordDefinitionName,actionButtons:(0,m.chain)(e.common[this.tab.name]).concat(e[this.evaluation.name][this.tab.name]).compact().value(),columns:(0,m.chain)(t.common[this.tab.name]).concat(t[this.evaluation.name][this.tab.name]).compact().value(),getData:e=>{let t=this.evaluation.queryExpression+JSON.stringify(this.bundleId);this.evaluation.name===Js.settings.evaluations.autoClassificationTrainingAndEvaluation.name&&(t+=this.evaluation.serviceProviderQueryExpresion+this.trainingType.uniqueValue);const i={recorddefinition:e.recorddefinition,pageSize:e.pageSize,queryExpression:(0,m.compact)([e.queryExpression,t]).join(" AND ")};return this.rxRecordInstanceDataPageService.post({params:i})}})}createDataSet(e){this.rxRecordInstanceService.getNew(Js.settings.dataSetDefinitionName).subscribe(t=>{const i={bundleId:this.bundleId,dataSourceType:(0,m.cloneDeep)(Js.settings.dataSourceTypes[e]),evaluation:this.evaluation,isNewDataSet:!0,recordInstance:t,trainingType:this.trainingType};this.isAutoClassificationTrainingAndEvaluation()?e===Js.settings.dataSourceTypes.innovationSuiteDataSource.name?this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.new-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.innovationSuiteDataSource.displayName)}),content:rl,size:"lg",data:{data:i}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop):e===Js.settings.dataSourceTypes.fileDataSource.name&&this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.new-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.fileDataSource.displayName)}),content:il,size:"lg",data:{data:i}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop):this.isChatbotEvaluation()&&this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.new-chatbot-data-set.title"),content:tl,size:"lg",data:{data:i}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop)})}editDataSet(e){const t=e[Js.settings.fieldIds.instanceId];this.rxRecordInstanceService.get(Js.settings.dataSetDefinitionName,t).subscribe(e=>{const t=this.rxJsonParserService.tryParseJson(e.getFieldValue(Js.settings.fieldIds.dataSourceHistory)),i=this.rxCognitiveTrainingUtilsService.getDataSourceType(t),n={dataSourceType:i,editDataSet:!0,evaluation:this.evaluation,recordInstance:e,trainingType:this.trainingType,getAttachmentRecordInstanceId:e.id};this.isAutoClassificationTrainingAndEvaluation()?i.name===Js.settings.dataSourceTypes.innovationSuiteDataSource.name?this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.edit-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.innovationSuiteDataSource.displayName)}),content:rl,size:"lg",data:{data:n}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop):i.name===Js.settings.dataSourceTypes.fileDataSource.name&&this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.edit-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.fileDataSource.displayName)}),content:il,size:"lg",data:{data:n}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop):this.isChatbotEvaluation()&&this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.edit-chatbot-data-set.title"),content:tl,size:"lg",data:{data:n}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop)})}copyDataSet(e){const t=e[Js.settings.fieldIds.instanceId];(0,h.combineLatest)([this.rxRecordInstanceService.get(Js.settings.dataSetDefinitionName,t),this.rxRecordInstanceService.getNew(Js.settings.dataSetDefinitionName)]).subscribe(([e,t])=>{const i=this.rxJsonParserService.tryParseJson(e.getFieldValue(Js.settings.fieldIds.dataSourceHistory)),n=this.rxCognitiveTrainingUtilsService.getDataSourceType(i);t.setFieldValue(Js.settings.fieldIds.dataSetName,""),t.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,e.getFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description)),t.setFieldValue(Js.settings.fieldIds.trainingType,e.getFieldValue(Js.settings.fieldIds.trainingType)),t.setFieldValue(Js.settings.fieldIds.locale,e.getFieldValue(Js.settings.fieldIds.locale)),t.setFieldProp(Js.settings.fieldIds.dataSource,"value",e.getFieldValue(Js.settings.fieldIds.dataSource)||null),t.fieldInstances[Js.settings.fieldIds.dataSourceHistory].value=JSON.stringify(i);const o={bundleId:this.bundleId,dataSourceType:n,copyDataSet:!0,evaluation:this.evaluation,recordInstance:null,trainingType:this.trainingType,getAttachmentRecordInstanceId:e.id};this.isAutoClassificationTrainingAndEvaluation()?(t.setFieldValue(Js.settings.fieldIds.classificationServiceProvider,e.getFieldValue(Js.settings.fieldIds.classificationServiceProvider)),t.setFieldValue(Js.settings.fieldIds.trainDataPercent,e.getFieldValue(Js.settings.fieldIds.trainDataPercent)),t.setFieldValue(Js.settings.fieldIds.testDataPercent,e.getFieldValue(Js.settings.fieldIds.testDataPercent)),o.recordInstance=t,n.name===Js.settings.dataSourceTypes.innovationSuiteDataSource.name?this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.copy-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.innovationSuiteDataSource.displayName)}),content:rl,size:"lg",data:{data:o}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop):n.name===Js.settings.dataSourceTypes.fileDataSource.name&&this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.copy-data-set.title",{dataSetName:this.translateService.instant(Js.settings.dataSourceTypes.fileDataSource.displayName)}),content:il,size:"lg",data:{data:o}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop)):this.isChatbotEvaluation()&&(t.setFieldValue(Js.settings.fieldIds.chatbotName,e.getFieldValue(Js.settings.fieldIds.chatbotName)),t.setFieldValue(Js.settings.fieldIds.dataSetLocale,e.getFieldValue(Js.settings.fieldIds.dataSetLocale)),o.recordInstance=t,this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.copy-chatbot-data-set.title"),content:tl,size:"lg",data:{data:o}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop))})}delete(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant(this.tab.deletionConfirmationMessage)}).then(e=>{e&&(0,h.forkJoin)((0,m.map)(this.cognitiveTrainingRecordGrid.api.getSelectedRows(),e=>this.rxRecordInstanceService.delete(this.tab.recordDefinitionName,e[x.RX_RECORD_DEFINITION.coreFieldIds.id]))).subscribe(()=>{this.cognitiveTrainingRecordGrid.api.refresh().subscribe(),this.rxNotificationService.addSuccessMessage(this.translateService.instant(this.tab.deletionSuccessMessage))})})}trainDataSet(e){this.rxCommandFactoryService.forResourceType(Js.settings.commands.train).execute({trainingDataSetName:`${this.bundleId}:${e[Js.settings.fieldIds.dataSetName]}`}).pipe((0,v.catchError)(e=>(0,h.throwError)(e)),(0,v.finalize)(()=>this.cognitiveTrainingRecordGrid.api.refresh().subscribe())).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.training-process-triggered.message"))})}testDataSet(e){this.rxCommandFactoryService.forResourceType(Js.settings.commands.test).execute({trainingDataSetName:`${this.bundleId}:${e[Js.settings.fieldIds.dataSetName]}`}).pipe((0,v.catchError)(e=>(0,h.throwError)(e)),(0,v.finalize)(()=>this.cognitiveTrainingRecordGrid.api.refresh().subscribe())).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.data-set-submitted.message"))})}downloadTrainingData(e){this.rxRecordInstanceService.downloadAttachment(Js.settings.testResultsDefinitionName,Js.settings.fieldIds.trainingDataCsv,e[Js.settings.fieldIds.instanceId],e[Js.settings.fieldIds.trainingDataCsv])}downloadTestData(e){this.rxRecordInstanceService.downloadAttachment(Js.settings.testResultsDefinitionName,Js.settings.fieldIds.testDataCsv,e[Js.settings.fieldIds.instanceId],e[Js.settings.fieldIds.testDataCsv])}downloadResults(e){this.rxRecordInstanceService.downloadAttachment(Js.settings.testResultsDefinitionName,Js.settings.fieldIds.resultCsv,e[Js.settings.fieldIds.instanceId],e[Js.settings.fieldIds.resultCsv])}openInteractiveEvaluationBlade(){this.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-interactive.evaluation.title"),content:nl,size:"lg",data:{bundleId:this.bundleId,evaluation:this.evaluation,trainingType:this.trainingType}}).then(e=>{e&&this.cognitiveTrainingRecordGrid.api.refresh().subscribe()}).catch(m.noop)}isDataSetsTab(){return"dataSets"===this.tab.name}isTestResultsTab(){return"testResults"===this.tab.name}isAutoClassificationTrainingAndEvaluation(){return this.evaluation.name===Js.settings.evaluations.autoClassificationTrainingAndEvaluation.name}isChatbotEvaluation(){return this.evaluation.name===Js.settings.evaluations.chatbotEvaluation.name}formatDataSourceHistory(e,t){const i=JSON.parse(this.getCellValue(e,t));return i.fileName||this.rxDefinitionNameService.getDisplayName(i.recordDefinitionName)}getCellValue(e,t){return e[t.field]}isDataSetActionButtonDisabled(){const e=this.cognitiveTrainingRecordGrid.api.getSelectedRows();return!this.isAdministrator||1!==e.length||e[0][x.RX_RECORD_DEFINITION.coreFieldIds.status]===Js.settings.trainingStatuses.training.value||e[0][x.RX_RECORD_DEFINITION.coreFieldIds.status]===Js.settings.trainingStatuses.inProgress.value}isChatbotDataSetEditButtonDisabled(){const e=this.cognitiveTrainingRecordGrid.api.getSelectedRows();return!this.isAdministrator||1!==e.length||e[0][x.RX_RECORD_DEFINITION.coreFieldIds.status]===Js.settings.trainingStatuses.training.value}isTestResultsDeletionRestricted(){const e=this.cognitiveTrainingRecordGrid.api.getSelectedRows();return!this.isAdministrator||(0,m.some)(e,e=>e[Js.settings.fieldIds.evaluationStatus]===Js.settings.evaluationStatuses.queued.value)}openDockedPanel(e){return this.rxModalService.openDockedPanel(e).catch(m.noop)}}al.\u0275fac=function(e){return new(e||al)(o["\u0275\u0275directiveInject"](f.RxBundleCacheService),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](el),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](g.RxJsonParserService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](u.TranslateService))},al.\u0275cmp=o["\u0275\u0275defineComponent"]({type:al,selectors:[["rx-cognitive-training-record-grid"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Cn,7),o["\u0275\u0275viewQuery"](Sn,7),o["\u0275\u0275viewQuery"](wn,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.cognitiveTrainingRecordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.chatbotNameCellTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataSourceHistoryNameCellTemplate=e.first)}},inputs:{tab:"tab",evaluationName:"evaluationName",recordDefinitionName:"recordDefinitionName",trainingType:"trainingType"},decls:8,vars:3,consts:[[4,"ngIf"],["class","d-icon-target_cursor align-self-start","type","button","rx-id","interactive-evaluation","adapt-button","","btn-type","tertiary",3,"disabled","click",4,"ngIf"],[3,"config"],["cognitiveTrainingRecordGrid",""],["dataSourceHistoryNameCellTemplate",""],["chatbotNameCellTemplate",""],["class","dropdown","adaptDropdown","",3,"autoFocusFirst",4,"ngIf"],["class","d-icon-plus_circle align-self-start","type","button","rx-id","create-chatbot-data-set","adapt-button","","btn-type","tertiary",3,"disabled","click",4,"ngIf"],["adaptDropdown","",1,"dropdown",3,"autoFocusFirst"],["type","button","rx-id","data-set-dropdown","adapt-button","","adaptDropdownToggle","","btn-type","tertiary",1,"d-icon-plus_circle","align-self-start"],["adaptDropdownMenu","",1,"dropdown-menu"],["rx-id","create-record-data-set",1,"dropdown-item",3,"disabled","click"],["rx-id","create-file-data-set",1,"dropdown-item",3,"disabled","click"],["type","button","rx-id","create-chatbot-data-set","adapt-button","","btn-type","tertiary",1,"d-icon-plus_circle","align-self-start",3,"disabled","click"],["type","button","rx-id","interactive-evaluation","adapt-button","","btn-type","tertiary",1,"d-icon-target_cursor","align-self-start",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,Dn,3,2,"div",0),o["\u0275\u0275template"](1,Rn,3,4,"button",1),o["\u0275\u0275element"](2,"rx-record-grid",2,3),o["\u0275\u0275template"](4,An,2,1,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](6,Tn,3,3,"ng-template",null,5,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275property"]("ngIf",t.isDataSetsTab()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isAutoClassificationTrainingAndEvaluation()&&t.isTestResultsTab()),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig))},directives:[n.NgIf,d.RecordGridComponent,a.AdaptDropdownDirective,a.AdaptButtonComponent,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective],pipes:[u.TranslatePipe,f.RxDefinitionNamePipe],encapsulation:2});class sl extends p.BaseViewComponent{constructor(e){super(),this.rxCognitiveTrainingService=e,this.sections=Js.settings.sections,this.tabs=[Js.settings.tabs[Ys.DataSets],Js.settings.tabs[Ys.TestResults]],this.destroyed$=new h.ReplaySubject(1)}ngOnInit(){super.ngOnInit(),this.busy=this.rxCognitiveTrainingService.getClassificationServiceProvider().pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.trainingType=Js.settings.trainingTypes[e.value],(0,m.find)(this.sections,{evaluationName:Js.settings.evaluations.autoClassificationTrainingAndEvaluation.name}).title=this.trainingType.title})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}sl.\u0275fac=function(e){return new(e||sl)(o["\u0275\u0275directiveInject"](Zs))},sl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:sl,selectors:[["rx-admin-cognitive-training"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[3,"header"],["multiselect","true"],[3,"title","isOpen",4,"ngFor","ngForOf"],[3,"title","isOpen"],[4,"ngIf"],[3,"adapt-tab-title",4,"ngFor","ngForOf"],[3,"adapt-tab-title"],[3,"evaluationName","tab","recordDefinitionName","trainingType"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-accordion",1),o["\u0275\u0275template"](3,Mn,3,5,"adapt-accordion-tab",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.admin.cognitive-training.header.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.sections))},directives:[s.AdminSettingsComponent,a.AdaptAccordionComponent,n.NgForOf,a.AdaptAccordionTabComponent,n.NgIf,a.AdaptTabsComponent,a.AdaptTabsPanelComponent,al],pipes:[u.TranslatePipe],encapsulation:2});class ll{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-cognitive-training",componentFactory:this.componentFactoryResolver.resolveComponentFactory(sl),name:"Cognitive training",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}ll.\u0275fac=function(e){return new(e||ll)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},ll.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ll,declarations:[tl,sl,al,il,nl,rl],imports:[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptDockedPanelModule,a.AdaptDropdownModule,a.AdaptModalModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxUploaderModule,a.AdaptRxValidatorsModule,a.AdaptTabsModule,s.AdminSettingsModule,n.CommonModule,s.ExpressionFormControlModule,r.FormsModule,s.GroupButtonFormControlModule,d.RecordGridDesignModule,d.RecordGridModule,l.RxBusyIndicatorModule,f.RxDefinitionModule,s.RxDefinitionPickerModule,u.TranslateModule,d.RecordGridFilterSelectControlModule]}),ll.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptDockedPanelModule,a.AdaptDropdownModule,a.AdaptModalModule,a.AdaptRxCounterModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxUploaderModule,a.AdaptRxValidatorsModule,a.AdaptTabsModule,s.AdminSettingsModule,n.CommonModule,s.ExpressionFormControlModule,r.FormsModule,s.GroupButtonFormControlModule,d.RecordGridDesignModule,d.RecordGridModule,l.RxBusyIndicatorModule,f.RxDefinitionModule,s.RxDefinitionPickerModule,u.TranslateModule,d.RecordGridFilterSelectControlModule]]});const cl="ComAround Knowledge",dl="com.bmc.dsm.chatbot.command.PingComAroundCommand",pl={serverUrl:"ComAround Knowledge URL",subscriptionId:"ComAround Knowledge Subscription ID",userName:"ComAround Knowledge User",password:"ComAround Knowledge Password",frameUrl:"ComAround Knowledge Frame URL",mainUrl:"ComAround Knowledge Main URL",portalId:"ComAround Knowledge Portal ID"};class ul extends p.BaseViewComponent{constructor(e,t,i,n,o,r,a,s){super(),this.formBuilder=e,this.rxUrlUtilsService=t,this.rxNotificationService=i,this.rxAdminSettingsService=n,this.rxCommandFactoryService=o,this.rxCognitiveServiceService=r,this.httpClient=a,this.translateService=s,this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.availablePortals=[],this.isNewConfigurationSetting=!1,this.comaroundComponentSettingsValues=[],this.subscription=new h.Subscription}get comaroundConfigFormGroup(){return this.knowledgeConfigForm.controls.comaroundForm}get portalControl(){return this.knowledgeConfigForm.controls.portal}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.knowledgeConfigForm.dirty}),this.knowledgeConfigForm=this.formBuilder.group({comaroundForm:this.formBuilder.group({mainUrl:this.formBuilder.control(null,this.validateUrl),frameUrl:this.formBuilder.control(null,this.validateUrl),subscriptionId:this.formBuilder.control(null,r.Validators.required),userName:this.formBuilder.control(null,r.Validators.required),password:this.formBuilder.control(null,r.Validators.required),serverUrl:this.formBuilder.control(null,[r.Validators.required,this.validateUrl])}),portal:this.formBuilder.control({value:[],disabled:!0})}),this.busy=this.getComaroundComponentSettings().pipe((0,v.tap)(e=>{var t;const i=Object.values(pl),{values:n}=e;if(this.isNewConfigurationSetting=0===n.length,this.comaroundComponentSettingsValues=n,n.length<i.length){const e=null===(t=n[0])||void 0===t?void 0:t.ownerKeyValue1;i.filter(e=>!n.find(t=>t.settingName===e)).forEach(t=>n.push({componentName:cl,ownerKeyValue1:e,settingName:t,settingValue:null}))}this.comaroundConfigFormGroup.patchValue({serverUrl:this.getValue(pl.serverUrl),subscriptionId:this.getValue(pl.subscriptionId),userName:this.getValue(pl.userName),password:this.getValue(pl.password),frameUrl:this.getValue(pl.frameUrl),mainUrl:this.getValue(pl.mainUrl)})}),(0,v.switchMap)(()=>this.getValue(pl.portalId)?this.getAvailablePortals():(0,h.of)([])),(0,v.tap)(e=>{if(this.availablePortals=e,e.length){const t=this.getValue(pl.portalId);let i=t&&e.find(e=>e.id==t);null!=i||(i=e.find(e=>e.isDefault)),this.portalControl.setValue([i])}})).subscribe(),this.subscription=this.comaroundConfigFormGroup.valueChanges.subscribe(()=>{this.connectionTestStatus=this.comaroundConfigFormGroup.pristine||this.comaroundConfigFormGroup.invalid?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown,this.portalControl.enabled&&this.portalControl.disable()})}getComaroundComponentSettings(){return this.rxAdminSettingsService.getComponentSettings(cl,{"default-bundle-scope":f.RX_APPLICATION.chatbotBundleId})}getAvailablePortals(){return this.httpClient.get("/api/rx/application/knowledge?ComAroundRequest=v1/user/portals").pipe((0,v.catchError)(()=>(0,h.of)([])))}portalOptionFormatter(e){return e.name}getValue(e){const t=(0,m.find)(this.comaroundComponentSettingsValues,{settingName:e});return null==t?void 0:t.settingValue}ngOnDestroy(){this.subscription.unsubscribe()}isSaveButtonDisabled(){return this.knowledgeConfigForm.pristine||this.knowledgeConfigForm.invalid||this.connectionTestStatus!==l.ConnectionTestStatus.Passed}setValue(e,t){const i=(0,m.find)(this.comaroundComponentSettingsValues,{settingName:e});i&&(i.settingValue=t)}saveConfiguration(){var e;const t=Object.assign(Object.assign({},this.comaroundConfigFormGroup.getRawValue()),{portal:this.portalControl.value});let i;this.setValue(pl.serverUrl,t.serverUrl),this.setValue(pl.subscriptionId,t.subscriptionId),this.setValue(pl.userName,t.userName),this.setValue(pl.password,t.password),this.setValue(pl.frameUrl,t.frameUrl),this.setValue(pl.mainUrl,t.mainUrl),this.setValue(pl.portalId,null===(e=t.portal[0])||void 0===e?void 0:e.id),i=this.isNewConfigurationSetting?this.rxAdminSettingsService.createComponentSettings(cl,this.comaroundComponentSettingsValues).pipe((0,v.switchMap)(()=>this.getComaroundComponentSettings()),(0,v.tap)(e=>{this.isNewConfigurationSetting=!1,this.comaroundComponentSettingsValues=e.values})):this.rxAdminSettingsService.updateComponentSettings(`${cl}/${this.comaroundComponentSettingsValues[0].ownerKeyValue1}`,this.comaroundComponentSettingsValues),this.busy=i.subscribe(()=>{this.knowledgeConfigForm.markAsPristine(),this.updateComaroundTokenWithLatestValues(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.comaround-knowledge.configuration-saved.message")),this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.portalControl.disable()})}updateComaroundTokenWithLatestValues(){this.rxCommandFactoryService.forResourceType("com.bmc.dsm.chatbot.command.UpdateComAroundTokenCommand").execute({}).subscribe()}onTestConnection(){const e=this.comaroundConfigFormGroup.getRawValue();this.knowledgeConfigForm.disable(),this.rxCognitiveServiceService.testConnection({resourceType:dl,serverUrl:e.serverUrl,subscriptionId:e.subscriptionId,userName:e.userName,password:e.password,frameUrl:e.frameUrl,mainUrl:e.mainUrl}).pipe((0,v.finalize)(()=>this.comaroundConfigFormGroup.enable({emitEvent:!1})),(0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(e=>{if(this.availablePortals=e||[],e){const t=this.getValue(pl.portalId);let i=t&&e.find(e=>e.id==t);null!=i||(i=e.find(e=>e.isDefault)),this.portalControl.setValue([i]),this.portalControl.enable()}this.connectionTestStatus=l.ConnectionTestStatus.Passed})}validateUrl(){return e=>e.value&&!this.rxUrlUtilsService.isValidUrl(e.value,!0)?{invalidUrl:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.invalid-url.label")}}:null}}ul.\u0275fac=function(e){return new(e||ul)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](g.RxUrlUtilsService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](b.HttpClient),o["\u0275\u0275directiveInject"](u.TranslateService))},ul.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ul,selectors:[["rx-admin-comaround-knowledge"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:34,consts:[[3,"header","busy"],[3,"formGroup"],["formGroupName","comaroundForm"],["rx-id","main-url","formControlName","mainUrl",1,"d-block","form-group",3,"label"],["rx-id","frame-url","formControlName","frameUrl",1,"d-block","form-group",3,"label"],["rx-id","server-url","formControlName","serverUrl",1,"d-block","form-group",3,"label"],["rx-id","subscription-id","formControlName","subscriptionId",1,"d-block","form-group",3,"label"],["rx-id","user-name","formControlName","userName",1,"d-block","form-group",3,"label"],["rx-id","password","formControlName","password","isPassword","true",1,"d-block","form-group",3,"label"],["buttonType","secondary","rx-id","test-button",1,"d-block","form-group",3,"status","testConnection"],["rx-id","portal","formControlName","portal",1,"d-block","form-group",3,"label","options","optionFormatter"],[3,"config",4,"ngIf"],[1,"d-flex","justify-content-start","mt-5"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","click"],[3,"config"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",1),o["\u0275\u0275elementStart"](3,"fieldset",2),o["\u0275\u0275element"](4,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275element"](6,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275element"](8,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-textfield",6),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275element"](12,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275element"](14,"adapt-rx-textfield",8),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementStart"](16,"rx-connection-tester",9),o["\u0275\u0275listener"]("testConnection",function(){return t.onTestConnection()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"hr"),o["\u0275\u0275element"](18,"adapt-rx-select",10),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275template"](20,kn,3,5,"adapt-alert",11),o["\u0275\u0275elementStart"](21,"div",12),o["\u0275\u0275elementStart"](22,"button",13),o["\u0275\u0275listener"]("click",function(){return t.saveConfiguration()}),o["\u0275\u0275text"](23),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate1"]("header"," ",o["\u0275\u0275pipeBind1"](1,16,"com.bmc.arsys.rx.client.admin.comaround-knowledge.header.title"),""),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.knowledgeConfigForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,18,"com.bmc.arsys.rx.client.admin.comaround-knowledge.main-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,20,"com.bmc.arsys.rx.client.admin.comaround-knowledge.frame-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,22,"com.bmc.arsys.rx.client.admin.comaround-knowledge.api-endpoint-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,24,"com.bmc.arsys.rx.client.admin.comaround-knowledge.subscription-id.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,26,"com.bmc.arsys.rx.client.common.user-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](15,28,"com.bmc.arsys.rx.client.common.password.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("status",t.connectionTestStatus),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](19,30,"com.bmc.arsys.rx.client.admin.comaround-knowledge.portal.label")),o["\u0275\u0275property"]("options",t.availablePortals)("optionFormatter",t.portalOptionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.portalControl.disabled),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](24,32,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,r.FormGroupName,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,l.RxConnectionTesterComponent,a.AdaptRxSelectComponent,n.NgIf,a.AdaptButtonComponent,a.AdaptAlertComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{max-width:400px}']});class ml{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-comaround-knowledge",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ul),name:"ComAround knowledge",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}var hl;ml.\u0275fac=function(e){return new(e||ml)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},ml.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ml,declarations:[ul],imports:[a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,a.AdaptAlertModule,a.AdaptAccordionModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,l.RxDirectivesModule,u.TranslateModule]}),ml.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,a.AdaptAlertModule,a.AdaptAccordionModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,l.RxDirectivesModule,u.TranslateModule]]}),function(e){e.DataSource="dataSource",e.WebRequest="webRequest",e.Connector="connector"}(hl||(hl={}));class fl{constructor(e,t,i,n){this.rxNotificationService=e,this.rxRecordInstanceService=t,this.rxRecordInstanceUpdateService=i,this.translateService=n,this.aliasNameId=cs.aliasMapping.fields.aliasName,this.optionFormatter=this.optionFormatter.bind(this)}ngOnInit(){if(this.aliasMapping[cs.aliasMapping.fields.aliasValue]){const e=this.configurations.find(e=>e[cs.dataSource.fields.id]===this.aliasMapping[cs.aliasMapping.fields.aliasValue]);this.connectionConfiguration=[e]}}optionFormatter(e){const t=this.aliasType===hl.Connector?cs.connector.fields.target_name:cs.dataSource.fields.name;return(0,m.get)(e,t,"Select configuration")}onConnectionConfigurationChange(e){this.rxRecordInstanceService.get(cs.aliasMapping.recordDefinitionName,this.aliasMapping[cs.aliasMapping.fields.id]).subscribe(t=>{t.setFieldValue(cs.aliasMapping.fields.aliasValue,e[0][cs.dataSource.fields.id]),this.rxRecordInstanceUpdateService.execute(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.connection-mapping.mapping-saved.message"))})})}}fl.\u0275fac=function(e){return new(e||fl)(o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceUpdateService),o["\u0275\u0275directiveInject"](u.TranslateService))},fl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:fl,selectors:[["rx-connection-mapping"]],inputs:{configurations:"configurations",aliasMapping:"aliasMapping",aliasType:"aliasType"},decls:5,vars:10,consts:[[1,"row"],["rx-id","connection-target","disabled","true",1,"col-md-6","form-group",3,"label","ngModel","ngModelChange"],["rx-id","connection-configuration",1,"d-block","col-md-6","form-group",3,"label","ngModel","options","optionFormatter","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"adapt-rx-textfield",1),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.aliasMapping[t.aliasNameId]=e}),o["\u0275\u0275pipe"](2,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"adapt-rx-select",2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onConnectionConfigurationChange(e)}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](2,6,"com.bmc.arsys.rx.client.admin.connection-mapping.connection-target.label")),o["\u0275\u0275property"]("ngModel",t.aliasMapping[t.aliasNameId]),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,8,"com.bmc.arsys.rx.client.admin.connection-mapping.connection-configuration.label")),o["\u0275\u0275property"]("ngModel",t.connectionConfiguration)("options",t.configurations)("optionFormatter",t.optionFormatter))},directives:[a.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel,a.AdaptRxSelectComponent],pipes:[u.TranslatePipe],encapsulation:2});class gl{}gl.\u0275fac=function(e){return new(e||gl)},gl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:gl,declarations:[fl],imports:[n.CommonModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptRxTextfieldModule,u.TranslateModule],exports:[fl]}),gl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptRxTextfieldModule,u.TranslateModule]]});class vl{constructor(e,t){this.rxRecordInstanceDataPageService=e,this.translateService=t,this.mappingSelectOptions=[]}ngOnInit(){this.busy=this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,queryExpression:`'${cs.aliasMapping.fields.aliasType}'!="email"`,propertySelection:(0,m.values)(cs.aliasMapping.fields).join()}).subscribe(e=>{this.mappingSelectOptions=(0,m.uniqBy)(e.data,cs.aliasMapping.fields.applicationId)})}optionFormatter(e){return e[cs.aliasMapping.fields.applicationName]}getRecordInstanceDataPage(e){return this.rxRecordInstanceDataPageService.post({params:e})}onApplicationChange(e){const t=(0,m.get)(e,`0.${cs.aliasMapping.fields.applicationId}`);t&&(0,h.forkJoin)({configurationList:this.getRecordInstanceDataPage({recorddefinition:cs.connector.recordDefinitionName,propertySelection:(0,m.values)(cs.connector.fields).join()}),applicationMappingList:this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,propertySelection:(0,m.values)(cs.aliasMapping.fields).join(),queryExpression:`(('${cs.aliasMapping.fields.applicationId}'="${t}" AND '${cs.aliasMapping.fields.aliasType}'="${cs.aliasTypes.connector}"))`})}).subscribe(e=>{this.configurationList=e.configurationList.data,this.mappingList=e.applicationMappingList.data})}}vl.\u0275fac=function(e){return new(e||vl)(o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](u.TranslateService))},vl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:vl,selectors:[["rx-connector-mapping"]],decls:6,vars:11,consts:[[3,"header","busy"],[1,"row"],["rx-id","application",1,"col-md-6","form-group",3,"label","ngModel","options","optionFormatter","ngModelChange"],["aliasType","connector",3,"configurations","aliasMapping",4,"ngFor","ngForOf"],["aliasType","connector",3,"configurations","aliasMapping"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"adapt-rx-select",2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onApplicationChange(e)}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,jn,1,2,"rx-connection-mapping",3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.admin.connection-mapping.connector-mapping.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,9,"com.bmc.arsys.rx.client.admin.connection-mapping.connector-mapping.application.label")),o["\u0275\u0275property"]("ngModel",t.selectedMapping)("options",t.mappingSelectOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.mappingList))},directives:[s.AdminSettingsComponent,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,n.NgForOf,fl],pipes:[u.TranslatePipe],encapsulation:2});class xl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-connector-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(vl),name:"Connector mapping",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}xl.\u0275fac=function(e){return new(e||xl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},xl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:xl,declarations:[vl],imports:[s.AdminSettingsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,n.CommonModule,r.FormsModule,gl,u.TranslateModule]}),xl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,n.CommonModule,r.FormsModule,gl,u.TranslateModule]]});class yl{constructor(e){this.rxRecordInstanceDataPageService=e,this.applicationSelectOptions=[]}ngOnInit(){this.busy=this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,queryExpression:`'${cs.aliasMapping.fields.aliasType}'!="email"`,propertySelection:(0,m.values)(cs.aliasMapping.fields).join()}).subscribe(e=>{this.applicationSelectOptions=(0,m.uniqBy)(e.data,cs.aliasMapping.fields.applicationId)})}optionFormatter(e){return e[cs.aliasMapping.fields.applicationName]}getRecordInstanceDataPage(e){return this.rxRecordInstanceDataPageService.post({params:e})}onApplicationChange(e){const t=(0,m.get)(e,`0.${cs.aliasMapping.fields.applicationId}`);t&&(0,h.forkJoin)({configurationList:this.getRecordInstanceDataPage({recorddefinition:cs.dataSource.recordDefinitionName,propertySelection:(0,m.values)(cs.dataSource.fields).join()}),applicationMappingList:this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,propertySelection:(0,m.values)(cs.aliasMapping.fields).join(),queryExpression:`(('${cs.aliasMapping.fields.applicationId}'="${t}" AND '${cs.aliasMapping.fields.aliasType}'="${cs.aliasTypes.dataSource}"))`})}).subscribe(e=>{this.configurationList=e.configurationList.data,this.applicationMappingList=e.applicationMappingList.data})}}yl.\u0275fac=function(e){return new(e||yl)(o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService))},yl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:yl,selectors:[["rx-admin-data-source-mapping"]],decls:4,vars:5,consts:[["header","Data source mapping",3,"busy"],[1,"row"],["rx-id","data-source-application","label","Application",1,"col-md-6","form-group",3,"ngModel","options","optionFormatter","ngModelChange"],["aliasType","dataSource",3,"configurations","aliasMapping",4,"ngFor","ngForOf"],["aliasType","dataSource",3,"configurations","aliasMapping"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"adapt-rx-select",2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onApplicationChange(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](3,Pn,1,2,"rx-connection-mapping",3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.selectedApplication)("options",t.applicationSelectOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",t.applicationMappingList))},directives:[s.AdminSettingsComponent,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,n.NgForOf,fl],encapsulation:2});class bl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-data-source-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(yl),name:"Data source mapping",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}bl.\u0275fac=function(e){return new(e||bl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},bl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:bl,declarations:[yl],imports:[n.CommonModule,s.AdminSettingsModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptRxTextfieldModule,gl]}),bl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptRxTextfieldModule,gl]]});class Cl{constructor(e,t){this.rxGlobalCacheService=e,this.rxRecordInstanceDataPageService=t,this.mappingSelectOptions=[]}ngOnInit(){this.busy=(0,h.forkJoin)([this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,queryExpression:`'${cs.aliasMapping.fields.aliasType}'!="email"`,propertySelection:(0,m.values)(cs.aliasMapping.fields).join()}),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([e,t])=>{this.mappingSelectOptions=(0,m.uniqBy)(e.data,cs.aliasMapping.fields.applicationId).map(e=>Object.assign(Object.assign({},e),{friendlyName:(0,m.find)(t,{id:e[cs.aliasMapping.fields.applicationId]}).friendlyName})).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName))})}optionFormatter(e){return e.friendlyName}getRecordInstanceDataPage(e){return this.rxRecordInstanceDataPageService.post({params:e})}onApplicationChange(e){const t=(0,m.get)(e,`0.${cs.aliasMapping.fields.applicationId}`);t&&(0,h.forkJoin)({configurationList:this.getRecordInstanceDataPage({recorddefinition:cs.webRequest.recordDefinitionName,propertySelection:(0,m.values)(cs.webRequest.fields).join()}),applicationMappingList:this.getRecordInstanceDataPage({recorddefinition:cs.aliasMapping.recordDefinitionName,propertySelection:(0,m.values)(cs.aliasMapping.fields).join(),queryExpression:`(('${cs.aliasMapping.fields.applicationId}'="${t}" AND '${cs.aliasMapping.fields.aliasType}'="${cs.aliasTypes.webRequest}"))`})}).subscribe(e=>{this.configurationList=e.configurationList.data,this.mappingList=e.applicationMappingList.data})}}Cl.\u0275fac=function(e){return new(e||Cl)(o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService))},Cl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Cl,selectors:[["rx-web-api-mapping"]],decls:6,vars:11,consts:[[3,"header","busy"],[1,"row"],["rx-id","application",1,"col-md-6","form-group",3,"label","ngModel","options","optionFormatter","ngModelChange"],["aliasType","webRequest",3,"configurations","aliasMapping",4,"ngFor","ngForOf"],["aliasType","webRequest",3,"configurations","aliasMapping"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"adapt-rx-select",2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onApplicationChange(e)}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,Nn,1,2,"rx-connection-mapping",3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.admin.web-api-mapping.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,9,"com.bmc.arsys.rx.client.common.application.label")),o["\u0275\u0275property"]("ngModel",t.selectedMapping)("options",t.mappingSelectOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.mappingList))},directives:[s.AdminSettingsComponent,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,n.NgForOf,fl],pipes:[u.TranslatePipe],encapsulation:2});class Sl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-web-api-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Cl),name:"Web API mapping",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Sl.\u0275fac=function(e){return new(e||Sl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Sl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Sl,declarations:[Cl],imports:[s.AdminSettingsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,n.CommonModule,r.FormsModule,gl,u.TranslateModule]}),Sl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,n.CommonModule,r.FormsModule,gl,u.TranslateModule]]});const wl="Connector Configurations",Il={targetName:56110,connectorId:56111,connectorName:56112,connectorConfigId:56113,connectorConfigName:56114,connectorProfileId:56115,connectorProfileName:56116};class _l extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.integration.ConnectorConfigDataPageQuery"),this.injector=e}}_l.\u0275fac=function(e){return new(e||_l)(o["\u0275\u0275inject"](o.Injector))},_l.\u0275prov=o["\u0275\u0275defineInjectable"]({token:_l,factory:_l.\u0275fac,providedIn:"root"});class Dl extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.integration.ConnectorDataPageQuery"),this.injector=e}}Dl.\u0275fac=function(e){return new(e||Dl)(o["\u0275\u0275inject"](o.Injector))},Dl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Dl,factory:Dl.\u0275fac,providedIn:"root"});class Rl{constructor(e,t,i){this.httpClient=e,this.rxConnectorsDataPageService=t,this.rxConnectorConfigurationDataPageService=i,this.connectorConfigs={},this.connectorProfiles={}}getConnectors(){return this.rxConnectorsDataPageService.get().pipe((0,v.map)(e=>e.data.map(e=>({id:e.id,name:e.name}))))}getConnectorConfigurations(e){return this.connectorConfigs[e]||(this.connectorConfigs[e]=this.rxConnectorConfigurationDataPageService.get({params:{connectorId:e}}).pipe((0,v.map)(e=>e.data.map(e=>({id:e.id,name:e.name,profiles:e.profiles}))),(0,v.shareReplay)(1))),this.connectorConfigs[e]}getConnectorProfiles(e,t){return this.connectorProfiles[t]||(this.connectorProfiles[t]=this.getConnectorConfigurations(e).pipe((0,v.map)(e=>(0,m.find)(e,{id:t}).profiles))),this.connectorProfiles[t]}}Rl.\u0275fac=function(e){return new(e||Rl)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](Dl),o["\u0275\u0275inject"](_l))},Rl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Rl,factory:Rl.\u0275fac,providedIn:"root"});class Al extends l.RxModalClass{constructor(e,t,i,n,o,r){super(e,r),this.dockedPanelContext=e,this.formBuilder=t,this.rxRecordInstanceService=i,this.rxNotificationService=n,this.rxConnectorConfigurationService=o,this.injector=r,this.connectorProfiles=[],this.connectorList=[],this.connectorConfigurations=[]}ngOnInit(){super.ngOnInit(),this.isNewConfiguration=this.dockedPanelContext.getData().isNewConfiguration,this.connectorList=this.dockedPanelContext.getData().connectorList,this.connectorConfigurationForm=this.formBuilder.group({configurationName:"",connector:[{id:"",name:""}],connectorConfiguration:[{id:"",name:""}],connectorProfile:[{id:"",name:""}]}),this.isNewConfiguration||(this.currentRecordInstance=this.rxRecordInstanceService.get(wl,this.dockedPanelContext.getData().recordId),this.currentRecordInstance.subscribe(e=>{this.connectorConfigurationForm.get("configurationName").setValue(e.fieldInstances[Il.targetName].value),this.connectorConfigurationForm.get("connector").setValue([{id:e.fieldInstances[Il.connectorId].value,name:e.fieldInstances[Il.connectorName].value}]),this.connectorConfigurationForm.get("connectorConfiguration").setValue([{id:e.fieldInstances[Il.connectorConfigId].value,name:e.fieldInstances[Il.connectorConfigName].value}]),this.connectorConfigurationForm.get("connectorProfile").setValue(e.fieldInstances[Il.connectorProfileId].value?[{id:e.fieldInstances[Il.connectorProfileId].value,name:e.fieldInstances[Il.connectorProfileName].value}]:[]),this.loadConnectorConfigurations(e.fieldInstances[Il.connectorId].value),this.loadConnectorProfiles(e.fieldInstances[Il.connectorConfigId].value)}))}isDirty(){return this.connectorConfigurationForm.dirty}loadConnectorConfigurations(e){this.isSelectionChangeEvent(e)&&this.resetFields(),this.loadingConfigs=!0;const t=this.isSelectionChangeEvent(e)?e.options[0].id:e;this.rxConnectorConfigurationService.getConnectorConfigurations(t).subscribe(e=>{this.connectorConfigurations=e,this.loadingConfigs=!1})}loadConnectorProfiles(e){this.isSelectionChangeEvent(e)&&this.connectorConfigurationForm.get("connectorProfile").setValue([]),this.loadingProfiles=!0;const t=this.isSelectionChangeEvent(e)?e.options[0].id:e,i=this.connectorConfigurationForm.get("connector").value[0].id;this.rxConnectorConfigurationService.getConnectorProfiles(i,t).subscribe(e=>{this.connectorProfiles=e,this.loadingProfiles=!1})}saveConnectorConfiguration(){this.isNewConfiguration&&(this.currentRecordInstance=this.rxRecordInstanceService.getNew(wl)),this.currentRecordInstance.pipe((0,v.map)(e=>(e.fieldInstances[Il.connectorId].value=this.connectorConfigurationForm.value.connector[0].id,e.fieldInstances[Il.connectorName].value=this.connectorConfigurationForm.value.connector[0].name,e.fieldInstances[Il.connectorConfigId].value=this.connectorConfigurationForm.value.connectorConfiguration[0].id,e.fieldInstances[Il.connectorConfigName].value=this.connectorConfigurationForm.value.connectorConfiguration[0].name,this.connectorConfigurationForm.value.connectorProfile.length?(e.fieldInstances[Il.connectorProfileId].value=this.connectorConfigurationForm.value.connectorProfile[0].id,e.fieldInstances[Il.connectorProfileName].value=this.connectorConfigurationForm.value.connectorProfile[0].name):(e.fieldInstances[Il.connectorProfileId].value=null,e.fieldInstances[Il.connectorProfileName].value=null),e.fieldInstances[x.RX_RECORD_DEFINITION.coreFieldIds.description].value=this.connectorConfigurationForm.value.configurationName,e.fieldInstances[Il.targetName].value=this.connectorConfigurationForm.value.configurationName,e)),(0,v.switchMap)(e=>this.isNewConfiguration?this.rxRecordInstanceService.create(e):this.rxRecordInstanceService.save(e))).subscribe(()=>{this.rxNotificationService.addSuccessMessage("Configuration saved successfully."),this.dockedPanelContext.close(null)})}optionFormatter(e){return e.name}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}isSelectionChangeEvent(e){return!(0,m.isUndefined)(e.options)}resetFields(){this.connectorProfiles=[],this.connectorConfigurations=[],this.connectorConfigurationForm.get("connectorConfiguration").setValue([]),this.connectorConfigurationForm.get("connectorProfile").setValue([]),this.connectorConfigurationForm.markAsPristine()}}Al.\u0275fac=function(e){return new(e||Al)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](Rl),o["\u0275\u0275directiveInject"](o.Injector))},Al.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Al,selectors:[["rx-connector-configuration-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:30,consts:[[1,"dp-body"],[3,"formGroup"],["rx-id","configuration-name","formControlName","configurationName","required","true",1,"form-group","d-block",3,"label","readonly"],["rx-id","connector","formControlName","connector","enableFilter","true","required","true",1,"form-group","d-block",3,"label","options","optionFormatter","loadingState","onSelectionChange"],["rx-id","connector-configuration","formControlName","connectorConfiguration","enableFilter","true","required","true",1,"form-group","d-block",3,"label","options","optionFormatter","loadingState","onSelectionChange"],["rx-id","connector-profile","formControlName","connectorProfile",1,"form-group","d-block",3,"label","options","optionFormatter","loadingState"],[1,"dp-footer"],["type","button","adapt-button","","size","small","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["type","button","size","small","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"adapt-rx-select",3),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.loadConnectorConfigurations(e)}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"adapt-rx-select",4),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.loadConnectorProfiles(e)}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-select",5),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",6),o["\u0275\u0275elementStart"](11,"button",7),o["\u0275\u0275listener"]("click",function(){return t.saveConnectorConfiguration()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",8),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.connectorConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,18,"com.bmc.arsys.rx.client.common.name.label")),o["\u0275\u0275property"]("readonly",!t.isNewConfiguration),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,20,"com.bmc.arsys.rx.client.admin.connector-configuration.connector-type.label")),o["\u0275\u0275property"]("options",t.connectorList)("optionFormatter",t.optionFormatter)("loadingState",t.loadingConnectors),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,22,"com.bmc.arsys.rx.client.admin.connector-configuration.configuration.label")),o["\u0275\u0275property"]("options",t.connectorConfigurations)("optionFormatter",t.optionFormatter)("loadingState",t.loadingConfigs),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,24,"com.bmc.arsys.rx.client.admin.connector-configuration.profile.label")),o["\u0275\u0275property"]("options",t.connectorProfiles)("optionFormatter",t.optionFormatter)("loadingState",t.loadingProfiles),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.connectorConfigurationForm.pristine||t.connectorConfigurationForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,26,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,28,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptRxSelectComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class Tl{constructor(e,t,i){this.formBuilder=e,this.rxModalService=t,this.rxConnectorConfigurationService=i,this.connectorList=[]}ngOnInit(){this.busySubscription=this.rxConnectorConfigurationService.getConnectors().subscribe(e=>{this.connectorList=e},e=>{this.errorText=(0,m.get)(e,"error[0].appendedText","Unknown error.")}),this.gridConfig=(0,h.of)({actionButtons:[{label:"Edit",style:"tertiary",icon:"pencil",actions:[{name:()=>{this.openConnectionConfiguration(this.grid.api.getFirstSelectedRow())}}]}],recordDefinitionName:wl,enableRowSelection:d.RowSelectionMode.Single,getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:this.getColumns(),styles:"flex-fill"})}newConnectionConfiguration(){this.openConnectorConfigurationEditor(!0)}openConnectionConfiguration(e){this.openConnectorConfigurationEditor(!1,e[x.RX_RECORD_DEFINITION.coreFieldIds.id])}getRecordDefinition(){return{fieldDefinitions:[{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Il.targetName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Il.connectorName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Il.connectorConfigName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Il.connectorProfileName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]}}getColumns(){return[{index:0,title:"Name",fieldId:String(Il.targetName),clickable:!0,actions:[{name:(e,t)=>this.openConnectionConfiguration(t)}]},{index:1,title:"Connector type",fieldId:String(Il.connectorName)},{index:2,title:"Configuration",fieldId:String(Il.connectorConfigName)},{index:3,title:"Profile",fieldId:String(Il.connectorProfileName)},{index:4,title:"ID",fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),visible:!1}]}openConnectorConfigurationEditor(e,t){return this.rxModalService.openDockedPanel({title:"Connector configuration",content:Al,data:{connectorList:this.connectorList,isNewConfiguration:e,recordId:t}}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}}Tl.\u0275fac=function(e){return new(e||Tl)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Rl))},Tl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Tl,selectors:[["rx-admin-connector-configuration"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ct,5),o["\u0275\u0275viewQuery"](Vn,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.connectorConfigurationTemplate=e.first)}},decls:4,vars:6,consts:[[3,"header","busy"],[3,"config",4,"ngIf"],[4,"ngIf"],[3,"config"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["grid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,Bn,2,6,"adapt-alert",1),o["\u0275\u0275template"](3,$n,6,4,"ng-container",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,4,"com.bmc.arsys.rx.client.admin.connector-configuration.header.title")),o["\u0275\u0275property"]("busy",t.busySubscription),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.errorText),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.errorText))},directives:[s.AdminSettingsComponent,n.NgIf,a.AdaptAlertComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class Fl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-connector-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Tl),name:"Connector configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Fl.\u0275fac=function(e){return new(e||Fl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Fl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Fl,declarations:[Tl,Al],imports:[n.CommonModule,a.AdaptButtonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,a.AdaptRxSelectModule,a.AdaptAlertModule,u.TranslateModule]}),Fl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,a.AdaptButtonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,a.AdaptRxSelectModule,a.AdaptAlertModule,u.TranslateModule]]});class El extends s.ValueAccessor{constructor(e,t){super(),this.translateService=e,this.renderer=t,this.defaultText=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label")}setDropdownWidth(){const e=this.renderer.selectRootElement(this.dropdownButton.nativeElement,!0);this.dropdownWidth=e.clientWidth+2}selectProvider(e){this.dropdown.close(),this.value=e}}El.\u0275fac=function(e){return new(e||El)(o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Renderer2))},El.\u0275cmp=o["\u0275\u0275defineComponent"]({type:El,selectors:[["rx-custom-data-source-provider-picker"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Ze,7),o["\u0275\u0275viewQuery"](Gn,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dropdownButton=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dropdown=e.first)}},inputs:{options:"options"},features:[o["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:El,multi:!0}]),o["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:9,consts:[[1,"d-flex"],[3,"label","showRequiredLabel",4,"ngIf"],["adaptDropdown","",1,"dropdown",3,"autoClose","autoFocusFirst"],["providerPicker","adaptDropdown"],["rx-id","toggle-button","adaptDropdownToggle","","type","button",1,"btn","btn-secondary",3,"click"],["dropdownButton",""],[1,"rx-selected-item","rx-ellipsis"],["adaptDropdownMenu","",1,"dropdown-menu","p-0"],["class","providers",4,"ngIf"],[3,"label","showRequiredLabel"],[1,"providers"],["class","provider rx-ellipsis",3,"click",4,"ngFor","ngForOf"],[1,"provider","rx-ellipsis",3,"click"],["rx-id","expand-button",1,"expand-arrow","d-icon-angle_right"],[4,"ngIf"],["class","dropdown-item rx-ellipsis","type","button",3,"active","click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item","rx-ellipsis",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275template"](1,zn,2,4,"adapt-rx-control-label",1),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](2,"div",2,3),o["\u0275\u0275elementStart"](4,"button",4,5),o["\u0275\u0275listener"]("click",function(){return t.setDropdownWidth()}),o["\u0275\u0275elementStart"](6,"span",6),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"rxDefinitionNamePipe"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",7),o["\u0275\u0275template"](10,Hn,2,1,"ul",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.options.label),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("autoClose","outside")("autoFocusFirst",!1),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,7,t.value)||t.defaultText," "),o["\u0275\u0275advance"](2),o["\u0275\u0275styleProp"]("width",t.dropdownWidth,"px"),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.options.providersTree.length))},directives:[n.NgIf,a.AdaptDropdownDirective,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective,a.AdaptRxControlLabelComponent,n.NgForOf],pipes:[f.RxDefinitionNamePipe,u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.expand-arrow[_ngcontent-%COMP%]{padding:5px;transition:.2s}.expand-arrow.open[_ngcontent-%COMP%]{transform:rotate(90deg)}.providers[_ngcontent-%COMP%]{overflow-y:auto;margin:0;list-style:none;padding:5px 0;width:100%;height:275px}.provider[_ngcontent-%COMP%]{width:100%;padding:0 5px;line-height:30px;cursor:pointer}span[rx-id=expand-button][_ngcontent-%COMP%]{display:inline-flex;width:15px}.rx-selected-item[_ngcontent-%COMP%]{flex-grow:1}.dropdown-menu[_ngcontent-%COMP%]{height:330px}.dropdown-toggle[_ngcontent-%COMP%]{width:100%;display:flex;text-align:left}.dropdown-item[_ngcontent-%COMP%]{padding:0 15px 0 30px}']});const Ml={arSystem:{value:"com.bmc.arsys.rx.services.datasource.domain.ARSystemDataSource",name:"com.bmc.arsys.rx.client.admin.data-source-connections.ar-system.label"},custom:{value:"com.bmc.arsys.rx.services.datasource.domain.CustomDataSource",name:"com.bmc.arsys.rx.client.admin.data-source-connections.custom.label"},webApi:{value:"com.bmc.arsys.rx.services.datasource.domain.WebApiDataSource",name:"com.bmc.arsys.rx.client.admin.data-source-connections.web-api.label"}},Ol=[{name:"com.bmc.arsys.rx.client.admin.data-source-connections.rsso.label",value:"rsso"},{name:"com.bmc.arsys.rx.client.admin.data-source-connections.ras.label",value:"ras"}],kl={recordDefinitionName:"Data Source",dataPageQueryType:"com.bmc.arsys.rx.application.datasource.datapage.DataSourceDataPageQuery",dataSourceConnectionUrl:"/api/rx/application/datasource/configuration",resourceTypes:Ml,authTypes:Ol,portMinValue:0,portMaxValue:65535,hostNameMaxLength:254,pingConfigurationCommand:"com.bmc.arsys.rx.application.datasource.command.ValidateDataSourceCommand",initialWizardContext:{dataSourceName:"",resourceType:Ml.arSystem,hostName:"",portNumber:null,authType:(0,m.head)(Ol).name,rasPassword:"",enforceAuthorization:!1,webApiDataSourceGuid:"",isEditMode:!1,isGeneralFormPristine:!0}};class jl{constructor(e,t){this.rxWizardModalComponent=e,this.translateService=t,this.dataSourceConfigTypes=Object.values(kl.resourceTypes).map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.destroyed$=new h.ReplaySubject(1),this.optionFormatter=e=>(0,m.get)(e,"name",this.defaultSelection)}ngOnInit(){this.rxWizardModalComponent.context$.pipe((0,v.take)(1)).subscribe(e=>{this.generalForm=new r.FormGroup({dataSourceName:new r.FormControl(e.dataSourceName,[r.Validators.required]),resourceType:new r.FormControl([e.resourceType],[r.Validators.required])}),this.generalForm.invalid&&this.rxWizardModalComponent.api.disableNextButton()}),this.generalForm.valueChanges.pipe((0,v.withLatestFrom)(this.rxWizardModalComponent.context$),(0,v.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.rxWizardModalComponent.api.updateContext(Object.assign(Object.assign({},e),{resourceType:(0,m.head)(e.resourceType),isGeneralFormPristine:this.generalForm.pristine})),this.generalForm.valid?this.rxWizardModalComponent.api.enableNextButton():this.rxWizardModalComponent.api.disableNextButton()})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}jl.\u0275fac=function(e){return new(e||jl)(o["\u0275\u0275directiveInject"](s.RxWizardModalComponent),o["\u0275\u0275directiveInject"](u.TranslateService))},jl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:jl,selectors:[["rx-data-source-connection-general"]],decls:9,vars:9,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6"],["name","dataSourceName","formControlName","dataSourceName","rx-id","name-field",1,"d-block","form-group",3,"label"],["name","resourceType","rx-id","type-field","formControlName","resourceType",1,"d-block","form-group",3,"label","options","optionFormatter"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",1),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275element"](7,"adapt-rx-select",4),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.generalForm),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.name.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,7,"com.bmc.arsys.rx.client.common.item-type.label")),o["\u0275\u0275property"]("options",t.dataSourceConfigTypes)("optionFormatter",t.optionFormatter))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxSelectComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textfield[_ngcontent-%COMP%], adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}']});class Pl extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.query.CustomDataSourceProviderDataPageQuery"),this.injector=e}}Pl.\u0275fac=function(e){return new(e||Pl)(o["\u0275\u0275inject"](o.Injector))},Pl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Pl,factory:Pl.\u0275fac,providedIn:"root"});class Nl{constructor(e,t,i,n,o,r,a){this.rxCognitiveServiceService=e,this.rxRecordInstanceDataPageService=t,this.rxCustomDataSourceProviderDataPageService=i,this.rxDefinitionNameService=n,this.rxWizardModalComponent=o,this.translateService=r,this.rxGlobalCacheService=a,this.isRasPasswordDisabled=!0,this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.webApis=[],this.customDataSourceProvidersPickerOptions={label:"com.bmc.arsys.rx.client.admin.data-source-connection-properties.custom-data-source-provider.label",required:!0,providersTree:[]},this.dataSourceAuthenticationTypes=kl.authTypes.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.isResourceTypeArSystem$=this.rxWizardModalComponent.context$.pipe((0,v.map)(e=>e.resourceType.value===kl.resourceTypes.arSystem.value),(0,v.shareReplay)(1)),this.isResourceTypeCustom$=this.rxWizardModalComponent.context$.pipe((0,v.map)(e=>e.resourceType.value===kl.resourceTypes.custom.value),(0,v.shareReplay)(1)),this.isResourceTypeWebApi$=this.rxWizardModalComponent.context$.pipe((0,v.map)(e=>e.resourceType.value===kl.resourceTypes.webApi.value),(0,v.shareReplay)(1)),this.destroyed$=new h.ReplaySubject(1),this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.isDataLoaded={},this.optionFormatter=e=>(0,m.get)(e,"name",this.defaultSelection)}ngOnInit(){this.rxWizardModalComponent.context$.pipe((0,v.take)(1)).subscribe(e=>{this.connectionPropertiesForm=new r.FormGroup({hostName:new r.FormControl(e.hostName,[r.Validators.required]),port:new r.FormControl(e.port,[r.Validators.required]),authType:new r.FormControl(e.authType,[r.Validators.required]),rasPassword:new r.FormControl(e.rasPassword),enforceAuthorization:new r.FormControl(e.enforceAuthorization),selectedWebApi:new r.FormControl(e.webApiDataSourceGuid,[r.Validators.required]),providerId:new r.FormControl(e.providerId,[r.Validators.required])})}),this.rxWizardModalComponent.context$.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>{const t=["hostName","port","authType","rasPassword","enforceAuthorization"];e.resourceType.value===kl.resourceTypes.arSystem.value?(t.forEach(e=>this.connectionPropertiesForm.get(e).enable({emitEvent:!1})),this.connectionPropertiesForm.get("selectedWebApi").disable({emitEvent:!1}),this.connectionPropertiesForm.get("providerId").disable({emitEvent:!1})):e.resourceType.value===kl.resourceTypes.webApi.value?(t.forEach(e=>this.connectionPropertiesForm.get(e).disable({emitEvent:!1})),this.connectionPropertiesForm.get("selectedWebApi").enable({emitEvent:!1}),this.connectionPropertiesForm.get("providerId").disable({emitEvent:!1})):e.resourceType.value===kl.resourceTypes.custom.value&&(t.forEach(e=>this.connectionPropertiesForm.get(e).disable({emitEvent:!1})),this.connectionPropertiesForm.get("selectedWebApi").disable({emitEvent:!1}),this.connectionPropertiesForm.get("providerId").enable({emitEvent:!1})),this.loadCustomDataSourceProviders(e),this.loadWebApis(e),this.connectionPropertiesForm.valid&&!e.isGeneralFormPristine?this.rxWizardModalComponent.api.enableFinishButton():this.rxWizardModalComponent.api.disableFinishButton()}),this.connectionPropertiesForm.valueChanges.pipe((0,v.withLatestFrom)(this.isResourceTypeWebApi$),(0,v.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.rxWizardModalComponent.api.updateContext((0,m.omit)(e,["selectedWebApi"])),t||(this.connectionTestStatus=this.connectionPropertiesForm.pristine||this.connectionPropertiesForm.invalid?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown)}),this.connectionPropertiesForm.valueChanges.pipe((0,v.withLatestFrom)(this.rxWizardModalComponent.context$),(0,v.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.connectionPropertiesForm.invalid||this.connectionPropertiesForm.pristine&&t.isGeneralFormPristine?this.rxWizardModalComponent.api.disableFinishButton():this.rxWizardModalComponent.api.enableFinishButton()})}setAuthType(e){const t={authType:e};this.isRasPasswordDisabled=e!==kl.authTypes[1].name,this.isRasPasswordDisabled&&(t.rasPassword=null),this.rxWizardModalComponent.api.updateContext(t)}onTestConnection(){this.rxWizardModalComponent.context$.pipe((0,v.switchMap)(e=>this.rxCognitiveServiceService.testConnection({resourceType:kl.pingConfigurationCommand,dataSource:{resourceType:kl.resourceTypes.arSystem.value,authType:e.authType,hostName:e.hostName,port:e.port,rasPassword:e.rasPassword,enforceAuthorization:e.enforceAuthorization}})),(0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(()=>{this.connectionTestStatus=l.ConnectionTestStatus.Passed})}loadCustomDataSourceProviders(e){if(e.resourceType.value===kl.resourceTypes.custom.value&&!this.isDataLoaded[kl.resourceTypes.custom.value]){const t=this.translateService.instant("com.bmc.arsys.rx.client.common.global-items.label");this.isDataLoaded[kl.resourceTypes.custom.value]=!0,this.rxCustomDataSourceProviderDataPageService.get().pipe((0,v.switchMap)(e=>(0,h.forkJoin)(e.data.map(e=>{const i=this.rxDefinitionNameService.getBundleId(e.name)||t;return this.rxGlobalCacheService.getBundleFriendlyName(i,i).pipe((0,v.map)(t=>({bundleFriendlyName:t,value:e.name})))})))).subscribe(i=>{var n;const o=(0,m.groupBy)(i,"bundleFriendlyName");this.customDataSourceProvidersPickerOptions.providersTree=Object.keys(o).map(e=>({label:e,isExpanded:!0,providers:o[e].map(e=>e.value).sort()})).sort((e,i)=>e.label===t?-1:e.label>i.label?1:-1),this.connectionPropertiesForm.get("providerId").setValue(null===(n=(0,m.find)(i,t=>t.value===e.providerId))||void 0===n?void 0:n.value,{emitEvent:!1})})}}loadWebApis(e){if(e.resourceType.value===kl.resourceTypes.webApi.value&&!this.isDataLoaded[kl.resourceTypes.webApi.value]){const t={recorddefinition:"WebAPI Connection"};this.isDataLoaded[kl.resourceTypes.webApi.value]=!0,this.rxRecordInstanceDataPageService.post({params:t}).subscribe(t=>{this.webApis=t.data.map(e=>({name:e[x.RX_RECORD_DEFINITION.coreFieldIds.description],id:e[x.RX_RECORD_DEFINITION.coreFieldIds.id]})),this.connectionPropertiesForm.get("selectedWebApi").setValue((0,m.filter)(this.webApis,["id",e.webApiDataSourceGuid]),{emitEvent:!1})})}}onWebApiChange(e){this.rxWizardModalComponent.api.updateContext({webApiDataSourceGuid:e.options[0].id})}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}Nl.\u0275fac=function(e){return new(e||Nl)(o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](Pl),o["\u0275\u0275directiveInject"](f.RxDefinitionNameService),o["\u0275\u0275directiveInject"](s.RxWizardModalComponent),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService))},Nl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Nl,selectors:[["rx-data-source-connection-properties"]],decls:7,vars:10,consts:[[3,"formGroup"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],["name","hostName","formControlName","hostName","rx-id","host-name-field","maxlength","254",1,"d-block","form-group",3,"label"],["name","port","adaptRange","","adaptIntegerNumber","","rx-id","port-field",1,"d-block","form-group",3,"label","formControl","min","max"],["name","authType","rx-id","authentication-field","formControlName","authType",3,"label","ngModelChange"],[3,"value","label",4,"ngFor","ngForOf"],["formControlName","rasPassword","name","password","rx-id","password-field",1,"d-block","form-group",3,"isPassword","disabled"],["name","permission","rx-id","permission-field","formControlName","enforceAuthorization",3,"label","tooltip"],[1,"col-md-8","mt-2"],["buttonType","secondary","rx-id","test-connection-button",3,"status","testConnection"],[3,"value","label"],["name","providerId","formControlName","providerId","rx-id","custom-data-source-provider-field",1,"col-md-6",3,"options"],["name","webApiConnection","rx-id","web-api-connection-field","formControlName","selectedWebApi",1,"d-block","form-group",3,"label","options","optionFormatter","onSelectionChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0),o["\u0275\u0275template"](1,Qn,24,24,"ng-container",1),o["\u0275\u0275pipe"](2,"async"),o["\u0275\u0275template"](3,Kn,3,1,"ng-container",1),o["\u0275\u0275pipe"](4,"async"),o["\u0275\u0275template"](5,Jn,5,5,"ng-container",1),o["\u0275\u0275pipe"](6,"async"),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("formGroup",t.connectionPropertiesForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](2,4,t.isResourceTypeArSystem$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](4,6,t.isResourceTypeCustom$)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](6,8,t.isResourceTypeWebApi$)))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,n.NgIf,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.MaxLengthValidator,a.AdaptRxCounterComponent,a.AdaptRangeValidatorDirective,a.AdaptIntegerNumberValidatorDirective,r.FormControlDirective,a.AdaptRxRadiobuttonGroupComponent,n.NgForOf,a.AdaptRxCheckboxComponent,l.RxConnectionTesterComponent,a.AdaptRxRadiobuttonComponent,El,a.AdaptRxSelectComponent],pipes:[n.AsyncPipe,u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textfield[_ngcontent-%COMP%], adapt-rx-select[_ngcontent-%COMP%], adapt-rx-counter[_ngcontent-%COMP%]{max-width:400px}']});class Vl{constructor(e){this.httpClient=e}getDataSourceConnection(e){return this.httpClient.get(`${kl.dataSourceConnectionUrl}/${e}`)}createDataSourceConnection(e){return this.httpClient.post(kl.dataSourceConnectionUrl,e)}updateDataSourceConnection(e,t){return this.httpClient.put(`${kl.dataSourceConnectionUrl}/${e}`,t)}deleteDataSourceConnections(e){return(0,h.forkJoin)((0,m.map)(e,e=>this.httpClient.delete(`${kl.dataSourceConnectionUrl}/${e}`)))}}Vl.\u0275fac=function(e){return new(e||Vl)(o["\u0275\u0275inject"](b.HttpClient))},Vl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Vl,factory:Vl.\u0275fac,providedIn:"root"});class Ll{constructor(e,t,i,n,o,r,a,s){this.rxModalService=e,this.rxDataPageService=t,this.rxDataSourceConnectionsService=i,this.rxNotificationService=n,this.adaptModalService=o,this.componentFactoryResolver=r,this.rxWizardService=a,this.translateService=s,this.getData=e=>(delete e.searchText,delete e.shouldIncludeTotalSize,this.resource.get({params:e})),this.resource=this.rxDataPageService.withType(kl.dataPageQueryType)}ngOnInit(){kl.resourceTypes=Object.entries(kl.resourceTypes).reduce((e,[t,i])=>Object.assign(Object.assign({},e),{[t]:{value:i.value,name:this.translateService.instant(i.name)}}),{}),kl.authTypes=kl.authTypes.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),kl.initialWizardContext.resourceType=kl.resourceTypes.arSystem,kl.initialWizardContext.authType=kl.authTypes[0].name;const e=[{index:0,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1},{index:1,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.description),title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),clickable:!0,actions:[{name:(e,t)=>this.editDataSourceConnection(t)}]},{index:2,fieldId:String(cs.dataSource.fields.sourceType),title:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.source-type.title")}],t={fieldDefinitions:[{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.description,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cs.dataSource.fields.sourceType,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},i=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.delete-confirmation.message")}).then(e=>{if(e){const e=this.dataSourceConnectionsGrid.api.getSelectedRows(),t=(0,m.map)(e,x.RX_RECORD_DEFINITION.coreFieldIds.id);this.rxDataSourceConnectionsService.deleteDataSourceConnections(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage("Data source connection(s) deleted successfully."),this.refreshDataSourceConnectionsGrid()})}})}}]}];this.recordGridConfig=(0,h.of)({enableFiltering:!0,columns:e,getRecordDefinition:()=>(0,h.of)(t),enableRowSelection:d.RowSelectionMode.Multiple,recordDefinitionName:kl.recordDefinitionName,actionButtons:i,getData:this.getData,styles:"flex-fill"})}getCellValue(e,t){return e[t.field]}createDataSourceConnection(){this.wizardTitle=this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.new-data-source-connection.label"),this.finishButtonLabel="Save",this.wizardConfigData=(0,m.cloneDeep)(kl.initialWizardContext),this.openWizard()}editDataSourceConnection(e){this.wizardTitle=this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.edit-data-source-connection.label"),this.finishButtonLabel=this.translateService.instant("com.bmc.arsys.rx.client.approval.update.button.label"),this.selectedConnectionId=e[x.RX_RECORD_DEFINITION.coreFieldIds.id],this.rxDataSourceConnectionsService.getDataSourceConnection(this.selectedConnectionId).subscribe(e=>{this.wizardConfigData={dataSourceName:e.dataSourceName,resourceType:Object.values(kl.resourceTypes).find(t=>t.value===e.resourceType),hostName:e.hostName,port:e.port,authType:e.authType,rasPassword:e.rasPassword,enforceAuthorization:e.enforceAuthorization,webApiDataSourceGuid:e.webApiDataSourceGuid,isEditMode:!0,isGeneralFormPristine:!0,providerId:e.providerId},this.openWizard()})}refreshDataSourceConnectionsGrid(){this.dataSourceConnectionsGrid.api.refresh().subscribe()}openWizard(){const e={title:this.wizardTitle,allowFinish:!0,finishButtonLabel:this.finishButtonLabel,steps:[{id:"general",name:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(jl)},{id:"connection-properties",name:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.connection-properties.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(Nl)}]};this.rxWizardService.open({context:this.wizardConfigData,options:e}).then(e=>{e&&this.save()})}save(){let e={dataSourceName:this.wizardConfigData.dataSourceName,resourceType:this.wizardConfigData.resourceType.value,hostName:this.wizardConfigData.hostName,port:this.wizardConfigData.port,rasPassword:this.wizardConfigData.rasPassword||null,authType:this.wizardConfigData.authType,enforceAuthorization:this.wizardConfigData.enforceAuthorization,providerId:this.wizardConfigData.providerId};this.wizardConfigData.resourceType.value===kl.resourceTypes.webApi.value?(e=(0,m.pick)(e,["dataSourceName","resourceType"]),e.webApiDataSourceGuid=this.wizardConfigData.webApiDataSourceGuid):this.wizardConfigData.resourceType.value===kl.resourceTypes.custom.value&&(e=(0,m.pick)(e,["dataSourceName","resourceType","providerId"]));(this.wizardConfigData.isEditMode?this.rxDataSourceConnectionsService.updateDataSourceConnection(this.selectedConnectionId,e):this.rxDataSourceConnectionsService.createDataSourceConnection(e)).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connections.edit-data-source-connection-saved.message")),this.refreshDataSourceConnectionsGrid()})}}Ll.\u0275fac=function(e){return new(e||Ll)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxDataPageFactoryService),o["\u0275\u0275directiveInject"](Vl),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](a.AdaptModalService),o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](s.RxWizardService),o["\u0275\u0275directiveInject"](u.TranslateService))},Ll.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ll,selectors:[["rx-admin-data-source-connections"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Zn,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.dataSourceConnectionsGrid=e.first)}},decls:8,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],[3,"config"],["dataSourceConnectionsGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementContainerStart"](2),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createDataSourceConnection()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"rx-record-grid",2,3),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.data-source-connections.header.title")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class Bl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-data-source-connections",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ll),name:"Data source connections",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Bl.\u0275fac=function(e){return new(e||Bl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Bl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Bl,declarations:[Ll,jl,Nl,El],imports:[a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxFormControlModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxValidatorsModule,a.AdaptTreeModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,d.RecordGridModule,l.RxConnectionTesterModule,f.RxDefinitionModule,s.RxWizardModule,u.TranslateModule]}),Bl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptButtonModule,a.AdaptDropdownModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxFormControlModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxValidatorsModule,a.AdaptTreeModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,d.RecordGridModule,l.RxConnectionTesterModule,f.RxDefinitionModule,s.RxWizardModule,u.TranslateModule]]});const $l="email",Gl={aliasMapping:{recordDefinitionName:"Alias Mapping",queryExpression:`'56150' = "${$l}"`,fieldIds:{aliasType:{id:56150,defaultValue:$l},applicationId:56151,applicationName:56152,aliasName:56153,aliasValue:56154,description:x.RX_RECORD_DEFINITION.coreFieldIds.description,assignee:x.RX_RECORD_DEFINITION.coreFieldIds.assignee,status:x.RX_RECORD_DEFINITION.coreFieldIds.status},mailboxType:{outgoing:0,incoming:1},status:{new:0,assigned:1}},mailbox:{recordDefinitionName:"AR System Email Mailbox Configuration",queryExpression:`'${x.RX_RECORD_DEFINITION.coreFieldIds.status}' = "0"`,fieldIds:{mailboxName:{id:18037,label:"Mailbox name"},mailboxFunction:18049},mailboxFunctions:{incoming:{id:0,label:"com.bmc.arsys.rx.client.admin.email-profiles.incoming-mailbox.label",value:String(0)},outgoing:{id:1,label:"com.bmc.arsys.rx.client.admin.email-profiles.outgoing-mailbox.label",value:String(1)}}}};class zl extends l.RxModalClass{constructor(e,t,i,n,o){super(n,o),this.formBuilder=e,this.rxGlobalCacheService=t,this.rxRecordInstanceDataPageService=i,this.dockedPanelContext=n,this.injector=o,this.mailboxFunctions=Gl.mailbox.mailboxFunctions,this.bundleOptions=[],this.mailboxOptions=[],this.availableMailboxOptions=[],this.validDefinitionNameRegex=x.RX_RECORD_DEFINITION.validDefinitionNameRegex,this.subscription=new h.Subscription}ngOnInit(){super.ngOnInit(),this.emailProfile=this.dockedPanelContext.getData().profile,this.createEmailProfileFormGroup=this.formBuilder.group({profileName:"",mailboxFunction:this.mailboxFunctions.incoming.value,mailbox:[],application:[]}),(0,h.forkJoin)({bundleDescriptors:this.rxGlobalCacheService.getBundleDescriptors(),mailboxes:this.rxRecordInstanceDataPageService.post({params:{recorddefinition:Gl.mailbox.recordDefinitionName,queryExpression:Gl.mailbox.queryExpression}})}).subscribe(e=>{this.bundleOptions=(0,m.reject)(e.bundleDescriptors,e=>(0,m.includes)([f.RX_APPLICATION.innovationStudioBundleId,f.RX_APPLICATION.platformBundleId],e.id)).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)),this.availableMailboxOptions=e.mailboxes.data,this.emailProfile?(this.createEmailProfileFormGroup.controls.mailboxFunction.disable(),this.loadEmailProfileData()):this.filterMailboxes(this.mailboxFunctions.incoming.value),this.subscription=this.createEmailProfileFormGroup.get("mailboxFunction").valueChanges.subscribe(e=>{this.createEmailProfileFormGroup.controls.mailbox.setValue([]),this.filterMailboxes(e)})})}isDirty(){return this.createEmailProfileFormGroup.dirty}ngOnDestroy(){this.subscription.unsubscribe()}filterMailboxes(e){this.mailboxOptions=(0,m.filter)(this.availableMailboxOptions,t=>t[Gl.mailbox.fieldIds.mailboxFunction]===parseInt(e,10))}loadEmailProfileData(){let e="";this.emailProfile.mailboxType===Gl.mailbox.mailboxFunctions.incoming.id?e=this.mailboxFunctions.incoming.value:this.emailProfile.mailboxType===Gl.mailbox.mailboxFunctions.outgoing.id&&(e=this.mailboxFunctions.outgoing.value),this.filterMailboxes(e);const t=this.bundleOptions.find(e=>e.id===this.emailProfile.application),i=this.availableMailboxOptions.find(e=>e[x.RX_RECORD_DEFINITION.coreFieldIds.id]===this.emailProfile.mailbox);this.createEmailProfileFormGroup.patchValue({profileName:this.emailProfile.profileName,mailboxFunction:e,mailbox:i?[i]:[],application:t?[t]:[]})}bundleNameFormatter(e){return e.friendlyName}mailboxNameFormatter(e){return e[Gl.mailbox.fieldIds.mailboxName.id]}save(){this.dockedPanelContext.close(this.createEmailProfileFormGroup.getRawValue())}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}zl.\u0275fac=function(e){return new(e||zl)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](o.Injector))},zl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:zl,selectors:[["rx-create-email-profile"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:29,consts:[[1,"dp-body"],[3,"formGroup"],["rx-id","profile-name","formControlName","profileName","required","","maxlength","254",1,"d-block","form-group",3,"label","pattern"],["rx-id","mailbox-function","required","",1,"d-block","form-group",3,"label","formControl"],["class","mb-0 mt-0 radio-inline",3,"value","label",4,"ngFor","ngForOf"],["formControlName","mailbox","rx-id","mailbox","required","",1,"d-block","form-group",3,"label","options","optionFormatter"],["emptyOption","true","formControlName","application","rx-id","application",1,"d-block","form-group",3,"label","options","optionFormatter"],[1,"dp-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",1,"mr-2",3,"click"],[1,"mb-0","mt-0","radio-inline",3,"value","label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementStart"](4,"adapt-rx-radiobutton-group",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275template"](6,eo,2,4,"adapt-rx-radiobutton",4),o["\u0275\u0275pipe"](7,"keyvalue"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](8,"adapt-rx-select",5),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275element"](10,"adapt-rx-select",6),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",7),o["\u0275\u0275elementStart"](13,"button",8),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"button",9),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.createEmailProfileFormGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,15,"com.bmc.arsys.rx.client.admin.create-email-profile.profile-name.label")),o["\u0275\u0275property"]("pattern",t.validDefinitionNameRegex),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,17,"com.bmc.arsys.rx.client.admin.create-email-profile.mailbox-function.label")),o["\u0275\u0275property"]("formControl",t.createEmailProfileFormGroup.controls.mailboxFunction),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",o["\u0275\u0275pipeBind1"](7,19,t.mailboxFunctions)),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,21,"com.bmc.arsys.rx.client.admin.create-email-profile.mailbox.label")),o["\u0275\u0275property"]("options",t.mailboxOptions)("optionFormatter",t.mailboxNameFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,23,"com.bmc.arsys.rx.client.admin.create-email-profile.application.label")),o["\u0275\u0275property"]("options",t.bundleOptions)("optionFormatter",t.bundleNameFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.createEmailProfileFormGroup.invalid||t.createEmailProfileFormGroup.pristine),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,25,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,27,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,r.MaxLengthValidator,r.PatternValidator,a.AdaptRxRadiobuttonGroupComponent,r.FormControlDirective,n.NgForOf,a.AdaptRxSelectComponent,a.AdaptButtonComponent,a.AdaptRxRadiobuttonComponent],pipes:[u.TranslatePipe,n.KeyValuePipe],encapsulation:2});class Ul{constructor(e){this.rxRecordInstanceService=e}deleteEmailProfiles(e,t){return(0,h.forkJoin)((0,m.map)(t,t=>this.rxRecordInstanceService.delete(e,t)))}}Ul.\u0275fac=function(e){return new(e||Ul)(o["\u0275\u0275inject"](x.RxRecordInstanceService))},Ul.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Ul,factory:Ul.\u0275fac,providedIn:"root"});class ql{constructor(e,t,i,n,o,r){this.rxRecordInstanceDataPageService=e,this.rxRecordInstanceService=t,this.rxNotificationService=i,this.rxModalService=n,this.rxEmailProfilesService=o,this.translateService=r,this.getData=e=>(delete e.searchText,delete e.shouldIncludeTotalSize,e.recorddefinition=Gl.aliasMapping.recordDefinitionName,e.propertySelection.push(`${x.RX_RECORD_DEFINITION.coreFieldIds.status}`,`${Gl.aliasMapping.fieldIds.applicationId}`),e.queryExpression?e.queryExpression+=`AND ${Gl.aliasMapping.queryExpression}`:e.queryExpression=Gl.aliasMapping.queryExpression,this.rxRecordInstanceDataPageService.post({params:e}).pipe((0,v.switchMap)(e=>{if(0===e.totalSize)return(0,h.of)(e);{let t="";e.data.forEach(e=>{null!==e[Gl.aliasMapping.fieldIds.aliasValue]&&((0,m.isEmpty)(t)||(t+=" OR "),t+=`'${x.RX_RECORD_DEFINITION.coreFieldIds.id}' = "${e[Gl.aliasMapping.fieldIds.aliasValue]}"`)});const i={queryExpression:Gl.mailbox.queryExpression,recorddefinition:Gl.mailbox.recordDefinitionName};return(0,m.isEmpty)(t)||(i.queryExpression+=` AND ((${t}))`),this.rxRecordInstanceDataPageService.post({params:i}).pipe((0,v.map)(t=>(0===t.totalSize||t.data.forEach(t=>{e.data=(0,m.transform)(e.data,(e,i)=>{i[Gl.aliasMapping.fieldIds.aliasValue]===t[x.RX_RECORD_DEFINITION.coreFieldIds.id]&&(i[Gl.aliasMapping.fieldIds.description]=t[Gl.mailbox.fieldIds.mailboxName.id],i[Gl.aliasMapping.fieldIds.assignee]=t[Gl.mailbox.fieldIds.mailboxFunction]),e.push(i)},[])}),e)))}})))}ngOnInit(){const e=[{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.id}`,index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1},{fieldId:`${Gl.aliasMapping.fieldIds.aliasName}`,index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.create-email-profile.profile-name.label"),clickable:!0,actions:[{name:(e,t)=>{this.currentRecordInstance=this.rxRecordInstanceService.get(Gl.aliasMapping.recordDefinitionName,t[x.RX_RECORD_DEFINITION.coreFieldIds.id]);const i={profileName:t[Gl.aliasMapping.fieldIds.aliasName],mailbox:t[Gl.aliasMapping.fieldIds.aliasValue],application:t[Gl.aliasMapping.fieldIds.applicationId],mailboxType:(()=>{const e=(0,m.parseInt)(t[Gl.aliasMapping.fieldIds.assignee],10);return(0,m.map)(Gl.mailbox.mailboxFunctions,e=>e.id).includes(e)?e:null})()};this.createEmailProfile(i)}}]},{fieldId:`${Gl.aliasMapping.fieldIds.description}`,index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.create-email-profile.mailbox.label"),sortable:!1,filterable:!1},{fieldId:`${Gl.aliasMapping.fieldIds.assignee}`,index:3,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.create-email-profile.mailbox-function.label"),sortable:!1,filterable:!1,cellTemplate:this.mailboxFunctionCellTemplate},{fieldId:`${Gl.aliasMapping.fieldIds.aliasValue}`,index:4,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.outgoing-mailbox-id.label"),visible:!1},{fieldId:`${Gl.aliasMapping.fieldIds.applicationName}`,index:5,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.create-email-profile.application.label")}],t={fieldDefinitions:[{id:x.RX_RECORD_DEFINITION.coreFieldIds.description,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Gl.aliasMapping.fieldIds.assignee,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Gl.aliasMapping.fieldIds.aliasName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Gl.aliasMapping.fieldIds.applicationName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Gl.aliasMapping.fieldIds.aliasValue,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},i=[{label:"Delete",style:"tertiary",icon:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.delete-confirmation.message")}).then(e=>{if(e){const e=this.emailProfilesGrid.api.getSelectedRows(),t=(0,m.map)(e,x.RX_RECORD_DEFINITION.coreFieldIds.id);this.rxEmailProfilesService.deleteEmailProfiles(Gl.aliasMapping.recordDefinitionName,t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.deleted-email-profile.message")),this.refreshEmailProfilesGrid()})}})}}]}];this.emailProfilesGridConfig$=(0,h.of)({enableFiltering:!0,columns:e,getRecordDefinition:()=>(0,h.of)(t),actionButtons:i,getData:this.getData,styles:"flex-fill"})}createEmailProfile(e){this.rxModalService.openDockedPanel({title:e?this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.update-email-profile.message"):this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.add-new-email-profile.message"),content:zl,size:"lg",data:{profile:e}}).then(t=>(e||(this.currentRecordInstance=this.rxRecordInstanceService.getNew(Gl.aliasMapping.recordDefinitionName)),this.currentRecordInstance.pipe((0,v.map)(e=>(e.setFieldValue(Gl.aliasMapping.fieldIds.aliasType.id,this.translateService.instant(Gl.aliasMapping.fieldIds.aliasType.defaultValue)),e.setFieldValue(Gl.aliasMapping.fieldIds.aliasName,t.profileName),e.setFieldValue(Gl.aliasMapping.fieldIds.applicationId,(0,m.get)(t,"application[0].id","None")),e.setFieldValue(Gl.aliasMapping.fieldIds.applicationName,(0,m.get)(t,"application[0].name","None")),e.setFieldValue(Gl.aliasMapping.fieldIds.aliasValue,t.mailbox[0][x.RX_RECORD_DEFINITION.coreFieldIds.id]),e.setFieldValue(Gl.aliasMapping.fieldIds.description,"Email profile"),e.setFieldValue(Gl.aliasMapping.fieldIds.status,(0,m.parseInt)(t.mailboxFunction,10)===Gl.mailbox.mailboxFunctions.outgoing.id?Gl.aliasMapping.status.new:Gl.aliasMapping.status.assigned),e)),(0,v.switchMap)(t=>e?this.rxRecordInstanceService.save(t):this.rxRecordInstanceService.create(t))).subscribe(()=>{this.refreshEmailProfilesGrid(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.email-profiles.saved-email-profile.message"))}))).catch(m.noop)}refreshEmailProfilesGrid(){this.emailProfilesGrid.api.refresh().subscribe()}getMailboxFunctionType(e){const t=(0,m.find)(Gl.mailbox.mailboxFunctions,t=>t.id===e[Gl.aliasMapping.fieldIds.assignee]);return t?this.translateService.instant(t.label):"None"}}ql.\u0275fac=function(e){return new(e||ql)(o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Ul),o["\u0275\u0275directiveInject"](u.TranslateService))},ql.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ql,selectors:[["rx-admin-email-profiles"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](to,5),o["\u0275\u0275viewQuery"](io,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.emailProfilesGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.mailboxFunctionCellTemplate=e.first)}},decls:10,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-email-profile-button",1,"d-icon-left-plus_circle",3,"click"],["rx-id","email-profile-grid",3,"config"],["emailProfilesGrid",""],["mailboxFunctionCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createEmailProfile()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,no,2,1,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.email-profiles.header.title")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.emailProfilesGridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class Xl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-email-profiles",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ql),name:"Email profiles",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Xl.\u0275fac=function(e){return new(e||Xl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Xl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Xl,declarations:[ql,zl],imports:[s.AdminSettingsModule,n.CommonModule,d.RecordGridModule,a.AdaptRxTextfieldModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSelectModule,r.FormsModule,r.ReactiveFormsModule,a.AdaptButtonModule,u.TranslateModule]}),Xl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,n.CommonModule,d.RecordGridModule,a.AdaptRxTextfieldModule,a.AdaptRxRadiobuttonModule,a.AdaptRxSelectModule,r.FormsModule,r.ReactiveFormsModule,a.AdaptButtonModule,u.TranslateModule]]});class Hl{constructor(e){this.httpClient=e,this.path="/api/rx/application/functionalrole"}getUrl(e){return`${this.path}/${encodeURIComponent(e.applicationName)}/${encodeURIComponent(e.name)}`}get(e){return this.httpClient.get(this.getUrl(e))}deleteFunctionalRole(e){return this.httpClient.delete(this.getUrl(e))}delete(e){const t=e.map(e=>this.deleteFunctionalRole(e));return(0,h.forkJoin)(t)}create(e){return this.httpClient.post(this.path,e)}save(e,t){return this.httpClient.put(this.getUrl({applicationName:e.applicationName,name:t}),e)}}Hl.\u0275fac=function(e){return new(e||Hl)(o["\u0275\u0275inject"](b.HttpClient))},Hl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Hl,factory:Hl.\u0275fac,providedIn:"root"});class Wl extends l.RxModalClass{constructor(e,t,i,n,o,r,s){super(t,s),this.rxGlobalCacheService=e,this.activeModalRef=t,this.rxRoleDataPage=i,this.rxFuntionalRoleService=n,this.rxNotificationService=o,this.translateService=r,this.injector=s,this.availableRoles=[],this.isEditMode=!1,this.isSaveButtonDisabled=!0,this.selectedRolesList=[],this.destroyed$=new h.ReplaySubject(1),this.treeWrap=a.TreeWrap.WrapAll,this.validatorFn=this.functionalRoleNameValidator.bind(this)}get selectedRoles(){return this.selectedRolesList}set selectedRoles(e){this.selectedRolesList=e,this.isSaveButtonDisabled=!this.functionalRoleEditorForm.valid}ngOnInit(){super.ngOnInit();const e={propertySelection:["applicationName","roleName"].join(","),includeSmartAppRolesOnly:!0},t=[f.RX_APPLICATION.innovationStudioBundleId,f.RX_APPLICATION.standardlib,f.RX_APPLICATION.settingsBundleId,f.RX_APPLICATION.platformBundleId];this.functionalRole=this.activeModalRef.getData().functionalRole,this.isEditMode=Boolean(this.functionalRole.id),this.busy=(0,h.forkJoin)([this.rxRoleDataPage.get({params:Object.assign({startIndex:0,pageSize:-1},e)}),this.rxGlobalCacheService.getBundleDescriptors()]).subscribe(([e,i])=>{if(this.applicationOptions=i.filter(e=>!t.includes(e.id)).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)).map(e=>({displayValue:e.friendlyName,value:e.id})),this.isEditMode){let e=(0,m.find)(this.applicationOptions,{value:this.functionalRole.applicationName});e||(e={displayValue:this.functionalRole.applicationName,value:this.functionalRole.applicationName},this.applicationOptions.push(e)),this.selectedApplication=[e],this.oldRoleName=this.functionalRole.name}else this.selectedApplication=[this.applicationOptions[0]];this.availableRoles=(0,m.chain)(e.data).groupBy("applicationName").map((e,t)=>({children:this.getChildren(e),leaf:!1,label:(0,m.find)(i,{id:t}).friendlyName,key:t,data:{name:"",applicationName:t}})).value(),this.isEditMode&&this.updateParentNodesForSelectedRoles()}),this.functionalRoleEditorForm.statusChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.isSaveButtonDisabled=!this.functionalRoleEditorForm.valid||this.functionalRoleEditorForm.pristine}),this.functionalRoleEditorForm.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.isSaveButtonDisabled=!this.functionalRoleEditorForm.valid||this.functionalRoleEditorForm.pristine})}isDirty(){return this.functionalRoleEditorForm.dirty}getChildren(e){return e.map(e=>{const t={children:null,leaf:!0,label:e.roleName,key:`${e.applicationName}:${e.roleName}`,data:{name:e.roleName,applicationName:e.applicationName}};return this.isEditMode&&this.checkAndAddToSelectedRoles(t),t})}checkAndAddToSelectedRoles(e){if(this.functionalRole.applicationRoles&&(0,m.has)(this.functionalRole.applicationRoles,e.data.applicationName)){this.functionalRole.applicationRoles[e.data.applicationName].includes(e.data.name)&&this.selectedRolesList.push(e)}}updateParentNodesForSelectedRoles(){(0,m.map)(this.selectedRolesList,e=>{const t=(0,m.find)(this.availableRoles,t=>t.data.applicationName===e.data.applicationName);(0,m.filter)(this.selectedRolesList,e=>t.children.find(i=>i.data.name===e.data.name&&t.data.applicationName===e.data.applicationName)).length===t.children.length?this.selectedRolesList.includes(t)||this.selectedRolesList.push(t):t.partialSelected=!0})}optionFormatter(e){return e.displayValue}save(){this.allowDismiss=!1,this.isSaveButtonDisabled=!0,this.isEditMode||(this.functionalRole.applicationName=this.selectedApplication[0].value);const e=(0,m.filter)(this.selectedRolesList,e=>e.leaf);this.functionalRole.applicationRoles=(0,m.chain)(e).groupBy(e=>e.data.applicationName).map((e,t)=>({[t]:e.map(e=>e.label)})).reduce((e,t)=>Object.assign(e,t),{}).value();(this.isEditMode?this.rxFuntionalRoleService.save(this.functionalRole,this.oldRoleName):this.rxFuntionalRoleService.create(this.functionalRole)).pipe((0,v.finalize)(()=>{this.allowDismiss=!0,this.isSaveButtonDisabled=!1})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.functional-roles.functional-role-saved.label")),this.activeModalRef.close(!0)})}functionalRoleNameValidator(e){return e.value&&!x.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.value)?{invalidRoleName:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.functional-roles.functional-role-name-validation.message")}}:null}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Wl.\u0275fac=function(e){return new(e||Wl)(o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](f.RxRoleDataPageService),o["\u0275\u0275directiveInject"](Hl),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},Wl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Wl,selectors:[["rx-functional-role-editor"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](oo,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.functionalRoleEditorForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:17,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body","functional-role-editor-modal-body","d-flex"],[3,"options"],[1,"w-100"],["functionalRoleEditorForm","ngForm"],["class","row h-100",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"adaptInlineLoader","disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"disabled","click"],[1,"row","h-100"],[1,"col-6","d-flex","flex-column","mh-100","mt-2"],["rx-id","application-name","required","true","name","application",1,"form-group","d-block",3,"label","ngModel","options","optionFormatter","readonly","ngModelChange"],["rx-id","name","required","true","name","name",1,"form-group","d-block",3,"label","ngModel","rxCustomValidators","ngModelChange"],["rx-id","description","required","true","name","description",1,"form-group","d-block",3,"ngModel","label","ngModelChange"],["rx-id","id","class","form-group d-block","name","id",3,"ngModel","label","readonly","disabledStyleForReadonlyState","ngModelChange",4,"ngIf"],["label","Roles"],[1,"card","roles-list-wrapper","flex-grow-1"],[1,"card-block"],["filter","true","selectionMode","checkbox",3,"value","selection","wrap","selectionChange",4,"ngIf"],["rx-id","id","name","id",1,"form-group","d-block",3,"ngModel","label","readonly","disabledStyleForReadonlyState","ngModelChange"],["filter","true","selectionMode","checkbox",3,"value","selection","wrap","selectionChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275element"](6,"rx-busy-indicator",4),o["\u0275\u0275elementStart"](7,"form",5,6),o["\u0275\u0275template"](9,so,14,18,"div",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"div",8),o["\u0275\u0275elementStart"](11,"button",9),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](12),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"button",10),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,9,t.isEditMode?"com.bmc.arsys.rx.client.admin.functional-roles.edit-functional-role.label":"com.bmc.arsys.rx.client.admin.functional-roles.create-functional-role.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](15,Ae,t.busy)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.applicationOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",t.isSaveButtonDisabled||!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](13,11,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](16,13,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[l.RxBusyIndicatorComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,n.NgIf,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective,a.AdaptRxSelectComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptRxTextfieldComponent,l.RxCustomValidatorsDirective,a.AdaptRxControlLabelComponent,a.AdaptTreeComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.functional-role-editor-modal-body[_ngcontent-%COMP%]{height:645px}.roles-list-wrapper[_ngcontent-%COMP%]{overflow:auto}adapt-rx-select[_ngcontent-%COMP%], adapt-rx-textfield[_ngcontent-%COMP%]{max-width:500px}']});const Yl="Functional Roles",Ql={applicationName:1720,name:1721};class Kl{constructor(e,t,i,n){this.rxFuntionalRoleService=e,this.rxNotificationService=t,this.rxModalService=i,this.translateService=n,this.gridConfig$=new h.Observable(e=>{e.next({recordDefinitionName:Yl,columns:this.getColumns(),actionButtons:this.getActionButtons(),styles:"flex-fill"}),e.complete()})}getActionButtons(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",iconCls:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.dialog.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.functional-roles.functional-role-delete-confirmation.message")}).then(e=>{if(e){const e=(0,m.castArray)(this.functionalRolesRecordGrid.api.getSelectedRows()).map(e=>({applicationName:e[Ql.applicationName],name:e[Ql.name]}));this.rxFuntionalRoleService.delete(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.functional-roles.functional-role-deleted.message")),this.functionalRolesRecordGrid.api.refresh().subscribe()})}})}}]}]}getColumns(){return[{fieldId:`${Ql.name}`,index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),clickable:!0,actions:[{name:(e,t)=>this.editFunctionalRole(t)}]},{fieldId:`${Ql.applicationName}`,index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.functional-roles.application-library-name.label")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.description}`,index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.chatbots.description.title")},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.id}`,index:3,title:"ID"}]}openModal(e){this.rxModalService.openModal({content:Wl,size:"default",data:{functionalRole:e}}).then(e=>{e&&this.functionalRolesRecordGrid.api.refresh().subscribe()}).catch(m.noop)}createFunctionalRole(){this.openModal({name:"",applicationName:"",description:"",applicationRoles:{}})}editFunctionalRole(e){this.rxFuntionalRoleService.get({applicationName:e[Ql.applicationName],name:e[Ql.name]}).subscribe(e=>{this.openModal(e)})}}Kl.\u0275fac=function(e){return new(e||Kl)(o["\u0275\u0275directiveInject"](Hl),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](u.TranslateService))},Kl.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Kl,selectors:[["rx-admin-functional-roles"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](lo,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.functionalRolesRecordGrid=e.first)}},decls:7,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["rx-id","functional-roles-grid",3,"config"],["functionalRolesRecordGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createFunctionalRole()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.approval.configuration.functional.roles")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class Jl{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-functional-roles",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Kl),name:"Functional roles",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Jl.\u0275fac=function(e){return new(e||Jl)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Jl.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Jl,declarations:[Kl,Wl],imports:[n.CommonModule,r.FormsModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptBusyModule,a.AdaptRxSelectModule,a.AdaptRxFormControlModule,a.AdaptTreeModule,l.RxBusyIndicatorModule,u.TranslateModule,l.RxDirectivesModule]}),Jl.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.FormsModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptBusyModule,a.AdaptRxSelectModule,a.AdaptRxFormControlModule,a.AdaptTreeModule,l.RxBusyIndicatorModule,u.TranslateModule,l.RxDirectivesModule]]});class Zl{constructor(e){this.httpClient=e,this.knowledgeApi="/api/rx/application/knowledge",this.folderCache=new Map}callItsmMappingApi(){return this.httpClient.get(`${this.knowledgeApi}/mapping/itsm`)}callHkmMappingApi(){return this.httpClient.get(`${this.knowledgeApi}/mapping/hkm`)}getFolderAccess(e,t,i){const n=`${e}-${t}-${i}`;if(this.folderCache.has(n))return(0,h.of)(this.folderCache.get(n));const o=encodeURIComponent(`v1/contentaccess/${e}/${t}/${i}`);return this.httpClient.get(`${this.knowledgeApi}?ComAroundRequest=${o}`).pipe((0,v.tap)(e=>this.folderCache.set(n,e)))}deleteAccessMappings(e){return this.httpClient.delete(`${this.knowledgeApi}/mapping/delete/${e.join(",")}`)}saveAccessMappings(e){return this.httpClient.post(`${this.knowledgeApi}/mapping/save`,e)}}Zl.\u0275fac=function(e){return new(e||Zl)(o["\u0275\u0275inject"](b.HttpClient))},Zl.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Zl,factory:Zl.\u0275fac,providedIn:"root"});class ec{constructor(e,t,i,n,o){this.dockedPanelContext=e,this.rxNotificationService=t,this.translateService=i,this.rxModalService=n,this.rxHkmAccessMappingService=o,this.destroyed$=new h.ReplaySubject(1),this.userGroupToFoldersMap=new Map,this.selectedItsmSupportGroups=[],this.alertConfig={title:"",content:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.mapping-info.message"),type:"inline",variant:"info"};const a=this.dockedPanelContext.getData();this.selectedItsmSupportGroups=a.selectedSupportGroups,this.portals=a.hkmPortals,this.company=a.company,this.portalUserGroups=a.selectedHkmPortal.userGroups,this.selectedPortal=new r.FormControl([a.selectedHkmPortal]),this.selectedUserGroups=new r.FormControl(a.selectedHkmUserGroups)}ngOnInit(){this.selectedPortal.valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(([e])=>{this.portalUserGroups=e.userGroups,this.selectedUserGroups.reset([])}),this.selectedUserGroups.valueChanges.pipe((0,v.takeUntil)(this.destroyed$),(0,v.startWith)(this.selectedUserGroups.value||[]),(0,v.switchMap)(e=>{if(0===e.length)return(0,h.of)(e);const[t]=this.selectedPortal.value,i=e.map(e=>this.rxHkmAccessMappingService.getFolderAccess(e.id,t.portalId,t.nodeId).pipe((0,v.tap)(t=>this.userGroupToFoldersMap.set(e,t))));return(0,h.forkJoin)(i).pipe((0,v.map)(()=>e))})).subscribe(e=>{this.setUpFoldersFromHkmPortalUserGroups(e)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.ESC)}save(){if(0===this.selectedItsmSupportGroups.length)return void this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-support-group.message"));if(0===this.selectedUserGroups.value.length)return void this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-user-group.message"));const e=this.hkmFolders.map(e=>e.name),t=this.selectedUserGroups.value,i=this.selectedItsmSupportGroups.map(i=>({AppCompanyID:this.company.permissionId,AppCompanyName:this.company.name,AppGroupName:i.supportGroupName,AppName:"ITSM",IsMapped:!0,AppGroupID:i.permissionGroupId,HKMPortalID:this.selectedPortal.value[0].portalId,HKMPortalName:this.selectedPortal.value[0].portalName,HKMRoleName:t.map(e=>e.role).join(","),HKMGroupID:t.map(e=>e.id).join(","),HKMGroupFoldersNames:e,HKMGroupName:t.map(e=>e.name).join(",")}));this.rxHkmAccessMappingService.saveAccessMappings(i).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.connection-mapping.mapping-saved.message")),this.dockedPanelContext.close(a.DismissReasons.CLOSE_BTN)},()=>{this.dockedPanelContext.close(a.DismissReasons.BACKDROP_CLICK)})}hkmFolderSortFn(e,t){return e.hasFolderChildren!==t.hasFolderChildren?+t.hasFolderChildren-+e.hasFolderChildren:e.name.localeCompare(t.name)}setUpFoldersFromHkmPortalUserGroups(e){const t=(0,m.flatMap)(e,e=>this.userGroupToFoldersMap.get(e).filter(e=>e.haveAccess).map(t=>({group:e,folder:t})));t.sort((e,t)=>this.hkmFolderSortFn(e.folder,t.folder));const i=(0,m.uniqBy)(t,e=>e.folder.nodeId);this.hkmFolders=i.map(e=>e.folder),this.filesTree=i.map(e=>({data:e,expandedIcon:e.folder.hasFolderChildren?"d-icon-folder_open":"d-icon-folder_o",collapsedIcon:e.folder.hasFolderChildren?"d-icon-folder":"d-icon-folder_o",label:e.folder.name,level:1,expression:`'${e.folder.nodeId}'`,children:null,leaf:!e.folder.hasFolderChildren}))}deleteVisibilityGroup(e){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.delete-visibility-group.message")}).then(t=>{t&&this.selectedItsmSupportGroups.forEach((t,i)=>{t.supportGroupName===e.supportGroupName&&this.selectedItsmSupportGroups.splice(i,1)})})}onNodeExpand({node:e}){e&&!e.children&&this.rxHkmAccessMappingService.getFolderAccess(e.data.group.id,e.data.folder.portalId,e.data.folder.nodeId).subscribe(t=>{e.children=t.filter(e=>e.haveAccess).sort(this.hkmFolderSortFn).map(t=>({data:{group:e.data.group,folder:t},expandedIcon:t.hasFolderChildren?"d-icon-folder_open":"d-icon-folder_o",collapsedIcon:t.hasFolderChildren?"d-icon-folder":"d-icon-folder_o",label:t.name,level:1,expression:`'${t.nodeId}'`,children:null,leaf:!t.hasFolderChildren}))})}supportGroupFormatter(e){return e.supportGroupName}userGroupOptionformatter(e){return e.name}hkmPortalFormatter(e){return e.portalName}}var tc;ec.\u0275fac=function(e){return new(e||ec)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Zl))},ec.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ec,selectors:[["rx-hkm-access-map-editor"]],decls:43,vars:40,consts:[[1,"container","col","d-flex","flex-column",2,"overflow-y","auto"],[1,"row","justify-content-between"],[1,"col-5","form-control-label"],["rx-id","company-field",3,"disabled","label","ngModel","ngModelChange"],[1,"col-1","d-flex","align-items-end","p-2","justify-content-center"],["name","arrow_right"],[1,"col-6","form-control-label"],["rx-id","portal-select",3,"formControl","options","optionFormatter","label"],[1,"row"],[1,"col"],[3,"config"],[1,"row","flex-grow-1","py-3","justify-content-between"],[1,"col-5","d-flex","flex-column"],[1,"pb-1"],[1,"form-control-label"],["rx-id","selected-support-groups",1,"card","flex-grow-1"],["class","d-flex px-2 align-items-center adapt-rx-list-item cursor-pointer",4,"ngFor","ngForOf"],[1,"col-1","d-flex","p-2","mt-4","justify-content-center"],[3,"name"],[1,"col-6","d-flex","flex-column"],["rx-id","user-groups-select",3,"formControl","label","options","optionFormatter","selectAllButton","deselectAllButton","enableFilter","multiple"],[1,"mt-3","pb-1"],[1,"card","flex-grow-1","p-2"],[1,"mh-100",2,"overflow-y","auto"],[3,"value","onNodeExpand"],[1,"dp-footer"],["rx-id","save-button","type","button",1,"btn","btn-primary","mr-2",3,"click"],["rx-id","cancel-button","type","button",1,"btn","btn-secondary",3,"click"],[1,"d-flex","px-2","align-items-center","adapt-rx-list-item","cursor-pointer"],["type","button","rx-id","delete-button",1,"btn","btn-link","d-icon-trash","p-1",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275elementStart"](3,"adapt-rx-textfield",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.company.name=e}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",4),o["\u0275\u0275element"](6,"adapt-icon",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",6),o["\u0275\u0275element"](8,"adapt-rx-select",7),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"hr"),o["\u0275\u0275elementStart"](11,"div",8),o["\u0275\u0275elementStart"](12,"div",9),o["\u0275\u0275element"](13,"adapt-alert",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"div",11),o["\u0275\u0275elementStart"](15,"div",12),o["\u0275\u0275elementStart"](16,"div",13),o["\u0275\u0275elementStart"](17,"span",14),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",15),o["\u0275\u0275template"](21,co,4,2,"div",16),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",17),o["\u0275\u0275element"](23,"adapt-icon",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"div",19),o["\u0275\u0275element"](25,"adapt-rx-select",20),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementStart"](27,"div",21),o["\u0275\u0275elementStart"](28,"span",14),o["\u0275\u0275text"](29),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"div",22),o["\u0275\u0275elementStart"](32,"div",23),o["\u0275\u0275elementStart"](33,"adapt-tree",24),o["\u0275\u0275listener"]("onNodeExpand",function(e){return t.onNodeExpand(e)}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"div",25),o["\u0275\u0275elementStart"](35,"div"),o["\u0275\u0275elementStart"](36,"button",26),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](37),o["\u0275\u0275pipe"](38,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](39,"div"),o["\u0275\u0275elementStart"](40,"button",27),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](41),o["\u0275\u0275pipe"](42,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!0)("label",o["\u0275\u0275pipeBind1"](4,23,"com.bmc.arsys.rx.client.hkm-access-mapping.company.label"))("ngModel",t.company.name),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("formControl",t.selectedPortal)("options",t.portals)("optionFormatter",t.hkmPortalFormatter)("label",o["\u0275\u0275pipeBind1"](9,25,"com.bmc.arsys.rx.client.hkm-access-mapping-editor.header.label")),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("config",t.alertConfig),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind2"](19,27,"com.bmc.arsys.rx.client.hkm-access-mapping-editor.support-group.label",o["\u0275\u0275pureFunction1"](38,po,t.selectedItsmSupportGroups.length))," "),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.selectedItsmSupportGroups),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("name","arrow_right"),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.selectedUserGroups)("label",o["\u0275\u0275pipeBind1"](26,30,"com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-hkm-user-groups.label"))("options",t.portalUserGroups)("optionFormatter",t.userGroupOptionformatter)("selectAllButton",!0)("deselectAllButton",!0)("enableFilter",!0)("multiple",!0),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](30,32,"com.bmc.arsys.rx.client.hkm-access-mapping-editor.accessible-folders.title")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("value",t.filesTree),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](38,34,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](42,36,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[a.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel,a.AdaptIconComponent,a.AdaptRxSelectComponent,r.FormControlDirective,a.AdaptAlertComponent,n.NgForOf,a.AdaptTreeComponent],pipes:[u.TranslatePipe],encapsulation:2}),function(e){e.All="$ALL$",e.None="$NONE$"}(tc||(tc={}));class ic extends p.BaseViewComponent{constructor(e,t,i,n){super(),this.adaptDockedPanelService=e,this.translateService=t,this.rxModalService=i,this.rxHkmAccessMappingService=n,this.predefinedLinesOfBusiness=[{id:tc.All,name:this.translateService.instant("com.bmc.arsys.rx.client.common.all.label")},{id:tc.None,name:this.translateService.instant("com.bmc.arsys.rx.client.common.none.label")}],this.hkmPortals=[],this.supportGroups=[],this.selectedLob=this.predefinedLinesOfBusiness[0],this.itsmCompanies=[],this.linesOfBusiness=[]}ngOnInit(){this.loadItsmHkmMappingData(),this.rxHkmAccessMappingService.callHkmMappingApi().subscribe(e=>{this.hkmPortals=e}),this.setupGridInit()}setupGridInit(){this.gridColumns=[{fieldId:"supportGroupName",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-permission-group.title"),filterable:!1,cellTemplate:this.visibilityGroupColTemplate},{fieldId:"description",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.support-group-description.title"),filterable:!1},{fieldId:"permissionGroupId",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-permission-group-id.title"),filterable:!1,visible:!1},{filterable:!0,fieldId:"isMapped",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.title"),cellTemplate:this.statusColTemplate},{fieldId:"hkmportalName",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-portal-name.title"),visible:!0,filterable:!1},{fieldId:"hkmgroupName",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-group-name.title"),visible:!0,filterable:!1},{fieldId:"hkmgroupID",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-group-id.title"),visible:!1,filterable:!1},{fieldId:"hkmroleName",title:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-role.title"),visible:!0,filterable:!1}];const e={fieldDefinitions:[{id:"supportGroupName",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"description",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"permissionGroupId",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"isMapped",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:{true:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.mapped.label"),false:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.unmapped.label")}},{id:"hkmportalName",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"hkmgroupName",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"hkmgroupID",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"hkmroleName",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},t=[{label:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.map-access.button.label"),style:"tertiary",iconCls:"cubes_restart",disabled:e=>!this.hasPortals()||0===e.length||e.some(e=>e.isMapped),actions:[{name:()=>this.openAccessMappingDialog()}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.grid.unmap-access.button.label"),style:"tertiary",iconCls:"cube_cross_circle",disabled:e=>!this.hasPortals()||0===e.length||e.some(e=>!e.isMapped),actions:[{name:()=>this.deleteMapping()}]}];this.recordGridConfig$=(0,h.of)({columns:this.gridColumns,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.innovation-studio.external-record-wizard.document-selection.grid.empty-state.label"),enableRowSelection:d.RowSelectionMode.Multiple,enableFiltering:!0,recordIdField:"requestId",styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,h.of)(e),getData:()=>(0,h.of)({totalSize:this.supportGroups.length,data:this.supportGroups}),actionButtons:t,filterMode:d.RecordGridFilterMode.Basic})}setUpValues(){this.selectedLob.id===tc.All?this.supportGroups=[...this.selectedCompany.supportGroups]:this.selectedLob.id===tc.None?this.supportGroups=this.selectedCompany.supportGroups.filter(e=>(0,m.isEmpty)(e.lineOfBusiness)):this.supportGroups=this.selectedCompany.supportGroups.filter(e=>{var t;return null===(t=e.lineOfBusiness)||void 0===t?void 0:t.some(e=>e===this.selectedLob.id)}),this.itsmHkmMappingDataGrid.api.refresh().subscribe()}loadItsmHkmMappingData(){this.busy=this.rxHkmAccessMappingService.callItsmMappingApi().subscribe(({data:e})=>{var t;this.itsmCompanies=[...e];const i=(0,m.chain)(e).flatMap(e=>e.supportGroups).filter(e=>!(0,m.isEmpty)(e.lineOfBusiness)).flatMap(e=>e.lineOfBusiness).sort().sortedUniq().map(e=>({id:e,name:e})).value();if(this.linesOfBusiness=[...this.predefinedLinesOfBusiness,...i],(0,m.isEmpty)(null===(t=this.selectedCompany)||void 0===t?void 0:t.name))this.setSelected(0);else{const e=this.selectedCompany.permissionId;this.selectedCompany=this.itsmCompanies.find(t=>t.permissionId===e),this.setUpValues()}})}setSelected(e){this.selectedCompany=this.itsmCompanies[e],this.setUpValues()}setSelectedLineOfBusiness(e){this.selectedLob=e,this.setUpValues()}openAccessMappingDialog(e=null){let t=this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.new.title"),i=this.hkmPortals[0],n=this.itsmHkmMappingDataGrid.api.getSelectedRows(),o=[];if(e){const r=e.hkmgroupID.split(",").map(Number);t=this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping-editor.edit.title"),i=this.hkmPortals.find(t=>t.portalName===e.hkmportalName),n=[e],o=i.userGroups.filter(e=>r.includes(e.id))}this.openDetailDialog(t,n,i,o)}openDetailDialog(e,t,i,n=[]){var o;(null===(o=this.hkmPortals)||void 0===o?void 0:o.length)>0&&this.adaptDockedPanelService.open({title:e,content:ec,size:S.OpenViewActionModalSize.Small,data:{company:this.selectedCompany,hkmPortals:this.hkmPortals,selectedLob:this.selectedLob,selectedSupportGroups:t,selectedHkmPortal:i,selectedHkmUserGroups:n}}).then(e=>{e===a.DismissReasons.CLOSE_BTN&&this.loadItsmHkmMappingData()}).catch(m.noop)}deleteMapping(){const e=this.itsmHkmMappingDataGrid.api.getSelectedRows().map(e=>e.id);this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.hkm-access-mapping.delete-mapping.message")}).then(t=>{t&&this.rxHkmAccessMappingService.deleteAccessMappings(e).subscribe(()=>this.loadItsmHkmMappingData())})}hasPortals(){return!(0,m.isEmpty)(this.hkmPortals)}}ic.\u0275fac=function(e){return new(e||ic)(o["\u0275\u0275directiveInject"](a.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Zl))},ic.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ic,selectors:[["rx-admin-hkm-access-mapping"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](uo,5),o["\u0275\u0275viewQuery"](mo,7),o["\u0275\u0275viewQuery"](ho,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.itsmHkmMappingDataGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.statusColTemplate=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.visibilityGroupColTemplate=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:15,consts:[[3,"header","busy"],[1,"d-flex"],[1,"d-flex","pr-3","align-items-baseline"],[1,"text-strong"],["adaptDropdown","",1,"d-flex"],["adapt-button","","rx-id","company-dropdown","adaptDropdownToggle","","type","button","btn-type","tertiary",1,"pl-1"],["dropdownButton",""],["adaptDropdownMenu","",1,"dropdown-menu"],["type","button","class","dropdown-item",3,"text-active","active","click",4,"ngFor","ngForOf"],[1,"d-flex","align-items-baseline"],["adapt-button","","adaptDropdownToggle","","type","button","rx-id","lob-dropdown","btn-type","tertiary",1,"pl-1"],[1,"mb-3","mt-1",3,"config"],["itsmHkmMappingDataGrid",""],["statusColTemplate",""],["visibilityGroupColTemplate",""],["type","button",1,"dropdown-item",3,"click"],[1,"cm-container","container"],[1,"row"],[1,"col-sm-6","align-start"],["variant","warning","alertVariant","warning",3,"animate","showAlert",4,"ngIf"],["variant","success","alertVariant","success",3,"animate","showAlert",4,"ngIf"],["variant","warning","alertVariant","warning",3,"animate","showAlert"],["variant","success","alertVariant","success",3,"animate","showAlert"],["class","row align-start",4,"ngIf"],[1,"row","align-start"],["href","javascript:void(0)",1,"alert-link",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"label",3),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",4),o["\u0275\u0275elementStart"](8,"button",5,6),o["\u0275\u0275text"](10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",7),o["\u0275\u0275template"](12,fo,2,5,"button",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",9),o["\u0275\u0275elementStart"](14,"label",3),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"div",4),o["\u0275\u0275elementStart"](18,"button",10,6),o["\u0275\u0275text"](20),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](21,"div",7),o["\u0275\u0275template"](22,go,2,5,"button",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](23,"rx-record-grid",11,12),o["\u0275\u0275template"](25,yo,5,2,"ng-template",null,13,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275template"](27,So,3,2,"ng-template",null,14,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,9,"com.bmc.arsys.rx.client.hkm-access-mapping.header.label")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](6,11,"com.bmc.arsys.rx.client.hkm-access-mapping.company.label"),":"),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",null==t.selectedCompany?null:t.selectedCompany.name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.itsmCompanies),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"]("",o["\u0275\u0275pipeBind1"](16,13,"com.bmc.arsys.rx.client.hkm-access-mapping.line-of-business.label"),":"),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",null==t.selectedLob?null:t.selectedLob.name," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.linesOfBusiness),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptDropdownDirective,a.AdaptButtonComponent,a.AdaptDropdownToggleDirective,a.AdaptDropdownMenuDirective,n.NgForOf,d.RecordGridComponent,n.NgIf,a.AdaptBadgeComponent],pipes:[u.TranslatePipe],encapsulation:2});class nc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-hkm-access-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ic),name:"HKM Access Mapping",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}nc.\u0275fac=function(e){return new(e||nc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},nc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:nc,declarations:[ic,ec],imports:[s.AdminSettingsModule,r.FormsModule,r.ReactiveFormsModule,n.CommonModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptRxListBuilderModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptRxSelectModule,a.AdaptPopoverModule,a.AdaptTabsModule,C.AdaptTableModule,a.AdaptDropdownModule,a.AdaptBadgeModule,a.AdaptAdvancedFilteringModule,a.AdaptTreeModule,a.AdaptSubnavModule,a.AdaptBusyModule,d.RecordGridModule,a.AdaptAlertModule]}),nc.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[a.ActiveModalRef],imports:[[s.AdminSettingsModule,r.FormsModule,r.ReactiveFormsModule,n.CommonModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptRxListBuilderModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptRxSelectModule,a.AdaptPopoverModule,a.AdaptTabsModule,C.AdaptTableModule,a.AdaptDropdownModule,a.AdaptBadgeModule,a.AdaptAdvancedFilteringModule,a.AdaptTreeModule,a.AdaptSubnavModule,a.AdaptBusyModule,d.RecordGridModule,a.AdaptAlertModule]]});const oc={iframeAllowedSites:{infoMessage:"com.bmc.arsys.rx.client.admin.iframe-security.allowed-sites-info.message",name:"iframeAllowedSites",settingName:"iframeAllowedSites",title:"com.bmc.arsys.rx.client.admin.iframe-security.trusted-web-applications.title",urls:[]},trustedWebsites:{infoMessage:"com.bmc.arsys.rx.client.admin.iframe-security.trusted-sites-info.message",name:"trustedWebsites",settingName:"trustedWebsites",title:"com.bmc.arsys.rx.client.admin.iframe-security.trusted-websites.title",urls:[]}};class rc{constructor(e){this.rxSystemConfigurationService=e}getIframeSecurities(){return(0,h.forkJoin)({iframeAllowedSites:this.rxSystemConfigurationService.getConfiguration(oc.iframeAllowedSites.settingName),trustedWebsites:this.rxSystemConfigurationService.getConfiguration(oc.trustedWebsites.settingName)})}postIframeSecurities(e,t){return(0,h.forkJoin)([this.rxSystemConfigurationService.setConfiguration(oc.iframeAllowedSites.settingName,e.value),this.rxSystemConfigurationService.setConfiguration(oc.trustedWebsites.settingName,t.value)])}}rc.\u0275fac=function(e){return new(e||rc)(o["\u0275\u0275inject"](f.RxSystemConfigurationService))},rc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:rc,factory:rc.\u0275fac,providedIn:"root"});class ac extends p.BaseViewComponent{constructor(e,t,i,n){super(),this.rxIframeSecurityService=e,this.rxNotificationService=t,this.rxUrlUtilsService=i,this.translateService=n,this.hostClass="d-block col-12 col-sm-12 col-md-10 col-lg-8 col-xl-6 p-0",this.sections=(0,m.cloneDeep)(oc),this.listBuilderTexts={searchPlaceholder:this.translateService.instant("com.bmc.arsys.rx.client.admin.iframe-security.filter-or-add-urls.label"),notFound:this.translateService.instant("com.bmc.arsys.rx.client.admin.iframe-security.no-urls-added.label")},this.counter=0,this.invalidUrlMsg=this.translateService.instant("com.bmc.arsys.rx.client.admin.invalid-url.label"),this.duplicateUrlMsg=this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.duplicate-value.message"),this.generateId=()=>this.counter++,this.iframeAllowedSitesValidation=(e,t)=>this.itemValidation(e,t,!1),this.trustedWebsitesValidation=(e,t)=>this.itemValidation(e,t)}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.isDirty()}),this.busy=this.rxIframeSecurityService.getIframeSecurities().subscribe(e=>{const t=e.iframeAllowedSites,i=e.trustedWebsites;t.value&&(this.sections.iframeAllowedSites.urls=(0,m.map)(t.value.split(" "),e=>({id:this.generateId(),name:e}))),i.value&&(this.sections.trustedWebsites.urls=(0,m.map)(i.value.split(" "),e=>({id:this.generateId(),name:e})))})}isDirty(){return this.iframeAllowedSitesListBuilder.dirty||this.trustedWebsitesListBuilder.dirty}onSaveClick(){const e={id:this.sections.iframeAllowedSites.name,name:this.sections.iframeAllowedSites.name,value:(0,m.map)(this.sections.iframeAllowedSites.urls,"name").join(" ")},t={id:this.sections.trustedWebsites.name,name:this.sections.trustedWebsites.name,value:(0,m.map)(this.sections.trustedWebsites.urls,"name").join(" ")};this.rxIframeSecurityService.postIframeSecurities(e,t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.iframe-security.iframe-security-information-saved.message")),this.iframeAllowedSitesListBuilder.control.markAsPristine(),this.trustedWebsitesListBuilder.control.markAsPristine()})}itemValidation(e,t,i=!0){let n=null;return(0,m.some)(t,{name:e})?n=this.duplicateUrlMsg:this.rxUrlUtilsService.isValidUrl(e,i)||(n=this.invalidUrlMsg),n}}ac.\u0275fac=function(e){return new(e||ac)(o["\u0275\u0275directiveInject"](rc),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](g.RxUrlUtilsService),o["\u0275\u0275directiveInject"](u.TranslateService))},ac.\u0275cmp=o["\u0275\u0275defineComponent"]({type:ac,selectors:[["rx-admin-iframe-security"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](wo,7,r.NgModel),o["\u0275\u0275viewQuery"](Io,7,r.NgModel)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.iframeAllowedSitesListBuilder=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.trustedWebsitesListBuilder=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&o["\u0275\u0275classMap"](t.hostClass)},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:23,consts:[["header","Iframe security",3,"busy"],["name","iframeAllowedSitesListBuilder","hideListAreaLabel","true",1,"d-block","mb-4",3,"ngModel","label","texts","itemValidation","ngModelChange"],["iframeAllowedSitesListBuilder","ngModel"],["name","trustedWebsitesListBuilder","hideListAreaLabel","true",1,"d-block","mb-4",3,"ngModel","label","texts","itemValidation","ngModelChange"],["trustedWebsitesListBuilder","ngModel"],["rx-id","save-button","adapt-button","","btn-type","primary","size","small","type","button",1,"align-self-start",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275elementStart"](1,"h4"),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"adapt-rx-list-builder",1,2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.sections.iframeAllowedSites.urls=e}),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"h4"),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-list-builder",3,4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.sections.trustedWebsites.urls=e}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",5),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,13,t.sections.iframeAllowedSites.title)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.sections.iframeAllowedSites.urls)("label",o["\u0275\u0275pipeBind1"](6,15,t.sections.iframeAllowedSites.infoMessage))("texts",t.listBuilderTexts)("itemValidation",t.iframeAllowedSitesValidation),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](9,17,t.sections.trustedWebsites.title)),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.sections.trustedWebsites.urls)("label",o["\u0275\u0275pipeBind1"](12,19,t.sections.trustedWebsites.infoMessage))("texts",t.listBuilderTexts)("itemValidation",t.trustedWebsitesValidation),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.isDirty()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,21,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,a.AdaptRxListBuilderComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class sc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-iframe-security",componentFactory:this.componentFactoryResolver.resolveComponentFactory(ac),name:"Iframe security",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}var lc;sc.\u0275fac=function(e){return new(e||sc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},sc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:sc,declarations:[ac],imports:[a.AdaptButtonModule,a.AdaptRxListBuilderModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,u.TranslateModule]}),sc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptButtonModule,a.AdaptRxListBuilderModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,u.TranslateModule]]}),function(e){e[e.ANONYMOUS=0]="ANONYMOUS",e[e.BASIC=10]="BASIC",e[e.APIKEY=20]="APIKEY",e[e.OAUTH2=30]="OAUTH2",e[e.CUSTOM=40]="CUSTOM"}(lc||(lc={}));const cc={fieldIds:{groupName:71003,apiName:71004,organization:71001,environment:71002,path:71005,method:71006},methods:{0:"GET",10:"POST",20:"PUT",30:"DELETE"},authTypeOptions:[{id:lc.ANONYMOUS,key:"ANONYMOUS",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.anonymous.label"},{id:lc.BASIC,key:"BASIC",labelKey:"com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.basic.label"},{id:lc.APIKEY,key:"APIKEY",labelKey:"com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label"},{id:lc.OAUTH2,key:"OAUTH2",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.oauth.label"},{id:lc.CUSTOM,key:"CUSTOM",labelKey:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label"}],authTypeFields:{0:[],10:[{name:"username",labelKey:"com.bmc.arsys.rx.client.common.user-name.label",rxId:"username",isRequired:!0},{name:"credentials",labelKey:"com.bmc.arsys.rx.client.common.password.label",rxId:"password",isPassword:!0,isRequired:!0}],20:[{name:"key",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-key-name.label",rxId:"key",isRequired:!0},{name:"value",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-key-value.label",rxId:"value",isPassword:!0,isRequired:!0}],30:[{name:"authServerEndpoint",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.auth-server-endpoint.label",rxId:"authServerEndpoint",isRequired:!0},{name:"tokenPath",labelKey:"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.token-url.label",rxId:"tokenPath",isRequired:!0},{name:"username",labelKey:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"username",isRequired:!0},{name:"credentials",labelKey:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"credentials",isPassword:!0,isRequired:!0},{name:"redirectUri",labelKey:"com.bmc.arsys.rx.client.admin.web-api-connections.redirect-uri.label",rxId:"redirectUri"},{name:"scope",labelKey:"com.bmc.arsys.rx.client.admin.web-api-connections.scope.label",rxId:"scope"}]}};class dc extends l.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.formBuilder=this.injector.get(r.FormBuilder),this.rxNotificationService=this.injector.get(f.RxNotificationService),this.translateService=this.injector.get(u.TranslateService),this.rxRecordInstanceDataPageService=this.injector.get(x.RxRecordInstanceDataPageService),this.organizations=[],this.environments=[],this.groupNameList=[],this.methodTypeOptions=[],this.authTypeOptions=[],this.activeIndex=0,this.isEditMode=!1,this.authTypeFields=[],this.apiPaths=[],this.loadingState=!1,this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.destroyed$=new h.ReplaySubject(1),this.optionFormatterLabel=e=>this.translateService.instant((0,m.get)(e,"labelKey",this.defaultSelection)),this.optionFormatterName=e=>this.translateService.instant((0,m.get)(e,"name",this.defaultSelection)),this.selectedApiDefinition=this.activeModalRef.getData(),this.isEditMode=Boolean(this.selectedApiDefinition.id)}ngOnInit(){super.ngOnInit(),this.ipaasApiEditorForm=this.formBuilder.group({organization:[[],r.Validators.required],environment:[[],r.Validators.required],apiPath:[[],r.Validators.required],apiGroupName:["",[r.Validators.required,r.Validators.maxLength(254),r.Validators.pattern("^[a-zA-Z0-9 _-]+$")]],apiName:["",[r.Validators.required,r.Validators.maxLength(254),r.Validators.pattern("^[a-zA-Z0-9 _-]+$")]],requestMethod:[[],r.Validators.required],authorizationType:[[],r.Validators.required],headers:this.formBuilder.array([]),queryParameters:this.formBuilder.array([]),authTypeDetails:this.formBuilder.array([]),customAuthTypeHeaders:this.formBuilder.array([]),customAuthTypeQueryParams:this.formBuilder.array([])}),this.ipaasApiEditorForm.patchValue({apiGroupName:this.selectedApiDefinition.groupName}),this.busy=this.getOrganizationsAndEnvironments().subscribe(e=>{this.organizations=e,1===this.organizations.length&&(this.ipaasApiEditorForm.get("organization").setValue([this.organizations[0]]),this.getEnvironments(this.organizations[0]))}),this.getGroupAndApiDetails(),this.isEditMode&&(this.busy=this.getApiDefinition(this.selectedApiDefinition.id).pipe((0,v.switchMap)(e=>{var t,i;return this.initialApiDefinition=(0,m.cloneDeep)(e),this.ipaasApiEditorForm.patchValue({organization:[{name:e.organization,id:e.organizationId}],environment:[{name:e.environment,id:e.environmentId}],apiPath:[e.path],apiGroupName:e.group,apiName:e.name,requestMethod:[cc.methods[e.method]],authorizationType:[(0,m.find)(cc.authTypeOptions,t=>t.id===e.authType)]}),this.selectedOrganization={id:e.organizationId,name:e.organization},this.authTypeFields=cc.authTypeFields[e.authType],this.isCustomAuthType=e.authType===lc.CUSTOM,this.isCustomAuthType?((0,m.forEach)(e.authTypeDetails.httpHeaders,e=>this.ipaasApiEditorForm.get("customAuthTypeHeaders").push(this.customAuthTypeFormItem(e))),(0,m.forEach)(e.authTypeDetails.queryParams,e=>this.ipaasApiEditorForm.get("customAuthTypeQueryParams").push(this.customAuthTypeFormItem(e)))):this.createAuthTypeFormFields(),(0,m.forEach)((0,m.compact)(null===(t=e.headers)||void 0===t?void 0:t.split(",")),e=>{this.setApiVariables("headers",e)}),(0,m.forEach)((0,m.compact)(null===(i=e.queryParams)||void 0===i?void 0:i.split(",")),e=>{this.setApiVariables("queryParameters",e)}),this.getApiPathDefinitions({name:e.environment,id:e.environmentId})})).subscribe(e=>{this.onEditMethodAndAuthTypeUpdate(e)})),this.ipaasApiEditorForm.get("apiName").valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>{var t;!((null===(t=this.selectedApiDefinition)||void 0===t?void 0:t.apiName)===e)&&(0,m.some)(this.groupAndApiNameList,t=>t[cc.fieldIds.groupName]===(0,m.trim)(this.ipaasApiEditorForm.get("apiGroupName").value)&&(0,m.includes)(t.apis,(0,m.trim)(e)))&&this.ipaasApiEditorForm.get("apiName").setErrors({invalidApi:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.api-name-exists.error.message")}})}),this.ipaasApiEditorForm.get("apiGroupName").valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(()=>{this.ipaasApiEditorForm.get("apiName").updateValueAndValidity()})}isDirty(){return this.ipaasApiEditorForm.dirty}createFormItem(e){return this.formBuilder.group({name:[e,[r.Validators.maxLength(254),r.Validators.pattern("^[a-zA-Z0-9_-]+$")]]})}customAuthTypeFormItem(e){return this.formBuilder.group({key:[e.key,[r.Validators.required,r.Validators.maxLength(254),r.Validators.pattern("^[a-zA-Z0-9_-]+$")]],value:[e.value,[r.Validators.required,r.Validators.maxLength(254),r.Validators.pattern("^[a-zA-Z0-9_-]+$")]]})}getEnvironments(e){this.selectedOrganization=e,this.environments=e.environments||[],1===this.environments.length?(this.ipaasApiEditorForm.get("environment").setValue([this.environments[0]]),this.getApiPaths(this.environments[0])):(this.ipaasApiEditorForm.get("environment").setValue([]),this.getApiPaths())}setApiVariables(e,t){this.ipaasApiEditorForm.get(e).push(this.createFormItem(t))}getAuthTypes(e){var t,i,n,o;this.ipaasApiEditorForm.get("authorizationType").setValue([]),this.authTypeFieldDetails=null===(t=this.apiPathDetails[this.selectedApiPath][e])||void 0===t?void 0:t.authTypes,this.authTypeOptions=(0,m.map)(this.authTypeFieldDetails,e=>(0,m.find)(cc.authTypeOptions,t=>t.id===lc[(0,m.keys)(e)[0]])),1===(null===(i=this.authTypeOptions)||void 0===i?void 0:i.length)?(this.ipaasApiEditorForm.get("authorizationType").setValue([this.authTypeOptions[0]]),this.getAuthTypeFields(this.authTypeOptions[0])):(this.authTypeFields=cc.authTypeFields[0],this.createAuthTypeFormFields()),(0,m.forEach)(null===(n=this.apiPathDetails[this.selectedApiPath][e])||void 0===n?void 0:n.headers,e=>{this.setApiVariables("headers",e)}),(0,m.forEach)(null===(o=this.apiPathDetails[this.selectedApiPath][e])||void 0===o?void 0:o.queryParams,e=>{this.setApiVariables("queryParameters",e)})}onEditMethodAndAuthTypeUpdate(e){var t;this.environments=this.getEnvironmentList(),this.apiPaths=(0,m.keys)(e),this.apiPathDetails=e,this.selectedApiPath=this.initialApiDefinition.path,this.methodTypeOptions=(0,m.keys)(e[this.initialApiDefinition.path]),this.authTypeFieldDetails=null===(t=this.apiPathDetails[this.selectedApiPath][cc.methods[this.initialApiDefinition.method]])||void 0===t?void 0:t.authTypes,this.authTypeOptions=(0,m.map)(this.authTypeFieldDetails,e=>(0,m.find)(cc.authTypeOptions,{id:lc[(0,m.keys)(e)[0]]}))}getApiPaths(e){this.ipaasApiEditorForm.get("apiPath").setValue([]),this.apiPaths=[],this.resetFormFields(),e&&(this.loadingState=!0,this.getApiPathDefinitions(e).subscribe(e=>{this.apiPathDetails=e,this.apiPaths=(0,m.keys)(e),1===this.apiPaths.length&&(this.ipaasApiEditorForm.get("apiPath").setValue([this.apiPaths[0]]),this.getApiMethods(this.apiPaths[0])),this.loadingState=!1},()=>{this.loadingState=!1}))}getApiMethods(e){var t;this.resetFormFields(),this.selectedApiPath=e,this.methodTypeOptions=(0,m.keys)(this.apiPathDetails[this.selectedApiPath]),1===(null===(t=this.methodTypeOptions)||void 0===t?void 0:t.length)&&(this.ipaasApiEditorForm.get("requestMethod").setValue([this.methodTypeOptions[0]]),this.getAuthTypes(this.methodTypeOptions[0]))}getGroupAndApiDetails(){const e={startIndex:0,pageSize:-1,recorddefinition:this.selectedApiDefinition.recordDefinitionName,propertySelection:[cc.fieldIds.groupName,cc.fieldIds.apiName,x.RX_RECORD_DEFINITION.coreFieldIds.id]};this.rxRecordInstanceDataPageService.post({params:e}).pipe((0,v.map)(e=>({data:(0,m.map)((0,m.groupBy)(e.data,cc.fieldIds.groupName),(e,t)=>({[cc.fieldIds.groupName]:t,apis:(0,m.map)(e,e=>e[cc.fieldIds.apiName])}))}))).subscribe(e=>{this.groupAndApiNameList=e.data,this.groupNameList=(0,m.sortBy)((0,m.map)(this.groupAndApiNameList,e=>e[cc.fieldIds.groupName]))})}getAuthTypeFields(e){var t,i,n,o;const r=(0,m.find)(this.authTypeFieldDetails,e.key)[e.key];if(this.isCustomAuthType=e.id===lc.CUSTOM,this.isCustomAuthType){const e=(null===(i=null===(t=r.headers)||void 0===t?void 0:t.replace(/[\[\] ]/g,""))||void 0===i?void 0:i.split(","))||[],a=(null===(o=null===(n=r.queryParams)||void 0===n?void 0:n.replace(/[\[\] ]/g,""))||void 0===o?void 0:o.split(","))||[];this.ipaasApiEditorForm.get("customAuthTypeHeaders").clear(),this.ipaasApiEditorForm.get("customAuthTypeQueryParams").clear(),(0,m.forEach)(e,e=>this.ipaasApiEditorForm.get("customAuthTypeHeaders").push(this.customAuthTypeFormItem({key:e,value:""}))),(0,m.forEach)(a,e=>this.ipaasApiEditorForm.get("customAuthTypeQueryParams").push(this.customAuthTypeFormItem({key:e,value:""})))}else this.authTypeFields=cc.authTypeFields[e.id],this.createAuthTypeFormFields(r)}createAuthTypeFormFields(e){const t=this.authTypeFields.reduce((e,t)=>Object.assign(e,{[t.name]:""}),{}),i=this.ipaasApiEditorForm.get("authTypeDetails");this.isCustomAuthType=!1,(null==i?void 0:i.length)&&i.removeAt(0),i.push(this.formBuilder.group(t)),(e=this.initialApiDefinition&&(0,m.merge)(this.initialApiDefinition.authTypeDetails,e)||e)&&this.ipaasApiEditorForm.controls.authTypeDetails.patchValue([e])}tabChanged({index:e}){this.activeIndex=e}addHeader(){this.headers=this.ipaasApiEditorForm.get("headers"),this.headers.push(this.createFormItem(""))}removeHeader(e){this.headers=this.ipaasApiEditorForm.get("headers"),this.headers.removeAt(e),this.ipaasApiEditorForm.markAsDirty()}addQueryParameter(){this.queryParameters=this.ipaasApiEditorForm.get("queryParameters"),this.queryParameters.push(this.createFormItem(""))}removeQueryParameter(e){this.queryParameters=this.ipaasApiEditorForm.get("queryParameters"),this.queryParameters.removeAt(e),this.ipaasApiEditorForm.markAsDirty()}addCustomAuthTypeHeader(){this.ipaasApiEditorForm.get("customAuthTypeHeaders").push(this.customAuthTypeFormItem({key:"",value:""}))}removeCustomAuthTypeHeader(e){this.ipaasApiEditorForm.get("customAuthTypeHeaders").removeAt(e),this.ipaasApiEditorForm.markAsDirty()}addCustomAuthTypeQueryParam(){this.ipaasApiEditorForm.get("customAuthTypeQueryParams").push(this.customAuthTypeFormItem({key:"",value:""}))}removeCustomAuthTypeQueryParam(e){this.ipaasApiEditorForm.get("customAuthTypeQueryParams").removeAt(e),this.ipaasApiEditorForm.markAsDirty()}isSaveButtonDisabled(){return this.ipaasApiEditorForm.pristine||this.ipaasApiEditorForm.invalid}save(){let e;const t=this.ipaasApiEditorForm.getRawValue(),i=(0,m.map)(t.headers,e=>e.name),n=(0,m.map)(t.queryParameters,e=>e.name);this.isCustomAuthType&&(t.authTypeDetails=[{httpHeaders:t.customAuthTypeHeaders,queryParams:t.customAuthTypeQueryParams}]);const o={organization:t.organization[0].name,environment:t.environment[0].name,group:t.apiGroupName,name:t.apiName,path:t.apiPath[0],method:(0,m.findKey)(cc.methods,e=>e===t.requestMethod[0]),authType:t.authorizationType[0].id,queryParams:(0,m.pull)(n,"").toString(),headers:(0,m.pull)(i,"").toString(),description:`${t.apiGroupName}: ${t.apiName}`,authTypeDetails:t.authTypeDetails[0]||{}};this.isEditMode?(o.id=this.initialApiDefinition.id,e=this.editApiDefinition(o,t)):e=this.createApiDefinition(o,t),this.busy=e.subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.save.success.message")),this.activeModalRef.close(e)})}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}resetFormFields(){this.methodTypeOptions=[],this.ipaasApiEditorForm.get("requestMethod").setValue([]),this.authTypeOptions=[],this.ipaasApiEditorForm.get("authorizationType").setValue([]),this.authTypeFields=cc.authTypeFields[0],this.createAuthTypeFormFields()}}dc.\u0275fac=function(e){return new(e||dc)(o["\u0275\u0275inject"](a.ActiveModalRef),o["\u0275\u0275inject"](o.Injector))},dc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:dc,factory:dc.\u0275fac});class pc{constructor(e){this.httpClient=e,this.apiDefinitionUrl="/api/com.bmc.dsm.ipaas-jitterbit/rx/application/ipaas/jitterbit"}deleteApiDefinition(e){return this.httpClient.delete(`${this.apiDefinitionUrl}/apidefinition/${e}`)}createApiDefinition(e){return this.httpClient.post(`${this.apiDefinitionUrl}/apidefinition`,e)}getApiDefinition(e){return this.httpClient.get(`${this.apiDefinitionUrl}/apidefinition/${e}`)}editApiDefinition(e){return this.httpClient.put(`${this.apiDefinitionUrl}/apidefinition/${e.id}`,e)}getOrganizationsAndEnvironments(){return this.httpClient.get(`${this.apiDefinitionUrl}/organization-info`)}getApiPathDefinitions(e,t){return this.httpClient.get(`${this.apiDefinitionUrl}/api-specs/${encodeURIComponent(e)}/${encodeURIComponent(t)}`)}}pc.\u0275fac=function(e){return new(e||pc)(o["\u0275\u0275inject"](b.HttpClient))},pc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:pc,factory:pc.\u0275fac,providedIn:"root"});class uc extends dc{constructor(e,t,i){super(t,i),this.rxJitterbitApisService=e,this.activeModalRef=t,this.injector=i}ngOnInit(){super.ngOnInit()}getOrganizationsAndEnvironments(){return this.rxJitterbitApisService.getOrganizationsAndEnvironments().pipe((0,v.map)(e=>(0,m.map)(e,(e,t)=>({name:t,environments:(0,m.map)(e,e=>({name:e}))}))))}getApiPathDefinitions(e){return this.rxJitterbitApisService.getApiPathDefinitions(this.selectedOrganization.name,e.name)}getApiDefinition(e){return this.rxJitterbitApisService.getApiDefinition(e)}editApiDefinition(e){return this.rxJitterbitApisService.editApiDefinition(e)}createApiDefinition(e){return this.rxJitterbitApisService.createApiDefinition(e)}getEnvironmentList(){var e;return(null===(e=this.organizations.find(e=>e.name===this.selectedOrganization.name))||void 0===e?void 0:e.environments)||[]}}uc.\u0275fac=function(e){return new(e||uc)(o["\u0275\u0275directiveInject"](pc),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},uc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:uc,selectors:[["rx-jitterbit-api-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:89,consts:[[1,"modal-body","api-editor-modal-body"],[3,"options"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"mt-1","mb-3"],["formControlName","organization","rx-id","organization",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],["formControlName","environment","rx-id","environment",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],["formControlName","apiPath",3,"label","options","enableFilter","loadingState","tooltip","onSelectionChange"],["formControlName","apiGroupName","rx-id","api-group-name",1,"form-group","d-block",3,"options","label","customOptionTitle","customOptionOnTop","tooltip"],["formControlName","apiName","rx-id","api-name",1,"form-group","d-block",3,"label","tooltip"],["formControlName","requestMethod","rx-id","request-method",1,"form-group","d-block",3,"options","label","onSelectionChange"],["formControlName","authorizationType","rx-id","authorization-type",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],[4,"ngIf"],[1,"my-1"],[3,"type","tab-active","tab-active-changed"],[3,"adapt-tab-title"],["adapt-button","","type","button","btn-type","tertiary","rx-id","add-button",1,"d-icon-plus_circle","px-0","align-self-start",3,"click"],["formArrayName","headers",4,"ngFor","ngForOf"],["formArrayName","queryParameters",4,"ngFor","ngForOf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"],["formArrayName","authTypeDetails",4,"ngFor","ngForOf"],["formArrayName","authTypeDetails"],[3,"formGroupName"],["class","form-group d-block",3,"label","isPassword","formControlName","required",4,"ngFor","ngForOf"],[1,"form-group","d-block",3,"label","isPassword","formControlName","required"],["adapt-button","","type","button","btn-type","tertiary","rx-id","add-button",1,"d-icon-plus_circle","px-0","d-block",3,"click"],["formArrayName","customAuthTypeHeaders",4,"ngFor","ngForOf"],["formArrayName","customAuthTypeQueryParams",4,"ngFor","ngForOf"],["formArrayName","customAuthTypeHeaders"],[1,"card","form-group"],[1,"card-block"],[1,"d-flex","justify-content-between"],["showRequiredLabel","true",3,"label"],[1,"d-icon-cross_adapt","form-group","alert-link",3,"click"],["formControlName","key",1,"d-block","form-group",3,"placeholder"],["formControlName","value",1,"d-block",3,"placeholder"],["formArrayName","customAuthTypeQueryParams"],["formArrayName","headers"],[1,"d-flex",3,"formGroupName"],["formControlName","name",1,"d-block","form-group","pr-2","flex-fill"],["adapt-button","","btn-type","tertiary","type","button",1,"d-icon-minus_circle","text-danger","form-group","px-0",3,"click"],["formArrayName","queryParameters"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-busy-indicator",1),o["\u0275\u0275elementStart"](2,"form",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"h6",5),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-select",6),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getEnvironments(e.options[0])}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-select",7),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getApiPaths(e.options[0])}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"adapt-rx-select",8),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getApiMethods(e.options[0])}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",4),o["\u0275\u0275elementStart"](16,"h6",5),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](19,"adapt-rx-select-editable",9),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275element"](23,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementStart"](26,"adapt-rx-select",11),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getAuthTypes(e.options[0])}),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"adapt-rx-select",12),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getAuthTypeFields(e.options[0])}),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](30,Ro,2,1,"ng-container",13),o["\u0275\u0275template"](31,Fo,9,8,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",4),o["\u0275\u0275elementStart"](33,"h6",14),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"adapt-tabset",15),o["\u0275\u0275listener"]("tab-active-changed",function(e){return t.tabChanged(e)}),o["\u0275\u0275elementStart"](37,"adapt-tab-panel",16),o["\u0275\u0275pipe"](38,"translate"),o["\u0275\u0275elementStart"](39,"button",17),o["\u0275\u0275listener"]("click",function(){return t.addHeader()}),o["\u0275\u0275text"](40),o["\u0275\u0275pipe"](41,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](42,Eo,4,1,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"adapt-tab-panel",16),o["\u0275\u0275pipe"](44,"translate"),o["\u0275\u0275elementStart"](45,"button",17),o["\u0275\u0275listener"]("click",function(){return t.addQueryParameter()}),o["\u0275\u0275text"](46),o["\u0275\u0275pipe"](47,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](48,Mo,4,1,"div",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",20),o["\u0275\u0275elementStart"](50,"button",21),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](51),o["\u0275\u0275pipe"](52,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"button",22),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](54),o["\u0275\u0275pipe"](55,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](81,Ae,t.busy)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.ipaasApiEditorForm),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,41,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,43,"com.bmc.arsys.rx.client.approval.configuration.org")),o["\u0275\u0275property"]("options",t.organizations)("optionFormatter",t.optionFormatterName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,45,"com.bmc.arsys.rx.client.admin.jitterbit-apis.environment.label")),o["\u0275\u0275property"]("options",t.environments)("optionFormatter",t.optionFormatterName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,47,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label")),o["\u0275\u0275property"]("options",t.apiPaths)("enableFilter",!0)("loadingState",t.loadingState)("tooltip",o["\u0275\u0275pureFunction1"](83,ci,o["\u0275\u0275pipeBind1"](14,49,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-paths.tooltip"))),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,51,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-properties.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,53,"com.bmc.arsys.rx.client.admin.ipaas-apis.api-group-name.label")),o["\u0275\u0275propertyInterpolate"]("customOptionTitle",o["\u0275\u0275pipeBind1"](21,55,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-new.label")),o["\u0275\u0275property"]("options",t.groupNameList)("customOptionOnTop",!0)("tooltip",o["\u0275\u0275pureFunction1"](85,ci,o["\u0275\u0275pipeBind1"](22,57,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-group-name.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](24,59,"com.bmc.arsys.rx.client.admin.jitterbit-apis.api-name.label")),o["\u0275\u0275property"]("tooltip",t.isEditMode?o["\u0275\u0275pureFunction1"](87,ci,o["\u0275\u0275pipeBind1"](25,61,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.edit-api.api-name.tooltip")):null),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](27,63,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.request-method.label")),o["\u0275\u0275property"]("options",t.methodTypeOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](29,65,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.authorization-type.label")),o["\u0275\u0275property"]("options",t.authTypeOptions)("optionFormatter",t.optionFormatterLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.isCustomAuthType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isCustomAuthType),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](35,67,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-variables.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("type","pills")("tab-active",t.activeIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](38,69,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.headers.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](41,71,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-header.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.ipaasApiEditorForm.get("headers").controls),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](44,73,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.query-parameters.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](47,75,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-query-parameter.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.ipaasApiEditorForm.get("queryParameters").controls),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](52,77,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](55,79,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[l.RxBusyIndicatorComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxSelectEditableComponent,a.AdaptRxTextfieldComponent,n.NgIf,a.AdaptTabsComponent,a.AdaptTabsPanelComponent,a.AdaptButtonComponent,n.NgForOf,r.FormArrayName,r.FormGroupName,r.RequiredValidator,a.AdaptRxControlLabelComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[_ngcontent-%COMP%], adapt-rx-select-editable[_ngcontent-%COMP%], adapt-rx-textfield[_ngcontent-%COMP%]{max-width:400px}.api-editor-modal-body[_ngcontent-%COMP%]{height:645px}.modal-body[_ngcontent-%COMP%]{overflow-y:auto}']});class mc{constructor(e){this.httpClient=e}renameApiGroup(e,t,i){return this.httpClient.post(f.RX_RESOURCE_URLS.command,{resourceType:e,oldGroup:t,newGroup:i})}}mc.\u0275fac=function(e){return new(e||mc)(o["\u0275\u0275inject"](b.HttpClient))},mc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:mc,factory:mc.\u0275fac,providedIn:"root"});class hc extends l.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t}ngOnInit(){super.ngOnInit(),this.groupName=this.activeModalRef.getData().groupName,this.groupNames=(0,m.pull)(this.activeModalRef.getData().groupNames,this.groupName),this.oldGroupName=this.groupName}isDirty(){return this.groupNameForm.dirty}isSaveButtonDisabled(){return this.groupNameForm.pristine||this.groupNameForm.invalid||this.oldGroupName===this.groupName}saveGroupName(){this.activeModalRef.close(this.groupName)}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}}hc.\u0275fac=function(e){return new(e||hc)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},hc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:hc,selectors:[["rx-group-editor"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Oo,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.groupNameForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:12,vars:17,consts:[["groupNameForm","ngForm"],["name","group-name","rx-id","group-name","pattern","^[a-zA-Z0-9 _-]+$","maxlength","254","required","true",1,"d-block","form-group","m-4",3,"label","ngModel","rxUnique","ngModelChange"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",null,0),o["\u0275\u0275elementStart"](2,"adapt-rx-textfield",1),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.groupName=e}),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275elementStart"](6,"button",3),o["\u0275\u0275listener"]("click",function(){return t.saveGroupName()}),o["\u0275\u0275text"](7),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"button",4),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,6,"com.bmc.arsys.rx.client.admin.ipaas-apis.api-group-name.label")),o["\u0275\u0275property"]("ngModel",t.groupName)("rxUnique",o["\u0275\u0275pureFunction2"](14,ko,o["\u0275\u0275pipeBind1"](4,8,"com.bmc.arsys.rx.client.admin.ipaas-api-editor.group-name-exists.error.message"),t.groupNames)),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,12,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxTextfieldComponent,r.PatternValidator,r.MaxLengthValidator,r.RequiredValidator,r.NgControlStatus,r.NgModel,g.RxUniqueValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Ci]});class fc{constructor(e,t,i,n,r,a){this.translateService=e,this.rxIpaasBaseApisService=t,this.rxNotificationService=i,this.rxModalService=n,this.rxViewActionUtilsService=r,this.rxRecordInstanceDataPageService=a,this.createApi=new o.EventEmitter,this.editApi=new o.EventEmitter,this.deleteApis=new o.EventEmitter,this.recordDefinition={fieldDefinitions:[{id:cc.fieldIds.groupName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cc.fieldIds.apiName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cc.fieldIds.organization,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cc.fieldIds.environment,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cc.fieldIds.path,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:cc.fieldIds.method,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.selection,optionNamesById:cc.methods}]}}ngOnInit(){this.gridConfig$=(0,h.of)({getData:this.getData.bind(this),recordDefinitionName:this.ipaasApisConfig.recordDefinitionName,columns:this.getColumns(),actionButtons:this.getActionButtons(),getRecordDefinition:()=>(0,h.of)(this.recordDefinition),styles:"flex-fill"})}getData(e){const t=Object.assign(Object.assign({},e),{propertySelection:[x.RX_RECORD_DEFINITION.coreFieldIds.id,cc.fieldIds.groupName,cc.fieldIds.apiName,cc.fieldIds.organization,cc.fieldIds.environment,cc.fieldIds.path,cc.fieldIds.method]});return delete t.searchText,this.rxRecordInstanceDataPageService.post({params:t})}getColumns(){return[{fieldId:String(cc.fieldIds.groupName),index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.jitterbit-apis.group-name.label"),clickable:!0,actions:[{name:(e,t)=>this.renameGroup(t)}],sortable:{direction:d.ColumnSortDirection.Asc,priority:0}},{fieldId:String(cc.fieldIds.apiName),index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.jitterbit-apis.api-name.label"),clickable:!0,actions:[{name:(e,t)=>this.openEditApiDialog(t)}],sortable:{direction:d.ColumnSortDirection.Asc,priority:1}},{fieldId:String(cc.fieldIds.organization),index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.approval.configuration.org")},{fieldId:String(cc.fieldIds.environment),index:3,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.jitterbit-apis.environment.label")},{fieldId:String(cc.fieldIds.path),index:4,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.jitterbit-apis.path.label")},{fieldId:String(cc.fieldIds.method),index:5,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.jitterbit-apis.method.label")}]}getActionButtons(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",iconCls:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.confirmation.message")}).then(e=>{if(e){const e=(0,m.castArray)(this.ipaasApisGrid.api.getSelectedRows()),t=this.rxViewActionUtilsService.extractRecordIds(e);this.deleteApis.emit(t)}})}}]},{label:this.translateService.instant("com.bmc.arsys.rx.client.common.edit.label"),style:"tertiary",icon:"pencil",disabled:()=>1!==this.ipaasApisGrid.api.getSelectedRowCount(),actions:[{name:()=>this.openEditApiDialog(this.ipaasApisGrid.api.getFirstSelectedRow())}]}]}renameGroup(e){this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-apis.rename-api-group.label"),content:hc,size:S.OpenViewActionModalSize.Xsmall,data:{groupName:e[cc.fieldIds.groupName],groupNames:(0,m.map)(this.ipaasApisGrid.adaptTableConfig.data,cc.fieldIds.groupName)}}).then(t=>{this.rxIpaasBaseApisService.renameApiGroup(this.ipaasApisConfig.resourceType,e[cc.fieldIds.groupName],t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-apis.rename-group-save.success.message")),this.refreshIpaasGrid()})}).catch(h.noop)}openAddApiDialog(){const e=this.ipaasApisGrid.api.getFirstSelectedRow();this.createApi.emit({groupName:(0,m.get)(e,cc.fieldIds.groupName,""),recordDefinitionName:this.ipaasApisConfig.recordDefinitionName})}openEditApiDialog(e){this.editApi.emit({id:e[x.RX_RECORD_DEFINITION.coreFieldIds.id],apiName:e[cc.fieldIds.apiName],groupName:e[cc.fieldIds.groupName],recordDefinitionName:this.ipaasApisConfig.recordDefinitionName})}refreshIpaasGrid(){this.ipaasApisGrid.api.refresh().subscribe()}}fc.\u0275fac=function(e){return new(e||fc)(o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](mc),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](S.RxViewActionUtilsService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService))},fc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:fc,selectors:[["rx-ipaas-base-apis"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](jo,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ipaasApisGrid=e.first)}},inputs:{ipaasApisConfig:"ipaasApisConfig"},outputs:{createApi:"createApi",editApi:"editApi",deleteApis:"deleteApis"},decls:8,vars:7,consts:[[3,"header"],[1,"d-flex","ml-2"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["rx-id","ipaas-apis-grid",3,"config"],["ipaasApisGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"button",2),o["\u0275\u0275listener"]("click",function(){return t.openAddApiDialog()}),o["\u0275\u0275text"](4),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](6,"rx-record-grid",3,4),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,t.ipaasApisConfig.titleKey)),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](5,5,"com.bmc.arsys.rx.client.common.add.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class gc{constructor(e,t,i,n){this.rxModalService=e,this.rxNotificationService=t,this.translateService=i,this.rxJitterbitApisService=n,this.jitterbitApisConfig={titleKey:"com.bmc.arsys.rx.client.admin.jitterbit-apis.header.title",recordDefinitionName:"com.bmc.dsm.ipaas-jitterbit:iPaaS Jitterbit API Definition",resourceType:"com.bmc.dsm.ipaas.jitterbit.command.RenameJitterbitApiGroupCommand"}}openJitterbitCreateApiEditor(e){return this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.add-api.label"),content:uc,data:e}).then(e=>{e&&this.ipaasBaseApisComponent.refreshIpaasGrid()}).catch(h.noop)}openJitterbitEditApiEditor(e){return this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.edit-api.label"),content:uc,data:e}).then(e=>{e&&this.ipaasBaseApisComponent.refreshIpaasGrid()}).catch(h.noop)}deleteJitterbitApis(e){this.deleteApiDefinitions(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.success.message")),this.ipaasBaseApisComponent.refreshIpaasGrid()})}deleteApiDefinitions(e){if(e.length){const t=e.map(e=>this.rxJitterbitApisService.deleteApiDefinition(e));return(0,h.forkJoin)(t)}return h.EMPTY}}gc.\u0275fac=function(e){return new(e||gc)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](pc))},gc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:gc,selectors:[["rx-admin-jitterbit-apis"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Po,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ipaasBaseApisComponent=e.first)}},decls:2,vars:1,consts:[[3,"ipaasApisConfig","createApi","editApi","deleteApis"],["ipaasBaseApisConfiguration",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-ipaas-base-apis",0,1),o["\u0275\u0275listener"]("createApi",function(e){return t.openJitterbitCreateApiEditor(e)})("editApi",function(e){return t.openJitterbitEditApiEditor(e)})("deleteApis",function(e){return t.deleteJitterbitApis(e)}),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("ipaasApisConfig",t.jitterbitApisConfig)},directives:[fc],encapsulation:2});class vc{}vc.\u0275fac=function(e){return new(e||vc)},vc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:vc,declarations:[fc,hc],imports:[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,r.FormsModule,g.RxUniqueValidatorModule],exports:[fc]}),vc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,r.FormsModule,g.RxUniqueValidatorModule]]});class xc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-jitterbit-apis",componentFactory:this.componentFactoryResolver.resolveComponentFactory(gc),name:"iPaaS Jitterbit APIs",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}xc.\u0275fac=function(e){return new(e||xc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},xc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:xc,declarations:[gc,uc],imports:[vc,l.RxBusyIndicatorModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,a.AdaptRxSelectEditableModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,u.TranslateModule,a.AdaptButtonModule,n.CommonModule]}),xc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[vc,l.RxBusyIndicatorModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,a.AdaptRxSelectEditableModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,u.TranslateModule,a.AdaptButtonModule,n.CommonModule]]});class yc{constructor(e,t,i,n){this.rxAdminSettingsService=e,this.rxCognitiveServiceService=t,this.rxNotificationService=i,this.translateService=n,this.connectionTestStatus=l.ConnectionTestStatus.Invalid}ngAfterContentInit(){this.busy=this.getComponentSettings().pipe((0,v.tap)(e=>{this.isNewIpaasConfiguration=!(0,m.get)(e,"values",[]).length,this.isNewIpaasConfiguration?this.componentSettings=(0,m.map)((0,m.values)(this.ipaasConfig.settingNames),e=>({assigneeGroupPermission:null,componentName:this.ipaasConfig.componentName,settingId:null,settingName:e,settingValue:null,ownerKeyValue1:null})):(this.componentSettings=e.values,this.updateConfigFormValues())})).subscribe(),this.childFormGroup.valueChanges.pipe((0,v.tap)(()=>{this.connectionTestStatus=this.childFormGroup.pristine||this.childFormGroup.invalid?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown})).subscribe()}updateConfigFormValues(){const e={};(0,m.forEach)(this.ipaasConfig.controlsConfig,(t,i)=>e[i]=this.getValueFromSetting(i)),(0,m.isFunction)(this.ipaasConfig.getFormValues)?this.childFormGroup.patchValue(this.ipaasConfig.getFormValues(e)):this.childFormGroup.patchValue(e)}onTestConnection(){this.rxCognitiveServiceService.testConnection(Object.assign({resourceType:this.ipaasConfig.resourceType},this.ipaasConfig.getPayload(this.childFormGroup.getRawValue()))).pipe((0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(()=>{this.connectionTestStatus=l.ConnectionTestStatus.Passed})}save(){if(this.childFormGroup.valid&&this.connectionTestStatus===l.ConnectionTestStatus.Passed){let e;const t=this.ipaasConfig.getPayload(this.childFormGroup.getRawValue());(0,m.forEach)(t,(e,t)=>this.setSettingValue(t,e)),e=this.isNewIpaasConfiguration?this.rxAdminSettingsService.createComponentSettings(this.ipaasConfig.componentName,this.componentSettings,{"default-bundle-scope":this.ipaasConfig.bundleScope}):this.rxAdminSettingsService.updateComponentSettings(`${this.ipaasConfig.componentName}/${this.componentSettings[0].ownerKeyValue1}`,this.componentSettings,{"default-bundle-scope":this.ipaasConfig.bundleScope}),this.busy=e.pipe((0,v.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant(this.ipaasConfig.saveMessageKey)),this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.childFormGroup.markAsPristine()}),(0,v.switchMap)(()=>this.getComponentSettings()),(0,v.tap)(e=>{this.isNewIpaasConfiguration=!1,this.componentSettings=e.values,this.updateConfigFormValues()})).subscribe()}}isSaveButtonDisabled(){return this.childFormGroup.pristine||this.childFormGroup.invalid||this.connectionTestStatus!==l.ConnectionTestStatus.Passed}getComponentSettings(){return this.rxAdminSettingsService.getComponentSettings(this.ipaasConfig.componentName,{"default-bundle-scope":this.ipaasConfig.bundleScope})}setSettingValue(e,t){(0,m.find)(this.componentSettings,{settingName:e}).settingValue=t}getValueFromSetting(e){return(0,m.get)((0,m.find)(this.componentSettings,{settingName:e}),"settingValue",null)}}yc.\u0275fac=function(e){return new(e||yc)(o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService))},yc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:yc,selectors:[["rx-ipaas-base-configuration"]],inputs:{ipaasConfig:"ipaasConfig",childFormGroup:"childFormGroup"},ngContentSelectors:["*"],decls:8,vars:9,consts:[[3,"header","busy"],["buttonType","secondary","rx-id","ipaas-configuration-test-button",1,"d-block","form-group",3,"status","testConnection"],[1,"align-items-baseline"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mt-3",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275projection"](2),o["\u0275\u0275elementStart"](3,"rx-connection-tester",1),o["\u0275\u0275listener"]("testConnection",function(){return t.onTestConnection()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"button",3),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("header",o["\u0275\u0275pipeBind1"](1,5,t.ipaasConfig.titleKey))("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status",t.connectionTestStatus),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,7,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,l.RxConnectionTesterComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class bc{}bc.\u0275fac=function(e){return new(e||bc)},bc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:bc,declarations:[yc],imports:[s.AdminSettingsModule,a.AdaptButtonModule,n.CommonModule,u.TranslateModule,l.RxConnectionTesterModule,r.ReactiveFormsModule],exports:[yc]}),bc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptButtonModule,n.CommonModule,u.TranslateModule,l.RxConnectionTesterModule,r.ReactiveFormsModule]]});class Cc extends p.BaseViewComponent{constructor(e){super(),this.formBuilder=e,this.jitterbitConfig={componentName:"iPaaS Jitterbit Configuration",resourceType:"com.bmc.dsm.ipaas.jitterbit.command.PingJitterbitCommand",bundleScope:f.RX_APPLICATION.ipaasJitterbitBundleId,titleKey:"com.bmc.arsys.rx.client.admin.jitterbit-configuration.header.title",saveMessageKey:"com.bmc.arsys.rx.client.admin.jitterbit-configuration.saved.message",controlsConfig:{url:"",username:"",password:""},settingNames:{url:"url",userName:"username",password:"password"},getPayload:e=>({url:e.url,username:e.username,password:e.password})}}ngOnInit(){this.jitterBitConfigurationForm=this.formBuilder.group(this.jitterbitConfig.controlsConfig),this.notifyPropertyChanged("api",{isDirty:()=>this.ipaasBaseConfigurationComponent.childFormGroup.dirty})}}Cc.\u0275fac=function(e){return new(e||Cc)(o["\u0275\u0275directiveInject"](r.FormBuilder))},Cc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Cc,selectors:[["rx-admin-jitterbit-configuration"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](yc,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ipaasBaseConfigurationComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:8,vars:13,consts:[[3,"ipaasConfig","childFormGroup"],[3,"formGroup"],["rx-id","endpoint-url","formControlName","url","required","true",1,"d-block","form-group",3,"label"],["rx-id","user-name","formControlName","username","required","true",1,"d-block","form-group",3,"label"],["rx-id","password","formControlName","password","required","true",1,"d-block","form-group",3,"label","isPassword"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-ipaas-base-configuration",0),o["\u0275\u0275elementContainerStart"](1,1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275element"](6,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("ipaasConfig",t.jitterbitConfig)("childFormGroup",t.jitterBitConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.jitterBitConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,7,"com.bmc.arsys.rx.client.admin.jitterbit-configuration.end-point-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,9,"com.bmc.arsys.rx.client.common.user-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,11,"com.bmc.arsys.rx.client.common.password.label")),o["\u0275\u0275property"]("isPassword",!0))},directives:[yc,r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator],pipes:[u.TranslatePipe],styles:[Ci]});class Sc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-jitterbit-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Cc),name:"iPaaS Jitterbit configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Sc.\u0275fac=function(e){return new(e||Sc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Sc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Sc,declarations:[Cc],imports:[n.CommonModule,a.AdaptRxTextfieldModule,bc,r.ReactiveFormsModule,u.TranslateModule]}),Sc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,a.AdaptRxTextfieldModule,bc,r.ReactiveFormsModule,u.TranslateModule]]});class wc{constructor(e){this.httpClient=e,this.apiDefinitionUrl="/api/com.bmc.dsm.ipaas-mulesoft/rx/application/ipaas/mulesoft"}deleteApiDefinition(e){return this.httpClient.delete(`${this.apiDefinitionUrl}/apidefinition/${e}`)}createApiDefinition(e){return this.httpClient.post(`${this.apiDefinitionUrl}/apidefinition`,e)}getApiDefinition(e){return this.httpClient.get(`${this.apiDefinitionUrl}/apidefinition/${e}`)}editApiDefinition(e){return this.httpClient.put(`${this.apiDefinitionUrl}/apidefinition/${e.id}`,e)}getOrganizationsAndEnvironments(){return this.httpClient.get(`${this.apiDefinitionUrl}/organization-info`)}getApiPathDefinitions(e,t){return this.httpClient.get(`${this.apiDefinitionUrl}/api-specs/${encodeURIComponent(e)}/${encodeURIComponent(t)}`)}}wc.\u0275fac=function(e){return new(e||wc)(o["\u0275\u0275inject"](b.HttpClient))},wc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:wc,factory:wc.\u0275fac,providedIn:"root"});class Ic extends dc{constructor(e,t,i){super(t,i),this.rxMulesoftApisService=e,this.activeModalRef=t,this.injector=i}ngOnInit(){super.ngOnInit()}getOrganizationsAndEnvironments(){return this.rxMulesoftApisService.getOrganizationsAndEnvironments()}getApiPathDefinitions(e){return this.rxMulesoftApisService.getApiPathDefinitions(this.selectedOrganization.id,e.id)}getApiDefinition(e){return this.rxMulesoftApisService.getApiDefinition(e)}editApiDefinition(e,t){return e.organizationId=t.organization[0].id,e.environmentId=t.environment[0].id,this.rxMulesoftApisService.editApiDefinition(e)}createApiDefinition(e,t){return e.organizationId=t.organization[0].id,e.environmentId=t.environment[0].id,this.rxMulesoftApisService.createApiDefinition(e)}getEnvironmentList(){var e;return(null===(e=this.organizations.find(e=>e.id===this.selectedOrganization.id))||void 0===e?void 0:e.environments)||[]}}Ic.\u0275fac=function(e){return new(e||Ic)(o["\u0275\u0275directiveInject"](wc),o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](o.Injector))},Ic.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ic,selectors:[["rx-mulesoft-api-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:56,vars:89,consts:[[1,"modal-body","api-editor-modal-body"],[3,"options"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"mt-1","mb-3"],["formControlName","organization","rx-id","organization",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],["formControlName","environment","rx-id","environment",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],["formControlName","apiPath",3,"label","options","enableFilter","loadingState","tooltip","onSelectionChange"],["formControlName","apiGroupName","rx-id","api-group-name",1,"form-group","d-block",3,"options","label","customOptionTitle","customOptionOnTop","tooltip"],["formControlName","apiName","rx-id","api-name",1,"form-group","d-block",3,"label","tooltip"],["formControlName","requestMethod","rx-id","request-method",1,"form-group","d-block",3,"options","label","onSelectionChange"],["formControlName","authorizationType","rx-id","authorization-type",1,"form-group","d-block",3,"options","optionFormatter","label","onSelectionChange"],[4,"ngIf"],[1,"my-1"],[3,"type","tab-active","tab-active-changed"],[3,"adapt-tab-title"],["adapt-button","","type","button","btn-type","tertiary","rx-id","add-button",1,"d-icon-plus_circle","px-0","align-self-start",3,"click"],["formArrayName","headers",4,"ngFor","ngForOf"],["formArrayName","queryParameters",4,"ngFor","ngForOf"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"],["formArrayName","authTypeDetails",4,"ngFor","ngForOf"],["formArrayName","authTypeDetails"],[3,"formGroupName"],["class","form-group d-block",3,"label","isPassword","formControlName","required",4,"ngFor","ngForOf"],[1,"form-group","d-block",3,"label","isPassword","formControlName","required"],["adapt-button","","type","button","btn-type","tertiary","rx-id","add-button",1,"d-icon-plus_circle","px-0","d-block",3,"click"],["formArrayName","customAuthTypeHeaders",4,"ngFor","ngForOf"],["formArrayName","customAuthTypeQueryParams",4,"ngFor","ngForOf"],["formArrayName","customAuthTypeHeaders"],[1,"card","form-group"],[1,"card-block"],[1,"d-flex","justify-content-between"],["showRequiredLabel","true",3,"label"],[1,"d-icon-cross_adapt","form-group","alert-link",3,"click"],["formControlName","key",1,"d-block","form-group",3,"placeholder"],["formControlName","value",1,"d-block",3,"placeholder"],["formArrayName","customAuthTypeQueryParams"],["formArrayName","headers"],[1,"d-flex",3,"formGroupName"],["formControlName","name",1,"d-block","form-group","pr-2","flex-fill"],["adapt-button","","btn-type","tertiary","type","button",1,"d-icon-minus_circle","text-danger","form-group","px-0",3,"click"],["formArrayName","queryParameters"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275element"](1,"rx-busy-indicator",1),o["\u0275\u0275elementStart"](2,"form",2),o["\u0275\u0275elementStart"](3,"div",3),o["\u0275\u0275elementStart"](4,"div",4),o["\u0275\u0275elementStart"](5,"h6",5),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-select",6),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getEnvironments(e.options[0])}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-select",7),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getApiPaths(e.options[0])}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"adapt-rx-select",8),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getApiMethods(e.options[0])}),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",4),o["\u0275\u0275elementStart"](16,"h6",5),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](19,"adapt-rx-select-editable",9),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275element"](23,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](24,"translate"),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementStart"](26,"adapt-rx-select",11),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getAuthTypes(e.options[0])}),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](28,"adapt-rx-select",12),o["\u0275\u0275listener"]("onSelectionChange",function(e){return t.getAuthTypeFields(e.options[0])}),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](30,Lo,2,1,"ng-container",13),o["\u0275\u0275template"](31,Go,9,8,"ng-container",13),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",4),o["\u0275\u0275elementStart"](33,"h6",14),o["\u0275\u0275text"](34),o["\u0275\u0275pipe"](35,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](36,"adapt-tabset",15),o["\u0275\u0275listener"]("tab-active-changed",function(e){return t.tabChanged(e)}),o["\u0275\u0275elementStart"](37,"adapt-tab-panel",16),o["\u0275\u0275pipe"](38,"translate"),o["\u0275\u0275elementStart"](39,"button",17),o["\u0275\u0275listener"]("click",function(){return t.addHeader()}),o["\u0275\u0275text"](40),o["\u0275\u0275pipe"](41,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](42,zo,4,1,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](43,"adapt-tab-panel",16),o["\u0275\u0275pipe"](44,"translate"),o["\u0275\u0275elementStart"](45,"button",17),o["\u0275\u0275listener"]("click",function(){return t.addQueryParameter()}),o["\u0275\u0275text"](46),o["\u0275\u0275pipe"](47,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](48,Uo,4,1,"div",19),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](49,"div",20),o["\u0275\u0275elementStart"](50,"button",21),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](51),o["\u0275\u0275pipe"](52,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](53,"button",22),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](54),o["\u0275\u0275pipe"](55,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("options",o["\u0275\u0275pureFunction1"](81,Ae,t.busy)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.ipaasApiEditorForm),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,41,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,43,"com.bmc.arsys.rx.client.approval.configuration.org")),o["\u0275\u0275property"]("options",t.organizations)("optionFormatter",t.optionFormatterName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,45,"com.bmc.arsys.rx.client.admin.jitterbit-apis.environment.label")),o["\u0275\u0275property"]("options",t.environments)("optionFormatter",t.optionFormatterName),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](13,47,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label")),o["\u0275\u0275property"]("options",t.apiPaths)("enableFilter",!0)("loadingState",t.loadingState)("tooltip",o["\u0275\u0275pureFunction1"](83,ci,o["\u0275\u0275pipeBind1"](14,49,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-paths.tooltip"))),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,51,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-properties.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,53,"com.bmc.arsys.rx.client.admin.ipaas-apis.api-group-name.label")),o["\u0275\u0275propertyInterpolate"]("customOptionTitle",o["\u0275\u0275pipeBind1"](21,55,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-new.label")),o["\u0275\u0275property"]("options",t.groupNameList)("customOptionOnTop",!0)("tooltip",o["\u0275\u0275pureFunction1"](85,ci,o["\u0275\u0275pipeBind1"](22,57,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-group-name.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](24,59,"com.bmc.arsys.rx.client.admin.jitterbit-apis.api-name.label")),o["\u0275\u0275property"]("tooltip",t.isEditMode?o["\u0275\u0275pureFunction1"](87,ci,o["\u0275\u0275pipeBind1"](25,61,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.edit-api.api-name.tooltip")):null),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](27,63,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.request-method.label")),o["\u0275\u0275property"]("options",t.methodTypeOptions),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](29,65,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.authorization-type.label")),o["\u0275\u0275property"]("options",t.authTypeOptions)("optionFormatter",t.optionFormatterLabel),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",!t.isCustomAuthType),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.isCustomAuthType),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](35,67,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-variables.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("type","pills")("tab-active",t.activeIndex),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](38,69,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.headers.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](41,71,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-header.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.ipaasApiEditorForm.get("headers").controls),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](44,73,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.query-parameters.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](47,75,"com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-query-parameter.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.ipaasApiEditorForm.get("queryParameters").controls),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](52,77,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](55,79,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[l.RxBusyIndicatorComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxSelectEditableComponent,a.AdaptRxTextfieldComponent,n.NgIf,a.AdaptTabsComponent,a.AdaptTabsPanelComponent,a.AdaptButtonComponent,n.NgForOf,r.FormArrayName,r.FormGroupName,r.RequiredValidator,a.AdaptRxControlLabelComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[_ngcontent-%COMP%], adapt-rx-select-editable[_ngcontent-%COMP%], adapt-rx-textfield[_ngcontent-%COMP%]{max-width:400px}.api-editor-modal-body[_ngcontent-%COMP%]{height:645px}.modal-body[_ngcontent-%COMP%]{overflow-y:auto}']});class _c{constructor(e,t,i,n){this.rxModalService=e,this.rxNotificationService=t,this.translateService=i,this.rxMulesoftApisService=n,this.mulesoftConfig={titleKey:"com.bmc.arsys.rx.client.admin.mulesoft-apis.header.title",recordDefinitionName:"com.bmc.dsm.ipaas-mulesoft:iPaaS MuleSoft API Definition",resourceType:"com.bmc.dsm.ipaas.mulesoft.command.RenameMuleSoftApiGroupCommand"}}openMulesoftCreateApiEditor(e){return this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.add-api.label"),content:Ic,data:e}).then(e=>{e&&this.ipaasBaseApisComponent.refreshIpaasGrid()}).catch(h.noop)}openMulesoftEditApiEditor(e){return this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-api-editor.edit-api.label"),content:Ic,data:e}).then(e=>{e&&this.ipaasBaseApisComponent.refreshIpaasGrid()}).catch(h.noop)}deleteMulesoftApis(e){this.deleteApiDefinitions(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.success.message")),this.ipaasBaseApisComponent.refreshIpaasGrid()})}deleteApiDefinitions(e){if(e.length){const t=e.map(e=>this.rxMulesoftApisService.deleteApiDefinition(e));return(0,h.forkJoin)(t)}return h.EMPTY}}_c.\u0275fac=function(e){return new(e||_c)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](wc))},_c.\u0275cmp=o["\u0275\u0275defineComponent"]({type:_c,selectors:[["rx-admin-mulesoft-apis"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Po,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ipaasBaseApisComponent=e.first)}},decls:2,vars:1,consts:[[3,"ipaasApisConfig","createApi","editApi","deleteApis"],["ipaasBaseApisConfiguration",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-ipaas-base-apis",0,1),o["\u0275\u0275listener"]("createApi",function(e){return t.openMulesoftCreateApiEditor(e)})("editApi",function(e){return t.openMulesoftEditApiEditor(e)})("deleteApis",function(e){return t.deleteMulesoftApis(e)}),o["\u0275\u0275elementEnd"]()),2&e&&o["\u0275\u0275property"]("ipaasApisConfig",t.mulesoftConfig)},directives:[fc],encapsulation:2});class Dc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-mulesoft-apis",componentFactory:this.componentFactoryResolver.resolveComponentFactory(_c),name:"iPaaS MuleSoft APIs",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Dc.\u0275fac=function(e){return new(e||Dc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Dc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Dc,declarations:[_c,Ic],imports:[vc,l.RxBusyIndicatorModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,a.AdaptRxSelectEditableModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,u.TranslateModule,a.AdaptButtonModule,n.CommonModule]}),Dc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[vc,l.RxBusyIndicatorModule,r.ReactiveFormsModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,a.AdaptRxSelectEditableModule,a.AdaptRxTextfieldModule,a.AdaptTabsModule,u.TranslateModule,a.AdaptButtonModule,n.CommonModule]]});const Rc="0",Ac="1",Tc=[{id:Rc,label:"Basic"},{id:Ac,label:"OAuth 2.0"}];class Fc extends p.BaseViewComponent{constructor(e){super(),this.formBuilder=e,this.mulesoftConfig={componentName:"iPaaS MuleSoft Configuration",resourceType:"com.bmc.dsm.ipaas.mulesoft.command.PingMuleSoftCommand",bundleScope:f.RX_APPLICATION.ipaasMulesoftBundleId,titleKey:"com.bmc.arsys.rx.client.admin.mulesoft-configuration.header.title",saveMessageKey:"com.bmc.arsys.rx.client.admin.mulesoft-configuration.saved.message",controlsConfig:{url:["",a.AdaptValidators.required()],authType:["",a.AdaptValidators.required()],username:"",password:"",clientId:"",clientSecret:""},getFormValues:e=>({url:e.url,authType:this.getAuthTypeOption(e.authType),username:e.username,password:e.password,clientId:e.clientId,clientSecret:e.clientSecret}),settingNames:{url:"url",userName:"username",password:"password",authType:"authType",clientId:"clientId",clientSecret:"clientSecret"},getPayload:e=>{var t;return(null===(t=(0,m.first)(e.authType))||void 0===t?void 0:t.id)===Ac?{url:e.url,authType:this.getAuthTypePayload(e.authType),username:null,password:null,clientId:e.clientId,clientSecret:e.clientSecret}:{url:e.url,authType:this.getAuthTypePayload(e.authType),username:e.username,password:e.password,clientId:null,clientSecret:null}}},this.authenticationOptions=Tc,this.optionFormatter=e=>e.label}ngOnInit(){this.mulesoftConfigurationForm=this.formBuilder.group(this.mulesoftConfig.controlsConfig),this.mulesoftConfigurationForm.patchValue({authType:[(0,m.first)(Tc)]}),this.authType.valueChanges.pipe((0,v.map)(e=>this.getAuthTypePayload(e))).subscribe(e=>{e===Rc?(this.mulesoftConfigurationForm.controls.username.setValidators(a.AdaptValidators.required()),this.mulesoftConfigurationForm.controls.username.enable(),this.mulesoftConfigurationForm.controls.password.setValidators(a.AdaptValidators.required()),this.mulesoftConfigurationForm.controls.password.enable(),this.mulesoftConfigurationForm.controls.clientId.clearValidators(),this.mulesoftConfigurationForm.controls.clientId.disable(),this.mulesoftConfigurationForm.controls.clientSecret.clearValidators(),this.mulesoftConfigurationForm.controls.clientSecret.disable()):e===Ac&&(this.mulesoftConfigurationForm.controls.username.clearValidators(),this.mulesoftConfigurationForm.controls.username.disable(),this.mulesoftConfigurationForm.controls.password.clearValidators(),this.mulesoftConfigurationForm.controls.password.disable(),this.mulesoftConfigurationForm.controls.clientId.setValidators(a.AdaptValidators.required()),this.mulesoftConfigurationForm.controls.clientId.enable(),this.mulesoftConfigurationForm.controls.clientSecret.setValidators(a.AdaptValidators.required()),this.mulesoftConfigurationForm.controls.clientSecret.enable())}),this.mulesoftConfigurationForm.patchValue({authType:[(0,m.first)(Tc)]}),this.notifyPropertyChanged("api",{isDirty:()=>this.ipaasBaseConfigurationComponent.childFormGroup.dirty})}get authType(){return this.mulesoftConfigurationForm.get("authType")}getAuthTypeOption(e){const t=(0,m.find)(Tc,{id:e});return t?[t]:[]}getAuthTypePayload(e){var t;return null===(t=(0,m.first)(e))||void 0===t?void 0:t.id}}Fc.\u0275fac=function(e){return new(e||Fc)(o["\u0275\u0275directiveInject"](r.FormBuilder))},Fc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Fc,selectors:[["rx-admin-mulesoft-configuration"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](yc,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.ipaasBaseConfigurationComponent=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:13,consts:[[3,"ipaasConfig","childFormGroup"],[3,"formGroup"],["rx-id","endpoint-url","formControlName","url",1,"d-block","form-group",3,"label"],["rx-id","auth-type","formControlName","authType",1,"d-block","form-group",3,"label","options","optionFormatter"],[3,"ngSwitch"],[4,"ngSwitchDefault"],[4,"ngSwitchCase"],["rx-id","user-name","formControlName","username",1,"d-block","form-group",3,"label"],["rx-id","password","formControlName","password",1,"d-block","form-group",3,"label","isPassword"],["rx-id","client-id","formControlName","clientId",1,"d-block","form-group",3,"label"],["rx-id","client-secret","formControlName","clientSecret",1,"d-block","form-group",3,"label","isPassword"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-ipaas-base-configuration",0),o["\u0275\u0275elementContainerStart"](1,1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-rx-select",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementContainerStart"](6,4),o["\u0275\u0275template"](7,qo,5,7,"ng-container",5),o["\u0275\u0275template"](8,Xo,5,7,"ng-container",6),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementContainerEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("ipaasConfig",t.mulesoftConfig)("childFormGroup",t.mulesoftConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.mulesoftConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,9,"com.bmc.arsys.rx.client.admin.mulesoft-configuration.end-point-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,11,"com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label")),o["\u0275\u0275property"]("options",t.authenticationOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngSwitch",null==t.authType.value[0]?null:t.authType.value[0].id),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngSwitchCase",t.authenticationOptions[1].id))},directives:[yc,r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxSelectComponent,n.NgSwitch,n.NgSwitchDefault,n.NgSwitchCase],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textfield[_ngcontent-%COMP%], adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}']});class Ec{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-mulesoft-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Fc),name:"iPaaS MuleSoft configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Ec.\u0275fac=function(e){return new(e||Ec)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Ec.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Ec,declarations:[Fc],imports:[n.CommonModule,r.ReactiveFormsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,u.TranslateModule,bc]}),Ec.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.ReactiveFormsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,u.TranslateModule,bc]]});const Mc="/api/rx/application/oauth/token/IssueReporting",Oc="errorReportingServiceTenantConfiguration",kc={recordDefinitionName:"SupportUserMapping",defaultDescription:"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.default-description.label",fieldIds:{loginName:70221,supportEmail:70222}};class jc{constructor(e,t,i,n){this.httpClient=e,this.rxRecordInstanceDataPageService=t,this.rxCurrentUserService=i,this.rxSystemConfigurationService=n}getOauthConfig(){return this.httpClient.get(Mc)}getSupportId(){return this.rxSystemConfigurationService.getConfiguration(Oc).pipe((0,v.map)(e=>JSON.parse(e.value).supportId||""))}setSupportId(e){return this.rxSystemConfigurationService.setConfiguration(Oc,{supportId:e})}getSupportConfig(){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:kc.recordDefinitionName,queryExpression:`'${kc.fieldIds.loginName}' = "${this.rxCurrentUserService.getName()}"`,propertySelection:[x.RX_RECORD_DEFINITION.coreFieldIds.id,kc.fieldIds.loginName,kc.fieldIds.supportEmail]}}).pipe((0,v.map)(e=>(0,m.get)(e,"data[0]",null)))}}jc.\u0275fac=function(e){return new(e||jc)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275inject"](f.RxCurrentUserService),o["\u0275\u0275inject"](f.RxSystemConfigurationService))},jc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:jc,factory:jc.\u0275fac,providedIn:"root"});class Pc extends p.BaseViewComponent{constructor(e,t,i,n,o,r,a){super(),this.formBuilder=e,this.rxCurrentUserService=t,this.rxIssueReportingConfigurationService=i,this.rxNotificationService=n,this.rxRecordInstanceService=o,this.rxRecordInstanceUpdateService=r,this.translateService=a,this.isAdministrator=this.rxCurrentUserService.isAdministrator(),this.oauthUrl=""}saveConfig(){const e=this.issueReportingConfigurationForm.getRawValue();this.rxIssueReportingConfigurationService.setSupportId(e.supportId).subscribe(),this.configId?this.rxRecordInstanceService.get(kc.recordDefinitionName,this.configId).subscribe(t=>{t.setFieldValue(kc.fieldIds.supportEmail,e.supportEmail),this.rxRecordInstanceUpdateService.execute(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-updated.message")),this.issueReportingConfigurationForm.markAsPristine()})}):this.rxRecordInstanceService.getNew(kc.recordDefinitionName).subscribe(t=>{t.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,this.translateService.instant(kc.defaultDescription)),t.setFieldValue(kc.fieldIds.supportEmail,e.supportEmail),t.setFieldValue(kc.fieldIds.loginName,this.rxCurrentUserService.getName()),this.rxRecordInstanceService.create(t).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-saved.message")),this.issueReportingConfigurationForm.markAsPristine()})})}getOauthData(){this.busy=this.rxIssueReportingConfigurationService.getOauthConfig().subscribe(e=>{this.oauthUrl=e.authorizeURL,this.isAccountLinked=e.configured})}openWindow(){const e=window.open(this.oauthUrl,"BMC Cloud Service","scrollbars=1,height=600,width=670");this.assertWindowClosed(e)}assertWindowClosed(e){const t=setInterval(()=>{e&&e.closed&&(clearInterval(t),this.getOauthData())},100)}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>{var e;return null===(e=this.issueReportingConfigurationForm)||void 0===e?void 0:e.dirty}}),this.isAdministrator&&(this.issueReportingConfigurationForm=this.formBuilder.group({supportId:"",supportEmail:""}),this.busy=(0,h.forkJoin)({supportId:this.rxIssueReportingConfigurationService.getSupportId(),supportConfig:this.rxIssueReportingConfigurationService.getSupportConfig()}).subscribe(e=>{let t="";e.supportConfig&&(this.configId=e.supportConfig[x.RX_RECORD_DEFINITION.coreFieldIds.id],t=e.supportConfig[kc.fieldIds.supportEmail]),this.issueReportingConfigurationForm.patchValue({supportId:e.supportId,supportEmail:t})}),this.getOauthData())}}Pc.\u0275fac=function(e){return new(e||Pc)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](jc),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceUpdateService),o["\u0275\u0275directiveInject"](u.TranslateService))},Pc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Pc,selectors:[["rx-admin-issue-reporting-configuration"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:5,consts:[[3,"header","busy"],["multiselect","true",1,"pb-4"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["isOpen","true",3,"title"],["rx-id","support-id","label","Support ID","formControlName","supportId","required","true",1,"d-block","form-group"],["rx-id","support-email","label","Support email","formControlName","supportEmail","required","true","email","true",1,"d-block","form-group"],["title","Link BMC Service Cloud account to BMC Helix platform","isOpen","true",1,"d-block"],["class","py-2",3,"config",4,"ngIf"],[4,"ngIf"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","click"],[1,"py-2",3,"config"],["adapt-button","","type","button","rx-id","link-account-button","btn-type","secondary",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-accordion",1),o["\u0275\u0275template"](3,Zo,11,10,"form",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.issue-reporting-configuration.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",t.isAdministrator))},directives:[s.AdminSettingsComponent,a.AdaptAccordionComponent,n.NgIf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionTabComponent,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,r.EmailValidator,a.AdaptButtonComponent,a.AdaptAlertComponent],pipes:[u.TranslatePipe],styles:[Ci]});class Nc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-issue-reporting-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Pc),name:"Issue reporting configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Nc.\u0275fac=function(e){return new(e||Nc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Nc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Nc,declarations:[Pc],imports:[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,u.TranslateModule]}),Nc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptIconModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,u.TranslateModule]]});class Vc{constructor(e){this.httpClient=e,this.tenantApiUrl="/api/rx/application/tenant"}createTenant(e){return this.httpClient.post(this.tenantApiUrl,e)}deleteTenant(e){return this.httpClient.delete(`${this.tenantApiUrl}/${e}`)}editTenant(e){return this.httpClient.put(`${this.tenantApiUrl}/${e.name}`,e)}getTenant(e){return this.httpClient.get(`${this.tenantApiUrl}/${e}`)}}var Lc;Vc.\u0275fac=function(e){return new(e||Vc)(o["\u0275\u0275inject"](b.HttpClient))},Vc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Vc,factory:Vc.\u0275fac,providedIn:"root"}),function(e){e.Name="name",e.DomainIdentifier="domainIdentifier",e.VirtualHostname="virtualHostname"}(Lc||(Lc={}));class Bc extends l.RxModalClass{constructor(e,t,i,n,o,r){super(t,r),this.formBuilder=e,this.dockedPanelContext=t,this.rxManageTenantService=i,this.rxNotificationService=n,this.translateService=o,this.injector=r,this.domainIdentifierRegexp=/^[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,this.isEditMode=!1}ngOnInit(){super.ngOnInit();const e=this.dockedPanelContext.getData().tenant;this.tenantEditorFormGroup=this.formBuilder.group({name:"",domainIdentifier:"",virtualHostname:""}),e&&(this.isEditMode=!0,this.tenantEditorFormGroup.patchValue({name:e.name,domainIdentifier:e.domainIdentifier,virtualHostname:e.virtualHostname}))}isDirty(){return this.tenantEditorFormGroup.dirty}save(){const e=this.tenantEditorFormGroup.getRawValue();this.isEditMode&&(e.tenantId=this.dockedPanelContext.getData().tenant.tenantId);(this.isEditMode?this.rxManageTenantService.editTenant(e):this.rxManageTenantService.createTenant(e)).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.isEditMode?this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-updated.message"):this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-created.message")),this.tenantEditorFormGroup.markAsPristine(),this.dockedPanelContext.close("")})}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}Bc.\u0275fac=function(e){return new(e||Bc)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](Vc),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},Bc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Bc,selectors:[["rx-tenant-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:20,consts:[[1,"dp-body"],[3,"formGroup"],["rx-id","tenant-name-field","formControlName","name","required","","maxlength","20",1,"d-block","form-group",3,"label","disabled"],["rx-id","domain-identifier-field","formControlName","domainIdentifier","placeholder","e.g. domain.com","required","","maxlength","254",1,"d-block","form-group",3,"label","pattern"],["rx-id","virtual-host-name-field","formControlName","virtualHostname","placeholder","e.g. host.domain.com","required","","maxlength","254",1,"d-block","form-group",3,"label","pattern"],[1,"dp-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","close-button",1,"mr-2",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275element"](6,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"button",6),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"button",7),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.tenantEditorFormGroup),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate1"]("label"," ",o["\u0275\u0275pipeBind1"](3,10,"com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-name.label"),""),o["\u0275\u0275property"]("disabled",t.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,12,"com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.domain-identifier.label")),o["\u0275\u0275property"]("pattern",t.domainIdentifierRegexp),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,14,"com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.virtual-host-name.label")),o["\u0275\u0275property"]("pattern",t.domainIdentifierRegexp),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.tenantEditorFormGroup.invalid||t.tenantEditorFormGroup.pristine),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](11,16,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,18,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,r.MaxLengthValidator,r.PatternValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class $c{constructor(e,t,i,n,o){this.rxDataPageService=e,this.rxTenantService=t,this.rxModalService=i,this.rxNotificationService=n,this.translateService=o,this.getData=e=>this.dataPage.get({params:(0,m.omit)(e,["searchText","recorddefinition"])}),this.dataPage=this.rxDataPageService.withType("com.bmc.arsys.rx.application.tenant.datapage.TenantDataPageQuery")}ngOnInit(){this.manageTenantGridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>this.deleteTenant()}]}],recordIdField:"name",enableRowSelection:d.RowSelectionMode.Single,enableFiltering:!1,getData:e=>this.getData(e),getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:[{index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant.label"),fieldId:Lc.Name,clickable:!0,sortable:!1,actions:[{name:(e,t)=>this.editTenant(t)}]},{index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.domain-identifier.label"),fieldId:Lc.DomainIdentifier,sortable:!1},{index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.virtual-host-name.label"),fieldId:Lc.VirtualHostname,sortable:!1}],styles:"flex-fill"})}getRecordDefinition(){return{fieldDefinitions:[{id:Lc.Name,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Lc.DomainIdentifier,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Lc.VirtualHostname,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]}}refreshManageTenantGrid(){this.manageTenantGrid.api.refresh().subscribe()}addTenant(){this.manageTenantGrid.adaptTableConfig.data.length>0?this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-already-exists.message")):this.openDockedPanel()}editTenant(e){const t=e[Lc.Name];this.rxTenantService.getTenant(t).subscribe(e=>{this.openDockedPanel(e)})}openDockedPanel(e){this.rxModalService.openDockedPanel({title:e?this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.edit-tenant.label"):this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.new-tenant.label"),content:Bc,size:"lg",data:{tenant:e}}).then(()=>{this.refreshManageTenantGrid()}).catch(m.noop)}deleteTenant(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.delete-confirmation.message")}).then(e=>{if(e){const e=this.manageTenantGrid.api.getFirstSelectedRow();this.rxTenantService.deleteTenant(e.name).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.manage-tenant.tenant-deleted.message")),this.refreshManageTenantGrid()})}})}}$c.\u0275fac=function(e){return new(e||$c)(o["\u0275\u0275directiveInject"](f.RxDataPageFactoryService),o["\u0275\u0275directiveInject"](Vc),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService))},$c.\u0275cmp=o["\u0275\u0275defineComponent"]({type:$c,selectors:[["rx-admin-manage-tenant"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](er,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.manageTenantGrid=e.first)}},decls:7,vars:7,consts:[[3,"header"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["rx-id","manage-tenant-grid",3,"config"],["manageTenantGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.addTenant()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.manage-tenant.tenant-activation.header.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.manageTenantGridConfig))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class Gc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-manage-tenant",componentFactory:this.componentFactoryResolver.resolveComponentFactory($c),name:"Manage tenant",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Gc.\u0275fac=function(e){return new(e||Gc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Gc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Gc,declarations:[$c,Bc],imports:[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,u.TranslateModule]}),Gc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,u.TranslateModule]]});class zc extends f.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.email.datapage.OutgoingEmailMessageStatusDataPageQuery"),this.injector=e}}zc.\u0275fac=function(e){return new(e||zc)(o["\u0275\u0275inject"](o.Injector))},zc.\u0275prov=o["\u0275\u0275defineInjectable"]({token:zc,factory:zc.\u0275fac,providedIn:"root"});const Uc={availableTimeFrames:[{id:"1",name:"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-hour.label",duration:A.default.duration(1,"hour")},{id:"2",name:"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-three-hours.label",duration:A.default.duration(3,"hour")},{id:"3",name:"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-day.label",duration:A.default.duration(1,"day")},{id:"4",name:"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-week.label",duration:A.default.duration(1,"week")},{id:"5",name:"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-month.label",duration:A.default.duration(1,"month")}],fields:{mailboxName:"MailBoxName",pending:"Pending",sent:"Sent",error:"Error"}};class qc{constructor(e,t,i){this.rxOutgoingMailboxStatusDataPageService=e,this.translateService=t,this.iconConfig=i,this.availableTimeFrames=Uc.availableTimeFrames.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.selectedTimeFrame=[this.availableTimeFrames[0]],i.registerIcons([F.ai_info_circle_o_adapt])}ngOnInit(){const e=[{index:0,fieldId:Uc.fields.mailboxName,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.mailbox-name.label")},{index:1,fieldId:Uc.fields.pending,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.pending.label"),filterable:!1},{index:2,fieldId:Uc.fields.error,title:this.translateService.instant("com.bmc.arsys.rx.client.common.error.label"),filterable:!1},{index:3,fieldId:Uc.fields.sent,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.sent.label"),filterable:!1}],t={fieldDefinitions:[{id:Uc.fields.mailboxName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Uc.fields.pending,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Uc.fields.error,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:Uc.fields.sent,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]};this.recordGridConfig=(0,h.of)({columns:e,enableFiltering:!0,enableRowSelection:null,getRecordDefinition:()=>(0,h.of)(t),getData:e=>((0,m.assign)(e,{messagesBefore:(0,A.default)().subtract(this.selectedTimeFrame[0].duration).toISOString()}),this.rxOutgoingMailboxStatusDataPageService.get({params:e})),styles:"flex-fill",useExternalFiltering:!1})}onTimeFrameChange(e){this.selectedTimeFrame=e,this.recordGrid.api.refresh().subscribe()}optionFormatter(e){return e.name}}qc.\u0275fac=function(e){return new(e||qc)(o["\u0275\u0275directiveInject"](zc),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](a.AdaptIconConfig))},qc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:qc,selectors:[["rx-admin-outgoing-mailbox-status"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Mt,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},decls:12,vars:13,consts:[["header","Outgoing mailbox status"],[1,"d-flex","flex-wrap"],["rx-id","time-frame",1,"form-group",3,"label","options","ngModel","optionFormatter","ngModelChange"],["adapt-button","","btn-type","tertiary","placement","bottom","type","button",1,"form-group","ml-auto","align-self-end",3,"adaptPopover"],["name","info_circle_o_adapt"],["rx-id","outgoing-mailbox-status-grid",3,"config"],["recordGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275elementStart"](1,"div",1),o["\u0275\u0275elementStart"](2,"adapt-rx-select",2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.onTimeFrameChange(e)}),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"span"),o["\u0275\u0275element"](7,"adapt-icon",4),o["\u0275\u0275text"](8),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](10,"rx-record-grid",5,6),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,7,"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.time-frame.label")),o["\u0275\u0275property"]("options",t.availableTimeFrames)("ngModel",t.selectedTimeFrame)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptPopover",o["\u0275\u0275pipeBind1"](5,9,"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.about-sent-email.tooltip")),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](9,11,"com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.about-sent-email.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig))},directives:[s.AdminSettingsComponent,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent,a.AdaptPopoverDirective,a.AdaptIconComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],styles:["adapt-rx-select[rx-id=time-frame][_ngcontent-%COMP%]{width:150px}"]});class Xc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-outgoing-mailbox-status",componentFactory:this.componentFactoryResolver.resolveComponentFactory(qc),name:"Outgoing mailbox status",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Xc.\u0275fac=function(e){return new(e||Xc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Xc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Xc,declarations:[qc],imports:[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptButtonModule,u.TranslateModule]}),Xc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptRxSelectModule,r.FormsModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptButtonModule,u.TranslateModule]]});class Hc extends p.BaseViewComponent{constructor(e,t,i){super(),this.rxNotificationService=e,this.translateService=t,this.rxSystemConfigurationService=i,this.settingName="permissionsPolicy",this.permissionsPolicyHeader="",this.syntaxUrl="https://github.com/w3c/webappsec-permissions-policy/blob/main/permissions-policy-explainer.md"}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.isDirty()}),this.busy=this.rxSystemConfigurationService.getConfiguration(this.settingName).subscribe(e=>{this.permissionsPolicyHeader=e.value})}isDirty(){var e;return null===(e=this.permissionPolicyHeaderModel)||void 0===e?void 0:e.dirty}onSaveClick(){this.rxSystemConfigurationService.setConfiguration(this.settingName,this.permissionsPolicyHeader).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.settings-saved.message")),this.permissionPolicyHeaderModel.control.markAsPristine()})}}Hc.\u0275fac=function(e){return new(e||Hc)(o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService))},Hc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Hc,selectors:[["rx-admin-permissions-policy"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](tr,7,r.NgModel),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.permissionPolicyHeaderModel=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:16,consts:[[3,"header","busy"],["rx-id","permission-policy-header","name","permissionPolicyHeaderModel",1,"form-group","d-block",3,"label","ngModel","autofocus","tooltip","ngModelChange"],["permissionPolicyHeaderModel","ngModel"],["rx-id","save-button","adapt-button","","btn-type","primary","type","button",1,"align-self-start",3,"disabled","click"],["popover",""],["target","_blank",1,"text-secondary",3,"href"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-rx-textfield",1,2),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.permissionsPolicyHeader=e}),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"button",3),o["\u0275\u0275listener"]("click",function(){return t.onSaveClick()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ir,4,5,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](9);o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,8,"com.bmc.arsys.rx.client.admin.permissions-policy-header.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("label",o["\u0275\u0275pipeBind1"](4,10,"com.bmc.arsys.rx.client.admin.permissions-policy-header.label"))("ngModel",t.permissionsPolicyHeader)("autofocus",!0)("tooltip",o["\u0275\u0275pureFunction1"](14,nr,e)),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",!t.permissionsPolicyHeader||!t.isDirty()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,12,"com.bmc.arsys.rx.client.common.save.label")," ")}},directives:[s.AdminSettingsComponent,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent],pipes:[u.TranslatePipe],encapsulation:2});class Wc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-permissions-policy",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Hc),name:"Permissions Policy Header",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Wc.\u0275fac=function(e){return new(e||Wc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Wc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Wc,declarations:[Hc],imports:[s.AdminSettingsModule,r.FormsModule,n.CommonModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptPopoverModule]}),Wc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,r.FormsModule,n.CommonModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptPopoverModule]]});const Yc={supportedLocales:[{id:"zh_cn",name:"com.bmc.arsys.rx.client.common.language.chinese.label"},{id:"nl",name:"com.bmc.arsys.rx.client.common.language.dutch.label"},{id:"en",name:"com.bmc.arsys.rx.client.common.language.english.label"},{id:"fr",name:"com.bmc.arsys.rx.client.common.language.french.label"},{id:"de",name:"com.bmc.arsys.rx.client.common.language.german.label"},{id:"it",name:"com.bmc.arsys.rx.client.common.language.italian.label"},{id:"ja",name:"com.bmc.arsys.rx.client.common.language.japanese.label"},{id:"ko",name:"com.bmc.arsys.rx.client.common.language.korean.label"},{id:"pt_br",name:"com.bmc.arsys.rx.client.common.language.portuguese.label"},{id:"ru",name:"com.bmc.arsys.rx.client.common.language.russian.label"},{id:"es",name:"com.bmc.arsys.rx.client.common.language.spanish.label"},{id:"sv",name:"com.bmc.arsys.rx.client.common.language.swedish.label"}],defaultSourceLocale:{id:"en",name:"com.bmc.arsys.rx.client.common.language.english.label"},defaultTargetLocale:{id:"de",name:"com.bmc.arsys.rx.client.common.language.german.label"}};class Qc{constructor(e,t){this.rxCommandFactoryService=e,this.translateService=t,this.sourceLanguage=[],this.targetLanguage=[],this.supportedLocaleOptions=Yc.supportedLocales.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)}))}ngOnInit(){this.reset()}optionFormatter(e){return e.name}reset(){this.sourceText=this.translatedText=null,this.sourceLanguage=[Object.assign(Object.assign({},Yc.defaultSourceLocale),{name:this.translateService.instant(Yc.defaultSourceLocale.name)})],this.targetLanguage=[Object.assign(Object.assign({},Yc.defaultTargetLocale),{name:this.translateService.instant(Yc.defaultTargetLocale.name)})],this.realTimeTranslationForm.form.markAsPristine()}translate(){this.realTimeTranslationForm.form.markAsPristine(),this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.cognitive.command.TranslateTextCommand").execute({texts:(0,m.castArray)(this.sourceText),sourceLanguage:(0,m.head)(this.sourceLanguage).id,targetLanguage:(0,m.head)(this.targetLanguage).id}).subscribe(e=>{this.translatedText=(0,m.head)(e)})}clearTexts(){this.sourceText=null,this.translatedText=null}isTranslateButtonDisabled(){return this.realTimeTranslationForm.pristine||this.realTimeTranslationForm.invalid}isClearButtonDisabled(){return(0,m.isEmpty)(this.sourceText)&&(0,m.isEmpty)(this.translatedText)}copyTranslatedText(){document.querySelector('[rx-id="translation"] textarea').select(),document.execCommand("copy")}isCopyButtonDisabled(){return(0,m.isEmpty)(this.translatedText)}}Qc.\u0275fac=function(e){return new(e||Qc)(o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](u.TranslateService))},Qc.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Qc,selectors:[["rx-admin-real-time-translation"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](or,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.realTimeTranslationForm=e.first)}},decls:30,vars:40,consts:[[3,"header"],["realTimeTranslationForm","ngForm"],[1,"row"],[1,"col-md-6"],["name","sourceLanguage","rx-id","source-language",1,"form-group","d-block",3,"label","ngModel","options","optionFormatter","ngModelChange"],["name","targetLanguage","rx-id","target-language",1,"form-group","d-block",3,"label","ngModel","options","optionFormatter","ngModelChange"],["name","sourceText","required","true","rx-id","source-text","rows","18",1,"form-group","d-block",3,"label","placeholder","ngModel","ngModelChange"],[1,"mb-2"],["adapt-button","","btn-type","primary","type","button","rx-id","translate-button",1,"d-icon-file_arrow_right","mr-2","mb-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","clear-button",1,"d-icon-minus_circle","mb-2",3,"disabled","click"],["name","translatedText","rx-id","translation","rows","18",1,"form-group","d-block",3,"label","readonly","disabledStyleForReadonlyState","ngModel"],[1,"mb-4"],["adapt-button","","btn-type","secondary","type","button","rx-id","copy-button",1,"d-icon-files_copy_o",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",null,1),o["\u0275\u0275elementStart"](4,"div",2),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275elementStart"](6,"adapt-rx-select",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.sourceLanguage=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",3),o["\u0275\u0275elementStart"](9,"adapt-rx-select",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.targetLanguage=e}),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",2),o["\u0275\u0275elementStart"](12,"div",3),o["\u0275\u0275elementStart"](13,"adapt-rx-textarea",6),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.sourceText=e}),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",7),o["\u0275\u0275elementStart"](17,"button",8),o["\u0275\u0275listener"]("click",function(){return t.translate()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"button",9),o["\u0275\u0275listener"]("click",function(){return t.clearTexts()}),o["\u0275\u0275text"](21),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",3),o["\u0275\u0275element"](24,"adapt-rx-textarea",10),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementStart"](26,"div",11),o["\u0275\u0275elementStart"](27,"button",12),o["\u0275\u0275listener"]("click",function(){return t.copyTranslatedText()}),o["\u0275\u0275text"](28),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,22,"com.bmc.arsys.rx.client.admin.real-time-translation.interactive-translation.header.title")),o["\u0275\u0275advance"](6),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,24,"com.bmc.arsys.rx.client.admin.real-time-translation.source-language.label")),o["\u0275\u0275property"]("ngModel",t.sourceLanguage)("options",t.supportedLocaleOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,26,"com.bmc.arsys.rx.client.admin.real-time-translation.target-language.label")),o["\u0275\u0275property"]("ngModel",t.targetLanguage)("options",t.supportedLocaleOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](14,28,"com.bmc.arsys.rx.client.admin.real-time-translation.source-text.label")),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](15,30,"com.bmc.arsys.rx.client.admin.real-time-translation.source-text.placeholder")),o["\u0275\u0275property"]("ngModel",t.sourceText),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.isTranslateButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,32,"com.bmc.arsys.rx.client.admin.real-time-translation.translate.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isClearButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](22,34,"com.bmc.arsys.rx.client.common.clear.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](25,36,"com.bmc.arsys.rx.client.admin.real-time-translation.translation.label")),o["\u0275\u0275property"]("readonly",!0)("disabledStyleForReadonlyState",!0)("ngModel",t.translatedText),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.isCopyButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](29,38,"com.bmc.arsys.rx.client.common.copy.label")," "))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptRxTextareaComponent,r.RequiredValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-textarea[_ngcontent-%COMP%]     textarea{resize:none}adapt-rx-select[_ngcontent-%COMP%]{max-width:400px}']});class Kc{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-real-time-translation",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Qc),name:"Real time translation",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Kc.\u0275fac=function(e){return new(e||Kc)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Kc.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Kc,declarations:[Qc],imports:[s.AdminSettingsModule,a.AdaptRxTextfieldModule,n.CommonModule,r.FormsModule,a.AdaptRxSelectModule,a.AdaptRxTextareaModule,a.AdaptButtonModule,u.TranslateModule]}),Kc.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptRxTextfieldModule,n.CommonModule,r.FormsModule,a.AdaptRxSelectModule,a.AdaptRxTextareaModule,a.AdaptButtonModule,u.TranslateModule]]});const Jc=-2147483647,Zc=-1;class ed{constructor(e){this.httpClient=e,this.path="/api/rx/application/role"}getUrl(e){return`${this.path}/${encodeURIComponent(e.applicationName)}/${encodeURIComponent(e.name)}`}get(e){return this.httpClient.get(this.getUrl(e))}deleteRole(e){return this.httpClient.delete(this.getUrl(e))}delete(e){const t=e.map(e=>this.deleteRole(e));return(0,h.forkJoin)(t)}create(e){return this.httpClient.post(this.path,e)}update(e,t){return this.httpClient.put(this.getUrl({applicationName:e.applicationName,name:t}),e)}}ed.\u0275fac=function(e){return new(e||ed)(o["\u0275\u0275inject"](b.HttpClient))},ed.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ed,factory:ed.\u0275fac,providedIn:"root"});class td extends l.RxModalClass{constructor(e,t,i,n,o,r,a){super(o,a),this.rxGlobalCacheService=e,this.rxGroupDataPageService=t,this.rxRolePermissionsService=i,this.rxNotificationService=n,this.dockedPanelContext=o,this.translateService=r,this.injector=a,this.isEditMode=!1,this.isSaveInProgress=!1,this.isSaveButtonDisabled=!0,this.maxRoleId=Zc,this.minRoleId=Jc,this.validDefinitionNameRegex=x.RX_RECORD_DEFINITION.validDefinitionNameRegex,this.destroyed$=new h.ReplaySubject(1),this.validatorFn=this.roleNameValidator.bind(this),this.testSearch=e=>e.pipe((0,v.distinctUntilChanged)(),(0,v.map)(e=>this.groupList.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,10))),this.productionSearch=e=>e.pipe((0,v.distinctUntilChanged)(),(0,v.map)(e=>this.groupList.filter(t=>t.toLowerCase().indexOf(e.toLowerCase())>-1).slice(0,10)))}ngOnInit(){if(super.ngOnInit(),this.getApplicationList(),this.getGroupList(),this.role=this.dockedPanelContext.getData().role,this.isEditMode=Boolean(this.role.roleName),this.isSaveButtonDisabled=!this.roleEditorForm.valid,this.roleEditorForm.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.isSaveButtonDisabled=!this.roleEditorForm.valid||this.roleEditorForm.pristine}),this.isEditMode){let e=(0,m.find)(this.applicationOptions,{value:this.role.applicationName});e||(e={displayValue:this.role.applicationName,value:this.role.applicationName},this.applicationOptions.push(e)),this.selectedApplication=[e],this.oldRoleName=this.role.roleName}}isDirty(){return this.roleEditorForm.dirty}optionFormatter(e){return e.displayValue}save(){this.isSaveInProgress=!0,this.isSaveButtonDisabled=!0,this.isEditMode||(this.role.applicationName=this.selectedApplication[0].value);const e=this.isEditMode?this.rxRolePermissionsService.update(this.role,this.oldRoleName):this.rxRolePermissionsService.create(this.role);e.pipe((0,v.catchError)(e=>(this.isSaveInProgress=!1,this.isSaveButtonDisabled=!1,(0,h.throwError)(e)))).subscribe(t=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.role-saved.message")),this.isSaveInProgress=!1,this.isSaveButtonDisabled=!1,this.dockedPanelContext.close(e)})}getGroupList(){const e={propertySelection:["groupName","groupId"].join(","),sortBy:"groupName"};this.rxGroupDataPageService.get({params:Object.assign({startIndex:0,pageSize:-1},e)}).pipe((0,v.map)(e=>{this.groupList=(0,m.map)(e.data,"groupName")})).subscribe()}getApplicationList(){this.rxGlobalCacheService.getBundleDescriptors().subscribe(e=>{this.applicationOptions=e.sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)).map(e=>({displayValue:e.friendlyName,value:e.id}))})}closeModal(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}roleNameValidator(e){return e.value&&!x.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e.value)?{invalidRoleName:{message:this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.role-name-validation.message")}}:null}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}var id;td.\u0275fac=function(e){return new(e||td)(o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](f.RxGroupDataPageService),o["\u0275\u0275directiveInject"](ed),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},td.\u0275cmp=o["\u0275\u0275defineComponent"]({type:td,selectors:[["rx-role-editor"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](rr,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.roleEditorForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:39,consts:[[1,"dp-body"],[1,"m-0","mb-3"],["roleEditorForm","ngForm"],["rx-id","application-name","name","application","required","true",1,"form-group","d-block",3,"label","ngModel","options","optionFormatter","readonly","ngModelChange"],["rx-id","role-name","name","roleName","required","true",1,"form-group","d-block",3,"label","ngModel","rxCustomValidators","ngModelChange"],["rx-id","role-id","required","true","name","roleId","adaptIntegerNumber","",1,"form-group","d-block",3,"label","max","min","adaptMax","adaptMin","ngModel","ngModelChange"],[1,"d-row"],[1,"form-group"],["rx-id","test","name","test","label","Test","placeholder","Enter test group name",1,"form-group","d-block",3,"ngModel","typeahead","ngModelChange"],["rx-id","production","name","production","label","Production","placeholder","Enter production group name",1,"form-group","d-block",3,"ngModel","typeahead","ngModelChange"],["rx-id","datatag","name","datatag","placeholder","Enter datatag",1,"form-group","d-block",3,"label","ngModel","ngModelChange"],[1,"dp-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"mr-2",3,"disabled","adaptInlineLoader","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h4",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"form",null,2),o["\u0275\u0275elementStart"](6,"adapt-rx-select",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.selectedApplication=e}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"adapt-rx-textfield",4),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.role.roleName=e}),o["\u0275\u0275pipe"](9,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](10,"adapt-rx-counter",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.role.roleID=e}),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](12,"div",6),o["\u0275\u0275elementStart"](13,"h4",7),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"adapt-rx-typeahead",8),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.role.test=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](17,"adapt-rx-typeahead",9),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.role.production=e}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"adapt-rx-textfield",10),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.role.datatag=e}),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",11),o["\u0275\u0275elementStart"](21,"button",12),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](22),o["\u0275\u0275pipe"](23,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](24,"button",13),o["\u0275\u0275listener"]("click",function(){return t.closeModal()}),o["\u0275\u0275text"](25,"Cancel"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](3,25,"com.bmc.arsys.rx.client.admin.role-permissions.general-information.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,27,"com.bmc.arsys.rx.client.common.application-or-library.label")),o["\u0275\u0275property"]("ngModel",t.selectedApplication)("options",t.applicationOptions)("optionFormatter",t.optionFormatter)("readonly",t.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](9,29,"com.bmc.arsys.rx.client.admin.role-permissions.role-name.label")),o["\u0275\u0275property"]("ngModel",t.role.roleName)("rxCustomValidators",t.validatorFn),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,31,"com.bmc.arsys.rx.client.admin.role-permissions.role-id.label")),o["\u0275\u0275property"]("max",t.maxRoleId)("min",t.minRoleId)("adaptMax",t.maxRoleId)("adaptMin",t.minRoleId)("ngModel",t.role.roleID),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](15,33,"com.bmc.arsys.rx.client.admin.role-permissions.group-mapping.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngModel",t.role.test)("typeahead",t.testSearch),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngModel",t.role.production)("typeahead",t.productionSearch),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](19,35,"com.bmc.arsys.rx.client.admin.role-permissions.datatag.label")),o["\u0275\u0275property"]("ngModel",t.role.datatag),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled)("adaptInlineLoader",t.isSaveInProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](23,37,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.RequiredValidator,r.NgControlStatus,r.NgModel,a.AdaptRxTextfieldComponent,l.RxCustomValidatorsDirective,a.AdaptRxCounterComponent,a.AdaptIntegerNumberValidatorDirective,a.AdaptMaxValidatorDirective,a.AdaptMinValidatorDirective,a.AdaptRxTypeaheadComponent,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective],pipes:[u.TranslatePipe],encapsulation:2}),function(e){e.RoleId="roleID",e.RoleName="roleName",e.ApplicationName="applicationName",e.Datatag="datatag"}(id||(id={}));class nd{constructor(e,t,i,n,o){this.rxRolePermissionsService=e,this.rxNotificationService=t,this.rxModalService=i,this.rxRoleDataPage=n,this.translateService=o,this.isDirty=!1,this.getData=e=>(delete e.searchText,this.rxRoleDataPage.get({params:Object.assign({},e)}))}ngOnInit(){const e=[{index:0,fieldId:id.RoleId,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.role-id.label"),filterable:!1},{index:1,fieldId:id.RoleName,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.role-name.label"),filterable:!0,clickable:!0,actions:[{name:(e,t)=>this.editRole(t)}]},{index:2,fieldId:id.ApplicationName,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.application-issues.application-name.title"),filterable:!0},{index:3,fieldId:id.Datatag,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.datatag.label"),filterable:!1}],t={fieldDefinitions:[{id:id.RoleId,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:id.RoleName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:id.ApplicationName,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:id.Datatag,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},i=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.delete-confirmation.message")}).then(e=>{if(e){const e=(0,m.castArray)(this.rolesPermissionsRecordGrid.api.getSelectedRows()).map(e=>({applicationName:e[id.ApplicationName],name:e[id.RoleName]}));this.rxRolePermissionsService.delete(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.roles-deleted.message")),this.rolesPermissionsRecordGrid.api.refresh().subscribe()})}})}}]}];this.recordGridConfig$=(0,h.of)({columns:e,enableFiltering:!0,recordIdField:id.RoleId,getRecordDefinition:()=>(0,h.of)(t),enableRowSelection:d.RowSelectionMode.Multiple,actionButtons:i,getData:this.getData,styles:"flex-fill"})}openDockedPanel(e,t){this.rxModalService.openDockedPanel({title:e,content:td,size:"lg",data:{role:t}}).then(e=>{e&&this.rolesPermissionsRecordGrid.api.refresh().subscribe()}).catch(m.noop)}createRole(){this.openDockedPanel(this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.create-role.label"),{roleID:null,roleName:"",datatag:"",test:"",production:"",applicationName:""})}editRole(e){this.rxRolePermissionsService.get({applicationName:e[id.ApplicationName],name:e[id.RoleName]}).subscribe(e=>{this.openDockedPanel(this.translateService.instant("com.bmc.arsys.rx.client.admin.role-permissions.edit-role.label"),e)})}}nd.\u0275fac=function(e){return new(e||nd)(o["\u0275\u0275directiveInject"](ed),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxRoleDataPageService),o["\u0275\u0275directiveInject"](u.TranslateService))},nd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:nd,selectors:[["rx-admin-role-permissions"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ar,5),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.rolesPermissionsRecordGrid=e.first)}},decls:7,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start","btn","btn-link",3,"click"],["rx-id","roles-permissions-grid",3,"config"],["rolesPermissionsRecordGrid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createRole()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.role-permissions.header.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class od{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-role-permissions",componentFactory:this.componentFactoryResolver.resolveComponentFactory(nd),name:"Role permissions",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}od.\u0275fac=function(e){return new(e||od)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},od.\u0275mod=o["\u0275\u0275defineNgModule"]({type:od,declarations:[nd,td],imports:[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptRxCounterModule,a.AdaptRxFormControlModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxTypeaheadModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,d.RecordGridModule,l.RxDirectivesModule,u.TranslateModule]}),od.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptRxCounterModule,a.AdaptRxFormControlModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptRxTypeaheadModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,d.RecordGridModule,l.RxDirectivesModule,u.TranslateModule]]});const rd=1780,ad=1781,sd=1782,ld=1784,cd={recordDefinitionName:"OAuth Configuration",oAuthConfigurationDescription:"oauth-configuration",fieldIds:{bundleId:61001,oAuthProvider:1783},sections:[{title:"com.bmc.arsys.rx.client.admin.rsso-auth.bmc-helix-digital-workplace.title",isOpen:!0,isSaveInProgress:!1,recordInstanceId:"",rxId:"digital-workplace",fields:[{id:sd,type:"text",name:"API authorization endpoint",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.api-authorization-endpoint-url.label",rxId:"api-auth-endpoint"},{id:ld,type:"text",name:"Resource server",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.resource-server.label",rxId:"resource-server"},{id:rd,type:"text",name:"Client ID",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"client-id"},{id:ad,type:"password",name:"Client secret",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"client-secret"}],formName:"digitalWorkplaceForm",oAuthProvider:"RSSO OAuth"},{title:"com.bmc.arsys.rx.client.admin.rsso-auth.bmc-helix-cloud-cost.title",isOpen:!0,isSaveInProgress:!1,recordInstanceId:"",rxId:"cloud-cost",fields:[{id:sd,type:"text",name:"API authorization endpoint",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.api-authorization-endpoint-url.label",rxId:"api-auth-endpoint"},{id:ld,type:"text",name:"Resource server",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.resource-server.label",rxId:"resource-server"},{id:rd,type:"text",name:"Client ID",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"client-id"},{id:ad,type:"password",name:"Client secret",value:"",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"client-secret"}],formName:"cloudCostForm",oAuthProvider:"Cloud Cost RSSO"}]};class dd{constructor(e,t,i){this.rxRecordInstanceService=e,this.rxRecordInstanceUpdateService=t,this.rxRecordInstanceDataPageService=i}getConfigs(){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:cd.recordDefinitionName,queryExpression:`('${x.RX_RECORD_DEFINITION.coreFieldIds.description}'="${cd.oAuthConfigurationDescription}")`,propertySelection:[x.RX_RECORD_DEFINITION.coreFieldIds.id,cd.fieldIds.oAuthProvider]}}).pipe((0,v.map)(e=>e.data.map(e=>Object.keys(e).map(function(t){return{id:t,value:e[t]}}))))}saveConfigRecordInstance(e){return e.id?this.rxRecordInstanceUpdateService.execute(e):this.rxRecordInstanceService.create(e)}getConfigRecordInstance(e){return e?this.rxRecordInstanceService.get(cd.recordDefinitionName,e):this.rxRecordInstanceService.getNew(cd.recordDefinitionName)}}dd.\u0275fac=function(e){return new(e||dd)(o["\u0275\u0275inject"](x.RxRecordInstanceService),o["\u0275\u0275inject"](x.RxRecordInstanceUpdateService),o["\u0275\u0275inject"](x.RxRecordInstanceDataPageService))},dd.\u0275prov=o["\u0275\u0275defineInjectable"]({token:dd,factory:dd.\u0275fac,providedIn:"root"});class pd extends p.BaseViewComponent{constructor(e,t,i,n){super(),this.rxRssoOAuthService=e,this.rxCurrentUserService=t,this.rxNotificationService=i,this.translateService=n,this.sections=cd.sections}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.serviceForm.dirty}),this.busy=this.rxRssoOAuthService.getConfigs().pipe((0,v.switchMap)(e=>{const t=(0,m.map)(e,e=>{const t=(0,m.find)(e,{id:String(cd.fieldIds.oAuthProvider)}).value,i=(0,m.find)(this.sections,{oAuthProvider:t});return i.recordInstanceId=(0,m.find)(e,{id:String(x.RX_RECORD_DEFINITION.coreFieldIds.id)}).value,this.rxRssoOAuthService.getConfigRecordInstance(i.recordInstanceId).pipe((0,v.tap)(e=>{(0,m.map)(i.fields,t=>{t.value=e.fieldInstances[t.id].value})}))});return(0,h.forkJoin)(t)})).subscribe()}save(e,t){e.isSaveInProgress=!0,this.rxRssoOAuthService.getConfigRecordInstance(e.recordInstanceId).pipe((0,v.switchMap)(t=>((0,m.map)(e.fields,e=>{t.fieldInstances[e.id].value=e.value}),t.setFieldValue(cd.fieldIds.oAuthProvider,e.oAuthProvider),t.setFieldValue(cd.fieldIds.bundleId,f.RX_APPLICATION.chatbotBundleId),t.setFieldValue(x.RX_RECORD_DEFINITION.coreFieldIds.description,cd.oAuthConfigurationDescription),this.rxRssoOAuthService.saveConfigRecordInstance(t))),(0,v.catchError)(t=>(e.isSaveInProgress=!1,(0,h.throwError)(t)))).subscribe(i=>{i&&(e.recordInstanceId=i.id),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.rsso-auth.rsso-oauth-settings-saved.message")),t.form.markAsPristine(),e.isSaveInProgress=!1})}isSaveButtonDisabled(e){return e.pristine||e.invalid}isSaveButtonVisible(){return this.rxCurrentUserService.isAdministrator()}isSaveInProgress(e){return e.isSaveInProgress}}pd.\u0275fac=function(e){return new(e||pd)(o["\u0275\u0275directiveInject"](dd),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService))},pd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:pd,selectors:[["rx-admin-rsso-oauth"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](sr,5,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.serviceForm=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:5,consts:[[3,"header","busy"],["multiselect","true",1,"pb-4"],["name","section.formName",4,"ngFor","ngForOf"],["name","section.formName"],["serviceForm","ngForm"],[1,"mb-3",3,"title","isOpen"],["class","d-block form-group",3,"name","ngModel","required","label","pattern","isPassword","ngModelChange",4,"ngFor","ngForOf"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary","class","mt-4",3,"disabled","adaptInlineLoader","click",4,"ngIf"],[1,"d-block","form-group",3,"name","ngModel","required","label","pattern","isPassword","ngModelChange"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"mt-4",3,"disabled","adaptInlineLoader","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-accordion",1),o["\u0275\u0275template"](3,dr,6,7,"form",2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.rsso-auth.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",t.sections))},directives:[s.AdminSettingsComponent,a.AdaptAccordionComponent,n.NgForOf,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptAccordionTabComponent,n.NgIf,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel,r.RequiredValidator,r.PatternValidator,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective],pipes:[u.TranslatePipe],styles:[Ci]});class ud{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-rsso-oauth",componentFactory:this.componentFactoryResolver.resolveComponentFactory(pd),name:"RSSO OAuth",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}ud.\u0275fac=function(e){return new(e||ud)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},ud.\u0275mod=o["\u0275\u0275defineNgModule"]({type:ud,declarations:[pd],imports:[n.CommonModule,s.AdminSettingsModule,a.AdaptAccordionModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptBusyModule,r.FormsModule,u.TranslateModule]}),ud.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,a.AdaptAccordionModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptBusyModule,r.FormsModule,u.TranslateModule]]});const md={ruleWithIssues:"rule-with-issues",ruleWithoutIssues:"rule-without-issues",remedyEscalationWithIssues:"remedy-escalation-with-issues",remedyEscalationWithoutIssues:"remedy-escalation-without-issues"},hd={poolWithIssues:"pool-with-issues",poolWithoutIssues:"pool-without-issues"},fd={ruleName:"rule",numberOfDelays:"noOfTimesDelayed"};class gd{constructor(e){this.rxDataPageService=e,this.resource=this.rxDataPageService.withType("com.bmc.arsys.rx.application.rule.datapage.RulePoolStatisticsDataPageQuery")}getRulePoolStatistics(){return this.resource.get().pipe((0,v.map)(e=>e.data))}}gd.\u0275fac=function(e){return new(e||gd)(o["\u0275\u0275inject"](f.RxDataPageFactoryService))},gd.\u0275prov=o["\u0275\u0275defineInjectable"]({token:gd,factory:gd.\u0275fac,providedIn:"root"});class vd{constructor(e,t,i,n,o,r){this.rxGlobalCacheService=e,this.rxDefinitionNameService=t,this.rxOverlayService=i,this.rxRuleDefinitionService=n,this.rxRulePoolDataService=o,this.translateService=r,this.availablePoolsTreeSubject$=new h.BehaviorSubject([]),this.availablePoolsTree$=this.availablePoolsTreeSubject$.asObservable().pipe((0,v.shareReplay)(1))}fetchAvailablePoolsTree(){return(0,h.forkJoin)([this.rxRulePoolDataService.getRulePoolStatistics(),this.rxGlobalCacheService.getBundleDescriptors()]).pipe((0,v.map)(([e,t])=>{this.availablePoolsTreeSubject$.next(this.buildTreeNodes(e,t))})).subscribe()}getAvailablePoolOptions(){return this.availablePoolsTree$.pipe((0,v.map)(this.buildSelectOptions))}getRuleConflictsData(e){return e?e.data.conflictingRules.delayedByRules.concat(e.data.conflictingRules.delaysOtherRules.map(e=>Object.assign(Object.assign({},e),{noOfTimesDelayed:0}))):[]}isRuleDesignerAvailable(e){return!e.remedyEscalation&&Boolean(this.rxDefinitionNameService.getBundleId(e.name))}reassignRuleToPool(e,t){return this.rxRuleDefinitionService.get(e).pipe((0,v.switchMap)(e=>(e.triggerEvent.poolNumber=t,this.rxRuleDefinitionService.update(e))))}buildSelectOptions(e){return e.map(e=>({id:e.data.executionPoolNumber,name:e.label}))}buildTreeNodes(e,t){return e.map(i=>{const n=i.rules.map(n=>{let o;return n.isRuleWithIssues=Boolean(n.conflictingRules.delayedByRules.length||n.conflictingRules.delaysOtherRules.length||n.designTimePoolNumber>e.length),o=n.remedyEscalation?n.isRuleWithIssues?md.remedyEscalationWithIssues:md.remedyEscalationWithoutIssues:n.isRuleWithIssues?md.ruleWithIssues:md.ruleWithoutIssues,n.isEditable=this.isRuleEditable(n,t),{data:n,key:`${i.executionPoolNumber}_${n.guid}`,label:this.rxDefinitionNameService.getDisplayName(n.name),type:o}}),o=i.isDefaultPool?"com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.default-pool-tree-node.label":"com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.pool-tree-node.label",r=this.translateService.instant(o,{poolNumber:i.executionPoolNumber,ruleCount:i.rules.length});return{children:n,data:i,label:r,selectable:!1,type:i.hasRulesWithIssues?hd.poolWithIssues:hd.poolWithoutIssues}})}isRuleEditable(e,t){const i=this.rxDefinitionNameService.getBundleId(e.name),n=(0,m.find)(t,["id",i]);return!(e.remedyEscalation||!Boolean(i))&&this.rxOverlayService.areNewDefinitionsAllowedSync(n)}}vd.\u0275fac=function(e){return new(e||vd)(o["\u0275\u0275inject"](f.RxGlobalCacheService),o["\u0275\u0275inject"](f.RxDefinitionNameService),o["\u0275\u0275inject"](f.RxOverlayService),o["\u0275\u0275inject"](E.RxRuleDefinitionService),o["\u0275\u0275inject"](gd),o["\u0275\u0275inject"](u.TranslateService))},vd.\u0275prov=o["\u0275\u0275defineInjectable"]({token:vd,factory:vd.\u0275fac,providedIn:"root"});class xd extends l.RxModalClass{constructor(e,t,i,n,o,a){super(e,a),this.activeModalRef=e,this.rxNotificationService=t,this.rxRuleDefinitionService=i,this.rxRulePoolManagementService=n,this.translateService=o,this.injector=a,this.isSaveButtonDisabled=!0,this.poolFormControl=new r.FormControl([]),this.destroyed$=new h.ReplaySubject(1),this.poolFormControl.valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.selectedPoolId=e[0].id,this.isSaveButtonDisabled=!1})}ngOnInit(){super.ngOnInit(),this.poolSelectOptions$=this.rxRulePoolManagementService.getAvailablePoolOptions()}optionFormatter(e){return e.name}save(){this.allowDismiss=!1,this.isSaveButtonDisabled=!0,this.rxRulePoolManagementService.reassignRuleToPool(this.activeModalRef.getData().ruleName,this.selectedPoolId).pipe((0,v.take)(1),(0,v.finalize)(()=>{this.allowDismiss=!0,this.isSaveButtonDisabled=!1})).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.reassignment-saved.message")),this.activeModalRef.close(!0)})}cancel(){this.activeModalRef.dismiss(a.DismissReasons.CLOSE_BTN)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}xd.\u0275fac=function(e){return new(e||xd)(o["\u0275\u0275directiveInject"](a.ActiveModalRef),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](E.RxRuleDefinitionService),o["\u0275\u0275directiveInject"](vd),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},xd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:xd,selectors:[["rx-rule-reassignment"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:21,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","rx-id","x-button",1,"close","dp-close",3,"disabled","click"],[1,"modal-body"],[3,"formControl","options","optionFormatter","label"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"adaptInlineLoader","disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"h5",1),o["\u0275\u0275text"](2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](4,"button",2),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",3),o["\u0275\u0275element"](6,"adapt-rx-select",4),o["\u0275\u0275pipe"](7,"async"),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",5),o["\u0275\u0275elementStart"](10,"button",6),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"button",7),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](14),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](3,11,"com.bmc.arsys.rx.client.admin.rule-pool-management.reassignment-dialog.title")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControl",t.poolFormControl)("options",o["\u0275\u0275pipeBind1"](7,13,t.poolSelectOptions$))("optionFormatter",t.optionFormatter)("label",o["\u0275\u0275pipeBind1"](8,15,"com.bmc.arsys.rx.client.admin.rule-pool-management.assign-to.label")),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("adaptInlineLoader",!t.allowDismiss)("disabled",t.isSaveButtonDisabled||!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](12,17,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.allowDismiss),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](15,19,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlDirective,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective],pipes:[u.TranslatePipe,n.AsyncPipe],encapsulation:2});class yd{constructor(e,t,i){this.rxModalService=e,this.rxRulePoolManagementService=t,this.translateService=i,this.availablePoolsTree=[],this.ruleDesignerLink=`/helix/index.html#/${f.RX_APPLICATION.innovationStudioBundleId}/rule/edit/`,this.showOnlyRulesWithIssuesFormControl=new r.FormControl(!1),this.strings={},this.treeWrap=a.TreeWrap.WrapAll,this.destroyed$=new h.ReplaySubject(1),this.selectedRuleValue=null,this.selectedRuleSubject$=new h.BehaviorSubject(this.selectedRuleValue),this.selectedRule$=this.selectedRuleSubject$.asObservable().pipe((0,v.takeUntil)(this.destroyed$)),this.showOnlyRulesWithIssuesSubject$=new h.BehaviorSubject(!1),this.showOnlyRulesWithIssues$=this.showOnlyRulesWithIssuesSubject$.asObservable().pipe((0,v.takeUntil)(this.destroyed$)),this.setStrings(),this.showOnlyRulesWithIssuesFormControl.valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.showOnlyRulesWithIssuesSubject$.next(e)),this.ruleConflictsTableConfig={columns:[{header:this.strings.ruleNameColumnTitle,field:`${fd.ruleName}`},{header:this.strings.numberOfDelaysColumnTitle,field:`${fd.numberOfDelays}`}],data:[],texts:{emptyStateLabelText:this.strings.ruleConflictsEmptyStateLabel}},this.selectedRule$.subscribe(e=>{this.selectedRuleValue=e,this.ruleConflictsTableConfig.data=this.rxRulePoolManagementService.getRuleConflictsData(e)}),(0,h.combineLatest)([this.rxRulePoolManagementService.availablePoolsTree$,this.showOnlyRulesWithIssues$]).pipe((0,v.map)(([e,t])=>t?e.map(e=>Object.assign(Object.assign({},e),{children:e.data.hasRulesWithIssues?e.children.filter(({data:e})=>e.isRuleWithIssues):[]})):e),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{if(this.availablePoolsTree.forEach((t,i)=>{const n=e[i];n.expanded=n.children.length&&t.expanded}),this.availablePoolsTree=e,this.selectedRuleValue){this.availablePoolsTree.some(e=>{const t=e.children.find(e=>e.data.guid===this.selectedRuleValue.data.guid);if(t)return this.selectedRule=t,!0})||this.selectedRuleSubject$.next(null)}})}get selectedRule(){return this.selectedRuleValue}set selectedRule(e){this.selectedRuleSubject$.next(e)}ngOnInit(){this.busy=this.rxRulePoolManagementService.fetchAvailablePoolsTree()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}isAssignedPoolOutOfRange(){return this.selectedRuleValue.data.designTimePoolNumber>this.availablePoolsTree.length}isRuleDesignerAvailable(){return this.rxRulePoolManagementService.isRuleDesignerAvailable(this.selectedRuleValue.data)}openReassignPoolDialog(){this.rxModalService.openModal({content:xd,data:{ruleName:this.selectedRuleValue.data.name},size:"sm"}).then(()=>this.rxRulePoolManagementService.fetchAvailablePoolsTree(),m.noop)}setStrings(){this.strings={adminSettingsHeader:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.header.title"),assignedPoolLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.assigned-pool.label"),availablePoolsLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.label"),availablePoolsTooltip:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.tooltip",{clockAlertIcon:'<i class="d-icon-clock_alert"></i>',clockArrowIcon:'<i class="d-icon-clock_arrow"></i>',dangerTriangleIcon:'<i class="text-danger d-icon-exclamation_triangle"></i>',triangleIcon:'<i class="d-icon-exclamation_triangle"></i>',successCheckIcon:'<i class="text-success d-icon-check_circle"></i>',checkIcon:'<i class="d-icon-check_circle"></i>'}),averageExecutionTimeLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.average-execution-time.label"),averageLatencyLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.average-latency.label"),lastEndDateLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.last-end-date.label"),lastStartDateLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.last-start-date.label"),numberOfDelaysColumnTitle:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.column.delays-caused.title"),numberOfRunsLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.execution-count.label"),selectedRuleEmptyStateLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.selected-rule.empty-state.label"),showOnlyRulesWithIssuesLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.show-only-rules-with-issues.label"),reassignButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.button.reassign.label"),ruleConflictsEmptyStateLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.empty-state.label"),ruleConflictsTitle:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.title"),ruleNameColumnTitle:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.column.rule-name.title"),ruleNameLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.rule-name.label"),rulePoolsEmptyStateLabel:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-data-to-display.label"),ruleSummaryTitle:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.title"),ruleSummaryTooltip:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.tooltip"),timerDefinitionLabel:this.translateService.instant("com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.timer-definition.label")}}}yd.\u0275fac=function(e){return new(e||yd)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](vd),o["\u0275\u0275directiveInject"](u.TranslateService))},yd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:yd,selectors:[["rx-admin-rule-pool-management"]],decls:4,vars:4,consts:[[3,"header","busy"],["class","d-flex h-100 overflow-auto",4,"ngIf","ngIfElse"],["emptyRulePoolsTemplate",""],[1,"d-flex","h-100","overflow-auto"],[1,"d-flex","flex-shrink-0","flex-column","border-right","page-content-left","pr-4"],[1,"m-0"],["name","info_circle_o_adapt","maxWidth","400",3,"adaptPopover"],["availablePoolsTooltipTemplate",""],[3,"label","formControl"],[1,"overflow-auto"],["selectionMode","single",3,"value","selection","wrap","selectionChange"],["adaptTreeNodeTemplate","pool-without-issues"],["adaptTreeNodeTemplate","pool-with-issues"],["adaptTreeNodeTemplate","rule-without-issues"],["adaptTreeNodeTemplate","rule-with-issues"],["adaptTreeNodeTemplate","remedy-escalation-with-issues"],["adaptTreeNodeTemplate","remedy-escalation-without-issues"],[1,"flex-fill","pl-4"],[4,"ngIf","ngIfElse"],["noRuleSelectedTemplate",""],[3,"innerHtml"],[1,"text-success","d-icon-check_circle","at-action-icon"],[1,"text-danger","d-icon-exclamation_triangle","at-action-icon"],[1,"d-flex",3,"adaptTooltip","popupDelay"],[1,"d-icon-check_circle","at-action-icon",3,"ngClass"],[1,"d-icon-exclamation_triangle","at-action-icon",3,"ngClass"],[1,"d-icon-clock_alert","at-action-icon"],[1,"d-icon-clock_arrow","at-action-icon"],[1,"mt-0"],["name","info_circle_o_adapt","maxWidth","280","placement","bottom",3,"adaptPopover"],["ruleSummaryTooltipTemplate",""],[1,"mb-3"],[3,"label"],["class","rule-name-value",4,"ngIf","ngIfElse"],["ruleFullNameWithDesignerLink",""],[1,"d-flex","mb-3"],[1,"flex-fill","col-4","p-0"],[1,"pb-1"],[1,"form-control-label","pr-3"],["btn-type","tertiary","class","p-0 border-0","rx-id","reassign-button",3,"vertical-align","click",4,"ngIf"],["class","d-icon-exclamation_triangle at-action-icon",3,"ngClass",4,"ngIf"],["class","text-danger d-icon-exclamation_triangle",3,"ngClass",4,"ngIf"],[3,"columns","bordered","sortable","texts","value"],[3,"innerHTML"],[1,"rule-name-value"],["adapt-button","","btn-type","tertiary","rx-id","open-rule-designer-button","target","_blank",1,"d-icon-left-pop_up","p-0","border-0","rule-name-value",3,"href"],["btn-type","tertiary","rx-id","reassign-button",1,"p-0","border-0",3,"click"],[1,"d-icon-pencil"],[1,"text-danger","d-icon-exclamation_triangle",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-center","h-100"],[3,"type","label"],[1,"d-flex","align-items-center","h-100"],[1,"flex-fill",3,"type","label"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275template"](1,Ar,20,9,"div",1),o["\u0275\u0275template"](2,Tr,2,2,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e){const e=o["\u0275\u0275reference"](3);o["\u0275\u0275propertyInterpolate"]("header",t.strings.adminSettingsHeader),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.availablePoolsTree.length)("ngIfElse",e)}},directives:[s.AdminSettingsComponent,n.NgIf,a.AdaptIconComponent,a.AdaptPopoverDirective,a.AdaptRxCheckboxComponent,r.NgControlStatus,r.FormControlDirective,a.AdaptTreeComponent,a.AdaptTreeNodeTemplateDirective,a.AdaptTooltipDirective,n.NgClass,a.AdaptRxControlLabelComponent,C.AdaptTableComponent,a.AdaptButtonComponent,a.AdaptEmptyStateComponent],pipes:[E.RxRuleTriggerTimeCriteriaDisplayValuePipe,n.DatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}rx-admin-settings[_ngcontent-%COMP%]{max-height:calc(100vh - 54px)}.overflow-auto[_ngcontent-%COMP%]{overflow:auto}.page-content-left[_ngcontent-%COMP%]{width:280px}.rule-name-value[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;line-height:1.5385}']});class bd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-rule-pool-management",componentFactory:this.componentFactoryResolver.resolveComponentFactory(yd),name:"Rule pool management",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}bd.\u0275fac=function(e){return new(e||bd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},bd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:bd,declarations:[xd,yd],imports:[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptRxCheckboxModule,a.AdaptRxFormControlModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,C.AdaptTableModule,a.AdaptTooltipModule,a.AdaptTreeModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,E.RxRulePipesModule,u.TranslateModule]}),bd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptEmptyStateModule,a.AdaptIconModule,a.AdaptPopoverModule,a.AdaptRxCheckboxModule,a.AdaptRxFormControlModule,a.AdaptRxLabelModule,a.AdaptRxSelectModule,C.AdaptTableModule,a.AdaptTooltipModule,a.AdaptTreeModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,E.RxRulePipesModule,u.TranslateModule]]});class Cd{constructor(e){this.rxSystemConfigurationService=e}getServerInformation(){return this.rxSystemConfigurationService.queryConfiguration(["VERSION","SERVER_DIR","OS","HARDWARE","SERVER_NAME","SERVER_TIME","CONFIGURATION_NAME","DB_TYPE","DB_NAME","DB_VERSION","DB_USER"]).pipe((0,v.map)(e=>({serverVersion:(0,m.find)(e,{id:"VERSION"}).value,serverDirectory:(0,m.find)(e,{id:"SERVER_DIR"}).value,operatingSystem:(0,m.find)(e,{id:"OS"}).value,hardware:(0,m.find)(e,{id:"HARDWARE"}).value,serverName:(0,m.find)(e,{id:"SERVER_NAME"}).value,serverTime:new Date(1e3*(0,m.find)(e,{id:"SERVER_TIME"}).value).toLocaleString(),configurationName:(0,m.find)(e,{id:"CONFIGURATION_NAME"}).value,databaseType:(0,m.find)(e,{id:"DB_TYPE"}).value,databaseName:(0,m.find)(e,{id:"DB_NAME"}).value,databaseVersion:(0,m.find)(e,{id:"DB_VERSION"}).value,databaseUser:(0,m.find)(e,{id:"DB_USER"}).value})))}}Cd.\u0275fac=function(e){return new(e||Cd)(o["\u0275\u0275inject"](f.RxSystemConfigurationService))},Cd.\u0275prov=o["\u0275\u0275defineInjectable"]({token:Cd,factory:Cd.\u0275fac,providedIn:"root"});class Sd{constructor(e){this.rxServerInformationService=e}ngOnInit(){this.busy=this.rxServerInformationService.getServerInformation().subscribe(e=>{this.serverInformation=e})}}Sd.\u0275fac=function(e){return new(e||Sd)(o["\u0275\u0275directiveInject"](Cd))},Sd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Sd,selectors:[["rx-admin-server-information"]],decls:37,vars:44,consts:[[3,"header","busy"],[1,"row"],[1,"col-md-4"],["rx-id","server-version","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","server-directory","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","operating-system","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","hardware","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","server-name","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","server-time","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","configuration-name","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","database-type","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","database-name","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"],["rx-id","database-version","readonly","true","disabledStyleForReadonlyState","true",1,"d-block","form-group",3,"label","ngModel"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275element"](4,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",2),o["\u0275\u0275element"](7,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",1),o["\u0275\u0275elementStart"](10,"div",2),o["\u0275\u0275element"](11,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div",2),o["\u0275\u0275element"](14,"adapt-rx-textfield",6),o["\u0275\u0275pipe"](15,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](16,"div",1),o["\u0275\u0275elementStart"](17,"div",2),o["\u0275\u0275element"](18,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"div",2),o["\u0275\u0275element"](21,"adapt-rx-textfield",8),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",1),o["\u0275\u0275elementStart"](24,"div",2),o["\u0275\u0275element"](25,"adapt-rx-textfield",9),o["\u0275\u0275pipe"](26,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](27,"div",2),o["\u0275\u0275element"](28,"adapt-rx-textfield",10),o["\u0275\u0275pipe"](29,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](30,"div",1),o["\u0275\u0275elementStart"](31,"div",2),o["\u0275\u0275element"](32,"adapt-rx-textfield",11),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](34,"div",2),o["\u0275\u0275element"](35,"adapt-rx-textfield",12),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,22,"com.bmc.arsys.rx.client.admin.server-information.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,24,"com.bmc.arsys.rx.client.admin.server-information.server-version.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.serverVersion),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,26,"com.bmc.arsys.rx.client.admin.server-information.server-directory.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.serverDirectory),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,28,"com.bmc.arsys.rx.client.admin.server-information.operating-system.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.operatingSystem),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](15,30,"com.bmc.arsys.rx.client.admin.server-information.hardware.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.hardware),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](19,32,"com.bmc.arsys.rx.client.admin.server-information.server-name-alias.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.serverName),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](22,34,"com.bmc.arsys.rx.client.admin.server-information.server-time.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.serverTime),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate1"]("label"," ",o["\u0275\u0275pipeBind1"](26,36,"com.bmc.arsys.rx.client.admin.server-information.configuration-name-time.label"),""),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.configurationName),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](29,38,"com.bmc.arsys.rx.client.admin.server-information.database-type.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.databaseType),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](33,40,"com.bmc.arsys.rx.client.admin.server-information.database-tablespace-name.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.databaseName),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](36,42,"com.bmc.arsys.rx.client.admin.server-information.database-version.label")),o["\u0275\u0275property"]("ngModel",null==t.serverInformation?null:t.serverInformation.databaseVersion))},directives:[s.AdminSettingsComponent,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.NgModel],pipes:[u.TranslatePipe],encapsulation:2});class wd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-server-information",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Sd),name:"Server information",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}wd.\u0275fac=function(e){return new(e||wd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},wd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:wd,declarations:[Sd],imports:[s.AdminSettingsModule,a.AdaptRxTextfieldModule,n.CommonModule,r.FormsModule,u.TranslateModule]}),wd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptRxTextfieldModule,n.CommonModule,r.FormsModule,u.TranslateModule]]});const Id={configUrl:`${f.RX_ADMINISTRATION.systemConfigurationUrl}/logging/server`,downloadUrl:`${f.RX_ADMINISTRATION.systemConfigurationUrl}/logging/server/download`,defaultFormConfig:{autoTurnOffDuration:30,ruleLogOn:!1,timedRuleLogOn:!1,processLogOn:!1,sqlLogOn:!1,apiLogOn:!1}};class _d{constructor(e){this.httpClient=e}getConfig(){return this.httpClient.get(Id.configUrl)}save(e){return this.httpClient.post(Id.configUrl,e)}downloadServerLogs(e){return this.httpClient.post(Id.downloadUrl,e,{observe:"response",responseType:"arraybuffer"})}}_d.\u0275fac=function(e){return new(e||_d)(o["\u0275\u0275inject"](b.HttpClient))},_d.\u0275prov=o["\u0275\u0275defineInjectable"]({token:_d,factory:_d.\u0275fac,providedIn:"root"});class Dd extends p.BaseViewComponent{constructor(e,t,i,n){super(),this.formBuilder=e,this.rxNotificationService=t,this.rxServerErrorHandlerService=i,this.rxServerLogsService=n,this.hostClass="d-block col-md-9 p-0"}getServerLogsConfig(){this.busy=this.rxServerLogsService.getConfig().subscribe(e=>{this.serverLogsForm.patchValue(e)})}toggleAdditionalLogTypes(){this.shouldDisplayAdditionalLogTypes=!this.shouldDisplayAdditionalLogTypes}save(){const e=this.serverLogsForm.getRawValue();this.rxServerLogsService.save(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage("Server Logs configuration saved successfully."),this.serverLogsForm.markAsPristine()})}downloadLogs(){this.isDownloadInProgress=!0,this.rxServerLogsService.downloadServerLogs({fileNames:["server","License"]}).subscribe(e=>{g.RxFileService.saveFile(e),this.isDownloadInProgress=!1},e=>{e.data=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e.error))),this.rxServerErrorHandlerService.handle(e),this.isDownloadInProgress=!1})}get autoTurnOffDuration(){return this.serverLogsForm.get("autoTurnOffDuration").value}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.serverLogsForm.dirty}),this.serverLogsForm=this.formBuilder.group(Id.defaultFormConfig),this.getServerLogsConfig()}}Dd.\u0275fac=function(e){return new(e||Dd)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxServerErrorHandlerService),o["\u0275\u0275directiveInject"](_d))},Dd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Dd,selectors:[["rx-admin-server-logs"]],hostVars:2,hostBindings:function(e,t){2&e&&o["\u0275\u0275classMap"](t.hostClass)},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:34,vars:36,consts:[[3,"header","busy"],[3,"formGroup"],[1,"dt"],["rx-id","logs-duration",1,"d-flex","p-0","logs-duration"],["formControlName","autoTurnOffDuration","min","1","adaptIntegerNumber",""],[1,"p-2"],["class","adapt-mt-error",4,"ngIf"],["formControlName","ruleLogOn",3,"label"],["formControlName","timedRuleLogOn",3,"label"],["formControlName","processLogOn",3,"label"],["rx-id","show-additional-log",1,"btn-link","alert-link","pt-2",3,"click"],[4,"ngIf"],[1,"mt-4","d-flex"],["type","submit","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-3",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","activeText","Downloading...","rx-id","download-button",3,"adaptInlineLoader","click"],[1,"adapt-mt-error"],["formControlName","sqlLogOn",3,"label"],["formControlName","apiLogOn",3,"label"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",1),o["\u0275\u0275elementStart"](3,"div"),o["\u0275\u0275elementStart"](4,"h6",2),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"div",3),o["\u0275\u0275element"](8,"adapt-rx-counter",4),o["\u0275\u0275elementStart"](9,"span",5),o["\u0275\u0275text"](10),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](12,Fr,3,3,"div",6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](13,"div"),o["\u0275\u0275elementStart"](14,"h6",2),o["\u0275\u0275text"](15),o["\u0275\u0275pipe"](16,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](17,"adapt-rx-checkbox",7),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275element"](19,"adapt-rx-checkbox",8),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275element"](21,"adapt-rx-checkbox",9),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](23,"div",10),o["\u0275\u0275listener"]("click",function(){return t.toggleAdditionalLogTypes()}),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](26,Er,8,9,"div",11),o["\u0275\u0275elementStart"](27,"div",12),o["\u0275\u0275elementStart"](28,"button",13),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](29),o["\u0275\u0275pipe"](30,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](31,"button",14),o["\u0275\u0275listener"]("click",function(){return t.downloadLogs()}),o["\u0275\u0275text"](32),o["\u0275\u0275pipe"](33,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,16,"com.bmc.arsys.rx.client.admin.server-logs.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.serverLogsForm),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](6,18,"com.bmc.arsys.rx.client.admin.server-logs.capture-logs.title")),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](11,20,"com.bmc.arsys.rx.client.admin.server-logs.minutes.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.autoTurnOffDuration<1),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](16,22,"com.bmc.arsys.rx.client.admin.server-logs.log-types-to-be-captured.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](18,24,"com.bmc.arsys.rx.client.admin.server-logs.rule.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,26,"com.bmc.arsys.rx.client.admin.server-logs.escalation.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](22,28,"com.bmc.arsys.rx.client.admin.server-logs.process.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](25,30,t.shouldDisplayAdditionalLogTypes?"com.bmc.arsys.rx.client.admin.server-logs.show-less.label":"com.bmc.arsys.rx.client.admin.server-logs.show-more.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.shouldDisplayAdditionalLogTypes),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.serverLogsForm.pristine||t.autoTurnOffDuration<1),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](30,32,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("adaptInlineLoader",t.isDownloadInProgress),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](33,34,"com.bmc.arsys.rx.client.admin.server-logs.download-logs.label")," "))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxCounterComponent,r.NgControlStatus,r.FormControlName,n.NgIf,a.AdaptRxCheckboxComponent,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective],pipes:[u.TranslatePipe],styles:[".logs-duration[_ngcontent-%COMP%]{max-width:200px}"]});class Rd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-server-logs",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Dd),name:"Server logs",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Rd.\u0275fac=function(e){return new(e||Rd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Rd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Rd,declarations:[Dd],imports:[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,u.TranslateModule]}),Rd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptBusyModule,a.AdaptButtonModule,a.AdaptRxCheckboxModule,a.AdaptRxCounterModule,a.AdaptRxValidatorsModule,s.AdminSettingsModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,u.TranslateModule]]});const Ad={connections:{cognitiveAdminCredential:"cognitiveAdminCredential"},providers:{watson:"WATSON"},regionOptions:[{name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.germany.label",id:"EU_DE"},{name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.sydney.label",id:"AU_SYD"},{name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.us-east.label",id:"US_EAST"},{name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.us-south.label",id:"US_SOUTH"},{name:"com.bmc.arsys.rx.client.admin.cognitive-service.region.uk.label",id:"EU_GB"}]};class Td{constructor(e,t,i){this.translateService=e,this.rxSystemConfigurationService=t,this.rxNotificationService=i,this.isSaveInProgress=!1,this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.regionOptions=Ad.regionOptions.map(e=>Object.assign(Object.assign({},e),{name:this.translateService.instant(e.name)})),this.optionFormatter=e=>(0,m.get)(e,"name",this.defaultSelection)}ngOnInit(){this.servicesProviderRegionForm=new r.FormGroup({region:new r.FormControl("")}),this.rxSystemConfigurationService.getConfiguration(Ad.connections.cognitiveAdminCredential).subscribe(e=>{const t=JSON.parse(e.value);this.servicesProviderRegionForm.get("region").setValue([(0,m.find)(this.regionOptions,{id:t[Ad.providers.watson].cognitiveAdminRegionName})])})}save(){this.isSaveInProgress=!0;const e={[Ad.providers.watson]:{cognitiveAdminRegionName:this.servicesProviderRegionForm.get("region").value[0].id}};this.rxSystemConfigurationService.setConfiguration(Ad.connections.cognitiveAdminCredential,e).subscribe(e=>{this.isSaveInProgress=!1,this.servicesProviderRegionForm.markAsPristine(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.services-provider-region.saved.message"))},e=>{this.isSaveInProgress=!1})}canSave(){return!this.isSaveInProgress&&this.servicesProviderRegionForm.valid&&this.servicesProviderRegionForm.dirty}}Td.\u0275fac=function(e){return new(e||Td)(o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](f.RxNotificationService))},Td.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Td,selectors:[["rx-admin-services-provider-region"]],decls:8,vars:13,consts:[[3,"header"],[3,"formGroup"],["name","region","formControlName","region","rx-id","region","required","",1,"form-group","d-block",3,"options","label","optionFormatter"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",1),o["\u0275\u0275element"](3,"adapt-rx-select",2),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementStart"](5,"button",3),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](6),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.admin.services-provider-region.header.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.servicesProviderRegionForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,9,"com.bmc.arsys.rx.client.admin.services-provider-region.region.label")),o["\u0275\u0275property"]("options",t.regionOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!t.canSave()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](7,11,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Qi]});class Fd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-services-provider-region",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Td),name:"Services provider region",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Fd.\u0275fac=function(e){return new(e||Fd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Fd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Fd,declarations:[Td],imports:[n.CommonModule,r.ReactiveFormsModule,a.AdaptRxSelectModule,u.TranslateModule,s.AdminSettingsModule,a.AdaptButtonModule]}),Fd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.ReactiveFormsModule,a.AdaptRxSelectModule,u.TranslateModule,s.AdminSettingsModule,a.AdaptButtonModule]]});const Ed={summarizationServiceEndpointConfiguration:"summarizationServiceEndpointConfiguration"},Md="NATIVE";class Od extends p.BaseViewComponent{constructor(e,t,i,n,o){super(),this.translateService=e,this.rxCommandFactoryService=t,this.rxSystemConfigurationService=i,this.rxNotificationService=n,this.rxCurrentUserService=o,this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.isSaveInProgress=!1,this.isAdministrator=this.rxCurrentUserService.isAdministrator()}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.summarizationServiceForm.dirty}),this.summarizationServiceForm=new r.FormGroup({endpoint:new r.FormControl(""),username:new r.FormControl(""),password:new r.FormControl("")}),this.rxSystemConfigurationService.getConfiguration(Ed.summarizationServiceEndpointConfiguration).subscribe(e=>{const t=JSON.parse(e.value)[Md];this.summarizationServiceForm.get("endpoint").setValue(t.endpoint),this.summarizationServiceForm.get("username").setValue(t.username),this.summarizationServiceForm.get("password").setValue(t.username)}),this.summarizationServiceForm.valueChanges.pipe((0,v.takeUntil)(this.destroyed$)).subscribe(e=>this.resetConnectionTest())}resetConnectionTest(){this.connectionTestStatus=this.summarizationServiceForm.valid&&this.summarizationServiceForm.dirty?l.ConnectionTestStatus.Unknown:l.ConnectionTestStatus.Invalid}onTestConnection(){this.rxCommandFactoryService.forResourceType("com.bmc.arsys.rx.application.cognitive.command.PingSummarizationServiceCommand").execute(this.summarizationServiceForm.value).pipe((0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(()=>{this.connectionTestStatus=l.ConnectionTestStatus.Passed})}save(){this.isSaveInProgress=!0,this.rxSystemConfigurationService.setConfiguration(Ed.summarizationServiceEndpointConfiguration,{[Md]:this.summarizationServiceForm.value}).subscribe(e=>{this.isSaveInProgress=!1,this.summarizationServiceForm.markAsPristine(),this.resetConnectionTest(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.summarization-service.saved.message"))},e=>{this.isSaveInProgress=!1})}isSaveButtonDisabled(){return this.summarizationServiceForm.pristine||this.summarizationServiceForm.invalid||this.connectionTestStatus!==l.ConnectionTestStatus.Passed||this.isSaveInProgress}}Od.\u0275fac=function(e){return new(e||Od)(o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService))},Od.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Od,selectors:[["rx-admin-summarization-service"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:15,consts:[[3,"header"],[3,"formGroup"],["name","endpoint","rx-id","api-endpoint-url","formControlName","endpoint","required","",1,"form-group","d-block",3,"label"],["name","username","rx-id","user-name","formControlName","username","required","",1,"form-group","d-block",3,"label"],["name","password","rx-id","password","formControlName","password","required","",1,"form-group","d-block",3,"label","isPassword"],["class","d-flex",4,"ngIf"],[1,"d-flex"],["buttonType","secondary","rx-id","test-connection-button",3,"status","testConnection"],["adapt-button","","type","button","rx-id","save-button","btn-type","primary",1,"ml-4",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"form",1),o["\u0275\u0275element"](3,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275element"](5,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275template"](9,Mr,5,5,"div",5),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.admin.summarization-service.header.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.summarizationServiceForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](4,9,"com.bmc.arsys.rx.client.admin.summarization-service.api-endpoint-url.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,11,"com.bmc.arsys.rx.client.common.user-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,13,"com.bmc.arsys.rx.client.common.password.label")),o["\u0275\u0275property"]("isPassword",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isAdministrator))},directives:[s.AdminSettingsComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,n.NgIf,l.RxConnectionTesterComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Ci]});class kd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-summarization-service",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Od),name:"Summarization service",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}kd.\u0275fac=function(e){return new(e||kd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},kd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:kd,declarations:[Od],imports:[n.CommonModule,s.AdminSettingsModule,u.TranslateModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,a.AdaptButtonModule]}),kd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,u.TranslateModule,a.AdaptRxTextfieldModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,a.AdaptButtonModule]]});class jd{constructor(e,t){this.httpClient=e,this.rxCommandFactoryService=t,this.textSummarizationCommand="com.bmc.arsys.rx.application.cognitive.command.SummarizeTextCommand",this.recordSummarizationCommand="com.bmc.arsys.rx.application.cognitive.command.SummarizeFromRecInstCommand"}getTextSummarization(e){return this.rxCommandFactoryService.forResourceType(this.textSummarizationCommand).execute(e)}getRecordInstanceSummarization(e){return this.rxCommandFactoryService.forResourceType(this.recordSummarizationCommand).execute(e)}}jd.\u0275fac=function(e){return new(e||jd)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](f.RxCommandFactoryService))},jd.\u0275prov=o["\u0275\u0275defineInjectable"]({token:jd,factory:jd.\u0275fac,providedIn:"root"});class Pd{constructor(e,t,i,n,o,r,a,l,c){this.formBuilder=e,this.rxSummarizationTestingService=t,this.rxNotificationService=i,this.rxRecordDefinitionCacheService=n,this.rxRecordInstanceDataPageService=o,this.adaptDockedPanelService=r,this.rxSystemConfigurationService=a,this.rxJsonParserService=l,this.translateService=c,this.textInputFieldOptions=[],this.summaryOutputFieldOptions=[],this.shouldShowGrid=!1,this.dataSourceOptions=["Email","Chat","Other"],this.index=0,this.defaultSummarizationPercentage=50,this.isSummarizationInProgress=!1,this.isRecordSummarizationInProgress=!1,this.disableContent={variant:"danger",title:this.translateService.instant("com.bmc.arsys.rx.client.admin.summarization-testing.summarization-service-disabled.message"),content:"",dismissible:!1},this.recordDefinition={fieldDefinitions:[]},this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.admin.summarization-testing.record-definition.label"),definitionType:s.RxDefinitionPickerType.RegularRecord,required:!0}}ngOnInit(){this.interactiveSummarizationTestingForm=this.createInteractiveSummarizationTestingForm(),this.recordSummarizationTestingForm=this.createRecordSummarizationTestingForm(),this.shouldShowGrid=!0,this.rxSystemConfigurationService.getConfiguration("summarizationServiceTenantConfiguration").subscribe(e=>{const t=this.rxJsonParserService.tryParseJson(e.value);this.defaultSummarizationPercentage=t.summarizationPercentage||this.defaultSummarizationPercentage,t&&(this.isSummarizationServiceDisabled=!t.enableSummarization,this.interactiveSummarizationTestingForm.get("summarizationPercentage").setValue(t.summarizationPercentage),this.recordSummarizationTestingForm.get("summarizationPercentage").setValue(t.summarizationPercentage))}),this.updateGridConfig(!0),this.recordSummarizationTestingForm.get("recordDefinition").valueChanges.subscribe(e=>this.onRecordDefinitionChange(e)),this.recordSummarizationTestingForm.get("textInputField").valueChanges.subscribe(e=>this.onTextInputFieldChange(e))}createInteractiveSummarizationTestingForm(){return this.formBuilder.group({text:["",r.Validators.required],source:[[this.dataSourceOptions[0]],r.Validators.nullValidator],summarizationPercentage:[50,r.Validators.required],extractedSummaryText:""})}createRecordSummarizationTestingForm(){return this.formBuilder.group({recordDefinition:["",r.Validators.required],textInputField:[[],r.Validators.required],summaryOutputField:[[],r.Validators.required],source:[[this.dataSourceOptions[0]]],summarizationPercentage:[50]})}onRecordDefinitionChange(e){e!==this.recordSummarizationTestingForm.value.recordDefinition&&(this.resetRecordSummarizationTestingForm(),e&&this.rxRecordDefinitionCacheService.getRecordDefinition(e).subscribe(e=>{this.initializeFormControls(e)}))}initializeFormControls(e){this.textInputFieldOptions=e.fieldDefinitions?e.fieldDefinitions.filter(function(e){return e.fieldOption!==x.RX_RECORD_DEFINITION.fieldOptions.system&&e.resourceType===x.RX_RECORD_DEFINITION.resourceTypes.character||e.resourceType===x.RX_RECORD_DEFINITION.resourceTypes.attachment}).map(e=>({id:e.id,name:e.name,resourceType:e.resourceType})):[],this.summaryOutputFieldOptions=this.textInputFieldOptions.filter(e=>e.resourceType===x.RX_RECORD_DEFINITION.resourceTypes.character)}optionFormatter(e){return e.name}onTextInputFieldChange(e){e.length&&(this.recordSummarizationTestingForm.get("summaryOutputField").setValue([]),this.summaryOutputFieldOptions=this.textInputFieldOptions.filter(t=>t.resourceType===x.RX_RECORD_DEFINITION.resourceTypes.character&&t.id!==e[0].id),this.updateGridConfig(!1))}resetRecordSummarizationTestingForm(){this.recordSummarizationTestingForm.get("textInputField").reset([]),this.recordSummarizationTestingForm.get("summaryOutputField").reset([]),this.recordSummarizationTestingForm.get("source").reset([this.dataSourceOptions[0]]),this.recordSummarizationTestingForm.get("summarizationPercentage").reset(this.defaultSummarizationPercentage),this.updateGridConfig(!0)}summarizeUsingText(){this.isSummarizationInProgress=!0,this.interactiveSummarizationTestingForm.markAsPristine(),this.rxSummarizationTestingService.getTextSummarization(this.transformFormControlData()).pipe((0,v.catchError)(e=>(this.isSummarizationInProgress=!1,(0,h.throwError)(e)))).subscribe(e=>{this.interactiveSummarizationTestingForm.get("extractedSummaryText").setValue(e[0]),this.rxNotificationService.addSuccessMessage("Summarization completed successfully."),this.isSummarizationInProgress=!1})}transformFormControlData(){const e={texts:[],source:"",summarizationPercentage:0};return e.texts.push(this.interactiveSummarizationTestingForm.get("text").value),e.source=this.interactiveSummarizationTestingForm.get("source").value[0],e.summarizationPercentage=this.interactiveSummarizationTestingForm.get("summarizationPercentage").value,e}resetInteractiveSummarizationTestingForm(){this.interactiveSummarizationTestingForm.get("text").reset(),this.interactiveSummarizationTestingForm.get("source").reset([this.dataSourceOptions[0]]),this.interactiveSummarizationTestingForm.get("summarizationPercentage").reset(this.defaultSummarizationPercentage),this.interactiveSummarizationTestingForm.get("extractedSummaryText").reset("")}isResetButtonDisabled(){return this.interactiveSummarizationTestingForm.pristine||this.interactiveSummarizationTestingForm.invalid}getColumns(){return[{index:0,fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.id),title:"Text input",filterable:!1}]}summarizeUsingRecordInstance(){this.isRecordSummarizationInProgress=!0;const e={recordDefinitionName:(0,m.cloneDeep)(this.recordSummarizationTestingForm.value).recordDefinition,inputFieldId:this.recordSummarizationTestingForm.get("textInputField").value[0].id,outputFieldId:this.recordSummarizationTestingForm.get("summaryOutputField").value[0].id,source:this.recordSummarizationTestingForm.get("source").value[0],summarizationPercentage:this.recordSummarizationTestingForm.get("summarizationPercentage").value},t=this.recordGridComponent.api.getSelectedRows().map(t=>(e.recordID=t[x.RX_RECORD_DEFINITION.coreFieldIds.id],this.rxSummarizationTestingService.getRecordInstanceSummarization(e)));(0,h.forkJoin)(t).pipe((0,v.catchError)(e=>(this.isRecordSummarizationInProgress=!1,(0,h.throwError)(e)))).subscribe(()=>{this.rxRecordInstanceDataPageService.post({params:{recorddefinition:this.recordSummarizationTestingForm.get("recordDefinition").value,queryExpression:this.prepareQueryExpression()}}).subscribe(e=>{this.isRecordSummarizationInProgress=!1,this.summarizedRecords=e,this.index=0,this.adaptDockedPanelService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.summarization-testing.summarization-details.label"),content:this.viewSummarizationDetailsTemplate,size:"lg"})})})}prepareQueryExpression(){let e="";return this.recordGridComponent.api.getSelectedRows().map(t=>{(0,m.isEmpty)(e)||(e+=" OR "),e+=`('${x.RX_RECORD_DEFINITION.coreFieldIds.id}' = "${t[x.RX_RECORD_DEFINITION.coreFieldIds.id]}")`}),e}isSummarizeButtonDisabled(){return this.isRecordSummarizationInProgress||this.recordSummarizationTestingForm.invalid||this.recordGridComponent.api.getSelectedRows()&&!this.recordGridComponent.api.getSelectedRows().length||this.recordGridComponent.api.getSelectedRows().length>5}previous(){this.index--}next(){this.index++}updateGridConfig(e){this.shouldShowGrid=!1,this.gridConfig=e?this.createEmptyGridConfiguration():this.prepareGridConfiguration(),setTimeout(()=>{this.shouldShowGrid=!0})}getRecordDefinition(){return this.recordDefinition.fieldDefinitions=[{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}],this.recordDefinition}getData(e){return this.recordSummarizationTestingForm.get("recordDefinition").value?this.rxRecordInstanceDataPageService.post({params:Object.assign(Object.assign({},(0,m.omit)(e,["searchText"])),{recorddefinition:this.recordSummarizationTestingForm.get("recordDefinition").value})}).pipe((0,v.map)(e=>(e.data=e.data.filter(e=>null!=e[this.recordSummarizationTestingForm.get("textInputField").value[0].id]),e))):this.rxRecordInstanceDataPageService.getEmptyDataPage()}createEmptyGridConfiguration(){return this.gridConfig=(0,h.of)({actionButtons:[],getData:e=>this.rxRecordInstanceDataPageService.getEmptyDataPage(),getRecordDefinition:()=>(0,h.of)(this.getRecordDefinition()),columns:this.getColumns(),enableFiltering:!0,enableRowSelection:d.RowSelectionMode.Multiple})}prepareGridConfiguration(){const e=this.getColumns(),t=this.getRecordDefinition();if(this.recordSummarizationTestingForm.get("textInputField").value.length){const i=this.recordSummarizationTestingForm.get("textInputField").value[0];t.fieldDefinitions[0]={id:i.id,resourceType:i.resourceType,name:i.name},e[0]={index:0,fieldId:String(i.id),title:`Text input:  ${i.name}`}}return(0,h.of)({actionButtons:[],getData:e=>this.getData(e),getRecordDefinition:()=>(0,h.of)(t),columns:e,enableFiltering:!0,enableRowSelection:d.RowSelectionMode.Multiple})}}Pd.\u0275fac=function(e){return new(e||Pd)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](jd),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceDataPageService),o["\u0275\u0275directiveInject"](a.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService),o["\u0275\u0275directiveInject"](g.RxJsonParserService),o["\u0275\u0275directiveInject"](u.TranslateService))},Pd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Pd,selectors:[["rx-admin-summarization-testing"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](Mt,5),o["\u0275\u0275viewQuery"](Or,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.recordGridComponent=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.viewSummarizationDetailsTemplate=e.first)}},decls:7,vars:5,consts:[[3,"header"],["class","row",4,"ngIf","ngIfElse"],["summarizationTesting",""],["viewSummarizationDetailsTemplate",""],[1,"row"],[1,"col-md-12","form-group"],[1,"disabled-warning"],[3,"config"],[3,"multiselect"],["rx-id","interactive-summarization",3,"title","isOpen"],[3,"formGroup"],[1,"col-md-6"],["formControlName","source","name","source","rx-id","data-source",1,"form-group","d-block",3,"options","label"],["formControlName","text","rx-id","text-input","rows","10",1,"form-group","d-block",3,"label"],[1,"d-flex","flex-wrap"],[1,"flex-grow-1","mr-2","summarization-percentage"],["rx-id","summarization-percentage","required","","adaptRange","",3,"formControl","label","min","max","tooltip"],["adapt-button","","btn-type","primary","type","button","rx-id","summarize-button",1,"mr-2","button-margin-top",3,"adaptInlineLoader","disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","reset-button",1,"d-icon-reply","button-margin-top",3,"click"],["formControlName","extractedSummaryText","rx-id","summary-output","disabled","true","rows","10",1,"form-group","d-block",3,"label"],["adapt-button","","btn-type","secondary","type","button","rx-id","copy-button",1,"mr-2","button-margin-top","d-icon-files_copy_o",3,"cdkCopyToClipboard","disabled"],["rx-id","record-summarization",3,"title","isOpen"],[1,"col-md-5"],[1,"mb-2","d-block",3,"label"],["formControlName","recordDefinition","rx-id","record-definition","required","true",1,"form-group","d-block",3,"options"],["name","textInputField","formControlName","textInputField","rx-id","text-input-field",1,"form-group","d-block",3,"options","label","optionFormatter","tooltip"],["name","summaryOutputField","formControlName","summaryOutputField","rx-id","summary-output-field",1,"form-group","d-block",3,"options","label","optionFormatter"],["adapt-button","","btn-type","primary","type","button","rx-id","summarize-button",1,"mr-2","button-margin-top",3,"disabled","adaptInlineLoader","click"],[1,"col-md-7","d-flex","flex-column"],[3,"config","adaptPopover"],["rx-id","record-grid","class","record-summarization-grid form-group",3,"config",4,"ngIf"],["rx-id","record-grid",1,"record-summarization-grid","form-group",3,"config"],["recordGrid",""],[1,"dp-content"],[1,"row","pt-4","px-4","pb-1","mr-0"],[1,"col-12","form-inline"],["type","button","adapt-button","","btn-type","secondary","rx-id","previous-button","size","small",1,"mr-2","d-icon-left-angle_left",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","next-button","size","small",1,"mr-2","d-icon-right-angle_right",3,"disabled","click"],[1,"mr-2","pl-3"],[1,"dp-body"],[1,"col-md-12"],[1,"form-group",3,"label"],["rx-id","text-input",1,"border-secondary","form-group"],["rx-id","summary-output",1,"border-secondary","form-group"],[1,"dp-footer"],["type","button","adapt-button","","btn-type","secondary","rx-id","close-button",3,"click"]],template:function(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275template"](2,kr,4,1,"div",1),o["\u0275\u0275template"](3,Vr,66,96,"ng-template",null,2,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](5,Lr,26,17,"ng-template",null,3,o["\u0275\u0275templateRefExtractor"])),2&e){const e=o["\u0275\u0275reference"](4);o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.summarization-testing.header.title")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isSummarizationServiceDisabled)("ngIfElse",e)}},directives:[s.AdminSettingsComponent,n.NgIf,a.AdaptAlertComponent,a.AdaptAccordionComponent,a.AdaptAccordionTabComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxSelectComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxTextareaComponent,a.AdaptRxCounterComponent,r.RequiredValidator,a.AdaptRangeValidatorDirective,r.FormControlDirective,a.AdaptButtonComponent,a.AdaptInlineStandaloneDirective,M.CdkCopyToClipboard,a.AdaptRxControlLabelComponent,s.RxDefinitionPickerComponent,a.AdaptPopoverDirective,d.RecordGridComponent],pipes:[u.TranslatePipe],styles:[".summarized-details[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto}.record-summarization-grid[_ngcontent-%COMP%]{height:300px}.button-margin-top[_ngcontent-%COMP%]{margin-top:1.5rem}.summarization-percentage[_ngcontent-%COMP%]{max-width:200px}"]});class Nd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-summarization-testing",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Pd),name:"Summarization testing",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Nd.\u0275fac=function(e){return new(e||Nd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Nd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Nd,declarations:[Pd],imports:[s.AdminSettingsModule,a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptRxTextareaModule,a.AdaptRxSelectModule,a.AdaptRxCounterModule,a.AdaptRxTextfieldModule,a.AdaptRxLabelModule,a.AdaptAlertModule,n.CommonModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,d.RecordGridModule,M.ClipboardModule,a.AdaptPopoverModule,a.AdaptRxValidatorsModule,u.TranslateModule,a.AdaptBusyModule]}),Nd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptRxTextareaModule,a.AdaptRxSelectModule,a.AdaptRxCounterModule,a.AdaptRxTextfieldModule,a.AdaptRxLabelModule,a.AdaptAlertModule,n.CommonModule,r.ReactiveFormsModule,s.RxDefinitionPickerModule,d.RecordGridModule,M.ClipboardModule,a.AdaptPopoverModule,a.AdaptRxValidatorsModule,u.TranslateModule,a.AdaptBusyModule]]});const Vd={languageOptions:[{id:"en",name:"en"},{id:"fr",name:"fr"}],userEngagementResourceType:"com.bmc.arsys.rx.application.cognitive.command.AnalyzeCustomerEngagementToneCommand",documentEngagementResourceType:"com.bmc.arsys.rx.application.cognitive.command.AnalyzeTextToneCommand",systemSettingKeys:{toneScoreThreshold:"Tone-Score-Threshold"}};class Ld{constructor(e,t){this.rxCommandFactoryService=e,this.rxSystemConfigurationService=t,this.languageOptions=Vd.languageOptions,this.language=[],this.defaultToneScoreThreshold=.5}ngOnInit(){this.rxSystemConfigurationService.getConfiguration(Vd.systemSettingKeys.toneScoreThreshold).pipe((0,v.finalize)(()=>this.reset())).subscribe(e=>{this.defaultToneScoreThreshold=e.value?(0,m.toNumber)(e.value):.5})}clearDocumentText(){this.documentText=null}optionFormatter(e){return e.name}setDefaultThreshold(){this.toneScoreThreshold=this.defaultToneScoreThreshold}analyzeTone(){this.rxCommandFactoryService.forResourceType(Vd.documentEngagementResourceType).execute({resourceType:Vd.documentEngagementResourceType,language:(0,m.get)(this.language[0],"id"),text:this.documentText,containsHTML:this.containsHtml,sentenceLevelAnalysis:this.includeSentenceLevelAnalysis,toneScoreThreshold:this.toneScoreThreshold}).subscribe(e=>{this.extractedToneData=e})}reset(){this.language=[Vd.languageOptions[0]],this.documentText=null,this.toneScoreThreshold=this.defaultToneScoreThreshold,this.containsHtml=!1,this.includeSentenceLevelAnalysis=!1,this.extractedToneData=null,this.documentToneAnalysisForm.form.markAsPristine()}isAnalyzeToneButtonDisabled(){return this.documentToneAnalysisForm.pristine||this.documentToneAnalysisForm.invalid}isResetButtonDisabled(){return this.documentToneAnalysisForm.pristine&&(0,m.isNil)(this.documentText)}}Ld.\u0275fac=function(e){return new(e||Ld)(o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService))},Ld.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Ld,selectors:[["rx-document-tone-analysis"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Br,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.documentToneAnalysisForm=e.first)}},decls:45,vars:52,consts:[["documentToneAnalysisForm","ngForm"],[1,"row","mb-4"],[1,"col-md-3"],["rx-id","language","name","language",3,"ngModel","label","options","optionFormatter","ngModelChange"],[1,"col-md-3","contains-html"],["rx-id","document-text-contains-html","name","containsHtml",3,"ngModel","label","ngModelChange"],[1,"col-md-6"],[3,"label"],[1,"mt-1"],["variant","info",4,"ngIf"],["variant","info","class","mr-1",4,"ngFor","ngForOf"],[1,"row"],[1,"col-md-6","form-group"],["rx-id","clear-button","type","button","adapt-button","","btn-type","tertiary",1,"p-0","float-right",3,"click"],["rx-id","document-text","name","documentText","placeholder","Type or paste document text here","required","",3,"ngModel","label","rows","ngModelChange"],[1,"form-group","pt-3"],["type","button","adapt-button","","btn-type","tertiary","rx-id","set-to-default-button",1,"p-0","float-right",3,"click"],["rx-id","tone-score-threshold","name","toneScoreThresholdField","adaptRequired","",3,"ngModel","label","max","min","step","size","tooltip","ngModelChange"],[1,"form-group"],["rx-id","include-sentence-level-analysis","name","includeSentenceLevelAnalysis",3,"ngModel","label","ngModelChange"],[1,"col-12","form-group"],["adapt-button","","btn-type","primary","type","button","rx-id","analyze-tone-button",1,"mr-2","d-icon-left-check_adapt",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","reset-button",1,"mr-2","d-icon-left-undo",3,"disabled","click"],["rx-id","sentences-tone","name","sentenceTone"],["label","Sentences tone"],[1,"sentences-tones","form-control"],["class","sentences-tone",4,"ngFor","ngForOf"],["variant","info"],["variant","info",1,"mr-1"],[1,"sentences-tone"],[1,"sentence"],["class","mr-1","variant","info",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",null,0),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-select",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.language=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"adapt-rx-checkbox",5),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.containsHtml=e}),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275element"](10,"adapt-rx-control-label",7),o["\u0275\u0275pipe"](11,"translate"),o["\u0275\u0275elementStart"](12,"div",8),o["\u0275\u0275template"](13,$r,3,3,"adapt-badge",9),o["\u0275\u0275template"](14,Gr,4,2,"adapt-badge",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",11),o["\u0275\u0275elementStart"](16,"div",12),o["\u0275\u0275elementStart"](17,"button",13),o["\u0275\u0275listener"]("click",function(){return t.clearDocumentText()}),o["\u0275\u0275text"](18),o["\u0275\u0275pipe"](19,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](20,"adapt-rx-textarea",14),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.documentText=e}),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",15),o["\u0275\u0275elementStart"](23,"button",16),o["\u0275\u0275listener"]("click",function(){return t.setDefaultThreshold()}),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"adapt-rx-counter",17),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.toneScoreThreshold=e}),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",18),o["\u0275\u0275elementStart"](30,"adapt-rx-switch",19),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.includeSentenceLevelAnalysis=e}),o["\u0275\u0275pipe"](31,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](32,"div",11),o["\u0275\u0275elementStart"](33,"div",20),o["\u0275\u0275elementStart"](34,"button",21),o["\u0275\u0275listener"]("click",function(){return t.analyzeTone()}),o["\u0275\u0275text"](35),o["\u0275\u0275pipe"](36,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](37,"button",22),o["\u0275\u0275listener"]("click",function(){return t.reset()}),o["\u0275\u0275text"](38),o["\u0275\u0275pipe"](39,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](40,"div",12),o["\u0275\u0275elementStart"](41,"div",23),o["\u0275\u0275element"](42,"adapt-rx-control-label",24),o["\u0275\u0275elementStart"](43,"div",25),o["\u0275\u0275template"](44,Ur,5,2,"div",26),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,28,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.language.label")),o["\u0275\u0275property"]("ngModel",t.language)("options",t.languageOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,30,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-text-contains-html.label")),o["\u0275\u0275property"]("ngModel",t.containsHtml),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](11,32,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-tone.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngIf",!t.extractedToneData),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngForOf",null==t.extractedToneData||null==t.extractedToneData.documentTone?null:t.extractedToneData.documentTone.scores),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](19,34,"com.bmc.arsys.rx.client.common.clear.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](21,36,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-text.label")),o["\u0275\u0275property"]("ngModel",t.documentText)("rows",12),o["\u0275\u0275advance"](4),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](25,38,"com.bmc.arsys.rx.client.admin.set-to-default.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](27,40,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.label")),o["\u0275\u0275property"]("ngModel",t.toneScoreThreshold)("max",1)("min",.5)("step",.1)("size","small")("tooltip",o["\u0275\u0275pureFunction1"](50,ci,o["\u0275\u0275pipeBind1"](28,42,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](31,44,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.include-sentence-level-analysis.label")),o["\u0275\u0275property"]("ngModel",t.includeSentenceLevelAnalysis),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.isAnalyzeToneButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](36,46,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.analyze-tone.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.isResetButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](39,48,"com.bmc.arsys.rx.client.common.reset.label")," "),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngForOf",null==t.extractedToneData?null:t.extractedToneData.sentencesTone))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptRxCheckboxComponent,a.AdaptRxControlLabelComponent,n.NgIf,n.NgForOf,a.AdaptButtonComponent,a.AdaptRxTextareaComponent,r.RequiredValidator,a.AdaptRxCounterComponent,a.AdaptRxSwitchComponent,a.AdaptBadgeComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[rx-id=user-language][_ngcontent-%COMP%]{max-width:400px;min-width:auto}.sentences-tones[_ngcontent-%COMP%]{border:1px solid #d6d7d8;height:430px;overflow-y:auto}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]{padding-bottom:10px}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]   .sentence[_ngcontent-%COMP%]:before{content:open-quote}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]   .sentence[_ngcontent-%COMP%]:after{content:close-quote}.contains-html[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;flex-direction:column;margin-top:1.9%}']});class Bd{constructor(e,t){this.rxCommandFactoryService=e,this.rxSystemConfigurationService=t,this.languageOptions=Vd.languageOptions,this.defaultToneScoreThreshold=.5}ngOnInit(){this.rxSystemConfigurationService.getConfiguration(Vd.systemSettingKeys.toneScoreThreshold).pipe((0,v.finalize)(()=>this.reset())).subscribe(e=>{this.defaultToneScoreThreshold=e.value?(0,m.toNumber)(e.value):.5})}clearUtterances(){this.utterances=null}setDefaultThreshold(){this.toneScoreThreshold=this.defaultToneScoreThreshold}optionFormatter(e){return e.name}analyzeTone(){const e=(0,m.map)((0,m.compact)(this.utterances.split("\n")),e=>({text:e}));this.rxCommandFactoryService.forResourceType(Vd.userEngagementResourceType).execute({resourceType:Vd.userEngagementResourceType,language:this.language.id,utterances:e,toneScoreThreshold:this.toneScoreThreshold}).subscribe(e=>{this.utteranceTonesData=e})}reset(){this.toneScoreThreshold=this.defaultToneScoreThreshold,this.language=[Vd.languageOptions[0]],this.utterances=null,this.utteranceTonesData=null,this.userEngagementToneAnalysisForm.form.markAsPristine()}isAnalyzeToneButtonDisabled(){return this.userEngagementToneAnalysisForm.pristine||this.userEngagementToneAnalysisForm.invalid}isResetButtonDisabled(){return this.userEngagementToneAnalysisForm.pristine&&(0,m.isNil)(this.utterances)}}Bd.\u0275fac=function(e){return new(e||Bd)(o["\u0275\u0275directiveInject"](f.RxCommandFactoryService),o["\u0275\u0275directiveInject"](f.RxSystemConfigurationService))},Bd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Bd,selectors:[["rx-user-engagement-tone-analysis"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](qr,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.userEngagementToneAnalysisForm=e.first)}},decls:35,vars:51,consts:[["userEngagementToneAnalysisForm","ngForm"],[1,"row","form-group"],[1,"col-md-3"],["rx-id","language","name","language",3,"ngModel","options","label","optionFormatter","ngModelChange"],[1,"row"],[1,"col-md-6"],["rx-id","clear-button","type","button","adapt-button","","btn-type","tertiary",1,"p-0","float-right",3,"click"],["rx-id","utterances","name","utterances","required","",3,"ngModel","label","placeholder","rows","tooltip","ngModelChange"],[1,"form-group","pt-3"],["type","button","adapt-button","","btn-type","tertiary",1,"p-0","float-right",3,"click"],["rx-id","tone-score-threshold","name","toneScoreThreshold",3,"ngModel","label","max","min","step","size","tooltip","ngModelChange"],[1,"my-4"],["adapt-button","","btn-type","primary","type","button","rx-id","analyze-tone-button",1,"mr-2","d-icon-left-check_adapt",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","reset-button",1,"mr-2","d-icon-left-undo",3,"disabled","click"],[1,"col-md-6","mb-4"],["rx-id","utterance-tone","name","utteranceTones"],[3,"label"],[1,"sentences-tones","form-control"],["class","sentences-tone",4,"ngFor","ngForOf"],[1,"sentences-tone"],[1,"sentence"],["variant","info","class","mr-1",4,"ngFor","ngForOf"],["variant","info",1,"mr-1"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",null,0),o["\u0275\u0275elementStart"](2,"div",1),o["\u0275\u0275elementStart"](3,"div",2),o["\u0275\u0275elementStart"](4,"adapt-rx-select",3),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.language=e}),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](6,"div",4),o["\u0275\u0275elementStart"](7,"div",5),o["\u0275\u0275elementStart"](8,"button",6),o["\u0275\u0275listener"]("click",function(){return t.clearUtterances()}),o["\u0275\u0275text"](9),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"adapt-rx-textarea",7),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.utterances=e}),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275pipe"](13,"translate"),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",8),o["\u0275\u0275elementStart"](16,"button",9),o["\u0275\u0275listener"]("click",function(){return t.setDefaultThreshold()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"adapt-rx-counter",10),o["\u0275\u0275listener"]("ngModelChange",function(e){return t.toneScoreThreshold=e}),o["\u0275\u0275pipe"](20,"translate"),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",11),o["\u0275\u0275elementStart"](23,"button",12),o["\u0275\u0275listener"]("click",function(){return t.analyzeTone()}),o["\u0275\u0275text"](24),o["\u0275\u0275pipe"](25,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](26,"button",13),o["\u0275\u0275listener"]("click",function(){return t.reset()}),o["\u0275\u0275text"](27),o["\u0275\u0275pipe"](28,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](29,"div",14),o["\u0275\u0275elementStart"](30,"div",15),o["\u0275\u0275element"](31,"adapt-rx-control-label",16),o["\u0275\u0275pipe"](32,"translate"),o["\u0275\u0275elementStart"](33,"div",17),o["\u0275\u0275template"](34,Hr,5,2,"div",18),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,25,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.language.label")),o["\u0275\u0275property"]("ngModel",t.language)("options",t.languageOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](10,27,"com.bmc.arsys.rx.client.common.clear.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,29,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.label")),o["\u0275\u0275propertyInterpolate"]("placeholder",o["\u0275\u0275pipeBind1"](13,31,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.placeholder")),o["\u0275\u0275property"]("ngModel",t.utterances)("rows",16)("tooltip",o["\u0275\u0275pureFunction1"](47,ci,o["\u0275\u0275pipeBind1"](14,33,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.tooltip"))),o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,35,"com.bmc.arsys.rx.client.admin.set-to-default.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](20,37,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.label")),o["\u0275\u0275property"]("ngModel",t.toneScoreThreshold)("max",1)("min",.5)("step",.1)("size","small")("tooltip",o["\u0275\u0275pureFunction1"](49,ci,o["\u0275\u0275pipeBind1"](21,39,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.tooltip"))),o["\u0275\u0275advance"](4),o["\u0275\u0275property"]("disabled",t.isAnalyzeToneButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](25,41,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.analyze-tone.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",!0)("disabled",t.isResetButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](28,43,"com.bmc.arsys.rx.client.common.reset.label")," "),o["\u0275\u0275advance"](4),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](32,45,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances-tone.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("ngForOf",null==t.utteranceTonesData?null:t.utteranceTonesData.utterancesTone))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,a.AdaptButtonComponent,a.AdaptRxTextareaComponent,r.RequiredValidator,a.AdaptRxCounterComponent,a.AdaptRxControlLabelComponent,n.NgForOf,a.AdaptBadgeComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.sentences-tones[_ngcontent-%COMP%]{border:1px solid #d6d7d8;height:480px;overflow-y:auto}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]{padding-bottom:10px}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]   .sentence[_ngcontent-%COMP%]:before{content:open-quote}.sentences-tones[_ngcontent-%COMP%]   .sentences-tone[_ngcontent-%COMP%]   .sentence[_ngcontent-%COMP%]:after{content:close-quote}adapt-rx-select[_ngcontent-%COMP%]{max-width:400px;min-width:auto}']});class $d{}$d.\u0275fac=function(e){return new(e||$d)},$d.\u0275cmp=o["\u0275\u0275defineComponent"]({type:$d,selectors:[["rx-tone-analysis-testing"]],decls:8,vars:7,consts:[["header","Tone analysis testing"],[3,"fullHeight"],[3,"adapt-tab-title"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275elementStart"](1,"adapt-tabset",1),o["\u0275\u0275elementStart"](2,"adapt-tab-panel",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"rx-document-tone-analysis"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"adapt-tab-panel",2),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"rx-user-engagement-tone-analysis"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("fullHeight",!0),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](3,3,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-tone-analysis.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275propertyInterpolate"]("adapt-tab-title",o["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.user-engagement-tone-analysis.title")))},directives:[s.AdminSettingsComponent,a.AdaptTabsComponent,a.AdaptTabsPanelComponent,Ld,Bd],pipes:[u.TranslatePipe],encapsulation:2});class Gd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-tone-analysis-testing",componentFactory:this.componentFactoryResolver.resolveComponentFactory($d),name:"Tone analysis testing",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Gd.\u0275fac=function(e){return new(e||Gd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Gd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Gd,declarations:[$d,Ld,Bd],imports:[s.AdminSettingsModule,a.AdaptTabsModule,a.AdaptRxSelectModule,a.AdaptRxCheckboxModule,a.AdaptRxTextareaModule,a.AdaptRxTextareaModule,a.AdaptRxLabelModule,a.AdaptRxCounterModule,a.AdaptButtonModule,a.AdaptRxSwitchModule,a.AdaptBadgeModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,u.TranslateModule]}),Gd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[s.AdminSettingsModule,a.AdaptTabsModule,a.AdaptRxSelectModule,a.AdaptRxCheckboxModule,a.AdaptRxTextareaModule,a.AdaptRxTextareaModule,a.AdaptRxLabelModule,a.AdaptRxCounterModule,a.AdaptButtonModule,a.AdaptRxSwitchModule,a.AdaptBadgeModule,n.CommonModule,r.FormsModule,r.ReactiveFormsModule,u.TranslateModule]]});const zd="Virtual Chat Configuration",Ud="Virtual Chat Additional Settings",qd="com.bmc.arsys.rx.application.cognitive.command.PingLiveChatServiceCommand",Xd="Live Chat configuration saved successfully.",Hd="Unable to retrieve chat topics. Please verify that the Live Chat administrator key is correct.",Wd={settingNames:{url:"URL",userName:"Username",password:"Password",arServerUrl:"ARServer-URL"}},Yd={settingNames:{adminKey:"AdminKey",company:"Company"}};class Qd extends p.BaseViewComponent{constructor(e,t,i,n,o,r,a){super(),this.formBuilder=e,this.rxAdminSettingsService=t,this.rxNotificationService=i,this.rxModalService=n,this.rxCognitiveServiceService=o,this.rxLiveAgentSettingsService=r,this.translateService=a,this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.isNewVirtualChatSetting=!1,this.isNewVirtualChatAdditionalSetting=!1,this.virtualChatComponentSettingsValues=[],this.additionalSettingsComponentSettingsValues=[]}ngOnInit(){this.notifyPropertyChanged("api",{isDirty:()=>this.virtualChatConfigurationForm.dirty||this.virtualChatAdditionalSettingsForm.dirty}),this.virtualChatConfigurationForm=this.formBuilder.group({virtualChatUrl:"",username:"",password:"",systemServerUrl:""}),this.virtualChatAdditionalSettingsForm=this.formBuilder.group({administratorKey:"",company:""}),this.busy=(0,h.forkJoin)({virtualChatComponentSettings:this.getVirtualChatComponentSettings(),additionalSettingsComponentSettings:this.getAdditionalSettingsComponentSettings()}).subscribe(e=>{this.isNewVirtualChatSetting=!(0,m.get)(e.virtualChatComponentSettings,"values",[]).length,this.isNewVirtualChatAdditionalSetting=!(0,m.get)(e.additionalSettingsComponentSettings,"values",[]).length,this.isNewVirtualChatSetting?this.virtualChatComponentSettingsValues=(0,m.map)((0,m.values)(Wd.settingNames),e=>({assigneeGroupPermission:null,componentName:zd,settingId:null,settingName:e,settingValue:null,ownerKeyValue1:null})):this.virtualChatComponentSettingsValues=e.virtualChatComponentSettings.values,this.isNewVirtualChatAdditionalSetting?this.additionalSettingsComponentSettingsValues=(0,m.map)((0,m.values)(Yd.settingNames),e=>({assigneeGroupPermission:null,componentName:Ud,ownerKeyValue1:null,settingId:null,settingName:e,settingValue:null})):this.additionalSettingsComponentSettingsValues=e.additionalSettingsComponentSettings.values,this.virtualChatConfigurationForm.patchValue({virtualChatUrl:this.getValueFromVirtualSetting(Wd.settingNames.url),username:this.getValueFromVirtualSetting(Wd.settingNames.userName),password:this.getValueFromVirtualSetting(Wd.settingNames.password),systemServerUrl:this.getValueFromVirtualSetting(Wd.settingNames.arServerUrl)}),this.virtualChatAdditionalSettingsForm.patchValue({administratorKey:this.getValueFromAdditionalSetting(Yd.settingNames.adminKey),company:this.getValueFromAdditionalSetting(Yd.settingNames.company)})}),this.virtualChatConfigurationForm.valueChanges.subscribe(()=>{this.connectionTestStatus=this.virtualChatConfigurationForm.pristine||this.virtualChatConfigurationForm.invalid?l.ConnectionTestStatus.Invalid:l.ConnectionTestStatus.Unknown})}getVirtualChatComponentSettings(){return this.rxAdminSettingsService.getComponentSettings(zd,{"default-bundle-scope":f.RX_APPLICATION.settingsBundleId})}getAdditionalSettingsComponentSettings(){return this.rxAdminSettingsService.getComponentSettings(Ud,{"default-bundle-scope":f.RX_APPLICATION.settingsBundleId})}getValueFromAdditionalSetting(e){return(0,m.get)((0,m.find)(this.additionalSettingsComponentSettingsValues,{settingName:e}),"settingValue",null)}getValueFromVirtualSetting(e){return(0,m.get)((0,m.find)(this.virtualChatComponentSettingsValues,{settingName:e}),"settingValue",null)}onTestConnection(){const e=this.virtualChatConfigurationForm.getRawValue();this.rxCognitiveServiceService.testConnection({resourceType:qd,remedyMidTierUrl:e.virtualChatUrl,arAdministratorUser:e.username,arAdministratorPassword:e.password,arSystemServerUrl:e.systemServerUrl}).pipe((0,v.catchError)(e=>(this.connectionTestStatus=l.ConnectionTestStatus.Failed,(0,h.throwError)(e)))).subscribe(()=>{this.connectionTestStatus=l.ConnectionTestStatus.Passed})}isSaveButtonDisabled(){return this.virtualChatConfigurationForm.pristine||this.virtualChatConfigurationForm.invalid||this.connectionTestStatus!==l.ConnectionTestStatus.Passed}setVirtualSettingValue(e,t){(0,m.find)(this.virtualChatComponentSettingsValues,{settingName:e}).settingValue=t}saveVirtualChatConfig(){let e;const t=this.virtualChatConfigurationForm.getRawValue();this.setVirtualSettingValue(Wd.settingNames.url,t.virtualChatUrl),this.setVirtualSettingValue(Wd.settingNames.userName,t.username),this.setVirtualSettingValue(Wd.settingNames.password,t.password),this.setVirtualSettingValue(Wd.settingNames.arServerUrl,t.systemServerUrl),e=this.isNewVirtualChatSetting?this.rxAdminSettingsService.createComponentSettings(zd,this.virtualChatComponentSettingsValues).pipe((0,v.switchMap)(()=>this.getVirtualChatComponentSettings()),(0,v.tap)(e=>{this.isNewVirtualChatSetting=!1,this.virtualChatComponentSettingsValues=e.values})):this.rxAdminSettingsService.updateComponentSettings(`${zd}/${this.virtualChatComponentSettingsValues[0].ownerKeyValue1}`,this.virtualChatComponentSettingsValues),this.busy=e.subscribe(()=>{this.rxNotificationService.addSuccessMessage(Xd),this.connectionTestStatus=l.ConnectionTestStatus.Invalid,this.virtualChatConfigurationForm.markAsPristine(),this.rxLiveAgentSettingsService.getAvailableTopics()})}setAdditionalSettingValue(e,t){(0,m.find)(this.additionalSettingsComponentSettingsValues,{settingName:e}).settingValue=t}saveAdditionalSettings(){let e;const t=this.virtualChatAdditionalSettingsForm.getRawValue();this.setAdditionalSettingValue(Yd.settingNames.adminKey,t.administratorKey),this.setAdditionalSettingValue(Yd.settingNames.company,t.company),e=this.isNewVirtualChatAdditionalSetting?this.rxAdminSettingsService.createComponentSettings(Ud,this.additionalSettingsComponentSettingsValues).pipe((0,v.switchMap)(()=>this.getAdditionalSettingsComponentSettings()),(0,v.tap)(e=>{this.isNewVirtualChatAdditionalSetting=!1,this.additionalSettingsComponentSettingsValues=e.values})):this.rxAdminSettingsService.updateComponentSettings(`${Ud}/${this.additionalSettingsComponentSettingsValues[0].ownerKeyValue1}`,this.additionalSettingsComponentSettingsValues),this.busy=e.subscribe(()=>{this.virtualChatAdditionalSettingsForm.markAsPristine(),this.rxNotificationService.addSuccessMessage(Xd),this.rxLiveAgentSettingsService.getAvailableTopics().subscribe(e=>{(0,m.isEmpty)(e)&&this.rxNotificationService.addWarningMessage(Hd)})})}}Qd.\u0275fac=function(e){return new(e||Qd)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](f.RxAdminSettingsService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](Ls),o["\u0275\u0275directiveInject"](f.RxLiveAgentSettingsService),o["\u0275\u0275directiveInject"](u.TranslateService))},Qd.\u0275cmp=o["\u0275\u0275defineComponent"]({type:Qd,selectors:[["rx-admin-virtual-chat-configuration"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:28,vars:36,consts:[[3,"header","busy"],["multiselect","true",1,"pb-4"],[3,"formGroup"],["title","Authentication","isOpen","true","rx-id","authentication"],["rx-id","virtual-chat-url","formControlName","virtualChatUrl","maxlength","254","required","true",1,"d-block","form-group",3,"label"],["rx-id","administrator-user","formControlName","username","maxlength","254","required","true",1,"d-block","form-group",3,"label"],["rx-id","administrator-password","formControlName","password","maxlength","254","required","true",1,"d-block","form-group",3,"label","isPassword"],["rx-id","system-server-url","formControlName","systemServerUrl","maxlength","254","required","true",1,"d-block","form-group",3,"label"],[1,"d-flex","justify-content-start"],["buttonType","secondary","rx-id","virtual-chat-configuration-test-button",3,"status","testConnection"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",1,"ml-4","mr-2",3,"disabled","click"],["title","Additional settings","rx-id","additional-settings",1,"d-block"],["rx-id","administrator-key","formControlName","administratorKey",1,"d-block","form-group",3,"label","tooltip"],["rx-id","company","label","Company","formControlName","company",1,"d-block","form-group"],["adapt-button","","btn-type","primary","type","button","rx-id","additional-settings-save-button",1,"mr-2",3,"disabled","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"adapt-accordion",1),o["\u0275\u0275elementStart"](3,"form",2),o["\u0275\u0275elementStart"](4,"adapt-accordion-tab",3),o["\u0275\u0275element"](5,"adapt-rx-textfield",4),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275element"](7,"adapt-rx-textfield",5),o["\u0275\u0275pipe"](8,"translate"),o["\u0275\u0275element"](9,"adapt-rx-textfield",6),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275element"](11,"adapt-rx-textfield",7),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementStart"](13,"div",8),o["\u0275\u0275elementStart"](14,"rx-connection-tester",9),o["\u0275\u0275listener"]("testConnection",function(){return t.onTestConnection()}),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"button",10),o["\u0275\u0275listener"]("click",function(){return t.saveVirtualChatConfig()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](18,"form",2),o["\u0275\u0275elementStart"](19,"adapt-accordion-tab",11),o["\u0275\u0275element"](20,"adapt-rx-textfield",12),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275pipe"](22,"translate"),o["\u0275\u0275element"](23,"adapt-rx-textfield",13),o["\u0275\u0275elementStart"](24,"div",8),o["\u0275\u0275elementStart"](25,"button",14),o["\u0275\u0275listener"]("click",function(){return t.saveAdditionalSettings()}),o["\u0275\u0275text"](26),o["\u0275\u0275pipe"](27,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,16,"com.bmc.arsys.rx.client.admin.virtual-chat-configuration.header.title")),o["\u0275\u0275property"]("busy",t.busy),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formGroup",t.virtualChatConfigurationForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](6,18,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.bmc-remedy-virtual-chat-api-endpoint-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](8,20,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-administrator-user.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](10,22,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-administrator-password.label")),o["\u0275\u0275property"]("isPassword",!0),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-system-server-api-endpoint-url.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("status",t.connectionTestStatus),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,26,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formGroup",t.virtualChatAdditionalSettingsForm),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](21,28,"com.bmc.arsys.rx.client.admin.tone-analysis-testing.administrator-key.label")),o["\u0275\u0275property"]("tooltip",o["\u0275\u0275pureFunction1"](34,ci,o["\u0275\u0275pipeBind1"](22,30,"com.bmc.arsys.rx.client.admin.virtual-chat-configuration.administrator-key.tooltip"))),o["\u0275\u0275advance"](5),o["\u0275\u0275property"]("disabled",t.virtualChatAdditionalSettingsForm.pristine||t.virtualChatAdditionalSettingsForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](27,32,"com.bmc.arsys.rx.client.common.save.label")," "))},directives:[s.AdminSettingsComponent,a.AdaptAccordionComponent,r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptAccordionTabComponent,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.MaxLengthValidator,r.RequiredValidator,l.RxConnectionTesterComponent,a.AdaptButtonComponent],pipes:[u.TranslatePipe],styles:[Ci]});class Kd{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-virtual-chat-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(Qd),name:"Virtual Chat configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}Kd.\u0275fac=function(e){return new(e||Kd)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},Kd.\u0275mod=o["\u0275\u0275defineNgModule"]({type:Kd,declarations:[Qd],imports:[a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,u.TranslateModule]}),Kd.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[a.AdaptAccordionModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,s.AdminSettingsModule,n.CommonModule,r.ReactiveFormsModule,l.RxConnectionTesterModule,u.TranslateModule]]});const Jd={basicAuth:0,oAuth2:1,rsso:2,custom:3,remedy:11,oAuthTokenExchange:12},Zd=[{id:0,label:"HTTP"},{id:1,label:"HTTPS"}],ep=[{id:0,label:"client_credentials"}],tp=[{id:Jd.basicAuth,label:"Basic"},{id:Jd.oAuth2,label:"OAuth 2.0"},{id:Jd.rsso,label:"RSSO"},{id:Jd.custom,label:"Custom"},{id:Jd.remedy,label:"Remedy"},{id:Jd.oAuthTokenExchange,label:"OAuth token exchange"}],ip={recordDefinitionName:"WebAPI Connection",passwordMask:"********",fieldIds:{hostname:70030,port:70031,protocol:70032,authType:70033,authentication:70034},wizardContext:{wizardSteps:[{title:"General",fields:[{type:"text",name:"name",label:"com.bmc.arsys.rx.client.common.name.label",rxId:"name",required:!0},{type:"text",name:"hostname",label:"com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label",rxId:"host-name",required:!0},{type:"number",name:"port",label:"com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label",rxId:"port",minValue:1,maxValue:65535,required:!0,allowScientific:!1,allowIntegerOnly:!0},{type:"select",name:"secure",label:"com.bmc.arsys.rx.client.admin.web-api-connections.protocol.label",rxId:"protocol",selectOptions:Zd,required:!0},{type:"select",name:"authTypeCode",label:"com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label",rxId:"authentication",selectOptions:tp,required:!0}],id:"General",formName:"generalConfigurationForm",isValid:!0,isDirty:!1},{title:"Authentication",fields:[{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.web-api-connections.login.label",rxId:"login",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.common.password.label",rxId:"password",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"HTTP headers",rxId:"http-headers",required:!0}],id:"Authentication",formName:"authenticationConfigurationForm",isValid:!0,isDirty:!1}],webApiConnection:{authTypeCode:"",secure:"",name:"",hostname:"",port:"",authTypeDetails:{username:"",credentials:"",httpHeaders:[],queryParams:[],tokenFetchMechanism:0,additionalFormParams:[]}},isEditMode:!1},protocolTypeOptions:Zd,authTypes:Jd,authTypeOptions:tp,authTypeFields:[{id:Jd.basicAuth,fields:[{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.web-api-connections.login.label",rxId:"login",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.common.password.label",rxId:"password",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0}]},{id:Jd.oAuth2,fields:[{type:"select",name:"grantType",label:"com.bmc.arsys.rx.client.admin.web-api-connections.grant-type.label",rxId:"grant-type",selectOptions:ep,disabled:!1,required:!0},{type:"text",name:"tokenPath",label:"com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label",rxId:"access-token-url",required:!0},{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"client-id",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"client-secret",required:!0},{type:"radio",name:"tokenFetchMechanism",label:"com.bmc.arsys.rx.client.admin.web-api-connections.client-credentials-transfer-mechanism.label",rxId:"token-fetch-mechanism",selectOptions:[{label:"com.bmc.arsys.rx.client.admin.web-api-connections.authorization-request-header.label",value:0},{label:"com.bmc.arsys.rx.client.admin.web-api-connections.form-parameters.label",value:1}]},{type:"text",name:"redirectUri",label:"com.bmc.arsys.rx.client.admin.web-api-connections.redirect-uri.label",rxId:"redirect-uri",required:!1},{type:"text",name:"scope",label:"com.bmc.arsys.rx.client.admin.web-api-connections.scope.label",rxId:"scope",required:!1},{type:"serverEndpointRadio",name:"authServerEndpoint",label:"com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.label",rxId:"auth-server-endpoint",selectOptions:[{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label",value:"Default"},{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label",value:"Custom"}],placeholder:"com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.placeholder",referenceFieldName:"hostname",tooltip:"com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.tooltip",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0},{type:"nameValuePairs",name:"additionalFormParams",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-form-parameters.label",rxId:"additional-form-params"}]},{id:Jd.rsso,fields:[{type:"text",name:"loginName",label:"com.bmc.arsys.rx.client.admin.web-api-connections.login.label",rxId:"login",required:!0},{type:"text",name:"tokenPath",label:"com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label",rxId:"access-token-url",required:!0},{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"client-id",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"client-secret",required:!0},{type:"serverEndpointRadio",name:"authServerEndpoint",label:"com.bmc.arsys.rx.client.admin.web-api-connections.rsso-server-endpoint.label",rxId:"auth-server-endpoint",referenceFieldName:"hostname",selectOptions:[{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label",value:"Default"},{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label",value:"Custom"}],placeholder:"com.bmc.arsys.rx.client.admin.web-api-connections.rsso-server-endpoint.placeholder",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0}]},{id:Jd.custom,fields:[{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0},{type:"nameValuePairs",name:"queryParams",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-query-parameters.label",rxId:"query-parameters",required:!0}]},{id:Jd.remedy,fields:[{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.web-api-connections.login.label",rxId:"login",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.common.password.label",rxId:"password",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0}]},{id:Jd.oAuthTokenExchange,fields:[{type:"text",name:"loginName",label:"com.bmc.arsys.rx.client.admin.web-api-connections.login.label",rxId:"login"},{type:"text",name:"tokenPath",label:"com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label",rxId:"access-token-url",required:!0},{type:"text",name:"username",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label",rxId:"client-id",required:!0},{type:"password",name:"credentials",label:"com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label",rxId:"client-secret",required:!0},{type:"text",name:"resources",label:"com.bmc.arsys.rx.client.admin.web-api-connections.resources.label",rxId:"resources",required:!0,isUrl:!0},{type:"serverEndpointRadio",name:"authServerEndpoint",label:"com.bmc.arsys.rx.client.admin.web-api-connections.oauth-token-exchange-server-endpoint.label",rxId:"auth-server-endpoint",referenceFieldName:"hostname",selectOptions:[{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label",value:"Default"},{label:"com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label",value:"Custom"}],placeholder:"com.bmc.arsys.rx.client.admin.web-api-connections.oauth-token-exchange-server-endpoint.placeholder",required:!0},{type:"nameValuePairs",name:"httpHeaders",label:"com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label",rxId:"http-headers",required:!0}]}],grantTypeOptions:ep,authServerEndpoints:{default:"Default",custom:"Custom"}};class np{constructor(e,t){this.rxUrlUtilsService=e,this.translateService=t,this.selectionChange=new o.EventEmitter,this.formStatusChange=new o.EventEmitter,this.destroyed$=new h.ReplaySubject(1),this.defaultSelection=this.translateService.instant("com.bmc.arsys.rx.client.common.select.label"),this.optionFormatter=e=>(0,m.get)(e,"label",this.defaultSelection)}onRadioButtonChange(e,t){e.startsWith(ip.authServerEndpoints.default)&&(this.stepDetails[t.name]=null)}getSelectionValue(e,t){return this.translateService.instant(e.label,{hostName:this.webApiConnection[t.referenceFieldName]})}validate(e){return t=>{let i=null;if(e.isUrl&&t.value){const e=t.value.split(/[,;]/);(0,m.some)(e,e=>!this.rxUrlUtilsService.isValidUrl(e,!0))&&(i={invalidUrl:{message:"Invalid URL."}})}return i}}ngOnInit(){this.authEndpoint=this.stepDetails.authServerEndpoint?ip.authServerEndpoints.custom:ip.authServerEndpoints.default,this.configurationForm.statusChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.step.isValid="VALID"===e,this.formStatusChange.emit()}),this.configurationForm.valueChanges.pipe((0,v.distinctUntilChanged)(),(0,v.takeUntil)(this.destroyed$)).subscribe(e=>{this.step.isDirty=!this.configurationForm.pristine,this.formStatusChange.emit()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}np.\u0275fac=function(e){return new(e||np)(o["\u0275\u0275directiveInject"](g.RxUrlUtilsService),o["\u0275\u0275directiveInject"](u.TranslateService))},np.\u0275cmp=o["\u0275\u0275defineComponent"]({type:np,selectors:[["rx-web-api-connection-wizard-step-fields"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](Wr,7,r.NgForm),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.configurationForm=e.first)}},inputs:{step:"step",webApiConnection:"webApiConnection",stepDetails:"stepDetails"},outputs:{selectionChange:"selectionChange",formStatusChange:"formStatusChange"},decls:3,vars:2,consts:[[3,"name"],["configurationForm","ngForm"],[4,"ngFor","ngForOf"],["class","d-block form-group","rx-id","field.rxId",3,"name","label","options","optionFormatter","ngModel","required","disabled","ngModelChange",4,"ngIf"],["class","d-block form-group",3,"name","ngModel","required","label","isPassword","placeholder","rxCustomValidators","ngModelChange",4,"ngIf"],["class","d-block form-group","adaptIntegerNumber","",3,"name","ngModel","required","label","adaptMin","adaptMax","placeholder","ngModelChange",4,"ngIf"],["class","d-block form-group","adaptScientificNumber","",3,"name","ngModel","required","label","adaptMin","adaptMax","placeholder","ngModelChange",4,"ngIf"],[3,"addButtonLabel","ngModel","name","ngModelChange",4,"ngIf"],[3,"ngModel","name","label","ngModelChange",4,"ngIf"],[3,"ngModel","name","label","tooltip","ngModelChange",4,"ngIf"],["name","url","class","d-block form-group",3,"disabled","ngModel","placeholder","required","ngModelChange",4,"ngIf"],["rx-id","field.rxId",1,"d-block","form-group",3,"name","label","options","optionFormatter","ngModel","required","disabled","ngModelChange"],[1,"d-block","form-group",3,"name","ngModel","required","label","isPassword","placeholder","rxCustomValidators","ngModelChange"],["adaptIntegerNumber","",1,"d-block","form-group",3,"name","ngModel","required","label","adaptMin","adaptMax","placeholder","ngModelChange"],["adaptScientificNumber","",1,"d-block","form-group",3,"name","ngModel","required","label","adaptMin","adaptMax","placeholder","ngModelChange"],[3,"addButtonLabel","ngModel","name","ngModelChange"],[3,"ngModel","name","label","ngModelChange"],[3,"value","label",4,"ngFor","ngForOf"],[3,"value","label"],[3,"ngModel","name","label","tooltip","ngModelChange"],["name","url",1,"d-block","form-group",3,"disabled","ngModel","placeholder","required","ngModelChange"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"form",0,1),o["\u0275\u0275template"](2,aa,9,8,"ng-container",2),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275property"]("name",t.step.formName),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.step.fields))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.NgForm,n.NgForOf,n.NgIf,a.AdaptRxSelectComponent,r.NgControlStatus,r.NgModel,r.RequiredValidator,a.AdaptRxTextfieldComponent,l.RxCustomValidatorsDirective,a.AdaptRxCounterComponent,a.AdaptIntegerNumberValidatorDirective,a.AdaptMinValidatorDirective,a.AdaptMaxValidatorDirective,a.AdaptScientificNumberValidatorDirective,l.RxNameValuePairsEditorComponent,a.AdaptRxRadiobuttonGroupComponent,a.AdaptRxRadiobuttonComponent],pipes:[u.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}adapt-rx-select[_ngcontent-%COMP%], adapt-rx-textfield[_ngcontent-%COMP%], adapt-rx-counter[_ngcontent-%COMP%]{max-width:400px}']});class op{constructor(e){this.rxWizardModalComponent=e,this.context$=this.rxWizardModalComponent.context$,this.isSaveButtonDisabled$=this.rxWizardModalComponent.context$.pipe((0,v.map)(e=>{const t=(0,m.some)(e.wizardSteps,{isDirty:!0});return(0,m.some)(e.wizardSteps,{isValid:!1})||!t}))}onFormStatusChange(){this.isSaveButtonDisabled$.pipe((0,v.take)(1)).subscribe(e=>{e?this.rxWizardModalComponent.api.disableFinishButton():this.rxWizardModalComponent.api.enableFinishButton()})}}op.\u0275fac=function(e){return new(e||op)(o["\u0275\u0275directiveInject"](s.RxWizardModalComponent))},op.\u0275cmp=o["\u0275\u0275defineComponent"]({type:op,selectors:[["rx-authentication-wizard-step"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"step","stepDetails","webApiConnection","formStatusChange"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,sa,2,3,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.context$))},directives:[n.NgIf,np],pipes:[n.AsyncPipe],encapsulation:2});class rp{constructor(e){this.rxWizardModalComponent=e,this.context$=this.rxWizardModalComponent.context$}ngOnInit(){this.context$.pipe((0,v.take)(1)).subscribe(e=>{e.isEditMode&&(this.rxWizardModalComponent.api.enableNextButton(),this.savedAuthTypeCode=e.webApiConnection.authTypeCode,this.savedAuthTypeDetails=e.webApiConnection.authTypeDetails)})}onSelectionChange(e){this.context$.pipe((0,v.take)(1)).subscribe(t=>{if("authTypeCode"===e.fieldName){const i=e.selection[0].id,n=(0,m.cloneDeep)(t.wizardSteps);if(n[1].fields=(0,m.find)(ip.authTypeFields,{id:i}).fields,this.rxWizardModalComponent.api.updateContext({wizardSteps:n}),this.savedAuthTypeCode&&(0,m.isEqual)(e.selection[0],this.savedAuthTypeCode[0]))this.rxWizardModalComponent.api.updateContext({webApiConnection:this.savedAuthTypeDetails});else{const e=(0,m.cloneDeep)(t.webApiConnection);e.authTypeDetails={username:"",credentials:"",httpHeaders:[],queryParams:[],tokenFetchMechanism:0,additionalFormParams:[],grantType:[ip.grantTypeOptions[0]]},this.rxWizardModalComponent.api.updateContext({webApiConnection:e})}}})}onFormStatusChange(){this.rxWizardModalComponent.context$.pipe((0,v.take)(1)).subscribe(e=>{e.wizardSteps[0].isValid?(this.rxWizardModalComponent.api.enableNextButton(),e.wizardSteps[0].isDirty&&e.isEditMode&&this.rxWizardModalComponent.api.enableFinishButton()):this.rxWizardModalComponent.api.disableNextButton(),e.wizardSteps[0].isDirty&&this.rxWizardModalComponent.api.markDirty()})}}rp.\u0275fac=function(e){return new(e||rp)(o["\u0275\u0275directiveInject"](s.RxWizardModalComponent))},rp.\u0275cmp=o["\u0275\u0275defineComponent"]({type:rp,selectors:[["rx-general-wizard-step"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"step","stepDetails","webApiConnection","selectionChange","formStatusChange"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,la,2,3,"ng-container",0),o["\u0275\u0275pipe"](1,"async")),2&e&&o["\u0275\u0275property"]("ngIf",o["\u0275\u0275pipeBind1"](1,1,t.context$))},directives:[n.NgIf,np],pipes:[n.AsyncPipe],encapsulation:2});class ap{constructor(e,t,i){this.httpClient=e,this.injector=t,this.rxViewActionUtilsService=i,this.path="/api/rx/application/webapi/connection"}getAuthTypeDetails(e){const t=(0,m.cloneDeep)(e.authTypeDetails);return t.credentials===ip.passwordMask&&(t.credentials=null),delete t.grantType,t}save(e,t){return this.httpClient.put(this.getUrl(t),this.getWebApiConnectionToSave(e))}create(e){return this.httpClient.post(this.path,this.getWebApiConnectionToSave(e))}getWebApiConnectionToSave(e){return{authTypeCode:e.authTypeCode[0].id,authTypeDetails:this.getAuthTypeDetails(e),hostname:e.hostname,name:e.name,port:e.port,secure:e.secure[0].id}}getUrl(e){return`${this.path}/${encodeURIComponent(e)}`}delete(e){return this.httpClient.delete(this.getUrl(e))}deleteRecords(e){const t=(0,m.castArray)(e.getSelectedRows()),i=this.rxViewActionUtilsService.extractRecordIds(t);if(i.length){const e=i.map(e=>this.delete(e));return(0,h.forkJoin)(e)}return h.EMPTY}}ap.\u0275fac=function(e){return new(e||ap)(o["\u0275\u0275inject"](b.HttpClient),o["\u0275\u0275inject"](o.Injector),o["\u0275\u0275inject"](S.RxViewActionUtilsService))},ap.\u0275prov=o["\u0275\u0275defineInjectable"]({token:ap,factory:ap.\u0275fac,providedIn:"root"});class sp{constructor(e,t,i,n,o,r,a,s){this.rxModalService=e,this.rxCurrentUserService=t,this.rxWebAPIConnectionsService=i,this.rxNotificationService=n,this.rxRecordInstanceService=o,this.componentFactoryResolver=r,this.rxWizardService=a,this.translateService=s,this.recordDefinition={fieldDefinitions:[{id:x.RX_RECORD_DEFINITION.coreFieldIds.description,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:ip.fieldIds.hostname,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:ip.fieldIds.port,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.integer},{id:ip.fieldIds.authentication,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:x.RX_RECORD_DEFINITION.coreFieldIds.id,resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},this.gridConfig$=new h.Observable(e=>{e.next({recordDefinitionName:ip.recordDefinitionName,columns:this.getWebApiConnectionColumns(),actionButtons:this.getActionButtons(),getRecordDefinition:()=>(0,h.of)(this.recordDefinition),styles:"flex-fill"}),e.complete()})}save(){(this.isNewConfiguration?this.rxWebAPIConnectionsService.create(this.webApiConnectionWizardContext.webApiConnection):this.rxWebAPIConnectionsService.save(this.webApiConnectionWizardContext.webApiConnection,this.currentRecordInstanceId)).pipe((0,v.catchError)(e=>(this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.failed-to-save.message")),(0,h.throwError)(e)))).subscribe(e=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.connection-saved.message")),this.webApiConnectionsRecordGrid.api.refresh().subscribe()})}getActionButtons(){return[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",iconCls:"trash",actions:[{name:()=>{this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.delete-confirmation.message")}).then(e=>{e&&this.rxWebAPIConnectionsService.deleteRecords(this.webApiConnectionsRecordGrid.api).subscribe(e=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.deleted.message")),this.webApiConnectionsRecordGrid.api.refresh().subscribe()})})}}]}]}getWebApiConnectionColumns(){return[{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.description}`,index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),clickable:!0,actions:[{name:(e,t)=>this.editWebApiConnection(t)}]},{fieldId:`${ip.fieldIds.hostname}`,index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label")},{fieldId:`${ip.fieldIds.port}`,index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label"),cellTemplate:this.portCellTemplate},{fieldId:`${ip.fieldIds.authentication}`,index:3,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label"),visible:!1},{fieldId:`${x.RX_RECORD_DEFINITION.coreFieldIds.id}`,index:4,title:this.translateService.instant("com.bmc.arsys.rx.client.common.id.label"),visible:!1}]}resetFields(){this.webApiConnectionWizardContext=(0,m.cloneDeep)(ip.wizardContext),this.webApiConnectionWizardContext.webApiConnection.authTypeCode=[ip.authTypeOptions[0]],this.webApiConnectionWizardContext.webApiConnection.secure=[ip.protocolTypeOptions[0]],this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.grantType=[ip.grantTypeOptions[0]]}openWizard(e,t){const i={title:e,allowFinish:!0,finishButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),steps:[{id:"general",name:this.translateService.instant("com.bmc.arsys.rx.client.common.general-items.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(rp)},{id:"authentication",name:this.translateService.instant("com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label"),componentFactory:this.componentFactoryResolver.resolveComponentFactory(op)}]};this.rxWizardService.open({context:this.webApiConnectionWizardContext,options:i}).then(e=>{(0,m.isObject)(e)&&this.save()})}createWebApiConnection(){this.resetFields(),this.isNewConfiguration=!0,this.openWizard(this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.new-web-api-connection.label"),!1)}editWebApiConnection(e){this.resetFields(),this.isNewConfiguration=!1,this.currentRecordInstanceId=e[x.RX_RECORD_DEFINITION.coreFieldIds.id];this.rxRecordInstanceService.get(ip.recordDefinitionName,e[x.RX_RECORD_DEFINITION.coreFieldIds.id]).subscribe(e=>{const t=e.fieldInstances[ip.fieldIds.authType].value,i=(0,m.find)(ip.authTypeOptions,{id:t}),n=JSON.parse(e.fieldInstances[ip.fieldIds.authentication].value),o=e.fieldInstances[ip.fieldIds.protocol].value,r=(0,m.find)(ip.protocolTypeOptions,{id:o});this.webApiConnectionWizardContext.webApiConnection.name=e.fieldInstances[x.RX_RECORD_DEFINITION.coreFieldIds.description].value,this.webApiConnectionWizardContext.webApiConnection.hostname=e.fieldInstances[ip.fieldIds.hostname].value,this.webApiConnectionWizardContext.webApiConnection.port=e.fieldInstances[ip.fieldIds.port].value,this.webApiConnectionWizardContext.webApiConnection.secure=[r],this.webApiConnectionWizardContext.webApiConnection.authTypeCode=[i],this.webApiConnectionWizardContext.wizardSteps[1].fields=(0,m.find)(ip.authTypeFields,{id:t}).fields,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.httpHeaders=n.httpHeaders,t===ip.authTypes.oAuth2&&(this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint=n.authServerEndpoint,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.redirectUri=n.redirectUri,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.scope=n.scope,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath=n.tokenPath,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenFetchMechanism=n.tokenFetchMechanism,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.additionalFormParams=n.additionalFormParams),t!==ip.authTypes.rsso&&t!==ip.authTypes.oAuthTokenExchange||(this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.loginName=n.loginName,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath=n.tokenPath,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint=n.authServerEndpoint),t===ip.authTypes.oAuthTokenExchange&&(this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.resources=n.resources),t===ip.authTypes.custom?this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.queryParams=n.queryParams:(this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.credentials=ip.passwordMask,this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.username=n.username),this.webApiConnectionWizardContext.isEditMode=!0,this.openWizard(this.translateService.instant("com.bmc.arsys.rx.client.admin.web-api-connections.edit-web-api-connection.label"),!0)})}}sp.\u0275fac=function(e){return new(e||sp)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxCurrentUserService),o["\u0275\u0275directiveInject"](ap),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](o.ComponentFactoryResolver),o["\u0275\u0275directiveInject"](s.RxWizardService),o["\u0275\u0275directiveInject"](u.TranslateService))},sp.\u0275cmp=o["\u0275\u0275defineComponent"]({type:sp,selectors:[["rx-admin-web-api-connections"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](ca,5),o["\u0275\u0275viewQuery"](da,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.webApiConnectionsRecordGrid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.portCellTemplate=e.first)}},decls:9,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary","rx-id","new-button",1,"d-icon-plus_circle","align-self-start",3,"click"],["rx-id","web-api-grid",3,"config"],["webApiConnectionsRecordGrid",""],["portCellTemplate",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createWebApiConnection()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275template"](7,pa,1,1,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"]),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.web-api-connections.header.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class lp{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-web-api-connections",componentFactory:this.componentFactoryResolver.resolveComponentFactory(sp),name:"Web API connections",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}lp.\u0275fac=function(e){return new(e||lp)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},lp.\u0275mod=o["\u0275\u0275defineNgModule"]({type:lp,declarations:[sp,np,rp,op],imports:[n.CommonModule,r.FormsModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptRxSelectModule,a.AdaptTabsModule,a.AdaptRxRadiobuttonModule,a.AdaptRxFormControlModule,l.RxNameValuePairsEditorModule,a.AdaptRxCounterModule,l.RxDirectivesModule,u.TranslateModule]}),lp.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.FormsModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptAlertModule,a.AdaptButtonModule,a.AdaptRxTextfieldModule,a.AdaptButtonModule,a.AdaptRxSelectModule,a.AdaptTabsModule,a.AdaptRxRadiobuttonModule,a.AdaptRxFormControlModule,l.RxNameValuePairsEditorModule,a.AdaptRxCounterModule,l.RxDirectivesModule,u.TranslateModule]]});const cp={name:"Webhook Callback Processor Configuration",fieldIds:{name:56600,processor:56601,bundleId:56602,configMetadata:56603}};class dp{constructor(e){this.httpClient=e,this.metadataFieldData=this.httpClient.get("/api/rx/application/webhook/processorsmetadata")}getMetadataFields(){return this.metadataFieldData}}dp.\u0275fac=function(e){return new(e||dp)(o["\u0275\u0275inject"](b.HttpClient))},dp.\u0275prov=o["\u0275\u0275defineInjectable"]({token:dp,factory:dp.\u0275fac,providedIn:"root"});class pp extends l.RxModalClass{constructor(e,t,i,n,o,r,a,s,l,c,d){super(e,d),this.dockedPanelContext=e,this.rxGlobalCacheService=t,this.rxRecordDefinitionCacheService=i,this.rxRecordInstanceService=n,this.rxWebhookCallbackConfigurationService=o,this.rxOverlayService=r,this.rxJsonParserService=a,this.rxNotificationService=s,this.formBuilder=l,this.translateService=c,this.injector=d,this.defaultControls={configurationName:"",bundleId:[],processor:[]}}ngOnInit(){super.ngOnInit(),this.webhookCallbackConfigurationForm=this.formBuilder.group(this.defaultControls),this.isEditMode=this.dockedPanelContext.getData().isEditMode,this.rxGlobalCacheService.getBundleDescriptors().subscribe(e=>{this.bundleIdOptions=e.filter(e=>e.isApplication).sort((e,t)=>e.friendlyName.localeCompare(t.friendlyName)).map(e=>({displayValue:e.friendlyName,value:e.id}))}),this.rxRecordDefinitionCacheService.getRecordDefinition(cp.name).subscribe(e=>{this.processorOptions=(0,m.chain)(e.fieldDefinitions).find({id:cp.fieldIds.processor}).get("optionNamesById").map((e,t)=>({displayValue:e,value:t})).value()}),this.isEditMode?this.rxRecordInstanceService.get(cp.name,this.dockedPanelContext.getData().recordId).subscribe(e=>{this.recordInstance=e,this.setFormControlValues(),this.callbackUrl=[location.origin,"api/rx/application/webhook_callback",this.recordInstance.fieldInstances[x.RX_RECORD_DEFINITION.coreFieldIds.id].value,this.rxOverlayService.getCurrentOverlayContext().tenantId].join("/"),this.metadataFields=this.rxJsonParserService.tryParseJson(this.recordInstance.fieldInstances[cp.fieldIds.configMetadata].value),this.generateMetadataFieldFormControls()}):this.rxRecordInstanceService.getNew(cp.name).subscribe(e=>this.recordInstance=e)}isDirty(){return this.webhookCallbackConfigurationForm.dirty}setFormControlValues(){this.webhookCallbackConfigurationForm.get("configurationName").setValue(this.recordInstance.fieldInstances[cp.fieldIds.name].value);const e=(0,m.find)(this.bundleIdOptions,{value:this.recordInstance.fieldInstances[cp.fieldIds.bundleId].value});this.webhookCallbackConfigurationForm.get("bundleId").setValue([{value:e.value,displayValue:e.displayValue}]);const t=(0,m.find)(this.processorOptions,{value:String(this.recordInstance.fieldInstances[cp.fieldIds.processor].value)});this.webhookCallbackConfigurationForm.get("processor").setValue([{value:t.value,displayValue:t.displayValue}])}removeMetadataFieldFormControls(){Object.keys(this.webhookCallbackConfigurationForm.controls).forEach(e=>{(0,m.has)(this.defaultControls,e)||this.webhookCallbackConfigurationForm.removeControl(e)})}generateMetadataFieldFormControls(){this.metadataFields.forEach(e=>{this.webhookCallbackConfigurationForm.addControl(e.name,new r.FormControl(e.value||""))})}loadMetadataFields(){this.rxWebhookCallbackConfigurationService.getMetadataFields().subscribe(e=>{this.metadataFields=e[this.webhookCallbackConfigurationForm.get("processor").value[0].value],this.removeMetadataFieldFormControls(),this.generateMetadataFieldFormControls()})}saveConfiguration(){this.recordInstance.setFieldValue(cp.fieldIds.name,this.webhookCallbackConfigurationForm.get("configurationName").value),this.recordInstance.setFieldValue(cp.fieldIds.bundleId,this.webhookCallbackConfigurationForm.get("bundleId").value[0].value),this.recordInstance.setFieldValue(cp.fieldIds.processor,this.webhookCallbackConfigurationForm.get("processor").value[0].value),(0,m.forEach)(this.metadataFields,e=>{e.value=this.webhookCallbackConfigurationForm.get(e.name).value}),this.recordInstance.setFieldValue(cp.fieldIds.configMetadata,JSON.stringify(this.metadataFields)),this.isEditMode?this.rxRecordInstanceService.save(this.recordInstance).subscribe(()=>this.successCallback()):this.rxRecordInstanceService.create(this.recordInstance).subscribe(()=>this.successCallback())}successCallback(){this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configurations-saved.message")),this.dockedPanelContext.close(null)}optionFormatter(e){return e.displayValue}cancel(){this.dockedPanelContext.dismiss(a.DismissReasons.CLOSE_BTN)}}pp.\u0275fac=function(e){return new(e||pp)(o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](f.RxGlobalCacheService),o["\u0275\u0275directiveInject"](x.RxRecordDefinitionCacheService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](dp),o["\u0275\u0275directiveInject"](f.RxOverlayService),o["\u0275\u0275directiveInject"](g.RxJsonParserService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](o.Injector))},pp.\u0275cmp=o["\u0275\u0275defineComponent"]({type:pp,selectors:[["rx-webhook-callback-configuration"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:27,consts:[[1,"dp-body"],[3,"formGroup"],["rx-id","configuration-name","formControlName","configurationName","required","true",1,"form-group","d-block",3,"label"],["rx-id","bundle-name","formControlName","bundleId","required","true",1,"form-group","d-block",3,"label","options","optionFormatter"],["rx-id","processor","formControlName","processor","required","true",1,"form-group","d-block",3,"label","options","optionFormatter","onSelectionChange"],["class","form-group d-block","required","true",3,"label","isPassword","formControlName",4,"ngFor","ngForOf"],[1,"form-group"],[1,"form-control-label"],["class","callback-url bg-secondary p-1",4,"ngIf"],[3,"config",4,"ngIf"],[1,"dp-footer"],["type","button","adapt-button","","btn-type","primary","rx-id","save-button",1,"mr-2",3,"disabled","click"],["type","button","adapt-button","","btn-type","secondary","rx-id","cancel-button",3,"click"],["required","true",1,"form-group","d-block",3,"label","isPassword","formControlName"],[1,"callback-url","bg-secondary","p-1"],[3,"config"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275element"](2,"adapt-rx-textfield",2),o["\u0275\u0275pipe"](3,"translate"),o["\u0275\u0275element"](4,"adapt-rx-select",3),o["\u0275\u0275pipe"](5,"translate"),o["\u0275\u0275elementStart"](6,"adapt-rx-select",4),o["\u0275\u0275listener"]("onSelectionChange",function(){return t.loadMetadataFields()}),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,ua,1,3,"adapt-rx-textfield",5),o["\u0275\u0275elementStart"](9,"div",6),o["\u0275\u0275elementStart"](10,"label",7),o["\u0275\u0275text"](11),o["\u0275\u0275pipe"](12,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](13,ma,2,1,"div",8),o["\u0275\u0275template"](14,fa,2,5,"adapt-alert",9),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"div",10),o["\u0275\u0275elementStart"](16,"button",11),o["\u0275\u0275listener"]("click",function(){return t.saveConfiguration()}),o["\u0275\u0275text"](17),o["\u0275\u0275pipe"](18,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"button",12),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](20),o["\u0275\u0275pipe"](21,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.webhookCallbackConfigurationForm),o["\u0275\u0275advance"](1),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](3,15,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configuration-name.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](5,17,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.bundle-name.label")),o["\u0275\u0275property"]("options",t.bundleIdOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275propertyInterpolate"]("label",o["\u0275\u0275pipeBind1"](7,19,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.processor.label")),o["\u0275\u0275property"]("options",t.processorOptions)("optionFormatter",t.optionFormatter),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngForOf",t.metadataFields),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate"](o["\u0275\u0275pipeBind1"](12,21,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.callback-url.label")),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("ngIf",t.isEditMode),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!t.isEditMode),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("disabled",t.webhookCallbackConfigurationForm.pristine||t.webhookCallbackConfigurationForm.invalid),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](18,23,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](21,25,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,r.RequiredValidator,a.AdaptRxSelectComponent,n.NgForOf,n.NgIf,a.AdaptButtonComponent,a.AdaptAlertComponent],pipes:[u.TranslatePipe],styles:[".callback-url[_ngcontent-%COMP%]{word-break:break-all}"]});class up{constructor(e,t,i,n,o){this.formBuilder=e,this.rxModalService=t,this.rxNotificationService=i,this.rxRecordInstanceService=n,this.translateService=o}ngOnInit(){this.gridConfig=(0,h.of)({actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",icon:"trash",actions:[{name:()=>this.deleteConfigurations()}]}],recordDefinitionName:cp.name,enableRowSelection:d.RowSelectionMode.Multiple,columns:this.getColumns(),styles:"flex-fill"})}editConfiguration(e){this.openDockedPanel(!0,e[x.RX_RECORD_DEFINITION.coreFieldIds.id])}createConfiguration(){this.openDockedPanel(!1)}deleteConfigurations(){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.delete-confirmation.message")}).then(e=>{if(e){const e=[];(0,m.map)(this.grid.api.getSelectedRows(),t=>{e.push(this.rxRecordInstanceService.delete(cp.name,t[x.RX_RECORD_DEFINITION.coreFieldIds.id]))}),(0,h.forkJoin)(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configurations-deleted.message")),this.grid.api.refresh().subscribe()})}})}getColumns(){return[{index:0,title:this.translateService.instant("com.bmc.arsys.rx.client.common.name.label"),fieldId:String(cp.fieldIds.name),clickable:!0,actions:[{name:(e,t)=>{this.editConfiguration(t)}}]},{index:1,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.application.label"),fieldId:String(cp.fieldIds.processor)},{index:2,title:this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.created-date.label"),fieldId:String(x.RX_RECORD_DEFINITION.coreFieldIds.createdDate)}]}openDockedPanel(e,t){return this.rxModalService.openDockedPanel({title:this.translateService.instant("com.bmc.arsys.rx.client.admin.webhook-callback-configuration.header.title"),content:pp,data:{isEditMode:e,recordId:t}}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}}up.\u0275fac=function(e){return new(e||up)(o["\u0275\u0275directiveInject"](r.FormBuilder),o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](x.RxRecordInstanceService),o["\u0275\u0275directiveInject"](u.TranslateService))},up.\u0275cmp=o["\u0275\u0275defineComponent"]({type:up,selectors:[["rx-admin-webhook-callback-configuration"]],viewQuery:function(e,t){if(1&e&&o["\u0275\u0275viewQuery"](ct,7),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first)}},decls:7,vars:7,consts:[[3,"header"],["type","button","adapt-button","","btn-type","tertiary","rx-id","new-configuration-button",1,"d-icon-plus_circle","align-self-start",3,"click"],[3,"config"],["grid",""]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"button",1),o["\u0275\u0275listener"]("click",function(){return t.createConfiguration()}),o["\u0275\u0275text"](3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](5,"rx-record-grid",2,3),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.webhook-callback-configuration.header.title")),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.client.common.new.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.gridConfig))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent],pipes:[u.TranslatePipe],encapsulation:2});class mp{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-admin-webhook-callback-configuration",componentFactory:this.componentFactoryResolver.resolveComponentFactory(up),name:"Webhook callback configuration",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}mp.\u0275fac=function(e){return new(e||mp)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},mp.\u0275mod=o["\u0275\u0275defineNgModule"]({type:mp,declarations:[up,pp],imports:[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptButtonModule,r.ReactiveFormsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,a.AdaptAlertModule,u.TranslateModule]}),mp.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,s.AdminSettingsModule,d.RecordGridModule,a.AdaptButtonModule,r.ReactiveFormsModule,a.AdaptRxTextfieldModule,a.AdaptRxSelectModule,a.AdaptAlertModule,u.TranslateModule]]});class hp{constructor(e){this.httpClient=e,this.apiPath="/api/com.bmc.dsm.chatbot/comaround"}getSearchFilters(){return this.httpClient.get(`${this.apiPath}/search-filters`).pipe((0,v.map)(e=>({data:e,totalSize:e.length})))}deleteSearchFilters(e){return(0,h.forkJoin)(e.map(e=>this.httpClient.delete(`${this.apiPath}/search-filters/${e}`)))}createSearchFilter(e){return this.httpClient.post(`${this.apiPath}/search-filters`,e)}updateSearchFilter(e){return this.httpClient.put(`${this.apiPath}/search-filters`,e)}getTags(){return this.httpClient.get(`${this.apiPath}/api/tags`)}}hp.\u0275fac=function(e){return new(e||hp)(o["\u0275\u0275inject"](b.HttpClient))},hp.\u0275prov=o["\u0275\u0275defineInjectable"]({token:hp,factory:hp.\u0275fac,providedIn:"root"});class fp extends l.RxModalClass{constructor(e,t,i,n,o,s){super(t,i),this.rxSearchFiltersService=e,this.dockedPanelContext=t,this.injector=i,this.rxNotificationService=n,this.translateService=o,this.rxModalService=s,this.tagsOperators=["OR","AND"],this.isEditMode=Boolean(this.dockedPanelContext.getData()),this.tags$=this.rxSearchFiltersService.getTags().pipe((0,v.shareReplay)(1)),this.searchFilterEditorFormGroup=new r.FormGroup({name:new r.FormControl("",a.AdaptValidators.required()),tagsOperator:new r.FormControl([],a.AdaptValidators.required()),tags:new r.FormControl([],a.AdaptValidators.required())}),this.tagSuggestions=e=>e.pipe((0,v.debounceTime)(200),(0,v.distinctUntilChanged)(),(0,v.withLatestFrom)(this.tags$),(0,v.map)(([e,t])=>t.filter(t=>t.startsWith(e))))}ngOnInit(){this.isEditMode&&this.searchFilterEditorFormGroup.setValue({name:this.dockedPanelContext.getData().name,tagsOperator:[this.dockedPanelContext.getData().tagsOperator],tags:this.dockedPanelContext.getData().tags})}save(){const{id:e}=this.dockedPanelContext.getData()||{},[t]=this.searchFilterEditorFormGroup.value.tagsOperator,i=Object.assign(Object.assign({id:e},this.searchFilterEditorFormGroup.getRawValue()),{tagsOperator:t});(this.isEditMode?this.rxSearchFiltersService.updateSearchFilter(i):this.rxSearchFiltersService.createSearchFilter(i)).subscribe(()=>{this.close(),this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message"))})}close(){this.dockedPanelContext.close(a.DismissReasons.CLOSE_BTN)}cancel(){this.searchFilterEditorFormGroup.dirty?this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.common.unsaved-data.message")}).then(e=>{e&&this.close()}):this.close()}}fp.\u0275fac=function(e){return new(e||fp)(o["\u0275\u0275directiveInject"](hp),o["\u0275\u0275directiveInject"](a.DockedPanelContext),o["\u0275\u0275directiveInject"](o.Injector),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](u.TranslateService),o["\u0275\u0275directiveInject"](l.RxModalService))},fp.\u0275cmp=o["\u0275\u0275defineComponent"]({type:fp,selectors:[["rx-search-filters-editor"]],features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:24,consts:[[1,"dp-body"],[3,"formGroup"],[1,"form-group"],[3,"formControlName","label"],["required","",3,"formControlName","options","label"],["required","","placeholder","",3,"formControlName","suppressManual","label","search","openDropdownOnFocus"],[1,"dp-footer"],[1,"btn","btn-primary","mr-2",3,"disabled","click"],[1,"btn","btn-secondary",3,"click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",0),o["\u0275\u0275elementStart"](1,"form",1),o["\u0275\u0275elementStart"](2,"div",2),o["\u0275\u0275element"](3,"adapt-rx-textfield",3),o["\u0275\u0275pipe"](4,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"div",2),o["\u0275\u0275element"](6,"adapt-rx-select",4),o["\u0275\u0275pipe"](7,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](8,"div",2),o["\u0275\u0275element"](9,"adapt-tag-field",5),o["\u0275\u0275pipe"](10,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"div",6),o["\u0275\u0275elementStart"](12,"button",7),o["\u0275\u0275listener"]("click",function(){return t.save()}),o["\u0275\u0275text"](13),o["\u0275\u0275pipe"](14,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](15,"button",8),o["\u0275\u0275listener"]("click",function(){return t.cancel()}),o["\u0275\u0275text"](16),o["\u0275\u0275pipe"](17,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("formGroup",t.searchFilterEditorFormGroup),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("formControlName","name")("label",o["\u0275\u0275pipeBind1"](4,14,"com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.name.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formControlName","tagsOperator")("options",t.tagsOperators)("label",o["\u0275\u0275pipeBind1"](7,16,"com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.relationship.label")),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("formControlName","tags")("suppressManual",!0)("label",o["\u0275\u0275pipeBind1"](10,18,"com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.tags.label"))("search",t.tagSuggestions)("openDropdownOnFocus",!0),o["\u0275\u0275advance"](3),o["\u0275\u0275property"]("disabled",t.searchFilterEditorFormGroup.invalid||!t.searchFilterEditorFormGroup.dirty),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](14,20,"com.bmc.arsys.rx.client.common.save.label")," "),o["\u0275\u0275advance"](3),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](17,22,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[r["\u0275NgNoValidate"],r.NgControlStatusGroup,r.FormGroupDirective,a.AdaptRxTextfieldComponent,r.NgControlStatus,r.FormControlName,a.AdaptRxSelectComponent,r.RequiredValidator,a.AdaptMetatagComponent],pipes:[u.TranslatePipe],encapsulation:2,changeDetection:0});class gp extends p.BaseViewComponent{constructor(e,t,i,n,o){super(),this.rxModalService=e,this.rxNotificationService=t,this.adaptDockedPanelService=i,this.rxSearchFiltersService=n,this.translateService=o,this.searchFilters=[]}ngOnInit(){this.initializeRecordGrid()}initializeRecordGrid(){const e=[{fieldId:"id",title:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.grid.column.id.title"),visible:!1},{fieldId:"name",title:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.grid.column.search-filter-name.title"),clickable:!0,actions:[{name:(e,t)=>{this.openEditor(t)}}]},{fieldId:"tagsOperator",title:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.grid.column.relationship.title")},{fieldId:"tags",title:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.grid.column.tags.title"),cellTemplate:this.tagsTemplate}],t={fieldDefinitions:[{id:"id",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"name",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"tagsOperator",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character},{id:"tags",resourceType:x.RX_RECORD_DEFINITION.resourceTypes.character}]},i=[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),style:"tertiary",iconCls:"trash",actions:[{name:()=>this.deleteSearchFilters()}]}];this.recordGridConfig$=(0,h.of)({columns:e,emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.grid.empty-state.label"),enableRowSelection:d.RowSelectionMode.Multiple,enableFiltering:!1,recordIdField:"id",styles:"flex-fill",useExternalFiltering:!1,getRecordDefinition:()=>(0,h.of)(t),getData:()=>this.rxSearchFiltersService.getSearchFilters(),actionButtons:i,filterMode:d.RecordGridFilterMode.Basic})}deleteSearchFilters(){const e=this.grid.api.getSelectedRows().map(e=>e.id);this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:l.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.delete-confirmation.message")}).then(t=>{t&&this.rxSearchFiltersService.deleteSearchFilters(e).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.admin.search-filters.delete-success.message")),this.grid.api.refresh().subscribe()})})}openEditor(e){this.adaptDockedPanelService.open({title:this.translateService.instant(e?"com.bmc.arsys.rx.client.admin.search-filters-editor.edit.title":"com.bmc.arsys.rx.client.admin.search-filters-editor.new.title"),content:fp,data:e}).then(()=>{this.grid.api.refresh().subscribe()}).catch(m.noop)}}gp.\u0275fac=function(e){return new(e||gp)(o["\u0275\u0275directiveInject"](l.RxModalService),o["\u0275\u0275directiveInject"](f.RxNotificationService),o["\u0275\u0275directiveInject"](a.AdaptDockedPanelService),o["\u0275\u0275directiveInject"](hp),o["\u0275\u0275directiveInject"](u.TranslateService))},gp.\u0275cmp=o["\u0275\u0275defineComponent"]({type:gp,selectors:[["rx-search-filters"]],viewQuery:function(e,t){if(1&e&&(o["\u0275\u0275viewQuery"](d.RecordGridComponent,7),o["\u0275\u0275viewQuery"](ga,7)),2&e){let e;o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.grid=e.first),o["\u0275\u0275queryRefresh"](e=o["\u0275\u0275loadQuery"]())&&(t.tagsTemplate=e.first)}},features:[o["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:7,consts:[[3,"header"],["adapt-button","","type","button","btn-type","tertiary",3,"click"],[1,"d-icon-plus_circle"],[1,"mt-2","h-100",3,"config"],["tagsTemplate",""],[1,"d-flex","flex-row","flex-wrap"],[4,"ngFor","ngForOf"],[3,"type","removable"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"rx-admin-settings",0),o["\u0275\u0275pipe"](1,"translate"),o["\u0275\u0275elementStart"](2,"div"),o["\u0275\u0275elementStart"](3,"button",1),o["\u0275\u0275listener"]("click",function(){return t.openEditor()}),o["\u0275\u0275element"](4,"span",2),o["\u0275\u0275text"](5),o["\u0275\u0275pipe"](6,"translate"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](7,"rx-record-grid",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275template"](8,xa,2,1,"ng-template",null,4,o["\u0275\u0275templateRefExtractor"])),2&e&&(o["\u0275\u0275propertyInterpolate"]("header",o["\u0275\u0275pipeBind1"](1,3,"com.bmc.arsys.rx.client.admin.search-filters.header.label")),o["\u0275\u0275advance"](5),o["\u0275\u0275textInterpolate1"](" ",o["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.admin.search-filters.new-search-filter.button.label")," "),o["\u0275\u0275advance"](2),o["\u0275\u0275property"]("config",t.recordGridConfig$))},directives:[s.AdminSettingsComponent,a.AdaptButtonComponent,d.RecordGridComponent,n.NgForOf,a.AdaptTagComponent],pipes:[u.TranslatePipe,a.AdaptTruncatePipe],encapsulation:2,changeDetection:0});class vp{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-search-filters",componentFactory:this.componentFactoryResolver.resolveComponentFactory(gp),name:"Search filters",isPageComponent:!0,availableInBundles:[f.RX_APPLICATION.settingsBundleId]})}}vp.\u0275fac=function(e){return new(e||vp)(o["\u0275\u0275inject"](o.ComponentFactoryResolver),o["\u0275\u0275inject"](S.RxViewComponentRegistryService))},vp.\u0275mod=o["\u0275\u0275defineNgModule"]({type:vp,declarations:[gp,fp],imports:[n.CommonModule,r.ReactiveFormsModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptMetatagModule,a.AdaptRxFormControlModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptTagModule,a.AdaptTruncatePipeModule,s.AdminSettingsModule,d.RecordGridModule],exports:[gp]}),vp.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[n.CommonModule,r.ReactiveFormsModule,u.TranslateModule,a.AdaptButtonModule,a.AdaptMetatagModule,a.AdaptRxFormControlModule,a.AdaptRxSelectModule,a.AdaptRxTextfieldModule,a.AdaptTagModule,a.AdaptTruncatePipeModule,s.AdminSettingsModule,d.RecordGridModule]]});class xp{}xp.\u0275fac=function(e){return new(e||xp)},xp.\u0275mod=o["\u0275\u0275defineNgModule"]({type:xp,declarations:[Aa,Ia,Sa,wa],imports:[a.AdaptDockedPanelModule,a.AdaptModalModule,a.AdaptTreeModule,a.AdaptEmptyStateModule,a.AdaptSidebarModule,a.AdaptButtonModule,a.AdaptBusyModule,a.AdaptAccordionModule,hs,Fa,s.AdminSettingsModule,$a,os,us,gs,As,ks,Ws,ll,ml,n.CommonModule,Fl,xl,Bl,bl,Xl,r.FormsModule,Jl,sc,Nc,xc,Sc,Gc,Dc,Ec,Xc,d.RecordGridModule,od,bd,p.RuntimeViewModule,s.RxFormBuilderModule,l.RxBusyIndicatorModule,wd,Rd,Fd,kd,Nd,Kc,ud,u.TranslateModule,Kd,c.ViewActionsModule,d.ViewComponentsModule,Sl,lp,mp,Gd,Wc,nc,vp]}),xp.\u0275inj=o["\u0275\u0275defineInjector"]({providers:[ba],imports:[[a.AdaptDockedPanelModule,a.AdaptModalModule,a.AdaptTreeModule,a.AdaptEmptyStateModule,a.AdaptSidebarModule,a.AdaptButtonModule,a.AdaptBusyModule.forRoot(),a.AdaptAccordionModule,hs,Fa,s.AdminSettingsModule,$a,os,us,gs,As,ks,Ws,ll,ml,n.CommonModule,Fl,xl,Bl,bl,Xl,r.FormsModule,Jl,sc,Nc,xc,Sc,Gc,Dc,Ec,Xc,d.RecordGridModule,od,bd,p.RuntimeViewModule,s.RxFormBuilderModule,l.RxBusyIndicatorModule,wd,Rd,Fd,kd,Nd,Kc,ud,u.TranslateModule,Kd,c.ViewActionsModule,d.ViewComponentsModule,Sl,lp,mp,Gd,Wc,nc,vp]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-chatbot-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RX_CHATBOTS:()=>l,RxChatbotDefinitionService:()=>c});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),r=i("rxjs"),a=i("./node_modules/rxjs/_esm2015/operators/index.js"),s=i("lodash");const l={chatbotSettings:{defaultBotId:"AGGADGG8ECDC0AP0PA6EPJSIGS75QX",recordDefinitionName:"Chatbot Configuration",recordFieldIds:{name:1770,bundleId:61001}},componentSettings:{componentName:"Global Chatbot Configuration Settings",settingNames:{displayChatbotsDropdown:"DisplayChatbotsDropdown"}},sections:{chatbotConfigurations:{title:"com.bmc.arsys.rx.client.admin.chatbots.chatbot-configurations.title",isExpanded:!0},globalChatbotSettings:{title:"com.bmc.arsys.rx.client.admin.chatbots.global-chatbot-settings.title",displayChatbotsDropdown:!1,isExpanded:!1}}};class c{constructor(e,t){this.rxRecordInstanceService=e,this.rxRecordInstanceUpdateService=t}delete(e){return(0,r.forkJoin)((0,s.map)(e,e=>this.rxRecordInstanceService.delete(l.chatbotSettings.recordDefinitionName,e)))}create(e,t){return this.rxRecordInstanceService.getNew(l.chatbotSettings.recordDefinitionName).pipe((0,a.switchMap)(i=>(i.setFieldValue(l.chatbotSettings.recordFieldIds.name,e),i.setFieldValue(l.chatbotSettings.recordFieldIds.bundleId,t.id),i.setFieldValue(o.RX_RECORD_DEFINITION.coreFieldIds.description,`${t.friendlyName} Chatbot configuration`),this.rxRecordInstanceService.create(i))))}rename(e,t){return this.rxRecordInstanceService.get(l.chatbotSettings.recordDefinitionName,e).pipe((0,a.switchMap)(e=>(e.setFieldValue(l.chatbotSettings.recordFieldIds.name,t),this.rxRecordInstanceUpdateService.execute(e))))}}c.\u0275fac=function(e){return new(e||c)(n["\u0275\u0275inject"](o.RxRecordInstanceService),n["\u0275\u0275inject"](o.RxRecordInstanceUpdateService))},c.\u0275prov=n["\u0275\u0275defineInjectable"]({token:c,factory:c.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-rule-api.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{RX_RULE_DEFINITION:()=>p,RxRuleDefinitionDataPageService:()=>d,RxRuleDefinitionService:()=>v,RxRulePipesModule:()=>h,RxRuleTriggerEventPipe:()=>u,RxRuleTriggerTimeCriteriaDisplayValuePipe:()=>m,renameRuleDefinitionCommand:()=>f,revertRuleCustomizationResourceType:()=>g});var n=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),o=i("./node_modules/@angular/core/fesm2015/core.js"),r=i("./node_modules/@angular/common/fesm2015/common.js"),a=i("./node_modules/moment-es6/index.js"),s=i("lodash"),l=i("./node_modules/@angular/common/fesm2015/http.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js");class d extends n.DataPage{constructor(e){super(e,"com.bmc.arsys.rx.application.rule.datapage.RuleDefinitionDataPageQuery"),this.injector=e}}d.\u0275fac=function(e){return new(e||d)(o["\u0275\u0275inject"](o.Injector))},d.\u0275prov=o["\u0275\u0275defineInjectable"]({token:d,factory:d.\u0275fac,providedIn:"root"});const p={ruleElementResourceTypes:{scheduleTime:"com.bmc.arsys.rx.services.rule.domain.ScheduleTime",intervalTime:"com.bmc.arsys.rx.services.rule.domain.IntervalTime"},actionTypeNames:{connector:"connector"},timerTypes:{interval:"Interval",schedule:"Schedule"}};class u{transform(e){let t="";return e&&e.timeCriteria?e.timeCriteria.resourceType===p.ruleElementResourceTypes.scheduleTime?t=p.timerTypes.schedule:e.timeCriteria.resourceType===p.ruleElementResourceTypes.intervalTime&&(t=p.timerTypes.interval):e&&e.eventTypes?t=e.eventTypes.join(", "):e&&e.eventTypeDisplayName&&(t=e.eventTypeDisplayName),t}}u.\u0275fac=function(e){return new(e||u)},u.\u0275pipe=o["\u0275\u0275definePipe"]({name:"rxRuleTriggerEventPipe",type:u,pure:!0});class m{transform(e){let t;switch(e.resourceType){case p.ruleElementResourceTypes.intervalTime:t=this.buildIntervalTimeDisplayValue(e);break;case p.ruleElementResourceTypes.scheduleTime:t=this.buildScheduleTimeDisplayValue(e);break;default:t=""}return t}buildIntervalTimeDisplayValue(e){const t=[];function i(e,t,i){return e?`${e} ${e>1?i:t}`:""}return t.push(i(e.days,"day","days")),t.push(i(e.hours,"hour","hours")),t.push(i(e.minutes,"minute","minutes")),`Every ${(0,s.compact)(t).join(", ")}`}buildScheduleTimeDisplayValue(e){var t,i;const n={Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6,Sunday:7};function o(e){const t=e.length>1?` and ${e.pop()}`:"";return`${e.join(", ")}${t}`}const r=(0,s.chain)(e.weekDays).map(s.toLower).map(s.startCase).sortBy(e=>n[e]).value(),l=(0,s.sortBy)(e.hours).map(t=>(0,a.default)(`${t}:${e.minute}`,["H:mm"],"en").format("h:mmA")),c=(null===(t=e.monthDays)||void 0===t?void 0:t.length)?`On dates ${o((0,s.sortBy)(e.monthDays))} of every month`:"";return`${c}${(null===(i=e.weekDays)||void 0===i?void 0:i.length)?`${c?", and every ":"Every "}${o(r)}`:""}${` at ${o(l)}`}`}}m.\u0275fac=function(e){return new(e||m)},m.\u0275pipe=o["\u0275\u0275definePipe"]({name:"rxRuleTriggerTimeCriteriaDisplayValue",type:m,pure:!0});class h{}h.\u0275fac=function(e){return new(e||h)},h.\u0275mod=o["\u0275\u0275defineNgModule"]({type:h,declarations:[u,m],imports:[r.CommonModule],exports:[u,m]}),h.\u0275inj=o["\u0275\u0275defineInjector"]({imports:[[r.CommonModule]]});const f="com.bmc.arsys.rx.application.rule.command.RenameRuleDefinitionCommand",g="com.bmc.arsys.rx.application.rule.command.RevertRuleDefinitionCommand";class v{constructor(e,t,i){this.httpClient=e,this.rxGuidService=t,this.rxCommandFactoryService=i,this.renameCommand=i.forResourceType(f),this.revertCustomizationCommand=i.forResourceType(g)}get(e){return this.httpClient.get(this.getUrl(e))}rename(e,t){return this.renameCommand.execute({name:e,newName:t})}revertCustomization(e){return this.revertCustomizationCommand.execute({ruleDefinitionName:e})}update(e){return this.httpClient.put(this.getUrl(e.name),e)}getUrl(e){return`/api/rx/application/rule/ruledefinition/${encodeURIComponent(e)}`}}v.\u0275fac=function(e){return new(e||v)(o["\u0275\u0275inject"](l.HttpClient),o["\u0275\u0275inject"](c.RxGuidService),o["\u0275\u0275inject"](n.RxCommandFactoryService))},v.\u0275prov=o["\u0275\u0275defineInjectable"]({token:v,factory:v.\u0275fac,providedIn:"root"})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-actions.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ApplyGridFilterViewActionModule:()=>M,AssociateViewActionModule:()=>U,AvcAssociateActionModule:()=>X,CloseViewActionModule:()=>W,DeleteRecordsViewActionModule:()=>Q,DisassociateViewActionModule:()=>Z,EditRecordsViewActionModule:()=>oe,LaunchProcessDesignerActionModule:()=>Ae,LaunchProcessViewActionModule:()=>le,LaunchUrlViewActionModule:()=>ue,OpenViewActionModule:()=>G,ProcessDesignerElementPickerModule:()=>_e,RX_OPEN_VIEW:()=>O,RefreshViewActionModule:()=>he,RxApplyGridFilterActionName:()=>A,RxApplyGridFilterViewActionService:()=>T,RxAssociateViewActionService:()=>j,RxAvcAssociateActionService:()=>q,RxCloseViewActionService:()=>H,RxDeleteRecordsViewActionService:()=>Y,RxDisassociateViewActionService:()=>K,RxEditRecordsViewActionService:()=>ne,RxLaunchProcessDesignerActionService:()=>we,RxLaunchProcessViewActionService:()=>se,RxLaunchUrlViewActionService:()=>ce,RxOpenViewActionService:()=>k,RxOpenViewModelHelperService:()=>B,RxProcessDesignerElementPickerComponent:()=>Ie,RxRefreshViewActionService:()=>me,RxSaveViewActionService:()=>fe,RxSetPropertyViewActionService:()=>ve,RxUnknownViewActionDesignManager:()=>Fe,RxUnknownViewActionService:()=>Te,SaveViewActionModule:()=>ge,SetPropertyViewActionModule:()=>Ce,UnknownViewActionModule:()=>Me,ViewActionsDesignModule:()=>Pe,ViewActionsModule:()=>Oe});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),s=i("rxjs"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),d=i("./node_modules/rxjs/_esm2015/operators/index.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),m=i("lodash"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),f=i("./node_modules/@angular/router/fesm2015/router.js"),g=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),x=i("./node_modules/@angular/common/fesm2015/common.js"),y=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),b=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),C=i("./node_modules/@angular/forms/fesm2015/forms.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),w=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js");function I(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275element"](1,"adapt-rx-textarea",9),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.messages.label")),n["\u0275\u0275property"]("ngModel",e.data.details)}}function _(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275element"](1,"div",3),n["\u0275\u0275elementEnd"]())}const D=["dropdownButton"];function R(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",8),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().clearDefinition(t)}),n["\u0275\u0275elementEnd"]()}}const A="rxApplyGridFilterAction";class T{execute(e){return e.targetApi?e.targetApi.applyFilters?(e.targetApi.applyFilters(e.filters,e.mode),s.EMPTY):((0,s.throwError)(new a.RxError(`${A}: target component does not support applyFilters API.`)),s.EMPTY):(0,s.throwError)(new a.RxError("rxApplyGridFilterAction: component is not specified."))}}T.\u0275fac=function(e){return new(e||T)},T.\u0275prov=n["\u0275\u0275defineInjectable"]({token:T,factory:T.\u0275fac,providedIn:"root"});class F extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.viewDesignerFacade=this.injector.get(l.ViewDesignerFacade),this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxRecordGridDesignUtilsService=this.injector.get(p.RxRecordGridDesignUtilsService),this.rxRecordGridFilterSelectHelperService=this.injector.get(p.RxRecordGridFilterSelectHelperService),this.sandbox.children$.pipe((0,d.first)(),(0,d.withLatestFrom)(this.sandbox.actionProperties$.pipe((0,d.pluck)("filters"))),(0,d.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{const i=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(e);this.sandbox.updateActionProperties({filterValue:{basicFilters:i,filtersJson:t}})});this.sandbox.actionProperties$.pipe((0,d.pluck)("filterValue"),(0,d.distinctUntilChanged)()).pipe((0,d.skip)(1),(0,d.takeUntil)(this.sandbox.destroyed$)).subscribe(({filtersJson:e,basicFilters:t})=>{const i=this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(t);this.sandbox.setChildren(i),this.sandbox.updateActionProperties({filters:e})});const i=this.sandbox.actionProperties$.pipe((0,d.pluck)("mode"),(0,d.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,d.pluck)("targetApi"),(0,d.distinctUntilChanged)()).pipe((0,d.map)(F.extractGuidFromExpression));(0,s.merge)(n.pipe((0,d.skip)(1)),i.pipe((0,d.filter)(e=>e===o.ApplyGridFilterMode.Clear))).pipe((0,d.takeUntil)(this.sandbox.destroyed$)).subscribe(()=>{this.sandbox.updateActionProperties({filterValue:{basicFilters:null,filtersJson:null}})});const r=n.pipe((0,d.switchMap)(e=>e?this.viewDesignerFacade.getComponent(e):(0,s.of)(null)),(0,d.map)(e=>(null==e?void 0:e.type)===p.RX_RECORD_GRID.type?e.data:null)),a=r.pipe((0,d.map)(e=>{var t;return null!==(t=null==e?void 0:e.recordDefinitionName)&&void 0!==t?t:null}),(0,d.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e):(0,s.of)(null))),c=r.pipe((0,d.map)(e=>{var t;return null!==(t=null==e?void 0:e.columns)&&void 0!==t?t:[]})),m=a.pipe((0,d.withLatestFrom)(c),(0,d.map)(([e,t])=>{const i=t.filter(e=>e.filterable).map(e=>e.fieldId);return e?Object.assign(Object.assign({},e),{fieldDefinitions:e.fieldDefinitions.filter(e=>i.includes(String(e.id)))}):null})),h=c.pipe((0,d.map)(e=>this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(e)));(0,s.combineLatest)([m,i]).pipe((0,d.withLatestFrom)(h,c),(0,d.takeUntil)(this.sandbox.destroyed$)).subscribe(([[e,t],i,n])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,i,t,n))})}static getInitialProperties(e){return Object.assign({targetApi:null,mode:o.ApplyGridFilterMode.Append,filterValue:{filtersJson:null,basicFilters:null}},e)}getPropertiesByName(){return(0,m.omit)(super.getPropertiesByName(),"filterValue")}getActionEditorConfig(e,t,i,n){const a=new r.Tooltip("<b>Begin</b><p>Begin a batch of filter updates.</p><br><b>Append</b><p>Applied filters are added with the AND operator; existing filters for the specified fields are removed.</p><br><b>Remove</b><p>Existing filters are removed if they match the applied filters.</p><br><b>Overwrite</b><p>All existing filters are replaced with the applied filters.</p><br><b>Merge</b><p>Existing filters with a range of values are replaced with the matching applied filters; existing filters for the other fields are combined with the matching applied filters using the OR operator; applied filters for new fields are added with the AND operator.</p><br><b>Clear</b><p>All existing filters are removed.</p><br><b>End</b><p>Apply all pending filter updates executed in a batch.</p>");a.maxWidth=310;const s=[{name:"targetApi",component:c.ExpressionFormControlComponent,options:{label:"Record grid",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"mode",component:c.RadioFormControlComponent,options:{label:"Mode",tooltip:a,items:[{label:"Begin",value:o.ApplyGridFilterMode.Begin},{label:"Append",value:o.ApplyGridFilterMode.Append},{label:"Remove",value:o.ApplyGridFilterMode.Remove},{label:"Overwrite",value:o.ApplyGridFilterMode.Overwrite},{label:"Merge",value:o.ApplyGridFilterMode.Merge},{label:"Clear",value:o.ApplyGridFilterMode.Clear},{label:"End",value:o.ApplyGridFilterMode.End}]}}],l={name:"filterValue",component:p.RecordGridFilterSelectControlComponent,options:{primaryRecordDefinition:e,selectedFieldIds:n.map(e=>e.fieldId),namedFilterOptions:t,anchorDisabled:!e}},d={name:"emptyFilterMessage",component:c.ValidationFormControlComponent,options:{text:"Record grid expression required to define a filter.",messageType:c.MessageType.Error,customStyle:{"margin-top":"-1rem"}}};return(0,m.includes)([o.ApplyGridFilterMode.Begin,o.ApplyGridFilterMode.End,o.ApplyGridFilterMode.Clear],i)||(s.push(l),e||s.push(d)),s}static extractGuidFromExpression(e){var t;const i=null==e?void 0:e.match(/^\${view\.components\.([0-9a-z-]+)\.api}$/);return null!==(t=i&&i[1])&&void 0!==t?t:null}}class E{constructor(e,t){this.rxJsonParserService=e,this.rxRecordGridFilterHelperService=t}adaptDefinition({componentDefinitions:e,propertiesByName:t}){const i=e.map(e=>{let t=e.propertiesByName.value;const i=this.rxJsonParserService.tryParseJson(t);return i&&i[o.RecordGridNamedFilterOptionKey]&&(t=i),{guid:e.guid,fieldId:e.propertiesByName.fieldId,value:t}});t.filters=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(t.filters,i)}}E.\u0275fac=function(e){return new(e||E)(n["\u0275\u0275inject"](a.RxJsonParserService),n["\u0275\u0275inject"](p.RxRecordGridFilterHelperService))},E.\u0275prov=n["\u0275\u0275defineInjectable"]({token:E,factory:E.\u0275fac,providedIn:"root"});class M{constructor(e,t,i,n){this.rxViewActionRegistryService=e,this.rxApplyGridFilterViewActionService=t,this.rxApplyGridFilterViewActionDefinitionAdapterService=i,this.rxViewActionDefinitionAdapterRegistryService=n,this.rxViewActionRegistryService.register({name:A,label:"Apply grid filter",bundleId:r.RX_APPLICATION.platformBundleId,service:t,designModel:F,parameters:[{name:"targetApi",label:"Record grid",isRequired:!0,enableExpressionEvaluation:!0},{name:"mode",label:"Mode"},{name:"filters"}]}),n.registerRuntimeAdapter(A,this.rxApplyGridFilterViewActionDefinitionAdapterService)}}M.\u0275fac=function(e){return new(e||M)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](T),n["\u0275\u0275inject"](E),n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService))},M.\u0275mod=n["\u0275\u0275defineNgModule"]({type:M}),M.\u0275inj=n["\u0275\u0275defineInjector"]({});const O={actionName:"rxOpenViewAction",modalSize:o.OpenViewActionModalSize,type:o.OpenViewActionType,launchBehavior:o.OpenViewActionLaunchBehavior};class k{constructor(e,t,i,n,o){this.adaptDockedPanelService=e,this.adaptModalService=t,this.router=i,this.rxRuntimeViewUtilsService=n,this.rxViewActionUtilsService=o}execute(e){const t=(0,m.transform)(e.viewParams,(e,t,i)=>{e[i]=(0,m.isObject)(t)?JSON.stringify(t):String(null!=t?t:"")},{});return this.rxRuntimeViewUtilsService.isViewCancellable(e.viewDefinitionName).pipe((0,d.switchMap)(i=>{let n;const o={configuration:{viewDefinitionName:e.viewDefinitionName,inputParams:t,onRegisterApi(e){n=e}},title:e.presentation.title,notification:e.presentation.notification,isCancellable:i},r={beforeDismiss:e=>{const t=!Object.values(g.DismissReasons).includes(e);return t||e===g.DismissReasons.BACKDROP_CLICK&&!i||n.cancel().pipe((0,d.take)(1),(0,d.catchError)(e=>e?(0,s.throwError)(e):s.EMPTY)).subscribe(),t},blockKeyboard:!i,content:v.RuntimeViewModalComponent,size:e.presentation.modalSize,data:o};switch(e.presentation.type){case O.type.FullWidth:return this.openFullWidth(e.presentation.launchBehavior,e.viewDefinitionName,t);case O.type.CenteredModal:return this.adaptModalService.open(r);case O.type.DockedLeftModal:return this.adaptDockedPanelService.open((0,m.defaults)({direction:g.DockedPanelDirection.LEFT},r));case O.type.DockedRightModal:return this.adaptDockedPanelService.open((0,m.defaults)({direction:g.DockedPanelDirection.RIGHT},r));default:return this.openFullWidth(e.presentation.launchBehavior,e.viewDefinitionName,t)}}))}openFullWidth(e,t,i){const n=this.rxViewActionUtilsService.generateViewUrl(t,i);return e===O.launchBehavior.NewWindow?(window.open(`${window.location.pathname}#${n}`),(0,s.throwError)(null)):(0,s.from)(this.router.navigateByUrl(n)).pipe((0,d.switchMapTo)((0,s.throwError)(null)))}}k.\u0275fac=function(e){return new(e||k)(n["\u0275\u0275inject"](g.AdaptDockedPanelService),n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](f.Router),n["\u0275\u0275inject"](v.RxRuntimeViewUtilsService),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},k.\u0275prov=n["\u0275\u0275defineInjectable"]({token:k,factory:k.\u0275fac,providedIn:"root"});class j{constructor(e,t,i,n,o){this.rxAssociationInstanceService=e,this.rxOpenViewActionService=t,this.rxAssociationDefinitionService=i,this.rxLogService=n,this.rxViewActionUtilsService=o}execute(e){return e.associatedRecordId?(0,s.forkJoin)([this.getInstanceIds(e),this.rxAssociationDefinitionService.get(e.associationDefinitionName)]).pipe((0,d.switchMap)(([t,i])=>{let n=[],o=[];return t.length?(e.associationDefinitionRole===h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value?(n=t,o=[e.associatedRecordId]):e.associationDefinitionRole===h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value&&(n=[e.associatedRecordId],o=t),i.cardinality===h.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value?(n=n[0],o=o[0]):i.cardinality===h.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value&&(n=n[0]),this.rxAssociationInstanceService.associateRecords(e.associationDefinitionName,n,o,e.useDefaultRoles,e.nodeARole,e.nodeBRole).pipe((0,d.mapTo)(t))):(0,s.of)(t)})):(0,s.throwError)(new a.RxError("rxAssociateAction: Associated Record ID is not defined."))}getInstanceIds(e){return this.rxOpenViewActionService.execute({presentation:{modalSize:O.modalSize.Large,type:O.type.DockedRightModal},viewDefinitionName:e.viewDefinitionName,viewParams:null}).pipe((0,d.map)(e=>{const t=(0,m.flow)(e=>(0,m.map)(e,e=>this.rxViewActionUtilsService.extractRecordIds(e)),m.flatten,m.compact,m.uniq)(e);return this.rxLogService.debug(`RxAssociateAction: associating ${t.length} record(s)`),t}))}}j.\u0275fac=function(e){return new(e||j)(n["\u0275\u0275inject"](h.RxAssociationInstanceService),n["\u0275\u0275inject"](k),n["\u0275\u0275inject"](h.RxAssociationDefinitionService),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},j.\u0275prov=n["\u0275\u0275defineInjectable"]({token:j,factory:j.\u0275fac,providedIn:"root"});class P{constructor(){this.modalSizeMap={small:O.modalSize.Small,medium:O.modalSize.Medium,large:O.modalSize.Large}}adaptDefinition(e){const t=(0,m.get)(e,"propertiesByName",{});if(t.name===O.actionName){const e=t.presentation.modalSize;this.modalSizeMap[e]&&(t.presentation.modalSize=this.modalSizeMap[e])}}}P.\u0275fac=function(e){return new(e||P)},P.\u0275prov=n["\u0275\u0275defineInjectable"]({token:P,factory:P.\u0275fac,providedIn:"root"});const N=[{id:o.OpenViewActionModalSize.Xsmall,name:"Extra Small (450 px)"},{id:o.OpenViewActionModalSize.Small,name:"Small (650 px)"},{id:o.OpenViewActionModalSize.Medium,name:"Medium (800 px)"},{id:o.OpenViewActionModalSize.Large,name:"Large (1024 px)"},{id:o.OpenViewActionModalSize.Xlarge,name:"Extra Large (1200 px)"},{id:o.OpenViewActionModalSize.Xxlarge,name:"Extra Extra Large (1600 px)"},{id:o.OpenViewActionModalSize.FullSize,name:"Full Size"}],V=[{id:o.OpenViewActionType.FullWidth,name:"Full width"},{id:o.OpenViewActionType.CenteredModal,name:"Centered modal"},{id:o.OpenViewActionType.DockedLeftModal,name:"Docked left modal"},{id:o.OpenViewActionType.DockedRightModal,name:"Docked right modal"}],L=[{id:o.OpenViewActionLaunchBehavior.NewWindow,name:"Open in a new tab"},{id:o.OpenViewActionLaunchBehavior.SameWindow,name:"Open in the same tab"}];class B{getOpenViewInspector(e,t,i,n){const a=e.map(e=>({name:`viewParams.${e.name}`,component:c.ExpressionFormControlComponent,options:{label:e.name,dataDictionary$:n.getDataDictionary(e.name),operators:n.getOperators(e.name)}})),s=t===o.OpenViewActionType.FullWidth,l=t===o.OpenViewActionType.CenteredModal&&i===o.OpenViewActionModalSize.FullSize;return[{name:"viewDefinitionName",component:c.RxDefinitionPickerComponent,options:{label:"View",required:!0,definitionType:c.RxDefinitionPickerType.View}},...a,{name:"presentation.type",component:c.SelectFormControlComponent,options:{label:"Presentation",tooltip:new r.Tooltip("Select how to display the view in the application."),options:V,sortAlphabetically:!1}},...s?[{name:"presentation.launchBehavior",component:c.SelectFormControlComponent,options:{label:"Launch behavior",options:L,sortAlphabetically:!0}}]:[{name:"presentation.modalSize",component:c.SelectFormControlComponent,options:{label:"Size",options:t===o.OpenViewActionType.CenteredModal?N:N.filter(e=>e.id!==o.OpenViewActionModalSize.FullSize),sortAlphabetically:!1}},...l?[]:[{name:"presentation.title",component:c.TextFormControlComponent,options:{label:"Title"}}]]]}}B.\u0275fac=function(e){return new(e||B)},B.\u0275prov=n["\u0275\u0275defineInjectable"]({token:B,factory:B.\u0275fac,providedIn:"root"});class $ extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.sandbox=t,this.rxViewDefinitionCacheService=this.injector.get(o.RxViewDefinitionCacheService),this.rxOpenViewModelHelperService=this.injector.get(B);const i=this.sandbox.actionProperties$.pipe((0,d.pluck)("viewDefinitionName"),(0,d.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,d.pluck)("presentation.type"),(0,d.distinctUntilChanged)()),r=this.sandbox.actionProperties$.pipe((0,d.pluck)("presentation.modalSize"),(0,d.distinctUntilChanged)());(0,s.combineLatest)([i,n,r]).pipe((0,d.switchMap)(([e,t,i])=>this.getActionEditorConfig(e,t,i))).subscribe(e=>this.sandbox.setActionPropertyEditorConfig(e)),i.pipe((0,d.switchMap)(e=>this.getViewOutputParams(e))).subscribe(e=>{this.sandbox.setActionOutputDataDictionary(e.map(({name:e})=>({label:e,expression:this.getOutputExpressionForPropertyPath(e)})))}),n.pipe((0,d.skip)(1)).subscribe(e=>{let t=this.sandbox.getActionProperties();e===o.OpenViewActionType.FullWidth?(t["presentation.launchBehavior"]=o.OpenViewActionLaunchBehavior.SameWindow,t=(0,m.omit)(t,["presentation.modalSize","presentation.title"])):(t=(0,m.omit)(t,["presentation.launchBehavior"]),t["presentation.modalSize"]&&this.sandbox.getActionPropertyValue("presentation.modalSize")!==o.OpenViewActionModalSize.FullSize||(t["presentation.modalSize"]=o.OpenViewActionModalSize.Medium)),this.sandbox.setActionProperties(t)}),r.pipe((0,d.skip)(1)).subscribe(e=>{e===o.OpenViewActionModalSize.FullSize&&this.sandbox.setActionProperties((0,m.omit)(this.sandbox.getActionProperties(),["presentation.title"]))})}static getInitialProperties(e){return Object.assign({viewDefinitionName:null,"presentation.type":o.OpenViewActionType.FullWidth,"presentation.launchBehavior":o.OpenViewActionLaunchBehavior.SameWindow},e)}getActionEditorConfig(e,t,i){return this.getViewInputParams(e).pipe((0,d.map)(e=>this.rxOpenViewModelHelperService.getOpenViewInspector(e,t,i,this.expressionConfigurator)))}getViewInputParams(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,d.pluck)("inputParams")):(0,s.of)([])}getViewOutputParams(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,d.pluck)("outputParams")):(0,s.of)([])}}class G{constructor(e,t,i,n){this.rxViewActionDefinitionAdapterRegistryService=e,this.openViewDefinitionAdapterService=t,this.rxViewActionRegistryService=i,this.rxOpenViewActionService=n,this.rxViewActionRegistryService.register({name:O.actionName,label:"Open view",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxOpenViewActionService,designModel:$,parameters:[{name:"viewDefinitionName",label:"View",isRequired:!0},{name:"viewParams",enableExpressionEvaluation:!0},{name:"presentation",attributes:[{name:"title",localizable:!0}]}]}),e.registerRuntimeAdapter(O.actionName,this.openViewDefinitionAdapterService)}}G.\u0275fac=function(e){return new(e||G)(n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](P),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](k))},G.\u0275mod=n["\u0275\u0275defineNgModule"]({type:G,imports:[x.CommonModule,v.RuntimeViewModule,g.AdaptDockedPanelModule]}),G.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,v.RuntimeViewModule,g.AdaptDockedPanelModule]]});class z extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(r.RxDefinitionNameService),this.rxAssociationDefinitionService=this.injector.get(h.RxAssociationDefinitionService);const i=this.sandbox.actionProperties$.pipe((0,d.pluck)("recordDefinitionName"),(0,d.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,d.pluck)("associationDefinitionName"),(0,d.distinctUntilChanged)()),o=i.pipe((0,d.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,d.map)(t=>t[e].map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,s.of)([]))),a=n.pipe((0,d.switchMap)(e=>e?this.rxAssociationDefinitionService.get(e):(0,s.of)(null)),(0,d.shareReplay)(1)),l=a.pipe((0,d.map)(e=>!!e&&e.nodeAId===e.nodeBId)),c=a.pipe((0,d.map)(e=>!!e&&e.cardinality===h.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)),p=this.sandbox.actionProperties$.pipe((0,d.pluck)("useDefaultRoles"),(0,d.map)(Boolean),(0,d.distinctUntilChanged)());p.pipe((0,d.distinctUntilChanged)(),(0,d.skip)(1)).subscribe(e=>{e&&this.sandbox.setActionProperties((0,m.omit)(this.sandbox.getActionProperties(),["nodeARole","nodeBRole"]))});const f=a.pipe((0,d.map)(e=>e?[{id:h.RxAssociatedRecordNodeSide.NodeA,name:e.nodeAName||h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:h.RxAssociatedRecordNodeSide.NodeB,name:e.nodeBName||h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]));i.pipe((0,d.skip)(1)).subscribe(()=>{this.sandbox.updateActionProperties({associationDefinitionName:null,associationDefinitionRole:null})}),a.pipe((0,d.skip)(1),(0,d.withLatestFrom)(l,i)).subscribe(([e,t,i])=>{if(e&&!t){const t=i===e.nodeAId?h.RxAssociatedRecordNodeSide.NodeA:h.RxAssociatedRecordNodeSide.NodeB;this.sandbox.updateActionProperties({associationDefinitionRole:t})}else this.sandbox.updateActionProperties({associationDefinitionRole:null})}),(0,s.combineLatest)([i,o,f,p]).pipe((0,d.withLatestFrom)(l,c)).subscribe(([[e,t,i,n],o,r])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,t,i,o,r,n))})}static getInitialProperties(e){return Object.assign({recordDefinitionName:null,associationDefinitionName:null,associationDefinitionRole:null,associatedRecordId:null,viewDefinitionName:null},e)}getActionEditorConfig(e,t,i,n,o,r){return[{name:"recordDefinitionName",component:c.RxDefinitionPickerComponent,options:{label:"Record definition to associate",definitionType:c.RxDefinitionPickerType.StandardDataRecord,required:!0}},...e?[{name:"associationDefinitionName",component:c.SelectFormControlComponent,options:{label:"Association to use",options:t,required:!0}},{name:"associationDefinitionRole",component:c.SelectFormControlComponent,isDisabled:!n,options:{label:"Associated record node side",required:!0,options:i}},{name:"associatedRecordId",component:c.ExpressionFormControlComponent,options:{label:"Associated record ID",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"viewDefinitionName",component:c.RxDefinitionPickerComponent,options:{label:"View for selecting or creating associated records",required:!0,definitionType:c.RxDefinitionPickerType.View}},...o?[{name:"useDefaultRoles",component:c.SwitchFormControlComponent,options:{label:"Use default roles"}},...o&&r?[]:[{name:"nodeARole",component:c.ExpressionFormControlComponent,options:{label:"First record role",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"nodeBRole",component:c.ExpressionFormControlComponent,options:{label:"Second record role",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}}]]:[]]:[]]}}class U{constructor(e,t){this.rxViewActionRegistryService=e,this.rxAssociateViewActionService=t,this.rxViewActionRegistryService.register({name:"rxAssociateAction",label:"Associate records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxAssociateViewActionService,designModel:z,parameters:[{name:"recordDefinitionName",label:"Record definition to associate",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"associationDefinitionName",label:"Association to use",isRequired:!0},{name:"associationDefinitionRole",label:"Associated record node side",isRequired:!0},{name:"associatedRecordId",label:"Associated record ID",enableExpressionEvaluation:!0,isRequired:!0},{name:"viewDefinitionName",label:"View for selecting or creating associated records",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"useDefaultRoles"},{name:"nodeARole",enableExpressionEvaluation:!0},{name:"nodeBRole",enableExpressionEvaluation:!0}]})}}U.\u0275fac=function(e){return new(e||U)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](j))},U.\u0275mod=n["\u0275\u0275defineNgModule"]({type:U,imports:[G]}),U.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[G]]});class q{constructor(e,t,i,n){this.rxGuidService=e,this.rxOpenViewActionService=t,this.rxStringService=i,this.rxRecordInstanceUtilsService=n}execute(e){return this.rxOpenViewActionService.execute({viewDefinitionName:e.viewDefinitionName,viewParams:null,presentation:{modalSize:o.OpenViewActionModalSize.Large,type:o.OpenViewActionType.DockedRightModal}}).pipe((0,d.tap)(t=>{const i=(0,m.flow)(e=>(0,m.map)(e,e=>this.extractRecordInstance(e)),m.flatten,m.compact,m.uniq)(t);e.associationViewComponent.associate(i)}),(0,d.switchMapTo)(s.EMPTY))}extractRecordInstance(e){let t=[];if((0,m.isFunction)(e.getSelectedRows))t=(0,m.map)(e.getSelectedRows(),this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance);else if((0,m.isObject)(e)&&this.rxStringService.isNonEmptyString(e[o.RowDataItemIdFieldName]))t.push(this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance(e));else if((0,m.isArray)(e)&&(0,m.some)(e,m.isObject))t=(0,m.map)(e,this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance);else if((0,m.isObject)(e)&&(0,m.isObject)(e.fieldInstances)&&e.id)t.push(e);else if((0,m.isObject)(e)&&(0,m.isObject)(e.fieldInstances)&&!e.id){const i=this.rxGuidService.generate();e.id=i,e.fieldInstances[u.RX_RECORD_DEFINITION.coreFieldIds.id].value=i,e.isNewInstance=!0,t.push(e)}return t}}q.\u0275fac=function(e){return new(e||q)(n["\u0275\u0275inject"](a.RxGuidService),n["\u0275\u0275inject"](k),n["\u0275\u0275inject"](a.RxStringService),n["\u0275\u0275inject"](u.RxRecordInstanceUtilsService))},q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:q,factory:q.\u0275fac,providedIn:"root"});class X{constructor(e,t){this.rxViewActionRegistryService=e,this.rxAvcAssociateActionService=t,this.rxViewActionRegistryService.register({name:"rxAvcAssociate",label:"Avc associate",bundleId:r.RX_APPLICATION.platformBundleId,hidden:!0,service:this.rxAvcAssociateActionService,parameters:[{name:"viewDefinitionName"},{name:"associationViewComponent",enableExpressionEvaluation:!0}]})}}X.\u0275fac=function(e){return new(e||X)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](q))},X.\u0275mod=n["\u0275\u0275defineNgModule"]({type:X,imports:[x.CommonModule]}),X.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule]]});class H{execute(e){return e.actAsCancel?e.viewApi.cancel():s.EMPTY.pipe((0,d.tap)({complete(){e.viewApi.close()}}))}}H.\u0275fac=function(e){return new(e||H)},H.\u0275prov=n["\u0275\u0275defineInjectable"]({token:H,factory:H.\u0275fac,providedIn:"root"});class W{constructor(e,t){this.rxViewActionRegistryService=e,this.rxCloseViewActionService=t,this.rxViewActionRegistryService.register({name:"rxCloseViewAction",label:"Close view",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxCloseViewActionService,parameters:[{name:"viewApi",enableExpressionEvaluation:!0,defaultValue:"${view.api}"},{name:"actAsCancel",label:"Act as cancel",editor:c.SwitchFormControlComponent,type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean}]})}}W.\u0275fac=function(e){return new(e||W)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](H))},W.\u0275mod=n["\u0275\u0275defineNgModule"]({type:W}),W.\u0275inj=n["\u0275\u0275defineInjector"]({});class Y{constructor(e,t,i,n,o,r,a){this.rxLogService=e,this.rxModalService=t,this.translateService=i,this.rxNotificationService=n,this.rxRecordInstanceService=o,this.rxViewActionUtilsService=r,this.rxStringService=a}execute(e){if((0,m.isEmpty)(e.recordDefinitionName)&&e.records&&(0,m.isFunction)(e.records.getRecordDefinitionName)&&(e.recordDefinitionName=e.records.getRecordDefinitionName()),this.rxStringService.isNonEmptyString(e.recordDefinitionName)){let t=[];e.records&&(t=(0,m.isFunction)(e.records.getSelectedRows)?(0,m.castArray)(e.records.getSelectedRows()):(0,m.castArray)(e.records));const i=this.rxViewActionUtilsService.extractRecordIds(t);if(i.length){const t=1===i.length?"com.bmc.arsys.rx.client.view-actions.delete-record.confirmation-dialog.message":"com.bmc.arsys.rx.client.view-actions.delete-records.confirmation-dialog.message";return(0,s.from)(this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:b.RX_MODAL.modalStyles.warning,message:this.translateService.instant(t,{count:i.length})})).pipe((0,d.switchMap)(t=>{if(t){const t=i.map(t=>this.rxRecordInstanceService.delete(e.recordDefinitionName,t));return(0,s.forkJoin)(t).pipe((0,d.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-actions.delete-records.records-deleted.message"))}),(0,d.switchMapTo)((0,m.isFunction)(e.records.refresh)?e.records.refresh():s.EMPTY))}return(0,s.throwError)(null)}))}return this.rxLogService.debug("rxDeleteRecordsAction: no records to delete."),s.EMPTY}return(0,s.throwError)(new a.RxError("rxDeleteRecordsAction: Record Definition Name is not defined."))}}Y.\u0275fac=function(e){return new(e||Y)(n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](b.RxModalService),n["\u0275\u0275inject"](y.TranslateService),n["\u0275\u0275inject"](r.RxNotificationService),n["\u0275\u0275inject"](u.RxRecordInstanceService),n["\u0275\u0275inject"](o.RxViewActionUtilsService),n["\u0275\u0275inject"](a.RxStringService))},Y.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Y,factory:Y.\u0275fac,providedIn:"root"});class Q{constructor(e,t){this.rxViewActionRegistryService=e,this.rxDeleteRecordsViewActionService=t,this.rxViewActionRegistryService.register({name:"rxDeleteRecordsAction",label:"Delete records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxDeleteRecordsViewActionService,parameters:[{name:"records",label:"Records",enableExpressionEvaluation:!0,isRequired:!0,editor:c.ExpressionFormControlComponent,tooltip:new r.Tooltip("Build an expression that evaluates to one of the following:<br>\n            1) Record grid<br>\n            2) A collection of record instances or<br>\n            3) A collection of record instance IDs. <br>For options 2 and 3, select a record definition in the field below.")},{name:"recordDefinitionName",label:"Record definition",type:o.ViewComponentPropertyType.String,editor:c.RxDefinitionPickerComponent,editorOptions:{definitionType:c.RxDefinitionPickerType.StandardDataRecord},defaultValue:null}]})}}Q.\u0275fac=function(e){return new(e||Q)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](Y))},Q.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Q}),Q.\u0275inj=n["\u0275\u0275defineInjector"]({});class K{constructor(e,t,i,n){this.rxLogService=e,this.rxViewActionUtilsService=t,this.rxAssociationDefinitionService=i,this.rxAssociationInstanceService=n}execute(e){if(!e.associatedRecordId)return(0,s.throwError)(new a.RxError("rxDisassociateAction: Associated Record ID is not defined."));const t=this.rxViewActionUtilsService.extractRecordIds(e.disassociatedRecordIds);return this.rxLogService.debug(`RxDisassociateAction: disassociating ${t.length} record(s)`),t.length?this.rxAssociationDefinitionService.get(e.associationDefinitionName).pipe((0,d.switchMap)(()=>{let i,n=[];return e.associationDefinitionRole===h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value?(i=t,n=[e.associatedRecordId]):e.associationDefinitionRole===h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value&&(i=[e.associatedRecordId],n=t),this.rxAssociationInstanceService.disassociateRecords(e.associationDefinitionName,i,n).pipe((0,d.mapTo)(t))})):(0,s.of)([])}}K.\u0275fac=function(e){return new(e||K)(n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](o.RxViewActionUtilsService),n["\u0275\u0275inject"](h.RxAssociationDefinitionService),n["\u0275\u0275inject"](h.RxAssociationInstanceService))},K.\u0275prov=n["\u0275\u0275defineInjectable"]({token:K,factory:K.\u0275fac,providedIn:"root"});class J extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(r.RxDefinitionNameService),this.rxAssociationDefinitionService=this.injector.get(h.RxAssociationDefinitionService);const i=this.sandbox.actionProperties$.pipe((0,d.pluck)("recordDefinitionName"),(0,d.distinctUntilChanged)()),n=this.sandbox.actionProperties$.pipe((0,d.pluck)("associationDefinitionName"),(0,d.distinctUntilChanged)()),o=i.pipe((0,d.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,d.map)(t=>t[e].map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,s.of)([]))),a=n.pipe((0,d.switchMap)(e=>e?this.rxAssociationDefinitionService.get(e):(0,s.of)(null)),(0,d.shareReplay)(1)),l=a.pipe((0,d.map)(e=>!!e&&e.nodeAId===e.nodeBId)),c=a.pipe((0,d.map)(e=>e?[{id:h.RxAssociatedRecordNodeSide.NodeA,name:e.nodeAName||h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:h.RxAssociatedRecordNodeSide.NodeB,name:e.nodeBName||h.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]));i.pipe((0,d.skip)(1)).subscribe(()=>{this.sandbox.updateActionProperties({associationDefinitionName:null,associationDefinitionRole:null})}),a.pipe((0,d.skip)(1),(0,d.withLatestFrom)(l,i)).subscribe(([e,t,i])=>{if(e&&!t){const t=i===e.nodeAId?h.RxAssociatedRecordNodeSide.NodeA:h.RxAssociatedRecordNodeSide.NodeB;this.sandbox.updateActionProperties({associationDefinitionRole:t})}else this.sandbox.updateActionProperties({associationDefinitionRole:null})}),(0,s.combineLatest)([i,o,c]).pipe((0,d.withLatestFrom)(l)).subscribe(([[e,t,i],n])=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e,t,i,n))})}static getInitialProperties(e){return Object.assign({recordDefinitionName:null,associationDefinitionName:null,associationDefinitionRole:null,associatedRecordId:null,disassociatedRecordIds:null},e)}getActionEditorConfig(e,t,i,n){return[{name:"recordDefinitionName",component:c.RxDefinitionPickerComponent,options:{label:"Record definition to disassociate",definitionType:c.RxDefinitionPickerType.StandardDataRecord,required:!0}},...e?[{name:"associationDefinitionName",component:c.SelectFormControlComponent,options:{label:"Association to use",options:t,required:!0}},{name:"associationDefinitionRole",component:c.SelectFormControlComponent,isDisabled:!n,options:{label:"Associated record node side",required:!0,options:i}},{name:"associatedRecordId",component:c.ExpressionFormControlComponent,options:{label:"Associated record ID",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}},{name:"disassociatedRecordIds",component:c.ExpressionFormControlComponent,options:{label:"Records to disassociate",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:!0}}]:[]]}}class Z{constructor(e,t){this.rxViewActionRegistryService=e,this.rxDisassociateViewActionService=t,this.rxViewActionRegistryService.register({name:"rxDisassociateAction",label:"Disassociate records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxDisassociateViewActionService,designModel:J,parameters:[{name:"recordDefinitionName",label:"Record definition to disassociate",isRequired:!0,type:o.ViewComponentPropertyType.String},{name:"associationDefinitionName",label:"Association to use",isRequired:!0},{name:"associationDefinitionRole",label:"Associated record node side",isRequired:!0},{name:"associatedRecordId",label:"Associated record ID",enableExpressionEvaluation:!0,isRequired:!0},{name:"disassociatedRecordIds",label:"Records to disassociate",enableExpressionEvaluation:!0,isRequired:!0}]})}}Z.\u0275fac=function(e){return new(e||Z)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](K))},Z.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Z}),Z.\u0275inj=n["\u0275\u0275defineInjector"]({});class ee{constructor(e){this.activeModelRef=e,this.data=this.activeModelRef.getData()}close(){this.activeModelRef.close()}hasActionResultDetails(e){return["warningCount","errorCount","infoCount","successCount"].some(t=>e.summary[t])}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275directiveInject"](g.ActiveModalRef))},ee.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ee,selectors:[["rx-edit-records-result-modal"]],decls:18,vars:19,consts:[[1,"modal-body"],[1,"mb-2"],[1,"mr-1","text-success-icon",3,"name"],[1,"mr-1","text-warning-icon",3,"name"],[1,"mr-1","text-danger-icon",3,"name"],["class","mt-2",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"mt-2"],["readonly","","rows","15",1,"resize-none",3,"label","ngModel"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275element"](2,"adapt-icon",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",1),n["\u0275\u0275element"](6,"adapt-icon",3),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div"),n["\u0275\u0275element"](10,"adapt-icon",4),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](13,I,3,4,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",6),n["\u0275\u0275elementStart"](15,"button",7),n["\u0275\u0275listener"]("click",function(){return t.close()}),n["\u0275\u0275text"](16),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","check_circle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](4,11,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.updated-successfully.label"),": ",t.data.summary.successCount," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("name","exclamation_circle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](8,13,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.updated-with-warnings.label"),": ",t.data.summary.warningCount," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("name","exclamation_triangle"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",n["\u0275\u0275pipeBind1"](12,15,"com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.update-failures.label"),": ",t.data.summary.errorCount," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.hasActionResultDetails(t.data)&&t.data.details),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](17,17,"com.bmc.arsys.rx.client.common.close.label")," "))},directives:[g.AdaptIconComponent,x.NgIf,g.AdaptRxTextareaComponent,C.NgControlStatus,C.NgModel],pipes:[y.TranslatePipe],styles:["[_nghost-%COMP%]     .resize-none{resize:none}"]});class te{constructor(e,t,i){this.adaptModalService=e,this.translateService=t,this.rxCommandFactoryService=i,this.resourceType="com.bmc.arsys.rx.application.record.command.UpdateRecordInstancesCommand",this.editRecordsCommand=this.rxCommandFactoryService.forResourceType(this.resourceType)}editRecords(e){return this.editRecordsCommand.execute(e)}showActionResults(e){return this.adaptModalService.open({size:"sm",title:this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.title"),data:e,content:ee}).catch(m.noop)}runAction(e,t){const i=this.prepareRecordData(e,t),n=new FormData;return n.append("commandInstance",JSON.stringify(i.commandInstance)),(0,m.forEach)(i.attachments,e=>{n.append(e.key,e.file)}),Object.keys(i||{}).map(e=>{"commandInstance"!==e&&"attachments"!==e&&n.append(e,JSON.stringify(i[e]))}),this.editRecords(n).pipe((0,d.map)(e=>this.prepareActionResults(e,i)),(0,d.switchMap)(e=>(0,s.from)(Promise.resolve(this.showActionResults(e)))))}cleanUnchangedFields(e){return(0,m.forIn)(e.fieldInstances,(t,i)=>{(0,m.isNull)(t.value)&&delete e.fieldInstances[i]})}prepareFiles(e,t){return(0,m.values)(e).filter(e=>(0,m.has)(e,"file")).map(e=>({key:t?t+"/"+e.id:e.id,file:e.file}))}cleanFiles(e){return Object.keys(e).map((t,i)=>{e[t].hasOwnProperty("file")?delete e[t]:delete e[t].file}),e}prepareAssociationInstancesForSaving(e){return(0,m.transform)(e,(e,t,i)=>{(0,m.forEach)(t,(t,n)=>{(0,m.isEmpty)(t.pending)||e.push({associationDefinitionName:i,recordInstanceIds:(0,m.map)(t.pending,"id"),nodeSide:n,resourceType:u.RX_RECORD_INSTANCE.association.operationResourceTypes.associate})})},[])}prepareRecordData(e,t){const i=(0,m.pick)(t,["resourceType","recordDefinitionName","fieldInstances"]);i.fieldInstances=this.cleanUnchangedFields(i);const n=this.prepareFiles(i.fieldInstances);i.fieldInstances=this.cleanFiles(i.fieldInstances);const o=this.prepareAssociationInstancesForSaving(t.associationInstances),r={shouldOverrideOptimisticLock:!1,commandInstance:{resourceType:"com.bmc.arsys.rx.application.record.command.UpdateRecordInstancesCommand"},recordInstanceIds:e,recordInstance:i,attachments:n};return(0,m.isEmpty)(o)||(r.associationOperations=o.map(e=>Object.assign(Object.assign({},e),{nodeSide:e.nodeSide.split(":")[0]}))),r}prepareActionResults(e,t){const i=t.recordInstanceIds.length,n=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.action-results-dialog.details.record-instance-id.label"),o={successCount:0,errorCount:0,warningCount:0,infoCount:0};let a;return(0,m.isEmpty)(e)?a="":(o.errorCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.error])).length,o.warningCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.warning])).length,o.infoCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.info])).length,o.successCount=(0,m.filter)(e,e=>(0,m.some)(e,["messageType",r.RX_ERROR_HANDLING.messageTypes.success])).length,a=(0,m.map)(e,(e,t)=>n+": "+t+"\n"+(0,m.values)(e).map(this.convertMessageToString).join(", ")).join("\n\n")),o.successCount=i-o.errorCount-o.warningCount,{summary:o,details:a}}convertMessageToString(e){return`${e.messageType}: ${(0,m.values)([e.messageText,e.appendedText]).join(" ")}`}}te.\u0275fac=function(e){return new(e||te)(n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](y.TranslateService),n["\u0275\u0275inject"](r.RxCommandFactoryService))},te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:te,factory:te.\u0275fac,providedIn:"root"});class ie{constructor(e,t,i,n,o){this.rxGuidService=e,this.rxDefaultRecordEditorInputType=t,this.rxFieldDefinitionService=i,this.translateService=n,this.rxSystemConfigurationService=o}getViewDefinition(e,t){const i=this.rxGuidService.generate(),n=this.rxGuidService.generate(),r=this.rxGuidService.generate(),a=this.rxGuidService.generate(),s=this.rxGuidService.generate(),l=this.getComponentDefinitions(t,r);return{guid:s,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[r]}]},{name:"footer",height:60,columns:[{children:[n]}]}]}),outputParams:[{name:"recordInstance",source:"${view.components."+r+".recordInstance}"}],inputParams:[],componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:r,type:o.RxViewComponentType.RecordEditor,propertiesByName:{recordInstanceId:"null",mode:p.RecordEditorMode.BulkEdit,recordDefinitionName:e,styles:"p-0 border-0"},componentDefinitions:l,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:l.map(e=>e.guid)}]}]})},{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:n,type:o.RxViewComponentType.ButtonBar,propertiesByName:{alignment:"right",hidden:"0"},layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[a,i]}]}]}),componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:i,type:o.RxViewComponentType.ActionButton,propertiesByName:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.cancel.label"),style:"secondary",size:"default"},componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxCloseViewAction",actAsCancel:"true"}}]},{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:a,type:o.RxViewComponentType.ActionButton,propertiesByName:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),style:"primary",disabled:"NOT${view.components."+r+".canSave}",size:"default"},componentDefinitions:[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Action,propertiesByName:{viewApi:"${view.api}",name:"rxCloseViewAction",actAsCancel:"false"}}]}]}]}}getComponentDefinitions(e,t){this.rxSystemConfigurationService.getConfigurationSync("Submitter-Mode")===r.RX_ADMINISTRATION.submitterModes.locked&&(e=e.filter(e=>Number(e.fieldId)!==u.RX_RECORD_DEFINITION.coreFieldIds.createdBy));const i=this.getFieldContainerComponentDefinitions(e,t);return[{resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Container,propertiesByName:{rowWrap:p.ContainerRowWrap.Sm,columnCount:"1"},componentDefinitions:i,layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:i.map(e=>e.guid)}]}]})}]}getFieldContainerComponentDefinitions(e,t){return e.filter(e=>!this.rxFieldDefinitionService.isSystemField(e.fieldDefinition)).map(e=>{let i,n;const r=Boolean(e.associationDescriptor);r?(i=o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,n=o.RxViewComponentType.Association):(i=o.RX_VIEW_DEFINITION.resourceTypes.viewComponent,n=this.rxDefaultRecordEditorInputType.getFieldTypeByFieldDefinition(e.fieldDefinition));const a={resourceType:i,guid:this.rxGuidService.generate(),type:n,propertiesByName:{fieldId:e.fieldDefinition.id,recordDefinition:"${view.components."+t+".recordDefinition}",recordInstance:"${view.components."+t+".recordInstance}",label:e.title,fieldOption:u.RX_RECORD_DEFINITION.fieldOptions.optional}};return r&&(a.componentDefinitions=[],(0,m.assign)(a.propertiesByName,{associatedRecordNodeSide:e.associationDescriptor.nodeSide,editingMode:p.RxAssociationEditingMode.Dropdown,associationDefinitionName:e.associationDescriptor.associationDefinition.name,recordDefinitionName:e.associationDescriptor.recordDefinitionName})),a}).reduce((e,t,i,n)=>(i%2==0&&e.push({resourceType:o.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,guid:this.rxGuidService.generate(),type:o.RxViewComponentType.Container,propertiesByName:{rowWrap:p.ContainerRowWrap.Sm,columnCount:"2"},componentDefinitions:n.slice(i,i+2),layout:JSON.stringify({outlets:[{name:o.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:[t.guid],span:"6"},{children:n.length>i+1?[n[i+1].guid]:[],span:"6"}]}]})}),e),[])}}ie.\u0275fac=function(e){return new(e||ie)(n["\u0275\u0275inject"](a.RxGuidService),n["\u0275\u0275inject"](p.RxDefaultRecordEditorInputType),n["\u0275\u0275inject"](u.RxFieldDefinitionService),n["\u0275\u0275inject"](y.TranslateService),n["\u0275\u0275inject"](r.RxSystemConfigurationService))},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac,providedIn:"root"});class ne{constructor(e,t,i,n,o,r,a,s){this.rxEditRecordsViewBuilder=e,this.rxEditRecordsDataService=t,this.rxLogService=i,this.rxRecordGridUtilsService=n,this.translateService=o,this.rxDefinitionNameService=r,this.openViewAction=a,this.rxViewActionUtilsService=s}execute(e){let{recordDefinitionName:t}=e;if((0,m.isNil)(e.records))return(0,s.throwError)(new a.RxError("rxEditRecordsAction: no records to edit."));if((0,m.isEmpty)(t)&&(0,m.isFunction)(e.records.getRecordDefinitionName)&&(t=e.records.getRecordDefinitionName()),t){const i=this.rxViewActionUtilsService.extractRecordIds(e.records);if(i.length)return(0,s.from)(this.rxRecordGridUtilsService.getColumnDescriptors(t,e.records)).pipe((0,d.switchMap)(n=>{const o=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.view.title",{recordDefinitionName:this.rxDefinitionNameService.getDisplayName(t)}),r=this.translateService.instant("com.bmc.arsys.rx.client.view-actions.edit-records.view.notification");return this.openViewAction.execute({presentation:{modalSize:O.modalSize.Large,title:o,notification:r,type:O.type.DockedRightModal},viewDefinitionName:this.rxEditRecordsViewBuilder.getViewDefinition(t,n),viewParams:null}).pipe((0,d.switchMap)(t=>t&&t.recordInstance?this.rxEditRecordsDataService.runAction(i,t.recordInstance).pipe((0,d.switchMap)(()=>(0,m.isFunction)(e.records.refresh)?e.records.refresh():s.EMPTY)):s.EMPTY))}));this.rxLogService.debug("rxEditRecordsAction: no records to edit.")}else this.rxLogService.error("rxEditRecordsAction: Record Definition Name is not defined.");return s.EMPTY}}ne.\u0275fac=function(e){return new(e||ne)(n["\u0275\u0275inject"](ie),n["\u0275\u0275inject"](te),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](p.RxRecordGridUtilsService),n["\u0275\u0275inject"](y.TranslateService),n["\u0275\u0275inject"](r.RxDefinitionNameService),n["\u0275\u0275inject"](k),n["\u0275\u0275inject"](o.RxViewActionUtilsService))},ne.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ne,factory:ne.\u0275fac,providedIn:"root"});class oe{constructor(e,t){this.rxViewActionRegistryService=e,this.rxEditRecordsActionService=t,this.rxViewActionRegistryService.register({name:"rxEditRecordsAction",label:"Edit records",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxEditRecordsActionService,parameters:[{name:"records",label:"Records",isRequired:!0,tooltip:new r.Tooltip("Build an expression that evaluates to one of the following:<br>\n            1) Record Grid;<br>\n            2) A collection of Record Instances, or<br>\n            3) A collection of Record Instance IDs. <br>For options 2 and 3, select a Record Definition in the field below."),enableExpressionEvaluation:!0,editor:c.ExpressionFormControlComponent},{name:"recordDefinitionName",label:"Record definition",type:o.ViewComponentPropertyType.String,editor:c.RxDefinitionPickerComponent,editorOptions:{definitionType:c.RxDefinitionPickerType.StandardDataRecord},defaultValue:null}]})}}oe.\u0275fac=function(e){return new(e||oe)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ne))},oe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oe,declarations:[ee],imports:[x.CommonModule,g.AdaptIconModule,y.TranslateModule,C.FormsModule,g.AdaptRxTextareaModule]}),oe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,g.AdaptIconModule,y.TranslateModule,C.FormsModule,g.AdaptRxTextareaModule]]});class re{constructor(e,t,i){this.rxProcessDefinitionService=e,this.rxViewActionRegistryService=t,this.rxViewExpressionValidatorService=i}validate(e,t){return e.processDefinitionName?this.rxProcessDefinitionService.get(e.processDefinitionName).pipe((0,d.switchMap)(i=>(0,s.combineLatest)([this.validateInputParams(e,t,i.inputParams),this.validateInputParamExpressions(e,t,i.inputParams)])),(0,d.map)(m.flatten)):(0,s.of)([])}validateInputParamExpressions(e,t,i){const n=this.rxViewActionRegistryService.get(e.name),o=i.filter(t=>e[`actionProcessInputParams.${t.name}`]).map(i=>this.rxViewExpressionValidatorService.validate(e[`actionProcessInputParams.${i.name}`],t,n.label).pipe((0,d.map)(e=>e.map(e=>Object.assign(Object.assign({},e),{description:`${n.label} action: ${e.description}`})))));return(0,s.combineLatest)(o).pipe((0,d.defaultIfEmpty)([]),(0,d.map)(m.flatten))}validateInputParams(e,t,i){const n=this.rxViewActionRegistryService.get(e.name),o=[];return(0,m.forEach)(i,i=>{const r=`actionProcessInputParams.${i.name}`;"REQUIRED"===i.fieldOption&&(0,m.isEmpty)(e[r])&&o.push({type:"error",description:`${n.label}: ${i.name} cannot be blank.`,propertyName:t})}),(0,s.of)(o)}}re.\u0275fac=function(e){return new(e||re)(n["\u0275\u0275inject"](S.RxProcessDefinitionService),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](l.RxViewExpressionValidatorService))},re.\u0275prov=n["\u0275\u0275defineInjectable"]({token:re,factory:re.\u0275fac});class ae extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxProcessDefinitionCacheService=this.injector.get(S.RxProcessDefinitionCacheService),this.rxRecordDefinitionCacheService=this.injector.get(u.RxRecordDefinitionCacheService),this.defaultProps={processDefinitionName:null,waitForProcessCompletion:!1};const i=this.sandbox.actionProperties$.pipe((0,d.pluck)("processDefinitionName"),(0,d.distinctUntilChanged)());i.pipe((0,d.skip)(1)).subscribe(e=>{this.sandbox.setActionProperties({processDefinitionName:e,waitForProcessCompletion:!1})}),i.pipe((0,d.switchMap)(e=>e?this.rxProcessDefinitionCacheService.getProcessDefinition(e):(0,s.of)(null))).subscribe(e=>this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e))),this.sandbox.actionProperties$.pipe((0,d.map)(e=>[e.processDefinitionName,e.waitForProcessCompletion]),(0,d.distinctUntilChanged)(m.isEqual),(0,d.switchMap)(([e,t])=>this.getActionOutputDataDictionary(e,t))).subscribe(e=>this.sandbox.setActionOutputDataDictionary(e))}static getInitialProperties(e){return Object.assign({processDefinitionName:null,waitForProcessCompletion:!1},e)}getActionEditorConfig(e){return[{name:"processDefinitionName",component:c.RxDefinitionPickerComponent,options:{label:"Process to start",definitionType:c.RxDefinitionPickerType.Process,required:!0}},{name:"waitForProcessCompletion",component:c.SwitchFormControlComponent,isDisabled:!e||!e.synchronous,options:{label:"Wait for process completion",tooltip:new r.Tooltip("If a process runs synchronously, it is possible to get output data from the process once the process completes. Enable Wait for completion in order to define an output map for the selected process.")}},...e?(0,m.map)(e.inputParams,e=>({name:`actionProcessInputParams.${e.name}`,component:c.ExpressionFormControlComponent,options:{label:e.name,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators(),isRequired:"REQUIRED"===e.fieldOption}})):[]]}getActionOutputDataDictionary(e,t){return t?this.rxProcessDefinitionCacheService.getOutputParams(e).pipe((0,d.switchMap)(e=>(0,s.forkJoin)(e.map(e=>{let t;if(e.fieldTypeName===S.RX_PROCESS_DEFINITION.processVariableTypes.record){const i=e;t=this.rxRecordDefinitionCacheService.getRecordDefinition(i.recordDefinitionName).pipe((0,d.map)(e=>({label:i.name,expression:this.getOutputExpressionForPropertyPath(i.name),children:(0,m.map)(e.fieldDefinitions,e=>({label:e.name,expression:this.getOutputExpressionForPropertyPath(`${i.name}.${e.id}`)}))})))}else t=(0,s.of)({label:e.name,expression:this.getOutputExpressionForPropertyPath(e.name)});return t})))):(0,s.of)([])}}class se{constructor(e,t,i,n,o,r,a){this.rxJsonParserService=e,this.rxLogService=t,this.rxProcessDefinitionCacheService=i,this.rxRecordDefinitionCacheService=n,this.rxProcessInstanceCommandsService=o,this.rxProcessInstanceService=r,this.rxRecordInstanceService=a}execute(e){let t,i;return this.rxProcessInstanceCommandsService.start(e.processDefinitionName,e.actionProcessInputParams).pipe((0,d.switchMap)(i=>{if(e.waitForProcessCompletion){const n=i.headers.get("location");return t=n?(0,m.last)(n.split("/")):null,this.rxProcessDefinitionCacheService.getOutputParams(e.processDefinitionName)}return(0,s.of)(null)}),(0,d.switchMap)(n=>(0,m.isEmpty)(n)?(0,s.of)(null):(i=n.reduce((e,t)=>(e[t.name]=t,e),{}),this.rxProcessInstanceService.get(e.processDefinitionName,`${t}/processOutputVariables`))),(0,d.switchMap)(e=>{const t={};return(0,m.forEach)(e,(e,n)=>{if(i[n].fieldTypeName===S.RX_PROCESS_DEFINITION.processVariableTypes.record){const i=this.rxJsonParserService.tryParseJson(e);i&&i.recordDefinitionName&&i.id?t[n]=this.rxRecordInstanceService.get(i.recordDefinitionName,i.id).pipe((0,d.map)(e=>(0,m.reduce)(e.fieldInstances,(e,t)=>(e[t.id]=t.value,e),{}))):this.rxLogService.warning("rxLaunchProcessAction: unknown format for record instance as output data for process")}else t[n]=(0,s.of)(e)}),(0,s.forkJoin)(t)}))}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275inject"](a.RxJsonParserService),n["\u0275\u0275inject"](r.RxLogService),n["\u0275\u0275inject"](S.RxProcessDefinitionCacheService),n["\u0275\u0275inject"](u.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](S.RxProcessInstanceCommandsService),n["\u0275\u0275inject"](S.RxProcessInstanceService),n["\u0275\u0275inject"](u.RxRecordInstanceService))},se.\u0275prov=n["\u0275\u0275defineInjectable"]({token:se,factory:se.\u0275fac,providedIn:"root"});class le{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxLaunchProcessViewActionService=t,this.rxLaunchProcessViewActionDesignManagerService=i,this.rxViewActionRegistryService.register({name:"rxLaunchProcessAction",label:"Launch process",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchProcessViewActionService,designManager:this.rxLaunchProcessViewActionDesignManagerService,designModel:ae,parameters:[{name:"processDefinitionName",label:"Process to start",type:o.ViewComponentPropertyType.String,isRequired:!0},{name:"waitForProcessCompletion",type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean},{name:"actionProcessInputParams",label:"Input map",enableExpressionEvaluation:!0}]})}}le.\u0275fac=function(e){return new(e||le)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](se),n["\u0275\u0275inject"](re))},le.\u0275mod=n["\u0275\u0275defineNgModule"]({type:le}),le.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[re]});class ce{execute(e){return e.url?(window.open(e.url,o.RX_LAUNCH_BEHAVIOR[e.launchBehavior].target),s.EMPTY):(0,s.throwError)(new a.RxError("rxLaunchUrlAction: URL is not specified."))}}ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ce,factory:ce.\u0275fac,providedIn:"root"});class de extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())}static getInitialProperties(e){return Object.assign({url:null,launchBehavior:o.RX_LAUNCH_BEHAVIOR.newWindow.value},e)}getActionEditorConfig(){return[{name:"url",component:c.ExpressionFormControlComponent,options:{label:"URL",isRequired:!0,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"launchBehavior",component:c.SelectFormControlComponent,options:{label:"Launch behavior",options:(0,m.map)(o.RX_LAUNCH_BEHAVIOR,e=>({name:e.content,id:e.value})),sortAlphabetically:!1}}]}}class pe{adaptDefinition(e){var t;const i=(0,m.get)(e,"propertiesByName",{});i.launchBehavior=null!==(t=i.launchBehavior)&&void 0!==t?t:o.RX_LAUNCH_BEHAVIOR.newWindow.value}}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:pe,factory:pe.\u0275fac,providedIn:"root"});class ue{constructor(e,t,i,n){this.rxViewActionDefinitionAdapterRegistryService=e,this.rxViewActionRegistryService=t,this.rxLaunchUrlViewActionService=i,this.rxLaunchUrlActionDefinitionAdapterService=n,this.rxViewActionRegistryService.register({name:"rxLaunchUrlAction",label:"Launch URL",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchUrlViewActionService,designModel:de,parameters:[{name:"url",label:"URL",enableExpressionEvaluation:!0,isRequired:!0},{name:"launchBehavior",label:"Launch behavior"}]}),e.registerRuntimeAdapter("rxLaunchUrlAction",this.rxLaunchUrlActionDefinitionAdapterService)}}ue.\u0275fac=function(e){return new(e||ue)(n["\u0275\u0275inject"](o.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ce),n["\u0275\u0275inject"](pe))},ue.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ue}),ue.\u0275inj=n["\u0275\u0275defineInjector"]({});class me{execute(e){return e.component?(0,m.isFunction)(e.component.refresh)?e.component.refresh():(0,s.throwError)(new a.RxError("rxRefreshAction: target component does not support refresh API.")):(0,s.throwError)(new a.RxError("rxRefreshAction: component is not specified."))}}me.\u0275fac=function(e){return new(e||me)},me.\u0275prov=n["\u0275\u0275defineInjectable"]({token:me,factory:me.\u0275fac,providedIn:"root"});class he{constructor(e,t){this.rxViewActionRegistryService=e,this.rxRefreshViewActionService=t,this.rxViewActionRegistryService.register({name:"rxRefreshAction",label:"Refresh",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxRefreshViewActionService,parameters:[{name:"component",label:"View/Component",enableExpressionEvaluation:!0,isRequired:!0,editor:c.ExpressionFormControlComponent}]})}}he.\u0275fac=function(e){return new(e||he)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](me))},he.\u0275mod=n["\u0275\u0275defineNgModule"]({type:he}),he.\u0275inj=n["\u0275\u0275defineInjector"]({});class fe{execute(e){if((0,m.isFunction)(e.targetApi.save)){const t=(0,m.isFunction)(e.viewApi.close)?s.EMPTY.pipe((0,d.tap)({complete(){e.viewApi.close()}})):(0,s.throwError)(new a.RxError("rxSaveAction: target view does not support close API."));return(0,s.concat)(e.targetApi.save(e.closeAfterSave),e.closeAfterSave?t:s.EMPTY)}return(0,s.throwError)(new a.RxError("rxSaveAction: target view/component does not support save API."))}}fe.\u0275fac=function(e){return new(e||fe)},fe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:fe,factory:fe.\u0275fac,providedIn:"root"});class ge{constructor(e,t){this.rxViewActionRegistryService=e,this.rxSaveViewActionService=t,this.rxViewActionRegistryService.register({name:"rxSaveAction",label:"Save",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxSaveViewActionService,parameters:[{name:"targetApi",label:"View/Component",editor:c.ExpressionFormControlComponent,isRequired:!0,enableExpressionEvaluation:!0},{name:"closeAfterSave",label:"Close after save",editor:c.SwitchFormControlComponent,type:o.ViewComponentPropertyType.Boolean,designType:o.ViewComponentPropertyType.Boolean},{name:"viewApi",enableExpressionEvaluation:!0,defaultValue:"${view.api}"}]})}}ge.\u0275fac=function(e){return new(e||ge)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](fe))},ge.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ge}),ge.\u0275inj=n["\u0275\u0275defineInjector"]({});class ve{execute(e){let t=(0,s.throwError)(new a.RxError("rxSetPropertyAction: component is not specified."));if(e.componentApi&&(0,m.isFunction)(e.componentApi.setProperty)&&e.propertyPath){const i=e.propertyPath.match(/^\$\{view\.components\.[0-9a-z-]+\.(.+)}$/);i&&i[1]&&(t=e.componentApi.setProperty(i[1],e.propertyValue))}return(0,s.isObservable)(t)?t:s.EMPTY}}ve.\u0275fac=function(e){return new(e||ve)},ve.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ve,factory:ve.\u0275fac});class xe extends l.RxViewActionExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.configureForProperty({propertyPath:"propertyPath",dataDictionary$:e.get(l.RxViewDataDictionaryService).settablePropertiesDataDictionary$,operators:this.getOperatorRowsByGroup(r.ExpressionOperatorGroup.MathClient)})}}class ye extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.expressionConfigurator=new xe(this.injector,this.sandbox.descriptor.name,this.guid),this.sandbox.actionProperties$.pipe((0,d.take)(1)).subscribe(()=>this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())),this.sandbox.actionProperties$.pipe((0,d.pluck)("propertyPath"),(0,d.distinctUntilChanged)()).subscribe(e=>{let t=null;if(e&&e.length){const i=e.match(/\${view\.components\.([0-9a-z-]+)\..+}/);i&&i[1]&&(t=`\${view.components.${i[1]}.api}`)}this.sandbox.updateActionProperties({componentApi:t})})}static getInitialProperties(e){return Object.assign({componentApi:null,propertyPath:null,propertyValue:null},e)}getActionEditorConfig(){return[{name:"propertyPath",component:c.ExpressionFormControlComponent,options:{label:"Property path",dataDictionary$:this.expressionConfigurator.getDataDictionary("propertyPath"),operators:this.expressionConfigurator.getOperators("propertyPath"),isRequired:!0}},{name:"propertyValue",component:c.ExpressionFormControlComponent,options:{label:"Property value",dataDictionary$:this.expressionConfigurator.getDataDictionary("propertyValue"),operators:this.expressionConfigurator.getOperators("propertyValue")}}]}}class be{validate(e,t){return(0,s.of)(e.propertyPath&&!/\${view\.components\.([0-9a-z-]+)\..+}/.test(e.propertyPath)?[{type:"error",description:"Set property action: Property path is invalid.",propertyName:t}]:[])}}be.\u0275fac=function(e){return new(e||be)},be.\u0275prov=n["\u0275\u0275defineInjectable"]({token:be,factory:be.\u0275fac});class Ce{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxSetPropertyViewActionService=t,this.rxSetPropertyViewActionDesignManagerService=i,this.rxViewActionRegistryService.register({name:"rxSetPropertyAction",label:"Set property",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxSetPropertyViewActionService,designModel:ye,designManager:i,parameters:[{name:"componentApi",label:"Component API",enableExpressionEvaluation:!0},{name:"propertyPath",label:"Property path",isRequired:!0},{name:"propertyValue",enableExpressionEvaluation:!0}]})}}Ce.\u0275fac=function(e){return new(e||Ce)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ve),n["\u0275\u0275inject"](be))},Ce.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ce}),Ce.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ve,be]});class Se{constructor(e,t,i,n,o,r,a){this.rxApplicationLoaderService=e,this.rxBundleCacheService=t,this.rxJsonParserService=i,this.rxProcessDefinitionCacheService=n,this.domSanitizer=o,this.activeModalRef=r,this.rxUtilityModalsService=a,this.isProcessDesignerLoadingInProgress=!0,this.isDefinitionDirty=!1,this.context=r;const s=this.context.getData();localStorage.setItem("ProcessDesignerPaletteElements",s.paletteElements),this.iframeSrc=this.domSanitizer.bypassSecurityTrustResourceUrl(`/com.bmc.arsys.rx.innovationstudio/index.html#/app/bundle/${this.rxBundleCacheService.bundleId}/iprocess/${s.processDefinitionName?s.processDefinitionName:""}`)}onMessage(e){if(e.data){const t=this.rxJsonParserService.tryParseJson(e.data);if(t)switch(t.messageType){case r.RX_DESIGNER.messageTypes.designerLoaded:this.isProcessDesignerLoadingInProgress=!1;break;case r.RX_DESIGNER.messageTypes.afterSave:this.isDefinitionDirty=!1;break;case r.RX_DESIGNER.messageTypes.definitionStatusChanged:this.isDefinitionDirty=t.payload.isDirty;break;case r.RX_DESIGNER.messageTypes.closeDesigner:t.payload.processDefinitionName?this.isDefinitionDirty?this.rxUtilityModalsService.confirmUnsavedChanges().then(e=>{e&&this.closeProcessDesigner(t.payload.processDefinitionName)}):this.closeProcessDesigner(t.payload.processDefinitionName):this.isDefinitionDirty?this.rxUtilityModalsService.confirmUnsavedChanges().then(e=>{e&&this.context.dismiss(g.DismissReasons.CLOSE_BTN)}):this.context.dismiss(g.DismissReasons.CLOSE_BTN)}}}closeProcessDesigner(e){this.rxProcessDefinitionCacheService.clearCache([e]),this.context.close({processDefinitionName:e})}}Se.\u0275fac=function(e){return new(e||Se)(n["\u0275\u0275directiveInject"](r.RxApplicationLoaderService),n["\u0275\u0275directiveInject"](r.RxBundleCacheService),n["\u0275\u0275directiveInject"](a.RxJsonParserService),n["\u0275\u0275directiveInject"](S.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](w.DomSanitizer),n["\u0275\u0275directiveInject"](g.ActiveModalRef),n["\u0275\u0275directiveInject"](b.RxUtilityModalsService))},Se.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Se,selectors:[["rx-process-designer-frame"]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("message",function(e){return t.onMessage(e)},!1,n["\u0275\u0275resolveWindow"])},decls:2,vars:2,consts:[["id","rx-application-loader-container","class","position-absolute w-100",4,"ngIf"],[1,"h-100",3,"src"],["id","rx-application-loader-container",1,"position-absolute","w-100"],[1,"rx-application-loader"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,_,2,0,"div",0),n["\u0275\u0275element"](1,"iframe",1)),2&e&&(n["\u0275\u0275property"]("ngIf",t.isProcessDesignerLoadingInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("src",t.iframeSrc,n["\u0275\u0275sanitizeResourceUrl"]))},directives:[x.NgIf],styles:["[_nghost-%COMP%]{height:100vh}"]});class we{constructor(e,t){this.adaptModalService=e,this.rxProcessDefinitionCacheService=t}execute(e){return e.processDefinitionName?this.rxProcessDefinitionCacheService.getProcessDefinition(e.processDefinitionName).pipe((0,d.switchMap)(()=>this.openModal(e))):(0,s.defer)(()=>(0,s.from)(this.openModal(e)))}openModal(e){return this.adaptModalService.open({content:Se,size:o.OpenViewActionModalSize.FullSize,data:e})}}we.\u0275fac=function(e){return new(e||we)(n["\u0275\u0275inject"](g.AdaptModalService),n["\u0275\u0275inject"](S.RxProcessDefinitionCacheService))},we.\u0275prov=n["\u0275\u0275defineInjectable"]({token:we,factory:we.\u0275fac,providedIn:"root"});class Ie extends c.ValueAccessor{constructor(e,t,i,n,o){super(),this.rxDesignerStencilBuilder=e,this.rxJsonParserService=t,this.rxProcessElementsService=i,this.renderer=n,this.translateService=o,this.selection=[],this.destroyed$=new s.ReplaySubject(1)}ngOnInit(){const e=this.innerValue;this.selectedPaletteElements="*"===e?"*":this.rxJsonParserService.tryParseJson(e,null),this.rxDesignerStencilBuilder.buildElementsTree(this.rxProcessElementsService.getProcessElements(),S.RX_PROCESS_DEFINITION.standardProcessElementGroups).pipe((0,d.take)(1)).subscribe(e=>{(0,m.forEach)(e,e=>{var t;e.expanded=!0,e.allChildElementsSelected=!0,(null===(t=this.selectedPaletteElements)||void 0===t?void 0:t.length)&&((0,m.forEach)(e.children,t=>{"*"===this.selectedPaletteElements||(0,m.some)(this.selectedPaletteElements,e=>(0,m.isEqual)(e,t.value))?this.selection.push(t):e.allChildElementsSelected=!1}),e.allChildElementsSelected&&this.selection.push(e))}),this.processElementsTree=[{label:this.translateService.instant("com.bmc.arsys.rx.client.process-designer.all-elements.label"),expanded:!0,children:e}],this.stencilElements=(0,m.flatten)((0,m.map)(e,"children")),"*"===this.selectedPaletteElements&&(this.selection.push(...this.processElementsTree),this.selectedPaletteElements=(0,m.map)(this.stencilElements,"value")),this.updatePickerFakeInputValue()})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onSelectionChange(){this.selectedPaletteElements=this.selection.filter(e=>!e.children).map(e=>e.value),0===this.selectedPaletteElements.length?(this.selectedPaletteElements=null,this.value=null):this.stencilElements.length===this.selectedPaletteElements.length?this.value="*":this.value=JSON.stringify(this.selectedPaletteElements),this.updatePickerFakeInputValue()}updatePickerFakeInputValue(){(0,m.isEmpty)(this.selectedPaletteElements)?this.selectedPaletteElementsByLabel="":this.stencilElements.length===this.selectedPaletteElements.length?this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.common.all.label"):1===this.selectedPaletteElements.length?this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.process-designer.one-element-selected.label"):this.selectedPaletteElementsByLabel=this.translateService.instant("com.bmc.arsys.rx.client.process-designer.many-elements-selected.label",{count:this.selectedPaletteElements.length})}clearDefinition(e){e.stopPropagation(),this.selection=[],this.selectedPaletteElements=null,this.selectedPaletteElementsByLabel="",this.value=null}setDropdownWidth(){setTimeout(()=>{const e=this.renderer.selectRootElement(this.dropdownButton.nativeElement,!0);this.dropdownWidth=Math.max(e.clientWidth)+2})}}Ie.\u0275fac=function(e){return new(e||Ie)(n["\u0275\u0275directiveInject"](r.RxDesignerStencilBuilder),n["\u0275\u0275directiveInject"](a.RxJsonParserService),n["\u0275\u0275directiveInject"](S.RxProcessElementsService),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](y.TranslateService))},Ie.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ie,selectors:[["rx-process-designer-element-picker"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](D,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.dropdownButton=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:C.NG_VALUE_ACCESSOR,useExisting:Ie,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:8,consts:[[3,"label"],["adaptDropdown","","appendToBody","true","autoClose","outside","placement","bottom-left",1,"dropdown",3,"onOpen"],["adaptDropdownToggle","","rx-id","toggle-button","type","button",1,"btn","btn-secondary","d-flex","text-center","w-100"],["dropdownButton",""],[1,"rx-selected-item","text-left","flex-grow-1"],["rx-id","clear-button","class","d-icon-cross_adapt btn-link",3,"click",4,"ngIf"],["adaptDropdownMenu","",1,"dropdown-menu","px-3"],[3,"value","selectionMode","selection","selectionChange"],["rx-id","clear-button",1,"d-icon-cross_adapt","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-control-label",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275listener"]("onOpen",function(){return t.setDropdownWidth()}),n["\u0275\u0275elementStart"](2,"button",2,3),n["\u0275\u0275elementStart"](4,"span",4),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,R,1,0,"span",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",6),n["\u0275\u0275elementStart"](8,"adapt-tree",7),n["\u0275\u0275listener"]("selectionChange",function(e){return t.selection=e})("selectionChange",function(){return t.onSelectionChange()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("label",t.options.label),n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](t.selectedPaletteElementsByLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.value),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("width",t.dropdownWidth,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",t.processElementsTree)("selectionMode","checkbox")("selection",t.selection))},directives:[g.AdaptRxControlLabelComponent,g.AdaptDropdownDirective,g.AdaptDropdownToggleDirective,x.NgIf,g.AdaptDropdownMenuDirective,g.AdaptTreeComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-item[_ngcontent-%COMP%]{min-height:20px}span[rx-id=clear-button][_ngcontent-%COMP%]{cursor:pointer;margin-right:5px}span[rx-id=clear-button][_ngcontent-%COMP%]:not(:hover){color:#313538}.dropdown-menu[_ngcontent-%COMP%]{height:400px}']});class _e{}_e.\u0275fac=function(e){return new(e||_e)},_e.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_e,declarations:[Ie],imports:[x.CommonModule,C.FormsModule,g.AdaptRxCheckboxModule,g.AdaptDropdownModule,g.AdaptRxLabelModule,g.AdaptTreeModule],exports:[Ie]}),_e.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[x.CommonModule,C.FormsModule,g.AdaptRxCheckboxModule,g.AdaptDropdownModule.forRoot(),g.AdaptRxLabelModule,g.AdaptTreeModule]]});class De extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.sandbox=t,this.translateService=this.injector.get(y.TranslateService),this.sandbox.actionProperties$.pipe((0,d.take)(1)).subscribe(()=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig()),this.sandbox.setActionOutputDataDictionary([{label:this.translateService.instant("com.bmc.arsys.rx.client.common.process-definition-name.label"),expression:this.getOutputExpressionForPropertyPath("processDefinitionName")}])})}static getInitialProperties(e){return Object.assign({processDefinitionName:null,paletteElements:null},e)}getActionEditorConfig(){return[{name:"processDefinitionName",component:c.DefinitionPickerOrExpressionFormControlComponent,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.common.process-definition-name.label"),definitionType:c.RxDefinitionPickerType.Process,dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}},{name:"paletteElements",component:Ie,options:{label:"Available palette elements"}}]}}class Re{constructor(e){this.rxDefaultExpressionEvaluatorService=e}evaluate(e,t){let i=e;return u.RX_RECORD_DEFINITION.validFullDefinitionName.test(e)||(i=this.rxDefaultExpressionEvaluatorService.evaluate(e,t)),i}parseExpression(e){let t;return u.RX_RECORD_DEFINITION.validFullDefinitionName.test(e)||(t=this.rxDefaultExpressionEvaluatorService.parseExpression(e)),t}}Re.\u0275fac=function(e){return new(e||Re)(n["\u0275\u0275inject"](o.RxDefaultExpressionEvaluatorService))},Re.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Re,factory:Re.\u0275fac});class Ae{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxLaunchProcessDesignerActionService=t,this.rxLaunchProcessDesignerExpressionActionEvaluatorService=i,this.rxViewActionRegistryService.register({name:"rxLaunchProcessDesignerAction",label:"Launch process designer",bundleId:r.RX_APPLICATION.platformBundleId,service:this.rxLaunchProcessDesignerActionService,designModel:De,parameters:[{name:"processDefinitionName",label:"Process definition name",type:o.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxLaunchProcessDesignerExpressionActionEvaluatorService},{name:"paletteElements",label:"Available palette elements",type:o.ViewComponentPropertyType.String}]})}}Ae.\u0275fac=function(e){return new(e||Ae)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](we),n["\u0275\u0275inject"](Re))},Ae.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ae,declarations:[Se],imports:[x.CommonModule,S.RxProcessApiModule,c.RxIframeModule]}),Ae.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Re],imports:[[x.CommonModule,S.RxProcessApiModule,c.RxIframeModule]]});class Te{execute(){return s.EMPTY}}Te.\u0275fac=function(e){return new(e||Te)},Te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Te,factory:Te.\u0275fac});class Fe{validate(e,t){return(0,s.of)([{type:"error",description:`Unknown action: ${e.name}`,propertyName:t}])}}Fe.\u0275fac=function(e){return new(e||Fe)},Fe.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Fe,factory:Fe.\u0275fac});class Ee extends l.RxViewDesignerActionModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.sandbox.actionProperties$.pipe((0,d.take)(1)).subscribe(e=>{this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig(e))})}getActionEditorConfig(e){return(0,m.keys)(e).map(e=>({name:e,component:c.TextFormControlComponent,isDisabled:!0,options:{label:e}}))}}class Me{constructor(e,t,i){this.rxViewActionRegistryService=e,this.rxUnknownViewActionService=t,this.rxUnknownViewActionDesignManager=i,this.rxViewActionRegistryService.register({name:"rxUnknownViewAction",label:"Unknown",bundleId:r.RX_APPLICATION.platformBundleId,designModel:Ee,designManager:this.rxUnknownViewActionDesignManager,service:this.rxUnknownViewActionService,parameters:[],hidden:!0})}}Me.\u0275fac=function(e){return new(e||Me)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](Te),n["\u0275\u0275inject"](Fe))},Me.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Me}),Me.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Te,Fe]});class Oe{}Oe.\u0275fac=function(e){return new(e||Oe)},Oe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Oe,imports:[M,U,X,W,Q,Z,oe,le,Ae,ue,G,he,ge,Ce,Me]}),Oe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[M,U,X,W,Q,Z,oe,le,Ae,ue,G,he,ge,Ce,Me]]});class ke{constructor(e,t,i){this.viewDesignerFacade=e,this.rxRecordGridDesignUtilsService=t,this.rxRecordGridFilterHelperService=i;const n=this.viewDesignerFacade.getComponentsByType(o.RxViewComponentType.Action).pipe((0,d.map)(e=>e.filter(e=>e.data.name===A)),(0,d.shareReplay)({refCount:!0,bufferSize:1})),r=n.pipe((0,d.map)(e=>e.map(e=>F.extractGuidFromExpression(e.data.targetApi))),(0,d.map)(e=>(0,m.sortBy)((0,m.uniq)((0,m.compact)(e)))),(0,d.filter)(e=>Boolean(e.length)),(0,d.distinctUntilChanged)((e,t)=>(0,m.isEqual)(e,t)),(0,d.shareReplay)({refCount:!0,bufferSize:1})),a=r.pipe((0,d.switchMap)(e=>{const t=e.map(e=>this.getActionsToUpdate(e,n));return(0,s.merge)(...t)})),l=r.pipe((0,d.switchMap)(e=>{const t=e.map(e=>this.getGridDefinitionChanges(e).pipe((0,d.skip)(1),(0,d.map)(()=>e),(0,d.withLatestFrom)(n),(0,d.map)(([e,t])=>t.filter(t=>t.data.targetApi.includes(e)).map(e=>{const t=(0,m.cloneDeep)(e);return t.data.filters=null,{component:t,children:[]}}))));return(0,s.merge)(...t)}));(0,s.merge)(l,a).subscribe(e=>{e.forEach(e=>{this.viewDesignerFacade.updateComponentProperties(e.component.guid,e.component.data),this.viewDesignerFacade.setChildren(e.component.guid,e.children)})})}getActionsToUpdate(e,t){return this.getGridColumnChanges(e).pipe((0,d.skip)(1),(0,d.withLatestFrom)(t),(0,d.switchMap)(([e,t])=>{const i=t.filter(t=>t.data.targetApi.includes(e.guid)).map(e=>this.viewDesignerFacade.getChildComponents(e.guid).pipe((0,d.map)(t=>Object.assign(Object.assign({},(0,m.cloneDeep)(e)),{children:t})),(0,d.take)(1)));return(0,s.forkJoin)(i).pipe((0,d.map)(t=>{const i=e.columns.map(e=>e.fieldId);return t.reduce((e,t)=>{const n=this.getUpdatedFilterComponents((0,m.omit)(t,"children"),t.children,i);return n?e.concat(n):e},[])}))}))}getGridColumnChanges(e){return this.viewDesignerFacade.getComponentPropertyValue(e,"columns").pipe((0,d.filter)(e=>Array.isArray(e)),(0,d.map)(t=>({guid:e,columns:t.map(e=>({fieldId:e.fieldId,namedFilterOptions:e.namedFilterOptions}))})),(0,d.distinctUntilChanged)(m.isEqual))}getGridDefinitionChanges(e){return this.viewDesignerFacade.getComponentPropertyValue(e,"recordDefinitionName").pipe((0,d.distinctUntilChanged)())}getUpdatedFilterComponents(e,t,i){const n=t.filter(e=>i.includes(e.data.fieldId));if(n.length!==t.length){const t=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(n),i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.data.filters,t);return e.data.filters=i?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(i),t):null,{component:e,children:n}}return null}validate(e,t){const i=e.filters||(0,m.includes)([o.ApplyGridFilterMode.Begin,o.ApplyGridFilterMode.End,o.ApplyGridFilterMode.Clear],e.mode)?null:{type:"error",description:"Apply grid filter action: Filter is required",propertyName:t};return(0,s.of)(e.targetApi).pipe((0,d.map)(e=>F.extractGuidFromExpression(e)),(0,d.switchMap)(e=>e?this.viewDesignerFacade.getComponent(e):(0,s.of)(null)),(0,d.take)(1),(0,d.map)(n=>{const o=[];return e.targetApi&&(null==n?void 0:n.type)!==p.RX_RECORD_GRID.type&&o.push({type:"error",description:"Apply grid filter action: Record grid expression must point to a record grid.",propertyName:t}),e.targetApi&&!o.length&&i&&o.push(i),o}))}}ke.\u0275fac=function(e){return new(e||ke)(n["\u0275\u0275inject"](l.ViewDesignerFacade),n["\u0275\u0275inject"](p.RxRecordGridDesignUtilsService),n["\u0275\u0275inject"](p.RxRecordGridFilterHelperService))},ke.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ke,factory:ke.\u0275fac});class je{constructor(e,t){this.rxViewActionRegistryService=e,this.rxApplyGridFilterViewActionDesignManagerService=t,this.rxViewActionRegistryService.registerDesignManager(A,t)}}je.\u0275fac=function(e){return new(e||je)(n["\u0275\u0275inject"](o.RxViewActionRegistryService),n["\u0275\u0275inject"](ke))},je.\u0275mod=n["\u0275\u0275defineNgModule"]({type:je}),je.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ke]});class Pe{}Pe.\u0275fac=function(e){return new(e||Pe)},Pe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Pe,imports:[Oe,je]}),Pe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Oe,je]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-components.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionButtonComponent:()=>ws,ActionButtonDesignComponent:()=>bs,ActionButtonDesignModule:()=>Ss,ActionButtonIconAlignment:()=>gs,ActionButtonModule:()=>Is,ActionButtonSize:()=>fs,ActionButtonStyle:()=>ms,AssociationDesignModule:()=>Rl,AssociationManagerFactory:()=>cl,AssociationModule:()=>vl,AssociationRegistrationModule:()=>El,AttachmentFieldComponent:()=>Vl,AttachmentFieldDesignComponent:()=>kl,AttachmentFieldDesignModule:()=>jl,AttachmentFieldModule:()=>Bl,AttachmentFieldRegistrationModule:()=>$l,BaseRecordEditorFieldComponent:()=>Pl,BaseRecordEditorFieldDesign:()=>Ml,BooleanFieldComponent:()=>Hl,BooleanFieldDesignComponent:()=>ql,BooleanFieldDesignModule:()=>Xl,BooleanFieldModule:()=>Wl,BooleanFieldRegistrationModule:()=>Yl,ButtonBarComponent:()=>Ts,ButtonBarDesignComponent:()=>Ms,ButtonBarDesignModel:()=>Es,ButtonBarDesignModule:()=>Os,ButtonBarModule:()=>Fs,ChatbotUserMappingComponent:()=>sm,ChatbotUserMappingRegistrationModule:()=>lm,ColumnSortDirection:()=>Nd,ContainerComponent:()=>ks,ContainerDesignComponent:()=>Gs,ContainerDesignModule:()=>zs,ContainerModule:()=>Ps,ContainerRowWrap:()=>Vs,DateFieldComponent:()=>ec,DateFieldDesignComponent:()=>Kl,DateFieldDesignModule:()=>Jl,DateFieldModule:()=>tc,DateFieldRegistrationModule:()=>ic,DateTimeFieldComponent:()=>sc,DateTimeFieldDesignComponent:()=>oc,DateTimeFieldDesignModule:()=>rc,DateTimeFieldModule:()=>lc,DateTimeFieldRegistrationModule:()=>cc,DecimalFieldComponent:()=>hc,DecimalFieldDesignComponent:()=>pc,DecimalFieldDesignModule:()=>uc,DecimalFieldModule:()=>fc,DecimalFieldRegistrationModule:()=>gc,DeprecatedActionButtonStyle:()=>hs,ExtensionContainerDesignComponent:()=>gd,ExtensionContainerDesignModule:()=>vd,ExtensionContainerRegistrationModule:()=>xd,ExtensionContainerSectionComponent:()=>pd,FieldComponentsModule:()=>Ed,GainsightAdminOptInRegistrationModule:()=>jm,IframeLoginEventComponent:()=>dm,IframeLoginEventRegistrationModule:()=>pm,ImageComponent:()=>Bu,ImageDesignComponent:()=>ju,ImageDesignModule:()=>Pu,ImageModule:()=>$u,IntegerFieldComponent:()=>mc,IntegerFieldDesignComponent:()=>xc,IntegerFieldDesignModule:()=>yc,IntegerFieldModule:()=>bc,IntegerFieldRegistrationModule:()=>Cc,LocalizedCharacterFieldComponent:()=>_d,LocalizedCharacterFieldRegistrationModule:()=>Fd,PageComponent:()=>Qp,PageComponentDefinitionAdapterService:()=>Ou,PageDesignComponent:()=>Eu,PageDesignModule:()=>Mu,PageModule:()=>ku,RECORD_EDITOR:()=>Us,RX_ASSOCIATION:()=>ul,RX_BASE_FIELD_PROPERTIES:()=>Al,RX_RECORD_GRID:()=>jd,RX_RECORD_GRID_DESIGN:()=>Yd,RecordEditorComponent:()=>sl,RecordEditorDesignComponent:()=>Js,RecordEditorDesignModule:()=>el,RecordEditorMode:()=>qs,RecordEditorModule:()=>dl,RecordEditorState:()=>Xs,RecordGridColumnAlignment:()=>Od,RecordGridColumnEditorControlComponent:()=>ep,RecordGridColumnEditorModalComponent:()=>Zd,RecordGridComponent:()=>ou,RecordGridDesignComponent:()=>zp,RecordGridDesignDefinitionMode:()=>np,RecordGridDesignModule:()=>Yp,RecordGridFilterMode:()=>ip,RecordGridFilterSelectControlComponent:()=>bp,RecordGridFilterSelectControlModule:()=>Ep,RecordGridModule:()=>su,RichTextComponent:()=>lu,RichTextDesignComponent:()=>hu,RichTextDesignModule:()=>gu,RichTextModule:()=>pu,RichTextareaFieldComponent:()=>Sd,RichTextareaFieldDesignComponent:()=>bd,RichTextareaFieldDesignModule:()=>Cd,RichTextareaFieldModule:()=>wd,RichTextareaFieldRegistrationModule:()=>Id,RowSelectionMode:()=>op,RxAssociationComponent:()=>fl,RxAssociationDesignComponent:()=>_l,RxAssociationEditingMode:()=>ml,RxAssociationManagerService:()=>tl,RxDefaultRecordEditorInputType:()=>pl,RxExtensionContainerComponent:()=>cd,RxExtensionContainerModule:()=>hd,RxLocalizedCharacterFieldModule:()=>Dd,RxRecordEditorUtilsService:()=>il,RxRecordGridAdvancedFilterValue:()=>rp,RxRecordGridAdvancedFilteringService:()=>ap,RxRecordGridDesignUtilsService:()=>$p,RxRecordGridFilterHelperService:()=>sp,RxRecordGridFilterSelectHelperService:()=>Mp,RxRecordGridFilterService:()=>lp,RxRecordGridQueryExpressionEvaluatorService:()=>au,RxRecordGridUtilsService:()=>Pd,RxTabContainerComponent:()=>Cu,RxTabPanelComponent:()=>Su,RxTabPanelModule:()=>_u,SelectGroupComponent:()=>Oc,SelectGroupComponentDefinitionAdapterService:()=>jc,SelectGroupDesignComponent:()=>Bc,SelectGroupDesignModel:()=>Lc,SelectGroupFieldComponent:()=>kc,SelectGroupModule:()=>Pc,SelectGroupRegistrationModule:()=>Gc,SelectionFieldComponent:()=>Fc,SelectionFieldDesignComponent:()=>Dc,SelectionFieldDesignModule:()=>Rc,SelectionFieldModule:()=>Ec,SelectionFieldRegistrationModule:()=>Mc,ServiceListComponent:()=>yu,ServiceListDesignComponent:()=>vu,ServiceListDesignModule:()=>xu,ServiceListModule:()=>bu,TabPanelDesignModule:()=>Tu,TextFieldComponent:()=>Hc,TextFieldDesignComponent:()=>Uc,TextFieldDesignModule:()=>qc,TextFieldExpressionConfigurator:()=>Xc,TextFieldModule:()=>Wc,TextFieldMultiSelectionType:()=>Tc,TextFieldRegistrationModule:()=>Yc,TextareaFieldComponent:()=>Zc,TextareaFieldDesignComponent:()=>Kc,TextareaFieldDesignModule:()=>Jc,TextareaFieldModule:()=>ed,TextareaFieldRegistrationModule:()=>td,TimeFieldComponent:()=>ad,TimeFieldDesignComponent:()=>nd,TimeFieldDesignModule:()=>od,TimeFieldModule:()=>sd,TimeFieldRegistrationModule:()=>ld,UploaderFactory:()=>Ll,ViewComponentsModule:()=>Pm});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("rxjs"),r=i("./node_modules/rxjs/_esm2015/operators/index.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js"),p=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),u=i("lodash"),m=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),h=i("./node_modules/@angular/common/fesm2015/common.js"),f=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js"),g=i("./node_modules/css-element-queries/index.js"),v=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),x=i("./node_modules/angular-split/fesm2015/angular-split.js"),y=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),b=i("./node_modules/@angular/forms/fesm2015/forms.js"),C=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),S=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),w=i("./node_modules/tslib/tslib.es6.js"),I=i("./node_modules/moment-es6/index.js"),_=i("./node_modules/bignumber.js/bignumber.js"),D=i.n(_),R=i("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),A=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),T=i("./node_modules/ckeditor4-angular/fesm2015/ckeditor4-angular.js"),F=i("./node_modules/@bmc-ux/adapt-table/fesm2015/bmc-ux-adapt-table.js"),E=i("./node_modules/file-saver/dist/FileSaver.min.js"),M=i("./node_modules/@angular/router/fesm2015/router.js"),O=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js"),k=i("./node_modules/@angular/common/fesm2015/http.js");const j=function(e,t){return[e,t]};function P(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",1),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().api.click(t)}),n["\u0275\u0275elementStart"](1,"span"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("btn-type",e.buttonType)("ngClass",n["\u0275\u0275pureFunction2"](5,j,e.state.icon,e.state.cls))("disabled",e.isDisabled)("size",e.state.size),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.state.buttonLabel)}}function N(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",1),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().api.click(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.state.label,"\n")}}const V=["dropdownToggle"],L=["buttonItems"],B=function(e){return{"nav-item--hidden":e}};function $(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275element"](1,"rx-runtime-view-canvas-item",5,6),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,B,e.showInDropdown)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("layout",e)}}function G(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-button-bar-dropdown-item-component",13),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)("guid",e.guid)}}function z(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,G,1,3,"rx-button-bar-dropdown-item-component",12),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.showInDropdown)}}const U=function(){return["bottom-right","bottom-left","bottom","top-right","top-left","top","auto"]};function q(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275element"](1,"button",8,9),n["\u0275\u0275elementStart"](3,"div",10),n["\u0275\u0275template"](4,z,2,1,"ng-container",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("placement",n["\u0275\u0275pureFunction0"](5,U)),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("id","rx-"+e.guid),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("aria-labelledby","rx-"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByFn)}}function X(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",1),n["\u0275\u0275template"](1,$,3,4,"div",2),n["\u0275\u0275template"](2,q,5,6,"div",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",e.alignClass),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByFn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isDropdownVisible)}}function H(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"as-split-area",2),n["\u0275\u0275elementStart"](1,"rx-canvas-item-column",3),n["\u0275\u0275listener"]("dropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDropListDropped(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isReadOnly",o.isReadOnly)("colIndex",i)("column",e)("layout",o.layout)}}function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",16),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).selectedFieldIdsModel[i.id]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).updateApplyButtonDisabledStatus()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",17),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",i.selectedFieldIdsModel[e.id]),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.name)}}function Y(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",11),n["\u0275\u0275elementStart"](1,"div",12),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"adapt-button",13),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().select(t.groupLabel)}),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,W,5,2,"div",14),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.groupLabel," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.selectAllFieldsInGroupButtonLabel," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.fields)("ngForTrackBy",i.trackById)}}function Q(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1,"No Fields Found"),n["\u0275\u0275elementEnd"]())}const K=["openModalButton"];function J(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",7),n["\u0275\u0275text"](1,"No fields added."),n["\u0275\u0275elementEnd"]())}function Z(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().removeField(t.guid)}),n["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"div",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",10),n["\u0275\u0275elementStart"](5,"small"),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",11),n["\u0275\u0275template"](8,Z,1,0,"span",12),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.componentName),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.options.isDisabled)}}function te(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",2)}function ie(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275element"](1,"div",4),n["\u0275\u0275elementStart"](2,"span"),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,1,"com.bmc.arsys.rx.client.common.loading-data")))}function ne(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-editor.invalid-record.message"),"\n"))}function oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",10),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).switchToEditState()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.edit.label")," "))}function re(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onSaveClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("disabled",e.isSaveButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",12),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCancelClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.cancel.label")," "))}function se(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275template"](2,oe,3,3,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-runtime-view-canvas-outlet"),n["\u0275\u0275template"](4,re,3,4,"button",8),n["\u0275\u0275template"](5,ae,3,3,"button",9),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isEditStateAvailable()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isSaveButtonAvailable()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancelButtonAvailable())}}function le(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",8),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.label)}}function ce(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,": "),n["\u0275\u0275elementEnd"]())}const de=function(e){return{"font-weight-bold":e}};function pe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"li",4),n["\u0275\u0275template"](1,le,2,1,"span",5),n["\u0275\u0275template"](2,ce,2,0,"span",6),n["\u0275\u0275elementStart"](3,"span",7),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,de,!i.isEditableState())),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.value)}}function ue(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",9),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.config.onDelete(t.config.id)}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,1,"com.bmc.arsys.rx.client.common.remove.label"))}function me(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",2),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("value",e.getAssociatedValue())}}function he(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-control-label",9),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275property"]("label",e.label)}}function fe(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"rx-runtime-view-canvas-outlet"),n["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275element"](1,"rx-record-preview-card",13),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](5);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",e.existingPreviewConfigurations[0]||e.pendingPreviewConfigurations[0])}}function ve(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,ge,2,1,"div",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.existingPreviewConfigurations.length||e.pendingPreviewConfigurations.length)}}function xe(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function ye(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).loadExistingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}function be(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",12),n["\u0275\u0275template"](2,xe,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,ye,3,3,"button",15),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.existingPreviewConfigurations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationManager.totalExistingCount>e.existingPreviewConfigurations.length+e.associationManager.deleted.length)}}function Ce(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,ve,2,1,"div",5),n["\u0275\u0275template"](3,be,4,2,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitch",e.associationManager.cardinalityType),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",e.associationManager.cardinalityTypes.One)}}function Se(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function we(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).loadExistingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}const Ie=function(e){return{count:e}};function _e(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275elementStart"](1,"div",20),n["\u0275\u0275elementStart"](2,"span",21),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"button",22),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).deleteAllExisting()}),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",12),n["\u0275\u0275template"](10,Se,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,we,3,3,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",e.associationManager.totalExistingCount>1?n["\u0275\u0275pipeBind2"](4,5,"com.bmc.arsys.rx.client.view-components.record-editor.association.total-items.label",n["\u0275\u0275pureFunction1"](12,Ie,e.associationManager.totalExistingCount)):n["\u0275\u0275pipeBind1"](5,8,"com.bmc.arsys.rx.client.view-components.record-editor.association.single-item.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("hidden",!e.areActionsAvailable||e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.existingPreviewConfigurations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationManager.totalExistingCount>e.existingPreviewConfigurations.length+e.associationManager.deleted.length)}}function De(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-record-preview-card",13),2&e){const e=t.$implicit;n["\u0275\u0275property"]("config",e)}}function Re(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).showPendingAssociations()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.show-more.label")," "))}function Ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",23),n["\u0275\u0275elementStart"](1,"div",24),n["\u0275\u0275elementStart"](2,"div",25),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",26),n["\u0275\u0275elementStart"](6,"span",21),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"button",22),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).deleteAllPending()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275template"](14,De,1,1,"rx-record-preview-card",14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,Re,3,3,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,6,"com.bmc.arsys.rx.client.view-components.record-editor.association.pending-associations.label")," : "),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",e.totalPendingCount>1?n["\u0275\u0275pipeBind2"](8,8,"com.bmc.arsys.rx.client.view-components.record-editor.association.total-items.label",n["\u0275\u0275pureFunction1"](15,Ie,e.totalPendingCount)):n["\u0275\u0275pipeBind1"](9,11,"com.bmc.arsys.rx.client.view-components.record-editor.association.single-item.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("hidden",!e.areActionsAvailable||e.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](12,13,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.getPendingPreviewConfigurations()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.totalPendingCount>e.currentPendingCount)}}function Te(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,_e,12,14,"div",17),n["\u0275\u0275template"](2,Ae,16,17,"div",18),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.existingPreviewConfigurations.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.pendingPreviewConfigurations.length)}}const Fe=function(e){return{"read-state":e}};function Ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275template"](1,he,1,1,"adapt-rx-control-label",7),n["\u0275\u0275template"](2,fe,2,0,"div",8),n["\u0275\u0275template"](3,Ce,4,2,"div",8),n["\u0275\u0275template"](4,Te,3,2,"div",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](6,Fe,e.isReadModeEnabled())),n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled()||e.existingPreviewConfigurations.length>0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.areActionsAvailable),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isReadModeEnabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled())}}function Me(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"rx-select-with-pagination",27),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",e.formControl)("readonly",e.isDisabled)("label",e.label)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)("optionLoader",e.optionLoaderFunc)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)}}function Oe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Me,2,7,"div",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isEditModeEnabled())}}function ke(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275template"](1,Ee,5,8,"div",4),n["\u0275\u0275template"](2,Oe,2,1,"div",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngSwitch",e.editingMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","views"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","dropdown")}}function je(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",22),n["\u0275\u0275elementStart"](1,"div",23),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addField(t.data)}),n["\u0275\u0275elementStart"](2,"button",24),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addField(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",25),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.data.name)}}function Pe(e,t){if(1&e&&n["\u0275\u0275template"](0,je,5,2,"div",21),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",e.data)}}const Ne=function(){return["selected-fields"]};function Ve(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275elementStart"](1,"adapt-tree",19),n["\u0275\u0275template"](2,Pe,1,1,"ng-template",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListConnectedTo",n["\u0275\u0275pureFunction0"](3,Ne)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e.availableFieldTreeNodes)("wrap",e.treeWrap)}}function Le(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",27),n["\u0275\u0275elementEnd"]())}function Be(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",4),n["\u0275\u0275text"](3,"Available fields"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",14),n["\u0275\u0275elementStart"](5,"div",15),n["\u0275\u0275template"](6,Ve,3,4,"div",16),n["\u0275\u0275template"](7,Le,2,0,"ng-template",null,17,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](8),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngIf",t.availableFieldTreeNodes.length)("ngIfElse",e)}}function $e(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275elementStart"](1,"button",29),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",30),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Ge(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",39),n["\u0275\u0275elementStart"](1,"div",40),n["\u0275\u0275elementStart"](2,"button",41),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.$implicit,r=i.index,a=n["\u0275\u0275nextContext"]();return t.stopPropagation(),a.onMoveDown(o,r)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",42),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.$implicit,r=i.index,a=n["\u0275\u0275nextContext"]();return t.stopPropagation(),a.onMoveUp(o,r)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",43),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().onRemove(t)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function ze(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",32),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](2,"div",33),n["\u0275\u0275elementStart"](3,"div",34),n["\u0275\u0275elementStart"](4,"div",35),n["\u0275\u0275elementStart"](5,"div",36),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Ge,7,5,"div",37),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"adapt-rx-textfield",38),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.labelText=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().canSave=!0}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragDisabled",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("title",i.fieldLabelsMap[e.data.fieldId]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.fieldLabelsMap[e.data.fieldId]," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.labelText)}}function Ue(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275element"](1,"adapt-empty-state",44),n["\u0275\u0275elementEnd"]())}function qe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",45),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.canSave),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Xe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",6),n["\u0275\u0275elementStart"](1,"strong",7),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",8),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).editField(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",9),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).removeField(t.guid)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isDisabled)}}function He(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",4),n["\u0275\u0275template"](1,Xe,5,3,"li",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectedFields)}}function We(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-canvas-item",1),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("interactive",!1)("layout",e)("isReadOnly",i.isReadOnly)}}function Ye(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",18),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.data.label)}}function Qe(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1,": "),n["\u0275\u0275elementEnd"]())}function Ke(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"li",14),n["\u0275\u0275template"](1,Ye,2,1,"span",15),n["\u0275\u0275template"](2,Qe,2,0,"span",16),n["\u0275\u0275elementStart"](3,"span",17),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.label),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.name)}}function Je(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementStart"](2,"label",2),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275element"](6,"rx-canvas-outlet",4),n["\u0275\u0275elementStart"](7,"button",5),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"adapt-empty-state",6),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275elementStart"](13,"div",9),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275element"](15,"button",11),n["\u0275\u0275elementStart"](16,"ul",12),n["\u0275\u0275template"](17,Ke,5,3,"li",13),n["\u0275\u0275pipe"](18,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,8,e.model.label$)),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,10,e.model.label$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("containerComponent",e.containerComponent),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!e.hidePlaceholder),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,12,"com.bmc.arsys.rx.client.view-components.record-editor.association.button.clear-all.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",e.hidePlaceholder),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!e.hidePlaceholder),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](18,14,e.model.displayedFields$))}}function Ze(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275element"](3,"adapt-rx-select",19),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](2,3,e.model.label$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](4,5,e.model.label$))("disabled",!0)}}const et=function(){return[]};function tt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-downloader",6),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275property"]("config",e.readStateConfig)}}function it(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"label",4),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,tt,1,1,"adapt-downloader",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.getDisplayValue())}}function nt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,it,4,3,"div",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2),t=n["\u0275\u0275reference"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.getDisplayValue())("ngIfElse",t)}}function ot(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,nt,2,2,"ng-container",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}const rt=function(e){return{"attachment-disabled":e}};function at(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-uploader",7),n["\u0275\u0275listener"]("removedFileFromQueue",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().removeAttachment(t)})("deletedFile",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().removeAttachment(t)})("afterFilesAdded",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addAttachment(t)})("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](13,rt,e.isDisabled))("reusable",!0)("label",e.label)("readonly",e.isDisabled)("required",e.isRequired)("allowDeletion",!1)("uploadMode",e.mode)("selectionMode",e.selectionMode)("filesCount",e.filesCount)("maxFileSize",e.maxFileSize)("chunkSize",e.chunkSize)("texts",e.texts)("formControl",e.attachmentFormControl)}}function st(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",8),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("value","-")}}function lt(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",3),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function ct(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"strong"),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,lt,2,0,"span",1),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-rx-switch",2),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,4,e.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](6,6,e.model.isRequired$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.booleanValue)("disabled",!0)}}function dt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t}),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.booleanValue)("label",n["\u0275\u0275pipeBind1"](2,4,e.model.label$))("required",n["\u0275\u0275pipeBind1"](3,6,e.model.isRequired$))("disabled",!0)}}const pt=["booleanComponent"];function ut(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function mt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ut,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function ht(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-boolean",4,5),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().booleanValue=t})("rxBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",e.isHidden)("label",e.label)("isDisabled",e.isDisabled)("required",e.isRequired)("shouldDisplayAsCheckbox",e.shouldDisplayAsCheckbox)("ngModel",e.booleanValue)}}function ft(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function gt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ft,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function vt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)}}function xt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function yt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,xt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function bt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("mode",e.pickerMode)}}const Ct=["counterComponent"];function St(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function wt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,St,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function It(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-counter",4,5),n["\u0275\u0275listener"]("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()})("onFocus",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onFocus()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.counterFormControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("required",e.isRequired)("min",e.fieldDefinition.minValue)("max",e.fieldDefinition.maxValue)("adaptMin",e.fieldDefinition.minValue)("adaptMax",e.fieldDefinition.maxValue)}}function _t(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Dt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,_t,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Rt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-counter",4),n["\u0275\u0275listener"]("onBlur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()})("onFocus",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onFocus()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.counterFormControl)("required",e.isRequired)("min",e.fieldDefinition.minValue)("max",e.fieldDefinition.maxValue)("adaptMin",e.fieldDefinition.minValue)("adaptMax",e.fieldDefinition.maxValue)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("requiredLabel",n["\u0275\u0275pipeBind1"](1,10,"com.bmc.arsys.rx.client.common.required-field.label"))}}function At(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-select",2),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,4,e.model.label$))("options",n["\u0275\u0275pureFunction0"](8,et))("disabled",!0)("required",n["\u0275\u0275pipeBind1"](2,6,e.model.isRequired$))}}function Tt(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",10),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function Ft(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",11)}function Et(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"label",4),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,Tt,2,0,"span",5),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-rx-radiobutton-group",6),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().isRadioButtonMode=t}),n["\u0275\u0275template"](8,Ft,1,0,"adapt-rx-radiobutton",7),n["\u0275\u0275pipe"](9,"async"),n["\u0275\u0275element"](10,"adapt-rx-radiobutton",8),n["\u0275\u0275element"](11,"adapt-rx-radiobutton",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,5,e.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](6,7,e.model.isRequired$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.isRadioButtonMode)("disabled",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!n["\u0275\u0275pipeBind1"](9,9,e.model.isRequired$))}}function Mt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Ot(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Mt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function kt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",8),2&e){const e=t.$implicit,i=t.last;n["\u0275\u0275classMapInterpolate1"]("mt-0 ",i?"mb-1":"",""),n["\u0275\u0275property"]("value",e.id)("label",e.name)}}function jt(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",6),n["\u0275\u0275template"](1,kt,1,5,"adapt-rx-radiobutton",7),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("name",e.guid)("formControl",e.formControl)("readonly",e.isDisabled)("label",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectOptions)}}function Pt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",9),n["\u0275\u0275listener"]("onPopupOpenChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onPopupStatusChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.selectOptions)("required",e.isRequired)("label",e.label)("formControl",e.selectFormControl)("readonly",e.isDisabled)("optionFormatter",e.optionFormatter)("enableFilter",!0)("emptyOption",!e.isRequired)}}function Nt(e,t){if(1&e&&(n["\u0275\u0275template"](0,jt,2,5,"adapt-rx-radiobutton-group",4),n["\u0275\u0275template"](1,Pt,1,8,"adapt-rx-select",5)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.isRadioButtonMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isRadioButtonMode)}}function Vt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Lt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Vt,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Bt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-select-with-pagination",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("formControl",e.formControl)("required",e.isRequired)("readonly",e.isDisabled)("optionLoader",e.optionLoaderFunc)("showDefaultTitle",e.showDefaultTitle)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)}}const $t=function(){return{iconName:"question_circle_o",content:"This is the record definition that provides the option values for this named list.",placement:"top",popoverMode:!0}};function Gt(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-textfield",5),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.sourceRecordDefinitionDisplayName)("tooltip",n["\u0275\u0275pureFunction0"](2,$t))}}const zt=function(){return{iconName:"question_circle_o",content:"Select the field in the source record definition that filters the option values for this named list.",placement:"top",popoverMode:!0}};function Ut(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",6),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectFilterField(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.filterField)("options",e.filterFieldIdOptions)("optionFormatter",e.optionFormatter)("disabled",e.fieldformGroup.disabled)("tooltip",n["\u0275\u0275pureFunction0"](5,zt))}}const qt=function(e){return{"form-group d-block":e}};function Xt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",6),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().removeField(t)}),n["\u0275\u0275elementEnd"]()}}function Ht(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,Xt,1,0,"button",4),n["\u0275\u0275element"](3,"rx-select-group-field",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!o.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("fieldformGroup",e)("index",i)("targetFieldOptions",o.options.targetFieldOptions)}}function Wt(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",3),n["\u0275\u0275pipe"](1,"async")),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.data.label||"<No Label>")("required",n["\u0275\u0275pipeBind1"](1,3,i.model.isFieldRequired(e)))("disabled",!0)}}function Yt(e,t){if(1&e&&(n["\u0275\u0275template"](0,Wt,2,5,"adapt-rx-textfield",2),n["\u0275\u0275pipe"](1,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](1,2,e.model.fieldsDesignData$))("ngForTrackBy",e.trackByFn)}}function Qt(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",4)}function Kt(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",4),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function Jt(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,Kt,1,2,"rx-read-only-field",3),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function Zt(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",7),n["\u0275\u0275pipe"](1,"translate")),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("isPassword",e.isPasswordField)("formControl",e.formControl)("maxlength",e.maxLength)("required",e.isRequired)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("autocomplete",!e.isPasswordField)("requiredLabel",n["\u0275\u0275pipeBind1"](1,9,"com.bmc.arsys.rx.client.common.required-field.label"))}}function ei(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-select-with-pagination",8),n["\u0275\u0275listener"]("toggleDropdown",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onToggleDropdown(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2),t=n["\u0275\u0275reference"](4);n["\u0275\u0275property"]("showDefaultTitle",e.showDefaultTitle)("label",e.label)("formControl",e.formControl)("readonly",e.isDisabled)("viewToModelValueAdapter",e.viewToModelValueAdapterFunc)("modelToViewValueAdapter",e.modelToViewValueAdapterFunc)("optionLoader",e.optionLoaderFunc)("required",e.isRequired)("isMultiSelectionMode",e.isMultipleSelectionEnabled)("template",t)}}function ti(e,t){if(1&e&&(n["\u0275\u0275template"](0,Zt,2,11,"adapt-rx-textfield",5),n["\u0275\u0275template"](1,ei,1,10,"rx-select-with-pagination",6)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",!e.isNamedListAttached),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isNamedListAttached)}}function ii(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",12),n["\u0275\u0275elementStart"](1,"small"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e," ")}}function ni(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275template"](1,ii,3,1,"span",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.contextualFields)}}function oi(e,t){if(1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275template"](1,ni,2,2,"div",9)),2&e){const e=t.$implicit;n["\u0275\u0275textInterpolate1"](" ",e.displayValue," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.contextualFields)}}function ri(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function ai(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,ri,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function si(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textarea",4),n["\u0275\u0275pipe"](1,"translate")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("formControl",e.formControl)("required",e.isRequired)("maxlength",e.maxLength)("rows",3)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("label",e.label)("requiredLabel",n["\u0275\u0275pipeBind1"](1,8,"com.bmc.arsys.rx.client.common.required-field.label"))}}function li(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function ci(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,li,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function di(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-datetime",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.label)("required",e.isRequired)("formControl",e.formControl)("readonly",e.isDisabled)("disabledStyleForReadonlyState",!0)("mode",e.pickerMode)}}function pi(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")}function ui(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",3),n["\u0275\u0275text"](1,"(required)"),n["\u0275\u0275elementEnd"]())}function mi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",3),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"ckeditor",4),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",e.ckEditorConfig)("type",e.ckEditorType)("readOnly",!0)("ngModel",e.getDisplayValue())}}function hi(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,mi,4,5,"div",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function fi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"adapt-rx-control-label",5),n["\u0275\u0275elementStart"](2,"ckeditor",6),n["\u0275\u0275listener"]("dataChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().setFieldValue(t)})("blur",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBlur()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"adapt-rx-feedback",7,8),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](4),t=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("has-danger",e.hasUIErrorState),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",t.label)("showRequiredLabel",t.isRequired),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("data",t.formControl.value)("config",t.ckEditorConfig)("type",t.ckEditorType)("readOnly",t.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("errors",t.formControl.errors)("controlTouched",t.formControl.touched)}}function gi(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-read-only-field",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.label)("value",e.getDisplayValue())}}function vi(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,gi,1,2,"rx-read-only-field",2),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.inReadState)("ngIfElse",t)}}function xi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275element"](1,"adapt-rx-control-label",5),n["\u0275\u0275elementStart"](2,"button",6),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().selectLocalizedValue()}),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](5,"adapt-rx-textfield",7)}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("has-danger",e.formControl.errors&&e.formControl.touched),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.label)("id",e.guid)("showRequiredLabel",e.isRequired),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.isDisabled),n["\u0275\u0275attribute"]("aria-describedby",e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,13,"com.bmc.arsys.rx.client.view-components.localized-character-field.button.localize.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("readonly",!0)("formControl",e.formControl)("disabledStyleForReadonlyState",!0)("required",e.isRequired),n["\u0275\u0275attribute"]("aria-describedby",e.guid)}}function yi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"label",2),n["\u0275\u0275elementStart"](1,"input",3),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().column.alignment=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("btn btn-sm rounded btn-secondary ",e.icon,""),n["\u0275\u0275classProp"]("active",i.column.alignment===e.value)("disabled",i.isReadOnly),n["\u0275\u0275property"]("adaptTooltip",e.name),n["\u0275\u0275attribute"]("rx-id",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e.value)("ngModel",i.column.alignment)("disabled",i.isReadOnly),n["\u0275\u0275attribute"]("rx-id",e.value)}}function bi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addCellProperties()}),n["\u0275\u0275element"](1,"span",14),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.cell-display-properties.add-cell-display-property.button.label")," "))}function Ci(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",17),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Si(e,t){1&e&&n["\u0275\u0275element"](0,"div",46)}function wi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",47),n["\u0275\u0275elementStart"](1,"div",48),n["\u0275\u0275elementStart"](2,"button",49),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveCellProperties(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveCellProperties(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",51),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeCellProperties(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}const Ii=function(e,t){return{active:e,"disabled not-allowed":t}};function _i(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",21),n["\u0275\u0275template"](1,Si,1,0,"div",22),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",23),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!0)})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.get("isOpen").setValue(!1)}),n["\u0275\u0275elementStart"](3,"div",24),n["\u0275\u0275elementStart"](4,"div",25),n["\u0275\u0275elementStart"](5,"div",26),n["\u0275\u0275elementStart"](6,"div",27),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,wi,7,5,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"div",29),n["\u0275\u0275elementStart"](10,"rx-expression-form-control",30),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openExpressionEditor(t.get("fieldValueCondition"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",31),n["\u0275\u0275elementStart"](12,"div",32),n["\u0275\u0275element"](13,"adapt-rx-control-label",33),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementStart"](15,"adapt-rx-switch",34),n["\u0275\u0275listener"]("ngModelChange",function(){const t=n["\u0275\u0275restoreView"](e).$implicit,i=n["\u0275\u0275nextContext"](2);return i.markAsDirty(),i.resetIconAndTextProps(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"adapt-rx-select",35),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-icon-picker-form-control",36),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](19,"adapt-rx-select",37),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](21,"div",29),n["\u0275\u0275elementStart"](22,"adapt-rx-select",38),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](23,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](24,"adapt-rx-select",39),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](25,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](26,"adapt-rx-select",40),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](27,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](28,"div",41),n["\u0275\u0275elementStart"](29,"div",42),n["\u0275\u0275elementStart"](30,"label",43),n["\u0275\u0275elementStart"](31,"input",44),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).toggleProp(t.get("bold"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](32,"label",45),n["\u0275\u0275elementStart"](33,"input",44),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).toggleProp(t.get("italic"))}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=n["\u0275\u0275nextContext"](2),r=n["\u0275\u0275reference"](17);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",e)("isOpen",e.get("isOpen").value),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title","Cell display properties "+(i+1)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" Cell display properties ",i+1," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",o.queryExpressionOptions),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](14,42,"com.bmc.arsys.rx.client.view-components.cell-display-properties.display-as-badge-field.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](17,44,"com.bmc.arsys.rx.client.view-components.cell-display-properties.badge-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.badgeColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.iconPickerOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](20,46,"com.bmc.arsys.rx.client.view-components.cell-display-properties.icon-position-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.iconPositions)("optionFormatter",o.optionFormatter),n["\u0275\u0275advance"](3),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](23,48,"com.bmc.arsys.rx.client.view-components.cell-display-properties.text-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.textColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](25,50,"com.bmc.arsys.rx.client.view-components.cell-display-properties.background-color-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.backgroundColors)("optionFormatter",o.optionFormatter)("optionContentTemplate",r),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](27,52,"com.bmc.arsys.rx.client.view-components.cell-display-properties.font-size-field.label")),n["\u0275\u0275property"]("disabled",o.config.isReadOnly)("options",o.fontSizes)("optionFormatter",o.optionFormatter),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](54,Ii,e.get("bold").value,e.get("displayAsBadge").value||o.config.isReadOnly)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.get("displayAsBadge").value||o.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](57,Ii,e.get("italic").value,e.get("displayAsBadge").value||o.config.isReadOnly)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.get("displayAsBadge").value||o.config.isReadOnly)}}function Di(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275listener"]("cdkDropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectedCellPropertyDrop(t)}),n["\u0275\u0275elementStart"](1,"adapt-accordion",19),n["\u0275\u0275template"](2,_i,34,60,"div",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.propsFormArray.controls)}}function Ri(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",52),n["\u0275\u0275element"](1,"adapt-empty-state",53),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.cell-display-properties.empty-state.message")))}function Ai(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",54),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.propsFormArray.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Ti(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",55),n["\u0275\u0275element"](1,"div",56),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",e.value?"color-option-box rounded mr-2 "+i.colorsList[e.value]:""),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Fi(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275text"](1,"No cell display properties added."),n["\u0275\u0275elementEnd"]())}function Ei(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275text"](1,"Cell display properties added."),n["\u0275\u0275elementEnd"]())}function Mi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addNamedFilterOption()}),n["\u0275\u0275element"](1,"span",12),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.named-filter-options.add-named-filter-option.button.label")," "))}function Oi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",15),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function ki(e,t){1&e&&n["\u0275\u0275element"](0,"div",29)}function ji(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",30),n["\u0275\u0275elementStart"](1,"div",31),n["\u0275\u0275elementStart"](2,"button",32),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveNamedFilterOption(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",33),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveNamedFilterOption(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",34),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeNamedFilterOption(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function Pi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275template"](1,ki,1,0,"div",20),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",21),n["\u0275\u0275elementStart"](3,"div",22),n["\u0275\u0275elementStart"](4,"div",23),n["\u0275\u0275elementStart"](5,"div",24),n["\u0275\u0275elementStart"](6,"div",25),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,ji,7,5,"div",26),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-rx-textfield",27),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"rx-expression-form-control",28),n["\u0275\u0275listener"]("events",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openExpressionEditor(t.get("title"),t.get("filterExpression"))})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",e)("isOpen",i.accordionTabs[e.get("guid").value]),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.get("title").value),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.get("title").value," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.view-components.named-filter-options.name-field.label")),n["\u0275\u0275property"]("required",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",i.queryExpressionOptions)("required",!0)}}function Ni(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16),n["\u0275\u0275listener"]("cdkDropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectedNamedFilterOptionDrop(t)}),n["\u0275\u0275elementStart"](1,"adapt-accordion",17),n["\u0275\u0275template"](2,Pi,12,16,"div",18),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.namedFilterOptionsFormArray.controls)}}function Vi(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",35),n["\u0275\u0275element"](1,"adapt-empty-state",36),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.named-filter-options.empty-state.message")))}function Li(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",37),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.namedFilterOptionsFormArray.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}const Bi='[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}';function $i(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275element"](1,"span",7),n["\u0275\u0275element"](2,"adapt-icon",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip)}}function Gi(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275text"](1,"No named filter options added."),n["\u0275\u0275elementEnd"]())}function zi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeFilterOption(t)}),n["\u0275\u0275elementEnd"]()}}function Ui(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",12),n["\u0275\u0275elementStart"](1,"strong",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).editNamedFilterOption(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,zi,1,0,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isDisabled)}}function qi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",10),n["\u0275\u0275template"](1,Ui,5,2,"li",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.value)}}const Xi=["selectedColumnsDropList"],Hi=["associatedAvailableColumnsDropList"],Wi=["draggableSelectedColumn"],Yi=["draggableAssociatedAvailableColumn"];function Qi(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",22),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ki(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",23,24),n["\u0275\u0275listener"]("cdkDragStarted",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).onAssociatedAvailableColumnsDragStarted()}),n["\u0275\u0275elementStart"](2,"div",25),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addColumn(t.data.availableColumn)}),n["\u0275\u0275elementStart"](3,"button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](3).addColumn(t.data.availableColumn)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"span",27),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data.availableColumn),n["\u0275\u0275advance"](5),n["\u0275\u0275textInterpolate"](e.label)}}function Ji(e,t){if(1&e&&(n["\u0275\u0275template"](0,Qi,2,2,"span",20),n["\u0275\u0275template"](1,Ki,6,2,"div",21)),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",!e.data.availableColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.availableColumn)}}const Zi=function(){return["selectedColumnsDropList"]};function en(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16,17),n["\u0275\u0275elementStart"](2,"adapt-tree",18),n["\u0275\u0275listener"]("onNodeExpand",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onNodeExpand(t)}),n["\u0275\u0275template"](3,Ji,2,2,"ng-template",19),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListData",e.filteredColumns)("cdkDropListConnectedTo",n["\u0275\u0275pureFunction0"](4,Zi)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("value",e.availableColumnsTree)("wrap",e.treeWrap)}}function tn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275element"](1,"adapt-empty-state",29),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-column.available-columns.empty-state.message")))}function nn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",4),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",13),n["\u0275\u0275elementStart"](6,"div",14),n["\u0275\u0275template"](7,en,4,5,"div",15),n["\u0275\u0275template"](8,tn,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,3,"com.bmc.arsys.rx.client.view-components.record-grid-column.available-columns.title")," "),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!e.isTreeEmpty()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isTreeEmpty())}}function on(e,t){1&e&&n["\u0275\u0275element"](0,"div",44)}function rn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](2).index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.removeColumn(i)}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function an(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275elementStart"](1,"div",46),n["\u0275\u0275elementStart"](2,"button",47),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveColumn(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",48),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"](2);return t.stopPropagation(),o.moveColumn(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,rn,3,3,"button",49),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first,o=e.$implicit,r=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!r.isActionsColumn(o.fieldId))}}function sn(e,t){1&e&&n["\u0275\u0275element"](0,"div")}function ln(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,sn,1,0,"div",51),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275reference"](14),i=n["\u0275\u0275reference"](12),o=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",o.isActionsColumn(e.fieldId))("ngIfThen",t)("ngIfElse",i)}}function cn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",68),n["\u0275\u0275element"](1,"span",69),n["\u0275\u0275element"](2,"adapt-icon",70),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip.content)}}function dn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",64),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",65),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).$implicit[i.name]=t})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"](2).$implicit;return n["\u0275\u0275nextContext"](2).onColumnCheckboxPropertyChange(t,o,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",66),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,cn,3,2,"span",67),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2).$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",t[e.name])("disabled",!i.isPropertyEditable(t,e.name)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.tooltip)}}function pn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-column-editor-alignment",71),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](5).markAsDirty()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2).$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("isReadOnly",i.isReadOnly)("column",t)("columnProperty",e)("ngModel",t.alignment)}}const un=function(){return["visible","sortable","filterable","searchable","wrapText"]};function mn(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,dn,6,4,"div",62),n["\u0275\u0275template"](2,pn,1,4,"rx-column-editor-alignment",63),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pureFunction0"](2,un).includes(e.name)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf","alignment"===e.name)}}function hn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-select-form-control",72),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).$implicit.typeaheadKeystrokeCount=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).markAsDirty()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",t.typeaheadKeystrokeCountOptions)("ngModel",e.typeaheadKeystrokeCount)("disabled",t.isReadOnly)}}function fn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-expression-form-control",73,74),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).$implicit.additionalQueryCriteria=t})("events",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275reference"](1),i=n["\u0275\u0275nextContext"](2).$implicit;return n["\u0275\u0275nextContext"](2).openAdditionalQueryCriteriaExpressionEditor(i,t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("options",e.additionalQueryCriteriaExpressionOptions)("ngModel",e.additionalQueryCriteria)("disabled",t.isReadOnly)}}function gn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-textfield",52),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.title=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",53),n["\u0275\u0275template"](3,mn,3,3,"ng-container",54),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",55),n["\u0275\u0275elementStart"](5,"rx-stepper-with-units-form-control",56),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,hn,1,3,"rx-select-form-control",57),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,fn,2,3,"rx-expression-form-control",58),n["\u0275\u0275elementStart"](8,"rx-cell-display-properties",59),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.cellDisplayProperties=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"rx-named-filter-options",60),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.namedFilterOptions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"rx-action-list-control",61),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.actions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,20,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-header-field.label")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.title),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.columnProperties)("ngForTrackBy",t.trackByForColumnProperties),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",t.columnWidthPropertyOptions)("ngModel",e.width),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterable&&e.fieldDefinition.namedListDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterable&&e.fieldDefinition.namedListDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("columns",t.columns)("columnName",e.title)("disabled",t.isReadOnly)("ngModel",e.cellDisplayProperties),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("tooltip",n["\u0275\u0275pipeBind1"](10,22,"com.bmc.arsys.rx.client.view-components.record-grid-column.named-filter-options-field.tooltip")),n["\u0275\u0275property"]("column",e)("disabled",t.isReadOnly)("ngModel",e.namedFilterOptions),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("tooltip",n["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-actions-field.tooltip")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.actions)}}function vn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",64),n["\u0275\u0275elementStart"](1,"label"),n["\u0275\u0275elementStart"](2,"input",65),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).$implicit[i.name]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",66),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2).$implicit,o=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",i[e.name])("disabled",!o.isPropertyEditable(i,e.name)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.label)}}function xn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-textfield",75),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.title=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"rx-stepper-with-units-form-control",56),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",53),n["\u0275\u0275template"](4,vn,5,3,"div",76),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.view-components.record-grid-column.column-header-field.label")),n["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",e.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",t.columnWidthPropertyOptions)("ngModel",e.width),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.actionsColumnProperties)("ngForTrackBy",t.trackByForColumnProperties)}}function yn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",32,33),n["\u0275\u0275listener"]("cdkDragStarted",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onColumnDragStarted()}),n["\u0275\u0275template"](2,on,1,0,"div",34),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",35),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",36),n["\u0275\u0275elementStart"](5,"div",37),n["\u0275\u0275elementStart"](6,"div",38),n["\u0275\u0275elementStart"](7,"div",39),n["\u0275\u0275text"](8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,an,5,3,"div",40),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,ln,2,3,"ng-container",41),n["\u0275\u0275template"](11,gn,13,26,"ng-template",null,42,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](13,xn,5,9,"ng-template",null,43,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isOpen)}}function bn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-accordion",30),n["\u0275\u0275template"](1,yn,15,10,"div",31),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("multiselect",!1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByForColumns)}}function Cn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275element"](1,"adapt-empty-state",77),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-column.selected-columns.empty-state.message")))}function Sn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",78),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function wn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275text"](1," No grid columns added. "),n["\u0275\u0275elementEnd"]())}function In(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).openEditor(t.guid)}),n["\u0275\u0275elementEnd"]()}}function _n(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeColumn(t)}),n["\u0275\u0275elementEnd"]()}}function Dn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"]("\u2013 ",e.associationDescriptor.label,"")}}const Rn=function(e){return{"d-icon-left-arrow_schema":e}};function An(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275elementStart"](2,"span",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,In,1,0,"button",10),n["\u0275\u0275template"](5,_n,1,0,"button",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",12),n["\u0275\u0275text"](7),n["\u0275\u0275template"](8,Dn,2,1,"span",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](7,Rn,e.associationDescriptor))("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title||e.fallbackTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isActionsColumn(e.fieldId)&&!i.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",i.getColumnResourceTypeName(e)," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.associationDescriptor)}}function Tn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275template"](2,wn,2,0,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,An,9,9,"div",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",0===e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",i.getSortedColumns(e))("ngForTrackBy",i.trackByForColumns)}}function Fn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-checkbox",3),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).namedFilterOptionsModel[i.guid]=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onNamedFilterOptionChange()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("label",e.title)("ngModel",i.namedFilterOptionsModel[e.guid])}}function En(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",1),n["\u0275\u0275template"](1,Fn,1,2,"adapt-rx-checkbox",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.namedFilterOptions)("ngForTrackBy",e.trackByOptionGuid)}}function Mn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",3),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function On(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",4),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onValueChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("inline",!0)("multiple",!0)("optionFormatter",e.selectOptionFormatter)("options",e.getSelectOptions())("popupMaxHeight",null)("ngModel",e.selectedValues)}}function kn(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",6),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("value",e.filterControlsComponent.getBooleanTypeBlankValue())("label",e.filterControlsComponent.texts.configsTexts.blankLabel)("testID",e.filterControlsComponent.testID+"_radio_blank")("disabled",e.filterControlsComponent.isInputDisabled(e.filterControlsComponent.getBooleanTypeBlankValue()))}}function jn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-radiobutton-group",5),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onValueChangeRequired(t)}),n["\u0275\u0275element"](1,"adapt-rx-radiobutton",6),n["\u0275\u0275element"](2,"adapt-rx-radiobutton",6),n["\u0275\u0275template"](3,kn,1,4,"adapt-rx-radiobutton",7),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.filterValue?e.filterValue.filterValue[0]:null),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",!1)("label",e.filterControlsComponent.texts.configsTexts.falseLabel)("testID",e.filterControlsComponent.testID+"_radio_false")("disabled",e.filterControlsComponent.isInputDisabled(!1)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",!0)("label",e.filterControlsComponent.texts.configsTexts.trueLabel)("testID",e.filterControlsComponent.testID+"_radio_true")("disabled",e.filterControlsComponent.isInputDisabled(!0)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.filterControlsComponent.getBooleanTypeOptionParams().hasBlankValue)}}function Pn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function Nn(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275element"](1,"div",8),n["\u0275\u0275elementEnd"]())}function Vn(e,t){if(1&e&&n["\u0275\u0275text"](0),2&e){const e=t.tag;let i;n["\u0275\u0275textInterpolate1"](" ",null!==(i=e.displayValue)&&void 0!==i?i:e.value,"\n")}}function Ln(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",12),n["\u0275\u0275elementStart"](1,"small"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e," ")}}function Bn(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275template"](1,Ln,3,1,"span",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().result;n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.contextualFields)}}function $n(e,t){if(1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275template"](1,Bn,2,2,"div",9)),2&e){const e=t.result;let i;n["\u0275\u0275textInterpolate1"](" ",null!==(i=e.displayValue)&&void 0!==i?i:e.value," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.contextualFields)}}function Gn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",3),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function zn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",8),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function Un(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}function qn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](6);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Xn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](8);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Hn(e,t){if(1&e&&n["\u0275\u0275elementContainer"](0,7),2&e){n["\u0275\u0275nextContext"]();const e=n["\u0275\u0275reference"](10);n["\u0275\u0275property"]("ngTemplateOutlet",e)}}function Wn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",8),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onTimeTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("hasSeconds",!0)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Yn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",9),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDateTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Qn(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-datetime-range",8),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDateTimeTypeFilterOptionModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",null==e.filterValue?null:e.filterValue.filterValue)("testID",e.filterControlsComponent.testID)("mode",e.mode)("hasSeconds",!0)("inline",!0)("inlineLight",!0)("texts",e.filterControlsComponent.texts.datetimeTexts)("disabled",e.filterControlsComponent.isInputDisabled())}}function Kn(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-named-filter-options-list",2),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("namedFilterOptions",e.namedFilterOptions)("filterOption",e.filterOption)("filterValue",e.filterValue)("filterControlsComponent",e.filterControlsComponent)}}const Jn=["optionalBooleanFilter"],Zn=["requiredBooleanFilter"],eo=["inputsForStringWithTypeAheadTemplate"],to=["inputsForStringTypeTemplate"],io=["inputsForNumberTypeTemplate"],no=["inputsForTimeTypeTemplate"],oo=["inputsForDateTypeTemplate"],ro=["inputsForDatetimeTypeTemplate"],ao=["inputsForSelectionTypeTemplate"];function so(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-boolean-filter",9),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("isRequired",!1)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function lo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-boolean-filter",9),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("isRequired",!0)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function co(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-string-with-type-ahead-filter",10),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function po(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-string-filter",10),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterControlsComponent",o)("filterOption",e)("filterValue",i)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function uo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-number-filter",11),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function mo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.Time)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function ho(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.Date)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function fo(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-date-time-range-filter",12),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("mode",r.rxDatetimePickerMode.DateTime)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function go(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-selection-filter",11),2&e){const e=t.filterOption,i=t.value,o=t.filterControlsComponent,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("filterOption",e)("filterValue",i)("filterControlsComponent",o)("namedFilterOptions",r.namedFilterOptionsGetter(e))}}function vo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-tag",2),n["\u0275\u0275listener"]("remove",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275elementStart"](1,"span",3),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();let o;n["\u0275\u0275property"]("removable",!i.isDisabled)("disabled",i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",null!==(o=null==e.data.value?null:e.data.value.title)&&void 0!==o?o:e.text),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text)}}function xo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"adapt-tag",8),n["\u0275\u0275listener"]("remove",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onRemoveFilterTag(t)}),n["\u0275\u0275elementStart"](2,"span",3),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);let o;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("removable",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",null!==(o=null==e.data.value?null:e.data.value.title)&&void 0!==o?o:e.text),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text)}}function yo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",4),n["\u0275\u0275elementStart"](1,"button",5),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",6),n["\u0275\u0275template"](5,xo,4,3,"div",7),n["\u0275\u0275pipe"](6,"slice"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("appendToBody",!0)("placement",e.restTagsDropdownPlacement),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind2"](3,5,"com.bmc.arsys.rx.client.view-components.record-grid.filters.show-more-filters.label",e.getTranslateParams())," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind2"](6,8,e.tags,-e.getRestTagsCount()))("ngForTrackBy",e.trackByForFilterTags)}}const bo=function(){return["right","bottom","bottom-right","auto"]};function Co(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"adapt-advanced-filter",3,4),n["\u0275\u0275listener"]("selectedFiltersChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onAdvancedFiltersChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"rx-filter-tags",5),n["\u0275\u0275listener"]("removeTag",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](2),t=n["\u0275\u0275nextContext"](),i=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",t.isDisabled)("appendDropdownToBody",!0)("enableSavedFilters",!1)("filterOptions",t.advancedFilterData.filterOptions)("selectedFilters",t.advancedFilterData.selectedFilters)("texts",t.advancedFilterData.filterTexts)("applyFiltersByUserAction",!0)("filterOptionsCustomAreaTemplate",i)("selectedFiltersIndicationStyle","mark")("anchorDisabled",t.options.anchorDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("isDisabled",t.isDisabled)("tags",n["\u0275\u0275pipeBind1"](4,14,t.getTags(e.filtersExpressionsTags)))("tagsLimit",t.options.tagsLimit)("restTagsDropdownPlacement",n["\u0275\u0275pureFunction0"](16,bo))}}function So(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-radiobutton",11),2&e){const e=t.$implicit;n["\u0275\u0275property"]("value",e.value)("label",e.name)}}function wo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"adapt-accordion"),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",8),n["\u0275\u0275elementStart"](3,"adapt-rx-radiobutton-group",9),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onGroupFilterValueModelChange(t)}),n["\u0275\u0275template"](4,So,1,2,"adapt-rx-radiobutton",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title","Show filters for: "+e.getGroupFilterName(e.groupFilterValue))("multiline",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.groupFilterValue),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.groupFilterItems)}}function Io(e,t){if(1&e&&n["\u0275\u0275template"](0,wo,5,4,"div",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.groupFilterItems.length>1)}}const _o=["filterPresetsForm"];function Do(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addFilterPreset()}),n["\u0275\u0275element"](1,"span",15),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.add-filter-preset.button.label")," "))}function Ro(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",16),n["\u0275\u0275elementStart"](1,"button",17),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",18),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Ao(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275elementStart"](1,"button",30),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.removeFilterPreset(i)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.common.remove.label")," "))}function To(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"rx-record-grid-filter-select-control",31),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).markAsDirty()})("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().$implicit.filterSelect=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name","filterPresetFilterSelect-"+e.guid)("disabled",t.isReadOnly)("options",e.filterSelectOptions)("ngModel",e.filterSelect)}}function Fo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",20,21),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](3,"div",22),n["\u0275\u0275elementStart"](4,"div",23),n["\u0275\u0275elementStart"](5,"div",24),n["\u0275\u0275elementStart"](6,"div",25),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,Ao,4,3,"div",26),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](9,"adapt-rx-textfield",27),n["\u0275\u0275listener"]("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()})("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.title=t}),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,To,2,4,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275reference"](2),o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!o.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](10,11,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.name-field.label")),n["\u0275\u0275property"]("name","filterPresetTitle-"+e.guid)("required",!0)("disabled",o.isReadOnly)("rxCustomValidators",o.getCheckPresetTitleDuplicateValidator(e))("ngModel",e.title),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.isOpenOrCloseAnimationProcessing)}}function Eo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",32),n["\u0275\u0275element"](1,"adapt-empty-state",33),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-filter-preset.empty-state.message")))}function Mo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",34),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSaveChangesClick()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](9);n["\u0275\u0275property"]("disabled",t.form.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Oo(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-rx-control-label",4),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.options.label)("tooltip",null==e.options?null:e.options.tooltip)}}function ko(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",5),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().openEditor()}),n["\u0275\u0275element"](1,"span",6),n["\u0275\u0275text"](2," Edit filter presets\n"),n["\u0275\u0275elementEnd"]()}}function jo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().openEditor(t)}),n["\u0275\u0275elementEnd"]()}}function Po(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",14),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().removeFilterPreset(t)}),n["\u0275\u0275elementEnd"]()}}function No(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275elementStart"](2,"span",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,jo,1,0,"button",10),n["\u0275\u0275template"](5,Po,1,0,"button",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",12),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("Filters: ",e.recordGridFilters.length,"")}}function Vo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",15),n["\u0275\u0275text"](1," No filter presets added. "),n["\u0275\u0275elementEnd"]())}const Lo=["rowActionsForm"],Bo=["selectedRowActionsDropList"],$o=["draggableSelectedRowAction"];function Go(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",15),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().addRowAction()}),n["\u0275\u0275element"](1,"span",16),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,1,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.add-row-action.button.label")," "))}function zo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",17),n["\u0275\u0275elementStart"](1,"button",18),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",19),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function Uo(e,t){1&e&&n["\u0275\u0275element"](0,"div",39)}function qo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",40),n["\u0275\u0275elementStart"](1,"div",41),n["\u0275\u0275elementStart"](2,"button",42),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveRowAction(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",43),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveRowAction(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",44),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().removeRowAction(i,t)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function Xo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",20,21),n["\u0275\u0275template"](2,Uo,1,0,"div",22),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",23),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",24),n["\u0275\u0275elementStart"](5,"div",25),n["\u0275\u0275elementStart"](6,"div",26),n["\u0275\u0275elementStart"](7,"div",27),n["\u0275\u0275text"](8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,qo,7,5,"div",28),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",29),n["\u0275\u0275elementStart"](11,"adapt-rx-textfield",30),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.label=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"rx-icon-picker-form-control",31),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.icon=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",29),n["\u0275\u0275elementStart"](15,"rx-definition-picker",32),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.recordDefinitionName=t})("ngModelChange",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onRecordDefinitionChange(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"rx-select-form-control",33),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.fieldId=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275pipe"](17,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-expression-form-control",34),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"recordInstance")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](19,"div",29),n["\u0275\u0275elementStart"](20,"rx-expression-form-control",35),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"disabled")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](21,"rx-expression-form-control",36),n["\u0275\u0275listener"]("events",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openExpressionEditor(t,i,"hidden")}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](22,"rx-select-form-control",37),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.availableOnDevices=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](23,"div",29),n["\u0275\u0275elementStart"](24,"rx-action-list-control",38),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.actions=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](12,46,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.label-field.label")),n["\u0275\u0275property"]("disabled",i.isReadOnly)("required",!0)("name","label_"+e.guid)("ngModel",e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.iconPickerOptions)("name","icon_"+e.guid)("ngModel",e.icon),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("isDisabled",i.isReadOnly)("options",i.recordDefinitionPickerOptions)("ngModel",e.recordDefinitionName)("name","recordDefinition_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",n["\u0275\u0275pipeBind1"](17,48,e.securityFieldDefinitions$)||i.selectFormControlOptions)("ngModel",e.fieldId)("name","fieldId_"+e.guid)("disabled",!e.recordDefinitionName||i.isReadOnly)("appendToBody",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!e.recordDefinitionName||i.isReadOnly)("options",i.getExpressionFormControlOptions("recordInstance"))("ngModel",e.recordInstance)("name","recordInstance_"+e.guid),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.getExpressionFormControlOptions("disabled"))("ngModel",e.disabled)("name","disabled_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i.isReadOnly)("options",i.getExpressionFormControlOptions("hidden"))("ngModel",e.hidden)("name","hidden_"+e.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",i.availableOnDevicesFormControlOptions)("ngModel",e.availableOnDevices)("name","availableOnDevices_"+e.guid)("disabled",i.isReadOnly)("appendToBody",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngModel",e.actions)("name","action_"+e.guid)}}function Ho(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275element"](1,"adapt-empty-state",46),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.empty-state.message")))}function Wo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",47),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveActions()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](10);n["\u0275\u0275property"]("disabled",t.invalid||!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function Yo(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",5),n["\u0275\u0275text"](1," No row actions added. "),n["\u0275\u0275elementEnd"]())}function Qo(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275elementStart"](1,"div",7),n["\u0275\u0275elementStart"](2,"span",8),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",9),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).openEditor(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"button",10),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).index,i=n["\u0275\u0275nextContext"]().ngIf;return n["\u0275\u0275nextContext"]().removeRowAction(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("title",e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ko(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,Yo,2,0,"span",3),n["\u0275\u0275template"](2,Qo,6,2,"div",4),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByForRowActions)}}const Jo=["adaptRxSelect"];function Zo(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"label",5),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.options.label)}}function er(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-select",6,7),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSelectModelChange(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("options",e)("required",i.options.required)("disabled",i.isDisabled)("ngModel",i.selectedColumnOption)("optionFormatter",i.optionFormatter)("emptyOption",!0)}}function tr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"button",9),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.setSortDirection(t.ColumnSortDirection.Asc)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"button",10),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.setSortDirection(t.ColumnSortDirection.Desc)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",e.selectedSortDirection===e.ColumnSortDirection.Asc),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",e.selectedSortDirection===e.ColumnSortDirection.Desc)}}const ir=function(e){return{"is-required":e}};function nr(e,t){1&e&&n["\u0275\u0275element"](0,"div",25)}function or(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",26),n["\u0275\u0275text"](1," visible "),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e.title)}}function rr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",27),n["\u0275\u0275elementStart"](1,"div",28),n["\u0275\u0275elementStart"](2,"button",29),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveColumn(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",30),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveColumn(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i)}}function ar(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275template"](1,nr,1,0,"div",14),n["\u0275\u0275elementStart"](2,"adapt-accordion-tab",15),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](3,"div",16),n["\u0275\u0275elementStart"](4,"div",17),n["\u0275\u0275elementStart"](5,"div",18),n["\u0275\u0275elementStart"](6,"div",19),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,or,2,1,"div",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,rr,4,2,"div",21),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-rx-textfield",22),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.title=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"adapt-rx-checkbox",23),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.data.visible=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"rx-stepper-with-units-form-control",24),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.data.width=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragDisabled",i.isReadOnly)("cdkDragData",e),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.title||e.fallbackTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.data.visible),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",!0)("ngModel",e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",e.data.visible)("disabled",i.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",i.columnWidthPropertyOptions)("ngModel",e.data.width)}}function sr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",31),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function lr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tag",26),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e)}}function cr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",27),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().openPresetColumnsModal(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" +",e.tags.restCount," more ")}}function dr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",13),n["\u0275\u0275elementStart"](1,"adapt-accordion-tab",14),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](2,"div",15),n["\u0275\u0275elementStart"](3,"div",16),n["\u0275\u0275elementStart"](4,"div",17),n["\u0275\u0275elementStart"](5,"div",18),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"adapt-button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().openPresetColumnsModal(t)}),n["\u0275\u0275element"](8,"span",20),n["\u0275\u0275text"](9," Edit grid columns "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",21),n["\u0275\u0275template"](11,lr,2,1,"adapt-tag",22),n["\u0275\u0275template"](12,cr,2,1,"button",23),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"rx-record-grid-sort-editor-control",24),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.sortModel=t})("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onSortChange(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"rx-record-grid-filter-select-control",25),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).$implicit.filters=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("title",e.presetName),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.presetName," "),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngForOf",e.tags.items),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.tags.restCount),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",e.sortEditorControlOptions)("disabled",i.isReadOnly)("ngModel",e.sortModel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",e.filterSelectControlOptions)("disabled",i.isReadOnly)("ngModel",e.filters)}}function pr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",28),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().saveChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",!e.isDirty()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,2,"com.bmc.arsys.rx.client.common.save.label")," ")}}function ur(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",7),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).openEditor()}),n["\u0275\u0275element"](1,"span",8),n["\u0275\u0275text"](2," Edit view presets "),n["\u0275\u0275elementEnd"]()}}function mr(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1," No presets added. "),n["\u0275\u0275elementEnd"]())}function hr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",10),n["\u0275\u0275elementStart"](1,"strong",11),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",12),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).openEditor(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function fr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275template"](1,ur,3,0,"adapt-button",3),n["\u0275\u0275template"](2,mr,2,0,"span",4),n["\u0275\u0275elementStart"](3,"div",5),n["\u0275\u0275template"](4,hr,4,2,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",!i.options.recordDefinition),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.currentPresetSelectorGuid&&0===e.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByGuid)}}const gr=["filterTemplate"],vr=["visibleColumnsMenuTemplate"];function xr(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",5)}function yr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",6),n["\u0275\u0275listener"]("beforeViewComponentDrop",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onBeforeViewComponentDrop(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](1,"adapt-table",7,8),n["\u0275\u0275listener"]("onSort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSort(t)}),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("dropListOrientation","horizontal")("dropPredicate",e.model.actionButtonDropPredicate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("columns",n["\u0275\u0275pipeBind1"](3,15,e.adaptTableConfig$).columns)("sortable",!e.isReadOnly)("scrollable",!0)("scrollHeight","80px")("sortMode","single")("toolbarConfig",n["\u0275\u0275pipeBind1"](4,17,e.adaptTableConfig$).toolbarConfig)("filterable",!1)("sortField",n["\u0275\u0275pipeBind1"](5,19,e.adaptTableConfig$).sortMeta.field)("sortOrder",n["\u0275\u0275pipeBind1"](6,21,e.adaptTableConfig$).sortMeta.order)("bordered",!0)("totalRecords",0)("hasEmptyState",!1)("dontEmitLazyLoadOnInputChange",!1)}}function br(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",11),n["\u0275\u0275text"](1," Filter "),n["\u0275\u0275elementEnd"]())}function Cr(e,t){if(1&e&&(n["\u0275\u0275element"](0,"span",9),n["\u0275\u0275template"](1,br,2,0,"div",10),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](2,1,e.model.enableFiltering$))}}function Sr(e,t){}const wr=["cardLayoutSortModalTemplate"];function Ir(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"div",16),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",17),n["\u0275\u0275elementStart"](4,"div",18),n["\u0275\u0275elementStart"](5,"button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onSortDescClick(t)}),n["\u0275\u0275element"](6,"span",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",19),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onSortAscClick(t)}),n["\u0275\u0275element"](8,"span",21),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.header),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngClass",i.getSortDescBtnClass(e)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",i.getSortAscBtnClass(e))}}function _r(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",5),n["\u0275\u0275elementStart"](1,"div",6),n["\u0275\u0275elementStart"](2,"div",7),n["\u0275\u0275elementStart"](3,"div",8),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",9),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,Ir,9,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div"),n["\u0275\u0275element"](11,"textarea",11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275elementStart"](14,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().clearAllSorting()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](17,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).close;return n["\u0275\u0275nextContext"]().applySorting(),t()}),n["\u0275\u0275text"](18),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](20,"button",13),n["\u0275\u0275listener"]("click",function(){return(0,n["\u0275\u0275restoreView"](e).close)()}),n["\u0275\u0275text"](21),n["\u0275\u0275pipe"](22,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,8,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.field.column.title")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,10,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.order.column.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.getSortableColumns()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("value",e.getCurrentSortingSummary())("placeholder",n["\u0275\u0275pipeBind1"](12,12,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.field.summary.empty.title")),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](16,14,"com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.clear-all.button.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](19,16,"com.bmc.arsys.rx.client.common.apply.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](22,18,"com.bmc.arsys.rx.client.common.cancel.label")," ")}}const Dr=["adaptTable"],Rr=["adaptAdvancedFilter"],Ar=["cardLayoutRowDetailsTemplate"],Tr=["cellTemplate"],Fr=["leftCustomSectionTemplate"],Er=["rightCustomSectionTemplate"],Mr=["rowActionButtonsTemplate"];function Or(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",20),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275elementStart"](1,"adapt-rx-checkbox",21),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onColumnVisibilityChange(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.header||e.fallbackTitle)("ngModel",!e.hidden)}}function kr(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",22),n["\u0275\u0275pipe"](1,"translate")),2&e&&n["\u0275\u0275property"]("type","search")("label",n["\u0275\u0275pipeBind1"](1,2,"com.bmc.arsys.rx.client.view-components.record-grid.visible-columns-menu.empty.label"))}function jr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-rx-search",17),n["\u0275\u0275listener"]("ngModelChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().columnSearchText=t})("ngModelChange",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSearchColumns()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Or,2,2,"div",18),n["\u0275\u0275template"](3,kr,2,4,"adapt-empty-state",19)}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngModel",e.columnSearchText)("placeholder",n["\u0275\u0275pipeBind1"](1,6,"com.bmc.arsys.rx.client.view-components.record-grid.visible-columns-menu.search.placeholder"))("autofocus",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.filteredVisibleColumns)("ngForTrackBy",e.trackByColumnField),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.filteredVisibleColumns.length)}}function Pr(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275text"](1),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedText()," ")}}function Nr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",25),n["\u0275\u0275text"](2),n["\u0275\u0275elementStart"](3,"button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).loadTotalRowCount()}),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedTextFirstPart()," "),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.getLoadRecordCountLinkText()," "),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.getMultipleRowsSelectedTextSecondPart()," ")}}function Vr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",23),n["\u0275\u0275template"](1,Pr,2,1,"ng-container",24),n["\u0275\u0275template"](2,Nr,6,3,"ng-container",24),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isTotalRecordCountKnown),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isTotalRecordCountKnown)}}function Lr(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",34),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"](3);n["\u0275\u0275property"]("guid",i.guid)("config",o.getActionButtonConfig(e,i.config))("runtimeViewModelApi",i.runtimeViewModelApi)}}function Br(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",32),n["\u0275\u0275template"](1,Lr,1,3,"ng-template",null,33,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](2);n["\u0275\u0275property"]("adaptSubnavItem",e)}}function $r(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",28),n["\u0275\u0275template"](1,Br,3,1,"div",29),n["\u0275\u0275elementStart"](2,"div",30),n["\u0275\u0275element"](3,"button",31),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.actionButtons)}}function Gr(e,t){if(1&e&&n["\u0275\u0275template"](0,$r,4,1,"div",27),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngIf",e.shouldDisplayActionButtons)}}const zr=function(e,t){return{"d-inline-block":e,"d-block":t}};function Ur(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-advanced-filter",39,40),n["\u0275\u0275listener"]("selectedFiltersChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onAdvancedFiltersChange(t)})("deleteSavedFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeleteSavedFilterPreset(t)})("createNewFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCreateNewFilterPreset(t)})("updateSavedFilter",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onUpdateSavedFilterPreset(t)})("activeSavedFilterChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActiveSavedAdvancedFilterChange(t)})("beforeActiveSavedFilterChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onBeforeActiveSavedFilterChange(t)})("editSavedFilterClick",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onEditSavedFilterClick(t)})("filterExpressionTagsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onAdvancedFilterExpressionTagsChanged(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](12,zr,e.hidden,!e.hidden))("appendDropdownToBody",!0)("texts",t.state.advancedFiltering.filterTexts)("showAnchorButtonLabel",!e.collapsed)("filterOptions",t.state.advancedFiltering.filterOptions)("selectedFilters",t.state.advancedFiltering.selectedFilters)("savedFilters",t.state.advancedFiltering.savedFilters)("enableSavedFilters",!!t.guid&&t.state.enableFilterPresets)("activeSavedFilter",t.state.advancedFiltering.activeSavedFilter)("isLoading",t.state.advancedFiltering.isLoading)("selectedFiltersIndicationStyle","mark")("applyFiltersByUserAction",!0)}}function qr(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",41),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind2"](2,1,"com.bmc.arsys.rx.client.view-components.record-grid.filters.number-of-active-filters.label",n["\u0275\u0275pureFunction1"](4,Ie,e.state.advancedFiltering.toolbarTags.length)))}}const Xr=function(e){return{"d-block":e}};function Hr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",35),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRefreshClick()}),n["\u0275\u0275pipe"](1,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Ur,2,15,"adapt-advanced-filter",36),n["\u0275\u0275template"](3,qr,3,6,"span",37),n["\u0275\u0275elementStart"](4,"rx-filter-tags",38),n["\u0275\u0275listener"]("removeTag",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onRemoveFilterTag(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](9,Xr,e.hidden)),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](1,7,"com.bmc.arsys.rx.client.common.refresh.label")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.state.enableFiltering),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(e.collapsed||e.hidden)&&i.state.advancedFiltering.toolbarTags.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",e.collapsed||e.hidden)("tags",i.state.advancedFiltering.toolbarTags)("tagsLimit",i.state.filterTagsLimit)}}function Wr(e,t){}const Yr=function(e){return{"rx-cell-wrap":e}},Qr=function(e,t){return{column:e,dataItem:t}};function Kr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",44,45),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275reference"](1),o=n["\u0275\u0275nextContext"](),r=o.column,a=o.dataItem;return n["\u0275\u0275nextContext"]().onCellClick(t,[r],a,i)})("mouseover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCellMouseOver(t)}),n["\u0275\u0275elementStart"](2,"span",46,47),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275template"](4,Wr,0,0,"ng-template",48),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](1),t=n["\u0275\u0275reference"](3),i=n["\u0275\u0275nextContext"](),o=i.column,r=i.dataItem,a=n["\u0275\u0275nextContext"](),s=n["\u0275\u0275reference"](25),l=n["\u0275\u0275reference"](13);n["\u0275\u0275classProp"]("rx-selected-custom-cell",a.isCellSelected(e)),n["\u0275\u0275property"]("rxCellDisplayProps",o.cellDisplayProperties)("rxCellDisplayPropsBadgeElem",t)("rxCellDisplayPropsDataItem",r)("adaptPopover",s)("autoClose",!1)("popoverClass","table-filtering")("triggers","manual")("appendToBody",!0)("placement","top"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](14,Yr,o.wrapText)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngTemplateOutlet",o.customTemplate||l)("ngTemplateOutletContext",n["\u0275\u0275pureFunction2"](16,Qr,o,r))}}function Jr(e,t){}function Zr(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",49,45),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275reference"](1),o=n["\u0275\u0275nextContext"](),r=o.column,a=o.dataItem;return n["\u0275\u0275nextContext"]().onCellClick(t,[r],a,i)})("mouseover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onCellMouseOver(t)}),n["\u0275\u0275elementStart"](2,"span",46),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()}),n["\u0275\u0275template"](3,Jr,0,0,"ng-template",48),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275reference"](1),t=n["\u0275\u0275nextContext"](),i=t.column,o=t.dataItem,r=n["\u0275\u0275nextContext"](),a=n["\u0275\u0275reference"](25),s=n["\u0275\u0275reference"](13);n["\u0275\u0275classProp"]("rx-selected-custom-cell",r.isCellSelected(e)),n["\u0275\u0275property"]("adaptPopover",a)("autoClose",!1)("popoverClass","table-filtering")("triggers","manual")("appendToBody",!0)("placement","top"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](11,Yr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",i.customTemplate||s)("ngTemplateOutletContext",n["\u0275\u0275pureFunction2"](13,Qr,i,o))}}function ea(e,t){if(1&e&&(n["\u0275\u0275template"](0,Kr,5,19,"div",42),n["\u0275\u0275template"](1,Zr,4,16,"div",43)),2&e){const e=t.column;n["\u0275\u0275property"]("ngIf",e.cellDisplayProperties),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.cellDisplayProperties)}}function ta(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Yr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t),"")}}function ia(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",55),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](),i=t.dataItem,o=t.column,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(i,o,r.getCellValue(i,o))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.dataItem,r=i.column,a=n["\u0275\u0275nextContext"]();return a.downloadAttachment(o,r,a.getCellValue(o,r),t)}),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Yr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t)," ")}}function na(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",56),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](),i=t.dataItem,o=t.column;return n["\u0275\u0275nextContext"]().gridEvents.cellClick(i,o.field)})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"](),o=i.dataItem,r=i.column;return n["\u0275\u0275nextContext"]().gridEvents.cellKeyDown(t,o,r.field)}),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.column,i=e.dataItem,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](2,Yr,t.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(i,t)," ")}}function oa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",57),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.dataItem,i=e.column,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("routerLink","/"+t[i.field+"$ROUTER_LINK$"])("queryParams",t[i.field+"$QUERY_PARAMS$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,Yr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(t,i)," ")}}function ra(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",58),n["\u0275\u0275elementStart"](1,"span",54),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=e.dataItem,i=e.column,o=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("href",t[i.field+"$LAUNCH_URL$"],n["\u0275\u0275sanitizeUrl"])("target",t[i.field+"$TARGET$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](4,Yr,i.wrapText)),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",o.getCellValue(t,i)," ")}}function aa(e,t){if(1&e&&(n["\u0275\u0275template"](0,ta,3,4,"ng-container",24),n["\u0275\u0275template"](1,ia,3,4,"a",50),n["\u0275\u0275template"](2,na,3,4,"a",51),n["\u0275\u0275template"](3,oa,3,6,"a",52),n["\u0275\u0275template"](4,ra,3,6,"a",53)),2&e){const e=t.dataItem,i=t.column;n["\u0275\u0275property"]("ngIf",(!i.clickable||i.clickableWithHref&&!e[i.field+"$ROUTER_LINK$"]&&!e[i.field+"$LAUNCH_URL$"])&&!i.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.clickable&&i.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickable&&!i.clickableWithHref),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickableWithHref&&e[i.field+"$ROUTER_LINK$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.clickableWithHref&&e[i.field+"$LAUNCH_URL$"])}}function sa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-card-layout-cell-header",59),n["\u0275\u0275listener"]("sort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSortCards(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.column,i=n["\u0275\u0275nextContext"](),o=n["\u0275\u0275reference"](1);n["\u0275\u0275property"]("title",e.header||e.fallbackTitle)("columns",i.adaptTableConfig.columns)("adaptTable",o)("openDialog",i.openSortByDialog)}}function la(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-card-layout-cell-header",59),n["\u0275\u0275listener"]("sort",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSortCards(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.column,i=n["\u0275\u0275nextContext"](),o=n["\u0275\u0275reference"](1);n["\u0275\u0275property"]("title",e.header||e.fallbackTitle)("columns",i.adaptTableConfig.columns)("adaptTable",o)("openDialog",i.openSortByDialog)}}function ca(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",62),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275attribute"]("data-testid",e.testId+"-name"),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.header||e.fallbackTitle,": ")}}function da(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",60),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onCellClick(t)}),n["\u0275\u0275template"](1,ca,2,2,"div",61),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.visibleColumns)("ngForTrackBy",e.trackByColumnField)}}const pa=function(e){return{dataItem:e}};function ua(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementContainer"](1,48),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).dataItem;n["\u0275\u0275nextContext"]();const t=n["\u0275\u0275reference"](29);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,pa,e))}}function ma(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function ha(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",55),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().dataItem,o=n["\u0275\u0275nextContext"]();return o.downloadAttachment(i,t,o.getCellValue(i,t))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().dataItem,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(o,i,r.getCellValue(o,i),t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function fa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"a",56),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().dataItem;return n["\u0275\u0275nextContext"]().gridEvents.cellClick(i,t.field)})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().dataItem;return n["\u0275\u0275nextContext"]().gridEvents.cellKeyDown(t,o,i.field)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function ga(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",57),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("routerLink","/"+t[e.field+"$ROUTER_LINK$"])("queryParams",t[e.field+"$QUERY_PARAMS$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function va(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"a",58),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().dataItem,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("href",t[e.field+"$LAUNCH_URL$"],n["\u0275\u0275sanitizeUrl"])("target",t[e.field+"$TARGET$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t,e)," ")}}function xa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",62),n["\u0275\u0275template"](1,ua,2,4,"div",24),n["\u0275\u0275template"](2,ma,2,1,"div",24),n["\u0275\u0275template"](3,ha,2,1,"a",50),n["\u0275\u0275template"](4,fa,2,1,"a",51),n["\u0275\u0275template"](5,ga,2,3,"a",52),n["\u0275\u0275template"](6,va,2,3,"a",53),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]().dataItem;n["\u0275\u0275attribute"]("data-testid",e.testId+"-value"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(!e.clickable||e.clickableWithHref&&!i[e.field+"$ROUTER_LINK$"]&&!i[e.field+"$LAUNCH_URL$"])&&!e.isDownloadableAttachment&&!e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.clickable&&e.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickable&&!e.clickableWithHref),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickableWithHref&&i[e.field+"$ROUTER_LINK$"]),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.clickableWithHref&&i[e.field+"$LAUNCH_URL$"])}}function ya(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",66),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().dataItem,o=n["\u0275\u0275nextContext"]();return o.onFilterBySelection(t,o.visibleColumns,i)}),n["\u0275\u0275elementEnd"]()}}function ba(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",63),n["\u0275\u0275template"](1,xa,7,7,"div",61),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,ya,1,0,"button",64),n["\u0275\u0275elementStart"](3,"button",65),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).dataItem,i=n["\u0275\u0275nextContext"]();return i.openRowDetails(i.adaptTableConfig.columns,t)}),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.visibleColumns)("ngForTrackBy",e.trackByColumnField),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isFilterBySelectionButtonVisible),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("aria-label",n["\u0275\u0275pipeBind1"](4,4,"com.bmc.arsys.rx.client.view-components.record-grid.cards.record-details.button.label"))}}function Ca(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",75),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().getData,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t().rowDataItem,e)," ")}}function Sa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",76),n["\u0275\u0275elementStart"](1,"a",77),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit,i=n["\u0275\u0275nextContext"]().getData,o=n["\u0275\u0275nextContext"]();return o.downloadAttachment(i().rowDataItem,t,o.getCellValue(i().rowDataItem,t))})("keydown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]().getData,r=n["\u0275\u0275nextContext"]();return r.downloadAttachment(o().rowDataItem,i,r.getCellValue(o().rowDataItem,i),t)}),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]().getData,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",i.getCellValue(t().rowDataItem,e),"")}}function wa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",76),n["\u0275\u0275elementContainer"](1,48),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).getData;n["\u0275\u0275nextContext"]();const t=n["\u0275\u0275reference"](29);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,pa,e().rowDataItem))}}function Ia(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",71),n["\u0275\u0275elementStart"](1,"div",72),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Ca,2,1,"div",73),n["\u0275\u0275template"](4,Sa,3,1,"div",74),n["\u0275\u0275template"](5,wa,2,4,"div",74),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"]("",e.header||e.fallbackTitle,":"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isDownloadableAttachment&&!e.isRowActionsColumn),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isDownloadableAttachment),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isRowActionsColumn)}}function _a(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",67),n["\u0275\u0275template"](1,Ia,6,4,"div",68),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",69),n["\u0275\u0275elementStart"](3,"button",70),n["\u0275\u0275listener"]("click",function(){return(0,n["\u0275\u0275restoreView"](e).close)()}),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.getData;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e().columns),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,2,"com.bmc.arsys.rx.client.common.close.label")," ")}}function Da(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",78),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().applyFilterBySelection()}),n["\u0275\u0275elementEnd"]()}}function Ra(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",84),2&e){const e=t.$implicit;n["\u0275\u0275property"]("guid",e.guid)("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)}}function Aa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",79),n["\u0275\u0275listener"]("onOpen",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().onRowActionOpen(t)}),n["\u0275\u0275element"](1,"button",80),n["\u0275\u0275elementStart"](2,"div",81),n["\u0275\u0275template"](3,Ra,1,3,"rx-action-button",82),n["\u0275\u0275elementStart"](4,"div",83),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.rowActionButtons),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,2,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.no-actions-available.label")," ")}}function Ta(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-action-button",89),2&e){const e=t.$implicit;n["\u0275\u0275property"]("guid",e.guid)("config",e.config)("runtimeViewModelApi",e.runtimeViewModelApi)}}function Fa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",85),n["\u0275\u0275listener"]("click",function(e){return e.stopPropagation()})("onOpen",function(){const t=n["\u0275\u0275restoreView"](e).dataItem;return n["\u0275\u0275nextContext"]().onRowActionOpen(t)}),n["\u0275\u0275elementStart"](1,"button",86),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",87),n["\u0275\u0275template"](5,Ta,1,3,"rx-action-button",88),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.view-components.record-grid-row-actions.dropdown.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.rowActionButtons)}}function Ea(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")}function Ma(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",6),2&e){const e=n["\u0275\u0275nextContext"](2).$implicit;n["\u0275\u0275property"]("layout",e)}}function Oa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tab-panel",5),n["\u0275\u0275template"](1,Ma,1,1,"rx-runtime-view-canvas-item",4),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("adapt-tab-title",e.state.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.canRenderContentForTab(e))}}function ka(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",6),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("layout",e)}}function ja(e,t){if(1&e&&(n["\u0275\u0275template"](0,Oa,2,2,"adapt-tab-panel",3),n["\u0275\u0275template"](1,ka,1,1,"rx-runtime-view-canvas-item",4)),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngIf",!i.isHiddenTab(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.isHiddenTab(e)&&i.canRenderContentForTab(e))}}function Pa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-tabset",1),n["\u0275\u0275listener"]("tab-active-changed",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActiveTabChanged(t.index)}),n["\u0275\u0275template"](1,ja,2,2,"ng-template",2),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("fullHeight",!0)("tab-active",e.getActiveTabIndexForAdaptTabset()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.childLayouts)("ngForTrackBy",e.trackByForTabs)}}const Na=["adaptTabset"];function Va(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-tab-panel",4),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("adapt-tab-title",e.data.label)("icon-close",!i.isReadOnly&&i.components.length&&i.components.length>1)("id",e.guid)}}function La(e,t){if(1&e&&n["\u0275\u0275element"](0,"img",3),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275styleProp"]("max-width",e.state.maxWidth),n["\u0275\u0275property"]("src",e.state.imageUrl,n["\u0275\u0275sanitizeUrl"]),n["\u0275\u0275attribute"]("alt",e.state.altText)}}function Ba(e,t){if(1&e&&n["\u0275\u0275element"](0,"span",4),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("aria-label",e.state.altText)}}function $a(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,La,1,4,"img",1),n["\u0275\u0275template"](2,Ba,1,1,"span",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("d-flex ",e.state.alignmentStyle," image-container"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state.imageUrl),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state.isImageBroken)}}function Ga(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"p",6),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.view-preset-selector.view-preset-already-exists.error.message")," "))}function za(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275element"](1,"adapt-icon",15),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.strings.maxRecipientsWarning," ")}}function Ua(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"strong"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div"),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"]()),2&e){const e=t.result;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.text),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.data.emailAddress)}}function qa(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.strings.customPresetsTitle)}}function Xa(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-icon",17),2&e){const e=n["\u0275\u0275nextContext"](5);n["\u0275\u0275property"]("adaptTooltip",e.strings.sharedTooltip)}}function Ha(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",15),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](4).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275template"](2,Xa,1,1,"adapt-icon",16),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](4);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.userSharedViewPresetGuid&&i.isSharingFeatureEnabled)}}function Wa(e,t){1&e&&n["\u0275\u0275element"](0,"div",18)}function Ya(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,qa,2,1,"div",6),n["\u0275\u0275template"](2,Ha,3,4,"button",12),n["\u0275\u0275template"](3,Wa,1,0,"div",13),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isSharingFeatureEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.state.customViewPresetOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.isSharingFeatureEnabled)}}function Qa(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",22),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](4).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](4);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function Ka(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",14),n["\u0275\u0275text"](2),n["\u0275\u0275elementStart"](3,"button",19),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).onAddSharedPresetsClick()}),n["\u0275\u0275element"](4,"adapt-icon",20),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,Qa,2,3,"button",21),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.strings.sharedPresetsTitle," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("adaptTooltip",e.strings.addSharedViewPresets),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.state.sharedViewPresetOptions)}}function Ja(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](e.strings.systemPresetsTitle)}}function Za(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",23),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](3).selectPreset(t)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](3);n["\u0275\u0275classProp"]("active",e.guid===i.state.appliedViewPresetOption.guid),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function es(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",24),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.editedViewPresetTagLabel," ")}}function ts(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",25),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).saveViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.strings.saveLabel," ")}}function is(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",26),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).saveAsViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.strings.saveAsLabel," ")}}function ns(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",35),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).discardViewPresetChanges()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.discardChangesButtonLabel," ")}}function os(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",36),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).saveAsViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.saveAsLabel," ")}}function rs(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",37),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).renameViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.renameLabel," ")}}function as(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",38),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"](4);return t.deleteViewPreset(t.state.appliedViewPresetOption)}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.deleteLabel," ")}}function ss(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"adapt-button",39),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](4).shareViewPreset()}),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](4);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.strings.shareLabel," ")}}function ls(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",27),n["\u0275\u0275element"](1,"button",28),n["\u0275\u0275elementStart"](2,"div",29),n["\u0275\u0275template"](3,ns,2,1,"adapt-button",30),n["\u0275\u0275template"](4,os,2,1,"adapt-button",31),n["\u0275\u0275template"](5,rs,2,1,"adapt-button",32),n["\u0275\u0275template"](6,as,2,1,"adapt-button",33),n["\u0275\u0275template"](7,ss,2,1,"adapt-button",34),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",e.isOperationInProgress)("showCaret",!1),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.isSharingEnabled&&!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&!e.isViewPresetEdited)}}function cs(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"button",4),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",5),n["\u0275\u0275template"](5,Ya,4,3,"ng-container",0),n["\u0275\u0275template"](6,Ka,6,3,"ng-container",0),n["\u0275\u0275template"](7,Ja,2,1,"div",6),n["\u0275\u0275template"](8,Za,2,3,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,es,2,1,"span",8),n["\u0275\u0275template"](10,ts,2,2,"adapt-button",9),n["\u0275\u0275template"](11,is,2,2,"adapt-button",10),n["\u0275\u0275template"](12,ls,8,7,"div",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",e.isOperationInProgress),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.state.appliedViewPresetOption.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("dropdown-menu ",t.isSharingFeatureEnabled?"preset-selector":"",""),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.customViewPresetOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.isSharingEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isSharingFeatureEnabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.state.systemViewPresetOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.state.appliedViewPresetOption.isSystem&&!t.state.appliedViewPresetOption.isShared&&e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.appliedViewPresetOption.isSystem||t.state.appliedViewPresetOption.isShared||!e.isViewPresetEdited),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isViewPresetEdited||!t.state.appliedViewPresetOption.isSystem)}}function ds(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,cs,13,13,"div",1),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.state)}}function ps(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementContainerStart"](0,2),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h1"),n["\u0275\u0275elementStart"](3,"span",4),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div"),n["\u0275\u0275elementStart"](7,"adapt-agreement-card",5),n["\u0275\u0275listener"]("stateChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.adaptAgreementState=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",6),n["\u0275\u0275elementStart"](9,"adapt-rx-switch",7),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.useAdaptRadar=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",8),n["\u0275\u0275elementStart"](11,"adapt-rx-switch",9),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.loadGainsightFromBmcIt=t}),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"adapt-rx-select",10),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.deploymentTypeOptions=t}),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](15,"adapt-rx-select",11),n["\u0275\u0275listener"]("ngModelChange",function(t){return n["\u0275\u0275restoreView"](e).ngIf.environmentTypeOptions=t}),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](17,"div",12),n["\u0275\u0275elementStart"](18,"button",13),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().save()}),n["\u0275\u0275text"](19),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](5,22,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("showOrganizationSettings",!0)("showMarketingSection",!1)("multiProductUsage",!1)("showShadow",!1)("state",e.adaptAgreementState),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("hidden",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isLabelBefore",!0)("size","lg")("ngModel",e.useAdaptRadar),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](12,24,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.load-gainsight-script-from-bmc-it.label")),n["\u0275\u0275property"]("isLabelBefore",!0)("size","lg")("ngModel",e.loadGainsightFromBmcIt),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](14,26,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.deployment-type.label")),n["\u0275\u0275property"]("options",i.deploymentTypeOptions)("optionFormatter",i.optionFormatter)("ngModel",e.deploymentTypeOptions),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](16,28,"com.bmc.arsys.rx.client.gainsight.gainsight-settings.environment-type.label")),n["\u0275\u0275property"]("options",i.environmentTypeOptions)("ngModel",e.environmentTypeOptions),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](20,30,"com.bmc.arsys.rx.client.common.save.label")," ")}}function us(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",14),n["\u0275\u0275element"](1,"adapt-empty-state",15),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.gainsight.feature-is-disabled.label")))}var ms,hs,fs,gs;!function(e){e.Primary="primary",e.Secondary="secondary",e.Tertiary="tertiary"}(ms||(ms={})),function(e){e.Link="link",e.Clear="clear"}(hs||(hs={})),function(e){e.Small="small",e.Default="default",e.Large="large"}(fs||(fs={})),function(e){e.Left="left",e.Right="right"}(gs||(gs={}));class vs{getButtonType(e){let t;switch(e){case ms.Secondary:t="secondary";break;case ms.Tertiary:t="tertiary";break;default:t="primary"}return t}getIconCssClass(e,t=gs.Left){return e?`d-icon-${t}-${e}`:""}}vs.\u0275fac=function(e){return new(e||vs)},vs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:vs,factory:vs.\u0275fac});const xs="actions";class ys extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.viewActionValidatorService=this.injector.get(d.RxViewActionValidatorService),this.translateService=this.injector.get(p.TranslateService),this.label$=this.sandbox.getComponentPropertyValue("labelKey").pipe((0,r.switchMap)(e=>e?(0,o.of)(this.translateService.instant(e)):this.sandbox.getComponentPropertyValue("label")),(0,r.takeUntil)(this.sandbox.destroyed$)),this.style$=this.sandbox.getComponentPropertyValue("style"),this.size$=this.sandbox.getComponentPropertyValue("size"),this.icon$=this.sandbox.getComponentPropertyValue("icon"),this.iconAlignment$=this.sandbox.getComponentPropertyValue("iconAlignment"),this.fieldDefinitions$=this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions),(0,r.catchError)(()=>(0,o.of)([]))):(0,o.of)([])))}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({iconAlignment:gs.Left,label:"New button",size:fs.Default,icon:null,style:ms.Primary,recordDefinitionName:null,fieldId:null,recordInstance:null},c.RX_DISABLED_PROP_DEFAULT_VALUE),c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){(0,o.combineLatest)([this.sandbox.componentProperties$,this.fieldDefinitions$]).pipe((0,r.map)(([e,t])=>this.getInspectorConfig(e,t)),(0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)});const e=this.sandbox.getChildComponents();(0,o.combineLatest)([e.pipe((0,r.switchMap)(e=>this.viewActionValidatorService.validate(e,xs))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(d.validateCssClassNames)),this.sandbox.getComponentPropertyValue(c.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(d.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.setValidationIssues(e)}),this.fieldDefinitions$.pipe((0,r.withLatestFrom)(this.componentProperties$),(0,r.map)(([e,t])=>this.getInspectorConfig(t,e))).subscribe(e=>this.sandbox.updateInspectorConfig(e)),this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.pairwise)()).subscribe(([e,t])=>{e&&e!==t&&this.sandbox.updateComponentProperties({fieldId:null,recordInstance:null})}),this.label$.subscribe(e=>{this.sandbox.setBreadcrumbs(e)}),this.sandbox.getComponentPropertyValue("action").pipe((0,r.switchMap)(e=>e?o.EMPTY:this.label$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[{label:"Disabled",expression:this.getExpressionForProperty("disabled")},{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}setValidationIssues(e){this.sandbox.setValidationIssues(e)}getInspectorConfig(e,t){const i=[{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",tooltip:new s.Tooltip("The view component will be hidden if the user has no access to the specified record definition."),definitionType:l.RxDefinitionPickerType.StandardDataRecord}}];return e.recordDefinitionName&&i.push({name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",tooltip:new s.Tooltip("The view component will be hidden if the user has no access to the specified field, or disabled if the user only has View permission for the specified field. <br><br> Record definition name, Field name, and Record instance must all be specified in order to control the disabled/hidden state of the view component using field permissions."),options:t.map(e=>({name:e.name,id:String(e.id)})),emptyOption:!0}},{name:"recordInstance",component:l.ExpressionInspectorControlComponent,options:{label:"Record instance",tooltip:new s.Tooltip("Expression pointing to a record instance that provides the field permission details.")}}),{inspectorSectionConfigs:[{label:"General",controls:[{name:"label",component:l.TextFormControlComponent,options:{label:"Label"}},{name:"style",component:l.SelectFormControlComponent,options:{label:"Style",required:!0,options:(0,u.map)(ms,(e,t)=>({id:e,name:t}))}},{name:"size",component:l.SelectFormControlComponent,options:{label:"Size",options:(0,u.map)(fs,(e,t)=>({id:e,name:t})),sortAlphabetically:!1}},{name:"icon",component:l.IconPickerFormControlComponent,options:{label:"Icon"}},{name:"iconAlignment",component:l.SelectFormControlComponent,options:{label:"Icon alignment",options:(0,u.map)(gs,(e,t)=>({id:e,name:t}))}},(0,d.getDisabledFieldInspectorConfig)(),...(0,d.getStandardPropsInspectorConfigs)()]},{label:"Actions",controls:[{widgetName:xs,component:d.ActionListWidgetComponent}]},{label:"Security",controls:i}]}}}class bs{constructor(e){this.rxActionButtonService=e}ngOnInit(){this.iconCssClass$=(0,o.combineLatest)([this.model.icon$,this.model.iconAlignment$]).pipe((0,r.map)(([e,t])=>this.rxActionButtonService.getIconCssClass(e,t))),this.buttonType$=this.model.style$.pipe((0,r.map)(e=>this.rxActionButtonService.getButtonType(e))),this.size$=this.model.size$.pipe((0,r.map)(e=>e||fs.Default))}}bs.\u0275fac=function(e){return new(e||bs)(n["\u0275\u0275directiveInject"](vs))},bs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bs,selectors:[["rx-action-button-design"]],inputs:{model:"model"},decls:6,vars:12,consts:[["adapt-button","",3,"btn-type","size","ngClass"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275text"](4),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("btn-type",n["\u0275\u0275pipeBind1"](1,4,t.buttonType$))("size",n["\u0275\u0275pipeBind1"](2,6,t.size$))("ngClass",n["\u0275\u0275pipeBind1"](3,8,t.iconCssClass$)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](5,10,t.model.label$),"\n"))},directives:[m.AdaptButtonComponent,h.NgClass],pipes:[h.AsyncPipe],encapsulation:2,changeDetection:0});class Cs{constructor(){this.deprecatedButtonStyles=[hs.Link,hs.Clear]}adaptDefinition(e){(0,u.includes)(this.deprecatedButtonStyles,e.propertiesByName.style)&&(e.propertiesByName.style=ms.Tertiary),e.propertiesByName.size||(e.propertiesByName.size=fs.Small),e.propertiesByName.icon&&(e.propertiesByName.icon=(0,u.get)(c.RX_LEGACY_ICONS,e.propertiesByName.icon,e.propertiesByName.icon))}}Cs.\u0275fac=function(e){return new(e||Cs)},Cs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Cs,factory:Cs.\u0275fac});class Ss{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.actionButtonAdapterService=t,this.rxDefinitionAdapterRegistryService.registerDesignAdapter(c.RxViewComponentType.ActionButton,this.actionButtonAdapterService)}}Ss.\u0275fac=function(e){return new(e||Ss)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Cs))},Ss.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ss,declarations:[bs],imports:[h.CommonModule,m.AdaptButtonModule,d.ViewDesignerCanvasModule,d.ActionListWidgetModule,l.IconPickerFormControlModule]}),Ss.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs,Cs],imports:[[h.CommonModule,m.AdaptButtonModule,d.ViewDesignerCanvasModule,d.ActionListWidgetModule,l.IconPickerFormControlModule]]});class ws extends f.BaseViewComponent{constructor(e,t,i,n){super(),this.rxLogService=e,this.translateService=t,this.rxNotificationService=i,this.rxActionButtonService=n,this.api={click:this.click.bind(this),setProperty:this.setProperty.bind(this)},this.state={},this.isActionInProgress=!1,this.isDisabled=!1,this.buttonType=""}get hostClass(){const e=this.state,t=`${c.RxViewComponentType.ActionButton}_${e.style}`;return e.styles?`${t} ${e.styles}`:t}ngOnInit(){this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{if(Object.assign(this.state,e),e.labelKey?this.state.buttonLabel=this.translateService.instant(e.labelKey):this.state.buttonLabel=e.label,this.state.icon="",this.state.cls=e.cls||"",e.iconCls||e.icon){const t=e.iconCls||e.icon,i=(e.label||e.labelKey)&&e.iconAlignment||"left";this.state.icon=this.rxActionButtonService.getIconCssClass(t,i)}e.iconCls&&e.icon&&this.rxLogService.warning("iconCls option is specified, icon will be ignored."),e.cls||(this.buttonType=this.rxActionButtonService.getButtonType(this.state.style)),e.cls&&e.style&&this.rxLogService.warning("cls option is specified, style will be ignored."),this.validateRecordDefinitionName(),this.isHidden=this.isHiddenFunc(),this.isDisabled=this.isDisabledFunc()})}click(){if(!this.isDisabled)return this.isActionInProgress=!0,this.isDisabled=!0,this.triggerViewActions().then(e=>{this.isActionInProgress=!1,this.isDisabled=this.isDisabledFunc()}).catch(e=>{this.isActionInProgress=!1,this.isDisabled=this.isDisabledFunc()})}isDisabledFunc(){return Boolean(this.state.disabled)||this.isActionInProgress||this.state.recordInstance&&this.state.fieldId&&this.state.recordInstance.recordDefinitionName===this.state.recordDefinitionName&&(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)})&&(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)}).permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view}isHiddenFunc(){return this.isHidden=Boolean(this.state.hidden)||this.state.recordInstance&&(this.state.recordInstance.recordDefinitionName!==this.state.recordDefinitionName||this.state.fieldId&&!(0,u.find)(this.state.recordInstance.fieldInstances,{id:Number(this.state.fieldId)}))}setProperty(e,t){if(!(0,u.includes)(["hidden","disabled"],e))return(0,o.throwError)(`Action Button: property ${e} is not settable.`);this.state[e]=t,this.notifyPropertyChanged(e,this.state[e])}validateRecordDefinitionName(){if(this.state.recordInstance&&this.state.recordInstance.recordDefinitionName!==this.state.recordDefinitionName){const e=this.translateService.instant("com.bmc.arsys.rx.client.view-components.action-button.component-name.label",{label:this.state.label}),t=this.translateService.instant("com.bmc.arsys.rx.client.view-components.action-button.configuration-error.message",{componentName:e});this.rxNotificationService.addErrorMessage(t)}}}ws.\u0275fac=function(e){return new(e||ws)(n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](vs))},ws.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ws,selectors:[["rx-action-button"]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.hostClass)},inputs:{guid:"guid",config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["adapt-button","","type","button","class","mw-100 rx-ellipsis",3,"btn-type","ngClass","disabled","size","click",4,"ngIf"],["adapt-button","","type","button",1,"mw-100","rx-ellipsis",3,"btn-type","ngClass","disabled","size","click"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,P,3,8,"button",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,m.AdaptButtonComponent,h.NgClass],styles:["[_nghost-%COMP%]{display:block}"]});class Is{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.actionButtonAdapterService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(c.RxViewComponentType.ActionButton,this.actionButtonAdapterService)}}var _s;Is.\u0275fac=function(e){return new(e||Is)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Cs))},Is.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Is,declarations:[ws],imports:[m.AdaptButtonModule,h.CommonModule,p.TranslateModule,m.AdaptIconModule],exports:[ws]}),Is.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs,Cs],imports:[[m.AdaptButtonModule,h.CommonModule,p.TranslateModule,m.AdaptIconModule]]}),function(e){e.Left="left",e.Right="right",e.Center="center"}(_s||(_s={}));const Ds={alignmentOptions:{left:{id:_s.Left,name:"Left",cls:"align-left"},center:{id:_s.Center,name:"Center",cls:"align-center"},right:{id:_s.Right,name:"Right",cls:"align-right"}}};class Rs{getAlignClass(e){return(0,u.get)(Ds.alignmentOptions,[e,"cls"],"")}}Rs.\u0275fac=function(e){return new(e||Rs)},Rs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Rs,factory:Rs.\u0275fac});class As extends ws{}As.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](As)))(t||As)}}(),As.\u0275cmp=n["\u0275\u0275defineComponent"]({type:As,selectors:[["rx-button-bar-dropdown-item-component"]],inputs:{guid:"guid",config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["type","button","class","dropdown-item",3,"disabled","click",4,"ngIf"],["type","button",1,"dropdown-item",3,"disabled","click"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,N,2,2,"button",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf],encapsulation:2});class Ts extends f.BaseViewComponent{constructor(e,t,i,n,r,a){super(),this.elementRef=e,this.runtimeCanvasItemComponent=t,this.changeDetector=i,this.ngZone=n,this.rxButtonBarService=r,this.renderer=a,this.api={setProperty:this.setProperty.bind(this)},this.childLayouts=null,this.isDropdownVisible=!1,this.resize$=new o.Subject,this.onResizeThrottled=(0,u.throttle)(this.onResize.bind(this),100)}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.alignClass=this.rxButtonBarService.getAlignClass(e.alignment)}),this.childLayouts=(0,u.get)(this.runtimeCanvasItemComponent.getChildren(c.RX_VIEW_DEFINITION.defaultOutletName),"[0].children")}ngAfterViewInit(){const e=this.renderer.selectRootElement(this.elementRef.nativeElement,!0);if(!(0,u.isEmpty)(this.childLayouts)){const t=this.childLayouts.map(e=>e.config);this.ngZone.runOutsideAngular(()=>{this.resizeSensor=new g.ResizeSensor(e,e=>{this.ngZone.run(()=>this.resize$.next(e))})}),(0,o.merge)(...t,this.resize$).pipe((0,r.map)(t=>t.width||e.offsetWidth),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.onResizeThrottled(e))}this.onResize(e.offsetWidth),this.changeDetector.detectChanges()}ngOnDestroy(){super.ngOnDestroy(),this.resizeSensor&&this.resizeSensor.detach()}onResize(e){let t=0;const i=this.dropdownToggleButton?this.renderer.selectRootElement(this.dropdownToggleButton.nativeElement,!0).offsetWidth:0;this.buttonItemsQueryList.forEach((n,o)=>{t+=this.renderer.selectRootElement(n.nativeElement,!0).offsetWidth;const r=Math.floor(e)>=Math.ceil(t)+i;this.childLayouts[o].showInDropdown=!r,!(0,u.isUndefined)(this.childLayouts[o-1])&&this.childLayouts.filter(e=>e.showInDropdown).length<2&&(this.childLayouts[o-1].showInDropdown=!r)}),this.isDropdownVisible=!(0,u.isEmpty)(this.childLayouts)&&(0,u.last)(this.childLayouts).showInDropdown}trackByFn(e,t){return t.guid}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Button Bar: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}Ts.\u0275fac=function(e){return new(e||Ts)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](f.RuntimeViewCanvasItemComponent),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](Rs),n["\u0275\u0275directiveInject"](n.Renderer2))},Ts.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ts,selectors:[["rx-button-bar"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](V,5,n.ElementRef),n["\u0275\u0275viewQuery"](L,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.dropdownToggleButton=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.buttonItemsQueryList=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","button-container",3,"ngClass",4,"ngIf"],[1,"button-container",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","dropdown","adaptDropdown","",3,"placement",4,"ngIf"],[3,"ngClass"],[3,"layout"],["buttonItems",""],["adaptDropdown","",1,"dropdown",3,"placement"],["type","button","adaptDropdownToggle","",1,"btn","btn-secondary","rx-toggle"],["dropdownToggle",""],["adaptDropdownMenu","",1,"dropdown-menu"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"config","runtimeViewModelApi","guid",4,"ngIf"],[3,"config","runtimeViewModelApi","guid"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,X,3,4,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",t.childLayouts&&!t.isHidden)},directives:[h.NgIf,h.NgClass,h.NgForOf,f.RuntimeViewCanvasItemComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,As],styles:["[_nghost-%COMP%]{display:block}.button-container[_ngcontent-%COMP%]{display:flex}.button-container.align-center[_ngcontent-%COMP%]{justify-content:center}.button-container.align-right[_ngcontent-%COMP%]{justify-content:flex-end}.button-container.align-left[_ngcontent-%COMP%]{justify-content:flex-start}.button-container[_ngcontent-%COMP%]   rx-runtime-view-canvas-item[_ngcontent-%COMP%]{display:inline-block}.button-container[_ngcontent-%COMP%]   rx-runtime-view-canvas-item[_ngcontent-%COMP%]:not(:has( > [hidden]))[_ngcontent-%COMP%]{padding-right:5px}.rx-toggle[_ngcontent-%COMP%]{padding-left:1px;height:100%}"]});class Fs{}Fs.\u0275fac=function(e){return new(e||Fs)},Fs.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Fs,declarations:[Ts,As],imports:[h.CommonModule,f.RuntimeViewCanvasModule,m.AdaptDropdownModule],exports:[Ts]}),Fs.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Rs],imports:[[h.CommonModule,f.RuntimeViewCanvasModule,m.AdaptDropdownModule.forRoot()]]});class Es extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.hasChildren$=this.sandbox.getChildComponentGuids().pipe((0,r.map)(e=>!(0,u.isEmpty)(e))),this.componentProperties$=this.sandbox.componentProperties$}static getInitialProperties(e){return Object.assign(Object.assign({alignment:_s.Left,name:null},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])}),this.componentProperties$.subscribe(e=>{this.validate(e)})}dropPredicate(e){return e.draggedViewComponentDescriptor.type===c.RxViewComponentType.ActionButton}validate(e){this.sandbox.setValidationIssues((0,d.validateStandardProps)(e))}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Button bar.")}},{name:"alignment",component:l.SelectFormControlComponent,options:{label:"Alignment",options:(0,u.values)(Ds.alignmentOptions),sortAlphabetically:!1}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}}class Ms{constructor(e){this.rxButtonBarService=e,this.alignment="",this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.model.componentProperties$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.alignment=this.rxButtonBarService.getAlignClass(e.alignment)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Ms.\u0275fac=function(e){return new(e||Ms)(n["\u0275\u0275directiveInject"](Rs))},Ms.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ms,selectors:[["rx-button-bar-design"]],inputs:{model:"model"},decls:2,vars:6,consts:[["dropListOrientation","horizontal",1,"button-bar-design-container","border",3,"ngClass","dropPredicate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("border-transparent",n["\u0275\u0275pipeBind1"](1,4,t.model.hasChildren$)),n["\u0275\u0275property"]("ngClass",t.alignment)("dropPredicate",t.model.dropPredicate))},directives:[d.CanvasOutletComponent,h.NgClass],pipes:[h.AsyncPipe],styles:["[_nghost-%COMP%]  .button-bar-design-container{display:block}[_nghost-%COMP%]  .button-bar-design-container.align-center .cdk-drop-list{justify-content:center}[_nghost-%COMP%]  .button-bar-design-container.align-right .cdk-drop-list{justify-content:flex-end}[_nghost-%COMP%]  .button-bar-design-container.align-left .cdk-drop-list{justify-content:flex-start}[_nghost-%COMP%]  .button-bar-design-container rx-canvas-item-container{min-width:100%}[_nghost-%COMP%]  .button-bar-design-container rx-canvas-item-container .cdk-drop-list{min-height:50px;display:flex;flex-flow:row wrap}.border-transparent[_ngcontent-%COMP%]{border-color:transparent!important}"]});class Os{}Os.\u0275fac=function(e){return new(e||Os)},Os.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Os,declarations:[Ms],imports:[h.CommonModule,d.ViewDesignerCanvasModule]}),Os.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Rs],imports:[[h.CommonModule,d.ViewDesignerCanvasModule]]});class ks extends f.BaseViewComponent{constructor(e,t){super(),this.elementRef=e,this.renderer=t,this.state={},this.api={setProperty:this.setProperty.bind(this)}}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.state=Object.assign({},e)})}setProperty(e,t){if("hidden"!==e){const t=this.renderer.selectRootElement(this.elementRef.nativeElement,!0).tagName.toLowerCase();return(0,o.throwError)(`${t}: property ${e} is not settable.`)}this.state.hidden=t,this.notifyPropertyChanged(e,t)}}ks.\u0275fac=function(e){return new(e||ks)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2))},ks.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ks,selectors:[["rx-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"hidden"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("hidden",t.state.hidden)},directives:[f.RuntimeViewCanvasOutletComponent],styles:["[_nghost-%COMP%]{display:block}.rx-auto-fill[_nghost-%COMP%] >rx-runtime-view-canvas-outlet>rx-runtime-view-canvas-item-container{display:flex;flex-direction:column;height:100%}"]});class js{constructor(e,t){this.viewDefinitionParserService=e,this.rxJsonParserService=t,this.componentDefinitionType=c.RxViewComponentType.Container}adaptDefinition(e){this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type===this.componentDefinitionType).map(e=>e.componentDefinition).forEach(e=>{if(e.layout){let t=this.rxJsonParserService.tryParseJson(e.layout);if(t&&t.componentDefinitionId){const i=t.columns.map(t=>{const i=e.propertiesByName.rowWrap||"sm",n=t.span||12;return{cssClass:`${"xs"===i?`col-${n}`:`col-${i}-${n}`} ${"xs"!==i?`rx-mb-${i}`:""}`,children:t.children.map(e=>e.componentDefinitionId)}});t={outlets:[{name:"DEFAULT",columns:i}]},e.layout=JSON.stringify(t)}else t&&t.outlets&&(t.outlets.forEach(t=>{t.columns.filter(e=>!e.cssClass).forEach(t=>{const i=e.propertiesByName.rowWrap||"sm",n=t.span||12,o="xs"===i?`col-${n}`:`col-${i}-${n}`,r="xs"!==i?`rx-mb-${i}`:"";t.cssClass=`${o} ${r}`})}),e.layout=JSON.stringify(t))}})}}js.\u0275fac=function(e){return new(e||js)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},js.\u0275prov=n["\u0275\u0275defineInjectable"]({token:js,factory:js.\u0275fac,providedIn:"root"});class Ps{constructor(e,t){this.containerComponentDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,t.registerRuntimeAdapter(c.RxViewComponentType.Container,this.containerComponentDefinitionAdapterService)}}Ps.\u0275fac=function(e){return new(e||Ps)(n["\u0275\u0275inject"](js),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},Ps.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ps,declarations:[ks],imports:[h.CommonModule,f.RuntimeViewCanvasModule],exports:[ks]}),Ps.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,f.RuntimeViewCanvasModule]]});class Ns extends d.CanvasItemContainerComponent{constructor(e,t,i,o){super(e,t),this.canvasItemApi=e,this.canvasOutletHelperService=t,this.elementRef=i,this.renderer=o,this.maxNumberOfColumns=12,this.defaultGutterStep=50,this.percentSpanSize=100/this.maxNumberOfColumns,this.gutterStep=this.defaultGutterStep,this.columnResize=new n.EventEmitter}onWindowResize(){this.setGutterStep()}ngAfterViewInit(){const e=this.outlet.columns.map(e=>e.span);this.setSpanSizes(e),this.setGutterStep()}onDragEnd(e){const t=this.getPercentToSpanSizes(e.sizes);this.columnResize.emit(t),this.setSpanSizes(t)}getPercentToSpanSizes(e){return e.map(e=>Math.round(e*this.maxNumberOfColumns/100))}setSpanSizes(e){this.splitComponent.setVisibleAreaSizes(this.getSpanToPercentSizes(e))}getSpanToPercentSizes(e){return e.map(e=>e*this.percentSpanSize)}setGutterStep(){const e=this.renderer.selectRootElement(this.elementRef.nativeElement,!0);this.gutterStep=Math.round(e.clientWidth/this.maxNumberOfColumns)||this.defaultGutterStep}}var Vs;Ns.\u0275fac=function(e){return new(e||Ns)(n["\u0275\u0275directiveInject"](d.ViewDesignerCanvasItemApiToken),n["\u0275\u0275directiveInject"](d.CanvasOutletHelperService),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2))},Ns.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ns,selectors:[["rx-container-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](x.SplitComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.splitComponent=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("resize",function(){return t.onWindowResize()},!1,n["\u0275\u0275resolveWindow"])},outputs:{columnResize:"columnResize"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:9,consts:[["unit","percent","gutterSize","1",3,"gutterStep","dragEnd"],["minSize","8",4,"ngFor","ngForOf","ngForTrackBy"],["minSize","8"],[3,"isReadOnly","colIndex","column","layout","dropListDropped"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"as-split",0),n["\u0275\u0275listener"]("dragEnd",function(e){return t.onDragEnd(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,H,2,4,"as-split-area",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("selected",n["\u0275\u0275pipeBind1"](1,7,t.layout.isSelected$))("readonly",t.isReadOnly),n["\u0275\u0275property"]("gutterStep",t.gutterStep),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.outlet.columns)("ngForTrackBy",t.trackByColFn))},directives:[x.SplitComponent,h.NgForOf,x.SplitAreaDirective,d.CanvasItemColumnComponent],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}as-split[_ngcontent-%COMP%]:not(.readonly).selected    >.as-split-gutter{visibility:visible}as-split[_ngcontent-%COMP%]     as-split-area{height:revert!important;min-height:200px}as-split[_ngcontent-%COMP%]     as-split-area>rx-canvas-item-column{height:100%}as-split[_ngcontent-%COMP%]     as-split-area>rx-canvas-item-column>.cdk-drop-list{height:100%;min-height:auto}as-split[_ngcontent-%COMP%]     .as-split-gutter{visibility:hidden;height:revert!important;position:relative;background-color:#d6d7d8!important}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon{border:1px solid #d6d7d8;height:72px!important;width:11px!important;background:white!important;border-radius:2px;position:absolute}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:hover:before, as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:hover:after{background-color:#d6d7d8}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:before, as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:after{display:inline-block;content:"";position:absolute;top:50%;width:2px;height:64px;background-color:#f0f1f1;border-radius:2px;transform:translateY(-50%);transition:background-color .25s ease}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:before{left:2px}as-split[_ngcontent-%COMP%]     .as-split-gutter .as-split-gutter-icon:after{left:5px}']}),function(e){e.Xs="xs",e.Sm="sm",e.Md="md",e.Lg="lg",e.Xl="xl",e.Xxl="xxl"}(Vs||(Vs={}));const Ls={type:c.RxViewComponentType.Container,maxColumnSpan:12,rowWrapOptions:{xs:{id:Vs.Xs,name:"Extra Small (No wrapping)"},sm:{id:Vs.Sm,name:"Small (576 px)"},md:{id:Vs.Md,name:"Medium (768 px)"},lg:{id:Vs.Lg,name:"Large (992 px)"},xl:{id:Vs.Xl,name:"Extra Large (1200 px)"},xxl:{id:Vs.Xxl,name:"Extra Extra Large (1600 px)"}}},Bs=c.RX_VIEW_DEFINITION.styles.map(e=>({text:e.name,data:{value:e.id}}));class $s extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.componentProperties$=this.sandbox.componentProperties$,this.hasChildren$=this.sandbox.getChildComponentGuids().pipe((0,r.map)(e=>!(0,u.isEmpty)(e)))}static getInitialProperties(e){return Object.assign(Object.assign({name:null,rowWrap:Vs.Sm,columnCount:"1"},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.componentProperties$.subscribe(e=>this.validate(e)),this.sandbox.getComponentPropertyValue("columnCount").pipe((0,r.skip)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setLayout(this.getDefaultColumnSpans(Number(e)))}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}validate(e){this.sandbox.setValidationIssues((0,d.validateStandardProps)(e))}getPropertiesByName(e){const t=Object.assign({},e);return t.styles||delete t.styles,t}setContainerLayout(e){this.sandbox.setLayout(e)}getDefaultColumnSpans(e){const t=[],i=Math.floor(Ls.maxColumnSpan/e);return(0,u.times)(e,()=>t.push(i)),t[t.length-1]=Ls.maxColumnSpan%e+i,t}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Container.")}},{name:"columnCount",component:l.SelectFormControlComponent,options:{label:"Number of columns",required:!0,tooltip:new s.Tooltip("Resize container columns on the canvas by dragging the dashed column separator line."),options:(0,u.times)(6,e=>({id:(++e).toString(),name:e.toString()}))}},{name:"rowWrap",component:l.SelectFormControlComponent,options:{label:"Row wrap",sortAlphabetically:!1,options:(0,u.values)(Ls.rowWrapOptions),tooltip:new s.Tooltip("The Row wrap property controls the layout of multi-column containers based on\n                    the width of the view. When the width of the view is decreased to a width less\n                    than the selected Row wrap value, each container column after the first one\n                    wraps onto a new line.")}},(0,d.getHiddenFieldInspectorConfig)(),(0,d.getAvailableOnDevicesInspectorConfig)(),(0,d.getStylesFieldInspectorConfig)(Bs)]}]}}}class Gs{constructor(){this.containerCanvasItemComponent=Ns,this.destroyed$=new o.ReplaySubject(1)}ngAfterViewInit(){this.canvasOutletComponent.containerComponentInstance.columnResize.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.model.setContainerLayout(e)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}Gs.\u0275fac=function(e){return new(e||Gs)},Gs.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Gs,selectors:[["rx-container-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](d.CanvasOutletComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.canvasOutletComponent=e.first)}},inputs:{model:"model"},decls:2,vars:5,consts:[[1,"border","d-block",3,"containerComponent"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("has-children",n["\u0275\u0275pipeBind1"](1,3,t.model.hasChildren$)),n["\u0275\u0275property"]("containerComponent",t.containerCanvasItemComponent))},directives:[d.CanvasOutletComponent],pipes:[h.AsyncPipe],styles:[".has-children[_ngcontent-%COMP%]    >rx-container-canvas-item>as-split>as-split-area{min-height:auto}"]});class zs{}zs.\u0275fac=function(e){return new(e||zs)},zs.\u0275mod=n["\u0275\u0275defineNgModule"]({type:zs,declarations:[Gs,Ns],imports:[h.CommonModule,d.ViewDesignerCanvasModule,x.AngularSplitModule,y.DragDropModule]}),zs.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[vs],imports:[[h.CommonModule,d.ViewDesignerCanvasModule,x.AngularSplitModule,y.DragDropModule]]});const Us={type:c.RxViewComponentType.RecordEditor,fieldTypes:{[a.RX_RECORD_DEFINITION.resourceTypes.character]:c.RxViewComponentType.Character,[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]:c.RxViewComponentType.DateTime,[a.RX_RECORD_DEFINITION.resourceTypes.selection]:c.RxViewComponentType.Selection,[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]:c.RxViewComponentType.Time,[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]:c.RxViewComponentType.Date,[a.RX_RECORD_DEFINITION.resourceTypes.boolean]:c.RxViewComponentType.Boolean,[a.RX_RECORD_DEFINITION.resourceTypes.attachment]:c.RxViewComponentType.Attachment,[a.RX_RECORD_DEFINITION.resourceTypes.integer]:c.RxViewComponentType.Integer,[a.RX_RECORD_DEFINITION.resourceTypes.real]:c.RxViewComponentType.Floating,[a.RX_RECORD_DEFINITION.resourceTypes.decimal]:c.RxViewComponentType.Decimal,[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]:c.RxViewComponentType.LocalizedCharacter}};var qs,Xs,Hs;!function(e){e.Create="CREATE",e.Edit="EDIT",e.BulkEdit="BULK EDIT",e.Temporary="TEMPORARY"}(qs||(qs={})),function(e){e.Read="READ",e.Edit="EDIT"}(Xs||(Xs={}));class Ws{constructor(e,t){this.context=e,this.stringService=t,this.selectedFieldIdsModel={},this.availableFieldGroups=[],this.hideSystemFields=!1,this.isApplyButtonDisabled=!0,this.selectedFieldDefinitionIds=[],this.availableFieldDefinitions=[]}ngOnInit(){const e=this.context.getData();this.availableFieldDefinitions=e.availableFields,this.selectedFieldDefinitionIds=e.selectedFieldIds,this.hideSystemFields=Boolean(e.hideSystemFields),this.availableFieldGroups=this.groupFieldsByFieldOption(this.availableFieldDefinitions),this.selectedFieldIdsModel=this.idsToModel(this.selectedFieldDefinitionIds)}closeModal(){this.context.close(this.modelToIds(this.selectedFieldIdsModel))}search(e){this.availableFieldGroups=this.groupFieldsByFieldOption(this.availableFieldDefinitions).map(t=>Object.assign(Object.assign({},t),{fields:t.fields.filter(t=>this.stringService.caseInsensitiveSearch(t.name,e))})).filter(e=>!(0,u.isEmpty)(e.fields))}select(e){if("all"===e){const e=this.availableFieldDefinitions.filter(e=>e.fieldOption!==a.RecordFieldOption.System||!this.hideSystemFields).map(e=>e.id);this.selectedFieldIdsModel=this.idsToModel(e)}else{const t=this.availableFieldGroups.find(t=>t.groupLabel===e).fields.map(e=>e.id);this.selectedFieldIdsModel=Object.assign(Object.assign({},this.selectedFieldIdsModel),this.idsToModel(t))}this.updateApplyButtonDisabledStatus()}updateApplyButtonDisabledStatus(){this.isApplyButtonDisabled=!(0,u.xor)(this.selectedFieldDefinitionIds,this.modelToIds(this.selectedFieldIdsModel)).length}groupFieldsByFieldOption(e){const t=(0,u.groupBy)(e,"fieldOption"),i=[a.RecordFieldOption.Required,a.RecordFieldOption.Optional];return this.hideSystemFields||i.push(a.RecordFieldOption.System),i.filter(e=>t[e]).map(e=>({groupLabel:`${this.stringService.prettify(e)} fields`,selectAllFieldsInGroupButtonLabel:`Select all ${e.toLowerCase()} fields`,fields:t[e].map(({id:e,name:t})=>({id:e,name:t})).sort((e,t)=>e.name.localeCompare(t.name))}))}trackByLabel(e,t){return t.groupLabel}trackById(e,t){return t.id}idsToModel(e,t=!0){return e.filter(Boolean).reduce((e,i)=>(e[i]=t,e),{})}modelToIds(e){return(0,u.reduce)(e,(e,t,i)=>(t&&e.push(i),e),[])}}Ws.\u0275fac=function(e){return new(e||Ws)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](v.RxStringService))},Ws.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ws,selectors:[["ng-component"]],decls:14,vars:7,consts:[[1,"modal-header","pr-0"],[1,"modal-title","pl-0","mr-auto"],["adapt-button","","type","button","size","small","btn-type","primary","rx-id","apply-button",1,"mr-5",3,"disabled","click"],["adapt-button","","type","button","size","small","btn-type","tertiary","rx-id","x-button",1,"close","my-1",3,"click"],[1,"modal-body"],[1,"body-controls"],["btn-type","tertiary","rx-id","select-all-button",1,"pl-0",3,"click"],[1,"form-group",3,"placeholder","ngModel","ngModelChange"],[1,"rx-record-definition-fields"],["class","rx-record-definition-field-group",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"rx-record-definition-field-group"],[1,"font-weight-bold"],["btn-type","tertiary",1,"py-0","pl-0",3,"click"],["class","checkbox",4,"ngFor","ngForOf","ngForTrackBy"],[1,"checkbox"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"checkbox__item"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"h5",1),n["\u0275\u0275text"](2,"Quick edit fields"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",2),n["\u0275\u0275listener"]("click",function(){return t.closeModal()}),n["\u0275\u0275text"](4," Apply "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"button",3),n["\u0275\u0275listener"]("click",function(){return t.context.dismiss(0)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",4),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275elementStart"](8,"adapt-button",6),n["\u0275\u0275listener"]("click",function(){return t.select("all")}),n["\u0275\u0275text"](9," Select all "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"adapt-rx-textfield",7),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.search(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",8),n["\u0275\u0275template"](12,Y,6,4,"div",9),n["\u0275\u0275template"](13,Q,2,0,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",t.isApplyButtonDisabled),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("placeholder","Search fields")("ngModel",t.searchQuery),n["\u0275\u0275attribute"]("rx-id","search-field"),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.availableFieldGroups)("ngForTrackBy",t.trackByLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===t.availableFieldGroups.length))},directives:[m.AdaptButtonComponent,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,h.NgForOf,h.NgIf,b.CheckboxControlValueAccessor],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.modal-title[_ngcontent-%COMP%]{margin:auto 0}span[rx-id=x-button][_ngcontent-%COMP%]{cursor:pointer;margin:auto 0}span[rx-id=x-button][_ngcontent-%COMP%]:hover{color:#959899}.body-controls[_ngcontent-%COMP%]{display:flex}.body-controls[_ngcontent-%COMP%]   adapt-rx-textfield[_ngcontent-%COMP%]{flex:1}.rx-record-definition-fields[_ngcontent-%COMP%]{padding:10px;border:1px solid #d6d7d8;max-height:300px;overflow:auto}.rx-record-definition-field-group[_ngcontent-%COMP%]{margin-bottom:20px}']});class Ys extends l.InspectorWidgetBase{constructor(e,t,i){super(e),this.adaptModalService=t,this.renderer=i,this.encapsulateClass=!0}focus(){this.renderer.selectRootElement(this.openModalButton.nativeElement,!0).click()}openModal(){(0,o.combineLatest)([this.designerItemModel.childFieldIds$,this.designerItemModel.recordFieldDefinitionItems$,this.designerItemModel.isExtensionView$,this.designerItemModel.associationDefinitionName$]).pipe((0,r.take)(1),(0,r.concatMap)(([e,t,i,n])=>this.adaptModalService.open({content:Ws,data:{selectedFieldIds:e,availableFields:i&&n?t.filter(e=>e.resourceType!==a.RX_RECORD_DEFINITION.resourceTypes.attachment):t,hideSystemFields:this.options.hideSystemFields},size:"sm",hideBackdrop:!1,customClass:"rx-record-editor-field-selector-modal"}))).subscribe(e=>{this.designerItemModel.updateSelectedFieldComponents(e)})}removeField(e){this.designerItemModel.removeComponent([e])}trackByGuid(e,t){return t.guid}}Ys.\u0275fac=function(e){return new(e||Ys)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](n.Renderer2))},Ys.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ys,selectors:[["rx-fields-inspector-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](K,7,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.openModalButton=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-record-definition-fields",t.encapsulateClass)},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:8,consts:[["btn-type","tertiary","rx-id","open-modal-button",1,"px-0","py-0",3,"hidden","click"],["openModalButton",""],[1,"d-icon-plus_circle"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],[1,"mt-2"],["class","rx-field-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-tertiary"],[1,"rx-field-item"],[1,"rx-field-name"],[1,"rx-field-type"],[1,"rx-action-button"],["class","d-icon-cross btn-link","rx-id","delete-button",3,"click",4,"ngIf"],["rx-id","delete-button",1,"d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0,1),n["\u0275\u0275listener"]("click",function(){return t.openModal()}),n["\u0275\u0275element"](2,"span",2),n["\u0275\u0275text"](3," Quick edit fields\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,J,2,0,"span",4),n["\u0275\u0275pipe"](6,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div",5),n["\u0275\u0275template"](8,ee,9,3,"div",6),n["\u0275\u0275pipe"](9,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("hidden",t.options.isDisabled),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngIf",0===n["\u0275\u0275pipeBind1"](6,4,t.designerItemModel.selectedFieldComponents$).length),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](9,6,t.designerItemModel.selectedFieldComponents$))("ngForTrackBy",t.trackByGuid))},directives:[m.AdaptButtonComponent,h.NgIf,h.NgForOf],pipes:[h.AsyncPipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-record-definition-fields .rx-field-item{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;font-size:12px;display:flex;justify-content:space-between;word-break:break-all}.rx-record-definition-fields .rx-field-name{font-weight:var(--font-weight-bold)}.rx-record-definition-fields .rx-field-type{color:#959899}.rx-record-definition-fields .d-icon-cross{cursor:pointer}.rx-record-definition-fields .d-icon-cross:not(:hover){color:#313538}.rx-record-editor-field-selector-modal .modal{justify-content:flex-end}.rx-record-editor-field-selector-modal .modal-scroll-container{padding:15px;min-height:0}.rx-record-editor-field-selector-modal .modal-dialog{margin:auto 0 0 auto;min-height:0;width:350px}\n'],encapsulation:2,changeDetection:0});class Qs{constructor(e,t,i,n,o,r,a,s){this.rxRecordDefinitionCacheService=e,this.rxModalService=t,this.rxFieldDefinitionService=i,this.rxViewDefinitionCacheService=n,this.rxAssociationDefinitionDataPageService=o,this.rxDefinitionNameService=r,this.rxViewComponentRegistryService=a,this.rxViewDefinitionParserService=s}getRecordFieldDefinitionItems(e){return e.fieldDefinitions.map(e=>({id:String(e.id),name:e.name,resourceType:e.resourceType,fieldOption:e.fieldOption,viewComponentType:this.getViewComponentType(e)}))}getViewComponentType(e){let t=Us.fieldTypes[e.resourceType];return e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.character&&(t=e.namedListDefinition||(0,u.inRange)(e.maxLength,1,255)?c.RxViewComponentType.Character:c.RxViewComponentType.Textarea),e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.real&&(t=c.RxViewComponentType.Decimal),t}getComponentProperties(e){const t=["recordDefinitionName","mode","allowEdit"];return(0,u.flow)(e=>(0,u.omit)(e,"showReadOnlyState"),e=>(0,u.omitBy)(e,(e,i)=>!t.includes(i)&&((0,u.isNil)(e)||""===e)))(e)}getRecordDefinition(e){return e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)}validate(e,t,i,n,o=!1,r=!1){const s=[];if(t.recordDefinitionName||s.push(e.createError("Record definition name cannot be blank.","recordDefinitionName")),o&&t.recordDefinitionName&&!t.associationDefinitionName&&s.push(e.createError("Association to use cannot be blank.","associationDefinitionName")),r||t.mode!==qs.Edit||t.recordInstanceId||s.push(e.createError("Record ID cannot be blank.","recordInstanceId")),i&&t.recordDefinitionName&&t.mode===qs.Create){i.resourceType===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType&&s.push(e.createWarning("You have configured a record editor to create join record instances.\n                        Please ensure that one or more processes or rules have been defined to perform the creation\n                        of the join record instance.",void 0,!0));const o=n.map(e=>i.fieldDefinitions.find(t=>t.id===Number(e))).filter(this.rxFieldDefinitionService.isSystemField).map(e=>e.name);if(o.length&&s.push(e.createError(`System fields (${o.join(", ")}) cannot be present when Record editor is in Create mode.`)),!r||t.associationDefinitionName){const t=i.fieldDefinitions.filter(e=>{const t=e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter,i=e.defaultValue||(0,u.isFinite)(e.defaultValue)||t&&!(0,u.isEmpty)(e.defaultValueByLocale);return e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required&&!i}).filter(e=>!n.includes(String(e.id))).map(e=>e.name);t.length&&s.push(e.createError(`Required fields are missing: ${t.join(", ")}.`))}}return s.push(...(0,d.validateStandardProps)(t)),s}getViewDefinition(e){return e?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,r.catchError)(()=>(0,o.of)(null))):(0,o.of)(null)}getInspector(e,t,i,n=[],o=!1,r=[],a=!1,c){const p={inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Record editor.")}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!0,beforeValueChange:(e,t)=>Boolean(e)?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"All view components will be removed from the Record editor. Do you want to continue?"}):Promise.resolve(!0)}},{name:"mode",component:l.GroupButtonFormControlComponent,options:{label:"Mode",tooltip:new s.Tooltip("<b>Record editor modes:</b><br><ul><li>Create mode is for creating new records.</li><li>Edit mode is for updating records.</li><li>Temporary mode is for holding data that does not need to be saved.</li></ul>"),required:!0,items:[{name:"Create",value:qs.Create},{name:"Edit",value:qs.Edit},{name:"Temporary",value:qs.Temporary}],beforeValueChange:c}}]}]},u=p.inspectorSectionConfigs[0].controls;t!==qs.Edit||o||(u.push({name:"recordInstanceId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",tooltip:new s.Tooltip("Enter the record ID of the record that the users need to edit."),isRequired:!0}}),u.push({name:"showReadOnlyState",component:l.SwitchFormControlComponent,options:{label:"Enable read state"}}),i&&u.push({name:"defaultState",component:l.GroupButtonFormControlComponent,options:{label:"Default state",items:[{name:"Read",value:Xs.Read},{name:"Edit",value:Xs.Edit}]}}),u.push({name:"allowEdit",component:l.OptionalExpressionInspectorControlComponent,options:{label:"Allow edit"}})),u.push((0,d.getAvailableOnDevicesInspectorConfig)(),(0,d.getStylesFieldInspectorConfig)()),o&&(u.splice(1,0,{name:"label",component:l.TextFormControlComponent,options:{label:"Display label",tooltip:new s.Tooltip("Enter a Display label for the Record editor. When this view is injected into the view to extend,\n              the Display label will be shown above the Record editor's fields. If a Display label is not defined,\n              the name of the source application or library will be shown above the fields.")}}),e&&u.splice(3,0,{name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{label:"Association to use",options:r,emptyOption:!a,required:a}}));const m={label:"Form contents",controls:[{component:Ys,options:{label:"Selected fields",hideSystemFields:t===qs.Create}}]};return e&&p.inspectorSectionConfigs.push(m),p}getAssociationOptions(e,t){return e&&t?this.getAssociations(e,t).pipe((0,r.map)(t=>t.data.filter(t=>t.nodeAId===e).map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})))):(0,o.of)([])}getAssociations(e,t){return this.rxAssociationDefinitionDataPageService.get({params:{propertySelection:["name","scope","nodeAId"],firstRecordDefinitionName:e,secondRecordDefinitionName:t,cardinality:C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value,nodeAModality:C.RX_ASSOCIATION_DEFINITION.modality.required,shouldCascadeDelete:!0},headers:{"default-bundle-scope":""}})}getTargetRecordEditorProperties(e,t){let i;return e&&t&&(i=this.rxViewDefinitionParserService.findParentComponentDefinition(e,{guid:t},e=>e.type===c.RxViewComponentType.RecordEditor)),(0,u.get)(i,"propertiesByName",{})}confirmSystemFieldRemoval(){return(0,o.from)(this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"System fields will be removed. Do you want to continue?"}))}getSystemFieldModelGuids(e,t){return(0,u.isEmpty)(e)?[]:e.reduce((e,i)=>{const n=t.fieldDefinitions.find(e=>String(e.id)===i.data.fieldId);return this.rxFieldDefinitionService.isSystemField(n)&&e.push(i.guid),e},[])}isFieldComponent(e){return![c.RxViewComponentType.Action,c.RxViewComponentType.ActionButton,c.RxViewComponentType.Association,c.RxViewComponentType.AssociatedRecordField].includes(e.type)&&Boolean(this.rxViewComponentRegistryService.get(e.type).properties.find(e=>"fieldId"===e.name))}}Qs.\u0275fac=function(e){return new(e||Qs)(n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](S.RxModalService),n["\u0275\u0275inject"](a.RxFieldDefinitionService),n["\u0275\u0275inject"](c.RxViewDefinitionCacheService),n["\u0275\u0275inject"](C.RxAssociationDefinitionDataPageService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](c.RxViewDefinitionParserService))},Qs.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Qs,factory:Qs.\u0275fac});class Ks extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService),this.rxViewComponentRegistryService=this.injector.get(c.RxViewComponentRegistryService),this.rxRecordEditorDesignHelpersService=this.injector.get(Qs),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.updateInspector$=new o.Subject,this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.mode$=this.sandbox.getComponentPropertyValue("mode"),this.showReadOnlyState$=this.sandbox.getComponentPropertyValue("showReadOnlyState"),this.targetExtensionContainerGuid$=this.sandbox.getViewPropertyValue("targetExtensionContainerGuid"),this.targetViewDefinitionName$=this.sandbox.getViewPropertyValue("targetViewDefinitionName"),this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>this.rxRecordEditorDesignHelpersService.getRecordDefinition(e)),(0,r.shareReplay)(1)),this.childComponentGuids$=this.sandbox.getChildComponentGuids().pipe((0,r.shareReplay)(1)),this.allChildFieldComponentGuids$=this.sandbox.getChildComponentGuids(e=>this.rxRecordEditorDesignHelpersService.isFieldComponent(e),!0).pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.shareReplay)(1)),this.isExtensionView$=this.targetViewDefinitionName$.pipe((0,r.map)(Boolean),(0,r.shareReplay)(1)),this.childFieldIds$=this.allChildFieldComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.sandbox.getComponentPropertyValue("fieldId",e))).pipe((0,r.map)(u.uniq)):(0,o.of)([])),(0,r.shareReplay)(1)),this.selectedFieldComponents$=this.allChildFieldComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>(0,o.combineLatest)([this.sandbox.getComponent(e).pipe((0,r.take)(1),(0,r.map)(e=>this.rxViewComponentRegistryService.get(e.type).name)),this.sandbox.getComponentPropertyValue("fieldId",e),this.sandbox.getComponentPropertyValue("label",e)]).pipe((0,r.map)(([t,i,n])=>({fieldId:i,label:n||"<No field selected>",componentName:t,guid:e}))))):(0,o.of)([])),(0,r.shareReplay)(1)),this.associationComponentGuids$=this.sandbox.getChildComponentGuids(e=>e.type===c.RxViewComponentType.Association,!0).pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.associationDefinitionName$=this.sandbox.getComponentPropertyValue("associationDefinitionName"),this.hasChildren$=this.childComponentGuids$.pipe((0,r.map)(e=>Boolean(e.length)),(0,r.distinctUntilChanged)(),(0,r.shareReplay)(1)),this.systemFieldComponentGuids$=this.recordDefinition$.pipe((0,r.mergeMap)(e=>e?this.selectedFieldComponents$.pipe((0,r.map)(t=>t.filter(t=>{const i=e.fieldDefinitions.find(e=>String(e.id)===t.fieldId);return this.rxFieldDefinitionService.isSystemField(i)}).map(e=>e.guid)),(0,r.take)(1)):(0,o.of)([]))),this.recordFieldDefinitionItems$=this.recordDefinition$.pipe((0,r.map)(e=>e?this.rxRecordEditorDesignHelpersService.getRecordFieldDefinitionItems(e):[]),(0,r.shareReplay)(1))}static getInitialProperties(e){const t=Object.assign(Object.assign({name:null,label:null,mode:qs.Edit,recordInstanceId:null,recordDefinitionName:null,associationDefinitionName:null,defaultState:e.defaultState||null,allowEdit:"1",styles:null},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e);return Object.assign(Object.assign({},t),{showReadOnlyState:Boolean(t.defaultState),allowEdit:t.mode===qs.Edit?t.allowEdit:null})}rxInit(){const e=(0,o.combineLatest)([this.targetViewDefinitionName$.pipe((0,r.switchMap)(e=>this.rxRecordEditorDesignHelpersService.getViewDefinition(e))),this.targetExtensionContainerGuid$]).pipe((0,r.map)(([e,t])=>this.rxRecordEditorDesignHelpersService.getTargetRecordEditorProperties(e,t)));this.associationOptions$=(0,o.combineLatest)([e,this.recordDefinitionName$]).pipe((0,r.switchMap)(([e,t])=>this.rxRecordEditorDesignHelpersService.getAssociationOptions(e.recordDefinitionName,t))),this.isAssociationRequired$=(0,o.combineLatest)([this.isExtensionView$,this.recordDefinitionName$,e]).pipe((0,r.map)(([e,t,i])=>e&&t!==i.recordDefinitionName)),this.updateInspector$.pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.isExtensionView$,this.associationOptions$,this.isAssociationRequired$,e]).pipe((0,r.first)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{recordDefinitionName:e,mode:t,showReadOnlyState:i},n,o,r,a])=>{n&&!e&&(e=a.recordDefinitionName,t=a.mode,this.sandbox.updateComponentProperties({mode:t,recordDefinitionName:e})),this.updateInspector$.next(this.rxRecordEditorDesignHelpersService.getInspector(e,t,i,[],n,o,r,this._onBeforeModeChange.bind(this)))}),this.mode$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties(e===qs.Create||e===qs.Temporary?Object.assign(Object.assign({},t),{recordInstanceId:null,defaultState:null,allowEdit:null,showReadOnlyState:null}):Object.assign(Object.assign({},t),{defaultState:null,allowEdit:"1",showReadOnlyState:!1}))}),this.showReadOnlyState$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties(Object.assign(Object.assign({},t),{defaultState:e?Xs.Read:null}))}),(0,o.combineLatest)([(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.sandbox.getComponentPropertyValue("mode"),this.showReadOnlyState$]).pipe((0,r.skip)(1)),this.recordFieldDefinitionItems$,this.isExtensionView$,this.associationOptions$,this.isAssociationRequired$]).pipe((0,r.map)(([[e,t,i],n,o,r,a])=>this.rxRecordEditorDesignHelpersService.getInspector(e,t,i,n,o,r,a,this._onBeforeModeChange.bind(this))),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(this.updateInspector$),this.recordDefinitionName$.pipe((0,r.pairwise)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{e&&(this.sandbox.setChildren([]),this.sandbox.updateComponentProperties({associationDefinitionName:null}))}),this.associationOptions$.pipe((0,r.skip)(1),(0,r.filter)(e=>1===e.length),(0,r.withLatestFrom)(this.isAssociationRequired$),(0,r.filter)(([,e])=>e),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([[{id:e}]])=>this.sandbox.updateComponentProperties({associationDefinitionName:e})),(0,o.combineLatest)([this.sandbox.componentProperties$,this.recordDefinition$,this.childFieldIds$,this.isAssociationRequired$,this.isExtensionView$]).pipe((0,r.map)(([e,t,i,n,o])=>this.rxRecordEditorDesignHelpersService.validate(this.sandbox,e,t,i,n,o)),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("name").pipe((0,r.map)(e=>e||null),(0,r.distinctUntilChanged)()),this.recordDefinition$]).pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this._setSettableProperties(e,t),this._setCommonDataDictionary(e,t)})}removeComponent(e){this.sandbox.removeComponents(e)}updateSelectedFieldComponents(e){this.selectedFieldComponents$.pipe((0,r.take)(1),(0,r.mergeMap)(t=>{const i=e.filter(e=>!t.find(t=>t.fieldId===e)),n=i.length?this.recordFieldDefinitionItems$.pipe((0,r.map)(e=>i.map(t=>{const{viewComponentType:i,name:n}=e.find(e=>e.id===t);return{type:i,propertiesByName:{fieldId:t,label:n}}})),(0,r.take)(1)):(0,o.of)([]),a=new Set(e),s=t.filter(e=>e.fieldId).filter(e=>!a.has(e.fieldId)).map(e=>e.guid);return(0,o.forkJoin)([n,(0,o.of)(s)])}),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{e.length&&this.sandbox.addComponent(e),t.length&&this.sandbox.removeComponents(t)})}getPropertiesByName(e){return this.rxRecordEditorDesignHelpersService.getComponentProperties(e)}_dropPredicate(e){var t;return null===(t=e.draggedViewComponentDescriptor.options)||void 0===t?void 0:t.canBeEmbeddedInRecordEditor}_onBeforeModeChange(e,t){return e!==qs.Create&&t===qs.Create?this.systemFieldComponentGuids$.pipe((0,r.mergeMap)(e=>e.length?this.rxRecordEditorDesignHelpersService.confirmSystemFieldRemoval().pipe((0,r.tap)(t=>{t&&this.sandbox.removeComponents(e)})):(0,o.of)(!0)),(0,r.take)(1)).toPromise():Promise.resolve(!0)}dropPredicate(e){var t;return null===(t=e.draggedViewComponentDescriptor.options)||void 0===t?void 0:t.canBeEmbeddedInRecordEditor}_setCommonDataDictionary(e,t){const i=this._getComponentName(e,t);this.sandbox.setCommonDataDictionary(this._getCommonProps(i,t))}_setSettableProperties(e,t){const i=this._getComponentName(e,t);this.sandbox.setSettablePropertiesDataDictionary(i,[{label:"Edit state",expression:this.getExpressionForProperty("editState")},{label:"Read state",expression:this.getExpressionForProperty("readState")},...t?[{label:"Record instance",children:t.fieldDefinitions.map(e=>({label:e.name,expression:this.getExpressionForProperty(`recordInstance.fieldInstances.${e.id}.value`)}))}]:[]])}_getCommonProps(e,t){return{label:e,expression:this.getExpressionForProperty("api"),children:[{label:"Can save",expression:this.getExpressionForProperty("canSave")},{label:"In read state",expression:this.getExpressionForProperty("inReadState")},{label:"Is dirty",expression:this.getExpressionForProperty("isDirty")},{label:"Is valid",expression:this.getExpressionForProperty("isValid")},{label:"Record definition name",expression:this.getExpressionForProperty("recordDefinitionName")},{label:"Record instance",expression:this.getExpressionForProperty("recordInstance"),children:t?this._getRecordInstanceChildProps(t):[]},{label:"Record instance ID",expression:this.getExpressionForProperty("recordInstanceId")}]}}_getRecordInstanceChildProps(e){return(0,u.flow)(e=>(0,u.reject)(e,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.attachment}),e=>(0,u.map)(e,e=>{const t={label:e.name,expression:this.getExpressionForProperty(`recordInstance.fieldInstances.${e.id}.value`)};if(e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection){const i=t.autocompleteOptions=(0,u.map)(e.optionNamesById,(t,i)=>({label:t,expression:this.getExpressionForProperty(`recordDefinition.fieldDefinitionsById[${e.id}].optionsById[${i}].id`)}));t.children=[{label:`${e.name} (Option name)`,expression:this.getExpressionForProperty(`selectionFieldOptionNamesById.${e.id}`)},{label:"Options",children:i}]}return t}))(e.fieldDefinitions)}_getComponentName(e,t){let i=this.sandbox.descriptor.name;const n=t?this.rxDefinitionNameService.getDisplayName(t.name):null;return n&&e?i+=` (${n}: ${e})`:n?i+=` (${n})`:e&&(i+=` (${e})`),i}}class Js{ngOnInit(){this.dropPredicateFn=this.model._dropPredicate.bind(this.model)}}Js.\u0275fac=function(e){return new(e||Js)},Js.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Js,selectors:[["rx-record-editor-design"]],inputs:{model:"model"},decls:3,vars:4,consts:[["type","objects","label","Drop fields from the Palette here or select a Record definition and add fields in the Properties panel.",4,"ngIf"],[3,"dropPredicate"],["type","objects","label","Drop fields from the Palette here or select a Record definition and add fields in the Properties panel."]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,te,1,0,"adapt-empty-state",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275element"](2,"rx-canvas-outlet",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!1===n["\u0275\u0275pipeBind1"](1,2,t.model.hasChildren$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("dropPredicate",t.dropPredicateFn))},directives:[h.NgIf,d.CanvasOutletComponent,m.AdaptEmptyStateComponent],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{border:1px solid #d6d7d8;display:block;position:relative;padding:1rem;min-height:200px}adapt-empty-state[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}rx-canvas-outlet[_ngcontent-%COMP%]    >rx-canvas-item-container>.row>.col>rx-canvas-item-column>.cdk-drop-list{min-height:calc(200px - 1rem * 2)}']});class Zs{}Zs.\u0275fac=function(e){return new(e||Zs)},Zs.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Zs,declarations:[Ws,Ys],imports:[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptRxTextfieldModule],exports:[Ys]}),Zs.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptRxTextfieldModule]]});class el{}el.\u0275fac=function(e){return new(e||el)},el.\u0275mod=n["\u0275\u0275defineNgModule"]({type:el,declarations:[Js],imports:[h.CommonModule,l.RxDefinitionPickerModule,b.FormsModule,l.FormControlsModule,d.ViewDesignerCanvasModule,Zs,m.AdaptEmptyStateModule]}),el.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Qs],imports:[[h.CommonModule,l.RxDefinitionPickerModule,b.FormsModule,l.FormControlsModule,d.ViewDesignerCanvasModule,Zs,m.AdaptEmptyStateModule]]}),function(e){e.One="ONE",e.Many="MANY"}(Hs||(Hs={}));let tl=class{constructor(e,t,i,n,s,l,c){this.options=e,this.rxAssociationInstanceDataPageService=t,this.rxRecordDefinitionCacheService=i,this.rxRecordInstanceUtilsService=n,this.rxRecordInstanceService=s,this.rxJsonParserService=l,this.rxAssociationDefinitionCacheService=c,this.extensions=[],this.existing=[],this.pending=[],this.deleted=[],this.existingSubject$=new o.BehaviorSubject([]),this.existing$=this.existingSubject$.asObservable(),this.pendingSubject$=new o.BehaviorSubject([]),this.pending$=this.pendingSubject$.asObservable(),this.extensionsSubject$=new o.BehaviorSubject([]),this.extensions$=this.extensionsSubject$.asObservable(),this.cardinalityTypes=Hs,this.totalExistingCount=0,this.associationDefinition=null,this.cardinalityType=null,this.remainingAssociatedRecordCount=0,this.getExistingAssociationInstances$=(0,o.defer)(()=>this.getExistingAssociationInstances()).pipe((0,r.share)()),(0,u.assign)(this.options,{canLoadAssociations:Boolean(this.options.associatedRecordInstanceId),pageSize:10,startIndex:0}),this.extensions=this.options.associationInstances.extensions,this.existing=this.options.associationInstances.existing,this.pending=this.options.associationInstances.pending,this.deleted=this.options.associationInstances.deleted,this.options.fieldIds=this.options.fieldIds||[],this.mergeFieldIds([a.RX_RECORD_DEFINITION.coreFieldIds.id])}initialize(){return this.isDataLoading=!0,this.initialize$||(this.initialize$=(0,o.forkJoin)([this.rxAssociationDefinitionCacheService.getAssociationDefinition(this.options.associationDefinitionName),this.rxRecordDefinitionCacheService.getRecordDefinition(this.options.recordDefinitionName)]).pipe((0,r.tap)(([e,t])=>{this.isDataLoading=!1,this.associationDefinition=e,this.recordDefinition=t,this.cardinalityType=this.getCardinalityType(this.associationDefinition.cardinality,this.options.associatedRecordNodeSide),this.options.allFieldIds&&(this.options.fieldIds=(0,u.map)(this.recordDefinition.fieldDefinitions,"id"),this.mergeFieldIds([a.RX_RECORD_DEFINITION.coreFieldIds.id]))}))),this.initialize$}loadExistingAssociations(){return this.options.canLoadAssociations?this.initialize().pipe((0,r.switchMap)(()=>this.getExistingAssociationInstances$.pipe((0,r.tap)(e=>{(0,u.forEach)(e.data,e=>{this.addToExisting(this.rxRecordInstanceUtilsService.convertFromDataPageRowToPlainRecordInstance(e))}),this.options.startIndex+=e.data.length,this.remainingAssociatedRecordCount=e.totalSize-this.options.startIndex})))):(0,o.of)([])}loadExtensions(){return this.initialize().pipe((0,r.switchMap)(()=>this.getExtensionRecordInstance().pipe((0,r.tap)(e=>{e&&this.addExtension(e)}))))}addToExisting(e){const t=this.isInExisting(e.id);t?this.isDefaultNodeRoleUsed(t)&&!this.isDefaultNodeRoleUsed(this.options.rolesConfig)&&((0,u.remove)(this.existing,t),e.rolesConfig=this.options.rolesConfig,this.existing.push(e),this.existingSubject$.next(this.existing)):(this.options.rolesConfig&&!e.rolesConfig&&(e.rolesConfig=this.options.rolesConfig),this.existing.push(e),this.existingSubject$.next(this.existing))}isDefaultNodeRoleUsed(e){return this.rxJsonParserService.tryParseJson((0,u.get)(e,"rolesConfig.useDefaultRoles",!0))}addToPending(e,t){if(!(0,u.isEmpty)(e)&&this.associationDefinition)if(this.cardinalityType===Hs.Many){const i=(0,u.filter)(e,e=>!this.isInExisting(e.id)&&!this.isInDeleted(e.id)&&!this.isInPending(e.id));t&&(0,u.forEach)(i,e=>{e.rolesConfig=t}),Array.prototype.push.apply(this.pending,i),this.pendingSubject$.next(this.pending);const n=(0,u.remove)(this.deleted,t=>(0,u.find)(e,{id:t.id}));(0,u.forEach)(n,e=>{this.addToExisting(e)})}else if(this.cardinalityType===Hs.One){const t=e[0];switch(!0){case(0,u.isEmpty)(this.existing)&&(0,u.isEmpty)(this.deleted):this.pending.length=0,this.pending.push(t);break;case(0,u.isEmpty)(this.existing):const e=this.deleted[0];this.pending.length=0,e.id===t.id?this.addToExisting(this.deleted.splice(0,1)[0]):this.pending.push(t);break;case(0,u.isEmpty)(this.deleted):const i=this.existing[0];i.id!==t.id&&(this.deleteFromExisting(i.id),this.pending.length=0,this.pending.push(t))}this.pendingSubject$.next(this.pending)}}addExtension(e){this.extensions.push(e),this.extensionsSubject$.next(this.extensions)}restore(){this.extensionsSubject$.next(this.extensions),(0,u.forEach)(this.deleted,e=>{this.addToExisting(e)}),this.deleted.splice(0,this.deleted.length),this.deleteAllPending()}reset(){this.existing.splice(0,this.existing.length),this.pending.splice(0,this.pending.length),this.deleted.splice(0,this.deleted.length),this.totalExistingCount=0,this.options.startIndex=0}delete(e){this.isInExisting(e)?this.deleteFromExisting(e):this.isInPending(e)&&this.deleteFromPending(e)}deleteAllExisting(){const e=(0,u.map)(this.existing,"id");(0,u.forEach)(e,e=>{this.deleteFromExisting(e)})}deleteAllPending(){this.pending.splice(0,this.pending.length),this.pendingSubject$.next(this.pending)}mergeFieldIds(e){e&&(this.options.fieldIds=(0,u.uniq)(this.options.fieldIds.concat(e)))}extendOptions(e){e.fieldIds&&this.mergeFieldIds(e.fieldIds),this.options.allFieldIds=e.allFieldIds}getCardinalityType(e,t){let i;switch(!0){case e===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value:i=Hs.One;break;case e===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value:i=t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value?Hs.Many:Hs.One;break;case e===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value:i=Hs.Many}return i}getExtensionRecordInstance(e=!0){const t=e?a.RX_RECORD_DEFINITION.coreFieldIds.id:this.options.fieldIds.join(",");return this.rxAssociationInstanceDataPageService.post({params:{associationDefinition:this.options.associationDefinitionName,nodeToQuery:this.options.associatedRecordNodeSide,associatedRecordInstanceId:this.options.associatedRecordInstanceId,propertySelection:t}}).pipe((0,r.map)(e=>e.data[0]),(0,r.switchMap)(t=>t&&e?this.rxRecordInstanceService.get(this.options.recordDefinitionName,t[a.RX_RECORD_DEFINITION.coreFieldIds.id]):t&&!e?(0,o.of)(this.rxRecordInstanceService.createInstanceFromDataPageRow(t,this.recordDefinition)):(0,o.of)(null)))}getExistingAssociationInstances(){const e={pageSize:this.options.pageSize,startIndex:this.options.startIndex,associationDefinition:this.options.associationDefinitionName,nodeToQuery:this.options.associatedRecordNodeSide,associatedRecordInstanceId:this.options.associatedRecordInstanceId,propertySelection:this.options.fieldIds.join(","),useDefaultRoleNames:!1,nodeARoleName:"",nodeBRoleName:""};return this.options.rolesConfig.useDefaultRoles?(e.useDefaultRoleNames=this.options.rolesConfig.useDefaultRoles,delete e.nodeARoleName,delete e.nodeBRoleName):(delete e.useDefaultRoleNames,e.nodeARoleName=this.options.rolesConfig.nodeARole||"",e.nodeBRoleName=this.options.rolesConfig.nodeBRole||""),this.rxAssociationInstanceDataPageService.post({params:e})}isInExisting(e){return(0,u.find)(this.existing,{id:e})}isInPending(e){return(0,u.find)(this.pending,{id:e})}getFieldIds(){return(0,u.clone)(this.options.fieldIds)}isInDeleted(e){return(0,u.find)(this.deleted,{id:e})}deleteFromExisting(e){const t=(0,u.remove)(this.existing,{id:e})[0];this.deleted.push(t),this.existingSubject$.next(this.existing)}deleteFromPending(e){(0,u.remove)(this.pending,{id:e}),this.pendingSubject$.next(this.pending)}destroy(){this.existingSubject$.complete(),this.pendingSubject$.complete(),this.extensionsSubject$.complete()}};tl=(0,w.__decorate)([(0,w.__param)(0,(0,n.Optional)()),(0,w.__metadata)("design:paramtypes",[Object,C.RxAssociationInstanceDataPageService,a.RxRecordDefinitionCacheService,a.RxRecordInstanceUtilsService,a.RxRecordInstanceService,v.RxJsonParserService,C.RxAssociationDefinitionCacheService])],tl);class il{getComponentDefinitionsAsFlatList(e){return(0,u.flattenDeep)((0,u.transform)(e,(e,t)=>{t.resourceType!==c.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent?e.push(t):t.propertiesByName.recordDefinitionName||e.push(...this.getComponentDefinitionsAsFlatList(t.componentDefinitions))}))}getSelectionFieldOptionNames(e,t){const i={};return(0,u.filter)(e.fieldDefinitions,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.selection}).forEach(n=>{const o=(0,u.get)(e.localizableStringsByFieldId,n.id),r=t.fieldInstances[n.id];if(r)if((0,u.isObject)(n.optionNamesById)&&o&&(0,u.isEmpty)(o)){const e=n.optionNamesById[r.value];i[n.id]=o[e]}else i[n.id]=n.optionNamesById[r.value];else i[n.id]=""}),i}}il.\u0275fac=function(e){return new(e||il)},il.\u0275prov=n["\u0275\u0275defineInjectable"]({token:il,factory:il.\u0275fac});class nl extends b.FormControl{constructor(){super(...arguments),this._touchedSubject=new o.BehaviorSubject(this.touched),this.touched$=this._touchedSubject.asObservable().pipe((0,r.distinctUntilChanged)())}markAsTouched(e){super.markAsTouched(e),this._touchedSubject.next(this.touched)}markAsUntouched(e){super.markAsUntouched(e),this._touchedSubject.next(this.touched)}}const ol="%",rl="baseFormGroup";class al extends b.FormGroup{constructor(e,t){super({}),this.rxGuidService=e,this.rxRecordInstanceUtilsService=t}addFieldControl(e,t,i=null,n,o){const r=new nl("",n,o),a=this.controls[rl];return r.setValue(i),a?a.addControl(this.getControlId(e,t),r):this.addControl(rl,new b.FormGroup({[this.getControlId(e,t)]:r})),r}addAssociatedFieldControl(e,t,i,n=null,o,r){const a=i.join(ol),s=this.controls[a],l=new nl(n,o,r);return s?s.addControl(this.getControlId(e,t),l):this.addControl(a,new b.FormGroup({[this.getControlId(e,t)]:l})),l}resetFieldControls(e,t){const i=this.controls[t?t.join(ol):rl];e?i.reset(this.prepareFormGroupState(e,i)):i.reset()}syncFormControlValues(e,t,i,n={}){this.getControlsBoundToRecordField(String(e),i).forEach(e=>{!1!==n.markAsDirty&&e.markAsDirty(),!1!==n.markAsTouched&&e.markAsTouched(),this.rxRecordInstanceUtilsService.isFieldValueEqual(e.value,t)||e.setValue(t)})}getFieldIds(e){const t=this.controls[e?e.join(ol):rl];return t?(0,u.reduce)(t.controls,(e,t,i)=>{const n=this.getFieldId(i);return t instanceof b.FormControl&&!(0,u.includes)(e,n)&&e.push(n),e},[]):[]}clearAndReset(){(0,u.forOwn)(this.controls,(e,t)=>this.removeControl(t)),this.reset()}markInvalidControlsAsTouched(){(0,u.forEach)(this.controls,e=>{(0,u.forEach)(e.controls,e=>{e.invalid&&e.markAsTouched()})})}getFormControl(e,t,i){let n,o;return o=this.controls[i?i.join(ol):rl],o&&(n=o.get(this.getControlId(e,t))),n}getControlsBoundToRecordField(e,t){const i=this.controls[t||rl];return(0,u.reduce)(i.controls,(t,i,n)=>(i instanceof b.FormControl&&this.getFieldId(n)===e&&t.push(i),t),[])}getControlId(e,t){return`${e}:${t||this.rxGuidService.generate()}`}getFieldId(e){return e.split(":")[0]}prepareFormGroupState(e,t){return(0,u.reduce)(t.controls,(t,i,n)=>(t[n]=e[this.getFieldId(n)],t),{})}}al.\u0275fac=function(e){return new(e||al)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](a.RxRecordInstanceUtilsService))},al.\u0275prov=n["\u0275\u0275defineInjectable"]({token:al,factory:al.\u0275fac});class sl extends f.BaseViewComponent{constructor(e,t,i,n,a,s,l,c,d,p,u,m,h){super(),this.rxRecordInstanceService=e,this.rxRecordInstanceUpdateService=t,this.translateService=i,this.rxGlobalEventsService=n,this.rxNotificationService=a,this.rxRecordDefinitionService=s,this.rxRecordEditorUtilsService=l,this.rxRecordInstanceUtilsService=c,this.rxStringService=d,this.rxLogService=p,this.rxUtilityModalsService=u,this.rxAssociationManagerServiceFactory=h,this.api={refresh:this.refresh.bind(this),isDirty:this.isDirty.bind(this),isReady:this.isReady.bind(this),isValid:this.isValid.bind(this),notifyComponentReady:this.notifyComponentReady.bind(this),save:this.save.bind(this),setProperty:this.setProperty.bind(this),setFieldValue:this.setFieldValue.bind(this),getFieldValue:this.getFieldValue.bind(this),getAssociationManager:this.getAssociationManager.bind(this),getFieldControl:this.getFieldControl.bind(this),downloadAttachment:this.downloadAttachment.bind(this),getAttachmentDownloadUrl:this.getAttachmentDownloadUrl.bind(this),getPermissionType:this.getPermissionType.bind(this),getFieldInstanceProp:this.getFieldInstanceProp.bind(this),getRecordEditorMode:this.getRecordEditorMode.bind(this),setFieldInstanceProp:this.setFieldInstanceProp.bind(this),markAsDirty:this.markAsDirty.bind(this)},this.state={recordInstanceId:"",recordDefinitionName:"",recordInstance:null,recordDefinition:null,isDataLoading:!1,isDirty:!1,isSaving:!1,canSave:!1,mode:null,isReadOnlyStateAvailable:!1,defaultState:null,currentState:Xs.Edit,form:null,selectionFieldOptionNamesById:{},allowEdit:null},this.recordInstanceChangedSubject=new o.Subject,this.notReadyComponentIds={},this.associationManagers={},this.associationInstances={},this.recordInstanceChanged$=this.recordInstanceChangedSubject.asObservable(),this.state.form=m,this.state.form.statusChanges.pipe((0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.notifyPropertyChanged("isValid",this.isValid())})}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.notifyPropertyChanged("isDirty",this.state.isDirty),this.notifyPropertyChanged("canSave",this.state.canSave);const e=this.config.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.tap)(e=>Object.assign(this.state,e)));e.pipe((0,r.take)(1)).subscribe(e=>{e.mode===qs.Create?this.notifyPropertyChanged("inReadState",!1):e.mode===qs.Temporary?(this.notifyPropertyChanged("inReadState",!1),this.updateCanSaveProperty()):this.state.defaultState&&(this.state.isReadOnlyStateAvailable=!0)}),(0,o.merge)(e.pipe((0,r.takeWhile)(e=>e.mode===qs.Edit)),e.pipe((0,r.takeWhile)(e=>(0,u.includes)([qs.Create,qs.BulkEdit,qs.Temporary],e.mode)),(0,r.take)(1))).pipe((0,r.map)(e=>e.recordInstanceId||null),(0,r.distinctUntilChanged)(),(0,r.switchMap)(()=>this.initializeRecordInstance().pipe((0,r.catchError)(e=>(this.rxRecordInstanceUtilsService.isNoRecordFoundError(e)&&this.runtimeViewModelApi.cancel(!0).subscribe(),(0,o.throwError)(e))))),(0,r.takeUntil)(this.destroyed$)).subscribe(),e.pipe((0,r.takeWhile)(e=>e.mode===qs.Edit),(0,r.pluck)("allowEdit"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{const t=e?this.state.defaultState||Xs.Edit:Xs.Read;this.setRecordEditorState(t)})}downloadAttachment(e){this.isInEditMode()&&!this.isNewAttachment(e)&&this.rxRecordInstanceService.downloadAttachment(this.state.recordDefinitionName,e,this.state.recordInstanceId,this.state.recordInstance.fieldInstances[e].value)}getAttachmentDownloadUrl(e){let t="";return this.isInEditMode()&&!this.isNewAttachment(e)&&(t=this.rxRecordInstanceService.getAttachmentDownloadUrl(this.state.recordDefinitionName,e,this.state.recordInstanceId)),t}getAssociationManager(e){const t=(0,u.values)(e.rolesConfig).join("_"),i=(0,u.compact)([e.associationDefinitionName,t,e.associatedRecordNodeSide]).join(":");let n=this.associationManagers[i];return n?n.extendOptions(e):(e.associationInstances=this.getAssociationInstances(e.associationDefinitionName,e.associatedRecordNodeSide,t),n=this.rxAssociationManagerServiceFactory(e),(0,o.merge)(n.pending$,n.existing$).pipe((0,r.filter)(()=>0!==n.deleted.length||0!==n.pending.length),(0,r.take)(1)).subscribe(()=>this.markAsDirty()),n.extensions$.pipe((0,r.filter)(e=>!(0,u.isEmpty)(e)),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.syncRecordInstanceWithForm(e.associatedRecordPath),this.notifyPropertyChanged("recordInstance",this.state.recordInstance)}),this.associationManagers[i]=n),n}markAsDirty(){this.state.form.markAsTouched(),this.state.form.markAsDirty(),this.updateIsDirtyProperty(),this.updateCanSaveProperty()}refresh(){return this.isInEditMode()&&this.state.currentState===Xs.Read?this.initializeRecordInstance().pipe((0,r.catchError)(e=>this.handleNoRecordFoundError(e))):o.EMPTY}isDirty(){return!this.isInTemporaryMode()&&this.state.form.dirty}isReady(){return(0,u.isEmpty)(this.notReadyComponentIds)}notifyComponentReady(e,t){t?delete this.notReadyComponentIds[e]:this.notReadyComponentIds[e]=!0}setProperty(e,t){const i=e.match(/^recordInstance\.fieldInstances\.(\d+)\.value$/),n="readState"===e&&!t||"editState"===e&&t;if("readState"===e&&t||"editState"===e&&!t){if(this.state.currentState!==Xs.Read)return this.cancel()}else if(n)this.state.currentState!==Xs.Edit&&this.switchToEditState();else{if(!i)return(0,o.throwError)(`Record editor: property ${e} is not settable.`);{const e=Number(i[1]);this.setFieldValue(e,t)}}}setFieldValue(e,t,i,n={}){this.state.recordInstance&&this.state.recordInstance.getRecordInstance(i)&&this.state.recordInstance.isFieldValueChanged(e,t,i)&&(this.state.recordInstance.setFieldValue(e,t,i),this.state.form.syncFormControlValues(String(e),this.state.recordInstance.getFieldValue(e,i),i&&i.join(ol),n),this.updateSelectionFieldOptionNames(this.state.recordInstance),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.updateIsDirtyProperty(),this.updateCanSaveProperty())}getFieldValue(e,t){return this.state.recordInstance&&this.state.recordInstance.getFieldValue(e,t)}save(e=!1){if(this.isInTemporaryMode())return this.rxLogService.debug("Record Editor: skip saving record instance in Temporary mode."),o.EMPTY;if(this.isValid()){if(this.canSave()){let t;return this.state.isSaving=!0,this.updateCanSaveProperty(),this.isInCreateMode()?t=this.rxRecordInstanceService.create(this.state.recordInstance).pipe((0,r.tap)(t=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message")),this.state.recordInstanceId||((0,u.set)(this.state.recordInstance,`fieldInstances[${a.RX_RECORD_DEFINITION.coreFieldIds.id}].value`,t.id),this.state.recordInstance.id=t.id,this.state.recordInstanceId=t.id),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.notifyPropertyChanged("recordInstanceId",this.state.recordInstanceId),e||this.rxGlobalEventsService.viewActionsCompleted$.pipe((0,r.take)(1),(0,r.switchMap)(()=>this.initializeRecordInstance()),(0,r.takeUntil)(this.destroyed$)).subscribe()}),(0,r.switchMapTo)(o.EMPTY)):this.isInEditMode()&&(t=this.rxRecordInstanceUpdateService.execute(this.state.recordInstance).pipe((0,r.tap)(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.common.saved-successfully.message"))}),(0,r.switchMap)(()=>this.initializeRecordInstance().pipe((0,r.catchError)(e=>this.handleNoRecordFoundError(e)),(0,r.tap)({complete:()=>{this.state.isReadOnlyStateAvailable&&this.setRecordEditorState(Xs.Read)}}))))),t.pipe((0,r.tap)({complete:()=>{this.state.form.markAsPristine()}}),(0,r.finalize)(()=>{this.state.isSaving=!1,this.updateCanSaveProperty(),this.updateIsDirtyProperty()}))}return this.rxLogService.debug("Record Editor: cannot save unmodified record instance."),(0,o.throwError)(null)}return this.state.form.markInvalidControlsAsTouched(),this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.validation-error.message")),(0,o.throwError)(null)}getFieldControl(e,t,i=[],n){const a=this.state.form.getFormControl(String(e),t,n);if(a)return a;const s=this.state.recordInstance?this.state.recordInstance.getFieldValue(e,n):null,l=this.getFieldInstanceControlValidator(e,n);let c;return(i=Array.isArray(i)?i:[i]).push(l),c=n?this.state.form.addAssociatedFieldControl(String(e),t,n,s,i):this.state.form.addFieldControl(String(e),t,s,i),c.valueChanges.pipe((0,r.distinctUntilChanged)(this.rxRecordInstanceUtilsService.isFieldValueEqual),(0,r.observeOn)(o.asyncScheduler),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.setFieldValue(e,c.value,n,{markAsDirty:c.dirty,markAsTouched:!1})}),c}getPermissionType(e,t){const i=this.state.recordInstance?this.state.recordInstance.getFieldInstance(e,t):null;return i?(0,u.get)(i,"permissionType")||a.RX_RECORD_DEFINITION.fieldPermissionTypes.change:null}getFieldInstanceProp(e,t,i){return this.state.recordInstance&&this.state.recordInstance.getFieldProp(e,t,i)}getRecordEditorMode(){return this.state.mode}setFieldInstanceProp(e,t,i,n){this.state.recordInstance&&this.state.recordInstance.setFieldProp(e,t,i,n)}isValid(){return this.state.form.valid}switchToEditState(){this.setRecordEditorState(Xs.Edit)}isEditStateAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Read&&Boolean(this.state.recordInstanceId)&&Boolean(this.state.allowEdit)}isSaveButtonAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Edit}isSaveButtonDisabled(){return!this.canSave()}isCancelButtonAvailable(){return this.state.isReadOnlyStateAvailable&&this.state.currentState===Xs.Edit&&this.isInEditMode()}cancel(){if(this.state.isReadOnlyStateAvailable&&this.state.recordInstance){if(this.isDirty())return(0,o.defer)(()=>(0,o.from)(this.rxUtilityModalsService.confirmUnsavedChanges())).pipe((0,r.switchMap)(e=>e?(this.restoreRecordEditor(),this.setRecordEditorState(Xs.Read),o.EMPTY):(0,o.throwError)(null)));this.setRecordEditorState(Xs.Read)}return o.EMPTY}canSave(){return!!this.isInTemporaryMode()||!this.state.isSaving&&(this.isInCreateMode()||this.isDirty())}isConfigValid(){return!this.isInEditMode()||this.rxStringService.isNonEmptyString(this.state.recordInstanceId)}onSaveClick(){this.save().pipe((0,r.take)(1),(0,r.catchError)(e=>null===e?(0,o.of)(e):(0,o.throwError)(e))).subscribe()}onCancelClick(){this.cancel().subscribe()}initializeRecordInstance(){let e=o.EMPTY;return this.isConfigValid()?(this.state.isDataLoading=!0,e=this.getRecordInstance().pipe((0,r.tap)(e=>{this.setRecordInstance(e),this.setRecordDefinition(e.recordDefinition),this.updateSelectionFieldOptionNames(e)}),(0,r.switchMapTo)(o.EMPTY),(0,r.catchError)(e=>(o.asapScheduler.schedule(()=>{this.setRecordInstance(null),this.setRecordDefinition(null)}),(0,o.throwError)(e))),(0,r.finalize)(()=>{this.state.isDataLoading=!1}))):(""===this.state.recordInstanceId||(0,u.isNil)(this.state.recordInstanceId)||this.rxNotificationService.addErrorMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.invalid-record-instance-id.message")),this.state.recordInstance&&(this.setRecordInstance(null),this.setRecordDefinition(null))),e}handleNoRecordFoundError(e){const t=this.rxRecordInstanceUtilsService.isNoRecordFoundError(e);return t&&(this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.no-access-to-record.message")),this.runtimeViewModelApi.cancel(!0).subscribe()),(0,o.throwError)(t?null:e)}updateIsDirtyProperty(){const e=this.isDirty();this.state.isDirty!==e&&(this.state.isDirty=e,this.notifyPropertyChanged("isDirty",e))}updateCanSaveProperty(){const e=this.canSave();this.state.canSave!==e&&(this.state.canSave=e,this.notifyPropertyChanged("canSave",e))}setRecordInstance(e){(0,u.forEach)(this.associationManagers,e=>e.destroy()),this.associationInstances={},this.associationManagers={},e&&!e.associationInstances&&(e.associationInstances={},this.associationInstances=e.associationInstances),this.state.recordInstance=e,this.state.recordInstanceId=e&&e.id,e?this.syncRecordInstanceWithForm():this.state.form.clearAndReset(),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.notifyPropertyChanged("recordInstanceId",this.state.recordInstanceId),this.updateIsDirtyProperty(),this.updateCanSaveProperty(),e&&this.recordInstanceChangedSubject.next()}getFieldInstanceControlValidator(e,t){return i=>this.state.recordInstance&&this.state.recordInstance.validateSingleField(e,i.value,t)}setRecordDefinition(e){e&&(this.isInBulkEditMode()&&(e=this.rxRecordDefinitionService.setFieldDefinitionsToOptional(e)),e.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(e)),this.state.recordDefinition=e,this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}getRecordInstance(){return this.isInCreateMode()||this.isInTemporaryMode()?this.state.recordInstance?(this.state.recordInstance=this.state.recordInstance.getOriginalRecordInstance(),(0,o.of)(this.state.recordInstance)):this.rxRecordInstanceService.getNew(this.state.recordDefinitionName):this.isInBulkEditMode()?this.rxRecordInstanceService.getEmpty(this.state.recordDefinitionName):this.isInEditMode()?this.rxRecordInstanceService.get(this.state.recordDefinitionName,this.state.recordInstanceId):void 0}getAssociationInstances(e,t,i){const n=(0,u.compact)([t,i]).join(":");let o=(0,u.get)(this.associationInstances,[e,n]);return o||(o={existing:[],pending:[],deleted:[],extensions:[]},(0,u.set)(this.associationInstances,[e,n],o)),o}setRecordEditorState(e){this.state.currentState=e,this.notifyPropertyChanged("inReadState",e===Xs.Read)}isInCreateMode(){return this.state.mode===qs.Create}isInBulkEditMode(){return this.state.mode===qs.BulkEdit}isInEditMode(){return this.state.mode===qs.Edit}isInTemporaryMode(){return this.state.mode===qs.Temporary}isNewAttachment(e){return Boolean(this.state.recordInstance.fieldInstances[e].file)}updateSelectionFieldOptionNames(e){if(e&&(0,u.get)(this.state.recordDefinition,"fieldDefinitions")){const t=this.rxRecordEditorUtilsService.getSelectionFieldOptionNames(this.state.recordDefinition,e);(0,u.isEqual)(this.state.selectionFieldOptionNamesById,t)||this.notifyPropertyChanged("selectionFieldOptionNamesById",t)}}syncRecordInstanceWithForm(e){const t=this.state.form.getFieldIds(e);if(!(0,u.isEmpty)(t)){const i=t.reduce((t,i)=>(t[i]=this.state.recordInstance.getFieldValue(Number(i),e),t),{});this.state.form.resetFieldControls(i,e)}}restoreRecordEditor(){this.state.recordInstance.revertFieldInstances(),(0,u.forEach)(this.associationManagers,e=>e.restore()),this.syncRecordInstanceWithForm(),this.notifyPropertyChanged("recordInstance",this.state.recordInstance),this.updateIsDirtyProperty(),this.updateCanSaveProperty()}}sl.\u0275fac=function(e){return new(e||sl)(n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUpdateService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxGlobalEventsService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](il),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService),n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](S.RxUtilityModalsService),n["\u0275\u0275directiveInject"](al),n["\u0275\u0275directiveInject"](tl))},sl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sl,selectors:[["rx-record-editor"]],inputs:{config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275ProvidersFeature"]([al]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["class","loader-container",4,"ngIf"],[4,"ngIf"],["class","clearfix",4,"ngIf"],[1,"loader-container"],[1,"loader-inline","mr-1"],[1,"clearfix"],[1,"d-flex","justify-content-end"],["class","py-0 mb-1","adapt-button","","size","small","btn-type","tertiary",3,"click",4,"ngIf"],["class","mr-1 mt-3","rx-id","save-button","adapt-button","","btn-type","primary","size","small",3,"disabled","click",4,"ngIf"],["class","mt-3","rx-id","cancel-button","adapt-button","","btn-type","secondary","size","small",3,"click",4,"ngIf"],["adapt-button","","size","small","btn-type","tertiary",1,"py-0","mb-1",3,"click"],["rx-id","save-button","adapt-button","","btn-type","primary","size","small",1,"mr-1","mt-3",3,"disabled","click"],["rx-id","cancel-button","adapt-button","","btn-type","secondary","size","small",1,"mt-3",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ie,5,3,"div",0),n["\u0275\u0275template"](1,ne,3,3,"div",1),n["\u0275\u0275template"](2,se,6,3,"div",2)),2&e&&(n["\u0275\u0275property"]("ngIf",t.state.isDataLoading&&!t.state.recordInstance),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!(t.state.isDataLoading||t.isConfigValid()&&t.state.recordInstance)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.state.recordInstance&&t.isConfigValid()))},directives:[h.NgIf,f.RuntimeViewCanvasOutletComponent,m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8;padding:1rem;position:relative}']});class ll{constructor(e){this.viewDefinitionParserService=e}adaptDefinition(e){const t=(0,u.get)(e,"propertiesByName");t.mode===qs.Edit&&(0,u.isUndefined)(t.allowEdit)&&(t.allowEdit="1"),this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type!==c.RxViewComponentType.ActionButton&&(e.componentDefinition.propertiesByName.hasOwnProperty("fieldId")||e.componentDefinition.type===c.RxViewComponentType.Association)).map(e=>e.componentDefinition).forEach(t=>{Object.assign(t.propertiesByName,{api:`\${view.components.${e.guid}.api}`,inReadState:`\${view.components.${e.guid}.inReadState}`,recordDefinition:`\${view.components.${e.guid}.recordDefinition}`,recordInstance:`\${view.components.${e.guid}.recordInstance}`})})}}function cl(e,t,i,n,o,r){return function(a){return new tl(a,e,t,i,n,o,r)}}ll.\u0275fac=function(e){return new(e||ll)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService))},ll.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ll,factory:ll.\u0275fac});class dl{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.recordEditorComponentDefinitionAdapterService=t,e.registerRuntimeAdapter(c.RxViewComponentType.RecordEditor,this.recordEditorComponentDefinitionAdapterService)}}dl.\u0275fac=function(e){return new(e||dl)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](ll))},dl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:dl,declarations:[sl],imports:[h.CommonModule,f.RuntimeViewCanvasModule,b.ReactiveFormsModule,m.AdaptButtonModule,S.RxModalModule,p.TranslateModule,m.AdaptAlertModule],exports:[sl]}),dl.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ll,il,{provide:tl,useFactory:cl,deps:[C.RxAssociationInstanceDataPageService,a.RxRecordDefinitionCacheService,a.RxRecordInstanceUtilsService,a.RxRecordInstanceService,v.RxJsonParserService,C.RxAssociationDefinitionCacheService]}],imports:[[h.CommonModule,f.RuntimeViewCanvasModule,b.ReactiveFormsModule,m.AdaptButtonModule,S.RxModalModule,p.TranslateModule,m.AdaptAlertModule.forRoot()]]});class pl{constructor(){this.resourceTypeFieldTypeMap={},this.initResourceTypeFieldTypeMap()}getFieldTypeByFieldDefinition(e){return(0,u.isFunction)(this.resourceTypeFieldTypeMap[e.resourceType])?this.resourceTypeFieldTypeMap[e.resourceType](e):this.resourceTypeFieldTypeMap[e.resourceType]}initResourceTypeFieldTypeMap(){this.resourceTypeFieldTypeMap=Object.assign(Object.assign({},Us.fieldTypes),{[a.RX_RECORD_DEFINITION.resourceTypes.character]:e=>e.namedListDefinition||(0,u.inRange)(e.maxLength,1,255)?c.RxViewComponentType.Character:c.RxViewComponentType.Textarea})}}pl.\u0275fac=function(e){return new(e||pl)},pl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:pl,factory:pl.\u0275fac,providedIn:"root"});const ul={actions:{associate:"associate",createAndAssociate:"createAndAssociate"},componentTypes:{associationFilter:"rx-association-filter",associatedRecordField:"rx-associated-record-field"}};var ml;!function(e){e.Dropdown="dropdown",e.Views="views"}(ml||(ml={}));class hl{ngOnInit(){this.maxFieldValueLength=this.config.maxFieldValueLength||200}isEditableState(){return this.config.state===Xs.Edit}}hl.\u0275fac=function(e){return new(e||hl)},hl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hl,selectors:[["rx-record-preview-card"]],inputs:{config:"config"},decls:4,vars:2,consts:[[1,"rx-record-preview-card","d-flex","align-items-start","justify-content-between","w-100"],["tabindex","0",1,"rx-card-fields","d-flex","flex-column","list-unstyled","focusable","mb-0"],["class","d-flex rx-card-field",4,"ngFor","ngForOf"],["class","btn btn-link d-icon-cross p-0","adapt-button","","size","small","btn-type","tertiary",3,"click",4,"ngIf"],[1,"d-flex","rx-card-field"],["class","rx-card-field-label",4,"ngIf"],[4,"ngIf"],[1,"rx-card-field-value","px-1",3,"ngClass"],[1,"rx-card-field-label"],["adapt-button","","size","small","btn-type","tertiary",1,"btn","btn-link","d-icon-cross","p-0",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"ul",1),n["\u0275\u0275template"](2,pe,5,6,"li",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,ue,2,3,"button",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.config.fields),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isEditableState()))},directives:[h.NgForOf,h.NgIf,h.NgClass,m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex}.rx-record-preview-card[_ngcontent-%COMP%]{flex:1}.rx-card-field[_ngcontent-%COMP%]{flex:1;line-height:20px}.rx-card-field[_ngcontent-%COMP%]:not(:first-child){color:#959899}.rx-card-fields[_ngcontent-%COMP%]{flex:1;white-space:nowrap;min-width:0}.rx-card-field-label[_ngcontent-%COMP%]{flex-shrink:0;max-width:30%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.rx-card-field-value[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden}']});class fl extends f.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.datePipe=e,this.rxAssociationDefinitionService=t,this.rxAssociationInstanceDataPageService=i,this.rxRecordDefinitionInheritanceDataPageService=n,this.rxRecordInstanceDataPageService=o,this.rxRecordInstanceUtilsService=r,this.isDisabled=!1,this.api={associate:e=>{this.associationManager.addToPending(e,this.extractRolesConfig())}},this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.optionLoaderFunc=this.getAssociationsOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.existingPreviewConfigurations=[],this.pendingPreviewConfigurations=[],this.selectedOptions=[],this.pendingPageSize=10,this.currentPendingCount=10,this.totalPendingCount=0,this.associationCandidateRecordInstances=[],this.fieldDefinitions={},this.fieldId=null,this.fields=[],this.inReadState=!1,this.label=null,this.recordDefinition=null,this.recordDefinitionName=null,this.useDefaultRoles=null,this.nodeARole=null,this.nodeBRole=null,this.formControl=new b.FormControl("",null),this.isHidden=!1}ngOnInit(){super.ngOnInit();const e=this.config.pipe((0,r.filter)(e=>Boolean(e.api&&e.recordDefinition)),(0,r.takeUntil)(this.destroyed$));e.pipe((0,r.take)(1)).subscribe(e=>{this.onConfigInitialized(e),this.onConfigUpdated(e)}),e.pipe((0,r.skip)(1)).subscribe(this.onConfigUpdated.bind(this)),this.notifyPropertyChanged("api",this.api),this.previewRolesConfig=this.extractRolesConfig()}ngAfterViewInit(){this.editingMode===ml.Dropdown&&this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(),(0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.updateSelectedOptions()})}onConfigInitialized(e){this.associationDefinitionName=e.associationDefinitionName,this.associatedRecordNodeSide=e.associatedRecordNodeSide,this.editingMode=e.editingMode||ml.Views,this.fieldId=e.fieldId,this.fields=e.fields,this.recordDefinition=e.recordDefinition,this.recordDefinitionName=e.recordDefinitionName,this.recordEditorApi=e.api,this.state=e.state,this.useDefaultRoles=e.useDefaultRoles,this.nodeARole=e.nodeARole,this.nodeBRole=e.nodeBRole,this.fieldId&&(this.fieldDefinition=e.recordDefinition.fieldDefinitions.find(e=>e.id===Number(this.fieldId)))}onConfigUpdated(e){var t;const i=Boolean(e.inReadState),n=Boolean(e.disabled)||this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view;let s=!1;this.isHidden=Boolean(e.hidden),this.areActionsAvailable=!i&&this.editingMode===ml.Views,this.isDisabled!==n&&(this.isDisabled=n,s=!0),this.inReadState!==i&&(this.inReadState=i,s=!0),s&&this.existingPreviewConfigurations.length&&this.updatePreviewCardConfigState(),this.label=(0,u.isUndefined)(e.label)?null!==(t=this.fieldDefinition.name)&&void 0!==t?t:"":e.label,this.selectWithPaginationComponent&&this.associationFilter&&(0,u.get)(e,"associationFilter[0]")&&this.associationFilter.recordInstanceId!==e.associationFilter[0].recordInstanceId&&(this.recordEditorApi.isReady()&&this.deleteAllExisting(),this.deleteAllPending(),this.selectWithPaginationComponent.resetLoadedOptions(),this.associationCandidateRecordInstances=[],this.associationFilterNodeSide||this.rxAssociationDefinitionService.get(this.associationFilter.associationDefinitionName).pipe((0,r.switchMap)(e=>{if(e.nodeAId===this.recordDefinitionName)this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeA;else{if(e.nodeBId!==this.recordDefinitionName)return this.rxRecordDefinitionInheritanceDataPageService.get({params:{recorddefinition:this.recordDefinitionName}}).pipe((0,r.tap)(t=>{const i=t.data;if((0,u.includes)(i,e.nodeAId))this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeA;else{if(!(0,u.includes)(i,e.nodeBId))throw new Error("No matches for association definition node side within inheritance ancestors.");this.associatedRecordNodeSide=C.RxAssociatedRecordNodeSide.NodeB}}));this.associationFilterNodeSide=C.RxAssociatedRecordNodeSide.NodeB}return o.EMPTY})).subscribe()),this.associationFilter=(0,u.head)(e.associationFilter),e.recordInstance&&this.recordInstance!==e.recordInstance&&(this.recordInstance=e.recordInstance,this.isDisabled=!0,this.notifyPropertyChanged("isDisabled",this.isDisabled),this.recordEditorApi.notifyComponentReady(this.guid,!1),this.associationManager=this.getAssociationManager(),this.associationManager.initialize().pipe((0,r.delay)(0),(0,r.switchMap)(()=>this.associationManager.loadExistingAssociations()),(0,r.tap)(()=>{this.isDisabled=Boolean(e.disabled)||this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view,this.notifyPropertyChanged("isDisabled",this.isDisabled),this.areActionsAvailable=!this.inReadState&&this.editingMode===ml.Views,this.editingMode===ml.Views&&(this.fieldDefinitions=(0,u.transform)(this.fields,(e,t)=>{const i=(0,u.find)(this.associationManager.recordDefinition.fieldDefinitions,{id:Number(t.fieldId)});e[i.id]=i},{})),this.associationManager.existing$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.onAssociationsChanged(e,"existingPreviewConfigurations"),this.updateTotalExistingAssociationsCount()}),this.associationManager.pending$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.onAssociationsChanged(e,"pendingPreviewConfigurations"),this.totalPendingCount=this.pendingPreviewConfigurations.length}),(0,o.combineLatest)([this.associationManager.pending$,this.associationManager.existing$]).pipe((0,r.take)(1)).subscribe(()=>{this.recordEditorApi.notifyComponentReady(this.guid,!0)})})).subscribe())}getAssociationManager(){const e=this.fieldId?[this.fieldId,a.RX_RECORD_DEFINITION.coreFieldIds.id]:(0,u.map)(this.fields,"fieldId");return this.recordEditorApi.getAssociationManager({associationDefinitionName:this.associationDefinitionName,associatedRecordNodeSide:this.associatedRecordNodeSide||C.RX_ASSOCIATION_DEFINITION.roles.second.value,associatedRecordInstanceId:this.recordInstance.id,recordDefinitionName:this.recordDefinitionName,fieldIds:e,rolesConfig:this.extractRolesConfig()})}getAssociationsOptionPage(e,t,i){const n={pageSize:t,startIndex:e,recorddefinition:this.recordDefinitionName,propertySelection:this.associationManager.getFieldIds()};let s;return this.associationFilter?this.associationFilter.recordInstanceId&&(n.associationDefinition=this.associationFilter.associationDefinitionName,n.associatedRecordInstanceId=this.associationFilter.recordInstanceId,n.nodeToQuery=this.associationFilterNodeSide,s=this.rxAssociationInstanceDataPageService):(n.sortBy=this.fieldId,i&&(n.queryExpression=`('${this.fieldId}' LIKE "%${this.rxRecordInstanceUtilsService.escapeTextWildcards(i)}%")`),s=this.rxRecordInstanceDataPageService),s?s.post({params:n}).pipe((0,r.map)(e=>(this.associationCandidateRecordInstances.push(...e.data),{totalSize:e.totalSize,options:e.data.map(e=>({displayValue:e[this.fieldId]||"",value:e[a.RX_RECORD_DEFINITION.coreFieldIds.id]}))}))):(0,o.of)({options:[],totalSize:0})}deleteAllExisting(){this.associationManager.deleteAllExisting()}deleteAllPending(){this.associationManager.deleteAllPending()}loadExistingAssociations(){this.associationManager.loadExistingAssociations().pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.updateTotalExistingAssociationsCount())}isReadModeEnabled(){return this.inReadState}isEditModeEnabled(){return!this.inReadState}getAssociatedValue(){return(0,u.get)(this,"selectedOptions[0].displayValue")}viewToModelValueAdapter(e){return e.map(e=>e.value).join(";")}modelToViewValueAdapter(e){return e?(0,u.castArray)(this.selectedOptions):[]}resetDropdownSelection(){this.selectedOptions=[]}updatePreviewCardConfigState(){(0,u.forEach)(this.existingPreviewConfigurations,e=>{e.state=this.getStateForPreviewConfiguration()})}updateSelectedOptions(){if(this.formControl.value&&!(0,u.isNil)(this.formControl.value)){const e={id:this.formControl.value,fieldInstances:null},t=(0,u.find)(this.associationCandidateRecordInstances,function(t){return t[a.RX_RECORD_DEFINITION.coreFieldIds.id]===e.id});e.fieldInstances=(0,u.transform)(t,function(e,t,i){e[i]={value:t}},{}),this.associationManager.addToPending([e],null)}else this.deleteAllExisting(),this.deleteAllPending()}buildPreviewConfig(e,t,i){return{id:e.id,state:i,onDelete:e=>{this.associationManager.delete(e)},fields:(0,u.map)(t,t=>{const i=this.fieldDefinitions[t.fieldId],n=e.fieldInstances[t.fieldId];let o;return n&&(o=n.value),i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType&&(o=i.optionNamesById[o]),(i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType||i.resourceType===a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType&&(0,u.isString)(o))&&(o=this.datePipe.transform(o,"mediumDate")),{label:t.label,value:o||"<unknown>",index:t.index,fieldId:t.fieldId}})}}showPendingAssociations(){this.currentPendingCount+=this.pendingPageSize}getPendingPreviewConfigurations(){return this.pendingPreviewConfigurations.slice(0,this.currentPendingCount)}extractRolesConfig(){return{useDefaultRoles:this.useDefaultRoles,nodeARole:this.nodeARole,nodeBRole:this.nodeBRole}}updateTotalExistingAssociationsCount(){this.associationManager.totalExistingCount=(this.associationManager.remainingAssociatedRecordCount||0)+this.existingPreviewConfigurations.length}getStateForPreviewConfiguration(){return this.areActionsAvailable&&!this.isDisabled?Xs.Edit:Xs.Read}getFirstAssociationRecord(){return this.associationManager.existing[0]||this.associationManager.pending[0]||{}}onAssociationsChanged(e,t){var i;const n=this.getFirstAssociationRecord();if(this.notifyPropertyChanged("firstAssociatedRecord",{id:n.id||""}),this.editingMode===ml.Views){const i=e.filter(e=>(0,u.every)(this.previewRolesConfig,u.isEmpty)||(0,u.isEqual)(this.previewRolesConfig,e.rolesConfig));this[t]=this.rebuildPreviewConfigurations(i)}else this.editingMode===ml.Dropdown&&(n.id?this.selectedOptions=[{displayValue:null===(i=n.fieldInstances[this.fieldId])||void 0===i?void 0:i.value,value:n.id}]:this.resetDropdownSelection(),this.formControl.setValue(n.id))}rebuildPreviewConfigurations(e){const t=this.getStateForPreviewConfiguration();return(0,u.map)(e,e=>this.buildPreviewConfig(e,this.fields,t))}}fl.\u0275fac=function(e){return new(e||fl)(n["\u0275\u0275directiveInject"](h.DatePipe),n["\u0275\u0275directiveInject"](C.RxAssociationDefinitionService),n["\u0275\u0275directiveInject"](C.RxAssociationInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionInheritanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService))},fl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fl,selectors:[["rx-association"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-field-disabled",t.isDisabled)},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:2,consts:[[3,"label","value",4,"ngIf"],[3,"ngSwitch",4,"ngIf"],[3,"label","value"],[3,"ngSwitch"],[3,"ngClass",4,"ngSwitchCase"],[4,"ngSwitchCase"],[3,"ngClass"],[3,"label",4,"ngIf"],[4,"ngIf"],[3,"label"],[4,"ngSwitchDefault"],["class","list-group",4,"ngIf"],[1,"list-group"],[1,"list-group-item",3,"config"],["class","list-group-item",3,"config",4,"ngFor","ngForOf"],["adapt-button","","size","small","btn-type","tertiary","type","button",3,"click",4,"ngIf"],["adapt-button","","size","small","btn-type","tertiary","type","button",3,"click"],["class","form-group",4,"ngIf"],["class","form-group mt-3",4,"ngIf"],[1,"form-group"],[1,"d-flex","justify-content-end","pb-1"],[1,"preview-count"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","py-0",3,"hidden","click"],[1,"form-group","mt-3"],[1,"d-flex","justify-content-between"],[1,"m-0"],[1,"d-flex","pb-1"],[3,"formControl","readonly","label","modelToViewValueAdapter","optionLoader","viewToModelValueAdapter"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,me,1,2,"rx-read-only-field",0),n["\u0275\u0275template"](1,ke,3,3,"div",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.isHidden&&t.isReadModeEnabled()&&(0===t.existingPreviewConfigurations.length||"dropdown"===t.editingMode)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isHidden))},directives:[h.NgIf,S.ReadOnlyFieldComponent,h.NgSwitch,h.NgSwitchCase,h.NgClass,m.AdaptRxControlLabelComponent,f.RuntimeViewCanvasOutletComponent,h.NgSwitchDefault,hl,h.NgForOf,m.AdaptButtonComponent,l.RxSelectWithPaginationComponent,b.NgControlStatus,b.FormControlDirective],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}[_nghost-%COMP%]  rx-runtime-view-canvas-item-container{display:flex}[_nghost-%COMP%]  .rx-runtime-view-canvas-item-margin{margin-bottom:0}[_nghost-%COMP%]  rx-runtime-view-canvas-item+rx-runtime-view-canvas-item{margin-left:5px}[_nghost-%COMP%]  .read-state .form-control-label{font-weight:var(--font-weight-normal)}.rx-group-title[_ngcontent-%COMP%]{font-size:.8125rem;color:#959899;display:flex;align-items:center}.rx-preview-existing-head[_ngcontent-%COMP%]{margin-top:-30px}.rx-preview-count[_ngcontent-%COMP%]{font-size:.8125rem;color:#959899;vertical-align:middle}']});class gl{constructor(e){this.rxViewDefinitionParserService=e}adaptDefinition(e,t){const i=this.getTargetRecordEditorComponentDefinition(t,e),n=e.componentDefinitions.filter(e=>e.type===c.RxViewComponentType.ActionButton),o=(0,u.sortBy)(n,e=>e.propertiesByName.action===ul.actions.associate?0:1);e.propertiesByName.state=i.propertiesByName.mode,e.propertiesByName.useDefaultRoles="true"===e.propertiesByName.useDefaultRoles,e.propertiesByName.fields=(0,u.flow)(e=>(0,u.filter)(e,{type:ul.componentTypes.associatedRecordField}),e=>(0,u.map)(e,e=>({fieldId:e.propertiesByName.fieldId,label:e.propertiesByName.label,index:Number(e.propertiesByName.index)})),e=>(0,u.sortBy)(e,"index"))(e.componentDefinitions),e.layout=JSON.stringify({outlets:[{name:"DEFAULT",columns:[{children:o.map(e=>e.guid)}]}]}),e.componentDefinitions.filter(e=>e.type===c.RxViewComponentType.ActionButton).forEach(t=>{t.propertiesByName.disabled=e.propertiesByName.disabled+" OR ${view.components."+e.guid+".isDisabled}"})}getTargetRecordEditorComponentDefinition(e,t){return this.rxViewDefinitionParserService.findParentComponentDefinition(e,t,e=>e.type===c.RxViewComponentType.RecordEditor)}}gl.\u0275fac=function(e){return new(e||gl)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService))},gl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:gl,factory:gl.\u0275fac});class vl{constructor(e,t){this.rxAssociationDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(c.RxViewComponentType.Association,this.rxAssociationDefinitionAdapterService)}}vl.\u0275fac=function(e){return new(e||vl)(n["\u0275\u0275inject"](gl),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},vl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:vl,declarations:[fl,hl],imports:[m.AdaptButtonModule,m.AdaptRxFormControlModule,h.CommonModule,b.FormsModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,f.RuntimeViewCanvasModule,l.RxSelectWithPaginationModule,p.TranslateModule]}),vl.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[h.DatePipe,gl],imports:[[m.AdaptButtonModule,m.AdaptRxFormControlModule,h.CommonModule,b.FormsModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,f.RuntimeViewCanvasModule,l.RxSelectWithPaginationModule,p.TranslateModule]]});class xl extends S.RxModalClass{constructor(e,t,i,n){super(i,n),this.rxStringService=e,this.rxGuidService=t,this.activeModalRef=i,this.injector=n,this.availableFieldTreeNodes=[],this.canSave=!1,this.selectedFields=[],this.treeWrap=m.TreeWrap.WrapAll,this.config=this.activeModalRef.getData()}isDirty(){return this.canSave}ngOnInit(){super.ngOnInit(),this.fieldLabelsMap=(0,u.transform)(this.config.fields,(e,t)=>{e[t.id]=t.name},{}),this.availableFieldTreeNodes=this.config.fields.map(e=>({data:e,label:e.name})).sort((e,t)=>e.label.localeCompare(t.label)),this.selectedFields=(0,u.map)(this.config.selectedFields,e=>{const t=this.config.fields.find(t=>t.id===Number(e.data.fieldId));return Object.assign(Object.assign({},e),{labelText:e.data.label,indexOrder:Number(e.data.index),descriptor:t,isOpen:e===this.config.fieldToEdit})}),this.refreshFieldDescriptorsList()}addField(e){this.canSave=!0,this.selectedFields.push({guid:this.rxGuidService.generate(),data:{fieldId:String(e.id),label:e.name,index:String(this.selectedFields.length)},descriptor:e,labelText:e.name,indexOrder:this.selectedFields.length,isOpen:!0}),this.refreshFieldDescriptorsList()}onSelectedFieldsListDrop(e){this.addField(e.item.data)}onSave(){const e=this.selectedFields.map(e=>({guid:e.guid,type:"rx-associated-record-field",data:{fieldId:e.data.fieldId,index:String(e.indexOrder),label:e.labelText}}));this.activeModalRef.close(e)}onRemove(e){this.canSave=!0,(0,u.pull)(this.selectedFields,e),this.refreshFieldDescriptorsList()}onMoveUp(e,t){this.canSave=!0;const i=this.selectedFields[t-1];i&&(i.indexOrder++,e.indexOrder--,this.sortFields())}onMoveDown(e,t){this.canSave=!0;const i=this.selectedFields[t+1];i&&(i.indexOrder--,e.indexOrder++,this.sortFields())}toggleOpen(e){this.selectedFields.forEach(t=>t.isOpen=e)}sortFields(){this.selectedFields=(0,u.sortBy)(this.selectedFields,e=>e.indexOrder)}refreshFieldDescriptorsList(){const e=this.selectedFields.map(e=>String(e.data.fieldId));this.filteredFieldDescriptors=this.config.fields.filter(t=>!(0,u.includes)(e,String(t.id))).sort((e,t)=>e.name.localeCompare(t.name))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}xl.\u0275fac=function(e){return new(e||xl)(n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},xl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xl,selectors:[["rx-association-record-field-selector-editor-dialog"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:14,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"mt-2"],["class","btn-group",4,"ngIf"],["id","selected-fields","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled",4,"ngFor","ngForOf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],[1,"card-block"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngIf","ngIfElse"],["adaptTreeEmptyStateTemplate",""],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["filter","true",3,"value","wrap"],["adaptTreeNodeTemplate",""],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData",4,"ngIf"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData"],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["label","No fields found","type","search",1,"w-100"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragDisabled"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["label","Label",1,"text-aria-resize",3,"ngModel","ngModelChange"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["label","No fields selected","type","config",1,"w-100"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,Be,9,2,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"h4",4),n["\u0275\u0275text"](6,"Selected fileds"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,$e,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",6),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedFieldsListDrop(e)}),n["\u0275\u0275elementStart"](9,"adapt-accordion",7),n["\u0275\u0275template"](10,ze,9,6,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Ue,2,0,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",10),n["\u0275\u0275template"](13,qe,3,4,"button",11),n["\u0275\u0275elementStart"](14,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.config.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",t.selectedFields.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.selectedFields),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.selectedFields.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](16,10,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,12,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,y.CdkDropList,m.AdaptAccordionComponent,h.NgForOf,m.AdaptButtonComponent,m.AdaptTreeComponent,m.AdaptTreeNodeTemplateDirective,y.CdkDrag,m.AdaptEmptyStateComponent,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}']});class yl extends l.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.renderer=t,this.selectedFields=[]}focus(){this.renderer.selectRootElement(this.openModalButton.nativeElement,!0).click()}openFieldSelector(e){this.rxModalService.openModal({title:this.options.label,data:{fields:this.options.fields,selectedFields:this.value,fieldToEdit:e,isReadOnly:this.isDisabled},content:xl}).then(e=>{this.value=e}).catch(u.noop)}onSetValue(){this.updateSortedFieldList()}onWriteValue(e){this.updateSortedFieldList()}removeField(e){this.value=this.value.filter(t=>t.guid!==e)}editField(e){this.openFieldSelector(e)}updateSortedFieldList(){this.selectedFields=(0,u.sortBy)(this.value,e=>Number(e.data.index)).map(e=>Object.assign(Object.assign({},e),{label:this.options.fields.find(t=>t.id===Number(e.data.fieldId)).name}))}}yl.\u0275fac=function(e){return new(e||yl)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](n.Renderer2))},yl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yl,selectors:[["rx-association-record-field-selector-form-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](K,7,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.openModalButton=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:yl,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["adapt-button","","type","button","btn-type","tertiary",1,"px-0","py-0",3,"disabled","click"],["openModalButton",""],["name","plus_circle",1,"mr-1"],["class","list-unstyled mb-0 mt-2",4,"ngIf"],[1,"list-unstyled","mb-0","mt-2"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-pencil","p-1",3,"disabled","click"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-cross_adapt","p-1",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0,1),n["\u0275\u0275listener"]("click",function(){return t.openFieldSelector()}),n["\u0275\u0275element"](2,"adapt-icon",2),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,He,2,1,"ul",3)),2&e&&(n["\u0275\u0275property"]("disabled",t.isDisabled),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",t.options.label,"\n"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.selectedFields.length>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,h.NgIf,h.NgForOf],encapsulation:2});class bl{}bl.\u0275fac=function(e){return new(e||bl)},bl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:bl,declarations:[xl],imports:[h.CommonModule,m.AdaptRxSearchModule,m.AdaptButtonModule,m.AdaptAccordionModule,b.FormsModule,m.AdaptRxTextfieldModule,y.DragDropModule,m.AdaptTreeModule,m.AdaptEmptyStateModule,p.TranslateModule],exports:[xl]}),bl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxSearchModule,m.AdaptButtonModule,m.AdaptAccordionModule,b.FormsModule,m.AdaptRxTextfieldModule,y.DragDropModule,m.AdaptTreeModule,m.AdaptEmptyStateModule,p.TranslateModule]]});class Cl{}Cl.\u0275fac=function(e){return new(e||Cl)},Cl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cl,declarations:[yl],imports:[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptIconModule,bl],exports:[yl]}),Cl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptIconModule,bl]]});class Sl{constructor(e,t,i,n){this.rxRecordDefinitionCacheService=e,this.rxAssociationDefinitionDataPageService=t,this.rxGuidService=i,this.rxDefinitionNameService=n}getDropdownModeInspectorControls(e,t){return[{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field to display",options:e?e.filter(e=>[a.RX_RECORD_DEFINITION.resourceTypes.character,a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter].includes(e.resourceType)).map(e=>({id:String(e.id),name:e.name})):[],emptyOption:!0,required:!0}},{name:"filterByAssociation",component:l.SelectFormControlComponent,options:{label:"Filter by association",options:t?t.map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})):[],emptyOption:!0}}]}getDisplayedFieldsControl(e){return{name:"displayedFields",component:yl,options:{label:"Show/Hide fields",fields:e,required:!0}}}getRecordIdControl(){return{name:"recordId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",isRequired:!0}}}getUseDefaultRolesControl(){return{name:"useDefaultRoles",component:l.SwitchFormControlComponent,options:{label:"Use default roles"}}}getNodeABRoleControls(){return[{name:"nodeARole",component:l.ExpressionInspectorControlComponent,options:{label:"First record role"}},{name:"nodeBRole",component:l.ExpressionInspectorControlComponent,options:{label:"Second record role"}}]}getViewModeInspectorControls(){return[{name:"viewDefinitionNameForSelect",component:l.RxDefinitionPickerComponent,options:{label:"View for selecting associated records",definitionType:l.RxDefinitionPickerType.View,required:!0}},{name:"viewDefinitionNameForCreate",component:l.RxDefinitionPickerComponent,options:{label:"View for creating associated records",definitionType:l.RxDefinitionPickerType.View}}]}getInitialInspectorControls(e){return[{name:"label",component:l.TextFormControlComponent,options:{label:"Display label"}},(0,d.getDisabledFieldInspectorConfig)(),...(0,d.getStandardPropsInspectorConfigs)()]}getInitialProperties(){return Object.assign(Object.assign({associatedRecordNodeSide:"",associationDefinitionName:"",displayedFields:[],editingMode:ml.Views,fieldId:null,filterByAssociation:"",label:null,nodeARole:"",nodeBRole:"",recordDefinition:"",recordDefinitionName:"",recordId:"",recordInstance:"",useDefaultRoles:!0,viewDefinitionNameForCreate:"",viewDefinitionNameForSelect:""},c.RX_DISABLED_PROP_DEFAULT_VALUE),c.RX_STANDARD_PROPS_DEFAULT_VALUES)}getActionButtonDefinition(e,t,i){return{type:c.RxViewComponentType.ActionButton,guid:this.rxGuidService.generate(),propertiesByName:{labelKey:t===ul.actions.associate?"com.bmc.arsys.rx.client.view-components.record-editor.association.button.associate.label":"com.bmc.arsys.rx.client.view-components.record-editor.association.button.create-new.label",style:"secondary",action:t},children:[{guid:this.rxGuidService.generate(),type:c.RxViewComponentType.Action,propertiesByName:{name:"rxAvcAssociate",associationViewComponent:`\${view.components.${i}.api}`,viewDefinitionName:t===ul.actions.associate?e.viewDefinitionNameForSelect:e.viewDefinitionNameForCreate}}],insertIndex:t===ul.actions.associate?0:1}}isCardinalityOne(e,t){const i=t.find(t=>t.name===e.associationDefinitionName);return Boolean(i&&(i.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value||i.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value&&e.associatedRecordNodeSide===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value))}getAvailableAssociations(e,t){const i={headers:{"default-bundle-scope":""},params:{firstRecordDefinitionName:e,secondRecordDefinitionName:t,requireDependent:!0}};return this.rxAssociationDefinitionDataPageService.get(i).pipe((0,r.map)(e=>e.data))}getRecordDefinition(e){return this.rxRecordDefinitionCacheService.getRecordDefinition(e)}getFieldsInChildComponentsWithNames(e,t){return e.reduce((e,i)=>{const n=t.find(e=>e.id===Number(i.data.fieldId));return e.push(Object.assign(Object.assign({},i),{data:Object.assign(Object.assign({},i.data),{name:n?n.name:i.data.label})})),e},[])}cleanEditingModeDependentData(e){e.editingMode===ml.Dropdown?(e.viewDefinitionNameForSelect=null,e.viewDefinitionNameForCreate=null,e.displayedFields=[]):(e.filterByAssociation=null,e.recordId=null,e.fieldId=null)}getNodeSideOptions(e){return e.nodeAId===e.nodeBId?[{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,name:e.nodeAName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,name:e.nodeBName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}]:[]}resetRolesData(e){e.useDefaultRoles=!1,e.nodeARole=null,e.nodeBRole=null}validate(e,t,i,n){const o=[];return t.recordDefinitionName||o.push(e.createError("Record definition to associate cannot be blank.","recordDefinitionName")),t.recordDefinitionName&&!t.associationDefinitionName&&o.push(e.createError("Association to Use cannot be blank.","associationDefinitionName")),t.associationDefinitionName&&(i.nodeAId!==i.nodeBId||t.associatedRecordNodeSide||o.push(e.createError("Associated Record Node Side cannot be blank.","fieldId"))),t.editingMode!==ml.Views&&t.editingMode?t.editingMode===ml.Dropdown&&(t.filterByAssociation&&!n.recordId&&o.push(e.createError("Record ID cannot be blank.","recordId")),t.fieldId||o.push(e.createError("Field to display cannot be blank.","fieldId"))):(t.recordDefinitionName&&0===n.displayedFields.length&&o.push(e.createError("Preview Fields cannot be empty.","displayedFields")),t.viewDefinitionNameForSelect||o.push(e.createError("View for selecting associated records cannot be blank.","viewDefinitionNameForSelect"))),o.push(...(0,d.validateStandardProps)(t)),o}}Sl.\u0275fac=function(e){return new(e||Sl)(n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](C.RxAssociationDefinitionDataPageService),n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](s.RxDefinitionNameService))},Sl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Sl,factory:Sl.\u0275fac});class wl extends d.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxAssociationDefinitionCacheService=this.injector.get(C.RxAssociationDefinitionCacheService),this.rxGuidService=this.injector.get(v.RxGuidService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.associationDesignHelperService=this.injector.get(Sl),this.updateInspector$=new o.Subject,this.childComponents$=this.sandbox.getChildComponentsTree(),this.associationChildComponentsData$=this.getChildComponentsData(),this.associationDefinitions=[],this.associationDefinitionFilters=[],this.recordDefinitionFields=[],this.associatedRecordNodeSide=[],this.isManyToManyAssociation=!1,this.editingMode$=this.sandbox.getComponentPropertyValue("editingMode"),this.label$=this.sandbox.getComponentPropertyValue("label"),this.updateInspector$.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateInspectorConfig(e)});const i=t.getComponentPropertyValue("recordDefinitionName").pipe((0,r.switchMap)(e=>e?this.updateRecordDefinitionFields(e):(0,o.of)([])));this.displayedFields$=(0,o.combineLatest)([this.sandbox.getChildComponents(e=>e.type===ul.componentTypes.associatedRecordField),i]).pipe((0,r.map)(([e,t])=>this.associationDesignHelperService.getFieldsInChildComponentsWithNames(e,t))),this.recordEditorGuid$=this.sandbox.getParentComponentGuid(c.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.otherAssociationRecordEditorComponentGuids$=this.recordEditorGuid$.pipe((0,r.map)(e=>this.sandbox.getComponentModel(e)),(0,r.switchMap)(e=>e.associationComponentGuids$.pipe((0,r.map)(e=>e.filter(e=>e!==this.sandbox.guid)))),(0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.recordDefinitionNameFromHostRecordEditor$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.recordDefinitionNameFromHostRecordEditor$.pipe((0,r.switchMap)(e=>e?(0,o.combineLatest)([this.sandbox.componentProperties$,this.associationChildComponentsData$]).pipe((0,r.switchMap)(([t,i])=>{const n=e?this.generateInitialUpdateParameters(t):[];return(n.length>0?(0,o.combineLatest)(n):(0,o.of)(null)).pipe((0,r.map)(()=>({componentProperties:Object.assign(Object.assign({},i),t),recordDefinitionRecordEditorName:e})))}),(0,r.take)(1)):(0,o.of)({componentProperties:null,recordDefinitionRecordEditorName:null})),(0,r.withLatestFrom)(this.recordEditorGuid$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{componentProperties:e,recordDefinitionRecordEditorName:t},i])=>{const n=this.associationDesignHelperService.getInitialProperties(),o=Object.assign(Object.assign(Object.assign({},n),e),{useDefaultRoles:Boolean("true"===(null==e?void 0:e.useDefaultRoles))});this.recordEditorGuid=i,this.sandbox.updateComponentProperties(o),this.updateInspector$.next(this.getInspectorConfig(o,t,i))});const n=this.childComponents$.pipe((0,r.map)(e=>e.map(e=>e.guid)));this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.skip)(1),(0,r.withLatestFrom)(n),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties({recordDefinitionName:e,label:null,associationDefinitionName:null,associatedRecordNodeSide:null,editingMode:ml.Views,viewDefinitionNameForSelect:null,viewDefinitionNameForCreate:null,fieldId:null,useDefaultRoles:!1,nodeARole:null,nodeBRole:null,displayedFields:[],filterByAssociation:null,recordId:null}),this.sandbox.removeComponents(t)}),this.sandbox.getComponentPropertyValue("recordDefinitionName").pipe((0,r.skip)(1),(0,r.concatMapTo)(this.sandbox.componentProperties$),(0,r.concatMap)(e=>(0,o.combineLatest)([this.updateAssociationDefinitionsOptions(e.recordDefinitionName),this.updateRecordDefinitionFields(e.recordDefinitionName),this.updateAssociationDefinitionsFilterOptions(e.recordDefinitionName),this.updateAssociationNodeSideOptions(e.associationDefinitionName),this.updatePreviousDropdownFieldDefinition(e.recordDefinitionName,e.fieldId)]).pipe((0,r.take)(1),(0,r.mapTo)(e))),(0,r.withLatestFrom)(this.recordDefinitionNameFromHostRecordEditor$,this.recordEditorGuid$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t,i])=>{this.updateInspector$.next(this.getInspectorConfig(e,t,i))}),this.sandbox.getComponentPropertyValue("editingMode").pipe((0,r.skip)(1),(0,r.withLatestFrom)(n),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateComponentProperties({editingMode:e,viewDefinitionNameForSelect:null,viewDefinitionNameForCreate:null,fieldId:null,useDefaultRoles:!1,nodeARole:null,nodeBRole:null,displayedFields:[],filterByAssociation:null,recordId:null}),this.sandbox.removeComponents(t)}),this.sandbox.componentProperties$.pipe((0,r.skip)(1),(0,r.pairwise)(),(0,r.withLatestFrom)(this.childComponents$),(0,r.switchMap)(([[e,t],i])=>{const n=Object.assign({},t),a=[];switch(!0){case e.viewDefinitionNameForSelect!==t.viewDefinitionNameForSelect:this.updateChildActionButtonDefinition(t,i,ul.actions.associate);break;case e.viewDefinitionNameForCreate!==t.viewDefinitionNameForCreate:this.updateChildActionButtonDefinition(t,i,ul.actions.createAndAssociate);break;case e.filterByAssociation!==t.filterByAssociation:case e.recordId!==t.recordId:const o=i.find(e=>e.type===ul.componentTypes.associationFilter);this.updateAssociationFilterComponent(t,o);break;case!(0,u.isEqual)(e.displayedFields,t.displayedFields):this.updateComponentRecordFields(t.displayedFields,i);break;case e.associationDefinitionName!==t.associationDefinitionName:n.editingMode=ml.Views,this.associationDesignHelperService.cleanEditingModeDependentData(n),t.associationDefinitionName?a.push(this.rxAssociationDefinitionCacheService.getAssociationDefinition(t.associationDefinitionName).pipe((0,r.map)(e=>{n.associatedRecordNodeSide=e.nodeAId===t.recordDefinitionName?C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,this.setIsManyToManyAssociation(e),this.sandbox.updateComponentProperties(n),this.isManyToManyAssociation&&this.associationDesignHelperService.resetRolesData(n)}))):this.isManyToManyAssociation=!1,a.push(this.updateAssociationNodeSideOptions(t.associationDefinitionName));break;case e.associatedRecordNodeSide!==t.associatedRecordNodeSide:n.editingMode=ml.Views,this.associationDesignHelperService.cleanEditingModeDependentData(n);break;case e.useDefaultRoles!==t.useDefaultRoles:!0===t.useDefaultRoles&&(n.nodeARole=null,n.nodeBRole=null);break;case e.nodeARole!==t.nodeARole||e.nodeBRole!==t.nodeBRole:(0,u.isUndefined)(t.useDefaultRoles)?(0,u.defaults)(n,{nodeARole:null,nodeBRole:null,useDefaultRoles:!1}):n.useDefaultRoles=!1}return(a.length>0?(0,o.combineLatest)(a):(0,o.of)(null)).pipe((0,r.map)(e=>({parameters:e,componentProperties:n})),(0,r.withLatestFrom)(this.recordDefinitionNameFromHostRecordEditor$,this.recordEditorGuid$))}),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([{parameters:e,componentProperties:t},i,n])=>{const o=this.associationDesignHelperService.getInitialProperties();this.recordEditorGuid=n,this.updateInspector$.next(this.getInspectorConfig(Object.assign(Object.assign({},o),t),i,n))}),this.sandbox.getComponentPropertyValue("fieldId").pipe((0,r.map)(e=>(0,u.isNil)(e)?null:e),(0,r.distinctUntilChanged)(),(0,r.pairwise)()).pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.filter)(([e,t])=>Boolean(t.editingMode===ml.Dropdown)),(0,r.switchMap)(([[e,t],i])=>this.associationDesignHelperService.getRecordDefinition(i.recordDefinitionName).pipe((0,r.map)(n=>{var o,r;const a=null===(o=n.fieldDefinitions.find(t=>t.id===Number(e)))||void 0===o?void 0:o.name,s=null===(r=n.fieldDefinitions.find(e=>e.id===Number(t)))||void 0===r?void 0:r.name;return i.label&&a!==i.label?i.label:s}))),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.updateComponentProperties({label:e})}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.associationChildComponentsData$.pipe((0,r.distinctUntilChanged)(u.isEqual))]).pipe((0,r.switchMap)(([e,t])=>(e.associationDefinitionName?this.rxAssociationDefinitionCacheService.getAssociationDefinition(e.associationDefinitionName):(0,o.of)({})).pipe((0,r.map)(i=>this.associationDesignHelperService.validate(this.sandbox,e,i,t)))),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.label$,this.sandbox.getComponentPropertyValue("associationDefinitionName").pipe((0,r.map)(e=>e?this.rxDefinitionNameService.getDisplayName(e):null))]).pipe((0,r.map)(([e,t])=>{let i=this.sandbox.descriptor.name;return t&&e?i+=` (${t}: ${e})`:(t||e)&&(i+=` (${t||e})`),i}),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[{label:"Disabled",expression:this.getExpressionForProperty("disabled")},{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}static getInitialProperties(e){return Object.assign(Object.assign({},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}getPropertiesByName(e){return(0,u.omit)(Object.assign(Object.assign({},e),{recordInstance:this.recordEditorGuid?`\${view.components.${this.recordEditorGuid}.recordInstance}`:e.recordInstance,recordDefinition:this.recordEditorGuid?`\${view.components.${this.recordEditorGuid}.recordDefinition}`:e.recordDefinition}),["displayedFields","filterByAssociation","recordId","viewDefinitionNameForSelect","viewDefinitionNameForCreate"])}updateAssociationFilterComponent(e,t){if(t&&this.sandbox.removeComponents([t.guid]),e.filterByAssociation){const t={guid:this.rxGuidService.generate(),type:ul.componentTypes.associationFilter,propertiesByName:{associationDefinitionName:e.filterByAssociation,recordInstanceId:e.recordId}};this.sandbox.addComponent([t])}}updateChildActionButtonDefinition(e,t,i){const n=t.find(e=>e.type===c.RxViewComponentType.ActionButton&&e.data.action===i),o=i===ul.actions.createAndAssociate?e.viewDefinitionNameForCreate:e.viewDefinitionNameForSelect;if(n&&this.sandbox.removeComponents([n.guid]),o){const t=this.associationDesignHelperService.getActionButtonDefinition(e,i,this.sandbox.guid);this.sandbox.addComponent([t])}}updateComponentRecordFields(e,t){const i=t.filter(e=>e.type===ul.componentTypes.associatedRecordField).map(e=>e.guid),n=e.map(e=>({type:ul.componentTypes.associatedRecordField,guid:this.rxGuidService.generate(),propertiesByName:{fieldId:e.data.fieldId,label:e.data.label||"",index:e.data.index}}));i.length>0&&this.sandbox.removeComponents(i),this.sandbox.addComponent(n)}getChildComponentsData(){return this.childComponents$.pipe((0,r.map)(e=>{var t,i;const n={},o=e.filter(e=>e.type===ul.componentTypes.associationFilter);n.displayedFields=e.filter(e=>e.type===ul.componentTypes.associatedRecordField),o.length>0&&(n.recordId=null===(t=o[0].data)||void 0===t?void 0:t.recordInstanceId,n.filterByAssociation=null===(i=o[0].data)||void 0===i?void 0:i.associationDefinitionName);const r=this.getViewDefinitionNameForAssociation(e,ul.actions.createAndAssociate);r&&(n.viewDefinitionNameForCreate=r);const a=this.getViewDefinitionNameForAssociation(e,ul.actions.associate);return a&&(n.viewDefinitionNameForSelect=a),n}))}generateInitialUpdateParameters(e){const t=[];return e.recordDefinitionName&&(t.push(this.updateRecordDefinitionFields(e.recordDefinitionName)),e.fieldId&&t.push(this.updatePreviousDropdownFieldDefinition(e.recordDefinitionName,e.fieldId)),t.push(this.updateAssociationDefinitionsOptions(e.recordDefinitionName))),e.associationDefinitionName&&(t.push(this.updateAssociationDefinitionsFilterOptions(e.recordDefinitionName)),t.push(this.rxAssociationDefinitionCacheService.getAssociationDefinition(e.associationDefinitionName).pipe((0,r.map)(e=>this.setIsManyToManyAssociation(e))))),e.associatedRecordNodeSide&&t.push(this.updateAssociationNodeSideOptions(e.associationDefinitionName)),t}updatePreviousDropdownFieldDefinition(e,t){return this.updateRecordDefinitionFields(e).pipe((0,r.map)(e=>this.previousDropdownFieldDefinition=e.find(e=>e.id===Number(t))))}setIsManyToManyAssociation(e){e&&(this.isManyToManyAssociation=e.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value)}getViewDefinitionNameForAssociation(e,t){const i=e.find(e=>{var i;return(null===(i=e.data)||void 0===i?void 0:i.action)===t});return i&&i.children?this.getViewDefinitionNameFromActionButton(i):null}getViewDefinitionNameFromActionButton(e){const t=e.children.find(e=>e.type===c.RxViewComponentType.Action);return(0,u.get)(t,"data.viewDefinitionName",null)}updateRecordDefinitionFields(e){return(e?this.associationDesignHelperService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions)):(0,o.of)([])).pipe((0,r.tap)(e=>this.recordDefinitionFields=e))}updateAssociationNodeSideOptions(e){return(e?this.rxAssociationDefinitionCacheService.getAssociationDefinition(e).pipe((0,r.map)(e=>this.associationDesignHelperService.getNodeSideOptions(e))):(0,o.of)([])).pipe((0,r.tap)(e=>this.associatedRecordNodeSide=e))}updateAssociationDefinitionsOptions(e){return this.recordDefinitionNameFromHostRecordEditor$.pipe((0,r.switchMap)(t=>e&&t?this.associationDesignHelperService.getAvailableAssociations(e,t):(0,o.of)([])),(0,r.tap)(e=>this.associationDefinitions=e))}updateAssociationDefinitionsFilterOptions(e){return this.otherAssociationRecordEditorComponentGuids$.pipe((0,r.mergeMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e))).pipe((0,r.take)(1)):(0,o.of)([])),(0,r.switchMap)(t=>t.length&&e?(0,o.merge)(...t.map(t=>this.associationDesignHelperService.getAvailableAssociations(e,t))):(0,o.of)([])),(0,r.map)(e=>this.associationDefinitionFilters=e))}getInspectorConfig(e,t,i){const n={inspectorSectionConfigs:[{label:"General",controls:[]}]};if(t){const t=n.inspectorSectionConfigs[0].controls;t.push({name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition to associate",definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!0}}),e.recordDefinitionName&&t.push({name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{label:"Association to use",options:this.associationDefinitions.map(e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})),emptyOption:!0,required:!0}}),e.recordDefinitionName&&this.associatedRecordNodeSide.length>0&&t.push({name:"associatedRecordNodeSide",component:l.SelectFormControlComponent,options:{label:"Associated record node Side",options:this.associatedRecordNodeSide,required:!0}}),e.recordDefinitionName&&this.associationDesignHelperService.isCardinalityOne(e,this.associationDefinitions)&&t.push({name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Association editing mode",options:(0,u.map)(ml,(e,t)=>({id:e,name:t})),required:!0}}),e.editingMode&&e.editingMode!==ml.Views||(t.push(...this.associationDesignHelperService.getViewModeInspectorControls()),this.isManyToManyAssociation&&e.associationDefinitionName&&(t.push(this.associationDesignHelperService.getUseDefaultRolesControl()),e.useDefaultRoles||t.push(...this.associationDesignHelperService.getNodeABRoleControls())),e.recordDefinitionName&&t.push(this.associationDesignHelperService.getDisplayedFieldsControl(this.recordDefinitionFields))),e.editingMode===ml.Dropdown&&(t.push(...this.associationDesignHelperService.getDropdownModeInspectorControls(this.recordDefinitionFields,this.associationDefinitionFilters)),e.filterByAssociation&&t.push(this.associationDesignHelperService.getRecordIdControl())),t.push(...this.associationDesignHelperService.getInitialInspectorControls(this.expressionConfigurator))}else n.inspectorSectionConfigs[0].controls=[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",componentGuid:i,propertyName:"recordDefinitionName"}}];return n}}class Il{}Il.\u0275fac=function(e){return new(e||Il)},Il.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Il,selectors:[["rx-association-design-item-container"]],inputs:{outlet:"outlet",isReadOnly:"isReadOnly",layout:"layout"},decls:1,vars:1,consts:[["class","mr-1",3,"interactive","layout","isReadOnly",4,"ngFor","ngForOf"],[1,"mr-1",3,"interactive","layout","isReadOnly"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,We,1,3,"rx-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.outlet.columns[0].children)},directives:[h.NgForOf,d.CanvasItemComponent],styles:["[_nghost-%COMP%]{display:flex}"]});class _l{constructor(){this.hidePlaceholder=!1,this.destroyed$=new o.ReplaySubject(1),this.containerComponent=Il}ngOnInit(){this.model.displayedFields$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hidePlaceholder=e.length>0})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}_l.\u0275fac=function(e){return new(e||_l)},_l.\u0275cmp=n["\u0275\u0275defineComponent"]({type:_l,selectors:[["rx-association-field-design"]],inputs:{model:"model"},decls:4,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-block","form-control-label"],[1,"d-flex","flex-wrap"],[1,"flex-grow-1",3,"containerComponent"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","py-0","align-right",3,"hidden"],["type","objects","label","Add fields in the Properties panel.",3,"hidden"],[1,"form-group","mt-2",3,"hidden"],[1,"list-group"],[1,"list-group-item"],[1,"rx-record-preview-card","w-100"],["adapt-button","","size","small","btn-type","tertiary","type","button",1,"btn","btn-link","float-right","d-icon-cross","p-0"],[1,"list-unstyled","mb-0"],["class","rx-record-preview-card__field",4,"ngFor","ngForOf"],[1,"rx-record-preview-card__field"],["class","rx-record-preview-card__label",4,"ngIf"],[4,"ngIf"],[1,"rx-record-preview-card__value"],[1,"rx-record-preview-card__label"],["ngModel","",3,"label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,Je,19,16,"div",1),n["\u0275\u0275template"](3,Ze,5,7,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngSwitch",n["\u0275\u0275pipeBind1"](1,3,t.model.editingMode$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngSwitchCase","views"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase","dropdown"))},directives:[h.NgSwitch,h.NgSwitchCase,d.CanvasOutletComponent,m.AdaptButtonComponent,m.AdaptEmptyStateComponent,h.NgForOf,h.NgIf,m.AdaptRxSelectComponent,b.NgControlStatus,b.NgModel],pipes:[h.AsyncPipe,p.TranslatePipe],encapsulation:2});class Dl{adaptDefinition(e){var t,i,n,o,r;if(!e.layout){const t=e.componentDefinitions.filter(e=>e.type===c.RxViewComponentType.ActionButton).map(e=>e.guid);e.layout=JSON.stringify({outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:t}]}]})}const a={editingMode:null!==(t=e.propertiesByName.editingMode)&&void 0!==t?t:ml.Views,nodeARole:null!==(i=e.propertiesByName.nodeARole)&&void 0!==i?i:null,nodeBRole:null!==(n=e.propertiesByName.nodeBRole)&&void 0!==n?n:null,styles:null!==(o=e.propertiesByName.styles)&&void 0!==o?o:null,useDefaultRoles:null!==(r=e.propertiesByName.useDefaultRoles)&&void 0!==r&&r};Object.assign(e.propertiesByName,a)}}Dl.\u0275fac=function(e){return new(e||Dl)},Dl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Dl,factory:Dl.\u0275fac});class Rl{constructor(e,t){t.registerDesignAdapter(c.RxViewComponentType.Association,e)}}Rl.\u0275fac=function(e){return new(e||Rl)(n["\u0275\u0275inject"](Dl),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},Rl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rl,declarations:[_l,Il],imports:[h.CommonModule,m.AdaptButtonModule,p.TranslateModule,Cl,m.AdaptRxSelectModule,b.FormsModule,m.AdaptEmptyStateModule,d.ViewDesignerCanvasModule]}),Rl.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Sl,Dl],imports:[[h.CommonModule,m.AdaptButtonModule,p.TranslateModule,Cl,m.AdaptRxSelectModule,b.FormsModule,m.AdaptEmptyStateModule,d.ViewDesignerCanvasModule]]});const Al=["api","disabled","recordDefinition","recordInstance","hidden","inReadState","value"].map(e=>{const t={name:e,enableExpressionEvaluation:!0};return["hidden","disabled"].includes(e)&&(t.type=c.ViewComponentPropertyType.Boolean),t});Al.push({name:"label",localizable:!0},{name:"fieldId"},c.RX_AVAILABLE_ON_DEVICES_PROP_DESC);const Tl="Record editor inputs";class Fl extends d.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.injector=e,this.componentGuid=t,this.componentModel=i,this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.configureForProperty({propertyPath:"recordId",dataDictionary$:i.recordEditorGuid$.pipe((0,r.concatMap)(e=>this.getCommonDataDictionary(this.getRecordEditorBranch(e),e)))})}getRecordEditorBranch(e){const t=this.componentModel.otherAssociationRecordEditorComponentGuids$.pipe((0,r.switchMap)(e=>e.length?(0,o.combineLatest)(e.map(e=>this.componentModel.sandbox.getComponentPropertyValue("associationDefinitionName",e).pipe((0,r.map)(t=>({label:this.rxDefinitionNameService.getDisplayName(t),children:[{label:"First associated record",children:[{label:"ID",expression:`\${view.components.${e}.firstAssociatedRecord.id}`}]}]}))))).pipe((0,r.map)(e=>({label:"Associations",children:e}))):(0,o.of)(null)));return this.getComponentCommonDataDictionary(e).pipe((0,r.switchMap)(e=>t.pipe((0,r.map)(t=>t?Object.assign(Object.assign({},e),{children:[t,...e.children]}):e))))}}class El{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Association,isContainerComponent:!0,designComponentModel:wl,bundleId:s.RX_APPLICATION.platformBundleId,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(_l),expressionConfigurator:Fl,componentFactory:this.componentFactoryResolver.resolveComponentFactory(fl),canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),options:{canBeEmbeddedInRecordEditor:!0},name:"Association",group:Tl,icon:"arrow_schema",properties:Al.concat({name:"recordInstance",enableExpressionEvaluation:!0}),outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}]},{type:ul.componentTypes.associationFilter,configPropertyName:"associationFilter",properties:[{name:"associationDefinitionName"},{name:"recordInstanceId",enableExpressionEvaluation:!0}],isDataComponent:!0},{type:ul.componentTypes.associatedRecordField,configPropertyName:"associatedRecordField",isDataComponent:!0,properties:[{name:"label",localizable:!0}]})}}El.\u0275fac=function(e){return new(e||El)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},El.\u0275mod=n["\u0275\u0275defineNgModule"]({type:El,imports:[vl,Rl]}),El.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[vl,Rl]]});class Ml extends d.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService)}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({fieldId:null,label:null,value:null},c.RX_DISABLED_PROP_DEFAULT_VALUE),c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.pipeline()}pipeline(){this.parentGuid$=this.sandbox.getParentComponentGuid(c.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.recordEditorMode$=this.parentGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("mode",e))),this.recordDefinitionName$=this.parentGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)),(0,r.distinctUntilChanged)()),this.selectedFieldDefinition$=this.sandbox.getComponentPropertyValue("fieldId").pipe((0,r.switchMap)(e=>this.recordDefinition$.pipe((0,r.map)(t=>t&&e&&t.fieldDefinitions.find(t=>t.id===Number(e))||null))),(0,r.shareReplay)(1)),this.isRequired$=this.selectedFieldDefinition$.pipe((0,r.map)(e=>e&&e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required)),this.isSystemField$=this.selectedFieldDefinition$.pipe((0,r.startWith)(!1),(0,r.map)(e=>this.rxFieldDefinitionService.isSystemField(e))),this.selectedFieldDefinition$.pipe((0,r.pairwise)(),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.filter)(([[e,t],i])=>t&&(e&&e.name===i.label||!i.label)),(0,r.map)(([[e,t]])=>t.name)).subscribe(e=>{this.sandbox.updateComponentProperties({label:e})}),this.availableFieldDefinitions$=(0,o.combineLatest)([this.recordDefinition$,this.recordEditorMode$]).pipe((0,r.map)(([e,t])=>e&&e.fieldDefinitions?e.fieldDefinitions.filter(e=>(0,u.includes)(this.fieldResourceTypes,e.resourceType)).filter(e=>{const i=this.rxFieldDefinitionService.isSystemField(e);return!i||i&&t===qs.Edit}):[]),(0,r.shareReplay)(1)),this.label$=this.sandbox.componentProperties$.pipe((0,r.map)(e=>e&&e.fieldId?e.label:"<No field selected>")),this.sandbox.componentProperties$.pipe((0,r.mergeMap)(e=>this.validate(e)),(0,r.distinctUntilChanged)(u.isEqual)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),this.availableFieldDefinitions$.pipe((0,r.switchMap)(()=>this.getInspectorConfig())).subscribe(e=>{this.sandbox.updateInspectorConfig(e)}),this.sandbox.componentProperties$.pipe((0,r.switchMap)(()=>this.getBreadcrumb()),(0,r.distinctUntilChanged)()).subscribe(e=>{this.sandbox.setBreadcrumbs(e)}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("label"),this.selectedFieldDefinition$]).pipe((0,r.map)(([e,t])=>e||(t?`[${t.name}]`:`[${this.sandbox.descriptor.name}]`)),(0,r.distinctUntilChanged)()).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,this.getSettableProperties())})}getPropertiesByName(e){const t=Object.assign({},e);return t.styles||delete t.styles,t}validate(e){const t=[];return(0,u.isEmpty)(e.fieldId)&&t.push(this.sandbox.createError("Field name cannot be blank.","fieldId")),t.push(...(0,d.validateStandardProps)(e)),(0,o.of)(t)}getBreadcrumb(){return(0,o.of)(null).pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.map)(([e,t])=>t.label))}getInspectorConfig(){return(0,o.of)(null).pipe((0,r.withLatestFrom)(this.availableFieldDefinitions$,this.recordDefinitionName$,this.parentGuid$,this.isSystemField$),(0,r.map)(([e,t,i,n,o])=>this.getBaseInspectorConfig(t,i,n,o)))}getSettableProperties(){return[...(0,u.find)(this.sandbox.descriptor.properties,{name:"disabled"})?[{label:"Disabled",expression:`\${view.components.${this.sandbox.guid}.disabled}`}]:[],...(0,u.find)(this.sandbox.descriptor.properties,{name:"disabled"})?[{label:"Hidden",expression:`\${view.components.${this.sandbox.guid}.hidden}`}]:[]]}getBaseInspectorFields(e,t){return[].concat([{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",required:!0,options:e.map(e=>({name:e.name,id:String(e.id)}))}},{name:"label",component:l.TextFormControlComponent,options:{label:"Display label"}}],t?[]:[{name:"value",component:l.ExpressionInspectorControlComponent,options:{label:"Value"}},(0,d.getDisabledFieldInspectorConfig)()],(0,d.getStandardPropsInspectorConfigs)())}getBaseInspectorConfig(e,t,i,n){const o=this.rxDefinitionNameService.getDisplayName(t||"");let r;return r=t?e.length?this.getBaseInspectorFields(e,n):[{component:l.ValidationFormControlComponent,options:{text:`${o} does not have fields that can be bound to this field type.`,componentGuid:i,propertyName:"recordDefinitionName"}}]:[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",componentGuid:i,propertyName:"recordDefinitionName"}}],{inspectorSectionConfigs:[{label:"General",controls:r}]}}}class Ol extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.attachment]}static getInitialProperties(e){const t=Ml.getInitialProperties(e);return delete t.value,t}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>(e.inspectorSectionConfigs[0].controls=e.inspectorSectionConfigs[0].controls.filter(e=>"value"!==e.name),e)))}}class kl{}kl.\u0275fac=function(e){return new(e||kl)},kl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kl,selectors:[["rx-attachment-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","label"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-uploader",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,4,t.model.isRequired$))("ngModel",n["\u0275\u0275pureFunction0"](8,et))("disabled",!0)("label",n["\u0275\u0275pipeBind1"](2,6,t.model.label$))},directives:[m.AdaptRxUploaderComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],pipes:[h.AsyncPipe],styles:["adapt-rx-uploader[_ngcontent-%COMP%]     .adapt-rx-uploader__restrict{display:none}"]});class jl{}jl.\u0275fac=function(e){return new(e||jl)},jl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:jl,declarations:[kl],imports:[h.CommonModule,b.FormsModule,m.AdaptRxUploaderModule]}),jl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptRxUploaderModule]]});class Pl extends f.BaseViewComponent{constructor(e){super(),this.injector=e,this.isRequired=!1,this.isDisabled=!1,this.translateService=this.injector.get(p.TranslateService),this.api={setProperty:this.setProperty.bind(this)},this.inReadState=!1,this.isLoading=!0,this.validationErrorMessage=null}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.configReady$=this.config.pipe((0,r.filter)(e=>Boolean(e.api&&e.recordDefinition)),(0,r.takeUntil)(this.destroyed$)),this.recordInstance$=this.configReady$.pipe((0,r.pluck)("recordInstance"),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)),this.recordInstance$.subscribe(this.subscribeOnConfigValueChange.bind(this)),this.configReady$.pipe((0,r.take)(1)).subscribe(e=>{this.isLoading=!1,this.onConfigInitialized(e),this.onConfigUpdated(e)}),this.configReady$.pipe((0,r.skip)(1),(0,r.filter)(e=>Boolean(e.recordInstance)),(0,r.takeUntil)(this.destroyed$)).subscribe(this.onConfigUpdated.bind(this))}setFieldValue(e,t={}){(0,u.isEqual)(e,this.formControl.value)||(!1!==t.markAsDirty&&this.formControl.markAsDirty(),!1!==t.markAsTouched&&this.formControl.markAsTouched(),this.formControl.setValue(e))}getFieldValue(){var e;return null===(e=this.formControl)||void 0===e?void 0:e.value}getDisplayValue(){return this.getFieldValue()}onConfigInitialized(e){this.fieldId=Number(e.fieldId),this.fieldDefinition=(0,u.find)(e.recordDefinition.fieldDefinitions,{id:this.fieldId}),this.isRequired=this.fieldDefinition.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required,this.recordEditorApi=e.api,this.formControl=this.recordEditorApi.getFieldControl(this.fieldId,this.guid,this.getFieldValidators(),e.associatedRecordPath),this.associatedRecordPath=e.associatedRecordPath,this.permissionType=this.recordEditorApi.getPermissionType(this.fieldId,this.associatedRecordPath),this.subscribeOnConfigValueChange(),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.checkValidation(),this.updateValidationMessage()}),this.isAlwaysDisabled=this.permissionType===a.RX_RECORD_DEFINITION.fieldPermissionTypes.view||this.injector.get(a.RxFieldDefinitionService).isSystemField(this.fieldDefinition),this.isAlwaysHidden=!this.permissionType;const t=e.api.getRecordEditorMode();if(Number(e.fieldId)===a.RX_RECORD_DEFINITION.coreFieldIds.createdBy){const e=this.injector.get(s.RxSystemConfigurationService).getConfigurationSync("Submitter-Mode");this.isAlwaysDisabled=this.isAlwaysDisabled||t===qs.Edit&&e===s.RX_ADMINISTRATION.submitterModes.locked}}onConfigUpdated(e){const t=this.isAlwaysDisabled||Boolean(e.disabled);this.isDisabled!==t&&(this.isDisabled=t,this.isDisabled||this.formControl.updateValueAndValidity(),this.checkValidation()),this.isHidden=this.isAlwaysHidden||Boolean(e.hidden),this.label=(0,u.isUndefined)(e.label)?this.fieldDefinition.name:e.label,this.inReadState=Boolean(e.inReadState)}getFieldValidators(){return[]}getRequiredFieldValidationError(){return this.translateService.instant("com.bmc.arsys.rx.client.view-components.validation.required.message")}getFieldInstanceProp(e,t=this.fieldId,i=this.associatedRecordPath){return this.recordEditorApi.getFieldInstanceProp(t,e,i)}setFieldInstanceProp(e,t,i=this.fieldId,n=this.associatedRecordPath){this.recordEditorApi.setFieldInstanceProp(i,e,t,n)}setProperty(e,t){if(!(0,u.includes)(["hidden","disabled"],e))return(0,o.throwError)(`Field property ${e} is not settable.`);this.notifyPropertyChanged(e,t)}subscribeOnConfigValueChange(){const e=this.configReady$.pipe((0,r.pluck)("value"),(0,r.filter)(e=>!(0,u.isUndefined)(e)),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.recordInstance$),(0,r.takeUntil)(this.destroyed$));e.pipe((0,r.take)(1)).subscribe(e=>{(0,u.isNull)(e)||this.setFieldValue(e,{markAsTouched:!1,markAsDirty:!1})}),e.pipe((0,r.skip)(1)).subscribe(e=>this.setFieldValue(e))}checkValidation(){this.isDisabled&&this.formControl.invalid&&(this.formControl.setErrors(null),this.updateValidationMessage())}updateValidationMessage(){this.formControl.errors?(this.formControl.errors.required&&(this.formControl.errors.required=this.getRequiredFieldValidationError()),this.validationErrorMessage=(0,u.values)(this.formControl.errors).join(", ")):this.validationErrorMessage=null}}Pl.\u0275fac=function(e){return new(e||Pl)(n["\u0275\u0275directiveInject"](n.Injector))},Pl.\u0275dir=n["\u0275\u0275defineDirective"]({type:Pl,hostVars:4,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-field-required",t.isRequired)("rx-field-disabled",t.isDisabled)},inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]]});const Nl={defaultOptions:{filesCount:1,mode:m.UploaderMode.Manual,selectionMode:m.UploaderSelectionMode.File,chunkSize:"100KB",maxFileSize:"2GB"}};class Vl extends Pl{constructor(e){super(e),this.filesCount=Nl.defaultOptions.filesCount,this.mode=Nl.defaultOptions.mode,this.selectionMode=Nl.defaultOptions.selectionMode,this.chunkSize=Nl.defaultOptions.chunkSize,this.maxFileSize=Nl.defaultOptions.maxFileSize,this.showFiles=[],this.texts={},this.readStateConfig={fileName:null,downloadURL:null}}onConfigInitialized(e){super.onConfigInitialized(e),this.attachmentFormControl=new b.FormControl(this.showFiles),this.maxFileSize=this.fieldDefinition.maxSize?(0,u.toString)(this.fieldDefinition.maxSize):Nl.defaultOptions.maxFileSize,this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.filter)(e=>!(e instanceof File)),(0,r.distinctUntilChanged)((e,t)=>e===t&&(0,u.has)(this.attachmentFormControl.value,"[0].downloadURL")),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.attachmentFormControl.reset(),this.addAttachedFileToAttachmentList(this.getFieldValue())}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.attachmentFormControl.markAsTouched():this.attachmentFormControl.markAsUntouched()})}addAttachedFileToAttachmentList(e){if(e){const t=this.recordEditorApi.getAttachmentDownloadUrl(this.fieldId);let i;i={data:{name:e},isUploading:!0},t&&(i.downloadURL=t),this.showFiles=[i]}else this.showFiles=[];this.attachmentFormControl.setValue(this.showFiles)}onConfigUpdated(e){super.onConfigUpdated(e),this.inReadState&&(this.readStateConfig={fileName:this.getDisplayValue(),downloadURL:this.recordEditorApi.getAttachmentDownloadUrl(this.fieldId)})}removeAttachment(e){e&&(this.attachment=null),this.addAttachedFileToAttachmentList(),this.setFieldValue(this.attachment)}addAttachment(e){const t=(0,u.first)(e);t&&(this.attachment=t.data,this.setFieldValue(this.attachment))}onBlur(){this.formControl.markAsTouched()}}function Ll(){return new a.UploaderService}Vl.\u0275fac=function(e){return new(e||Vl)(n["\u0275\u0275directiveInject"](n.Injector))},Vl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vl,selectors:[["rx-attachment-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["emptyReadonlyField",""],[4,"ngIf","ngIfElse"],["aria-hidden","true"],["class","d-block",3,"config",4,"ngIf"],[1,"d-block",3,"config"],[3,"ngClass","reusable","label","readonly","required","allowDeletion","uploadMode","selectionMode","filesCount","maxFileSize","chunkSize","texts","formControl","removedFileFromQueue","deletedFile","afterFilesAdded","onBlur"],[3,"label","value"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ot,2,2,"ng-container",0),n["\u0275\u0275template"](1,at,1,15,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,st,1,2,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,m.AdaptDownloaderComponent,m.AdaptRxUploaderComponent,h.NgClass,b.RequiredValidator,b.NgControlStatus,b.FormControlDirective,S.ReadOnlyFieldComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}  .d-icon-exclamation_triangle{display:none}  .adapt-rx-uploader__restrict{display:none}  .upload-status{display:none}  .adapt-uploader-item{border-top:0;height:37px!important;border-bottom:0}  .adapt-rx-uploader-file-attach-btn__wrp{max-width:100%}  .adapt-rx-uploader-attach-btn{overflow:hidden;text-overflow:ellipsis;max-width:100%}  .adapt-uploader-file{margin-left:0;padding-bottom:10px;padding-left:0!important;flex:auto;height:100%;border-bottom:1px solid #f0f1f1}  .adapt-uploader-status{margin-right:20px;width:15px;border-bottom:1px solid #f0f1f1}  .attachment-disabled .adapt-uploader-list-files-zone__header{margin:0;display:none}  .attachment-disabled .empty-state{display:none}  .attachment-disabled .empty-state__container{margin:0;padding:0}  .attachment-disabled .empty-state__label{margin-top:0;text-align:left}']});class Bl{}Bl.\u0275fac=function(e){return new(e||Bl)},Bl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Bl,declarations:[Vl],imports:[m.AdaptRxUploaderModule,h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule,m.AdaptDownloadModule]}),Bl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxUploaderModule.forRoot({uploader:{provide:"UploaderService",useFactory:Ll,deps:[]}}),h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule,m.AdaptDownloadModule]]});class $l{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Attachment,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Vl),properties:Al,name:"Attachment",group:Tl,icon:"paperclip",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(kl),designComponentModel:Ol,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}var Gl,zl;$l.\u0275fac=function(e){return new(e||$l)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},$l.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$l,imports:[Bl,jl]}),$l.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Bl,jl]]}),function(e){e.Checkbox="checkbox",e.Switch="switch"}(Gl||(Gl={})),function(e){e[e.True=1]="True",e[e.False=0]="False"}(zl||(zl={}));class Ul extends Ml{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.boolean]}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Ml.getInitialProperties()),{editingMode:Gl.Switch}),e)}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>this.editInspectorConfig(e)))}editInspectorConfig(e){const t=(0,u.findIndex)(e.inspectorSectionConfigs[0].controls,e=>"value"===e.name),i={name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Editing mode",tooltip:new s.Tooltip("An optional Boolean field will always be displayed as a Switch."),required:!1,options:(0,u.map)(Gl,(e,t)=>({id:e,name:t}))}};return-1!==t&&e.inspectorSectionConfigs[0].controls.splice(t,0,i),e}}class ql{constructor(){this.shouldDisplayAsCheckbox=!1,this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){const e=this.model.componentProperties$.pipe((0,r.map)(e=>e.editingMode||Gl.Switch));(0,o.combineLatest)([e,this.model.isRequired$]).pipe((0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.shouldDisplayAsCheckbox=t&&e===Gl.Checkbox})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ql.\u0275fac=function(e){return new(e||ql)},ql.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ql,selectors:[["rx-boolean-field-design"]],inputs:{model:"model"},decls:2,vars:2,consts:[[4,"ngIf"],["class","form-control-required",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],[1,"form-control-required"],[3,"ngModel","label","required","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ct,8,8,"ng-container",0),n["\u0275\u0275template"](1,dt,4,8,"ng-container",0)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.shouldDisplayAsCheckbox),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.shouldDisplayAsCheckbox))},directives:[h.NgIf,m.AdaptRxSwitchComponent,b.NgControlStatus,b.NgModel,m.AdaptRxCheckboxComponent,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class Xl{}Xl.\u0275fac=function(e){return new(e||Xl)},Xl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xl,declarations:[ql],imports:[h.CommonModule,b.FormsModule,m.AdaptRxSwitchModule,m.AdaptRxCheckboxModule],exports:[ql]}),Xl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptRxSwitchModule,m.AdaptRxCheckboxModule]]});class Hl extends Pl{constructor(e,t){super(e),this.rxBooleanPipe=t}get booleanValue(){const e=this.getFieldValue();return(0,u.isNull)(e)?null:Boolean(e)}set booleanValue(e){(0,u.isNull)(e)?this.setFieldValue(null):this.setFieldValue(Number(e))}getDisplayValue(){const e=super.getDisplayValue();return(0,u.isNil)(e)?"-":this.rxBooleanPipe.transform(e)}onConfigInitialized(e){super.onConfigInitialized(e),this.editingMode=e.editingMode}onConfigUpdated(e){super.onConfigUpdated(e),this.shouldDisplayAsCheckbox&&null===this.getFieldValue()&&this.setFieldValue(zl.False,{markAsDirty:!1,markAsTouched:!1})}ngAfterViewInit(){this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{var t,i;return e?null===(t=this.ngModel)||void 0===t?void 0:t.control.markAsTouched():null===(i=this.ngModel)||void 0===i?void 0:i.control.markAsUntouched()})}get shouldDisplayAsCheckbox(){return this.editingMode===Gl.Checkbox&&this.isRequired}onBlur(){this.formControl.markAsTouched()}}Hl.\u0275fac=function(e){return new(e||Hl)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](s.RxBooleanPipe))},Hl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hl,selectors:[["rx-boolean-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](pt,5,b.NgModel),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ngModel=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"hidden","label","isDisabled","required","shouldDisplayAsCheckbox","ngModel","ngModelChange","rxBlur"],["booleanComponent",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,mt,2,2,"ng-container",0),n["\u0275\u0275template"](1,ht,2,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,l.RxBooleanComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],encapsulation:2});class Wl{}Wl.\u0275fac=function(e){return new(e||Wl)},Wl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wl,declarations:[Hl],imports:[h.CommonModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,p.TranslateModule,b.ReactiveFormsModule,b.FormsModule,l.RxBooleanModule]}),Wl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,p.TranslateModule,b.ReactiveFormsModule,b.FormsModule,l.RxBooleanModule]]});class Yl{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Boolean,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Hl),properties:Al,name:"Boolean",group:Tl,icon:"switcher_check",designComponentModel:Ul,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ql),options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Yl.\u0275fac=function(e){return new(e||Yl)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Yl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yl,imports:[Wl,Xl]}),Yl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Wl,Xl]]});class Ql extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]}}class Kl{}Kl.\u0275fac=function(e){return new(e||Kl)},Kl.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kl,selectors:[["rx-date-field-design"]],inputs:{model:"model"},decls:3,vars:8,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,4,t.model.isRequired$))("ngModel",t.dateValue)("disabled",!0)("label",n["\u0275\u0275pipeBind1"](2,6,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],pipes:[h.AsyncPipe],encapsulation:2});class Jl{}Jl.\u0275fac=function(e){return new(e||Jl)},Jl.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Jl,declarations:[Kl],imports:[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]}),Jl.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]]});class Zl extends m.AdaptRxDatetimeAdapter{constructor(){super(...arguments),this.storeDateFormat="YYYY-MM-DD"}fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)([e.year||0,e.month||0,e.date||0]).format(this.storeDateFormat):null}}Zl.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Zl)))(t||Zl)}}(),Zl.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zl,factory:Zl.\u0275fac});class ec extends Pl{constructor(e,t){super(e),this.datePipe=t}getDisplayValue(){const e=super.getDisplayValue();if(e)return this.datePipe.transform(e,"mediumDate")}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:m.RxDatetimePickerMode.Date}}:null}]}}ec.\u0275fac=function(e){return new(e||ec)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](h.DatePipe))},ec.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ec,selectors:[["rx-date-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:Zl}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","required","formControl","readonly","disabledStyleForReadonlyState"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,gt,2,2,"ng-container",0),n["\u0275\u0275template"](1,vt,1,5,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,b.RequiredValidator,b.NgControlStatus,b.FormControlDirective],encapsulation:2});class tc{}tc.\u0275fac=function(e){return new(e||tc)},tc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:tc,declarations:[ec],imports:[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),tc.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[h.DatePipe],imports:[[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class ic{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Date,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ec),properties:Al,name:"Date",group:Tl,icon:"calendar",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Kl),designComponentModel:Ql,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}ic.\u0275fac=function(e){return new(e||ic)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},ic.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ic,imports:[tc,Jl]}),ic.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[tc,Jl]]});class nc extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]}}class oc{constructor(){this.pickerMode=m.RxDatetimePickerMode.DateTime}}oc.\u0275fac=function(e){return new(e||oc)},oc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:oc,selectors:[["rx-date-time-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"required","ngModel","disabled","mode","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.dateTimeValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,5,t.model.isRequired$))("ngModel",t.dateTimeValue)("disabled",!0)("mode",t.pickerMode)("label",n["\u0275\u0275pipeBind1"](2,7,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],pipes:[h.AsyncPipe],encapsulation:2});class rc{}rc.\u0275fac=function(e){return new(e||rc)},rc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:rc,declarations:[oc],imports:[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]}),rc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]]});class ac extends m.AdaptRxDatetimeAdapter{fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)([e.year||0,e.month||0,e.date||0,e.hours||0,e.minutes||0,e.seconds||0]).toISOString():null}}ac.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](ac)))(t||ac)}}(),ac.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ac,factory:ac.\u0275fac});class sc extends Pl{constructor(e,t){super(e),this.datePipe=t,this.pickerMode=m.RxDatetimePickerMode.DateTime}getDisplayValue(){const e=super.getDisplayValue();if(e)return this.datePipe.transform(e,"medium")}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:this.pickerMode,hasSeconds:!0}}:null}]}}sc.\u0275fac=function(e){return new(e||sc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](h.DatePipe))},sc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sc,selectors:[["rx-date-time-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:ac}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["hasSeconds","true",3,"label","required","formControl","readonly","disabledStyleForReadonlyState","mode"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,yt,2,2,"ng-container",0),n["\u0275\u0275template"](1,bt,1,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,b.RequiredValidator,b.NgControlStatus,b.FormControlDirective],encapsulation:2});class lc{}lc.\u0275fac=function(e){return new(e||lc)},lc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:lc,declarations:[sc],imports:[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),lc.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[h.DatePipe],imports:[[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class cc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.DateTime,componentFactory:this.componentFactoryResolver.resolveComponentFactory(sc),properties:Al,name:"Date/Time",group:Tl,icon:"calendar_clock_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(oc),designComponentModel:nc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}cc.\u0275fac=function(e){return new(e||cc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},cc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:cc,imports:[lc,rc]}),cc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[lc,rc]]});class dc extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.decimal,a.RX_RECORD_DEFINITION.resourceTypes.real]}}class pc{}pc.\u0275fac=function(e){return new(e||pc)},pc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pc,selectors:[["rx-decimal-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class uc{}uc.\u0275fac=function(e){return new(e||uc)},uc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:uc,declarations:[pc],imports:[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]}),uc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]]});class mc extends Pl{constructor(e){super(e),this.hasFocus=!1,this.decimalPipe=e.get(h.DecimalPipe)}onConfigInitialized(e){super.onConfigInitialized(e),this.counterFormControl=new b.FormControl(this.formControl.value,this.formControl.validator),this.counterFormControl.valueChanges.pipe((0,r.filter)(e=>!(0,u.isEqual)(this.formControl.value,e)),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.setFieldValue(e)}),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.hasFocus||this.counterFormControl.setValue(this.formControl.value)}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.counterFormControl.markAsTouched():this.counterFormControl.markAsUntouched()})}onBlur(){this.hasFocus=!1,this.formControl.markAsTouched()}onFocus(){this.hasFocus=!0}getDisplayValue(){const e=this.getFieldValue();return(0,u.isNil)(e)?e:this.decimalPipe.transform(String(e))}setFieldValue(e){if(!(0,u.isNull)(e)&&(0,u.isFinite)(e)){const t=new(D())(e);t.eq(this.formControl.value)||(this.formControl.markAsDirty(),this.formControl.setValue(t))}else super.setFieldValue(e)}}mc.\u0275fac=function(e){return new(e||mc)(n["\u0275\u0275directiveInject"](n.Injector))},mc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:mc,selectors:[["rx-integer-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Ct,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.counterComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["adaptIntegerNumber","",1,"mb-0",3,"label","formControl","readonly","disabledStyleForReadonlyState","required","min","max","adaptMin","adaptMax","onBlur","onFocus"],["counterComponent",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,wt,2,2,"ng-container",0),n["\u0275\u0275template"](1,It,2,9,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxCounterComponent,m.AdaptIntegerNumberValidatorDirective,b.NgControlStatus,b.FormControlDirective,b.RequiredValidator,m.AdaptMinValidatorDirective,m.AdaptMaxValidatorDirective],encapsulation:2});class hc extends mc{getDisplayValue(){const e=this.getFieldValue(),t=this.fieldDefinition.precision,i=-1===t?null:`1.${t}-${t}`;return(0,u.isNil)(e)?e:this.decimalPipe.transform(String(e),i)}}hc.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](hc)))(t||hc)}}(),hc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hc,selectors:[["rx-decimal-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[1,"mb-0",3,"label","formControl","required","min","max","adaptMin","adaptMax","readonly","disabledStyleForReadonlyState","requiredLabel","onBlur","onFocus"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Dt,2,2,"ng-container",0),n["\u0275\u0275template"](1,Rt,2,12,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxCounterComponent,b.NgControlStatus,b.FormControlDirective,b.RequiredValidator,m.AdaptMinValidatorDirective,m.AdaptMaxValidatorDirective],pipes:[p.TranslatePipe],encapsulation:2});class fc{}fc.\u0275fac=function(e){return new(e||fc)},fc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:fc,declarations:[hc],imports:[R.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,h.CommonModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]}),fc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[R.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,h.CommonModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule]]});class gc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t;const i=this.componentFactoryResolver.resolveComponentFactory(hc);e.register({type:c.RxViewComponentType.Decimal,aliases:[c.RxViewComponentType.Floating],componentFactory:i,properties:Al,name:"Decimal",group:Tl,icon:"field_decimal_number",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(pc),designComponentModel:dc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}gc.\u0275fac=function(e){return new(e||gc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},gc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gc,imports:[fc,uc]}),gc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[fc,uc]]});class vc extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.integer]}}class xc{}xc.\u0275fac=function(e){return new(e||xc)},xc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xc,selectors:[["rx-integer-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class yc{}yc.\u0275fac=function(e){return new(e||yc)},yc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:yc,declarations:[xc],imports:[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]}),yc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]]});class bc{}bc.\u0275fac=function(e){return new(e||bc)},bc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:bc,declarations:[mc],imports:[R.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule]}),bc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[R.AdaptTextFieldFormBuilderModule,m.AdaptRxCounterModule,m.AdaptRxValidatorsModule,h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule]]});class Cc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Integer,componentFactory:this.componentFactoryResolver.resolveComponentFactory(mc),properties:Al,name:"Integer",group:Tl,icon:"field_integer_number",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(xc),designComponentModel:vc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Cc.\u0275fac=function(e){return new(e||Cc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Cc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cc,imports:[bc,yc]}),Cc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[bc,yc]]});const Sc={id:null,name:"None"},wc={radioButtons:"Radio Buttons",dropdown:"Dropdown"},Ic={radioButtons:"radio-buttons",dropdown:"dropdown"};class _c extends Ml{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.selection],this.editingMode$=this.sandbox.componentProperties$.pipe((0,r.map)(e=>e.editingMode))}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Ml.getInitialProperties()),{editingMode:Ic.dropdown}),e)}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.map)(e=>this.editInspectorConfig(e)))}editInspectorConfig(e){const t=(0,u.findIndex)(e.inspectorSectionConfigs[0].controls,e=>"value"===e.name),i={name:"editingMode",component:l.SelectFormControlComponent,options:{label:"Editing mode",required:!1,options:[{id:Ic.dropdown,name:wc.dropdown},{id:Ic.radioButtons,name:wc.radioButtons}]}};return-1!==t&&e.inspectorSectionConfigs[0].controls.splice(t,0,i),e}}class Dc{ngOnInit(){this.model.editingMode$.subscribe(e=>{this.setMode(e)})}setMode(e){this.isRadioButtonMode=e===Ic.radioButtons}}Dc.\u0275fac=function(e){return new(e||Dc)},Dc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Dc,selectors:[["rx-selection-field-design"]],inputs:{model:"model"},decls:2,vars:2,consts:[["class","rx-pointer-events-none","ngModel","",3,"label","options","disabled","required",4,"ngIf"],[4,"ngIf"],["ngModel","",1,"rx-pointer-events-none",3,"label","options","disabled","required"],[1,"form-group"],[1,"form-control-label"],["class","form-control-required",4,"ngIf"],[3,"ngModel","disabled","ngModelChange"],["value","None","label","None",4,"ngIf"],["label","Option 1"],["label","Option 2"],[1,"form-control-required"],["value","None","label","None"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,At,3,9,"adapt-rx-select",0),n["\u0275\u0275template"](1,Et,12,11,"ng-container",1)),2&e&&(n["\u0275\u0275property"]("ngIf",!t.isRadioButtonMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isRadioButtonMode))},directives:[h.NgIf,m.AdaptRxSelectComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator,m.AdaptRxRadiobuttonGroupComponent,m.AdaptRxRadiobuttonComponent],pipes:[h.AsyncPipe],styles:["adapt-select{width:100%}"]});class Rc{}var Ac,Tc;Rc.\u0275fac=function(e){return new(e||Rc)},Rc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rc,declarations:[Dc],imports:[h.CommonModule,m.AdaptRxRadiobuttonModule,b.FormsModule,m.AdaptRxSelectModule]}),Rc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxRadiobuttonModule,b.FormsModule,m.AdaptRxSelectModule]]}),function(e){e.RadioButton="radio-buttons",e.Dropdown="dropdown"}(Ac||(Ac={}));class Fc extends Pl{getSelectValue(){return(0,u.isNil)(this.formControl.value)?[]:(0,u.compact)([this.selectOptions.find(e=>e.id===Number(this.formControl.value))])}onConfigInitialized(e){super.onConfigInitialized(e),this.isRadioButtonMode=e.editingMode===Ac.RadioButton,this.generateControlOptions(this.fieldDefinition),this.selectFormControl=new b.FormControl(this.getSelectValue()),this.selectFormControl.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.setFieldValue((0,u.get)(e,"[0].id",null))}),this.formControl.valueChanges.pipe((0,r.startWith)(this.formControl.value),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.selectFormControl.setValue(this.getSelectValue())}),this.formControl.touched$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e?this.selectFormControl.markAsTouched():this.selectFormControl.markAsUntouched()})}generateControlOptions(e){this.selectOptions=(0,u.map)(e.optionLabelsById,(e,t)=>({name:e,id:Number(t)})),!this.isRequired&&this.isRadioButtonMode&&this.selectOptions.unshift(Sc)}getDisplayValue(){return this.fieldDefinition.optionLabelsById[this.formControl.value]}optionFormatter(e){return e.name}onPopupStatusChange(e){e||this.formControl.markAsTouched()}}Fc.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Fc)))(t||Fc)}}(),Fc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fc,selectors:[["rx-selection-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"name","formControl","readonly","label",4,"ngIf"],[3,"options","required","label","formControl","readonly","optionFormatter","enableFilter","emptyOption","onPopupOpenChange",4,"ngIf"],[3,"name","formControl","readonly","label"],[3,"value","label","class",4,"ngFor","ngForOf"],[3,"value","label"],[3,"options","required","label","formControl","readonly","optionFormatter","enableFilter","emptyOption","onPopupOpenChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Ot,2,2,"ng-container",0),n["\u0275\u0275template"](1,Nt,2,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxRadiobuttonGroupComponent,b.NgControlStatus,b.FormControlDirective,h.NgForOf,m.AdaptRxRadiobuttonComponent,m.AdaptRxSelectComponent,b.RequiredValidator],encapsulation:2});class Ec{}Ec.\u0275fac=function(e){return new(e||Ec)},Ec.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ec,declarations:[Fc],imports:[m.AdaptRxFormControlModule,m.AdaptRxRadiobuttonModule,h.CommonModule,S.ReadOnlyFieldModule,b.FormsModule,b.ReactiveFormsModule,p.TranslateModule,m.AdaptRxLabelModule,m.AdaptRxSelectModule]}),Ec.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxFormControlModule,m.AdaptRxRadiobuttonModule,h.CommonModule,S.ReadOnlyFieldModule,b.FormsModule,b.ReactiveFormsModule,p.TranslateModule,m.AdaptRxLabelModule,m.AdaptRxSelectModule]]});class Mc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Selection,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Fc),properties:Al,name:"Select",group:Tl,icon:"field_dropdown",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Dc),designComponentModel:_c,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Mc.\u0275fac=function(e){return new(e||Mc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Mc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mc,imports:[Ec,Rc]}),Mc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ec,Rc]]});class Oc extends f.BaseViewComponent{constructor(){super(...arguments),this.fieldComponents=new Map}registerFieldComponent(e,t){this.fieldComponents.set(e,t)}getValueForPreviousField(e){const t=this.fieldComponents.get(e-1);return t?t.getFieldValue():null}resetValueForNextFields(e){const t=e+1,i=this.fieldComponents.get(t);i&&(i.resetFieldValue(),this.resetValueForNextFields(t))}}Oc.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Oc)))(t||Oc)}}(),Oc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Oc,selectors:[["rx-select-group"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")},directives:[f.RuntimeViewCanvasOutletComponent],encapsulation:2});class kc extends Pl{constructor(e,t,i,n){super(e),this.selectGroupComponent=t,this.rxNamedListDefinitionService=i,this.rxNamedListService=n,this.optionLoaderFunc=this.getNamedListOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.selectedOptions=[]}onConfigInitialized(e){super.onConfigInitialized(e),this.fieldIndex=Number(e.index),this.namedListDefinitionName=e.namedListDefinitionName,this.selectGroupComponent.registerFieldComponent(this.fieldIndex,this);const t=this.rxNamedListDefinitionService.get(this.namedListDefinitionName).pipe((0,r.take)(1)),i=this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.startWith)(this.formControl.value),(0,r.takeUntil)(this.destroyed$));(0,o.combineLatest)([t,i]).subscribe(([t])=>{this.namedListDefinition=t,this.fieldIdToFilterBy=e.optionFilterFieldId||t.valueFieldId,this.updateSelectedOption(),this.formControl.dirty?this.selectGroupComponent.resetValueForNextFields(this.fieldIndex):this.resetLoadedOptions()})}resetFieldValue(){super.setFieldValue(null),this.resetLoadedOptions()}getDisplayValue(){return this.readOnlyValue}getNamedListOptionPage(e,t,i){return this.rxNamedListService.getOptionPage(this.namedListDefinition,i,this.getSelectionQueryCriteria(),e,t)}viewToModelValueAdapter(e){return(0,u.get)(e,"[0].value","")}modelToViewValueAdapter(e){return(0,u.isNil)(e)?[]:this.selectedOptions}updateSelectedOption(){let e;if(this.showDefaultTitle=!1,(0,u.isEmpty)(this.formControl.value))e=(0,o.of)([]);else{const t=(0,u.get)(this.selectWithPaginationComponent,"options",[]),i=(0,u.find)(t,{value:this.formControl.value});e=i?(0,o.of)([i]):this.rxNamedListService.getOptionsForValues(this.namedListDefinition,[this.formControl.value])}e.pipe((0,r.take)(1)).subscribe(e=>{this.showDefaultTitle=!0,this.selectedOptions=e,(0,u.isEmpty)(e)&&this.formControl.value&&(this.selectedOptions=[{displayValue:null,value:this.formControl.value}]),this.formControl.dirty&&this.formControl.markAsTouched(),this.triggerModelToViewValueUpdate(),this.updateReadOnlyValue()})}resetLoadedOptions(){this.selectWithPaginationComponent&&this.selectWithPaginationComponent.resetLoadedOptions()}getSelectionQueryCriteria(){let e=null;if(this.fieldIndex>0){const t=this.selectGroupComponent.getValueForPreviousField(this.fieldIndex);t&&(e=`('${this.fieldIdToFilterBy}' = "${t}")`)}return e}updateReadOnlyValue(){this.readOnlyValue=(0,u.get)(this.selectedOptions,"[0].displayValue",null)}triggerModelToViewValueUpdate(){this.formControl.setValue(this.formControl.value,{emitEvent:!1})}}kc.\u0275fac=function(e){return new(e||kc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](Oc),n["\u0275\u0275directiveInject"](A.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](A.RxNamedListService))},kc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kc,selectors:[["rx-select-group-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","formControl","required","readonly","optionLoader","showDefaultTitle","viewToModelValueAdapter","modelToViewValueAdapter"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Lt,2,2,"ng-container",0),n["\u0275\u0275template"](1,Bt,1,8,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,l.RxSelectWithPaginationComponent,b.NgControlStatus,b.FormControlDirective,b.RequiredValidator],encapsulation:2});class jc{adaptDefinition(e){e.componentDefinitions.forEach(t=>{(0,u.assign)(t.propertiesByName,{disabled:e.propertiesByName.disabled,hidden:e.propertiesByName.hidden,index:Number(t.propertiesByName.index)}),delete t.propertiesByName.labelId});const t={outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:(0,u.sortBy)(e.componentDefinitions,"propertiesByName.index").map(e=>e.guid)}]}]};e.propertiesByName=(0,u.omit)(e.propertiesByName,["disabled","hidden","recordInstance","recordDefinition"]),e.layout=JSON.stringify(t)}}jc.\u0275fac=function(e){return new(e||jc)},jc.\u0275prov=n["\u0275\u0275defineInjectable"]({token:jc,factory:jc.\u0275fac});class Pc{constructor(e,t){this.viewComponentDefinitionAdapterRegistryService=e,this.selectGroupComponentDefinitionAdapterService=t,e.registerRuntimeAdapter(c.RxViewComponentType.SelectGroup,this.selectGroupComponentDefinitionAdapterService)}}Pc.\u0275fac=function(e){return new(e||Pc)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](jc))},Pc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Pc,declarations:[Oc,kc],imports:[h.CommonModule,f.RuntimeViewCanvasModule,b.ReactiveFormsModule,l.RxSelectWithPaginationModule,S.ReadOnlyFieldModule]}),Pc.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[jc],imports:[[h.CommonModule,f.RuntimeViewCanvasModule,b.ReactiveFormsModule,l.RxSelectWithPaginationModule,S.ReadOnlyFieldModule]]});class Nc{constructor(e,t,i){this.rxDefinitionNameService=e,this.rxNamedListDefinitionCacheService=t,this.rxRecordDefinitionCacheService=i,this.definitionPickerOptions={label:"Named list for options",definitionType:l.RxDefinitionPickerType.NamedList,required:!0},this.filterField=[],this.filterFieldIdOptions=[],this.sourceRecordDefinitionDisplayName="",this.fieldId=[]}ngOnInit(){this.onNamedListDefinitionNameChange(!1)}onNamedListDefinitionNameChange(e=!0){(0,o.of)(this.fieldformGroup.get("namedListDefinitionName").value).pipe((0,r.switchMap)(e=>e?this.rxNamedListDefinitionCacheService.getNamedListDefinition(e).pipe((0,r.map)(e=>e.recordDefinitionName)):(0,o.of)(null)),(0,r.take)(1)).subscribe(t=>{this.fieldformGroup.get("sourceRecordDefinitionName").setValue(t,{emitEvent:e}),this.filterFieldIdOptions=[],this.setFilterId(),this.index>0&&(this.setOptionFilterFieldIdOptions(),this.setSourceRecordDefinitionDisplayName())})}setFilterId(){const e=this.fieldformGroup.get("fieldId").value;this.fieldId=(0,u.isEmpty)(e)?[]:[this.targetFieldOptions.find(t=>t.id===e)]}setSourceRecordDefinitionDisplayName(){const e=this.fieldformGroup.get("sourceRecordDefinitionName").value;this.sourceRecordDefinitionDisplayName=e&&this.rxDefinitionNameService.getDisplayName(e)}setOptionFilterFieldIdOptions(){const e=this.fieldformGroup.get("sourceRecordDefinitionName").value;this.filterField=[],e&&this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions.map(e=>({name:e.name,id:String(e.id)})))).subscribe(e=>{const t=this.fieldformGroup.get("optionFilterFieldId").value;this.filterFieldIdOptions=e,this.filterField=(0,u.isEmpty)(t)?[]:[this.filterFieldIdOptions.find(e=>e.id===t)]})}optionFormatter(e){return e.name}onSelectFilterField(e){this.fieldformGroup.get("optionFilterFieldId").setValue((0,u.head)(e).id)}onSelectField(e){this.fieldformGroup.get("fieldId").setValue((0,u.head)(e).id)}}Nc.\u0275fac=function(e){return new(e||Nc)(n["\u0275\u0275directiveInject"](s.RxDefinitionNameService),n["\u0275\u0275directiveInject"](A.RxNamedListDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService))},Nc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Nc,selectors:[["rx-select-group-field"]],inputs:{fieldformGroup:"fieldformGroup",index:"index",targetFieldOptions:"targetFieldOptions"},decls:6,vars:13,consts:[["label","Display label","required","true","rx-id","display-label-field",1,"form-group","d-block",3,"formControl"],["required","true","rx-id","named-list-definition-name-field",1,"form-group","d-block",3,"options","formControl","ngModelChange"],["label","Field for storing selected option value","rx-id","selected-option-value-target-field",3,"ngModel","options","optionFormatter","required","disabled","ngClass","ngModelChange"],["label","Source record definition","class","form-group d-block","disabled","","rx-id","source-record-definition-name-field",3,"ngModel","tooltip",4,"ngIf"],["label","Field for filtering option values","rx-id","option-values-filter-field",3,"ngModel","options","optionFormatter","disabled","tooltip","ngModelChange",4,"ngIf"],["label","Source record definition","disabled","","rx-id","source-record-definition-name-field",1,"form-group","d-block",3,"ngModel","tooltip"],["label","Field for filtering option values","rx-id","option-values-filter-field",3,"ngModel","options","optionFormatter","disabled","tooltip","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"adapt-rx-textfield",0),n["\u0275\u0275elementStart"](2,"rx-definition-picker",1),n["\u0275\u0275listener"]("ngModelChange",function(){return t.onNamedListDefinitionNameChange()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"adapt-rx-select",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSelectField(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,Gt,1,3,"adapt-rx-textfield",3),n["\u0275\u0275template"](5,Ut,1,6,"adapt-rx-select",4),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.fieldformGroup.get("label")),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("options",t.definitionPickerOptions)("formControl",t.fieldformGroup.get("namedListDefinitionName")),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",t.fieldId)("options",t.targetFieldOptions)("optionFormatter",t.optionFormatter)("required",!0)("disabled",t.fieldformGroup.disabled)("ngClass",n["\u0275\u0275pureFunction1"](11,qt,t.index>0)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.index>0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.index>0))},directives:[m.AdaptRxTextfieldComponent,b.RequiredValidator,b.NgControlStatus,b.FormControlDirective,l.RxDefinitionPickerComponent,m.AdaptRxSelectComponent,b.NgModel,h.NgClass,h.NgIf],encapsulation:2});class Vc extends l.InspectorWidgetBase{constructor(e,t,i,n){super(n),this.formBuilder=e,this.rxGuidService=t,this.rxModalService=i,this.formArray=this.formBuilder.array([]),this.maxSelectGroupFieldCount=6,this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.designerItemModel.fieldProperties$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.onWriteValue(e)),this.setDisabledState(this.isDisabled)}onWriteValue(e){var t;null===(t=this.valueChangeSubscription)||void 0===t||t.unsubscribe();const i=e.sort((e,t)=>Number(e.index)-Number(t.index)).map(e=>this.formBuilder.group(Object.assign(Object.assign({},(0,u.omit)(e,"index")),{sourceRecordDefinitionName:{value:null,disabled:!0}})));this.formArray=this.formBuilder.array(i),this.valueChangeSubscription=this.formArray.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(this.onFormValueChange.bind(this))}onFormValueChange(e){const t=e.map((e,t)=>{const i=Object.assign(Object.assign({},(0,u.omit)(e,["sourceRecordDefinitionName","optionFilterFieldId"])),{index:String(t),fieldId:e.namedListDefinitionName?e.fieldId:null});return t>0&&(i.optionFilterFieldId=e.namedListDefinitionName?e.optionFilterFieldId:null),i});this.designerItemModel.onFieldPropertiesChange(t)}addField(){this.formArray.push(this.getFieldFormGroup())}removeField(e){this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Are you sure you want to delete this field?"}).then(t=>{t&&this.formArray.removeAt(e)})}isAddFieldButtonDisabled(){return this.isDisabled||this.formArray.length>=this.maxSelectGroupFieldCount}trackByFn(e,t){return t.get("guid").value}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getFieldFormGroup(){return this.formBuilder.group({guid:this.rxGuidService.generate(),label:null,namedListDefinitionName:null,fieldId:null,sourceRecordDefinitionName:null,optionFilterFieldId:null})}setDisabledState(e){e?this.formArray.disable():this.formArray.enable()}}Vc.\u0275fac=function(e){return new(e||Vc)(n["\u0275\u0275directiveInject"](b.FormBuilder),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](n.Injector))},Vc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vc,selectors:[["rx-field-set-form-control"]],inputs:{options:"options",isDisabled:"isDisabled"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["btn-type","tertiary","rx-id","add-field-button",1,"d-icon-plus_circle","px-0","py-0",3,"disabled","click"],["class","card mt-2","rx-id","select-group-field-card",4,"ngFor","ngForOf","ngForTrackBy"],["rx-id","select-group-field-card",1,"card","mt-2"],[1,"card-block","p-2"],["class","close position-relative","type","button","aria-label","Remove","rx-id","remove-field-button",3,"click",4,"ngIf"],[3,"fieldformGroup","index","targetFieldOptions"],["type","button","aria-label","Remove","rx-id","remove-field-button",1,"close","position-relative",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.addField()}),n["\u0275\u0275text"](1," Add dependent field\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Ht,4,4,"div",1)),2&e&&(n["\u0275\u0275property"]("disabled",t.isAddFieldButtonDisabled()),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.formArray.controls)("ngForTrackBy",t.trackByFn))},directives:[m.AdaptButtonComponent,h.NgForOf,h.NgIf,Nc],styles:[".close[_ngcontent-%COMP%]{z-index:1}"]});class Lc extends d.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxFieldDefinitionService=this.injector.get(a.RxFieldDefinitionService),this.recordEditorGuid$=this.sandbox.getParentComponentGuid(c.RxViewComponentType.RecordEditor).pipe((0,r.take)(1),(0,r.shareReplay)(1)),this.recordEditorMode$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("mode",e))),this.recordDefinitionName$=this.recordEditorGuid$.pipe((0,r.switchMap)(e=>this.sandbox.getComponentPropertyValue("recordDefinitionName",e)),(0,r.shareReplay)(1)),this.fieldDefinitions$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>o.EMPTY)):(0,o.of)(null)),(0,r.distinctUntilChanged)(),(0,r.map)(e=>e&&e.fieldDefinitions?(0,u.filter)(e.fieldDefinitions,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}):[]),(0,r.shareReplay)(1)),this.inspectorTargetFieldOptions$=(0,o.combineLatest)([this.fieldDefinitions$,this.recordEditorMode$]).pipe((0,r.map)(([e,t])=>[(0,u.filter)(e,{resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}),t]),(0,r.map)(([e,t])=>(0,u.flow)(e=>(0,u.filter)(e,e=>{const i=this.rxFieldDefinitionService.isSystemField(e);return!i||i&&t===qs.Edit}),e=>(0,u.map)(e,e=>({name:e.name,id:String(e.id)})),e=>(0,u.sortBy)(e,"name"))(e)),(0,r.shareReplay)(1)),this.fieldsDesignData$=this.sandbox.getChildComponents(),this.fieldProperties$=this.fieldsDesignData$.pipe((0,r.map)(e=>(0,u.map)(e,e=>Object.assign(Object.assign({},e.data),{guid:e.guid})))),(0,o.combineLatest)([this.recordDefinitionName$,this.inspectorTargetFieldOptions$,this.recordEditorGuid$]).pipe((0,r.take)(1)).subscribe(([e,t,i])=>{this.sandbox.updateInspectorConfig(this.getBaseInspectorConfig(t,e,i))}),this.inspectorTargetFieldOptions$.pipe((0,r.withLatestFrom)(this.recordDefinitionName$,this.recordEditorGuid$)).subscribe(([e,t,i])=>{this.sandbox.updateInspectorConfig(this.getBaseInspectorConfig(e,t,i))}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.fieldProperties$]).pipe((0,r.switchMap)(([e,t])=>this.validate(e,t))).subscribe(e=>{this.sandbox.setValidationIssues(e)})}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},c.RX_DISABLED_PROP_DEFAULT_VALUE),c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}onFieldPropertiesChange(e){const t=this.getFieldComponentPayloads(e);this.sandbox.setChildren(t)}isFieldRequired(e){return this.fieldDefinitions$.pipe((0,r.map)(t=>{const i=e.data.fieldId&&(0,u.find)(t,{id:Number(e.data.fieldId)});return Boolean(i)&&i.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.required}))}getPropertiesByName(e){return(0,u.pick)(e,["disabled","hidden","styles",c.RX_AVAILABLE_ON_DEVICES_PROP_NAME])}validate(e,t){const i=[];if((0,u.isEmpty)(t))i.push("Field set cannot be empty.");else{const e=(0,u.filter)(t,e=>e.label);e.length!==t.length&&i.push("Display label cannot be blank."),(0,u.uniqBy)(e,"label").length!==e.length&&i.push("Display labels must be unique."),(0,u.reject)(t,e=>e.namedListDefinitionName).length&&i.push("Named list for options cannot be blank."),(0,u.reject)(t,e=>e.fieldId).length&&i.push("Field for storing selected option value cannot be blank.")}const n=i.map(e=>this.sandbox.createError(e)).concat((0,d.validateStandardProps)(e));return(0,o.of)(n)}getFieldComponentPayloads(e){return(0,u.map)(e,e=>({type:c.RxViewComponentType.SelectGroupField,guid:e.guid,data:(0,u.omit)(e,"guid")}))}getBaseInspectorConfig(e,t,i){const n={label:"General",controls:[]};return n.controls=t?[(0,d.getDisabledFieldInspectorConfig)(),...(0,d.getStandardPropsInspectorConfigs)()]:[{component:l.ValidationFormControlComponent,options:{text:"You must select a Record definition before editing field component.",propertyName:"recordDefinitionName",componentGuid:i}}],{inspectorSectionConfigs:t?[n,{label:"Field set",controls:[{component:Vc,options:{targetFieldOptions:e}}]}]:[n]}}}class Bc{trackByFn(e,t){return t.data.guid}}Bc.\u0275fac=function(e){return new(e||Bc)},Bc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bc,selectors:[["rx-select-group-design"]],inputs:{model:"model"},decls:4,vars:4,consts:[[3,"ngIf","ngIfElse"],["placeholderTemplate",""],["ngModel","","rx-id","select-group-field","class","form-group d-block",3,"label","required","disabled",4,"ngFor","ngForOf","ngForTrackBy"],["ngModel","","rx-id","select-group-field",1,"form-group","d-block",3,"label","required","disabled"],["type","objects","label","Add dependent fields in the Properties panel."]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,Yt,2,4,"ng-template",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,Qt,1,0,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,2,t.model.fieldsDesignData$).length)("ngIfElse",e)}},directives:[h.NgIf,h.NgForOf,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator,m.AdaptEmptyStateComponent],pipes:[h.AsyncPipe],encapsulation:2});class $c{}$c.\u0275fac=function(e){return new(e||$c)},$c.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$c,declarations:[Bc,Vc,Nc],imports:[b.FormsModule,h.CommonModule,m.AdaptButtonModule,b.ReactiveFormsModule,l.RxDefinitionPickerModule,m.AdaptRxTextfieldModule,m.AdaptRxSelectModule,m.AdaptEmptyStateModule],exports:[Bc,Vc,Nc]}),$c.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.FormsModule,h.CommonModule,m.AdaptButtonModule,b.ReactiveFormsModule,l.RxDefinitionPickerModule,m.AdaptRxTextfieldModule,m.AdaptRxSelectModule,m.AdaptEmptyStateModule]]});class Gc{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.SelectGroup,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Oc),properties:[c.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Select group",designComponentFactory:t.resolveComponentFactory(Bc),designComponentModel:Lc,isContainerComponent:!0,group:Tl,icon:"field_dropdowns",options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId},{type:c.RxViewComponentType.SelectGroupField,componentFactory:this.componentFactoryResolver.resolveComponentFactory(kc),properties:Al,isDataComponent:!0})}}Gc.\u0275fac=function(e){return new(e||Gc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Gc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Gc,imports:[Pc,$c]}),Gc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Pc,$c]]});class zc extends Ml{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character],this.translateService=this.injector.get(p.TranslateService)}static getInitialProperties(e){return Object.assign(Object.assign(Object.assign({},Ml.getInitialProperties()),{enableMultiSelection:null,additionalQueryCriteria:null}),e)}getInspectorConfig(){return this.selectedFieldDefinition$.pipe((0,r.switchMap)(e=>super.getInspectorConfig().pipe((0,r.map)(t=>(null==e?void 0:e.namedListDefinition)?this.getNamedListInspectorConfig(t,e):t))))}getNamedListInspectorConfig(e,t){const i=new d.NamedListFilterExpressionConfigurator(t,this.injector),n={name:"enableMultiSelection",component:l.SwitchFormControlComponent,options:{label:"Enable multi-selection"}},o=[{name:"namedListDefinitionName",component:l.RxDefinitionPickerComponent,isDisabled:!0,options:{label:this.translateService.instant("com.bmc.arsys.rx.client.definition-type.named-list.label"),definitionType:l.RX_DEFINITION_PICKER.definitionTypes.namedList.type}},{name:"additionalQueryCriteria",component:l.ExpressionFormControlComponent,options:{label:"Additional named list filter",tooltip:new s.Tooltip("Build a filter to apply at runtime in addition to the filter, if any, specified in the named list definition."),dataDictionary$:i.getDataDictionary(),operators:i.getOperators()}}];return e.inspectorSectionConfigs[0].controls.push(n),e.inspectorSectionConfigs[0].controls.push(...o),this.sandbox.updateComponentProperties({namedListDefinitionName:t.namedListDefinition}),e}getPropertiesByName(e){return(0,u.omit)(super.getPropertiesByName(e),"namedListDefinitionName")}}class Uc{}Uc.\u0275fac=function(e){return new(e||Uc)},Uc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Uc,selectors:[["rx-character-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","",1,"rx-pointer-events-none",3,"required","label","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textfield",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("required",n["\u0275\u0275pipeBind1"](1,3,t.model.isRequired$))("label",n["\u0275\u0275pipeBind1"](2,5,t.model.label$))("disabled",!0)},directives:[m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class qc{}qc.\u0275fac=function(e){return new(e||qc)},qc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:qc,declarations:[Uc],imports:[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]}),qc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]]});class Xc extends d.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.injector=e,this.componentGuid=t,this.componentModel=i;const n=this.componentModel.selectedFieldDefinition$.pipe((0,r.filter)(e=>Boolean(e.namedListDefinition)),(0,r.switchMap)(e=>new d.NamedListFilterExpressionConfigurator(e,this.injector).getDataDictionary()));this.configureForProperty({propertyPath:"additionalQueryCriteria",dataDictionary$:n,operators:s.ExpressionOperatorRowsByGroup.get(s.ExpressionOperatorGroup.AllServer)})}}!function(e){e.Enabled="true",e.Disabled="false"}(Tc||(Tc={}));class Hc extends Pl{constructor(e,t,i,n){super(e),this.fieldDefinitionService=t,this.rxNamedListDefinitionService=i,this.rxNamedListService=n,this.optionLoaderFunc=this.getNamedListOptionPage.bind(this),this.viewToModelValueAdapterFunc=this.viewToModelValueAdapter.bind(this),this.modelToViewValueAdapterFunc=this.modelToViewValueAdapter.bind(this),this.selectedOptions=[],this.multiSelectDelimiter=";",this.isDropdownOpen=!1}onConfigInitialized(e){if(super.onConfigInitialized(e),this.isPasswordField=(0,u.includes)(a.RX_RECORD_DEFINITION.passwordFieldIds,this.fieldId)||this.fieldDefinition.shouldPersistHashed,this.namedListDefinitionName=this.fieldDefinition.namedListDefinition,this.isNamedListAttached=Boolean(this.namedListDefinitionName),this.isMultipleSelectionEnabled=e.enableMultiSelection===Tc.Enabled,this.fieldDefinition.maxLength&&!this.fieldDefinitionService.isSystemField(this.fieldDefinition)&&(this.maxLength=this.fieldDefinition.maxLength),this.isNamedListAttached){const e=this.rxNamedListDefinitionService.get(this.namedListDefinitionName).pipe((0,r.shareReplay)(1),(0,r.take)(1)),t=this.formControl.valueChanges.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.startWith)(this.formControl.value),(0,r.filter)(()=>!this.isDropdownOpen),(0,r.takeUntil)(this.destroyed$));this.config.pipe((0,r.debounceTime)(250),(0,r.pluck)("additionalQueryCriteria"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{(0,u.isNil)(this.additionalQueryCriteria)||(this.selectWithPaginationComponent.resetLoadedOptions(),this.setFieldValue(null)),this.additionalQueryCriteria=e}),(0,o.combineLatest)([e,t]).subscribe(([e])=>{this.namedListDefinition=e,this.updateSelection()})}}getDisplayValue(){let e=super.getDisplayValue();return this.isPasswordField?e="********":this.isNamedListAttached&&(e=this.namedListFormattedValue),e}getNamedListOptionPage(e,t,i){return this.rxNamedListService.getOptionPage(this.namedListDefinition,i,this.additionalQueryCriteria,e,t)}viewToModelValueAdapter(e){return this.selectedOptions=e,this.updateNamedListFormattedValue(),e.map(e=>e.value).join(this.multiSelectDelimiter)}modelToViewValueAdapter(e){return e?this.selectedOptions:[]}onToggleDropdown(e){this.isDropdownOpen=e}getOptionValues(e){return e?(0,u.compact)(e.split(this.multiSelectDelimiter)):[]}updateSelection(){this.showDefaultTitle=!1;const e=this.getOptionValues(this.formControl.value);if(!this.isMultipleSelectionEnabled&&e.length>1)this.selectedOptions=[{displayValue:null,value:this.formControl.value}],this.triggerModelToViewValueUpdate(),this.updateNamedListFormattedValue();else{const t=(0,u.get)(this.selectWithPaginationComponent,"options",[]);(e.every(e=>t.find(t=>t.value===e))?(0,o.of)(t):this.rxNamedListService.getOptionsForValues(this.namedListDefinition,e)).subscribe(t=>{this.showDefaultTitle=!0,!this.isMultipleSelectionEnabled&&e.length>1?this.selectedOptions=[{displayValue:null,value:this.formControl.value}]:this.selectedOptions=e.map(e=>(0,u.find)(t,{value:e})||{displayValue:null,value:e}),this.formControl.dirty&&this.formControl.markAsTouched(),this.triggerModelToViewValueUpdate(),this.updateNamedListFormattedValue()})}}updateNamedListFormattedValue(){if(this.isMultipleSelectionEnabled){const e=50;this.namedListFormattedValue=this.selectedOptions.slice(0,e).map(e=>e.displayValue).filter(Boolean).join(", ")||null,this.selectedOptions.length>=e&&(this.namedListFormattedValue+="...")}else this.namedListFormattedValue=this.selectedOptions.length?(0,u.first)(this.selectedOptions).displayValue:null}triggerModelToViewValueUpdate(){this.formControl.setValue(this.formControl.value,{emitEvent:!1})}}Hc.\u0275fac=function(e){return new(e||Hc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](A.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](A.RxNamedListService))},Hc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hc,selectors:[["rx-text-field"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](l.RxSelectWithPaginationComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectWithPaginationComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["namedListOptionTemplate",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"label","isPassword","formControl","maxlength","required","readonly","disabledStyleForReadonlyState","autocomplete","requiredLabel",4,"ngIf"],[3,"showDefaultTitle","label","formControl","readonly","viewToModelValueAdapter","modelToViewValueAdapter","optionLoader","required","isMultiSelectionMode","template","toggleDropdown",4,"ngIf"],[3,"label","isPassword","formControl","maxlength","required","readonly","disabledStyleForReadonlyState","autocomplete","requiredLabel"],[3,"showDefaultTitle","label","formControl","readonly","viewToModelValueAdapter","modelToViewValueAdapter","optionLoader","required","isMultiSelectionMode","template","toggleDropdown"],["class","text-secondary text-truncate",3,"title",4,"ngIf"],[1,"text-secondary","text-truncate",3,"title"],["class","breadcrumb-item active",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Jt,2,2,"ng-container",0),n["\u0275\u0275template"](1,ti,2,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,oi,2,2,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.FormControlDirective,b.MaxLengthValidator,b.RequiredValidator,l.RxSelectWithPaginationComponent,h.NgForOf],pipes:[p.TranslatePipe],encapsulation:2});class Wc{}Wc.\u0275fac=function(e){return new(e||Wc)},Wc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wc,declarations:[Hc],imports:[h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule,l.RxSelectWithPaginationModule,m.AdaptRxTextfieldModule],exports:[Hc]}),Wc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,S.ReadOnlyFieldModule,b.ReactiveFormsModule,p.TranslateModule,l.RxSelectWithPaginationModule,m.AdaptRxTextfieldModule]]});class Yc{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxRecordQueryExpressionEvaluatorService=i,e.register({type:c.RxViewComponentType.Character,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Hc),properties:[...Al,{name:"enableMultiSelection",designType:c.ViewComponentPropertyType.Boolean},{name:"namedListDefinitionName",designType:c.ViewComponentPropertyType.String},{name:"additionalQueryCriteria",designType:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordQueryExpressionEvaluatorService}],name:"Text",group:Tl,icon:"field_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Uc),designComponentModel:zc,expressionConfigurator:Xc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Yc.\u0275fac=function(e){return new(e||Yc)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxRecordQueryExpressionEvaluatorService))},Yc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yc,imports:[Wc,qc]}),Yc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Wc,qc]]});class Qc extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character]}}class Kc{}Kc.\u0275fac=function(e){return new(e||Kc)},Kc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kc,selectors:[["rx-textarea-field-design"]],inputs:{model:"model"},decls:3,vars:7,consts:[["ngModel","","rows","3",1,"rx-pointer-events-none",3,"label","required","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-rx-textarea",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async")),2&e&&n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,3,t.model.label$))("required",n["\u0275\u0275pipeBind1"](2,5,t.model.isRequired$))("disabled",!0)},directives:[m.AdaptRxTextareaComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class Jc{}Jc.\u0275fac=function(e){return new(e||Jc)},Jc.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Jc,declarations:[Kc],imports:[h.CommonModule,m.AdaptRxTextareaModule,b.FormsModule]}),Jc.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxTextareaModule,b.FormsModule]]});class Zc extends Pl{constructor(e,t){super(e),this.rxFieldDefinitionService=t}onConfigInitialized(e){super.onConfigInitialized(e),this.fieldDefinition.maxLength&&!this.rxFieldDefinitionService.isSystemField(this.fieldDefinition)&&(this.maxLength=this.fieldDefinition.maxLength)}}Zc.\u0275fac=function(e){return new(e||Zc)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService))},Zc.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zc,selectors:[["rx-textarea-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[3,"formControl","required","maxlength","rows","readonly","disabledStyleForReadonlyState","label","requiredLabel"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ai,2,2,"ng-container",0),n["\u0275\u0275template"](1,si,2,10,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxTextareaComponent,b.NgControlStatus,b.FormControlDirective,b.RequiredValidator,b.MaxLengthValidator],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]     textarea{resize:none}[_nghost-%COMP%]     rx-read-only-field .read-only-content{max-height:6em;overflow-y:auto;word-break:break-all;white-space:pre-wrap}"]});class ed{}ed.\u0275fac=function(e){return new(e||ed)},ed.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ed,declarations:[Zc],imports:[h.CommonModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule,m.AdaptRxTextareaModule]}),ed.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.ReactiveFormsModule,S.ReadOnlyFieldModule,p.TranslateModule,m.AdaptRxTextareaModule]]});class td{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Textarea,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Zc),properties:Al,name:"Textarea",group:Tl,icon:"area_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Kc),designComponentModel:Qc,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}td.\u0275fac=function(e){return new(e||td)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},td.\u0275mod=n["\u0275\u0275defineNgModule"]({type:td,imports:[ed,Jc]}),td.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[ed,Jc]]});class id extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]}}class nd{constructor(){this.pickerMode=m.RxDatetimePickerMode.Time}}nd.\u0275fac=function(e){return new(e||nd)},nd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:nd,selectors:[["rx-time-field-design"]],inputs:{model:"model"},decls:3,vars:9,consts:[[1,"rx-pointer-events-none",3,"ngModel","required","disabled","mode","label","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-datetime",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.timeValue=e}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("ngModel",t.timeValue)("required",n["\u0275\u0275pipeBind1"](1,5,t.model.isRequired$))("disabled",!0)("mode",t.pickerMode)("label",n["\u0275\u0275pipeBind1"](2,7,t.model.label$))},directives:[m.AdaptRxDatetimeComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class od{}od.\u0275fac=function(e){return new(e||od)},od.\u0275mod=n["\u0275\u0275defineNgModule"]({type:od,declarations:[nd],imports:[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]}),od.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptRxDatetimeModule,h.CommonModule,b.FormsModule]]});class rd extends m.AdaptRxDatetimeAdapter{constructor(){super(...arguments),this.storeTimeFormat="HH:mm:ss"}fromModel(e){let t=null;const i=(0,I.default)(e,"LTS");return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){return e?e.parseError?I.default.invalid().toString():(0,I.default)({hour:e.hours||0,minute:e.minutes||0,seconds:e.seconds||0}).format(this.storeTimeFormat):null}}rd.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](rd)))(t||rd)}}(),rd.\u0275prov=n["\u0275\u0275defineInjectable"]({token:rd,factory:rd.\u0275fac});class ad extends Pl{constructor(e,t){super(e),this.datePipe=t,this.pickerMode=m.RxDatetimePickerMode.Time}getDisplayValue(){var e;const t=super.getDisplayValue();if(t){const i=(0,I.default)(t,"LTS").toDate();return null!==(e=this.datePipe.transform(i,"mediumTime"))&&void 0!==e?e:"-"}return"-"}getFieldValidators(){return[e=>{const t=e.value?(0,I.default)(e.value,"LTS"):null;return e.value&&t&&!t.isValid()?{rxDatetimeFormat:{mode:this.pickerMode,hasSeconds:!0}}:null}]}}ad.\u0275fac=function(e){return new(e||ad)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](h.DatePipe))},ad.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ad,selectors:[["rx-time-field"]],features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:rd}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],["hasSeconds","true",3,"label","required","formControl","readonly","disabledStyleForReadonlyState","mode"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ci,2,2,"ng-container",0),n["\u0275\u0275template"](1,di,1,6,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxDatetimeComponent,b.RequiredValidator,b.NgControlStatus,b.FormControlDirective],encapsulation:2});class sd{}sd.\u0275fac=function(e){return new(e||sd)},sd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:sd,declarations:[ad],imports:[m.AdaptRxDatetimeModule,h.CommonModule,S.ReadOnlyFieldModule,p.TranslateModule,b.ReactiveFormsModule]}),sd.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[h.DatePipe],imports:[[m.AdaptRxDatetimeModule,h.CommonModule,S.ReadOnlyFieldModule,p.TranslateModule,b.ReactiveFormsModule]]});class ld{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Time,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ad),properties:Al,name:"Time",group:Tl,icon:"clock_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(nd),designComponentModel:id,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}ld.\u0275fac=function(e){return new(e||ld)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},ld.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ld,imports:[sd,od]}),ld.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[sd,od]]});class cd extends f.BaseViewComponent{constructor(e,t){super(),this.rxRecordDefinitionCacheService=e,this.rxRecordDefinitionService=t,this.recordDefinitions={}}ngOnInit(){super.ngOnInit(),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state=e})}loadRecordDefinition(e){this.rxRecordDefinitionCacheService.getRecordDefinition(e).subscribe(t=>{t.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(t),this.recordDefinitions[e]=t,this.notifyPropertyChanged("recordDefinitions",this.recordDefinitions)})}}cd.\u0275fac=function(e){return new(e||cd)(n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService))},cd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:cd,selectors:[["rx-extension-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"hidden"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("hidden",t.state.hidden)},directives:[f.RuntimeViewCanvasOutletComponent],encapsulation:2});class dd{getSelectionFieldOptionNamesByIdExpression(e){return`${e}:selectionFieldOptionNamesById`}}dd.\u0275fac=function(e){return new(e||dd)},dd.\u0275prov=n["\u0275\u0275defineInjectable"]({token:dd,factory:dd.\u0275fac});class pd extends f.BaseViewComponent{constructor(e,t,i,n,o){super(),this.rxExtensionContainerComponent=e,this.rxRecordInstanceService=t,this.rxRecordEditorUtilsService=i,this.rxExtensionContainerHelperService=n,this.recordEditorComponent=o,this.isInitialized=!1,this.selectionFieldOptionNamesById=null}ngOnInit(){super.ngOnInit(),(0,o.combineLatest)([this.config,this.recordEditorComponent.recordInstanceChanged$.pipe((0,r.startWith)(null))]).pipe((0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{if(e.recordDefinitionName&&this.rxExtensionContainerComponent.loadRecordDefinition(e.recordDefinitionName),!e.associationDefinitionName)return this.isInitialized=!0;if(e.api){let t=null;this.recordEditorComponent.state.mode===qs.Edit&&(t=this.recordEditorComponent.state.recordInstance.id);const i=e.api.getAssociationManager({associationDefinitionName:e.associationDefinitionName,associatedRecordNodeSide:C.RX_ASSOCIATION_DEFINITION.roles.second.value,associatedRecordInstanceId:t,recordDefinitionName:e.recordDefinitionName,allFieldIds:!0,associatedRecordPath:e.associatedRecordPath});let n;this.recordEditorComponent.state.mode===qs.Edit?n=i.loadExtensions().pipe((0,r.switchMap)(e=>(0,u.isEmpty)(i.extensions)?this.addNewRecordInstanceToExtension(i):(0,o.of)(e))):this.recordEditorComponent.state.mode!==qs.Create&&this.recordEditorComponent.state.mode!==qs.Temporary||(n=(0,o.forkJoin)([i.initialize(),this.addNewRecordInstanceToExtension(i)])),n.pipe((0,r.tap)(()=>{this.isInitialized=!0}),(0,r.switchMap)(()=>{const e=i.extensions$.pipe((0,r.map)(e=>e[0]),(0,r.tap)(e=>this.updateSelectionFieldOptionNames(e)),(0,r.shareReplay)(1));return e.pipe((0,r.switchMap)(e=>e.fieldValueChanged$),(0,r.withLatestFrom)(e))}),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.updateSelectionFieldOptionNames(t)})}})}addNewRecordInstanceToExtension(e){return this.rxRecordInstanceService.getNew(e.options.recordDefinitionName).pipe((0,r.tap)(t=>{t.isNewInstance=!0,e.addExtension(t)}))}updateSelectionFieldOptionNames(e){if((0,u.get)(e,"recordDefinition.fieldDefinitions")){const t=this.rxRecordEditorUtilsService.getSelectionFieldOptionNames(e.recordDefinition,e);if(!(0,u.isEqual)(this.selectionFieldOptionNamesById,t)){const e=this.rxExtensionContainerHelperService.getSelectionFieldOptionNamesByIdExpression(this.guid);this.rxExtensionContainerComponent.notifyPropertyChanged(e,t)}}}}pd.\u0275fac=function(e){return new(e||pd)(n["\u0275\u0275directiveInject"](cd),n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](il),n["\u0275\u0275directiveInject"](dd),n["\u0275\u0275directiveInject"](sl))},pd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pd,selectors:[["rx-extension-container-section"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[4,"ngIf"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"h5"),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,pi,1,0,"rx-runtime-view-canvas-outlet",0)),2&e){let e;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](null==(e=n["\u0275\u0275pipeBind1"](2,2,t.config))?null:e.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isInitialized)}},directives:[h.NgIf,f.RuntimeViewCanvasOutletComponent],pipes:[h.AsyncPipe],encapsulation:2});const ud={type:c.RxViewComponentType.ExtensionContainer,recordDefinitionsReferencingExpression:"recordDefinitions",extensionContainerSectionComponent:"rx-extension-container-section"};class md{constructor(e,t,i,n,o,r,a,s,l,c){this.rxViewDefinitionParserService=e,this.rxViewDefinitionDataPageService=t,this.rxGlobalCacheService=i,this.rxDefinitionNameService=n,this.rxTreeService=o,this.rxExtensionContainerHelperService=r,this.rxNotificationService=a,this.rxRuntimeViewUtilsService=s,this.rxViewDefinitionLocalizationService=l,this.translateService=c}adaptDefinition(e,t){const i=this.getTargetRecordEditorComponentDefinition(t,e);return e.propertiesByName.mode=i.propertiesByName.mode,this.getExtensionViewDefinitions(e.guid).pipe((0,r.map)(this.getViewDefinitionMap.bind(this)),(0,r.map)(this.filterDuplicatedRecordEditorComponentDefinitions.bind(this)),(0,r.map)(e=>this.filterIncompatibleRecordEditorComponentDefinitions(e,i)),(0,r.switchMap)(this.setRecordEditorLabels.bind(this)),(0,r.map)(this.getExtensionRecordEditorComponentDefinitions.bind(this)),(0,r.switchMap)(n=>{const a=()=>{e.componentDefinitions=[],e.resourceType=c.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,(0,u.forEach)(n,t=>{this.processRecordEditorComponentDefinition(t,i,e),e.componentDefinitions.push(this.getExtensionContainerSectionViewComponentDefinition(t,i))});const t=e.componentDefinitions.map(e=>e.guid);return e.layout=JSON.stringify({outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:t}]}]}),n},s=n.map(e=>(0,o.combineLatest)([...this.rxRuntimeViewUtilsService.runAdaptersForComponents(t,e)]));return(0,o.combineLatest)(s).pipe((0,r.tap)({complete:()=>a()}))}))}getExtensionViewDefinitions(e){return this.rxViewDefinitionDataPageService.get({params:{propertySelection:["name","targetExtensionContainerGuid","targetViewDefinitionName","componentDefinitions","localizableStringsByComponentId","lastUpdateTime"],viewType:c.ViewDefinitionType.Regular,targetExtensionContainerGuid:e,excludeExtensionViews:!1},headers:{"default-bundle-scope":""}}).pipe((0,r.map)(e=>{const t=[];return(0,u.forEach)(e.data,e=>{var i;this.rxViewDefinitionLocalizationService.applyLocalization(e);const n=null===(i=e.componentDefinitions[0])||void 0===i?void 0:i.propertiesByName.associationDefinitionName;(0,u.isString)(n)&&(t.includes(n)?this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-editor.extension-container.duplicate-extensions.warning")):t.push(n))}),e.data}))}getTargetRecordEditorComponentDefinition(e,t){return this.rxViewDefinitionParserService.findParentComponentDefinition(e,t,e=>e.type===c.RxViewComponentType.RecordEditor)}getViewDefinitionMap(e){return(0,u.reduce)(e,(e,t)=>{const i=t.componentDefinitions[0];return i&&e.push({viewDefinition:t,recordEditorComponentDefinition:i}),e},[])}filterDuplicatedRecordEditorComponentDefinitions(e){return(0,u.values)((0,u.reduce)(e,(e,t)=>{if(!t.recordEditorComponentDefinition.propertiesByName.associationDefinitionName)return e[t.recordEditorComponentDefinition.guid]=t,e;const i=[t.recordEditorComponentDefinition.propertiesByName.recordDefinitionName,t.recordEditorComponentDefinition.propertiesByName.associationDefinitionName].join("");return e[i]?(0,I.default)(t.viewDefinition.lastUpdateTime)<(0,I.default)(e[i].viewDefinition.lastUpdateTime)&&(e[i]=t):e[i]=t,e},{}))}filterIncompatibleRecordEditorComponentDefinitions(e,t){return(0,u.filter)(e,e=>{const i=e.recordEditorComponentDefinition.propertiesByName.mode===t.propertiesByName.mode,n=t.propertiesByName.recordDefinitionName===e.recordEditorComponentDefinition.propertiesByName.recordDefinitionName,o=e.recordEditorComponentDefinition.propertiesByName.associationDefinitionName;return n&&!o&&i||o&&i})}setRecordEditorLabels(e){return(0,o.forkJoin)([...e.map(e=>{let t;return t=e.recordEditorComponentDefinition.propertiesByName.label?(0,o.of)(e.recordEditorComponentDefinition.propertiesByName.label):this.rxGlobalCacheService.getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(e.viewDefinition.name)),t.pipe((0,r.map)(t=>(e.recordEditorComponentDefinition.propertiesByName.label=t,e)))})])}getExtensionRecordEditorComponentDefinitions(e){return(0,u.map)(e,"recordEditorComponentDefinition")}processRecordEditorComponentDefinition(e,t,i){return this.rxTreeService.flattenTree(e,"componentDefinitions").forEach(n=>{this.patchFieldComponentExpressions(n,e,t,i)}),e}patchFieldComponentExpressions(e,t,i,n){const o=t.propertiesByName.associationDefinitionName?[i.guid,".","recordInstance.associationInstances['",t.propertiesByName.associationDefinitionName,"'].",C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,".extensions[0]"].join(""):[i.guid,".recordInstance"].join(""),r=[o,".recordDefinitionName"].join(""),a=t.propertiesByName.associationDefinitionName?[n.guid,".",ud.recordDefinitionsReferencingExpression,"['",t.propertiesByName.recordDefinitionName,"']"].join(""):[i.guid,".recordDefinition"].join(""),s=[o,".id"].join("");let l;l=t.propertiesByName.associationDefinitionName?[n.guid,".",this.rxExtensionContainerHelperService.getSelectionFieldOptionNamesByIdExpression(t.guid)].join(""):`${i.guid}.selectionFieldOptionNamesById`;const c=[{regExp:new RegExp(t.guid+".recordInstanceId","g"),expression:s},{regExp:new RegExp(t.guid+".recordInstance","g"),expression:o},{regExp:new RegExp(t.guid+".recordDefinitionName","g"),expression:r},{regExp:new RegExp(t.guid+".recordDefinition","g"),expression:a},{regExp:new RegExp(t.guid+".selectionFieldOptionNamesById","g"),expression:l},{regExp:new RegExp(`${t.guid}\\.(\\w+)}`,"g"),expression:`${i.guid}.$1}`}];["disabled","hidden","value","html"].filter(t=>(0,u.isString)(e.propertiesByName[t])).forEach(t=>{(0,u.forEach)(c,i=>{e.propertiesByName[t]=e.propertiesByName[t].replace(i.regExp,i.expression)})}),e.propertiesByName.api=`\${view.components.${i.guid}.api}`,e.propertiesByName.inReadState=`\${view.components.${i.guid}.inReadState}`,t.propertiesByName.associationDefinitionName&&(e.propertiesByName.associatedRecordPath=[t.propertiesByName.associationDefinitionName,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,"extensions",0]),e.propertiesByName.recordInstance&&(e.propertiesByName.recordInstance=["${view.components.",o,"}"].join("")),e.propertiesByName.recordDefinition&&(e.propertiesByName.recordDefinition=["${view.components.",a,"}"].join(""))}getExtensionContainerSectionViewComponentDefinition(e,t){return{guid:e.guid,type:ud.extensionContainerSectionComponent,layout:e.layout,resourceType:c.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,componentDefinitions:e.componentDefinitions,propertiesByName:{label:e.propertiesByName.label,styles:e.propertiesByName.styles,recordDefinitionName:e.propertiesByName.recordDefinitionName,associationDefinitionName:e.propertiesByName.associationDefinitionName,[c.RX_AVAILABLE_ON_DEVICES_PROP_NAME]:e.propertiesByName[c.RX_AVAILABLE_ON_DEVICES_PROP_NAME],api:`\${view.components.${t.guid}.api}`,associatedRecordPath:[e.propertiesByName.associationDefinitionName,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,"extensions",0]}}}}md.\u0275fac=function(e){return new(e||md)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService),n["\u0275\u0275inject"](c.RxViewDefinitionDataPageService),n["\u0275\u0275inject"](s.RxGlobalCacheService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](v.RxTreeService),n["\u0275\u0275inject"](dd),n["\u0275\u0275inject"](s.RxNotificationService),n["\u0275\u0275inject"](f.RxRuntimeViewUtilsService),n["\u0275\u0275inject"](c.RxViewDefinitionLocalizationService),n["\u0275\u0275inject"](p.TranslateService))},md.\u0275prov=n["\u0275\u0275defineInjectable"]({token:md,factory:md.\u0275fac});class hd{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.rxExtensionContainerDefinitionAdapterService=t,e.registerRuntimeAdapter(ud.type,this.rxExtensionContainerDefinitionAdapterService)}}hd.\u0275fac=function(e){return new(e||hd)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](md))},hd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:hd,declarations:[cd,pd],imports:[h.CommonModule,f.RuntimeViewCanvasModule],exports:[cd]}),hd.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[md,dd],imports:[[h.CommonModule,f.RuntimeViewCanvasModule]]});class fd extends d.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.parentGuid$=this.sandbox.getParentComponentGuid(c.RxViewComponentType.RecordEditor).pipe((0,r.take)(1)),this.initialProperties=Object.assign({name:"",recordDefinition:"",recordInstance:""},c.RX_STANDARD_PROPS_DEFAULT_VALUES),(0,o.combineLatest)([this.parentGuid$,this.componentProperties$]).pipe((0,r.first)()).subscribe(([e,t])=>{const i=Object.assign(Object.assign(Object.assign({},this.initialProperties),t),{recordInstance:`\${view.components.${e}.recordInstance}`,recordDefinition:`\${view.components.${e}.recordDefinition}`});this.sandbox.updateComponentProperties(i),this.sandbox.updateInspectorConfig(this.getInspectorConfig())}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("name").pipe((0,r.map)(e=>{if((0,u.isEmpty)(e))return this.sandbox.createError("Name cannot be blank.","name")})),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(d.validateCssClassNames)),this.sandbox.getComponentPropertyValue(c.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(d.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e))}getInspectorConfig(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",required:!0,tooltip:new s.Tooltip("Enter a name to uniquely identify the Extension container")}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}}class gd{}gd.\u0275fac=function(e){return new(e||gd)},gd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:gd,selectors:[["rx-extension-container-design"]],inputs:{model:"model"},decls:1,vars:0,consts:[["type","objects","label","Contains fields from extensions of the record definition."]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",0)},directives:[m.AdaptEmptyStateComponent],encapsulation:2});class vd{}vd.\u0275fac=function(e){return new(e||vd)},vd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:vd,declarations:[gd],imports:[h.CommonModule,m.AdaptEmptyStateModule]}),vd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptEmptyStateModule]]});class xd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:ud.type,componentFactory:this.componentFactoryResolver.resolveComponentFactory(cd),properties:c.RX_STANDARD_PROPS_DESC,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Extension container",group:Tl,icon:"widget",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(gd),designComponentModel:fd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId},{type:ud.extensionContainerSectionComponent,componentFactory:this.componentFactoryResolver.resolveComponentFactory(pd),properties:[{name:"api",enableExpressionEvaluation:!0}],outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}]})}}xd.\u0275fac=function(e){return new(e||xd)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},xd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xd,imports:[hd,vd]}),xd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hd,vd]]});class yd extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.character]}getInspectorConfig(){return super.getInspectorConfig().pipe((0,r.withLatestFrom)(this.availableFieldDefinitions$),(0,r.map)(([e,t])=>{const i=t.filter(e=>!e.maxLength).map(e=>({id:String(e.id),name:e.name})),n=(0,u.cloneDeep)(e);return n.inspectorSectionConfigs[0].controls[0].options.options=[...i],n}))}}class bd{constructor(e){this.rxCkEditorConfiguratorService=e,this.ckEditorType="divarea",this.ckEditorConfig=this.rxCkEditorConfiguratorService.getCKEditorConfig()}}bd.\u0275fac=function(e){return new(e||bd)(n["\u0275\u0275directiveInject"](c.RxCkEditorConfiguratorService))},bd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bd,selectors:[["rx-rich-textarea-field-design"]],inputs:{model:"model"},decls:8,vars:9,consts:[["class","form-control-required",4,"ngIf"],[1,"mt-1"],[3,"type","config","readOnly"],[1,"form-control-required"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"strong"),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275template"](4,ui,2,0,"span",0),n["\u0275\u0275pipe"](5,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",1),n["\u0275\u0275element"](7,"ckeditor",2),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,5,t.model.label$)," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](5,7,t.model.isRequired$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("type",t.ckEditorType)("config",t.ckEditorConfig)("readOnly",!0))},directives:[h.NgIf,T.CKEditorComponent],pipes:[h.AsyncPipe],styles:["ckeditor[_ngcontent-%COMP%]     .cke_inner{box-shadow:none}"]});class Cd{}Cd.\u0275fac=function(e){return new(e||Cd)},Cd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cd,declarations:[bd],imports:[h.CommonModule,T.CKEditorModule]}),Cd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,T.CKEditorModule]]});class Sd extends Pl{constructor(e,t){super(e),this.rxCkEditorConfiguratorService=t,this.ckEditorType="divarea",this.ckEditorConfig=this.rxCkEditorConfiguratorService.getCKEditorConfig()}setFieldValue(e,t={}){null===this.formControl.value&&""===e||super.setFieldValue(e)}onBlur(){this.formControl.markAsTouched()}}Sd.\u0275fac=function(e){return new(e||Sd)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](c.RxCkEditorConfiguratorService))},Sd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Sd,selectors:[["rx-rich-textarea-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],["class","read-only-content-wrapper focusable","tabindex","0",4,"ngIf","ngIfElse"],["tabindex","0",1,"read-only-content-wrapper","focusable"],[3,"config","type","readOnly","ngModel"],[3,"label","showRequiredLabel"],[3,"data","config","type","readOnly","dataChange","blur"],[3,"errors","controlTouched"],["adaptRxFeedbackRef",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,hi,2,2,"ng-container",0),n["\u0275\u0275template"](1,fi,5,10,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,T.CKEditorComponent,b.NgControlStatus,b.NgModel,m.AdaptRxControlLabelComponent,m.AdaptRxFeedbackComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}ckeditor[_ngcontent-%COMP%]     .cke_inner{box-shadow:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke{border:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke_top{display:none}.read-only-content-wrapper[_ngcontent-%COMP%]   ckeditor[_ngcontent-%COMP%]     .cke_editable{padding:0}.has-danger[_ngcontent-%COMP%]     .cke{border-color:#f83200}']});class wd{}wd.\u0275fac=function(e){return new(e||wd)},wd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wd,declarations:[Sd],imports:[h.CommonModule,b.FormsModule,m.AdaptRxFormControlModule,p.TranslateModule,b.ReactiveFormsModule,T.CKEditorModule]}),wd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptRxFormControlModule,p.TranslateModule,b.ReactiveFormsModule,T.CKEditorModule]]});class Id{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.RichTextarea,properties:Al,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Sd),name:"Rich text area",icon:"text_colorpicker_adapt",group:Tl,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(bd),designComponentModel:yd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Id.\u0275fac=function(e){return new(e||Id)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Id.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Id,imports:[Cd,wd]}),Id.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Cd,wd]]});class _d extends Pl{constructor(e,t,i){super(e),this.rxModalService=t,this.rxLocalizationService=i}onConfigUpdated(e){super.onConfigUpdated(e);const t=this.getFieldValue();if(this.hideCurrentLocale=this.getFieldInstanceProp("hideCurrentLocale"),e.value===t){const e=this.getFieldInstanceProp("valueByLocale");e[this.rxLocalizationService.currentLocale]=t,this.setFieldInstanceProp("valueByLocale",e)}}shouldShowValidationError(){return this.isRequired&&!this.formControl.value&&(this.formControl.touched||this.formControl.dirty)}selectLocalizedValue(){const e=this.getFieldInstanceProp("valueByLocale");this.rxModalService.openModal({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.localized-character-field.dialog.title"),data:{fieldDefinition:this.fieldDefinition,valueByLocale:(0,u.cloneDeep)(e),hideCurrentLocale:this.hideCurrentLocale},size:"sm",content:l.LocalizedCharacterFieldValueModalComponent}).then(e=>{e&&this.setLocalizedFieldValue(e.valueByLocale,e.currentLocaleValue)}).catch(u.noop)}setLocalizedFieldValue(e,t){const i=this.rxLocalizationService.currentLocale,n=t||e[i]||e["en-US"],o=this.getFieldInstanceProp("valueByLocale");(0,u.isEqual)(e,o)||(this.setFieldInstanceProp("valueByLocale",e),this.formControl.markAsDirty(),this.recordEditorApi.markAsDirty()),this.setFieldValue(n)}}_d.\u0275fac=function(e){return new(e||_d)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](s.RxLocalizationService))},_d.\u0275cmp=n["\u0275\u0275defineComponent"]({type:_d,selectors:[["rx-localized-character-field"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:1,consts:[[4,"ngIf"],["editStateElementRef",""],[3,"label","value",4,"ngIf","ngIfElse"],[3,"label","value"],[1,"d-flex","justify-content-between"],[3,"label","id","showRequiredLabel"],["type","button",1,"localize-button","btn","btn-link","focusable","d-icon-left-pencil","p-0",3,"disabled","click"],[1,"mb-0",3,"readonly","formControl","disabledStyleForReadonlyState","required"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,vi,2,2,"ng-container",0),n["\u0275\u0275template"](1,xi,6,15,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,S.ReadOnlyFieldComponent,m.AdaptRxControlLabelComponent,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.FormControlDirective,b.RequiredValidator],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.localize-button[_ngcontent-%COMP%]:hover{text-decoration:underline}[_nghost-%COMP%]     .form-control-feedback{color:#f83200}[_nghost-%COMP%]     .has-danger .form-control{border-color:#f83200!important}']});class Dd{}Dd.\u0275fac=function(e){return new(e||Dd)},Dd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Dd,declarations:[_d],imports:[h.CommonModule,b.FormsModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptTooltipModule,m.AdaptButtonModule,p.TranslateModule,m.AdaptBusyModule,S.RxBusyIndicatorModule,m.AdaptRxTextfieldModule,b.ReactiveFormsModule]}),Dd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptRxFormControlModule,S.ReadOnlyFieldModule,m.AdaptTooltipModule,m.AdaptButtonModule,p.TranslateModule,m.AdaptBusyModule.forRoot(),S.RxBusyIndicatorModule,m.AdaptRxTextfieldModule,b.ReactiveFormsModule]]});class Rd extends Ml{constructor(){super(...arguments),this.fieldResourceTypes=[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]}}class Ad{}Ad.\u0275fac=function(e){return new(e||Ad)},Ad.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ad,selectors:[["rx-localized-character-field-design"]],inputs:{model:"model"},decls:5,vars:7,consts:[["type","button",1,"btn","float-end","p-0","btn-link","d-icon-left-pencil"],["ngModel","",1,"rx-pointer-events-none",3,"label","required","disabled"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275text"](1,"Localize"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](2,"adapt-rx-textfield",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](3,3,t.model.label$))("required",n["\u0275\u0275pipeBind1"](4,5,t.model.isRequired$))("disabled",!0))},directives:[m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator],pipes:[h.AsyncPipe],encapsulation:2});class Td{}Td.\u0275fac=function(e){return new(e||Td)},Td.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Td,declarations:[Ad],imports:[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]}),Td.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxTextfieldModule,b.FormsModule]]});class Fd{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.LocalizedCharacter,componentFactory:this.componentFactoryResolver.resolveComponentFactory(_d),properties:Al,name:"Localized text",icon:"field_text_mapmarker",group:Tl,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ad),designComponentModel:Rd,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),bundleId:s.RX_APPLICATION.platformBundleId})}}Fd.\u0275fac=function(e){return new(e||Fd)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Fd.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Fd,imports:[Dd,Td]}),Fd.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Dd,Td]]});class Ed{}var Md,Od;Ed.\u0275fac=function(e){return new(e||Ed)},Ed.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ed,imports:[El,$l,Yl,ic,cc,gc,Cc,Mc,td,Gc,Yc,ld,xd,Fd,Id],exports:[El,$l,Yl,ic,cc,gc,Cc,Mc,td,Gc,Yc,ld,xd,Fd,Id]}),Ed.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[El,$l,Yl,ic,cc,gc,Cc,Mc,td,Gc,Yc,ld,xd,Fd,Id],El,$l,Yl,ic,cc,gc,Cc,Mc,td,Gc,Yc,ld,xd,Fd,Id]}),function(e){e.Xsmall="450",e.Small="650",e.Medium="800",e.Large="1024",e.Xlarge="1200",e.Xxlarge="1600"}(Md||(Md={})),function(e){e.Default="false",e.Left="Left",e.Right="Right",e.Center="Center"}(Od||(Od={}));const kd=[{name:"visible",defaultValue:!0,label:"Visible"},{name:"sortable",defaultValue:!0,label:"Sortable",tooltip:new s.Tooltip("Sorting will be disabled for character fields longer than 4000 characters.")},{name:"filterable",defaultValue:!0,label:"Filterable"},{name:"searchable",label:"Searchable",defaultValue:!0},{name:"width",label:"",defaultValue:null,options:{label:"Width",defaultUnit:"px",units:[{name:"pixels",id:"px"},{name:"percent",id:"%"}],stepperOptionByUnits:{px:{minValue:1},"%":{minValue:1,maxValue:100}}}},{name:"wrapText",defaultValue:!1,label:"Wrap text"},{name:"alignment",defaultValue:!1,label:"Alignment",selectionValues:[{name:"Align left",value:Od.Left,icon:"d-icon-align_left_adapt"},{name:"Center",value:Od.Center,icon:"d-icon-align_center_adapt"},{name:"Align right",value:Od.Right,icon:"d-icon-align_right_adapt"}]},{name:"typeaheadKeystrokeCount",label:"",defaultValue:1,options:{label:"Typeahead keystroke count",options:[{id:0,name:"0"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"}],emptyOption:!1}}],jd={type:"rx-record-grid",version:"1.0",defaultColumnMinWidth:45,defaultRowHeight:37,components:{filter:"rx-record-grid-filter",column:"rx-record-grid-column",filterPreset:"rx-record-grid-filter-preset",viewPreset:"rx-record-grid-view-preset",columnViewPreset:"rx-record-grid-column-view-preset"},columnAlignment:{left:"Left",right:"Right",center:"Center"},selectionTypes:{multiple:"multiple",single:"single"},userPreferences:{filters:"filters",columns:"columns"},cardLayoutWidthOptions:[{id:Md.Xsmall,name:"Extra Small (450px)"},{id:Md.Small,name:"Small (650px)"},{id:Md.Medium,name:"Medium (800px)"},{id:Md.Large,name:"Large (1024px)"},{id:Md.Xlarge,name:"Extra Large (1200px)"},{id:Md.Xxlarge,name:"Extra Extra Large (1600px)"}],actionsColumnProperties:[{name:"visible",defaultValue:!0,label:"Visible"}],columnProperties:kd,sharedFilterPresets:{recordDefinitionName:"Record Grid Filter Presets",fields:{recordGridGuid:300000001,name:300000002,filterExpression:300000003,sortOrder:300000004,isDefault:300000005}},defaultFilter:"{}",associatedFieldIdPrefixPattern:c.RX_EXPRESSION_EVALUATOR.associatedFieldIdPrefixPattern,defaultPageSize:50,rowActionsOutletName:"ROW_ACTIONS",actionsColumnFieldDefinition:{name:"Actions",id:"$ACTIONS$"},numberOfFiltersOptions:[{id:0,name:"None"},{id:1,name:"1"},{id:2,name:"2"},{id:3,name:"3"},{id:4,name:"4"},{id:5,name:"5"}],defaultTypeaheadKeystrokeCount:1,externalPresetFilterOptionId:"$EXTERNAL_PRESET$"};class Pd{constructor(e,t,i,n,o){this.rxLogService=e,this.rxRecordDefinitionCacheService=t,this.stringService=i,this.rxDefinitionNameService=n,this.rxFieldDefinitionService=o}getColumnDescriptors(e,t){return this.rxRecordDefinitionCacheService.getRecordDefinition(e).toPromise().then(e=>{if((0,u.isFunction)(t.getColumns)){const i=t.getColumns().map((e,t)=>({fieldId:e.field,index:t,title:e.header,fieldDefinition:e.fieldDefinition}));return Promise.all(i.filter(e=>this.isAssociatedRecordFieldId(e.fieldId)).map(t=>this.getAssociationDescriptor(t.fieldId,e).toPromise().then(e=>{t.associationDescriptor=e}))).then((0,u.constant)(i))}return e.fieldDefinitions.map((e,t)=>({fieldId:e.id,index:t,title:e.name,fieldDefinition:e}))})}getAssociationDescriptors(e){return(0,o.forkJoin)([this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e),this.rxRecordDefinitionCacheService.getRecordDefinition(e)]).pipe((0,r.map)(([t,i])=>{const n=[];return(0,u.forEach)(t[e],t=>{const o=t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.oneToMany.value;t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value||(this.isNeedSide(t.nodeBId,e,i)&&n.push({associationDefinition:t,recordDefinitionName:t.nodeAId,nodeSide:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,label:this.getAssociationLabel(t,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA)}),this.isNeedSide(t.nodeAId,e,i)&&!o&&n.push({associationDefinition:t,recordDefinitionName:t.nodeBId,nodeSide:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,label:this.getAssociationLabel(t,C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB)}))}),(0,u.sortBy)(n,"label")}))}getFieldDefinition(e,t){const i=this.getFieldLocator(e),n=new o.AsyncSubject;let a;return i.fieldId===jd.actionsColumnFieldDefinition.id?(0,o.of)(jd.actionsColumnFieldDefinition):(a=i.associationGuid?this.getAssociationDescriptors(t.name).pipe((0,r.map)(e=>this.findAssociationDescriptor(e,i)),(0,r.filter)(e=>Boolean(e)),(0,r.map)(e=>e.associationDefinition[C.RX_ASSOCIATED_RECORD_NODE_SIDES[e.nodeSide].recordDefinitionNameKey]),(0,r.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))).toPromise():Promise.resolve(t),a.then(e=>{let t;e&&(t=(0,u.find)(e.fieldDefinitions,{id:Number(i.fieldId)||i.fieldId})),n.next(t),n.complete()}),n)}isAssociatedRecordFieldId(e){return!(0,u.some)(this.getFieldLocator(e),u.isUndefined)}getFieldIdForGridColumn(e,t){return t?`recordContext._associations.${t.associationDefinition.guid}.${t.nodeSide}[0].${e}`:String(e)}getAssociationDescriptor(e,t){const i=this.getFieldLocator(e);let n=(0,o.of)(null);return i.associationGuid&&(n=this.getAssociationDescriptors(t.name).pipe((0,r.map)(e=>this.findAssociationDescriptor(e,i)))),n}getDisplayFieldDescriptor(e,t,i){const n=this.getFieldLocator(e);return this.isAssociatedRecordFieldId(e)?this.rxRecordDefinitionCacheService.getRecordDefinition(i).pipe((0,r.map)(e=>{const t=n.fieldId===String(a.RX_RECORD_DEFINITION.coreFieldIds.id),i=String(t&&e.displayFieldIdInAssociation||n.fieldId);return(0,u.find)(e.fieldDefinitions,e=>String(e.id)===i)})):(0,o.of)((0,u.find)(t.fieldDefinitions,t=>String(t.id)===e))}getColumnLabel(e,t){return t?`${t.label} > ${e.name}`:e.name}findAssociationDescriptor(e,t){return(0,u.find)(e,e=>e.associationDefinition.guid===t.associationGuid&&e.nodeSide===t.associationNodeSide)}getFieldLocator(e){const t=new RegExp("(?:"+jd.associatedFieldIdPrefixPattern+")?(.+)").exec(e);return{associationGuid:t[1],associationNodeSide:t[2],fieldId:t[3]}}isNeedSide(e,t,i){return(0,u.includes)([t,(0,u.get)(i,"inheritanceDescriptor.inheritingFrom")],e)}getAssociationLabel(e,t){let i,n=this.rxDefinitionNameService.getDisplayName(e.name);return e.nodeAId===e.nodeBId&&(t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA&&(i=e.nodeAName),t===C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB&&(i=e.nodeBName),i=i||t.defaultName,n+=" ("+i+")"),n}isSharedFilterPresetTag(e){return e.data.isSharedFilterPreset}getTestIdForGridColumn(e){if(this.isAssociatedRecordFieldId(e)){const t=this.getFieldLocator(e);return`field-id-${t.associationGuid}-${t.fieldId}`}return`field-id-${e}`}isSearchable(e,t){return(0,u.includes)([a.RX_RECORD_DEFINITION.dataTypes.character.resourceType,a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType,a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType],e.resourceType)&&!this.rxFieldDefinitionService.isPassword(e)&&!this.rxFieldDefinitionService.isSecured(e)&&!this.rxFieldDefinitionService.isDataProviderIdField(e,t)}}var Nd,Vd,Ld,Bd;Pd.\u0275fac=function(e){return new(e||Pd)(n["\u0275\u0275inject"](s.RxLogService),n["\u0275\u0275inject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](a.RxFieldDefinitionService))},Pd.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Pd,factory:Pd.\u0275fac,providedIn:"root"}),function(e){e.Asc="asc",e.Desc="desc"}(Nd||(Nd={}));class $d{constructor(e){this.rxJsonParserService=e}parseConfigString(e){return!!e&&(!!(0,u.includes)(["1","true"],e)||!(0,u.includes)(["0","false"],e)&&((0,u.isString)(e)?this.rxJsonParserService.tryParseJson(e,!1):((0,u.isObject)(e)||!!(0,u.isBoolean)(e))&&e))}getBooleanValue(e){return this.parseConfigString(e)}getColumnSortOrder(e){return e===Nd.Asc?F.SortOrder.Asc:F.SortOrder.Desc}getColumnSortDirection(e){return e===F.SortOrder.Asc?Nd.Asc:Nd.Desc}configDeepClone(e){const t=(0,u.cloneDeep)((0,u.omit)(e,["columns"])),i=this.columnsDeepClone(e.columns);return(0,u.assign)(t,{columns:i})}columnsDeepClone(e){return(0,u.map)(e,this.columnDeepClone)}columnDeepClone(e){const t=(0,u.cloneDeep)((0,u.omit)(e,["cellTemplate"]));return(0,u.assign)(t,{cellTemplate:e.cellTemplate})}}$d.\u0275fac=function(e){return new(e||$d)(n["\u0275\u0275inject"](v.RxJsonParserService))},$d.\u0275prov=n["\u0275\u0275defineInjectable"]({token:$d,factory:$d.\u0275fac,providedIn:"root"});class Gd{trackByForAlignmentOptions(e,t){return t||e}}Gd.\u0275fac=function(e){return new(e||Gd)},Gd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Gd,selectors:[["rx-column-editor-alignment"]],inputs:{column:"column",isReadOnly:"isReadOnly",columnProperty:"columnProperty"},decls:2,vars:2,consts:[["data-toggle","buttons",1,"btn-group","py-2","btn-group-toggle"],[3,"class","active","disabled","adaptTooltip",4,"ngFor","ngForOf","ngForTrackBy"],[3,"adaptTooltip"],["size","small","type","radio","name","selectionValue.name",3,"value","ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,yi,2,13,"label",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.columnProperty.selectionValues)("ngForTrackBy",t.trackByForAlignmentOptions))},directives:[h.NgForOf,m.AdaptTooltipDirective,b.RadioControlValueAccessor,b.DefaultValueAccessor,b.NgControlStatus,b.NgModel],styles:[".alignment-field[_ngcontent-%COMP%]{min-width:140px}"]}),function(e){e.Small="small",e.Large="large"}(Vd||(Vd={})),function(e){e.Primary="primary",e.Secondary="secondary",e.Light="light",e.Active="active",e.Info="info",e.Success="success",e.Warning="warning",e.Danger="danger"}(Ld||(Ld={})),function(e){e.Left="left",e.Right="right",e.ReplaceText="replaceText"}(Bd||(Bd={}));const zd={[Ld.Primary]:"text-primary",[Ld.Secondary]:"text-secondary",[Ld.Light]:"text-white",[Ld.Active]:"text-active",[Ld.Info]:"text-info",[Ld.Success]:"text-success",[Ld.Warning]:"text-warning",[Ld.Danger]:"text-danger"},Ud={[Ld.Primary]:"bg-primary",[Ld.Secondary]:"bg-secondary",[Ld.Active]:"bg-active",[Ld.Info]:"bg-info",[Ld.Success]:"bg-success",[Ld.Warning]:"bg-warning",[Ld.Danger]:"bg-danger"},qd={colorsList:[{label:"Default",value:null},{label:"Primary",value:Ld.Primary},{label:"Secondary",value:Ld.Secondary},{label:"Light",value:Ld.Light},{label:"Active",value:Ld.Active},{label:"Information",value:Ld.Info},{label:"Success",value:Ld.Success},{label:"Warning",value:Ld.Warning},{label:"Danger",value:Ld.Danger}],iconPositions:[{label:"Left",value:Bd.Left},{label:"Right",value:Bd.Right},{label:"Replace text",value:Bd.ReplaceText}],fontSizes:[{label:"Default",value:null},{label:"Small",value:Vd.Small},{label:"Large",value:Vd.Large}]};class Xd extends s.RxExpressionConfigurator{cellDisplayExpressionDataDictionary(e){return e.length?(0,o.of)(e.map(e=>({label:e.label,icon:"d-icon-field_text",expression:`\${view.components.grid.clickableRow.${e.fieldId}}`,resourceType:e.fieldDefinition.resourceType}))):(0,o.of)([])}}class Hd extends S.RxModalClass{constructor(e,t,i,n,r){super(e,r),this.activeModalRef=e,this.rxExpressionEditorService=t,this.formBuilder=i,this.translateService=n,this.injector=r,this.destroyed$=new o.ReplaySubject(1),this.config=this.activeModalRef.getData(),this.propsFormArray=this.formBuilder.array([]),this.iconPositions=qd.iconPositions,this.textColors=qd.colorsList,this.fontSizes=qd.fontSizes,this.colorsList=Ud,this.backgroundColors=qd.colorsList.filter(e=>e.value!==Ld.Light),this.badgeColors=qd.colorsList.filter(e=>![Ld.Light,Ld.Active,null].includes(e.value)),this.iconPickerOptions={label:"Icon",appendToBody:!0,required:!1}}ngOnInit(){super.ngOnInit(),this.expressionConfigurator=new Xd,this.expressionConfigurator.configureForProperty({propertyPath:"cellDisplayProperties",dataDictionary$:this.expressionConfigurator.cellDisplayExpressionDataDictionary(this.config.columns),operators:this.expressionConfigurator.getOperatorRowsByGroup(s.ExpressionOperatorGroup.AllClient)}),this.queryExpressionOptions={label:"Field value condition",dataDictionary$:this.expressionConfigurator.getDataDictionary("cellDisplayProperties"),operators:this.expressionConfigurator.getOperators("cellDisplayProperties"),isRequired:!0},(0,u.forEach)(this.config.cellDisplayProperties,e=>this.propsFormArray.push(this.getFormGroup(e)))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}addCellProperties(){this.markAsDirty(),this.propsFormArray.push(this.getFormGroup({fieldValueCondition:"",displayAsBadge:!1,badgeColor:null,icon:null,iconPosition:null,textColor:null,backgroundColor:null,fontSize:null,bold:!1,italic:!1,isOpen:!0})),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeCellProperties(e){this.propsFormArray.removeAt(e),this.markAsDirty()}optionFormatter(e){return e.label}getFormGroup(e){var t;const i=this.formBuilder.group({fieldValueCondition:[e.fieldValueCondition,b.Validators.required],displayAsBadge:[e.displayAsBadge],badgeColor:{value:this.getSelectValue(this.badgeColors,"value",e.badgeColor),disabled:!e.displayAsBadge},icon:{value:e.icon,disabled:e.displayAsBadge},iconPosition:{value:this.getSelectValue(this.iconPositions,"value",e.iconPosition),disabled:!e.icon},textColor:{value:this.getSelectValue(this.textColors,"value",e.textColor),disabled:e.displayAsBadge},backgroundColor:{value:this.getSelectValue(this.backgroundColors,"value",e.backgroundColor),disabled:e.displayAsBadge},fontSize:{value:this.getSelectValue(this.fontSizes,"value",e.fontSize),disabled:e.displayAsBadge},bold:[e.bold],italic:[e.italic],isOpen:[null!==(t=e.isOpen)&&void 0!==t&&t]});return i.controls.displayAsBadge.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e&&i.controls.badgeColor.disabled&&i.controls.badgeColor.reset({value:[this.badgeColors[0]],disabled:!1}),!e&&i.controls.badgeColor.enabled&&i.controls.badgeColor.reset({value:[],disabled:!0})}),i.controls.icon.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e&&i.controls.iconPosition.disabled&&i.controls.iconPosition.reset({value:[this.iconPositions[0]],disabled:!1}),!e&&i.controls.iconPosition.enabled&&i.controls.iconPosition.reset({value:[],disabled:!0})}),i}getSelectValue(e,t,i){const n=e.find(e=>e[t]===i);return n?[n]:[]}openExpressionEditor(e){this.rxExpressionEditorService.openEditor({property:{path:"cellDisplayProperties",value:e.value,label:"Cell display properties"},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.column.label"),icon:"d-icon-field_text"}]}).subscribe(t=>{e.setValue(t.value),this.markAsDirty()})}moveCellProperties(e,t){(0,y.moveItemInArray)(this.propsFormArray.controls,e,t),this.markAsDirty()}onSelectedCellPropertyDrop(e){(0,y.moveItemInArray)(this.propsFormArray.controls,e.previousIndex,e.currentIndex),this.markAsDirty()}toggleProp(e){e.setValue(!e.value),this.markAsDirty()}toggleOpen(e){this.propsFormArray.controls.forEach(t=>{t.get("isOpen").setValue(e)})}resetIconAndTextProps(e){const t=e.get("displayAsBadge").value;e.get("icon").reset({value:null,disabled:t}),e.get("textColor").reset({value:[this.textColors[0]],disabled:t}),e.get("backgroundColor").reset({value:[this.backgroundColors[0]],disabled:t}),e.get("fontSize").reset({value:[this.fontSizes[0]],disabled:t}),e.get("bold").reset({value:!1,disabled:t}),e.get("italic").reset({value:!1,disabled:t})}onSave(){const e=this.propsFormArray.getRawValue().map(e=>Object.assign(Object.assign({},e),{icon:(0,u.get)(e,"icon",null),badgeColor:(0,u.get)(e,"badgeColor[0].value",null),iconPosition:(0,u.get)(e,"iconPosition[0].value",null),textColor:(0,u.get)(e,"textColor[0].value",null),backgroundColor:(0,u.get)(e,"backgroundColor[0].value",null),fontSize:(0,u.get)(e,"fontSize[0].value",null)})).map(e=>Object.assign({},(0,u.omit)(e,"isOpen")));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Hd.\u0275fac=function(e){return new(e||Hd)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](b.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](n.Injector))},Hd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hd,selectors:[["rx-cell-display-properties-editor"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:10,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","pl-0 pr-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["adaptPopover","Cell display properties will be applied based on the first field value condition evaluating to true.","placement","bottom","appendToBody","true",1,"d-icon-right-question_circle_o","ml-1","mt-1"],["class","btn-group",4,"ngIf"],["id","selected-cell-property","class","designer-modal-accordion-wrapper","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["optionTemplate",""],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"pl-0","pr-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["id","selected-cell-property","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"formGroup","isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[1,"row"],["formControlName","fieldValueCondition","rx-id","query-expression-field",1,"form-group","d-block","col-12",3,"options","events"],[1,"row","form-group"],[1,"col-3"],[3,"label"],["formControlName","displayAsBadge",3,"disabled","ngModelChange"],["formControlName","badgeColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","icon",1,"d-block","col-3",3,"disabled","options","ngModelChange"],["formControlName","iconPosition",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","ngModelChange"],["formControlName","textColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","backgroundColor",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","optionContentTemplate","ngModelChange"],["formControlName","fontSize",1,"d-block","col-3",3,"label","disabled","options","optionFormatter","ngModelChange"],[1,"col-3","pt-4","d-flex","align-item-center"],["data-toggle","buttons",1,"btn-group","btn-group-toggle"],[1,"btn","btn-secondary","d-icon-bold_adapt",3,"ngClass"],["type","checkbox","name","fontStyle",3,"disabled","click"],[1,"btn","btn-secondary","ml-2","d-icon-italic_adapt",3,"ngClass"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","grid",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],[1,"d-flex","align-items-center"],[3,"ngClass"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div"),n["\u0275\u0275template"](5,bi,4,3,"button",4),n["\u0275\u0275element"](6,"span",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,Ci,7,6,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,Di,3,2,"div",7),n["\u0275\u0275template"](9,Ri,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"div",9),n["\u0275\u0275template"](11,Ai,3,4,"button",10),n["\u0275\u0275elementStart"](12,"button",11),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](13),n["\u0275\u0275pipe"](14,"translate"),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](16,Ti,3,2,"ng-template",null,12,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.propsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.propsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.propsFormArray.controls.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](14,6,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](15,8,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,m.AdaptPopoverDirective,m.AdaptButtonComponent,y.CdkDropList,m.AdaptAccordionComponent,h.NgForOf,y.CdkDrag,m.AdaptAccordionTabComponent,b.NgControlStatusGroup,b.FormGroupDirective,l.ExpressionFormControlComponent,b.NgControlStatus,b.FormControlName,m.AdaptRxControlLabelComponent,m.AdaptRxSwitchComponent,m.AdaptRxSelectComponent,l.IconPickerFormControlComponent,h.NgClass,y.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}.color-option-box[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px}']});class Wd extends l.ValueAccessor{constructor(e){super(),this.rxModalService=e}openPropertiesEditor(){this.rxModalService.openModal({title:`Edit cell display properties for ${this.columnName}`,data:{cellDisplayProperties:this.value?(0,u.cloneDeep)(this.value):[],isReadOnly:this.isDisabled,columns:this.columns},content:Hd,size:c.OpenViewActionModalSize.Large,testID:"edit-cell-display-properties"}).then(e=>{this.value=e}).catch(u.noop)}}Wd.\u0275fac=function(e){return new(e||Wd)(n["\u0275\u0275directiveInject"](S.RxModalService))},Wd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wd,selectors:[["rx-cell-display-properties"]],inputs:{columnName:"columnName",columns:"columns"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:Wd,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:2,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0",3,"click"],["name","plus_circle",1,"mr-1"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],[1,"text-tertiary"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openPropertiesEditor()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit cell display properties\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275template"](4,Fi,2,0,"span",3),n["\u0275\u0275template"](5,Ei,2,0,"span",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!(null!=t.value&&t.value.length)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(null==t.value?null:t.value.length)>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,h.NgIf],encapsulation:2});const Yd={keywords:{label:"Keywords",children:[{label:"Current user",icon:"d-icon-dollar",expression:"$USER$"},{label:"Current date",icon:"d-icon-dollar",expression:"$DATE$"},{label:"Current time",icon:"d-icon-dollar",expression:"$TIME$"},{label:"Current date and time",icon:"d-icon-dollar",expression:"$TIMESTAMP$"},{label:"Current week day",icon:"d-icon-dollar",expression:"$WEEKDAY$"},{label:"Current groups",icon:"d-icon-dollar",expression:"$GROUPS$"},{label:"Current group IDs",icon:"d-icon-dollar",expression:"$GROUPIDS$"},{label:"Current roles",icon:"d-icon-dollar",expression:"$ROLES$"},{label:"Current user locale",icon:"d-icon-dollar",expression:"$LOCALE$"},{label:"Current server URL",icon:"d-icon-dollar",expression:"$SERVERURL$"},{label:"NULL",icon:"d-icon-dollar",expression:"$NULL$",hidden:!0}]}};class Qd extends d.RxViewExpressionConfigurator{constructor(e,t,i,n){super(e),this.injector=e,this.activeModalRef=t,this.rxViewDataDictionaryService=i,this.rxDefaultExpressionEvaluatorService=n,this.commonDataDictionary$=this.rxViewDataDictionaryService.commonDataDictionary$.pipe((0,r.map)(e=>[{expression:`'${this.activeModalRef.getData().column.fieldId}'`,icon:"d-icon-file_o_gear",label:this.activeModalRef.getData().column.title},Yd.keywords,...e.slice(2)]))}getExpressionEvaluator(){return this.rxDefaultExpressionEvaluatorService}}Qd.\u0275fac=function(e){return new(e||Qd)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](m.ActiveModalRef),n["\u0275\u0275inject"](d.RxViewDataDictionaryService),n["\u0275\u0275inject"](c.RxDefaultExpressionEvaluatorService))},Qd.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Qd,factory:Qd.\u0275fac});class Kd extends S.RxModalClass{constructor(e,t,i,n,o,r,a){super(e,a),this.activeModalRef=e,this.rxGuidService=t,this.rxExpressionEditorService=i,this.formBuilder=n,this.translateService=o,this.expressionConfigurator=r,this.config=this.activeModalRef.getData(),this.namedFilterOptionsFormArray=this.formBuilder.array([]),this.accordionTabs={}}ngOnInit(){super.ngOnInit(),this.expressionConfigurator.configureForProperty({propertyPath:"namedFilterOptions",operators:s.ExpressionOperatorRowsByGroup.get(s.ExpressionOperatorGroup.All)}),this.queryExpressionOptions={label:"Filter",dataDictionary$:this.expressionConfigurator.getDataDictionary("namedFilterOptions"),operators:this.expressionConfigurator.getOperators("namedFilterOptions"),isRequired:!0},(0,u.forEach)(this.config.namedFilterOptions,(e,t)=>{this.accordionTabs[e.guid]=t===this.config.activeIndex,this.namedFilterOptionsFormArray.push(this.getFormGroup(e))}),this.config.isReadOnly&&this.namedFilterOptionsFormArray.disable()}ngAfterViewInit(){this.config.activeIndex&&this.accordionTabEls.toArray()[this.config.activeIndex].nativeElement.scrollIntoView({block:"nearest"})}addNamedFilterOption(){this.markAsDirty();const e=this.rxGuidService.generate();this.accordionTabs[e]=!0;let t="New filter option",i=0,n=!1;const o=(0,u.map)(this.namedFilterOptionsFormArray.getRawValue(),"title");do{t=0===i?t:`New filter option ${i}`,i++,n=(0,u.includes)(o,t)}while(n);this.namedFilterOptionsFormArray.push(this.getFormGroup({data:{title:t,filterExpression:"",index:this.namedFilterOptionsFormArray.length},guid:e})),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeNamedFilterOption(e){this.namedFilterOptionsFormArray.removeAt(e),this.markAsDirty()}openExpressionEditor(e,t){this.rxExpressionEditorService.openEditor({property:{path:"namedFilterOptions",value:t.value,label:e.value},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"}]}).subscribe(e=>{t.setValue(e.value),this.markAsDirty()})}moveNamedFilterOption(e,t){(0,y.moveItemInArray)(this.namedFilterOptionsFormArray.controls,e,t),this.markAsDirty()}onSelectedNamedFilterOptionDrop(e){(0,y.moveItemInArray)(this.namedFilterOptionsFormArray.controls,e.previousIndex,e.currentIndex),this.markAsDirty()}onSave(){const e=this.namedFilterOptionsFormArray.getRawValue().map(({guid:e,title:t,filterExpression:i},n)=>({guid:e,data:{title:t,filterExpression:i,index:n}}));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}toggleOpen(e){(0,u.forEach)(this.accordionTabs,(t,i)=>{this.accordionTabs[i]=e})}getCheckTitleDuplicateValidator(e){return t=>{const i=t.value;return i&&this.namedFilterOptionsFormArray.controls.some(t=>t.value.title===i&&t.value.guid!==e.guid)?{duplicateFilterOptionName:{message:"Filter option with this name already exists."}}:null}}getFormGroup(e){return this.formBuilder.group({guid:e.guid,title:[e.data.title,[b.Validators.required,this.getCheckTitleDuplicateValidator(e).bind(this),e=>{var t;return(null===(t=null==e?void 0:e.value)||void 0===t?void 0:t.includes(";"))?{invalidName:{message:"A filter option name cannot contain any of the following characters: ;"}}:null}]],filterExpression:[e.data.filterExpression,b.Validators.required]})}}Kd.\u0275fac=function(e){return new(e||Kd)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](b.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](Qd),n["\u0275\u0275directiveInject"](n.Injector))},Kd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kd,selectors:[["rx-named-filter-options-editor-modal"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275ProvidersFeature"]([Qd]),n["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:10,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],["class","designer-modal-accordion-wrapper","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"formGroup","isOpen"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["rx-id","filter-option-name-field","formControlName","title","rxNoWhitespace","",1,"form-group","d-block",3,"label","required","ngModelChange"],["formControlName","filterExpression","rx-id","query-expression-field",3,"options","required","events","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,Mi,4,3,"button",4),n["\u0275\u0275template"](5,Oi,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,Ni,3,2,"div",6),n["\u0275\u0275template"](7,Vi,3,3,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",8),n["\u0275\u0275template"](9,Li,3,4,"button",9),n["\u0275\u0275elementStart"](10,"button",10),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275pipe"](13,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.namedFilterOptionsFormArray.controls.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](12,6,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](13,8,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,m.AdaptButtonComponent,y.CdkDropList,m.AdaptAccordionComponent,h.NgForOf,y.CdkDrag,m.AdaptAccordionTabComponent,b.NgControlStatusGroup,b.FormGroupDirective,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.FormControlName,v.RxNoWhitespaceValidator,b.RequiredValidator,l.ExpressionFormControlComponent,y.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:[Bi]});class Jd extends l.ValueAccessor{constructor(e){super(),this.rxModalService=e}openNamedFilterOptions(e){this.rxModalService.openModal({title:`Edit named filter options for ${this.column.title}`,data:{namedFilterOptions:this.value?(0,u.cloneDeep)(this.value):[],isReadOnly:this.isDisabled,activeIndex:e,column:this.column},content:Kd,size:c.OpenViewActionModalSize.Large,testID:"edit-named-filter-options"}).then(e=>{this.value=e}).catch(u.noop)}editNamedFilterOption(e){this.openNamedFilterOptions(e)}removeFilterOption(e){this.value=(0,u.without)(this.value,e)}}Jd.\u0275fac=function(e){return new(e||Jd)(n["\u0275\u0275directiveInject"](S.RxModalService))},Jd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jd,selectors:[["rx-named-filter-options"]],inputs:{column:"column",tooltip:"tooltip"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:Jd,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0","pb-1",3,"click"],["name","plus_circle",1,"mr-1"],["class","align-middle",4,"ngIf"],["rx-id","named-filter-options"],["class","text-tertiary",4,"ngIf"],["class","list-unstyled mb-0",4,"ngIf"],[1,"align-middle"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],[1,"text-tertiary"],[1,"list-unstyled","mb-0"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto","text-break"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","edit-button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openNamedFilterOptions()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit named filter options\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,$i,3,2,"span",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,Gi,2,0,"div",4),n["\u0275\u0275template"](6,qi,2,1,"ul",5),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.tooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!(null!=t.value&&t.value.length)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(null==t.value?null:t.value.length)>0))},directives:[m.AdaptButtonComponent,m.AdaptIconComponent,h.NgIf,m.AdaptPopoverDirective,h.NgForOf],encapsulation:2});class Zd extends S.RxModalClass{constructor(e,t,i,n,o,r,a,l,c,d,p){super(e,c),this.activeModalRef=e,this.rxModalService=t,this.definitionNameService=i,this.rxRecordGridUtilsService=n,this.rxFieldDefinitionService=o,this.rxRecordDefinitionCacheService=r,this.rxGuidService=a,this.ngZone=l,this.injector=c,this.translateService=d,this.rxExpressionEditorService=p,this.columnProperties=jd.columnProperties,this.actionsColumnProperties=jd.actionsColumnProperties,this.filteredColumns=[],this.availableColumnsTree=[],this.startedLoadingAssociationDescriptors=!1,this.treeWrap=m.TreeWrap.WrapAll,this.columnWidthPropertyOptions=this.columnProperties.find(({name:e})=>"width"===e).options,this.typeaheadKeystrokeCountOptions=Object.assign(Object.assign({},this.columnProperties.find(({name:e})=>"typeaheadKeystrokeCount"===e).options),{tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-column.keystroke-count.tooltip"))});const h=this.activeModalRef.getData().columnParams;this.activeColumn=h.activeColumn,this.activeActionIndex=h.activeActionIndex,this.recordDefinition=h.recordDefinition,this.isReadOnly=h.isReadOnly,this.columns=h.columns.map(e=>{const t=e.fieldDefinition.namedListDefinition?this.getAdditionalQueryCriteriaExpressionOptions(e):null;return Object.assign(Object.assign({},e),{isOpen:e===this.activeColumn,label:this.rxRecordGridUtilsService.getColumnLabel(e.fieldDefinition,e.associationDescriptor),clickable:!(0,u.isEmpty)(e.actions),additionalQueryCriteriaExpressionOptions:t})}).sort((e,t)=>e.index-t.index),this.getAvailableColumnsTree()}ngAfterViewInit(){this.updateSelectedColumnsDropList(),this.openActiveAction();const e=(0,u.findIndex)(this.columns,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}isActionsColumn(e){return e===jd.actionsColumnFieldDefinition.id}updateSelectedColumnsDropList(){this.updateColumnsDropList(this.draggableSelectedColumns,this.selectedColumnsDropList)}updateAssociatedAvailableColumnsDropList(){this.updateColumnsDropList(this.draggableAssociatedAvailableColumns,this.associatedAvailableColumnsDropList)}updateColumnsDropList(e,t){const i=e.toArray(),n=this.columns;i.sort((e,t)=>n.indexOf(e.data)-n.indexOf(t.data)),t._dropListRef.withItems(i.map(e=>{const i=e._dragRef;return i._initialContainer||(i._initialContainer=t._dropListRef),e._dragRef}))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}onDropInSelectedColumnsContainer(e){e.previousContainer!==e.container&&this.isColumnEditorAvailableColumn(e.item.data)?this.addColumn(e.item.data,e.currentIndex):e.previousIndex!==e.currentIndex&&this.moveColumn(e.previousIndex,e.currentIndex)}onColumnCheckboxPropertyChange(e,t,i){"filterable"===i.name&&t.fieldDefinition.namedListDefinition&&(e?t.typeaheadKeystrokeCount=jd.defaultTypeaheadKeystrokeCount:(t.typeaheadKeystrokeCount=null,t.additionalQueryCriteria=null)),this.markAsDirty()}onColumnDragStarted(){this.updateSelectedColumnsDropList()}onAssociatedAvailableColumnsDragStarted(){this.onColumnDragStarted(),this.updateAssociatedAvailableColumnsDropList()}isColumnEditorAvailableColumn(e){return Boolean(e.fieldDefinitionName)}moveColumn(e,t){this.markAsDirty(),(0,y.moveItemInArray)(this.columns,e,t),this.updateColumnIndexes()}removeColumn(e){this.markAsDirty();const t=this.columns[e];this.columns.splice(e,1);const i=t.associationDescriptor?this.getAssociatedAvailableColumnsNode(t.associationDescriptor.label):this.availableColumnsTree[0];i&&i.data.allAvailableColumns&&(i.data.allAvailableColumns.push(this.getColumnMetadata(t.fieldDefinition,t.associationDescriptor)),this.updateAvailableColumnsTree())}getAssociatedAvailableColumnsNode(e){return this.availableColumnsTree.find(t=>t.data.associationDescriptor&&t.data.associationDescriptor.label===e)}getAvailableColumnsTree(){const e={children:null,leaf:!1,expanded:!0,expandedIcon:"d-icon-file_text",collapsedIcon:"d-icon-file_text",label:this.definitionNameService.getDisplayName(this.recordDefinition.name),key:this.definitionNameService.getDisplayName(this.recordDefinition.name),data:{allAvailableColumns:null}};this.startedLoadingAssociationDescriptors||(this.startedLoadingAssociationDescriptors=!0,this.rxRecordGridUtilsService.getAssociationDescriptors(this.recordDefinition.name).subscribe(t=>{(t=t.slice()).sort((e,t)=>e.label.localeCompare(t.label)),this.availableColumnsTree=t.map(e=>({children:null,leaf:!1,expandedIcon:"d-icon-arrow_schema",collapsedIcon:"d-icon-arrow_schema",label:e.label,key:e.associationDefinition.name,data:{associationDescriptor:e,allAvailableColumns:null}})),this.availableColumnsTree.unshift(e),this.availableColumnsTree.forEach(e=>{this.onNodeExpand({node:e})})}))}updateAvailableColumnsTree(){this.availableColumnsTree.forEach(e=>{const t=e.data.allAvailableColumns;if(t){const i=this.sortAvailableColumns(t),n=e.data.associationDescriptor?e.data.associationDescriptor.associationDefinition.name:this.recordDefinition.name;e.children=i.map(e=>({children:null,leaf:!0,label:e.fieldDefinitionName,key:`${n}-${e.fieldDefinition.id}`,data:{availableColumn:e}}))}})}onNodeExpand({node:e}){const t=e.data.associationDescriptor;t&&!e.data.allAvailableColumns?(e.data.allAvailableColumns=[],this.rxRecordDefinitionCacheService.getRecordDefinition(t.recordDefinitionName).subscribe(i=>{e.data.allAvailableColumns=this.getAvailableColumns(i,t),this.updateAvailableColumnsTree()})):t||(e.data.allAvailableColumns=this.getAvailableColumns(this.recordDefinition),this.updateAvailableColumnsTree())}addColumn(e,t){if(this.markAsDirty(),!(0,u.find)(this.columns,t=>t.fieldId===e.fieldId)){const i=e.fieldDefinition.namedListDefinition?this.getAdditionalQueryCriteriaExpressionOptions(e):null,n=Object.assign(Object.assign({},this.getColumnEditorColumnData(e)),{additionalQueryCriteriaExpressionOptions:i});(0,u.isNil)(t)?this.columns.push(n):this.columns.splice(t,0,n),this.updateColumnIndexes(),this.removeFromAvailableColumns(e),setTimeout(()=>{this.accordionTabEls.toArray()[null!=t?t:this.columns.length-1].nativeElement.scrollIntoView()})}}getColumnEditorColumnData(e){const t={guid:this.rxGuidService.generate(),label:e.label,fieldId:e.fieldId,associationDescriptor:e.associationDescriptor,fieldDefinition:e.fieldDefinition,actions:[],title:e.fieldDefinitionName,isOpen:!0};return(0,u.forEach)(jd.columnProperties,i=>{"sortable"===i.name?t.sortable=e.isSortable:"searchable"===i.name?t.searchable=this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.recordDefinition):t[i.name]=i.defaultValue}),t}removeFromAvailableColumns(e){if(e.associationDescriptor){const t=this.getAssociatedAvailableColumnsNode(e.associationDescriptor.label);(0,u.remove)(t.data.allAvailableColumns,e)}else(0,u.remove)(this.availableColumnsTree[0].data.allAvailableColumns,e);this.updateAvailableColumnsTree()}sortAvailableColumns(e){return this.filteredColumns=e.sort((e,t)=>e.fieldDefinitionName.localeCompare(t.fieldDefinitionName)),this.filteredColumns}getAvailableColumns(e,t){return e.fieldDefinitions.map(e=>this.getColumnMetadata(e,t)).filter(e=>!(0,u.find)(this.columns,t=>t.fieldId===e.fieldId))}getColumnMetadata(e,t){return{fieldDefinitionName:e.name,label:this.rxRecordGridUtilsService.getColumnLabel(e,t),fieldId:this.rxRecordGridUtilsService.getFieldIdForGridColumn(e.id,t),isSortable:this.rxFieldDefinitionService.isSortable(e),associationDescriptor:t,fieldDefinition:e}}saveChanges(){const e={columns:this.columns.map(e=>{const t=e.filterable&&e.fieldDefinition.namedListDefinition;return{actions:e.actions,alignment:e.alignment,fieldId:e.fieldId,filterable:e.filterable,filterType:e.filterType,guid:e.guid,index:e.index,sortable:e.sortable,searchable:e.searchable,title:e.title,visible:e.visible,associationDescriptor:e.associationDescriptor,fieldDefinition:e.fieldDefinition,cellDisplayProperties:e.cellDisplayProperties,namedFilterOptions:e.namedFilterOptions,width:e.width,wrapText:e.wrapText,typeaheadKeystrokeCount:t?e.typeaheadKeystrokeCount:null,additionalQueryCriteria:t?e.additionalQueryCriteria:null}})};this.activeModalRef.close(e)}trackByForColumns(e,t){return t.fieldId}trackByForColumnProperties(e,t){return t.name}isPropertyEditable(e,t){return"searchable"===t?!this.isReadOnly&&this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.recordDefinition):!this.isReadOnly}updateColumnIndexes(){this.columns.forEach((e,t)=>{e.index=t})}openActiveAction(){this.activeColumn&&this.activeActionIndex>=0&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const e=this.actionListControlComponents.find(e=>e.value===this.activeColumn.actions);e&&e.focus({actionIndex:this.activeActionIndex})})})}isTreeEmpty(){return(0,u.every)(this.availableColumnsTree,e=>0===e.data.allAvailableColumns.length)}openAdditionalQueryCriteriaExpressionEditor(e,t){const i=new d.NamedListFilterExpressionConfigurator(e.fieldDefinition,this.injector);this.rxExpressionEditorService.openEditor({property:{path:"additionalQueryCriteria",value:e.additionalQueryCriteria,label:"Additional named list filter"},isReadOnly:this.isReadOnly,expressionConfigurator:i,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(i=>{e.additionalQueryCriteria=i.value,t.value=i.value,t.onWriteValue(i.value),this.markAsDirty()})}getAdditionalQueryCriteriaExpressionOptions(e){const t=new d.NamedListFilterExpressionConfigurator(e.fieldDefinition,this.injector);return{label:"Additional named list filter",tooltip:new s.Tooltip("Build a filter to apply at runtime in addition to the filter, if any, specified in the named list definition."),dataDictionary$:t.getDataDictionary(),operators:t.getOperators()}}}Zd.\u0275fac=function(e){return new(e||Zd)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](s.RxDefinitionNameService),n["\u0275\u0275directiveInject"](Pd),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService))},Zd.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zd,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Xi,5,y.CdkDropList),n["\u0275\u0275viewQuery"](Hi,5,y.CdkDropList),n["\u0275\u0275viewQuery"](Wi,5,y.CdkDrag),n["\u0275\u0275viewQuery"](Yi,5,y.CdkDrag),n["\u0275\u0275viewQuery"](d.ActionListControlComponent,5),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectedColumnsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.associatedAvailableColumnsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableSelectedColumns=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableAssociatedAvailableColumns=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponents=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:16,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"mt-2"],["id","selectedColumnsDropList","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],["selectedColumnsDropList","cdkDropList"],[3,"multiselect",4,"ngIf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],[1,"card-block","d-flex","flex-column"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo",4,"ngIf"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListData","cdkDropListConnectedTo"],["associatedAvailableColumnsDropList","cdkDropList"],["filter","true",3,"value","wrap","onNodeExpand"],["adaptTreeNodeTemplate",""],[3,"title",4,"ngIf"],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData","cdkDragStarted",4,"ngIf"],[3,"title"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData","cdkDragStarted"],["draggableAssociatedAvailableColumn",""],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled","cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled","cdkDragStarted"],["draggableSelectedColumn",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[4,"ngIf"],["dataColumnEditorTemplate",""],["actionsColumnEditorTemplate",""],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["class","d-icon-left-cross_adapt p-1 pr-4 ml-3","adapt-button","","size","small","type","button","rx-id","remove-button",3,"click",4,"ngIf"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"rx-record-grid-column-editor-text-field",3,"label","disabled","ngModel","ngModelChange"],[1,"d-flex","flex-wrap"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"d-flex","flex-row"],[1,"d-block","col-5","p-0",3,"options","ngModel","ngModelChange"],["class","d-block col-5 p-0 pb-2 pl-5",3,"options","ngModel","disabled","ngModelChange",4,"ngIf"],["rx-id","additional-query-criteria-expression","class","d-block p-0 pb-2",3,"options","ngModel","disabled","ngModelChange","events",4,"ngIf"],[1,"d-block","pb-2",3,"columns","columnName","disabled","ngModel","ngModelChange"],[1,"d-block","pb-2",3,"column","disabled","ngModel","tooltip","ngModelChange"],[1,"d-block",3,"disabled","ngModel","tooltip","ngModelChange"],["class","checkbox rx-record-grid-column-editor__checkbox-field",4,"ngIf"],["class","flex-fill","ngDefaultControl","",3,"isReadOnly","column","columnProperty","ngModel","ngModelChange",4,"ngIf"],[1,"checkbox","rx-record-grid-column-editor__checkbox-field"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],[1,"checkbox__item"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],["ngDefaultControl","",1,"flex-fill",3,"isReadOnly","column","columnProperty","ngModel","ngModelChange"],[1,"d-block","col-5","p-0","pb-2","pl-5",3,"options","ngModel","disabled","ngModelChange"],["rx-id","additional-query-criteria-expression",1,"d-block","p-0","pb-2",3,"options","ngModel","disabled","ngModelChange","events"],["additionalQueryCriteriaExpression",""],[1,"rx-record-grid-column-editor-text-field","d-block","form-group",3,"label","disabled","ngModel","ngModelChange"],["class","checkbox rx-record-grid-column-editor__checkbox-field",4,"ngFor","ngForOf","ngForTrackBy"],["type","grid",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,nn,9,5,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"h4",4),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"div",5,6),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedColumnsContainer(e)}),n["\u0275\u0275template"](10,bn,2,3,"adapt-accordion",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Cn,3,3,"div",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",9),n["\u0275\u0275template"](13,Sn,3,4,"button",10),n["\u0275\u0275elementStart"](14,"button",11),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,10,"com.bmc.arsys.rx.client.view-components.record-grid-column.selected-columns.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("cdkDropListData",t.columns),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.columns.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.columns.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](16,12,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,y.CdkDropList,m.AdaptButtonComponent,m.AdaptTreeComponent,m.AdaptTreeNodeTemplateDirective,y.CdkDrag,m.AdaptEmptyStateComponent,m.AdaptAccordionComponent,h.NgForOf,m.AdaptAccordionTabComponent,y.CdkDragHandle,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,l.StepperWithUnitsFormControlComponent,Wd,Jd,d.ActionListControlComponent,b.CheckboxControlValueAccessor,m.AdaptIconComponent,m.AdaptPopoverDirective,Gd,b.DefaultValueAccessor,l.SelectFormControlComponent,l.ExpressionFormControlComponent],pipes:[p.TranslatePipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content{position:relative}.designer-modal-accordion-content.cdk-drag-preview{z-index:1200!important}.designer-modal-drag-handle{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content{width:100%;display:flex}.designer-modal-card-title-content .left-header-block,.designer-modal-card-title-content .right-header-block{display:flex;align-items:center}.designer-modal-card-title-content .left-header-block{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons{display:flex;font-size:19px}.rx-card{overflow:auto}.rx-tree-draggable-node{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview{z-index:1200!important}.rx-tree-draggable-node.cdk-drag{opacity:1}.rx-tree-node-label{word-break:break-all}rx-form-builder{max-width:400px}.rx-record-grid-column-editor__checkbox-field{flex-basis:20%;min-width:140px}.rx-record-grid-column-editor__checkbox-field+.rx-record-grid-column-editor__checkbox-field{margin-top:calc(.5rem + 1px)!important}\n'],encapsulation:2,changeDetection:0});class ep extends l.ValueAccessor{constructor(e,t,i,n){super(),this.rxModalService=e,this.rxFieldDefinitionService=t,this.rxRecordGridConfigUtilsService=i,this.rxRecordGridUtilsService=n,this.updateColumnsSubject=new o.BehaviorSubject([]),this.columns$=this.updateColumnsSubject.pipe((0,r.switchMap)(e=>(0,o.forkJoin)(e.map(e=>(0,o.forkJoin)([this.rxRecordGridUtilsService.getAssociationDescriptor(e.fieldId,this.options.recordDefinition),this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.options.recordDefinition)]).pipe((0,r.map)(([t,i])=>({associationDescriptor:t,fieldDefinition:i,inspectorColumn:e}))))).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.map(e=>{var t;return Object.assign(Object.assign({},e.inspectorColumn),{fieldDefinition:e.fieldDefinition,associationDescriptor:e.associationDescriptor,title:null===(t=e.inspectorColumn.title)||void 0===t?void 0:t.trim(),searchable:(0,u.has)(e.inspectorColumn,"searchable")?this.rxRecordGridConfigUtilsService.getBooleanValue(e.inspectorColumn.searchable):e.inspectorColumn.filterable&&this.rxRecordGridUtilsService.isSearchable(e.fieldDefinition,this.options.recordDefinition),fallbackTitle:`[${e.fieldDefinition.name}]`})})),(0,r.shareReplay)(1))))}ngOnChanges(e){var t;(null===(t=e.options)||void 0===t?void 0:t.previousValue)&&e.options.currentValue.recordDefinition.name!==e.options.previousValue.recordDefinition.name&&this.updateColumnsSubject.next(this.value)}onWriteValue(e){this.updateColumnsSubject.next(e)}removeColumn(e){this.updateValue(this.value.filter(t=>t.fieldId!==e.fieldId))}updateValue(e){this.value=e,this.onWriteValue(e)}openEditor(e,t){this.columns$.pipe((0,r.take)(1)).subscribe(i=>{const n={isReadOnly:this.isDisabled,columns:i,activeColumn:i.find(t=>t.guid===e),recordDefinition:this.options.recordDefinition,activeActionIndex:t};this.rxModalService.openModal({title:"Edit grid columns",content:Zd,data:{columnParams:n},size:c.OpenViewActionModalSize.Large,testID:"edit-grid-columns"}).then(e=>{e&&e.columns&&this.updateValue(e.columns)}).catch(u.noop)})}focus(e){this.openEditor(null==e?void 0:e.columnGuid,null==e?void 0:e.actionIndex)}getColumnResourceTypeName(e){const t=a.RX_RECORD_DEFINITION.resourceTypesByFullName[e.fieldDefinition.resourceType];return(0,u.get)(a.RX_RECORD_DEFINITION.dataTypes[t],"displayName","")}getSortedColumns(e){return e.sort((e,t)=>e.index-t.index)}trackByForColumns(e,t){return t.fieldId}isActionsColumn(e){return e===jd.actionsColumnFieldDefinition.id}ngOnDestroy(){this.updateColumnsSubject.complete()}}var tp,ip,np,op;ep.\u0275fac=function(e){return new(e||ep)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"]($d),n["\u0275\u0275directiveInject"](Pd))},ep.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ep,selectors:[["rx-record-grid-column-editor"]],inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:ep,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:3,consts:[["btn-type","tertiary","rx-id","open-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[4,"ngIf"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],["class","rx-selected-column",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-tertiary"],[1,"rx-selected-column"],[1,"rx-selected-column__header-container"],["rx-id","card-title",1,"rx-selected-column__header-title",3,"ngClass","title"],["type","button","class","rx-button-unstyled d-icon-left-pencil btn-link","rx-id","open-editor",3,"click",4,"ngIf"],["type","button","class","rx-button-unstyled d-icon-cross btn-link","rx-id","remove-column",3,"click",4,"ngIf"],["rx-id","column-type",1,"rx-column-type"],["type","button","rx-id","open-editor",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-column",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openEditor()}),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275text"](2," Edit grid columns\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Tn,4,3,"div",2),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,1,t.columns$)))},directives:[m.AdaptButtonComponent,h.NgIf,h.NgForOf,h.NgClass],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-column[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-column__header-container[_ngcontent-%COMP%]{display:flex;margin-bottom:5px}.rx-selected-column__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;font-size:14px}.rx-column-type[_ngcontent-%COMP%]{color:#959899;font-size:10px;overflow:hidden;text-overflow:ellipsis}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']}),function(e){e.And="AND",e.Or="OR"}(tp||(tp={}));class rp{constructor(e,t=[]){this.namedOptions=[],this.filterValue=e,Array.isArray(t)&&(this.namedOptions=t)}get length(){return(Array.isArray(this.filterValue)?this.filterValue.length:(0,u.isNil)(this.filterValue)?0:1)+this.namedOptions.length}static isEmpty(e){return e instanceof rp&&!e.length}static isEmptyWithRange(e){return e instanceof rp&&!e.namedOptions.length&&m.AdvancedFilterDataTypesConfigsService.isEmptyOnEmptyValues(e.filterValue)}}class ap{constructor(e,t,i,n,o,r){this.rxRecordDefinitionService=e,this.rxObjectUtilsService=t,this.rxRecordGridUtilsService=i,this.rxNamedListService=n,this.advancedFilterDataTypesConfigsService=o,this.adaptTranslateService=r,this.translation=this.adaptTranslateService.getCurrentLanguage(),this.adaptTexts={fromLabel:this.translation["adapt.advancedFilter.configsTexts.fromLabel"],toLabel:this.translation["adapt.advancedFilter.configsTexts.toLabel"],trueLabel:this.translation["adapt.advancedFilter.configsTexts.trueLabel"],falseLabel:this.translation["adapt.advancedFilter.configsTexts.falseLabel"],blankLabel:this.translation["adapt.advancedFilter.configsTexts.blankLabel"],validationErrors:{invalidRangeName:this.translation["adapt.advancedFilter.validationErrors.invalidRangeName"],invalidRangeText:this.translation["adapt.advancedFilter.validationErrors.invalidRangeText"],numberTypeTexts:{fromValueMustBeNumber:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.fromValueMustBeNumber"],toValueMustBeNumber:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.toValueMustBeNumber"],invalidBetweenMinAndMax:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidBetweenMinAndMax"],invalidMinValue:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidMinValue"],invalidMaxValue:this.translation["adapt.advancedFilter.validationErrors.numberTypeTexts.invalidMaxValue"]}}},this.defaultConfig=this.advancedFilterDataTypesConfigsService.getConfigs(this.adaptTexts)}addAssociationFieldsToFieldDefinitionsById(e,t,i){return t.forEach(t=>{i.find(e=>e.name===t.recordDefinitionName).fieldDefinitions.forEach(i=>{const n=this.rxRecordGridUtilsService.getFieldIdForGridColumn(i.id,t);e[n]||this.rxRecordDefinitionService.addFieldDefinitionToMap(i,e,n)})}),e=Object.assign(Object.assign({},e),this.rxObjectUtilsService.expandProperties(e))}getAdvancedFilterOption(e,t,i,n,o,r,s,l,c,d){const p={id:e,label:t,dataType:n.filterOptionDataType,isHidden:o,data:(0,u.isFunction)(n.getDataForAdvancedFilter)?n.getDataForAdvancedFilter(i,e):null};if(l=null!=l?l:[],n.filterOptionDataType===m.AdvancedFilterOptionDataType.boolean&&(p.inputsTemplate=i.fieldOption!==a.RecordFieldOption.Required?r.optionalBooleanFilter:r.requiredBooleanFilter,p.customConfig={getExpressionFieldTips:e=>{const t=e.data,i=(null==t?void 0:t.selectOptions)||[];return this.getNamedFilterOptionTips(l,e,p.customConfig).concat(i.map(t=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp([t.id]),e,p.customConfig,!1,(0,m.formatAdvancedFilterTagText)(e,t.name))))},formatValueForTag:(e,t)=>{const i=t.data,n=(null==i?void 0:i.selectOptions)||[],o=e.filterValue.map(e=>n.find(t=>t.id===e).name);return this.buildTagLabel(o,this.getNamedOptionTitles(e,l))},needRemoveTagValue:e=>rp.isEmpty(e),updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e,i.data.isRequired),parseTagFieldExpression:(e,t)=>{const i=m.AdvancedFilterDataTypesConfigsService.getExpressionRawValues(e,t),n=this.getFilterValueFromString(l,i),o=e.data,r=(null==o?void 0:o.selectOptions)||[];return n.filterValue=n.filterValue.map(e=>{var t;e=e.trim().toLowerCase();const i=r.find(t=>t.name.toLowerCase()===e);return null!==(t=null==i?void 0:i.id)&&void 0!==t?t:null}).filter(e=>!(0,u.isNil)(e))||[],n.length?{value:n}:null}}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.string&&(i.namedListDefinition?(p.inputsTemplate=r.inputsForStringWithTypeAheadTemplate,p.data=Object.assign(Object.assign({},p.data),{typeaheadKeystrokeCount:c,additionalQueryCriteria:d})):p.inputsTemplate=r.inputsForStringTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmpty(e),formatValueForTag:(e,t)=>this.buildTagLabel(e.filterValue,this.getNamedOptionTitles(e,l)),getExpressionFieldTips:(e,t)=>[...this.getNamedFilterOptionTips(l,e,p.customConfig),m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp,e,p.customConfig,!0,(0,m.formatAdvancedFilterTagText)(e,""))],updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e),parseTagFieldExpression:(e,t)=>this.parseStringTagFieldExpression(e,t,l)}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.selection&&(p.inputsTemplate=r.inputsForSelectionTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmpty(e),formatValueForTag:(e,t)=>{const i=this.defaultConfig[n.filterOptionDataType].formatValueForTag(e.filterValue,t);return this.buildTagLabel(i,this.getNamedOptionTitles(e,l))},getExpressionFieldTips:(e,t)=>{const i=e.data,n=i&&i.selectOptions||[];return this.getNamedFilterOptionTips(l,e,p.customConfig).concat(n.map(t=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp([t.id]),e,p.customConfig,!1,(0,m.formatAdvancedFilterTagText)(e,t.name))))},updateFilterValue:(e,t,i)=>this.updateFilterValue(t,e),parseTagFieldExpression:(e,t)=>this.parseStringTagFieldExpression(e,t,l)}),n.filterOptionDataType===m.AdvancedFilterOptionDataType.datetime&&(p.inputsTemplate=r.inputsForDatetimeTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.datetime,"ll LTS")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.date&&(p.inputsTemplate=r.inputsForDateTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.date,"ll")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.time&&(p.inputsTemplate=r.inputsForTimeTypeTemplate,p.customConfig=this.getDatetimeCustomConfig(l,p,m.AdvancedFilterOptionDataType.time,"LTS")),n.filterOptionDataType===m.AdvancedFilterOptionDataType.number&&(p.inputsTemplate=r.inputsForNumberTypeTemplate,p.customConfig={needRemoveTagValue:e=>rp.isEmptyWithRange(e),getExpressionFieldTips:(e,t)=>this.getNamedFilterOptionTips(l,e,p.customConfig,[null,null]).concat(this.defaultConfig[n.filterOptionDataType].getExpressionFieldTips(e,t)),updateFilterValue:(e,t,i)=>(e.filterValue=this.defaultConfig[n.filterOptionDataType].updateFilterValue(e.filterValue,t.filterValue,i),e.namedOptions=(0,u.uniq)(t.namedOptions.concat(e.namedOptions)),e),formatValueForTag:e=>{const t=e.filterValue.filter(e=>null!=e).join(" - ");return this.buildTagLabel(t,this.getNamedOptionTitles(e,l))},parseTagFieldExpression:(e,t)=>{var i,o;const{value:r,label:a}=this.getExpressionRawValues(e,t);if(!r)return null;const s=this.getFilterValueFromString(l,r);return s.filterValue=null!==(o=null===(i=this.defaultConfig[n.filterOptionDataType].parseTagFieldExpression(e,`${a} ${s.filterValue[0]}`))||void 0===i?void 0:i.value)&&void 0!==o?o:[],s.length?{value:s}:null},validateValue:(e,t)=>this.defaultConfig[n.filterOptionDataType].validateValue(e.filterValue,t)}),s){const e={getTagText:(e,t,i)=>`${s}: ${i}`};p.customConfig=Object.assign(Object.assign({},p.customConfig),e)}return p}parseStringTagFieldExpression(e,t,i){const n=m.AdvancedFilterDataTypesConfigsService.getExpressionRawValues(e,t);if(!n)return null;const o=this.getFilterValueFromString(i,n);return o.length?{value:o}:null}updateFilterValue(e,t,i=!1){return i||(t.filterValue=(0,u.uniq)(e.filterValue.concat(t.filterValue))),t.namedOptions=(0,u.uniq)(e.namedOptions.concat(t.namedOptions)),t}buildTagLabel(e,t,i=", ",n="; "){return[(0,u.isString)(e)?e:(0,u.isArray)(e)&&!(0,u.isEmpty)(e)?this.rxNamedListService.isNamedListOption(e[0])?e.map(e=>{var t;return null!==(t=e.displayValue)&&void 0!==t?t:e.value}).join(i):e.join(i):"",...t].filter(Boolean).join(n)}getNamedOptionTitles(e,t){const i=t.map(e=>e.guid);return e.namedOptions.sort((e,t)=>i.indexOf(e)-i.indexOf(t)).map(e=>{var i;return null===(i=t.find(t=>t.guid===e))||void 0===i?void 0:i.title})}getDatetimeCustomConfig(e,t,i,n){return{getExpressionFieldTips:(n,o)=>this.getNamedFilterOptionTips(e,n,t.customConfig).concat(this.defaultConfig[i].getExpressionFieldTips(n,o)),needRemoveTagValue:e=>rp.isEmptyWithRange(e),formatValueForTag:t=>{const i=t.filterValue.filter(e=>e).map(e=>(0,I.default)(e).format(n)).join(" - ");return this.buildTagLabel(i,this.getNamedOptionTitles(t,e))},updateFilterValue:(e,t,n)=>(e.filterValue=this.defaultConfig[i].updateFilterValue(e.filterValue,t.filterValue,n),e.namedOptions=(0,u.uniq)(t.namedOptions.concat(e.namedOptions)),e),parseTagFieldExpression:(t,n)=>{var o,r;const{value:a}=this.getExpressionRawValues(t,n);if(!a)return null;const s=this.getFilterValueFromString(e,a),[l]=n.split("; ");return s.filterValue=null!==(r=null===(o=this.defaultConfig[i].parseTagFieldExpression(t,l))||void 0===o?void 0:o.value)&&void 0!==r?r:[],s.length?{value:s}:null},validateValue:(e,t)=>this.defaultConfig[i].validateValue(e.filterValue,t)}}getExpressionRawValues(e,t){return[`${e.label}:`,`${e.label} ${this.adaptTexts.fromLabel}`,`${e.label} ${this.adaptTexts.toLabel}`].reduce((e,i)=>(t.startsWith(i)&&(e.label=i,e.value=t.replace(i,"").trim()),e),{label:null,value:null})}getFilterValueFromString(e,t){const i=(null!=t?t:"").trim().split(";").filter(e=>!(0,m.isEmptyOrWhitespace)(e)).map(e=>e.trim()),n=new rp([]);return i.forEach(t=>{var i;const o=null===(i=e.find(e=>e.title===t))||void 0===i?void 0:i.guid;o?n.namedOptions.push(o):n.filterValue.push(...t.split(",").map(e=>e.trim()).filter(Boolean))}),n.namedOptions=(0,u.uniq)(n.namedOptions),n}getNamedFilterOptionTips(e,t,i,n=[]){return(null!=e?e:[]).map(e=>m.AdvancedFilterDataTypesConfigsService.createAdvancedFilterTag(new rp(n,[e.guid]),t,i,!1,(0,m.formatAdvancedFilterTagText)(t,e.title)))}}ap.\u0275fac=function(e){return new(e||ap)(n["\u0275\u0275inject"](a.RxRecordDefinitionService),n["\u0275\u0275inject"](v.RxObjectUtilsService),n["\u0275\u0275inject"](Pd),n["\u0275\u0275inject"](A.RxNamedListService),n["\u0275\u0275inject"](m.AdvancedFilterDataTypesConfigsService),n["\u0275\u0275inject"](m.AdaptTranslateService))},ap.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ap,factory:ap.\u0275fac});class sp{constructor(e){this.rxJsonParserService=e,this.filtersKeywords=["$NULL$","$TIME$","$DATE$","$TIMESTAMP$","$USER$"]}getRecordGridFilterDataFromPredefinedFilter(e,t){return!(0,u.isEmpty)(t)&&e&&(e=this.normalizeFilterString(e,t)),this.clearFilterData(this.rxJsonParserService.tryParseJson(e))}normalizeFilterString(e,t){return(0,u.forEach)(t,t=>{const i=Object.assign({[t.fieldId]:t.value},t.$DISPLAYVALUE$&&{$DISPLAYVALUE$:t.$DISPLAYVALUE$});e=e.replace(`"${t.guid}"`,JSON.stringify(i))}),e}denormalizeFilterString(e,t){return(0,u.forEach)(t,t=>{const i=Object.assign({[t.fieldId]:t.value},t.$DISPLAYVALUE$&&{$DISPLAYVALUE$:t.$DISPLAYVALUE$});e=i.$DISPLAYVALUE$?JSON.stringify(JSON.parse(e),this.replacer(this.denormalize(t.guid,i))):e.replace(JSON.stringify(i),`"${t.guid}"`)}),e}replacer(e){return(t,i)=>"string"==typeof t&&e[t]?e[t](i):i}denormalize(e,t){return(0,u.reduce)(c.RecordGridFilterOperator,(i,n)=>(i[n]=i=>(0,u.isEqual)(i,t)?e:i,i),{})}clearFilterData(e){const t=(0,u.keys)(e);let i=e;if(!(0,u.isEmpty)(t)){const n=t[0];switch(!0){case(0,u.includes)(["or","and"],n):{const t=e[n].map(this.clearFilterData.bind(this)).filter(e=>Boolean(e));(0,u.isEmpty)(t)?i=null:e[n]=t;break}case(0,u.isString)(e[n]):i=null}}return i}replaceKeywords(e){const t='([^|^"])"('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"(?!")',i='([^|^"])"""('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"""(?!")',n=new RegExp(t,"g"),o=new RegExp(i,"g");return e.replace(n,"$1$2").replace(o,'$1"$2"')}}sp.\u0275fac=function(e){return new(e||sp)(n["\u0275\u0275inject"](v.RxJsonParserService))},sp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:sp,factory:sp.\u0275fac,providedIn:"root"});class lp{constructor(e,t,i,n,o,r,a){this.rxStringService=e,this.rxRecordGridUtilsService=t,this.rxJsonParserService=i,this.rxRecordGridAdvancedFilteringService=n,this.rxRecordDefinitionService=o,this.rxObjectUtilsService=r,this.rxRecordGridFilterHelperService=a,this.filtersKeywords=["$NULL$","$TIME$","$DATE$","$TIMESTAMP$","$USER$"]}clearFilterData(e){const t=(0,u.keys)(e);let i=e;if(!(0,u.isEmpty)(t)){const n=t[0];switch(!0){case(0,u.includes)(["or","and"],n):{const t=e[n].map(this.clearFilterData.bind(this)).filter(e=>Boolean(e));(0,u.isEmpty)(t)?i=null:e[n]=t;break}case(0,u.isString)(e[n]):i=null}}return i}getFilterForAvailableColumns(e,t){const i=(0,u.keys)(e);let n=e;if(!(0,u.isEmpty)(i)){const o=i[0],r=Object.keys(e[o])[0];switch(!0){case(0,u.includes)(["or","and"],o):{const i=e[o].map(e=>this.getFilterForAvailableColumns(e,t)).filter(e=>Boolean(e));(0,u.isEmpty)(i)?n=null:e[o]=i;break}case!(0,u.some)(t,{fieldId:r}):n=null;break;case(0,u.includes)(["eq"],o):{const i=(0,u.find)(t,{fieldId:r}).fieldDefinition;i.resourceType!==a.RX_RECORD_DEFINITION.resourceTypes.selection||(0,u.has)(i.optionNamesById,e[o][r])||(n=null);break}}}return n}replaceKeywords(e){const t='([^|^"])"('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"(?!")',i='([^|^"])"""('+this.filtersKeywords.join("|").replace(/\$/g,"\\$")+')"""(?!")',n=new RegExp(t,"g"),o=new RegExp(i,"g");return e.replace(n,"$1$2").replace(o,'$1"$2"')}generateTextFilterQuery(e,t){let i=null;if(e){const n=t.filter(e=>!e.hidden&&e.searchable).map(t=>{const i=this.getQueryFilterField(t.field);let n="";return t.filterType===a.RX_RECORD_DEFINITION.dataTypes.character.shortName||t.filterType===a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.shortName?n=`${i} LIKE "%${this.escapeDoubleQuotes(e).replace(/[%_]/g,"\\$&")}%"`:isNaN(e)||(n=`${i} = "${this.escapeDoubleQuotes(e)}"`),n}).filter(Boolean).join(" OR ");i=n?`(${n})`:""}return i}addQueries(...e){return(0,u.filter)(e,Boolean).join(" AND ")}joinQueryFilters(e,t){const i=e.join(t===tp.And?" AND ":" OR ");return i?`(${i})`:""}getAdvancedFilterData(e,t,i,n,a,s){return(0,o.forkJoin)(e&&e.and?e.and.map(e=>{const l=Object.keys(e)[0],c=e[l],d=(0,u.values)(c[0])[0],p=String(Object.keys(d)[0]);let m=t[p];return(m?(0,o.of)(m):this.rxRecordGridUtilsService.getFieldDefinition(p,n)).pipe((0,r.filter)(Boolean),(0,r.map)(e=>{m=e;const o=i[m.resourceType];if(!t[p]){this.rxRecordDefinitionService.addFieldDefinitionToMap(m,t,p),t=n.fieldDefinitionsById=Object.assign(Object.assign({},t),this.rxObjectUtilsService.expandProperties(t));const e=this.rxRecordGridUtilsService.findAssociationDescriptor(s,this.rxRecordGridUtilsService.getFieldLocator(p));a.push(this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(p,this.rxRecordGridUtilsService.getColumnLabel(m,e),m,o,!0))}return o.getSelectedAdvancedFilterData(l,c,m,p)}))}):[]).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.filter(Boolean)))}getQueryFromRecordGridFilterData(e,t){const i=[c.RecordGridFilterOperator.Eq,c.RecordGridFilterOperator.Like,c.RecordGridFilterOperator.Ne,c.RecordGridFilterOperator.Lt,c.RecordGridFilterOperator.Lte,c.RecordGridFilterOperator.Gt,c.RecordGridFilterOperator.Gte,c.RecordGridFilterOperator.In,"regex"],n=e=>(0,u.reduce)(e,(e,i,n)=>e+(0,u.reduce)(i,(e,i,o)=>{const r=t[o];let s=n,l=i;if(!!r&&(0,u.includes)([a.RX_RECORD_DEFINITION.dataTypes.character.resourceType,a.RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType],r.resourceType)){const{isLikeOperation:e,filterValue:t}=this.getStringDataTypeFilterData(i,r);s=e?c.RecordGridFilterOperator.Like:s,l=t}return"$DISPLAYVALUE$"===o?e:e+this.getQueryExpression(l,o,s)},""),"");let o=e=>(e=>(0,u.intersection)(i.slice(),(0,u.keys)(e)).length>0)(e)?n(e):(0,u.reduce)(e,(e,t,i)=>{const n=(0,u.map)(t,o);switch(i){case c.RecordGridFilterDataLogic.And:return e+`(${n.join(" AND ")})`;case c.RecordGridFilterDataLogic.Or:return e+`(${n.join(" OR ")})`;default:return e+`(${n.join(" AND ")})`}},"");return o=o.bind(this),o(e)}getSelectedFiltersFromPredefinedFilter(e,t,i,n,o,r,a){const s=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e,this.deserializeNamedOptions(t));return this.getAdvancedFilterData(s,i,n,o,r,a)}getRecordGridFilterDataFromAdvancedFilter(e,t,i,n){const o=e.map(e=>{let o=null;const r=String(e.filterOptionId),a=t[r];if(a){o=i[a.resourceType].getRecordGridFilterData(e.value,a,r,n&&n[r])}return o});return o.length?{and:o}:{}}getQueryFilterField(e){return this.rxRecordGridUtilsService.isAssociatedRecordFieldId(e)?`\${${e}}`:`'${e}'`}buildQueryFilter(e,t,i){const n=(0,u.isString)(i)&&!this.filtersKeywords.includes(i),o=(0,u.isString)(i)?n?`"${this.escapeDoubleQuotes(i)}"`:i:String(i);return`${this.getQueryFilterField(e)} ${t} ${o}`}filterRows(e,t,i,n){const o=this.getRecordGridFilterDataFromAdvancedFilter(t,i.fieldDefinitionsById,n);return e.filter(e=>e.groupField?(e.items=this.getFilteredItems(e.items,o,i),e.items.length):(0,u.every)(o.and,t=>this.matchRow(e,t,i)))}getFilteredItems(e,t,i){return(0,u.reduce)(e,(e,n)=>{let{items:o=[]}=n;return!n.items&&(0,u.every)(t.and,e=>this.matchRow(n,e,i))?e.push(n):(o=this.getFilteredItems(o,t,i),o.length&&e.push(Object.assign(Object.assign({},n),{items:o}))),e},[])}matchRow(e,t,i){const n=(0,u.findKey)(t);switch(n){case"and":return(0,u.every)(t[n],t=>this.checkCondition(e,t,i));case"or":return(0,u.some)(t[n],t=>this.checkCondition(e,t,i));default:return!1}}checkCondition(e,t,i){const n=(0,u.findKey)(t),o=(0,u.findKey)(t[n]),r=t[n][o],s=e[o];if(i.fieldDefinitionsById[o].resourceType!==a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType)return"eq"===n&&this.rxStringService.caseInsensitiveIsEqual(s,r);switch(n){case"eq":return(0,I.default)(s).isSame(r);case"lte":return(0,I.default)(s).isSameOrBefore(r);case"lt":return(0,I.default)(s).isBefore(r);case"gte":return(0,I.default)(s).isSameOrAfter(r);case"gt":return(0,I.default)(s).isAfter(r);default:return!1}}escapeDoubleQuotes(e){return e.replace(/"/g,'""')}getQueryExpression(e,t,i){const n=(0,u.isString)(e)?'"'+e+'"':e;switch(t=this.getQueryFilterField(t),i){case c.RecordGridFilterOperator.Eq:return t+"="+n;case c.RecordGridFilterOperator.Like:return t+" LIKE "+n;case c.RecordGridFilterOperator.Ne:return t+"!="+n;case c.RecordGridFilterOperator.Lt:return t+"<"+n;case c.RecordGridFilterOperator.Lte:return t+"<="+n;case c.RecordGridFilterOperator.Gt:return t+">"+n;case c.RecordGridFilterOperator.Gte:return t+">="+n;case c.RecordGridFilterOperator.In:return t+" IN "+n;default:return t+"="+n}}getStringDataTypeFilterData(e,t){let i=!1;if(!(0,u.get)(t.searchDefinition,"enableFTSSearch"))if((0,u.includes)(e,"%")){const t=e.split(/\\\\/);i=(0,u.some)(t,e=>e.replace(/\\%/g,"").match("%")),i||(e=(0,u.map)(t,e=>e.replace(/\\%/g,"%")).join("\\"))}else e=e.replace("\\\\","\\");return{isLikeOperation:i,filterValue:e}}clearRemovedNamedFilterOptions(e,t){return e.reduce((e,i)=>{var n,o;const r=null!==(o=null===(n=t[i.filterOptionId])||void 0===n?void 0:n.map(e=>e.guid))&&void 0!==o?o:[];return i.value.namedOptions=i.value.namedOptions.filter(e=>r.includes(e)),rp.isEmptyWithRange(i.value)||e.push(i),e},[])}deserializeNamedOptions(e){return e.map(e=>{const t=this.rxJsonParserService.tryParseJson(e.value);return t&&t[c.RecordGridNamedFilterOptionKey]?Object.assign(Object.assign({},e),{value:t}):e})}}lp.\u0275fac=function(e){return new(e||lp)(n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](Pd),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](ap),n["\u0275\u0275inject"](a.RxRecordDefinitionService),n["\u0275\u0275inject"](v.RxObjectUtilsService),n["\u0275\u0275inject"](sp))},lp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:lp,factory:lp.\u0275fac});class cp{constructor(e,t,i,n,o,r,a){this.rxRecordGridFilterService=e,this.rxNumberUtilsService=t,this.rxNamedListService=i,this.translateService=n,this.rxRecordInstanceUtilsService=o,this.rxRecordGridUtilsService=r,this.rxDefinitionNameService=a,this.associatedFieldIdPatternRegExp=new RegExp(`'(${jd.associatedFieldIdPrefixPattern}\\d+)'`,"g")}getConfigs(){const e={filterOptionDataType:m.AdvancedFilterOptionDataType.string,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),r=(0,u.chain)(e.value.filterValue).filter(Boolean).map(e=>{const{isLikeOperation:n,filterValue:o}=this.rxRecordGridFilterService.getStringDataTypeFilterData((0,u.get)(e,"value",e),t);return this.rxRecordGridFilterService.buildQueryFilter(i,n?"like":"=",o.trim())}).concat(o).value();return this.rxRecordGridFilterService.joinQueryFilters(r,tp.Or)},getRecordGridFilterData:(e,t,i,n)=>{const o=this.getNamedFilterOptionsOperators(e,i);return{or:e.filterValue.map(e=>{const n=this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Eq,i,(0,u.get)(e,"value",e).trim()),o=(0,u.get)(e,"displayValue");return t.namedListDefinition&&o&&(n.eq.$DISPLAYVALUE$=o),n}).concat(o)}},getSelectedAdvancedFilterData:(e,t,i,n)=>{const o=[],r=[],a=[];e===c.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0],s=e[t][n];if((0,u.isString)(s))if(i.namedListDefinition){const i=e[t].$DISPLAYVALUE$;r.push({displayValue:i,value:s,title:"",contextualFields:[]})}else o.push(s);else s[c.RecordGridNamedFilterOptionKey]&&a.push(s[c.RecordGridNamedFilterOptionKey])});const s=(0,u.isEmpty)(r)?new rp(o,a):new rp(r,a);return{filterOptionId:n,value:s}},getToolbarTagInfo:({primaryRecordDefinition:e,value:t,tag:i,fieldId:n,namedFilterOptions:s})=>{const l=this.rxRecordGridUtilsService.getFieldLocator(n);let c;return this.rxRecordGridUtilsService.getAssociationDescriptor(n,e).pipe((0,r.mergeMap)(t=>(c=t,this.rxRecordGridUtilsService.getDisplayFieldDescriptor(n,e,c&&c.recordDefinitionName))),(0,r.mergeMap)(e=>{let n;if(l.fieldId!==String(e.id)){const i=this.rxNamedListService.getNamesFromTypeAheadOptions(t.filterValue);n=this.rxRecordInstanceUtilsService.getFieldValues(c.recordDefinitionName,i,[String(a.RX_RECORD_DEFINITION.coreFieldIds.id),String(e.id)]).pipe((0,r.map)(i=>{const n=(0,u.compact)([this.rxDefinitionNameService.getDisplayName(c.associationDefinition.name),e.name]).join(" > "),o=t.filterValue.map(t=>{const n=(0,u.find)(i,e=>e[a.RX_RECORD_DEFINITION.coreFieldIds.id]===t);return n?n[e.id]:t});return{displayValues:new rp(o),label:n}}))}else n=(0,o.of)({displayValues:t,label:i.data.filterOption.label});return n.pipe((0,r.map)(({displayValues:e,label:t})=>{const i=e.filterValue.map(e=>{var t,i;const n=(0,u.get)(e,"value",e),o=null!==(t=(0,u.get)(e,"displayValue"))&&void 0!==t?t:(0,u.get)(e,"value",e),r="$USER$"===n?this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.me.label"):o;return{tooltip:(null==e?void 0:e.displayValue)?`${e.displayValue} (${e.value})`:null!==(i=null==e?void 0:e.value)&&void 0!==i?i:e,text:r}}).concat(e.namedOptions.map(e=>{var t;const i=(null===(t=s.find(t=>t.guid===e))||void 0===t?void 0:t.title)||e;return{text:i,tooltip:i}}));return{text:`${t}: ${i.map(e=>e.text).join(", ")}`,tooltip:`${t}: ${i.map(e=>e.tooltip).join(", ")}`}}))}))},getDataForAdvancedFilter:e=>e},t={filterOptionDataType:m.AdvancedFilterOptionDataType.number,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue,s=[];this.rxNumberUtilsService.isFiniteOrNumberString(r)&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",String(r))),this.rxNumberUtilsService.isFiniteOrNumberString(a)&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",String(a)));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue,r=[];return this.rxNumberUtilsService.isFiniteOrNumberString(n)&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Gte,i,String(n))),this.rxNumberUtilsService.isFiniteOrNumberString(o)&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Lte,i,String(o))),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getDataForAdvancedFilter:e=>({minValue:e.minValue,maxValue:e.maxValue}),getSelectedAdvancedFilterData:(e,t,i,n)=>{let o=[null,null];const r=e=>{const t=(0,u.find)(e,e=>e[c.RecordGridFilterOperator.Gte]);if(t){const e=parseFloat(t[c.RecordGridFilterOperator.Gte][n]);this.rxNumberUtilsService.isFiniteOrNumberString(e)&&(o[0]=e)}const i=(0,u.find)(e,e=>e[c.RecordGridFilterOperator.Lte]);if(i){const e=parseFloat(i[c.RecordGridFilterOperator.Lte][n]);this.rxNumberUtilsService.isFiniteOrNumberString(e)&&(o[1]=e)}};if(e===c.RecordGridFilterDataLogic.And)r(t);else if(e===c.RecordGridFilterDataLogic.Or){const e=(0,u.find)(t,e=>e[c.RecordGridFilterDataLogic.And]);if(e)r(e[c.RecordGridFilterDataLogic.And]);else if(1===t.length){let e=t[0][c.RecordGridFilterOperator.Eq][n];"$NULL$"===e||e[c.RecordGridNamedFilterOptionKey]||(e=parseFloat(e),o=[e,e])}}const a=this.getNamedFilterOptionGuids(t,n);return{filterOptionId:n,value:new rp(o,a)}}};return{[a.RX_RECORD_DEFINITION.resourceTypes.character]:e,[a.RX_RECORD_DEFINITION.resourceTypes.localizedCharacter]:e,[a.RX_RECORD_DEFINITION.resourceTypes.attachment]:e,[a.RX_RECORD_DEFINITION.resourceTypes.integer]:t,[a.RX_RECORD_DEFINITION.resourceTypes.decimal]:t,[a.RX_RECORD_DEFINITION.resourceTypes.real]:t,[a.RX_RECORD_DEFINITION.resourceTypes.selection]:{filterOptionDataType:m.AdvancedFilterOptionDataType.selection,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e);return this.rxRecordGridFilterService.joinQueryFilters(e.value.filterValue.map(e=>this.rxRecordGridFilterService.buildQueryFilter(i,"=",e)).concat(o),tp.Or)},getDataForAdvancedFilter:e=>{const t=(0,u.map)(e.optionLabelsById,(e,t)=>({id:t,name:e}));return e.fieldOption===a.RX_RECORD_DEFINITION.fieldOptions.optional&&t.unshift({id:"$NULL$",name:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.blank.label")}),{selectOptions:t,selectTexts:null}},getRecordGridFilterData:(e,t,i)=>{const n=this.getNamedFilterOptionsOperators(e,i);return{or:e.filterValue.map(e=>this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Eq,i,e)).concat(n)}},getSelectedAdvancedFilterData:(e,t,i,n)=>{const o=[],r=[];return e===c.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0];if(t===c.RecordGridFilterOperator.Eq){const i=e[t][n];(0,u.isString)(i)?o.push(i):i[c.RecordGridNamedFilterOptionKey]&&r.push(i[c.RecordGridNamedFilterOptionKey])}}),{filterOptionId:n,value:new rp(o,r)}}},[a.RX_RECORD_DEFINITION.resourceTypes.timeOnly]:{filterOptionDataType:m.AdvancedFilterOptionDataType.time,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];r&&r.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.format("HH:mm:ss"))),a&&a.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.format("HH:mm:ss")));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return n&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Gte,i,n&&n.isValid()?n.format("HH:mm:ss"):"")),o&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Lte,i,o&&o.isValid()?o.format("HH:mm:ss"):"")),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>{let o=[null,null];const r=e=>{const t=(0,u.find)(e,e=>e[c.RecordGridFilterOperator.Gte]);if(t){const e=(0,I.default)(t[c.RecordGridFilterOperator.Gte][n],"LTS");e.isValid()&&(o[0]=e)}const i=(0,u.find)(e,e=>e[c.RecordGridFilterOperator.Lte]);if(i){const e=(0,I.default)(i[c.RecordGridFilterOperator.Lte][n],"LTS");e.isValid()&&(o[1]=e)}};if(e===c.RecordGridFilterDataLogic.And)r(t);else if(e===c.RecordGridFilterDataLogic.Or){const e=(0,u.find)(t,e=>e[c.RecordGridFilterDataLogic.And]);if(e)r(e[c.RecordGridFilterDataLogic.And]);else if(1===t.length){let e=t[0][c.RecordGridFilterOperator.Eq][n];"$NULL$"===e||e[c.RecordGridNamedFilterOptionKey]||(e=(0,I.default)(e,"LTS"),o=[e,e])}}const a=this.getNamedFilterOptionGuids(t,n);return{filterOptionId:n,value:new rp(o,a)}}},[a.RX_RECORD_DEFINITION.resourceTypes.dateOnly]:{filterOptionDataType:m.AdvancedFilterOptionDataType.date,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];r&&r.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.format("YYYY-MM-DD"))),a&&a.isValid()&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.format("YYYY-MM-DD")));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return n&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Gte,i,n&&n.isValid()?n.format("YYYY-MM-DD"):"")),o&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Lte,i,o&&o.isValid()?o.format("YYYY-MM-DD"):"")),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>this.getDateSelectedAdvancedFilterData(n,e,t)},[a.RX_RECORD_DEFINITION.resourceTypes.dateTime]:{filterOptionDataType:m.AdvancedFilterOptionDataType.datetime,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e),[r,a]=e.value.filterValue.map(e=>(0,I.default)(e)),s=[];(null==r?void 0:r.isValid())&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,">=",r.toISOString())),(null==a?void 0:a.isValid())&&s.push(this.rxRecordGridFilterService.buildQueryFilter(i,"<=",a.toISOString()));const l=this.rxRecordGridFilterService.joinQueryFilters(s,tp.And);return this.rxRecordGridFilterService.joinQueryFilters(l?[l,...o]:o,tp.Or)},getRecordGridFilterData:(e,t,i)=>{const[n,o]=e.filterValue.map(e=>(0,I.default)(e)),r=[];return(null==n?void 0:n.isValid())&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Gte,i,n.toISOString())),(null==o?void 0:o.isValid())&&r.push(this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Lte,i,o.toISOString())),this.getFilterRangeDataOperator(r,this.getNamedFilterOptionsOperators(e,i))},getSelectedAdvancedFilterData:(e,t,i,n)=>this.getDateSelectedAdvancedFilterData(n,e,t)},[a.RX_RECORD_DEFINITION.resourceTypes.boolean]:{filterOptionDataType:m.AdvancedFilterOptionDataType.boolean,getQueryFilter:(e,t,i,n)=>{const o=this.getSelectedNamedOptionExpressions(n,e);return this.rxRecordGridFilterService.joinQueryFilters((0,u.castArray)(e.value.filterValue).map(e=>this.rxRecordGridFilterService.buildQueryFilter(i,"=",this.getBooleanFilterValue(e))).concat(o),tp.Or)},getRecordGridFilterData:(e,t,i)=>({or:(0,u.castArray)(e.filterValue).map(e=>this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Eq,i,this.getBooleanFilterValue(e))).concat(this.getNamedFilterOptionsOperators(e,i))}),getDataForAdvancedFilter:e=>({selectOptions:[{name:this.translateService.instant("com.bmc.arsys.rx.client.common.true"),id:!0},{name:this.translateService.instant("com.bmc.arsys.rx.client.common.false"),id:!1},{name:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filters.blank.label"),id:"blank"}],isRequired:e.fieldOption===a.RecordFieldOption.Required}),getSelectedAdvancedFilterData:(e,t,i,n)=>{let o;if(i.fieldOption===a.RecordFieldOption.Required)if(1===t.length){const e=(0,u.find)(t,e=>e[c.RecordGridFilterOperator.Eq]);if(e){const t=e[c.RecordGridFilterOperator.Eq][n];o="$NULL$"===t?null:["true"===t]}}else o=null;else o=[],e===c.RecordGridFilterDataLogic.Or&&t.forEach(e=>{const t=Object.keys(e)[0];if(t===c.RecordGridFilterOperator.Eq){const i=e[t][n];if(!i[c.RecordGridNamedFilterOptionKey])switch(i){case"true":o.push(!0);break;case"$NULL$":o.push(m.booleanDataTypeBlankValue);break;default:o.push(!1)}}});const r=this.getNamedFilterOptionGuids(t,n);return o?{filterOptionId:n,value:new rp(o,r)}:null}},[a.RX_RECORD_DEFINITION.resourceTypes.recordInstance]:null,[a.RX_RECORD_DEFINITION.resourceTypes.object]:null,[a.RX_RECORD_DEFINITION.resourceTypes.recordInstanceProcessVariable]:null,[a.RX_RECORD_DEFINITION.resourceTypes.localizedFieldInstance]:null}}getDateSelectedAdvancedFilterData(e,t,i){let n=[null,null];const o=t=>{const i=(0,u.find)(t,e=>e[c.RecordGridFilterOperator.Gte]);if(i){const t=(0,I.default)(i[c.RecordGridFilterOperator.Gte][e]);t.isValid()&&(n[0]=t)}const o=(0,u.find)(t,e=>e[c.RecordGridFilterOperator.Lte]);if(o){const t=(0,I.default)(o[c.RecordGridFilterOperator.Lte][e]);t.isValid()&&(n[1]=t)}};if(t===c.RecordGridFilterDataLogic.And)o(i);else if(t===c.RecordGridFilterDataLogic.Or){const t=(0,u.find)(i,e=>e[c.RecordGridFilterDataLogic.And]);if(t)o(t[c.RecordGridFilterDataLogic.And]);else if(1===i.length){let t=i[0][c.RecordGridFilterOperator.Eq][e];"$NULL$"===t||t[c.RecordGridNamedFilterOptionKey]||(t=(0,I.default)(t),n=[t,t])}}return{filterOptionId:e,value:new rp(n,this.getNamedFilterOptionGuids(i,e))}}getFilterRangeDataOperator(e,t){const i={and:e};return t.length?{or:e.length?t.concat(i):t}:i}getNamedFilterOptionGuids(e,t){return e.filter(e=>e[c.RecordGridFilterOperator.Eq]).map(e=>{const i=e[c.RecordGridFilterOperator.Eq][t];return i?i[c.RecordGridNamedFilterOptionKey]:null}).filter(e=>Boolean(e))}getSelectedNamedOptionExpressions(e,t){return e.filter(e=>t.value.namedOptions.includes(e.guid)).map(e=>e.filterExpression.replace(this.associatedFieldIdPatternRegExp,"${$1}"))}getNamedFilterOptionsOperators(e,t){return e.namedOptions.map(e=>this.getRecordGridFilterOperator(c.RecordGridFilterOperator.Eq,t,{[c.RecordGridNamedFilterOptionKey]:e}))}getRecordGridFilterOperator(e,t,i){return{[e]:{[t]:i}}}getBooleanFilterValue(e){return e?e===m.booleanDataTypeBlankValue?"$NULL$":"true":"false"}}cp.\u0275fac=function(e){return new(e||cp)(n["\u0275\u0275inject"](lp),n["\u0275\u0275inject"](v.RxNumberUtilsService),n["\u0275\u0275inject"](A.RxNamedListService),n["\u0275\u0275inject"](p.TranslateService),n["\u0275\u0275inject"](a.RxRecordInstanceUtilsService),n["\u0275\u0275inject"](Pd),n["\u0275\u0275inject"](s.RxDefinitionNameService))},cp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:cp,factory:cp.\u0275fac});class dp{constructor(){this.defaultFilterValue=[],this.namedFilterOptionsChange=new n.EventEmitter,this.namedFilterOptionsModel={}}set filterValue(e){const t=null==e?void 0:e.namedOptions;this._filterValue=e,Object.keys(this.namedFilterOptionsModel).forEach(e=>this.namedFilterOptionsModel[e]=!1),null==t||t.forEach(e=>this.namedFilterOptionsModel[e]=!0)}get filterValue(){return this._filterValue}trackByOptionGuid(e,t){return t.guid}onNamedFilterOptionChange(){var e,t;const i=this.getSelectedNamedOptionsIds();this.namedFilterOptionsChange.emit(i);const n=new rp(null!==(t=null===(e=this.filterValue)||void 0===e?void 0:e.filterValue)&&void 0!==t?t:this.defaultFilterValue,i);this.filterControlsComponent.onFilterOptionModelChange(n)}getSelectedNamedOptionsIds(){return(0,u.reduce)(this.namedFilterOptionsModel,(e,t,i)=>(t&&e.push(i),e),[])}}dp.\u0275fac=function(e){return new(e||dp)},dp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:dp,selectors:[["rx-named-filter-options-list"]],inputs:{namedFilterOptions:"namedFilterOptions",filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",defaultFilterValue:"defaultFilterValue"},outputs:{namedFilterOptionsChange:"namedFilterOptionsChange"},decls:1,vars:1,consts:[["class","options-wrapper",4,"ngIf"],[1,"options-wrapper"],["class","dropdown-item p-0 text-break",3,"label","ngModel","ngModelChange",4,"ngFor","ngForOf","ngForTrackBy"],[1,"dropdown-item","p-0","text-break",3,"label","ngModel","ngModelChange"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,En,2,2,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length)},directives:[h.NgIf,h.NgForOf,m.AdaptRxCheckboxComponent,b.NgControlStatus,b.NgModel],styles:[".options-wrapper[_ngcontent-%COMP%]{margin-top:-1.5rem;margin-bottom:-2px}adapt-rx-checkbox[_ngcontent-%COMP%]:not(:last-child){margin-bottom:14px}.dropdown-item[_ngcontent-%COMP%]{white-space:normal}"]});class pp{constructor(){this.namedFilterOptions=[],this.isRequired=!1}set filterValue(e){const t=this.getSelectOptions();this._filterValue=e,this.selectedValues=(null==e?void 0:e.filterValue)?e.filterValue.map(e=>(0,u.find)(t,{id:e})):[]}get filterValue(){return this._filterValue}selectOptionFormatter(e){return e.name}onValueChange(e){var t;const i=e.map(e=>e.id);this.filterControlsComponent.onFilterOptionModelChange(new rp(i,null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}getSelectOptions(){var e;return(null===(e=this.filterOption.data)||void 0===e?void 0:e.selectOptions)||[]}onValueChangeRequired(e){var t,i,n;const o=Array.isArray(null===(t=this.filterValue)||void 0===t?void 0:t.filterValue)?this.filterValue.filterValue[0]:null===(i=this.filterValue)||void 0===i?void 0:i.filterValue;this.filterControlsComponent.onFilterOptionModelChange(new rp(e===o?null:[e],null===(n=this.filterValue)||void 0===n?void 0:n.namedOptions))}}pp.\u0275fac=function(e){return new(e||pp)},pp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pp,selectors:[["rx-boolean-filter"]],inputs:{filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",namedFilterOptions:"namedFilterOptions",isRequired:"isRequired"},decls:4,vars:3,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],["class","advanced-filter__rx-select advanced-filter__rx-select_simple",3,"inline","multiple","optionFormatter","options","popupMaxHeight","ngModel","ngModelChange",4,"ngIf","ngIfElse"],["inputsForBooleanTypeTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[1,"advanced-filter__rx-select","advanced-filter__rx-select_simple",3,"inline","multiple","optionFormatter","options","popupMaxHeight","ngModel","ngModelChange"],[1,"advanced-filter__radiobutton-group",3,"ngModel","ngModelChange"],["name","booleanTypeGroup",1,"advanced-filter__radiobutton",3,"value","label","testID","disabled"],["name","booleanTypeGroup","class","advanced-filter__radiobutton",3,"value","label","testID","disabled",4,"ngIf"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,Mn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275template"](1,On,1,6,"adapt-rx-select",1),n["\u0275\u0275template"](2,jn,4,10,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isRequired)("ngIfElse",e)}},directives:[h.NgIf,dp,m.AdaptRxSelectComponent,b.NgControlStatus,b.NgModel,m.AdaptRxRadiobuttonGroupComponent,m.AdaptRxRadiobuttonComponent],encapsulation:2});class up{constructor(e,t,i){this.rxNamedListService=e,this.rxNamedListDefinitionService=t,this.rxFeatureService=i,this.namedFilterOptions=[],this.selectedValues=[],this.isSearchInProgress=!1,this.search=e=>e.pipe((0,r.debounceTime)(250),(0,r.distinctUntilChanged)(),(0,r.tap)(()=>{this.isSearchInProgress=!0}),(0,r.switchMap)(e=>this.getSelectOptions(e)),(0,r.finalize)(()=>{this.isSearchInProgress=!1}))}set filterValue(e){this._filterValue=e,this.selectedValues=(null==e?void 0:e.filterValue)||[]}get filterValue(){return this._filterValue}ngOnInit(){var e;this.namedListDefinition$=this.rxNamedListDefinitionService.get(this.filterOption.data.namedListDefinition).pipe((0,r.shareReplay)(1)),this.typeaheadKeystrokeCount=null!==(e=this.filterOption.data.typeaheadKeystrokeCount)&&void 0!==e?e:jd.defaultTypeaheadKeystrokeCount}onValueChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e.map(e=>this.rxNamedListService.isNamedListOption(e)?e:{displayValue:void 0,value:e,title:"",contextualFields:[]}),null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}getSelectOptions(e){return e.length>=this.typeaheadKeystrokeCount?this.namedListDefinition$.pipe((0,r.switchMap)(t=>this.rxNamedListService.getOptionPageByLabelOrValue(t,e,this.filterOption.data.additionalQueryCriteria).pipe((0,r.map)(e=>e.options)))):(0,o.of)([])}}up.\u0275fac=function(e){return new(e||up)(n["\u0275\u0275directiveInject"](A.RxNamedListService),n["\u0275\u0275directiveInject"](A.RxNamedListDefinitionService),n["\u0275\u0275directiveInject"](s.RxFeatureService))},up.\u0275cmp=n["\u0275\u0275defineComponent"]({type:up,selectors:[["rx-string-with-type-ahead-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:9,vars:11,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[2,"position","relative"],[3,"search","ngModel","replaceModelOnWrite","selectItemTemplate","tagTemplate","openDropdownOnFocus","placeholder","ngModelChange"],["class","position-absolute text-info inline-loader",4,"ngIf"],["tagTemplate",""],["selectItemTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[1,"position-absolute","text-info","inline-loader"],[1,"d-icon-circle_75_o","animated","infinite","spin-360","transition-out","slow"],["class","text-secondary selection-item-contextual-fields text-truncate",3,"title",4,"ngIf"],[1,"text-secondary","selection-item-contextual-fields","text-truncate",3,"title"],["class","breadcrumb-item active",4,"ngFor","ngForOf"],[1,"breadcrumb-item","active"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,Pn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"adapt-tag-field",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onValueChange(e)}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,Nn,2,0,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,Vn,1,1,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,$n,2,2,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](6),i=n["\u0275\u0275reference"](8);n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("search",t.search)("ngModel",t.selectedValues)("replaceModelOnWrite",!0)("selectItemTemplate",i)("tagTemplate",e)("openDropdownOnFocus",0===t.typeaheadKeystrokeCount)("placeholder",n["\u0275\u0275pipeBind1"](3,9,"com.bmc.arsys.rx.client.view-components.record-grid.filters.typeahead.placeholder")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isSearchInProgress)}},directives:[h.NgIf,m.AdaptMetatagComponent,b.NgControlStatus,b.NgModel,dp,h.NgForOf],pipes:[p.TranslatePipe],styles:[".inline-loader[_ngcontent-%COMP%]{z-index:10;right:15px;top:8px}.selection-item-contextual-fields[_ngcontent-%COMP%]{max-width:300px}"]});class mp{constructor(){this.namedFilterOptions=[]}onStringTypeFilterOptionModelChange(e,t){var i,n;const o=e.filter(e=>!(0,m.isEmptyOrWhitespace)((0,m.getTagText)(e)));o.length<e.length&&(0,u.isEqual)(o,(null===(i=this.filterValue)||void 0===i?void 0:i.filterValue)||[])?t.writeValue(o):this.filterControlsComponent.onFilterOptionModelChange(new rp(o,null===(n=this.filterValue)||void 0===n?void 0:n.namedOptions))}}mp.\u0275fac=function(e){return new(e||mp)},mp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:mp,selectors:[["rx-string-filter"]],inputs:{filterOption:"filterOption",filterValue:"filterValue",filterControlsComponent:"filterControlsComponent",namedFilterOptions:"namedFilterOptions"},decls:3,vars:9,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],["mainCls","advanced-filter__string-tag-field","popupClass","advanced-filter__typeahead-window",3,"ngModel","testID","delimiterSymbol","placeholder","replaceModelOnWrite","disabled","hideLabel","ngModelChange"],["stringDataTypeTagField",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275template"](0,Gn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"adapt-tag-field",1,2),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](2);return t.onStringTypeFilterOptionModelChange(i,o)}),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngModel",(null==t.filterValue?null:t.filterValue.filterValue)||n["\u0275\u0275pureFunction0"](8,et))("testID",t.filterControlsComponent.testID)("delimiterSymbol",null)("placeholder",t.filterControlsComponent.texts.stringTypeTagFieldPlaceholder)("replaceModelOnWrite",!0)("disabled",t.filterControlsComponent.isInputDisabled())("hideLabel",!0))},directives:[h.NgIf,m.AdaptMetatagComponent,b.NgControlStatus,b.NgModel,dp],encapsulation:2});class hp{getNumberDataTypeModel(e,t){return e&&e.filterValue?e.filterValue[t]:null}onNumberTypeFilterOptionModelChange(e,t,i){t.onFilterOptionModelChange(new rp(i,null==e?void 0:e.namedOptions))}}hp.\u0275fac=function(e){return new(e||hp)},hp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hp,selectors:[["rx-number-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:8,vars:15,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[1,"d-flex"],[1,"advanced-filter__counter-from-wrap"],[1,"advanced-filter__counter-from",3,"label","ngModel","min","max","disabled","testID","ngModelChange"],["counterFrom",""],[1,"advanced-filter__counter-to-wrap"],[1,"advanced-filter__counter-to",3,"label","ngModel","min","max","disabled","testID","ngModelChange"],["counterTo",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275template"](0,zn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-rx-counter",3,4),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](7);return t.onNumberTypeFilterOptionModelChange(t.filterValue,t.filterControlsComponent,[i,o?t.getNumberDataTypeModel(t.filterValue,1):null])}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",5),n["\u0275\u0275elementStart"](6,"adapt-rx-counter",6,7),n["\u0275\u0275listener"]("ngModelChange",function(i){n["\u0275\u0275restoreView"](e);const o=n["\u0275\u0275reference"](4);return t.onNumberTypeFilterOptionModelChange(t.filterValue,t.filterControlsComponent,[o?t.getNumberDataTypeModel(t.filterValue,0):null,i])}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("has-danger",t.filterControlsComponent.hasValidationErrors),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",t.filterControlsComponent.texts.counterFromLabel)("ngModel",t.getNumberDataTypeModel(t.filterValue,0))("min",t.filterControlsComponent.getNumberDataTypeMinAllowedValue())("max",t.filterControlsComponent.getNumberDataTypeMaxAllowedValue())("disabled",t.filterControlsComponent.isInputDisabled())("testID",t.filterControlsComponent.testID+"_from"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("label",t.filterControlsComponent.texts.counterToLabel)("ngModel",t.getNumberDataTypeModel(t.filterValue,1))("min",t.filterControlsComponent.getNumberDataTypeMinAllowedValue())("max",t.filterControlsComponent.getNumberDataTypeMaxAllowedValue())("disabled",t.filterControlsComponent.isInputDisabled())("testID",t.filterControlsComponent.testID+"_to"))},directives:[h.NgIf,m.AdaptRxCounterComponent,b.NgControlStatus,b.NgModel,dp],encapsulation:2});class fp extends m.AdaptRxDatetimeAdapter{fromModel(e){let t=null;const i=(0,I.default)(e);return i&&i.isValid()&&(t={year:i.year(),month:i.month(),date:i.date(),hours:i.hours(),minutes:i.minutes(),seconds:i.seconds()}),t}toModel(e){var t,i,n,o,r,a;let s=null;if(e){const l=(0,I.default)();s=e.parseError?I.default.invalid({invalidFormat:!0,parsedDateParts:[e.parseError.query],meridiem:e.parseError.use12HoursTime?"12":"24"}):(0,I.default)([null!==(t=e.year)&&void 0!==t?t:l.year(),null!==(i=e.month)&&void 0!==i?i:l.month(),null!==(n=e.date)&&void 0!==n?n:l.date(),null!==(o=e.hours)&&void 0!==o?o:0,null!==(r=e.minutes)&&void 0!==r?r:0,null!==(a=e.seconds)&&void 0!==a?a:0])}return s}}fp.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](fp)))(t||fp)}}(),fp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:fp,factory:fp.\u0275fac});class gp{constructor(){this.rxDatetimePickerMode=m.RxDatetimePickerMode}onTimeTypeFilterOptionModelChange(e){this.onDateTimeTypeFilterOptionModelChange(e)}onDateTypeFilterOptionModelChange(e){e[0]&&e[0].isValid()&&(e[0]=e[0].startOf("day")),e[1]&&e[1].isValid()&&(e[1]=e[1].startOf("day")),this.onDateTimeTypeFilterOptionModelChange(e)}onDateTimeTypeFilterOptionModelChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e,null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}}gp.\u0275fac=function(e){return new(e||gp)},gp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:gp,selectors:[["rx-date-time-range-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions",mode:"mode"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:m.AdaptRxDatetimeAdapter,useClass:fp}])],decls:11,vars:5,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[3,"ngSwitch"],[3,"ngTemplateOutlet",4,"ngSwitchCase"],["inputsForTimeTypeTemplate",""],["inputsForDateTypeTemplate",""],["inputsForDatetimeTypeTemplate",""],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"],[3,"ngTemplateOutlet"],[1,"advanced-filter__datetime",3,"ngModel","testID","mode","hasSeconds","inline","inlineLight","texts","disabled","ngModelChange"],[1,"advanced-filter__datetime",3,"ngModel","testID","mode","inline","inlineLight","texts","disabled","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Un,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementContainerStart"](1,1),n["\u0275\u0275template"](2,qn,1,1,"ng-container",2),n["\u0275\u0275template"](3,Xn,1,1,"ng-container",2),n["\u0275\u0275template"](4,Hn,1,1,"ng-container",2),n["\u0275\u0275elementContainerEnd"](),n["\u0275\u0275template"](5,Wn,1,8,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](7,Yn,1,7,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](9,Qn,1,8,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitch",t.mode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.Time),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.Date),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngSwitchCase",t.rxDatetimePickerMode.DateTime))},directives:[h.NgIf,h.NgSwitch,h.NgSwitchCase,dp,h.NgTemplateOutlet,m.AdaptRxDatetimeRangeComponent,b.NgControlStatus,b.NgModel],encapsulation:2});class vp{set filterValue(e){this._filterValue=e;const t=this.getSelectionTypeOptions();this.selectionTypeModel=t.length&&(null==e?void 0:e.filterValue)?e.filterValue.map(e=>t.find(t=>t.id===e)):null}get filterValue(){return this._filterValue}getSelectionTypeOptions(){var e;const t=this.filterOption.data;return null!==(e=null==t?void 0:t.selectOptions)&&void 0!==e?e:[]}onSelectionTypeFilterOptionModelChange(e){var t;this.filterControlsComponent.onFilterOptionModelChange(new rp(e.map(e=>e.id),null===(t=this.filterValue)||void 0===t?void 0:t.namedOptions))}}vp.\u0275fac=function(e){return new(e||vp)},vp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vp,selectors:[["rx-selection-filter"]],inputs:{filterOption:"filterOption",filterControlsComponent:"filterControlsComponent",filterValue:"filterValue",namedFilterOptions:"namedFilterOptions"},decls:2,vars:14,consts:[[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent",4,"ngIf"],[1,"advanced-filter__rx-select",3,"inline","multiple","selectAllButton","deselectAllButton","enableFilter","optionFormatter","options","texts","popupMaxHeight","ngModel","disabledOptionResolver","ngModelChange"],[3,"namedFilterOptions","filterOption","filterValue","filterControlsComponent"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Kn,1,4,"rx-named-filter-options-list",0),n["\u0275\u0275elementStart"](1,"adapt-rx-select",1),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.onSelectionTypeFilterOptionModelChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",null==t.namedFilterOptions?null:t.namedFilterOptions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("advanced-filter__rx-select_simple",t.filterControlsComponent.canShowSimpleInlineSelect()),n["\u0275\u0275property"]("inline",!0)("multiple",!0)("selectAllButton",!0)("deselectAllButton",!0)("enableFilter",!t.filterControlsComponent.canShowSimpleInlineSelect())("optionFormatter",t.filterControlsComponent.selectOptionFormatter)("options",t.filterControlsComponent.getSelectionTypeOptions())("texts",t.filterControlsComponent.getSelectionTypeTexts())("popupMaxHeight",null)("ngModel",t.selectionTypeModel)("disabledOptionResolver",t.filterControlsComponent.disabledSelectInputResolverBind))},directives:[h.NgIf,m.AdaptRxSelectComponent,b.NgControlStatus,b.NgModel,dp],encapsulation:2});class xp{constructor(){this.rxDatetimePickerMode=m.RxDatetimePickerMode,this.namedFilterOptionsGetter=e=>[]}}xp.\u0275fac=function(e){return new(e||xp)},xp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:xp,selectors:[["rx-advanced-filtering-fields-provider"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Jn,7),n["\u0275\u0275viewQuery"](Zn,7),n["\u0275\u0275viewQuery"](eo,7),n["\u0275\u0275viewQuery"](to,7),n["\u0275\u0275viewQuery"](io,7),n["\u0275\u0275viewQuery"](no,7),n["\u0275\u0275viewQuery"](oo,7),n["\u0275\u0275viewQuery"](ro,7),n["\u0275\u0275viewQuery"](ao,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.optionalBooleanFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.requiredBooleanFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForStringWithTypeAheadTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForStringTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForNumberTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForTimeTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForDateTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForDatetimeTypeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.inputsForSelectionTypeTemplate=e.first)}},inputs:{namedFilterOptionsGetter:"namedFilterOptionsGetter"},decls:18,vars:0,consts:[["optionalBooleanFilter",""],["requiredBooleanFilter",""],["inputsForStringWithTypeAheadTemplate",""],["inputsForStringTypeTemplate",""],["inputsForNumberTypeTemplate",""],["inputsForTimeTypeTemplate",""],["inputsForDateTypeTemplate",""],["inputsForDatetimeTypeTemplate",""],["inputsForSelectionTypeTemplate",""],[3,"filterControlsComponent","filterOption","filterValue","isRequired","namedFilterOptions"],[3,"filterControlsComponent","filterOption","filterValue","namedFilterOptions"],[3,"filterOption","filterValue","filterControlsComponent","namedFilterOptions"],[3,"filterOption","filterValue","filterControlsComponent","mode","namedFilterOptions"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,so,1,5,"ng-template",null,0,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](2,lo,1,5,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](4,co,1,4,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](6,po,1,4,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,uo,1,4,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](10,mo,1,5,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](12,ho,1,5,"ng-template",null,6,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](14,fo,1,5,"ng-template",null,7,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](16,go,1,4,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"]))},directives:[pp,up,mp,hp,gp,vp],encapsulation:2});class yp{constructor(e){this.rxRecordGridUtilsService=e,this.restTagsDropdownPlacement=["bottom","bottom-right","auto"],this.removeTag=new n.EventEmitter,this.trackByForFilterTags=this.trackByForFilterTags.bind(this)}getTranslateParams(){return{count:this.getRestTagsCount()}}getRestTagsCount(){return this.tagsLimit&&this.tags?this.tags.length-this.tagsLimit:0}onRemoveFilterTag(e){const t=e.data.filterOption,i=(0,u.clone)(this.tags);let n;if((0,u.isNull)(t))n=(0,u.findIndex)(i,e=>this.rxRecordGridUtilsService.isSharedFilterPresetTag(e));else{const t=e.data.filterOption.id;n=(0,u.findIndex)(i,e=>(0,u.get)(e.data.filterOption,"id")===t)}n>-1&&i.splice(n,1),this.removeTag.emit({removedTag:e,newTags:i})}trackByForFilterTags(e,t){return this.rxRecordGridUtilsService.isSharedFilterPresetTag(t)?e:t.data.filterOption.id||e}}yp.\u0275fac=function(e){return new(e||yp)(n["\u0275\u0275directiveInject"](Pd))},yp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yp,selectors:[["rx-filter-tags"]],inputs:{tags:"tags",isDisabled:"isDisabled",tagsLimit:"tagsLimit",restTagsDropdownPlacement:"restTagsDropdownPlacement"},outputs:{removeTag:"removeTag"},decls:4,vars:7,consts:[["class","mr-1","type","active",3,"removable","disabled","remove",4,"ngFor","ngForOf","ngForTrackBy"],["adaptDropdown","",3,"appendToBody","placement",4,"ngIf"],["type","active",1,"mr-1",3,"removable","disabled","remove"],[1,"filter-tags__tag-text",3,"title"],["adaptDropdown","",3,"appendToBody","placement"],["adaptDropdownToggle","","type","button",1,"filter-tags__dropdown-toggle","btn","btn-link","p-0","ml-1"],["adaptDropdownMenu","",1,"dropdown-menu","filter-tags__dropdown-menu","p-2"],[4,"ngFor","ngForOf","ngForTrackBy"],["type","active",3,"removable","remove"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,vo,3,4,"adapt-tag",0),n["\u0275\u0275pipe"](2,"slice"),n["\u0275\u0275template"](3,yo,7,11,"span",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind3"](2,3,t.tags,0,t.tagsLimit?t.tagsLimit:null==t.tags?null:t.tags.length))("ngForTrackBy",t.trackByForFilterTags),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.getRestTagsCount()>0))},directives:[h.NgForOf,h.NgIf,m.AdaptTagComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective],pipes:[h.SlicePipe,p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.filter-tags__dropdown-toggle[_ngcontent-%COMP%]:after{border:0!important}.filter-tags__tag-text[_ngcontent-%COMP%]{display:table-cell;max-width:190px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.filter-tags__dropdown-menu[_ngcontent-%COMP%]   .filter-tags__tag-text[_ngcontent-%COMP%]{max-width:350px}'],changeDetection:0});class bp extends l.ValueAccessor{constructor(e,t,i,n,r,a,s,l,c,d,p,u){super(),this.injector=e,this.rxModalService=t,this.rxRecordGridUtilsService=i,this.rxRecordGridFilterConfigService=n,this.rxRecordDefinitionCacheService=r,this.rxRecordGridFilterService=a,this.rxRecordGridFilterHelperService=s,this.rxRecordDefinitionService=l,this.rxGuidService=c,this.rxRecordGridAdvancedFilteringService=d,this.rxGlobalCacheService=p,this.rxDefinitionNameService=u,this.advancedFilterData={filterOptions:[],selectedFilters:[],filterTexts:{initialDropdownAnchorLabel:"Filter"},recordGridFilterConfigs:null,fieldDefinitionsById:{},fieldDefinitionsInitialized$:new o.Subject,filterValueInitialized$:new o.Subject,associationDescriptors:[]},this.subscription=new o.Subscription,this.getNamedFilterOptions=this.getNamedFilterOptions.bind(this),this.initEmptyValue(),this.advancedFilterData.recordGridFilterConfigs=this.rxRecordGridFilterConfigService.getConfigs(),this.subscription.add((0,o.combineLatest)([this.advancedFilterData.filterValueInitialized$,this.advancedFilterData.fieldDefinitionsInitialized$]).subscribe(()=>{this.initSelectedAdvancedFilters(this.value)}))}getGroupFilterName(e){var t;return null===(t=this.groupFilterItems.find(t=>t.value===e))||void 0===t?void 0:t.name}onGroupFilterValueModelChange(e){this.groupFilterValue=e}ngOnInit(){this.initFilterOptions()}initEmptyValue(){this.innerValue={basicFilters:null,filtersJson:null}}ngOnChanges(e){var t,i;e.options&&e.options.previousValue&&(null===(t=e.options.currentValue.primaryRecordDefinition)||void 0===t?void 0:t.name)!==(null===(i=e.options.previousValue.primaryRecordDefinition)||void 0===i?void 0:i.name)&&(this.initEmptyValue(),this.advancedFilterData.selectedFilters=[],this.advancedFilterData.filterOptions=[],this.initFilterOptions())}initFilterOptions(){this.groupFilterItems=[],this.options.primaryRecordDefinition&&this.rxRecordGridUtilsService.getAssociationDescriptors(this.options.primaryRecordDefinition.name).pipe((0,r.switchMap)(e=>{this.advancedFilterData.associationDescriptors=e;const t=(0,u.uniq)(e.map(e=>e.recordDefinitionName));return(t.length?(0,o.forkJoin)(t.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e))):(0,o.of)([])).pipe((0,r.map)(t=>({recordDefinitions:t,associationDescriptors:e})))}),(0,r.take)(1)).subscribe(({recordDefinitions:e,associationDescriptors:t})=>{const i=(0,u.cloneDeep)(this.options.primaryRecordDefinition);[i,...e].forEach(e=>{e.fieldDefinitionsById||(e.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(e))}),this.groupFilterValue=i.name,this.advancedFilterData.fieldDefinitionsById=this.rxRecordGridAdvancedFilteringService.addAssociationFieldsToFieldDefinitionsById(i.fieldDefinitionsById,t,e),t.forEach(t=>{const i=(0,u.find)(e,e=>e.name===t.recordDefinitionName);this.groupFilterItems.push({name:t.label,value:t.label}),this.advancedFilterData.filterOptions.push(...this.getFilterOptions(i,t,t.label))}),this.groupFilterItems=this.groupFilterItems.sort((e,t)=>e.name.localeCompare(t.name));const n=this.rxDefinitionNameService.getDisplayName(i.name);this.advancedFilterData.filterOptions.push(...this.getFilterOptions(i,null,null)),this.groupFilterItems.unshift({name:n,value:i.name}),this.advancedFilterData.fieldDefinitionsInitialized$.next()})}onRemoveFilterTag(e){const t=this.advancedFilterData.selectedFilters.slice(),i=e.removedTag.data.filterOption.id,n=(0,u.findIndex)(t,e=>e.filterOptionId===i);t.splice(n,1),this.onAdvancedFiltersChange(t)}getFilterOptions(e,t,i){return e.fieldDefinitions.map(e=>{const n=this.advancedFilterData.recordGridFilterConfigs[e.resourceType],o=this.rxRecordGridUtilsService.getColumnLabel(e,null),r=this.rxRecordGridUtilsService.getFieldIdForGridColumn(e.id,t),a=this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(r,o,e,n,!1,{optionalBooleanFilter:this.fieldsProvider.optionalBooleanFilter,requiredBooleanFilter:this.fieldsProvider.requiredBooleanFilter,inputsForStringWithTypeAheadTemplate:this.fieldsProvider.inputsForStringWithTypeAheadTemplate,inputsForStringTypeTemplate:this.fieldsProvider.inputsForStringTypeTemplate,inputsForNumberTypeTemplate:this.fieldsProvider.inputsForNumberTypeTemplate,inputsForTimeTypeTemplate:this.fieldsProvider.inputsForTimeTypeTemplate,inputsForDateTypeTemplate:this.fieldsProvider.inputsForDateTypeTemplate,inputsForDatetimeTypeTemplate:this.fieldsProvider.inputsForDatetimeTypeTemplate,inputsForSelectionTypeTemplate:this.fieldsProvider.inputsForSelectionTypeTemplate},i?`${i} > ${o}`:null,this.options.namedFilterOptions?this.options.namedFilterOptions[r]:[]),s=t?t.label:this.options.primaryRecordDefinition.name;return a.isHidden=()=>{var e;return this.groupFilterValue!==s||!1===(null===(e=this.options.selectedFieldIds)||void 0===e?void 0:e.includes(r))},a}).sort((e,t)=>e.label.localeCompare(t.label))}ngOnDestroy(){this.subscription.unsubscribe()}onAdvancedFiltersChange(e){this.advancedFilterData.selectedFilters=e;const t=this.value.basicFilters||[],i=(0,u.reduce)(e,(e,i)=>{const n=i.filterOptionId,o=this.advancedFilterData.fieldDefinitionsById[n],r=this.advancedFilterData.recordGridFilterConfigs[o.resourceType].getRecordGridFilterData(i.value,o,n);return(r.or||r.and).forEach(i=>{const o=(0,u.values)(i)[0][n],r=(0,u.values)(i)[0].$DISPLAYVALUE$,a=(0,u.find)(t,t=>t.fieldId===n&&t.value===o&&(0,u.every)(e,e=>e.guid!==t.guid)),s={fieldId:n,value:o,$DISPLAYVALUE$:r,guid:a&&a.guid||this.rxGuidService.generate()};e.push(s)}),e},[]),n=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(e,this.advancedFilterData.fieldDefinitionsById,this.advancedFilterData.recordGridFilterConfigs);let o=(0,u.isEmpty)(n)?null:JSON.stringify(n);o&&(o=this.rxRecordGridFilterHelperService.denormalizeFilterString(o,i)),this.filtersModel={basicFilters:i,filtersJson:o},this.value={basicFilters:i,filtersJson:o}}onWriteValue(e){(0,u.isEqual)(this.filtersModel,e)||this.advancedFilterData.filterValueInitialized$.next()}initSelectedAdvancedFilters(e){(null==e?void 0:e.filtersJson)&&!(0,u.isEmpty)(e.basicFilters)&&this.rxRecordGridFilterService.getSelectedFiltersFromPredefinedFilter(e.filtersJson,e.basicFilters,this.advancedFilterData.fieldDefinitionsById,this.advancedFilterData.recordGridFilterConfigs,this.options.primaryRecordDefinition,this.advancedFilterData.filterOptions,this.advancedFilterData.associationDescriptors).pipe((0,r.map)(e=>this.options.namedFilterOptions?this.rxRecordGridFilterService.clearRemovedNamedFilterOptions(e,this.options.namedFilterOptions):e)).subscribe(e=>{this.advancedFilterData.selectedFilters=e})}getNamedFilterOptions(e){return this.options.namedFilterOptions?this.options.namedFilterOptions[e.id]:[]}getTags(e){var t;const i=(null!==(t=null==e?void 0:e.filter(e=>(0,u.isEmpty)(e.data.validationErrors)))&&void 0!==t?t:[]).map(e=>{var t,i;if(e.data.filterOption){const n=e.data.filterOption.id,o=e.data.filterOption.data,a=this.advancedFilterData.recordGridFilterConfigs[null==o?void 0:o.resourceType];if((0,u.isFunction)(null==a?void 0:a.getToolbarTagInfo))return a.getToolbarTagInfo({primaryRecordDefinition:this.options.primaryRecordDefinition,fieldDefinition:o,value:e.data.value,tag:e,fieldId:n,namedFilterOptions:null!==(i=null===(t=this.options.namedFilterOptions)||void 0===t?void 0:t[n])&&void 0!==i?i:[]}).pipe((0,r.tap)(t=>e.data.value.title=t.tooltip),(0,r.map)(t=>Object.assign(Object.assign({},e),{text:t.text})))}return(0,o.of)(Object.assign({},e))});return i.length?(0,o.forkJoin)(i):(0,o.of)([])}}bp.\u0275fac=function(e){return new(e||bp)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](Pd),n["\u0275\u0275directiveInject"](cp),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](lp),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](ap),n["\u0275\u0275directiveInject"](s.RxGlobalCacheService),n["\u0275\u0275directiveInject"](s.RxDefinitionNameService))},bp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bp,selectors:[["rx-record-grid-filter-select-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](xp,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.fieldsProvider=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:bp,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:2,consts:[[4,"ngIf"],["filterOptionsCustomAreaTemplate",""],[3,"namedFilterOptionsGetter"],[3,"hidden","appendDropdownToBody","enableSavedFilters","filterOptions","selectedFilters","texts","applyFiltersByUserAction","filterOptionsCustomAreaTemplate","selectedFiltersIndicationStyle","anchorDisabled","selectedFiltersChange"],["advancedFilter",""],[3,"isDisabled","tags","tagsLimit","restTagsDropdownPlacement","removeTag"],["class","p-3 pt-4 pb-4",4,"ngIf"],[1,"p-3","pt-4","pb-4"],[3,"title","multiline"],[1,"advanced-filter__radiobutton-group",3,"ngModel","ngModelChange"],["name","booleanTypeGroup","class","advanced-filter__radiobutton",3,"value","label",4,"ngFor","ngForOf"],["name","booleanTypeGroup",1,"advanced-filter__radiobutton",3,"value","label"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Co,5,17,"ng-container",0),n["\u0275\u0275template"](1,Io,1,1,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](3,"rx-advanced-filtering-fields-provider",2)),2&e&&(n["\u0275\u0275property"]("ngIf",t.advancedFilterData.filterOptions),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("namedFilterOptionsGetter",t.getNamedFilterOptions))},directives:[h.NgIf,xp,m.AdaptAdvancedFilterComponent,yp,m.AdaptAccordionComponent,m.AdaptAccordionTabComponent,m.AdaptRxRadiobuttonGroupComponent,b.NgControlStatus,b.NgModel,h.NgForOf,m.AdaptRxRadiobuttonComponent],pipes:[h.AsyncPipe],styles:["[_nghost-%COMP%]     .filter-tags__tag-text{max-width:185px!important}"]}),function(e){e.Basic="basic",e.Expression="expression"}(ip||(ip={}));class Cp{}Cp.\u0275fac=function(e){return new(e||Cp)},Cp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Cp,declarations:[yp],imports:[h.CommonModule,m.AdaptTagModule,m.AdaptDropdownModule,p.TranslateModule],exports:[yp]}),Cp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptTagModule,m.AdaptDropdownModule,p.TranslateModule]]});class Sp{}Sp.\u0275fac=function(e){return new(e||Sp)},Sp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Sp,declarations:[dp],imports:[h.CommonModule,m.AdaptRxCheckboxModule,b.FormsModule],exports:[dp]}),Sp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxCheckboxModule,b.FormsModule]]});class wp{}wp.\u0275fac=function(e){return new(e||wp)},wp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wp,imports:[h.CommonModule,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,p.TranslateModule,m.AdaptTagModule,b.FormsModule,m.AdaptDropdownModule,m.AdaptMetatagModule,Sp,Cp],exports:[Cp,Sp]}),wp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,p.TranslateModule,m.AdaptTagModule,b.FormsModule,m.AdaptDropdownModule.forRoot(),m.AdaptMetatagModule,Sp,Cp],Cp,Sp]});class Ip{}Ip.\u0275fac=function(e){return new(e||Ip)},Ip.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ip,declarations:[mp],imports:[h.CommonModule,b.FormsModule,Sp,m.AdaptMetatagModule],exports:[mp]}),Ip.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,Sp,m.AdaptMetatagModule]]});class _p{}_p.\u0275fac=function(e){return new(e||_p)},_p.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_p,declarations:[hp],imports:[h.CommonModule,b.FormsModule,Sp,m.AdaptRxCounterModule],exports:[hp]}),_p.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,Sp,m.AdaptRxCounterModule]]});class Dp{}Dp.\u0275fac=function(e){return new(e||Dp)},Dp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Dp,declarations:[gp],imports:[h.CommonModule,b.FormsModule,Sp,m.AdaptRxDatetimeModule],exports:[gp]}),Dp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,Sp,m.AdaptRxDatetimeModule]]});class Rp{}Rp.\u0275fac=function(e){return new(e||Rp)},Rp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rp,declarations:[vp],imports:[h.CommonModule,b.FormsModule,Sp,m.AdaptRxSelectModule],exports:[vp]}),Rp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,Sp,m.AdaptRxSelectModule]]});class Ap{}Ap.\u0275fac=function(e){return new(e||Ap)},Ap.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ap,declarations:[pp],imports:[h.CommonModule,Sp,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,b.FormsModule],exports:[pp]}),Ap.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,Sp,m.AdaptRxRadiobuttonModule,m.AdaptRxSelectModule,b.FormsModule]]});class Tp{}Tp.\u0275fac=function(e){return new(e||Tp)},Tp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Tp,declarations:[up],imports:[h.CommonModule,Sp,m.AdaptMetatagModule,b.FormsModule,p.TranslateModule],exports:[up]}),Tp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,Sp,m.AdaptMetatagModule,b.FormsModule,p.TranslateModule]]});class Fp{}Fp.\u0275fac=function(e){return new(e||Fp)},Fp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Fp,declarations:[xp],imports:[h.CommonModule,Ip,_p,Dp,Rp,Ap,Tp],exports:[xp]}),Fp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,Ip,_p,Dp,Rp,Ap,Tp]]});class Ep{}Ep.\u0275fac=function(e){return new(e||Ep)},Ep.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ep,declarations:[bp],imports:[h.CommonModule,m.AdaptAdvancedFilteringModule,wp,m.AdaptAccordionModule,m.AdaptRxRadiobuttonModule,b.FormsModule,Fp],exports:[bp]}),Ep.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptAdvancedFilteringModule,wp,m.AdaptAccordionModule,m.AdaptRxRadiobuttonModule,b.FormsModule,Fp]]});class Mp{getNamedFilterOptionsFromColumns(e){return e.reduce((e,t)=>{var i;return(null===(i=t.namedFilterOptions)||void 0===i?void 0:i.length)&&(e[t.fieldId]=t.namedFilterOptions.map(e=>Object.assign(Object.assign({guid:e.guid},e.data),{index:(0,u.toNumber)(e.data.index)})).sort((e,t)=>e.index-t.index)),e},{})}}Mp.\u0275fac=function(e){return new(e||Mp)},Mp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Mp,factory:Mp.\u0275fac,providedIn:"root"});class Op extends S.RxModalClass{constructor(e,t,i,n){super(e,n),this.activeModalRef=e,this.rxModalService=t,this.rxGuidService=i,this.injector=n,this.filterPresets=[],this.params=this.activeModalRef.getData();const o=this.params.activeFilterPreset;this.recordDefinition=this.params.primaryRecordDefinition,this.selectedFieldIds=this.params.selectedFieldIds,this.isReadOnly=this.params.isReadOnly,this.filterPresets=(0,u.map)(this.params.filterPresets,e=>this.createFilterPresetEditorData(e,e===o))}ngAfterViewInit(){const e=(0,u.findIndex)(this.filterPresets,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}addFilterPreset(){this.markAsDirty(),this.filterPresets.push(this.createFilterPresetEditorData({guid:this.rxGuidService.generate(),title:"New preset"+(0===this.filterPresets.length?"":" "+this.filterPresets.length),filters:"",recordGridFilters:[]},!0)),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeFilterPreset(e){this.markAsDirty(),this.filterPresets.splice(e,1)}createFilterPresetEditorData(e,t){return Object.assign(Object.assign({},e),{isOpen:t,filterSelectOptions:{primaryRecordDefinition:this.recordDefinition,tagsLimit:2,namedFilterOptions:this.params.namedFilterOptions,selectedFieldIds:this.selectedFieldIds},filterSelect:{basicFilters:e.recordGridFilters,filtersJson:e.filters}})}getCheckPresetTitleDuplicateValidator(e){return t=>{const i=t.value;return i&&this.filterPresets.some(t=>t.title===i&&t.guid!==e.guid)?{duplicatePresetName:{message:"Duplicate Name"}}:null}}trackByForFilterPresets(e,t){return t.guid}toggleOpen(e){this.filterPresets.forEach(t=>t.isOpen=e)}onSaveChangesClick(){const e={filterPresets:this.filterPresets.map(e=>({filters:e.filterSelect.filtersJson,recordGridFilters:e.filterSelect.basicFilters,guid:e.guid,title:e.title}))};(0,u.some)(e.filterPresets,e=>(0,u.isEmpty)(e.recordGridFilters))?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"The filter preset will not filter records because no filters have been specified. Do you want to continue?"}).then(t=>{t&&this.activeModalRef.close(e)}):this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Op.\u0275fac=function(e){return new(e||Op)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.Injector))},Op.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Op,selectors:[["rx-record-grid-filter-preset-editor-modal"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](_o,7,b.NgForm),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterPresetsForm=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:12,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],[1,"designer-modal-accordion-wrapper"],[3,"multiselect"],["filterPresetsForm","ngForm"],["class","designer-modal-accordion-content",4,"ngFor","ngForOf","ngForTrackBy"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"isOpen","open","close"],["accordionTab",""],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],["rxNoWhitespace","",3,"label","name","required","disabled","rxCustomValidators","ngModel","ngModelChange"],[4,"ngIf"],[1,"right-header-block"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[3,"name","disabled","options","ngModel","ngModelChange"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,Do,4,3,"button",4),n["\u0275\u0275template"](5,Ro,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6),n["\u0275\u0275elementStart"](7,"adapt-accordion",7),n["\u0275\u0275elementStart"](8,"form",null,8),n["\u0275\u0275template"](10,Fo,12,13,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,Eo,3,3,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",11),n["\u0275\u0275template"](13,Mo,3,4,"button",12),n["\u0275\u0275elementStart"](14,"button",13),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](15),n["\u0275\u0275pipe"](16,"translate"),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.filterPresets.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.filterPresets)("ngForTrackBy",t.trackByForFilterPresets),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.filterPresets.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](16,8,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](17,10,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,m.AdaptAccordionComponent,b["\u0275NgNoValidate"],b.NgControlStatusGroup,b.NgForm,h.NgForOf,m.AdaptButtonComponent,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,v.RxNoWhitespaceValidator,b.RequiredValidator,S.RxCustomValidatorsDirective,b.NgControlStatus,b.NgModel,bp,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe],styles:[':root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content{position:relative}.designer-modal-accordion-content.cdk-drag-preview{z-index:1200!important}.designer-modal-drag-handle{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content{width:100%;display:flex}.designer-modal-card-title-content .left-header-block,.designer-modal-card-title-content .right-header-block{display:flex;align-items:center}.designer-modal-card-title-content .left-header-block{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons{display:flex;font-size:19px}.rx-card{overflow:auto}.rx-tree-draggable-node{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview{z-index:1200!important}.rx-tree-draggable-node.cdk-drag{opacity:1}.rx-tree-node-label{word-break:break-all}rx-form-builder{max-width:400px}\n'],encapsulation:2});class kp extends l.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.rxRecordGridFilterSelectHelperService=t,this.filterPresets=[]}onWriteValue(e){this.filterPresets=e.slice(),this.filterPresets.sort((e,t)=>e.title.localeCompare(t.title))}removeFilterPreset(e){this.updateValue(this.filterPresets.filter(t=>t.guid!==e.guid))}updateValue(e){this.value=e,this.onWriteValue(e)}openEditor(e){const t=this.options.columns.map(e=>e.fieldId),i=this.options.primaryRecordDefinition.fieldDefinitions.filter(e=>t.includes(e.id.toString())),n=this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(this.options.columns),o={filterPresets:this.filterPresets,activeFilterPreset:e,isReadOnly:this.isDisabled,namedFilterOptions:n,primaryRecordDefinition:(0,u.cloneDeep)(Object.assign(Object.assign({},this.options.primaryRecordDefinition),{fieldDefinitions:i})),selectedFieldIds:t};this.rxModalService.openModal({title:"Edit filter presets",content:Op,size:c.OpenViewActionModalSize.Large,testID:"edit-filter-presets",data:o}).then(e=>{e&&e.filterPresets&&this.updateValue(e.filterPresets)}).catch(u.noop)}trackByForFilterPresets(e,t){return t.guid}}kp.\u0275fac=function(e){return new(e||kp)(n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](Mp))},kp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kp,selectors:[["rx-record-grid-filter-preset-editor"]],inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:kp,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label","tooltip",4,"ngIf"],["btn-type","tertiary","rx-id","open-modal-button","class","p-0 pb-1",3,"click",4,"ngIf"],["class","rx-selected-filter-preset",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-tertiary",4,"ngIf"],[3,"label","tooltip"],["btn-type","tertiary","rx-id","open-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[1,"rx-selected-filter-preset"],[1,"rx-selected-filter-preset__header-container"],["rx-id","card-title",1,"rx-selected-filter-preset__header-title",3,"title"],["type","button","class","rx-button-unstyled d-icon-left-pencil btn-link","rx-id","open-editor",3,"click",4,"ngIf"],["type","button","class","rx-button-unstyled d-icon-cross btn-link","rx-id","remove-filter-preset",3,"click",4,"ngIf"],["rx-id","filter-count",1,"rx-filter-count"],["type","button","rx-id","open-editor",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-filter-preset",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"],[1,"text-tertiary"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Oo,1,2,"adapt-rx-control-label",0),n["\u0275\u0275template"](1,ko,3,0,"adapt-button",1),n["\u0275\u0275elementStart"](2,"div"),n["\u0275\u0275template"](3,No,8,5,"div",2),n["\u0275\u0275template"](4,Vo,2,0,"span",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.options.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isDisabled),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.filterPresets)("ngForTrackBy",t.trackByForFilterPresets),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",0===t.filterPresets.length))},directives:[h.NgIf,h.NgForOf,m.AdaptRxControlLabelComponent,m.AdaptButtonComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-filter-preset[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-filter-preset__header-container[_ngcontent-%COMP%]{display:flex;margin-bottom:5px}.rx-selected-filter-preset__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:.875rem}.rx-filter-count[_ngcontent-%COMP%]{font-size:.625rem;color:#959899}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class jp extends S.RxModalClass{constructor(e,t,i,n,o,r,a,c){super(e,c),this.context=e,this.adaptModalService=t,this.rxExpressionEditorService=i,this.translateService=n,this.rxRecordDefinitionCacheService=o,this.ngZone=r,this.rxGuidService=a,this.injector=c,this.rowActions=[],this.selectFormControlOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.field-name.label"),tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.field-name.tooltip")),options:[],emptyOption:!0},this.availableOnDevicesFormControlOptions=(0,d.getAvailableOnDevicesInspectorConfig)().options,this.recordDefinitionPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.security-definition-name.label"),tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.security-definition-name.tooltip")),definitionType:l.RxDefinitionPickerType.StandardDataRecord,required:!1},this.iconPickerOptions={label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.icon.label"),appendToBody:!0,required:!1}}ngOnInit(){super.ngOnInit();const e=this.context.getData();this.expressionConfigurator=e.expressionConfigurator,this.rowActionIndex=e.rowActionIndex,this.activeActionIndex=e.activeActionIndex,this.isReadOnly=e.isReadOnly,this.rowActions=(0,u.cloneDeep)(e.rowActions).map((e,t)=>(this.setSecurityFieldDefinitions(e),Object.assign(Object.assign({},e),{isOpen:t===this.rowActionIndex})))}ngAfterViewInit(){this.openActiveAction(),this.rowActionIndex&&this.accordionTabEls.toArray()[this.rowActionIndex].nativeElement.scrollIntoView({block:"nearest"})}cancel(){this.context.dismiss(m.DismissReasons.CLOSE_BTN)}trackByGuid(e,t){return t.guid}addRowAction(){this.markAsDirty(),this.rowActions.push(Object.assign({guid:this.rxGuidService.generate(),label:"New row action"+(0===this.rowActions.length?"":" "+this.rowActions.length),icon:"",recordDefinitionName:null,fieldId:null,recordInstance:null,disabled:null,hidden:null,actions:[],isOpen:!0,securityFieldDefinitions$:(0,o.of)(this.getSelectFormControlOptions())},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE)),setTimeout(()=>{this.accordionTabEls.last.nativeElement.scrollIntoView({block:"nearest"})})}removeRowAction(e,t){t.stopPropagation(),this.markAsDirty(),this.rowActions.splice(e,1)}openExpressionEditor(e,t,i){this.rxExpressionEditorService.openEditor({property:{path:i,value:t[i],label:this.getRowActionLabel(i)},isReadOnly:!1,expressionConfigurator:this.expressionConfigurator,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}]}).subscribe(e=>{this.markAsDirty(),t[i]=e.value})}getExpressionFormControlOptions(e){return{label:this.getRowActionLabel(e),tooltip:"recordInstance"===e?new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.recordInstance.tooltip")):null,dataDictionary$:this.context.getData().expressionConfigurator.getDataDictionary(e),operators:this.context.getData().expressionConfigurator.getOperators(e)}}saveActions(){const e=this.rowActions.map(e=>Object.assign(Object.assign({},(0,u.omit)(e,["isOpen","securityFieldDefinitions$"])),{action:"rowAction"}));this.context.close(e)}moveRowAction(e,t){(0,y.moveItemInArray)(this.rowActions,e,t),this.markAsDirty()}onDropInSelectedRowActionsContainer(e){(0,y.moveItemInArray)(this.rowActions,e.previousIndex,e.currentIndex),this.markAsDirty()}onRecordDefinitionChange(e){this.markAsDirty(),e.fieldId=null,this.setSecurityFieldDefinitions(e)}setSecurityFieldDefinitions(e){e.securityFieldDefinitions$=e.recordDefinitionName?this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(e=>this.getSelectFormControlOptions(e))):(0,o.of)(this.getSelectFormControlOptions())}getRowActionLabel(e){let t;switch(e){case"disabled":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.disabled.label";break;case"hidden":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.hidden.label";break;case"recordInstance":t="com.bmc.arsys.rx.client.view-components.record-grid-row-actions.recordInstance.label"}return this.translateService.instant(t)}getSelectFormControlOptions(e=null){return Object.assign(Object.assign({},this.selectFormControlOptions),{options:e?e.fieldDefinitions.map(e=>({name:e.name,id:String(e.id)})):[]})}openActiveAction(){this.activeActionIndex>=0&&this.rowActionIndex>=0&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{const e=this.actionListControlComponents.find(e=>{var t;return(0,u.isEqual)(e.value,null===(t=this.rowActions[this.rowActionIndex])||void 0===t?void 0:t.actions)});e&&e.focus({actionIndex:this.activeActionIndex})})})}toggleOpen(e){this.rowActions.forEach(t=>t.isOpen=e)}}jp.\u0275fac=function(e){return new(e||jp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](n.Injector))},jp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:jp,selectors:[["rx-record-grid-row-action-editor-modal"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Lo,7,b.NgForm),n["\u0275\u0275viewQuery"](Bo,5,y.CdkDropList),n["\u0275\u0275viewQuery"](m.AdaptAccordionTabComponent,5,n.ElementRef),n["\u0275\u0275viewQuery"]($o,5,y.CdkDrag),n["\u0275\u0275viewQuery"](d.ActionListControlComponent,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rowActionsForm=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.selectedRowActionsDropList=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.draggableSelectedRowAction=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponents=e)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:19,vars:13,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","align-items-start","justify-content-between"],["class","mt-2 p-0","rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",3,"click",4,"ngIf"],["class","btn-group",4,"ngIf"],["id","selectedRowActionsDropList","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],["selectedRowActionsDropList","cdkDropList"],[3,"multiselect"],["rowActionsForm","ngForm"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf","ngForTrackBy"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["rx-id","add-button","adapt-button","","type","button","btn-type","tertiary",1,"mt-2","p-0",3,"click"],[1,"d-icon-left-plus_circle"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["draggableSelectedRowAction",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["class","right-header-block",4,"ngIf"],[1,"d-flex","row"],["rx-id","label","rxNoWhitespace","",1,"form-group","d-block","col-4",3,"label","disabled","required","name","ngModel","ngModelChange"],["rx-id","icon",1,"form-group","d-block","col-4","px-2",3,"disabled","options","name","ngModel","ngModelChange"],["rx-id","recordDefinition",1,"form-group","d-block","col-4",3,"isDisabled","options","ngModel","name","ngModelChange"],["rx-id","fieldId",1,"col-4","px-2",3,"options","ngModel","name","disabled","appendToBody","ngModelChange"],["propertyPath","recordInstance","rx-id","recordInstance",1,"col-4",3,"disabled","options","ngModel","name","events"],["propertyPath","disabled","rx-id","disabled",1,"col-4",3,"disabled","options","ngModel","name","events"],["propertyPath","hidden","rx-id","hidden",1,"col-4",3,"disabled","options","ngModel","name","events"],["rx-id","availableOnDevices","required","",1,"col-4","px-2",3,"options","ngModel","name","disabled","appendToBody","ngModelChange"],[1,"d-inline-block","col-4","mt-2",3,"ngModel","name","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275template"](4,Go,4,3,"button",4),n["\u0275\u0275template"](5,zo,7,6,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6,7),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedRowActionsContainer(e)}),n["\u0275\u0275elementStart"](8,"adapt-accordion",8),n["\u0275\u0275elementStart"](9,"form",null,9),n["\u0275\u0275template"](11,Xo,25,50,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](12,Ho,3,3,"div",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](13,"div",12),n["\u0275\u0275template"](14,Wo,3,4,"button",13),n["\u0275\u0275elementStart"](15,"button",14),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](16),n["\u0275\u0275pipe"](17,"translate"),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.rowActions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("cdkDropListData",t.rowActions),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.rowActions)("ngForTrackBy",t.trackByGuid),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.rowActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](17,9,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](18,11,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[h.NgIf,y.CdkDropList,m.AdaptAccordionComponent,b["\u0275NgNoValidate"],b.NgControlStatusGroup,b.NgForm,h.NgForOf,m.AdaptButtonComponent,y.CdkDrag,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,v.RxNoWhitespaceValidator,b.RequiredValidator,b.NgControlStatus,b.NgModel,l.IconPickerFormControlComponent,l.RxDefinitionPickerComponent,l.SelectFormControlComponent,l.ExpressionFormControlComponent,d.ActionListControlComponent,y.CdkDragHandle,m.AdaptEmptyStateComponent],pipes:[p.TranslatePipe,h.AsyncPipe],styles:[Bi]});class Pp extends l.InspectorWidgetBase{constructor(e,t,i){super(e),this.injector=e,this.rxModalService=t,this.translateService=i,this.rowActions$=this.designerItemModel.rowActionButtonComponents$.pipe((0,r.map)(e=>e.map(e=>{const t=e.children.map(e=>(0,u.omit)(e,"type","children"));return Object.assign(Object.assign({},(0,u.pick)(e.data,["recordDefinitionName","recordInstance","fieldId","icon","disabled","hidden","label",c.RX_AVAILABLE_ON_DEVICES_PROP_NAME])),{guid:e.guid,actions:t})})),(0,r.shareReplay)(1))}openEditor(e,t){this.rowActions$.pipe((0,r.take)(1),(0,r.switchMap)(i=>(0,o.from)(this.rxModalService.openModal({content:jp,title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.modal.title"),size:c.OpenViewActionModalSize.Large,testID:"edit-row-actions",data:{expressionConfigurator:this.designerItemModel.expressionConfigurator,isReadOnly:this.isDisabled,rowActionIndex:e,rowActions:i,activeActionIndex:t}})))).subscribe({next:e=>this.designerItemModel.setRowActions(e),error:u.noop})}trackByForRowActions(e,t){return t.label}removeRowAction(e,t){this.rxModalService.confirm({title:this.translateService.instant("com.bmc.arsys.rx.client.common.warning.label"),modalStyle:S.RX_MODAL.modalStyles.warning,message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid-row-actions.row-action-delete.warning",{name:t[e].label})}).then(i=>{i&&(t.splice(e,1),this.designerItemModel.setRowActions(t))})}focus(e){this.openEditor(e.rowActionIndex,e.actionIndex)}}Pp.\u0275fac=function(e){return new(e||Pp)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](p.TranslateService))},Pp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pp,selectors:[["rx-record-grid-row-action-editor-widget"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["btn-type","tertiary","rx-id","open-row-action-editor-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[4,"ngIf"],["rx-id","no-row-actions","class","text-tertiary",4,"ngIf"],["rx-id","row-actions-list","class","rx-selected-row-action",4,"ngFor","ngForOf","ngForTrackBy"],["rx-id","no-row-actions",1,"text-tertiary"],["rx-id","row-actions-list",1,"rx-selected-row-action"],[1,"rx-selected-row-action__header-container"],["rx-id","row-action",1,"rx-selected-row-action__header-title",3,"title"],["type","button","rx-id","edit-button",1,"rx-button-unstyled","d-icon-left-pencil","btn-link",3,"click"],["type","button","rx-id","remove-button",1,"rx-button-unstyled","d-icon-cross","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openEditor()}),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275text"](2," Edit row actions\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,Ko,3,3,"div",2),n["\u0275\u0275pipe"](4,"async")),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,1,t.rowActions$)))},directives:[m.AdaptButtonComponent,h.NgIf,h.NgForOf],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-selected-row-action[_ngcontent-%COMP%]{margin-bottom:5px;border:1px solid #d6d7d8;border-radius:2px;padding:5px 10px;word-break:break-all;font-weight:var(--font-weight-bold)}.rx-selected-row-action__header-container[_ngcontent-%COMP%]{display:flex}.rx-selected-row-action__header-title[_ngcontent-%COMP%]{flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;font-size:14px}.d-icon-cross[_ngcontent-%COMP%], .d-icon-left-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-cross[_ngcontent-%COMP%]:not(:hover), .d-icon-left-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class Np extends l.ValueAccessor{constructor(e,t,i){super(),this.renderer=e,this.rxRecordGridUtilsService=t,this.rxStringService=i,this.ColumnSortDirection=Nd,this.updateOptionsSubject=new o.BehaviorSubject(null),this.columnOptions$=this.updateOptionsSubject.pipe((0,r.switchMap)(()=>this.options.gridColumns&&this.options.recordDefinition?(0,o.forkJoin)(this.options.gridColumns.filter(e=>e.sortable).map(e=>this.rxStringService.isEmptySafe(e.title)?this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.options.recordDefinition).pipe((0,r.map)(t=>({id:e.fieldId,name:`[${t.name}]`}))):(0,o.of)({id:e.fieldId,name:e.title}))).pipe((0,r.defaultIfEmpty)([])):(0,o.of)([]))),this.selectedColumnOption=[]}get selectedSortDirection(){return this.value?this.value.direction:null}ngOnChanges(e){var t,i,n;!(null===(t=e.options)||void 0===t?void 0:t.previousValue)||(0,u.isEqual)(e.options.currentValue.gridColumns,e.options.previousValue.gridColumns)&&(null===(i=e.options.currentValue.recordDefinition)||void 0===i?void 0:i.name)===(null===(n=e.options.previousValue.recordDefinition)||void 0===n?void 0:n.name)||this.updateOptionsSubject.next()}onWriteValue(e){this.columnOptions$.pipe((0,r.take)(1)).subscribe(t=>{this.selectedColumnOption=e?[t.find(t=>t.id===e.fieldId)]:[]})}focus(){this.renderer.selectRootElement(this.adaptRxSelect.selectButtonRef.nativeElement,!0).focus()}onSelectModelChange(e){this.selectedColumnOption=e,this.value=(0,u.isEmpty)(e)?null:{fieldId:(0,u.head)(e).id,direction:Nd.Asc}}setSortDirection(e){this.value=Object.assign(Object.assign({},this.value),{direction:e})}optionFormatter(e){return e.name}ngOnDestroy(){this.updateOptionsSubject.complete()}}Np.\u0275fac=function(e){return new(e||Np)(n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](Pd),n["\u0275\u0275directiveInject"](v.RxStringService))},Np.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Np,selectors:[["rx-record-grid-sort-editor-control"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Jo,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptRxSelect=e.first)}},inputs:{options:"options"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:b.NG_VALUE_ACCESSOR,useExisting:Np,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:8,consts:[[1,"form-group",3,"ngClass"],["class","form-control-label",4,"ngIf"],[1,"d-flex"],["class","pr-1 w-100",3,"options","required","disabled","ngModel","optionFormatter","emptyOption","ngModelChange",4,"ngIf"],["class","btn-group","data-toggle","buttons",4,"ngIf"],[1,"form-control-label"],[1,"pr-1","w-100",3,"options","required","disabled","ngModel","optionFormatter","emptyOption","ngModelChange"],["adaptRxSelect",""],["data-toggle","buttons",1,"btn-group"],["adapt-button","","btn-type","secondary","type","button",1,"pl-2","pr-2","d-icon-arrow_up",3,"click"],["adapt-button","","btn-type","secondary","type","button",1,"pl-2","pr-2","d-icon-arrow_down",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,Zo,2,1,"label",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275template"](3,er,2,6,"adapt-rx-select",3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275template"](5,tr,3,4,"div",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](6,ir,t.options.required)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.options.label),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](4,4,t.columnOptions$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.selectedColumnOption.length))},directives:[h.NgClass,h.NgIf,m.AdaptRxSelectComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel,m.AdaptButtonComponent],pipes:[h.AsyncPipe],encapsulation:2}),function(e){e.Record="record",e.Association="association"}(np||(np={}));class Vp extends S.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.params=this.activeModalRef.getData(),this.presetColumns=this.params.presetColumns.map((e,t)=>{const i=this.params.gridColumns.find(t=>t.fieldId===e.data.fieldId);return Object.assign(Object.assign({},(0,u.cloneDeep)(e)),{isOpen:0===t,title:i.title,fallbackTitle:i.fallbackTitle})}),this.isReadOnly=this.params.isReadOnly,this.columnWidthPropertyOptions=jd.columnProperties.find(({name:e})=>"width"===e).options,this.presetColumns.sort((e,t)=>e.data.index-t.data.index)}expandAllColumns(e){e.stopPropagation(),this.presetColumns.forEach(e=>e.isOpen=!0)}collapseAllColumns(e){e.stopPropagation(),this.presetColumns.forEach(e=>e.isOpen=!1)}saveChanges(){this.activeModalRef.close({presetColumns:this.presetColumns.map(e=>(0,u.omit)(e,["isOpen","title"]))})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}moveColumn(e,t){this.markAsDirty(),(0,y.moveItemInArray)(this.presetColumns,e,t),this.updateColumnIndexes()}onDropInSelectedColumnsContainer(e){this.moveColumn(e.previousIndex,e.currentIndex)}trackByGuid(e,t){return t.guid}updateColumnIndexes(){this.presetColumns.forEach((e,t)=>{e.data.index=t})}}Vp.\u0275fac=function(e){return new(e||Vp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},Vp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vp,selectors:[["rx-record-grid-view-preset-columns-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:16,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","justify-content-end"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListData","cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragDisabled","cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragDisabled","cdkDragData"],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],[1,"rx-ellipsis",3,"title"],["class","designer-modal-card-sub-title ml-2",3,"title",4,"ngIf"],["class","right-header-block",4,"ngIf"],["label","Column header",3,"disabled","ngModel","ngModelChange"],["label","Visible",3,"ngModel","disabled","ngModelChange"],[1,"d-block","col-5","p-0",3,"options","ngModel","ngModelChange"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],[1,"designer-modal-card-sub-title","ml-2",3,"title"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div",4),n["\u0275\u0275elementStart"](5,"button",5),n["\u0275\u0275listener"]("click",function(e){return t.expandAllColumns(e)}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",6),n["\u0275\u0275listener"]("click",function(e){return t.collapseAllColumns(e)}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onDropInSelectedColumnsContainer(e)}),n["\u0275\u0275elementStart"](12,"adapt-accordion",8),n["\u0275\u0275template"](13,ar,13,16,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275template"](15,sr,3,4,"button",11),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,8,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,10,"com.bmc.arsys.rx.client.common.collapse-all.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("cdkDropListData",t.presetColumns),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.presetColumns)("ngForTrackBy",t.trackByGuid),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](18,12,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](19,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptButtonComponent,y.CdkDropList,m.AdaptAccordionComponent,h.NgForOf,h.NgIf,y.CdkDrag,m.AdaptAccordionTabComponent,m.AdaptRxTextfieldComponent,b.NgControlStatus,b.NgModel,m.AdaptRxCheckboxComponent,l.StepperWithUnitsFormControlComponent,y.CdkDragHandle],pipes:[p.TranslatePipe],styles:[Bi]});class Lp extends S.RxModalClass{constructor(e,t,i,n,a,s,l){super(e,t),this.activeModalRef=e,this.injector=t,this.rxModalService=i,this.rxRecordGridDesignUtilsService=n,this.rxRecordGridFilterSelectHelperService=a,this.rxRecordGridUtilsService=s,this.rxStringService=l,this.params=this.activeModalRef.getData(),this.presets=[],this.isReadOnly=this.params.isReadOnly,this.gridColumns$=this.params.gridColumns&&this.params.recordDefinition?(0,o.forkJoin)(this.params.gridColumns.map(e=>this.rxStringService.isEmptySafe(e.title)?this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,this.params.recordDefinition).pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{fallbackTitle:`[${t.name}]`}))):(0,o.of)(Object.assign(Object.assign({},e),{fallbackTitle:`[${e.title}]`})))).pipe((0,r.defaultIfEmpty)([])):(0,o.of)([])}ngOnInit(){super.ngOnInit(),this.gridColumns$.pipe((0,r.take)(1)).subscribe(e=>{this.namedFilterOptions=this.rxRecordGridFilterSelectHelperService.getNamedFilterOptionsFromColumns(e),this.presets=this.params.presetsList.map(({guid:t,name:i},n)=>{const o=this.params.viewPresets.find(({data:e})=>e.viewPresetGuid===t),r=e.filter(e=>e.filterable).map(e=>e.fieldId),a=o.data.viewPresetGuid,s=(0,u.cloneDeep)(o.children.filter(e=>e.type===jd.components.columnViewPreset)),l=s.find(e=>(0,u.isObject)(e.data.sortable)),c=l?{fieldId:l.data.fieldId,direction:l.data.sortable.direction}:null;return{presetName:i,gridColumns:e,presetColumns:s,guid:a,tags:this.getTags(s,e),isOpen:this.params.activePreset?this.params.activePreset===a:0===n,sortModel:c,filters:{basicFilters:this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(o.children),filtersJson:o.data.filters},filterSelectControlOptions:{primaryRecordDefinition:Object.assign(Object.assign({},this.params.recordDefinition),{fieldDefinitions:this.params.recordDefinition.fieldDefinitions.filter(e=>r.includes(String(e.id)))}),selectedFieldIds:e.map(e=>e.fieldId),namedFilterOptions:this.namedFilterOptions},sortEditorControlOptions:{label:"Initial column sort",gridColumns:(0,u.sortBy)(e,"title"),recordDefinition:this.params.recordDefinition}}})})}saveChanges(){this.activeModalRef.close({presets:this.presets})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}expandAll(e){e.stopPropagation(),this.presets.forEach(e=>e.isOpen=!0)}collapseAll(e){e.stopPropagation(),this.presets.forEach(e=>e.isOpen=!1)}openPresetColumnsModal(e){this.rxModalService.openModal({title:`Edit grid columns for ${e.presetName}`,content:Vp,size:c.OpenViewActionModalSize.Large,data:{gridColumns:e.gridColumns,presetColumns:e.presetColumns,isReadOnly:this.isReadOnly},testID:"edit-grid-columns-for-view-preset"}).then(t=>{(null==t?void 0:t.presetColumns)&&(e.presetColumns=t.presetColumns,e.tags=this.getTags(e.presetColumns,e.gridColumns),this.markAsDirty())}).catch(u.noop)}trackByPreset(e,t){return t.guid}getTags(e,t){const i=e.filter(e=>e.data.visible).map(e=>{const i=t.find(t=>t.fieldId===e.data.fieldId);return i.title||i.fallbackTitle}),n=i.slice(0,5);return{items:n,restCount:i.length-n.length}}onSortChange(e,t){t.presetColumns.forEach(t=>{t.data.sortable=t.data.fieldId===(null==e?void 0:e.fieldId)?(0,u.pick)(e,"direction"):null}),this.markAsDirty()}}Lp.\u0275fac=function(e){return new(e||Lp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"]($p),n["\u0275\u0275directiveInject"](Mp),n["\u0275\u0275directiveInject"](Pd),n["\u0275\u0275directiveInject"](v.RxStringService))},Lp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Lp,selectors:[["rx-record-grid-edit-view-presets-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:15,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],[1,"d-flex","flex-column","mh-100","col"],[1,"d-flex","justify-content-end"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],[1,"designer-modal-accordion-wrapper"],[3,"multiselect"],["class","designer-modal-accordion-content",4,"ngFor","ngForOf","ngForTrackBy"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"designer-modal-accordion-content"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block","pl-0"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],["btn-type","tertiary","rx-id","open-grid-preset-columns-modal-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-plus_circle"],[1,"mb-3"],["type","active",4,"ngFor","ngForOf"],["class","btn-link rx-button-unstyled ml-1","type","button",3,"click",4,"ngIf"],[1,"d-block","w-50",3,"options","disabled","ngModel","ngModelChange"],[3,"options","disabled","ngModel","ngModelChange"],["type","active"],["type","button",1,"btn-link","rx-button-unstyled","ml-1",3,"click"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"div",4),n["\u0275\u0275elementStart"](5,"button",5),n["\u0275\u0275listener"]("click",function(e){return t.expandAll(e)}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",6),n["\u0275\u0275listener"]("click",function(e){return t.collapseAll(e)}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"div",7),n["\u0275\u0275elementStart"](12,"adapt-accordion",8),n["\u0275\u0275template"](13,dr,15,11,"div",9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"div",10),n["\u0275\u0275template"](15,pr,3,4,"button",11),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275pipe"](19,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](6),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,7,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,9,"com.bmc.arsys.rx.client.common.collapse-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.presets)("ngForTrackBy",t.trackByPreset),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.isReadOnly?n["\u0275\u0275pipeBind1"](18,11,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](19,13,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptButtonComponent,m.AdaptAccordionComponent,h.NgForOf,h.NgIf,m.AdaptAccordionTabComponent,Np,b.NgControlStatus,b.NgModel,bp,m.AdaptTagComponent],pipes:[p.TranslatePipe],styles:[Bi]});class Bp extends l.InspectorWidgetBase{constructor(e,t,i,n,a,s,l){super(e),this.injector=e,this.rxModalService=t,this.viewDesignerFacade=i,this.rxGuidService=n,this.rxRecordGridDesignUtilsService=a,this.rxRecordGridFilterHelperService=s,this.rxJsonParserService=l,this.currentPresetSelectorGuid$=new o.ReplaySubject(1),this.presetSelectors$=this.viewDesignerFacade.getComponentsByType(c.RxViewComponentType.ViewPresetSelector),this.presetSelectorOptions$=this.presetSelectors$.pipe((0,r.map)(e=>e.map(({guid:e,data:t})=>({id:e,name:t.name})))),this.destroyed$=new o.ReplaySubject(1),this.selectedPresetsList$=this.currentPresetSelectorGuid$.pipe((0,r.tap)(e=>this.updateViewPresetSelectorProp(e)),(0,r.switchMap)(e=>this.rxRecordGridDesignUtilsService.getPresetsList(e)),(0,r.shareReplay)({refCount:!0,bufferSize:1}),(0,r.takeUntil)(this.destroyed$)),this.viewPresetSelectorProp$=this.designerItemModel.sandbox.getComponentPropertyValue("viewPresetSelector"),this.gridColumnGuids$=this.designerItemModel.sandbox.getChildComponentGuids(e=>e.type===jd.components.column),this.selectOptions={options:[],emptyOption:!0,label:"View preset selector",beforeValueChange:(e,t)=>e&&e!==t?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"All record grid view presets will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}ngOnChanges(e){var t,i;(null===(t=e.options.currentValue.recordDefinition)||void 0===t?void 0:t.name)!==(null===(i=e.options.previousValue.recordDefinition)||void 0===i?void 0:i.name)&&(this.currentPresetSelectorGuid=null,this.currentPresetSelectorGuid$.next(null))}ngOnInit(){this.presetSelectorOptions$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.selectOptions.options=e}),this.viewPresetSelectorProp$.pipe((0,r.first)(),(0,r.map)(e=>this.designerItemModel.extractViewPresetSelectorGuid(e)),(0,r.withLatestFrom)(this.presetSelectorOptions$),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{var i;const n=null===(i=t.find(t=>t.id===e))||void 0===i?void 0:i.id;n&&(this.currentPresetSelectorGuid=n,this.currentPresetSelectorGuid$.next(this.currentPresetSelectorGuid))}),this.gridColumnGuids$.pipe((0,r.filter)(()=>!!this.currentPresetSelectorGuid),(0,r.switchMap)(e=>(0,o.combineLatest)(e.map(e=>(0,o.combineLatest)([this.designerItemModel.sandbox.getComponentPropertyValue("sortable",e),this.designerItemModel.sandbox.getComponentPropertyValue("filterable",e),this.viewDesignerFacade.getChildComponents(e,e=>e.type===jd.components.filterPreset)])))),(0,r.distinctUntilChanged)(u.isEqual),(0,r.debounceTime)(100),(0,r.switchMap)(()=>this.designerItemModel.columns$.pipe((0,r.first)())),(0,r.withLatestFrom)(this.designerItemModel.childComponentsTree$.pipe((0,r.map)(e=>(0,u.cloneDeep)(e)))),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.updateColumnPresets(t,e)})}updateColumnPresets(e,t){const i=e.filter(e=>e.type===jd.components.viewPreset).map(e=>{const i=e.children.filter(e=>e.type===jd.components.columnViewPreset),n=this.getPresetFilterComponentsForColumns(e,t),o=t.map(e=>{const t=i.find(t=>t.data.fieldId===e.fieldId);if(t)return e.sortable||(t.data.sortable=null),t;{const t=this.rxRecordGridDesignUtilsService.getColumnPresetPayload(e);return t.data.visible=!1,t.data.index=null,t.data.width=null,t}}).map((e,t,i)=>(null===e.data.index&&(e.data.index=Math.max(...i.map(e=>e.data.index))+1),e));return e.children=[...o,...n],e});this.designerItemModel.sandbox.setChildrenByType(i,[jd.components.viewPreset])}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getPresetFilterComponentsForColumns(e,t){const i=t.filter(e=>e.filterable).map(e=>e.fieldId),n=e.children.filter(e=>e.type!==jd.components.columnViewPreset),o=n.reduce((e,n)=>{var o,r,a;if(i.includes(n.data.fieldId)){const i=(null!==(r=null===(o=t.find(e=>e.fieldId===n.data.fieldId))||void 0===o?void 0:o.namedFilterOptions)&&void 0!==r?r:[]).map(e=>e.guid);let s=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData([n]);s=this.deserializeNamedOptions(s);const l=null===(a=s[0].value)||void 0===a?void 0:a[c.RecordGridNamedFilterOptionKey];l?i.includes(l)&&e.push(n):e.push(n)}return e},[]);if(n.length){if(o.length<n.length){const t=this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(o),i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.data.filters,t);e.data.filters=i?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(i),t):null}return o}return n}deserializeNamedOptions(e){return e.map(e=>{const t=this.rxJsonParserService.tryParseJson(e.value);return t&&t[c.RecordGridNamedFilterOptionKey]?Object.assign(Object.assign({},e),{value:t}):e})}openEditor(e){(0,o.combineLatest)([this.designerItemModel.gridViewPresets$,this.selectedPresetsList$,this.designerItemModel.columns$,this.designerItemModel.recordDefinition$]).pipe((0,r.first)(),(0,r.takeUntil)(this.destroyed$)).subscribe(([t,i,n,o])=>{this.rxModalService.openModal({title:"Edit view presets",content:Lp,size:c.OpenViewActionModalSize.Large,data:{viewPresets:t,presetsList:i,gridColumns:n,recordDefinition:o,activePreset:null==e?void 0:e.guid,isReadOnly:this.isDisabled}}).then(e=>{this.onPresetModalClose(e)}).catch(u.noop)})}trackByGuid(e,t){return t.name}onPresetModalClose(e){e&&e.presets&&this.designerItemModel.childComponentsTree$.pipe((0,r.first)(),(0,r.map)(e=>(0,u.cloneDeep)(e)),(0,r.takeUntil)(this.destroyed$)).subscribe(t=>{e.presets.forEach(e=>{const i=t.find(t=>t.type===jd.components.viewPreset&&t.data.viewPresetGuid===e.guid);if(i){const t=e.presetColumns.map(e=>this.rxRecordGridDesignUtilsService.getColumnPresetPayload(e.data)),n=this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(e.filters.basicFilters);i.data={viewPresetGuid:e.guid,filters:e.filters.filtersJson},i.children=[...t,...n]}}),this.designerItemModel.sandbox.setChildren(t)})}updateViewPresetSelectorProp(e){this.designerItemModel.sandbox.updateComponentProperties({viewPresetSelector:e?`\${view.components.${e}.api}`:null})}}Bp.\u0275fac=function(e){return new(e||Bp)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](d.ViewDesignerFacade),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"]($p),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](v.RxJsonParserService))},Bp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bp,selectors:[["rx-record-grid-view-presets-widget"]],inputs:{options:"options"},features:[n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:6,consts:[["rx-id","preset-selector",1,"d-block","mb-3",3,"options","ngModel","disabled","ngModelChange"],[3,"hidden",4,"ngIf"],[3,"hidden"],["btn-type","tertiary","rx-id","edit-view-presets-button","class","p-0 pb-1",3,"click",4,"ngIf"],["rx-id","no-presets","class","text-tertiary",4,"ngIf"],["rx-id","presets-list"],["class","border mb-1 pr-2 d-flex justify-content-between text-break",4,"ngFor","ngForOf","ngForTrackBy"],["btn-type","tertiary","rx-id","edit-view-presets-button",1,"p-0","pb-1",3,"click"],[1,"d-icon-left-plus_circle"],["rx-id","no-presets",1,"text-tertiary"],[1,"border","mb-1","pr-2","d-flex","justify-content-between","text-break"],["rx-id","preset-name",1,"preset-name",3,"title"],["type","button","rx-id","edit-button",1,"rx-button-unstyled","d-icon-pencil","btn-link",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-select-form-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.currentPresetSelectorGuid=e})("ngModelChange",function(e){return t.currentPresetSelectorGuid$.next(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](1,fr,5,5,"div",1),n["\u0275\u0275pipe"](2,"async")),2&e&&(n["\u0275\u0275property"]("options",t.selectOptions)("ngModel",t.currentPresetSelectorGuid)("disabled",t.isDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](2,4,t.selectedPresetsList$)))},directives:[l.SelectFormControlComponent,b.NgControlStatus,b.NgModel,h.NgIf,h.NgForOf,m.AdaptButtonComponent],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.preset-name[_ngcontent-%COMP%]{padding:5px 10px;font-size:14px}.d-icon-pencil[_ngcontent-%COMP%]{cursor:pointer}.d-icon-pencil[_ngcontent-%COMP%]:not(:hover){color:#313538}']});class $p{constructor(e,t,i,n,o,r,a,s,l,c){this.rxGuidService=e,this.rxRecordGridConfigUtilsService=t,this.rxDefinitionNameService=i,this.rxFeatureService=n,this.rxModalService=o,this.rxRecordGridUtilsService=r,this.rxRecordGridFilterHelperService=a,this.translateService=s,this.viewDesignerFacade=l,this.rxJsonParserService=c}getColumnActionComponentPayloads(e){return(0,u.map)(e,e=>Object.assign(Object.assign({},e),{type:c.RxViewComponentType.Action}))}getNamedFilterOptionPayloads(e){return(0,u.map)(e,e=>Object.assign(Object.assign({},e),{type:jd.components.filterPreset}))}getGridFilterComponentPayloads(e){return(0,u.map)(e,e=>({guid:e.guid,type:jd.components.filter,data:Object.assign({fieldId:e.fieldId,value:e.value},e.$DISPLAYVALUE$&&{$DISPLAYVALUE$:e.$DISPLAYVALUE$})}))}getColumnComponentPayloads(e,t){return(0,u.map)(e,(e,i)=>{let n="false";(null==t?void 0:t.fieldId)===e.fieldId&&!1!==e.sortable?n=JSON.stringify({direction:t.direction}):((0,u.isObject)(e.sortable)||!0===e.sortable)&&(n="true");const o={alignment:e.alignment,fieldId:e.fieldId,filterable:e.filterable,filterType:e.filterType,index:String(e.index),sortable:n,title:e.title,searchable:e.searchable,visible:e.visible,cellDisplayProperties:e.cellDisplayProperties,width:e.width,wrapText:e.wrapText,typeaheadKeystrokeCount:e.typeaheadKeystrokeCount,additionalQueryCriteria:e.additionalQueryCriteria};return{type:jd.components.column,guid:e.guid,insertIndex:i,outletName:c.RX_VIEW_DEFINITION.defaultOutletName,data:o,children:[...this.getColumnActionComponentPayloads(e.actions),...this.getNamedFilterOptionPayloads(e.namedFilterOptions)]}})}getGridFilterPresetComponentPayloads(e,t){const i=t.reduce((e,t)=>e.concat(...t.namedFilterOptions.map(e=>e.guid)),[]),n=t.map(e=>e.fieldId);return(0,u.map)(e,e=>{const t=e.recordGridFilters.filter(e=>n.includes(e.fieldId)).filter(e=>{const t=(0,u.isObject)(e.value)?e.value:this.rxJsonParserService.tryParseJson(e.value);return!(null==t?void 0:t[c.RecordGridNamedFilterOptionKey])||i.includes(t[c.RecordGridNamedFilterOptionKey])}),o=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,t);return{guid:e.guid,type:jd.components.filterPreset,data:{title:e.title,filters:o?this.rxRecordGridFilterHelperService.denormalizeFilterString(JSON.stringify(o),t):null},children:(0,u.map)(t,e=>({guid:e.guid,type:jd.components.filter,data:Object.assign({fieldId:e.fieldId,value:e.value},e.$DISPLAYVALUE$&&{$DISPLAYVALUE$:e.$DISPLAYVALUE$})}))}})}getFilterPresetDescriptorsFromChildData(e){return(0,u.map)(e.filter(e=>e.type===jd.components.filterPreset),e=>({filters:e.data.filters,recordGridFilters:(0,u.map)((0,u.filter)(e.children,e=>e.type===jd.components.filter),e=>({fieldId:e.data.fieldId,value:e.data.value,guid:e.guid,$DISPLAYVALUE$:e.data.$DISPLAYVALUE$})),title:e.data.title,guid:e.guid})).filter(e=>{var t;return(null===(t=e.recordGridFilters)||void 0===t?void 0:t.length)>0})}getActionsFromComponent(e){return(0,u.map)((0,u.filter)(e.children,e=>e.type===c.RxViewComponentType.Action),e=>Object.assign(Object.assign({},e),{data:Object.assign({},e.data)}))}getNamedFilterOptionsFromComponent(e){return e.children.filter(e=>e.type===jd.components.filterPreset).map(e=>Object.assign(Object.assign({},e),{data:Object.assign({},e.data)}))}getDefaultColumns(e){let t=[];if(e){const i=e.fieldDefinitions,n=a.RX_RECORD_DEFINITION.coreFieldIds;t=[{title:(0,u.find)(i,e=>e.id===n.displayId).name,fieldId:String(n.displayId),searchable:!0}],e.resourceType===a.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType&&(t.push({title:(0,u.find)(i,e=>e.id===n.modifiedDate).name,fieldId:String(n.modifiedDate),searchable:!1}),t.push({title:(0,u.find)(i,e=>e.id===n.description).name,fieldId:String(n.description),searchable:!0}));const o=(0,u.reduce)(jd.columnProperties,(e,t)=>(e[t.name]=t.defaultValue,e),{});(0,u.forEach)(t,(e,t)=>(0,u.defaults)(e,o,{index:t,guid:this.rxGuidService.generate()}))}return t}getInitialSortColumnModel(e){const t=(0,u.find)(e,e=>(0,u.isObject)(e.sortable));return t?{direction:t.sortable.direction,fieldId:t.fieldId}:null}getInspectorColumnsFromDesignData(e){return e.map(e=>{const t=e.data;return Object.assign(Object.assign({},(0,u.pick)(t,["alignment","fieldId","filterType","searchable","title","cellDisplayProperties","width","typeaheadKeystrokeCount","additionalQueryCriteria"])),{actions:this.getActionsFromComponent(e),namedFilterOptions:this.getNamedFilterOptionsFromComponent(e),guid:e.guid,filterable:this.rxRecordGridConfigUtilsService.getBooleanValue(t.filterable)||(0,u.isUndefined)(t.filterable),sortable:this.rxRecordGridConfigUtilsService.parseConfigString(t.sortable)||(0,u.isUndefined)(t.sortable),visible:this.rxRecordGridConfigUtilsService.getBooleanValue(t.visible)||(0,u.isUndefined)(t.visible),wrapText:this.rxRecordGridConfigUtilsService.getBooleanValue(t.wrapText),index:Number(t.index)})})}getComponentProperties(e){var t,i,n;return{bordered:null===(t=e.bordered)||void 0===t||t,expandable:e.expandable,name:e.name,recordDefinitionName:e.recordDefinitionName,showDataForAllLocales:e.showDataForAllLocales,associationDefinitionName:e.associationDefinitionName,associatedRecordNodeSide:e.associatedRecordNodeSide,associatedRecordId:e.associatedRecordId,associatedRoleName:e.associatedRoleName,filterExpression:e.filterExpression,filters:(0,u.isObject)(e.filters)?e.filters.filtersJson:e.filters,defaultFilterPreset:this.getDefaultFilterPreset(e),cardLayoutWidth:e.cardLayoutWidth,enableFiltering:e.enableFiltering,requiredFilters:null!==(i=e.requiredFilters)&&void 0!==i?i:0,getDataForHiddenColumns:null===(n=e.getDataForHiddenColumns)||void 0===n||n,enableFilterPresets:e.enableFilterPresets,enableRowSelection:e.enableRowSelection,styles:e.styles,striped:!!e.striped,viewPresetSelector:e.viewPresetSelector,[c.RX_AVAILABLE_ON_DEVICES_PROP_NAME]:e[c.RX_AVAILABLE_ON_DEVICES_PROP_NAME]}}getDefaultFilterPreset(e){return e.defaultFilterPreset&&e.filterPresets?e.filterPresets.some(t=>t.guid===e.defaultFilterPreset)?e.defaultFilterPreset:null:e.defaultFilterPreset&&!e.filterPresets?e.defaultFilterPreset:null}getComponentDesignProperties(e,t,i,n,o){const r=this.getInspectorColumnsFromDesignData(i);return e=Object.assign(Object.assign({},t),e),Object.assign(Object.assign({},e),{mode:e.associationDefinitionName?np.Association:np.Record,filters:{basicFilters:n,filtersJson:e.filters},filterMode:e.filterExpression?ip.Expression:ip.Basic,filterPresets:o,initialSortColumn:this.getInitialSortColumnModel(r),columns:r})}getActionButtonDescriptorsFromChildData(e){return e.filter(e=>e.type===c.RxViewComponentType.ActionButton)}getGridViewPresetsFromChildData(e){return e.filter(e=>e.type===jd.components.viewPreset)}getBasicRecordGridFiltersFromChildData(e){return(0,u.map)(e.filter(e=>e.type===jd.components.filter),e=>({fieldId:e.data.fieldId,value:e.data.value,guid:e.guid,$DISPLAYVALUE$:e.data.$DISPLAYVALUE$}))}getRowActionButtonPayloads(e){return e.map(e=>({type:c.RxViewComponentType.ActionButton,guid:e.guid,data:(0,u.omit)(e,"actions","guid"),outletName:jd.rowActionsOutletName,children:this.getColumnActionComponentPayloads(e.actions)}))}getInspector(e,t,i){const n=Boolean(e.recordDefinitionName&&t),o=[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Record grid.")}},{name:"mode",component:l.GroupButtonFormControlComponent,options:{required:!1,label:"Mode",items:[{value:np.Record,name:"Record"},{value:np.Association,name:"Association"}]}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:e.mode===np.Association?"Record definition to show":"Record definition name",definitionType:e.mode===np.Association?l.RxDefinitionPickerType.RegularDataRecord:l.RxDefinitionPickerType.Record,required:!0,beforeValueChange:(t,i)=>!(0,u.isEmpty)(e.columns)&&Boolean(t)?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Initial column sort, initial filters, and added grid columns will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}],r=[{name:"cardLayoutWidth",component:l.SelectFormControlComponent,options:{label:"Card layout width",sortAlphabetically:!1,options:jd.cardLayoutWidthOptions,emptyOption:!0,tooltip:new s.Tooltip("The width of the Record grid view component at which it will switch to card layout.")}},{name:"initialSortColumn",component:Np,options:{label:"Initial column sort",gridColumns:(0,u.sortBy)(e.columns,"title"),recordDefinition:t}},{name:"enableRowSelection",component:l.OptionalSelectFormControlComponent,options:{label:"Enable row selection",options:[{id:jd.selectionTypes.multiple,name:"Multiple rows"},{id:jd.selectionTypes.single,name:"Single row"}]}},{name:"expandable",component:l.SwitchFormControlComponent,hidden:!this.rxFeatureService.isFeatureEnabled("DRD21-44922"),options:{label:"Enable grid width expansion",tooltip:new s.Tooltip("If enabled, the grid will expand in width to accommodate wider columns. If one or more columns extend beyond the right border of the grid, a horizontal scroll bar will appear.<br>Column width will be converted to pixels if grid width expansion mode is enabled.")}},{name:"bordered",component:l.SwitchFormControlComponent,options:{label:"Show border lines"}},{name:"striped",component:l.SwitchFormControlComponent,options:{label:"Show striped rows"}},{name:"showDataForAllLocales",component:l.SwitchFormControlComponent,options:{label:"Show data for all locales",tooltip:new s.Tooltip("If enabled, data for all locales will be displayed in the grid at runtime. If disabled, only data for current locale will be displayed.")}},(0,d.getAvailableOnDevicesInspectorConfig)(),(0,d.getStylesFieldInspectorConfig)()];if(e.mode===np.Association){n&&o.push({name:"associationDefinitionName",component:l.SelectFormControlComponent,options:{required:!0,label:"Association to use",options:(0,u.map)(i,e=>({id:e.name,name:this.rxDefinitionNameService.getDisplayName(e.name)})),emptyOption:!0}});const t=(0,u.find)(i,t=>t.name===e.associationDefinitionName);t&&t.nodeAId===t.nodeBId&&o.push({name:"associatedRecordNodeSide",component:l.SelectFormControlComponent,options:{required:!0,label:"Associated record node side",options:[{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value,name:t.nodeAName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.defaultName},{id:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value,name:t.nodeBName||C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.defaultName}],emptyOption:!0}}),o.push({name:"associatedRecordId",component:l.ExpressionInspectorControlComponent,options:{label:"Associated record ID",isRequired:!0}}),t&&t.cardinality===C.RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value&&o.push({name:"associatedRoleName",component:l.ExpressionInspectorControlComponent,options:{label:"Associated role name"}})}n&&(o.push({name:"columns",component:ep,options:{recordDefinition:t}}),o.push({name:"getDataForHiddenColumns",component:l.SwitchFormControlComponent,options:{label:"Get data for hidden columns",tooltip:new s.Tooltip(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.get-data-for-hidden-columns.tooltip"))}}),o.push({widgetName:"rowActions",component:Pp}));const a=[{name:"enableFiltering",component:l.SwitchFormControlComponent,options:{label:"Enable filtering"}},{name:"requiredFilters",component:l.SelectFormControlComponent,isDisabled:!e.enableFiltering,options:{label:"Required number of filters",sortAlphabetically:!1,options:jd.numberOfFiltersOptions,emptyOption:!1,tooltip:new s.Tooltip("Data will be displayed in the grid only if a) the number of applied filters is greater than or equal to the required number of filters, or b) a search is performed.")}}];n&&(a.push({name:"filterMode",component:l.GroupButtonFormControlComponent,options:{label:"Initial filters",items:[{name:"Basic",value:ip.Basic},{name:"Expression",value:ip.Expression}],tooltip:new s.Tooltip("Select the records that should be displayed on the deployed application UI. Application users can add filters in the deployed application."),beforeValueChange:(t,i)=>i===ip.Expression&&e.filters.filtersJson||i===ip.Basic&&e.filterExpression?this.rxModalService.confirm({title:"Change filter type",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Current filter will be cleared. Do you want to continue?"}):Promise.resolve(!0)}}),e.filterMode===ip.Basic?a.push({name:"filters",component:bp,options:{primaryRecordDefinition:t}}):a.push({name:"filterExpression",component:l.ExpressionInspectorControlComponent,options:{label:"Initial filters",isLabelHidden:!0}}),a.push({name:"enableFilterPresets",component:l.SwitchFormControlComponent,isDisabled:!e.enableFiltering,options:{label:"Enable filter presets"}}),a.push({name:"filterPresets",component:kp,options:{label:"Filter presets",tooltip:new s.Tooltip("Predefine sets of record grid filters users can apply."),primaryRecordDefinition:t,columns:e.columns.filter(e=>e.filterable)}})),(0,u.isEmpty)(e.filterPresets)||a.push({name:"defaultFilterPreset",component:l.SelectFormControlComponent,options:{label:"Default filter preset",tooltip:new s.Tooltip("Select a filter preset to be applied when a user opens this view for the first time."),options:(0,u.map)(e.filterPresets,e=>({id:e.guid,name:e.title})),emptyOption:!0}});return{inspectorSectionConfigs:[{label:"General",controls:o},{label:"Filters",controls:a},{label:"Presentation",controls:r},{label:"View presets",controls:[{component:Bp,options:{recordDefinition:t}}]}]}}getColumnDataDictionaryBranch(e,t,i,n,a,s){const l=(0,o.combineLatest)([n,a]).pipe((0,r.switchMap)(([t,i])=>i?this.getColumnsDataDictionaryBuilder(e,t,i).pipe((0,r.map)(t=>({label:this.rxDefinitionNameService.getDisplayName(i.name),expression:`\${view.components.${e}.api}`,children:[{label:"First selected row",expression:`\${view.components.${e}.firstSelectedRow}`,children:t("firstSelectedRow")},{label:"Is user allowed to delete records",expression:`\${view.components.${e}.isUserAllowedToDeleteRecords}`},{label:"Last action row",expression:`\${view.components.${e}.clickableRow}`,children:t("clickableRow")},{label:"Selected rows",expression:`\${view.components.${e}.selectedRows}`,children:t("fieldValuesByFieldId")},{label:"Selected row count",expression:`\${view.components.${e}.selectedRowCount}`},{label:"Total row count",expression:`\${view.components.${e}.totalRowCount}`},{label:"Query expression",expression:`\${view.components.${e}.queryExpression}`},{label:"Last refresh time",expression:`\${view.components.${e}.lastRefreshTime}`}]})),(0,r.take)(1)):(0,o.of)(null)));return(0,o.combineLatest)([i,l,s]).pipe((0,r.map)(([e,i,n])=>i?Object.assign(Object.assign({},i),{label:this.getComponentName(t,i.label,n,e)}):null))}getColumnsDataDictionaryBuilder(e,t,i){return(t.length?(0,o.forkJoin)(t.map(t=>this.rxRecordGridUtilsService.getFieldDefinition(t.data.fieldId,i).pipe((0,r.filter)(e=>!!e),(0,r.map)(i=>this.getColumnDataDictionaryBranchBuilder(e,t,i))))):(0,o.of)([])).pipe((0,r.map)(e=>t=>e.map(e=>e.call(this,t))))}getColumnDataDictionaryBranchBuilder(e,t,i){const n=i.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?(0,u.map)(i.optionNamesById,(i,n)=>({label:i,expression:`\${view.components.${e}.recordDefinition.fieldDefinitionsById[${t.data.fieldId}].optionsById[${n}].id}`})):void 0;return o=>{var r;return{label:(null===(r=t.data.title)||void 0===r?void 0:r.trim())||`[${i.name}]`,expression:`\${view.components.${e}.${o}.${t.data.fieldId}}`,autocompleteOptions:n,children:i.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:`${t.data.title} (Option name)`,expression:`\${view.components.${e}.${o}.selectionFieldOptionNamesById.${t.data.fieldId}}`},{label:"Options",children:n}]:null}}}getComponentName(e,t,i,n){const o=[t,i,n].filter(Boolean);return o.length?`${e} (${o.join(": ")})`:e}getGridViewPresetPayload(e,t){return{type:jd.components.viewPreset,guid:this.rxGuidService.generate(),data:{viewPresetGuid:e,filters:null},children:t.map(e=>this.getColumnPresetPayload(e))}}getColumnPresetPayload(e){return{type:jd.components.columnViewPreset,data:{fieldId:e.fieldId,index:e.index,visible:e.visible,sortable:(0,u.isObject)(e.sortable)?e.sortable:null,width:e.width}}}getPresetsList(e){return e?this.viewDesignerFacade.getChildComponents(e).pipe((0,r.map)(e=>e.sort((e,t)=>e.data.index-t.data.index)),(0,r.map)(e=>e.map(e=>({guid:e.guid,name:e.data.label}))),(0,r.debounceTime)(50)):(0,o.of)([])}}$p.\u0275fac=function(e){return new(e||$p)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"]($d),n["\u0275\u0275inject"](s.RxDefinitionNameService),n["\u0275\u0275inject"](s.RxFeatureService),n["\u0275\u0275inject"](S.RxModalService),n["\u0275\u0275inject"](Pd),n["\u0275\u0275inject"](sp),n["\u0275\u0275inject"](p.TranslateService),n["\u0275\u0275inject"](d.ViewDesignerFacade),n["\u0275\u0275inject"](v.RxJsonParserService))},$p.\u0275prov=n["\u0275\u0275defineInjectable"]({token:$p,factory:$p.\u0275fac,providedIn:"root"});class Gp extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.rxViewActionValidatorService=this.injector.get(d.RxViewActionValidatorService),this.rxRecordGridDesignUtilsService=this.injector.get($p),this.rxGuidService=this.injector.get(v.RxGuidService),this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.preservedRecordDefinition=null,this.preservedRecordAssociationDefinitions=[],this.currentGridDesignProperties=null,this.componentPropertiesChangeFromCanvas$=new o.Subject,this.columns$=this.sandbox.getComponentPropertyValue("columns"),this.enableFiltering$=this.sandbox.getComponentPropertyValue("enableFiltering"),this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.associationDefinitionName$=this.sandbox.getComponentPropertyValue("associationDefinitionName"),this.associatedRecordNodeSide$=this.sandbox.getComponentPropertyValue("associatedRecordNodeSide"),this.childComponentsTree$=this.sandbox.getChildComponentsTree(),this.viewPresetSelectors$=this.sandbox.getComponentsByType(c.RxViewComponentType.ViewPresetSelector),this.gridViewPresets$=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getGridViewPresetsFromChildData(e))),this.viewPresetSelectorGuid$=this.sandbox.getComponentPropertyValue("viewPresetSelector").pipe((0,r.map)(e=>this.extractViewPresetSelectorGuid(e)),(0,r.shareReplay)({refCount:!0,bufferSize:1})),this.selectedPresetsList$=this.viewPresetSelectorGuid$.pipe((0,r.switchMap)(e=>this.rxRecordGridDesignUtilsService.getPresetsList(e)),(0,r.distinctUntilChanged)(u.isEqual),(0,r.takeUntil)(this.sandbox.destroyed$)),this.rowActionButtonGuids$=this.sandbox.getLayout(this.sandbox.guid).pipe((0,r.filter)(Boolean),(0,r.map)(e=>{const t=(0,u.find)(e.outlets,{name:jd.rowActionsOutletName});return(0,u.head)(t.columns).children}),(0,r.shareReplay)(1))}static getInitialProperties(e){return Object.assign(Object.assign({},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}rxInit(){const e=Object.assign({bordered:!0,expandable:!1,name:null,mode:np.Record,recordDefinitionName:null,showDataForAllLocales:!1,associationDefinitionName:null,associatedRecordId:null,associatedRoleName:null,enableRowSelection:jd.selectionTypes.multiple,styles:null,cardLayoutWidth:null,enableFiltering:!0,getDataForHiddenColumns:!0,requiredFilters:0,enableFilterPresets:!0,defaultFilterPreset:null,initialSortColumn:null,columns:[],filterMode:ip.Basic,filters:{basicFilters:[],filtersJson:null},filterExpression:null,filterPresets:[],striped:!1},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE);this.recordDefinition$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>this.getRecordDefinition(e)),(0,r.shareReplay)(1)),this.recordAssociationDefinitions$=this.recordDefinitionName$.pipe((0,r.mergeMap)(e=>this.getRecordAssociationDefinitions(e)),(0,r.shareReplay)(1));const t=this.childComponentsTree$.pipe((0,r.map)(e=>e.filter(e=>e.type===jd.components.column)),(0,r.distinctUntilChanged)(u.isEqual)),i=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getBasicRecordGridFiltersFromChildData(e)),(0,r.distinctUntilChanged)(u.isEqual)),n=this.childComponentsTree$.pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getFilterPresetDescriptorsFromChildData(e)),(0,r.distinctUntilChanged)(u.isEqual));this.actionButtonComponents$=this.childComponentsTree$.pipe((0,r.withLatestFrom)(this.rowActionButtonGuids$),(0,r.map)(([e,t])=>this.rxRecordGridDesignUtilsService.getActionButtonDescriptorsFromChildData(e).filter(e=>!(0,u.includes)(t,e.guid)))),this.rowActionButtonComponents$=this.childComponentsTree$.pipe((0,r.withLatestFrom)(this.rowActionButtonGuids$),(0,r.map)(([e,t])=>this.rxRecordGridDesignUtilsService.getActionButtonDescriptorsFromChildData(e).filter(e=>(0,u.includes)(t,e.guid)))),this.viewPresetSelectors$.pipe((0,r.map)(e=>e.map(e=>e.guid).sort()),(0,r.distinctUntilChanged)(u.isEqual),(0,r.withLatestFrom)(this.viewPresetSelectorGuid$),(0,r.filter)(([e,t])=>t&&!e.includes(t)),(0,r.switchMap)(()=>this.childComponentsTree$.pipe((0,r.take)(1))),(0,r.map)(e=>e.filter(e=>e.type!==jd.components.viewPreset)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setChildren(e),this.sandbox.updateComponentProperties({viewPresetSelector:null})}),this.sandbox.viewModelsInitialized$.pipe((0,r.withLatestFrom)(this.rowActionButtonComponents$),(0,r.map)(([e,t])=>t),(0,r.filter)(e=>!!e.length)).subscribe(e=>{e.forEach(e=>{this.sandbox.getComponentModel(e.guid).setValidationIssues([])})}),(0,o.merge)(this.sandbox.componentProperties$.pipe((0,r.skip)(1)),this.componentPropertiesChangeFromCanvas$).pipe((0,r.distinctUntilChanged)((e,t)=>(0,u.isEqual)(this.currentGridDesignProperties,t)),(0,r.mergeMap)(e=>{const t=this.currentGridDesignProperties;return t.recordDefinitionName!==e.recordDefinitionName?(0,o.zip)(this.getRecordDefinition(e.recordDefinitionName),this.getRecordAssociationDefinitions(e.recordDefinitionName)).pipe((0,r.map)(()=>[t,e])):(0,o.of)([t,e])}),(0,r.withLatestFrom)(this.actionButtonComponents$,this.rowActionButtonComponents$,this.gridViewPresets$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([[e,t],i,n,o])=>{const r=this.preservedRecordDefinition,a=this.preservedRecordAssociationDefinitions;let s;if(t.enableFiltering?!e.enableFiltering&&t.enableFiltering&&(s={enableFilterPresets:!0}):s={enableFilterPresets:!1},e.recordDefinitionName!==t.recordDefinitionName)if(s={filterPresets:[],filters:{basicFilters:[],filtersJson:null},initialSortColumn:null,associationDefinitionName:null,filterExpression:null},r){const e=this.rxRecordGridDesignUtilsService.getDefaultColumns(r),t=this.rxRecordGridDesignUtilsService.getColumnComponentPayloads(e,null);t.push(...i),this.sandbox.setChildren(t),s.columns=e}else this.sandbox.setChildren(i),s.columns=[];else{const r=(0,u.pick)(t,"columns","initialSortColumn","filters","filterPresets"),a=(0,u.pick)(e,"columns","initialSortColumn","filters","filterPresets");if(!(0,u.isEqual)(a,r)){const e=this.rxRecordGridDesignUtilsService.getColumnComponentPayloads(r.columns,r.initialSortColumn),t=this.rxRecordGridDesignUtilsService.getInspectorColumnsFromDesignData(e);e.push(...this.rxRecordGridDesignUtilsService.getGridFilterComponentPayloads(r.filters.basicFilters||[]));const a=this.rxRecordGridDesignUtilsService.getGridFilterPresetComponentPayloads(r.filterPresets,t.filter(e=>e.filterable));e.push(...a),r.filterPresets=this.rxRecordGridDesignUtilsService.getFilterPresetDescriptorsFromChildData(a),e.push(...i,...n,...o),this.sandbox.setChildren(e),s={columns:t,initialSortColumn:this.rxRecordGridDesignUtilsService.getInitialSortColumnModel(t),filterPresets:r.filterPresets}}}e.filterMode!==t.filterMode&&(s=t.filterMode===ip.Basic?{filterExpression:null}:{filters:{basicFilters:[],filtersJson:null}}),e.associationDefinitionName!==t.associationDefinitionName&&(s=Object.assign(Object.assign({},s||{}),{associatedRecordNodeSide:this.getAssociatedRecordNodeSide(t,a)})),e.mode!==t.mode&&(s={associationDefinitionName:null,associatedRecordId:null,associatedRoleName:null,associatedRecordNodeSide:null}),t=Object.assign(Object.assign({},t),s),e.enableFiltering&&!t.enableFiltering&&(s=Object.assign(Object.assign({},s),{requiredFilters:0})),this.updateComponentPropertiesAndConfig(t,s,r,a)}),(0,o.combineLatest)([this.recordDefinitionName$.pipe((0,r.map)(e=>e?null:this.sandbox.createError("Record definition name cannot be blank.","recordDefinitionName"))),t.pipe((0,r.switchMap)(e=>this.validateColumns(e))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(d.validateCssClassNames)),this.sandbox.getComponentPropertyValue("mode").pipe((0,r.switchMap)(e=>e===np.Association?this.validateAssociationModeProps():this.actionButtonComponents$.pipe((0,r.switchMap)(e=>this.validateActionButtons(e))))),this.rowActionButtonComponents$.pipe((0,r.switchMap)(e=>this.validateRowActions(e))),this.sandbox.getComponentPropertyValue(c.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(d.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.compact),(0,r.map)(u.flatten),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)}),(0,o.combineLatest)([this.sandbox.componentProperties$,this.recordDefinition$,this.recordAssociationDefinitions$,t,i,n]).pipe((0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([t,i,n,o,r,a])=>{const s=this.rxRecordGridDesignUtilsService.getComponentDesignProperties(t,e,o,r,a);this.updateComponentPropertiesAndConfig(s,s,i,n)});const a=this.sandbox.getComponentPropertyValue("name").pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),s=this.associationDefinitionName$.pipe((0,r.map)(e=>this.rxDefinitionNameService.getDisplayName(e)),(0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$));this.rxRecordGridDesignUtilsService.getColumnDataDictionaryBranch(this.sandbox.guid,this.sandbox.descriptor.name,a,t,this.recordDefinition$,s).pipe((0,r.skipWhile)(u.isEmpty),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setCommonDataDictionary(e)}),(0,o.combineLatest)([this.recordDefinitionName$.pipe((0,r.map)(e=>this.rxDefinitionNameService.getDisplayName(e))),s,a]).pipe((0,r.map)(e=>this.rxRecordGridDesignUtilsService.getComponentName(this.sandbox.descriptor.name,...e)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setSettablePropertiesDataDictionary(e,[])}),this.selectedPresetsList$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.childComponentsTree$,this.columns$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t,i])=>{this.updatePresetViewComponents(t,e,i)})}updatePresetViewComponents(e,t,i){const n=e.filter(e=>e.type===jd.components.viewPreset),o=t.map(({guid:e})=>{const t=n.find(t=>t.data.viewPresetGuid===e);return null!=t?t:this.rxRecordGridDesignUtilsService.getGridViewPresetPayload(e,i)});this.sandbox.setChildrenByType(o,[jd.components.viewPreset])}getAssociatedRecordNodeSide(e,t){const i=e.associationDefinitionName?t.find(({name:t})=>t===e.associationDefinitionName):null;return i?i.nodeAId===e.recordDefinitionName?C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeA.value:C.RX_ASSOCIATED_RECORD_NODE_SIDES.nodeB.value:null}actionButtonDropPredicate(e){return e.draggedViewComponentDescriptor.type===c.RxViewComponentType.ActionButton}getPropertiesByName(e){return this.rxRecordGridDesignUtilsService.getComponentProperties(e)}setRowActions(e){this.rowActionButtonGuids$.pipe((0,r.take)(1),(0,r.withLatestFrom)(this.childComponentsTree$)).subscribe(([t,i])=>{const n=i.filter(e=>!(0,u.includes)(t,e.guid));n.push(...this.rxRecordGridDesignUtilsService.getRowActionButtonPayloads(e)),this.sandbox.setChildren(n),this.toggleActionsColumn(e.length>0)})}extractViewPresetSelectorGuid(e){var t;const i=null==e?void 0:e.match(/^\${view\.components\.([0-9a-z-]+)\.api}$/);return null!==(t=i&&i[1])&&void 0!==t?t:null}toggleActionsColumn(e){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(t=>{const i=(0,u.cloneDeep)(t.columns),n=(0,u.find)(i,{fieldId:jd.actionsColumnFieldDefinition.id});e&&!n?i.push({fieldId:jd.actionsColumnFieldDefinition.id,guid:this.rxGuidService.generate(),title:jd.actionsColumnFieldDefinition.name,visible:!0,index:i.length,filterable:!1,sortable:!1,searchable:!1}):e||((0,u.pull)(i,n),i.forEach((e,t)=>{e.index=t})),this.updateComponentPropertiesAndConfig(t,{columns:i},this.preservedRecordDefinition,this.preservedRecordAssociationDefinitions)})}updateComponentPropertiesAndConfig(e,t,i,n){this.currentGridDesignProperties=e,t&&this.sandbox.updateComponentProperties(t),this.sandbox.updateInspectorConfig(this.rxRecordGridDesignUtilsService.getInspector(e,i,n))}getRecordDefinition(e){return e?this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.catchError)(e=>(0,o.of)(null)),(0,r.tap)(e=>this.preservedRecordDefinition=e)):(this.preservedRecordDefinition=null,(0,o.of)(null))}getRecordAssociationDefinitions(e){return e?this.rxRecordDefinitionCacheService.getRecordAssociationDefinitions(e).pipe((0,r.map)(t=>t[e]||[]),(0,r.catchError)(e=>(0,o.of)([])),(0,r.tap)(e=>this.preservedRecordAssociationDefinitions=e)):(this.preservedRecordAssociationDefinitions=[],(0,o.of)([]))}validateColumns(e){return e.length?this.validateColumnActions(e):(0,o.of)([this.sandbox.createError("Record grid must have at least one column.","columns")])}validateColumnActions(e){return(0,o.combineLatest)(e.map(e=>{const t=(0,u.filter)(e.children,{type:c.RxViewComponentType.Action});return this.rxViewActionValidatorService.validate(t,"columns").pipe((0,r.map)(t=>t.map(t=>Object.assign(Object.assign({},t),{data:Object.assign(Object.assign({},t.data),{columnGuid:e.guid})}))))})).pipe((0,r.map)(u.flatten))}validateRowActions(e){return e.length?(0,o.combineLatest)(e.map((e,t)=>this.rxViewActionValidatorService.validate(e.children,"rowActions").pipe((0,r.map)(e=>e.map(e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{rowActionIndex:t})})))))).pipe((0,r.map)(u.flatten)):(0,o.of)([])}validateAssociationModeProps(){return(0,o.combineLatest)([(0,o.combineLatest)([this.associationDefinitionName$,this.associatedRecordNodeSide$]).pipe((0,r.map)(([e,t])=>e?t?null:this.sandbox.createError("Associated record node side cannot be blank.","associatedRecordNodeSide"):this.sandbox.createError("Association definition name cannot be blank.","associationDefinitionName"))),this.sandbox.getComponentPropertyValue("associatedRecordId").pipe((0,r.map)(e=>e?null:this.sandbox.createError("Associated record ID cannot be blank.","associatedRecordId")))]).pipe((0,r.map)(u.compact))}validateActionButtons(e){const t=(0,u.flatten)(e.map(e=>e.children)).filter(({data:e})=>"rxDeleteRecordsAction"===e.name&&e.recordDefinitionName);return t.length?(0,o.combineLatest)(t.map(({data:e})=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(({resourceType:e})=>e===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType?this.sandbox.createWarning("You have configured a Record grid action to delete Join records. Please ensure that one or more processes or rules have been defined to perform the deletion of the selected Join record instances."):null)))).pipe((0,r.map)(u.compact)):(0,o.of)([])}}class zp{constructor(e,t){this.rxRecordGridConfigUtilsService=e,this.rxRecordGridUtilsService=t}ngOnInit(){this.adaptTableConfig$=this.model.columns$.pipe((0,r.map)(e=>{const t=(0,u.sortBy)(e,e=>e.index),i=t.find(e=>(0,u.isObject)(e.sortable));let n={field:null,order:null};if(i){const e=i.sortable;n={field:String(i.fieldId),order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(e.direction)}}return{columns:t.map(e=>({field:e.fieldId,header:e.title,sortable:Boolean(e.sortable),hidden:!e.visible,testId:this.rxRecordGridUtilsService.getTestIdForGridColumn(e.fieldId)})),sortMeta:n,toolbarConfig:{counter:!1,quickFilter:!0,filter:!0,filterTemplate:this.filterTemplate,filterResults:!1,visibleColumnsMenu:!0,visibleColumnsMenuTemplate:this.visibleColumnsMenuTemplate,quickFilterTriggerable:!0}}}),(0,r.shareReplay)(1)),this.hasRecordDefinitionName$=this.model.recordDefinition$.pipe((0,r.map)(Boolean),(0,r.shareReplay)(1))}onSort(e){this.adaptTableConfig$.pipe((0,r.take)(1)).subscribe(t=>{if(!(0,u.isEqual)(e,t.sortMeta)){let t;const i=this.model.currentGridDesignProperties.columns.find(t=>t.fieldId===e.field);t=(0,u.isObject)(i.sortable)?i.sortable.direction===Nd.Desc?null:{fieldId:i.fieldId,direction:Nd.Desc}:{fieldId:i.fieldId,direction:Nd.Asc},this.model.componentPropertiesChangeFromCanvas$.next(Object.assign(Object.assign({},this.model.currentGridDesignProperties),{initialSortColumn:t}))}})}onBeforeViewComponentDrop(e){e.draggedViewComponentDescriptor.type!==c.RxViewComponentType.ActionButton||e.draggedViewComponentGuid||(e.initialPropertiesByName=Object.assign(Object.assign({},e.initialPropertiesByName),{style:ms.Tertiary}))}}zp.\u0275fac=function(e){return new(e||zp)(n["\u0275\u0275directiveInject"]($d),n["\u0275\u0275directiveInject"](Pd))},zp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:zp,selectors:[["rx-record-grid-design"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](gr,7),n["\u0275\u0275viewQuery"](vr,7)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.visibleColumnsMenuTemplate=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:10,vars:8,consts:[[1,"rx-record-grid-design"],["type","objects","label","Select a record definition and edit grid columns in the Properties panel.",4,"ngIf","ngIfElse"],["gridTemplate",""],["filterTemplate",""],["visibleColumnsMenuTemplate",""],["type","objects","label","Select a record definition and edit grid columns in the Properties panel."],[1,"rx-record-grid-design__action-buttons-canvas",3,"dropListOrientation","dropPredicate","beforeViewComponentDrop"],[1,"rx-record-grid-design__table",3,"columns","sortable","scrollable","scrollHeight","rowExpandMode","sortMode","toolbarConfig","filterable","sortField","sortOrder","bordered","totalRecords","hasEmptyState","dontEmitLazyLoadOnInputChange","onSort"],["adaptTable",""],[1,"rx-record-grid-design__toolbar-item","btn-link","d-icon-refresh","grid-toolbar-icon","mx-2","p-1"],["class","btn-link px-0 d-icon-left-filter d-icon-right-triangle_down",4,"ngIf"],[1,"btn-link","px-0","d-icon-left-filter","d-icon-right-triangle_down"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,xr,1,0,"adapt-empty-state",1),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275template"](4,yr,7,23,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,Cr,3,3,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,Sr,0,0,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](5);n["\u0275\u0275classProp"]("border",!n["\u0275\u0275pipeBind1"](1,4,t.hasRecordDefinitionName$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!n["\u0275\u0275pipeBind1"](3,6,t.hasRecordDefinitionName$))("ngIfElse",e)}},directives:[h.NgIf,m.AdaptEmptyStateComponent,d.CanvasOutletComponent,F.AdaptTableComponent],pipes:[h.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     rx-canvas-item-container{min-width:100%}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     .cdk-drop-list{background-color:#f0f1f1;border:1px solid #d6d7d8;border-bottom:0;min-height:48px;display:flex;flex-flow:row wrap}.rx-record-grid-design__action-buttons-canvas[_ngcontent-%COMP%]     .cdk-drop-list:empty:after{content:"Drop Action buttons here";display:block;text-align:center;width:100%;line-height:48px;color:#959899;font-size:.875rem}.rx-record-grid-design__toolbar-item[_ngcontent-%COMP%]{font-size:.9375rem}.rx-record-grid-design__table[_ngcontent-%COMP%]     .adapt-table-toolbar{pointer-events:none}'],changeDetection:0});class Up{constructor(e,t){this.rxJsonParserService=e,this.rxViewDefinitionParserService=t}adaptDefinition(e){var t,i,n,o,r;const a=this.rxJsonParserService.tryParseJson(e.layout),s=(0,u.find)(a.outlets,{name:jd.rowActionsOutletName});e.propertiesByName.enableFilterPresets=null!==(t=e.propertiesByName.enableFilterPresets)&&void 0!==t?t:"true",s?(0,u.forEach)(null===(i=s.columns[0])||void 0===i?void 0:i.children,t=>{const i=(0,u.find)(e.componentDefinitions,{guid:t});(0,u.pull)(e.componentDefinitions,i).push(i)}):a.outlets.push(c.RxViewLayout.getOutlet(jd.rowActionsOutletName)),e.layout=JSON.stringify(a),Object.assign(e.propertiesByName,{expandable:null!==(n=e.propertiesByName.expandable)&&void 0!==n&&n,showDataForAllLocales:null!==(o=e.propertiesByName.showDataForAllLocales)&&void 0!==o&&o,requiredFilters:null!==(r=e.propertiesByName.requiredFilters)&&void 0!==r?r:"true"===e.propertiesByName.requireFiltering?1:0}),delete e.propertiesByName.requireFiltering,this.rxViewDefinitionParserService.getComponents(e).map(e=>e.componentDefinition).forEach(e=>{var t,i;e.type===jd.components.column&&Object.assign(e.propertiesByName,{wrapText:null!==(t=e.propertiesByName.wrapText)&&void 0!==t&&t,typeaheadKeystrokeCount:Number(null!==(i=e.propertiesByName.typeaheadKeystrokeCount)&&void 0!==i?i:jd.defaultTypeaheadKeystrokeCount)})})}}Up.\u0275fac=function(e){return new(e||Up)(n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](c.RxViewDefinitionParserService))},Up.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Up,factory:Up.\u0275fac,providedIn:"root"});class qp{}qp.\u0275fac=function(e){return new(e||qp)},qp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:qp,declarations:[Np],imports:[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptRxSelectModule],exports:[Np]}),qp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,m.AdaptButtonModule,m.AdaptRxSelectModule]]});class Xp{}Xp.\u0275fac=function(e){return new(e||Xp)},Xp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xp,declarations:[Vp],imports:[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,m.AdaptRxTextfieldModule,h.CommonModule,y.DragDropModule,b.FormsModule,l.StepperWithUnitsFormControlModule,p.TranslateModule],exports:[Vp]}),Xp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptRxCheckboxModule,m.AdaptRxTextfieldModule,h.CommonModule,y.DragDropModule,b.FormsModule,l.StepperWithUnitsFormControlModule,p.TranslateModule]]});class Hp{}Hp.\u0275fac=function(e){return new(e||Hp)},Hp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hp,declarations:[Lp],imports:[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptTagModule,h.CommonModule,b.FormsModule,Ep,qp,Xp,p.TranslateModule],exports:[Lp]}),Hp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptTagModule,h.CommonModule,b.FormsModule,Ep,qp,Xp,p.TranslateModule]]});class Wp{}Wp.\u0275fac=function(e){return new(e||Wp)},Wp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wp,declarations:[Bp],imports:[h.CommonModule,m.AdaptButtonModule,b.FormsModule,Hp,l.SelectFormControlModule],exports:[Bp]}),Wp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptButtonModule,b.FormsModule,Hp,l.SelectFormControlModule]]});class Yp{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.rxRecordGridDesignAdapterService=t,this.rxDefinitionAdapterRegistryService.registerDesignAdapter(jd.type,this.rxRecordGridDesignAdapterService)}}Yp.\u0275fac=function(e){return new(e||Yp)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Up))},Yp.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Yp,declarations:[zp,ep,Zd,Gd,kp,Op,Pp,jp,Wd,Hd,Jd,Kd],imports:[h.CommonModule,b.FormsModule,b.ReactiveFormsModule,qp,m.AdaptButtonModule,m.AdaptTooltipModule,m.AdaptAccordionModule,R.AdaptTextFieldModule,m.AdaptRxSearchModule,m.AdaptTreeModule,m.AdaptRxCheckboxModule,m.AdaptRxRadiobuttonModule,d.ActionListControlModule,l.GroupButtonFormControlModule,y.DragDropModule,l.ExpressionEditorModule,m.AdaptAdvancedFilteringModule,m.AdaptRxTextfieldModule,S.RxDirectivesModule,m.AdaptRxLabelModule,wp,d.ViewDesignerCanvasModule,F.AdaptTableModule,m.AdaptEmptyStateModule,s.RxDefinitionModule,m.AdaptRxSelectModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,m.AdaptIconModule,p.TranslateModule,l.SelectFormControlModule,v.RxUniqueValidatorModule,m.AdaptRxSwitchModule,l.IconPickerFormControlModule,m.AdaptPopoverModule,Fp,Wp,Ep,l.StepperWithUnitsFormControlModule,v.RxNoWhitespaceValidatorModule]}),Yp.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,b.FormsModule,b.ReactiveFormsModule,qp,m.AdaptButtonModule,m.AdaptTooltipModule,m.AdaptAccordionModule,R.AdaptTextFieldModule,m.AdaptRxSearchModule,m.AdaptTreeModule,m.AdaptRxCheckboxModule,m.AdaptRxRadiobuttonModule,d.ActionListControlModule,l.GroupButtonFormControlModule,y.DragDropModule,l.ExpressionEditorModule,m.AdaptAdvancedFilteringModule,m.AdaptRxTextfieldModule,S.RxDirectivesModule,m.AdaptRxLabelModule,wp,d.ViewDesignerCanvasModule,F.AdaptTableModule,m.AdaptEmptyStateModule,s.RxDefinitionModule,m.AdaptRxSelectModule,l.RxDefinitionPickerModule,l.ExpressionFormControlModule,m.AdaptIconModule,p.TranslateModule,l.SelectFormControlModule,v.RxUniqueValidatorModule,m.AdaptRxSwitchModule,l.IconPickerFormControlModule,m.AdaptPopoverModule,Fp,Wp,Ep,l.StepperWithUnitsFormControlModule,v.RxNoWhitespaceValidatorModule]]});class Qp extends f.BaseViewComponent{constructor(){super()}}Qp.\u0275fac=function(e){return new(e||Qp)},Qp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Qp,selectors:[["rx-page"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-outlet")},directives:[f.RuntimeViewCanvasOutletComponent],encapsulation:2});class Kp{constructor(e,t){this.context=e,this.translateService=t,this.alertConfig={content:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.filter-by-selection.dialog.info.message"),type:"section",dismissible:!1,variant:"info",icon:!0},this.options=this.context.getData().filterableFields}optionFormatter(e){return e.name}apply(){this.context.close(this.field[0].id)}}Kp.\u0275fac=function(e){return new(e||Kp)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](p.TranslateService))},Kp.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kp,selectors:[["rx-filter-by-card-selection"]],decls:11,vars:16,consts:[[3,"config"],[1,"modal-body","pt-0"],[3,"label","options","ngModel","required","optionFormatter","popupClass","ngModelChange"],[1,"modal-footer"],["adapt-button","","type","button","btn-type","primary","rx-id","apply-button",3,"disabled","click"],["adapt-button","","type","button","btn-type","secondary","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-alert",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"adapt-rx-select",2),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.field=e}),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"button",4),n["\u0275\u0275listener"]("click",function(){return t.apply()}),n["\u0275\u0275text"](6),n["\u0275\u0275pipe"](7,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"button",5),n["\u0275\u0275listener"]("click",function(){return t.context.dismiss()}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("config",t.alertConfig),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](3,10,"com.bmc.arsys.rx.client.view-components.record-grid.cards.filter-by-selection.dialog.field.label"))("options",t.options)("ngModel",t.field)("required",!0)("optionFormatter",t.optionFormatter)("popupClass","rx-filter-by-card-selection-field-dropdown"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("disabled",!t.field),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](7,12,"com.bmc.arsys.rx.client.common.apply.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptAlertComponent,m.AdaptRxSelectComponent,b.NgControlStatus,b.NgModel,b.RequiredValidator,m.AdaptButtonComponent],pipes:[p.TranslatePipe],encapsulation:2});class Jp{constructor(e,t,i,n,o){this.rxGuidService=e,this.rxFieldDefinitionService=t,this.rxRecordGridConfigUtilsService=i,this.rxRecordGridUtilsService=n,this.translateService=o}getGridConfig(e){const t=(0,u.defaults)(this.rxRecordGridConfigUtilsService.configDeepClone(e),{associatedRecordId:null,associatedRoleName:null,enableColumnSelection:!0,enableFiltering:!0,expandable:!1,useExternalFiltering:!0,enableRowSelection:jd.selectionTypes.multiple,filterExpression:null,filters:jd.defaultFilter,filterTagsLimit:3,recordIdField:a.RX_RECORD_DEFINITION.coreFieldIds.id.toString(),emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),emptyStateWithFilterLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),searchFieldPlaceholderText:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),styles:""});return t.recordDefinitionName||(e.getRecordDefinition||(0,o.throwError)(new v.RxError("getRecordDefinition function must be defined if recordDefinitionName is not set.")),e.getData||(0,o.throwError)(new v.RxError("getData function must be defined if recordDefinitionName is not set."))),t.enableFiltering=Boolean(t.enableFiltering),t.cardLayoutWidth=parseFloat(t.cardLayoutWidth)||null,t}getColumnsWithMetadata(e,t,i){const n=this.rxRecordGridConfigUtilsService.columnsDeepClone(t);this.allowedOpenViewActionExpressionsForHrefRegex=new RegExp(`^\\$\\{view\\.components\\.${e}\\.(clickableRow|recordDefinition)\\.|^\\$\\{view\\.inputParams\\.`);const s=n.map(e=>this.rxRecordGridUtilsService.getFieldDefinition(e.fieldId,i).pipe((0,r.map)(t=>{var n;let o=t.resourceType?this.getFieldDefinitionResourceTypeShortName(t.resourceType):null;o===a.RX_RECORD_DEFINITION.dataTypes.attachment.shortName&&(o=a.RX_RECORD_DEFINITION.dataTypes.character.shortName);const r=this.rxRecordGridConfigUtilsService.getBooleanValue(e.filterable)||(0,u.isUndefined)(e.filterable),s=(0,u.has)(e,"searchable")?this.rxRecordGridConfigUtilsService.getBooleanValue(e.searchable):r&&this.rxRecordGridUtilsService.isSearchable(t,i);return Object.assign(Object.assign({},e),{clickable:this.rxRecordGridConfigUtilsService.getBooleanValue(e.clickable),filterable:r,sortable:this.rxRecordGridConfigUtilsService.parseConfigString(e.sortable)||(0,u.isUndefined)(e.sortable),visible:this.rxRecordGridConfigUtilsService.getBooleanValue(e.visible)||(0,u.isUndefined)(e.visible),searchable:s,fieldDefinition:t,filterType:o,clickableWithHref:this.isColumnClickableWithHref(e),title:null===(n=e.title)||void 0===n?void 0:n.trim(),fallbackTitle:`[${t.name}]`})})));return(0,o.forkJoin)(s)}getSelectionFieldOptionLabelsByFieldId(e,t){return(0,u.reduce)(e,(e,i)=>{const n=t.fieldDefinitionsById[i.fieldId];return n.resourceType===a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType&&(e[i.fieldId]=n.optionLabelsById),e},{})}getFieldDefinitionResourceTypeShortName(e){return e.split(".").pop().replace(/fieldDefinition/i,"")}isColumnClickableWithHref(e){let t=!1;return this.rxRecordGridConfigUtilsService.getBooleanValue(e.clickable)&&(t=e.actions.every(e=>(e.name===c.RX_VIEW_ACTION.viewActionNames.launchUrl||e.name===c.RX_VIEW_ACTION.viewActionNames.openView&&e.presentation.launchBehavior===c.OpenViewActionLaunchBehavior.SameWindow&&e.presentation.type===c.OpenViewActionType.FullWidth&&this.canViewParamsBeEvaluatedForHref(e.viewParams))&&this.canExpressionBeEvaluatedForHref(e.$condition$))),t}canViewParamsBeEvaluatedForHref(e){return(0,u.every)(e,e=>this.canExpressionBeEvaluatedForHref(e))}canExpressionBeEvaluatedForHref(e){return(0,u.every)(null==e?void 0:e.match(/\$\{[^{]*\}/g),e=>this.allowedOpenViewActionExpressionsForHrefRegex.test(e))}}Jp.\u0275fac=function(e){return new(e||Jp)(n["\u0275\u0275inject"](v.RxGuidService),n["\u0275\u0275inject"](a.RxFieldDefinitionService),n["\u0275\u0275inject"]($d),n["\u0275\u0275inject"](Pd),n["\u0275\u0275inject"](p.TranslateService))},Jp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Jp,factory:Jp.\u0275fac,providedIn:"root"});class Zp{constructor(e){this.rxRecordInstanceDataPageService=e,this.cache={}}getSharedFilterPresets(e){if(!this.cache[e]){const t=this.getQueryParams(e);return this.rxRecordInstanceDataPageService.post({params:t}).pipe((0,r.map)(t=>this.cache[e]=(0,u.map)(t.data,e=>({id:e[a.RX_RECORD_DEFINITION.coreFieldIds.id],name:e[jd.sharedFilterPresets.fields.name],filters:[{filterOptionId:jd.externalPresetFilterOptionId,value:e[a.RX_RECORD_DEFINITION.coreFieldIds.id]}],isCreatedByOtherUsers:!0,filterExpression:e[jd.sharedFilterPresets.fields.filterExpression],isDefault:e[jd.sharedFilterPresets.fields.isDefault]}))))}return(0,o.of)(this.cache[e])}getQueryParams(e){const t=`('${jd.sharedFilterPresets.fields.recordGridGuid}'="${e}")`,i=[a.RX_RECORD_DEFINITION.coreFieldIds.id,jd.sharedFilterPresets.fields.name,jd.sharedFilterPresets.fields.filterExpression,jd.sharedFilterPresets.fields.isDefault].join(","),n=[jd.sharedFilterPresets.fields.sortOrder,jd.sharedFilterPresets.fields.name].join(",");return{pageSize:-1,startIndex:0,queryExpression:t,propertySelection:i,shouldIncludeTotalSize:!1,recorddefinition:jd.sharedFilterPresets.recordDefinitionName,sortBy:n}}}Zp.\u0275fac=function(e){return new(e||Zp)(n["\u0275\u0275inject"](a.RxRecordInstanceDataPageService))},Zp.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zp,factory:Zp.\u0275fac});class eu{constructor(e,t,i,n,o){this.recordGridConfigUtilsService=e,this.rxUserPreferencesService=t,this.rxRecordGridFilterService=i,this.rxRecordGridFilterHelperService=n,this.rxObjectUtilsService=o,this.initialPreferences={columns:[],filterPresets:[],filters:null,visibleCardFieldIds:[],appliedExternalFilterPresetGuid:null,viewPresets:{}},this.preferences=Object.assign({},this.initialPreferences)}saveUserPreferences(e,t,i){t.cardLayoutColumns?this.preferences.visibleCardFieldIds=this.getVisibleCardFieldIds(t):this.preferences.columns=this.getColumnsPreferences(t),this.preferences.filterPresets=i.advancedFiltering.savedFilters.filter(e=>!e.isCreatedByOtherUsers).map(e=>this.getPreferencesFilterPresets(e,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs));const n=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(i.advancedFiltering.selectedFilters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs);this.preferences.filters=n;const o=i.advancedFiltering.appliedSharedFilterPreset;if(this.preferences.appliedExternalFilterPresetGuid=o&&o.id,this.selectedViewPresetGuid){const e=this.preferences.viewPresets[this.selectedViewPresetGuid],i={viewPresetGuid:this.selectedViewPresetGuid,columns:this.getColumnsPreferences(t),filters:(0,u.isEmpty)(n)?null:n};(0,u.isEqual)(e.initial,i)?this.discardViewPresetChanges(this.selectedViewPresetGuid):e.edited=i}this.save(e,this.preferences)}get(e){return this.preferences=Object.assign({},this.initialPreferences),this.rxUserPreferencesService.getUiComponentPreferences(e).pipe((0,r.map)(e=>(0,u.assign)(this.preferences,e)))}getAppliedSharedFilterPresetGuid(){return this.preferences.appliedExternalFilterPresetGuid}applyUserPreferencesForColumns(e,t,i){this.reviseColumnPreferences(this.preferences.columns,e)&&this.save(i,this.preferences);let n=this.getColumnSortMeta(this.preferences.columns);this.sortColumnsConfigs(e.columns),this.setColumnsWidths(e.columns,this.preferences.columns,e.columnResizeMode),n=(0,u.filter)(n,t=>(0,u.some)(e.columns,e=>e.field===t.field)),this.preferences.columns.length&&(e.multiSortMeta=n),e.cardLayoutColumns?this.setCardFieldsVisibility(e.columns):this.setColumnsVisibility(e.columns,t)}reviseColumnPreferences(e,{columns:t}){let i=!1;if(e.length){const n=(0,u.map)(t,"field"),o=(0,u.remove)(e,({fieldId:e})=>!n.includes(e));let r=o.some(({sort:e})=>Boolean(e));const a=e.length,s=[];if(t.forEach((t,i)=>{var n;const o=(0,u.find)(e,{fieldId:t.field});o?(null!==(n=o.width)&&void 0!==n||(o.width=t.width),t.sortable?s.push(o):o.sort&&(r=!0)):e.splice(i,0,{fieldId:t.field,index:i,visible:!t.hidden,width:t.width})}),r){const t=this.getColumnSortMeta(s);this.updateColumnSortPreferences(e,t)}i=!(0,u.isEmpty)(o)||a<e.length||r}return i}applyUserPreferences(e,t,i,n){var a,s,l,c;let d;if(i.viewPresetSelector||this.applyUserPreferencesForColumns(e,t,i.guid),null==i?void 0:i.enableFiltering){let o=!1;this.preferences.filterPresets.forEach(e=>{var i,n,r,a;const s=null===(n=null===(i=e.filterData)||void 0===i?void 0:i.and)||void 0===n?void 0:n.length;e.filterData=this.rxRecordGridFilterService.getFilterForAvailableColumns(e.filterData,t.filter(e=>e.filterable)),s!==(null===(a=null===(r=e.filterData)||void 0===r?void 0:r.and)||void 0===a?void 0:a.length)&&(o=!0)}),this.preferences.filterPresets=this.preferences.filterPresets.filter(e=>!(0,u.isEmpty)(e.filterData));const p=(0,u.cloneDeep)(null===(a=this.preferences.filters)||void 0===a?void 0:a.and);this.preferences.filters=this.rxRecordGridFilterService.getFilterForAvailableColumns(this.preferences.filters,t.filter(e=>e.filterable)),!o&&(null===(l=null===(s=this.preferences.filters)||void 0===s?void 0:s.and)||void 0===l?void 0:l.length)===(null==p?void 0:p.length)&&(0,u.isEqual)(p,null===(c=this.preferences.filters)||void 0===c?void 0:c.and)||this.save(i.guid,this.preferences),i.advancedFiltering.savedFilters=this.getAdvancedFilterPresets(this.preferences.filterPresets,!1),i.predefinedFilterPresets=i.predefinedFilterPresets.filter(e=>!(0,u.isNull)(e.filters));const m=i.predefinedFilterPresets.map(e=>{var t;return{title:e.title,guid:e.guid,filterData:this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,this.rxRecordGridFilterService.deserializeNamedOptions(null!==(t=e.recordGridFilters)&&void 0!==t?t:[]))}}).filter(e=>e.filterData),h=this.getAdvancedFilterPresets(m,!0);if(i.advancedFiltering.savedFilters.push(...h),n){if(this.getAppliedSharedFilterPresetGuid()){const e=(0,u.find)(n,{id:this.getAppliedSharedFilterPresetGuid()});i.advancedFiltering.appliedSharedFilterPreset=e,i.advancedFiltering.activeSavedFilter=e}i.advancedFiltering.savedFilters.push(...n)}const f=(0,u.isString)(i.defaultFilterPreset)?(0,u.find)(h,e=>e.id===i.defaultFilterPreset):i.defaultFilterPreset,g=(0,u.find)(n,e=>e.isDefault);if((0,u.isEmpty)(this.preferences.filters)){if(this.rxObjectUtilsService.isEmptyObject(this.preferences.filters)&&!i.advancedFiltering.appliedSharedFilterPreset)g&&!f&&(i.advancedFiltering.appliedSharedFilterPreset=g,i.advancedFiltering.activeSavedFilter=g);else if((0,u.isNull)(this.preferences.filters)&&!i.advancedFiltering.appliedSharedFilterPreset)if(f){const t=(0,u.isString)(i.defaultFilterPreset)?f.filterData:f;d=this.rxRecordGridFilterService.getAdvancedFilterData(t,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(t=>{i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(t,e.columns),(0,u.isString)(i.defaultFilterPreset)&&(f.filters=i.advancedFiltering.selectedFilters,i.advancedFiltering.activeSavedFilter=f)}))}else g&&(i.advancedFiltering.appliedSharedFilterPreset=g,i.advancedFiltering.activeSavedFilter=g)}else d=this.rxRecordGridFilterService.getAdvancedFilterData(this.preferences.filters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(t=>{const n=this.getFilterForAvailableNamedFilterOptions(t,i.namedFilterOptions);i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(n,e.columns.filter(e=>e.filterable)),this.preferences.filters=this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(i.advancedFiltering.selectedFilters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs),i.advancedFiltering.appliedSharedFilterPreset&&this.addExternalPresetToSelectedFilters(i)}));i.advancedFiltering.appliedSharedFilterPreset&&this.addExternalPresetToSelectedFilters(i)}return d||(0,o.of)(null)}applySharedViewPreset(e,t,i,n){return this.preferences.viewPresets[i]?this.preferences.viewPresets[i].initial=Object.assign(Object.assign({},n),{viewPresetGuid:i}):this.preferences.viewPresets[i]={initial:Object.assign(Object.assign({},n),{viewPresetGuid:i})},this.applyViewPresetInner(i,t,e)}applyViewPreset(e,t,i){const n=e.viewPresets.find(e=>e.viewPresetGuid===i);if(n&&!(0,u.has)(this.preferences.viewPresets,[i,"edited"])){const t=this.createSystemViewPresetPreferences(n,e.columnsWithMetadata);this.preferences.viewPresets[i]={initial:t}}else if(!this.preferences.viewPresets[i]&&this.selectedViewPresetGuid){const e=this.preferences.viewPresets[this.selectedViewPresetGuid];this.preferences.viewPresets[i]={initial:Object.assign(Object.assign({},(0,u.cloneDeep)(e.edited||e.initial)),{viewPresetGuid:i})}}return this.applyViewPresetInner(i,t,e)}applyViewPresetInner(e,t,i){const n=this.preferences.viewPresets[e],a=(null==n?void 0:n.edited)||(null==n?void 0:n.initial);let s=(0,o.of)(null);return a&&(this.selectedViewPresetGuid=a.viewPresetGuid,this.updateColumnsOrder(t.columns,a.columns),this.updateColumnsVisibility(t.columns,a.columns),this.setColumnsWidths(t.columns,a.columns,t.columnResizeMode),this.updateGridSorting(a,t),s=this.rxRecordGridFilterService.getAdvancedFilterData(a.filters,i.recordDefinition.fieldDefinitionsById,i.advancedFiltering.recordGridFilterConfigs,i.recordDefinition,i.advancedFiltering.filterOptions,i.associationDescriptors).pipe((0,r.tap)(e=>{const n=this.getFilterForAvailableNamedFilterOptions(e,i.namedFilterOptions);i.advancedFiltering.selectedFilters=this.getFiltersForSelectedColumns(n,t.columns.filter(e=>e.filterable))}))),s}isCurrentViewPresetEdited(){var e;return Boolean(null===(e=this.preferences.viewPresets[this.selectedViewPresetGuid])||void 0===e?void 0:e.edited)}addExternalPresetToSelectedFilters(e){const t=(0,u.cloneDeep)(e.advancedFiltering.selectedFilters);t.push({filterOptionId:jd.externalPresetFilterOptionId,value:e.advancedFiltering.appliedSharedFilterPreset.id}),e.advancedFiltering.selectedFilters=t}createSystemViewPresetPreferences(e,t){const i=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(e.filters,e.recordGridFilters?this.rxRecordGridFilterService.deserializeNamedOptions(e.recordGridFilters):[]),n=e.columnViewPresets.sort((e,t)=>e.index-t.index).map((e,i)=>{var n,o;const r=(0,u.has)(e,"width")?e.width:null!==(o=null===(n=(0,u.find)(t,{fieldId:e.fieldId}))||void 0===n?void 0:n.width)&&void 0!==o?o:null,a=Object.assign(Object.assign({},(0,u.omit)(e,"sortable")),{index:i,width:r});return e.sortable&&(a.sort={priority:0,direction:e.sortable.direction}),a});return(0,u.cloneDeep)({columns:n,filters:i,viewPresetGuid:e.viewPresetGuid})}deleteViewPreset(e){delete this.preferences.viewPresets[e]}isExistingViewPreset(e){return(0,u.has)(this.preferences.viewPresets,e)}discardViewPresetChanges(e){var t;null===(t=this.preferences.viewPresets[e])||void 0===t||delete t.edited}updateGridSorting(e,t){let i=this.getColumnSortMeta(e.columns);i=(0,u.filter)(i,e=>(0,u.some)(t.columns,t=>t.sortable&&t.field===e.field)),t.multiSortMeta=i}getAdvancedFilterPresets(e,t){return e.map(e=>{const i={id:e.guid,name:e.title,filters:null,filterData:e.filterData,isCreatedByOtherUsers:t};return e.appliedSharedFilterPresetGuid&&(i.appliedSharedFilterPresetGuid=e.appliedSharedFilterPresetGuid,i.filters=[{filterOptionId:jd.externalPresetFilterOptionId,value:e.appliedSharedFilterPresetGuid}]),i}).sort((e,t)=>e.name.localeCompare(t.name))}getColumnsPreferences({columns:e,multiSortMeta:t}){const i=e.map(({field:e,hidden:t,width:i},n)=>({fieldId:e,index:n,visible:!t,width:i}));return this.updateColumnSortPreferences(i,t),i}getPreferencesFilterPresets(e,t,i){const n={guid:e.id,title:e.name,filterData:e.filters?this.rxRecordGridFilterService.getRecordGridFilterDataFromAdvancedFilter(e.filters,t,i):e.filterData};return e.appliedSharedFilterPresetGuid&&(n.appliedSharedFilterPresetGuid=e.appliedSharedFilterPresetGuid),n}getVisibleCardFieldIds({columns:e,multiSortMeta:t}){return this.updateColumnSortPreferences(this.preferences.columns,t),e.filter(e=>!e.hidden).map(e=>parseInt(e.field,10)||e.field)}updateColumnSortPreferences(e,t){t&&(e.forEach(e=>{delete e.sort}),t.forEach(({field:t,order:i},n)=>{const o=e.find(e=>e.fieldId===t);o&&(o.sort={priority:n,direction:this.recordGridConfigUtilsService.getColumnSortDirection(i)})}))}save(e,t){if(e){const i={preferences:JSON.stringify(t),componentTypeName:jd.type,version:jd.version,componentId:e};this.rxUserPreferencesService.setUiComponentPreferences(i,e).subscribe()}}sortColumnsConfigs(e){this.updateColumnsOrder(e,this.preferences.columns)}updateColumnsOrder(e,t){const i=(0,u.reduce)(e,(e,i,n)=>{const o=(0,u.find)(t,e=>e.fieldId===i.field);return e[i.field]=o?o.index:n,e},{});e.sort((e,t)=>i[e.field]-i[t.field])}setColumnsVisibility(e,t){const i=this.preferences.columns;(0,u.isEmpty)(i)?e.forEach(e=>{const i=(0,u.find)(t,t=>t.fieldId===e.field);e.hidden=!!i&&!i.visible}):this.updateColumnsVisibility(e,i)}updateColumnsVisibility(e,t){e.forEach(e=>{const i=(0,u.find)(t,t=>t.fieldId===e.field);i&&(e.hidden=!i.visible)})}setColumnsWidths(e,t,i){t.length&&e.forEach(e=>{const n=(0,u.find)(t,{fieldId:e.field});if(n){const t=(0,u.endsWith)(n.width,"px");i!==F.ResizeMode.Expand||t?(e.width=/[0-9]+$/.test(n.width)?`${n.width}%`:n.width,t&&parseInt(e.width)<45&&(e.minWidth=e.width)):(e.width=null,e.minWidth=null)}})}setCardFieldsVisibility(e){const t=this.preferences.visibleCardFieldIds;if((0,u.isEmpty)(t)){const t=5;let i=0;e.forEach(e=>{i>=t?e.hidden=!0:e.hidden||i++})}else e.forEach(e=>e.hidden=!(0,u.some)(t,t=>String(t)===e.field))}getColumnSortMeta(e){return(0,u.flow)(e=>(0,u.filter)(e,"sort"),e=>(0,u.sortBy)(e,"sort.priority"),e=>(0,u.map)(e,e=>({field:e.fieldId,order:this.recordGridConfigUtilsService.getColumnSortOrder(e.sort.direction)})))(e)}getFiltersForSelectedColumns(e,t){return e.filter(e=>(0,u.some)(t,{field:e.filterOptionId}))}getFilterForAvailableNamedFilterOptions(e,t){return e.map(e=>(e.value.namedOptions=(0,u.isEmpty)(t)?[]:e.value.namedOptions.filter(i=>(0,u.some)(t[Number(e.filterOptionId)],{guid:i})),e)).filter(e=>!rp.isEmptyWithRange(e.value))}saveViewPreset(e){const t=this.preferences.viewPresets[e];(null==t?void 0:t.edited)&&(t.initial=(0,u.cloneDeep)(t.edited),delete t.edited)}getSharedViewPresetData(){const e=this.preferences.viewPresets[this.selectedViewPresetGuid],t=e.edited||e.initial;return{columns:t.columns,filters:t.filters}}}eu.\u0275fac=function(e){return new(e||eu)(n["\u0275\u0275inject"]($d),n["\u0275\u0275inject"](s.RxUserPreferencesService),n["\u0275\u0275inject"](lp),n["\u0275\u0275inject"](sp),n["\u0275\u0275inject"](v.RxObjectUtilsService))},eu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:eu,factory:eu.\u0275fac}),function(e){e.Multiple="multiple",e.Single="single"}(op||(op={}));class tu{constructor(e,t){this.modalService=e,this.translateService=t,this.sort=new n.EventEmitter}onSortMenuItemClick(){this.multiSortMeta=this.adaptTable.multiSortMeta||[],this.openDialog({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.dialog.title"),content:this.cardLayoutSortModalTemplate}).catch(()=>{})}getSortableColumns(){return this.columns.filter(e=>this.adaptTable.isSortableColumn(e)).sort((e,t)=>e.header.localeCompare(t.header))}onSortAscClick(e){this.changeSort(e,F.SortOrder.Asc)}onSortDescClick(e){this.changeSort(e,F.SortOrder.Desc)}changeSort(e,t){const i=this.getColumnSortIndex(e),n=this.multiSortMeta[i];n?n.order===t?this.multiSortMeta.splice(i,1):n.order=t:this.multiSortMeta.push({field:e.field,order:t})}getColumnSort(e){return this.multiSortMeta[this.getColumnSortIndex(e)]}getColumnSortIndex(e){return this.multiSortMeta.findIndex(t=>t.field===e.field)}hasColumnSortOrder(e,t){const i=this.getColumnSort(e);return!!i&&i.order===t}getSortAscBtnClass(e){return this.getSortBtnClass(e,F.SortOrder.Asc)}getSortDescBtnClass(e){return this.getSortBtnClass(e,F.SortOrder.Desc)}getSortBtnClass(e,t){const i=this.hasColumnSortOrder(e,t);return{"btn-success":i,"btn-secondary":!i}}clearAllSorting(){this.multiSortMeta=[]}applySorting(){this.sort.emit(this.multiSortMeta)}getCurrentSortingSummary(){const e={[F.SortOrder.Asc]:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.sort.ascending"),[F.SortOrder.Desc]:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.sort-by.sort.descending")};return this.multiSortMeta.map((t,i)=>`${i+1}. ${this.columns.find(e=>e.field===t.field).header} (${e[t.order]})`).join("\n")}}tu.\u0275fac=function(e){return new(e||tu)(n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](p.TranslateService))},tu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:tu,selectors:[["rx-card-layout-cell-header"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](wr,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cardLayoutSortModalTemplate=e.first)}},inputs:{title:"title",columns:"columns",adaptTable:"adaptTable",openDialog:"openDialog"},outputs:{sort:"sort"},decls:9,vars:7,consts:[["adaptDropdown","",1,"dropdown","header-cell-menu-btn",3,"appendToBody","restoreFocusAfterClose"],["id","card-column-menu-dropdown-toggle","type","button","adaptDropdownToggle","",1,"d-icon-ellipsis","adapt-table-sort-menu__kebab","py-2","btn","btn-link",3,"showCaret"],["aria-labelledby","card-column-menu-dropdown-toggle","adaptDropdownMenu","","tabindex","0",1,"dropdown-menu"],["type","button",1,"dropdown-item",3,"click"],["cardLayoutSortModalTemplate",""],[1,"modal-body","rx-record-grid-sort-by-dialog"],[1,"rx-card-fields"],[1,"rx-card-fields__headers"],[1,"rx-card-fields__headers-field"],[1,"rx-card-fields__headers-order"],["class","rx-card-field",4,"ngFor","ngForOf"],["rows","4","disabled","","title","summary",1,"form-control","rx-sort-summary",3,"value","placeholder"],[1,"modal-footer"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"rx-card-field"],[1,"rx-card-field__name"],[1,"rx-card-field__order"],[1,"btn-group"],[1,"btn","btn-xs",3,"ngClass","click"],[1,"d-icon-arrow_down"],[1,"d-icon-arrow_up"]],template:function(e,t){1&e&&(n["\u0275\u0275text"](0),n["\u0275\u0275elementStart"](1,"div",0),n["\u0275\u0275element"](2,"button",1),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275elementStart"](4,"button",3),n["\u0275\u0275listener"]("click",function(){return t.onSortMenuItemClick()}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](7,_r,23,20,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275textInterpolate1"]("",t.title," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("appendToBody",!0)("restoreFocusAfterClose",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("showCaret",!1),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,5,"com.bmc.arsys.rx.client.view-components.record-grid.card-column-menu.items.sort-by.label")," "))},directives:[m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,h.NgForOf,h.NgClass],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.header-cell-menu-btn[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields[_ngcontent-%COMP%]{border:1px solid #d6d7d8;display:flex;flex-direction:column;height:370px;overflow-y:auto}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers[_ngcontent-%COMP%]{font-weight:var(--font-weight-bold);display:flex;height:35px;align-items:center;border-bottom:1px solid #d6d7d8;color:#666;flex-shrink:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field[_ngcontent-%COMP%]{display:flex;border-bottom:1px solid #d6d7d8;align-items:center;height:35px;flex-shrink:0}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field[_ngcontent-%COMP%]:last-child{border-bottom:none}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field__name[_ngcontent-%COMP%]{flex:3;padding-left:10px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-field__order[_ngcontent-%COMP%]{flex:1;padding-left:5px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers-field[_ngcontent-%COMP%]{flex:3;padding-left:10px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-card-fields__headers-order[_ngcontent-%COMP%]{flex:1;padding-left:5px}.rx-record-grid-sort-by-dialog[_ngcontent-%COMP%]   .rx-sort-summary[_ngcontent-%COMP%]{margin-top:15px;resize:none}']});class iu{constructor(e,t,i){this.adaptTable=e,this.ngZone=t,this.renderer=i,this.changedCardLayout=new n.EventEmitter,this.hasCardLayout=!1,this._hasViewInitialized=!1}set cardLayoutWidth(e){if(this._cardLayoutWidth=e,this._hasViewInitialized){const{offsetWidth:e}=this.renderer.selectRootElement(this.adaptTable.el.nativeElement,!0);this.changeTableCardLayout(e)}}get cardLayoutWidth(){return this._cardLayoutWidth}ngAfterViewInit(){setTimeout(()=>{const e=this.renderer.selectRootElement(this.recordGridElementRef.nativeElement,!0);this.changeTableCardLayout(e.offsetWidth)}),this.ngZone.runOutsideAngular(()=>{this.resizeSensor=new g.ResizeSensor(this.recordGridElementRef.nativeElement,e=>{this.ngZone.run(()=>{this.changeTableCardLayout(e.width)})})}),this._hasViewInitialized=!0}changeTableCardLayout(e){const t=e<=this.cardLayoutWidth;if(this.hasCardLayout===t||!e)return;this.hasCardLayout=t;const i=this.adaptTable;this.scrollToFirstVisibleRow(),t?this.renderer.addClass(i.el.nativeElement,"rx-table-card-layout"):this.renderer.removeClass(i.el.nativeElement,"rx-table-card-layout"),i.tableService.onValueChange(i.value),this.changedCardLayout.emit({cardLayoutColumns:t?this.getCardLayoutColumns():null})}getCardLayoutColumns(){return[{field:"fields",header:"Fields",filterable:!1,sortable:!1,headerTitleTemplate:this.cardLayoutFieldsHeaderTemplate,width:"35%",dataCellClass:this.getDataCellClass.bind(this),cellTemplate:this.cardLayoutFieldsDataCellTemplate,testId:"fields-column"},{field:"fields",header:"Values",filterable:!1,sortable:!1,headerTitleTemplate:this.cardLayoutValuesHeaderTemplate,width:"65%",dataCellClass:this.getDataCellClass.bind(this),cellTemplate:this.cardLayoutValuesDataCellTemplate,testId:"values-column"}]}getDataCellClass(){return`${this.recordGridGetDataCellClass()} rx-card-layout-data-cell`}scrollToFirstVisibleRow(){const e=this.adaptTable;if(e.scrollable){const t=this.renderer.selectRootElement(e.el.nativeElement,!0).querySelector(".ui-table-scrollable-body"),i=t&&t.scrollTop;if(i){const n=e.dataRows.find(e=>{const t=e.element.nativeElement;return t.offsetTop+t.offsetHeight>=i});if(n){let e=n.element.nativeElement;const o=(i-e.offsetTop)/e.offsetHeight;this.ngZone.onStable.pipe((0,r.take)(1)).subscribe(()=>{e=n.element.nativeElement,t.scrollTop=e.offsetTop+e.offsetHeight*o})}}}}ngOnDestroy(){this.resizeSensor.detach()}}iu.\u0275fac=function(e){return new(e||iu)(n["\u0275\u0275directiveInject"](F.AdaptTableComponent,1),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.Renderer2))},iu.\u0275dir=n["\u0275\u0275defineDirective"]({type:iu,selectors:[["","rxCardLayout",""]],inputs:{cardLayoutFieldsHeaderTemplate:"cardLayoutFieldsHeaderTemplate",cardLayoutValuesHeaderTemplate:"cardLayoutValuesHeaderTemplate",cardLayoutFieldsDataCellTemplate:"cardLayoutFieldsDataCellTemplate",cardLayoutValuesDataCellTemplate:"cardLayoutValuesDataCellTemplate",recordGridGetDataCellClass:["cardLayoutGetDataCellClass","recordGridGetDataCellClass"],recordGridElementRef:["cardLayoutRecordGridElementRef","recordGridElementRef"],cardLayoutWidth:"cardLayoutWidth"},outputs:{changedCardLayout:"changedCardLayout"}});class nu{constructor(e,t){this.rxExpressionEvaluatorService=e,this.rxObjectUtilsService=t,this.evaluationData={}}ngOnInit(){this.updateCellClasses()}ngOnChanges(e){e.rxCellDisplayPropsDataItem.firstChange||e.rxCellDisplayPropsDataItem.currentValue===e.rxCellDisplayPropsDataItem.previousValue||this.updateCellClasses()}getActiveProps(e){return e.find(e=>this.rxExpressionEvaluatorService.tryEvaluate(e.fieldValueCondition,this.evaluationData))||null}getCellCssClasses(e){const t=[];return e.displayAsBadge||(e.bold&&t.push("font-weight-bold"),e.italic&&t.push("font-italic"),e.fontSize===Vd.Small?t.push("small"):e.fontSize===Vd.Large&&t.push("large"),e.textColor&&t.push(zd[e.textColor]),e.backgroundColor&&t.push(Ud[e.backgroundColor]),e.icon&&(e.iconPosition===Bd.ReplaceText?t.push(`d-icon-${e.icon}`):t.push(`d-icon-${e.iconPosition}-${e.icon}`))),t}getSpanCssClasses(e){return e.displayAsBadge?["badge",`badge-${e.badgeColor}`]:e.iconPosition===Bd.ReplaceText?["hidden"]:[]}updateCellClasses(){var e;if(null===(e=this.rxCellDisplayProps)||void 0===e?void 0:e.length){let e="";const t=Object.assign(Object.assign({},this.rxCellDisplayPropsDataItem),this.rxObjectUtilsService.expandProperties(this.rxCellDisplayPropsDataItem));(0,u.set)(this.evaluationData,"view.components.grid.clickableRow",t);const i=this.getActiveProps(this.rxCellDisplayProps);if(i){e=this.getCellCssClasses(i).join(" ")}if(this.rxCellDisplayPropsBadgeElem){const e=i?this.getSpanCssClasses(i):[];this.rxCellDisplayPropsBadgeElem.classList.value="",this.rxCellDisplayPropsBadgeElem.classList.add(...e)}this.cssClasses=e}}}nu.\u0275fac=function(e){return new(e||nu)(n["\u0275\u0275directiveInject"](c.RxExpressionEvaluatorService),n["\u0275\u0275directiveInject"](v.RxObjectUtilsService))},nu.\u0275dir=n["\u0275\u0275defineDirective"]({type:nu,selectors:[["","rxCellDisplayProps",""]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275classMap"](t.cssClasses)},inputs:{rxCellDisplayProps:"rxCellDisplayProps",rxCellDisplayPropsBadgeElem:"rxCellDisplayPropsBadgeElem",rxCellDisplayPropsDataItem:"rxCellDisplayPropsDataItem"},features:[n["\u0275\u0275NgOnChangesFeature"]]});class ou extends f.BaseViewComponent{constructor(e,t,i,r,a,s,l,c,d,p,m,h,f,g,v,x,y,b,C,S,w,I,_,D,R,A,T,E,M,O,k,j,P,N,V,L){super(),this.adaptDeviceDetectionService=e,this.adaptModalService=t,this.changeDetector=i,this.datePipe=r,this.decimalPipe=a,this.ngZone=s,this.rxAssociationInstanceDataPageService=l,this.rxBooleanPipe=c,this.rxCurrentUserService=d,this.rxExpressionEvaluatorService=p,this.rxFieldDefinitionService=m,this.rxGridConfiguratorService=h,this.rxGuidService=f,this.rxLogService=g,this.rxNotificationService=v,this.rxObjectUtilsService=x,this.rxRecordDefinitionCacheService=y,this.rxRecordDefinitionService=b,this.rxRecordGridAdvancedFilteringService=C,this.rxRecordGridConfigUtilsService=S,this.rxRecordGridFilterConfigService=w,this.rxRecordGridFilterService=I,this.rxRecordGridFilterHelperService=_,this.rxRecordGridSharedFilterPresetsCacheService=D,this.rxRecordGridUserPreferencesService=R,this.rxRecordGridUtilsService=A,this.rxRecordInstanceDataPageService=T,this.rxRecordInstanceService=E,this.rxViewActionService=M,this.rxViewActionUtilsService=O,this.translateService=k,this.elementRef=j,this.rxStringService=P,this.rxGlobalEventsService=N,this.pageComponent=V,this.runtimeViewCanvasItemComponent=L,this.dataLoaded=new n.EventEmitter,this.isExportInProgress=!1,this.lastPropertySelection=[],this.adaptTableConfig={data:[],columns:[],columnResizeMode:F.ResizeMode.Fit,cardLayoutColumns:null,bordered:!0,scrollable:!0,striped:!1,toolbarConfig:{counter:!1,quickFilter:!0,leftCustomSection:!0,leftCustomSectionTemplate:null,filter:!0,filterTemplate:null,filterResults:!1,filterResultsTemplate:null,rightCustomSection:!1,rightCustomSectionTemplate:null,visibleColumnsMenu:!0,visibleColumnsMenuTemplate:null,quickFilterTriggerable:!0,export:{exportTypes:[{type:F.ExportType.CSV}],showExportForSelected:!0}},filterable:!1,selectedItems:[],filters:{},rows:50,first:0,multiSortMeta:null,rowSelectionMode:null,isLoadingData:!1,totalRecords:null,primaryKey:null,isLoadingMoreData:!1,texts:null,expandedGroupsKeys:{},virtualScroll:!0,virtualRowHeight:jd.defaultRowHeight},this.actionButtons=null,this.adaptTableHeaderSelectionMode=F.AdaptTableHeaderSelectionMode.Chunk,this.api={applyViewPreset:this.applyViewPreset.bind(this),shareViewPreset:this.shareViewPreset.bind(this),refresh:this.refresh.bind(this),setFilter:this.setFilter.bind(this),deleteViewPreset:this.deleteViewPreset.bind(this),discardViewPresetChanges:this.discardViewPresetChanges.bind(this),getColumns:this.getColumns.bind(this),getRecordDefinitionName:this.getRecordDefinitionName.bind(this),getSelectedRows:this.getSelectedRows.bind(this),getFirstSelectedRow:this.getFirstSelectedRow.bind(this),getSelectedRowCount:this.getSelectedRowCount.bind(this),setSelectedRows:this.onRowsSelectionChange.bind(this),getVisibleRows:this.getVisibleRows.bind(this),saveViewPreset:this.saveViewPreset.bind(this),applyFilters:this.applyFilters.bind(this)},this.filteredVisibleColumns=[],this.getDataCellClassBind=this.getDataCellClass.bind(this),this.gridEvents={cellClick:(e,t)=>{const i=this.state.columnsWithMetadata.find(e=>e.fieldId===t);this.addSelectionFieldOptionNames(e),e=this.expandRowProperties(e),this.state.lastActionRow=e,this.notifyPropertyChanged("clickableRow",e,null),this.executeViewActions(i.guid,(0,u.get)(i,"actions"),e).catch(u.noop)},cellKeyDown:(e,t,i)=>{(0,u.includes)(["Space","Enter"],e.code)&&(this.gridEvents.cellClick(t,i),e.preventDefault())}},this.isFilterBySelectionButtonVisible=!1,this.isUserAllowedToDeleteRecords=!1,this.openSortByDialog=this.openSortByDialogFn.bind(this),this.rowActionButtons=null,this.rowSelectionChanged=new o.BehaviorSubject([]),this.selectedFilteredRowsCount=0,this.shouldDisplayActionButtons=!1,this.showCellTooltip=!1,this.sortedColumnsByTitle=[],this.state={actionButtons:[],rowActionButtons:[],lastActionRow:null,associatedRecordId:null,associatedRoleName:null,associatedRecordNodeSide:null,associationDefinitionName:null,bordered:!0,cardLayoutWidth:null,columns:[],columnsWithMetadata:[],defaultFilterPreset:null,enableFiltering:!1,requiredFilters:0,getDataForHiddenColumns:!0,enableFilterPresets:!0,enableRowSelection:op.Multiple,expandable:!1,filterExpression:null,filters:null,filterTagsLimit:null,getData:null,recordDefinition:null,associationDescriptors:[],recordDefinitionName:null,recordGridFilters:[],recordIdField:null,showDataForAllLocales:null,striped:!1,styles:null,initialFilters:null,expandGroups:!1,advancedFiltering:{activeSavedFilter:null,savedFilters:[],filterOptions:[],selectedFilters:[],recordGridFilterConfigs:null,filterTexts:null,hasLoadedSharedFilterPresets:!1,isLoading:!1,appliedSharedFilterPreset:null,toolbarTags:[],pendingSelectedFilters:[],selectedCardValues:{}},emptyStateLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),emptyStateWithFilterLabelText:this.translateService.instant("com.bmc.arsys.rx.client.empty-state.no-items-to-display.label"),searchFieldPlaceholderText:this.translateService.instant("com.bmc.arsys.rx.client.common.search.label"),enableColumnSelection:!0,namedFilterOptions:null,predefinedFilterPresets:[],viewPresetSelector:null,virtualScroll:!0},this.visibleColumns=[],this.cellValueFormatters={},this.clickableWithHrefColumnActions={},this.dataLoadContextSubject=new o.Subject,this.popovers=[],this.userPreferencesChanged$=new o.Subject,this.exportSelectedRowText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-row.label"),this.exportSelectedRowsText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-rows.label"),this.pendingFiltersToApply=null,this.getNamedFilterOptions=this.getNamedFilterOptions.bind(this),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$)}onClickOutside(e){!(e.target.closest(".ui-table-tbody")||e.target.closest(".popover.table-filtering")||e.target.closest(".rx-filter-by-card-selection-dialog")||e.target.closest(".rx-filter-by-card-selection-field-dropdown"))&&this.clearSelectedCells()}get isTotalRecordCountKnown(){return!(0,u.isNull)(this.adaptTableConfig.totalRecords)}ngOnInit(){super.ngOnInit(),this.isProgrammaticUse=Boolean(this.pageComponent)||!this.runtimeViewCanvasItemComponent,this.isProgrammaticUse&&(this.adaptTableConfig.toolbarConfig.export=null),this.notifyPropertyChanged("api",this.api),this.initializationCompleted$=this.config.pipe((0,r.take)(1),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.tap)(e=>{Object.assign(this.state,e)}),(0,r.switchMap)(()=>{this.state.guid&&(this.guid=this.state.guid);const e=[this.initRecordDefinitions()];return this.guid&&(this.userPreferencesChanged$.pipe((0,r.debounceTime)(1e3),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.rxRecordGridUserPreferencesService.saveUserPreferences(this.guid,this.adaptTableConfig,this.state),this.checkIfViewPresetEdited()}),e.push(this.rxRecordGridUserPreferencesService.get(this.guid))),(0,o.forkJoin)(e)}),(0,r.switchMap)(()=>this.initGrid()),(0,r.shareReplay)(1)),this.initializationCompleted$.subscribe();const e=(0,o.combineLatest)([this.initializationCompleted$,this.dataLoaded,this.config.pipe((0,r.skip)(1),(0,r.debounceTime)(250),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.takeUntil)(this.destroyed$))]).pipe((0,r.map)(([e,t,i])=>i));e.pipe((0,r.map)(e=>(0,u.differenceBy)(e.columns,this.state.columns,"additionalQueryCriteria")),(0,r.filter)(e=>e.length>0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{e.forEach(e=>{this.state.advancedFiltering.filterOptions.find(t=>t.id===e.fieldId).data.additionalQueryCriteria=e.additionalQueryCriteria;const t=this.state.columns.findIndex(t=>t.fieldId===e.fieldId);this.state.columns[t].additionalQueryCriteria=e.additionalQueryCriteria})});const t=new Map;e.pipe((0,r.debounceTime)(10),(0,r.map)(e=>this.getNamedFilterOptionsState(e.columns)),(0,r.withLatestFrom)(this.dataLoadContextSubject),(0,r.filter)(([e,t])=>!(0,u.isEqual)(e,t.namedFilterOptions)),(0,r.tap)(([e])=>{this.state.namedFilterOptions=e}),(0,r.map)(([e])=>Object.values(e).reduce((e,t)=>e.concat(t),[])),(0,r.map)(e=>{const i=this.state.advancedFiltering.selectedFilters.reduce((e,t)=>e.concat(t.value.namedOptions),[]);return e.some(e=>{const n=Boolean(t.get(e.guid));n||t.set(e.guid,e);const o=e.filterExpression!==t.get(e.guid).filterExpression,r=i.includes(e.guid)&&(o||!n);return o&&t.set(e.guid,e),r})}),(0,r.filter)(e=>e),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.loadRowData()}),e.pipe((0,r.debounceTime)(10),(0,r.withLatestFrom)(this.dataLoadContextSubject),(0,r.filter)(([e,t])=>e.associatedRecordId!==t.associatedRecordId||e.associatedRoleName!==t.associatedRoleName||e.filterExpression!==t.filterExpression),(0,r.tap)(([e])=>{Object.assign(this.state,e)})).subscribe(()=>{this.loadRowData()}),this.config.pipe((0,r.map)(e=>e.viewPresetSelector),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state.viewPresetSelector=e}),this.isProgrammaticUse&&(e.pipe((0,r.map)(e=>({actionButtons:e.actionButtons,rowActionButtons:e.rowActionButtons})),(0,r.distinctUntilChanged)(u.isEqual)).subscribe(({actionButtons:e,rowActionButtons:t})=>{this.state.actionButtons=e,this.actionButtons=this.getProgrammaticActionButtons(this.state.actionButtons),this.state.rowActionButtons=t,this.rowActionButtons=this.getProgrammaticActionButtons(this.state.rowActionButtons)}),e.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.map)(e=>this.rxGridConfiguratorService.getGridConfig(e)),(0,r.tap)(e=>{Object.assign(this.state,e),this.state.advancedFiltering.selectedFilters=[],this.adaptTableConfig.multiSortMeta=[]}),(0,r.switchMap)(()=>{this.state.guid&&(this.guid=this.state.guid);const e=[this.initRecordDefinitions()];return this.guid&&e.push(this.rxRecordGridUserPreferencesService.get(this.guid)),(0,o.forkJoin)(e)}),(0,r.switchMap)(()=>this.initGrid())).subscribe()),this.adaptTableConfig.virtualScroll=this.state.virtualScroll;const i=this.adaptTableConfig.toolbarConfig;i.visibleColumnsMenu=this.state.enableColumnSelection,i.visibleColumnsMenuTemplate=this.visibleColumnsMenuTemplate,i.rightCustomSectionTemplate=this.rightCustomSectionTemplate,i.leftCustomSectionTemplate=this.leftCustomSectionTemplate,i.filterTemplate=this.filterTemplate,this.notifyPropertyChanged("totalRowCount",0),this.notifyPropertyChanged("selectedRows",[]),this.notifyPropertyChanged("selectedRowCount",0),this.notifyPropertyChanged("fieldValuesByFieldId",{}),this.notifyPropertyChanged("firstSelectedRow",null),this.notifyPropertyChanged("queryExpression",""),this.notifyPropertyChanged("lastRefreshTime",""),this.initAdvancedFilterTexts(),this.initCustomTexts(),this.rxGlobalEventsService.viewActionsCompleted$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>{(0,u.isEmpty)(this.pendingFiltersToApply)||this.onAdvancedFiltersChange(this.pendingFiltersToApply),this.pendingFiltersToApply=null})}ngAfterViewInit(){this.actionButtonComponents.changes.pipe((0,r.switchMap)(e=>(0,o.merge)(...e.map(e=>(0,o.of)({guid:e.guid,propertyName:"api",newValue:e.api,oldValue:null})),...e.map(e=>e.propertyChanged.asObservable())))).subscribe(e=>this.propertyChanged.emit(e))}ngOnDestroy(){super.ngOnDestroy(),this.dataLoadContextSubject.complete(),this.userPreferencesChanged$.complete()}applyFilterBySelection(){(0,u.isEmpty)(this.state.advancedFiltering.selectedCardValues)?this.applyPendingSelectedFilters():(this.cardLayoutOpenedModal=this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.filter-by-selection.title"),content:Kp,data:{filterableFields:this.visibleColumns.filter(e=>{if(e.filterable){const t=this.state.recordDefinition.fieldDefinitionsById[e.field];return!(t.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(t))}return!1}).map(e=>({id:e.field,name:e.header||e.fallbackTitle}))},customClass:"rx-filter-by-card-selection-dialog"}),this.cardLayoutOpenedModal.then(e=>{this.state.advancedFiltering.pendingSelectedFilters=[{filterOptionId:e,value:this.state.advancedFiltering.selectedCardValues[e]}],this.applyPendingSelectedFilters()}).catch(u.noop))}buildQueryByAdvancedFilters(e){const t=e.map(e=>{var t;let i=null;const n=e.filterOptionId,o=this.state.recordDefinition.fieldDefinitionsById[n];if(o){i=this.state.advancedFiltering.recordGridFilterConfigs[o.resourceType].getQueryFilter(e,o,n,null!==(t=this.state.namedFilterOptions[n])&&void 0!==t?t:[])}return i});return this.rxRecordGridFilterService.addQueries(...t)}downloadAttachment(e,t,i,n){if(!n||(0,u.includes)(["Space","Enter"],n.code))if(this.rxRecordGridUtilsService.isAssociatedRecordFieldId(t.field)){const n=this.rxRecordGridUtilsService.getFieldLocator(t.field),o=(0,u.find)(this.state.associationDescriptors,{associationDefinition:{guid:n.associationGuid}});this.rxAssociationInstanceDataPageService.post({params:{pageSize:1,startIndex:0,associationDefinition:o.associationDefinition.name,nodeToQuery:n.associationNodeSide,associatedRecordInstanceId:e[a.RX_RECORD_DEFINITION.coreFieldIds.id],propertySelection:a.RX_RECORD_DEFINITION.coreFieldIds.id}}).pipe((0,r.take)(1)).subscribe(e=>{const t=e.data[0][a.RX_RECORD_DEFINITION.coreFieldIds.id];this.rxRecordInstanceService.downloadAttachment(o.recordDefinitionName,Number(n.fieldId),t,i)})}else this.rxRecordInstanceService.downloadAttachment(this.state.recordDefinitionName,Number(t.field),e[a.RX_RECORD_DEFINITION.coreFieldIds.id],i)}executeViewActions(e,t,i){if(this.isProgrammaticUse){return(0,u.sortBy)(t,"index").reduce((e,t)=>(0,u.isFunction)(t.name)?e.then(e=>t.name(e,i)):(0,u.isString)(t.name)?e.then(e=>(()=>{this.rxViewActionService.execute(t.name.toString(),t.params).subscribe()})()):e,Promise.resolve())}return this.runtimeViewModelApi.triggerViewActions(e,f.VIEW_COMPONENT_DEFAULT_EVENT_NAME)}getActionButtonConfig(e,t){return e?t.pipe((0,r.map)(e=>Object.assign(Object.assign({},e),{cls:"dropdown-item"}))):t}getCellValue(e,t){return(0,this.cellValueFormatters[t.field])(e[t.field])}getDataCellClass(){return this.popovers.length?"rx-cell-selection-mode":""}getLoadRecordCountLinkText(){return`${this.adaptTableConfig.data.length}+`}getMultipleRowsSelectedText(){return this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.multiple-rows-selected.label",{count:this.adaptTableConfig.selectedItems.length,total:this.isTotalRecordCountKnown?this.adaptTableConfig.totalRecords:this.getLoadRecordCountLinkText()})}getMultipleRowsSelectedTextFirstPart(){const e=this.getMultipleRowsSelectedText();return e.substring(0,e.indexOf(this.getLoadRecordCountLinkText()))}getMultipleRowsSelectedTextSecondPart(){const e=this.getMultipleRowsSelectedText(),t=this.getLoadRecordCountLinkText();return e.substring(e.indexOf(t)+t.length)}getNamedFilterOptions(e){return this.state.namedFilterOptions[e.id]}getSharedFilterPresets(){this.state.advancedFiltering.isLoading=!0;const e=()=>{this.state.advancedFiltering.isLoading=!1,this.state.advancedFiltering.hasLoadedSharedFilterPresets=!0};return this.rxRecordGridSharedFilterPresetsCacheService.getSharedFilterPresets(this.guid).pipe((0,r.catchError)(t=>(e(),(0,o.throwError)(t))),(0,r.tap)(()=>{e()}))}getSortedColumnsByTitle(){return this.adaptTableConfig.columns.slice().sort((e,t)=>e.header.localeCompare(t.header))}getToolbarTags(e){const t=(e||[]).map(e=>{if(e.data.filterOption&&e.data.filterOption.id!==jd.externalPresetFilterOptionId){const t=e.data.filterOption.id,i=this.state.recordDefinition.fieldDefinitionsById[t],n=this.state.advancedFiltering.recordGridFilterConfigs[i.resourceType];if((0,u.isFunction)(n.getToolbarTagInfo))return n.getToolbarTagInfo({primaryRecordDefinition:this.state.recordDefinition,fieldDefinition:i,value:e.data.value,tag:e,fieldId:t,namedFilterOptions:this.state.namedFilterOptions[t]}).pipe((0,r.tap)(t=>e.data.value.title=t.tooltip),(0,r.map)(t=>Object.assign(Object.assign({},e),{text:t.text})))}return(0,o.of)(Object.assign({},e))});return t.length?(0,o.forkJoin)(t):(0,o.of)([])}getVisibleColumns(){return this.adaptTable.getVisibleColumns(this.adaptTableConfig.columns)}getVisibleRows(){return this.adaptTableConfig.data}handleHeaderCheckboxToggle(e){this.setSelectedFilteredRowsCount()}isCellSelected(e){return(0,u.some)(this.popovers,t=>t===e)}loadSavedFilterPresetFilters(e){return this.state.advancedFiltering.isLoading=!0,this.rxRecordGridFilterService.getAdvancedFilterData(e.filterData,this.state.recordDefinition.fieldDefinitionsById,this.state.advancedFiltering.recordGridFilterConfigs,this.state.recordDefinition,this.state.advancedFiltering.filterOptions,this.state.associationDescriptors).pipe((0,r.tap)(t=>{e.filters=(e.filters||[]).concat(t),this.state.advancedFiltering.isLoading=!1}))}loadTotalRowCount(){this.getTotalRowCount().subscribe(e=>{this.adaptTableConfig.totalRecords=e.totalSize})}onActiveSavedAdvancedFilterChange(e){this.state.advancedFiltering.activeSavedFilter=e}onAdvancedFilterExpressionTagsChanged(e){if(e.filterExpressionTags.every(e=>(0,u.isEmpty)(e.data.validationErrors))){const t=this.state.advancedFiltering.toolbarTags;this.updateToolbarTags(e.filterExpressionTags),t!==this.state.advancedFiltering.toolbarTags&&this.changeDetector.detectChanges()}}onAdvancedFiltersChange(e){this.state.advancedFiltering.appliedSharedFilterPreset=null;const t=this.getAppliedExternalPresetFilter(e);if(t){const e=this.state.advancedFiltering.savedFilters.find(e=>e.id===t.value);if(this.isSharedFilterPreset(e))this.state.advancedFiltering.appliedSharedFilterPreset=e;else if(e.appliedSharedFilterPresetGuid){const t=(0,u.find)(this.state.advancedFiltering.savedFilters,{id:e.appliedSharedFilterPresetGuid});this.state.advancedFiltering.appliedSharedFilterPreset=t}}this.adaptTableConfig.first=0,this.state.advancedFiltering.selectedFilters=e,this.adaptTableConfig.isLoadingMoreData=!1,this.updateAdaptTableFilters(),this.userPreferencesChanged$.next(),this.updateToolbarTags(this.state.advancedFiltering.toolbarTags),this.state.useExternalFiltering?this.loadRowData(!1):this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows)}onBeforeActiveSavedFilterChange(e){const t=e.savedFilterToSelect;t&&(t.filters&&this.areNonExternalPresetFiltersApplied(t.filters)||this.loadSavedFilterPresetFilters(t).subscribe())}onCellClick(e,t,i,n,o){!!e.target.closest("a")?this.clearSelectedCells():(this.popovers.length&&(e.metaKey||e.ctrlKey||this.clearSelectedCells()),t&&this.toggleCellSelection(t.filter(e=>!e.isRowActionsColumn),i,n,o))}onFilterBySelection(e,t,i){this.onCellClick(e,t,i,null,!0),this.applyFilterBySelection()}onCellMouseOver(e){const t=e.currentTarget;this.showCellTooltip=t.offsetWidth<t.scrollWidth}onChangedCardLayout(e){this.adaptTableConfig.cardLayoutColumns=e.cardLayoutColumns,this.clearSelectedCells(),this.cardLayoutOpenedModal&&(this.cardLayoutOpenedModal.reject(),this.cardLayoutOpenedModal=null),this.guid&&this.rxRecordGridUserPreferencesService.applyUserPreferencesForColumns(this.adaptTableConfig,this.state.columnsWithMetadata,this.guid),this.visibleColumns=this.getVisibleColumns(),this.adaptTableConfig.virtualRowHeight=this.getVirtualRowHeight()}onColReorder(e){this.visibleColumns=this.getVisibleColumns(),this.userPreferencesChanged$.next()}onColumnResize(){const e=this.adaptTable.el.nativeElement.getBoundingClientRect(),t=null==e?void 0:e.width,i=this.adaptTable.dataHeaderCells.reduce((e,t)=>e+t.element.nativeElement.offsetWidth,0),n=100*i/(t*this.getVisibleColumns().length)+"%",o=(0,u.reduce)(this.adaptTable.dataHeaderCells.toArray(),(e,t)=>{const n=t.data.renderingColumn.columnsConfigs[0];let o=null;return i&&(o=(0,u.endsWith)(n.width,"px")||this.state.expandable?`${t.element.nativeElement.offsetWidth}px`:`${(0,u.round)(t.element.nativeElement.offsetWidth/i*100,2)}%`),e[n.field]=o,e},{});this.adaptTableConfig.columns.forEach(e=>{var t;e.hidden||(e.width=null!==(t=o[e.field])&&void 0!==t?t:n)}),this.userPreferencesChanged$.next()}onColumnVisibilityChange(e,t){t.hidden===e&&(t.hidden=!e,this.userPreferencesChanged$.next(),this.visibleColumns=this.getVisibleColumns(),this.adaptTableConfig.virtualRowHeight=this.getVirtualRowHeight(),e?this.lastPropertySelection.includes(t.field)||this.loadRowData():this.avoidSystemColumnExpansion())}onCreateNewFilterPreset(e){const t={filters:e.filters,name:e.name,id:this.rxGuidService.generate()},i=this.getAppliedExternalPresetFilter(e.filters);i&&(t.appliedSharedFilterPresetGuid=i.value),this.state.advancedFiltering.savedFilters.push(t),this.state.advancedFiltering.activeSavedFilter=t,this.userPreferencesChanged$.next()}onDeleteSavedFilterPreset(e){(0,u.remove)(this.state.advancedFiltering.savedFilters,t=>t.id===e.id),this.userPreferencesChanged$.next()}onEditSavedFilterClick(e){let t=null;e.savedFilter.appliedSharedFilterPresetGuid&&(t=e=>e),e.savedFilter.filters&&this.areNonExternalPresetFiltersApplied(e.savedFilter.filters)?e.savedFilter.appliedSharedFilterPresetGuid&&(e.preventDefault(),e.initSavedFilterEditing(t.bind(this))):(e.preventDefault(),this.loadSavedFilterPresetFilters(e.savedFilter).subscribe(()=>{e.initSavedFilterEditing(t&&t.bind(this))}))}onExport(e){if(this.isExportInProgress)return void this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-in-progress.message"));const t=this.getVisibleColumns().filter(e=>!e.isRowActionsColumn);if(!t.length)return void this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.no-data-to-export.message"));const i=t.map(e=>e.header||e.fallbackTitle);let n;if(e.selectionOnly)n=(0,o.of)((0,u.intersectionBy)(this.adaptTableConfig.data,this.getSelectedRows(),c.RowDataItemIdFieldName));else{const e=this.getHeaders(),i=this.prepareQueryParamsAndQueryArgs(!1);i.pageSize=-1,i.propertySelection=t.map(e=>e.field),delete i.cursor,this.isExportInProgress=!0,n=this.getDataPageService().post({params:i,headers:e}).pipe((0,r.map)(e=>e.data),(0,r.finalize)(()=>{this.isExportInProgress=!1}))}n.subscribe(e=>{const n=this.getCellValues(e,t);this.exportDataToCsv(n,i)})}onLazyLoad(e){this.state.useExternalFiltering?(e.loadMore||e.eventSource!==F.AdaptTableEventSource.LoadMore)&&(this.adaptTableConfig.multiSortMeta=e.multiSortMeta,this.adaptTableConfig.filters=e.filters,this.adaptTableConfig.isLoadingMoreData=e.loadMore,this.loadRowData(e.loadMore)):e.eventSource===F.AdaptTableEventSource.FilterChange&&(this.adaptTableConfig.filters=e.filters,this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows))}onRefreshClick(){this.state.useExternalFiltering||this.loadRowData(!1);const e=this.adaptTable.toolbarComponent.getQuickFilterInputValue();this.adaptTable.setQuickFilter(e)}onRemoveFilterTag(e){this.state.advancedFiltering.activeSavedFilter=null;const t=this.state.advancedFiltering.selectedFilters.slice(),i=e.removedTag.data.filterOption.id,n=(0,u.findIndex)(t,e=>e.filterOptionId===i);t.splice(n,1),this.onAdvancedFiltersChange(t),this.setToolbarTags(e.newTags)}onRowsSelectionChange(e){const t=e?(0,u.castArray)(e):[],i=this.adaptTableConfig.selectedItems;this.shouldDisplayActionButtons=!(0,u.isEmpty)(t)&&!(0,u.isEmpty)(this.actionButtons),this.expandSelectedRowsProperties(t),this.adaptTableConfig.selectedItems=t,this.adaptTableConfig.toolbarConfig=Object.assign(Object.assign(Object.assign({},this.adaptTableConfig.toolbarConfig),{quickFilter:!this.shouldDisplayActionButtons,leftCustomSectionFixed:this.shouldDisplayActionButtons,rightCustomSectionFixed:this.shouldDisplayActionButtons,leftCustomSection:this.shouldDisplayActionButtons,filter:!this.shouldDisplayActionButtons}),this.state.toolbarConfig),this.adaptTableConfig.texts=Object.assign(Object.assign({},this.adaptTableConfig.texts),{exportSelected:this.getExportSelectedText(t)}),this.addSelectionFieldOptionNames(t[0]),this.notifyPropertyChanged("selectedRows",t,i),this.notifyPropertyChanged("selectedRowCount",t.length,i.length),this.notifyPropertyChanged("firstSelectedRow",t[0],i[0]),this.notifyPropertyChanged("fieldValuesByFieldId",this.prepareFieldsValueByFieldIdData(t),{}),this.rowSelectionChanged.next(t)}onSearchColumns(){this.filteredVisibleColumns=this.sortedColumnsByTitle.filter(e=>this.rxStringService.caseInsensitiveSearch(e.header,this.columnSearchText))}onSort(e){this.applySorting(e.multisortmeta)}onSortCards(e){this.applySorting(e),this.loadRowData()}onRowActionOpen(e){var t;null===(t=(0,u.last)(this.popovers))||void 0===t||t.close(),this.addSelectionFieldOptionNames(e);const i=this.expandRowProperties(e);this.state.lastActionRow=i,this.notifyPropertyChanged("clickableRow",i,null)}onUpdateSavedFilterPreset(e){const t=(0,u.find)(this.state.advancedFiltering.savedFilters,t=>t.id===e.oldSavedFilter.id);t&&(t.appliedSharedFilterPresetGuid&&!(0,u.find)(e.newSavedFilter.filters,e=>e.filterOptionId===jd.externalPresetFilterOptionId)&&delete t.appliedSharedFilterPresetGuid,Object.assign(t,e.newSavedFilter),this.userPreferencesChanged$.next())}openRowDetails(e,t){var i;null===(i=(0,u.last)(this.popovers))||void 0===i||i.close(),this.cardLayoutOpenedModal=this.adaptModalService.open({title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.cards.record-details.dialog.title"),content:this.cardLayoutRowDetailsTemplate,data:{columns:e,rowDataItem:t}}),this.cardLayoutOpenedModal.catch(u.noop)}setToolbarTags(e){this.state.advancedFiltering.toolbarTags=e,this.updateToolbarItems()}trackByColumnField(e,t){return t.field}updateToolbarTags(e){this.getToolbarTags(e).subscribe(e=>{this.setToolbarTags(e)})}addAssociationFieldsToRecordDefinition(e){const t=this.state.recordDefinition.fieldDefinitionsById;e.forEach(e=>{t[e.fieldId]||this.rxRecordDefinitionService.addFieldDefinitionToMap(e.fieldDefinition,t,e.fieldId)}),this.state.recordDefinition.fieldDefinitionsById=Object.assign(Object.assign({},t),this.rxObjectUtilsService.expandProperties(t)),this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}areNonExternalPresetFiltersApplied(e){return e.some(e=>e.filterOptionId!==jd.externalPresetFilterOptionId)}getAppliedExternalPresetFilter(e){return e.find(e=>e.filterOptionId===jd.externalPresetFilterOptionId)}prepareFieldsValueByFieldIdData(e){const t=(0,u.map)(this.adaptTableConfig.columns,"field");return(0,u.reduce)(e,(e,i,n)=>(t.forEach(function(t){e[t]=e[t]||[],e[t][n]=i[t]}),e),{})}addSelectionFieldOptionNames(e){e&&(e.selectionFieldOptionNamesById=(0,u.transform)(this.selectionFieldOptionLabelsByFieldId,(t,i,n)=>{t[n]=i[e[n]]},{}))}applyFilters(e,t){this.initializationCompleted$.pipe((0,r.switchMap)(()=>this.rxRecordGridFilterService.getAdvancedFilterData(e,this.state.recordDefinition.fieldDefinitionsById,this.state.advancedFiltering.recordGridFilterConfigs,this.state.recordDefinition,this.state.advancedFiltering.filterOptions,this.state.associationDescriptors)),(0,r.take)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{let i,n=(0,u.isEmpty)(this.pendingFiltersToApply)?(0,u.cloneDeep)(this.state.advancedFiltering.selectedFilters):this.pendingFiltersToApply;switch(t){case c.ApplyGridFilterMode.Begin:this.pendingFiltersToApply?i=this.pendingFiltersToApply:this.pendingFiltersToApply=[];break;case c.ApplyGridFilterMode.Append:i=[...n.filter(t=>!e.find(e=>e.filterOptionId===t.filterOptionId)),...e];break;case c.ApplyGridFilterMode.Remove:i=n.reduce((t,i)=>{const n=e.find(e=>e.filterOptionId===i.filterOptionId);return n?(this.isRangeFilter(i.filterOptionId)?(0,u.isEqual)(i.value.filterValue,n.value.filterValue)&&(i.value.filterValue=[null,null]):i.value.filterValue=i.value.filterValue.filter(e=>!n.value.filterValue.includes(e)),i.value.namedOptions=i.value.namedOptions.filter(e=>!n.value.namedOptions.includes(e)),rp.isEmptyWithRange(i.value)||t.push(i)):t.push(i),t},[]);break;case c.ApplyGridFilterMode.Merge:i=[...n,...e].reduce((e,t)=>{const i=e.find(e=>e.filterOptionId===t.filterOptionId);return i?(this.isRangeFilter(t.filterOptionId)?i.value.filterValue=[...t.value.filterValue]:i.value.filterValue=(0,u.uniq)(i.value.filterValue.concat(t.value.filterValue)),i.value.namedOptions=(0,u.uniq)(i.value.namedOptions.concat(t.value.namedOptions))):e.push(t),e},[]);break;case c.ApplyGridFilterMode.Overwrite:this.state.advancedFiltering.appliedSharedFilterPreset=null,this.state.advancedFiltering.activeSavedFilter=null,i=e;break;case c.ApplyGridFilterMode.Clear:this.state.advancedFiltering.appliedSharedFilterPreset=null,this.state.advancedFiltering.activeSavedFilter=null,i=[],this.pendingFiltersToApply&&(this.state.advancedFiltering.selectedFilters=[]);break;case c.ApplyGridFilterMode.End:this.pendingFiltersToApply&&(i=this.pendingFiltersToApply,this.pendingFiltersToApply=null)}this.pendingFiltersToApply?this.pendingFiltersToApply=i||[]:i&&this.onAdvancedFiltersChange(i)})}applyPendingSelectedFilters(){const e=(0,u.cloneDeep)(this.state.advancedFiltering.selectedFilters);(0,u.forEach)(this.state.advancedFiltering.pendingSelectedFilters,t=>{const i=(0,u.find)(e,{filterOptionId:t.filterOptionId});let n=[];switch(this.state.recordDefinition.fieldDefinitionsById[t.filterOptionId].resourceType){case a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType:n=t.value.map(e=>(0,I.default)(e)),n=[I.default.min(n),I.default.max(n)];break;case a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType:n=t.value.map(e=>(0,I.default)(e,"LTS")),n=[I.default.min(n),I.default.max(n)];break;case a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.real.resourceType:n=[(0,u.min)(t.value),(0,u.max)(t.value)];break;case a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType:n=t.value.map(e=>"$NULL$"===e?"blank":1===e);break;default:n=(0,u.uniq)(t.value.map(e=>String(e)))}i?i.value.filterValue=n:(t.value=new rp(n),e.push(t))}),this.onAdvancedFiltersChange(e),this.clearSelectedCells()}applySorting(e){this.adaptTableConfig.multiSortMeta=e,this.userPreferencesChanged$.next(),this.state.useExternalFiltering||(this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.data))}applyViewPreset(e,t,i){var n;return e===(null===(n=this.state.viewPresetSelector)||void 0===n?void 0:n.getGuid())?this.applyViewPresetInner(t,i):o.EMPTY}shareViewPreset(e){var t;return e===(null===(t=this.state.viewPresetSelector)||void 0===t?void 0:t.getGuid())?(0,o.of)(this.rxRecordGridUserPreferencesService.getSharedViewPresetData()):(0,o.of)(null)}applyViewPresetInner(e,t){return this.initializationCompleted$.pipe((0,r.switchMap)(()=>{const i=t&&t[this.guid];return i?this.rxRecordGridUserPreferencesService.applySharedViewPreset(this.state,this.adaptTableConfig,e,i):this.rxRecordGridUserPreferencesService.applyViewPreset(this.state,this.adaptTableConfig,e)}),(0,r.take)(1),(0,r.tap)(()=>{this.loadRowData(),this.userPreferencesChanged$.next(),this.checkIfViewPresetEdited()}))}areUserFiltersApplied(){return this.isSearchApplied()||Boolean(this.state.advancedFiltering.appliedSharedFilterPreset)||!(0,u.isEmpty)(this.state.advancedFiltering.selectedFilters)}isSearchApplied(){const e=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim();return Boolean(e)}checkIfViewPresetEdited(){this.state.viewPresetSelector&&this.rxRecordGridUserPreferencesService.isCurrentViewPresetEdited()&&this.state.viewPresetSelector.markAppliedViewPresetAsEdited()}clearSelectedCells(){var e;null===(e=(0,u.last)(this.popovers))||void 0===e||e.close(),this.popovers=[],this.state.advancedFiltering.pendingSelectedFilters=[],this.state.advancedFiltering.selectedCardValues={}}compareRows(e,t){const i=this.adaptTableConfig.multiSortMeta;return(0,u.reduce)(i,(i,n)=>{let o,r;if(e.groupField&&t.groupField?(o=e.groupField===n.field?e.groupValue:null,r=t.groupField===n.field?t.groupValue:null):(o=e[n.field],r=t[n.field]),isNaN(o)||isNaN(r))i=i||n.order*(0,u.toString)(o).localeCompare((0,u.toString)(r));else{const e=Number(o),t=Number(r);i=i||n.order*(e<t?-1:e>t?1:0)}return i},0)}createCsvExportFile(e){const t=new Blob([`\ufeff${e}`],{type:"text/csv;charset=utf-8"});this.ngZone.runOutsideAngular(()=>{(0,E.saveAs)(t,`${this.getExportFileName()}.csv`)})}deleteViewPreset(e){return this.rxRecordGridUserPreferencesService.deleteViewPreset(e),this.userPreferencesChanged$.next(),o.EMPTY}discardViewPresetChanges(e,t){return this.rxRecordGridUserPreferencesService.isExistingViewPreset(e)?(this.rxRecordGridUserPreferencesService.discardViewPresetChanges(e),this.applyViewPresetInner(e,t)):o.EMPTY}enrichRowEntity(e){let t={};if(!(0,u.isEmpty)(this.clickableWithHrefColumnActions)){this.addSelectionFieldOptionNames(e);const i=this.expandRowProperties(e);(0,u.set)(this.clickableWithHrefActionExpressionEvaluationData,`view.components.${this.guid}.clickableRow`,i),t=(0,u.reduce)(this.clickableWithHrefColumnActions,(e,t,i)=>{const n=this.findEnabledGridAction(t);return(null==n?void 0:n.name)===c.RX_VIEW_ACTION.viewActionNames.openView?(e[`${i}$ROUTER_LINK$`]=this.rxViewActionUtilsService.generateViewUrl(n.viewDefinitionName),e[`${i}$QUERY_PARAMS$`]=this.evaluateViewInputParameters(n.viewParams)):(null==n?void 0:n.name)===c.RX_VIEW_ACTION.viewActionNames.launchUrl?(e[`${i}$LAUNCH_URL$`]=this.rxExpressionEvaluatorService.tryEvaluate(n.url,this.clickableWithHrefActionExpressionEvaluationData),e[`${i}$TARGET$`]=c.RX_LAUNCH_BEHAVIOR[n.launchBehavior].target):(e[`${i}$LAUNCH_URL$`]=null,e[`${i}$ROUTER_LINK$`]=null),e},{})}return Object.assign({},e,{[c.RowDataItemIdFieldName]:e[this.adaptTableConfig.primaryKey]},t)}expandRowProperties(e){return Object.assign(Object.assign({},e),this.rxObjectUtilsService.expandProperties(e))}expandSelectedRowsProperties(e){(0,u.forEach)(e,(t,i)=>{e[i]=this.expandRowProperties(t)})}exportDataToCsv(e,t){const i=`${`"${t.join('","')}"\n`}${e.map(e=>`"${e.join('","')}"\n`).join("")}`;this.createCsvExportFile(i)}evaluateViewInputParameters(e){const t={};return(0,u.forEach)(e,(e,i)=>{const n=this.rxExpressionEvaluatorService.tryEvaluate(e,this.clickableWithHrefActionExpressionEvaluationData);t[i]=n||""}),t}filterRows(e){const t=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim();let i=(0,u.cloneDeep)(e);if(t){const e=this.getVisibleColumns();i=i.filter(i=>(0,u.some)(e,n=>i.groupField?!!this.rxStringService.caseInsensitiveSearch(i.groupValue,t)||(i.items=this.getFilteredItems(i.items,e,t),i.items.length):this.rxStringService.caseInsensitiveSearch(this.getCellValue(i,n),t)))}if((0,u.isEmpty)(this.state.advancedFiltering.selectedFilters)||(i=this.rxRecordGridFilterService.filterRows(i,this.state.advancedFiltering.selectedFilters,this.state.recordDefinition,this.state.advancedFiltering.recordGridFilterConfigs)),this.adaptTableConfig.multiSortMeta&&(this.state.expandGroups?this.sortRows(i):i.sort((e,t)=>this.compareRows(e,t))),this.state.expandGroups){const e=t=>{const i=t.filter(e=>e.items);let n=t.length-i.length;return null==i||i.forEach(t=>n+=e(t.items)),n};this.adaptTableConfig.totalRecords=e(i)}else this.adaptTableConfig.totalRecords=i.length;return i}findEnabledGridAction(e){return e.find(e=>{const t=e.$condition$;return!1!==this.rxExpressionEvaluatorService.tryEvaluate(t,this.clickableWithHrefActionExpressionEvaluationData)})}getAdvancedFilterOptions(){return(0,u.reduce)(this.state.recordDefinition.fieldDefinitionsById,(e,t,i)=>{var n;if(!(0,u.isUndefined)(t.id)){const o=this.adaptTableConfig.columns.find(e=>e.field===i),r=!o||!o.filterable,a=this.state.advancedFiltering.recordGridFilterConfigs[t.resourceType],s=null==o?void 0:o.additionalQueryCriteria;a&&e.push(this.rxRecordGridAdvancedFilteringService.getAdvancedFilterOption(i,o?o.header||o.fallbackTitle:t.name,t,a,r,{optionalBooleanFilter:this.fieldsProvider.optionalBooleanFilter,requiredBooleanFilter:this.fieldsProvider.requiredBooleanFilter,inputsForStringWithTypeAheadTemplate:this.fieldsProvider.inputsForStringWithTypeAheadTemplate,inputsForStringTypeTemplate:this.fieldsProvider.inputsForStringTypeTemplate,inputsForNumberTypeTemplate:this.fieldsProvider.inputsForNumberTypeTemplate,inputsForTimeTypeTemplate:this.fieldsProvider.inputsForTimeTypeTemplate,inputsForDateTypeTemplate:this.fieldsProvider.inputsForDateTypeTemplate,inputsForDatetimeTypeTemplate:this.fieldsProvider.inputsForDatetimeTypeTemplate,inputsForSelectionTypeTemplate:this.fieldsProvider.inputsForSelectionTypeTemplate},null,this.state.namedFilterOptions[i],null!==(n=null==o?void 0:o.typeaheadKeystrokeCount)&&void 0!==n?n:null,(null==o?void 0:o.filterable)?s:null))}return e},[]).sort((e,t)=>e.label.localeCompare(t.label))}getAssociationDescriptors(){const e=this.getRecordDefinitionName();return e?this.rxRecordGridUtilsService.getAssociationDescriptors(e):(0,o.of)([])}getBaseDataPageParams(){const e=this.state,t={recorddefinition:e.recordDefinitionName};return Boolean(e.associationDefinitionName)&&Object.assign(t,{associatedRecordInstanceId:e.associatedRecordId,associationDefinition:e.associationDefinitionName,nodeToQuery:e.associatedRecordNodeSide,recordDefinitionToQuery:e.recordDefinitionName}),e.associatedRoleName&&(t.roleName=e.associatedRoleName),t}getCellValueFormatter(e){const t=e.fieldDefinition;let i=e=>e;switch(t.resourceType){case a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType:i=e=>this.rxBooleanPipe.transform(e);break;case a.RX_RECORD_DEFINITION.dataTypes.selection.resourceType:i=t=>this.selectionFieldOptionLabelsByFieldId[e.fieldId][t];break;case a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType:i=e=>this.datePipe.transform(e,"medium");break;case a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType:i=e=>this.datePipe.transform(e);break;case a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType:i=e=>e?this.datePipe.transform(new Date(`2000-01-01T${e}`),"mediumTime"):e;break;case a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType:i=e=>{const t=(0,u.get)(e,"name");return(0,u.isString)(t)?t:e};break;case a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType:case a.RX_RECORD_DEFINITION.dataTypes.real.resourceType:{const e=t.precision,n=(0,u.isNil)(e)||-1===e?null:`1.${e}-${e}`;i=e=>this.decimalPipe.transform(e,n);break}case a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType:i=e=>this.decimalPipe.transform(e)}return i}getCellValues(e,t){return e.map(e=>t.map(t=>this.getCellValue(e,t)))}getColumns(){return this.adaptTableConfig.columns.map(e=>{const t=(0,u.find)(this.state.columnsWithMetadata,{fieldId:e.field});return{field:e.field,header:e.header,hidden:(0,m.getValueOrFunc)(e.hidden),fieldDefinition:t.fieldDefinition}})}getData(e){return this.getDataBase(e,!1).pipe((0,r.tap)(e=>{this.cursor=e.cursor||void 0}))}getDataBase(e,t){var i,n;let o;const r=this.prepareQueryParamsAndQueryArgs(t);if(null===(i=r.queryExpression)||void 0===i?void 0:i.includes(c.RX_EXPRESSION_EVALUATOR.operands.undefined))return this.rxLogService.debug(`Query expression contains undefined operands: ${r.queryExpression}`),this.rxRecordInstanceDataPageService.getEmptyDataPage();if(this.state.enableFiltering&&!this.isSearchApplied()&&this.state.requiredFilters>this.state.advancedFiltering.selectedFilters.length)return this.rxNotificationService.addWarningMessage(this.getFiltersRequiredMessage(this.state.requiredFilters),this.translateService.instant("com.bmc.arsys.rx.client.common.alert.label")),this.rxRecordInstanceDataPageService.getEmptyDataPage();if((0,u.isNumber)(e)&&(r.startIndex=e),0===e&&delete r.cursor,this.lastQueryExpression=null!==(n=r.queryExpression)&&void 0!==n?n:"",t||(this.lastPropertySelection=r.propertySelection),this.state.getData)o=this.state.getData(Object.assign(Object.assign({},r),{searchText:(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim()}));else if(this.hasAssociationAndEmptyRecordId())o=this.rxAssociationInstanceDataPageService.getEmptyDataPage();else{o=this.getDataPageService().post({params:r,headers:this.getHeaders()})}return o}getDataCellStyle(e){let t="";switch(e.alignment){case jd.columnAlignment.left:t="left";break;case jd.columnAlignment.right:t="right";break;case jd.columnAlignment.center:t="center";break;default:const i=[a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType];-1!==e.fieldDefinition.resourceType.search(i.join("|"))&&(t="right")}return{"text-align":t}}getDataPageService(){return Boolean(this.state.associationDefinitionName)?this.rxAssociationInstanceDataPageService:this.rxRecordInstanceDataPageService}getExportFileName(){return`${this.datePipe.transform(new Date,"yyyy-MM-dd")} Grid Data`}getFilteredItems(e,t,i){return e.filter(e=>{let n;return e.groupField?this.rxStringService.caseInsensitiveSearch(e.groupValue,i)?n=!0:(e.items=this.getFilteredItems(e.items,t,i),n=e.items.length):n=(0,u.some)(t,t=>this.rxStringService.caseInsensitiveSearch(this.getCellValue(e,t),i)),n})}getFirstSelectedRow(){return(0,u.get)(this.adaptTableConfig.selectedItems,"0",null)}getGridColumnDefinitions(e){const t=[];return e.slice().sort((e,t)=>e.index-t.index).map(e=>{let i;const n=this.rxRecordGridConfigUtilsService.parseConfigString(e.sortable),o=this.rxRecordGridUtilsService.getTestIdForGridColumn(e.fieldId);(0,u.isObject)(n)?(i=!0,this.adaptTableConfig.multiSortMeta?this.adaptTableConfig.multiSortMeta.splice(n.priority,0,{field:e.fieldId,order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(n.direction)}):this.adaptTableConfig.multiSortMeta=[{field:e.fieldId,order:this.rxRecordGridConfigUtilsService.getColumnSortOrder(n.direction)}]):i=n;const r=(0,u.endsWith)(e.width,"px"),a=this.adaptTableConfig.columnResizeMode!==F.ResizeMode.Expand||r?e.width:null,s=r&&parseInt(a)<jd.defaultColumnMinWidth?a:null;e.fieldId===jd.actionsColumnFieldDefinition.id?t.push({field:e.fieldId,header:e.title,fallbackTitle:e.fallbackTitle,width:a,minWidth:s,hidden:!e.visible,cellTemplate:this.rowActionButtonsTemplate,editTemplate:null,filterTemplate:null,headerTitleTemplate:null,cellTooltip:null,headerTooltip:null,headerClass:null,filterable:e.filterable,searchable:e.searchable,sortable:i,editable:!1,customTemplate:this.rowActionButtonsTemplate,clickable:!1,dataCellClass:"rx-row-action-cell",isRowActionsColumn:!0,testId:o}):(t.push({field:e.fieldId,header:e.title,fallbackTitle:e.fallbackTitle,width:a,minWidth:s,hidden:!e.visible,cellTemplate:this.cellTemplate,editTemplate:null,filterTemplate:null,headerTitleTemplate:null,cellTooltip:e=>this.showCellTooltip&&this.getCellValue(e.dataItem,e.column)||null,headerTooltip:e.headerTooltip,dataCellClass:this.getDataCellClass.bind(this),dataCellStyle:this.getDataCellStyle(e),headerClass:null,sortable:i,editable:null,filterable:e.filterable,searchable:e.searchable,filterName:null,filterParams:null,clickable:e.clickable,filterType:e.filterType,isDownloadableAttachment:this.isDownloadableAttachmentColumn(e),clickableWithHref:e.clickableWithHref,customTemplate:e.cellTemplate,wrapText:e.wrapText,referenced:e.referenced,cellDisplayProperties:e.cellDisplayProperties,typeaheadKeystrokeCount:e.typeaheadKeystrokeCount,additionalQueryCriteria:e.additionalQueryCriteria,testId:o}),this.cellValueFormatters[e.fieldId]=this.getCellValueFormatter(e))}),t}getGridData(e){const t=()=>{this.adaptTableConfig.isLoadingData=!1,this.adaptTableConfig.isLoadingMoreData=!1};return this.adaptTableConfig.isLoadingData=!0,this.getData(e?this.adaptTableConfig.data.length:0).pipe((0,r.tap)(i=>{t();const n=i.data.map(this.enrichRowEntity.bind(this));if(this.state.useExternalFiltering?e?(this.adaptTableConfig.data=this.adaptTableConfig.data.concat(n),(0===n.length||n.length<this.adaptTableConfig.rows)&&(this.adaptTableConfig.totalRecords=this.adaptTableConfig.data.length)):(this.adaptTableConfig.data=n,n.length<this.adaptTableConfig.rows?this.adaptTableConfig.totalRecords=n.length:this.adaptTableConfig.totalRecords=null):(this.adaptTableConfig.originalRows=n,this.adaptTableConfig.data=this.filterRows(this.adaptTableConfig.originalRows)),this.state.expandGroups){this.adaptTableConfig.expandedGroupsKeys={};const e=t=>{t.forEach(t=>{if(t.items){const i=this.adaptTableConfig.expandedGroupsKeys[t.groupField];i?i[t.groupValue]=!0:this.adaptTableConfig.expandedGroupsKeys[t.groupField]={[t.groupValue]:!0},e(t.items)}})};e(this.adaptTableConfig.data)}this.adaptTableConfig.toolbarConfig.rightCustomSection=Boolean(this.state.enableRowSelection&&this.adaptTableConfig.data.length),this.notifyPropertyChanged("totalRowCount",this.adaptTableConfig.data.length),this.notifyPropertyChanged("queryExpression",this.lastQueryExpression),this.notifyPropertyChanged("lastRefreshTime",(new Date).toISOString()),e||(this.onRowsSelectionChange([]),this.scrollToTop()),this.setSelectedFilteredRowsCount(),this.dataLoaded.emit(),this.dataLoadContextSubject.next({associatedRecordId:this.state.associatedRecordId,associatedRoleName:this.state.associatedRoleName,filterExpression:this.state.filterExpression,namedFilterOptions:this.state.namedFilterOptions}),this.changeDetector.markForCheck()}),(0,r.catchError)(e=>(t(),(0,o.throwError)(e))))}getHeaders(){return{"Should-Query-All-Locales":this.state.showDataForAllLocales?"true":[]}}getNamedFilterOptionsState(e){return e.reduce((e,t)=>(t.predefinedFilterPresets&&(e[t.fieldId]=t.predefinedFilterPresets.sort((e,t)=>e.index-t.index)),e),{})}getProgrammaticActionButtons(e){return e.map(e=>{let t;return t=(0,u.isFunction)(e.disabled)||(0,u.isFunction)(e.hidden)?this.rowSelectionChanged.pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{disabled:(0,u.isFunction)(e.disabled)?e.disabled(t):e.disabled,hidden:(0,u.isFunction)(e.hidden)?e.hidden(t):e.hidden}))):(0,o.of)(e),{guid:e.guid,config:t,runtimeViewModelApi:{triggerViewActions:(t,i)=>this.executeViewActions(e.guid,(0,u.get)(e,"actions"),this.state.lastActionRow)},factory:null,outlets:null}})}getRecordDefinition(){return this.state.getRecordDefinition?this.state.getRecordDefinition().pipe((0,r.tap)(e=>this.rxRecordDefinitionService.applyLocalization(e))):this.rxRecordDefinitionCacheService.getRecordDefinition(this.state.recordDefinitionName)}getRecordDefinitionName(){return this.state.recordDefinitionName}getSelectedRowCount(){return this.adaptTableConfig.selectedItems.length}getSelectedRows(e=!1){return e?(0,u.intersectionBy)(this.adaptTableConfig.data,this.adaptTableConfig.selectedItems,c.RowDataItemIdFieldName):this.adaptTableConfig.selectedItems}getTotalRowCount(){return this.getDataBase(null,!0)}getVirtualRowHeight(){var e;if(!(null===(e=this.adaptTableConfig.cardLayoutColumns)||void 0===e?void 0:e.length))return jd.defaultRowHeight;return 32*this.visibleColumns.length+6}hasAssociationAndEmptyRecordId(){return Boolean(this.state.associationDefinitionName)&&!this.state.associatedRecordId}initActionButtons(){this.isProgrammaticUse?this.actionButtons=this.getProgrammaticActionButtons(this.state.actionButtons):this.actionButtons=(0,u.get)(this.runtimeViewCanvasItemComponent.getChildren(c.RX_VIEW_DEFINITION.defaultOutletName),"[0].children")}initAdvancedFilterTexts(){this.state.advancedFiltering.filterTexts={initialDropdownAnchorLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.filter-data.label")}}initCustomTexts(){this.adaptTableConfig.texts={searchPlaceholder:this.state.searchFieldPlaceholderText,emptyStateLabelText:this.state.emptyStateLabelText,emptyStateWithFilterLabelText:this.state.emptyStateWithFilterLabelText,exportEntireDocument:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-all-rows.label"),exportSelected:this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.export-selected-rows.label")}}initGrid(){return this.state.guid=this.guid,(0,o.forkJoin)([this.rxGridConfiguratorService.getColumnsWithMetadata(this.guid,this.state.columns,this.state.recordDefinition),this.guid&&this.state.enableFiltering?this.getSharedFilterPresets():(0,o.of)(null)]).pipe((0,r.switchMap)(([e,t])=>(this.state.columnsWithMetadata=e,this.state.namedFilterOptions=this.getNamedFilterOptionsState(e),this.isUserAllowedToDeleteRecords=!!this.state.recordDefinition&&(!1!==this.state.recordDefinition.allowNonAdminToDeleteRecordInstances||this.rxCurrentUserService.isAdministrator()),this.notifyPropertyChanged("isUserAllowedToDeleteRecords",this.isUserAllowedToDeleteRecords),this.addAssociationFieldsToRecordDefinition(e),this.selectionFieldOptionLabelsByFieldId=this.rxGridConfiguratorService.getSelectionFieldOptionLabelsByFieldId(this.state.columns,this.state.recordDefinition),this.adaptTableConfig.columnResizeMode=this.state.expandable?F.ResizeMode.Expand:F.ResizeMode.Fit,this.adaptTableConfig.columns=this.getGridColumnDefinitions(e),this.state.advancedFiltering.recordGridFilterConfigs=this.rxRecordGridFilterConfigService.getConfigs(),this.state.advancedFiltering.filterOptions=this.getAdvancedFilterOptions(),this.state.advancedFiltering.filterOptions.push({id:jd.externalPresetFilterOptionId,label:jd.externalPresetFilterOptionId,dataType:m.AdvancedFilterOptionDataType.custom,isHidden:!0,customConfig:{getTagText:e=>{var t;return null===(t=this.state.advancedFiltering.savedFilters.find(t=>t.id===e))||void 0===t?void 0:t.name}}}),this.adaptTableConfig.rowSelectionMode=this.state.enableRowSelection,this.adaptTableConfig.primaryKey=this.state.recordIdField,this.adaptTableConfig.bordered=this.state.bordered,this.adaptTableConfig.striped=this.state.striped,this.adaptTableConfig.toolbarConfig.rightCustomSection=Boolean(this.state.enableRowSelection&&this.adaptTableConfig.data.length),this.state.initialFilters=this.rxRecordGridFilterHelperService.getRecordGridFilterDataFromPredefinedFilter(this.state.filters,this.state.recordGridFilters),this.clickableWithHrefColumnActions=(0,u.reduce)(e,(e,t)=>(t.clickableWithHref&&(e[t.fieldId]=t.actions),e),{}),(0,u.isEmpty)(this.clickableWithHrefColumnActions)||(this.clickableWithHrefActionExpressionEvaluationData={view:{components:{[this.guid]:{recordDefinition:this.state.recordDefinition}},inputParams:this.runtimeViewModelApi.getViewInputParameters()}}),this.guid?this.rxRecordGridUserPreferencesService.applyUserPreferences(this.adaptTableConfig,this.state.columnsWithMetadata,this.state,t):(0,o.of)(null))),(0,r.tap)(()=>{this.sortedColumnsByTitle=this.getSortedColumnsByTitle(),this.filteredVisibleColumns=this.sortedColumnsByTitle,this.visibleColumns=this.getVisibleColumns(),this.isFilterBySelectionButtonVisible=this.state.enableFiltering&&(0,u.some)(this.visibleColumns,"filterable"),this.initActionButtons(),this.initRowActionButtons(),this.state.viewPresetSelector||(this.avoidSystemColumnExpansion(),this.loadRowData()),this.updateToolbarTags(this.state.advancedFiltering.toolbarTags),this.updateAdaptTableFilters()}))}avoidSystemColumnExpansion(){if(this.adaptTableConfig.cardLayoutColumns)return void this.avoidSystemCardColumnExpansion();const e=[],t=[],i=(0,u.find)(this.adaptTableConfig.columns,{field:jd.actionsColumnFieldDefinition.id,hidden:!1});let n=0,o=0,r=0;if(this.adaptTableConfig.columns.every(a=>{if(!a.hidden){if((0,u.isNil)(a.width))return!1;const s=parseFloat(a.width);a.width.endsWith("px")?(e.push(a),a!==i&&(n=Math.max(n,s))):(t.push(a),r+=s,a!==i&&(o=Math.max(o,s)))}return!0})&&r<100){const a=Boolean(t.length),s=Boolean(e.length);a&&!s&&t.forEach(e=>{e.width=`${(parseFloat(e.width)/r*100).toFixed(4)}%`}),!a&&s&&(1===e.length&&i?(i.width=null,i.minWidth=null):(0,u.findLast)(e,e=>parseInt(e.width)===n&&e!==i&&(e.width=null,e.minWidth=null,!0))),a&&s&&(1===t.length&&i?(i.width=null,i.minWidth=null):(0,u.findLast)(t,e=>parseFloat(e.width)===o&&e!==i&&(e.width=null,!0)))}}avoidSystemCardColumnExpansion(){if(!this.adaptDeviceDetectionService.iosPlatform())return;const e=this.adaptTable.dataHeaderCells.reduce((e,t)=>e+t.element.nativeElement.offsetWidth,0)-33;this.adaptTableConfig.cardLayoutColumns.forEach(t=>{t.width=`${(parseFloat(t.width)*e/100).toFixed(4)}px`})}initRecordDefinitions(){this.setRecordDefinition(null),this.state.associationDescriptors=[];const e=(0,u.some)(this.state.columns,e=>this.rxRecordGridUtilsService.isAssociatedRecordFieldId(e.fieldId));return(0,o.forkJoin)([this.getRecordDefinition(),e?this.getAssociationDescriptors():(0,o.of)([])]).pipe((0,r.tap)(([e,t])=>{this.setRecordDefinition(e),this.state.associationDescriptors=t}),(0,r.map)(([e])=>e))}initRowActionButtons(){this.isProgrammaticUse?this.rowActionButtons=this.getProgrammaticActionButtons(this.state.rowActionButtons):this.rowActionButtons=(0,u.get)(this.runtimeViewCanvasItemComponent.getChildren(jd.rowActionsOutletName),"[0].children")}isDownloadableAttachmentColumn(e){const t=(0,u.get)(this.state.recordDefinition,"resourceType"),i=(0,u.get)(e,"fieldDefinition.resourceType");return!this.isProgrammaticUse&&(t===a.RX_RECORD_DEFINITION.recordDefinitionTypes.regular.recordDefinitionType||t===a.RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType)&&i===a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType}isRangeFilter(e){const t=[a.RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,a.RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType,a.RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType,a.RX_RECORD_DEFINITION.dataTypes.integer.resourceType,a.RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,a.RX_RECORD_DEFINITION.dataTypes.real.resourceType],i=this.state.recordDefinition.fieldDefinitionsById[e];return(0,u.includes)(t,i.resourceType)}isSharedFilterPreset(e){return Boolean(e.filterExpression)}loadRowData(e){this.getGridData(e).subscribe()}openSortByDialogFn(e){return this.cardLayoutOpenedModal=this.adaptModalService.open(e),this.cardLayoutOpenedModal}prepareQueryParamsAndQueryArgs(e){const t=this.adaptTableConfig.primaryKey,i=Object.assign(Object.assign({},this.getBaseDataPageParams()),{shouldIncludeTotalSize:e,pageSize:e?0:this.adaptTableConfig.rows,startIndex:e?0:this.adaptTableConfig.first});this.cursor&&!e&&(i.cursor=this.cursor),e||(i.propertySelection=(0,u.chain)(this.adaptTableConfig.columns.filter(e=>!e.isRowActionsColumn&&(this.state.getDataForHiddenColumns||!e.hidden||e.referenced)).map(e=>e.field)).union([t]).value());const n=this.adaptTableConfig.multiSortMeta;!e&&n&&n.length&&(i.sortBy=n.map(e=>e.order===F.SortOrder.Asc?`${e.field}`:`-${e.field}`));const o=(0,u.get)(this.adaptTableConfig.filters,"global.value","").toString().trim(),r=this.rxRecordGridFilterService.generateTextFilterQuery(o,this.adaptTableConfig.columns),a=this.state.advancedFiltering.appliedSharedFilterPreset,s=a&&a.filterExpression?`(${a.filterExpression})`:null,l=this.rxRecordGridFilterService.addQueries(this.rxRecordGridFilterService.getQueryFromRecordGridFilterData(this.state.initialFilters,this.state.recordDefinition.fieldDefinitionsById),this.buildQueryByAdvancedFilters(this.state.advancedFiltering.selectedFilters),r,this.state.filterExpression,s);return l&&(i.queryExpression=l),i}refresh(){return this.initializationCompleted$.pipe((0,r.switchMap)(()=>this.getGridData()),(0,r.switchMapTo)(o.EMPTY))}saveViewPreset(e){return this.rxRecordGridUserPreferencesService.saveViewPreset(e),this.userPreferencesChanged$.next(),o.EMPTY}scrollToTop(){if(this.adaptTable){const e=this.adaptTable.getScrollableBodyElement();e&&(e.scrollTop=0)}}setFilter(e){this.state.advancedFiltering.selectedFilters=e}setRecordDefinition(e){this.state.recordDefinition=(0,u.cloneDeep)(e),e&&(this.state.recordDefinition.fieldDefinitionsById=this.rxRecordDefinitionService.buildFieldDefinitionsByIdMap(this.state.recordDefinition)),this.notifyPropertyChanged("recordDefinition",this.state.recordDefinition)}setSelectedFilteredRowsCount(){this.selectedFilteredRowsCount=this.adaptTable.hasFilter()?this.getSelectedRows().length:0}sortRows(e){e.sort((e,t)=>this.compareRows(e,t)),(0,u.forEach)(e,e=>{var t;(null===(t=e.items)||void 0===t?void 0:t.length)&&this.sortRows(e.items)})}toggleCellSelection(e,t,i,n){if(this.state.enableFiltering)if(n){const n=e.filter(e=>{const t=this.state.recordDefinition.fieldDefinitionsById[e.field],i=t.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(t);return e.filterable&&!i}),o=this.isCellSelected(i);(0,u.forEach)(n,e=>{if(e.filterable){const i=t[e.field]||0===t[e.field]?t[e.field]:"$NULL$";this.state.advancedFiltering.selectedCardValues[e.field]?o?(0,u.remove)(this.state.advancedFiltering.selectedCardValues[e.field],i):this.state.advancedFiltering.selectedCardValues[e.field].push(i):this.state.advancedFiltering.selectedCardValues[e.field]=[i]}})}else{const n=e[0];if(n.filterable){const e=(0,u.find)(this.state.advancedFiltering.pendingSelectedFilters,{filterOptionId:n.field}),o=t[n.field]||0===t[n.field]?t[n.field]:"$NULL$",r=this.state.recordDefinition.fieldDefinitionsById[n.field],s=this.isRangeFilter(n.field),l=r.resourceType===a.RX_RECORD_DEFINITION.dataTypes.boolean.resourceType&&this.rxFieldDefinitionService.isRequiredField(r),c=!(s&&e&&2===e.value.length||l&&e||"$NULL$"===o&&(s||l));if(e)if(this.isCellSelected(i)){const t=(0,u.findIndex)(e.value,o);e.value.splice(t,1),this.trackPopoverAnchor(i),e.value.length||(0,u.remove)(this.state.advancedFiltering.pendingSelectedFilters,e)}else c&&(e.value.push(o),this.trackPopoverAnchor(i));else if(c){const e={filterOptionId:n.field,value:[o]};this.state.advancedFiltering.pendingSelectedFilters.push(e),this.trackPopoverAnchor(i)}}}}trackPopoverAnchor(e){var t,i;if(this.isCellSelected(e)){const i=e===(0,u.last)(this.popovers);(0,u.remove)(this.popovers,e),i&&(e.close(),null===(t=(0,u.last)(this.popovers))||void 0===t||t.open())}else null===(i=(0,u.last)(this.popovers))||void 0===i||i.close(),this.popovers.push(e),e.open()}updateAdaptTableFilters(){const e=this.adaptTable.filters.global;this.adaptTable.filters=this.areUserFiltersApplied()?{dummyFilter:{}}:{},e&&(this.adaptTable.filters.global=e)}updateToolbarItems(){if(this.adaptTable){const e=this.adaptTable.toolbarComponent,t=e.toolbarContentItems.find(e=>e.adaptToolbarItem===F.ToolbarItemsByPriority.FILTER);setTimeout(()=>{t&&!t.itemContext.hidden&&e.updateToolbarItems()})}}getExportSelectedText(e){return e.length>1?this.exportSelectedRowsText:this.exportSelectedRowText}getFiltersRequiredMessage(e){return e>1?this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.require-filtering.missing-filters-warning.message",{requiredFiltersCount:e}):this.translateService.instant("com.bmc.arsys.rx.client.view-components.record-grid.require-filtering.missing-filter-warning.message")}}ou.\u0275fac=function(e){return new(e||ou)(n["\u0275\u0275directiveInject"](m.AdaptDeviceDetectionService),n["\u0275\u0275directiveInject"](m.AdaptModalService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](h.DatePipe),n["\u0275\u0275directiveInject"](h.DecimalPipe),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](C.RxAssociationInstanceDataPageService),n["\u0275\u0275directiveInject"](s.RxBooleanPipe),n["\u0275\u0275directiveInject"](s.RxCurrentUserService),n["\u0275\u0275directiveInject"](c.RxExpressionEvaluatorService),n["\u0275\u0275directiveInject"](a.RxFieldDefinitionService),n["\u0275\u0275directiveInject"](Jp),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](v.RxObjectUtilsService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionService),n["\u0275\u0275directiveInject"](ap),n["\u0275\u0275directiveInject"]($d),n["\u0275\u0275directiveInject"](cp),n["\u0275\u0275directiveInject"](lp),n["\u0275\u0275directiveInject"](sp),n["\u0275\u0275directiveInject"](Zp),n["\u0275\u0275directiveInject"](eu),n["\u0275\u0275directiveInject"](Pd),n["\u0275\u0275directiveInject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](c.RxViewActionService),n["\u0275\u0275directiveInject"](c.RxViewActionUtilsService),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](v.RxStringService),n["\u0275\u0275directiveInject"](s.RxGlobalEventsService),n["\u0275\u0275directiveInject"](Qp,8),n["\u0275\u0275directiveInject"](f.RuntimeViewCanvasItemComponent,8))},ou.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ou,selectors:[["rx-record-grid"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](Dr,7),n["\u0275\u0275viewQuery"](Rr,5),n["\u0275\u0275viewQuery"](Ar,7),n["\u0275\u0275viewQuery"](Tr,7),n["\u0275\u0275viewQuery"](gr,7),n["\u0275\u0275viewQuery"](Fr,7),n["\u0275\u0275viewQuery"](Er,7),n["\u0275\u0275viewQuery"](Mr,7),n["\u0275\u0275viewQuery"](vr,7),n["\u0275\u0275viewQuery"](xp,7),n["\u0275\u0275viewQuery"](ws,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptTable=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptAdvancedFilter=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cardLayoutRowDetailsTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.cellTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.filterTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.leftCustomSectionTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rightCustomSectionTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.rowActionButtonsTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.visibleColumnsMenuTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.fieldsProvider=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionButtonComponents=e)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("click",function(e){return t.onClickOutside(e)},!1,n["\u0275\u0275resolveDocument"])},inputs:{config:"config"},outputs:{dataLoaded:"dataLoaded"},features:[n["\u0275\u0275ProvidersFeature"]([eu]),n["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:40,consts:[["rxCardLayout","","scrollHeight","flex",3,"cardLayoutWidth","cardLayoutFieldsHeaderTemplate","cardLayoutFieldsDataCellTemplate","cardLayoutValuesDataCellTemplate","cardLayoutValuesHeaderTemplate","cardLayoutRecordGridElementRef","cardLayoutGetDataCellClass","value","columns","rows","first","scrollable","sortable","rowExpandMode","sortMode","resizableColumns","columnResizeMode","selectionMode","selection","toolbarConfig","filterable","filters","multiSortMeta","dataKey","bordered","totalRecords","totalRecordsInGroup","lazy","lazyLoadOnInit","loading","enableInfiniteScrolling","expandedGroupsKeys","loadingMore","suppressTooltip","virtualScroll","virtualRowHeight","striped","texts","selectedFilteredRowsCount","headerSelectionMode","changedCardLayout","selectionChange","onSort","onLazyLoad","onColReorder","onColResize","export","onHeaderCheckboxToggle"],["adaptTable",""],["visibleColumnsMenuTemplate",""],["rightCustomSectionTemplate",""],["leftCustomSectionTemplate",""],["filterTemplate",""],["cellTemplate",""],["defaultCellTemplate",""],["cardLayoutFieldsHeaderTemplate",""],["cardLayoutValuesHeaderTemplate",""],["cardLayoutFieldsDataCellTemplate",""],["cardLayoutValuesDataCellTemplate",""],["cardLayoutRowDetailsTemplate",""],["filterButton",""],["rowActionButtonsTemplate",""],["cardLayoutRowActionButtonsTemplate",""],[3,"namedFilterOptionsGetter"],[3,"ngModel","placeholder","autofocus","ngModelChange"],["class","dropdown-item visible-columns-item px-3",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"type","label",4,"ngIf"],[1,"dropdown-item","visible-columns-item","px-3",3,"click"],[1,"m-0","adapt-table-toolbar__column-visibility-control",3,"label","ngModel","ngModelChange"],[3,"type","label"],["rx-id","selected-row-count",1,"px-2"],[4,"ngIf"],[1,"d-flex","align-items-center"],["type","button",1,"btn","btn-link","p-0","mx-1",3,"click"],["class","pl-1 w-100 align-items-center",3,"adaptSubnav",4,"ngIf"],[1,"pl-1","w-100","align-items-center",3,"adaptSubnav"],[3,"adaptSubnavItem",4,"ngFor","ngForOf"],[3,"adaptSubnavDropdown"],["type","button",1,"btn","btn-secondary","btn-xs","d-icon-triangle_down","ml-1"],[3,"adaptSubnavItem"],["actionButtonTemplate",""],[1,"m-1",3,"guid","config","runtimeViewModelApi"],["type","button","rx-id","refresh-button",1,"btn","btn-link","d-icon-refresh","grid-toolbar-icon","ml-2","p-1",3,"ngClass","click"],["class","ml-2",3,"ngClass","appendDropdownToBody","texts","showAnchorButtonLabel","filterOptions","selectedFilters","savedFilters","enableSavedFilters","activeSavedFilter","isLoading","selectedFiltersIndicationStyle","applyFiltersByUserAction","selectedFiltersChange","deleteSavedFilter","createNewFilter","updateSavedFilter","activeSavedFilterChange","beforeActiveSavedFilterChange","editSavedFilterClick","filterExpressionTagsChanged",4,"ngIf"],["class","btn-link ml-1",4,"ngIf"],[1,"ml-2",3,"hidden","tags","tagsLimit","removeTag"],[1,"ml-2",3,"ngClass","appendDropdownToBody","texts","showAnchorButtonLabel","filterOptions","selectedFilters","savedFilters","enableSavedFilters","activeSavedFilter","isLoading","selectedFiltersIndicationStyle","applyFiltersByUserAction","selectedFiltersChange","deleteSavedFilter","createNewFilter","updateSavedFilter","activeSavedFilterChange","beforeActiveSavedFilterChange","editSavedFilterClick","filterExpressionTagsChanged"],["adaptAdvancedFilter",""],[1,"btn-link","ml-1"],["class","rx-custom-cell rx-ellipsis",3,"rxCellDisplayProps","rxCellDisplayPropsBadgeElem","rxCellDisplayPropsDataItem","adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","rx-selected-custom-cell","click","mouseover",4,"ngIf"],["class","rx-custom-cell rx-ellipsis",3,"adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","rx-selected-custom-cell","click","mouseover",4,"ngIf"],[1,"rx-custom-cell","rx-ellipsis",3,"rxCellDisplayProps","rxCellDisplayPropsBadgeElem","rxCellDisplayPropsDataItem","adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","click","mouseover"],["popoverAnchor","adaptPopover"],[3,"ngClass","click"],["badgeElem",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"rx-custom-cell","rx-ellipsis",3,"adaptPopover","autoClose","popoverClass","triggers","appendToBody","placement","click","mouseover"],["tabindex","0","class","attachment-link",3,"click","keydown",4,"ngIf"],["tabindex","0","class","no-href-link",3,"click","keydown",4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],[3,"href","target",4,"ngIf"],[3,"ngClass"],["tabindex","0",1,"attachment-link",3,"click","keydown"],["tabindex","0",1,"no-href-link",3,"click","keydown"],[3,"routerLink","queryParams"],[3,"href","target"],[3,"title","columns","adaptTable","openDialog","sort"],[1,"rx-card-layout-cell",3,"click"],["class","rx-card-layout-cell-item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"rx-card-layout-cell-item"],[1,"rx-card-layout-cell-values","rx-card-layout-cell"],["adapt-button","","rx-id","filter-by-selection-button","class","btn btn-link d-icon-filter_adapt filter-by-selection-icon",3,"click",4,"ngIf"],["rx-id","show-record-details-button",1,"btn","btn-link","d-icon-pop_up","record-details-icon",3,"click"],["adapt-button","","rx-id","filter-by-selection-button",1,"btn","btn-link","d-icon-filter_adapt","filter-by-selection-icon",3,"click"],[1,"modal-body","rx-record-details"],["class","row mb-3",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"row","mb-3"],[1,"col-sm-4","font-weight-bold","rx-text-break"],["class","col-sm-8 rx-text-break",4,"ngIf"],["class","col-sm-8",4,"ngIf"],[1,"col-sm-8","rx-text-break"],[1,"col-sm-8"],["tabindex","0",1,"row-details-attachment-link",3,"click","keydown"],["adapt-button","","btn-type","tertiary","size","small",1,"d-icon-filter_adapt","p-0",3,"click"],["adaptDropdown","","appendToBody","true",1,"dropdown","dropdown-kabob",3,"onOpen"],["id","row-actions-dropdown-button","adaptDropdownToggle","",1,"dropdown-kabob-btn"],["aria-labelledby","row-actions-dropdown-button","adaptDropdownMenu","",1,"dropdown-menu"],["class","action-button-list",3,"guid","config","runtimeViewModelApi",4,"ngFor","ngForOf"],[1,"empty-list-label","pl-3"],[1,"action-button-list",3,"guid","config","runtimeViewModelApi"],["adaptDropdown","","appendToBody","true",1,"dropdown","mb-1",3,"click","onOpen"],["id","card-layout-dropdown-button","size","xtra-small","adaptDropdownToggle","",1,"btn","btn-secondary","btn-xs"],["aria-labelledby","card-layout-dropdown-button","adaptDropdownMenu","",1,"dropdown-menu"],["class","row-actions-dropdown-item",3,"guid","config","runtimeViewModelApi",4,"ngFor","ngForOf"],[1,"row-actions-dropdown-item",3,"guid","config","runtimeViewModelApi"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-table",0,1),n["\u0275\u0275listener"]("changedCardLayout",function(e){return t.onChangedCardLayout(e)})("selectionChange",function(e){return t.onRowsSelectionChange(e)})("onSort",function(e){return t.onSort(e)})("onLazyLoad",function(e){return t.onLazyLoad(e)})("onColReorder",function(e){return t.onColReorder(e)})("onColResize",function(){return t.onColumnResize()})("export",function(e){return t.onExport(e)})("onHeaderCheckboxToggle",function(e){return t.handleHeaderCheckboxToggle(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,jr,4,8,"ng-template",null,2,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](4,Vr,3,2,"ng-template",null,3,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](6,Gr,1,1,"ng-template",null,4,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](8,Hr,5,11,"ng-template",null,5,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](10,ea,2,2,"ng-template",null,6,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](12,aa,5,5,"ng-template",null,7,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](14,sa,1,4,"ng-template",null,8,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](16,la,1,4,"ng-template",null,9,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](18,da,2,2,"ng-template",null,10,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](20,ba,5,6,"ng-template",null,11,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](22,_a,6,4,"ng-template",null,12,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](24,Da,1,0,"ng-template",null,13,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](26,Aa,7,4,"ng-template",null,14,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](28,Fa,6,4,"ng-template",null,15,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](30,"rx-advanced-filtering-fields-provider",16)),2&e){const e=n["\u0275\u0275reference"](15),i=n["\u0275\u0275reference"](17),o=n["\u0275\u0275reference"](19),r=n["\u0275\u0275reference"](21);n["\u0275\u0275property"]("cardLayoutWidth",t.state.cardLayoutWidth)("cardLayoutFieldsHeaderTemplate",e)("cardLayoutFieldsDataCellTemplate",o)("cardLayoutValuesDataCellTemplate",r)("cardLayoutValuesHeaderTemplate",i)("cardLayoutRecordGridElementRef",t.elementRef)("cardLayoutGetDataCellClass",t.getDataCellClassBind)("value",t.adaptTableConfig.data)("columns",t.adaptTableConfig.cardLayoutColumns||t.adaptTableConfig.columns)("rows",t.adaptTableConfig.rows)("first",t.adaptTableConfig.first)("scrollable",t.adaptTableConfig.scrollable)("sortable",!0)("sortMode","multiple")("resizableColumns",!0)("columnResizeMode",t.adaptTableConfig.columnResizeMode)("selectionMode",t.adaptTableConfig.rowSelectionMode)("selection",t.adaptTableConfig.selectedItems)("toolbarConfig",t.adaptTableConfig.toolbarConfig)("filterable",t.adaptTableConfig.filterable)("filters",t.adaptTableConfig.filters)("multiSortMeta",t.adaptTableConfig.multiSortMeta)("dataKey",t.adaptTableConfig.primaryKey)("bordered",t.adaptTableConfig.bordered)("totalRecords",t.adaptTableConfig.totalRecords)("totalRecordsInGroup",t.state.expandGroups?t.adaptTableConfig.totalRecords:0)("lazy",!0)("lazyLoadOnInit",!1)("loading",t.adaptTableConfig.isLoadingData)("enableInfiniteScrolling",!0)("expandedGroupsKeys",t.adaptTableConfig.expandedGroupsKeys)("loadingMore",t.adaptTableConfig.isLoadingMoreData)("suppressTooltip",!1)("virtualScroll",t.adaptTableConfig.virtualScroll)("virtualRowHeight",t.adaptTableConfig.virtualRowHeight)("striped",t.adaptTableConfig.striped)("texts",t.adaptTableConfig.texts)("selectedFilteredRowsCount",t.selectedFilteredRowsCount)("headerSelectionMode",t.adaptTableHeaderSelectionMode),n["\u0275\u0275advance"](30),n["\u0275\u0275property"]("namedFilterOptionsGetter",t.getNamedFilterOptions)}},directives:[F.AdaptTableComponent,iu,xp,m.AdaptRxSearchComponent,b.NgControlStatus,b.NgModel,h.NgForOf,h.NgIf,m.AdaptRxCheckboxComponent,m.AdaptEmptyStateComponent,m.AdaptSubnavComponent,m.AdaptSubnavDropdownComponent,m.AdaptSubnavItemComponent,ws,h.NgClass,yp,m.AdaptAdvancedFilterComponent,nu,m.AdaptPopoverDirective,h.NgTemplateOutlet,M.RouterLinkWithHref,tu,m.AdaptButtonComponent,m.AdaptDropdownDirective,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;height:420px}[_nghost-%COMP%]     .rx-table-card-layout .adapt-selection-cell{vertical-align:middle!important}[_nghost-%COMP%]     .rx-table-card-layout .c-header-name{width:100%}[_nghost-%COMP%]     .rx-card-layout-data-cell{position:relative}[_nghost-%COMP%]     .rx-card-layout-cell-item{padding:0;line-height:32px;min-height:32px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]     .rx-card-layout-cell-values>div:first-child .rx-card-layout-cell-item{padding-right:20px}[_nghost-%COMP%]     .rx-card-layout-cell-icon, [_nghost-%COMP%]     .filter-by-selection-icon, [_nghost-%COMP%]     .record-details-icon{top:2px;padding:2px;position:absolute}[_nghost-%COMP%]     .record-details-icon{right:7px}[_nghost-%COMP%]     .filter-by-selection-icon{right:25px}[_nghost-%COMP%]     adapt-table td.at-data-cell{padding:0;-moz-user-select:text}[_nghost-%COMP%]     adapt-table td.rx-cell-selection-mode:focus{outline:none!important}[_nghost-%COMP%]     adapt-table adapt-table-toolbar rx-action-button{margin:5px}[_nghost-%COMP%]     adapt-table adapt-table-toolbar rx-action-button .btn-link{padding-right:0;padding-left:0}[_nghost-%COMP%]     adapt-table .at-wrap-cell-text .at-data-cell{word-break:break-word}[_nghost-%COMP%]     .rx-row-action-cell .dropdown{margin-top:3px}.rx-custom-cell[_ngcontent-%COMP%]{min-height:36px;padding:.5rem 13px}.rx-custom-cell[_ngcontent-%COMP%]   .rx-cell-wrap[_ngcontent-%COMP%]{white-space:normal;text-overflow:clip;word-break:break-word}.rx-selected-custom-cell[_ngcontent-%COMP%]{outline:1px solid #00a79d!important;border-color:transparent!important;outline-offset:-1px}.rx-card-layout-cell[_ngcontent-%COMP%]{padding:3px 10px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn{width:100%;text-align:left;background:none;border:0;font-size:.8125rem}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn:before{width:18px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn>span{margin-left:18px}[_nghost-%COMP%]     .dropdown-menu rx-action-button button.btn[class^=d-icon-left]>span{margin-left:0!important}.grid-toolbar-icon[_ngcontent-%COMP%]{font-size:16px}.no-href-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.attachment-link[_ngcontent-%COMP%], .row-details-attachment-link[_ngcontent-%COMP%]{cursor:pointer}  .table-filtering.popover.popover-mobile{height:auto;display:block;top:auto!important;bottom:0;width:100vw}  .table-filtering.popover.popover-mobile .a-popover-wrap{margin:0}  .table-filtering.popover.popover-mobile .close{display:none}  .visible-columns-dropdown{padding-top:0;width:14rem}.action-button-list[_ngcontent-%COMP%]:not(:empty) ~ .empty-list-label[_ngcontent-%COMP%]{display:none}.empty-list-label[_ngcontent-%COMP%]{color:#959899}.visible-columns-item[_ngcontent-%COMP%]{white-space:normal;word-break:break-word}']});class ru{constructor(e,t,i){this.viewDefinitionParserService=e,this.rxJsonParserService=t,this.rxRecordGridConfigUtilsService=i}adaptDefinition(e,t){const i=e.componentDefinitions.filter(({type:e})=>e===jd.components.column).map(({propertiesByName:e})=>e.cellDisplayProperties).filter(Boolean);this.viewDefinitionParserService.getComponents(e).map(e=>e.componentDefinition).forEach(n=>{var o,r,a,s;switch(n.type){case jd.type:{n.propertiesByName.enableFilterPresets=null!==(o=n.propertiesByName.enableFilterPresets)&&void 0!==o?o:"true",n.propertiesByName.requiredFilters=null!==(r=n.propertiesByName.requiredFilters)&&void 0!==r?r:"true"===n.propertiesByName.requireFiltering?1:0;const e=this.rxJsonParserService.tryParseJson(n.layout),t=(0,u.filter)(n.componentDefinitions,{type:c.RxViewComponentType.ActionButton}),i=this.getActionButtonsForOutlet(e,jd.rowActionsOutletName,t);i.forEach(e=>{e.propertiesByName=Object.assign(Object.assign({},e.propertiesByName),{cls:"dropdown-item",styles:"p-0"})}),(0,u.without)(t,...i).forEach(e=>{[ms.Primary,ms.Secondary].includes(e.propertiesByName.style)&&(e.propertiesByName.size=fs.Small)});break}case jd.components.column:{let o=null;if(!this.rxRecordGridConfigUtilsService.getBooleanValue(e.propertiesByName.getDataForHiddenColumns)){const r=e.guid,a=n.propertiesByName.fieldId,s=t.viewComponentExpressions.some(e=>e.includes(`\${view.components.${r}.firstSelectedRow.${a}`)||e.includes(`\${view.components.${r}.clickableRow.${a}`)),l=i.some(e=>e.includes(`\${view.components.grid.clickableRow.${a}`));o=s||l}const r={actions:[],clickable:!1,guid:n.guid,wrapText:null!==(a=n.propertiesByName.wrapText)&&void 0!==a&&a,referenced:o,typeaheadKeystrokeCount:null!==(s=n.propertiesByName.typeaheadKeystrokeCount)&&void 0!==s?s:jd.defaultTypeaheadKeystrokeCount},l=(0,u.filter)(n.componentDefinitions,{type:"rx-action"}).map(e=>e.propertiesByName);l.length&&(r.clickable=!0,r.actions=l),Object.assign(n.propertiesByName,r);break}case jd.components.filterPreset:case jd.components.filter:Object.assign(n.propertiesByName,{guid:n.guid})}})}getActionButtonsForOutlet(e,t,i){const n=(0,u.chain)(e.outlets).filter({name:t}).head().get("columns[0].children",[]).value();return(0,u.filter)(i,e=>n.includes(e.guid))}}ru.\u0275fac=function(e){return new(e||ru)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"]($d))},ru.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ru,factory:ru.\u0275fac});class au extends c.RxRecordQueryExpressionEvaluatorService{}au.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](au)))(t||au)}}(),au.\u0275prov=n["\u0275\u0275defineInjectable"]({token:au,factory:au.\u0275fac});class su{constructor(e,t){this.rxRecordGridDefinitionAdapterService=e,this.rxDefinitionAdapterRegistryService=t,t.registerRuntimeAdapter(jd.type,this.rxRecordGridDefinitionAdapterService)}}su.\u0275fac=function(e){return new(e||su)(n["\u0275\u0275inject"](ru),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},su.\u0275mod=n["\u0275\u0275defineNgModule"]({type:su,declarations:[ou,iu,tu,Kp,nu],imports:[s.RxDefinitionModule,h.CommonModule,f.RuntimeViewCanvasModule,F.AdaptTableModule,R.AdaptSelectModule,b.FormsModule,m.AdaptRxCheckboxModule,m.AdaptRxSelectModule,m.AdaptAlertModule,m.AdaptPopoverModule,m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptDropdownModule,p.TranslateModule,Is,m.AdaptSubnavModule,m.AdaptAdvancedFilteringModule,wp,M.RouterModule,Fp,m.AdaptRxSearchModule,m.AdaptEmptyStateModule],exports:[ou]}),su.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[h.DatePipe,h.DecimalPipe,s.RxBooleanPipe,Jp,$d,ru,lp,Pd,cp,au,Zp,ap],imports:[[s.RxDefinitionModule,h.CommonModule,f.RuntimeViewCanvasModule,F.AdaptTableModule.forRoot(),R.AdaptSelectModule,b.FormsModule,m.AdaptRxCheckboxModule,m.AdaptRxSelectModule,m.AdaptAlertModule.forRoot(),m.AdaptPopoverModule.forRoot(),m.AdaptAccordionModule,m.AdaptButtonModule,m.AdaptDropdownModule,p.TranslateModule,Is,m.AdaptSubnavModule,m.AdaptAdvancedFilteringModule,wp,M.RouterModule,Fp,m.AdaptRxSearchModule,m.AdaptEmptyStateModule]]});class lu extends f.BaseViewComponent{constructor(e,t){super(),this.sanitizer=e,this.rxCkEditorConfiguratorService=t,this.filter=new CKEDITOR.filter(""),this.api={setProperty:this.setProperty.bind(this)},this.filter.allow(this.rxCkEditorConfiguratorService.getContentRules())}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.isHidden=Boolean(e.hidden),this.html=this.updateHtml(e.html)})}updateHtml(e){if(e){e=e.replace(/\n/g,"<br>");const t=CKEDITOR.htmlParser.fragment.fromHtml(e),i=new CKEDITOR.htmlParser.basicWriter;this.filter.applyTo(t),t.writeHtml(i),e=i.getHtml(!0)}else e="";return this.sanitizer.bypassSecurityTrustHtml(e)}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Rich text: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}lu.\u0275fac=function(e){return new(e||lu)(n["\u0275\u0275directiveInject"](O.DomSanitizer),n["\u0275\u0275directiveInject"](c.RxCkEditorConfiguratorService))},lu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:lu,selectors:[["rx-rich-text"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[["tabindex","0",1,"text-container","focusable",3,"hidden","innerHTML"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"div",0),2&e&&(n["\u0275\u0275property"]("hidden",t.isHidden)("innerHTML",t.html,n["\u0275\u0275sanitizeHtml"]),n["\u0275\u0275attribute"]("aria-hidden",t.isHidden))},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.text-container[_ngcontent-%COMP%]{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}']});class cu{constructor(e){this.rxDefaultExpressionEvaluatorService=e}evaluate(e,t){const i=document.createElement("div");return i.innerHTML=e,i.querySelectorAll(`span[${c.RX_RICH_TEXT.expressionAttributeName}]`).forEach(e=>{const i=this.rxDefaultExpressionEvaluatorService.evaluate(e.getAttribute(c.RX_RICH_TEXT.expressionAttributeName),t),n=document.createTextNode((0,u.isNil)(i)?"":i);e.parentElement.replaceChild(n,e)}),i.innerHTML}}cu.\u0275fac=function(e){return new(e||cu)(n["\u0275\u0275inject"](c.RxDefaultExpressionEvaluatorService))},cu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:cu,factory:cu.\u0275fac});class du{constructor(e){this.rxCkEditorConfiguratorService=e,this.filter=new CKEDITOR.filter(""),this.filter.allow(this.rxCkEditorConfiguratorService.getContentRules())}adaptDefinition(e){if(e.propertiesByName.html){const t=CKEDITOR.dtd.$removeEmpty.span;CKEDITOR.dtd.$removeEmpty.span=0;const i=CKEDITOR.htmlParser.fragment.fromHtml(e.propertiesByName.html),n=new CKEDITOR.htmlParser.basicWriter;this.filter.applyTo(i),i.writeHtml(n),e.propertiesByName.html=n.getHtml(!0),CKEDITOR.dtd.$removeEmpty.span=t}}}du.\u0275fac=function(e){return new(e||du)(n["\u0275\u0275inject"](c.RxCkEditorConfiguratorService))},du.\u0275prov=n["\u0275\u0275defineInjectable"]({token:du,factory:du.\u0275fac});class pu{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.richTextDefinitionAdapterService=t,e.registerRuntimeAdapter(c.RxViewComponentType.RichText,this.richTextDefinitionAdapterService)}}pu.\u0275fac=function(e){return new(e||pu)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](du))},pu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pu,declarations:[lu],imports:[h.CommonModule,T.CKEditorModule],exports:[lu]}),pu.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[cu],imports:[[h.CommonModule,T.CKEditorModule]]});const uu={title:!1,skin:"rich-text,skins/rich-text/",toolbar:[["Bold","Italic","Strike","Underline","-","Link","Unlink","-","NumberedList","BulletedList","Outdent","Indent","-","JustifyLeft","JustifyCenter","JustifyRight","-","ExpressionEditor"],"/",["Format","Styles","Font","FontSize","TextColor"]],stylesSet:[{name:"Italic Title",element:"h2",attributes:{class:"italic-title"}},{name:"Subtitle",element:"h3",attributes:{class:"subtitle"}},{name:"Special Container",element:"div",attributes:{class:"special-containers"}},{name:"Marker",element:"span",attributes:{class:"marker"}},{name:"Small",element:"small"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Compact Table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",class:"compact-table"}},{name:"Borderless Table",element:"table",attributes:{class:"borderless-table"}},{name:"Square Bulleted List",element:"ul",attributes:{class:"square-bulleted-list"}}],format_tags:"p;h1;h2;h3;pre",extraPlugins:"expression-editor, colordialog",extraAllowedContent:"span [rx-expression, contenteditable, title] (rx-expression)"};class mu extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.html$=this.sandbox.getComponentPropertyValue("html")}static getInitialProperties(e){return Object.assign(Object.assign({name:null,html:null},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.componentProperties$.subscribe(e=>{const t=e.html?[]:[this.sandbox.createError("Rich text value cannot be blank.")];t.push(...(0,d.validateStandardProps)(e)),this.sandbox.setValidationIssues(t)}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Rich text component")}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}updateComponentProperties(e){this.sandbox.updateComponentProperties(e)}}class hu{constructor(e,t,i,n,r,a){this.rxExpressionEditorService=e,this.rxTreeService=t,this.rxExpressionParserService=i,this.renderer2=n,this.document=r,this.ngZone=a,this.type="inline",this.ckConfig=uu,this.formControl=new b.FormControl(null),this.destroyed$=new o.ReplaySubject(1),this.removeExpressionLabels=this.setExpressionLabelHtml.bind(this,null),this.addExpressionLabels=this.setExpressionLabelHtml.bind(this,this.getExpressionWithLabels.bind(this))}ngOnInit(){this.model.expressionConfigurator.getDataDictionary().pipe((0,r.withLatestFrom)(this.model.html$),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.flatDataDictionary=this.rxTreeService.flatten({children:e}),this.formControl.setValue(this.addExpressionLabels(t))}),this.formControl.valueChanges.pipe((0,r.map)(e=>this.removeExpressionLabels(e)),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.model.updateComponentProperties({html:e})}),this.model.html$.pipe((0,r.take)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.formControl.setValue(this.addExpressionLabels(e))})}onEditorReady(e){this.isReadOnly&&(this.ckConfig.toolbar=[],this.document.getElementById(`${e.editor.id}_top`).style.display="none"),this.ckEditor.instance.on("openExpressionEditor",e=>{const t=e.data&&e.data.getAttribute(c.RX_RICH_TEXT.expressionAttributeName);this.ngZone.runTask(()=>this.rxExpressionEditorService.openEditor({property:{path:"html",value:t,label:"Rich Text"},expressionConfigurator:this.model.expressionConfigurator}).pipe((0,r.takeUntil)(this.destroyed$)).subscribe({next:({path:i,value:n})=>{if(n){const i=this.getExpressionWithLabels(n);t?(e.data.setAttribute(c.RX_RICH_TEXT.expressionAttributeName,n),e.data.setHtml(i),this.ckEditor.instance.fire("saveSnapshot")):this.ckEditor.instance.insertHtml(`<span contenteditable="false" ${c.RX_RICH_TEXT.expressionAttributeName}="${(0,u.escape)(n)}">${i}</span>`)}else e.data.remove(),this.ckEditor.instance.fire("saveSnapshot");this.moveCursorToEnd()},error:()=>{this.moveCursorToEnd()}}))})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getExpressionWithLabels(e){return this.rxExpressionParserService.parse(e,(e,t)=>{if(e!==s.ExpressionParserToken.RxStringExpression){const e=this.flatDataDictionary.find(e=>e.expression===t),i=e&&e.label?(0,u.escape)(e.label):t;return`<span title="${i}">${i}</span>`}return t})}moveCursorToEnd(){const e=this.ckEditor.instance.createRange();e.moveToElementEditEnd(e.root),this.ckEditor.instance.getSelection().selectRanges([e])}setExpressionLabelHtml(e,t){const i=this.renderer2.createElement("div");return i.innerHTML=t,i.querySelectorAll(`span[${c.RX_RICH_TEXT.expressionAttributeName}]`).forEach(t=>t.innerHTML=e?e(t.getAttribute(c.RX_RICH_TEXT.expressionAttributeName)):null),i.innerHTML.replace(/<br>/g,"<br />")}}hu.\u0275fac=function(e){return new(e||hu)(n["\u0275\u0275directiveInject"](l.RxExpressionEditorService),n["\u0275\u0275directiveInject"](v.RxTreeService),n["\u0275\u0275directiveInject"](s.RxExpressionParserService),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](h.DOCUMENT),n["\u0275\u0275directiveInject"](n.NgZone))},hu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:hu,selectors:[["rx-rich-text-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](T.CKEditorComponent,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ckEditor=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:1,vars:6,consts:[[1,"border",3,"formControl","config","type","readOnly","ready"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ckeditor",0),n["\u0275\u0275listener"]("ready",function(e){return t.onEditorReady(e)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("border-transparent",t.formControl.value),n["\u0275\u0275property"]("formControl",t.formControl)("config",t.ckConfig)("type",t.type)("readOnly",t.isReadOnly))},directives:[T.CKEditorComponent,b.NgControlStatus,b.FormControlDirective],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}ckeditor[_ngcontent-%COMP%]{min-height:42px;display:block;border:1px solid #d6d7d8}ckeditor.border-transparent[_ngcontent-%COMP%]{border-color:transparent!important}ckeditor[_ngcontent-%COMP%]     [rx-expression]{padding:2px 5px;display:inline-block;color:#7c7f81;background-color:#f0f1f1;border-radius:2px;-webkit-user-select:all;user-select:all}ckeditor[_ngcontent-%COMP%]     [rx-expression] span{padding:2px 5px;background-color:#d6d7d8;border-radius:2px}ckeditor[_ngcontent-%COMP%]     .cke_editable{padding:5px;outline:none}']});class fu{constructor(){const e=this;CKEDITOR.plugins.add("expression-editor",{init(t){t.addCommand("insertExpression",{exec:()=>(t.fire("openExpressionEditor",null),!0)}),t.on("doubleclick",i=>{const n=e.getSelectedExpressionElement(i.data.element);n&&t.fire("openExpressionEditor",n)},null,null,0),t.ui.addButton("ExpressionEditor",{label:"Insert Expression",command:"insertExpression",toolbar:"",icon:CKEDITOR.plugins.getPath("expression-editor")+"toolbar.png"})}})}getSelectedExpressionElement(e){if(e.is("span")&&e.hasAttribute("rx-expression"))return e;{const t=e.getParent();if(t.is("span")&&t.hasAttribute("rx-expression"))return t}}clearSelection(e){const t=e.getSelection();t&&t.removeAllRanges()}}fu.\u0275fac=function(e){return new(e||fu)},fu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:fu,factory:fu.\u0275fac,providedIn:"root"});class gu{constructor(e,t,i){this.rxExpressionEditorPluginService=e,this.rxDefinitionAdapterRegistryService=t,this.richTextDefinitionAdapterService=i,t.registerDesignAdapter(c.RxViewComponentType.RichText,this.richTextDefinitionAdapterService)}}gu.\u0275fac=function(e){return new(e||gu)(n["\u0275\u0275inject"](fu),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](du))},gu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gu,declarations:[hu],imports:[h.CommonModule,T.CKEditorModule,b.ReactiveFormsModule]}),gu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,T.CKEditorModule,b.ReactiveFormsModule]]});class vu{}vu.\u0275fac=function(e){return new(e||vu)},vu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vu,selectors:[["rx-service-list-design"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-md-12"],["label","Service list","required","true","disabled","true","ngModel",""]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275element"](2,"adapt-rx-select",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]())},directives:[m.AdaptRxSelectComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],encapsulation:2});class xu{}xu.\u0275fac=function(e){return new(e||xu)},xu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xu,declarations:[vu],imports:[h.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule,m.AdaptRxSelectModule,b.FormsModule]}),xu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule,m.AdaptRxSelectModule,b.FormsModule]]});class yu extends f.BaseViewComponent{constructor(e){super(),this.httpClient=e,this.isDisabled=!0,this.serviceListOptions=[],this.service={id:null,name:null,guid:null}}ngOnInit(){super.ngOnInit();const e=this.config.pipe((0,r.pluck)("serviceRequestId"),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$));this.httpClient.get("/api/com.bmc.dsm.chatbot/rx/application/chatbot/services").pipe((0,r.withLatestFrom)(e),(0,r.finalize)(()=>{this.isDisabled=!1}),(0,r.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.serviceListOptions=(0,u.flow)(e=>(0,u.groupBy)(e,"groupName"),e=>(0,u.map)(e,(e,t)=>({name:t,children:(0,u.map)(e,e=>({id:e.id,name:e.name,guid:e.guid}))})))((null==e?void 0:e.catalogDetailsList)||[]),this.selectServiceRequest(t)}),e.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.selectServiceRequest(e)})}selectServiceRequest(e){let t;(0,u.forEach)(this.serviceListOptions,i=>{if(t)return!1;t=(0,u.find)(i.children,{id:e})}),this.service=t?[{id:t.id,name:t.name,guid:t.guid}]:[]}onSelectionChange(e){const t=e.options[0];this.notifyPropertyChanged("serviceRequestId",t.id),this.notifyPropertyChanged("serviceRequestName",t.name),this.notifyPropertyChanged("serviceRequestGuid",t.guid)}optionFormatter(e){return e.name}}yu.\u0275fac=function(e){return new(e||yu)(n["\u0275\u0275directiveInject"](k.HttpClient))},yu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yu,selectors:[["rx-service-list"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:4,consts:[["label","Service name","required","true","enableFilter","true",3,"options","disabled","ngModel","optionFormatter","onSelectionChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-select",0),n["\u0275\u0275listener"]("onSelectionChange",function(e){return t.onSelectionChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.serviceListOptions)("disabled",t.isDisabled)("ngModel",t.service)("optionFormatter",t.optionFormatter)},directives:[m.AdaptRxSelectComponent,b.RequiredValidator,b.NgControlStatus,b.NgModel],encapsulation:2});class bu{}bu.\u0275fac=function(e){return new(e||bu)},bu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:bu,declarations:[yu],imports:[h.CommonModule,m.AdaptRxSelectModule,b.FormsModule],exports:[yu]}),bu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxSelectModule,b.FormsModule]]});class Cu extends ks{constructor(){super(...arguments),this.state={enableLazyLoading:!1,label:""}}}Cu.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Cu)))(t||Cu)}}(),Cu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Cu,selectors:[["rx-tab-container"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,Ea,1,0,"rx-runtime-view-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.state.hidden)},directives:[h.NgIf,f.RuntimeViewCanvasOutletComponent],styles:["[_nghost-%COMP%]{display:block}"]});class Su extends f.BaseViewComponent{constructor(e){super(),this.runtimeCanvasItemComponent=e,this.childLayouts=[],this.state={activeTabIndex:null},this.api={setProperty:this.setProperty.bind(this)}}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.state=Object.assign(Object.assign({},this.state),e),this.isHidden=Boolean(this.state.hidden)}),this.childLayouts=(0,u.get)(this.runtimeCanvasItemComponent.getChildren(c.RX_VIEW_DEFINITION.defaultOutletName),"[0].children"),this.childLayouts.forEach(e=>{e.state={enableLazyLoading:!1,label:"",isRendered:!1,hidden:0},e.config.pipe((0,r.tap)(t=>{e.state=Object.assign(Object.assign({},e.state),t)}),(0,r.pluck)("hidden"),(0,r.distinctUntilChanged)(),(0,r.skip)(1),(0,r.takeUntil)(this.destroyed$)).subscribe(()=>{this.ensureActiveTabIsSet()})}),this.trySetFirstVisibleTab()}setProperty(e,t){if("hidden"===e)this.state.hidden=t,this.notifyPropertyChanged(e,t);else{if("activeTabIndex"!==e)return(0,o.throwError)(`Tab panel: property ${e} is not settable.`);this.setActiveTabIndex(parseInt(t,10))}}trackByForTabs(e,t){return t.guid}canRenderContentForTab(e){return!e.state.enableLazyLoading||e.state.isRendered}getAllTabsData(){let e=0;return this.childLayouts.map(t=>({adaptTabsetIndex:this.isHiddenTab(t)?null:e++,tab:t}))}isHiddenTab(e){return Boolean(e.state.hidden)}getActiveTabIndexForAdaptTabset(){return(0,u.isNull)(this.state.activeTabIndex)?0:this.getAllTabsData()[this.state.activeTabIndex].adaptTabsetIndex}onActiveTabChanged(e){const t=(0,u.findIndex)(this.getAllTabsData(),t=>t.adaptTabsetIndex===e);this.activateTab(t)}setActiveTabIndex(e){const t=this.childLayouts[e];t&&!this.isHiddenTab(t)&&this.activateTab(e)}activateTab(e){this.state.activeTabIndex=e,(0,u.isNil)(e)||(this.childLayouts[e].state.isRendered=!0),this.notifyPropertyChanged("activeTabIndex",e)}ensureActiveTabIsSet(){const e=this.childLayouts;(0,u.every)(e,e=>this.isHiddenTab(e))?this.activateTab(null):(!(0,u.isNull)(this.state.activeTabIndex)&&this.isHiddenTab(e[this.state.activeTabIndex])||(0,u.isNull)(this.state.activeTabIndex))&&this.trySetFirstVisibleTab()}trySetFirstVisibleTab(){const e=(0,u.findIndex)(this.childLayouts,e=>!this.isHiddenTab(e));-1!==e&&this.activateTab(e)}}Su.\u0275fac=function(e){return new(e||Su)(n["\u0275\u0275directiveInject"](f.RuntimeViewCanvasItemComponent))},Su.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Su,selectors:[["rx-tab-panel"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"fullHeight","tab-active","tab-active-changed",4,"ngIf"],[3,"fullHeight","tab-active","tab-active-changed"],["ngFor","",3,"ngForOf","ngForTrackBy"],[3,"adapt-tab-title",4,"ngIf"],[3,"layout",4,"ngIf"],[3,"adapt-tab-title"],[3,"layout"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,Pa,2,4,"adapt-tabset",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf,m.AdaptTabsComponent,h.NgForOf,m.AdaptTabsPanelComponent,f.RuntimeViewCanvasItemComponent],encapsulation:2});class wu{constructor(e,t){this.viewDefinitionParserService=e,this.rxJsonParserService=t}adaptDefinition(e){this.viewDefinitionParserService.getComponents(e).filter(e=>e.componentDefinition.type===c.RxViewComponentType.TabPanel).map(e=>e.componentDefinition).forEach(e=>{if(e.layout){let t=this.rxJsonParserService.tryParseJson(e.layout);if(t&&t.componentDefinitionId){const i=t.columns.map(e=>({children:e.children.map(e=>e.columns[0].children[0].componentDefinitionId)}));t={outlets:[{name:"DEFAULT",columns:i}]},e.layout=JSON.stringify(t)}}})}}wu.\u0275fac=function(e){return new(e||wu)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},wu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:wu,factory:wu.\u0275fac});class Iu extends js{constructor(e,t){super(e,t),this.componentDefinitionType=c.RxViewComponentType.TabContainer}}Iu.\u0275fac=function(e){return new(e||Iu)(n["\u0275\u0275inject"](c.RxViewDefinitionParserService),n["\u0275\u0275inject"](v.RxJsonParserService))},Iu.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Iu,factory:Iu.\u0275fac});class _u{constructor(e,t,i){this.rxTabPanelComponentDefinitionAdapterService=e,this.rxTabContainerComponentDefinitionAdapterService=t,this.rxDefinitionAdapterRegistryService=i,i.registerRuntimeAdapter(c.RxViewComponentType.TabPanel,e),i.registerRuntimeAdapter(c.RxViewComponentType.TabContainer,t)}}_u.\u0275fac=function(e){return new(e||_u)(n["\u0275\u0275inject"](wu),n["\u0275\u0275inject"](Iu),n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService))},_u.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_u,declarations:[Su,Cu],imports:[h.CommonModule,f.RuntimeViewCanvasModule,m.AdaptTabsModule],exports:[Su,Cu]}),_u.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[wu,Iu],imports:[[h.CommonModule,f.RuntimeViewCanvasModule,m.AdaptTabsModule.forRoot()]]});class Du extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.tabContainerGuids$=this.sandbox.getChildComponentGuids().pipe((0,r.shareReplay)(1)),this.tabContainerComponents$=this.sandbox.getChildComponents(e=>e.type===c.RxViewComponentType.TabContainer).pipe((0,r.shareReplay)(1),(0,r.takeUntil)(this.sandbox.destroyed$)),this.selectedTabGuid$=new o.ReplaySubject(null)}static getInitialProperties(e){return Object.assign(Object.assign({name:null},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),this.sandbox.componentProperties$.subscribe(e=>this.validate(e)),this.tabContainerGuids$.pipe((0,r.map)(e=>!(0,u.isEmpty)(e)),(0,r.take)(1)).subscribe(e=>{e||this.sandbox.setChildren([{type:c.RxViewComponentType.TabContainer,data:{label:"Tab 1"}},{type:c.RxViewComponentType.TabContainer,data:{label:"Tab 2"}}])}),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")},{label:"Active Tab Index",expression:this.getExpressionForProperty("activeTabIndex")}])})}addTab(){this.sandbox.addComponent({type:c.RxViewComponentType.TabContainer,propertiesByName:{label:"New tab"}})}removeTab(e){this.sandbox.removeComponents([e]),(0,o.combineLatest)([this.selectedTabGuid$,this.tabContainerGuids$]).pipe((0,r.take)(1),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([t,i])=>{e===t&&this.selectTab(i[0])})}selectTab(e,t=!1){this.selectedTabGuid$.next(e),t||setTimeout(()=>{this.sandbox.selectComponent(e)})}dropPredicate(){return!1}moveComponent(e,t){this.sandbox.moveComponent(e,t,this.sandbox.guid)}validate(e){this.sandbox.setValidationIssues((0,d.validateStandardProps)(e))}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Tab panel")}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}}class Ru{constructor(e){this.rxUtilityModalsService=e,this.components=[],this.destroyed$=new o.ReplaySubject(1)}ngOnInit(){this.model.tabContainerComponents$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.components=e,this.adaptTabset.checkActiveIndex()}),this.model.tabContainerComponents$.pipe((0,r.take)(1)).subscribe(e=>{this.model.selectTab((0,u.first)(e).guid,!0)})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}trackByForTabs(e,t){return t.guid}onTabClicked(e){this.activeTabChanged(e)}onTabAdded(e){e.stopPropagation(),this.model.addTab(),setTimeout(()=>{this.adaptTabset.setActiveTab(this.components.length-1,!0,new MouseEvent("click"))})}activeTabChanged({index:e,event:t}){t.stopPropagation(),this.model.tabContainerGuids$.pipe((0,r.take)(1)).subscribe(t=>{this.model.selectTab(t[e])})}onTabDropped(e){for(let t=0;t<this.components.length;t++)if(this.components[t].guid!==e[t].id){if(this.components[t].guid===e[t+1].id){this.model.moveComponent(e[t].id,t);break}this.model.moveComponent(this.components[t].guid,(0,u.findIndex)(e,{id:this.components[t].guid}));break}}removeTab({index:e}){this.rxUtilityModalsService.confirm("Are you sure you want to delete this view component?").then(t=>{t&&this.model.tabContainerGuids$.pipe((0,r.take)(1)).subscribe(t=>{this.model.removeTab(t[e])})})}}Ru.\u0275fac=function(e){return new(e||Ru)(n["\u0275\u0275directiveInject"](S.RxUtilityModalsService))},Ru.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ru,selectors:[["rx-tab-panel-design"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Na,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptTabset=e.first)}},inputs:{model:"model",isReadOnly:"isReadOnly"},decls:4,vars:5,consts:[[3,"allow-tabs-adding","enableDnD","tab-index-closed","tab-active-changed","tabClicked","tabDropped","add-tab-clicked"],["adaptTabset",""],[3,"adapt-tab-title","icon-close","id",4,"ngFor","ngForOf","ngForTrackBy"],[3,"dropPredicate"],[3,"adapt-tab-title","icon-close","id"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-tabset",0,1),n["\u0275\u0275listener"]("tab-index-closed",function(e){return t.removeTab(e)})("tab-active-changed",function(e){return t.activeTabChanged(e)})("tabClicked",function(e){return t.onTabClicked(e)})("tabDropped",function(e){return t.onTabDropped(e)})("add-tab-clicked",function(e){return t.onTabAdded(e)}),n["\u0275\u0275template"](2,Va,1,3,"adapt-tab-panel",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"rx-canvas-outlet",3)),2&e&&(n["\u0275\u0275property"]("allow-tabs-adding",!t.isReadOnly)("enableDnD",!0),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.components)("ngForTrackBy",t.trackByForTabs),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dropPredicate",t.model.dropPredicate))},directives:[m.AdaptTabsComponent,h.NgForOf,d.CanvasOutletComponent,m.AdaptTabsPanelComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8}[_nghost-%COMP%]  .adapt-tabset>.tab-container>.tab-content{display:none}[_nghost-%COMP%] >rx-canvas-outlet>rx-canvas-item-container>div>div>rx-canvas-item-column>.cdk-drop-list>.cdk-drag>.canvas-item{border-width:0;padding:0}[_nghost-%COMP%] >rx-canvas-outlet>rx-canvas-item-container>div>div>rx-canvas-item-column>.cdk-drop-list>.cdk-drag>.canvas-item>.canvas-item-header{display:none}']});class Au extends Gs{constructor(e){super(),this.tabPanelDesignComponent=e}ngOnInit(){this.tabPanelDesignComponent.model.selectedTabGuid$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(this.model.selectedTabGuid$)}}Au.\u0275fac=function(e){return new(e||Au)(n["\u0275\u0275directiveInject"](Ru))},Au.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Au,selectors:[["rx-tab-container-design"]],inputs:{model:"model"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:2,consts:[[3,"skipParentPredicate","containerComponent"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("skipParentPredicate",!0)("containerComponent",t.containerCanvasItemComponent)},directives:[d.CanvasOutletComponent],encapsulation:2});class Tu{}Tu.\u0275fac=function(e){return new(e||Tu)},Tu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Tu,declarations:[Ru,Au],imports:[h.CommonModule,m.AdaptButtonModule,m.AdaptTabsModule,d.ViewDesignerCanvasModule]}),Tu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptButtonModule,m.AdaptTabsModule,d.ViewDesignerCanvasModule]]});class Fu extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.rxViewComponentRegistryService=this.injector.get(c.RxViewComponentRegistryService),this.componentName$=this.sandbox.getChildComponents().pipe((0,r.filter)(e=>e.length>0),(0,r.map)(e=>{const t=e[0].type,i=this.rxViewComponentRegistryService.get(t);return(null==i?void 0:i.name)||c.RX_VIEW_DEFINITION.unknownPageComponent.name}))}}class Eu{}Eu.\u0275fac=function(e){return new(e||Eu)},Eu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Eu,selectors:[["rx-page-design"]],inputs:{model:"model"},decls:2,vars:3,consts:[["type","objects",3,"label"]],template:function(e,t){1&e&&(n["\u0275\u0275element"](0,"adapt-empty-state",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("label",n["\u0275\u0275pipeBind1"](1,1,t.model.componentName$))},directives:[m.AdaptEmptyStateComponent],pipes:[h.AsyncPipe],encapsulation:2,changeDetection:0});class Mu{}Mu.\u0275fac=function(e){return new(e||Mu)},Mu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mu,declarations:[Eu],imports:[h.CommonModule,m.AdaptEmptyStateModule]}),Mu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptEmptyStateModule]]});class Ou{adaptDefinition(e){e.layout=JSON.stringify({outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName,columns:[{children:e.componentDefinitions[0].guid}]}]})}}Ou.\u0275fac=function(e){return new(e||Ou)},Ou.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ou,factory:Ou.\u0275fac});class ku{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.pageComponentDefinitionAdapterService=t,this.rxDefinitionAdapterRegistryService.registerRuntimeAdapter(c.RxViewComponentType.Page,this.pageComponentDefinitionAdapterService)}}ku.\u0275fac=function(e){return new(e||ku)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Ou))},ku.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ku,declarations:[Qp],imports:[h.CommonModule,f.RuntimeViewCanvasModule],exports:[Qp]}),ku.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Ou],imports:[[h.CommonModule,f.RuntimeViewCanvasModule]]});class ju{}ju.\u0275fac=function(e){return new(e||ju)},ju.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ju,selectors:[["rx-image-design"]],decls:2,vars:0,consts:[[1,"placeholder","d-flex","justify-content-center","align-items-center"],[1,"component-icon","d-icon-attachment_image_adapt"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"span",1),n["\u0275\u0275elementEnd"]())},styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block;border:1px solid #d6d7d8}.placeholder[_ngcontent-%COMP%]{height:132px;color:#959899}.component-icon[_ngcontent-%COMP%]{height:100px;width:100px;font-size:100px;position:relative}.component-icon[_ngcontent-%COMP%]:before{position:absolute;top:0;bottom:0;right:0;left:0}']});class Pu{}var Nu;Pu.\u0275fac=function(e){return new(e||Pu)},Pu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Pu,declarations:[ju],imports:[h.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule]}),Pu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,l.RxDefinitionPickerModule,l.FormControlsModule]]}),function(e){e.Left="left",e.Center="center",e.Right="right"}(Nu||(Nu={}));const Vu=[{id:Nu.Left,name:"Left"},{id:Nu.Center,name:"Center"},{id:Nu.Right,name:"Right"}],Lu={[Nu.Left]:"justify-content-start",[Nu.Center]:"justify-content-center",[Nu.Right]:"justify-content-end"};class Bu extends f.BaseViewComponent{constructor(e,t,i,n,o,r){super(),this.rxRecordInstanceService=e,this.rxLogService=t,this.httpClient=i,this.domSanitizer=n,this.translateService=o,this.rxRecordInstanceUtilsService=r,this.state={recordDefinitionName:"",recordInstanceId:"",fieldId:"",maxWidth:"",imageUrl:null,isImageBroken:!1,alignmentStyle:"",altText:""},this.api={setProperty:this.setProperty.bind(this)},this.fileName=""}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api);this.config.pipe((0,r.distinctUntilChanged)(u.isEqual),(0,r.tap)(e=>{const t=Object.assign({},e);this.isHidden=t.hidden,!this.state.alignmentStyle&&t.alignment&&(t.alignmentStyle=this.getAlignmentStyle(t.alignment)),delete t.alignment,this.state=Object.assign(Object.assign({},this.state),t)}),(0,r.shareReplay)(1)).pipe((0,r.map)(()=>this.state.recordInstanceId?this.state.recordInstanceId:null),(0,r.filter)(e=>Boolean(e)),(0,r.distinctUntilChanged)(),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{const t=this.rxRecordInstanceService.getAttachmentDownloadUrl(this.state.recordDefinitionName,Number(this.state.fieldId),e);this.httpClient.get(t,{responseType:"blob",observe:"response"}).subscribe({next:e=>{const t=e.body;if(this.fileName=this.rxRecordInstanceUtilsService.tryParseContentDisposition(e.headers.get("content-disposition")),t&&"image"===t.type.split("/")[0]){const e=new FileReader;e.onloadend=()=>{this.state.imageUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(e.result),this.state.isImageBroken=!1,this.state.altText=this.fileName},e.onerror=this.onImageLoadFailed.bind(this),e.readAsDataURL(t)}else this.rxLogService.warning("rx-image: attachment is not a valid image."),this.onImageLoadFailed()},error:e=>{this.state.imageUrl=null,this.state.isImageBroken=!1,this.state.altText=""}})})}onImageLoadFailed(){this.state.imageUrl=null,this.state.isImageBroken=!0,this.state.altText=this.translateService.instant("com.bmc.arsys.rx.client.view-components.image.invalid-image.label",{imageName:this.fileName})}getAlignmentStyle(e){return Lu[e]}setProperty(e,t){if("hidden"!==e)return(0,o.throwError)(`Image: property ${e} is not settable.`);this.isHidden=t,this.notifyPropertyChanged(e,this.isHidden)}}Bu.\u0275fac=function(e){return new(e||Bu)(n["\u0275\u0275directiveInject"](a.RxRecordInstanceService),n["\u0275\u0275directiveInject"](s.RxLogService),n["\u0275\u0275directiveInject"](k.HttpClient),n["\u0275\u0275directiveInject"](O.DomSanitizer),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](a.RxRecordInstanceUtilsService))},Bu.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bu,selectors:[["rx-image"]],inputs:{config:"config"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"class",4,"ngIf"],["class","image",3,"src","max-width",4,"ngIf"],["role","img","class","broken-image d-icon-broken_image",4,"ngIf"],[1,"image",3,"src"],["role","img",1,"broken-image","d-icon-broken_image"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,$a,3,5,"div",0),2&e&&n["\u0275\u0275property"]("ngIf",!t.isHidden)},directives:[h.NgIf],styles:[".broken-image[_ngcontent-%COMP%]{font-size:64px}.image[_ngcontent-%COMP%]{align-self:flex-start}.image-container[_ngcontent-%COMP%]{width:100%;overflow:hidden}"]});class $u{}$u.\u0275fac=function(e){return new(e||$u)},$u.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$u,declarations:[Bu],imports:[h.CommonModule],exports:[Bu]}),$u.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule]]});class Gu{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:c.RxViewComponentType.ActionButton,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ws),properties:[{name:"recordDefinitionName"},{name:"fieldId"},{name:"recordInstance",enableExpressionEvaluation:!0},{name:"label",localizable:!0},c.RX_DISABLED_PROP_DESC,...c.RX_STANDARD_PROPS_DESC],name:"Action button",isContainerComponent:!0,options:{canBeEmbeddedInRecordEditor:!0},group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"action_button_cursor",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(bs),designComponentModel:ys,bundleId:s.RX_APPLICATION.platformBundleId})}}Gu.\u0275fac=function(e){return new(e||Gu)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},Gu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Gu,imports:[Ss,Is]}),Gu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ss,Is]]});class zu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.ButtonBar,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Ts),outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],properties:c.RX_STANDARD_PROPS_DESC,name:"Button bar",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"button_panel_o",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ms),designComponentModel:Es,options:{canBeEmbeddedInRecordEditor:!0},bundleId:s.RX_APPLICATION.platformBundleId})}}zu.\u0275fac=function(e){return new(e||zu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},zu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:zu,imports:[Fs,Os]}),zu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Fs,Os]]});class Uu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.Container,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ks),properties:c.RX_STANDARD_PROPS_DESC,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Container",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"layout",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Gs),designComponentModel:$s,options:{canBeEmbeddedInRecordEditor:!0},bundleId:s.RX_APPLICATION.platformBundleId})}}Uu.\u0275fac=function(e){return new(e||Uu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Uu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Uu,imports:[Ps,zs]}),Uu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Ps,zs]]});class qu extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.recordDefinitionName$=this.sandbox.getComponentPropertyValue("recordDefinitionName"),this.attachmentFields$=this.recordDefinitionName$.pipe((0,r.switchMap)(e=>e?this.getAttachmentFieldsFromRecordDefinition(e):(0,o.of)([]))),this.rxModalService=this.injector.get(S.RxModalService),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService),this.maxWidthUnits=[{name:"pixels",id:"px"},{name:"%",id:"%"}]}static getInitialProperties(e){return Object.assign(Object.assign({name:null,recordDefinitionName:null,recordInstanceId:null,fieldId:null,maxWidth:null,alignment:Nu.Left},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(e=>{this.sandbox.updateInspectorConfig(this.getInspector(e))}),this.recordDefinitionName$.pipe((0,r.skip)(1),(0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{const i=Object.assign(Object.assign({},t),{recordInstanceId:null,fieldId:null});this.sandbox.updateComponentProperties(i),this.sandbox.updateInspectorConfig(this.getInspector(i))}),this.attachmentFields$.pipe((0,r.withLatestFrom)(this.sandbox.componentProperties$),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(([e,t])=>{this.sandbox.updateInspectorConfig(this.getInspector(t,e))}),(0,o.combineLatest)([this.validateEmptyProp("recordDefinitionName","Record definition name cannot be blank."),this.validateEmptyProp("recordInstanceId","Record instance ID cannot be blank."),this.validateEmptyProp("fieldId","Field ID cannot be blank."),this.sandbox.getComponentPropertyValue("maxWidth").pipe((0,r.map)(e=>this.validateMaxWidth(e))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(d.validateCssClassNames)),this.sandbox.getComponentPropertyValue(c.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(d.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.sandbox.getComponentPropertyValue("name").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}])})}getAttachmentFieldsFromRecordDefinition(e){return this.rxRecordDefinitionCacheService.getRecordDefinition(e).pipe((0,r.map)(e=>e.fieldDefinitions.filter(e=>e.resourceType===a.RX_RECORD_DEFINITION.dataTypes.attachment.resourceType).map(({id:e,name:t})=>({id:e.toString(),name:t}))))}getInspector(e,t=[]){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",tooltip:new s.Tooltip("Enter a name to uniquely identify the Image view component.")}},{name:"recordDefinitionName",component:l.RxDefinitionPickerComponent,options:{label:"Record definition name",definitionType:l.RxDefinitionPickerType.RegularRecord,beforeValueChange:(t,i)=>Boolean(t)&&e.recordInstanceId&&e.fieldId?this.rxModalService.confirm({title:"Warning",modalStyle:S.RX_MODAL.modalStyles.warning,message:"Record Instance ID and Field ID will be cleared. Do you want to continue?"}):Promise.resolve(!0),required:!0}},{name:"fieldId",component:l.SelectFormControlComponent,options:{label:"Field name",options:t,required:!0}},{name:"recordInstanceId",component:l.ExpressionInspectorControlComponent,options:{label:"Record ID",isRequired:!0}},{name:"alignment",component:l.SelectFormControlComponent,options:{label:"Horizontal alignment",options:Vu}},{name:"maxWidth",component:l.StepperWithUnitsFormControlComponent,options:{label:"Maximum width",defaultUnit:"px",units:this.maxWidthUnits,stepperOptionByUnits:{px:{minValue:0},"%":{minValue:0,maxValue:100,defaultValue:100}}}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}validateEmptyProp(e,t){return this.sandbox.getComponentPropertyValue(e).pipe((0,r.map)(i=>i?null:this.sandbox.createError(t,e)))}validateMaxWidth(e){if(e){const t=e.match(/^([+-]?\d+(?:\.\d+)?)(.*)/);if(t){const e=Number(t[1]);if("%"===t[2]&&e>100)return this.sandbox.createError("Maximum width cannot be greater than 100%.");if(e<0)return this.sandbox.createError("Maximum width should be a positive number.")}}}}class Xu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:c.RxViewComponentType.Image,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Bu),name:"Image",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,options:{canBeEmbeddedInRecordEditor:!0},properties:[{name:"recordInstanceId",enableExpressionEvaluation:!0},...c.RX_STANDARD_PROPS_DESC],designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(ju),designComponentModel:qu,icon:"attachment_image_adapt",bundleId:s.RX_APPLICATION.platformBundleId})}}Xu.\u0275fac=function(e){return new(e||Xu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Xu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xu,imports:[$u,Pu]}),Xu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[$u,Pu]]});class Hu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:c.RxViewComponentType.Page,componentFactory:this.componentFactoryResolver.resolveComponentFactory(Qp),outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Page",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Eu),designComponentModel:Fu,hidden:!0,bundleId:s.RX_APPLICATION.platformBundleId})}}Hu.\u0275fac=function(e){return new(e||Hu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Hu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Hu,imports:[ku,Mu]}),Hu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[ku,Mu]]});class Wu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.RecordEditor,componentFactory:this.componentFactoryResolver.resolveComponentFactory(sl),properties:[{name:"recordInstanceId",enableExpressionEvaluation:!0},{name:"allowEdit",enableExpressionEvaluation:!0},{name:"label",localizable:!0},c.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Record editor",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"file_text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Js),designComponentModel:Ks,bundleId:s.RX_APPLICATION.platformBundleId})}}Wu.\u0275fac=function(e){return new(e||Wu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Wu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Wu,imports:[dl,el]}),Wu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[dl,el]]});class Yu extends d.RxViewComponentExpressionConfigurator{constructor(e,t,i){super(e,t,i),this.componentGuid=t,this.componentModel=i,this.rxDefinitionNameService=this.injector.get(s.RxDefinitionNameService),this.rxRecordGridUtilsService=this.injector.get(Pd),this.rxRecordDefinitionCacheService=this.injector.get(a.RxRecordDefinitionCacheService);const n=this.getComponentCommonDataDictionary().pipe((0,r.switchMap)(e=>e?i.recordDefinition$.pipe((0,r.concatMap)(e=>this.rxRecordGridUtilsService.getAssociationDescriptors(e.name).pipe((0,r.concatMap)(e=>e.length?(0,o.forkJoin)(e.map(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName).pipe((0,r.map)(t=>Object.assign(Object.assign({},e),{recordDefinition:t}))))):(0,o.of)([])),(0,r.map)(i=>e?{label:"Filter by",children:[{label:this.rxDefinitionNameService.getDisplayName(e.name),icon:"d-icon-file_o_gear",children:e.fieldDefinitions.map(e=>{const i=e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?(0,u.map)(e.optionNamesById,(i,n)=>({label:i,expression:`\${view.components.${t}.recordDefinition.fieldDefinitionsById[${e.id}].optionsById[${n}].id}`})):void 0;return{label:e.name,icon:"d-icon-file_o_gear",expression:`'${e.id}'`,children:e.resourceType===a.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:"Options",children:i}]:null,autocompleteOptions:i}})},...i?i.map(e=>({label:this.rxDefinitionNameService.getDisplayName(e.associationDefinition.name),icon:"d-icon-file_o_gear",children:e.recordDefinition.fieldDefinitions.map(t=>({label:t.name,icon:"d-icon-file_o_gear",expression:`'\${recordContext._associations.${e.associationDefinition.guid}.${e.nodeSide}[0].${t.id}}'`}))})):[]]}:[]))),(0,r.map)(t=>Object.assign(Object.assign({},e),{children:[t,...e.children]}))):(0,o.of)(null)));this.configureForProperty({propertyPath:"filterExpression",operators:this.getOperatorRowsByGroup(s.ExpressionOperatorGroup.AllServer),dataDictionary$:this.getCommonDataDictionary(n).pipe((0,r.map)(e=>[Yd.keywords,...e.filter(e=>"General"!==e.label&&"Functions"!==e.label)||[]]))})}}class Qu{constructor(e,t,i,n){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,this.rxRecordGridQueryExpressionEvaluatorService=i,this.rxRecordQueryExpressionEvaluatorService=n,t.register({type:jd.type,componentFactory:this.componentFactoryResolver.resolveComponentFactory(ou),properties:[{name:"recordDefinitionName",type:c.ViewComponentPropertyType.String},{name:"enableRowSelection",type:c.ViewComponentPropertyType.String},{name:"enableFiltering",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"getDataForHiddenColumns",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"requiredFilters",type:c.ViewComponentPropertyType.Number,designType:c.ViewComponentPropertyType.Number,enableExpressionEvaluation:!0},{name:"showDataForAllLocales",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"expandable",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean},{name:"bordered",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"striped",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"defaultFilterPreset",type:c.ViewComponentPropertyType.String},{name:"filters",type:c.ViewComponentPropertyType.String},{name:"filterExpression",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordGridQueryExpressionEvaluatorService},{name:"selectedRows",type:c.ViewComponentPropertyType.String},{name:"firstSelectedRow",type:c.ViewComponentPropertyType.String},{name:"clickableRow",type:c.ViewComponentPropertyType.String},{name:"selectedRowCount",type:c.ViewComponentPropertyType.Number},{name:"totalRowCount",type:c.ViewComponentPropertyType.Number},{name:"isUserAllowedToDeleteRecords",type:c.ViewComponentPropertyType.Boolean},{name:"associationDefinitionName",type:c.ViewComponentPropertyType.String},{name:"associatedRecordNodeSide",type:c.ViewComponentPropertyType.String},{name:"associatedRecordId",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"associatedRoleName",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"enableFilterPresets",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"queryExpression",type:c.ViewComponentPropertyType.String},{name:"lastRefreshTime",type:c.ViewComponentPropertyType.String},{name:"viewPresetSelector",enableExpressionEvaluation:!0},c.RX_AVAILABLE_ON_DEVICES_PROP_DESC],outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName},{name:jd.rowActionsOutletName}],name:"Record grid",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"table",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(zp),designComponentModel:Gp,expressionConfigurator:Yu,bundleId:s.RX_APPLICATION.platformBundleId},{type:jd.components.column,configPropertyName:"columns",properties:[{name:"title",type:c.ViewComponentPropertyType.String,localizable:!0},{name:"fieldId",type:c.ViewComponentPropertyType.String},{name:"visible",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"sortable",type:c.ViewComponentPropertyType.String},{name:"filterable",type:c.ViewComponentPropertyType.String,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0},{name:"clickable",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0},{name:"index",type:c.ViewComponentPropertyType.Number},{name:"alignment",type:c.ViewComponentPropertyType.String},{name:"cellDisplayProperties",designType:c.ViewComponentPropertyType.Array,type:c.ViewComponentPropertyType.Array},{name:"wrapText",type:c.ViewComponentPropertyType.Boolean},{name:"typeaheadKeystrokeCount",type:c.ViewComponentPropertyType.Number},{name:"additionalQueryCriteria",type:c.ViewComponentPropertyType.String,enableExpressionEvaluation:!0,evaluatorService:this.rxRecordQueryExpressionEvaluatorService}],isDataComponent:!0,isContainerComponent:!0},{type:jd.components.filter,configPropertyName:"recordGridFilters",properties:[{name:"value",type:c.ViewComponentPropertyType.String},{name:"fieldId",type:c.ViewComponentPropertyType.String},{name:"$DISPLAYVALUE$",type:c.ViewComponentPropertyType.String},{name:"label",localizable:!0}],isDataComponent:!0},{type:jd.components.filterPreset,configPropertyName:"predefinedFilterPresets",properties:[{name:"title",type:c.ViewComponentPropertyType.String,localizable:!0},{name:"filters",type:c.ViewComponentPropertyType.String},{name:"filterExpression",enableExpressionEvaluation:!0,evaluatorService:this.rxRecordGridQueryExpressionEvaluatorService}],isDataComponent:!0,isContainerComponent:!0},{type:jd.components.viewPreset,configPropertyName:"viewPresets",properties:[{name:"viewPresetGuid",type:c.ViewComponentPropertyType.String},{name:"filters",type:c.ViewComponentPropertyType.String}],isDataComponent:!0,isContainerComponent:!0},{type:jd.components.columnViewPreset,configPropertyName:"columnViewPresets",properties:[{name:"fieldId",type:c.ViewComponentPropertyType.String},{name:"index",designType:c.ViewComponentPropertyType.Number,type:c.ViewComponentPropertyType.Number},{name:"visible",designType:c.ViewComponentPropertyType.Boolean,type:c.ViewComponentPropertyType.Boolean},{name:"sortable",designType:c.ViewComponentPropertyType.Object,type:c.ViewComponentPropertyType.Object}],isDataComponent:!0,isContainerComponent:!0})}}Qu.\u0275fac=function(e){return new(e||Qu)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](au),n["\u0275\u0275inject"](c.RxRecordQueryExpressionEvaluatorService))},Qu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Qu,imports:[su,Yp]}),Qu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[su,Yp]]});class Ku{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxRichTextExpressionEvaluatorService=i,e.register({type:c.RxViewComponentType.RichText,componentFactory:this.componentFactoryResolver.resolveComponentFactory(lu),properties:[{name:"html",enableExpressionEvaluation:!0,evaluatorService:this.rxRichTextExpressionEvaluatorService,localizable:!0},...c.RX_STANDARD_PROPS_DESC],name:"Rich text",isContainerComponent:!0,options:{canBeEmbeddedInRecordEditor:!0},group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"text",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(hu),designComponentModel:mu,bundleId:s.RX_APPLICATION.platformBundleId})}}Ku.\u0275fac=function(e){return new(e||Ku)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](cu))},Ku.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ku,imports:[pu,gu]}),Ku.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[du],imports:[[pu,gu]]});class Ju extends d.ViewDesignerComponentModel{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.componentProperties$=this.sandbox.componentProperties$,this.hiddenOnCanvas$=new o.BehaviorSubject(!1),this.selectedTabGuid$=new o.Subject,this.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector())}),(0,o.combineLatest)([this.sandbox.getComponentPropertyValue("label").pipe((0,r.map)(e=>e?null:this.sandbox.createError("Label cannot be blank.","label"))),this.sandbox.getComponentPropertyValue("styles").pipe((0,r.map)(d.validateCssClassNames)),this.sandbox.getComponentPropertyValue(c.RX_AVAILABLE_ON_DEVICES_PROP_NAME).pipe((0,r.map)(d.validateAvailableOnDevicesProp))]).pipe((0,r.map)(u.flatten),(0,r.map)(u.compact)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.selectedTabGuid$.pipe((0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.hiddenOnCanvas$.next(this.sandbox.guid!==e)}),this.sandbox.getComponentPropertyValue("columnCount").pipe((0,r.skip)(1)).subscribe(e=>{this.sandbox.setLayout(this.getDefaultColumnSpans(Number(e)))}),this.sandbox.getComponentPropertyValue("label").subscribe(e=>{const t=e?`${this.sandbox.descriptor.name} (${e})`:this.sandbox.descriptor.name;this.sandbox.setSettablePropertiesDataDictionary(t,[{label:"Hidden",expression:this.getExpressionForProperty("hidden")}]),this.sandbox.setBreadcrumbs(e)})}static getInitialProperties(e){return Object.assign(Object.assign({columnCount:"1",enableLazyLoading:!1,label:"",rowWrap:Vs.Sm},c.RX_STANDARD_PROPS_DEFAULT_VALUES),e)}setContainerLayout(e){this.sandbox.setLayout(e)}getDefaultColumnSpans(e){const t=[],i=Math.floor(Ls.maxColumnSpan/e);return(0,u.times)(e,()=>t.push(i)),t[t.length-1]=Ls.maxColumnSpan%e+i,t}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"label",component:l.TextFormControlComponent,options:{label:"Label",required:!0}},{name:"enableLazyLoading",component:l.SwitchFormControlComponent,options:{label:"Enable lazy loading"}},{name:"columnCount",component:l.SelectFormControlComponent,options:{label:"Number of columns",required:!0,tooltip:new s.Tooltip("Resize container columns on the canvas by dragging the dashed column separator line."),options:(0,u.times)(6,e=>({id:(++e).toString(),name:e.toString()}))}},{name:"rowWrap",component:l.SelectFormControlComponent,options:{label:"Row wrap",sortAlphabetically:!1,options:(0,u.values)(Ls.rowWrapOptions),tooltip:new s.Tooltip("The Row wrap property controls the layout of multi-column containers based on\n                    the width of the view. When the width of the view is decreased to a width less\n                    than the selected Row wrap value, each container column after the first one\n                    wraps onto a new line.")}},...(0,d.getStandardPropsInspectorConfigs)()]}]}}}class Zu{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.TabPanel,componentFactory:t.resolveComponentFactory(Su),properties:c.RX_STANDARD_PROPS_DESC,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],options:{canBeEmbeddedInRecordEditor:!0},name:"Tab panel",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"app_tab",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Ru),designComponentModel:Du,bundleId:s.RX_APPLICATION.platformBundleId},{type:c.RxViewComponentType.TabContainer,componentFactory:t.resolveComponentFactory(Cu),properties:[...c.RX_STANDARD_PROPS_DESC,{name:"label",type:c.ViewComponentPropertyType.String,localizable:!0},{name:"enableLazyLoading",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean,enableExpressionEvaluation:!0}],outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Tab",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,hidden:!0,icon:"app_tab",designComponentFactory:t.resolveComponentFactory(Au),designComponentModel:Ju,bundleId:s.RX_APPLICATION.platformBundleId})}}Zu.\u0275fac=function(e){return new(e||Zu)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Zu.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Zu,imports:[_u,Tu]}),Zu.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[_u,Tu]]});class em extends d.ViewDesignerComponentModel{static getInitialProperties(e){return Object.assign({serviceRequestId:null,serviceRequestName:null,serviceRequestGuid:null},e)}rxInit(){this.sandbox.getComponentPropertyValue("serviceRequestId").pipe((0,r.map)(e=>e?[]:[this.sandbox.createError("Selected service request ID cannot be blank.","serviceRequestId")]),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>this.sandbox.setValidationIssues(e)),this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(()=>{this.sandbox.updateInspectorConfig(this.getInspector()),this.sandbox.setCommonDataDictionary(this.getCommonProps())})}getCommonProps(){return{label:this.sandbox.descriptor.name,expression:this.getExpressionForProperty("api"),children:[{label:"Service request ID",expression:this.getExpressionForProperty("serviceRequestId")},{label:"Service request name",expression:this.getExpressionForProperty("serviceRequestName")},{label:"Service request GUID",expression:this.getExpressionForProperty("serviceRequestGuid")}]}}getInspector(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"serviceRequestId",component:l.ExpressionInspectorControlComponent,options:{label:"Service request ID",isRequired:!0}},{name:"serviceRequestName",component:l.ExpressionInspectorControlComponent,options:{label:"Service request name"}},{name:"serviceRequestGuid",component:l.ExpressionInspectorControlComponent,options:{label:"Service request GUID"}}]}]}}}class tm{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,this.rxViewComponentRegistryService.register({type:c.RxViewComponentType.ServiceList,componentFactory:this.componentFactoryResolver.resolveComponentFactory(yu),name:"Service list",group:d.RX_VIEW_DESIGNER.stencilGroups.chatbotComponents.label,options:{canBeEmbeddedInRecordEditor:!0},canBeInsertedInto:e=>e.includes(c.RxViewComponentType.RecordEditor),properties:[{name:"serviceRequestId",enableExpressionEvaluation:!0,type:c.ViewComponentPropertyType.String},{name:"serviceRequestName",enableExpressionEvaluation:!0,type:c.ViewComponentPropertyType.String},{name:"serviceRequestGuid",enableExpressionEvaluation:!0,type:c.ViewComponentPropertyType.String}],designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(vu),designComponentModel:em,icon:"field_dropdown",bundleId:s.RX_APPLICATION.chatbotBundleId,availableInBundles:[s.RX_APPLICATION.chatbotBundleId]})}}tm.\u0275fac=function(e){return new(e||tm)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},tm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:tm,imports:[bu,xu]}),tm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[bu,xu]]});class im extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.label=`Unknown component: ${this.sandbox.componentType}`}rxInit(){this.sandbox.componentProperties$.pipe((0,r.take)(1)).subscribe(e=>{this.sandbox.updateInspectorConfig(this.getInspector(e)),this.sandbox.setValidationIssues([this.sandbox.createError(this.label)])})}getInspector(e){return{inspectorSectionConfigs:[{label:"General",controls:(0,u.keys)(e).map(e=>({name:e,component:l.TextFormControlComponent,options:{label:e},isDisabled:!0}))}]}}}class nm{}nm.\u0275fac=function(e){return new(e||nm)},nm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:nm,selectors:[["rx-unknown"]],inputs:{model:"model"},decls:1,vars:1,consts:[["type","objects",3,"label"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-empty-state",0),2&e&&n["\u0275\u0275property"]("label",t.model.label)},directives:[m.AdaptEmptyStateComponent],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{border:1px solid #d6d7d8;display:block;position:relative;padding:1rem;height:200px}'],changeDetection:0});class om{}om.\u0275fac=function(e){return new(e||om)},om.\u0275mod=n["\u0275\u0275defineNgModule"]({type:om,declarations:[nm],imports:[h.CommonModule,m.AdaptEmptyStateModule]}),om.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptEmptyStateModule]]});class rm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:c.RxViewComponentType.Unknown,outlets:[{name:c.RX_VIEW_DEFINITION.defaultOutletName}],name:"Unknown",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(nm),designComponentModel:im,hidden:!0,bundleId:s.RX_APPLICATION.platformBundleId})}}rm.\u0275fac=function(e){return new(e||rm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},rm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:rm,imports:[om]}),rm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[om]]});const am={commands:{createUserMapping:"com.bmc.arsys.rx.application.chat.command.CreateChatUserMappingCommand"},mappingStatus:{check:"check",failed:"failed",inProgress:"inProgress",missingParameters:"missingParameters",pending:"pending",success:"success"},messages:{check:"com.bmc.arsys.rx.settings.check",failed:"com.bmc.arsys.rx.settings.failed",inProgress:"com.bmc.arsys.rx.settings.inProgress",missingParameters:"com.bmc.arsys.rx.settings.missingParameters",pending:"com.bmc.arsys.rx.settings.pending",success:"com.bmc.arsys.rx.settings.success"}};class sm extends f.BaseViewComponent{constructor(e,t,i){super(),this.translateService=e,this.rxCommandFactoryService=t,this.rxNotificationService=i,this.encryptedChatUserAndChatId=null,this.chatbotProvider=null,this.isMappingInProgress=!1,this.message="",this.mappingStatus=""}ngOnInit(){this.isMappingInProgress=!1,this.config.pipe((0,r.take)(1)).subscribe(e=>{this.encryptedChatUserAndChatId=e.encryptedChatUserAndChatId,this.chatbotProvider=e.chatbotProvider,this.encryptedChatUserAndChatId?this.mappingStatus=am.mappingStatus.pending:(this.mappingStatus=am.mappingStatus.missingParameters,this.rxNotificationService.addErrorMessage(this.translateService.instant(am.messages.missingParameters))),this.updateMessage()})}isMappingButtonVisible(){return this.mappingStatus===am.mappingStatus.pending}mapUser(){this.isMappingInProgress=!0,this.mappingStatus=am.mappingStatus.inProgress,this.updateMessage();const e={encryptedChatUserAndChatId:this.encryptedChatUserAndChatId,chatbotProvider:this.chatbotProvider};this.rxCommandFactoryService.forResourceType(am.commands.createUserMapping).execute(e).pipe((0,r.catchError)(e=>(this.mappingStatus=am.mappingStatus.failed,this.updateMessage(),this.isMappingInProgress=!1,(0,o.throwError)(e)))).subscribe(()=>{this.mappingStatus=am.mappingStatus.success,this.updateMessage(),this.isMappingInProgress=!1})}updateMessage(){this.message=this.translateService.instant(am.messages[this.mappingStatus])}}sm.\u0275fac=function(e){return new(e||sm)(n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxCommandFactoryService),n["\u0275\u0275directiveInject"](s.RxNotificationService))},sm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:sm,selectors:[["com-bmc-arsys-rx-user-mapping"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:9,consts:[[1,"text-center","mt-1","container"],[1,"text-logo"],[1,"mt-4"],["rx-id","verify-bmc-cloud-account","adapt-button","","btn-type","primary","size","large","type","button",1,"mt-4",3,"disabled","hidden","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div"),n["\u0275\u0275elementStart"](2,"span",1),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",2),n["\u0275\u0275text"](6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"div"),n["\u0275\u0275elementStart"](8,"button",3),n["\u0275\u0275listener"]("click",function(){return t.mapUser()}),n["\u0275\u0275text"](9),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](4,5,"com.bmc.arsys.rx.settings.title")),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](t.message),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.isMappingInProgress)("hidden",!t.isMappingButtonVisible()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](10,7,"com.bmc.arsys.rx.settings.verify-cloud-account")," "))},directives:[m.AdaptButtonComponent],pipes:[p.TranslatePipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.container[_ngcontent-%COMP%]{width:400px;margin:auto}.text-logo[_ngcontent-%COMP%]{font-size:var(--h1-font-size)}']});class lm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"com-bmc-arsys-rx-user-mapping",componentFactory:this.componentFactoryResolver.resolveComponentFactory(sm),name:"Chatbot User Mapping",availableInBundles:[s.RX_APPLICATION.settingsBundleId],hidden:!0,properties:[{name:"encryptedChatUserAndChatId",enableExpressionEvaluation:!0},{name:"chatbotProvider",enableExpressionEvaluation:!0}]})}}lm.\u0275fac=function(e){return new(e||lm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},lm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:lm,declarations:[sm],imports:[m.AdaptButtonModule,h.CommonModule,b.FormsModule,p.TranslateModule]}),lm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptButtonModule,h.CommonModule,b.FormsModule,p.TranslateModule]]});const cm="LOGIN_SUCCESSFUL";class dm extends f.BaseViewComponent{ngOnInit(){var e;null===(e=window.opener)||void 0===e||e.postMessage(cm,"*")}}dm.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](dm)))(t||dm)}}(),dm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:dm,selectors:[["com-bmc-arsys-rx-settings-iframe-login-event"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["src","/com.bmc.arsys.rx.settings/resources/images/login-successful.gif","alt","Login successful",1,"login-verification"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"img",0)},styles:[".login-verification[_ngcontent-%COMP%]{top:50%;left:50%;position:fixed;transform:translate(-50%,-50%);width:670px}"]});class pm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"com-bmc-arsys-rx-settings-iframe-login-event",componentFactory:this.componentFactoryResolver.resolveComponentFactory(dm),name:"IFrame Login Event",availableInBundles:[s.RX_APPLICATION.settingsBundleId],hidden:!0})}}pm.\u0275fac=function(e){return new(e||pm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},pm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pm,declarations:[dm],imports:[h.CommonModule]}),pm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule]]});class um{constructor(e){this.rxSmartReportingService=e}ngOnInit(){this.rxSmartReportingService.openSmartReporting("_self",{query:this.runtimeViewModelApi.getViewInputParameters().param}).subscribe()}}um.\u0275fac=function(e){return new(e||um)(n["\u0275\u0275directiveInject"](s.RxSmartReportingService))},um.\u0275cmp=n["\u0275\u0275defineComponent"]({type:um,selectors:[["rx-smart-reporting-redirector"]],inputs:{runtimeViewModelApi:"runtimeViewModelApi"},decls:3,vars:3,consts:[[1,"p-3"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.smart-reporting-redirector.message")))},pipes:[p.TranslatePipe],encapsulation:2});class mm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-smart-reporting-redirector",componentFactory:this.componentFactoryResolver.resolveComponentFactory(um),name:"Smart reporting redirector",isPageComponent:!0,hidden:!0,availableInBundles:[s.RX_APPLICATION.settingsBundleId]})}}mm.\u0275fac=function(e){return new(e||mm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},mm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:mm,declarations:[um],imports:[p.TranslateModule]}),mm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[p.TranslateModule]]});const hm="23503_SHARABLE_VIEW_PRESET",fm={user:{recordDefinitionName:"CTM:People",fields:{fullName:1000000017,lastName:1000000018,firstName:1000000019,loginId:a.RX_RECORD_DEFINITION.coreFieldIds.assignee,recordId:a.RX_RECORD_DEFINITION.coreFieldIds.id,email:1000000048}},sharedViewPreset:{recordDefinitionName:"com.bmc.arsys.rx.settings:SharedViewPreset",fields:{viewPresetName:58200,viewName:58201,viewPresetInfo:58202,viewPresetSelectorGuid:58203,sharedUsers:58204,id:a.RX_RECORD_DEFINITION.coreFieldIds.id,ownerFullName:58205}}};class gm{constructor(e,t,i,n){this.rxRecordInstanceDataPageService=e,this.rxRecordInstanceService=t,this.httpClient=i,this.rxJsonParserService=n}searchUsers(e){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:fm.user.recordDefinitionName,propertySelection:[fm.user.fields.fullName,fm.user.fields.email,fm.user.fields.loginId],pageSize:s.RX_DATA_PAGE.defaultPageSize,queryExpression:[fm.user.fields.fullName,fm.user.fields.email,fm.user.fields.loginId].map(t=>`('${t}' LIKE "%${e}%")`).join(" OR ")}}).pipe((0,r.map)(e=>e.data))}getSharedViewPresets(e,t){return this.rxRecordInstanceDataPageService.post({params:{recorddefinition:fm.sharedViewPreset.recordDefinitionName,queryExpression:[`'${fm.sharedViewPreset.fields.viewPresetSelectorGuid}' = "${e}"`].join(" AND "),propertySelection:[fm.sharedViewPreset.fields.viewPresetName,fm.sharedViewPreset.fields.id,fm.sharedViewPreset.fields.ownerFullName,fm.sharedViewPreset.fields.sharedUsers]}}).pipe((0,r.map)(e=>e.data.filter(e=>this.rxJsonParserService.tryParseJson(e[fm.sharedViewPreset.fields.sharedUsers],[]).find(e=>e.loginId===t))))}getSharedViewPreset(e){return this.rxRecordInstanceService.get(fm.sharedViewPreset.recordDefinitionName,e)}createSharedViewPreset(e){return this.httpClient.post(this.getUrl(),e,{responseType:"text"})}updateSharedViewPreset(e,t){return this.httpClient.put(this.getUrl(e),t)}deleteSharedViewPreset(e){return this.rxRecordInstanceService.delete(fm.sharedViewPreset.recordDefinitionName,e)}getUrl(e){return e?`/api/rx/application/configuration/viewpreset/${e}`:"/api/rx/application/configuration/viewpreset"}}gm.\u0275fac=function(e){return new(e||gm)(n["\u0275\u0275inject"](a.RxRecordInstanceDataPageService),n["\u0275\u0275inject"](a.RxRecordInstanceService),n["\u0275\u0275inject"](k.HttpClient),n["\u0275\u0275inject"](v.RxJsonParserService))},gm.\u0275prov=n["\u0275\u0275defineInjectable"]({token:gm,factory:gm.\u0275fac,providedIn:"root"});class vm{constructor(e,t,i,n){this.rxShareViewPresetDataService=e,this.rxStringService=t,this.rxJsonParserService=i,this.rxCurrentUserService=n}getAutocompleteSearch(e){return e.pipe((0,r.debounceTime)(250),(0,r.distinctUntilChanged)(),(0,r.switchMap)(e=>{const t=e.trim();return t.length>0?this.rxShareViewPresetDataService.searchUsers(t):(0,o.of)([])}),(0,r.map)(e=>e.map(e=>({text:e[fm.user.fields.fullName],data:{loginId:e[fm.user.fields.loginId],fullName:e[fm.user.fields.fullName],emailAddress:e[fm.user.fields.email]}}))))}getSharedViewPresetUsers(e){return this.rxShareViewPresetDataService.getSharedViewPreset(e).pipe((0,r.map)(e=>this.rxJsonParserService.tryParseJson(null==e?void 0:e.fieldInstances[fm.sharedViewPreset.fields.sharedUsers].value,[])))}getSharedViewPresetData(e){return this.rxShareViewPresetDataService.getSharedViewPreset(e).pipe((0,r.map)(e=>({viewPresetName:null==e?void 0:e.fieldInstances[fm.sharedViewPreset.fields.viewPresetName].value,sharedViewPresets:this.rxJsonParserService.tryParseJson(null==e?void 0:e.fieldInstances[fm.sharedViewPreset.fields.viewPresetInfo].value,null)})))}createUpdateSharedViewPreset(e,t){return t?this.rxShareViewPresetDataService.updateSharedViewPreset(t,e).pipe((0,r.map)(()=>t)):this.rxShareViewPresetDataService.createSharedViewPreset(e)}saveSharedViewPreset(e,t){const i=e.sharedUsers?(0,o.of)(e.sharedUsers):this.getSharedViewPresetUsers(t);return(0,o.combineLatest)([e.runtimeViewModelApi.shareViewPreset(e.presetSelectorGuid),i]).pipe((0,r.map)(([t,i])=>({viewPresetName:e.currentViewPreset.label,viewName:"",viewPresetGuid:e.presetSelectorGuid,submitter:this.rxCurrentUserService.get().fullName,sharedUsers:i,presetInformation:JSON.stringify(t)})),(0,r.switchMap)(e=>this.createUpdateSharedViewPreset(e,t)))}deleteSharedViewPreset(e){return this.rxShareViewPresetDataService.deleteSharedViewPreset(e)}getSharedViewPresetsForCurrentUser(e){return this.rxShareViewPresetDataService.getSharedViewPresets(e,this.rxCurrentUserService.getName()).pipe((0,r.map)(e=>e.map(e=>({label:e[fm.sharedViewPreset.fields.viewPresetName],guid:e[fm.sharedViewPreset.fields.id],ownerFullName:e[fm.sharedViewPreset.fields.ownerFullName]}))))}}vm.\u0275fac=function(e){return new(e||vm)(n["\u0275\u0275inject"](gm),n["\u0275\u0275inject"](v.RxStringService),n["\u0275\u0275inject"](v.RxJsonParserService),n["\u0275\u0275inject"](s.RxCurrentUserService))},vm.\u0275prov=n["\u0275\u0275defineInjectable"]({token:vm,factory:vm.\u0275fac,providedIn:"root"});class xm{constructor(e,t){this.rxUserPreferencesService=e,this.rxShareViewPresetService=t}save(e){const t=e.customViewPresetOptions.map(e=>(0,u.pick)(e,["guid","label","userSharedViewPresetGuid"])),i=e.sharedViewPresetOptions.map(e=>(0,u.pick)(e,["guid","label"])),n={preferences:JSON.stringify({customViewPresets:t,sharedViewPresets:i,viewPresetGuid:e.appliedViewPresetOption.guid}),componentTypeName:c.RxViewComponentType.ViewPresetSelector,version:"1.0",componentId:this.viewPresetSelectorGuid};return this.rxUserPreferencesService.setUiComponentPreferences(n,this.viewPresetSelectorGuid)}applyUserPreferences(e,t){return this.viewPresetSelectorGuid=e,this.get(e).pipe((0,r.map)(e=>(t.customViewPresetOptions=e.customViewPresets,e.sharedViewPresets&&(t.sharedViewPresetOptions=e.sharedViewPresets.map(e=>Object.assign(Object.assign({},e),{isShared:!0}))),t.appliedViewPresetOption=(0,u.find)(t.customViewPresetOptions,{guid:e.viewPresetGuid})||(0,u.find)(t.systemViewPresetOptions,{guid:e.viewPresetGuid})||(0,u.find)(t.sharedViewPresetOptions,{guid:e.viewPresetGuid})||t.systemViewPresetOptions[0],t)),(0,r.switchMap)(e=>this.checkSharedViewPresets(e)))}get(e){return this.rxUserPreferencesService.getUiComponentPreferences(e).pipe((0,r.map)(e=>null!=e?e:{customViewPresets:[],sharedViewPresets:[],viewPresetGuid:null}))}checkSharedViewPresets(e){return e.sharedViewPresetOptions.length?this.rxShareViewPresetService.getSharedViewPresetsForCurrentUser(this.viewPresetSelectorGuid).pipe((0,r.map)(t=>{let i=!1,n=null;if(e.sharedViewPresetOptions=e.sharedViewPresetOptions.reduce((e,n)=>{const o=t.find(e=>e.guid===n.guid);return o?(n.label!==o.label&&(n.label=o.label,i=!0),e.push(n)):i=!0,e},[]),e.appliedViewPresetOption.isShared){const t=e.sharedViewPresetOptions.find(t=>t.guid===e.appliedViewPresetOption.guid);t&&e.isSharingEnabled||(t||(n=e.appliedViewPresetOption.guid),e.appliedViewPresetOption=e.systemViewPresetOptions[0])}return{state:e,shouldUpdatePreferences:i,removedPresetGuid:n}})):(0,o.of)({state:e,shouldUpdatePreferences:!1,removedPresetGuid:null})}}xm.\u0275fac=function(e){return new(e||xm)(n["\u0275\u0275inject"](s.RxUserPreferencesService),n["\u0275\u0275inject"](vm))},xm.\u0275prov=n["\u0275\u0275defineInjectable"]({token:xm,factory:xm.\u0275fac});class ym extends S.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.viewPresetNameFormControl=new b.FormControl(""),this.destroyed$=new o.ReplaySubject(1),this.modalData=this.activeModalRef.getData(),this.viewPresetNameFormControl.setValue(this.modalData.viewPresetName),this.viewPresetNameFormControl.valueChanges.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.viewPresetNameFormControl.dirty&&e===this.modalData.viewPresetName&&this.viewPresetNameFormControl.reset(this.modalData.viewPresetName)})}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}save(){this.activeModalRef.close(this.generateUniqueViewPresetName(this.viewPresetNameFormControl.value))}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}isViewPresetNameUnique(e){const t=e.trim();return!this.modalData.existingViewPresetNames.some(e=>e===t)}generateUniqueViewPresetName(e){const t=e.trim();let i=t,n=1;for(;!this.isViewPresetNameUnique(i);)i=`${t}-${n++}`;return i}}ym.\u0275fac=function(e){return new(e||ym)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},ym.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ym,selectors:[["rx-rename-view-preset"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:12,consts:[[1,"modal-body"],["name","viewPresetName","rx-id","view-preset-name-field","required","true","rxNoWhitespace","",3,"formControl","label","maxlength","autofocus"],["class","text-info m-0 pt-1",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"text-info","m-0","pt-1"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"adapt-rx-textfield",1),n["\u0275\u0275template"](2,Ga,3,3,"p",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"button",4),n["\u0275\u0275listener"]("click",function(){return t.save()}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"button",5),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.viewPresetNameFormControl)("label",t.modalData.fieldLabel)("maxlength",254)("autofocus",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isViewPresetNameUnique(t.viewPresetNameFormControl.value)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.viewPresetNameFormControl.invalid||t.viewPresetNameFormControl.pristine),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,8,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,10,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[m.AdaptRxTextfieldComponent,b.RequiredValidator,v.RxNoWhitespaceValidator,b.NgControlStatus,b.FormControlDirective,b.MaxLengthValidator,h.NgIf,m.AdaptButtonComponent],pipes:[p.TranslatePipe],encapsulation:2});class bm{constructor(e){this.translateService=e,this.users=[],this.remove=new n.EventEmitter,this.recordGridConfig$=this.getRecordGridConfig()}ngOnChanges(e){e.users.currentValue&&!e.users.firstChange&&this.recordGrid.api.refresh().subscribe()}getRecordGridConfig(){const e=[{fieldId:"fullName",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.grid.column.name.title")},{fieldId:"emailAddress",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.grid.column.email.title")}],t={fieldDefinitions:[{id:"fullName",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character},{id:"emailAddress",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}]};return(0,o.of)({columns:e,enableFiltering:!1,enableRowSelection:op.Multiple,recordIdField:"loginId",styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,actionButtons:[{label:this.translateService.instant("com.bmc.arsys.rx.client.common.remove.label"),style:"tertiary",iconCls:"minus_circle_o",disabled:()=>0===this.recordGrid.api.getSelectedRows().length,actions:[{name:()=>{const e=this.recordGrid.api.getSelectedRows().map(e=>e.loginId);this.remove.emit(e)}}]}],getRecordDefinition:()=>(0,o.of)(t),getData:()=>(0,o.of)({data:this.users,totalSize:this.users.length})})}}bm.\u0275fac=function(e){return new(e||bm)(n["\u0275\u0275directiveInject"](p.TranslateService))},bm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bm,selectors:[["rx-share-view-preset-users-grid"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ou,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},inputs:{users:"users"},outputs:{remove:"remove"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"config"]],template:function(e,t){1&e&&n["\u0275\u0275element"](0,"rx-record-grid",0),2&e&&n["\u0275\u0275property"]("config",t.recordGridConfig$)},directives:[ou],encapsulation:2,changeDetection:0});class Cm extends S.RxModalClass{constructor(e,t,i,n,a,s,l){super(e,t),this.activeModalRef=e,this.injector=t,this.formBuilder=i,this.translateService=n,this.rxShareViewPresetService=a,this.rxCurrentUserService=s,this.rxNotificationService=l,this.maxRecipients=100,this.strings={users:{label:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.users-control.label"),placeholder:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.users-control.placeholder")},addButton:this.translateService.instant("com.bmc.arsys.rx.client.common.add.label"),notifyRecipients:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.notify-recipients.label"),recipients:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.recipients.label"),savedNotification:{title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.saved-notification.title"),message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.saved-notification.message")},removedNotification:{title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.removed-notification.title"),message:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.removed-notification.message")},maxRecipientsWarning:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.max-users-warning.message",{maxUserCount:this.maxRecipients})},this.form=this.formBuilder.group({users:this.formBuilder.control([]),notifyRecipients:this.formBuilder.control(!1)}),this.modalData=this.activeModalRef.getData(),this.runtimeViewModelApi=this.modalData.runtimeViewModelApi,this.selectedUsers=[],this.destroyed$=new o.ReplaySubject(1),this.currentUserLoginName=this.rxCurrentUserService.getName(),this.isSelectedUsersChanged=!1,this.search=e=>this.rxShareViewPresetService.getAutocompleteSearch(e).pipe((0,r.map)(e=>{const t=this.selectedUsers.map(e=>e.loginId),i=this.form.get("users").value.map(({data:e})=>e.loginId);return e.filter(e=>e.data.loginId!==this.currentUserLoginName&&!t.includes(e.data.loginId)&&!i.includes(e.data.loginId))}))}get isRecipientsLimitReached(){return this.form.get("users").value.length+this.selectedUsers.length>this.maxRecipients}ngOnInit(){super.ngOnInit(),this.loadExistingSharedViewPresetUsers()}loadExistingSharedViewPresetUsers(){this.modalData.currentViewPreset.userSharedViewPresetGuid&&(this.sharedViewPresetInstanceGuid=this.modalData.currentViewPreset.userSharedViewPresetGuid,this.rxShareViewPresetService.getSharedViewPresetUsers(this.sharedViewPresetInstanceGuid).subscribe(e=>{this.selectedUsers=e}))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}save(){this.selectedUsers.length?this.saveViewPreset():this.removeViewPreset()}removeViewPreset(){this.rxShareViewPresetService.deleteSharedViewPreset(this.sharedViewPresetInstanceGuid).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.strings.removedNotification.message,this.strings.removedNotification.title),this.activeModalRef.close(null)})}saveViewPreset(){this.rxShareViewPresetService.saveSharedViewPreset({runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.modalData.currentViewPreset,presetSelectorGuid:this.modalData.presetSelectorGuid,sharedUsers:this.selectedUsers},this.sharedViewPresetInstanceGuid).subscribe(e=>{this.rxNotificationService.addSuccessMessage(this.strings.savedNotification.message,this.strings.savedNotification.title),this.activeModalRef.close(e)})}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}onAdd(){const e=this.form.get("users").value.map(e=>Object.assign({},e.data));this.selectedUsers=this.selectedUsers.concat(e),this.form.get("users").setValue([]),this.isSelectedUsersChanged=!0}removeSelectedUsers(e){this.selectedUsers=this.selectedUsers.filter(t=>!e.includes(t.loginId)),this.isSelectedUsersChanged=!0,this.markAsDirty()}isSaveButtonDisabled(){return!(this.sharedViewPresetInstanceGuid&&this.isSelectedUsersChanged||!this.sharedViewPresetInstanceGuid&&this.selectedUsers.length>0)}}Cm.\u0275fac=function(e){return new(e||Cm)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](b.FormBuilder),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](vm),n["\u0275\u0275directiveInject"](s.RxCurrentUserService),n["\u0275\u0275directiveInject"](s.RxNotificationService))},Cm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Cm,selectors:[["rx-share-view-preset"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:21,vars:19,consts:[[1,"modal-body"],[3,"formGroup"],[1,"row","row-no-gutters"],[1,"col"],["formControlName","users","rx-id","users-input",3,"label","placeholder","replaceModelOnWrite","suppressManual","search","selectItemTemplate","ngModelChange"],["class","warning mb-3",4,"ngIf"],[1,"col-auto","pl-0"],["adapt-button","","type","button","btn-type","secondary","rx-id","add-button",1,"add-button",3,"disabled","click"],[3,"label"],[3,"users","remove"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],["selectItemTemplate",""],[1,"warning","mb-3"],["name","exclamation_triangle",1,"text-warning"]],template:function(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"form",1),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275elementStart"](4,"adapt-tag-field",4),n["\u0275\u0275listener"]("ngModelChange",function(){return t.markAsDirty()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](5,za,3,1,"div",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](6,"div",6),n["\u0275\u0275elementStart"](7,"button",7),n["\u0275\u0275listener"]("click",function(){return t.onAdd()}),n["\u0275\u0275elementStart"](8,"span"),n["\u0275\u0275text"](9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](10,"adapt-rx-control-label",8),n["\u0275\u0275elementStart"](11,"rx-share-view-preset-users-grid",9),n["\u0275\u0275listener"]("remove",function(e){return t.removeSelectedUsers(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",10),n["\u0275\u0275elementStart"](13,"button",11),n["\u0275\u0275listener"]("click",function(){return t.save()}),n["\u0275\u0275text"](14),n["\u0275\u0275pipe"](15,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"button",12),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](17),n["\u0275\u0275pipe"](18,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](19,Ua,4,2,"ng-template",null,13,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](20);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formGroup",t.form),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("label",t.strings.users.label)("placeholder",t.strings.users.placeholder)("replaceModelOnWrite",!0)("suppressManual",!0)("search",t.search)("selectItemTemplate",e),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.isRecipientsLimitReached),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",!t.form.get("users").value.length||t.isRecipientsLimitReached),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](t.strings.addButton),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",t.strings.recipients),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("users",t.selectedUsers),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t.isSaveButtonDisabled()),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](15,15,"com.bmc.arsys.rx.client.common.save.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](18,17,"com.bmc.arsys.rx.client.common.cancel.label")," ")}},directives:[b["\u0275NgNoValidate"],b.NgControlStatusGroup,b.FormGroupDirective,m.AdaptMetatagComponent,b.NgControlStatus,b.FormControlName,h.NgIf,m.AdaptButtonComponent,m.AdaptRxControlLabelComponent,bm,m.AdaptIconComponent],pipes:[p.TranslatePipe],styles:[".add-button[_ngcontent-%COMP%]{margin-top:23px}.warning[_ngcontent-%COMP%]{margin-top:-10px}[_nghost-%COMP%]  adapt-tag-field .adapt-mt-wrapper{min-height:80px;padding-right:5px}[_nghost-%COMP%]  adapt-tag-field .adapt-mt-wrapper .adapt-mt{max-height:72px!important}"]});class Sm extends S.RxModalClass{constructor(e,t,i){super(e,t),this.activeModalRef=e,this.injector=t,this.translateService=i,this.recordGridConfig$=(0,o.of)({columns:[{fieldId:"label",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.preset-name.title")},{fieldId:"ownerFullName",title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.grid.column.shared-by.title")}],enableFiltering:!1,enableRowSelection:op.Multiple,recordIdField:"guid",styles:"flex-fill",toolbarConfig:{filter:!1,visibleColumnsMenu:!1},useExternalFiltering:!1,getRecordDefinition:()=>(0,o.of)({fieldDefinitions:[{id:"label",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character},{id:"ownerFullName",resourceType:a.RX_RECORD_DEFINITION.resourceTypes.character}]}),getData:()=>(0,o.of)({data:this.presets,totalSize:this.presets.length})}),this.modalData=this.activeModalRef.getData(),this.presets=this.modalData.newPresets}ngOnInit(){super.ngOnInit(),this.isAddButtonDisabled$=this.recordGrid.rowSelectionChanged.pipe((0,r.map)(u.isEmpty))}add(){const e=this.recordGrid.api.getSelectedRows().map(({label:e,guid:t})=>({label:e,guid:t}));this.activeModalRef.close(e)}cancel(){this.activeModalRef.dismiss(m.DismissReasons.CLOSE_BTN)}}Sm.\u0275fac=function(e){return new(e||Sm)(n["\u0275\u0275directiveInject"](m.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService))},Sm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Sm,selectors:[["rx-add-shared-view-presets"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ou,7),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.recordGrid=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:13,consts:[[1,"modal-body"],[1,"mb-4",2,"white-space","pre-line"],[3,"config"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","add-button",3,"disabled","click"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](4,"rx-record-grid",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",3),n["\u0275\u0275elementStart"](6,"button",4),n["\u0275\u0275listener"]("click",function(){return t.add()}),n["\u0275\u0275pipe"](7,"async"),n["\u0275\u0275text"](8),n["\u0275\u0275pipe"](9,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"button",5),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](11),n["\u0275\u0275pipe"](12,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,5,"com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.description.label")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("config",t.recordGridConfig$),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](7,7,t.isAddButtonDisabled$)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](9,9,"com.bmc.arsys.rx.client.common.add.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](12,11,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[ou,m.AdaptButtonComponent],pipes:[p.TranslatePipe,h.AsyncPipe],encapsulation:2,changeDetection:0});class wm extends f.BaseViewComponent{constructor(e,t,i,n,a,s,l,c,d){super(),this.changeDetectorRef=e,this.rxGuidService=t,this.rxModalService=i,this.rxUtilityModalsService=n,this.rxViewPresetSelectorUserPreferencesService=a,this.translateService=s,this.rxFeatureService=l,this.rxNotificationService=c,this.rxShareViewPresetService=d,this.api={getGuid:()=>this.guid,markAppliedViewPresetAsEdited:this.markAppliedViewPresetAsEdited.bind(this)},this.isOperationInProgressSubject=new o.BehaviorSubject(!1),this.isViewPresetEditedSubject=new o.BehaviorSubject(!1),this.viewPresetSelectorModel$=(0,o.combineLatest)([this.isOperationInProgressSubject,this.isViewPresetEditedSubject]).pipe((0,r.map)(([e,t])=>({isOperationInProgress:e,isViewPresetEdited:t}))),this.strings={deleteLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.delete.label"),discardChangesButtonLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.discard-changes.button.label"),editedViewPresetTagLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.edited-view-preset-tag.label"),renameLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.rename.label"),saveLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save.label"),saveAsLabel:this.translateService.instant("com.bmc.arsys.rx.client.common.save-as.label"),shareLabel:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share.button.label"),systemPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.system.label"),sharedPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.shared-with-me.label"),customPresetsTitle:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.preset-type.created-by-me.label"),sharedTooltip:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.shared-preset.tooltip"),addSharedViewPresets:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.title")},this.userPreferencesChangedSubject=new o.Subject,this.isSharingFeatureEnabled=this.rxFeatureService.isFeatureEnabled(hm),this.userPreferencesChangedSubject.pipe((0,r.switchMap)(()=>this.rxViewPresetSelectorUserPreferencesService.save(this.state)),(0,r.takeUntil)(this.destroyed$)).subscribe()}ngOnInit(){super.ngOnInit(),this.notifyPropertyChanged("api",this.api),this.config.pipe((0,r.take)(1),(0,r.map)(e=>({systemViewPresetOptions:e.viewPresets,customViewPresetOptions:[],sharedViewPresetOptions:[],appliedViewPresetOption:null,isSharingEnabled:e.enableSharing&&this.isSharingFeatureEnabled})),(0,r.switchMap)(e=>this.rxViewPresetSelectorUserPreferencesService.applyUserPreferences(this.guid,e)),(0,r.tap)(({state:e,shouldUpdatePreferences:t,removedPresetGuid:i})=>{this.state=e,this.changeDetectorRef.detectChanges(),this.isOperationInProgressSubject.next(!0),i&&this.runtimeViewModelApi.deleteViewPreset(i).subscribe(),t&&this.userPreferencesChangedSubject.next()}),(0,r.switchMap)(()=>this.applyViewPreset(this.state.appliedViewPresetOption)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}ngOnDestroy(){super.ngOnDestroy(),this.isOperationInProgressSubject.complete(),this.isViewPresetEditedSubject.complete(),this.userPreferencesChangedSubject.complete()}deleteViewPreset(e){this.rxUtilityModalsService.confirm(this.translateService.instant(e.userSharedViewPresetGuid?"com.bmc.arsys.rx.client.view-components.view-preset-selector.delete-shared-view-preset-confirmation.message":"com.bmc.arsys.rx.client.view-components.view-preset-selector.delete-view-preset-confirmation.message")).then(t=>{if(t){const t=this.state.appliedViewPresetOption.guid;this.state.appliedViewPresetOption=this.state.systemViewPresetOptions[0],this.isViewPresetEditedSubject.next(!1),this.state.customViewPresetOptions=(0,u.reject)(this.state.customViewPresetOptions,{guid:t}),this.state.sharedViewPresetOptions=(0,u.reject)(this.state.sharedViewPresetOptions,{guid:t}),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.runtimeViewModelApi.applyViewPreset(this.guid,this.state.appliedViewPresetOption.guid).pipe((0,r.finalize)(()=>{(e.userSharedViewPresetGuid?this.rxShareViewPresetService.deleteSharedViewPreset(e.userSharedViewPresetGuid):(0,o.of)(null)).pipe((0,r.switchMap)(()=>this.runtimeViewModelApi.deleteViewPreset(t)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()})).subscribe()}}).catch(u.noop)}discardViewPresetChanges(){this.rxUtilityModalsService.confirm(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.discard-changes-confirmation.message")).then(e=>{if(e){this.isViewPresetEditedSubject.next(!1),this.isOperationInProgressSubject.next(!0);const e=this.state.appliedViewPresetOption;(0,o.iif)(()=>e.isShared,this.getSharedViewPresetData(e).pipe((0,r.switchMap)(t=>this.runtimeViewModelApi.discardViewPresetChanges(e.guid,t))),this.runtimeViewModelApi.discardViewPresetChanges(e.guid)).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}}).catch(u.noop)}renameViewPreset(){this.openRenamingModal(this.strings.renameLabel,!0).then(e=>{this.state.appliedViewPresetOption.label=e,this.state.customViewPresetOptions=(0,u.sortBy)(this.state.customViewPresetOptions,"label"),this.userPreferencesChangedSubject.next(),this.changeDetectorRef.detectChanges(),this.state.appliedViewPresetOption.userSharedViewPresetGuid&&this.saveSharedViewPreset().subscribe()}).catch(u.noop)}selectPreset(e){this.state.appliedViewPresetOption=e,this.isViewPresetEditedSubject.next(!1),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.applyViewPreset(e).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}saveAsViewPreset(){this.openRenamingModal(this.strings.saveAsLabel).then(e=>{const t={guid:this.rxGuidService.generate(),label:e};this.state.customViewPresetOptions.push(t),this.state.customViewPresetOptions=(0,u.sortBy)(this.state.customViewPresetOptions,"label"),this.state.appliedViewPresetOption=t,this.isViewPresetEditedSubject.next(!1),this.userPreferencesChangedSubject.next(),this.isOperationInProgressSubject.next(!0),this.runtimeViewModelApi.applyViewPreset(this.guid,this.state.appliedViewPresetOption.guid).pipe((0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}).catch(u.noop)}saveViewPreset(){this.isViewPresetEditedSubject.next(!1),this.isOperationInProgressSubject.next(!0);(this.state.appliedViewPresetOption.userSharedViewPresetGuid?this.saveSharedViewPreset():(0,o.of)(null)).pipe((0,r.switchMap)(()=>this.runtimeViewModelApi.saveViewPreset(this.state.appliedViewPresetOption.guid)),(0,r.finalize)(()=>this.isOperationInProgressSubject.next(!1))).subscribe()}shareViewPreset(){this.rxModalService.openModal({content:Cm,title:this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.share-view-preset.title"),data:{runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.state.appliedViewPresetOption,presetSelectorGuid:this.guid},size:"sm"}).then(e=>{this.state.appliedViewPresetOption.userSharedViewPresetGuid=e,this.userPreferencesChangedSubject.next()}).catch(u.noop)}onAddSharedPresetsClick(){this.rxShareViewPresetService.getSharedViewPresetsForCurrentUser(this.guid).subscribe(e=>{const t=this.state.sharedViewPresetOptions.map(e=>e.guid),i=e.filter(e=>!t.includes(e.guid));i.length?this.openAddSharedPresetsModal(i):this.rxNotificationService.addInfoMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.no-new-presets.message"),this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.no-new-presets.title"))})}openAddSharedPresetsModal(e){this.rxModalService.openModal({content:Sm,title:this.strings.addSharedViewPresets,data:{presetSelectorGuid:this.guid,newPresets:e},size:"sm"}).then(e=>{this.state.sharedViewPresetOptions=this.state.sharedViewPresetOptions.concat(e.map(e=>Object.assign(Object.assign({},e),{isShared:!0}))),this.userPreferencesChangedSubject.next(),e.length&&this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.presets-added.message"),this.translateService.instant("com.bmc.arsys.rx.client.view-components.view-preset-selector.add-shared-view-preset.notification.presets-added.title"))}).catch(u.noop)}markAppliedViewPresetAsEdited(){this.isViewPresetEditedSubject.next(!0)}openRenamingModal(e,t){let i=[...this.state.customViewPresetOptions,...this.state.systemViewPresetOptions];return t&&(i=i.filter(e=>e.guid!==this.state.appliedViewPresetOption.guid)),this.rxModalService.openModal({content:ym,data:{fieldLabel:e,existingViewPresetNames:i.map(({label:e})=>e),viewPresetName:this.state.appliedViewPresetOption.label},size:"sm"})}applyViewPreset(e){return e.isShared?this.getSharedViewPresetData(e).pipe((0,r.switchMap)(t=>this.runtimeViewModelApi.applyViewPreset(this.guid,e.guid,t)),(0,r.catchError)(t=>this.handleSharedViewPresetLoadError(t,e))):this.runtimeViewModelApi.applyViewPreset(this.guid,e.guid)}saveSharedViewPreset(){return this.rxShareViewPresetService.saveSharedViewPreset({runtimeViewModelApi:this.runtimeViewModelApi,currentViewPreset:this.state.appliedViewPresetOption,presetSelectorGuid:this.guid},this.state.appliedViewPresetOption.userSharedViewPresetGuid)}getSharedViewPresetData(e){return this.rxShareViewPresetService.getSharedViewPresetData(e.guid).pipe((0,r.map)(({viewPresetName:t,sharedViewPresets:i})=>(e.label=t,i)))}handleSharedViewPresetLoadError(e,t){return 404===e.status?(this.state.sharedViewPresetOptions=this.state.sharedViewPresetOptions.filter(e=>e.guid!==t.guid),this.runtimeViewModelApi.deleteViewPreset(t.guid).subscribe(),this.selectPreset(this.state.systemViewPresetOptions[0]),o.EMPTY):(0,o.throwError)(e)}}wm.\u0275fac=function(e){return new(e||wm)(n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](v.RxGuidService),n["\u0275\u0275directiveInject"](S.RxModalService),n["\u0275\u0275directiveInject"](S.RxUtilityModalsService),n["\u0275\u0275directiveInject"](xm),n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxFeatureService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](vm))},wm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:wm,selectors:[["rx-view-preset-selector"]],inputs:{config:"config",runtimeViewModelApi:"runtimeViewModelApi"},features:[n["\u0275\u0275ProvidersFeature"]([xm]),n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","btn-group align-items-center",4,"ngIf"],[1,"btn-group","align-items-center"],["adaptDropdown",""],["adapt-button","","adaptDropdownToggle","","type","button","btn-type","tertiary","rx-id","toggle-button",1,"text-default","font-weight-bold","text-left",3,"disabled"],["adaptDropdownMenu","","tabindex","0"],["class","dropdown-heading",4,"ngIf"],["class","dropdown-item","type","button","rx-id","system-view-preset",3,"active","click",4,"ngFor","ngForOf"],["class","badge badge-secondary extra-small mx-2",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-floppy p-2","rx-id","save-button",3,"disabled","click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-save_all_o","rx-id","save-as-button",3,"disabled","click",4,"ngIf"],["class","dropdown header-cell-menu-btn","adaptDropdown","",4,"ngIf"],["class","dropdown-item","type","button","rx-id","custom-view-preset",3,"active","click",4,"ngFor","ngForOf"],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-heading"],["type","button","rx-id","custom-view-preset",1,"dropdown-item",3,"click"],["name","users","class","btn-link float-end ml-2",3,"adaptTooltip",4,"ngIf"],["name","users",1,"btn-link","float-end","ml-2",3,"adaptTooltip"],[1,"dropdown-divider"],["type","button","rx-id","add-preset-button",1,"btn","btn-link","float-end","p-0","pl-1","btn-add-shared",3,"adaptTooltip","click"],["name","plus"],["class","dropdown-item","type","button","rx-id","shared-view-preset",3,"active","click",4,"ngFor","ngForOf"],["type","button","rx-id","shared-view-preset",1,"dropdown-item",3,"click"],["type","button","rx-id","system-view-preset",1,"dropdown-item",3,"click"],[1,"badge","badge-secondary","extra-small","mx-2"],["btn-type","tertiary","rx-id","save-button",1,"d-icon-left-floppy","p-2",3,"disabled","click"],["btn-type","tertiary","rx-id","save-as-button",1,"d-icon-left-save_all_o",3,"disabled","click"],["adaptDropdown","",1,"dropdown","header-cell-menu-btn"],["rx-id","more-actions-toggle-button","type","button","adaptDropdownToggle","",1,"d-icon-ellipsis","btn","btn-link","px-0",3,"disabled","showCaret"],["adaptDropdownMenu","","tabindex","0",1,"dropdown-menu"],["btn-type","tertiary","class","d-icon-left-undo_adapt dropdown-item","rx-id","discard-changes-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-save_all_o dropdown-item","rx-id","save-as-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-field_text dropdown-item","rx-id","rename-selected-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-trash_adapt dropdown-item","rx-id","remove-selected-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","class","d-icon-left-share dropdown-item","rx-id","share-view-preset-button",3,"click",4,"ngIf"],["btn-type","tertiary","rx-id","discard-changes-button",1,"d-icon-left-undo_adapt","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","save-as-button",1,"d-icon-left-save_all_o","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","rename-selected-view-preset-button",1,"d-icon-left-field_text","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","remove-selected-view-preset-button",1,"d-icon-left-trash_adapt","dropdown-item",3,"click"],["btn-type","tertiary","rx-id","share-view-preset-button",1,"d-icon-left-share","dropdown-item",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,ds,2,1,"ng-container",0),n["\u0275\u0275pipe"](1,"async")),2&e&&n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,1,t.viewPresetSelectorModel$))},directives:[h.NgIf,m.AdaptDropdownDirective,m.AdaptButtonComponent,m.AdaptDropdownToggleDirective,m.AdaptDropdownMenuDirective,h.NgForOf,m.AdaptIconComponent,m.AdaptTooltipDirective],pipes:[h.AsyncPipe],styles:["button[rx-id=toggle-button][_ngcontent-%COMP%], button[rx-id=shared-view-preset][_ngcontent-%COMP%]{white-space:normal;word-break:break-word}.preset-selector[_ngcontent-%COMP%]   .dropdown-heading[_ngcontent-%COMP%]{padding:.375rem .875rem;font-weight:bold}.preset-selector[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding-left:1.75rem}.btn-add-shared[_ngcontent-%COMP%]{margin-top:-1px}"],changeDetection:0});class Im{adaptDefinition(e){e.componentDefinitions.sort((e,t)=>e.propertiesByName.index-t.propertiesByName.index).forEach(e=>{Object.assign(e.propertiesByName,{guid:e.guid,isSystem:!0})})}}Im.\u0275fac=function(e){return new(e||Im)},Im.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Im,factory:Im.\u0275fac});class _m{}_m.\u0275fac=function(e){return new(e||_m)},_m.\u0275mod=n["\u0275\u0275defineNgModule"]({type:_m,declarations:[Cm,bm],imports:[m.AdaptMetatagModule,m.AdaptButtonModule,b.ReactiveFormsModule,p.TranslateModule,su,h.CommonModule,m.AdaptIconModule,m.AdaptRxLabelModule]}),_m.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[m.AdaptMetatagModule,m.AdaptButtonModule,b.ReactiveFormsModule,p.TranslateModule,su,h.CommonModule,m.AdaptIconModule,m.AdaptRxLabelModule]]});class Dm{}Dm.\u0275fac=function(e){return new(e||Dm)},Dm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Dm,declarations:[Sm],imports:[h.CommonModule,p.TranslateModule,m.AdaptButtonModule,su]}),Dm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,p.TranslateModule,m.AdaptButtonModule,su]]});class Rm{constructor(e,t){this.rxDefinitionAdapterRegistryService=e,this.viewPresetSelectorAdapterService=t,e.registerRuntimeAdapter(c.RxViewComponentType.ViewPresetSelector,this.viewPresetSelectorAdapterService)}}Rm.\u0275fac=function(e){return new(e||Rm)(n["\u0275\u0275inject"](s.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Im))},Rm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rm,declarations:[ym,wm],imports:[m.AdaptButtonModule,m.AdaptDropdownModule,m.AdaptRxTextfieldModule,m.AdaptTooltipModule,h.CommonModule,b.ReactiveFormsModule,v.RxUniqueValidatorModule,p.TranslateModule,v.RxNoWhitespaceValidatorModule,_m,Dm,m.AdaptIconModule],exports:[wm]}),Rm.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[Im],imports:[[m.AdaptButtonModule,m.AdaptDropdownModule,m.AdaptRxTextfieldModule,m.AdaptTooltipModule,h.CommonModule,b.ReactiveFormsModule,v.RxUniqueValidatorModule,p.TranslateModule,v.RxNoWhitespaceValidatorModule,_m,Dm,m.AdaptIconModule]]});class Am extends l.InspectorWidgetBase{constructor(e,t){super(e),this.injector=e,this.translateService=t,this.editedPreset=null,this.presets=[],this.strings={cannotBeBlank:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message",{propertyName:"View preset name"}),duplicateValue:this.translateService.instant("com.bmc.arsys.rx.client.designer.validation.duplicate-value.message")},this.itemValidationFn=this.itemValidation.bind(this)}ngOnInit(){this.designerItemModel.sandbox.getChildComponents().pipe((0,r.first)(),(0,r.takeUntil)(this.designerItemModel.sandbox.destroyed$)).subscribe(e=>{e.sort((e,t)=>e.data.index-t.data.index),this.presets=e.map(e=>({name:e.data.label,id:e.guid}))})}onPresetsListChange(e){e.forEach(e=>{e.name=(0,u.trim)(e.name)}),this.presets=(0,u.cloneDeep)(e);const t=e.map(({name:e,id:t},i)=>({type:c.RxViewComponentType.ViewPreset,guid:String(t),data:{label:e,index:i}}));this.designerItemModel.sandbox.setChildren(t)}onListItemAdd(){this.presets.push(this.presets.shift())}onListItemEdit(e){this.editedPreset=e}onListItemUpdate(){this.editedPreset=null}focus(){this.adaptRxListBuilderComponent.inputEl.nativeElement.focus()}itemValidation(e,t,i){let n=null;const o=(0,u.chain)(t).reject(e=>i&&e.id===this.editedPreset.id).map("name").value(),r=(0,u.trim)(e);return 0===r.length?n=this.strings.cannotBeBlank:o.includes(r)&&(n=this.strings.duplicateValue),n}}Am.\u0275fac=function(e){return new(e||Am)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](p.TranslateService))},Am.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Am,selectors:[["rx-presets-list-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](m.AdaptRxListBuilderComponent,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.adaptRxListBuilderComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:6,consts:[[3,"label","ngModel","hideListAreaLabel","texts","readonly","itemValidation","ngModelChange","listItemAdd","listItemEdit","listItemUpdate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-rx-list-builder",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.presets=e})("ngModelChange",function(e){return t.onPresetsListChange(e)})("listItemAdd",function(){return t.onListItemAdd()})("listItemEdit",function(e){return t.onListItemEdit(e)})("listItemUpdate",function(){return t.onListItemUpdate()}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("label","View preset names")("ngModel",t.presets)("hideListAreaLabel",!0)("texts",t.options.texts)("readonly",t.isDisabled)("itemValidation",t.itemValidationFn)},directives:[m.AdaptRxListBuilderComponent,b.NgControlStatus,b.NgModel],styles:[""]});class Tm extends d.ViewDesignerComponentModel{constructor(){super(...arguments),this.presetComponentGuids$=this.sandbox.getChildComponentGuids(),this.otherPresetSelectorsNames$=this.sandbox.getComponentsByType(c.RxViewComponentType.ViewPresetSelector).pipe((0,r.map)(e=>e.filter(e=>e.guid!==this.sandbox.guid).map(e=>e.data.name.trim()))),this.label$=this.sandbox.getChildComponents().pipe((0,r.map)(e=>e.sort((e,t)=>e.data.index-t.data.index)),(0,r.map)(e=>e[0]?e[0].data.label:"No view presets added"),(0,r.takeUntil)(this.sandbox.destroyed$)),this.rxFeatureService=this.injector.get(s.RxFeatureService)}static getInitialProperties(e){return Object.assign(Object.assign({name:"View preset selector",styles:null,enableSharing:!1},c.RX_AVAILABLE_ON_DEVICES_DEFAULT_VALUE),e)}rxInit(){this.sandbox.updateInspectorConfig(this.setInspectorConfig()),(0,o.combineLatest)([this.sandbox.componentProperties$,this.presetComponentGuids$]).pipe((0,r.withLatestFrom)(this.otherPresetSelectorsNames$),(0,r.map)(([[e,t],i])=>this.validate(e,t,i)),(0,r.takeUntil)(this.sandbox.destroyed$)).subscribe(e=>{this.sandbox.setValidationIssues(e)})}setInspectorConfig(){return{inspectorSectionConfigs:[{label:"General",controls:[{name:"name",component:l.TextFormControlComponent,options:{label:"Name",required:!0}},{component:Am,widgetName:"presetsList"},this.rxFeatureService.isFeatureEnabled(hm)?{name:"enableSharing",component:l.SwitchFormControlComponent,options:{label:"Enable sharing"}}:null,(0,d.getAvailableOnDevicesInspectorConfig)(),(0,d.getStylesFieldInspectorConfig)()].filter(Boolean)}]}}validate(e,t,i){let n=[];const o=e.name.trim();return o?i.includes(o)&&n.push(this.sandbox.createError("Name must be unique.","name")):n.push(this.sandbox.createError("Name cannot be blank.","name")),t.length||n.push(this.sandbox.createError("At least one view preset must be added.","presetsList")),n=n.concat((0,d.validateStandardProps)(e)),n}}class Fm{}Fm.\u0275fac=function(e){return new(e||Fm)},Fm.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fm,selectors:[["rx-view-preset-selector-design"]],inputs:{model:"model"},decls:3,vars:3,consts:[["adapt-button","","btn-type","tertiary","type","button","readonly","",1,"dropdown-toggle","text-default","font-weight-bold","text-left"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"button",0),n["\u0275\u0275text"](1),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](2,1,t.model.label$),"\n"))},directives:[m.AdaptButtonComponent],pipes:[h.AsyncPipe],styles:["button[_ngcontent-%COMP%]{white-space:normal;word-break:break-word}"]});class Em{}Em.\u0275fac=function(e){return new(e||Em)},Em.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Em,declarations:[Am],imports:[h.CommonModule,m.AdaptRxListBuilderModule,b.FormsModule],exports:[Am]}),Em.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,m.AdaptRxListBuilderModule,b.FormsModule]]});class Mm{}Mm.\u0275fac=function(e){return new(e||Mm)},Mm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mm,declarations:[Fm],imports:[h.CommonModule,Em,m.AdaptButtonModule]}),Mm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[h.CommonModule,Em,m.AdaptButtonModule]]});class Om{constructor(e,t){this.rxViewComponentRegistryService=e,this.componentFactoryResolver=t,e.register({type:c.RxViewComponentType.ViewPresetSelector,componentFactory:this.componentFactoryResolver.resolveComponentFactory(wm),properties:[{name:"styles"},{name:"enableSharing",type:c.ViewComponentPropertyType.Boolean,designType:c.ViewComponentPropertyType.Boolean},c.RX_AVAILABLE_ON_DEVICES_PROP_DESC],isContainerComponent:!0,name:"View preset selector",group:d.RX_VIEW_DESIGNER.stencilGroups.basicComponents.label,icon:"screens_triangle_down_circle",designComponentFactory:this.componentFactoryResolver.resolveComponentFactory(Fm),designComponentModel:Tm,bundleId:s.RX_APPLICATION.platformBundleId},{type:c.RxViewComponentType.ViewPreset,configPropertyName:"viewPresets",isDataComponent:!0,properties:[{name:"label",localizable:!0},{name:"index",designType:c.ViewComponentPropertyType.Number,type:c.ViewComponentPropertyType.Number}]})}}Om.\u0275fac=function(e){return new(e||Om)(n["\u0275\u0275inject"](c.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver))},Om.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Om,imports:[Mm,Rm]}),Om.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Mm,Rm]]});class km extends f.BaseViewComponent{constructor(e,t,i){super(),this.translateService=e,this.rxNotificationService=t,this.rxGainsightConfiguratorService=i,this.deploymentTypeOptions=l.RX_GAINSIGHT.deploymentTypes,this.environmentTypeOptions=l.RX_GAINSIGHT.environmentTypes,this.vm$=this.rxGainsightConfiguratorService.getGainsightConfiguration(s.RX_APPLICATION.innovationStudioBundleId).pipe((0,r.take)(1),(0,r.filter)(e=>Boolean(e)),(0,r.map)(e=>e.settings),(0,r.map)(e=>({deploymentTypeOptions:this.deploymentTypeOptions.filter(t=>t.name===e.deploymentType),environmentTypeOptions:[e.environmentType],useAdaptRadar:e.useAdaptRadar,loadGainsightFromBmcIt:e.loadGainsightFromBmcIt,adaptAgreementState:{organizationPerformance:e.enableGainsight,accountMarketing:!1,accountPerformance:!1,organizationMarketing:!1}})),(0,r.shareReplay)(1))}optionFormatter(e){return e.name}save(){this.vm$.pipe((0,r.take)(1),(0,r.map)(e=>Object.assign(Object.assign({},e),{deploymentType:e.deploymentTypeOptions[0].id,environmentType:e.environmentTypeOptions[0],enableGainsight:e.adaptAgreementState.organizationPerformance})),(0,r.switchMap)(e=>this.rxGainsightConfiguratorService.saveGainsightConfiguration(e))).subscribe(()=>{this.rxNotificationService.addSuccessMessage(this.translateService.instant("com.bmc.arsys.rx.client.gainsight.gainsight-settings-saved.success.message"))})}}km.\u0275fac=function(e){return new(e||km)(n["\u0275\u0275directiveInject"](p.TranslateService),n["\u0275\u0275directiveInject"](s.RxNotificationService),n["\u0275\u0275directiveInject"](l.RxGainsightConfiguratorService))},km.\u0275cmp=n["\u0275\u0275defineComponent"]({type:km,selectors:[["rx-gainsight-admin-opt-in"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[["class","p-0",4,"ngIf","ngIfElse"],["emptyStateTemplate",""],[1,"p-0"],[1,"mt-1","container"],[1,"text-logo"],["rx-id","enable-gainsight",3,"showOrganizationSettings","showMarketingSection","multiProductUsage","showShadow","state","stateChange"],[1,"pt-4","pl-0","col-md-4",3,"hidden"],["label","Use ADAPT Radar","name","useAdaptRadar","rx-id","use-adapt-radar",3,"isLabelBefore","size","ngModel","ngModelChange"],[1,"pt-4","pl-0","col-md-4"],["name","loadGainsightFromBmcIt","rx-id","load-gainsight-from-bmc",3,"isLabelBefore","size","label","ngModel","ngModelChange"],["name","deploymentType","rx-id","deployment-type",1,"col-md-3","pt-4","pl-0",3,"label","options","optionFormatter","ngModel","ngModelChange"],["name","environmentType","rx-id","environment-type",1,"col-md-3","pt-4","pl-0",3,"label","options","ngModel","ngModelChange"],[1,"modal-footer","mt-4"],["rx-id","save-button","adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"click"],[1,"d-flex","align-items-center","justify-content-center","h-100"],["type","config",1,"w-100",3,"label"]],template:function(e,t){if(1&e&&(n["\u0275\u0275template"](0,ps,21,32,"ng-container",0),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275template"](2,us,3,3,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](1,2,t.vm$))("ngIfElse",e)}},directives:[h.NgIf,m.AdaptAgreementCardComponent,m.AdaptRxSwitchComponent,b.NgControlStatus,b.NgModel,m.AdaptRxSelectComponent,m.AdaptButtonComponent,m.AdaptEmptyStateComponent],pipes:[h.AsyncPipe,p.TranslatePipe],styles:["[_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content div:nth-of-type(2)>adapt-rx-switch, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content hr:nth-of-type(2)~div, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content h4, [_nghost-%COMP%]     adapt-agreement-card adapt-agreement-admin-content hr:nth-of-type(3){display:none}"],changeDetection:0});class jm{constructor(e,t){this.componentFactoryResolver=e,this.rxViewComponentRegistryService=t,t.register({type:"rx-gainsight-admin-opt-in",componentFactory:this.componentFactoryResolver.resolveComponentFactory(km),name:"Gainsight Admin Opt In",hidden:!0,availableInBundles:[s.RX_APPLICATION.settingsBundleId]})}}jm.\u0275fac=function(e){return new(e||jm)(n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](c.RxViewComponentRegistryService))},jm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:jm,declarations:[km],imports:[p.TranslateModule,m.AdaptAgreementModule,m.AdaptRxSelectModule,b.FormsModule,m.AdaptRxSwitchModule,h.CommonModule,m.AdaptButtonModule,m.AdaptEmptyStateModule]}),jm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[p.TranslateModule,m.AdaptAgreementModule,m.AdaptRxSelectModule,b.FormsModule,m.AdaptRxSwitchModule,h.CommonModule,m.AdaptButtonModule,m.AdaptEmptyStateModule]]});class Pm{}Pm.\u0275fac=function(e){return new(e||Pm)},Pm.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Pm,imports:[Gu,zu,lm,Uu,Wu,Ed,pm,Qu,Ku,Zu,Hu,Xu,tm,mm,rm,Om,jm]}),Pm.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[Gu,zu,lm,Uu,Wu,Ed,pm,Qu,Ku,Zu,Hu,Xu,tm,mm,rm,Om,jm]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-designer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{ActionListControlComponent:()=>vi,ActionListControlModule:()=>xi,ActionListEditorDialogComponent:()=>fi,ActionListEditorDialogModule:()=>gi,ActionListWidgetComponent:()=>Si,ActionListWidgetModule:()=>wi,CanvasItemApi:()=>zt,CanvasItemColumnComponent:()=>Yt,CanvasItemComponent:()=>Xt,CanvasItemContainerComponent:()=>Qt,CanvasOutletComponent:()=>Kt,CanvasOutletHelperService:()=>Wt,DesignerComponent:()=>Jt,DesignerModule:()=>ri,DropComponentData:()=>Ut,NamedListFilterExpressionConfigurator:()=>di,RX_AVAILABLE_ON_DEVICES_OPTIONS:()=>_i,RX_VIEW_DESIGNER:()=>ei,RX_VIEW_MODEL:()=>ii,RuntimeViewParamsModalComponent:()=>si,RuntimeViewParamsModalModule:()=>li,RxComponentPermissionEditorWidgetComponent:()=>yi,RxComponentPermissionEditorWidgetModule:()=>bi,RxViewActionExpressionConfigurator:()=>ci,RxViewActionValidatorService:()=>Ei,RxViewComponentExpressionConfigurator:()=>Nt,RxViewCustomizationOptionsComponent:()=>Vt,RxViewCustomizationOptionsModule:()=>Ci,RxViewDataDictionaryService:()=>jt,RxViewDesignerActionModel:()=>ui,RxViewDesignerComponent:()=>ni,RxViewDesignerDefaultActionModel:()=>mi,RxViewDesignerHelperService:()=>Zt,RxViewDesignerPaletteModule:()=>ai,RxViewExpressionConfigurator:()=>Pt,RxViewExpressionValidatorService:()=>kt,RxViewModel:()=>$t,RxViewRevertCustomizationComponent:()=>Lt,RxViewRevertCustomizationModule:()=>Bt,ViewDesignerCanvasComponent:()=>Ht,ViewDesignerCanvasItemApiToken:()=>Gt,ViewDesignerCanvasModule:()=>oi,ViewDesignerComponentModel:()=>Ii,ViewDesignerFacade:()=>Rt,ViewDesignerModule:()=>Ji,ViewDesignerPaletteComponent:()=>ti,getAvailableOnDevicesInspectorConfig:()=>Di,getDisabledFieldInspectorConfig:()=>Ai,getHiddenFieldInspectorConfig:()=>Ri,getStandardPropsInspectorConfigs:()=>Fi,getStylesFieldInspectorConfig:()=>Ti,validateAvailableOnDevicesProp:()=>Mt,validateCssClassName:()=>Ft,validateCssClassNames:()=>Et,validateStandardProps:()=>Ot});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),r=i("./node_modules/@helix/platform/fesm2015/helix-platform-named-list-api.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),c=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-components.js"),d=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),u=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),m=i("lodash"),h=i("rxjs"),f=i("./node_modules/rxjs/_esm2015/operators/index.js"),g=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),v=i("./node_modules/@ngrx/effects/fesm2015/ngrx-effects.js"),x=i("./node_modules/@ngrx/store/fesm2015/ngrx-store.js"),y=i("./node_modules/@angular/forms/fesm2015/forms.js"),b=i("./node_modules/@angular/common/fesm2015/common.js"),C=i("./node_modules/@angular/cdk/fesm2015/drag-drop.js"),S=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js"),w=i("./node_modules/@bmc-ux/obsolete/fesm2015/bmc-ux-adapt-obsolete.js"),I=i("./node_modules/tslib/tslib.es6.js");const _=["container"];function D(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-canvas-item",1),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.layout)("isReadOnly",e.isReadOnly)}}function R(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",9),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"]().remove(t,i)}),n["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275listener"]("cdkDragEntered",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDragEntered(t)})("cdkDragStarted",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDragStarted(t)}),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275listener"]("click",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onSelectComponent(t,i)}),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275elementStart"](3,"div",4),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275element"](5,"span",5),n["\u0275\u0275elementStart"](6,"span",6),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](8,R,1,0,"button",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](9,"rx-canvas-item",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMapInterpolate1"]("canvas-item-wrapper mw-100 canvas-",e.descriptor.type,""),n["\u0275\u0275property"]("cdkDragData",i.getViewComponentDragData(e))("cdkDragDisabled",i.isReadOnly||(null==e.descriptor.options?null:e.descriptor.options.static)),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",n["\u0275\u0275pipeBind1"](2,12,e.isSelected$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("hidden",!n["\u0275\u0275pipeBind1"](4,14,e.isSelected$)),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.label),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!(i.isReadOnly||null!=e.descriptor.options&&e.descriptor.options.static)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("layout",e)("isReadOnly",i.isReadOnly)}}const T=function(e){return{columnIndex:e}},F=function(e){return{"col-border":e}},E=function(e){return{"mb-3":e}};function M(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2),n["\u0275\u0275elementStart"](1,"rx-canvas-item-column",3),n["\u0275\u0275listener"]("dropListDropped",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDropListDropped(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index,o=t.last,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275classMap"](e.span?"col-"+e.span:"col"),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](9,F,!o)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction1"](11,E,!o))("isReadOnly",r.isReadOnly)("colIndex",i)("column",e)("layout",r.layout)}}function O(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-canvas-outlet",1),n["\u0275\u0275listener"]("beforeViewComponentDrop",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().viewDesignerCanvasComponent.beforeComponentDropInRoot.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("border",i.canvasItemComponent.layout.outlets.length>1)("default-outlet",e.name===i.defaultOutletName),n["\u0275\u0275property"]("name",e.name)}}function k(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",7),n["\u0275\u0275elementStart"](1,"div",8),n["\u0275\u0275element"](2,"span"),n["\u0275\u0275elementStart"](3,"span",9),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDragData",i.getViewComponentDragData(e)),n["\u0275\u0275attribute"]("rx-id",e.type),n["\u0275\u0275advance"](2),n["\u0275\u0275classMapInterpolate1"]("item-image d-icon-",e.icon||"wall",""),n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("title",e.name),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function j(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"adapt-accordion-tab",4),n["\u0275\u0275elementStart"](1,"div",5),n["\u0275\u0275template"](2,k,5,7,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("title",e.name)("isOpen",!0),n["\u0275\u0275attribute"]("rx-id",i.stringService.toRxId(e.name)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("cdkDropListConnectedTo",i.allowedDropListIds),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.components)("ngForTrackBy",i.trackByNameFn)}}const P=function(){return[]},N=function(e){return{multiselect:!0,tabs:e}},V=["viewPropertyInspector"],L=["viewComponentPropertyInspector"];function B(e,t){if(1&e&&(n["\u0275\u0275element"](0,"rx-view-designer-palette",19),n["\u0275\u0275pipe"](1,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("components",n["\u0275\u0275pipeBind1"](1,2,e.paletteComponents$))("allowedDropListIds",e.canvasDndListIds)}}const $=function(){return{content:"There are no view components to display. View with a Page view component cannot contain any other view components.",variant:"info",type:"inline"}};function G(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-alert",20),2&e&&n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction0"](1,$))}const z=function(){return{content:"This view is not editable. There are no view components to display.",variant:"info",type:"inline"}};function U(e,t){1&e&&n["\u0275\u0275element"](0,"adapt-alert",20),2&e&&n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction0"](1,z))}function q(e,t){if(1&e&&(n["\u0275\u0275element"](0,"adapt-code-viewer",21),n["\u0275\u0275pipe"](1,"json"),n["\u0275\u0275pipe"](2,"async")),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("code",n["\u0275\u0275pipeBind1"](1,4,n["\u0275\u0275pipeBind1"](2,6,e.viewDesignerFacade.viewDefinition$)))("lang","javascript")("hasToolbar",!1)("theme","light")}}const X=function(e){return{content:e,variant:"info",type:"inline"}};function H(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"adapt-rx-textfield",5),n["\u0275\u0275listener"]("ngModelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().inputParams[i]=t}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.first,o=t.index,r=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e)("autofocus",i)("ngModel",r.inputParams[e]),n["\u0275\u0275attribute"]("rx-id","input-param-"+(o+1))}}function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",25),n["\u0275\u0275elementStart"](1,"div",26),n["\u0275\u0275listener"]("dblclick",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](4).addAction(t.data)}),n["\u0275\u0275elementStart"](2,"button",27),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](4).addAction(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"span",28),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("cdkDragData",e.data),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate"](e.data.label)}}function Y(e,t){if(1&e&&n["\u0275\u0275template"](0,W,5,2,"div",24),2&e){const e=t.$implicit;n["\u0275\u0275property"]("ngIf",e.data)}}function Q(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",21),n["\u0275\u0275elementStart"](1,"adapt-tree",22),n["\u0275\u0275template"](2,Y,1,1,"ng-template",23),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().ngIf,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("cdkDropListConnectedTo","selected-action-list"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("value",e)("wrap",t.treeWrap)}}function K(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275element"](1,"adapt-empty-state",30),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.action-list.available-actions.empty-state.message")))}function J(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",18),n["\u0275\u0275template"](1,Q,3,3,"div",19),n["\u0275\u0275template"](2,K,3,3,"ng-template",null,20,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.length)("ngIfElse",i)}}function Z(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",15),n["\u0275\u0275elementStart"](1,"div",3),n["\u0275\u0275elementStart"](2,"h4",5),n["\u0275\u0275text"](3),n["\u0275\u0275pipe"](4,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",16),n["\u0275\u0275template"](6,J,4,2,"div",17),n["\u0275\u0275pipe"](7,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](4,2,"com.bmc.arsys.rx.client.view-components.action-list.available-actions.title")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](7,4,e.availableActionTreeNodes$))}}function ee(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",31),n["\u0275\u0275elementStart"](1,"button",32),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!0)}),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",33),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().toggleOpen(!1)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,2,"com.bmc.arsys.rx.client.common.expand-all.label")," "),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,4,"com.bmc.arsys.rx.client.common.collapse-all.label")," "))}function te(e,t){1&e&&n["\u0275\u0275element"](0,"div",44)}function ie(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",45),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=t.ngIf,i=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("title",e[i.name]),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e[i.name]," ")}}function ne(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",46),n["\u0275\u0275elementStart"](1,"div",47),n["\u0275\u0275elementStart"](2,"button",48),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveAction(i,i+1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",49),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.moveAction(i,i-1)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"button",50),n["\u0275\u0275listener"]("click",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().$implicit,o=n["\u0275\u0275nextContext"]();return t.stopPropagation(),o.removeAction(i)}),n["\u0275\u0275text"](5),n["\u0275\u0275pipe"](6,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](),t=e.last,i=e.first;n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("disabled",t),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("disabled",i),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](6,3,"com.bmc.arsys.rx.client.common.remove.label")," ")}}function oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",34,35),n["\u0275\u0275template"](2,te,1,0,"div",36),n["\u0275\u0275elementStart"](3,"adapt-accordion-tab",37),n["\u0275\u0275listener"]("open",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!0})("close",function(){return n["\u0275\u0275restoreView"](e).$implicit.isOpen=!1}),n["\u0275\u0275elementStart"](4,"div",38),n["\u0275\u0275elementStart"](5,"div",39),n["\u0275\u0275elementStart"](6,"div",40),n["\u0275\u0275template"](7,ie,2,2,"div",41),n["\u0275\u0275pipe"](8,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](9,ne,7,5,"div",42),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"rx-form-builder",43),n["\u0275\u0275listener"]("modelChange",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit,o=n["\u0275\u0275nextContext"]();return i.model.sandbox.updateActionProperties(t),o.markEditorAsDirty()})("editorEvent",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit,o=n["\u0275\u0275reference"](1);return n["\u0275\u0275nextContext"]().onEvent(t,i.model,o)}),n["\u0275\u0275pipe"](11,"async"),n["\u0275\u0275pipe"](12,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("cdkDragData",e)("cdkDragDisabled",i.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("isOpen",e.isOpen),n["\u0275\u0275advance"](3),n["\u0275\u0275classProp"]("pl-0",i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](8,11,i.actionLabelsMap$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",n["\u0275\u0275pipeBind1"](11,13,e.config$))("model",n["\u0275\u0275pipeBind1"](12,15,e.model.sandbox.actionProperties$))("isReadOnly",i.config.isReadOnly)}}function re(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",29),n["\u0275\u0275element"](1,"adapt-empty-state",51),n["\u0275\u0275pipe"](2,"translate"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275propertyInterpolate"]("label",n["\u0275\u0275pipeBind1"](2,1,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.empty-state.message")))}function ae(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",52),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onSave()}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275text"](2),n["\u0275\u0275pipe"](3,"translate"),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](1,2,e.isSaveButtonDisabled$)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](3,4,"com.bmc.arsys.rx.client.common.save.label")," ")}}function se(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",6),n["\u0275\u0275element"](1,"span",7),n["\u0275\u0275element"](2,"adapt-icon",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name","question_circle_o")("adaptPopover",e.tooltip)}}function le(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1,"No actions added."),n["\u0275\u0275elementEnd"]())}function ce(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",16),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]().$implicit;return n["\u0275\u0275nextContext"](2).removeAction(t)}),n["\u0275\u0275elementEnd"]()}}function de(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",12),n["\u0275\u0275elementStart"](1,"strong",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"button",14),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).editAction(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,ce,1,0,"button",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](i.actionLabelsMap[e.data.name]),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!i.isDisabled)}}function pe(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"ul",10),n["\u0275\u0275template"](1,de,5,2,"li",11),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.selectedActions)}}function ue(e,t){const i=t[e];return t[null==i?void 0:i.parentGuid]}function me(e,t){const i=[e];let n=ue(e,t),o=n?n.guid:null;for(;o;)i.unshift(o),n=ue(o,t),o=n?n.guid:null;return i}function he(e,t){if(t.layout){if(p.RxViewLayout.hasChild(t.layout,e))return!0}return!!t.childDataComponentGuids&&(0,m.includes)(t.childDataComponentGuids,e)}function fe(e,t,i,n,o=0,r=0){const a=Object.assign({},e);return a.layout={outlets:e.layout.outlets.map(e=>{if(e.name===i){const i=[...e.columns];return n=isFinite(n)?n:i[o].children.length,i[o]||(i[o]={children:[]},r&&(i[o].span=r)),i[o]={children:[...i[o].children.slice(0,n),t,...i[o].children.slice(n)],span:i[o].span},Object.assign(Object.assign({},e),{columns:i})}return e})},a}function ge(e,t){const i=Object.assign({},t);return(0,m.some)(i.childDataComponentGuids,t=>e===t)&&(i.childDataComponentGuids=i.childDataComponentGuids.filter(t=>t!==e)),t.layout&&p.RxViewLayout.hasChild(t.layout,e)&&(i.layout=p.RxViewLayout.removeChildFromLayout(t.layout,e)),i}function ve(e){const t=[];return e.childDataComponentGuids&&t.push(...e.childDataComponentGuids),e.layout&&t.push(...p.RxViewLayout.getViewLayoutChildGuids(e.layout)),(0,m.uniq)(t)}function xe(e,t){const i=ve(e);return i.reduce((e,i)=>(e.push(...xe(t[i],t)),e),i)}class ye{constructor(){this.componentIcon="d-icon-file_o",this.componentPropertyIcon="d-icon-file_o_gear",this.settablePropertiesIcon="d-icon-arrow_right_square_input",this.actionOutputIcon="d-icon-arrow_chart"}getActionOutputDataDictionaryBranch(e,t){return{label:e,icon:"d-icon-arrow_chart",children:(0,m.map)(t,e=>this.buildDataDictionaryBranch(e,this.actionOutputIcon))}}getComponentCommonDataDictionaryBranch(e){return Object.assign(Object.assign({},e),{icon:this.componentIcon,children:(0,m.flow)(e=>(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,this.componentPropertyIcon)),m.compact)(e.children)})}getSettablePropertiesDataDictionary(e){return(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,this.settablePropertiesIcon))}buildDataDictionaryBranch(e,t){const i=Object.assign({},e);return e.expression&&(i.icon=t),e.children&&(i.children=(0,m.flow)(e=>(0,m.map)(e,e=>this.buildDataDictionaryBranch(e,t)),m.compact)(e.children)),i}}ye.\u0275fac=function(e){return new(e||ye)},ye.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ye,factory:ye.\u0275fac,providedIn:"root"});class be{constructor(){this.componentsCommon=null,this.componentsCommonSubject=new h.ReplaySubject(1),this.componentsCommon$=this.componentsCommonSubject.asObservable(),this.viewCommon=null,this.viewCommonSubject=new h.ReplaySubject(1),this.viewCommon$=this.viewCommonSubject.asObservable(),this.actionsOutput=[],this.actionsOutputSubject=new h.ReplaySubject(1),this.actionsOutput$=this.actionsOutputSubject.asObservable(),this.settableProperties=null,this.settablePropertiesSubject=new h.ReplaySubject(1),this.settableProperties$=this.settablePropertiesSubject.asObservable()}setCommonDataDictionaryBranch(e,t){this.setComponentCommon((0,m.isEmpty)(t)?(0,m.omit)(this.componentsCommon,[e]):Object.assign(Object.assign({},this.componentsCommon),{[e]:t}))}setViewCommonDataDictionaryBranch(e){this.setViewCommon(e)}setSettablePropertiesDataDictionary(e){this.setSettableProperties(Object.assign(Object.assign({},this.settableProperties),e.reduce((e,{guid:t,componentName:i,dataDictionary:n})=>(e[t]={componentName:i,dataDictionary:n},e),{})))}removeDataDictionaryForComponents(e){e.some(e=>(0,m.has)(this.componentsCommon,e))&&this.setComponentCommon((0,m.omit)(this.componentsCommon,e)),e.some(e=>(0,m.has)(this.settableProperties,e))&&this.setSettableProperties((0,m.omit)(this.settableProperties,e))}setActionOutputDataDictionaryBranch(e,t,i){this.setActionsOutput((0,m.flow)(n=>[...(0,m.reject)(n,{guid:e}),{guid:e,index:t,dataDictionaryBranch:i}],e=>(0,m.sortBy)(e,"index"))(this.actionsOutput))}updateActionOutputDataDictionaryBranchOrder(e){this.setActionsOutput((0,m.flow)(t=>(0,m.map)(t,t=>Object.assign(Object.assign({},t),{index:e[t.guid]})),e=>(0,m.sortBy)(e,"index"))(this.actionsOutput))}removeActionOutputDataDictionaryBranch(e){this.setActionsOutput((0,m.reject)(this.actionsOutput,{guid:e}))}removeAllActionOutputDataDictionaryBranches(){this.setActionsOutput(null)}clear(){this.setComponentCommon(null),this.setViewCommon(null),this.setSettableProperties(null),this.setActionsOutput([])}setComponentCommon(e){this.componentsCommon=e,this.componentsCommonSubject.next(this.componentsCommon)}setViewCommon(e){this.viewCommon=e,this.viewCommonSubject.next(this.viewCommon)}setActionsOutput(e){this.actionsOutput=e,this.actionsOutputSubject.next(this.actionsOutput)}setSettableProperties(e){this.settableProperties=e,this.settablePropertiesSubject.next(this.settableProperties)}}be.\u0275fac=function(e){return new(e||be)},be.\u0275prov=n["\u0275\u0275defineInjectable"]({token:be,factory:be.\u0275fac,providedIn:"root"});class Ce{constructor(){this.onChangeSubject=new h.Subject,this.configs=new Map,this.onChange$=this.onChangeSubject.asObservable()}clear(){this.configs.clear()}set(e,t){this.configs.set(e,t),this.onChangeSubject.next({guid:e,config:t})}get(e){return this.configs.get(e)}delete(e){this.onChangeSubject.next({guid:e,config:null}),this.configs.delete(e)}}Ce.\u0275fac=function(e){return new(e||Ce)},Ce.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ce,factory:Ce.\u0275fac,providedIn:"root"});const Se=(0,x.createAction)("[View Component] Components Removed",(0,x.props)()),we=(0,x.createAction)("[View Component] Initialize Component Models",(0,x.props)()),Ie=(0,x.createAction)("[View Component] Initialize Data Component Models",(0,x.props)()),_e=(0,x.createAction)("[View Component] Set Validation Issues",(0,x.props)()),De=(0,x.createAction)("[View Component] Set Expression Validation Issues",(0,x.props)()),Re=(0,x.createAction)("[View Component] Set Component Properties",(0,x.props)()),Ae=(0,x.createAction)("[View Component] Set Child Components",(0,x.props)()),Te=(0,x.createAction)("[View Component] Set Breadcrumbs",(0,x.props)()),Fe=(0,x.createAction)("[View Component] Select Component",(0,x.props)()),Ee=(0,x.createAction)("[View Component] Set Component Layout",(0,x.props)()),Me=(0,x.createAction)("[View Component] Move Component",(0,x.props)()),Oe=(0,x.createAction)("[View Component] Insert Component",(0,x.props)()),ke=(0,x.createAction)("[View Component] Add New Components",(0,x.props)()),je=(0,x.createAction)("[View Component] Update Component Model",(0,x.props)()),Pe=(0,x.createAction)("[View Component] Remove Components",(0,x.props)());class Ne{constructor(e){this.store$=e}dispatch(e){this.store$.dispatch(e)}}Ne.\u0275fac=function(e){return new(e||Ne)(n["\u0275\u0275inject"](x.Store))},Ne.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ne,factory:Ne.\u0275fac,providedIn:"root"});const Ve=(0,x.createAction)("[View Designer] View Definition Save Success",(0,x.props)()),Le=(0,x.createAction)("[View Designer] View Definition Save Error"),Be=(0,x.createAction)("[View Designer] View Definition Load Success",(0,x.props)()),$e=(0,x.createAction)("[View Designer] View Definition Load Error"),Ge=(0,x.createAction)("[View Designer] Set Generated View Definition",(0,x.props)()),ze=(0,x.createAction)("[View Designer] Load View Definition",(0,x.props)()),Ue=(0,x.createAction)("[View Designer] Bundle Friendly Name Load Success",(0,x.props)()),qe=(0,x.createAction)("[View Designer] Bundle Friendly Name Load Error",(0,x.props)()),Xe=(0,x.createAction)("[View Designer] View Models Initialized"),He=(0,x.createAction)("[View Designer] View Models Updated After Save"),We=(0,x.createAction)("[View Designer] Update View Model",(0,x.props)()),Ye=(0,x.createAction)("[View Designer] Set View Model",(0,x.props)()),Qe=(0,x.createAction)("[View Designer] Select Inspector Tab",(0,x.props)()),Ke=(0,x.createAction)("[View Designer] Save View Definition",(0,x.props)()),Je=(0,x.createAction)("[View Designer] Run Preview"),Ze=(0,x.createAction)("[View Designer] Load Bundle Friendly Name"),et=(0,x.createAction)("[View Designer] Generate View Definition",(0,x.props)()),tt=(0,x.createAction)("[View Designer] Clear Canvas"),it=(0,x.createAction)("[View Designer] Init",(0,x.props)()),nt=(0,x.createAction)("[View Designer] Destroy"),ot=(0,x.createFeatureSelector)("viewDesigner"),rt=(0,x.createSelector)(ot,e=>e.model),at=(0,x.createSelector)(rt,e=>e.viewDesignModel),st=(0,x.createSelector)(at,(e,{propertyName:t})=>(0,m.get)(e,t)),lt=(0,x.createSelector)(rt,e=>e.viewComponentDesignModels),ct=(0,x.createSelector)(rt,e=>{var t;return null===(t=Object.values(e.viewComponentDesignModels)[0])||void 0===t?void 0:t.type}),dt=(0,x.createSelector)(lt,(e,{guid:t})=>e[t]),pt=(0,x.createSelector)(dt,e=>null==e?void 0:e.parentGuid),ut=(0,x.createSelector)(lt,(e,{guid:t,propertyName:i})=>e[t]?i?(0,m.get)(e[t].propertiesByName,i):e[t].propertiesByName:null),mt=(0,x.createSelector)(lt,(e,{guid:t})=>e[t]?e[t].type:null),ht=(0,x.createSelector)(dt,e=>null==e?void 0:e.layout),ft=(0,x.createSelector)(dt,e=>null==e?void 0:e.permissions),gt=(0,x.createSelector)(dt,e=>null==e?void 0:e.childDataComponentGuids),vt=(0,x.createSelector)(ot,e=>e.ui),xt=(0,x.createSelector)(vt,e=>e.isViewDefinitionLoading),yt=(0,x.createSelector)(vt,e=>e.friendlyBundleName),bt=(0,x.createSelector)(vt,e=>e.currentBundleId),Ct=(0,x.createSelector)(ot,e=>e.viewDefinition),St=(0,x.createSelector)(ot,e=>e.validation),wt=(0,x.createSelector)(ot,e=>e.breadcrumbs),It=(0,x.createSelector)(vt,e=>e.selectedInspectorTabId),_t=(0,x.createSelector)(vt,e=>e.selectedComponentGuid),Dt=(0,x.createSelector)(vt,e=>e.areViewModelsReady);(0,x.createSelector)(_t,lt,(e,t)=>{if(t&&e){const i=t[e];return i?i.propertiesByName:null}return null});class Rt{constructor(e,t,i,n,o,r,a,s){this.dispatcher=e,this.store$=t,this.actions$=i,this.rxViewDesignerInspectorService=n,this.rxGuidService=o,this.rxViewDataDictionaryBuilderService=r,this.rxViewDataDictionaryService=a,this.rxOverlayService=s,this.viewDefinition$=this.store$.select(Ct),this.validationIssues$=this.store$.select(St),this.breadcrumbs$=this.store$.select(wt),this.viewDesignerModelState$=this.store$.select(rt),this.viewModel$=this.store$.select(at).pipe((0,f.filter)(Boolean)),this.viewModelGuid$=this.getViewPropertyValue("guid"),this.viewComponentModels$=this.store$.select(lt),this.firstViewComponentModelType$=this.store$.select(ct),this.isExtensionView$=this.getViewPropertyValue("targetViewDefinitionName").pipe((0,f.map)(Boolean),(0,f.shareReplay)(1)),this.isExtensionContainerSet$=this.getViewPropertyValue("targetExtensionContainerGuid").pipe((0,f.map)(Boolean),(0,f.shareReplay)(1)),this.allComponentGuids$=this.viewComponentModels$.pipe((0,f.map)(e=>new Set(Object.keys(e))),(0,f.shareReplay)({refCount:!0,bufferSize:1})),this.selectedComponentGuid$=this.store$.select(_t).pipe((0,f.switchMap)(e=>this.viewModelGuid$.pipe((0,f.map)(t=>e===t?null:e),(0,f.take)(1)))),this.selectedComponentProperties$=this.selectedComponentGuid$.pipe((0,f.switchMap)(e=>e?this.getComponentProperties(e):(0,h.of)(null))),this.isViewDefinitionLoading$=this.store$.select(xt),this.selectedInspectorTabId$=this.store$.select(It),this.bundleFriendlyName$=this.store$.select(yt),this.currentBundleId$=this.store$.select(bt),this.viewInspectorLayout$=(0,h.merge)(this.viewModelGuid$,this.rxViewDesignerInspectorService.onChange$.pipe((0,f.withLatestFrom)(this.viewModelGuid$),(0,f.filter)(([e,t])=>e.guid===t),(0,f.map)(([e,t])=>t))).pipe((0,f.map)(e=>{const t=this.rxViewDesignerInspectorService.get(e);return t?t.inspectorSectionConfigs:null})),this.selectedComponentInspectorLayout$=(0,h.merge)(this.selectedComponentGuid$.pipe((0,f.distinctUntilChanged)()),this.rxViewDesignerInspectorService.onChange$.pipe((0,f.withLatestFrom)(this.selectedComponentGuid$),(0,f.filter)(([e,t])=>e.guid===t),(0,f.map)(([e,t])=>t))).pipe((0,f.map)(e=>{const t=this.rxViewDesignerInspectorService.get(e);return t?t.inspectorSectionConfigs:null})),this.isViewReadOnly$=(0,h.combineLatest)([this.viewModel$,this.currentBundleId$.pipe((0,f.switchMap)(e=>this.rxOverlayService.areNewDefinitionsAllowed(e)))]).pipe((0,f.map)(([e,t])=>!t||!this.rxOverlayService.isCustomizationEnabled("allowOverlay",e)),(0,f.distinctUntilChanged)(),(0,f.shareReplay)(1)),this.viewDefinitionLoadError$=this.actions$.pipe((0,v.ofType)($e)),this.viewDefinitionSaveSuccess$=this.actions$.pipe((0,v.ofType)(Ve)),this.initViewDesigner$=this.actions$.pipe((0,v.ofType)(it)),this.destroyViewDesignerSubject=new h.Subject,this.destroyViewDesigner$=this.destroyViewDesignerSubject.asObservable(),this.viewModelsInitialized$=this.actions$.pipe((0,v.ofType)(Xe)),this.areViewModelsReady$=this.store$.select(Dt),this.viewCommonDataDictionaryState$=this.rxViewDataDictionaryService.viewCommon$,this.componentsCommonDataDictionaryState$=this.rxViewDataDictionaryService.componentsCommon$,this.actionsDataDictionaryState$=this.rxViewDataDictionaryService.actionsOutput$,this.settablePropertiesDataDictionaryState$=this.rxViewDataDictionaryService.settableProperties$,this.settablePropertiesDataDictionarySubject=new h.Subject,(0,h.merge)(this.settablePropertiesDataDictionarySubject.pipe((0,f.bufferToggle)(this.initViewDesigner$,e=>this.viewModelsInitialized$)),this.viewModelsInitialized$.pipe((0,f.switchMap)(()=>this.settablePropertiesDataDictionarySubject.pipe((0,f.map)(e=>[e]),(0,f.takeUntil)(this.initViewDesigner$))))).subscribe(e=>{this.rxViewDataDictionaryService.setSettablePropertiesDataDictionary(e)})}getComponentModel(e){return this.store$.select(dt,{guid:e})}initViewDesigner(e){this.dispatcher.dispatch(it({payload:e}))}destroyViewDesigner(){this.destroyViewDesignerSubject.next(),this.dispatcher.dispatch(nt())}selectComponent(e){this.dispatcher.dispatch(Fe({guid:e}))}insertComponent(e){this.dispatcher.dispatch(Oe(Object.assign(Object.assign({columnIndex:(0,m.isFinite)(e.data&&e.data.columnIndex)?e.data.columnIndex:0},e),{data:{guid:e.data.draggedViewComponentGuid,type:e.data.draggedViewComponentDescriptor.type,initialPropertiesByName:e.data.initialPropertiesByName}})))}selectInspectorTab(e){this.dispatcher.dispatch(Qe(e))}generateViewDefinition(e){this.dispatcher.dispatch(et({payload:e}))}updateComponentProperties(e,t){this.dispatcher.dispatch(je({payload:[{guid:e,partialModel:{propertiesByName:t}}]}))}updateComponentModel(e,t){this.dispatcher.dispatch(je({payload:[{guid:e,partialModel:t}]}))}getComponentProperties(e){return this.store$.select(ut,{guid:e})}getComponentPropertyValue(e,t){return this.store$.select(ut,{guid:e,propertyName:t}).pipe((0,f.withLatestFrom)(this.getComponentModel(e)),(0,f.switchMap)(([e,t])=>t?(0,h.of)(e):h.EMPTY))}getComponentType(e){return this.store$.select(mt,{guid:e})}getComponentPermissions(e){return this.store$.select(ft,{guid:e})}getComponentLayout(e){return this.store$.select(ht,{guid:e})}updateSelectedComponentProperties(e){this.selectedComponentGuid$.pipe((0,f.take)(1)).subscribe(t=>{this.updateComponentProperties(t,e)})}saveViewDefinition(e){this.dispatcher.dispatch(Ke({payload:e}))}updateViewProperties(e){this.dispatcher.dispatch(We({payload:e}))}setViewProperties(e){this.dispatcher.dispatch(Ye({payload:e}))}getViewPropertyValue(e){return this.store$.select(st,{propertyName:e}).pipe((0,f.switchMapTo)(this.viewModel$.pipe((0,f.map)(t=>t[e]),(0,f.take)(1))),(0,f.distinctUntilChanged)())}runPreview(){this.dispatcher.dispatch(Je())}clearCanvas(){this.dispatcher.dispatch(tt())}setComponentInspector(e,t){this.rxViewDesignerInspectorService.set(e,t)}setValidationIssues(e,t){this.dispatcher.dispatch(_e({guid:e,issues:t}))}setExpressionValidationIssues(e){this.dispatcher.dispatch(De({issues:e}))}setViewInspectorConfig(e){this.viewModelGuid$.pipe((0,f.take)(1)).subscribe(t=>{this.setComponentInspector(t,e)})}removeViewComponents(e,t){e.length&&this.dispatcher.dispatch(Pe({guids:e,selectParent:t}))}setComponentSettablePropertiesDataDictionary(e,t,i){this.settablePropertiesDataDictionarySubject.next({guid:e,componentName:t,dataDictionary:this.rxViewDataDictionaryBuilderService.getSettablePropertiesDataDictionary(i)})}setComponentCommonDataDictionaryBranch(e,t){this.rxViewDataDictionaryService.setCommonDataDictionaryBranch(e,t?this.rxViewDataDictionaryBuilderService.getComponentCommonDataDictionaryBranch(t):null)}setViewCommonDataDictionaryBranch(e){this.rxViewDataDictionaryService.setViewCommonDataDictionaryBranch(e)}removeAllActionDataDictionaryBranches(){this.rxViewDataDictionaryService.removeAllActionOutputDataDictionaryBranches()}removeActionDataDictionaryBranch(e){this.rxViewDataDictionaryService.removeActionOutputDataDictionaryBranch(e)}setActionDataDictionaryBranch(e,t,i,n=null){this.rxViewDataDictionaryService.setActionOutputDataDictionaryBranch(e,t,this.rxViewDataDictionaryBuilderService.getActionOutputDataDictionaryBranch(i,n))}updateActionDataDictionaryBranchOrder(e){this.rxViewDataDictionaryService.updateActionOutputDataDictionaryBranchOrder(e)}getChildComponentGuids(e,t=!1,i){return(0,h.combineLatest)([this.store$.select(ht,{guid:e}),this.store$.select(gt,{guid:e})]).pipe((0,f.switchMap)(()=>this.getComponentModel(e).pipe((0,f.take)(1))),(0,f.switchMap)(e=>e?(0,h.of)((0,m.compact)([...e.layout?p.RxViewLayout.getViewLayoutChildGuids(e.layout):[],...e.childDataComponentGuids||[]])):h.EMPTY),(0,f.switchMap)(e=>e.length&&t?(0,h.combineLatest)(e.map(e=>this.getChildComponentGuids(e,!0))).pipe((0,f.map)(m.flatten),(0,f.map)(t=>[...t,...e])):(0,h.of)(e)),(0,f.switchMap)(e=>e.length?this.viewComponentModels$.pipe((0,f.map)(t=>{let n=e.filter(e=>t[e]);return i&&(n=n.filter(e=>i({type:t[e].type,guid:t[e].guid,data:t[e].propertiesByName}))),n}),(0,f.take)(1)):(0,h.of)(e)))}getChildComponents(e,t){return this.getChildComponentGuids(e,!1,t).pipe((0,f.switchMap)(e=>e.length?(0,h.combineLatest)(e.map(e=>this.getComponentProperties(e).pipe((0,f.withLatestFrom)(this.getComponentModel(e)),(0,f.switchMap)(([t,i])=>i?(0,h.of)({type:i.type,data:t,guid:e}):h.EMPTY)))):(0,h.of)([])))}getComponent(e){return this.getComponentModel(e).pipe((0,f.map)(e=>e?{data:e.propertiesByName,guid:e.guid,type:e.type}:null))}getComponentsByType(e){return this.viewComponentModels$.pipe((0,f.map)(t=>(0,m.filter)(t,{type:e}).map(e=>({guid:e.guid,data:e.propertiesByName,type:e.type}))))}getChildComponentTree(e){return this.viewComponentModels$.pipe((0,f.map)(t=>{const i=e=>ve(e).reduce((e,n)=>(t[n]&&e.push({guid:n,data:t[n].propertiesByName,type:t[n].type,children:i(t[n])}),e),[]);return t[e]?i(t[e]):[]}))}getParentComponentGuid(e,t){return this.store$.select(pt,{guid:e}).pipe((0,f.switchMap)(e=>e&&t?this.store$.select(mt,{guid:e}).pipe((0,f.switchMap)(i=>i===t?(0,h.of)(e):this.getParentComponentGuid(e,t))):(0,h.of)(e||null)))}setChildren(e,t){this.dispatcher.dispatch(Ae({payload:{guid:e,data:t}}))}}Rt.\u0275fac=function(e){return new(e||Rt)(n["\u0275\u0275inject"](Ne),n["\u0275\u0275inject"](x.Store),n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](ye),n["\u0275\u0275inject"](be),n["\u0275\u0275inject"](l.RxOverlayService))},Rt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Rt,factory:Rt.\u0275fac,providedIn:"root"});class At{constructor(){this.models=new Map}clear(){this.models.clear()}set(e,t){this.models.set(e,t)}get(e){return this.models.get(e)}delete(e){this.models.delete(e)}}At.\u0275fac=function(e){return new(e||At)},At.\u0275prov=n["\u0275\u0275defineInjectable"]({token:At,factory:At.\u0275fac,providedIn:"root"});class Tt{constructor(e,t,i,n){this.rxDefinitionNameService=e,this.rxBundleCacheService=t,this.viewDesignerModels=i,this.rxViewDefinitionLocalizationService=n}generate(e,t,i=!1){const n=e,o=(0,m.omit)(n,"displayName","layout","layoutName","pageComponent","isAngularJsView");return o.name=o.name||this.rxDefinitionNameService.getDefinitionName(this.rxBundleCacheService.bundleId,n.displayName),o.componentDefinitions=this.generateComponentDefinitions(n,t),i&&(o.localizableStringsByComponentId=this.rxViewDefinitionLocalizationService.extractLocalizableStrings(o)),delete o.localizablePropertyToStringGuidMap,o.layout=JSON.stringify(n.layout),o}generateComponentDefinitions(e,t){return ve(e).map(e=>{const i=Object.assign({},t[e]),n=this.viewDesignerModels.get(e),o=(0,m.isFunction)(null==n?void 0:n.getPropertiesByName)?n.getPropertiesByName(i.propertiesByName):i.propertiesByName;return i.propertiesByName=this.serializeComponentDefinitionProperties(o),delete i.parentGuid,i.type!==p.RxViewComponentType.Action&&(0,m.has)(i.propertiesByName,"name")&&(i.propertiesByName.name&&(i.name=i.propertiesByName.name),delete i.propertiesByName.name),(i.layout||i.childDataComponentGuids)&&(i.componentDefinitions=this.generateComponentDefinitions(i,t),delete i.childDataComponentGuids),i.layout&&(i.layout=JSON.stringify(i.layout)),i})}serializeComponentDefinitionProperties(e){return(0,m.transform)(e,(e,t,i)=>{switch(!0){case(0,m.isArray)(t):case(0,m.isNumber)(t):case(0,m.isBoolean)(t):case(0,m.isPlainObject)(t):e[i]=JSON.stringify(t);break;case(0,m.isObject)(t):const n=Object.create(null);t.forEach((e,t)=>n[t]=e),e[i]=JSON.stringify(n);break;case(0,m.isFunction)(t):case(0,m.isUndefined)(t):e[i]=null;break;default:e[i]=t}},{})}}function Ft(e){return!/^[a-z][-\w]+$/gi.test((0,m.isObject)(e)?e.data.value:e)}function Et(e){const t=[];if(e){e.split(" ").some(Ft)&&t.push({type:"error",propertyName:"styles",description:"CSS class name is invalid."})}return t}function Mt(e){const t=[];return(null==e?void 0:e.length)||t.push({type:"error",propertyName:p.RX_AVAILABLE_ON_DEVICES_PROP_NAME,description:"At least one device must be selected."}),t}function Ot(e){return[...Et(e[p.RX_STYLES_PROP_NAME]),...Mt(e[p.RX_AVAILABLE_ON_DEVICES_PROP_NAME])]}Tt.\u0275fac=function(e){return new(e||Tt)(n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](At),n["\u0275\u0275inject"](p.RxViewDefinitionLocalizationService))},Tt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Tt,factory:Tt.\u0275fac,providedIn:"root"});class kt{constructor(e,t,i,n,o){this.rxDefaultExpressionValidatorService=e,this.rxDefaultExpressionEvaluatorService=t,this.rxStringService=i,this.rxExpressionParserService=n,this.viewDesignerFacade=o}validate(e,t,i=this.rxStringService.prettify(t),n=this.rxDefaultExpressionEvaluatorService){let o=(0,h.of)([]);if(this.rxDefaultExpressionValidatorService.isValid(e,n)){if(this.rxStringService.isNonEmptyString(e)){const i=new Set;if(this.rxExpressionParserService.parse(e,(e,t)=>{if(e===l.ExpressionParserToken.RxExpression||e===l.ExpressionParserToken.SingleQuoteRxExpression){const e=/\${view\.components\.([0-9a-z-]+)\..+}/.exec(t);e&&e[1]&&i.add(e[1])}return t}),i.size){const e=Array.from(i);o=this.viewDesignerFacade.allComponentGuids$.pipe((0,f.map)(t=>e.filter(e=>!t.has(e))),(0,f.distinctUntilChanged)(m.isEqual),(0,f.map)(e=>e.map(()=>({type:"error",description:"Expression references a non-existent view component.",propertyName:t}))))}}}else o=(0,h.of)([{type:"error",description:`${i} must be a valid expression.`,propertyName:t}]);return o}}kt.\u0275fac=function(e){return new(e||kt)(n["\u0275\u0275inject"](p.RxDefaultExpressionValidatorService),n["\u0275\u0275inject"](p.RxDefaultExpressionEvaluatorService),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxExpressionParserService),n["\u0275\u0275inject"](Rt))},kt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:kt,factory:kt.\u0275fac,providedIn:"root"});class jt{constructor(e,t,i,n,o){this.viewDesignerFacade=e,this.rxViewDataDictionaryBuilderService=t,this.rxViewComponentRegistryService=i,this.rxObjectUtilsService=n,this.rxDataDictionaryUtils=o,this.componentsCommonDataDictionaryStateClone$=this.viewDesignerFacade.componentsCommonDataDictionaryState$.pipe((0,f.map)(e=>e?this.rxObjectUtilsService.cloneDeep(e):{}),(0,f.shareReplay)(1)),this.viewCommonDataDictionaryStateClone$=this.viewDesignerFacade.viewCommonDataDictionaryState$.pipe((0,f.filter)(Boolean),(0,f.map)(e=>this.rxObjectUtilsService.cloneDeep(e)),(0,f.shareReplay)(1)),this.commonDataDictionary$=this.getCommonDataDictionary(),this.settablePropertiesDataDictionary$=this.viewDesignerFacade.settablePropertiesDataDictionaryState$.pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewDesignerModelState$),(0,f.map)(([e,t])=>this.rxObjectUtilsService.cloneDeep(this.getSettablePropsDataDictionary(e,t))))}getActionDataDictionary(e){return(0,h.combineLatest)([this.viewDesignerFacade.actionsDataDictionaryState$,this.getCommonDataDictionary()]).pipe((0,f.map)(([t,i])=>{const n=(0,m.find)(t,{guid:e});return[{label:"Actions",children:n?(0,m.flow)(e=>(0,m.take)(e,n.index),e=>(0,m.map)(e,"dataDictionaryBranch"),m.compact,e=>(0,m.filter)(e,e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.length}),e=>this.rxObjectUtilsService.cloneDeep(e))(t):[]},...i]}),(0,f.distinctUntilChanged)(m.isEqual))}getComponentCommonDataDictionary(e){return this.componentsCommonDataDictionaryStateClone$.pipe((0,f.map)(t=>t[e]))}getCommonDataDictionary(e){return(0,h.combineLatest)([this.viewCommonDataDictionaryStateClone$,this.componentsCommonDataDictionaryStateClone$.pipe((0,f.map)(t=>Object.values(e?Object.assign(Object.assign({},t),e):t)))]).pipe((0,f.map)(([e,t])=>[{label:"General",children:[{label:"Current user",icon:"d-icon-dollar",expression:"${keywords.user}"},{label:"New line",icon:"d-icon-dollar",expression:"${keywords.newLine}"}]},{label:"Functions",children:this.rxDataDictionaryUtils.getFunctionsDataDictionaryBranch(p.RX_EXPRESSION_FUNCTIONS)},Object.assign(Object.assign({},e),{children:[{label:"Components",children:(0,m.compact)(t),expanded:!0},...e.children]})]))}getSettablePropsDataDictionary(e,t){return ve(t.viewDesignModel).map(i=>this.getSettablePropsDataDictionaryBranch(i,t,e,!0)).filter(Boolean)}getSettablePropsDataDictionaryBranch(e,t,i,n=!1){const o=i[e],r=t.viewComponentDesignModels[e],a=this.rxViewComponentRegistryService.get(r.type),s=a.outlets&&r.layout?p.RxViewLayout.getViewLayoutChildGuids(r.layout):null,l=(0,m.map)(s,e=>this.getSettablePropsDataDictionaryBranch(e,t,i)).filter(Boolean),c=(0,m.get)(o,"dataDictionary",[]);if(l.length||c.length)return{label:(null==o?void 0:o.componentName)||a.name,expanded:n,children:l.length&&c.length?[{label:"Components",children:l},{label:"Properties",children:c}]:l.length?l:c}}}jt.\u0275fac=function(e){return new(e||jt)(n["\u0275\u0275inject"](Rt),n["\u0275\u0275inject"](ye),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](g.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxDataDictionaryUtils))},jt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:jt,factory:jt.\u0275fac,providedIn:"root"});class Pt extends l.RxExpressionConfigurator{constructor(e){super(),this.injector=e,this.rxExpressionHelperService=this.injector.get(p.RxExpressionHelperService)}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{dataDictionary$:this.commonDataDictionary$,operators:l.ExpressionOperatorRowsByGroup.get(l.ExpressionOperatorGroup.AllClient),validateExpression:(e,t)=>{let i=!0;const n=this.getExpressionEvaluator(e);try{n.parseExpression(this.rxExpressionHelperService.prepare(t))}catch(o){i=!1}return(0,h.of)(i)}})}}class Nt extends Pt{constructor(e,t,i,n){super(e),this.injector=e,this.componentGuid=t,this.componentModel=i,this.componentType=n,this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.rxViewDataDictionaryService=this.injector.get(jt),this.rxViewComponentRegistryService=this.injector.get(p.RxViewComponentRegistryService),this.commonDataDictionary$=this.rxViewDataDictionaryService.commonDataDictionary$}getExpressionEvaluator(e){var t;const i=this.componentType&&this.rxViewComponentRegistryService.get(this.componentType).properties.find(t=>t.name===e);return(0,m.isFunction)(null===(t=null==i?void 0:i.evaluatorService)||void 0===t?void 0:t.parseExpression)?i.evaluatorService:this.rxDefaultExpressionEvaluatorService}getCommonDataDictionary(e,t=this.componentGuid){return e?e.pipe((0,f.switchMap)(e=>this.rxViewDataDictionaryService.getCommonDataDictionary({[t]:e}))):this.commonDataDictionary$}getComponentCommonDataDictionary(e){return this.rxViewDataDictionaryService.getComponentCommonDataDictionary(e||this.componentGuid)}}class Vt{constructor(e,t,i){this.viewDesignerFacade=e,this.rxOverlayService=t,this.translateService=i,this.destroyed$=new h.ReplaySubject(1)}ngOnInit(){(0,h.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("allowOverlay"),this.viewDesignerFacade.getViewPropertyValue("scope"),this.viewDesignerFacade.getViewPropertyValue("overlayGroupId"),this.viewDesignerFacade.getViewPropertyValue("overlayDescriptor"),this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime")]).pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewModel$),(0,f.takeUntil)(this.destroyed$)).subscribe(([[e,t,i,n,o],r])=>{this.controlOptions={allowOverlay:e,scope:t,overlayGroupId:i,overlayDescriptor:n,isDisabled:!this.rxOverlayService.isCustomizationEnabled("allowOverlay",r),definitionTypeDisplayName:this.translateService.instant("com.bmc.arsys.rx.client.view-definition.label").toLowerCase()}})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}setCustomization(e){this.viewDesignerFacade.updateViewProperties(e)}}Vt.\u0275fac=function(e){return new(e||Vt)(n["\u0275\u0275directiveInject"](Rt),n["\u0275\u0275directiveInject"](l.RxOverlayService),n["\u0275\u0275directiveInject"](u.TranslateService))},Vt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vt,selectors:[["rx-view-customization-options"]],inputs:{options:"options"},decls:1,vars:2,consts:[[3,"options","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-scope-customization-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.value=e})("ngModelChange",function(e){return t.setCustomization(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.controlOptions)("ngModel",t.value)},directives:[c.CustomizationOptionsComponent,y.NgControlStatus,y.NgModel],encapsulation:2});class Lt{constructor(e){this.viewDesignerFacade=e,this.events=new n.EventEmitter,this.controlOptions$=(0,h.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("allowOverlay"),this.viewDesignerFacade.getViewPropertyValue("scope"),this.viewDesignerFacade.getViewPropertyValue("overlayGroupId"),this.viewDesignerFacade.getViewPropertyValue("overlayDescriptor")]).pipe((0,f.map)(([e,t,i,n])=>({allowOverlay:e,scope:t,overlayGroupId:i,overlayDescriptor:n})))}}Lt.\u0275fac=function(e){return new(e||Lt)(n["\u0275\u0275directiveInject"](Rt))},Lt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Lt,selectors:[["rx-view-revert-customization"]],inputs:{options:"options",isDisabled:"isDisabled"},outputs:{events:"events"},decls:2,vars:4,consts:[[3,"options","isDisabled","events"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-revert-customization",0),n["\u0275\u0275listener"]("events",function(e){return t.events.emit(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",n["\u0275\u0275pipeBind1"](1,2,t.controlOptions$))("isDisabled",t.isDisabled)},directives:[c.RxRevertCustomizationComponent],pipes:[b.AsyncPipe],encapsulation:2});class Bt{}Bt.\u0275fac=function(e){return new(e||Bt)},Bt.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Bt,declarations:[Lt],imports:[b.CommonModule,c.RxRevertCustomizationModule]}),Bt.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,c.RxRevertCustomizationModule]]});class $t{constructor(e,t,i,n,o,r,a,s,l,c,d,p,u){this.injector=e,this.viewDesignerFacade=t,this.rxStringService=i,this.rxOverlayService=n,this.rxViewComponentRegistryService=o,this.rxBundleCacheService=r,this.rxModalService=a,this.rxViewDefinitionCacheService=s,this.rxViewDefinitionParserService=l,this.rxGuidService=c,this.viewDesignerDispatcher=d,this.rxDefinitionNameService=p,this.rxViewExpressionValidatorService=u,this.expressionConfigurator=new Nt(this.injector,null,this),this.destroyed$=new h.ReplaySubject(1),this.allViewDefinitionNamesByBundleId$=this.viewDesignerFacade.currentBundleId$.pipe((0,f.filter)(Boolean),(0,f.switchMap)(e=>this.rxViewDefinitionCacheService.getViewDefinitionNames(e).pipe((0,f.map)(e=>e.map(e=>this.rxDefinitionNameService.getDisplayNameForValidation(e)))))),this.targetExtensionContainerOptions$=this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,f.switchMap)(e=>e?this.getTargetExtensionContainerOptions(e).pipe((0,f.take)(1)):(0,h.of)(null)),(0,f.shareReplay)(1)),this.targetViewDefinition$=this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,f.filter)(Boolean),(0,f.switchMap)(e=>this.rxViewDefinitionCacheService.getViewDefinition(e))),this.init()}init(){this.viewDesignerFacade.initViewDesigner$.pipe((0,f.concatMapTo)(this.viewDesignerFacade.viewModelsInitialized$.pipe((0,f.switchMapTo)((0,h.combineLatest)([this.viewDesignerFacade.viewComponentModels$.pipe((0,f.map)(e=>{const t=Object.values(e).find(e=>e.type===p.RxViewComponentType.Page);return t?e[t.childDataComponentGuids[0]].type:null})),this.viewDesignerFacade.viewModel$,this.targetExtensionContainerOptions$]).pipe((0,f.take)(1))))),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t,i])=>{this.viewDesignerFacade.updateViewProperties({pageComponent:e}),this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(Object.assign(Object.assign({},t),{pageComponent:e}),i))}),this.viewDesignerFacade.initViewDesigner$.pipe((0,f.switchMapTo)(this.targetExtensionContainerOptions$.pipe((0,f.skip)(1),(0,f.withLatestFrom)(this.viewDesignerFacade.viewModel$))),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t])=>this.onTargetExtensionContainerOptionsChange(e,t)),this.viewDesignerFacade.initViewDesigner$.pipe((0,f.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("pageComponent").pipe((0,f.skip)(1),(0,f.switchMapTo)((0,h.combineLatest)([this.viewDesignerFacade.viewModel$,this.viewDesignerFacade.viewComponentModels$,this.targetExtensionContainerOptions$]).pipe((0,f.take)(1))))),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t,i])=>this.onPageComponentChange(e,t,i)),this.viewDesignerFacade.initViewDesigner$.pipe((0,f.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName").pipe((0,f.skip)(1))),(0,f.switchMap)(()=>this.viewDesignerFacade.viewComponentModels$.pipe((0,f.first)())),(0,f.takeUntil)(this.destroyed$)).subscribe(e=>{(0,m.isEmpty)(e)||this.viewDesignerFacade.clearCanvas()}),this.viewDesignerFacade.initViewDesigner$.pipe((0,f.switchMapTo)((0,h.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("styles").pipe((0,f.map)(Et)),this.validateDisplayName(),this.validateInputParams(),this.validateOutputParamExpressions(),this.validateExtensionContainer()]).pipe((0,f.map)(m.flatten),(0,f.map)(m.compact),(0,f.withLatestFrom)(this.viewDesignerFacade.viewModelGuid$))),(0,f.takeUntil)(this.destroyed$)).subscribe(([e,t])=>{this.viewDesignerFacade.setValidationIssues(t,e)}),this.viewDesignerFacade.initViewDesigner$.pipe((0,f.switchMapTo)(this.viewDesignerFacade.getViewPropertyValue("inputParams")),(0,f.takeUntil)(this.destroyed$)).subscribe(e=>this.viewDesignerFacade.setViewCommonDataDictionaryBranch(this.getViewCommonDataDictionary(e))),this.viewDesignerFacade.getViewPropertyValue("targetExtensionContainerGuid").pipe((0,f.withLatestFrom)(this.targetViewDefinition$),(0,f.map)(([e,t])=>this.getTargetRecordDefinitionName(t,e)),(0,f.distinctUntilChanged)(),(0,f.switchMapTo)(this.viewDesignerFacade.viewComponentModels$.pipe((0,f.take)(1))),(0,f.filter)(e=>!(0,m.isEmpty)(e)),(0,f.takeUntil)(this.destroyed$)).subscribe(()=>this.viewDesignerFacade.clearCanvas())}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}getTargetExtensionContainerOptions(e){return this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,f.map)(e=>this.rxViewDefinitionParserService.getComponents(e).filter(({componentDefinition:e})=>e.type===p.RxViewComponentType.ExtensionContainer).map(({componentDefinition:e})=>({id:e.guid,name:e.propertiesByName.name||e.name}))))}onTargetExtensionContainerOptionsChange(e,t){this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(t,e)),e?1===e.length&&this.viewDesignerFacade.updateViewProperties({targetExtensionContainerGuid:e[0].id}):this.viewDesignerFacade.updateViewProperties({targetExtensionContainerGuid:null})}onPageComponentChange(e,t,i){const n=(0,m.find)(t,{type:p.RxViewComponentType.Page});this.viewDesignerFacade.setViewInspectorConfig(this.getInspector(e,i));const o=[];if(e.pageComponent){if(n)this.viewDesignerFacade.updateComponentModel(n.childDataComponentGuids[0],{type:e.pageComponent});else{const i=this.rxGuidService.generate();(0,m.isEmpty)(t)||this.viewDesignerFacade.removeViewComponents(ve(e)),o.push(we({payload:[{componentModel:{guid:i,resourceType:p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,type:p.RxViewComponentType.Page,propertiesByName:{},parentGuid:e.guid},insertIndex:0,columnIndex:0,outletName:p.RX_VIEW_DEFINITION.defaultOutletName}]}),Ie({payload:[{componentModel:{guid:this.rxGuidService.generate(),type:e.pageComponent,resourceType:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,propertiesByName:{},parentGuid:i}}]}))}this.viewDesignerFacade.updateViewProperties({inputParams:[],outputParams:[]})}else n&&this.viewDesignerFacade.removeViewComponents([n.guid]);o.forEach(e=>this.viewDesignerDispatcher.dispatch(e))}getInspector(e,t=[]){const i=!Boolean(e.lastUpdateTime)||this.rxOverlayService.isCustomizationEnabled("allowOverlay",e),n=this.rxViewComponentRegistryService.getBundlePageComponents(this.rxBundleCacheService.bundleId).map(e=>({id:e.type,name:e.name}));e.pageComponent&&!this.rxViewComponentRegistryService.get(e.pageComponent)&&n.unshift({name:p.RX_VIEW_DEFINITION.unknownPageComponent.name,id:e.pageComponent});const o={name:"pageComponent",component:c.SelectFormControlComponent,options:{label:"Page component",options:n,beforeValueChange:(e,t)=>this.viewDesignerFacade.viewModel$.pipe((0,f.take)(1),(0,f.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,f.map)(([i,n])=>!(null==e?void 0:e.length)&&t.length&&(i.inputParams.length||i.outputParams.length||!(0,m.isEmpty)(n)))).toPromise().then(e=>!e||this.rxModalService.confirm({title:"Warning",modalStyle:d.RX_MODAL.modalStyles.warning,message:"The view canvas, input and output parameters will be cleared. Do you want to continue?"})),emptyOption:!0}},r={name:"targetExtensionContainerGuid",component:c.SelectFormControlComponent,options:{label:"Extension container",tooltip:new l.Tooltip("Select an extension container in the view to extend where record editor fields from this view will be injected.\n            The records defined for the view to extend and for this view must be associated one-to-one."),options:t||[],required:!0,beforeValueChange:(e,t)=>this.isTargetRecordDefinitionChanged(e,t).pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,f.map)(([e,t])=>!(0,m.isEmpty)(t)&&e),(0,f.take)(1)).toPromise().then(e=>!e||this.rxModalService.confirm({title:"Warning",modalStyle:d.RX_MODAL.modalStyles.warning,message:"The view canvas will be cleared. Do you want to continue?"}))}},a=[{label:"General",controls:[{name:"displayName",component:c.TextFormControlComponent,isDisabled:Boolean(e.lastUpdateTime),options:{required:!0,label:"Name"}},{name:"description",component:c.TextareaFormControlComponent,isDisabled:!i,options:{label:"Description",rows:3}},{name:"layoutName",component:c.TextFormControlComponent,isDisabled:!0,options:{label:"Layout template"}},{name:"targetViewDefinitionName",component:c.RxDefinitionPickerComponent,isDisabled:!i,options:{label:"View to extend",tooltip:new l.Tooltip("Select a view to extend in order to inject this view into it.\n                The view to extend may be read-only, but must contain at least one Record editor with an Extension container."),definitionType:c.RxDefinitionPickerType.View,beforeValueChange:(e,t)=>this.viewDesignerFacade.viewComponentModels$.pipe((0,f.first)(),(0,f.withLatestFrom)(this.viewDesignerFacade.viewModel$)).toPromise().then(([i,n])=>{const o=Boolean(!(null==e?void 0:e.length)&&t.length&&(n.inputParams.length||n.outputParams.length));let r;return!(0,m.isEmpty)(i)&&o?r="The view canvas, input and output parameters will be cleared. Do you want to continue?":(0,m.isEmpty)(i)?o&&(r="The input and output parameters will be cleared. Do you want to continue?"):r="The view canvas will be cleared. Do you want to continue?",!r||this.rxModalService.confirm({title:"Warning",modalStyle:d.RX_MODAL.modalStyles.warning,message:r})})}},{name:"styles",component:c.TagsFormControlComponent,isDisabled:!i,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new l.Tooltip("Enter CSS class names to apply to this view."),errorCheck:Ft}},{name:"permissions",component:c.RxPermissionEditorComponent,isDisabled:!i,options:{label:"Permissions",type:"view"}},{component:Lt},{component:Vt}]},{label:"Input parameters",controls:[{name:"inputParams",component:c.ListFormControlComponent,isDisabled:!i,options:{addItemText:"Add",emptyListText:"No input parameters added.",items:[{label:"Name",propertyName:"name"}]}}]},{label:"Output parameters",controls:[{name:"outputParams",component:c.ListFormControlComponent,isDisabled:!i,options:{addItemText:"Add",emptyListText:"No output parameters added.",items:[{label:"Name",propertyName:"name"},{label:"Source",propertyName:"source",dataDictionary$:this.expressionConfigurator.getDataDictionary(),operators:this.expressionConfigurator.getOperators()}]}}]}];if(n.length&&a[0].controls.splice(2,0,o),e.pageComponent&&(a.splice(1,2),a[0].controls.splice((0,m.findIndex)(a[0].controls,{name:"targetViewDefinitionName"}),1)),e.targetViewDefinitionName){const e=(0,m.findIndex)(a[0].controls,{name:"targetViewDefinitionName"});a[0].controls.splice(e+1,0,r),a[0].controls.splice((0,m.findIndex)(a[0].controls,{name:"pageComponent"}),1),a.splice(1,2),this.viewDesignerFacade.updateViewProperties({inputParams:[],outputParams:[]})}return{inspectorSectionConfigs:a}}validateDisplayName(){return this.viewDesignerFacade.getViewPropertyValue("displayName").pipe((0,f.switchMap)(e=>(0,h.combineLatest)([(0,h.of)(e?s.RX_RECORD_DEFINITION.validDefinitionNameRegex.test(e)?null:{type:"error",propertyName:"displayName",description:"View name can only contain letters, numbers, spaces, dashes, and underscores."}:{type:"error",propertyName:"displayName",description:"View name cannot be blank."}),this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime").pipe((0,f.switchMap)(t=>e&&!t?this.allViewDefinitionNamesByBundleId$.pipe((0,f.map)(i=>!t&&(null==i?void 0:i.some(t=>this.rxStringService.caseInsensitiveIsEqual(e,t)))?{type:"error",propertyName:"displayName",description:"View definition with this name already exists."}:null),(0,f.take)(1)):(0,h.of)(null)),(0,f.take)(1))]))).pipe((0,f.map)(m.compact))}validateInputParams(){return this.viewDesignerFacade.getViewPropertyValue("inputParams").pipe((0,f.map)(e=>{const t=(0,m.flow)(e=>(0,m.map)(e,e=>e.name),m.compact)(e),i=(0,m.uniq)(t),n=[];return e.length&&t.length!==e.length&&n.push({type:"error",propertyName:"inputParams",description:"Input parameter name cannot be blank."}),t.length!==i.length&&n.push({type:"error",propertyName:"inputParams",description:"Input parameter names must be unique."}),n}))}validateOutputParamExpressions(){return this.viewDesignerFacade.getViewPropertyValue("outputParams").pipe((0,f.map)(e=>(0,m.map)(e,e=>e.source).filter(Boolean)),(0,f.distinctUntilChanged)(m.isEqual),(0,f.switchMap)(e=>e.length?(0,h.combineLatest)(e.map(e=>this.rxViewExpressionValidatorService.validate(e,"source","Output parameter source"))).pipe((0,f.map)(m.flatten)):(0,h.of)([])))}validateExtensionContainer(){return(0,h.combineLatest)([this.viewDesignerFacade.getViewPropertyValue("targetViewDefinitionName"),this.viewDesignerFacade.getViewPropertyValue("targetExtensionContainerGuid")]).pipe((0,f.map)(([e,t])=>e&&!t?{type:"error",propertyName:"targetExtensionContainerGuid",description:"Extension container cannot be blank."}:null))}getViewCommonDataDictionary(e){return{label:"View",expression:"${view.api}",icon:"d-icon-file_o",expanded:!0,children:[...(0,m.isEmpty)(e)?[]:[{label:"Input parameters",expanded:!0,children:e.filter(e=>e.name).map(e=>({label:e.name,expression:`\${view.inputParams.${e.name}}`,icon:"d-icon-arrow_right_square_input"}))}],{label:"Properties",expanded:!0,children:[{label:"Is valid",expression:"${view.isValid}",icon:"d-icon-arrow_right_square_input"}]}]}}isTargetRecordDefinitionChanged(e,t){return this.targetViewDefinition$.pipe((0,f.map)(i=>this.getTargetRecordDefinitionName(i,e)!==this.getTargetRecordDefinitionName(i,t)))}getTargetRecordDefinitionName(e,t){const i=this.rxViewDefinitionParserService.findParentComponentDefinition(e,{guid:t},e=>e.type===p.RxViewComponentType.RecordEditor);return null==i?void 0:i.propertiesByName.recordDefinitionName}}$t.\u0275fac=function(e){return new(e||$t)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](Rt),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxOverlayService),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](d.RxModalService),n["\u0275\u0275inject"](p.RxViewDefinitionCacheService),n["\u0275\u0275inject"](p.RxViewDefinitionParserService),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](Ne),n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](kt))},$t.\u0275prov=n["\u0275\u0275defineInjectable"]({token:$t,factory:$t.\u0275fac});const Gt=new n.InjectionToken("CanvasItemApi");class zt{constructor(){this.core=null}registerCoreApi(e){this.core=e}}zt.\u0275fac=function(e){return new(e||zt)},zt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:zt,factory:zt.\u0275fac});class Ut{constructor(e,t,i,n){this.data=e,this.targetGuid=t,this.outletName=i,this.insertIndex=n}}class qt{constructor(){this.componentSelectSubject=new h.ReplaySubject,this.componentRemoveSubject=new h.ReplaySubject,this.componentDropSubject=new h.ReplaySubject,this.componentDrop$=this.componentDropSubject.asObservable(),this.componentSelect$=this.componentSelectSubject.asObservable(),this.componentRemove$=this.componentRemoveSubject.asObservable()}selectComponent(e){this.componentSelectSubject.next(e)}removeComponent(e){this.componentRemoveSubject.next(e)}dropComponent(e,t,i,n){this.componentDropSubject.next(new Ut(e,t,i,n))}}qt.\u0275fac=function(e){return new(e||qt)},qt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:qt,factory:qt.\u0275fac});class Xt{constructor(e,t,i,n){this.injector=e,this.renderer=t,this.canvasItemApi=i,this.viewDesignerCanvasService=n,this.interactive=!0,this.childContainers=new Map}ngOnInit(){this.initializeItemApi()}ngOnChanges(e){const t=e.layout;if(t){const e=(0,m.get)(t,"previousValue.guid"),i=(0,m.get)(t,"currentValue.guid"),n=(0,m.get)(t,"previousValue.outlets"),o=(0,m.get)(t,"currentValue.outlets");e!==i?(this.componentReference&&this.cleanUp(),this.renderViewComponent()):(0,m.isEqual)(n,o)||o.forEach(e=>{const t=this.childContainers.get(e.name);t&&(t.instance.outlet=e,t.instance.layout=this.layout)})}}ngOnDestroy(){this.cleanUp()}cleanUp(){this.componentReference.destroy(),this.childContainers.clear()}registerOutlet(e,t,i){const n=this.layout.outlets.find(t=>t.name===e),o=this.renderContainerComponent(t,n,i);return this.childContainers.set(e,o),o}onSelectComponent(e){this.interactive&&(e.stopPropagation(),this.viewDesignerCanvasService.selectComponent(this.layout.guid))}dropComponent(e,t,i=p.RX_VIEW_DEFINITION.defaultOutletName){this.viewDesignerCanvasService.dropComponent(e,this.layout.guid,i,t)}initializeItemApi(){this.canvasItemApi.registerCoreApi({dropComponent:this.dropComponent.bind(this),registerOutlet:this.registerOutlet.bind(this)})}renderViewComponent(){this.componentReference=this.container.createComponent(this.layout.factory,null,this.injector);const e=this.componentReference.instance,t=this.componentReference.location.nativeElement;e.guid=this.layout.guid,e.model=this.layout.model,e.isReadOnly=this.isReadOnly,this.renderer.setAttribute(t,"rx-view-component-id",this.layout.guid)}renderContainerComponent(e,t,i){const n=e.createComponent(i);return n.instance.outlet=t,n.instance.layout=this.layout,n.instance.isReadOnly=this.isReadOnly,n}}Xt.\u0275fac=function(e){return new(e||Xt)(n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](qt))},Xt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Xt,selectors:[["rx-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](_,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{layout:"layout",interactive:"interactive",isReadOnly:"isReadOnly"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:Gt,useClass:zt}]),n["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:3,consts:[[3,"hidden","click"],["container",""]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275listener"]("click",function(e){return t.onSelectComponent(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementContainer"](2,null,1),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("hidden",n["\u0275\u0275pipeBind1"](1,1,null==t.layout||null==t.layout.model?null:t.layout.model.hiddenOnCanvas$))},pipes:[b.AsyncPipe],encapsulation:2});class Ht{constructor(e){this.viewDesignerCanvasService=e,this.componentSelect=new n.EventEmitter,this.componentDrop=new n.EventEmitter,this.componentRemove=new n.EventEmitter,this.beforeComponentDropInRoot=new n.EventEmitter}ngOnInit(){this.viewDesignerCanvasService.componentSelect$.subscribe(e=>{this.componentSelect.emit(e)}),this.viewDesignerCanvasService.componentRemove$.subscribe(e=>{this.componentRemove.emit(e)}),this.viewDesignerCanvasService.componentDrop$.subscribe(e=>{this.componentDrop.emit(e)})}}Ht.\u0275fac=function(e){return new(e||Ht)(n["\u0275\u0275directiveInject"](qt))},Ht.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ht,selectors:[["rx-view-designer-canvas"]],inputs:{layout:"layout",isReadOnly:"isReadOnly"},outputs:{componentSelect:"componentSelect",componentDrop:"componentDrop",componentRemove:"componentRemove",beforeComponentDropInRoot:"beforeComponentDropInRoot"},features:[n["\u0275\u0275ProvidersFeature"]([qt])],decls:1,vars:1,consts:[["class","root-item",3,"layout","isReadOnly",4,"ngIf"],[1,"root-item",3,"layout","isReadOnly"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,D,1,2,"rx-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngIf",t.layout)},directives:[b.NgIf,Xt],encapsulation:2,changeDetection:0});class Wt{constructor(){this.beforeViewComponentDropSubject=new h.ReplaySubject,this.beforeViewComponentDrop$=this.beforeViewComponentDropSubject.asObservable()}setBeforeViewComponentDropState(e){this.beforeViewComponentDropSubject.next(e)}canBeDropped(e){let t=!0;return(0,m.isFunction)(e.draggedViewComponentDescriptor.canBeInsertedInto)&&(t=e.draggedViewComponentDescriptor.canBeInsertedInto(e.dropTargetViewComponentWithParents.map(e=>e.type))),t&&(t=(!e.draggedViewComponentGuid||!this._isParentRecordEditorChanging(this.containerComponentInstance.layout.viewComponentWithParents,e.draggedViewComponentParents))&&this.componentDropPredicate(e)),t}componentDropPredicate(e,t=!1){return(t||this.dropPredicate(e))&&(!this.parentOutletComponent||this.parentOutletComponent.componentDropPredicate(e,this.skipParentPredicate))}_isParentRecordEditorChanging(e,t){const i=(0,m.find)(e,{type:p.RxViewComponentType.RecordEditor}),n=(0,m.find)(t,{type:p.RxViewComponentType.RecordEditor}),o=Boolean(i)&&Boolean(n)&&i.guid!==n.guid,r=!i&&Boolean(n),a=!n&&Boolean(i);return o||r||a}}Wt.\u0275fac=function(e){return new(e||Wt)},Wt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Wt,factory:Wt.\u0275fac});class Yt{constructor(e,t){this.viewDesignerCanvasService=e,this.canvasOutletHelperService=t,this.dropListDropped=new n.EventEmitter,this.dropListEnterPredicateBind=(0,m.throttle)(this.dropListEnterPredicate.bind(this),200)}ngOnInit(){this.dropListOrientation=this.canvasOutletHelperService.dropListOrientation}getViewComponentDragData(e){return{draggedViewComponentGuid:e.guid,draggedViewComponentDescriptor:e.descriptor,draggedViewComponentParents:this.layout.viewComponentWithParents}}onDragEntered(e){this.enforceDragToSelf(e.container)}onDragStarted(e){this.enforceDragToSelf(e.source.dropContainer)}remove(e,t){e.stopPropagation(),this.viewDesignerCanvasService.removeComponent(t.guid)}onSelectComponent(e,t){e.stopPropagation(),this.viewDesignerCanvasService.selectComponent(t.guid)}trackByFn(e,t){return t.guid}dropListEnterPredicate(e){return this.canvasOutletHelperService.canBeDropped(Object.assign(Object.assign({},e.data),{dropTargetViewComponentWithParents:this.layout.viewComponentWithParents||[]}))}enforceDragToSelf(e){let t=e.connectedTo;t=t.reduce((e,t)=>{if((0,m.isString)(t)){const i=C.CdkDropList._dropLists.find(e=>e.id===t);i&&e.push(i)}return e},[]);const i=e._dropListRef;h.asapScheduler.schedule(()=>{i.connectedTo(t.map(e=>e._dropListRef))})}}Yt.\u0275fac=function(e){return new(e||Yt)(n["\u0275\u0275directiveInject"](qt),n["\u0275\u0275directiveInject"](Wt))},Yt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Yt,selectors:[["rx-canvas-item-column"]],inputs:{isReadOnly:"isReadOnly",colIndex:"colIndex",column:"column",layout:"layout"},outputs:{dropListDropped:"dropListDropped"},decls:2,vars:9,consts:[["cdkDropList","",3,"cdkDropListOrientation","cdkDropListConnectedTo","cdkDropListEnterPredicate","cdkDropListData","id","cdkDropListDropped"],["cdkDrag","",3,"class","cdkDragData","cdkDragDisabled","cdkDragEntered","cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",3,"cdkDragData","cdkDragDisabled","cdkDragEntered","cdkDragStarted"],[1,"canvas-item",3,"click"],["cdkDragHandle","",1,"canvas-item-header",3,"hidden"],[1,"icon","d-icon-dots","mr-1"],[1,"label"],["class","remove-button btn btn-sm btn-link d-icon-cross_adapt p-0 px-1","type","button","aria-label","Close",3,"click",4,"ngIf"],[3,"layout","isReadOnly"],["type","button","aria-label","Close",1,"remove-button","btn","btn-sm","btn-link","d-icon-cross_adapt","p-0","px-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.dropListDropped.next(e)}),n["\u0275\u0275template"](1,A,10,16,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("cdkDropListOrientation",t.dropListOrientation)("cdkDropListConnectedTo",t.column.dndListIds)("cdkDropListEnterPredicate",t.dropListEnterPredicateBind)("cdkDropListData",n["\u0275\u0275pureFunction1"](7,T,t.colIndex))("id",t.column.listId),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.column.children)("ngForTrackBy",t.trackByFn))},directives:[C.CdkDropList,b.NgForOf,C.CdkDrag,C.CdkDragHandle,b.NgIf,Xt],pipes:[b.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}.cdk-drop-list[_ngcontent-%COMP%]{min-height:100px}.cdk-drop-list[_ngcontent-%COMP%] > .cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.5}.card-header[_ngcontent-%COMP%]{cursor:move}.canvas-item-wrapper.cdk-drag-preview[_ngcontent-%COMP%]{background:white;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.canvas-item[_ngcontent-%COMP%]{border:1px solid transparent;position:relative;padding:3px}.canvas-item.active[_ngcontent-%COMP%]{border-color:#20c997}.canvas-item-header[_ngcontent-%COMP%]{color:#fff;position:absolute;top:0;right:0;padding:1px 0 1px 5px;background:#20c997;cursor:move;z-index:1;display:flex}.canvas-item-header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{white-space:nowrap}.remove-button[_ngcontent-%COMP%]{color:#fff}']});class Qt{constructor(e,t){this.canvasItemApi=e,this.canvasOutletHelperService=t}trackByColFn(e,t){return t.listId}onDropListDropped(e){const t=Object.assign(Object.assign({},e.item.data),{initialPropertiesByName:{},columnIndex:e.container.data.columnIndex});this.canvasOutletHelperService.setBeforeViewComponentDropState(t),t.preventDrop||this.canvasItemApi.core.dropComponent(t,e.currentIndex,this.outlet.name)}}Qt.\u0275fac=function(e){return new(e||Qt)(n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](Wt))},Qt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Qt,selectors:[["rx-canvas-item-container"]],inputs:{outlet:"outlet",isReadOnly:"isReadOnly",layout:"layout"},decls:2,vars:2,consts:[[1,"row"],[3,"class","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],[3,"ngClass","isReadOnly","colIndex","column","layout","dropListDropped"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,M,2,13,"div",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.outlet.columns)("ngForTrackBy",t.trackByColFn))},directives:[b.NgForOf,b.NgClass,Yt],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.col-border[_ngcontent-%COMP%]{border-right:1px dashed #d6d7d8}']});class Kt{constructor(e,t,i,o){this.canvasItemApi=e,this.parentOutletComponent=t,this.canvasOutletHelperService=i,this.componentFactoryResolver=o,this.containerComponentInstance=null,this.destroyed$=new h.ReplaySubject(1),this.name=p.RX_VIEW_DEFINITION.defaultOutletName,this.skipParentPredicate=!1,this.dropListOrientation="vertical",this.beforeViewComponentDrop=new n.EventEmitter,this.dropPredicate=()=>!0}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}ngOnInit(){this.containerComponentInstance=this.canvasItemApi.core.registerOutlet(this.name,this.container,this.componentFactoryResolver.resolveComponentFactory(this.containerComponent||Qt)).instance,this.canvasOutletHelperService.dropListOrientation=this.dropListOrientation,this.canvasOutletHelperService.parentOutletComponent=this.parentOutletComponent,this.canvasOutletHelperService.dropPredicate=this.dropPredicate,this.canvasOutletHelperService.skipParentPredicate=this.skipParentPredicate,this.canvasOutletHelperService.containerComponentInstance=this.containerComponentInstance,this.canvasOutletHelperService.beforeViewComponentDrop$.pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.beforeViewComponentDrop.emit(e)})}canBeDropped(e){return this.canvasOutletHelperService.canBeDropped(e)}componentDropPredicate(e,t=!1){return this.canvasOutletHelperService.componentDropPredicate(e,t)}}Kt.\u0275fac=function(e){return new(e||Kt)(n["\u0275\u0275directiveInject"](Gt),n["\u0275\u0275directiveInject"](Kt,12),n["\u0275\u0275directiveInject"](Wt),n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver))},Kt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kt,selectors:[["rx-canvas-outlet"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](_,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{name:"name",skipParentPredicate:"skipParentPredicate",containerComponent:"containerComponent",dropListOrientation:"dropListOrientation",dropPredicate:"dropPredicate"},outputs:{beforeViewComponentDrop:"beforeViewComponentDrop"},features:[n["\u0275\u0275ProvidersFeature"]([Wt])],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class Jt{constructor(e,t){this.canvasItemComponent=e,this.viewDesignerCanvasComponent=t,this.defaultOutletName=p.RX_VIEW_DEFINITION.defaultOutletName}trackByFn(e,t){return t.name}}Jt.\u0275fac=function(e){return new(e||Jt)(n["\u0275\u0275directiveInject"](Xt),n["\u0275\u0275directiveInject"](Ht))},Jt.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jt,selectors:[["rx-designer"]],decls:1,vars:2,consts:[[3,"border","default-outlet","name","beforeViewComponentDrop",4,"ngFor","ngForOf","ngForTrackBy"],[3,"name","beforeViewComponentDrop"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,O,1,5,"rx-canvas-outlet",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.canvasItemComponent.layout.outlets)("ngForTrackBy",t.trackByFn)},directives:[b.NgForOf,Kt],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}rx-canvas-outlet[_ngcontent-%COMP%]{display:block}rx-canvas-outlet.default-outlet[_ngcontent-%COMP%]:not(:only-child)    >rx-canvas-item-container>.row>*>rx-canvas-item-column>.cdk-drop-list{min-height:300px}rx-canvas-outlet.default-outlet[_ngcontent-%COMP%]:only-child    >rx-canvas-item-container>.row>*>rx-canvas-item-column>.cdk-drop-list{min-height:calc(100vh - 155px)}rx-canvas-outlet.border[_ngcontent-%COMP%]{border:1px solid #d6d7d8}rx-canvas-outlet[_ngcontent-%COMP%] + rx-canvas-outlet[_ngcontent-%COMP%]{margin-top:10px}']});class Zt{constructor(e,t,i,n){this.viewDesignerFacade=e,this.rxViewComponentRegistryService=t,this.componentFactoryResolver=i,this.viewDesignerModels=n,this.designerComponentFactory=this.componentFactoryResolver.resolveComponentFactory(Jt),this.canvasDndListIds=[],this.extensionViewAllowedComponentTypes=new Set([p.RxViewComponentType.Container,p.RxViewComponentType.RichText,p.RxViewComponentType.RecordEditor,p.RxViewComponentType.Character,p.RxViewComponentType.Textarea,p.RxViewComponentType.Boolean,p.RxViewComponentType.Date,p.RxViewComponentType.DateTime,p.RxViewComponentType.Time,p.RxViewComponentType.Decimal,p.RxViewComponentType.Floating,p.RxViewComponentType.Integer,p.RxViewComponentType.LocalizedCharacter,p.RxViewComponentType.Selection,p.RxViewComponentType.SelectGroup,p.RxViewComponentType.RichTextarea,p.BwfViewComponentType.DynamicNamedList]),this.canvasLayout$=this.getRecursiveViewLayoutGuids().pipe((0,f.switchMap)(e=>e.length?this.viewDesignerFacade.areViewModelsReady$.pipe((0,f.filter)(Boolean),(0,f.switchMapTo)(this.viewDesignerFacade.viewDesignerModelState$.pipe((0,f.take)(1)))):this.viewDesignerFacade.viewDesignerModelState$.pipe((0,f.take)(1))),(0,f.map)(e=>{const t=e.viewDesignModel,i=e.viewComponentDesignModels;return this.canvasDndListIds.length=0,{guid:t.guid,factory:this.designerComponentFactory,outlets:t.layout.outlets.map(e=>({name:e.name,columns:e.columns.map((n,o)=>{const r=String(`${t.guid}-${e.name}-${o}`);return t.type!==p.ViewDefinitionType.Shell&&this.canvasDndListIds.push(r),Object.assign(Object.assign({},n),{children:n.children.map(e=>this.initializeCanvasItem(e,i,this.canvasDndListIds)),listId:r,dndListIds:this.canvasDndListIds})})})),model:null,descriptor:null,isSelected$:(0,h.of)(!1)}}),(0,f.tap)(()=>{this.canvasDndListIds.reverse()})),this.viewBreadcrumbItem$=this.viewDesignerFacade.getViewPropertyValue("displayName").pipe((0,f.concatMap)(e=>(0,h.of)(e?e===l.RX_APPLICATION.shellDefinitionName?"Application shell":e:"<New view>")),(0,f.withLatestFrom)(this.viewDesignerFacade.viewModelGuid$),(0,f.map)(([e,t])=>({label:e,data:{guid:t}}))),this.selectedComponentBreadcrumbItems$=this.viewDesignerFacade.selectedComponentGuid$.pipe((0,f.switchMap)(e=>e?(0,h.combineLatest)([this.viewDesignerFacade.breadcrumbs$,this.viewDesignerFacade.getParentComponentGuid(e)]).pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewComponentModels$),(0,f.map)(([[t],i])=>(0,m.isEmpty)(i)?[]:me(e,i).map(e=>{let n=t[e];if(!n){const t=i[e];n=this.rxViewComponentRegistryService.get(t.type).name}return{label:n,data:{guid:e}}}))):(0,h.of)([]))),this.breadcrumbItems$=(0,h.combineLatest)([this.viewBreadcrumbItem$,this.selectedComponentBreadcrumbItems$]).pipe((0,f.map)(([e,t])=>[e,...t])),this.validationIssues$=this.viewDesignerFacade.validationIssues$.pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewDesignerModelState$),(0,f.map)(([e,t])=>(0,m.flow)(e=>(0,m.mergeWith)(Object.assign({},e.issues),e.expressionIssues,(e=[],t=[])=>e.concat(t)),e=>(0,m.reduce)(e,(e,i,n)=>{var o;let r;if((null===(o=t.viewDesignModel)||void 0===o?void 0:o.guid)===n)r=t.viewDesignModel.displayName||"View designer";else if(t.viewComponentDesignModels[n]){const e=t.viewComponentDesignModels[n].type,i=this.rxViewComponentRegistryService.get(e);r=i&&i.name}return r&&e.push({title:r,issues:i.map(e=>({type:e.type,description:e.description,disableCorrection:e.disableCorrection,data:{guid:n,propertyName:e.propertyName,data:e.data}}))}),e},[]))(e)))}getLicensedComponents(){return this.rxViewComponentRegistryService.getLicensedComponents().pipe((0,f.first)(),(0,f.map)(e=>e.filter(e=>!this.rxViewComponentRegistryService.isDataComponentDescriptor(e)&&!e.hidden&&!e.isPageComponent)))}getRecursiveViewLayoutGuids(){return this.viewDesignerFacade.getViewPropertyValue("layout").pipe((0,f.switchMap)(e=>this.getRecursiveComponentLayoutGuids(e)))}getRecursiveComponentLayoutGuids(e){const t=p.RxViewLayout.getViewLayoutChildGuids(e);return t.length?(0,h.combineLatest)(t.map(e=>this.viewDesignerFacade.getComponentLayout(e).pipe((0,f.switchMap)(e=>e?this.getRecursiveComponentLayoutGuids(e).pipe((0,f.map)(e=>[...e,...t])):(0,h.of)(t))))):(0,h.of)([])}initializeCanvasItem(e,t,i){const n=t[e],o=this.rxViewComponentRegistryService.get(n.type),r={guid:n.guid,descriptor:o,factory:o.designComponentFactory,model:this.viewDesignerModels.get(n.guid),outlets:[],isSelected$:this.viewDesignerFacade.selectedComponentGuid$.pipe((0,f.map)(e=>e===n.guid)),label:o.name};return n.layout&&(r.viewComponentWithParents=me(n.guid,t).map(e=>({guid:e,type:t[e].type})),n.layout.outlets.forEach(e=>{const o={name:e.name,columns:e.columns.map((o,r)=>{const a=`${n.guid}-${e.name}-${r}`;return i.push(a),{children:o.children.map(e=>this.initializeCanvasItem(e,t,i)),span:o.span,listId:a,dndListIds:i}})};r.outlets.push(o)})),r}}Zt.\u0275fac=function(e){return new(e||Zt)(n["\u0275\u0275inject"](Rt),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](At))},Zt.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Zt,factory:Zt.\u0275fac,providedIn:"root"});const ei={stencilGroups:{basicComponents:{label:"Basic components"},chatbotComponents:{label:"Chatbot components"},recordEditorInputs:{label:"Record editor inputs"}},inspectorTabs:{viewProperties:{tabId:0},componentProperties:{tabId:1},validationIssues:{tabId:2}}};class ti{constructor(e){this.stringService=e,this.allowedDropListIds=[],this.filterFormControl=new y.FormControl,this.componentsSubject$=new h.ReplaySubject(1)}set components(e){this.componentsSubject$.next(e)}ngOnInit(){this.viewComponentGroups$=(0,h.combineLatest)([this.filterFormControl.valueChanges.pipe((0,f.debounceTime)(200),(0,f.startWith)(null)),this.componentsSubject$]).pipe((0,f.map)(([e,t])=>(0,m.flow)(e=>(0,m.groupBy)(e,e=>e.group),e=>(0,m.map)(e,(e,t)=>({name:t,components:(0,m.sortBy)(e,e=>isFinite(e.index)?e.index:e.name)})),e=>(0,m.sortBy)(e,e=>e.name===ei.stencilGroups.basicComponents.label?"1":e.name===ei.stencilGroups.recordEditorInputs.label?"2":"3"+(0,m.lowerCase)(e.name)),t=>e?t.map(t=>Object.assign(Object.assign({},t),{components:t.components.filter(t=>this.stringService.caseInsensitiveSearch(t.name,e))})).filter(e=>e.components.length):t)(t)))}getViewComponentDragData(e){return{draggedViewComponentDescriptor:e}}trackByNameFn(e,t){return t.name}ngOnDestroy(){this.componentsSubject$.complete()}}ti.\u0275fac=function(e){return new(e||ti)(n["\u0275\u0275directiveInject"](g.RxStringService))},ti.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ti,selectors:[["rx-view-designer-palette"]],inputs:{components:"components",allowedDropListIds:"allowedDropListIds"},decls:5,vars:9,consts:[[1,"search-field-container"],["rx-id","stencil-search-field","placeholder","Search",3,"formControl"],[3,"config"],[3,"title","isOpen",4,"ngFor","ngForOf","ngForTrackBy"],[3,"title","isOpen"],["cdkDropList","","cdkDropListSortingDisabled","",1,"group-items-container",3,"cdkDropListConnectedTo"],["class","group-item","cdkDrag","",3,"cdkDragData",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"group-item",3,"cdkDragData"],[1,"group-item-inner"],[1,"item-name",3,"title"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275element"](1,"adapt-rx-search",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"adapt-accordion",2),n["\u0275\u0275template"](3,j,3,6,"adapt-accordion-tab",3),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("formControl",t.filterFormControl),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](7,N,n["\u0275\u0275pureFunction0"](6,P))),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",n["\u0275\u0275pipeBind1"](4,4,t.viewComponentGroups$))("ngForTrackBy",t.trackByNameFn))},directives:[S.AdaptRxSearchComponent,y.NgControlStatus,y.FormControlDirective,S.AdaptAccordionComponent,b.NgForOf,S.AdaptAccordionTabComponent,C.CdkDropList,C.CdkDrag],pipes:[b.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:block}.group-items-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.group-items-container[_ngcontent-%COMP%]   .group-item.cdk-drag-placeholder[_ngcontent-%COMP%]{width:33.3%}.group-item[_ngcontent-%COMP%]{border-right:1px solid #d6d7d8;border-bottom:1px solid #d6d7d8;text-align:center;width:33.3%;cursor:move;height:90px;padding:3px 0}.group-item.cdk-drag-preview[_ngcontent-%COMP%]{background:white;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.group-item.cdk-drag-placeholder[_ngcontent-%COMP%]{border:0;width:100px;height:40px;padding:0;position:relative;z-index:3}.group-item.cdk-drag-placeholder[_ngcontent-%COMP%]   .group-item-inner[_ngcontent-%COMP%]{border:1px solid #d6d7d8;background:#fff}.group-item[_ngcontent-%COMP%]:nth-child(3n){border-right:none}.group-item-inner[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.item-image[_ngcontent-%COMP%]{color:#626668;font-size:40px;height:54px;flex-grow:1}.item-name[_ngcontent-%COMP%]{font-size:10px;overflow:hidden;height:34px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:1!important}adapt-accordion-tab[_ngcontent-%COMP%]     .card-block{padding:0}.form-group[_ngcontent-%COMP%]{margin:10px 20px}.search-field-container[_ngcontent-%COMP%]{padding:.9375rem}'],changeDetection:0});const ii=new n.InjectionToken("RX_VIEW_MODEL");class ni{constructor(e,t,i,o,r,a,s,l,c,d,u,m,g,v,x,y,b,C,S,w,I,_,D){this.viewDesignerFacade=e,this.rxNotificationService=t,this.rxDefinitionPickerCacheService=i,this.rxNamedListDefinitionCacheService=o,this.rxModalService=r,this.translateService=a,this.rxUtilityModalsService=s,this.rxViewDesignerHelperService=l,this.rxExpressionEditorService=c,this.rxViewDefinitionService=d,this.rxComponentCanDeactivateGuard=u,this.rxViewDefinitionGeneratorService=m,this.rxViewDesignerModels=g,this.rxLogService=v,this.injector=x,this.renderer=y,this.rxRecordDefinitionCacheService=b,this.rxAssociationDefinitionCacheService=C,this.rxProcessDefinitionCacheService=S,this.rxViewDefinitionCacheService=w,this.rxGainsightConfiguratorService=I,this.rxDefinitionNameService=_,this.rxFeatureService=D,this.viewDefinitionSaved=new n.EventEmitter,this.viewDefinitionErrorLoading=new n.EventEmitter,this.closeDesigner=new n.EventEmitter,this.destroyed$=new h.ReplaySubject(1),this.inspectorFocusEditorSubject=new h.Subject,this.isViewDefinitionChanged$=new h.BehaviorSubject(!1),this.validationIssues$=this.rxViewDesignerHelperService.validationIssues$.pipe((0,f.shareReplay)(1),(0,f.takeUntil)(this.destroyed$)),this.breadcrumbItems$=this.rxViewDesignerHelperService.breadcrumbItems$,this.canvasLayout$=this.rxViewDesignerHelperService.canvasLayout$,this.canvasDndListIds=this.rxViewDesignerHelperService.canvasDndListIds,this.extensionViewRootComponentType=p.RxViewComponentType.RecordEditor,this.isDesignMode=!0,this.isStencilExpanded=!0,this.isInspectorExpanded=!0,this.inspectorFocusEditor$=this.inspectorFocusEditorSubject.asObservable(),this.viewComponentInspectorEmptyText$=this.viewDesignerFacade.selectedComponentInspectorLayout$.pipe((0,f.switchMap)(e=>e?(0,h.of)(null):this.viewDesignerFacade.selectedComponentGuid$.pipe((0,f.withLatestFrom)(this.viewDesignerFacade.viewModel$),(0,f.map)(([e,t])=>e&&e!==t.guid?"Selected component has no properties.":"Select a component to view its properties here."))),(0,f.shareReplay)({refCount:!0,bufferSize:1})),this.selectedComponentModel$=this.viewDesignerFacade.selectedComponentGuid$.pipe((0,f.map)(e=>this.rxViewDesignerModels.get(e))),this.isReadOnly$=this.viewDesignerFacade.isViewReadOnly$,this.paletteComponents$=(0,h.combineLatest)([this.viewDesignerFacade.isExtensionView$.pipe((0,f.tap)(e=>this.isExtensionView=e)),this.viewDesignerFacade.isExtensionContainerSet$.pipe((0,f.tap)(e=>this.isExtensionContainerSet=e)),this.rxViewDesignerHelperService.getLicensedComponents().pipe((0,f.map)(e=>this.configuration.paletteComponentsPredicate?e.filter(e=>this.configuration.paletteComponentsPredicate(e)):e))]).pipe((0,f.switchMap)(([e,t,i])=>e?this.viewDesignerFacade.firstViewComponentModelType$.pipe((0,f.map)(e=>e===this.extensionViewRootComponentType?i.filter(({type:e})=>e!==this.extensionViewRootComponentType&&this.rxViewDesignerHelperService.extensionViewAllowedComponentTypes.has(e)):i.filter(({type:e})=>e===this.extensionViewRootComponentType))):(0,h.of)(i)));const R=this.injector.get(ii,null,n.InjectFlags.Optional);this.rxViewModel=R||this.injector.get($t),this.rxDefinitionPickerCacheService.registerConsumer(),this.rxNamedListDefinitionCacheService.registerConsumer(this.destroyed$),this.rxAssociationDefinitionCacheService.registerConsumer(this.destroyed$),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$),this.rxViewDefinitionCacheService.registerConsumer(this.destroyed$)}ngOnInit(){this.isPreviewAvailable$=this.viewDesignerFacade.getViewPropertyValue("lastUpdateTime").pipe((0,f.map)(e=>!this.configuration.disablePreview&&(Boolean(e)||!(0,m.isUndefined)(this.configuration.viewDefinitionName))),(0,f.takeUntil)(this.destroyed$)),this.viewDefinitionName$=this.viewDesignerFacade.getViewPropertyValue("name"),this.viewDesignerFacade.getViewPropertyValue("pageComponent").pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.isPageView=Boolean(e)}),this.viewDesignerFacade.viewDefinitionSaveSuccess$.pipe((0,f.takeUntil)(this.destroyed$)).subscribe(({viewDefinitionName:e})=>{this.rxNotificationService.addSuccessMessage("View definition saved successfully."),this.viewDefinitionSaved.emit(e),this.initViewDesigner()}),this.viewDesignerFacade.viewDefinitionLoadError$.pipe((0,f.takeUntil)(this.destroyed$)).subscribe(()=>this.viewDefinitionErrorLoading.emit()),this.hasValidationErrors$=this.validationIssues$.pipe((0,f.map)(e=>Boolean((0,m.filter)(e,{issues:[{type:d.ValidationIssueType.Error}]}).length)),(0,f.distinctUntilChanged)()),this.hasValidationWarning$=this.validationIssues$.pipe((0,f.map)(e=>Boolean((0,m.filter)(e,{issues:[{type:d.ValidationIssueType.Warning}]}).length)),(0,f.distinctUntilChanged)()),this.isSaveButtonDisabled$=(0,h.combineLatest)([this.hasValidationErrors$,this.viewDesignerFacade.areViewModelsReady$,this.isViewDefinitionChanged$,this.isReadOnly$]).pipe((0,f.map)(([e,t,i,n])=>e||!t||!i||n),(0,f.startWith)(!0)),this.isReadOnly$.pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>{e&&this.rxNotificationService.addWarningMessage(this.translateService.instant("com.bmc.arsys.rx.client.designer.read-only-definition-warning.message"))}),this.rxFeatureService.isFeatureEnabled("DRD21-11744")&&this.viewDefinitionName$.pipe((0,f.take)(1)).subscribe(e=>{this.rxGainsightConfiguratorService.updateGlobalContext({subProductLevel1:{name:"Design"},subProductLevel2:{name:this.rxDefinitionNameService.getDisplayName(e)==l.RX_APPLICATION.shellDefinitionName?"Shell designer":"View designer"}})})}ngOnChanges(e){e.configuration.currentValue&&this.initViewDesigner(!0)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.inspectorFocusEditorSubject.complete(),this.isViewDefinitionChanged$.complete(),this.rxDefinitionPickerCacheService.unRegisterConsumer(),this.viewDesignerFacade.destroyViewDesigner(),this.rxGainsightConfiguratorService.removeGlobalContext(["subProductLevel2","subProductLevel3"])}initViewDesigner(e=!1){var t;this.isViewDefinitionChanged$.getValue()&&this.isViewDefinitionChanged$.next(!1),null===(t=this.viewDefinitionChangeSubscription)||void 0===t||t.unsubscribe(),e&&this.viewDesignerFacade.initViewDesigner((0,m.pick)(this.configuration,["bundleId","viewDefinitionName","layoutTemplate"])),this.initViewDefinitionChangeSubscription()}initViewDefinitionChangeSubscription(){this.viewDefinitionChangeSubscription=this.viewDesignerFacade.areViewModelsReady$.pipe((0,f.filter)(Boolean),(0,f.take)(1),(0,f.switchMap)(()=>(0,h.combineLatest)([this.viewDesignerFacade.viewModel$,this.viewDesignerFacade.viewComponentModels$]).pipe((0,f.map)(([e,t])=>this.rxViewDefinitionGeneratorService.generate(e,t)),(0,f.distinctUntilChanged)(m.isEqual),(0,f.skip)(1),(0,f.take)(1),(0,f.takeUntil)(this.destroyed$))),(0,f.takeUntil)(this.destroyed$)).subscribe(()=>{this.isViewDefinitionChanged$.next(!0)})}onSelectComponent(e){this.viewDesignerFacade.selectComponent(e)}onDropComponent(e){this.viewDesignerFacade.insertComponent(e)}onRemoveComponent(e){this.rxUtilityModalsService.confirm("Are you sure you want to delete this view component?").then(t=>{t&&(this.viewDesignerFacade.removeViewComponents([e],!0),this.isPageView&&this.viewDesignerFacade.updateViewProperties({pageComponent:null}))})}onInspectorTabChange(e){this.viewDesignerFacade.selectInspectorTab({tabId:e.index})}toggleDesignMode(){this.isDesignMode&&this.viewDesignerFacade.generateViewDefinition(),this.isDesignMode=!this.isDesignMode}onComponentPropertiesChange(e){this.viewDesignerFacade.updateSelectedComponentProperties(e)}onEditorEvent(e,t){e.type===c.RX_VALIDATION_FORM_CONTROL.events.correctValidationIssue&&this.correctValidationIssue(e.payload.componentGuid,e.payload.propertyName),e.type===c.RX_REVERT_CUSTOMIZATION.events.revertCustomization&&this.revertCustomization(),e.type===c.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&this.openExpressionEditor(e.payload,t)}getExpressionProperties(e){return(this.viewComponentPropertyInspectorElementRef===e?this.viewDesignerFacade.selectedComponentProperties$:this.viewDesignerFacade.viewModel$).pipe((0,f.map)(t=>Array.from(this.renderer.selectRootElement(e.nativeElement,!0).querySelectorAll("rx-expression-form-control")).map(e=>{const i=e.getAttribute("property-path");return{path:i,value:(0,m.get)(t,i),label:e.getAttribute("property-label")}})))}openExpressionEditor(e,t){const i=this.viewComponentPropertyInspectorElementRef===t,n=i?this.viewDesignerFacade.selectedComponentProperties$:this.viewDesignerFacade.viewModel$;(0,h.combineLatest)([this.viewDesignerFacade.selectedComponentGuid$,n]).pipe((0,f.take)(1),(0,f.switchMap)(([o,r])=>{const a=i?this.rxViewDesignerModels.get(o):this.rxViewModel,s=null==a?void 0:a.expressionConfigurator;return s?this.rxExpressionEditorService.openEditor({property:{path:e.propertyPath,value:(0,m.get)(r,e.propertyPath),label:e.propertyLabel},isReadOnly:e.isReadOnly,expressionConfigurator:s,legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}],expressionPropertyNavigator:{getProperties:this.getExpressionProperties.bind(this,t)}}).pipe((0,f.withLatestFrom)(n),(0,f.map)(([{path:e,value:t},i])=>{if(i.hasOwnProperty(e))return{[e]:t};{const n=(0,m.toPath)(e)[0];return(0,m.set)({[n]:(0,m.cloneDeep)(i[n])},e,t)}})):(this.rxLogService.debug("View designer: Expression editor cannot be opened without expression configurator."),h.EMPTY)}),(0,f.takeUntil)(this.destroyed$)).subscribe(e=>i?this.viewDesignerFacade.updateSelectedComponentProperties(e):this.viewDesignerFacade.updateViewProperties(e))}saveViewDefinition(){this.viewDesignerFacade.viewModel$.pipe((0,f.take)(1),(0,f.switchMap)(e=>{const t=e.type===p.ViewDefinitionType.Shell?"If you save your changes now, you will not be able to run this application using the old UI. Do you want to continue?":"If you save this view definition, you will not be able to open it in the old view designer. Do you want to continue?";return e.isAngularJsView?this.rxModalService.confirm({title:"Warning",modalStyle:d.RX_MODAL.modalStyles.warning,message:t}):(0,h.of)(!0)}),(0,f.filter)(Boolean),(0,f.takeUntil)(this.destroyed$)).subscribe(()=>{this.viewDesignerFacade.saveViewDefinition()})}onCorrectIssue(e){this.correctValidationIssue(e.data.guid,e.data.propertyName,e.data.data)}correctValidationIssue(e,t,i){this.viewDesignerFacade.selectComponent(e),setTimeout(()=>this.inspectorFocusEditorSubject.next({editorName:t,data:i}),10)}revertCustomization(){this.viewDefinitionName$.pipe((0,f.switchMap)(e=>this.rxViewDefinitionService.revertCustomization(e)),(0,f.takeUntil)(this.destroyed$)).subscribe(()=>{this.rxComponentCanDeactivateGuard.disable(),window.location.reload()})}onViewPropertiesChange(e){this.viewDesignerFacade.updateViewProperties(e)}showPreview(){this.viewDesignerFacade.runPreview()}canDeactivate(){let e=!0;return(0,h.combineLatest)([this.isViewDefinitionChanged$,this.isReadOnly$]).pipe((0,f.map)(([e,t])=>!e||t),(0,f.take)(1)).subscribe(t=>{e=t}),e}onBeforeComponentDropInRoot(e){this.isExtensionView&&(this.isExtensionContainerSet?e.draggedViewComponentDescriptor.type!==p.RxViewComponentType.RecordEditor&&(this.rxNotificationService.addWarningMessage("This view component can only be added inside a Record editor."),e.preventDrop=!0):(this.rxNotificationService.addWarningMessage("Select Extension container before adding view components."),e.preventDrop=!0))}}ni.\u0275fac=function(e){return new(e||ni)(n["\u0275\u0275directiveInject"](Rt),n["\u0275\u0275directiveInject"](l.RxNotificationService),n["\u0275\u0275directiveInject"](c.RxDefinitionPickerCacheService),n["\u0275\u0275directiveInject"](r.RxNamedListDefinitionCacheService),n["\u0275\u0275directiveInject"](d.RxModalService),n["\u0275\u0275directiveInject"](u.TranslateService),n["\u0275\u0275directiveInject"](d.RxUtilityModalsService),n["\u0275\u0275directiveInject"](Zt),n["\u0275\u0275directiveInject"](c.RxExpressionEditorService),n["\u0275\u0275directiveInject"](p.RxViewDefinitionService),n["\u0275\u0275directiveInject"](l.RxComponentCanDeactivateGuard),n["\u0275\u0275directiveInject"](Tt),n["\u0275\u0275directiveInject"](At),n["\u0275\u0275directiveInject"](l.RxLogService),n["\u0275\u0275directiveInject"](n.Injector),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](s.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](o.RxAssociationDefinitionCacheService),n["\u0275\u0275directiveInject"](a.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](p.RxViewDefinitionCacheService),n["\u0275\u0275directiveInject"](c.RxGainsightConfiguratorService),n["\u0275\u0275directiveInject"](l.RxDefinitionNameService),n["\u0275\u0275directiveInject"](l.RxFeatureService))},ni.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ni,selectors:[["rx-view-designer"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](V,5,n.ElementRef),n["\u0275\u0275viewQuery"](L,5,n.ElementRef)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.viewPropertyInspectorElementRef=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.viewComponentPropertyInspectorElementRef=e.first)}},inputs:{configuration:"configuration"},outputs:{viewDefinitionSaved:"viewDefinitionSaved",viewDefinitionErrorLoading:"viewDefinitionErrorLoading",closeDesigner:"closeDesigner"},features:[n["\u0275\u0275ProvidersFeature"]([$t]),n["\u0275\u0275NgOnChangesFeature"]],decls:45,vars:87,consts:[[3,"bundleName","breadcrumbItems","isDesignMode","isPreviewAvailable","isSaveButtonDisabled","breadcrumbSelected","toggleDesignMode","showPreview","save","closeDesigner"],[1,"rx-component-view-designer",3,"hidden"],["rx-id","palette",3,"title","isExpanded","toggle"],[3,"components","allowedDropListIds",4,"ngIf"],["class","p-3",3,"config",4,"ngIf"],[1,"rx-view-designer-container"],[1,"flex-grow-1",3,"layout","isReadOnly","componentSelect","componentRemove","componentDrop","beforeComponentDropInRoot"],["dockTo","right","rx-id","properties",3,"title","isExpanded","toggle"],["customCssTabContent","p-0","justify","justified",3,"tab-active","tab-active-changed"],["icon","d-icon-pencil"],[3,"focusEditor$","config","model","isReadOnly","modelChange","editorEvent"],["viewPropertyInspector",""],["icon","d-icon-gear"],["rxInspector","",3,"designerItemModel","focusEditor$","config","model","guid","isReadOnly","modelChange","editorEvent"],["viewComponentPropertyInspector",""],[1,"p-3",3,"hidden","config"],["icon","d-icon-exclamation_triangle"],[3,"definitionTypeDisplayName","issueSections","correctIssue"],["class","full-size",3,"code","lang","hasToolbar","theme",4,"ngIf"],[3,"components","allowedDropListIds"],[1,"p-3",3,"config"],[1,"full-size",3,"code","lang","hasToolbar","theme"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-designer-header",0),n["\u0275\u0275listener"]("breadcrumbSelected",function(e){return t.onSelectComponent(e.data.guid)})("toggleDesignMode",function(){return t.toggleDesignMode()})("showPreview",function(){return t.showPreview()})("save",function(){return t.saveViewDefinition()})("closeDesigner",function(){return t.closeDesigner.emit()}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275pipe"](2,"async"),n["\u0275\u0275pipe"](3,"async"),n["\u0275\u0275pipe"](4,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",1),n["\u0275\u0275elementStart"](6,"rx-blade",2),n["\u0275\u0275listener"]("toggle",function(){return t.isStencilExpanded=!t.isStencilExpanded}),n["\u0275\u0275template"](7,B,2,4,"rx-view-designer-palette",3),n["\u0275\u0275pipe"](8,"async"),n["\u0275\u0275template"](9,G,1,2,"adapt-alert",4),n["\u0275\u0275pipe"](10,"async"),n["\u0275\u0275template"](11,U,1,2,"adapt-alert",4),n["\u0275\u0275pipe"](12,"async"),n["\u0275\u0275pipe"](13,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](14,"section",5),n["\u0275\u0275elementStart"](15,"rx-view-designer-canvas",6),n["\u0275\u0275listener"]("componentSelect",function(e){return t.onSelectComponent(e)})("componentRemove",function(e){return t.onRemoveComponent(e)})("componentDrop",function(e){return t.onDropComponent(e)})("beforeComponentDropInRoot",function(e){return t.onBeforeComponentDropInRoot(e)}),n["\u0275\u0275pipe"](16,"async"),n["\u0275\u0275pipe"](17,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](18,"rx-blade",7),n["\u0275\u0275listener"]("toggle",function(){return t.isInspectorExpanded=!t.isInspectorExpanded}),n["\u0275\u0275elementStart"](19,"adapt-tabset",8),n["\u0275\u0275listener"]("tab-active-changed",function(e){return t.onInspectorTabChange(e)}),n["\u0275\u0275pipe"](20,"async"),n["\u0275\u0275pipe"](21,"async"),n["\u0275\u0275pipe"](22,"async"),n["\u0275\u0275elementStart"](23,"adapt-tab-panel",9),n["\u0275\u0275elementStart"](24,"rx-form-builder",10,11),n["\u0275\u0275listener"]("modelChange",function(e){return t.onViewPropertiesChange(e)})("editorEvent",function(e){return t.onEditorEvent(e,t.viewPropertyInspectorElementRef)}),n["\u0275\u0275pipe"](26,"async"),n["\u0275\u0275pipe"](27,"async"),n["\u0275\u0275pipe"](28,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](29,"adapt-tab-panel",12),n["\u0275\u0275elementStart"](30,"rx-form-builder",13,14),n["\u0275\u0275listener"]("modelChange",function(e){return t.onComponentPropertiesChange(e)})("editorEvent",function(e){return t.onEditorEvent(e,t.viewComponentPropertyInspectorElementRef)}),n["\u0275\u0275pipe"](32,"async"),n["\u0275\u0275pipe"](33,"async"),n["\u0275\u0275pipe"](34,"async"),n["\u0275\u0275pipe"](35,"async"),n["\u0275\u0275pipe"](36,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](37,"adapt-alert",15),n["\u0275\u0275pipe"](38,"async"),n["\u0275\u0275pipe"](39,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](40,"adapt-tab-panel",16),n["\u0275\u0275elementStart"](41,"rx-validation-issues",17),n["\u0275\u0275listener"]("correctIssue",function(e){return t.onCorrectIssue(e)}),n["\u0275\u0275pipe"](42,"translate"),n["\u0275\u0275pipe"](43,"async"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](44,q,3,8,"adapt-code-viewer",18)),2&e&&(n["\u0275\u0275property"]("bundleName",n["\u0275\u0275pipeBind1"](1,35,t.viewDesignerFacade.bundleFriendlyName$))("breadcrumbItems",n["\u0275\u0275pipeBind1"](2,37,t.breadcrumbItems$))("isDesignMode",t.isDesignMode)("isPreviewAvailable",n["\u0275\u0275pipeBind1"](3,39,t.isPreviewAvailable$))("isSaveButtonDisabled",n["\u0275\u0275pipeBind1"](4,41,t.isSaveButtonDisabled$)),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("hidden",!t.isDesignMode),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("title","Palette")("isExpanded",t.isStencilExpanded),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.isPageView&&!n["\u0275\u0275pipeBind1"](8,43,t.isReadOnly$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.isPageView&&!n["\u0275\u0275pipeBind1"](10,45,t.isReadOnly$)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",n["\u0275\u0275pipeBind1"](12,47,!n["\u0275\u0275pipeBind1"](13,49,t.viewDesignerFacade.isViewDefinitionLoading$)&&t.isReadOnly$)),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("layout",n["\u0275\u0275pipeBind1"](16,51,t.canvasLayout$))("isReadOnly",n["\u0275\u0275pipeBind1"](17,53,t.isReadOnly$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("title","Properties")("isExpanded",t.isInspectorExpanded),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("has-validation-warning",n["\u0275\u0275pipeBind1"](20,55,t.hasValidationWarning$))("has-validation-errors",n["\u0275\u0275pipeBind1"](21,57,t.hasValidationErrors$)),n["\u0275\u0275property"]("tab-active",n["\u0275\u0275pipeBind1"](22,59,t.viewDesignerFacade.selectedInspectorTabId$)),n["\u0275\u0275advance"](5),n["\u0275\u0275property"]("focusEditor$",t.inspectorFocusEditor$)("config",n["\u0275\u0275pipeBind1"](26,61,t.viewDesignerFacade.viewInspectorLayout$))("model",n["\u0275\u0275pipeBind1"](27,63,t.viewDesignerFacade.viewModel$))("isReadOnly",n["\u0275\u0275pipeBind1"](28,65,t.isReadOnly$)),n["\u0275\u0275advance"](6),n["\u0275\u0275property"]("designerItemModel",n["\u0275\u0275pipeBind1"](32,67,t.selectedComponentModel$))("focusEditor$",t.inspectorFocusEditor$)("config",n["\u0275\u0275pipeBind1"](33,69,t.viewDesignerFacade.selectedComponentInspectorLayout$))("model",n["\u0275\u0275pipeBind1"](34,71,t.viewDesignerFacade.selectedComponentProperties$))("guid",n["\u0275\u0275pipeBind1"](35,73,t.viewDesignerFacade.selectedComponentGuid$))("isReadOnly",n["\u0275\u0275pipeBind1"](36,75,t.isReadOnly$)),n["\u0275\u0275advance"](7),n["\u0275\u0275property"]("hidden",!n["\u0275\u0275pipeBind1"](38,77,t.viewComponentInspectorEmptyText$))("config",n["\u0275\u0275pureFunction1"](85,X,n["\u0275\u0275pipeBind1"](39,79,t.viewComponentInspectorEmptyText$))),n["\u0275\u0275advance"](4),n["\u0275\u0275property"]("definitionTypeDisplayName",n["\u0275\u0275pipeBind1"](42,81,"com.bmc.arsys.rx.client.view-definition.label"))("issueSections",n["\u0275\u0275pipeBind1"](43,83,t.validationIssues$)),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",!t.isDesignMode))},directives:[c.RxDesignerHeaderComponent,d.RxBladeComponent,b.NgIf,Ht,S.AdaptTabsComponent,S.AdaptTabsPanelComponent,c.FormBuilderComponent,c.InspectorDirective,S.AdaptAlertComponent,d.RxValidationIssuesComponent,ti,S.AdaptCodeViewerComponent],pipes:[b.AsyncPipe,u.TranslatePipe,b.JsonPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-component-view-designer[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:calc(100% - 50px);overflow:hidden}.rx-view-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;overflow:auto;padding:2.2rem 1rem 1rem}[_nghost-%COMP%]     .has-validation-warning:not(.has-validation-errors) .nav-link .d-icon-exclamation_triangle{color:#f1b521}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}']});class oi{}oi.\u0275fac=function(e){return new(e||oi)},oi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:oi,declarations:[Ht,Xt,Qt,Kt,Yt],imports:[b.CommonModule,C.DragDropModule],exports:[Ht,Kt,Xt,Yt]}),oi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,C.DragDropModule]]});class ri{}ri.\u0275fac=function(e){return new(e||ri)},ri.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ri,declarations:[Jt],imports:[oi,b.CommonModule]}),ri.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[oi,b.CommonModule]]});class ai{}ai.\u0275fac=function(e){return new(e||ai)},ai.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ai,declarations:[ti],imports:[b.CommonModule,C.DragDropModule,y.ReactiveFormsModule,S.AdaptAccordionModule,w.AdaptTextFieldModule,S.AdaptRxSearchModule],exports:[ti]}),ai.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,C.DragDropModule,y.ReactiveFormsModule,S.AdaptAccordionModule,w.AdaptTextFieldModule,S.AdaptRxSearchModule]]});class si extends d.RxModalClass{constructor(e,t){super(e,t),this.activeModalRef=e,this.injector=t,this.inputParams={},this.inputParamNames=this.activeModalRef.getData().inputParams}isDirty(){return(0,m.values)(this.inputParams).some(e=>e)}cancel(){this.activeModalRef.dismiss(S.DismissReasons.CLOSE_BTN)}}si.\u0275fac=function(e){return new(e||si)(n["\u0275\u0275directiveInject"](S.ActiveModalRef),n["\u0275\u0275directiveInject"](n.Injector))},si.\u0275cmp=n["\u0275\u0275defineComponent"]({type:si,selectors:[["rx-runtime-view-params-modal"]],features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:1,consts:[[1,"modal-body"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["btn-type","primary","rx-id","ok-button",3,"click"],["btn-type","secondary","rx-id","cancel-button",3,"click"],[3,"label","autofocus","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,H,2,4,"div",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"div",2),n["\u0275\u0275elementStart"](3,"adapt-button",3),n["\u0275\u0275listener"]("click",function(){return t.activeModalRef.close(t.inputParams)}),n["\u0275\u0275text"](4," OK "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"adapt-button",4),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](6," Cancel "),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.inputParamNames))},directives:[b.NgForOf,S.AdaptButtonComponent,S.AdaptRxTextfieldComponent,y.NgControlStatus,y.NgModel],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.modal-body[_ngcontent-%COMP%]{padding:20px}.modal-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;border-top:1px solid #d6d7d8;padding:10px 15px}.modal-footer[_ngcontent-%COMP%]   adapt-button[_ngcontent-%COMP%]{margin-right:5px}']});class li{}li.\u0275fac=function(e){return new(e||li)},li.\u0275mod=n["\u0275\u0275defineNgModule"]({type:li,declarations:[si],imports:[b.CommonModule,y.FormsModule,S.AdaptButtonModule,S.AdaptModalModule,S.AdaptRxTextfieldModule],exports:[si]}),li.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,y.FormsModule,S.AdaptButtonModule,S.AdaptModalModule,S.AdaptRxTextfieldModule]]});class ci extends Pt{constructor(e,t,i){super(e),this.injector=e,this.actionType=t,this.actionGuid=i,this.rxViewDataDictionaryService=this.injector.get(jt),this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.rxViewActionRegistryService=this.injector.get(p.RxViewActionRegistryService),this.commonDataDictionary$=this.rxViewDataDictionaryService.getActionDataDictionary(this.actionGuid)}getExpressionEvaluator(e){const t=this.rxViewActionRegistryService.get(this.actionType).parameters.find(t=>t.name===e);return(0,m.get)(t,"evaluatorService",this.rxDefaultExpressionEvaluatorService)}}class di extends Pt{constructor(e,t){super(t),this.fieldDefinition=e,this.injector=t,this.rxNamedListDefinitionCacheService=this.injector.get(r.RxNamedListDefinitionCacheService),this.rxRecordDefinitionCacheService=this.injector.get(s.RxRecordDefinitionCacheService),this.rxViewDataDictionaryService=this.injector.get(jt),this.rxDefaultExpressionEvaluatorService=this.injector.get(p.RxDefaultExpressionEvaluatorService),this.commonDataDictionary$=this.rxNamedListDefinitionCacheService.getNamedListDefinition(this.fieldDefinition.namedListDefinition).pipe((0,f.switchMap)(e=>this.rxRecordDefinitionCacheService.getRecordDefinition(e.recordDefinitionName)),(0,f.switchMap)(e=>this.getNamedListBranch(e)),(0,f.withLatestFrom)(this.rxViewDataDictionaryService.getCommonDataDictionary()),(0,f.map)(([e,t])=>[e,...t]))}getExpressionEvaluator(){return this.rxDefaultExpressionEvaluatorService}getDefaultConfig(){return Object.assign(Object.assign({},super.getDefaultConfig()),{operators:l.ExpressionOperatorRowsByGroup.get(l.ExpressionOperatorGroup.AllServer)})}getNamedListBranch(e){const t=(0,m.chain)(e.fieldDefinitions).reject({resourceType:s.RX_RECORD_DEFINITION.resourceTypes.attachment}).map(e=>({label:e.name,expression:`'${e.id}'`,icon:"d-icon-file_o_gear",children:e.resourceType===s.RX_RECORD_DEFINITION.resourceTypes.selection?[{label:"Options",children:(0,m.map)(e.optionNamesById,(e,t)=>({label:e,expression:t,icon:"d-icon-file_o_gear"}))}]:[]})).sortBy("label").value();return(0,h.of)({label:"Filter by",expanded:!0,children:t})}}class pi{constructor(e,t,i,n){this.injector=e,this.descriptor=t,this.guid=i,this.initialProps=n,this.destroyedSubject=new h.Subject,this.viewDesignerFacade=this.injector.get(Rt),this.actionPropertyEditorConfigSubject=new h.BehaviorSubject([]),this.actionPropertiesSubject=new h.BehaviorSubject(this.initialProps),this.children=[],this.children$=this.viewDesignerFacade.getChildComponents(this.guid),this.destroyed$=this.destroyedSubject.asObservable(),this.actionPropertyEditorConfig$=this.actionPropertyEditorConfigSubject.pipe((0,f.takeUntil)(this.destroyed$)),this.actionProperties$=this.actionPropertiesSubject.pipe((0,f.map)(()=>(0,m.omit)(this.getActionProperties(),["name"])),(0,f.distinctUntilChanged)(m.isEqual),(0,f.takeUntil)(this.destroyed$)),this.children$.pipe((0,f.first)(),(0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.setChildren(e)})}updateActionProperties(e){this.actionPropertiesSubject.next(Object.assign(Object.assign({},this.actionPropertiesSubject.getValue()),e))}setActionProperties(e){const{name:t,index:i}=this.actionPropertiesSubject.getValue();this.actionPropertiesSubject.next(Object.assign(Object.assign({$condition$:null},e),{name:t,index:i}))}getActionProperties(){return this.actionPropertiesSubject.getValue()}getActionPropertyValue(e){return this.actionPropertiesSubject.getValue()[e]}setActionPropertyEditorConfig(e){const t=new ci(this.injector,this.descriptor.name,this.guid);e=[{name:"$condition$",component:c.ExpressionFormControlComponent,options:{label:"Condition",tooltip:new l.Tooltip("The action will execute if the condition is true, or if no condition is defined."),dataDictionary$:t.getDataDictionary(),operators:t.getOperators()}},...e],this.actionPropertyEditorConfigSubject.next(e)}getActionPropertyEditorConfig(){return this.actionPropertyEditorConfigSubject.getValue()}setActionOutputDataDictionary(e){this.viewDesignerFacade.setActionDataDictionaryBranch(this.guid,this.getActionPropertyValue("index"),this.descriptor.label,e)}setChildren(e){this.children=e}getChildren(){return this.children}onDestroy(){this.destroyedSubject.next(),this.destroyedSubject.complete()}}class ui{constructor(e,t){this.injector=e,this.sandbox=t,this.guid=this.sandbox.guid,this.expressionConfigurator=new ci(this.injector,this.sandbox.descriptor.name,this.sandbox.guid)}getExpressionConfigurator(){return this.expressionConfigurator}getPropertiesByName(){return this.sandbox.getActionProperties()}getChildren(){return this.sandbox.getChildren()}getOutputExpressionForPropertyPath(e){return`\${view.components.${this.guid}.output.${e}}`}}class mi extends ui{constructor(e,t){super(e,t),this.injector=e,this.sandbox=t,this.defaultProps=this.sandbox.descriptor.parameters.reduce((e,t)=>(e[t.name]=t.defaultValue,e),{}),this.sandbox.actionProperties$.pipe((0,f.take)(1)).subscribe(e=>{this.sandbox.updateActionProperties(Object.assign(Object.assign({},this.defaultProps),e)),this.sandbox.setActionPropertyEditorConfig(this.getActionEditorConfig())})}getActionEditorConfig(){return this.sandbox.descriptor.parameters.filter(e=>e.editor).map(e=>({name:e.name,component:e.editor,options:Object.assign({label:e.label,isRequired:e.isRequired,tooltip:e.tooltip},e.editor===c.ExpressionFormControlComponent?{dataDictionary$:this.expressionConfigurator.getDataDictionary(e.name),operators:this.expressionConfigurator.getOperators(e.name)}:e.editorOptions||{})}))}}class hi{constructor(e){this.injector=e,this.models=new Map}create(e,t,i){var n;const o=new pi(this.injector,e,t,(0,m.isFunction)(null===(n=null==e?void 0:e.designModel)||void 0===n?void 0:n.getInitialProperties)?Object.assign(Object.assign({},e.designModel.getInitialProperties((0,m.omit)(i,["index","name"]))),{name:i.name,index:i.index}):i),r=new(e.designModel||mi)(this.injector,o);return this.models.set(t,r),r}remove(e){this.models.delete(e)}get(e){return this.models.get(e)}ngOnDestroy(){this.models.forEach(e=>e.sandbox.onDestroy()),this.models.clear()}}hi.\u0275fac=function(e){return new(e||hi)(n["\u0275\u0275inject"](n.Injector))},hi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:hi,factory:hi.\u0275fac});class fi extends d.RxModalClass{constructor(e,t,i,n,o,r,a,s,l){super(i,l),this.rxViewActionRegistryService=e,this.rxStringService=t,this.activeModalRef=i,this.viewDesignerFacade=n,this.rxActionListModelManagerService=o,this.rxExpressionEditorService=r,this.rxGuidService=a,this.translateService=s,this.injector=l,this.availableActionDescriptors$=this.rxViewActionRegistryService.getLicensedActions(),this.selectedActions=[],this.config=this.activeModalRef.getData(),this.treeWrap=S.TreeWrap.WrapAll,this.destroyed$=new h.ReplaySubject(1),this.isEditorDirtySubject=new h.BehaviorSubject(!1),this.isSaveButtonDisabled$=this.isEditorDirtySubject.asObservable().pipe((0,f.map)(e=>!e)),this.availableActionTreeNodes$=this.availableActionDescriptors$.pipe((0,f.map)(e=>e.filter(e=>!e.hidden).sort((e,t)=>e.label.localeCompare(t.label)).map(e=>({data:e,label:e.label})))),this.actionLabelsMap$=this.availableActionDescriptors$.pipe((0,f.map)(e=>(0,m.transform)(e,(e,t)=>{e[t.name]=t.label},{}))),this.config.selectedActions=(0,m.map)(this.config.selectedActions,e=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{index:(0,S.toNumber)(e.data.index)})})),this.selectedActions=(0,m.flow)(e=>(0,m.sortBy)(e,e=>e.data.index),e=>(0,m.map)(e,e=>{const t=this.rxViewActionRegistryService.get(e.data.name);this.viewDesignerFacade.setActionDataDictionaryBranch(e.guid,e.data.index,e.data.name);const i=this.rxActionListModelManagerService.create(t,e.guid,e.data);return{isOpen:Boolean(this.config.actionToEdit)&&e.guid===this.config.actionToEdit.guid,model:i,config$:i.sandbox.actionPropertyEditorConfig$.pipe((0,f.map)(e=>[{controls:e}])),name:t.name}}))(this.config.selectedActions)}isDirty(){return this.isEditorDirtySubject.getValue()}addAction(e,t=this.selectedActions.length){const i=this.rxGuidService.generate();this.viewDesignerFacade.setActionDataDictionaryBranch(i,t,e.name);const n=this.rxActionListModelManagerService.create(e,i,{name:e.name,index:t});this.selectedActions.splice(t,0,{isOpen:!0,model:n,config$:n.sandbox.actionPropertyEditorConfig$.pipe((0,f.map)(e=>[{controls:e}])),name:e.name}),this.updateIndexProp(),this.markEditorAsDirty(),setTimeout(()=>{this.accordionTabEls.toArray()[t].nativeElement.scrollIntoView({block:"nearest"})})}onSave(){const e=this.selectedActions.map(e=>{var t,i,n;return{guid:e.model.guid,data:e.model.getPropertiesByName(),children:null!==(n=null===(i=(t=e.model).getChildren)||void 0===i?void 0:i.call(t))&&void 0!==n?n:null}});this.activeModalRef.close(e)}removeAction(e){(0,m.pull)(this.selectedActions,e),this.rxActionListModelManagerService.remove(e.model.guid),this.viewDesignerFacade.removeActionDataDictionaryBranch(e.model.guid),this.markEditorAsDirty()}moveAction(e,t){(0,C.moveItemInArray)(this.selectedActions,e,t),this.updateIndexProp(),this.markEditorAsDirty()}toggleOpen(e){this.selectedActions.forEach(t=>t.isOpen=e)}onSelectedActionsListDrop(e){var t;const i=e.item.data;(null===(t=i.model)||void 0===t?void 0:t.guid)?this.moveAction(e.previousIndex,e.currentIndex):this.addAction(i,e.currentIndex)}openExpressionEditor(e,t,i,n=!1,o){this.rxExpressionEditorService.openEditor({property:{path:t,value:(0,m.get)(e.sandbox.getActionProperties(),t),label:i},isReadOnly:n,expressionConfigurator:e.getExpressionConfigurator(),legend:[{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.function.label"),icon:"d-icon-mathematical_function"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.keyword.label"),icon:"d-icon-dollar"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component.label"),icon:"d-icon-file_o"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-component-property.label"),icon:"d-icon-file_o_gear"},{label:this.translateService.instant("com.bmc.arsys.rx.client.expression-editor.legend.view-input-parameter.label"),icon:"d-icon-arrow_right_square_input"}],expressionPropertyNavigator:{getProperties:()=>{const t=Array.from(o.querySelectorAll("rx-expression-form-control")).map(t=>{const i=t.getAttribute("property-path");return{path:i,value:(0,m.get)(e.sandbox.getActionProperties(),i),label:t.getAttribute("property-label")}});return(0,h.of)(t)}}}).pipe((0,f.map)(({path:t,value:i})=>{const n=e.sandbox.getActionProperties(),o=t in n?t:(0,m.toPath)(t)[0];return(0,m.set)({[o]:(0,m.cloneDeep)(n[o])},t,i)})).subscribe(t=>{e.sandbox.updateActionProperties(t),this.markEditorAsDirty()})}onEvent(e,t,i){e.type===c.RX_EXPRESSION_EDITOR.events.openExpressionEditor&&this.openExpressionEditor(t,e.payload.propertyPath,e.payload.propertyLabel,e.payload.isReadOnly,i)}updateIndexProp(){this.selectedActions.forEach((e,t)=>{e.model.sandbox.updateActionProperties({index:t})}),this.viewDesignerFacade.updateActionDataDictionaryBranchOrder(this.selectedActions.reduce((e,t,i)=>(e[t.model.guid]=i,e),{}))}markEditorAsDirty(){this.isEditorDirtySubject.next(!0)}ngAfterViewInit(){const e=(0,m.findIndex)(this.selectedActions,"isOpen");-1!==e&&this.accordionTabEls.toArray()[e].nativeElement.scrollIntoView({block:"nearest"})}ngOnDestroy(){this.isEditorDirtySubject.complete(),this.destroyed$.next(!0),this.destroyed$.complete(),this.viewDesignerFacade.removeAllActionDataDictionaryBranches()}cancel(){this.activeModalRef.dismiss(S.DismissReasons.CLOSE_BTN)}}fi.\u0275fac=function(e){return new(e||fi)(n["\u0275\u0275directiveInject"](p.RxViewActionRegistryService),n["\u0275\u0275directiveInject"](g.RxStringService),n["\u0275\u0275directiveInject"](S.ActiveModalRef),n["\u0275\u0275directiveInject"](Rt),n["\u0275\u0275directiveInject"](hi),n["\u0275\u0275directiveInject"](c.RxExpressionEditorService),n["\u0275\u0275directiveInject"](g.RxGuidService),n["\u0275\u0275directiveInject"](u.TranslateService),n["\u0275\u0275directiveInject"](n.Injector))},fi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:fi,selectors:[["rx-action-list-editor-dialog"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](S.AdaptAccordionTabComponent,5,n.ElementRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.accordionTabEls=e)}},features:[n["\u0275\u0275ProvidersFeature"]([hi]),n["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:20,consts:[[1,"designer-modal-body","modal-body","d-flex","mh-100"],[1,"row","flex-grow-1","w-100"],["class","col-4 border-right d-flex flex-column mh-100",4,"ngIf"],[1,"d-flex","align-items-start","justify-content-between"],[1,"d-flex","align-items-center"],[1,"mt-2"],["name","question_circle_o","appendToBody","true",1,"ml-2",3,"adaptPopover"],["class","btn-group",4,"ngIf"],["id","selected-action-list","cdkDropList","",1,"designer-modal-accordion-wrapper",3,"cdkDropListDropped"],[3,"multiselect"],["class","designer-modal-accordion-content","cdkDrag","","cdkDragLockAxis","y",3,"cdkDragData","cdkDragDisabled",4,"ngFor","ngForOf"],["class","d-flex justify-content-center h-100 align-items-center mt-2",4,"ngIf"],[1,"modal-footer"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click",4,"ngIf"],["adapt-button","","btn-type","secondary","type","button","rx-id","cancel-button",3,"click"],[1,"col-4","border-right","d-flex","flex-column","mh-100"],[1,"rx-card","card","flex-grow-1","mt-2"],["class","card-block",4,"ngIf"],[1,"card-block"],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo",4,"ngIf","ngIfElse"],["adaptTreeEmptyStateTemplate",""],["cdkDropList","","cdkDropListSortingDisabled","",3,"cdkDropListConnectedTo"],["filter","true",3,"value","wrap"],["adaptTreeNodeTemplate",""],["class","rx-tree-draggable-node","cdkDrag","",3,"cdkDragData",4,"ngIf"],["cdkDrag","",1,"rx-tree-draggable-node",3,"cdkDragData"],[3,"dblclick"],["type","button",1,"rx-button-unstyled","d-icon-plus_circle",3,"click"],[1,"rx-tree-node-label","ml-3"],[1,"d-flex","justify-content-center","h-100","align-items-center","mt-2"],["type","search",1,"w-100",3,"label"],[1,"btn-group"],["adapt-button","","btn-type","tertiary","type","button","rx-id","expand-all-button",3,"click"],["adapt-button","","btn-type","tertiary","type","button","rx-id","collapse-all-button",3,"click"],["cdkDrag","","cdkDragLockAxis","y",1,"designer-modal-accordion-content",3,"cdkDragData","cdkDragDisabled"],["container",""],["class","designer-modal-drag-handle d-icon-left-dots","cdkDragHandle","",4,"ngIf"],[1,"d-block",3,"isOpen","open","close"],[1,"card-title-text","w-100"],[1,"designer-modal-card-title-content"],[1,"left-header-block"],["class","rx-ellipsis","rx-id","card-title",3,"title",4,"ngIf"],["class","right-header-block",4,"ngIf"],[1,"d-block",3,"config","model","isReadOnly","modelChange","editorEvent"],["cdkDragHandle","",1,"designer-modal-drag-handle","d-icon-left-dots"],["rx-id","card-title",1,"rx-ellipsis",3,"title"],[1,"right-header-block"],[1,"designer-modal-card-title-index-buttons"],["type","button","rx-id","move-down-button",1,"d-icon-left-triangle_down","rx-button-unstyled",3,"disabled","click"],["type","button","rx-id","move-up-button",1,"d-icon-left-triangle_up","rx-button-unstyled",3,"disabled","click"],["adapt-button","","size","small","type","button","rx-id","remove-button",1,"d-icon-left-cross_adapt","p-1","pr-4","ml-3",3,"click"],["type","config",1,"w-100",3,"label"],["adapt-button","","btn-type","primary","type","button","rx-id","save-button",3,"disabled","click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275template"](2,Z,8,6,"div",2),n["\u0275\u0275elementStart"](3,"div"),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275elementStart"](6,"h4",5),n["\u0275\u0275text"](7),n["\u0275\u0275pipe"](8,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](9,"adapt-icon",6),n["\u0275\u0275pipe"](10,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](11,ee,7,6,"div",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](12,"div",8),n["\u0275\u0275listener"]("cdkDropListDropped",function(e){return t.onSelectedActionsListDrop(e)}),n["\u0275\u0275elementStart"](13,"adapt-accordion",9),n["\u0275\u0275template"](14,oe,13,17,"div",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](15,re,3,3,"div",11),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](16,"div",12),n["\u0275\u0275template"](17,ae,4,6,"button",13),n["\u0275\u0275elementStart"](18,"button",14),n["\u0275\u0275listener"]("click",function(){return t.cancel()}),n["\u0275\u0275text"](19),n["\u0275\u0275pipe"](20,"translate"),n["\u0275\u0275pipe"](21,"translate"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("d-flex flex-column mh-100 ",t.config.isReadOnly?"col":"col-8",""),n["\u0275\u0275advance"](4),n["\u0275\u0275textInterpolate1"](" ",n["\u0275\u0275pipeBind1"](8,12,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.title")," "),n["\u0275\u0275advance"](2),n["\u0275\u0275propertyInterpolate"]("adaptPopover",n["\u0275\u0275pipeBind1"](10,14,"com.bmc.arsys.rx.client.view-components.action-list.selected-actions.tooltip")),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.selectedActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("multiselect",!0),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.selectedActions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.selectedActions.length),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",!t.config.isReadOnly),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.config.isReadOnly?n["\u0275\u0275pipeBind1"](20,16,"com.bmc.arsys.rx.client.common.close.label"):n["\u0275\u0275pipeBind1"](21,18,"com.bmc.arsys.rx.client.common.cancel.label")," "))},directives:[b.NgIf,S.AdaptIconComponent,S.AdaptPopoverDirective,C.CdkDropList,S.AdaptAccordionComponent,b.NgForOf,S.AdaptButtonComponent,S.AdaptTreeComponent,S.AdaptTreeNodeTemplateDirective,C.CdkDrag,S.AdaptEmptyStateComponent,S.AdaptAccordionTabComponent,c.FormBuilderComponent,C.CdkDragHandle],pipes:[u.TranslatePipe,b.AsyncPipe],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}.designer-modal-body[_ngcontent-%COMP%]{height:645px;min-height:calc(100% - 61px)!important}.designer-modal-accordion-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:auto;padding-top:10px}.designer-modal-accordion-content[_ngcontent-%COMP%]{position:relative}.designer-modal-accordion-content.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.designer-modal-drag-handle[_ngcontent-%COMP%]{cursor:move;position:absolute;top:0;left:0;height:46px;padding:14px 10px 14px 14px;z-index:1}.designer-modal-card-title-content[_ngcontent-%COMP%]{width:100%;display:flex}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%], .designer-modal-card-title-content[_ngcontent-%COMP%]   .right-header-block[_ngcontent-%COMP%]{display:flex;align-items:center}.designer-modal-card-title-content[_ngcontent-%COMP%]   .left-header-block[_ngcontent-%COMP%]{flex-grow:1;min-width:0;font-size:14px;padding-left:22px}.designer-modal-card-sub-title[_ngcontent-%COMP%]{color:#7c7f81;font-weight:normal}.designer-modal-card-title-index-buttons[_ngcontent-%COMP%]{display:flex;font-size:19px}.rx-card[_ngcontent-%COMP%]{overflow:auto}.rx-tree-draggable-node[_ngcontent-%COMP%]{cursor:pointer}.rx-tree-draggable-node.cdk-drag-preview[_ngcontent-%COMP%]{z-index:1200!important}.rx-tree-draggable-node.cdk-drag[_ngcontent-%COMP%]{opacity:1}.rx-tree-node-label[_ngcontent-%COMP%]{word-break:break-all}rx-form-builder[_ngcontent-%COMP%]{max-width:400px}[_nghost-%COMP%]  .a-tree__node_leaf .a-tree__toggle{display:none}']});class gi{}gi.\u0275fac=function(e){return new(e||gi)},gi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:gi,declarations:[fi],imports:[b.CommonModule,S.AdaptRxSearchModule,S.AdaptButtonModule,S.AdaptAccordionModule,C.DragDropModule,S.AdaptEmptyStateModule,c.ExpressionEditorModule,y.FormsModule,c.RxFormBuilderModule,S.AdaptIconModule,S.AdaptPopoverModule,u.TranslateModule,S.AdaptTreeModule],exports:[fi]}),gi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,S.AdaptRxSearchModule,S.AdaptButtonModule,S.AdaptAccordionModule,C.DragDropModule,S.AdaptEmptyStateModule,c.ExpressionEditorModule,y.FormsModule,c.RxFormBuilderModule,S.AdaptIconModule,S.AdaptPopoverModule,u.TranslateModule,S.AdaptTreeModule]]});class vi extends c.ValueAccessor{constructor(e,t){super(),this.rxModalService=e,this.rxViewActionRegistryService=t,this.availableActions$=this.rxViewActionRegistryService.getLicensedActions(),this.selectedActions=[],this.availableActions$.subscribe(e=>{this.actionLabelsMap=(0,m.transform)(e,(e,t)=>{e[t.name]=t.label},{})})}focus(e){(null==e?void 0:e.actionIndex)>=0?this.openActionSelector(this.selectedActions.find(t=>t.data.index===e.actionIndex)):this.openActionSelector()}openActionSelector(e){this.rxModalService.openModal({title:"Edit actions",data:{selectedActions:this.value,actionToEdit:e,isReadOnly:this.isDisabled},content:fi,size:p.OpenViewActionModalSize.Large,testID:"edit-actions"}).then(e=>{this.value=e}).catch(m.noop)}onSetValue(){this.updateSortedActionsList()}onWriteValue(e){this.updateSortedActionsList()}removeAction(e){this.value=(0,m.without)(this.value,e)}editAction(e){this.openActionSelector(e)}updateSortedActionsList(){this.selectedActions=(0,m.sortBy)(this.value,e=>e.data.index)}}vi.\u0275fac=function(e){return new(e||vi)(n["\u0275\u0275directiveInject"](d.RxModalService),n["\u0275\u0275directiveInject"](p.RxViewActionRegistryService))},vi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:vi,selectors:[["rx-action-list-control"]],inputs:{options:"options",tooltip:"tooltip"},features:[n["\u0275\u0275ProvidersFeature"]([{provide:y.NG_VALUE_ACCESSOR,useExisting:vi,multi:!0}]),n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:3,consts:[["rx-id","open-modal-button","btn-type","tertiary",1,"px-0","py-0","pb-1",3,"click"],["name","plus_circle",1,"mr-1"],["class","align-middle",4,"ngIf"],["rx-id","columns"],["class","text-tertiary",4,"ngIf"],["class","list-unstyled mb-0",4,"ngIf"],[1,"align-middle"],[1,"letter-space"],["appendToBody","true",3,"name","adaptPopover"],[1,"text-tertiary"],[1,"list-unstyled","mb-0"],["class","border px-2 py-1 mb-1 d-flex align-items-center",4,"ngFor","ngForOf"],[1,"border","px-2","py-1","mb-1","d-flex","align-items-center"],[1,"mr-auto"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-pencil","p-1",3,"click"],["class","d-icon-left-cross_adapt p-1","adapt-button","","btn-type","tertiary","size","small","type","button",3,"click",4,"ngIf"],["adapt-button","","btn-type","tertiary","size","small","type","button",1,"d-icon-left-cross_adapt","p-1",3,"click"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"adapt-button",0),n["\u0275\u0275listener"]("click",function(){return t.openActionSelector()}),n["\u0275\u0275element"](1,"adapt-icon",1),n["\u0275\u0275text"](2," Edit actions\n"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,se,3,2,"span",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275template"](5,le,2,0,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,pe,2,1,"ul",5)),2&e&&(n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.tooltip),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",0===t.selectedActions.length),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.selectedActions.length>0))},directives:[S.AdaptButtonComponent,S.AdaptIconComponent,b.NgIf,S.AdaptPopoverDirective,b.NgForOf],encapsulation:2});class xi{}xi.\u0275fac=function(e){return new(e||xi)},xi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:xi,declarations:[vi],imports:[b.CommonModule,S.AdaptIconModule,S.AdaptButtonModule,gi,S.AdaptPopoverModule],exports:[vi]}),xi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,S.AdaptIconModule,S.AdaptButtonModule,gi,S.AdaptPopoverModule]]});class yi{constructor(e){this.viewDesignerFacade=e,this.permissions=[],this.destroyed$=new h.ReplaySubject(1)}ngOnInit(){this.viewDesignerFacade.getComponentPermissions(this.options.componentGuid).pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.permissions=e})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onPermissionsChange(e){this.viewDesignerFacade.updateComponentModel(this.options.componentGuid,{permissions:e})}}yi.\u0275fac=function(e){return new(e||yi)(n["\u0275\u0275directiveInject"](Rt))},yi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:yi,selectors:[["rx-component-permission-editor-widget"]],inputs:{options:"options",isDisabled:"isDisabled"},decls:1,vars:3,consts:[[3,"options","disabled","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-permission-editor",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.permissions=e})("ngModelChange",function(e){return t.onPermissionsChange(e)}),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("options",t.options)("disabled",t.isDisabled)("ngModel",t.permissions)},directives:[c.RxPermissionEditorComponent,y.NgControlStatus,y.NgModel],encapsulation:2});class bi{}bi.\u0275fac=function(e){return new(e||bi)},bi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:bi,declarations:[yi],imports:[b.CommonModule,y.FormsModule,c.RxPermissionEditorModule]}),bi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,y.FormsModule,c.RxPermissionEditorModule]]});class Ci{}Ci.\u0275fac=function(e){return new(e||Ci)},Ci.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ci,declarations:[Vt],imports:[b.CommonModule,y.FormsModule,c.CustomizationOptionsModule]}),Ci.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,y.FormsModule,c.CustomizationOptionsModule]]});class Si extends c.InspectorWidgetBase{constructor(e){super(e),this.injector=e,this.actions=[],this.modelSandbox=this.designerItemModel.sandbox,this.destroyed$=new h.ReplaySubject(1)}ngOnInit(){this.modelSandbox.getChildComponents().pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.actions=e})}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}onActionsChange(e){this.modelSandbox.setChildren(this.getActionComponentPayloads(e))}focus(e){this.actionListControlComponent.focus(e)}getActionComponentPayloads(e){return e.map(e=>Object.assign({type:p.RxViewComponentType.Action},e))}}Si.\u0275fac=function(e){return new(e||Si)(n["\u0275\u0275directiveInject"](n.Injector))},Si.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Si,selectors:[["rx-action-list-widget"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](vi,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.actionListControlComponent=e.first)}},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:2,vars:5,consts:[[3,"disabled","ngModel","tooltip","ngModelChange"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"rx-action-list-control",0),n["\u0275\u0275listener"]("ngModelChange",function(e){return t.actions=e})("ngModelChange",function(e){return t.onActionsChange(e)}),n["\u0275\u0275pipe"](1,"async"),n["\u0275\u0275elementEnd"]()),2&e&&n["\u0275\u0275property"]("disabled",n["\u0275\u0275pipeBind1"](1,3,t.modelSandbox.isViewReadOnly$))("ngModel",t.actions)("tooltip",null==t.options?null:t.options.tooltip)},directives:[vi,y.NgControlStatus,y.NgModel],pipes:[b.AsyncPipe],encapsulation:2});class wi{}wi.\u0275fac=function(e){return new(e||wi)},wi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:wi,declarations:[Si],imports:[b.CommonModule,xi,y.FormsModule]}),wi.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,xi,y.FormsModule]]});class Ii{constructor(e,t){this.injector=e,this.sandbox=t}get expressionConfigurator(){return this._expressionConfigurator||(this._expressionConfigurator=new(this.sandbox.descriptor.expressionConfigurator||Nt)(this.injector,this.sandbox.guid,this,this.sandbox.descriptor.type)),this._expressionConfigurator}getExpressionForProperty(e){return`\${view.components.${this.sandbox.guid}.${e}}`}}const _i=[{id:p.RxDevice.Desktop,name:"Desktop"},{id:p.RxDevice.Tablet,name:"Tablet"},{id:p.RxDevice.Mobile,name:"Mobile"}];function Di(){return{name:p.RX_AVAILABLE_ON_DEVICES_PROP_NAME,component:c.SelectFormControlComponent,options:{label:"Available on devices",options:_i,multiple:!0,required:!0,hideSelectAllButton:!0,hideDeselectAllButton:!0}}}function Ri(){return{name:p.RX_HIDDEN_PROP_NAME,component:c.OptionalExpressionInspectorControlComponent,options:{label:"Hidden"}}}function Ai(){return{name:p.RX_DISABLED_PROP_NAME,component:c.OptionalExpressionInspectorControlComponent,options:{label:"Disabled"}}}function Ti(e=[]){return{name:p.RX_STYLES_PROP_NAME,component:c.TagsFormControlComponent,options:{label:"CSS classes",placeholder:"Add CSS classes",tooltip:new l.Tooltip("Enter CSS class names to apply to this view component."),errorCheck:Ft,autocompleteValues:e}}}function Fi(){return[Ri(),Di(),Ti()]}class Ei{constructor(e,t,i,n){this.rxViewActionRegistryService=e,this.rxStringService=t,this.rxLogService=i,this.rxViewExpressionValidatorService=n}validate(e,t){const i=(0,m.flow)(e=>e.map(({data:e})=>{const i=this.rxViewActionRegistryService.get(e.name);return[(0,h.of)(this.validateRequiredProps(e,i,t)),this.performCustomValidation(e,i,t),this.validateExpressions(e,i,t)]}),m.flatten)(e);return(0,h.combineLatest)([(0,h.of)(this.validateActionSequence(e,t)),...i]).pipe((0,f.map)(m.flatten))}performCustomValidation(e,t,i){const n=this.rxViewActionRegistryService.getDesignManager(t.name);return n?n.validate(e,i).pipe((0,f.map)(t=>t.map(t=>Object.assign(Object.assign({},t),{data:{actionIndex:e.index}})))):(0,h.of)([])}validateRequiredProps(e,t,i){return(0,m.flow)(t=>t.filter(t=>!0===t.isRequired&&this.rxStringService.isEmptySafe(e[t.name])),n=>n.map(n=>({type:"error",description:`${t.label} action: ${n.label||n.name} cannot be blank.`,propertyName:i,data:{actionIndex:e.index}})))(t.parameters)}validateExpressions(e,t,i){const n=t.parameters.filter(t=>!0===t.enableExpressionEvaluation&&e[t.name]).map(n=>this.rxViewExpressionValidatorService.validate(e[n.name],i,n.label||n.name,n.evaluatorService).pipe((0,f.map)(i=>i.map(i=>Object.assign(Object.assign({},i),{description:`${t.label} action: ${i.description}`,data:{actionIndex:e.index}})))));return n.length?(0,h.combineLatest)(n).pipe((0,f.map)(m.flatten)):(0,h.of)([])}validateActionSequence(e,t){return(0,m.flow)(e=>(0,m.map)(e,({data:i})=>{const n=this.rxViewActionRegistryService.get(i.name);return n?(0,m.map)(i,(o,r)=>{var a;if((null===(a=n.parameters.find(e=>e.name===r))||void 0===a?void 0:a.enableExpressionEvaluation)&&this.rxStringService.isNonEmptyString(o)){const a=o.match(/\${view\.components\.([0-9a-z-]+)\..+}/);if(a&&a[1]){const o=(0,m.find)(e,{guid:a[1]});if(Number(null==o?void 0:o.data.index)>Number(i.index))return{type:"error",description:`${n.label} action: invalid expression for ${r}.`,propertyName:t}}}}):[]}),m.flatten,m.compact)(e)}}Ei.\u0275fac=function(e){return new(e||Ei)(n["\u0275\u0275inject"](p.RxViewActionRegistryService),n["\u0275\u0275inject"](g.RxStringService),n["\u0275\u0275inject"](l.RxLogService),n["\u0275\u0275inject"](kt))},Ei.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Ei,factory:Ei.\u0275fac,providedIn:"root"});class Mi{constructor(e,t,i){this.injector=e,this.guid=t,this.descriptor=i,this.viewDesignerFacade=this.injector.get(Rt),this.systemActions$=this.injector.get(v.Actions),this.viewDesignerDispatcher=this.injector.get(Ne),this.rxViewDesignerModels=this.injector.get(At),this.childModelsInitialized$=new h.BehaviorSubject(!1),this.dispatcher$=new h.Subject,this.breadcrumbs$=new h.ReplaySubject(1),this.setUpPublicStreams(),this.viewDesignerFacade.getComponentType(t).pipe((0,f.take)(1)).subscribe(e=>this.componentType=e),this.viewDesignerFacade.getComponentModel(this.guid).pipe((0,f.map)(e=>Boolean(e.lastUpdateTime||e.name)),(0,f.switchMap)(e=>e?this.viewDesignerFacade.viewModelsInitialized$:(0,h.of)(null)),(0,f.take)(1),(0,f.takeUntil)(this.destroyed$)).subscribe(()=>{this.childModelsInitialized$.next(!0)}),this.viewModelsInitialized$=this.viewDesignerFacade.viewModelsInitialized$.pipe((0,f.takeUntil)(this.destroyed$)),this.isComponentSelected$.pipe((0,f.filter)(e=>e),(0,f.first)(),(0,f.switchMap)(()=>this.breadcrumbs$),(0,f.distinctUntilChanged)(),(0,f.takeUntil)(this.destroyed$)).subscribe(e=>{this.dispatcher$.next(Te({guid:this.guid,label:e}))}),(0,h.merge)(this.dispatcher$.pipe((0,v.ofType)(_e),(0,f.skipWhile)(e=>0===e.issues.length)),this.dispatcher$.pipe((0,f.filter)(e=>e.type!==_e.type))).pipe((0,f.takeUntil)(this.destroyed$)).subscribe(e=>this.viewDesignerDispatcher.dispatch(e)),this.destroyed$.subscribe(()=>{this.childModelsInitialized$.complete(),this.dispatcher$.complete(),this.breadcrumbs$.complete()})}createError(e,t,i){return{type:"error",description:e,propertyName:t,disableCorrection:i}}createWarning(e,t,i){return{type:"warning",description:e,propertyName:t,disableCorrection:i}}getComponent(e){return this.viewDesignerFacade.getComponent(e)}getChildComponents(e){return this.childModelsInitialized$.asObservable().pipe((0,f.filter)(Boolean),(0,f.switchMapTo)(this.viewDesignerFacade.getChildComponents(this.guid,e)),(0,f.takeUntil)(this.destroyed$))}getChildComponentsTree(){return this.childModelsInitialized$.asObservable().pipe((0,f.filter)(e=>e),(0,f.switchMapTo)(this.viewDesignerFacade.getChildComponentTree(this.guid)),(0,f.shareReplay)(1),(0,f.takeUntil)(this.destroyed$))}getChildComponentGuids(e,t=!1){return this.childModelsInitialized$.asObservable().pipe((0,f.filter)(Boolean),(0,f.switchMapTo)(this.viewDesignerFacade.getChildComponentGuids(this.guid,t,e)),(0,f.takeUntil)(this.destroyed$))}setChildren(e,t){this.dispatcher$.next(Ae({payload:{guid:t||this.guid,data:e}}))}setChildrenByType(e,t){this.dispatcher$.next(Ae({payload:{guid:this.guid,data:e,types:t}}))}getParentComponentGuid(e){return this.viewDesignerFacade.getParentComponentGuid(this.guid,e).pipe((0,f.distinctUntilChanged)(),(0,f.takeUntil)(this.destroyed$))}setValidationIssues(e){this.dispatcher$.next(_e({issues:e,guid:this.guid}))}updateComponentProperties(e){this.viewDesignerFacade.updateComponentProperties(this.guid,e)}getComponentPropertyValue(e,t=this.guid){return this.viewDesignerFacade.getComponentPropertyValue(t,e).pipe((0,f.shareReplay)(1),(0,f.takeUntil)(this.destroyed$))}getViewPropertyValue(e){return this.viewDesignerFacade.getViewPropertyValue(e).pipe((0,f.shareReplay)(1),(0,f.takeUntil)(this.destroyed$))}updateInspectorConfig(e){this.viewDesignerFacade.setComponentInspector(this.guid,e)}setBreadcrumbs(e){this.breadcrumbs$.next(e)}addComponent(e){const t=(0,m.castArray)(e).map(e=>Object.assign(Object.assign({},e),{parentGuid:this.guid}));this.dispatcher$.next(ke({payload:t}))}selectComponent(e){this.dispatcher$.next(Fe({guid:e}))}removeComponents(e,t){this.viewDesignerFacade.removeViewComponents(e,t)}moveComponent(e,t,i){const n={guid:e},o=p.RX_VIEW_DEFINITION.defaultOutletName;this.dispatcher$.next(Oe({data:n,insertIndex:t,columnIndex:0,outletName:o,targetGuid:i}))}setLayout(e){this.dispatcher$.next(Ee({guid:this.guid,cols:e}))}getLayout(e){return this.viewDesignerFacade.getComponentLayout(e).pipe((0,f.shareReplay)(1),(0,f.takeUntil)(this.destroyed$))}setCommonDataDictionary(e){this.viewDesignerFacade.setComponentCommonDataDictionaryBranch(this.guid,e)}setSettablePropertiesDataDictionary(e,t){this.viewDesignerFacade.setComponentSettablePropertiesDataDictionary(this.guid,e,t)}getComponentModel(e){return this.rxViewDesignerModels.get(e)}getComponentsByType(e){return this.viewDesignerFacade.getComponentsByType(e).pipe((0,f.takeUntil)(this.destroyed$))}setUpPublicStreams(){const e=this.systemActions$.pipe((0,v.ofType)(Se),(0,f.filter)(e=>e.guids.includes(this.guid)));this.destroyed$=(0,h.merge)(e,this.viewDesignerFacade.initViewDesigner$,this.viewDesignerFacade.destroyViewDesigner$).pipe((0,f.mapTo)(!0),(0,f.first)()),this.componentProperties$=this.viewDesignerFacade.getComponentProperties(this.guid).pipe((0,f.filter)(Boolean),(0,f.takeUntil)(this.destroyed$),(0,f.shareReplay)(1)),this.isComponentSelected$=this.systemActions$.pipe((0,v.ofType)(Fe),(0,f.map)(({guid:e})=>e===this.guid),(0,f.distinctUntilChanged)(),(0,f.startWith)(!1),(0,f.takeUntil)(this.destroyed$),(0,f.shareReplay)(1)),this.isViewReadOnly$=this.viewDesignerFacade.isViewReadOnly$}}class Oi{constructor(e,t,i){this.rxViewComponentRegistryService=e,this.viewDesignerFacade=t,this.rxViewExpressionValidatorService=i,this.issuesObservableMap=new Map}registerComponents(e){e.forEach(e=>this.issuesObservableMap.set(e,this.getComponentValidationIssues(e))),this.initValidation()}unregisterComponents(e){e.forEach(e=>this.issuesObservableMap.delete(e)),this.initValidation()}unregisterAllComponents(){var e;this.issuesObservableMap.clear(),null===(e=this.validateSubscription)||void 0===e||e.unsubscribe()}initValidation(){var e;null===(e=this.validateSubscription)||void 0===e||e.unsubscribe(),this.validateSubscription=(0,h.combineLatest)(Array.from(this.issuesObservableMap.entries()).map(([e,t])=>t.pipe((0,f.map)(t=>({[e]:t}))))).pipe((0,f.map)(e=>(0,m.merge)({},...e)),(0,f.skipWhile)(e=>(0,m.every)(Object.values(e),m.isEmpty)),(0,f.debounceTime)(0)).subscribe(e=>{this.viewDesignerFacade.setExpressionValidationIssues(e)})}getComponentValidationIssues(e){return this.viewDesignerFacade.getComponentType(e).pipe((0,f.take)(1),(0,f.switchMap)(t=>{const i=this.rxViewComponentRegistryService.get(t),n=(0,m.filter)(null==i?void 0:i.properties,{enableExpressionEvaluation:!0}),o=(0,m.map)(n,"name"),r=new Map(n.map(e=>[e.name,e]));return o.length?(0,h.combineLatest)(o.map(t=>this.viewDesignerFacade.getComponentPropertyValue(e,t).pipe((0,f.switchMap)(i=>this.rxViewExpressionValidatorService.validate(i,t,r.get(t).label,r.get(t).evaluatorService).pipe((0,f.takeUntil)(this.viewDesignerFacade.allComponentGuids$.pipe((0,f.filter)(t=>!t.has(e))))))))).pipe((0,f.map)(m.flatten)):(0,h.of)([])}),(0,f.publishReplay)(1),(0,f.refCount)())}}Oi.\u0275fac=function(e){return new(e||Oi)(n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](Rt),n["\u0275\u0275inject"](kt))},Oi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Oi,factory:Oi.\u0275fac,providedIn:"root"});class ki{getInitialComponentProperties(e,t){var i;let n=e;return(0,m.isFunction)(null===(i=t.designComponentModel)||void 0===i?void 0:i.getInitialProperties)&&(n=t.designComponentModel.getInitialProperties(e)),n}getDefaultComponentPermissions(e){var t;let i=null;return(0,m.isFunction)(null===(t=e.designComponentModel)||void 0===t?void 0:t.getDefaultPermissions)&&(i=e.designComponentModel.getDefaultPermissions()),i}}ki.\u0275fac=function(e){return new(e||ki)},ki.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ki,factory:ki.\u0275fac,providedIn:"root"});class ji{constructor(e,t,i,n,o,r,a,s,l,c){this.actions$=e,this.injector=t,this.viewDesignerModels=i,this.rxGuidService=n,this.store$=o,this.rxViewComponentRegistryService=r,this.rxViewDesignerInspectorService=a,this.rxViewExpressionValidatorRegistryService=s,this.rxViewDesignerStateHelperService=l,this.rxViewDataDictionaryStoreService=c,this.initializeComponentModel$=this.actions$.pipe((0,v.ofType)(we),(0,f.tap)(e=>{e.payload.forEach(({componentModel:e})=>{const t=this.rxViewComponentRegistryService.get(e.type),i=new Mi(this.injector,e.guid,t),n=new t.designComponentModel(this.injector,i);(0,m.isFunction)(n.rxInit)&&n.rxInit(),this.viewDesignerModels.set(e.guid,n)})}),(0,f.map)(()=>Xe())),this.registerComponentsValidation$=this.actions$.pipe((0,v.ofType)(Ie,we),(0,f.tap)(e=>this.rxViewExpressionValidatorRegistryService.registerComponents((0,m.map)(e.payload,e=>e.componentModel.guid)))),this.onComponentsRemoved$=this.actions$.pipe((0,v.ofType)(Se),(0,f.tap)(({guids:e})=>{this.rxViewExpressionValidatorRegistryService.unregisterComponents(e),this.rxViewDataDictionaryStoreService.removeDataDictionaryForComponents(e)})),this.unregisterAllComponentsValidation$=this.actions$.pipe((0,v.ofType)(it,nt),(0,f.tap)(()=>this.rxViewExpressionValidatorRegistryService.unregisterAllComponents())),this.insertComponent$=this.actions$.pipe((0,v.ofType)(Oe),(0,f.map)(e=>{const t={insertIndex:e.insertIndex,columnIndex:e.columnIndex,outletName:e.outletName,parentGuid:e.targetGuid};return e.data.guid?Me(Object.assign(Object.assign({},t),{guid:e.data.guid})):ke({payload:[Object.assign(Object.assign({},t),{type:e.data.type,selectComponent:!0,propertiesByName:e.data.initialPropertiesByName})]})})),this.addNewComponent$=this.actions$.pipe((0,v.ofType)(ke),(0,f.withLatestFrom)(this.store$.select(lt)),(0,f.mergeMap)(([e,t])=>{const i=[],n=[],o=[];return e.payload.forEach(e=>{this.processAddComponentPayload(e,i,n,o,t)}),[i.length?we({payload:i}):null,n.length?Ie({payload:n}):null,o.length?Fe({guid:(0,m.last)(o)}):null].filter(Boolean)})),this.removeComponent$=this.actions$.pipe((0,v.ofType)(Pe),(0,f.filter)(({guids:e})=>!(0,m.isEmpty)(e)),(0,f.withLatestFrom)(this.store$.select(lt)),(0,f.mergeMap)(([e,t])=>{const i=e.guids.reduce((e,i)=>{const n=t[i];return n&&e.push(i,...xe(n,t)),e},[]),n=new Set(i);n.forEach(e=>{this.viewDesignerModels.delete(e),this.rxViewDesignerInspectorService.delete(e)});const o=[Se({guids:[...n]})];if(e.selectParent){const i=t[(0,m.last)(e.guids)];(null==i?void 0:i.parentGuid)&&o.push(Fe({guid:i.parentGuid}))}return o})),this.setChildren$=this.actions$.pipe((0,v.ofType)(Ae),(0,f.map)(e=>e.payload),(0,f.withLatestFrom)(this.store$.select(lt)),(0,f.mergeMap)(([e,t])=>{const i=[],n=[],o=[],r=[];function a(e,t){const i={propertiesByName:e.data,guid:e.guid,parentGuid:t,type:e.type,columnIndex:e.columnIndex||0,insertIndex:e.insertIndex,outletName:e.outletName||p.RX_VIEW_DEFINITION.defaultOutletName};return e.children&&(i.children=(0,m.map)(e.children,t=>a(t,e.guid))),i}return function e(i){const s=i.data,l=s.map(e=>e.guid);let c=ve(t[i.guid]);i.types&&(c=c.filter(e=>i.types.includes(t[e].type)));const d=(0,m.difference)(c,l),p=(0,m.difference)(l,c),u=(0,m.difference)(c,p,d);n.push(...d);const h=s.reduce((e,t)=>((0,m.includes)(p,t.guid)&&e.push(a(t,i.guid)),e),[]);o.push(...h);const f=s.reduce((i,n)=>{if((0,m.includes)(u,n.guid)){const o=t[n.guid];(0,m.isEqual)(o.propertiesByName,n.data||{})||i.push({guid:n.guid,data:n.data}),n.children&&e({guid:n.guid,data:n.children})}return i},[]);r.push(...f)}(e),n.length&&i.push(Pe({guids:n})),o.length&&i.push(ke({payload:o})),r.length&&i.push(Re({payload:r})),i}))}processAddComponentPayload(e,t,i,n,o){const r=this.rxViewComponentRegistryService.get(e.type),a=t.find(t=>t.componentModel.guid===e.parentGuid),s=o[e.parentGuid],l=a&&!a.componentModel.layout||s&&!s.layout,c={guid:e.guid||this.rxGuidService.generate(),type:e.type,parentGuid:e.parentGuid,propertiesByName:this.rxViewDesignerStateHelperService.getInitialComponentProperties(e.propertiesByName,r),permissions:this.rxViewDesignerStateHelperService.getDefaultComponentPermissions(r)};this.rxViewComponentRegistryService.isDataComponentDescriptor(r)||l?(c.resourceType=r.isContainerComponent?p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,i.push({componentModel:c})):(c.resourceType=r.outlets||r.isContainerComponent?p.RX_VIEW_DEFINITION.resourceTypes.containerViewComponent:p.RX_VIEW_DEFINITION.resourceTypes.viewComponent,r.outlets&&(c.layout=p.RxViewLayout.getEmptyViewLayoutForOutletNames(r.outlets)),t.push({componentModel:c,insertIndex:e.insertIndex,columnIndex:e.columnIndex||0,outletName:e.outletName||p.RX_VIEW_DEFINITION.defaultOutletName}),e.selectComponent&&n.push(c.guid)),(0,m.forEach)(e.children,e=>{this.processAddComponentPayload(Object.assign(Object.assign({},e),{parentGuid:c.guid}),t,i,n,o)})}}ji.\u0275fac=function(e){return new(e||ji)(n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](At),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](x.Store),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](Oi),n["\u0275\u0275inject"](ki),n["\u0275\u0275inject"](be))},ji.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ji,factory:ji.\u0275fac}),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"initializeComponentModel$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"registerComponentsValidation$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"onComponentsRemoved$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],ji.prototype,"unregisterAllComponentsValidation$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"insertComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"addNewComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"removeComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],ji.prototype,"setChildren$",void 0);class Pi{constructor(e,t,i,n,o,r,a,s,l,c,d,p,u,g,x,y,b,C,S,w,I,_,D,R){this.actions$=e,this.store$=t,this.rxBundleCacheService=i,this.rxDefinitionNameService=n,this.rxDefinitionUpdateService=o,this.rxGlobalCacheService=r,this.rxJsonParserService=a,this.rxViewComponentRegistryService=s,this.rxViewActionRegistryService=l,this.rxViewDefinitionService=c,this.viewDesignerModels=d,this.rxOldViewLayoutAdapterService=p,this.rxViewDefinitionParserService=u,this.rxLogService=g,this.rxModalService=x,this.errorHandler=y,this.rxUtilityModalsService=b,this.rxDefinitionAdapterRegistryService=C,this.rxViewDesignerInspectorService=S,this.rxViewDefinitionGeneratorService=w,this.rxViewDesignerStateHelperService=I,this.rxViewActionDefinitionAdapterRegistryService=_,this.rxGuidService=D,this.rxViewDataDictionaryStoreService=R,this.initViewDesigner$=this.actions$.pipe((0,v.ofType)(it),(0,f.switchMap)(({payload:e})=>{const{viewDefinitionName:t,layoutTemplate:i}=e;return this.clearStorages(),[Ze(),ze({viewDefinitionName:t,layoutTemplate:i})]})),this.destroyViewDesigner$=this.actions$.pipe((0,v.ofType)(nt),(0,f.tap)(()=>this.clearStorages())),this.loadFriendlyBundleName$=this.actions$.pipe((0,v.ofType)(Ze),(0,f.switchMap)(()=>this.rxGlobalCacheService.getBundleDescriptor(this.rxBundleCacheService.bundleId)),(0,f.switchMap)(e=>{let t;return t=e?(0,h.of)(Ue({friendlyBundleName:e.friendlyName})):(0,h.throwError)(`Bundle "${this.rxBundleCacheService.bundleId}" not found`),t.pipe((0,f.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(qe({payload:e})))))})),this.loadViewDefinition$=this.actions$.pipe((0,v.ofType)(ze),(0,f.switchMap)(({viewDefinitionName:e,layoutTemplate:t})=>(e?this.rxViewDefinitionService.get(e):this.rxViewDefinitionService.getNew(t)).pipe((0,f.map)(e=>Be({viewDefinition:e})),(0,f.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)($e())))))),this.viewDefinitionLoadSuccess$=this.actions$.pipe((0,v.ofType)(Be),(0,f.withLatestFrom)(this.store$.select(at)),(0,f.mergeMap)(([e,t])=>t?this.getActionsToUpdateExistingViewModels(e.viewDefinition):this.getActionsToInitializeViewModels(e.viewDefinition))),this.selectViewComponent$=this.actions$.pipe((0,v.ofType)(Fe),(0,f.withLatestFrom)(this.store$.select(at),this.store$.select(It)),(0,f.mergeMap)(([e,t,i])=>{const n=t.guid===e.guid?0:1;return n!==i?[Qe({tabId:n})]:[]})),this.generateViewDefinition$=this.actions$.pipe((0,v.ofType)(et),(0,f.withLatestFrom)(this.store$.select(at),this.store$.select(lt),(e,t,i)=>({viewModel:t,componentModels:i})),(0,f.map)(({viewModel:e,componentModels:t})=>this.rxViewDefinitionGeneratorService.generate(e,t)),(0,f.map)(e=>Ge({payload:e}))),this.saveViewDefinition$=this.actions$.pipe((0,v.ofType)(Ke),(0,f.withLatestFrom)(this.store$.select(at),this.store$.select(lt),(e,t,i)=>({viewModel:t,components:i})),(0,f.switchMap)(({viewModel:e,components:t})=>{const i=this.rxViewDefinitionGeneratorService.generate(e,t,!0);return(i.lastUpdateTime?this.rxDefinitionUpdateService.execute(this.rxViewDefinitionService.update.bind(this.rxViewDefinitionService,i.name,i)):this.rxViewDefinitionService.create(i)).pipe((0,f.switchMap)(e=>{const t=decodeURIComponent((0,m.last)(null==e?void 0:e.headers.get("Location").split("/"))||"")||i.name;return[Ve({viewDefinitionName:t}),i.lastUpdateTime?ze({viewDefinitionName:i.name}):null].filter(Boolean)}),(0,f.catchError)(e=>(this.errorHandler.handleError(e),(0,h.of)(Le()))))})),this.clearCanvas$=this.actions$.pipe((0,v.ofType)(tt),(0,f.withLatestFrom)(this.store$.select(at)),(0,f.map)(([e,t])=>Pe({guids:ve(t)}))),this.runPreview$=this.actions$.pipe((0,v.ofType)(Je),(0,f.withLatestFrom)(this.store$.select(at),(e,t)=>t),(0,f.switchMap)(e=>e.targetViewDefinitionName?this.rxViewDefinitionService.get(e.targetViewDefinitionName):(0,h.of)(e)),(0,f.tap)(e=>{const t=encodeURIComponent(e.name);let i=`/helix/index.html#/${this.rxBundleCacheService.bundleId}/preview/${t}`;e.inputParams.length?this.rxModalService.openModal({title:"Enter view parameter values",content:si,data:{inputParams:(0,m.map)(e.inputParams,"name")},size:"sm"}).catch(h.noop).then(e=>{const t=(0,m.map)(e,(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`);i+=`?${t.join("&")}`,e&&window.open(i)}):window.open(i)}))}clearStorages(){this.viewDesignerModels.clear(),this.rxViewDesignerInspectorService.clear(),this.rxViewDataDictionaryStoreService.clear()}convertViewDefinitionToModel(e){const t=Boolean(e.lastUpdateTime)&&!(0,m.includes)(e.layout,'"outlets"');this.rxViewDefinitionParserService.getComponents(e).forEach(e=>this.rxOldViewLayoutAdapterService.convertLayout(e));const i=(0,m.omit)(e,["componentDefinitions","layout"]),n=this.rxJsonParserService.tryParseJson(e.layout);return i.layout=p.RxViewLayout.getEmptyViewLayoutForOutlets(n.outlets),i.displayName=decodeURIComponent(this.rxDefinitionNameService.getDisplayName(i.name)),i.layoutName=p.RxViewLayout.getLayoutName(i.layout),i.isAngularJsView=t,i}convertComponentDefinitionToModel(e,t,i){const n=(0,m.omit)(e,["componentDefinitions","layout"]);if(n.parentGuid=t,this.processComponentDefinitionProperties(n,i),this.isComponentHasLayout(e)){const t=this.rxJsonParserService.tryParseJson(e.layout);n.layout=p.RxViewLayout.getEmptyViewLayoutForOutlets(t.outlets)}return n}processComponentDefinitionProperties(e,t){e.propertiesByName=(0,m.transform)(e.propertiesByName,(e,i,n)=>{const o=(0,m.find)(t.properties||t.parameters,{name:n});if(o&&o.designType)if(!0==(o.designType===p.ViewComponentPropertyType.String))e[n]=i;else e[n]=this.rxJsonParserService.tryParseJson(i,i);else e[n]=i;return e},{}),this.rxGuidService.isGuid(e.name)||(e.propertiesByName.name=e.name),"type"in t&&(e.propertiesByName=this.rxViewDesignerStateHelperService.getInitialComponentProperties(e.propertiesByName,t))}traverseByComponents(e,t){const i=this.rxJsonParserService.tryParseJson(e.layout),n=e.componentDefinitions;i&&i.outlets.forEach(i=>{i.columns.forEach((o,r)=>{o.children.forEach((a,s)=>{const l=n.find(e=>e.guid===a);l&&(t(l,e.guid,i.name,s,r,o.span),l.componentDefinitions&&this.traverseByComponents(l,t))})})}),n.filter(e=>{const t=this.rxViewComponentRegistryService.get(e.type);return(null==t?void 0:t.isDataComponent)||(null==t?void 0:t.isPageComponent)}).forEach((i,n)=>{t(i,e.guid,null,n,0,0),i.componentDefinitions&&this.traverseByComponents(i,t)})}isComponentHasLayout(e){return Boolean(e.layout)}getActionsToInitializeViewModels(e){const t=(0,m.cloneDeep)(e),i=this.convertViewDefinitionToModel(t),n=[],o=[];return this.traverseByComponents(t,(e,i,r,a,s,l)=>{const c=this.rxViewComponentRegistryService.get(e.type);if(c&&!c.isPageComponent){const d=e.type===p.RxViewComponentType.Action?this.rxViewActionDefinitionAdapterRegistryService.getDesignAdapter(e.propertiesByName.name):this.rxDefinitionAdapterRegistryService.getDesignAdapter(e.type);let u;null==d||d.adaptDefinition(e,t),e.type===p.RxViewComponentType.Action&&(u=this.rxViewActionRegistryService.get(e.propertiesByName.name),u||(u=this.rxViewActionRegistryService.registerUnknownAction(e.propertiesByName.name)));const m=this.convertComponentDefinitionToModel(e,i,u||c);this.rxViewComponentRegistryService.isDataComponentDescriptor(c)||null===r?o.push({componentModel:m}):n.push({insertIndex:a,columnIndex:s,componentModel:m,outletName:r,columnSpan:l})}else if(this.rxViewDefinitionService.isPageView(t)){let t=this.rxViewComponentRegistryService.get(e.type);t||(t={type:e.type,name:p.RX_VIEW_DEFINITION.unknownPageComponent.name});const n=this.convertComponentDefinitionToModel(e,i,t);o.push({componentModel:n})}else{const t=Object.assign(Object.assign({},this.rxViewComponentRegistryService.get(p.RxViewComponentType.Unknown)),{type:e.type});this.rxViewComponentRegistryService.registerSync(t);const o=this.convertComponentDefinitionToModel(e,i,t);n.push({insertIndex:a,columnIndex:s,componentModel:o,outletName:r,columnSpan:l}),this.rxLogService.warning(`Cannot initialize view component. View Component Descriptor for ${e.type} not found.`)}}),[Ye({payload:i}),n.length?we({payload:n}):null,o.length?Ie({payload:o}):null,n.length?null:Xe()].filter(Boolean)}getActionsToUpdateExistingViewModels(e){const t=(0,m.cloneDeep)(e),i=this.rxViewDefinitionParserService.getComponents(t,!0).map(({componentDefinition:e})=>({guid:e.guid,partialModel:(0,m.omit)(e,["layout","propertiesByName","componentDefinitions"])}));return[We({payload:(0,m.omit)(t,["layout","componentDefinitions"])}),i.length?je({payload:i}):null,He()].filter(Boolean)}}function Ni(){return null}Pi.\u0275fac=function(e){return new(e||Pi)(n["\u0275\u0275inject"](v.Actions),n["\u0275\u0275inject"](x.Store),n["\u0275\u0275inject"](l.RxBundleCacheService),n["\u0275\u0275inject"](l.RxDefinitionNameService),n["\u0275\u0275inject"](l.RxDefinitionUpdateService),n["\u0275\u0275inject"](l.RxGlobalCacheService),n["\u0275\u0275inject"](g.RxJsonParserService),n["\u0275\u0275inject"](p.RxViewComponentRegistryService),n["\u0275\u0275inject"](p.RxViewActionRegistryService),n["\u0275\u0275inject"](p.RxViewDefinitionService),n["\u0275\u0275inject"](At),n["\u0275\u0275inject"](p.RxOldViewLayoutAdapterService),n["\u0275\u0275inject"](p.RxViewDefinitionParserService),n["\u0275\u0275inject"](l.RxLogService),n["\u0275\u0275inject"](d.RxModalService),n["\u0275\u0275inject"](n.ErrorHandler),n["\u0275\u0275inject"](d.RxUtilityModalsService),n["\u0275\u0275inject"](l.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](Ce),n["\u0275\u0275inject"](Tt),n["\u0275\u0275inject"](ki),n["\u0275\u0275inject"](p.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](g.RxGuidService),n["\u0275\u0275inject"](be))},Pi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Pi,factory:Pi.\u0275fac}),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"initViewDesigner$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],Pi.prototype,"destroyViewDesigner$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"loadFriendlyBundleName$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"loadViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"viewDefinitionLoadSuccess$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"selectViewComponent$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"generateViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"saveViewDefinition$",void 0),(0,I.__decorate)([(0,v.Effect)(),(0,I.__metadata)("design:type",Object)],Pi.prototype,"clearCanvas$",void 0),(0,I.__decorate)([(0,v.Effect)({dispatch:!1}),(0,I.__metadata)("design:type",Object)],Pi.prototype,"runPreview$",void 0);const Vi=(0,x.createReducer)(null,(0,x.on)(it,Ni),(0,x.on)(nt,Ni),(0,x.on)(Ge,(e,{payload:t})=>t));function Li(e,t){return Vi(e,t)}function Bi(){return{}}const $i=(0,x.createReducer)({},(0,x.on)(it,Bi),(0,x.on)(nt,Bi),(0,x.on)(Te,(e,{guid:t,label:i})=>Object.assign(Object.assign({},e),{[t]:i})),(0,x.on)(Se,(e,{guids:t})=>{let i=e;return t.some(t=>(0,m.has)(e,t))&&(i=(0,m.omit)(e,t)),i}));function Gi(e,t){return $i(e,t)}function zi(){return{viewDesignModel:null,viewComponentDesignModels:{}}}const Ui=(0,x.createReducer)({viewDesignModel:null,viewComponentDesignModels:{}},(0,x.on)(it,zi),(0,x.on)(nt,zi),(0,x.on)(we,(e,{payload:t})=>{const i=Object.assign({},e);return t.forEach(e=>function(e,t){if(e.viewComponentDesignModels=Object.assign(Object.assign({},e.viewComponentDesignModels),{[t.componentModel.guid]:t.componentModel}),t.componentModel.parentGuid===e.viewDesignModel.guid)e.viewDesignModel=fe(e.viewDesignModel,t.componentModel.guid,t.outletName,t.insertIndex,t.columnIndex,t.columnSpan);else{const i=e.viewComponentDesignModels[t.componentModel.parentGuid];if(i){const n=fe(i,t.componentModel.guid,t.outletName,t.insertIndex,t.columnIndex,t.columnSpan);e.viewComponentDesignModels[n.guid]=n}}}(i,e)),i}),(0,x.on)(Ie,(e,{payload:t})=>{const i=Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign({},e.viewComponentDesignModels)});return t.forEach(e=>{const t=i.viewComponentDesignModels[e.componentModel.parentGuid];if(t){i.viewComponentDesignModels[e.componentModel.guid]=e.componentModel;const n=Object.assign(Object.assign({},t),{childDataComponentGuids:[...t.childDataComponentGuids||[],e.componentModel.guid]});i.viewComponentDesignModels[n.guid]=n}}),i}),(0,x.on)(Me,(e,t)=>{const i=Object.assign({},e);if(he(t.guid,e.viewDesignModel))i.viewDesignModel=ge(t.guid,i.viewDesignModel);else{let e=ue(t.guid,i.viewComponentDesignModels);e=ge(t.guid,e),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[e.guid]:e})}if(t.parentGuid===i.viewDesignModel.guid)i.viewDesignModel=fe(i.viewDesignModel,t.guid,t.outletName,t.insertIndex,t.columnIndex);else{let e=i.viewComponentDesignModels[t.parentGuid];e=fe(e,t.guid,t.outletName,t.insertIndex,t.columnIndex),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[e.guid]:e})}return i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[t.guid]:Object.assign(Object.assign({},i.viewComponentDesignModels[t.guid]),{parentGuid:t.parentGuid})}),i}),(0,x.on)(Se,(e,{guids:t})=>{const i=Object.assign(Object.assign({},e),{viewComponentDesignModels:(0,m.omit)(e.viewComponentDesignModels,t)});return t.forEach(t=>{if(he(t,e.viewDesignModel))i.viewDesignModel=ge(t,i.viewDesignModel);else{let n=ue(t,e.viewComponentDesignModels);n&&i.viewComponentDesignModels[n.guid]&&(n=ge(t,i.viewComponentDesignModels[n.guid]),i.viewComponentDesignModels=Object.assign(Object.assign({},i.viewComponentDesignModels),{[n.guid]:n}))}}),i}),(0,x.on)(Ee,(e,{guid:t,cols:i})=>{const n=e.viewComponentDesignModels[t],o=n.layout.outlets.find(e=>e.name===p.RX_VIEW_DEFINITION.defaultOutletName),r=(0,m.cloneDeep)(o.columns),a=r.splice(i.length);i.forEach((e,t)=>{r[t]?r[t].span=e:r[t]={span:e,children:[]}});const s=a.reduce((e,t)=>(e.push(...t.children),e),[]);if(s.length){const e=(0,m.last)(r);e.children=e.children.concat(s)}return Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),{[t]:Object.assign(Object.assign({},n),{layout:Object.assign(Object.assign({},n.layout),{outlets:n.layout.outlets.map(e=>Object.assign(Object.assign({},e),{columns:r}))})})})})}),(0,x.on)(Ye,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewDesignModel:t})),(0,x.on)(We,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewDesignModel:Object.assign(Object.assign({},e.viewDesignModel),t)})),(0,x.on)(Ve,e=>e.viewDesignModel.isAngularJsView?Object.assign(Object.assign({},e),{viewDesignModel:Object.assign(Object.assign({},e.viewDesignModel),{isAngularJsView:!1})}):e),(0,x.on)(Re,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),t.reduce((t,{guid:i,data:n})=>(t[i]=Object.assign(Object.assign({},e.viewComponentDesignModels[i]),{propertiesByName:n}),t),{}))})),(0,x.on)(je,(e,{payload:t})=>Object.assign(Object.assign({},e),{viewComponentDesignModels:Object.assign(Object.assign({},e.viewComponentDesignModels),t.filter(t=>e.viewComponentDesignModels[t.guid]).reduce((t,{guid:i,partialModel:n})=>(t[i]=Object.assign(Object.assign(Object.assign({},e.viewComponentDesignModels[i]),n),{propertiesByName:Object.assign(Object.assign({},e.viewComponentDesignModels[i].propertiesByName),n.propertiesByName)}),t),{}))})));function qi(e,t){return Ui(e,t)}function Xi(){return{selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null}}const Hi=(0,x.createReducer)({selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null},(0,x.on)(it,(e,{payload:t})=>Object.assign(Object.assign({},{selectedComponentGuid:null,selectedInspectorTabId:0,currentBundleId:null,isViewDefinitionLoading:!1,areViewModelsReady:!1,friendlyBundleName:null}),{currentBundleId:t.bundleId})),(0,x.on)(nt,Xi),(0,x.on)(Fe,(e,{guid:t})=>Object.assign(Object.assign({},e),{selectedComponentGuid:t})),(0,x.on)(Qe,(e,{tabId:t})=>Object.assign(Object.assign({},e),{selectedInspectorTabId:t})),(0,x.on)(Se,(e,{guids:t})=>t.includes(e.selectedComponentGuid)?Object.assign(Object.assign({},e),{selectedComponentGuid:null}):Object.assign({},e)),(0,x.on)(Ue,(e,{friendlyBundleName:t})=>Object.assign(Object.assign({},e),{friendlyBundleName:t})),(0,x.on)(qe,e=>Object.assign(Object.assign({},e),{friendlyBundleName:null})),(0,x.on)(Ke,ze,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!0,areViewModelsReady:!1})),(0,x.on)(Ve,Be,$e,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!1})),(0,x.on)(Le,e=>Object.assign(Object.assign({},e),{isViewDefinitionLoading:!1,areViewModelsReady:!0})),(0,x.on)(He,Xe,e=>Object.assign(Object.assign({},e),{areViewModelsReady:!0})),(0,x.on)(we,e=>Object.assign(Object.assign({},e),{areViewModelsReady:!1})));function Wi(e,t){return Hi(e,t)}function Yi(){return{issues:{},expressionIssues:{}}}const Qi=(0,x.createReducer)({issues:{},expressionIssues:{}},(0,x.on)(it,nt,Yi),(0,x.on)(_e,(e,{guid:t,issues:i})=>{if(i.length)return Object.assign(Object.assign({},e),{issues:Object.assign(Object.assign({},e.issues),{[t]:i})});{let i=e;return(0,m.has)(i.issues,t)&&(i=Object.assign(Object.assign({},e),{issues:(0,m.omit)(e.issues,[t])})),i}}),(0,x.on)(De,(e,{issues:t})=>(0,m.isEmpty)(t)?e:Object.assign(Object.assign({},e),{expressionIssues:Object.assign(Object.assign({},(0,m.omit)(e.expressionIssues,Object.keys(t))),(0,m.omitBy)(t,m.isEmpty))})),(0,x.on)(Se,(e,{guids:t})=>{let i=e;return t.some(t=>(0,m.has)(e.issues,t))&&(i=Object.assign(Object.assign({},e),{issues:(0,m.omit)(e.issues,t)})),t.some(t=>(0,m.has)(e.expressionIssues,t))&&(i=Object.assign(Object.assign({},e),{expressionIssues:(0,m.omit)(e.expressionIssues,t)})),i}));function Ki(e,t){return Qi(e,t)}class Ji{}Ji.\u0275fac=function(e){return new(e||Ji)},Ji.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ji,declarations:[ni],imports:[b.CommonModule,S.AdaptCodeViewerModule,S.AdaptTabsModule,d.RxBladeModule,c.RxFormBuilderModule,d.RxValidationIssuesModule,d.RxJsonViewerModule,ai,oi,ri,c.FormControlsModule,c.RxPermissionEditorModule,c.RxRevertCustomizationModule,p.ViewActionDesignModule,li,c.RxDesignerHeaderModule,S.AdaptAlertModule,c.RxInspectorModule,Ci,Bt,u.TranslateModule,x.StoreFeatureModule,v.EffectsFeatureModule],exports:[ni]}),Ji.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[b.CommonModule,S.AdaptCodeViewerModule,S.AdaptTabsModule.forRoot(),d.RxBladeModule,c.RxFormBuilderModule,d.RxValidationIssuesModule,d.RxJsonViewerModule,ai,oi,ri,c.FormControlsModule,c.RxPermissionEditorModule,c.RxRevertCustomizationModule,p.ViewActionDesignModule,li,c.RxDesignerHeaderModule,S.AdaptAlertModule,c.RxInspectorModule,Ci,Bt,u.TranslateModule,x.StoreModule.forFeature("viewDesigner",{model:qi,viewDefinition:Li,validation:Ki,ui:Wi,breadcrumbs:Gi}),v.EffectsModule.forFeature([Pi,ji])]]})},"./node_modules/@helix/platform/fesm2015/helix-platform-view-runtime.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{BaseViewComponent:()=>ae,RX_RUNTIME_VIEW:()=>de,RuntimeLayoutItem:()=>z,RuntimeLayoutOutlet:()=>G,RuntimeLayoutOutletColumn:()=>$,RuntimeViewCanvasComponent:()=>oe,RuntimeViewCanvasItemComponent:()=>X,RuntimeViewCanvasItemContainerComponent:()=>H,RuntimeViewCanvasItemService:()=>q,RuntimeViewCanvasModule:()=>le,RuntimeViewCanvasOutletComponent:()=>se,RuntimeViewComponent:()=>re,RuntimeViewModalComponent:()=>ce,RuntimeViewModel:()=>ie,RuntimeViewModelApi:()=>Q,RuntimeViewModule:()=>pe,RuntimeViewRootComponent:()=>W,RxRuntimeViewRegistryService:()=>ne,RxRuntimeViewUtilsService:()=>ee,VIEW_COMPONENT_DEFAULT_EVENT_NAME:()=>Z,ViewComponentEventManager:()=>J});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("rxjs"),r=i("./node_modules/rxjs/_esm2015/operators/index.js"),a=i("./node_modules/@helix/platform/fesm2015/helix-platform-record-api.js"),s=i("./node_modules/@helix/platform/fesm2015/helix-platform-view-api.js"),l=i("./node_modules/@helix/platform/fesm2015/helix-platform-utils.js"),c=i("lodash"),d=i("./node_modules/@angular/common/fesm2015/common.js"),p=i("./node_modules/@helix/platform/fesm2015/helix-platform-shared-api.js"),u=i("./node_modules/@helix/platform/fesm2015/helix-platform-ui-kit.js"),m=i("./node_modules/@helix/platform/fesm2015/helix-platform-association-api.js"),h=i("./node_modules/@helix/platform/fesm2015/helix-platform-process-api.js"),f=i("./node_modules/@angular/forms/fesm2015/forms.js"),g=i("./node_modules/@ngx-translate/core/fesm2015/ngx-translate-core.js"),v=i("./node_modules/@bmc-ux/adapt-angular/fesm2015/bmc-ux-adapt-angular.js");const x=["container"];function y(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}const b=function(e){return{$implicit:e}};function C(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275template"](1,y,1,0,"ng-container",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275nextContext"](2);const i=n["\u0275\u0275reference"](3);n["\u0275\u0275property"]("ngClass",e.cssClass?e.cssClass:e.span?"col-"+e.span:"col"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",i)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](3,b,e.children))}}function S(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275elementStart"](1,"div",2),n["\u0275\u0275template"](2,C,2,5,"div",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.columns)}}function w(e,t){1&e&&n["\u0275\u0275elementContainer"](0)}function I(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,w,1,0,"ng-container",5),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,b,e.columns[0].children))}}function _(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",7,8),2&e){const e=t.$implicit;n["\u0275\u0275property"]("layout",e)}}function D(e,t){if(1&e&&n["\u0275\u0275template"](0,_,2,1,"rx-runtime-view-canvas-item",6),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("ngForOf",e)("ngForTrackBy",i.trackByFn)}}const R=function(e,t,i){return[e,t,i]},A=function(e,t){return{"content-outlet":e,"outlet-padding":t}};function T(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item-container",1),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("hidden",i.isHidden(e))("columns",e.columns)("outlet",e)("ngClass",n["\u0275\u0275pureFunction2"](8,A,e.name===i.defaultOutletName,n["\u0275\u0275pureFunction3"](4,R,i.layoutRole.Header,i.layoutRole.Footer,i.defaultOutletName).includes(e.name)))}}function F(e,t){if(1&e&&n["\u0275\u0275element"](0,"rx-runtime-view-canvas-item",1),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.layout)}}function E(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"rx-runtime-view-canvas",1),n["\u0275\u0275listener"]("componentPropertyChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().runtimeViewModel.onViewComponentPropertyChanged(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("layout",e.runtimeViewLayoutService.layout)}}function M(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](3).closeModal()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("aria-label",e.closeLabel)}}function O(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275elementStart"](1,"span",9),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,M,1,1,"button",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancellable)}}function k(e,t){if(1&e&&(n["\u0275\u0275elementContainerStart"](0),n["\u0275\u0275template"](1,O,4,2,"div",7),n["\u0275\u0275elementContainerEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](),t=n["\u0275\u0275reference"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isBlade)("ngIfElse",t)}}function j(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"button",11),n["\u0275\u0275listener"]("click",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).closeModal()}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("aria-label",e.closeLabel)}}function P(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",12),n["\u0275\u0275elementStart"](1,"h5",13),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,j,1,1,"button",10),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.isCancellable)}}const N=function(e){return{content:e,type:"inline",variant:"info"}};function V(e,t){if(1&e&&n["\u0275\u0275element"](0,"adapt-alert",14),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("config",n["\u0275\u0275pureFunction1"](1,N,e.notification))}}const L=function(e,t){return{"modal-body p-0":e,"dp-content":t}},B=function(e){return{busy:e,loaderType:"lineLoader",delay:250,backdrop:!1,message:null}};class ${constructor(){this.children=[]}}class G{constructor(){this.children=[],this.columns=[new $],this.height=null}}class z{constructor(e){this.outlets=[],this.parent=null,this.runtimeViewModelApi=null,Object.assign(this,{guid:e.guid,config:e.config,parent:e.parent,runtimeViewModelApi:e.runtimeViewModelApi,factory:e.factory}),e.outlets&&this.initializeOutlets(e.outlets)}initializeOutlets(e){e.forEach(e=>{const t=new G;t.name=e.name,t.height=e.hasOwnProperty("height")?e.height:null,this.outlets.push(t)})}addLayoutItem(e,t){const i=this.outlets.find(e=>e.name===t.parentOutlet.name),n=t.parentOutlet.columns[t.columnIndex].children.indexOf(e.guid);t.parentOutlet.columns.forEach((e,t)=>{i.columns[t]||(i.columns[t]=new $),e.cssClass&&(i.columns[t].cssClass=e.cssClass),e.span&&(i.columns[t].span=e.span)}),e&&(i.columns[t.columnIndex].children[n]=e)}}class U{constructor(){this.componentPropertyChangedSubject=new o.Subject,this.componentPropertyChanged$=this.componentPropertyChangedSubject.asObservable()}onViewComponentPropertyChanged(e){this.componentPropertyChangedSubject.next(e)}}U.\u0275fac=function(e){return new(e||U)},U.\u0275prov=n["\u0275\u0275defineInjectable"]({token:U,factory:U.\u0275fac});class q{constructor(e,t,i){this.injector=e,this.componentFactoryResolver=t,this.runtimeViewCanvasService=i,this.hasMargin=!0,this.hasAutoFill=!1,this.hasAutoScroll=!1,this.isHidden=!1,this.destroyed$=new o.ReplaySubject(1)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}registerOutlet(e,t,i){const n=this.layout.outlets.find(t=>t.name===e);n&&this.renderContainerComponent(t,n,i)}getChildren(e){return this.layout.outlets.find(t=>t.name===e).columns.map(e=>Object.assign(Object.assign({},e),{children:e.children.filter(Boolean).map(e=>(0,c.pick)(e,"config","guid","runtimeViewModelApi","factory","outlets"))}))}renderViewComponent(){var e,t,i,n;this.componentRef=this.container.createComponent(this.layout.factory,null,this.injector),this.componentInstance=this.componentRef.instance,this.componentInstance.guid=this.layout.guid,this.componentInstance.config=this.layout.config,this.componentInstance.runtimeViewModelApi=this.layout.runtimeViewModelApi,null===(e=this.componentInstance.propertyChanged)||void 0===e||e.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.runtimeViewCanvasService.onViewComponentPropertyChanged(e)}),null===(t=this.componentInstance.hidden)||void 0===t||t.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasMargin=!e,this.isHidden=e}),null===(i=this.componentInstance.autoScroll)||void 0===i||i.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasAutoScroll=e}),null===(n=this.componentInstance.autoFill)||void 0===n||n.pipe((0,r.skipWhile)(e=>!e),(0,r.distinctUntilChanged)(),(0,r.delay)(0),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.hasAutoFill=e})}renderContainerComponent(e,t,i){const n=i,o=e.createComponent(n);o.instance.columns=t.columns,o.instance.outlet=t}}q.\u0275fac=function(e){return new(e||q)(n["\u0275\u0275inject"](n.Injector),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](U))},q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:q,factory:q.\u0275fac});class X{constructor(e){this.runtimeViewCanvasItemService=e}get hasMargin(){return this.runtimeViewCanvasItemService.hasMargin}get hasAutoFill(){return this.runtimeViewCanvasItemService.hasAutoFill&&!this.runtimeViewCanvasItemService.isHidden}get hasAutoScroll(){return this.runtimeViewCanvasItemService.hasAutoScroll}ngOnChanges(e){this.runtimeViewCanvasItemService.container||(this.runtimeViewCanvasItemService.container=this.container),e.layout.currentValue&&(this.runtimeViewCanvasItemService.layout=e.layout.currentValue,e.layout.previousValue&&this.container.clear(),this.runtimeViewCanvasItemService.renderViewComponent())}registerOutlet(e,t){this.runtimeViewCanvasItemService.registerOutlet(e,t)}getChildren(e){return this.runtimeViewCanvasItemService.getChildren(e)}}X.\u0275fac=function(e){return new(e||X)(n["\u0275\u0275directiveInject"](q))},X.\u0275cmp=n["\u0275\u0275defineComponent"]({type:X,selectors:[["rx-runtime-view-canvas-item"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](x,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},hostVars:6,hostBindings:function(e,t){2&e&&n["\u0275\u0275classProp"]("rx-runtime-view-canvas-item-margin",t.hasMargin)("rx-runtime-view-canvas-item-auto-fill",t.hasAutoFill)("rx-runtime-view-canvas-item-auto-scroll",t.hasAutoScroll)},inputs:{layout:"layout"},features:[n["\u0275\u0275ProvidersFeature"]([q]),n["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class H{constructor(){this.columns=[]}get hostClass(){return this.outlet.height?`${this.outlet.height}px`:null}trackByFn(e,t){return(null==t?void 0:t.guid)||e}}H.\u0275fac=function(e){return new(e||H)},H.\u0275cmp=n["\u0275\u0275defineComponent"]({type:H,selectors:[["rx-runtime-view-canvas-item-container"]],hostVars:2,hostBindings:function(e,t){2&e&&n["\u0275\u0275styleProp"]("min-height",t.hostClass)},inputs:{columns:"columns",outlet:"outlet"},decls:4,vars:2,consts:[[4,"ngIf"],["itemTpl",""],[1,"row","rx-runtime-view-canvas-item-container-row"],["class","rx-runtime-view-canvas-item-container-column",3,"ngClass",4,"ngFor","ngForOf"],[1,"rx-runtime-view-canvas-item-container-column",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"layout",4,"ngFor","ngForOf","ngForTrackBy"],[3,"layout"],["item",""]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,S,3,1,"ng-container",0),n["\u0275\u0275template"](1,I,2,4,"ng-container",0),n["\u0275\u0275template"](2,D,1,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"])),2&e&&(n["\u0275\u0275property"]("ngIf",t.columns.length>1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",1===t.columns.length))},directives:[d.NgIf,d.NgForOf,d.NgClass,d.NgTemplateOutlet,X],styles:['[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}rx-runtime-view-canvas-item[_ngcontent-%COMP%]{display:block}  .rx-runtime-view-canvas-item-margin:not(:last-child){margin-bottom:1rem}.rx-runtime-view-canvas-item-auto-fill[_ngcontent-%COMP%], .rx-runtime-view-canvas-item-container-row[_ngcontent-%COMP%], .rx-runtime-view-canvas-item-container-column[_ngcontent-%COMP%]{height:100%}.rx-runtime-view-canvas-item-container-column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.rx-runtime-view-canvas-item-auto-scroll[_ngcontent-%COMP%]{overflow-y:auto}.rx-mb-sm[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 576px){.rx-mb-sm[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-sm[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-md[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 768px){.rx-mb-md[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-md[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-lg[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 992px){.rx-mb-lg[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-lg[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-xl[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 1200px){.rx-mb-xl[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-xl[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}.rx-mb-xxl[_ngcontent-%COMP%]{margin-bottom:1rem}@media (min-width: 1600px){.rx-mb-xxl[_ngcontent-%COMP%]{margin-bottom:0}}.rx-mb-xxl[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:0}']});class W{constructor(e){this.runtimeCanvasItemComponent=e,this.defaultOutletName=s.RX_VIEW_DEFINITION.defaultOutletName,this.layoutRole=s.ViewLayoutRole}isHidden(e){return e.name===s.ViewLayoutRole.Header&&0===e.columns[0].children.length}}W.\u0275fac=function(e){return new(e||W)(n["\u0275\u0275directiveInject"](X))},W.\u0275cmp=n["\u0275\u0275defineComponent"]({type:W,selectors:[["rx-runtime-view-root"]],decls:1,vars:1,consts:[[3,"hidden","columns","outlet","ngClass",4,"ngFor","ngForOf"],[3,"hidden","columns","outlet","ngClass"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,T,1,11,"rx-runtime-view-canvas-item-container",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.runtimeCanvasItemComponent.layout.outlets)},directives:[d.NgForOf,H,d.NgClass],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}rx-runtime-view-canvas-item-container[_ngcontent-%COMP%]{padding:0 1rem}.outlet-padding[_ngcontent-%COMP%]{padding:1rem}.content-outlet[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}"]});class Y{constructor(e,t,i,n,o,r,a){this.rxViewComponentRegistryService=e,this.viewDefinitionParserService=t,this.factoryResolver=i,this.tree=n,this.rxJsonParserService=o,this.rxLogService=r,this.rxOldViewLayoutAdapterService=a}clear(){this.layout=null}init(e,t){this.runtimeViewModel=e,this.runtimeViewModelApi=t,this.viewDefinitionParserService.getComponents(e.viewDefinition).forEach(this.processDefinition.bind(this))}processDefinition(e){if(this.rxOldViewLayoutAdapterService.convertLayout(e),e.parentComponentDefinition){const t=this.rxViewComponentRegistryService.get(e.componentDefinition.type);if(e.componentDefinition.type!==s.RxViewComponentType.Action&&t&&!this.runtimeViewModel.isDataViewComponentDefinition(t)){const i=JSON.parse(e.parentComponentDefinition.layout);let n=0;const o=i.outlets.find(t=>t.columns.find((t,i)=>{const o=t.children.includes(e.componentDefinition.guid);return o&&(n=i),o}));if(o){const i=this.runtimeViewModel.viewComponentStates.get(e.componentDefinition.guid).config$.asObservable(),r=this.getLayoutItem(e.parentComponentDefinition.guid);r.addLayoutItem(new z({guid:e.componentDefinition.guid,config:i,parent:r,runtimeViewModelApi:this.runtimeViewModelApi,outlets:t.outlets,factory:t.componentFactory}),{parentOutlet:o,columnIndex:n})}else{const t=e.componentDefinition;this.rxLogService.warning(`Cannot render view component. ${t.type} (${t.guid}) is not used in layout.`)}}}else this.initializeView(e.componentDefinition)}initializeView(e){const t=this.rxJsonParserService.tryParseJson(e.layout);this.layout=new z({guid:e.guid,parent:null,runtimeViewModelApi:this.runtimeViewModelApi,outlets:t.outlets,factory:this.factoryResolver.resolveComponentFactory(W)})}getLayoutItem(e){return this.tree.flattenBy(this.layout,e=>e.outlets.reduce((e,t)=>(t.columns.forEach(t=>{t.children.forEach(t=>{e.push(t)})}),e),[])).find(t=>t.guid===e)}}Y.\u0275fac=function(e){return new(e||Y)(n["\u0275\u0275inject"](s.RxViewComponentRegistryService),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](l.RxTreeService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](s.RxOldViewLayoutAdapterService))},Y.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Y,factory:Y.\u0275fac});class Q{clear(){this.runtimeViewModel=null}init(e){this.runtimeViewModel||(this.runtimeViewModel=e)}triggerViewActions(e,t){return this.runtimeViewModel.triggerViewActions(e,t)}cancel(e){return this.runtimeViewModel.cancel(e)}close(){return this.runtimeViewModel.close()}getViewInputParameters(){return this.runtimeViewModel.getViewInputParameters()}applyViewPreset(e,t,i){return this.runtimeViewModel.applyViewPreset(e,t,i)}deleteViewPreset(e){return this.runtimeViewModel.deleteViewPreset(e)}discardViewPresetChanges(e,t){return this.runtimeViewModel.discardViewPresetChanges(e,t)}saveViewPreset(e){return this.runtimeViewModel.saveViewPreset(e)}shareViewPreset(e){return this.runtimeViewModel.shareViewPreset(e)}}Q.\u0275fac=function(e){return new(e||Q)},Q.\u0275prov=n["\u0275\u0275defineInjectable"]({token:Q,factory:Q.\u0275fac});class K{constructor(e,t,i,n){this.propertyName=e,this.expression=t,this.rxExpressionEvaluatorService=i,this.customEvaluatorService=n}evaluate(e){return this.rxExpressionEvaluatorService.tryEvaluate(this.expression,e,this.customEvaluatorService)}hasDependency(e,t){return(0,c.includes)(this.expression,`${e}.${t}`)}hasTokens(){return(0,c.includes)(this.expression,"${view.")||this.hasKeywordTokens()}hasKeywordTokens(){return(0,c.includes)(this.expression,"${keywords.")}hasViewTokens(){return(0,c.includes)(this.expression,"${view.inputParams")||(0,c.includes)(this.expression,"${view.api")||this.hasViewIsValidToken()}hasViewIsValidToken(){return(0,c.includes)(this.expression,"${view.isValid}")}hasComponentTokens(){return(0,c.includes)(this.expression,"${view.components")}}class J{constructor(e,t,i,n){this.rxGlobalEventsService=e,this.rxLogService=t,this.rxViewActionService=i,this.errorHandler=n}executeActions(e,t){return new Promise((i,n)=>{let a;(0,o.from)(e).pipe((0,r.mergeScan)((e,i)=>(this.rxLogService.debug("ACTION STARTED: "+i.name),this.rxViewActionService.execute(i.name,i.parameters).pipe((0,r.map)(e=>t(i,e)),(0,r.take)(1))),null,1)).subscribe({next:e=>a=e,error:e=>{n(e),this.rxGlobalEventsService.viewActionsCompleted$.next(),(0,c.castArray)(e).forEach(e=>{(0,c.isString)(e)?this.rxLogService.warning(e):e&&this.errorHandler.handleError(e)})},complete:()=>{this.rxGlobalEventsService.viewActionsCompleted$.next(),i(a)}})})}}J.\u0275fac=function(e){return new(e||J)(n["\u0275\u0275inject"](p.RxGlobalEventsService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](s.RxViewActionService),n["\u0275\u0275inject"](n.ErrorHandler))},J.\u0275prov=n["\u0275\u0275defineInjectable"]({token:J,factory:J.\u0275fac,providedIn:"root"});const Z="default";class ee{constructor(e,t,i,n,o){this.rxViewDefinitionService=e,this.rxViewDefinitionParserService=t,this.rxDefinitionAdapterRegistryService=i,this.rxViewActionDefinitionAdapterRegistryService=n,this.rxViewDefinitionCacheService=o}isViewCancellable(e){return(0,c.isString)(e)?this.rxViewDefinitionCacheService.getViewDefinition(e).pipe((0,r.map)(e=>this.hasPageComponent(e)||this.hasViewCancellingAction(e))):(0,o.of)(this.hasPageComponent(e)||this.hasViewCancellingAction(e))}runAdaptersForComponents(e,t){const i=this.rxViewDefinitionParserService.getComponents(t||e),n=new RegExp(`\\\${view.components.${l.RX_GUID.baseGuidPattern}.`);e.viewComponentExpressions=(0,c.chain)(i).map(e=>(0,c.values)(e.componentDefinition.propertiesByName)).flatten().map(e=>(0,c.isObject)(e)?(0,c.values)(e):e).flatten().filter(c.isString).filter(e=>n.test(e)).value();const a=i.reduce((t,{componentDefinition:i})=>{const n=i.type===s.RxViewComponentType.Action?this.rxViewActionDefinitionAdapterRegistryService.getRuntimeAdapter(i.propertiesByName.name):this.rxDefinitionAdapterRegistryService.getRuntimeAdapter(i.type);if(n){const a=n.adaptDefinition(i,e);t.push(a?a.pipe((0,r.take)(1)):o.EMPTY)}return t},[]);return(0,c.isEmpty)(a)?[o.EMPTY]:a}hasViewCancellingAction(e){return Boolean(this.rxViewDefinitionParserService.findViewComponent(e,e=>e.type===s.RxViewComponentType.Action&&"rxCloseViewAction"===e.propertiesByName.name&&"true"===e.propertiesByName.actAsCancel))}hasPageComponent(e){var t;return(null===(t=(0,c.head)(e.componentDefinitions))||void 0===t?void 0:t.type)===s.RxViewComponentType.Page}}ee.\u0275fac=function(e){return new(e||ee)(n["\u0275\u0275inject"](s.RxViewDefinitionService),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](p.RxDefinitionAdapterRegistryService),n["\u0275\u0275inject"](s.RxViewActionDefinitionAdapterRegistryService),n["\u0275\u0275inject"](s.RxViewDefinitionCacheService))},ee.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ee,factory:ee.\u0275fac,providedIn:"root"});class te{constructor(e,t,i){this.rxObjectUtilsService=e,this.rxJsonParserService=t,this.rxDeviceDetectionService=i}preProcessViewDefinition(e){var t;null===(t=e.componentDefinitions)||void 0===t||t.forEach(e=>{this.expandProperties(e)})}postProcessViewDefinition(e){var t;null===(t=e.componentDefinitions)||void 0===t||t.forEach(t=>{this.filterComponentsForDevice(t,e)})}expandProperties(e){e.propertiesByName=this.rxObjectUtilsService.expandProperties(e.propertiesByName),e.componentDefinitions&&e.componentDefinitions.forEach(e=>{this.expandProperties(e)})}filterComponentsForDevice(e,t){var i;if((this.rxJsonParserService.tryParseJson(null===(i=e.propertiesByName)||void 0===i?void 0:i[s.RX_AVAILABLE_ON_DEVICES_PROP_NAME],s.RX_AVAILABLE_ON_DEVICES_ALL_VALUE)||s.RX_AVAILABLE_ON_DEVICES_ALL_VALUE).includes(this.rxDeviceDetectionService.currentDevice))"componentDefinitions"in e&&e.componentDefinitions.forEach(t=>{this.filterComponentsForDevice(t,e)});else if(t.componentDefinitions=t.componentDefinitions.filter(t=>t!==e),t.layout){const i=s.RxViewLayout.removeChildFromLayout(this.rxJsonParserService.tryParseJson(t.layout),e.guid);t.layout=JSON.stringify(i)}}}te.\u0275fac=function(e){return new(e||te)(n["\u0275\u0275inject"](l.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](s.RxDeviceDetectionService))},te.\u0275prov=n["\u0275\u0275defineInjectable"]({token:te,factory:te.\u0275fac,providedIn:"root"});class ie{constructor(e,t,i,n,r,a,s,l,c,d,p,u,m,h,f,g,v){this.rxBundleService=e,this.rxGlobalCacheService=t,this.rxViewComponentRegistryService=i,this.rxViewDefinitionAdapterService=n,this.rxViewDefinitionParserService=r,this.rxViewDefinitionService=a,this.rxRuntimeViewUtilsService=s,this.rxExpressionEvaluatorService=l,this.rxNotificationService=c,this.rxViewActionRegistryService=d,this.rxLogService=p,this.viewComponentEventManager=u,this.rxUtilityModalsService=m,this.rxViewDefinitionCacheService=h,this.rxObjectUtilsService=f,this.rxJsonParserService=g,this.rxCurrentUserService=v,this.api={save:this.save.bind(this),close:this.close.bind(this),cancel:this.cancel.bind(this),refresh:this.refresh.bind(this),canClose:this.canClose.bind(this),applyViewPreset:this.applyViewPreset.bind(this),deleteViewPreset:this.deleteViewPreset.bind(this),discardViewPresetChanges:this.discardViewPresetChanges.bind(this),saveViewPreset:this.saveViewPreset.bind(this)},this.saveSubject=new o.Subject,this.closeSubject=new o.Subject,this.cancelSubject=new o.Subject,this.save$=this.saveSubject.asObservable(),this.close$=this.closeSubject.asObservable(),this.cancel$=this.cancelSubject.asObservable(),this.viewComponentStates=new Map,this.evaluationData={view:{api:this.api,components:{},inputParams:{},isValid:!1},keywords:{user:this.rxCurrentUserService.getName(),newLine:"\n"}}}init(e){this.configuration=e,this.clear();return((0,c.isString)(e.viewDefinitionName)?this.rxViewDefinitionCacheService.getViewDefinition(e.viewDefinitionName):(0,o.of)(e.viewDefinitionName)).pipe((0,r.switchMap)(e=>{const t=this.rxViewDefinitionParserService.getComponents(e,!0).map(e=>e.componentDefinition.type===s.RxViewComponentType.Action?this.rxViewActionRegistryService.getActionOwnerBundleId(e.componentDefinition.propertiesByName.name):this.rxViewComponentRegistryService.getComponentOwnerBundleId(e.componentDefinition.type));return(0,o.merge)(...t).pipe((0,r.filter)(Boolean),(0,r.distinct)(),(0,r.reduce)((e,t)=>(e.push(t),e),[]),(0,r.switchMap)(t=>t.length?this.rxBundleService.loadBundles(t,!0).pipe((0,r.map)(()=>e)):(0,o.of)(e)),(0,r.switchMap)(e=>this.rxViewComponentRegistryService.resolveAsyncDescriptors().pipe((0,r.map)(()=>e))))}),(0,r.switchMap)(e=>this.processViewDefinition(e)))}clear(){this.viewComponentStates.clear(),this.evaluationData.view.components={},this.evaluationData.view.inputParams={}}save(e=!1){return this.callRuntimeComponentsApi("save",e).pipe((0,r.tap)({complete:()=>this.saveSubject.next()}))}close(){const e=this.evaluateViewOutputParams();return this.closeSubject.next(e),(0,o.of)(e)}cancel(e){return e?(this.cancelSubject.next(),o.EMPTY):this.isDirtyView().pipe((0,r.switchMap)(e=>e?this.rxUtilityModalsService.confirmUnsavedChanges():(0,o.of)(!0)),(0,r.tap)(e=>{e&&this.cancelSubject.next()}),(0,r.switchMap)(e=>e?o.EMPTY:(0,o.throwError)(null)))}refresh(){return this.callRuntimeComponentsApi("refresh")}canClose(){let e=!0;return this.isDirtyView().subscribe(t=>e=!t),e}applyViewPreset(e,t,i){return this.callRuntimeComponentsApi("applyViewPreset",e,t,i).pipe((0,r.switchMap)(()=>o.EMPTY))}deleteViewPreset(e){return this.callRuntimeComponentsApi("deleteViewPreset",e).pipe((0,r.switchMap)(()=>o.EMPTY))}discardViewPresetChanges(e,t){return this.callRuntimeComponentsApi("discardViewPresetChanges",e,t).pipe((0,r.switchMap)(()=>o.EMPTY))}saveViewPreset(e){return this.callRuntimeComponentsApi("saveViewPreset",e).pipe((0,r.switchMap)(()=>o.EMPTY))}shareViewPreset(e){return this.callRuntimeComponentsApi("shareViewPreset",e).pipe((0,r.defaultIfEmpty)([]),(0,r.map)(e=>e.filter(e=>Boolean(null==e?void 0:e.data)).reduce((e,t)=>(e[t.guid]=t.data,e),{})))}triggerViewActions(e,t){let i=Promise.resolve();const n=this.viewComponentStates.get(e);if(n){const o=n.eventStates[t];if(o){const t=o.map(e=>({guid:e.guid,name:e.name,parameters:e.config}));i=this.viewComponentEventManager.executeActions(t,(t,i)=>{this.onViewComponentActionOutputChanged(e,t.guid,i)})}else this.rxLogService.warning(`Cannot trigger view actions. View Action Trigger Event ${t} not found.`)}else this.rxLogService.warning(`Cannot trigger view actions. View Component ${e} not found.`);return i}onViewComponentPropertyChanged({guid:e,propertyName:t,newValue:i}){const n=this.viewComponentStates.get(e);n.publicState[t]=i,this.updateEvaluationData(n),"api"!==t&&(0,c.some)(n.componentDescriptor.properties,{name:t})&&(this.updateComponentConfigProperty(t,i,n),this.updateViewComponentConfig(n));const o=n.dependentViewComponentsMap.get(t);let r;o?r=o.map(e=>this.viewComponentStates.get(e)):(r=this.getDependentViewComponentStates(i=>i.hasDependency(e,t)),n.dependentViewComponentsMap.set(t,r.map(e=>e.guid))),r.forEach(i=>{this.evaluateDependentProperties(i,e,t)}),r.map(e=>e.isDataViewComponent?this.getParentViewComponent(e):e).forEach(e=>{this.updateViewComponentConfig(e)}),"isValid"===t&&this.triggerViewValidation(i)}isDataViewComponentDefinition(e){return void 0!==e.configPropertyName}getViewInputParameters(){return this.configuration.inputParams}isDirtyView(){const e=new o.ReplaySubject(1);let t=!1;return this.isUserInteractionDetected?this.callRuntimeComponentsApi("isDirty").pipe((0,r.tap)(e=>t=e.some(({data:e})=>e))).subscribe({complete:()=>e.next(t)}):e.next(t),e.asObservable().pipe((0,r.take)(1))}triggerViewValidation(e){if(e&&(e=Array.from(this.viewComponentStates.values()).filter(e=>(0,c.has)(e.publicState,"isValid")).every(e=>e.publicState.isValid)),this.evaluationData.view.isValid!==e){let t;this.evaluationData.view.isValid=e,this.dependentOnViewIsValidPropViewComponentGuids?t=this.dependentOnViewIsValidPropViewComponentGuids.map(e=>this.viewComponentStates.get(e)):(t=this.getDependentViewComponentStates(e=>e.hasViewIsValidToken()),this.dependentOnViewIsValidPropViewComponentGuids=t.map(e=>e.guid)),t.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasViewIsValidToken())}),o.asyncScheduler.schedule(()=>{t.forEach(this.updateViewComponentConfig.bind(this))})}}getParentViewComponent(e){let t=e;for(;t.isDataViewComponent;)t=this.viewComponentStates.get(t.parentViewComponentGuid);return t}getDependentViewComponentStates(e){return Array.from(this.viewComponentStates.values()).filter(t=>{const i=(0,c.some)(t.expressions,e),n=(0,c.some)(t.eventStates,t=>(0,c.some)(t,t=>(0,c.some)(t.expressions,e)));return i||n})}updateViewComponentConfig(e){e.config$.next(this.buildComponentConfig(e))}buildComponentConfig(e){const t=Object.assign({},e.configState);return this.buildComponentChildDataConfig(e,t),t}buildComponentChildDataConfig(e,t={}){const i=e.childViewComponentGuids.map(e=>this.viewComponentStates.get(e)).filter(e=>Boolean(e)).filter(e=>e.isDataViewComponent),n=(0,c.groupBy)(i,e=>e.configPropertyName);Object.keys(n).forEach(e=>{t[e]=n[e].map(e=>{const t=Object.assign({},e.configState);return this.buildComponentChildDataConfig(e,t),t})})}onViewComponentActionOutputChanged(e,t,i){const n=this.viewComponentStates.get(e);if(n){n.eventStates[Z].find(e=>e.guid===t).publicState.output=i,this.updateEvaluationData(n),this.evaluateDependentProperties(n,t,"output")}}evaluateViewOutputParams(){return this.viewDefinition.outputParams.reduce((e,t)=>(e[t.name]=this.rxExpressionEvaluatorService.tryEvaluate(t.source,this.evaluationData),e),{})}processViewDefinition(e){this.viewDefinition=this.rxObjectUtilsService.cloneDeep(e),this.rxViewDefinitionAdapterService.preProcessViewDefinition(this.viewDefinition);const t=this.rxRuntimeViewUtilsService.runAdaptersForComponents(this.viewDefinition);return(0,o.combineLatest)(t).pipe((0,r.switchMapTo)(o.EMPTY),(0,r.tap)({complete:()=>{this.rxViewDefinitionAdapterService.postProcessViewDefinition(this.viewDefinition),this.rxViewDefinitionParserService.getComponents(this.viewDefinition).forEach(this.processComponentDefinition.bind(this)),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasKeywordTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>!e.hasTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasViewTokens())}),this.viewComponentStates.forEach(e=>{this.evaluateComponentExpressions(e,e=>e.hasComponentTokens())}),this.viewComponentStates.forEach(e=>{this.updateViewComponentConfig(e)})}}))}processComponentDefinition(e){if(e.parentComponentDefinition){const t=e.componentDefinition,i=this.buildViewComponentState(e);i&&this.viewComponentStates.set(t.guid,i)}else{const t=(0,c.map)(e.componentDefinition.inputParams,"name"),i=(0,c.keys)(this.configuration.inputParams);i.length>0&&(0,c.every)(i,e=>/^\$[0-9]+\$$/.test(e))&&0===(0,c.intersection)(t,i).length?(0,c.forEach)(i,t=>{const i=Number(t.match(/^\$([0-9]+)\$$/)[1]),n=(0,c.get)(e.componentDefinition,`inputParams[${i}].name`);this.evaluationData.view.inputParams[n]=this.configuration.inputParams[t]}):(0,c.forEach)(t,e=>{this.evaluationData.view.inputParams[e]=this.configuration.inputParams[e]})}}buildViewComponentState(e){const t=e.componentDefinition,i=this.rxViewComponentRegistryService.get(t.type);if(i){const n={guid:t.guid,type:t.type,config$:new o.BehaviorSubject({}),expressions:[],eventStates:{[Z]:[]},configState:{},publicState:{},isDataViewComponent:!1,configPropertyName:null,parentViewComponentGuid:e.parentComponentDefinition.guid,childViewComponentGuids:[],dependentViewComponentsMap:new Map,componentDescriptor:i};return this.isDataViewComponentDefinition(i)&&(n.isDataViewComponent=!0,n.configPropertyName=i.configPropertyName),(0,c.forOwn)(t.propertiesByName,(e,t)=>{const o=(0,c.find)(i.properties,e=>t===e.name),r=o&&o.enableExpressionEvaluation;r&&n.expressions.push(new K(t,e,this.rxExpressionEvaluatorService,o.evaluatorService)),this.updateComponentConfigProperty(t,r?null:e,n)}),this.updateEvaluationData(n),this.isContainerComponentDefinition(t)&&(t.componentDefinitions.filter(e=>e.type===s.RxViewComponentType.Action).forEach(e=>{const t=this.buildViewComponentActionState(e);t&&n.eventStates[Z].push(t)}),n.eventStates[Z]=(0,c.sortBy)(n.eventStates[Z],"index"),n.childViewComponentGuids=t.componentDefinitions.filter(e=>e.type!==s.RxViewComponentType.Action).map(e=>e.guid)),n}t.type!==s.RxViewComponentType.Action&&this.rxLogService.warning(`Cannot initialize view component. View Component Descriptor for ${t.type} not found.`)}buildViewComponentActionState(e){const t=this.rxViewActionRegistryService.get(e.propertiesByName.name);if(t){const i={guid:e.guid,name:e.propertiesByName.name,index:(0,c.toNumber)(e.propertiesByName.index)||0,config:{},publicState:{},expressions:[]};return Object.keys(e.propertiesByName||{}).filter(e=>"name"!==e).map(n=>{const o=(t.parameters||[]).find(e=>n===e.name),r=o&&o.enableExpressionEvaluation;r&&this.initializeActionExpressionForProperty(i,o.evaluatorService,n,e.propertiesByName[n]),this.updateActionConfigProperty(n,r?null:e.propertiesByName[n],i)}),i}}initializeActionExpressionForProperty(e,t,i,n){(0,c.isObject)(n)?(0,c.forIn)(n,(n,o)=>{this.initializeActionExpressionForProperty(e,t,`${i}.${o}`,n)}):e.expressions.push(new K(i,n,this.rxExpressionEvaluatorService,t))}callRuntimeComponentsApi(e,...t){const i=new o.ReplaySubject(1),n=[],a=Array.from(this.viewComponentStates.values()).filter(t=>Boolean(t.publicState.api&&(0,c.isFunction)(t.publicState.api[e]))).map(i=>{let a=i.publicState.api[e].apply(null,t);return a&&a.then?a=(0,o.from)(a):a instanceof o.Observable||(a=(0,o.of)(a)),a.pipe((0,r.take)(1),(0,r.map)(e=>({guid:i.guid,data:e})),(0,r.tap)({error:e=>n.push(e)}),(0,r.catchError)(()=>o.EMPTY))});return(0,o.combineLatest)(a).subscribe({next:e=>i.next(e),complete:()=>(0,c.isEmpty)(n)?i.complete():i.error(n)}),i.asObservable()}evaluateComponentExpressions(e,t){e.expressions.filter(t).forEach(t=>{this.updateComponentConfigProperty(t.propertyName,this.evaluateExpression(t),e)}),this.updateEvaluationData(e),Object.keys(e.eventStates).forEach(i=>{e.eventStates[i].forEach(i=>{i.expressions.filter(t).forEach(t=>{this.updateActionConfigProperty(t.propertyName,this.evaluateExpression(t),i),this.updateEvaluationData(e)})})})}evaluateDependentProperties(e,t,i){this.evaluateComponentExpressions(e,e=>e.hasDependency(t,i))}evaluateExpression(e){let t;try{t=e.evaluate(this.evaluationData)}catch(i){t=null,this.rxNotificationService.addErrorMessage(i.message,"")}return t}updateComponentConfigProperty(e,t,i){const n=this.rxViewComponentRegistryService.get(i.type),o=(0,c.find)(n.properties,{name:e});i.configState[e]=this.processPropertyValue(t,o)}updateActionConfigProperty(e,t,i){const n=this.rxViewActionRegistryService.get(i.name);let o=(0,c.find)(n.parameters,{name:e});if(!o&&(0,c.includes)(e,".")){const t=e.split(".")[0];o=(0,c.find)(n.parameters,{name:t})}(0,c.set)(i.config,e,this.processPropertyValue(t,o))}updateEvaluationData(e){this.evaluationData.view.components[e.guid]=Object.assign(Object.assign({},e.configState),e.publicState),Object.keys(e.eventStates).forEach(t=>{e.eventStates[t].forEach(e=>{this.evaluationData.view.components[e.guid]=e.publicState})})}processPropertyValue(e,t){return t&&t.type&&!(0,c.isNil)(e)&&(t.type===s.ViewComponentPropertyType.Boolean?e=!(0,c.includes)(["0","false"],e)&&Boolean(e):t.type===s.ViewComponentPropertyType.Number?(e=Number(e),Number.isNaN(e)&&(e=null)):t.type===s.ViewComponentPropertyType.String?e=String(e):[s.ViewComponentPropertyType.Array,s.ViewComponentPropertyType.Object].includes(t.type)&&(e=this.rxJsonParserService.tryParseJson(e))),e}isContainerComponentDefinition(e){return void 0!==e.componentDefinitions}}ie.\u0275fac=function(e){return new(e||ie)(n["\u0275\u0275inject"](p.RxBundleService),n["\u0275\u0275inject"](p.RxGlobalCacheService),n["\u0275\u0275inject"](s.RxViewComponentRegistryService),n["\u0275\u0275inject"](te),n["\u0275\u0275inject"](s.RxViewDefinitionParserService),n["\u0275\u0275inject"](s.RxViewDefinitionService),n["\u0275\u0275inject"](ee),n["\u0275\u0275inject"](s.RxExpressionEvaluatorService),n["\u0275\u0275inject"](p.RxNotificationService),n["\u0275\u0275inject"](s.RxViewActionRegistryService),n["\u0275\u0275inject"](p.RxLogService),n["\u0275\u0275inject"](J),n["\u0275\u0275inject"](u.RxUtilityModalsService),n["\u0275\u0275inject"](s.RxViewDefinitionCacheService),n["\u0275\u0275inject"](l.RxObjectUtilsService),n["\u0275\u0275inject"](l.RxJsonParserService),n["\u0275\u0275inject"](p.RxCurrentUserService))},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac});class ne{constructor(){this.activeRuntimeViews=[]}register(e){this.activeRuntimeViews.includes(e)||this.activeRuntimeViews.push(e)}getAll(){return this.activeRuntimeViews}unregister(e){(0,c.pull)(this.activeRuntimeViews,e)}}ne.\u0275fac=function(e){return new(e||ne)},ne.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ne,factory:ne.\u0275fac,providedIn:"root"});class oe{constructor(e){this.runtimeViewCanvasService=e,this.componentPropertyChanged=new n.EventEmitter,this.destroy$=new o.Subject}ngOnInit(){this.runtimeViewCanvasService.componentPropertyChanged$.pipe((0,r.takeUntil)(this.destroy$)).subscribe(e=>{this.componentPropertyChanged.emit(e)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.unsubscribe()}}oe.\u0275fac=function(e){return new(e||oe)(n["\u0275\u0275directiveInject"](U))},oe.\u0275cmp=n["\u0275\u0275defineComponent"]({type:oe,selectors:[["rx-runtime-view-canvas"]],inputs:{layout:"layout"},outputs:{componentPropertyChanged:"componentPropertyChanged"},features:[n["\u0275\u0275ProvidersFeature"]([U])],decls:1,vars:1,consts:[["class","root-item",3,"layout",4,"ngIf"],[1,"root-item",3,"layout"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,F,1,1,"rx-runtime-view-canvas-item",0),2&e&&n["\u0275\u0275property"]("ngIf",t.layout)},directives:[d.NgIf,X],encapsulation:2});class re{constructor(e,t,i,r,a,s,l,c,d){this.runtimeViewModelApi=e,this.rxRecordDefinitionCacheService=t,this.runtimeViewLayoutService=i,this.runtimeViewModel=r,this.rxProcessDefinitionCacheService=a,this.rxRuntimeViewRegistryService=s,this.rxViewDefinitionCacheService=l,this.rxAssociationDefinitionCacheService=c,this.rxViewDefinitionService=d,this.destroyed$=new o.ReplaySubject(1),this.save=new n.EventEmitter,this.closeView=new n.EventEmitter,this.cancelView=new n.EventEmitter,this.beforeLoad=new n.EventEmitter,this.afterLoad=new n.EventEmitter,this.rxAssociationDefinitionCacheService.registerConsumer(this.destroyed$),this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$),this.rxRecordDefinitionCacheService.registerConsumer(this.destroyed$),this.rxViewDefinitionCacheService.registerConsumer(this.destroyed$)}onTrigger(){this.runtimeViewModel.isUserInteractionDetected=!0}ngOnInit(){this.init(),this.runtimeViewModel.cancel$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.cancelView.emit()),this.runtimeViewModel.save$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(()=>this.save.emit()),this.runtimeViewModel.close$.pipe((0,r.takeUntil)(this.destroyed$)).subscribe(e=>this.closeView.emit(e))}ngOnChanges(e){e.configuration.currentValue&&e.configuration.previousValue&&e.configuration.currentValue.viewDefinitionName!==e.configuration.previousValue.viewDefinitionName&&(this.runtimeViewModelApi.clear(),this.runtimeViewLayoutService.clear(),this.configuration=e.configuration.currentValue,this.init())}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete(),this.rxRuntimeViewRegistryService.unregister(this.runtimeViewModel)}init(){this.beforeLoad.emit(),this.runtimeViewModel.init(this.configuration).subscribe({complete:()=>{this.runtimeViewModelApi.init(this.runtimeViewModel),this.runtimeViewLayoutService.init(this.runtimeViewModel,this.runtimeViewModelApi),this.hostClass=this.runtimeViewModel.viewDefinition.styles||"",this.rxViewDefinitionService.isPageView(this.runtimeViewModel.viewDefinition)&&(this.hostClass=this.hostClass+" rx-page-view"),this.viewDefinitionGuid=this.runtimeViewModel.viewDefinition.guid,this.runtimeViewModel.isUserInteractionDetected=!1,this.afterLoad.emit()}}),this.configuration.onRegisterApi&&this.configuration.onRegisterApi(this.runtimeViewModel.api),this.rxRuntimeViewRegistryService.register(this.runtimeViewModel)}}re.\u0275fac=function(e){return new(e||re)(n["\u0275\u0275directiveInject"](Q),n["\u0275\u0275directiveInject"](a.RxRecordDefinitionCacheService),n["\u0275\u0275directiveInject"](Y),n["\u0275\u0275directiveInject"](ie),n["\u0275\u0275directiveInject"](h.RxProcessDefinitionCacheService),n["\u0275\u0275directiveInject"](ne),n["\u0275\u0275directiveInject"](s.RxViewDefinitionCacheService),n["\u0275\u0275directiveInject"](m.RxAssociationDefinitionCacheService),n["\u0275\u0275directiveInject"](s.RxViewDefinitionService))},re.\u0275cmp=n["\u0275\u0275defineComponent"]({type:re,selectors:[["rx-runtime-view"]],hostVars:3,hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("focusin",function(){return t.onTrigger()}),2&e&&(n["\u0275\u0275attribute"]("rx-view-definition-guid",t.viewDefinitionGuid),n["\u0275\u0275classMap"](t.hostClass))},inputs:{configuration:"configuration"},outputs:{save:"save",closeView:"closeView",cancelView:"cancelView",beforeLoad:"beforeLoad",afterLoad:"afterLoad"},features:[n["\u0275\u0275ProvidersFeature"]([ie,Q,Y]),n["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"layout","componentPropertyChanged",4,"ngIf"],[3,"layout","componentPropertyChanged"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,E,1,1,"rx-runtime-view-canvas",0),2&e&&n["\u0275\u0275property"]("ngIf",t.runtimeViewLayoutService.layout)},directives:[d.NgIf,oe],styles:[".rx-page-view[_nghost-%COMP%]     .outlet-padding{padding:0}.rx-page-view[_nghost-%COMP%]     rx-runtime-view-canvas-item{height:100%}"]});class ae{constructor(){this.customCssClasses="",this.autoFill=new n.EventEmitter,this.autoScroll=new n.EventEmitter,this.hidden=new n.EventEmitter,this.isComponentHidden=!1,this.destroyed$=new o.ReplaySubject(1),this.propertyChanged=new n.EventEmitter}get isHidden(){return this.isComponentHidden}set isHidden(e){this.hidden.emit(e),this.isComponentHidden=Boolean(e)}ngOnInit(){this.config.pipe((0,r.pluck)("styles"),(0,r.takeUntil)(this.destroyed$)).subscribe(e=>{this.customCssClasses=e||"",this.autoFill.emit(this.customCssClasses.includes("rx-auto-fill")),this.autoScroll.emit(this.customCssClasses.includes("rx-auto-scroll"))})}notifyPropertyChanged(e,t,i){this.propertyChanged.next({guid:this.guid,propertyName:e,newValue:t,oldValue:i})}triggerViewActions(e=this.guid,t=Z){return this.runtimeViewModelApi.triggerViewActions(e,t)}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}}ae.\u0275fac=function(e){return new(e||ae)},ae.\u0275dir=n["\u0275\u0275defineDirective"]({type:ae,hostVars:4,hostBindings:function(e,t){2&e&&(n["\u0275\u0275hostProperty"]("hidden",t.isHidden),n["\u0275\u0275attribute"]("rx-view-component-id",t.guid),n["\u0275\u0275classMap"](t.customCssClasses))},outputs:{autoFill:"autoFill",autoScroll:"autoScroll",hidden:"hidden"}});class se{constructor(e,t){this.runtimeViewCanvasItemService=e,this.componentFactoryResolver=t,this.name=s.RX_VIEW_DEFINITION.defaultOutletName}ngOnInit(){this.runtimeViewCanvasItemService.registerOutlet(this.name,this.container,this.componentFactoryResolver.resolveComponentFactory(H))}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275directiveInject"](q),n["\u0275\u0275directiveInject"](n.ComponentFactoryResolver))},se.\u0275cmp=n["\u0275\u0275defineComponent"]({type:se,selectors:[["rx-runtime-view-canvas-outlet"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](x,7,n.ViewContainerRef),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.container=e.first)}},inputs:{name:"name"},decls:2,vars:0,consts:[["container",""]],template:function(e,t){1&e&&n["\u0275\u0275elementContainer"](0,null,0)},encapsulation:2});class le{}le.\u0275fac=function(e){return new(e||le)},le.\u0275mod=n["\u0275\u0275defineNgModule"]({type:le,declarations:[oe,X,H,se],imports:[d.CommonModule,f.FormsModule],exports:[se,oe,X,H]}),le.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.CommonModule,f.FormsModule]]});class ce{constructor(e,t,i,n,o,r){this.rxRuntimeViewRegistryService=e,this.rxUtilityModalsService=t,this.translateService=i,this.changeDetector=n,this.activeModalRef=o,this.dockedPanelContext=r,this.isBlade=!1,this.context=r||o,this.isBlade=Boolean(r);const a=this.context.getData();this.configuration=a.configuration,this.title=a.title,this.notification=a.notification,this.isCancellable=a.isCancellable,this.closeLabel=i.instant("com.bmc.arsys.rx.client.common.close.label")}onCancelView(){this.context.dismiss(null)}closeModal(){this.context.dismiss(v.DismissReasons.CLOSE_BTN)}onClose(e){this.context.close(e)}onBeforeLoad(){this.busySubscription=o.NEVER.subscribe(),this.changeDetector.detectChanges()}onAfterLoad(){var e;null===(e=this.busySubscription)||void 0===e||e.unsubscribe()}}ce.\u0275fac=function(e){return new(e||ce)(n["\u0275\u0275directiveInject"](ne),n["\u0275\u0275directiveInject"](u.RxUtilityModalsService),n["\u0275\u0275directiveInject"](g.TranslateService),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](v.ActiveModalRef,8),n["\u0275\u0275directiveInject"](v.DockedPanelContext,8))},ce.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ce,selectors:[["rx-runtime-view-modal"]],decls:8,vars:10,consts:[[4,"ngIf"],["modalHeader",""],["class","pl-4 pt-4",3,"config",4,"ngIf"],[3,"ngClass"],[1,"position-relative"],[3,"options"],[3,"configuration","cancelView","closeView","beforeLoad","afterLoad"],["class","dp-header",4,"ngIf","ngIfElse"],[1,"dp-header"],[1,"dp-title"],["class","close dp-close","rx-id","x-button",3,"click",4,"ngIf"],["rx-id","x-button",1,"close","dp-close",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"pl-4","pt-4",3,"config"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,k,2,2,"ng-container",0),n["\u0275\u0275template"](1,P,4,2,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275template"](3,V,1,3,"adapt-alert",2),n["\u0275\u0275elementStart"](4,"div",3),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275element"](6,"rx-busy-indicator",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](7,"rx-runtime-view",6),n["\u0275\u0275listener"]("cancelView",function(){return t.onCancelView()})("closeView",function(e){return t.onClose(e)})("beforeLoad",function(){return t.onBeforeLoad()})("afterLoad",function(){return t.onAfterLoad()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.title||t.isCancellable),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",t.notification),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngClass",n["\u0275\u0275pureFunction2"](5,L,!t.isBlade,t.isBlade)),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("options",n["\u0275\u0275pureFunction1"](8,B,t.busySubscription)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("configuration",t.configuration))},directives:[d.NgIf,d.NgClass,u.RxBusyIndicatorComponent,re,v.AdaptAlertComponent],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{min-height:34px}.dp-header[_ngcontent-%COMP%]{flex-direction:row!important}.dp-content[_ngcontent-%COMP%] > rx-runtime-view[_ngcontent-%COMP%]{height:100%}"]});const de={actions:{save:"rx-runtime-view-save",close:"rx-runtime-view-close",cancel:"rx-runtime-view-cancel"}};class pe{}pe.\u0275fac=function(e){return new(e||pe)},pe.\u0275mod=n["\u0275\u0275defineNgModule"]({type:pe,declarations:[re,W,ce],imports:[d.CommonModule,le,g.TranslateModule,v.AdaptAlertModule,u.RxBusyIndicatorModule],exports:[le,re,W,ce]}),pe.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[d.CommonModule,le,g.TranslateModule,v.AdaptAlertModule,u.RxBusyIndicatorModule],le]})},"./node_modules/@swimlane/ngx-charts/fesm2015/swimlane-ngx-charts.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdvancedLegendComponent:()=>mn,AdvancedPieChartComponent:()=>oo,AlignmentTypes:()=>Li,AreaChartComponent:()=>bn,AreaChartModule:()=>Rn,AreaChartNormalizedComponent:()=>Cn,AreaChartStackedComponent:()=>Sn,AreaComponent:()=>Zi,AreaSeriesComponent:()=>Dn,AxesModule:()=>Ni,AxisLabelComponent:()=>Ti,BarChartModule:()=>$n,BarComponent:()=>An,BarHorizontal2DComponent:()=>Fn,BarHorizontalComponent:()=>Tn,BarHorizontalNormalizedComponent:()=>En,BarHorizontalStackedComponent:()=>Mn,BarLabelComponent:()=>Bn,BarVertical2DComponent:()=>kn,BarVerticalComponent:()=>On,BarVerticalNormalizedComponent:()=>jn,BarVerticalStackedComponent:()=>Pn,BaseChartComponent:()=>Ai,BubbleChartComponent:()=>Un,BubbleChartModule:()=>Xn,BubbleSeriesComponent:()=>qn,CardComponent:()=>go,CardSeriesComponent:()=>bo,ChartCommonModule:()=>hn,ChartComponent:()=>Di,CircleComponent:()=>Wi,CircleSeriesComponent:()=>Hi,ColorHelper:()=>vn,CountUpDirective:()=>on,D0Types:()=>Nn,GaugeArcComponent:()=>To,GaugeAxisComponent:()=>Fo,GaugeComponent:()=>Ao,GaugeModule:()=>Eo,GridPanelComponent:()=>Yi,GridPanelSeriesComponent:()=>Qi,HeatCellSeriesComponent:()=>Wn,HeatMapCellComponent:()=>Hn,HeatMapComponent:()=>Yn,HeatMapModule:()=>Qn,LegendComponent:()=>dn,LegendEntryComponent:()=>pn,LineChartComponent:()=>Jn,LineChartModule:()=>eo,LineComponent:()=>Kn,LineSeriesComponent:()=>Zn,LinearGaugeComponent:()=>Ro,NgxChartsModule:()=>Mo,NumberCardComponent:()=>Co,NumberCardModule:()=>So,PieArcComponent:()=>ao,PieChartComponent:()=>so,PieChartModule:()=>ho,PieGridComponent:()=>po,PieGridSeriesComponent:()=>uo,PieLabelComponent:()=>ro,PieSeriesComponent:()=>mo,PolarChartComponent:()=>io,PolarChartModule:()=>fo,PolarSeriesComponent:()=>no,ScaleLegendComponent:()=>un,SeriesHorizontal:()=>Ln,SeriesVerticalComponent:()=>Vn,ShowTypes:()=>Bi,StyleTypes:()=>Vi,SvgLinearGradientComponent:()=>Ki,SvgRadialGradientComponent:()=>Ji,Timeline:()=>cn,TooltipArea:()=>ln,TooltipContentComponent:()=>wi,TooltipDirective:()=>$i,TooltipModule:()=>Gi,TooltipService:()=>_i,TreeMapCellComponent:()=>wo,TreeMapCellSeriesComponent:()=>Io,TreeMapComponent:()=>_o,TreeMapModule:()=>Do,VisibilityObserver:()=>Ri,XAxisComponent:()=>Oi,XAxisTicksComponent:()=>Mi,YAxisComponent:()=>Pi,YAxisTicksComponent:()=>ji,calculateViewDimensions:()=>fn,colorSets:()=>gn,count:()=>tn,decimalChecker:()=>nn,escapeLabel:()=>Ui,formatLabel:()=>zi,getDomain:()=>Gn,getScale:()=>zn,getScaleType:()=>yn,getUniqueXDomainValues:()=>xn,gridLayout:()=>co,gridSize:()=>lo,hexToRgb:()=>vo,id:()=>Xi,invertColor:()=>xo,reduceTicks:()=>Ei,shadeRGBColor:()=>yo,sortByDomain:()=>In,sortByTime:()=>_n,sortLinear:()=>wn,throttle:()=>vi,throttleable:()=>xi,tickFormat:()=>Oo,trimLabel:()=>Fi,"\u0275a":()=>Ii,"\u0275b":()=>gi});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("./node_modules/@angular/animations/fesm2015/animations.js"),a=i("./node_modules/@angular/cdk/fesm2015/portal.js"),s=i("./node_modules/tslib/tslib.es6.js"),l=i("rxjs"),c=i("./node_modules/rxjs/_esm2015/operators/index.js"),d=i("./node_modules/d3-selection/src/index.js"),p=i("./node_modules/d3-brush/src/index.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/index.js"),m=i("./node_modules/@angular/platform-browser/fesm2015/platform-browser.js"),h=i("./node_modules/d3-shape/src/index.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),g=i("./node_modules/d3-interpolate/src/index.js"),v=i("./node_modules/d3-format/src/index.js"),x=i("./node_modules/d3-color/src/index.js"),y=i("./node_modules/d3-hierarchy/src/index.js"),b=i("./node_modules/d3-time-format/src/index.js");const C=["caretElm"];function S(e,t){}const w=function(e){return{model:e}};function I(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span"),n["\u0275\u0275template"](1,S,0,0,"ng-template",5),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngTemplateOutlet",e.template)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,w,e.context))}}function _(e,t){if(1&e&&n["\u0275\u0275element"](0,"span",6),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("innerHTML",e.title,n["\u0275\u0275sanitizeHtml"])}}function D(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275element"](0,"ngx-charts-scale-legend",4)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("horizontal",e.legendOptions&&"below"===e.legendOptions.position)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function R(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275elementStart"](0,"ngx-charts-legend",5),n["\u0275\u0275listener"]("labelClick",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().legendLabelClick.emit(t)})("labelActivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().legendLabelActivate.emit(t)})("labelDeactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().legendLabelDeactivate.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("horizontal",e.legendOptions&&"below"===e.legendOptions.position)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}const A=["*"],T=["ticksel"];function F(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",3),n["\u0275\u0275elementStart"](1,"title"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"text",4),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",i.tickTransform(e)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](i.tickFormat(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("font-size","12px"),n["\u0275\u0275attribute"]("text-anchor",i.textAnchor)("transform",i.textTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.tickTrim(i.tickFormat(e))," ")}}function E(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"line",6),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("transform",e.gridLineTransform()),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("y1",-e.gridLineHeight)}}function M(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,E,2,2,"g",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",i.tickTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.showGridLines)}}function O(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().emitTicksHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)}}function k(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",3)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.labelText)("offset",e.labelOffset)("orient","bottom")("height",e.dims.height)("width",e.dims.width)}}function j(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",4),n["\u0275\u0275elementStart"](1,"title"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"text",5),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",i.transform(e)),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](i.tickFormat(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("font-size","12px"),n["\u0275\u0275attribute"]("dy",i.dy)("x",i.x1)("y",i.y1)("text-anchor",i.textAnchor),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.tickTrim(i.tickFormat(e))," ")}}function P(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"path",6)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function N(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"line",9)),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("x2",e.gridLineWidth)}}function V(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"line",9)),2&e){const e=n["\u0275\u0275nextContext"](3);n["\u0275\u0275attribute"]("x2",-e.gridLineWidth)}}function L(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,N,1,1,"line",8),n["\u0275\u0275template"](2,V,1,1,"line",8),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("transform",e.gridLineTransform()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf","left"===e.orient),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf","right"===e.orient)}}function B(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,L,3,3,"g",7),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",i.transform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.showGridLines)}}function $(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"title"),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"text",11),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2).$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](t.tickTrim(t.tickFormat(e.value))),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("dy",t.dy)("y",-6)("x",t.gridLineWidth)("text-anchor",t.textAnchor),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function G(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"line",10),n["\u0275\u0275template"](2,$,5,6,"g",7),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",t.transform(e.value)),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("x2",t.gridLineWidth)("transform",t.gridLineTransform()),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showRefLabels)}}function z(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,G,3,4,"g",7),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.showRefLines)}}function U(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().emitTicksWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)}}function q(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",3)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}function X(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"rect",4)),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",2*e.circle.radius)("height",e.circle.height)("fill",e.gradientFill)}}const H=function(e){return{name:e}};function W(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275element"](2,"g",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,X,1,6,"rect",2),n["\u0275\u0275elementStart"](4,"g",3),n["\u0275\u0275listener"]("select",function(){n["\u0275\u0275restoreView"](e);const t=n["\u0275\u0275nextContext"]();return t.onClick(t.circle.data)})("activate",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activateCircle()})("deactivate",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivateCircle()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("name",e.gradientId)("stops",e.circle.gradientStops),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",e.barVisible&&"standard"===e.type),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",e.isActive(n["\u0275\u0275pureFunction1"](18,H,e.circle.seriesName))),n["\u0275\u0275property"]("cx",e.circle.cx)("cy",e.circle.cy)("r",e.circle.radius)("fill",e.circle.color)("pointerEvents",0===e.circle.value?"none":"all")("data",e.circle.value)("classNames",e.circle.classNames)("tooltipDisabled",e.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",e.tooltipTemplate?void 0:e.getTooltipText(e.circle))("tooltipTemplate",e.tooltipTemplate)("tooltipContext",e.circle.data)}}function Y(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",1)),2&e){const e=t.$implicit;n["\u0275\u0275classProp"]("grid-panel",!0)("odd","odd"===e.class)("even","even"===e.class),n["\u0275\u0275property"]("height",e.height)("width",e.width)("x",e.x)("y",e.y)}}function Q(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"stop")),2&e){const e=t.$implicit;n["\u0275\u0275styleProp"]("stop-color",e.color)("stop-opacity",e.opacity),n["\u0275\u0275attribute"]("offset",e.offset+"%")}}function K(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"stop")),2&e){const e=t.$implicit;n["\u0275\u0275styleProp"]("stop-color",e.color)("stop-opacity",e.opacity),n["\u0275\u0275attribute"]("offset",e.offset+"%")}}function J(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"defs"),n["\u0275\u0275element"](1,"g",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name",e.gradientId)("stops",e.gradientStops)}}const Z=["tooltipAnchor"];function ee(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",6),n["\u0275\u0275element"](1,"span",7),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("background-color",e.color),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",i.getToolTipText(e)," ")}}function te(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275elementStart"](0,"div",4),n["\u0275\u0275template"](1,ee,3,3,"div",5),n["\u0275\u0275elementEnd"]()),2&e){const e=t.model;n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e)}}function ie(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"header",4),n["\u0275\u0275elementStart"](1,"span",5),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.title)}}function ne(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"li",6),n["\u0275\u0275elementStart"](1,"ngx-charts-legend-entry",7),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().labelClick.emit(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",i.isActive(e))}}function oe(e,t){if(1&e&&n["\u0275\u0275element"](0,"div",7),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("countTo",e.roundedTotal)("valueFormatting",e.valueFormatting)}}function re(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",8),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.valueFormatting?e.valueFormatting(e.roundedTotal):e.defaultValueFormatting(e.roundedTotal)," ")}}function ae(e,t){if(1&e&&n["\u0275\u0275element"](0,"div",16),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("countTo",e._value)("valueFormatting",t.valueFormatting)}}function se(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",17),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.valueFormatting?t.valueFormatting(e.value):t.defaultValueFormatting(e.value)," ")}}function le(e,t){if(1&e&&n["\u0275\u0275element"](0,"div",18),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("countTo",e.percentage)("countSuffix","%")}}function ce(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"div",19),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"]("",e.percentage.toLocaleString(),"%")}}function de(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",9),n["\u0275\u0275listener"]("mouseenter",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().activate.emit(t.data)})("mouseleave",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().deactivate.emit(t.data)})("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().select.emit(t.data)}),n["\u0275\u0275element"](1,"div",10),n["\u0275\u0275template"](2,ae,1,2,"div",11),n["\u0275\u0275template"](3,se,2,1,"div",12),n["\u0275\u0275elementStart"](4,"div",13),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,le,1,2,"div",14),n["\u0275\u0275template"](7,ce,2,1,"div",15),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("border-left-color",e.color),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.displayLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.animations)}}const pe=["tooltipTemplate"],ue=["seriesTooltipTemplate"];function me(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function he(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",8),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function fe(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",9),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("baseValue",i.baseValue)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("gradient",i.gradient)("curve",i.curve)("animations",i.animations)}}function ge(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",13),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onClick(t,i)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("activeEntries",i.activeEntries)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function ve(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",10),n["\u0275\u0275listener"]("mouseleave",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().hideCircles()}),n["\u0275\u0275elementStart"](1,"g",11),n["\u0275\u0275listener"]("hover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateHoveredVertical(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,ge,2,9,"g",12),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)}}function xe(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",15),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.timelineXScale)("yScale",i.timelineYScale)("baseValue",i.baseValue)("colors",i.colors)("data",e)("scaleType",i.scaleType)("gradient",i.gradient)("curve",i.curve)("animations",i.animations)}}const ye=function(e,t){return[e,t]};function be(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",14),n["\u0275\u0275listener"]("onDomainChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateDomain(t)}),n["\u0275\u0275template"](1,xe,2,9,"g",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("results",e.results)("view",n["\u0275\u0275pureFunction2"](10,ye,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("legend",e.legend)("scaleType",e.scaleType),n["\u0275\u0275attribute"]("transform",e.timelineTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function Ce(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function Se(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",8),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function we(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",9),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("activeEntries",i.activeEntries)("gradient",i.gradient)("curve",i.curve)("animations",i.animations)}}function Ie(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",13),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onClick(t,i)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("activeEntries",i.activeEntries)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function _e(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",10),n["\u0275\u0275listener"]("mouseleave",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().hideCircles()}),n["\u0275\u0275elementStart"](1,"g",11),n["\u0275\u0275listener"]("hover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateHoveredVertical(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Ie,2,9,"g",12),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("showPercentage",!0)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)}}function De(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",15),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.timelineXScale)("yScale",i.timelineYScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("gradient",i.gradient)("curve",i.curve)("animations",i.animations)}}function Re(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",14),n["\u0275\u0275listener"]("onDomainChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateDomain(t)}),n["\u0275\u0275template"](1,De,2,8,"g",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("results",e.results)("view",n["\u0275\u0275pureFunction2"](10,ye,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("legend",e.legend)("scaleType",e.scaleType),n["\u0275\u0275attribute"]("transform",e.timelineTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}const Ae=".ngx-charts{float:left;overflow:visible}.ngx-charts .arc,.ngx-charts .bar,.ngx-charts .circle{cursor:pointer}.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .card.active,.ngx-charts .card:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .arc:focus,.ngx-charts .bar:focus,.ngx-charts .card:focus,.ngx-charts .cell:focus{outline:none}.ngx-charts .arc.hidden,.ngx-charts .bar.hidden,.ngx-charts .card.hidden,.ngx-charts .cell.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .area-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .line-series.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .polar-series-path.inactive{opacity:.2;transition:opacity .1s ease-in-out}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{fill:none;stroke:#ddd;stroke-width:1}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-dasharray:5;stroke-dashoffset:5;stroke-width:1}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill:#000;fill-opacity:.05}.ngx-charts .gridline-path-dotted{fill:none;stroke:#ddd;stroke-dasharray:1,20;stroke-dashoffset:3;stroke-width:1}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:rgba(0,0,0,.05)}";function Te(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function Fe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",8),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function Ee(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",9),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("gradient",i.gradient)("activeEntries",i.activeEntries)("curve",i.curve)("animations",i.animations)}}function Me(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",12),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onClick(t,i)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("activeEntries",i.activeEntries)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function Oe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",10),n["\u0275\u0275listener"]("mouseleave",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().hideCircles()}),n["\u0275\u0275elementStart"](1,"g",11),n["\u0275\u0275listener"]("hover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateHoveredVertical(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,Me,2,9,"g",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function ke(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",14),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.timelineXScale)("yScale",i.timelineYScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("gradient",i.gradient)("curve",i.curve)("animations",i.animations)}}function je(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",13),n["\u0275\u0275listener"]("onDomainChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateDomain(t)}),n["\u0275\u0275template"](1,ke,2,8,"g",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("results",e.results)("view",n["\u0275\u0275pureFunction2"](10,ye,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("legend",e.legend)("scaleType",e.scaleType),n["\u0275\u0275attribute"]("transform",e.timelineTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function Pe(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"defs"),n["\u0275\u0275element"](1,"g",2),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("orientation",e.orientation)("name",e.gradientId)("stops",e.gradientStops)}}function Ne(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function Ve(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("yAxisOffset",e.dataLabelMaxWidth.negative)}}function Le(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.valueScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function Be(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.groupScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("yAxisOffset",e.dataLabelMaxWidth.negative)}}function $e(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",8),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)})("dataLabelWidthChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().onDataLabelMaxWidthChanged(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("transform",i.groupTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.valueScale)("activeEntries",i.activeEntries)("yScale",i.innerScale)("colors",i.colors)("series",e.series)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("seriesName",e.name)("roundEdges",i.roundEdges)("animations",i.animations)("showDataLabel",i.showDataLabel)("dataLabelFormatting",i.dataLabelFormatting)("noBarWhenZero",i.noBarWhenZero)}}function Ge(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function ze(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function Ue(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",7),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("transform",i.groupTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("activeEntries",i.activeEntries)("colors",i.colors)("series",e.series)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("seriesName",e.name)("animations",i.animations)("noBarWhenZero",i.noBarWhenZero)}}function qe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function Xe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("yAxisOffset",e.dataLabelMaxWidth.negative)}}function He(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",7),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)})("dataLabelWidthChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().onDataLabelMaxWidthChanged(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("transform",i.groupTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("series",e.series)("activeEntries",i.activeEntries)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("seriesName",e.name)("animations",i.animations)("showDataLabel",i.showDataLabel)("dataLabelFormatting",i.dataLabelFormatting)("noBarWhenZero",i.noBarWhenZero)}}function We(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("xAxisOffset",e.dataLabelMaxHeight.negative)}}function Ye(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function Qe(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.groupScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("xAxisOffset",e.dataLabelMaxHeight.negative)}}function Ke(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.valueScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function Je(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",8),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)})("dataLabelHeightChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().onDataLabelMaxHeightChanged(t,i)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active")("activeEntries",i.activeEntries)("xScale",i.innerScale)("yScale",i.valueScale)("colors",i.colors)("series",e.series)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("showDataLabel",i.showDataLabel)("dataLabelFormatting",i.dataLabelFormatting)("seriesName",e.name)("roundEdges",i.roundEdges)("animations",i.animations)("noBarWhenZero",i.noBarWhenZero),n["\u0275\u0275attribute"]("transform",i.groupTransform(e))}}function Ze(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function et(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function tt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",7),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("transform",i.groupTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("activeEntries",i.activeEntries)("colors",i.colors)("series",e.series)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("seriesName",e.name)("animations",i.animations)("noBarWhenZero",i.noBarWhenZero)}}function it(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("xAxisOffset",e.dataLabelMaxHeight.negative)}}function nt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function ot(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",7),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onActivate(t,i)})("deactivate",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onDeactivate(t,i)})("dataLabelHeightChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"]().onDataLabelMaxHeightChanged(t,i)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("transform",i.groupTransform(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("activeEntries",i.activeEntries)("colors",i.colors)("series",e.series)("dims",i.dims)("gradient",i.gradient)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("showDataLabel",i.showDataLabel)("dataLabelFormatting",i.dataLabelFormatting)("seriesName",e.name)("animations",i.animations)("noBarWhenZero",i.noBarWhenZero)}}function rt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activate.emit(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivate.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active")("@.disabled",!i.animations)("width",e.width)("height",e.height)("x",e.x)("y",e.y)("fill",e.color)("stops",e.gradientStops)("data",e.data)("orientation","vertical")("roundEdges",e.roundEdges)("gradient",i.gradient)("ariaLabel",e.ariaLabel)("isActive",i.isActive(e.data))("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement",i.tooltipPlacement)("tooltipType",i.tooltipType)("tooltipTitle",i.tooltipTemplate?void 0:e.tooltipText)("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)("noBarWhenZero",i.noBarWhenZero)("animations",i.animations)}}function at(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",4),n["\u0275\u0275listener"]("dimensionsChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).dataLabelHeightChanged.emit({size:t,index:i})}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("barX",e.x)("barY",e.y)("barWidth",e.width)("barHeight",e.height)("value",e.total)("valueFormatting",i.dataLabelFormatting)("orientation","vertical")}}function st(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,at,1,7,"g",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.barsForDataLabels)("ngForTrackBy",e.trackDataLabelBy)}}function lt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().click(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activate.emit(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivate.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active")("width",e.width)("height",e.height)("x",e.x)("y",e.y)("fill",e.color)("stops",e.gradientStops)("data",e.data)("orientation","horizontal")("roundEdges",e.roundEdges)("gradient",i.gradient)("isActive",i.isActive(e.data))("ariaLabel",e.ariaLabel)("animations",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement",i.tooltipPlacement)("tooltipType",i.tooltipType)("tooltipTitle",i.tooltipTemplate?void 0:e.tooltipText)("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)("noBarWhenZero",i.noBarWhenZero)}}function ct(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",4),n["\u0275\u0275listener"]("dimensionsChanged",function(t){const i=n["\u0275\u0275restoreView"](e).index;return n["\u0275\u0275nextContext"](2).dataLabelWidthChanged.emit({size:t,index:i})}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("barX",e.x)("barY",e.y)("barWidth",e.width)("barHeight",e.height)("value",e.total)("valueFormatting",i.dataLabelFormatting)("orientation","horizontal")}}function dt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,ct,1,7,"g",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.barsForDataLabels)("ngForTrackBy",e.trackDataLabelBy)}}function pt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("showGridLines",e.showGridLines)("dims",e.dims)("xScale",e.xScale)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function ut(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("showGridLines",e.showGridLines)("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function mt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",8),n["\u0275\u0275listener"]("select",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t,i)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("rScale",i.rScale)("xScaleType",i.xScaleType)("yScaleType",i.yScaleType)("xAxisLabel",i.xAxisLabel)("yAxisLabel",i.yAxisLabel)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function ht(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g"),n["\u0275\u0275elementStart"](2,"g",1),n["\u0275\u0275listener"]("select",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t.data)})("activate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().activateCircle(t)})("deactivate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().deactivateCircle(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("opacity",e.opacity),n["\u0275\u0275classProp"]("active",e.isActive),n["\u0275\u0275property"]("@animationState","active")("cx",0)("cy",0)("r",e.radius)("fill",e.color)("pointerEvents","all")("data",e.value)("classNames",e.classNames)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",i.tooltipTemplate?void 0:i.getTooltipText(e))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)}}function ft(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"defs"),n["\u0275\u0275element"](1,"g",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name",e.gradientId)("stops",e.gradientStops)}}const gt=function(e,t,i){return{series:e,name:t,value:i}};function vt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",1),n["\u0275\u0275listener"]("select",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().onClick(t.cell)})("activate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().activate.emit(t.cell)})("deactivate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().deactivate.emit(t.cell)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("x",e.x)("y",e.y)("width",e.width)("height",e.height)("fill",e.fill)("data",e.data)("gradient",i.gradient)("animations",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",i.tooltipTemplate?void 0:i.tooltipText(e))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",n["\u0275\u0275pureFunction3"](14,gt,e.series,e.label,e.data))}}function xt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",6),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function yt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)}}function bt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"rect")),2&e){const e=t.$implicit;n["\u0275\u0275attribute"]("x",e.x)("y",e.y)("rx",e.rx)("width",e.width)("height",e.height)("fill",e.fill)}}function Ct(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",7),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateXAxisHeight(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)}}function St(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",8),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)}}function wt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",9),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("hasRange",i.hasRange)("animations",i.animations)}}function It(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",13),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"](2).onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("activeEntries",i.activeEntries)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function _t(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",10),n["\u0275\u0275listener"]("mouseleave",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().hideCircles()}),n["\u0275\u0275elementStart"](1,"g",11),n["\u0275\u0275listener"]("hover",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateHoveredVertical(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,It,2,9,"g",12),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)}}function Dt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275element"](1,"g",15),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",i.timelineXScale)("yScale",i.timelineYScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("curve",i.curve)("hasRange",i.hasRange)("animations",i.animations)}}function Rt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",14),n["\u0275\u0275listener"]("onDomainChange",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateDomain(t)}),n["\u0275\u0275template"](1,Dt,2,8,"g",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("results",e.results)("view",n["\u0275\u0275pureFunction2"](10,ye,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("scaleType",e.scaleType)("legend",e.legend),n["\u0275\u0275attribute"]("transform",e.timelineTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function At(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",4)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("name",e.gradientId)("stops",e.gradientStops)}}function Tt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",5)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275classProp"]("active",e.isActive(e.data))("inactive",e.isInactive(e.data)),n["\u0275\u0275property"]("data",e.data)("path",e.outerPath)("fill",e.hasGradient?e.gradientUrl:e.colors.getColor(e.data.name))("opacity",e.rangeFillOpacity)("animations",e.animations)}}function Ft(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"circle",8)),2&e){const e=t.$implicit;n["\u0275\u0275attribute"]("r",e)}}function Et(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,Ft,1,1,"circle",7),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.radiusTicks)}}function Mt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",10)),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("data",e)("radius",i.outerRadius)("label",e.label)("max",i.outerRadius)("value",i.showGridLines?1:i.outerRadius)("explodeSlices",!0)("animations",i.animations)("labelTrim",i.labelTrim)("labelTrimSize",i.labelTrimSize)}}function Ot(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,Mt,1,9,"g",9),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.thetaTicks)}}function kt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",11),n["\u0275\u0275listener"]("dimensionsChanged",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().updateYAxisWidth(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("yScale",e.yAxisScale)("dims",e.yAxisDims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting),n["\u0275\u0275attribute"]("transform",e.transformYAxis)}}function jt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",12)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("label",e.xAxisLabel)("offset",e.labelOffset)("orient","bottom")("height",e.dims.height)("width",e.dims.width)}}function Pt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",13),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("gradient",i.gradient)("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("animations",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function Nt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",4)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("color",e.seriesColor)("name",e.gradientId)("startOpacity",.25)("endOpacity",1)("stops",e.gradientStops)}}function Vt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",5),n["\u0275\u0275listener"]("select",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().select.emit(t.data)})("activate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().activate.emit({name:t.data.series})})("deactivate",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"]().deactivate.emit({name:t.data.series})}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("opacity",i.inactive?.2:1),n["\u0275\u0275property"]("cx",e.cx)("cy",e.cy)("r",i.circleRadius)("fill",e.color)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipTitle",i.tooltipTemplate?void 0:i.tooltipText(e))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)}}function Lt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"defs"),n["\u0275\u0275element"](1,"g",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("color",e.fill)("name",e.radialGradientId)("startOpacity",e.startOpacity)}}const Bt=".pie-label{font-size:11px}.pie-label.animation{-webkit-animation:fadeIn .75s ease-in;animation:fadeIn .75s ease-in}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.pie-label-line{stroke-dasharray:100%}.pie-label-line.animation{-webkit-animation:drawOut 3s linear;animation:drawOut 3s linear;transition:d .75s}@-webkit-keyframes drawOut{0%{stroke-dashoffset:100%}to{stroke-dashoffset:0}}@keyframes drawOut{0%{stroke-dashoffset:100%}to{stroke-dashoffset:0}}";function $t(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"text",10)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275property"]("countTo",e.percent)("countSuffix","%")}}function Gt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"text",11),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.percent.toLocaleString()," ")}}function zt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"text",12)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("countTo",e.total)("countPrefix",t.label+": "),n["\u0275\u0275attribute"]("y",e.outerRadius)}}function Ut(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"text",13),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("y",e.outerRadius),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate2"](" ",t.label,": ",e.total.toLocaleString()," ")}}const qt=function(e){return{data:e}};function Xt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",3),n["\u0275\u0275elementStart"](1,"g",4),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,$t,1,2,"text",5),n["\u0275\u0275template"](3,Gt,2,1,"text",6),n["\u0275\u0275elementStart"](4,"text",7),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,zt,1,3,"text",8),n["\u0275\u0275template"](7,Ut,2,3,"text",9),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("colors",e.colors)("data",e.data)("innerRadius",e.innerRadius)("outerRadius",e.outerRadius)("animations",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",i.tooltipTemplate?void 0:i.tooltipText(n["\u0275\u0275pureFunction1"](17,qt,e)))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data[0].data),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",e.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.animations)}}function Ht(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activate.emit(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivate.emit(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("startAngle",e.startAngle)("endAngle",e.endAngle)("innerRadius",i.innerRadius)("outerRadius",i.outerRadius)("fill",i.color(e))("value",e.data.value)("data",e.data)("gradient",!1)("pointerEvents",e.pointerEvents)("animate",e.animate),n["\u0275\u0275attribute"]("class",e.class)}}function Wt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",3)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("data",e)("radius",t.outerRadius)("color",t.color(e))("label",t.labelText(e))("labelTrim",t.trimLabels)("labelTrimSize",t.maxLabelLength)("max",t.max)("value",e.value)("explodeSlices",t.explodeSlices)("animations",t.animations)}}function Yt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,Wt,1,10,"g",1),n["\u0275\u0275elementStart"](2,"g",2),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().activate.emit(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().deactivate.emit(t)})("dblclick",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().dblclick.emit(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",i.labelVisible(e)),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("startAngle",e.startAngle)("endAngle",e.endAngle)("innerRadius",i.innerRadius)("outerRadius",i.outerRadius)("fill",i.color(e))("value",e.data.value)("gradient",i.gradient)("data",e.data)("max",i.max)("explodeSlices",i.explodeSlices)("isActive",i.isActive(e.data))("animate",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",i.getTooltipTitle(e))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)}}const Qt=["textEl"];function Kt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"path",7)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("fill",e.bandColor)("transform",e.transformBand)("d",e.bandPath)}}function Jt(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"rect",2)),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("fill",i.emptyColor),n["\u0275\u0275attribute"]("x",e.x)("y",e.y)("width",e.width)("height",e.height)}}function Zt(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",3),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("x",e.x)("y",e.y)("width",e.width)("height",e.height)("color",e.color)("bandColor",e.bandColor)("textColor",e.textColor)("data",e.data)("label",e.label)("medianSize",i.medianSize)("valueFormatting",i.valueFormatting)("labelFormatting",i.labelFormatting)("animations",i.animations)}}function ei(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"defs"),n["\u0275\u0275element"](1,"g",3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("name",e.gradientId)("stops",e.gradientStops)}}function ti(e,t){if(1&e&&n["\u0275\u0275element"](0,"span",8),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("countTo",e.value)("valueFormatting",e.valueFormatting)}}function ii(e,t){if(1&e&&(n["\u0275\u0275elementStart"](0,"span",9),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.formattedValue," ")}}function ni(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"foreignObject",4),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275elementStart"](1,"p"),n["\u0275\u0275element"](2,"span",5),n["\u0275\u0275element"](3,"br"),n["\u0275\u0275template"](4,ti,1,2,"span",6),n["\u0275\u0275template"](5,ii,2,1,"span",7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("pointer-events","none"),n["\u0275\u0275attribute"]("x",e.x)("y",e.y)("width",e.width)("height",e.height),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("color",e.getTextColor())("height",e.height+"px")("width",e.width+"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("innerHTML",e.formattedLabel,n["\u0275\u0275sanitizeHtml"]),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!e.animations)}}function oi(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",1),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)}),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("data",e.data)("x",e.x)("y",e.y)("width",e.width)("height",e.height)("fill",e.fill)("label",e.label)("value",e.value)("valueType",e.valueType)("valueFormatting",i.valueFormatting)("labelFormatting",i.labelFormatting)("gradient",i.gradient)("animations",i.animations)("tooltipDisabled",i.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",i.tooltipTemplate?void 0:i.getTooltipText(e))("tooltipTemplate",i.tooltipTemplate)("tooltipContext",e.data)}}const ri=["valueTextEl"],ai=["unitsTextEl"];function si(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"line",10)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",e.transformLine)("stroke",e.colors.getColor(e.units))}}function li(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"line",11)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",e.transformLine)("stroke",e.colors.getColor(e.units))}}const ci=function(){return{}};function di(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"g",5),n["\u0275\u0275listener"]("select",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onClick(t)})("activate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onActivate(t)})("deactivate",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onDeactivate(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",i.rotation),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("backgroundArc",e.backgroundArc)("valueArc",e.valueArc)("cornerRadius",i.cornerRadius)("colors",i.colors)("isActive",i.isActive(e.valueArc.data))("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)("valueFormatting",i.valueFormatting)("animations",i.animations)}}function pi(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",6)),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275property"]("bigSegments",e.bigSegments)("smallSegments",e.smallSegments)("min",e.min)("max",e.max)("radius",e.outerRadius)("angleSpan",e.angleSpan)("valueScale",e.valueScale)("startAngle",e.startAngle)("tickFormatting",e.axisTickFormatting)}}function ui(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"text",7,8),n["\u0275\u0275elementStart"](2,"tspan",9),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"tspan",10),n["\u0275\u0275text"](5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("text-anchor","middle"),n["\u0275\u0275attribute"]("transform",e.textTransform),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](e.displayValue),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](e.units)}}function mi(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275element"](1,"path"),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("d",e.line)}}function hi(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",2),n["\u0275\u0275elementStart"](1,"text",3),n["\u0275\u0275text"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("text-anchor",e.textAnchor),n["\u0275\u0275attribute"]("transform",e.textTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.text," ")}}function fi(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",4),n["\u0275\u0275element"](1,"path"),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("d",e.line)}}class gi{constructor(e,t,i){this.applicationRef=e,this.componentFactoryResolver=t,this.injector=i}static setGlobalRootViewContainer(e){gi.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(gi.globalRootViewContainer)return gi.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return e.element?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,t){if(t){if(void 0!==t.inputs){const i=Object.getOwnPropertyNames(t.inputs);for(const n of i)e.instance[n]=t.inputs[n]}if(void 0!==t.outputs){const i=Object.getOwnPropertyNames(t.outputs);for(const n of i)e.instance[n]=t.outputs[n]}}return e}appendComponent(e,t={},i){i||(i=this.getRootViewContainer());const n=this.getComponentRootNode(i),o=new a.DomPortalHost(n,this.componentFactoryResolver,this.applicationRef,this.injector),r=new a.ComponentPortal(e),s=o.attach(r);return this.projectComponentBindings(s,t),s}}function vi(e,t,i){let n,o,r;i=i||{};let a=null,s=0;function l(){s=!1===i.leading?0:+new Date,a=null,r=e.apply(n,o)}return function(){const c=+new Date;s||!1!==i.leading||(s=c);const d=t-(c-s);return n=this,o=arguments,d<=0?(clearTimeout(a),a=null,s=c,r=e.apply(n,o)):a||!1===i.trailing||(a=setTimeout(l,d)),r}}function xi(e,t){return function(i,n,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,n,{configurable:!0,enumerable:o.enumerable,value:vi(o.value,e,t)}),this[n]}}}}var yi;gi.\u0275fac=function(e){return new(e||gi)(n["\u0275\u0275inject"](n.ApplicationRef),n["\u0275\u0275inject"](n.ComponentFactoryResolver),n["\u0275\u0275inject"](n.Injector))},gi.\u0275prov=n["\u0275\u0275defineInjectable"]({token:gi,factory:gi.\u0275fac}),gi.globalRootViewContainer=null,gi.ctorParameters=()=>[{type:n.ApplicationRef},{type:n.ComponentFactoryResolver},{type:n.Injector}],function(e){e[e.top="top"]="top",e[e.bottom="bottom"]="bottom",e[e.left="left"]="left",e[e.right="right"]="right"}(yi||(yi={}));function bi(e,t,i){return"top"===i?e.top-7:"bottom"===i?e.top+e.height-t.height+7:"center"===i?e.top+e.height/2-t.height/2:void 0}function Ci(e,t,i){return"left"===i?e.left-7:"right"===i?e.left+e.width-t.width+7:"center"===i?e.left+e.width/2-t.width/2:void 0}class Si{static calculateVerticalAlignment(e,t,i){let n=bi(e,t,i);return n+t.height>window.innerHeight&&(n=window.innerHeight-t.height),n}static calculateVerticalCaret(e,t,i,n){let o;"top"===n&&(o=e.height/2-i.height/2+7),"bottom"===n&&(o=t.height-e.height/2-i.height/2-7),"center"===n&&(o=t.height/2-i.height/2);const r=bi(e,t,n);return r+t.height>window.innerHeight&&(o+=r+t.height-window.innerHeight),o}static calculateHorizontalAlignment(e,t,i){let n=Ci(e,t,i);return n+t.width>window.innerWidth&&(n=window.innerWidth-t.width),n}static calculateHorizontalCaret(e,t,i,n){let o;"left"===n&&(o=e.width/2-i.width/2+7),"right"===n&&(o=t.width-e.width/2-i.width/2-7),"center"===n&&(o=t.width/2-i.width/2);const r=Ci(e,t,n);return r+t.width>window.innerWidth&&(o+=r+t.width-window.innerWidth),o}static shouldFlip(e,t,i,n){let o=!1;return"right"===i&&e.left+e.width+t.width+n>window.innerWidth&&(o=!0),"left"===i&&e.left-t.width-n<0&&(o=!0),"top"===i&&e.top-t.height-n<0&&(o=!0),"bottom"===i&&e.top+e.height+t.height+n>window.innerHeight&&(o=!0),o}static positionCaret(e,t,i,n,o){let r=0,a=0;return e===yi.right?(a=-7,r=Si.calculateVerticalCaret(i,t,n,o)):e===yi.left?(a=t.width,r=Si.calculateVerticalCaret(i,t,n,o)):e===yi.top?(r=t.height,a=Si.calculateHorizontalCaret(i,t,n,o)):e===yi.bottom&&(r=-7,a=Si.calculateHorizontalCaret(i,t,n,o)),{top:r,left:a}}static positionContent(e,t,i,n,o){let r=0,a=0;return e===yi.right?(a=i.left+i.width+n,r=Si.calculateVerticalAlignment(i,t,o)):e===yi.left?(a=i.left-t.width-n,r=Si.calculateVerticalAlignment(i,t,o)):e===yi.top?(r=i.top-t.height-n,a=Si.calculateHorizontalAlignment(i,t,o)):e===yi.bottom&&(r=i.top+i.height+n,a=Si.calculateHorizontalAlignment(i,t,o)),{top:r,left:a}}static determinePlacement(e,t,i,n){if(Si.shouldFlip(i,t,e,n)){if(e===yi.right)return yi.left;if(e===yi.left)return yi.right;if(e===yi.top)return yi.bottom;if(e===yi.bottom)return yi.top}return e}}class wi{constructor(e,t){this.element=e,this.renderer=t}get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){const e=this.element.nativeElement,t=this.host.nativeElement.getBoundingClientRect();if(!t.height&&!t.width)return;const i=e.getBoundingClientRect();this.checkFlip(t,i),this.positionContent(e,t,i),this.showCaret&&this.positionCaret(t,i),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,t,i){const{top:n,left:o}=Si.positionContent(this.placement,i,t,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${n}px`),this.renderer.setStyle(e,"left",`${o}px`)}positionCaret(e,t){const i=this.caretElm.nativeElement,n=i.getBoundingClientRect(),{top:o,left:r}=Si.positionCaret(this.placement,t,e,n,this.alignment);this.renderer.setStyle(i,"top",`${o}px`),this.renderer.setStyle(i,"left",`${r}px`)}checkFlip(e,t){this.placement=Si.determinePlacement(this.placement,t,e,this.spacing)}onWindowResize(){this.position()}}wi.\u0275fac=function(e){return new(e||wi)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2))},wi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:wi,selectors:[["ngx-tooltip-content"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](C,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.caretElm=e.first)}},hostVars:2,hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("resize",function(){return t.onWindowResize()},!1,n["\u0275\u0275resolveWindow"]),2&e&&n["\u0275\u0275classMap"](t.cssClasses)},inputs:{placement:"placement",host:"host",showCaret:"showCaret",type:"type",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275element"](1,"span",0,1),n["\u0275\u0275elementStart"](3,"div",2),n["\u0275\u0275template"](4,I,2,4,"span",3),n["\u0275\u0275template"](5,_,1,1,"span",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275classMapInterpolate1"]("tooltip-caret position-",t.placement,""),n["\u0275\u0275property"]("hidden",!t.showCaret),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngIf",!t.title),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.title))},directives:[o.NgIf,o.NgTemplateOutlet],styles:[".ngx-charts-tooltip-content{border-radius:3px;display:block;font-weight:400;opacity:0;pointer-events:none!important;position:fixed;z-index:5000}.ngx-charts-tooltip-content.type-popover{background:#fff;border:1px solid #72809b;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);color:#060709;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{height:0;position:absolute;width:0;z-index:5001}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-bottom:7px solid transparent;border-left:7px solid #fff;border-top:7px solid transparent}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-bottom:7px solid transparent;border-right:7px solid #fff;border-top:7px solid transparent}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-bottom:7px solid #fff;border-left:7px solid transparent;border-right:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip{background:rgba(0,0,0,.75);color:#fff;font-size:12px;padding:0 10px;pointer-events:auto;text-align:center}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75);border-top:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75);border-top:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-bottom:7px solid rgba(0,0,0,.75);border-left:7px solid transparent;border-right:7px solid transparent}.ngx-charts-tooltip-content .tooltip-label{display:block;font-size:1em;line-height:1em;padding:8px 5px 5px}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{height:0;position:absolute;width:0;z-index:5001}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;pointer-events:auto;transform:translateZ(0);transition:opacity .3s,transform .3s}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{line-height:1.2em;padding:5px 0;text-align:left}.tooltip-item .tooltip-item-color{border-radius:3px;color:#5b646b;display:inline-block;height:12px;margin-right:5px;width:12px}"],encapsulation:2}),wi.ctorParameters=()=>[{type:n.ElementRef},{type:n.Renderer2}],wi.propDecorators={host:[{type:n.Input}],showCaret:[{type:n.Input}],type:[{type:n.Input}],placement:[{type:n.Input}],alignment:[{type:n.Input}],spacing:[{type:n.Input}],cssClass:[{type:n.Input}],title:[{type:n.Input}],template:[{type:n.Input}],context:[{type:n.Input}],caretElm:[{type:n.ViewChild,args:["caretElm"]}],cssClasses:[{type:n.HostBinding,args:["class"]}],onWindowResize:[{type:n.HostListener,args:["window:resize"]}]},(0,s.__decorate)([xi(100)],wi.prototype,"onWindowResize",null);class Ii{constructor(e){this.injectionService=e,this.defaults={},this.components=new Map}getByType(e=this.type){return this.components.get(e)}create(e){return this.createByType(this.type,e)}createByType(e,t){t=this.assignDefaults(t);const i=this.injectComponent(e,t);return this.register(e,i),i}destroy(e){const t=this.components.get(e.componentType);if(t&&t.length){const i=t.indexOf(e);if(i>-1){t[i].destroy(),t.splice(i,1)}}}destroyAll(){this.destroyByType(this.type)}destroyByType(e){const t=this.components.get(e);if(t&&t.length){let e=t.length-1;for(;e>=0;)this.destroy(t[e--])}}injectComponent(e,t){return this.injectionService.appendComponent(e,t)}assignDefaults(e){const t=Object.assign({},this.defaults.inputs),i=Object.assign({},this.defaults.outputs);return e.inputs||e.outputs||(e={inputs:e}),t&&(e.inputs=Object.assign(Object.assign({},t),e.inputs)),i&&(e.outputs=Object.assign(Object.assign({},i),e.outputs)),e}register(e,t){this.components.has(e)||this.components.set(e,[]);this.components.get(e).push(t)}}class _i extends Ii{constructor(e){super(e),this.type=wi}}_i.\u0275fac=function(e){return new(e||_i)(n["\u0275\u0275inject"](gi))},_i.\u0275prov=n["\u0275\u0275defineInjectable"]({token:_i,factory:_i.\u0275fac}),_i.ctorParameters=()=>[{type:gi}];class Di{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new n.EventEmitter,this.legendLabelActivate=new n.EventEmitter,this.legendLabelDeactivate=new n.EventEmitter}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),this.legendOptions&&"right"!==this.legendOptions.position||(e="scaleLegend"===this.legendType?1:2));const t=12-e;this.chartWidth=Math.floor(this.view[0]*t/12),this.legendWidth=this.legendOptions&&"right"!==this.legendOptions.position?this.chartWidth:Math.floor(this.view[0]*e/12)}getLegendType(){return"linear"===this.legendOptions.scaleType?"scaleLegend":"legend"}}Di.\u0275fac=function(e){return new(e||Di)},Di.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Di,selectors:[["ngx-charts-chart"]],inputs:{showLegend:"showLegend",animations:"animations",legendType:"legendType",view:"view",legendOptions:"legendOptions",data:"data",legendData:"legendData",colors:"colors",activeEntries:"activeEntries"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[n["\u0275\u0275ProvidersFeature"]([_i]),n["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:A,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275projectionDef"](),n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"svg",1),n["\u0275\u0275projection"](2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,D,1,5,"ngx-charts-scale-legend",2),n["\u0275\u0275template"](4,R,1,7,"ngx-charts-legend",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275styleProp"]("width",t.view[0],"px"),n["\u0275\u0275property"]("@animationState","active")("@.disabled",!t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.chartWidth)("height",t.view[1]),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.showLegend&&"scaleLegend"===t.legendType),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showLegend&&"legend"===t.legendType))},directives:function(){return[o.NgIf,un,dn]},encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":enter",[(0,r.style)({opacity:0}),(0,r.animate)("500ms 100ms",(0,r.style)({opacity:1}))])])]},changeDetection:0}),Di.propDecorators={view:[{type:n.Input}],showLegend:[{type:n.Input}],legendOptions:[{type:n.Input}],data:[{type:n.Input}],legendData:[{type:n.Input}],legendType:[{type:n.Input}],colors:[{type:n.Input}],activeEntries:[{type:n.Input}],animations:[{type:n.Input}],legendLabelClick:[{type:n.Output}],legendLabelActivate:[{type:n.Output}],legendLabelDeactivate:[{type:n.Output}]};class Ri{constructor(e,t){this.element=e,this.zone=t,this.visible=new n.EventEmitter,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const e=()=>{if(!this.element)return;const{offsetHeight:t,offsetWidth:i}=this.element.nativeElement;t&&i?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}}Ri.\u0275fac=function(e){return new(e||Ri)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.NgZone))},Ri.\u0275dir=n["\u0275\u0275defineDirective"]({type:Ri,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),Ri.ctorParameters=()=>[{type:n.ElementRef},{type:n.NgZone}],Ri.propDecorators={visible:[{type:n.Output}]};class Ai{constructor(e,t,i){this.chartElement=e,this.zone=t,this.cd=i,this.scheme="cool",this.schemeType="ordinal",this.animations=!0,this.select=new n.EventEmitter}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Ri(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results?this.results=this.cloneData(this.results):this.results=[],this.view)this.width=this.view[0],this.height=this.view[1];else{const e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,t;const i=this.chartElement.nativeElement;if(null!==i.parentNode){const n=i.parentNode.getBoundingClientRect();e=n.width,t=n.height}return e&&t?{width:e,height:t}:null}formatDates(){for(let e=0;e<this.results.length;e++){const t=this.results[e];if(t.label=t.name,t.label instanceof Date&&(t.label=t.label.toLocaleDateString()),t.series)for(let e=0;e<t.series.length;e++){const i=t.series[e];i.label=i.name,i.label instanceof Date&&(i.label=i.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const e=(0,l.fromEvent)(window,"resize").pipe((0,c.debounceTime)(200)).subscribe(e=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=e}cloneData(e){const t=[];for(const i of e){const e={name:i.name};if(void 0!==i.value&&(e.value=i.value),void 0!==i.series){e.series=[];for(const t of i.series){const i=Object.assign({},t);e.series.push(i)}}void 0!==i.extra&&(e.extra=JSON.parse(JSON.stringify(i.extra))),t.push(e)}return t}}Ai.\u0275fac=function(e){return new(e||Ai)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef))},Ai.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ai,selectors:[["base-chart"]],inputs:{scheme:"scheme",schemeType:"schemeType",animations:"animations",results:"results",view:"view",customColors:"customColors"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:0,template:function(e,t){1&e&&n["\u0275\u0275element"](0,"div")},encapsulation:2}),Ai.ctorParameters=()=>[{type:n.ElementRef},{type:n.NgZone},{type:n.ChangeDetectorRef}],Ai.propDecorators={results:[{type:n.Input}],view:[{type:n.Input}],scheme:[{type:n.Input}],schemeType:[{type:n.Input}],customColors:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class Ti{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case"top":case"bottom":this.y=this.offset,this.x=this.width/2;break;case"left":this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case"right":this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)"}}}function Fi(e,t=16){return"string"!=typeof e?"number"==typeof e?e+"":"":(e=e.trim()).length<=t?e:`${e.slice(0,t)}...`}function Ei(e,t){if(e.length>t){const i=[],n=Math.floor(e.length/t);for(let t=0;t<e.length;t++)t%n==0&&i.push(e[t]);e=i}return e}Ti.\u0275fac=function(e){return new(e||Ti)(n["\u0275\u0275directiveInject"](n.ElementRef))},Ti.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ti,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-axis-label",""],decls:2,vars:6,template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"text"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("stroke-width",t.strokeWidth)("x",t.x)("y",t.y)("text-anchor",t.textAnchor)("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.label," "))},encapsulation:2,changeDetection:0}),Ti.ctorParameters=()=>[{type:n.ElementRef}],Ti.propDecorators={orient:[{type:n.Input}],label:[{type:n.Input}],offset:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}]};class Mi{constructor(){this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.dimensionsChanged=new n.EventEmitter,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor="middle",this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:e}),setTimeout(()=>this.updateDims()))}update(){const e=this.scale;this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(e){return"Date"===e.constructor.name?e.toLocaleDateString():e.toLocaleString()};const t=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(e){return this.scale(e)+.5*this.scale.bandwidth()}:this.scale,this.textTransform="",t&&0!==t?(this.textTransform=`rotate(${t})`,this.textAnchor="end",this.verticalSpacing=10):this.textAnchor="middle",setTimeout(()=>this.updateDims())}getRotationAngle(e){let t=0;this.maxTicksLength=0;for(let r=0;r<e.length;r++){const t=this.tickFormat(e[r]).toString();let i=t.length;this.trimTicks&&(i=this.tickTrim(t).length),i>this.maxTicksLength&&(this.maxTicksLength=i)}const i=8*Math.min(this.maxTicksLength,this.maxAllowedLength);let n=i;const o=Math.floor(this.width/e.length);for(;n>o&&t>-90;)t-=30,n=Math.cos(t*(Math.PI/180))*i;return t}getTicks(){let e;const t=this.getMaxTicks(20),i=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[i]):(e=this.scale.domain(),e=Ei(e,t)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?Fi(e,this.maxTickLength):e}}Mi.\u0275fac=function(e){return new(e||Mi)},Mi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Mi,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](T,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ticksElement=e.first)}},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",rotateTicks:"rotateTicks",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineHeight:"gridLineHeight",width:"width"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-x-axis-ticks",""],decls:4,vars:2,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[4,"ngIf"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",null,0),n["\u0275\u0275template"](2,F,5,7,"g",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,M,2,2,"g",2)),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.ticks),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.ticks))},directives:[o.NgForOf,o.NgIf],encapsulation:2,changeDetection:0}),Mi.propDecorators={scale:[{type:n.Input}],orient:[{type:n.Input}],tickArguments:[{type:n.Input}],tickValues:[{type:n.Input}],tickStroke:[{type:n.Input}],trimTicks:[{type:n.Input}],maxTickLength:[{type:n.Input}],tickFormatting:[{type:n.Input}],showGridLines:[{type:n.Input}],gridLineHeight:[{type:n.Input}],width:[{type:n.Input}],rotateTicks:[{type:n.Input}],dimensionsChanged:[{type:n.Output}],ticksElement:[{type:n.ViewChild,args:["ticksel"]}]};class Oi{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient="bottom",this.xAxisOffset=0,this.dimensionsChanged=new n.EventEmitter,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,void 0!==this.xAxisTickCount&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){const t=e+25+5;t!==this.labelOffset&&(this.labelOffset=t,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}}function ki(e,t,i,n,o,[r,a,s,l]){let c="";return c=`M${[e+o,t]}`,c+="h"+((i=0===(i=Math.floor(i))?1:i)-2*o),c+=a?`a${[o,o]} 0 0 1 ${[o,o]}`:`h${o}v${o}`,c+="v"+((n=0===(n=Math.floor(n))?1:n)-2*o),c+=l?`a${[o,o]} 0 0 1 ${[-o,o]}`:`v${o}h${-o}`,c+="h"+(2*o-i),c+=s?`a${[o,o]} 0 0 1 ${[-o,-o]}`:`h${-o}v${-o}`,c+="v"+(2*o-n),c+=r?`a${[o,o]} 0 0 1 ${[o,-o]}`:`v${-o}h${o}`,c+="z",c}Oi.\u0275fac=function(e){return new(e||Oi)},Oi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Oi,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Mi,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ticksComponent=e.first)}},inputs:{rotateTicks:"rotateTicks",showGridLines:"showGridLines",xOrient:"xOrient",xAxisOffset:"xAxisOffset",xScale:"xScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickInterval:"xAxisTickInterval",xAxisTickCount:"xAxisTickCount"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-x-axis",""],decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,O,1,12,"g",0),n["\u0275\u0275template"](2,k,1,5,"g",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("class",t.xAxisClassName)("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xScale),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showLabel))},directives:[o.NgIf,Mi,Ti],encapsulation:2,changeDetection:0}),Oi.propDecorators={xScale:[{type:n.Input}],dims:[{type:n.Input}],trimTicks:[{type:n.Input}],rotateTicks:[{type:n.Input}],maxTickLength:[{type:n.Input}],tickFormatting:[{type:n.Input}],showGridLines:[{type:n.Input}],showLabel:[{type:n.Input}],labelText:[{type:n.Input}],ticks:[{type:n.Input}],xAxisTickInterval:[{type:n.Input}],xAxisTickCount:[{type:n.Input}],xOrient:[{type:n.Input}],xAxisOffset:[{type:n.Input}],dimensionsChanged:[{type:n.Output}],ticksComponent:[{type:n.ViewChild,args:[Mi]}]};class ji{constructor(){this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.dimensionsChanged=new n.EventEmitter,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor="middle",this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){const e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){let e;const t="top"===this.orient||"right"===this.orient?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,e=this.scale,this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(e){return"Date"===e.constructor.name?e.toLocaleDateString():e.toLocaleString()},this.adjustedScale=e.bandwidth?function(t){return e(t)+.5*e.bandwidth()}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case"top":case"bottom":this.transform=function(e){return"translate("+this.adjustedScale(e)+",0)"},this.textAnchor="middle",this.y2=this.innerTickSize*t,this.y1=this.tickSpacing*t,this.dy=t<0?"0em":".71em";break;case"left":this.transform=function(e){return"translate(0,"+this.adjustedScale(e)+")"},this.textAnchor="end",this.x2=this.innerTickSize*-t,this.x1=this.tickSpacing*-t,this.dy=".32em";break;case"right":this.transform=function(e){return"translate(0,"+this.adjustedScale(e)+")"},this.textAnchor="start",this.x2=this.innerTickSize*-t,this.x1=this.tickSpacing*-t,this.dy=".32em"}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=ki(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e;const t=this.getMaxTicks(20),i=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[i]):(e=this.scale.domain(),e=Ei(e,t)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?Fi(e,this.maxTickLength):e}}ji.\u0275fac=function(e){return new(e||ji)},ji.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ji,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](T,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ticksElement=e.first)}},inputs:{tickArguments:"tickArguments",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",showGridLines:"showGridLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",scale:"scale",orient:"orient",tickValues:"tickValues",tickFormatting:"tickFormatting",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-y-axis-ticks",""],decls:6,vars:4,consts:[["ticksel",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],["stroke-width","0.01"],[1,"reference-area"],[4,"ngIf"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",null,0),n["\u0275\u0275template"](2,j,5,9,"g",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,P,1,2,"path",2),n["\u0275\u0275template"](4,B,2,2,"g",3),n["\u0275\u0275template"](5,z,2,1,"g",3)),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",t.ticks),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.referenceLineLength>1&&t.refMax&&t.refMin&&t.showRefLines),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.ticks),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.referenceLines))},directives:[o.NgForOf,o.NgIf],encapsulation:2,changeDetection:0}),ji.propDecorators={scale:[{type:n.Input}],orient:[{type:n.Input}],tickArguments:[{type:n.Input}],tickValues:[{type:n.Input}],tickStroke:[{type:n.Input}],trimTicks:[{type:n.Input}],maxTickLength:[{type:n.Input}],tickFormatting:[{type:n.Input}],showGridLines:[{type:n.Input}],gridLineWidth:[{type:n.Input}],height:[{type:n.Input}],referenceLines:[{type:n.Input}],showRefLabels:[{type:n.Input}],showRefLines:[{type:n.Input}],dimensionsChanged:[{type:n.Output}],ticksElement:[{type:n.ViewChild,args:["ticksel"]}]};class Pi{constructor(){this.showGridLines=!1,this.yOrient="left",this.yAxisOffset=0,this.dimensionsChanged=new n.EventEmitter,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),"right"===this.yOrient?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):(this.offset=this.offset,this.transform=`translate(${this.offset} , 0)`),void 0!==this.yAxisTickCount&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&"right"===this.yOrient?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}}Pi.\u0275fac=function(e){return new(e||Pi)},Pi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pi,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](ji,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.ticksComponent=e.first)}},inputs:{showGridLines:"showGridLines",yOrient:"yOrient",yAxisOffset:"yAxisOffset",yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showLabel:"showLabel",labelText:"labelText",yAxisTickInterval:"yAxisTickInterval",yAxisTickCount:"yAxisTickCount",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-y-axis",""],decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,U,1,14,"g",0),n["\u0275\u0275template"](2,q,1,5,"g",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("class",t.yAxisClassName)("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yScale),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showLabel))},directives:[o.NgIf,ji,Ti],encapsulation:2,changeDetection:0}),Pi.propDecorators={yScale:[{type:n.Input}],dims:[{type:n.Input}],trimTicks:[{type:n.Input}],maxTickLength:[{type:n.Input}],tickFormatting:[{type:n.Input}],ticks:[{type:n.Input}],showGridLines:[{type:n.Input}],showLabel:[{type:n.Input}],labelText:[{type:n.Input}],yAxisTickInterval:[{type:n.Input}],yAxisTickCount:[{type:n.Input}],yOrient:[{type:n.Input}],referenceLines:[{type:n.Input}],showRefLines:[{type:n.Input}],showRefLabels:[{type:n.Input}],yAxisOffset:[{type:n.Input}],dimensionsChanged:[{type:n.Output}],ticksComponent:[{type:n.ViewChild,args:[ji]}]};class Ni{}var Vi,Li,Bi;Ni.\u0275fac=function(e){return new(e||Ni)},Ni.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Ni}),Ni.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Ni,{declarations:function(){return[Ti,Oi,Mi,Pi,ji]},imports:function(){return[o.CommonModule]},exports:function(){return[Ti,Oi,Mi,Pi,ji]}}),function(e){e[e.popover="popover"]="popover",e[e.tooltip="tooltip"]="tooltip"}(Vi||(Vi={})),function(e){e[e.left="left"]="left",e[e.center="center"]="center",e[e.right="right"]="right"}(Li||(Li={})),function(e){e[e.all="all"]="all",e[e.focus="focus"]="focus",e[e.mouseover="mouseover"]="mouseover"}(Bi||(Bi={}));class $i{constructor(e,t,i){this.tooltipService=e,this.viewContainerRef=t,this.renderer=i,this.tooltipCssClass="",this.tooltipTitle="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=yi.top,this.tooltipAlignment=Li.center,this.tooltipType=Vi.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Bi.all,this.tooltipImmediateExit=!1,this.show=new n.EventEmitter,this.hide=new n.EventEmitter}get listensForFocus(){return this.tooltipShowEvent===Bi.all||this.tooltipShowEvent===Bi.focus}get listensForHover(){return this.tooltipShowEvent===Bi.all||this.tooltipShowEvent===Bi.mouseover}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component){if(this.component.instance.element.nativeElement.contains(e))return}this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;const t=e?0:this.tooltipShowTimeout;clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();const e=this.createBoundOptions();this.component=this.tooltipService.create(e),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},t)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen(document,"click",t=>{e.contains(t.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;const t=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?t():this.timeout=setTimeout(t,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}}$i.\u0275fac=function(e){return new(e||$i)(n["\u0275\u0275directiveInject"](_i),n["\u0275\u0275directiveInject"](n.ViewContainerRef),n["\u0275\u0275directiveInject"](n.Renderer2))},$i.\u0275dir=n["\u0275\u0275defineDirective"]({type:$i,selectors:[["","ngx-tooltip",""]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("focusin",function(){return t.onFocus()})("blur",function(){return t.onBlur()})("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(e){return t.onMouseLeave(e.target)})("click",function(){return t.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipShowEvent:"tooltipShowEvent",tooltipImmediateExit:"tooltipImmediateExit",tooltipTemplate:"tooltipTemplate",tooltipContext:"tooltipContext"},outputs:{show:"show",hide:"hide"}}),$i.ctorParameters=()=>[{type:_i},{type:n.ViewContainerRef},{type:n.Renderer2}],$i.propDecorators={tooltipCssClass:[{type:n.Input}],tooltipTitle:[{type:n.Input}],tooltipAppendToBody:[{type:n.Input}],tooltipSpacing:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipShowCaret:[{type:n.Input}],tooltipPlacement:[{type:n.Input}],tooltipAlignment:[{type:n.Input}],tooltipType:[{type:n.Input}],tooltipCloseOnClickOutside:[{type:n.Input}],tooltipCloseOnMouseLeave:[{type:n.Input}],tooltipHideTimeout:[{type:n.Input}],tooltipShowTimeout:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],tooltipShowEvent:[{type:n.Input}],tooltipContext:[{type:n.Input}],tooltipImmediateExit:[{type:n.Input}],show:[{type:n.Output}],hide:[{type:n.Output}],onFocus:[{type:n.HostListener,args:["focusin"]}],onBlur:[{type:n.HostListener,args:["blur"]}],onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave",["$event.target"]]}],onMouseClick:[{type:n.HostListener,args:["click"]}]};class Gi{}function zi(e){return e=e instanceof Date?e.toLocaleDateString():e.toLocaleString()}function Ui(e){return e.toLocaleString().replace(/[&'`"<>]/g,e=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"}[e]))}Gi.\u0275fac=function(e){return new(e||Gi)},Gi.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Gi}),Gi.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[gi,_i],imports:[[o.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Gi,{declarations:function(){return[wi,$i]},imports:function(){return[o.CommonModule]},exports:function(){return[wi,$i]}});const qi={};function Xi(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e=`a${e}`,qi[e]?Xi():(qi[e]=!0,e)}class Hi{constructor(){this.type="standard",this.tooltipDisabled=!1,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.barVisible=!1}ngOnInit(){this.gradientId="grad"+Xi().toString(),this.gradientFill=`url(#${this.gradientId})`}ngOnChanges(e){this.update()}update(){this.circle=this.getActiveCircle()}getActiveCircle(){const e=this.data.series.findIndex(e=>{const t=e.name;return t&&this.visibleValue&&t.toString()===this.visibleValue.toString()&&void 0!==e.value});if(-1!==e)return this.mapDataPointToCircle(this.data.series[e],e)}mapDataPointToCircle(e,t){const i=this.data.name,n=e.value,o=e.name,r=zi(o);let a;a="time"===this.scaleType?this.xScale(o):"linear"===this.scaleType?this.xScale(Number(o)):this.xScale(o);const s=this.yScale("standard"===this.type?n:e.d1),l=this.yScale.range()[0]-s;let c;c="linear"===this.colors.scaleType?"standard"===this.type?this.colors.getColor(n):this.colors.getColor(e.d1):this.colors.getColor(i);return{classNames:[`circle-data-${t}`],value:n,label:o,data:Object.assign({},e,{series:i,value:n,name:o}),cx:a,cy:s,radius:5,height:l,tooltipLabel:r,color:c,opacity:1,seriesName:i,gradientStops:this.getGradientStops(c),min:e.min,max:e.max}}getTooltipText({tooltipLabel:e,value:t,seriesName:i,min:n,max:o}){return`\n      <span class="tooltip-label">${Ui(i)} \u2022 ${Ui(e)}</span>\n      <span class="tooltip-val">${t.toLocaleString()}${this.getTooltipMinMaxText(n,o)}</span>\n    `}getTooltipMinMaxText(e,t){if(void 0!==e||void 0!==t){let i=" (";return void 0!==e?(void 0===t&&(i+="\u2265"),i+=e.toLocaleString(),void 0!==t&&(i+=" - ")):void 0!==t&&(i+="\u2264"),void 0!==t&&(i+=t.toLocaleString()),i+=")",i}return""}getGradientStops(e){return[{offset:0,color:e,opacity:.2},{offset:100,color:e,opacity:1}]}onClick(e){this.select.emit(e)}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name)}activateCircle(){this.barVisible=!0,this.activate.emit({name:this.data.name})}deactivateCircle(){this.barVisible=!1,this.circle.opacity=0,this.deactivate.emit({name:this.data.name})}}Hi.\u0275fac=function(e){return new(e||Hi)},Hi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hi,selectors:[["g","ngx-charts-circle-series",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",visibleValue:"visibleValue",activeEntries:"activeEntries",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-circle-series",""],decls:1,vars:1,consts:[[4,"ngIf"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"],["class","tooltip-bar",4,"ngIf"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"],[1,"tooltip-bar"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,W,5,20,"g",0),2&e&&n["\u0275\u0275property"]("ngIf",t.circle)},directives:function(){return[o.NgIf,Ki,Wi,$i]},encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":enter",[(0,r.style)({opacity:0}),(0,r.animate)(250,(0,r.style)({opacity:1}))])])]},changeDetection:0}),Hi.propDecorators={data:[{type:n.Input}],type:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],colors:[{type:n.Input}],scaleType:[{type:n.Input}],visibleValue:[{type:n.Input}],activeEntries:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class Wi{constructor(){this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}ngOnChanges(e){this.classNames=Array.isArray(this.classNames)?this.classNames.join(" "):"",this.classNames+="circle"}}Wi.\u0275fac=function(e){return new(e||Wi)},Wi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wi,selectors:[["g","ngx-charts-circle",""]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("click",function(){return t.onClick()})("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{classNames:"classNames",cx:"cx",cy:"cy",r:"r",fill:"fill",stroke:"stroke",data:"data",circleOpacity:"circleOpacity",pointerEvents:"pointerEvents"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-circle",""],decls:1,vars:8,template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"circle")),2&e&&n["\u0275\u0275attribute"]("cx",t.cx)("cy",t.cy)("r",t.r)("fill",t.fill)("stroke",t.stroke)("opacity",t.circleOpacity)("class",t.classNames)("pointer-events",t.pointerEvents)},encapsulation:2,changeDetection:0}),Wi.propDecorators={cx:[{type:n.Input}],cy:[{type:n.Input}],r:[{type:n.Input}],fill:[{type:n.Input}],stroke:[{type:n.Input}],data:[{type:n.Input}],classNames:[{type:n.Input}],circleOpacity:[{type:n.Input}],pointerEvents:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],onClick:[{type:n.HostListener,args:["click"]}],onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}]};class Yi{}Yi.\u0275fac=function(e){return new(e||Yi)},Yi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Yi,selectors:[["g","ngx-charts-grid-panel",""]],inputs:{path:"path",width:"width",height:"height",x:"x",y:"y"},attrs:["ngx-charts-grid-panel",""],decls:1,vars:4,consts:[["stroke","none",1,"gridpanel"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"rect",0)),2&e&&n["\u0275\u0275attribute"]("height",t.height)("width",t.width)("x",t.x)("y",t.y)},encapsulation:2,changeDetection:0}),Yi.propDecorators={path:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],x:[{type:n.Input}],y:[{type:n.Input}]};class Qi{ngOnChanges(e){this.update()}update(){this.gridPanels=this.getGridPanels()}getGridPanels(){return this.data.map(e=>{let t,i,n,o,r,a="odd";if("vertical"===this.orient){const s=this.xScale(e.name);Number.parseInt((s/this.xScale.step()).toString(),10)%2==1&&(a="even"),t=this.xScale.bandwidth()*this.xScale.paddingInner(),i=this.xScale.bandwidth()+t,n=this.dims.height,o=this.xScale(e.name)-t/2,r=0}else if("horizontal"===this.orient){const s=this.yScale(e.name);Number.parseInt((s/this.yScale.step()).toString(),10)%2==1&&(a="even"),t=this.yScale.bandwidth()*this.yScale.paddingInner(),i=this.dims.width,n=this.yScale.bandwidth()+t,o=0,r=this.yScale(e.name)-t/2}return{name:e.name,class:a,height:n,width:i,x:o,y:r}})}}Qi.\u0275fac=function(e){return new(e||Qi)},Qi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Qi,selectors:[["g","ngx-charts-grid-panel-series",""]],inputs:{data:"data",dims:"dims",xScale:"xScale",yScale:"yScale",orient:"orient"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-grid-panel-series",""],decls:1,vars:1,consts:[["ngx-charts-grid-panel","",3,"height","width","x","y","grid-panel","odd","even",4,"ngFor","ngForOf"],["ngx-charts-grid-panel","",3,"height","width","x","y"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,Y,1,10,"g",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.gridPanels)},directives:[o.NgForOf,Yi],encapsulation:2,changeDetection:0}),Qi.propDecorators={data:[{type:n.Input}],dims:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],orient:[{type:n.Input}]};class Ki{constructor(){this.orientation="vertical"}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%","horizontal"===this.orientation?this.x2="100%":"vertical"===this.orientation&&(this.y1="100%")}}Ki.\u0275fac=function(e){return new(e||Ki)},Ki.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ki,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-svg-linear-gradient",""],decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"linearGradient",0),n["\u0275\u0275template"](1,Q,1,5,"stop",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("id",t.name),n["\u0275\u0275attribute"]("x1",t.x1)("y1",t.y1)("x2",t.x2)("y2",t.y2),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.stops))},directives:[o.NgForOf],encapsulation:2,changeDetection:0}),Ki.propDecorators={orientation:[{type:n.Input}],name:[{type:n.Input}],stops:[{type:n.Input}]};class Ji{constructor(){this.endOpacity=1,this.cx=0,this.cy=0}get stops(){return this.stopsInput||this.stopsDefault}set stops(e){this.stopsInput=e}ngOnChanges(e){this.r="30%",("color"in e||"startOpacity"in e||"endOpacity"in e)&&(this.stopsDefault=[{offset:0,color:this.color,opacity:this.startOpacity},{offset:100,color:this.color,opacity:this.endOpacity}])}}Ji.\u0275fac=function(e){return new(e||Ji)},Ji.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ji,selectors:[["g","ngx-charts-svg-radial-gradient",""]],inputs:{endOpacity:"endOpacity",cx:"cx",cy:"cy",stops:"stops",color:"color",name:"name",startOpacity:"startOpacity"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-svg-radial-gradient",""],decls:2,vars:5,consts:[["gradientUnits","userSpaceOnUse",3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"radialGradient",0),n["\u0275\u0275template"](1,K,1,5,"stop",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("id",t.name),n["\u0275\u0275attribute"]("cx",t.cx)("cy",t.cy)("r",t.r),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.stops))},directives:[o.NgForOf],encapsulation:2,changeDetection:0}),Ji.propDecorators={color:[{type:n.Input}],name:[{type:n.Input}],startOpacity:[{type:n.Input}],endOpacity:[{type:n.Input}],cx:[{type:n.Input}],cy:[{type:n.Input}],stops:[{type:n.Input}]};class Zi{constructor(e){this.opacity=1,this.startOpacity=.5,this.endOpacity=1,this.gradient=!1,this.animations=!0,this.select=new n.EventEmitter,this.initialized=!1,this.hasGradient=!1,this.element=e.nativeElement}ngOnChanges(e){this.initialized?this.update():(this.loadAnimation(),this.initialized=!0)}update(){this.gradientId="grad"+Xi().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl()}loadAnimation(){this.areaPath=this.startingPath,setTimeout(this.update.bind(this),100)}updatePathEl(){const e=(0,d.select)(this.element).select(".area");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:this.endOpacity}]}}function en(e,t,i,n){return i*(1-Math.pow(2,-10*e/n))*1024/1023+t}function tn(e,t,i,n,o){const r=Number(e),a=Number(t),s=r>a,l=Math.max(0,i),c=Math.pow(10,l),d=1e3*Number(n);let p;function u(e){let t;const i=e-p;t=s?r-en(i,0,r-a,d):en(i,r,a-r,d),t=s?t<a?a:t:t>a?a:t,t=Math.round(t*c)/c;const n=i<d;if(o({value:t,progress:i,timestamp:e,finished:!n}),n)return requestAnimationFrame(e=>u(e))}return requestAnimationFrame(e=>(p=e,u(e)))}function nn(e){const t=Number(e);return t%1!=0&&Math.abs(t)<=10?2:0}Zi.\u0275fac=function(e){return new(e||Zi)(n["\u0275\u0275directiveInject"](n.ElementRef))},Zi.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zi,selectors:[["g","ngx-charts-area",""]],inputs:{opacity:"opacity",startOpacity:"startOpacity",endOpacity:"endOpacity",gradient:"gradient",animations:"animations",data:"data",path:"path",startingPath:"startingPath",fill:"fill",activeLabel:"activeLabel",stops:"stops"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-area",""],decls:2,vars:5,consts:[[4,"ngIf"],[1,"area"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,J,2,2,"defs",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](1,"path",1)),2&e&&(n["\u0275\u0275property"]("ngIf",t.gradient),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("opacity",t.opacity),n["\u0275\u0275attribute"]("d",t.areaPath)("fill",t.gradient?t.gradientFill:t.fill))},directives:[o.NgIf,Ki],encapsulation:2,changeDetection:0}),Zi.ctorParameters=()=>[{type:n.ElementRef}],Zi.propDecorators={data:[{type:n.Input}],path:[{type:n.Input}],startingPath:[{type:n.Input}],fill:[{type:n.Input}],opacity:[{type:n.Input}],startOpacity:[{type:n.Input}],endOpacity:[{type:n.Input}],activeLabel:[{type:n.Input}],gradient:[{type:n.Input}],stops:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class on{constructor(e,t){this.cd=e,this.countDuration=1,this.countPrefix="",this.countSuffix="",this.countChange=new n.EventEmitter,this.countFinish=new n.EventEmitter,this.value="",this._countDecimals=0,this._countTo=0,this._countFrom=0,this.nativeElement=t.nativeElement}set countDecimals(e){this._countDecimals=e}get countDecimals(){return this._countDecimals?this._countDecimals:nn(this.countTo)}set countTo(e){this._countTo=parseFloat(e),this.start()}get countTo(){return this._countTo}set countFrom(e){this._countFrom=parseFloat(e),this.start()}get countFrom(){return this._countFrom}ngOnDestroy(){cancelAnimationFrame(this.animationReq)}start(){cancelAnimationFrame(this.animationReq);const e=this.valueFormatting||(e=>`${this.countPrefix}${e.toLocaleString()}${this.countSuffix}`);this.animationReq=tn(this.countFrom,this.countTo,this.countDecimals,this.countDuration,({value:t,progress:i,finished:n})=>{this.value=e(t),this.cd.markForCheck(),n||this.countChange.emit({value:this.value,progress:i}),n&&this.countFinish.emit({value:this.value,progress:i})})}}let rn;on.\u0275fac=function(e){return new(e||on)(n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.ElementRef))},on.\u0275cmp=n["\u0275\u0275defineComponent"]({type:on,selectors:[["","ngx-charts-count-up",""]],inputs:{countDuration:"countDuration",countPrefix:"countPrefix",countSuffix:"countSuffix",countDecimals:"countDecimals",countTo:"countTo",countFrom:"countFrom",valueFormatting:"valueFormatting"},outputs:{countChange:"countChange",countFinish:"countFinish"},attrs:["ngx-charts-count-up",""],decls:1,vars:1,template:function(e,t){1&e&&n["\u0275\u0275text"](0),2&e&&n["\u0275\u0275textInterpolate1"](" ",t.value," ")},encapsulation:2}),on.ctorParameters=()=>[{type:n.ChangeDetectorRef},{type:n.ElementRef}],on.propDecorators={countDuration:[{type:n.Input}],countPrefix:[{type:n.Input}],countSuffix:[{type:n.Input}],valueFormatting:[{type:n.Input}],countDecimals:[{type:n.Input}],countTo:[{type:n.Input}],countFrom:[{type:n.Input}],countChange:[{type:n.Output}],countFinish:[{type:n.Output}]},"undefined"!=typeof window?rn=window:"undefined"!=typeof global&&(rn=global);const an=rn.MouseEvent;function sn(e,t=!1,i=!0){if("function"==typeof an)return new an(e,{bubbles:t,cancelable:i});{const n=document.createEvent("MouseEvent");return n.initEvent(e,t,i),n}}class ln{constructor(){this.anchorOpacity=0,this.anchorPos=-1,this.anchorValues=[],this.showPercentage=!1,this.tooltipDisabled=!1,this.hover=new n.EventEmitter}getValues(e){const t=[];for(const i of this.results){const n=i.series.find(t=>t.name.toString()===e.toString());let o=i.name;if(o instanceof Date&&(o=o.toLocaleDateString()),n){const e=n.name;let r,a=n.value;if(this.showPercentage&&(a=(n.d1-n.d0).toFixed(2)+"%"),"linear"===this.colors.scaleType){let e=a;n.d1&&(e=n.d1),r=this.colors.getColor(e)}else r=this.colors.getColor(i.name);const s=Object.assign({},n,{value:a,name:e,series:o,min:n.min,max:n.max,color:r});t.push(s)}}return t}mouseMove(e){const t=e.pageX-e.target.getBoundingClientRect().left,i=this.findClosestPointIndex(t),n=this.xSet[i];if(this.anchorPos=this.xScale(n),this.anchorPos=Math.max(0,this.anchorPos),this.anchorPos=Math.min(this.dims.width,this.anchorPos),this.anchorValues=this.getValues(n),this.anchorPos!==this.lastAnchorPos){const e=sn("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=.7,this.hover.emit({value:n}),this.showTooltip(),this.lastAnchorPos=this.anchorPos}}findClosestPointIndex(e){let t=0,i=this.xSet.length-1,n=Number.MAX_VALUE,o=0;for(;t<=i;){const r=(t+i)/2|0,a=this.xScale(this.xSet[r]),s=Math.abs(a-e);if(s<n&&(n=s,o=r),a<e)t=r+1;else{if(!(a>e)){n=0,o=r;break}i=r-1}}return o}showTooltip(){const e=sn("mouseenter");this.tooltipAnchor.nativeElement.dispatchEvent(e)}hideTooltip(){const e=sn("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=0,this.lastAnchorPos=-1}getToolTipText(e){let t="";return void 0!==e.series?t+=e.series:t+="???",t+=": ",void 0!==e.value&&(t+=e.value.toLocaleString()),void 0===e.min&&void 0===e.max||(t+=" (",void 0!==e.min?(void 0===e.max&&(t+="\u2265"),t+=e.min.toLocaleString(),void 0!==e.max&&(t+=" - ")):void 0!==e.max&&(t+="\u2264"),void 0!==e.max&&(t+=e.max.toLocaleString()),t+=")"),t}}ln.\u0275fac=function(e){return new(e||ln)},ln.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ln,selectors:[["g","ngx-charts-tooltip-area",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Z,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipAnchor=e.first)}},inputs:{showPercentage:"showPercentage",tooltipDisabled:"tooltipDisabled",dims:"dims",xSet:"xSet",xScale:"xScale",yScale:"yScale",results:"results",colors:"colors",tooltipTemplate:"tooltipTemplate"},outputs:{hover:"hover"},attrs:["ngx-charts-tooltip-area",""],decls:6,vars:18,consts:[["y","0",1,"tooltip-area",2,"opacity","0","cursor","auto",3,"mousemove","mouseleave"],["defaultTooltipTemplate",""],["y","0","ngx-tooltip","",1,"tooltip-anchor",3,"tooltipDisabled","tooltipPlacement","tooltipType","tooltipSpacing","tooltipTemplate","tooltipContext","tooltipImmediateExit"],["tooltipAnchor",""],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"]],template:function(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"rect",0),n["\u0275\u0275listener"]("mousemove",function(e){return t.mouseMove(e)})("mouseleave",function(){return t.hideTooltip()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](2,te,2,1,"ng-template",null,1,n["\u0275\u0275templateRefExtractor"]),n["\u0275\u0275element"](4,"rect",2,3),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275reference"](3);n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("x",0)("width",t.dims.width)("height",t.dims.height),n["\u0275\u0275advance"](3),n["\u0275\u0275styleProp"]("opacity",t.anchorOpacity)("pointer-events","none"),n["\u0275\u0275property"]("@animationState",0!==t.anchorOpacity?"active":"inactive")("tooltipDisabled",t.tooltipDisabled)("tooltipPlacement","right")("tooltipType","tooltip")("tooltipSpacing",15)("tooltipTemplate",t.tooltipTemplate?t.tooltipTemplate:e)("tooltipContext",t.anchorValues)("tooltipImmediateExit",!0),n["\u0275\u0275attribute"]("x",t.anchorPos)("width",1)("height",t.dims.height)}},directives:[$i,o.NgForOf],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)("inactive => active",[(0,r.style)({opacity:0}),(0,r.animate)(250,(0,r.style)({opacity:.7}))]),(0,r.transition)("active => inactive",[(0,r.style)({opacity:.7}),(0,r.animate)(250,(0,r.style)({opacity:0}))])])]},changeDetection:0}),ln.propDecorators={dims:[{type:n.Input}],xSet:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],results:[{type:n.Input}],colors:[{type:n.Input}],showPercentage:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],hover:[{type:n.Output}],tooltipAnchor:[{type:n.ViewChild,args:["tooltipAnchor",{static:!1}]}]};class cn{constructor(e,t){this.cd=t,this.height=50,this.select=new n.EventEmitter,this.onDomainChange=new n.EventEmitter,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(e){this.update(),this.initialized||(this.addBrush(),this.initialized=!0)}update(){this.dims=this.getDims(),this.height=this.dims.height;const e=this.view[1]-this.height;this.xDomain=this.getXDomain(),this.xScale=this.getXScale(),this.brush&&this.updateBrush(),this.transform=`translate(0 , ${e})`,this.filterId="filter"+Xi().toString(),this.filter=`url(#${this.filterId})`,this.cd.markForCheck()}getXDomain(){let e=[];for(const i of this.results)for(const t of i.series)e.includes(t.name)||e.push(t.name);let t=[];if("time"===this.scaleType){t=[Math.min(...e),Math.max(...e)]}else if("linear"===this.scaleType){e=e.map(e=>Number(e));t=[Math.min(...e),Math.max(...e)]}else t=e;return t}getXScale(){let e;return"time"===this.scaleType?e=(0,u.scaleTime)().range([0,this.dims.width]).domain(this.xDomain):"linear"===this.scaleType?e=(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.xDomain):"ordinal"===this.scaleType&&(e=(0,u.scalePoint)().range([0,this.dims.width]).padding(.1).domain(this.xDomain)),e}addBrush(){if(this.brush)return;const e=this.height,t=this.view[0];this.brush=(0,p.brushX)().extent([[0,0],[t,e]]).on("brush end",()=>{const e=(d.event.selection||this.xScale.range()).map(this.xScale.invert);this.onDomainChange.emit(e),this.cd.markForCheck()}),(0,d.select)(this.element).select(".brush").call(this.brush)}updateBrush(){if(!this.brush)return;const e=this.height,t=this.view[0];this.brush.extent([[0,0],[t,e]]),(0,d.select)(this.element).select(".brush").call(this.brush),(0,d.select)(this.element).select(".selection").attr("fill",void 0).attr("stroke",void 0).attr("fill-opacity",void 0),this.cd.markForCheck()}getDims(){return{width:this.view[0],height:this.height}}}cn.\u0275fac=function(e){return new(e||cn)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef))},cn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:cn,selectors:[["g","ngx-charts-timeline",""]],inputs:{height:"height",view:"view",state:"state",results:"results",scheme:"scheme",customColors:"customColors",legend:"legend",miniChart:"miniChart",autoScale:"autoScale",scaleType:"scaleType"},outputs:{select:"select",onDomainChange:"onDomainChange"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-timeline",""],ngContentSelectors:A,decls:7,vars:4,consts:[[1,"timeline"],["in","SourceGraphic","type","matrix","values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"],[1,"embedded-chart"],["x","0","y","0",1,"brush-background"],[1,"brush"]],template:function(e,t){1&e&&(n["\u0275\u0275projectionDef"](),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275elementStart"](1,"filter"),n["\u0275\u0275element"](2,"feColorMatrix",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](3,"g",2),n["\u0275\u0275projection"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](5,"rect",3),n["\u0275\u0275element"](6,"g",4),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("id",t.filterId),n["\u0275\u0275advance"](4),n["\u0275\u0275attribute"]("width",t.view[0])("height",t.height))},styles:[".timeline .brush-background{fill:rgba(0,0,0,.05)}.timeline .brush .selection{fill:rgba(0,0,0,.1);stroke:#888;stroke-width:1px}.timeline .brush .handle{fill-opacity:0}.timeline .embedded-chart{opacity:.6}"],encapsulation:2,changeDetection:0}),cn.ctorParameters=()=>[{type:n.ElementRef},{type:n.ChangeDetectorRef}],cn.propDecorators={view:[{type:n.Input}],state:[{type:n.Input}],results:[{type:n.Input}],scheme:[{type:n.Input}],customColors:[{type:n.Input}],legend:[{type:n.Input}],miniChart:[{type:n.Input}],autoScale:[{type:n.Input}],scaleType:[{type:n.Input}],height:[{type:n.Input}],select:[{type:n.Output}],onDomainChange:[{type:n.Output}]};class dn{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new n.EventEmitter,this.labelActivate=new n.EventEmitter,this.labelDeactivate=new n.EventEmitter,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){const e=[];for(const t of this.data){const i=zi(t);-1===e.findIndex(e=>e.label===i)&&e.push({label:t,formattedLabel:i,color:this.colors.getColor(t)})}return e}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.label===t.name)}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,t){return t.label}}dn.\u0275fac=function(e){return new(e||dn)(n["\u0275\u0275directiveInject"](n.ChangeDetectorRef))},dn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:dn,selectors:[["ngx-charts-legend"]],inputs:{horizontal:"horizontal",data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"label","formattedLabel","color","isActive","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275template"](1,ie,3,1,"header",0),n["\u0275\u0275elementStart"](2,"div",1),n["\u0275\u0275elementStart"](3,"ul",2),n["\u0275\u0275template"](4,ne,2,4,"li",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275styleProp"]("width",t.width,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",(null==t.title?null:t.title.length)>0),n["\u0275\u0275advance"](2),n["\u0275\u0275styleProp"]("max-height",t.height-45,"px"),n["\u0275\u0275classProp"]("horizontal-legend",t.horizontal),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.legendEntries)("ngForTrackBy",t.trackBy))},directives:function(){return[o.NgIf,o.NgForOf,pn]},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{font-size:14px;font-weight:700;margin-bottom:5px;margin-left:10px;overflow:hidden;white-space:nowrap}.chart-legend li,.chart-legend ul{list-style:none;margin:0;padding:0}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{background:rgba(0,0,0,.05);border-radius:3px;float:left;line-height:85%;list-style:none;overflow-x:hidden;overflow-y:auto;text-align:left;white-space:nowrap;width:100%}.chart-legend .legend-label{color:#afb7c8;cursor:pointer;font-size:90%;margin:8px}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{border-radius:3px;color:#5b646b;display:inline-block;height:15px;margin-right:5px;width:15px}.chart-legend .legend-label-text{font-size:12px;line-height:15px;vertical-align:top;width:calc(100% - 20px)}.chart-legend .legend-label-text,.chart-legend .legend-title-text{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chart-legend .legend-title-text{line-height:16px;vertical-align:bottom}"],encapsulation:2,changeDetection:0}),dn.ctorParameters=()=>[{type:n.ChangeDetectorRef}],dn.propDecorators={data:[{type:n.Input}],title:[{type:n.Input}],colors:[{type:n.Input}],height:[{type:n.Input}],width:[{type:n.Input}],activeEntries:[{type:n.Input}],horizontal:[{type:n.Input}],labelClick:[{type:n.Output}],labelActivate:[{type:n.Output}],labelDeactivate:[{type:n.Output}]};class pn{constructor(){this.isActive=!1,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.toggle=new n.EventEmitter}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}}pn.\u0275fac=function(e){return new(e||pn)},pn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:pn,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{isActive:"isActive",color:"color",label:"label",formattedLabel:"formattedLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"title","click"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"span",0),n["\u0275\u0275listener"]("click",function(){return t.select.emit(t.formattedLabel)}),n["\u0275\u0275elementStart"](1,"span",1),n["\u0275\u0275listener"]("click",function(){return t.toggle.emit(t.formattedLabel)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"span",2),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275classProp"]("active",t.isActive),n["\u0275\u0275property"]("title",t.formattedLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("background-color",t.color),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.trimmedLabel," "))},encapsulation:2,changeDetection:0}),pn.propDecorators={color:[{type:n.Input}],label:[{type:n.Input}],formattedLabel:[{type:n.Input}],isActive:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],toggle:[{type:n.Output}],onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}]};class un{constructor(e){this.sanitizer=e,this.horizontal=!1}ngOnChanges(e){const t=this.gradientString(this.colors.range(),this.colors.domain()),i=this.horizontal?"right":"bottom";this.gradient=this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to ${i}, ${t})`)}gradientString(e,t){t.push(1);const i=[];return e.reverse().forEach((e,n)=>{i.push(`${e} ${Math.round(100*t[n])}%`)}),i.join(", ")}}un.\u0275fac=function(e){return new(e||un)(n["\u0275\u0275directiveInject"](m.DomSanitizer))},un.\u0275cmp=n["\u0275\u0275defineComponent"]({type:un,selectors:[["ngx-charts-scale-legend"]],inputs:{horizontal:"horizontal",valueRange:"valueRange",colors:"colors",height:"height",width:"width"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275elementStart"](1,"div",1),n["\u0275\u0275elementStart"](2,"span"),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](4,"div",2),n["\u0275\u0275elementStart"](5,"div",1),n["\u0275\u0275elementStart"](6,"span"),n["\u0275\u0275text"](7),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275styleProp"]("height",t.horizontal?void 0:t.height,"px")("width",t.width,"px"),n["\u0275\u0275classProp"]("horizontal-legend",t.horizontal),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](t.valueRange[1].toLocaleString()),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("background",t.gradient),n["\u0275\u0275advance"](3),n["\u0275\u0275textInterpolate"](t.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{display:flex;flex-direction:column;text-align:center}.chart-legend .scale-legend-wrap{border-radius:5px;display:inline-block;flex:1;margin:0 auto;width:30px}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{height:30px;margin:0 16px;width:auto}"],encapsulation:2,changeDetection:0}),un.ctorParameters=()=>[{type:m.DomSanitizer}],un.propDecorators={valueRange:[{type:n.Input}],colors:[{type:n.Input}],height:[{type:n.Input}],width:[{type:n.Input}],horizontal:[{type:n.Input}]};class mn{constructor(){this.label="Total",this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.legendItems=[],this.labelFormatting=e=>e,this.percentageFormatting=e=>e,this.defaultValueFormatting=e=>e.toLocaleString()}ngOnChanges(e){this.update()}getTotal(){return this.data.map(e=>e.value).reduce((e,t)=>e+t,0)}update(){this.total=this.getTotal(),this.roundedTotal=this.total,this.legendItems=this.getLegendItems()}getLegendItems(){return this.data.map(e=>{const t=zi(e.name),i=e.value,n=this.colors.getColor(t),o=this.total>0?i/this.total*100:0,r="function"==typeof this.labelFormatting?this.labelFormatting(t):t;return{_value:i,data:e,value:i,color:n,label:r,displayLabel:Fi(r,20),origialLabel:e.name,percentage:this.percentageFormatting?this.percentageFormatting(o):o.toLocaleString()}})}trackBy(e){return e.formattedLabel}}mn.\u0275fac=function(e){return new(e||mn)},mn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:mn,selectors:[["ngx-charts-advanced-legend"]],inputs:{label:"label",animations:"animations",labelFormatting:"labelFormatting",percentageFormatting:"percentageFormatting",width:"width",data:"data",colors:"colors",valueFormatting:"valueFormatting"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],decls:8,vars:7,consts:[[1,"advanced-pie-legend"],["class","total-value","ngx-charts-count-up","",3,"countTo","valueFormatting",4,"ngIf"],["class","total-value",4,"ngIf"],[1,"total-label"],[1,"legend-items-container"],[1,"legend-items"],["tabindex","-1","class","legend-item",3,"mouseenter","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-count-up","",1,"total-value",3,"countTo","valueFormatting"],[1,"total-value"],["tabindex","-1",1,"legend-item",3,"mouseenter","mouseleave","click"],[1,"item-color"],["class","item-value","ngx-charts-count-up","",3,"countTo","valueFormatting",4,"ngIf"],["class","item-value",4,"ngIf"],[1,"item-label"],["class","item-percent","ngx-charts-count-up","",3,"countTo","countSuffix",4,"ngIf"],["class","item-percent",4,"ngIf"],["ngx-charts-count-up","",1,"item-value",3,"countTo","valueFormatting"],[1,"item-value"],["ngx-charts-count-up","",1,"item-percent",3,"countTo","countSuffix"],[1,"item-percent"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div",0),n["\u0275\u0275template"](1,oe,1,2,"div",1),n["\u0275\u0275template"](2,re,2,1,"div",2),n["\u0275\u0275elementStart"](3,"div",3),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275elementStart"](6,"div",5),n["\u0275\u0275template"](7,de,8,7,"div",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275styleProp"]("width",t.width,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.label," "),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",t.legendItems)("ngForTrackBy",t.trackBy))},directives:[o.NgIf,o.NgForOf,on],styles:[".advanced-pie-legend{float:left;position:relative;top:50%;transform:translateY(-50%)}.advanced-pie-legend .total-value{font-size:36px}.advanced-pie-legend .total-label{font-size:24px;margin-bottom:19px}.advanced-pie-legend .legend-items-container{width:100%}.advanced-pie-legend .legend-items-container .legend-items{overflow:auto;white-space:nowrap}.advanced-pie-legend .legend-items-container .legend-items .legend-item{cursor:pointer;display:inline-block;margin-right:20px}.advanced-pie-legend .legend-items-container .legend-items .legend-item:focus{outline:none}.advanced-pie-legend .legend-items-container .legend-items .legend-item:hover{color:#000;transition:.2s}.advanced-pie-legend .legend-items-container .legend-items .legend-item .item-value{font-size:24px;margin-left:11px;margin-top:-6px}.advanced-pie-legend .legend-items-container .legend-items .legend-item .item-label{font-size:14px;margin-left:11px;margin-top:-6px;opacity:.7}.advanced-pie-legend .legend-items-container .legend-items .legend-item .item-percent{font-size:24px;margin-left:11px;opacity:.7}.advanced-pie-legend .legend-items-container .legend-items .legend-item .item-color{border-left:4px solid;float:left;height:42px;margin-right:7px;width:4px}"],encapsulation:2,changeDetection:0}),mn.propDecorators={width:[{type:n.Input}],data:[{type:n.Input}],colors:[{type:n.Input}],label:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],percentageFormatting:[{type:n.Input}]};class hn{}function fn({width:e,height:t,margins:i,showXAxis:n=!1,showYAxis:o=!1,xAxisHeight:r=0,yAxisWidth:a=0,showXLabel:s=!1,showYLabel:l=!1,showLegend:c=!1,legendType:d="ordinal",legendPosition:p="right",columns:u=12}){let m=i[3],h=e,f=t-i[0]-i[2];if(c&&"right"===p&&(u-="ordinal"===d?2:1),h=h*u/12,h=h-i[1]-i[3],n&&(f-=5,f-=r,s)){f-=30}if(o&&(h-=5,h-=a,m+=a,m+=10,l)){const e=30;h-=e,m+=e}return h=Math.max(0,h),f=Math.max(0,f),{width:Math.floor(h),height:Math.floor(f),xOffset:Math.floor(m)}}hn.\u0275fac=function(e){return new(e||hn)},hn.\u0275mod=n["\u0275\u0275defineNgModule"]({type:hn}),hn.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule,Ni,Gi],o.CommonModule,Ni,Gi]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](hn,{declarations:function(){return[Zi,Ai,on,ln,Di,dn,pn,un,Wi,Hi,Yi,Qi,Ki,Ji,cn,mn,Ri]},imports:function(){return[o.CommonModule,Ni,Gi]},exports:function(){return[o.CommonModule,Ni,Gi,Zi,Ai,on,ln,Di,dn,pn,un,Wi,Hi,Yi,Qi,Ki,Ji,cn,mn,Ri]}});let gn=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class vn{constructor(e,t,i,n){"string"==typeof e&&(e=gn.find(t=>t.name===e)),this.colorDomain=e.domain,this.scaleType=t,this.domain=i,this.customColors=n,this.scale=this.generateColorScheme(e,t,this.domain)}generateColorScheme(e,t,i){let n;if("string"==typeof e&&(e=gn.find(t=>t.name===e)),"quantile"===t)n=(0,u.scaleQuantile)().range(e.domain).domain(i);else if("ordinal"===t)n=(0,u.scaleOrdinal)().range(e.domain).domain(i);else if("linear"===t){const t=[...e.domain];1===t.length&&(t.push(t[0]),this.colorDomain=t);const i=(0,f.range)(0,1,1/t.length);n=(0,u.scaleLinear)().domain(i).range(t)}return n}getColor(e){if(null==e)throw new Error("Value can not be null");if("linear"===this.scaleType){const t=(0,u.scaleLinear)().domain(this.domain).range([0,1]);return this.scale(t(e))}{if("function"==typeof this.customColors)return this.customColors(e);const t=e.toString();let i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(e=>e.name.toLowerCase()===t.toLowerCase())),i?i.value:this.scale(e)}}getLinearGradientStops(e,t){void 0===t&&(t=this.domain[0]);const i=(0,u.scaleLinear)().domain(this.domain).range([0,1]),n=(0,u.scaleBand)().domain(this.colorDomain).range([0,1]),o=this.getColor(e),r=i(t),a=this.getColor(t),s=i(e);let l=1,c=r;const d=[];for(d.push({color:a,offset:r,originalOffset:r,opacity:1});c<s&&l<this.colorDomain.length;){const e=this.colorDomain[l],t=n(e);if(t<=r)l++;else{if(t.toFixed(4)>=(s-n.bandwidth()).toFixed(4))break;d.push({color:e,offset:t,opacity:1}),c=t,l++}}if(d[d.length-1].offset<100&&d.push({color:o,offset:s,opacity:1}),s===r)d[0].offset=0,d[1].offset=100;else if(100!==d[d.length-1].offset)for(const p of d)p.offset=(p.offset-r)/(s-r)*100;return d}}function xn(e){const t=new Set;for(const i of e)for(const e of i.series)t.add(e.name);return Array.from(t)}function yn(e,t=!0){if(t){if(e.every(e=>e instanceof Date))return"time"}return e.every(e=>"number"==typeof e)?"linear":"ordinal"}class bn extends Ai{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition="right",this.baseValue="auto",this.showGridLines=!0,this.curve=h.curveLinear,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset}, ${this.margin[0]})`,this.clipPathId="clip"+Xi().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=xn(this.results);this.scaleType=yn(e);let t,i,n=[];return"linear"===this.scaleType&&(e=e.map(e=>Number(e))),"time"!==this.scaleType&&"linear"!==this.scaleType||(t=this.xScaleMin?this.xScaleMin:Math.min(...e),i=this.xScaleMax?this.xScaleMax:Math.max(...e)),"time"===this.scaleType?(n=[new Date(t),new Date(i)],this.xSet=[...e].sort((e,t)=>{const i=e.getTime(),n=t.getTime();return i>n?1:n>i?-1:0})):"linear"===this.scaleType?(n=[t,i],this.xSet=[...e].sort((e,t)=>e-t)):(n=e,this.xSet=e),n}getYDomain(){const e=[];for(const i of this.results)for(const t of i.series)e.includes(t.value)||e.push(t.value);const t=[...e];this.autoScale||t.push(0),"auto"!==this.baseValue&&t.push(this.baseValue);return[this.yScaleMin?this.yScaleMin:Math.min(...t),this.yScaleMax?this.yScaleMax:Math.max(...t)]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,t){let i;return"time"===this.scaleType?i=(0,u.scaleTime)():"linear"===this.scaleType?i=(0,u.scaleLinear)():"ordinal"===this.scaleType&&(i=(0,u.scalePoint)().padding(.1)),i.range([0,t]).domain(e),this.roundDomains?i.nice():i}getYScale(e,t){const i=(0,u.scaleLinear)().range([t,0]).domain(e);return this.roundDomains?i.nice():i}getScaleType(e){let t=!0,i=!0;for(const n of e)this.isDate(n)||(t=!1),"number"!=typeof n&&(i=!1);return t?"time":i?"linear":"ordinal"}isDate(e){return e instanceof Date}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}}bn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](bn)))(t||bn)}}(),bn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bn,selectors:[["ngx-charts-area-chart"]],contentQueries:function(e,t,i){if(1&e&&(n["\u0275\u0275contentQuery"](i,pe,5),n["\u0275\u0275contentQuery"](i,ue,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.seriesTooltipTemplate=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseleave",function(){return t.hideCircles()})},inputs:{legendTitle:"legendTitle",legendPosition:"legendPosition",baseValue:"baseValue",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",legend:"legend",state:"state",xAxis:"xAxis",yAxis:"yAxis",autoScale:"autoScale",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",timeline:"timeline",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"area-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-area-series","",3,"xScale","yScale","baseValue","colors","data","activeEntries","scaleType","gradient","curve","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate","hover"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","activeEntries","data","scaleType","visibleValue","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange"],["ngx-charts-area-series","",3,"xScale","yScale","baseValue","colors","data","scaleType","gradient","curve","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"g",1),n["\u0275\u0275template"](5,me,1,10,"g",2),n["\u0275\u0275template"](6,he,1,9,"g",3),n["\u0275\u0275elementStart"](7,"g"),n["\u0275\u0275template"](8,fe,2,10,"g",4),n["\u0275\u0275template"](9,ve,3,9,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,be,2,13,"g",6),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("id",t.clipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("clip-path",t.clipPath),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.tooltipDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.timeline&&"ordinal"!=t.scaleType))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Dn,ln,Hi,cn]},styles:[Ae],encapsulation:2,changeDetection:0}),bn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],state:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],baseValue:[{type:n.Input}],autoScale:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],timeline:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],roundDomains:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],xScaleMin:[{type:n.Input}],xScaleMax:[{type:n.Input}],yScaleMin:[{type:n.Input}],yScaleMax:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],seriesTooltipTemplate:[{type:n.ContentChild,args:["seriesTooltipTemplate"]}],hideCircles:[{type:n.HostListener,args:["mouseleave"]}]};class Cn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.showGridLines=!0,this.curve=h.curveLinear,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height);for(let e=0;e<this.xSet.length;e++){const t=this.xSet[e];let i=0,n=0;for(const e of this.results){const i=e.series.find(e=>{let i=e.name,n=t;return"time"===this.scaleType&&(i=i.valueOf(),n=n.valueOf()),i===n});i&&(n+=i.value)}for(const e of this.results){let o=e.series.find(e=>{let i=e.name,n=t;return"time"===this.scaleType&&(i=i.valueOf(),n=n.valueOf()),i===n});o?(o.d0=i,o.d1=i+o.value,i+=o.value):(o={name:t,value:0,d0:i,d1:i},e.series.push(o)),n>0?(o.d0=100*o.d0/n,o.d1=100*o.d1/n):(o.d0=0,o.d1=0)}}this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Xi().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=xn(this.results);this.scaleType=yn(e);let t=[];if("time"===this.scaleType){const i=Math.min(...e),n=Math.max(...e);t=[new Date(i),new Date(n)],this.xSet=[...e].sort((e,t)=>{const i=e.getTime(),n=t.getTime();return i>n?1:n>i?-1:0})}else if("linear"===this.scaleType){e=e.map(e=>Number(e));t=[Math.min(...e),Math.max(...e)],this.xSet=[...e].sort((e,t)=>e-t)}else t=e,this.xSet=e;return t}getYDomain(){return[0,100]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,t){let i;return"time"===this.scaleType?i=(0,u.scaleTime)():"linear"===this.scaleType?i=(0,u.scaleLinear)():"ordinal"===this.scaleType&&(i=(0,u.scalePoint)().padding(.1)),i.range([0,t]).domain(e),this.roundDomains?i.nice():i}getYScale(e,t){const i=(0,u.scaleLinear)().range([t,0]).domain(e);return this.roundDomains?i.nice():i}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}}Cn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Cn)))(t||Cn)}}(),Cn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Cn,selectors:[["ngx-charts-area-chart-normalized"]],contentQueries:function(e,t,i){if(1&e&&(n["\u0275\u0275contentQuery"](i,pe,5),n["\u0275\u0275contentQuery"](i,ue,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.seriesTooltipTemplate=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseleave",function(){return t.hideCircles()})},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",timeline:"timeline",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"area-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-area-series","","normalized","true",3,"xScale","yScale","colors","data","scaleType","activeEntries","gradient","curve","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","showPercentage","tooltipDisabled","tooltipTemplate","hover"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","","type","stacked",3,"xScale","yScale","colors","activeEntries","data","scaleType","visibleValue","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange"],["ngx-charts-area-series","","normalized","true",3,"xScale","yScale","colors","data","scaleType","gradient","curve","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"g",1),n["\u0275\u0275template"](5,Ce,1,10,"g",2),n["\u0275\u0275template"](6,Se,1,9,"g",3),n["\u0275\u0275elementStart"](7,"g"),n["\u0275\u0275template"](8,we,2,9,"g",4),n["\u0275\u0275template"](9,_e,3,10,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,Re,2,13,"g",6),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("id",t.clipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("clip-path",t.clipPath),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.tooltipDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.timeline&&"ordinal"!=t.scaleType))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Dn,ln,Hi,cn]},styles:[Ae],encapsulation:2,changeDetection:0}),Cn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],timeline:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],roundDomains:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],seriesTooltipTemplate:[{type:n.ContentChild,args:["seriesTooltipTemplate"]}],hideCircles:[{type:n.HostListener,args:["mouseleave"]}]};class Sn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.showGridLines=!0,this.curve=h.curveLinear,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height);for(let e=0;e<this.xSet.length;e++){const t=this.xSet[e];let i=0;for(const e of this.results){let n=e.series.find(e=>{let i=e.name,n=t;return"time"===this.scaleType&&(i=i.valueOf(),n=n.valueOf()),i===n});n?(n.d0=i,n.d1=i+n.value,i+=n.value):(n={name:t,value:0,d0:i,d1:i},e.series.push(n))}}this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Xi().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=xn(this.results);this.scaleType=yn(e);let t,i,n=[];return"linear"===this.scaleType&&(e=e.map(e=>Number(e))),"time"!==this.scaleType&&"linear"!==this.scaleType||(t=this.xScaleMin?this.xScaleMin:Math.min(...e),i=this.xScaleMax?this.xScaleMax:Math.max(...e)),"time"===this.scaleType?(n=[new Date(t),new Date(i)],this.xSet=[...e].sort((e,t)=>{const i=e.getTime(),n=t.getTime();return i>n?1:n>i?-1:0})):"linear"===this.scaleType?(n=[t,i],this.xSet=[...e].sort((e,t)=>e-t)):(n=e,this.xSet=e),n}getYDomain(){const e=[];for(let t=0;t<this.xSet.length;t++){const i=this.xSet[t];let n=0;for(const e of this.results){const t=e.series.find(e=>{let t=e.name,n=i;return"time"===this.scaleType&&(t=t.valueOf(),n=n.valueOf()),t===n});t&&(n+=t.value)}e.push(n)}return[this.yScaleMin?this.yScaleMin:Math.min(0,...e),this.yScaleMax?this.yScaleMax:Math.max(...e)]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,t){let i;return"time"===this.scaleType?i=(0,u.scaleTime)():"linear"===this.scaleType?i=(0,u.scaleLinear)():"ordinal"===this.scaleType&&(i=(0,u.scalePoint)().padding(.1)),i.range([0,t]).domain(e),this.roundDomains?i.nice():i}getYScale(e,t){const i=(0,u.scaleLinear)().range([t,0]).domain(e);return this.roundDomains?i.nice():i}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}}function wn(e,t,i="asc"){return e.sort((e,n)=>"asc"===i?e[t]-n[t]:n[t]-e[t])}function In(e,t,i="asc",n){return e.sort((e,o)=>{const r=e[t],a=o[t],s=n.indexOf(r),l=n.indexOf(a);return"asc"===i?s-l:l-s})}function _n(e,t,i="asc"){return e.sort((e,n)=>{const o=e[t].getTime(),r=n[t].getTime();return"asc"===i?o>r?1:r>o?-1:0:o>r?-1:r>o?1:0})}Sn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Sn)))(t||Sn)}}(),Sn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Sn,selectors:[["ngx-charts-area-chart-stacked"]],contentQueries:function(e,t,i){if(1&e&&(n["\u0275\u0275contentQuery"](i,pe,5),n["\u0275\u0275contentQuery"](i,ue,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.seriesTooltipTemplate=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseleave",function(){return t.hideCircles()})},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",timeline:"timeline",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"area-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-area-series","","stacked","true",3,"xScale","yScale","colors","data","scaleType","gradient","activeEntries","curve","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate","hover"],["ngx-charts-circle-series","","type","stacked",3,"xScale","yScale","colors","activeEntries","data","scaleType","visibleValue","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","legend","scaleType","onDomainChange"],["ngx-charts-area-series","","stacked","true",3,"xScale","yScale","colors","data","scaleType","gradient","curve","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"g",1),n["\u0275\u0275template"](5,Te,1,10,"g",2),n["\u0275\u0275template"](6,Fe,1,9,"g",3),n["\u0275\u0275elementStart"](7,"g"),n["\u0275\u0275template"](8,Ee,2,9,"g",4),n["\u0275\u0275template"](9,Oe,3,10,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,je,2,13,"g",6),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("id",t.clipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("clip-path",t.clipPath),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.tooltipDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.timeline&&"ordinal"!=t.scaleType))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Dn,ln,Hi,cn]},styles:[Ae],encapsulation:2,changeDetection:0}),Sn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],timeline:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],roundDomains:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],xScaleMin:[{type:n.Input}],xScaleMax:[{type:n.Input}],yScaleMin:[{type:n.Input}],yScaleMax:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],seriesTooltipTemplate:[{type:n.ContentChild,args:["seriesTooltipTemplate"]}],hideCircles:[{type:n.HostListener,args:["mouseleave"]}]};class Dn{constructor(){this.baseValue="auto",this.stacked=!1,this.normalized=!1,this.animations=!0,this.select=new n.EventEmitter}ngOnChanges(e){this.update()}update(){let e,t;this.updateGradient();const i=e=>{const t=e.name;return this.xScale(t)};this.stacked||this.normalized?(e=(0,h.area)().x(i).y0((e,t)=>this.yScale(e.d0)).y1((e,t)=>this.yScale(e.d1)),t=(0,h.area)().x(i).y0(e=>this.yScale.range()[0]).y1(e=>this.yScale.range()[0])):(e=(0,h.area)().x(i).y0(()=>"auto"===this.baseValue?this.yScale.range()[0]:this.yScale(this.baseValue)).y1(e=>this.yScale(e.value)),t=(0,h.area)().x(i).y0(e=>"auto"===this.baseValue?this.yScale.range()[0]:this.yScale(this.baseValue)).y1(e=>"auto"===this.baseValue?this.yScale.range()[0]:this.yScale(this.baseValue))),e.curve(this.curve),t.curve(this.curve),this.opacity=.8;let n=this.data.series;n="linear"===this.scaleType?wn(n,"name"):"time"===this.scaleType?_n(n,"name"):In(n,"name","asc",this.xScale.domain()),this.path=e(n),this.startingPath=t(n)}updateGradient(){if("linear"===this.colors.scaleType)if(this.hasGradient=!0,this.stacked||this.normalized){const e=this.data.series.map(e=>e.d0),t=this.data.series.map(e=>e.d1),i=Math.max(...t),n=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(i,n)}else{const e=this.data.series.map(e=>e.value),t=Math.max(...e);this.gradientStops=this.colors.getLinearGradientStops(t)}else this.hasGradient=!1,this.gradientStops=void 0}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name)}isInactive(e){if(!this.activeEntries||0===this.activeEntries.length)return!1;return void 0===this.activeEntries.find(t=>e.name===t.name)}}Dn.\u0275fac=function(e){return new(e||Dn)},Dn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Dn,selectors:[["g","ngx-charts-area-series",""]],inputs:{baseValue:"baseValue",stacked:"stacked",normalized:"normalized",animations:"animations",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",gradient:"gradient",curve:"curve",activeEntries:"activeEntries"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-area-series",""],decls:1,vars:12,consts:[["ngx-charts-area","",1,"area-series",3,"data","path","fill","stops","startingPath","opacity","gradient","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",0)),2&e&&(n["\u0275\u0275classProp"]("active",t.isActive(t.data))("inactive",t.isInactive(t.data)),n["\u0275\u0275property"]("data",t.data)("path",t.path)("fill",t.colors.getColor(t.data.name))("stops",t.gradientStops)("startingPath",t.startingPath)("opacity",t.opacity)("gradient",t.gradient||t.hasGradient)("animations",t.animations))},directives:[Zi],encapsulation:2,changeDetection:0}),Dn.propDecorators={data:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],baseValue:[{type:n.Input}],colors:[{type:n.Input}],scaleType:[{type:n.Input}],stacked:[{type:n.Input}],normalized:[{type:n.Input}],gradient:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class Rn{}Rn.\u0275fac=function(e){return new(e||Rn)},Rn.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Rn}),Rn.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Rn,{declarations:[bn,Cn,Sn,Dn],imports:[hn],exports:[bn,Cn,Sn,Dn]});class An{constructor(e){this.roundEdges=!0,this.gradient=!1,this.offset=0,this.isActive=!1,this.animations=!0,this.noBarWhenZero=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.hasGradient=!1,this.hideBar=!1,this.element=e.nativeElement}ngOnChanges(e){e.roundEdges&&this.loadAnimation(),this.update()}update(){this.gradientId="grad"+Xi().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl(),this.checkToHideBar()}loadAnimation(){this.path=this.getStartingPath(),setTimeout(this.update.bind(this),100)}updatePathEl(){const e=(0,d.select)(this.element).select(".bar"),t=this.getPath();this.animations?e.transition().duration(500).attr("d",t):e.attr("d",t)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.getStartOpacity()},{offset:100,color:this.fill,opacity:1}]}getStartingPath(){if(!this.animations)return this.getPath();let e,t=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(t=Math.min(this.height,t),e=ki(this.x,this.y+this.height,this.width,1,0,this.edges)):"horizontal"===this.orientation&&(t=Math.min(this.width,t),e=ki(this.x,this.y,1,this.height,0,this.edges)):"vertical"===this.orientation?e=ki(this.x,this.y+this.height,this.width,1,0,this.edges):"horizontal"===this.orientation&&(e=ki(this.x,this.y,1,this.height,0,this.edges)),e}getPath(){let e,t=this.getRadius();return this.roundEdges?"vertical"===this.orientation?(t=Math.min(this.height,t),e=ki(this.x,this.y,this.width,this.height,t,this.edges)):"horizontal"===this.orientation&&(t=Math.min(this.width,t),e=ki(this.x,this.y,this.width,this.height,t,this.edges)):e=ki(this.x,this.y,this.width,this.height,t,this.edges),e}getRadius(){let e=0;return this.roundEdges&&this.height>5&&this.width>5&&(e=Math.floor(Math.min(5,this.height/2,this.width/2))),e}getStartOpacity(){return this.roundEdges?.2:.5}get edges(){let e=[!1,!1,!1,!1];return this.roundEdges&&("vertical"===this.orientation?e=this.data.value>0?[!0,!0,!1,!1]:[!1,!1,!0,!0]:"horizontal"===this.orientation&&(e=this.data.value>0?[!1,!0,!1,!0]:[!0,!1,!0,!1])),e}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}checkToHideBar(){this.hideBar=this.noBarWhenZero&&("vertical"===this.orientation&&0===this.height||"horizontal"===this.orientation&&0===this.width)}}An.\u0275fac=function(e){return new(e||An)(n["\u0275\u0275directiveInject"](n.ElementRef))},An.\u0275cmp=n["\u0275\u0275defineComponent"]({type:An,selectors:[["g","ngx-charts-bar",""]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{roundEdges:"roundEdges",gradient:"gradient",offset:"offset",isActive:"isActive",animations:"animations",noBarWhenZero:"noBarWhenZero",fill:"fill",data:"data",width:"width",height:"height",x:"x",y:"y",orientation:"orientation",stops:"stops",ariaLabel:"ariaLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-bar",""],decls:2,vars:8,consts:[[4,"ngIf"],["stroke","none","role","img","tabIndex","-1",1,"bar",3,"click"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Pe,2,3,"defs",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"path",1),n["\u0275\u0275listener"]("click",function(){return t.select.emit(t.data)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("ngIf",t.hasGradient),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",t.isActive)("hidden",t.hideBar),n["\u0275\u0275attribute"]("d",t.path)("aria-label",t.ariaLabel)("fill",t.hasGradient?t.gradientFill:t.fill))},directives:[o.NgIf,Ki],encapsulation:2,changeDetection:0}),An.ctorParameters=()=>[{type:n.ElementRef}],An.propDecorators={fill:[{type:n.Input}],data:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],x:[{type:n.Input}],y:[{type:n.Input}],orientation:[{type:n.Input}],roundEdges:[{type:n.Input}],gradient:[{type:n.Input}],offset:[{type:n.Input}],isActive:[{type:n.Input}],stops:[{type:n.Input}],animations:[{type:n.Input}],ariaLabel:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}]};class Tn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxWidth={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxWidth={negative:0,positive:0}),this.margin=[10,20+this.dataLabelMaxWidth.positive,10,20+this.dataLabelMaxWidth.negative],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getXScale(){this.xDomain=this.getXDomain();const e=(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.xDomain);return this.roundDomains?e.nice():e}getYScale(){this.yDomain=this.getYDomain();const e=this.yDomain.length/(this.dims.height/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.height]).paddingInner(e).domain(this.yDomain)}getXDomain(){const e=this.results.map(e=>e.value);return[this.xScaleMin?Math.min(this.xScaleMin,...e):Math.min(0,...e),this.xScaleMax?Math.max(this.xScaleMax,...e):Math.max(0,...e)]}getYDomain(){return this.results.map(e=>e.label)}onClick(e){this.select.emit(e)}setColors(){let e;e="ordinal"===this.schemeType?this.yDomain:this.xDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.yDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.xDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onDataLabelMaxWidthChanged(e){e.size.negative?this.dataLabelMaxWidth.negative=Math.max(this.dataLabelMaxWidth.negative,e.size.width):this.dataLabelMaxWidth.positive=Math.max(this.dataLabelMaxWidth.positive,e.size.width),e.index===this.results.length-1&&setTimeout(()=>this.update())}onActivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);const i=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}}Tn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Tn)))(t||Tn)}}(),Tn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Tn,selectors:[["ngx-charts-bar-horizontal"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMax:"xScaleMax",xScaleMin:"xScaleMin",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:25,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-series-horizontal","",3,"xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","activeEntries","roundEdges","animations","showDataLabel","dataLabelFormatting","noBarWhenZero","select","activate","deactivate","dataLabelWidthChanged"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,!0)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,Ne,1,10,"g",2),n["\u0275\u0275template"](3,Ve,1,9,"g",3),n["\u0275\u0275elementStart"](4,"g",4),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)})("activate",function(e){return t.onActivate(e)})("deactivate",function(e){return t.onDeactivate(e)})("dataLabelWidthChanged",function(e){return t.onDataLabelMaxWidthChanged(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](22,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",t.xScale)("yScale",t.yScale)("colors",t.colors)("series",t.results)("dims",t.dims)("gradient",t.gradient)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("activeEntries",t.activeEntries)("roundEdges",t.roundEdges)("animations",t.animations)("showDataLabel",t.showDataLabel)("dataLabelFormatting",t.dataLabelFormatting)("noBarWhenZero",t.noBarWhenZero))},directives:function(){return[Di,o.NgIf,Ln,Oi,Pi]},styles:[Ae],encapsulation:2,changeDetection:0}),Tn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],roundEdges:[{type:n.Input}],xScaleMax:[{type:n.Input}],xScaleMin:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class Fn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.groupPadding=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxWidth={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxWidth={negative:0,positive:0}),this.margin=[10,20+this.dataLabelMaxWidth.positive,10,20+this.dataLabelMaxWidth.negative],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valuesDomain=this.getValueDomain(),this.groupScale=this.getGroupScale(),this.innerScale=this.getInnerScale(),this.valueScale=this.getValueScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupScale(){const e=this.groupDomain.length/(this.dims.height/this.groupPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.height]).paddingInner(e).paddingOuter(e/2).domain(this.groupDomain)}getInnerScale(){const e=this.groupScale.bandwidth(),t=this.innerDomain.length/(e/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,e]).paddingInner(t).domain(this.innerDomain)}getValueScale(){const e=(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.valuesDomain);return this.roundDomains?e.nice():e}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.value)||e.push(i.value);return[Math.min(0,...e),this.xScaleMax?Math.max(this.xScaleMax,...e):Math.max(0,...e)]}groupTransform(e){return`translate(0, ${this.groupScale(e.label)})`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valuesDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valuesDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onDataLabelMaxWidthChanged(e,t){e.size.negative?this.dataLabelMaxWidth.negative=Math.max(this.dataLabelMaxWidth.negative,e.size.width):this.dataLabelMaxWidth.positive=Math.max(this.dataLabelMaxWidth.positive,e.size.width),t===this.results.length-1&&setTimeout(()=>this.update())}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}Fn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Fn)))(t||Fn)}}(),Fn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fn,selectors:[["ngx-charts-bar-horizontal-2d"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",groupPadding:"groupPadding",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMax:"xScaleMax",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:17,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-grid-panel-series","","orient","horizontal",3,"xScale","yScale","data","dims"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged"],["ngx-charts-series-horizontal","",3,"xScale","activeEntries","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","seriesName","roundEdges","animations","showDataLabel","dataLabelFormatting","noBarWhenZero","select","activate","deactivate","dataLabelWidthChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275element"](2,"g",2),n["\u0275\u0275template"](3,Le,1,10,"g",3),n["\u0275\u0275template"](4,Be,1,9,"g",4),n["\u0275\u0275template"](5,$e,2,17,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](14,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",t.valueScale)("yScale",t.groupScale)("data",t.results)("dims",t.dims),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,Qi,o.NgIf,o.NgForOf,Oi,Pi,Ln]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),Fn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],groupPadding:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],roundEdges:[{type:n.Input}],xScaleMax:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class En extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){return[0,100]}getYScale(){const e=this.groupDomain.length/(this.dims.height/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.height]).paddingInner(e).domain(this.groupDomain)}getXScale(){const e=(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.valueDomain);return this.roundDomains?e.nice():e}groupTransform(e){return`translate(0, ${this.yScale(e.name)})`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valueDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}En.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](En)))(t||En)}}(),En.\u0275cmp=n["\u0275\u0275defineComponent"]({type:En,selectors:[["ngx-charts-bar-horizontal-normalized"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-series-horizontal","","type","normalized",3,"xScale","yScale","activeEntries","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","seriesName","animations","noBarWhenZero","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,Ge,1,10,"g",2),n["\u0275\u0275template"](3,ze,1,8,"g",3),n["\u0275\u0275template"](4,Ue,2,14,"g",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](10,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Ln]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),En.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class Mn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxWidth={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxWidth={negative:0,positive:0}),this.margin=[10,20+this.dataLabelMaxWidth.positive,10,20+this.dataLabelMaxWidth.negative],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){const e=[];let t=0,i=0;for(const n of this.results){let o=0,r=0;for(const e of n.series)e.value<0?o+=e.value:r+=e.value,t=e.value<t?e.value:t,i=e.value>i?e.value:i;e.push(o),e.push(r)}e.push(t),e.push(i);return[Math.min(0,...e),this.xScaleMax?Math.max(this.xScaleMax,...e):Math.max(...e)]}getYScale(){const e=this.groupDomain.length/(this.dims.height/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.height]).paddingInner(e).domain(this.groupDomain)}getXScale(){const e=(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.valueDomain);return this.roundDomains?e.nice():e}groupTransform(e){return`translate(0, ${this.yScale(e.name)})`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valueDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onDataLabelMaxWidthChanged(e,t){e.size.negative?this.dataLabelMaxWidth.negative=Math.max(this.dataLabelMaxWidth.negative,e.size.width):this.dataLabelMaxWidth.positive=Math.max(this.dataLabelMaxWidth.positive,e.size.width),t===this.results.length-1&&setTimeout(()=>this.update())}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}Mn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Mn)))(t||Mn)}}(),Mn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Mn,selectors:[["ngx-charts-bar-horizontal-stacked"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",xScaleMax:"xScaleMax",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","yAxisOffset","dimensionsChanged"],["ngx-charts-series-horizontal","","type","stacked",3,"xScale","yScale","colors","series","activeEntries","dims","gradient","tooltipDisabled","tooltipTemplate","seriesName","animations","showDataLabel","dataLabelFormatting","noBarWhenZero","select","activate","deactivate","dataLabelWidthChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,qe,1,10,"g",2),n["\u0275\u0275template"](3,Xe,1,9,"g",3),n["\u0275\u0275template"](4,He,2,16,"g",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](10,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Ln]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),Mn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],xScaleMax:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class On extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}getXScale(){this.xDomain=this.getXDomain();const e=this.xDomain.length/(this.dims.width/this.barPadding+1);return(0,u.scaleBand)().range([0,this.dims.width]).paddingInner(e).domain(this.xDomain)}getYScale(){this.yDomain=this.getYDomain();const e=(0,u.scaleLinear)().range([this.dims.height,0]).domain(this.yDomain);return this.roundDomains?e.nice():e}getXDomain(){return this.results.map(e=>e.label)}getYDomain(){const e=this.results.map(e=>e.value);let t=this.yScaleMin?Math.min(this.yScaleMin,...e):Math.min(0,...e);this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(t=Math.min(t,...this.yAxisTicks));let i=this.yScaleMax?Math.max(this.yScaleMax,...e):Math.max(0,...e);return this.yAxisTicks&&!this.yAxisTicks.some(isNaN)&&(i=Math.max(i,...this.yAxisTicks)),[t,i]}onClick(e){this.select.emit(e)}setColors(){let e;e="ordinal"===this.schemeType?this.xDomain:this.yDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.xDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onDataLabelMaxHeightChanged(e){e.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,e.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,e.size.height),e.index===this.results.length-1&&setTimeout(()=>this.update())}onActivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);const i=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}}On.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](On)))(t||On)}}(),On.\u0275cmp=n["\u0275\u0275defineComponent"]({type:On,selectors:[["ngx-charts-bar-vertical"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",yScaleMax:"yScaleMax",yScaleMin:"yScaleMin",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:25,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","activeEntries","roundEdges","animations","noBarWhenZero","activate","deactivate","select","dataLabelHeightChanged"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,!0)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,We,1,10,"g",2),n["\u0275\u0275template"](3,Ye,1,9,"g",3),n["\u0275\u0275elementStart"](4,"g",4),n["\u0275\u0275listener"]("activate",function(e){return t.onActivate(e)})("deactivate",function(e){return t.onDeactivate(e)})("select",function(e){return t.onClick(e)})("dataLabelHeightChanged",function(e){return t.onDataLabelMaxHeightChanged(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](22,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",t.xScale)("yScale",t.yScale)("colors",t.colors)("series",t.results)("dims",t.dims)("gradient",t.gradient)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("showDataLabel",t.showDataLabel)("dataLabelFormatting",t.dataLabelFormatting)("activeEntries",t.activeEntries)("roundEdges",t.roundEdges)("animations",t.animations)("noBarWhenZero",t.noBarWhenZero))},directives:function(){return[Di,o.NgIf,Vn,Oi,Pi]},styles:[Ae],encapsulation:2,changeDetection:0}),On.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],roundEdges:[{type:n.Input}],yScaleMax:[{type:n.Input}],yScaleMin:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class kn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.scaleType="ordinal",this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.groupPadding=16,this.barPadding=8,this.roundDomains=!1,this.roundEdges=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valuesDomain=this.getValueDomain(),this.groupScale=this.getGroupScale(),this.innerScale=this.getInnerScale(),this.valueScale=this.getValueScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}onDataLabelMaxHeightChanged(e,t){e.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,e.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,e.size.height),t===this.results.length-1&&setTimeout(()=>this.update())}getGroupScale(){const e=this.groupDomain.length/(this.dims.height/this.groupPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.width]).paddingInner(e).paddingOuter(e/2).domain(this.groupDomain)}getInnerScale(){const e=this.groupScale.bandwidth(),t=this.innerDomain.length/(e/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,e]).paddingInner(t).domain(this.innerDomain)}getValueScale(){const e=(0,u.scaleLinear)().range([this.dims.height,0]).domain(this.valuesDomain);return this.roundDomains?e.nice():e}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.value)||e.push(i.value);return[Math.min(0,...e),this.yScaleMax?Math.max(this.yScaleMax,...e):Math.max(0,...e)]}groupTransform(e){return`translate(${this.groupScale(e.label)}, 0)`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valuesDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valuesDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}kn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](kn)))(t||kn)}}(),kn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:kn,selectors:[["ngx-charts-bar-vertical-2d"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",scaleType:"scaleType",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",groupPadding:"groupPadding",barPadding:"barPadding",roundDomains:"roundDomains",roundEdges:"roundEdges",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",yScaleMax:"yScaleMax",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:17,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-grid-panel-series","","orient","vertical",3,"xScale","yScale","data","dims"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","noBarWhenZero","select","activate","deactivate","dataLabelHeightChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-series-vertical","",3,"activeEntries","xScale","yScale","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","roundEdges","animations","noBarWhenZero","select","activate","deactivate","dataLabelHeightChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275element"](2,"g",2),n["\u0275\u0275template"](3,Qe,1,10,"g",3),n["\u0275\u0275template"](4,Ke,1,9,"g",4),n["\u0275\u0275template"](5,Je,1,17,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](14,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",t.groupScale)("yScale",t.valueScale)("data",t.results)("dims",t.dims),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,Qi,o.NgIf,o.NgForOf,Oi,Pi,Vn]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),kn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],scaleType:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],groupPadding:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],roundEdges:[{type:n.Input}],yScaleMax:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class jn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){return[0,100]}getXScale(){const e=this.groupDomain.length/(this.dims.width/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.width]).paddingInner(e).domain(this.groupDomain)}getYScale(){const e=(0,u.scaleLinear)().range([this.dims.height,0]).domain(this.valueDomain);return this.roundDomains?e.nice():e}groupTransform(e){return`translate(${this.xScale(e.name)}, 0)`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valueDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}jn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](jn)))(t||jn)}}(),jn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:jn,selectors:[["ngx-charts-bar-vertical-normalized"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-series-vertical","","type","normalized",3,"xScale","yScale","activeEntries","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","seriesName","animations","noBarWhenZero","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,Ze,1,9,"g",2),n["\u0275\u0275template"](3,et,1,9,"g",3),n["\u0275\u0275template"](4,tt,2,14,"g",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](10,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Vn]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),jn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class Pn extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.tooltipDisabled=!1,this.showGridLines=!0,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.barPadding=8,this.roundDomains=!1,this.showDataLabel=!1,this.noBarWhenZero=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.dataLabelMaxHeight={negative:0,positive:0}}update(){super.update(),this.showDataLabel||(this.dataLabelMaxHeight={negative:0,positive:0}),this.margin=[10+this.dataLabelMaxHeight.positive,20,10+this.dataLabelMaxHeight.negative,20],this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.showDataLabel&&(this.dims.height-=this.dataLabelMaxHeight.negative),this.formatDates(),this.groupDomain=this.getGroupDomain(),this.innerDomain=this.getInnerDomain(),this.valueDomain=this.getValueDomain(),this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]+this.dataLabelMaxHeight.negative})`}getGroupDomain(){const e=[];for(const t of this.results)e.includes(t.label)||e.push(t.label);return e}getInnerDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.label)||e.push(i.label);return e}getValueDomain(){const e=[];let t=0,i=0;for(const n of this.results){let o=0,r=0;for(const e of n.series)e.value<0?o+=e.value:r+=e.value,t=e.value<t?e.value:t,i=e.value>i?e.value:i;e.push(o),e.push(r)}e.push(t),e.push(i);return[Math.min(0,...e),this.yScaleMax?Math.max(this.yScaleMax,...e):Math.max(...e)]}getXScale(){const e=this.groupDomain.length/(this.dims.width/this.barPadding+1);return(0,u.scaleBand)().rangeRound([0,this.dims.width]).paddingInner(e).domain(this.groupDomain)}getYScale(){const e=(0,u.scaleLinear)().range([this.dims.height,0]).domain(this.valueDomain);return this.roundDomains?e.nice():e}onDataLabelMaxHeightChanged(e,t){e.size.negative?this.dataLabelMaxHeight.negative=Math.max(this.dataLabelMaxHeight.negative,e.size.height):this.dataLabelMaxHeight.positive=Math.max(this.dataLabelMaxHeight.positive,e.size.height),t===this.results.length-1&&setTimeout(()=>this.update())}groupTransform(e){return`translate(${this.xScale(e.name)||0}, 0)`}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.innerDomain:this.valueDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.innerDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.valueDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}var Nn;Pn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Pn)))(t||Pn)}}(),Pn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Pn,selectors:[["ngx-charts-bar-vertical-stacked"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",tooltipDisabled:"tooltipDisabled",showGridLines:"showGridLines",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",barPadding:"barPadding",roundDomains:"roundDomains",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",yScaleMax:"yScaleMax",dataLabelFormatting:"dataLabelFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"bar-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","xAxisOffset","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-series-vertical","","type","stacked",3,"xScale","yScale","activeEntries","colors","series","dims","gradient","tooltipDisabled","tooltipTemplate","showDataLabel","dataLabelFormatting","seriesName","animations","noBarWhenZero","select","activate","deactivate","dataLabelHeightChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,void 0,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,void 0,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,it,1,10,"g",2),n["\u0275\u0275template"](3,nt,1,9,"g",3),n["\u0275\u0275template"](4,ot,2,16,"g",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](10,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Vn]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1,transform:"*"}),(0,r.animate)(500,(0,r.style)({opacity:0,transform:"scale(0)"}))])])]},changeDetection:0}),Pn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],barPadding:[{type:n.Input}],roundDomains:[{type:n.Input}],yScaleMax:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]},function(e){e.positive="positive",e.negative="negative"}(Nn||(Nn={}));class Vn{constructor(){this.type="standard",this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.dataLabelHeightChanged=new n.EventEmitter,this.barsForDataLabels=[]}ngOnChanges(e){this.update()}update(){let e;this.updateTooltipSettings(),this.series.length&&(e=this.xScale.bandwidth()),e=Math.round(e);const t=Math.max(this.yScale.domain()[0],0),i={[Nn.positive]:0,[Nn.negative]:0};let n,o=Nn.positive;"normalized"===this.type&&(n=this.series.map(e=>e.value).reduce((e,t)=>e+t,0)),this.bars=this.series.map((r,a)=>{let s=r.value;const l=this.getLabel(r),c=zi(l),d=this.roundEdges;o=s>0?Nn.positive:Nn.negative;const p={value:s,label:l,roundEdges:d,data:r,width:e,formattedLabel:c,height:0,x:0,y:0};if("standard"===this.type)p.height=Math.abs(this.yScale(s)-this.yScale(t)),p.x=this.xScale(l),p.y=s<0?this.yScale(0):this.yScale(s);else if("stacked"===this.type){const e=i[o],t=e+s;i[o]+=s,p.height=this.yScale(e)-this.yScale(t),p.x=0,p.y=this.yScale(t),p.offset0=e,p.offset1=t}else if("normalized"===this.type){let e=i[o],t=e+s;i[o]+=s,n>0?(e=100*e/n,t=100*t/n):(e=0,t=0),p.height=this.yScale(e)-this.yScale(t),p.x=0,p.y=this.yScale(t),p.offset0=e,p.offset1=t,s=(t-e).toFixed(2)+"%"}"ordinal"===this.colors.scaleType?p.color=this.colors.getColor(l):"standard"===this.type?(p.color=this.colors.getColor(s),p.gradientStops=this.colors.getLinearGradientStops(s)):(p.color=this.colors.getColor(p.offset1),p.gradientStops=this.colors.getLinearGradientStops(p.offset1,p.offset0));let u=c;return p.ariaLabel=c+" "+s.toLocaleString(),this.seriesName&&(u=`${this.seriesName} \u2022 ${c}`,p.data.series=this.seriesName,p.ariaLabel=this.seriesName+" "+p.ariaLabel),p.tooltipText=this.tooltipDisabled?void 0:`\n        <span class="tooltip-label">${Ui(u)}</span>\n        <span class="tooltip-val">${this.dataLabelFormatting?this.dataLabelFormatting(s):s.toLocaleString()}</span>\n      `,p}),this.updateDataLabels()}updateDataLabels(){if("stacked"===this.type){this.barsForDataLabels=[];const e={};e.series=this.seriesName;const t=this.series.map(e=>e.value).reduce((e,t)=>t>0?e+t:e,0),i=this.series.map(e=>e.value).reduce((e,t)=>t<0?e+t:e,0);e.total=t+i,e.x=0,e.y=0,e.total>0?e.height=this.yScale(t):e.height=this.yScale(i),e.width=this.xScale.bandwidth(),this.barsForDataLabels.push(e)}else this.barsForDataLabels=this.series.map(e=>{const t={};return t.series=this.seriesName?this.seriesName:e.label,t.total=e.value,t.x=this.xScale(e.label),t.y=this.yScale(0),t.height=this.yScale(t.total)-this.yScale(0),t.width=this.xScale.bandwidth(),t})}updateTooltipSettings(){this.tooltipPlacement=this.tooltipDisabled?void 0:"top",this.tooltipType=this.tooltipDisabled?void 0:"tooltip"}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name&&e.series===t.series)}onClick(e){this.select.emit(e)}getLabel(e){return e.label?e.label:e.name}trackBy(e,t){return t.label}trackDataLabelBy(e,t){return e+"#"+t.series+"#"+t.total}}Vn.\u0275fac=function(e){return new(e||Vn)},Vn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Vn,selectors:[["g","ngx-charts-series-vertical",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",animations:"animations",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",dims:"dims",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",dataLabelFormatting:"dataLabelFormatting"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelHeightChanged:"dataLabelHeightChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-series-vertical",""],decls:2,vars:3,consts:[["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","ariaLabel","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","animations","select","activate","deactivate"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,rt,1,22,"g",0),n["\u0275\u0275template"](1,st,2,2,"g",1)),2&e&&(n["\u0275\u0275property"]("ngForOf",t.bars)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showDataLabel))},directives:function(){return[o.NgForOf,o.NgIf,An,$i,Bn]},encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1}),(0,r.animate)(500,(0,r.style)({opacity:0}))])])]},changeDetection:0}),Vn.propDecorators={dims:[{type:n.Input}],type:[{type:n.Input}],series:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],colors:[{type:n.Input}],gradient:[{type:n.Input}],activeEntries:[{type:n.Input}],seriesName:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],roundEdges:[{type:n.Input}],animations:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],dataLabelHeightChanged:[{type:n.Output}]};class Ln{constructor(){this.barsForDataLabels=[],this.type="standard",this.tooltipDisabled=!1,this.animations=!0,this.showDataLabel=!1,this.noBarWhenZero=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.dataLabelWidthChanged=new n.EventEmitter}ngOnChanges(e){this.update()}update(){this.updateTooltipSettings();const e={[Nn.positive]:0,[Nn.negative]:0};let t,i;t=Nn.positive,"normalized"===this.type&&(i=this.series.map(e=>e.value).reduce((e,t)=>e+t,0));const n=Math.max(this.xScale.domain()[0],0);this.bars=this.series.map((o,r)=>{let a=o.value;const s=this.getLabel(o),l=zi(s),c=this.roundEdges;t=a>0?Nn.positive:Nn.negative;const d={value:a,label:s,roundEdges:c,data:o,formattedLabel:l};if(d.height=this.yScale.bandwidth(),"standard"===this.type)d.width=Math.abs(this.xScale(a)-this.xScale(n)),d.x=a<0?this.xScale(a):this.xScale(n),d.y=this.yScale(s);else if("stacked"===this.type){const i=e[t],n=i+a;e[t]+=a,d.width=this.xScale(n)-this.xScale(i),d.x=this.xScale(i),d.y=0,d.offset0=i,d.offset1=n}else if("normalized"===this.type){let n=e[t],o=n+a;e[t]+=a,i>0?(n=100*n/i,o=100*o/i):(n=0,o=0),d.width=this.xScale(o)-this.xScale(n),d.x=this.xScale(n),d.y=0,d.offset0=n,d.offset1=o,a=(o-n).toFixed(2)+"%"}"ordinal"===this.colors.scaleType?d.color=this.colors.getColor(s):"standard"===this.type?(d.color=this.colors.getColor(a),d.gradientStops=this.colors.getLinearGradientStops(a)):(d.color=this.colors.getColor(d.offset1),d.gradientStops=this.colors.getLinearGradientStops(d.offset1,d.offset0));let p=l;return d.ariaLabel=l+" "+a.toLocaleString(),this.seriesName&&(p=`${this.seriesName} \u2022 ${l}`,d.data.series=this.seriesName,d.ariaLabel=this.seriesName+" "+d.ariaLabel),d.tooltipText=this.tooltipDisabled?void 0:`\n        <span class="tooltip-label">${Ui(p)}</span>\n        <span class="tooltip-val">${this.dataLabelFormatting?this.dataLabelFormatting(a):a.toLocaleString()}</span>\n      `,d}),this.updateDataLabels()}updateDataLabels(){if("stacked"===this.type){this.barsForDataLabels=[];const e={};e.series=this.seriesName;const t=this.series.map(e=>e.value).reduce((e,t)=>t>0?e+t:e,0),i=this.series.map(e=>e.value).reduce((e,t)=>t<0?e+t:e,0);e.total=t+i,e.x=0,e.y=0,e.total>0?e.width=this.xScale(t):e.width=this.xScale(i),e.height=this.yScale.bandwidth(),this.barsForDataLabels.push(e)}else this.barsForDataLabels=this.series.map(e=>{const t={};return t.series=this.seriesName?this.seriesName:e.label,t.total=e.value,t.x=this.xScale(0),t.y=this.yScale(e.label),t.width=this.xScale(t.total)-this.xScale(0),t.height=this.yScale.bandwidth(),t})}updateTooltipSettings(){this.tooltipPlacement=this.tooltipDisabled?void 0:"top",this.tooltipType=this.tooltipDisabled?void 0:"tooltip"}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name&&e.series===t.series)}getLabel(e){return e.label?e.label:e.name}trackBy(e,t){return t.label}trackDataLabelBy(e,t){return e+"#"+t.series+"#"+t.total}click(e){this.select.emit(e)}}Ln.\u0275fac=function(e){return new(e||Ln)},Ln.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ln,selectors:[["g","ngx-charts-series-horizontal",""]],inputs:{type:"type",tooltipDisabled:"tooltipDisabled",animations:"animations",showDataLabel:"showDataLabel",noBarWhenZero:"noBarWhenZero",dims:"dims",series:"series",xScale:"xScale",yScale:"yScale",colors:"colors",gradient:"gradient",activeEntries:"activeEntries",seriesName:"seriesName",tooltipTemplate:"tooltipTemplate",roundEdges:"roundEdges",dataLabelFormatting:"dataLabelFormatting"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dataLabelWidthChanged:"dataLabelWidthChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-series-horizontal",""],decls:2,vars:3,consts:[["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","isActive","ariaLabel","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["ngx-charts-bar","","ngx-tooltip","",3,"width","height","x","y","fill","stops","data","orientation","roundEdges","gradient","isActive","ariaLabel","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","noBarWhenZero","select","activate","deactivate"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-bar-label","",3,"barX","barY","barWidth","barHeight","value","valueFormatting","orientation","dimensionsChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,lt,1,21,"g",0),n["\u0275\u0275template"](1,dt,2,2,"g",1)),2&e&&(n["\u0275\u0275property"]("ngForOf",t.bars)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showDataLabel))},directives:function(){return[o.NgForOf,o.NgIf,An,$i,Bn]},encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1}),(0,r.animate)(500,(0,r.style)({opacity:0}))])])]},changeDetection:0}),Ln.propDecorators={dims:[{type:n.Input}],type:[{type:n.Input}],series:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],colors:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],gradient:[{type:n.Input}],activeEntries:[{type:n.Input}],seriesName:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],roundEdges:[{type:n.Input}],animations:[{type:n.Input}],showDataLabel:[{type:n.Input}],dataLabelFormatting:[{type:n.Input}],noBarWhenZero:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],dataLabelWidthChanged:[{type:n.Output}]};class Bn{constructor(e){this.dimensionsChanged=new n.EventEmitter,this.horizontalPadding=2,this.verticalPadding=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}getSize(){return{height:this.element.getBoundingClientRect().height,width:this.element.getBoundingClientRect().width,negative:this.value<0}}ngAfterViewInit(){this.dimensionsChanged.emit(this.getSize())}update(){this.valueFormatting?this.formatedValue=this.valueFormatting(this.value):this.formatedValue=zi(this.value),"horizontal"===this.orientation?(this.x=this.barX+this.barWidth,this.value<0?(this.x=this.x-this.horizontalPadding,this.textAnchor="end"):(this.x=this.x+this.horizontalPadding,this.textAnchor="start"),this.y=this.barY+this.barHeight/2):(this.x=this.barX+this.barWidth/2,this.y=this.barY+this.barHeight,this.value<0?(this.y=this.y+this.verticalPadding,this.textAnchor="end"):(this.y=this.y-this.verticalPadding,this.textAnchor="start"),this.transform=`rotate(-45, ${this.x} , ${this.y})`)}}Bn.\u0275fac=function(e){return new(e||Bn)(n["\u0275\u0275directiveInject"](n.ElementRef))},Bn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Bn,selectors:[["g","ngx-charts-bar-label",""]],inputs:{value:"value",valueFormatting:"valueFormatting",barX:"barX",barY:"barY",barWidth:"barWidth",barHeight:"barHeight",orientation:"orientation"},outputs:{dimensionsChanged:"dimensionsChanged"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-bar-label",""],decls:2,vars:5,consts:[["alignment-baseline","middle",1,"textDataLabel"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"text",0),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("text-anchor",t.textAnchor)("transform",t.transform)("x",t.x)("y",t.y),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.formatedValue," "))},styles:[".textDataLabel[_ngcontent-%COMP%]{font-size:11px}"],changeDetection:0}),Bn.ctorParameters=()=>[{type:n.ElementRef}],Bn.propDecorators={value:[{type:n.Input}],valueFormatting:[{type:n.Input}],barX:[{type:n.Input}],barY:[{type:n.Input}],barWidth:[{type:n.Input}],barHeight:[{type:n.Input}],orientation:[{type:n.Input}],dimensionsChanged:[{type:n.Output}]};class $n{}function Gn(e,t,i,n,o){let r=[];if("linear"===t&&(e=e.map(e=>Number(e)),i||e.push(0)),"time"===t||"linear"===t){r=[n||Math.min(...e),o||Math.max(...e)]}else r=e;return r}function zn(e,t,i,n){let o;return"time"===i?o=(0,u.scaleTime)().range(t).domain(e):"linear"===i?(o=(0,u.scaleLinear)().range(t).domain(e),n&&(o=o.nice())):"ordinal"===i&&(o=(0,u.scalePoint)().range([t[0],t[1]]).domain(e)),o}$n.\u0275fac=function(e){return new(e||$n)},$n.\u0275mod=n["\u0275\u0275defineNgModule"]({type:$n}),$n.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"]($n,{declarations:[An,Tn,Fn,En,Mn,On,kn,jn,Pn,Bn,Ln,Vn],imports:[hn],exports:[An,Tn,Fn,En,Mn,On,kn,jn,Pn,Bn,Ln,Vn]});class Un extends Ai{constructor(){super(...arguments),this.showGridLines=!0,this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.xAxis=!0,this.yAxis=!0,this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.maxRadius=10,this.minRadius=3,this.schemeType="ordinal",this.tooltipDisabled=!1,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.scaleType="linear",this.margin=[10,20,10,20],this.bubblePadding=[0,0,0,0],this.xAxisHeight=0,this.yAxisWidth=0,this.activeEntries=[]}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.seriesDomain=this.results.map(e=>e.name),this.rDomain=this.getRDomain(),this.xDomain=this.getXDomain(),this.yDomain=this.getYDomain(),this.transform=`translate(${this.dims.xOffset},${this.margin[0]})`;const e="ordinal"===this.schemeType?this.seriesDomain:this.rDomain;this.colors=new vn(this.scheme,this.schemeType,e,this.customColors),this.data=this.results,this.minRadius=Math.max(this.minRadius,1),this.maxRadius=Math.max(this.maxRadius,1),this.rScale=this.getRScale(this.rDomain,[this.minRadius,this.maxRadius]),this.bubblePadding=[0,0,0,0],this.setScales(),this.bubblePadding=this.getBubblePadding(),this.setScales(),this.legendOptions=this.getLegendOptions(),this.clipPathId="clip"+Xi().toString(),this.clipPath=`url(#${this.clipPathId})`}hideCircles(){this.deactivateAll()}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}getBubblePadding(){let e=0,t=0,i=this.dims.height,n=this.dims.width;for(const o of this.data)for(const r of o.series){const o=this.rScale(r.r),a="linear"===this.xScaleType?this.xScale(Number(r.x)):this.xScale(r.x),s="linear"===this.yScaleType?this.yScale(Number(r.y)):this.yScale(r.y);t=Math.max(o-a,t),e=Math.max(o-s,e),i=Math.max(s+o,i),n=Math.max(a+o,n)}return n=Math.max(n-this.dims.width,0),i=Math.max(i-this.dims.height,0),[e,n,i,t]}setScales(){let e=this.dims.width;void 0===this.xScaleMin&&void 0===this.xScaleMax&&(e-=this.bubblePadding[1]);let t=this.dims.height;void 0===this.yScaleMin&&void 0===this.yScaleMax&&(t-=this.bubblePadding[2]),this.xScale=this.getXScale(this.xDomain,e),this.yScale=this.getYScale(this.yDomain,t)}getYScale(e,t){return zn(e,[t,this.bubblePadding[0]],this.yScaleType,this.roundDomains)}getXScale(e,t){return zn(e,[this.bubblePadding[3],t],this.xScaleType,this.roundDomains)}getRScale(e,t){const i=(0,u.scaleLinear)().range(t).domain(e);return this.roundDomains?i.nice():i}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],position:this.legendPosition,title:void 0};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.rDomain,e.colors=this.colors.scale),e}getXDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.x)||e.push(i.x);return this.xScaleType=yn(e),Gn(e,this.xScaleType,this.autoScale,this.xScaleMin,this.xScaleMax)}getYDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.y)||e.push(i.y);return this.yScaleType=yn(e),Gn(e,this.yScaleType,this.autoScale,this.yScaleMin,this.yScaleMax)}getRDomain(){let e=1/0,t=-1/0;for(const i of this.results)for(const n of i.series){const i=Number(n.r)||1;e=Math.min(e,i),t=Math.max(t,i)}return[e,t]}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}trackBy(e,t){return t.name}}Un.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Un)))(t||Un)}}(),Un.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Un,selectors:[["ngx-charts-bubble-chart"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseleave",function(){return t.hideCircles()})},inputs:{showGridLines:"showGridLines",legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",maxRadius:"maxRadius",minRadius:"minRadius",schemeType:"schemeType",tooltipDisabled:"tooltipDisabled",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",autoScale:"autoScale",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:20,consts:[[3,"view","showLegend","activeEntries","legendOptions","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"bubble-chart","chart"],["ngx-charts-x-axis","",3,"showGridLines","dims","xScale","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"showGridLines","yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["x","0","y","0",1,"bubble-chart-area",2,"fill","rgb(255, 0, 0)","opacity","0","cursor","auto",3,"mouseenter"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-x-axis","",3,"showGridLines","dims","xScale","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"showGridLines","yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-bubble-series","",3,"xScale","yScale","rScale","xScaleType","yScaleType","xAxisLabel","yAxisLabel","colors","data","activeEntries","tooltipDisabled","tooltipTemplate","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"g",1),n["\u0275\u0275template"](5,pt,1,10,"g",2),n["\u0275\u0275template"](6,ut,1,9,"g",3),n["\u0275\u0275elementStart"](7,"rect",4),n["\u0275\u0275listener"]("mouseenter",function(){return t.deactivateAll()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"g"),n["\u0275\u0275template"](9,mt,2,13,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("activeEntries",t.activeEntries)("legendOptions",t.legendOptions)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("id",t.clipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width)("height",t.dims.height),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("clip-path",t.clipPath),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.data)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,qn]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1}),(0,r.animate)(500,(0,r.style)({opacity:0}))])])]},changeDetection:0}),Un.propDecorators={showGridLines:[{type:n.Input}],legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],roundDomains:[{type:n.Input}],maxRadius:[{type:n.Input}],minRadius:[{type:n.Input}],autoScale:[{type:n.Input}],schemeType:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],xScaleMin:[{type:n.Input}],xScaleMax:[{type:n.Input}],yScaleMin:[{type:n.Input}],yScaleMax:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],hideCircles:[{type:n.HostListener,args:["mouseleave"]}]};class qn{constructor(){this.tooltipDisabled=!1,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter}ngOnChanges(e){this.update()}update(){this.circles=this.getCircles()}getCircles(){const e=this.data.name;return this.data.series.map((t,i)=>{if(void 0!==t.y&&void 0!==t.x){const n=t.y,o=t.x,r=t.r,a=this.rScale(r||1),s=zi(t.name),l="linear"===this.xScaleType?this.xScale(Number(o)):this.xScale(o),c="linear"===this.yScaleType?this.yScale(Number(n)):this.yScale(n),d="linear"===this.colors.scaleType?this.colors.getColor(r):this.colors.getColor(e),p=!this.activeEntries.length||this.isActive({name:e}),u=p?1:.3;return{data:Object.assign({},t,{series:e,name:t.name,value:t.y,x:t.x,radius:t.r}),x:o,y:n,r:r,classNames:[`circle-data-${i}`],value:n,label:o,cx:l,cy:c,radius:a,tooltipLabel:s,color:d,opacity:u,seriesName:e,isActive:p,transform:`translate(${l},${c})`}}}).filter(e=>void 0!==e)}getTooltipText(e){const t=void 0!==e.r,i=e.tooltipLabel&&e.tooltipLabel.length,n=e.seriesName&&e.seriesName.length,o=t?zi(e.r):"",r=this.xAxisLabel&&""!==this.xAxisLabel?`${this.xAxisLabel}:`:"",a=this.yAxisLabel&&""!==this.yAxisLabel?`${this.yAxisLabel}:`:"",s=zi(e.x),l=zi(e.y),c=n&&i?`${e.seriesName} \u2022 ${e.tooltipLabel}`:e.seriesName+e.tooltipLabel;return`\n      ${n||i?`<span class="tooltip-label">${Ui(c)}</span>`:""}\n      <span class="tooltip-label">\n        <label>${Ui(r)}</label> ${Ui(s)}<br />\n        <label>${Ui(a)}</label> ${Ui(l)}\n      </span>\n      <span class="tooltip-val">\n        ${Ui(o)}\n      </span>\n    `}onClick(e){this.select.emit(e)}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name)}isVisible(e){return this.activeEntries.length>0?this.isActive({name:e.seriesName}):0!==e.opacity}activateCircle(e){e.barVisible=!0,this.activate.emit({name:this.data.name})}deactivateCircle(e){e.barVisible=!1,this.deactivate.emit({name:this.data.name})}trackBy(e,t){return`${t.data.series} ${t.data.name}`}}qn.\u0275fac=function(e){return new(e||qn)},qn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:qn,selectors:[["g","ngx-charts-bubble-series",""]],inputs:{tooltipDisabled:"tooltipDisabled",data:"data",xScale:"xScale",yScale:"yScale",rScale:"rScale",xScaleType:"xScaleType",yScaleType:"yScaleType",colors:"colors",visibleValue:"visibleValue",activeEntries:"activeEntries",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-bubble-series",""],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,ht,3,19,"g",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.circles)("ngForTrackBy",t.trackBy)},directives:[o.NgForOf,Wi,$i],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":enter",[(0,r.style)({opacity:0,transform:"scale(0)"}),(0,r.animate)(250,(0,r.style)({opacity:1,transform:"scale(1)"}))])])]},changeDetection:0}),qn.propDecorators={data:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],rScale:[{type:n.Input}],xScaleType:[{type:n.Input}],yScaleType:[{type:n.Input}],colors:[{type:n.Input}],visibleValue:[{type:n.Input}],activeEntries:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class Xn{}Xn.\u0275fac=function(e){return new(e||Xn)},Xn.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Xn}),Xn.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Xn,{declarations:[Un,qn],imports:[hn],exports:[Un,qn]});class Hn{constructor(e){this.gradient=!1,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.element=e.nativeElement}ngOnChanges(e){this.transform=`translate(${this.x} , ${this.y})`,this.startOpacity=.3,this.gradientId="grad"+Xi().toString(),this.gradientUrl=`url(#${this.gradientId})`,this.gradientStops=this.getGradientStops(),this.animations&&this.loadAnimation()}getGradientStops(){return[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:1}]}loadAnimation(){(0,d.select)(this.element).select(".cell").attr("opacity",0),this.animateToCurrentForm()}animateToCurrentForm(){(0,d.select)(this.element).select(".cell").transition().duration(750).attr("opacity",1)}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}}Hn.\u0275fac=function(e){return new(e||Hn)(n["\u0275\u0275directiveInject"](n.ElementRef))},Hn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Hn,selectors:[["g","ngx-charts-heat-map-cell",""]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{gradient:"gradient",animations:"animations",fill:"fill",x:"x",y:"y",width:"width",height:"height",data:"data",label:"label"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-heat-map-cell",""],decls:3,vars:5,consts:[[1,"cell"],[4,"ngIf"],["rx","3",1,"cell",2,"cursor","pointer",3,"click"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275template"](1,ft,2,2,"defs",1),n["\u0275\u0275elementStart"](2,"rect",2),n["\u0275\u0275listener"]("click",function(){return t.onClick()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.gradient),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("fill",t.gradient?t.gradientUrl:t.fill)("width",t.width)("height",t.height))},directives:[o.NgIf,Ki],encapsulation:2,changeDetection:0}),Hn.ctorParameters=()=>[{type:n.ElementRef}],Hn.propDecorators={fill:[{type:n.Input}],x:[{type:n.Input}],y:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],data:[{type:n.Input}],label:[{type:n.Input}],gradient:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],onMouseEnter:[{type:n.HostListener,args:["mouseenter"]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}]};class Wn{constructor(){this.tooltipDisabled=!1,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter}ngOnInit(){this.tooltipText||(this.tooltipText=this.getTooltipText)}ngOnChanges(e){this.update()}update(){this.cells=this.getCells()}getCells(){const e=[];return this.data.map(t=>{t.series.map(i=>{const n=i.value;i.series=t.name,e.push({row:t,cell:i,x:this.xScale(t.name),y:this.yScale(i.name),width:this.xScale.bandwidth(),height:this.yScale.bandwidth(),fill:this.colors.getColor(n),data:n,label:zi(i.name),series:t.name})})}),e}getTooltipText({label:e,data:t,series:i}){return`\n      <span class="tooltip-label">${Ui(i)} \u2022 ${Ui(e)}</span>\n      <span class="tooltip-val">${t.toLocaleString()}</span>\n    `}trackBy(e,t){return t.tooltipText}onClick(e){this.select.emit(e)}}Wn.\u0275fac=function(e){return new(e||Wn)},Wn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Wn,selectors:[["g","ngx-charts-heat-map-cell-series",""]],inputs:{tooltipDisabled:"tooltipDisabled",animations:"animations",tooltipText:"tooltipText",data:"data",colors:"colors",xScale:"xScale",yScale:"yScale",gradient:"gradient",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-heat-map-cell-series",""],decls:1,vars:2,consts:[["ngx-charts-heat-map-cell","","ngx-tooltip","",3,"x","y","width","height","fill","data","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-heat-map-cell","","ngx-tooltip","",3,"x","y","width","height","fill","data","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,vt,1,18,"g",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.cells)("ngForTrackBy",t.trackBy)},directives:[o.NgForOf,Hn,$i],encapsulation:2,changeDetection:0}),Wn.propDecorators={data:[{type:n.Input}],colors:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],gradient:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipText:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class Yn extends Ai{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition="right",this.innerPadding=8,this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.tooltipDisabled=!1,this.activeEntries=[],this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.scaleType="linear"}update(){if(super.update(),this.formatDates(),this.xDomain=this.getXDomain(),this.yDomain=this.getYDomain(),this.valueDomain=this.getValueDomain(),this.scaleType=yn(this.valueDomain,!1),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.scaleType,legendPosition:this.legendPosition}),"linear"===this.scaleType){let e=this.min,t=this.max;this.min||(e=Math.min(0,...this.valueDomain)),this.max||(t=Math.max(...this.valueDomain)),this.valueDomain=[e,t]}this.xScale=this.getXScale(),this.yScale=this.getYScale(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.rects=this.getRects()}getXDomain(){const e=[];for(const t of this.results)e.includes(t.name)||e.push(t.name);return e}getYDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.name)||e.push(i.name);return e}getValueDomain(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.value)||e.push(i.value);return e}getDimension(e,t=0,i,n){return"string"==typeof e&&(e=e.replace("[","").replace("]","").replace("px","").replace("'","")).includes(",")&&(e=e.split(",")),Array.isArray(e)&&"number"==typeof t?this.getDimension(e[t],null,i,n):"string"==typeof e&&e.includes("%")?+e.replace("%","")/100:i/(n/+e+1)}getXScale(){const e=this.getDimension(this.innerPadding,0,this.xDomain.length,this.dims.width);return(0,u.scaleBand)().rangeRound([0,this.dims.width]).domain(this.xDomain).paddingInner(e)}getYScale(){const e=this.getDimension(this.innerPadding,1,this.yDomain.length,this.dims.height);return(0,u.scaleBand)().rangeRound([this.dims.height,0]).domain(this.yDomain).paddingInner(e)}getRects(){const e=[];return this.xDomain.map(t=>{this.yDomain.map(i=>{e.push({x:this.xScale(t),y:this.yScale(i),rx:3,width:this.xScale.bandwidth(),height:this.yScale.bandwidth(),fill:"rgba(200,200,200,0.03)"})})}),e}onClick(e){this.select.emit(e)}setColors(){this.colors=new vn(this.scheme,this.scaleType,this.valueDomain)}getLegendOptions(){return{scaleType:this.scaleType,domain:this.valueDomain,colors:"ordinal"===this.scaleType?this.colors:this.colors.scale,title:"ordinal"===this.scaleType?this.legendTitle:void 0,position:this.legendPosition}}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name);const o=this.results.map(e=>e.series).flat().filter(e=>i?e.label===n.name:e.name===n.name&&e.series===n.series);this.activeEntries=[...o],this.activate.emit({value:n,entries:this.activeEntries})}onDeactivate(e,t,i=!1){const n=Object.assign({},e);t&&(n.series=t.name),this.activeEntries=this.activeEntries.filter(e=>i?e.label!==n.name:!(e.name===n.name&&e.series===n.series)),this.deactivate.emit({value:n,entries:this.activeEntries})}}Yn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Yn)))(t||Yn)}}(),Yn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Yn,selectors:[["ngx-charts-heat-map"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legendTitle:"legendTitle",legendPosition:"legendPosition",innerPadding:"innerPadding",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",tooltipDisabled:"tooltipDisabled",activeEntries:"activeEntries",legend:"legend",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",gradient:"gradient",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",tooltipText:"tooltipText",min:"min",max:"max"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:20,consts:[[3,"view","showLegend","animations","legendOptions","legendLabelClick"],[1,"heat-map","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf"],["ngx-charts-heat-map-cell-series","",3,"xScale","yScale","colors","data","gradient","animations","tooltipDisabled","tooltipTemplate","tooltipText","select","activate","deactivate"],["ngx-charts-x-axis","",3,"xScale","dims","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,xt,1,9,"g",2),n["\u0275\u0275template"](3,yt,1,8,"g",3),n["\u0275\u0275template"](4,bt,1,6,"rect",4),n["\u0275\u0275elementStart"](5,"g",5),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)})("activate",function(e){return t.onActivate(e,void 0)})("deactivate",function(e){return t.onDeactivate(e,void 0)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("animations",t.animations)("legendOptions",t.legendOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.rects),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("xScale",t.xScale)("yScale",t.yScale)("colors",t.colors)("data",t.results)("gradient",t.gradient)("animations",t.animations)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("tooltipText",t.tooltipText))},directives:[Di,o.NgIf,o.NgForOf,Wn,Oi,Pi],styles:[Ae],encapsulation:2,changeDetection:0}),Yn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],gradient:[{type:n.Input}],innerPadding:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipText:[{type:n.Input}],min:[{type:n.Input}],max:[{type:n.Input}],activeEntries:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class Qn{}Qn.\u0275fac=function(e){return new(e||Qn)},Qn.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Qn}),Qn.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Qn,{declarations:[Hn,Wn,Yn],imports:[hn],exports:[Hn,Wn,Yn]});class Kn{constructor(e){this.element=e,this.fill="none",this.animations=!0,this.select=new n.EventEmitter,this.initialized=!1}ngOnChanges(e){this.initialized?this.updatePathEl():(this.initialized=!0,this.initialPath=this.path)}updatePathEl(){const e=(0,d.select)(this.element.nativeElement).select(".line");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}}Kn.\u0275fac=function(e){return new(e||Kn)(n["\u0275\u0275directiveInject"](n.ElementRef))},Kn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Kn,selectors:[["g","ngx-charts-line",""]],inputs:{fill:"fill",animations:"animations",path:"path",stroke:"stroke",data:"data"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-line",""],decls:1,vars:4,consts:[["stroke-width","1.5px",1,"line"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"path",0)),2&e&&(n["\u0275\u0275property"]("@animationState","active"),n["\u0275\u0275attribute"]("d",t.initialPath)("fill",t.fill)("stroke",t.stroke))},encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":enter",[(0,r.style)({strokeDasharray:2e3,strokeDashoffset:2e3}),(0,r.animate)(1e3,(0,r.style)({strokeDashoffset:0}))])])]},changeDetection:0}),Kn.ctorParameters=()=>[{type:n.ElementRef}],Kn.propDecorators={path:[{type:n.Input}],stroke:[{type:n.Input}],data:[{type:n.Input}],fill:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class Jn extends Ai{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition="right",this.showGridLines=!0,this.curve=h.curveLinear,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.showRefLines=!1,this.showRefLabels=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Xi().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=xn(this.results);this.scaleType=yn(e);let t,i,n=[];return"linear"===this.scaleType&&(e=e.map(e=>Number(e))),"time"!==this.scaleType&&"linear"!==this.scaleType||(t=this.xScaleMin?this.xScaleMin:Math.min(...e),i=this.xScaleMax?this.xScaleMax:Math.max(...e)),"time"===this.scaleType?(n=[new Date(t),new Date(i)],this.xSet=[...e].sort((e,t)=>{const i=e.getTime(),n=t.getTime();return i>n?1:n>i?-1:0})):"linear"===this.scaleType?(n=[t,i],this.xSet=[...e].sort((e,t)=>e-t)):(n=e,this.xSet=e),n}getYDomain(){const e=[];for(const i of this.results)for(const t of i.series)e.indexOf(t.value)<0&&e.push(t.value),void 0!==t.min&&(this.hasRange=!0,e.indexOf(t.min)<0&&e.push(t.min)),void 0!==t.max&&(this.hasRange=!0,e.indexOf(t.max)<0&&e.push(t.max));const t=[...e];this.autoScale||t.push(0);return[this.yScaleMin?this.yScaleMin:Math.min(...t),this.yScaleMax?this.yScaleMax:Math.max(...t)]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,t){let i;return"time"===this.scaleType?i=(0,u.scaleTime)().range([0,t]).domain(e):"linear"===this.scaleType?(i=(0,u.scaleLinear)().range([0,t]).domain(e),this.roundDomains&&(i=i.nice())):"ordinal"===this.scaleType&&(i=(0,u.scalePoint)().range([0,t]).padding(.1).domain(e)),i}getYScale(e,t){const i=(0,u.scaleLinear)().range([t,0]).domain(e);return this.roundDomains?i.nice():i}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e){this.select.emit(e)}trackBy(e,t){return t.name}setColors(){let e;e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain,this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){const e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return"ordinal"===e.scaleType?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.deactivateAll();this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=[e],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}}Jn.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Jn)))(t||Jn)}}(),Jn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Jn,selectors:[["ngx-charts-line-chart"]],contentQueries:function(e,t,i){if(1&e&&(n["\u0275\u0275contentQuery"](i,pe,5),n["\u0275\u0275contentQuery"](i,ue,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.seriesTooltipTemplate=e.first)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mouseleave",function(){return t.hideCircles()})},inputs:{legendTitle:"legendTitle",legendPosition:"legendPosition",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showRefLines:"showRefLines",showRefLabels:"showRefLabels",legend:"legend",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",timeline:"timeline",gradient:"gradient",schemeType:"schemeType",rangeFillOpacity:"rangeFillOpacity",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",referenceLines:"referenceLines",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:20,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"line-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","dimensionsChanged"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","dimensionsChanged"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","hasRange","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate","hover"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","tooltipTemplate","select","activate","deactivate"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","scaleType","curve","hasRange","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"g",1),n["\u0275\u0275template"](5,Ct,1,10,"g",2),n["\u0275\u0275template"](6,St,1,12,"g",3),n["\u0275\u0275elementStart"](7,"g"),n["\u0275\u0275template"](8,wt,2,11,"g",4),n["\u0275\u0275template"](9,_t,3,9,"g",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](10,Rt,2,13,"g",6),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275attribute"]("id",t.clipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.dims.width+10)("height",t.dims.height+10)("transform","translate(-5, -5)"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("clip-path",t.clipPath),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!t.tooltipDisabled),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.timeline&&"ordinal"!=t.scaleType))},directives:function(){return[Di,o.NgIf,o.NgForOf,Oi,Pi,Zn,ln,Hi,cn]},styles:[Ae],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1}),(0,r.animate)(500,(0,r.style)({opacity:0}))])])]},changeDetection:0}),Jn.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],autoScale:[{type:n.Input}],timeline:[{type:n.Input}],gradient:[{type:n.Input}],showGridLines:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],rangeFillOpacity:[{type:n.Input}],trimXAxisTicks:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],rotateXAxisTicks:[{type:n.Input}],maxXAxisTickLength:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],xAxisTicks:[{type:n.Input}],yAxisTicks:[{type:n.Input}],roundDomains:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],showRefLines:[{type:n.Input}],referenceLines:[{type:n.Input}],showRefLabels:[{type:n.Input}],xScaleMin:[{type:n.Input}],xScaleMax:[{type:n.Input}],yScaleMin:[{type:n.Input}],yScaleMax:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],seriesTooltipTemplate:[{type:n.ContentChild,args:["seriesTooltipTemplate"]}],hideCircles:[{type:n.HostListener,args:["mouseleave"]}]};class Zn{constructor(){this.animations=!0}ngOnChanges(e){this.update()}update(){this.updateGradients();const e=this.sortData(this.data.series),t=this.getLineGenerator();this.path=t(e)||"";const i=this.getAreaGenerator();if(this.areaPath=i(e)||"",this.hasRange){const t=this.getRangeGenerator();this.outerPath=t(e)||""}if(this.hasGradient){this.stroke=this.gradientUrl;const e=this.data.series.map(e=>e.value),t=Math.max(...e);t===Math.min(...e)&&(this.stroke=this.colors.getColor(t))}else this.stroke=this.colors.getColor(this.data.name)}getLineGenerator(){return(0,h.line)().x(e=>{const t=e.name;let i;return i="time"===this.scaleType?this.xScale(t):"linear"===this.scaleType?this.xScale(Number(t)):this.xScale(t),i}).y(e=>this.yScale(e.value)).curve(this.curve)}getRangeGenerator(){return(0,h.area)().x(e=>{const t=e.name;let i;return i="time"===this.scaleType?this.xScale(t):"linear"===this.scaleType?this.xScale(Number(t)):this.xScale(t),i}).y0(e=>this.yScale("number"==typeof e.min?e.min:e.value)).y1(e=>this.yScale("number"==typeof e.max?e.max:e.value)).curve(this.curve)}getAreaGenerator(){return(0,h.area)().x(e=>{const t=e.name;return this.xScale(t)}).y0(()=>this.yScale.range()[0]).y1(e=>this.yScale(e.value)).curve(this.curve)}sortData(e){return e="linear"===this.scaleType?wn(e,"name"):"time"===this.scaleType?_n(e,"name"):In(e,"name","asc",this.xScale.domain())}updateGradients(){if("linear"===this.colors.scaleType){this.hasGradient=!0,this.gradientId="grad"+Xi().toString(),this.gradientUrl=`url(#${this.gradientId})`;const e=this.data.series.map(e=>e.value),t=Math.max(...e),i=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(t,i),this.areaGradientStops=this.colors.getLinearGradientStops(t)}else this.hasGradient=!1,this.gradientStops=void 0,this.areaGradientStops=void 0}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name)}isInactive(e){if(!this.activeEntries||0===this.activeEntries.length)return!1;return void 0===this.activeEntries.find(t=>e.name===t.name)}}Zn.\u0275fac=function(e){return new(e||Zn)},Zn.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Zn,selectors:[["g","ngx-charts-line-series",""]],inputs:{animations:"animations",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",hasRange:"hasRange"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-line-series",""],decls:6,vars:22,consts:[["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops",4,"ngIf"],["ngx-charts-area","",1,"line-highlight",3,"data","path","fill","opacity","startOpacity","gradient","stops","animations"],["ngx-charts-line","",1,"line-series",3,"data","path","stroke","animations"],["ngx-charts-area","","class","line-series-range",3,"data","path","fill","active","inactive","opacity","animations",4,"ngIf"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"],["ngx-charts-area","",1,"line-series-range",3,"data","path","fill","opacity","animations"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275template"](2,At,1,2,"g",0),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"g",1),n["\u0275\u0275element"](4,"g",2),n["\u0275\u0275template"](5,Tt,1,9,"g",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.hasGradient),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",t.isActive(t.data))("inactive",t.isInactive(t.data)),n["\u0275\u0275property"]("data",t.data)("path",t.areaPath)("fill",t.hasGradient?t.gradientUrl:t.colors.getColor(t.data.name))("opacity",.25)("startOpacity",0)("gradient",!0)("stops",t.areaGradientStops)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",t.isActive(t.data))("inactive",t.isInactive(t.data)),n["\u0275\u0275property"]("data",t.data)("path",t.path)("stroke",t.stroke)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.hasRange))},directives:[o.NgIf,Zi,Kn,Ki],encapsulation:2,changeDetection:0}),Zn.propDecorators={data:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],colors:[{type:n.Input}],scaleType:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],rangeFillOpacity:[{type:n.Input}],hasRange:[{type:n.Input}],animations:[{type:n.Input}]};class eo{}eo.\u0275fac=function(e){return new(e||eo)},eo.\u0275mod=n["\u0275\u0275defineNgModule"]({type:eo}),eo.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](eo,{declarations:[Kn,Jn,Zn],imports:[hn],exports:[Kn,Jn,Zn]});const to=2*Math.PI;class io extends Ai{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition="right",this.showGridLines=!0,this.curve=h.curveCardinalClosed,this.activeEntries=[],this.rangeFillOpacity=.15,this.trimYAxisTicks=!0,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.showSeriesOnHover=!0,this.gradient=!1,this.yAxisMinScale=0,this.labelTrim=!0,this.labelTrimSize=10,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0}update(){super.update(),this.setDims(),this.setScales(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.setTicks()}setDims(){this.dims=fn({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition});const e=Math.floor(this.dims.width/2),t=Math.floor(this.dims.height/2),i=this.outerRadius=Math.min(t/1.5,e/1.5),n=Math.max(0,t-i);this.yAxisDims=Object.assign(Object.assign({},this.dims),{width:e}),this.transform=`translate(${this.dims.xOffset}, ${this.margin[0]})`,this.transformYAxis=`translate(0, ${n})`,this.labelOffset=this.dims.height+40,this.transformPlot=`translate(${e}, ${t})`}setScales(){const e=this.getXValues();this.scaleType=yn(e),this.xDomain=this.filteredDomain||this.getXDomain(e),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,to),this.yScale=this.getYScale(this.yDomain,this.outerRadius),this.yAxisScale=this.getYScale(this.yDomain.reverse(),this.outerRadius)}setTicks(){let e;e=this.xAxisTickFormatting?this.xAxisTickFormatting:this.xScale.tickFormat?this.xScale.tickFormat.apply(this.xScale,[5]):e=>{return t=e,"[object Date]"===toString.call(t)?e.toLocaleDateString():e.toLocaleString();var t};const t=this.outerRadius;this.thetaTicks=this.xDomain.map(i=>{const n=this.xScale(i),o=1.1*t*(n>Math.PI?-1:1),r=e(i),a=[t*Math.sin(n),-t*Math.cos(n)],s=[o,1.1*a[1]];return{innerRadius:0,outerRadius:t,startAngle:n,endAngle:n,value:t,label:r,startPos:a,pos:s}});for(let i=0;i<this.thetaTicks.length-1;i++){const e=this.thetaTicks[i];for(let t=i+1;t<this.thetaTicks.length;t++){const i=this.thetaTicks[t];if(i.pos[0]*e.pos[0]>0){const t=10-Math.abs(i.pos[1]-e.pos[1]);t>0&&(i.pos[1]+=Math.sign(i.pos[0])*t)}}}this.radiusTicks=this.yAxisScale.ticks(Math.floor(this.dims.height/50)).map(e=>this.yScale(e))}getXValues(){const e=[];for(const t of this.results)for(const i of t.series)e.includes(i.name)||e.push(i.name);return e}getXDomain(e=this.getXValues()){if("time"===this.scaleType){return[Math.min(...e),Math.max(...e)]}if("linear"===this.scaleType){e=e.map(e=>Number(e));return[Math.min(...e),Math.max(...e)]}return e}getYValues(){const e=[];for(const t of this.results)for(const i of t.series)e.indexOf(i.value)<0&&e.push(i.value),void 0!==i.min&&e.indexOf(i.min)<0&&e.push(i.min),void 0!==i.max&&e.indexOf(i.max)<0&&e.push(i.max);return e}getYDomain(e=this.getYValues()){let t=Math.min(...e);const i=Math.max(this.yAxisMinScale,...e);return t=Math.max(0,t),this.autoScale||(t=Math.min(0,t)),[t,i]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,t){switch(this.scaleType){case"time":return(0,u.scaleTime)().range([0,t]).domain(e);case"linear":const i=(0,u.scaleLinear)().range([0,t]).domain(e);return this.roundDomains?i.nice():i;default:return(0,u.scalePoint)().range([0,t-to/e.length]).padding(0).domain(e)}}getYScale(e,t){const i=(0,u.scaleLinear)().range([0,t]).domain(e);return this.roundDomains?i.nice():i}onClick(e,t){t&&(e.series=t.name),this.select.emit(e)}setColors(){const e="ordinal"===this.schemeType?this.seriesDomain:this.yDomain.reverse();this.colors=new vn(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){return"ordinal"===this.schemeType?{scaleType:this.schemeType,colors:this.colors,domain:this.seriesDomain,title:this.legendTitle,position:this.legendPosition}:{scaleType:this.schemeType,colors:this.colors.scale,domain:this.yDomain,title:void 0,position:this.legendPosition}}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=this.showSeriesOnHover?[e,...this.activeEntries]:this.activeEntries,this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(const e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}trackBy(e,t){return t.name}}io.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](io)))(t||io)}}(),io.\u0275cmp=n["\u0275\u0275defineComponent"]({type:io,selectors:[["ngx-charts-polar-chart"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{legendTitle:"legendTitle",legendPosition:"legendPosition",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",trimYAxisTicks:"trimYAxisTicks",maxYAxisTickLength:"maxYAxisTickLength",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showSeriesOnHover:"showSeriesOnHover",gradient:"gradient",yAxisMinScale:"yAxisMinScale",labelTrim:"labelTrim",labelTrimSize:"labelTrimSize",legend:"legend",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",schemeType:"schemeType",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:10,vars:18,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"polar-chart","chart"],["cx","0","cy","0",1,"polar-chart-background"],[4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","gridline-path radial-gridline-path","cx","0","cy","0",4,"ngFor","ngForOf"],["cx","0","cy","0",1,"gridline-path","radial-gridline-path"],["ngx-charts-pie-label","",3,"data","radius","label","max","value","explodeSlices","animations","labelTrim","labelTrimSize",4,"ngFor","ngForOf"],["ngx-charts-pie-label","",3,"data","radius","label","max","value","explodeSlices","animations","labelTrim","labelTrimSize"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","dimensionsChanged"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"],["ngx-charts-polar-series","",3,"gradient","xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","animations","tooltipDisabled","tooltipTemplate","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275elementStart"](2,"g"),n["\u0275\u0275element"](3,"circle",2),n["\u0275\u0275template"](4,Et,2,1,"g",3),n["\u0275\u0275template"](5,Ot,2,1,"g",3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](6,kt,1,9,"g",4),n["\u0275\u0275template"](7,jt,1,5,"g",5),n["\u0275\u0275elementStart"](8,"g"),n["\u0275\u0275template"](9,Pt,2,13,"g",6),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](15,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transformPlot),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("r",t.outerRadius),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showGridLines),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.yAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.xAxis&&t.showXAxisLabel),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transformPlot),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.results)("ngForTrackBy",t.trackBy))},directives:function(){return[Di,o.NgIf,o.NgForOf,ro,Pi,Ti,no]},styles:[Ae,Bt,".polar-chart .polar-chart-background{fill:none}.polar-chart .radial-gridline-path{fill:none;stroke-dasharray:10 10}.polar-chart .pie-label-line{stroke:#2f3646}.polar-charts-series .polar-series-area,.polar-series-path{pointer-events:none}"],encapsulation:2,data:{animation:[(0,r.trigger)("animationState",[(0,r.transition)(":leave",[(0,r.style)({opacity:1}),(0,r.animate)(500,(0,r.style)({opacity:0}))])])]},changeDetection:0}),io.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],xAxis:[{type:n.Input}],yAxis:[{type:n.Input}],showXAxisLabel:[{type:n.Input}],showYAxisLabel:[{type:n.Input}],xAxisLabel:[{type:n.Input}],yAxisLabel:[{type:n.Input}],autoScale:[{type:n.Input}],showGridLines:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],schemeType:[{type:n.Input}],rangeFillOpacity:[{type:n.Input}],trimYAxisTicks:[{type:n.Input}],maxYAxisTickLength:[{type:n.Input}],xAxisTickFormatting:[{type:n.Input}],yAxisTickFormatting:[{type:n.Input}],roundDomains:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],showSeriesOnHover:[{type:n.Input}],gradient:[{type:n.Input}],yAxisMinScale:[{type:n.Input}],labelTrim:[{type:n.Input}],labelTrimSize:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class no{constructor(){this.tooltipDisabled=!1,this.gradient=!1,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.circleRadius=3}ngOnChanges(e){this.update()}update(){this.updateGradients();const e=this.getLineGenerator(),t=this.sortData(this.data.series),i=this.data.name,n="linear"===this.colors.scaleType,o=this.yScale.domain()[0];this.seriesColor=this.colors.getColor(n?o:i),this.path=e(t)||"",this.circles=t.map(e=>{const t=this.getAngle(e),o=this.getRadius(e),r=e.value,a=this.colors.getColor(n?Math.abs(r):i);return{data:Object.assign({},e,{series:i,value:r,name:e.name}),cx:o*Math.sin(t),cy:-o*Math.cos(t),value:r,color:a,label:e.name}}),this.active=this.isActive(this.data),this.inactive=this.isInactive(this.data),this.tooltipText=this.tooltipText||(e=>this.defaultTooltipText(e))}getAngle(e){const t=e.name;return"time"===this.scaleType?this.xScale(t):"linear"===this.scaleType?this.xScale(Number(t)):this.xScale(t)}getRadius(e){return this.yScale(e.value)}getLineGenerator(){return(0,h.lineRadial)().angle(e=>this.getAngle(e)).radius(e=>this.getRadius(e)).curve(this.curve)}sortData(e){return"linear"===this.scaleType?wn(e,"name"):"time"===this.scaleType?_n(e,"name"):In(e,"name","asc",this.xScale.domain())}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name)}isInactive(e){if(!this.activeEntries||0===this.activeEntries.length)return!1;return void 0===this.activeEntries.find(t=>e.name===t.name)}defaultTooltipText({label:e,value:t}){return`\n      <span class="tooltip-label">${Ui(this.data.name)} \u2022 ${Ui(e)}</span>\n      <span class="tooltip-val">${t.toLocaleString()}</span>\n    `}updateGradients(){if(this.hasGradient=this.gradient||"linear"===this.colors.scaleType,this.hasGradient)if(this.gradientId="grad"+Xi().toString(),this.gradientUrl=`url(#${this.gradientId})`,"linear"===this.colors.scaleType){const e=this.data.series.map(e=>e.value),t=Math.max(...e),i=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(t,i)}else this.gradientStops=void 0}}no.\u0275fac=function(e){return new(e||no)},no.\u0275cmp=n["\u0275\u0275defineComponent"]({type:no,selectors:[["g","ngx-charts-polar-series",""]],inputs:{tooltipDisabled:"tooltipDisabled",gradient:"gradient",animations:"animations",tooltipText:"tooltipText",name:"name",data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-polar-series",""],decls:5,vars:11,consts:[[1,"polar-charts-series"],["ngx-charts-svg-radial-gradient","","orientation","vertical",3,"color","name","startOpacity","endOpacity","stops",4,"ngIf"],["ngx-charts-line","",1,"polar-series-path",3,"path","stroke","fill","animations"],["ngx-charts-circle","","class","circle","ngx-tooltip","","tooltipType","tooltip",3,"cx","cy","r","fill","opacity","tooltipDisabled","tooltipPlacement","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate",4,"ngFor","ngForOf"],["ngx-charts-svg-radial-gradient","","orientation","vertical",3,"color","name","startOpacity","endOpacity","stops"],["ngx-charts-circle","","ngx-tooltip","","tooltipType","tooltip",1,"circle",3,"cx","cy","r","fill","tooltipDisabled","tooltipPlacement","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275template"](2,Nt,1,5,"g",1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](3,"g",2),n["\u0275\u0275template"](4,Vt,1,11,"g",3),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",t.hasGradient),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("active",t.active)("inactive",t.inactive),n["\u0275\u0275property"]("path",t.path)("stroke",t.hasGradient?t.gradientUrl:t.seriesColor)("fill",t.hasGradient?t.gradientUrl:t.seriesColor)("animations",t.animations),n["\u0275\u0275attribute"]("fill-opacity",t.rangeFillOpacity),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.circles))},directives:[o.NgIf,Kn,o.NgForOf,Ji,Wi,$i],encapsulation:2,changeDetection:0}),no.propDecorators={name:[{type:n.Input}],data:[{type:n.Input}],xScale:[{type:n.Input}],yScale:[{type:n.Input}],colors:[{type:n.Input}],scaleType:[{type:n.Input}],curve:[{type:n.Input}],activeEntries:[{type:n.Input}],rangeFillOpacity:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipText:[{type:n.Input}],gradient:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class oo extends Ai{constructor(){super(...arguments),this.activeEntries=[],this.tooltipDisabled=!1,this.label="Total",this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[20,20,20,20]}update(){super.update(),this.dims=fn({width:4*this.width/12,height:this.height,margins:this.margin}),this.formatDates(),this.domain=this.getDomain(),this.setColors();const e=this.dims.width/2,t=this.margin[0]+this.dims.height/2;this.legendWidth=this.width-this.dims.width-this.margin[1],this.outerRadius=Math.min(this.dims.width,this.dims.height)/2.5,this.innerRadius=.75*this.outerRadius,this.transform=`translate(${e} , ${t})`}getDomain(){return this.results.map(e=>e.label)}onClick(e){this.select.emit(e)}setColors(){this.colors=new vn(this.scheme,"ordinal",this.domain,this.customColors)}onActivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);const i=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}}oo.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](oo)))(t||oo)}}(),oo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:oo,selectors:[["ngx-charts-advanced-pie-chart"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",label:"label",gradient:"gradient",tooltipText:"tooltipText",valueFormatting:"valueFormatting",nameFormatting:"nameFormatting",percentageFormatting:"percentageFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:37,consts:[[1,"advanced-pie","chart"],[3,"view","showLegend","animations"],[1,"pie","chart"],["ngx-charts-pie-series","",3,"colors","series","innerRadius","activeEntries","outerRadius","gradient","tooltipDisabled","tooltipTemplate","tooltipText","animations","select","activate","deactivate"],[1,"advanced-pie-legend-wrapper"],[3,"data","colors","width","label","animations","valueFormatting","labelFormatting","percentageFormatting","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"div"),n["\u0275\u0275elementStart"](1,"div",0),n["\u0275\u0275elementStart"](2,"ngx-charts-chart",1),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](3,"g",2),n["\u0275\u0275elementStart"](4,"g",3),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)})("activate",function(e){return t.onActivate(e)})("deactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275elementStart"](5,"div",4),n["\u0275\u0275elementStart"](6,"ngx-charts-advanced-legend",5),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)})("activate",function(e){return t.onActivate(e,!0)})("deactivate",function(e){return t.onDeactivate(e,!0)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275styleProp"]("width",t.width,"px")("height",t.height,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("width",t.dims.width,"px")("height",t.dims.height,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](34,ye,t.width,t.height))("showLegend",!1)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("colors",t.colors)("series",t.results)("innerRadius",t.innerRadius)("activeEntries",t.activeEntries)("outerRadius",t.outerRadius)("gradient",t.gradient)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("tooltipText",t.tooltipText)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("width",t.width-t.dims.width,"px")("height",t.height,"px"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("data",t.results)("colors",t.colors)("width",t.width-t.dims.width-t.margin[1])("label",t.label)("animations",t.animations)("valueFormatting",t.valueFormatting)("labelFormatting",t.nameFormatting)("percentageFormatting",t.percentageFormatting))},directives:function(){return[Di,mo,mn]},styles:[Ae,".advanced-pie{float:left}.advanced-pie,.advanced-pie-legend-wrapper{display:inline-block}"],encapsulation:2,changeDetection:0}),oo.propDecorators={gradient:[{type:n.Input}],activeEntries:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipText:[{type:n.Input}],label:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],valueFormatting:[{type:n.Input}],nameFormatting:[{type:n.Input}],percentageFormatting:[{type:n.Input}]};class ro{constructor(){this.animations=!0,this.labelTrim=!0,this.labelTrimSize=10,this.isIE=/(edge|msie|trident)/i.test(navigator.userAgent),this.trimLabel=Fi}ngOnChanges(e){this.update()}update(){let e=this.radius;this.explodeSlices&&(e=this.radius*this.value/this.max);const t=(0,h.arc)().innerRadius(e).outerRadius(e).centroid(this.data);let i=this.data.pos[1]/t[1];0!==this.data.pos[1]&&0!==t[1]||(i=1);const n=[i*t[0],i*t[1]];this.line=`M${t}L${n}L${this.data.pos}`}get textX(){return this.data.pos[0]}get textY(){return this.data.pos[1]}get styleTransform(){return this.isIE?null:`translate3d(${this.textX}px,${this.textY}px, 0)`}get attrTransform(){return this.isIE?`translate(${this.textX},${this.textY})`:null}get textTransition(){return this.isIE||!this.animations?null:"transform 0.75s"}textAnchor(){return this.midAngle(this.data)<Math.PI?"start":"end"}midAngle(e){return e.startAngle+(e.endAngle-e.startAngle)/2}}ro.\u0275fac=function(e){return new(e||ro)},ro.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ro,selectors:[["g","ngx-charts-pie-label",""]],inputs:{animations:"animations",labelTrim:"labelTrim",labelTrimSize:"labelTrimSize",data:"data",radius:"radius",label:"label",color:"color",max:"max",value:"value",explodeSlices:"explodeSlices"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-pie-label",""],decls:6,vars:17,consts:[["dy",".35em",1,"pie-label"],["fill","none",1,"pie-label-line","line"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"title"),n["\u0275\u0275text"](1),n["\u0275\u0275elementEnd"](),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](2,"g"),n["\u0275\u0275elementStart"](3,"text",0),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275element"](5,"path",1)),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate"](t.label),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("transform",t.styleTransform)("transition",t.textTransition),n["\u0275\u0275attribute"]("transform",t.attrTransform),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("text-anchor",t.textAnchor())("shape-rendering","crispEdges"),n["\u0275\u0275classProp"]("animation",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",t.labelTrim?t.trimLabel(t.label,t.labelTrimSize):t.label," "),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("animation",t.animations),n["\u0275\u0275attribute"]("d",t.line)("stroke",t.color))},encapsulation:2,changeDetection:0}),ro.ctorParameters=()=>[],ro.propDecorators={data:[{type:n.Input}],radius:[{type:n.Input}],label:[{type:n.Input}],color:[{type:n.Input}],max:[{type:n.Input}],value:[{type:n.Input}],explodeSlices:[{type:n.Input}],animations:[{type:n.Input}],labelTrim:[{type:n.Input}],labelTrimSize:[{type:n.Input}]};class ao{constructor(e){this.startAngle=0,this.endAngle=2*Math.PI,this.cornerRadius=0,this.explodeSlices=!1,this.gradient=!1,this.animate=!0,this.pointerEvents=!0,this.isActive=!1,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.dblclick=new n.EventEmitter,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(e){this.update()}getGradient(){return this.gradient?this.gradientFill:this.fill}getPointerEvents(){return this.pointerEvents?"auto":"none"}update(){const e=this.calculateArc();this.startOpacity=.5,this.radialGradientId="linearGrad"+Xi().toString(),this.gradientFill=`url(#${this.radialGradientId})`,this.animate?this.initialized?this.updateAnimation():(this.loadAnimation(),this.initialized=!0):this.path=e.startAngle(this.startAngle).endAngle(this.endAngle)()}calculateArc(){let e=this.outerRadius;return this.explodeSlices&&0===this.innerRadius&&(e=this.outerRadius*this.value/this.max),(0,h.arc)().innerRadius(this.innerRadius).outerRadius(e).cornerRadius(this.cornerRadius)}loadAnimation(){const e=(0,d.select)(this.element).selectAll(".arc").data([{startAngle:this.startAngle,endAngle:this.endAngle}]),t=this.calculateArc();e.transition().attrTween("d",function(e){this._current=this._current||e;const i=Object.assign({},e);i.endAngle=i.startAngle;const n=(0,g.interpolate)(i,i);return this._current=n(0),function(e){return t(n(e))}}).transition().duration(750).attrTween("d",function(e){this._current=this._current||e;const i=(0,g.interpolate)(this._current,e);return this._current=i(0),function(e){return t(i(e))}})}updateAnimation(){const e=(0,d.select)(this.element).selectAll(".arc").data([{startAngle:this.startAngle,endAngle:this.endAngle}]),t=this.calculateArc();e.transition().duration(750).attrTween("d",function(e){this._current=this._current||e;const i=(0,g.interpolate)(this._current,e);return this._current=i(0),function(e){return t(i(e))}})}onClick(){clearTimeout(this._timeout),this._timeout=setTimeout(()=>this.select.emit(this.data),200)}onDblClick(e){e.preventDefault(),e.stopPropagation(),clearTimeout(this._timeout),this.dblclick.emit({data:this.data,nativeEvent:e})}}ao.\u0275fac=function(e){return new(e||ao)(n["\u0275\u0275directiveInject"](n.ElementRef))},ao.\u0275cmp=n["\u0275\u0275defineComponent"]({type:ao,selectors:[["g","ngx-charts-pie-arc",""]],inputs:{startAngle:"startAngle",endAngle:"endAngle",cornerRadius:"cornerRadius",explodeSlices:"explodeSlices",gradient:"gradient",animate:"animate",pointerEvents:"pointerEvents",isActive:"isActive",fill:"fill",innerRadius:"innerRadius",outerRadius:"outerRadius",value:"value",max:"max",data:"data"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dblclick:"dblclick"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-pie-arc",""],decls:3,vars:7,consts:[[1,"arc-group"],[4,"ngIf"],[1,"arc",3,"click","dblclick","mouseenter","mouseleave"],["ngx-charts-svg-radial-gradient","","orientation","vertical",3,"color","name","startOpacity"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275template"](1,Lt,2,3,"defs",1),n["\u0275\u0275elementStart"](2,"path",2),n["\u0275\u0275listener"]("click",function(){return t.onClick()})("dblclick",function(e){return t.onDblClick(e)})("mouseenter",function(){return t.activate.emit(t.data)})("mouseleave",function(){return t.deactivate.emit(t.data)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.gradient),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("pointer-events",t.getPointerEvents()),n["\u0275\u0275classProp"]("active",t.isActive),n["\u0275\u0275attribute"]("d",t.path)("fill",t.getGradient()))},directives:[o.NgIf,Ji],encapsulation:2,changeDetection:0}),ao.ctorParameters=()=>[{type:n.ElementRef}],ao.propDecorators={fill:[{type:n.Input}],startAngle:[{type:n.Input}],endAngle:[{type:n.Input}],innerRadius:[{type:n.Input}],outerRadius:[{type:n.Input}],cornerRadius:[{type:n.Input}],value:[{type:n.Input}],max:[{type:n.Input}],data:[{type:n.Input}],explodeSlices:[{type:n.Input}],gradient:[{type:n.Input}],animate:[{type:n.Input}],pointerEvents:[{type:n.Input}],isActive:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],dblclick:[{type:n.Output}]};class so extends Ai{constructor(){super(...arguments),this.labels=!1,this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.explodeSlices=!1,this.doughnut=!1,this.arcWidth=.25,this.activeEntries=[],this.tooltipDisabled=!1,this.trimLabels=!0,this.maxLabelLength=10,this.dblclick=new n.EventEmitter,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter}update(){super.update(),this.labels&&this.hasNoOptionalMarginsSet()?this.margins=[30,80,30,80]:!this.labels&&this.hasNoOptionalMarginsSet()&&(this.margins=[20,20,20,20]),this.dims=fn({width:this.width,height:this.height,margins:this.margins,showLegend:this.legend,legendPosition:this.legendPosition}),this.formatDates();const e=this.margins[3]+this.dims.width/2,t=this.margins[0]+this.dims.height/2;this.translation=`translate(${e}, ${t})`,this.outerRadius=Math.min(this.dims.width,this.dims.height),this.labels?this.outerRadius/=3:this.outerRadius/=2,this.innerRadius=0,this.doughnut&&(this.innerRadius=this.outerRadius*(1-this.arcWidth)),this.domain=this.getDomain(),this.data=this.results.sort((e,t)=>this.domain.indexOf(e.name)-this.domain.indexOf(t.name)),this.setColors(),this.legendOptions=this.getLegendOptions()}getDomain(){return this.results.map(e=>e.label)}onClick(e){this.select.emit(e)}setColors(){this.colors=new vn(this.scheme,"ordinal",this.domain,this.customColors)}getLegendOptions(){return{scaleType:"ordinal",domain:this.domain,colors:this.colors,title:this.legendTitle,position:this.legendPosition}}onActivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);const i=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}hasNoOptionalMarginsSet(){return!this.margins||this.margins.length<=0}}function lo(e,t,i){let n=1,o=t;const r=e.width;if(r>i)for(;r/o<i;)n+=1,o=Math.ceil(t/n);return[o,n]}function co(e,t,i,n){const o=(0,u.scaleBand)(),r=(0,u.scaleBand)(),a=e.width,s=e.height,[l,c]=lo(e,t.length,i),d=[],p=[];for(let u=0;u<c;u++)p.push(u);for(let u=0;u<l;u++)d.push(u);o.domain(d),r.domain(p),o.rangeRound([0,a],.1),r.rangeRound([0,s],.1);const m=[],h=n||t.map(e=>e?e.value:0).reduce((e,t)=>e+t,0);const f=o.bandwidth(),g=r.bandwidth();for(let u=0;u<t.length;u++)m[u]={},m[u].data={name:t[u]?t[u].name:"",value:t[u]?t[u].value:void 0,extra:t[u]?t[u].extra:void 0,label:t[u]?t[u].label:""},m[u].x=o(u%l),m[u].y=r(Math.floor(u/l)),m[u].width=f,m[u].height=g,m[u].data.percent=h>0?m[u].data.value/h:0,m[u].data.total=h;return m}so.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](so)))(t||so)}}(),so.\u0275cmp=n["\u0275\u0275defineComponent"]({type:so,selectors:[["ngx-charts-pie-chart"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{labels:"labels",legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",explodeSlices:"explodeSlices",doughnut:"doughnut",arcWidth:"arcWidth",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",trimLabels:"trimLabels",maxLabelLength:"maxLabelLength",margins:"margins",gradient:"gradient",labelFormatting:"labelFormatting",tooltipText:"tooltipText"},outputs:{dblclick:"dblclick",select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:24,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelActivate","legendLabelDeactivate","legendLabelClick"],[1,"pie-chart","chart"],["ngx-charts-pie-series","",3,"colors","series","showLabels","labelFormatting","trimLabels","maxLabelLength","activeEntries","innerRadius","outerRadius","explodeSlices","gradient","animations","tooltipDisabled","tooltipTemplate","tooltipText","dblclick","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelActivate",function(e){return t.onActivate(e,!0)})("legendLabelDeactivate",function(e){return t.onDeactivate(e,!0)})("legendLabelClick",function(e){return t.onClick(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275elementStart"](2,"g",2),n["\u0275\u0275listener"]("dblclick",function(e){return t.dblclick.emit(e)})("select",function(e){return t.onClick(e)})("activate",function(e){return t.onActivate(e)})("deactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](21,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.translation),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("colors",t.colors)("series",t.data)("showLabels",t.labels)("labelFormatting",t.labelFormatting)("trimLabels",t.trimLabels)("maxLabelLength",t.maxLabelLength)("activeEntries",t.activeEntries)("innerRadius",t.innerRadius)("outerRadius",t.outerRadius)("explodeSlices",t.explodeSlices)("gradient",t.gradient)("animations",t.animations)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("tooltipText",t.tooltipText))},directives:function(){return[Di,mo]},styles:[Ae,Bt],encapsulation:2,changeDetection:0}),so.propDecorators={labels:[{type:n.Input}],legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],explodeSlices:[{type:n.Input}],doughnut:[{type:n.Input}],arcWidth:[{type:n.Input}],gradient:[{type:n.Input}],activeEntries:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],labelFormatting:[{type:n.Input}],trimLabels:[{type:n.Input}],maxLabelLength:[{type:n.Input}],tooltipText:[{type:n.Input}],dblclick:[{type:n.Output}],margins:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class po extends Ai{constructor(){super(...arguments),this.tooltipDisabled=!1,this.label="Total",this.minWidth=150,this.activeEntries=[],this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.margin=[20,20,20,20]}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin}),this.formatDates(),this.domain=this.getDomain(),this.data=co(this.dims,this.results,this.minWidth,this.designatedTotal),this.transform=`translate(${this.margin[3]} , ${this.margin[0]})`,this.series=this.getSeries(),this.setColors(),this.tooltipText=this.tooltipText||this.defaultTooltipText}defaultTooltipText({data:e}){return`\n      <span class="tooltip-label">${Fi(zi(e.name))}</span>\n      <span class="tooltip-val">${e.value.toLocaleString()}</span>\n    `}getDomain(){return this.results.map(e=>e.label)}getSeries(){const e=this.designatedTotal?this.designatedTotal:this.getTotal();return this.data.map(t=>{const i=t.data.name,n=zi(i),o=t.data.value,r=(0,f.min)([t.width-10,t.height-20])/2-5,a=.9*r;let s=0;return{transform:`translate(${t.x+(t.width-10)/2}, ${t.y+(t.height-20)/2})`,colors:()=>(s+=1,1===s?"rgba(100,100,100,0.3)":this.colorScale.getColor(n)),innerRadius:a,outerRadius:r,name:i,label:Fi(n),total:o,value:o,percent:(0,v.format)(".1%")(t.data.percent),data:[t,{data:{other:!0,value:e-o,name:t.data.name}}]}})}getTotal(){return this.results.map(e=>e.value).reduce((e,t)=>e+t,0)}onClick(e){this.select.emit(e)}setColors(){this.colorScale=new vn(this.scheme,"ordinal",this.domain,this.customColors)}onActivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e,t=!1){e=this.results.find(i=>t?i.label===e.name:i.name===e.name);const i=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value&&t.series===e.series);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}}po.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](po)))(t||po)}}(),po.\u0275cmp=n["\u0275\u0275defineComponent"]({type:po,selectors:[["ngx-charts-pie-grid"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{tooltipDisabled:"tooltipDisabled",label:"label",minWidth:"minWidth",activeEntries:"activeEntries",tooltipText:"tooltipText",designatedTotal:"designatedTotal"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:8,consts:[[3,"view","showLegend","animations"],[1,"pie-grid","chart"],["class","pie-grid-item",4,"ngFor","ngForOf"],[1,"pie-grid-item"],["ngx-charts-pie-grid-series","","ngx-tooltip","",3,"colors","data","innerRadius","outerRadius","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"],["class","label percent-label","dy","-0.5em","x","0","y","5","ngx-charts-count-up","","text-anchor","middle",3,"countTo","countSuffix",4,"ngIf"],["class","label percent-label","dy","-0.5em","x","0","y","5","text-anchor","middle",4,"ngIf"],["dy","0.5em","x","0","y","5","text-anchor","middle",1,"label"],["class","label","dy","1.23em","x","0","text-anchor","middle","ngx-charts-count-up","",3,"countTo","countPrefix",4,"ngIf"],["class","label","dy","1.23em","x","0","text-anchor","middle",4,"ngIf"],["dy","-0.5em","x","0","y","5","ngx-charts-count-up","","text-anchor","middle",1,"label","percent-label",3,"countTo","countSuffix"],["dy","-0.5em","x","0","y","5","text-anchor","middle",1,"label","percent-label"],["dy","1.23em","x","0","text-anchor","middle","ngx-charts-count-up","",1,"label",3,"countTo","countPrefix"],["dy","1.23em","x","0","text-anchor","middle",1,"label"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,Xt,8,19,"g",2),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](5,ye,t.width,t.height))("showLegend",!1)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.series))},directives:function(){return[Di,o.NgForOf,uo,$i,o.NgIf,on]},styles:[Ae,".pie-grid .arc1{opacity:.4}.pie-grid .percent-label{font-size:16px;font-weight:400}"],encapsulation:2,changeDetection:0}),po.propDecorators={designatedTotal:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipText:[{type:n.Input}],label:[{type:n.Input}],minWidth:[{type:n.Input}],activeEntries:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class uo{constructor(e){this.innerRadius=70,this.outerRadius=80,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){this.layout=(0,h.pie)().value(e=>e.data.value).sort(null),this.arcs=this.getArcs()}getArcs(){return this.layout(this.data).map((e,t)=>{const i=e.data.data.name,n=e.data.data.other;0===t&&(e.startAngle=0);const o=this.colors(i);return{data:e.data.data,class:"arc arc"+t,fill:o,startAngle:n?0:e.startAngle,endAngle:e.endAngle,animate:this.animations&&!n,pointerEvents:!n}})}onClick(e){this.select.emit(this.data[0].data)}trackBy(e,t){return t.data.name}label(e){return e.data.name}color(e){return this.colors(this.label(e))}}uo.\u0275fac=function(e){return new(e||uo)(n["\u0275\u0275directiveInject"](n.ElementRef))},uo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:uo,selectors:[["g","ngx-charts-pie-grid-series",""]],inputs:{innerRadius:"innerRadius",outerRadius:"outerRadius",animations:"animations",colors:"colors",data:"data"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-pie-grid-series",""],decls:2,vars:2,consts:[[1,"pie-grid-arcs"],["ngx-charts-pie-arc","",3,"startAngle","endAngle","innerRadius","outerRadius","fill","value","data","gradient","pointerEvents","animate","select","activate","deactivate",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-pie-arc","",3,"startAngle","endAngle","innerRadius","outerRadius","fill","value","data","gradient","pointerEvents","animate","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275template"](1,Ht,1,11,"g",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.arcs)("ngForTrackBy",t.trackBy))},directives:[o.NgForOf,ao],encapsulation:2,changeDetection:0}),uo.ctorParameters=()=>[{type:n.ElementRef}],uo.propDecorators={colors:[{type:n.Input}],data:[{type:n.Input}],innerRadius:[{type:n.Input}],outerRadius:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class mo{constructor(){this.series=[],this.innerRadius=60,this.outerRadius=80,this.trimLabels=!0,this.maxLabelLength=10,this.tooltipDisabled=!1,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.dblclick=new n.EventEmitter}ngOnChanges(e){this.update()}update(){const e=(0,h.pie)().value(e=>e.value).sort(null)(this.series);this.max=(0,f.max)(e,e=>e.value),this.data=this.calculateLabelPositions(e),this.tooltipText=this.tooltipText||this.defaultTooltipText}midAngle(e){return e.startAngle+(e.endAngle-e.startAngle)/2}outerArc(){return(0,h.arc)().innerRadius(1.5*this.outerRadius).outerRadius(1.5*this.outerRadius)}calculateLabelPositions(e){const t=e;t.forEach(e=>{e.pos=this.outerArc().centroid(e),e.pos[0]=1.5*this.outerRadius*(this.midAngle(e)<Math.PI?1:-1)});for(let i=0;i<t.length-1;i++){const e=t[i];if(this.labelVisible(e))for(let n=i+1;n<t.length;n++){const i=t[n];if(this.labelVisible(i)&&i.pos[0]*e.pos[0]>0){const t=10-Math.abs(i.pos[1]-e.pos[1]);t>0&&(i.pos[1]+=Math.sign(i.pos[0])*t)}}}return t}labelVisible(e){return this.showLabels&&e.endAngle-e.startAngle>Math.PI/30}getTooltipTitle(e){return this.tooltipTemplate?void 0:this.tooltipText(e)}labelText(e){return this.labelFormatting?this.labelFormatting(e.data.name):this.label(e)}label(e){return zi(e.data.name)}defaultTooltipText(e){const t=this.label(e),i=zi(e.data.value);return`\n      <span class="tooltip-label">${Ui(t)}</span>\n      <span class="tooltip-val">${i}</span>\n    `}color(e){return this.colors.getColor(this.label(e))}trackBy(e,t){return t.data.name}onClick(e){this.select.emit(e)}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name&&e.series===t.series)}}mo.\u0275fac=function(e){return new(e||mo)},mo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:mo,selectors:[["g","ngx-charts-pie-series",""]],inputs:{series:"series",innerRadius:"innerRadius",outerRadius:"outerRadius",trimLabels:"trimLabels",maxLabelLength:"maxLabelLength",tooltipDisabled:"tooltipDisabled",animations:"animations",tooltipText:"tooltipText",colors:"colors",dims:"dims",explodeSlices:"explodeSlices",showLabels:"showLabels",gradient:"gradient",activeEntries:"activeEntries",labelFormatting:"labelFormatting",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",dblclick:"dblclick"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-pie-series",""],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-pie-label","",3,"data","radius","color","label","labelTrim","labelTrimSize","max","value","explodeSlices","animations",4,"ngIf"],["ngx-charts-pie-arc","","ngx-tooltip","",3,"startAngle","endAngle","innerRadius","outerRadius","fill","value","gradient","data","max","explodeSlices","isActive","animate","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate","dblclick"],["ngx-charts-pie-label","",3,"data","radius","color","label","labelTrim","labelTrimSize","max","value","explodeSlices","animations"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,Yt,3,19,"g",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.data)("ngForTrackBy",t.trackBy)},directives:[o.NgForOf,o.NgIf,ao,$i,ro],encapsulation:2,changeDetection:0}),mo.propDecorators={colors:[{type:n.Input}],series:[{type:n.Input}],dims:[{type:n.Input}],innerRadius:[{type:n.Input}],outerRadius:[{type:n.Input}],explodeSlices:[{type:n.Input}],showLabels:[{type:n.Input}],gradient:[{type:n.Input}],activeEntries:[{type:n.Input}],labelFormatting:[{type:n.Input}],trimLabels:[{type:n.Input}],maxLabelLength:[{type:n.Input}],tooltipText:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],dblclick:[{type:n.Output}]};class ho{}ho.\u0275fac=function(e){return new(e||ho)},ho.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ho}),ho.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](ho,{declarations:[oo,ro,ao,so,po,uo,mo],imports:[hn],exports:[oo,ro,ao,so,po,uo,mo]});class fo{}fo.\u0275fac=function(e){return new(e||fo)},fo.\u0275mod=n["\u0275\u0275defineNgModule"]({type:fo}),fo.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn,ho,eo]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](fo,{declarations:[io,no],imports:[hn,ho,eo],exports:[io,no]});class go{constructor(e,t,i){this.cd=t,this.zone=i,this.animations=!0,this.select=new n.EventEmitter,this.value="",this.textFontSize=12,this.textTransform="",this.initialized=!1,this.bandHeight=10,this.textPadding=[10,20,5,20],this.labelFontSize=15,this.element=e.nativeElement}ngOnChanges(e){this.update()}ngOnDestroy(){cancelAnimationFrame(this.animationReq)}update(){this.zone.run(()=>{const e=this.data&&void 0!==this.data.value,t=this.valueFormatting||(e=>e.value.toLocaleString()),i=this.labelFormatting||(e=>Ui(Fi(e.label,55)));this.transform=`translate(${this.x} , ${this.y})`,this.textWidth=Math.max(0,this.width)-this.textPadding[1]-this.textPadding[3],this.cardWidth=Math.max(0,this.width),this.cardHeight=Math.max(0,this.height),this.label=this.label?this.label:this.data.name;const n={label:this.label,data:this.data,value:this.data.value};this.formattedLabel=i(n),this.transformBand=`translate(0 , ${this.cardHeight-this.bandHeight})`;const o=e?t(n):"";this.value=this.paddedValue(o),this.setPadding(),this.bandPath=ki(0,0,this.cardWidth,this.bandHeight,3,[!1,!1,!0,!0]),setTimeout(()=>{this.scaleText(),this.value=o,e&&!this.initialized&&setTimeout(()=>this.startCount(),20)},8)})}paddedValue(e){return this.medianSize&&this.medianSize>e.length&&(e+="\u2007".repeat(this.medianSize-e.length)),e}startCount(){if(!this.initialized&&this.animations){cancelAnimationFrame(this.animationReq);const e=this.data.value,t=nn(e),i=this.valueFormatting||(e=>e.value.toLocaleString()),n=({value:t,finished:n})=>{this.zone.run(()=>{t=n?e:t,this.value=i({label:this.label,data:this.data,value:t}),n||(this.value=this.paddedValue(this.value)),this.cd.markForCheck()})};this.animationReq=tn(0,e,t,1,n),this.initialized=!0}}scaleText(){this.zone.run(()=>{const{width:e,height:t}=this.textEl.nativeElement.getBoundingClientRect();if(0===e||0===t)return;const i=this.textPadding[1]=this.textPadding[3]=this.cardWidth/8,n=this.cardWidth-2*i,o=this.cardHeight/3,r=Math.min(n/e,o/t);this.textFontSize=Math.floor(this.textFontSize*r),this.labelFontSize=Math.min(this.textFontSize,15),this.setPadding(),this.cd.markForCheck()})}setPadding(){this.textPadding[1]=this.textPadding[3]=this.cardWidth/8;const e=this.cardHeight/2;this.textPadding[0]=e-this.textFontSize-this.labelFontSize/2,this.textPadding[2]=e-this.labelFontSize}onClick(){this.select.emit(this.data)}}function vo(e){return(0,x.rgb)(e)}function xo(e){const t=(0,x.rgb)(e),{r:i,g:n,b:o,opacity:r}=t;if(0===r)return t.toString();return yo(t,(299*i+587*n+114*o)/1e3>=128?-.8:.8)}function yo({r:e,g:t,b:i},n){const o=n<0?0:255,r=n<0?-1*n:n;return`rgb(${e=Math.round((o-e)*r)+e}, ${t=Math.round((o-t)*r)+t}, ${i=Math.round((o-i)*r)+i})`}go.\u0275fac=function(e){return new(e||go)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.NgZone))},go.\u0275cmp=n["\u0275\u0275defineComponent"]({type:go,selectors:[["g","ngx-charts-card",""]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Qt,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.textEl=e.first)}},inputs:{animations:"animations",label:"label",color:"color",bandColor:"bandColor",textColor:"textColor",x:"x",y:"y",width:"width",height:"height",data:"data",medianSize:"medianSize",valueFormatting:"valueFormatting",labelFormatting:"labelFormatting"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-card",""],decls:10,vars:25,consts:[[1,"cell",3,"click"],["rx","3","ry","3",1,"card"],["class","card-band","stroke","none",4,"ngIf"],["x","5","alignment-baseline","hanging",1,"trimmed-label"],[3,"innerHTML"],["text-anchor","start","alignment-baseline","hanging",1,"value-text"],["textEl",""],["stroke","none",1,"card-band"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",0),n["\u0275\u0275listener"]("click",function(){return t.onClick()}),n["\u0275\u0275element"](1,"rect",1),n["\u0275\u0275template"](2,Kt,1,3,"path",2),n["\u0275\u0275elementStart"](3,"title"),n["\u0275\u0275text"](4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"foreignObject",3),n["\u0275\u0275namespaceHTML"](),n["\u0275\u0275element"](6,"p",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](7,"text",5,6),n["\u0275\u0275text"](9),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("fill",t.color),n["\u0275\u0275attribute"]("width",t.cardWidth)("height",t.cardHeight),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.bandColor&&t.bandColor!==t.color),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate"](t.label),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("x",t.textPadding[3])("y",t.cardHeight-t.textPadding[2])("width",t.textWidth)("height",t.labelFontSize+t.textPadding[2]),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("color",t.textColor)("font-size",t.labelFontSize,"px")("line-height",t.labelFontSize,"px"),n["\u0275\u0275property"]("innerHTML",t.formattedLabel,n["\u0275\u0275sanitizeHtml"]),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("fill",t.textColor)("font-size",t.textFontSize,"pt"),n["\u0275\u0275attribute"]("x",t.textPadding[3])("y",t.textPadding[0]),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.value," "))},directives:[o.NgIf],encapsulation:2,changeDetection:0}),go.ctorParameters=()=>[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.NgZone}],go.propDecorators={color:[{type:n.Input}],bandColor:[{type:n.Input}],textColor:[{type:n.Input}],x:[{type:n.Input}],y:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],label:[{type:n.Input}],data:[{type:n.Input}],medianSize:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],textEl:[{type:n.ViewChild,args:["textEl",{static:!1}]}]};class bo{constructor(){this.innerPadding=15,this.emptyColor="rgba(0, 0, 0, 0)",this.animations=!0,this.select=new n.EventEmitter}ngOnChanges(e){this.update()}update(){if(this.data.length>2){const e=this.valueFormatting||(e=>e.value.toLocaleString()),t=this.data.map(t=>t&&t.data&&void 0!==t.data.value&&null!==t.data.value?e({data:t.data,label:t?t.data.name:"",value:t&&t.data?t.data.value:""}).length:0).sort((e,t)=>t-e),i=Math.ceil(this.data.length/2);this.medianSize=t[i]}const e=this.getCards();this.cards=e.filter(e=>null!==e.data.value),this.emptySlots=e.filter(e=>null===e.data.value)}getCards(){const e="number"==typeof this.innerPadding?this.innerPadding:this.innerPadding[0]+this.innerPadding[2],t="number"==typeof this.innerPadding?this.innerPadding:this.innerPadding[1]+this.innerPadding[3];return this.data.map((i,n)=>{let o=i.data.name;o=o&&"Date"===o.constructor.name?o.toLocaleDateString():o?o.toLocaleString():o;const r=i.data.value,a=o?this.colors.getColor(o):this.emptyColor,s=this.cardColor||a||"#000";return{x:i.x,y:i.y,width:i.width-t,height:i.height-e,color:s,bandColor:this.bandColor||a,textColor:this.textColor||xo(s),label:o,data:i.data,tooltipText:`${o}: ${r}`}})}trackBy(e,t){return t.label}onClick(e){this.select.emit(e)}}bo.\u0275fac=function(e){return new(e||bo)},bo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:bo,selectors:[["g","ngx-charts-card-series",""]],inputs:{innerPadding:"innerPadding",emptyColor:"emptyColor",animations:"animations",data:"data",slots:"slots",dims:"dims",colors:"colors",cardColor:"cardColor",bandColor:"bandColor",textColor:"textColor",valueFormatting:"valueFormatting",labelFormatting:"labelFormatting"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-card-series",""],decls:2,vars:4,consts:[["class","card-empty","rx","3","ry","3",3,"fill",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-card","",3,"x","y","width","height","color","bandColor","textColor","data","label","medianSize","valueFormatting","labelFormatting","animations","select",4,"ngFor","ngForOf","ngForTrackBy"],["rx","3","ry","3",1,"card-empty"],["ngx-charts-card","",3,"x","y","width","height","color","bandColor","textColor","data","label","medianSize","valueFormatting","labelFormatting","animations","select"]],template:function(e,t){1&e&&(n["\u0275\u0275template"](0,Jt,1,6,"rect",0),n["\u0275\u0275template"](1,Zt,1,13,"g",1)),2&e&&(n["\u0275\u0275property"]("ngForOf",t.emptySlots)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.cards)("ngForTrackBy",t.trackBy))},directives:[o.NgForOf,go],encapsulation:2,changeDetection:0}),bo.propDecorators={data:[{type:n.Input}],slots:[{type:n.Input}],dims:[{type:n.Input}],colors:[{type:n.Input}],innerPadding:[{type:n.Input}],cardColor:[{type:n.Input}],bandColor:[{type:n.Input}],emptyColor:[{type:n.Input}],textColor:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class Co extends Ai{constructor(){super(...arguments),this.emptyColor="rgba(0, 0, 0, 0)",this.innerPadding=15,this.margin=[10,10,10,10]}get clickable(){return!!this.select.observers.length}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin}),this.formatDates(),this.domain=this.getDomain(),this.setColors(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`;const e=lo(this.dims,this.results.length,150),t=e[0]*e[1],i=this.results.slice();for(;i.length<t;)i.push({value:null});this.data=co(this.dims,i,150,this.designatedTotal)}getDomain(){return this.results.map(e=>e.label)}onClick(e){this.select.emit(e)}setColors(){this.colors=new vn(this.scheme,"ordinal",this.domain,this.customColors)}}Co.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Co)))(t||Co)}}(),Co.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Co,selectors:[["ngx-charts-number-card"]],inputs:{emptyColor:"emptyColor",innerPadding:"innerPadding",cardColor:"cardColor",bandColor:"bandColor",textColor:"textColor",valueFormatting:"valueFormatting",labelFormatting:"labelFormatting",designatedTotal:"designatedTotal"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:20,consts:[[3,"view","showLegend","animations"],[1,"number-card","chart"],["ngx-charts-card-series","",3,"colors","cardColor","bandColor","textColor","emptyColor","data","dims","innerPadding","valueFormatting","labelFormatting","animations","select"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275elementStart"](2,"g",2),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](17,ye,t.width,t.height))("showLegend",!1)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("clickable",t.clickable),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("colors",t.colors)("cardColor",t.cardColor)("bandColor",t.bandColor)("textColor",t.textColor)("emptyColor",t.emptyColor)("data",t.data)("dims",t.dims)("innerPadding",t.innerPadding)("valueFormatting",t.valueFormatting)("labelFormatting",t.labelFormatting)("animations",t.animations))},directives:[Di,bo],styles:[Ae,"ngx-charts-number-card .cell .trimmed-label{font-size:12px;line-height:1em;overflow:hidden;pointer-events:none;text-align:left}ngx-charts-number-card .cell .trimmed-label p{margin:0;overflow:hidden;padding:0;text-overflow:ellipsis;white-space:nowrap;width:100%}ngx-charts-number-card .cell .value-text{pointer-events:none}ngx-charts-number-card .number-card.clickable .cell .card,ngx-charts-number-card .number-card.clickable .cell .card-band{cursor:pointer}"],encapsulation:2,changeDetection:0}),Co.propDecorators={cardColor:[{type:n.Input}],bandColor:[{type:n.Input}],emptyColor:[{type:n.Input}],innerPadding:[{type:n.Input}],textColor:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],designatedTotal:[{type:n.Input}]};class So{}So.\u0275fac=function(e){return new(e||So)},So.\u0275mod=n["\u0275\u0275defineNgModule"]({type:So}),So.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](So,{declarations:[go,bo,Co],imports:[hn],exports:[go,bo,Co]});class wo{constructor(e){this.gradient=!1,this.animations=!0,this.select=new n.EventEmitter,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(){this.update(),this.valueFormatting=this.valueFormatting||(e=>e.toLocaleString());const e=this.labelFormatting||(e=>Ui(Fi(e.label,55))),t={data:this.data,label:this.label,value:this.value};this.formattedValue=this.valueFormatting(t.value),this.formattedLabel=e(t),this.gradientId="grad"+Xi().toString(),this.gradientUrl=`url(#${this.gradientId})`,this.gradientStops=this.getGradientStops()}update(){this.initialized?this.animateToCurrentForm():(this.animations&&this.loadAnimation(),this.initialized=!0)}loadAnimation(){(0,d.select)(this.element).select(".cell").attr("opacity",0).attr("x",this.x).attr("y",this.y),this.animateToCurrentForm()}getTextColor(){return xo(this.fill)}animateToCurrentForm(){const e=(0,d.select)(this.element).select(".cell");this.animations?e.transition().duration(750).attr("opacity",1).attr("x",this.x).attr("y",this.y).attr("width",this.width).attr("height",this.height):e.attr("opacity",1).attr("x",this.x).attr("y",this.y).attr("width",this.width).attr("height",this.height)}onClick(){this.select.emit(this.data)}getGradientStops(){return[{offset:0,color:this.fill,opacity:.3},{offset:100,color:this.fill,opacity:1}]}}wo.\u0275fac=function(e){return new(e||wo)(n["\u0275\u0275directiveInject"](n.ElementRef))},wo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:wo,selectors:[["g","ngx-charts-tree-map-cell",""]],inputs:{gradient:"gradient",animations:"animations",valueFormatting:"valueFormatting",data:"data",fill:"fill",x:"x",y:"y",width:"width",height:"height",label:"label",value:"value",valueType:"valueType",labelFormatting:"labelFormatting"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-tree-map-cell",""],decls:4,vars:9,consts:[[4,"ngIf"],[1,"cell",3,"click"],["class","treemap-label",3,"pointer-events",4,"ngIf"],["ngx-charts-svg-linear-gradient","","orientation","vertical",3,"name","stops"],[1,"treemap-label"],[1,"treemap-label",3,"innerHTML"],["class","treemap-val","ngx-charts-count-up","",3,"countTo","valueFormatting",4,"ngIf"],["class","treemap-val",4,"ngIf"],["ngx-charts-count-up","",1,"treemap-val",3,"countTo","valueFormatting"],[1,"treemap-val"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,ei,2,2,"defs",0),n["\u0275\u0275elementStart"](2,"rect",1),n["\u0275\u0275listener"]("click",function(){return t.onClick()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](3,ni,6,15,"foreignObject",2),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.gradient),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("cursor","pointer"),n["\u0275\u0275attribute"]("fill",t.gradient?t.gradientUrl:t.fill)("width",t.width)("height",t.height)("x",t.x)("y",t.y),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.width>=70&&t.height>=35))},directives:[o.NgIf,Ki,on],encapsulation:2,changeDetection:0}),wo.ctorParameters=()=>[{type:n.ElementRef}],wo.propDecorators={data:[{type:n.Input}],fill:[{type:n.Input}],x:[{type:n.Input}],y:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],label:[{type:n.Input}],value:[{type:n.Input}],valueType:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],gradient:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class Io{constructor(){this.gradient=!1,this.tooltipDisabled=!1,this.animations=!0,this.select=new n.EventEmitter}ngOnChanges(e){this.cells=this.getCells()}getCells(){return this.data.children.filter(e=>1===e.depth).map((e,t)=>{const i=e.id;return{data:e.data,x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0,fill:this.colors.getColor(i),label:i,value:e.value,valueType:e.valueType}})}getTooltipText({label:e,value:t}){return`\n      <span class="tooltip-label">${Ui(e)}</span>\n      <span class="tooltip-val">${t.toLocaleString()}</span>\n    `}onClick(e){this.select.emit(e)}trackBy(e,t){return t.label}}Io.\u0275fac=function(e){return new(e||Io)},Io.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Io,selectors:[["g","ngx-charts-tree-map-cell-series",""]],inputs:{gradient:"gradient",tooltipDisabled:"tooltipDisabled",animations:"animations",data:"data",dims:"dims",colors:"colors",valueFormatting:"valueFormatting",labelFormatting:"labelFormatting",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-tree-map-cell-series",""],decls:1,vars:2,consts:[["ngx-charts-tree-map-cell","","ngx-tooltip","",3,"data","x","y","width","height","fill","label","value","valueType","valueFormatting","labelFormatting","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select",4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-tree-map-cell","","ngx-tooltip","",3,"data","x","y","width","height","fill","label","value","valueType","valueFormatting","labelFormatting","gradient","animations","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select"]],template:function(e,t){1&e&&n["\u0275\u0275template"](0,oi,1,19,"g",0),2&e&&n["\u0275\u0275property"]("ngForOf",t.cells)("ngForTrackBy",t.trackBy)},directives:[o.NgForOf,wo,$i],encapsulation:2,changeDetection:0}),Io.propDecorators={data:[{type:n.Input}],dims:[{type:n.Input}],colors:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],gradient:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}]};class _o extends Ai{constructor(){super(...arguments),this.tooltipDisabled=!1,this.gradient=!1,this.select=new n.EventEmitter,this.margin=[10,10,10,10]}update(){super.update(),this.dims=fn({width:this.width,height:this.height,margins:this.margin}),this.domain=this.getDomain(),this.treemap=(0,y.treemap)().size([this.dims.width,this.dims.height]);const e=(0,y.stratify)().id(e=>{let t=e.name;return t="Date"===t.constructor.name?t.toLocaleDateString():t.toLocaleString(),t}).parentId(e=>e.isRoot?null:"root")([{name:"root",value:0,isRoot:!0},...this.results]).sum(e=>e.value);this.data=this.treemap(e),this.setColors(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`}getDomain(){return this.results.map(e=>e.name)}onClick(e){this.select.emit(e)}setColors(){this.colors=new vn(this.scheme,"ordinal",this.domain,this.customColors)}}_o.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](_o)))(t||_o)}}(),_o.\u0275cmp=n["\u0275\u0275defineComponent"]({type:_o,selectors:[["ngx-charts-tree-map"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},inputs:{tooltipDisabled:"tooltipDisabled",gradient:"gradient",results:"results",valueFormatting:"valueFormatting",labelFormatting:"labelFormatting"},outputs:{select:"select"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:16,consts:[[3,"view","showLegend","animations"],[1,"tree-map","chart"],["ngx-charts-tree-map-cell-series","",3,"colors","data","dims","tooltipDisabled","tooltipTemplate","valueFormatting","labelFormatting","gradient","animations","select"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275elementStart"](2,"g",2),n["\u0275\u0275listener"]("select",function(e){return t.onClick(e)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](13,ye,t.width,t.height))("showLegend",!1)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("colors",t.colors)("data",t.data)("dims",t.dims)("tooltipDisabled",t.tooltipDisabled)("tooltipTemplate",t.tooltipTemplate)("valueFormatting",t.valueFormatting)("labelFormatting",t.labelFormatting)("gradient",t.gradient)("animations",t.animations))},directives:[Di,Io],styles:[".tree-map .treemap-val{display:inline-block;font-size:1.3em;padding-top:5px}.tree-map .treemap-label p{display:table-cell;line-height:1.2em;text-align:center;vertical-align:middle}"],encapsulation:2,changeDetection:0}),_o.propDecorators={results:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],valueFormatting:[{type:n.Input}],labelFormatting:[{type:n.Input}],gradient:[{type:n.Input}],select:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}]};class Do{}Do.\u0275fac=function(e){return new(e||Do)},Do.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Do}),Do.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Do,{declarations:[wo,Io,_o],imports:[hn],exports:[wo,Io,_o]});class Ro extends Ai{constructor(){super(...arguments),this.min=0,this.max=100,this.value=0,this.margin=[10,20,10,20],this.valueResizeScale=1,this.unitsResizeScale=1,this.valueTextTransform="",this.valueTranslate="",this.unitsTextTransform="",this.unitsTranslate=""}ngAfterViewInit(){super.ngAfterViewInit(),setTimeout(()=>{this.scaleText("value"),this.scaleText("units")})}update(){super.update(),this.hasPreviousValue=void 0!==this.previousValue,this.max=Math.max(this.max,this.value),this.min=Math.min(this.min,this.value),this.hasPreviousValue&&(this.max=Math.max(this.max,this.previousValue),this.min=Math.min(this.min,this.previousValue)),this.dims=fn({width:this.width,height:this.height,margins:this.margin}),this.valueDomain=this.getValueDomain(),this.valueScale=this.getValueScale(),this.displayValue=this.getDisplayValue(),this.setColors();const e=this.margin[3]+this.dims.width/2,t=this.margin[0]+this.dims.height/2;this.transform=`translate(${e}, ${t})`,this.transformLine=`translate(${this.margin[3]+this.valueScale(this.previousValue)}, ${t})`,this.valueTranslate="translate(0, -15)",this.unitsTranslate="translate(0, 15)",setTimeout(()=>this.scaleText("value"),50),setTimeout(()=>this.scaleText("units"),50)}getValueDomain(){return[this.min,this.max]}getValueScale(){return(0,u.scaleLinear)().range([0,this.dims.width]).domain(this.valueDomain)}getDisplayValue(){return this.valueFormatting?this.valueFormatting(this.value):this.value.toLocaleString()}scaleText(e,t=!0){let i,n;"value"===e?(i=this.valueTextEl,n=this.valueResizeScale):(i=this.unitsTextEl,n=this.unitsResizeScale);const{width:o,height:r}=i.nativeElement.getBoundingClientRect();if(0===o||0===r)return;const a=n,s=this.dims.width,l=Math.max(this.dims.height/2-15,0),c=Math.floor(s/(o/n)*100)/100,d=Math.floor(l/(r/n)*100)/100;n=Math.min(d,c),n!==a&&("value"===e?(this.valueResizeScale=n,this.valueTextTransform=`scale(${n}, ${n})`):(this.unitsResizeScale=n,this.unitsTextTransform=`scale(${n}, ${n})`),this.cd.markForCheck(),t&&setTimeout(()=>{this.scaleText(e,!1)},50))}onClick(){this.select.emit({name:"Value",value:this.value})}setColors(){this.colors=new vn(this.scheme,"ordinal",[this.value],this.customColors)}}Ro.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Ro)))(t||Ro)}}(),Ro.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ro,selectors:[["ngx-charts-linear-gauge"]],viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](ri,5),n["\u0275\u0275viewQuery"](ai,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.valueTextEl=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.unitsTextEl=e.first)}},inputs:{min:"min",max:"max",value:"value",units:"units",previousValue:"previousValue",valueFormatting:"valueFormatting"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:38,consts:[[3,"view","showLegend","animations","click"],[1,"linear-gauge","chart"],["ngx-charts-bar","",1,"background-bar",3,"width","height","x","y","data","orientation","roundEdges","animations"],["ngx-charts-bar","",3,"width","height","x","y","fill","data","orientation","roundEdges","animations"],["x1","0","y1","5","x2","0","y2","15",4,"ngIf"],["x1","0","y1","-5","x2","0","y2","-15",4,"ngIf"],["alignment-baseline","after-edge",1,"value"],["valueTextEl",""],["alignment-baseline","before-edge",1,"units"],["unitsTextEl",""],["x1","0","y1","5","x2","0","y2","15"],["x1","0","y1","-5","x2","0","y2","-15"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("click",function(){return t.onClick()}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275element"](2,"g",2),n["\u0275\u0275element"](3,"g",3),n["\u0275\u0275template"](4,si,1,2,"line",4),n["\u0275\u0275template"](5,li,1,2,"line",5),n["\u0275\u0275elementStart"](6,"g"),n["\u0275\u0275elementStart"](7,"g"),n["\u0275\u0275elementStart"](8,"text",6,7),n["\u0275\u0275text"](10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](11,"g"),n["\u0275\u0275elementStart"](12,"text",8,9),n["\u0275\u0275text"](14),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](33,ye,t.width,t.height))("showLegend",!1)("animations",t.animations),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("width",t.dims.width)("height",3)("x",t.margin[3])("y",t.dims.height/2+t.margin[0]-2)("data",n["\u0275\u0275pureFunction0"](36,ci))("orientation","horizontal")("roundEdges",!0)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("width",t.valueScale(t.value))("height",3)("x",t.margin[3])("y",t.dims.height/2+t.margin[0]-2)("fill",t.colors.getColor(t.units))("data",n["\u0275\u0275pureFunction0"](37,ci))("orientation","horizontal")("roundEdges",!0)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.hasPreviousValue),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.hasPreviousValue),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.valueTranslate),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("text-anchor","middle"),n["\u0275\u0275attribute"]("transform",t.valueTextTransform),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.displayValue," "),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.unitsTranslate),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("text-anchor","middle"),n["\u0275\u0275attribute"]("transform",t.unitsTextTransform),n["\u0275\u0275advance"](2),n["\u0275\u0275textInterpolate1"](" ",t.units," "))},directives:[Di,An,o.NgIf],styles:[Ae,".linear-gauge{cursor:pointer}.linear-gauge .background-bar path{fill:rgba(0,0,0,.05)}.linear-gauge .units{fill:#666}"],encapsulation:2,changeDetection:0}),Ro.propDecorators={min:[{type:n.Input}],max:[{type:n.Input}],value:[{type:n.Input}],units:[{type:n.Input}],previousValue:[{type:n.Input}],valueFormatting:[{type:n.Input}],valueTextEl:[{type:n.ViewChild,args:["valueTextEl"]}],unitsTextEl:[{type:n.ViewChild,args:["unitsTextEl"]}]};class Ao extends Ai{constructor(){super(...arguments),this.legend=!1,this.legendTitle="Legend",this.legendPosition="right",this.min=0,this.max=100,this.bigSegments=10,this.smallSegments=5,this.showAxis=!0,this.startAngle=-120,this.angleSpan=240,this.activeEntries=[],this.tooltipDisabled=!1,this.showText=!0,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.resizeScale=1,this.rotation="",this.textTransform="scale(1, 1)",this.cornerRadius=10}ngAfterViewInit(){super.ngAfterViewInit(),setTimeout(()=>this.scaleText())}update(){super.update(),this.showAxis?this.margin||(this.margin=[60,100,60,100]):this.margin||(this.margin=[10,20,10,20]),this.startAngle<0&&(this.startAngle=this.startAngle%360+360),this.angleSpan=Math.min(this.angleSpan,360),this.dims=fn({width:this.width,height:this.height,margins:this.margin,showLegend:this.legend,legendPosition:this.legendPosition}),this.domain=this.getDomain(),this.valueDomain=this.getValueDomain(),this.valueScale=this.getValueScale(),this.displayValue=this.getDisplayValue(),this.outerRadius=Math.min(this.dims.width,this.dims.height)/2,this.arcs=this.getArcs(),this.setColors(),this.legendOptions=this.getLegendOptions();const e=this.margin[3]+this.dims.width/2,t=this.margin[0]+this.dims.height/2;this.transform=`translate(${e}, ${t})`,this.rotation=`rotate(${this.startAngle})`,setTimeout(()=>this.scaleText(),50)}getArcs(){const e=[],t=.7*this.outerRadius,i=Math.min(t/this.results.length,10),n=.7*i;this.textRadius=this.outerRadius-this.results.length*i,this.cornerRadius=Math.floor(n/2);let o=0;for(const r of this.results){const t=this.outerRadius-o*i,a=t-n,s={backgroundArc:{endAngle:this.angleSpan*Math.PI/180,innerRadius:a,outerRadius:t,data:{value:this.max,name:r.name}},valueArc:{endAngle:Math.min(this.valueScale(r.value),this.angleSpan)*Math.PI/180,innerRadius:a,outerRadius:t,data:{value:r.value,name:r.name}}};e.push(s),o++}return e}getDomain(){return this.results.map(e=>e.name)}getValueDomain(){const e=this.results.map(e=>e.value),t=Math.min(...e),i=Math.max(...e);return void 0!==this.min?this.min=Math.min(this.min,t):this.min=t,void 0!==this.max?this.max=Math.max(this.max,i):this.max=i,[this.min,this.max]}getValueScale(){return(0,u.scaleLinear)().range([0,this.angleSpan]).nice().domain(this.valueDomain)}getDisplayValue(){const e=this.results.map(e=>e.value).reduce((e,t)=>e+t,0);return this.textValue&&0!==this.textValue.length?this.textValue.toLocaleString():this.valueFormatting?this.valueFormatting(e):e.toLocaleString()}scaleText(e=!0){if(!this.showText)return;const{width:t}=this.textEl.nativeElement.getBoundingClientRect(),i=this.resizeScale;if(0===t)this.resizeScale=1;else{const e=this.textRadius;this.resizeScale=Math.floor(e/(t/this.resizeScale)*100)/100}this.resizeScale!==i&&(this.textTransform=`scale(${this.resizeScale}, ${this.resizeScale})`,this.cd.markForCheck(),e&&setTimeout(()=>this.scaleText(!1),50))}onClick(e){this.select.emit(e)}getLegendOptions(){return{scaleType:"ordinal",colors:this.colors,domain:this.domain,title:this.legendTitle,position:this.legendPosition}}setColors(){this.colors=new vn(this.scheme,"ordinal",this.domain,this.customColors)}onActivate(e){this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.findIndex(t=>t.name===e.name&&t.value===e.value);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}isActive(e){if(!this.activeEntries)return!1;return void 0!==this.activeEntries.find(t=>e.name===t.name&&e.series===t.series)}trackBy(e,t){return t.valueArc.data.name}}Ao.\u0275fac=function(){let e;return function(t){return(e||(e=n["\u0275\u0275getInheritedFactory"](Ao)))(t||Ao)}}(),Ao.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Ao,selectors:[["ngx-charts-gauge"]],contentQueries:function(e,t,i){if(1&e&&n["\u0275\u0275contentQuery"](i,pe,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.tooltipTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](Qt,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.textEl=e.first)}},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",min:"min",max:"max",bigSegments:"bigSegments",smallSegments:"smallSegments",showAxis:"showAxis",startAngle:"startAngle",angleSpan:"angleSpan",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",showText:"showText",margin:"margin",textValue:"textValue",units:"units",results:"results",axisTickFormatting:"axisTickFormatting",valueFormatting:"valueFormatting"},outputs:{activate:"activate",deactivate:"deactivate"},features:[n["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:13,consts:[[3,"view","showLegend","legendOptions","activeEntries","animations","legendLabelClick","legendLabelActivate","legendLabelDeactivate"],[1,"gauge","chart"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-gauge-axis","",3,"bigSegments","smallSegments","min","max","radius","angleSpan","valueScale","startAngle","tickFormatting",4,"ngIf"],["alignment-baseline","central",3,"textAnchor",4,"ngIf"],["ngx-charts-gauge-arc","",3,"backgroundArc","valueArc","cornerRadius","colors","isActive","tooltipDisabled","tooltipTemplate","valueFormatting","animations","select","activate","deactivate"],["ngx-charts-gauge-axis","",3,"bigSegments","smallSegments","min","max","radius","angleSpan","valueScale","startAngle","tickFormatting"],["alignment-baseline","central"],["textEl",""],["x","0","dy","0"],["x","0","dy","1.2em"]],template:function(e,t){1&e&&(n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)}),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275template"](2,di,2,10,"g",2),n["\u0275\u0275template"](3,pi,1,9,"g",3),n["\u0275\u0275template"](4,ui,6,5,"text",4),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](10,ye,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions)("activeEntries",t.activeEntries)("animations",t.animations),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("transform",t.transform),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.arcs)("ngForTrackBy",t.trackBy),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showAxis),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showText))},directives:function(){return[Di,o.NgForOf,o.NgIf,To,Fo]},styles:[Ae,".gauge .background-arc path{fill:rgba(0,0,0,.05)}.gauge .gauge-tick path{stroke:#666}.gauge .gauge-tick text{fill:#666;font-size:12px;font-weight:700}.gauge .gauge-tick-large path{stroke-width:2px}.gauge .gauge-tick-small path{stroke-width:1px}"],encapsulation:2,changeDetection:0}),Ao.propDecorators={legend:[{type:n.Input}],legendTitle:[{type:n.Input}],legendPosition:[{type:n.Input}],min:[{type:n.Input}],max:[{type:n.Input}],textValue:[{type:n.Input}],units:[{type:n.Input}],bigSegments:[{type:n.Input}],smallSegments:[{type:n.Input}],results:[{type:n.Input}],showAxis:[{type:n.Input}],startAngle:[{type:n.Input}],angleSpan:[{type:n.Input}],activeEntries:[{type:n.Input}],axisTickFormatting:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],valueFormatting:[{type:n.Input}],showText:[{type:n.Input}],margin:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],tooltipTemplate:[{type:n.ContentChild,args:["tooltipTemplate"]}],textEl:[{type:n.ViewChild,args:["textEl"]}]};class To{constructor(){this.isActive=!1,this.tooltipDisabled=!1,this.animations=!0,this.select=new n.EventEmitter,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter}tooltipText(e){const t=zi(e.data.name);let i;return i=this.valueFormatting?this.valueFormatting(e.data.value):zi(e.data.value),`\n      <span class="tooltip-label">${Ui(t)}</span>\n      <span class="tooltip-val">${i}</span>\n    `}}To.\u0275fac=function(e){return new(e||To)},To.\u0275cmp=n["\u0275\u0275defineComponent"]({type:To,selectors:[["g","ngx-charts-gauge-arc",""]],inputs:{isActive:"isActive",tooltipDisabled:"tooltipDisabled",animations:"animations",backgroundArc:"backgroundArc",valueArc:"valueArc",cornerRadius:"cornerRadius",colors:"colors",valueFormatting:"valueFormatting",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},attrs:["ngx-charts-gauge-arc",""],decls:2,vars:23,consts:[["ngx-charts-pie-arc","",1,"background-arc",3,"startAngle","endAngle","innerRadius","outerRadius","cornerRadius","data","animate","pointerEvents"],["ngx-charts-pie-arc","","ngx-tooltip","",3,"startAngle","endAngle","innerRadius","outerRadius","cornerRadius","fill","data","animate","isActive","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext","select","activate","deactivate"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"g",0),n["\u0275\u0275elementStart"](1,"g",1),n["\u0275\u0275listener"]("select",function(e){return t.select.emit(e)})("activate",function(e){return t.activate.emit(e)})("deactivate",function(e){return t.deactivate.emit(e)}),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("startAngle",0)("endAngle",t.backgroundArc.endAngle)("innerRadius",t.backgroundArc.innerRadius)("outerRadius",t.backgroundArc.outerRadius)("cornerRadius",t.cornerRadius)("data",t.backgroundArc.data)("animate",!1)("pointerEvents",!1),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("startAngle",0)("endAngle",t.valueArc.endAngle)("innerRadius",t.valueArc.innerRadius)("outerRadius",t.valueArc.outerRadius)("cornerRadius",t.cornerRadius)("fill",t.colors.getColor(t.valueArc.data.name))("data",t.valueArc.data)("animate",t.animations)("isActive",t.isActive)("tooltipDisabled",t.tooltipDisabled)("tooltipPlacement","top")("tooltipType","tooltip")("tooltipTitle",t.tooltipTemplate?void 0:t.tooltipText(t.valueArc))("tooltipTemplate",t.tooltipTemplate)("tooltipContext",t.valueArc.data))},directives:[ao,$i],encapsulation:2,changeDetection:0}),To.propDecorators={backgroundArc:[{type:n.Input}],valueArc:[{type:n.Input}],cornerRadius:[{type:n.Input}],colors:[{type:n.Input}],isActive:[{type:n.Input}],tooltipDisabled:[{type:n.Input}],valueFormatting:[{type:n.Input}],tooltipTemplate:[{type:n.Input}],animations:[{type:n.Input}],select:[{type:n.Output}],activate:[{type:n.Output}],deactivate:[{type:n.Output}]};class Fo{constructor(){this.rotate=""}ngOnChanges(e){this.update()}update(){this.rotationAngle=-90+this.startAngle,this.rotate=`rotate(${this.rotationAngle})`,this.ticks=this.getTicks()}getTicks(){const e=this.angleSpan/this.bigSegments,t=e/this.smallSegments,i={big:[],small:[]},n=this.radius+10,o=n+20+10;for(let r=0;r<=this.bigSegments;r++){const a=r*e,s=a*Math.PI/180,l=this.getTextAnchor(a);let c=!1;if(0===r&&360===this.angleSpan&&(c=!0),!c){let e=Number.parseFloat(this.valueScale.invert(a).toString()).toLocaleString();this.tickFormatting&&(e=this.tickFormatting(e)),i.big.push({line:this.getTickPath(n,20,s),textAnchor:l,text:e,textTransform:`\n            translate(${o*Math.cos(s)}, ${o*Math.sin(s)}) rotate(${-this.rotationAngle})\n          `})}if(r!==this.bigSegments)for(let e=1;e<=this.smallSegments;e++){const o=(a+e*t)*Math.PI/180;i.small.push({line:this.getTickPath(n,10,o)})}}return i}getTextAnchor(e){let t="middle";return(e=(this.startAngle+e)%360)>45&&e<=135?t="start":e>225&&e<=315&&(t="end"),t}getTickPath(e,t,i){const n=e*Math.sin(i),o=(e+t)*Math.sin(i),r=[{x:e*Math.cos(i),y:n},{x:(e+t)*Math.cos(i),y:o}];return(0,h.line)().x(e=>e.x).y(e=>e.y)(r)}}Fo.\u0275fac=function(e){return new(e||Fo)},Fo.\u0275cmp=n["\u0275\u0275defineComponent"]({type:Fo,selectors:[["g","ngx-charts-gauge-axis",""]],inputs:{bigSegments:"bigSegments",smallSegments:"smallSegments",min:"min",max:"max",angleSpan:"angleSpan",startAngle:"startAngle",radius:"radius",valueScale:"valueScale",tickFormatting:"tickFormatting"},features:[n["\u0275\u0275NgOnChangesFeature"]],attrs:["ngx-charts-gauge-axis",""],decls:4,vars:4,consts:[["class","gauge-tick gauge-tick-large",4,"ngFor","ngForOf"],["class","gauge-tick gauge-tick-small",4,"ngFor","ngForOf"],[1,"gauge-tick","gauge-tick-large"],["alignment-baseline","central"],[1,"gauge-tick","gauge-tick-small"]],template:function(e,t){1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g"),n["\u0275\u0275template"](1,mi,2,1,"g",0),n["\u0275\u0275template"](2,hi,3,4,"g",0),n["\u0275\u0275template"](3,fi,2,1,"g",1),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275attribute"]("transform",t.rotate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.ticks.big),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.ticks.big),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.ticks.small))},directives:[o.NgForOf],encapsulation:2,changeDetection:0}),Fo.propDecorators={bigSegments:[{type:n.Input}],smallSegments:[{type:n.Input}],min:[{type:n.Input}],max:[{type:n.Input}],angleSpan:[{type:n.Input}],startAngle:[{type:n.Input}],radius:[{type:n.Input}],valueScale:[{type:n.Input}],tickFormatting:[{type:n.Input}]};class Eo{}Eo.\u0275fac=function(e){return new(e||Eo)},Eo.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Eo}),Eo.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[hn,ho,$n]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Eo,{declarations:[Ro,Ao,To,Fo],imports:[hn,ho,$n],exports:[Ro,Ao,To,Fo]});class Mo{constructor(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}}function Oo(e,t){return function(i){if("No Value"===i||"Other"===i)return i;if("date"===e&&"groupBy"===t){return(0,b.timeFormat)("MM/DD/YYYY")(i)}return i.toString()}}Mo.\u0275fac=function(e){return new(e||Mo)},Mo.\u0275mod=n["\u0275\u0275defineNgModule"]({type:Mo}),Mo.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[hn,Rn,$n,Xn,Qn,eo,fo,So,ho,Do,Eo]}),Mo.ctorParameters=()=>[],("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](Mo,{exports:[hn,Rn,$n,Xn,Qn,eo,fo,So,ho,Do,Eo]})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>o,map:()=>r});var n=Array.prototype,o=n.slice,r=n.map},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js":(e,t,i)=>{"use strict";function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bin.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/array.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisect.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/constant.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/extent.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/identity.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/nice.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ticks.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/sturges.js");function p(){var e=s.default,t=a.default,i=d.default;function p(n){Array.isArray(n)||(n=Array.from(n));var r,s,d=n.length,p=new Array(d);for(r=0;r<d;++r)p[r]=e(n[r],r,n);var u=t(p),m=u[0],h=u[1],f=i(p,m,h);if(!Array.isArray(f)){const e=h,i=+f;if(t===a.default&&([m,h]=(0,l.default)(m,h,i)),(f=(0,c.default)(m,h,i))[f.length-1]>=h)if(e>=h&&t===a.default){const e=(0,c.tickIncrement)(m,h,i);isFinite(e)&&(e>0?h=(Math.floor(h/e)+1)*e:e<0&&(h=(Math.ceil(h*-e)+1)/-e))}else f.pop()}for(var g=f.length;f[0]<=m;)f.shift(),--g;for(;f[g-1]>h;)f.pop(),--g;var v,x=new Array(g+1);for(r=0;r<=g;++r)(v=x[r]=[]).x0=r>0?f[r-1]:m,v.x1=r<g?f[r]:h;for(r=0;r<d;++r)m<=(s=p[r])&&s<=h&&x[(0,o.default)(f,s,0,g)].push(n[r]);return x}return p.value=function(t){return arguments.length?(e="function"==typeof t?t:(0,r.default)(t),p):e},p.domain=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)([e[0],e[1]]),p):t},p.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?(0,r.default)(n.slice.call(e)):(0,r.default)(e),p):i},p}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisect.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{bisectRight:()=>s,bisectLeft:()=>l,bisectCenter:()=>c,default:()=>d});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisector.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/number.js");const a=(0,o.default)(n.default),s=a.right,l=a.left,c=(0,o.default)(r.default).center,d=s},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisector.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js");function o(e){let t=e,i=e;function o(e,t,n,o){for(null==n&&(n=0),null==o&&(o=e.length);n<o;){const r=n+o>>>1;i(e[r],t)<0?n=r+1:o=r}return n}return 1===e.length&&(t=(t,i)=>e(t)-i,i=function(e){return(t,i)=>(0,n.default)(e(t),i)}(e)),{left:o,center:function(e,i,n,r){null==n&&(n=0),null==r&&(r=e.length);const a=o(e,i,n,r-1);return a>n&&t(e[a-1],i)>-t(e[a],i)?a-1:a},right:function(e,t,n,o){for(null==n&&(n=0),null==o&&(o=e.length);n<o;){const r=n+o>>>1;i(e[r],t)>0?o=r:n=r+1}return n}}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/count.js":(e,t,i)=>{"use strict";function n(e,t){let i=0;if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&++i;else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(o=+o)>=o&&++i}return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/cross.js":(e,t,i)=>{"use strict";function n(e){return 0|e.length}function o(e){return!(e>0)}function r(e){return"object"!=typeof e||"length"in e?e:Array.from(e)}function a(...e){const t="function"==typeof e[e.length-1]&&function(e){return t=>e(...t)}(e.pop()),i=(e=e.map(r)).map(n),a=e.length-1,s=new Array(a+1).fill(0),l=[];if(a<0||i.some(o))return l;for(;;){l.push(s.map((t,i)=>e[i][t]));let n=a;for(;++s[n]===i[n];){if(0===n)return t?l.map(t):l;s[n--]=0}}}i.r(t),i.d(t,{default:()=>a})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/cumsum.js":(e,t,i)=>{"use strict";function n(e,t){var i=0,n=0;return Float64Array.from(e,void 0===t?e=>i+=+e||0:o=>i+=+t(o,n++,e)||0)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/descending.js":(e,t,i)=>{"use strict";function n(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/deviation.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/variance.js");function o(e,t){const i=(0,n.default)(e,t);return i?Math.sqrt(i):i}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/difference.js":(e,t,i)=>{"use strict";function n(e,...t){e=new Set(e);for(const i of t)for(const t of i)e.delete(t);return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/disjoint.js":(e,t,i)=>{"use strict";function n(e,t){const i=t[Symbol.iterator](),n=new Set;for(const o of e){if(n.has(o))return!1;let e,t;for(;({value:e,done:t}=i.next())&&!t;){if(Object.is(o,e))return!1;n.add(e)}}return!0}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/every.js":(e,t,i)=>{"use strict";function n(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let i=-1;for(const n of e)if(!t(n,++i,e))return!1;return!0}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/extent.js":(e,t,i)=>{"use strict";function n(e,t){let i,n;if(void 0===t)for(const o of e)null!=o&&(void 0===i?o>=o&&(i=n=o):(i>o&&(i=o),n<o&&(n=o)));else{let o=-1;for(let r of e)null!=(r=t(r,++o,e))&&(void 0===i?r>=r&&(i=n=r):(i>r&&(i=r),n<r&&(n=r)))}return[i,n]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/filter.js":(e,t,i)=>{"use strict";function n(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");const i=[];let n=-1;for(const o of e)t(o,++n,e)&&i.push(o);return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/fsum.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{Adder:()=>n,fsum:()=>o,fcumsum:()=>r});class n{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let i=0;for(let n=0;n<this._n&&n<32;n++){const o=t[n],r=e+o,a=Math.abs(e)<Math.abs(o)?e-(r-o):o-(r-e);a&&(t[i++]=a),e=r}return t[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let t,i,n,o=this._n,r=0;if(o>0){for(r=e[--o];o>0&&(t=r,i=e[--o],r=t+i,n=i-(r-t),!n););o>0&&(n<0&&e[o-1]<0||n>0&&e[o-1]>0)&&(i=2*n,t=r+i,i==t-r&&(r=t))}return r}}function o(e,t){const i=new n;if(void 0===t)for(let n of e)(n=+n)&&i.add(n);else{let n=-1;for(let o of e)(o=+t(o,++n,e))&&i.add(o)}return+i}function r(e,t){const i=new n;let o=-1;return Float64Array.from(e,void 0===t?e=>i.add(+e||0):n=>i.add(+t(n,++o,e)||0))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/greatest.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js");function o(e,t=n.default){let i,o=!1;if(1===t.length){let r;for(const a of e){const e=t(a);(o?(0,n.default)(e,r)>0:0===(0,n.default)(e,e))&&(i=a,r=e,o=!0)}}else for(const n of e)(o?t(n,i)>0:0===t(n,n))&&(i=n,o=!0);return i}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/greatestIndex.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/maxIndex.js");function r(e,t=n.default){if(1===t.length)return(0,o.default)(e,t);let i,r=-1,a=-1;for(const n of e)++a,(r<0?0===t(n,n):t(n,i)>0)&&(i=n,r=a);return r}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/group.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,groups:()=>a,rollup:()=>s,rollups:()=>l,index:()=>c,indexes:()=>d});var n=i("./node_modules/internmap/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/identity.js");function r(e,...t){return u(e,o.default,o.default,t)}function a(e,...t){return u(e,Array.from,o.default,t)}function s(e,t,...i){return u(e,o.default,t,i)}function l(e,t,...i){return u(e,Array.from,t,i)}function c(e,...t){return u(e,o.default,p,t)}function d(e,...t){return u(e,Array.from,p,t)}function p(e){if(1!==e.length)throw new Error("duplicate key");return e[0]}function u(e,t,i,o){return function e(r,a){if(a>=o.length)return i(r);const s=new n.InternMap,l=o[a++];let c=-1;for(const t of r){const e=l(t,++c,r),i=s.get(e);i?i.push(t):s.set(e,[t])}for(const[t,i]of s)s.set(t,e(i,a));return t(s)}(e,0)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/groupSort.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/group.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/sort.js");function a(e,t,i){return(1===t.length?(0,r.default)((0,o.rollup)(e,t,i),([e,t],[i,o])=>(0,n.default)(t,o)||(0,n.default)(e,i)):(0,r.default)((0,o.default)(e,i),([e,i],[o,r])=>t(i,r)||(0,n.default)(e,o))).map(([e])=>e)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{bisect:()=>n.default,bisectRight:()=>n.bisectRight,bisectLeft:()=>n.bisectLeft,bisectCenter:()=>n.bisectCenter,ascending:()=>o.default,bisector:()=>r.default,count:()=>a.default,cross:()=>s.default,cumsum:()=>l.default,descending:()=>c.default,deviation:()=>d.default,extent:()=>p.default,Adder:()=>u.Adder,fsum:()=>u.fsum,fcumsum:()=>u.fcumsum,group:()=>m.default,groups:()=>m.groups,index:()=>m.index,indexes:()=>m.indexes,rollup:()=>m.rollup,rollups:()=>m.rollups,groupSort:()=>h.default,bin:()=>f.default,histogram:()=>f.default,thresholdFreedmanDiaconis:()=>g.default,thresholdScott:()=>v.default,thresholdSturges:()=>x.default,max:()=>y.default,maxIndex:()=>b.default,mean:()=>C.default,median:()=>S.default,merge:()=>w.default,min:()=>I.default,minIndex:()=>_.default,nice:()=>D.default,pairs:()=>R.default,permute:()=>A.default,quantile:()=>T.default,quantileSorted:()=>T.quantileSorted,quickselect:()=>F.default,range:()=>E.default,least:()=>M.default,leastIndex:()=>O.default,greatest:()=>k.default,greatestIndex:()=>j.default,scan:()=>P.default,shuffle:()=>N.default,shuffler:()=>N.shuffler,sum:()=>V.default,ticks:()=>L.default,tickIncrement:()=>L.tickIncrement,tickStep:()=>L.tickStep,transpose:()=>B.default,variance:()=>$.default,zip:()=>G.default,every:()=>z.default,some:()=>U.default,filter:()=>q.default,map:()=>X.default,reduce:()=>H.default,reverse:()=>W.default,sort:()=>Y.default,difference:()=>Q.default,disjoint:()=>K.default,intersection:()=>J.default,subset:()=>Z.default,superset:()=>ee.default,union:()=>te.default,InternMap:()=>ie.InternMap,InternSet:()=>ie.InternSet});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisect.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bisector.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/count.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/cross.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/cumsum.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/descending.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/deviation.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/extent.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/fsum.js"),m=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/group.js"),h=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/groupSort.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/bin.js"),g=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/freedmanDiaconis.js"),v=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/scott.js"),x=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/sturges.js"),y=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/max.js"),b=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/maxIndex.js"),C=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/mean.js"),S=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/median.js"),w=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/merge.js"),I=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/min.js"),_=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/minIndex.js"),D=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/nice.js"),R=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/pairs.js"),A=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/permute.js"),T=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quantile.js"),F=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quickselect.js"),E=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/range.js"),M=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/least.js"),O=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/leastIndex.js"),k=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/greatest.js"),j=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/greatestIndex.js"),P=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/scan.js"),N=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/shuffle.js"),V=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/sum.js"),L=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ticks.js"),B=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/transpose.js"),$=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/variance.js"),G=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/zip.js"),z=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/every.js"),U=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/some.js"),q=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/filter.js"),X=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/map.js"),H=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/reduce.js"),W=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/reverse.js"),Y=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/sort.js"),Q=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/difference.js"),K=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/disjoint.js"),J=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/intersection.js"),Z=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/subset.js"),ee=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/superset.js"),te=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/union.js"),ie=i("./node_modules/internmap/src/index.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/intersection.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/set.js");function o(e,...t){e=new Set(e),t=t.map(n.default);e:for(const i of e)for(const n of t)if(!n.has(i)){e.delete(i);continue e}return e}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/least.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js");function o(e,t=n.default){let i,o=!1;if(1===t.length){let r;for(const a of e){const e=t(a);(o?(0,n.default)(e,r)<0:0===(0,n.default)(e,e))&&(i=a,r=e,o=!0)}}else for(const n of e)(o?t(n,i)<0:0===t(n,n))&&(i=n,o=!0);return i}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/leastIndex.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/minIndex.js");function r(e,t=n.default){if(1===t.length)return(0,o.default)(e,t);let i,r=-1,a=-1;for(const n of e)++a,(r<0?0===t(n,n):t(n,i)<0)&&(i=n,r=a);return r}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/map.js":(e,t,i)=>{"use strict";function n(e,t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!=typeof t)throw new TypeError("mapper is not a function");return Array.from(e,(i,n)=>t(i,n,e))}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/max.js":(e,t,i)=>{"use strict";function n(e,t){let i;if(void 0===t)for(const n of e)null!=n&&(i<n||void 0===i&&n>=n)&&(i=n);else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(i<o||void 0===i&&o>=o)&&(i=o)}return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/maxIndex.js":(e,t,i)=>{"use strict";function n(e,t){let i,n=-1,o=-1;if(void 0===t)for(const r of e)++o,null!=r&&(i<r||void 0===i&&r>=r)&&(i=r,n=o);else for(let r of e)null!=(r=t(r,++o,e))&&(i<r||void 0===i&&r>=r)&&(i=r,n=o);return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/mean.js":(e,t,i)=>{"use strict";function n(e,t){let i=0,n=0;if(void 0===t)for(let o of e)null!=o&&(o=+o)>=o&&(++i,n+=o);else{let o=-1;for(let r of e)null!=(r=t(r,++o,e))&&(r=+r)>=r&&(++i,n+=r)}if(i)return n/i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/median.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quantile.js");function o(e,t){return(0,n.default)(e,.5,t)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/merge.js":(e,t,i)=>{"use strict";function n(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/min.js":(e,t,i)=>{"use strict";function n(e,t){let i;if(void 0===t)for(const n of e)null!=n&&(i>n||void 0===i&&n>=n)&&(i=n);else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(i>o||void 0===i&&o>=o)&&(i=o)}return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/minIndex.js":(e,t,i)=>{"use strict";function n(e,t){let i,n=-1,o=-1;if(void 0===t)for(const r of e)++o,null!=r&&(i>r||void 0===i&&r>=r)&&(i=r,n=o);else for(let r of e)null!=(r=t(r,++o,e))&&(i>r||void 0===i&&r>=r)&&(i=r,n=o);return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/nice.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ticks.js");function o(e,t,i){let o;for(;;){const r=(0,n.tickIncrement)(e,t,i);if(r===o||0===r||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),o=r}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/number.js":(e,t,i)=>{"use strict";function n(e){return null===e?NaN:+e}function*o(e,t){if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(yield i);else{let i=-1;for(let n of e)null!=(n=t(n,++i,e))&&(n=+n)>=n&&(yield n)}}i.r(t),i.d(t,{default:()=>n,numbers:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/pairs.js":(e,t,i)=>{"use strict";function n(e,t=o){const i=[];let n,r=!1;for(const o of e)r&&i.push(t(n,o)),n=o,r=!0;return i}function o(e,t){return[e,t]}i.r(t),i.d(t,{default:()=>n,pair:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/permute.js":(e,t,i)=>{"use strict";function n(e,t){return Array.from(t,t=>e[t])}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s,quantileSorted:()=>l});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/max.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/min.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quickselect.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/number.js");function s(e,t,i){if(s=(e=Float64Array.from((0,a.numbers)(e,i))).length){if((t=+t)<=0||s<2)return(0,o.default)(e);if(t>=1)return(0,n.default)(e);var s,l=(s-1)*t,c=Math.floor(l),d=(0,n.default)((0,r.default)(e,c).subarray(0,c+1));return d+((0,o.default)(e.subarray(c+1))-d)*(l-c)}}function l(e,t,i=a.default){if(n=e.length){if((t=+t)<=0||n<2)return+i(e[0],0,e);if(t>=1)return+i(e[n-1],n-1,e);var n,o=(n-1)*t,r=Math.floor(o),s=+i(e[r],r,e);return s+(+i(e[r+1],r+1,e)-s)*(o-r)}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quickselect.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js");function o(e,t,i=0,a=e.length-1,s=n.default){for(;a>i;){if(a-i>600){const n=a-i+1,r=t-i+1,l=Math.log(n),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(n-c)/n)*(r-n/2<0?-1:1);o(e,t,Math.max(i,Math.floor(t-r*c/n+d)),Math.min(a,Math.floor(t+(n-r)*c/n+d)),s)}const n=e[t];let l=i,c=a;for(r(e,i,t),s(e[a],n)>0&&r(e,i,a);l<c;){for(r(e,l,c),++l,--c;s(e[l],n)<0;)++l;for(;s(e[c],n)>0;)--c}0===s(e[i],n)?r(e,i,c):(++c,r(e,c,a)),c<=t&&(i=c+1),t<=c&&(a=c-1)}return e}function r(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/range.js":(e,t,i)=>{"use strict";function n(e,t,i){e=+e,t=+t,i=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+i;for(var n=-1,o=0|Math.max(0,Math.ceil((t-e)/i)),r=new Array(o);++n<o;)r[n]=e+n*i;return r}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/reduce.js":(e,t,i)=>{"use strict";function n(e,t,i){if("function"!=typeof t)throw new TypeError("reducer is not a function");const n=e[Symbol.iterator]();let o,r,a=-1;if(arguments.length<3){if(({done:o,value:i}=n.next()),o)return;++a}for(;({done:o,value:r}=n.next()),!o;)i=t(i,r,++a,e);return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/reverse.js":(e,t,i)=>{"use strict";function n(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/scan.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/leastIndex.js");function o(e,t){const i=(0,n.default)(e,t);return i<0?void 0:i}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/set.js":(e,t,i)=>{"use strict";function n(e){return e instanceof Set?e:new Set(e)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/shuffle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,shuffler:()=>o});const n=o(Math.random);function o(e){return function(t,i=0,n=t.length){let o=n-(i=+i);for(;o;){const n=e()*o--|0,r=t[o+i];t[o+i]=t[n+i],t[n+i]=r}return t}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/some.js":(e,t,i)=>{"use strict";function n(e,t){if("function"!=typeof t)throw new TypeError("test is not a function");let i=-1;for(const n of e)if(t(n,++i,e))return!0;return!1}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/sort.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ascending.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/permute.js");function r(e,...t){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");e=Array.from(e);let[i=n.default]=t;if(1===i.length||t.length>1){const r=Uint32Array.from(e,(e,t)=>t);return t.length>1?(t=t.map(t=>e.map(t)),r.sort((e,i)=>{for(const o of t){const t=(0,n.default)(o[e],o[i]);if(t)return t}})):(i=e.map(i),r.sort((e,t)=>(0,n.default)(i[e],i[t]))),(0,o.default)(e,r)}return e.sort(i)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/subset.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/superset.js");function o(e,t){return(0,n.default)(t,e)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/sum.js":(e,t,i)=>{"use strict";function n(e,t){let i=0;if(void 0===t)for(let n of e)(n=+n)&&(i+=n);else{let n=-1;for(let o of e)(o=+t(o,++n,e))&&(i+=o)}return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/superset.js":(e,t,i)=>{"use strict";function n(e,t){const i=e[Symbol.iterator](),n=new Set;for(const o of t){if(n.has(o))continue;let e,t;for(;({value:e,done:t}=i.next());){if(t)return!1;if(n.add(e),Object.is(o,e))break}}return!0}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/freedmanDiaconis.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/count.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/quantile.js");function r(e,t,i){return Math.ceil((i-t)/(2*((0,o.default)(e,.75)-(0,o.default)(e,.25))*Math.pow((0,n.default)(e),-1/3)))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/scott.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/count.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/deviation.js");function r(e,t,i){return Math.ceil((i-t)/(3.5*(0,o.default)(e)*Math.pow((0,n.default)(e),-1/3)))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/threshold/sturges.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/count.js");function o(e){return Math.ceil(Math.log((0,n.default)(e))/Math.LN2)+1}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/ticks.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,tickIncrement:()=>s,tickStep:()=>l});var n=Math.sqrt(50),o=Math.sqrt(10),r=Math.sqrt(2);function a(e,t,i){var n,o,r,a,l=-1;if(i=+i,(e=+e)===(t=+t)&&i>0)return[e];if((n=t<e)&&(o=e,e=t,t=o),0===(a=s(e,t,i))||!isFinite(a))return[];if(a>0){let i=Math.round(e/a),n=Math.round(t/a);for(i*a<e&&++i,n*a>t&&--n,r=new Array(o=n-i+1);++l<o;)r[l]=(i+l)*a}else{a=-a;let i=Math.round(e*a),n=Math.round(t*a);for(i/a<e&&++i,n/a>t&&--n,r=new Array(o=n-i+1);++l<o;)r[l]=(i+l)/a}return n&&r.reverse(),r}function s(e,t,i){var a=(t-e)/Math.max(0,i),s=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,s);return s>=0?(l>=n?10:l>=o?5:l>=r?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=n?10:l>=o?5:l>=r?2:1)}function l(e,t,i){var a=Math.abs(t-e)/Math.max(0,i),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),l=a/s;return l>=n?s*=10:l>=o?s*=5:l>=r&&(s*=2),t<e?-s:s}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/transpose.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/min.js");function o(e){if(!(a=e.length))return[];for(var t=-1,i=(0,n.default)(e,r),o=new Array(i);++t<i;)for(var a,s=-1,l=o[t]=new Array(a);++s<a;)l[s]=e[s][t];return o}function r(e){return e.length}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/union.js":(e,t,i)=>{"use strict";function n(...e){const t=new Set;for(const i of e)for(const e of i)t.add(e);return t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/variance.js":(e,t,i)=>{"use strict";function n(e,t){let i,n=0,o=0,r=0;if(void 0===t)for(let a of e)null!=a&&(a=+a)>=a&&(i=a-o,o+=i/++n,r+=i*(a-o));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(i=s-o,o+=i/++n,r+=i*(s-o))}if(n>1)return r/(n-1)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/zip.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/transpose.js");function o(){return(0,n.default)(arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/color.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{Color:()=>o,darker:()=>r,brighter:()=>a,default:()=>b,rgbConvert:()=>w,rgb:()=>I,Rgb:()=>_,hslConvert:()=>F,hsl:()=>E});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/define.js");function o(){}var r=.7,a=1/r,s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d=/^#([0-9a-f]{3,8})$/,p=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),u=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),m=new RegExp("^rgba\\("+[s,s,s,l]+"\\)$"),h=new RegExp("^rgba\\("+[c,c,c,l]+"\\)$"),f=new RegExp("^hsl\\("+[l,c,c]+"\\)$"),g=new RegExp("^hsla\\("+[l,c,c,l]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function y(){return this.rgb().formatRgb()}function b(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=d.exec(e))?(i=t[1].length,t=parseInt(t[1],16),6===i?C(t):3===i?new _(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===i?S(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===i?S(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=p.exec(e))?new _(t[1],t[2],t[3],1):(t=u.exec(e))?new _(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=m.exec(e))?S(t[1],t[2],t[3],t[4]):(t=h.exec(e))?S(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=f.exec(e))?T(t[1],t[2]/100,t[3]/100,1):(t=g.exec(e))?T(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?C(v[e]):"transparent"===e?new _(NaN,NaN,NaN,0):null}function C(e){return new _(e>>16&255,e>>8&255,255&e,1)}function S(e,t,i,n){return n<=0&&(e=t=i=NaN),new _(e,t,i,n)}function w(e){return e instanceof o||(e=b(e)),e?new _((e=e.rgb()).r,e.g,e.b,e.opacity):new _}function I(e,t,i,n){return 1===arguments.length?w(e):new _(e,t,i,null==n?1:n)}function _(e,t,i,n){this.r=+e,this.g=+t,this.b=+i,this.opacity=+n}function D(){return"#"+A(this.r)+A(this.g)+A(this.b)}function R(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function A(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function T(e,t,i,n){return n<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new M(e,t,i,n)}function F(e){if(e instanceof M)return new M(e.h,e.s,e.l,e.opacity);if(e instanceof o||(e=b(e)),!e)return new M;if(e instanceof M)return e;var t=(e=e.rgb()).r/255,i=e.g/255,n=e.b/255,r=Math.min(t,i,n),a=Math.max(t,i,n),s=NaN,l=a-r,c=(a+r)/2;return l?(s=t===a?(i-n)/l+6*(i<n):i===a?(n-t)/l+2:(t-i)/l+4,l/=c<.5?a+r:2-a-r,s*=60):l=c>0&&c<1?0:s,new M(s,l,c,e.opacity)}function E(e,t,i,n){return 1===arguments.length?F(e):new M(e,t,i,null==n?1:n)}function M(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}function O(e,t,i){return 255*(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)}(0,n.default)(o,b,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHsl:function(){return F(this).formatHsl()},formatRgb:y,toString:y}),(0,n.default)(_,I,(0,n.extend)(o,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new _(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:R,toString:R})),(0,n.default)(M,E,(0,n.extend)(o,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new M(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new M(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*t,o=2*i-n;return new _(O(e>=240?e-240:e+120,o,n),O(e,o,n),O(e<120?e+240:e-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/cubehelix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h,Cubehelix:()=>f});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/define.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/color.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/math.js"),a=-.14861,s=1.78277,l=-.29227,c=-.90649,d=1.97294,p=d*c,u=d*s,m=s*l-c*a;function h(e,t,i,n){return 1===arguments.length?function(e){if(e instanceof f)return new f(e.h,e.s,e.l,e.opacity);e instanceof o.Rgb||(e=(0,o.rgbConvert)(e));var t=e.r/255,i=e.g/255,n=e.b/255,a=(m*n+p*t-u*i)/(m+p-u),s=n-a,h=(d*(i-a)-l*s)/c,g=Math.sqrt(h*h+s*s)/(d*a*(1-a)),v=g?Math.atan2(h,s)*r.degrees-120:NaN;return new f(v<0?v+360:v,g,a,e.opacity)}(e):new f(e,t,i,null==n?1:n)}function f(e,t,i,n){this.h=+e,this.s=+t,this.l=+i,this.opacity=+n}(0,n.default)(f,h,(0,n.extend)(o.Color,{brighter:function(e){return e=null==e?o.brighter:Math.pow(o.brighter,e),new f(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?o.darker:Math.pow(o.darker,e),new f(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*r.radians,t=+this.l,i=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),p=Math.sin(e);return new o.Rgb(255*(t+i*(a*n+s*p)),255*(t+i*(l*n+c*p)),255*(t+i*(d*n)),this.opacity)}}))},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/define.js":(e,t,i)=>{"use strict";function n(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function o(e,t){var i=Object.create(e.prototype);for(var n in t)i[n]=t[n];return i}i.r(t),i.d(t,{default:()=>n,extend:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{color:()=>n.default,rgb:()=>n.rgb,hsl:()=>n.hsl,lab:()=>o.default,hcl:()=>o.hcl,lch:()=>o.lch,gray:()=>o.gray,cubehelix:()=>r.default});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/color.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/lab.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/cubehelix.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/lab.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{gray:()=>h,default:()=>f,Lab:()=>g,lch:()=>S,hcl:()=>w,Hcl:()=>I});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/define.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/color.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/math.js");const a=.96422,s=1,l=.82521,c=4/29,d=6/29,p=3*d*d,u=d*d*d;function m(e){if(e instanceof g)return new g(e.l,e.a,e.b,e.opacity);if(e instanceof I)return _(e);e instanceof o.Rgb||(e=(0,o.rgbConvert)(e));var t,i,n=b(e.r),r=b(e.g),c=b(e.b),d=v((.2225045*n+.7168786*r+.0606169*c)/s);return n===r&&r===c?t=i=d:(t=v((.4360747*n+.3850649*r+.1430804*c)/a),i=v((.0139322*n+.0971045*r+.7141733*c)/l)),new g(116*d-16,500*(t-d),200*(d-i),e.opacity)}function h(e,t){return new g(e,0,0,null==t?1:t)}function f(e,t,i,n){return 1===arguments.length?m(e):new g(e,t,i,null==n?1:n)}function g(e,t,i,n){this.l=+e,this.a=+t,this.b=+i,this.opacity=+n}function v(e){return e>u?Math.pow(e,1/3):e/p+c}function x(e){return e>d?e*e*e:p*(e-c)}function y(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function C(e){if(e instanceof I)return new I(e.h,e.c,e.l,e.opacity);if(e instanceof g||(e=m(e)),0===e.a&&0===e.b)return new I(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*r.degrees;return new I(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function S(e,t,i,n){return 1===arguments.length?C(e):new I(i,t,e,null==n?1:n)}function w(e,t,i,n){return 1===arguments.length?C(e):new I(e,t,i,null==n?1:n)}function I(e,t,i,n){this.h=+e,this.c=+t,this.l=+i,this.opacity=+n}function _(e){if(isNaN(e.h))return new g(e.l,0,0,e.opacity);var t=e.h*r.radians;return new g(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,n.default)(g,f,(0,n.extend)(o.Color,{brighter:function(e){return new g(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new g(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,i=isNaN(this.b)?e:e-this.b/200;return t=a*x(t),e=s*x(e),i=l*x(i),new o.Rgb(y(3.1338561*t-1.6168667*e-.4906146*i),y(-.9787684*t+1.9161415*e+.033454*i),y(.0719453*t-.2289914*e+1.4052427*i),this.opacity)}})),(0,n.default)(I,w,(0,n.extend)(o.Color,{brighter:function(e){return new I(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new I(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return _(this).rgb()}}))},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/math.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{radians:()=>n,degrees:()=>o});const n=Math.PI/180,o=180/Math.PI},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/defaultLocale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{format:()=>o,formatPrefix:()=>r,default:()=>s});var n,o,r,a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/locale.js");function s(e){return n=(0,a.default)(e),o=n.format,r=n.formatPrefix,n}s({thousands:",",grouping:[3],currency:["$",""]})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/exponent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js");function o(e){return(e=(0,n.formatDecimalParts)(Math.abs(e)))?e[1]:NaN}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js":(e,t,i)=>{"use strict";function n(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function o(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,n=e.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+e.slice(i+1)]}i.r(t),i.d(t,{default:()=>n,formatDecimalParts:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatGroup.js":(e,t,i)=>{"use strict";function n(e,t){return function(i,n){for(var o=i.length,r=[],a=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),r.push(i.substring(o-=s,o+s)),!((l+=s+1)>n));)s=e[a=(a+1)%e.length];return r.reverse().join(t)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatNumerals.js":(e,t,i)=>{"use strict";function n(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatPrefixAuto.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{prefixExponent:()=>n,default:()=>r});var n,o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js");function r(e,t){var i=(0,o.formatDecimalParts)(e,t);if(!i)return e+"";var r=i[0],a=i[1],s=a-(n=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+(0,o.formatDecimalParts)(e,Math.max(0,t+s-1))[0]}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatRounded.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js");function o(e,t){var i=(0,n.formatDecimalParts)(e,t);if(!i)return e+"";var o=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatSpecifier.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,FormatSpecifier:()=>r});var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){if(!(t=n.exec(e)))throw new Error("invalid format: "+e);var t;return new r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}o.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatTrim.js":(e,t,i)=>{"use strict";function n(e){e:for(var t,i=e.length,n=1,o=-1;n<i;++n)switch(e[n]){case".":o=t=n;break;case"0":0===o&&(o=n),t=n;break;default:if(!+e[n])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatTypes.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatDecimal.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatPrefixAuto.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatRounded.js");const a={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:n.default,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>(0,r.default)(100*e,t),r:r.default,s:o.default,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{formatDefaultLocale:()=>n.default,format:()=>n.format,formatPrefix:()=>n.formatPrefix,formatLocale:()=>o.default,formatSpecifier:()=>r.default,FormatSpecifier:()=>r.FormatSpecifier,precisionFixed:()=>a.default,precisionPrefix:()=>s.default,precisionRound:()=>l.default});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/defaultLocale.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/locale.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatSpecifier.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionFixed.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionPrefix.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionRound.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/locale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/exponent.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatGroup.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatNumerals.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatSpecifier.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatTrim.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatTypes.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/formatPrefixAuto.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/identity.js"),p=Array.prototype.map,u=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function m(e){var t=void 0===e.grouping||void 0===e.thousands?d.default:(0,o.default)(p.call(e.grouping,Number),e.thousands+""),i=void 0===e.currency?"":e.currency[0]+"",m=void 0===e.currency?"":e.currency[1]+"",h=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?d.default:(0,r.default)(p.call(e.numerals,String)),g=void 0===e.percent?"%":e.percent+"",v=void 0===e.minus?"\u2212":e.minus+"",x=void 0===e.nan?"NaN":e.nan+"";function y(e){var n=(e=(0,a.default)(e)).fill,o=e.align,r=e.sign,d=e.symbol,p=e.zero,y=e.width,b=e.comma,C=e.precision,S=e.trim,w=e.type;"n"===w?(b=!0,w="g"):l.default[w]||(void 0===C&&(C=12),S=!0,w="g"),(p||"0"===n&&"="===o)&&(p=!0,n="0",o="=");var I="$"===d?i:"#"===d&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_="$"===d?m:/[%p]/.test(w)?g:"",D=l.default[w],R=/[defgprs%]/.test(w);function A(e){var i,a,l,d=I,m=_;if("c"===w)m=D(e)+m,e="";else{var g=(e=+e)<0||1/e<0;if(e=isNaN(e)?x:D(Math.abs(e),C),S&&(e=(0,s.default)(e)),g&&0==+e&&"+"!==r&&(g=!1),d=(g?"("===r?r:v:"-"===r||"("===r?"":r)+d,m=("s"===w?u[8+c.prefixExponent/3]:"")+m+(g&&"("===r?")":""),R)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){m=(46===l?h+e.slice(i+1):e.slice(i))+m,e=e.slice(0,i);break}}b&&!p&&(e=t(e,1/0));var A=d.length+e.length+m.length,T=A<y?new Array(y-A+1).join(n):"";switch(b&&p&&(e=t(T+e,T.length?y-m.length:1/0),T=""),o){case"<":e=d+e+m+T;break;case"=":e=d+T+e+m;break;case"^":e=T.slice(0,A=T.length>>1)+d+e+m+T.slice(A);break;default:e=T+d+e+m}return f(e)}return C=void 0===C?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C)),A.toString=function(){return e+""},A}return{format:y,formatPrefix:function(e,t){var i=y(((e=(0,a.default)(e)).type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor((0,n.default)(t)/3))),r=Math.pow(10,-o),s=u[8+o/3];return function(e){return i(r*e)+s}}}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionFixed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/exponent.js");function o(e){return Math.max(0,-(0,n.default)(Math.abs(e)))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionPrefix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/exponent.js");function o(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,n.default)(t)/3)))-(0,n.default)(Math.abs(e)))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/precisionRound.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/exponent.js");function o(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,n.default)(t)-(0,n.default)(e))+1}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,genericArray:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/value.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/numberArray.js");function r(e,t){return((0,o.isNumberArray)(t)?o.default:a)(e,t)}function a(e,t){var i,o=t?t.length:0,r=e?Math.min(o,e.length):0,a=new Array(r),s=new Array(o);for(i=0;i<r;++i)a[i]=(0,n.default)(e[i],t[i]);for(;i<o;++i)s[i]=t[i];return function(e){for(i=0;i<r;++i)s[i]=a[i](e);return s}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basis.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){var r=e*e,a=r*e;return((1-3*e+3*r-a)*t+(4-6*r+3*a)*i+(1+3*e+3*r-3*a)*n+a*o)/6}function o(e){var t=e.length-1;return function(i){var o=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),r=e[o],a=e[o+1],s=o>0?e[o-1]:2*r-a,l=o<t-1?e[o+2]:2*a-r;return n((i-o/t)*t,s,r,a,l)}}i.r(t),i.d(t,{basis:()=>n,default:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basisClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basis.js");function o(e){var t=e.length;return function(i){var o=Math.floor(((i%=1)<0?++i:i)*t),r=e[(o+t-1)%t],a=e[o%t],s=e[(o+1)%t],l=e[(o+2)%t];return(0,n.basis)((i-o/t)*t,r,a,s,l)}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{hue:()=>r,gamma:()=>a,default:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/constant.js");function o(e,t){return function(i){return e+i*t}}function r(e,t){var i=t-e;return i?o(e,i>180||i<-180?i-360*Math.round(i/360):i):(0,n.default)(isNaN(e)?t:e)}function a(e){return 1==(e=+e)?s:function(t,i){return i-t?function(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}(t,i,e):(0,n.default)(isNaN(t)?i:t)}}function s(e,t){var i=t-e;return i?o(e,i):(0,n.default)(isNaN(e)?t:e)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/constant.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=e=>()=>e},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/cubehelix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,cubehelixLong:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");function r(e){return function t(i){function r(t,r){var a=e((t=(0,n.cubehelix)(t)).h,(r=(0,n.cubehelix)(r)).h),s=(0,o.default)(t.s,r.s),l=(0,o.default)(t.l,r.l),c=(0,o.default)(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=s(e),t.l=l(Math.pow(e,i)),t.opacity=c(e),t+""}}return i=+i,r.gamma=t,r}(1)}const a=r(o.hue);var s=r(o.default)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/date.js":(e,t,i)=>{"use strict";function n(e,t){var i=new Date;return e=+e,t=+t,function(n){return i.setTime(e*(1-n)+t*n),i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/discrete.js":(e,t,i)=>{"use strict";function n(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hcl.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hclLong:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");function r(e){return function(t,i){var r=e((t=(0,n.hcl)(t)).h,(i=(0,n.hcl)(i)).h),a=(0,o.default)(t.c,i.c),s=(0,o.default)(t.l,i.l),l=(0,o.default)(t.opacity,i.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=s(e),t.opacity=l(e),t+""}}}const a=r(o.hue);var s=r(o.default)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hsl.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hslLong:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");function r(e){return function(t,i){var r=e((t=(0,n.hsl)(t)).h,(i=(0,n.hsl)(i)).h),a=(0,o.default)(t.s,i.s),s=(0,o.default)(t.l,i.l),l=(0,o.default)(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=s(e),t.opacity=l(e),t+""}}}const a=r(o.hue);var s=r(o.default)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hue.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");function o(e,t){var i=(0,n.hue)(+e,+t);return function(e){var t=i(e);return t-360*Math.floor(t/360)}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{interpolate:()=>n.default,interpolateArray:()=>o.default,interpolateBasis:()=>r.default,interpolateBasisClosed:()=>a.default,interpolateDate:()=>s.default,interpolateDiscrete:()=>l.default,interpolateHue:()=>c.default,interpolateNumber:()=>d.default,interpolateNumberArray:()=>p.default,interpolateObject:()=>u.default,interpolateRound:()=>m.default,interpolateString:()=>h.default,interpolateTransformCss:()=>f.interpolateTransformCss,interpolateTransformSvg:()=>f.interpolateTransformSvg,interpolateZoom:()=>g.default,interpolateRgb:()=>v.default,interpolateRgbBasis:()=>v.rgbBasis,interpolateRgbBasisClosed:()=>v.rgbBasisClosed,interpolateHsl:()=>x.default,interpolateHslLong:()=>x.hslLong,interpolateLab:()=>y.default,interpolateHcl:()=>b.default,interpolateHclLong:()=>b.hclLong,interpolateCubehelix:()=>C.default,interpolateCubehelixLong:()=>C.cubehelixLong,piecewise:()=>S.default,quantize:()=>w.default});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/value.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/array.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basis.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basisClosed.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/date.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/discrete.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hue.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/number.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/numberArray.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/object.js"),m=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/round.js"),h=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/string.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/index.js"),g=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/zoom.js"),v=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/rgb.js"),x=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hsl.js"),y=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/lab.js"),b=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/hcl.js"),C=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/cubehelix.js"),S=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/piecewise.js"),w=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/quantize.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/lab.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");function r(e,t){var i=(0,o.default)((e=(0,n.lab)(e)).l,(t=(0,n.lab)(t)).l),r=(0,o.default)(e.a,t.a),a=(0,o.default)(e.b,t.b),s=(0,o.default)(e.opacity,t.opacity);return function(t){return e.l=i(t),e.a=r(t),e.b=a(t),e.opacity=s(t),e+""}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/number.js":(e,t,i)=>{"use strict";function n(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/numberArray.js":(e,t,i)=>{"use strict";function n(e,t){t||(t=[]);var i,n=e?Math.min(t.length,e.length):0,o=t.slice();return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function o(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}i.r(t),i.d(t,{default:()=>n,isNumberArray:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/object.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/value.js");function o(e,t){var i,o={},r={};for(i in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)i in e?o[i]=(0,n.default)(e[i],t[i]):r[i]=t[i];return function(e){for(i in o)r[i]=o[i](e);return r}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/piecewise.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/value.js");function o(e,t){void 0===t&&(t=e,e=n.default);for(var i=0,o=t.length-1,r=t[0],a=new Array(o<0?0:o);i<o;)a[i]=e(r,r=t[++i]);return function(e){var t=Math.max(0,Math.min(o-1,Math.floor(e*=o)));return a[t](e-t)}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/quantize.js":(e,t,i)=>{"use strict";function n(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e(n/(t-1));return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/rgb.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s,rgbBasis:()=>c,rgbBasisClosed:()=>d});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basis.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/basisClosed.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/color.js");const s=function e(t){var i=(0,a.gamma)(t);function o(e,t){var o=i((e=(0,n.rgb)(e)).r,(t=(0,n.rgb)(t)).r),r=i(e.g,t.g),s=i(e.b,t.b),l=(0,a.default)(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=s(t),e.opacity=l(t),e+""}}return o.gamma=e,o}(1);function l(e){return function(t){var i,o,r=t.length,a=new Array(r),s=new Array(r),l=new Array(r);for(i=0;i<r;++i)o=(0,n.rgb)(t[i]),a[i]=o.r||0,s[i]=o.g||0,l[i]=o.b||0;return a=e(a),s=e(s),l=e(l),o.opacity=1,function(e){return o.r=a(e),o.g=s(e),o.b=l(e),o+""}}}var c=l(o.default),d=l(r.default)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/round.js":(e,t,i)=>{"use strict";function n(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/string.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/number.js"),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r=new RegExp(o.source,"g");function a(e,t){var i,a,s,l=o.lastIndex=r.lastIndex=0,c=-1,d=[],p=[];for(e+="",t+="";(i=o.exec(e))&&(a=r.exec(t));)(s=a.index)>l&&(s=t.slice(l,s),d[c]?d[c]+=s:d[++c]=s),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,p.push({i:c,x:(0,n.default)(i,a)})),l=r.lastIndex;return l<t.length&&(s=t.slice(l),d[c]?d[c]+=s:d[++c]=s),d.length<2?p[0]?function(e){return function(t){return e(t)+""}}(p[0].x):function(e){return function(){return e}}(t):(t=p.length,function(e){for(var i,n=0;n<t;++n)d[(i=p[n]).i]=i.x(e);return d.join("")})}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/decompose.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{identity:()=>o,default:()=>r});var n=180/Math.PI,o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r(e,t,i,o,r,a){var s,l,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*i+t*o)&&(i-=e*c,o-=t*c),(l=Math.sqrt(i*i+o*o))&&(i/=l,o/=l,c/=l),e*o<t*i&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*n,skewX:Math.atan(c)*n,scaleX:s,scaleY:l}}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{interpolateTransformCss:()=>a,interpolateTransformSvg:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/number.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/parse.js");function r(e,t,i,o){function r(e){return e.length?e.pop()+" ":""}return function(a,s){var l=[],c=[];return a=e(a),s=e(s),function(e,o,r,a,s,l){if(e!==r||o!==a){var c=s.push("translate(",null,t,null,i);l.push({i:c-4,x:(0,n.default)(e,r)},{i:c-2,x:(0,n.default)(o,a)})}else(r||a)&&s.push("translate("+r+t+a+i)}(a.translateX,a.translateY,s.translateX,s.translateY,l,c),function(e,t,i,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:i.push(r(i)+"rotate(",null,o)-2,x:(0,n.default)(e,t)})):t&&i.push(r(i)+"rotate("+t+o)}(a.rotate,s.rotate,l,c),function(e,t,i,a){e!==t?a.push({i:i.push(r(i)+"skewX(",null,o)-2,x:(0,n.default)(e,t)}):t&&i.push(r(i)+"skewX("+t+o)}(a.skewX,s.skewX,l,c),function(e,t,i,o,a,s){if(e!==i||t!==o){var l=a.push(r(a)+"scale(",null,",",null,")");s.push({i:l-4,x:(0,n.default)(e,i)},{i:l-2,x:(0,n.default)(t,o)})}else 1===i&&1===o||a.push(r(a)+"scale("+i+","+o+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,l,c),a=s=null,function(e){for(var t,i=-1,n=c.length;++i<n;)l[(t=c[i]).i]=t.x(e);return l.join("")}}}var a=r(o.parseCss,"px, ","px)","deg)"),s=r(o.parseSvg,", ",")",")")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/parse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{parseCss:()=>r,parseSvg:()=>a});var n,o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/transform/decompose.js");function r(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?o.identity:(0,o.default)(t.a,t.b,t.c,t.d,t.e,t.f)}function a(e){return null==e?o.identity:(n||(n=document.createElementNS("http://www.w3.org/2000/svg","g")),n.setAttribute("transform",e),(e=n.transform.baseVal.consolidate())?(e=e.matrix,(0,o.default)(e.a,e.b,e.c,e.d,e.e,e.f)):o.identity)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/value.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-color/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/rgb.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/array.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/date.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/number.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/object.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/string.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/constant.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/numberArray.js");function u(e,t){var i,u=typeof t;return null==t||"boolean"===u?(0,d.default)(t):("number"===u?s.default:"string"===u?(i=(0,n.color)(t))?(t=i,o.default):c.default:t instanceof n.color?o.default:t instanceof Date?a.default:(0,p.isNumberArray)(t)?p.default:Array.isArray(t)?r.genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?l.default:s.default)(e,t)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/zoom.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});function n(e){return((e=Math.exp(e))+1/e)/2}const o=function e(t,i,o){function r(e,r){var a,s,l=e[0],c=e[1],d=e[2],p=r[0],u=r[1],m=r[2],h=p-l,f=u-c,g=h*h+f*f;if(g<1e-12)s=Math.log(m/d)/t,a=function(e){return[l+e*h,c+e*f,d*Math.exp(t*e*s)]};else{var v=Math.sqrt(g),x=(m*m-d*d+o*g)/(2*d*i*v),y=(m*m-d*d-o*g)/(2*m*i*v),b=Math.log(Math.sqrt(x*x+1)-x),C=Math.log(Math.sqrt(y*y+1)-y);s=(C-b)/t,a=function(e){var o,r=e*s,a=n(b),p=d/(i*v)*(a*(o=t*r+b,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[l+p*h,c+p*f,d*a/n(t*r+b)]}}return a.duration=1e3*s*t/Math.SQRT2,a}return r.rho=function(t){var i=Math.max(.001,+t),n=i*i;return e(i,n,n*n)},r}(Math.SQRT2,2,4)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/defaultLocale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeFormat:()=>o,timeParse:()=>r,utcFormat:()=>a,utcParse:()=>s,default:()=>c});var n,o,r,a,s,l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/locale.js");function c(e){return n=(0,l.default)(e),o=n.format,r=n.parse,a=n.utcFormat,s=n.utcParse,n}c({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeFormatDefaultLocale:()=>n.default,timeFormat:()=>n.timeFormat,timeParse:()=>n.timeParse,utcFormat:()=>n.utcFormat,utcParse:()=>n.utcParse,timeFormatLocale:()=>o.default,isoFormat:()=>r.default,isoParse:()=>a.default});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/defaultLocale.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/locale.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/isoFormat.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/isoParse.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/isoFormat.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{isoSpecifier:()=>o,default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/defaultLocale.js"),o="%Y-%m-%dT%H:%M:%S.%LZ";const r=Date.prototype.toISOString?function(e){return e.toISOString()}:(0,n.utcFormat)(o)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/isoParse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/isoFormat.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/defaultLocale.js");const r=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:(0,o.utcParse)(n.isoSpecifier)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/locale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/index.js");function o(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function a(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function s(e){var t=e.dateTime,i=e.date,s=e.time,c=e.periods,d=e.days,p=e.shortDays,u=e.months,m=e.shortMonths,H=h(c),me=f(c),_e=h(d),De=f(d),Re=h(p),Ae=f(p),Te=h(u),Fe=f(u),Ee=h(m),Me=f(m),Oe={a:function(e){return p[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return m[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:P,e:P,f:$,g:J,G:ee,H:N,I:V,j:L,L:B,m:G,M:z,p:function(e){return c[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:we,s:Ie,S:U,u:q,U:X,V:W,w:Y,W:Q,x:null,X:null,y:K,Y:Z,Z:te,"%":Se},ke={a:function(e){return p[e.getUTCDay()]},A:function(e){return d[e.getUTCDay()]},b:function(e){return m[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:ie,e:ie,f:se,g:xe,G:be,H:ne,I:oe,j:re,L:ae,m:le,M:ce,p:function(e){return c[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:we,s:Ie,S:de,u:pe,U:ue,V:he,w:fe,W:ge,x:null,X:null,y:ve,Y:ye,Z:Ce,"%":Se},je={a:function(e,t,i){var n=Re.exec(t.slice(i));return n?(e.w=Ae.get(n[0].toLowerCase()),i+n[0].length):-1},A:function(e,t,i){var n=_e.exec(t.slice(i));return n?(e.w=De.get(n[0].toLowerCase()),i+n[0].length):-1},b:function(e,t,i){var n=Ee.exec(t.slice(i));return n?(e.m=Me.get(n[0].toLowerCase()),i+n[0].length):-1},B:function(e,t,i){var n=Te.exec(t.slice(i));return n?(e.m=Fe.get(n[0].toLowerCase()),i+n[0].length):-1},c:function(e,i,n){return Ve(e,t,i,n)},d:D,e:D,f:M,g:S,G:C,H:A,I:A,j:R,L:E,m:_,M:T,p:function(e,t,i){var n=H.exec(t.slice(i));return n?(e.p=me.get(n[0].toLowerCase()),i+n[0].length):-1},q:I,Q:k,s:j,S:F,u:v,U:x,V:y,w:g,W:b,x:function(e,t,n){return Ve(e,i,t,n)},X:function(e,t,i){return Ve(e,s,t,i)},y:S,Y:C,Z:w,"%":O};function Pe(e,t){return function(i){var n,o,r,a=[],s=-1,c=0,d=e.length;for(i instanceof Date||(i=new Date(+i));++s<d;)37===e.charCodeAt(s)&&(a.push(e.slice(c,s)),null!=(o=l[n=e.charAt(++s)])?n=e.charAt(++s):o="e"===n?" ":"0",(r=t[n])&&(n=r(i,o)),a.push(n),c=s+1);return a.push(e.slice(c,s)),a.join("")}}function Ne(e,t){return function(i){var s,l,c=a(1900,void 0,1);if(Ve(c,e,i+="",0)!=i.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(t&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(l=(s=r(a(c.y,0,1))).getUTCDay(),s=l>4||0===l?n.utcMonday.ceil(s):(0,n.utcMonday)(s),s=n.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(l=(s=o(a(c.y,0,1))).getDay(),s=l>4||0===l?n.timeMonday.ceil(s):(0,n.timeMonday)(s),s=n.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),l="Z"in c?r(a(c.y,0,1)).getUTCDay():o(a(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(l+5)%7:c.w+7*c.U-(l+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):o(c)}}function Ve(e,t,i,n){for(var o,r,a=0,s=t.length,c=i.length;a<s;){if(n>=c)return-1;if(37===(o=t.charCodeAt(a++))){if(o=t.charAt(a++),!(r=je[o in l?t.charAt(a++):o])||(n=r(e,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}return Oe.x=Pe(i,Oe),Oe.X=Pe(s,Oe),Oe.c=Pe(t,Oe),ke.x=Pe(i,ke),ke.X=Pe(s,ke),ke.c=Pe(t,ke),{format:function(e){var t=Pe(e+="",Oe);return t.toString=function(){return e},t},parse:function(e){var t=Ne(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Pe(e+="",ke);return t.toString=function(){return e},t},utcParse:function(e){var t=Ne(e+="",!0);return t.toString=function(){return e},t}}}var l={"-":"",_:" ",0:"0"},c=/^\s*\d+/,d=/^%/,p=/[\\^$*+?|[\]().{}]/g;function u(e,t,i){var n=e<0?"-":"",o=(n?-e:e)+"",r=o.length;return n+(r<i?new Array(i-r+1).join(t)+o:o)}function m(e){return e.replace(p,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(m).join("|")+")","i")}function f(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function g(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function v(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.u=+n[0],i+n[0].length):-1}function x(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.U=+n[0],i+n[0].length):-1}function y(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.V=+n[0],i+n[0].length):-1}function b(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.W=+n[0],i+n[0].length):-1}function C(e,t,i){var n=c.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function S(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function w(e,t,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function I(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.q=3*n[0]-3,i+n[0].length):-1}function _(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function D(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function R(e,t,i){var n=c.exec(t.slice(i,i+3));return n?(e.m=0,e.d=+n[0],i+n[0].length):-1}function A(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function T(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function F(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function E(e,t,i){var n=c.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function M(e,t,i){var n=c.exec(t.slice(i,i+6));return n?(e.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function O(e,t,i){var n=d.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function k(e,t,i){var n=c.exec(t.slice(i));return n?(e.Q=+n[0],i+n[0].length):-1}function j(e,t,i){var n=c.exec(t.slice(i));return n?(e.s=+n[0],i+n[0].length):-1}function P(e,t){return u(e.getDate(),t,2)}function N(e,t){return u(e.getHours(),t,2)}function V(e,t){return u(e.getHours()%12||12,t,2)}function L(e,t){return u(1+n.timeDay.count((0,n.timeYear)(e),e),t,3)}function B(e,t){return u(e.getMilliseconds(),t,3)}function $(e,t){return B(e,t)+"000"}function G(e,t){return u(e.getMonth()+1,t,2)}function z(e,t){return u(e.getMinutes(),t,2)}function U(e,t){return u(e.getSeconds(),t,2)}function q(e){var t=e.getDay();return 0===t?7:t}function X(e,t){return u(n.timeSunday.count((0,n.timeYear)(e)-1,e),t,2)}function H(e){var t=e.getDay();return t>=4||0===t?(0,n.timeThursday)(e):n.timeThursday.ceil(e)}function W(e,t){return e=H(e),u(n.timeThursday.count((0,n.timeYear)(e),e)+(4===(0,n.timeYear)(e).getDay()),t,2)}function Y(e){return e.getDay()}function Q(e,t){return u(n.timeMonday.count((0,n.timeYear)(e)-1,e),t,2)}function K(e,t){return u(e.getFullYear()%100,t,2)}function J(e,t){return u((e=H(e)).getFullYear()%100,t,2)}function Z(e,t){return u(e.getFullYear()%1e4,t,4)}function ee(e,t){var i=e.getDay();return u((e=i>=4||0===i?(0,n.timeThursday)(e):n.timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function te(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function ie(e,t){return u(e.getUTCDate(),t,2)}function ne(e,t){return u(e.getUTCHours(),t,2)}function oe(e,t){return u(e.getUTCHours()%12||12,t,2)}function re(e,t){return u(1+n.utcDay.count((0,n.utcYear)(e),e),t,3)}function ae(e,t){return u(e.getUTCMilliseconds(),t,3)}function se(e,t){return ae(e,t)+"000"}function le(e,t){return u(e.getUTCMonth()+1,t,2)}function ce(e,t){return u(e.getUTCMinutes(),t,2)}function de(e,t){return u(e.getUTCSeconds(),t,2)}function pe(e){var t=e.getUTCDay();return 0===t?7:t}function ue(e,t){return u(n.utcSunday.count((0,n.utcYear)(e)-1,e),t,2)}function me(e){var t=e.getUTCDay();return t>=4||0===t?(0,n.utcThursday)(e):n.utcThursday.ceil(e)}function he(e,t){return e=me(e),u(n.utcThursday.count((0,n.utcYear)(e),e)+(4===(0,n.utcYear)(e).getUTCDay()),t,2)}function fe(e){return e.getUTCDay()}function ge(e,t){return u(n.utcMonday.count((0,n.utcYear)(e)-1,e),t,2)}function ve(e,t){return u(e.getUTCFullYear()%100,t,2)}function xe(e,t){return u((e=me(e)).getUTCFullYear()%100,t,2)}function ye(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function be(e,t){var i=e.getUTCDay();return u((e=i>=4||0===i?(0,n.utcThursday)(e):n.utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ce(){return"+0000"}function Se(){return"%"}function we(e){return+e}function Ie(e){return Math.floor(+e/1e3)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/band.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,point:()=>l});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/ordinal.js");function a(){var e,t,i=(0,r.default)().unknown(void 0),s=i.domain,l=i.range,c=0,d=1,p=!1,u=0,m=0,h=.5;function f(){var i=s().length,o=d<c,r=o?d:c,a=o?c:d;e=(a-r)/Math.max(1,i-u+2*m),p&&(e=Math.floor(e)),r+=(a-r-e*(i-u))*h,t=e*(1-u),p&&(r=Math.round(r),t=Math.round(t));var f=(0,n.range)(i).map(function(t){return r+e*t});return l(o?f.reverse():f)}return delete i.unknown,i.domain=function(e){return arguments.length?(s(e),f()):s()},i.range=function(e){return arguments.length?([c,d]=e,c=+c,d=+d,f()):[c,d]},i.rangeRound=function(e){return[c,d]=e,c=+c,d=+d,p=!0,f()},i.bandwidth=function(){return t},i.step=function(){return e},i.round=function(e){return arguments.length?(p=!!e,f()):p},i.padding=function(e){return arguments.length?(u=Math.min(1,m=+e),f()):u},i.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),f()):u},i.paddingOuter=function(e){return arguments.length?(m=+e,f()):m},i.align=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),f()):h},i.copy=function(){return a(s(),[c,d]).round(p).paddingInner(u).paddingOuter(m).align(h)},o.initRange.apply(f(),arguments)}function s(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return s(t())},e}function l(){return s(a.apply(null,arguments).paddingInner(1))}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{identity:()=>l,copy:()=>u,transformer:()=>m,default:()=>h});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/index.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/constant.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/number.js"),s=[0,1];function l(e){return e}function c(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:(0,r.default)(isNaN(t)?NaN:.5)}function d(e,t,i){var n=e[0],o=e[1],r=t[0],a=t[1];return o<n?(n=c(o,n),r=i(a,r)):(n=c(n,o),r=i(r,a)),function(e){return r(n(e))}}function p(e,t,i){var o=Math.min(e.length,t.length)-1,r=new Array(o),a=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)r[s]=c(e[s],e[s+1]),a[s]=i(t[s],t[s+1]);return function(t){var i=(0,n.bisect)(e,t,1,o)-1;return a[i](r[i](t))}}function u(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function m(){var e,t,i,n,r,c,u=s,m=s,h=o.interpolate,f=l;function g(){var e,t,i,o=Math.min(u.length,m.length);return f!==l&&(e=u[0],t=u[o-1],e>t&&(i=e,e=t,t=i),f=function(i){return Math.max(e,Math.min(t,i))}),n=o>2?p:d,r=c=null,v}function v(t){return null==t||isNaN(t=+t)?i:(r||(r=n(u.map(e),m,h)))(e(f(t)))}return v.invert=function(i){return f(t((c||(c=n(m,u.map(e),o.interpolateNumber)))(i)))},v.domain=function(e){return arguments.length?(u=Array.from(e,a.default),g()):u.slice()},v.range=function(e){return arguments.length?(m=Array.from(e),g()):m.slice()},v.rangeRound=function(e){return m=Array.from(e),h=o.interpolateRound,g()},v.clamp=function(e){return arguments.length?(f=!!e||l,g()):f!==l},v.interpolate=function(e){return arguments.length?(h=e,g()):h},v.unknown=function(e){return arguments.length?(i=e,v):i},function(i,n){return e=i,t=n,g()}}function h(){return m()(l,l)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/diverging.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u,divergingLog:()=>m,divergingSymlog:()=>h,divergingPow:()=>f,divergingSqrt:()=>g});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/log.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/sequential.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/symlog.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/pow.js");function p(){var e,t,i,r,a,s,l,c=0,d=.5,p=1,u=1,m=o.identity,h=!1;function f(e){return isNaN(e=+e)?l:(e=.5+((e=+s(e))-t)*(u*e<u*t?r:a),m(h?Math.max(0,Math.min(1,e)):e))}function g(e){return function(t){var i,o,r;return arguments.length?([i,o,r]=t,m=(0,n.piecewise)(e,[i,o,r]),f):[m(0),m(.5),m(1)]}}return f.domain=function(n){return arguments.length?([c,d,p]=n,e=s(c=+c),t=s(d=+d),i=s(p=+p),r=e===t?0:.5/(t-e),a=t===i?0:.5/(i-t),u=t<e?-1:1,f):[c,d,p]},f.clamp=function(e){return arguments.length?(h=!!e,f):h},f.interpolator=function(e){return arguments.length?(m=e,f):m},f.range=g(n.interpolate),f.rangeRound=g(n.interpolateRound),f.unknown=function(e){return arguments.length?(l=e,f):l},function(n){return s=n,e=n(c),t=n(d),i=n(p),r=e===t?0:.5/(t-e),a=t===i?0:.5/(i-t),u=t<e?-1:1,f}}function u(){var e=(0,a.linearish)(p()(o.identity));return e.copy=function(){return(0,l.copy)(e,u())},r.initInterpolator.apply(e,arguments)}function m(){var e=(0,s.loggish)(p()).domain([.1,1,10]);return e.copy=function(){return(0,l.copy)(e,m()).base(e.base())},r.initInterpolator.apply(e,arguments)}function h(){var e=(0,c.symlogish)(p());return e.copy=function(){return(0,l.copy)(e,h()).constant(e.constant())},r.initInterpolator.apply(e,arguments)}function f(){var e=(0,d.powish)(p());return e.copy=function(){return(0,l.copy)(e,f()).exponent(e.exponent())},r.initInterpolator.apply(e,arguments)}function g(){return f.apply(null,arguments).exponent(.5)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/identity.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/number.js");function r(e){var t;function i(e){return null==e||isNaN(e=+e)?t:e}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Array.from(t,o.default),i):e.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return r(e).unknown(t)},e=arguments.length?Array.from(e,o.default):[0,1],(0,n.linearish)(i)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scaleBand:()=>n.default,scalePoint:()=>n.point,scaleIdentity:()=>o.default,scaleLinear:()=>r.default,scaleLog:()=>a.default,scaleSymlog:()=>s.default,scaleOrdinal:()=>l.default,scaleImplicit:()=>l.implicit,scalePow:()=>c.default,scaleSqrt:()=>c.sqrt,scaleRadial:()=>d.default,scaleQuantile:()=>p.default,scaleQuantize:()=>u.default,scaleThreshold:()=>m.default,scaleTime:()=>h.default,scaleUtc:()=>f.default,scaleSequential:()=>g.default,scaleSequentialLog:()=>g.sequentialLog,scaleSequentialPow:()=>g.sequentialPow,scaleSequentialSqrt:()=>g.sequentialSqrt,scaleSequentialSymlog:()=>g.sequentialSymlog,scaleSequentialQuantile:()=>v.default,scaleDiverging:()=>x.default,scaleDivergingLog:()=>x.divergingLog,scaleDivergingPow:()=>x.divergingPow,scaleDivergingSqrt:()=>x.divergingSqrt,scaleDivergingSymlog:()=>x.divergingSymlog,tickFormat:()=>y.default});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/band.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/identity.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/log.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/symlog.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/ordinal.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/pow.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/radial.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/quantile.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/quantize.js"),m=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/threshold.js"),h=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/time.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/utcTime.js"),g=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/sequential.js"),v=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/sequentialQuantile.js"),x=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/diverging.js"),y=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/tickFormat.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js":(e,t,i)=>{"use strict";function n(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function o(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}i.r(t),i.d(t,{initRange:()=>n,initInterpolator:()=>o})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{linearish:()=>s,default:()=>l});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/tickFormat.js");function s(e){var t=e.domain;return e.ticks=function(e){var i=t();return(0,n.ticks)(i[0],i[i.length-1],null==e?10:e)},e.tickFormat=function(e,i){var n=t();return(0,a.default)(n[0],n[n.length-1],null==e?10:e,i)},e.nice=function(i){null==i&&(i=10);var o,r,a=t(),s=0,l=a.length-1,c=a[s],d=a[l],p=10;for(d<c&&(r=c,c=d,d=r,r=s,s=l,l=r);p-- >0;){if((r=(0,n.tickIncrement)(c,d,i))===o)return a[s]=c,a[l]=d,t(a);if(r>0)c=Math.floor(c/r)*r,d=Math.ceil(d/r)*r;else{if(!(r<0))break;c=Math.ceil(c*r)/r,d=Math.floor(d*r)/r}o=r}return e},e}function l(){var e=(0,o.default)();return e.copy=function(){return(0,o.copy)(e,l())},r.initRange.apply(e,arguments),s(e)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/log.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{loggish:()=>h,default:()=>f});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/index.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/nice.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function l(e){return Math.log(e)}function c(e){return Math.exp(e)}function d(e){return-Math.log(-e)}function p(e){return-Math.exp(-e)}function u(e){return isFinite(e)?+("1e"+e):e<0?0:e}function m(e){return function(t){return-e(-t)}}function h(e){var t,i,a=e(l,c),s=a.domain,h=10;function f(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(h),i=function(e){return 10===e?u:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(h),s()[0]<0?(t=m(t),i=m(i),e(d,p)):e(l,c),a}return a.base=function(e){return arguments.length?(h=+e,f()):h},a.domain=function(e){return arguments.length?(s(e),f()):s()},a.ticks=function(e){var o,r=s(),a=r[0],l=r[r.length-1];(o=l<a)&&(u=a,a=l,l=u);var c,d,p,u=t(a),m=t(l),f=null==e?10:+e,g=[];if(!(h%1)&&m-u<f){if(u=Math.floor(u),m=Math.ceil(m),a>0){for(;u<=m;++u)for(d=1,c=i(u);d<h;++d)if(!((p=c*d)<a)){if(p>l)break;g.push(p)}}else for(;u<=m;++u)for(d=h-1,c=i(u);d>=1;--d)if(!((p=c*d)<a)){if(p>l)break;g.push(p)}2*g.length<f&&(g=(0,n.ticks)(a,l,f))}else g=(0,n.ticks)(u,m,Math.min(m-u,f)).map(i);return o?g.reverse():g},a.tickFormat=function(e,n){if(null==n&&(n=10===h?".0e":","),"function"!=typeof n&&(n=(0,o.format)(n)),e===1/0)return n;null==e&&(e=10);var r=Math.max(1,h*e/a.ticks().length);return function(e){var o=e/i(Math.round(t(e)));return o*h<h-.5&&(o*=h),o<=r?n(e):""}},a.nice=function(){return s((0,r.default)(s(),{floor:function(e){return i(Math.floor(t(e)))},ceil:function(e){return i(Math.ceil(t(e)))}}))},a}function f(){var e=h((0,a.transformer)()).domain([1,10]);return e.copy=function(){return(0,a.copy)(e,f()).base(e.base())},s.initRange.apply(e,arguments),e}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/nice.js":(e,t,i)=>{"use strict";function n(e,t){var i,n=0,o=(e=e.slice()).length-1,r=e[n],a=e[o];return a<r&&(i=n,n=o,o=i,i=r,r=a,a=i),e[n]=t.floor(r),e[o]=t.ceil(a),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/number.js":(e,t,i)=>{"use strict";function n(e){return+e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/ordinal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{implicit:()=>o,default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");const o=Symbol("implicit");function r(){var e=new Map,t=[],i=[],a=o;function s(n){var r=n+"",s=e.get(r);if(!s){if(a!==o)return a;e.set(r,s=t.push(n))}return i[(s-1)%i.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Map;for(const n of i){const i=n+"";e.has(i)||e.set(i,t.push(n))}return s},s.range=function(e){return arguments.length?(i=Array.from(e),s):i.slice()},s.unknown=function(e){return arguments.length?(a=e,s):a},s.copy=function(){return r(t,i).unknown(a)},n.initRange.apply(s,arguments),s}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/pow.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{powish:()=>c,default:()=>d,sqrt:()=>p});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function a(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function l(e){return e<0?-e*e:e*e}function c(e){var t=e(o.identity,o.identity),i=1;return t.exponent=function(t){return arguments.length?1===(i=+t)?e(o.identity,o.identity):.5===i?e(s,l):e(a(i),a(1/i)):i},(0,n.linearish)(t)}function d(){var e=c((0,o.transformer)());return e.copy=function(){return(0,o.copy)(e,d()).exponent(e.exponent())},r.initRange.apply(e,arguments),e}function p(){return d.apply(null,arguments).exponent(.5)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/quantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function r(){var e,t=[],i=[],a=[];function s(){var e=0,o=Math.max(1,i.length);for(a=new Array(o-1);++e<o;)a[e-1]=(0,n.quantileSorted)(t,e/o);return l}function l(t){return null==t||isNaN(t=+t)?e:i[(0,n.bisect)(a,t)]}return l.invertExtent=function(e){var n=i.indexOf(e);return n<0?[NaN,NaN]:[n>0?a[n-1]:t[0],n<a.length?a[n]:t[t.length-1]]},l.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let i of e)null==i||isNaN(i=+i)||t.push(i);return t.sort(n.ascending),s()},l.range=function(e){return arguments.length?(i=Array.from(e),s()):i.slice()},l.unknown=function(t){return arguments.length?(e=t,l):e},l.quantiles=function(){return a.slice()},l.copy=function(){return r().domain(t).range(i).unknown(e)},o.initRange.apply(l,arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/quantize.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function a(){var e,t=0,i=1,s=1,l=[.5],c=[0,1];function d(t){return null!=t&&t<=t?c[(0,n.bisect)(l,t,0,s)]:e}function p(){var e=-1;for(l=new Array(s);++e<s;)l[e]=((e+1)*i-(e-s)*t)/(s+1);return d}return d.domain=function(e){return arguments.length?([t,i]=e,t=+t,i=+i,p()):[t,i]},d.range=function(e){return arguments.length?(s=(c=Array.from(e)).length-1,p()):c.slice()},d.invertExtent=function(e){var n=c.indexOf(e);return n<0?[NaN,NaN]:n<1?[t,l[0]]:n>=s?[l[s-1],i]:[l[n-1],l[n]]},d.unknown=function(t){return arguments.length?(e=t,d):d},d.thresholds=function(){return l.slice()},d.copy=function(){return a().domain([t,i]).range(c).unknown(e)},r.initRange.apply((0,o.linearish)(d),arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/radial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/number.js");function s(e){return Math.sign(e)*e*e}function l(){var e,t=(0,n.default)(),i=[0,1],c=!1;function d(i){var n=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(i));return isNaN(n)?e:c?Math.round(n):n}return d.invert=function(e){return t.invert(s(e))},d.domain=function(e){return arguments.length?(t.domain(e),d):t.domain()},d.range=function(e){return arguments.length?(t.range((i=Array.from(e,a.default)).map(s)),d):i.slice()},d.rangeRound=function(e){return d.range(e).round(!0)},d.round=function(e){return arguments.length?(c=!!e,d):c},d.clamp=function(e){return arguments.length?(t.clamp(e),d):t.clamp()},d.unknown=function(t){return arguments.length?(e=t,d):e},d.copy=function(){return l(t.domain(),i).round(c).clamp(t.clamp()).unknown(e)},o.initRange.apply(d,arguments),(0,r.linearish)(d)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/sequential.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{copy:()=>p,default:()=>u,sequentialLog:()=>m,sequentialSymlog:()=>h,sequentialPow:()=>f,sequentialSqrt:()=>g});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-interpolate/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/log.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/symlog.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/pow.js");function d(){var e,t,i,r,a,s=0,l=1,c=o.identity,d=!1;function p(t){return null==t||isNaN(t=+t)?a:c(0===i?.5:(t=(r(t)-e)*i,d?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var i,n;return arguments.length?([i,n]=t,c=e(i,n),p):[c(0),c(1)]}}return p.domain=function(n){return arguments.length?([s,l]=n,e=r(s=+s),t=r(l=+l),i=e===t?0:1/(t-e),p):[s,l]},p.clamp=function(e){return arguments.length?(d=!!e,p):d},p.interpolator=function(e){return arguments.length?(c=e,p):c},p.range=u(n.interpolate),p.rangeRound=u(n.interpolateRound),p.unknown=function(e){return arguments.length?(a=e,p):a},function(n){return r=n,e=n(s),t=n(l),i=e===t?0:1/(t-e),p}}function p(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function u(){var e=(0,a.linearish)(d()(o.identity));return e.copy=function(){return p(e,u())},r.initInterpolator.apply(e,arguments)}function m(){var e=(0,s.loggish)(d()).domain([1,10]);return e.copy=function(){return p(e,m()).base(e.base())},r.initInterpolator.apply(e,arguments)}function h(){var e=(0,l.symlogish)(d());return e.copy=function(){return p(e,h()).constant(e.constant())},r.initInterpolator.apply(e,arguments)}function f(){var e=(0,c.powish)(d());return e.copy=function(){return p(e,f()).exponent(e.exponent())},r.initInterpolator.apply(e,arguments)}function g(){return f.apply(null,arguments).exponent(.5)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/sequentialQuantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function a(){var e=[],t=o.identity;function i(i){if(null!=i&&!isNaN(i=+i))return t(((0,n.bisect)(e,i,1)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let i of t)null==i||isNaN(i=+i)||e.push(i);return e.sort(n.ascending),i},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.range=function(){return e.map((i,n)=>t(n/(e.length-1)))},i.quantiles=function(t){return Array.from({length:t+1},(i,o)=>(0,n.quantile)(e,o/t))},i.copy=function(){return a(t).domain(e)},r.initInterpolator.apply(i,arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/symlog.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{symlogish:()=>l,default:()=>c});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/linear.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function a(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function s(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function l(e){var t=1,i=e(a(t),s(t));return i.constant=function(i){return arguments.length?e(a(t=+i),s(t)):t},(0,n.linearish)(i)}function c(){var e=l((0,o.transformer)());return e.copy=function(){return(0,o.copy)(e,c()).constant(e.constant())},r.initRange.apply(e,arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/threshold.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function r(){var e,t=[.5],i=[0,1],a=1;function s(o){return null!=o&&o<=o?i[(0,n.bisect)(t,o,0,a)]:e}return s.domain=function(e){return arguments.length?(t=Array.from(e),a=Math.min(t.length,i.length-1),s):t.slice()},s.range=function(e){return arguments.length?(i=Array.from(e),a=Math.min(t.length,i.length-1),s):i.slice()},s.invertExtent=function(e){var n=i.indexOf(e);return[t[n-1],t[n]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return r().domain(t).range(i).unknown(e)},o.initRange.apply(s,arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/tickFormat.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-format/src/index.js");function r(e,t,i,r){var a,s=(0,n.tickStep)(e,t,i);switch((r=(0,o.formatSpecifier)(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=(0,o.precisionPrefix)(s,l))||(r.precision=a),(0,o.formatPrefix)(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=(0,o.precisionRound)(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=(0,o.precisionFixed)(s))||(r.precision=a-2*("%"===r.type))}return(0,o.format)(r)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/time.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{calendar:()=>d,default:()=>p});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/index.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/continuous.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/nice.js");function l(e){return new Date(e)}function c(e){return e instanceof Date?+e:+new Date(+e)}function d(e,t,i,n,o,a,p,u,m,h){var f=(0,r.default)(),g=f.invert,v=f.domain,x=h(".%L"),y=h(":%S"),b=h("%I:%M"),C=h("%I %p"),S=h("%a %d"),w=h("%b %d"),I=h("%B"),_=h("%Y");function D(e){return(m(e)<e?x:u(e)<e?y:p(e)<e?b:a(e)<e?C:n(e)<e?o(e)<e?S:w:i(e)<e?I:_)(e)}return f.invert=function(e){return new Date(g(e))},f.domain=function(e){return arguments.length?v(Array.from(e,c)):v().map(l)},f.ticks=function(t){var i=v();return e(i[0],i[i.length-1],null==t?10:t)},f.tickFormat=function(e,t){return null==t?D:h(t)},f.nice=function(e){var i=v();return e&&"function"==typeof e.range||(e=t(i[0],i[i.length-1],null==e?10:e)),e?v((0,s.default)(i,e)):f},f.copy=function(){return(0,r.copy)(f,d(e,t,i,n,o,a,p,u,m,h))},f}function p(){return a.initRange.apply(d(n.timeTicks,n.timeTickInterval,n.timeYear,n.timeMonth,n.timeWeek,n.timeDay,n.timeHour,n.timeMinute,n.timeSecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/utcTime.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/node_modules/d3-time-format/src/index.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/time.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-scale/src/init.js");function s(){return a.initRange.apply((0,r.calendar)(n.utcTicks,n.utcTickInterval,n.utcYear,n.utcMonth,n.utcWeek,n.utcDay,n.utcHour,n.utcMinute,n.utcSecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/day.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,days:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.durationMinute)/o.durationDay,e=>e.getDate()-1);const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{durationSecond:()=>n,durationMinute:()=>o,durationHour:()=>r,durationDay:()=>a,durationWeek:()=>s,durationMonth:()=>l,durationYear:()=>c});const n=1e3,o=60*n,r=60*o,a=24*r,s=7*a,l=30*a,c=365*a},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/hour.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hours:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.durationSecond-e.getMinutes()*o.durationMinute)},function(e,t){e.setTime(+e+t*o.durationHour)},function(e,t){return(t-e)/o.durationHour},function(e){return e.getHours()});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeInterval:()=>n.default,timeMillisecond:()=>o.default,timeMilliseconds:()=>o.milliseconds,utcMillisecond:()=>o.default,utcMilliseconds:()=>o.milliseconds,timeSecond:()=>r.default,timeSeconds:()=>r.seconds,utcSecond:()=>r.default,utcSeconds:()=>r.seconds,timeMinute:()=>a.default,timeMinutes:()=>a.minutes,timeHour:()=>s.default,timeHours:()=>s.hours,timeDay:()=>l.default,timeDays:()=>l.days,timeWeek:()=>c.sunday,timeWeeks:()=>c.sundays,timeSunday:()=>c.sunday,timeSundays:()=>c.sundays,timeMonday:()=>c.monday,timeMondays:()=>c.mondays,timeTuesday:()=>c.tuesday,timeTuesdays:()=>c.tuesdays,timeWednesday:()=>c.wednesday,timeWednesdays:()=>c.wednesdays,timeThursday:()=>c.thursday,timeThursdays:()=>c.thursdays,timeFriday:()=>c.friday,timeFridays:()=>c.fridays,timeSaturday:()=>c.saturday,timeSaturdays:()=>c.saturdays,timeMonth:()=>d.default,timeMonths:()=>d.months,timeYear:()=>p.default,timeYears:()=>p.years,utcMinute:()=>u.default,utcMinutes:()=>u.utcMinutes,utcHour:()=>m.default,utcHours:()=>m.utcHours,utcDay:()=>h.default,utcDays:()=>h.utcDays,utcWeek:()=>f.utcSunday,utcWeeks:()=>f.utcSundays,utcSunday:()=>f.utcSunday,utcSundays:()=>f.utcSundays,utcMonday:()=>f.utcMonday,utcMondays:()=>f.utcMondays,utcTuesday:()=>f.utcTuesday,utcTuesdays:()=>f.utcTuesdays,utcWednesday:()=>f.utcWednesday,utcWednesdays:()=>f.utcWednesdays,utcThursday:()=>f.utcThursday,utcThursdays:()=>f.utcThursdays,utcFriday:()=>f.utcFriday,utcFridays:()=>f.utcFridays,utcSaturday:()=>f.utcSaturday,utcSaturdays:()=>f.utcSaturdays,utcMonth:()=>g.default,utcMonths:()=>g.utcMonths,utcYear:()=>v.default,utcYears:()=>v.utcYears,utcTicks:()=>x.utcTicks,utcTickInterval:()=>x.utcTickInterval,timeTicks:()=>x.timeTicks,timeTickInterval:()=>x.timeTickInterval});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/millisecond.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/second.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/minute.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/hour.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/day.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/week.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/month.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/year.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMinute.js"),m=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcHour.js"),h=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcDay.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcWeek.js"),g=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMonth.js"),v=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcYear.js"),x=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/ticks.js")},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=new Date,o=new Date;function r(e,t,i,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(i){return e(i=new Date(i-1)),t(i,1),e(i),i},s.round=function(e){var t=s(e),i=s.ceil(e);return e-t<i-e?t:i},s.offset=function(e,i){return t(e=new Date(+e),null==i?1:Math.floor(i)),e},s.range=function(i,n,o){var r,a=[];if(i=s.ceil(i),o=null==o?1:Math.floor(o),!(i<n&&o>0))return a;do{a.push(r=new Date(+i)),t(i,o),e(i)}while(r<i&&i<n);return a},s.filter=function(i){return r(function(t){if(t>=t)for(;e(t),!i(t);)t.setTime(t-1)},function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!i(e););else for(;--n>=0;)for(;t(e,1),!i(e););})},i&&(s.count=function(t,r){return n.setTime(+t),o.setTime(+r),e(n),e(o),Math.floor(i(n,o))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/millisecond.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,milliseconds:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,n.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,i){t.setTime(+t+i*e)},function(t,i){return(i-t)/e}):o:null};const r=o;var a=o.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/minute.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,minutes:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.durationSecond)},function(e,t){e.setTime(+e+t*o.durationMinute)},function(e,t){return(t-e)/o.durationMinute},function(e){return e.getMinutes()});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/month.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,months:()=>r});var n=(0,i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js").default)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()});const o=n;var r=n.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/second.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,seconds:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*o.durationSecond)},function(e,t){return(t-e)/o.durationSecond},function(e){return e.getUTCSeconds()});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/ticks.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{utcTicks:()=>b,utcTickInterval:()=>C,timeTicks:()=>S,timeTickInterval:()=>w});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-array/src/index.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/millisecond.js"),a=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/second.js"),s=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/minute.js"),l=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/hour.js"),c=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/day.js"),d=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/week.js"),p=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/month.js"),u=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/year.js"),m=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMinute.js"),h=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcHour.js"),f=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcDay.js"),g=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcWeek.js"),v=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMonth.js"),x=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcYear.js");function y(e,t,i,s,l,c){const d=[[a.default,1,o.durationSecond],[a.default,5,5*o.durationSecond],[a.default,15,15*o.durationSecond],[a.default,30,30*o.durationSecond],[c,1,o.durationMinute],[c,5,5*o.durationMinute],[c,15,15*o.durationMinute],[c,30,30*o.durationMinute],[l,1,o.durationHour],[l,3,3*o.durationHour],[l,6,6*o.durationHour],[l,12,12*o.durationHour],[s,1,o.durationDay],[s,2,2*o.durationDay],[i,1,o.durationWeek],[t,1,o.durationMonth],[t,3,3*o.durationMonth],[e,1,o.durationYear]];function p(t,i,a){const s=Math.abs(i-t)/a,l=(0,n.bisector)(([,,e])=>e).right(d,s);if(l===d.length)return e.every((0,n.tickStep)(t/o.durationYear,i/o.durationYear,a));if(0===l)return r.default.every(Math.max((0,n.tickStep)(t,i,a),1));const[c,p]=d[s/d[l-1][2]<d[l][2]/s?l-1:l];return c.every(p)}return[function(e,t,i){const n=t<e;n&&([e,t]=[t,e]);const o=i&&"function"==typeof i.range?i:p(e,t,i),r=o?o.range(e,+t+1):[];return n?r.reverse():r},p]}const[b,C]=y(x.default,v.default,g.utcSunday,f.default,h.default,m.default),[S,w]=y(u.default,p.default,d.sunday,c.default,l.default,s.default)},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcDay.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcDays:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/o.durationDay},function(e){return e.getUTCDate()-1});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcHour.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcHours:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o.durationHour)},function(e,t){return(t-e)/o.durationHour},function(e){return e.getUTCHours()});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMinute.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcMinutes:()=>s});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*o.durationMinute)},function(e,t){return(t-e)/o.durationMinute},function(e){return e.getUTCMinutes()});const a=r;var s=r.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcMonth.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,utcMonths:()=>r});var n=(0,i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js").default)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()});const o=n;var r=n.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcWeek.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{utcSunday:()=>a,utcMonday:()=>s,utcTuesday:()=>l,utcWednesday:()=>c,utcThursday:()=>d,utcFriday:()=>p,utcSaturday:()=>u,utcSundays:()=>m,utcMondays:()=>h,utcTuesdays:()=>f,utcWednesdays:()=>g,utcThursdays:()=>v,utcFridays:()=>x,utcSaturdays:()=>y});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js");function r(e){return(0,n.default)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/o.durationWeek})}var a=r(0),s=r(1),l=r(2),c=r(3),d=r(4),p=r(5),u=r(6),m=a.range,h=s.range,f=l.range,g=c.range,v=d.range,x=p.range,y=u.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/utcYear.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,utcYears:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,n.default)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*e)}):null};const r=o;var a=o.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/week.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{sunday:()=>a,monday:()=>s,tuesday:()=>l,wednesday:()=>c,thursday:()=>d,friday:()=>p,saturday:()=>u,sundays:()=>m,mondays:()=>h,tuesdays:()=>f,wednesdays:()=>g,thursdays:()=>v,fridays:()=>x,saturdays:()=>y});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/duration.js");function r(e){return(0,n.default)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.durationMinute)/o.durationWeek})}var a=r(0),s=r(1),l=r(2),c=r(3),d=r(4),p=r(5),u=r(6),m=a.range,h=s.range,f=l.range,g=c.range,v=d.range,x=p.range,y=u.range},"./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/year.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,years:()=>a});var n=i("./node_modules/@swimlane/ngx-charts/node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,n.default)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*e)}):null};const r=o;var a=o.range},"./node_modules/@swimlane/ngx-graph/fesm2015/swimlane-ngx-graph.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{Alignment:()=>H,ColaForceDirectedLayout:()=>ee,D3ForceDirectedLayout:()=>J,DagreClusterLayout:()=>Y,DagreLayout:()=>W,DagreNodesOnlyLayout:()=>Q,GraphComponent:()=>se,GraphModule:()=>ce,MiniMapPosition:()=>oe,MouseWheelDirective:()=>le,NgxGraphModule:()=>de,Orientation:()=>X,PanningAxis:()=>ne,toD3Node:()=>K,toNode:()=>Z,"\u0275a":()=>ie,"\u0275b":()=>ae});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/tslib/tslib.es6.js"),r=i("./node_modules/@swimlane/ngx-charts/fesm2015/swimlane-ngx-charts.js"),a=i("./node_modules/d3-selection/src/index.js"),s=i("./node_modules/d3-shape/src/index.js"),l=i("./node_modules/d3-ease/src/index.js"),c=(i("./node_modules/d3-transition/src/index.js"),i("rxjs")),d=i("./node_modules/rxjs/_esm2015/operators/index.js"),p=i("./node_modules/transformation-matrix/build-es/index.js"),u=i("./node_modules/dagre/index.js"),m=i("./node_modules/d3-force/src/index.js"),h=i("./node_modules/webcola/dist/index.js"),f=i("./node_modules/d3-dispatch/src/index.js"),g=i("./node_modules/d3-timer/src/index.js"),v=i("./node_modules/@angular/common/fesm2015/common.js");const x=["linkTemplate"],y=["nodeTemplate"],b=["clusterTemplate"],C=["defsTemplate"],S=["miniMapNodeTemplate"],w=["nodeElement"],I=["linkElement"];function _(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,13)),2&e){const e=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",e.defsTemplate)}}function D(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"path",14)),2&e){const e=t.$implicit;n["\u0275\u0275attribute"]("d",e.textPath)("id",e.id)}}const R=function(e){return{$implicit:e}};function A(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,19)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",t.clusterTemplate)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,R,e))}}function T(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",20),n["\u0275\u0275element"](1,"rect"),n["\u0275\u0275elementStart"](2,"text",21),n["\u0275\u0275text"](3),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",e.dimension.width)("height",e.dimension.height)("fill",null==e.data?null:e.data.color),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("x",10)("y",e.dimension.height/2),n["\u0275\u0275advance"](1),n["\u0275\u0275textInterpolate1"](" ",e.label," ")}}function F(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",15,16),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onClick(t)}),n["\u0275\u0275template"](2,A,1,4,"ng-container",17),n["\u0275\u0275template"](3,T,4,6,"g",18),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275classProp"]("old-node",i.animate&&i.oldClusters.has(e.id)),n["\u0275\u0275property"]("id",e.id),n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.clusterTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.clusterTemplate)}}function E(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,19)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",t.linkTemplate)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,R,e))}}function M(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"path",25)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275attribute"]("d",e.line)}}function O(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",22,23),n["\u0275\u0275template"](2,E,1,4,"ng-container",17),n["\u0275\u0275template"](3,M,1,1,"path",24),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("id",e.id),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.linkTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.linkTemplate)}}function k(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,19)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",t.nodeTemplate)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,R,e))}}function j(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"circle",29)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit;n["\u0275\u0275attribute"]("cx",e.dimension.width/2)("cy",e.dimension.height/2)("fill",null==e.data?null:e.data.color)}}function P(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",26,27),n["\u0275\u0275listener"]("click",function(){const t=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onClick(t)})("mousedown",function(t){const i=n["\u0275\u0275restoreView"](e).$implicit;return n["\u0275\u0275nextContext"](2).onNodeMouseDown(t,i)}),n["\u0275\u0275template"](2,k,1,4,"ng-container",17),n["\u0275\u0275template"](3,j,1,3,"circle",28),n["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275classProp"]("old-node",i.animate&&i.oldNodes.has(e.id)),n["\u0275\u0275property"]("id",e.id),n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.nodeTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.nodeTemplate)}}function N(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",3),n["\u0275\u0275listener"]("touchstart",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onTouchStart(t)})("touchend",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onTouchEnd(t)}),n["\u0275\u0275elementStart"](1,"defs"),n["\u0275\u0275template"](2,_,1,1,"ng-container",4),n["\u0275\u0275template"](3,D,1,2,"path",5),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](4,"rect",6),n["\u0275\u0275listener"]("mousedown",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().isPanning=!0}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275projection"](5),n["\u0275\u0275elementStart"](6,"g",7),n["\u0275\u0275template"](7,F,4,6,"g",8),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](8,"g",9),n["\u0275\u0275template"](9,O,4,3,"g",10),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](10,"g",11),n["\u0275\u0275template"](11,P,4,6,"g",12),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",e.defsTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.graph.edges),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",100*e.dims.width)("height",100*e.dims.height)("transform","translate("+50*(-e.dims.width||0)+","+50*(-e.dims.height||0)+")"),n["\u0275\u0275advance"](3),n["\u0275\u0275property"]("ngForOf",e.graph.clusters)("ngForTrackBy",e.trackNodeBy),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.graph.edges)("ngForTrackBy",e.trackLinkBy),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy)}}function V(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,19)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",t.miniMapNodeTemplate)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,R,e))}}function L(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementContainer"](0,19)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275property"]("ngTemplateOutlet",t.nodeTemplate)("ngTemplateOutletContext",n["\u0275\u0275pureFunction1"](2,R,e))}}function B(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275element"](0,"circle",29)),2&e){const e=n["\u0275\u0275nextContext"]().$implicit,t=n["\u0275\u0275nextContext"](2);n["\u0275\u0275attribute"]("cx",e.dimension.width/2/t.minimapScaleCoefficient)("cy",e.dimension.height/2/t.minimapScaleCoefficient)("fill",null==e.data?null:e.data.color)}}function $(e,t){if(1&e&&(n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",35,27),n["\u0275\u0275template"](2,V,1,4,"ng-container",17),n["\u0275\u0275template"](3,L,1,4,"ng-container",17),n["\u0275\u0275template"](4,B,1,3,"circle",28),n["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,i=n["\u0275\u0275nextContext"](2);n["\u0275\u0275classProp"]("old-node",i.animate&&i.oldNodes.has(e.id)),n["\u0275\u0275property"]("id",e.id),n["\u0275\u0275attribute"]("transform",e.transform),n["\u0275\u0275advance"](2),n["\u0275\u0275property"]("ngIf",i.miniMapNodeTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.miniMapNodeTemplate&&i.nodeTemplate),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",!i.nodeTemplate&&!i.miniMapNodeTemplate)}}function G(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](0,"g",30),n["\u0275\u0275elementStart"](1,"rect",31),n["\u0275\u0275listener"]("mousedown",function(t){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onMinimapPanTo(t)}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](2,"g"),n["\u0275\u0275elementStart"](3,"g",32),n["\u0275\u0275template"](4,$,5,7,"g",33),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementStart"](5,"rect",34),n["\u0275\u0275listener"]("mousedown",function(){n["\u0275\u0275restoreView"](e);return n["\u0275\u0275nextContext"]().onMinimapDragMouseDown()}),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"](),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]();n["\u0275\u0275attribute"]("transform",e.minimapTransform)("clip-path","url(#"+e.minimapClipPathId+")"),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("transform","translate("+-e.minimapOffsetX/e.minimapScaleCoefficient+"px,"+-e.minimapOffsetY/e.minimapScaleCoefficient+"px)"),n["\u0275\u0275advance"](1),n["\u0275\u0275styleProp"]("transform","scale("+1/e.minimapScaleCoefficient+")"),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",e.graph.nodes)("ngForTrackBy",e.trackNodeBy),n["\u0275\u0275advance"](1),n["\u0275\u0275classProp"]("panning",e.isMinimapPanning),n["\u0275\u0275attribute"]("transform","translate("+e.panOffsetX/e.zoomLevel/-e.minimapScaleCoefficient+","+e.panOffsetY/e.zoomLevel/-e.minimapScaleCoefficient+")")("width",e.width/e.minimapScaleCoefficient/e.zoomLevel)("height",e.height/e.minimapScaleCoefficient/e.zoomLevel)}}const z=function(e,t){return[e,t]},U={};function q(){let e=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return e=`a${e}`,U[e]?q():(U[e]=!0,e)}var X,H;!function(e){e.LEFT_TO_RIGHT="LR",e.RIGHT_TO_LEFT="RL",e.TOP_TO_BOTTOM="TB",e.BOTTOM_TO_TOM="BT"}(X||(X={})),function(e){e.CENTER="C",e.UP_LEFT="UL",e.UP_RIGHT="UR",e.DOWN_LEFT="DL",e.DOWN_RIGHT="DR"}(H||(H={}));class W{constructor(){this.defaultSettings={orientation:X.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(e){this.createDagreGraph(e),(0,u.layout)(this.dagreGraph),e.edgeLabels=this.dagreGraph._edgeLabels;for(const t in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[t],n=e.nodes.find(e=>e.id===i.id);n.position={x:i.x,y:i.y},n.dimension={width:i.width,height:i.height}}return e}updateEdge(e,t){const i=e.nodes.find(e=>e.id===t.source),n=e.nodes.find(e=>e.id===t.target),o=i.position.y<=n.position.y?-1:1,r={x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},a={x:n.position.x,y:n.position.y+o*(n.dimension.height/2)};return t.points=[r,a],e}createDagreGraph(e){const t=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new u.graphlib.Graph({compound:t.compound,multigraph:t.multigraph}),this.dagreGraph.setGraph({rankdir:t.orientation,marginx:t.marginX,marginy:t.marginY,edgesep:t.edgePadding,ranksep:t.rankPadding,nodesep:t.nodePadding,align:t.align,acyclicer:t.acyclicer,ranker:t.ranker,multigraph:t.multigraph,compound:t.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=e.nodes.map(e=>{const t=Object.assign({},e);return t.width=e.dimension.width,t.height=e.dimension.height,t.x=e.position.x,t.y=e.position.y,t}),this.dagreEdges=e.edges.map(e=>{const t=Object.assign({},e);return t.id||(t.id=q()),t});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)t.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}}class Y{constructor(){this.defaultSettings={orientation:X.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(e){this.createDagreGraph(e),(0,u.layout)(this.dagreGraph),e.edgeLabels=this.dagreGraph._edgeLabels;const t=e=>{const t=this.dagreGraph._nodes[e.id];return Object.assign(Object.assign({},e),{position:{x:t.x,y:t.y},dimension:{width:t.width,height:t.height}})};return e.clusters=(e.clusters||[]).map(t),e.nodes=e.nodes.map(t),e}updateEdge(e,t){const i=e.nodes.find(e=>e.id===t.source),n=e.nodes.find(e=>e.id===t.target),o=i.position.y<=n.position.y?-1:1,r={x:i.position.x,y:i.position.y-o*(i.dimension.height/2)},a={x:n.position.x,y:n.position.y+o*(n.dimension.height/2)};return t.points=[r,a],e}createDagreGraph(e){const t=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new u.graphlib.Graph({compound:t.compound,multigraph:t.multigraph}),this.dagreGraph.setGraph({rankdir:t.orientation,marginx:t.marginX,marginy:t.marginY,edgesep:t.edgePadding,ranksep:t.rankPadding,nodesep:t.nodePadding,align:t.align,acyclicer:t.acyclicer,ranker:t.ranker,multigraph:t.multigraph,compound:t.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=e.nodes.map(e=>{const t=Object.assign({},e);return t.width=e.dimension.width,t.height=e.dimension.height,t.x=e.position.x,t.y=e.position.y,t}),this.dagreClusters=e.clusters||[],this.dagreEdges=e.edges.map(e=>{const t=Object.assign({},e);return t.id||(t.id=q()),t});for(const i of this.dagreNodes)this.dagreGraph.setNode(i.id,i);for(const i of this.dagreClusters)this.dagreGraph.setNode(i.id,i),i.childNodeIds.forEach(e=>{this.dagreGraph.setParent(e,i.id)});for(const i of this.dagreEdges)t.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}}class Q{constructor(){this.defaultSettings={orientation:X.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(e){this.createDagreGraph(e),(0,u.layout)(this.dagreGraph),e.edgeLabels=this.dagreGraph._edgeLabels;for(const t in this.dagreGraph._nodes){const i=this.dagreGraph._nodes[t],n=e.nodes.find(e=>e.id===i.id);n.position={x:i.x,y:i.y},n.dimension={width:i.width,height:i.height}}for(const t of e.edges)this.updateEdge(e,t);return e}updateEdge(e,t){const i=e.nodes.find(e=>e.id===t.source),n=e.nodes.find(e=>e.id===t.target),o="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",r="y"===o?"x":"y",a="y"===o?"height":"width",s=i.position[o]<=n.position[o]?-1:1,l={[r]:i.position[r],[o]:i.position[o]-s*(i.dimension[a]/2)},c={[r]:n.position[r],[o]:n.position[o]+s*(n.dimension[a]/2)},d=this.settings.curveDistance||this.defaultSettings.curveDistance;t.points=[l,{[r]:l[r],[o]:l[o]-s*d},{[r]:c[r],[o]:c[o]+s*d},c];const p=`${t.source}\x01${t.target}\x01\0`,u=e.edgeLabels[p];return u&&(u.points=t.points),e}createDagreGraph(e){const t=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new u.graphlib.Graph({compound:t.compound,multigraph:t.multigraph}),this.dagreGraph.setGraph({rankdir:t.orientation,marginx:t.marginX,marginy:t.marginY,edgesep:t.edgePadding,ranksep:t.rankPadding,nodesep:t.nodePadding,align:t.align,acyclicer:t.acyclicer,ranker:t.ranker,multigraph:t.multigraph,compound:t.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=e.nodes.map(e=>{const t=Object.assign({},e);return t.width=e.dimension.width,t.height=e.dimension.height,t.x=e.position.x,t.y=e.position.y,t}),this.dagreEdges=e.edges.map(e=>{const t=Object.assign({},e);return t.id||(t.id=q()),t});for(const i of this.dagreNodes)i.width||(i.width=20),i.height||(i.height=30),this.dagreGraph.setNode(i.id,i);for(const i of this.dagreEdges)t.multigraph?this.dagreGraph.setEdge(i.source,i.target,i,i.id):this.dagreGraph.setEdge(i.source,i.target);return this.dagreGraph}}function K(e){return"string"==typeof e?{id:e,x:0,y:0}:e}class J{constructor(){this.defaultSettings={force:(0,m.forceSimulation)().force("charge",(0,m.forceManyBody)().strength(-150)).force("collide",(0,m.forceCollide)(5)),forceLink:(0,m.forceLink)().id(e=>e.id).distance(()=>100)},this.settings={},this.outputGraph$=new c.Subject}run(e){return this.inputGraph=e,this.d3Graph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign({},e))],edges:[...this.inputGraph.edges.map(e=>Object.assign({},e))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(e,t){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.nodes(this.d3Graph.nodes).force("link",i.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(e){return this.outputGraph.nodes=this.d3Graph.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||q(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(e=>Object.assign(Object.assign({},e),{source:K(e.source).id,target:K(e.target).id,points:[{x:K(e.source).x,y:K(e.source).y},{x:K(e.target).x,y:K(e.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(e,t){this.settings.force.alphaTarget(.3).restart();const i=this.d3Graph.nodes.find(t=>t.id===e.id);i&&(this.draggingStart={x:t.x-i.x,y:t.y-i.y},i.fx=t.x-this.draggingStart.x,i.fy=t.y-this.draggingStart.y)}onDrag(e,t){if(!e)return;const i=this.d3Graph.nodes.find(t=>t.id===e.id);i&&(i.fx=t.x-this.draggingStart.x,i.fy=t.y-this.draggingStart.y)}onDragEnd(e,t){if(!e)return;const i=this.d3Graph.nodes.find(t=>t.id===e.id);i&&(this.settings.force.alphaTarget(0),i.fx=void 0,i.fy=void 0)}}function Z(e,t){return"number"==typeof t?e[t]:t}class ee{constructor(){this.defaultSettings={force:(0,h.d3adaptor)(Object.assign(Object.assign(Object.assign({},f),m),g)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600,xOffset:0}},this.settings={},this.outputGraph$=new c.Subject}run(e){return this.inputGraph=e,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(e=>Object.assign(Object.assign({},e),{width:e.dimension?e.dimension.width:20,height:e.dimension?e.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(e=>({padding:5,groups:e.childNodeIds.map(e=>this.inputGraph.clusters.findIndex(t=>t.id===e)).filter(e=>e>=0),leaves:e.childNodeIds.map(e=>this.inputGraph.nodes.findIndex(t=>t.id===e)).filter(e=>e>=0)}))],links:[...this.inputGraph.edges.map(e=>{const t=this.inputGraph.nodes.findIndex(t=>e.source===t.id),i=this.inputGraph.nodes.findIndex(t=>e.target===t.id);if(-1!==t&&-1!==i)return Object.assign(Object.assign({},e),{source:t,target:i})}).filter(e=>!!e)],groupLinks:[...this.inputGraph.edges.map(e=>{const t=this.inputGraph.nodes.findIndex(t=>e.source===t.id),i=this.inputGraph.nodes.findIndex(t=>e.target===t.id);if(!(t>=0&&i>=0))return e}).filter(e=>!!e)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(e,t){const i=Object.assign({},this.defaultSettings,this.settings);return i.force&&i.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(e){return this.outputGraph.nodes=e.nodes.map(e=>Object.assign(Object.assign({},e),{id:e.id||q(),position:{x:e.x,y:e.y},dimension:{width:e.dimension&&e.dimension.width||20,height:e.dimension&&e.dimension.height||20},transform:`translate(${e.x-(e.dimension&&e.dimension.width||20)/2||0}, ${e.y-(e.dimension&&e.dimension.height||20)/2||0})`})),this.outputGraph.edges=e.links.map(t=>{const i=Z(e.nodes,t.source),n=Z(e.nodes,t.target);return Object.assign(Object.assign({},t),{source:i.id,target:n.id,points:[i.bounds.rayIntersection(n.bounds.cx(),n.bounds.cy()),n.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]})}).concat(e.groupLinks.map(t=>{const i=e.nodes.find(e=>e.id===t.source),n=e.nodes.find(e=>e.id===t.target),o=i||e.groups.find(e=>e.id===t.source),r=n||e.groups.find(e=>e.id===t.target);return Object.assign(Object.assign({},t),{source:o.id,target:r.id,points:[o.bounds.rayIntersection(r.bounds.cx(),r.bounds.cy()),r.bounds.rayIntersection(o.bounds.cx(),o.bounds.cy())]})})),this.outputGraph.clusters=e.groups.map((e,t)=>{const i=this.inputGraph.clusters[t];return Object.assign(Object.assign({},i),{dimension:{width:e.bounds?e.bounds.width():20,height:e.bounds?e.bounds.height():20},position:{x:e.bounds?e.bounds.x+e.bounds.width()/2:0,y:e.bounds?e.bounds.y+e.bounds.height()/2:0}})}),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(e,t){const i=this.outputGraph.nodes.findIndex(t=>t.id===e.id),n=this.internalGraph.nodes[i];n&&(this.draggingStart={x:n.x-t.x,y:n.y-t.y},n.fixed=1,this.settings.force.start())}onDrag(e,t){if(!e)return;const i=this.outputGraph.nodes.findIndex(t=>t.id===e.id),n=this.internalGraph.nodes[i];n&&(n.x=this.draggingStart.x+t.x,n.y=this.draggingStart.y+t.y)}onDragEnd(e,t){if(!e)return;const i=this.outputGraph.nodes.findIndex(t=>t.id===e.id),n=this.internalGraph.nodes[i];n&&(n.fixed=0)}}const te={dagre:W,dagreCluster:Y,dagreNodesOnly:Q,d3ForceDirected:J,colaForceDirected:ee};class ie{getLayout(e){if(te[e])return new te[e];throw new Error(`Unknown layout type '${e}'`)}}var ne,oe;function re(e,t,i){let n,o,r;i=i||{};let a=null,s=0;function l(){s=!1===i.leading?0:+new Date,a=null,r=e.apply(n,o)}return function(){const c=+new Date;s||!1!==i.leading||(s=c);const d=t-(c-s);return n=this,o=arguments,d<=0?(clearTimeout(a),a=null,s=c,r=e.apply(n,o)):a||!1===i.trailing||(a=setTimeout(l,d)),r}}function ae(e,t){return function(i,n,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,n,{configurable:!0,enumerable:o.enumerable,value:re(o.value,e,t)}),this[n]}}}}ie.\u0275fac=function(e){return new(e||ie)},ie.\u0275prov=n["\u0275\u0275defineInjectable"]({token:ie,factory:ie.\u0275fac}),function(e){e.Both="both",e.Horizontal="horizontal",e.Vertical="vertical"}(ne||(ne={})),function(e){e.UpperLeft="UpperLeft",e.UpperRight="UpperRight"}(oe||(oe={}));class se extends r.BaseChartComponent{constructor(e,t,i,o){super(e,t,i),this.el=e,this.zone=t,this.cd=i,this.layoutService=o,this.legend=!1,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=ne.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=oe.UpperRight,this.activate=new n.EventEmitter,this.deactivate=new n.EventEmitter,this.zoomChange=new n.EventEmitter,this.clickHandler=new n.EventEmitter,this.isMouseMoveCalled=!1,this.graphSubscription=new c.Subscription,this.subscriptions=[],this.margin=[0,0,0,0],this.results=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix=(0,p.identity)(),this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=e=>e.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(e){this.zoomTo(Number(e))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(e){this.panTo(Number(e),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(e){this.panTo(null,Number(e))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(e=>{this.panToNodeId(e)})),this.minimapClipPathId=`minimapClip${q()}`}ngOnChanges(e){const{layout:t,layoutSettings:i,nodes:n,clusters:o,links:r}=e;this.setLayout(this.layout),i&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(e){this.initialized=!1,e||(e="dagre"),"string"==typeof e&&(this.layout=this.layoutService.getLayout(e),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(e){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=e)}ngOnDestroy(){super.ngOnDestroy();for(const e of this.subscriptions)e.unsubscribe();this.subscriptions=null}ngAfterViewInit(){super.ngAfterViewInit(),setTimeout(()=>this.update())}update(){super.update(),this.curve||(this.curve=s.curveBundle.beta(1)),this.zone.run(()=>{this.dims=(0,r.calculateViewDimensions)({width:this.width,height:this.height,margins:this.margin,showLegend:this.legend}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new c.Subscription;const e=e=>(e.meta||(e.meta={}),e.id||(e.id=q()),e.dimension?e.meta.forceDimensions=void 0===e.meta.forceDimensions||e.meta.forceDimensions:(e.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},e.meta.forceDimensions=!1),e.position={x:0,y:0},e.data=e.data?e.data:{},e);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(e):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(e):[],edges:this.links.length>0?[...this.links].map(e=>(e.id||(e.id=q()),e)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const e=this.layout.run(this.graph),t=e instanceof c.Observable?e:(0,c.of)(e);this.graphSubscription.add(t.subscribe(e=>{this.graph=e,this.tick()})),0!==this.graph.nodes.length&&t.pipe((0,d.first)()).subscribe(()=>this.applyNodeDimensions())}tick(){const e=new Set;this.graph.nodes.map(t=>{t.transform=`translate(${t.position.x-t.dimension.width/2||0}, ${t.position.y-t.dimension.height/2||0})`,t.data||(t.data={}),t.data.color=this.colors.getColor(this.groupResultsBy(t)),e.add(t.id)});const t=new Set;(this.graph.clusters||[]).map(e=>{e.transform=`translate(${e.position.x-e.dimension.width/2||0}, ${e.position.y-e.dimension.height/2||0})`,e.data||(e.data={}),e.data.color=this.colors.getColor(this.groupResultsBy(e)),t.add(e.id)}),setTimeout(()=>{this.oldNodes=e,this.oldClusters=t},500);const i=[];for(const n in this.graph.edgeLabels){const e=this.graph.edgeLabels[n],t=n.replace(/[^\w-]*/g,""),o=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let r=o?this._oldLinks.find(e=>`${e.source}${e.target}${e.id}`===t):this._oldLinks.find(e=>`${e.source}${e.target}`===t);const a=o?this.graph.edges.find(e=>`${e.source}${e.target}${e.id}`===t):this.graph.edges.find(e=>`${e.source}${e.target}`===t);r?r.data&&a&&a.data&&JSON.stringify(r.data)!==JSON.stringify(a.data)&&(r.data=a.data):r=a||e,r.oldLine=r.line;const s=e.points,l=this.generateLine(s),c=Object.assign({},r);c.line=l,c.points=s,this.updateMidpointOnEdge(c,s);const d=s[Math.floor(s.length/2)];d&&(c.textTransform=`translate(${d.x||0},${d.y||0})`),c.textAngle=0,c.oldLine||(c.oldLine=c.line),this.calcDominantBaseline(c),i.push(c)}this.graph.edges=i,this.graph.edges&&(this._oldLinks=this.graph.edges.map(e=>{const t=Object.assign({},e);return t.oldLine=e.line,t})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case oe.UpperLeft:return"";case oe.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let e=1/0,t=-1/0,i=1/0,n=-1/0;for(let o=0;o<this.graph.nodes.length;o++){const r=this.graph.nodes[o];e=r.position.x<e?r.position.x:e,i=r.position.y<i?r.position.y:i,t=r.position.x+r.dimension.width>t?r.position.x+r.dimension.width:t,n=r.position.y+r.dimension.height>n?r.position.y+r.dimension.height:n}e-=100,i-=100,t+=100,n+=100,this.graphDims.width=t-e,this.graphDims.height=n-i,this.minimapOffsetX=e,this.minimapOffsetY=i}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(e=>{const t=e.nativeElement,i=this.graph.nodes.find(e=>e.id===t.id);if(!i)return;let n;try{if(n=t.getBBox(),!n.width||!n.height)return}catch(o){return}if(this.nodeHeight?i.dimension.height=i.dimension.height&&i.meta.forceDimensions?i.dimension.height:this.nodeHeight:i.dimension.height=i.dimension.height&&i.meta.forceDimensions?i.dimension.height:n.height,this.nodeMaxHeight&&(i.dimension.height=Math.max(i.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(i.dimension.height=Math.min(i.dimension.height,this.nodeMinHeight)),this.nodeWidth)i.dimension.width=i.dimension.width&&i.meta.forceDimensions?i.dimension.width:this.nodeWidth;else if(t.getElementsByTagName("text").length){let e;try{for(const i of t.getElementsByTagName("text")){const t=i.getBBox();e?(t.width>e.width&&(e.width=t.width),t.height>e.height&&(e.height=t.height)):e=t}}catch(o){return}i.dimension.width=i.dimension.width&&i.meta.forceDimensions?i.dimension.width:e.width+20}else i.dimension.width=i.dimension.width&&i.meta.forceDimensions?i.dimension.width:n.width;this.nodeMaxWidth&&(i.dimension.width=Math.max(i.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(i.dimension.width=Math.min(i.dimension.width,this.nodeMinWidth))})}redrawLines(e=this.animate){this.linkElements.map(t=>{const i=this.graph.edges.find(e=>e.id===t.nativeElement.id);if(i){(0,a.select)(t.nativeElement).select(".line").attr("d",i.oldLine).transition().ease(l.easeSinInOut).duration(e?500:0).attr("d",i.line);(0,a.select)(this.chartElement.nativeElement).select(`#${i.id}`).attr("d",i.oldTextPath).transition().ease(l.easeSinInOut).duration(e?500:0).attr("d",i.textPath),this.updateMidpointOnEdge(i,i.points)}})}calcDominantBaseline(e){const t=e.points[0],i=e.points[e.points.length-1];e.oldTextPath=e.textPath,i.x<t.x?(e.dominantBaseline="text-before-edge",e.textPath=this.generateLine([...e.points].reverse())):(e.dominantBaseline="text-after-edge",e.textPath=e.line)}generateLine(e){return(0,s.line)().x(e=>e.x).y(e=>e.y).curve(this.curve)(e)}onZoom(e,t){if(this.enableTrackpadSupport&&!e.ctrlKey)return void this.pan(-1*e.deltaX,-1*e.deltaY);const i=1+("in"===t?this.zoomSpeed:-this.zoomSpeed),n=this.zoomLevel*i;if(!(n<=this.minZoomLevel||n>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&e){const t=e.clientX,n=e.clientY,o=this.chart.nativeElement.querySelector("svg"),r=o.querySelector("g.chart"),a=o.createSVGPoint();a.x=t,a.y=n;const s=a.matrixTransform(r.getScreenCTM().inverse());this.pan(s.x,s.y,!0),this.zoom(i),this.pan(-s.x,-s.y,!0)}else this.zoom(i)}pan(e,t,i=!1){const n=i?1:this.zoomLevel;this.transformationMatrix=(0,p.transform)(this.transformationMatrix,(0,p.translate)(e/n,t/n)),this.updateTransform()}panTo(e,t){if(null==e||isNaN(e)||null==t||isNaN(t))return;const i=-this.panOffsetX-e*this.zoomLevel+this.dims.width/2,n=-this.panOffsetY-t*this.zoomLevel+this.dims.height/2;this.transformationMatrix=(0,p.transform)(this.transformationMatrix,(0,p.translate)(i/this.zoomLevel,n/this.zoomLevel)),this.updateTransform()}zoom(e){this.transformationMatrix=(0,p.transform)(this.transformationMatrix,(0,p.scale)(e,e)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(e){this.transformationMatrix.a=isNaN(e)?this.transformationMatrix.a:Number(e),this.transformationMatrix.d=isNaN(e)?this.transformationMatrix.d:Number(e),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(e){if(!this.draggingEnabled)return;const t=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(t,e),t.position.x+=e.movementX/this.zoomLevel,t.position.y+=e.movementY/this.zoomLevel;const i=t.position.x-t.dimension.width/2,n=t.position.y-t.dimension.height/2;t.transform=`translate(${i}, ${n})`;for(const o of this.graph.edges)if((o.target===t.id||o.source===t.id||o.target.id===t.id||o.source.id===t.id)&&this.layout&&"string"!=typeof this.layout){const e=this.layout.updateEdge(this.graph,o),t=e instanceof c.Observable?e:(0,c.of)(e);this.graphSubscription.add(t.subscribe(e=>{this.graph=e,this.redrawEdge(o)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(e){const t=this.generateLine(e.points);this.calcDominantBaseline(e),e.oldLine=e.line,e.line=t}updateTransform(){this.transform=(0,p.toSVG)((0,p.smoothMatrix)(this.transformationMatrix,100))}onClick(e){this.select.emit(e)}onActivate(e){this.activeEntries.indexOf(e)>-1||(this.activeEntries=[e,...this.activeEntries],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){const t=this.activeEntries.indexOf(e);this.activeEntries.splice(t,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(e=>this.groupResultsBy(e)).reduce((e,t)=>-1!==e.indexOf(t)?e:e.concat([t]),[]).sort()}trackLinkBy(e,t){return t.id}trackNodeBy(e,t){return t.id}setColors(){this.colors=new r.ColorHelper(this.scheme,"ordinal",this.seriesDomain,this.customColors)}getLegendOptions(){return{scaleType:"ordinal",domain:this.seriesDomain,colors:this.colors}}onMouseMove(e){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,e):this.isDragging&&this.draggingEnabled&&this.onDrag(e)}onMouseDown(e){this.isMouseMoveCalled=!1}graphClick(e){this.isMouseMoveCalled||this.clickHandler.emit(e)}onTouchStart(e){this._touchLastX=e.changedTouches[0].clientX,this._touchLastY=e.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(e){if(this.isPanning&&this.panningEnabled){const t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,n=t-this._touchLastX,o=i-this._touchLastY;this._touchLastX=t,this._touchLastY=i,this.pan(n,o)}}onTouchEnd(e){this.isPanning=!1}onMouseUp(e){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,e)}onNodeMouseDown(e,t){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=t,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(t,e))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(e){let t=e.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient),i=e.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient;this.panTo(t*this.minimapScaleCoefficient,i*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){const e=this.dims.height/this.graphDims.height,t=this.dims.width/this.graphDims.width;let i=Math.min(e,t,1);i<this.minZoomLevel&&(i=this.minZoomLevel),i>this.maxZoomLevel&&(i=this.maxZoomLevel),i!==this.zoomLevel&&(this.zoomLevel=i,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(e){const t=this.graph.nodes.find(t=>t.id===e);t&&this.panTo(t.position.x,t.position.y)}panWithConstraints(e,t){let i=t.movementX,n=t.movementY;switch(this.isMinimapPanning&&(i=-this.minimapScaleCoefficient*i*this.zoomLevel,n=-this.minimapScaleCoefficient*n*this.zoomLevel),e){case ne.Horizontal:this.pan(i,0);break;case ne.Vertical:this.pan(0,n);break;default:this.pan(i,n)}}updateMidpointOnEdge(e,t){if(e&&t)if(t.length%2==1)e.midPoint=t[Math.floor(t.length/2)];else{const i=t[t.length/2],n=t[t.length/2-1];e.midPoint={x:(i.x+n.x)/2,y:(i.y+n.y)/2}}}}se.\u0275fac=function(e){return new(e||se)(n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](ie))},se.\u0275cmp=n["\u0275\u0275defineComponent"]({type:se,selectors:[["ngx-graph"]],contentQueries:function(e,t,i){if(1&e&&(n["\u0275\u0275contentQuery"](i,x,5),n["\u0275\u0275contentQuery"](i,y,5),n["\u0275\u0275contentQuery"](i,b,5),n["\u0275\u0275contentQuery"](i,C,5),n["\u0275\u0275contentQuery"](i,S,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.linkTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.nodeTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.clusterTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.defsTemplate=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.miniMapNodeTemplate=e.first)}},viewQuery:function(e,t){if(1&e&&(n["\u0275\u0275viewQuery"](r.ChartComponent,7,n.ElementRef),n["\u0275\u0275viewQuery"](w,5),n["\u0275\u0275viewQuery"](I,5)),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.chart=e.first),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.nodeElements=e),n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.linkElements=e)}},hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mousemove",function(e){return t.onMouseMove(e)},!1,n["\u0275\u0275resolveDocument"])("mousedown",function(e){return t.onMouseDown(e)},!1,n["\u0275\u0275resolveDocument"])("click",function(e){return t.graphClick(e)},!1,n["\u0275\u0275resolveDocument"])("touchmove",function(e){return t.onTouchMove(e)},!1,n["\u0275\u0275resolveDocument"])("mouseup",function(e){return t.onMouseUp(e)},!1,n["\u0275\u0275resolveDocument"])},inputs:{legend:"legend",nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",draggingEnabled:"draggingEnabled",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapPosition:"miniMapPosition",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY",layout:"layout",curve:"curve",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layoutSettings:"layoutSettings",miniMapMaxHeight:"miniMapMaxHeight"},outputs:{activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[n["\u0275\u0275InheritDefinitionFeature"],n["\u0275\u0275NgOnChangesFeature"]],ngContentSelectors:["*"],decls:5,vars:11,consts:[["mouseWheel","",3,"view","showLegend","legendOptions","legendLabelClick","legendLabelActivate","legendLabelDeactivate","mouseWheelUp","mouseWheelDown"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(e,t){1&e&&(n["\u0275\u0275projectionDef"](),n["\u0275\u0275elementStart"](0,"ngx-charts-chart",0),n["\u0275\u0275listener"]("legendLabelClick",function(e){return t.onClick(e)})("legendLabelActivate",function(e){return t.onActivate(e)})("legendLabelDeactivate",function(e){return t.onDeactivate(e)})("mouseWheelUp",function(e){return t.onZoom(e,"in")})("mouseWheelDown",function(e){return t.onZoom(e,"out")}),n["\u0275\u0275template"](1,N,12,12,"g",1),n["\u0275\u0275namespaceSVG"](),n["\u0275\u0275elementStart"](2,"clipPath"),n["\u0275\u0275element"](3,"rect"),n["\u0275\u0275elementEnd"](),n["\u0275\u0275template"](4,G,6,15,"g",2),n["\u0275\u0275elementEnd"]()),2&e&&(n["\u0275\u0275property"]("view",n["\u0275\u0275pureFunction2"](8,z,t.width,t.height))("showLegend",t.legend)("legendOptions",t.legendOptions),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.initialized&&t.graph),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("id",t.minimapClipPathId),n["\u0275\u0275advance"](1),n["\u0275\u0275attribute"]("width",t.graphDims.width/t.minimapScaleCoefficient)("height",t.graphDims.height/t.minimapScaleCoefficient),n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngIf",t.showMiniMap))},directives:function(){return[r.ChartComponent,le,v.NgIf,v.NgForOf,v.NgTemplateOutlet]},styles:[".minimap .minimap-background{fill:rgba(0,0,0,.1)}.minimap .minimap-drag{cursor:pointer;fill:rgba(0,0,0,.2);stroke:#fff;stroke-dasharray:2px;stroke-dashoffset:2px;stroke-width:1px}.minimap .minimap-drag.panning{fill:rgba(0,0,0,.3)}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}.graph .edge{fill:none;stroke:#666}.graph .edge .edge-label{fill:#251e1e;font-size:12px;stroke:none}.graph .panning-rect{cursor:move;fill:transparent}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}"],encapsulation:2,changeDetection:0}),se.ctorParameters=()=>[{type:n.ElementRef},{type:n.NgZone},{type:n.ChangeDetectorRef},{type:ie}],se.propDecorators={legend:[{type:n.Input}],nodes:[{type:n.Input}],clusters:[{type:n.Input}],links:[{type:n.Input}],activeEntries:[{type:n.Input}],curve:[{type:n.Input}],draggingEnabled:[{type:n.Input}],nodeHeight:[{type:n.Input}],nodeMaxHeight:[{type:n.Input}],nodeMinHeight:[{type:n.Input}],nodeWidth:[{type:n.Input}],nodeMinWidth:[{type:n.Input}],nodeMaxWidth:[{type:n.Input}],panningEnabled:[{type:n.Input}],panningAxis:[{type:n.Input}],enableZoom:[{type:n.Input}],zoomSpeed:[{type:n.Input}],minZoomLevel:[{type:n.Input}],maxZoomLevel:[{type:n.Input}],autoZoom:[{type:n.Input}],panOnZoom:[{type:n.Input}],animate:[{type:n.Input}],autoCenter:[{type:n.Input}],update$:[{type:n.Input}],center$:[{type:n.Input}],zoomToFit$:[{type:n.Input}],panToNode$:[{type:n.Input}],layout:[{type:n.Input}],layoutSettings:[{type:n.Input}],enableTrackpadSupport:[{type:n.Input}],showMiniMap:[{type:n.Input}],miniMapMaxWidth:[{type:n.Input}],miniMapMaxHeight:[{type:n.Input}],miniMapPosition:[{type:n.Input}],activate:[{type:n.Output}],deactivate:[{type:n.Output}],zoomChange:[{type:n.Output}],clickHandler:[{type:n.Output}],linkTemplate:[{type:n.ContentChild,args:["linkTemplate"]}],nodeTemplate:[{type:n.ContentChild,args:["nodeTemplate"]}],clusterTemplate:[{type:n.ContentChild,args:["clusterTemplate"]}],defsTemplate:[{type:n.ContentChild,args:["defsTemplate"]}],miniMapNodeTemplate:[{type:n.ContentChild,args:["miniMapNodeTemplate"]}],chart:[{type:n.ViewChild,args:[r.ChartComponent,{read:n.ElementRef,static:!0}]}],nodeElements:[{type:n.ViewChildren,args:["nodeElement"]}],linkElements:[{type:n.ViewChildren,args:["linkElement"]}],groupResultsBy:[{type:n.Input}],zoomLevel:[{type:n.Input,args:["zoomLevel"]}],panOffsetX:[{type:n.Input,args:["panOffsetX"]}],panOffsetY:[{type:n.Input,args:["panOffsetY"]}],onMouseMove:[{type:n.HostListener,args:["document:mousemove",["$event"]]}],onMouseDown:[{type:n.HostListener,args:["document:mousedown",["$event"]]}],graphClick:[{type:n.HostListener,args:["document:click",["$event"]]}],onTouchMove:[{type:n.HostListener,args:["document:touchmove",["$event"]]}],onMouseUp:[{type:n.HostListener,args:["document:mouseup",["$event"]]}]},(0,o.__decorate)([ae(500),(0,o.__metadata)("design:type",Function),(0,o.__metadata)("design:paramtypes",[]),(0,o.__metadata)("design:returntype",void 0)],se.prototype,"updateMinimap",null);class le{constructor(){this.mouseWheelUp=new n.EventEmitter,this.mouseWheelDown=new n.EventEmitter}onMouseWheelChrome(e){this.mouseWheelFunc(e)}onMouseWheelFirefox(e){this.mouseWheelFunc(e)}onWheel(e){this.mouseWheelFunc(e)}onMouseWheelIE(e){this.mouseWheelFunc(e)}mouseWheelFunc(e){window.event&&(e=window.event);const t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||e.deltaY||e.deltaX)),i=e.wheelDelta?t>0:t<0,n=e.wheelDelta?t<0:t>0;i?this.mouseWheelUp.emit(e):n&&this.mouseWheelDown.emit(e),e.returnValue=!1,e.preventDefault&&e.preventDefault()}}le.\u0275fac=function(e){return new(e||le)},le.\u0275dir=n["\u0275\u0275defineDirective"]({type:le,selectors:[["","mouseWheel",""]],hostBindings:function(e,t){1&e&&n["\u0275\u0275listener"]("mousewheel",function(e){return t.onMouseWheelChrome(e)})("DOMMouseScroll",function(e){return t.onMouseWheelFirefox(e)})("wheel",function(e){return t.onWheel(e)})("onmousewheel",function(e){return t.onMouseWheelIE(e)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),le.propDecorators={mouseWheelUp:[{type:n.Output}],mouseWheelDown:[{type:n.Output}],onMouseWheelChrome:[{type:n.HostListener,args:["mousewheel",["$event"]]}],onMouseWheelFirefox:[{type:n.HostListener,args:["DOMMouseScroll",["$event"]]}],onWheel:[{type:n.HostListener,args:["wheel",["$event"]]}],onMouseWheelIE:[{type:n.HostListener,args:["onmousewheel",["$event"]]}]};class ce{}ce.\u0275fac=function(e){return new(e||ce)},ce.\u0275mod=n["\u0275\u0275defineNgModule"]({type:ce}),ce.\u0275inj=n["\u0275\u0275defineInjector"]({providers:[ie],imports:[[r.ChartCommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](ce,{declarations:function(){return[se,le]},imports:function(){return[r.ChartCommonModule]},exports:function(){return[se,le]}});class de{}de.\u0275fac=function(e){return new(e||de)},de.\u0275mod=n["\u0275\u0275defineNgModule"]({type:de}),de.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[r.NgxChartsModule],ce]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](de,{imports:function(){return[r.NgxChartsModule]},exports:function(){return[ce]}})},"./node_modules/angular-split/fesm2015/angular-split.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{AngularSplitModule:()=>C,SplitAreaDirective:()=>b,SplitComponent:()=>y});var n=i("./node_modules/@angular/core/fesm2015/core.js"),o=i("./node_modules/@angular/common/fesm2015/common.js"),r=i("rxjs"),a=i("./node_modules/rxjs/_esm2015/operators/index.js");const s=["gutterEls"];function l(e,t){if(1&e){const e=n["\u0275\u0275getCurrentView"]();n["\u0275\u0275elementStart"](0,"div",2,3),n["\u0275\u0275listener"]("mousedown",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().startDragging(t,2*i+1,i+1)})("touchstart",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().startDragging(t,2*i+1,i+1)})("mouseup",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().clickGutter(t,i+1)})("touchend",function(t){n["\u0275\u0275restoreView"](e);const i=n["\u0275\u0275nextContext"]().index;return n["\u0275\u0275nextContext"]().clickGutter(t,i+1)}),n["\u0275\u0275element"](2,"div",4),n["\u0275\u0275elementEnd"]()}if(2&e){const e=n["\u0275\u0275nextContext"]().index,t=n["\u0275\u0275nextContext"]();n["\u0275\u0275styleProp"]("flex-basis",t.gutterSize,"px")("order",2*e+1)}}function c(e,t){if(1&e&&n["\u0275\u0275template"](0,l,3,4,"div",1),2&e){const e=t.last;n["\u0275\u0275property"]("ngIf",!1===e)}}function d(e){return void 0!==e.changedTouches&&e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:void 0!==e.clientX&&void 0!==e.clientY?{x:e.clientX,y:e.clientY}:null}function p(e,t){const i=e.nativeElement.getBoundingClientRect();return"horizontal"===t?i.width:i.height}function u(e){return"boolean"==typeof e?e:"false"!==e}function m(e,t){return null==e?t:(e=Number(e),!isNaN(e)&&e>=0?e:t)}function h(e,t){if("percent"===e){const e=t.reduce((e,t)=>null!==t?e+t:e,0);return t.every(e=>null!==e)&&e>99.9&&e<100.1}if("pixel"===e)return 1===t.filter(e=>null===e).length}function f(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function g(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function v(e,t,i,n){return t.reduce((t,i)=>{const o=function(e,t,i,n){if(0===i)return{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:t.sizePercentAtStart,pixelRemain:0};if(0===t.sizePixelAtStart&&i<0)return{areaSnapshot:t,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:i};if("percent"===e)return function(e,t,i){const n=e.sizePixelAtStart+t,o=n/i*100;if(t>0){if(null!==e.area.maxSize&&o>e.area.maxSize){const n=e.area.maxSize/100*i;return{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+t-n}}return{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:o>100?100:o,pixelRemain:0}}if(t<0){if(null!==e.area.minSize&&o<e.area.minSize){const n=e.area.minSize/100*i;return{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+t-n}}return o<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:o,pixelRemain:0}}}(t,i,n);if("pixel"===e)return function(e,t,i){const n=e.sizePixelAtStart+t;if(t>0)return null!==e.area.maxSize&&n>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0};if(t<0)return null!==e.area.minSize&&n<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+t-n,percentAfterAbsorption:-1,pixelRemain:n-e.area.minSize}:n<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:t+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:t,percentAfterAbsorption:-1,pixelRemain:0}}(t,i)}(e,i,t.remain,n);return t.list.push(o),t.remain=o.pixelRemain,t},{remain:i,list:[]})}function x(e,t){"percent"===e?t.areaSnapshot.area.size=t.percentAfterAbsorption:"pixel"===e&&null!==t.areaSnapshot.area.size&&(t.areaSnapshot.area.size=t.areaSnapshot.sizePixelAtStart+t.pixelAbsorb)}class y{constructor(e,t,i,o){this.ngZone=e,this.elRef=t,this.cdRef=i,this.renderer=o,this._direction="horizontal",this._unit="percent",this._gutterSize=11,this._gutterStep=1,this._restrictMove=!1,this._useTransition=!1,this._disabled=!1,this._dir="ltr",this._gutterDblClickDuration=0,this.dragStart=new n.EventEmitter(!1),this.dragEnd=new n.EventEmitter(!1),this.gutterClick=new n.EventEmitter(!1),this.gutterDblClick=new n.EventEmitter(!1),this.dragProgressSubject=new r.Subject,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hidedAreas=[],this._clickTimeout=null,this.direction=this._direction}set direction(e){this._direction="vertical"===e?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(e){this._unit="pixel"===e?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(e){this._gutterSize=m(e,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(e){this._gutterStep=m(e,1)}get gutterStep(){return this._gutterStep}set restrictMove(e){this._restrictMove=u(e)}get restrictMove(){return this._restrictMove}set useTransition(e){this._useTransition=u(e),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(e){this._disabled=u(e),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(e){this._dir="rtl"===e?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(e){this._gutterDblClickDuration=m(e,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new r.Observable(e=>this.transitionEndSubscriber=e).pipe((0,a.debounceTime)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(e){const t={component:e,order:0,size:0,minSize:null,maxSize:null};!0===e.visible?(this.displayedAreas.push(t),this.build(!0,!0)):this.hidedAreas.push(t)}removeArea(e){if(this.displayedAreas.some(t=>t.component===e)){const t=this.displayedAreas.find(t=>t.component===e);this.displayedAreas.splice(this.displayedAreas.indexOf(t),1),this.build(!0,!0)}else if(this.hidedAreas.some(t=>t.component===e)){const t=this.hidedAreas.find(t=>t.component===e);this.hidedAreas.splice(this.hidedAreas.indexOf(t),1)}}updateArea(e,t,i){!0===e.visible&&this.build(t,i)}showArea(e){const t=this.hidedAreas.find(t=>t.component===e);if(void 0===t)return;const i=this.hidedAreas.splice(this.hidedAreas.indexOf(t),1);this.displayedAreas.push(...i),this.build(!0,!0)}hideArea(e){const t=this.displayedAreas.find(t=>t.component===e);if(void 0===t)return;const i=this.displayedAreas.splice(this.displayedAreas.indexOf(t),1);i.forEach(e=>{e.order=0,e.size=0}),this.hidedAreas.push(...i),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(e=>null===e.size?"*":e.size)}setVisibleAreaSizes(e){if(e.length!==this.displayedAreas.length)return!1;const t=e.map(e=>m(e,null));return!1!==h(this.unit,t)&&(this.displayedAreas.forEach((e,i)=>e.component._size=t[i]),this.build(!1,!0),!0)}build(e,t){if(this.stopDragging(),!0===e&&(this.displayedAreas.every(e=>null!==e.component.order)&&this.displayedAreas.sort((e,t)=>e.component.order-t.component.order),this.displayedAreas.forEach((e,t)=>{e.order=2*t,e.component.setStyleOrder(e.order)})),!0===t){const e=h(this.unit,this.displayedAreas.map(e=>e.component.size));switch(this.unit){case"percent":{const t=100/this.displayedAreas.length;this.displayedAreas.forEach(i=>{i.size=e?i.component.size:t,i.minSize=f(i),i.maxSize=g(i)});break}case"pixel":if(e)this.displayedAreas.forEach(e=>{e.size=e.component.size,e.minSize=f(e),e.maxSize=g(e)});else{const e=this.displayedAreas.filter(e=>null===e.component.size);if(0===e.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((e,t)=>{e.size=0===t?null:e.component.size,e.minSize=0===t?null:f(e),e.maxSize=0===t?null:g(e)});else if(e.length>1){let e=!1;this.displayedAreas.forEach(t=>{null===t.component.size?!1===e?(t.size=null,t.minSize=null,t.maxSize=null,e=!0):(t.size=100,t.minSize=null,t.maxSize=null):(t.size=t.component.size,t.minSize=f(t),t.maxSize=g(t))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const e=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(t=>{t.component.setStyleFlex(0,0,`calc( ${t.size}% - ${t.size/100*e}px )`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(e=>{null===e.size?1===this.displayedAreas.length?e.component.setStyleFlex(1,1,"100%",!1,!1):e.component.setStyleFlex(1,1,"auto",!1,!1):1===this.displayedAreas.length?e.component.setStyleFlex(0,0,"100%",!1,!1):e.component.setStyleFlex(0,0,`${e.size}px`,null!==e.minSize&&e.minSize===e.size,null!==e.maxSize&&e.maxSize===e.size)})}clickGutter(e,t){const i=d(e);this.startPoint&&this.startPoint.x===i.x&&this.startPoint.y===i.y&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",t),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",t),this.stopDragging()},this.gutterDblClickDuration))}startDragging(e,t,i){e.preventDefault(),e.stopPropagation(),this.startPoint=d(e),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.snapshot={gutterNum:i,lastSteppedOffset:0,allAreasSizePixel:p(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(e=>{const i={area:e,sizePixelAtStart:p(e.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?e.size:-1};e.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[i]:this.snapshot.areasBeforeGutter.unshift(i):e.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[i]):this.snapshot.areasAfterGutter.push(i))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((e,t)=>e+t.sizePercentAtStart,0),0!==this.snapshot.areasBeforeGutter.length&&0!==this.snapshot.areasAfterGutter.length&&(this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.dragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.dragEvent.bind(this)))}),this.displayedAreas.forEach(e=>e.component.lockEvents()),this.isDragging=!0,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)))}dragEvent(e){if(e.preventDefault(),e.stopPropagation(),null!==this._clickTimeout&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1===this.isDragging)return;if(this.endPoint=d(e),null===this.endPoint)return;let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(t=-t);const i=Math.round(t/this.gutterStep)*this.gutterStep;if(i===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=i;let n=v(this.unit,this.snapshot.areasBeforeGutter,-i,this.snapshot.allAreasSizePixel),o=v(this.unit,this.snapshot.areasAfterGutter,i,this.snapshot.allAreasSizePixel);if(0!==n.remain&&0!==o.remain?Math.abs(n.remain)===Math.abs(o.remain)||(Math.abs(n.remain)>Math.abs(o.remain)?o=v(this.unit,this.snapshot.areasAfterGutter,i+n.remain,this.snapshot.allAreasSizePixel):n=v(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)):0!==n.remain?o=v(this.unit,this.snapshot.areasAfterGutter,i+n.remain,this.snapshot.allAreasSizePixel):0!==o.remain&&(n=v(this.unit,this.snapshot.areasBeforeGutter,-(i-o.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const e=[...n.list,...o.list],t=e.find(e=>0!==e.percentAfterAbsorption&&e.percentAfterAbsorption!==e.areaSnapshot.area.minSize&&e.percentAfterAbsorption!==e.areaSnapshot.area.maxSize);t&&(t.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-e.filter(e=>e!==t).reduce((e,t)=>e+t.percentAfterAbsorption,0))}n.list.forEach(e=>x(this.unit,e)),o.list.forEach(e=>x(this.unit,e)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(e){if(e&&(e.preventDefault(),e.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(e=>e.component.unlockEvents());this.dragListeners.length>0;){const e=this.dragListeners.pop();e&&e()}this.isDragging=!1,!this.endPoint||this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y||this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(e,t){const i=this.getVisibleAreaSizes();"start"===e?this.dragStart.emit({gutterNum:t,sizes:i}):"end"===e?this.dragEnd.emit({gutterNum:t,sizes:i}):"click"===e?this.gutterClick.emit({gutterNum:t,sizes:i}):"dblclick"===e?this.gutterDblClick.emit({gutterNum:t,sizes:i}):"transitionEnd"===e?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(i)):"progress"===e&&this.dragProgressSubject.next({gutterNum:t,sizes:i})}ngOnDestroy(){this.stopDragging()}}y.\u0275fac=function(e){return new(e||y)(n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.ChangeDetectorRef),n["\u0275\u0275directiveInject"](n.Renderer2))},y.\u0275cmp=n["\u0275\u0275defineComponent"]({type:y,selectors:[["as-split"]],viewQuery:function(e,t){if(1&e&&n["\u0275\u0275viewQuery"](s,5),2&e){let e;n["\u0275\u0275queryRefresh"](e=n["\u0275\u0275loadQuery"]())&&(t.gutterEls=e)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration"},outputs:{dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick",transitionEnd:"transitionEnd"},exportAs:["asSplit"],ngContentSelectors:["*"],decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["class","as-split-gutter",3,"flex-basis","order","mousedown","touchstart","mouseup","touchend",4,"ngIf"],[1,"as-split-gutter",3,"mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(e,t){1&e&&(n["\u0275\u0275projectionDef"](),n["\u0275\u0275projection"](0),n["\u0275\u0275template"](1,c,1,1,"ng-template",0)),2&e&&(n["\u0275\u0275advance"](1),n["\u0275\u0275property"]("ngForOf",t.displayedAreas))},directives:[o.NgForOf,o.NgIf],styles:['[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url("")}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area, .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%]{transition:flex-basis .3s}'],changeDetection:0}),y.ctorParameters=()=>[{type:n.NgZone},{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.Renderer2}],y.propDecorators={direction:[{type:n.Input}],unit:[{type:n.Input}],gutterSize:[{type:n.Input}],gutterStep:[{type:n.Input}],restrictMove:[{type:n.Input}],useTransition:[{type:n.Input}],disabled:[{type:n.Input}],dir:[{type:n.Input}],gutterDblClickDuration:[{type:n.Input}],dragStart:[{type:n.Output}],dragEnd:[{type:n.Output}],gutterClick:[{type:n.Output}],gutterDblClick:[{type:n.Output}],transitionEnd:[{type:n.Output}],gutterEls:[{type:n.ViewChildren,args:["gutterEls"]}]};class b{constructor(e,t,i,n){this.ngZone=e,this.elRef=t,this.renderer=i,this.split=n,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(e){this._order=m(e,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(e){this._size=m(e,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(e){this._minSize=m(e,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(e){this._maxSize=m(e,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(e){this._lockSize=u(e),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(e){this._visible=u(e),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",e=>{"flex-basis"===e.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(e){this.renderer.setStyle(this.elRef.nativeElement,"order",e)}setStyleFlex(e,t,i,n,o){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",e),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",i),!0===n?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===o?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",e=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",e=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const e=this.lockListeners.pop();e&&e()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}}b.\u0275fac=function(e){return new(e||b)(n["\u0275\u0275directiveInject"](n.NgZone),n["\u0275\u0275directiveInject"](n.ElementRef),n["\u0275\u0275directiveInject"](n.Renderer2),n["\u0275\u0275directiveInject"](y))},b.\u0275dir=n["\u0275\u0275defineDirective"]({type:b,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),b.ctorParameters=()=>[{type:n.NgZone},{type:n.ElementRef},{type:n.Renderer2},{type:y}],b.propDecorators={order:[{type:n.Input}],size:[{type:n.Input}],minSize:[{type:n.Input}],maxSize:[{type:n.Input}],lockSize:[{type:n.Input}],visible:[{type:n.Input}]};class C{static forRoot(){return{ngModule:C,providers:[]}}static forChild(){return{ngModule:C,providers:[]}}}C.\u0275fac=function(e){return new(e||C)},C.\u0275mod=n["\u0275\u0275defineNgModule"]({type:C}),C.\u0275inj=n["\u0275\u0275defineInjector"]({imports:[[o.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n["\u0275\u0275setNgModuleScope"](C,{declarations:function(){return[y,b]},imports:function(){return[o.CommonModule]},exports:function(){return[y,b]}})},"./node_modules/css-element-queries/index.js":(e,t,i)=>{e.exports={ResizeSensor:i("./node_modules/css-element-queries/src/ResizeSensor.js"),ElementQueries:i("./node_modules/css-element-queries/src/ElementQueries.js")}},"./node_modules/css-element-queries/src/ElementQueries.js":function(e,t,i){"use strict";var n,o,r;"undefined"!=typeof window&&window,o=[i("./node_modules/css-element-queries/src/ResizeSensor.js")],void 0===(r="function"==typeof(n=function(e){var t=function(){var t,i={},n=[];function o(e){e||(e=document.documentElement);var t=window.getComputedStyle(e,null).fontSize;return parseFloat(t)||16}function r(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function a(e,t){var i=t.split(/\d/),n=i[i.length-1];switch(t=parseFloat(t),n){case"px":default:return t;case"em":return t*o(e);case"rem":return t*o();case"vw":return t*document.documentElement.clientWidth/100;case"vh":return t*document.documentElement.clientHeight/100;case"vmin":case"vmax":var r=document.documentElement.clientWidth/100,a=document.documentElement.clientHeight/100;return t*(0,Math["vmin"===n?"min":"max"])(r,a)}}function s(e,t){var n,o,s,l,c,d,p,u;this.element=e;var m=["min-width","min-height","max-width","max-height"];this.call=function(){for(n in s=r(this.element),d={},i[t])i[t].hasOwnProperty(n)&&(o=i[t][n],l=a(this.element,o.value),c="width"===o.property?s.width:s.height,u=o.mode+"-"+o.property,p="","min"===o.mode&&c>=l&&(p+=o.value),"max"===o.mode&&c<=l&&(p+=o.value),d[u]||(d[u]=""),p&&-1===(" "+d[u]+" ").indexOf(" "+p+" ")&&(d[u]+=" "+p));for(var e in m)m.hasOwnProperty(e)&&(d[m[e]]?this.element.setAttribute(m[e],d[m[e]].substr(1)):this.element.removeAttribute(m[e]))}}function l(t,i){t.elementQueriesSetupInformation||(t.elementQueriesSetupInformation=new s(t,i)),t.elementQueriesSensor||(t.elementQueriesSensor=new e(t,function(){t.elementQueriesSetupInformation.call()}))}function c(e,o,r,a){if(void 0===i[e]){i[e]=[];var s=n.length;t.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",t.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+s+"px;}",n.push(e)}i[e].push({mode:o,property:r,value:a})}function d(e){var t;if(document.querySelectorAll&&(t=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),t||"undefined"==typeof $$||(t=$$),t||"undefined"==typeof jQuery||(t=jQuery),!t)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return t}function p(e){var t=d(e);for(var n in i)if(i.hasOwnProperty(n))for(var o=t(n,e),r=0,a=o.length;r<a;r++)l(o[r],n)}function u(t){var i=[],n=[],o=[],r=0,a=-1,s=[];for(var l in t.children)if(t.children.hasOwnProperty(l)&&t.children[l].tagName&&"img"===t.children[l].tagName.toLowerCase()){i.push(t.children[l]);var c=t.children[l].getAttribute("min-width")||t.children[l].getAttribute("data-min-width"),d=t.children[l].getAttribute("data-src")||t.children[l].getAttribute("url");o.push(d);var p={minWidth:c};n.push(p),c?t.children[l].style.display="none":(r=i.length-1,t.children[l].style.display="block")}function u(){var e,l=!1;for(e in i)i.hasOwnProperty(e)&&n[e].minWidth&&t.offsetWidth>n[e].minWidth&&(l=e);if(l||(l=r),a!==l)if(s[l])i[a].style.display="none",i[l].style.display="block",a=l;else{var c=new Image;c.onload=function(){i[l].src=o[l],i[a].style.display="none",i[l].style.display="block",s[l]=!0,a=l},c.src=o[l]}else i[l].src=o[l]}a=r,t.resizeSensorInstance=new e(t,u),u()}function m(){for(var e=d()("[data-responsive-image],[responsive-image]"),t=0,i=e.length;t<i;t++)u(e[t])}var h=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,f=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function g(e){var t,i,n,o;for(e=e.replace(/'/g,'"');null!==(t=h.exec(e));)for(i=t[1]+t[3],n=t[2];null!==(o=f.exec(n));)c(i,o[1],o[2],o[3])}function v(e){var t="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||g(e);else for(var i=0,n=e.length;i<n;i++)1===e[i].type?-1!==(t=e[i].selectorText||e[i].cssText).indexOf("min-height")||-1!==t.indexOf("max-height")?g(t):-1===t.indexOf("min-width")&&-1===t.indexOf("max-width")||g(t):4===e[i].type?v(e[i].cssRules||e[i].rules):3===e[i].type&&e[i].styleSheet.hasOwnProperty("cssRules")&&v(e[i].styleSheet.cssRules)}var x=!1;this.init=function(){var i="animationstart";void 0!==document.documentElement.style.webkitAnimationName?i="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?i="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(i="oanimationstart"),document.body.addEventListener(i,function(t){var i=t.target,o=i&&window.getComputedStyle(i,null),r=o&&o.getPropertyValue("animation-name");if(r&&-1!==r.indexOf("element-queries")){i.elementQueriesSensor=new e(i,function(){i.elementQueriesSetupInformation&&i.elementQueriesSetupInformation.call()});var a=window.getComputedStyle(i.resizeSensor,null).getPropertyValue("min-width");a=parseInt(a.replace("px","")),l(t.target,n[a])}}),x||((t=document.createElement("style")).type="text/css",t.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",t.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(t),x=!0);for(var o=0,r=document.styleSheets.length;o<r;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),v(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(a){}m()},this.findElementQueriesElements=function(e){p(e)},this.update=function(){this.init()}};t.update=function(){t.instance.update()},t.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},t.init=function(){t.instance||(t.instance=new t),t.instance.init()};var i=function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.onload=e};return t.findElementQueriesElements=function(e){t.instance.findElementQueriesElements(e)},t.listen=function(){i(t.init)},t})?n.apply(t,o):n)||(e.exports=r)},"./node_modules/css-element-queries/src/ResizeSensor.js":function(e,t,i){"use strict";var n,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(n=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(t){return e.setTimeout(t,20)},i=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(t){e.clearTimeout(t)};function n(e,t){var i=Object.prototype.toString.call(e),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,r=e.length;if(n)for(;o<r;o++)t(e[o]);else t(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function r(e,t){Object.keys(t).forEach(function(i){e.style[i]=t[i]})}var a=function(e,s){var l=0;function c(){var e,t,i=[];this.add=function(e){i.push(e)},this.call=function(n){for(e=0,t=i.length;e<t;e++)i[e].call(this,n)},this.remove=function(n){var o=[];for(e=0,t=i.length;e<t;e++)i[e]!==n&&o.push(i[e]);i=o},this.length=function(){return i.length}}function d(e,i){if(e)if(e.resizedAttached)e.resizedAttached.add(i);else{e.resizedAttached=new c,e.resizedAttached.add(i),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var n={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},a={position:"absolute",left:"0px",top:"0px",transition:"0s"};r(e.resizeSensor,n);var s=document.createElement("div");s.className="resize-sensor-expand",r(s,n);var d=document.createElement("div");r(d,a),s.appendChild(d);var p=document.createElement("div");p.className="resize-sensor-shrink",r(p,n);var u=document.createElement("div");r(u,a),r(u,{width:"200%",height:"200%"}),p.appendChild(u),e.resizeSensor.appendChild(s),e.resizeSensor.appendChild(p),e.appendChild(e.resizeSensor);var m=window.getComputedStyle(e),h=m?m.getPropertyValue("position"):null;"absolute"!==h&&"relative"!==h&&"fixed"!==h&&"sticky"!==h&&(e.style.position="relative");var f=!1,g=0,v=o(e),x=0,y=0,b=!0;l=0;var C=function(){var t=e.offsetWidth,i=e.offsetHeight;d.style.width=t+10+"px",d.style.height=i+10+"px",s.scrollLeft=t+10,s.scrollTop=i+10,p.scrollLeft=t+10,p.scrollTop=i+10},S=function(){if(b){if(0===e.offsetWidth&&0===e.offsetHeight)return void(l||(l=t(function(){l=0,S()})));b=!1}C()};e.resizeSensor.resetSensor=S;var w=function(){g=0,f&&(x=v.width,y=v.height,e.resizedAttached&&e.resizedAttached.call(v))},I=function(){v=o(e),(f=v.width!==x||v.height!==y)&&!g&&(g=t(w)),S()},_=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};_(s,"scroll",I),_(p,"scroll",I),l=t(function(){l=0,S()})}}n(e,function(e){d(e,s)}),this.detach=function(t){l||(i(l),l=0),a.detach(e,t)},this.reset=function(){e.resizeSensor.resetSensor()}};if(a.reset=function(e){n(e,function(e){e.resizeSensor.resetSensor()})},a.detach=function(e,t){n(e,function(e){e&&(e.resizedAttached&&"function"==typeof t&&(e.resizedAttached.remove(t),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},"undefined"!=typeof MutationObserver){var s=new MutationObserver(function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=e[t].addedNodes,n=0;n<i.length;n++)i[n].resizeSensor&&a.reset(i[n])});document.addEventListener("DOMContentLoaded",function(e){s.observe(document.body,{childList:!0,subtree:!0})})}return a})?n.call(t,i,t,e):n)||(e.exports=o)},"./node_modules/d3-array/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>o,map:()=>r});var n=Array.prototype,o=n.slice,r=n.map},"./node_modules/d3-array/src/ascending.js":(e,t,i)=>{"use strict";function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/bisect.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{bisectRight:()=>r,bisectLeft:()=>a,default:()=>s});var n=i("./node_modules/d3-array/src/ascending.js"),o=(0,i("./node_modules/d3-array/src/bisector.js").default)(n.default),r=o.right,a=o.left;const s=r},"./node_modules/d3-array/src/bisector.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/ascending.js");function o(e){var t;return 1===e.length&&(t=e,e=function(e,i){return(0,n.default)(t(e),i)}),{left:function(t,i,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var r=n+o>>>1;e(t[r],i)<0?n=r+1:o=r}return n},right:function(t,i,n,o){for(null==n&&(n=0),null==o&&(o=t.length);n<o;){var r=n+o>>>1;e(t[r],i)>0?o=r:n=r+1}return n}}}},"./node_modules/d3-array/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/cross.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/pairs.js");function o(e,t,i){var o,r,a,s,l=e.length,c=t.length,d=new Array(l*c);for(null==i&&(i=n.pair),o=a=0;o<l;++o)for(s=e[o],r=0;r<c;++r,++a)d[a]=i(s,t[r]);return d}},"./node_modules/d3-array/src/descending.js":(e,t,i)=>{"use strict";function n(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/deviation.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/variance.js");function o(e,t){var i=(0,n.default)(e,t);return i?Math.sqrt(i):i}},"./node_modules/d3-array/src/extent.js":(e,t,i)=>{"use strict";function n(e,t){var i,n,o,r=e.length,a=-1;if(null==t){for(;++a<r;)if(null!=(i=e[a])&&i>=i)for(n=o=i;++a<r;)null!=(i=e[a])&&(n>i&&(n=i),o<i&&(o=i))}else for(;++a<r;)if(null!=(i=t(e[a],a,e))&&i>=i)for(n=o=i;++a<r;)null!=(i=t(e[a],a,e))&&(n>i&&(n=i),o<i&&(o=i));return[n,o]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/histogram.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/d3-array/src/array.js"),o=i("./node_modules/d3-array/src/bisect.js"),r=i("./node_modules/d3-array/src/constant.js"),a=i("./node_modules/d3-array/src/extent.js"),s=i("./node_modules/d3-array/src/identity.js"),l=i("./node_modules/d3-array/src/range.js"),c=i("./node_modules/d3-array/src/ticks.js"),d=i("./node_modules/d3-array/src/threshold/sturges.js");function p(){var e=s.default,t=a.default,i=d.default;function p(n){var r,a,s=n.length,d=new Array(s);for(r=0;r<s;++r)d[r]=e(n[r],r,n);var p=t(d),u=p[0],m=p[1],h=i(d,u,m);Array.isArray(h)||(h=(0,c.tickStep)(u,m,h),h=(0,l.default)(Math.ceil(u/h)*h,m,h));for(var f=h.length;h[0]<=u;)h.shift(),--f;for(;h[f-1]>m;)h.pop(),--f;var g,v=new Array(f+1);for(r=0;r<=f;++r)(g=v[r]=[]).x0=r>0?h[r-1]:u,g.x1=r<f?h[r]:m;for(r=0;r<s;++r)u<=(a=d[r])&&a<=m&&v[(0,o.default)(h,a,0,f)].push(n[r]);return v}return p.value=function(t){return arguments.length?(e="function"==typeof t?t:(0,r.default)(t),p):e},p.domain=function(e){return arguments.length?(t="function"==typeof e?e:(0,r.default)([e[0],e[1]]),p):t},p.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?(0,r.default)(n.slice.call(e)):(0,r.default)(e),p):i},p}},"./node_modules/d3-array/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{bisect:()=>n.default,bisectRight:()=>n.bisectRight,bisectLeft:()=>n.bisectLeft,ascending:()=>o.default,bisector:()=>r.default,cross:()=>a.default,descending:()=>s.default,deviation:()=>l.default,extent:()=>c.default,histogram:()=>d.default,thresholdFreedmanDiaconis:()=>p.default,thresholdScott:()=>u.default,thresholdSturges:()=>m.default,max:()=>h.default,mean:()=>f.default,median:()=>g.default,merge:()=>v.default,min:()=>x.default,pairs:()=>y.default,permute:()=>b.default,quantile:()=>C.default,range:()=>S.default,scan:()=>w.default,shuffle:()=>I.default,sum:()=>_.default,ticks:()=>D.default,tickIncrement:()=>D.tickIncrement,tickStep:()=>D.tickStep,transpose:()=>R.default,variance:()=>A.default,zip:()=>T.default});var n=i("./node_modules/d3-array/src/bisect.js"),o=i("./node_modules/d3-array/src/ascending.js"),r=i("./node_modules/d3-array/src/bisector.js"),a=i("./node_modules/d3-array/src/cross.js"),s=i("./node_modules/d3-array/src/descending.js"),l=i("./node_modules/d3-array/src/deviation.js"),c=i("./node_modules/d3-array/src/extent.js"),d=i("./node_modules/d3-array/src/histogram.js"),p=i("./node_modules/d3-array/src/threshold/freedmanDiaconis.js"),u=i("./node_modules/d3-array/src/threshold/scott.js"),m=i("./node_modules/d3-array/src/threshold/sturges.js"),h=i("./node_modules/d3-array/src/max.js"),f=i("./node_modules/d3-array/src/mean.js"),g=i("./node_modules/d3-array/src/median.js"),v=i("./node_modules/d3-array/src/merge.js"),x=i("./node_modules/d3-array/src/min.js"),y=i("./node_modules/d3-array/src/pairs.js"),b=i("./node_modules/d3-array/src/permute.js"),C=i("./node_modules/d3-array/src/quantile.js"),S=i("./node_modules/d3-array/src/range.js"),w=i("./node_modules/d3-array/src/scan.js"),I=i("./node_modules/d3-array/src/shuffle.js"),_=i("./node_modules/d3-array/src/sum.js"),D=i("./node_modules/d3-array/src/ticks.js"),R=i("./node_modules/d3-array/src/transpose.js"),A=i("./node_modules/d3-array/src/variance.js"),T=i("./node_modules/d3-array/src/zip.js")},"./node_modules/d3-array/src/max.js":(e,t,i)=>{"use strict";function n(e,t){var i,n,o=e.length,r=-1;if(null==t){for(;++r<o;)if(null!=(i=e[r])&&i>=i)for(n=i;++r<o;)null!=(i=e[r])&&i>n&&(n=i)}else for(;++r<o;)if(null!=(i=t(e[r],r,e))&&i>=i)for(n=i;++r<o;)null!=(i=t(e[r],r,e))&&i>n&&(n=i);return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/mean.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/number.js");function o(e,t){var i,o=e.length,r=o,a=-1,s=0;if(null==t)for(;++a<o;)isNaN(i=(0,n.default)(e[a]))?--r:s+=i;else for(;++a<o;)isNaN(i=(0,n.default)(t(e[a],a,e)))?--r:s+=i;if(r)return s/r}},"./node_modules/d3-array/src/median.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-array/src/ascending.js"),o=i("./node_modules/d3-array/src/number.js"),r=i("./node_modules/d3-array/src/quantile.js");function a(e,t){var i,a=e.length,s=-1,l=[];if(null==t)for(;++s<a;)isNaN(i=(0,o.default)(e[s]))||l.push(i);else for(;++s<a;)isNaN(i=(0,o.default)(t(e[s],s,e)))||l.push(i);return(0,r.default)(l.sort(n.default),.5)}},"./node_modules/d3-array/src/merge.js":(e,t,i)=>{"use strict";function n(e){for(var t,i,n,o=e.length,r=-1,a=0;++r<o;)a+=e[r].length;for(i=new Array(a);--o>=0;)for(t=(n=e[o]).length;--t>=0;)i[--a]=n[t];return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/min.js":(e,t,i)=>{"use strict";function n(e,t){var i,n,o=e.length,r=-1;if(null==t){for(;++r<o;)if(null!=(i=e[r])&&i>=i)for(n=i;++r<o;)null!=(i=e[r])&&n>i&&(n=i)}else for(;++r<o;)if(null!=(i=t(e[r],r,e))&&i>=i)for(n=i;++r<o;)null!=(i=t(e[r],r,e))&&n>i&&(n=i);return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/number.js":(e,t,i)=>{"use strict";function n(e){return null===e?NaN:+e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/pairs.js":(e,t,i)=>{"use strict";function n(e,t){null==t&&(t=o);for(var i=0,n=e.length-1,r=e[0],a=new Array(n<0?0:n);i<n;)a[i]=t(r,r=e[++i]);return a}function o(e,t){return[e,t]}i.r(t),i.d(t,{default:()=>n,pair:()=>o})},"./node_modules/d3-array/src/permute.js":(e,t,i)=>{"use strict";function n(e,t){for(var i=t.length,n=new Array(i);i--;)n[i]=e[t[i]];return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/quantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/number.js");function o(e,t,i){if(null==i&&(i=n.default),o=e.length){if((t=+t)<=0||o<2)return+i(e[0],0,e);if(t>=1)return+i(e[o-1],o-1,e);var o,r=(o-1)*t,a=Math.floor(r),s=+i(e[a],a,e);return s+(+i(e[a+1],a+1,e)-s)*(r-a)}}},"./node_modules/d3-array/src/range.js":(e,t,i)=>{"use strict";function n(e,t,i){e=+e,t=+t,i=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+i;for(var n=-1,o=0|Math.max(0,Math.ceil((t-e)/i)),r=new Array(o);++n<o;)r[n]=e+n*i;return r}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/scan.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/ascending.js");function o(e,t){if(i=e.length){var i,o,r=0,a=0,s=e[a];for(null==t&&(t=n.default);++r<i;)(t(o=e[r],s)<0||0!==t(s,s))&&(s=o,a=r);return 0===t(s,s)?a:void 0}}},"./node_modules/d3-array/src/shuffle.js":(e,t,i)=>{"use strict";function n(e,t,i){for(var n,o,r=(null==i?e.length:i)-(t=null==t?0:+t);r;)o=Math.random()*r--|0,n=e[r+t],e[r+t]=e[o+t],e[o+t]=n;return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/sum.js":(e,t,i)=>{"use strict";function n(e,t){var i,n=e.length,o=-1,r=0;if(null==t)for(;++o<n;)(i=+e[o])&&(r+=i);else for(;++o<n;)(i=+t(e[o],o,e))&&(r+=i);return r}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/threshold/freedmanDiaconis.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-array/src/array.js"),o=i("./node_modules/d3-array/src/ascending.js"),r=i("./node_modules/d3-array/src/number.js"),a=i("./node_modules/d3-array/src/quantile.js");function s(e,t,i){return e=n.map.call(e,r.default).sort(o.default),Math.ceil((i-t)/(2*((0,a.default)(e,.75)-(0,a.default)(e,.25))*Math.pow(e.length,-1/3)))}},"./node_modules/d3-array/src/threshold/scott.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/deviation.js");function o(e,t,i){return Math.ceil((i-t)/(3.5*(0,n.default)(e)*Math.pow(e.length,-1/3)))}},"./node_modules/d3-array/src/threshold/sturges.js":(e,t,i)=>{"use strict";function n(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-array/src/ticks.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,tickIncrement:()=>s,tickStep:()=>l});var n=Math.sqrt(50),o=Math.sqrt(10),r=Math.sqrt(2);function a(e,t,i){var n,o,r,a,l=-1;if(i=+i,(e=+e)===(t=+t)&&i>0)return[e];if((n=t<e)&&(o=e,e=t,t=o),0===(a=s(e,t,i))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),r=new Array(o=Math.ceil(t-e+1));++l<o;)r[l]=(e+l)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),r=new Array(o=Math.ceil(e-t+1));++l<o;)r[l]=(e-l)/a;return n&&r.reverse(),r}function s(e,t,i){var a=(t-e)/Math.max(0,i),s=Math.floor(Math.log(a)/Math.LN10),l=a/Math.pow(10,s);return s>=0?(l>=n?10:l>=o?5:l>=r?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=n?10:l>=o?5:l>=r?2:1)}function l(e,t,i){var a=Math.abs(t-e)/Math.max(0,i),s=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),l=a/s;return l>=n?s*=10:l>=o?s*=5:l>=r&&(s*=2),t<e?-s:s}},"./node_modules/d3-array/src/transpose.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/min.js");function o(e){if(!(a=e.length))return[];for(var t=-1,i=(0,n.default)(e,r),o=new Array(i);++t<i;)for(var a,s=-1,l=o[t]=new Array(a);++s<a;)l[s]=e[s][t];return o}function r(e){return e.length}},"./node_modules/d3-array/src/variance.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/number.js");function o(e,t){var i,o,r=e.length,a=0,s=-1,l=0,c=0;if(null==t)for(;++s<r;)isNaN(i=(0,n.default)(e[s]))||(c+=(o=i-l)*(i-(l+=o/++a)));else for(;++s<r;)isNaN(i=(0,n.default)(t(e[s],s,e)))||(c+=(o=i-l)*(i-(l+=o/++a)));if(a>1)return c/(a-1)}},"./node_modules/d3-array/src/zip.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-array/src/transpose.js");function o(){return(0,n.default)(arguments)}},"./node_modules/d3-axis/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>n});var n=Array.prototype.slice},"./node_modules/d3-axis/src/axis.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{axisTop:()=>g,axisRight:()=>v,axisBottom:()=>x,axisLeft:()=>y});var n=i("./node_modules/d3-axis/src/array.js"),o=i("./node_modules/d3-axis/src/identity.js"),r=1,a=2,s=3,l=4,c=1e-6;function d(e){return"translate("+(e+.5)+",0)"}function p(e){return"translate(0,"+(e+.5)+")"}function u(e){return function(t){return+e(t)}}function m(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(i){return+e(i)+t}}function h(){return!this.__axis}function f(e,t){var i=[],f=null,g=null,v=6,x=6,y=3,b=e===r||e===l?-1:1,C=e===l||e===a?"x":"y",S=e===r||e===s?d:p;function w(n){var d=null==f?t.ticks?t.ticks.apply(t,i):t.domain():f,p=null==g?t.tickFormat?t.tickFormat.apply(t,i):o.default:g,w=Math.max(v,0)+y,I=t.range(),_=+I[0]+.5,D=+I[I.length-1]+.5,R=(t.bandwidth?m:u)(t.copy()),A=n.selection?n.selection():n,T=A.selectAll(".domain").data([null]),F=A.selectAll(".tick").data(d,t).order(),E=F.exit(),M=F.enter().append("g").attr("class","tick"),O=F.select("line"),k=F.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge(M),O=O.merge(M.append("line").attr("stroke","currentColor").attr(C+"2",b*v)),k=k.merge(M.append("text").attr("fill","currentColor").attr(C,b*w).attr("dy",e===r?"0em":e===s?"0.71em":"0.32em")),n!==A&&(T=T.transition(n),F=F.transition(n),O=O.transition(n),k=k.transition(n),E=E.transition(n).attr("opacity",c).attr("transform",function(e){return isFinite(e=R(e))?S(e):this.getAttribute("transform")}),M.attr("opacity",c).attr("transform",function(e){var t=this.parentNode.__axis;return S(t&&isFinite(t=t(e))?t:R(e))})),E.remove(),T.attr("d",e===l||e==a?x?"M"+b*x+","+_+"H0.5V"+D+"H"+b*x:"M0.5,"+_+"V"+D:x?"M"+_+","+b*x+"V0.5H"+D+"V"+b*x:"M"+_+",0.5H"+D),F.attr("opacity",1).attr("transform",function(e){return S(R(e))}),O.attr(C+"2",b*v),k.attr(C,b*w).text(p),A.filter(h).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===a?"start":e===l?"end":"middle"),A.each(function(){this.__axis=R})}return w.scale=function(e){return arguments.length?(t=e,w):t},w.ticks=function(){return i=n.slice.call(arguments),w},w.tickArguments=function(e){return arguments.length?(i=null==e?[]:n.slice.call(e),w):i.slice()},w.tickValues=function(e){return arguments.length?(f=null==e?null:n.slice.call(e),w):f&&f.slice()},w.tickFormat=function(e){return arguments.length?(g=e,w):g},w.tickSize=function(e){return arguments.length?(v=x=+e,w):v},w.tickSizeInner=function(e){return arguments.length?(v=+e,w):v},w.tickSizeOuter=function(e){return arguments.length?(x=+e,w):x},w.tickPadding=function(e){return arguments.length?(y=+e,w):y},w}function g(e){return f(r,e)}function v(e){return f(a,e)}function x(e){return f(s,e)}function y(e){return f(l,e)}},"./node_modules/d3-axis/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-axis/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{axisTop:()=>n.axisTop,axisRight:()=>n.axisRight,axisBottom:()=>n.axisBottom,axisLeft:()=>n.axisLeft});var n=i("./node_modules/d3-axis/src/axis.js")},"./node_modules/d3-brush/src/brush.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{brushSelection:()=>F,brushX:()=>E,brushY:()=>M,default:()=>O});var n=i("./node_modules/d3-dispatch/src/index.js"),o=i("./node_modules/d3-drag/src/index.js"),r=i("./node_modules/d3-interpolate/src/index.js"),a=i("./node_modules/d3-selection/src/index.js"),s=i("./node_modules/d3-transition/src/index.js"),l=i("./node_modules/d3-brush/src/constant.js"),c=i("./node_modules/d3-brush/src/event.js"),d=i("./node_modules/d3-brush/src/noevent.js"),p={name:"drag"},u={name:"space"},m={name:"handle"},h={name:"center"};function f(e){return[+e[0],+e[1]]}function g(e){return[f(e[0]),f(e[1])]}var v={name:"x",handles:["w","e"].map(_),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},x={name:"y",handles:["n","s"].map(_),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},y={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(_),input:function(e){return null==e?null:g(e)},output:function(e){return e}},b={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},C={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},S={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},w={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},I={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function _(e){return{type:e}}function D(){return!a.event.ctrlKey&&!a.event.button}function R(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function A(){return navigator.maxTouchPoints||"ontouchstart"in this}function T(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function F(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function E(){return k(v)}function M(){return k(x)}function O(){return k(y)}function k(e){var t,i=R,f=D,y=A,F=!0,E=(0,n.dispatch)("start","brush","end"),M=6;function O(t){var i=t.property("__brush",B).selectAll(".overlay").data([_("overlay")]);i.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",b.overlay).merge(i).each(function(){var e=T(this).extent;(0,a.select)(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([_("selection")]).enter().append("rect").attr("class","selection").attr("cursor",b.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=t.selectAll(".handle").data(e.handles,function(e){return e.type});n.exit().remove(),n.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return b[e.type]}),t.each(k).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",N).filter(y).on("touchstart.brush",N).on("touchmove.brush",V).on("touchend.brush touchcancel.brush",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function k(){var e=(0,a.select)(this),t=T(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-M/2:t[0][0]-M/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-M/2:t[0][1]-M/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+M:M}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+M:M})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function j(e,t,i){var n=e.__brush.emitter;return!n||i&&n.clean?new P(e,t,i):n}function P(e,t,i){this.that=e,this.args=t,this.state=e.__brush,this.active=0,this.clean=i}function N(){if((!t||a.event.touches)&&f.apply(this,arguments)){var i,n,r,l,c,g,y,_,D,R,A,E,M=this,O=a.event.target.__data__.type,P="selection"===(F&&a.event.metaKey?O="overlay":O)?p:F&&a.event.altKey?h:m,N=e===x?null:w[O],V=e===v?null:I[O],L=T(M),B=L.extent,$=L.selection,G=B[0][0],z=B[0][1],U=B[1][0],q=B[1][1],X=0,H=0,W=N&&V&&F&&a.event.shiftKey,Y=a.event.touches?(E=a.event.changedTouches[0].identifier,function(e){return(0,a.touch)(e,a.event.touches,E)}):a.mouse,Q=Y(M),K=Q,J=j(M,arguments,!0).beforestart();"overlay"===O?($&&(D=!0),L.selection=$=[[i=e===x?G:Q[0],r=e===v?z:Q[1]],[c=e===x?U:i,y=e===v?q:r]]):(i=$[0][0],r=$[0][1],c=$[1][0],y=$[1][1]),n=i,l=r,g=c,_=y;var Z=(0,a.select)(M).attr("pointer-events","none"),ee=Z.selectAll(".overlay").attr("cursor",b[O]);if(a.event.touches)J.moved=ie,J.ended=oe;else{var te=(0,a.select)(a.event.view).on("mousemove.brush",ie,!0).on("mouseup.brush",oe,!0);F&&te.on("keydown.brush",function(){switch(a.event.keyCode){case 16:W=N&&V;break;case 18:P===m&&(N&&(c=g-X*N,i=n+X*N),V&&(y=_-H*V,r=l+H*V),P=h,ne());break;case 32:P!==m&&P!==h||(N<0?c=g-X:N>0&&(i=n-X),V<0?y=_-H:V>0&&(r=l-H),P=u,ee.attr("cursor",b.selection),ne());break;default:return}(0,d.default)()},!0).on("keyup.brush",function(){switch(a.event.keyCode){case 16:W&&(R=A=W=!1,ne());break;case 18:P===h&&(N<0?c=g:N>0&&(i=n),V<0?y=_:V>0&&(r=l),P=m,ne());break;case 32:P===u&&(a.event.altKey?(N&&(c=g-X*N,i=n+X*N),V&&(y=_-H*V,r=l+H*V),P=h):(N<0?c=g:N>0&&(i=n),V<0?y=_:V>0&&(r=l),P=m),ee.attr("cursor",b[O]),ne());break;default:return}(0,d.default)()},!0),(0,o.dragDisable)(a.event.view)}(0,d.nopropagation)(),(0,s.interrupt)(M),k.call(M),J.start()}function ie(){var e=Y(M);!W||R||A||(Math.abs(e[0]-K[0])>Math.abs(e[1]-K[1])?A=!0:R=!0),K=e,D=!0,(0,d.default)(),ne()}function ne(){var e;switch(X=K[0]-Q[0],H=K[1]-Q[1],P){case u:case p:N&&(X=Math.max(G-i,Math.min(U-c,X)),n=i+X,g=c+X),V&&(H=Math.max(z-r,Math.min(q-y,H)),l=r+H,_=y+H);break;case m:N<0?(X=Math.max(G-i,Math.min(U-i,X)),n=i+X,g=c):N>0&&(X=Math.max(G-c,Math.min(U-c,X)),n=i,g=c+X),V<0?(H=Math.max(z-r,Math.min(q-r,H)),l=r+H,_=y):V>0&&(H=Math.max(z-y,Math.min(q-y,H)),l=r,_=y+H);break;case h:N&&(n=Math.max(G,Math.min(U,i-X*N)),g=Math.max(G,Math.min(U,c+X*N))),V&&(l=Math.max(z,Math.min(q,r-H*V)),_=Math.max(z,Math.min(q,y+H*V)))}g<n&&(N*=-1,e=i,i=c,c=e,e=n,n=g,g=e,O in C&&ee.attr("cursor",b[O=C[O]])),_<l&&(V*=-1,e=r,r=y,y=e,e=l,l=_,_=e,O in S&&ee.attr("cursor",b[O=S[O]])),L.selection&&($=L.selection),R&&(n=$[0][0],g=$[1][0]),A&&(l=$[0][1],_=$[1][1]),$[0][0]===n&&$[0][1]===l&&$[1][0]===g&&$[1][1]===_||(L.selection=[[n,l],[g,_]],k.call(M),J.brush())}function oe(){if((0,d.nopropagation)(),a.event.touches){if(a.event.touches.length)return;t&&clearTimeout(t),t=setTimeout(function(){t=null},500)}else(0,o.dragEnable)(a.event.view,D),te.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Z.attr("pointer-events","all"),ee.attr("cursor",b.overlay),L.selection&&($=L.selection),function(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}($)&&(L.selection=null,k.call(M)),J.end()}}function V(){j(this,arguments).moved()}function L(){j(this,arguments).ended()}function B(){var t=this.__brush||{selection:null};return t.extent=g(i.apply(this,arguments)),t.dim=e,t}return O.move=function(t,i){t.selection?t.on("start.brush",function(){j(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){j(this,arguments).end()}).tween("brush",function(){var t=this,n=t.__brush,o=j(t,arguments),a=n.selection,s=e.input("function"==typeof i?i.apply(this,arguments):i,n.extent),l=(0,r.interpolate)(a,s);function c(e){n.selection=1===e&&null===s?null:l(e),k.call(t),o.brush()}return null!==a&&null!==s?c:c(1)}):t.each(function(){var t=this,n=arguments,o=t.__brush,r=e.input("function"==typeof i?i.apply(t,n):i,o.extent),a=j(t,n).beforestart();(0,s.interrupt)(t),o.selection=null===r?null:r,k.call(t),a.start().brush().end()})},O.clear=function(e){O.move(e,null)},P.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){(0,a.customEvent)(new c.default(O,t,e.output(this.state.selection)),E.apply,E,[t,this.that,this.args])}},O.extent=function(e){return arguments.length?(i="function"==typeof e?e:(0,l.default)(g(e)),O):i},O.filter=function(e){return arguments.length?(f="function"==typeof e?e:(0,l.default)(!!e),O):f},O.touchable=function(e){return arguments.length?(y="function"==typeof e?e:(0,l.default)(!!e),O):y},O.handleSize=function(e){return arguments.length?(M=+e,O):M},O.keyModifiers=function(e){return arguments.length?(F=!!e,O):F},O.on=function(){var e=E.on.apply(E,arguments);return e===E?O:e},O}},"./node_modules/d3-brush/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-brush/src/event.js":(e,t,i)=>{"use strict";function n(e,t,i){this.target=e,this.type=t,this.selection=i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-brush/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{brush:()=>n.default,brushX:()=>n.brushX,brushY:()=>n.brushY,brushSelection:()=>n.brushSelection});var n=i("./node_modules/d3-brush/src/brush.js")},"./node_modules/d3-brush/src/noevent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{nopropagation:()=>o,default:()=>r});var n=i("./node_modules/d3-selection/src/index.js");function o(){n.event.stopImmediatePropagation()}function r(){n.event.preventDefault(),n.event.stopImmediatePropagation()}},"./node_modules/d3-chord/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>n});var n=Array.prototype.slice},"./node_modules/d3-chord/src/chord.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-chord/src/math.js");function r(){var e=0,t=null,i=null,r=null;function a(a){var s,l,c,d,p,u,m=a.length,h=[],f=(0,n.range)(m),g=[],v=[],x=v.groups=new Array(m),y=new Array(m*m);for(s=0,p=-1;++p<m;){for(l=0,u=-1;++u<m;)l+=a[p][u];h.push(l),g.push((0,n.range)(m)),s+=l}for(t&&f.sort(function(e,i){return t(h[e],h[i])}),i&&g.forEach(function(e,t){e.sort(function(e,n){return i(a[t][e],a[t][n])})}),d=(s=(0,o.max)(0,o.tau-e*m)/s)?e:o.tau/m,l=0,p=-1;++p<m;){for(c=l,u=-1;++u<m;){var b=f[p],C=g[b][u],S=a[b][C],w=l,I=l+=S*s;y[C*m+b]={index:b,subindex:C,startAngle:w,endAngle:I,value:S}}x[b]={index:b,startAngle:c,endAngle:l,value:h[b]},l+=d}for(p=-1;++p<m;)for(u=p-1;++u<m;){var _=y[u*m+p],D=y[p*m+u];(_.value||D.value)&&v.push(_.value<D.value?{source:D,target:_}:{source:_,target:D})}return r?v.sort(r):v}return a.padAngle=function(t){return arguments.length?(e=(0,o.max)(0,t),a):e},a.sortGroups=function(e){return arguments.length?(t=e,a):t},a.sortSubgroups=function(e){return arguments.length?(i=e,a):i},a.sortChords=function(e){return arguments.length?(null==e?r=null:(t=e,r=function(e,i){return t(e.source.value+e.target.value,i.source.value+i.target.value)})._=e,a):r&&r._;var t},a}},"./node_modules/d3-chord/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-chord/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{chord:()=>n.default,ribbon:()=>o.default});var n=i("./node_modules/d3-chord/src/chord.js"),o=i("./node_modules/d3-chord/src/ribbon.js")},"./node_modules/d3-chord/src/math.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{cos:()=>n,sin:()=>o,pi:()=>r,halfPi:()=>a,tau:()=>s,max:()=>l});var n=Math.cos,o=Math.sin,r=Math.PI,a=r/2,s=2*r,l=Math.max},"./node_modules/d3-chord/src/ribbon.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i("./node_modules/d3-chord/src/array.js"),o=i("./node_modules/d3-chord/src/constant.js"),r=i("./node_modules/d3-chord/src/math.js"),a=i("./node_modules/d3-path/src/index.js");function s(e){return e.source}function l(e){return e.target}function c(e){return e.radius}function d(e){return e.startAngle}function p(e){return e.endAngle}function u(){var e=s,t=l,i=c,u=d,m=p,h=null;function f(){var o,s=n.slice.call(arguments),l=e.apply(this,s),c=t.apply(this,s),d=+i.apply(this,(s[0]=l,s)),p=u.apply(this,s)-r.halfPi,f=m.apply(this,s)-r.halfPi,g=d*(0,r.cos)(p),v=d*(0,r.sin)(p),x=+i.apply(this,(s[0]=c,s)),y=u.apply(this,s)-r.halfPi,b=m.apply(this,s)-r.halfPi;if(h||(h=o=(0,a.path)()),h.moveTo(g,v),h.arc(0,0,d,p,f),p===y&&f===b||(h.quadraticCurveTo(0,0,x*(0,r.cos)(y),x*(0,r.sin)(y)),h.arc(0,0,x,y,b)),h.quadraticCurveTo(0,0,g,v),h.closePath(),o)return h=null,o+""||null}return f.radius=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)(+e),f):i},f.startAngle=function(e){return arguments.length?(u="function"==typeof e?e:(0,o.default)(+e),f):u},f.endAngle=function(e){return arguments.length?(m="function"==typeof e?e:(0,o.default)(+e),f):m},f.source=function(t){return arguments.length?(e=t,f):e},f.target=function(e){return arguments.length?(t=e,f):t},f.context=function(e){return arguments.length?(h=null==e?null:e,f):h},f}},"./node_modules/d3-collection/src/entries.js":(e,t,i)=>{"use strict";function n(e){var t=[];for(var i in e)t.push({key:i,value:e[i]});return t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-collection/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{nest:()=>n.default,set:()=>o.default,map:()=>r.default,keys:()=>a.default,values:()=>s.default,entries:()=>l.default});var n=i("./node_modules/d3-collection/src/nest.js"),o=i("./node_modules/d3-collection/src/set.js"),r=i("./node_modules/d3-collection/src/map.js"),a=i("./node_modules/d3-collection/src/keys.js"),s=i("./node_modules/d3-collection/src/values.js"),l=i("./node_modules/d3-collection/src/entries.js")},"./node_modules/d3-collection/src/keys.js":(e,t,i)=>{"use strict";function n(e){var t=[];for(var i in e)t.push(i);return t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-collection/src/map.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{prefix:()=>n,default:()=>a});var n="$";function o(){}function r(e,t){var i=new o;if(e instanceof o)e.each(function(e,t){i.set(t,e)});else if(Array.isArray(e)){var n,r=-1,a=e.length;if(null==t)for(;++r<a;)i.set(r,e[r]);else for(;++r<a;)i.set(t(n=e[r],r,e),n)}else if(e)for(var s in e)i.set(s,e[s]);return i}o.prototype=r.prototype={constructor:o,has:function(e){return n+e in this},get:function(e){return this[n+e]},set:function(e,t){return this[n+e]=t,this},remove:function(e){var t=n+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===n&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===n&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===n&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===n&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===n&&++e;return e},empty:function(){for(var e in this)if(e[0]===n)return!1;return!0},each:function(e){for(var t in this)t[0]===n&&e(this[t],t.slice(1),this)}};const a=r},"./node_modules/d3-collection/src/nest.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-collection/src/map.js");function o(){var e,t,i,o=[],c=[];function d(i,r,a,s){if(r>=o.length)return null!=e&&i.sort(e),null!=t?t(i):i;for(var l,c,p,u=-1,m=i.length,h=o[r++],f=(0,n.default)(),g=a();++u<m;)(p=f.get(l=h(c=i[u])+""))?p.push(c):f.set(l,[c]);return f.each(function(e,t){s(g,t,d(e,r,a,s))}),g}function p(e,i){if(++i>o.length)return e;var n,r=c[i-1];return null!=t&&i>=o.length?n=e.entries():(n=[],e.each(function(e,t){n.push({key:t,values:p(e,i)})})),null!=r?n.sort(function(e,t){return r(e.key,t.key)}):n}return i={object:function(e){return d(e,0,r,a)},map:function(e){return d(e,0,s,l)},entries:function(e){return p(d(e,0,s,l),0)},key:function(e){return o.push(e),i},sortKeys:function(e){return c[o.length-1]=e,i},sortValues:function(t){return e=t,i},rollup:function(e){return t=e,i}}}function r(){return{}}function a(e,t,i){e[t]=i}function s(){return(0,n.default)()}function l(e,t,i){e.set(t,i)}},"./node_modules/d3-collection/src/set.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-collection/src/map.js");function o(){}var r=n.default.prototype;function a(e,t){var i=new o;if(e instanceof o)e.each(function(e){i.add(e)});else if(e){var n=-1,r=e.length;if(null==t)for(;++n<r;)i.add(e[n]);else for(;++n<r;)i.add(t(e[n],n,e))}return i}o.prototype=a.prototype={constructor:o,has:r.has,add:function(e){return e+="",this[n.prefix+e]=e,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each};const s=a},"./node_modules/d3-collection/src/values.js":(e,t,i)=>{"use strict";function n(e){var t=[];for(var i in e)t.push(e[i]);return t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-contour/src/area.js":(e,t,i)=>{"use strict";function n(e){for(var t=0,i=e.length,n=e[i-1][1]*e[0][0]-e[i-1][0]*e[0][1];++t<i;)n+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-contour/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>n});var n=Array.prototype.slice},"./node_modules/d3-contour/src/ascending.js":(e,t,i)=>{"use strict";function n(e,t){return e-t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-contour/src/blur.js":(e,t,i)=>{"use strict";function n(e,t,i){for(var n=e.width,o=e.height,r=1+(i<<1),a=0;a<o;++a)for(var s=0,l=0;s<n+i;++s)s<n&&(l+=e.data[s+a*n]),s>=i&&(s>=r&&(l-=e.data[s-r+a*n]),t.data[s-i+a*n]=l/Math.min(s+1,n-1+r-s,r))}function o(e,t,i){for(var n=e.width,o=e.height,r=1+(i<<1),a=0;a<n;++a)for(var s=0,l=0;s<o+i;++s)s<o&&(l+=e.data[a+s*n]),s>=i&&(s>=r&&(l-=e.data[a+(s-r)*n]),t.data[a+(s-i)*n]=l/Math.min(s+1,o-1+r-s,r))}i.r(t),i.d(t,{blurX:()=>n,blurY:()=>o})},"./node_modules/d3-contour/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-contour/src/contains.js":(e,t,i)=>{"use strict";function n(e,t){for(var i,n=-1,r=t.length;++n<r;)if(i=o(e,t[n]))return i;return 0}function o(e,t){for(var i=t[0],n=t[1],o=-1,a=0,s=e.length,l=s-1;a<s;l=a++){var c=e[a],d=c[0],p=c[1],u=e[l],m=u[0],h=u[1];if(r(c,u,t))return 0;p>n!=h>n&&i<(m-d)*(n-p)/(h-p)+d&&(o=-o)}return o}function r(e,t,i){var n,o,r,a;return function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])==(i[0]-e[0])*(t[1]-e[1])}(e,t,i)&&(o=e[n=+(e[0]===t[0])],r=i[n],a=t[n],o<=r&&r<=a||a<=r&&r<=o)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-contour/src/contours.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-contour/src/array.js"),r=i("./node_modules/d3-contour/src/ascending.js"),a=i("./node_modules/d3-contour/src/area.js"),s=i("./node_modules/d3-contour/src/constant.js"),l=i("./node_modules/d3-contour/src/contains.js"),c=i("./node_modules/d3-contour/src/noop.js"),d=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function p(){var e=1,t=1,i=n.thresholdSturges,p=f;function u(e){var t=i(e);if(Array.isArray(t))t=t.slice().sort(r.default);else{var o=(0,n.extent)(e),a=o[0],s=o[1];t=(0,n.tickStep)(a,s,t),t=(0,n.range)(Math.floor(a/t)*t,Math.floor(s/t)*t,t)}return t.map(function(t){return m(e,t)})}function m(i,n){var o=[],r=[];return function(i,n,o){var r,a,s,l,c,p,u=new Array,m=new Array;r=a=-1,l=i[0]>=n,d[l<<1].forEach(f);for(;++r<e-1;)s=l,l=i[r+1]>=n,d[s|l<<1].forEach(f);d[l<<0].forEach(f);for(;++a<t-1;){for(r=-1,l=i[a*e+e]>=n,c=i[a*e]>=n,d[l<<1|c<<2].forEach(f);++r<e-1;)s=l,l=i[a*e+e+r+1]>=n,p=c,c=i[a*e+r+1]>=n,d[s|l<<1|c<<2|p<<3].forEach(f);d[l|c<<3].forEach(f)}r=-1,c=i[a*e]>=n,d[c<<2].forEach(f);for(;++r<e-1;)p=c,c=i[a*e+r+1]>=n,d[c<<2|p<<3].forEach(f);function f(e){var t,i,n=[e[0][0]+r,e[0][1]+a],s=[e[1][0]+r,e[1][1]+a],l=h(n),c=h(s);(t=m[l])?(i=u[c])?(delete m[t.end],delete u[i.start],t===i?(t.ring.push(s),o(t.ring)):u[t.start]=m[i.end]={start:t.start,end:i.end,ring:t.ring.concat(i.ring)}):(delete m[t.end],t.ring.push(s),m[t.end=c]=t):(t=u[c])?(i=m[l])?(delete u[t.start],delete m[i.end],t===i?(t.ring.push(s),o(t.ring)):u[i.start]=m[t.end]={start:i.start,end:t.end,ring:i.ring.concat(t.ring)}):(delete u[t.start],t.ring.unshift(n),u[t.start=l]=t):u[l]=m[c]={start:l,end:c,ring:[n,s]}}d[c<<3].forEach(f)}(i,n,function(e){p(e,i,n),(0,a.default)(e)>0?o.push([e]):r.push(e)}),r.forEach(function(e){for(var t,i=0,n=o.length;i<n;++i)if(-1!==(0,l.default)((t=o[i])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:n,coordinates:o}}function h(t){return 2*t[0]+t[1]*(e+1)*4}function f(i,n,o){i.forEach(function(i){var r,a=i[0],s=i[1],l=0|a,c=0|s,d=n[c*e+l];a>0&&a<e&&l===a&&(r=n[c*e+l-1],i[0]=a+(o-r)/(d-r)-.5),s>0&&s<t&&c===s&&(r=n[(c-1)*e+l],i[1]=s+(o-r)/(d-r)-.5)})}return u.contour=m,u.size=function(i){if(!arguments.length)return[e,t];var n=Math.ceil(i[0]),o=Math.ceil(i[1]);if(!(n>0&&o>0))throw new Error("invalid size");return e=n,t=o,u},u.thresholds=function(e){return arguments.length?(i="function"==typeof e?e:Array.isArray(e)?(0,s.default)(o.slice.call(e)):(0,s.default)(e),u):i},u.smooth=function(e){return arguments.length?(p=e?f:c.default,u):p===f},u}},"./node_modules/d3-contour/src/density.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-contour/src/array.js"),r=i("./node_modules/d3-contour/src/blur.js"),a=i("./node_modules/d3-contour/src/constant.js"),s=i("./node_modules/d3-contour/src/contours.js");function l(e){return e[0]}function c(e){return e[1]}function d(){return 1}function p(){var e=l,t=c,i=d,p=960,u=500,m=20,h=2,f=3*m,g=p+2*f>>h,v=u+2*f>>h,x=(0,a.default)(20);function y(o){var a=new Float32Array(g*v),l=new Float32Array(g*v);o.forEach(function(n,o,r){var s=+e(n,o,r)+f>>h,l=+t(n,o,r)+f>>h,c=+i(n,o,r);s>=0&&s<g&&l>=0&&l<v&&(a[s+l*g]+=c)}),(0,r.blurX)({width:g,height:v,data:a},{width:g,height:v,data:l},m>>h),(0,r.blurY)({width:g,height:v,data:l},{width:g,height:v,data:a},m>>h),(0,r.blurX)({width:g,height:v,data:a},{width:g,height:v,data:l},m>>h),(0,r.blurY)({width:g,height:v,data:l},{width:g,height:v,data:a},m>>h),(0,r.blurX)({width:g,height:v,data:a},{width:g,height:v,data:l},m>>h),(0,r.blurY)({width:g,height:v,data:l},{width:g,height:v,data:a},m>>h);var c=x(a);if(!Array.isArray(c)){var d=(0,n.max)(a);c=(0,n.tickStep)(0,d,c),(c=(0,n.range)(0,Math.floor(d/c)*c,c)).shift()}return(0,s.default)().thresholds(c).size([g,v])(a).map(b)}function b(e){return e.value*=Math.pow(2,-2*h),e.coordinates.forEach(C),e}function C(e){e.forEach(S)}function S(e){e.forEach(w)}function w(e){e[0]=e[0]*Math.pow(2,h)-f,e[1]=e[1]*Math.pow(2,h)-f}function I(){return g=p+2*(f=3*m)>>h,v=u+2*f>>h,y}return y.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,a.default)(+t),y):e},y.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,a.default)(+e),y):t},y.weight=function(e){return arguments.length?(i="function"==typeof e?e:(0,a.default)(+e),y):i},y.size=function(e){if(!arguments.length)return[p,u];var t=Math.ceil(e[0]),i=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return p=t,u=i,I()},y.cellSize=function(e){if(!arguments.length)return 1<<h;if(!((e=+e)>=1))throw new Error("invalid cell size");return h=Math.floor(Math.log(e)/Math.LN2),I()},y.thresholds=function(e){return arguments.length?(x="function"==typeof e?e:Array.isArray(e)?(0,a.default)(o.slice.call(e)):(0,a.default)(e),y):x},y.bandwidth=function(e){if(!arguments.length)return Math.sqrt(m*(m+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return m=Math.round((Math.sqrt(4*e*e+1)-1)/2),I()},y}},"./node_modules/d3-contour/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{contours:()=>n.default,contourDensity:()=>o.default});var n=i("./node_modules/d3-contour/src/contours.js"),o=i("./node_modules/d3-contour/src/density.js")},"./node_modules/d3-contour/src/noop.js":(e,t,i)=>{"use strict";function n(){}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-dispatch/src/dispatch.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n={value:function(){}};function o(){for(var e,t=0,i=arguments.length,n={};t<i;++t){if(!(e=arguments[t]+"")||e in n||/[\s.]/.test(e))throw new Error("illegal type: "+e);n[e]=[]}return new r(n)}function r(e){this._=e}function a(e,t){for(var i,n=0,o=e.length;n<o;++n)if((i=e[n]).name===t)return i.value}function s(e,t,i){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=n,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=i&&e.push({name:t,value:i}),e}r.prototype=o.prototype={constructor:r,on:function(e,t){var i,n,o=this._,r=(n=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");if(i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),l=-1,c=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++l<c;)if(i=(e=r[l]).type)o[i]=s(o[i],e.name,t);else if(null==t)for(i in o)o[i]=s(o[i],e.name,null);return this}for(;++l<c;)if((i=(e=r[l]).type)&&(i=a(o[i],e.name)))return i},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new r(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var i,n,o=new Array(i),r=0;r<i;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,i=(n=this._[e]).length;r<i;++r)n[r].value.apply(t,o)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,r=n.length;o<r;++o)n[o].value.apply(t,i)}};const l=o},"./node_modules/d3-dispatch/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{dispatch:()=>n.default});var n=i("./node_modules/d3-dispatch/src/dispatch.js")},"./node_modules/d3-drag/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-drag/src/drag.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i("./node_modules/d3-dispatch/src/index.js"),o=i("./node_modules/d3-selection/src/index.js"),r=i("./node_modules/d3-drag/src/nodrag.js"),a=i("./node_modules/d3-drag/src/noevent.js"),s=i("./node_modules/d3-drag/src/constant.js"),l=i("./node_modules/d3-drag/src/event.js");function c(){return!o.event.ctrlKey&&!o.event.button}function d(){return this.parentNode}function p(e){return null==e?{x:o.event.x,y:o.event.y}:e}function u(){return navigator.maxTouchPoints||"ontouchstart"in this}function m(){var e,t,i,m,h=c,f=d,g=p,v=u,x={},y=(0,n.dispatch)("start","drag","end"),b=0,C=0;function S(e){e.on("mousedown.drag",w).filter(v).on("touchstart.drag",D).on("touchmove.drag",R).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(){if(!m&&h.apply(this,arguments)){var n=T("mouse",f.apply(this,arguments),o.mouse,this,arguments);n&&((0,o.select)(o.event.view).on("mousemove.drag",I,!0).on("mouseup.drag",_,!0),(0,r.default)(o.event.view),(0,a.nopropagation)(),i=!1,e=o.event.clientX,t=o.event.clientY,n("start"))}}function I(){if((0,a.default)(),!i){var n=o.event.clientX-e,r=o.event.clientY-t;i=n*n+r*r>C}x.mouse("drag")}function _(){(0,o.select)(o.event.view).on("mousemove.drag mouseup.drag",null),(0,r.yesdrag)(o.event.view,i),(0,a.default)(),x.mouse("end")}function D(){if(h.apply(this,arguments)){var e,t,i=o.event.changedTouches,n=f.apply(this,arguments),r=i.length;for(e=0;e<r;++e)(t=T(i[e].identifier,n,o.touch,this,arguments))&&((0,a.nopropagation)(),t("start"))}}function R(){var e,t,i=o.event.changedTouches,n=i.length;for(e=0;e<n;++e)(t=x[i[e].identifier])&&((0,a.default)(),t("drag"))}function A(){var e,t,i=o.event.changedTouches,n=i.length;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),e=0;e<n;++e)(t=x[i[e].identifier])&&((0,a.nopropagation)(),t("end"))}function T(e,t,i,n,r){var a,s,c,d=i(t,e),p=y.copy();if((0,o.customEvent)(new l.default(S,"beforestart",a,e,b,d[0],d[1],0,0,p),function(){return null!=(o.event.subject=a=g.apply(n,r))&&(s=a.x-d[0]||0,c=a.y-d[1]||0,!0)}))return function u(m){var h,f=d;switch(m){case"start":x[e]=u,h=b++;break;case"end":delete x[e],--b;case"drag":d=i(t,e),h=b}(0,o.customEvent)(new l.default(S,m,a,e,h,d[0]+s,d[1]+c,d[0]-f[0],d[1]-f[1],p),p.apply,p,[m,n,r])}}return S.filter=function(e){return arguments.length?(h="function"==typeof e?e:(0,s.default)(!!e),S):h},S.container=function(e){return arguments.length?(f="function"==typeof e?e:(0,s.default)(e),S):f},S.subject=function(e){return arguments.length?(g="function"==typeof e?e:(0,s.default)(e),S):g},S.touchable=function(e){return arguments.length?(v="function"==typeof e?e:(0,s.default)(!!e),S):v},S.on=function(){var e=y.on.apply(y,arguments);return e===y?S:e},S.clickDistance=function(e){return arguments.length?(C=(e=+e)*e,S):Math.sqrt(C)},S}},"./node_modules/d3-drag/src/event.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o,r,a,s,l,c){this.target=e,this.type=t,this.subject=i,this.identifier=n,this.active=o,this.x=r,this.y=a,this.dx=s,this.dy=l,this._=c}i.r(t),i.d(t,{default:()=>n}),n.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e}},"./node_modules/d3-drag/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{drag:()=>n.default,dragDisable:()=>o.default,dragEnable:()=>o.yesdrag});var n=i("./node_modules/d3-drag/src/drag.js"),o=i("./node_modules/d3-drag/src/nodrag.js")},"./node_modules/d3-drag/src/nodrag.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,yesdrag:()=>a});var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-drag/src/noevent.js");function r(e){var t=e.document.documentElement,i=(0,n.select)(e).on("dragstart.drag",o.default,!0);"onselectstart"in t?i.on("selectstart.drag",o.default,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function a(e,t){var i=e.document.documentElement,r=(0,n.select)(e).on("dragstart.drag",null);t&&(r.on("click.drag",o.default,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in i?r.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}},"./node_modules/d3-drag/src/noevent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{nopropagation:()=>o,default:()=>r});var n=i("./node_modules/d3-selection/src/index.js");function o(){n.event.stopImmediatePropagation()}function r(){n.event.preventDefault(),n.event.stopImmediatePropagation()}},"./node_modules/d3-dsv/src/autoType.js":(e,t,i)=>{"use strict";function n(e){for(var t in e){var i,n,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(i=+r)){if(!(n=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;o&&n[4]&&!n[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=i;else r=null;e[t]=r}return e}i.r(t),i.d(t,{default:()=>n});var o=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours()},"./node_modules/d3-dsv/src/csv.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{csvParse:()=>o,csvParseRows:()=>r,csvFormat:()=>a,csvFormatBody:()=>s,csvFormatRows:()=>l,csvFormatRow:()=>c,csvFormatValue:()=>d});var n=(0,i("./node_modules/d3-dsv/src/dsv.js").default)(","),o=n.parse,r=n.parseRows,a=n.format,s=n.formatBody,l=n.formatRows,c=n.formatRow,d=n.formatValue},"./node_modules/d3-dsv/src/dsv.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n={},o={},r=34,a=10,s=13;function l(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function c(e){var t=Object.create(null),i=[];return e.forEach(function(e){for(var n in e)n in t||i.push(t[n]=n)}),i}function d(e,t){var i=e+"",n=i.length;return n<t?new Array(t-n+1).join(0)+i:i}function p(e){var t,i=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+d(-t,6):t>9999?"+"+d(t,6):d(t,4))+"-"+d(e.getUTCMonth()+1,2)+"-"+d(e.getUTCDate(),2)+(r?"T"+d(i,2)+":"+d(n,2)+":"+d(o,2)+"."+d(r,3)+"Z":o?"T"+d(i,2)+":"+d(n,2)+":"+d(o,2)+"Z":n||i?"T"+d(i,2)+":"+d(n,2)+"Z":"")}function u(e){var t=new RegExp('["'+e+"\n\r]"),i=e.charCodeAt(0);function d(e,t){var l,c=[],d=e.length,p=0,u=0,m=d<=0,h=!1;function f(){if(m)return o;if(h)return h=!1,n;var t,l,c=p;if(e.charCodeAt(c)===r){for(;p++<d&&e.charCodeAt(p)!==r||e.charCodeAt(++p)===r;);return(t=p)>=d?m=!0:(l=e.charCodeAt(p++))===a?h=!0:l===s&&(h=!0,e.charCodeAt(p)===a&&++p),e.slice(c+1,t-1).replace(/""/g,'"')}for(;p<d;){if((l=e.charCodeAt(t=p++))===a)h=!0;else if(l===s)h=!0,e.charCodeAt(p)===a&&++p;else if(l!==i)continue;return e.slice(c,t)}return m=!0,e.slice(c,d)}for(e.charCodeAt(d-1)===a&&--d,e.charCodeAt(d-1)===s&&--d;(l=f())!==o;){for(var g=[];l!==n&&l!==o;)g.push(l),l=f();t&&null==(g=t(g,u++))||c.push(g)}return c}function u(t,i){return t.map(function(t){return i.map(function(e){return h(t[e])}).join(e)})}function m(t){return t.map(h).join(e)}function h(e){return null==e?"":e instanceof Date?p(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var i,n,o=d(e,function(e,o){if(i)return i(e,o-1);n=e,i=t?function(e,t){var i=l(e);return function(n,o){return t(i(n),o,e)}}(e,t):l(e)});return o.columns=n||[],o},parseRows:d,format:function(t,i){return null==i&&(i=c(t)),[i.map(h).join(e)].concat(u(t,i)).join("\n")},formatBody:function(e,t){return null==t&&(t=c(e)),u(e,t).join("\n")},formatRows:function(e){return e.map(m).join("\n")},formatRow:m,formatValue:h}}},"./node_modules/d3-dsv/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{dsvFormat:()=>n.default,csvParse:()=>o.csvParse,csvParseRows:()=>o.csvParseRows,csvFormat:()=>o.csvFormat,csvFormatBody:()=>o.csvFormatBody,csvFormatRows:()=>o.csvFormatRows,csvFormatRow:()=>o.csvFormatRow,csvFormatValue:()=>o.csvFormatValue,tsvParse:()=>r.tsvParse,tsvParseRows:()=>r.tsvParseRows,tsvFormat:()=>r.tsvFormat,tsvFormatBody:()=>r.tsvFormatBody,tsvFormatRows:()=>r.tsvFormatRows,tsvFormatRow:()=>r.tsvFormatRow,tsvFormatValue:()=>r.tsvFormatValue,autoType:()=>a.default});var n=i("./node_modules/d3-dsv/src/dsv.js"),o=i("./node_modules/d3-dsv/src/csv.js"),r=i("./node_modules/d3-dsv/src/tsv.js"),a=i("./node_modules/d3-dsv/src/autoType.js")},"./node_modules/d3-dsv/src/tsv.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{tsvParse:()=>o,tsvParseRows:()=>r,tsvFormat:()=>a,tsvFormatBody:()=>s,tsvFormatRows:()=>l,tsvFormatRow:()=>c,tsvFormatValue:()=>d});var n=(0,i("./node_modules/d3-dsv/src/dsv.js").default)("\t"),o=n.parse,r=n.parseRows,a=n.format,s=n.formatBody,l=n.formatRows,c=n.formatRow,d=n.formatValue},"./node_modules/d3-ease/src/back.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{backIn:()=>o,backOut:()=>r,backInOut:()=>a});var n=1.70158,o=function e(t){function i(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,i.overshoot=e,i}(n),r=function e(t){function i(e){return--e*e*((e+1)*t+e)+1}return t=+t,i.overshoot=e,i}(n),a=function e(t){function i(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,i.overshoot=e,i}(n)},"./node_modules/d3-ease/src/bounce.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{bounceIn:()=>m,bounceOut:()=>h,bounceInOut:()=>f});var n=4/11,o=6/11,r=8/11,a=3/4,s=9/11,l=10/11,c=15/16,d=21/22,p=63/64,u=1/n/n;function m(e){return 1-h(1-e)}function h(e){return(e=+e)<n?u*e*e:e<r?u*(e-=o)*e+a:e<l?u*(e-=s)*e+c:u*(e-=d)*e+p}function f(e){return((e*=2)<=1?1-h(1-e):h(e-1)+1)/2}},"./node_modules/d3-ease/src/circle.js":(e,t,i)=>{"use strict";function n(e){return 1-Math.sqrt(1-e*e)}function o(e){return Math.sqrt(1- --e*e)}function r(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}i.r(t),i.d(t,{circleIn:()=>n,circleOut:()=>o,circleInOut:()=>r})},"./node_modules/d3-ease/src/cubic.js":(e,t,i)=>{"use strict";function n(e){return e*e*e}function o(e){return--e*e*e+1}function r(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}i.r(t),i.d(t,{cubicIn:()=>n,cubicOut:()=>o,cubicInOut:()=>r})},"./node_modules/d3-ease/src/elastic.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{elasticIn:()=>r,elasticOut:()=>a,elasticInOut:()=>s});var n=i("./node_modules/d3-ease/src/math.js"),o=2*Math.PI,r=function e(t,i){var r=Math.asin(1/(t=Math.max(1,t)))*(i/=o);function a(e){return t*(0,n.tpmt)(- --e)*Math.sin((r-e)/i)}return a.amplitude=function(t){return e(t,i*o)},a.period=function(i){return e(t,i)},a}(1,.3),a=function e(t,i){var r=Math.asin(1/(t=Math.max(1,t)))*(i/=o);function a(e){return 1-t*(0,n.tpmt)(e=+e)*Math.sin((e+r)/i)}return a.amplitude=function(t){return e(t,i*o)},a.period=function(i){return e(t,i)},a}(1,.3),s=function e(t,i){var r=Math.asin(1/(t=Math.max(1,t)))*(i/=o);function a(e){return((e=2*e-1)<0?t*(0,n.tpmt)(-e)*Math.sin((r-e)/i):2-t*(0,n.tpmt)(e)*Math.sin((r+e)/i))/2}return a.amplitude=function(t){return e(t,i*o)},a.period=function(i){return e(t,i)},a}(1,.3)},"./node_modules/d3-ease/src/exp.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{expIn:()=>o,expOut:()=>r,expInOut:()=>a});var n=i("./node_modules/d3-ease/src/math.js");function o(e){return(0,n.tpmt)(1-+e)}function r(e){return 1-(0,n.tpmt)(e)}function a(e){return((e*=2)<=1?(0,n.tpmt)(1-e):2-(0,n.tpmt)(e-1))/2}},"./node_modules/d3-ease/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{easeLinear:()=>n.linear,easeQuad:()=>o.quadInOut,easeQuadIn:()=>o.quadIn,easeQuadOut:()=>o.quadOut,easeQuadInOut:()=>o.quadInOut,easeCubic:()=>r.cubicInOut,easeCubicIn:()=>r.cubicIn,easeCubicOut:()=>r.cubicOut,easeCubicInOut:()=>r.cubicInOut,easePoly:()=>a.polyInOut,easePolyIn:()=>a.polyIn,easePolyOut:()=>a.polyOut,easePolyInOut:()=>a.polyInOut,easeSin:()=>s.sinInOut,easeSinIn:()=>s.sinIn,easeSinOut:()=>s.sinOut,easeSinInOut:()=>s.sinInOut,easeExp:()=>l.expInOut,easeExpIn:()=>l.expIn,easeExpOut:()=>l.expOut,easeExpInOut:()=>l.expInOut,easeCircle:()=>c.circleInOut,easeCircleIn:()=>c.circleIn,easeCircleOut:()=>c.circleOut,easeCircleInOut:()=>c.circleInOut,easeBounce:()=>d.bounceOut,easeBounceIn:()=>d.bounceIn,easeBounceOut:()=>d.bounceOut,easeBounceInOut:()=>d.bounceInOut,easeBack:()=>p.backInOut,easeBackIn:()=>p.backIn,easeBackOut:()=>p.backOut,easeBackInOut:()=>p.backInOut,easeElastic:()=>u.elasticOut,easeElasticIn:()=>u.elasticIn,easeElasticOut:()=>u.elasticOut,easeElasticInOut:()=>u.elasticInOut});var n=i("./node_modules/d3-ease/src/linear.js"),o=i("./node_modules/d3-ease/src/quad.js"),r=i("./node_modules/d3-ease/src/cubic.js"),a=i("./node_modules/d3-ease/src/poly.js"),s=i("./node_modules/d3-ease/src/sin.js"),l=i("./node_modules/d3-ease/src/exp.js"),c=i("./node_modules/d3-ease/src/circle.js"),d=i("./node_modules/d3-ease/src/bounce.js"),p=i("./node_modules/d3-ease/src/back.js"),u=i("./node_modules/d3-ease/src/elastic.js")},"./node_modules/d3-ease/src/linear.js":(e,t,i)=>{"use strict";function n(e){return+e}i.r(t),i.d(t,{linear:()=>n})},"./node_modules/d3-ease/src/math.js":(e,t,i)=>{"use strict";function n(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}i.r(t),i.d(t,{tpmt:()=>n})},"./node_modules/d3-ease/src/poly.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{polyIn:()=>n,polyOut:()=>o,polyInOut:()=>r});var n=function e(t){function i(e){return Math.pow(e,t)}return t=+t,i.exponent=e,i}(3),o=function e(t){function i(e){return 1-Math.pow(1-e,t)}return t=+t,i.exponent=e,i}(3),r=function e(t){function i(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,i.exponent=e,i}(3)},"./node_modules/d3-ease/src/quad.js":(e,t,i)=>{"use strict";function n(e){return e*e}function o(e){return e*(2-e)}function r(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}i.r(t),i.d(t,{quadIn:()=>n,quadOut:()=>o,quadInOut:()=>r})},"./node_modules/d3-ease/src/sin.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{sinIn:()=>r,sinOut:()=>a,sinInOut:()=>s});var n=Math.PI,o=n/2;function r(e){return 1==+e?1:1-Math.cos(e*o)}function a(e){return Math.sin(e*o)}function s(e){return(1-Math.cos(n*e))/2}},"./node_modules/d3-fetch/src/blob.js":(e,t,i)=>{"use strict";function n(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function o(e,t){return fetch(e,t).then(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-fetch/src/buffer.js":(e,t,i)=>{"use strict";function n(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function o(e,t){return fetch(e,t).then(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-fetch/src/dsv.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,csv:()=>s,tsv:()=>l});var n=i("./node_modules/d3-dsv/src/index.js"),o=i("./node_modules/d3-fetch/src/text.js");function r(e){return function(t,i,n){return 2===arguments.length&&"function"==typeof i&&(n=i,i=void 0),(0,o.default)(t,i).then(function(t){return e(t,n)})}}function a(e,t,i,r){3===arguments.length&&"function"==typeof i&&(r=i,i=void 0);var a=(0,n.dsvFormat)(e);return(0,o.default)(t,i).then(function(e){return a.parse(e,r)})}var s=r(n.csvParse),l=r(n.tsvParse)},"./node_modules/d3-fetch/src/image.js":(e,t,i)=>{"use strict";function n(e,t){return new Promise(function(i,n){var o=new Image;for(var r in t)o[r]=t[r];o.onerror=n,o.onload=function(){i(o)},o.src=e})}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-fetch/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{blob:()=>n.default,buffer:()=>o.default,dsv:()=>r.default,csv:()=>r.csv,tsv:()=>r.tsv,image:()=>a.default,json:()=>s.default,text:()=>l.default,xml:()=>c.default,html:()=>c.html,svg:()=>c.svg});var n=i("./node_modules/d3-fetch/src/blob.js"),o=i("./node_modules/d3-fetch/src/buffer.js"),r=i("./node_modules/d3-fetch/src/dsv.js"),a=i("./node_modules/d3-fetch/src/image.js"),s=i("./node_modules/d3-fetch/src/json.js"),l=i("./node_modules/d3-fetch/src/text.js"),c=i("./node_modules/d3-fetch/src/xml.js")},"./node_modules/d3-fetch/src/json.js":(e,t,i)=>{"use strict";function n(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(204!==e.status&&205!==e.status)return e.json()}function o(e,t){return fetch(e,t).then(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-fetch/src/text.js":(e,t,i)=>{"use strict";function n(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function o(e,t){return fetch(e,t).then(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-fetch/src/xml.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,html:()=>a,svg:()=>s});var n=i("./node_modules/d3-fetch/src/text.js");function o(e){return function(t,i){return(0,n.default)(t,i).then(function(t){return(new DOMParser).parseFromString(t,e)})}}const r=o("application/xml");var a=o("text/html"),s=o("image/svg+xml")},"./node_modules/d3-force/src/center.js":(e,t,i)=>{"use strict";function n(e,t){var i;function n(){var n,o,r=i.length,a=0,s=0;for(n=0;n<r;++n)a+=(o=i[n]).x,s+=o.y;for(a=a/r-e,s=s/r-t,n=0;n<r;++n)(o=i[n]).x-=a,o.y-=s}return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){i=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-force/src/collide.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-force/src/constant.js"),o=i("./node_modules/d3-force/src/jiggle.js"),r=i("./node_modules/d3-quadtree/src/index.js");function a(e){return e.x+e.vx}function s(e){return e.y+e.vy}function l(e){var t,i,l=1,c=1;function d(){for(var e,n,d,u,m,h,f,g=t.length,v=0;v<c;++v)for(n=(0,r.quadtree)(t,a,s).visitAfter(p),e=0;e<g;++e)d=t[e],h=i[d.index],f=h*h,u=d.x+d.vx,m=d.y+d.vy,n.visit(x);function x(e,t,i,n,r){var a=e.data,s=e.r,c=h+s;if(!a)return t>u+c||n<u-c||i>m+c||r<m-c;if(a.index>d.index){var p=u-a.x-a.vx,g=m-a.y-a.vy,v=p*p+g*g;v<c*c&&(0===p&&(v+=(p=(0,o.default)())*p),0===g&&(v+=(g=(0,o.default)())*g),v=(c-(v=Math.sqrt(v)))/v*l,d.vx+=(p*=v)*(c=(s*=s)/(f+s)),d.vy+=(g*=v)*c,a.vx-=p*(c=1-c),a.vy-=g*c)}}}function p(e){if(e.data)return e.r=i[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var n,o,r=t.length;for(i=new Array(r),n=0;n<r;++n)o=t[n],i[o.index]=+e(o,n,t)}}return"function"!=typeof e&&(e=(0,n.default)(null==e?1:+e)),d.initialize=function(e){t=e,u()},d.iterations=function(e){return arguments.length?(c=+e,d):c},d.strength=function(e){return arguments.length?(l=+e,d):l},d.radius=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),u(),d):e},d}},"./node_modules/d3-force/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-force/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{forceCenter:()=>n.default,forceCollide:()=>o.default,forceLink:()=>r.default,forceManyBody:()=>a.default,forceRadial:()=>s.default,forceSimulation:()=>l.default,forceX:()=>c.default,forceY:()=>d.default});var n=i("./node_modules/d3-force/src/center.js"),o=i("./node_modules/d3-force/src/collide.js"),r=i("./node_modules/d3-force/src/link.js"),a=i("./node_modules/d3-force/src/manyBody.js"),s=i("./node_modules/d3-force/src/radial.js"),l=i("./node_modules/d3-force/src/simulation.js"),c=i("./node_modules/d3-force/src/x.js"),d=i("./node_modules/d3-force/src/y.js")},"./node_modules/d3-force/src/jiggle.js":(e,t,i)=>{"use strict";function n(){return 1e-6*(Math.random()-.5)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-force/src/link.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-force/src/constant.js"),o=i("./node_modules/d3-force/src/jiggle.js"),r=i("./node_modules/d3-collection/src/index.js");function a(e){return e.index}function s(e,t){var i=e.get(t);if(!i)throw new Error("missing: "+t);return i}function l(e){var t,i,l,c,d,p=a,u=function(e){return 1/Math.min(c[e.source.index],c[e.target.index])},m=(0,n.default)(30),h=1;function f(n){for(var r=0,a=e.length;r<h;++r)for(var s,l,c,p,u,m,f,g=0;g<a;++g)l=(s=e[g]).source,p=(c=s.target).x+c.vx-l.x-l.vx||(0,o.default)(),u=c.y+c.vy-l.y-l.vy||(0,o.default)(),p*=m=((m=Math.sqrt(p*p+u*u))-i[g])/m*n*t[g],u*=m,c.vx-=p*(f=d[g]),c.vy-=u*f,l.vx+=p*(f=1-f),l.vy+=u*f}function g(){if(l){var n,o,a=l.length,u=e.length,m=(0,r.map)(l,p);for(n=0,c=new Array(a);n<u;++n)(o=e[n]).index=n,"object"!=typeof o.source&&(o.source=s(m,o.source)),"object"!=typeof o.target&&(o.target=s(m,o.target)),c[o.source.index]=(c[o.source.index]||0)+1,c[o.target.index]=(c[o.target.index]||0)+1;for(n=0,d=new Array(u);n<u;++n)o=e[n],d[n]=c[o.source.index]/(c[o.source.index]+c[o.target.index]);t=new Array(u),v(),i=new Array(u),x()}}function v(){if(l)for(var i=0,n=e.length;i<n;++i)t[i]=+u(e[i],i,e)}function x(){if(l)for(var t=0,n=e.length;t<n;++t)i[t]=+m(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e){l=e,g()},f.links=function(t){return arguments.length?(e=t,g(),f):e},f.id=function(e){return arguments.length?(p=e,f):p},f.iterations=function(e){return arguments.length?(h=+e,f):h},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:(0,n.default)(+e),v(),f):u},f.distance=function(e){return arguments.length?(m="function"==typeof e?e:(0,n.default)(+e),x(),f):m},f}},"./node_modules/d3-force/src/manyBody.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-force/src/constant.js"),o=i("./node_modules/d3-force/src/jiggle.js"),r=i("./node_modules/d3-quadtree/src/index.js"),a=i("./node_modules/d3-force/src/simulation.js");function s(){var e,t,i,s,l=(0,n.default)(-30),c=1,d=1/0,p=.81;function u(n){var o,s=e.length,l=(0,r.quadtree)(e,a.x,a.y).visitAfter(h);for(i=n,o=0;o<s;++o)t=e[o],l.visit(f)}function m(){if(e){var t,i,n=e.length;for(s=new Array(n),t=0;t<n;++t)i=e[t],s[i.index]=+l(i,t,e)}}function h(e){var t,i,n,o,r,a=0,l=0;if(e.length){for(n=o=r=0;r<4;++r)(t=e[r])&&(i=Math.abs(t.value))&&(a+=t.value,l+=i,n+=i*t.x,o+=i*t.y);e.x=n/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{a+=s[t.data.index]}while(t=t.next)}e.value=a}function f(e,n,r,a){if(!e.value)return!0;var l=e.x-t.x,u=e.y-t.y,m=a-n,h=l*l+u*u;if(m*m/p<h)return h<d&&(0===l&&(h+=(l=(0,o.default)())*l),0===u&&(h+=(u=(0,o.default)())*u),h<c&&(h=Math.sqrt(c*h)),t.vx+=l*e.value*i/h,t.vy+=u*e.value*i/h),!0;if(!(e.length||h>=d)){(e.data!==t||e.next)&&(0===l&&(h+=(l=(0,o.default)())*l),0===u&&(h+=(u=(0,o.default)())*u),h<c&&(h=Math.sqrt(c*h)));do{e.data!==t&&(m=s[e.data.index]*i/h,t.vx+=l*m,t.vy+=u*m)}while(e=e.next)}}return u.initialize=function(t){e=t,m()},u.strength=function(e){return arguments.length?(l="function"==typeof e?e:(0,n.default)(+e),m(),u):l},u.distanceMin=function(e){return arguments.length?(c=e*e,u):Math.sqrt(c)},u.distanceMax=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.theta=function(e){return arguments.length?(p=e*e,u):Math.sqrt(p)},u}},"./node_modules/d3-force/src/radial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-force/src/constant.js");function o(e,t,i){var o,r,a,s=(0,n.default)(.1);function l(e){for(var n=0,s=o.length;n<s;++n){var l=o[n],c=l.x-t||1e-6,d=l.y-i||1e-6,p=Math.sqrt(c*c+d*d),u=(a[n]-p)*r[n]*e/p;l.vx+=c*u,l.vy+=d*u}}function c(){if(o){var t,i=o.length;for(r=new Array(i),a=new Array(i),t=0;t<i;++t)a[t]=+e(o[t],t,o),r[t]=isNaN(a[t])?0:+s(o[t],t,o)}}return"function"!=typeof e&&(e=(0,n.default)(+e)),null==t&&(t=0),null==i&&(i=0),l.initialize=function(e){o=e,c()},l.strength=function(e){return arguments.length?(s="function"==typeof e?e:(0,n.default)(+e),c(),l):s},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),c(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(i=+e,l):i},l}},"./node_modules/d3-force/src/simulation.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{x:()=>a,y:()=>s,default:()=>d});var n=i("./node_modules/d3-dispatch/src/index.js"),o=i("./node_modules/d3-collection/src/index.js"),r=i("./node_modules/d3-timer/src/index.js");function a(e){return e.x}function s(e){return e.y}var l=10,c=Math.PI*(3-Math.sqrt(5));function d(e){var t,i=1,a=.001,s=1-Math.pow(a,1/300),d=0,p=.6,u=(0,o.map)(),m=(0,r.timer)(f),h=(0,n.dispatch)("tick","end");function f(){g(),h.call("tick",t),i<a&&(m.stop(),h.call("end",t))}function g(n){var o,r,a=e.length;void 0===n&&(n=1);for(var l=0;l<n;++l)for(i+=(d-i)*s,u.each(function(e){e(i)}),o=0;o<a;++o)null==(r=e[o]).fx?r.x+=r.vx*=p:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=p:(r.y=r.fy,r.vy=0);return t}function v(){for(var t,i=0,n=e.length;i<n;++i){if((t=e[i]).index=i,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var o=l*Math.sqrt(i),r=i*c;t.x=o*Math.cos(r),t.y=o*Math.sin(r)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function x(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),v(),t={tick:g,restart:function(){return m.restart(f),t},stop:function(){return m.stop(),t},nodes:function(i){return arguments.length?(e=i,v(),u.each(x),t):e},alpha:function(e){return arguments.length?(i=+e,t):i},alphaMin:function(e){return arguments.length?(a=+e,t):a},alphaDecay:function(e){return arguments.length?(s=+e,t):+s},alphaTarget:function(e){return arguments.length?(d=+e,t):d},velocityDecay:function(e){return arguments.length?(p=1-e,t):1-p},force:function(e,i){return arguments.length>1?(null==i?u.remove(e):u.set(e,x(i)),t):u.get(e)},find:function(t,i,n){var o,r,a,s,l,c=0,d=e.length;for(null==n?n=1/0:n*=n,c=0;c<d;++c)(a=(o=t-(s=e[c]).x)*o+(r=i-s.y)*r)<n&&(l=s,n=a);return l},on:function(e,i){return arguments.length>1?(h.on(e,i),t):h.on(e)}}}},"./node_modules/d3-force/src/x.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-force/src/constant.js");function o(e){var t,i,o,r=(0,n.default)(.1);function a(e){for(var n,r=0,a=t.length;r<a;++r)(n=t[r]).vx+=(o[r]-n.x)*i[r]*e}function s(){if(t){var n,a=t.length;for(i=new Array(a),o=new Array(a),n=0;n<a;++n)i[n]=isNaN(o[n]=+e(t[n],n,t))?0:+r(t[n],n,t)}}return"function"!=typeof e&&(e=(0,n.default)(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,n.default)(+e),s(),a):r},a.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),s(),a):e},a}},"./node_modules/d3-force/src/y.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-force/src/constant.js");function o(e){var t,i,o,r=(0,n.default)(.1);function a(e){for(var n,r=0,a=t.length;r<a;++r)(n=t[r]).vy+=(o[r]-n.y)*i[r]*e}function s(){if(t){var n,a=t.length;for(i=new Array(a),o=new Array(a),n=0;n<a;++n)i[n]=isNaN(o[n]=+e(t[n],n,t))?0:+r(t[n],n,t)}}return"function"!=typeof e&&(e=(0,n.default)(null==e?0:+e)),a.initialize=function(e){t=e,s()},a.strength=function(e){return arguments.length?(r="function"==typeof e?e:(0,n.default)(+e),s(),a):r},a.y=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),s(),a):e},a}},"./node_modules/d3-format/src/defaultLocale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{format:()=>o,formatPrefix:()=>r,default:()=>s});var n,o,r,a=i("./node_modules/d3-format/src/locale.js");function s(e){return n=(0,a.default)(e),o=n.format,r=n.formatPrefix,n}s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})},"./node_modules/d3-format/src/exponent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-format/src/formatDecimal.js");function o(e){return(e=(0,n.formatDecimalParts)(Math.abs(e)))?e[1]:NaN}},"./node_modules/d3-format/src/formatDecimal.js":(e,t,i)=>{"use strict";function n(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function o(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,n=e.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+e.slice(i+1)]}i.r(t),i.d(t,{default:()=>n,formatDecimalParts:()=>o})},"./node_modules/d3-format/src/formatGroup.js":(e,t,i)=>{"use strict";function n(e,t){return function(i,n){for(var o=i.length,r=[],a=0,s=e[0],l=0;o>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),r.push(i.substring(o-=s,o+s)),!((l+=s+1)>n));)s=e[a=(a+1)%e.length];return r.reverse().join(t)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-format/src/formatNumerals.js":(e,t,i)=>{"use strict";function n(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-format/src/formatPrefixAuto.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{prefixExponent:()=>n,default:()=>r});var n,o=i("./node_modules/d3-format/src/formatDecimal.js");function r(e,t){var i=(0,o.formatDecimalParts)(e,t);if(!i)return e+"";var r=i[0],a=i[1],s=a-(n=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,l=r.length;return s===l?r:s>l?r+new Array(s-l+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+(0,o.formatDecimalParts)(e,Math.max(0,t+s-1))[0]}},"./node_modules/d3-format/src/formatRounded.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-format/src/formatDecimal.js");function o(e,t){var i=(0,n.formatDecimalParts)(e,t);if(!i)return e+"";var o=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+o:o.length>r+1?o.slice(0,r+1)+"."+o.slice(r+1):o+new Array(r-o.length+2).join("0")}},"./node_modules/d3-format/src/formatSpecifier.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,FormatSpecifier:()=>r});var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(e){if(!(t=n.exec(e)))throw new Error("invalid format: "+e);var t;return new r({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function r(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}o.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},"./node_modules/d3-format/src/formatTrim.js":(e,t,i)=>{"use strict";function n(e){e:for(var t,i=e.length,n=1,o=-1;n<i;++n)switch(e[n]){case".":o=t=n;break;case"0":0===o&&(o=n),t=n;break;default:if(!+e[n])break e;o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(t+1):e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-format/src/formatTypes.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-format/src/formatDecimal.js"),o=i("./node_modules/d3-format/src/formatPrefixAuto.js"),r=i("./node_modules/d3-format/src/formatRounded.js");const a={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:n.default,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return(0,r.default)(100*e,t)},r:r.default,s:o.default,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}}},"./node_modules/d3-format/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-format/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{formatDefaultLocale:()=>n.default,format:()=>n.format,formatPrefix:()=>n.formatPrefix,formatLocale:()=>o.default,formatSpecifier:()=>r.default,FormatSpecifier:()=>r.FormatSpecifier,precisionFixed:()=>a.default,precisionPrefix:()=>s.default,precisionRound:()=>l.default});var n=i("./node_modules/d3-format/src/defaultLocale.js"),o=i("./node_modules/d3-format/src/locale.js"),r=i("./node_modules/d3-format/src/formatSpecifier.js"),a=i("./node_modules/d3-format/src/precisionFixed.js"),s=i("./node_modules/d3-format/src/precisionPrefix.js"),l=i("./node_modules/d3-format/src/precisionRound.js")},"./node_modules/d3-format/src/locale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i("./node_modules/d3-format/src/exponent.js"),o=i("./node_modules/d3-format/src/formatGroup.js"),r=i("./node_modules/d3-format/src/formatNumerals.js"),a=i("./node_modules/d3-format/src/formatSpecifier.js"),s=i("./node_modules/d3-format/src/formatTrim.js"),l=i("./node_modules/d3-format/src/formatTypes.js"),c=i("./node_modules/d3-format/src/formatPrefixAuto.js"),d=i("./node_modules/d3-format/src/identity.js"),p=Array.prototype.map,u=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function m(e){var t=void 0===e.grouping||void 0===e.thousands?d.default:(0,o.default)(p.call(e.grouping,Number),e.thousands+""),i=void 0===e.currency?"":e.currency[0]+"",m=void 0===e.currency?"":e.currency[1]+"",h=void 0===e.decimal?".":e.decimal+"",f=void 0===e.numerals?d.default:(0,r.default)(p.call(e.numerals,String)),g=void 0===e.percent?"%":e.percent+"",v=void 0===e.minus?"-":e.minus+"",x=void 0===e.nan?"NaN":e.nan+"";function y(e){var n=(e=(0,a.default)(e)).fill,o=e.align,r=e.sign,d=e.symbol,p=e.zero,y=e.width,b=e.comma,C=e.precision,S=e.trim,w=e.type;"n"===w?(b=!0,w="g"):l.default[w]||(void 0===C&&(C=12),S=!0,w="g"),(p||"0"===n&&"="===o)&&(p=!0,n="0",o="=");var I="$"===d?i:"#"===d&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_="$"===d?m:/[%p]/.test(w)?g:"",D=l.default[w],R=/[defgprs%]/.test(w);function A(e){var i,a,l,d=I,m=_;if("c"===w)m=D(e)+m,e="";else{var g=(e=+e)<0||1/e<0;if(e=isNaN(e)?x:D(Math.abs(e),C),S&&(e=(0,s.default)(e)),g&&0==+e&&"+"!==r&&(g=!1),d=(g?"("===r?r:v:"-"===r||"("===r?"":r)+d,m=("s"===w?u[8+c.prefixExponent/3]:"")+m+(g&&"("===r?")":""),R)for(i=-1,a=e.length;++i<a;)if(48>(l=e.charCodeAt(i))||l>57){m=(46===l?h+e.slice(i+1):e.slice(i))+m,e=e.slice(0,i);break}}b&&!p&&(e=t(e,1/0));var A=d.length+e.length+m.length,T=A<y?new Array(y-A+1).join(n):"";switch(b&&p&&(e=t(T+e,T.length?y-m.length:1/0),T=""),o){case"<":e=d+e+m+T;break;case"=":e=d+T+e+m;break;case"^":e=T.slice(0,A=T.length>>1)+d+e+m+T.slice(A);break;default:e=T+d+e+m}return f(e)}return C=void 0===C?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C)),A.toString=function(){return e+""},A}return{format:y,formatPrefix:function(e,t){var i=y(((e=(0,a.default)(e)).type="f",e)),o=3*Math.max(-8,Math.min(8,Math.floor((0,n.default)(t)/3))),r=Math.pow(10,-o),s=u[8+o/3];return function(e){return i(r*e)+s}}}}},"./node_modules/d3-format/src/precisionFixed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-format/src/exponent.js");function o(e){return Math.max(0,-(0,n.default)(Math.abs(e)))}},"./node_modules/d3-format/src/precisionPrefix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-format/src/exponent.js");function o(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,n.default)(t)/3)))-(0,n.default)(Math.abs(e)))}},"./node_modules/d3-format/src/precisionRound.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-format/src/exponent.js");function o(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,(0,n.default)(t)-(0,n.default)(e))+1}},"./node_modules/d3-geo/src/adder.js":(e,t,i)=>{"use strict";function n(){return new o}function o(){this.reset()}i.r(t),i.d(t,{default:()=>n}),o.prototype={constructor:o,reset:function(){this.s=this.t=0},add:function(e){a(r,e,this.t),a(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new o;function a(e,t,i){var n=e.s=t+i,o=n-t,r=n-o;e.t=t-r+(i-o)}},"./node_modules/d3-geo/src/area.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{areaRingSum:()=>u,areaStream:()=>h,default:()=>y});var n,o,r,a,s,l=i("./node_modules/d3-geo/src/adder.js"),c=i("./node_modules/d3-geo/src/math.js"),d=i("./node_modules/d3-geo/src/noop.js"),p=i("./node_modules/d3-geo/src/stream.js"),u=(0,l.default)(),m=(0,l.default)(),h={point:d.default,lineStart:d.default,lineEnd:d.default,polygonStart:function(){u.reset(),h.lineStart=f,h.lineEnd=g},polygonEnd:function(){var e=+u;m.add(e<0?c.tau+e:e),this.lineStart=this.lineEnd=this.point=d.default},sphere:function(){m.add(c.tau)}};function f(){h.point=v}function g(){x(n,o)}function v(e,t){h.point=x,n=e,o=t,e*=c.radians,t*=c.radians,r=e,a=(0,c.cos)(t=t/2+c.quarterPi),s=(0,c.sin)(t)}function x(e,t){e*=c.radians,t=(t*=c.radians)/2+c.quarterPi;var i=e-r,n=i>=0?1:-1,o=n*i,l=(0,c.cos)(t),d=(0,c.sin)(t),p=s*d,m=a*l+p*(0,c.cos)(o),h=p*n*(0,c.sin)(o);u.add((0,c.atan2)(h,m)),r=e,a=l,s=d}function y(e){return m.reset(),(0,p.default)(e,h),2*m}},"./node_modules/d3-geo/src/bounds.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>F});var n,o,r,a,s,l,c,d,p,u,m=i("./node_modules/d3-geo/src/adder.js"),h=i("./node_modules/d3-geo/src/area.js"),f=i("./node_modules/d3-geo/src/cartesian.js"),g=i("./node_modules/d3-geo/src/math.js"),v=i("./node_modules/d3-geo/src/stream.js"),x=(0,m.default)(),y={point:b,lineStart:S,lineEnd:w,polygonStart:function(){y.point=I,y.lineStart=_,y.lineEnd=D,x.reset(),h.areaStream.polygonStart()},polygonEnd:function(){h.areaStream.polygonEnd(),y.point=b,y.lineStart=S,y.lineEnd=w,h.areaRingSum<0?(n=-(r=180),o=-(a=90)):x>g.epsilon?a=90:x<-g.epsilon&&(o=-90),u[0]=n,u[1]=r},sphere:function(){n=-(r=180),o=-(a=90)}};function b(e,t){p.push(u=[n=e,r=e]),t<o&&(o=t),t>a&&(a=t)}function C(e,t){var i=(0,f.cartesian)([e*g.radians,t*g.radians]);if(d){var l=(0,f.cartesianCross)(d,i),c=[l[1],-l[0],0],m=(0,f.cartesianCross)(c,l);(0,f.cartesianNormalizeInPlace)(m),m=(0,f.spherical)(m);var h,v=e-s,x=v>0?1:-1,y=m[0]*g.degrees*x,b=(0,g.abs)(v)>180;b^(x*s<y&&y<x*e)?(h=m[1]*g.degrees)>a&&(a=h):b^(x*s<(y=(y+360)%360-180)&&y<x*e)?(h=-m[1]*g.degrees)<o&&(o=h):(t<o&&(o=t),t>a&&(a=t)),b?e<s?R(n,e)>R(n,r)&&(r=e):R(e,r)>R(n,r)&&(n=e):r>=n?(e<n&&(n=e),e>r&&(r=e)):e>s?R(n,e)>R(n,r)&&(r=e):R(e,r)>R(n,r)&&(n=e)}else p.push(u=[n=e,r=e]);t<o&&(o=t),t>a&&(a=t),d=i,s=e}function S(){y.point=C}function w(){u[0]=n,u[1]=r,y.point=b,d=null}function I(e,t){if(d){var i=e-s;x.add((0,g.abs)(i)>180?i+(i>0?360:-360):i)}else l=e,c=t;h.areaStream.point(e,t),C(e,t)}function _(){h.areaStream.lineStart()}function D(){I(l,c),h.areaStream.lineEnd(),(0,g.abs)(x)>g.epsilon&&(n=-(r=180)),u[0]=n,u[1]=r,d=null}function R(e,t){return(t-=e)<0?t+360:t}function A(e,t){return e[0]-t[0]}function T(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function F(e){var t,i,s,l,c,d,m;if(a=r=-(n=o=1/0),p=[],(0,v.default)(e,y),i=p.length){for(p.sort(A),t=1,c=[s=p[0]];t<i;++t)T(s,(l=p[t])[0])||T(s,l[1])?(R(s[0],l[1])>R(s[0],s[1])&&(s[1]=l[1]),R(l[0],s[1])>R(s[0],s[1])&&(s[0]=l[0])):c.push(s=l);for(d=-1/0,t=0,s=c[i=c.length-1];t<=i;s=l,++t)l=c[t],(m=R(s[1],l[0]))>d&&(d=m,n=l[0],r=s[1])}return p=u=null,n===1/0||o===1/0?[[NaN,NaN],[NaN,NaN]]:[[n,o],[r,a]]}},"./node_modules/d3-geo/src/cartesian.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{spherical:()=>o,cartesian:()=>r,cartesianDot:()=>a,cartesianCross:()=>s,cartesianAddInPlace:()=>l,cartesianScale:()=>c,cartesianNormalizeInPlace:()=>d});var n=i("./node_modules/d3-geo/src/math.js");function o(e){return[(0,n.atan2)(e[1],e[0]),(0,n.asin)(e[2])]}function r(e){var t=e[0],i=e[1],o=(0,n.cos)(i);return[o*(0,n.cos)(t),o*(0,n.sin)(t),(0,n.sin)(i)]}function a(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function s(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function l(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function c(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function d(e){var t=(0,n.sqrt)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}},"./node_modules/d3-geo/src/centroid.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>O});var n,o,r,a,s,l,c,d,p,u,m,h,f,g,v,x,y=i("./node_modules/d3-geo/src/math.js"),b=i("./node_modules/d3-geo/src/noop.js"),C=i("./node_modules/d3-geo/src/stream.js"),S={sphere:b.default,point:w,lineStart:_,lineEnd:A,polygonStart:function(){S.lineStart=T,S.lineEnd=F},polygonEnd:function(){S.lineStart=_,S.lineEnd=A}};function w(e,t){e*=y.radians,t*=y.radians;var i=(0,y.cos)(t);I(i*(0,y.cos)(e),i*(0,y.sin)(e),(0,y.sin)(t))}function I(e,t,i){++n,r+=(e-r)/n,a+=(t-a)/n,s+=(i-s)/n}function _(){S.point=D}function D(e,t){e*=y.radians,t*=y.radians;var i=(0,y.cos)(t);g=i*(0,y.cos)(e),v=i*(0,y.sin)(e),x=(0,y.sin)(t),S.point=R,I(g,v,x)}function R(e,t){e*=y.radians,t*=y.radians;var i=(0,y.cos)(t),n=i*(0,y.cos)(e),r=i*(0,y.sin)(e),a=(0,y.sin)(t),s=(0,y.atan2)((0,y.sqrt)((s=v*a-x*r)*s+(s=x*n-g*a)*s+(s=g*r-v*n)*s),g*n+v*r+x*a);o+=s,l+=s*(g+(g=n)),c+=s*(v+(v=r)),d+=s*(x+(x=a)),I(g,v,x)}function A(){S.point=w}function T(){S.point=E}function F(){M(h,f),S.point=w}function E(e,t){h=e,f=t,e*=y.radians,t*=y.radians,S.point=M;var i=(0,y.cos)(t);g=i*(0,y.cos)(e),v=i*(0,y.sin)(e),x=(0,y.sin)(t),I(g,v,x)}function M(e,t){e*=y.radians,t*=y.radians;var i=(0,y.cos)(t),n=i*(0,y.cos)(e),r=i*(0,y.sin)(e),a=(0,y.sin)(t),s=v*a-x*r,h=x*n-g*a,f=g*r-v*n,b=(0,y.sqrt)(s*s+h*h+f*f),C=(0,y.asin)(b),S=b&&-C/b;p+=S*s,u+=S*h,m+=S*f,o+=C,l+=C*(g+(g=n)),c+=C*(v+(v=r)),d+=C*(x+(x=a)),I(g,v,x)}function O(e){n=o=r=a=s=l=c=d=p=u=m=0,(0,C.default)(e,S);var t=p,i=u,h=m,f=t*t+i*i+h*h;return f<y.epsilon2&&(t=l,i=c,h=d,o<y.epsilon&&(t=r,i=a,h=s),(f=t*t+i*i+h*h)<y.epsilon2)?[NaN,NaN]:[(0,y.atan2)(i,t)*y.degrees,(0,y.asin)(h/(0,y.sqrt)(f))*y.degrees]}},"./node_modules/d3-geo/src/circle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{circleStream:()=>s,default:()=>c});var n=i("./node_modules/d3-geo/src/cartesian.js"),o=i("./node_modules/d3-geo/src/constant.js"),r=i("./node_modules/d3-geo/src/math.js"),a=i("./node_modules/d3-geo/src/rotation.js");function s(e,t,i,o,a,s){if(i){var c=(0,r.cos)(t),d=(0,r.sin)(t),p=o*i;null==a?(a=t+o*r.tau,s=t-p/2):(a=l(c,a),s=l(c,s),(o>0?a<s:a>s)&&(a+=o*r.tau));for(var u,m=a;o>0?m>s:m<s;m-=p)u=(0,n.spherical)([c,-d*(0,r.cos)(m),-d*(0,r.sin)(m)]),e.point(u[0],u[1])}}function l(e,t){(t=(0,n.cartesian)(t))[0]-=e,(0,n.cartesianNormalizeInPlace)(t);var i=(0,r.acos)(-t[1]);return((-t[2]<0?-i:i)+r.tau-r.epsilon)%r.tau}function c(){var e,t,i=(0,o.default)([0,0]),n=(0,o.default)(90),l=(0,o.default)(6),c={point:function(i,n){e.push(i=t(i,n)),i[0]*=r.degrees,i[1]*=r.degrees}};function d(){var o=i.apply(this,arguments),d=n.apply(this,arguments)*r.radians,p=l.apply(this,arguments)*r.radians;return e=[],t=(0,a.rotateRadians)(-o[0]*r.radians,-o[1]*r.radians,0).invert,s(c,d,p,1),o={type:"Polygon",coordinates:[e]},e=t=null,o}return d.center=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)([+e[0],+e[1]]),d):i},d.radius=function(e){return arguments.length?(n="function"==typeof e?e:(0,o.default)(+e),d):n},d.precision=function(e){return arguments.length?(l="function"==typeof e?e:(0,o.default)(+e),d):l},d}},"./node_modules/d3-geo/src/clip/antimeridian.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-geo/src/clip/index.js"),o=i("./node_modules/d3-geo/src/math.js");const r=(0,n.default)(function(){return!0},function(e){var t,i=NaN,n=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var l=a>0?o.pi:-o.pi,c=(0,o.abs)(a-i);(0,o.abs)(c-o.pi)<o.epsilon?(e.point(i,n=(n+s)/2>0?o.halfPi:-o.halfPi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),e.point(a,n),t=0):r!==l&&c>=o.pi&&((0,o.abs)(i-r)<o.epsilon&&(i-=r*o.epsilon),(0,o.abs)(a-l)<o.epsilon&&(a-=l*o.epsilon),n=function(e,t,i,n){var r,a,s=(0,o.sin)(e-i);return(0,o.abs)(s)>o.epsilon?(0,o.atan)(((0,o.sin)(t)*(a=(0,o.cos)(n))*(0,o.sin)(i)-(0,o.sin)(n)*(r=(0,o.cos)(t))*(0,o.sin)(e))/(r*a*s)):(t+n)/2}(i,n,a,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(l,n),t=0),e.point(i=a,n=s),r=l},lineEnd:function(){e.lineEnd(),i=n=NaN},clean:function(){return 2-t}}},function(e,t,i,n){var r;if(null==e)r=i*o.halfPi,n.point(-o.pi,r),n.point(0,r),n.point(o.pi,r),n.point(o.pi,0),n.point(o.pi,-r),n.point(0,-r),n.point(-o.pi,-r),n.point(-o.pi,0),n.point(-o.pi,r);else if((0,o.abs)(e[0]-t[0])>o.epsilon){var a=e[0]<t[0]?o.pi:-o.pi;r=i*a/2,n.point(-a,r),n.point(0,r),n.point(a,r)}else n.point(t[0],t[1])},[-o.pi,-o.halfPi])},"./node_modules/d3-geo/src/clip/buffer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-geo/src/noop.js");function o(){var e,t=[];return{point:function(t,i,n){e.push([t,i,n])},lineStart:function(){t.push(e=[])},lineEnd:n.default,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],e=null,i}}}},"./node_modules/d3-geo/src/clip/circle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/cartesian.js"),o=i("./node_modules/d3-geo/src/circle.js"),r=i("./node_modules/d3-geo/src/math.js"),a=i("./node_modules/d3-geo/src/pointEqual.js"),s=i("./node_modules/d3-geo/src/clip/index.js");function l(e){var t=(0,r.cos)(e),i=6*r.radians,l=t>0,c=(0,r.abs)(t)>r.epsilon;function d(e,i){return(0,r.cos)(e)*(0,r.cos)(i)>t}function p(e,i,o){var a=(0,n.cartesian)(e),s=(0,n.cartesian)(i),l=[1,0,0],c=(0,n.cartesianCross)(a,s),d=(0,n.cartesianDot)(c,c),p=c[0],u=d-p*p;if(!u)return!o&&e;var m=t*d/u,h=-t*p/u,f=(0,n.cartesianCross)(l,c),g=(0,n.cartesianScale)(l,m),v=(0,n.cartesianScale)(c,h);(0,n.cartesianAddInPlace)(g,v);var x=f,y=(0,n.cartesianDot)(g,x),b=(0,n.cartesianDot)(x,x),C=y*y-b*((0,n.cartesianDot)(g,g)-1);if(!(C<0)){var S=(0,r.sqrt)(C),w=(0,n.cartesianScale)(x,(-y-S)/b);if((0,n.cartesianAddInPlace)(w,g),w=(0,n.spherical)(w),!o)return w;var I,_=e[0],D=i[0],R=e[1],A=i[1];D<_&&(I=_,_=D,D=I);var T=D-_,F=(0,r.abs)(T-r.pi)<r.epsilon;if(!F&&A<R&&(I=R,R=A,A=I),F||T<r.epsilon?F?R+A>0^w[1]<((0,r.abs)(w[0]-_)<r.epsilon?R:A):R<=w[1]&&w[1]<=A:T>r.pi^(_<=w[0]&&w[0]<=D)){var E=(0,n.cartesianScale)(x,(-y+S)/b);return(0,n.cartesianAddInPlace)(E,g),[w,(0,n.spherical)(E)]}}}function u(t,i){var n=l?e:r.pi-e,o=0;return t<-n?o|=1:t>n&&(o|=2),i<-n?o|=4:i>n&&(o|=8),o}return(0,s.default)(d,function(e){var t,i,n,o,s;return{lineStart:function(){o=n=!1,s=1},point:function(m,h){var f,g=[m,h],v=d(m,h),x=l?v?0:u(m,h):v?u(m+(m<0?r.pi:-r.pi),h):0;if(!t&&(o=n=v)&&e.lineStart(),v!==n&&(!(f=p(t,g))||(0,a.default)(t,f)||(0,a.default)(g,f))&&(g[2]=1),v!==n)s=0,v?(e.lineStart(),f=p(g,t),e.point(f[0],f[1])):(f=p(t,g),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(c&&t&&l^v){var y;x&i||!(y=p(g,t,!0))||(s=0,l?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!v||t&&(0,a.default)(t,g)||e.point(g[0],g[1]),t=g,n=v,i=x},lineEnd:function(){n&&e.lineEnd(),t=null},clean:function(){return s|(o&&n)<<1}}},function(t,n,r,a){(0,o.circleStream)(a,e,i,r,t,n)},l?[0,-e]:[-r.pi,e-r.pi])}},"./node_modules/d3-geo/src/clip/extent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-geo/src/clip/rectangle.js");function o(){var e,t,i,o=0,r=0,a=960,s=500;return i={stream:function(i){return e&&t===i?e:e=(0,n.default)(o,r,a,s)(t=i)},extent:function(n){return arguments.length?(o=+n[0][0],r=+n[0][1],a=+n[1][0],s=+n[1][1],e=t=null,i):[[o,r],[a,s]]}}}},"./node_modules/d3-geo/src/clip/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/clip/buffer.js"),o=i("./node_modules/d3-geo/src/clip/rejoin.js"),r=i("./node_modules/d3-geo/src/math.js"),a=i("./node_modules/d3-geo/src/polygonContains.js"),s=i("./node_modules/d3-array/src/index.js");function l(e,t,i,r){return function(l){var p,u,m,h=t(l),f=(0,n.default)(),g=t(f),v=!1,x={point:y,lineStart:C,lineEnd:S,polygonStart:function(){x.point=w,x.lineStart=I,x.lineEnd=_,u=[],p=[]},polygonEnd:function(){x.point=y,x.lineStart=C,x.lineEnd=S,u=(0,s.merge)(u);var e=(0,a.default)(p,r);u.length?(v||(l.polygonStart(),v=!0),(0,o.default)(u,d,e,i,l)):e&&(v||(l.polygonStart(),v=!0),l.lineStart(),i(null,null,1,l),l.lineEnd()),v&&(l.polygonEnd(),v=!1),u=p=null},sphere:function(){l.polygonStart(),l.lineStart(),i(null,null,1,l),l.lineEnd(),l.polygonEnd()}};function y(t,i){e(t,i)&&l.point(t,i)}function b(e,t){h.point(e,t)}function C(){x.point=b,h.lineStart()}function S(){x.point=y,h.lineEnd()}function w(e,t){m.push([e,t]),g.point(e,t)}function I(){g.lineStart(),m=[]}function _(){w(m[0][0],m[0][1]),g.lineEnd();var e,t,i,n,o=g.clean(),r=f.result(),a=r.length;if(m.pop(),p.push(m),m=null,a)if(1&o){if((t=(i=r[0]).length-1)>0){for(v||(l.polygonStart(),v=!0),l.lineStart(),e=0;e<t;++e)l.point((n=i[e])[0],n[1]);l.lineEnd()}}else a>1&&2&o&&r.push(r.pop().concat(r.shift())),u.push(r.filter(c))}return x}}function c(e){return e.length>1}function d(e,t){return((e=e.x)[0]<0?e[1]-r.halfPi-r.epsilon:r.halfPi-e[1])-((t=t.x)[0]<0?t[1]-r.halfPi-r.epsilon:r.halfPi-t[1])}},"./node_modules/d3-geo/src/clip/line.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o,r){var a,s=e[0],l=e[1],c=0,d=1,p=t[0]-s,u=t[1]-l;if(a=i-s,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>c&&(c=a)}if(a=o-s,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<d&&(d=a)}if(a=n-l,u||!(a>0)){if(a/=u,u<0){if(a<c)return;a<d&&(d=a)}else if(u>0){if(a>d)return;a>c&&(c=a)}if(a=r-l,u||!(a<0)){if(a/=u,u<0){if(a>d)return;a>c&&(c=a)}else if(u>0){if(a<c)return;a<d&&(d=a)}return c>0&&(e[0]=s+c*p,e[1]=l+c*u),d<1&&(t[0]=s+d*p,t[1]=l+d*u),!0}}}}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-geo/src/clip/rectangle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/clip/buffer.js"),r=i("./node_modules/d3-geo/src/clip/line.js"),a=i("./node_modules/d3-geo/src/clip/rejoin.js"),s=i("./node_modules/d3-array/src/index.js"),l=1e9,c=-l;function d(e,t,i,d){function p(n,o){return e<=n&&n<=i&&t<=o&&o<=d}function u(n,o,r,a){var s=0,l=0;if(null==n||(s=m(n,r))!==(l=m(o,r))||f(n,o)<0^r>0)do{a.point(0===s||3===s?e:i,s>1?d:t)}while((s=(s+r+4)%4)!==l);else a.point(o[0],o[1])}function m(o,r){return(0,n.abs)(o[0]-e)<n.epsilon?r>0?0:3:(0,n.abs)(o[0]-i)<n.epsilon?r>0?2:1:(0,n.abs)(o[1]-t)<n.epsilon?r>0?1:0:r>0?3:2}function h(e,t){return f(e.x,t.x)}function f(e,t){var i=m(e,1),n=m(t,1);return i!==n?i-n:0===i?t[1]-e[1]:1===i?e[0]-t[0]:2===i?e[1]-t[1]:t[0]-e[0]}return function(n){var m,f,g,v,x,y,b,C,S,w,I,_=n,D=(0,o.default)(),R={point:A,lineStart:function(){R.point=T,f&&f.push(g=[]);w=!0,S=!1,b=C=NaN},lineEnd:function(){m&&(T(v,x),y&&S&&D.rejoin(),m.push(D.result()));R.point=A,S&&_.lineEnd()},polygonStart:function(){_=D,m=[],f=[],I=!0},polygonEnd:function(){var t=function(){for(var t=0,i=0,n=f.length;i<n;++i)for(var o,r,a=f[i],s=1,l=a.length,c=a[0],p=c[0],u=c[1];s<l;++s)o=p,r=u,p=(c=a[s])[0],u=c[1],r<=d?u>d&&(p-o)*(d-r)>(u-r)*(e-o)&&++t:u<=d&&(p-o)*(d-r)<(u-r)*(e-o)&&--t;return t}(),i=I&&t,o=(m=(0,s.merge)(m)).length;(i||o)&&(n.polygonStart(),i&&(n.lineStart(),u(null,null,1,n),n.lineEnd()),o&&(0,a.default)(m,h,t,u,n),n.polygonEnd());_=n,m=f=g=null}};function A(e,t){p(e,t)&&_.point(e,t)}function T(n,o){var a=p(n,o);if(f&&g.push([n,o]),w)v=n,x=o,y=a,w=!1,a&&(_.lineStart(),_.point(n,o));else if(a&&S)_.point(n,o);else{var s=[b=Math.max(c,Math.min(l,b)),C=Math.max(c,Math.min(l,C))],u=[n=Math.max(c,Math.min(l,n)),o=Math.max(c,Math.min(l,o))];(0,r.default)(s,u,e,t,i,d)?(S||(_.lineStart(),_.point(s[0],s[1])),_.point(u[0],u[1]),a||_.lineEnd(),I=!1):a&&(_.lineStart(),_.point(n,o),I=!1)}b=n,C=o,S=a}return R}}},"./node_modules/d3-geo/src/clip/rejoin.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-geo/src/pointEqual.js"),o=i("./node_modules/d3-geo/src/math.js");function r(e,t,i,n){this.x=e,this.z=t,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function a(e,t,i,a,l){var c,d,p=[],u=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,i,a=e[0],s=e[t];if((0,n.default)(a,s)){if(!a[2]&&!s[2]){for(l.lineStart(),c=0;c<t;++c)l.point((a=e[c])[0],a[1]);return void l.lineEnd()}s[0]+=2*o.epsilon}p.push(i=new r(a,e,null,!0)),u.push(i.o=new r(a,null,i,!1)),p.push(i=new r(s,e,null,!1)),u.push(i.o=new r(s,null,i,!0))}}),p.length){for(u.sort(t),s(p),s(u),c=0,d=u.length;c<d;++c)u[c].e=i=!i;for(var m,h,f=p[0];;){for(var g=f,v=!0;g.v;)if((g=g.n)===f)return;m=g.z,l.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(c=0,d=m.length;c<d;++c)l.point((h=m[c])[0],h[1]);else a(g.x,g.n.x,1,l);g=g.n}else{if(v)for(m=g.p.z,c=m.length-1;c>=0;--c)l.point((h=m[c])[0],h[1]);else a(g.x,g.p.x,-1,l);g=g.p}m=(g=g.o).z,v=!v}while(!g.v);l.lineEnd()}}}function s(e){if(t=e.length){for(var t,i,n=0,o=e[0];++n<t;)o.n=i=e[n],i.p=o,o=i;o.n=i=e[0],i.p=o}}},"./node_modules/d3-geo/src/compose.js":(e,t,i)=>{"use strict";function n(e,t){function i(i,n){return i=e(i,n),t(i[0],i[1])}return e.invert&&t.invert&&(i.invert=function(i,n){return(i=t.invert(i,n))&&e.invert(i[0],i[1])}),i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-geo/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-geo/src/contains.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var n=i("./node_modules/d3-geo/src/polygonContains.js"),o=i("./node_modules/d3-geo/src/distance.js"),r=i("./node_modules/d3-geo/src/math.js"),a={Feature:function(e,t){return l(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,n=-1,o=i.length;++n<o;)if(l(i[n].geometry,t))return!0;return!1}},s={Sphere:function(){return!0},Point:function(e,t){return c(e.coordinates,t)},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)if(c(i[n],t))return!0;return!1},LineString:function(e,t){return d(e.coordinates,t)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)if(d(i[n],t))return!0;return!1},Polygon:function(e,t){return p(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)if(p(i[n],t))return!0;return!1},GeometryCollection:function(e,t){for(var i=e.geometries,n=-1,o=i.length;++n<o;)if(l(i[n],t))return!0;return!1}};function l(e,t){return!(!e||!s.hasOwnProperty(e.type))&&s[e.type](e,t)}function c(e,t){return 0===(0,o.default)(e,t)}function d(e,t){for(var i,n,a,s=0,l=e.length;s<l;s++){if(0===(n=(0,o.default)(e[s],t)))return!0;if(s>0&&(a=(0,o.default)(e[s],e[s-1]))>0&&i<=a&&n<=a&&(i+n-a)*(1-Math.pow((i-n)/a,2))<r.epsilon2*a)return!0;i=n}return!1}function p(e,t){return!!(0,n.default)(e.map(u),m(t))}function u(e){return(e=e.map(m)).pop(),e}function m(e){return[e[0]*r.radians,e[1]*r.radians]}function h(e,t){return(e&&a.hasOwnProperty(e.type)?a[e.type]:l)(e,t)}},"./node_modules/d3-geo/src/distance.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-geo/src/length.js"),o=[null,null],r={type:"LineString",coordinates:o};function a(e,t){return o[0]=e,o[1]=t,(0,n.default)(r)}},"./node_modules/d3-geo/src/graticule.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s,graticule10:()=>l});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-geo/src/math.js");function r(e,t,i){var r=(0,n.range)(e,t-o.epsilon,i).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function a(e,t,i){var r=(0,n.range)(e,t-o.epsilon,i).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function s(){var e,t,i,s,l,c,d,p,u,m,h,f,g=10,v=g,x=90,y=360,b=2.5;function C(){return{type:"MultiLineString",coordinates:S()}}function S(){return(0,n.range)((0,o.ceil)(s/x)*x,i,x).map(h).concat((0,n.range)((0,o.ceil)(p/y)*y,d,y).map(f)).concat((0,n.range)((0,o.ceil)(t/g)*g,e,g).filter(function(e){return(0,o.abs)(e%x)>o.epsilon}).map(u)).concat((0,n.range)((0,o.ceil)(c/v)*v,l,v).filter(function(e){return(0,o.abs)(e%y)>o.epsilon}).map(m))}return C.lines=function(){return S().map(function(e){return{type:"LineString",coordinates:e}})},C.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(f(d).slice(1),h(i).reverse().slice(1),f(p).reverse().slice(1))]}},C.extent=function(e){return arguments.length?C.extentMajor(e).extentMinor(e):C.extentMinor()},C.extentMajor=function(e){return arguments.length?(s=+e[0][0],i=+e[1][0],p=+e[0][1],d=+e[1][1],s>i&&(e=s,s=i,i=e),p>d&&(e=p,p=d,d=e),C.precision(b)):[[s,p],[i,d]]},C.extentMinor=function(i){return arguments.length?(t=+i[0][0],e=+i[1][0],c=+i[0][1],l=+i[1][1],t>e&&(i=t,t=e,e=i),c>l&&(i=c,c=l,l=i),C.precision(b)):[[t,c],[e,l]]},C.step=function(e){return arguments.length?C.stepMajor(e).stepMinor(e):C.stepMinor()},C.stepMajor=function(e){return arguments.length?(x=+e[0],y=+e[1],C):[x,y]},C.stepMinor=function(e){return arguments.length?(g=+e[0],v=+e[1],C):[g,v]},C.precision=function(n){return arguments.length?(b=+n,u=r(c,l,90),m=a(t,e,b),h=r(p,d,90),f=a(s,i,b),C):b},C.extentMajor([[-180,-90+o.epsilon],[180,90-o.epsilon]]).extentMinor([[-180,-80-o.epsilon],[180,80+o.epsilon]])}function l(){return s()()}},"./node_modules/d3-geo/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-geo/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{geoArea:()=>n.default,geoBounds:()=>o.default,geoCentroid:()=>r.default,geoCircle:()=>a.default,geoClipAntimeridian:()=>s.default,geoClipCircle:()=>l.default,geoClipExtent:()=>c.default,geoClipRectangle:()=>d.default,geoContains:()=>p.default,geoDistance:()=>u.default,geoGraticule:()=>m.default,geoGraticule10:()=>m.graticule10,geoInterpolate:()=>h.default,geoLength:()=>f.default,geoPath:()=>g.default,geoAlbers:()=>v.default,geoAlbersUsa:()=>x.default,geoAzimuthalEqualArea:()=>y.default,geoAzimuthalEqualAreaRaw:()=>y.azimuthalEqualAreaRaw,geoAzimuthalEquidistant:()=>b.default,geoAzimuthalEquidistantRaw:()=>b.azimuthalEquidistantRaw,geoConicConformal:()=>C.default,geoConicConformalRaw:()=>C.conicConformalRaw,geoConicEqualArea:()=>S.default,geoConicEqualAreaRaw:()=>S.conicEqualAreaRaw,geoConicEquidistant:()=>w.default,geoConicEquidistantRaw:()=>w.conicEquidistantRaw,geoEqualEarth:()=>I.default,geoEqualEarthRaw:()=>I.equalEarthRaw,geoEquirectangular:()=>_.default,geoEquirectangularRaw:()=>_.equirectangularRaw,geoGnomonic:()=>D.default,geoGnomonicRaw:()=>D.gnomonicRaw,geoIdentity:()=>R.default,geoProjection:()=>A.default,geoProjectionMutator:()=>A.projectionMutator,geoMercator:()=>T.default,geoMercatorRaw:()=>T.mercatorRaw,geoNaturalEarth1:()=>F.default,geoNaturalEarth1Raw:()=>F.naturalEarth1Raw,geoOrthographic:()=>E.default,geoOrthographicRaw:()=>E.orthographicRaw,geoStereographic:()=>M.default,geoStereographicRaw:()=>M.stereographicRaw,geoTransverseMercator:()=>O.default,geoTransverseMercatorRaw:()=>O.transverseMercatorRaw,geoRotation:()=>k.default,geoStream:()=>j.default,geoTransform:()=>P.default});var n=i("./node_modules/d3-geo/src/area.js"),o=i("./node_modules/d3-geo/src/bounds.js"),r=i("./node_modules/d3-geo/src/centroid.js"),a=i("./node_modules/d3-geo/src/circle.js"),s=i("./node_modules/d3-geo/src/clip/antimeridian.js"),l=i("./node_modules/d3-geo/src/clip/circle.js"),c=i("./node_modules/d3-geo/src/clip/extent.js"),d=i("./node_modules/d3-geo/src/clip/rectangle.js"),p=i("./node_modules/d3-geo/src/contains.js"),u=i("./node_modules/d3-geo/src/distance.js"),m=i("./node_modules/d3-geo/src/graticule.js"),h=i("./node_modules/d3-geo/src/interpolate.js"),f=i("./node_modules/d3-geo/src/length.js"),g=i("./node_modules/d3-geo/src/path/index.js"),v=i("./node_modules/d3-geo/src/projection/albers.js"),x=i("./node_modules/d3-geo/src/projection/albersUsa.js"),y=i("./node_modules/d3-geo/src/projection/azimuthalEqualArea.js"),b=i("./node_modules/d3-geo/src/projection/azimuthalEquidistant.js"),C=i("./node_modules/d3-geo/src/projection/conicConformal.js"),S=i("./node_modules/d3-geo/src/projection/conicEqualArea.js"),w=i("./node_modules/d3-geo/src/projection/conicEquidistant.js"),I=i("./node_modules/d3-geo/src/projection/equalEarth.js"),_=i("./node_modules/d3-geo/src/projection/equirectangular.js"),D=i("./node_modules/d3-geo/src/projection/gnomonic.js"),R=i("./node_modules/d3-geo/src/projection/identity.js"),A=i("./node_modules/d3-geo/src/projection/index.js"),T=i("./node_modules/d3-geo/src/projection/mercator.js"),F=i("./node_modules/d3-geo/src/projection/naturalEarth1.js"),E=i("./node_modules/d3-geo/src/projection/orthographic.js"),M=i("./node_modules/d3-geo/src/projection/stereographic.js"),O=i("./node_modules/d3-geo/src/projection/transverseMercator.js"),k=i("./node_modules/d3-geo/src/rotation.js"),j=i("./node_modules/d3-geo/src/stream.js"),P=i("./node_modules/d3-geo/src/transform.js")},"./node_modules/d3-geo/src/interpolate.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-geo/src/math.js");function o(e,t){var i=e[0]*n.radians,o=e[1]*n.radians,r=t[0]*n.radians,a=t[1]*n.radians,s=(0,n.cos)(o),l=(0,n.sin)(o),c=(0,n.cos)(a),d=(0,n.sin)(a),p=s*(0,n.cos)(i),u=s*(0,n.sin)(i),m=c*(0,n.cos)(r),h=c*(0,n.sin)(r),f=2*(0,n.asin)((0,n.sqrt)((0,n.haversin)(a-o)+s*c*(0,n.haversin)(r-i))),g=(0,n.sin)(f),v=f?function(e){var t=(0,n.sin)(e*=f)/g,i=(0,n.sin)(f-e)/g,o=i*p+t*m,r=i*u+t*h,a=i*l+t*d;return[(0,n.atan2)(r,o)*n.degrees,(0,n.atan2)(a,(0,n.sqrt)(o*o+r*r))*n.degrees]}:function(){return[i*n.degrees,o*n.degrees]};return v.distance=f,v}},"./node_modules/d3-geo/src/length.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n,o,r,a=i("./node_modules/d3-geo/src/adder.js"),s=i("./node_modules/d3-geo/src/math.js"),l=i("./node_modules/d3-geo/src/noop.js"),c=i("./node_modules/d3-geo/src/stream.js"),d=(0,a.default)(),p={sphere:l.default,point:l.default,lineStart:function(){p.point=m,p.lineEnd=u},lineEnd:l.default,polygonStart:l.default,polygonEnd:l.default};function u(){p.point=p.lineEnd=l.default}function m(e,t){e*=s.radians,t*=s.radians,n=e,o=(0,s.sin)(t),r=(0,s.cos)(t),p.point=h}function h(e,t){e*=s.radians,t*=s.radians;var i=(0,s.sin)(t),a=(0,s.cos)(t),l=(0,s.abs)(e-n),c=(0,s.cos)(l),p=a*(0,s.sin)(l),u=r*i-o*a*c,m=o*i+r*a*c;d.add((0,s.atan2)((0,s.sqrt)(p*p+u*u),m)),n=e,o=i,r=a}function f(e){return d.reset(),(0,c.default)(e,p),+d}},"./node_modules/d3-geo/src/math.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{epsilon:()=>n,epsilon2:()=>o,pi:()=>r,halfPi:()=>a,quarterPi:()=>s,tau:()=>l,degrees:()=>c,radians:()=>d,abs:()=>p,atan:()=>u,atan2:()=>m,cos:()=>h,ceil:()=>f,exp:()=>g,floor:()=>v,log:()=>x,pow:()=>y,sin:()=>b,sign:()=>C,sqrt:()=>S,tan:()=>w,acos:()=>I,asin:()=>_,haversin:()=>D});var n=1e-6,o=1e-12,r=Math.PI,a=r/2,s=r/4,l=2*r,c=180/r,d=r/180,p=Math.abs,u=Math.atan,m=Math.atan2,h=Math.cos,f=Math.ceil,g=Math.exp,v=Math.floor,x=Math.log,y=Math.pow,b=Math.sin,C=Math.sign||function(e){return e>0?1:e<0?-1:0},S=Math.sqrt,w=Math.tan;function I(e){return e>1?0:e<-1?r:Math.acos(e)}function _(e){return e>1?a:e<-1?-a:Math.asin(e)}function D(e){return(e=b(e/2))*e}},"./node_modules/d3-geo/src/noop.js":(e,t,i)=>{"use strict";function n(){}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-geo/src/path/area.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>v});var n,o,r,a,s=i("./node_modules/d3-geo/src/adder.js"),l=i("./node_modules/d3-geo/src/math.js"),c=i("./node_modules/d3-geo/src/noop.js"),d=(0,s.default)(),p=(0,s.default)(),u={point:c.default,lineStart:c.default,lineEnd:c.default,polygonStart:function(){u.lineStart=m,u.lineEnd=g},polygonEnd:function(){u.lineStart=u.lineEnd=u.point=c.default,d.add((0,l.abs)(p)),p.reset()},result:function(){var e=d/2;return d.reset(),e}};function m(){u.point=h}function h(e,t){u.point=f,n=r=e,o=a=t}function f(e,t){p.add(a*e-r*t),r=e,a=t}function g(){f(n,o)}const v=u},"./node_modules/d3-geo/src/path/bounds.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/noop.js"),o=1/0,r=o,a=-o,s=a;const l={point:function(e,t){e<o&&(o=e);e>a&&(a=e);t<r&&(r=t);t>s&&(s=t)},lineStart:n.default,lineEnd:n.default,polygonStart:n.default,polygonEnd:n.default,result:function(){var e=[[o,r],[a,s]];return a=s=-(r=o=1/0),e}}},"./node_modules/d3-geo/src/path/centroid.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>R});var n,o,r,a,s=i("./node_modules/d3-geo/src/math.js"),l=0,c=0,d=0,p=0,u=0,m=0,h=0,f=0,g=0,v={point:x,lineStart:y,lineEnd:S,polygonStart:function(){v.lineStart=w,v.lineEnd=I},polygonEnd:function(){v.point=x,v.lineStart=y,v.lineEnd=S},result:function(){var e=g?[h/g,f/g]:m?[p/m,u/m]:d?[l/d,c/d]:[NaN,NaN];return l=c=d=p=u=m=h=f=g=0,e}};function x(e,t){l+=e,c+=t,++d}function y(){v.point=b}function b(e,t){v.point=C,x(r=e,a=t)}function C(e,t){var i=e-r,n=t-a,o=(0,s.sqrt)(i*i+n*n);p+=o*(r+e)/2,u+=o*(a+t)/2,m+=o,x(r=e,a=t)}function S(){v.point=x}function w(){v.point=_}function I(){D(n,o)}function _(e,t){v.point=D,x(n=r=e,o=a=t)}function D(e,t){var i=e-r,n=t-a,o=(0,s.sqrt)(i*i+n*n);p+=o*(r+e)/2,u+=o*(a+t)/2,m+=o,h+=(o=a*e-r*t)*(r+e),f+=o*(a+t),g+=3*o,x(r=e,a=t)}const R=v},"./node_modules/d3-geo/src/path/context.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/noop.js");function r(e){this._context=e}r.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,n.tau)}},result:o.default}},"./node_modules/d3-geo/src/path/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p});var n=i("./node_modules/d3-geo/src/identity.js"),o=i("./node_modules/d3-geo/src/stream.js"),r=i("./node_modules/d3-geo/src/path/area.js"),a=i("./node_modules/d3-geo/src/path/bounds.js"),s=i("./node_modules/d3-geo/src/path/centroid.js"),l=i("./node_modules/d3-geo/src/path/context.js"),c=i("./node_modules/d3-geo/src/path/measure.js"),d=i("./node_modules/d3-geo/src/path/string.js");function p(e,t){var i,p,u=4.5;function m(e){return e&&("function"==typeof u&&p.pointRadius(+u.apply(this,arguments)),(0,o.default)(e,i(p))),p.result()}return m.area=function(e){return(0,o.default)(e,i(r.default)),r.default.result()},m.measure=function(e){return(0,o.default)(e,i(c.default)),c.default.result()},m.bounds=function(e){return(0,o.default)(e,i(a.default)),a.default.result()},m.centroid=function(e){return(0,o.default)(e,i(s.default)),s.default.result()},m.projection=function(t){return arguments.length?(i=null==t?(e=null,n.default):(e=t).stream,m):e},m.context=function(e){return arguments.length?(p=null==e?(t=null,new d.default):new l.default(t=e),"function"!=typeof u&&p.pointRadius(u),m):t},m.pointRadius=function(e){return arguments.length?(u="function"==typeof e?e:(p.pointRadius(+e),+e),m):u},m.projection(e).context(t)}},"./node_modules/d3-geo/src/path/measure.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n,o,r,a,s,l=i("./node_modules/d3-geo/src/adder.js"),c=i("./node_modules/d3-geo/src/math.js"),d=i("./node_modules/d3-geo/src/noop.js"),p=(0,l.default)(),u={point:d.default,lineStart:function(){u.point=m},lineEnd:function(){n&&h(o,r),u.point=d.default},polygonStart:function(){n=!0},polygonEnd:function(){n=null},result:function(){var e=+p;return p.reset(),e}};function m(e,t){u.point=h,o=a=e,r=s=t}function h(e,t){a-=e,s-=t,p.add((0,c.sqrt)(a*a+s*s)),a=e,s=t}const f=u},"./node_modules/d3-geo/src/path/string.js":(e,t,i)=>{"use strict";function n(){this._string=[]}function o(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}i.r(t),i.d(t,{default:()=>n}),n.prototype={_radius:4.5,_circle:o(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=o(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}}},"./node_modules/d3-geo/src/pointEqual.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-geo/src/math.js");function o(e,t){return(0,n.abs)(e[0]-t[0])<n.epsilon&&(0,n.abs)(e[1]-t[1])<n.epsilon}},"./node_modules/d3-geo/src/polygonContains.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/adder.js"),o=i("./node_modules/d3-geo/src/cartesian.js"),r=i("./node_modules/d3-geo/src/math.js"),a=(0,n.default)();function s(e){return(0,r.abs)(e[0])<=r.pi?e[0]:(0,r.sign)(e[0])*(((0,r.abs)(e[0])+r.pi)%r.tau-r.pi)}function l(e,t){var i=s(t),n=t[1],l=(0,r.sin)(n),c=[(0,r.sin)(i),-(0,r.cos)(i),0],d=0,p=0;a.reset(),1===l?n=r.halfPi+r.epsilon:-1===l&&(n=-r.halfPi-r.epsilon);for(var u=0,m=e.length;u<m;++u)if(f=(h=e[u]).length)for(var h,f,g=h[f-1],v=s(g),x=g[1]/2+r.quarterPi,y=(0,r.sin)(x),b=(0,r.cos)(x),C=0;C<f;++C,v=w,y=_,b=D,g=S){var S=h[C],w=s(S),I=S[1]/2+r.quarterPi,_=(0,r.sin)(I),D=(0,r.cos)(I),R=w-v,A=R>=0?1:-1,T=A*R,F=T>r.pi,E=y*_;if(a.add((0,r.atan2)(E*A*(0,r.sin)(T),b*D+E*(0,r.cos)(T))),d+=F?R+A*r.tau:R,F^v>=i^w>=i){var M=(0,o.cartesianCross)((0,o.cartesian)(g),(0,o.cartesian)(S));(0,o.cartesianNormalizeInPlace)(M);var O=(0,o.cartesianCross)(c,M);(0,o.cartesianNormalizeInPlace)(O);var k=(F^R>=0?-1:1)*(0,r.asin)(O[2]);(n>k||n===k&&(M[0]||M[1]))&&(p+=F^R>=0?1:-1)}}return(d<-r.epsilon||d<r.epsilon&&a<-r.epsilon)^1&p}},"./node_modules/d3-geo/src/projection/albers.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-geo/src/projection/conicEqualArea.js");function o(){return(0,n.default)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},"./node_modules/d3-geo/src/projection/albersUsa.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/albers.js"),r=i("./node_modules/d3-geo/src/projection/conicEqualArea.js"),a=i("./node_modules/d3-geo/src/projection/fit.js");function s(){var e,t,i,s,l,c,d=(0,o.default)(),p=(0,r.default)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=(0,r.default)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),m={point:function(e,t){c=[e,t]}};function h(e){var t=e[0],n=e[1];return c=null,i.point(t,n),c||(s.point(t,n),c)||(l.point(t,n),c)}function f(){return e=t=null,h}return h.invert=function(e){var t=d.scale(),i=d.translate(),n=(e[0]-i[0])/t,o=(e[1]-i[1])/t;return(o>=.12&&o<.234&&n>=-.425&&n<-.214?p:o>=.166&&o<.234&&n>=-.214&&n<-.115?u:d).invert(e)},h.stream=function(i){return e&&t===i?e:(n=[d.stream(t=i),p.stream(i),u.stream(i)],o=n.length,e={point:function(e,t){for(var i=-1;++i<o;)n[i].point(e,t)},sphere:function(){for(var e=-1;++e<o;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<o;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<o;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<o;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<o;)n[e].polygonEnd()}});var n,o},h.precision=function(e){return arguments.length?(d.precision(e),p.precision(e),u.precision(e),f()):d.precision()},h.scale=function(e){return arguments.length?(d.scale(e),p.scale(.35*e),u.scale(e),h.translate(d.translate())):d.scale()},h.translate=function(e){if(!arguments.length)return d.translate();var t=d.scale(),o=+e[0],r=+e[1];return i=d.translate(e).clipExtent([[o-.455*t,r-.238*t],[o+.455*t,r+.238*t]]).stream(m),s=p.translate([o-.307*t,r+.201*t]).clipExtent([[o-.425*t+n.epsilon,r+.12*t+n.epsilon],[o-.214*t-n.epsilon,r+.234*t-n.epsilon]]).stream(m),l=u.translate([o-.205*t,r+.212*t]).clipExtent([[o-.214*t+n.epsilon,r+.166*t+n.epsilon],[o-.115*t-n.epsilon,r+.234*t-n.epsilon]]).stream(m),f()},h.fitExtent=function(e,t){return(0,a.fitExtent)(h,e,t)},h.fitSize=function(e,t){return(0,a.fitSize)(h,e,t)},h.fitWidth=function(e,t){return(0,a.fitWidth)(h,e,t)},h.fitHeight=function(e,t){return(0,a.fitHeight)(h,e,t)},h.scale(1070)}},"./node_modules/d3-geo/src/projection/azimuthal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{azimuthalRaw:()=>o,azimuthalInvert:()=>r});var n=i("./node_modules/d3-geo/src/math.js");function o(e){return function(t,i){var o=(0,n.cos)(t),r=(0,n.cos)(i),a=e(o*r);return[a*r*(0,n.sin)(t),a*(0,n.sin)(i)]}}function r(e){return function(t,i){var o=(0,n.sqrt)(t*t+i*i),r=e(o),a=(0,n.sin)(r),s=(0,n.cos)(r);return[(0,n.atan2)(t*a,o*s),(0,n.asin)(o&&i*a/o)]}}},"./node_modules/d3-geo/src/projection/azimuthalEqualArea.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{azimuthalEqualAreaRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/azimuthal.js"),r=i("./node_modules/d3-geo/src/projection/index.js"),a=(0,o.azimuthalRaw)(function(e){return(0,n.sqrt)(2/(1+e))});function s(){return(0,r.default)(a).scale(124.75).clipAngle(179.999)}a.invert=(0,o.azimuthalInvert)(function(e){return 2*(0,n.asin)(e/2)})},"./node_modules/d3-geo/src/projection/azimuthalEquidistant.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{azimuthalEquidistantRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/azimuthal.js"),r=i("./node_modules/d3-geo/src/projection/index.js"),a=(0,o.azimuthalRaw)(function(e){return(e=(0,n.acos)(e))&&e/(0,n.sin)(e)});function s(){return(0,r.default)(a).scale(79.4188).clipAngle(179.999)}a.invert=(0,o.azimuthalInvert)(function(e){return e})},"./node_modules/d3-geo/src/projection/conic.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{conicProjection:()=>r});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/index.js");function r(e){var t=0,i=n.pi/3,r=(0,o.projectionMutator)(e),a=r(t,i);return a.parallels=function(e){return arguments.length?r(t=e[0]*n.radians,i=e[1]*n.radians):[t*n.degrees,i*n.degrees]},a}},"./node_modules/d3-geo/src/projection/conicConformal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{conicConformalRaw:()=>s,default:()=>l});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/conic.js"),r=i("./node_modules/d3-geo/src/projection/mercator.js");function a(e){return(0,n.tan)((n.halfPi+e)/2)}function s(e,t){var i=(0,n.cos)(e),o=e===t?(0,n.sin)(e):(0,n.log)(i/(0,n.cos)(t))/(0,n.log)(a(t)/a(e)),s=i*(0,n.pow)(a(e),o)/o;if(!o)return r.mercatorRaw;function l(e,t){s>0?t<-n.halfPi+n.epsilon&&(t=-n.halfPi+n.epsilon):t>n.halfPi-n.epsilon&&(t=n.halfPi-n.epsilon);var i=s/(0,n.pow)(a(t),o);return[i*(0,n.sin)(o*e),s-i*(0,n.cos)(o*e)]}return l.invert=function(e,t){var i=s-t,r=(0,n.sign)(o)*(0,n.sqrt)(e*e+i*i),a=(0,n.atan2)(e,(0,n.abs)(i))*(0,n.sign)(i);return i*o<0&&(a-=n.pi*(0,n.sign)(e)*(0,n.sign)(i)),[a/o,2*(0,n.atan)((0,n.pow)(s/r,1/o))-n.halfPi]},l}function l(){return(0,o.conicProjection)(s).scale(109.5).parallels([30,30])}},"./node_modules/d3-geo/src/projection/conicEqualArea.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{conicEqualAreaRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/conic.js"),r=i("./node_modules/d3-geo/src/projection/cylindricalEqualArea.js");function a(e,t){var i=(0,n.sin)(e),o=(i+(0,n.sin)(t))/2;if((0,n.abs)(o)<n.epsilon)return(0,r.cylindricalEqualAreaRaw)(e);var a=1+i*(2*o-i),s=(0,n.sqrt)(a)/o;function l(e,t){var i=(0,n.sqrt)(a-2*o*(0,n.sin)(t))/o;return[i*(0,n.sin)(e*=o),s-i*(0,n.cos)(e)]}return l.invert=function(e,t){var i=s-t,r=(0,n.atan2)(e,(0,n.abs)(i))*(0,n.sign)(i);return i*o<0&&(r-=n.pi*(0,n.sign)(e)*(0,n.sign)(i)),[r/o,(0,n.asin)((a-(e*e+i*i)*o*o)/(2*o))]},l}function s(){return(0,o.conicProjection)(a).scale(155.424).center([0,33.6442])}},"./node_modules/d3-geo/src/projection/conicEquidistant.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{conicEquidistantRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/conic.js"),r=i("./node_modules/d3-geo/src/projection/equirectangular.js");function a(e,t){var i=(0,n.cos)(e),o=e===t?(0,n.sin)(e):(i-(0,n.cos)(t))/(t-e),a=i/o+e;if((0,n.abs)(o)<n.epsilon)return r.equirectangularRaw;function s(e,t){var i=a-t,r=o*e;return[i*(0,n.sin)(r),a-i*(0,n.cos)(r)]}return s.invert=function(e,t){var i=a-t,r=(0,n.atan2)(e,(0,n.abs)(i))*(0,n.sign)(i);return i*o<0&&(r-=n.pi*(0,n.sign)(e)*(0,n.sign)(i)),[r/o,a-(0,n.sign)(o)*(0,n.sqrt)(e*e+i*i)]},s}function s(){return(0,o.conicProjection)(a).scale(131.154).center([0,13.9389])}},"./node_modules/d3-geo/src/projection/cylindricalEqualArea.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{cylindricalEqualAreaRaw:()=>o});var n=i("./node_modules/d3-geo/src/math.js");function o(e){var t=(0,n.cos)(e);function i(e,i){return[e*t,(0,n.sin)(i)/t]}return i.invert=function(e,i){return[e/t,(0,n.asin)(i*t)]},i}},"./node_modules/d3-geo/src/projection/equalEarth.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{equalEarthRaw:()=>d,default:()=>p});var n=i("./node_modules/d3-geo/src/projection/index.js"),o=i("./node_modules/d3-geo/src/math.js"),r=1.340264,a=-.081106,s=893e-6,l=.003796,c=(0,o.sqrt)(3)/2;function d(e,t){var i=(0,o.asin)(c*(0,o.sin)(t)),n=i*i,d=n*n*n;return[e*(0,o.cos)(i)/(c*(r+3*a*n+d*(7*s+9*l*n))),i*(r+a*n+d*(s+l*n))]}function p(){return(0,n.default)(d).scale(177.158)}d.invert=function(e,t){for(var i,n=t,d=n*n,p=d*d*d,u=0;u<12&&(p=(d=(n-=i=(n*(r+a*d+p*(s+l*d))-t)/(r+3*a*d+p*(7*s+9*l*d)))*n)*d*d,!((0,o.abs)(i)<o.epsilon2));++u);return[c*e*(r+3*a*d+p*(7*s+9*l*d))/(0,o.cos)(n),(0,o.asin)((0,o.sin)(n)/c)]}},"./node_modules/d3-geo/src/projection/equirectangular.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{equirectangularRaw:()=>o,default:()=>r});var n=i("./node_modules/d3-geo/src/projection/index.js");function o(e,t){return[e,t]}function r(){return(0,n.default)(o).scale(152.63)}o.invert=o},"./node_modules/d3-geo/src/projection/fit.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{fitExtent:()=>a,fitSize:()=>s,fitWidth:()=>l,fitHeight:()=>c});var n=i("./node_modules/d3-geo/src/stream.js"),o=i("./node_modules/d3-geo/src/path/bounds.js");function r(e,t,i){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),(0,n.default)(i,e.stream(o.default)),t(o.default.result()),null!=r&&e.clipExtent(r),e}function a(e,t,i){return r(e,function(i){var n=t[1][0]-t[0][0],o=t[1][1]-t[0][1],r=Math.min(n/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),a=+t[0][0]+(n-r*(i[1][0]+i[0][0]))/2,s=+t[0][1]+(o-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([a,s])},i)}function s(e,t,i){return a(e,[[0,0],t],i)}function l(e,t,i){return r(e,function(i){var n=+t,o=n/(i[1][0]-i[0][0]),r=(n-o*(i[1][0]+i[0][0]))/2,a=-o*i[0][1];e.scale(150*o).translate([r,a])},i)}function c(e,t,i){return r(e,function(i){var n=+t,o=n/(i[1][1]-i[0][1]),r=-o*i[0][0],a=(n-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([r,a])},i)}},"./node_modules/d3-geo/src/projection/gnomonic.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{gnomonicRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/azimuthal.js"),r=i("./node_modules/d3-geo/src/projection/index.js");function a(e,t){var i=(0,n.cos)(t),o=(0,n.cos)(e)*i;return[i*(0,n.sin)(e)/o,(0,n.sin)(t)/o]}function s(){return(0,r.default)(a).scale(144.049).clipAngle(60)}a.invert=(0,o.azimuthalInvert)(n.atan)},"./node_modules/d3-geo/src/projection/identity.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/clip/rectangle.js"),o=i("./node_modules/d3-geo/src/identity.js"),r=i("./node_modules/d3-geo/src/transform.js"),a=i("./node_modules/d3-geo/src/projection/fit.js"),s=i("./node_modules/d3-geo/src/math.js");function l(){var e,t,i,l,c,d,p,u=1,m=0,h=0,f=1,g=1,v=0,x=null,y=1,b=1,C=(0,r.transformer)({point:function(e,t){var i=I([e,t]);this.stream.point(i[0],i[1])}}),S=o.default;function w(){return y=u*f,b=u*g,d=p=null,I}function I(i){var n=i[0]*y,o=i[1]*b;if(v){var r=o*e-n*t;n=n*e+o*t,o=r}return[n+m,o+h]}return I.invert=function(i){var n=i[0]-m,o=i[1]-h;if(v){var r=o*e+n*t;n=n*e-o*t,o=r}return[n/y,o/b]},I.stream=function(e){return d&&p===e?d:d=C(S(p=e))},I.postclip=function(e){return arguments.length?(S=e,x=i=l=c=null,w()):S},I.clipExtent=function(e){return arguments.length?(S=null==e?(x=i=l=c=null,o.default):(0,n.default)(x=+e[0][0],i=+e[0][1],l=+e[1][0],c=+e[1][1]),w()):null==x?null:[[x,i],[l,c]]},I.scale=function(e){return arguments.length?(u=+e,w()):u},I.translate=function(e){return arguments.length?(m=+e[0],h=+e[1],w()):[m,h]},I.angle=function(i){return arguments.length?(v=i%360*s.radians,t=(0,s.sin)(v),e=(0,s.cos)(v),w()):v*s.degrees},I.reflectX=function(e){return arguments.length?(f=e?-1:1,w()):f<0},I.reflectY=function(e){return arguments.length?(g=e?-1:1,w()):g<0},I.fitExtent=function(e,t){return(0,a.fitExtent)(I,e,t)},I.fitSize=function(e,t){return(0,a.fitSize)(I,e,t)},I.fitWidth=function(e,t){return(0,a.fitWidth)(I,e,t)},I.fitHeight=function(e,t){return(0,a.fitHeight)(I,e,t)},I}},"./node_modules/d3-geo/src/projection/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g,projectionMutator:()=>v});var n=i("./node_modules/d3-geo/src/clip/antimeridian.js"),o=i("./node_modules/d3-geo/src/clip/circle.js"),r=i("./node_modules/d3-geo/src/clip/rectangle.js"),a=i("./node_modules/d3-geo/src/compose.js"),s=i("./node_modules/d3-geo/src/identity.js"),l=i("./node_modules/d3-geo/src/math.js"),c=i("./node_modules/d3-geo/src/rotation.js"),d=i("./node_modules/d3-geo/src/transform.js"),p=i("./node_modules/d3-geo/src/projection/fit.js"),u=i("./node_modules/d3-geo/src/projection/resample.js"),m=(0,d.transformer)({point:function(e,t){this.stream.point(e*l.radians,t*l.radians)}});function h(e,t,i,n,o){function r(r,a){return[t+e*(r*=n),i-e*(a*=o)]}return r.invert=function(r,a){return[(r-t)/e*n,(i-a)/e*o]},r}function f(e,t,i,n,o,r){var a=(0,l.cos)(r),s=(0,l.sin)(r),c=a*e,d=s*e,p=a/e,u=s/e,m=(s*i-a*t)/e,h=(s*t+a*i)/e;function f(e,r){return[c*(e*=n)-d*(r*=o)+t,i-d*e-c*r]}return f.invert=function(e,t){return[n*(p*e-u*t+m),o*(h-u*e-p*t)]},f}function g(e){return v(function(){return e})()}function v(e){var t,i,g,v,x,y,b,C,S,w,I=150,_=480,D=250,R=0,A=0,T=0,F=0,E=0,M=0,O=1,k=1,j=null,P=n.default,N=null,V=s.default,L=.5;function B(e){return C(e[0]*l.radians,e[1]*l.radians)}function $(e){return(e=C.invert(e[0],e[1]))&&[e[0]*l.degrees,e[1]*l.degrees]}function G(){var e=f(I,0,0,O,k,M).apply(null,t(R,A)),n=(M?f:h)(I,_-e[0],D-e[1],O,k,M);return i=(0,c.rotateRadians)(T,F,E),b=(0,a.default)(t,n),C=(0,a.default)(i,b),y=(0,u.default)(b,L),z()}function z(){return S=w=null,B}return B.stream=function(e){return S&&w===e?S:S=m(function(e){return(0,d.transformer)({point:function(t,i){var n=e(t,i);return this.stream.point(n[0],n[1])}})}(i)(P(y(V(w=e)))))},B.preclip=function(e){return arguments.length?(P=e,j=void 0,z()):P},B.postclip=function(e){return arguments.length?(V=e,N=g=v=x=null,z()):V},B.clipAngle=function(e){return arguments.length?(P=+e?(0,o.default)(j=e*l.radians):(j=null,n.default),z()):j*l.degrees},B.clipExtent=function(e){return arguments.length?(V=null==e?(N=g=v=x=null,s.default):(0,r.default)(N=+e[0][0],g=+e[0][1],v=+e[1][0],x=+e[1][1]),z()):null==N?null:[[N,g],[v,x]]},B.scale=function(e){return arguments.length?(I=+e,G()):I},B.translate=function(e){return arguments.length?(_=+e[0],D=+e[1],G()):[_,D]},B.center=function(e){return arguments.length?(R=e[0]%360*l.radians,A=e[1]%360*l.radians,G()):[R*l.degrees,A*l.degrees]},B.rotate=function(e){return arguments.length?(T=e[0]%360*l.radians,F=e[1]%360*l.radians,E=e.length>2?e[2]%360*l.radians:0,G()):[T*l.degrees,F*l.degrees,E*l.degrees]},B.angle=function(e){return arguments.length?(M=e%360*l.radians,G()):M*l.degrees},B.reflectX=function(e){return arguments.length?(O=e?-1:1,G()):O<0},B.reflectY=function(e){return arguments.length?(k=e?-1:1,G()):k<0},B.precision=function(e){return arguments.length?(y=(0,u.default)(b,L=e*e),z()):(0,l.sqrt)(L)},B.fitExtent=function(e,t){return(0,p.fitExtent)(B,e,t)},B.fitSize=function(e,t){return(0,p.fitSize)(B,e,t)},B.fitWidth=function(e,t){return(0,p.fitWidth)(B,e,t)},B.fitHeight=function(e,t){return(0,p.fitHeight)(B,e,t)},function(){return t=e.apply(this,arguments),B.invert=t.invert&&$,G()}}},"./node_modules/d3-geo/src/projection/mercator.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{mercatorRaw:()=>a,default:()=>s,mercatorProjection:()=>l});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/rotation.js"),r=i("./node_modules/d3-geo/src/projection/index.js");function a(e,t){return[e,(0,n.log)((0,n.tan)((n.halfPi+t)/2))]}function s(){return l(a).scale(961/n.tau)}function l(e){var t,i,s,l=(0,r.default)(e),c=l.center,d=l.scale,p=l.translate,u=l.clipExtent,m=null;function h(){var r=n.pi*d(),c=l((0,o.default)(l.rotate()).invert([0,0]));return u(null==m?[[c[0]-r,c[1]-r],[c[0]+r,c[1]+r]]:e===a?[[Math.max(c[0]-r,m),t],[Math.min(c[0]+r,i),s]]:[[m,Math.max(c[1]-r,t)],[i,Math.min(c[1]+r,s)]])}return l.scale=function(e){return arguments.length?(d(e),h()):d()},l.translate=function(e){return arguments.length?(p(e),h()):p()},l.center=function(e){return arguments.length?(c(e),h()):c()},l.clipExtent=function(e){return arguments.length?(null==e?m=t=i=s=null:(m=+e[0][0],t=+e[0][1],i=+e[1][0],s=+e[1][1]),h()):null==m?null:[[m,t],[i,s]]},h()}a.invert=function(e,t){return[e,2*(0,n.atan)((0,n.exp)(t))-n.halfPi]}},"./node_modules/d3-geo/src/projection/naturalEarth1.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{naturalEarth1Raw:()=>r,default:()=>a});var n=i("./node_modules/d3-geo/src/projection/index.js"),o=i("./node_modules/d3-geo/src/math.js");function r(e,t){var i=t*t,n=i*i;return[e*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),t*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function a(){return(0,n.default)(r).scale(175.295)}r.invert=function(e,t){var i,n=t,r=25;do{var a=n*n,s=a*a;n-=i=(n*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while((0,o.abs)(i)>o.epsilon&&--r>0);return[e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),n]}},"./node_modules/d3-geo/src/projection/orthographic.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{orthographicRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/azimuthal.js"),r=i("./node_modules/d3-geo/src/projection/index.js");function a(e,t){return[(0,n.cos)(t)*(0,n.sin)(e),(0,n.sin)(t)]}function s(){return(0,r.default)(a).scale(249.5).clipAngle(90+n.epsilon)}a.invert=(0,o.azimuthalInvert)(n.asin)},"./node_modules/d3-geo/src/projection/resample.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-geo/src/cartesian.js"),o=i("./node_modules/d3-geo/src/math.js"),r=i("./node_modules/d3-geo/src/transform.js"),a=16,s=(0,o.cos)(30*o.radians);function l(e,t){return+t?function(e,t){function i(n,r,a,l,c,d,p,u,m,h,f,g,v,x){var y=p-n,b=u-r,C=y*y+b*b;if(C>4*t&&v--){var S=l+h,w=c+f,I=d+g,_=(0,o.sqrt)(S*S+w*w+I*I),D=(0,o.asin)(I/=_),R=(0,o.abs)((0,o.abs)(I)-1)<o.epsilon||(0,o.abs)(a-m)<o.epsilon?(a+m)/2:(0,o.atan2)(w,S),A=e(R,D),T=A[0],F=A[1],E=T-n,M=F-r,O=b*E-y*M;(O*O/C>t||(0,o.abs)((y*E+b*M)/C-.5)>.3||l*h+c*f+d*g<s)&&(i(n,r,a,l,c,d,T,F,R,S/=_,w/=_,I,v,x),x.point(T,F),i(T,F,R,S,w,I,p,u,m,h,f,g,v,x))}}return function(t){var o,r,s,l,c,d,p,u,m,h,f,g,v={point:x,lineStart:y,lineEnd:C,polygonStart:function(){t.polygonStart(),v.lineStart=S},polygonEnd:function(){t.polygonEnd(),v.lineStart=y}};function x(i,n){i=e(i,n),t.point(i[0],i[1])}function y(){u=NaN,v.point=b,t.lineStart()}function b(o,r){var s=(0,n.cartesian)([o,r]),l=e(o,r);i(u,m,p,h,f,g,u=l[0],m=l[1],p=o,h=s[0],f=s[1],g=s[2],a,t),t.point(u,m)}function C(){v.point=x,t.lineEnd()}function S(){y(),v.point=w,v.lineEnd=I}function w(e,t){b(o=e,t),r=u,s=m,l=h,c=f,d=g,v.point=b}function I(){i(u,m,p,h,f,g,r,s,o,l,c,d,a,t),v.lineEnd=C,C()}return v}}(e,t):function(e){return(0,r.transformer)({point:function(t,i){t=e(t,i),this.stream.point(t[0],t[1])}})}(e)}},"./node_modules/d3-geo/src/projection/stereographic.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{stereographicRaw:()=>a,default:()=>s});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/azimuthal.js"),r=i("./node_modules/d3-geo/src/projection/index.js");function a(e,t){var i=(0,n.cos)(t),o=1+(0,n.cos)(e)*i;return[i*(0,n.sin)(e)/o,(0,n.sin)(t)/o]}function s(){return(0,r.default)(a).scale(250).clipAngle(142)}a.invert=(0,o.azimuthalInvert)(function(e){return 2*(0,n.atan)(e)})},"./node_modules/d3-geo/src/projection/transverseMercator.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{transverseMercatorRaw:()=>r,default:()=>a});var n=i("./node_modules/d3-geo/src/math.js"),o=i("./node_modules/d3-geo/src/projection/mercator.js");function r(e,t){return[(0,n.log)((0,n.tan)((n.halfPi+t)/2)),-e]}function a(){var e=(0,o.mercatorProjection)(r),t=e.center,i=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?i([e[0],e[1],e.length>2?e[2]+90:90]):[(e=i())[0],e[1],e[2]-90]},i([0,0,90]).scale(159.155)}r.invert=function(e,t){return[-t,2*(0,n.atan)((0,n.exp)(e))-n.halfPi]}},"./node_modules/d3-geo/src/rotation.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{rotateRadians:()=>a,default:()=>d});var n=i("./node_modules/d3-geo/src/compose.js"),o=i("./node_modules/d3-geo/src/math.js");function r(e,t){return[(0,o.abs)(e)>o.pi?e+Math.round(-e/o.tau)*o.tau:e,t]}function a(e,t,i){return(e%=o.tau)?t||i?(0,n.default)(l(e),c(t,i)):l(e):t||i?c(t,i):r}function s(e){return function(t,i){return[(t+=e)>o.pi?t-o.tau:t<-o.pi?t+o.tau:t,i]}}function l(e){var t=s(e);return t.invert=s(-e),t}function c(e,t){var i=(0,o.cos)(e),n=(0,o.sin)(e),r=(0,o.cos)(t),a=(0,o.sin)(t);function s(e,t){var s=(0,o.cos)(t),l=(0,o.cos)(e)*s,c=(0,o.sin)(e)*s,d=(0,o.sin)(t),p=d*i+l*n;return[(0,o.atan2)(c*r-p*a,l*i-d*n),(0,o.asin)(p*r+c*a)]}return s.invert=function(e,t){var s=(0,o.cos)(t),l=(0,o.cos)(e)*s,c=(0,o.sin)(e)*s,d=(0,o.sin)(t),p=d*r-c*a;return[(0,o.atan2)(c*r+d*a,l*i+p*n),(0,o.asin)(p*i-l*n)]},s}function d(e){function t(t){return(t=e(t[0]*o.radians,t[1]*o.radians))[0]*=o.degrees,t[1]*=o.degrees,t}return e=a(e[0]*o.radians,e[1]*o.radians,e.length>2?e[2]*o.radians:0),t.invert=function(t){return(t=e.invert(t[0]*o.radians,t[1]*o.radians))[0]*=o.degrees,t[1]*=o.degrees,t},t}r.invert=r},"./node_modules/d3-geo/src/stream.js":(e,t,i)=>{"use strict";function n(e,t){e&&r.hasOwnProperty(e.type)&&r[e.type](e,t)}i.r(t),i.d(t,{default:()=>l});var o={Feature:function(e,t){n(e.geometry,t)},FeatureCollection:function(e,t){for(var i=e.features,o=-1,r=i.length;++o<r;)n(i[o].geometry,t)}},r={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)e=i[n],t.point(e[0],e[1],e[2])},LineString:function(e,t){a(e.coordinates,t,0)},MultiLineString:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)a(i[n],t,0)},Polygon:function(e,t){s(e.coordinates,t)},MultiPolygon:function(e,t){for(var i=e.coordinates,n=-1,o=i.length;++n<o;)s(i[n],t)},GeometryCollection:function(e,t){for(var i=e.geometries,o=-1,r=i.length;++o<r;)n(i[o],t)}};function a(e,t,i){var n,o=-1,r=e.length-i;for(t.lineStart();++o<r;)n=e[o],t.point(n[0],n[1],n[2]);t.lineEnd()}function s(e,t){var i=-1,n=e.length;for(t.polygonStart();++i<n;)a(e[i],t,1);t.polygonEnd()}function l(e,t){e&&o.hasOwnProperty(e.type)?o[e.type](e,t):n(e,t)}},"./node_modules/d3-geo/src/transform.js":(e,t,i)=>{"use strict";function n(e){return{stream:o(e)}}function o(e){return function(t){var i=new r;for(var n in e)i[n]=e[n];return i.stream=t,i}}function r(){}i.r(t),i.d(t,{default:()=>n,transformer:()=>o}),r.prototype={constructor:r,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},"./node_modules/d3-hierarchy/src/accessors.js":(e,t,i)=>{"use strict";function n(e){return null==e?null:o(e)}function o(e){if("function"!=typeof e)throw new Error;return e}i.r(t),i.d(t,{optional:()=>n,required:()=>o})},"./node_modules/d3-hierarchy/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>n,shuffle:()=>o});var n=Array.prototype.slice;function o(e){for(var t,i,n=e.length;n;)i=Math.random()*n--|0,t=e[n],e[n]=e[i],e[i]=t;return e}},"./node_modules/d3-hierarchy/src/cluster.js":(e,t,i)=>{"use strict";function n(e,t){return e.parent===t.parent?1:2}function o(e,t){return e+t.x}function r(e,t){return Math.max(e,t.y)}function a(){var e=n,t=1,i=1,a=!1;function s(n){var s,l=0;n.eachAfter(function(t){var i=t.children;i?(t.x=function(e){return e.reduce(o,0)/e.length}(i),t.y=function(e){return 1+e.reduce(r,0)}(i)):(t.x=s?l+=e(t,s):0,t.y=0,s=t)});var c=function(e){for(var t;t=e.children;)e=t[0];return e}(n),d=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(n),p=c.x-e(c,d)/2,u=d.x+e(d,c)/2;return n.eachAfter(a?function(e){e.x=(e.x-n.x)*t,e.y=(n.y-e.y)*i}:function(e){e.x=(e.x-p)/(u-p)*t,e.y=(1-(n.y?e.y/n.y:1))*i})}return s.separation=function(t){return arguments.length?(e=t,s):e},s.size=function(e){return arguments.length?(a=!1,t=+e[0],i=+e[1],s):a?null:[t,i]},s.nodeSize=function(e){return arguments.length?(a=!0,t=+e[0],i=+e[1],s):a?[t,i]:null},s}i.r(t),i.d(t,{default:()=>a})},"./node_modules/d3-hierarchy/src/constant.js":(e,t,i)=>{"use strict";function n(){return 0}function o(e){return function(){return e}}i.r(t),i.d(t,{constantZero:()=>n,default:()=>o})},"./node_modules/d3-hierarchy/src/hierarchy/ancestors.js":(e,t,i)=>{"use strict";function n(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/count.js":(e,t,i)=>{"use strict";function n(e){var t=0,i=e.children,n=i&&i.length;if(n)for(;--n>=0;)t+=i[n].value;else t=1;e.value=t}function o(){return this.eachAfter(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-hierarchy/src/hierarchy/descendants.js":(e,t,i)=>{"use strict";function n(){var e=[];return this.each(function(t){e.push(t)}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/each.js":(e,t,i)=>{"use strict";function n(e){var t,i,n,o,r=this,a=[r];do{for(t=a.reverse(),a=[];r=t.pop();)if(e(r),i=r.children)for(n=0,o=i.length;n<o;++n)a.push(i[n])}while(a.length);return this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js":(e,t,i)=>{"use strict";function n(e){for(var t,i,n,o=this,r=[o],a=[];o=r.pop();)if(a.push(o),t=o.children)for(i=0,n=t.length;i<n;++i)r.push(t[i]);for(;o=a.pop();)e(o);return this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js":(e,t,i)=>{"use strict";function n(e){for(var t,i,n=this,o=[n];n=o.pop();)if(e(n),t=n.children)for(i=t.length-1;i>=0;--i)o.push(t[i]);return this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h,computeHeight:()=>v,Node:()=>x});var n=i("./node_modules/d3-hierarchy/src/hierarchy/count.js"),o=i("./node_modules/d3-hierarchy/src/hierarchy/each.js"),r=i("./node_modules/d3-hierarchy/src/hierarchy/eachBefore.js"),a=i("./node_modules/d3-hierarchy/src/hierarchy/eachAfter.js"),s=i("./node_modules/d3-hierarchy/src/hierarchy/sum.js"),l=i("./node_modules/d3-hierarchy/src/hierarchy/sort.js"),c=i("./node_modules/d3-hierarchy/src/hierarchy/path.js"),d=i("./node_modules/d3-hierarchy/src/hierarchy/ancestors.js"),p=i("./node_modules/d3-hierarchy/src/hierarchy/descendants.js"),u=i("./node_modules/d3-hierarchy/src/hierarchy/leaves.js"),m=i("./node_modules/d3-hierarchy/src/hierarchy/links.js");function h(e,t){var i,n,o,r,a,s=new x(e),l=+e.value&&(s.value=e.value),c=[s];for(null==t&&(t=f);i=c.pop();)if(l&&(i.value=+i.data.value),(o=t(i.data))&&(a=o.length))for(i.children=new Array(a),r=a-1;r>=0;--r)c.push(n=i.children[r]=new x(o[r])),n.parent=i,n.depth=i.depth+1;return s.eachBefore(v)}function f(e){return e.children}function g(e){e.data=e.data.data}function v(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function x(e){this.data=e,this.depth=this.height=0,this.parent=null}x.prototype=h.prototype={constructor:x,count:n.default,each:o.default,eachAfter:a.default,eachBefore:r.default,sum:s.default,sort:l.default,path:c.default,ancestors:d.default,descendants:p.default,leaves:u.default,links:m.default,copy:function(){return h(this).eachBefore(g)}}},"./node_modules/d3-hierarchy/src/hierarchy/leaves.js":(e,t,i)=>{"use strict";function n(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/links.js":(e,t,i)=>{"use strict";function n(){var e=this,t=[];return e.each(function(i){i!==e&&t.push({source:i.parent,target:i})}),t}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/path.js":(e,t,i)=>{"use strict";function n(e){for(var t=this,i=function(e,t){if(e===t)return e;var i=e.ancestors(),n=t.ancestors(),o=null;e=i.pop(),t=n.pop();for(;e===t;)o=e,e=i.pop(),t=n.pop();return o}(t,e),n=[t];t!==i;)t=t.parent,n.push(t);for(var o=n.length;e!==i;)n.splice(o,0,e),e=e.parent;return n}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/sort.js":(e,t,i)=>{"use strict";function n(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/hierarchy/sum.js":(e,t,i)=>{"use strict";function n(e){return this.eachAfter(function(t){for(var i=+e(t.data)||0,n=t.children,o=n&&n.length;--o>=0;)i+=n[o].value;t.value=i})}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{cluster:()=>n.default,hierarchy:()=>o.default,pack:()=>r.default,packSiblings:()=>a.default,packEnclose:()=>s.default,partition:()=>l.default,stratify:()=>c.default,tree:()=>d.default,treemap:()=>p.default,treemapBinary:()=>u.default,treemapDice:()=>m.default,treemapSlice:()=>h.default,treemapSliceDice:()=>f.default,treemapSquarify:()=>g.default,treemapResquarify:()=>v.default});var n=i("./node_modules/d3-hierarchy/src/cluster.js"),o=i("./node_modules/d3-hierarchy/src/hierarchy/index.js"),r=i("./node_modules/d3-hierarchy/src/pack/index.js"),a=i("./node_modules/d3-hierarchy/src/pack/siblings.js"),s=i("./node_modules/d3-hierarchy/src/pack/enclose.js"),l=i("./node_modules/d3-hierarchy/src/partition.js"),c=i("./node_modules/d3-hierarchy/src/stratify.js"),d=i("./node_modules/d3-hierarchy/src/tree.js"),p=i("./node_modules/d3-hierarchy/src/treemap/index.js"),u=i("./node_modules/d3-hierarchy/src/treemap/binary.js"),m=i("./node_modules/d3-hierarchy/src/treemap/dice.js"),h=i("./node_modules/d3-hierarchy/src/treemap/slice.js"),f=i("./node_modules/d3-hierarchy/src/treemap/sliceDice.js"),g=i("./node_modules/d3-hierarchy/src/treemap/squarify.js"),v=i("./node_modules/d3-hierarchy/src/treemap/resquarify.js")},"./node_modules/d3-hierarchy/src/pack/enclose.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-hierarchy/src/array.js");function o(e){for(var t,i,o=0,a=(e=(0,n.shuffle)(n.slice.call(e))).length,l=[];o<a;)t=e[o],i&&s(i,t)?++o:(i=c(l=r(l,t)),o=0);return i}function r(e,t){var i,n;if(l(t,e))return[t];for(i=0;i<e.length;++i)if(a(t,e[i])&&l(d(e[i],t),e))return[e[i],t];for(i=0;i<e.length-1;++i)for(n=i+1;n<e.length;++n)if(a(d(e[i],e[n]),t)&&a(d(e[i],t),e[n])&&a(d(e[n],t),e[i])&&l(p(e[i],e[n],t),e))return[e[i],e[n],t];throw new Error}function a(e,t){var i=e.r-t.r,n=t.x-e.x,o=t.y-e.y;return i<0||i*i<n*n+o*o}function s(e,t){var i=e.r-t.r+1e-6,n=t.x-e.x,o=t.y-e.y;return i>0&&i*i>n*n+o*o}function l(e,t){for(var i=0;i<t.length;++i)if(!s(e,t[i]))return!1;return!0}function c(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return d(e[0],e[1]);case 3:return p(e[0],e[1],e[2])}var t}function d(e,t){var i=e.x,n=e.y,o=e.r,r=t.x,a=t.y,s=t.r,l=r-i,c=a-n,d=s-o,p=Math.sqrt(l*l+c*c);return{x:(i+r+l/p*d)/2,y:(n+a+c/p*d)/2,r:(p+o+s)/2}}function p(e,t,i){var n=e.x,o=e.y,r=e.r,a=t.x,s=t.y,l=t.r,c=i.x,d=i.y,p=i.r,u=n-a,m=n-c,h=o-s,f=o-d,g=l-r,v=p-r,x=n*n+o*o-r*r,y=x-a*a-s*s+l*l,b=x-c*c-d*d+p*p,C=m*h-u*f,S=(h*b-f*y)/(2*C)-n,w=(f*g-h*v)/C,I=(m*y-u*b)/(2*C)-o,_=(u*v-m*g)/C,D=w*w+_*_-1,R=2*(r+S*w+I*_),A=S*S+I*I-r*r,T=-(D?(R+Math.sqrt(R*R-4*D*A))/(2*D):A/R);return{x:n+S+w*T,y:o+I+_*T,r:T}}},"./node_modules/d3-hierarchy/src/pack/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-hierarchy/src/pack/siblings.js"),o=i("./node_modules/d3-hierarchy/src/accessors.js"),r=i("./node_modules/d3-hierarchy/src/constant.js");function a(e){return Math.sqrt(e.value)}function s(){var e=null,t=1,i=1,n=r.constantZero;function s(o){return o.x=t/2,o.y=i/2,e?o.eachBefore(l(e)).eachAfter(c(n,.5)).eachBefore(d(1)):o.eachBefore(l(a)).eachAfter(c(r.constantZero,1)).eachAfter(c(n,o.r/Math.min(t,i))).eachBefore(d(Math.min(t,i)/(2*o.r))),o}return s.radius=function(t){return arguments.length?(e=(0,o.optional)(t),s):e},s.size=function(e){return arguments.length?(t=+e[0],i=+e[1],s):[t,i]},s.padding=function(e){return arguments.length?(n="function"==typeof e?e:(0,r.default)(+e),s):n},s}function l(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function c(e,t){return function(i){if(o=i.children){var o,r,a,s=o.length,l=e(i)*t||0;if(l)for(r=0;r<s;++r)o[r].r+=l;if(a=(0,n.packEnclose)(o),l)for(r=0;r<s;++r)o[r].r-=l;i.r=a+l}}}function d(e){return function(t){var i=t.parent;t.r*=e,i&&(t.x=i.x+e*t.x,t.y=i.y+e*t.y)}}},"./node_modules/d3-hierarchy/src/pack/siblings.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{packEnclose:()=>l,default:()=>c});var n=i("./node_modules/d3-hierarchy/src/pack/enclose.js");function o(e,t,i){var n,o,r,a,s=e.x-t.x,l=e.y-t.y,c=s*s+l*l;c?(o=t.r+i.r,o*=o,a=e.r+i.r,o>(a*=a)?(n=(c+a-o)/(2*c),r=Math.sqrt(Math.max(0,a/c-n*n)),i.x=e.x-n*s-r*l,i.y=e.y-n*l+r*s):(n=(c+o-a)/(2*c),r=Math.sqrt(Math.max(0,o/c-n*n)),i.x=t.x+n*s-r*l,i.y=t.y+n*l+r*s)):(i.x=t.x+i.r,i.y=t.y)}function r(e,t){var i=e.r+t.r-1e-6,n=t.x-e.x,o=t.y-e.y;return i>0&&i*i>n*n+o*o}function a(e){var t=e._,i=e.next._,n=t.r+i.r,o=(t.x*i.r+i.x*t.r)/n,r=(t.y*i.r+i.y*t.r)/n;return o*o+r*r}function s(e){this._=e,this.next=null,this.previous=null}function l(e){if(!(c=e.length))return 0;var t,i,l,c,d,p,u,m,h,f,g;if((t=e[0]).x=0,t.y=0,!(c>1))return t.r;if(i=e[1],t.x=-i.r,i.x=t.r,i.y=0,!(c>2))return t.r+i.r;o(i,t,l=e[2]),t=new s(t),i=new s(i),l=new s(l),t.next=l.previous=i,i.next=t.previous=l,l.next=i.previous=t;e:for(u=3;u<c;++u){o(t._,i._,l=e[u]),l=new s(l),m=i.next,h=t.previous,f=i._.r,g=t._.r;do{if(f<=g){if(r(m._,l._)){i=m,t.next=i,i.previous=t,--u;continue e}f+=m._.r,m=m.next}else{if(r(h._,l._)){(t=h).next=i,i.previous=t,--u;continue e}g+=h._.r,h=h.previous}}while(m!==h.next);for(l.previous=t,l.next=i,t.next=i.previous=i=l,d=a(t);(l=l.next)!==i;)(p=a(l))<d&&(t=l,d=p);i=t.next}for(t=[i._],l=i;(l=l.next)!==i;)t.push(l._);for(l=(0,n.default)(t),u=0;u<c;++u)(t=e[u]).x-=l.x,t.y-=l.y;return l.r}function c(e){return l(e),e}},"./node_modules/d3-hierarchy/src/partition.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-hierarchy/src/treemap/round.js"),o=i("./node_modules/d3-hierarchy/src/treemap/dice.js");function r(){var e=1,t=1,i=0,r=!1;function a(a){var s=a.height+1;return a.x0=a.y0=i,a.x1=e,a.y1=t/s,a.eachBefore(function(e,t){return function(n){n.children&&(0,o.default)(n,n.x0,e*(n.depth+1)/t,n.x1,e*(n.depth+2)/t);var r=n.x0,a=n.y0,s=n.x1-i,l=n.y1-i;s<r&&(r=s=(r+s)/2),l<a&&(a=l=(a+l)/2),n.x0=r,n.y0=a,n.x1=s,n.y1=l}}(t,s)),r&&a.eachBefore(n.default),a}return a.round=function(e){return arguments.length?(r=!!e,a):r},a.size=function(i){return arguments.length?(e=+i[0],t=+i[1],a):[e,t]},a.padding=function(e){return arguments.length?(i=+e,a):i},a}},"./node_modules/d3-hierarchy/src/stratify.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./node_modules/d3-hierarchy/src/accessors.js"),o=i("./node_modules/d3-hierarchy/src/hierarchy/index.js"),r="$",a={depth:-1},s={};function l(e){return e.id}function c(e){return e.parentId}function d(){var e=l,t=c;function i(i){var n,l,c,d,p,u,m,h=i.length,f=new Array(h),g={};for(l=0;l<h;++l)n=i[l],p=f[l]=new o.Node(n),null!=(u=e(n,l,i))&&(u+="")&&(g[m=r+(p.id=u)]=m in g?s:p);for(l=0;l<h;++l)if(p=f[l],null!=(u=t(i[l],l,i))&&(u+="")){if(!(d=g[r+u]))throw new Error("missing: "+u);if(d===s)throw new Error("ambiguous: "+u);d.children?d.children.push(p):d.children=[p],p.parent=d}else{if(c)throw new Error("multiple roots");c=p}if(!c)throw new Error("no root");if(c.parent=a,c.eachBefore(function(e){e.depth=e.parent.depth+1,--h}).eachBefore(o.computeHeight),c.parent=null,h>0)throw new Error("cycle");return c}return i.id=function(t){return arguments.length?(e=(0,n.required)(t),i):e},i.parentId=function(e){return arguments.length?(t=(0,n.required)(e),i):t},i}},"./node_modules/d3-hierarchy/src/tree.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./node_modules/d3-hierarchy/src/hierarchy/index.js");function o(e,t){return e.parent===t.parent?1:2}function r(e){var t=e.children;return t?t[0]:e.t}function a(e){var t=e.children;return t?t[t.length-1]:e.t}function s(e,t,i){var n=i/(t.i-e.i);t.c-=n,t.s+=i,e.c+=n,t.z+=i,t.m+=i}function l(e,t,i){return e.a.parent===t.parent?e.a:i}function c(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function d(){var e=o,t=1,i=1,n=null;function d(o){var r=function(e){for(var t,i,n,o,r,a=new c(e,0),s=[a];t=s.pop();)if(n=t._.children)for(t.children=new Array(r=n.length),o=r-1;o>=0;--o)s.push(i=t.children[o]=new c(n[o],o)),i.parent=t;return(a.parent=new c(null,0)).children=[a],a}(o);if(r.eachAfter(p),r.parent.m=-r.z,r.eachBefore(u),n)o.eachBefore(m);else{var a=o,s=o,l=o;o.eachBefore(function(e){e.x<a.x&&(a=e),e.x>s.x&&(s=e),e.depth>l.depth&&(l=e)});var d=a===s?1:e(a,s)/2,h=d-a.x,f=t/(s.x+d+h),g=i/(l.depth||1);o.eachBefore(function(e){e.x=(e.x+h)*f,e.y=e.depth*g})}return o}function p(t){var i=t.children,n=t.parent.children,o=t.i?n[t.i-1]:null;if(i){!function(e){for(var t,i=0,n=0,o=e.children,r=o.length;--r>=0;)(t=o[r]).z+=i,t.m+=i,i+=t.s+(n+=t.c)}(t);var c=(i[0].z+i[i.length-1].z)/2;o?(t.z=o.z+e(t._,o._),t.m=t.z-c):t.z=c}else o&&(t.z=o.z+e(t._,o._));t.parent.A=function(t,i,n){if(i){for(var o,c=t,d=t,p=i,u=c.parent.children[0],m=c.m,h=d.m,f=p.m,g=u.m;p=a(p),c=r(c),p&&c;)u=r(u),(d=a(d)).a=t,(o=p.z+f-c.z-m+e(p._,c._))>0&&(s(l(p,t,n),t,o),m+=o,h+=o),f+=p.m,m+=c.m,g+=u.m,h+=d.m;p&&!a(d)&&(d.t=p,d.m+=f-h),c&&!r(u)&&(u.t=c,u.m+=m-g,n=t)}return n}(t,o,t.parent.A||n[0])}function u(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function m(e){e.x*=t,e.y=e.depth*i}return d.separation=function(t){return arguments.length?(e=t,d):e},d.size=function(e){return arguments.length?(n=!1,t=+e[0],i=+e[1],d):n?null:[t,i]},d.nodeSize=function(e){return arguments.length?(n=!0,t=+e[0],i=+e[1],d):n?[t,i]:null},d}c.prototype=Object.create(n.Node.prototype)},"./node_modules/d3-hierarchy/src/treemap/binary.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){var r,a,s=e.children,l=s.length,c=new Array(l+1);for(c[0]=a=r=0;r<l;++r)c[r+1]=a+=s[r].value;!function e(t,i,n,o,r,a,l){if(t>=i-1){var d=s[t];return d.x0=o,d.y0=r,d.x1=a,void(d.y1=l)}var p=c[t],u=n/2+p,m=t+1,h=i-1;for(;m<h;){var f=m+h>>>1;c[f]<u?m=f+1:h=f}u-c[m-1]<c[m]-u&&t+1<m&&--m;var g=c[m]-p,v=n-g;if(a-o>l-r){var x=(o*v+a*g)/n;e(t,m,g,o,r,x,l),e(m,i,v,x,r,a,l)}else{var y=(r*v+l*g)/n;e(t,m,g,o,r,a,y),e(m,i,v,o,y,a,l)}}(0,l,e.value,t,i,n,o)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/treemap/dice.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){for(var r,a=e.children,s=-1,l=a.length,c=e.value&&(n-t)/e.value;++s<l;)(r=a[s]).y0=i,r.y1=o,r.x0=t,r.x1=t+=r.value*c}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/treemap/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-hierarchy/src/treemap/round.js"),o=i("./node_modules/d3-hierarchy/src/treemap/squarify.js"),r=i("./node_modules/d3-hierarchy/src/accessors.js"),a=i("./node_modules/d3-hierarchy/src/constant.js");function s(){var e=o.default,t=!1,i=1,s=1,l=[0],c=a.constantZero,d=a.constantZero,p=a.constantZero,u=a.constantZero,m=a.constantZero;function h(e){return e.x0=e.y0=0,e.x1=i,e.y1=s,e.eachBefore(f),l=[0],t&&e.eachBefore(n.default),e}function f(t){var i=l[t.depth],n=t.x0+i,o=t.y0+i,r=t.x1-i,a=t.y1-i;r<n&&(n=r=(n+r)/2),a<o&&(o=a=(o+a)/2),t.x0=n,t.y0=o,t.x1=r,t.y1=a,t.children&&(i=l[t.depth+1]=c(t)/2,n+=m(t)-i,o+=d(t)-i,(r-=p(t)-i)<n&&(n=r=(n+r)/2),(a-=u(t)-i)<o&&(o=a=(o+a)/2),e(t,n,o,r,a))}return h.round=function(e){return arguments.length?(t=!!e,h):t},h.size=function(e){return arguments.length?(i=+e[0],s=+e[1],h):[i,s]},h.tile=function(t){return arguments.length?(e=(0,r.required)(t),h):e},h.padding=function(e){return arguments.length?h.paddingInner(e).paddingOuter(e):h.paddingInner()},h.paddingInner=function(e){return arguments.length?(c="function"==typeof e?e:(0,a.default)(+e),h):c},h.paddingOuter=function(e){return arguments.length?h.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):h.paddingTop()},h.paddingTop=function(e){return arguments.length?(d="function"==typeof e?e:(0,a.default)(+e),h):d},h.paddingRight=function(e){return arguments.length?(p="function"==typeof e?e:(0,a.default)(+e),h):p},h.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:(0,a.default)(+e),h):u},h.paddingLeft=function(e){return arguments.length?(m="function"==typeof e?e:(0,a.default)(+e),h):m},h}},"./node_modules/d3-hierarchy/src/treemap/resquarify.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-hierarchy/src/treemap/dice.js"),o=i("./node_modules/d3-hierarchy/src/treemap/slice.js"),r=i("./node_modules/d3-hierarchy/src/treemap/squarify.js");const a=function e(t){function i(e,i,a,s,l){if((c=e._squarify)&&c.ratio===t)for(var c,d,p,u,m,h=-1,f=c.length,g=e.value;++h<f;){for(p=(d=c[h]).children,u=d.value=0,m=p.length;u<m;++u)d.value+=p[u].value;d.dice?(0,n.default)(d,i,a,s,a+=(l-a)*d.value/g):(0,o.default)(d,i,a,i+=(s-i)*d.value/g,l),g-=d.value}else e._squarify=c=(0,r.squarifyRatio)(t,e,i,a,s,l),c.ratio=t}return i.ratio=function(t){return e((t=+t)>1?t:1)},i}(r.phi)},"./node_modules/d3-hierarchy/src/treemap/round.js":(e,t,i)=>{"use strict";function n(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/treemap/slice.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){for(var r,a=e.children,s=-1,l=a.length,c=e.value&&(o-i)/e.value;++s<l;)(r=a[s]).x0=t,r.x1=n,r.y0=i,r.y1=i+=r.value*c}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-hierarchy/src/treemap/sliceDice.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-hierarchy/src/treemap/dice.js"),o=i("./node_modules/d3-hierarchy/src/treemap/slice.js");function r(e,t,i,r,a){(1&e.depth?o.default:n.default)(e,t,i,r,a)}},"./node_modules/d3-hierarchy/src/treemap/squarify.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{phi:()=>r,squarifyRatio:()=>a,default:()=>s});var n=i("./node_modules/d3-hierarchy/src/treemap/dice.js"),o=i("./node_modules/d3-hierarchy/src/treemap/slice.js"),r=(1+Math.sqrt(5))/2;function a(e,t,i,r,a,s){for(var l,c,d,p,u,m,h,f,g,v,x,y=[],b=t.children,C=0,S=0,w=b.length,I=t.value;C<w;){d=a-i,p=s-r;do{u=b[S++].value}while(!u&&S<w);for(m=h=u,x=u*u*(v=Math.max(p/d,d/p)/(I*e)),g=Math.max(h/x,x/m);S<w;++S){if(u+=c=b[S].value,c<m&&(m=c),c>h&&(h=c),x=u*u*v,(f=Math.max(h/x,x/m))>g){u-=c;break}g=f}y.push(l={value:u,dice:d<p,children:b.slice(C,S)}),l.dice?(0,n.default)(l,i,r,a,I?r+=p*u/I:s):(0,o.default)(l,i,r,I?i+=d*u/I:a,s),I-=u,C=S}return y}const s=function e(t){function i(e,i,n,o,r){a(t,e,i,n,o,r)}return i.ratio=function(t){return e((t=+t)>1?t:1)},i}(r)},"./node_modules/d3-interpolate/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,genericArray:()=>a});var n=i("./node_modules/d3-interpolate/src/value.js"),o=i("./node_modules/d3-interpolate/src/numberArray.js");function r(e,t){return((0,o.isNumberArray)(t)?o.default:a)(e,t)}function a(e,t){var i,o=t?t.length:0,r=e?Math.min(o,e.length):0,a=new Array(r),s=new Array(o);for(i=0;i<r;++i)a[i]=(0,n.default)(e[i],t[i]);for(;i<o;++i)s[i]=t[i];return function(e){for(i=0;i<r;++i)s[i]=a[i](e);return s}}},"./node_modules/d3-interpolate/src/basis.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){var r=e*e,a=r*e;return((1-3*e+3*r-a)*t+(4-6*r+3*a)*i+(1+3*e+3*r-3*a)*n+a*o)/6}function o(e){var t=e.length-1;return function(i){var o=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),r=e[o],a=e[o+1],s=o>0?e[o-1]:2*r-a,l=o<t-1?e[o+2]:2*a-r;return n((i-o/t)*t,s,r,a,l)}}i.r(t),i.d(t,{basis:()=>n,default:()=>o})},"./node_modules/d3-interpolate/src/basisClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-interpolate/src/basis.js");function o(e){var t=e.length;return function(i){var o=Math.floor(((i%=1)<0?++i:i)*t),r=e[(o+t-1)%t],a=e[o%t],s=e[(o+1)%t],l=e[(o+2)%t];return(0,n.basis)((i-o/t)*t,r,a,s,l)}}},"./node_modules/d3-interpolate/src/color.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{hue:()=>r,gamma:()=>a,default:()=>s});var n=i("./node_modules/d3-interpolate/src/constant.js");function o(e,t){return function(i){return e+i*t}}function r(e,t){var i=t-e;return i?o(e,i>180||i<-180?i-360*Math.round(i/360):i):(0,n.default)(isNaN(e)?t:e)}function a(e){return 1==(e=+e)?s:function(t,i){return i-t?function(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(n){return Math.pow(e+n*t,i)}}(t,i,e):(0,n.default)(isNaN(t)?i:t)}}function s(e,t){var i=t-e;return i?o(e,i):(0,n.default)(isNaN(e)?t:e)}},"./node_modules/d3-interpolate/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/cubehelix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,cubehelixLong:()=>s});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/color.js");function r(e){return function t(i){function r(t,r){var a=e((t=(0,n.cubehelix)(t)).h,(r=(0,n.cubehelix)(r)).h),s=(0,o.default)(t.s,r.s),l=(0,o.default)(t.l,r.l),c=(0,o.default)(t.opacity,r.opacity);return function(e){return t.h=a(e),t.s=s(e),t.l=l(Math.pow(e,i)),t.opacity=c(e),t+""}}return i=+i,r.gamma=t,r}(1)}const a=r(o.hue);var s=r(o.default)},"./node_modules/d3-interpolate/src/date.js":(e,t,i)=>{"use strict";function n(e,t){var i=new Date;return e=+e,t=+t,function(n){return i.setTime(e*(1-n)+t*n),i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/discrete.js":(e,t,i)=>{"use strict";function n(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/hcl.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hclLong:()=>s});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/color.js");function r(e){return function(t,i){var r=e((t=(0,n.hcl)(t)).h,(i=(0,n.hcl)(i)).h),a=(0,o.default)(t.c,i.c),s=(0,o.default)(t.l,i.l),l=(0,o.default)(t.opacity,i.opacity);return function(e){return t.h=r(e),t.c=a(e),t.l=s(e),t.opacity=l(e),t+""}}}const a=r(o.hue);var s=r(o.default)},"./node_modules/d3-interpolate/src/hsl.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hslLong:()=>s});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/color.js");function r(e){return function(t,i){var r=e((t=(0,n.hsl)(t)).h,(i=(0,n.hsl)(i)).h),a=(0,o.default)(t.s,i.s),s=(0,o.default)(t.l,i.l),l=(0,o.default)(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=a(e),t.l=s(e),t.opacity=l(e),t+""}}}const a=r(o.hue);var s=r(o.default)},"./node_modules/d3-interpolate/src/hue.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-interpolate/src/color.js");function o(e,t){var i=(0,n.hue)(+e,+t);return function(e){var t=i(e);return t-360*Math.floor(t/360)}}},"./node_modules/d3-interpolate/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{interpolate:()=>n.default,interpolateArray:()=>o.default,interpolateBasis:()=>r.default,interpolateBasisClosed:()=>a.default,interpolateDate:()=>s.default,interpolateDiscrete:()=>l.default,interpolateHue:()=>c.default,interpolateNumber:()=>d.default,interpolateNumberArray:()=>p.default,interpolateObject:()=>u.default,interpolateRound:()=>m.default,interpolateString:()=>h.default,interpolateTransformCss:()=>f.interpolateTransformCss,interpolateTransformSvg:()=>f.interpolateTransformSvg,interpolateZoom:()=>g.default,interpolateRgb:()=>v.default,interpolateRgbBasis:()=>v.rgbBasis,interpolateRgbBasisClosed:()=>v.rgbBasisClosed,interpolateHsl:()=>x.default,interpolateHslLong:()=>x.hslLong,interpolateLab:()=>y.default,interpolateHcl:()=>b.default,interpolateHclLong:()=>b.hclLong,interpolateCubehelix:()=>C.default,interpolateCubehelixLong:()=>C.cubehelixLong,piecewise:()=>S.default,quantize:()=>w.default});var n=i("./node_modules/d3-interpolate/src/value.js"),o=i("./node_modules/d3-interpolate/src/array.js"),r=i("./node_modules/d3-interpolate/src/basis.js"),a=i("./node_modules/d3-interpolate/src/basisClosed.js"),s=i("./node_modules/d3-interpolate/src/date.js"),l=i("./node_modules/d3-interpolate/src/discrete.js"),c=i("./node_modules/d3-interpolate/src/hue.js"),d=i("./node_modules/d3-interpolate/src/number.js"),p=i("./node_modules/d3-interpolate/src/numberArray.js"),u=i("./node_modules/d3-interpolate/src/object.js"),m=i("./node_modules/d3-interpolate/src/round.js"),h=i("./node_modules/d3-interpolate/src/string.js"),f=i("./node_modules/d3-interpolate/src/transform/index.js"),g=i("./node_modules/d3-interpolate/src/zoom.js"),v=i("./node_modules/d3-interpolate/src/rgb.js"),x=i("./node_modules/d3-interpolate/src/hsl.js"),y=i("./node_modules/d3-interpolate/src/lab.js"),b=i("./node_modules/d3-interpolate/src/hcl.js"),C=i("./node_modules/d3-interpolate/src/cubehelix.js"),S=i("./node_modules/d3-interpolate/src/piecewise.js"),w=i("./node_modules/d3-interpolate/src/quantize.js")},"./node_modules/d3-interpolate/src/lab.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/color.js");function r(e,t){var i=(0,o.default)((e=(0,n.lab)(e)).l,(t=(0,n.lab)(t)).l),r=(0,o.default)(e.a,t.a),a=(0,o.default)(e.b,t.b),s=(0,o.default)(e.opacity,t.opacity);return function(t){return e.l=i(t),e.a=r(t),e.b=a(t),e.opacity=s(t),e+""}}},"./node_modules/d3-interpolate/src/number.js":(e,t,i)=>{"use strict";function n(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/numberArray.js":(e,t,i)=>{"use strict";function n(e,t){t||(t=[]);var i,n=e?Math.min(t.length,e.length):0,o=t.slice();return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function o(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}i.r(t),i.d(t,{default:()=>n,isNumberArray:()=>o})},"./node_modules/d3-interpolate/src/object.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-interpolate/src/value.js");function o(e,t){var i,o={},r={};for(i in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)i in e?o[i]=(0,n.default)(e[i],t[i]):r[i]=t[i];return function(e){for(i in o)r[i]=o[i](e);return r}}},"./node_modules/d3-interpolate/src/piecewise.js":(e,t,i)=>{"use strict";function n(e,t){for(var i=0,n=t.length-1,o=t[0],r=new Array(n<0?0:n);i<n;)r[i]=e(o,o=t[++i]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return r[t](e-t)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/quantize.js":(e,t,i)=>{"use strict";function n(e,t){for(var i=new Array(t),n=0;n<t;++n)i[n]=e(n/(t-1));return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/rgb.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s,rgbBasis:()=>c,rgbBasisClosed:()=>d});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/basis.js"),r=i("./node_modules/d3-interpolate/src/basisClosed.js"),a=i("./node_modules/d3-interpolate/src/color.js");const s=function e(t){var i=(0,a.gamma)(t);function o(e,t){var o=i((e=(0,n.rgb)(e)).r,(t=(0,n.rgb)(t)).r),r=i(e.g,t.g),s=i(e.b,t.b),l=(0,a.default)(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=s(t),e.opacity=l(t),e+""}}return o.gamma=e,o}(1);function l(e){return function(t){var i,o,r=t.length,a=new Array(r),s=new Array(r),l=new Array(r);for(i=0;i<r;++i)o=(0,n.rgb)(t[i]),a[i]=o.r||0,s[i]=o.g||0,l[i]=o.b||0;return a=e(a),s=e(s),l=e(l),o.opacity=1,function(e){return o.r=a(e),o.g=s(e),o.b=l(e),o+""}}}var c=l(o.default),d=l(r.default)},"./node_modules/d3-interpolate/src/round.js":(e,t,i)=>{"use strict";function n(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-interpolate/src/string.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-interpolate/src/number.js"),o=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,r=new RegExp(o.source,"g");function a(e,t){var i,a,s,l=o.lastIndex=r.lastIndex=0,c=-1,d=[],p=[];for(e+="",t+="";(i=o.exec(e))&&(a=r.exec(t));)(s=a.index)>l&&(s=t.slice(l,s),d[c]?d[c]+=s:d[++c]=s),(i=i[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,p.push({i:c,x:(0,n.default)(i,a)})),l=r.lastIndex;return l<t.length&&(s=t.slice(l),d[c]?d[c]+=s:d[++c]=s),d.length<2?p[0]?function(e){return function(t){return e(t)+""}}(p[0].x):function(e){return function(){return e}}(t):(t=p.length,function(e){for(var i,n=0;n<t;++n)d[(i=p[n]).i]=i.x(e);return d.join("")})}},"./node_modules/d3-interpolate/src/transform/decompose.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{identity:()=>o,default:()=>r});var n=180/Math.PI,o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r(e,t,i,o,r,a){var s,l,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*i+t*o)&&(i-=e*c,o-=t*c),(l=Math.sqrt(i*i+o*o))&&(i/=l,o/=l,c/=l),e*o<t*i&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*n,skewX:Math.atan(c)*n,scaleX:s,scaleY:l}}},"./node_modules/d3-interpolate/src/transform/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{interpolateTransformCss:()=>a,interpolateTransformSvg:()=>s});var n=i("./node_modules/d3-interpolate/src/number.js"),o=i("./node_modules/d3-interpolate/src/transform/parse.js");function r(e,t,i,o){function r(e){return e.length?e.pop()+" ":""}return function(a,s){var l=[],c=[];return a=e(a),s=e(s),function(e,o,r,a,s,l){if(e!==r||o!==a){var c=s.push("translate(",null,t,null,i);l.push({i:c-4,x:(0,n.default)(e,r)},{i:c-2,x:(0,n.default)(o,a)})}else(r||a)&&s.push("translate("+r+t+a+i)}(a.translateX,a.translateY,s.translateX,s.translateY,l,c),function(e,t,i,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:i.push(r(i)+"rotate(",null,o)-2,x:(0,n.default)(e,t)})):t&&i.push(r(i)+"rotate("+t+o)}(a.rotate,s.rotate,l,c),function(e,t,i,a){e!==t?a.push({i:i.push(r(i)+"skewX(",null,o)-2,x:(0,n.default)(e,t)}):t&&i.push(r(i)+"skewX("+t+o)}(a.skewX,s.skewX,l,c),function(e,t,i,o,a,s){if(e!==i||t!==o){var l=a.push(r(a)+"scale(",null,",",null,")");s.push({i:l-4,x:(0,n.default)(e,i)},{i:l-2,x:(0,n.default)(t,o)})}else 1===i&&1===o||a.push(r(a)+"scale("+i+","+o+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,l,c),a=s=null,function(e){for(var t,i=-1,n=c.length;++i<n;)l[(t=c[i]).i]=t.x(e);return l.join("")}}}var a=r(o.parseCss,"px, ","px)","deg)"),s=r(o.parseSvg,", ",")",")")},"./node_modules/d3-interpolate/src/transform/parse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{parseCss:()=>l,parseSvg:()=>c});var n,o,r,a,s=i("./node_modules/d3-interpolate/src/transform/decompose.js");function l(e){return"none"===e?s.identity:(n||(n=document.createElement("DIV"),o=document.documentElement,r=document.defaultView),n.style.transform=e,e=r.getComputedStyle(o.appendChild(n),null).getPropertyValue("transform"),o.removeChild(n),e=e.slice(7,-1).split(","),(0,s.default)(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function c(e){return null==e?s.identity:(a||(a=document.createElementNS("http://www.w3.org/2000/svg","g")),a.setAttribute("transform",e),(e=a.transform.baseVal.consolidate())?(e=e.matrix,(0,s.default)(e.a,e.b,e.c,e.d,e.e,e.f)):s.identity)}},"./node_modules/d3-interpolate/src/value.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/rgb.js"),r=i("./node_modules/d3-interpolate/src/array.js"),a=i("./node_modules/d3-interpolate/src/date.js"),s=i("./node_modules/d3-interpolate/src/number.js"),l=i("./node_modules/d3-interpolate/src/object.js"),c=i("./node_modules/d3-interpolate/src/string.js"),d=i("./node_modules/d3-interpolate/src/constant.js"),p=i("./node_modules/d3-interpolate/src/numberArray.js");function u(e,t){var i,u=typeof t;return null==t||"boolean"===u?(0,d.default)(t):("number"===u?s.default:"string"===u?(i=(0,n.color)(t))?(t=i,o.default):c.default:t instanceof n.color?o.default:t instanceof Date?a.default:(0,p.isNumberArray)(t)?p.default:Array.isArray(t)?r.genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?l.default:s.default)(e,t)}},"./node_modules/d3-interpolate/src/zoom.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=Math.SQRT2,o=2,r=4,a=1e-12;function s(e){return((e=Math.exp(e))+1/e)/2}function l(e,t){var i,l,c=e[0],d=e[1],p=e[2],u=t[0],m=t[1],h=t[2],f=u-c,g=m-d,v=f*f+g*g;if(v<a)l=Math.log(h/p)/n,i=function(e){return[c+e*f,d+e*g,p*Math.exp(n*e*l)]};else{var x=Math.sqrt(v),y=(h*h-p*p+r*v)/(2*p*o*x),b=(h*h-p*p-r*v)/(2*h*o*x),C=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(b*b+1)-b);l=(S-C)/n,i=function(e){var t,i=e*l,r=s(C),a=p/(o*x)*(r*(t=n*i+C,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(C));return[c+a*f,d+a*g,p*r/s(n*i+C)]}}return i.duration=1e3*l,i}},"./node_modules/d3-path/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{path:()=>n.default});var n=i("./node_modules/d3-path/src/path.js")},"./node_modules/d3-path/src/path.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=Math.PI,o=2*n,r=1e-6,a=o-r;function s(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function l(){return new s}s.prototype=l.prototype={constructor:s,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,i,n){this._+="Q"+ +e+","+ +t+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(e,t,i,n,o,r){this._+="C"+ +e+","+ +t+","+ +i+","+ +n+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(e,t,i,o,a){e=+e,t=+t,i=+i,o=+o,a=+a;var s=this._x1,l=this._y1,c=i-e,d=o-t,p=s-e,u=l-t,m=p*p+u*u;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>r)if(Math.abs(u*c-d*p)>r&&a){var h=i-s,f=o-l,g=c*c+d*d,v=h*h+f*f,x=Math.sqrt(g),y=Math.sqrt(m),b=a*Math.tan((n-Math.acos((g+m-v)/(2*x*y)))/2),C=b/y,S=b/x;Math.abs(C-1)>r&&(this._+="L"+(e+C*p)+","+(t+C*u)),this._+="A"+a+","+a+",0,0,"+ +(u*h>p*f)+","+(this._x1=e+S*c)+","+(this._y1=t+S*d)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,i,s,l,c){e=+e,t=+t,c=!!c;var d=(i=+i)*Math.cos(s),p=i*Math.sin(s),u=e+d,m=t+p,h=1^c,f=c?s-l:l-s;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+u+","+m:(Math.abs(this._x1-u)>r||Math.abs(this._y1-m)>r)&&(this._+="L"+u+","+m),i&&(f<0&&(f=f%o+o),f>a?this._+="A"+i+","+i+",0,1,"+h+","+(e-d)+","+(t-p)+"A"+i+","+i+",0,1,"+h+","+(this._x1=u)+","+(this._y1=m):f>r&&(this._+="A"+i+","+i+",0,"+ +(f>=n)+","+h+","+(this._x1=e+i*Math.cos(l))+","+(this._y1=t+i*Math.sin(l))))},rect:function(e,t,i,n){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};const c=l},"./node_modules/d3-polygon/src/area.js":(e,t,i)=>{"use strict";function n(e){for(var t,i=-1,n=e.length,o=e[n-1],r=0;++i<n;)t=o,o=e[i],r+=t[1]*o[0]-t[0]*o[1];return r/2}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-polygon/src/centroid.js":(e,t,i)=>{"use strict";function n(e){for(var t,i,n=-1,o=e.length,r=0,a=0,s=e[o-1],l=0;++n<o;)t=s,s=e[n],l+=i=t[0]*s[1]-s[0]*t[1],r+=(t[0]+s[0])*i,a+=(t[1]+s[1])*i;return[r/(l*=3),a/l]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-polygon/src/contains.js":(e,t,i)=>{"use strict";function n(e,t){for(var i,n,o=e.length,r=e[o-1],a=t[0],s=t[1],l=r[0],c=r[1],d=!1,p=0;p<o;++p)i=(r=e[p])[0],(n=r[1])>s!=c>s&&a<(l-i)*(s-n)/(c-n)+i&&(d=!d),l=i,c=n;return d}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-polygon/src/cross.js":(e,t,i)=>{"use strict";function n(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(t[1]-e[1])*(i[0]-e[0])}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-polygon/src/hull.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-polygon/src/cross.js");function o(e,t){return e[0]-t[0]||e[1]-t[1]}function r(e){for(var t=e.length,i=[0,1],o=2,r=2;r<t;++r){for(;o>1&&(0,n.default)(e[i[o-2]],e[i[o-1]],e[r])<=0;)--o;i[o++]=r}return i.slice(0,o)}function a(e){if((i=e.length)<3)return null;var t,i,n=new Array(i),a=new Array(i);for(t=0;t<i;++t)n[t]=[+e[t][0],+e[t][1],t];for(n.sort(o),t=0;t<i;++t)a[t]=[n[t][0],-n[t][1]];var s=r(n),l=r(a),c=l[0]===s[0],d=l[l.length-1]===s[s.length-1],p=[];for(t=s.length-1;t>=0;--t)p.push(e[n[s[t]][2]]);for(t=+c;t<l.length-d;++t)p.push(e[n[l[t]][2]]);return p}},"./node_modules/d3-polygon/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{polygonArea:()=>n.default,polygonCentroid:()=>o.default,polygonHull:()=>r.default,polygonContains:()=>a.default,polygonLength:()=>s.default});var n=i("./node_modules/d3-polygon/src/area.js"),o=i("./node_modules/d3-polygon/src/centroid.js"),r=i("./node_modules/d3-polygon/src/hull.js"),a=i("./node_modules/d3-polygon/src/contains.js"),s=i("./node_modules/d3-polygon/src/length.js")},"./node_modules/d3-polygon/src/length.js":(e,t,i)=>{"use strict";function n(e){for(var t,i,n=-1,o=e.length,r=e[o-1],a=r[0],s=r[1],l=0;++n<o;)t=a,i=s,t-=a=(r=e[n])[0],i-=s=r[1],l+=Math.sqrt(t*t+i*i);return l}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/add.js":(e,t,i)=>{"use strict";function n(e){var t=+this._x.call(null,e),i=+this._y.call(null,e);return o(this.cover(t,i),t,i,e)}function o(e,t,i,n){if(isNaN(t)||isNaN(i))return e;var o,r,a,s,l,c,d,p,u,m=e._root,h={data:n},f=e._x0,g=e._y0,v=e._x1,x=e._y1;if(!m)return e._root=h,e;for(;m.length;)if((c=t>=(r=(f+v)/2))?f=r:v=r,(d=i>=(a=(g+x)/2))?g=a:x=a,o=m,!(m=m[p=d<<1|c]))return o[p]=h,e;if(s=+e._x.call(null,m.data),l=+e._y.call(null,m.data),t===s&&i===l)return h.next=m,o?o[p]=h:e._root=h,e;do{o=o?o[p]=new Array(4):e._root=new Array(4),(c=t>=(r=(f+v)/2))?f=r:v=r,(d=i>=(a=(g+x)/2))?g=a:x=a}while((p=d<<1|c)==(u=(l>=a)<<1|s>=r));return o[u]=m,o[p]=h,e}function r(e){var t,i,n,r,a=e.length,s=new Array(a),l=new Array(a),c=1/0,d=1/0,p=-1/0,u=-1/0;for(i=0;i<a;++i)isNaN(n=+this._x.call(null,t=e[i]))||isNaN(r=+this._y.call(null,t))||(s[i]=n,l[i]=r,n<c&&(c=n),n>p&&(p=n),r<d&&(d=r),r>u&&(u=r));if(c>p||d>u)return this;for(this.cover(c,d).cover(p,u),i=0;i<a;++i)o(this,s[i],l[i],e[i]);return this}i.r(t),i.d(t,{default:()=>n,addAll:()=>r})},"./node_modules/d3-quadtree/src/cover.js":(e,t,i)=>{"use strict";function n(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,n=this._y0,o=this._x1,r=this._y1;if(isNaN(i))o=(i=Math.floor(e))+1,r=(n=Math.floor(t))+1;else{for(var a,s,l=o-i,c=this._root;i>e||e>=o||n>t||t>=r;)switch(s=(t<n)<<1|e<i,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:o=i+l,r=n+l;break;case 1:i=o-l,r=n+l;break;case 2:o=i+l,n=r-l;break;case 3:i=o-l,n=r-l}this._root&&this._root.length&&(this._root=c)}return this._x0=i,this._y0=n,this._x1=o,this._y1=r,this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/data.js":(e,t,i)=>{"use strict";function n(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/extent.js":(e,t,i)=>{"use strict";function n(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/find.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-quadtree/src/quad.js");function o(e,t,i){var o,r,a,s,l,c,d,p=this._x0,u=this._y0,m=this._x1,h=this._y1,f=[],g=this._root;for(g&&f.push(new n.default(g,p,u,m,h)),null==i?i=1/0:(p=e-i,u=t-i,m=e+i,h=t+i,i*=i);c=f.pop();)if(!(!(g=c.node)||(r=c.x0)>m||(a=c.y0)>h||(s=c.x1)<p||(l=c.y1)<u))if(g.length){var v=(r+s)/2,x=(a+l)/2;f.push(new n.default(g[3],v,x,s,l),new n.default(g[2],r,x,v,l),new n.default(g[1],v,a,s,x),new n.default(g[0],r,a,v,x)),(d=(t>=x)<<1|e>=v)&&(c=f[f.length-1],f[f.length-1]=f[f.length-1-d],f[f.length-1-d]=c)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),C=y*y+b*b;if(C<i){var S=Math.sqrt(i=C);p=e-S,u=t-S,m=e+S,h=t+S,o=g.data}}return o}},"./node_modules/d3-quadtree/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{quadtree:()=>n.default});var n=i("./node_modules/d3-quadtree/src/quadtree.js")},"./node_modules/d3-quadtree/src/quad.js":(e,t,i)=>{"use strict";function n(e,t,i,n,o){this.node=e,this.x0=t,this.y0=i,this.x1=n,this.y1=o}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/quadtree.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n=i("./node_modules/d3-quadtree/src/add.js"),o=i("./node_modules/d3-quadtree/src/cover.js"),r=i("./node_modules/d3-quadtree/src/data.js"),a=i("./node_modules/d3-quadtree/src/extent.js"),s=i("./node_modules/d3-quadtree/src/find.js"),l=i("./node_modules/d3-quadtree/src/remove.js"),c=i("./node_modules/d3-quadtree/src/root.js"),d=i("./node_modules/d3-quadtree/src/size.js"),p=i("./node_modules/d3-quadtree/src/visit.js"),u=i("./node_modules/d3-quadtree/src/visitAfter.js"),m=i("./node_modules/d3-quadtree/src/x.js"),h=i("./node_modules/d3-quadtree/src/y.js");function f(e,t,i){var n=new g(null==t?m.defaultX:t,null==i?h.defaultY:i,NaN,NaN,NaN,NaN);return null==e?n:n.addAll(e)}function g(e,t,i,n,o,r){this._x=e,this._y=t,this._x0=i,this._y0=n,this._x1=o,this._y1=r,this._root=void 0}function v(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t}var x=f.prototype=g.prototype;x.copy=function(){var e,t,i=new g(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=v(n),i;for(e=[{source:n,target:i._root=new Array(4)}];n=e.pop();)for(var o=0;o<4;++o)(t=n.source[o])&&(t.length?e.push({source:t,target:n.target[o]=new Array(4)}):n.target[o]=v(t));return i},x.add=n.default,x.addAll=n.addAll,x.cover=o.default,x.data=r.default,x.extent=a.default,x.find=s.default,x.remove=l.default,x.removeAll=l.removeAll,x.root=c.default,x.size=d.default,x.visit=p.default,x.visitAfter=u.default,x.x=m.default,x.y=h.default},"./node_modules/d3-quadtree/src/remove.js":(e,t,i)=>{"use strict";function n(e){if(isNaN(r=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,i,n,o,r,a,s,l,c,d,p,u,m=this._root,h=this._x0,f=this._y0,g=this._x1,v=this._y1;if(!m)return this;if(m.length)for(;;){if((c=r>=(s=(h+g)/2))?h=s:g=s,(d=a>=(l=(f+v)/2))?f=l:v=l,t=m,!(m=m[p=d<<1|c]))return this;if(!m.length)break;(t[p+1&3]||t[p+2&3]||t[p+3&3])&&(i=t,u=p)}for(;m.data!==e;)if(n=m,!(m=m.next))return this;return(o=m.next)&&delete m.next,n?(o?n.next=o:delete n.next,this):t?(o?t[p]=o:delete t[p],(m=t[0]||t[1]||t[2]||t[3])&&m===(t[3]||t[2]||t[1]||t[0])&&!m.length&&(i?i[u]=m:this._root=m),this):(this._root=o,this)}function o(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this}i.r(t),i.d(t,{default:()=>n,removeAll:()=>o})},"./node_modules/d3-quadtree/src/root.js":(e,t,i)=>{"use strict";function n(){return this._root}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/size.js":(e,t,i)=>{"use strict";function n(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-quadtree/src/visit.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-quadtree/src/quad.js");function o(e){var t,i,o,r,a,s,l=[],c=this._root;for(c&&l.push(new n.default(c,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(c=t.node,o=t.x0,r=t.y0,a=t.x1,s=t.y1)&&c.length){var d=(o+a)/2,p=(r+s)/2;(i=c[3])&&l.push(new n.default(i,d,p,a,s)),(i=c[2])&&l.push(new n.default(i,o,p,d,s)),(i=c[1])&&l.push(new n.default(i,d,r,a,p)),(i=c[0])&&l.push(new n.default(i,o,r,d,p))}return this}},"./node_modules/d3-quadtree/src/visitAfter.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-quadtree/src/quad.js");function o(e){var t,i=[],o=[];for(this._root&&i.push(new n.default(this._root,this._x0,this._y0,this._x1,this._y1));t=i.pop();){var r=t.node;if(r.length){var a,s=t.x0,l=t.y0,c=t.x1,d=t.y1,p=(s+c)/2,u=(l+d)/2;(a=r[0])&&i.push(new n.default(a,s,l,p,u)),(a=r[1])&&i.push(new n.default(a,p,l,c,u)),(a=r[2])&&i.push(new n.default(a,s,u,p,d)),(a=r[3])&&i.push(new n.default(a,p,u,c,d))}o.push(t)}for(;t=o.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}},"./node_modules/d3-quadtree/src/x.js":(e,t,i)=>{"use strict";function n(e){return e[0]}function o(e){return arguments.length?(this._x=e,this):this._x}i.r(t),i.d(t,{defaultX:()=>n,default:()=>o})},"./node_modules/d3-quadtree/src/y.js":(e,t,i)=>{"use strict";function n(e){return e[1]}function o(e){return arguments.length?(this._y=e,this):this._y}i.r(t),i.d(t,{defaultY:()=>n,default:()=>o})},"./node_modules/d3-random/src/bates.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-random/src/defaultSource.js"),o=i("./node_modules/d3-random/src/irwinHall.js");const r=function e(t){function i(e){var i=o.default.source(t)(e);return function(){return i()/e}}return i.source=e,i}(n.default)},"./node_modules/d3-random/src/defaultSource.js":(e,t,i)=>{"use strict";function n(){return Math.random()}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-random/src/exponential.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=function e(t){function i(e){return function(){return-Math.log(1-t())/e}}return i.source=e,i}(i("./node_modules/d3-random/src/defaultSource.js").default)},"./node_modules/d3-random/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{randomUniform:()=>n.default,randomNormal:()=>o.default,randomLogNormal:()=>r.default,randomBates:()=>a.default,randomIrwinHall:()=>s.default,randomExponential:()=>l.default});var n=i("./node_modules/d3-random/src/uniform.js"),o=i("./node_modules/d3-random/src/normal.js"),r=i("./node_modules/d3-random/src/logNormal.js"),a=i("./node_modules/d3-random/src/bates.js"),s=i("./node_modules/d3-random/src/irwinHall.js"),l=i("./node_modules/d3-random/src/exponential.js")},"./node_modules/d3-random/src/irwinHall.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=function e(t){function i(e){return function(){for(var i=0,n=0;n<e;++n)i+=t();return i}}return i.source=e,i}(i("./node_modules/d3-random/src/defaultSource.js").default)},"./node_modules/d3-random/src/logNormal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-random/src/defaultSource.js"),o=i("./node_modules/d3-random/src/normal.js");const r=function e(t){function i(){var e=o.default.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return i.source=e,i}(n.default)},"./node_modules/d3-random/src/normal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=function e(t){function i(e,i){var n,o;return e=null==e?0:+e,i=null==i?1:+i,function(){var r;if(null!=n)r=n,n=null;else do{n=2*t()-1,r=2*t()-1,o=n*n+r*r}while(!o||o>1);return e+i*r*Math.sqrt(-2*Math.log(o)/o)}}return i.source=e,i}(i("./node_modules/d3-random/src/defaultSource.js").default)},"./node_modules/d3-random/src/uniform.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=function e(t){function i(e,i){return e=null==e?0:+e,i=null==i?1:+i,1===arguments.length?(i=e,e=0):i-=e,function(){return t()*i+e}}return i.source=e,i}(i("./node_modules/d3-random/src/defaultSource.js").default)},"./node_modules/d3-scale-chromatic/src/categorical/Accent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")},"./node_modules/d3-scale-chromatic/src/categorical/Dark2.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666")},"./node_modules/d3-scale-chromatic/src/categorical/Paired.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928")},"./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2")},"./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc")},"./node_modules/d3-scale-chromatic/src/categorical/Set1.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999")},"./node_modules/d3-scale-chromatic/src/categorical/Set2.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3")},"./node_modules/d3-scale-chromatic/src/categorical/Set3.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f")},"./node_modules/d3-scale-chromatic/src/categorical/Tableau10.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")},"./node_modules/d3-scale-chromatic/src/categorical/category10.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n=(0,i("./node_modules/d3-scale-chromatic/src/colors.js").default)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},"./node_modules/d3-scale-chromatic/src/colors.js":(e,t,i)=>{"use strict";function n(e){for(var t=e.length/6|0,i=new Array(t),n=0;n<t;)i[n]="#"+e.slice(6*n,6*++n);return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale-chromatic/src/diverging/BrBG.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/PRGn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/PiYG.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/PuOr.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/RdBu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/RdGy.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/diverging/Spectral.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{schemeCategory10:()=>n.default,schemeAccent:()=>o.default,schemeDark2:()=>r.default,schemePaired:()=>a.default,schemePastel1:()=>s.default,schemePastel2:()=>l.default,schemeSet1:()=>c.default,schemeSet2:()=>d.default,schemeSet3:()=>p.default,schemeTableau10:()=>u.default,interpolateBrBG:()=>m.default,schemeBrBG:()=>m.scheme,interpolatePRGn:()=>h.default,schemePRGn:()=>h.scheme,interpolatePiYG:()=>f.default,schemePiYG:()=>f.scheme,interpolatePuOr:()=>g.default,schemePuOr:()=>g.scheme,interpolateRdBu:()=>v.default,schemeRdBu:()=>v.scheme,interpolateRdGy:()=>x.default,schemeRdGy:()=>x.scheme,interpolateRdYlBu:()=>y.default,schemeRdYlBu:()=>y.scheme,interpolateRdYlGn:()=>b.default,schemeRdYlGn:()=>b.scheme,interpolateSpectral:()=>C.default,schemeSpectral:()=>C.scheme,interpolateBuGn:()=>S.default,schemeBuGn:()=>S.scheme,interpolateBuPu:()=>w.default,schemeBuPu:()=>w.scheme,interpolateGnBu:()=>I.default,schemeGnBu:()=>I.scheme,interpolateOrRd:()=>_.default,schemeOrRd:()=>_.scheme,interpolatePuBuGn:()=>D.default,schemePuBuGn:()=>D.scheme,interpolatePuBu:()=>R.default,schemePuBu:()=>R.scheme,interpolatePuRd:()=>A.default,schemePuRd:()=>A.scheme,interpolateRdPu:()=>T.default,schemeRdPu:()=>T.scheme,interpolateYlGnBu:()=>F.default,schemeYlGnBu:()=>F.scheme,interpolateYlGn:()=>E.default,schemeYlGn:()=>E.scheme,interpolateYlOrBr:()=>M.default,schemeYlOrBr:()=>M.scheme,interpolateYlOrRd:()=>O.default,schemeYlOrRd:()=>O.scheme,interpolateBlues:()=>k.default,schemeBlues:()=>k.scheme,interpolateGreens:()=>j.default,schemeGreens:()=>j.scheme,interpolateGreys:()=>P.default,schemeGreys:()=>P.scheme,interpolatePurples:()=>N.default,schemePurples:()=>N.scheme,interpolateReds:()=>V.default,schemeReds:()=>V.scheme,interpolateOranges:()=>L.default,schemeOranges:()=>L.scheme,interpolateCividis:()=>B.default,interpolateCubehelixDefault:()=>$.default,interpolateRainbow:()=>G.default,interpolateWarm:()=>G.warm,interpolateCool:()=>G.cool,interpolateSinebow:()=>z.default,interpolateTurbo:()=>U.default,interpolateViridis:()=>q.default,interpolateMagma:()=>q.magma,interpolateInferno:()=>q.inferno,interpolatePlasma:()=>q.plasma});var n=i("./node_modules/d3-scale-chromatic/src/categorical/category10.js"),o=i("./node_modules/d3-scale-chromatic/src/categorical/Accent.js"),r=i("./node_modules/d3-scale-chromatic/src/categorical/Dark2.js"),a=i("./node_modules/d3-scale-chromatic/src/categorical/Paired.js"),s=i("./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js"),l=i("./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js"),c=i("./node_modules/d3-scale-chromatic/src/categorical/Set1.js"),d=i("./node_modules/d3-scale-chromatic/src/categorical/Set2.js"),p=i("./node_modules/d3-scale-chromatic/src/categorical/Set3.js"),u=i("./node_modules/d3-scale-chromatic/src/categorical/Tableau10.js"),m=i("./node_modules/d3-scale-chromatic/src/diverging/BrBG.js"),h=i("./node_modules/d3-scale-chromatic/src/diverging/PRGn.js"),f=i("./node_modules/d3-scale-chromatic/src/diverging/PiYG.js"),g=i("./node_modules/d3-scale-chromatic/src/diverging/PuOr.js"),v=i("./node_modules/d3-scale-chromatic/src/diverging/RdBu.js"),x=i("./node_modules/d3-scale-chromatic/src/diverging/RdGy.js"),y=i("./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js"),b=i("./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js"),C=i("./node_modules/d3-scale-chromatic/src/diverging/Spectral.js"),S=i("./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js"),w=i("./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js"),I=i("./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js"),_=i("./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js"),D=i("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js"),R=i("./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js"),A=i("./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js"),T=i("./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js"),F=i("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js"),E=i("./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js"),M=i("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js"),O=i("./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js"),k=i("./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js"),j=i("./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js"),P=i("./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js"),N=i("./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js"),V=i("./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js"),L=i("./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js"),B=i("./node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js"),$=i("./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js"),G=i("./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js"),z=i("./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js"),U=i("./node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js"),q=i("./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js")},"./node_modules/d3-scale-chromatic/src/ramp.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-interpolate/src/index.js");function o(e){return(0,n.interpolateRgbBasis)(e[e.length-1])}},"./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-multi/cividis.js":(e,t,i)=>{"use strict";function n(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-color/src/index.js");const o=(0,i("./node_modules/d3-interpolate/src/index.js").interpolateCubehelixLong)((0,n.cubehelix)(300,.5,0),(0,n.cubehelix)(-240,.5,1))},"./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{warm:()=>r,cool:()=>a,default:()=>l});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/index.js"),r=(0,o.interpolateCubehelixLong)((0,n.cubehelix)(-100,.75,.35),(0,n.cubehelix)(80,1.5,.8)),a=(0,o.interpolateCubehelixLong)((0,n.cubehelix)(260,.75,.35),(0,n.cubehelix)(80,1.5,.8)),s=(0,n.cubehelix)();function l(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return s.h=360*e-100,s.s=1.5-1.5*t,s.l=.8-.9*t,s+""}},"./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=(0,i("./node_modules/d3-color/src/index.js").rgb)(),o=Math.PI/3,r=2*Math.PI/3;function a(e){var t;return e=(.5-e)*Math.PI,n.r=255*(t=Math.sin(e))*t,n.g=255*(t=Math.sin(e+o))*t,n.b=255*(t=Math.sin(e+r))*t,n+""}},"./node_modules/d3-scale-chromatic/src/sequential-multi/turbo.js":(e,t,i)=>{"use strict";function n(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,magma:()=>a,inferno:()=>s,plasma:()=>l});var n=i("./node_modules/d3-scale-chromatic/src/colors.js");function o(e){var t=e.length;return function(i){return e[Math.max(0,Math.min(t-1,Math.floor(i*t)))]}}const r=o((0,n.default)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var a=o((0,n.default)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),s=o((0,n.default)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),l=o((0,n.default)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},"./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scheme:()=>r,default:()=>a});var n=i("./node_modules/d3-scale-chromatic/src/colors.js"),o=i("./node_modules/d3-scale-chromatic/src/ramp.js"),r=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(n.default);const a=(0,o.default)(r)},"./node_modules/d3-scale/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{map:()=>o,slice:()=>r});var n=Array.prototype,o=n.map,r=n.slice},"./node_modules/d3-scale/src/band.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,point:()=>l});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/init.js"),r=i("./node_modules/d3-scale/src/ordinal.js");function a(){var e,t,i=(0,r.default)().unknown(void 0),s=i.domain,l=i.range,c=[0,1],d=!1,p=0,u=0,m=.5;function h(){var i=s().length,o=c[1]<c[0],r=c[o-0],a=c[1-o];e=(a-r)/Math.max(1,i-p+2*u),d&&(e=Math.floor(e)),r+=(a-r-e*(i-p))*m,t=e*(1-p),d&&(r=Math.round(r),t=Math.round(t));var h=(0,n.range)(i).map(function(t){return r+e*t});return l(o?h.reverse():h)}return delete i.unknown,i.domain=function(e){return arguments.length?(s(e),h()):s()},i.range=function(e){return arguments.length?(c=[+e[0],+e[1]],h()):c.slice()},i.rangeRound=function(e){return c=[+e[0],+e[1]],d=!0,h()},i.bandwidth=function(){return t},i.step=function(){return e},i.round=function(e){return arguments.length?(d=!!e,h()):d},i.padding=function(e){return arguments.length?(p=Math.min(1,u=+e),h()):p},i.paddingInner=function(e){return arguments.length?(p=Math.min(1,e),h()):p},i.paddingOuter=function(e){return arguments.length?(u=+e,h()):u},i.align=function(e){return arguments.length?(m=Math.max(0,Math.min(1,e)),h()):m},i.copy=function(){return a(s(),c).round(d).paddingInner(p).paddingOuter(u).align(m)},o.initRange.apply(h(),arguments)}function s(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return s(t())},e}function l(){return s(a.apply(null,arguments).paddingInner(1))}},"./node_modules/d3-scale/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale/src/continuous.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{identity:()=>c,copy:()=>h,transformer:()=>f,default:()=>g});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-interpolate/src/index.js"),r=i("./node_modules/d3-scale/src/array.js"),a=i("./node_modules/d3-scale/src/constant.js"),s=i("./node_modules/d3-scale/src/number.js"),l=[0,1];function c(e){return e}function d(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:(0,a.default)(isNaN(t)?NaN:.5)}function p(e){var t,i=e[0],n=e[e.length-1];return i>n&&(t=i,i=n,n=t),function(e){return Math.max(i,Math.min(n,e))}}function u(e,t,i){var n=e[0],o=e[1],r=t[0],a=t[1];return o<n?(n=d(o,n),r=i(a,r)):(n=d(n,o),r=i(r,a)),function(e){return r(n(e))}}function m(e,t,i){var o=Math.min(e.length,t.length)-1,r=new Array(o),a=new Array(o),s=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<o;)r[s]=d(e[s],e[s+1]),a[s]=i(t[s],t[s+1]);return function(t){var i=(0,n.bisect)(e,t,1,o)-1;return a[i](r[i](t))}}function h(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function f(){var e,t,i,n,a,d,h=l,f=l,g=o.interpolate,v=c;function x(){return n=Math.min(h.length,f.length)>2?m:u,a=d=null,y}function y(t){return isNaN(t=+t)?i:(a||(a=n(h.map(e),f,g)))(e(v(t)))}return y.invert=function(i){return v(t((d||(d=n(f,h.map(e),o.interpolateNumber)))(i)))},y.domain=function(e){return arguments.length?(h=r.map.call(e,s.default),v===c||(v=p(h)),x()):h.slice()},y.range=function(e){return arguments.length?(f=r.slice.call(e),x()):f.slice()},y.rangeRound=function(e){return f=r.slice.call(e),g=o.interpolateRound,x()},y.clamp=function(e){return arguments.length?(v=e?p(h):c,y):v!==c},y.interpolate=function(e){return arguments.length?(g=e,x()):g},y.unknown=function(e){return arguments.length?(i=e,y):i},function(i,n){return e=i,t=n,x()}}function g(e,t){return f()(e,t)}},"./node_modules/d3-scale/src/diverging.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>p,divergingLog:()=>u,divergingSymlog:()=>m,divergingPow:()=>h,divergingSqrt:()=>f});var n=i("./node_modules/d3-scale/src/continuous.js"),o=i("./node_modules/d3-scale/src/init.js"),r=i("./node_modules/d3-scale/src/linear.js"),a=i("./node_modules/d3-scale/src/log.js"),s=i("./node_modules/d3-scale/src/sequential.js"),l=i("./node_modules/d3-scale/src/symlog.js"),c=i("./node_modules/d3-scale/src/pow.js");function d(){var e,t,i,o,r,a,s,l=0,c=.5,d=1,p=n.identity,u=!1;function m(e){return isNaN(e=+e)?s:(e=.5+((e=+a(e))-t)*(e<t?o:r),p(u?Math.max(0,Math.min(1,e)):e))}return m.domain=function(n){return arguments.length?(e=a(l=+n[0]),t=a(c=+n[1]),i=a(d=+n[2]),o=e===t?0:.5/(t-e),r=t===i?0:.5/(i-t),m):[l,c,d]},m.clamp=function(e){return arguments.length?(u=!!e,m):u},m.interpolator=function(e){return arguments.length?(p=e,m):p},m.unknown=function(e){return arguments.length?(s=e,m):s},function(n){return a=n,e=n(l),t=n(c),i=n(d),o=e===t?0:.5/(t-e),r=t===i?0:.5/(i-t),m}}function p(){var e=(0,r.linearish)(d()(n.identity));return e.copy=function(){return(0,s.copy)(e,p())},o.initInterpolator.apply(e,arguments)}function u(){var e=(0,a.loggish)(d()).domain([.1,1,10]);return e.copy=function(){return(0,s.copy)(e,u()).base(e.base())},o.initInterpolator.apply(e,arguments)}function m(){var e=(0,l.symlogish)(d());return e.copy=function(){return(0,s.copy)(e,m()).constant(e.constant())},o.initInterpolator.apply(e,arguments)}function h(){var e=(0,c.powish)(d());return e.copy=function(){return(0,s.copy)(e,h()).exponent(e.exponent())},o.initInterpolator.apply(e,arguments)}function f(){return h.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/identity.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-scale/src/array.js"),o=i("./node_modules/d3-scale/src/linear.js"),r=i("./node_modules/d3-scale/src/number.js");function a(e){var t;function i(e){return isNaN(e=+e)?t:e}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=n.map.call(t,r.default),i):e.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return a(e).unknown(t)},e=arguments.length?n.map.call(e,r.default):[0,1],(0,o.linearish)(i)}},"./node_modules/d3-scale/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scaleBand:()=>n.default,scalePoint:()=>n.point,scaleIdentity:()=>o.default,scaleLinear:()=>r.default,scaleLog:()=>a.default,scaleSymlog:()=>s.default,scaleOrdinal:()=>l.default,scaleImplicit:()=>l.implicit,scalePow:()=>c.default,scaleSqrt:()=>c.sqrt,scaleQuantile:()=>d.default,scaleQuantize:()=>p.default,scaleThreshold:()=>u.default,scaleTime:()=>m.default,scaleUtc:()=>h.default,scaleSequential:()=>f.default,scaleSequentialLog:()=>f.sequentialLog,scaleSequentialPow:()=>f.sequentialPow,scaleSequentialSqrt:()=>f.sequentialSqrt,scaleSequentialSymlog:()=>f.sequentialSymlog,scaleSequentialQuantile:()=>g.default,scaleDiverging:()=>v.default,scaleDivergingLog:()=>v.divergingLog,scaleDivergingPow:()=>v.divergingPow,scaleDivergingSqrt:()=>v.divergingSqrt,scaleDivergingSymlog:()=>v.divergingSymlog,tickFormat:()=>x.default});var n=i("./node_modules/d3-scale/src/band.js"),o=i("./node_modules/d3-scale/src/identity.js"),r=i("./node_modules/d3-scale/src/linear.js"),a=i("./node_modules/d3-scale/src/log.js"),s=i("./node_modules/d3-scale/src/symlog.js"),l=i("./node_modules/d3-scale/src/ordinal.js"),c=i("./node_modules/d3-scale/src/pow.js"),d=i("./node_modules/d3-scale/src/quantile.js"),p=i("./node_modules/d3-scale/src/quantize.js"),u=i("./node_modules/d3-scale/src/threshold.js"),m=i("./node_modules/d3-scale/src/time.js"),h=i("./node_modules/d3-scale/src/utcTime.js"),f=i("./node_modules/d3-scale/src/sequential.js"),g=i("./node_modules/d3-scale/src/sequentialQuantile.js"),v=i("./node_modules/d3-scale/src/diverging.js"),x=i("./node_modules/d3-scale/src/tickFormat.js")},"./node_modules/d3-scale/src/init.js":(e,t,i)=>{"use strict";function n(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function o(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}i.r(t),i.d(t,{initRange:()=>n,initInterpolator:()=>o})},"./node_modules/d3-scale/src/linear.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{linearish:()=>s,default:()=>l});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/d3-scale/src/init.js"),a=i("./node_modules/d3-scale/src/tickFormat.js");function s(e){var t=e.domain;return e.ticks=function(e){var i=t();return(0,n.ticks)(i[0],i[i.length-1],null==e?10:e)},e.tickFormat=function(e,i){var n=t();return(0,a.default)(n[0],n[n.length-1],null==e?10:e,i)},e.nice=function(i){null==i&&(i=10);var o,r=t(),a=0,s=r.length-1,l=r[a],c=r[s];return c<l&&(o=l,l=c,c=o,o=a,a=s,s=o),(o=(0,n.tickIncrement)(l,c,i))>0?(l=Math.floor(l/o)*o,c=Math.ceil(c/o)*o,o=(0,n.tickIncrement)(l,c,i)):o<0&&(l=Math.ceil(l*o)/o,c=Math.floor(c*o)/o,o=(0,n.tickIncrement)(l,c,i)),o>0?(r[a]=Math.floor(l/o)*o,r[s]=Math.ceil(c/o)*o,t(r)):o<0&&(r[a]=Math.ceil(l*o)/o,r[s]=Math.floor(c*o)/o,t(r)),e},e}function l(){var e=(0,o.default)(o.identity,o.identity);return e.copy=function(){return(0,o.copy)(e,l())},r.initRange.apply(e,arguments),s(e)}},"./node_modules/d3-scale/src/log.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{loggish:()=>h,default:()=>f});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-format/src/index.js"),r=i("./node_modules/d3-scale/src/nice.js"),a=i("./node_modules/d3-scale/src/continuous.js"),s=i("./node_modules/d3-scale/src/init.js");function l(e){return Math.log(e)}function c(e){return Math.exp(e)}function d(e){return-Math.log(-e)}function p(e){return-Math.exp(-e)}function u(e){return isFinite(e)?+("1e"+e):e<0?0:e}function m(e){return function(t){return-e(-t)}}function h(e){var t,i,a=e(l,c),s=a.domain,h=10;function f(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(h),i=function(e){return 10===e?u:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(h),s()[0]<0?(t=m(t),i=m(i),e(d,p)):e(l,c),a}return a.base=function(e){return arguments.length?(h=+e,f()):h},a.domain=function(e){return arguments.length?(s(e),f()):s()},a.ticks=function(e){var o,r=s(),a=r[0],l=r[r.length-1];(o=l<a)&&(u=a,a=l,l=u);var c,d,p,u=t(a),m=t(l),f=null==e?10:+e,g=[];if(!(h%1)&&m-u<f){if(u=Math.round(u)-1,m=Math.round(m)+1,a>0){for(;u<m;++u)for(d=1,c=i(u);d<h;++d)if(!((p=c*d)<a)){if(p>l)break;g.push(p)}}else for(;u<m;++u)for(d=h-1,c=i(u);d>=1;--d)if(!((p=c*d)<a)){if(p>l)break;g.push(p)}}else g=(0,n.ticks)(u,m,Math.min(m-u,f)).map(i);return o?g.reverse():g},a.tickFormat=function(e,n){if(null==n&&(n=10===h?".0e":","),"function"!=typeof n&&(n=(0,o.format)(n)),e===1/0)return n;null==e&&(e=10);var r=Math.max(1,h*e/a.ticks().length);return function(e){var o=e/i(Math.round(t(e)));return o*h<h-.5&&(o*=h),o<=r?n(e):""}},a.nice=function(){return s((0,r.default)(s(),{floor:function(e){return i(Math.floor(t(e)))},ceil:function(e){return i(Math.ceil(t(e)))}}))},a}function f(){var e=h((0,a.transformer)()).domain([1,10]);return e.copy=function(){return(0,a.copy)(e,f()).base(e.base())},s.initRange.apply(e,arguments),e}},"./node_modules/d3-scale/src/nice.js":(e,t,i)=>{"use strict";function n(e,t){var i,n=0,o=(e=e.slice()).length-1,r=e[n],a=e[o];return a<r&&(i=n,n=o,o=i,i=r,r=a,a=i),e[n]=t.floor(r),e[o]=t.ceil(a),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale/src/number.js":(e,t,i)=>{"use strict";function n(e){return+e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-scale/src/ordinal.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{implicit:()=>a,default:()=>s});var n=i("./node_modules/d3-collection/src/index.js"),o=i("./node_modules/d3-scale/src/array.js"),r=i("./node_modules/d3-scale/src/init.js"),a={name:"implicit"};function s(){var e=(0,n.map)(),t=[],i=[],l=a;function c(n){var o=n+"",r=e.get(o);if(!r){if(l!==a)return l;e.set(o,r=t.push(n))}return i[(r-1)%i.length]}return c.domain=function(i){if(!arguments.length)return t.slice();t=[],e=(0,n.map)();for(var o,r,a=-1,s=i.length;++a<s;)e.has(r=(o=i[a])+"")||e.set(r,t.push(o));return c},c.range=function(e){return arguments.length?(i=o.slice.call(e),c):i.slice()},c.unknown=function(e){return arguments.length?(l=e,c):l},c.copy=function(){return s(t,i).unknown(l)},r.initRange.apply(c,arguments),c}},"./node_modules/d3-scale/src/pow.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{powish:()=>c,default:()=>d,sqrt:()=>p});var n=i("./node_modules/d3-scale/src/linear.js"),o=i("./node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/d3-scale/src/init.js");function a(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function s(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function l(e){return e<0?-e*e:e*e}function c(e){var t=e(o.identity,o.identity),i=1;return t.exponent=function(t){return arguments.length?1===(i=+t)?e(o.identity,o.identity):.5===i?e(s,l):e(a(i),a(1/i)):i},(0,n.linearish)(t)}function d(){var e=c((0,o.transformer)());return e.copy=function(){return(0,o.copy)(e,d()).exponent(e.exponent())},r.initRange.apply(e,arguments),e}function p(){return d.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/quantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/array.js"),r=i("./node_modules/d3-scale/src/init.js");function a(){var e,t=[],i=[],s=[];function l(){var e=0,o=Math.max(1,i.length);for(s=new Array(o-1);++e<o;)s[e-1]=(0,n.quantile)(t,e/o);return c}function c(t){return isNaN(t=+t)?e:i[(0,n.bisect)(s,t)]}return c.invertExtent=function(e){var n=i.indexOf(e);return n<0?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},c.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var i,o=0,r=e.length;o<r;++o)null==(i=e[o])||isNaN(i=+i)||t.push(i);return t.sort(n.ascending),l()},c.range=function(e){return arguments.length?(i=o.slice.call(e),l()):i.slice()},c.unknown=function(t){return arguments.length?(e=t,c):e},c.quantiles=function(){return s.slice()},c.copy=function(){return a().domain(t).range(i).unknown(e)},r.initRange.apply(c,arguments)}},"./node_modules/d3-scale/src/quantize.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/array.js"),r=i("./node_modules/d3-scale/src/linear.js"),a=i("./node_modules/d3-scale/src/init.js");function s(){var e,t=0,i=1,l=1,c=[.5],d=[0,1];function p(t){return t<=t?d[(0,n.bisect)(c,t,0,l)]:e}function u(){var e=-1;for(c=new Array(l);++e<l;)c[e]=((e+1)*i-(e-l)*t)/(l+1);return p}return p.domain=function(e){return arguments.length?(t=+e[0],i=+e[1],u()):[t,i]},p.range=function(e){return arguments.length?(l=(d=o.slice.call(e)).length-1,u()):d.slice()},p.invertExtent=function(e){var n=d.indexOf(e);return n<0?[NaN,NaN]:n<1?[t,c[0]]:n>=l?[c[l-1],i]:[c[n-1],c[n]]},p.unknown=function(t){return arguments.length?(e=t,p):p},p.thresholds=function(){return c.slice()},p.copy=function(){return s().domain([t,i]).range(d).unknown(e)},a.initRange.apply((0,r.linearish)(p),arguments)}},"./node_modules/d3-scale/src/sequential.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{copy:()=>d,default:()=>p,sequentialLog:()=>u,sequentialSymlog:()=>m,sequentialPow:()=>h,sequentialSqrt:()=>f});var n=i("./node_modules/d3-scale/src/continuous.js"),o=i("./node_modules/d3-scale/src/init.js"),r=i("./node_modules/d3-scale/src/linear.js"),a=i("./node_modules/d3-scale/src/log.js"),s=i("./node_modules/d3-scale/src/symlog.js"),l=i("./node_modules/d3-scale/src/pow.js");function c(){var e,t,i,o,r,a=0,s=1,l=n.identity,c=!1;function d(t){return isNaN(t=+t)?r:l(0===i?.5:(t=(o(t)-e)*i,c?Math.max(0,Math.min(1,t)):t))}return d.domain=function(n){return arguments.length?(e=o(a=+n[0]),t=o(s=+n[1]),i=e===t?0:1/(t-e),d):[a,s]},d.clamp=function(e){return arguments.length?(c=!!e,d):c},d.interpolator=function(e){return arguments.length?(l=e,d):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(n){return o=n,e=n(a),t=n(s),i=e===t?0:1/(t-e),d}}function d(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function p(){var e=(0,r.linearish)(c()(n.identity));return e.copy=function(){return d(e,p())},o.initInterpolator.apply(e,arguments)}function u(){var e=(0,a.loggish)(c()).domain([1,10]);return e.copy=function(){return d(e,u()).base(e.base())},o.initInterpolator.apply(e,arguments)}function m(){var e=(0,s.symlogish)(c());return e.copy=function(){return d(e,m()).constant(e.constant())},o.initInterpolator.apply(e,arguments)}function h(){var e=(0,l.powish)(c());return e.copy=function(){return d(e,h()).exponent(e.exponent())},o.initInterpolator.apply(e,arguments)}function f(){return h.apply(null,arguments).exponent(.5)}},"./node_modules/d3-scale/src/sequentialQuantile.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/d3-scale/src/init.js");function a(){var e=[],t=o.identity;function i(i){if(!isNaN(i=+i))return t(((0,n.bisect)(e,i)-1)/(e.length-1))}return i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var o,r=0,a=t.length;r<a;++r)null==(o=t[r])||isNaN(o=+o)||e.push(o);return e.sort(n.ascending),i},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return a(t).domain(e)},r.initInterpolator.apply(i,arguments)}},"./node_modules/d3-scale/src/symlog.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{symlogish:()=>l,default:()=>c});var n=i("./node_modules/d3-scale/src/linear.js"),o=i("./node_modules/d3-scale/src/continuous.js"),r=i("./node_modules/d3-scale/src/init.js");function a(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function s(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function l(e){var t=1,i=e(a(t),s(t));return i.constant=function(i){return arguments.length?e(a(t=+i),s(t)):t},(0,n.linearish)(i)}function c(){var e=l((0,o.transformer)());return e.copy=function(){return(0,o.copy)(e,c()).constant(e.constant())},r.initRange.apply(e,arguments)}},"./node_modules/d3-scale/src/threshold.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-scale/src/array.js"),r=i("./node_modules/d3-scale/src/init.js");function a(){var e,t=[.5],i=[0,1],s=1;function l(o){return o<=o?i[(0,n.bisect)(t,o,0,s)]:e}return l.domain=function(e){return arguments.length?(t=o.slice.call(e),s=Math.min(t.length,i.length-1),l):t.slice()},l.range=function(e){return arguments.length?(i=o.slice.call(e),s=Math.min(t.length,i.length-1),l):i.slice()},l.invertExtent=function(e){var n=i.indexOf(e);return[t[n-1],t[n]]},l.unknown=function(t){return arguments.length?(e=t,l):e},l.copy=function(){return a().domain(t).range(i).unknown(e)},r.initRange.apply(l,arguments)}},"./node_modules/d3-scale/src/tickFormat.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-format/src/index.js");function r(e,t,i,r){var a,s=(0,n.tickStep)(e,t,i);switch((r=(0,o.formatSpecifier)(null==r?",f":r)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(a=(0,o.precisionPrefix)(s,l))||(r.precision=a),(0,o.formatPrefix)(r,l);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(a=(0,o.precisionRound)(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=a-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(a=(0,o.precisionFixed)(s))||(r.precision=a-2*("%"===r.type))}return(0,o.format)(r)}},"./node_modules/d3-scale/src/time.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{calendar:()=>y,default:()=>b});var n=i("./node_modules/d3-array/src/index.js"),o=i("./node_modules/d3-time/src/index.js"),r=i("./node_modules/d3-time-format/src/index.js"),a=i("./node_modules/d3-scale/src/array.js"),s=i("./node_modules/d3-scale/src/continuous.js"),l=i("./node_modules/d3-scale/src/init.js"),c=i("./node_modules/d3-scale/src/nice.js"),d=1e3,p=60*d,u=60*p,m=24*u,h=7*m,f=30*m,g=365*m;function v(e){return new Date(e)}function x(e){return e instanceof Date?+e:+new Date(+e)}function y(e,t,i,o,r,l,b,C,S){var w=(0,s.default)(s.identity,s.identity),I=w.invert,_=w.domain,D=S(".%L"),R=S(":%S"),A=S("%I:%M"),T=S("%I %p"),F=S("%a %d"),E=S("%b %d"),M=S("%B"),O=S("%Y"),k=[[b,1,d],[b,5,5*d],[b,15,15*d],[b,30,30*d],[l,1,p],[l,5,5*p],[l,15,15*p],[l,30,30*p],[r,1,u],[r,3,3*u],[r,6,6*u],[r,12,12*u],[o,1,m],[o,2,2*m],[i,1,h],[t,1,f],[t,3,3*f],[e,1,g]];function j(n){return(b(n)<n?D:l(n)<n?R:r(n)<n?A:o(n)<n?T:t(n)<n?i(n)<n?F:E:e(n)<n?M:O)(n)}function P(t,i,o,r){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(o-i)/t,s=(0,n.bisector)(function(e){return e[2]}).right(k,a);s===k.length?(r=(0,n.tickStep)(i/g,o/g,t),t=e):s?(r=(s=k[a/k[s-1][2]<k[s][2]/a?s-1:s])[1],t=s[0]):(r=Math.max((0,n.tickStep)(i,o,t),1),t=C)}return null==r?t:t.every(r)}return w.invert=function(e){return new Date(I(e))},w.domain=function(e){return arguments.length?_(a.map.call(e,x)):_().map(v)},w.ticks=function(e,t){var i,n=_(),o=n[0],r=n[n.length-1],a=r<o;return a&&(i=o,o=r,r=i),i=(i=P(e,o,r,t))?i.range(o,r+1):[],a?i.reverse():i},w.tickFormat=function(e,t){return null==t?j:S(t)},w.nice=function(e,t){var i=_();return(e=P(e,i[0],i[i.length-1],t))?_((0,c.default)(i,e)):w},w.copy=function(){return(0,s.copy)(w,y(e,t,i,o,r,l,b,C,S))},w}function b(){return l.initRange.apply(y(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,r.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}},"./node_modules/d3-scale/src/utcTime.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-scale/src/time.js"),o=i("./node_modules/d3-time-format/src/index.js"),r=i("./node_modules/d3-time/src/index.js"),a=i("./node_modules/d3-scale/src/init.js");function s(){return a.initRange.apply((0,n.calendar)(r.utcYear,r.utcMonth,r.utcWeek,r.utcDay,r.utcHour,r.utcMinute,r.utcSecond,r.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}},"./node_modules/d3-selection/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/create.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/creator.js"),o=i("./node_modules/d3-selection/src/select.js");function r(e){return(0,o.default)((0,n.default)(e).call(document.documentElement))}},"./node_modules/d3-selection/src/creator.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-selection/src/namespace.js"),o=i("./node_modules/d3-selection/src/namespaces.js");function r(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===o.xhtml&&t.documentElement.namespaceURI===o.xhtml?t.createElement(e):t.createElementNS(i,e)}}function a(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function s(e){var t=(0,n.default)(e);return(t.local?a:r)(t)}},"./node_modules/d3-selection/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{create:()=>n.default,creator:()=>o.default,local:()=>r.default,matcher:()=>a.default,mouse:()=>s.default,namespace:()=>l.default,namespaces:()=>c.default,clientPoint:()=>d.default,select:()=>p.default,selectAll:()=>u.default,selection:()=>m.default,selector:()=>h.default,selectorAll:()=>f.default,style:()=>g.styleValue,touch:()=>v.default,touches:()=>x.default,window:()=>y.default,event:()=>b.event,customEvent:()=>b.customEvent});var n=i("./node_modules/d3-selection/src/create.js"),o=i("./node_modules/d3-selection/src/creator.js"),r=i("./node_modules/d3-selection/src/local.js"),a=i("./node_modules/d3-selection/src/matcher.js"),s=i("./node_modules/d3-selection/src/mouse.js"),l=i("./node_modules/d3-selection/src/namespace.js"),c=i("./node_modules/d3-selection/src/namespaces.js"),d=i("./node_modules/d3-selection/src/point.js"),p=i("./node_modules/d3-selection/src/select.js"),u=i("./node_modules/d3-selection/src/selectAll.js"),m=i("./node_modules/d3-selection/src/selection/index.js"),h=i("./node_modules/d3-selection/src/selector.js"),f=i("./node_modules/d3-selection/src/selectorAll.js"),g=i("./node_modules/d3-selection/src/selection/style.js"),v=i("./node_modules/d3-selection/src/touch.js"),x=i("./node_modules/d3-selection/src/touches.js"),y=i("./node_modules/d3-selection/src/window.js"),b=i("./node_modules/d3-selection/src/selection/on.js")},"./node_modules/d3-selection/src/local.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=0;function o(){return new r}function r(){this._="@"+(++n).toString(36)}r.prototype=o.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},"./node_modules/d3-selection/src/matcher.js":(e,t,i)=>{"use strict";function n(e){return function(){return this.matches(e)}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/mouse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/sourceEvent.js"),o=i("./node_modules/d3-selection/src/point.js");function r(e){var t=(0,n.default)();return t.changedTouches&&(t=t.changedTouches[0]),(0,o.default)(e,t)}},"./node_modules/d3-selection/src/namespace.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/namespaces.js");function o(e){var t=e+="",i=t.indexOf(":");return i>=0&&"xmlns"!==(t=e.slice(0,i))&&(e=e.slice(i+1)),n.default.hasOwnProperty(t)?{space:n.default[t],local:e}:e}},"./node_modules/d3-selection/src/namespaces.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{xhtml:()=>n,default:()=>o});var n="http://www.w3.org/1999/xhtml";const o={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},"./node_modules/d3-selection/src/point.js":(e,t,i)=>{"use strict";function n(e,t){var i=e.ownerSVGElement||e;if(i.createSVGPoint){var n=i.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,[(n=n.matrixTransform(e.getScreenCTM().inverse())).x,n.y]}var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/select.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/selection/index.js");function o(e){return"string"==typeof e?new n.Selection([[document.querySelector(e)]],[document.documentElement]):new n.Selection([[e]],n.root)}},"./node_modules/d3-selection/src/selectAll.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/selection/index.js");function o(e){return"string"==typeof e?new n.Selection([document.querySelectorAll(e)],[document.documentElement]):new n.Selection([null==e?[]:e],n.root)}},"./node_modules/d3-selection/src/selection/append.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/creator.js");function o(e){var t="function"==typeof e?e:(0,n.default)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},"./node_modules/d3-selection/src/selection/attr.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i("./node_modules/d3-selection/src/namespace.js");function o(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function a(e,t){return function(){this.setAttribute(e,t)}}function s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function l(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttribute(e):this.setAttribute(e,i)}}function c(e,t){return function(){var i=t.apply(this,arguments);null==i?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function d(e,t){var i=(0,n.default)(e);if(arguments.length<2){var d=this.node();return i.local?d.getAttributeNS(i.space,i.local):d.getAttribute(i)}return this.each((null==t?i.local?r:o:"function"==typeof t?i.local?c:l:i.local?s:a)(i,t))}},"./node_modules/d3-selection/src/selection/call.js":(e,t,i)=>{"use strict";function n(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/classed.js":(e,t,i)=>{"use strict";function n(e){return e.trim().split(/^|\s+/)}function o(e){return e.classList||new r(e)}function r(e){this._node=e,this._names=n(e.getAttribute("class")||"")}function a(e,t){for(var i=o(e),n=-1,r=t.length;++n<r;)i.add(t[n])}function s(e,t){for(var i=o(e),n=-1,r=t.length;++n<r;)i.remove(t[n])}function l(e){return function(){a(this,e)}}function c(e){return function(){s(this,e)}}function d(e,t){return function(){(t.apply(this,arguments)?a:s)(this,e)}}function p(e,t){var i=n(e+"");if(arguments.length<2){for(var r=o(this.node()),a=-1,s=i.length;++a<s;)if(!r.contains(i[a]))return!1;return!0}return this.each(("function"==typeof t?d:t?l:c)(i,t))}i.r(t),i.d(t,{default:()=>p}),r.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}}},"./node_modules/d3-selection/src/selection/clone.js":(e,t,i)=>{"use strict";function n(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function r(e){return this.select(e?o:n)}i.r(t),i.d(t,{default:()=>r})},"./node_modules/d3-selection/src/selection/data.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/d3-selection/src/selection/index.js"),o=i("./node_modules/d3-selection/src/selection/enter.js"),r=i("./node_modules/d3-selection/src/constant.js"),a="$";function s(e,t,i,n,r,a){for(var s,l=0,c=t.length,d=a.length;l<d;++l)(s=t[l])?(s.__data__=a[l],n[l]=s):i[l]=new o.EnterNode(e,a[l]);for(;l<c;++l)(s=t[l])&&(r[l]=s)}function l(e,t,i,n,r,s,l){var c,d,p,u={},m=t.length,h=s.length,f=new Array(m);for(c=0;c<m;++c)(d=t[c])&&(f[c]=p=a+l.call(d,d.__data__,c,t),p in u?r[c]=d:u[p]=d);for(c=0;c<h;++c)(d=u[p=a+l.call(e,s[c],c,s)])?(n[c]=d,d.__data__=s[c],u[p]=null):i[c]=new o.EnterNode(e,s[c]);for(c=0;c<m;++c)(d=t[c])&&u[f[c]]===d&&(r[c]=d)}function c(e,t){if(!e)return v=new Array(this.size()),m=-1,this.each(function(e){v[++m]=e}),v;var i=t?l:s,o=this._parents,a=this._groups;"function"!=typeof e&&(e=(0,r.default)(e));for(var c=a.length,d=new Array(c),p=new Array(c),u=new Array(c),m=0;m<c;++m){var h=o[m],f=a[m],g=f.length,v=e.call(h,h&&h.__data__,m,o),x=v.length,y=p[m]=new Array(x),b=d[m]=new Array(x);i(h,f,y,b,u[m]=new Array(g),v,t);for(var C,S,w=0,I=0;w<x;++w)if(C=y[w]){for(w>=I&&(I=w+1);!(S=b[I])&&++I<x;);C._next=S||null}}return(d=new n.Selection(d,o))._enter=p,d._exit=u,d}},"./node_modules/d3-selection/src/selection/datum.js":(e,t,i)=>{"use strict";function n(e){return arguments.length?this.property("__data__",e):this.node().__data__}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/dispatch.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-selection/src/window.js");function o(e,t,i){var o=(0,n.default)(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,i):(r=o.document.createEvent("Event"),i?(r.initEvent(t,i.bubbles,i.cancelable),r.detail=i.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function r(e,t){return function(){return o(this,e,t)}}function a(e,t){return function(){return o(this,e,t.apply(this,arguments))}}function s(e,t){return this.each(("function"==typeof t?a:r)(e,t))}},"./node_modules/d3-selection/src/selection/each.js":(e,t,i)=>{"use strict";function n(e){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var o,r=t[i],a=0,s=r.length;a<s;++a)(o=r[a])&&e.call(o,o.__data__,a,r);return this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/empty.js":(e,t,i)=>{"use strict";function n(){return!this.node()}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/enter.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,EnterNode:()=>a});var n=i("./node_modules/d3-selection/src/selection/sparse.js"),o=i("./node_modules/d3-selection/src/selection/index.js");function r(){return new o.Selection(this._enter||this._groups.map(n.default),this._parents)}function a(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}a.prototype={constructor:a,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},"./node_modules/d3-selection/src/selection/exit.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/selection/sparse.js"),o=i("./node_modules/d3-selection/src/selection/index.js");function r(){return new o.Selection(this._exit||this._groups.map(n.default),this._parents)}},"./node_modules/d3-selection/src/selection/filter.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/selection/index.js"),o=i("./node_modules/d3-selection/src/matcher.js");function r(e){"function"!=typeof e&&(e=(0,o.default)(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var s,l=t[a],c=l.length,d=r[a]=[],p=0;p<c;++p)(s=l[p])&&e.call(s,s.__data__,p,l)&&d.push(s);return new n.Selection(r,this._parents)}},"./node_modules/d3-selection/src/selection/html.js":(e,t,i)=>{"use strict";function n(){this.innerHTML=""}function o(e){return function(){this.innerHTML=e}}function r(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function a(e){return arguments.length?this.each(null==e?n:("function"==typeof e?r:o)(e)):this.node().innerHTML}i.r(t),i.d(t,{default:()=>a})},"./node_modules/d3-selection/src/selection/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{root:()=>k,Selection:()=>j,default:()=>N});var n=i("./node_modules/d3-selection/src/selection/select.js"),o=i("./node_modules/d3-selection/src/selection/selectAll.js"),r=i("./node_modules/d3-selection/src/selection/filter.js"),a=i("./node_modules/d3-selection/src/selection/data.js"),s=i("./node_modules/d3-selection/src/selection/enter.js"),l=i("./node_modules/d3-selection/src/selection/exit.js"),c=i("./node_modules/d3-selection/src/selection/join.js"),d=i("./node_modules/d3-selection/src/selection/merge.js"),p=i("./node_modules/d3-selection/src/selection/order.js"),u=i("./node_modules/d3-selection/src/selection/sort.js"),m=i("./node_modules/d3-selection/src/selection/call.js"),h=i("./node_modules/d3-selection/src/selection/nodes.js"),f=i("./node_modules/d3-selection/src/selection/node.js"),g=i("./node_modules/d3-selection/src/selection/size.js"),v=i("./node_modules/d3-selection/src/selection/empty.js"),x=i("./node_modules/d3-selection/src/selection/each.js"),y=i("./node_modules/d3-selection/src/selection/attr.js"),b=i("./node_modules/d3-selection/src/selection/style.js"),C=i("./node_modules/d3-selection/src/selection/property.js"),S=i("./node_modules/d3-selection/src/selection/classed.js"),w=i("./node_modules/d3-selection/src/selection/text.js"),I=i("./node_modules/d3-selection/src/selection/html.js"),_=i("./node_modules/d3-selection/src/selection/raise.js"),D=i("./node_modules/d3-selection/src/selection/lower.js"),R=i("./node_modules/d3-selection/src/selection/append.js"),A=i("./node_modules/d3-selection/src/selection/insert.js"),T=i("./node_modules/d3-selection/src/selection/remove.js"),F=i("./node_modules/d3-selection/src/selection/clone.js"),E=i("./node_modules/d3-selection/src/selection/datum.js"),M=i("./node_modules/d3-selection/src/selection/on.js"),O=i("./node_modules/d3-selection/src/selection/dispatch.js"),k=[null];function j(e,t){this._groups=e,this._parents=t}function P(){return new j([[document.documentElement]],k)}j.prototype=P.prototype={constructor:j,select:n.default,selectAll:o.default,filter:r.default,data:a.default,enter:s.default,exit:l.default,join:c.default,merge:d.default,order:p.default,sort:u.default,call:m.default,nodes:h.default,node:f.default,size:g.default,empty:v.default,each:x.default,attr:y.default,style:b.default,property:C.default,classed:S.default,text:w.default,html:I.default,raise:_.default,lower:D.default,append:R.default,insert:A.default,remove:T.default,clone:F.default,datum:E.default,on:M.default,dispatch:O.default};const N=P},"./node_modules/d3-selection/src/selection/insert.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-selection/src/creator.js"),o=i("./node_modules/d3-selection/src/selector.js");function r(){return null}function a(e,t){var i="function"==typeof e?e:(0,n.default)(e),a=null==t?r:"function"==typeof t?t:(0,o.default)(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),a.apply(this,arguments)||null)})}},"./node_modules/d3-selection/src/selection/join.js":(e,t,i)=>{"use strict";function n(e,t,i){var n=this.enter(),o=this,r=this.exit();return n="function"==typeof e?e(n):n.append(e+""),null!=t&&(o=t(o)),null==i?r.remove():i(r),n&&o?n.merge(o).order():o}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/lower.js":(e,t,i)=>{"use strict";function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function o(){return this.each(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-selection/src/selection/merge.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/selection/index.js");function o(e){for(var t=this._groups,i=e._groups,o=t.length,r=i.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var c,d=t[l],p=i[l],u=d.length,m=s[l]=new Array(u),h=0;h<u;++h)(c=d[h]||p[h])&&(m[h]=c);for(;l<o;++l)s[l]=t[l];return new n.Selection(s,this._parents)}},"./node_modules/d3-selection/src/selection/node.js":(e,t,i)=>{"use strict";function n(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],o=0,r=n.length;o<r;++o){var a=n[o];if(a)return a}return null}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/nodes.js":(e,t,i)=>{"use strict";function n(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/on.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{event:()=>o,default:()=>c,customEvent:()=>d});var n={},o=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(n={mouseenter:"mouseover",mouseleave:"mouseout"}));function r(e,t,i){return e=a(e,t,i),function(t){var i=t.relatedTarget;i&&(i===this||8&i.compareDocumentPosition(this))||e.call(this,t)}}function a(e,t,i){return function(n){var r=o;o=n;try{e.call(this,this.__data__,t,i)}finally{o=r}}}function s(e){return function(){var t=this.__on;if(t){for(var i,n=0,o=-1,r=t.length;n<r;++n)i=t[n],e.type&&i.type!==e.type||i.name!==e.name?t[++o]=i:this.removeEventListener(i.type,i.listener,i.capture);++o?t.length=o:delete this.__on}}}function l(e,t,i){var o=n.hasOwnProperty(e.type)?r:a;return function(n,r,a){var s,l=this.__on,c=o(t,r,a);if(l)for(var d=0,p=l.length;d<p;++d)if((s=l[d]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=i),void(s.value=t);this.addEventListener(e.type,c,i),s={type:e.type,name:e.name,value:t,listener:c,capture:i},l?l.push(s):this.__on=[s]}}function c(e,t,i){var n,o,r=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}(e+""),a=r.length;if(!(arguments.length<2)){for(c=t?l:s,null==i&&(i=!1),n=0;n<a;++n)this.each(c(r[n],t,i));return this}var c=this.node().__on;if(c)for(var d,p=0,u=c.length;p<u;++p)for(n=0,d=c[p];n<a;++n)if((o=r[n]).type===d.type&&o.name===d.name)return d.value}function d(e,t,i,n){var r=o;e.sourceEvent=o,o=e;try{return t.apply(i,n)}finally{o=r}}},"./node_modules/d3-selection/src/selection/order.js":(e,t,i)=>{"use strict";function n(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var n,o=e[t],r=o.length-1,a=o[r];--r>=0;)(n=o[r])&&(a&&4^n.compareDocumentPosition(a)&&a.parentNode.insertBefore(n,a),a=n);return this}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/property.js":(e,t,i)=>{"use strict";function n(e){return function(){delete this[e]}}function o(e,t){return function(){this[e]=t}}function r(e,t){return function(){var i=t.apply(this,arguments);null==i?delete this[e]:this[e]=i}}function a(e,t){return arguments.length>1?this.each((null==t?n:"function"==typeof t?r:o)(e,t)):this.node()[e]}i.r(t),i.d(t,{default:()=>a})},"./node_modules/d3-selection/src/selection/raise.js":(e,t,i)=>{"use strict";function n(){this.nextSibling&&this.parentNode.appendChild(this)}function o(){return this.each(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-selection/src/selection/remove.js":(e,t,i)=>{"use strict";function n(){var e=this.parentNode;e&&e.removeChild(this)}function o(){return this.each(n)}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-selection/src/selection/select.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/selection/index.js"),o=i("./node_modules/d3-selection/src/selector.js");function r(e){"function"!=typeof e&&(e=(0,o.default)(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var s,l,c=t[a],d=c.length,p=r[a]=new Array(d),u=0;u<d;++u)(s=c[u])&&(l=e.call(s,s.__data__,u,c))&&("__data__"in s&&(l.__data__=s.__data__),p[u]=l);return new n.Selection(r,this._parents)}},"./node_modules/d3-selection/src/selection/selectAll.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/selection/index.js"),o=i("./node_modules/d3-selection/src/selectorAll.js");function r(e){"function"!=typeof e&&(e=(0,o.default)(e));for(var t=this._groups,i=t.length,r=[],a=[],s=0;s<i;++s)for(var l,c=t[s],d=c.length,p=0;p<d;++p)(l=c[p])&&(r.push(e.call(l,l.__data__,p,c)),a.push(l));return new n.Selection(r,a)}},"./node_modules/d3-selection/src/selection/size.js":(e,t,i)=>{"use strict";function n(){var e=0;return this.each(function(){++e}),e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/sort.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/selection/index.js");function o(e){function t(t,i){return t&&i?e(t.__data__,i.__data__):!t-!i}e||(e=r);for(var i=this._groups,o=i.length,a=new Array(o),s=0;s<o;++s){for(var l,c=i[s],d=c.length,p=a[s]=new Array(d),u=0;u<d;++u)(l=c[u])&&(p[u]=l);p.sort(t)}return new n.Selection(a,this._parents).order()}function r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}},"./node_modules/d3-selection/src/selection/sparse.js":(e,t,i)=>{"use strict";function n(e){return new Array(e.length)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-selection/src/selection/style.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s,styleValue:()=>l});var n=i("./node_modules/d3-selection/src/window.js");function o(e){return function(){this.style.removeProperty(e)}}function r(e,t,i){return function(){this.style.setProperty(e,t,i)}}function a(e,t,i){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,i)}}function s(e,t,i){return arguments.length>1?this.each((null==t?o:"function"==typeof t?a:r)(e,t,null==i?"":i)):l(this.node(),e)}function l(e,t){return e.style.getPropertyValue(t)||(0,n.default)(e).getComputedStyle(e,null).getPropertyValue(t)}},"./node_modules/d3-selection/src/selection/text.js":(e,t,i)=>{"use strict";function n(){this.textContent=""}function o(e){return function(){this.textContent=e}}function r(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function a(e){return arguments.length?this.each(null==e?n:("function"==typeof e?r:o)(e)):this.node().textContent}i.r(t),i.d(t,{default:()=>a})},"./node_modules/d3-selection/src/selector.js":(e,t,i)=>{"use strict";function n(){}function o(e){return null==e?n:function(){return this.querySelector(e)}}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-selection/src/selectorAll.js":(e,t,i)=>{"use strict";function n(){return[]}function o(e){return null==e?n:function(){return this.querySelectorAll(e)}}i.r(t),i.d(t,{default:()=>o})},"./node_modules/d3-selection/src/sourceEvent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/selection/on.js");function o(){for(var e,t=n.event;e=t.sourceEvent;)t=e;return t}},"./node_modules/d3-selection/src/touch.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/sourceEvent.js"),o=i("./node_modules/d3-selection/src/point.js");function r(e,t,i){arguments.length<3&&(i=t,t=(0,n.default)().changedTouches);for(var r,a=0,s=t?t.length:0;a<s;++a)if((r=t[a]).identifier===i)return(0,o.default)(e,r);return null}},"./node_modules/d3-selection/src/touches.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/sourceEvent.js"),o=i("./node_modules/d3-selection/src/point.js");function r(e,t){null==t&&(t=(0,n.default)().touches);for(var i=0,r=t?t.length:0,a=new Array(r);i<r;++i)a[i]=(0,o.default)(e,t[i]);return a}},"./node_modules/d3-selection/src/window.js":(e,t,i)=>{"use strict";function n(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/arc.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var n=i("./node_modules/d3-path/src/index.js"),o=i("./node_modules/d3-shape/src/constant.js"),r=i("./node_modules/d3-shape/src/math.js");function a(e){return e.innerRadius}function s(e){return e.outerRadius}function l(e){return e.startAngle}function c(e){return e.endAngle}function d(e){return e&&e.padAngle}function p(e,t,i,n,o,a,s){var l=e-i,c=t-n,d=(s?a:-a)/(0,r.sqrt)(l*l+c*c),p=d*c,u=-d*l,m=e+p,h=t+u,f=i+p,g=n+u,v=(m+f)/2,x=(h+g)/2,y=f-m,b=g-h,C=y*y+b*b,S=o-a,w=m*g-f*h,I=(b<0?-1:1)*(0,r.sqrt)((0,r.max)(0,S*S*C-w*w)),_=(w*b-y*I)/C,D=(-w*y-b*I)/C,R=(w*b+y*I)/C,A=(-w*y+b*I)/C,T=_-v,F=D-x,E=R-v,M=A-x;return T*T+F*F>E*E+M*M&&(_=R,D=A),{cx:_,cy:D,x01:-p,y01:-u,x11:_*(o/S-1),y11:D*(o/S-1)}}function u(){var e=a,t=s,i=(0,o.default)(0),u=null,m=l,h=c,f=d,g=null;function v(){var o,a,s=+e.apply(this,arguments),l=+t.apply(this,arguments),c=m.apply(this,arguments)-r.halfPi,d=h.apply(this,arguments)-r.halfPi,v=(0,r.abs)(d-c),x=d>c;if(g||(g=o=(0,n.path)()),l<s&&(a=l,l=s,s=a),l>r.epsilon)if(v>r.tau-r.epsilon)g.moveTo(l*(0,r.cos)(c),l*(0,r.sin)(c)),g.arc(0,0,l,c,d,!x),s>r.epsilon&&(g.moveTo(s*(0,r.cos)(d),s*(0,r.sin)(d)),g.arc(0,0,s,d,c,x));else{var y,b,C=c,S=d,w=c,I=d,_=v,D=v,R=f.apply(this,arguments)/2,A=R>r.epsilon&&(u?+u.apply(this,arguments):(0,r.sqrt)(s*s+l*l)),T=(0,r.min)((0,r.abs)(l-s)/2,+i.apply(this,arguments)),F=T,E=T;if(A>r.epsilon){var M=(0,r.asin)(A/s*(0,r.sin)(R)),O=(0,r.asin)(A/l*(0,r.sin)(R));(_-=2*M)>r.epsilon?(w+=M*=x?1:-1,I-=M):(_=0,w=I=(c+d)/2),(D-=2*O)>r.epsilon?(C+=O*=x?1:-1,S-=O):(D=0,C=S=(c+d)/2)}var k=l*(0,r.cos)(C),j=l*(0,r.sin)(C),P=s*(0,r.cos)(I),N=s*(0,r.sin)(I);if(T>r.epsilon){var V,L=l*(0,r.cos)(S),B=l*(0,r.sin)(S),$=s*(0,r.cos)(w),G=s*(0,r.sin)(w);if(v<r.pi&&(V=function(e,t,i,n,o,a,s,l){var c=i-e,d=n-t,p=s-o,u=l-a,m=u*c-p*d;if(!(m*m<r.epsilon))return[e+(m=(p*(t-a)-u*(e-o))/m)*c,t+m*d]}(k,j,$,G,L,B,P,N))){var z=k-V[0],U=j-V[1],q=L-V[0],X=B-V[1],H=1/(0,r.sin)((0,r.acos)((z*q+U*X)/((0,r.sqrt)(z*z+U*U)*(0,r.sqrt)(q*q+X*X)))/2),W=(0,r.sqrt)(V[0]*V[0]+V[1]*V[1]);F=(0,r.min)(T,(s-W)/(H-1)),E=(0,r.min)(T,(l-W)/(H+1))}}D>r.epsilon?E>r.epsilon?(y=p($,G,k,j,l,E,x),b=p(L,B,P,N,l,E,x),g.moveTo(y.cx+y.x01,y.cy+y.y01),E<T?g.arc(y.cx,y.cy,E,(0,r.atan2)(y.y01,y.x01),(0,r.atan2)(b.y01,b.x01),!x):(g.arc(y.cx,y.cy,E,(0,r.atan2)(y.y01,y.x01),(0,r.atan2)(y.y11,y.x11),!x),g.arc(0,0,l,(0,r.atan2)(y.cy+y.y11,y.cx+y.x11),(0,r.atan2)(b.cy+b.y11,b.cx+b.x11),!x),g.arc(b.cx,b.cy,E,(0,r.atan2)(b.y11,b.x11),(0,r.atan2)(b.y01,b.x01),!x))):(g.moveTo(k,j),g.arc(0,0,l,C,S,!x)):g.moveTo(k,j),s>r.epsilon&&_>r.epsilon?F>r.epsilon?(y=p(P,N,L,B,s,-F,x),b=p(k,j,$,G,s,-F,x),g.lineTo(y.cx+y.x01,y.cy+y.y01),F<T?g.arc(y.cx,y.cy,F,(0,r.atan2)(y.y01,y.x01),(0,r.atan2)(b.y01,b.x01),!x):(g.arc(y.cx,y.cy,F,(0,r.atan2)(y.y01,y.x01),(0,r.atan2)(y.y11,y.x11),!x),g.arc(0,0,s,(0,r.atan2)(y.cy+y.y11,y.cx+y.x11),(0,r.atan2)(b.cy+b.y11,b.cx+b.x11),x),g.arc(b.cx,b.cy,F,(0,r.atan2)(b.y11,b.x11),(0,r.atan2)(b.y01,b.x01),!x))):g.arc(0,0,s,I,w,x):g.lineTo(P,N)}else g.moveTo(0,0);if(g.closePath(),o)return g=null,o+""||null}return v.centroid=function(){var i=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,n=(+m.apply(this,arguments)+ +h.apply(this,arguments))/2-r.pi/2;return[(0,r.cos)(n)*i,(0,r.sin)(n)*i]},v.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.default)(+t),v):e},v.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:(0,o.default)(+e),v):t},v.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)(+e),v):i},v.padRadius=function(e){return arguments.length?(u=null==e?null:"function"==typeof e?e:(0,o.default)(+e),v):u},v.startAngle=function(e){return arguments.length?(m="function"==typeof e?e:(0,o.default)(+e),v):m},v.endAngle=function(e){return arguments.length?(h="function"==typeof e?e:(0,o.default)(+e),v):h},v.padAngle=function(e){return arguments.length?(f="function"==typeof e?e:(0,o.default)(+e),v):f},v.context=function(e){return arguments.length?(g=null==e?null:e,v):g},v}},"./node_modules/d3-shape/src/area.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-path/src/index.js"),o=i("./node_modules/d3-shape/src/constant.js"),r=i("./node_modules/d3-shape/src/curve/linear.js"),a=i("./node_modules/d3-shape/src/line.js"),s=i("./node_modules/d3-shape/src/point.js");function l(){var e=s.x,t=null,i=(0,o.default)(0),l=s.y,c=(0,o.default)(!0),d=null,p=r.default,u=null;function m(o){var r,a,s,m,h,f=o.length,g=!1,v=new Array(f),x=new Array(f);for(null==d&&(u=p(h=(0,n.path)())),r=0;r<=f;++r){if(!(r<f&&c(m=o[r],r,o))===g)if(g=!g)a=r,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),s=r-1;s>=a;--s)u.point(v[s],x[s]);u.lineEnd(),u.areaEnd()}g&&(v[r]=+e(m,r,o),x[r]=+i(m,r,o),u.point(t?+t(m,r,o):v[r],l?+l(m,r,o):x[r]))}if(h)return u=null,h+""||null}function h(){return(0,a.default)().defined(c).curve(p).context(d)}return m.x=function(i){return arguments.length?(e="function"==typeof i?i:(0,o.default)(+i),t=null,m):e},m.x0=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.default)(+t),m):e},m.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:(0,o.default)(+e),m):t},m.y=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)(+e),l=null,m):i},m.y0=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)(+e),m):i},m.y1=function(e){return arguments.length?(l=null==e?null:"function"==typeof e?e:(0,o.default)(+e),m):l},m.lineX0=m.lineY0=function(){return h().x(e).y(i)},m.lineY1=function(){return h().x(e).y(l)},m.lineX1=function(){return h().x(t).y(i)},m.defined=function(e){return arguments.length?(c="function"==typeof e?e:(0,o.default)(!!e),m):c},m.curve=function(e){return arguments.length?(p=e,null!=d&&(u=p(d)),m):p},m.context=function(e){return arguments.length?(null==e?d=u=null:u=p(d=e),m):d},m}},"./node_modules/d3-shape/src/areaRadial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-shape/src/curve/radial.js"),o=i("./node_modules/d3-shape/src/area.js"),r=i("./node_modules/d3-shape/src/lineRadial.js");function a(){var e=(0,o.default)().curve(n.curveRadialLinear),t=e.curve,i=e.lineX0,a=e.lineX1,s=e.lineY0,l=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return(0,r.lineRadial)(i())},delete e.lineX0,e.lineEndAngle=function(){return(0,r.lineRadial)(a())},delete e.lineX1,e.lineInnerRadius=function(){return(0,r.lineRadial)(s())},delete e.lineY0,e.lineOuterRadius=function(){return(0,r.lineRadial)(l())},delete e.lineY1,e.curve=function(e){return arguments.length?t((0,n.default)(e)):t()._curve},e}},"./node_modules/d3-shape/src/array.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{slice:()=>n});var n=Array.prototype.slice},"./node_modules/d3-shape/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/curve/basis.js":(e,t,i)=>{"use strict";function n(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function o(e){this._context=e}function r(e){return new o(e)}i.r(t),i.d(t,{point:()=>n,Basis:()=>o,default:()=>r}),o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:n(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:n(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},"./node_modules/d3-shape/src/curve/basisClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-shape/src/noop.js"),o=i("./node_modules/d3-shape/src/curve/basis.js");function r(e){this._context=e}function a(e){return new r(e)}r.prototype={areaStart:n.default,areaEnd:n.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:(0,o.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},"./node_modules/d3-shape/src/curve/basisOpen.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-shape/src/curve/basis.js");function o(e){this._context=e}function r(e){return new o(e)}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,o=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,o):this._context.moveTo(i,o);break;case 3:this._point=4;default:(0,n.point)(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}}},"./node_modules/d3-shape/src/curve/bundle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-shape/src/curve/basis.js");function o(e,t){this._basis=new n.Basis(e),this._beta=t}o.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,i=e.length-1;if(i>0)for(var n,o=e[0],r=t[0],a=e[i]-o,s=t[i]-r,l=-1;++l<=i;)n=l/i,this._basis.point(this._beta*e[l]+(1-this._beta)*(o+n*a),this._beta*t[l]+(1-this._beta)*(r+n*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const r=function e(t){function i(e){return 1===t?new n.Basis(e):new o(e,t)}return i.beta=function(t){return e(+t)},i}(.85)},"./node_modules/d3-shape/src/curve/cardinal.js":(e,t,i)=>{"use strict";function n(e,t,i){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-i),e._x2,e._y2)}function o(e,t){this._context=e,this._k=(1-t)/6}i.r(t),i.d(t,{point:()=>n,Cardinal:()=>o,default:()=>r}),o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:n(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:n(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const r=function e(t){function i(e){return new o(e,t)}return i.tension=function(t){return e(+t)},i}(0)},"./node_modules/d3-shape/src/curve/cardinalClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{CardinalClosed:()=>r,default:()=>a});var n=i("./node_modules/d3-shape/src/noop.js"),o=i("./node_modules/d3-shape/src/curve/cardinal.js");function r(e,t){this._context=e,this._k=(1-t)/6}r.prototype={areaStart:n.default,areaEnd:n.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,o.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const a=function e(t){function i(e){return new r(e,t)}return i.tension=function(t){return e(+t)},i}(0)},"./node_modules/d3-shape/src/curve/cardinalOpen.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{CardinalOpen:()=>o,default:()=>r});var n=i("./node_modules/d3-shape/src/curve/cardinal.js");function o(e,t){this._context=e,this._k=(1-t)/6}o.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,n.point)(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const r=function e(t){function i(e){return new o(e,t)}return i.tension=function(t){return e(+t)},i}(0)},"./node_modules/d3-shape/src/curve/catmullRom.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{point:()=>r,default:()=>s});var n=i("./node_modules/d3-shape/src/math.js"),o=i("./node_modules/d3-shape/src/curve/cardinal.js");function r(e,t,i){var o=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>n.epsilon){var l=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);o=(o*l-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*l-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>n.epsilon){var d=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,p=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*d+e._x1*e._l23_2a-t*e._l12_2a)/p,s=(s*d+e._y1*e._l23_2a-i*e._l12_2a)/p}e._context.bezierCurveTo(o,r,a,s,e._x2,e._y2)}function a(e,t){this._context=e,this._alpha=t}a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:r(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const s=function e(t){function i(e){return t?new a(e,t):new o.Cardinal(e,0)}return i.alpha=function(t){return e(+t)},i}(.5)},"./node_modules/d3-shape/src/curve/catmullRomClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-shape/src/curve/cardinalClosed.js"),o=i("./node_modules/d3-shape/src/noop.js"),r=i("./node_modules/d3-shape/src/curve/catmullRom.js");function a(e,t){this._context=e,this._alpha=t}a.prototype={areaStart:o.default,areaEnd:o.default,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:(0,r.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const s=function e(t){function i(e){return t?new a(e,t):new n.CardinalClosed(e,0)}return i.alpha=function(t){return e(+t)},i}(.5)},"./node_modules/d3-shape/src/curve/catmullRomOpen.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-shape/src/curve/cardinalOpen.js"),o=i("./node_modules/d3-shape/src/curve/catmullRom.js");function r(e,t){this._context=e,this._alpha=t}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var i=this._x2-e,n=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:(0,o.point)(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const a=function e(t){function i(e){return t?new r(e,t):new n.CardinalOpen(e,0)}return i.alpha=function(t){return e(+t)},i}(.5)},"./node_modules/d3-shape/src/curve/linear.js":(e,t,i)=>{"use strict";function n(e){this._context=e}function o(e){return new n(e)}i.r(t),i.d(t,{default:()=>o}),n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}}},"./node_modules/d3-shape/src/curve/linearClosed.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-shape/src/noop.js");function o(e){this._context=e}function r(e){return new o(e)}o.prototype={areaStart:n.default,areaEnd:n.default,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}}},"./node_modules/d3-shape/src/curve/monotone.js":(e,t,i)=>{"use strict";function n(e){return e<0?-1:1}function o(e,t,i){var o=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(o||r<0&&-0),s=(i-e._y1)/(r||o<0&&-0),l=(a*r+s*o)/(o+r);return(n(a)+n(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function r(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function a(e,t,i){var n=e._x0,o=e._y0,r=e._x1,a=e._y1,s=(r-n)/3;e._context.bezierCurveTo(n+s,o+s*t,r-s,a-s*i,r,a)}function s(e){this._context=e}function l(e){this._context=new c(e)}function c(e){this._context=e}function d(e){return new s(e)}function p(e){return new l(e)}i.r(t),i.d(t,{monotoneX:()=>d,monotoneY:()=>p}),s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:a(this,this._t0,r(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,a(this,r(this,i=o(this,e,t)),i);break;default:a(this,this._t0,i=o(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}},(l.prototype=Object.create(s.prototype)).point=function(e,t){s.prototype.point.call(this,t,e)},c.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,n,o,r){this._context.bezierCurveTo(t,e,n,i,r,o)}}},"./node_modules/d3-shape/src/curve/natural.js":(e,t,i)=>{"use strict";function n(e){this._context=e}function o(e){var t,i,n=e.length-1,o=new Array(n),r=new Array(n),a=new Array(n);for(o[0]=0,r[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)o[t]=1,r[t]=4,a[t]=4*e[t]+2*e[t+1];for(o[n-1]=2,r[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=o[t]/r[t-1],r[t]-=i,a[t]-=i*a[t-1];for(o[n-1]=a[n-1]/r[n-1],t=n-2;t>=0;--t)o[t]=(a[t]-o[t+1])/r[t];for(r[n-1]=(e[n]+o[n-1])/2,t=0;t<n-1;++t)r[t]=2*e[t+1]-o[t+1];return[o,r]}function r(e){return new n(e)}i.r(t),i.d(t,{default:()=>r}),n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===i)this._context.lineTo(e[1],t[1]);else for(var n=o(e),r=o(t),a=0,s=1;s<i;++a,++s)this._context.bezierCurveTo(n[0][a],r[0][a],n[1][a],r[1][a],e[s],t[s]);(this._line||0!==this._line&&1===i)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}}},"./node_modules/d3-shape/src/curve/radial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{curveRadialLinear:()=>n,default:()=>r});var n=r(i("./node_modules/d3-shape/src/curve/linear.js").default);function o(e){this._curve=e}function r(e){function t(t){return new o(e(t))}return t._curve=e,t}o.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}}},"./node_modules/d3-shape/src/curve/step.js":(e,t,i)=>{"use strict";function n(e,t){this._context=e,this._t=t}function o(e){return new n(e,.5)}function r(e){return new n(e,0)}function a(e){return new n(e,1)}i.r(t),i.d(t,{default:()=>o,stepBefore:()=>r,stepAfter:()=>a}),n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}}this._x=e,this._y=t}}},"./node_modules/d3-shape/src/descending.js":(e,t,i)=>{"use strict";function n(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/identity.js":(e,t,i)=>{"use strict";function n(e){return e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{arc:()=>n.default,area:()=>o.default,line:()=>r.default,pie:()=>a.default,areaRadial:()=>s.default,radialArea:()=>s.default,lineRadial:()=>l.default,radialLine:()=>l.default,pointRadial:()=>c.default,linkHorizontal:()=>d.linkHorizontal,linkVertical:()=>d.linkVertical,linkRadial:()=>d.linkRadial,symbol:()=>p.default,symbols:()=>p.symbols,symbolCircle:()=>u.default,symbolCross:()=>m.default,symbolDiamond:()=>h.default,symbolSquare:()=>f.default,symbolStar:()=>g.default,symbolTriangle:()=>v.default,symbolWye:()=>x.default,curveBasisClosed:()=>y.default,curveBasisOpen:()=>b.default,curveBasis:()=>C.default,curveBundle:()=>S.default,curveCardinalClosed:()=>w.default,curveCardinalOpen:()=>I.default,curveCardinal:()=>_.default,curveCatmullRomClosed:()=>D.default,curveCatmullRomOpen:()=>R.default,curveCatmullRom:()=>A.default,curveLinearClosed:()=>T.default,curveLinear:()=>F.default,curveMonotoneX:()=>E.monotoneX,curveMonotoneY:()=>E.monotoneY,curveNatural:()=>M.default,curveStep:()=>O.default,curveStepAfter:()=>O.stepAfter,curveStepBefore:()=>O.stepBefore,stack:()=>k.default,stackOffsetExpand:()=>j.default,stackOffsetDiverging:()=>P.default,stackOffsetNone:()=>N.default,stackOffsetSilhouette:()=>V.default,stackOffsetWiggle:()=>L.default,stackOrderAppearance:()=>B.default,stackOrderAscending:()=>$.default,stackOrderDescending:()=>G.default,stackOrderInsideOut:()=>z.default,stackOrderNone:()=>U.default,stackOrderReverse:()=>q.default});var n=i("./node_modules/d3-shape/src/arc.js"),o=i("./node_modules/d3-shape/src/area.js"),r=i("./node_modules/d3-shape/src/line.js"),a=i("./node_modules/d3-shape/src/pie.js"),s=i("./node_modules/d3-shape/src/areaRadial.js"),l=i("./node_modules/d3-shape/src/lineRadial.js"),c=i("./node_modules/d3-shape/src/pointRadial.js"),d=i("./node_modules/d3-shape/src/link/index.js"),p=i("./node_modules/d3-shape/src/symbol.js"),u=i("./node_modules/d3-shape/src/symbol/circle.js"),m=i("./node_modules/d3-shape/src/symbol/cross.js"),h=i("./node_modules/d3-shape/src/symbol/diamond.js"),f=i("./node_modules/d3-shape/src/symbol/square.js"),g=i("./node_modules/d3-shape/src/symbol/star.js"),v=i("./node_modules/d3-shape/src/symbol/triangle.js"),x=i("./node_modules/d3-shape/src/symbol/wye.js"),y=i("./node_modules/d3-shape/src/curve/basisClosed.js"),b=i("./node_modules/d3-shape/src/curve/basisOpen.js"),C=i("./node_modules/d3-shape/src/curve/basis.js"),S=i("./node_modules/d3-shape/src/curve/bundle.js"),w=i("./node_modules/d3-shape/src/curve/cardinalClosed.js"),I=i("./node_modules/d3-shape/src/curve/cardinalOpen.js"),_=i("./node_modules/d3-shape/src/curve/cardinal.js"),D=i("./node_modules/d3-shape/src/curve/catmullRomClosed.js"),R=i("./node_modules/d3-shape/src/curve/catmullRomOpen.js"),A=i("./node_modules/d3-shape/src/curve/catmullRom.js"),T=i("./node_modules/d3-shape/src/curve/linearClosed.js"),F=i("./node_modules/d3-shape/src/curve/linear.js"),E=i("./node_modules/d3-shape/src/curve/monotone.js"),M=i("./node_modules/d3-shape/src/curve/natural.js"),O=i("./node_modules/d3-shape/src/curve/step.js"),k=i("./node_modules/d3-shape/src/stack.js"),j=i("./node_modules/d3-shape/src/offset/expand.js"),P=i("./node_modules/d3-shape/src/offset/diverging.js"),N=i("./node_modules/d3-shape/src/offset/none.js"),V=i("./node_modules/d3-shape/src/offset/silhouette.js"),L=i("./node_modules/d3-shape/src/offset/wiggle.js"),B=i("./node_modules/d3-shape/src/order/appearance.js"),$=i("./node_modules/d3-shape/src/order/ascending.js"),G=i("./node_modules/d3-shape/src/order/descending.js"),z=i("./node_modules/d3-shape/src/order/insideOut.js"),U=i("./node_modules/d3-shape/src/order/none.js"),q=i("./node_modules/d3-shape/src/order/reverse.js")},"./node_modules/d3-shape/src/line.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-path/src/index.js"),o=i("./node_modules/d3-shape/src/constant.js"),r=i("./node_modules/d3-shape/src/curve/linear.js"),a=i("./node_modules/d3-shape/src/point.js");function s(){var e=a.x,t=a.y,i=(0,o.default)(!0),s=null,l=r.default,c=null;function d(o){var r,a,d,p=o.length,u=!1;for(null==s&&(c=l(d=(0,n.path)())),r=0;r<=p;++r)!(r<p&&i(a=o[r],r,o))===u&&((u=!u)?c.lineStart():c.lineEnd()),u&&c.point(+e(a,r,o),+t(a,r,o));if(d)return c=null,d+""||null}return d.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.default)(+t),d):e},d.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,o.default)(+e),d):t},d.defined=function(e){return arguments.length?(i="function"==typeof e?e:(0,o.default)(!!e),d):i},d.curve=function(e){return arguments.length?(l=e,null!=s&&(c=l(s)),d):l},d.context=function(e){return arguments.length?(null==e?s=c=null:c=l(s=e),d):s},d}},"./node_modules/d3-shape/src/lineRadial.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{lineRadial:()=>r,default:()=>a});var n=i("./node_modules/d3-shape/src/curve/radial.js"),o=i("./node_modules/d3-shape/src/line.js");function r(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t((0,n.default)(e)):t()._curve},e}function a(){return r((0,o.default)().curve(n.curveRadialLinear))}},"./node_modules/d3-shape/src/link/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{linkHorizontal:()=>h,linkVertical:()=>f,linkRadial:()=>g});var n=i("./node_modules/d3-path/src/index.js"),o=i("./node_modules/d3-shape/src/array.js"),r=i("./node_modules/d3-shape/src/constant.js"),a=i("./node_modules/d3-shape/src/point.js"),s=i("./node_modules/d3-shape/src/pointRadial.js");function l(e){return e.source}function c(e){return e.target}function d(e){var t=l,i=c,s=a.x,d=a.y,p=null;function u(){var r,a=o.slice.call(arguments),l=t.apply(this,a),c=i.apply(this,a);if(p||(p=r=(0,n.path)()),e(p,+s.apply(this,(a[0]=l,a)),+d.apply(this,a),+s.apply(this,(a[0]=c,a)),+d.apply(this,a)),r)return p=null,r+""||null}return u.source=function(e){return arguments.length?(t=e,u):t},u.target=function(e){return arguments.length?(i=e,u):i},u.x=function(e){return arguments.length?(s="function"==typeof e?e:(0,r.default)(+e),u):s},u.y=function(e){return arguments.length?(d="function"==typeof e?e:(0,r.default)(+e),u):d},u.context=function(e){return arguments.length?(p=null==e?null:e,u):p},u}function p(e,t,i,n,o){e.moveTo(t,i),e.bezierCurveTo(t=(t+n)/2,i,t,o,n,o)}function u(e,t,i,n,o){e.moveTo(t,i),e.bezierCurveTo(t,i=(i+o)/2,n,i,n,o)}function m(e,t,i,n,o){var r=(0,s.default)(t,i),a=(0,s.default)(t,i=(i+o)/2),l=(0,s.default)(n,i),c=(0,s.default)(n,o);e.moveTo(r[0],r[1]),e.bezierCurveTo(a[0],a[1],l[0],l[1],c[0],c[1])}function h(){return d(p)}function f(){return d(u)}function g(){var e=d(m);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}},"./node_modules/d3-shape/src/math.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{abs:()=>n,atan2:()=>o,cos:()=>r,max:()=>a,min:()=>s,sin:()=>l,sqrt:()=>c,epsilon:()=>d,pi:()=>p,halfPi:()=>u,tau:()=>m,acos:()=>h,asin:()=>f});var n=Math.abs,o=Math.atan2,r=Math.cos,a=Math.max,s=Math.min,l=Math.sin,c=Math.sqrt,d=1e-12,p=Math.PI,u=p/2,m=2*p;function h(e){return e>1?0:e<-1?p:Math.acos(e)}function f(e){return e>=1?u:e<=-1?-u:Math.asin(e)}},"./node_modules/d3-shape/src/noop.js":(e,t,i)=>{"use strict";function n(){}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/offset/diverging.js":(e,t,i)=>{"use strict";function n(e,t){if((s=e.length)>0)for(var i,n,o,r,a,s,l=0,c=e[t[0]].length;l<c;++l)for(r=a=0,i=0;i<s;++i)(o=(n=e[t[i]][l])[1]-n[0])>0?(n[0]=r,n[1]=r+=o):o<0?(n[1]=a,n[0]=a+=o):(n[0]=0,n[1]=o)}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/offset/expand.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/offset/none.js");function o(e,t){if((o=e.length)>0){for(var i,o,r,a=0,s=e[0].length;a<s;++a){for(r=i=0;i<o;++i)r+=e[i][a][1]||0;if(r)for(i=0;i<o;++i)e[i][a][1]/=r}(0,n.default)(e,t)}}},"./node_modules/d3-shape/src/offset/none.js":(e,t,i)=>{"use strict";function n(e,t){if((o=e.length)>1)for(var i,n,o,r=1,a=e[t[0]],s=a.length;r<o;++r)for(n=a,a=e[t[r]],i=0;i<s;++i)a[i][1]+=a[i][0]=isNaN(n[i][1])?n[i][0]:n[i][1]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/offset/silhouette.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/offset/none.js");function o(e,t){if((i=e.length)>0){for(var i,o=0,r=e[t[0]],a=r.length;o<a;++o){for(var s=0,l=0;s<i;++s)l+=e[s][o][1]||0;r[o][1]+=r[o][0]=-l/2}(0,n.default)(e,t)}}},"./node_modules/d3-shape/src/offset/wiggle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/offset/none.js");function o(e,t){if((r=e.length)>0&&(o=(i=e[t[0]]).length)>0){for(var i,o,r,a=0,s=1;s<o;++s){for(var l=0,c=0,d=0;l<r;++l){for(var p=e[t[l]],u=p[s][1]||0,m=(u-(p[s-1][1]||0))/2,h=0;h<l;++h){var f=e[t[h]];m+=(f[s][1]||0)-(f[s-1][1]||0)}c+=u,d+=m*u}i[s-1][1]+=i[s-1][0]=a,c&&(a-=d/c)}i[s-1][1]+=i[s-1][0]=a,(0,n.default)(e,t)}}},"./node_modules/d3-shape/src/order/appearance.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/order/none.js");function o(e){var t=e.map(r);return(0,n.default)(e).sort(function(e,i){return t[e]-t[i]})}function r(e){for(var t,i=-1,n=0,o=e.length,r=-1/0;++i<o;)(t=+e[i][1])>r&&(r=t,n=i);return n}},"./node_modules/d3-shape/src/order/ascending.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,sum:()=>r});var n=i("./node_modules/d3-shape/src/order/none.js");function o(e){var t=e.map(r);return(0,n.default)(e).sort(function(e,i){return t[e]-t[i]})}function r(e){for(var t,i=0,n=-1,o=e.length;++n<o;)(t=+e[n][1])&&(i+=t);return i}},"./node_modules/d3-shape/src/order/descending.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/order/ascending.js");function o(e){return(0,n.default)(e).reverse()}},"./node_modules/d3-shape/src/order/insideOut.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-shape/src/order/appearance.js"),o=i("./node_modules/d3-shape/src/order/ascending.js");function r(e){var t,i,r=e.length,a=e.map(o.sum),s=(0,n.default)(e),l=0,c=0,d=[],p=[];for(t=0;t<r;++t)i=s[t],l<c?(l+=a[i],d.push(i)):(c+=a[i],p.push(i));return p.reverse().concat(d)}},"./node_modules/d3-shape/src/order/none.js":(e,t,i)=>{"use strict";function n(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/order/reverse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/order/none.js");function o(e){return(0,n.default)(e).reverse()}},"./node_modules/d3-shape/src/pie.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-shape/src/constant.js"),o=i("./node_modules/d3-shape/src/descending.js"),r=i("./node_modules/d3-shape/src/identity.js"),a=i("./node_modules/d3-shape/src/math.js");function s(){var e=r.default,t=o.default,i=null,s=(0,n.default)(0),l=(0,n.default)(a.tau),c=(0,n.default)(0);function d(n){var o,r,d,p,u,m=n.length,h=0,f=new Array(m),g=new Array(m),v=+s.apply(this,arguments),x=Math.min(a.tau,Math.max(-a.tau,l.apply(this,arguments)-v)),y=Math.min(Math.abs(x)/m,c.apply(this,arguments)),b=y*(x<0?-1:1);for(o=0;o<m;++o)(u=g[f[o]=o]=+e(n[o],o,n))>0&&(h+=u);for(null!=t?f.sort(function(e,i){return t(g[e],g[i])}):null!=i&&f.sort(function(e,t){return i(n[e],n[t])}),o=0,d=h?(x-m*b)/h:0;o<m;++o,v=p)r=f[o],p=v+((u=g[r])>0?u*d:0)+b,g[r]={data:n[r],index:o,value:u,startAngle:v,endAngle:p,padAngle:y};return g}return d.value=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),d):e},d.sortValues=function(e){return arguments.length?(t=e,i=null,d):t},d.sort=function(e){return arguments.length?(i=e,t=null,d):i},d.startAngle=function(e){return arguments.length?(s="function"==typeof e?e:(0,n.default)(+e),d):s},d.endAngle=function(e){return arguments.length?(l="function"==typeof e?e:(0,n.default)(+e),d):l},d.padAngle=function(e){return arguments.length?(c="function"==typeof e?e:(0,n.default)(+e),d):c},d}},"./node_modules/d3-shape/src/point.js":(e,t,i)=>{"use strict";function n(e){return e[0]}function o(e){return e[1]}i.r(t),i.d(t,{x:()=>n,y:()=>o})},"./node_modules/d3-shape/src/pointRadial.js":(e,t,i)=>{"use strict";function n(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-shape/src/stack.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>l});var n=i("./node_modules/d3-shape/src/array.js"),o=i("./node_modules/d3-shape/src/constant.js"),r=i("./node_modules/d3-shape/src/offset/none.js"),a=i("./node_modules/d3-shape/src/order/none.js");function s(e,t){return e[t]}function l(){var e=(0,o.default)([]),t=a.default,i=r.default,l=s;function c(n){var o,r,a=e.apply(this,arguments),s=n.length,c=a.length,d=new Array(c);for(o=0;o<c;++o){for(var p,u=a[o],m=d[o]=new Array(s),h=0;h<s;++h)m[h]=p=[0,+l(n[h],u,h,n)],p.data=n[h];m.key=u}for(o=0,r=t(d);o<c;++o)d[r[o]].index=o;return i(d,r),d}return c.keys=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.default)(n.slice.call(t)),c):e},c.value=function(e){return arguments.length?(l="function"==typeof e?e:(0,o.default)(+e),c):l},c.order=function(e){return arguments.length?(t=null==e?a.default:"function"==typeof e?e:(0,o.default)(n.slice.call(e)),c):t},c.offset=function(e){return arguments.length?(i=null==e?r.default:e,c):i},c}},"./node_modules/d3-shape/src/symbol.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{symbols:()=>u,default:()=>m});var n=i("./node_modules/d3-path/src/index.js"),o=i("./node_modules/d3-shape/src/symbol/circle.js"),r=i("./node_modules/d3-shape/src/symbol/cross.js"),a=i("./node_modules/d3-shape/src/symbol/diamond.js"),s=i("./node_modules/d3-shape/src/symbol/star.js"),l=i("./node_modules/d3-shape/src/symbol/square.js"),c=i("./node_modules/d3-shape/src/symbol/triangle.js"),d=i("./node_modules/d3-shape/src/symbol/wye.js"),p=i("./node_modules/d3-shape/src/constant.js"),u=[o.default,r.default,a.default,l.default,s.default,c.default,d.default];function m(){var e=(0,p.default)(o.default),t=(0,p.default)(64),i=null;function r(){var o;if(i||(i=o=(0,n.path)()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),o)return i=null,o+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:(0,p.default)(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:(0,p.default)(+e),r):t},r.context=function(e){return arguments.length?(i=null==e?null:e,r):i},r}},"./node_modules/d3-shape/src/symbol/circle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-shape/src/math.js");const o={draw:function(e,t){var i=Math.sqrt(t/n.pi);e.moveTo(i,0),e.arc(0,0,i,0,n.tau)}}},"./node_modules/d3-shape/src/symbol/cross.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n={draw:function(e,t){var i=Math.sqrt(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}}},"./node_modules/d3-shape/src/symbol/diamond.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=Math.sqrt(1/3),o=2*n;const r={draw:function(e,t){var i=Math.sqrt(t/o),r=i*n;e.moveTo(0,-i),e.lineTo(r,0),e.lineTo(0,i),e.lineTo(-r,0),e.closePath()}}},"./node_modules/d3-shape/src/symbol/square.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});const n={draw:function(e,t){var i=Math.sqrt(t),n=-i/2;e.rect(n,n,i,i)}}},"./node_modules/d3-shape/src/symbol/star.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-shape/src/math.js"),o=Math.sin(n.pi/10)/Math.sin(7*n.pi/10),r=Math.sin(n.tau/10)*o,a=-Math.cos(n.tau/10)*o;const s={draw:function(e,t){var i=Math.sqrt(.8908130915292852*t),o=r*i,s=a*i;e.moveTo(0,-i),e.lineTo(o,s);for(var l=1;l<5;++l){var c=n.tau*l/5,d=Math.cos(c),p=Math.sin(c);e.lineTo(p*i,-d*i),e.lineTo(d*o-p*s,p*o+d*s)}e.closePath()}}},"./node_modules/d3-shape/src/symbol/triangle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=Math.sqrt(3);const o={draw:function(e,t){var i=-Math.sqrt(t/(3*n));e.moveTo(0,2*i),e.lineTo(-n*i,-i),e.lineTo(n*i,-i),e.closePath()}}},"./node_modules/d3-shape/src/symbol/wye.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=-.5,o=Math.sqrt(3)/2,r=1/Math.sqrt(12),a=3*(r/2+1);const s={draw:function(e,t){var i=Math.sqrt(t/a),s=i/2,l=i*r,c=s,d=i*r+i,p=-c,u=d;e.moveTo(s,l),e.lineTo(c,d),e.lineTo(p,u),e.lineTo(n*s-o*l,o*s+n*l),e.lineTo(n*c-o*d,o*c+n*d),e.lineTo(n*p-o*u,o*p+n*u),e.lineTo(n*s+o*l,n*l-o*s),e.lineTo(n*c+o*d,n*d-o*c),e.lineTo(n*p+o*u,n*u-o*p),e.closePath()}}},"./node_modules/d3-time-format/src/defaultLocale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeFormat:()=>o,timeParse:()=>r,utcFormat:()=>a,utcParse:()=>s,default:()=>c});var n,o,r,a,s,l=i("./node_modules/d3-time-format/src/locale.js");function c(e){return n=(0,l.default)(e),o=n.format,r=n.parse,a=n.utcFormat,s=n.utcParse,n}c({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},"./node_modules/d3-time-format/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeFormatDefaultLocale:()=>n.default,timeFormat:()=>n.timeFormat,timeParse:()=>n.timeParse,utcFormat:()=>n.utcFormat,utcParse:()=>n.utcParse,timeFormatLocale:()=>o.default,isoFormat:()=>r.default,isoParse:()=>a.default});var n=i("./node_modules/d3-time-format/src/defaultLocale.js"),o=i("./node_modules/d3-time-format/src/locale.js"),r=i("./node_modules/d3-time-format/src/isoFormat.js"),a=i("./node_modules/d3-time-format/src/isoParse.js")},"./node_modules/d3-time-format/src/isoFormat.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{isoSpecifier:()=>o,default:()=>r});var n=i("./node_modules/d3-time-format/src/defaultLocale.js"),o="%Y-%m-%dT%H:%M:%S.%LZ";const r=Date.prototype.toISOString?function(e){return e.toISOString()}:(0,n.utcFormat)(o)},"./node_modules/d3-time-format/src/isoParse.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-time-format/src/isoFormat.js"),o=i("./node_modules/d3-time-format/src/defaultLocale.js");const r=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:(0,o.utcParse)(n.isoSpecifier)},"./node_modules/d3-time-format/src/locale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var n=i("./node_modules/d3-time/src/index.js");function o(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function a(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function s(e){var t=e.dateTime,i=e.date,s=e.time,c=e.periods,d=e.days,p=e.shortDays,u=e.months,m=e.shortMonths,H=h(c),me=f(c),_e=h(d),De=f(d),Re=h(p),Ae=f(p),Te=h(u),Fe=f(u),Ee=h(m),Me=f(m),Oe={a:function(e){return p[e.getDay()]},A:function(e){return d[e.getDay()]},b:function(e){return m[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:P,e:P,f:$,g:J,G:ee,H:N,I:V,j:L,L:B,m:G,M:z,p:function(e){return c[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:we,s:Ie,S:U,u:q,U:X,V:W,w:Y,W:Q,x:null,X:null,y:K,Y:Z,Z:te,"%":Se},ke={a:function(e){return p[e.getUTCDay()]},A:function(e){return d[e.getUTCDay()]},b:function(e){return m[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:ie,e:ie,f:se,g:xe,G:be,H:ne,I:oe,j:re,L:ae,m:le,M:ce,p:function(e){return c[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:we,s:Ie,S:de,u:pe,U:ue,V:he,w:fe,W:ge,x:null,X:null,y:ve,Y:ye,Z:Ce,"%":Se},je={a:function(e,t,i){var n=Re.exec(t.slice(i));return n?(e.w=Ae[n[0].toLowerCase()],i+n[0].length):-1},A:function(e,t,i){var n=_e.exec(t.slice(i));return n?(e.w=De[n[0].toLowerCase()],i+n[0].length):-1},b:function(e,t,i){var n=Ee.exec(t.slice(i));return n?(e.m=Me[n[0].toLowerCase()],i+n[0].length):-1},B:function(e,t,i){var n=Te.exec(t.slice(i));return n?(e.m=Fe[n[0].toLowerCase()],i+n[0].length):-1},c:function(e,i,n){return Ve(e,t,i,n)},d:D,e:D,f:M,g:S,G:C,H:A,I:A,j:R,L:E,m:_,M:T,p:function(e,t,i){var n=H.exec(t.slice(i));return n?(e.p=me[n[0].toLowerCase()],i+n[0].length):-1},q:I,Q:k,s:j,S:F,u:v,U:x,V:y,w:g,W:b,x:function(e,t,n){return Ve(e,i,t,n)},X:function(e,t,i){return Ve(e,s,t,i)},y:S,Y:C,Z:w,"%":O};function Pe(e,t){return function(i){var n,o,r,a=[],s=-1,c=0,d=e.length;for(i instanceof Date||(i=new Date(+i));++s<d;)37===e.charCodeAt(s)&&(a.push(e.slice(c,s)),null!=(o=l[n=e.charAt(++s)])?n=e.charAt(++s):o="e"===n?" ":"0",(r=t[n])&&(n=r(i,o)),a.push(n),c=s+1);return a.push(e.slice(c,s)),a.join("")}}function Ne(e,t){return function(i){var s,l,c=a(1900,void 0,1);if(Ve(c,e,i+="",0)!=i.length)return null;if("Q"in c)return new Date(c.Q);if("s"in c)return new Date(1e3*c.s+("L"in c?c.L:0));if(t&&!("Z"in c)&&(c.Z=0),"p"in c&&(c.H=c.H%12+12*c.p),void 0===c.m&&(c.m="q"in c?c.q:0),"V"in c){if(c.V<1||c.V>53)return null;"w"in c||(c.w=1),"Z"in c?(l=(s=r(a(c.y,0,1))).getUTCDay(),s=l>4||0===l?n.utcMonday.ceil(s):(0,n.utcMonday)(s),s=n.utcDay.offset(s,7*(c.V-1)),c.y=s.getUTCFullYear(),c.m=s.getUTCMonth(),c.d=s.getUTCDate()+(c.w+6)%7):(l=(s=o(a(c.y,0,1))).getDay(),s=l>4||0===l?n.timeMonday.ceil(s):(0,n.timeMonday)(s),s=n.timeDay.offset(s,7*(c.V-1)),c.y=s.getFullYear(),c.m=s.getMonth(),c.d=s.getDate()+(c.w+6)%7)}else("W"in c||"U"in c)&&("w"in c||(c.w="u"in c?c.u%7:"W"in c?1:0),l="Z"in c?r(a(c.y,0,1)).getUTCDay():o(a(c.y,0,1)).getDay(),c.m=0,c.d="W"in c?(c.w+6)%7+7*c.W-(l+5)%7:c.w+7*c.U-(l+6)%7);return"Z"in c?(c.H+=c.Z/100|0,c.M+=c.Z%100,r(c)):o(c)}}function Ve(e,t,i,n){for(var o,r,a=0,s=t.length,c=i.length;a<s;){if(n>=c)return-1;if(37===(o=t.charCodeAt(a++))){if(o=t.charAt(a++),!(r=je[o in l?t.charAt(a++):o])||(n=r(e,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}return Oe.x=Pe(i,Oe),Oe.X=Pe(s,Oe),Oe.c=Pe(t,Oe),ke.x=Pe(i,ke),ke.X=Pe(s,ke),ke.c=Pe(t,ke),{format:function(e){var t=Pe(e+="",Oe);return t.toString=function(){return e},t},parse:function(e){var t=Ne(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=Pe(e+="",ke);return t.toString=function(){return e},t},utcParse:function(e){var t=Ne(e+="",!0);return t.toString=function(){return e},t}}}var l={"-":"",_:" ",0:"0"},c=/^\s*\d+/,d=/^%/,p=/[\\^$*+?|[\]().{}]/g;function u(e,t,i){var n=e<0?"-":"",o=(n?-e:e)+"",r=o.length;return n+(r<i?new Array(i-r+1).join(t)+o:o)}function m(e){return e.replace(p,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(m).join("|")+")","i")}function f(e){for(var t={},i=-1,n=e.length;++i<n;)t[e[i].toLowerCase()]=i;return t}function g(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.w=+n[0],i+n[0].length):-1}function v(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.u=+n[0],i+n[0].length):-1}function x(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.U=+n[0],i+n[0].length):-1}function y(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.V=+n[0],i+n[0].length):-1}function b(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.W=+n[0],i+n[0].length):-1}function C(e,t,i){var n=c.exec(t.slice(i,i+4));return n?(e.y=+n[0],i+n[0].length):-1}function S(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),i+n[0].length):-1}function w(e,t,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function I(e,t,i){var n=c.exec(t.slice(i,i+1));return n?(e.q=3*n[0]-3,i+n[0].length):-1}function _(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.m=n[0]-1,i+n[0].length):-1}function D(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.d=+n[0],i+n[0].length):-1}function R(e,t,i){var n=c.exec(t.slice(i,i+3));return n?(e.m=0,e.d=+n[0],i+n[0].length):-1}function A(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.H=+n[0],i+n[0].length):-1}function T(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.M=+n[0],i+n[0].length):-1}function F(e,t,i){var n=c.exec(t.slice(i,i+2));return n?(e.S=+n[0],i+n[0].length):-1}function E(e,t,i){var n=c.exec(t.slice(i,i+3));return n?(e.L=+n[0],i+n[0].length):-1}function M(e,t,i){var n=c.exec(t.slice(i,i+6));return n?(e.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function O(e,t,i){var n=d.exec(t.slice(i,i+1));return n?i+n[0].length:-1}function k(e,t,i){var n=c.exec(t.slice(i));return n?(e.Q=+n[0],i+n[0].length):-1}function j(e,t,i){var n=c.exec(t.slice(i));return n?(e.s=+n[0],i+n[0].length):-1}function P(e,t){return u(e.getDate(),t,2)}function N(e,t){return u(e.getHours(),t,2)}function V(e,t){return u(e.getHours()%12||12,t,2)}function L(e,t){return u(1+n.timeDay.count((0,n.timeYear)(e),e),t,3)}function B(e,t){return u(e.getMilliseconds(),t,3)}function $(e,t){return B(e,t)+"000"}function G(e,t){return u(e.getMonth()+1,t,2)}function z(e,t){return u(e.getMinutes(),t,2)}function U(e,t){return u(e.getSeconds(),t,2)}function q(e){var t=e.getDay();return 0===t?7:t}function X(e,t){return u(n.timeSunday.count((0,n.timeYear)(e)-1,e),t,2)}function H(e){var t=e.getDay();return t>=4||0===t?(0,n.timeThursday)(e):n.timeThursday.ceil(e)}function W(e,t){return e=H(e),u(n.timeThursday.count((0,n.timeYear)(e),e)+(4===(0,n.timeYear)(e).getDay()),t,2)}function Y(e){return e.getDay()}function Q(e,t){return u(n.timeMonday.count((0,n.timeYear)(e)-1,e),t,2)}function K(e,t){return u(e.getFullYear()%100,t,2)}function J(e,t){return u((e=H(e)).getFullYear()%100,t,2)}function Z(e,t){return u(e.getFullYear()%1e4,t,4)}function ee(e,t){var i=e.getDay();return u((e=i>=4||0===i?(0,n.timeThursday)(e):n.timeThursday.ceil(e)).getFullYear()%1e4,t,4)}function te(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function ie(e,t){return u(e.getUTCDate(),t,2)}function ne(e,t){return u(e.getUTCHours(),t,2)}function oe(e,t){return u(e.getUTCHours()%12||12,t,2)}function re(e,t){return u(1+n.utcDay.count((0,n.utcYear)(e),e),t,3)}function ae(e,t){return u(e.getUTCMilliseconds(),t,3)}function se(e,t){return ae(e,t)+"000"}function le(e,t){return u(e.getUTCMonth()+1,t,2)}function ce(e,t){return u(e.getUTCMinutes(),t,2)}function de(e,t){return u(e.getUTCSeconds(),t,2)}function pe(e){var t=e.getUTCDay();return 0===t?7:t}function ue(e,t){return u(n.utcSunday.count((0,n.utcYear)(e)-1,e),t,2)}function me(e){var t=e.getUTCDay();return t>=4||0===t?(0,n.utcThursday)(e):n.utcThursday.ceil(e)}function he(e,t){return e=me(e),u(n.utcThursday.count((0,n.utcYear)(e),e)+(4===(0,n.utcYear)(e).getUTCDay()),t,2)}function fe(e){return e.getUTCDay()}function ge(e,t){return u(n.utcMonday.count((0,n.utcYear)(e)-1,e),t,2)}function ve(e,t){return u(e.getUTCFullYear()%100,t,2)}function xe(e,t){return u((e=me(e)).getUTCFullYear()%100,t,2)}function ye(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function be(e,t){var i=e.getUTCDay();return u((e=i>=4||0===i?(0,n.utcThursday)(e):n.utcThursday.ceil(e)).getUTCFullYear()%1e4,t,4)}function Ce(){return"+0000"}function Se(){return"%"}function we(e){return+e}function Ie(e){return Math.floor(+e/1e3)}},"./node_modules/d3-time/src/day.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,days:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.durationMinute)/o.durationDay},function(e){return e.getDate()-1});const a=r;var s=r.range},"./node_modules/d3-time/src/duration.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{durationSecond:()=>n,durationMinute:()=>o,durationHour:()=>r,durationDay:()=>a,durationWeek:()=>s});var n=1e3,o=6e4,r=36e5,a=864e5,s=6048e5},"./node_modules/d3-time/src/hour.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,hours:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.durationSecond-e.getMinutes()*o.durationMinute)},function(e,t){e.setTime(+e+t*o.durationHour)},function(e,t){return(t-e)/o.durationHour},function(e){return e.getHours()});const a=r;var s=r.range},"./node_modules/d3-time/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{timeInterval:()=>n.default,timeMillisecond:()=>o.default,timeMilliseconds:()=>o.milliseconds,utcMillisecond:()=>o.default,utcMilliseconds:()=>o.milliseconds,timeSecond:()=>r.default,timeSeconds:()=>r.seconds,utcSecond:()=>r.default,utcSeconds:()=>r.seconds,timeMinute:()=>a.default,timeMinutes:()=>a.minutes,timeHour:()=>s.default,timeHours:()=>s.hours,timeDay:()=>l.default,timeDays:()=>l.days,timeWeek:()=>c.sunday,timeWeeks:()=>c.sundays,timeSunday:()=>c.sunday,timeSundays:()=>c.sundays,timeMonday:()=>c.monday,timeMondays:()=>c.mondays,timeTuesday:()=>c.tuesday,timeTuesdays:()=>c.tuesdays,timeWednesday:()=>c.wednesday,timeWednesdays:()=>c.wednesdays,timeThursday:()=>c.thursday,timeThursdays:()=>c.thursdays,timeFriday:()=>c.friday,timeFridays:()=>c.fridays,timeSaturday:()=>c.saturday,timeSaturdays:()=>c.saturdays,timeMonth:()=>d.default,timeMonths:()=>d.months,timeYear:()=>p.default,timeYears:()=>p.years,utcMinute:()=>u.default,utcMinutes:()=>u.utcMinutes,utcHour:()=>m.default,utcHours:()=>m.utcHours,utcDay:()=>h.default,utcDays:()=>h.utcDays,utcWeek:()=>f.utcSunday,utcWeeks:()=>f.utcSundays,utcSunday:()=>f.utcSunday,utcSundays:()=>f.utcSundays,utcMonday:()=>f.utcMonday,utcMondays:()=>f.utcMondays,utcTuesday:()=>f.utcTuesday,utcTuesdays:()=>f.utcTuesdays,utcWednesday:()=>f.utcWednesday,utcWednesdays:()=>f.utcWednesdays,utcThursday:()=>f.utcThursday,utcThursdays:()=>f.utcThursdays,utcFriday:()=>f.utcFriday,utcFridays:()=>f.utcFridays,utcSaturday:()=>f.utcSaturday,utcSaturdays:()=>f.utcSaturdays,utcMonth:()=>g.default,utcMonths:()=>g.utcMonths,utcYear:()=>v.default,utcYears:()=>v.utcYears});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/millisecond.js"),r=i("./node_modules/d3-time/src/second.js"),a=i("./node_modules/d3-time/src/minute.js"),s=i("./node_modules/d3-time/src/hour.js"),l=i("./node_modules/d3-time/src/day.js"),c=i("./node_modules/d3-time/src/week.js"),d=i("./node_modules/d3-time/src/month.js"),p=i("./node_modules/d3-time/src/year.js"),u=i("./node_modules/d3-time/src/utcMinute.js"),m=i("./node_modules/d3-time/src/utcHour.js"),h=i("./node_modules/d3-time/src/utcDay.js"),f=i("./node_modules/d3-time/src/utcWeek.js"),g=i("./node_modules/d3-time/src/utcMonth.js"),v=i("./node_modules/d3-time/src/utcYear.js")},"./node_modules/d3-time/src/interval.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=new Date,o=new Date;function r(e,t,i,a){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return e(t=new Date(+t)),t},s.ceil=function(i){return e(i=new Date(i-1)),t(i,1),e(i),i},s.round=function(e){var t=s(e),i=s.ceil(e);return e-t<i-e?t:i},s.offset=function(e,i){return t(e=new Date(+e),null==i?1:Math.floor(i)),e},s.range=function(i,n,o){var r,a=[];if(i=s.ceil(i),o=null==o?1:Math.floor(o),!(i<n&&o>0))return a;do{a.push(r=new Date(+i)),t(i,o),e(i)}while(r<i&&i<n);return a},s.filter=function(i){return r(function(t){if(t>=t)for(;e(t),!i(t);)t.setTime(t-1)},function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!i(e););else for(;--n>=0;)for(;t(e,1),!i(e););})},i&&(s.count=function(t,r){return n.setTime(+t),o.setTime(+r),e(n),e(o),Math.floor(i(n,o))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(a?function(t){return a(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}},"./node_modules/d3-time/src/millisecond.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,milliseconds:()=>a});var n=i("./node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?(0,n.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,i){t.setTime(+t+i*e)},function(t,i){return(i-t)/e}):o:null};const r=o;var a=o.range},"./node_modules/d3-time/src/minute.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,minutes:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*o.durationSecond)},function(e,t){e.setTime(+e+t*o.durationMinute)},function(e,t){return(t-e)/o.durationMinute},function(e){return e.getMinutes()});const a=r;var s=r.range},"./node_modules/d3-time/src/month.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,months:()=>r});var n=(0,i("./node_modules/d3-time/src/interval.js").default)(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()});const o=n;var r=n.range},"./node_modules/d3-time/src/second.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,seconds:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*o.durationSecond)},function(e,t){return(t-e)/o.durationSecond},function(e){return e.getUTCSeconds()});const a=r;var s=r.range},"./node_modules/d3-time/src/utcDay.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcDays:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/o.durationDay},function(e){return e.getUTCDate()-1});const a=r;var s=r.range},"./node_modules/d3-time/src/utcHour.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcHours:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*o.durationHour)},function(e,t){return(t-e)/o.durationHour},function(e){return e.getUTCHours()});const a=r;var s=r.range},"./node_modules/d3-time/src/utcMinute.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,utcMinutes:()=>s});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js"),r=(0,n.default)(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*o.durationMinute)},function(e,t){return(t-e)/o.durationMinute},function(e){return e.getUTCMinutes()});const a=r;var s=r.range},"./node_modules/d3-time/src/utcMonth.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o,utcMonths:()=>r});var n=(0,i("./node_modules/d3-time/src/interval.js").default)(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()});const o=n;var r=n.range},"./node_modules/d3-time/src/utcWeek.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{utcSunday:()=>a,utcMonday:()=>s,utcTuesday:()=>l,utcWednesday:()=>c,utcThursday:()=>d,utcFriday:()=>p,utcSaturday:()=>u,utcSundays:()=>m,utcMondays:()=>h,utcTuesdays:()=>f,utcWednesdays:()=>g,utcThursdays:()=>v,utcFridays:()=>x,utcSaturdays:()=>y});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js");function r(e){return(0,n.default)(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/o.durationWeek})}var a=r(0),s=r(1),l=r(2),c=r(3),d=r(4),p=r(5),u=r(6),m=a.range,h=s.range,f=l.range,g=c.range,v=d.range,x=p.range,y=u.range},"./node_modules/d3-time/src/utcYear.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,utcYears:()=>a});var n=i("./node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,n.default)(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i*e)}):null};const r=o;var a=o.range},"./node_modules/d3-time/src/week.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{sunday:()=>a,monday:()=>s,tuesday:()=>l,wednesday:()=>c,thursday:()=>d,friday:()=>p,saturday:()=>u,sundays:()=>m,mondays:()=>h,tuesdays:()=>f,wednesdays:()=>g,thursdays:()=>v,fridays:()=>x,saturdays:()=>y});var n=i("./node_modules/d3-time/src/interval.js"),o=i("./node_modules/d3-time/src/duration.js");function r(e){return(0,n.default)(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o.durationMinute)/o.durationWeek})}var a=r(0),s=r(1),l=r(2),c=r(3),d=r(4),p=r(5),u=r(6),m=a.range,h=s.range,f=l.range,g=c.range,v=d.range,x=p.range,y=u.range},"./node_modules/d3-time/src/year.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r,years:()=>a});var n=i("./node_modules/d3-time/src/interval.js"),o=(0,n.default)(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});o.every=function(e){return isFinite(e=Math.floor(e))&&e>0?(0,n.default)(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i*e)}):null};const r=o;var a=o.range},"./node_modules/d3-timer/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{now:()=>n.now,timer:()=>n.timer,timerFlush:()=>n.timerFlush,timeout:()=>o.default,interval:()=>r.default});var n=i("./node_modules/d3-timer/src/timer.js"),o=i("./node_modules/d3-timer/src/timeout.js"),r=i("./node_modules/d3-timer/src/interval.js")},"./node_modules/d3-timer/src/interval.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-timer/src/timer.js");function o(e,t,i){var o=new n.Timer,r=t;return null==t?(o.restart(e,t,i),o):(t=+t,i=null==i?(0,n.now)():+i,o.restart(function n(a){a+=r,o.restart(n,r+=t,i),e(a)},t,i),o)}},"./node_modules/d3-timer/src/timeout.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-timer/src/timer.js");function o(e,t,i){var o=new n.Timer;return t=null==t?0:+t,o.restart(function(i){o.stop(),e(i+t)},t,i),o}},"./node_modules/d3-timer/src/timer.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{now:()=>h,Timer:()=>g,timer:()=>v,timerFlush:()=>x});var n,o,r=0,a=0,s=0,l=1e3,c=0,d=0,p=0,u="object"==typeof performance&&performance.now?performance:Date,m="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h(){return d||(m(f),d=u.now()+p)}function f(){d=0}function g(){this._call=this._time=this._next=null}function v(e,t,i){var n=new g;return n.restart(e,t,i),n}function x(){h(),++r;for(var e,t=n;t;)(e=d-t._time)>=0&&t._call.call(null,e),t=t._next;--r}function y(){d=(c=u.now())+p,r=a=0;try{x()}finally{r=0,function(){var e,t,i=n,r=1/0;for(;i;)i._call?(r>i._time&&(r=i._time),e=i,i=i._next):(t=i._next,i._next=null,i=e?e._next=t:n=t);o=e,C(r)}(),d=0}}function b(){var e=u.now(),t=e-c;t>l&&(p-=t,c=e)}function C(e){r||(a&&(a=clearTimeout(a)),e-d>24?(e<1/0&&(a=setTimeout(y,e-u.now()-p)),s&&(s=clearInterval(s))):(s||(c=u.now(),s=setInterval(b,l)),r=1,m(y)))}g.prototype=v.prototype={constructor:g,restart:function(e,t,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?h():+i)+(null==t?0:+t),this._next||o===this||(o?o._next=this:n=this,o=this),this._call=e,this._time=i,C()},stop:function(){this._call&&(this._call=null,this._time=1/0,C())}}},"./node_modules/d3-transition/src/active.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-transition/src/transition/index.js"),o=i("./node_modules/d3-transition/src/transition/schedule.js"),r=[null];function a(e,t){var i,a,s=e.__transition;if(s)for(a in t=null==t?null:t+"",s)if((i=s[a]).state>o.SCHEDULED&&i.name===t)return new n.Transition([[e]],r,t,+a);return null}},"./node_modules/d3-transition/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{transition:()=>n.default,active:()=>o.default,interrupt:()=>r.default});i("./node_modules/d3-transition/src/selection/index.js");var n=i("./node_modules/d3-transition/src/transition/index.js"),o=i("./node_modules/d3-transition/src/active.js"),r=i("./node_modules/d3-transition/src/interrupt.js")},"./node_modules/d3-transition/src/interrupt.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e,t){var i,o,r,a=e.__transition,s=!0;if(a){for(r in t=null==t?null:t+"",a)(i=a[r]).name===t?(o=i.state>n.STARTING&&i.state<n.ENDING,i.state=n.ENDED,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete a[r]):s=!1;s&&delete e.__transition}}},"./node_modules/d3-transition/src/selection/index.js":(e,t,i)=>{"use strict";i.r(t);var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-transition/src/selection/interrupt.js"),r=i("./node_modules/d3-transition/src/selection/transition.js");n.selection.prototype.interrupt=o.default,n.selection.prototype.transition=r.default},"./node_modules/d3-transition/src/selection/interrupt.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/interrupt.js");function o(e){return this.each(function(){(0,n.default)(this,e)})}},"./node_modules/d3-transition/src/selection/transition.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/d3-transition/src/transition/index.js"),o=i("./node_modules/d3-transition/src/transition/schedule.js"),r=i("./node_modules/d3-ease/src/index.js"),a=i("./node_modules/d3-timer/src/index.js"),s={time:null,delay:0,duration:250,ease:r.easeCubicInOut};function l(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))return s.time=(0,a.now)(),s;return i}function c(e){var t,i;e instanceof n.Transition?(t=e._id,e=e._name):(t=(0,n.newId)(),(i=s).time=(0,a.now)(),e=null==e?null:e+"");for(var r=this._groups,c=r.length,d=0;d<c;++d)for(var p,u=r[d],m=u.length,h=0;h<m;++h)(p=u[h])&&(0,o.default)(p,e,t,h,u,i||l(p,t));return new n.Transition(r,this._parents,e,t)}},"./node_modules/d3-transition/src/transition/attr.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var n=i("./node_modules/d3-interpolate/src/index.js"),o=i("./node_modules/d3-selection/src/index.js"),r=i("./node_modules/d3-transition/src/transition/tween.js"),a=i("./node_modules/d3-transition/src/transition/interpolate.js");function s(e){return function(){this.removeAttribute(e)}}function l(e){return function(){this.removeAttributeNS(e.space,e.local)}}function c(e,t,i){var n,o,r=i+"";return function(){var a=this.getAttribute(e);return a===r?null:a===n?o:o=t(n=a,i)}}function d(e,t,i){var n,o,r=i+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===r?null:a===n?o:o=t(n=a,i)}}function p(e,t,i){var n,o,r;return function(){var a,s,l=i(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===n&&s===o?r:(o=s,r=t(n=a,l));this.removeAttribute(e)}}function u(e,t,i){var n,o,r;return function(){var a,s,l=i(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===n&&s===o?r:(o=s,r=t(n=a,l));this.removeAttributeNS(e.space,e.local)}}function m(e,t){var i=(0,o.namespace)(e),m="transform"===i?n.interpolateTransformSvg:a.default;return this.attrTween(e,"function"==typeof t?(i.local?u:p)(i,m,(0,r.tweenValue)(this,"attr."+e,t)):null==t?(i.local?l:s)(i):(i.local?d:c)(i,m,t))}},"./node_modules/d3-transition/src/transition/attrTween.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-selection/src/index.js");function o(e,t){var i,n;function o(){var o=t.apply(this,arguments);return o!==n&&(i=(n=o)&&function(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}(e,o)),i}return o._value=t,o}function r(e,t){var i,n;function o(){var o=t.apply(this,arguments);return o!==n&&(i=(n=o)&&function(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}(e,o)),i}return o._value=t,o}function a(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;var a=(0,n.namespace)(e);return this.tween(i,(a.local?o:r)(a,t))}},"./node_modules/d3-transition/src/transition/delay.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e,t){return function(){(0,n.init)(this,e).delay=+t.apply(this,arguments)}}function r(e,t){return t=+t,function(){(0,n.init)(this,e).delay=t}}function a(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?o:r)(t,e)):(0,n.get)(this.node(),t).delay}},"./node_modules/d3-transition/src/transition/duration.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e,t){return function(){(0,n.set)(this,e).duration=+t.apply(this,arguments)}}function r(e,t){return t=+t,function(){(0,n.set)(this,e).duration=t}}function a(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?o:r)(t,e)):(0,n.get)(this.node(),t).duration}},"./node_modules/d3-transition/src/transition/ease.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){(0,n.set)(this,e).ease=t}}(t,e)):(0,n.get)(this.node(),t).ease}},"./node_modules/d3-transition/src/transition/end.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(){var e,t,i=this,o=i._id,r=i.size();return new Promise(function(a,s){var l={value:s},c={value:function(){0==--r&&a()}};i.each(function(){var i=(0,n.set)(this,o),r=i.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),i.on=t})})}},"./node_modules/d3-transition/src/transition/filter.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-transition/src/transition/index.js");function r(e){"function"!=typeof e&&(e=(0,n.matcher)(e));for(var t=this._groups,i=t.length,r=new Array(i),a=0;a<i;++a)for(var s,l=t[a],c=l.length,d=r[a]=[],p=0;p<c;++p)(s=l[p])&&e.call(s,s.__data__,p,l)&&d.push(s);return new o.Transition(r,this._parents,this._name,this._id)}},"./node_modules/d3-transition/src/transition/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{Transition:()=>I,default:()=>_,newId:()=>D});var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-transition/src/transition/attr.js"),r=i("./node_modules/d3-transition/src/transition/attrTween.js"),a=i("./node_modules/d3-transition/src/transition/delay.js"),s=i("./node_modules/d3-transition/src/transition/duration.js"),l=i("./node_modules/d3-transition/src/transition/ease.js"),c=i("./node_modules/d3-transition/src/transition/filter.js"),d=i("./node_modules/d3-transition/src/transition/merge.js"),p=i("./node_modules/d3-transition/src/transition/on.js"),u=i("./node_modules/d3-transition/src/transition/remove.js"),m=i("./node_modules/d3-transition/src/transition/select.js"),h=i("./node_modules/d3-transition/src/transition/selectAll.js"),f=i("./node_modules/d3-transition/src/transition/selection.js"),g=i("./node_modules/d3-transition/src/transition/style.js"),v=i("./node_modules/d3-transition/src/transition/styleTween.js"),x=i("./node_modules/d3-transition/src/transition/text.js"),y=i("./node_modules/d3-transition/src/transition/textTween.js"),b=i("./node_modules/d3-transition/src/transition/transition.js"),C=i("./node_modules/d3-transition/src/transition/tween.js"),S=i("./node_modules/d3-transition/src/transition/end.js"),w=0;function I(e,t,i,n){this._groups=e,this._parents=t,this._name=i,this._id=n}function _(e){return(0,n.selection)().transition(e)}function D(){return++w}var R=n.selection.prototype;I.prototype=_.prototype={constructor:I,select:m.default,selectAll:h.default,filter:c.default,merge:d.default,selection:f.default,transition:b.default,call:R.call,nodes:R.nodes,node:R.node,size:R.size,empty:R.empty,each:R.each,on:p.default,attr:o.default,attrTween:r.default,style:g.default,styleTween:v.default,text:x.default,textTween:y.default,remove:u.default,tween:C.default,delay:a.default,duration:s.default,ease:l.default,end:S.default}},"./node_modules/d3-transition/src/transition/interpolate.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-color/src/index.js"),o=i("./node_modules/d3-interpolate/src/index.js");function r(e,t){var i;return("number"==typeof t?o.interpolateNumber:t instanceof n.color?o.interpolateRgb:(i=(0,n.color)(t))?(t=i,o.interpolateRgb):o.interpolateString)(e,t)}},"./node_modules/d3-transition/src/transition/merge.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/index.js");function o(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,o=t.length,r=i.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var c,d=t[l],p=i[l],u=d.length,m=s[l]=new Array(u),h=0;h<u;++h)(c=d[h]||p[h])&&(m[h]=c);for(;l<o;++l)s[l]=t[l];return new n.Transition(s,this._parents,this._name,this._id)}},"./node_modules/d3-transition/src/transition/on.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e,t){var i=this._id;return arguments.length<2?(0,n.get)(this.node(),i).on.on(e):this.each(function(e,t,i){var o,r,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?n.init:n.set;return function(){var n=a(this,e),s=n.on;s!==o&&(r=(o=s).copy()).on(t,i),n.on=r}}(i,e,t))}},"./node_modules/d3-transition/src/transition/remove.js":(e,t,i)=>{"use strict";function n(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}));var e}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-transition/src/transition/schedule.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{CREATED:()=>s,SCHEDULED:()=>l,STARTING:()=>c,STARTED:()=>d,RUNNING:()=>p,ENDING:()=>u,ENDED:()=>m,default:()=>h,init:()=>f,set:()=>g,get:()=>v});var n=i("./node_modules/d3-dispatch/src/index.js"),o=i("./node_modules/d3-timer/src/index.js"),r=(0,n.dispatch)("start","end","cancel","interrupt"),a=[],s=0,l=1,c=2,d=3,p=4,u=5,m=6;function h(e,t,i,n,h,f){var g=e.__transition;if(g){if(i in g)return}else e.__transition={};!function(e,t,i){var n,r=e.__transition;function a(e){i.state=l,i.timer.restart(s,i.delay,i.time),i.delay<=e&&s(e-i.delay)}function s(a){var u,g,v,x;if(i.state!==l)return f();for(u in r)if((x=r[u]).name===i.name){if(x.state===d)return(0,o.timeout)(s);x.state===p?(x.state=m,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[u]):+u<t&&(x.state=m,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[u])}if((0,o.timeout)(function(){i.state===d&&(i.state=p,i.timer.restart(h,i.delay,i.time),h(a))}),i.state=c,i.on.call("start",e,e.__data__,i.index,i.group),i.state===c){for(i.state=d,n=new Array(v=i.tween.length),u=0,g=-1;u<v;++u)(x=i.tween[u].value.call(e,e.__data__,i.index,i.group))&&(n[++g]=x);n.length=g+1}}function h(t){for(var o=t<i.duration?i.ease.call(null,t/i.duration):(i.timer.restart(f),i.state=u,1),r=-1,a=n.length;++r<a;)n[r].call(e,o);i.state===u&&(i.on.call("end",e,e.__data__,i.index,i.group),f())}function f(){for(var n in i.state=m,i.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=i,i.timer=(0,o.timer)(a,0,i.time)}(e,i,{name:t,index:n,group:h,on:r,tween:a,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:s})}function f(e,t){var i=v(e,t);if(i.state>s)throw new Error("too late; already scheduled");return i}function g(e,t){var i=v(e,t);if(i.state>d)throw new Error("too late; already running");return i}function v(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}},"./node_modules/d3-transition/src/transition/select.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-transition/src/transition/index.js"),r=i("./node_modules/d3-transition/src/transition/schedule.js");function a(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=(0,n.selector)(e));for(var a=this._groups,s=a.length,l=new Array(s),c=0;c<s;++c)for(var d,p,u=a[c],m=u.length,h=l[c]=new Array(m),f=0;f<m;++f)(d=u[f])&&(p=e.call(d,d.__data__,f,u))&&("__data__"in d&&(p.__data__=d.__data__),h[f]=p,(0,r.default)(h[f],t,i,f,h,(0,r.get)(d,i)));return new o.Transition(l,this._parents,t,i)}},"./node_modules/d3-transition/src/transition/selectAll.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-selection/src/index.js"),o=i("./node_modules/d3-transition/src/transition/index.js"),r=i("./node_modules/d3-transition/src/transition/schedule.js");function a(e){var t=this._name,i=this._id;"function"!=typeof e&&(e=(0,n.selectorAll)(e));for(var a=this._groups,s=a.length,l=[],c=[],d=0;d<s;++d)for(var p,u=a[d],m=u.length,h=0;h<m;++h)if(p=u[h]){for(var f,g=e.call(p,p.__data__,h,u),v=(0,r.get)(p,i),x=0,y=g.length;x<y;++x)(f=g[x])&&(0,r.default)(f,t,i,x,g,v);l.push(g),c.push(p)}return new o.Transition(l,c,t,i)}},"./node_modules/d3-transition/src/transition/selection.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-selection/src/index.js").selection.prototype.constructor;function o(){return new n(this._groups,this._parents)}},"./node_modules/d3-transition/src/transition/style.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var n=i("./node_modules/d3-interpolate/src/index.js"),o=i("./node_modules/d3-selection/src/index.js"),r=i("./node_modules/d3-transition/src/transition/schedule.js"),a=i("./node_modules/d3-transition/src/transition/tween.js"),s=i("./node_modules/d3-transition/src/transition/interpolate.js");function l(e){return function(){this.style.removeProperty(e)}}function c(e,t,i){var c="transform"==(e+="")?n.interpolateTransformCss:s.default;return null==t?this.styleTween(e,function(e,t){var i,n,r;return function(){var a=(0,o.style)(this,e),s=(this.style.removeProperty(e),(0,o.style)(this,e));return a===s?null:a===i&&s===n?r:r=t(i=a,n=s)}}(e,c)).on("end.style."+e,l(e)):"function"==typeof t?this.styleTween(e,function(e,t,i){var n,r,a;return function(){var s=(0,o.style)(this,e),l=i(this),c=l+"";return null==l&&(this.style.removeProperty(e),c=l=(0,o.style)(this,e)),s===c?null:s===n&&c===r?a:(r=c,a=t(n=s,l))}}(e,c,(0,a.tweenValue)(this,"style."+e,t))).each(function(e,t){var i,n,o,a,s="style."+t,c="end."+s;return function(){var d=(0,r.set)(this,e),p=d.on,u=null==d.value[s]?a||(a=l(t)):void 0;p===i&&o===u||(n=(i=p).copy()).on(c,o=u),d.on=n}}(this._id,e)):this.styleTween(e,function(e,t,i){var n,r,a=i+"";return function(){var s=(0,o.style)(this,e);return s===a?null:s===n?r:r=t(n=s,i)}}(e,c,t),i).on("end.style."+e,null)}},"./node_modules/d3-transition/src/transition/styleTween.js":(e,t,i)=>{"use strict";function n(e,t,i){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,function(e,t,i){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t,i){return function(n){this.style.setProperty(e,t.call(this,n),i)}}(e,r,i)),n}return r._value=t,r}(e,t,null==i?"":i))}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-transition/src/transition/text.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});var n=i("./node_modules/d3-transition/src/transition/tween.js");function o(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}((0,n.tweenValue)(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))}},"./node_modules/d3-transition/src/transition/textTween.js":(e,t,i)=>{"use strict";function n(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,i;function n(){var n=e.apply(this,arguments);return n!==i&&(t=(i=n)&&function(e){return function(t){this.textContent=e.call(this,t)}}(n)),t}return n._value=e,n}(e))}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-transition/src/transition/transition.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i("./node_modules/d3-transition/src/transition/index.js"),o=i("./node_modules/d3-transition/src/transition/schedule.js");function r(){for(var e=this._name,t=this._id,i=(0,n.newId)(),r=this._groups,a=r.length,s=0;s<a;++s)for(var l,c=r[s],d=c.length,p=0;p<d;++p)if(l=c[p]){var u=(0,o.get)(l,t);(0,o.default)(l,e,i,p,c,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new n.Transition(r,this._parents,e,i)}},"./node_modules/d3-transition/src/transition/tween.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a,tweenValue:()=>s});var n=i("./node_modules/d3-transition/src/transition/schedule.js");function o(e,t){var i,o;return function(){var r=(0,n.set)(this,e),a=r.tween;if(a!==i)for(var s=0,l=(o=i=a).length;s<l;++s)if(o[s].name===t){(o=o.slice()).splice(s,1);break}r.tween=o}}function r(e,t,i){var o,r;if("function"!=typeof i)throw new Error;return function(){var a=(0,n.set)(this,e),s=a.tween;if(s!==o){r=(o=s).slice();for(var l={name:t,value:i},c=0,d=r.length;c<d;++c)if(r[c].name===t){r[c]=l;break}c===d&&r.push(l)}a.tween=r}}function a(e,t){var i=this._id;if(e+="",arguments.length<2){for(var a,s=(0,n.get)(this.node(),i).tween,l=0,c=s.length;l<c;++l)if((a=s[l]).name===e)return a.value;return null}return this.each((null==t?o:r)(i,e,t))}function s(e,t,i){var o=e._id;return e.each(function(){var e=(0,n.set)(this,o);(e.value||(e.value={}))[t]=i.apply(this,arguments)}),function(e){return(0,n.get)(e,o).value[t]}}},"./node_modules/d3-voronoi/src/Beach.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{removeBeach:()=>u,addBeach:()=>m});var n=i("./node_modules/d3-voronoi/src/RedBlackTree.js"),o=i("./node_modules/d3-voronoi/src/Cell.js"),r=i("./node_modules/d3-voronoi/src/Circle.js"),a=i("./node_modules/d3-voronoi/src/Edge.js"),s=i("./node_modules/d3-voronoi/src/Diagram.js"),l=[];function c(){(0,n.RedBlackNode)(this),this.edge=this.site=this.circle=null}function d(e){var t=l.pop()||new c;return t.site=e,t}function p(e){(0,r.detachCircle)(e),s.beaches.remove(e),l.push(e),(0,n.RedBlackNode)(e)}function u(e){var t=e.circle,i=t.x,n=t.cy,o=[i,n],l=e.P,c=e.N,d=[e];p(e);for(var u=l;u.circle&&Math.abs(i-u.circle.x)<s.epsilon&&Math.abs(n-u.circle.cy)<s.epsilon;)l=u.P,d.unshift(u),p(u),u=l;d.unshift(u),(0,r.detachCircle)(u);for(var m=c;m.circle&&Math.abs(i-m.circle.x)<s.epsilon&&Math.abs(n-m.circle.cy)<s.epsilon;)c=m.N,d.push(m),p(m),m=c;d.push(m),(0,r.detachCircle)(m);var h,f=d.length;for(h=1;h<f;++h)m=d[h],u=d[h-1],(0,a.setEdgeEnd)(m.edge,u.site,m.site,o);u=d[0],(m=d[f-1]).edge=(0,a.createEdge)(u.site,m.site,null,o),(0,r.attachCircle)(u),(0,r.attachCircle)(m)}function m(e){for(var t,i,n,l,c=e[0],p=e[1],u=s.beaches._;u;)if((n=h(u,p)-c)>s.epsilon)u=u.L;else{if(!((l=c-f(u,p))>s.epsilon)){n>-s.epsilon?(t=u.P,i=u):l>-s.epsilon?(t=u,i=u.N):t=i=u;break}if(!u.R){t=u;break}u=u.R}(0,o.createCell)(e);var m=d(e);if(s.beaches.insert(t,m),t||i){if(t===i)return(0,r.detachCircle)(t),i=d(t.site),s.beaches.insert(m,i),m.edge=i.edge=(0,a.createEdge)(t.site,m.site),(0,r.attachCircle)(t),void(0,r.attachCircle)(i);if(i){(0,r.detachCircle)(t),(0,r.detachCircle)(i);var g=t.site,v=g[0],x=g[1],y=e[0]-v,b=e[1]-x,C=i.site,S=C[0]-v,w=C[1]-x,I=2*(y*w-b*S),_=y*y+b*b,D=S*S+w*w,R=[(w*_-b*D)/I+v,(y*D-S*_)/I+x];(0,a.setEdgeEnd)(i.edge,g,C,R),m.edge=(0,a.createEdge)(g,e,null,R),i.edge=(0,a.createEdge)(e,C,null,R),(0,r.attachCircle)(t),(0,r.attachCircle)(i)}else m.edge=(0,a.createEdge)(t.site,m.site)}}function h(e,t){var i=e.site,n=i[0],o=i[1],r=o-t;if(!r)return n;var a=e.P;if(!a)return-1/0;var s=(i=a.site)[0],l=i[1],c=l-t;if(!c)return s;var d=s-n,p=1/r-1/c,u=d/c;return p?(-u+Math.sqrt(u*u-2*p*(d*d/(-2*c)-l+c/2+o-r/2)))/p+n:(n+s)/2}function f(e,t){var i=e.N;if(i)return h(i,t);var n=e.site;return n[1]===t?n[0]:1/0}},"./node_modules/d3-voronoi/src/Cell.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{createCell:()=>r,cellHalfedgeStart:()=>s,cellHalfedgeEnd:()=>l,sortCellHalfedges:()=>c,clipCells:()=>d});var n=i("./node_modules/d3-voronoi/src/Edge.js"),o=i("./node_modules/d3-voronoi/src/Diagram.js");function r(e){return o.cells[e.index]={site:e,halfedges:[]}}function a(e,t){var i=e.site,n=t.left,o=t.right;return i===o&&(o=n,n=i),o?Math.atan2(o[1]-n[1],o[0]-n[0]):(i===n?(n=t[1],o=t[0]):(n=t[0],o=t[1]),Math.atan2(n[0]-o[0],o[1]-n[1]))}function s(e,t){return t[+(t.left!==e.site)]}function l(e,t){return t[+(t.left===e.site)]}function c(){for(var e,t,i,n,r=0,s=o.cells.length;r<s;++r)if((e=o.cells[r])&&(n=(t=e.halfedges).length)){var l=new Array(n),c=new Array(n);for(i=0;i<n;++i)l[i]=i,c[i]=a(e,o.edges[t[i]]);for(l.sort(function(e,t){return c[t]-c[e]}),i=0;i<n;++i)c[i]=t[l[i]];for(i=0;i<n;++i)t[i]=c[i]}}function d(e,t,i,r){var a,c,d,p,u,m,h,f,g,v,x,y,b=o.cells.length,C=!0;for(a=0;a<b;++a)if(c=o.cells[a]){for(d=c.site,p=(u=c.halfedges).length;p--;)o.edges[u[p]]||u.splice(p,1);for(p=0,m=u.length;p<m;)x=(v=l(c,o.edges[u[p]]))[0],y=v[1],f=(h=s(c,o.edges[u[++p%m]]))[0],g=h[1],(Math.abs(x-f)>o.epsilon||Math.abs(y-g)>o.epsilon)&&(u.splice(p,0,o.edges.push((0,n.createBorderEdge)(d,v,Math.abs(x-e)<o.epsilon&&r-y>o.epsilon?[e,Math.abs(f-e)<o.epsilon?g:r]:Math.abs(y-r)<o.epsilon&&i-x>o.epsilon?[Math.abs(g-r)<o.epsilon?f:i,r]:Math.abs(x-i)<o.epsilon&&y-t>o.epsilon?[i,Math.abs(f-i)<o.epsilon?g:t]:Math.abs(y-t)<o.epsilon&&x-e>o.epsilon?[Math.abs(g-t)<o.epsilon?f:e,t]:null))-1),++m);m&&(C=!1)}if(C){var S,w,I,_=1/0;for(a=0,C=null;a<b;++a)(c=o.cells[a])&&(I=(S=(d=c.site)[0]-e)*S+(w=d[1]-t)*w)<_&&(_=I,C=c);if(C){var D=[e,t],R=[e,r],A=[i,r],T=[i,t];C.halfedges.push(o.edges.push((0,n.createBorderEdge)(d=C.site,D,R))-1,o.edges.push((0,n.createBorderEdge)(d,R,A))-1,o.edges.push((0,n.createBorderEdge)(d,A,T))-1,o.edges.push((0,n.createBorderEdge)(d,T,D))-1)}}for(a=0;a<b;++a)(c=o.cells[a])&&(c.halfedges.length||delete o.cells[a])}},"./node_modules/d3-voronoi/src/Circle.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{firstCircle:()=>n,attachCircle:()=>l,detachCircle:()=>c});var n,o=i("./node_modules/d3-voronoi/src/RedBlackTree.js"),r=i("./node_modules/d3-voronoi/src/Diagram.js"),a=[];function s(){(0,o.RedBlackNode)(this),this.x=this.y=this.arc=this.site=this.cy=null}function l(e){var t=e.P,i=e.N;if(t&&i){var o=t.site,l=e.site,c=i.site;if(o!==c){var d=l[0],p=l[1],u=o[0]-d,m=o[1]-p,h=c[0]-d,f=c[1]-p,g=2*(u*f-m*h);if(!(g>=-r.epsilon2)){var v=u*u+m*m,x=h*h+f*f,y=(f*v-m*x)/g,b=(u*x-h*v)/g,C=a.pop()||new s;C.arc=e,C.site=l,C.x=y+d,C.y=(C.cy=b+p)+Math.sqrt(y*y+b*b),e.circle=C;for(var S=null,w=r.circles._;w;)if(C.y<w.y||C.y===w.y&&C.x<=w.x){if(!w.L){S=w.P;break}w=w.L}else{if(!w.R){S=w;break}w=w.R}r.circles.insert(S,C),S||(n=C)}}}}function c(e){var t=e.circle;t&&(t.P||(n=t.N),r.circles.remove(t),a.push(t),(0,o.RedBlackNode)(t),e.circle=null)}},"./node_modules/d3-voronoi/src/Diagram.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{epsilon:()=>u,epsilon2:()=>m,beaches:()=>n,cells:()=>o,circles:()=>r,edges:()=>a,default:()=>f});var n,o,r,a,s=i("./node_modules/d3-voronoi/src/Beach.js"),l=i("./node_modules/d3-voronoi/src/Cell.js"),c=i("./node_modules/d3-voronoi/src/Circle.js"),d=i("./node_modules/d3-voronoi/src/Edge.js"),p=i("./node_modules/d3-voronoi/src/RedBlackTree.js"),u=1e-6,m=1e-12;function h(e,t){return t[1]-e[1]||t[0]-e[0]}function f(e,t){var i,u,m,f=e.sort(h).pop();for(a=[],o=new Array(e.length),n=new p.default,r=new p.default;;)if(m=c.firstCircle,f&&(!m||f[1]<m.y||f[1]===m.y&&f[0]<m.x))f[0]===i&&f[1]===u||((0,s.addBeach)(f),i=f[0],u=f[1]),f=e.pop();else{if(!m)break;(0,s.removeBeach)(m.arc)}if((0,l.sortCellHalfedges)(),t){var g=+t[0][0],v=+t[0][1],x=+t[1][0],y=+t[1][1];(0,d.clipEdges)(g,v,x,y),(0,l.clipCells)(g,v,x,y)}this.edges=a,this.cells=o,n=r=a=o=null}f.prototype={constructor:f,polygons:function(){var e=this.edges;return this.cells.map(function(t){var i=t.halfedges.map(function(i){return(0,l.cellHalfedgeStart)(t,e[i])});return i.data=t.site.data,i})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(i,n){if(r=(o=i.halfedges).length)for(var o,r,a,s,l,c,d=i.site,p=-1,u=t[o[r-1]],m=u.left===d?u.right:u.left;++p<r;)a=m,m=(u=t[o[p]]).left===d?u.right:u.left,a&&m&&n<a.index&&n<m.index&&(l=a,c=m,((s=d)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&e.push([d.data,a.data,m.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,i){for(var n,o,r=this,a=r._found||0,s=r.cells.length;!(o=r.cells[a]);)if(++a>=s)return null;var l=e-o.site[0],c=t-o.site[1],d=l*l+c*c;do{o=r.cells[n=a],a=null,o.halfedges.forEach(function(i){var n=r.edges[i],s=n.left;if(s!==o.site&&s||(s=n.right)){var l=e-s[0],c=t-s[1],p=l*l+c*c;p<d&&(d=p,a=s.index)}})}while(null!==a);return r._found=n,null==i||d<=i*i?o.site:null}}},"./node_modules/d3-voronoi/src/Edge.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{createEdge:()=>o,createBorderEdge:()=>r,setEdgeEnd:()=>a,clipEdges:()=>c});var n=i("./node_modules/d3-voronoi/src/Diagram.js");function o(e,t,i,o){var r=[null,null],s=n.edges.push(r)-1;return r.left=e,r.right=t,i&&a(r,e,t,i),o&&a(r,t,e,o),n.cells[e.index].halfedges.push(s),n.cells[t.index].halfedges.push(s),r}function r(e,t,i){var n=[t,i];return n.left=e,n}function a(e,t,i,n){e[0]||e[1]?e.left===i?e[1]=n:e[0]=n:(e[0]=n,e.left=t,e.right=i)}function s(e,t,i,n,o){var r,a=e[0],s=e[1],l=a[0],c=a[1],d=0,p=1,u=s[0]-l,m=s[1]-c;if(r=t-l,u||!(r>0)){if(r/=u,u<0){if(r<d)return;r<p&&(p=r)}else if(u>0){if(r>p)return;r>d&&(d=r)}if(r=n-l,u||!(r<0)){if(r/=u,u<0){if(r>p)return;r>d&&(d=r)}else if(u>0){if(r<d)return;r<p&&(p=r)}if(r=i-c,m||!(r>0)){if(r/=m,m<0){if(r<d)return;r<p&&(p=r)}else if(m>0){if(r>p)return;r>d&&(d=r)}if(r=o-c,m||!(r<0)){if(r/=m,m<0){if(r>p)return;r>d&&(d=r)}else if(m>0){if(r<d)return;r<p&&(p=r)}return!(d>0||p<1)||(d>0&&(e[0]=[l+d*u,c+d*m]),p<1&&(e[1]=[l+p*u,c+p*m]),!0)}}}}}function l(e,t,i,n,o){var r=e[1];if(r)return!0;var a,s,l=e[0],c=e.left,d=e.right,p=c[0],u=c[1],m=d[0],h=d[1],f=(p+m)/2,g=(u+h)/2;if(h===u){if(f<t||f>=n)return;if(p>m){if(l){if(l[1]>=o)return}else l=[f,i];r=[f,o]}else{if(l){if(l[1]<i)return}else l=[f,o];r=[f,i]}}else if(s=g-(a=(p-m)/(h-u))*f,a<-1||a>1)if(p>m){if(l){if(l[1]>=o)return}else l=[(i-s)/a,i];r=[(o-s)/a,o]}else{if(l){if(l[1]<i)return}else l=[(o-s)/a,o];r=[(i-s)/a,i]}else if(u<h){if(l){if(l[0]>=n)return}else l=[t,a*t+s];r=[n,a*n+s]}else{if(l){if(l[0]<t)return}else l=[n,a*n+s];r=[t,a*t+s]}return e[0]=l,e[1]=r,!0}function c(e,t,i,o){for(var r,a=n.edges.length;a--;)l(r=n.edges[a],e,t,i,o)&&s(r,e,t,i,o)&&(Math.abs(r[0][0]-r[1][0])>n.epsilon||Math.abs(r[0][1]-r[1][1])>n.epsilon)||delete n.edges[a]}},"./node_modules/d3-voronoi/src/RedBlackTree.js":(e,t,i)=>{"use strict";function n(){this._=null}function o(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function r(e,t){var i=t,n=t.R,o=i.U;o?o.L===i?o.L=n:o.R=n:e._=n,n.U=o,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function a(e,t){var i=t,n=t.L,o=i.U;o?o.L===i?o.L=n:o.R=n:e._=n,n.U=o,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function s(e){for(;e.L;)e=e.L;return e}i.r(t),i.d(t,{RedBlackNode:()=>o,default:()=>l}),n.prototype={constructor:n,insert:function(e,t){var i,n,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;i=e}else this._?(e=s(this._),t.P=null,t.N=e,e.P=e.L=t,i=e):(t.P=t.N=null,this._=t,i=null);for(t.L=t.R=null,t.U=i,t.C=!0,e=t;i&&i.C;)i===(n=i.U).L?(o=n.R)&&o.C?(i.C=o.C=!1,n.C=!0,e=n):(e===i.R&&(r(this,i),i=(e=i).U),i.C=!1,n.C=!0,a(this,n)):(o=n.L)&&o.C?(i.C=o.C=!1,n.C=!0,e=n):(e===i.L&&(a(this,i),i=(e=i).U),i.C=!1,n.C=!0,r(this,n)),i=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,i,n,o=e.U,l=e.L,c=e.R;if(i=l?c?s(c):l:c,o?o.L===e?o.L=i:o.R=i:this._=i,l&&c?(n=i.C,i.C=e.C,i.L=l,l.U=i,i!==c?(o=i.U,i.U=e.U,e=i.R,o.L=e,i.R=c,c.U=i):(i.U=o,o=i,e=i.R)):(n=e.C,e=i),e&&(e.U=o),!n)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===o.L){if((t=o.R).C&&(t.C=!1,o.C=!0,r(this,o),t=o.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,a(this,t),t=o.R),t.C=o.C,o.C=t.R.C=!1,r(this,o),e=this._;break}}else if((t=o.L).C&&(t.C=!1,o.C=!0,a(this,o),t=o.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,r(this,t),t=o.L),t.C=o.C,o.C=t.L.C=!1,a(this,o),e=this._;break}t.C=!0,e=o,o=o.U}while(!e.C);e&&(e.C=!1)}}};const l=n},"./node_modules/d3-voronoi/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-voronoi/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{voronoi:()=>n.default});var n=i("./node_modules/d3-voronoi/src/voronoi.js")},"./node_modules/d3-voronoi/src/point.js":(e,t,i)=>{"use strict";function n(e){return e[0]}function o(e){return e[1]}i.r(t),i.d(t,{x:()=>n,y:()=>o})},"./node_modules/d3-voronoi/src/voronoi.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>a});var n=i("./node_modules/d3-voronoi/src/constant.js"),o=i("./node_modules/d3-voronoi/src/point.js"),r=i("./node_modules/d3-voronoi/src/Diagram.js");function a(){var e=o.x,t=o.y,i=null;function a(n){return new r.default(n.map(function(i,o){var a=[Math.round(e(i,o,n)/r.epsilon)*r.epsilon,Math.round(t(i,o,n)/r.epsilon)*r.epsilon];return a.index=o,a.data=i,a}),i)}return a.polygons=function(e){return a(e).polygons()},a.links=function(e){return a(e).links()},a.triangles=function(e){return a(e).triangles()},a.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,n.default)(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,n.default)(+e),a):t},a.extent=function(e){return arguments.length?(i=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],a):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},a.size=function(e){return arguments.length?(i=null==e?null:[[0,0],[+e[0],+e[1]]],a):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},a}},"./node_modules/d3-zoom/src/constant.js":(e,t,i)=>{"use strict";function n(e){return function(){return e}}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-zoom/src/event.js":(e,t,i)=>{"use strict";function n(e,t,i){this.target=e,this.type=t,this.transform=i}i.r(t),i.d(t,{default:()=>n})},"./node_modules/d3-zoom/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{zoom:()=>n.default,zoomTransform:()=>o.default,zoomIdentity:()=>o.identity});var n=i("./node_modules/d3-zoom/src/zoom.js"),o=i("./node_modules/d3-zoom/src/transform.js")},"./node_modules/d3-zoom/src/noevent.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{nopropagation:()=>o,default:()=>r});var n=i("./node_modules/d3-selection/src/index.js");function o(){n.event.stopImmediatePropagation()}function r(){n.event.preventDefault(),n.event.stopImmediatePropagation()}},"./node_modules/d3-zoom/src/transform.js":(e,t,i)=>{"use strict";function n(e,t,i){this.k=e,this.x=t,this.y=i}i.r(t),i.d(t,{Transform:()=>n,identity:()=>o,default:()=>r}),n.prototype={constructor:n,scale:function(e){return 1===e?this:new n(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new n(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var o=new n(1,0,0);function r(e){for(;!e.__zoom;)if(!(e=e.parentNode))return o;return e.__zoom}r.prototype=n.prototype},"./node_modules/d3-zoom/src/zoom.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>x});var n=i("./node_modules/d3-dispatch/src/index.js"),o=i("./node_modules/d3-drag/src/index.js"),r=i("./node_modules/d3-interpolate/src/index.js"),a=i("./node_modules/d3-selection/src/index.js"),s=i("./node_modules/d3-transition/src/index.js"),l=i("./node_modules/d3-zoom/src/constant.js"),c=i("./node_modules/d3-zoom/src/event.js"),d=i("./node_modules/d3-zoom/src/transform.js"),p=i("./node_modules/d3-zoom/src/noevent.js");function u(){return!a.event.ctrlKey&&!a.event.button}function m(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function h(){return this.__zoom||d.identity}function f(){return-a.event.deltaY*(1===a.event.deltaMode?.05:a.event.deltaMode?1:.002)}function g(){return navigator.maxTouchPoints||"ontouchstart"in this}function v(e,t,i){var n=e.invertX(t[0][0])-i[0][0],o=e.invertX(t[1][0])-i[1][0],r=e.invertY(t[0][1])-i[0][1],a=e.invertY(t[1][1])-i[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a))}function x(){var e,t,i=u,x=m,y=v,b=f,C=g,S=[0,1/0],w=[[-1/0,-1/0],[1/0,1/0]],I=250,_=r.interpolateZoom,D=(0,n.dispatch)("start","zoom","end"),R=500,A=150,T=0;function F(e){e.property("__zoom",h).on("wheel.zoom",N).on("mousedown.zoom",V).on("dblclick.zoom",L).filter(C).on("touchstart.zoom",B).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",G).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(e,t){return(t=Math.max(S[0],Math.min(S[1],t)))===e.k?e:new d.Transform(t,e.x,e.y)}function M(e,t,i){var n=t[0]-i[0]*e.k,o=t[1]-i[1]*e.k;return n===e.x&&o===e.y?e:new d.Transform(e.k,n,o)}function O(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function k(e,t,i){e.on("start.zoom",function(){j(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).end()}).tween("zoom",function(){var e=this,n=arguments,o=j(e,n),r=x.apply(e,n),a=null==i?O(r):"function"==typeof i?i.apply(e,n):i,s=Math.max(r[1][0]-r[0][0],r[1][1]-r[0][1]),l=e.__zoom,c="function"==typeof t?t.apply(e,n):t,p=_(l.invert(a).concat(s/l.k),c.invert(a).concat(s/c.k));return function(e){if(1===e)e=c;else{var t=p(e),i=s/t[2];e=new d.Transform(i,a[0]-t[0]*i,a[1]-t[1]*i)}o.zoom(null,e)}})}function j(e,t,i){return!i&&e.__zooming||new P(e,t)}function P(e,t){this.that=e,this.args=t,this.active=0,this.extent=x.apply(e,t),this.taps=0}function N(){if(i.apply(this,arguments)){var e=j(this,arguments),t=this.__zoom,n=Math.max(S[0],Math.min(S[1],t.k*Math.pow(2,b.apply(this,arguments)))),o=(0,a.mouse)(this);if(e.wheel)e.mouse[0][0]===o[0]&&e.mouse[0][1]===o[1]||(e.mouse[1]=t.invert(e.mouse[0]=o)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[o,t.invert(o)],(0,s.interrupt)(this),e.start()}(0,p.default)(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},A),e.zoom("mouse",y(M(E(t,n),e.mouse[0],e.mouse[1]),e.extent,w))}}function V(){if(!t&&i.apply(this,arguments)){var e=j(this,arguments,!0),n=(0,a.select)(a.event.view).on("mousemove.zoom",function(){if((0,p.default)(),!e.moved){var t=a.event.clientX-l,i=a.event.clientY-c;e.moved=t*t+i*i>T}e.zoom("mouse",y(M(e.that.__zoom,e.mouse[0]=(0,a.mouse)(e.that),e.mouse[1]),e.extent,w))},!0).on("mouseup.zoom",function(){n.on("mousemove.zoom mouseup.zoom",null),(0,o.dragEnable)(a.event.view,e.moved),(0,p.default)(),e.end()},!0),r=(0,a.mouse)(this),l=a.event.clientX,c=a.event.clientY;(0,o.dragDisable)(a.event.view),(0,p.nopropagation)(),e.mouse=[r,this.__zoom.invert(r)],(0,s.interrupt)(this),e.start()}}function L(){if(i.apply(this,arguments)){var e=this.__zoom,t=(0,a.mouse)(this),n=e.invert(t),o=e.k*(a.event.shiftKey?.5:2),r=y(M(E(e,o),t,n),x.apply(this,arguments),w);(0,p.default)(),I>0?(0,a.select)(this).transition().duration(I).call(k,r,t):(0,a.select)(this).call(F.transform,r)}}function B(){if(i.apply(this,arguments)){var t,n,o,r,l=a.event.touches,c=l.length,d=j(this,arguments,a.event.changedTouches.length===c);for((0,p.nopropagation)(),n=0;n<c;++n)o=l[n],r=[r=(0,a.touch)(this,l,o.identifier),this.__zoom.invert(r),o.identifier],d.touch0?d.touch1||d.touch0[2]===r[2]||(d.touch1=r,d.taps=0):(d.touch0=r,t=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(d.taps<2&&(e=setTimeout(function(){e=null},R)),(0,s.interrupt)(this),d.start())}}function $(){if(this.__zooming){var t,i,n,o,r=j(this,arguments),s=a.event.changedTouches,l=s.length;for((0,p.default)(),e&&(e=clearTimeout(e)),r.taps=0,t=0;t<l;++t)i=s[t],n=(0,a.touch)(this,s,i.identifier),r.touch0&&r.touch0[2]===i.identifier?r.touch0[0]=n:r.touch1&&r.touch1[2]===i.identifier&&(r.touch1[0]=n);if(i=r.that.__zoom,r.touch1){var c=r.touch0[0],d=r.touch0[1],u=r.touch1[0],m=r.touch1[1],h=(h=u[0]-c[0])*h+(h=u[1]-c[1])*h,f=(f=m[0]-d[0])*f+(f=m[1]-d[1])*f;i=E(i,Math.sqrt(h/f)),n=[(c[0]+u[0])/2,(c[1]+u[1])/2],o=[(d[0]+m[0])/2,(d[1]+m[1])/2]}else{if(!r.touch0)return;n=r.touch0[0],o=r.touch0[1]}r.zoom("touch",y(M(i,n,o),r.extent,w))}}function G(){if(this.__zooming){var e,i,n=j(this,arguments),o=a.event.changedTouches,r=o.length;for((0,p.nopropagation)(),t&&clearTimeout(t),t=setTimeout(function(){t=null},R),e=0;e<r;++e)i=o[e],n.touch0&&n.touch0[2]===i.identifier?delete n.touch0:n.touch1&&n.touch1[2]===i.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),2===n.taps){var s=(0,a.select)(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return F.transform=function(e,t,i){var n=e.selection?e.selection():e;n.property("__zoom",h),e!==n?k(e,t,i):n.interrupt().each(function(){j(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},F.scaleBy=function(e,t,i){F.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},i)},F.scaleTo=function(e,t,i){F.transform(e,function(){var e=x.apply(this,arguments),n=this.__zoom,o=null==i?O(e):"function"==typeof i?i.apply(this,arguments):i,r=n.invert(o),a="function"==typeof t?t.apply(this,arguments):t;return y(M(E(n,a),o,r),e,w)},i)},F.translateBy=function(e,t,i){F.transform(e,function(){return y(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof i?i.apply(this,arguments):i),x.apply(this,arguments),w)})},F.translateTo=function(e,t,i,n){F.transform(e,function(){var e=x.apply(this,arguments),o=this.__zoom,r=null==n?O(e):"function"==typeof n?n.apply(this,arguments):n;return y(d.identity.translate(r[0],r[1]).scale(o.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof i?-i.apply(this,arguments):-i),e,w)},n)},P.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){(0,a.customEvent)(new c.default(F,e,this.that.__zoom),D.apply,D,[e,this.that,this.args])}},F.wheelDelta=function(e){return arguments.length?(b="function"==typeof e?e:(0,l.default)(+e),F):b},F.filter=function(e){return arguments.length?(i="function"==typeof e?e:(0,l.default)(!!e),F):i},F.touchable=function(e){return arguments.length?(C="function"==typeof e?e:(0,l.default)(!!e),F):C},F.extent=function(e){return arguments.length?(x="function"==typeof e?e:(0,l.default)([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),F):x},F.scaleExtent=function(e){return arguments.length?(S[0]=+e[0],S[1]=+e[1],F):[S[0],S[1]]},F.translateExtent=function(e){return arguments.length?(w[0][0]=+e[0][0],w[1][0]=+e[1][0],w[0][1]=+e[0][1],w[1][1]=+e[1][1],F):[[w[0][0],w[0][1]],[w[1][0],w[1][1]]]},F.constrain=function(e){return arguments.length?(y=e,F):y},F.duration=function(e){return arguments.length?(I=+e,F):I},F.interpolate=function(e){return arguments.length?(_=e,F):_},F.on=function(){var e=D.on.apply(D,arguments);return e===D?F:e},F.clickDistance=function(e){return arguments.length?(T=(e=+e)*e,F):Math.sqrt(T)},F}},"./node_modules/d3/dist/package.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{name:()=>n,version:()=>o,description:()=>r,keywords:()=>a,homepage:()=>s,license:()=>l,author:()=>c,main:()=>d,unpkg:()=>p,jsdelivr:()=>u,module:()=>m,repository:()=>h,files:()=>f,scripts:()=>g,devDependencies:()=>v,dependencies:()=>x});var n="d3",o="5.15.0",r="Data-Driven Documents",a=["dom","visualization","svg","animation","canvas"],s="https://d3js.org",l="BSD-3-Clause",c={name:"Mike Bostock",url:"https://bost.ocks.org/mike"},d="dist/d3.node.js",p="dist/d3.min.js",u="dist/d3.min.js",m="index.js",h={type:"git",url:"https://github.com/d3/d3.git"},f=["dist/**/*.js","index.js"],g={pretest:"rimraf dist && mkdir dist && json2module package.json > dist/package.js && rollup -c",test:"tape 'test/**/*-test.js'",prepublishOnly:"yarn test",postpublish:'git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/dist/d3.js d3.v5.js && cp ../d3/dist/d3.min.js d3.v5.min.js && git add d3.v5.js d3.v5.min.js && git commit -m "d3 ${npm_package_version}" && git push && cd - && cd ../d3-bower && git pull && cp ../d3/LICENSE ../d3/README.md ../d3/dist/d3.js ../d3/dist/d3.min.js . && git add -- LICENSE README.md d3.js d3.min.js && git commit -m "${npm_package_version}" && git tag -am "${npm_package_version}" v${npm_package_version} && git push && git push --tags && cd - && zip -j dist/d3.zip -- LICENSE README.md API.md CHANGES.md dist/d3.js dist/d3.min.js'},v={json2module:"0.0",rimraf:"2",rollup:"1","rollup-plugin-ascii":"0.0","rollup-plugin-node-resolve":"3","rollup-plugin-terser":"5",tape:"4"},x={"d3-array":"1","d3-axis":"1","d3-brush":"1","d3-chord":"1","d3-collection":"1","d3-color":"1","d3-contour":"1","d3-dispatch":"1","d3-drag":"1","d3-dsv":"1","d3-ease":"1","d3-fetch":"1","d3-force":"1","d3-format":"1","d3-geo":"1","d3-hierarchy":"1","d3-interpolate":"1","d3-path":"1","d3-polygon":"1","d3-quadtree":"1","d3-random":"1","d3-scale":"2","d3-scale-chromatic":"1","d3-selection":"1","d3-shape":"1","d3-time":"1","d3-time-format":"2","d3-timer":"1","d3-transition":"1","d3-voronoi":"1","d3-zoom":"1"}},"./node_modules/d3/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{version:()=>n.version});var n=i("./node_modules/d3/dist/package.js"),o=i("./node_modules/d3-array/src/index.js"),r={};for(const P in o)["default","version"].indexOf(P)<0&&(r[P]=()=>o[P]);i.d(t,r);var a=i("./node_modules/d3-axis/src/index.js");r={};for(const P in a)["default","version"].indexOf(P)<0&&(r[P]=()=>a[P]);i.d(t,r);var s=i("./node_modules/d3-brush/src/index.js");r={};for(const P in s)["default","version"].indexOf(P)<0&&(r[P]=()=>s[P]);i.d(t,r);var l=i("./node_modules/d3-chord/src/index.js");r={};for(const P in l)["default","version"].indexOf(P)<0&&(r[P]=()=>l[P]);i.d(t,r);var c=i("./node_modules/d3-collection/src/index.js");r={};for(const P in c)["default","version"].indexOf(P)<0&&(r[P]=()=>c[P]);i.d(t,r);var d=i("./node_modules/d3-color/src/index.js");r={};for(const P in d)["default","version"].indexOf(P)<0&&(r[P]=()=>d[P]);i.d(t,r);var p=i("./node_modules/d3-contour/src/index.js");r={};for(const P in p)["default","version"].indexOf(P)<0&&(r[P]=()=>p[P]);i.d(t,r);var u=i("./node_modules/d3-dispatch/src/index.js");r={};for(const P in u)["default","version"].indexOf(P)<0&&(r[P]=()=>u[P]);i.d(t,r);var m=i("./node_modules/d3-drag/src/index.js");r={};for(const P in m)["default","version"].indexOf(P)<0&&(r[P]=()=>m[P]);i.d(t,r);var h=i("./node_modules/d3-dsv/src/index.js");r={};for(const P in h)["default","version"].indexOf(P)<0&&(r[P]=()=>h[P]);i.d(t,r);var f=i("./node_modules/d3-ease/src/index.js");r={};for(const P in f)["default","version"].indexOf(P)<0&&(r[P]=()=>f[P]);i.d(t,r);var g=i("./node_modules/d3-fetch/src/index.js");r={};for(const P in g)["default","version"].indexOf(P)<0&&(r[P]=()=>g[P]);i.d(t,r);var v=i("./node_modules/d3-force/src/index.js");r={};for(const P in v)["default","version"].indexOf(P)<0&&(r[P]=()=>v[P]);i.d(t,r);var x=i("./node_modules/d3-format/src/index.js");r={};for(const P in x)["default","version"].indexOf(P)<0&&(r[P]=()=>x[P]);i.d(t,r);var y=i("./node_modules/d3-geo/src/index.js");r={};for(const P in y)["default","version"].indexOf(P)<0&&(r[P]=()=>y[P]);i.d(t,r);var b=i("./node_modules/d3-hierarchy/src/index.js");r={};for(const P in b)["default","version"].indexOf(P)<0&&(r[P]=()=>b[P]);i.d(t,r);var C=i("./node_modules/d3-interpolate/src/index.js");r={};for(const P in C)["default","version"].indexOf(P)<0&&(r[P]=()=>C[P]);i.d(t,r);var S=i("./node_modules/d3-path/src/index.js");r={};for(const P in S)["default","version"].indexOf(P)<0&&(r[P]=()=>S[P]);i.d(t,r);var w=i("./node_modules/d3-polygon/src/index.js");r={};for(const P in w)["default","version"].indexOf(P)<0&&(r[P]=()=>w[P]);i.d(t,r);var I=i("./node_modules/d3-quadtree/src/index.js");r={};for(const P in I)["default","version"].indexOf(P)<0&&(r[P]=()=>I[P]);i.d(t,r);var _=i("./node_modules/d3-random/src/index.js");r={};for(const P in _)["default","version"].indexOf(P)<0&&(r[P]=()=>_[P]);i.d(t,r);var D=i("./node_modules/d3-scale/src/index.js");r={};for(const P in D)["default","version"].indexOf(P)<0&&(r[P]=()=>D[P]);i.d(t,r);var R=i("./node_modules/d3-scale-chromatic/src/index.js");r={};for(const P in R)["default","version"].indexOf(P)<0&&(r[P]=()=>R[P]);i.d(t,r);var A=i("./node_modules/d3-selection/src/index.js");r={};for(const P in A)["default","version"].indexOf(P)<0&&(r[P]=()=>A[P]);i.d(t,r);var T=i("./node_modules/d3-shape/src/index.js");r={};for(const P in T)["default","version"].indexOf(P)<0&&(r[P]=()=>T[P]);i.d(t,r);var F=i("./node_modules/d3-time/src/index.js");r={};for(const P in F)["default","version"].indexOf(P)<0&&(r[P]=()=>F[P]);i.d(t,r);var E=i("./node_modules/d3-time-format/src/index.js");r={};for(const P in E)["default","version"].indexOf(P)<0&&(r[P]=()=>E[P]);i.d(t,r);var M=i("./node_modules/d3-timer/src/index.js");r={};for(const P in M)["default","version"].indexOf(P)<0&&(r[P]=()=>M[P]);i.d(t,r);var O=i("./node_modules/d3-transition/src/index.js");r={};for(const P in O)["default","version"].indexOf(P)<0&&(r[P]=()=>O[P]);i.d(t,r);var k=i("./node_modules/d3-voronoi/src/index.js");r={};for(const P in k)["default","version"].indexOf(P)<0&&(r[P]=()=>k[P]);i.d(t,r);var j=i("./node_modules/d3-zoom/src/index.js");r={};for(const P in j)["default","version"].indexOf(P)<0&&(r[P]=()=>j[P]);i.d(t,r)},"./node_modules/dagre/index.js":(e,t,i)=>{e.exports={graphlib:i("./node_modules/dagre/lib/graphlib.js"),layout:i("./node_modules/dagre/lib/layout.js"),debug:i("./node_modules/dagre/lib/debug.js"),util:{time:i("./node_modules/dagre/lib/util.js").time,notime:i("./node_modules/dagre/lib/util.js").notime},version:i("./node_modules/dagre/lib/version.js")}},"./node_modules/dagre/lib/acyclic.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/greedy-fas.js");e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],i={},o={};function r(a){n.has(o,a)||(o[a]=!0,i[a]=!0,n.forEach(e.outEdges(a),function(e){n.has(i,e.w)?t.push(e):r(e.w)}),delete i[a])}return n.forEach(e.nodes(),r),t}(e);n.forEach(t,function(t){var i=e.edge(t);e.removeEdge(t),i.forwardName=t.name,i.reversed=!0,e.setEdge(t.w,t.v,i,n.uniqueId("rev"))})},undo:function(e){n.forEach(e.edges(),function(t){var i=e.edge(t);if(i.reversed){e.removeEdge(t);var n=i.forwardName;delete i.reversed,delete i.forwardName,e.setEdge(t.w,t.v,i,n)}})}}},"./node_modules/dagre/lib/add-border-segments.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js");function r(e,t,i,n,r,a){var s={width:0,height:0,rank:a,borderType:t},l=r[t][a-1],c=o.addDummyNode(e,"border",s,i);r[t][a]=c,e.setParent(c,n),l&&e.setEdge(l,c,{weight:1})}e.exports=function(e){n.forEach(e.children(),function t(i){var o=e.children(i),a=e.node(i);if(o.length&&n.forEach(o,t),n.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,l=a.maxRank+1;s<l;++s)r(e,"borderLeft","_bl",i,a,s),r(e,"borderRight","_br",i,a,s)}})}},"./node_modules/dagre/lib/coordinate-system.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js");function o(e){n.forEach(e.nodes(),function(t){r(e.node(t))}),n.forEach(e.edges(),function(t){r(e.edge(t))})}function r(e){var t=e.width;e.width=e.height,e.height=t}function a(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){n.forEach(e.nodes(),function(t){a(e.node(t))}),n.forEach(e.edges(),function(t){var i=e.edge(t);n.forEach(i.points,a),n.has(i,"y")&&a(i)})}(e);"lr"!==t&&"rl"!==t||(!function(e){n.forEach(e.nodes(),function(t){s(e.node(t))}),n.forEach(e.edges(),function(t){var i=e.edge(t);n.forEach(i.points,s),n.has(i,"x")&&s(i)})}(e),o(e))}}},"./node_modules/dagre/lib/data/list.js":e=>{function t(){var e={};e._next=e._prev=e,this._sentinel=e}function i(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function n(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=t,t.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return i(t),t},t.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&i(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},t.prototype.toString=function(){for(var e=[],t=this._sentinel,i=t._prev;i!==t;)e.push(JSON.stringify(i,n)),i=i._prev;return"["+e.join(", ")+"]"}},"./node_modules/dagre/lib/debug.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js"),r=i("./node_modules/dagre/lib/graphlib.js").Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),i=new r({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){i.setNode(t,{label:t}),i.setParent(t,"layer"+e.node(t).rank)}),n.forEach(e.edges(),function(e){i.setEdge(e.v,e.w,{},e.name)}),n.forEach(t,function(e,t){var o="layer"+t;i.setNode(o,{rank:"same"}),n.reduce(e,function(e,t){return i.setEdge(e,t,{style:"invis"}),t})}),i}}},"./node_modules/dagre/lib/graphlib.js":(e,t,i)=>{var n;try{n=i("./node_modules/graphlib/index.js")}catch(o){}n||(n=window.graphlib),e.exports=n},"./node_modules/dagre/lib/greedy-fas.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/graphlib.js").Graph,r=i("./node_modules/dagre/lib/data/list.js");e.exports=function(e,t){if(e.nodeCount()<=1)return[];var i=function(e,t){var i=new o,a=0,s=0;n.forEach(e.nodes(),function(e){i.setNode(e,{v:e,in:0,out:0})}),n.forEach(e.edges(),function(e){var n=i.edge(e.v,e.w)||0,o=t(e),r=n+o;i.setEdge(e.v,e.w,r),s=Math.max(s,i.node(e.v).out+=o),a=Math.max(a,i.node(e.w).in+=o)});var c=n.range(s+a+3).map(function(){return new r}),d=a+1;return n.forEach(i.nodes(),function(e){l(c,d,i.node(e))}),{graph:i,buckets:c,zeroIdx:d}}(e,t||a),c=function(e,t,i){var n,o=[],r=t[t.length-1],a=t[0];for(;e.nodeCount();){for(;n=a.dequeue();)s(e,t,i,n);for(;n=r.dequeue();)s(e,t,i,n);if(e.nodeCount())for(var l=t.length-2;l>0;--l)if(n=t[l].dequeue()){o=o.concat(s(e,t,i,n,!0));break}}return o}(i.graph,i.buckets,i.zeroIdx);return n.flatten(n.map(c,function(t){return e.outEdges(t.v,t.w)}),!0)};var a=n.constant(1);function s(e,t,i,o,r){var a=r?[]:void 0;return n.forEach(e.inEdges(o.v),function(n){var o=e.edge(n),s=e.node(n.v);r&&a.push({v:n.v,w:n.w}),s.out-=o,l(t,i,s)}),n.forEach(e.outEdges(o.v),function(n){var o=e.edge(n),r=n.w,a=e.node(r);a.in-=o,l(t,i,a)}),e.removeNode(o.v),a}function l(e,t,i){i.out?i.in?e[i.out-i.in+t].enqueue(i):e[e.length-1].enqueue(i):e[0].enqueue(i)}},"./node_modules/dagre/lib/layout.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/acyclic.js"),r=i("./node_modules/dagre/lib/normalize.js"),a=i("./node_modules/dagre/lib/rank/index.js"),s=i("./node_modules/dagre/lib/util.js").normalizeRanks,l=i("./node_modules/dagre/lib/parent-dummy-chains.js"),c=i("./node_modules/dagre/lib/util.js").removeEmptyRanks,d=i("./node_modules/dagre/lib/nesting-graph.js"),p=i("./node_modules/dagre/lib/add-border-segments.js"),u=i("./node_modules/dagre/lib/coordinate-system.js"),m=i("./node_modules/dagre/lib/order/index.js"),h=i("./node_modules/dagre/lib/position/index.js"),f=i("./node_modules/dagre/lib/util.js"),g=i("./node_modules/dagre/lib/graphlib.js").Graph;e.exports=function(e,t){var i=t&&t.debugTiming?f.time:f.notime;i("layout",function(){var t=i("  buildLayoutGraph",function(){return function(e){var t=new g({multigraph:!0,compound:!0}),i=D(e.graph());return t.setGraph(n.merge({},x,_(i,v),n.pick(i,y))),n.forEach(e.nodes(),function(i){var o=D(e.node(i));t.setNode(i,n.defaults(_(o,b),C)),t.setParent(i,e.parent(i))}),n.forEach(e.edges(),function(i){var o=D(e.edge(i));t.setEdge(i,n.merge({},w,_(o,S),n.pick(o,I)))}),t}(e)});i("  runLayout",function(){!function(e,t){t("    makeSpaceForEdgeLabels",function(){!function(e){var t=e.graph();t.ranksep/=2,n.forEach(e.edges(),function(i){var n=e.edge(i);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}(e)}),t("    removeSelfEdges",function(){!function(e){n.forEach(e.edges(),function(t){if(t.v===t.w){var i=e.node(t.v);i.selfEdges||(i.selfEdges=[]),i.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}(e)}),t("    acyclic",function(){o.run(e)}),t("    nestingGraph.run",function(){d.run(e)}),t("    rank",function(){a(f.asNonCompoundGraph(e))}),t("    injectEdgeLabelProxies",function(){!function(e){n.forEach(e.edges(),function(t){var i=e.edge(t);if(i.width&&i.height){var n=e.node(t.v),o={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};f.addDummyNode(e,"edge-proxy",o,"_ep")}})}(e)}),t("    removeEmptyRanks",function(){c(e)}),t("    nestingGraph.cleanup",function(){d.cleanup(e)}),t("    normalizeRanks",function(){s(e)}),t("    assignRankMinMax",function(){!function(e){var t=0;n.forEach(e.nodes(),function(i){var o=e.node(i);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=n.max(t,o.maxRank))}),e.graph().maxRank=t}(e)}),t("    removeEdgeLabelProxies",function(){!function(e){n.forEach(e.nodes(),function(t){var i=e.node(t);"edge-proxy"===i.dummy&&(e.edge(i.e).labelRank=i.rank,e.removeNode(t))})}(e)}),t("    normalize.run",function(){r.run(e)}),t("    parentDummyChains",function(){l(e)}),t("    addBorderSegments",function(){p(e)}),t("    order",function(){m(e)}),t("    insertSelfEdges",function(){!function(e){var t=f.buildLayerMatrix(e);n.forEach(t,function(t){var i=0;n.forEach(t,function(t,o){var r=e.node(t);r.order=o+i,n.forEach(r.selfEdges,function(t){f.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:o+ ++i,e:t.e,label:t.label},"_se")}),delete r.selfEdges})})}(e)}),t("    adjustCoordinateSystem",function(){u.adjust(e)}),t("    position",function(){h(e)}),t("    positionSelfEdges",function(){!function(e){n.forEach(e.nodes(),function(t){var i=e.node(t);if("selfedge"===i.dummy){var n=e.node(i.e.v),o=n.x+n.width/2,r=n.y,a=i.x-o,s=n.height/2;e.setEdge(i.e,i.label),e.removeNode(t),i.label.points=[{x:o+2*a/3,y:r-s},{x:o+5*a/6,y:r-s},{x:o+a,y:r},{x:o+5*a/6,y:r+s},{x:o+2*a/3,y:r+s}],i.label.x=i.x,i.label.y=i.y}})}(e)}),t("    removeBorderNodes",function(){!function(e){n.forEach(e.nodes(),function(t){if(e.children(t).length){var i=e.node(t),o=e.node(i.borderTop),r=e.node(i.borderBottom),a=e.node(n.last(i.borderLeft)),s=e.node(n.last(i.borderRight));i.width=Math.abs(s.x-a.x),i.height=Math.abs(r.y-o.y),i.x=a.x+i.width/2,i.y=o.y+i.height/2}}),n.forEach(e.nodes(),function(t){"border"===e.node(t).dummy&&e.removeNode(t)})}(e)}),t("    normalize.undo",function(){r.undo(e)}),t("    fixupEdgeLabelCoords",function(){!function(e){n.forEach(e.edges(),function(t){var i=e.edge(t);if(n.has(i,"x"))switch("l"!==i.labelpos&&"r"!==i.labelpos||(i.width-=i.labeloffset),i.labelpos){case"l":i.x-=i.width/2+i.labeloffset;break;case"r":i.x+=i.width/2+i.labeloffset}})}(e)}),t("    undoCoordinateSystem",function(){u.undo(e)}),t("    translateGraph",function(){!function(e){var t=Number.POSITIVE_INFINITY,i=0,o=Number.POSITIVE_INFINITY,r=0,a=e.graph(),s=a.marginx||0,l=a.marginy||0;function c(e){var n=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,n-s/2),i=Math.max(i,n+s/2),o=Math.min(o,a-l/2),r=Math.max(r,a+l/2)}n.forEach(e.nodes(),function(t){c(e.node(t))}),n.forEach(e.edges(),function(t){var i=e.edge(t);n.has(i,"x")&&c(i)}),t-=s,o-=l,n.forEach(e.nodes(),function(i){var n=e.node(i);n.x-=t,n.y-=o}),n.forEach(e.edges(),function(i){var r=e.edge(i);n.forEach(r.points,function(e){e.x-=t,e.y-=o}),n.has(r,"x")&&(r.x-=t),n.has(r,"y")&&(r.y-=o)}),a.width=i-t+s,a.height=r-o+l}(e)}),t("    assignNodeIntersects",function(){!function(e){n.forEach(e.edges(),function(t){var i,n,o=e.edge(t),r=e.node(t.v),a=e.node(t.w);o.points?(i=o.points[0],n=o.points[o.points.length-1]):(o.points=[],i=a,n=r),o.points.unshift(f.intersectRect(r,i)),o.points.push(f.intersectRect(a,n))})}(e)}),t("    reversePoints",function(){!function(e){n.forEach(e.edges(),function(t){var i=e.edge(t);i.reversed&&i.points.reverse()})}(e)}),t("    acyclic.undo",function(){o.undo(e)})}(t,i)}),i("  updateInputGraph",function(){!function(e,t){n.forEach(e.nodes(),function(i){var n=e.node(i),o=t.node(i);n&&(n.x=o.x,n.y=o.y,t.children(i).length&&(n.width=o.width,n.height=o.height))}),n.forEach(e.edges(),function(i){var o=e.edge(i),r=t.edge(i);o.points=r.points,n.has(r,"x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)})})};var v=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],b=["width","height"],C={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},I=["labelpos"];function _(e,t){return n.mapValues(n.pick(e,t),Number)}function D(e){var t={};return n.forEach(e,function(e,i){t[i.toLowerCase()]=e}),t}},"./node_modules/dagre/lib/lodash.js":(e,t,i)=>{var n;try{n={cloneDeep:i("./node_modules/lodash/cloneDeep.js"),constant:i("./node_modules/lodash/constant.js"),defaults:i("./node_modules/lodash/defaults.js"),each:i("./node_modules/lodash/each.js"),filter:i("./node_modules/lodash/filter.js"),find:i("./node_modules/lodash/find.js"),flatten:i("./node_modules/lodash/flatten.js"),forEach:i("./node_modules/lodash/forEach.js"),forIn:i("./node_modules/lodash/forIn.js"),has:i("./node_modules/lodash/has.js"),isUndefined:i("./node_modules/lodash/isUndefined.js"),last:i("./node_modules/lodash/last.js"),map:i("./node_modules/lodash/map.js"),mapValues:i("./node_modules/lodash/mapValues.js"),max:i("./node_modules/lodash/max.js"),merge:i("./node_modules/lodash/merge.js"),min:i("./node_modules/lodash/min.js"),minBy:i("./node_modules/lodash/minBy.js"),now:i("./node_modules/lodash/now.js"),pick:i("./node_modules/lodash/pick.js"),range:i("./node_modules/lodash/range.js"),reduce:i("./node_modules/lodash/reduce.js"),sortBy:i("./node_modules/lodash/sortBy.js"),uniqueId:i("./node_modules/lodash/uniqueId.js"),values:i("./node_modules/lodash/values.js"),zipObject:i("./node_modules/lodash/zipObject.js")}}catch(o){}n||(n=window._),e.exports=n},"./node_modules/dagre/lib/nesting-graph.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js");function r(e,t,i,a,s,l,c){var d=e.children(c);if(d.length){var p=o.addBorderNode(e,"_bt"),u=o.addBorderNode(e,"_bb"),m=e.node(c);e.setParent(p,c),m.borderTop=p,e.setParent(u,c),m.borderBottom=u,n.forEach(d,function(n){r(e,t,i,a,s,l,n);var o=e.node(n),d=o.borderTop?o.borderTop:n,m=o.borderBottom?o.borderBottom:n,h=o.borderTop?a:2*a,f=d!==m?1:s-l[c]+1;e.setEdge(p,d,{weight:h,minlen:f,nestingEdge:!0}),e.setEdge(m,u,{weight:h,minlen:f,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,p,{weight:0,minlen:s+l[c]})}else c!==t&&e.setEdge(t,c,{weight:0,minlen:i})}e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),i=function(e){var t={};function i(o,r){var a=e.children(o);a&&a.length&&n.forEach(a,function(e){i(e,r+1)}),t[o]=r}return n.forEach(e.children(),function(e){i(e,1)}),t}(e),a=n.max(n.values(i))-1,s=2*a+1;e.graph().nestingRoot=t,n.forEach(e.edges(),function(t){e.edge(t).minlen*=s});var l=function(e){return n.reduce(e.edges(),function(t,i){return t+e.edge(i).weight},0)}(e)+1;n.forEach(e.children(),function(n){r(e,t,s,l,a,i,n)}),e.graph().nodeRankFactor=s},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,n.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},"./node_modules/dagre/lib/normalize.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js");e.exports={run:function(e){e.graph().dummyChains=[],n.forEach(e.edges(),function(t){!function(e,t){var i,n,r,a=t.v,s=e.node(a).rank,l=t.w,c=e.node(l).rank,d=t.name,p=e.edge(t),u=p.labelRank;if(c===s+1)return;for(e.removeEdge(t),r=0,++s;s<c;++r,++s)p.points=[],n={width:0,height:0,edgeLabel:p,edgeObj:t,rank:s},i=o.addDummyNode(e,"edge",n,"_d"),s===u&&(n.width=p.width,n.height=p.height,n.dummy="edge-label",n.labelpos=p.labelpos),e.setEdge(a,i,{weight:p.weight},d),0===r&&e.graph().dummyChains.push(i),a=i;e.setEdge(a,l,{weight:p.weight},d)}(e,t)})},undo:function(e){n.forEach(e.graph().dummyChains,function(t){var i,n=e.node(t),o=n.edgeLabel;for(e.setEdge(n.edgeObj,o);n.dummy;)i=e.successors(t)[0],e.removeNode(t),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),t=i,n=e.node(t)})}}},"./node_modules/dagre/lib/order/add-subgraph-constraints.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js");e.exports=function(e,t,i){var o,r={};n.forEach(i,function(i){for(var n,a,s=e.parent(i);s;){if((n=e.parent(s))?(a=r[n],r[n]=s):(a=o,o=s),a&&a!==s)return void t.setEdge(a,s);s=n}})}},"./node_modules/dagre/lib/order/barycenter.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js");e.exports=function(e,t){return n.map(t,function(t){var i=e.inEdges(t);if(i.length){var o=n.reduce(i,function(t,i){var n=e.edge(i),o=e.node(i.v);return{sum:t.sum+n.weight*o.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}})}},"./node_modules/dagre/lib/order/build-layer-graph.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/graphlib.js").Graph;e.exports=function(e,t,i){var r=function(e){var t;for(;e.hasNode(t=n.uniqueId("_root")););return t}(e),a=new o({compound:!0}).setGraph({root:r}).setDefaultNodeLabel(function(t){return e.node(t)});return n.forEach(e.nodes(),function(o){var s=e.node(o),l=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(a.setNode(o),a.setParent(o,l||r),n.forEach(e[i](o),function(t){var i=t.v===o?t.w:t.v,r=a.edge(i,o),s=n.isUndefined(r)?0:r.weight;a.setEdge(i,o,{weight:e.edge(t).weight+s})}),n.has(s,"minRank")&&a.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),a}},"./node_modules/dagre/lib/order/cross-count.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js");function o(e,t,i){for(var o=n.zipObject(i,n.map(i,function(e,t){return t})),r=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:o[t.w],weight:e.edge(t).weight}}),"pos")}),!0),a=1;a<i.length;)a<<=1;var s=2*a-1;a-=1;var l=n.map(new Array(s),function(){return 0}),c=0;return n.forEach(r.forEach(function(e){var t=e.pos+a;l[t]+=e.weight;for(var i=0;t>0;)t%2&&(i+=l[t+1]),l[t=t-1>>1]+=e.weight;c+=e.weight*i})),c}e.exports=function(e,t){for(var i=0,n=1;n<t.length;++n)i+=o(e,t[n-1],t[n]);return i}},"./node_modules/dagre/lib/order/index.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/order/init-order.js"),r=i("./node_modules/dagre/lib/order/cross-count.js"),a=i("./node_modules/dagre/lib/order/sort-subgraph.js"),s=i("./node_modules/dagre/lib/order/build-layer-graph.js"),l=i("./node_modules/dagre/lib/order/add-subgraph-constraints.js"),c=i("./node_modules/dagre/lib/graphlib.js").Graph,d=i("./node_modules/dagre/lib/util.js");function p(e,t,i){return n.map(t,function(t){return s(e,t,i)})}function u(e,t){var i=new c;n.forEach(e,function(e){var o=e.graph().root,r=a(e,o,i,t);n.forEach(r.vs,function(t,i){e.node(t).order=i}),l(e,i,r.vs)})}function m(e,t){n.forEach(t,function(t){n.forEach(t,function(t,i){e.node(t).order=i})})}e.exports=function(e){var t=d.maxRank(e),i=p(e,n.range(1,t+1),"inEdges"),a=p(e,n.range(t-1,-1,-1),"outEdges"),s=o(e);m(e,s);for(var l,c=Number.POSITIVE_INFINITY,h=0,f=0;f<4;++h,++f){u(h%2?i:a,h%4>=2),s=d.buildLayerMatrix(e);var g=r(e,s);g<c&&(f=0,l=n.cloneDeep(s),c=g)}m(e,l)}},"./node_modules/dagre/lib/order/init-order.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js");e.exports=function(e){var t={},i=n.filter(e.nodes(),function(t){return!e.children(t).length}),o=n.max(n.map(i,function(t){return e.node(t).rank})),r=n.map(n.range(o+1),function(){return[]});var a=n.sortBy(i,function(t){return e.node(t).rank});return n.forEach(a,function i(o){if(n.has(t,o))return;t[o]=!0;var a=e.node(o);r[a.rank].push(o),n.forEach(e.successors(o),i)}),r}},"./node_modules/dagre/lib/order/resolve-conflicts.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js");e.exports=function(e,t){var i={};return n.forEach(e,function(e,t){var o=i[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};n.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)}),n.forEach(t.edges(),function(e){var t=i[e.v],o=i[e.w];n.isUndefined(t)||n.isUndefined(o)||(o.indegree++,t.out.push(i[e.w]))}),function(e){var t=[];function i(e){return function(t){t.merged||(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var i=0,n=0;e.weight&&(i+=e.barycenter*e.weight,n+=e.weight);t.weight&&(i+=t.barycenter*t.weight,n+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=i/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(i){i.in.push(t),0==--i.indegree&&e.push(i)}}for(;e.length;){var r=e.pop();t.push(r),n.forEach(r.in.reverse(),i(r)),n.forEach(r.out,o(r))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,["vs","i","barycenter","weight"])})}(n.filter(i,function(e){return!e.indegree}))}},"./node_modules/dagre/lib/order/sort-subgraph.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/order/barycenter.js"),r=i("./node_modules/dagre/lib/order/resolve-conflicts.js"),a=i("./node_modules/dagre/lib/order/sort.js");e.exports=function e(t,i,s,l){var c=t.children(i),d=t.node(i),p=d?d.borderLeft:void 0,u=d?d.borderRight:void 0,m={};p&&(c=n.filter(c,function(e){return e!==p&&e!==u}));var h=o(t,c);n.forEach(h,function(i){if(t.children(i.v).length){var o=e(t,i.v,s,l);m[i.v]=o,n.has(o,"barycenter")&&(r=i,a=o,n.isUndefined(r.barycenter)?(r.barycenter=a.barycenter,r.weight=a.weight):(r.barycenter=(r.barycenter*r.weight+a.barycenter*a.weight)/(r.weight+a.weight),r.weight+=a.weight))}var r,a});var f=r(h,s);!function(e,t){n.forEach(e,function(e){e.vs=n.flatten(e.vs.map(function(e){return t[e]?t[e].vs:e}),!0)})}(f,m);var g=a(f,l);if(p&&(g.vs=n.flatten([p,g.vs,u],!0),t.predecessors(p).length)){var v=t.node(t.predecessors(p)[0]),x=t.node(t.predecessors(u)[0]);n.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+v.order+x.order)/(g.weight+2),g.weight+=2}return g}},"./node_modules/dagre/lib/order/sort.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js");function r(e,t,i){for(var o;t.length&&(o=n.last(t)).i<=i;)t.pop(),e.push(o.vs),i++;return i}e.exports=function(e,t){var i=o.partition(e,function(e){return n.has(e,"barycenter")}),a=i.lhs,s=n.sortBy(i.rhs,function(e){return-e.i}),l=[],c=0,d=0,p=0;a.sort((u=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:u?t.i-e.i:e.i-t.i})),p=r(l,s,p),n.forEach(a,function(e){p+=e.vs.length,l.push(e.vs),c+=e.barycenter*e.weight,d+=e.weight,p=r(l,s,p)});var u;var m={vs:n.flatten(l,!0)};d&&(m.barycenter=c/d,m.weight=d);return m}},"./node_modules/dagre/lib/parent-dummy-chains.js":(e,t,i)=>{var n=i("./node_modules/dagre/lib/lodash.js");e.exports=function(e){var t=function(e){var t={},i=0;function o(r){var a=i;n.forEach(e.children(r),o),t[r]={low:a,lim:i++}}return n.forEach(e.children(),o),t}(e);n.forEach(e.graph().dummyChains,function(i){for(var n=e.node(i),o=n.edgeObj,r=function(e,t,i,n){var o,r,a=[],s=[],l=Math.min(t[i].low,t[n].low),c=Math.max(t[i].lim,t[n].lim);o=i;do{o=e.parent(o),a.push(o)}while(o&&(t[o].low>l||c>t[o].lim));r=o,o=n;for(;(o=e.parent(o))!==r;)s.push(o);return{path:a.concat(s.reverse()),lca:r}}(e,t,o.v,o.w),a=r.path,s=r.lca,l=0,c=a[l],d=!0;i!==o.w;){if(n=e.node(i),d){for(;(c=a[l])!==s&&e.node(c).maxRank<n.rank;)l++;c===s&&(d=!1)}if(!d){for(;l<a.length-1&&e.node(c=a[l+1]).minRank<=n.rank;)l++;c=a[l]}e.setParent(i,c),i=e.successors(i)[0]}})}},"./node_modules/dagre/lib/position/bk.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/graphlib.js").Graph,r=i("./node_modules/dagre/lib/util.js");function a(e,t){var i={};return n.reduce(t,function(t,o){var r=0,a=0,s=t.length,c=n.last(o);return n.forEach(o,function(t,d){var p=function(e,t){if(e.node(t).dummy)return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),u=p?e.node(p).order:s;(p||t===c)&&(n.forEach(o.slice(a,d+1),function(t){n.forEach(e.predecessors(t),function(n){var o=e.node(n),a=o.order;!(a<r||u<a)||o.dummy&&e.node(t).dummy||l(i,n,t)})}),a=d+1,r=u)}),o}),i}function s(e,t){var i={};function o(t,o,r,a,s){var c;n.forEach(n.range(o,r),function(o){c=t[o],e.node(c).dummy&&n.forEach(e.predecessors(c),function(t){var n=e.node(t);n.dummy&&(n.order<a||n.order>s)&&l(i,t,c)})})}return n.reduce(t,function(t,i){var r,a=-1,s=0;return n.forEach(i,function(n,l){if("border"===e.node(n).dummy){var c=e.predecessors(n);c.length&&(r=e.node(c[0]).order,o(i,s,l,a,r),s=l,a=r)}o(i,s,i.length,r,t.length)}),i}),i}function l(e,t,i){if(t>i){var n=t;t=i,i=n}var o=e[t];o||(e[t]=o={}),o[i]=!0}function c(e,t,i){if(t>i){var o=t;t=i,i=o}return n.has(e[t],i)}function d(e,t,i,o){var r={},a={},s={};return n.forEach(t,function(e){n.forEach(e,function(e,t){r[e]=e,a[e]=e,s[e]=t})}),n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var l=o(e);if(l.length){l=n.sortBy(l,function(e){return s[e]});for(var d=(l.length-1)/2,p=Math.floor(d),u=Math.ceil(d);p<=u;++p){var m=l[p];a[e]===e&&t<s[m]&&!c(i,e,m)&&(a[m]=e,a[e]=r[e]=r[m],t=s[m])}}})}),{root:r,align:a}}function p(e,t,i,r,a){var s={},l=function(e,t,i,r){var a=new o,s=e.graph(),l=function(e,t,i){return function(o,r,a){var s,l=o.node(r),c=o.node(a),d=0;if(d+=l.width/2,n.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=-l.width/2;break;case"r":s=l.width/2}if(s&&(d+=i?s:-s),s=0,d+=(l.dummy?t:e)/2,d+=(c.dummy?t:e)/2,d+=c.width/2,n.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(d+=i?s:-s),s=0,d}}(s.nodesep,s.edgesep,r);return n.forEach(t,function(t){var o;n.forEach(t,function(t){var n=i[t];if(a.setNode(n),o){var r=i[o],s=a.edge(r,n);a.setEdge(r,n,Math.max(l(e,t,o),s||0))}o=t})}),a}(e,t,i,a),c=a?"borderLeft":"borderRight";function d(e,t){for(var i=l.nodes(),n=i.pop(),o={};n;)o[n]?e(n):(o[n]=!0,i.push(n),i=i.concat(t(n))),n=i.pop()}return d(function(e){s[e]=l.inEdges(e).reduce(function(e,t){return Math.max(e,s[t.v]+l.edge(t))},0)},l.predecessors.bind(l)),d(function(t){var i=l.outEdges(t).reduce(function(e,t){return Math.min(e,s[t.w]-l.edge(t))},Number.POSITIVE_INFINITY),n=e.node(t);i!==Number.POSITIVE_INFINITY&&n.borderType!==c&&(s[t]=Math.max(s[t],i))},l.successors.bind(l)),n.forEach(r,function(e){s[e]=s[i[e]]}),s}function u(e,t){return n.minBy(n.values(t),function(t){var i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return n.forIn(t,function(t,n){var r=function(e,t){return e.node(t).width}(e,n)/2;i=Math.max(t+r,i),o=Math.min(t-r,o)}),i-o})}function m(e,t){var i=n.values(t),o=n.min(i),r=n.max(i);n.forEach(["u","d"],function(i){n.forEach(["l","r"],function(a){var s,l=i+a,c=e[l];if(c!==t){var d=n.values(c);(s="l"===a?o-n.min(d):r-n.max(d))&&(e[l]=n.mapValues(c,function(e){return e+s}))}})})}function h(e,t){return n.mapValues(e.ul,function(i,o){if(t)return e[t.toLowerCase()][o];var r=n.sortBy(n.map(e,o));return(r[1]+r[2])/2})}e.exports={positionX:function(e){var t,i=r.buildLayerMatrix(e),o=n.merge(a(e,i),s(e,i)),l={};n.forEach(["u","d"],function(r){t="u"===r?i:n.values(i).reverse(),n.forEach(["l","r"],function(i){"r"===i&&(t=n.map(t,function(e){return n.values(e).reverse()}));var a=("u"===r?e.predecessors:e.successors).bind(e),s=d(e,t,o,a),c=p(e,t,s.root,s.align,"r"===i);"r"===i&&(c=n.mapValues(c,function(e){return-e})),l[r+i]=c})});var c=u(e,l);return m(l,c),h(l,e.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:l,hasConflict:c,verticalAlignment:d,horizontalCompaction:p,alignCoordinates:m,findSmallestWidthAlignment:u,balance:h}},"./node_modules/dagre/lib/position/index.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/util.js"),r=i("./node_modules/dagre/lib/position/bk.js").positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),i=e.graph().ranksep,r=0;n.forEach(t,function(t){var o=n.max(n.map(t,function(t){return e.node(t).height}));n.forEach(t,function(t){e.node(t).y=r+o/2}),r+=o+i})})(e=o.asNonCompoundGraph(e)),n.forEach(r(e),function(t,i){e.node(i).x=t})}},"./node_modules/dagre/lib/rank/feasible-tree.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/graphlib.js").Graph,r=i("./node_modules/dagre/lib/rank/util.js").slack;function a(e,t){return n.forEach(e.nodes(),function i(o){n.forEach(t.nodeEdges(o),function(n){var a=n.v,s=o===a?n.w:a;e.hasNode(s)||r(t,n)||(e.setNode(s,{}),e.setEdge(o,s,{}),i(s))})}),e.nodeCount()}function s(e,t){return n.minBy(t.edges(),function(i){if(e.hasNode(i.v)!==e.hasNode(i.w))return r(t,i)})}function l(e,t,i){n.forEach(e.nodes(),function(e){t.node(e).rank+=i})}e.exports=function(e){var t,i,n=new o({directed:!1}),c=e.nodes()[0],d=e.nodeCount();n.setNode(c,{});for(;a(n,e)<d;)t=s(n,e),i=n.hasNode(t.v)?r(e,t):-r(e,t),l(n,e,i);return n}},"./node_modules/dagre/lib/rank/index.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/rank/util.js").longestPath,o=i("./node_modules/dagre/lib/rank/feasible-tree.js"),r=i("./node_modules/dagre/lib/rank/network-simplex.js");e.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:s(e);break;case"tight-tree":!function(e){n(e),o(e)}(e);break;case"longest-path":a(e)}};var a=n;function s(e){r(e)}},"./node_modules/dagre/lib/rank/network-simplex.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/rank/feasible-tree.js"),r=i("./node_modules/dagre/lib/rank/util.js").slack,a=i("./node_modules/dagre/lib/rank/util.js").longestPath,s=i("./node_modules/dagre/lib/graphlib.js").alg.preorder,l=i("./node_modules/dagre/lib/graphlib.js").alg.postorder,c=i("./node_modules/dagre/lib/util.js").simplify;function d(e){e=c(e),a(e);var t,i=o(e);for(m(i),p(i,e);t=f(i);)v(i,e,t,g(i,e,t))}function p(e,t){var i=l(e,e.nodes());i=i.slice(0,i.length-1),n.forEach(i,function(i){!function(e,t,i){var n=e.node(i),o=n.parent;e.edge(i,o).cutvalue=u(e,t,i)}(e,t,i)})}function u(e,t,i){var o=e.node(i).parent,r=!0,a=t.edge(i,o),s=0;return a||(r=!1,a=t.edge(o,i)),s=a.weight,n.forEach(t.nodeEdges(i),function(n){var a,l,c=n.v===i,d=c?n.w:n.v;if(d!==o){var p=c===r,u=t.edge(n).weight;if(s+=p?u:-u,a=i,l=d,e.hasEdge(a,l)){var m=e.edge(i,d).cutvalue;s+=p?-m:m}}}),s}function m(e,t){arguments.length<2&&(t=e.nodes()[0]),h(e,{},1,t)}function h(e,t,i,o,r){var a=i,s=e.node(o);return t[o]=!0,n.forEach(e.neighbors(o),function(r){n.has(t,r)||(i=h(e,t,i,r,o))}),s.low=a,s.lim=i++,r?s.parent=r:delete s.parent,i}function f(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function g(e,t,i){var o=i.v,a=i.w;t.hasEdge(o,a)||(o=i.w,a=i.v);var s=e.node(o),l=e.node(a),c=s,d=!1;s.lim>l.lim&&(c=l,d=!0);var p=n.filter(t.edges(),function(t){return d===x(e,e.node(t.v),c)&&d!==x(e,e.node(t.w),c)});return n.minBy(p,function(e){return r(t,e)})}function v(e,t,i,o){var r=i.v,a=i.w;e.removeEdge(r,a),e.setEdge(o.v,o.w,{}),m(e),p(e,t),function(e,t){var i=n.find(e.nodes(),function(e){return!t.node(e).parent}),o=s(e,i);o=o.slice(1),n.forEach(o,function(i){var n=e.node(i).parent,o=t.edge(i,n),r=!1;o||(o=t.edge(n,i),r=!0),t.node(i).rank=t.node(n).rank+(r?o.minlen:-o.minlen)})}(e,t)}function x(e,t,i){return i.low<=t.lim&&t.lim<=i.lim}e.exports=d,d.initLowLimValues=m,d.initCutValues=p,d.calcCutValue=u,d.leaveEdge=f,d.enterEdge=g,d.exchangeEdges=v},"./node_modules/dagre/lib/rank/util.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js");e.exports={longestPath:function(e){var t={};n.forEach(e.sources(),function i(o){var r=e.node(o);if(n.has(t,o))return r.rank;t[o]=!0;var a=n.min(n.map(e.outEdges(o),function(t){return i(t.w)-e.edge(t).minlen}));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),r.rank=a})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},"./node_modules/dagre/lib/util.js":(e,t,i)=>{"use strict";var n=i("./node_modules/dagre/lib/lodash.js"),o=i("./node_modules/dagre/lib/graphlib.js").Graph;function r(e,t,i,o){var r;do{r=n.uniqueId(o)}while(e.hasNode(r));return i.dummy=t,e.setNode(r,i),r}function a(e){return n.max(n.map(e.nodes(),function(t){var i=e.node(t).rank;if(!n.isUndefined(i))return i}))}e.exports={addDummyNode:r,simplify:function(e){var t=(new o).setGraph(e.graph());return n.forEach(e.nodes(),function(i){t.setNode(i,e.node(i))}),n.forEach(e.edges(),function(i){var n=t.edge(i.v,i.w)||{weight:0,minlen:1},o=e.edge(i);t.setEdge(i.v,i.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})}),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return n.forEach(e.nodes(),function(i){e.children(i).length||t.setNode(i,e.node(i))}),n.forEach(e.edges(),function(i){t.setEdge(i,e.edge(i))}),t},successorWeights:function(e){var t=n.map(e.nodes(),function(t){var i={};return n.forEach(e.outEdges(t),function(t){i[t.w]=(i[t.w]||0)+e.edge(t).weight}),i});return n.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=n.map(e.nodes(),function(t){var i={};return n.forEach(e.inEdges(t),function(t){i[t.v]=(i[t.v]||0)+e.edge(t).weight}),i});return n.zipObject(e.nodes(),t)},intersectRect:function(e,t){var i,n,o=e.x,r=e.y,a=t.x-o,s=t.y-r,l=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*l>Math.abs(a)*c?(s<0&&(c=-c),i=c*a/s,n=c):(a<0&&(l=-l),i=l,n=l*s/a);return{x:o+i,y:r+n}},buildLayerMatrix:function(e){var t=n.map(n.range(a(e)+1),function(){return[]});return n.forEach(e.nodes(),function(i){var o=e.node(i),r=o.rank;n.isUndefined(r)||(t[r][o.order]=i)}),t},normalizeRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(i){var o=e.node(i);n.has(o,"rank")&&(o.rank-=t)})},removeEmptyRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank})),i=[];n.forEach(e.nodes(),function(n){var o=e.node(n).rank-t;i[o]||(i[o]=[]),i[o].push(n)});var o=0,r=e.graph().nodeRankFactor;n.forEach(i,function(t,i){n.isUndefined(t)&&i%r!=0?--o:o&&n.forEach(t,function(t){e.node(t).rank+=o})})},addBorderNode:function(e,t,i,n){var o={width:0,height:0};arguments.length>=4&&(o.rank=i,o.order=n);return r(e,"border",o,t)},maxRank:a,partition:function(e,t){var i={lhs:[],rhs:[]};return n.forEach(e,function(e){t(e)?i.lhs.push(e):i.rhs.push(e)}),i},time:function(e,t){var i=n.now();try{return t()}finally{console.log(e+" time: "+(n.now()-i)+"ms")}},notime:function(e,t){return t()}}},"./node_modules/dagre/lib/version.js":e=>{e.exports="0.8.5"},"./node_modules/graphlib/index.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/index.js");e.exports={Graph:n.Graph,json:i("./node_modules/graphlib/lib/json.js"),alg:i("./node_modules/graphlib/lib/alg/index.js"),version:n.version}},"./node_modules/graphlib/lib/alg/components.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");e.exports=function(e){var t,i={},o=[];function r(o){n.has(i,o)||(i[o]=!0,t.push(o),n.each(e.successors(o),r),n.each(e.predecessors(o),r))}return n.each(e.nodes(),function(e){t=[],r(e),t.length&&o.push(t)}),o}},"./node_modules/graphlib/lib/alg/dfs.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");function o(e,t,i,r,a,s){n.has(r,t)||(r[t]=!0,i||s.push(t),n.each(a(t),function(t){o(e,t,i,r,a,s)}),i&&s.push(t))}e.exports=function(e,t,i){n.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],s={};return n.each(t,function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);o(e,t,"post"===i,s,r,a)}),a}},"./node_modules/graphlib/lib/alg/dijkstra-all.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/alg/dijkstra.js"),o=i("./node_modules/graphlib/lib/lodash.js");e.exports=function(e,t,i){return o.transform(e.nodes(),function(o,r){o[r]=n(e,r,t,i)},{})}},"./node_modules/graphlib/lib/alg/dijkstra.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js"),o=i("./node_modules/graphlib/lib/data/priority-queue.js");e.exports=function(e,t,i,n){return function(e,t,i,n){var r,a,s={},l=new o,c=function(e){var t=e.v!==r?e.v:e.w,n=s[t],o=i(e),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);c<n.distance&&(n.distance=c,n.predecessor=r,l.decrease(t,c))};e.nodes().forEach(function(e){var i=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:i},l.add(e,i)});for(;l.size()>0&&(r=l.removeMin(),(a=s[r]).distance!==Number.POSITIVE_INFINITY);)n(r).forEach(c);return s}(e,String(t),i||r,n||function(t){return e.outEdges(t)})};var r=n.constant(1)},"./node_modules/graphlib/lib/alg/find-cycles.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js"),o=i("./node_modules/graphlib/lib/alg/tarjan.js");e.exports=function(e){return n.filter(o(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},"./node_modules/graphlib/lib/alg/floyd-warshall.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");e.exports=function(e,t,i){return function(e,t,i){var n={},o=e.nodes();return o.forEach(function(e){n[e]={},n[e][e]={distance:0},o.forEach(function(t){e!==t&&(n[e][t]={distance:Number.POSITIVE_INFINITY})}),i(e).forEach(function(i){var o=i.v===e?i.w:i.v,r=t(i);n[e][o]={distance:r,predecessor:e}})}),o.forEach(function(e){var t=n[e];o.forEach(function(i){var r=n[i];o.forEach(function(i){var n=r[e],o=t[i],a=r[i],s=n.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)})})}),n}(e,t||o,i||function(t){return e.outEdges(t)})};var o=n.constant(1)},"./node_modules/graphlib/lib/alg/index.js":(e,t,i)=>{e.exports={components:i("./node_modules/graphlib/lib/alg/components.js"),dijkstra:i("./node_modules/graphlib/lib/alg/dijkstra.js"),dijkstraAll:i("./node_modules/graphlib/lib/alg/dijkstra-all.js"),findCycles:i("./node_modules/graphlib/lib/alg/find-cycles.js"),floydWarshall:i("./node_modules/graphlib/lib/alg/floyd-warshall.js"),isAcyclic:i("./node_modules/graphlib/lib/alg/is-acyclic.js"),postorder:i("./node_modules/graphlib/lib/alg/postorder.js"),preorder:i("./node_modules/graphlib/lib/alg/preorder.js"),prim:i("./node_modules/graphlib/lib/alg/prim.js"),tarjan:i("./node_modules/graphlib/lib/alg/tarjan.js"),topsort:i("./node_modules/graphlib/lib/alg/topsort.js")}},"./node_modules/graphlib/lib/alg/is-acyclic.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/alg/topsort.js");e.exports=function(e){try{n(e)}catch(t){if(t instanceof n.CycleException)return!1;throw t}return!0}},"./node_modules/graphlib/lib/alg/postorder.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/alg/dfs.js");e.exports=function(e,t){return n(e,t,"post")}},"./node_modules/graphlib/lib/alg/preorder.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/alg/dfs.js");e.exports=function(e,t){return n(e,t,"pre")}},"./node_modules/graphlib/lib/alg/prim.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js"),o=i("./node_modules/graphlib/lib/graph.js"),r=i("./node_modules/graphlib/lib/data/priority-queue.js");e.exports=function(e,t){var i,a=new o,s={},l=new r;function c(e){var n=e.v===i?e.w:e.v,o=l.priority(n);if(void 0!==o){var r=t(e);r<o&&(s[n]=i,l.decrease(n,r))}}if(0===e.nodeCount())return a;n.each(e.nodes(),function(e){l.add(e,Number.POSITIVE_INFINITY),a.setNode(e)}),l.decrease(e.nodes()[0],0);var d=!1;for(;l.size()>0;){if(i=l.removeMin(),n.has(s,i))a.setEdge(i,s[i]);else{if(d)throw new Error("Input graph is not connected: "+e);d=!0}e.nodeEdges(i).forEach(c)}return a}},"./node_modules/graphlib/lib/alg/tarjan.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");e.exports=function(e){var t=0,i=[],o={},r=[];function a(s){var l=o[s]={onStack:!0,lowlink:t,index:t++};if(i.push(s),e.successors(s).forEach(function(e){n.has(o,e)?o[e].onStack&&(l.lowlink=Math.min(l.lowlink,o[e].index)):(a(e),l.lowlink=Math.min(l.lowlink,o[e].lowlink))}),l.lowlink===l.index){var c,d=[];do{c=i.pop(),o[c].onStack=!1,d.push(c)}while(s!==c);r.push(d)}}return e.nodes().forEach(function(e){n.has(o,e)||a(e)}),r}},"./node_modules/graphlib/lib/alg/topsort.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");function o(e){var t={},i={},o=[];if(n.each(e.sinks(),function a(s){if(n.has(i,s))throw new r;n.has(t,s)||(i[s]=!0,t[s]=!0,n.each(e.predecessors(s),a),delete i[s],o.push(s))}),n.size(t)!==e.nodeCount())throw new r;return o}function r(){}e.exports=o,o.CycleException=r,r.prototype=new Error},"./node_modules/graphlib/lib/data/priority-queue.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js");function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map(function(e){return e.key})},o.prototype.has=function(e){return n.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var i=this._keyIndices;if(e=String(e),!n.has(i,e)){var o=this._arr,r=o.length;return i[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var i=this._keyIndices[e];if(t>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[i].priority+" New: "+t);this._arr[i].priority=t,this._decrease(i)},o.prototype._heapify=function(e){var t=this._arr,i=2*e,n=i+1,o=e;i<t.length&&(o=t[i].priority<t[o].priority?i:o,n<t.length&&(o=t[n].priority<t[o].priority?n:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,i=this._arr,n=i[e].priority;0!==e&&!(i[t=e>>1].priority<n);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var i=this._arr,n=this._keyIndices,o=i[e],r=i[t];i[e]=r,i[t]=o,n[r.key]=e,n[o.key]=t}},"./node_modules/graphlib/lib/graph.js":(e,t,i)=>{"use strict";var n=i("./node_modules/graphlib/lib/lodash.js");e.exports=s;var o="\0",r="\0",a="\x01";function s(e){this._isDirected=!n.has(e,"directed")||e.directed,this._isMultigraph=!!n.has(e,"multigraph")&&e.multigraph,this._isCompound=!!n.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function l(e,t){e[t]?e[t]++:e[t]=1}function c(e,t){--e[t]||delete e[t]}function d(e,t,i,r){var s=""+t,l=""+i;if(!e&&s>l){var c=s;s=l,l=c}return s+a+l+a+(n.isUndefined(r)?o:r)}function p(e,t){return d(e,t.v,t.w,t.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(e){return this._label=e,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultNodeLabelFn=e,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return n.keys(this._nodes)},s.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})},s.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})},s.prototype.setNodes=function(e,t){var i=arguments,o=this;return n.each(e,function(e){i.length>1?o.setNode(e,t):o.setNode(e)}),this},s.prototype.setNode=function(e,t){return n.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=r,this._children[e]={},this._children[r][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},s.prototype.node=function(e){return this._nodes[e]},s.prototype.hasNode=function(e){return n.has(this._nodes,e)},s.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var i=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],n.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),n.each(n.keys(this._in[e]),i),delete this._in[e],delete this._preds[e],n.each(n.keys(this._out[e]),i),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},s.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(t))t=r;else{for(var i=t+="";!n.isUndefined(i);i=this.parent(i))if(i===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},s.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},s.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!==r)return t}},s.prototype.children=function(e){if(n.isUndefined(e)&&(e=r),this._isCompound){var t=this._children[e];if(t)return n.keys(t)}else{if(e===r)return this.nodes();if(this.hasNode(e))return[]}},s.prototype.predecessors=function(e){var t=this._preds[e];if(t)return n.keys(t)},s.prototype.successors=function(e){var t=this._sucs[e];if(t)return n.keys(t)},s.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return n.union(t,this.successors(e))},s.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},s.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var i=this;n.each(this._nodes,function(i,n){e(n)&&t.setNode(n,i)}),n.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,i.edge(e))});var o={};function r(e){var n=i.parent(e);return void 0===n||t.hasNode(n)?(o[e]=n,n):n in o?o[n]:r(n)}return this._isCompound&&n.each(t.nodes(),function(e){t.setParent(e,r(e))}),t},s.prototype.setDefaultEdgeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultEdgeLabelFn=e,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return n.values(this._edgeObjs)},s.prototype.setPath=function(e,t){var i=this,o=arguments;return n.reduce(e,function(e,n){return o.length>1?i.setEdge(e,n,t):i.setEdge(e,n),n}),this},s.prototype.setEdge=function(){var e,t,i,o,r=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,i=a.name,2===arguments.length&&(o=arguments[1],r=!0)):(e=a,t=arguments[1],i=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,n.isUndefined(i)||(i=""+i);var s=d(this._isDirected,e,t,i);if(n.has(this._edgeLabels,s))return r&&(this._edgeLabels[s]=o),this;if(!n.isUndefined(i)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=r?o:this._defaultEdgeLabelFn(e,t,i);var c=function(e,t,i,n){var o=""+t,r=""+i;if(!e&&o>r){var a=o;o=r,r=a}var s={v:o,w:r};n&&(s.name=n);return s}(this._isDirected,e,t,i);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[s]=c,l(this._preds[t],e),l(this._sucs[e],t),this._in[t][s]=c,this._out[e][s]=c,this._edgeCount++,this},s.prototype.edge=function(e,t,i){var n=1===arguments.length?p(this._isDirected,arguments[0]):d(this._isDirected,e,t,i);return this._edgeLabels[n]},s.prototype.hasEdge=function(e,t,i){var o=1===arguments.length?p(this._isDirected,arguments[0]):d(this._isDirected,e,t,i);return n.has(this._edgeLabels,o)},s.prototype.removeEdge=function(e,t,i){var n=1===arguments.length?p(this._isDirected,arguments[0]):d(this._isDirected,e,t,i),o=this._edgeObjs[n];return o&&(e=o.v,t=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],c(this._preds[t],e),c(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},s.prototype.inEdges=function(e,t){var i=this._in[e];if(i){var o=n.values(i);return t?n.filter(o,function(e){return e.v===t}):o}},s.prototype.outEdges=function(e,t){var i=this._out[e];if(i){var o=n.values(i);return t?n.filter(o,function(e){return e.w===t}):o}},s.prototype.nodeEdges=function(e,t){var i=this.inEdges(e,t);if(i)return i.concat(this.outEdges(e,t))}},"./node_modules/graphlib/lib/index.js":(e,t,i)=>{e.exports={Graph:i("./node_modules/graphlib/lib/graph.js"),version:i("./node_modules/graphlib/lib/version.js")}},"./node_modules/graphlib/lib/json.js":(e,t,i)=>{var n=i("./node_modules/graphlib/lib/lodash.js"),o=i("./node_modules/graphlib/lib/graph.js");function r(e){return n.map(e.nodes(),function(t){var i=e.node(t),o=e.parent(t),r={v:t};return n.isUndefined(i)||(r.value=i),n.isUndefined(o)||(r.parent=o),r})}function a(e){return n.map(e.edges(),function(t){var i=e.edge(t),o={v:t.v,w:t.w};return n.isUndefined(t.name)||(o.name=t.name),n.isUndefined(i)||(o.value=i),o})}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:r(e),edges:a(e)};n.isUndefined(e.graph())||(t.value=n.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return n.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},"./node_modules/graphlib/lib/lodash.js":(e,t,i)=>{var n;try{n={clone:i("./node_modules/lodash/clone.js"),constant:i("./node_modules/lodash/constant.js"),each:i("./node_modules/lodash/each.js"),filter:i("./node_modules/lodash/filter.js"),has:i("./node_modules/lodash/has.js"),isArray:i("./node_modules/lodash/isArray.js"),isEmpty:i("./node_modules/lodash/isEmpty.js"),isFunction:i("./node_modules/lodash/isFunction.js"),isUndefined:i("./node_modules/lodash/isUndefined.js"),keys:i("./node_modules/lodash/keys.js"),map:i("./node_modules/lodash/map.js"),reduce:i("./node_modules/lodash/reduce.js"),size:i("./node_modules/lodash/size.js"),transform:i("./node_modules/lodash/transform.js"),union:i("./node_modules/lodash/union.js"),values:i("./node_modules/lodash/values.js")}}catch(o){}n||(n=window._),e.exports=n},"./node_modules/graphlib/lib/version.js":e=>{e.exports="2.1.8"},"./node_modules/internmap/src/index.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{InternMap:()=>n,InternSet:()=>o});class n extends Map{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[i,n]of e)this.set(i,n)}get(e){return super.get(r(this,e))}has(e){return super.has(r(this,e))}set(e,t){return super.set(a(this,e),t)}delete(e){return super.delete(s(this,e))}}class o extends Set{constructor(e,t=l){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const i of e)this.add(i)}has(e){return super.has(r(this,e))}add(e){return super.add(a(this,e))}delete(e){return super.delete(s(this,e))}}function r({_intern:e,_key:t},i){const n=t(i);return e.has(n)?e.get(n):i}function a({_intern:e,_key:t},i){const n=t(i);return e.has(n)?e.get(n):(e.set(n,i),i)}function s({_intern:e,_key:t},i){const n=t(i);return e.has(n)&&(i=e.get(i),e.delete(n)),i}function l(e){return null!==e&&"object"==typeof e?e.valueOf():e}},"./node_modules/lodash/_DataView.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(i("./node_modules/lodash/_root.js"),"DataView");e.exports=n},"./node_modules/lodash/_Hash.js":(e,t,i)=>{var n=i("./node_modules/lodash/_hashClear.js"),o=i("./node_modules/lodash/_hashDelete.js"),r=i("./node_modules/lodash/_hashGet.js"),a=i("./node_modules/lodash/_hashHas.js"),s=i("./node_modules/lodash/_hashSet.js");function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,e.exports=l},"./node_modules/lodash/_ListCache.js":(e,t,i)=>{var n=i("./node_modules/lodash/_listCacheClear.js"),o=i("./node_modules/lodash/_listCacheDelete.js"),r=i("./node_modules/lodash/_listCacheGet.js"),a=i("./node_modules/lodash/_listCacheHas.js"),s=i("./node_modules/lodash/_listCacheSet.js");function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,e.exports=l},"./node_modules/lodash/_Map.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(i("./node_modules/lodash/_root.js"),"Map");e.exports=n},"./node_modules/lodash/_MapCache.js":(e,t,i)=>{var n=i("./node_modules/lodash/_mapCacheClear.js"),o=i("./node_modules/lodash/_mapCacheDelete.js"),r=i("./node_modules/lodash/_mapCacheGet.js"),a=i("./node_modules/lodash/_mapCacheHas.js"),s=i("./node_modules/lodash/_mapCacheSet.js");function l(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,e.exports=l},"./node_modules/lodash/_Promise.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(i("./node_modules/lodash/_root.js"),"Promise");e.exports=n},"./node_modules/lodash/_Set.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(i("./node_modules/lodash/_root.js"),"Set");e.exports=n},"./node_modules/lodash/_SetCache.js":(e,t,i)=>{var n=i("./node_modules/lodash/_MapCache.js"),o=i("./node_modules/lodash/_setCacheAdd.js"),r=i("./node_modules/lodash/_setCacheHas.js");function a(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=r,e.exports=a},"./node_modules/lodash/_Stack.js":(e,t,i)=>{var n=i("./node_modules/lodash/_ListCache.js"),o=i("./node_modules/lodash/_stackClear.js"),r=i("./node_modules/lodash/_stackDelete.js"),a=i("./node_modules/lodash/_stackGet.js"),s=i("./node_modules/lodash/_stackHas.js"),l=i("./node_modules/lodash/_stackSet.js");function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},"./node_modules/lodash/_Symbol.js":(e,t,i)=>{var n=i("./node_modules/lodash/_root.js").Symbol;e.exports=n},"./node_modules/lodash/_Uint8Array.js":(e,t,i)=>{var n=i("./node_modules/lodash/_root.js").Uint8Array;e.exports=n},"./node_modules/lodash/_WeakMap.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(i("./node_modules/lodash/_root.js"),"WeakMap");e.exports=n},"./node_modules/lodash/_apply.js":e=>{e.exports=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}},"./node_modules/lodash/_arrayEach.js":e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n&&!1!==t(e[i],i,e););return e}},"./node_modules/lodash/_arrayFilter.js":e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=0,r=[];++i<n;){var a=e[i];t(a,i,e)&&(r[o++]=a)}return r}},"./node_modules/lodash/_arrayIncludes.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIndexOf.js");e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},"./node_modules/lodash/_arrayIncludesWith.js":e=>{e.exports=function(e,t,i){for(var n=-1,o=null==e?0:e.length;++n<o;)if(i(t,e[n]))return!0;return!1}},"./node_modules/lodash/_arrayLikeKeys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseTimes.js"),o=i("./node_modules/lodash/isArguments.js"),r=i("./node_modules/lodash/isArray.js"),a=i("./node_modules/lodash/isBuffer.js"),s=i("./node_modules/lodash/_isIndex.js"),l=i("./node_modules/lodash/isTypedArray.js"),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var i=r(e),d=!i&&o(e),p=!i&&!d&&a(e),u=!i&&!d&&!p&&l(e),m=i||d||p||u,h=m?n(e.length,String):[],f=h.length;for(var g in e)!t&&!c.call(e,g)||m&&("length"==g||p&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||h.push(g);return h}},"./node_modules/lodash/_arrayMap.js":e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,o=Array(n);++i<n;)o[i]=t(e[i],i,e);return o}},"./node_modules/lodash/_arrayPush.js":e=>{e.exports=function(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}},"./node_modules/lodash/_arrayReduce.js":e=>{e.exports=function(e,t,i,n){var o=-1,r=null==e?0:e.length;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}},"./node_modules/lodash/_arraySome.js":e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},"./node_modules/lodash/_asciiSize.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseProperty.js")("length");e.exports=n},"./node_modules/lodash/_assignMergeValue.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseAssignValue.js"),o=i("./node_modules/lodash/eq.js");e.exports=function(e,t,i){(void 0!==i&&!o(e[t],i)||void 0===i&&!(t in e))&&n(e,t,i)}},"./node_modules/lodash/_assignValue.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseAssignValue.js"),o=i("./node_modules/lodash/eq.js"),r=Object.prototype.hasOwnProperty;e.exports=function(e,t,i){var a=e[t];r.call(e,t)&&o(a,i)&&(void 0!==i||t in e)||n(e,t,i)}},"./node_modules/lodash/_assocIndexOf.js":(e,t,i)=>{var n=i("./node_modules/lodash/eq.js");e.exports=function(e,t){for(var i=e.length;i--;)if(n(e[i][0],t))return i;return-1}},"./node_modules/lodash/_baseAssign.js":(e,t,i)=>{var n=i("./node_modules/lodash/_copyObject.js"),o=i("./node_modules/lodash/keys.js");e.exports=function(e,t){return e&&n(t,o(t),e)}},"./node_modules/lodash/_baseAssignIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_copyObject.js"),o=i("./node_modules/lodash/keysIn.js");e.exports=function(e,t){return e&&n(t,o(t),e)}},"./node_modules/lodash/_baseAssignValue.js":(e,t,i)=>{var n=i("./node_modules/lodash/_defineProperty.js");e.exports=function(e,t,i){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}},"./node_modules/lodash/_baseClone.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Stack.js"),o=i("./node_modules/lodash/_arrayEach.js"),r=i("./node_modules/lodash/_assignValue.js"),a=i("./node_modules/lodash/_baseAssign.js"),s=i("./node_modules/lodash/_baseAssignIn.js"),l=i("./node_modules/lodash/_cloneBuffer.js"),c=i("./node_modules/lodash/_copyArray.js"),d=i("./node_modules/lodash/_copySymbols.js"),p=i("./node_modules/lodash/_copySymbolsIn.js"),u=i("./node_modules/lodash/_getAllKeys.js"),m=i("./node_modules/lodash/_getAllKeysIn.js"),h=i("./node_modules/lodash/_getTag.js"),f=i("./node_modules/lodash/_initCloneArray.js"),g=i("./node_modules/lodash/_initCloneByTag.js"),v=i("./node_modules/lodash/_initCloneObject.js"),x=i("./node_modules/lodash/isArray.js"),y=i("./node_modules/lodash/isBuffer.js"),b=i("./node_modules/lodash/isMap.js"),C=i("./node_modules/lodash/isObject.js"),S=i("./node_modules/lodash/isSet.js"),w=i("./node_modules/lodash/keys.js"),I=i("./node_modules/lodash/keysIn.js"),_="[object Arguments]",D="[object Function]",R="[object Object]",A={};A[_]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[R]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[D]=A["[object WeakMap]"]=!1,e.exports=function e(t,i,T,F,E,M){var O,k=1&i,j=2&i,P=4&i;if(T&&(O=E?T(t,F,E,M):T(t)),void 0!==O)return O;if(!C(t))return t;var N=x(t);if(N){if(O=f(t),!k)return c(t,O)}else{var V=h(t),L=V==D||"[object GeneratorFunction]"==V;if(y(t))return l(t,k);if(V==R||V==_||L&&!E){if(O=j||L?{}:v(t),!k)return j?p(t,s(O,t)):d(t,a(O,t))}else{if(!A[V])return E?t:{};O=g(t,V,k)}}M||(M=new n);var B=M.get(t);if(B)return B;M.set(t,O),S(t)?t.forEach(function(n){O.add(e(n,i,T,n,t,M))}):b(t)&&t.forEach(function(n,o){O.set(o,e(n,i,T,o,t,M))});var $=N?void 0:(P?j?m:u:j?I:w)(t);return o($||t,function(n,o){$&&(n=t[o=n]),r(O,o,e(n,i,T,o,t,M))}),O}},"./node_modules/lodash/_baseCreate.js":(e,t,i)=>{var n=i("./node_modules/lodash/isObject.js"),o=Object.create,r=function(){function e(){}return function(t){if(!n(t))return{};if(o)return o(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();e.exports=r},"./node_modules/lodash/_baseEach.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseForOwn.js"),o=i("./node_modules/lodash/_createBaseEach.js")(n);e.exports=o},"./node_modules/lodash/_baseExtremum.js":(e,t,i)=>{var n=i("./node_modules/lodash/isSymbol.js");e.exports=function(e,t,i){for(var o=-1,r=e.length;++o<r;){var a=e[o],s=t(a);if(null!=s&&(void 0===l?s==s&&!n(s):i(s,l)))var l=s,c=a}return c}},"./node_modules/lodash/_baseFilter.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseEach.js");e.exports=function(e,t){var i=[];return n(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i}},"./node_modules/lodash/_baseFindIndex.js":e=>{e.exports=function(e,t,i,n){for(var o=e.length,r=i+(n?1:-1);n?r--:++r<o;)if(t(e[r],r,e))return r;return-1}},"./node_modules/lodash/_baseFlatten.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayPush.js"),o=i("./node_modules/lodash/_isFlattenable.js");e.exports=function e(t,i,r,a,s){var l=-1,c=t.length;for(r||(r=o),s||(s=[]);++l<c;){var d=t[l];i>0&&r(d)?i>1?e(d,i-1,r,a,s):n(s,d):a||(s[s.length]=d)}return s}},"./node_modules/lodash/_baseFor.js":(e,t,i)=>{var n=i("./node_modules/lodash/_createBaseFor.js")();e.exports=n},"./node_modules/lodash/_baseForOwn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFor.js"),o=i("./node_modules/lodash/keys.js");e.exports=function(e,t){return e&&n(e,t,o)}},"./node_modules/lodash/_baseGet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_castPath.js"),o=i("./node_modules/lodash/_toKey.js");e.exports=function(e,t){for(var i=0,r=(t=n(t,e)).length;null!=e&&i<r;)e=e[o(t[i++])];return i&&i==r?e:void 0}},"./node_modules/lodash/_baseGetAllKeys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayPush.js"),o=i("./node_modules/lodash/isArray.js");e.exports=function(e,t,i){var r=t(e);return o(e)?r:n(r,i(e))}},"./node_modules/lodash/_baseGetTag.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=i("./node_modules/lodash/_getRawTag.js"),r=i("./node_modules/lodash/_objectToString.js"),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):r(e)}},"./node_modules/lodash/_baseGt.js":e=>{e.exports=function(e,t){return e>t}},"./node_modules/lodash/_baseHas.js":e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,i){return null!=e&&t.call(e,i)}},"./node_modules/lodash/_baseHasIn.js":e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},"./node_modules/lodash/_baseIndexOf.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFindIndex.js"),o=i("./node_modules/lodash/_baseIsNaN.js"),r=i("./node_modules/lodash/_strictIndexOf.js");e.exports=function(e,t,i){return t==t?r(e,t,i):n(e,o,i)}},"./node_modules/lodash/_baseIsArguments.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},"./node_modules/lodash/_baseIsEqual.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsEqualDeep.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function e(t,i,r,a,s){return t===i||(null==t||null==i||!o(t)&&!o(i)?t!=t&&i!=i:n(t,i,r,a,e,s))}},"./node_modules/lodash/_baseIsEqualDeep.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Stack.js"),o=i("./node_modules/lodash/_equalArrays.js"),r=i("./node_modules/lodash/_equalByTag.js"),a=i("./node_modules/lodash/_equalObjects.js"),s=i("./node_modules/lodash/_getTag.js"),l=i("./node_modules/lodash/isArray.js"),c=i("./node_modules/lodash/isBuffer.js"),d=i("./node_modules/lodash/isTypedArray.js"),p="[object Arguments]",u="[object Array]",m="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,f,g,v){var x=l(e),y=l(t),b=x?u:s(e),C=y?u:s(t),S=(b=b==p?m:b)==m,w=(C=C==p?m:C)==m,I=b==C;if(I&&c(e)){if(!c(t))return!1;x=!0,S=!1}if(I&&!S)return v||(v=new n),x||d(e)?o(e,t,i,f,g,v):r(e,t,b,i,f,g,v);if(!(1&i)){var _=S&&h.call(e,"__wrapped__"),D=w&&h.call(t,"__wrapped__");if(_||D){var R=_?e.value():e,A=D?t.value():t;return v||(v=new n),g(R,A,i,f,v)}}return!!I&&(v||(v=new n),a(e,t,i,f,g,v))}},"./node_modules/lodash/_baseIsMap.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getTag.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},"./node_modules/lodash/_baseIsMatch.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Stack.js"),o=i("./node_modules/lodash/_baseIsEqual.js");e.exports=function(e,t,i,r){var a=i.length,s=a,l=!r;if(null==e)return!s;for(e=Object(e);a--;){var c=i[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var d=(c=i[a])[0],p=e[d],u=c[1];if(l&&c[2]){if(void 0===p&&!(d in e))return!1}else{var m=new n;if(r)var h=r(p,u,d,e,t,m);if(!(void 0===h?o(u,p,3,r,m):h))return!1}}return!0}},"./node_modules/lodash/_baseIsNaN.js":e=>{e.exports=function(e){return e!=e}},"./node_modules/lodash/_baseIsNative.js":(e,t,i)=>{var n=i("./node_modules/lodash/isFunction.js"),o=i("./node_modules/lodash/_isMasked.js"),r=i("./node_modules/lodash/isObject.js"),a=i("./node_modules/lodash/_toSource.js"),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,p=c.hasOwnProperty,u=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!r(e)||o(e))&&(n(e)?u:s).test(a(e))}},"./node_modules/lodash/_baseIsSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getTag.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},"./node_modules/lodash/_baseIsTypedArray.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/isLength.js"),r=i("./node_modules/lodash/isObjectLike.js"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return r(e)&&o(e.length)&&!!a[n(e)]}},"./node_modules/lodash/_baseIteratee.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseMatches.js"),o=i("./node_modules/lodash/_baseMatchesProperty.js"),r=i("./node_modules/lodash/identity.js"),a=i("./node_modules/lodash/isArray.js"),s=i("./node_modules/lodash/property.js");e.exports=function(e){return"function"==typeof e?e:null==e?r:"object"==typeof e?a(e)?o(e[0],e[1]):n(e):s(e)}},"./node_modules/lodash/_baseKeys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_isPrototype.js"),o=i("./node_modules/lodash/_nativeKeys.js"),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var i in Object(e))r.call(e,i)&&"constructor"!=i&&t.push(i);return t}},"./node_modules/lodash/_baseKeysIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/isObject.js"),o=i("./node_modules/lodash/_isPrototype.js"),r=i("./node_modules/lodash/_nativeKeysIn.js"),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return r(e);var t=o(e),i=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&i.push(s);return i}},"./node_modules/lodash/_baseLt.js":e=>{e.exports=function(e,t){return e<t}},"./node_modules/lodash/_baseMap.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseEach.js"),o=i("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){var i=-1,r=o(e)?Array(e.length):[];return n(e,function(e,n,o){r[++i]=t(e,n,o)}),r}},"./node_modules/lodash/_baseMatches.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsMatch.js"),o=i("./node_modules/lodash/_getMatchData.js"),r=i("./node_modules/lodash/_matchesStrictComparable.js");e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?r(t[0][0],t[0][1]):function(i){return i===e||n(i,e,t)}}},"./node_modules/lodash/_baseMatchesProperty.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsEqual.js"),o=i("./node_modules/lodash/get.js"),r=i("./node_modules/lodash/hasIn.js"),a=i("./node_modules/lodash/_isKey.js"),s=i("./node_modules/lodash/_isStrictComparable.js"),l=i("./node_modules/lodash/_matchesStrictComparable.js"),c=i("./node_modules/lodash/_toKey.js");e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(i){var a=o(i,e);return void 0===a&&a===t?r(i,e):n(t,a,3)}}},"./node_modules/lodash/_baseMerge.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Stack.js"),o=i("./node_modules/lodash/_assignMergeValue.js"),r=i("./node_modules/lodash/_baseFor.js"),a=i("./node_modules/lodash/_baseMergeDeep.js"),s=i("./node_modules/lodash/isObject.js"),l=i("./node_modules/lodash/keysIn.js"),c=i("./node_modules/lodash/_safeGet.js");e.exports=function e(t,i,d,p,u){t!==i&&r(i,function(r,l){if(u||(u=new n),s(r))a(t,i,l,d,e,p,u);else{var m=p?p(c(t,l),r,l+"",t,i,u):void 0;void 0===m&&(m=r),o(t,l,m)}},l)}},"./node_modules/lodash/_baseMergeDeep.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assignMergeValue.js"),o=i("./node_modules/lodash/_cloneBuffer.js"),r=i("./node_modules/lodash/_cloneTypedArray.js"),a=i("./node_modules/lodash/_copyArray.js"),s=i("./node_modules/lodash/_initCloneObject.js"),l=i("./node_modules/lodash/isArguments.js"),c=i("./node_modules/lodash/isArray.js"),d=i("./node_modules/lodash/isArrayLikeObject.js"),p=i("./node_modules/lodash/isBuffer.js"),u=i("./node_modules/lodash/isFunction.js"),m=i("./node_modules/lodash/isObject.js"),h=i("./node_modules/lodash/isPlainObject.js"),f=i("./node_modules/lodash/isTypedArray.js"),g=i("./node_modules/lodash/_safeGet.js"),v=i("./node_modules/lodash/toPlainObject.js");e.exports=function(e,t,i,x,y,b,C){var S=g(e,i),w=g(t,i),I=C.get(w);if(I)n(e,i,I);else{var _=b?b(S,w,i+"",e,t,C):void 0,D=void 0===_;if(D){var R=c(w),A=!R&&p(w),T=!R&&!A&&f(w);_=w,R||A||T?c(S)?_=S:d(S)?_=a(S):A?(D=!1,_=o(w,!0)):T?(D=!1,_=r(w,!0)):_=[]:h(w)||l(w)?(_=S,l(S)?_=v(S):m(S)&&!u(S)||(_=s(w))):D=!1}D&&(C.set(w,_),y(_,w,x,b,C),C.delete(w)),n(e,i,_)}}},"./node_modules/lodash/_baseOrderBy.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayMap.js"),o=i("./node_modules/lodash/_baseGet.js"),r=i("./node_modules/lodash/_baseIteratee.js"),a=i("./node_modules/lodash/_baseMap.js"),s=i("./node_modules/lodash/_baseSortBy.js"),l=i("./node_modules/lodash/_baseUnary.js"),c=i("./node_modules/lodash/_compareMultiple.js"),d=i("./node_modules/lodash/identity.js"),p=i("./node_modules/lodash/isArray.js");e.exports=function(e,t,i){t=t.length?n(t,function(e){return p(e)?function(t){return o(t,1===e.length?e[0]:e)}:e}):[d];var u=-1;t=n(t,l(r));var m=a(e,function(e,i,o){return{criteria:n(t,function(t){return t(e)}),index:++u,value:e}});return s(m,function(e,t){return c(e,t,i)})}},"./node_modules/lodash/_basePick.js":(e,t,i)=>{var n=i("./node_modules/lodash/_basePickBy.js"),o=i("./node_modules/lodash/hasIn.js");e.exports=function(e,t){return n(e,t,function(t,i){return o(e,i)})}},"./node_modules/lodash/_basePickBy.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGet.js"),o=i("./node_modules/lodash/_baseSet.js"),r=i("./node_modules/lodash/_castPath.js");e.exports=function(e,t,i){for(var a=-1,s=t.length,l={};++a<s;){var c=t[a],d=n(e,c);i(d,c)&&o(l,r(c,e),d)}return l}},"./node_modules/lodash/_baseProperty.js":e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"./node_modules/lodash/_basePropertyDeep.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGet.js");e.exports=function(e){return function(t){return n(t,e)}}},"./node_modules/lodash/_baseRange.js":e=>{var t=Math.ceil,i=Math.max;e.exports=function(e,n,o,r){for(var a=-1,s=i(t((n-e)/(o||1)),0),l=Array(s);s--;)l[r?s:++a]=e,e+=o;return l}},"./node_modules/lodash/_baseReduce.js":e=>{e.exports=function(e,t,i,n,o){return o(e,function(e,o,r){i=n?(n=!1,e):t(i,e,o,r)}),i}},"./node_modules/lodash/_baseRest.js":(e,t,i)=>{var n=i("./node_modules/lodash/identity.js"),o=i("./node_modules/lodash/_overRest.js"),r=i("./node_modules/lodash/_setToString.js");e.exports=function(e,t){return r(o(e,t,n),e+"")}},"./node_modules/lodash/_baseSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assignValue.js"),o=i("./node_modules/lodash/_castPath.js"),r=i("./node_modules/lodash/_isIndex.js"),a=i("./node_modules/lodash/isObject.js"),s=i("./node_modules/lodash/_toKey.js");e.exports=function(e,t,i,l){if(!a(e))return e;for(var c=-1,d=(t=o(t,e)).length,p=d-1,u=e;null!=u&&++c<d;){var m=s(t[c]),h=i;if("__proto__"===m||"constructor"===m||"prototype"===m)return e;if(c!=p){var f=u[m];void 0===(h=l?l(f,m,u):void 0)&&(h=a(f)?f:r(t[c+1])?[]:{})}n(u,m,h),u=u[m]}return e}},"./node_modules/lodash/_baseSetToString.js":(e,t,i)=>{var n=i("./node_modules/lodash/constant.js"),o=i("./node_modules/lodash/_defineProperty.js"),r=i("./node_modules/lodash/identity.js"),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:r;e.exports=a},"./node_modules/lodash/_baseSortBy.js":e=>{e.exports=function(e,t){var i=e.length;for(e.sort(t);i--;)e[i]=e[i].value;return e}},"./node_modules/lodash/_baseTimes.js":e=>{e.exports=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}},"./node_modules/lodash/_baseToString.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=i("./node_modules/lodash/_arrayMap.js"),r=i("./node_modules/lodash/isArray.js"),a=i("./node_modules/lodash/isSymbol.js"),s=n?n.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(r(t))return o(t,e)+"";if(a(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-Infinity?"-0":i}},"./node_modules/lodash/_baseTrim.js":(e,t,i)=>{var n=i("./node_modules/lodash/_trimmedEndIndex.js"),o=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(o,""):e}},"./node_modules/lodash/_baseUnary.js":e=>{e.exports=function(e){return function(t){return e(t)}}},"./node_modules/lodash/_baseUniq.js":(e,t,i)=>{var n=i("./node_modules/lodash/_SetCache.js"),o=i("./node_modules/lodash/_arrayIncludes.js"),r=i("./node_modules/lodash/_arrayIncludesWith.js"),a=i("./node_modules/lodash/_cacheHas.js"),s=i("./node_modules/lodash/_createSet.js"),l=i("./node_modules/lodash/_setToArray.js");e.exports=function(e,t,i){var c=-1,d=o,p=e.length,u=!0,m=[],h=m;if(i)u=!1,d=r;else if(p>=200){var f=t?null:s(e);if(f)return l(f);u=!1,d=a,h=new n}else h=t?[]:m;e:for(;++c<p;){var g=e[c],v=t?t(g):g;if(g=i||0!==g?g:0,u&&v==v){for(var x=h.length;x--;)if(h[x]===v)continue e;t&&h.push(v),m.push(g)}else d(h,v,i)||(h!==m&&h.push(v),m.push(g))}return m}},"./node_modules/lodash/_baseValues.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayMap.js");e.exports=function(e,t){return n(t,function(t){return e[t]})}},"./node_modules/lodash/_baseZipObject.js":e=>{e.exports=function(e,t,i){for(var n=-1,o=e.length,r=t.length,a={};++n<o;){var s=n<r?t[n]:void 0;i(a,e[n],s)}return a}},"./node_modules/lodash/_cacheHas.js":e=>{e.exports=function(e,t){return e.has(t)}},"./node_modules/lodash/_castFunction.js":(e,t,i)=>{var n=i("./node_modules/lodash/identity.js");e.exports=function(e){return"function"==typeof e?e:n}},"./node_modules/lodash/_castPath.js":(e,t,i)=>{var n=i("./node_modules/lodash/isArray.js"),o=i("./node_modules/lodash/_isKey.js"),r=i("./node_modules/lodash/_stringToPath.js"),a=i("./node_modules/lodash/toString.js");e.exports=function(e,t){return n(e)?e:o(e,t)?[e]:r(a(e))}},"./node_modules/lodash/_cloneArrayBuffer.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Uint8Array.js");e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},"./node_modules/lodash/_cloneBuffer.js":(e,t,i)=>{e=i.nmd(e);var n=i("./node_modules/lodash/_root.js"),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,a=r&&r.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var i=e.length,n=s?s(i):new e.constructor(i);return e.copy(n),n}},"./node_modules/lodash/_cloneDataView.js":(e,t,i)=>{var n=i("./node_modules/lodash/_cloneArrayBuffer.js");e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}},"./node_modules/lodash/_cloneRegExp.js":e=>{var t=/\w*$/;e.exports=function(e){var i=new e.constructor(e.source,t.exec(e));return i.lastIndex=e.lastIndex,i}},"./node_modules/lodash/_cloneSymbol.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=n?n.prototype:void 0,r=o?o.valueOf:void 0;e.exports=function(e){return r?Object(r.call(e)):{}}},"./node_modules/lodash/_cloneTypedArray.js":(e,t,i)=>{var n=i("./node_modules/lodash/_cloneArrayBuffer.js");e.exports=function(e,t){var i=t?n(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}},"./node_modules/lodash/_compareAscending.js":(e,t,i)=>{var n=i("./node_modules/lodash/isSymbol.js");e.exports=function(e,t){if(e!==t){var i=void 0!==e,o=null===e,r=e==e,a=n(e),s=void 0!==t,l=null===t,c=t==t,d=n(t);if(!l&&!d&&!a&&e>t||a&&s&&c&&!l&&!d||o&&s&&c||!i&&c||!r)return 1;if(!o&&!a&&!d&&e<t||d&&i&&r&&!o&&!a||l&&i&&r||!s&&r||!c)return-1}return 0}},"./node_modules/lodash/_compareMultiple.js":(e,t,i)=>{var n=i("./node_modules/lodash/_compareAscending.js");e.exports=function(e,t,i){for(var o=-1,r=e.criteria,a=t.criteria,s=r.length,l=i.length;++o<s;){var c=n(r[o],a[o]);if(c)return o>=l?c:c*("desc"==i[o]?-1:1)}return e.index-t.index}},"./node_modules/lodash/_copyArray.js":e=>{e.exports=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}},"./node_modules/lodash/_copyObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assignValue.js"),o=i("./node_modules/lodash/_baseAssignValue.js");e.exports=function(e,t,i,r){var a=!i;i||(i={});for(var s=-1,l=t.length;++s<l;){var c=t[s],d=r?r(i[c],e[c],c,i,e):void 0;void 0===d&&(d=e[c]),a?o(i,c,d):n(i,c,d)}return i}},"./node_modules/lodash/_copySymbols.js":(e,t,i)=>{var n=i("./node_modules/lodash/_copyObject.js"),o=i("./node_modules/lodash/_getSymbols.js");e.exports=function(e,t){return n(e,o(e),t)}},"./node_modules/lodash/_copySymbolsIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_copyObject.js"),o=i("./node_modules/lodash/_getSymbolsIn.js");e.exports=function(e,t){return n(e,o(e),t)}},"./node_modules/lodash/_coreJsData.js":(e,t,i)=>{var n=i("./node_modules/lodash/_root.js")["__core-js_shared__"];e.exports=n},"./node_modules/lodash/_createAssigner.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseRest.js"),o=i("./node_modules/lodash/_isIterateeCall.js");e.exports=function(e){return n(function(t,i){var n=-1,r=i.length,a=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(i[0],i[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++n<r;){var l=i[n];l&&e(t,l,n,a)}return t})}},"./node_modules/lodash/_createBaseEach.js":(e,t,i)=>{var n=i("./node_modules/lodash/isArrayLike.js");e.exports=function(e,t){return function(i,o){if(null==i)return i;if(!n(i))return e(i,o);for(var r=i.length,a=t?r:-1,s=Object(i);(t?a--:++a<r)&&!1!==o(s[a],a,s););return i}}},"./node_modules/lodash/_createBaseFor.js":e=>{e.exports=function(e){return function(t,i,n){for(var o=-1,r=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===i(r[l],l,r))break}return t}}},"./node_modules/lodash/_createFind.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIteratee.js"),o=i("./node_modules/lodash/isArrayLike.js"),r=i("./node_modules/lodash/keys.js");e.exports=function(e){return function(t,i,a){var s=Object(t);if(!o(t)){var l=n(i,3);t=r(t),i=function(e){return l(s[e],e,s)}}var c=e(t,i,a);return c>-1?s[l?t[c]:c]:void 0}}},"./node_modules/lodash/_createRange.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseRange.js"),o=i("./node_modules/lodash/_isIterateeCall.js"),r=i("./node_modules/lodash/toFinite.js");e.exports=function(e){return function(t,i,a){return a&&"number"!=typeof a&&o(t,i,a)&&(i=a=void 0),t=r(t),void 0===i?(i=t,t=0):i=r(i),a=void 0===a?t<i?1:-1:r(a),n(t,i,a,e)}}},"./node_modules/lodash/_createSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Set.js"),o=i("./node_modules/lodash/noop.js"),r=i("./node_modules/lodash/_setToArray.js"),a=n&&1/r(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;e.exports=a},"./node_modules/lodash/_defineProperty.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=o},"./node_modules/lodash/_equalArrays.js":(e,t,i)=>{var n=i("./node_modules/lodash/_SetCache.js"),o=i("./node_modules/lodash/_arraySome.js"),r=i("./node_modules/lodash/_cacheHas.js");e.exports=function(e,t,i,a,s,l){var c=1&i,d=e.length,p=t.length;if(d!=p&&!(c&&p>d))return!1;var u=l.get(e),m=l.get(t);if(u&&m)return u==t&&m==e;var h=-1,f=!0,g=2&i?new n:void 0;for(l.set(e,t),l.set(t,e);++h<d;){var v=e[h],x=t[h];if(a)var y=c?a(x,v,h,t,e,l):a(v,x,h,e,t,l);if(void 0!==y){if(y)continue;f=!1;break}if(g){if(!o(t,function(e,t){if(!r(g,t)&&(v===e||s(v,e,i,a,l)))return g.push(t)})){f=!1;break}}else if(v!==x&&!s(v,x,i,a,l)){f=!1;break}}return l.delete(e),l.delete(t),f}},"./node_modules/lodash/_equalByTag.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=i("./node_modules/lodash/_Uint8Array.js"),r=i("./node_modules/lodash/eq.js"),a=i("./node_modules/lodash/_equalArrays.js"),s=i("./node_modules/lodash/_mapToArray.js"),l=i("./node_modules/lodash/_setToArray.js"),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,i,n,c,p,u){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!p(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return r(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var m=s;case"[object Set]":var h=1&n;if(m||(m=l),e.size!=t.size&&!h)return!1;var f=u.get(e);if(f)return f==t;n|=2,u.set(e,t);var g=a(m(e),m(t),n,c,p,u);return u.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},"./node_modules/lodash/_equalObjects.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getAllKeys.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,r,a,s){var l=1&i,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var p=d;p--;){var u=c[p];if(!(l?u in t:o.call(t,u)))return!1}var m=s.get(e),h=s.get(t);if(m&&h)return m==t&&h==e;var f=!0;s.set(e,t),s.set(t,e);for(var g=l;++p<d;){var v=e[u=c[p]],x=t[u];if(r)var y=l?r(x,v,u,t,e,s):r(v,x,u,e,t,s);if(!(void 0===y?v===x||a(v,x,i,r,s):y)){f=!1;break}g||(g="constructor"==u)}if(f&&!g){var b=e.constructor,C=t.constructor;b==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof C&&C instanceof C||(f=!1)}return s.delete(e),s.delete(t),f}},"./node_modules/lodash/_flatRest.js":(e,t,i)=>{var n=i("./node_modules/lodash/flatten.js"),o=i("./node_modules/lodash/_overRest.js"),r=i("./node_modules/lodash/_setToString.js");e.exports=function(e){return r(o(e,void 0,n),e+"")}},"./node_modules/lodash/_freeGlobal.js":e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},"./node_modules/lodash/_getAllKeys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetAllKeys.js"),o=i("./node_modules/lodash/_getSymbols.js"),r=i("./node_modules/lodash/keys.js");e.exports=function(e){return n(e,r,o)}},"./node_modules/lodash/_getAllKeysIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetAllKeys.js"),o=i("./node_modules/lodash/_getSymbolsIn.js"),r=i("./node_modules/lodash/keysIn.js");e.exports=function(e){return n(e,r,o)}},"./node_modules/lodash/_getMapData.js":(e,t,i)=>{var n=i("./node_modules/lodash/_isKeyable.js");e.exports=function(e,t){var i=e.__data__;return n(t)?i["string"==typeof t?"string":"hash"]:i.map}},"./node_modules/lodash/_getMatchData.js":(e,t,i)=>{var n=i("./node_modules/lodash/_isStrictComparable.js"),o=i("./node_modules/lodash/keys.js");e.exports=function(e){for(var t=o(e),i=t.length;i--;){var r=t[i],a=e[r];t[i]=[r,a,n(a)]}return t}},"./node_modules/lodash/_getNative.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsNative.js"),o=i("./node_modules/lodash/_getValue.js");e.exports=function(e,t){var i=o(e,t);return n(i)?i:void 0}},"./node_modules/lodash/_getPrototype.js":(e,t,i)=>{var n=i("./node_modules/lodash/_overArg.js")(Object.getPrototypeOf,Object);e.exports=n},"./node_modules/lodash/_getRawTag.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=r.call(e,s),i=e[s];try{e[s]=void 0;var n=!0}catch(l){}var o=a.call(e);return n&&(t?e[s]=i:delete e[s]),o}},"./node_modules/lodash/_getSymbols.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayFilter.js"),o=i("./node_modules/lodash/stubArray.js"),r=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return r.call(e,t)}))}:o;e.exports=s},"./node_modules/lodash/_getSymbolsIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayPush.js"),o=i("./node_modules/lodash/_getPrototype.js"),r=i("./node_modules/lodash/_getSymbols.js"),a=i("./node_modules/lodash/stubArray.js"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,r(e)),e=o(e);return t}:a;e.exports=s},"./node_modules/lodash/_getTag.js":(e,t,i)=>{var n=i("./node_modules/lodash/_DataView.js"),o=i("./node_modules/lodash/_Map.js"),r=i("./node_modules/lodash/_Promise.js"),a=i("./node_modules/lodash/_Set.js"),s=i("./node_modules/lodash/_WeakMap.js"),l=i("./node_modules/lodash/_baseGetTag.js"),c=i("./node_modules/lodash/_toSource.js"),d="[object Map]",p="[object Promise]",u="[object Set]",m="[object WeakMap]",h="[object DataView]",f=c(n),g=c(o),v=c(r),x=c(a),y=c(s),b=l;(n&&b(new n(new ArrayBuffer(1)))!=h||o&&b(new o)!=d||r&&b(r.resolve())!=p||a&&b(new a)!=u||s&&b(new s)!=m)&&(b=function(e){var t=l(e),i="[object Object]"==t?e.constructor:void 0,n=i?c(i):"";if(n)switch(n){case f:return h;case g:return d;case v:return p;case x:return u;case y:return m}return t}),e.exports=b},"./node_modules/lodash/_getValue.js":e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},"./node_modules/lodash/_hasPath.js":(e,t,i)=>{var n=i("./node_modules/lodash/_castPath.js"),o=i("./node_modules/lodash/isArguments.js"),r=i("./node_modules/lodash/isArray.js"),a=i("./node_modules/lodash/_isIndex.js"),s=i("./node_modules/lodash/isLength.js"),l=i("./node_modules/lodash/_toKey.js");e.exports=function(e,t,i){for(var c=-1,d=(t=n(t,e)).length,p=!1;++c<d;){var u=l(t[c]);if(!(p=null!=e&&i(e,u)))break;e=e[u]}return p||++c!=d?p:!!(d=null==e?0:e.length)&&s(d)&&a(u,d)&&(r(e)||o(e))}},"./node_modules/lodash/_hasUnicode.js":e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},"./node_modules/lodash/_hashClear.js":(e,t,i)=>{var n=i("./node_modules/lodash/_nativeCreate.js");e.exports=function(){this.__data__=n?n(null):{},this.size=0}},"./node_modules/lodash/_hashDelete.js":e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},"./node_modules/lodash/_hashGet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return o.call(t,e)?t[e]:void 0}},"./node_modules/lodash/_hashHas.js":(e,t,i)=>{var n=i("./node_modules/lodash/_nativeCreate.js"),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:o.call(t,e)}},"./node_modules/lodash/_hashSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_nativeCreate.js");e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},"./node_modules/lodash/_initCloneArray.js":e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var i=e.length,n=new e.constructor(i);return i&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},"./node_modules/lodash/_initCloneByTag.js":(e,t,i)=>{var n=i("./node_modules/lodash/_cloneArrayBuffer.js"),o=i("./node_modules/lodash/_cloneDataView.js"),r=i("./node_modules/lodash/_cloneRegExp.js"),a=i("./node_modules/lodash/_cloneSymbol.js"),s=i("./node_modules/lodash/_cloneTypedArray.js");e.exports=function(e,t,i){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,i);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return r(e);case"[object Symbol]":return a(e)}}},"./node_modules/lodash/_initCloneObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseCreate.js"),o=i("./node_modules/lodash/_getPrototype.js"),r=i("./node_modules/lodash/_isPrototype.js");e.exports=function(e){return"function"!=typeof e.constructor||r(e)?{}:n(o(e))}},"./node_modules/lodash/_isFlattenable.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Symbol.js"),o=i("./node_modules/lodash/isArguments.js"),r=i("./node_modules/lodash/isArray.js"),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return r(e)||o(e)||!!(a&&e&&e[a])}},"./node_modules/lodash/_isIndex.js":e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var n=typeof e;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<i}},"./node_modules/lodash/_isIterateeCall.js":(e,t,i)=>{var n=i("./node_modules/lodash/eq.js"),o=i("./node_modules/lodash/isArrayLike.js"),r=i("./node_modules/lodash/_isIndex.js"),a=i("./node_modules/lodash/isObject.js");e.exports=function(e,t,i){if(!a(i))return!1;var s=typeof t;return!!("number"==s?o(i)&&r(t,i.length):"string"==s&&t in i)&&n(i[t],e)}},"./node_modules/lodash/_isKey.js":(e,t,i)=>{var n=i("./node_modules/lodash/isArray.js"),o=i("./node_modules/lodash/isSymbol.js"),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!o(e))||(a.test(e)||!r.test(e)||null!=t&&e in Object(t))}},"./node_modules/lodash/_isKeyable.js":e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},"./node_modules/lodash/_isMasked.js":(e,t,i)=>{var n,o=i("./node_modules/lodash/_coreJsData.js"),r=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!r&&r in e}},"./node_modules/lodash/_isPrototype.js":e=>{var t=Object.prototype;e.exports=function(e){var i=e&&e.constructor;return e===("function"==typeof i&&i.prototype||t)}},"./node_modules/lodash/_isStrictComparable.js":(e,t,i)=>{var n=i("./node_modules/lodash/isObject.js");e.exports=function(e){return e==e&&!n(e)}},"./node_modules/lodash/_listCacheClear.js":e=>{e.exports=function(){this.__data__=[],this.size=0}},"./node_modules/lodash/_listCacheDelete.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assocIndexOf.js"),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,i=n(t,e);return!(i<0)&&(i==t.length-1?t.pop():o.call(t,i,1),--this.size,!0)}},"./node_modules/lodash/_listCacheGet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){var t=this.__data__,i=n(t,e);return i<0?void 0:t[i][1]}},"./node_modules/lodash/_listCacheHas.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e){return n(this.__data__,e)>-1}},"./node_modules/lodash/_listCacheSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assocIndexOf.js");e.exports=function(e,t){var i=this.__data__,o=n(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this}},"./node_modules/lodash/_mapCacheClear.js":(e,t,i)=>{var n=i("./node_modules/lodash/_Hash.js"),o=i("./node_modules/lodash/_ListCache.js"),r=i("./node_modules/lodash/_Map.js");e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(r||o),string:new n}}},"./node_modules/lodash/_mapCacheDelete.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getMapData.js");e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},"./node_modules/lodash/_mapCacheGet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getMapData.js");e.exports=function(e){return n(this,e).get(e)}},"./node_modules/lodash/_mapCacheHas.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getMapData.js");e.exports=function(e){return n(this,e).has(e)}},"./node_modules/lodash/_mapCacheSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getMapData.js");e.exports=function(e,t){var i=n(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}},"./node_modules/lodash/_mapToArray.js":e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach(function(e,n){i[++t]=[n,e]}),i}},"./node_modules/lodash/_matchesStrictComparable.js":e=>{e.exports=function(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}},"./node_modules/lodash/_memoizeCapped.js":(e,t,i)=>{var n=i("./node_modules/lodash/memoize.js");e.exports=function(e){var t=n(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t}},"./node_modules/lodash/_nativeCreate.js":(e,t,i)=>{var n=i("./node_modules/lodash/_getNative.js")(Object,"create");e.exports=n},"./node_modules/lodash/_nativeKeys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_overArg.js")(Object.keys,Object);e.exports=n},"./node_modules/lodash/_nativeKeysIn.js":e=>{e.exports=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}},"./node_modules/lodash/_nodeUtil.js":(e,t,i)=>{e=i.nmd(e);var n=i("./node_modules/lodash/_freeGlobal.js"),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,a=r&&r.exports===o&&n.process,s=function(){try{var e=r&&r.require&&r.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},"./node_modules/lodash/_objectToString.js":e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},"./node_modules/lodash/_overArg.js":e=>{e.exports=function(e,t){return function(i){return e(t(i))}}},"./node_modules/lodash/_overRest.js":(e,t,i)=>{var n=i("./node_modules/lodash/_apply.js"),o=Math.max;e.exports=function(e,t,i){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),l=Array(s);++a<s;)l[a]=r[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=r[a];return c[t]=i(l),n(e,this,c)}}},"./node_modules/lodash/_root.js":(e,t,i)=>{var n=i("./node_modules/lodash/_freeGlobal.js"),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();e.exports=r},"./node_modules/lodash/_safeGet.js":e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},"./node_modules/lodash/_setCacheAdd.js":e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},"./node_modules/lodash/_setCacheHas.js":e=>{e.exports=function(e){return this.__data__.has(e)}},"./node_modules/lodash/_setToArray.js":e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}},"./node_modules/lodash/_setToString.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseSetToString.js"),o=i("./node_modules/lodash/_shortOut.js")(n);e.exports=o},"./node_modules/lodash/_shortOut.js":e=>{var t=Date.now;e.exports=function(e){var i=0,n=0;return function(){var o=t(),r=16-(o-n);if(n=o,r>0){if(++i>=800)return arguments[0]}else i=0;return e.apply(void 0,arguments)}}},"./node_modules/lodash/_stackClear.js":(e,t,i)=>{var n=i("./node_modules/lodash/_ListCache.js");e.exports=function(){this.__data__=new n,this.size=0}},"./node_modules/lodash/_stackDelete.js":e=>{e.exports=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}},"./node_modules/lodash/_stackGet.js":e=>{e.exports=function(e){return this.__data__.get(e)}},"./node_modules/lodash/_stackHas.js":e=>{e.exports=function(e){return this.__data__.has(e)}},"./node_modules/lodash/_stackSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_ListCache.js"),o=i("./node_modules/lodash/_Map.js"),r=i("./node_modules/lodash/_MapCache.js");e.exports=function(e,t){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(e,t),this.size=i.size,this}},"./node_modules/lodash/_strictIndexOf.js":e=>{e.exports=function(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}},"./node_modules/lodash/_stringSize.js":(e,t,i)=>{var n=i("./node_modules/lodash/_asciiSize.js"),o=i("./node_modules/lodash/_hasUnicode.js"),r=i("./node_modules/lodash/_unicodeSize.js");e.exports=function(e){return o(e)?r(e):n(e)}},"./node_modules/lodash/_stringToPath.js":(e,t,i)=>{var n=i("./node_modules/lodash/_memoizeCapped.js"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,i,n,o){t.push(n?o.replace(r,"$1"):i||e)}),t});e.exports=a},"./node_modules/lodash/_toKey.js":(e,t,i)=>{var n=i("./node_modules/lodash/isSymbol.js");e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},"./node_modules/lodash/_toSource.js":e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(i){}try{return e+""}catch(i){}}return""}},"./node_modules/lodash/_trimmedEndIndex.js":e=>{var t=/\s/;e.exports=function(e){for(var i=e.length;i--&&t.test(e.charAt(i)););return i}},"./node_modules/lodash/_unicodeSize.js":e=>{var t="\\ud800-\\udfff",i="["+t+"]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",r="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+n+"|"+o+")"+"?",c="[\\ufe0e\\ufe0f]?",d=c+l+("(?:\\u200d(?:"+[r,a,s].join("|")+")"+c+l+")*"),p="(?:"+[r+n+"?",n,a,s,i].join("|")+")",u=RegExp(o+"(?="+o+")|"+p+d,"g");e.exports=function(e){for(var t=u.lastIndex=0;u.test(e);)++t;return t}},"./node_modules/lodash/clone.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseClone.js");e.exports=function(e){return n(e,4)}},"./node_modules/lodash/cloneDeep.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseClone.js");e.exports=function(e){return n(e,5)}},"./node_modules/lodash/constant.js":e=>{e.exports=function(e){return function(){return e}}},"./node_modules/lodash/defaults.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseRest.js"),o=i("./node_modules/lodash/eq.js"),r=i("./node_modules/lodash/_isIterateeCall.js"),a=i("./node_modules/lodash/keysIn.js"),s=Object.prototype,l=s.hasOwnProperty,c=n(function(e,t){e=Object(e);var i=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&r(t[0],t[1],c)&&(n=1);++i<n;)for(var d=t[i],p=a(d),u=-1,m=p.length;++u<m;){var h=p[u],f=e[h];(void 0===f||o(f,s[h])&&!l.call(e,h))&&(e[h]=d[h])}return e});e.exports=c},"./node_modules/lodash/each.js":(e,t,i)=>{e.exports=i("./node_modules/lodash/forEach.js")},"./node_modules/lodash/eq.js":e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},"./node_modules/lodash/filter.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayFilter.js"),o=i("./node_modules/lodash/_baseFilter.js"),r=i("./node_modules/lodash/_baseIteratee.js"),a=i("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(a(e)?n:o)(e,r(t,3))}},"./node_modules/lodash/find.js":(e,t,i)=>{var n=i("./node_modules/lodash/_createFind.js")(i("./node_modules/lodash/findIndex.js"));e.exports=n},"./node_modules/lodash/findIndex.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFindIndex.js"),o=i("./node_modules/lodash/_baseIteratee.js"),r=i("./node_modules/lodash/toInteger.js"),a=Math.max;e.exports=function(e,t,i){var s=null==e?0:e.length;if(!s)return-1;var l=null==i?0:r(i);return l<0&&(l=a(s+l,0)),n(e,o(t,3),l)}},"./node_modules/lodash/flatten.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFlatten.js");e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},"./node_modules/lodash/forEach.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayEach.js"),o=i("./node_modules/lodash/_baseEach.js"),r=i("./node_modules/lodash/_castFunction.js"),a=i("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(a(e)?n:o)(e,r(t))}},"./node_modules/lodash/forIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFor.js"),o=i("./node_modules/lodash/_castFunction.js"),r=i("./node_modules/lodash/keysIn.js");e.exports=function(e,t){return null==e?e:n(e,o(t),r)}},"./node_modules/lodash/get.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGet.js");e.exports=function(e,t,i){var o=null==e?void 0:n(e,t);return void 0===o?i:o}},"./node_modules/lodash/has.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseHas.js"),o=i("./node_modules/lodash/_hasPath.js");e.exports=function(e,t){return null!=e&&o(e,t,n)}},"./node_modules/lodash/hasIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseHasIn.js"),o=i("./node_modules/lodash/_hasPath.js");e.exports=function(e,t){return null!=e&&o(e,t,n)}},"./node_modules/lodash/identity.js":e=>{e.exports=function(e){return e}},"./node_modules/lodash/isArguments.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsArguments.js"),o=i("./node_modules/lodash/isObjectLike.js"),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},"./node_modules/lodash/isArray.js":e=>{var t=Array.isArray;e.exports=t},"./node_modules/lodash/isArrayLike.js":(e,t,i)=>{var n=i("./node_modules/lodash/isFunction.js"),o=i("./node_modules/lodash/isLength.js");e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},"./node_modules/lodash/isArrayLikeObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/isArrayLike.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&n(e)}},"./node_modules/lodash/isBuffer.js":(e,t,i)=>{e=i.nmd(e);var n=i("./node_modules/lodash/_root.js"),o=i("./node_modules/lodash/stubFalse.js"),r=t&&!t.nodeType&&t,a=r&&e&&!e.nodeType&&e,s=a&&a.exports===r?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;e.exports=l},"./node_modules/lodash/isEmpty.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseKeys.js"),o=i("./node_modules/lodash/_getTag.js"),r=i("./node_modules/lodash/isArguments.js"),a=i("./node_modules/lodash/isArray.js"),s=i("./node_modules/lodash/isArrayLike.js"),l=i("./node_modules/lodash/isBuffer.js"),c=i("./node_modules/lodash/_isPrototype.js"),d=i("./node_modules/lodash/isTypedArray.js"),p=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||d(e)||r(e)))return!e.length;var t=o(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var i in e)if(p.call(e,i))return!1;return!0}},"./node_modules/lodash/isFunction.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/isObject.js");e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},"./node_modules/lodash/isLength.js":e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},"./node_modules/lodash/isMap.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsMap.js"),o=i("./node_modules/lodash/_baseUnary.js"),r=i("./node_modules/lodash/_nodeUtil.js"),a=r&&r.isMap,s=a?o(a):n;e.exports=s},"./node_modules/lodash/isObject.js":e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash/isObjectLike.js":e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash/isPlainObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/_getPrototype.js"),r=i("./node_modules/lodash/isObjectLike.js"),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!r(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var i=c.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==d}},"./node_modules/lodash/isSet.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsSet.js"),o=i("./node_modules/lodash/_baseUnary.js"),r=i("./node_modules/lodash/_nodeUtil.js"),a=r&&r.isSet,s=a?o(a):n;e.exports=s},"./node_modules/lodash/isString.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/isArray.js"),r=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"string"==typeof e||!o(e)&&r(e)&&"[object String]"==n(e)}},"./node_modules/lodash/isSymbol.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseGetTag.js"),o=i("./node_modules/lodash/isObjectLike.js");e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==n(e)}},"./node_modules/lodash/isTypedArray.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseIsTypedArray.js"),o=i("./node_modules/lodash/_baseUnary.js"),r=i("./node_modules/lodash/_nodeUtil.js"),a=r&&r.isTypedArray,s=a?o(a):n;e.exports=s},"./node_modules/lodash/isUndefined.js":e=>{e.exports=function(e){return void 0===e}},"./node_modules/lodash/keys.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayLikeKeys.js"),o=i("./node_modules/lodash/_baseKeys.js"),r=i("./node_modules/lodash/isArrayLike.js");e.exports=function(e){return r(e)?n(e):o(e)}},"./node_modules/lodash/keysIn.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayLikeKeys.js"),o=i("./node_modules/lodash/_baseKeysIn.js"),r=i("./node_modules/lodash/isArrayLike.js");e.exports=function(e){return r(e)?n(e,!0):o(e)}},"./node_modules/lodash/last.js":e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},"./node_modules/lodash/map.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayMap.js"),o=i("./node_modules/lodash/_baseIteratee.js"),r=i("./node_modules/lodash/_baseMap.js"),a=i("./node_modules/lodash/isArray.js");e.exports=function(e,t){return(a(e)?n:r)(e,o(t,3))}},"./node_modules/lodash/mapValues.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseAssignValue.js"),o=i("./node_modules/lodash/_baseForOwn.js"),r=i("./node_modules/lodash/_baseIteratee.js");e.exports=function(e,t){var i={};return t=r(t,3),o(e,function(e,o,r){n(i,o,t(e,o,r))}),i}},"./node_modules/lodash/max.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseExtremum.js"),o=i("./node_modules/lodash/_baseGt.js"),r=i("./node_modules/lodash/identity.js");e.exports=function(e){return e&&e.length?n(e,r,o):void 0}},"./node_modules/lodash/memoize.js":(e,t,i)=>{var n=i("./node_modules/lodash/_MapCache.js");function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=t?t.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var a=e.apply(this,n);return i.cache=r.set(o,a)||r,a};return i.cache=new(o.Cache||n),i}o.Cache=n,e.exports=o},"./node_modules/lodash/merge.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseMerge.js"),o=i("./node_modules/lodash/_createAssigner.js")(function(e,t,i){n(e,t,i)});e.exports=o},"./node_modules/lodash/min.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseExtremum.js"),o=i("./node_modules/lodash/_baseLt.js"),r=i("./node_modules/lodash/identity.js");e.exports=function(e){return e&&e.length?n(e,r,o):void 0}},"./node_modules/lodash/minBy.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseExtremum.js"),o=i("./node_modules/lodash/_baseIteratee.js"),r=i("./node_modules/lodash/_baseLt.js");e.exports=function(e,t){return e&&e.length?n(e,o(t,2),r):void 0}},"./node_modules/lodash/noop.js":e=>{e.exports=function(){}},"./node_modules/lodash/now.js":(e,t,i)=>{var n=i("./node_modules/lodash/_root.js");e.exports=function(){return n.Date.now()}},"./node_modules/lodash/pick.js":(e,t,i)=>{var n=i("./node_modules/lodash/_basePick.js"),o=i("./node_modules/lodash/_flatRest.js")(function(e,t){return null==e?{}:n(e,t)});e.exports=o},"./node_modules/lodash/property.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseProperty.js"),o=i("./node_modules/lodash/_basePropertyDeep.js"),r=i("./node_modules/lodash/_isKey.js"),a=i("./node_modules/lodash/_toKey.js");e.exports=function(e){return r(e)?n(a(e)):o(e)}},"./node_modules/lodash/range.js":(e,t,i)=>{var n=i("./node_modules/lodash/_createRange.js")();e.exports=n},"./node_modules/lodash/reduce.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayReduce.js"),o=i("./node_modules/lodash/_baseEach.js"),r=i("./node_modules/lodash/_baseIteratee.js"),a=i("./node_modules/lodash/_baseReduce.js"),s=i("./node_modules/lodash/isArray.js");e.exports=function(e,t,i){var l=s(e)?n:a,c=arguments.length<3;return l(e,r(t,4),i,c,o)}},"./node_modules/lodash/size.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseKeys.js"),o=i("./node_modules/lodash/_getTag.js"),r=i("./node_modules/lodash/isArrayLike.js"),a=i("./node_modules/lodash/isString.js"),s=i("./node_modules/lodash/_stringSize.js");e.exports=function(e){if(null==e)return 0;if(r(e))return a(e)?s(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},"./node_modules/lodash/sortBy.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFlatten.js"),o=i("./node_modules/lodash/_baseOrderBy.js"),r=i("./node_modules/lodash/_baseRest.js"),a=i("./node_modules/lodash/_isIterateeCall.js"),s=r(function(e,t){if(null==e)return[];var i=t.length;return i>1&&a(e,t[0],t[1])?t=[]:i>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])});e.exports=s},"./node_modules/lodash/stubArray.js":e=>{e.exports=function(){return[]}},"./node_modules/lodash/stubFalse.js":e=>{e.exports=function(){return!1}},"./node_modules/lodash/toFinite.js":(e,t,i)=>{var n=i("./node_modules/lodash/toNumber.js"),o=1/0;e.exports=function(e){return e?(e=n(e))===o||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},"./node_modules/lodash/toInteger.js":(e,t,i)=>{var n=i("./node_modules/lodash/toFinite.js");e.exports=function(e){var t=n(e),i=t%1;return t==t?i?t-i:t:0}},"./node_modules/lodash/toNumber.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseTrim.js"),o=i("./node_modules/lodash/isObject.js"),r=i("./node_modules/lodash/isSymbol.js"),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var i=s.test(e);return i||l.test(e)?c(e.slice(2),i?2:8):a.test(e)?NaN:+e}},"./node_modules/lodash/toPlainObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/_copyObject.js"),o=i("./node_modules/lodash/keysIn.js");e.exports=function(e){return n(e,o(e))}},"./node_modules/lodash/toString.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseToString.js");e.exports=function(e){return null==e?"":n(e)}},"./node_modules/lodash/transform.js":(e,t,i)=>{var n=i("./node_modules/lodash/_arrayEach.js"),o=i("./node_modules/lodash/_baseCreate.js"),r=i("./node_modules/lodash/_baseForOwn.js"),a=i("./node_modules/lodash/_baseIteratee.js"),s=i("./node_modules/lodash/_getPrototype.js"),l=i("./node_modules/lodash/isArray.js"),c=i("./node_modules/lodash/isBuffer.js"),d=i("./node_modules/lodash/isFunction.js"),p=i("./node_modules/lodash/isObject.js"),u=i("./node_modules/lodash/isTypedArray.js");e.exports=function(e,t,i){var m=l(e),h=m||c(e)||u(e);if(t=a(t,4),null==i){var f=e&&e.constructor;i=h?m?new f:[]:p(e)&&d(f)?o(s(e)):{}}return(h?n:r)(e,function(e,n,o){return t(i,e,n,o)}),i}},"./node_modules/lodash/union.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseFlatten.js"),o=i("./node_modules/lodash/_baseRest.js"),r=i("./node_modules/lodash/_baseUniq.js"),a=i("./node_modules/lodash/isArrayLikeObject.js"),s=o(function(e){return r(n(e,1,a,!0))});e.exports=s},"./node_modules/lodash/uniqueId.js":(e,t,i)=>{var n=i("./node_modules/lodash/toString.js"),o=0;e.exports=function(e){var t=++o;return n(e)+t}},"./node_modules/lodash/values.js":(e,t,i)=>{var n=i("./node_modules/lodash/_baseValues.js"),o=i("./node_modules/lodash/keys.js");e.exports=function(e){return null==e?[]:n(e,o(e))}},"./node_modules/lodash/zipObject.js":(e,t,i)=>{var n=i("./node_modules/lodash/_assignValue.js"),o=i("./node_modules/lodash/_baseZipObject.js");e.exports=function(e,t){return o(e||[],t||[],n)}},"./node_modules/transformation-matrix/build-es/applyToPoint.js":(e,t,i)=>{"use strict";function n(e,t){return Array.isArray(t)?[e.a*t[0]+e.c*t[1]+e.e,e.b*t[0]+e.d*t[1]+e.f]:{x:e.a*t.x+e.c*t.y+e.e,y:e.b*t.x+e.d*t.y+e.f}}function o(e,t){return t.map(function(t){return n(e,t)})}i.r(t),i.d(t,{applyToPoint:()=>n,applyToPoints:()=>o})},"./node_modules/transformation-matrix/build-es/fromObject.js":(e,t,i)=>{"use strict";function n(e){return{a:parseFloat(e.a),b:parseFloat(e.b),c:parseFloat(e.c),d:parseFloat(e.d),e:parseFloat(e.e),f:parseFloat(e.f)}}i.r(t),i.d(t,{fromObject:()=>n})},"./node_modules/transformation-matrix/build-es/fromString.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{fromString:()=>o});var n=/^matrix\(\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*\)$/i;function o(e){var t=e.match(n);if(null===t||t.length<7)throw new Error("'"+e+"' is not a matrix");return{a:parseFloat(t[1]),b:parseFloat(t[2]),c:parseFloat(t[3]),d:parseFloat(t[4]),e:parseFloat(t[5]),f:parseFloat(t[6])}}},"./node_modules/transformation-matrix/build-es/fromTriangles.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{fromTriangles:()=>a});var n=i("./node_modules/transformation-matrix/build-es/inverse.js"),o=i("./node_modules/transformation-matrix/build-es/transform.js"),r=i("./node_modules/transformation-matrix/build-es/smoothMatrix.js");function a(e,t){var i=null!=e[0].x?e[0].x:e[0][0],a=null!=e[0].y?e[0].y:e[0][1],s=null!=t[0].x?t[0].x:t[0][0],l=null!=t[0].y?t[0].y:t[0][1],c=null!=e[1].x?e[1].x:e[1][0],d=null!=e[1].y?e[1].y:e[1][1],p=null!=t[1].x?t[1].x:t[1][0],u=null!=t[1].y?t[1].y:t[1][1],m=null!=e[2].x?e[2].x:e[2][0],h=null!=e[2].y?e[2].y:e[2][1],f=null!=t[2].x?t[2].x:t[2][0],g=null!=t[2].y?t[2].y:t[2][1],v={a:i-m,b:a-h,c:c-m,d:d-h,e:m,f:h},x={a:s-f,b:l-g,c:p-f,d:u-g,e:f,f:g},y=(0,n.inverse)(v),b=(0,o.transform)([x,y]);return(0,r.smoothMatrix)(b)}},"./node_modules/transformation-matrix/build-es/identity.js":(e,t,i)=>{"use strict";function n(){return{a:1,c:0,e:0,b:0,d:1,f:0}}i.r(t),i.d(t,{identity:()=>n})},"./node_modules/transformation-matrix/build-es/index.js":(e,t,i)=>{"use strict";i.r(t);var n=i("./node_modules/transformation-matrix/build-es/applyToPoint.js"),o={};for(const y in n)"default"!==y&&(o[y]=()=>n[y]);i.d(t,o);var r=i("./node_modules/transformation-matrix/build-es/fromObject.js");o={};for(const y in r)"default"!==y&&(o[y]=()=>r[y]);i.d(t,o);var a=i("./node_modules/transformation-matrix/build-es/fromString.js");o={};for(const y in a)"default"!==y&&(o[y]=()=>a[y]);i.d(t,o);var s=i("./node_modules/transformation-matrix/build-es/identity.js");o={};for(const y in s)"default"!==y&&(o[y]=()=>s[y]);i.d(t,o);var l=i("./node_modules/transformation-matrix/build-es/inverse.js");o={};for(const y in l)"default"!==y&&(o[y]=()=>l[y]);i.d(t,o);var c=i("./node_modules/transformation-matrix/build-es/isAffineMatrix.js");o={};for(const y in c)"default"!==y&&(o[y]=()=>c[y]);i.d(t,o);var d=i("./node_modules/transformation-matrix/build-es/rotate.js");o={};for(const y in d)"default"!==y&&(o[y]=()=>d[y]);i.d(t,o);var p=i("./node_modules/transformation-matrix/build-es/scale.js");o={};for(const y in p)"default"!==y&&(o[y]=()=>p[y]);i.d(t,o);var u=i("./node_modules/transformation-matrix/build-es/shear.js");o={};for(const y in u)"default"!==y&&(o[y]=()=>u[y]);i.d(t,o);var m=i("./node_modules/transformation-matrix/build-es/skew.js");o={};for(const y in m)"default"!==y&&(o[y]=()=>m[y]);i.d(t,o);var h=i("./node_modules/transformation-matrix/build-es/toString.js");o={};for(const y in h)"default"!==y&&(o[y]=()=>h[y]);i.d(t,o);var f=i("./node_modules/transformation-matrix/build-es/transform.js");o={};for(const y in f)"default"!==y&&(o[y]=()=>f[y]);i.d(t,o);var g=i("./node_modules/transformation-matrix/build-es/translate.js");o={};for(const y in g)"default"!==y&&(o[y]=()=>g[y]);i.d(t,o);var v=i("./node_modules/transformation-matrix/build-es/fromTriangles.js");o={};for(const y in v)"default"!==y&&(o[y]=()=>v[y]);i.d(t,o);var x=i("./node_modules/transformation-matrix/build-es/smoothMatrix.js");o={};for(const y in x)"default"!==y&&(o[y]=()=>x[y]);i.d(t,o)},"./node_modules/transformation-matrix/build-es/inverse.js":(e,t,i)=>{"use strict";function n(e){var t=e.a,i=e.b,n=e.c,o=e.d,r=e.e,a=e.f,s=t*o-i*n;return{a:o/s,b:i/-s,c:n/-s,d:t/s,e:(o*r-n*a)/-s,f:(i*r-t*a)/s}}i.r(t),i.d(t,{inverse:()=>n})},"./node_modules/transformation-matrix/build-es/isAffineMatrix.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{isAffineMatrix:()=>a});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)},r=function(e){return null!=e&&"object"===(void 0===e?"undefined":n(e))};function a(e){return r(e)&&e.hasOwnProperty("a")&&o(e.a)&&e.hasOwnProperty("b")&&o(e.b)&&e.hasOwnProperty("c")&&o(e.c)&&e.hasOwnProperty("d")&&o(e.d)&&e.hasOwnProperty("e")&&o(e.e)&&e.hasOwnProperty("f")&&o(e.f)}},"./node_modules/transformation-matrix/build-es/rotate.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{rotate:()=>c,rotateDEG:()=>d});var n=i("./node_modules/transformation-matrix/build-es/utils.js"),o=i("./node_modules/transformation-matrix/build-es/translate.js"),r=i("./node_modules/transformation-matrix/build-es/transform.js"),a=Math.cos,s=Math.sin,l=Math.PI;function c(e,t,i){var l=a(e),c=s(e),d={a:l,c:-c,e:0,b:c,d:l,f:0};return(0,n.isUndefined)(t)||(0,n.isUndefined)(i)?d:(0,r.transform)([(0,o.translate)(t,i),d,(0,o.translate)(-t,-i)])}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return c(e*l/180,t,i)}},"./node_modules/transformation-matrix/build-es/scale.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{scale:()=>o});var n=i("./node_modules/transformation-matrix/build-es/utils.js");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(0,n.isUndefined)(t)&&(t=e),{a:e,c:0,e:0,b:0,d:t,f:0}}},"./node_modules/transformation-matrix/build-es/shear.js":(e,t,i)=>{"use strict";function n(e,t){return{a:1,c:e,e:0,b:t,d:1,f:0}}i.r(t),i.d(t,{shear:()=>n})},"./node_modules/transformation-matrix/build-es/skew.js":(e,t,i)=>{"use strict";i.r(t),i.d(t,{skew:()=>o,skewDEG:()=>r});var n=Math.tan;function o(e,t){return{a:1,c:n(e),e:0,b:n(t),d:1,f:0}}function r(e,t){return o(e*Math.PI/180,t*Math.PI/180)}},"./node_modules/transformation-matrix/build-es/smoothMatrix.js":(e,t,i)=>{"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(e.a*t)/t,b:Math.round(e.b*t)/t,c:Math.round(e.c*t)/t,d:Math.round(e.d*t)/t,e:Math.round(e.e*t)/t,f:Math.round(e.f*t)/t}}i.r(t),i.d(t,{smoothMatrix:()=>n})},"./node_modules/transformation-matrix/build-es/toString.js":(e,t,i)=>{"use strict";function n(e){return r(e)}function o(e){return r(e)}function r(e){return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"}i.r(t),i.d(t,{toCSS:()=>n,toSVG:()=>o,toString:()=>r})},"./node_modules/transformation-matrix/build-es/transform.js":(e,t,i)=>{"use strict";function n(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var o,r=function(e,t){return{a:e.a*t.a+e.c*t.b,c:e.a*t.c+e.c*t.d,e:e.a*t.e+e.c*t.f+e.e,b:e.b*t.a+e.d*t.b,d:e.b*t.c+e.d*t.d,f:e.b*t.e+e.d*t.f+e.f}};switch((t=Array.isArray(t[0])?t[0]:t).length){case 0:throw new Error("no matrices provided");case 1:return t[0];case 2:return r(t[0],t[1]);default:var a=(o=t,Array.isArray(o)?o:Array.from(o)),s=a[0],l=a[1],c=a.slice(2),d=r(s,l);return n.apply(void 0,[d].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(c)))}}function o(){return n.apply(void 0,arguments)}i.r(t),i.d(t,{transform:()=>n,compose:()=>o})},"./node_modules/transformation-matrix/build-es/translate.js":(e,t,i)=>{"use strict";function n(e){return{a:1,c:0,e:e,b:0,d:1,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}i.r(t),i.d(t,{translate:()=>n})},"./node_modules/transformation-matrix/build-es/utils.js":(e,t,i)=>{"use strict";function n(e){return void 0===e}i.r(t),i.d(t,{isUndefined:()=>n})},"./node_modules/webcola/dist/index.js":(e,t,i)=>{"use strict";function n(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),n(i("./node_modules/webcola/dist/src/adaptor.js")),n(i("./node_modules/webcola/dist/src/d3adaptor.js")),n(i("./node_modules/webcola/dist/src/descent.js")),n(i("./node_modules/webcola/dist/src/geom.js")),n(i("./node_modules/webcola/dist/src/gridrouter.js")),n(i("./node_modules/webcola/dist/src/handledisconnected.js")),n(i("./node_modules/webcola/dist/src/layout.js")),n(i("./node_modules/webcola/dist/src/layout3d.js")),n(i("./node_modules/webcola/dist/src/linklengths.js")),n(i("./node_modules/webcola/dist/src/powergraph.js")),n(i("./node_modules/webcola/dist/src/pqueue.js")),n(i("./node_modules/webcola/dist/src/rbtree.js")),n(i("./node_modules/webcola/dist/src/rectangle.js")),n(i("./node_modules/webcola/dist/src/shortestpaths.js")),n(i("./node_modules/webcola/dist/src/vpsc.js")),n(i("./node_modules/webcola/dist/src/batch.js"))},"./node_modules/webcola/dist/src/adaptor.js":function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/webcola/dist/src/layout.js"),a=function(e){function t(t){var i=e.call(this)||this,n=t;return n.trigger&&(i.trigger=n.trigger),n.kick&&(i.kick=n.kick),n.drag&&(i.drag=n.drag),n.on&&(i.on=n.on),i.dragstart=i.dragStart=r.Layout.dragStart,i.dragend=i.dragEnd=r.Layout.dragEnd,i}return o(t,e),t.prototype.trigger=function(e){},t.prototype.kick=function(){},t.prototype.drag=function(){},t.prototype.on=function(e,t){return this},t}(r.Layout);t.LayoutAdaptor=a,t.adaptor=function(e){return new a(e)}},"./node_modules/webcola/dist/src/batch.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/webcola/dist/src/layout.js"),o=i("./node_modules/webcola/dist/src/gridrouter.js");t.gridify=function(e,t,i,n){return e.cola.start(0,0,0,10,!1),function(e,t,i,n){e.forEach(function(e){e.routerNode={name:e.name,bounds:e.bounds.inflate(-i)}}),t.forEach(function(t){t.routerNode={bounds:t.bounds.inflate(-n),children:(void 0!==t.groups?t.groups.map(function(t){return e.length+t.id}):[]).concat(void 0!==t.leaves?t.leaves.map(function(e){return e.index}):[])}});var r=e.concat(t).map(function(e,t){return e.routerNode.id=t,e.routerNode});return new o.GridRouter(r,{getChildren:function(e){return e.children},getBounds:function(e){return e.bounds}},i-n)}(e.cola.nodes(),e.cola.groups(),i,n).routeEdges(e.powerGraph.powerEdges,t,function(e){return e.source.routerNode.id},function(e){return e.target.routerNode.id})},t.powerGraphGridLayout=function(e,t,i){var o;e.nodes.forEach(function(e,t){return e.index=t}),(new n.Layout).avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(e){(o=e).groups.forEach(function(e){return e.padding=i})});var r=e.nodes.length,a=[],s=e.nodes.slice(0);return s.forEach(function(e,t){return e.index=t}),o.groups.forEach(function(e){var t=e.index=e.id+r;s.push(e),void 0!==e.leaves&&e.leaves.forEach(function(e){return a.push({source:t,target:e.index})}),void 0!==e.groups&&e.groups.forEach(function(e){return a.push({source:t,target:e.id+r})})}),o.powerEdges.forEach(function(e){a.push({source:e.source.index,target:e.target.index})}),(new n.Layout).size(t).nodes(s).links(a).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new n.Layout).convergenceThreshold(.001).size(t).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(e){(o=e).groups.forEach(function(e){e.padding=i})}).start(50,0,100,0,!1),powerGraph:o}}},"./node_modules/webcola/dist/src/d3adaptor.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/webcola/dist/src/d3v3adaptor.js"),o=i("./node_modules/webcola/dist/src/d3v4adaptor.js");t.d3adaptor=function(e){return!e||function(e){var t=/^3\./;return e.version&&null!==e.version.match(t)}(e)?new n.D3StyleLayoutAdaptor:new o.D3StyleLayoutAdaptor(e)}},"./node_modules/webcola/dist/src/d3v3adaptor.js":function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/webcola/dist/src/layout.js"),a=function(e){function t(){var t=e.call(this)||this;t.event=d3.dispatch(r.EventType[r.EventType.start],r.EventType[r.EventType.tick],r.EventType[r.EventType.end]);var i=t;return t.drag=function(){if(!e)var e=d3.behavior.drag().origin(r.Layout.dragOrigin).on("dragstart.d3adaptor",r.Layout.dragStart).on("drag.d3adaptor",function(e){r.Layout.drag(e,d3.event),i.resume()}).on("dragend.d3adaptor",r.Layout.dragEnd);if(!arguments.length)return e;this.call(e)},t}return o(t,e),t.prototype.trigger=function(e){var t={type:r.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event[t.type](t)},t.prototype.kick=function(){var t=this;d3.timer(function(){return e.prototype.tick.call(t)})},t.prototype.on=function(e,t){return"string"==typeof e?this.event.on(e,t):this.event.on(r.EventType[e],t),this},t}(r.Layout);t.D3StyleLayoutAdaptor=a,t.d3adaptor=function(){return new a}},"./node_modules/webcola/dist/src/d3v4adaptor.js":function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/webcola/dist/src/layout.js"),a=function(e){function t(t){var i=e.call(this)||this;i.d3Context=t,i.event=t.dispatch(r.EventType[r.EventType.start],r.EventType[r.EventType.tick],r.EventType[r.EventType.end]);var n=i;return i.drag=function(){if(!e)var e=t.drag().subject(r.Layout.dragOrigin).on("start.d3adaptor",r.Layout.dragStart).on("drag.d3adaptor",function(e){r.Layout.drag(e,t.event),n.resume()}).on("end.d3adaptor",r.Layout.dragEnd);if(!arguments.length)return e;arguments[0].call(e)},i}return o(t,e),t.prototype.trigger=function(e){var t={type:r.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event.call(t.type,t)},t.prototype.kick=function(){var t=this,i=this.d3Context.timer(function(){return e.prototype.tick.call(t)&&i.stop()})},t.prototype.on=function(e,t){return"string"==typeof e?this.event.on(e,t):this.event.on(r.EventType[e],t),this},t}(r.Layout);t.D3StyleLayoutAdaptor=a},"./node_modules/webcola/dist/src/descent.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.locks={}}return e.prototype.add=function(e,t){this.locks[e]=t},e.prototype.clear=function(){this.locks={}},e.prototype.isEmpty=function(){for(var e in this.locks)return!1;return!0},e.prototype.apply=function(e){for(var t in this.locks)e(Number(t),this.locks[t])},e}();t.Locks=i;var n=function(){function e(e,t,n){void 0===n&&(n=null),this.D=t,this.G=n,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new o,this.project=null,this.x=e,this.k=e.length;var r=this.n=e[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new i,this.minD=Number.MAX_VALUE;for(var a,s=r;s--;)for(a=r;--a>s;){var l=t[s][a];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),s=this.k;s--;){for(this.g[s]=new Array(r),this.H[s]=new Array(r),a=r;a--;)this.H[s][a]=new Array(r);this.Hd[s]=new Array(r),this.a[s]=new Array(r),this.b[s]=new Array(r),this.c[s]=new Array(r),this.d[s]=new Array(r),this.e[s]=new Array(r),this.ia[s]=new Array(r),this.ib[s]=new Array(r),this.xtmp[s]=new Array(r)}}return e.createSquareMatrix=function(e,t){for(var i=new Array(e),n=0;n<e;++n){i[n]=new Array(e);for(var o=0;o<e;++o)i[n][o]=t(n,o)}return i},e.prototype.offsetDir=function(){for(var e=this,t=new Array(this.k),i=0,n=0;n<this.k;++n){var o=t[n]=this.random.getNextBetween(.01,1)-.5;i+=o*o}return i=Math.sqrt(i),t.map(function(t){return t*(e.minD/i)})},e.prototype.computeDerivatives=function(e){var t=this,i=this.n;if(!(i<1)){for(var n,o=new Array(this.k),r=new Array(this.k),a=new Array(this.k),s=0,l=0;l<i;++l){for(n=0;n<this.k;++n)a[n]=this.g[n][l]=0;for(var c=0;c<i;++c)if(l!==c){for(var d=i;d--;){var p=0;for(n=0;n<this.k;++n){var u=o[n]=e[n][l]-e[n][c];p+=r[n]=u*u}if(p>1e-9)break;var m=this.offsetDir();for(n=0;n<this.k;++n)e[n][c]+=m[n]}var h=Math.sqrt(p),f=this.D[l][c],g=null!=this.G?this.G[l][c]:1;if(g>1&&h>f||!isFinite(f))for(n=0;n<this.k;++n)this.H[n][l][c]=0;else{g>1&&(g=1);var v=f*f,x=2*g*(h-f)/(v*h),y=h*h*h,b=2*-g/(v*y);for(isFinite(x)||console.log(x),n=0;n<this.k;++n)this.g[n][l]+=o[n]*x,a[n]-=this.H[n][l][c]=b*(y+f*(r[n]-p)+h*p)}}for(n=0;n<this.k;++n)s=Math.max(s,this.H[n][l][l]=a[n])}var C=this.snapGridSize/2,S=this.snapGridSize,w=this.snapStrength/(C*C),I=this.numGridSnapNodes;for(l=0;l<I;++l)for(n=0;n<this.k;++n){var _=this.x[n][l],D=_/S,R=D%1,A=D-R;-C<(u=Math.abs(R)<=.5?_-A*S:_>0?_-(A+1)*S:_-(A-1)*S)&&u<=C&&(this.scaleSnapByMaxH?(this.g[n][l]+=s*w*u,this.H[n][l][l]+=s*w):(this.g[n][l]+=w*u,this.H[n][l][l]+=w))}this.locks.isEmpty()||this.locks.apply(function(i,o){for(n=0;n<t.k;++n)t.H[n][i][i]+=s,t.g[n][i]-=s*(o[n]-e[n][i])})}},e.dotProd=function(e,t){for(var i=0,n=e.length;n--;)i+=e[n]*t[n];return i},e.rightMultiply=function(t,i,n){for(var o=t.length;o--;)n[o]=e.dotProd(t[o],i)},e.prototype.computeStepSize=function(t){for(var i=0,n=0,o=0;o<this.k;++o)i+=e.dotProd(this.g[o],t[o]),e.rightMultiply(this.H[o],t[o],this.Hd[o]),n+=e.dotProd(t[o],this.Hd[o]);return 0!==n&&isFinite(n)?1*i/n:0},e.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var e=this.computeStepSize(this.g),t=0;t<this.k;++t)this.takeDescentStep(this.x[t],this.g[t],e);return this.computeStress()},e.copy=function(e,t){for(var i=e.length,n=t[0].length,o=0;o<i;++o)for(var r=0;r<n;++r)t[o][r]=e[o][r]},e.prototype.stepAndProject=function(t,i,n,o){e.copy(t,i),this.takeDescentStep(i[0],n[0],o),this.project&&this.project[0](t[0],t[1],i[0]),this.takeDescentStep(i[1],n[1],o),this.project&&this.project[1](i[0],t[1],i[1]);for(var r=2;r<this.k;r++)this.takeDescentStep(i[r],n[r],o)},e.mApply=function(e,t,i){for(var n=e;n-- >0;)for(var o=t;o-- >0;)i(n,o)},e.prototype.matrixApply=function(t){e.mApply(this.k,this.n,t)},e.prototype.computeNextPosition=function(e,t){var i=this;this.computeDerivatives(e);var n=this.computeStepSize(this.g);if(this.stepAndProject(e,t,this.g,n),this.project){this.matrixApply(function(n,o){return i.e[n][o]=e[n][o]-t[n][o]});var o=this.computeStepSize(this.e);o=Math.max(.2,Math.min(o,1)),this.stepAndProject(e,t,this.e,o)}},e.prototype.run=function(e){for(var t=Number.MAX_VALUE,i=!1;!i&&e-- >0;){var n=this.rungeKutta();i=Math.abs(t/n-1)<this.threshold,t=n}return t},e.prototype.rungeKutta=function(){var t=this;this.computeNextPosition(this.x,this.a),e.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),e.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var i=0;return this.matrixApply(function(e,n){var o=(t.a[e][n]+2*t.b[e][n]+2*t.c[e][n]+t.d[e][n])/6,r=t.x[e][n]-o;i+=r*r,t.x[e][n]=o}),i},e.mid=function(t,i,n){e.mApply(t.length,t[0].length,function(e,o){return n[e][o]=t[e][o]+(i[e][o]-t[e][o])/2})},e.prototype.takeDescentStep=function(e,t,i){for(var n=0;n<this.n;++n)e[n]=e[n]-i*t[n]},e.prototype.computeStress=function(){for(var e=0,t=0,i=this.n-1;t<i;++t)for(var n=t+1,o=this.n;n<o;++n){for(var r=0,a=0;a<this.k;++a){var s=this.x[a][t]-this.x[a][n];r+=s*s}r=Math.sqrt(r);var l=this.D[t][n];if(isFinite(l)){var c=l-r;e+=c*c/(l*l)}}return e},e.zeroDistance=1e-10,e}();t.Descent=n;var o=function(){function e(e){void 0===e&&(e=1),this.seed=e,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return e.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},e.prototype.getNextBetween=function(e,t){return e+this.getNext()*(t-e)},e}();t.PseudoRandom=o},"./node_modules/webcola/dist/src/geom.js":function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/webcola/dist/src/rectangle.js"),a=function(){};t.Point=a;var s=function(e,t,i,n){this.x1=e,this.y1=t,this.x2=i,this.y2=n};t.LineSegment=s;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);function c(e,t,i){return(t.x-e.x)*(i.y-e.y)-(i.x-e.x)*(t.y-e.y)}function d(e,t,i){return c(e,t,i)>0}function p(e,t,i){return c(e,t,i)<0}function u(e,t){var i,n,o,r,a=t.length-1;if(p(e,t[1],t[0])&&!d(e,t[a-1],t[0]))return 0;for(i=0,n=a;;){if(n-i==1)return d(e,t[i],t[n])?i:n;if((r=p(e,t[(o=Math.floor((i+n)/2))+1],t[o]))&&!d(e,t[o-1],t[o]))return o;d(e,t[i+1],t[i])?r||d(e,t[i],t[o])?n=o:i=o:r&&p(e,t[i],t[o])?n=o:i=o}}function m(e,t){var i,n,o,r,a=t.length-1;if(d(e,t[a-1],t[0])&&!p(e,t[1],t[0]))return 0;for(i=0,n=a;;){if(n-i==1)return p(e,t[i],t[n])?i:n;if(r=p(e,t[(o=Math.floor((i+n)/2))+1],t[o]),d(e,t[o-1],t[o])&&!r)return o;p(e,t[i+1],t[i])?r?p(e,t[i],t[o])?n=o:i=o:n=o:r?i=o:d(e,t[i],t[o])?n=o:i=o}}function h(e,t,i,n,o,r){var a,s;s=n(e[a=i(t[0],e)],t);for(var l=!1;!l;){for(l=!0;a===e.length-1&&(a=0),!o(t[s],e[a],e[a+1]);)++a;for(;0===s&&(s=t.length-1),!r(e[a],t[s],t[s-1]);)--s,l=!1}return{t1:a,t2:s}}function f(e,t){return h(e,t,u,m,d,p)}t.PolyPoint=l,t.isLeft=c,t.ConvexHull=function(e){var t,i=e.slice(0).sort(function(e,t){return e.x!==t.x?t.x-e.x:t.y-e.y}),n=e.length,o=i[0].x;for(t=1;t<n&&i[t].x===o;++t);var r=t-1,a=[];if(a.push(i[0]),r===n-1)i[r].y!==i[0].y&&a.push(i[r]);else{var s,l=n-1,d=i[n-1].x;for(t=n-2;t>=0&&i[t].x===d;t--);for(s=t+1,t=r;++t<=s;)if(!(c(i[0],i[s],i[t])>=0&&t<s)){for(;a.length>1&&!(c(a[a.length-2],a[a.length-1],i[t])>0);)a.length-=1;0!=t&&a.push(i[t])}l!=s&&a.push(i[l]);var p=a.length;for(t=s;--t>=r;)if(!(c(i[l],i[r],i[t])>=0&&t>r)){for(;a.length>p&&!(c(a[a.length-2],a[a.length-1],i[t])>0);)a.length-=1;0!=t&&a.push(i[t])}}return a},t.clockwiseRadialSweep=function(e,t,i){t.slice(0).sort(function(t,i){return Math.atan2(t.y-e.y,t.x-e.x)-Math.atan2(i.y-e.y,i.x-e.x)}).forEach(i)},t.tangent_PolyPolyC=h,t.LRtangent_PolyPolyC=function(e,t){var i=f(t,e);return{t1:i.t2,t2:i.t1}},t.RLtangent_PolyPolyC=f,t.LLtangent_PolyPolyC=function(e,t){return h(e,t,m,m,p,p)},t.RRtangent_PolyPolyC=function(e,t){return h(e,t,u,u,d,d)};var g=function(e,t){this.t1=e,this.t2=t};t.BiTangent=g;var v=function(){};t.BiTangents=v;var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(a);t.TVGPoint=x;var y=function(e,t,i,n){this.id=e,this.polyid=t,this.polyvertid=i,this.p=n,n.vv=this};t.VisibilityVertex=y;var b=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.length=function(){var e=this.source.p.x-this.target.p.x,t=this.source.p.y-this.target.p.y;return Math.sqrt(e*e+t*t)},e}();t.VisibilityEdge=b;var C=function(){function e(e,t){if(this.P=e,this.V=[],this.E=[],t)this.V=t.V.slice(0),this.E=t.E.slice(0);else{for(var i=e.length,n=0;n<i;n++){for(var o=e[n],r=0;r<o.length;++r){var a=o[r],s=new y(this.V.length,n,r,a);this.V.push(s),r>0&&this.E.push(new b(o[r-1].vv,s))}o.length>1&&this.E.push(new b(o[0].vv,o[o.length-1].vv))}for(n=0;n<i-1;n++){var l=e[n];for(r=n+1;r<i;r++){var c=e[r],d=w(l,c);for(var p in d){var u=d[p],m=l[u.t1],h=c[u.t2];this.addEdgeIfVisible(m,h,n,r)}}}}}return e.prototype.addEdgeIfVisible=function(e,t,i,n){this.intersectsPolys(new s(e.x,e.y,t.x,t.y),i,n)||this.E.push(new b(e.vv,t.vv))},e.prototype.addPoint=function(e,t){var i,n,o,r=this.P.length;this.V.push(new y(this.V.length,r,0,e));for(var a=0;a<r;++a)if(a!==t){var s=this.P[a],l=(i=e,o=void 0,(o=(n=s).slice(0)).push(n[0]),{rtan:u(i,o),ltan:m(i,o)});this.addEdgeIfVisible(e,s[l.ltan],t,a),this.addEdgeIfVisible(e,s[l.rtan],t,a)}return e.vv},e.prototype.intersectsPolys=function(e,t,i){for(var n=0,o=this.P.length;n<o;++n)if(n!=t&&n!=i&&S(e,this.P[n]).length>0)return!0;return!1},e}();function S(e,t){for(var i=[],n=1,o=t.length;n<o;++n){var a=r.Rectangle.lineIntersection(e.x1,e.y1,e.x2,e.y2,t[n-1].x,t[n-1].y,t[n].x,t[n].y);a&&i.push(a)}return i}function w(e,t){for(var i=e.length-1,n=t.length-1,o=new v,r=0;r<i;++r)for(var a=0;a<n;++a){var s=e[0==r?i-1:r-1],l=e[r],d=e[r+1],p=t[0==a?n-1:a-1],u=t[a],m=t[a+1],h=c(s,l,u),f=c(l,p,u),x=c(l,u,m),y=c(p,u,l),b=c(u,s,l),C=c(u,l,d);h>=0&&f>=0&&x<0&&y>=0&&b>=0&&C<0?o.ll=new g(r,a):h<=0&&f<=0&&x>0&&y<=0&&b<=0&&C>0?o.rr=new g(r,a):h<=0&&f>0&&x<=0&&y>=0&&b<0&&C>=0?o.rl=new g(r,a):h>=0&&f<0&&x>=0&&y<=0&&b>0&&C<=0&&(o.lr=new g(r,a))}return o}function I(e,t){return!e.every(function(e){return!function(e,t){for(var i=1,n=t.length;i<n;++i)if(p(t[i-1],t[i],e))return!1;return!0}(e,t)})}t.TangentVisibilityGraph=C,t.tangents=w,t.polysOverlap=function(e,t){if(I(e,t))return!0;if(I(t,e))return!0;for(var i=1,n=e.length;i<n;++i){var o=e[i],r=e[i-1];if(S(new s(r.x,r.y,o.x,o.y),t).length>0)return!0}return!1}},"./node_modules/webcola/dist/src/gridrouter.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/webcola/dist/src/rectangle.js"),o=i("./node_modules/webcola/dist/src/vpsc.js"),r=i("./node_modules/webcola/dist/src/shortestpaths.js"),a=function(e,t,i){this.id=e,this.rect=t,this.children=i,this.leaf=void 0===i||0===i.length};t.NodeWrapper=a;var s=function(e,t,i,n,o){void 0===n&&(n=null),void 0===o&&(o=null),this.id=e,this.x=t,this.y=i,this.node=n,this.line=o};t.Vert=s;var l=function(){function e(t,i){this.s=t,this.t=i;var n=e.findMatch(t,i),o=i.slice(0).reverse(),r=e.findMatch(t,o);n.length>=r.length?(this.length=n.length,this.si=n.si,this.ti=n.ti,this.reversed=!1):(this.length=r.length,this.si=r.si,this.ti=i.length-r.ti-r.length,this.reversed=!0)}return e.findMatch=function(e,t){for(var i=e.length,n=t.length,o={length:0,si:-1,ti:-1},r=new Array(i),a=0;a<i;a++){r[a]=new Array(n);for(var s=0;s<n;s++)if(e[a]===t[s]){var l=r[a][s]=0===a||0===s?1:r[a-1][s-1]+1;l>o.length&&(o.length=l,o.si=a-l+1,o.ti=s-l+1)}else r[a][s]=0}return o},e.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},e}();t.LongestCommonSubsequence=l;var c=function(){function e(e,t,i){var o=this;void 0===i&&(i=12),this.originalnodes=e,this.groupPadding=i,this.leaves=null,this.nodes=e.map(function(e,i){return new a(i,t.getBounds(e),t.getChildren(e))}),this.leaves=this.nodes.filter(function(e){return e.leaf}),this.groups=this.nodes.filter(function(e){return!e.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(e){return e.children.forEach(function(t){return o.nodes[t].parent=e})}),this.root={children:[]},this.nodes.forEach(function(e){void 0===e.parent&&(e.parent=o.root,o.root.children.push(e.id)),e.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(e,t){return o.getDepth(e)-o.getDepth(t)}),this.backToFront.slice(0).reverse().filter(function(e){return!e.leaf}).forEach(function(e){var t=n.Rectangle.empty();e.children.forEach(function(e){return t=t.union(o.nodes[e].rect)}),e.rect=t.inflate(o.groupPadding)});var r=this.midPoints(this.cols.map(function(e){return e.pos})),l=this.midPoints(this.rows.map(function(e){return e.pos})),c=r[0],d=r[r.length-1],p=l[0],u=l[l.length-1],m=this.rows.map(function(e){return{x1:c,x2:d,y1:e.pos,y2:e.pos}}).concat(l.map(function(e){return{x1:c,x2:d,y1:e,y2:e}})),h=this.cols.map(function(e){return{x1:e.pos,x2:e.pos,y1:p,y2:u}}).concat(r.map(function(e){return{x1:e,x2:e,y1:p,y2:u}})),f=m.concat(h);f.forEach(function(e){return e.verts=[]}),this.verts=[],this.edges=[],m.forEach(function(e){return h.forEach(function(t){var i=new s(o.verts.length,t.x1,e.y1);e.verts.push(i),t.verts.push(i),o.verts.push(i);for(var n=o.backToFront.length;n-- >0;){var r=o.backToFront[n],a=r.rect,l=Math.abs(i.x-a.cx()),c=Math.abs(i.y-a.cy());if(l<a.width()/2&&c<a.height()/2){i.node=r;break}}})}),f.forEach(function(e,t){o.nodes.forEach(function(t,i){t.rect.lineIntersections(e.x1,e.y1,e.x2,e.y2).forEach(function(i,n){var r=new s(o.verts.length,i.x,i.y,t,e);o.verts.push(r),e.verts.push(r),t.ports.push(r)})});var i=Math.abs(e.y1-e.y2)<.1,n=function(e,t){return i?t.x-e.x:t.y-e.y};e.verts.sort(n);for(var r=1;r<e.verts.length;r++){var a=e.verts[r-1],l=e.verts[r];a.node&&a.node===l.node&&a.node.leaf||o.edges.push({source:a.id,target:l.id,length:Math.abs(n(a,l))})}})}return e.prototype.avg=function(e){return e.reduce(function(e,t){return e+t})/e.length},e.prototype.getGridLines=function(e){for(var t=[],i=this.leaves.slice(0,this.leaves.length);i.length>0;){var n=i.filter(function(t){return t.rect["overlap"+e.toUpperCase()](i[0].rect)}),o={nodes:n,pos:this.avg(n.map(function(t){return t.rect["c"+e]()}))};t.push(o),o.nodes.forEach(function(e){return i.splice(i.indexOf(e),1)})}return t.sort(function(e,t){return e.pos-t.pos}),t},e.prototype.getDepth=function(e){for(var t=0;e.parent!==this.root;)t++,e=e.parent;return t},e.prototype.midPoints=function(e){for(var t=e[1]-e[0],i=[e[0]-t/2],n=1;n<e.length;n++)i.push((e[n]+e[n-1])/2);return i.push(e[e.length-1]+t/2),i},e.prototype.findLineage=function(e){var t=[e];do{e=e.parent,t.push(e)}while(e!==this.root);return t.reverse()},e.prototype.findAncestorPathBetween=function(e,t){for(var i=this.findLineage(e),n=this.findLineage(t),o=0;i[o]===n[o];)o++;return{commonAncestor:i[o-1],lineages:i.slice(o).concat(n.slice(o))}},e.prototype.siblingObstacles=function(e,t){var i=this,n=this.findAncestorPathBetween(e,t),o={};n.lineages.forEach(function(e){return o[e.id]={}});var r=n.commonAncestor.children.filter(function(e){return!(e in o)});return n.lineages.filter(function(e){return e.parent!==n.commonAncestor}).forEach(function(e){return r=r.concat(e.parent.children.filter(function(t){return t!==e.id}))}),r.map(function(e){return i.nodes[e]})},e.getSegmentSets=function(e,t,i){for(var n=[],o=0;o<e.length;o++)for(var r=e[o],a=0;a<r.length;a++){(p=r[a]).edgeid=o,p.i=a;var s=p[1][t]-p[0][t];Math.abs(s)<.1&&n.push(p)}n.sort(function(e,i){return e[0][t]-i[0][t]});for(var l=[],c=null,d=0;d<n.length;d++){var p=n[d];(!c||Math.abs(p[0][t]-c.pos)>.1)&&(c={pos:p[0][t],segments:[]},l.push(c)),c.segments.push(p)}return l},e.nudgeSegs=function(e,t,i,n,r,a){var s=n.length;if(!(s<=1)){for(var l=n.map(function(t){return new o.Variable(t[0][e])}),c=[],d=0;d<s;d++)for(var p=0;p<s;p++)if(d!==p){var u=n[d],m=n[p],h=u.edgeid,f=m.edgeid,g=-1,v=-1;"x"==e?r(h,f)&&(u[0][t]<u[1][t]?(g=p,v=d):(g=d,v=p)):r(h,f)&&(u[0][t]<u[1][t]?(g=d,v=p):(g=p,v=d)),g>=0&&c.push(new o.Constraint(l[g],l[v],a))}new o.Solver(l,c).solve(),l.forEach(function(t,o){var r=n[o],a=t.position();r[0][e]=r[1][e]=a;var s=i[r.edgeid];r.i>0&&(s[r.i-1][1][e]=a),r.i<s.length-1&&(s[r.i+1][0][e]=a)})}},e.nudgeSegments=function(t,i,n,o,r){for(var a=e.getSegmentSets(t,i,n),s=0;s<a.length;s++){for(var l=a[s],c=[],d=0;d<l.segments.length;d++){var p=l.segments[d];c.push({type:0,s:p,pos:Math.min(p[0][n],p[1][n])}),c.push({type:1,s:p,pos:Math.max(p[0][n],p[1][n])})}c.sort(function(e,t){return e.pos-t.pos+e.type-t.type});var u=[],m=0;c.forEach(function(a){0===a.type?(u.push(a.s),m++):m--,0==m&&(e.nudgeSegs(i,n,t,u,o,r),u=[])})}},e.prototype.routeEdges=function(t,i,n,o){var r=this,a=t.map(function(e){return r.route(n(e),o(e))}),s=e.orderEdges(a),l=a.map(function(t){return e.makeSegments(t)});return e.nudgeSegments(l,"x","y",s,i),e.nudgeSegments(l,"y","x",s,i),e.unreverseEdges(l,a),l},e.unreverseEdges=function(e,t){e.forEach(function(e,i){t[i].reversed&&(e.reverse(),e.forEach(function(e){e.reverse()}))})},e.angleBetween2Lines=function(e,t){var i=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),o=i-n;return(o>Math.PI||o<-Math.PI)&&(o=n-i),o},e.isLeft=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)<=0},e.getOrder=function(e){for(var t={},i=0;i<e.length;i++){var n=e[i];void 0===t[n.l]&&(t[n.l]={}),t[n.l][n.r]=!0}return function(e,i){return void 0!==t[e]&&t[e][i]}},e.orderEdges=function(t){for(var i=[],n=0;n<t.length-1;n++)for(var o=n+1;o<t.length;o++){var r,a,s,c=t[n],d=t[o],p=new l(c,d);0!==p.length&&(p.reversed&&(d.reverse(),d.reversed=!0,p=new l(c,d)),(p.si<=0||p.ti<=0)&&(p.si+p.length>=c.length||p.ti+p.length>=d.length)?i.push({l:n,r:o}):(p.si+p.length>=c.length||p.ti+p.length>=d.length?(r=c[p.si+1],s=c[p.si-1],a=d[p.ti-1]):(r=c[p.si+p.length-2],a=c[p.si+p.length],s=d[p.ti+p.length]),e.isLeft(r,a,s)?i.push({l:o,r:n}):i.push({l:n,r:o})))}return e.getOrder(i)},e.makeSegments=function(e){function t(e){return{x:e.x,y:e.y}}for(var i=function(e,t,i){return Math.abs((t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x))<.001},n=[],o=t(e[0]),r=1;r<e.length;r++){var a=t(e[r]),s=r<e.length-1?e[r+1]:null;s&&i(o,a,s)||(n.push([o,a]),o=a)}return n},e.prototype.route=function(e,t){var i=this,n=this.nodes[e],o=this.nodes[t];this.obstacles=this.siblingObstacles(n,o);var a={};this.obstacles.forEach(function(e){return a[e.id]=e}),this.passableEdges=this.edges.filter(function(e){var t=i.verts[e.source],n=i.verts[e.target];return!(t.node&&t.node.id in a||n.node&&n.node.id in a)});for(var s=1;s<n.ports.length;s++){var l=n.ports[0].id,c=n.ports[s].id;this.passableEdges.push({source:l,target:c,length:0})}for(s=1;s<o.ports.length;s++){l=o.ports[0].id,c=o.ports[s].id;this.passableEdges.push({source:l,target:c,length:0})}var d=new r.Calculator(this.verts.length,this.passableEdges,function(e){return e.source},function(e){return e.target},function(e){return e.length}).PathFromNodeToNodeWithPrevCost(n.ports[0].id,o.ports[0].id,function(e,t,r){var a=i.verts[e],s=i.verts[t],l=i.verts[r],c=Math.abs(l.x-a.x),d=Math.abs(l.y-a.y);return a.node===n&&a.node===s.node||s.node===o&&s.node===l.node?0:c>1&&d>1?1e3:0}),p=d.reverse().map(function(e){return i.verts[e]});return p.push(this.nodes[o.id].ports[0]),p.filter(function(e,t){return!(t<p.length-1&&p[t+1].node===n&&e.node===n||t>0&&e.node===o&&p[t-1].node===o)})},e.getRoutePath=function(t,i,n,o){var r={routepath:"M "+t[0][0].x+" "+t[0][0].y+" ",arrowpath:""};if(t.length>1)for(var a=0;a<t.length;a++){var s=(b=t[a])[1].x,l=b[1].y,c=s-b[0].x,d=l-b[0].y;if(a<t.length-1){Math.abs(c)>0?s-=c/Math.abs(c)*i:l-=d/Math.abs(d)*i,r.routepath+="L "+s+" "+l+" ";var p=t[a+1],u=p[0].x,m=p[0].y;c=p[1].x-u,d=p[1].y-m;var h,f,g=e.angleBetween2Lines(b,p)<0?1:0;Math.abs(c)>0?(h=u+c/Math.abs(c)*i,f=m):(h=u,f=m+d/Math.abs(d)*i);var v=Math.abs(h-s),x=Math.abs(f-l);r.routepath+="A "+v+" "+x+" 0 0 "+g+" "+h+" "+f+" "}else{var y=[s,l];Math.abs(c)>0?(C=[s-=c/Math.abs(c)*o,l+n],S=[s,l-n]):(C=[s+n,l-=d/Math.abs(d)*o],S=[s-n,l]),r.routepath+="L "+s+" "+l+" ",o>0&&(r.arrowpath="M "+y[0]+" "+y[1]+" L "+C[0]+" "+C[1]+" L "+S[0]+" "+S[1])}}else{var b,C,S;s=(b=t[0])[1].x,l=b[1].y,c=s-b[0].x,d=l-b[0].y,y=[s,l];Math.abs(c)>0?(C=[s-=c/Math.abs(c)*o,l+n],S=[s,l-n]):(C=[s+n,l-=d/Math.abs(d)*o],S=[s-n,l]),r.routepath+="L "+s+" "+l+" ",o>0&&(r.arrowpath="M "+y[0]+" "+y[1]+" L "+C[0]+" "+C[1]+" L "+S[0]+" "+S[1])}return r},e}();t.GridRouter=c},"./node_modules/webcola/dist/src/handledisconnected.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=10,n=(1+Math.sqrt(5))/2,o=1e-4;t.applyPacking=function(e,t,r,a,s,l){void 0===s&&(s=1),void 0===l&&(l=!0);var c=0,d=0,p=t,u=r,m=(s=void 0!==s?s:1,a=void 0!==a?a:0,0),h=0,f=0,g=0,v=[];function x(e,t){v=[],m=0,h=0,g=d;for(var i=0;i<e.length;i++){y(e[i],t)}return Math.abs(m/h-s)}function y(e,t){for(var n=void 0,r=0;r<v.length;r++)if(v[r].space_left>=e.height&&v[r].x+v[r].width+e.width+i-t<=o){n=v[r];break}v.push(e),void 0!==n?(e.x=n.x+n.width+i,e.y=n.bottom,e.space_left=e.height,e.bottom=e.y,n.space_left-=e.height+i,n.bottom+=e.height+i):(e.y=g,g+=e.height+i,e.x=c,e.bottom=e.y,e.space_left=e.height),e.y+e.height-h>-o&&(h=e.y+e.height-d),e.x+e.width-m>-o&&(m=e.x+e.width-c)}0!=e.length&&(function(e){e.forEach(function(e){var t,i,n,o,r;t=e,i=Number.MAX_VALUE,n=Number.MAX_VALUE,o=0,r=0,t.array.forEach(function(e){var t=void 0!==e.width?e.width:a,s=void 0!==e.height?e.height:a;t/=2,s/=2,o=Math.max(e.x+t,o),i=Math.min(e.x-t,i),r=Math.max(e.y+s,r),n=Math.min(e.y-s,n)}),t.width=o-i,t.height=r-n})}(e),function(e,t){var r=Number.POSITIVE_INFINITY,a=0;e.sort(function(e,t){return t.height-e.height}),f=e.reduce(function(e,t){return e.width<t.width?e.width:t.width});var s=g=f,l=v=function(e){var t=0;return e.forEach(function(e){return t+=e.width+i}),t}(e),c=0,d=Number.MAX_VALUE,p=Number.MAX_VALUE,u=-1,m=Number.MAX_VALUE,h=Number.MAX_VALUE;for(;m>f||h>o;){if(1!=u){var g=l-(l-s)/n;d=x(e,g)}if(0!=u){var v=s+(l-s)/n;p=x(e,v)}if(m=Math.abs(g-v),h=Math.abs(d-p),d<r&&(r=d,a=g),p<r&&(r=p,a=v),d>p?(s=g,g=v,d=p,u=1):(l=v,v=g,p=d,u=0),c++>100)break}x(e,a)}(e),l&&function(e){e.forEach(function(e){var t={x:0,y:0};e.array.forEach(function(e){t.x+=e.x,t.y+=e.y}),t.x/=e.array.length,t.y/=e.array.length;var i={x:t.x-e.width/2,y:t.y-e.height/2},n={x:e.x-i.x+p/2-m/2,y:e.y-i.y+u/2-h/2};e.array.forEach(function(e){e.x+=n.x,e.y+=n.y})})}(e))},t.separateGraphs=function(e,t){for(var i={},n={},o=[],r=0,a=0;a<t.length;a++){var s=t[a],l=s.source,c=s.target;n[l.index]?n[l.index].push(c):n[l.index]=[c],n[c.index]?n[c.index].push(l):n[c.index]=[l]}for(a=0;a<e.length;a++){var d=e[a];i[d.index]||p(d,!0)}function p(e,t){if(void 0===i[e.index]){t&&(r++,o.push({array:[]})),i[e.index]=r,o[r-1].array.push(e);var a=n[e.index];if(a)for(var s=0;s<a.length;s++)p(a[s],!1)}}return o}},"./node_modules/webcola/dist/src/layout.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=i("./node_modules/webcola/dist/src/powergraph.js"),r=i("./node_modules/webcola/dist/src/linklengths.js"),a=i("./node_modules/webcola/dist/src/descent.js"),s=i("./node_modules/webcola/dist/src/rectangle.js"),l=i("./node_modules/webcola/dist/src/shortestpaths.js"),c=i("./node_modules/webcola/dist/src/geom.js"),d=i("./node_modules/webcola/dist/src/handledisconnected.js");function p(e){return void 0!==e.leaves||void 0!==e.groups}!function(e){e[e.start=0]="start",e[e.tick=1]="tick",e[e.end=2]="end"}(n=t.EventType||(t.EventType={}));var u=function(){function e(){var t=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:e.getSourceIndex,getTargetIndex:e.getTargetIndex,setLength:e.setLinkLength,getType:function(e){return"function"==typeof t._linkType?t._linkType(e):0}}}return e.prototype.on=function(e,t){return this.event||(this.event={}),"string"==typeof e?this.event[n[e]]=t:this.event[e]=t,this},e.prototype.trigger=function(e){this.event&&void 0!==this.event[e.type]&&this.event[e.type](e)},e.prototype.kick=function(){for(;!this.tick(););},e.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:n.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var e,t,i=this._nodes.length;this._links.length;for(this._descent.locks.clear(),t=0;t<i;++t)if((e=this._nodes[t]).fixed){void 0!==e.px&&void 0!==e.py||(e.px=e.x,e.py=e.y);var o=[e.px,e.py];this._descent.locks.add(t,o)}var r=this._descent.rungeKutta();return 0===r?this._alpha=0:void 0!==this._lastStress&&(this._alpha=r),this._lastStress=r,this.updateNodePositions(),this.trigger({type:n.tick,alpha:this._alpha,stress:this._lastStress}),!1},e.prototype.updateNodePositions=function(){for(var e,t=this._descent.x[0],i=this._descent.x[1],n=this._nodes.length;n--;)(e=this._nodes[n]).x=t[n],e.y=i[n]},e.prototype.nodes=function(e){if(!e){if(0===this._nodes.length&&this._links.length>0){var t=0;this._links.forEach(function(e){t=Math.max(t,e.source,e.target)}),this._nodes=new Array(++t);for(var i=0;i<t;++i)this._nodes[i]={}}return this._nodes}return this._nodes=e,this},e.prototype.groups=function(e){var t=this;return e?(this._groups=e,this._rootGroup={},this._groups.forEach(function(e){void 0===e.padding&&(e.padding=1),void 0!==e.leaves&&e.leaves.forEach(function(i,n){"number"==typeof i&&((e.leaves[n]=t._nodes[i]).parent=e)}),void 0!==e.groups&&e.groups.forEach(function(i,n){"number"==typeof i&&((e.groups[n]=t._groups[i]).parent=e)})}),this._rootGroup.leaves=this._nodes.filter(function(e){return void 0===e.parent}),this._rootGroup.groups=this._groups.filter(function(e){return void 0===e.parent}),this):this._groups},e.prototype.powerGraphGroups=function(e){var t=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(t.groups),e(t),this},e.prototype.avoidOverlaps=function(e){return arguments.length?(this._avoidOverlaps=e,this):this._avoidOverlaps},e.prototype.handleDisconnected=function(e){return arguments.length?(this._handleDisconnected=e,this):this._handleDisconnected},e.prototype.flowLayout=function(e,t){return arguments.length||(e="y"),this._directedLinkConstraints={axis:e,getMinSeparation:"number"==typeof t?function(){return t}:t},this},e.prototype.links=function(e){return arguments.length?(this._links=e,this):this._links},e.prototype.constraints=function(e){return arguments.length?(this._constraints=e,this):this._constraints},e.prototype.distanceMatrix=function(e){return arguments.length?(this._distanceMatrix=e,this):this._distanceMatrix},e.prototype.size=function(e){return e?(this._canvasSize=e,this):this._canvasSize},e.prototype.defaultNodeSize=function(e){return e?(this._defaultNodeSize=e,this):this._defaultNodeSize},e.prototype.groupCompactness=function(e){return e?(this._groupCompactness=e,this):this._groupCompactness},e.prototype.linkDistance=function(e){return e?(this._linkDistance="function"==typeof e?e:+e,this._linkLengthCalculator=null,this):this._linkDistance},e.prototype.linkType=function(e){return this._linkType=e,this},e.prototype.convergenceThreshold=function(e){return e?(this._threshold="function"==typeof e?e:+e,this):this._threshold},e.prototype.alpha=function(e){return arguments.length?(e=+e,this._alpha?this._alpha=e>0?e:0:e>0&&(this._running||(this._running=!0,this.trigger({type:n.start,alpha:this._alpha=e}),this.kick())),this):this._alpha},e.prototype.getLinkLength=function(e){return"function"==typeof this._linkDistance?+this._linkDistance(e):this._linkDistance},e.setLinkLength=function(e,t){e.length=t},e.prototype.getLinkType=function(e){return"function"==typeof this._linkType?this._linkType(e):0},e.prototype.symmetricDiffLinkLengths=function(e,t){var i=this;return void 0===t&&(t=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return r.symmetricDiffLinkLengths(i._links,i.linkAccessor,t)},this},e.prototype.jaccardLinkLengths=function(e,t){var i=this;return void 0===t&&(t=1),this.linkDistance(function(t){return e*t.length}),this._linkLengthCalculator=function(){return r.jaccardLinkLengths(i._links,i.linkAccessor,t)},this},e.prototype.start=function(t,i,n,o,c,d){var p=this;void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===c&&(c=!0),void 0===d&&(d=!0);var u,m=this.nodes().length,h=m+2*this._groups.length,f=(this._links.length,this._canvasSize[0]),g=this._canvasSize[1],v=new Array(h),x=new Array(h),y=null,b=this._avoidOverlaps;this._nodes.forEach(function(e,t){e.index=t,void 0===e.x&&(e.x=f/2,e.y=g/2),v[t]=e.x,x[t]=e.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?u=this._distanceMatrix:(u=new l.Calculator(h,this._links,e.getSourceIndex,e.getTargetIndex,function(e){return p.getLinkLength(e)}).DistanceMatrix(),y=a.Descent.createSquareMatrix(h,function(){return 2}),this._links.forEach(function(e){"number"==typeof e.source&&(e.source=p._nodes[e.source]),"number"==typeof e.target&&(e.target=p._nodes[e.target])}),this._links.forEach(function(t){var i=e.getSourceIndex(t),n=e.getTargetIndex(t);y[i][n]=y[n][i]=t.weight||1}));var C=a.Descent.createSquareMatrix(h,function(e,t){return u[e][t]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var S=m;this._groups.forEach(function(e){!function(e,t,i,n){y[e][t]=y[t][e]=i,C[e][t]=C[t][e]=n}(S,S+1,p._groupCompactness,.1),v[S]=0,x[S++]=0,v[S]=0,x[S++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var w=this._constraints||[];this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,w=w.concat(r.generateDirectedEdgeConstraints(m,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new a.Descent([v,x],C),this._descent.locks.clear();for(S=0;S<m;++S){var I=this._nodes[S];if(I.fixed){I.px=I.x,I.py=I.y;var _=[I.x,I.y];this._descent.locks.add(S,_)}}if(this._descent.threshold=this._threshold,this.initialLayout(t,v,x),w.length>0&&(this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,w).projectFunctions()),this._descent.run(i),this.separateOverlappingComponents(f,g,d),this.avoidOverlaps(b),b&&(this._nodes.forEach(function(e,t){e.x=v[t],e.y=x[t]}),this._descent.project=new s.Projection(this._nodes,this._groups,this._rootGroup,w,!0).projectFunctions(),this._nodes.forEach(function(e,t){v[t]=e.x,x[t]=e.y})),this._descent.G=y,this._descent.run(n),o){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=m,this._descent.scaleSnapByMaxH=m!=h;var D=a.Descent.createSquareMatrix(h,function(e,t){return e>=m||t>=m?y[e][t]:0});this._descent.G=D,this._descent.run(o)}return this.updateNodePositions(),this.separateOverlappingComponents(f,g,d),c?this.resume():this},e.prototype.initialLayout=function(t,i,n){if(this._groups.length>0&&t>0){var o=this._nodes.length,r=this._links.map(function(e){return{source:e.source.index,target:e.target.index}}),a=this._nodes.map(function(e){return{index:e.index}});this._groups.forEach(function(e,t){a.push({index:e.index=o+t})}),this._groups.forEach(function(e,t){void 0!==e.leaves&&e.leaves.forEach(function(t){return r.push({source:e.index,target:t.index})}),void 0!==e.groups&&e.groups.forEach(function(t){return r.push({source:e.index,target:t.index})})}),(new e).size(this.size()).nodes(a).links(r).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(t,0,0,0,!1),this._nodes.forEach(function(e){i[e.index]=a[e.index].x,n[e.index]=a[e.index].y})}else this._descent.run(t)},e.prototype.separateOverlappingComponents=function(e,t,i){var n=this;if(void 0===i&&(i=!0),!this._distanceMatrix&&this._handleDisconnected){var o=this._descent.x[0],r=this._descent.x[1];this._nodes.forEach(function(e,t){e.x=o[t],e.y=r[t]});var a=d.separateGraphs(this._nodes,this._links);d.applyPacking(a,e,t,this._defaultNodeSize,1,i),this._nodes.forEach(function(e,t){n._descent.x[0][t]=e.x,n._descent.x[1][t]=e.y,e.bounds&&(e.bounds.setXCentre(e.x),e.bounds.setYCentre(e.y))})}},e.prototype.resume=function(){return this.alpha(.1)},e.prototype.stop=function(){return this.alpha(0)},e.prototype.prepareEdgeRouting=function(e){void 0===e&&(e=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(t){return t.bounds.inflate(-e).vertices()}))},e.prototype.routeEdge=function(e,t,i){void 0===t&&(t=5);var n=[],o=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),r={x:e.source.x,y:e.source.y},a={x:e.target.x,y:e.target.y},d=o.addPoint(r,e.source.index),p=o.addPoint(a,e.target.index);o.addEdgeIfVisible(r,a,e.source.index,e.target.index),void 0!==i&&i(o);var u=new l.Calculator(o.V.length,o.E,function(e){return e.source.id},function(e){return e.target.id},function(e){return e.length()}).PathFromNodeToNode(d.id,p.id);if(1===u.length||u.length===o.V.length){var m=s.makeEdgeBetween(e.source.innerBounds,e.target.innerBounds,t);n=[m.sourceIntersection,m.arrowStart]}else{for(var h=u.length-2,f=o.V[u[h]].p,g=o.V[u[0]].p,v=(n=[e.source.innerBounds.rayIntersection(f.x,f.y)],h);v>=0;--v)n.push(o.V[u[v]].p);n.push(s.makeEdgeTo(g,e.target.innerBounds,t))}return n},e.getSourceIndex=function(e){return"number"==typeof e.source?e.source:e.source.index},e.getTargetIndex=function(e){return"number"==typeof e.target?e.target:e.target.index},e.linkId=function(t){return e.getSourceIndex(t)+"-"+e.getTargetIndex(t)},e.dragStart=function(t){p(t)?e.storeOffset(t,e.dragOrigin(t)):(e.stopNode(t),t.fixed|=2)},e.stopNode=function(e){e.px=e.x,e.py=e.y},e.storeOffset=function(t,i){void 0!==t.leaves&&t.leaves.forEach(function(t){t.fixed|=2,e.stopNode(t),t._dragGroupOffsetX=t.x-i.x,t._dragGroupOffsetY=t.y-i.y}),void 0!==t.groups&&t.groups.forEach(function(t){return e.storeOffset(t,i)})},e.dragOrigin=function(e){return p(e)?{x:e.bounds.cx(),y:e.bounds.cy()}:e},e.drag=function(t,i){p(t)?(void 0!==t.leaves&&t.leaves.forEach(function(e){t.bounds.setXCentre(i.x),t.bounds.setYCentre(i.y),e.px=e._dragGroupOffsetX+i.x,e.py=e._dragGroupOffsetY+i.y}),void 0!==t.groups&&t.groups.forEach(function(t){return e.drag(t,i)})):(t.px=i.x,t.py=i.y)},e.dragEnd=function(t){p(t)?(void 0!==t.leaves&&t.leaves.forEach(function(t){e.dragEnd(t),delete t._dragGroupOffsetX,delete t._dragGroupOffsetY}),void 0!==t.groups&&t.groups.forEach(e.dragEnd)):t.fixed&=-7},e.mouseOver=function(e){e.fixed|=4,e.px=e.x,e.py=e.y},e.mouseOut=function(e){e.fixed&=-5},e}();t.Layout=u},"./node_modules/webcola/dist/src/layout3d.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/webcola/dist/src/shortestpaths.js"),o=i("./node_modules/webcola/dist/src/descent.js"),r=i("./node_modules/webcola/dist/src/rectangle.js"),a=i("./node_modules/webcola/dist/src/linklengths.js"),s=function(){function e(e,t){this.source=e,this.target=t}return e.prototype.actualLength=function(e){var t=this;return Math.sqrt(e.reduce(function(e,i){var n=i[t.target]-i[t.source];return e+n*n},0))},e}();t.Link3D=s;var l=function(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i};t.Node3D=l;var c=function(){function e(t,i,n){var o=this;void 0===n&&(n=1),this.nodes=t,this.links=i,this.idealLinkLength=n,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(e.k);for(var r=0;r<e.k;++r)this.result[r]=new Array(t.length);t.forEach(function(t,i){for(var n=0,r=e.dims;n<r.length;n++){var a=r[n];void 0===t[a]&&(t[a]=Math.random())}o.result[0][i]=t.x,o.result[1][i]=t.y,o.result[2][i]=t.z})}return e.prototype.linkLength=function(e){return e.actualLength(this.result)},e.prototype.start=function(e){var t=this;void 0===e&&(e=100);var i=this.nodes.length,s=new d;this.useJaccardLinkLengths&&a.jaccardLinkLengths(this.links,s,1.5),this.links.forEach(function(e){return e.length*=t.idealLinkLength});var l=new n.Calculator(i,this.links,function(e){return e.source},function(e){return e.target},function(e){return e.length}).DistanceMatrix(),c=o.Descent.createSquareMatrix(i,function(e,t){return l[e][t]}),p=o.Descent.createSquareMatrix(i,function(){return 2});this.links.forEach(function(e){var t=e.source,i=e.target;return p[t][i]=p[i][t]=1}),this.descent=new o.Descent(this.result,c),this.descent.threshold=.001,this.descent.G=p,this.constraints&&(this.descent.project=new r.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var u=0;u<this.nodes.length;u++){var m=this.nodes[u];m.fixed&&this.descent.locks.add(u,[m.x,m.y,m.z])}return this.descent.run(e),this},e.prototype.tick=function(){this.descent.locks.clear();for(var e=0;e<this.nodes.length;e++){var t=this.nodes[e];t.fixed&&this.descent.locks.add(e,[t.x,t.y,t.z])}return this.descent.rungeKutta()},e.dims=["x","y","z"],e.k=e.dims.length,e}();t.Layout3D=c;var d=function(){function e(){}return e.prototype.getSourceIndex=function(e){return e.source},e.prototype.getTargetIndex=function(e){return e.target},e.prototype.getLength=function(e){return e.length},e.prototype.setLength=function(e,t){e.length=t},e}()},"./node_modules/webcola/dist/src/linklengths.js":(e,t)=>{"use strict";function i(e,t){var i={};for(var n in e)i[n]={};for(var n in t)i[n]={};return Object.keys(i).length}function n(e,t){var i=0;for(var n in e)void 0!==t[n]&&++i;return i}function o(e,t,i,n){var o=function(e,t){var i={},n=function(e,t){void 0===i[e]&&(i[e]={}),i[e][t]={}};return e.forEach(function(e){var i=t.getSourceIndex(e),o=t.getTargetIndex(e);n(i,o),n(o,i)}),i}(e,n);e.forEach(function(e){var r=o[n.getSourceIndex(e)],a=o[n.getTargetIndex(e)];n.setLength(e,1+t*i(r,a))})}function r(e,t,i){var n=[],o=0,r=[],a=[];function s(e){e.index=e.lowlink=o++,r.push(e),e.onStack=!0;for(var t=0,i=e.out;t<i.length;t++){var n=i[t];void 0===n.index?(s(n),e.lowlink=Math.min(e.lowlink,n.lowlink)):n.onStack&&(e.lowlink=Math.min(e.lowlink,n.index))}if(e.lowlink===e.index){for(var l=[];r.length&&((n=r.pop()).onStack=!1,l.push(n),n!==e););a.push(l.map(function(e){return e.id}))}}for(var l=0;l<e;l++)n.push({id:l,out:[]});for(var c=0,d=t;c<d.length;c++){var p=d[c],u=n[i.getSourceIndex(p)],m=n[i.getTargetIndex(p)];u.out.push(m)}for(var h=0,f=n;h<f.length;h++){var g=f[h];void 0===g.index&&s(g)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.symmetricDiffLinkLengths=function(e,t,r){void 0===r&&(r=1),o(e,r,function(e,t){return Math.sqrt(i(e,t)-n(e,t))},t)},t.jaccardLinkLengths=function(e,t,r){void 0===r&&(r=1),o(e,r,function(e,t){return Math.min(Object.keys(e).length,Object.keys(t).length)<1.1?0:n(e,t)/i(e,t)},t)},t.generateDirectedEdgeConstraints=function(e,t,i,n){var o=r(e,t,n),a={};o.forEach(function(e,t){return e.forEach(function(e){return a[e]=t})});var s=[];return t.forEach(function(e){var t=n.getSourceIndex(e),o=n.getTargetIndex(e);a[t]!==a[o]&&s.push({axis:i,left:t,right:o,gap:n.getMinSeparation(e)})}),s},t.stronglyConnectedComponents=r},"./node_modules/webcola/dist/src/powergraph.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,i){this.source=e,this.target=t,this.type=i};t.PowerEdge=i;var n=function(){function e(e,t,i,n){var o=this;if(this.linkAccessor=i,this.modules=new Array(e),this.roots=[],n)this.initModulesFromGroup(n);else{this.roots.push(new s);for(var a=0;a<e;++a)this.roots[0].add(this.modules[a]=new r(a))}this.R=t.length,t.forEach(function(e){var t=o.modules[i.getSourceIndex(e)],n=o.modules[i.getTargetIndex(e)],r=i.getType(e);t.outgoing.add(r,n),n.incoming.add(r,t)})}return e.prototype.initModulesFromGroup=function(e){var t=new s;this.roots.push(t);for(var i=0;i<e.leaves.length;++i){var n=e.leaves[i],o=new r(n.id);this.modules[n.id]=o,t.add(o)}if(e.groups)for(var a=0;a<e.groups.length;++a){var c=e.groups[a],d={};for(var p in c)"leaves"!==p&&"groups"!==p&&c.hasOwnProperty(p)&&(d[p]=c[p]);t.add(new r(-1-a,new l,new l,this.initModulesFromGroup(c),d))}return t},e.prototype.merge=function(e,t,i){void 0===i&&(i=0);var n=e.incoming.intersection(t.incoming),o=e.outgoing.intersection(t.outgoing),a=new s;a.add(e),a.add(t);var l=new r(this.modules.length,o,n,a);this.modules.push(l);var c=function(i,n,o){i.forAll(function(i,r){i.forAll(function(i){var a=i[n];a.add(r,l),a.remove(r,e),a.remove(r,t),e[o].remove(r,i),t[o].remove(r,i)})})};return c(o,"incoming","outgoing"),c(n,"outgoing","incoming"),this.R-=n.count()+o.count(),this.roots[i].remove(e),this.roots[i].remove(t),this.roots[i].add(l),l},e.prototype.rootMerges=function(e){void 0===e&&(e=0);for(var t=this.roots[e].modules(),i=t.length,n=new Array(i*(i-1)),o=0,r=0,a=i-1;r<a;++r)for(var s=r+1;s<i;++s){var l=t[r],c=t[s];n[o]={id:o,nEdges:this.nEdges(l,c),a:l,b:c},o++}return n},e.prototype.greedyMerge=function(){for(var e=0;e<this.roots.length;++e)if(!(this.roots[e].modules().length<2)){var t=this.rootMerges(e).sort(function(e,t){return e.nEdges==t.nEdges?e.id-t.id:e.nEdges-t.nEdges})[0];if(!(t.nEdges>=this.R))return this.merge(t.a,t.b,e),!0}},e.prototype.nEdges=function(e,t){var i=e.incoming.intersection(t.incoming),n=e.outgoing.intersection(t.outgoing);return this.R-i.count()-n.count()},e.prototype.getGroupHierarchy=function(e){var t=this,n=[];return o(this.roots[0],{},n),this.allEdges().forEach(function(o){var r=t.modules[o.source],a=t.modules[o.target];e.push(new i(void 0===r.gid?o.source:n[r.gid],void 0===a.gid?o.target:n[a.gid],o.type))}),n},e.prototype.allEdges=function(){var t=[];return e.getEdges(this.roots[0],t),t},e.getEdges=function(t,i){t.forAll(function(t){t.getEdges(i),e.getEdges(t.children,i)})},e}();function o(e,t,i){e.forAll(function(e){if(e.isLeaf())t.leaves||(t.leaves=[]),t.leaves.push(e.id);else{var n=t;if(e.gid=i.length,!e.isIsland()||e.isPredefined()){if(n={id:e.gid},e.isPredefined())for(var r in e.definition)n[r]=e.definition[r];t.groups||(t.groups=[]),t.groups.push(e.gid),i.push(n)}o(e.children,n,i)}})}t.Configuration=n;var r=function(){function e(e,t,i,n,o){void 0===t&&(t=new l),void 0===i&&(i=new l),void 0===n&&(n=new s),this.id=e,this.outgoing=t,this.incoming=i,this.children=n,this.definition=o}return e.prototype.getEdges=function(e){var t=this;this.outgoing.forAll(function(n,o){n.forAll(function(n){e.push(new i(t.id,n.id,o))})})},e.prototype.isLeaf=function(){return 0===this.children.count()},e.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},e.prototype.isPredefined=function(){return void 0!==this.definition},e}();function a(e,t){var i={};for(var n in e)n in t&&(i[n]=e[n]);return i}t.Module=r;var s=function(){function e(){this.table={}}return e.prototype.count=function(){return Object.keys(this.table).length},e.prototype.intersection=function(t){var i=new e;return i.table=a(this.table,t.table),i},e.prototype.intersectionCount=function(e){return this.intersection(e).count()},e.prototype.contains=function(e){return e in this.table},e.prototype.add=function(e){this.table[e.id]=e},e.prototype.remove=function(e){delete this.table[e.id]},e.prototype.forAll=function(e){for(var t in this.table)e(this.table[t])},e.prototype.modules=function(){var e=[];return this.forAll(function(t){t.isPredefined()||e.push(t)}),e},e}();t.ModuleSet=s;var l=function(){function e(){this.sets={},this.n=0}return e.prototype.count=function(){return this.n},e.prototype.contains=function(e){var t=!1;return this.forAllModules(function(i){t||i.id!=e||(t=!0)}),t},e.prototype.add=function(e,t){(e in this.sets?this.sets[e]:this.sets[e]=new s).add(t),++this.n},e.prototype.remove=function(e,t){var i=this.sets[e];i.remove(t),0===i.count()&&delete this.sets[e],--this.n},e.prototype.forAll=function(e){for(var t in this.sets)e(this.sets[t],Number(t))},e.prototype.forAllModules=function(e){this.forAll(function(t,i){return t.forAll(e)})},e.prototype.intersection=function(t){var i=new e;return this.forAll(function(e,n){if(n in t.sets){var o=e.intersection(t.sets[n]),r=o.count();r>0&&(i.sets[n]=o,i.n+=r)}}),i},e}();t.LinkSets=l,t.getGroups=function(e,t,i,o){for(var r=e.length,a=new n(r,t,i,o);a.greedyMerge(););var s=[],l=a.getGroupHierarchy(s);return s.forEach(function(t){var i=function(i){var n=t[i];"number"==typeof n&&(t[i]=e[n])};i("source"),i("target")}),{groups:l,powerEdges:s}}},"./node_modules/webcola/dist/src/pqueue.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.elem=e,this.subheaps=[]}return e.prototype.toString=function(e){for(var t="",i=!1,n=0;n<this.subheaps.length;++n){var o=this.subheaps[n];o.elem?(i&&(t+=","),t+=o.toString(e),i=!0):i=!1}return""!==t&&(t="("+t+")"),(this.elem?e(this.elem):"")+t},e.prototype.forEach=function(e){this.empty()||(e(this.elem,this),this.subheaps.forEach(function(t){return t.forEach(e)}))},e.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(e,t){return e+t.count()},0)},e.prototype.min=function(){return this.elem},e.prototype.empty=function(){return null==this.elem},e.prototype.contains=function(e){if(this===e)return!0;for(var t=0;t<this.subheaps.length;t++)if(this.subheaps[t].contains(e))return!0;return!1},e.prototype.isHeap=function(e){var t=this;return this.subheaps.every(function(i){return e(t.elem,i.elem)&&i.isHeap(e)})},e.prototype.insert=function(t,i){return this.merge(new e(t),i)},e.prototype.merge=function(e,t){return this.empty()?e:e.empty()?this:t(this.elem,e.elem)?(this.subheaps.push(e),this):(e.subheaps.push(this),e)},e.prototype.removeMin=function(e){return this.empty()?null:this.mergePairs(e)},e.prototype.mergePairs=function(t){if(0==this.subheaps.length)return new e(null);if(1==this.subheaps.length)return this.subheaps[0];var i=this.subheaps.pop().merge(this.subheaps.pop(),t),n=this.mergePairs(t);return i.merge(n,t)},e.prototype.decreaseKey=function(t,i,n,o){var r=t.removeMin(o);t.elem=r.elem,t.subheaps=r.subheaps,null!==n&&null!==r.elem&&n(t.elem,t);var a=new e(i);return null!==n&&n(i,a),this.merge(a,o)},e}();t.PairingHeap=i;var n=function(){function e(e){this.lessThan=e}return e.prototype.top=function(){return this.empty()?null:this.root.elem},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o,r=0;o=t[r];++r)e=new i(o),this.root=this.empty()?e:this.root.merge(e,this.lessThan);return e},e.prototype.empty=function(){return!this.root||!this.root.elem},e.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},e.prototype.forEach=function(e){this.root.forEach(e)},e.prototype.pop=function(){if(this.empty())return null;var e=this.root.min();return this.root=this.root.removeMin(this.lessThan),e},e.prototype.reduceKey=function(e,t,i){void 0===i&&(i=null),this.root=this.root.decreaseKey(e,t,i,this.lessThan)},e.prototype.toString=function(e){return this.root.toString(e)},e.prototype.count=function(){return this.root.count()},e}();t.PriorityQueue=n},"./node_modules/webcola/dist/src/rbtree.js":function(e,t){"use strict";var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.findIter=function(e){for(var t=this._root,i=this.iterator();null!==t;){var n=this._comparator(e,t.data);if(0===n)return i._cursor=t,i;i._ancestors.push(t),t=t.get_child(n>0)}return null}}return e.prototype.clear=function(){this._root=null,this.size=0},e.prototype.find=function(e){for(var t=this._root;null!==t;){var i=this._comparator(e,t.data);if(0===i)return t.data;t=t.get_child(i>0)}return null},e.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},e.prototype.upperBound=function(e){var t=this._comparator;return this._bound(e,function(e,i){return t(i,e)})},e.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},e.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},e.prototype.iterator=function(){return new r(this)},e.prototype.each=function(e){for(var t,i=this.iterator();null!==(t=i.next());)e(t)},e.prototype.reach=function(e){for(var t,i=this.iterator();null!==(t=i.prev());)e(t)},e.prototype._bound=function(e,t){for(var i=this._root,n=this.iterator();null!==i;){var o=this._comparator(e,i.data);if(0===o)return n._cursor=i,n;n._ancestors.push(i),i=i.get_child(o>0)}for(var r=n._ancestors.length-1;r>=0;--r)if(t(e,(i=n._ancestors[r]).data)>0)return n._cursor=i,n._ancestors.length=r,n;return n._ancestors.length=0,n},e}();t.TreeBase=o;var r=function(){function e(e){this._tree=e,this._ancestors=[],this._cursor=null}return e.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},e.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else{var t;if(null===this._cursor.right)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===t);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},e.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else{var t;if(null===this._cursor.left)do{if(t=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===t);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},e.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},e.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e}();t.Iterator=r;var a=function(){function e(e){this.data=e,this.left=null,this.right=null,this.red=!0}return e.prototype.get_child=function(e){return e?this.right:this.left},e.prototype.set_child=function(e,t){e?this.right=t:this.left=t},e}(),s=function(e){function t(t){var i=e.call(this)||this;return i._root=null,i._comparator=t,i.size=0,i}return n(t,e),t.prototype.insert=function(e){var i=!1;if(null===this._root)this._root=new a(e),i=!0,this.size++;else{var n=new a(void 0),o=!1,r=!1,s=null,l=n,c=null,d=this._root;for(l.right=this._root;;){if(null===d?(d=new a(e),c.set_child(o,d),i=!0,this.size++):t.is_red(d.left)&&t.is_red(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),t.is_red(d)&&t.is_red(c)){var p=l.right===s;d===c.get_child(r)?l.set_child(p,t.single_rotate(s,!r)):l.set_child(p,t.double_rotate(s,!r))}var u=this._comparator(d.data,e);if(0===u)break;r=o,o=u<0,null!==s&&(l=s),s=c,c=d,d=d.get_child(o)}this._root=n.right}return this._root.red=!1,i},t.prototype.remove=function(e){if(null===this._root)return!1;var i=new a(void 0),n=i;n.right=this._root;for(var o=null,r=null,s=null,l=!0;null!==n.get_child(l);){var c=l;r=o,o=n,n=n.get_child(l);var d=this._comparator(e,n.data);if(l=d>0,0===d&&(s=n),!t.is_red(n)&&!t.is_red(n.get_child(l)))if(t.is_red(n.get_child(!l))){var p=t.single_rotate(n,l);o.set_child(c,p),o=p}else if(!t.is_red(n.get_child(!l))){var u=o.get_child(!c);if(null!==u)if(t.is_red(u.get_child(!c))||t.is_red(u.get_child(c))){var m=r.right===o;t.is_red(u.get_child(c))?r.set_child(m,t.double_rotate(o,c)):t.is_red(u.get_child(!c))&&r.set_child(m,t.single_rotate(o,c));var h=r.get_child(m);h.red=!0,n.red=!0,h.left.red=!1,h.right.red=!1}else o.red=!1,u.red=!0,n.red=!0}}return null!==s&&(s.data=n.data,o.set_child(o.right===n,n.get_child(null===n.left)),this.size--),this._root=i.right,null!==this._root&&(this._root.red=!1),null!==s},t.is_red=function(e){return null!==e&&e.red},t.single_rotate=function(e,t){var i=e.get_child(!t);return e.set_child(!t,i.get_child(t)),i.set_child(t,e),e.red=!0,i.red=!1,i},t.double_rotate=function(e,i){return e.set_child(!i,t.single_rotate(e.get_child(!i),!i)),t.single_rotate(e,i)},t}(o);t.RBTree=s},"./node_modules/webcola/dist/src/rectangle.js":function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},n(e,t)},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i("./node_modules/webcola/dist/src/vpsc.js"),a=i("./node_modules/webcola/dist/src/rbtree.js");function s(e){return e.bounds=void 0!==e.leaves?e.leaves.reduce(function(e,t){return t.bounds.union(e)},l.empty()):l.empty(),void 0!==e.groups&&(e.bounds=e.groups.reduce(function(e,t){return s(t).union(e)},e.bounds)),e.bounds=e.bounds.inflate(e.padding),e.bounds}t.computeGroupBounds=s;var l=function(){function e(e,t,i,n){this.x=e,this.X=t,this.y=i,this.Y=n}return e.empty=function(){return new e(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},e.prototype.cx=function(){return(this.x+this.X)/2},e.prototype.cy=function(){return(this.y+this.Y)/2},e.prototype.overlapX=function(e){var t=this.cx(),i=e.cx();return t<=i&&e.x<this.X?this.X-e.x:i<=t&&this.x<e.X?e.X-this.x:0},e.prototype.overlapY=function(e){var t=this.cy(),i=e.cy();return t<=i&&e.y<this.Y?this.Y-e.y:i<=t&&this.y<e.Y?e.Y-this.y:0},e.prototype.setXCentre=function(e){var t=e-this.cx();this.x+=t,this.X+=t},e.prototype.setYCentre=function(e){var t=e-this.cy();this.y+=t,this.Y+=t},e.prototype.width=function(){return this.X-this.x},e.prototype.height=function(){return this.Y-this.y},e.prototype.union=function(t){return new e(Math.min(this.x,t.x),Math.max(this.X,t.X),Math.min(this.y,t.y),Math.max(this.Y,t.Y))},e.prototype.lineIntersections=function(t,i,n,o){for(var r=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],a=[],s=0;s<4;++s){var l=e.lineIntersection(t,i,n,o,r[s][0],r[s][1],r[s][2],r[s][3]);null!==l&&a.push({x:l.x,y:l.y})}return a},e.prototype.rayIntersection=function(e,t){var i=this.lineIntersections(this.cx(),this.cy(),e,t);return i.length>0?i[0]:null},e.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},e.lineIntersection=function(e,t,i,n,o,r,a,s){var l=i-e,c=a-o,d=n-t,p=s-r,u=p*l-c*d;if(0==u)return null;var m=e-o,h=t-r,f=(c*h-p*m)/u,g=(l*h-d*m)/u;return f>=0&&f<=1&&g>=0&&g<=1?{x:e+f*l,y:t+f*d}:null},e.prototype.inflate=function(t){return new e(this.x-t,this.X+t,this.y-t,this.Y+t)},e}();t.Rectangle=l,t.makeEdgeBetween=function(e,t,i){var n=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},o=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},r=o.x-n.x,a=o.y-n.y,s=Math.sqrt(r*r+a*a),l=s-i;return{sourceIntersection:n,targetIntersection:o,arrowStart:{x:n.x+l*r/s,y:n.y+l*a/s}}},t.makeEdgeTo=function(e,t,i){var n=t.rayIntersection(e.x,e.y);n||(n={x:t.cx(),y:t.cy()});var o=n.x-e.x,r=n.y-e.y,a=Math.sqrt(o*o+r*r);return{x:n.x-i*o/a,y:n.y-i*r/a}};var c=function(e,t,i){this.v=e,this.r=t,this.pos=i,this.prev=u(),this.next=u()},d=function(e,t,i){this.isOpen=e,this.v=t,this.pos=i};function p(e,t){return e.pos>t.pos?1:e.pos<t.pos||e.isOpen?-1:t.isOpen?1:0}function u(){return new a.RBTree(function(e,t){return e.pos-t.pos})}var m={getCentre:function(e){return e.cx()},getOpen:function(e){return e.y},getClose:function(e){return e.Y},getSize:function(e){return e.width()},makeRect:function(e,t,i,n){return new l(i-n/2,i+n/2,e,t)},findNeighbours:function(e,t){var i=function(i,n){for(var o,r=t.findIter(e);null!==(o=r[i]());){var a=o.r.overlapX(e.r);if((a<=0||a<=o.r.overlapY(e.r))&&(e[i].insert(o),o[n].insert(e)),a<=0)break}};i("next","prev"),i("prev","next")}},h={getCentre:function(e){return e.cy()},getOpen:function(e){return e.x},getClose:function(e){return e.X},getSize:function(e){return e.height()},makeRect:function(e,t,i,n){return new l(e,t,i-n/2,i+n/2)},findNeighbours:function(e,t){var i=function(i,n){var o=t.findIter(e)[i]();null!==o&&o.r.overlapX(e.r)>0&&(e[i].insert(o),o[n].insert(e))};i("next","prev"),i("prev","next")}};function f(e,t,i,n){void 0===n&&(n=!1);var o=e.padding,r=void 0!==e.groups?e.groups.length:0,a=void 0!==e.leaves?e.leaves.length:0,s=r?e.groups.reduce(function(e,n){return e.concat(f(n,t,i,!0))},[]):[],l=(n?2:0)+a+r,c=new Array(l),d=new Array(l),p=0,u=function(e,t){d[p]=e,c[p++]=t};if(n){var m=e.bounds,h=t.getCentre(m),v=t.getSize(m)/2,x=t.getOpen(m),y=t.getClose(m),b=h-v+o/2,C=h+v-o/2;e.minVar.desiredPosition=b,u(t.makeRect(x,y,b,o),e.minVar),e.maxVar.desiredPosition=C,u(t.makeRect(x,y,C,o),e.maxVar)}a&&e.leaves.forEach(function(e){return u(e.bounds,e.variable)}),r&&e.groups.forEach(function(e){var i=e.bounds;u(t.makeRect(t.getOpen(i),t.getClose(i),t.getCentre(i),t.getSize(i)),e.minVar)});var S=g(d,c,t,i);return r&&(c.forEach(function(e){e.cOut=[],e.cIn=[]}),S.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),e.groups.forEach(function(e){var i=(e.padding-t.getSize(e.bounds))/2;e.minVar.cIn.forEach(function(e){return e.gap+=i}),e.minVar.cOut.forEach(function(t){t.left=e.maxVar,t.gap+=i})})),s.concat(S)}function g(e,t,i,n){var o,a=e.length,s=2*a;console.assert(t.length>=a);var l=new Array(s);for(o=0;o<a;++o){var m=e[o],h=new c(t[o],m,i.getCentre(m));l[o]=new d(!0,h,i.getOpen(m)),l[o+a]=new d(!1,h,i.getClose(m))}l.sort(p);var f=new Array,g=u();for(o=0;o<s;++o){var v=l[o];h=v.v;if(v.isOpen)g.insert(h),i.findNeighbours(h,g);else{g.remove(h);var x=function(e,t){var o=(i.getSize(e.r)+i.getSize(t.r))/2+n;f.push(new r.Constraint(e.v,t.v,o))},y=function(e,t,i){for(var n,o=h[e].iterator();null!==(n=o[e]());)i(n,h),n[t].remove(h)};y("prev","next",function(e,t){return x(e,t)}),y("next","prev",function(e,t){return x(t,e)})}}return console.assert(0===g.size),f}function v(e,t){return g(e,t,m,1e-6)}function x(e,t){return g(e,t,h,1e-6)}function y(e){return f(e,m,1e-6)}function b(e){return f(e,h,1e-6)}t.generateXConstraints=v,t.generateYConstraints=x,t.generateXGroupConstraints=y,t.generateYGroupConstraints=b,t.removeOverlaps=function(e){var t=e.map(function(e){return new r.Variable(e.cx())}),i=v(e,t),n=new r.Solver(t,i);n.solve(),t.forEach(function(t,i){return e[i].setXCentre(t.position())}),t=e.map(function(e){return new r.Variable(e.cy())}),i=x(e,t),(n=new r.Solver(t,i)).solve(),t.forEach(function(t,i){return e[i].setYCentre(t.position())})};var C=function(e){function t(t,i){var n=e.call(this,0,i)||this;return n.index=t,n}return o(t,e),t}(r.Variable);t.IndexedVariable=C;var S=function(){function e(e,t,i,n,o){var r=this;if(void 0===i&&(i=null),void 0===n&&(n=null),void 0===o&&(o=!1),this.nodes=e,this.groups=t,this.rootGroup=i,this.avoidOverlaps=o,this.variables=e.map(function(e,t){return e.variable=new C(t,1)}),n&&this.createConstraints(n),o&&i&&void 0!==i.groups){e.forEach(function(e){if(e.width&&e.height){var t=e.width/2,i=e.height/2;e.bounds=new l(e.x-t,e.x+t,e.y-i,e.y+i)}else e.bounds=new l(e.x,e.x,e.y,e.y)}),s(i);var a=e.length;t.forEach(function(e){r.variables[a]=e.minVar=new C(a++,void 0!==e.stiffness?e.stiffness:.01),r.variables[a]=e.maxVar=new C(a++,void 0!==e.stiffness?e.stiffness:.01)})}}return e.prototype.createSeparation=function(e){return new r.Constraint(this.nodes[e.left].variable,this.nodes[e.right].variable,e.gap,void 0!==e.equality&&e.equality)},e.prototype.makeFeasible=function(e){var t=this;if(this.avoidOverlaps){var i="x",n="width";"x"===e.axis&&(i="y",n="height");var o=e.offsets.map(function(e){return t.nodes[e.node]}).sort(function(e,t){return e[i]-t[i]}),r=null;o.forEach(function(e){if(r){var t=r[i]+r[n];t>e[i]&&(e[i]=t)}r=e})}},e.prototype.createAlignment=function(e){var t=this,i=this.nodes[e.offsets[0].node].variable;this.makeFeasible(e);var n="x"===e.axis?this.xConstraints:this.yConstraints;e.offsets.slice(1).forEach(function(e){var o=t.nodes[e.node].variable;n.push(new r.Constraint(i,o,e.offset,!0))})},e.prototype.createConstraints=function(e){var t=this,i=function(e){return void 0===e.type||"separation"===e.type};this.xConstraints=e.filter(function(e){return"x"===e.axis&&i(e)}).map(function(e){return t.createSeparation(e)}),this.yConstraints=e.filter(function(e){return"y"===e.axis&&i(e)}).map(function(e){return t.createSeparation(e)}),e.filter(function(e){return"alignment"===e.type}).forEach(function(e){return t.createAlignment(e)})},e.prototype.setupVariablesAndBounds=function(e,t,i,n){this.nodes.forEach(function(o,r){o.fixed?(o.variable.weight=o.fixedWeight?o.fixedWeight:1e3,i[r]=n(o)):o.variable.weight=1;var a=(o.width||0)/2,s=(o.height||0)/2,c=e[r],d=t[r];o.bounds=new l(c-a,c+a,d-s,d+s)})},e.prototype.xProject=function(e,t,i){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(e,t,e,i,function(e){return e.px},this.xConstraints,y,function(e){return e.bounds.setXCentre(i[e.variable.index]=e.variable.position())},function(e){var t=i[e.minVar.index]=e.minVar.position(),n=i[e.maxVar.index]=e.maxVar.position(),o=e.padding/2;e.bounds.x=t-o,e.bounds.X=n+o})},e.prototype.yProject=function(e,t,i){(this.rootGroup||this.yConstraints)&&this.project(e,t,t,i,function(e){return e.py},this.yConstraints,b,function(e){return e.bounds.setYCentre(i[e.variable.index]=e.variable.position())},function(e){var t=i[e.minVar.index]=e.minVar.position(),n=i[e.maxVar.index]=e.maxVar.position(),o=e.padding/2;e.bounds.y=t-o,e.bounds.Y=n+o})},e.prototype.projectFunctions=function(){var e=this;return[function(t,i,n){return e.xProject(t,i,n)},function(t,i,n){return e.yProject(t,i,n)}]},e.prototype.project=function(e,t,i,n,o,r,a,l,c){this.setupVariablesAndBounds(e,t,n,o),this.rootGroup&&this.avoidOverlaps&&(s(this.rootGroup),r=r.concat(a(this.rootGroup))),this.solve(this.variables,r,i,n),this.nodes.forEach(l),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),s(this.rootGroup))},e.prototype.solve=function(e,t,i,n){var o=new r.Solver(e,t);o.setStartingPositions(i),o.setDesiredPositions(n),o.solve()},e}();t.Projection=S},"./node_modules/webcola/dist/src/shortestpaths.js":(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("./node_modules/webcola/dist/src/pqueue.js"),o=function(e,t){this.id=e,this.distance=t},r=function(e){this.id=e,this.neighbours=[]},a=function(e,t,i){this.node=e,this.prev=t,this.d=i},s=function(){function e(e,t,i,n,a){this.n=e,this.es=t,this.neighbours=new Array(this.n);for(var s=this.n;s--;)this.neighbours[s]=new r(s);for(s=this.es.length;s--;){var l=this.es[s],c=i(l),d=n(l),p=a(l);this.neighbours[c].neighbours.push(new o(d,p)),this.neighbours[d].neighbours.push(new o(c,p))}}return e.prototype.DistanceMatrix=function(){for(var e=new Array(this.n),t=0;t<this.n;++t)e[t]=this.dijkstraNeighbours(t);return e},e.prototype.DistancesFromNode=function(e){return this.dijkstraNeighbours(e)},e.prototype.PathFromNodeToNode=function(e,t){return this.dijkstraNeighbours(e,t)},e.prototype.PathFromNodeToNodeWithPrevCost=function(e,t,i){var o=new n.PriorityQueue(function(e,t){return e.d<=t.d}),r=this.neighbours[e],s=new a(r,null,0),l={};for(o.push(s);!o.empty()&&(r=(s=o.pop()).node).id!==t;)for(var c=r.neighbours.length;c--;){var d=r.neighbours[c],p=this.neighbours[d.id];if(!s.prev||p.id!==s.prev.node.id){var u=p.id+","+r.id;if(!(u in l&&l[u]<=s.d)){var m=s.prev?i(s.prev.node.id,r.id,p.id):0,h=s.d+d.distance+m;l[u]=h,o.push(new a(p,s,h))}}}for(var f=[];s.prev;)s=s.prev,f.push(s.node.id);return f},e.prototype.dijkstraNeighbours=function(e,t){void 0===t&&(t=-1);for(var i=new n.PriorityQueue(function(e,t){return e.d<=t.d}),o=this.neighbours.length,r=new Array(o);o--;){var a=this.neighbours[o];a.d=o===e?0:Number.POSITIVE_INFINITY,a.q=i.push(a)}for(;!i.empty();){var s=i.pop();if(r[s.id]=s.d,s.id===t){for(var l=[],c=s;void 0!==c.prev;)l.push(c.prev.id),c=c.prev;return l}for(o=s.neighbours.length;o--;){var d=s.neighbours[o],p=(c=this.neighbours[d.id],s.d+d.distance);s.d!==Number.MAX_VALUE&&c.d>p&&(c.d=p,c.prev=s,i.reduceKey(c.q,c,function(e,t){return e.q=t}))}}return r},e}();t.Calculator=s},"./node_modules/webcola/dist/src/vpsc.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.scale=e,this.AB=0,this.AD=0,this.A2=0}return e.prototype.addVariable=function(e){var t=this.scale/e.scale,i=e.offset/e.scale,n=e.weight;this.AB+=n*t*i,this.AD+=n*t*e.desiredPosition,this.A2+=n*t*t},e.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},e}();t.PositionStats=i;var n=function(){function e(e,t,i,n){void 0===n&&(n=!1),this.left=e,this.right=t,this.gap=i,this.equality=n,this.active=!1,this.unsatisfiable=!1,this.left=e,this.right=t,this.gap=i,this.equality=n}return e.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},e}();t.Constraint=n;var o=function(){function e(e,t,i){void 0===t&&(t=1),void 0===i&&(i=1),this.desiredPosition=e,this.weight=t,this.scale=i,this.offset=0}return e.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},e.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},e.prototype.visitNeighbours=function(e,t){var i=function(i,n){return i.active&&e!==n&&t(i,n)};this.cOut.forEach(function(e){return i(e,e.right)}),this.cIn.forEach(function(e){return i(e,e.left)})},e}();t.Variable=o;var r=function(){function e(e){this.vars=[],e.offset=0,this.ps=new i(e.scale),this.addVariable(e)}return e.prototype.addVariable=function(e){e.block=this,this.vars.push(e),this.ps.addVariable(e),this.posn=this.ps.getPosn()},e.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var e=0,t=this.vars.length;e<t;++e)this.ps.addVariable(this.vars[e]);this.posn=this.ps.getPosn()},e.prototype.compute_lm=function(e,t,i){var n=this,o=e.dfdv();return e.visitNeighbours(t,function(t,r){var a=n.compute_lm(r,e,i);r===t.right?(o+=a*t.left.scale,t.lm=a):(o+=a*t.right.scale,t.lm=-a),i(t)}),o/e.scale},e.prototype.populateSplitBlock=function(e,t){var i=this;e.visitNeighbours(t,function(t,n){n.offset=e.offset+(n===t.right?t.gap:-t.gap),i.addVariable(n),i.populateSplitBlock(n,e)})},e.prototype.traverse=function(e,t,i,n){var o=this;void 0===i&&(i=this.vars[0]),void 0===n&&(n=null),i.visitNeighbours(n,function(n,r){t.push(e(n)),o.traverse(e,t,r,i)})},e.prototype.findMinLM=function(){var e=null;return this.compute_lm(this.vars[0],null,function(t){!t.equality&&(null===e||t.lm<e.lm)&&(e=t)}),e},e.prototype.findMinLMBetween=function(e,t){this.compute_lm(e,null,function(){});var i=null;return this.findPath(e,null,t,function(e,t){!e.equality&&e.right===t&&(null===i||e.lm<i.lm)&&(i=e)}),i},e.prototype.findPath=function(e,t,i,n){var o=this,r=!1;return e.visitNeighbours(t,function(t,a){r||a!==i&&!o.findPath(a,e,i,n)||(r=!0,n(t,a))}),r},e.prototype.isActiveDirectedPathBetween=function(e,t){if(e===t)return!0;for(var i=e.cOut.length;i--;){var n=e.cOut[i];if(n.active&&this.isActiveDirectedPathBetween(n.right,t))return!0}return!1},e.split=function(t){return t.active=!1,[e.createSplitBlock(t.left),e.createSplitBlock(t.right)]},e.createSplitBlock=function(t){var i=new e(t);return i.populateSplitBlock(t,null),i},e.prototype.splitBetween=function(t,i){var n=this.findMinLMBetween(t,i);if(null!==n){var o=e.split(n);return{constraint:n,lb:o[0],rb:o[1]}}return null},e.prototype.mergeAcross=function(e,t,i){t.active=!0;for(var n=0,o=e.vars.length;n<o;++n){var r=e.vars[n];r.offset+=i,this.addVariable(r)}this.posn=this.ps.getPosn()},e.prototype.cost=function(){for(var e=0,t=this.vars.length;t--;){var i=this.vars[t],n=i.position()-i.desiredPosition;e+=n*n*i.weight}return e},e}();t.Block=r;var a=function(){function e(e){this.vs=e;var t=e.length;for(this.list=new Array(t);t--;){var i=new r(e[t]);this.list[t]=i,i.blockInd=t}}return e.prototype.cost=function(){for(var e=0,t=this.list.length;t--;)e+=this.list[t].cost();return e},e.prototype.insert=function(e){e.blockInd=this.list.length,this.list.push(e)},e.prototype.remove=function(e){var t=this.list.length-1,i=this.list[t];this.list.length=t,e!==i&&(this.list[e.blockInd]=i,i.blockInd=e.blockInd)},e.prototype.merge=function(e){var t=e.left.block,i=e.right.block,n=e.right.offset-e.left.offset-e.gap;t.vars.length<i.vars.length?(i.mergeAcross(t,e,n),this.remove(t)):(t.mergeAcross(i,e,-n),this.remove(i))},e.prototype.forEach=function(e){this.list.forEach(e)},e.prototype.updateBlockPositions=function(){this.list.forEach(function(e){return e.updateWeightedPosition()})},e.prototype.split=function(e){var t=this;this.updateBlockPositions(),this.list.forEach(function(i){var n=i.findMinLM();null!==n&&n.lm<s.LAGRANGIAN_TOLERANCE&&(i=n.left.block,r.split(n).forEach(function(e){return t.insert(e)}),t.remove(i),e.push(n))})},e}();t.Blocks=a;var s=function(){function e(e,t){this.vs=e,this.cs=t,this.vs=e,e.forEach(function(e){e.cIn=[],e.cOut=[]}),this.cs=t,t.forEach(function(e){e.left.cOut.push(e),e.right.cIn.push(e)}),this.inactive=t.map(function(e){return e.active=!1,e}),this.bs=null}return e.prototype.cost=function(){return this.bs.cost()},e.prototype.setStartingPositions=function(e){this.inactive=this.cs.map(function(e){return e.active=!1,e}),this.bs=new a(this.vs),this.bs.forEach(function(t,i){return t.posn=e[i]})},e.prototype.setDesiredPositions=function(e){this.vs.forEach(function(t,i){return t.desiredPosition=e[i]})},e.prototype.mostViolated=function(){for(var t=Number.MAX_VALUE,i=null,n=this.inactive,o=n.length,r=o,a=0;a<o;++a){var s=n[a];if(!s.unsatisfiable){var l=s.slack();if((s.equality||l<t)&&(t=l,i=s,r=a,s.equality))break}}return r!==o&&(t<e.ZERO_UPPERBOUND&&!i.active||i.equality)&&(n[r]=n[o-1],n.length=o-1),i},e.prototype.satisfy=function(){null==this.bs&&(this.bs=new a(this.vs)),this.bs.split(this.inactive);for(var t=null;(t=this.mostViolated())&&(t.equality||t.slack()<e.ZERO_UPPERBOUND&&!t.active);){var i=t.left.block;if(i!==t.right.block)this.bs.merge(t);else{if(i.isActiveDirectedPathBetween(t.right,t.left)){t.unsatisfiable=!0;continue}var n=i.splitBetween(t.left,t.right);if(null===n){t.unsatisfiable=!0;continue}this.bs.insert(n.lb),this.bs.insert(n.rb),this.bs.remove(i),this.inactive.push(n.constraint),t.slack()>=0?this.inactive.push(t):this.bs.merge(t)}}},e.prototype.solve=function(){this.satisfy();for(var e=Number.MAX_VALUE,t=this.bs.cost();Math.abs(e-t)>1e-4;)this.satisfy(),e=t,t=this.bs.cost();return t},e.LAGRANGIAN_TOLERANCE=-1e-4,e.ZERO_UPPERBOUND=-1e-10,e}();t.Solver=s,t.removeOverlapInOneDimension=function(e,t,i){for(var r=e.map(function(e){return new o(e.desiredCenter)}),a=[],l=e.length,c=0;c<l-1;c++){var d=e[c],p=e[c+1];a.push(new n(r[c],r[c+1],(d.size+p.size)/2))}var u=r[0],m=r[l-1],h=e[0].size/2,f=e[l-1].size/2,g=null,v=null;return t&&(g=new o(t,1e3*u.weight),r.push(g),a.push(new n(g,u,h))),i&&(v=new o(i,1e3*m.weight),r.push(v),a.push(new n(m,v,f))),new s(r,a).solve(),{newCenters:r.slice(0,e.length).map(function(e){return e.position()}),lowerBound:g?g.position():u.position()-h,upperBound:v?v.position():m.position()+f}}}}]);
//# sourceMappingURL=node_modules_helix_platform_fesm2015_helix-platform-admin-components_js.js.map