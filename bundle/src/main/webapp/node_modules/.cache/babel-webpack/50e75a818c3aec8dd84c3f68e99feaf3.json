{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, Input, Output, ViewChild, NgModule } from '@angular/core';\nimport * as i1$1 from '@angular/router';\nimport * as i2 from '@helix/platform/shared/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport * as i3$1 from '@helix/platform/ui-kit';\nimport { ValidationIssueType, RxJsonViewerModule, RxValidationIssuesModule } from '@helix/platform/ui-kit';\nimport * as i4 from '@ngx-translate/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport * as i10 from '@angular/forms';\nimport { FormControl, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i7 from '@bmc-ux/adapt-angular';\nimport { AdaptSidebarComponent, AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport * as i6 from '@helix/platform/shared/components';\nimport { RX_REVERT_CUSTOMIZATION, TextFormControlComponent, TextareaFormControlComponent, RxRevertCustomizationComponent, CustomizationOptionsComponent, RxDesignerHeaderModule, RxFormBuilderModule } from '@helix/platform/shared/components';\nimport * as i3 from '@helix/platform/utils';\nimport * as i1 from '@ngrx/store';\nimport { createAction, props, createFeatureSelector, createSelector, createReducer, on, StoreModule } from '@ngrx/store';\nimport { some, isEmpty, trim, isUndefined, last } from 'lodash';\nimport { ReplaySubject, Subject, combineLatest, of } from 'rxjs';\nimport { switchMap, map, shareReplay, withLatestFrom, filter, tap, startWith, takeUntil, skip, take, catchError } from 'rxjs/operators';\nimport * as i9 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2$1 from '@ngrx/effects';\nimport { createEffect, ofType, EffectsModule } from '@ngrx/effects';\nimport * as i6$1 from '@helix/platform/document/api';\nfunction DocumentDesignerComponent_ng_container_0_adapt_code_viewer_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"adapt-code-viewer\", 12);\n    i0.ɵɵpipe(1, \"json\");\n  }\n  if (rf & 2) {\n    const vm_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"code\", i0.ɵɵpipeBind1(1, 4, vm_r1.definitionForJsonViewer))(\"lang\", \"javascript\")(\"hasToolbar\", false)(\"theme\", \"light\");\n  }\n}\nfunction DocumentDesignerComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"rx-designer-header\", 1);\n    i0.ɵɵlistener(\"toggleDesignMode\", function DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_toggleDesignMode_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onToggleDesignMode();\n    })(\"save\", function DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_save_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.onSave();\n    })(\"closeDesigner\", function DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_closeDesigner_1_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.closeDesigner.emit();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"adapt-sidebar\", 3);\n    i0.ɵɵelementStart(4, \"adapt-sidebar-item\", 4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementStart(7, \"rx-form-builder\", 5);\n    i0.ɵɵlistener(\"editorEvent\", function DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_editorEvent_7_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.onEditorEvent($event);\n    })(\"formInitialized\", function DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_formInitialized_7_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.onDefinitionInspectorInitialized();\n    })(\"modelChange\", function DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_modelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.onDefinitionModelChange($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"adapt-sidebar-item\", 6);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementStart(11, \"rx-validation-issues\", 7);\n    i0.ɵɵlistener(\"correctIssue\", function DocumentDesignerComponent_ng_container_0_Template_rx_validation_issues_correctIssue_11_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.onCorrectIssue($event);\n    });\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 8);\n    i0.ɵɵelement(14, \"adapt-rx-control-label\", 9);\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵelement(16, \"textarea\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, DocumentDesignerComponent_ng_container_0_adapt_code_viewer_17_Template, 2, 6, \"adapt-code-viewer\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const vm_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"bundleName\", vm_r1.bundleFriendlyName)(\"breadcrumbItems\", vm_r1.breadcrumbItems)(\"isDesignMode\", !vm_r1.definitionForJsonViewer)(\"isSaveButtonDisabled\", vm_r1.isSaveButtonDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"hidden\", !!vm_r1.definitionForJsonViewer);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"openedId\", 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"headerTitle\", i0.ɵɵpipeBind1(5, 22, \"com.bmc.arsys.rx.client.common.properties.label\"));\n    i0.ɵɵpropertyInterpolate(\"tooltipText\", i0.ɵɵpipeBind1(6, 24, \"com.bmc.arsys.rx.client.common.properties.label\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"config\", vm_r1.definitionInspectorConfig)(\"focusEditor$\", ctx_r0.inspectorFocusEditor$)(\"isReadOnly\", vm_r1.isReadOnly)(\"model\", vm_r1.definitionModel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"headerTitle\", i0.ɵɵpipeBind1(9, 26, \"com.bmc.arsys.rx.client.designer.validation-issues.label\"));\n    i0.ɵɵpropertyInterpolate(\"tooltipText\", i0.ɵɵpipeBind1(10, 28, \"com.bmc.arsys.rx.client.designer.validation-issues.label\"));\n    i0.ɵɵproperty(\"iconClass\", vm_r1.hasValidationErrors ? \"d-icon-exclamation_triangle text-danger\" : \"d-icon-exclamation_triangle\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"definitionTypeDisplayName\", i0.ɵɵpipeBind1(12, 30, \"com.bmc.arsys.rx.client.document-definition.label\"))(\"issueSections\", vm_r1.validationIssues);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"label\", i0.ɵɵpipeBind1(15, 32, \"com.bmc.arsys.rx.client.document-designer.document-schema.label\"))(\"showRequiredLabel\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.schemaFormControl)(\"readonly\", vm_r1.isReadOnly);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", vm_r1.definitionForJsonViewer);\n  }\n}\nfunction DocumentDesignerPageComponent_rx_document_designer_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"rx-document-designer\", 1);\n    i0.ɵɵlistener(\"definitionSaved\", function DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_definitionSaved_0_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.onDefinitionSaved($event);\n    })(\"definitionErrorLoading\", function DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_definitionErrorLoading_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.onDefinitionErrorLoading();\n    })(\"closeDesigner\", function DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_closeDesigner_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.onCloseDesigner();\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"configuration\", ctx_r0.configuration);\n  }\n}\nclass DocumentDesignerService {\n  getDefinitionFromDefinitionModel(model, bundleId) {\n    return {\n      lastUpdateTime: model.lastUpdateTime,\n      lastChangedBy: model.lastChangedBy,\n      owner: model.owner,\n      name: `${bundleId}:${model.name}`,\n      description: model.description,\n      overlayGroupId: model.overlayGroupId,\n      scope: model.customizationOptions.scope,\n      guid: model.guid,\n      allowOverlay: model.customizationOptions.allowOverlay,\n      overlayDescriptor: model.overlayDescriptor,\n      documentSchema: model.documentSchema\n    };\n  }\n}\nDocumentDesignerService.ɵfac = function DocumentDesignerService_Factory(t) {\n  return new (t || DocumentDesignerService)();\n};\nDocumentDesignerService.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DocumentDesignerService,\n  factory: DocumentDesignerService.ɵfac,\n  providedIn: 'root'\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nconst init = createAction('[Document Designer] Init', props());\nconst loadDefinition = createAction('[Document Designer] Load Definition');\nconst loadDefinitionSuccess = createAction('[Document Designer] Load Definition Success', props());\nconst initDefinitionData = createAction('[Document Designer] Init Definition Model', props());\nconst markDesignerPristine = createAction('[Document Designer] Mark Designer Pristine');\nconst markDesignerDirty = createAction('[Document Designer] Mark Designer Dirty');\nconst updateDefinitionModelFromDesigner = createAction('[Document Designer] Update Definition Model From Designer', props());\nconst toggleDesignMode = createAction('[Document Designer] Toggle Design Mode');\nconst revertCustomization = createAction('[Document Designer] Revert Customization');\nconst saveDefinition = createAction('[Document Designer] Save Definition');\nconst saveDefinitionSuccess = createAction('[Document Designer] Save Definition Success', props());\nconst saveDefinitionError = createAction('[Document Designer] Save Definition Error');\nconst destroy = createAction('[Document Designer] Destroy');\nconst RX_DOCUMENT_DESIGNER = {\n  featureSelector: 'documentDesigner'\n};\nconst documentDesignerStateSelector = createFeatureSelector(RX_DOCUMENT_DESIGNER.featureSelector);\nconst documentDesignerModelSelector = createSelector(documentDesignerStateSelector, documentDesignerState => documentDesignerState.model);\nconst bundleIdSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.bundleId);\nconst definitionNameSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.definitionName);\nconst isDesignModeSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.isDesignMode);\nconst definitionModelFromDefinitionSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.definitionModelFromDefinition);\nconst definitionModelSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.definitionModel);\nconst isDirtySelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.isDirty);\nconst savedDefinitionNameSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.savedDefinitionName);\nconst originalDefinitionSelector = createSelector(documentDesignerModelSelector, documentDesignerModel => documentDesignerModel.originalDefinition);\nclass DocumentDesignerComponent {\n  constructor(store$, renderer, rxGlobalCacheService, rxJsonParserService, rxNotificationService, rxOverlayService, translateService, documentDesignerService) {\n    this.store$ = store$;\n    this.renderer = renderer;\n    this.rxGlobalCacheService = rxGlobalCacheService;\n    this.rxJsonParserService = rxJsonParserService;\n    this.rxNotificationService = rxNotificationService;\n    this.rxOverlayService = rxOverlayService;\n    this.translateService = translateService;\n    this.documentDesignerService = documentDesignerService;\n    this.definitionSaved = new EventEmitter();\n    this.definitionErrorLoading = new EventEmitter();\n    this.closeDesigner = new EventEmitter();\n    this.schemaFormControl = new FormControl('', {\n      updateOn: 'blur'\n    });\n    this.isDirty$ = this.store$.select(isDirtySelector);\n    this.definitionModel$ = this.store$.select(definitionModelSelector);\n    this.isDesignMode$ = this.store$.select(isDesignModeSelector);\n    this.bundleId$ = this.store$.select(bundleIdSelector);\n    this.destroyed$ = new ReplaySubject(1);\n    this.originalDefinition$ = this.store$.select(originalDefinitionSelector);\n    this.inspectorFocusEditorSubject = new Subject();\n    this.inspectorFocusEditor$ = this.inspectorFocusEditorSubject.asObservable();\n    this.bundleFriendlyName$ = this.bundleId$.pipe(switchMap(bundleId => this.rxGlobalCacheService.getBundleFriendlyName(bundleId)));\n    this.validationIssues$ = this.definitionModel$.pipe(map(definitionModel => this.validate(definitionModel)), shareReplay(1));\n    this.hasValidationErrors$ = this.validationIssues$.pipe(map(issueSections => some(issueSections, {\n      issues: [{\n        type: ValidationIssueType.Error\n      }]\n    })));\n    this.definitionFromDefinitionModel$ = this.definitionModel$.pipe(withLatestFrom(this.bundleId$), map(([definitionModel, bundleId]) => this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId)));\n    this.areNewDefinitionsAllowed$ = this.store$.select(bundleIdSelector).pipe(switchMap(bundleId => this.rxOverlayService.areNewDefinitionsAllowed(bundleId)));\n    this.isReadOnly$ = this.definitionFromDefinitionModel$.pipe(filter(definition => !!definition.lastUpdateTime), withLatestFrom(this.areNewDefinitionsAllowed$), map(([definition, areNewDefinitionsAllowed]) => !areNewDefinitionsAllowed || !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definition)), tap(isReadOnly => {\n      if (isReadOnly) {\n        this.rxNotificationService.addWarningMessage(this.translateService.instant('com.bmc.arsys.rx.client.designer.read-only-definition-warning.message'));\n      }\n    }), startWith(false), shareReplay(1));\n    this.isSaveButtonDisabled$ = combineLatest([this.hasValidationErrors$, this.isDirty$, this.isReadOnly$]).pipe(map(([hasValidationErrors, isDirty, isReadOnly]) => hasValidationErrors || !isDirty || isReadOnly), startWith(true));\n    this.definitionForJsonViewer$ = this.isDesignMode$.pipe(switchMap(isDesignMode => isDesignMode ? of(null) : combineLatest([this.definitionFromDefinitionModel$, this.originalDefinition$]).pipe(map(([definitionFromDefinitionModel, originalDefinition]) => Object.assign(Object.assign({}, originalDefinition), definitionFromDefinitionModel)))));\n    this.breadcrumbItems$ = this.definitionModel$.pipe(map(definitionModel => [{\n      label: definitionModel.name || `<${this.translateService.instant('com.bmc.arsys.rx.client.document-designer.new-document.label')}>`,\n      data: {}\n    }]));\n    this.definitionInspectorConfig$ = this.definitionModel$.pipe(map(definitionModel => {\n      const isCustomizationAllowed = Boolean(definitionModel.lastUpdateTime) ? this.rxOverlayService.isCustomizationEnabled('allowOverlay', definitionModel) : true;\n      return this.getFormBuilderConfig(definitionModel, isCustomizationAllowed);\n    }));\n    this.vm$ = combineLatest([this.breadcrumbItems$, this.bundleFriendlyName$, this.definitionModel$, this.hasValidationErrors$, this.isReadOnly$, this.definitionForJsonViewer$, this.isSaveButtonDisabled$, this.definitionInspectorConfig$, this.validationIssues$]).pipe(map(([breadcrumbItems, bundleFriendlyName, definitionModel, hasValidationErrors, isReadOnly, definitionForJsonViewer, isSaveButtonDisabled, definitionInspectorConfig, validationIssues]) => ({\n      breadcrumbItems,\n      bundleFriendlyName,\n      definitionModel,\n      hasValidationErrors,\n      isReadOnly,\n      definitionForJsonViewer,\n      isSaveButtonDisabled,\n      definitionInspectorConfig,\n      validationIssues\n    })));\n  }\n  ngOnInit() {\n    this.schemaFormControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe(documentSchema => {\n      this.store$.dispatch(updateDefinitionModelFromDesigner({\n        definitionModelFromDesigner: {\n          documentSchema\n        }\n      }));\n    });\n    this.store$.select(definitionModelFromDefinitionSelector).pipe(takeUntil(this.destroyed$)).subscribe(definitionModel => {\n      this.schemaFormControl.patchValue(definitionModel.documentSchema, {\n        emitEvent: false\n      });\n    });\n    this.store$.select(savedDefinitionNameSelector).pipe(skip(1), takeUntil(this.destroyed$), filter(Boolean)).subscribe(savedDefinitionName => {\n      this.definitionSaved.emit(savedDefinitionName);\n    });\n  }\n  ngOnChanges(changes) {\n    if (changes.configuration.currentValue) {\n      this.store$.dispatch(init({\n        payload: this.configuration\n      }));\n    }\n  }\n  onEditorEvent(event) {\n    if (event.type === RX_REVERT_CUSTOMIZATION.events.revertCustomization) {\n      this.store$.dispatch(revertCustomization());\n    }\n  }\n  canDeactivate() {\n    let canDeactivate = true;\n    this.isDirty$.pipe(take(1)).subscribe(isDirty => {\n      canDeactivate = !isDirty;\n    });\n    return canDeactivate;\n  }\n  onCorrectIssue(validationIssue) {\n    if (validationIssue.data.propertyName === 'documentSchema') {\n      this.renderer.selectRootElement('#document-schema').focus();\n    } else {\n      this.inspectorSidebar.openPanel(0);\n      // need to wait until inspector will be visible\n      // there are no way to focus to invisible elements\n      setTimeout(() => this.inspectorFocusEditorSubject.next({\n        editorName: validationIssue.data.propertyName,\n        data: validationIssue.data.data\n      }), 10);\n    }\n  }\n  onSave() {\n    this.store$.dispatch(saveDefinition());\n  }\n  onToggleDesignMode() {\n    this.store$.dispatch(toggleDesignMode());\n  }\n  onDefinitionModelChange(definitionModel) {\n    this.store$.dispatch(updateDefinitionModelFromDesigner({\n      definitionModelFromDesigner: definitionModel\n    }));\n  }\n  onDefinitionInspectorInitialized() {\n    setTimeout(() => this.inspectorFocusEditorSubject.next({\n      editorName: 'name',\n      data: {}\n    }), 10);\n  }\n  getFormBuilderConfig(definitionModel, isCustomizationAllowed) {\n    return [{\n      label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n      controls: [{\n        name: 'name',\n        component: TextFormControlComponent,\n        isDisabled: Boolean(definitionModel.lastUpdateTime),\n        options: {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n          required: true\n        }\n      }, {\n        name: 'description',\n        component: TextareaFormControlComponent,\n        options: {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n          rows: 3\n        }\n      }, {\n        component: RxRevertCustomizationComponent,\n        options: {\n          allowOverlay: definitionModel.customizationOptions.allowOverlay,\n          scope: definitionModel.customizationOptions.scope,\n          overlayGroupId: definitionModel.overlayGroupId,\n          overlayDescriptor: definitionModel.overlayDescriptor\n        }\n      }, {\n        name: 'customizationOptions',\n        component: CustomizationOptionsComponent,\n        isDisabled: !isCustomizationAllowed,\n        options: {\n          definitionTypeDisplayName: this.translateService.instant('com.bmc.arsys.rx.client.document-definition.label').toLowerCase(),\n          allowOverlay: definitionModel.customizationOptions.allowOverlay,\n          scope: definitionModel.customizationOptions.scope,\n          overlayGroupId: definitionModel.overlayGroupId,\n          overlayDescriptor: definitionModel.overlayDescriptor\n        }\n      }]\n    }];\n  }\n  validate(definitionModel) {\n    const validationIssues = [];\n    if (isEmpty(trim(definitionModel.name))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message', {\n          propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n        }),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    }\n    if (definitionModel.name && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(definitionModel.name)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message', {\n          propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n        }),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    }\n    if (isEmpty(trim(definitionModel.documentSchema))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message', {\n          propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-schema.label')\n        }),\n        data: {\n          propertyName: 'documentSchema'\n        }\n      });\n    } else if (isUndefined(this.rxJsonParserService.tryParseJson(definitionModel.documentSchema))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.validation.json-is-not-valid.message'),\n        data: {\n          propertyName: 'documentSchema'\n        }\n      });\n    }\n    return validationIssues.length ? [{\n      title: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title'),\n      issues: validationIssues\n    }] : [];\n  }\n  ngOnDestroy() {\n    this.inspectorFocusEditorSubject.complete();\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.store$.dispatch(destroy());\n  }\n}\nDocumentDesignerComponent.ɵfac = function DocumentDesignerComponent_Factory(t) {\n  return new (t || DocumentDesignerComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i2.RxGlobalCacheService), i0.ɵɵdirectiveInject(i3.RxJsonParserService), i0.ɵɵdirectiveInject(i2.RxNotificationService), i0.ɵɵdirectiveInject(i2.RxOverlayService), i0.ɵɵdirectiveInject(i4.TranslateService), i0.ɵɵdirectiveInject(DocumentDesignerService));\n};\nDocumentDesignerComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: DocumentDesignerComponent,\n  selectors: [[\"rx-document-designer\"]],\n  viewQuery: function DocumentDesignerComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(AdaptSidebarComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inspectorSidebar = _t.first);\n    }\n  },\n  inputs: {\n    configuration: \"configuration\"\n  },\n  outputs: {\n    definitionSaved: \"definitionSaved\",\n    definitionErrorLoading: \"definitionErrorLoading\",\n    closeDesigner: \"closeDesigner\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [3, \"bundleName\", \"breadcrumbItems\", \"isDesignMode\", \"isSaveButtonDisabled\", \"toggleDesignMode\", \"save\", \"closeDesigner\"], [1, \"rx-designer-component\", 3, \"hidden\"], [\"position\", \"right\", \"panelWidth\", \"280px\", 3, \"openedId\"], [\"iconClass\", \"d-icon-pencil\", 3, \"headerTitle\", \"tooltipText\"], [3, \"config\", \"focusEditor$\", \"isReadOnly\", \"model\", \"editorEvent\", \"formInitialized\", \"modelChange\"], [3, \"headerTitle\", \"tooltipText\", \"iconClass\"], [3, \"definitionTypeDisplayName\", \"issueSections\", \"correctIssue\"], [1, \"main\", \"rx-designer-container\", \"h-100\"], [3, \"label\", \"showRequiredLabel\"], [\"name\", \"documentSchema\", \"required\", \"\", \"id\", \"document-schema\", \"rx-id\", \"document-schema\", 1, \"form-control\", \"h-100\", 3, \"formControl\", \"readonly\"], [\"class\", \"full-size\", 3, \"code\", \"lang\", \"hasToolbar\", \"theme\", 4, \"ngIf\"], [1, \"full-size\", 3, \"code\", \"lang\", \"hasToolbar\", \"theme\"]],\n  template: function DocumentDesignerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, DocumentDesignerComponent_ng_container_0_Template, 18, 34, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.vm$));\n    }\n  },\n  directives: [i9.NgIf, i6.RxDesignerHeaderComponent, i7.AdaptSidebarComponent, i7.AdaptSidebarItemComponent, i6.FormBuilderComponent, i3$1.RxValidationIssuesComponent, i7.AdaptRxControlLabelComponent, i10.DefaultValueAccessor, i10.RequiredValidator, i10.NgControlStatus, i10.FormControlDirective, i7.AdaptCodeViewerComponent],\n  pipes: [i9.AsyncPipe, i4.TranslatePipe, i9.JsonPipe],\n  styles: [\"[_ngcontent-%COMP%]:root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: \\\"Open Sans\\\", -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.rx-designer-component[_ngcontent-%COMP%]{height:calc(100% - 50px)}.rx-designer-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;padding:1rem}textarea[_ngcontent-%COMP%]{resize:none}[_nghost-%COMP%]     .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}[_nghost-%COMP%]     adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}[_nghost-%COMP%]     .adapt-sidebar-main{overflow:auto}\"]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'rx-document-designer',\n      templateUrl: './document-designer.component.html',\n      styleUrls: ['./document-designer.component.scss']\n    }]\n  }], function () {\n    return [{\n      type: i1.Store\n    }, {\n      type: i0.Renderer2\n    }, {\n      type: i2.RxGlobalCacheService\n    }, {\n      type: i3.RxJsonParserService\n    }, {\n      type: i2.RxNotificationService\n    }, {\n      type: i2.RxOverlayService\n    }, {\n      type: i4.TranslateService\n    }, {\n      type: DocumentDesignerService\n    }];\n  }, {\n    configuration: [{\n      type: Input\n    }],\n    definitionSaved: [{\n      type: Output\n    }],\n    definitionErrorLoading: [{\n      type: Output\n    }],\n    closeDesigner: [{\n      type: Output\n    }],\n    inspectorSidebar: [{\n      type: ViewChild,\n      args: [AdaptSidebarComponent, {\n        static: false\n      }]\n    }]\n  });\n})();\nclass DocumentDesignerPageComponent {\n  constructor(activatedRoute, router, rxBundleCacheService, rxComponentCanDeactivateGuard, rxDefinitionNameService, rxPageTitleService, rxUtilityModalsService, translateService) {\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.rxBundleCacheService = rxBundleCacheService;\n    this.rxComponentCanDeactivateGuard = rxComponentCanDeactivateGuard;\n    this.rxDefinitionNameService = rxDefinitionNameService;\n    this.rxPageTitleService = rxPageTitleService;\n    this.rxUtilityModalsService = rxUtilityModalsService;\n    this.translateService = translateService;\n    this.isInitialized = false;\n    this.definitionsRoute = 'document-definitions';\n    this.pageTitle = this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title');\n  }\n  ngOnInit() {\n    this.rxComponentCanDeactivateGuard.setPageComponent(this);\n    this.subscription = this.activatedRoute.params.subscribe(({\n      definitionName,\n      bundleId\n    }) => {\n      this.rxBundleCacheService.bundleId = bundleId || this.rxDefinitionNameService.getBundleId(definitionName);\n      this.isInitialized = true;\n      this.isNewDefinition = !definitionName;\n      this.configuration = Object.assign(Object.assign({}, this.configuration), {\n        bundleId: this.rxBundleCacheService.bundleId,\n        definitionName\n      });\n      this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(definitionName), this.pageTitle]);\n    });\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    this.rxComponentCanDeactivateGuard.setPageComponent(null);\n  }\n  canDeactivate() {\n    var _a, _b;\n    return (_b = (_a = this.designerComponent) === null || _a === void 0 ? void 0 : _a.canDeactivate()) !== null && _b !== void 0 ? _b : true;\n  }\n  confirmDeactivation() {\n    return this.rxUtilityModalsService.confirmUnsavedChanges();\n  }\n  onCloseDesigner() {\n    this.router.navigate([RX_APPLICATION.innovationStudioBundleId, this.rxBundleCacheService.bundleId, this.definitionsRoute]);\n  }\n  onDefinitionSaved(definitionName) {\n    if (this.isNewDefinition) {\n      this.router.navigate(['edit2', definitionName], {\n        relativeTo: this.activatedRoute.parent\n      });\n    }\n  }\n  onDefinitionErrorLoading() {\n    this.router.navigate(['new2', this.rxBundleCacheService.bundleId], {\n      relativeTo: this.activatedRoute.parent\n    });\n  }\n}\nDocumentDesignerPageComponent.ɵfac = function DocumentDesignerPageComponent_Factory(t) {\n  return new (t || DocumentDesignerPageComponent)(i0.ɵɵdirectiveInject(i1$1.ActivatedRoute), i0.ɵɵdirectiveInject(i1$1.Router), i0.ɵɵdirectiveInject(i2.RxBundleCacheService), i0.ɵɵdirectiveInject(i2.RxComponentCanDeactivateGuard), i0.ɵɵdirectiveInject(i2.RxDefinitionNameService), i0.ɵɵdirectiveInject(i2.RxPageTitleService), i0.ɵɵdirectiveInject(i3$1.RxUtilityModalsService), i0.ɵɵdirectiveInject(i4.TranslateService));\n};\nDocumentDesignerPageComponent.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n  type: DocumentDesignerPageComponent,\n  selectors: [[\"rx-document-designer-page\"]],\n  viewQuery: function DocumentDesignerPageComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(DocumentDesignerComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.designerComponent = _t.first);\n    }\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[3, \"configuration\", \"definitionSaved\", \"definitionErrorLoading\", \"closeDesigner\", 4, \"ngIf\"], [3, \"configuration\", \"definitionSaved\", \"definitionErrorLoading\", \"closeDesigner\"]],\n  template: function DocumentDesignerPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, DocumentDesignerPageComponent_rx_document_designer_0_Template, 1, 1, \"rx-document-designer\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isInitialized);\n    }\n  },\n  directives: [i9.NgIf, DocumentDesignerComponent],\n  encapsulation: 2\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerPageComponent, [{\n    type: Component,\n    args: [{\n      selector: 'rx-document-designer-page',\n      templateUrl: './document-designer-page.component.html'\n    }]\n  }], function () {\n    return [{\n      type: i1$1.ActivatedRoute\n    }, {\n      type: i1$1.Router\n    }, {\n      type: i2.RxBundleCacheService\n    }, {\n      type: i2.RxComponentCanDeactivateGuard\n    }, {\n      type: i2.RxDefinitionNameService\n    }, {\n      type: i2.RxPageTitleService\n    }, {\n      type: i3$1.RxUtilityModalsService\n    }, {\n      type: i4.TranslateService\n    }];\n  }, {\n    designerComponent: [{\n      type: ViewChild,\n      args: [DocumentDesignerComponent]\n    }]\n  });\n})();\nconst initialModel = {\n  name: null,\n  documentSchema: null,\n  customizationOptions: {\n    allowOverlay: null,\n    scope: null\n  }\n};\nconst initialState = {\n  bundleId: null,\n  definitionName: null,\n  isDesignMode: true,\n  definitionModel: initialModel,\n  definitionModelFromDefinition: initialModel,\n  isDirty: false,\n  savedDefinitionName: null,\n  originalDefinition: null\n};\nconst reducer = createReducer(initialState, on(init, (state, {\n  payload\n}) => Object.assign(Object.assign({}, initialState), {\n  bundleId: payload.bundleId,\n  definitionName: payload.definitionName\n})), on(initDefinitionData, (state, {\n  definition,\n  definitionModel\n}) => Object.assign(Object.assign({}, state), {\n  definitionModel,\n  definitionModelFromDefinition: definitionModel,\n  originalDefinition: definition\n})), on(markDesignerPristine, state => Object.assign(Object.assign({}, state), {\n  isDirty: false\n})), on(markDesignerDirty, state => Object.assign(Object.assign({}, state), {\n  isDirty: true\n})), on(toggleDesignMode, state => Object.assign(Object.assign({}, state), {\n  isDesignMode: !state.isDesignMode\n})), on(updateDefinitionModelFromDesigner, (state, {\n  definitionModelFromDesigner\n}) => Object.assign(Object.assign({}, state), {\n  definitionModel: Object.assign(Object.assign({}, state.definitionModel), definitionModelFromDesigner)\n})), on(saveDefinitionSuccess, (state, {\n  savedDefinitionName\n}) => Object.assign(Object.assign({}, state), {\n  savedDefinitionName\n})), on(destroy, state => Object.assign({}, initialState)));\nfunction documentDesignerModelReducer(state, action) {\n  return reducer(state, action);\n}\nclass DocumentDesignerEffects {\n  constructor(store$, actions$, errorHandler, rxDefinitionUpdateService, documentDesignerService, rxNotificationService, translateService, rxDocumentDefinitionService, rxDefinitionNameService) {\n    this.store$ = store$;\n    this.actions$ = actions$;\n    this.errorHandler = errorHandler;\n    this.rxDefinitionUpdateService = rxDefinitionUpdateService;\n    this.documentDesignerService = documentDesignerService;\n    this.rxNotificationService = rxNotificationService;\n    this.translateService = translateService;\n    this.rxDocumentDefinitionService = rxDocumentDefinitionService;\n    this.rxDefinitionNameService = rxDefinitionNameService;\n    this.initDocumentDesigner$ = createEffect(() => this.actions$.pipe(ofType(init), map(action => loadDefinition())));\n    this.loadDefinition$ = createEffect(() => this.actions$.pipe(ofType(loadDefinition), withLatestFrom(this.store$.select(definitionNameSelector)), switchMap(([action, definitionName]) => definitionName ? this.rxDocumentDefinitionService.get(definitionName) : this.rxDocumentDefinitionService.getNew()), map(definition => loadDefinitionSuccess({\n      definition\n    }))));\n    this.loadDefinitionSuccess$ = createEffect(() => this.actions$.pipe(ofType(loadDefinitionSuccess), map(action => {\n      let definitionModelFromDefinition = {\n        customizationOptions: {\n          scope: action.definition.scope,\n          allowOverlay: action.definition.allowOverlay\n        },\n        description: action.definition.description,\n        documentSchema: action.definition.documentSchema,\n        guid: action.definition.guid,\n        lastChangedBy: action.definition.lastChangedBy,\n        lastUpdateTime: action.definition.lastUpdateTime,\n        name: this.rxDefinitionNameService.getDisplayName(action.definition.name),\n        overlayDescriptor: action.definition.overlayDescriptor,\n        overlayGroupId: action.definition.overlayGroupId,\n        owner: action.definition.owner\n      };\n      return initDefinitionData({\n        definition: action.definition,\n        definitionModel: definitionModelFromDefinition\n      });\n    })));\n    this.revertCustomization$ = createEffect(() => this.actions$.pipe(ofType(revertCustomization), withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(bundleIdSelector)), switchMap(([_, definitionModel, bundleId]) => this.rxDocumentDefinitionService.revertCustomization(`${bundleId}:${definitionModel.name}`)), map(() => loadDefinition())));\n    this.markPristine$ = createEffect(() => this.actions$.pipe(ofType(initDefinitionData, saveDefinition), map(() => markDesignerPristine())));\n    this.markDirty$ = createEffect(() => this.actions$.pipe(ofType(updateDefinitionModelFromDesigner, saveDefinitionError), map(() => markDesignerDirty())));\n    this.saveDefinition$ = createEffect(() => this.actions$.pipe(ofType(saveDefinition), withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(originalDefinitionSelector), this.store$.select(bundleIdSelector)), switchMap(([_, definitionModel, originalDefinition, bundleId]) => {\n      const definition = this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId);\n      return (definition.lastUpdateTime ? this.rxDefinitionUpdateService.execute(this.rxDocumentDefinitionService.update.bind(this.rxDocumentDefinitionService, Object.assign(Object.assign({}, originalDefinition), definition))) : this.rxDocumentDefinitionService.create(definition)).pipe(map(response => {\n        const definitionName = decodeURIComponent(last(response === null || response === void 0 ? void 0 : response.headers.get('location').split('/')) || '') || this.rxDefinitionNameService.getDefinitionName(bundleId, definitionModel.name);\n        return saveDefinitionSuccess({\n          savedDefinitionName: definitionName\n        });\n      }), catchError(error => {\n        this.errorHandler.handleError(error);\n        return of(saveDefinitionError());\n      }));\n    })));\n    this.saveDefinitionSuccess$ = createEffect(() => this.actions$.pipe(ofType(saveDefinitionSuccess), withLatestFrom(this.store$.select(definitionNameSelector)), tap(() => {\n      this.rxNotificationService.addSuccessMessage(this.translateService.instant('com.bmc.arsys.rx.client.designer.definition-saved-successfully.message', {\n        definitionTypeDisplayName: this.translateService.instant('com.bmc.arsys.rx.client.document-definition.label')\n      }));\n    }), filter(([action, definitionName]) => !!definitionName), map(() => loadDefinition())));\n  }\n}\nDocumentDesignerEffects.ɵfac = function DocumentDesignerEffects_Factory(t) {\n  return new (t || DocumentDesignerEffects)(i0.ɵɵinject(i1.Store), i0.ɵɵinject(i2$1.Actions), i0.ɵɵinject(i0.ErrorHandler), i0.ɵɵinject(i2.RxDefinitionUpdateService), i0.ɵɵinject(DocumentDesignerService), i0.ɵɵinject(i2.RxNotificationService), i0.ɵɵinject(i4.TranslateService), i0.ɵɵinject(i6$1.RxDocumentDefinitionService), i0.ɵɵinject(i2.RxDefinitionNameService));\n};\nDocumentDesignerEffects.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: DocumentDesignerEffects,\n  factory: DocumentDesignerEffects.ɵfac\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerEffects, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: i1.Store\n    }, {\n      type: i2$1.Actions\n    }, {\n      type: i0.ErrorHandler\n    }, {\n      type: i2.RxDefinitionUpdateService\n    }, {\n      type: DocumentDesignerService\n    }, {\n      type: i2.RxNotificationService\n    }, {\n      type: i4.TranslateService\n    }, {\n      type: i6$1.RxDocumentDefinitionService\n    }, {\n      type: i2.RxDefinitionNameService\n    }];\n  }, null);\n})();\nclass DocumentDesignerModule {}\nDocumentDesignerModule.ɵfac = function DocumentDesignerModule_Factory(t) {\n  return new (t || DocumentDesignerModule)();\n};\nDocumentDesignerModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: DocumentDesignerModule,\n  declarations: [DocumentDesignerComponent],\n  imports: [AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule, CommonModule, FormsModule, TranslateModule, RxDesignerHeaderModule, RxFormBuilderModule, RxJsonViewerModule, RxValidationIssuesModule, ReactiveFormsModule, i1.StoreFeatureModule, i2$1.EffectsFeatureModule],\n  exports: [DocumentDesignerComponent]\n});\nDocumentDesignerModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule, CommonModule, FormsModule, TranslateModule, RxDesignerHeaderModule, RxFormBuilderModule, RxJsonViewerModule, RxValidationIssuesModule, ReactiveFormsModule, StoreModule.forFeature(RX_DOCUMENT_DESIGNER.featureSelector, {\n    model: documentDesignerModelReducer\n  }), EffectsModule.forFeature([DocumentDesignerEffects])]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [DocumentDesignerComponent],\n      exports: [DocumentDesignerComponent],\n      imports: [AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule, CommonModule, FormsModule, TranslateModule, RxDesignerHeaderModule, RxFormBuilderModule, RxJsonViewerModule, RxValidationIssuesModule, ReactiveFormsModule, StoreModule.forFeature(RX_DOCUMENT_DESIGNER.featureSelector, {\n        model: documentDesignerModelReducer\n      }), EffectsModule.forFeature([DocumentDesignerEffects])]\n    }]\n  }], null, null);\n})();\nclass DocumentDesignerPageModule {}\nDocumentDesignerPageModule.ɵfac = function DocumentDesignerPageModule_Factory(t) {\n  return new (t || DocumentDesignerPageModule)();\n};\nDocumentDesignerPageModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: DocumentDesignerPageModule,\n  declarations: [DocumentDesignerPageComponent],\n  imports: [CommonModule, DocumentDesignerModule, TranslateModule],\n  exports: [DocumentDesignerPageComponent]\n});\nDocumentDesignerPageModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n  imports: [[CommonModule, DocumentDesignerModule, TranslateModule]]\n});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DocumentDesignerPageModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [DocumentDesignerPageComponent],\n      exports: [DocumentDesignerPageComponent],\n      imports: [CommonModule, DocumentDesignerModule, TranslateModule]\n    }]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DocumentDesignerPageComponent, DocumentDesignerPageModule };\n//# sourceMappingURL=helix-platform-document-designer.js.map","map":{"version":3,"names":["i0","Injectable","EventEmitter","Component","Input","Output","ViewChild","NgModule","i1$1","i2","RX_APPLICATION","i3$1","ValidationIssueType","RxJsonViewerModule","RxValidationIssuesModule","i4","TranslateModule","i10","FormControl","FormsModule","ReactiveFormsModule","i7","AdaptSidebarComponent","AdaptCodeViewerModule","AdaptRxLabelModule","AdaptSidebarModule","AdaptTabsModule","RX_RECORD_DEFINITION","i6","RX_REVERT_CUSTOMIZATION","TextFormControlComponent","TextareaFormControlComponent","RxRevertCustomizationComponent","CustomizationOptionsComponent","RxDesignerHeaderModule","RxFormBuilderModule","i3","i1","createAction","props","createFeatureSelector","createSelector","createReducer","on","StoreModule","some","isEmpty","trim","isUndefined","last","ReplaySubject","Subject","combineLatest","of","switchMap","map","shareReplay","withLatestFrom","filter","tap","startWith","takeUntil","skip","take","catchError","i9","CommonModule","i2$1","createEffect","ofType","EffectsModule","i6$1","DocumentDesignerComponent_ng_container_0_adapt_code_viewer_17_Template","rf","ctx","ɵɵelement","ɵɵpipe","vm_r1","ɵɵnextContext","ngIf","ɵɵproperty","ɵɵpipeBind1","definitionForJsonViewer","DocumentDesignerComponent_ng_container_0_Template","_r5","ɵɵgetCurrentView","ɵɵelementContainerStart","ɵɵelementStart","ɵɵlistener","DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_toggleDesignMode_1_listener","ɵɵrestoreView","ctx_r4","onToggleDesignMode","DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_save_1_listener","ctx_r6","onSave","DocumentDesignerComponent_ng_container_0_Template_rx_designer_header_closeDesigner_1_listener","ctx_r7","closeDesigner","emit","ɵɵelementEnd","DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_editorEvent_7_listener","$event","ctx_r8","onEditorEvent","DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_formInitialized_7_listener","ctx_r9","onDefinitionInspectorInitialized","DocumentDesignerComponent_ng_container_0_Template_rx_form_builder_modelChange_7_listener","ctx_r10","onDefinitionModelChange","DocumentDesignerComponent_ng_container_0_Template_rx_validation_issues_correctIssue_11_listener","ctx_r11","onCorrectIssue","ɵɵtemplate","ɵɵelementContainerEnd","ctx_r0","ɵɵadvance","bundleFriendlyName","breadcrumbItems","isSaveButtonDisabled","ɵɵpropertyInterpolate","definitionInspectorConfig","inspectorFocusEditor$","isReadOnly","definitionModel","hasValidationErrors","validationIssues","schemaFormControl","DocumentDesignerPageComponent_rx_document_designer_0_Template","_r2","DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_definitionSaved_0_listener","ctx_r1","onDefinitionSaved","DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_definitionErrorLoading_0_listener","ctx_r3","onDefinitionErrorLoading","DocumentDesignerPageComponent_rx_document_designer_0_Template_rx_document_designer_closeDesigner_0_listener","onCloseDesigner","configuration","DocumentDesignerService","getDefinitionFromDefinitionModel","model","bundleId","lastUpdateTime","lastChangedBy","owner","name","description","overlayGroupId","scope","customizationOptions","guid","allowOverlay","overlayDescriptor","documentSchema","ɵfac","DocumentDesignerService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","ngDevMode","ɵsetClassMetadata","type","args","init","loadDefinition","loadDefinitionSuccess","initDefinitionData","markDesignerPristine","markDesignerDirty","updateDefinitionModelFromDesigner","toggleDesignMode","revertCustomization","saveDefinition","saveDefinitionSuccess","saveDefinitionError","destroy","RX_DOCUMENT_DESIGNER","featureSelector","documentDesignerStateSelector","documentDesignerModelSelector","documentDesignerState","bundleIdSelector","documentDesignerModel","definitionNameSelector","definitionName","isDesignModeSelector","isDesignMode","definitionModelFromDefinitionSelector","definitionModelFromDefinition","definitionModelSelector","isDirtySelector","isDirty","savedDefinitionNameSelector","savedDefinitionName","originalDefinitionSelector","originalDefinition","DocumentDesignerComponent","constructor","store$","renderer","rxGlobalCacheService","rxJsonParserService","rxNotificationService","rxOverlayService","translateService","documentDesignerService","definitionSaved","definitionErrorLoading","updateOn","isDirty$","select","definitionModel$","isDesignMode$","bundleId$","destroyed$","originalDefinition$","inspectorFocusEditorSubject","asObservable","bundleFriendlyName$","pipe","getBundleFriendlyName","validationIssues$","validate","hasValidationErrors$","issueSections","issues","Error","definitionFromDefinitionModel$","areNewDefinitionsAllowed$","areNewDefinitionsAllowed","isReadOnly$","definition","isCustomizationEnabled","addWarningMessage","instant","isSaveButtonDisabled$","definitionForJsonViewer$","definitionFromDefinitionModel","Object","assign","breadcrumbItems$","label","data","definitionInspectorConfig$","isCustomizationAllowed","Boolean","getFormBuilderConfig","vm$","ngOnInit","valueChanges","subscribe","dispatch","definitionModelFromDesigner","patchValue","emitEvent","ngOnChanges","changes","currentValue","payload","event","events","canDeactivate","validationIssue","propertyName","selectRootElement","focus","inspectorSidebar","openPanel","setTimeout","next","editorName","controls","component","isDisabled","options","required","rows","definitionTypeDisplayName","toLowerCase","push","validDefinitionNameRegex","test","tryParseJson","length","title","ngOnDestroy","complete","DocumentDesignerComponent_Factory","ɵɵdirectiveInject","Store","Renderer2","RxGlobalCacheService","RxJsonParserService","RxNotificationService","RxOverlayService","TranslateService","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","DocumentDesignerComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","DocumentDesignerComponent_Template","directives","NgIf","RxDesignerHeaderComponent","AdaptSidebarItemComponent","FormBuilderComponent","RxValidationIssuesComponent","AdaptRxControlLabelComponent","DefaultValueAccessor","RequiredValidator","NgControlStatus","FormControlDirective","AdaptCodeViewerComponent","pipes","AsyncPipe","TranslatePipe","JsonPipe","styles","selector","templateUrl","styleUrls","static","DocumentDesignerPageComponent","activatedRoute","router","rxBundleCacheService","rxComponentCanDeactivateGuard","rxDefinitionNameService","rxPageTitleService","rxUtilityModalsService","isInitialized","definitionsRoute","pageTitle","setPageComponent","subscription","params","getBundleId","isNewDefinition","set","getDisplayName","unsubscribe","_a","_b","designerComponent","confirmDeactivation","confirmUnsavedChanges","navigate","innovationStudioBundleId","relativeTo","parent","DocumentDesignerPageComponent_Factory","ActivatedRoute","Router","RxBundleCacheService","RxComponentCanDeactivateGuard","RxDefinitionNameService","RxPageTitleService","RxUtilityModalsService","DocumentDesignerPageComponent_Query","DocumentDesignerPageComponent_Template","encapsulation","initialModel","initialState","reducer","state","documentDesignerModelReducer","action","DocumentDesignerEffects","actions$","errorHandler","rxDefinitionUpdateService","rxDocumentDefinitionService","initDocumentDesigner$","loadDefinition$","get","getNew","loadDefinitionSuccess$","revertCustomization$","_","markPristine$","markDirty$","saveDefinition$","execute","update","bind","create","response","decodeURIComponent","headers","split","getDefinitionName","error","handleError","saveDefinitionSuccess$","addSuccessMessage","DocumentDesignerEffects_Factory","ɵɵinject","Actions","ErrorHandler","RxDefinitionUpdateService","RxDocumentDefinitionService","DocumentDesignerModule","DocumentDesignerModule_Factory","ɵmod","ɵɵdefineNgModule","declarations","imports","StoreFeatureModule","EffectsFeatureModule","exports","ɵinj","ɵɵdefineInjector","forFeature","DocumentDesignerPageModule","DocumentDesignerPageModule_Factory"],"sources":["C:/projects/BMC-Helix-Angular-prod/bundle/src/main/webapp/node_modules/@helix/platform/fesm2015/helix-platform-document-designer.js"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Injectable, EventEmitter, Component, Input, Output, ViewChild, NgModule } from '@angular/core';\nimport * as i1$1 from '@angular/router';\nimport * as i2 from '@helix/platform/shared/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport * as i3$1 from '@helix/platform/ui-kit';\nimport { ValidationIssueType, RxJsonViewerModule, RxValidationIssuesModule } from '@helix/platform/ui-kit';\nimport * as i4 from '@ngx-translate/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport * as i10 from '@angular/forms';\nimport { FormControl, FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport * as i7 from '@bmc-ux/adapt-angular';\nimport { AdaptSidebarComponent, AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport * as i6 from '@helix/platform/shared/components';\nimport { RX_REVERT_CUSTOMIZATION, TextFormControlComponent, TextareaFormControlComponent, RxRevertCustomizationComponent, CustomizationOptionsComponent, RxDesignerHeaderModule, RxFormBuilderModule } from '@helix/platform/shared/components';\nimport * as i3 from '@helix/platform/utils';\nimport * as i1 from '@ngrx/store';\nimport { createAction, props, createFeatureSelector, createSelector, createReducer, on, StoreModule } from '@ngrx/store';\nimport { some, isEmpty, trim, isUndefined, last } from 'lodash';\nimport { ReplaySubject, Subject, combineLatest, of } from 'rxjs';\nimport { switchMap, map, shareReplay, withLatestFrom, filter, tap, startWith, takeUntil, skip, take, catchError } from 'rxjs/operators';\nimport * as i9 from '@angular/common';\nimport { CommonModule } from '@angular/common';\nimport * as i2$1 from '@ngrx/effects';\nimport { createEffect, ofType, EffectsModule } from '@ngrx/effects';\nimport * as i6$1 from '@helix/platform/document/api';\n\nclass DocumentDesignerService {\n    getDefinitionFromDefinitionModel(model, bundleId) {\n        return {\n            lastUpdateTime: model.lastUpdateTime,\n            lastChangedBy: model.lastChangedBy,\n            owner: model.owner,\n            name: `${bundleId}:${model.name}`,\n            description: model.description,\n            overlayGroupId: model.overlayGroupId,\n            scope: model.customizationOptions.scope,\n            guid: model.guid,\n            allowOverlay: model.customizationOptions.allowOverlay,\n            overlayDescriptor: model.overlayDescriptor,\n            documentSchema: model.documentSchema\n        };\n    }\n}\nDocumentDesignerService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\nDocumentDesignerService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }] });\n\nconst init = createAction('[Document Designer] Init', props());\nconst loadDefinition = createAction('[Document Designer] Load Definition');\nconst loadDefinitionSuccess = createAction('[Document Designer] Load Definition Success', props());\nconst initDefinitionData = createAction('[Document Designer] Init Definition Model', props());\nconst markDesignerPristine = createAction('[Document Designer] Mark Designer Pristine');\nconst markDesignerDirty = createAction('[Document Designer] Mark Designer Dirty');\nconst updateDefinitionModelFromDesigner = createAction('[Document Designer] Update Definition Model From Designer', props());\nconst toggleDesignMode = createAction('[Document Designer] Toggle Design Mode');\nconst revertCustomization = createAction('[Document Designer] Revert Customization');\nconst saveDefinition = createAction('[Document Designer] Save Definition');\nconst saveDefinitionSuccess = createAction('[Document Designer] Save Definition Success', props());\nconst saveDefinitionError = createAction('[Document Designer] Save Definition Error');\nconst destroy = createAction('[Document Designer] Destroy');\n\nconst RX_DOCUMENT_DESIGNER = {\n    featureSelector: 'documentDesigner'\n};\n\nconst documentDesignerStateSelector = createFeatureSelector(RX_DOCUMENT_DESIGNER.featureSelector);\nconst documentDesignerModelSelector = createSelector(documentDesignerStateSelector, (documentDesignerState) => documentDesignerState.model);\nconst bundleIdSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.bundleId);\nconst definitionNameSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.definitionName);\nconst isDesignModeSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.isDesignMode);\nconst definitionModelFromDefinitionSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.definitionModelFromDefinition);\nconst definitionModelSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.definitionModel);\nconst isDirtySelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.isDirty);\nconst savedDefinitionNameSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.savedDefinitionName);\nconst originalDefinitionSelector = createSelector(documentDesignerModelSelector, (documentDesignerModel) => documentDesignerModel.originalDefinition);\n\nclass DocumentDesignerComponent {\n    constructor(store$, renderer, rxGlobalCacheService, rxJsonParserService, rxNotificationService, rxOverlayService, translateService, documentDesignerService) {\n        this.store$ = store$;\n        this.renderer = renderer;\n        this.rxGlobalCacheService = rxGlobalCacheService;\n        this.rxJsonParserService = rxJsonParserService;\n        this.rxNotificationService = rxNotificationService;\n        this.rxOverlayService = rxOverlayService;\n        this.translateService = translateService;\n        this.documentDesignerService = documentDesignerService;\n        this.definitionSaved = new EventEmitter();\n        this.definitionErrorLoading = new EventEmitter();\n        this.closeDesigner = new EventEmitter();\n        this.schemaFormControl = new FormControl('', { updateOn: 'blur' });\n        this.isDirty$ = this.store$.select(isDirtySelector);\n        this.definitionModel$ = this.store$.select(definitionModelSelector);\n        this.isDesignMode$ = this.store$.select(isDesignModeSelector);\n        this.bundleId$ = this.store$.select(bundleIdSelector);\n        this.destroyed$ = new ReplaySubject(1);\n        this.originalDefinition$ = this.store$.select(originalDefinitionSelector);\n        this.inspectorFocusEditorSubject = new Subject();\n        this.inspectorFocusEditor$ = this.inspectorFocusEditorSubject.asObservable();\n        this.bundleFriendlyName$ = this.bundleId$.pipe(switchMap((bundleId) => this.rxGlobalCacheService.getBundleFriendlyName(bundleId)));\n        this.validationIssues$ = this.definitionModel$.pipe(map((definitionModel) => this.validate(definitionModel)), shareReplay(1));\n        this.hasValidationErrors$ = this.validationIssues$.pipe(map((issueSections) => some(issueSections, {\n            issues: [{ type: ValidationIssueType.Error }]\n        })));\n        this.definitionFromDefinitionModel$ = this.definitionModel$.pipe(withLatestFrom(this.bundleId$), map(([definitionModel, bundleId]) => this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId)));\n        this.areNewDefinitionsAllowed$ = this.store$\n            .select(bundleIdSelector)\n            .pipe(switchMap((bundleId) => this.rxOverlayService.areNewDefinitionsAllowed(bundleId)));\n        this.isReadOnly$ = this.definitionFromDefinitionModel$.pipe(filter((definition) => !!definition.lastUpdateTime), withLatestFrom(this.areNewDefinitionsAllowed$), map(([definition, areNewDefinitionsAllowed]) => !areNewDefinitionsAllowed || !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definition)), tap((isReadOnly) => {\n            if (isReadOnly) {\n                this.rxNotificationService.addWarningMessage(this.translateService.instant('com.bmc.arsys.rx.client.designer.read-only-definition-warning.message'));\n            }\n        }), startWith(false), shareReplay(1));\n        this.isSaveButtonDisabled$ = combineLatest([\n            this.hasValidationErrors$,\n            this.isDirty$,\n            this.isReadOnly$\n        ]).pipe(map(([hasValidationErrors, isDirty, isReadOnly]) => hasValidationErrors || !isDirty || isReadOnly), startWith(true));\n        this.definitionForJsonViewer$ = this.isDesignMode$.pipe(switchMap((isDesignMode) => isDesignMode\n            ? of(null)\n            : combineLatest([this.definitionFromDefinitionModel$, this.originalDefinition$]).pipe(map(([definitionFromDefinitionModel, originalDefinition]) => (Object.assign(Object.assign({}, originalDefinition), definitionFromDefinitionModel))))));\n        this.breadcrumbItems$ = this.definitionModel$.pipe(map((definitionModel) => [\n            {\n                label: definitionModel.name ||\n                    `<${this.translateService.instant('com.bmc.arsys.rx.client.document-designer.new-document.label')}>`,\n                data: {}\n            }\n        ]));\n        this.definitionInspectorConfig$ = this.definitionModel$.pipe(map((definitionModel) => {\n            const isCustomizationAllowed = Boolean(definitionModel.lastUpdateTime)\n                ? this.rxOverlayService.isCustomizationEnabled('allowOverlay', definitionModel)\n                : true;\n            return this.getFormBuilderConfig(definitionModel, isCustomizationAllowed);\n        }));\n        this.vm$ = combineLatest([\n            this.breadcrumbItems$,\n            this.bundleFriendlyName$,\n            this.definitionModel$,\n            this.hasValidationErrors$,\n            this.isReadOnly$,\n            this.definitionForJsonViewer$,\n            this.isSaveButtonDisabled$,\n            this.definitionInspectorConfig$,\n            this.validationIssues$\n        ]).pipe(map(([breadcrumbItems, bundleFriendlyName, definitionModel, hasValidationErrors, isReadOnly, definitionForJsonViewer, isSaveButtonDisabled, definitionInspectorConfig, validationIssues]) => ({\n            breadcrumbItems,\n            bundleFriendlyName,\n            definitionModel,\n            hasValidationErrors,\n            isReadOnly,\n            definitionForJsonViewer,\n            isSaveButtonDisabled,\n            definitionInspectorConfig,\n            validationIssues\n        })));\n    }\n    ngOnInit() {\n        this.schemaFormControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((documentSchema) => {\n            this.store$.dispatch(updateDefinitionModelFromDesigner({\n                definitionModelFromDesigner: { documentSchema }\n            }));\n        });\n        this.store$\n            .select(definitionModelFromDefinitionSelector)\n            .pipe(takeUntil(this.destroyed$))\n            .subscribe((definitionModel) => {\n            this.schemaFormControl.patchValue(definitionModel.documentSchema, { emitEvent: false });\n        });\n        this.store$\n            .select(savedDefinitionNameSelector)\n            .pipe(skip(1), takeUntil(this.destroyed$), filter(Boolean))\n            .subscribe((savedDefinitionName) => {\n            this.definitionSaved.emit(savedDefinitionName);\n        });\n    }\n    ngOnChanges(changes) {\n        if (changes.configuration.currentValue) {\n            this.store$.dispatch(init({ payload: this.configuration }));\n        }\n    }\n    onEditorEvent(event) {\n        if (event.type === RX_REVERT_CUSTOMIZATION.events.revertCustomization) {\n            this.store$.dispatch(revertCustomization());\n        }\n    }\n    canDeactivate() {\n        let canDeactivate = true;\n        this.isDirty$.pipe(take(1)).subscribe((isDirty) => {\n            canDeactivate = !isDirty;\n        });\n        return canDeactivate;\n    }\n    onCorrectIssue(validationIssue) {\n        if (validationIssue.data.propertyName === 'documentSchema') {\n            this.renderer.selectRootElement('#document-schema').focus();\n        }\n        else {\n            this.inspectorSidebar.openPanel(0);\n            // need to wait until inspector will be visible\n            // there are no way to focus to invisible elements\n            setTimeout(() => this.inspectorFocusEditorSubject.next({\n                editorName: validationIssue.data.propertyName,\n                data: validationIssue.data.data\n            }), 10);\n        }\n    }\n    onSave() {\n        this.store$.dispatch(saveDefinition());\n    }\n    onToggleDesignMode() {\n        this.store$.dispatch(toggleDesignMode());\n    }\n    onDefinitionModelChange(definitionModel) {\n        this.store$.dispatch(updateDefinitionModelFromDesigner({ definitionModelFromDesigner: definitionModel }));\n    }\n    onDefinitionInspectorInitialized() {\n        setTimeout(() => this.inspectorFocusEditorSubject.next({\n            editorName: 'name',\n            data: {}\n        }), 10);\n    }\n    getFormBuilderConfig(definitionModel, isCustomizationAllowed) {\n        return [\n            {\n                label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n                controls: [\n                    {\n                        name: 'name',\n                        component: TextFormControlComponent,\n                        isDisabled: Boolean(definitionModel.lastUpdateTime),\n                        options: {\n                            label: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n                            required: true\n                        }\n                    },\n                    {\n                        name: 'description',\n                        component: TextareaFormControlComponent,\n                        options: {\n                            label: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n                            rows: 3\n                        }\n                    },\n                    {\n                        component: RxRevertCustomizationComponent,\n                        options: {\n                            allowOverlay: definitionModel.customizationOptions.allowOverlay,\n                            scope: definitionModel.customizationOptions.scope,\n                            overlayGroupId: definitionModel.overlayGroupId,\n                            overlayDescriptor: definitionModel.overlayDescriptor\n                        }\n                    },\n                    {\n                        name: 'customizationOptions',\n                        component: CustomizationOptionsComponent,\n                        isDisabled: !isCustomizationAllowed,\n                        options: {\n                            definitionTypeDisplayName: this.translateService\n                                .instant('com.bmc.arsys.rx.client.document-definition.label')\n                                .toLowerCase(),\n                            allowOverlay: definitionModel.customizationOptions.allowOverlay,\n                            scope: definitionModel.customizationOptions.scope,\n                            overlayGroupId: definitionModel.overlayGroupId,\n                            overlayDescriptor: definitionModel.overlayDescriptor\n                        }\n                    }\n                ]\n            }\n        ];\n    }\n    validate(definitionModel) {\n        const validationIssues = [];\n        if (isEmpty(trim(definitionModel.name))) {\n            validationIssues.push({\n                type: ValidationIssueType.Error,\n                description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message', {\n                    propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n                }),\n                data: {\n                    propertyName: 'name'\n                }\n            });\n        }\n        if (definitionModel.name && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(definitionModel.name)) {\n            validationIssues.push({\n                type: ValidationIssueType.Error,\n                description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message', {\n                    propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n                }),\n                data: {\n                    propertyName: 'name'\n                }\n            });\n        }\n        if (isEmpty(trim(definitionModel.documentSchema))) {\n            validationIssues.push({\n                type: ValidationIssueType.Error,\n                description: this.translateService.instant('com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message', {\n                    propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-schema.label')\n                }),\n                data: {\n                    propertyName: 'documentSchema'\n                }\n            });\n        }\n        else if (isUndefined(this.rxJsonParserService.tryParseJson(definitionModel.documentSchema))) {\n            validationIssues.push({\n                type: ValidationIssueType.Error,\n                description: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.validation.json-is-not-valid.message'),\n                data: {\n                    propertyName: 'documentSchema'\n                }\n            });\n        }\n        return validationIssues.length\n            ? [\n                {\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title'),\n                    issues: validationIssues\n                }\n            ]\n            : [];\n    }\n    ngOnDestroy() {\n        this.inspectorFocusEditorSubject.complete();\n        this.destroyed$.next(true);\n        this.destroyed$.complete();\n        this.store$.dispatch(destroy());\n    }\n}\nDocumentDesignerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerComponent, deps: [{ token: i1.Store }, { token: i0.Renderer2 }, { token: i2.RxGlobalCacheService }, { token: i3.RxJsonParserService }, { token: i2.RxNotificationService }, { token: i2.RxOverlayService }, { token: i4.TranslateService }, { token: DocumentDesignerService }], target: i0.ɵɵFactoryTarget.Component });\nDocumentDesignerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.1.3\", type: DocumentDesignerComponent, selector: \"rx-document-designer\", inputs: { configuration: \"configuration\" }, outputs: { definitionSaved: \"definitionSaved\", definitionErrorLoading: \"definitionErrorLoading\", closeDesigner: \"closeDesigner\" }, viewQueries: [{ propertyName: \"inspectorSidebar\", first: true, predicate: AdaptSidebarComponent, descendants: true }], usesOnChanges: true, ngImport: i0, template: \"<ng-container *ngIf=\\\"vm$ | async as vm\\\">\\n  <rx-designer-header\\n    [bundleName]=\\\"vm.bundleFriendlyName\\\"\\n    [breadcrumbItems]=\\\"vm.breadcrumbItems\\\"\\n    [isDesignMode]=\\\"!vm.definitionForJsonViewer\\\"\\n    [isSaveButtonDisabled]=\\\"vm.isSaveButtonDisabled\\\"\\n    (toggleDesignMode)=\\\"onToggleDesignMode()\\\"\\n    (save)=\\\"onSave()\\\"\\n    (closeDesigner)=\\\"closeDesigner.emit()\\\"\\n  ></rx-designer-header>\\n\\n  <div class=\\\"rx-designer-component\\\" [hidden]=\\\"!!vm.definitionForJsonViewer\\\">\\n    <adapt-sidebar position=\\\"right\\\" panelWidth=\\\"280px\\\" [openedId]=\\\"0\\\">\\n      <adapt-sidebar-item\\n        headerTitle=\\\"{{ 'com.bmc.arsys.rx.client.common.properties.label' | translate }}\\\"\\n        tooltipText=\\\"{{ 'com.bmc.arsys.rx.client.common.properties.label' | translate }}\\\"\\n        iconClass=\\\"d-icon-pencil\\\"\\n      >\\n        <rx-form-builder\\n          [config]=\\\"vm.definitionInspectorConfig\\\"\\n          [focusEditor$]=\\\"inspectorFocusEditor$\\\"\\n          (editorEvent)=\\\"onEditorEvent($event)\\\"\\n          [isReadOnly]=\\\"vm.isReadOnly\\\"\\n          [model]=\\\"vm.definitionModel\\\"\\n          (formInitialized)=\\\"onDefinitionInspectorInitialized()\\\"\\n          (modelChange)=\\\"onDefinitionModelChange($event)\\\"\\n        ></rx-form-builder>\\n      </adapt-sidebar-item>\\n\\n      <adapt-sidebar-item\\n        headerTitle=\\\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\\\"\\n        tooltipText=\\\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\\\"\\n        [iconClass]=\\\"vm.hasValidationErrors ? 'd-icon-exclamation_triangle text-danger' : 'd-icon-exclamation_triangle'\\\"\\n      >\\n        <rx-validation-issues\\n          [definitionTypeDisplayName]=\\\"'com.bmc.arsys.rx.client.document-definition.label' | translate\\\"\\n          [issueSections]=\\\"vm.validationIssues\\\"\\n          (correctIssue)=\\\"onCorrectIssue($event)\\\"\\n        ></rx-validation-issues>\\n      </adapt-sidebar-item>\\n\\n      <div class=\\\"main rx-designer-container h-100\\\">\\n        <adapt-rx-control-label\\n          [label]=\\\"'com.bmc.arsys.rx.client.document-designer.document-schema.label' | translate\\\"\\n          [showRequiredLabel]=\\\"true\\\"\\n        >\\n        </adapt-rx-control-label>\\n\\n        <textarea\\n          [formControl]=\\\"schemaFormControl\\\"\\n          [readonly]=\\\"vm.isReadOnly\\\"\\n          class=\\\"form-control h-100\\\"\\n          name=\\\"documentSchema\\\"\\n          required\\n          id=\\\"document-schema\\\"\\n          rx-id=\\\"document-schema\\\"\\n        ></textarea>\\n      </div>\\n    </adapt-sidebar>\\n  </div>\\n\\n  <adapt-code-viewer\\n    *ngIf=\\\"vm.definitionForJsonViewer\\\"\\n    [code]=\\\"vm.definitionForJsonViewer | json\\\"\\n    [lang]=\\\"'javascript'\\\"\\n    [hasToolbar]=\\\"false\\\"\\n    [theme]=\\\"'light'\\\"\\n    class=\\\"full-size\\\"\\n  >\\n  </adapt-code-viewer>\\n</ng-container>\\n\", styles: [\":root{--border-radius: 4px;--nav-background: var(--gray-900);--nav-links-color: var(--white);--font-family: \\\"Open Sans\\\", -apple-system, BlinkMacSystemFont, \\\"Segoe UI\\\", Roboto, \\\"Helvetica Neue\\\", Arial, sans-serif;--color-primary-disabled-hover: #ff8d2a;--color-primary-disabled: #ff7d18;--color-primary: #f86e00;--color-primary-hover: #e45f00;--color-primary-active: #d05100;--color-primary-active-hover: #bc4300;--color-secondary-disabled-hover: #ffffff;--color-secondary-disabled: #ffffff;--color-secondary: #f9f9fa;--color-secondary-hover: #e5e5e6;--color-secondary-active: #d2d2d3;--color-secondary-active-hover: #c0c0c2;--color-active-disabled-hover: #45c8bd;--color-active-disabled: #2db7ad;--color-active: #00a79d;--color-active-hover: #00978e;--color-active-active: #00887f;--color-active-active-hover: #007970;--color-info-disabled-hover: #66d9f1;--color-info-disabled: #52c7df;--color-info: #3cb6ce;--color-info-hover: #21a6bd;--color-info-active: #0096ad;--color-info-active-hover: #00879e;--color-success-disabled-hover: #aae860;--color-success-disabled: #99d550;--color-success: #89c341;--color-success-hover: #7ab232;--color-success-active: #6ba122;--color-success-active-hover: #5d9110;--color-warning-disabled-hover: #ffda46;--color-warning-disabled: #ffc734;--color-warning: #f1b521;--color-warning-hover: #dea406;--color-warning-active: #cc9400;--color-warning-active-hover: #ba8400;--color-danger-disabled-hover: #ff5323;--color-danger-disabled: #ff4313;--color-danger: #f83200;--color-danger-hover: #e31f00;--color-danger-active: #cd0500;--color-danger-active-hover: #b80000;--dense-spacing-custom: false;--table-scroll-width: 0}:host{display:flex;flex-direction:column;height:100%;width:100%}.rx-designer-component{height:calc(100% - 50px)}.rx-designer-container{display:flex;flex-direction:column;flex-grow:1;padding:1rem}textarea{resize:none}:host ::ng-deep .has-validation-errors .nav-link .d-icon-exclamation_triangle{color:#f83200}:host ::ng-deep adapt-tabset .nav-tabs .nav-link-icon{margin-right:0}:host ::ng-deep .adapt-sidebar-main{overflow:auto}\\n\"], components: [{ type: i6.RxDesignerHeaderComponent, selector: \"rx-designer-header\", inputs: [\"bundleName\", \"breadcrumbItems\", \"isDesignMode\", \"isPreviewAvailable\", \"isSaveButtonDisabled\"], outputs: [\"breadcrumbSelected\", \"toggleDesignMode\", \"showPreview\", \"save\", \"closeDesigner\"] }, { type: i7.AdaptSidebarComponent, selector: \"adapt-sidebar\", inputs: [\"className\", \"navClassName\", \"panelWidth\", \"panel2Width\", \"position\", \"theme\", \"widthLimit\", \"openedId\", \"adjustMainContainerWidth\"], outputs: [\"openedIdChange\", \"isPanelOpenedCurrently\"], exportAs: [\"adaptSidebar\"] }, { type: i7.AdaptSidebarItemComponent, selector: \"adapt-sidebar-item\", inputs: [\"iconClass\", \"headerTitle\", \"tooltipText\", \"aria-label\"] }, { type: i6.FormBuilderComponent, selector: \"rx-form-builder\", inputs: [\"config\", \"model\", \"guid\", \"isReadOnly\", \"focusEditor$\"], outputs: [\"modelChange\", \"editorEvent\", \"formInitialized\"] }, { type: i3$1.RxValidationIssuesComponent, selector: \"rx-validation-issues\", inputs: [\"definitionTypeDisplayName\", \"issueSections\"], outputs: [\"correctIssue\"] }, { type: i7.AdaptRxControlLabelComponent, selector: \"adapt-rx-control-label\", inputs: [\"for\", \"id\", \"label\", \"subLabel\", \"requiredLabel\", \"showRequiredLabel\", \"tooltip\", \"testID\"] }, { type: i7.AdaptCodeViewerComponent, selector: \"adapt-code-viewer\", inputs: [\"code\", \"theme\", \"lang\", \"texts\", \"hasToolbar\"] }], directives: [{ type: i9.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }, { type: i10.DefaultValueAccessor, selector: \"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]\" }, { type: i10.RequiredValidator, selector: \":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]\", inputs: [\"required\"] }, { type: i10.NgControlStatus, selector: \"[formControlName],[ngModel],[formControl]\" }, { type: i10.FormControlDirective, selector: \"[formControl]\", inputs: [\"disabled\", \"formControl\", \"ngModel\"], outputs: [\"ngModelChange\"], exportAs: [\"ngForm\"] }], pipes: { \"async\": i9.AsyncPipe, \"translate\": i4.TranslatePipe, \"json\": i9.JsonPipe } });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'rx-document-designer',\n                    templateUrl: './document-designer.component.html',\n                    styleUrls: ['./document-designer.component.scss']\n                }]\n        }], ctorParameters: function () { return [{ type: i1.Store }, { type: i0.Renderer2 }, { type: i2.RxGlobalCacheService }, { type: i3.RxJsonParserService }, { type: i2.RxNotificationService }, { type: i2.RxOverlayService }, { type: i4.TranslateService }, { type: DocumentDesignerService }]; }, propDecorators: { configuration: [{\n                type: Input\n            }], definitionSaved: [{\n                type: Output\n            }], definitionErrorLoading: [{\n                type: Output\n            }], closeDesigner: [{\n                type: Output\n            }], inspectorSidebar: [{\n                type: ViewChild,\n                args: [AdaptSidebarComponent, { static: false }]\n            }] } });\n\nclass DocumentDesignerPageComponent {\n    constructor(activatedRoute, router, rxBundleCacheService, rxComponentCanDeactivateGuard, rxDefinitionNameService, rxPageTitleService, rxUtilityModalsService, translateService) {\n        this.activatedRoute = activatedRoute;\n        this.router = router;\n        this.rxBundleCacheService = rxBundleCacheService;\n        this.rxComponentCanDeactivateGuard = rxComponentCanDeactivateGuard;\n        this.rxDefinitionNameService = rxDefinitionNameService;\n        this.rxPageTitleService = rxPageTitleService;\n        this.rxUtilityModalsService = rxUtilityModalsService;\n        this.translateService = translateService;\n        this.isInitialized = false;\n        this.definitionsRoute = 'document-definitions';\n        this.pageTitle = this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title');\n    }\n    ngOnInit() {\n        this.rxComponentCanDeactivateGuard.setPageComponent(this);\n        this.subscription = this.activatedRoute.params.subscribe(({ definitionName, bundleId }) => {\n            this.rxBundleCacheService.bundleId = bundleId || this.rxDefinitionNameService.getBundleId(definitionName);\n            this.isInitialized = true;\n            this.isNewDefinition = !definitionName;\n            this.configuration = Object.assign(Object.assign({}, this.configuration), { bundleId: this.rxBundleCacheService.bundleId, definitionName });\n            this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(definitionName), this.pageTitle]);\n        });\n    }\n    ngOnDestroy() {\n        this.subscription.unsubscribe();\n        this.rxComponentCanDeactivateGuard.setPageComponent(null);\n    }\n    canDeactivate() {\n        var _a, _b;\n        return (_b = (_a = this.designerComponent) === null || _a === void 0 ? void 0 : _a.canDeactivate()) !== null && _b !== void 0 ? _b : true;\n    }\n    confirmDeactivation() {\n        return this.rxUtilityModalsService.confirmUnsavedChanges();\n    }\n    onCloseDesigner() {\n        this.router.navigate([\n            RX_APPLICATION.innovationStudioBundleId,\n            this.rxBundleCacheService.bundleId,\n            this.definitionsRoute\n        ]);\n    }\n    onDefinitionSaved(definitionName) {\n        if (this.isNewDefinition) {\n            this.router.navigate(['edit2', definitionName], { relativeTo: this.activatedRoute.parent });\n        }\n    }\n    onDefinitionErrorLoading() {\n        this.router.navigate(['new2', this.rxBundleCacheService.bundleId], { relativeTo: this.activatedRoute.parent });\n    }\n}\nDocumentDesignerPageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageComponent, deps: [{ token: i1$1.ActivatedRoute }, { token: i1$1.Router }, { token: i2.RxBundleCacheService }, { token: i2.RxComponentCanDeactivateGuard }, { token: i2.RxDefinitionNameService }, { token: i2.RxPageTitleService }, { token: i3$1.RxUtilityModalsService }, { token: i4.TranslateService }], target: i0.ɵɵFactoryTarget.Component });\nDocumentDesignerPageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"12.0.0\", version: \"12.1.3\", type: DocumentDesignerPageComponent, selector: \"rx-document-designer-page\", viewQueries: [{ propertyName: \"designerComponent\", first: true, predicate: DocumentDesignerComponent, descendants: true }], ngImport: i0, template: \"<rx-document-designer\\n  *ngIf=\\\"isInitialized\\\"\\n  [configuration]=\\\"configuration\\\"\\n  (definitionSaved)=\\\"onDefinitionSaved($event)\\\"\\n  (definitionErrorLoading)=\\\"onDefinitionErrorLoading()\\\"\\n  (closeDesigner)=\\\"onCloseDesigner()\\\"\\n></rx-document-designer>\\n\", components: [{ type: DocumentDesignerComponent, selector: \"rx-document-designer\", inputs: [\"configuration\"], outputs: [\"definitionSaved\", \"definitionErrorLoading\", \"closeDesigner\"] }], directives: [{ type: i9.NgIf, selector: \"[ngIf]\", inputs: [\"ngIf\", \"ngIfThen\", \"ngIfElse\"] }] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageComponent, decorators: [{\n            type: Component,\n            args: [{\n                    selector: 'rx-document-designer-page',\n                    templateUrl: './document-designer-page.component.html'\n                }]\n        }], ctorParameters: function () { return [{ type: i1$1.ActivatedRoute }, { type: i1$1.Router }, { type: i2.RxBundleCacheService }, { type: i2.RxComponentCanDeactivateGuard }, { type: i2.RxDefinitionNameService }, { type: i2.RxPageTitleService }, { type: i3$1.RxUtilityModalsService }, { type: i4.TranslateService }]; }, propDecorators: { designerComponent: [{\n                type: ViewChild,\n                args: [DocumentDesignerComponent]\n            }] } });\n\nconst initialModel = {\n    name: null,\n    documentSchema: null,\n    customizationOptions: { allowOverlay: null, scope: null }\n};\nconst initialState = {\n    bundleId: null,\n    definitionName: null,\n    isDesignMode: true,\n    definitionModel: initialModel,\n    definitionModelFromDefinition: initialModel,\n    isDirty: false,\n    savedDefinitionName: null,\n    originalDefinition: null\n};\nconst reducer = createReducer(initialState, on(init, (state, { payload }) => (Object.assign(Object.assign({}, initialState), { bundleId: payload.bundleId, definitionName: payload.definitionName }))), on(initDefinitionData, (state, { definition, definitionModel }) => (Object.assign(Object.assign({}, state), { definitionModel, definitionModelFromDefinition: definitionModel, originalDefinition: definition }))), on(markDesignerPristine, (state) => (Object.assign(Object.assign({}, state), { isDirty: false }))), on(markDesignerDirty, (state) => (Object.assign(Object.assign({}, state), { isDirty: true }))), on(toggleDesignMode, (state) => (Object.assign(Object.assign({}, state), { isDesignMode: !state.isDesignMode }))), on(updateDefinitionModelFromDesigner, (state, { definitionModelFromDesigner }) => (Object.assign(Object.assign({}, state), { definitionModel: Object.assign(Object.assign({}, state.definitionModel), definitionModelFromDesigner) }))), on(saveDefinitionSuccess, (state, { savedDefinitionName }) => (Object.assign(Object.assign({}, state), { savedDefinitionName }))), on(destroy, (state) => (Object.assign({}, initialState))));\nfunction documentDesignerModelReducer(state, action) {\n    return reducer(state, action);\n}\n\nclass DocumentDesignerEffects {\n    constructor(store$, actions$, errorHandler, rxDefinitionUpdateService, documentDesignerService, rxNotificationService, translateService, rxDocumentDefinitionService, rxDefinitionNameService) {\n        this.store$ = store$;\n        this.actions$ = actions$;\n        this.errorHandler = errorHandler;\n        this.rxDefinitionUpdateService = rxDefinitionUpdateService;\n        this.documentDesignerService = documentDesignerService;\n        this.rxNotificationService = rxNotificationService;\n        this.translateService = translateService;\n        this.rxDocumentDefinitionService = rxDocumentDefinitionService;\n        this.rxDefinitionNameService = rxDefinitionNameService;\n        this.initDocumentDesigner$ = createEffect(() => this.actions$.pipe(ofType(init), map((action) => loadDefinition())));\n        this.loadDefinition$ = createEffect(() => this.actions$.pipe(ofType(loadDefinition), withLatestFrom(this.store$.select(definitionNameSelector)), switchMap(([action, definitionName]) => definitionName\n            ? this.rxDocumentDefinitionService.get(definitionName)\n            : this.rxDocumentDefinitionService.getNew()), map((definition) => loadDefinitionSuccess({\n            definition\n        }))));\n        this.loadDefinitionSuccess$ = createEffect(() => this.actions$.pipe(ofType(loadDefinitionSuccess), map((action) => {\n            let definitionModelFromDefinition = {\n                customizationOptions: {\n                    scope: action.definition.scope,\n                    allowOverlay: action.definition.allowOverlay\n                },\n                description: action.definition.description,\n                documentSchema: action.definition.documentSchema,\n                guid: action.definition.guid,\n                lastChangedBy: action.definition.lastChangedBy,\n                lastUpdateTime: action.definition.lastUpdateTime,\n                name: this.rxDefinitionNameService.getDisplayName(action.definition.name),\n                overlayDescriptor: action.definition.overlayDescriptor,\n                overlayGroupId: action.definition.overlayGroupId,\n                owner: action.definition.owner\n            };\n            return initDefinitionData({\n                definition: action.definition,\n                definitionModel: definitionModelFromDefinition\n            });\n        })));\n        this.revertCustomization$ = createEffect(() => this.actions$.pipe(ofType(revertCustomization), withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(bundleIdSelector)), switchMap(([_, definitionModel, bundleId]) => this.rxDocumentDefinitionService.revertCustomization(`${bundleId}:${definitionModel.name}`)), map(() => loadDefinition())));\n        this.markPristine$ = createEffect(() => this.actions$.pipe(ofType(initDefinitionData, saveDefinition), map(() => markDesignerPristine())));\n        this.markDirty$ = createEffect(() => this.actions$.pipe(ofType(updateDefinitionModelFromDesigner, saveDefinitionError), map(() => markDesignerDirty())));\n        this.saveDefinition$ = createEffect(() => this.actions$.pipe(ofType(saveDefinition), withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(originalDefinitionSelector), this.store$.select(bundleIdSelector)), switchMap(([_, definitionModel, originalDefinition, bundleId]) => {\n            const definition = this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId);\n            return (definition.lastUpdateTime\n                ? this.rxDefinitionUpdateService.execute(this.rxDocumentDefinitionService.update.bind(this.rxDocumentDefinitionService, Object.assign(Object.assign({}, originalDefinition), definition)))\n                : this.rxDocumentDefinitionService.create(definition)).pipe(map((response) => {\n                const definitionName = decodeURIComponent(last(response === null || response === void 0 ? void 0 : response.headers.get('location').split('/')) || '') ||\n                    this.rxDefinitionNameService.getDefinitionName(bundleId, definitionModel.name);\n                return saveDefinitionSuccess({\n                    savedDefinitionName: definitionName\n                });\n            }), catchError((error) => {\n                this.errorHandler.handleError(error);\n                return of(saveDefinitionError());\n            }));\n        })));\n        this.saveDefinitionSuccess$ = createEffect(() => this.actions$.pipe(ofType(saveDefinitionSuccess), withLatestFrom(this.store$.select(definitionNameSelector)), tap(() => {\n            this.rxNotificationService.addSuccessMessage(this.translateService.instant('com.bmc.arsys.rx.client.designer.definition-saved-successfully.message', {\n                definitionTypeDisplayName: this.translateService.instant('com.bmc.arsys.rx.client.document-definition.label')\n            }));\n        }), filter(([action, definitionName]) => !!definitionName), map(() => loadDefinition())));\n    }\n}\nDocumentDesignerEffects.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerEffects, deps: [{ token: i1.Store }, { token: i2$1.Actions }, { token: i0.ErrorHandler }, { token: i2.RxDefinitionUpdateService }, { token: DocumentDesignerService }, { token: i2.RxNotificationService }, { token: i4.TranslateService }, { token: i6$1.RxDocumentDefinitionService }, { token: i2.RxDefinitionNameService }], target: i0.ɵɵFactoryTarget.Injectable });\nDocumentDesignerEffects.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerEffects });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerEffects, decorators: [{\n            type: Injectable\n        }], ctorParameters: function () { return [{ type: i1.Store }, { type: i2$1.Actions }, { type: i0.ErrorHandler }, { type: i2.RxDefinitionUpdateService }, { type: DocumentDesignerService }, { type: i2.RxNotificationService }, { type: i4.TranslateService }, { type: i6$1.RxDocumentDefinitionService }, { type: i2.RxDefinitionNameService }]; } });\n\nclass DocumentDesignerModule {\n}\nDocumentDesignerModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nDocumentDesignerModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerModule, declarations: [DocumentDesignerComponent], imports: [AdaptCodeViewerModule,\n        AdaptRxLabelModule,\n        AdaptSidebarModule,\n        AdaptTabsModule,\n        CommonModule,\n        FormsModule,\n        TranslateModule,\n        RxDesignerHeaderModule,\n        RxFormBuilderModule,\n        RxJsonViewerModule,\n        RxValidationIssuesModule,\n        ReactiveFormsModule, i1.StoreFeatureModule, i2$1.EffectsFeatureModule], exports: [DocumentDesignerComponent] });\nDocumentDesignerModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerModule, imports: [[\n            AdaptCodeViewerModule,\n            AdaptRxLabelModule,\n            AdaptSidebarModule,\n            AdaptTabsModule,\n            CommonModule,\n            FormsModule,\n            TranslateModule,\n            RxDesignerHeaderModule,\n            RxFormBuilderModule,\n            RxJsonViewerModule,\n            RxValidationIssuesModule,\n            ReactiveFormsModule,\n            StoreModule.forFeature(RX_DOCUMENT_DESIGNER.featureSelector, {\n                model: documentDesignerModelReducer\n            }),\n            EffectsModule.forFeature([DocumentDesignerEffects])\n        ]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [DocumentDesignerComponent],\n                    exports: [DocumentDesignerComponent],\n                    imports: [\n                        AdaptCodeViewerModule,\n                        AdaptRxLabelModule,\n                        AdaptSidebarModule,\n                        AdaptTabsModule,\n                        CommonModule,\n                        FormsModule,\n                        TranslateModule,\n                        RxDesignerHeaderModule,\n                        RxFormBuilderModule,\n                        RxJsonViewerModule,\n                        RxValidationIssuesModule,\n                        ReactiveFormsModule,\n                        StoreModule.forFeature(RX_DOCUMENT_DESIGNER.featureSelector, {\n                            model: documentDesignerModelReducer\n                        }),\n                        EffectsModule.forFeature([DocumentDesignerEffects])\n                    ]\n                }]\n        }] });\n\nclass DocumentDesignerPageModule {\n}\nDocumentDesignerPageModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nDocumentDesignerPageModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageModule, declarations: [DocumentDesignerPageComponent], imports: [CommonModule, DocumentDesignerModule, TranslateModule], exports: [DocumentDesignerPageComponent] });\nDocumentDesignerPageModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageModule, imports: [[CommonModule, DocumentDesignerModule, TranslateModule]] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: DocumentDesignerPageModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [DocumentDesignerPageComponent],\n                    exports: [DocumentDesignerPageComponent],\n                    imports: [CommonModule, DocumentDesignerModule, TranslateModule]\n                }]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { DocumentDesignerPageComponent, DocumentDesignerPageModule };\n//# sourceMappingURL=helix-platform-document-designer.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}