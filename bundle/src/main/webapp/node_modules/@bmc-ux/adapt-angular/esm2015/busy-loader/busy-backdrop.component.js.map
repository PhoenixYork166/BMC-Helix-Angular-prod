{"version":3,"file":"busy-backdrop.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/busy-loader/busy-backdrop.component.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,SAAS,EAAE,KAAK,EAAiB,iBAAiB,EAAY,MAAM,eAAe,CAAC;AAC5F,OAAO,EAAC,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,OAAO,EAAC,MAAM,qBAAqB,CAAC;AACxE,OAAO,EAAC,aAAa,EAAC,MAAM,MAAM,CAAC;AACnC,OAAO,EAAC,SAAS,EAAC,MAAM,gBAAgB,CAAC;AAEzC,OAAO,EAAC,qBAAqB,EAAC,MAAM,2BAA2B,CAAC;;;;;;IAU5D,yBAAiG;;;IAAnE,sFAAgC,yBAAA;;AARlE,MAAM,aAAa,GAAG,KAAK,CAAC;IAC1B,OAAO,EAAE,CAAC;CACX,CAAC,CAAC;AACH,MAAM,MAAM,GAAG,UAAU,CAAC;AAmB1B,MAAM,OAAO,0BAA0B;IAOrC,YAAoB,OAA8B,EAC9B,iBAAoC;QADpC,YAAO,GAAP,OAAO,CAAuB;QAC9B,sBAAiB,GAAjB,iBAAiB,CAAmB;QAJxD,aAAQ,GAAY,KAAK,CAAC;QAClB,gBAAW,GAA2B,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC;IAInE,CAAC;IAED,eAAe;QACb,IAAI,CAAC,OAAO,CAAC,YAAY;aACtB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aACjC,SAAS,CAAC,CAAC,KAAc,EAAE,EAAE;YAC5B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;YACtB,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;QACzC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW;QACT,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC9B,CAAC;;oGAvBU,0BAA0B;6EAA1B,0BAA0B;QAdnC,sBAAA;QAAA,2EAAiG;QACnG,oBAAA;;QAD6E,eAAc;QAAd,mCAAc;iFAE/E;YACV,OAAO,CAAC,WAAW,EAAE;gBACnB,UAAU,CAAC,WAAW,EAAE;oBACtB,aAAa;oBACb,OAAO,CAAC,MAAM,CAAC;iBAChB,CAAC;gBACF,UAAU,CAAC,WAAW,EAAE;oBACtB,OAAO,CAAC,MAAM,EAAE,aAAa,CAAC;iBAC/B,CAAC;aACH,CAAC;SACH;uFAEU,0BAA0B;cAjBtC,SAAS;eAAC;gBACT,QAAQ,EAAE,uCAAuC;gBACjD,QAAQ,EAAE;;GAET;gBACD,UAAU,EAAE;oBACV,OAAO,CAAC,WAAW,EAAE;wBACnB,UAAU,CAAC,WAAW,EAAE;4BACtB,aAAa;4BACb,OAAO,CAAC,MAAM,CAAC;yBAChB,CAAC;wBACF,UAAU,CAAC,WAAW,EAAE;4BACtB,OAAO,CAAC,MAAM,EAAE,aAAa,CAAC;yBAC/B,CAAC;qBACH,CAAC;iBACH;aACF;wGAEU,IAAI;kBAAZ,KAAK;YACG,YAAY;kBAApB,KAAK","sourcesContent":["import {Component, Input, AfterViewInit, ChangeDetectorRef, OnDestroy} from '@angular/core';\nimport {trigger, style, transition, animate} from '@angular/animations';\nimport {ReplaySubject} from 'rxjs';\nimport {takeUntil} from 'rxjs/operators';\n\nimport {PromiseTrackerService} from './promise-tracker.service';\n\nconst inactiveStyle = style({\n  opacity: 0,\n});\nconst timing = '.3s ease';\n\n@Component({\n  selector: 'adapt-busy-backdrop, ng-busy-backdrop',\n  template: `\n    <div class=\"ng-busy-backdrop\" [ngClass]=\"[type, overlayClass]\" @fadeInOut *ngIf=\"isActive\"></div>\n  `,\n  animations: [\n    trigger('fadeInOut', [\n      transition('void => *', [\n        inactiveStyle,\n        animate(timing)\n      ]),\n      transition('* => void', [\n        animate(timing, inactiveStyle)\n      ])\n    ])\n  ]\n})\nexport class AdaptBusyBackdropComponent implements AfterViewInit, OnDestroy {\n  @Input() type: string;\n  @Input() overlayClass: string;\n\n  isActive: boolean = false;\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  constructor(private tracker: PromiseTrackerService,\n              private changeDetectorRef: ChangeDetectorRef) {\n  }\n\n  ngAfterViewInit(): void {\n    this.tracker.activeState$\n      .pipe(takeUntil(this._destroyed$))\n      .subscribe((value: boolean) => {\n        this.isActive = value;\n        this.changeDetectorRef.detectChanges();\n      });\n  }\n\n  ngOnDestroy(): void {\n    this._destroyed$.next(true);\n    this._destroyed$.complete();\n  }\n}\n"]}