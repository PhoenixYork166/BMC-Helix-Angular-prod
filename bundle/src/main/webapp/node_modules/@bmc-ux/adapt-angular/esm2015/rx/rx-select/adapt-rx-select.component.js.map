{"version":3,"file":"adapt-rx-select.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-angular/src/rx/rx-select/adapt-rx-select.component.ts","../../../../../../libs/adapt-angular/src/rx/rx-select/adapt-rx-select.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostBinding,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  Renderer2,\n  Self,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport {NgControl} from '@angular/forms';\nimport {animate, style, transition, trigger, useAnimation} from '@angular/animations';\nimport {DOWN_ARROW, ENTER, SPACE, TAB, UP_ARROW} from '@angular/cdk/keycodes';\nimport {asyncScheduler, Subject} from 'rxjs';\nimport {debounceTime, take, takeUntil, tap, throttleTime} from 'rxjs/operators';\nimport {cloneDeep, differenceWith, flatMapDeep, indexOf, isBoolean, isEqual, isNil, isObject, union} from 'lodash-es';\n\nimport {ANIMATION_NAME} from '../../common/animation';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptRadarAngularCustomEventType,\n  AdaptRadarAngularService\n} from '../../common/radar/adapt-radar';\nimport {AdaptCustomAction} from '../../custom-actions/index';\nimport {AdaptDeviceDetectionService} from '../../common/device-detection.service';\nimport {AdaptDropdownDirective, AdaptDropdownMobileView} from '../../dropdown/index';\nimport {AdaptTranslateService} from '../../common/i18n/index';\nimport {KeyValueObject, StylesObject} from '../../common/common.models';\nimport {PlacementArray} from '../../common/positioning';\nimport {ResizeService} from '../../common/resize/resize.service';\nimport {SafeCdr} from '../../common/safe-cdr';\nimport {getEventKeyCode} from '../../common/key-codes';\nimport {getFocusableElements} from '../../common/focus';\nimport {isFunction, toString} from '../../common/utilities';\nimport {AdaptOverlayService} from '../../common/overlay/index';\n\nimport {AdaptRxFeedbackComponent, AdaptRxFormControlDirective, FormControlSize} from '../form-control/index';\nimport {AdaptRxSearchComponent} from '../rx-search/index';\nimport {AdaptRxSelectConfigService} from './adapt-rx-select-config.service';\nimport {\n  RxSelectedOptionsMap,\n  RxSelectIndexedOption,\n  RxSelectIndexedOptionsGroup,\n  RxSelectionChangeEvent,\n  RxSelectOption,\n  RxSelectOptionsGroup,\n  SelectTexts\n} from './adapt-rx-select.types';\nimport {AdaptIsOptionSelectedPipe} from './adapt-rx-select.pipes';\n\n@Component({\n  selector: 'adapt-rx-select',\n  templateUrl: './adapt-rx-select.component.html',\n  animations: [\n    trigger('filterStatusAnimation', [\n      transition(\n        ':enter',\n        [\n          style({width: 0, opacity: 0}),\n          animate('0.2s ease-in',\n            style({width: '*', opacity: 1}))\n        ]\n      ),\n      transition(\n        ':leave',\n        [\n          style({width: '*', opacity: 1}),\n          animate('0.2s ease-out',\n            style({width: 0, opacity: 0}))\n        ]\n      )\n    ]),\n    trigger('heightAnimation', [\n      transition('void => *', [\n        useAnimation(ANIMATION_NAME.height, {\n          params: {\n            from: '0',\n            to: '*'\n          }\n        })\n      ]),\n      transition('* => void', [\n        useAnimation(ANIMATION_NAME.height, {\n          params: {\n            from: '*',\n            to: '0'\n          }\n        })\n      ])\n    ])\n  ]\n})\nexport class AdaptRxSelectComponent extends AdaptRxFormControlDirective implements OnInit, AfterViewInit, OnDestroy {\n\n  @HostBinding('class.rx-select-dropdown') defaultHostClass: boolean = true;\n\n  protected controlName: string = 'select';\n\n  readonly SELECTED_OPTION_CLASS: string = 'active';\n  readonly ACTIVE_OPTION_CLASS: string = 'rx-select__option-active';\n  readonly DEFAULT_POPUP_MAX_HEIGHT: number = 250;\n\n  analyticsComponentName: typeof AdaptRadarAngularCustomEventName = AdaptRadarAngularCustomEventName;\n\n  title: string;\n  titleTooltip: string;\n\n  selectedOptionsMap: RxSelectedOptionsMap = new Map<string, RxSelectOption>();\n\n  // Flatten options array\n  flattenOptions: RxSelectOption[] = [];\n\n  // Filtered options (with indexes) with same structure as options\n  filteredIndexedOptions: (RxSelectIndexedOption | RxSelectIndexedOptionsGroup)[] = [];\n\n  // Flatten filteredIndexedOptions array\n  flattenFilteredIndexedOptions: RxSelectIndexedOption[] = [];\n\n  // For virtual scroll case where the data needs to be flattened because CDK Scrolling doesn't support nesting for loops\n  flattenFilteredGroupIndexedOptions: (RxSelectIndexedOption | RxSelectIndexedOptionsGroup)[] = null;\n\n  // Active option\n  activeOption: RxSelectIndexedOption;\n\n  activeDescendant: string;\n  filterValue: string;\n  popupId: string;\n  labelId: string;\n  isMobile: boolean;\n  isTablet: boolean;\n  popupWidth: string = 'auto';\n  mobileViewConfig: AdaptDropdownMobileView;\n  verticalLayout: boolean = false;\n\n  get selectedOptions(): RxSelectOption[] {\n    return this._selectedOptions;\n  }\n\n  set selectedOptions(options: RxSelectOption[]) {\n    this._selectedOptions = options;\n\n    this._recreateSelectedOptionsMap(options);\n  }\n\n  get ariaInvalidState(): boolean {\n    return this.ariaInvalid ?? this.hasDangerState;\n  }\n\n  /**\n   * Options list\n   * @docs-default\n   */\n  @Input()\n  set options(options: (RxSelectOption | RxSelectOptionsGroup)[]) {\n    this._options = options;\n\n    // Collect options from all nested optionGroups\n    this.flattenOptions = flatMapDeep(this.options, (option) => Array.isArray(option.children) ? option.children : option);\n\n    // Update flatten filtered options count when options are filtered\n    this._updateFilteredOptions();\n  }\n\n  get options(): (RxSelectOption | RxSelectOptionsGroup)[] {\n    return this._options;\n  }\n\n  /**\n   * Show empty option in options list\n   * @docs-default false\n   */\n  @Input() emptyOption: boolean = false;\n\n  /**\n   * Formatter that transforms the option into a string\n   * @docs-default option\n   */\n  @Input() optionFormatter: (option: RxSelectOption) => string = toString;\n\n  /**\n   * Template for displaying option value\n   * @docs-default\n   */\n  @Input() optionContentTemplate: TemplateRef<{ $implicit: RxSelectOption }>;\n\n  /**\n   * Function resolves disabled option\n   * @docs-default option => !!option['disabled']\n   */\n  @Input() disabledOptionResolver: (option: RxSelectOption) => boolean = this._defaultDisabledOptionResolver;\n\n  /**\n   * Formatter that transforms the option list into a title string\n   * @docs-default\n   */\n  @Input() titleFormatter: (option: RxSelectOption[]) => string = this._defaultTitleFormatter.bind(this);\n\n  /**\n   * If 'true', the first item in the options list will be active\n   * @docs-default true\n   */\n  @Input() focusFirst: boolean = true;\n\n  /**\n   * Standard UI texts\n   * @docs-default texts.selectTexts\n   */\n  @Input()\n  get texts(): SelectTexts {\n    return this._texts;\n  }\n\n  set texts(value: SelectTexts) {\n    this._texts = {...this._defaultTexts, ...value};\n  }\n\n  /**\n   * Enables multiple selection mode\n   * @docs-default false\n   */\n  @Input() multiple: boolean = false;\n\n  /**\n   * Style of checked single select checked option\n   * @docs-default line\n   */\n  @Input() singleSelectStyle: 'line' | 'marker' = 'line';\n\n  /**\n   * Enables options filtering\n   * @docs-default false\n   */\n  @Input() enableFilter: boolean = false;\n\n  /**\n   * Enables select inline mode\n   * @docs-default false\n   */\n  @Input() inline: boolean = false;\n\n  /**\n   * Enables 'select all' button\n   * @docs-default false\n   */\n  @Input() selectAllButton: boolean = false;\n\n  /**\n   * Enables 'deselect all' button\n   * @docs-default false\n   */\n  @Input() deselectAllButton: boolean = false;\n\n  /**\n   * Show 'LoadMore' button\n   * @docs-default false\n   */\n  @Input() set loadMoreButton(value: boolean) {\n    this._loadMoreButton = value;\n\n    if (!value) {\n      this._blurLoadMoreButton();\n    }\n  }\n\n  get loadMoreButton(): boolean {\n    return this._loadMoreButton;\n  }\n\n  /**\n   * Callback for 'loadMore' button\n   * @docs-default\n   */\n  @Input() loadMoreCallback: () => void;\n\n  /**\n   * Show loading data indicator\n   * @docs-default false\n   */\n  @Input() set loadMoreInProgress(value: boolean) {\n    this._loadMoreInProgress = value;\n\n    if (!value) {\n      this._blurLoadMoreButton();\n    }\n  }\n\n  get loadMoreInProgress(): boolean {\n    return this._loadMoreInProgress;\n  }\n\n  /**\n   * Show loading instead of options\n   * @docs-default false\n   */\n  @Input() set loadingState(value: boolean) {\n    if (!isBoolean(value)) {\n      return;\n    }\n\n    this._loadingState = value;\n\n    const lastFocusInPopup = document.activeElement &&\n      (\n        (document.activeElement === this.loadingStateBlockRef?.nativeElement) ||\n        (this.selectOptionsContainerRef?.nativeElement.contains(document.activeElement))\n      );\n\n    this._ngZone.onStable\n      .pipe(take(1), takeUntil(this.destroy$))\n      .subscribe(() => {\n        // Need to trigger position recalculation only after loading block disappeared\n        if (this._loadingState === false) {\n          // Run dropdown position recalculation after data loaded.\n          // Can be useful when dropdown shown on top and loaded options has height less than loading block\n          // Requires for the implementation without OverlayService\n          this.popup?.menuWindowRef?.instance.recalculatePosition();\n        }\n\n        if (lastFocusInPopup) {\n          this._moveFocusToPopup();\n        }\n      });\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  get loadingState(): boolean {\n    return this._loadingState;\n  }\n\n  /**\n   * A placeholder string for the input filed\n   * @docs-default\n   */\n  @Input() placeholder: string;\n\n  /**\n   * Control size\n   * @docs-default default\n   */\n  @Input() size: FormControlSize = 'default';\n\n  /**\n   * Close popup on option select\n   * @docs-default false\n   */\n  @Input() closeOnSelect: boolean = false;\n\n  /**\n   * The preferred placement of the typeahead\n   * @docs-default auto\n   * @since v10.13.0\n   */\n  @Input() placement: PlacementArray = 'auto';\n\n  /**\n   * Attach popup to the body\n   * @docs-default false\n   */\n  @Input() appendToBody: boolean = false;\n\n  /**\n   * Max height for the popup before scroll visible\n   * @docs-default 250\n   */\n  @Input() popupMaxHeight: string | number = this.DEFAULT_POPUP_MAX_HEIGHT;\n\n  /**\n   * Custom class for the dropdown menu\n   * @docs-default\n   * @since 10.13.0\n   */\n  @Input() popupClass: string;\n\n  /**\n   * Options list page size\n   * @docs-default\n   * @since v10.17.0\n   */\n  @Input() pageSize: number;\n\n  /**\n   * Control aria-invalid state from outside.\n   * Can be useful in case when rxSelect is used inside other component and its state should be controlled by parent component (eg. rxListSelector).\n   * Please pay attention that 'null' and 'undefined' is used to delegate control for invalid state to rxSelect inner mechanism\n   * @docs-default\n   * @since v11.3.0\n   */\n  @Input() ariaInvalid: boolean;\n\n  /**\n   * Enable virtual scroll for options list. Can be useful when there are too many options to fit in the dropdown\n   * Additional info: https://material.angular.io/cdk/scrolling/api\n   *\n   * @docs-default false\n   * @since v12.18.0\n   */\n  @Input() virtualScroll: boolean = false;\n\n  /**\n   * Used to configure the size of the items in the list (in pixels)\n   * Additional info: https://material.angular.io/cdk/scrolling/api\n   *\n   * @docs-default 36\n   * @since v12.18.0\n   */\n  @Input() virtualScrollItemSize: number = 36;\n\n  /**\n   * The size of the cache used to store templates that are not being used for re-use later.\n   * Setting the cache size to 0 will disable caching\n   * Additional info: https://material.angular.io/cdk/scrolling/api\n   *\n   * @docs-default 20\n   * @since v12.18.0\n   */\n  @Input() virtualScrollTemplateCacheSize: number = 20;\n\n  /**\n   * The minimum amount of buffer rendered beyond the viewport (in pixels).\n   * If the amount of buffer dips below this number, more items will be rendered\n   * Additional info: https://material.angular.io/cdk/scrolling/api\n   *\n   * @docs-default 200\n   * @since v12.18.0\n   */\n  @Input() minBufferPx: number = 200;\n\n  /**\n   * The number of pixels worth of buffer to render for when rendering new items\n   * Additional info: https://material.angular.io/cdk/scrolling/api\n   *\n   * @docs-default 500\n   * @since v12.18.0\n   */\n  @Input() maxBufferPx: number = 500;\n\n  /* eslint-disable @angular-eslint/no-output-on-prefix */\n  /**\n   * An event emitted right before an item is selected from the options list\n   */\n  @Output() readonly onSelectionChange: EventEmitter<RxSelectionChangeEvent> = new EventEmitter<RxSelectionChangeEvent>();\n\n  /**\n   *  An event fired when the popup is opened or closed\n   */\n  @Output() readonly onPopupOpenChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  /**\n   *  An event fired when the filter value changed\n   *  @since version 9.1.0\n   */\n  @Output() readonly onFilterValueChange: EventEmitter<string> = new EventEmitter<string>();\n  /* eslint-enable @angular-eslint/no-output-on-prefix */\n\n  /**\n   * Reference to select block\n   */\n  @ViewChild('selectOptionsContainerRef', {static: false}) selectOptionsContainerRef: ElementRef<HTMLElement>;\n\n  /**\n   * Search component reference\n   */\n  @ViewChild('searchComponent', {static: false}) searchComponent: AdaptRxSearchComponent;\n\n  /**\n   * Reference to select options list container\n   */\n  @ViewChild('selectOptionsListRef', {static: false}) selectOptionsListRef: ElementRef<HTMLElement>;\n\n  /**\n   * Reference to empty state element\n   */\n  @ViewChild('emptyStateElementRef', {static: false}) emptyStateElementRef: ElementRef<HTMLElement>;\n\n  /**\n   * Reference to select button\n   */\n  @ViewChild('selectButtonRef', {static: false}) selectButtonRef: ElementRef<HTMLButtonElement>;\n\n  /**\n   * Reference to title container\n   */\n  @ViewChild('titleRef', {static: false}) titleRef: ElementRef<HTMLElement>;\n\n  /**\n   * Reference to AdaptRxFeedbackComponent\n   */\n  @ViewChild('adaptRxFeedbackRef', {static: true}) adaptRxFeedbackRef: AdaptRxFeedbackComponent;\n\n  /**\n   * Reference to AdaptDropdownDirective\n   */\n  @ViewChild('adaptDropdownDirective', {static: false}) popup: AdaptDropdownDirective;\n\n  /**\n   * Reference to controls container (wrapper 310px)\n   */\n  @ViewChild('selectControlsContainer', {static: false}) selectControlsContainer: ElementRef;\n\n  /**\n   * Reference to custom actions\n   */\n  @ViewChild('selectCustomActionsContainer', {static: false}) selectCustomActionsContainer: ElementRef;\n\n  /**\n   * Reference to counter\n   */\n  @ViewChild('selectCounterContainer', {static: false}) selectCounterContainer: ElementRef;\n\n  /**\n   * Reference to loadMode button\n   */\n  @ViewChild('loadMoreButtonRef', {static: false}) loadMoreButtonRef: ElementRef<HTMLButtonElement>;\n\n  /**\n   * Reference to none option button\n   */\n  @ViewChild('noneButtonRef', {static: false}) noneButtonRef: ElementRef<HTMLButtonElement>;\n\n  /**\n   * Reference to loading state block\n   */\n  @ViewChild('loadingStateBlockRef', {static: false}) loadingStateBlockRef: ElementRef<HTMLElement>;\n\n  private _options: (RxSelectOption | RxSelectOptionsGroup)[] = [];\n  private _loadingState: boolean = false;\n  private _loadMoreButton: boolean = false;\n  private _loadMoreInProgress: boolean = false;\n  private _defaultTexts: SelectTexts;\n  private _texts: SelectTexts;\n  private _pageNumber: number = 1;\n  private _resize$: Subject<void> = new Subject();\n  private _isDesktop: boolean;\n  private _quickSearch$: Subject<KeyboardEvent> = new Subject<KeyboardEvent>();\n  private _quickSearchTerm: string = '';\n  private _selectedOptionsOnInit: RxSelectOption[] = [];\n  private _selectedOptions: RxSelectOption[] = [];\n\n  static TestSearchOption(option: RxSelectOption, term: string, formatter: (option: RxSelectOption) => string): boolean {\n    return formatter(option).toLowerCase().indexOf((term || '').toLowerCase()) > -1;\n  }\n\n  constructor(@Optional() @Self() ngControl: NgControl,\n              adaptRxSelectConfigService: AdaptRxSelectConfigService,\n              _changeDetectorRef: ChangeDetectorRef,\n              private _deviceDetectionService: AdaptDeviceDetectionService,\n              private _ngZone: NgZone,\n              private _renderer: Renderer2,\n              private _resizeService: ResizeService,\n              private _overlayService: AdaptOverlayService,\n              public ts: AdaptTranslateService,\n              _adaptRadarService: AdaptRadarAngularService,\n              _elem: ElementRef<HTMLElement>,\n              public isOptionSelectedPipe: AdaptIsOptionSelectedPipe) {\n    super(ngControl, ts, _adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptRxSelect, _changeDetectorRef);\n\n    this.isTablet = this._deviceDetectionService.deviceTablet();\n    this.isMobile = this.isTablet || this._deviceDetectionService.isMobile();\n    this._isDesktop = !(this.isTablet || this.isMobile);\n\n    this.size = adaptRxSelectConfigService.size;\n    this.emptyOption = adaptRxSelectConfigService.emptyOption;\n    this.placement = adaptRxSelectConfigService.placement;\n    this.appendToBody = adaptRxSelectConfigService.appendToBody;\n    this.popupMaxHeight = adaptRxSelectConfigService.popupMaxHeight;\n    this.enableFilter = adaptRxSelectConfigService.enableFilter;\n    this.inline = adaptRxSelectConfigService.inline;\n    this.singleSelectStyle = adaptRxSelectConfigService.singleSelectStyle;\n    this.selectAllButton = adaptRxSelectConfigService.selectAllButton;\n    this.deselectAllButton = adaptRxSelectConfigService.deselectAllButton;\n    this.closeOnSelect = adaptRxSelectConfigService.closeOnSelect;\n    this.focusFirst = adaptRxSelectConfigService.focusFirst;\n\n    this._texts = this._defaultTexts = this._getDefaultTexts(ts.getCurrentLanguage());\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.popupId = this.id + '_popup';\n    this.labelId = this.id + '_label';\n\n    this._updateTitle();\n    this._updateFilteredOptions();\n\n    this.mobileViewConfig = {\n      title: this.isTablet ? (this.label || this.texts.defaultTitle) : this.texts.defaultTitle,\n      cancelCB: null,\n      doneBtnTitle: this.texts.doneBtnText,\n      fullHeight: this.enableFilter || this.virtualScroll,\n      isPicker: this.isTablet,\n      doneCB: () => {\n        this.popup.close();\n      }\n    };\n\n    this._quickSearch$\n      .pipe(\n        takeUntil(this.destroy$),\n        tap((event: KeyboardEvent) => {\n          this._quickSearchTerm += event.key;\n\n          const matchIndexedOption = this.flattenFilteredIndexedOptions.find(indexedOption =>\n            this.optionFormatter(indexedOption.option).toLowerCase().startsWith((this._quickSearchTerm).toLowerCase())\n          );\n\n          if (matchIndexedOption) {\n            if (this.multiple) {\n              this.deselectAllOptions(false);\n            }\n\n            this.markOptionAsActive(matchIndexedOption);\n            this._scrollToActiveResultItem();\n            this.selectOption(this.activeOption, false);\n          }\n        }),\n        debounceTime(500)\n      )\n      .subscribe(() => {\n        this._quickSearchTerm = '';\n      });\n\n    // Collect information about selection state on init to send telemetry\n    this._selectedOptionsOnInit = [...this.selectedOptions];\n\n    // Subscribe on first model change to get model value\n    this.ngControl.valueChanges\n      .pipe(take(1), takeUntil(this.destroy$))\n      .subscribe(value => {\n        if (value?.length) {\n          this._selectedOptionsOnInit = [...value];\n        }\n      });\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n\n    if (this._isDesktop) {\n      this._resize$\n        .pipe(\n          throttleTime(100, asyncScheduler, {trailing: true}),\n          takeUntil(this.destroy$)\n        )\n        .subscribe(() => {\n          this._checkPopupOnResize();\n        });\n    }\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n\n    if (this._isDesktop && !this.inline) {\n      this._resizeService.removeResizeEventListener(this.selectButtonRef.nativeElement);\n    }\n  }\n\n  trackByIndexedOption(index: number, indexedOption: RxSelectIndexedOption | RxSelectIndexedOptionsGroup): number | string {\n    return indexedOption.index;\n  }\n\n  get isEmptyState(): boolean {\n    return !this.options?.length && (this.emptyOption ? !this.selectedOptions?.length : true);\n  }\n\n  /**\n   * Check if the control has UI error state\n   */\n  get hasDangerState(): boolean {\n    return this.adaptRxFeedbackRef.hasUIErrorState;\n  }\n\n  // Custom actions config\n  get customActions(): AdaptCustomAction[] {\n    return [\n      {\n        name: this.filterValue ? this.texts.checkAllFilter : this.texts.checkAll,\n        visible: this.isCheckAllVisible(),\n        onClick: this.selectAllOptions.bind(this)\n      },\n      {\n        name: this.filterValue ? this.texts.uncheckAllFilter : this.texts.uncheckAll,\n        visible: this.isUnCheckAllVisible(),\n        onClick: this.deselectAllOptions.bind(this)\n      }\n    ];\n  }\n\n  // Show controls section\n  get showControls(): boolean {\n    return this.flattenFilteredIndexedOptions.length &&\n      (this.inline || this.isMobile || ((this.selectAllButton || this.deselectAllButton)));\n  }\n\n  get popupStyle(): StylesObject {\n    const _popupMaxHeight = isNil(this.popupMaxHeight) ? 'auto' :\n      typeof this.popupMaxHeight === 'string' ? this.popupMaxHeight : `${this.popupMaxHeight}px`;\n\n    return {\n      maxHeight: this.inline || this.isTablet || (this.isMobile && this.mobileViewConfig.fullHeight) ? 'auto' : (this.isMobile ? '60vh' : _popupMaxHeight),\n      height: this.inline ? _popupMaxHeight : '100%'\n    };\n  }\n\n  get displayedOptionsCount(): number {\n    const optionsCount = this.flattenFilteredIndexedOptions.length;\n\n    if (this.pageSize && !this.loadMoreCallback) {\n      const newPageSize = this.pageSize * this._pageNumber;\n\n      return optionsCount < newPageSize ? optionsCount : newPageSize;\n\n    } else {\n      return optionsCount;\n    }\n  }\n\n  get showLoadMoreButton(): boolean {\n    return (this.loadMoreButton && isFunction(this.loadMoreCallback)) ||\n      this.loadMoreInProgress ||\n      (this.pageSize && this.flattenFilteredIndexedOptions.length > this.displayedOptionsCount);\n  }\n\n  /**\n   * Configure 'selectAllOptions' button\n   */\n  isCheckAllVisible(): boolean {\n    if (this.selectAllButton) {\n      return this.flattenFilteredIndexedOptions.length > 0 && !this.isEveryFilteredOptionsSelected();\n    }\n\n    return false;\n  }\n\n  /**\n   * Configure 'deselectAllOptions' button\n   */\n  isUnCheckAllVisible(): boolean {\n    if (this.deselectAllButton) {\n      return this.flattenFilteredIndexedOptions.length > 0 && this.isSomeFilteredOptionsSelected();\n    }\n\n    return false;\n  }\n\n  /**\n   * Check if at least one of filtered items selected to show 'Clear filtered' button\n   */\n  isSomeFilteredOptionsSelected(): boolean {\n    return this.flattenFilteredIndexedOptions.some(option => this.isOptionSelectedPipe.transform(this.selectedOptionsMap, option) && !this.disabledOptionResolver(option.option));\n  }\n\n  /**\n   * Check if all of filtered items selected to show 'Select filtered' button\n   */\n  isEveryFilteredOptionsSelected(): boolean {\n    return this.flattenFilteredIndexedOptions.every((option: RxSelectIndexedOption) => {\n      return this.disabledOptionResolver(option.option) || this.isOptionSelectedPipe.transform(this.selectedOptionsMap, option);\n    });\n  }\n\n  /**\n   * Check if passed option active\n   */\n  isOptionActive(option: RxSelectIndexedOption): boolean {\n    return isEqual(option, this.activeOption);\n  }\n\n  /**\n   * Select button (click) handler\n   */\n  selectButtonClickHandler(e: MouseEvent | KeyboardEvent): void {\n    // Prevent popup opening if disabled or readonly\n    if (this.nonInteractive) {\n      return;\n    }\n\n    this.popup.toggle(e);\n\n    // Set popup width as same as select button's one\n    if (this._isDesktop) {\n      this._checkPopupOnResize();\n    }\n  }\n\n  /**\n   * Select button (keydown) handler\n   */\n  selectButtonKeydownHandler(event: KeyboardEvent): void {\n    if (!this.nonInteractive && !this.inline && !this.popup.isOpen()) {\n      if (getEventKeyCode(event) === DOWN_ARROW) {\n        event.preventDefault();\n        this.popup.open();\n      }\n    }\n\n    this._quickSearch$.next(event);\n  }\n\n  /**\n   * Select block keydown handler\n   * Keyboard navigation between options\n   */\n  selectOptionsListKeydownHandler(event: KeyboardEvent): void {\n    if (document.activeElement === this.selectOptionsListRef.nativeElement) {\n      switch (getEventKeyCode(event)) {\n        case DOWN_ARROW: {\n          event.preventDefault();\n\n          const isLast = this._activateNextOption();\n\n          if (isLast && this.loadMoreButtonRef) {\n            // If last item is active and can be load more data, shift focus to loadMoreButton\n            this.loadMoreButtonRef.nativeElement.focus();\n          }\n\n          break;\n        }\n        case UP_ARROW: {\n          event.preventDefault();\n          this._activatePrevOption();\n\n          break;\n        }\n        case SPACE:\n        case ENTER: {\n          if (this.activeOption !== undefined) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            if (this.activeOption === null) {\n              this.selectEmptyOption();\n            } else {\n              this.selectOption(this.activeOption);\n            }\n          }\n\n          break;\n        }\n        default: {\n          this._quickSearch$.next(event);\n        }\n      }\n    }\n  }\n\n  /**\n   * Mark the option as active\n   */\n  markOptionAsActive(option: RxSelectIndexedOption): void {\n    // Only for keyboard and mouseenter interaction, so check active only for desktop\n    if (this._isDesktop) {\n      this.activeOption = option;\n      this._checkActiveDescendant();\n    }\n  }\n\n  /**\n   * Returns option ID for accessibility\n   */\n  getOptionId(indexedOption: RxSelectIndexedOption): string {\n    return `${this.popupId}-${!isNil(indexedOption) ? indexedOption.index : 'none'}`;\n  }\n\n  /**\n   * Filter value change handler\n   */\n  filterValueChangeHandler(value: string): void {\n    this.onFilterValueChange.emit(value);\n\n    this._updateFilteredOptions();\n\n    // Force delete active option to prevent selection of non-visible active option\n    this.activeOption = undefined;\n\n    this._adaptRadarService.sendCustomEventForAllProviders(AdaptRadarAngularCustomEventName.AdaptRxSelect, {\n      GroupName: this.adaptRadarGroupName,\n      EventType: AdaptRadarAngularCustomEventType.Search,\n      Label: this.label,\n      DefaultNumberOfSelectedItems: this._selectedOptionsOnInit.length,\n      NumberOfSelectedItems: this.selectedOptions.length,\n    });\n  }\n\n  /**\n   * Popup toggle handler\n   */\n  popupOpenChangeHandler(isOpen: boolean): void {\n    this.onPopupOpenChange.emit(isOpen);\n\n    if (isOpen) {\n      if (this._isDesktop) {\n        this._resizeService.addResizeEventListener(this.selectButtonRef.nativeElement, this._resize$.next.bind(this._resize$));\n      }\n\n      this._updateFilteredOptions();\n\n      this._ngZone.onStable\n        .pipe(takeUntil(this.destroy$), take(1))\n        .subscribe(() => {\n          this._moveFocusToPopup();\n        });\n\n    } else {\n      if (this._isDesktop) {\n        this._resizeService.removeResizeEventListener(this.selectButtonRef.nativeElement);\n      }\n\n      this._onTouched();\n\n      this.activeOption = undefined;\n      this.activeDescendant = undefined;\n\n      this._ngZone.onStable\n        .pipe(takeUntil(this.destroy$), take(1))\n        .subscribe(() => {\n          // Remove filter value after popup close\n          this.filterValue = '';\n        });\n    }\n  }\n\n  /**\n   * Handle select options focus\n   */\n  selectBlockFocusHandler(): void {\n    if ((this.focusFirst || this.selectedOptions.length) && !this.activeOption) {\n      this._activateNextOption();\n    }\n\n    if (!this.filteredIndexedOptions.length && this.loadMoreButtonRef) {\n      this.loadMoreButtonRef.nativeElement.focus();\n    }\n  }\n\n  /**\n   * Handle select options blur\n   */\n  selectBlockBlurHandler(): void {\n    if (this.inline) {\n      this._onTouched();\n    }\n  }\n\n  blurHandler(event: FocusEvent): void {\n    super.blurHandler(event);\n\n    if (!this.popup.isOpen()) {\n      this._onTouched();\n    }\n  }\n\n  /**\n   * Deselect all selected options\n   */\n  selectEmptyOption(): void {\n    this.setModel([]);\n\n    if (!this.multiple && this.closeOnSelect && this.popup) {\n      this.popup.close();\n    }\n  }\n\n  /**\n   * Select passed option\n   */\n  selectOption(optionToSelect: RxSelectIndexedOption, closePopup: boolean = true): void {\n    if (this.nonInteractive) {\n      return;\n    }\n\n    // Check if optionToSelect already selected: get selected option index in selectedOptions\n    const isAlreadySelected = this.isOptionSelectedPipe.transform(this.selectedOptionsMap, optionToSelect);\n\n    if (this.multiple) {\n      // Select an option or deselect in case it was already selected\n      const newSelectedOptions: RxSelectOption[] = isAlreadySelected ?\n        differenceWith(this.selectedOptions, [optionToSelect.option], isEqual) : union(this.selectedOptions, [optionToSelect.option]);\n\n      this.setModel(newSelectedOptions);\n    } else {\n      // Select an option if it's not selected yet\n      if (!isAlreadySelected) {\n        this.setModel([optionToSelect.option]);\n      }\n\n      if (closePopup && this.closeOnSelect && this.popup) {\n        this.popup.close();\n      }\n    }\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n\n    this._adaptRadarService.sendCustomEventForAllProviders(AdaptRadarAngularCustomEventName.AdaptRxSelect, {\n      GroupName: this.adaptRadarGroupName,\n      EventType: AdaptRadarAngularCustomEventType.Click,\n      Label: this.label,\n      Required: this.required,\n      Disabled: this.disabled,\n      ReadOnly: this.readonly,\n      SelectType: this.multiple ? 'multi' : 'single',\n      DefaultNumberOfSelectedItems: this._selectedOptionsOnInit.length,\n      NumberOfSelectedItems: this.selectedOptions.length,\n      // DynamicEntry: boolean,\n      FieldSize: this.size\n    });\n  }\n\n  /**\n   * Select all filtered options\n   */\n  selectAllOptions(): void {\n    // Collect FILTERED ENABLED options\n    const filteredEnabledOptions = this.flattenFilteredIndexedOptions\n      .filter(optionToSelect => !this.disabledOptionResolver(optionToSelect.option))\n      .map(indexedOption => indexedOption.option);\n\n    // Union selected options with filtered ones\n    this.setModel(union(this.selectedOptions, filteredEnabledOptions));\n\n    this._moveFocusToPopup();\n\n    this._adaptRadarService.sendCustomEventForAllProviders(AdaptRadarAngularCustomEventName.AdaptRxSelect, {\n      GroupName: this.adaptRadarGroupName,\n      EventType: AdaptRadarAngularCustomEventType.Click,\n      Label: this.label,\n      Target: 'selectAll',\n      DefaultNumberOfSelectedItems: this._selectedOptionsOnInit.length,\n      NumberOfSelectedItems: this.selectedOptions.length,\n    });\n  }\n\n  /**\n   * Deselect all filtered options\n   */\n  deselectAllOptions(moveFocusToPopup: boolean = true): void {\n    if (this.selectedOptions) {\n      const filteredSelectedOptions = new Map<string, RxSelectOption>();\n\n      this.flattenFilteredIndexedOptions.forEach(filteredIndexedOption => {\n        if (!this.disabledOptionResolver(filteredIndexedOption.option) && this.selectedOptionsMap.has(this._stringifyObject(filteredIndexedOption.option))) {\n          filteredSelectedOptions.set(this._stringifyObject(filteredIndexedOption.option), filteredIndexedOption.option);\n        }\n      });\n\n      this.setModel(this.selectedOptions.filter(selectedOption => !filteredSelectedOptions.has(this._stringifyObject(selectedOption))));\n    }\n\n    if (moveFocusToPopup) {\n      this._moveFocusToPopup();\n    }\n  }\n\n  /**\n   * Set model and update title\n   */\n  setModel(options: RxSelectOption[]): void {\n    let defaultPrevented = false;\n\n    this.onSelectionChange.emit({\n      options: options,\n      preventDefault: () => {\n        defaultPrevented = true;\n      }\n    });\n\n    if (!defaultPrevented) {\n      this.selectedOptions = options;\n\n      this._onChange(this.selectedOptions);\n      this._updateTitle();\n    }\n\n    // Mark as touched if inline mode\n    if (this.inline) {\n      this._onTouched();\n    }\n  }\n\n  /**\n   * Invoke passed loadMoreCallback\n   */\n  loadMoreItems(): void {\n    if (this.loadMoreInProgress) {\n      return;\n    }\n\n    if (this.loadMoreCallback) {\n      this.loadMoreCallback();\n    } else {\n      this._pageNumber++;\n      this._blurLoadMoreButton();\n    }\n\n    this._adaptRadarService.sendCustomEventForAllProviders(AdaptRadarAngularCustomEventName.AdaptRxSelect, {\n      GroupName: this.adaptRadarGroupName,\n      EventType: AdaptRadarAngularCustomEventType.Click,\n      Label: this.label,\n      Target: 'loadMore',\n      DefaultNumberOfSelectedItems: this._selectedOptionsOnInit.length,\n      NumberOfSelectedItems: this.selectedOptions.length,\n    });\n  }\n\n  /**\n   * Check if the select button tooltip should be shown\n   */\n  checkIfTooltipNeeded(): void {\n    const hasOverflow = this.titleRef && (this.titleRef.nativeElement.offsetWidth < this.titleRef.nativeElement.scrollWidth);\n\n    this.titleTooltip = hasOverflow ? this.titleFormatter(this.selectedOptions) : null;\n  }\n\n  popupMenuKeydown(event: KeyboardEvent, popupMenuElement: HTMLElement): void {\n    if (getEventKeyCode(event) === TAB) {\n      const menuFocusableElements = getFocusableElements(popupMenuElement);\n\n      if (event.shiftKey) {\n        if (document.activeElement === menuFocusableElements[0]) {\n          this.popup.close();\n        }\n      } else {\n        if (document.activeElement === menuFocusableElements[menuFocusableElements.length - 1]) {\n          this.popup.close();\n        }\n      }\n    }\n  }\n\n  isGroupView(indexedOptions: (RxSelectIndexedOption | RxSelectIndexedOptionsGroup)[]): boolean {\n    return indexedOptions.some(indexedOption => (indexedOption as RxSelectIndexedOptionsGroup).children?.length > 0);\n  }\n\n  /**\n   * ControlValueAccessor item implementation\n   */\n  writeValue(value: RxSelectOption[]): void {\n    if (Array.isArray(value)) {\n      this.selectedOptions = value;\n      this._updateTitle();\n    } else {\n      this.selectedOptions = [];\n    }\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  showNoneOption(): boolean {\n    return !!(this.options?.length || this.selectedOptions?.length) && this.emptyOption && !this.filterValue;\n  }\n\n  // Need to calculate list box height because <cdk-virtual-scroll-viewport> has absolute position\n  // and there is no way to calculate height with CSS\n  getListBoxHeight(): string {\n    if (this.isMobile) {\n      return '100%';\n    }\n\n    const controlsContainerHeight: number = this.selectControlsContainer?.nativeElement?.offsetHeight ?? 0;\n    const loadMoreButtonHeight: number = this.loadMoreButtonRef?.nativeElement?.offsetHeight ?? 0;\n    const noneButtonHeight: number = this.noneButtonRef?.nativeElement?.offsetHeight ?? 0;\n\n    const popupMaxHeight: number = isNil(this.popupMaxHeight)\n      ? this.DEFAULT_POPUP_MAX_HEIGHT\n      : typeof this.popupMaxHeight === 'string' ? parseFloat(this.popupMaxHeight) : this.popupMaxHeight;\n\n    const height: number = this.displayedOptionsCount * this.virtualScrollItemSize + loadMoreButtonHeight + noneButtonHeight;\n\n    return `${(height + controlsContainerHeight >= popupMaxHeight ? popupMaxHeight - controlsContainerHeight : height)}px`;\n  }\n\n  /**\n   * Implementation from the base class\n   * Focus the native element if [autofocus] == true\n   */\n  protected _focusNativeElement(): void {\n    if (this.inline) {\n      this._moveFocusToPopup();\n    } else {\n      this.selectButtonRef?.nativeElement.focus();\n    }\n  }\n\n  private _recreateSelectedOptionsMap(options: RxSelectOption[]): void {\n    // Need to recreate Map to create new reference and trigger angular pure pipe\n    this.selectedOptionsMap = new Map<string, RxSelectOption>();\n    options.forEach(option => {\n      /**\n       * Because we need to support setting model which can be a new object that has no reference to objects from \"options\"\n       * we need to create uniq key by creating a string from option.\n       * This string will be used to compare is \"option\" exist in selectedOptionsMap\n       */\n      this.selectedOptionsMap.set(this._stringifyObject(option), option);\n    });\n  }\n\n  private _stringifyObject(option: RxSelectOption): string {\n    return isObject(option) ? JSON.stringify(option).trim() : option;\n  }\n\n  /**\n   * Update title value\n   */\n  private _updateTitle(): void {\n    this.title = this.titleFormatter(this.selectedOptions);\n  }\n\n  /**\n   * Default title formatter\n   */\n  private _defaultTitleFormatter(): string {\n    return this.selectedOptions.length\n      ? this.selectedOptions\n        .filter(option => !isNil(this.optionFormatter(option)))\n        .map((option) => this.optionFormatter(option))\n        .sort()\n        .join(', ')\n      : this.texts.defaultTitle;\n  }\n\n  private _defaultDisabledOptionResolver(option: RxSelectOption): boolean {\n    return !!option.disabled;\n  }\n\n  /**\n   * Update flatten filtered options\n   */\n  private _updateFilteredOptions(): void {\n    const result: (RxSelectIndexedOption | RxSelectIndexedOptionsGroup)[] = [];\n    let index: number = 0;\n    let groupIndex: number = 0;\n\n    this.options.forEach(option => {\n      if (Array.isArray(option.children)) {\n        // If there is an options group, take children options and concat to result with structure saving\n        const group: RxSelectIndexedOptionsGroup = {\n          name: option.name,\n          index: index,\n          groupIndex: groupIndex++,\n          children: []\n        };\n\n        option.children.forEach(childOption => {\n          if (AdaptRxSelectComponent.TestSearchOption(childOption, this.filterValue, this.optionFormatter)) {\n            // group.children.push(childOption);\n            group.children.push({\n              index: index++,\n              option: childOption\n            });\n          }\n        });\n\n        if (group.children.length) {\n          // Push all the group to save group layout in the select popup\n          result.push(group);\n        }\n\n      } else {\n        // If there is an option, add it to result\n        if (AdaptRxSelectComponent.TestSearchOption(option, this.filterValue, this.optionFormatter)) {\n          // result.push(option);\n          result.push({\n            index: index++,\n            option: option\n          });\n        }\n      }\n    });\n\n    this.filteredIndexedOptions = result;\n\n    this.flattenFilteredIndexedOptions = flatMapDeep<RxSelectIndexedOption | RxSelectIndexedOptionsGroup, RxSelectIndexedOption>(this.filteredIndexedOptions, (indexedOption) => {\n      return Array.isArray((indexedOption as RxSelectIndexedOptionsGroup).children)\n        ? (indexedOption as RxSelectIndexedOptionsGroup).children\n        : [indexedOption as RxSelectIndexedOption];\n    });\n\n    if (this.virtualScroll && this.isGroupView(this.filteredIndexedOptions)) {\n      // For the virtual scroll we need to create flatt array from grouped options because CDK Scroll doesn't support nested for loop\n      // https://github.com/angular/components/issues/24008\n      this.flattenFilteredGroupIndexedOptions = flatMapDeep(this.filteredIndexedOptions, (indexedOption) => {\n        return Array.isArray((indexedOption as RxSelectIndexedOptionsGroup).children)\n          ? [indexedOption, ...(indexedOption as RxSelectIndexedOptionsGroup).children]\n          : [indexedOption as RxSelectIndexedOption];\n      }).map((indexedOption, index) => {\n        // Rewrite indexes so the flatt array with groups will have a correct one\n        return {...indexedOption, index};\n      });\n    } else {\n      this.flattenFilteredGroupIndexedOptions = null;\n    }\n  }\n\n  /**\n   * Activate the next option from filtered options list\n   */\n  private _activateNextOption(): boolean {\n    const lastActiveOption = cloneDeep(this.activeOption);\n\n    // Collect FILTERED ENABLED options (only displayed on current page)\n    const filteredEnabledOptions = this.flattenFilteredIndexedOptions\n      .slice(0, this.displayedOptionsCount)\n      .filter(optionToSelect => !this.disabledOptionResolver(optionToSelect.option));\n\n    const defaultFirstOption = this.emptyOption ? null : filteredEnabledOptions[0];\n\n    if (filteredEnabledOptions.length) {\n      if (this.activeOption) {\n        const activeOptionIndex = indexOf(filteredEnabledOptions, this.activeOption);\n        const nextActiveOption = filteredEnabledOptions[activeOptionIndex + 1];\n\n        if (nextActiveOption) {\n          this.activeOption = nextActiveOption;\n        }\n\n      } else if (this.activeOption === null) {\n        this.activeOption = filteredEnabledOptions[0];\n\n      } else {\n        if (this.selectedOptions.length) {\n          this.activeOption = filteredEnabledOptions.find(filteredOption => this.isOptionSelectedPipe.transform(this.selectedOptionsMap, filteredOption));\n        }\n\n        this.activeOption = this.activeOption || defaultFirstOption;\n      }\n\n    } else {\n      this.activeOption = undefined;\n    }\n\n    this._checkActiveDescendant();\n    this._scrollToActiveResultItem();\n\n    return isEqual(this.activeOption, lastActiveOption);\n  }\n\n  /**\n   * Activate the prev result from filtered options list\n   */\n  private _activatePrevOption(): boolean {\n    const lastActiveOption = cloneDeep(this.activeOption);\n\n    // Collect FILTERED ENABLED options\n    const filteredEnabledOptions =\n      this.flattenFilteredIndexedOptions.filter(optionToSelect => !this.disabledOptionResolver(optionToSelect.option));\n\n    const defaultFirstOption = this.emptyOption ? null : filteredEnabledOptions[0];\n\n    if (filteredEnabledOptions.length) {\n      if (this.activeOption) {\n        const activeOptionIndex = indexOf(filteredEnabledOptions, this.activeOption);\n        const nextActiveOption = filteredEnabledOptions[activeOptionIndex - 1];\n\n        this.activeOption = nextActiveOption || defaultFirstOption;\n\n      } else {\n        this.activeOption = defaultFirstOption;\n      }\n\n    } else {\n      this.activeOption = undefined;\n    }\n\n    this._checkActiveDescendant();\n    this._scrollToActiveResultItem();\n\n    return isEqual(this.activeOption, lastActiveOption);\n  }\n\n  /**\n   * Handle active result changed\n   */\n  private _checkActiveDescendant(): void {\n    // Update activeDescendant according to active option\n    this.activeDescendant = this.getOptionId(this.activeOption);\n  }\n\n  /**\n   * Scroll to active result item\n   */\n  private _scrollToActiveResultItem(): void {\n    this._ngZone.onStable.pipe(take(1), takeUntil(this.destroy$)).subscribe(() => {\n      const activeItem: HTMLElement = document.querySelector(`#${this.popupId} .${this.ACTIVE_OPTION_CLASS}`);\n\n      if (activeItem) {\n        activeItem.scrollIntoView({block: 'nearest', inline: 'nearest'});\n      }\n    });\n  }\n\n  /**\n   * Focus the element in the popup according to config\n   */\n  private _moveFocusToPopup(): void {\n    // In PROD mode this.loadingStateBlockRef is undefined\n    // Add extra change detection to prevent fix it\n    // https://github.bmc.com/bmc-ux/adapt-angular/issues/6726\n    SafeCdr.detectChanges(this._changeDetectorRef);\n\n    const fallbackFocusElement = (this.loadingState ? this.loadingStateBlockRef?.nativeElement :\n        (this.enableFilter ? this.searchComponent?.inputRef.nativeElement : this.selectOptionsListRef?.nativeElement))\n      || this.emptyStateElementRef?.nativeElement;\n\n    fallbackFocusElement?.focus();\n  }\n\n  private _getDefaultTexts(translation: KeyValueObject): SelectTexts {\n    return {\n      checkAll: translation['adapt.select.checkAll'],\n      checkAllFilter: translation['adapt.select.checkAllFilter'],\n      uncheckAll: translation['adapt.select.uncheckAll'],\n      uncheckAllFilter: translation['adapt.select.uncheckAllFilter'],\n      filteredTo: translation['adapt.select.filteredTo'],\n      checked: translation['adapt.select.checked'],\n      checkedPlural: translation['adapt.select.checkedPlural'],\n      checkedAll: translation['adapt.select.checkedAll'],\n      searchPlaceholder: translation['adapt.select.searchPlaceholder'],\n      defaultTitle: translation['adapt.select.defaultTitle'],\n      headerText: translation['adapt.select.headerText'],\n      headerTextSingle: translation['adapt.select.headerTextSingle'],\n      notFound: translation['adapt.select.notFound'],\n      requiredText: translation['adapt.common.required'],\n      cancelBtnText: translation['adapt.common.cancel'],\n      doneBtnText: translation['adapt.common.done'],\n      titleMobileText: translation['adapt.select.titleMobileText'],\n      loadingText: translation['adapt.select.loadingText'],\n      emptyOptionText: translation['adapt.select.emptyOptionText'],\n      loadMore: translation['adapt.select.loadMore'],\n      numberOptionsText: translation['adapt.select.numberOptionsText'],\n      emptyStateTitle: translation['adapt.select.emptyStateTitle'],\n      emptyStateDescription: translation['adapt.select.emptyStateDescription'],\n      pressTabToGoToLoadMoreButton: translation['adapt.select.pressTabToGoToLoadMoreButton']\n    };\n  }\n\n  private _checkPopupOnResize(): void {\n    this.popupWidth = `${this.selectButtonRef.nativeElement.offsetWidth}px`;\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  private _blurLoadMoreButton(): void {\n    if (document.activeElement === this.loadMoreButtonRef?.nativeElement) {\n      this.selectOptionsListRef?.nativeElement.focus();\n    }\n  }\n}\n","<adapt-rx-control-label [class.has-danger]=\"hasDangerState\"\n                        [class.has-warning]=\"warningMessage\"\n                        [for]=\"inline ? popupId : id\"\n                        [id]=\"labelId\"\n                        [label]=\"label\"\n                        [subLabel]=\"subLabel\"\n                        [requiredLabel]=\"requiredLabel\"\n                        [showRequiredLabel]=\"required\"\n                        [tooltip]=\"tooltip\"\n                        [testID]=\"testID\"></adapt-rx-control-label>\n\n<ng-container *ngIf=\"inline; then selectInlineTemplateRef; else selectDropdownTemplateRef\"></ng-container>\n\n<adapt-rx-feedback #adaptRxFeedbackRef\n                   [ariaErrorMessage]=\"ariaErrorMessage\"\n                   [errors]=\"ngControl.errors\"\n                   [warningMessage]=\"warningMessage\"\n                   [controlTouched]=\"ngControl.touched\"\n                   (messageAppeared)=\"handleMessageAppeared($event, analyticsComponentName.AdaptRxSelect)\"></adapt-rx-feedback>\n\n<ng-template #defaultOptionContentTemplateRef let-option>\n  <div style=\"white-space: normal; word-break: break-word;\">{{optionFormatter(option)}}</div>\n</ng-template>\n\n<ng-template #optionTemplateRef let-indexedOptionItem>\n  <button type=\"button\"\n          role=\"option\"\n          tabindex=\"-1\"\n          class=\"rx-select__option dropdown-item\"\n          [id]=\"getOptionId(indexedOptionItem)\"\n          [ngClass]=\"[\n            (!multiple && (singleSelectStyle === 'line') && isOptionSelectedPipe.transform(selectedOptionsMap, indexedOptionItem) ? SELECTED_OPTION_CLASS : ''),\n            (isOptionActive(indexedOptionItem) ? ACTIVE_OPTION_CLASS : '')\n          ]\"\n          [attr.aria-selected]=\"selectedOptionsMap | isOptionSelected: indexedOptionItem\"\n          [attr.data-testid]=\"testID + '_item-' + indexedOptionItem.index\"\n          [disabled]=\"disabled || readonly || disabledOptionResolver(indexedOptionItem.option)\"\n          (click)=\"selectOption(indexedOptionItem)\"\n          (mouseenter)=\"markOptionAsActive(indexedOptionItem)\">\n    <div class=\"rx-select__option-marker\"\n         *ngIf=\"multiple || (singleSelectStyle === 'marker')\">\n      <div class=\"checkbox m-0\" *ngIf=\"multiple\">\n        <input type=\"checkbox\"\n               role=\"checkbox\"\n               class=\"checkbox__input\"\n               tabindex=\"-1\"\n               [checked]=\"selectedOptionsMap | isOptionSelected: indexedOptionItem\"\n               [disabled]=\"disabledOptionResolver(indexedOptionItem.option)\"\n               [attr.data-testid]=\"testID + '_item-' + indexedOptionItem.index + '_checkbox'\">\n        <div class=\"checkbox__item\"></div>\n      </div>\n\n      <div class=\"radio m-0\" *ngIf=\"!multiple\">\n        <input type=\"radio\"\n               role=\"radio\"\n               tabindex=\"-1\"\n               [checked]=\"selectedOptionsMap | isOptionSelected: indexedOptionItem\"\n               [disabled]=\"disabledOptionResolver(indexedOptionItem.option)\"\n               [attr.data-testid]=\"testID + '_item-' + indexedOptionItem.index + '_radio'\">\n        <div class=\"radio__item\"></div>\n      </div>\n    </div>\n\n    <div class=\"rx-select__option-content\">\n      <ng-template [ngTemplateOutlet]=\"optionContentTemplate || defaultOptionContentTemplateRef\"\n                   [ngTemplateOutletContext]=\"{$implicit: indexedOptionItem.option}\"></ng-template>\n    </div>\n  </button>\n</ng-template>\n\n<ng-template #optionsListTemplateRef>\n  <div class=\"d-flex flex-column\"\n       #selectOptionsContainerRef\n       *ngIf=\"!loadingState\"\n       [ngStyle]=\"popupStyle\">\n\n    <div #selectControlsContainer>\n      <div class=\"rx-select__search-wrapper\"\n           *ngIf=\"enableFilter && (filterValue || !!options?.length)\"\n           (click)=\"$event.stopPropagation()\">\n        <adapt-rx-search #searchComponent\n                         [adaptRadarDisableEventSending]=\"true\"\n                         [(ngModel)]=\"filterValue\"\n                         [ariaControlsPopupId]=\"popupId\"\n                         [ariaActiveDescendant]=\"activeDescendant\"\n                         [placeholder]=\"texts.searchPlaceholder\"\n                         [autofocus]=\"!inline\"\n                         [testID]=\"testID + '_search'\"\n                         [attr.data-testid]=\"testID + '_search'\"\n                         [disabled]=\"disabled || readonly\"\n                         (ngModelChange)=\"filterValueChangeHandler($event)\"></adapt-rx-search>\n      </div>\n      <div class=\"rx-select__controls\"\n           [ngClass]=\"{'rx-select__controls_vertical-layout' : verticalLayout}\"\n           *ngIf=\"showControls\">\n        <div *ngIf=\"inline || isMobile\" class=\"font-weight-bold m-end-3\">\n          <span *ngIf=\"texts.headerText !== ''\">{{texts.headerText}}</span>\n          <span>\n            ({{flattenFilteredIndexedOptions.length}} {{texts.numberOptionsText}}\n            , {{selectedOptions.length}} {{texts.checked}})\n          </span>\n        </div>\n\n        <div>\n          <div *ngIf=\"!(disabled || readonly)\"\n               class=\"d-flex flex-wrap\"\n               [ngClass]=\"verticalLayout ? 'flex-column' : 'flex-row align-items-center' \">\n            <div #selectCounterContainer>\n              <div class=\"rx-select__filter-status text-tertiary p-end-3\"\n                   *ngIf=\"filterValue\"\n                   [@filterStatusAnimation]>\n                {{texts.filteredTo}} {{flattenFilteredIndexedOptions.length}}\n              </div>\n            </div>\n\n            <div #selectCustomActionsContainer *ngIf=\"!(disabled || readonly) && multiple\">\n              <adapt-custom-actions class=\"flex-wrap\"\n                                    [actions]=\"customActions\"\n                                    [adaptRadarDisableEventSending]=\"true\">\n              </adapt-custom-actions>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"rx-select__options\"\n         role=\"listbox\"\n         #selectOptionsListRef\n         *ngIf=\"displayedOptionsCount > 0 || showNoneOption()\"\n         [id]=\"popupId\"\n         [style.maxHeight]=\"popupMaxHeight\"\n         [attr.tabindex]=\"disabled ? undefined : 0\"\n         [attr.aria-label]=\"showLoadMoreButton ? texts.pressTabToGoToLoadMoreButton : undefined\"\n         [attr.aria-describedby]=\"inline ? ariaDescribedBy : undefined\"\n         [attr.aria-labelledby]=\"inline ? ariaLabelledby : undefined\"\n         [attr.aria-multiselectable]=\"multiple\"\n         [attr.aria-activedescendant]=\"activeDescendant\"\n         (focus)=\"selectBlockFocusHandler()\"\n         (blur)=\"selectBlockBlurHandler()\"\n         (keydown)=\"selectOptionsListKeydownHandler($event)\">\n      <div class=\"rx-select__options-scroll-block\">\n        <ng-container *ngIf=\"!virtualScroll\">\n          <ng-template [ngTemplateOutlet]=\"selectNoneButtonTemplateRef\"></ng-template>\n\n          <ng-template ngFor\n                       let-option\n                       [ngForOf]=\"filteredIndexedOptions\"\n                       [ngForTrackBy]=\"trackByIndexedOption\">\n            <ng-container *ngIf=\"!option.children && option.index < displayedOptionsCount\">\n              <ng-template [ngTemplateOutlet]=\"optionTemplateRef\"\n                           [ngTemplateOutletContext]=\"{$implicit: option}\"></ng-template>\n            </ng-container>\n\n            <ng-container *ngIf=\"option.children && option.index < displayedOptionsCount\">\n              <div role=\"group\"\n                   [attr.aria-labelledby]=\"id + '-group' + option.index\">\n                <div class=\"dropdown-header\"\n                     [attr.id]=\"id + '-group' + option.index\">{{option.name}}</div>\n\n                <ng-template ngFor\n                             let-childOption\n                             [ngForOf]=\"option.children\"\n                             [ngForTrackBy]=\"trackByIndexedOption\">\n                  <ng-container *ngIf=\"childOption.index < displayedOptionsCount\">\n                    <ng-template [ngTemplateOutlet]=\"optionTemplateRef\"\n                                 [ngTemplateOutletContext]=\"{$implicit: childOption}\"></ng-template>\n                  </ng-container>\n                </ng-template>\n              </div>\n            </ng-container>\n          </ng-template>\n        </ng-container>\n\n        <ng-container *ngIf=\"virtualScroll\">\n          <cdk-virtual-scroll-viewport [style.height]=\"getListBoxHeight()\"\n                                       [itemSize]=\"virtualScrollItemSize\"\n                                       [minBufferPx]=\"minBufferPx\"\n                                       [maxBufferPx]=\"maxBufferPx\">\n            <ng-template [ngTemplateOutlet]=\"selectNoneButtonTemplateRef\"></ng-template>\n\n            <ng-container *ngIf=\"filteredIndexedOptions?.length\">\n              <ng-template\n                cdkVirtualFor\n                let-option\n                [cdkVirtualForOf]=\"flattenFilteredGroupIndexedOptions || filteredIndexedOptions | slice:0:displayedOptionsCount\"\n                [cdkVirtualForTemplateCacheSize]=\"virtualScrollTemplateCacheSize\"\n                [cdkVirtualForTrackBy]=\"trackByIndexedOption\">\n                <ng-container *ngIf=\"option.index < displayedOptionsCount\">\n                  <div role=\"group\"\n                       [attr.aria-labelledby]=\"id + '-group' + option.index\">\n                    <div *ngIf=\"option.children\"\n                         class=\"dropdown-header\"\n                         [attr.id]=\"id + '-group' + option.index\">{{option.name}}</div>\n                    <ng-container *ngIf=\"!option.children\">\n                      <ng-template [ngTemplateOutlet]=\"optionTemplateRef\"\n                                   [ngTemplateOutletContext]=\"{$implicit: option}\"></ng-template>\n                    </ng-container>\n                  </div>\n                </ng-container>\n              </ng-template>\n            </ng-container>\n          </cdk-virtual-scroll-viewport>\n        </ng-container>\n\n        <ng-template [ngTemplateOutlet]=\"selectLoadMoreTemplateRef\"></ng-template>\n      </div>\n    </div>\n\n    <!--    Empty state    -->\n    <ng-container *ngIf=\"!loadMoreButton && !loadMoreInProgress\">\n      <ng-container *ngIf=\"filterValue && !flattenFilteredIndexedOptions.length; else emptyStateTemplate\">\n        <div #emptyStateElementRef\n             class=\"rx-select__empty-state-wrapper keyboard-focusable\"\n             role=\"presentation\"\n             tabindex=\"0\">\n          <adapt-empty-state type=\"search\"\n                             [adaptRadarDisableEventSending]=\"true\"\n                             [label]=\"texts.notFound\"\n                             [attr.data-testid]=\"testID + '_empty'\"></adapt-empty-state>\n        </div>\n      </ng-container>\n\n      <ng-template #emptyStateTemplate>\n        <div #emptyStateElementRef\n             *ngIf=\"isEmptyState\"\n             class=\"rx-select__empty-state-wrapper keyboard-focusable\"\n             role=\"presentation\"\n             tabindex=\"0\">\n          <adapt-empty-state type=\"objects\"\n                             [adaptRadarDisableEventSending]=\"true\"\n                             [label]=\"texts.emptyStateTitle\"\n                             [attr.data-testid]=\"testID + '_empty'\"\n                             class=\"d-block mt-2\">\n            <div class=\"empty-info\">\n              <p class=\"text-tertiary\">{{texts.emptyStateDescription}}</p>\n            </div>\n          </adapt-empty-state>\n        </div>\n      </ng-template>\n    </ng-container>\n    <!--    Empty state END    -->\n  </div>\n\n  <div *ngIf=\"loadingState\"\n       #loadingStateBlockRef\n       role=\"status\"\n       tabindex=\"0\"\n       class=\"select-loader-container keyboard-focusable\">\n    <div class=\"loader-container\">\n      <div class=\"loader-section\"></div>\n    </div>\n    <span>{{texts.loadingText}}</span>\n  </div>\n</ng-template>\n\n<ng-template #selectInlineTemplateRef>\n  <div class=\"rx-select__options-wrapper\">\n    <ng-template [ngTemplateOutlet]=\"optionsListTemplateRef\"></ng-template>\n  </div>\n</ng-template>\n\n<ng-template #selectDropdownTemplateRef>\n  <div adaptDropdown\n       [adaptRadarDisableEventSending]=\"true\"\n       *ngIf=\"!inline\"\n       #adaptDropdownDirective=\"adaptDropdown\"\n       [holdFocusInMenu]=\"true\"\n       [restoreFocusAfterClose]=\"true\"\n       [focusNextElementAfterClose]=\"true\"\n       [autoFocusFirst]=\"false\"\n       [placement]=\"placement\"\n       [appendToBody]=\"appendToBody\"\n       [autoClose]=\"'outside'\"\n       [mobileView]=\"mobileViewConfig\"\n       (onOpen)=\"popupOpenChangeHandler(true)\"\n       (onClose)=\"popupOpenChangeHandler(false)\">\n    <button adaptDropdownAnchor\n            type=\"button\"\n            role=\"button\"\n            class=\"dropdown-toggle btn btn-secondary btn-block align-start\"\n            #selectButtonRef\n            [adaptTooltip]=\"titleTooltip\"\n            [adaptRadarDisableEventSending]=\"true\"\n            [placement]=\"'auto'\"\n            [class.btn-sm]=\"size === 'sm'\"\n            [class.btn-lg]=\"size === 'lg'\"\n            [class.disabled]=\"readonly\"\n            [class.dropdown-toggle-up]=\"placement === 'top'\"\n            [class.border-danger]=\"hasDangerState\"\n            [class.border-warning]=\"warningMessage\"\n            [id]=\"id\"\n            [disabled]=\"disabled\"\n            [autofocus]=\"autofocus\"\n            [attr.name]=\"name\"\n            [attr.placeholder]=\"placeholder\"\n            [attr.tabindex]=\"tabIndex\"\n            [attr.data-testid]=\"testID + '_button'\"\n            [attr.aria-disabled]=\"disabled || readonly\"\n            [attr.aria-describedby]=\"ariaDescribedBy\"\n            [attr.aria-label]=\"ariaLabel\"\n            [attr.aria-labelledby]=\"ariaLabelledby\"\n            [attr.aria-required]=\"required\"\n            [attr.aria-invalid]=\"ariaInvalidState\"\n            [attr.aria-errormessage]=\"ariaErrorMessage\"\n            [attr.aria-activedescendant]=\"activeDescendant\"\n            [attr.aria-controls]=\"adaptDropdownDirective.isOpen() ? popupId : null\"\n            [attr.aria-expanded]=\"adaptDropdownDirective.isOpen()\"\n            (click)=\"selectButtonClickHandler($event)\"\n            (focus)=\"focusHandler($event)\"\n            (blur)=\"blurHandler($event)\"\n            (mouseenter)=\"checkIfTooltipNeeded()\"\n            (keydown)=\"selectButtonKeydownHandler($event)\">\n      <div #titleRef class=\"rx-select__search-button-title\">{{title}}</div>\n    </button>\n    <ng-template adaptDropdownMenuTemplate>\n      <div class=\"dropdown-menu h-100\"\n           #popupMenu\n           [class.pt-0]=\"!inline\"\n           [class.dropdown-menu__rx-search-container]=\"enableFilter\"\n           [style.width]=\"popupWidth\"\n           [ngClass]=\"popupClass\"\n           (keydown)=\"popupMenuKeydown($event, popupMenu)\">\n        <ng-template [ngTemplateOutlet]=\"optionsListTemplateRef\"></ng-template>\n      </div>\n    </ng-template>\n  </div>\n</ng-template>\n\n<ng-template #selectNoneButtonTemplateRef>\n  <ng-container *ngIf=\"showNoneOption()\">\n    <button type=\"button\"\n            role=\"option\"\n            tabindex=\"-1\"\n            class=\"rx-select__option dropdown-item\"\n            #noneButtonRef\n            [id]=\"getOptionId(null)\"\n            [attr.data-testid]=\"testID + '-null_item'\"\n            [ngClass]=\"(!selectedOptions.length ? SELECTED_OPTION_CLASS : '') + (isOptionActive(null) ? ' ' + ACTIVE_OPTION_CLASS : '')\"\n            (click)=\"selectEmptyOption()\"\n            (mouseenter)=\"markOptionAsActive(null)\">\n      <i>{{texts.emptyOptionText}}</i>\n    </button>\n  </ng-container>\n</ng-template>\n\n<ng-template #selectLoadMoreTemplateRef>\n  <div *ngIf=\"showLoadMoreButton\" [@heightAnimation]>\n    <button #loadMoreButtonRef\n            class=\"btn btn-link\"\n            type=\"button\"\n            role=\"button\"\n            [class.disabled]=\"loadMoreInProgress\"\n            [adaptInlineLoader]=\"loadMoreInProgress\"\n            [activeText]=\"texts.loadingText\"\n            [attr.data-testid]=\"testID + '-loadMore'\"\n            (click)=\"loadMoreItems()\">\n      {{texts.loadMore}}\n    </button>\n  </div>\n</ng-template>\n"]}