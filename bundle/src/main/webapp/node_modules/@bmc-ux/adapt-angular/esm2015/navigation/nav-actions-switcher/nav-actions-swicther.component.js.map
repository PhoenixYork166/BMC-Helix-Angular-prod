{"version":3,"file":"nav-actions-swicther.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-angular/src/navigation/nav-actions-switcher/nav-actions-swicther.component.ts","../../../../../../libs/adapt-angular/src/navigation/nav-actions-switcher/nav-actions-switcher.component.html"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, Input, ElementRef, ViewChild, OnChanges, AfterViewInit, OnDestroy, SimpleChanges, ChangeDetectionStrategy} from '@angular/core';\nimport {\n    AdaptNavigationSubMenuItem,\n    AdaptSwitcherModel,\n    NavigationAction\n  } from '../navigation.config';\n  import {AdaptDropdownDirective} from '../../dropdown/index';\n  import {ReplaySubject} from 'rxjs';\n  import {takeUntil} from 'rxjs/operators';\n  import {RxSearchTextsModel} from '../../rx/rx-search/index';\n  import {AdaptDeviceDetectionService} from '../../common/device-detection.service';\n\nimport {AdaptRadarAngularService} from '../../common/radar/adapt-radar';\nimport {debounce} from 'lodash-es';\n\nlet _testIdIndex: number = 1;\n\n@Component({\n  selector: 'adapt-nav-actions-switcher',\n  templateUrl: './nav-actions-switcher.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AdaptNavActionsSwictherComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\n\n  @Input() switcherDisplay: boolean;\n\n  @Input() texts: AdaptSwitcherModel;\n\n  @Input() appSwitcherMetaData: NavigationAction;\n\n  @ViewChild('switcherDropdown', {static: false}) switcherDropdown: AdaptDropdownDirective;\n\n  isDesktop: boolean;\n\n  filterValue: string = '';\n\n  filteredItems: AdaptNavigationSubMenuItem[] = [];\n\n  private _defaultTexts: {\n    switcher: {\n      filter?: RxSearchTextsModel;\n      notFoundText?: string;\n    };\n  } = {\n    switcher: {\n      filter: {},\n      notFoundText: ''\n    }\n  };\n\n  onFilteringDebounce: Function = debounce(this.onFiltering.bind(this), 100);\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  @Input() closeAllDropdowns(): void {\n    if (this.switcherDropdown) {\n      this.switcherDropdown.close();\n    }\n  }\n\n  constructor(private el: ElementRef,\n    private _adaptRadarService: AdaptRadarAngularService,\n    private _deviceDetector: AdaptDeviceDetectionService) {\n  }\n\n  ngOnInit(): void {\n    this.isDesktop = this._deviceDetector.deviceDesktop();\n    this.texts = {...this._defaultTexts.switcher, ...this.texts};\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n\n    if (changes.texts) {\n      this.texts = {...this._defaultTexts.switcher, ...this.texts};\n    }\n  }\n\n  ngAfterViewInit(): void {\n    if (this.switcherDropdown) {\n      this.switcherDropdown.onOpen\n        .pipe(takeUntil(this._destroyed$))\n        .subscribe(() => {\n          this.filterValue = '';\n        });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._destroyed$.next(true);\n    this._destroyed$.complete();\n  }\n\n  onFiltering(value: string): void {\n    this.filterValue = value;\n\n    this.filteredItems =\n      // TODO: Refactor this if possible\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      this.appSwitcherMetaData.switcher.allItems.items.filter(function (c: any): any {\n        return c.name.toLowerCase().indexOf(value.toLowerCase()) !== -1;\n      });\n  }\n\n  generateActionItemTestID(item: NavigationAction): string {\n    if (!item.testID) {\n      item.testID = `navigation-action-test-id-${_testIdIndex++}`;\n    }\n\n    return item.testID;\n  }\n\n  trackSwictherData(item: AdaptNavigationSubMenuItem): string {\n    return item.name;\n  }\n\n}\n","<ng-container *ngIf=\"switcherDisplay\">\n  <div adaptDropdown\n       [adaptRadarDisableEventSending]=\"true\"\n       class=\"dropdown switcher-dropdown\"\n       [mobileView]=\"appSwitcherMetaData.dropdownConfig\"\n       #switcherDropdown=\"adaptDropdown\"\n       [placement]=\"'bottom-right'\"\n       [autoClose]=\"'outside'\">\n    <button class=\"a-action btn btn-link {{appSwitcherMetaData.className}} dropdown-toggle action-app-switcher\"\n            type=\"button\"\n            [attr.title]=\"appSwitcherMetaData.name\"\n            [attr.aria-label]=\"appSwitcherMetaData.name\"\n            [attr.data-testid]=\"generateActionItemTestID(appSwitcherMetaData)\"\n            [attr.id]=\"'action_application_switcher_'\"\n            adaptDropdownToggle>\n    </button>\n\n    <ul adaptDropdownMenu\n        class=\"a-dropdown-menu a-dropdown-menu__light dropdown-menu dropdown-menu--right pt-0\"\n        [class.a-dropdown-menu__mobile]=\"!isDesktop\"\n        [attr.ariaLabelledby]=\"'action_application_switcher_'\">\n\n      <adapt-rx-search [size]=\"'sm'\"\n                       [ngModel]=\"filterValue\"\n                       (ngModelChange)=\"onFilteringDebounce($event)\"\n                       [placeholder]=\"texts.filter.placeholder\"\n                       [clearButtonText]=\"texts.filter.btnClearText\"\n                       [label]=\"texts.filter.labelText\"></adapt-rx-search>\n\n      <!-- recent items -->\n      <ng-container *ngIf=\"!filterValue\">\n        <li *ngIf=\"appSwitcherMetaData.header\" class=\"dropdown-header\">{{appSwitcherMetaData.switcher.recentItems.header}}</li>\n\n        <li *ngFor=\"let sub of appSwitcherMetaData.switcher.recentItems.items; last as isLast; trackBy:trackSwictherData\"\n            class=\"a-dropdown__item switcher-dropdown__recent-item\">\n\n          <div *ngIf=\"sub.disabled\" class=\"a-dropdown__link-disabled dropdown-item disabled {{sub.className}}\">\n            {{sub.name}}\n          </div>\n\n          <adapt-nav-action-subitem *ngIf=\"!sub.disabled\"\n                                    [customClass]=\"'text-active'\"\n                                    [item]=\"sub\"\n                                    [actionType]=\"'switcher'\"\n                                    (emitCloseDropdowns)=\"closeAllDropdowns()\"></adapt-nav-action-subitem>\n\n          <div *ngIf=\"isLast\" class=\"dropdown-divider\"></div>\n        </li>\n\n      </ng-container>\n\n      <!-- all items -->\n      <ng-container>\n\n        <li *ngIf=\"appSwitcherMetaData.header\" class=\"dropdown-header\">{{appSwitcherMetaData.switcher.allItems.header}}</li>\n\n        <ng-container *ngFor=\"let sub of appSwitcherMetaData.switcher.allItems.items | navFilterSubItems: filterValue; trackBy:trackSwictherData\">\n          <li class=\"a-dropdown__item\">\n\n            <div *ngIf=\"sub.disabled\" class=\"a-dropdown__link-disabled dropdown-item disabled {{sub.className}}\">\n              {{sub.name}}\n            </div>\n\n            <adapt-nav-action-subitem [item]=\"sub\" *ngIf=\"!sub.disabled\"\n                                      (emitCloseDropdowns)=\"closeAllDropdowns()\"></adapt-nav-action-subitem>\n          </li>\n        </ng-container>\n\n        <li *ngIf=\"filterValue && !filteredItems.length\" class=\"dropdown-header \">{{texts.notFoundText}}</li>\n      </ng-container>\n    </ul>\n\n  </div>\n</ng-container>\n"]}