{"version":3,"file":"adapt-rx-rating-voting.component.js","sourceRoot":"","sources":["../../../../../../../libs/adapt-angular/src/rx/rx-rating/adapt-rx-rating-voting/adapt-rx-rating-voting.component.ts","../../../../../../../libs/adapt-angular/src/rx/rx-rating/adapt-rx-rating-voting/adapt-rx-rating-voting.component.html"],"names":[],"mappings":"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","sourcesContent":["import {Component, ElementRef, EventEmitter, Input, Output} from '@angular/core';\n\nimport {AdaptDeviceDetectionService} from '../../../common/device-detection.service';\nimport {getInteractionSource} from '../../../common/interaction-source';\nimport {Placement} from '../../../common/positioning';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptRadarAngularCustomEventType,\n  AdaptRadarAngularService,\n  AdaptRadarAngularGenericDirective\n} from '../../../common/radar/adapt-radar';\n\nimport {AdaptRxRatingConfigService} from '../adapt-rx-rating-config.service';\nimport {RxRatingVotingType} from '../adapt-rx-rating.types';\n\n@Component({\n  selector: 'adapt-rx-rating-voting',\n  templateUrl: './adapt-rx-rating-voting.component.html'\n})\nexport class AdaptRxRatingVotingComponent extends AdaptRadarAngularGenericDirective {\n  readonly UI_TYPE: typeof RxRatingVotingType = RxRatingVotingType;\n\n  isActive: boolean = false;\n  wasClick: boolean = true;\n  isMobile: boolean = false;\n\n  /**\n   * Voting mode\n   * @docs-default RxRatingVotingType.Star\n   */\n  @Input() type: RxRatingVotingType = RxRatingVotingType.Star;\n\n  /**\n   * Thanks text\n   * @docs-default Thanks!\n   */\n  @Input() thanksText: string;\n\n  /**\n   * Thanks text abbreviation\n   * @docs-default You said\n   */\n  @Input() thanksAbbrMessage: string;\n\n  /**\n   * Tooltip for not RxRatingVotingType.Thanks mode\n   * @docs-default\n   */\n  @Input() tooltip: string;\n\n  /**\n   * Tooltip placement\n   * @docs-default top\n   */\n  @Input() tooltipPlacement: Placement = 'top';\n\n  /**\n   * @docs-default\n   */\n  @Input() testID: string;\n\n  /* eslint-disable @angular-eslint/no-output-on-prefix */\n  /**\n   * An event fired when a user selects a new rating.\n   */\n  @Output() readonly onRateChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  /* eslint-enable @angular-eslint/no-output-on-prefix */\n\n  constructor(rxRatingConfigService: AdaptRxRatingConfigService,\n              protected _adaptRadarService: AdaptRadarAngularService,\n              private _deviceDetectionService: AdaptDeviceDetectionService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptRxRatingVoting);\n\n    this.thanksText = rxRatingConfigService.texts.voting.thanksText;\n    this.thanksAbbrMessage = rxRatingConfigService.texts.voting.thanksAbbrMessage;\n    this.isMobile = this._deviceDetectionService.isMobile();\n  }\n\n  handleClick(event: MouseEvent): void {\n    this.isActive = !this.isActive;\n    this.onRateChange.emit(this.isActive);\n\n    if (this.type === RxRatingVotingType.Thanks) {\n      this.wasClick = false;\n    }\n\n    this._adaptRadarService.sendCustomEventForAllProviders(AdaptRadarAngularCustomEventName.AdaptRxRatingVoting, {\n      GroupName: this.adaptRadarGroupName,\n      EventType: AdaptRadarAngularCustomEventType.Click,\n      Type: this.type,\n      HasTooltip: !!this.tooltip,\n      HasThanksText: !!this.thanksText,\n      RatingValue: this.isActive,\n      SubmitMethod: getInteractionSource(event, this.isMobile)\n    });\n  }\n}\n","<div class=\"a-rating-voting\">\n  <button type=\"button\"\n          *ngIf=\"wasClick\"\n          [ngClass]=\"{\n            'a-rating-voting__btn' : type !== UI_TYPE.Thanks,\n            'btn btn-secondary btn-sm': type === UI_TYPE.Thanks,\n            'is-star-icon' : type === UI_TYPE.Star,\n            'is-active': isActive,\n            'active': type === UI_TYPE.Thanks && isActive}\"\n          [attr.data-testid]=\"testID\"\n          (click)=\"handleClick($event)\">\n\n    <span *ngIf=\"type === UI_TYPE.Thanks\">{{thanksText}}</span>\n\n    <span *ngIf=\"type !== UI_TYPE.Thanks\"\n          class=\"a-rating-voting__icon\"\n          [ngClass]=\" {\n            'd-icon-star': type === UI_TYPE.Star && isActive,\n            'd-icon-star_o': type === UI_TYPE.Star && !isActive,\n            'd-icon-thumb_up_adapt':  type === UI_TYPE.Like && isActive,\n            'd-icon-thumb_up_o_adapt':  type === UI_TYPE.Like && !isActive,\n            'd-icon-flag':  type === UI_TYPE.Flag && isActive,\n            'd-icon-flag_o':  type === UI_TYPE.Flag && !isActive}\"\n          [attr.aria-label]=\"tooltip || ''\"\n          [adaptTooltip]=\"tooltip !== '' ? tooltip : ''\"\n          [adaptRadarDisableEventSending]=\"true\"\n          [placement]=\"tooltipPlacement\">\n    </span>\n  </button>\n\n  <span *ngIf=\"!wasClick\">{{thanksAbbrMessage}} <span class=\"font-weight-semibold\">\"{{thanksText}}\"</span></span>\n</div>\n"]}