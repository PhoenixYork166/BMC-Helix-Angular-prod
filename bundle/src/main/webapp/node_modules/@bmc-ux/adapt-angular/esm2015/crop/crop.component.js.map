{"version":3,"file":"crop.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/crop/crop.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output\n} from '@angular/core';\nimport {DomSanitizer, SafeStyle, SafeUrl} from '@angular/platform-browser';\nimport {transition, trigger, useAnimation} from '@angular/animations';\nimport {Point} from '@angular/cdk/drag-drop';\nimport {BehaviorSubject, Subscription} from 'rxjs';\nimport {map} from 'rxjs/operators';\n\nimport {CropApi, CropToolError, CropToolErrorEvent, CropToolState, Dimensions} from './crop.model';\nimport {GetDragNDrop} from '../common/drag-n-drop';\nimport {isImgTypeValid} from '../common/utilities';\nimport {ANIMATION_NAME} from '../common/animation';\nimport {AdaptTranslateService} from '../common/i18n/index';\nimport {KeyValueObject} from '../common/common.models';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptRadarAngularGenericDirective,\n  AdaptRadarAngularService\n} from '../common/radar/adapt-radar';\n\nexport interface AdaptCropTexts {\n  placeholder?: string;\n  empty?: string;\n  type?: string;\n  size?: string;\n  px?: string;\n}\n\n@Component({\n  selector: 'adapt-crop',\n  template: `\n    <div class=\"adapt-crop--cut-area-result\"\n         [style.width.px]=\"cropArea.width\"\n         [style.height.px]=\"cropArea.height\">\n      <div class=\"adapt-crop--img-wrapper\">\n        <img *ngIf=\"imgURL\"\n             class=\"adapt-crop--img\"\n             [src]=\"imgURL\"\n             [style.left.px]=\"cropImg.pos.x\"\n             [style.top.px]=\"cropImg.pos.y\"\n             [style.width.px]=\"cropImg.dim.width\"\n             [style.height.px]=\"cropImg.dim.height\"\n             (load)=\"onImageLoad($event)\"\n             draggable=\"false\"\n             aria-hidden=\"true\"></div>\n\n      <div class=\"adapt-crop--dim-label\" *ngIf=\"cropAreaLabel\"><i>{{cropArea.width}}</i>{{texts.px}} &#215;\n        <i>{{cropArea.height}}</i>{{texts.px}}\n      </div>\n    </div>\n\n    <div class=\"adapt-crop--cut-area-fade\" [style.background]=\"getOffcutColor\"></div>\n\n    <div class=\"adapt-crop--cut-area-offcut\"\n         [style.width.px]=\"cropArea.width\"\n         [style.height.px]=\"cropArea.height\">\n      <img *ngIf=\"imgURL\"\n           class=\"adapt-crop--img\"\n           [src]=\"imgURL\"\n           [style.left.px]=\"cropImg.pos.x\"\n           [style.top.px]=\"cropImg.pos.y\"\n           [style.width.px]=\"cropImg.dim.width\"\n           [style.height.px]=\"cropImg.dim.height\"\n           draggable=\"false\"\n           aria-hidden=\"true\">\n    </div>\n\n    <div class=\"adapt-crop--overlay-loader\" *ngIf=\"showLoader\" [@fadeOutAnimation]>\n      <div class=\"loader-container\">\n        <div class=\"loader-section\"></div>\n      </div>\n    </div>\n\n    <div class=\"adapt-crop--overlay-placeholder\" *ngIf=\"showPlaceholder\" [@fadeOutAnimation]>{{placeholder}}</div>\n  `,\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[class.adapt-crop]': 'true',\n  },\n  animations: [\n    trigger('fadeOutAnimation', [\n      transition('* => void', [\n          useAnimation(ANIMATION_NAME.opacity, {\n            params: {\n              from: '*',\n              to: '0'\n            }\n          })\n        ]\n      )\n    ])\n  ]\n})\nexport class AdaptCropComponent extends AdaptRadarAngularGenericDirective implements OnInit, OnDestroy {\n  imgURL: SafeUrl;\n  cropArea: Dimensions = {\n    width: 100,\n    height: 100\n  };\n  cropImg: {\n    source: HTMLImageElement;\n    naturalDim: Dimensions;\n    dim: Dimensions;\n    pos: Point;\n    scale: number;\n    fitScale: number;\n    tolerance: Dimensions;\n  } = {\n    source: null,\n    naturalDim: {\n      width: 0,\n      height: 0\n    },\n    dim: {\n      width: 0,\n      height: 0\n    },\n    pos: {\n      x: 0,\n      y: 0\n    },\n    scale: 100,\n    fitScale: 100,\n    tolerance: {\n      width: 0,\n      height: 0\n    }\n  };\n\n  defaultTexts: AdaptCropTexts = {};\n  texts: AdaptCropTexts = {};\n\n  /**\n   * Image for cropping. Can be URL string, base64 string or BehaviorSubject<File>.\n   * Available formats: jpeg, jpg, png, gif, tiff, svg\n   * @docs-default\n   */\n  @Input() image: string | BehaviorSubject<File>;\n\n  /**\n   * Initial cropping image position.\n   * Calculates from left top corner of the cropArea\n   * @docs-default\n   */\n  @Input() initPosition: Point;\n\n  /**\n   * The color of area out of crop\n   * @docs-default rgba(255, 255, 255, .5)\n   */\n  @Input() offcutColor: string = 'rgba(255, 255, 255, .5)';\n\n\n  /**\n   * The text displaying while waiting for file\n   * @docs-default Waiting for an image...\n   */\n  @Input() placeholder: string;\n\n  /**\n   * Label with crop area dimensions\n   * @docs-default false\n   */\n  @Input() cropAreaLabel: boolean = false;\n\n  /**\n   * Additional Crop Tool functional\n   * @docs-default\n   */\n  @Input() cropApi: CropApi;\n\n\n  /**\n   * An event fires on image position/scale change.\n   * Returns new position\n   */\n  @Output() readonly positionChange: EventEmitter<{ x: number; y: number; scale: number }>\n    = new EventEmitter<{ x: number; y: number; scale: number }>();\n\n  /**\n   * An event fires on image cropped.\n   * Returns new image as base64 string\n   */\n  @Output() readonly cropToBase64: EventEmitter<string> = new EventEmitter<string>();\n\n  /**\n   * An event fires on image cropped.\n   * Returns new image as Blob\n   */\n  @Output() readonly cropToFile: EventEmitter<Blob | null> = new EventEmitter<Blob | null>();\n\n  /* eslint-disable @angular-eslint/no-output-native */\n  /**\n   * An event fires on error relative to image source, size, load or crop\n   */\n  @Output() readonly error: EventEmitter<CropToolErrorEvent> = new EventEmitter<CropToolErrorEvent>();\n  /* eslint-enable @angular-eslint/no-output-native */\n\n  private _dragSubscription: Subscription;\n  private _states: typeof CropToolState = CropToolState;\n\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  currentState$: BehaviorSubject<CropToolState> = new BehaviorSubject(this._states.Pending);\n\n  /**\n   * Crop area width\n   * @param v: number\n   * @docs-default 100\n   */\n  @Input() set cropWidth(v: number) {\n    if (v && v >= 0) {\n      this.cropArea.width = v;\n\n      if (this.currentState$.value === this._states.Ready) {\n        this._initImgScale();\n        this._updateImgDim();\n        this._checkImgPos();\n        this._cropImg();\n      }\n    }\n  }\n\n  /**\n   * Crop area height\n   * @param v: number\n   * @docs-default 100\n   */\n  @Input() set cropHeight(v: number) {\n    if (v && v >= 0) {\n      this.cropArea.height = v;\n\n      if (this.currentState$.value === this._states.Ready) {\n        this._initImgScale();\n        this._updateImgDim();\n        this._checkImgPos();\n        this._cropImg();\n      }\n    }\n  }\n\n  /**\n   * Cropping image scale\n   * @param v: number\n   * @docs-default 100\n   */\n  @Input() set scale(v: number) {\n    if (v >= 0 && v <= 100) {\n      this.cropImg.scale = v;\n\n      if (this.currentState$.value === this._states.Ready) {\n        this._updateImgDim();\n        this._checkImgPos();\n        this._cropImg();\n\n        this.positionChange.emit({x: this.cropImg.pos.x, y: this.cropImg.pos.y, scale: this.cropImg.scale});\n      }\n    }\n  }\n\n  // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n  get showPlaceholder(): boolean {\n    return this.currentState$.value === this._states.Pending;\n  }\n\n  get showLoader(): boolean {\n    return this.currentState$.value === this._states.Loading;\n  }\n\n  get getOffcutColor(): SafeStyle {\n    return this._domSanitizer.bypassSecurityTrustStyle(this.offcutColor);\n  }\n\n  constructor(private _elRef: ElementRef,\n              private _domSanitizer: DomSanitizer,\n              private _ngZone: NgZone,\n              private _changeDetectorRef: ChangeDetectorRef,\n              private _ts: AdaptTranslateService,\n              _adaptRadarService: AdaptRadarAngularService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptCrop);\n\n    this.setDefaultTexts(_ts.getCurrentLanguage());\n  }\n\n  ngOnInit(): void {\n    this.texts.placeholder = this.placeholder;\n    this.texts = {...this.defaultTexts, ...this.texts};\n\n    if (this.image) {\n      this._loadImage();\n    } else {\n      this.currentState$.next(this._states.Error);\n      this.error.emit({errCode: CropToolError.Source, errBody: this.texts.empty});\n    }\n\n    if (this.cropApi) {\n      this.cropApi.fitToCropArea = this._fitToCropArea.bind(this);\n      this.cropApi.centerCropImage = this._centerCropImage.bind(this);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this._dragSubscription) {\n      this._dragSubscription.unsubscribe();\n      this._dragSubscription = null;\n    }\n  }\n\n  setDefaultTexts(translation: KeyValueObject): void {\n    this.defaultTexts.placeholder = translation['adapt.crop.placeholder'];\n    this.defaultTexts.empty = translation['adapt.crop.error.empty'];\n    this.defaultTexts.type = translation['adapt.crop.error.type'];\n    this.defaultTexts.size = translation['adapt.crop.error.size'];\n    this.defaultTexts.px = translation['adapt.common.px'];\n  }\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  onImageLoad(event: any): void {\n    this.cropImg.source = event.target;\n    this.cropImg.naturalDim.width = event.target.naturalWidth;\n    this.cropImg.naturalDim.height = event.target.naturalHeight;\n\n    this._initImgScale();\n    this._updateImgDim();\n    this._setInitialImgPos();\n    this._initImgDrag();\n\n    this.currentState$.next(this._states.Ready);\n    this._cropImg();\n  }\n\n  private _loadImage(): void {\n    if (typeof this.image === 'string') {\n      this.currentState$.next(this._states.Loading);\n      this.imgURL = this._domSanitizer.bypassSecurityTrustUrl(this.image);\n    } else {\n      this.image.subscribe(this._loadImageFile.bind(this));\n\n      if (this.image.value) {\n        this._loadImageFile(this.image.value);\n      }\n    }\n  }\n\n  private _loadImageFile(file: File): void {\n    if (!file) {\n      return;\n    }\n\n    if (isImgTypeValid(file.type)) {\n      this.currentState$.next(this._states.Loading);\n\n      const fileReader = new FileReader();\n\n      fileReader.readAsDataURL(file);\n\n      fileReader.onload = (event: ProgressEvent<FileReader>) => {\n        this.imgURL = this._domSanitizer.bypassSecurityTrustUrl(event.target.result as string);\n      };\n\n    } else {\n      this.currentState$.next(this._states.Error);\n      this.error.emit({errCode: CropToolError.Load, errBody: this.texts.type});\n    }\n  }\n\n  private _initImgScale(): void {\n    const maxScaleSize = {\n      width: this.cropImg.naturalDim.width,\n      height: this.cropImg.naturalDim.height\n    };\n    const minScaleSize = {\n      width: 0,\n      height: 0\n    };\n\n    const widthRatio = this.cropArea.width / this.cropImg.naturalDim.width;\n    const heightRatio = this.cropArea.height / this.cropImg.naturalDim.height;\n\n    const sizeError = this.cropImg.naturalDim.width < this.cropArea.width || this.cropImg.naturalDim.height < this.cropArea.height;\n\n\n    if (widthRatio > heightRatio) {\n      minScaleSize.height = this.cropArea.height;\n      minScaleSize.width = this.cropImg.naturalDim.width * (minScaleSize.height / this.cropImg.naturalDim.height);\n\n      if (sizeError) {\n        this.cropImg.naturalDim.width =\n          maxScaleSize.width = this.cropArea.width;\n        this.cropImg.naturalDim.height =\n          maxScaleSize.height = this.cropImg.naturalDim.height * (this.cropImg.naturalDim.width / minScaleSize.width);\n      }\n    } else {\n      minScaleSize.width = this.cropArea.width;\n      minScaleSize.height = this.cropImg.naturalDim.height * (minScaleSize.width / this.cropImg.naturalDim.width);\n\n      if (sizeError) {\n        this.cropImg.naturalDim.height = maxScaleSize.height =\n          this.cropArea.height;\n        this.cropImg.naturalDim.width = maxScaleSize.width =\n          this.cropImg.naturalDim.width * (this.cropImg.naturalDim.height / minScaleSize.height);\n      }\n    }\n\n    this.cropImg.dim.width = maxScaleSize.width;\n    this.cropImg.dim.height = maxScaleSize.height;\n\n    this.cropImg.tolerance.width = (maxScaleSize.width - minScaleSize.width) / 100;\n    this.cropImg.tolerance.height = (maxScaleSize.height - minScaleSize.height) / 100;\n\n    if (sizeError) {\n      this.cropImg.fitScale = 100;\n      this.error.emit({errCode: CropToolError.Size, errBody: this.texts.size});\n    } else {\n      this.cropImg.fitScale = minScaleSize.width < minScaleSize.height ?\n        (this.cropArea.width - minScaleSize.width) / this.cropImg.tolerance.width :\n        (this.cropArea.height - minScaleSize.height) / this.cropImg.tolerance.height;\n    }\n  }\n\n  private _updateImgDim(): void {\n    this.cropImg.dim.width = this.cropImg.naturalDim.width - this.cropImg.tolerance.width * (100 - this.cropImg.scale);\n    this.cropImg.dim.height = this.cropImg.naturalDim.height - this.cropImg.tolerance.height * (100 - this.cropImg.scale);\n  }\n\n  private _setInitialImgPos(): void {\n    if (this.initPosition) {\n      this.cropImg.pos.x = this.initPosition.x;\n      this.cropImg.pos.y = this.initPosition.y;\n    } else {\n      this.cropImg.pos.x = (this.cropArea.width - this.cropImg.dim.width) / 2;\n      this.cropImg.pos.y = (this.cropArea.height - this.cropImg.dim.height) / 2;\n    }\n\n    this._checkImgPos();\n  }\n\n  private _checkImgPos(): void {\n    if (this.cropImg.dim.width < this.cropArea.width) {\n      this.cropImg.pos.x = (this.cropArea.width - this.cropImg.dim.width) / 2;\n    } else {\n      if ((Math.abs(this.cropImg.pos.x) + this.cropArea.width) > this.cropImg.dim.width) {\n        this.cropImg.pos.x = this.cropArea.width - this.cropImg.dim.width;\n      }\n\n      this.cropImg.pos.x = this.cropImg.pos.x <= 0 ? this.cropImg.pos.x : 0;\n    }\n\n    if (this.cropImg.dim.height < this.cropArea.height) {\n      this.cropImg.pos.y = (this.cropArea.height - this.cropImg.dim.height) / 2;\n    } else {\n      if ((Math.abs(this.cropImg.pos.y) + this.cropArea.height) > this.cropImg.dim.height) {\n        this.cropImg.pos.y = this.cropArea.height - this.cropImg.dim.height;\n      }\n\n      this.cropImg.pos.y = this.cropImg.pos.y <= 0 ? this.cropImg.pos.y : 0;\n    }\n  }\n\n  private _initImgDrag(): void {\n    if (this._dragSubscription) {\n      this._dragSubscription.unsubscribe();\n      this._dragSubscription = null;\n    }\n\n    let startMoveCoords: Point;\n    let startImgCoords: Point;\n\n    const dragStart = (c): void => {\n      startMoveCoords = c;\n      startImgCoords = {\n        x: this.cropImg.pos.x,\n        y: this.cropImg.pos.y\n      };\n    };\n\n    const dragEnd = (): void => {\n      this._cropImg();\n    };\n\n    this._dragSubscription = GetDragNDrop(this._elRef.nativeElement, null, null, dragStart, dragEnd)\n      .pipe(map(moveCoords => {\n        return {x: moveCoords.x - startMoveCoords.x, y: moveCoords.y - startMoveCoords.y};\n      }))\n      .subscribe((value) => {\n        const newX = startImgCoords.x + value.x;\n        const newY = startImgCoords.y + value.y;\n\n        if (this.cropImg.dim.width >= this.cropArea.width) {\n          this.cropImg.pos.x =\n            newX <= 0 ? (Math.abs(newX) > this.cropImg.dim.width - this.cropArea.width ?\n              -this.cropImg.dim.width + this.cropArea.width : newX) : 0;\n        } else {\n          this.cropImg.pos.x = (this.cropArea.width - this.cropImg.dim.width) / 2;\n        }\n\n        if (this.cropImg.dim.height >= this.cropArea.height) {\n          this.cropImg.pos.y = newY <= 0 ?\n            (Math.abs(newY) > this.cropImg.dim.height - this.cropArea.height ? -this.cropImg.dim.height + this.cropArea.height : newY) : 0;\n        } else {\n          this.cropImg.pos.y = (this.cropArea.height - this.cropImg.dim.height) / 2;\n        }\n\n        this._changeDetectorRef.detectChanges();\n\n        this.positionChange.emit({x: this.cropImg.pos.x, y: this.cropImg.pos.y, scale: this.cropImg.scale});\n      });\n  }\n\n  private _cropImg(): void {\n    // Resize source image\n    const sourceCanvas = document.createElement('canvas') as HTMLCanvasElement;\n    const sourceContext = sourceCanvas.getContext('2d');\n\n    sourceCanvas.width = this.cropImg.dim.width;\n    sourceCanvas.height = this.cropImg.dim.height;\n    sourceContext.drawImage(this.cropImg.source, 0, 0, this.cropImg.dim.width, this.cropImg.dim.height);\n\n    // Target image portion\n    const cropCanvas = document.createElement('canvas') as HTMLCanvasElement;\n    const cropContext = cropCanvas.getContext('2d');\n\n    cropCanvas.width = this.cropArea.width;\n    cropCanvas.height = this.cropArea.height;\n\n    cropContext.drawImage(sourceCanvas,\n      -this.cropImg.pos.x,\n      -this.cropImg.pos.y,\n      this.cropArea.width,\n      this.cropArea.height,\n      0,\n      0,\n      this.cropArea.width,\n      this.cropArea.height);\n\n    try {\n      const imageBase64 = cropCanvas.toDataURL('image/png');\n\n      new Promise((resolve) => {\n        cropCanvas.toBlob((result: Blob | null) => this._ngZone.run(() => resolve(result)), 'image/png', 1);\n      }).then((result: Blob | null) => {\n          if (result) {\n            this.cropToFile.emit(result);\n          }\n        }\n      );\n\n      this.cropToBase64.emit(imageBase64);\n    } catch (e) {\n      this.error.emit({errCode: CropToolError.Crop, errBody: e});\n    }\n  }\n\n  private _fitToCropArea(): void {\n    if (this.cropImg.scale !== this.cropImg.fitScale) {\n      this.scale = this.cropImg.fitScale;\n    }\n  }\n\n  private _centerCropImage(): void {\n    if (this.currentState$.value !== this._states.Ready) {\n      return;\n    }\n\n    let hasChanges = false;\n\n    if (this.cropImg.dim.width > this.cropArea.width) {\n      const newX = -(this.cropImg.dim.width - this.cropArea.width) / 2;\n\n      if (this.cropImg.pos.x !== newX) {\n        this.cropImg.pos.x = newX;\n        hasChanges = true;\n      }\n    }\n\n    if (this.cropImg.dim.height > this.cropArea.height) {\n      const newY = -(this.cropImg.dim.height - this.cropArea.height) / 2;\n\n      if (this.cropImg.pos.y !== newY) {\n        this.cropImg.pos.y = newY;\n        hasChanges = true;\n      }\n    }\n\n    if (hasChanges) {\n      this._updateImgDim();\n      this._checkImgPos();\n      this._cropImg();\n\n      this.positionChange.emit({x: this.cropImg.pos.x, y: this.cropImg.pos.y, scale: this.cropImg.scale});\n    }\n  }\n}\n"]}