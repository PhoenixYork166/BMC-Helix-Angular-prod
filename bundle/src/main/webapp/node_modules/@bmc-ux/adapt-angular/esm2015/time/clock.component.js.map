{"version":3,"file":"clock.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/time/clock.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\nimport {Point} from '@angular/cdk/drag-drop';\nimport {fromEvent, merge} from 'rxjs';\nimport {flatMap, startWith, takeUntil} from 'rxjs/operators';\n\nexport interface ClockLabel {\n  value: number;\n  uiValue: string;\n}\n\nexport interface ClockFaceLabel extends ClockLabel {\n  angle: number;\n  minAngle: number;\n  maxAngle: number;\n  visible: boolean;\n}\n\n\n@Component({\n  selector: 'adapt-clock',\n  template: `\n      <div #clockEl class=\"a-clock-face-wrapper\" [class.a-clock--disabled]=\"disabled\">\n\n          <div class=\"a-clock-face\" [class.inactive]=\"innerFaceActive\">\n              <div class=\"a-clock-face-tick\"\n                   *ngFor=\"let label of clockFaceLabelsUI\"\n                   [style.transform]=\"'rotate(' + label.angle + 'deg)'\"\n                   [class.active]=\"isClockLabelActive(label)\">\n                  <div class=\"a-clock-face-label\"\n                       [style.transform]=\"'rotate(' + (-label.angle).toString() + 'deg)'\">\n                      <span *ngIf=\"label.visible\">{{label.uiValue}}</span>\n                  </div>\n              </div>\n          </div>\n\n          <div class=\"a-clock-face a-clock-face-inner\" [class.inactive]=\"!innerFaceActive\" *ngIf=\"clockFaceInnerLabelsUI\">\n              <div class=\"a-clock-face-tick\"\n                   *ngFor=\"let label of clockFaceInnerLabelsUI\"\n                   [style.transform]=\"'rotate(' + label.angle + 'deg)'\"\n                   [class.active]=\"isClockLabelActive(label)\">\n                  <div class=\"a-clock-face-label\"\n                       [style.transform]=\"'rotate(' + (-label.angle).toString() + 'deg)'\">\n                      <span *ngIf=\"label.visible\">{{label.uiValue}}</span>\n                  </div>\n              </div>\n          </div>\n\n      </div>\n  `\n})\nexport class ClockComponent implements OnInit, OnDestroy {\n  // Template fields\n  clockFaceLabelsUI: ClockFaceLabel[];\n  clockFaceInnerLabelsUI: ClockFaceLabel[];\n  activeFaceLabel: ClockFaceLabel;\n  innerFaceActive: boolean = false;\n  // Inputs\n\n  @Input() labels: ClockLabel[] =\n    Array(12)\n      .fill(0)\n      .map((x, i) => {\n        return {\n          value: i + 1,\n          uiValue: (i + 1).toString()\n        };\n      });\n  @Input() innerLabels: ClockLabel[];\n  @Input() labelsFilter: (ClockLabel: ClockLabel) => boolean;\n  @Input() innerLabelsFilter: (ClockLabel: ClockLabel) => boolean;\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Input() disabled: any;\n\n  /* eslint-disable-next-line @angular-eslint/no-output-native */\n  @Output() readonly change: EventEmitter<number> = new EventEmitter<number>();\n  @Output() readonly changeEnd: EventEmitter<number> = new EventEmitter<number>();\n\n  // Element refs\n  @ViewChild('clockEl', {static: true}) clockEl: ElementRef<HTMLDivElement>;\n\n  @Input() set initialValue(v: number) {\n    this._initialValue = v;\n\n    if (v !== undefined && this._ready) {\n      this._checkActiveByValue(v);\n    }\n  }\n\n  private _currentAngle: number = 0;\n  private _ready: boolean = false;\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _drag$: any;\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _dragEnd$: any;\n  // Distance from center to edge of inner/outer clock's faces\n  private _clockFaceDistance: {\n    inner: number;\n    outer: number;\n  } = {\n    inner: 90,\n    outer: 125\n  };\n\n  // Private fields\n  private _initialValue: number;\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  static GetXY(event: any): Point {\n    if (event.changedTouches) {\n      return {x: event.changedTouches[0].clientX, y: event.changedTouches[0].clientY};\n    }\n\n    return {x: event.clientX, y: event.clientY};\n  }\n\n  static GetAngle(x1: number, y1: number, x2: number, y2: number): number {\n    const distX = x2 - x1;\n    const distY = y2 - y1;\n\n    // +450 for starting from 0\n    return (Math.atan2(distY, distX) * (180 / Math.PI) + 450) % 360; // return angle in degrees\n  }\n\n  static GetDistance(x1: number, y1: number, x2: number, y2: number): number {\n    const distX = x2 - x1;\n    const distY = y2 - y1;\n\n    return Math.sqrt(distX * distX + distY * distY);\n  }\n\n  ngOnInit(): void {\n    this._initClockFace();\n\n    if (!this.disabled) {\n      this._initDrag();\n    }\n\n    this._ready = true;\n  }\n\n  ngOnDestroy(): void {\n    if (this._drag$) {\n      this._drag$.unsubscribe();\n    }\n\n    if (this._dragEnd$) {\n      this._dragEnd$.unsubscribe();\n    }\n  }\n\n  isClockLabelActive(label: ClockFaceLabel): boolean {\n    return this.activeFaceLabel && (label.value === this.activeFaceLabel.value);\n  }\n\n  private _initClockFace(): void {\n    this.clockFaceLabelsUI = this.labels.map((x, i) => {\n      const angle = 360 / this.labels.length * (i + 1);\n      const variation = 360 / this.labels.length / 2;\n\n      return {\n        value: x.value,\n        uiValue: x.uiValue,\n        angle: angle,\n        minAngle: angle - variation,\n        maxAngle: (angle + variation) % 360 - .0001,\n        visible: this.labelsFilter ? this.labelsFilter(x) : true\n      };\n    });\n\n    if (this.innerLabels) {\n      this.clockFaceInnerLabelsUI = this.innerLabels.map((x, i) => {\n        const angle = 360 / this.innerLabels.length * (i + 1);\n        const variation = 360 / this.innerLabels.length / 2;\n\n        return {\n          value: x.value,\n          uiValue: x.uiValue,\n          angle: angle,\n          minAngle: angle - variation,\n          maxAngle: (angle + variation) % 360 - .0001,\n          visible: this.innerLabelsFilter ? this.innerLabelsFilter(x) : true\n        };\n      });\n    }\n\n    if (this._initialValue || this._initialValue === 0) {\n      this._checkActiveByValue(this._initialValue);\n    }\n  }\n\n  private _initDrag(): void {\n    const _mouseDown$ = fromEvent(this.clockEl.nativeElement, 'mousedown');\n    const _mouseMove$ = fromEvent(this.clockEl.nativeElement, 'mousemove');\n    const _mouseUp$ = fromEvent(this.clockEl.nativeElement, 'mouseup');\n    const _mouseLeave$ = fromEvent(this.clockEl.nativeElement, 'mouseleave');\n\n    const _touchStart$ = fromEvent(this.clockEl.nativeElement, 'touchstart');\n    const _touchMove$ = fromEvent(this.clockEl.nativeElement, 'touchmove');\n    const _touchEnd$ = fromEvent(this.clockEl.nativeElement, 'touchend');\n    const _touchLeave$ = fromEvent(this.clockEl.nativeElement, 'touchleave');\n\n    const start$ = merge(_mouseDown$, _touchStart$);\n    const move$ = merge(_mouseMove$, _touchMove$);\n    const end$ = merge(_mouseUp$, _touchEnd$);\n    const forceEnd$ = merge(_mouseLeave$, _touchLeave$);\n\n    const drag$ = start$.pipe(flatMap(event => move$.pipe(startWith(event), takeUntil(end$), takeUntil(forceEnd$))));\n\n    this._drag$ = drag$.subscribe(this._onDrag.bind(this));\n    this._dragEnd$ = end$.subscribe(this._onDragEnd.bind(this));\n  }\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _onDrag(event: any): void {\n    const cursorCoords = ClockComponent.GetXY(event);\n\n    const elRect = this.clockEl.nativeElement.getBoundingClientRect();\n\n    const centerX = elRect.left + elRect.width / 2;\n    const centerY = elRect.top + elRect.height / 2;\n\n    this._currentAngle = ClockComponent.GetAngle(centerX, centerY, cursorCoords.x, cursorCoords.y);\n    const currentDistance = ClockComponent.GetDistance(centerX, centerY, cursorCoords.x, cursorCoords.y);\n\n    this.innerFaceActive = this.clockFaceInnerLabelsUI && currentDistance < this._clockFaceDistance.inner;\n\n    this._checkActiveByAngle();\n\n    if (event.cancelable) {\n      event.preventDefault(); // to prevent touch events for 'document'\n    }\n  }\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _onDragEnd(): void {\n    this.changeEnd.emit(this.activeFaceLabel.value);\n  }\n\n  private _checkActiveByAngle(): void {\n    const temp = (this.innerFaceActive ? this.clockFaceInnerLabelsUI : this.clockFaceLabelsUI)\n      .filter(x => {\n        const cond1 = this._currentAngle >= x.minAngle && this._currentAngle < x.maxAngle;\n        const cond2 = x.minAngle > x.maxAngle;\n\n        return cond1 || cond2;\n      });\n\n    if (!temp.length) {\n      return;\n    }\n\n    if (!this.activeFaceLabel || !(this.activeFaceLabel.value === temp[0].value)) {\n      this.activeFaceLabel = temp[0];\n      this.change.emit(this.activeFaceLabel.value);\n    }\n  }\n\n  private _checkActiveByValue(v: number): void {\n    if (this.activeFaceLabel && (this.activeFaceLabel.value === v)) {\n      return;\n    }\n\n    let newVal: ClockFaceLabel;\n\n    let tempA = this.clockFaceLabelsUI.filter(clockFaceVal => {\n      return clockFaceVal.value === v;\n    });\n\n    if (tempA.length) {\n      this.innerFaceActive = false;\n      newVal = tempA[0];\n    } else if (this.clockFaceInnerLabelsUI) {\n      tempA = this.clockFaceInnerLabelsUI.filter(clockFaceVal => {\n        return clockFaceVal.value === v;\n      });\n\n      if (tempA.length) {\n        this.innerFaceActive = true;\n        newVal = tempA[0];\n      }\n    }\n\n    if (newVal) {\n      this.activeFaceLabel = newVal;\n    }\n  }\n}\n"]}