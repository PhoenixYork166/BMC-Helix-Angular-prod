{"version":3,"file":"toast.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/toast/toast.component.ts","../../../../../libs/adapt-angular/src/toast/toast.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {NavigationStart, Router, RouterEvent} from '@angular/router';\nimport {animateChild, query, transition, trigger} from '@angular/animations';\nimport {Toast} from 'primeng/toast';\nimport {ReplaySubject} from 'rxjs';\nimport {take, takeUntil} from 'rxjs/operators';\nimport {isArray} from 'lodash-es';\n\nimport {AdaptTranslateService} from '../common/i18n/index';\nimport {AdaptMessageService} from './toast-message.service';\nimport {AdaptMessage} from './toast.model';\nimport {ToastPlacement} from '../common/positioning';\nimport {AdaptRadarAngularCustomEventName, AdaptRadarAngularService} from '../common/radar/adapt-radar';\n\nlet nextUniqueId: number = 0;\n\n@Component({\n  selector: 'adapt-toast',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[class.a-toast-wrapper]': 'true',\n    '[class.is-top-right]': 'placement === \"top-right\"',\n    '[class.is-top-left]': 'placement === \"top-left\"',\n    '[class.is-top-center]': 'placement === \"top-center\"',\n    '[attr.tabindex]': 'tabindex',\n    '[attr.role]': '\"alert\"',\n    '[attr.aria-labelledby]': 'ariaLabelledby',\n    '[id]': 'inputId'\n  },\n  styles: [`\n    .a-toast {\n      transition: none !important;\n    }\n\n    .a-toast__summary {\n      font-size: .9375rem;\n      margin-bottom: 10px;\n      font-weight: 600;\n    }\n  `],\n  templateUrl: './toast.component.html',\n  encapsulation: ViewEncapsulation.None,\n  animations: [\n    trigger('toastAnimation', [\n      transition(':enter, :leave', [\n        query('@*', animateChild())\n      ])\n    ])\n  ]\n})\n\nexport class AdaptToastComponent extends Toast implements OnInit, AfterViewInit, OnDestroy {\n  isMobile: boolean = false;\n  /**\n   * z-index value for Toast component\n   */\n  zIndex: number = 100;\n  ellipsis: string;\n\n  /**\n   * An unique id for toast\n   */\n  _uniqueId: string = `adapt-toast-${++nextUniqueId}`;\n\n  @ViewChild('container', {static: false}) containerViewChild: ElementRef;\n\n  /**\n   * Link in the bottom which run event \"linkClick\"\n   * @docs-default null\n   */\n  @Input() link: string;\n\n  /**\n   * When specified, the toast will be attached to the body.\n   * @docs-default false\n   */\n  @Input() appendToBody: boolean = false;\n  @Input('aria-label') ariaLabel: string;\n  @Input('aria-labelledby') ariaLabelledby: string | null = null;\n\n  @Input() tabindex: number = -1;\n\n  // to align with other components:\n  @Input() testID: string = this._uniqueId;\n\n  /**\n   * A unique id for the toast. If none is supplied, it will be auto-generated.\n   * @docs-default adapt-toast-${++nextUniqueId}\n   */\n  @Input() id: string = this._uniqueId;\n\n  get inputId(): string {\n    return `${this.id || this._uniqueId}-unique`;\n  }\n\n  /**\n   * Define the placement of toast component\n   * @returns string\n   * @docs-default 'top-right'\n   */\n  @Input()\n  get placement(): ToastPlacement {\n    return this._placement;\n  }\n\n  set placement(value: ToastPlacement) {\n    this._placement = value;\n  }\n\n  @Input() adaptRadarDisableEventSending: boolean = false;\n\n  /**\n   * Output which handle link click\n   * Changed type from `EventEmitter<AdaptMessage>`\n   * @since v10.14.0\n   */\n  @Output() readonly linkClick: EventEmitter<AdaptMessage> = new EventEmitter<AdaptMessage>();\n\n  /* eslint-disable @angular-eslint/no-output-on-prefix */\n  /**\n   * Event when component animation has ended after component closing\n   * Changed type from `EventEmitter<AdaptMessage>`\n   * @since v10.14.0\n   */\n  @Output() readonly onAnimationEnd: EventEmitter<AdaptMessage> = new EventEmitter<AdaptMessage>();\n  /* eslint-enable @angular-eslint/no-output-on-prefix */\n\n  /**\n   * by default the placement is 'top-right'\n   */\n  private _placement: ToastPlacement = 'top-right';\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  private _elementIntersectObserver: IntersectionObserver;\n\n  constructor(public adaptMessageService: AdaptMessageService,\n              private _renderer: Renderer2,\n              private _el: ElementRef,\n              private _ngZone: NgZone,\n              private _cd: ChangeDetectorRef,\n              private ts: AdaptTranslateService,\n              @Optional() private _router: Router,\n              private _adaptRadarService: AdaptRadarAngularService) {\n    super(adaptMessageService, _cd);\n    this.ariaLabel = ts.getCurrentLanguage()['adapt.toast.close'];\n    this.ellipsis = ts.getCurrentLanguage()['adapt.common.ellipsis'];\n  }\n\n  ngOnInit(): void {\n    this.messageSubscription = this.adaptMessageService.messageObserver.subscribe(messages => {\n      if (messages) {\n        const _messages = (isArray(messages) ? messages : [messages]) as AdaptMessage[];\n\n        _messages.forEach(message => {\n          if (this.link && !message.link) {\n            message.link = this.link;\n          }\n\n          if (this.canAdd(message)) {\n            this.add([message]);\n          }\n        });\n      }\n    });\n\n    this.clearSubscription = this.adaptMessageService.clearObserver.subscribe(key => {\n      if (key) {\n        if (this.key === key) {\n          this.messages = null;\n        }\n      } else {\n        this.messages = null;\n      }\n\n    });\n\n    this._ngZone.onStable\n      .pipe(takeUntil(this._destroyed$), take(1))\n      .subscribe(() => this._attachToBody());\n\n    if (this._router && this.appendToBody) {\n      this._router.events\n        .pipe(takeUntil(this._destroyed$))\n        .subscribe((e: RouterEvent) => {\n          if (e instanceof NavigationStart) {\n            this._detachFromBody();\n          }\n        });\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this._elementIntersectObserver = this._adaptRadarService.subscribeOnElementIntersect(this.adaptRadarDisableEventSending, this._el, AdaptRadarAngularCustomEventName.AdaptToast);\n  }\n\n  ngOnDestroy(): void {\n    if (this._elementIntersectObserver) {\n      this._elementIntersectObserver.disconnect();\n      this._elementIntersectObserver = null;\n    }\n\n    this._destroyed$.next(true);\n    this._destroyed$.complete();\n  }\n\n  onLinkClick(message: AdaptMessage): void {\n    this.linkClick.next(message);\n  }\n\n  animationEnd(message: AdaptMessage): void {\n    this.onAnimationEnd.emit(message);\n  }\n\n  private _attachToBody(): void {\n    if (this.appendToBody && this._el) {\n      this._renderer.appendChild(document.body, this._el.nativeElement);\n    }\n  }\n\n  private _detachFromBody(): void {\n    if (this._el) {\n      this._renderer.removeChild(document.body, this._el.nativeElement);\n    }\n  }\n}\n","<div #container>\n  <adapt-toast-item\n    *ngFor=\"let msg of messages; let i=index\"\n    [message]=\"msg\"\n    [index]=\"i\"\n    [zIndex]=\"zIndex\"\n    [placement]=\"placement\"\n    [link]=\"link\"\n    [ariaLabel]=\"ariaLabel\"\n    @toastAnimation\n    (@toastAnimation.start)=\"onAnimationStart($event)\"\n    (onClose)=\"onMessageClose($event)\"\n    (linkClick)=\"onLinkClick($event)\"\n    (onAnimationEnd)=\"animationEnd($event)\"\n    [attr.data-testid]=\"testID + '_msg_' + i\"></adapt-toast-item>\n</div>\n"]}