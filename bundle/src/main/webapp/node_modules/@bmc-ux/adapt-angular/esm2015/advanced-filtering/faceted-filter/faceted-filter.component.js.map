{"version":3,"file":"faceted-filter.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-angular/src/advanced-filtering/faceted-filter/faceted-filter.component.ts","../../../../../../libs/adapt-angular/src/advanced-filtering/faceted-filter/faceted-filter.component.html"],"names":[],"mappings":"AAAA,OAAO,EAEL,iBAAiB,EACjB,SAAS,EACT,UAAU,EACV,YAAY,EACZ,KAAK,EACL,MAAM,EAGN,MAAM,EACN,SAAS,EACT,iBAAiB,EAClB,MAAM,eAAe,CAAC;AACvB,OAAO,EAAC,GAAG,EAAC,MAAM,uBAAuB,CAAC;AAC1C,OAAO,EAAC,cAAc,EAAE,OAAO,EAAC,MAAM,MAAM,CAAC;AAC7C,OAAO,EAAC,IAAI,EAAE,SAAS,EAAE,YAAY,EAAC,MAAM,gBAAgB,CAAC;AAC7D,OAAO,EAAC,OAAO,EAAC,MAAM,WAAW,CAAC;AAElC,OAAO,EAAC,2BAA2B,EAAC,MAAM,uCAAuC,CAAC;AAClF,OAAO,EAAC,qBAAqB,EAAC,MAAM,yBAAyB,CAAC;AAE9D,OAAO,EAAC,aAAa,EAAC,MAAM,oCAAoC,CAAC;AACjE,OAAO,EAAC,OAAO,EAAC,MAAM,uBAAuB,CAAC;AAC9C,OAAO,EAAC,QAAQ,EAAE,YAAY,EAAC,MAAM,wBAAwB,CAAC;AAG9D,OAAO,EAAC,eAAe,EAAC,MAAM,wBAAwB,CAAC;AACvD,OAAO,EAAC,oBAAoB,EAAC,MAAM,oBAAoB,CAAC;AACxD,OAAO,EAAC,gCAAgC,EAAE,wBAAwB,EAAC,MAAM,gCAAgC,CAAC;AAE1G,OAAO,EAAY,QAAQ,EAAE,QAAQ,EAAC,MAAM,uBAAuB,CAAC;AAEpE,OAAO,EAAC,mBAAmB,EAAC,MAAM,gBAAgB,CAAC;;;;;;;;;;;;;;;;;ICUrC,sCAEwD;;;;IADvC,sCAAqB,4BAAA;;;IAEtC,6BAAoC;IAAA,YAAc;IAAA,0BAAe;;;IAA7B,eAAc;IAAd,mCAAc;;;IAHlD,gCAAA;IAAA,kIAEwD;IACxD,gCAAA;IAAA,4HAAiE;IACjE,gCAAA;IAAA,gCAA6C;IAC3C,YACF;IAAA,iBAAO;IACT,8BAAA;;;;IAPoB,eAAkB;IAAlB,0CAAkB;IAGrB,eAAmB;IAAnB,2CAAmB;IAEhC,eACF;IADE,uGACF;;;;IA1BR,wBAAA;IAAA,iCAGgF;IAA3E,2SAA0E;IAC7E,0BAAA;IAAA,+BAA+C;IAC7C,4BAAA;IAAA,sCAaoD;IALxC,sPAA6C,8NAAA;IAMvD,8BAAA;IAAA,4GAQc;IAChB,4BAAA;IAAA,iBAAa;IACf,2BAAA;IAAA,iBAAM;IACR,yBAAA;IAAA,iBAAM;IACR,uBAAA;;;IA7BO,eAAyD;IAAzD,yEAAyD;IAG9C,eAAmB;IAAnB,wCAAmB,+BAAA,wBAAA,6BAAA,iCAAA,iCAAA,uCAAA,yBAAA,2CAAA,+CAAA;IAUnB,4CAA2B;;;;IAmB/C,iDAOoD;IADlD,2OAA8B,4PAAA;IAEhC,oBAAA;IAAA,iBAAoB;;;IALlB,wFAAwE;IACxE,8CAAyB,uBAAA;;ADb7B,MAAM,OAAO,2BAA4B,SAAQ,mBAAuC;IAiFtF,YAAoB,iBAAwC,EACxC,gBAA6C,EAC7C,OAAe,EACf,eAAkC,EAClC,cAA6B,EACrC,kBAA4C,EAC5C,KAA8B;QACxC,KAAK,CAAC,iBAAiB,EAAE,kBAAkB,EAAE,KAAK,EAAE,gCAAgC,CAAC,kBAAkB,CAAC,CAAC;QAPvF,sBAAiB,GAAjB,iBAAiB,CAAuB;QACxC,qBAAgB,GAAhB,gBAAgB,CAA6B;QAC7C,YAAO,GAAP,OAAO,CAAQ;QACf,oBAAe,GAAf,eAAe,CAAmB;QAClC,mBAAc,GAAd,cAAc,CAAe;QAlDxC,aAAQ,GAAY,KAAK,CAAC;QAC1B,iBAAY,GAAY,KAAK,CAAC;QAC9B,gBAAW,GAAc,EAAE,CAAC;QAErC;;;;WAIG;QACM,oBAAe,GAAY,IAAI,CAAC;QAEzC;;;;WAIG;QACM,sBAAiB,GAAY,IAAI,CAAC;QAE3C;;WAEG;QACM,mBAAc,GAAY,KAAK,CAAC;QAEtB,4BAAuB,GAA0C,IAAI,YAAY,EAA2B,CAAC;QAC7G,0BAAqB,GAAwC,IAAI,YAAY,EAAyB,CAAC;QAQ1H,qBAAgB,GAAa,QAAQ,CAAC,IAAI,CAAC;QAC3C,qBAAgB,GAAa,QAAQ,CAAC,IAAI,CAAC;QAC3C,cAAS,GAA4B,EAAE,CAAC;QACxC,sBAAiB,GAA4B,EAAE,CAAC;QAChD,qBAAgB,GAA+B,EAAE,CAAC;QAClD,gBAAW,GAAW,EAAE,CAAC;QACzB,8BAAyB,GAAY,KAAK,CAAC;QAC3C,mCAA8B,GAAW,EAAE,CAAC;QAE5C,yBAAoB,GAAa,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAEtE,mBAAc,GAA0B,EAAE,CAAC;QAC3C,qBAAgB,GAA0B,EAAE,CAAC;QAWnD,IAAI,CAAC,WAAW,GAAG;YACjB,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,EAAE,CAAC,gCAAgC,CAAC;SACjG,CAAC;IACJ,CAAC;IA5FD,IACI,aAAa,CAAC,KAA4B;QAC5C,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;IACzD,CAAC;IAED,IAAI,aAAa;QACf,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED,IACI,eAAe,CAAC,KAA4B;QAC9C,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,uCAAuC,EAAE,EAAE,KAAK,CAAC,CAAC;IACnF,CAAC;IAED,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED,IAAI,kBAAkB;QACpB,OAAO;YACL,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,0BAA0B;YAC5C,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,UAAU,EAAE,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,YAAY;SAC/C,CAAC;IACJ,CAAC;IAED,IAAI,mBAAmB;QACrB,OAAO,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,yBAAyB,IAAI,IAAI,CAAC,8BAA8B;YAC3F,CAAC,CAAC,IAAI,CAAC,8BAA8B;YACrC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,0BAA0B,CAAC;IAC5C,CAAC;IA8DD,QAAQ;QACN,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE;YACvD,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,uCAAuC,EAAE,EAAE,KAAK,CAAC,CAAC;SAClF;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,CAAC;IACvD,CAAC;IAED,eAAe;QACb,KAAK,CAAC,eAAe,EAAE,CAAC;QAExB,MAAM,OAAO,GAAG,IAAI,OAAO,EAAE,CAAC;QAE9B,OAAO;aACJ,IAAI,CACH,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,EAC3B,YAAY,CAAC,GAAG,EAAE,cAAc,EAAE,EAAC,QAAQ,EAAE,IAAI,EAAC,CAAC,CACpD;aACA,SAAS,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACxC,CAAC,CAAC,CAAC;QAEL,IAAI,CAAC,cAAc,CAAC,sBAAsB,CAAC,IAAI,CAAC,sBAAsB,CAAC,aAAa,EAAE,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IACpH,CAAC;IAED,WAAW;;QACT,KAAK,CAAC,WAAW,EAAE,CAAC;QAEpB,IAAI,MAAA,IAAI,CAAC,sBAAsB,0CAAE,aAAa,EAAE;YAC9C,IAAI,CAAC,cAAc,CAAC,yBAAyB,CAAC,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC;SAC1F;IACH,CAAC;IAED,eAAe,CAAC,WAA2B;QACzC,IAAI,CAAC,YAAY,CAAC,0BAA0B,GAAG,WAAW,CAAC,gDAAgD,CAAC,CAAC;QAC7G,IAAI,CAAC,YAAY,CAAC,qCAAqC,GAAG,WAAW,CAAC,2DAA2D,CAAC,CAAC;QACnI,IAAI,CAAC,YAAY,CAAC,iBAAiB,GAAG,WAAW,CAAC,uCAAuC,CAAC,CAAC;QAC3F,IAAI,CAAC,YAAY,CAAC,gBAAgB,GAAG,WAAW,CAAC,oBAAoB,CAAC,CAAC;QACvE,IAAI,CAAC,YAAY,CAAC,kBAAkB,GAAG,WAAW,CAAC,wCAAwC,CAAC,CAAC;QAC7F,IAAI,CAAC,YAAY,CAAC,uBAAuB,GAAG,WAAW,CAAC,0DAA0D,CAAC,CAAC;IACtH,CAAC;IAED,iBAAiB,CAAC,iBAA0C;QAC1D,IAAI,CAAC,oBAAoB,CAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC;IACrD,CAAC;IAED,oBAAoB,CAAC,iBAA0C,EAAE,qBAA8B;QAC7F,IAAI,CAAC,iBAAiB,GAAG,iBAAiB,IAAI,EAAE,CAAC;QACjD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC;QACjD,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAE1D,IAAI,qBAAqB,EAAE;YACzB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,uCAAuC,EAAE,CAAC;YACtE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACvD;IACH,CAAC;IAED,sBAAsB,CAAC,IAA2B;QAChD,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;YACnE,OAAO,EAAE,CAAC;SACX;QAED,MAAM,kBAAkB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,SAAS,EAAE,EAAE;YACjE,OAAO,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,GAAG,KAAK,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;QACzG,CAAC,EAAE,CAAC,CAAC,CAAC;QAEN,OAAO,kBAAkB,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,kBAAkB;aAC1D,OAAO,CAAC,sBAAsB,EAAE,kBAAkB,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACzE,CAAC;IAED,WAAW;QACT,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,EAAE;YAClC,OAAO,EAAE,CAAC;SACX;QAED,MAAM,iBAAiB,GAAG,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,EAAE;YACpG,OAAO,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;QAClC,CAAC,CAAC,CAAC;QAEH,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,GAAG,CAAC,CAAC,YAAY,EAA4B,EAAE;YAC7F,OAAO;gBACL,IAAI,EAAE,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBAChG,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,MAAM;gBAC9B,KAAK,EAAE,YAAY;aACpB,CAAC;QACJ,CAAC,CAAC,CAAC;QAEH,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,WAAW,CAAC,KAA4B;QACtC,MAAM,GAAG,GAAG,KAAK,CAAC,GAA+B,CAAC;QAClD,MAAM,UAAU,GAAG,GAAG,CAAC,MAAM,CAAC;QAE9B,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YAC7D,OAAO,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,UAAU,KAAK,IAAI,CAAC;QAC/D,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAEV,8BAA8B;QAC9B,UAAU,CAAC,eAAe,GAAG,KAAK,CAAC;IACrC,CAAC;IAED,mBAAmB,CAAC,KAAuC;QACzD,IAAI,CAAC,8BAA8B,GAAG,KAAK,CAAC,gBAAgB,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,qCAAqC,EAAE,KAAK,CAAC,gBAAgB,CAAC,CAAC;QACjK,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACtC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;IAC9C,CAAC;IAED,qBAAqB,CAAC,KAAoB,EAAE,SAAsB,EAAE,KAA6B;QAC/F,IAAI,eAAe,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE;YAClC,MAAM,iBAAiB,GAAG,oBAAoB,CAAC,SAAwB,CAAC,CAAC;YAEzE,IAAI,KAAK,CAAC,QAAQ,EAAE;gBAClB,IAAI,CAAC,QAAQ,CAAC,aAAa,KAAK,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA,iBAAiB,aAAjB,iBAAiB,uBAAjB,iBAAiB,CAAE,MAAM,CAAA,EAAE;oBACnF,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,KAAK,CAAC,KAAK,EAAE,CAAC;iBACf;aACF;iBAAM;gBACL,IAAI,CAAC,QAAQ,CAAC,aAAa,KAAK,iBAAiB,CAAC,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;oBAC9E,CAAC,CAAC,QAAQ,CAAC,aAAa,KAAK,KAAK,CAAC,MAAM,CAAC,IAAI,QAAQ,CAAC,aAAa,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,IAAI,CAAC,EAAE;oBACzG,KAAK,CAAC,cAAc,EAAE,CAAC;oBACvB,KAAK,CAAC,KAAK,EAAE,CAAC;iBACf;aACF;SACF;IACH,CAAC;IAED,wBAAwB,CAAC,MAAe;QACtC,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE1C,IAAI,MAAM,EAAE;YACV,mCAAmC;YACnC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAC;YAEvD,mDAAmD;YACnD,IAAI,CAAC,OAAO,CAAC,QAAQ;iBAClB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC1C,SAAS,CAAC,GAAG,EAAE;;gBACd,IAAI,IAAI,CAAC,cAAc,EAAE;oBACvB,MAAA,oBAAoB,CAAC,IAAI,CAAC,cAAc,CAAC,aAA4B,CAAC,CAAC,CAAC,CAAC,0CAAE,KAAK,EAAE,CAAC;iBACpF;YACH,CAAC,CAAC,CAAC;SACN;IACH,CAAC;IAED,kCAAkC;IAClC,iEAAiE;IACzD,aAAa,CAAC,KAAU;QAC9B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;IAClC,CAAC;IAEO,uCAAuC;QAC7C,OAAO,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,iBAAiB,EAAE,cAAc,EAA2B,EAAE;YAChG,MAAM,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,cAAc,CAAC,EAAE,CAAC,CAAC;YAE7F,IAAI,YAAY,EAAE;gBAGhB,MAAM,sBAAsB,GAAG,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAC1E,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE,CAAC,WAAW,CAAC,EAAE,KAAK,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBAEnG,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE;oBACrC,8BAA8B;oBAC9B,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC;iBACrC;gBAED,IAAI,YAAY,CAAC,QAAQ,CAAC,MAAM,KAAK,cAAc,CAAC,MAAM,CAAC,MAAM;oBAC/D,sBAAsB,CAAC,MAAM,KAAK,cAAc,CAAC,MAAM,CAAC,MAAM;oBAC9D,cAAc,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;oBAElC,8BAA8B;oBAC9B,YAAY,CAAC,eAAe,GAAG,KAAK,CAAC;oBACrC,iBAAiB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;iBACtC;gBAED,iBAAiB,CAAC,IAAI,CAAC,GAAG,sBAAsB,CAAC,CAAC;aACnD;YAED,OAAO,iBAAiB,CAAC;QAC3B,CAAC,EAAE,EAA6B,CAAC,CAAC;IACpC,CAAC;IAEO,uCAAuC;QAC7C,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,EAAuB,EAAE;YACzD,uCACK,GAAG,CAAC,MAAM,CAAC,IAAI,KAClB,MAAM,EAAE,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAClD;QACJ,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,8BAA8B;QACpC,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,YAAY,EAAyB,EAAE;YACpE,MAAM,IAAI,GAA0B;gBAClC,KAAK,EAAE,YAAY,CAAC,KAAK;gBACzB,IAAI,EAAE,YAAY;gBAClB,4FAA4F;gBAC5F,GAAG,EAAE,YAAY,CAAC,EAAE;aACrB,CAAC;YAEF,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAyB,EAAE;gBACnF,OAAO;oBACL,KAAK,EAAE,iBAAiB,CAAC,KAAK;oBAC9B,IAAI,EAAE,iBAAiB;oBACvB,4FAA4F;oBAC5F,GAAG,EAAE,iBAAiB,CAAC,EAAE;oBACzB,MAAM,EAAE,IAAI;iBACb,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,OAAO,IAAI,CAAC;QACd,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,8BAA8B;;QACpC,IAAI,IAAI,CAAC,QAAQ,KAAI,MAAA,IAAI,CAAC,sBAAsB,0CAAE,aAAa,CAAA,KAAI,MAAA,IAAI,CAAC,mBAAmB,0CAAE,aAAa,CAAA,KAAI,MAAA,IAAI,CAAC,UAAU,0CAAE,aAAa,CAAA,EAAE;YAC5I,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,sBAAsB,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,aAAa,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,WAAW,CAAC;SACzL;aAAM;YACL,IAAI,CAAC,yBAAyB,GAAG,KAAK,CAAC;SACxC;IACH,CAAC;;sGA3TU,2BAA2B;8EAA3B,2BAA2B;;;;+BAgES,UAAU;;;;;;;;;QChH3D,iCAA4D;QAC1D,oBAAA;QAAA,iCAWiD;QAD5C,uGAAU,6BAAyB,IAAI,CAAC,IAAC,4FAC9B,6BAAyB,KAAK,CAAC,IADD;QAE5C,sBAAA;QAAA,oCAMiD;QAAzC,qKAAS,kBAA8B,IAAC;QAC9C,YACF;QAAA,iBAAS;QACT,sBAAA;QAAA,gGAgCc;QAChB,qBAAA;QAAA,iBAAM;QAEN,uBAAA;QAAA,0GAQoB;QACtB,mBAAA;QAAA,iBAAM;QACN,mBAAA;;QAhEO,eAAsC;QAAtC,oDAAsC,gCAAA,oCAAA,0CAAA,wBAAA,oCAAA,sCAAA;QAcjC,eAA2B;QAA3B,6CAA2B;QAC3B,mDAAqC;QAE3C,eACF;QADE,oEACF;QAqCC,eAAc;QAAd,mCAAc;;uFDVN,2BAA2B;cALvC,SAAS;eAAC;gBACT,QAAQ,EAAE,sBAAsB;gBAChC,WAAW,EAAE,iCAAiC;gBAC9C,aAAa,EAAE,iBAAiB,CAAC,IAAI;aACtC;mQAGK,aAAa;kBADhB,KAAK;YAWF,eAAe;kBADlB,KAAK;YAwBG,QAAQ;kBAAhB,KAAK;YACG,YAAY;kBAApB,KAAK;YACG,WAAW;kBAAnB,KAAK;YAOG,eAAe;kBAAvB,KAAK;YAOG,iBAAiB;kBAAzB,KAAK;YAKG,cAAc;kBAAtB,KAAK;YAEa,uBAAuB;kBAAzC,MAAM;YACY,qBAAqB;kBAAvC,MAAM;YAE2C,mBAAmB;kBAApE,SAAS;mBAAC,qBAAqB,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;YACM,sBAAsB;kBAA3E,SAAS;mBAAC,wBAAwB,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC;YACN,cAAc;kBAA3D,SAAS;mBAAC,gBAAgB,EAAE,EAAC,MAAM,EAAE,KAAK,EAAC;YACgB,UAAU;kBAArE,SAAS;mBAAC,YAAY,EAAE,EAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,UAAU,EAAC","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {TAB} from '@angular/cdk/keycodes';\nimport {asyncScheduler, Subject} from 'rxjs';\nimport {take, takeUntil, throttleTime} from 'rxjs/operators';\nimport {groupBy} from 'lodash-es';\n\nimport {AdaptDeviceDetectionService} from '../../common/device-detection.service';\nimport {AdaptTranslateService} from '../../common/i18n/index';\nimport {KeyValueObject} from '../../common/common.models';\nimport {ResizeService} from '../../common/resize/resize.service';\nimport {SafeCdr} from '../../common/safe-cdr';\nimport {debounce, formatString} from '../../common/utilities';\n\nimport {AdaptDropdownDirective, AdaptDropdownMobileView} from '../../dropdown/index';\nimport {getEventKeyCode} from '../../common/key-codes';\nimport {getFocusableElements} from '../../common/focus';\nimport {AdaptRadarAngularCustomEventName, AdaptRadarAngularService} from '../../common/radar/adapt-radar';\n\nimport {TreeTexts, TreeTrim, TreeWrap} from '../../tree/tree.model';\n\nimport {BaseFilterDirective} from '../base-filter';\nimport {\n  FacetedFilterOption,\n  FacetedFilterTexts,\n  FacetedFilterTreeNode,\n  SelectedFacetedFilterTag\n} from './faceted-filter.models';\nimport {FilterTagsRemoveEvent, FilterTagsVisibilityChangedEvent} from '../filter-tags/adapt-filter-tags.model';\n\n\n@Component({\n  selector: 'adapt-faceted-filter',\n  templateUrl: './faceted-filter.component.html',\n  encapsulation: ViewEncapsulation.None\n})\nexport class AdaptFacetedFilterComponent extends BaseFilterDirective<FacetedFilterTexts> implements OnInit, AfterViewInit, OnDestroy {\n  @Input()\n  set filterOptions(value: FacetedFilterOption[]) {\n    this._filterOptions = value;\n    this.treeNodes = this.getTreeValuesFromFilterOptions();\n  }\n\n  get filterOptions(): FacetedFilterOption[] {\n    return this._filterOptions;\n  }\n\n  @Input()\n  set selectedFilters(value: FacetedFilterOption[]) {\n    this._selectedFilters = value;\n    this.setSelectedTreeNodes(this.getSelectedTreeNodesFromSelectedFilters(), false);\n  }\n\n  get selectedFilters(): FacetedFilterOption[] {\n    return this._selectedFilters;\n  }\n\n  get dropdownMobileView(): AdaptDropdownMobileView {\n    return {\n      title: this.texts.initialDropdownAnchorLabel,\n      isPicker: this.isTablet,\n      fullHeight: this.isTablet && this.enableSearch\n    };\n  }\n\n  get dropdownAnchorLabel(): string {\n    return this.showTags && this.isFilterOutsideTagsHidden && this.dropdownAnchorWithCounterLabel\n      ? this.dropdownAnchorWithCounterLabel\n      : this.texts.initialDropdownAnchorLabel;\n  }\n\n  @Input() showTags: boolean = false;\n  @Input() enableSearch: boolean = false;\n  @Input() searchTexts: TreeTexts = {};\n\n  /**\n   * Enables 'select all' button. For the correct work the \"node.key\" property for each node is required\n   * @docs-default true\n   * @since v12.13.0\n   */\n  @Input() selectAllButton: boolean = true;\n\n  /**\n   * Enables 'deselect all' button. For the correct work the \"node.key\" property for each node is required\n   * @docs-default true\n   * @since v12.13.0\n   */\n  @Input() deselectAllButton: boolean = true;\n\n  /**\n   * This input controls if filter button (anchor) should be disabled\n   */\n  @Input() anchorDisabled: boolean = false;\n\n  @Output() readonly selectedTreeNodesChange: EventEmitter<FacetedFilterTreeNode[]> = new EventEmitter<FacetedFilterTreeNode[]>();\n  @Output() readonly selectedFiltersChange: EventEmitter<FacetedFilterOption[]> = new EventEmitter<FacetedFilterOption[]>();\n\n  @ViewChild('adaptDropdownButton', {static: true}) adaptDropdownButton: ElementRef<HTMLButtonElement>;\n  @ViewChild('filtersDropdownWrapper', {static: false}) filtersDropdownWrapper: ElementRef<HTMLDivElement>;\n  @ViewChild('menuElementRef', {static: false}) menuElementRef: ElementRef<HTMLDivElement>;\n  @ViewChild('filterTags', {static: false, read: ElementRef}) filterTags: ElementRef<Element>;\n\n  isTablet: boolean;\n  treeTrimSettings: TreeTrim = TreeTrim.Trim;\n  treeWrapSettings: TreeWrap = TreeWrap.Wrap;\n  treeNodes: FacetedFilterTreeNode[] = [];\n  selectedTreeNodes: FacetedFilterTreeNode[] = [];\n  selectedTreeTags: SelectedFacetedFilterTag[] = [];\n  searchQuery: string = '';\n  isFilterOutsideTagsHidden: boolean = false;\n  dropdownAnchorWithCounterLabel: string = '';\n\n  handleSearchDebounce: Function = debounce(this._handleSearch.bind(this), 200);\n\n  private _filterOptions: FacetedFilterOption[] = [];\n  private _selectedFilters: FacetedFilterOption[] = [];\n\n  constructor(private _translateService: AdaptTranslateService,\n              private _deviceDetection: AdaptDeviceDetectionService,\n              private _ngZone: NgZone,\n              private _changeDetector: ChangeDetectorRef,\n              private _resizeService: ResizeService,\n              _adaptRadarService: AdaptRadarAngularService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_translateService, _adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptFacetedFilter);\n\n    this.searchTexts = {\n      filterPlaceholder: this._translateService.getCurrentLanguage()['adapt.select.searchPlaceholder']\n    };\n  }\n\n  ngOnInit(): void {\n    if (this.selectedFilters && this.selectedFilters.length) {\n      this.setSelectedTreeNodes(this.getSelectedTreeNodesFromSelectedFilters(), false);\n    }\n    this.isTablet = this._deviceDetection.deviceTablet();\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n\n    const resize$ = new Subject();\n\n    resize$\n      .pipe(\n        takeUntil(this._destroyed$),\n        throttleTime(100, asyncScheduler, {trailing: true})\n      )\n      .subscribe(() => {\n        this._checkIfFilterTagsLabelVisible();\n      });\n\n    this._resizeService.addResizeEventListener(this.filtersDropdownWrapper.nativeElement, resize$.next.bind(resize$));\n  }\n\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n\n    if (this.filtersDropdownWrapper?.nativeElement) {\n      this._resizeService.removeResizeEventListener(this.filtersDropdownWrapper.nativeElement);\n    }\n  }\n\n  setDefaultTexts(translation: KeyValueObject): void {\n    this.defaultTexts.initialDropdownAnchorLabel = translation['adapt.facetedFilter.initialDropdownAnchorLabel'];\n    this.defaultTexts.initialDropdownAnchorWithCounterLabel = translation['adapt.facetedFilter.initialDropdownAnchorWithCounterLabel'];\n    this.defaultTexts.popoverTitleLabel = translation['adapt.facetedFilter.popoverTitleLabel'];\n    this.defaultTexts.clearButtonLabel = translation['adapt.common.clear'];\n    this.defaultTexts.selectedCountLabel = translation['adapt.facetedFilter.selectedCountLabel'];\n    this.defaultTexts.hiddenItemsCounterLabel = translation['adapt.advancedFilter.outsideTags.hiddenItemsCounterLabel'];\n  }\n\n  onSelectTreeNodes(selectedTreeNodes: FacetedFilterTreeNode[]): void {\n    this.setSelectedTreeNodes(selectedTreeNodes, true);\n  }\n\n  setSelectedTreeNodes(selectedTreeNodes: FacetedFilterTreeNode[], updateSelectedFilters: boolean): void {\n    this.selectedTreeNodes = selectedTreeNodes || [];\n    this.selectedTreeTags = this.getTagsData() || [];\n    this.selectedTreeNodesChange.emit(this.selectedTreeNodes);\n\n    if (updateSelectedFilters) {\n      this.selectedFilters = this.getSelectedFiltersFromSelectedTreeNodes();\n      this.selectedFiltersChange.emit(this.selectedFilters);\n    }\n  }\n\n  getNodeAdditionalLabel(node: FacetedFilterTreeNode): string {\n    if (node.parent || !node.children || !this.selectedTreeNodes.length) {\n      return '';\n    }\n\n    const selectedChildCount = node.children.reduce((acc, currValue) => {\n      return this.selectedTreeNodes.find(selectedNode => selectedNode.key === currValue.key) ? acc + 1 : acc;\n    }, 0);\n\n    return selectedChildCount > 0 ? this.texts.selectedCountLabel\n      .replace('{selectedChildCount}', selectedChildCount.toString()) : '';\n  }\n\n  getTagsData(): SelectedFacetedFilterTag[] {\n    if (!this.selectedTreeNodes.length) {\n      return [];\n    }\n\n    const groupedFiltersMap = groupBy(this.selectedTreeNodes.filter((node => node.parent)), (childNode) => {\n      return childNode.parent.data.id;\n    });\n\n    const result = Object.values(groupedFiltersMap).map((groupedNodes): SelectedFacetedFilterTag => {\n      return {\n        text: `${groupedNodes[0].parent.data.label}: ${groupedNodes.map(node => node.label).join(', ')}`,\n        parent: groupedNodes[0].parent,\n        nodes: groupedNodes\n      };\n    });\n\n    return result;\n  }\n\n  onRemoveTag(event: FilterTagsRemoveEvent): void {\n    const tag = event.tag as SelectedFacetedFilterTag;\n    const parentNode = tag.parent;\n\n    this.setSelectedTreeNodes(this.selectedTreeNodes.filter(node => {\n      return tag.nodes.indexOf(node) === -1 && parentNode !== node;\n    }), true);\n\n    // fix due to primeng tree bug\n    parentNode.partialSelected = false;\n  }\n\n  onVisibilityChanged(event: FilterTagsVisibilityChangedEvent): void {\n    this.dropdownAnchorWithCounterLabel = event.hiddenItemsCount === 0 ? '' : formatString(this.texts.initialDropdownAnchorWithCounterLabel, event.hiddenItemsCount);\n    this._checkIfFilterTagsLabelVisible();\n    SafeCdr.detectChanges(this._changeDetector);\n  }\n\n  onDropdownMenuKeydown(event: KeyboardEvent, container: HTMLElement, popup: AdaptDropdownDirective): void {\n    if (getEventKeyCode(event) === TAB) {\n      const focusableElements = getFocusableElements(container as HTMLElement);\n\n      if (event.shiftKey) {\n        if ((document.activeElement === focusableElements[0]) || !focusableElements?.length) {\n          event.preventDefault();\n          popup.close();\n        }\n      } else {\n        if ((document.activeElement === focusableElements[focusableElements.length - 1]) ||\n          ((document.activeElement === event.target) && document.activeElement.getAttribute('tabindex') === '-1')) {\n          event.preventDefault();\n          popup.close();\n        }\n      }\n    }\n  }\n\n  onDropdownMenuOpenChange(isOpen: boolean): void {\n    this.dropdownOpenStateChange.emit(isOpen);\n\n    if (isOpen) {\n      // Refresh tree state on popup open\n      this.searchQuery = '';\n      this.treeNodes = this.getTreeValuesFromFilterOptions();\n\n      // Move focus into the popup after opened and drawn\n      this._ngZone.onStable\n        .pipe(take(1), takeUntil(this._destroyed$))\n        .subscribe(() => {\n          if (this.menuElementRef) {\n            getFocusableElements(this.menuElementRef.nativeElement as HTMLElement)[0]?.focus();\n          }\n        });\n    }\n  }\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _handleSearch(event: any): void {\n    this.searchQuery = event.filter;\n  }\n\n  private getSelectedTreeNodesFromSelectedFilters(): FacetedFilterTreeNode[] {\n    return this.selectedFilters.reduce((selectedTreeNodes, selectedFilter): FacetedFilterTreeNode[] => {\n      const rootTreeNode = this.treeNodes.find(treeNode => treeNode.data.id === selectedFilter.id);\n\n      if (rootTreeNode) {\n\n\n        const childNodesForSelection = rootTreeNode.children.filter(childTreeNode =>\n          selectedFilter.values.findIndex(filterValue => filterValue.id === childTreeNode.data.id) !== -1);\n\n        if (childNodesForSelection.length > 0) {\n          // fix due to primeng tree bug\n          rootTreeNode.partialSelected = true;\n        }\n\n        if (rootTreeNode.children.length === selectedFilter.values.length &&\n          childNodesForSelection.length === selectedFilter.values.length &&\n          selectedFilter.values.length > 0) {\n\n          // fix due to primeng tree bug\n          rootTreeNode.partialSelected = false;\n          selectedTreeNodes.push(rootTreeNode);\n        }\n\n        selectedTreeNodes.push(...childNodesForSelection);\n      }\n\n      return selectedTreeNodes;\n    }, [] as FacetedFilterTreeNode[]);\n  }\n\n  private getSelectedFiltersFromSelectedTreeNodes(): FacetedFilterOption[] {\n    return this.getTagsData().map((tag): FacetedFilterOption => {\n      return {\n        ...tag.parent.data,\n        values: tag.nodes.map(childNode => childNode.data)\n      };\n    });\n  }\n\n  private getTreeValuesFromFilterOptions(): FacetedFilterTreeNode[] {\n    return this.filterOptions.map((filterOption): FacetedFilterTreeNode => {\n      const node: FacetedFilterTreeNode = {\n        label: filterOption.label,\n        data: filterOption,\n        // because for correct work of the search unique \"key\" property is required use \"id\" instead\n        key: filterOption.id\n      };\n\n      node.children = filterOption.values.map((filterOptionValue): FacetedFilterTreeNode => {\n        return {\n          label: filterOptionValue.label,\n          data: filterOptionValue,\n          // because for correct work of the search unique \"key\" property is required use \"id\" instead\n          key: filterOptionValue.id,\n          parent: node\n        };\n      });\n\n      return node;\n    });\n  }\n\n  private _checkIfFilterTagsLabelVisible(): void {\n    if (this.showTags && this.filtersDropdownWrapper?.nativeElement && this.adaptDropdownButton?.nativeElement && this.filterTags?.nativeElement) {\n      this.isFilterOutsideTagsHidden = this.filtersDropdownWrapper.nativeElement.clientWidth < this.adaptDropdownButton.nativeElement.clientWidth + this.filterTags.nativeElement.clientWidth;\n    } else {\n      this.isFilterOutsideTagsHidden = false;\n    }\n  }\n}\n","<div class=\"d-flex overflow-hidden\" #filtersDropdownWrapper>\n  <div #filtersDropdown=\"adaptDropdown\"\n       adaptDropdown\n       [adaptRadarDisableEventSending]=\"true\"\n       class=\"faceted-filter__dropdown-wrap\"\n       [restoreFocusAfterClose]=\"true\"\n       [focusNextElementAfterClose]=\"true\"\n       [appendToBody]=\"appendDropdownToBody\"\n       [autoClose]=\"'outside'\"\n       [placement]=\"dropdownPlacement\"\n       [mobileView]=\"dropdownMobileView\"\n       (onOpen)=\"onDropdownMenuOpenChange(true)\"\n       (onClose)=\"onDropdownMenuOpenChange(false)\">\n    <button type=\"button\"\n            class=\"btn btn-link px-0 d-icon-left-filter d-icon-right-triangle_down\"\n            adaptDropdownAnchor\n            #adaptDropdownButton\n            [disabled]=\"anchorDisabled\"\n            [attr.data-testid]=\"testID + '_menu'\"\n            (click)=\"filtersDropdown.toggle($event)\">\n      {{ dropdownAnchorLabel }}\n    </button>\n    <ng-template adaptDropdownMenuTemplate>\n      <div #menuElementRef\n           class=\"dropdown-menu p-0\"\n           [class.dropdown-menu__rx-search-container]=\"enableSearch\"\n           (keydown)=\"onDropdownMenuKeydown($event, menuElementRef, filtersDropdown)\">\n        <div class=\"faceted-filter__popover-container\">\n          <adapt-tree [value]=\"treeNodes\"\n                      [filter]=\"enableSearch\"\n                      [filterMode]=\"'strict'\"\n                      [texts]=\"searchTexts\"\n                      [trim]=\"treeTrimSettings\"\n                      [wrap]=\"treeWrapSettings\"\n                      selectionMode=\"checkbox\"\n                      [selection]=\"selectedTreeNodes\"\n                      (selectionChange)=\"onSelectTreeNodes($event)\"\n                      (onFilter)=\"handleSearchDebounce($event)\"\n                      [attr.data-testid]=\"testID\"\n                      [testID]=\"testID\"\n                      [selectAllButton]=\"selectAllButton\"\n                      [deselectAllButton]=\"deselectAllButton\">\n            <ng-template let-node adaptTreeNodeTemplate>\n              <adapt-highlight *ngIf=\"enableSearch\"\n                               [result]=\"node.label\"\n                               [term]=\"searchQuery\"></adapt-highlight>\n              <ng-container *ngIf=\"!enableSearch\">{{node.label}}</ng-container>\n              <span class=\"faceted-filter__selected-label\">\n                {{ getNodeAdditionalLabel(node) }}\n              </span>\n            </ng-template>\n          </adapt-tree>\n        </div>\n      </div>\n    </ng-template>\n  </div>\n\n  <adapt-filter-tags\n    *ngIf=\"showTags\"\n    #filterTags\n    [class.advanced-filter__outside-tags_hidden]=\"isFilterOutsideTagsHidden\"\n    [tags]=\"selectedTreeTags\"\n    [texts]=\"texts\"\n    (remove)=\"onRemoveTag($event)\"\n    (visibilityChanged)=\"onVisibilityChanged($event)\">\n  </adapt-filter-tags>\n</div>\n"]}