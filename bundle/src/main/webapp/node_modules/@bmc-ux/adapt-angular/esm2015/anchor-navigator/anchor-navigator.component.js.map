{"version":3,"file":"anchor-navigator.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/anchor-navigator/anchor-navigator.component.ts","../../../../../libs/adapt-angular/src/anchor-navigator/anchor-navigator.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostBinding,\n  Inject,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  Renderer2,\n  ViewChildren\n} from '@angular/core';\nimport {DOCUMENT, Location} from '@angular/common';\nimport {ActivatedRoute} from '@angular/router';\nimport {fromEvent, ReplaySubject} from 'rxjs';\nimport {filter, takeUntil} from 'rxjs/operators';\nimport {DomHandler} from 'primeng/dom';\nimport {AdaptAnimateScrollService} from '../common/scroll/scroll.service';\nimport {AdaptDeviceDetectionService} from '../common/device-detection.service';\nimport {AdaptAnchorNavigatorModel} from './anchor-navigator.model';\nimport {AdaptAnchorLinkComponent} from './anchor-link/anchor-link.component';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptRadarAngularGenericDirective,\n  AdaptRadarAngularService\n} from '../common/radar/adapt-radar';\n\n@Component({\n  selector: 'adapt-anchor-navigator',\n  templateUrl: './anchor-navigator.component.html'\n})\nexport class AdaptAnchorNavigatorComponent extends AdaptRadarAngularGenericDirective implements OnInit, AfterViewInit, OnDestroy {\n  isMobile: boolean = false;\n  isNavigatorVisible: boolean = false;\n\n  /**\n   * An array of anchor links used to build navigation list. Detailed interface description can be found below\n   * @docs-default\n   */\n  @Input() list: AdaptAnchorNavigatorModel[];\n\n  /**\n   * Header on the top of navigation list\n   * @docs-default\n   */\n  @Input() listHeader: string;\n\n  /**\n   * DOM node class used to mark blocks for navigation\n   * @docs-default _scroll-spy\n   */\n  @Input() anchorBlockClass: string = '_scroll-spy';\n\n  /**\n   * The distance in pixels above scroll target where the animation should stop.\n   * Setting a positive number results in the scroll target being more in the middle of the screen, negative numbers will produce scrolling \"too far\"\n   * @docs-default 0\n   */\n  @Input() scrollOffset: number = 0;\n\n  /**\n   * The duration how long a scrollTo animation should last by default\n   * @docs-default 400\n   */\n  @Input() scrollDuration: number = 400;\n\n  /**\n   * Container for anchors to detect the scroll events on\n   * @since v10.6.0\n   * @docs-default document.body\n   */\n  @Input() set scrollContainer(elem: HTMLElement) {\n    if (elem) {\n      this._scrollContainer = elem;\n    }\n\n    // if a component's view is not fully initialized\n    // no need to perform any action on applying line animation\n    if (!this._isViewInitialized) {\n      return;\n    }\n\n    this._setInitialContainerScroll();\n  }\n\n  @HostBinding('class.anchor-navigator-container') defaultClass: boolean = true;\n\n  @ViewChildren(AdaptAnchorLinkComponent) private _anchorLinkComponents: QueryList<AdaptAnchorLinkComponent>;\n\n  private _anchorContentItems: NodeListOf<Element>;\n  private _fragment: string = '';\n  private readonly _dotSize: number = 7; // should be consistent to the CSS dimensions - $an-link-title-dot-indicator-size variable\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  private _scrollContainer: HTMLElement = this.document.body;\n  private _isViewInitialized: boolean = false;\n\n  constructor(private _element: ElementRef,\n              private _ngZone: NgZone,\n              private _renderer: Renderer2,\n              private _animateScrollService: AdaptAnimateScrollService,\n              // TODO: Refactor this if possible\n              /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n              @Inject(DOCUMENT) private document: any, // https://github.com/angular/angular/issues/20351\n              private _activatedRouter: ActivatedRoute,\n              private _location: Location,\n              private _device: AdaptDeviceDetectionService,\n              _adaptRadarService: AdaptRadarAngularService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptAnchorNavigator);\n\n    // in case page has been loaded with already preset url fragment\n    this._fragment = _activatedRouter.snapshot.fragment;\n  }\n\n  ngOnInit(): void {\n    this.isMobile = this._device.deviceMobile();\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n\n    this._ngZone.runOutsideAngular(() => {\n      fromEvent(this.document, 'click')\n        .pipe(filter(() => this.isMobile), takeUntil(this._destroyed$))\n        .subscribe(() => {\n          this._ngZone.run(() => this.isNavigatorVisible = false);\n        });\n    });\n\n    // querying on the document.body\n    this._anchorContentItems = this.document.body.querySelectorAll(`.${this.anchorBlockClass}`);\n    this._isViewInitialized = true;\n\n    this._setInitialContainerScroll();\n  }\n\n  toggleNavigatorVisibility(event: Event): void {\n    event.stopPropagation();\n\n    this.isNavigatorVisible = !this.isNavigatorVisible;\n  }\n\n  scrollTo(item: AdaptAnchorNavigatorModel): void {\n    const elementID = item.href.substring(item.href.lastIndexOf('#') + 1);\n\n    this._animateScrollService.scrollToElement(elementID, this.scrollDuration, this.scrollOffset, this._scrollContainer);\n\n    this._location.replaceState(item.href);\n  }\n\n  ngOnDestroy(): void {\n    this._destroyed$.next(true);\n    this._destroyed$.complete();\n  }\n\n  trackByFn(index: number): number {\n    return index;\n  }\n\n  private _setInitialContainerScroll(): void {\n    const listenerTarget = this._animateScrollService.getListenerTarget(this._scrollContainer);\n\n    this._ngZone.runOutsideAngular(() => {\n      // listen to the scroll events for the provided scrollContainer\n      // to apply line animation\n      fromEvent(listenerTarget, 'scroll')\n        .pipe(takeUntil(this._destroyed$))\n        .subscribe(() => {\n          this._anchorPreset();\n        });\n    });\n\n    this._anchorPreset();\n\n    if (!this._fragment) {\n      return;\n    }\n\n    // in case url fragment is available - scroll to respective block in the container\n    this._animateScrollService.scrollToElement(this._fragment, this.scrollDuration, this.scrollOffset, this._scrollContainer);\n    this._applyLineAnimation();\n  }\n\n  private _isContentWithinViewport(): boolean {\n    const firstContentItem = this._anchorContentItems[0];\n    const lastContentItem = this._anchorContentItems[this._anchorContentItems.length - 1] as HTMLElement;\n\n    return DomHandler.getWindowScrollTop() + DomHandler.getViewport().height > DomHandler.getOffset(firstContentItem).top\n      && DomHandler.getWindowScrollTop() < DomHandler.getOffset(lastContentItem).top + lastContentItem.offsetHeight;\n  }\n\n  private _fixedOnScroll(): void {\n    if (!this.isMobile) {\n      return;\n    }\n\n    this._isContentWithinViewport()\n      ? this._renderer.addClass(this._element.nativeElement, 'fixed')\n      : this._renderer.removeClass(this._element.nativeElement, 'fixed');\n  }\n\n  private _detachLineAnimation(): void {\n    this._anchorLinkComponents.forEach(item => {\n      this._renderer.setStyle(item.animationLine.nativeElement, 'height', '0');\n    });\n  }\n\n  private _applyLineAnimation(): void {\n    let windowScroll = DomHandler.getWindowScrollTop();\n\n    if (!this._animateScrollService.isDocumentBody(this._scrollContainer)) {\n      windowScroll = DomHandler.getOffset(this._scrollContainer).top;\n    }\n\n    this._anchorContentItems.forEach((item: HTMLElement) => this._calculateScrolledContentDistance(item, windowScroll));\n  }\n\n  private _anchorPreset(): void {\n    this._fixedOnScroll();\n    // reset previously applied line animation\n    this._detachLineAnimation();\n    // apply line animation based on scroll position\n    this._applyLineAnimation();\n  }\n\n  private _calculateScrolledContentDistance(item: HTMLElement, scroll: number): void {\n    const top = Math.floor(DomHandler.getOffset(item).top);\n    const elemLink = this._anchorLinkComponents.find(({item: anchor}) => new RegExp(item.id, 'gi').test(anchor.href));\n\n    if (!elemLink) {\n      return;\n    }\n\n    const line = elemLink.animationLine.nativeElement;\n\n    const windowScroll = this._animateScrollService.isDocumentBody(this._scrollContainer)\n      ? DomHandler.getWindowScrollTop()\n      : this._scrollContainer.scrollTop;\n\n    const windowHeight = this._animateScrollService.isDocumentBody(this._scrollContainer)\n      ? window.innerHeight\n      : this._scrollContainer.offsetHeight;\n\n    const scrolledToBottom = (windowScroll + windowHeight) >= this._scrollContainer.scrollHeight;\n\n    let {top: rectTop} = item.getBoundingClientRect();\n\n    /**\n     * When scroll touch the bottom of the page - highlight all items momentarily.\n     */\n    if (scrolledToBottom) {\n      this._renderer.addClass(elemLink.anchor.nativeElement, 'current');\n      this._renderer.addClass(elemLink.anchor.nativeElement, 'past');\n\n      this._renderer.setStyle(line, 'height', `calc(100% - ${this._dotSize}px)`);\n\n      return;\n    }\n\n    if (scroll >= top) {\n      if (!this._animateScrollService.isDocumentBody(this._scrollContainer)) {\n        rectTop = rectTop - this._scrollContainer.getBoundingClientRect().top;\n      }\n\n      // inside the section block\n      if (scroll <= top + item.offsetHeight) {\n        this._renderer.removeClass(elemLink.anchor.nativeElement, 'past');\n        this._renderer.addClass(elemLink.anchor.nativeElement, 'current');\n        this._renderer.addClass(elemLink.anchor.nativeElement, 'reading');\n        this._renderer.setAttribute(elemLink.anchor.nativeElement, 'aria-checked', 'true');\n\n        const scrolledHeight = elemLink.anchor.nativeElement.classList.contains('reading') ? Math.abs(rectTop * 100 / item.offsetHeight) : 0;\n\n        this._renderer.setStyle(line, 'height', `calc(${scrolledHeight}% - ${this._dotSize}px)`);\n      } else {\n        this._renderer.removeClass(elemLink.anchor.nativeElement, 'current');\n        this._renderer.addClass(elemLink.anchor.nativeElement, 'past');\n        this._renderer.removeAttribute(elemLink.anchor.nativeElement, 'aria-checked');\n\n        this._renderer.setStyle(line, 'height', `calc(100% - ${this._dotSize}px)`);\n      }\n    } else {\n      this._renderer.removeClass(elemLink.anchor.nativeElement, 'current');\n      this._renderer.removeClass(elemLink.anchor.nativeElement, 'reading');\n      this._renderer.removeClass(elemLink.anchor.nativeElement, 'past');\n      this._renderer.removeAttribute(elemLink.anchor.nativeElement, 'aria-checked');\n    }\n  }\n}\n","<ng-container *ngIf=\"!isMobile\">\n  <h6 class=\"anchor-navigator__title\" *ngIf=\"listHeader\">{{listHeader}}</h6>\n  <ng-template [ngTemplateOutlet]=\"anchorNavigator\"></ng-template>\n</ng-container>\n\n<ng-container *ngIf=\"isMobile\">\n  <ng-template [ngTemplateOutlet]=\"anchorNavigator\"></ng-template>\n  <div class=\"anchor-navigator__click-to-show\" (click)=\"toggleNavigatorVisibility($event)\"></div>\n\n  <div *ngIf=\"isNavigatorVisible\" class=\"anchor-navigator__backdrop\"></div>\n</ng-container>\n\n<ng-template #anchorNavigator>\n  <ul role=\"menu\" class=\"anchor-navigator__list\">\n    <li role=\"none\" class=\"anchor-navigator__item\"\n        *ngFor=\"let item of list; trackBy: trackByFn\"\n        [ngClass]=\"{'has-child': item.children?.length}\">\n      <adapt-anchor-link [item]=\"item\"\n                         [isMobile]=\"isMobile\"\n                         [isNavigatorVisible]=\"isNavigatorVisible\"\n                         (onLinkClick)=\"scrollTo($event)\"></adapt-anchor-link>\n\n      <ul role=\"none\" class=\"anchor-navigator__sub-list\" *ngIf=\"item.children?.length\">\n        <li role=\"none\" class=\"anchor-navigator__item\" *ngFor=\"let t of item.children; trackBy: trackByFn\">\n          <adapt-anchor-link [item]=\"t\"\n                             [isMobile]=\"isMobile\"\n                             [isNavigatorVisible]=\"isNavigatorVisible\"\n                             (onLinkClick)=\"scrollTo($event)\"></adapt-anchor-link>\n        </li>\n      </ul>\n\n    </li>\n  </ul>\n</ng-template>\n"]}