{"version":3,"file":"expando.directive.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/collapse/expando.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterContentInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  Input,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild\n} from '@angular/core';\nimport {takeUntil, throttleTime} from 'rxjs/operators';\nimport {asyncScheduler, ReplaySubject, Subject} from 'rxjs';\n\nimport {ResizeService} from '../common/resize/resize.service';\nimport {SafeCdr} from '../common/safe-cdr';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptRadarAngularGenericDirective,\n  AdaptRadarAngularService\n} from '../common/radar/adapt-radar';\n\n@Component({\n  selector: 'adapt-expando, [expand]',\n  exportAs: 'expand',\n  template: `\n    <div class=\"collapse-block\" #block [ngClass]=\"{'fade-horizontal': isCollapsed && isFade}\">\n      <div #area>\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .collapse-block {\n      overflow: hidden;\n      transition: all 0.2s ease-out;\n    }\n\n    .collapse-block:before,\n    .collapse-block:after {\n      content: '';\n      display: table;\n    }\n\n    .fade-horizontal {\n      position: relative;\n    }\n\n    .fade-horizontal:after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      height: 1.5rem;\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%)\n    }\n\n  `]\n})\n// eslint-disable-next-line @angular-eslint/component-class-suffix\nexport class AdaptExpandoDirective extends AdaptRadarAngularGenericDirective implements OnInit, AfterContentInit, OnDestroy {\n\n  // Is Collapsed flag\n  isCollapsed: boolean = true;\n  isFade: boolean = true;\n\n  @ViewChild('block', {static: true}) block: ElementRef;\n  @ViewChild('area', {static: true}) area: ElementRef;\n\n  @Input() h: string;\n\n  /**\n   * Accessor for collapse attribute.\n   * Show or hide collapsible block according to value\n   * @docs-default\n   */\n  @Input()\n  set expand(value: boolean) {\n\n    if (value) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  constructor(private _resizeService: ResizeService,\n              private _renderer: Renderer2,\n              private _changeDetectorRef: ChangeDetectorRef,\n              _adaptRadarService: AdaptRadarAngularService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptExpando);\n  }\n\n  ngAfterContentInit(): void {\n    const resize$ = new Subject();\n\n    resize$\n      .pipe(\n        takeUntil(this._destroyed$),\n        throttleTime(100, asyncScheduler, {trailing: true})\n      )\n      .subscribe(() => {\n        this.checkForMore();\n        SafeCdr.detectChanges(this._changeDetectorRef);\n      });\n\n    this._resizeService.addResizeEventListener(this.area.nativeElement, resize$.next.bind(resize$));\n  }\n\n  ngOnDestroy(): void {\n    this._resizeService.removeResizeEventListener(this.area.nativeElement);\n    this._destroyed$.next();\n    this._destroyed$.complete();\n  }\n\n  ngOnInit(): void {\n    if (this.h) {\n      this._renderer.setStyle(this.block.nativeElement, 'maxHeight', this.h);\n    }\n  }\n\n  checkForMore(): void {\n    this.isFade = this.area.nativeElement.offsetHeight > parseInt(this.h, 10);\n  }\n\n  /**\n   * Hide collapsible block\n   */\n  hide(): void {\n    this.isCollapsed = true;\n    this.checkForMore();\n    this._renderer.setStyle(this.block.nativeElement, 'maxHeight', this.h);\n  }\n\n  /**\n   * Show collapsible block\n   */\n  show(): void {\n    this.isCollapsed = false;\n    this.checkForMore();\n    this._renderer.setStyle(this.block.nativeElement, 'maxHeight', this.area.nativeElement.offsetHeight + 'px');\n  }\n\n  /**\n   * Toggle collapsible block\n   */\n  toggle(): void {\n    if (this.isCollapsed) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n}\n"]}