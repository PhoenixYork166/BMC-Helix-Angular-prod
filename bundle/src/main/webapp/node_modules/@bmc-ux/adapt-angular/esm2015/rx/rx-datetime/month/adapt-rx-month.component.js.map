{"version":3,"file":"adapt-rx-month.component.js","sourceRoot":"","sources":["../../../../../../../libs/adapt-angular/src/rx/rx-datetime/month/adapt-rx-month.component.ts","../../../../../../../libs/adapt-angular/src/rx/rx-datetime/month/adapt-rx-month.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Inject,\n  Input,\n  LOCALE_ID,\n  OnChanges,\n  Output,\n  SimpleChanges\n} from '@angular/core';\nimport {isFunction, isNil, isNumber, isUndefined} from 'lodash-es';\n\nimport {checkIsAfter} from '../common/common.utils';\n\nimport {AdaptRxDatetimeConfigService} from '../adapt-rx-datetime-config.service';\nimport {AdaptRxDatetimeI18nService} from '../adapt-rx-datetime-i18n.service';\nimport {RxDateStruct, RxDatetimeStruct, RxDatetimeTexts, RxMonth, RxMonthConfig} from '../adapt-rx-datetime.types';\n\n@Component({\n  selector: 'adapt-rx-month',\n  templateUrl: './adapt-rx-month.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AdaptRxMonthComponent implements OnChanges {\n  today: Date = new Date();\n\n  config: RxMonthConfig = {\n    activeValue: undefined,\n    disabled: undefined,\n    filter: undefined,\n    texts: undefined,\n    rangeFrom: undefined,\n    rangeTo: undefined,\n  };\n\n  @Input() activeValue: RxDateStruct;\n  @Input() disabled: boolean;\n  @Input() filter: (month: RxDatetimeStruct) => boolean;\n  @Input() texts: RxDatetimeTexts;\n  @Input() testID: string;\n  @Input() rangeFrom: RxDateStruct;\n  @Input() rangeTo: RxDateStruct;\n\n  months: RxMonth[][] = Array(4)\n    .fill(0)\n    .map(() => Array(3)\n      .fill(0)\n      .map(() => new RxMonth()));\n\n  @Output() readonly activeValueChange: EventEmitter<RxDateStruct> = new EventEmitter<RxDateStruct>();\n\n  constructor(_datetimeConfigService: AdaptRxDatetimeConfigService,\n              private _i18n: AdaptRxDatetimeI18nService,\n              @Inject(LOCALE_ID) private _localeID: string) {\n    this.config.texts = _datetimeConfigService.texts;\n\n    this._updateMonths();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.activeValue && !isUndefined(changes.activeValue.currentValue)) {\n      this.config.activeValue = changes.activeValue.currentValue;\n    }\n\n    if (changes.disabled && !isNil(changes.disabled.currentValue)) {\n      this.config.disabled = changes.disabled.currentValue;\n    }\n\n    if (changes.filter && !isNil(changes.filter.currentValue)) {\n      this.config.filter = changes.filter.currentValue;\n    }\n\n    if (changes.rangeFrom) {\n      this.config.rangeFrom = changes.rangeFrom.currentValue;\n    }\n\n    if (changes.rangeTo) {\n      this.config.rangeTo = changes.rangeTo.currentValue;\n    }\n\n    if (changes.texts && !isNil(changes.texts.currentValue)) {\n      Object.assign(this.config.texts, (changes.texts.currentValue));\n    }\n\n    this._updateMonths();\n  }\n\n  onMonthClick(month: RxMonth): void {\n    this.config.activeValue = month.value;\n    this.activeValueChange.emit(month.value);\n  }\n\n  private _updateMonths(): void {\n    let monthCounter = 0;\n    const monthsNames = this._i18n.getMonthNames(true, this._localeID);\n\n    this.months.forEach((monthsRow, monthsRowIndex) => {\n      monthsRow.forEach((month, monthIndex) => {\n        const calendarMonth: RxMonth = this.months[monthsRowIndex][monthIndex];\n        const rangeFromExist = isNumber(this.config.rangeFrom?.month);\n        const rangeToExist = isNumber(this.config.rangeTo?.month);\n\n        calendarMonth.value = {\n          year: this.activeValue?.year || null,\n          month: monthCounter++,\n          date: 1\n        };\n        calendarMonth.name = monthsNames[calendarMonth.value.month];\n        calendarMonth.isActive = this.activeValue?.month === calendarMonth.value.month;\n        calendarMonth.isDisabled =\n          this.config.disabled || (isFunction(this.config.filter) ? !this.config.filter(calendarMonth.value) : false);\n        calendarMonth.isToday =\n          calendarMonth.value.month === this.today.getMonth() &&\n          (isNumber(calendarMonth.value.year) ? (calendarMonth.value.year === this.today.getFullYear()) : true);\n        calendarMonth.isRangeFrom = rangeFromExist &&\n          (this.config.rangeFrom.year === calendarMonth.value.year) &&\n          (this.config.rangeFrom.month === calendarMonth.value.month);\n        calendarMonth.isRangeTo = rangeToExist &&\n          (this.config.rangeTo.year === calendarMonth.value.year) &&\n          (this.config.rangeTo.month === calendarMonth.value.month);\n        calendarMonth.isInRange = rangeFromExist && rangeToExist &&\n          checkIsAfter(calendarMonth.value, this.config.rangeFrom, true) &&\n          checkIsAfter(this.config.rangeTo, calendarMonth.value, true);\n      });\n    });\n  }\n}\n","<div class=\"a3t-calendar\">\n  <table class=\"a3t-calendar--table a3t-calendar--month_table\">\n    <tbody>\n    <tr aria-hidden=\"true\">\n      <td colspan=\"3\" class=\"a3t-calendar--table-space-cell\"></td>\n    </tr>\n    <tr *ngFor=\"let monthsRow of months\">\n      <ng-container *ngFor=\"let month of monthsRow; let col = index; let first = first; let last = last\">\n        <td class=\"a3t-calendar--table-edge-cell\"\n            aria-hidden=\"true\"\n            *ngIf=\"first\"\n            [class.range]=\"month.isInRange && !month.isRangeFrom\"></td>\n        <td class=\"a3t-calendar--table-day a3t-calendar--table-month\"\n            role=\"gridcell\"\n            [class.range]=\"month.isInRange && !(month.isRangeFrom && month.isRangeTo)\"\n            [class.range-from]=\"month.isRangeFrom && !month.isRangeTo\"\n            [class.range-to]=\"month.isRangeTo && !month.isRangeFrom\">\n          <button type=\"button\"\n                  [class.active]=\"month.isActive\"\n                  [class.today]=\"month.isToday\"\n                  [class.disabled]=\"month.isDisabled || config.disabled\"\n                  [class.range-edge]=\"month.isRangeFrom || month.isRangeTo\"\n                  [disabled]=\"month.isDisabled || config.disabled\"\n                  [attr.data-testid]=\"testID + '_month_' + month.value\"\n                  (click)=\"onMonthClick(month)\">{{month.name}}</button>\n        </td>\n        <td class=\"a3t-calendar--table-edge-cell\"\n            aria-hidden=\"true\"\n            *ngIf=\"last\"\n            [class.range]=\"month.isInRange && !month.isRangeTo\"></td>\n      </ng-container>\n    </tr>\n    <tr aria-hidden=\"true\">\n      <td colspan=\"3\" class=\"a3t-calendar--table-space-cell\"></td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n"]}