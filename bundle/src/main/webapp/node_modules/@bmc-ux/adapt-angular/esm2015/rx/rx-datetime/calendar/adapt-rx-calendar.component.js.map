{"version":3,"file":"adapt-rx-calendar.component.js","sourceRoot":"","sources":["../../../../../../../libs/adapt-angular/src/rx/rx-datetime/calendar/adapt-rx-calendar.component.ts","../../../../../../../libs/adapt-angular/src/rx/rx-datetime/calendar/adapt-rx-calendar.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  AfterViewInit,\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Input,\n  LOCALE_ID,\n  OnChanges,\n  Output,\n  QueryList,\n  SimpleChanges,\n  ViewChildren\n} from '@angular/core';\nimport {trigger} from '@angular/animations';\nimport {\n  DOWN_ARROW,\n  END,\n  ENTER,\n  HOME,\n  LEFT_ARROW,\n  PAGE_DOWN,\n  PAGE_UP,\n  RIGHT_ARROW,\n  SPACE, TAB,\n  UP_ARROW\n} from '@angular/cdk/keycodes';\nimport type {WeekDay} from '@angular/common';\n\nimport {cloneDeep, isEqual, isFunction, isNil, isUndefined} from 'lodash-es';\n\nimport {getEventKeyCode} from '../../../common/key-codes';\n\nimport {AdaptRxDatetimeConfigService} from '../adapt-rx-datetime-config.service';\nimport {AdaptRxDatetimeI18nService} from '../adapt-rx-datetime-i18n.service';\nimport {\n  CALENDAR_ROWS,\n  checkIfPropsDefined,\n  DAYS_A_WEEK,\n  getDateStamp,\n  MONTHS_A_YEAR,\n  SLIDE_HORIZONTAL_ANIMATION\n} from '../common/common.utils';\nimport {RxCalendar, RxCalendarConfig, RxCalendarDay, RxDateStruct, RxDatetimeTexts} from '../adapt-rx-datetime.types';\nimport {Directionality} from '@angular/cdk/bidi';\n\n@Component({\n  selector: 'adapt-rx-calendar',\n  templateUrl: './adapt-rx-calendar.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('slideAnimation', SLIDE_HORIZONTAL_ANIMATION)\n  ]\n})\nexport class AdaptRxCalendarComponent implements AfterViewInit, OnChanges {\n  // Today CalendarValue\n  today: RxDateStruct = (() => {\n    const _today = new Date();\n\n    return {\n      year: _today.getFullYear(),\n      month: _today.getMonth(),\n      date: _today.getDate()\n    };\n  })();\n\n  config: RxCalendarConfig = {\n    firstDayOfWeek: undefined,\n    year: this.today.year,\n    month: this.today.month,\n    activeDate: undefined,\n    dayFilter: undefined,\n    rangeFrom: undefined,\n    rangeTo: undefined,\n    disabled: false,\n    readonly: false,\n    hideControls: false,\n    expandedControlsStyle: true,\n    texts: undefined\n  };\n\n  @Input() firstDayOfWeek: WeekDay;\n  @Input() year: number;\n  @Input() month: number;\n  @Input() activeDate: RxDateStruct;\n  @Input() dayFilter: (date: RxDateStruct) => boolean;\n  @Input() rangeFrom: RxDateStruct;\n  @Input() rangeTo: RxDateStruct;\n  @Input() disabled: boolean;\n  @Input() readonly: boolean;\n  @Input() hideControls: boolean;\n  @Input() expandedControlsStyle: boolean;\n  @Input() texts: RxDatetimeTexts;\n  @Input() testID: string;\n\n  /* eslint-disable-next-line @angular-eslint/no-output-on-prefix */\n  @Output() readonly onDateChange: EventEmitter<RxDateStruct> = new EventEmitter<RxDateStruct>();\n\n  @ViewChildren('dayButtonElement') dayButtonElements: QueryList<ElementRef<HTMLButtonElement>>;\n\n  yearAnimationCounter: number = 0;\n  monthAnimationCounter: number = 0;\n  focusedCalendarDay: RxCalendarDay;\n  isRtl: boolean = false;\n  calendar: RxCalendar;\n\n  constructor(_datetimeConfigService: AdaptRxDatetimeConfigService,\n              private _i18n: AdaptRxDatetimeI18nService,\n              private _changeDetectorRef: ChangeDetectorRef,\n              private _dir: Directionality,\n              @Inject(LOCALE_ID) public localeID: string) {\n    this.config.texts = _datetimeConfigService.texts;\n    this.config.firstDayOfWeek = this._i18n.getFirstDayOfWeek(this.localeID);\n    this.isRtl = this._dir.value === 'rtl';\n\n    this._createCalendar(this.config.year, this.config.month);\n  }\n\n  ngAfterViewInit(): void {\n    this._makeCalendarDayFocusable();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    let calendarRebuildNeeded = false;\n    let calendarUpdateNeeded = false;\n\n    if (changes.firstDayOfWeek && !isNil(changes.firstDayOfWeek.currentValue)) {\n      this.config.firstDayOfWeek = changes.firstDayOfWeek.currentValue % DAYS_A_WEEK;\n      calendarRebuildNeeded = true;\n    }\n\n    if (changes.year && !isNil(changes.year.currentValue)) {\n      this.config.year = changes.year.currentValue;\n      calendarRebuildNeeded = true;\n    }\n\n    if (changes.month && !isNil(changes.month.currentValue)) {\n      this.config.month = changes.month.currentValue % MONTHS_A_YEAR;\n      calendarRebuildNeeded = true;\n    }\n\n    if (changes.activeDate && !isUndefined(changes.activeDate.currentValue)) {\n      this.config.activeDate = changes.activeDate.currentValue;\n\n      if (checkIfPropsDefined(this.config.activeDate, ['year', 'month', 'date'])) {\n        if (this.config.year === this.config.activeDate.year && this.config.month === this.config.activeDate.month) {\n          calendarUpdateNeeded = true;\n        } else {\n          this.config.year = this.config.activeDate.year;\n          this.config.month = this.config.activeDate.month % MONTHS_A_YEAR;\n\n          calendarRebuildNeeded = true;\n        }\n      } else {\n        calendarRebuildNeeded = true;\n      }\n    }\n\n    if (changes.dayFilter && !isUndefined(changes.dayFilter.currentValue)) {\n      this.config.dayFilter = changes.dayFilter.currentValue;\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.rangeFrom && !isUndefined(changes.rangeFrom.currentValue)) {\n      this.config.rangeFrom = changes.rangeFrom.currentValue;\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.rangeTo && !isUndefined(changes.rangeTo.currentValue)) {\n      this.config.rangeTo = changes.rangeTo.currentValue;\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.disabled && !isNil(changes.disabled.currentValue)) {\n      this.config.disabled = changes.disabled.currentValue;\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.readonly && !isNil(changes.readonly.currentValue)) {\n      this.config.readonly = changes.readonly.currentValue;\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.texts && !isNil(changes.texts.currentValue)) {\n      Object.assign(this.config.texts, (changes.texts.currentValue));\n      calendarUpdateNeeded = true;\n    }\n\n    if (changes.expandedControlsStyle && !isNil(changes.expandedControlsStyle.currentValue)) {\n      this.config.expandedControlsStyle = changes.expandedControlsStyle.currentValue;\n    }\n\n    if (changes.hideControls && !isNil(changes.hideControls.currentValue)) {\n      this.config.hideControls = changes.hideControls.currentValue;\n    }\n\n    if (calendarRebuildNeeded) {\n      this._createCalendar(this.config.year, this.config.month);\n    } else if (calendarUpdateNeeded) {\n      this._updateCalendar();\n    }\n\n    this._makeCalendarDayFocusable();\n  }\n\n  changeUIYear(event: KeyboardEvent): void {\n    const keyCode = getEventKeyCode(event);\n\n    const changeValue = keyCode === UP_ARROW || keyCode === RIGHT_ARROW ? 1 :\n      keyCode === DOWN_ARROW || keyCode === LEFT_ARROW ? -1 : null;\n\n    if (changeValue) {\n      event.preventDefault();\n\n      if (changeValue > 0) {\n        this.nextYear();\n      } else {\n        this.prevYear();\n      }\n    }\n  }\n\n  prevYear(): void {\n    if (this.config.year <= 1) {\n      return;\n    }\n\n    this.config.year--;\n    this._createCalendar(this.config.year, this.config.month);\n\n    this.yearAnimationCounter--;\n    this.monthAnimationCounter--;\n  }\n\n  nextYear(): void {\n    if (this.config.year < 1) {\n      this.config.year = 0;\n    }\n\n    this.config.year++;\n    this._createCalendar(this.config.year, this.config.month);\n\n    this.yearAnimationCounter++;\n    this.monthAnimationCounter++;\n  }\n\n  changeUIMonth(event: KeyboardEvent): void {\n    const keyCode = getEventKeyCode(event);\n\n    const changeValue = keyCode === UP_ARROW || keyCode === RIGHT_ARROW ? 1 :\n      keyCode === DOWN_ARROW || keyCode === LEFT_ARROW ? -1 : null;\n\n    if (changeValue) {\n      event.preventDefault();\n\n      if (changeValue > 0) {\n        this.nextMonth();\n      } else {\n        this.prevMonth();\n      }\n    }\n  }\n\n  prevMonth(): void {\n    this.config.month = (this.config.month + 11) % MONTHS_A_YEAR;\n\n    if (this.config.month === 11) {\n      this.config.year--;\n      this.yearAnimationCounter--;\n    }\n\n    this._createCalendar(this.config.year, this.config.month);\n    this.monthAnimationCounter--;\n  }\n\n  nextMonth(): void {\n    this.config.month = (this.config.month + 1) % MONTHS_A_YEAR;\n\n    if (this.config.month === 0) {\n      this.config.year++;\n      this.yearAnimationCounter++;\n    }\n\n    this._createCalendar(this.config.year, this.config.month);\n    this.monthAnimationCounter++;\n  }\n\n  calendarDaysKeydownHandler(event: KeyboardEvent): void {\n    let daysShift;\n\n    switch (getEventKeyCode(event)) {\n      case DOWN_ARROW: {\n        daysShift = DAYS_A_WEEK;\n        break;\n      }\n      case UP_ARROW: {\n        daysShift = -DAYS_A_WEEK;\n        break;\n      }\n      case RIGHT_ARROW: {\n        daysShift = 1;\n        break;\n      }\n      case LEFT_ARROW: {\n        daysShift = -1;\n        break;\n      }\n      case PAGE_DOWN: {\n        event.preventDefault();\n\n        if (event.shiftKey) {\n          // Changes the grid of dates to the next year.\n          this.nextYear();\n\n        } else {\n          // Changes the grid of dates to the next month.\n          this.nextMonth();\n        }\n\n        let newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index];\n\n        // If that day does not exist in current month, then moves focus to the same day of the previous or next week.\n        if (newFocusedCalendarDay.isOtherMonth) {\n          if (newFocusedCalendarDay.index < (this.calendar.days.length / 2)) {\n            newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK].isOtherMonth ?\n              this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK * 2] :\n              this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK];\n          } else {\n            newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK].isOtherMonth ?\n              this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK * 2] :\n              this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK];\n          }\n        }\n\n        this.focusedCalendarDay = cloneDeep(newFocusedCalendarDay);\n        this._makeCalendarDayFocusable(this.focusedCalendarDay.index, true);\n\n        break;\n      }\n      case PAGE_UP: {\n        event.preventDefault();\n\n        if (event.shiftKey) {\n          // Changes the grid of dates to the previous year.\n          this.prevYear();\n\n        } else {\n          // Changes the grid of dates to the previous month.\n          this.prevMonth();\n        }\n\n        let newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index];\n\n        // If that day does not exist in current month, then moves focus to the same day of the previous or next week.\n        if (newFocusedCalendarDay.isOtherMonth) {\n          if (newFocusedCalendarDay.index < (this.calendar.days.length / 2)) {\n            newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK].isOtherMonth ?\n              this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK * 2] :\n              this.calendar.days[this.focusedCalendarDay.index + DAYS_A_WEEK];\n          } else {\n            newFocusedCalendarDay = this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK].isOtherMonth ?\n              this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK * 2] :\n              this.calendar.days[this.focusedCalendarDay.index - DAYS_A_WEEK];\n          }\n        }\n\n        this.focusedCalendarDay = cloneDeep(newFocusedCalendarDay);\n        this._makeCalendarDayFocusable(this.focusedCalendarDay.index, true);\n\n        break;\n      }\n      case HOME: {\n        // Moves focus to the first day (e.g Sunday) of the current week.\n\n        event.preventDefault();\n\n        let newFocusedCalendarDay = this.calendar.weeks\n          .find(week => week.find(dayOfWeek => dayOfWeek.index === this.focusedCalendarDay.index))[0];\n\n        if (newFocusedCalendarDay.index === this.focusedCalendarDay.index) {\n          return;\n        }\n\n        if (newFocusedCalendarDay.isOtherMonth) {\n          const prevMonthDateToFocus = newFocusedCalendarDay.value.date;\n\n          this.prevMonth();\n\n          newFocusedCalendarDay = this.calendar.days\n            .find(day => !day.isOtherMonth && day.value.date === prevMonthDateToFocus);\n        }\n\n        this.focusedCalendarDay = cloneDeep(newFocusedCalendarDay);\n        this._makeCalendarDayFocusable(this.focusedCalendarDay.index, true);\n\n        break;\n      }\n      case END: {\n        // Moves focus to the last day (e.g. Saturday) of the current week.\n\n        event.preventDefault();\n\n        let newFocusedCalendarDay = this.calendar.weeks\n          .find(week => week.find(dayOfWeek => dayOfWeek.index === this.focusedCalendarDay.index))[DAYS_A_WEEK - 1];\n\n        if (newFocusedCalendarDay.index === this.focusedCalendarDay.index) {\n          return;\n        }\n\n        if (newFocusedCalendarDay.isOtherMonth) {\n          const nextMonthDateToFocus = newFocusedCalendarDay.value.date;\n\n          this.nextMonth();\n\n          newFocusedCalendarDay =\n            this.calendar.days.find(day => !day.isOtherMonth && day.value.date === nextMonthDateToFocus);\n        }\n\n        this.focusedCalendarDay = cloneDeep(newFocusedCalendarDay);\n        this._makeCalendarDayFocusable(this.focusedCalendarDay.index, true);\n\n        break;\n      }\n      case SPACE:\n      case ENTER: {\n        event.preventDefault();\n\n        if (this.focusedCalendarDay) {\n          this.selectDate(this.focusedCalendarDay);\n        }\n\n        break;\n      }\n      case TAB: {\n        this._makeCalendarDayFocusable();\n\n        break;\n      }\n    }\n\n    if (daysShift) {\n      event.preventDefault();\n\n      const nextFocusIndex = this.focusedCalendarDay.index + daysShift;\n      let nextFocusCalendarDay = this.calendar.days.find(day => !day.isOtherMonth && day.index === nextFocusIndex);\n\n      if (!nextFocusCalendarDay) {\n        if (daysShift > 0) {\n          const nextMonthDayToFocus =\n            this.focusedCalendarDay.value.date + daysShift - this.calendar.currentMonthDaysCount;\n\n          this.nextMonth();\n\n          nextFocusCalendarDay = this.calendar.days.find(day => !day.isOtherMonth && day.value.date === nextMonthDayToFocus);\n\n        } else {\n          // const tempDate = nextFocusIndex - this.calendar.days[0].index + 1;\n          this.prevMonth();\n\n          const prevMonthDateToFocus =\n            this.focusedCalendarDay.value.date + daysShift + this.calendar.currentMonthDaysCount;\n\n          nextFocusCalendarDay = this.calendar.days.find(day => !day.isOtherMonth && day.value.date === prevMonthDateToFocus);\n        }\n      }\n\n      this.focusedCalendarDay = cloneDeep(nextFocusCalendarDay);\n      this._makeCalendarDayFocusable(this.focusedCalendarDay.index, true);\n    }\n  }\n\n  selectDate(calendarDay: RxCalendarDay): void {\n    if (calendarDay.isOtherMonth || calendarDay.isDisabled || calendarDay.isReadonly) {\n      return;\n    }\n\n    if (!this.config.readonly) {\n      this.config.activeDate = calendarDay.value;\n      this.onDateChange.emit(calendarDay.value);\n      this.focusedCalendarDay = cloneDeep(calendarDay);\n      this._updateCalendar();\n    }\n  }\n\n  private _createCalendar(year: number, month: number): void {\n    if (!this.calendar) {\n      const dayNames = this._i18n.getWeekdayNames(false, this.localeID);\n      const dayNamesShort = this._i18n.getWeekdayNames(true, this.localeID);\n\n      this.calendar = {\n        year: year,\n        month: month,\n        dayNames: Array(DAYS_A_WEEK)\n          .fill(0)\n          .map((day, index) => {\n            return dayNames[(index + this.config.firstDayOfWeek) % DAYS_A_WEEK];\n          }),\n        dayNamesShort: Array(DAYS_A_WEEK)\n          .fill(0)\n          .map((day, index) => {\n            return dayNamesShort[(index + this.config.firstDayOfWeek) % DAYS_A_WEEK];\n          }),\n        monthNames: this._i18n.getMonthNames(false, this.localeID),\n        monthNamesShort: this._i18n.getMonthNames(true, this.localeID),\n        weeks: Array(CALENDAR_ROWS)\n          .fill(0)\n          .map((value, weekIndex) => Array(DAYS_A_WEEK)\n            .fill(0)\n            .map((value, dayIndex) => new RxCalendarDay(weekIndex * DAYS_A_WEEK + dayIndex))),\n        days: [],\n        currentMonthDaysCount: 0\n      };\n    } else {\n      this.calendar.year = year;\n      this.calendar.month = month;\n    }\n\n    // Need to use temp date for cover cases with year value < 100\n    const tempJsDate = new Date(2000, 0, 1, 0, 0, 0, 0); // 2000-01-01\n\n    // Prev month\n    tempJsDate.setFullYear(year);\n    tempJsDate.setMonth(month);\n    tempJsDate.setDate(0); // set the last day of prev month\n\n    const prevMonth = tempJsDate.getMonth(); // number of prev month\n    const prevMonthYear = tempJsDate.getFullYear(); // number of prev month\n    const prevMonthDaysCount = tempJsDate.getDate(); // number of days in selected month\n\n    // Current month\n    tempJsDate.setDate(1); // set date firstly to be sure year/month will be set right\n    tempJsDate.setFullYear(year); // reset year for case when prev month in the prev year\n    tempJsDate.setMonth(month); // set current month\n\n    const currentMonthFirstDayOfWeek = tempJsDate.getDay(); // first calendarDay of the month\n\n    tempJsDate.setMonth(month + 1); // set to next month\n    tempJsDate.setDate(0); // set the last day of current month\n\n    const currentMonthDaysCount = tempJsDate.getDate(); // number of days in selected month\n\n    // Next month\n    tempJsDate.setDate(1); // set date firstly to be sure year/month will be set right\n    tempJsDate.setFullYear(year); // reset year for case when next month in the next year\n    tempJsDate.setMonth(month + 1);\n\n    const nextMonth = tempJsDate.getMonth(); // number of prev month\n    const nextMonthYear = tempJsDate.getFullYear(); // number of prev month\n\n    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n    let currentMonthDayCounter = 1;\n    let nextMonthDayCounter = 1;\n\n    const calendarMonthFirstDayOfWeek = (currentMonthFirstDayOfWeek - this.config.firstDayOfWeek + DAYS_A_WEEK) % DAYS_A_WEEK;\n\n    this.calendar.weeks.forEach((week, weekIndex) => {\n      week.forEach((dayOfWeek, dayOfWeekIndex) => {\n        const calendarDayValue: RxDateStruct = {\n          year: null,\n          month: null,\n          date: null\n        };\n\n        const calendarDay: RxCalendarDay = this.calendar.weeks[weekIndex][dayOfWeekIndex];\n\n        if ((weekIndex === 0) && (dayOfWeekIndex < calendarMonthFirstDayOfWeek)) {\n          // prev month\n          calendarDayValue.year = prevMonthYear;\n          calendarDayValue.month = prevMonth;\n          calendarDayValue.date = prevMonthDaysCount + dayOfWeekIndex - (calendarMonthFirstDayOfWeek - 1);\n        } else if (currentMonthDayCounter > currentMonthDaysCount) {\n          // next month\n          calendarDayValue.year = nextMonthYear;\n          calendarDayValue.month = nextMonth;\n          calendarDayValue.date = nextMonthDayCounter++;\n        } else {\n          // current month\n          calendarDayValue.year = year;\n          calendarDayValue.month = month;\n          calendarDayValue.date = currentMonthDayCounter++;\n        }\n\n        calendarDay.value = calendarDayValue;\n        calendarDay.isOtherMonth = calendarDay.value.month !== month;\n        calendarDay.isToday = isEqual(calendarDay.value, this.today);\n      });\n    });\n\n    this.calendar.days = this.calendar.weeks.reduce<RxCalendarDay[]>((sum, current) => {\n      return sum.concat(current);\n    }, []);\n\n    this.calendar.currentMonthDaysCount = currentMonthDaysCount;\n\n    this._updateCalendar();\n  }\n\n  private _updateCalendar(): void {\n    const rangeFromTS = this.config.rangeFrom ? getDateStamp(this.config.rangeFrom) : null;\n    const rangeToTS = this.config.rangeTo ? getDateStamp(this.config.rangeTo) : null;\n\n    this.calendar.weeks.forEach((week, weekIndex) => {\n      week.forEach((dayOfWeek, dayOfWeekIndex) => {\n        const calendarDay: RxCalendarDay = this.calendar.weeks[weekIndex][dayOfWeekIndex];\n\n        const currentDayTS = calendarDay.value ? getDateStamp(calendarDay.value) : null;\n\n        calendarDay.isSelected = isEqual(calendarDay.value, this.config.activeDate);\n        calendarDay.isReadonly = this.config.readonly;\n        calendarDay.isDisabled =\n          this.config.disabled || (isFunction(this.config.dayFilter) ? !this.config.dayFilter(calendarDay.value) : false);\n        calendarDay.isRangeFrom = !isNil(rangeFromTS) && (rangeFromTS === currentDayTS);\n        calendarDay.isRangeTo = !isNil(rangeToTS) && (rangeToTS === currentDayTS);\n        calendarDay.isInRange = !isNil(rangeFromTS) && !isNil(rangeToTS) &&\n          (currentDayTS >= rangeFromTS && currentDayTS <= rangeToTS);\n      });\n    });\n  }\n\n  private _makeCalendarDayFocusable(calendarDayIndex?: number, setFocusToElement?: boolean): void {\n    if (isNil(calendarDayIndex)) {\n      const nextFocusCalendarDay = this.calendar.days.find(day => day.isSelected) ||\n        this.calendar.days.find(day => !day.isOtherMonth && day.value.date === 1);\n\n      this.focusedCalendarDay = cloneDeep(nextFocusCalendarDay);\n\n      if (this.focusedCalendarDay) {\n        calendarDayIndex = this.focusedCalendarDay.index;\n      }\n    }\n\n    this.dayButtonElements?.forEach((item, index) => {\n      if (index === calendarDayIndex) {\n        item.nativeElement.setAttribute('tabindex', '0');\n\n        if (setFocusToElement) {\n          item.nativeElement.focus();\n        }\n      } else {\n        item.nativeElement.setAttribute('tabindex', '-1');\n      }\n    });\n  }\n}\n","<div class=\"a3t-calendar\">\n  <div class=\"a3t-calendar--controls\"\n       *ngIf=\"!config.hideControls\"\n       [class.a3t-calendar--controls_expanded]=\"config.expandedControlsStyle\">\n    <ng-container [ngTemplateOutlet]=\"!config.expandedControlsStyle ? pickMonth : pickYear\"></ng-container>\n    <ng-container [ngTemplateOutlet]=\"config.expandedControlsStyle ? pickMonth : pickYear\"></ng-container>\n\n    <ng-template #pickYear>\n      <div class=\"a3t-calendar--controls-line\">\n        <button type=\"button\"\n                class=\"a3t-calendar--controls-btn\"\n                aria-hidden=\"true\"\n                tabindex=\"-1\"\n                [attr.data-testid]=\"testID + '_prevYear'\"\n                [disabled]=\"config.disabled\"\n                [class.disabled]=\"config.disabled\"\n                (click)=\"$event.stopPropagation(); prevYear()\">\n          <adapt-icon [adaptRadarDisableEventSending]=\"true\" [name]=\"isRtl ? 'angle_right' : 'angle_left'\"></adapt-icon>\n        </button>\n        <div class=\"a3t-calendar--controls-info\"\n             role=\"spinbutton\"\n             [attr.aria-label]=\"config.texts.emptyYear\"\n             [attr.tabindex]=\"config.disabled ? undefined : 0\"\n             [attr.aria-valuenow]=\"calendar.year\"\n             [attr.data-testid]=\"testID + '_year'\"\n             (keydown)=\"changeUIYear($event)\">\n          <div [@slideAnimation]=\"yearAnimationCounter\">{{calendar.year}}</div>\n        </div>\n        <button type=\"button\"\n                class=\"a3t-calendar--controls-btn\"\n                aria-hidden=\"true\"\n                tabindex=\"-1\"\n                [attr.data-testid]=\"testID + '_nextYear'\"\n                [disabled]=\"config.disabled\"\n                [class.disabled]=\"config.disabled\"\n                (click)=\"$event.stopPropagation(); nextYear()\">\n          <adapt-icon [adaptRadarDisableEventSending]=\"true\" [name]=\"isRtl ? 'angle_left' : 'angle_right'\"></adapt-icon>\n        </button>\n      </div>\n    </ng-template>\n    <ng-template #pickMonth>\n      <div class=\"a3t-calendar--controls-line\">\n        <button type=\"button\"\n                class=\"a3t-calendar--controls-btn\"\n                aria-hidden=\"true\"\n                tabindex=\"-1\"\n                [attr.data-testid]=\"testID + '_prevMonth'\"\n                [disabled]=\"config.disabled\"\n                [class.disabled]=\"config.disabled\"\n                (click)=\"$event.stopPropagation(); prevMonth()\">\n          <adapt-icon [adaptRadarDisableEventSending]=\"true\" [name]=\"isRtl ? 'angle_right' : 'angle_left'\"></adapt-icon>\n        </button>\n        <div class=\"a3t-calendar--controls-info\"\n             role=\"spinbutton\"\n             [attr.aria-label]=\"config.texts.emptyMonth\"\n             [attr.tabindex]=\"config.disabled ? undefined : 0\"\n             [attr.aria-valuetext]=\"calendar.month\"\n             [attr.data-testid]=\"testID + '_month'\"\n             (keydown)=\"changeUIMonth($event)\">\n          <div [@slideAnimation]=\"monthAnimationCounter\">\n            {{config.expandedControlsStyle ? calendar.monthNames[calendar.month] : calendar.monthNamesShort[calendar.month]}}\n          </div>\n        </div>\n        <button type=\"button\"\n                class=\"a3t-calendar--controls-btn\"\n                aria-hidden=\"true\"\n                tabindex=\"-1\"\n                [attr.data-testid]=\"testID + '_nextMonth'\"\n                [disabled]=\"config.disabled\"\n                [class.disabled]=\"config.disabled\"\n                (click)=\"$event.stopPropagation(); nextMonth()\">\n          <adapt-icon [adaptRadarDisableEventSending]=\"true\" [name]=\"isRtl ? 'angle_left' : 'angle_right'\"></adapt-icon>\n        </button>\n      </div>\n    </ng-template>\n  </div>\n\n  <table role=\"grid\" class=\"a3t-calendar--table\">\n    <thead>\n    <tr>\n      <ng-container\n        *ngFor=\"let dayOfWeek of calendar.dayNamesShort; let index = index; let first = first; let last = last\">\n        <th class=\"a3t-calendar--table-edge-cell\" aria-hidden=\"true\" *ngIf=\"first\"></th>\n        <th class=\"a3t-calendar--table-week-name\" scope=\"col\" [abbr]=\"calendar.dayNames[index]\">\n          {{dayOfWeek}}\n        </th>\n        <th class=\"a3t-calendar--table-edge-cell\" aria-hidden=\"true\" *ngIf=\"last\"></th>\n      </ng-container>\n    </tr>\n    </thead>\n    <tbody class=\"a3t-calendar--table-body\" (keydown)=\"calendarDaysKeydownHandler($event)\">\n    <tr aria-hidden=\"true\">\n      <td colspan=\"9\" class=\"a3t-calendar--table-space-cell\"></td>\n    </tr>\n    <tr *ngFor=\"let calendarWeek of calendar.weeks\">\n      <ng-container *ngFor=\"let calendarDay of calendarWeek; let first = first; let last = last\">\n        <td class=\"a3t-calendar--table-edge-cell\"\n            aria-hidden=\"true\"\n            *ngIf=\"first\"\n            [class.range]=\"calendarDay.isInRange && !calendarDay.isRangeFrom\"\n            [class.other-month]=\"calendarDay.isOtherMonth\"></td>\n        <td class=\"a3t-calendar--table-day\"\n            [class.range]=\"!calendarDay.isOtherMonth && calendarDay.isInRange && !(calendarDay.isRangeFrom && calendarDay.isRangeTo)\"\n            [class.range-from]=\"!calendarDay.isOtherMonth && calendarDay.isRangeFrom && !calendarDay.isRangeTo\"\n            [class.range-to]=\"!calendarDay.isOtherMonth && calendarDay.isRangeTo && !calendarDay.isRangeFrom\">\n          <button type=\"button\"\n                  tabindex=\"-1\"\n                  #dayButtonElement\n                  (click)=\"selectDate(calendarDay)\"\n                  [class.active]=\"calendarDay.isSelected\"\n                  [class.readonly]=\"calendarDay.isReadonly\"\n                  [class.today]=\"calendarDay.isToday\"\n                  [class.other-month]=\"calendarDay.isOtherMonth\"\n                  [class.range-edge]=\"calendarDay.isRangeFrom || calendarDay.isRangeTo\"\n                  [class.disabled]=\"calendarDay.isDisabled || calendarDay.isOtherMonth\"\n                  [attr.aria-disabled]=\"calendarDay.isDisabled || calendarDay.isOtherMonth\"\n                  [attr.aria-readonly]=\"calendarDay.isReadonly || calendarDay.isDisabled || calendarDay.isOtherMonth\"\n                  [attr.aria-selected]=\"calendarDay.isSelected\"\n                  [attr.data-testid]=\"testID + '_day_' + calendarDay.value.date\">\n            <div [@slideAnimation]=\"monthAnimationCounter\">{{calendarDay.value.date}}</div>\n          </button>\n        </td>\n        <td class=\"a3t-calendar--table-edge-cell\"\n            aria-hidden=\"true\"\n            *ngIf=\"last\"\n            [class.range]=\"calendarDay.isInRange && !calendarDay.isRangeTo\"\n            [class.other-month]=\"calendarDay.isOtherMonth\"></td>\n      </ng-container>\n    </tr>\n    <tr aria-hidden=\"true\">\n      <td colspan=\"9\" class=\"a3t-calendar--table-space-cell\"></td>\n    </tr>\n    </tbody>\n  </table>\n</div>\n"]}