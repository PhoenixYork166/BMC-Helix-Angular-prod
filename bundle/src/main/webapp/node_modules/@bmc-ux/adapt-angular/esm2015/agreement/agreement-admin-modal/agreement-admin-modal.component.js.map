{"version":3,"file":"agreement-admin-modal.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-angular/src/agreement/agreement-admin-modal/agreement-admin-modal.component.ts","../../../../../../libs/adapt-angular/src/agreement/agreement-admin-modal/agreement-admin-modal.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {AdaptModalService} from '../../modal/modal.service';\nimport {AdaptMessageService} from '../../toast/toast-message.service';\nimport {AdaptAgreementModalOpenEvent, AdaptAgreementState,} from '../argeement.model';\n\n@Component({\n  selector: 'adapt-agreement-modal',\n  styleUrls: ['../agreement.scss'],\n  templateUrl: './agreement-admin-modal.component.html',\n  encapsulation: ViewEncapsulation.None\n})\n\nexport class AdaptAgreementAdminModalComponent implements OnChanges {\n\n  isCollapsedPerformanceContent: boolean = true;\n  isCollapsedMarketingContent: boolean = true;\n\n  @Input() multiProductUsage: boolean = false;\n\n  @Input() state: AdaptAgreementState = {\n    accountPerformance: false,\n    accountMarketing: false,\n    organizationPerformance: false,\n    organizationMarketing: false\n  };\n\n  @Input() openModal: boolean = false;\n  @Input() testID: string;\n  @Input() showNotificationAfterSubmit: boolean = true;\n  @Input() notificationLinkHandler: () => unknown;\n\n  @Output() readonly stateChange: EventEmitter<AdaptAgreementState> = new EventEmitter<AdaptAgreementState>();\n  @Output() readonly submitButtonClick: EventEmitter<AdaptAgreementState> = new EventEmitter<AdaptAgreementState>();\n  @Output() readonly modalOpen: EventEmitter<AdaptAgreementModalOpenEvent> = new EventEmitter<AdaptAgreementModalOpenEvent>();\n\n  @ViewChild('mTemplate') mTemplate: TemplateRef<void>;\n\n  constructor(private _modalService: AdaptModalService,\n              private _messageService: AdaptMessageService) {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['openModal']?.currentValue) {\n      this.open();\n    }\n  }\n\n  open(): void {\n    const promise = this._modalService\n      .open({\n        content: this.mTemplate,\n        testID: this.testID,\n        blockKeyboard: true,\n        beforeDismiss: () => false\n      });\n\n    this.modalOpen.emit({promise});\n  }\n\n  handlePerformanceStateChange(): void {\n    if (!this.state.organizationPerformance) {\n      this.state.accountPerformance = false;\n      this.state.organizationMarketing = false;\n      this.state.accountMarketing = false;\n    }\n\n    this.handleStateChange();\n  }\n\n  handleMarketingStateChange(): void {\n    if (!this.state.organizationMarketing) {\n      this.state.accountMarketing = false;\n    }\n\n    this.handleStateChange();\n  }\n\n  handleStateChange(): void {\n    this.stateChange.emit(this.state);\n  }\n\n  handleSubmit(close: () => void): void {\n    this.submitButtonClick.emit(this.state);\n\n    close();\n\n    if (this.showNotificationAfterSubmit) {\n      this._messageService.add({\n        severity: 'info',\n        summary: 'Analytics preferences have been updated',\n        detail: 'Your analytics choices have been submitted. If you would like to change these settings you may do so in your application’s settings.',\n        link: 'Go to settings',\n        linkHandler: this.notificationLinkHandler,\n        life: 10000\n      });\n    }\n  }\n\n  getSubmitButtonText(): string {\n    if (this.state.organizationPerformance && this.state.organizationMarketing) {\n      return 'Agree and submit';\n    }\n\n    if (!this.state.organizationPerformance) {\n      return 'Opt-out of data collection';\n    }\n\n    if (!this.state.organizationMarketing) {\n      return 'Agree to selected and submit';\n    }\n  }\n}\n","<ng-template #mTemplate let-close=\"close\">\n  <div class=\"modal-body\">\n    <h2 class=\"agreement__main-title\">Allow data collection for product improvement</h2>\n\n    <p>Help BMC improve your experience with our products.</p>\n\n    <hr class=\"agreement__separator\">\n\n    <ng-container>\n      <adapt-rx-switch class=\"agreement__switcher\"\n                       [adaptRadarDisableEventSending]=\"true\"\n                       [(ngModel)]=\"state.organizationPerformance\"\n                       (ngModelChange)=\"handlePerformanceStateChange()\"\n                       [label]=\"'Enable data collection for performance and product improvement'\"></adapt-rx-switch>\n\n      <div class=\"agreement__content\">\n        <adapt-rx-checkbox *ngIf=\"state.organizationPerformance\"\n                           [adaptRadarDisableEventSending]=\"true\"\n                           [(ngModel)]=\"state.accountPerformance\"\n                           (ngModelChange)=\"handleStateChange()\"\n                           [label]=\"'Turn on data collection for my account'\">\n        </adapt-rx-checkbox>\n\n        <p class=\"agreement__content-text\">Enabling this feature allows BMC to collect anonymous information about\n          individual usage of\n          <span *ngIf=\"!multiProductUsage\">this product.</span>\n          <span *ngIf=\"multiProductUsage\">BMC’s products and services.</span>\n          The data collected will be used to identify defects, optimize product performance, and aid in the\n          development of new product features. Enabling this option will ensure that your user’s needs are taken\n          into account when planning for new product improvements.</p>\n\n        <adapt-alert *ngIf=\"!multiProductUsage\"\n          [config]=\"{content: 'Turning this feature on will enable data collection for all users of this product. Users may change these options at any time in their settings.', type: 'inline', variant: 'info'}\"></adapt-alert>\n\n          <adapt-alert *ngIf=\"multiProductUsage\"\n            [config]=\"{content: 'Turning this feature on will enable data collection for all users of BMC’s products and services. Users may change these options at any time in their settings.', type: 'inline', variant: 'info'}\"></adapt-alert>\n\n        <button type=\"button\"\n                adapt-button\n                btn-type=\"tertiary\"\n                class=\"p-0 mt-3 mb-3 agreement__collapse-btn\"\n                [adaptRadarDisableEventSending]=\"true\"\n                (click)=\"isCollapsedPerformanceContent = !isCollapsedPerformanceContent\">\n          <span>Click for examples of the types of data we collect</span>\n          <span class=\"p-start-1\"\n                [ngClass]=\"{'d-icon-angle_down': isCollapsedPerformanceContent, 'd-icon-angle_up': !isCollapsedPerformanceContent}\"></span>\n        </button>\n\n        <ul class=\"m-0\" [collapse]=\"isCollapsedPerformanceContent\"\n            [adaptRadarDisableEventSending]=\"true\"\n            [ngClass]=\"{'mb-3': !isCollapsedPerformanceContent, 'agreement__text-hidden': isCollapsedPerformanceContent}\">\n          <li>Time to complete certain tasks</li>\n          <li>Counts of clicks or taps on certain elements, like buttons</li>\n          <li>The number of errors experienced while using a BMC product, and their type</li>\n          <li>Time spent not actively using a BMC product</li>\n          <li>Responses to ratings and surveys provided by BMC products</li>\n          <li>How often a product is signed in to, or signed out of</li>\n          <li>Any movement from one BMC product to another</li>\n          <li>Information that allows us to identify a product, or instance of a product</li>\n          <li>Diagnostic information needed to technical troubleshooting</li>\n          <li>General information about your computer or web browser that could be used to identify technical problems\n          </li>\n        </ul>\n      </div>\n\n      <hr class=\"agreement__separator\">\n    </ng-container>\n\n    <ng-container *ngIf=\"state.organizationPerformance\">\n      <adapt-rx-switch class=\"agreement__switcher\"\n                       [adaptRadarDisableEventSending]=\"true\"\n                       [(ngModel)]=\"state.organizationMarketing\"\n                       (ngModelChange)=\"handleMarketingStateChange()\"\n                       [label]=\"'Enable data collection for marketing and outreach'\"></adapt-rx-switch>\n\n      <div class=\"agreement__content\">\n        <adapt-rx-checkbox *ngIf=\"state.organizationMarketing\"\n                           [adaptRadarDisableEventSending]=\"true\"\n                           [(ngModel)]=\"state.accountMarketing\"\n                           (ngModelChange)=\"handleStateChange()\"\n                           [label]=\"'Turn on data collection for my account'\">\n        </adapt-rx-checkbox>\n\n        <p class=\"agreement__content-text\">Enabling this feature allows BMC to use the data we anonymously collect to better\n          inform your company of relevant products and services, as well as to reach out to individuals at your organization\n          for feedback and other requests. Enabling this option will improve the relevancy of BMC’s communications, as well\n          as provide your company with more targeted offerings.</p>\n\n        <adapt-alert\n          [adaptRadarDisableEventSending]=\"true\"\n          [config]=\"{content: 'Turning this feature on will enable data collection for all users in your company. Users will be required to opt-in before any data collection is done, and may change these options at any time in their settings.', type: 'inline', variant: 'info'}\"></adapt-alert>\n\n        <button type=\"button\"\n                adapt-button\n                btn-type=\"tertiary\"\n                class=\"p-0 mt-3 mb-3 agreement__collapse-btn\"\n                [adaptRadarDisableEventSending]=\"true\"\n                (click)=\"isCollapsedMarketingContent = !isCollapsedMarketingContent\">\n          <span>Click for examples of ways data may be used</span>\n          <span class=\"p-start-1\"\n                [ngClass]=\"{'d-icon-angle_down': isCollapsedMarketingContent, 'd-icon-angle_up': !isCollapsedMarketingContent}\"></span>\n        </button>\n\n        <ul class=\"m-0\"\n            [collapse]=\"isCollapsedMarketingContent\"\n            [adaptRadarDisableEventSending]=\"true\"\n            [ngClass]=\"{'mb-3': !isCollapsedMarketingContent, 'agreement__text-hidden': isCollapsedMarketingContent}\">\n          <li>To better inform sales teams about the way your company leverages BMC products</li>\n          <li>To understand industry trends to better support your company</li>\n          <li>To identify communications topics relating to the industry</li>\n          <li>To better target messaging around new products and features</li>\n        </ul>\n      </div>\n\n      <hr class=\"agreement__separator\">\n    </ng-container>\n\n    <p>By enabling this feature you consent to BMC’s collection, processing, and use of user analytics data\n      described, but not limited to, the examples outlined above. You can change your selection in your application’s\n      settings at any time.</p>\n\n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\"\n            class=\"btn btn-primary\"\n            (click)=\"handleSubmit(close)\">{{getSubmitButtonText()}}</button>\n  </div>\n</ng-template>\n"]}