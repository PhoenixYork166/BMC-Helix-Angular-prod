{"version":3,"file":"live.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/common/live.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,MAAM,EAAE,UAAU,EAAE,cAAc,EAAY,MAAM,eAAe,CAAC;AAC5E,OAAO,EAAC,QAAQ,EAAC,MAAM,iBAAiB,CAAC;;AAGzC,uEAAuE;AACvE,uIAAuI;AACvI,oDAAoD;AACpD,MAAM,CAAC,MAAM,eAAe,GAAG,IAAI,cAAc,CAAC,sBAAsB,CAAC,CAAC;AAC1E,MAAM,CAAC,MAAM,uBAAuB,GAAG,GAAG,CAAC;AAG3C,kCAAkC;AAClC,iEAAiE;AACjE,SAAS,iBAAiB,CAAC,QAAa;IACtC,MAAM,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAE9C,OAAO,CAAC,YAAY,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;IAC5C,OAAO,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;IAE5C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAEjC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAEnC,OAAO,OAAO,CAAC;AACjB,CAAC;AAID,MAAM,OAAO,IAAI;IAGf;IACE,kCAAkC;IAClC,iEAAiE;IACvC,QAAa,EAAE,kDAAkD;IAC3F,kCAAkC;IAClC,iEAAiE;IAChC,MAAW;QAHlB,aAAQ,GAAR,QAAQ,CAAK;QAGN,WAAM,GAAN,MAAM,CAAK;QAC5C,IAAI,CAAC,QAAQ,GAAG,iBAAiB,CAAC,QAAQ,CAAC,CAAC;IAC9C,CAAC;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IACzD,CAAC;IAED,GAAG,CAAC,OAAe;QACjB,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC9B,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAE1B,OAAO,CAAC,WAAW,GAAG,EAAE,CAAC;QACzB,MAAM,OAAO,GAAG,GAAW,EAAE,CAAC,OAAO,CAAC,WAAW,GAAG,OAAO,CAAC;QAE5D,IAAI,KAAK,KAAK,IAAI,EAAE;YAClB,OAAO,EAAE,CAAC;SACX;aAAM;YACL,UAAU,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;SAC5B;IACH,CAAC;;wDA7BU,IAAI,cAML,QAAQ,eAGR,eAAe;0DATd,IAAI,WAAJ,IAAI;uFAAJ,IAAI;cADhB,UAAU;;sBAON,MAAM;uBAAC,QAAQ;;sBAGf,MAAM;uBAAC,eAAe","sourcesContent":["import {Inject, Injectable, InjectionToken, OnDestroy} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\n\n\n// usefulness (and default value) of delay documented in Material's CDK\n// https://github.com/angular/material2/blob/6405da9b8e8532a7e5c854c920ee1815c275d734/src/cdk/a11y/live-announcer/live-announcer.ts#L50\n// export type ARIA_LIVE_DELAY_TYPE = number | null;\nexport const ARIA_LIVE_DELAY = new InjectionToken('live announcer delay');\nexport const DEFAULT_ARIA_LIVE_DELAY = 100;\n\n\n// TODO: Refactor this if possible\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nfunction createLiveElement(document: any): HTMLElement {\n  const element = document.createElement('div');\n\n  element.setAttribute('aria-live', 'polite');\n  element.setAttribute('aria-atomic', 'true');\n\n  element.classList.add('sr-only');\n\n  document.body.appendChild(element);\n\n  return element;\n}\n\n\n@Injectable()\nexport class Live implements OnDestroy {\n  private _element: HTMLElement;\n\n  constructor(\n    // TODO: Refactor this if possible\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    @Inject(DOCUMENT) private document: any, // https://github.com/angular/angular/issues/20351\n    // TODO: Refactor this if possible\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    @Inject(ARIA_LIVE_DELAY) private _delay: any) {\n    this._element = createLiveElement(document);\n  }\n\n  ngOnDestroy(): void {\n    this._element.parentElement.removeChild(this._element);\n  }\n\n  say(message: string): void {\n    const element = this._element;\n    const delay = this._delay;\n\n    element.textContent = '';\n    const setText = (): string => element.textContent = message;\n\n    if (delay === null) {\n      setText();\n    } else {\n      setTimeout(setText, delay);\n    }\n  }\n}\n"]}