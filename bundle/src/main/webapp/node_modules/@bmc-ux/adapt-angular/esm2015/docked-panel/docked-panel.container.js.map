{"version":3,"file":"docked-panel.container.js","sourceRoot":"","sources":["../../../../../libs/adapt-angular/src/docked-panel/docked-panel.container.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, EventEmitter, HostBinding, OnDestroy, OnInit, Output} from '@angular/core';\nimport {AnimationEvent, query, transition, trigger, useAnimation} from '@angular/animations';\nimport {fromEvent, Subscription} from 'rxjs';\n\nimport {ANIMATION_TIMING_FUNCTION, ANIMATION_NAME} from '../common/animation';\nimport {DismissReasons} from '../common/common.enums';\n\nimport {AdaptDockedPanelConfig} from './docked-panel.config';\nimport {AdaptDockedPanelStackService} from './docked-panel-stack.service';\n\n@Component({\n  selector: 'adapt-docked-panel-container',\n  template: `\n    <div [class]=\"'dp-container direction-' + dps.direction\" (click)=\"containerClick($event)\">\n      <ng-container *ngFor=\"let panel of dps.openedPanels\">\n        <adapt-docked-panel [panel]=\"panel\"\n                            [content]=\"panel.config.content\"\n                            [class.dp-parent]=\"panel === dps.parentDP\"\n                            [@panelAnimation]\n                            (@panelAnimation.done)=\"closeAnimationEnd($event)\"></adapt-docked-panel>\n      </ng-container>\n    </div>\n\n    <div [@backdropAnimation]\n         *ngIf=\"dps.openedPanels.length\"\n         [style.opacity]=\"dps.hideBackdrop ? '0' : '1'\">\n      <div class=\"modal-backdrop show\"></div>\n    </div>\n  `,\n  animations: [\n    trigger(\n      'panelAnimation', [\n        transition(\n          'void => *', [\n            useAnimation(ANIMATION_NAME.width, {\n              params: {\n                timingFunction: ANIMATION_TIMING_FUNCTION.base.transitionIn\n              }\n            })\n          ]\n        ),\n        transition(\n          '* => void', [\n            useAnimation(ANIMATION_NAME.width, {\n              params: {\n                from: '*',\n                to: '0',\n                timingFunction: ANIMATION_TIMING_FUNCTION.base.transitionOut\n              }\n            })\n          ]\n        )\n      ]\n    ),\n    trigger(\n      'backdropAnimation', [\n        transition(\n          'void => *', [\n            query('.modal-backdrop', [\n              useAnimation(ANIMATION_NAME.opacity)\n            ])\n          ]\n        ),\n        transition(\n          '* => void', [\n            query('.modal-backdrop', [\n              useAnimation(ANIMATION_NAME.opacity, {\n                params: {\n                  from: '*',\n                  to: '0'\n                }\n              })\n            ])\n          ]\n        )\n      ]\n    )\n  ]\n})\nexport class AdaptDockedPanelContainerComponent implements OnInit, OnDestroy {\n  dps: AdaptDockedPanelStackService;\n  @HostBinding('style.position') position: string = 'fixed';\n  @HostBinding('style.top') top: string = '0';\n  @HostBinding('style.left') left: string = '0';\n  @HostBinding('style.right') right: string = '0';\n  @HostBinding('style.bottom') bottom: string = '0';\n  @HostBinding('style.zIndex') zIndex: string = '1050';\n\n  /* eslint-disable-next-line @angular-eslint/no-output-on-prefix */\n  @Output() readonly onPanelClosed: EventEmitter<void> = new EventEmitter();\n  /* eslint-disable-next-line @angular-eslint/no-output-on-prefix */\n  @Output() readonly onDismiss: EventEmitter<DismissReasons> = new EventEmitter();\n\n  private _historyChangeEvent: Subscription;\n\n  constructor(private _dpConfig: AdaptDockedPanelConfig) {\n  }\n\n  ngOnInit(): void {\n    this._historyChangeEvent = fromEvent(window, 'popstate').subscribe(() => {\n      this.dps.closeAllDockedPanels();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this._historyChangeEvent.unsubscribe();\n  }\n\n  closeAnimationEnd(event: AnimationEvent): void {\n    if (event.toState === 'void') {\n      this.onPanelClosed.emit();\n    }\n  }\n\n  containerClick(e: MouseEvent): void {\n    if ((<HTMLElement>e.target).classList.contains('dp-container')) {\n      e.stopPropagation();\n\n      const panelToDismiss = this.dps.openedPanels[0];\n\n      if (panelToDismiss.config.blockDismiss !== undefined ? panelToDismiss.config.blockDismiss : this._dpConfig.blockDismiss) {\n        return;\n      }\n\n      this.onDismiss.emit(DismissReasons.BACKDROP_CLICK);\n      panelToDismiss.promise.reject(DismissReasons.BACKDROP_CLICK);\n    }\n  }\n}\n"]}