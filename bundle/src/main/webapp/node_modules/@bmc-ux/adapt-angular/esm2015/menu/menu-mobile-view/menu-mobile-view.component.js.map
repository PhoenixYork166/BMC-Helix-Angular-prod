{"version":3,"file":"menu-mobile-view.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-angular/src/menu/menu-mobile-view/menu-mobile-view.component.ts","../../../../../../libs/adapt-angular/src/menu/menu-mobile-view/menu-mobile-view.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAgB,SAAS,EAAE,UAAU,EAAqB,SAAS,EAAE,SAAS,EAAC,MAAM,eAAe,CAAC;AAC5G,OAAO,EAAC,gBAAgB,EAAC,MAAM,iBAAiB,CAAC;AACjD,OAAO,EAAC,MAAM,EAAE,SAAS,EAAC,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAmB,mBAAmB,EAAC,MAAM,oCAAoC,CAAC;AACzF,OAAO,EAAC,kBAAkB,EAAE,yBAAyB,EAAC,MAAM,wBAAwB,CAAC;AACrF,OAAO,EAAC,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,OAAO,EAAC,MAAM,qBAAqB,CAAC;AAGxE,OAAO,EAAC,cAAc,EAAC,MAAM,mBAAmB,CAAC;AACjD,OAAO,EAAC,aAAa,EAAC,MAAM,MAAM,CAAC;;;;;;;;;;;ICD3B,kCAE0C;IAAlC,8MAAiC;IACvC,YACF;IAAA,iBAAS;;;IAHD,+GAA+D;IAErE,eACF;IADE,yEACF;;;ADmCR,MAAM,OAAO,4BAA4B;IAoBvC,YAAoB,iBAAmC,EACnC,SAAoB,EACpB,QAAoB,EACpB,cAAmC,EACnC,IAAoB;QAJpB,sBAAiB,GAAjB,iBAAiB,CAAkB;QACnC,cAAS,GAAT,SAAS,CAAW;QACpB,aAAQ,GAAR,QAAQ,CAAY;QACpB,mBAAc,GAAd,cAAc,CAAqB;QACnC,SAAI,GAAJ,IAAI,CAAgB;QArBxC,UAAK,GAAY,KAAK,CAAC;QAKvB;;WAEG;QACK,mBAAc,GAAqB,IAAI,CAAC;QAGxC,gBAAW,GAA2B,IAAI,aAAa,CAAC,CAAC,CAAC,CAAC;QAWjE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC;QACvC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAC5E,CAAC;IAXD,IAAI,OAAO;QACT,OAAO,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC;IAC7C,CAAC;IAWD,QAAQ;QACN,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;QACrC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAEvD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC;QAEvD,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,WAAW;QACT,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC/B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5B,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,CAAC;IAC9B,CAAC;IAED,eAAe;QACb,IAAI,CAAC,iBAAiB,CAAC,cAAc;aAClC,IAAI,CACH,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EACxB,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAC7B,SAAS,CAAC,CAAC,IAAI,EAAE,EAAE;YAClB,MAAM,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;YAExD,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YACpF,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,OAAO,EAAE,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC;YAC9E,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,EAAE,mBAAmB,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC;YAC1H,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EACzD,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,mBAAmB,GAAG,IAAI,CAAC,WAAW,KAAK;gBACjF,CAAC,CAAC,cAAc,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,KAAK,CAAC,CAAC;YAElE,IAAI,mBAAmB,EAAE;gBACvB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,EAAE,qBAAqB,CAAC,CAAC;aACpE;QAEH,CAAC,CAAC,CAAC;IACP,CAAC;IAED,OAAO;QACL,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,qBAAqB,EAAE,CAAC,MAAM,CAAC;QAE9F,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;IAC/E,CAAC;IAED,SAAS;QACP,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,aAAa,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,qBAAqB,IAAI,CAAC,CAAC;IAC1G,CAAC;IAED,gBAAgB;QACd,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7D,CAAC;IAED,cAAc;QACZ,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,MAAM,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC,CAAC;YAE3E,OAAO,WAAW,CAAC,UAAU,CAAC,KAAK,CAAC;SACrC;IACH,CAAC;IAED,YAAY;QACV,IAAI,CAAC,iBAAiB,CAAC,aAAa,EAAE,CAAC;IACzC,CAAC;IAED,qBAAqB;QACnB,MAAM,mBAAmB,GAAG,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAAC;QAExD,IAAI,CAAC,SAAS,CAAC,QAAQ,CACrB,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,WAAW,EAChD,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,cAAc,mBAAmB,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,KAAK;YACvF,CAAC,CAAC,cAAc,CAAC,mBAAmB,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,KAAK,CAAC,CAAC;QACrF,IAAI,CAAC,iBAAiB,CAAC,mBAAmB,CAAC,mBAAmB,GAAG,CAAC,CAAC,CAAC;IACtE,CAAC;;wGApGU,4BAA4B;+EAA5B,4BAA4B;;;;;;;;;;QC/CzC,8BAAuC;QACrC,oBAAA;QAAA,iCAG+B;QAD1B,0GAAW,aAAS,IAAC,iGACR,eAAW,IADH;QAExB,sBAAA;QAAA,8BAC2D;QADT,4GAAS,wBAAwB,IAAC;QAElF,wBAAA;QAAA,8BAAwC;QACtC,0BAAA;QAAA,mFAIS;QACX,yBAAA;QAAA,iBAAM;QAEN,2BAAA;QAAA,+BAAyC;QACrC,6BAAA;QAAA,6BAAM;QACJ,aACF;QAAA,iBAAO;QACX,yBAAA;QAAA,iBAAM;QAEN,2BAAA;QAAA,+BAA0C;QACxC,2BAAA;QAAA,kCACiC;QAAzB,0GAAS,kBAAc,IAAC;QAC9B,aACF;QAAA,iBAAS;QACX,yBAAA;QAAA,iBAAM;QAER,yBAAA;QAAA,iBAAM;QAEN,yBAAA;QAAA,+BAAgD;QAC9C,yBAAA;QAAA,+BAAoE;QACtE,uBAAA;QAAA,iBAAM;QAER,uBAAA;QAAA,iBAAM;QACR,mBAAA;QAAA,iBAAM;QAEN,qBAAA;QAAA,2BAA6D;QAC7D,mBAAA;;QApCO,eAAiB;QAAjB,2CAAiB;QAIf,eAAqD;QAArD,kFAAqD;QAEH,eAA4B;QAA5B,iDAA4B;QAS3E,eACF;QADE,6EACF;QAMA,eACF;QADE,wEACF;QAY4B,gBAAkB;QAAlB,4CAAkB;iFDlBxC;YACV,OAAO,CAAC,gBAAgB,EAAE;gBACxB,UAAU,CAAC,WAAW,EAAE;oBACtB,KAAK,CAAC,EAAC,SAAS,EAAE,uBAAuB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;oBACzD,OAAO,CAAC,GAAG,kBAAkB,CAAC,IAAI,IAAI,yBAAyB,CAAC,IAAI,CAAC,YAAY,EAAE,EACjF,KAAK,CAAC,EAAC,SAAS,EAAE,qBAAqB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;iBAC3D,CAAC;gBACF,UAAU,CAAC,WAAW,EAAE;oBACtB,KAAK,CAAC,EAAC,SAAS,EAAE,qBAAqB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;oBACvD,OAAO,CAAC,GAAG,kBAAkB,CAAC,IAAI,IAAI,yBAAyB,CAAC,IAAI,CAAC,aAAa,EAAE,EAClF,KAAK,CAAC,EAAC,SAAS,EAAE,uBAAuB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;iBAC7D,CAAC;aACH,CAAC;YACF,OAAO,CAAC,iBAAiB,EAAE;gBACzB,UAAU,CAAC,WAAW,EAAE;oBACtB,KAAK,CAAC,EAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;oBACzC,OAAO,CAAC,OAAO,yBAAyB,CAAC,IAAI,CAAC,YAAY,EAAE,EAC1D,KAAK,CAAC,EAAC,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;iBAC9C,CAAC;gBACF,UAAU,CAAC,WAAW,EAAE;oBACtB,KAAK,CAAC,EAAC,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;oBAC1C,OAAO,CAAC,OAAO,yBAAyB,CAAC,IAAI,CAAC,eAAe,EAAE,EAC7D,KAAK,CAAC,EAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;iBAC7C,CAAC;aACH,CAAC;SACH;uFAGU,4BAA4B;cApCxC,SAAS;eAAC;gBACT,QAAQ,EAAE,wBAAwB;gBAClC,WAAW,EAAE,mCAAmC;gBAChD,qEAAqE;gBACrE,IAAI,EAAE;oBACJ,iBAAiB,EAAE,SAAS;oBAC5B,eAAe,EAAE,QAAQ;iBAC1B;gBACD,UAAU,EAAE;oBACV,OAAO,CAAC,gBAAgB,EAAE;wBACxB,UAAU,CAAC,WAAW,EAAE;4BACtB,KAAK,CAAC,EAAC,SAAS,EAAE,uBAAuB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;4BACzD,OAAO,CAAC,GAAG,kBAAkB,CAAC,IAAI,IAAI,yBAAyB,CAAC,IAAI,CAAC,YAAY,EAAE,EACjF,KAAK,CAAC,EAAC,SAAS,EAAE,qBAAqB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;yBAC3D,CAAC;wBACF,UAAU,CAAC,WAAW,EAAE;4BACtB,KAAK,CAAC,EAAC,SAAS,EAAE,qBAAqB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC;4BACvD,OAAO,CAAC,GAAG,kBAAkB,CAAC,IAAI,IAAI,yBAAyB,CAAC,IAAI,CAAC,aAAa,EAAE,EAClF,KAAK,CAAC,EAAC,SAAS,EAAE,uBAAuB,EAAE,OAAO,EAAE,GAAG,EAAC,CAAC,CAAC;yBAC7D,CAAC;qBACH,CAAC;oBACF,OAAO,CAAC,iBAAiB,EAAE;wBACzB,UAAU,CAAC,WAAW,EAAE;4BACtB,KAAK,CAAC,EAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;4BACzC,OAAO,CAAC,OAAO,yBAAyB,CAAC,IAAI,CAAC,YAAY,EAAE,EAC1D,KAAK,CAAC,EAAC,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;yBAC9C,CAAC;wBACF,UAAU,CAAC,WAAW,EAAE;4BACtB,KAAK,CAAC,EAAC,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC;4BAC1C,OAAO,CAAC,OAAO,yBAAyB,CAAC,IAAI,CAAC,eAAe,EAAE,EAC7D,KAAK,CAAC,EAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,EAAC,CAAC,CAAC;yBAC7C,CAAC;qBACH,CAAC;iBACH;aACF;mLAOgD,gBAAgB;kBAA9D,SAAS;mBAAC,kBAAkB,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC;YACA,cAAc;kBAA1D,SAAS;mBAAC,gBAAgB,EAAE,EAAC,MAAM,EAAE,IAAI,EAAC","sourcesContent":["import {AfterViewInit, Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild} from '@angular/core';\nimport {MenuInnerService} from '../menu.service';\nimport {filter, takeUntil} from 'rxjs/operators';\nimport {ScrollManagerApi, ScrollManageService} from '../../common/scroll-manage.service';\nimport {ANIMATION_DURATION, ANIMATION_TIMING_FUNCTION} from '../../common/animation';\nimport {animate, style, transition, trigger} from '@angular/animations';\nimport {CascadeItem} from '../models/menu-item';\nimport {MenuTextsModel} from '../models/menu-config';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {ReplaySubject} from 'rxjs';\n\n@Component({\n  selector: 'adapt-menu-mobile-view',\n  templateUrl: './menu-mobile-view.component.html',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[style.display]': \"'block'\",\n    '[style.width]': \"'100%'\",\n  },\n  animations: [\n    trigger('popupAnimation', [\n      transition('void => *', [\n        style({transform: 'translate(0px, 200px)', opacity: '0'}),\n        animate(`${ANIMATION_DURATION.fast} ${ANIMATION_TIMING_FUNCTION.base.transitionIn}`,\n          style({transform: 'translate(0px, 0px)', opacity: '1'}))\n      ]),\n      transition('* => void', [\n        style({transform: 'translate(0px, 0px)', opacity: '1'}),\n        animate(`${ANIMATION_DURATION.fast} ${ANIMATION_TIMING_FUNCTION.base.transitionOut}`,\n          style({transform: 'translate(0px, 200px)', opacity: '0'}))\n      ]),\n    ]),\n    trigger('menuOverlayAnim', [\n      transition('void => *', [\n        style({visibility: 'hidden', opacity: 0}),\n        animate(`.6s ${ANIMATION_TIMING_FUNCTION.base.transitionIn}`,\n          style({visibility: 'visible', opacity: 1}))\n      ]),\n      transition('* => void', [\n        style({visibility: 'visible', opacity: 1}),\n        animate(`.6s ${ANIMATION_TIMING_FUNCTION.base.transitionInOut}`,\n          style({visibility: 'hidden', opacity: 0}))\n      ])\n    ]),\n  ]\n})\n\nexport class AdaptMenuMobileViewComponent implements OnInit, AfterViewInit, OnDestroy {\n  windowWidth: number;\n  texts: MenuTextsModel;\n  isRtl: boolean = false;\n\n  @ViewChild('adaptSubmenuItem', {static: true}) adaptSubmenuItem: ElementRef;\n  @ViewChild('swipeContainer', {static: true}) swipeContainer: ElementRef<HTMLDivElement>;\n\n  /**\n   * An object for manage wrapper's scroll.\n   */\n  private _scrollManager: ScrollManagerApi = null;\n\n  private _swipeContainerHeight: number;\n  private _destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  get cascade(): CascadeItem {\n    return this._menuInnerService.cascadeChain;\n  }\n\n  constructor(private _menuInnerService: MenuInnerService,\n              private _renderer: Renderer2,\n              private _elemRef: ElementRef,\n              private _scrollService: ScrollManageService,\n              private _dir: Directionality) {\n    this.isRtl = this._dir.value === 'rtl';\n    this._scrollManager = this._scrollService.getScrollManager(document.body);\n  }\n\n  ngOnInit(): void {\n    this.windowWidth = window.innerWidth;\n    document.body.appendChild(this._elemRef.nativeElement);\n\n    this.texts = this._menuInnerService.mobileDefaultTexts;\n\n    this._scrollManager.hide(this);\n  }\n\n  ngOnDestroy(): void {\n    this._scrollManager.show(this);\n    this._destroyed$.next(true);\n    this._destroyed$.complete();\n  }\n\n  ngAfterViewInit(): void {\n    this._menuInnerService.menuElementRef\n      .pipe(\n        filter((elem) => !!elem),\n        takeUntil(this._destroyed$))\n      .subscribe((elem) => {\n        const currentCascadeLevel = this.getCascadeLength() - 1;\n\n        this._renderer.appendChild(this.adaptSubmenuItem.nativeElement, elem.nativeElement);\n        this._renderer.setStyle(elem.nativeElement, 'width', `${this.windowWidth}px`);\n        this._renderer.setStyle(elem.nativeElement, this.isRtl ? 'right' : 'left', currentCascadeLevel * this.windowWidth + 'px');\n        this._renderer.setStyle(this.adaptSubmenuItem.nativeElement,\n          'transform', this.isRtl ? `translateX(${currentCascadeLevel * this.windowWidth}px)`\n            : `translateX(${-currentCascadeLevel * this.windowWidth}px)`);\n\n        if (currentCascadeLevel) {\n          this._renderer.addClass(elem.nativeElement, 'adapt-submenu__fade');\n        }\n\n      });\n  }\n\n  swipeUp(): void {\n    this._swipeContainerHeight = this.swipeContainer.nativeElement.getBoundingClientRect().height;\n\n    this._renderer.setStyle(this.swipeContainer.nativeElement, 'height', '100%');\n  }\n\n  swipeDown(): void {\n    this._renderer.setStyle(this.swipeContainer.nativeElement, 'height', `${this._swipeContainerHeight}px`);\n  }\n\n  getCascadeLength(): number {\n    return this.cascade ? this.cascade.subMenuItems.length : 0;\n  }\n\n  getAnchorTitle(): string {\n    if (this.cascade) {\n      const submenuItem = this.cascade.subMenuItems[this.getCascadeLength() - 1];\n\n      return submenuItem.parentNode.label;\n    }\n  }\n\n  closeCascade(): void {\n    this._menuInnerService.detachCascade();\n  }\n\n  showParentItemCascade(): void {\n    const currentCascadeLevel = this.getCascadeLength() - 1;\n\n    this._renderer.setStyle(\n      this.adaptSubmenuItem.nativeElement, 'transform',\n      this.isRtl ? `translateX(${currentCascadeLevel * this.windowWidth - this.windowWidth}px)`\n        : `translateX(${-currentCascadeLevel * this.windowWidth + this.windowWidth}px)`);\n    this._menuInnerService.destroyCascadeItems(currentCascadeLevel - 1);\n  }\n}\n","<div class=\"adapt-submenu-mobile-view\">\n  <div class=\"adapt-submenu-mobile-content\" #swipeContainer\n       [@popupAnimation]\n       (swipeUp)=\"swipeUp()\"\n       (swipeDown)=\"swipeDown()\">\n    <div class=\"adapt-submenu-mobile-content--header\" (click)=\"$event.stopPropagation()\"\n         [ngClass]=\"{'first-init': getCascadeLength() === 1 }\">\n      <div class=\"adapt-mobile-content__back\">\n        <button type=\"button\" class=\"btn btn-link btn-sm\" *ngIf=\"getCascadeLength() > 1\"\n                [ngClass]=\"[isRtl ? 'd-icon-angle_right': 'd-icon-angle_left']\"\n                (click)=\"showParentItemCascade()\">\n          {{ texts.backBtn }}\n        </button>\n      </div>\n\n      <div class=\"adapt-mobile-content__title\">\n          <span>\n            {{ getAnchorTitle() }}\n          </span>\n      </div>\n\n      <div class=\"adapt-mobile-content__cancel\">\n        <button type=\"button\" class=\"btn btn-link btn-sm\"\n                (click)=\"closeCascade()\">\n          {{ texts.cancelBtn }}\n        </button>\n      </div>\n\n    </div>\n\n    <div class=\"adapt-submenu-mobile-content--data\">\n      <div class=\"adapt-submenu-mobile-items-wrp\" #adaptSubmenuItem></div>\n    </div>\n\n  </div>\n</div>\n\n<div class=\"dropdown-menu__overlay\" [@menuOverlayAnim]></div>\n"]}