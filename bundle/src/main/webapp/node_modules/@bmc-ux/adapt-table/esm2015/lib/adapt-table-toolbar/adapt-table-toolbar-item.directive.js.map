{"version":3,"file":"adapt-table-toolbar-item.directive.js","sourceRoot":"","sources":["../../../../../../libs/adapt-table/src/lib/adapt-table-toolbar/adapt-table-toolbar-item.directive.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  Directive,\n  ElementRef,\n  Input,\n  Output,\n  Renderer2\n} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport {SafeCdr} from '@bmc-ux/adapt-angular';\n\nimport {ToolbarItemContext} from '../adapt-table.models';\n\n@Directive({\n  selector: '[adaptToolbarItem]',\n  exportAs: 'adaptToolbarItem'\n})\nexport class AdaptTableToolbarItemDirective {\n  width: number;\n  collapsedWidth: number;\n  recalculateWidth: () => void = this._initItem.bind(this);\n\n  itemContext: ToolbarItemContext = {\n    hidden: false,\n    collapsed: false\n  };\n\n  @Input() adaptToolbarItem: number;\n\n  @Input() set fixOnToolbar(value: boolean) {\n    if (Boolean(value) !== this._fixOnToolbar) {\n      this._fixOnToolbar = Boolean(value);\n      this.itemAppearanceChange.next();\n    }\n  }\n\n  get fixOnToolbar(): boolean {\n    return this._fixOnToolbar;\n  }\n\n  @Input() set collapse(value: boolean) {\n    if (Boolean(value) !== this.itemContext.collapsed) {\n      this.itemContext.collapsed = Boolean(value);\n      SafeCdr.detectChanges(this._changeDetectorRef);\n    }\n  }\n\n  get collapse(): boolean {\n    return this.itemContext.collapsed;\n  }\n\n  @Input() set hideToPopup(value: boolean) {\n    if (Boolean(value) !== this.itemContext.hidden) {\n      this.itemContext.hidden = Boolean(value);\n      this._checkAppearance();\n    }\n  }\n\n  get hideToPopup(): boolean {\n    return this.itemContext.hidden;\n  }\n\n  @Input() set removeFromToolbar(value: boolean) {\n    if (Boolean(value) !== this._removeFromToolbar) {\n      this._removeFromToolbar = Boolean(value);\n      this.itemAppearanceChange.next();\n    }\n  }\n\n  get removeFromToolbar(): boolean {\n    return this._removeFromToolbar;\n  }\n\n\n  @Output() readonly itemAppearanceChange: Subject<void> = new Subject<void>();\n\n  private _fixOnToolbar: boolean = false;\n  private _removeFromToolbar: boolean = false;\n\n  constructor(private _elRef: ElementRef<HTMLElement>,\n              private _renderer: Renderer2,\n              private _changeDetectorRef: ChangeDetectorRef) {\n  }\n\n  private _initItem(): void {\n    this.hideToPopup = false;\n    this.collapse = false;\n\n    this._renderer.addClass(this._elRef.nativeElement, 'position-absolute');\n\n    this.width = Math.ceil(this._elRef.nativeElement.offsetWidth);\n\n    this.collapse = true;\n\n    this.collapsedWidth = Math.ceil(this._elRef.nativeElement.offsetWidth);\n\n    this._renderer.removeClass(this._elRef.nativeElement, 'position-absolute');\n  }\n\n  private _checkAppearance(): void {\n    if (this.itemContext.hidden) {\n      this._renderer.addClass(this._elRef.nativeElement, 'adapt-table-toolbar-item_hidden');\n    } else {\n      this._renderer.removeClass(this._elRef.nativeElement, 'adapt-table-toolbar-item_hidden');\n    }\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n}\n"]}