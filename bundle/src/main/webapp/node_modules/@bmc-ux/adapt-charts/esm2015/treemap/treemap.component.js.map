{"version":3,"file":"treemap.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-charts/src/treemap/treemap.component.ts","../../../../../libs/adapt-charts/src/treemap/treemap.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  isDevMode,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  Renderer2,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewChildren\n} from '@angular/core';\nimport {ListKeyManager} from '@angular/cdk/a11y';\nimport {DOWN_ARROW, ENTER, ESCAPE, SPACE, TAB, UP_ARROW} from '@angular/cdk/keycodes';\nimport {Point} from '@angular/cdk/drag-drop';\n\nimport {cloneDeep, isArray} from 'lodash-es';\nimport * as d3 from 'd3';\n\nimport {\n  AdaptDropdownDirective,\n  AdaptDropdownToggleDirective,\n  adaptError,\n  AdaptListKeyManagerItemDirective,\n  ColorType,\n  getEventKeyCode,\n  isDefined,\n  isFunction,\n  SafeCdr\n} from '@bmc-ux/adapt-angular';\nimport {ai_ellipsis} from '@bmc-ux/dpl-iconfont';\n\nimport {AdaptChartComponent} from '../common/chart.component';\nimport {\n  AdaptChartCategoryEvent,\n  AdaptChartDimensions,\n  AdaptChartGradientLegend,\n  AdaptChartHeader,\n  AdaptChartLegend,\n  AdaptSVGGroupElement\n} from '../common/models/chart.model';\nimport {\n  AdaptTreemapAbstract,\n  AdaptTreemapActionsMenu,\n  AdaptTreemapData,\n  AdaptTreemapDataChildren,\n  AdaptTreemapGroupData,\n  AdaptTreemapGroupEnterEvent,\n  AdaptTreemapNodeAction\n} from '../common/models/treemap.model';\nimport {AdaptChartColorStatus, ChartColorService} from '../common/services/chart-color.service';\n\nconst NODE_PADDING = 15;\n\n// TODO update types\n@Component({\n  selector: 'adapt-treemap',\n  templateUrl: './treemap.component.html',\n  exportAs: 'treemap'\n})\nexport class AdaptTreemapComponent extends AdaptTreemapAbstract implements OnInit, OnChanges, OnDestroy {\n  _legend: AdaptChartLegend;\n  menuData: AdaptTreemapActionsMenu;\n  hasActionMenu: boolean = false;\n  innerData: AdaptTreemapData | AdaptTreemapGroupData;\n  breadCrumbs: string[] = [];\n\n  // Chart data builder\n  dataBuilderBind: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void = this._dataBuilder.bind(this);\n  // Chart update function\n  updateChartBind: (dim: AdaptChartDimensions) => void = this._updateChart.bind(this);\n\n  // Chart data builder for grouped treemap\n  dataBuilderForGroupsBind: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void = this._dataBuilderForGroups.bind(this);\n  // Chart update function for grouped treemap\n  updateChartForGroupsBind: (dim: AdaptChartDimensions) => void = this._updateChartForGroups.bind(this);\n\n  @ViewChild(AdaptChartComponent, {static: true}) chartBase: AdaptChartComponent;\n  @ViewChild('treemapDefaultTooltip', {static: true}) treemapDefaultTooltip: TemplateRef<AdaptTreemapDataChildren>;\n  @ViewChild('treemapGroupTooltip', {static: true}) treemapGroupTooltip: TemplateRef<{ parentContext: AdaptTreemapData; childContext: AdaptTreemapData }>;\n  @ViewChild('menuAnchor', {\n    read: AdaptDropdownToggleDirective,\n    static: false\n  }) menuAnchor: AdaptDropdownToggleDirective;\n  @ViewChild('menuContainer', {read: AdaptDropdownDirective, static: false}) menuContainer: AdaptDropdownDirective;\n  @ViewChild('optionsListRef', {static: false}) optionsListRef: ElementRef<HTMLDivElement>;\n  @ViewChildren(AdaptListKeyManagerItemDirective) items: QueryList<AdaptListKeyManagerItemDirective>;\n\n  // Inputs\n  @Input() backgroundColor: string;\n  @Input() width: number;\n  @Input() height: number;\n  @Input() header: AdaptChartHeader;\n  @Input() legend: AdaptChartLegend;\n  @Input() gradientLegend: AdaptChartGradientLegend;\n  @Input() suppressHeader: boolean;\n  @Input() suppressLegend: boolean;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Input() tooltip: string | TemplateRef<any>;\n  @Input() data: AdaptTreemapData | AdaptTreemapGroupData;\n  @Input() noDataText: string;\n  @Input() showSizeInName: boolean = true;\n\n  /**\n   * @since 10.14.0\n   */\n  @Input() groupView: boolean = false;\n\n  // Outputs\n  @Output() readonly clickChart: EventEmitter<AdaptTreemapData | AdaptTreemapGroupData> = new EventEmitter();\n  @Output() readonly groupEntered: EventEmitter<AdaptTreemapGroupEnterEvent> = new EventEmitter();\n\n  private _g: AdaptSVGGroupElement;\n  private _removeClickEventListener: Function;\n  private _removeScrollEventListener: Function;\n  private _tooltipEl: HTMLElement;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _tooltipMouseleaveHandler: (this: HTMLElement, ev: HTMLElementEventMap['mouseleave']) => any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _activeNode: any;\n  private _tooltipPoint: Point = {x: 0, y: 0};\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _targetWithActions: any;\n  private _listKeyManager: ListKeyManager<AdaptListKeyManagerItemDirective>;\n\n  private _closeMenuBind: (event: AdaptTreemapComponent) => boolean | void = this._closeMenu.bind(this);\n\n  constructor(private _renderer: Renderer2,\n              private _chartColorService: ChartColorService,\n              private _changeDetectorRef: ChangeDetectorRef) {\n    super();\n  }\n\n  categoryEnter(categoryEvent: AdaptChartCategoryEvent): void {\n    this._getRelatedToLegendNodes(categoryEvent.id.toString()).dispatch('mouseenter', {\n      bubbles: true,\n      cancelable: true,\n      detail: {eventSource: 'legend'}\n    });\n  }\n\n  categoryLeave(categoryEvent: AdaptChartCategoryEvent): void {\n    this._getRelatedToLegendNodes(categoryEvent.id.toString()).dispatch('mouseleave');\n  }\n\n  ngOnInit(): void {\n    this.innerData = cloneDeep(this.data);\n    this._initLegend();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['data']) {\n      this.innerData = changes['data'].currentValue;\n      this.breadCrumbs = [];\n      this._updateLegend(changes['data'].firstChange);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this._removeListeners();\n  }\n\n  popupAnimationDone(): void {\n    if (this.menuContainer.isOpen()) {\n      this.optionsListRef.nativeElement.focus();\n      this._listKeyManager = new ListKeyManager(this.items)\n        .withWrap(false)\n        .withHomeAndEnd();\n      this._listKeyManager.setFirstItemActive();\n\n      this._removeClickEventListener = this._renderer.listen('document', 'click', this._closeMenuBind);\n      this._removeScrollEventListener = this._renderer.listen('document', 'scroll', this._closeMenuBind);\n    } else {\n      this._listKeyManager = null;\n      this._removeListeners();\n    }\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  keydownHandler(event: any): void {\n    if (this._listKeyManager) {\n      switch (getEventKeyCode(event)) {\n        case DOWN_ARROW:\n        case UP_ARROW: {\n          this._listKeyManager.onKeydown(event);\n\n          break;\n        }\n\n        case ENTER: {\n          this.callAction(this.menuData.target, this.menuData.event, this.menuData.context, this.menuData.actions[this._listKeyManager.activeItemIndex]);\n          this.menuContainer.close();\n\n          break;\n        }\n\n        case TAB: {\n          if (this.menuContainer.isOpen()) {\n            this.menuContainer.close();\n          }\n\n          break;\n        }\n      }\n    }\n  }\n\n  getActiveDescendant(): string {\n    return this._listKeyManager ? `treemap__actions__action-${this._listKeyManager.activeItemIndex}` : undefined;\n  }\n\n  isActiveDescendant(index: number): boolean {\n    return index === this._listKeyManager?.activeItemIndex;\n  }\n\n  callAction(target: SVGElement, event: MouseEvent, context: AdaptTreemapDataChildren, action: AdaptTreemapNodeAction): void {\n    action.callback(target, event, context);\n  }\n\n  enterGroup(event: MouseEvent, d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n    this.innerData = d.data;\n    this._legend = this._prepareGroupLegend();\n    this.chartBase.updateLegend(this._legend.items);\n\n    this.groupEntered.emit({event, data: d.data, node: d});\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  updateBreadCrumbs(d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n    if (!this.breadCrumbs.length) {\n      this.breadCrumbs.push(this.innerData.name);\n    }\n\n    this.breadCrumbs.push(d.data.name);\n  }\n\n  navigateToGroup(event: MouseEvent, name: string, data: AdaptTreemapGroupData): void {\n    if (data.name === name) {\n      this.innerData = cloneDeep(data);\n      this.breadCrumbs = this.breadCrumbs.slice(0, this.breadCrumbs.indexOf(name) + 1);\n\n      if (this.breadCrumbs.length === 1) {\n        this.breadCrumbs = [];\n      }\n\n      this._legend = this._prepareGroupLegend();\n      this.chartBase.updateLegend(this._legend.items);\n\n      this.groupEntered.emit({event, data});\n\n      SafeCdr.detectChanges(this._changeDetectorRef);\n\n      return;\n    }\n\n    if (data.children) {\n      data.children.forEach(child => {\n        this.navigateToGroup(event, name, child);\n      });\n    }\n  }\n\n  private _dataBuilder(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n    this._g = g;\n\n    const data = this.innerData;\n    const openTooltip = this._openTooltip.bind(this);\n    const closeTooltip = this._closeTooltip.bind(this);\n    const ellipsis = this._ellipsis;\n    const clickChart = this.clickChart;\n    const openMenu = this._openMenu.bind(this);\n    const showSizeInName = this.showSizeInName;\n    const chartColorService = this._chartColorService;\n\n    // Check if there is at least one item with action. If there are no actions no sense to render dropdown component\n    this.hasActionMenu = this._isDataContainsActions(data);\n\n    const treemap = d3.treemap<AdaptTreemapDataChildren>()\n      .tile(d3.treemapResquarify)\n      .size([dim.w, dim.h])\n      .round(true)\n      .paddingInner(1);\n\n    const root = d3.hierarchy<AdaptTreemapDataChildren>(data)\n      .eachBefore((d) => {\n        d.data.id = (d.parent ? d.parent.data.id + '.' : '') + d.data.name;\n      })\n      .sum((d) => d.size)\n      .sort((a, b) => b.height - a.height || b.value - a.value);\n\n    treemap(root);\n\n    let _currColorGroup = '';\n    let _currColorRange = [];\n    let _currColorRangeCounter = 0;\n\n    const nodeGroup = this._g.selectAll('g')\n      .data(root.leaves())\n      .enter()\n      .append('g')\n      .attr('class', (d) => `treemap-node status-group-${d.data.id.split(' ').join('_')}`)\n      .attr('id', (d) => d.data.id.split(' ').join('_'))\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${d.x0}, ${d.y0})`);\n\n    const nodeGroupInnerElem = nodeGroup\n      .append('g')\n      .attr('class', 'treemap-node__inner')\n      .attr('tabindex', 0)\n      .attr('aria-label', (d) => `${d.data.name}` + (showSizeInName ? ` (${d.data.size})` : ''))\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('mouseenter', function (d: d3.HierarchyNode<any>): void {\n        const rect = d3.select(this).select('rect');\n        const oldColor = (rect.node() as SVGElement).style.fill;\n        const target = d3.select(this);\n        const tooltipCustomCls = d.data.id.split('.').join('_').split(' ').join('_');\n        const eventDetail = d3.event.detail;\n\n        if (eventDetail === 0 || eventDetail?.eventSource !== 'legend') {\n          openTooltip(target, {context: d.data}, `treemap_tooltip treemap_tooltip__${tooltipCustomCls}`, 1);\n\n          _this._tooltipEl = window.document.querySelector(`.treemap_tooltip__${tooltipCustomCls}`);\n\n          if (isDefined(_this._tooltipEl)) {\n            _this._tooltipMouseleaveHandler = () => {\n              closeTooltip();\n              _this._tooltipEl.removeEventListener('mouseleave', _this._tooltipMouseleaveHandler);\n            };\n            _this._tooltipEl.addEventListener('mouseleave', _this._tooltipMouseleaveHandler);\n          }\n        }\n\n        (rect.node() as SVGElement).style.fill = d3.rgb(oldColor).darker(.3).formatHex();\n      })\n      .on('mouseleave', function (): void {\n\n        const rect = d3.select(this).select('rect');\n        const oldColor = (rect.node() as SVGElement).style.fill;\n\n        if (!d3.event?.toElement?.offsetParent?.classList.contains('adapt-tooltip-inner')) {\n          closeTooltip();\n          _this._removeTooltipMouseleaveListener();\n        }\n\n        (rect.node() as SVGElement).style.fill = d3.rgb(oldColor).brighter(.3).formatHex();\n      })\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('click', function (d: d3.HierarchyRectangularNode<any>): void {\n        closeTooltip();\n        _this._removeTooltipMouseleaveListener();\n\n        clickChart.emit(d.data);\n        d3.event.stopPropagation();\n      });\n\n    nodeGroupInnerElem.append('rect')\n      .attr('class', 'treemap__node-rect')\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('width', (d: d3.HierarchyRectangularNode<any>) => d.x1 - d.x0)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('height', (d: d3.HierarchyRectangularNode<any>) => d.y1 - d.y0)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('style', function (d: any): string {\n        if (!_currColorGroup || !(_currColorGroup === d.parent.data.id)) {\n\n          const customColorsRange = d.parent.data.customColorsRange;\n\n          if (isDevMode && customColorsRange && customColorsRange.length !== 2\n            || customColorsRange && customColorsRange[0] && customColorsRange[0].length !== 7\n            || customColorsRange && customColorsRange[1] && customColorsRange[1].length !== 7) {\n            adaptError('ADAPT-ANGULAR Error! \\n Treemap component! \\n Please pass correct color range. \"customColorsRange\" property should be an array of 2 values, and each value should be HEX format color 7 chars length each. (eg. customColorsRange: [\"#000000\", \"#ffffff\"])');\n          }\n\n          _currColorGroup = d.parent.data.id;\n          _currColorRange = ChartColorService.getColorRange(\n            d.parent.data.status === AdaptChartColorStatus.Custom\n              ? customColorsRange\n              : d.parent.data.status,\n            d.parent.children.length);\n          _currColorRangeCounter = 0;\n        }\n\n        const bg = d.data.color ? d.data.color : _currColorRange[_currColorRangeCounter];\n        const currentChild = d.parent.children[_currColorRangeCounter];\n\n        if (isDefined(currentChild)) {\n          currentChild.bg = bg;\n          currentChild.textColor = chartColorService.getContrast(bg, ColorType.HEX);\n        }\n\n        _currColorRangeCounter++;\n\n        return `\n          fill: ${bg};\n          transition: fill .2s;\n          cursor: pointer;\n        `;\n      });\n\n\n    nodeGroupInnerElem.append('g')\n      .attr('class', 'treemap-node-text')\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .each(function (d: any): void {\n        const _node = d3.select(this);\n\n        _node.attr('id', `${d.data.id.split(' ').join('_')}_text`);\n\n        const _name = _node.append('text')\n          .attr('class', 'treemap__node-name')\n          .attr('transform', `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n          .attr('style', () => {\n            return `\n              text-anchor: middle;\n              dominant-baseline: middle;\n              font-size: 13px;\n              fill: ${d.textColor};\n            `;\n          });\n\n        ellipsis(_name, `${d.data.name}` + (showSizeInName ? ` (${d.data.size})` : ''), d.x1 - d.x0 - NODE_PADDING);\n\n        const lineHeight = 22;\n        const _info = _node.append('text')\n          .attr('class', 'treemap__node-info-text')\n          .attr('transform', `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n          .attr('dy', lineHeight)\n          .attr('text-anchor', 'middle')\n          .attr('style', `font-size: 12px; opacity: .7; fill: ${d.textColor}`);\n\n        if (d.data.info && (d.y1 - d.y0 > 40)) {\n          ellipsis(_info, d.data.info, d.x1 - d.x0 - NODE_PADDING);\n        }\n      });\n\n    this._buildActionsMenu(nodeGroup, openMenu);\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  private _updateChart(dim: AdaptChartDimensions): void {\n    const data = this.innerData;\n    const ellipsis = this._ellipsis;\n    const showSizeInName = this.showSizeInName;\n\n    // Check if there is at least one item with action. If there are no actions no sense to render dropdown component\n    this.hasActionMenu = this._isDataContainsActions(data);\n\n    const treemap = d3.treemap<AdaptTreemapDataChildren>()\n      .tile(d3.treemapResquarify)\n      .size([dim.w, dim.h])\n      .round(true)\n      .paddingInner(1);\n\n    const root = d3.hierarchy<AdaptTreemapDataChildren>(data)\n      .eachBefore((d) => {\n        d.data.id = (d.parent ? d.parent.data.id + '.' : '') + d.data.name;\n      })\n      .sum((d) => d.size)\n      .sort((a, b) => b.height - a.height || b.value - a.value);\n\n    treemap(root);\n    const leaves = root.leaves();\n\n    this._g.selectAll('g.treemap-node')\n      .data(leaves)\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${d.x0}, ${d.y0})`);\n\n    this._g.selectAll('g.treemap__actions-menu rect')\n      .data(leaves.filter((d) => d.data.actions))\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n    this._g.selectAll('g.treemap__actions-menu use')\n      .data(leaves.filter((d) => d.data.actions))\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n    this._g.selectAll('rect.treemap__node-rect')\n      .data(leaves)\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('width', (d: d3.HierarchyRectangularNode<any>) => d.x1 - d.x0)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('height', (d: d3.HierarchyRectangularNode<any>) => d.y1 - d.y0);\n\n    this._g.selectAll('text.treemap__node-name')\n      .data(leaves)\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .each(function (d: d3.HierarchyRectangularNode<any>): void {\n        d3.select(this).text('');\n        ellipsis(d3.select(this), `${d.data.name}` + (showSizeInName ? ` (${d.data.size})` : ''), d.x1 - d.x0 - NODE_PADDING);\n      });\n\n    this._g.selectAll('text.treemap__node-info-text')\n      .data(leaves)\n      .transition()\n      .duration(200)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: d3.HierarchyRectangularNode<any>) => `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .each(function (d: d3.HierarchyRectangularNode<any>): void {\n        d3.select(this).text('');\n\n        if (d.data.info && (d.y1 - d.y0 > 40)) {\n          ellipsis(d3.select(this), d.data.info, d.x1 - d.x0 - NODE_PADDING);\n        }\n      });\n\n  }\n\n  private _dataBuilderForGroups(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n    this._g = g;\n\n    const data: AdaptTreemapGroupData = this.innerData;\n    const ellipsis = this._ellipsis;\n    const clickChart = this.clickChart;\n    const showSizeInName = this.showSizeInName;\n    const openMenu = this._openMenu.bind(this);\n\n    // Check if there is at least one item with action. If there are no actions no sense to render dropdown component\n    this.hasActionMenu = this._isDataContainsActions(data);\n\n    const treemap = d3.treemap()\n      .tile(d3.treemapResquarify)\n      .size([dim.w, dim.h])\n      .round(true)\n      .paddingInner(1)\n      .paddingOuter(1);\n\n    const root = d3.hierarchy(data)\n      .eachBefore((d) => {\n        d.data.id = (d.parent ? d.parent.data.id + '.' : '') + d.data.name;\n      })\n      // Ignore size value of node if it has children, because only it's children should be calculated to create correct view\n      .sum((d) => d.children?.length ? 0 : d.size)\n      .sort((a, b) => b.height - a.height || b.value - a.value);\n\n    treemap(root);\n\n    const nodeGroup = this._g.selectAll('g')\n      .data(root.children)\n      .enter()\n      .append('g')\n      .attr('class', (d) => `treemap-node ${d.data.children?.length ? 'treemap-node__parent' : 'treemap-node__child'}`)\n      .attr('id', (d) => d.data.id.split(' ').join('_'))\n      .attr('transform', (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>) => `translate(${d.x0}, ${d.y0})`);\n\n    const nodeGroupInnerElem = nodeGroup\n      .append('g')\n      .attr('class', 'treemap-node__inner')\n      .attr('tabindex', 0)\n      .attr('aria-label', (d) => `${d.data.name}` + (showSizeInName ? ` (${d.data.size})` : ''))\n      .each(function (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n        if (_this.groupView && d.children) {\n          const node = d3.select(this);\n\n          node.attr('role', 'button')\n            .attr('aria-expanded', false);\n        }\n      })\n      .on('click', function (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n        d3.event.stopPropagation();\n\n        if (_this.groupView && d.children) {\n          _this._activeNode = d;\n\n          _this.chartBase.hideTooltip();\n          _this.updateBreadCrumbs(d);\n          _this.enterGroup(d3.event, d);\n        }\n      })\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('keydown', function (d: d3.HierarchyRectangularNode<any>): void {\n        if (d3.event.keyCode === ENTER || d3.event.keyCode === SPACE) {\n          if (_this.groupView && d.children) {\n            _this._activeNode = d;\n\n            _this.chartBase.hideTooltip();\n            _this.updateBreadCrumbs(d);\n            _this.enterGroup(d3.event, d);\n          }\n        }\n      });\n\n    const itemsWithChildren = nodeGroupInnerElem.filter(d => !!d.children?.length);\n    const itemsWithoutChildren = nodeGroupInnerElem.filter(d => !d.children?.length);\n\n    if (itemsWithChildren.size() > 0) {\n      itemsWithChildren\n        .each(function (parentData: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n          const parentItem = d3.select(this);\n\n          parentItem\n            .append('rect')\n            .attr('width', parentData.x1 - parentData.x0)\n            .attr('height', parentData.y1 - parentData.y0)\n            .attr('fill', 'transparent')\n            .on('mouseenter', function (): void {\n              _this._hideParentLabel(parentItem);\n            })\n            .on('mouseleave', function (): void {\n              _this._showParentLabel(parentItem, parentData);\n            });\n\n          parentData.children.forEach((childData: d3.HierarchyRectangularNode<AdaptTreemapGroupData>) => {\n            const childItem = parentItem\n              .append('g')\n              .attr('class', 'treemap-node__child')\n              .attr('tabindex', 0)\n              .attr('aria-label', childData.data.name);\n\n            const childRect = childItem\n              .append('rect')\n              .attr('class', 'treemap__node-rect')\n              .attr('transform', `translate(${childData.x0 - parentData.x0}, ${childData.y0 - parentData.y0})`)\n              .attr('width', childData.x1 - childData.x0)\n              .attr('height', childData.y1 - childData.y0)\n              .attr('style', `fill: ${childData.data.color}; transition: fill .2s; cursor: pointer;`);\n\n            childItem\n              .on('mouseenter', function (): void {\n                const oldColor = (childRect.node() as SVGElement).style.fill;\n\n                (childRect.node() as SVGElement).style.fill = d3.rgb(oldColor).darker(.3).formatHex();\n\n                _this._hideParentLabel(parentItem);\n\n                const {clientX, clientY} = d3.event;\n\n                _this._tooltipPoint.x = clientX;\n                _this._tooltipPoint.y = clientY;\n                _this.chartBase.showTooltip(_this._tooltipPoint, _this.treemapGroupTooltip, {\n                  parentContext: parentData.data,\n                  childContext: childData.data\n                });\n              })\n              .on('mousemove', function (): void {\n                const {clientX, clientY} = d3.event;\n\n                _this._tooltipPoint.x = clientX;\n                _this._tooltipPoint.y = clientY;\n\n                _this.chartBase.updateTooltip();\n              })\n              .on('mouseleave', function (): void {\n                const oldColor = (childRect.node() as SVGElement).style.fill;\n\n                (childRect.node() as SVGElement).style.fill = d3.rgb(oldColor).brighter(.3).formatHex();\n\n                _this._showParentLabel(parentItem, parentData);\n                _this.chartBase.hideTooltip();\n              });\n\n            const _name = childItem\n              .append('text')\n              .attr('class', 'treemap__node-child-label')\n              .attr('opacity', '0')\n              .attr('transform', `translate(${(childData.x0 - parentData.x0 + ((childData.x1 - childData.x0) / 2))}, ${(childData.y0 - parentData.y0 + ((childData.y1 - childData.y0) / 2))})`)\n              .attr('style', `text-anchor: middle; dominant-baseline: middle; font-size: 13px; fill: ${_this._chartColorService.getContrast(childData.data.color, ColorType.HEX)};`);\n\n            ellipsis(_name, `${childData.data.name}` + (showSizeInName ? ` (${childData.data.size})` : ''), childData.x1 - childData.x0 - NODE_PADDING);\n          });\n        })\n        .on('mouseenter', function (): void {\n          const texts = d3.select(this).selectAll('.treemap__node-child-label');\n\n          texts.attr('opacity', '1');\n        })\n        .on('mouseleave', function (): void {\n          const texts = d3.select(this).selectAll('.treemap__node-child-label');\n\n          texts.attr('opacity', '0');\n        });\n\n      itemsWithChildren\n        .append('g')\n        .attr('class', 'treemap-node-parent-label')\n        .each(function (parentData: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n          const _node = d3.select(this);\n          const tooltipWrapperHeight = 60;\n\n          _node\n            .append('foreignObject')\n            .attr('width', parentData.x1 - parentData.x0)\n            .attr('height', 1)\n            .attr('overflow', 'visible')\n            .attr('transform', `translate(0, ${((parentData.y1 - parentData.y0) / 2) - (tooltipWrapperHeight / 2)})`)\n            .append('xhtml:div')\n            .html(`\n                <div class=\"treemap__group-parent-tooltip shadow-1\">\n                    <div class=\"treemap__group-parent-tooltip-color\"\n                         style=\"background-color: ${parentData.data.color}; border-color: ${_this._chartColorService.getDarken(parentData.data.color, .14, ColorType.HEX)};\">&nbsp;</div>\n                    <div class=\"treemap__group-parent-tooltip-text align-start\" id=\"${parentData.data.id.split(' ').join('_')}_text\">${parentData.data.name}</div>\n                </div>\n            `)\n            .attr('class', 'treemap__group-parent-tooltip-wrapper');\n        });\n    }\n\n    if (itemsWithoutChildren.size() > 0) {\n      itemsWithoutChildren.append('rect')\n        .attr('class', 'treemap__node-rect')\n        .attr('width', (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>) => d.x1 - d.x0)\n        .attr('height', (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>) => d.y1 - d.y0)\n        .attr('style', (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>) => `fill: ${d.data.color}; transition: fill .2s; cursor: pointer;`)\n        .on('click', function (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n          clickChart.emit(d.data);\n        });\n\n      itemsWithoutChildren.append('g')\n        .attr('class', 'treemap-node-text treemap-node-text_no-child')\n        .each(function (d: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n          const _node = d3.select(this);\n\n          const _name = _node.append('text')\n            .attr('class', 'treemap__node-name')\n            .attr('transform', `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n            .attr('style', `text-anchor: middle; dominant-baseline: middle; font-size: 13px; fill: ${_this._chartColorService.getContrast(d.data.color, ColorType.HEX)};`);\n\n          ellipsis(_name, `${d.data.name}` + (showSizeInName ? ` (${d.data.size})` : ''), d.x1 - d.x0 - NODE_PADDING);\n\n          const lineHeight = 22;\n          const _info = _node.append('text')\n            .attr('class', 'treemap__node-info-text')\n            .attr('transform', `translate(${(d.x1 - d.x0) / 2}, ${(d.y1 - d.y0) / 2})`)\n            .attr('dy', lineHeight)\n            .attr('text-anchor', 'middle')\n            .attr('style', `font-size: 12px; opacity: .7; fill: ${_this._chartColorService.getContrast(d.data.color, ColorType.HEX)}`);\n\n          if (d.data.info && (d.y1 - d.y0 > 40)) {\n            ellipsis(_info, d.data.info, d.x1 - d.x0 - NODE_PADDING);\n          }\n        });\n    }\n\n    this._buildActionsMenu(nodeGroup, openMenu);\n  }\n\n  private _updateChartForGroups(dim: AdaptChartDimensions): void {\n    this._g.selectAll('g').remove();\n    this._dataBuilderForGroups(this._g, dim);\n  }\n\n  private _showParentLabel(item: AdaptSVGGroupElement, data: d3.HierarchyRectangularNode<AdaptTreemapGroupData>): void {\n    item\n      .select('.treemap-node-parent-label > foreignObject')\n      .attr('style', `opacity: 1; height: 1px; overflow: visible; width: ${data.x1 - data.x0}px;`);\n  }\n\n  private _hideParentLabel(item: AdaptSVGGroupElement): void {\n    item\n      .select('.treemap-node-parent-label > foreignObject')\n      .attr('style', 'opacity: 0; height: 1px; overflow: hidden; width: 0;');\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _buildActionsMenu(nodeGroup: AdaptSVGGroupElement, openMenu: (event: MouseEvent, context: any) => void): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n    // Draw kebab menu icon\n    nodeGroup\n      .append('g')\n      .attr('class', 'treemap__actions-menu')\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .each(function (d: any): void {\n        if (d.data.actions) {\n          const _node = d3.select(this);\n\n          _node.attr('tabindex', 0)\n            .attr('role', 'button')\n            .attr('aria-haspopup', true)\n            .attr('aria-expanded', false);\n\n          _node.append('rect')\n            .attr('cursor', 'pointer')\n            .attr('fill', 'transparent')\n            .attr('height', 20)\n            .attr('width', 20)\n            .attr('transform', `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n          _node.append('g')\n            .attr('transform', `translate(${(d.x1 - d.x0) - 24}, 10)`)\n            .html(ai_ellipsis.data)\n            .select('svg')\n            .attr('cursor', 'pointer')\n            .attr('fill', d.textColor)\n            .attr('height', 20)\n            .attr('width', 20);\n        }\n      })\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('click', function (d: d3.HierarchyRectangularNode<any>): void {\n        if (d.data.actions) {\n          d3.event.stopPropagation();\n          _this._targetWithActions = d3.select(this);\n          openMenu(d3.event, d.data);\n        }\n      })\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('keydown', function (d: d3.HierarchyRectangularNode<any>): void {\n        if (!d.data?.actions?.length) {\n          return;\n        }\n\n        if (d3.event.keyCode === ENTER || d3.event.keyCode === DOWN_ARROW || d3.event.keyCode === SPACE) {\n          d3.event.preventDefault();\n          _this._targetWithActions = d3.select(this);\n          openMenu(d3.event, d.data);\n        }\n\n        if ((d3.event.keyCode === ESCAPE) && _this.menuContainer.isOpen()) {\n          d3.event.preventDefault();\n          _this._closeMenu();\n        }\n      });\n  }\n\n  private _openMenu(event: MouseEvent, context: AdaptTreemapDataChildren): void {\n    this._closeTooltip();\n    this.menuContainer.placement = ['bottom-right', 'top-right', 'right', 'left'];\n    this.menuContainer.positionTo = this._targetWithActions.node();\n    this.menuData = {target: this._targetWithActions.node(), event, context, actions: context.actions};\n\n    if (this.menuContainer.isOpen()) {\n      this._closeMenu();\n    } else {\n      this.menuContainer.open(event);\n      this._targetWithActions.attr('aria-expanded', true);\n    }\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  private _closeMenu(): void {\n    if (this.menuContainer) {\n      this.menuContainer.close();\n      this._targetWithActions?.attr('aria-expanded', false);\n    }\n\n    this._removeListeners();\n  }\n\n  private _isDataContainsActions(data: AdaptTreemapData | AdaptTreemapGroupData): boolean {\n    return data.children.some(item => item.actions && item.actions.length\n      || item.children && item.children.some(childrenItem => childrenItem.actions && childrenItem.actions.length));\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _openTooltip(target: any, context?: AdaptTreemapDataChildren, customCls?: string, offset?: number): void {\n    this.chartBase.showTooltip(target.node(), this.tooltip || this.treemapDefaultTooltip, context, customCls, offset);\n  }\n\n  private _closeTooltip(): void {\n    this.chartBase.hideTooltip();\n\n    this._removeListeners();\n  }\n\n  private _prepareLegend(): AdaptChartLegend {\n    let legendItems = [];\n    const data = this.innerData as AdaptTreemapData;\n\n    const flattenData = this._flattenByChildren(data.children);\n\n    // In case if data contains \"color\" property assume that user use \"custom colors\" approach to control colors\n    if (flattenData.some(d => d.color)) {\n      legendItems = flattenData;\n    } else {\n\n      if (isDefined(data.status)) {\n        legendItems.push({\n          name: data.name,\n          status: data.status,\n          color: data.status === AdaptChartColorStatus.Custom\n            ? data.customColorsRange\n            : ChartColorService.getColorRange(data.status, 1)\n        });\n      }\n\n      data.children.forEach((elem) => {\n\n        if (isDefined(elem.status)) {\n          const sameStatuses = legendItems.filter((lItem) => {\n            return elem.status !== AdaptChartColorStatus.Custom && elem.status === lItem.status;\n          });\n\n          if (!sameStatuses.length) {\n            legendItems.push({\n              name: elem.name,\n              status: elem.status,\n              color: elem.status === AdaptChartColorStatus.Custom\n                ? elem.customColorsRange\n                : ChartColorService.getColorRange(elem.status, 1)\n            });\n          }\n        }\n      });\n    }\n\n    if (legendItems.length) {\n      legendItems.sort((a, b) => {\n        return a.status - b.status;\n      });\n\n      return {\n        columns: 1,\n        items: legendItems.map(el => el.name),\n        customColors: legendItems.map(el => isArray(el.color) ? el.color[0] : el.color),\n        activeHover: false,\n        activeClick: false,\n        ...this.legend\n      };\n\n    }\n  }\n\n  private _prepareGroupLegend(): AdaptChartLegend {\n    const data = this.innerData as AdaptTreemapGroupData;\n\n    if (data.children) {\n      return {\n        columns: 1,\n        items: data.children.map(el => el.name),\n        customColors: data.children.map(el => isArray(el.color) ? el.color[0] : el.color),\n        activeHover: false,\n        activeClick: false,\n        ...this.legend\n      };\n    }\n  }\n\n  private _initLegend(): void {\n    if (this.suppressLegend) {\n      return;\n    }\n\n    if (!this.gradientLegend) {\n      this._legend = this.groupView ? this._prepareGroupLegend() : this._prepareLegend();\n    }\n  }\n\n  private _updateLegend(isFirstChange: boolean): void {\n    if (this.suppressLegend) {\n      return;\n    }\n\n    if (!isFirstChange) {\n      if (!this.gradientLegend) {\n        this._legend = this.groupView ? this._prepareGroupLegend() : this._prepareLegend();\n        this.chartBase.updateLegend(this._legend.items);\n      }\n    }\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _ellipsis(textNode: any, text: string, ellipsisWidth: number): void {\n\n    const letters = text.split('');\n\n    const ellipsis = textNode.append('tspan').attr('class', 'ellipsis').text('...');\n    const width = ellipsisWidth - (ellipsis.node() as SVGTextContentElement).getComputedTextLength();\n    const numWords = letters.length;\n\n    const tspan = textNode.insert('tspan', ':first-child').text(letters.join(''));\n\n    // Try the whole line\n    // While it's too long, and we have words left, keep removing words\n\n    while ((tspan.node() as SVGTextContentElement).getComputedTextLength() > width && letters.length) {\n      letters.pop();\n      tspan.text(letters.join(''));\n    }\n\n    if (letters.length === numWords) {\n      ellipsis.remove();\n    }\n  }\n\n  private _removeListeners(): void {\n    if (this._removeClickEventListener) {\n      this._removeClickEventListener();\n      this._removeClickEventListener = null;\n    }\n\n    if (this._removeScrollEventListener) {\n      this._removeScrollEventListener();\n      this._removeScrollEventListener = null;\n    }\n  }\n\n  private _removeTooltipMouseleaveListener(): void {\n    if (isDefined(this._tooltipEl) && isFunction(this._tooltipMouseleaveHandler)) {\n      this._tooltipEl.removeEventListener('mouseleave', this._tooltipMouseleaveHandler);\n      this._tooltipEl = null;\n      this._tooltipMouseleaveHandler = null;\n    }\n  }\n\n  private _flattenByChildren(array: AdaptTreemapDataChildren[], result: AdaptTreemapDataChildren[] = []): AdaptTreemapDataChildren[] {\n    array.forEach(el => {\n      if (el.children) {\n        this._flattenByChildren(el.children, result);\n      } else {\n        result.push(el);\n      }\n    });\n\n    return result;\n  }\n\n  private _getRelatedToLegendNodes(index: string): d3.Selection<SVGGElement, AdaptTreemapData, SVGGElement, AdaptTreemapData> {\n    const currentLegendItem = this._legend.items[parseInt(index, 10)];\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    const allNodes: any = this._g.selectAll('.treemap-node');\n\n    return allNodes.filter(node => node.data.id.indexOf(currentLegendItem) > -1);\n  }\n}\n","<adapt-chart #chartBase\n             [data]=\"innerData\"\n             [width]=\"width\"\n             [height]=\"height\"\n             [backgroundColor]=\"backgroundColor\"\n             [header]=\"header\"\n             [legend]=\"_legend\"\n             [gradientLegend]=\"gradientLegend\"\n             [suppressHeader]=\"suppressHeader\"\n             [suppressLegend]=\"suppressLegend\"\n             [dataBuilder]=\"groupView ? dataBuilderForGroupsBind : dataBuilderBind\"\n             [updateChart]=\"groupView ? updateChartForGroupsBind : updateChartBind\"\n             [noDataText]=\"noDataText\"\n             [topSectionTemplate]=\"treemapBreadCrumbsTemplate\"\n             (categoryEnter)=\"categoryEnter($event)\"\n             (categoryLeave)=\"categoryLeave($event)\"></adapt-chart>\n\n<div class=\"dropdown treemap-chart_hidden-menu\"\n     adaptDropdown\n     [adaptRadarDisableEventSending]=\"true\"\n     #menuContainer\n     *ngIf=\"hasActionMenu\"\n     [appendToBody]=\"true\"\n     [restoreFocusAfterClose]=\"true\"\n     (popupAnimationDone)=\"popupAnimationDone()\">\n  <button #menuAnchor adaptDropdownToggle type=\"button\"></button>\n  <ng-template adaptDropdownMenuTemplate>\n    <div class=\"dropdown-menu\"\n         #optionsListRef\n         tabindex=\"0\"\n         aria-labelledby=\"dropdownMenu\"\n         [attr.aria-activedescendant]=\"getActiveDescendant()\"\n         (keydown)=\"keydownHandler($event)\">\n      <div *ngIf=\"menuData && menuData.actions && menuData.actions.length\">\n        <button class=\"dropdown-item\"\n                [class.text-active]=\"isActiveDescendant(index)\"\n                type=\"button\"\n                role=\"button\"\n                tabindex=\"-1\"\n                adaptListKeyManagerItem\n                id=\"treemap__actions__action-{{index}}\"\n                *ngFor=\"let action of menuData.actions; let index = index;\"\n                (click)=\"callAction(menuData.target, menuData.event, menuData.context, action)\">\n          {{action.title}}\n        </button>\n      </div>\n    </div>\n  </ng-template>\n</div>\n\n<ng-template #treemapDefaultTooltip let-context=\"context\">\n  <div>\n    <strong>{{context.name}}</strong>\n    <div>{{context.size}}</div>\n  </div>\n</ng-template>\n\n<ng-template #treemapGroupTooltip let-parentContext=\"parentContext\" let-childContext=\"childContext\">\n  <div class=\"treemap__group-tooltip\">\n    <span class=\"adapt-chart-tooltip-color-spot mr-1\" [style.background-color]=\"parentContext.color\"></span>\n    {{parentContext.name}}: <strong>{{childContext.name}}</strong>\n  </div>\n</ng-template>\n\n<ng-template #treemapBreadCrumbsTemplate>\n  <ol class=\"breadcrumb mb-0\" *ngIf=\"breadCrumbs.length\">\n    <li class=\"breadcrumb-item\"\n        *ngFor=\"let breadCrumb of breadCrumbs; let last = last\"\n        [class.active]=\"last\">\n      <a href=\"javascript:void(0)\"\n         *ngIf=\"!last\"\n         (click)=\"navigateToGroup($event, breadCrumb, data)\">{{breadCrumb}}</a>\n      <ng-container *ngIf=\"last\">{{breadCrumb}}</ng-container>\n    </li>\n  </ol>\n</ng-template>\n"]}