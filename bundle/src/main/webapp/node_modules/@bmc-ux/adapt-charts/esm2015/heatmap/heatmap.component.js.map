{"version":3,"file":"heatmap.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-charts/src/heatmap/heatmap.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  TemplateRef,\n  ViewChild\n} from '@angular/core';\nimport * as d3 from 'd3';\n\nimport {AdaptDropdownDirective, AdaptDropdownToggleDirective, AdaptIconConfig, SafeCdr} from '@bmc-ux/adapt-angular';\nimport {ai_ellipsis} from '@bmc-ux/dpl-iconfont';\n\nimport {AdaptChartComponent} from '../common/chart.component';\nimport {\n  AdaptChartAxis,\n  AdaptChartBoundaries,\n  AdaptChartCategoryEvent,\n  AdaptChartDimensions,\n  AdaptChartHeader,\n  AdaptChartLegend,\n  AdaptSVGGroupElement\n} from '../common/models/chart.model';\nimport {\n  AdaptHeatmapAbstract,\n  AdaptHeatmapActionsMenu,\n  AdaptHeatmapNode,\n  AdaptHeatmapNodeAction\n} from '../common/models/heatmap.model';\n\nconst ICON_HEIGHT = 14;\nconst LINE_HEIGHT = 18;\nconst NODE_PADDING = 15;\n\ninterface ChatGridData {\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  data: AdaptHeatmapNode<any>;\n  x0: number;\n  y0: number;\n  x1: number;\n  y1: number;\n}\n\n// TODO update types\n\n@Component({\n  selector: 'adapt-heatmap',\n  styles: [`\n    .heatmap-chart_hidden-menu {\n      opacity: 0;\n      visibility: hidden;\n      height: 0\n    }\n  `],\n  template: `\n    <adapt-chart #chartBase\n                 [data]=\"data\"\n                 [width]=\"width\"\n                 [height]=\"height\"\n                 [header]=\"header\"\n                 [legend]=\"_legend\"\n                 [backgroundColor]=\"backgroundColor\"\n                 [suppressHeader]=\"suppressHeader\"\n                 [suppressLegend]=\"suppressLegend\"\n                 [tooltip]=\"tooltip\"\n                 [dataBuilder]=\"_dataBuilder\"\n                 [updateChart]=\"_updateChart\"\n                 [noDataText]=\"noDataText\"\n                 (categoryEnter)=\"_categoryEnter($event)\"\n                 (categoryLeave)=\"_categoryLeave($event)\"></adapt-chart>\n\n    <div class=\"dropdown heatmap-chart_hidden-menu\"\n         adaptDropdown\n         #menuContainer\n         *ngIf=\"hasActionMenu\"\n         [adaptRadarDisableEventSending]=\"true\"\n         [appendToBody]=\"true\"\n         (popupAnimationDone)=\"popupAnimationDone()\">\n      <button #menuAnchor adaptDropdownToggle type=\"button\"></button>\n      <ng-template adaptDropdownMenuTemplate>\n        <div class=\"dropdown-menu\">\n          <div *ngIf=\"menuData && menuData.actions && menuData.actions.length\">\n            <button class=\"dropdown-item\"\n                    type=\"button\"\n                    *ngFor=\"let action of menuData.actions;\"\n                    (click)=\"callAction(menuData.target, menuData.event, menuData.context, action)\">\n              {{action.title}}\n            </button>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n\n    <ng-template #heatmapDefaultTooltip let-c=\"context\">\n      <div class=\"text-left\">\n        <div>\n          <adapt-icon class=\"icon-inline\"\n                      [adaptRadarDisableEventSending]=\"true\"\n                      *ngIf=\"c.status.icon\"\n                      [name]=\"c.status.icon\"\n                      [style.color]=\"c.status.iconColor || c.status.color || defaultColor\"></adapt-icon>\n          {{c.name}}\n        </div>\n        <div class=\"pt-2\" *ngIf=\"c.info\">\n          <small class=\"text-secondary\">{{c.info}}</small>\n        </div>\n        <div class=\"pt-2\" *ngIf=\"c.progress\">\n          <label class=\"progress-label\" [style.marginLeft]=\"c.progress + '%'\">{{c.progress}}%</label>\n          <div class=\"progress\">\n            <div class=\"progress-bar bg-primary-muted\"\n                 role=\"progressbar\"\n                 [style.width]=\"c.progress + '%'\"\n                 [attr.aria-valuenow]=\"c.progress\"\n                 aria-valuemin=\"0\"\n                 aria-valuemax=\"100\"></div>\n          </div>\n        </div>\n        <div class=\"pt-2\">\n          <div style=\"width: 8px; height: 8px; margin: 0 4px 1px 2px; display: inline-block; vertical-align: middle\"\n               [style.backgroundColor]=\"c.status.bg\"></div>\n          {{c.status.name}}\n        </div>\n      </div>\n    </ng-template>\n  `\n})\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nexport class AdaptHeatmapComponent extends AdaptHeatmapAbstract<any> implements OnInit, OnDestroy {\n  _legend: AdaptChartLegend;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  menuData: AdaptHeatmapActionsMenu<any>;\n  hasActionMenu: boolean = false;\n  defaultColor: string = getComputedStyle(document.documentElement).getPropertyValue('--gray-900');\n\n  @ViewChild(AdaptChartComponent, {static: true}) chartBase: AdaptChartComponent;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @ViewChild('heatmapDefaultTooltip', {static: true}) heatmapDefaultTooltip: any;\n  @ViewChild('menuAnchor', {\n    read: AdaptDropdownToggleDirective,\n    static: false\n  }) menuAnchor: AdaptDropdownToggleDirective;\n  @ViewChild('menuContainer', {read: AdaptDropdownDirective, static: false}) menuContainer: AdaptDropdownDirective;\n\n  // Chart data builder\n  _dataBuilder: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void = (function (g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    this._g = g;\n\n    this._calculateMargin();\n\n    const chartWidth = dim.w - (this._margin.left + this._margin.right);\n    const chartHeight = dim.h - (this._margin.top + this._margin.bottom);\n    const openTooltip = this._openTooltip.bind(this);\n    const closeTooltip = this._closeTooltip.bind(this);\n    const openMenu = this._openMenu.bind(this);\n    const margin = this._margin;\n    const ellipsis = this._ellipsis;\n    const clickChart = this.clickChart;\n\n    const _data = this._getPreparedData(chartWidth, chartHeight);\n    const _getIcon = (name: string): string => this._iconConfig.getIcon(name);\n\n    // Draw chart\n    const nodeGroup = this._g.selectAll('g')\n      .attr('transform', `translate(${margin.left} ${margin.top})`)\n      .data(_data)\n      .enter()\n      .append('g')\n      .attr('class', (d: ChatGridData) => `heatmap-node status-group-${d.data.status.name.split(' ').join('_').toLowerCase()}`)\n      .attr('id', (d: ChatGridData) => d.data.name.split(' ').join('_'))\n      .attr('transform', (d: ChatGridData) => `translate(${d.x0}, ${d.y0})`)\n      .on('mouseenter', function (d: ChatGridData): void {\n        const eventDetail = d3.event.detail;\n        const self = d3.select(this);\n\n        if (eventDetail === 0 || eventDetail?.eventSource !== 'legend') {\n          openTooltip(self.node(), {context: d.data});\n        }\n\n        d3.select(this)\n          .selectAll('rect')\n          .each(function (): void {\n            const _r = d3.select(this).node() as HTMLElement;\n\n            if (!_r.classList.contains('menu-icon')) {\n              _r.style.fill = d3.rgb(_r.style.fill).darker(.3).formatHex();\n            }\n          });\n      })\n      .on('mouseleave', function (): void {\n        closeTooltip();\n\n        d3.select(this)\n          .selectAll('rect')\n          .each(function (): void {\n            const _r = d3.select(this).node() as HTMLElement;\n\n            if (!_r.classList.contains('menu-icon')) {\n              _r.style.fill = d3.rgb(_r.style.fill).brighter(.3).formatHex();\n            }\n          });\n      })\n      .on('click', function (d: ChatGridData): void {\n        closeTooltip();\n        clickChart.emit(d.data);\n        d3.event.stopPropagation();\n      });\n\n    nodeGroup.append('g')\n      .attr('class', 'treemap-node-bg')\n      .each(function (d: ChatGridData): void {\n        const _node = d3.select(this);\n\n        _node.append('rect')\n          .attr('width', d.x1 - d.x0)\n          .attr('height', d.y1 - d.y0)\n          .attr('style', () => {\n            return `\n              fill: ${d.data.status.bg};\n              opacity: .6;\n              transition: fill .2s;\n              cursor: pointer;`;\n          });\n\n        _node.append('rect')\n          .attr('width', () => {\n            const c = d.data.progress ? d.data.progress / 100 : 1;\n\n            return (d.x1 - d.x0) * c;\n          })\n          .attr('height', d.y1 - d.y0)\n          .attr('style', () => {\n            return `\n              fill: ${d.data.status.bg};\n              transition: fill .2s;\n              cursor: pointer;`;\n          });\n      });\n\n\n    const _defaultColor = getComputedStyle(document.documentElement).getPropertyValue('--gray-900');\n\n    nodeGroup.append('g')\n      .attr('class', 'treemap-node-text')\n      .each(function (d: ChatGridData): void {\n        const _node = d3.select(this);\n        let _icon;\n        let _info;\n\n        if (d.data.status.icon && (d.y1 - d.y0 > 60)) {\n          _icon = _node.append('g')\n            .attr('transform', `translate(${(d.x1 - d.x0) / 2 - ICON_HEIGHT / 2}, 0)`)\n            .html(_getIcon(d.data.status.icon))\n            .select('svg')\n            .attr('width', ICON_HEIGHT)\n            .attr('height', ICON_HEIGHT)\n            .attr('fill', d.data.status.iconColor || d.data.status.color || _defaultColor);\n        }\n\n        const _name = _node.append('text')\n          .attr('transform', `translate(${(d.x1 - d.x0) / 2}, 0)`)\n          .attr('dy', _icon ? LINE_HEIGHT + ICON_HEIGHT : 0)\n          .attr('text-anchor', 'middle')\n          .attr('fill', d.data.status.color || _defaultColor)\n          .attr('style', 'font-size: 13px;');\n\n        ellipsis(_name, d.data.name, d.x1 - d.x0 - NODE_PADDING);\n\n        if (_icon) {\n          _node.attr('transform', `translate(0, ${(d.y1 - d.y0) / 2 - ICON_HEIGHT})`);\n        } else {\n          _node.attr('transform', `translate(0, ${(d.y1 - d.y0) / 2 + LINE_HEIGHT / 2})`);\n        }\n\n        if (d.data.info && (d.y1 - d.y0 > 40)) {\n          _info = _node.append('text')\n            .attr('transform', `translate(${(d.x1 - d.x0) / 2}, 0)`)\n            .attr('dy', _icon ? LINE_HEIGHT * 2 + ICON_HEIGHT : LINE_HEIGHT)\n            .attr('text-anchor', 'middle')\n            .attr('fill', d.data.status.color || _defaultColor)\n            .attr('style', 'font-size: 12px; opacity: .7');\n\n          ellipsis(_info, d.data.info, d.x1 - d.x0 - NODE_PADDING);\n\n          if (_icon) {\n            _node.attr('transform', `translate(0, ${(d.y1 - d.y0) / 2 - ICON_HEIGHT - LINE_HEIGHT / 2})`);\n          } else {\n            _node.attr('transform', `translate(0, ${(d.y1 - d.y0) / 2})`);\n          }\n        }\n      });\n\n    // Draw kebab menu icon\n    nodeGroup\n      .append('g')\n      .attr('class', 'heatmap__actions-menu')\n      .each(function (d: ChatGridData): void {\n        if (d.data.actions) {\n          const _node = d3.select(this);\n\n          _node.append('rect')\n            .attr('class', 'menu-icon')\n            .attr('cursor', 'pointer')\n            .attr('fill', 'transparent')\n            .attr('height', 20)\n            .attr('width', 20)\n            .attr('transform', `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n          _node.append('g')\n            .attr('transform', `translate(${(d.x1 - d.x0) - 24}, 10)`)\n            .html(ai_ellipsis.data)\n            .select('svg')\n            .attr('cursor', 'pointer')\n            .attr('fill', _defaultColor)\n            .attr('height', 20)\n            .attr('width', 20);\n        }\n      })\n      .on('click', function (d: ChatGridData): void {\n        if (d.data.actions) {\n          const self = d3.select(this);\n\n          openMenu(self.node(), d3.event, d.data);\n          d3.event.stopPropagation();\n        }\n      });\n\n    // Draw Axises\n    if (this.xAxis) {\n      const axisScaleX = d3\n        .scaleBand()\n        .domain(this.xAxis.categories)\n        .range([0, chartWidth]);\n\n      const xAxis = d3.axisBottom(axisScaleX)\n        .tickSizeOuter(0)\n        .tickSize(0)\n        .tickPadding(10);\n\n      this._g.append('g')\n        .attr('class', 'adapt-chart-axis xAxis')\n        .attr('transform', `translate(${margin.left}, ${chartHeight})`)\n        .call(xAxis);\n    }\n\n    if (this.yAxis) {\n      const axisScaleY = d3\n        .scaleBand()\n        .domain(this.yAxis.categories)\n        .range([0, chartHeight]);\n\n\n      const yAxis = d3\n        .axisLeft(axisScaleY)\n        .tickSizeOuter(0)\n        .tickSize(0)\n        .tickPadding(10);\n\n\n      this._g.append('g')\n        .attr('class', 'adapt-chart-axis')\n        .attr('transform', `translate(${margin.left}, 0)`)\n        .call(yAxis);\n    }\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }).bind(this);\n\n  // Chart update function\n  _updateChart: (dim: AdaptChartDimensions) => void = (function (dim: AdaptChartDimensions): void {\n\n    this._calculateMargin();\n\n    const chartWidth = dim.w - (this._margin.left + this._margin.right);\n    const chartHeight = dim.h - (this._margin.top + this._margin.bottom);\n\n    const _data = this._getPreparedData(chartWidth, chartHeight);\n\n    this._g.selectAll('g.heatmap-node')\n      .data(_data)\n      .transition()\n      .duration(200)\n      .attr('transform', (d: ChatGridData) => `translate(${d.x0}, ${d.y0})`);\n\n    this._g.selectAll('g.treemap-node-bg rect:first-child')\n      .data(_data)\n      .transition()\n      .duration(200)\n      .attr('width', (d: ChatGridData) => d.x1 - d.x0);\n\n    this._g.selectAll('g.treemap-node-bg rect:last-child')\n      .data(_data)\n      .transition()\n      .duration(200)\n      .attr('width', (d: ChatGridData) => {\n        const c = d.data.progress ? d.data.progress / 100 : 1;\n\n        return (d.x1 - d.x0) * c;\n      });\n\n    this._g.selectAll('g.heatmap__actions-menu rect')\n      .data(_data.filter((d) => d.data.actions))\n      .transition()\n      .duration(200)\n      .attr('transform', (d) => `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n    this._g.selectAll('g.heatmap__actions-menu use')\n      .data(_data.filter((d) => d.data.actions))\n      .transition()\n      .duration(200)\n      .attr('transform', (d) => `translate(${(d.x1 - d.x0) - 24}, 10)`);\n\n\n    this._g.selectAll('.treemap-node-text')\n      .data(_data)\n      .each(function (d: ChatGridData): void {\n        d3.select(this).select('use')\n          .transition()\n          .duration(200)\n          .attr('transform', `translate(${(d.x1 - d.x0) / 2 - ICON_HEIGHT / 2}, 0)`);\n\n        d3.select(this).selectAll('text')\n          .transition()\n          .duration(200)\n          .attr('transform', `translate(${(d.x1 - d.x0) / 2}, 0)`);\n      });\n\n\n    if (this.xAxis) {\n      const axisScaleX = d3\n        .scaleBand()\n        .domain(this.xAxis.categories)\n        .range([0, chartWidth]);\n\n      const xAxis = d3.axisBottom(axisScaleX)\n        .tickSizeOuter(0)\n        .tickSize(0)\n        .tickPadding(10);\n\n      this._g.select('g.adapt-chart-axis.xAxis')\n        .transition()\n        .duration(200)\n        .call(xAxis);\n    }\n\n  }).bind(this);\n\n  // Inputs\n  @Input() backgroundColor: string;\n  @Input() width: number;\n  @Input() height: number;\n  @Input() header: AdaptChartHeader;\n  @Input() legend: AdaptChartLegend;\n  @Input() suppressHeader: boolean;\n  @Input() suppressLegend: boolean;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Input() tooltip: string | TemplateRef<any>;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Input() data: any;\n  @Input() xAxis: AdaptChartAxis;\n  @Input() yAxis: AdaptChartAxis;\n  @Input() noDataText: string;\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Output() readonly clickChart: EventEmitter<AdaptHeatmapNode<any>> = new EventEmitter();\n\n  private _g: AdaptSVGGroupElement;\n  private _margin: AdaptChartBoundaries = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  private _removeClickEventListener: Function;\n  private _removeScrollEventListener: Function;\n\n  private _closeMenuBind: (event: AdaptHeatmapComponent) => boolean | void = this._closeMenu.bind(this);\n\n  constructor(private _changeDetectorRef: ChangeDetectorRef,\n              private _renderer: Renderer2,\n              private _iconConfig: AdaptIconConfig) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (this.legend) {\n      this.legend.columns = 1;\n      this.legend.activeHover = false;\n      this.legend.activeClick = false;\n    }\n\n    this._initLegend();\n  }\n\n  ngOnDestroy(): void {\n    this._removeListeners();\n  }\n\n  callAction<T>(target: SVGElement, event: MouseEvent, context: T, action: AdaptHeatmapNodeAction<T>): void {\n    action.callback(target, event, context);\n  }\n\n  popupAnimationDone(): void {\n    if (this.menuContainer.isOpen()) {\n      this._removeClickEventListener = this._renderer.listen('document', 'click', this._closeMenuBind);\n      this._removeScrollEventListener = this._renderer.listen('document', 'scroll', this._closeMenuBind);\n    } else {\n      this._removeListeners();\n    }\n  }\n\n  _categoryEnter(categoryEvent: AdaptChartCategoryEvent): void {\n    // Pass \"detail\" via custom params to not show the tooltip when items highlighted through legend items hover\n    this._g\n      .selectAll(`.status-group-${this._legend.items[categoryEvent.id.toString()].split(' ').join('_').toLowerCase()}`)\n      .dispatch('mouseenter', {bubbles: true, cancelable: true, detail: {eventSource: 'legend'}});\n  }\n\n  _categoryLeave(categoryEvent: AdaptChartCategoryEvent): void {\n    this._g\n      .selectAll(`.status-group-${this._legend.items[categoryEvent.id.toString()].split(' ').join('_').toLowerCase()}`)\n      .dispatch('mouseleave');\n  }\n\n  private _calculateMargin(): void {\n    this._margin.left = this.yAxis ? 60 : 0;\n    this._margin.bottom = this.xAxis ? 38 : 0;\n  }\n\n  private _getPreparedData(w: number, h: number): ChatGridData[] {\n    const padding = 1;\n    const chartWidth = Math.round(w);\n    const rowCount = this.data.items.length;\n    const rowHeight = Math.round(h / rowCount);\n\n    const chartGrid: ChatGridData[] = [];\n\n    this.data.items.forEach((row, rIndex) => {\n      let rowWidth = 0;\n\n      row.forEach((el) => {\n        rowWidth += el.size;\n      });\n\n      let colWidth = this._margin.left + 1;\n\n      const colWidthMultiplier = chartWidth / rowWidth;\n\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      row.forEach((col: AdaptHeatmapNode<any>) => {\n        chartGrid.push({\n          data: col,\n          x0: Math.round(colWidth),\n          y0: Math.round(this._margin.top + rowHeight * rIndex),\n          x1: Math.round(colWidth + colWidthMultiplier * col.size - padding),\n          y1: Math.round(this._margin.top + rowHeight * rIndex + rowHeight - padding)\n        });\n\n        colWidth += colWidthMultiplier * col.size;\n      });\n    });\n\n    // Check if there is at least one item with action. If there are no actions no sense to render dropdown component\n    this.hasActionMenu = chartGrid.some(item => item.data.actions && item.data.actions.length);\n\n    return chartGrid;\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _openMenu(target: any, event: MouseEvent, context: any): void {\n    this._closeTooltip();\n    this.menuContainer.placement = 'bottom-right';\n    this.menuContainer.positionTo = target;\n    this.menuData = {target, event, context, actions: context.actions};\n    this.menuAnchor.toggleOpen(event);\n\n    SafeCdr.detectChanges(this._changeDetectorRef);\n  }\n\n  private _closeMenu(): void {\n    if (this.menuContainer) {\n      this.menuContainer.close();\n    }\n\n    this._removeListeners();\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _openTooltip(target: any, context?: any): void {\n    this.chartBase.showTooltip(target, this.tooltip || this.heatmapDefaultTooltip, context);\n  }\n\n  private _closeTooltip(): void {\n    this.chartBase.hideTooltip();\n  }\n\n  private _initLegend(): void {\n    if (this.suppressLegend) {\n      return;\n    }\n\n    const legendItems = [];\n\n    this.data.items.forEach((row) => {\n      row.forEach((col) => {\n        if (col.status) {\n          const sameStatuses = legendItems.filter((lItem) => {\n            return col.status.name === lItem.name;\n          });\n\n          if (!sameStatuses.length) {\n            legendItems.push({name: col.status.name, color: col.status.bg});\n          }\n        }\n      });\n    });\n\n    if (legendItems.length) {\n      this._legend = {\n        columns: 1,\n        items: legendItems.map(el => el.name),\n        customColors: legendItems.map(el => el.color),\n        activeHover: false,\n        activeClick: false\n      };\n    }\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _ellipsis(textNode: any, text: string, ellipsisWidth: number): void {\n\n    const letters = text.split('');\n\n    const ellipsis = textNode.append('tspan').attr('class', 'ellipsis').text('...');\n    const width = ellipsisWidth - (ellipsis.node() as SVGTextContentElement).getComputedTextLength();\n    const numWords = letters.length;\n\n    const tspan = textNode.insert('tspan', ':first-child').text(letters.join(''));\n\n    // Try the whole line\n    // While it's too long, and we have words left, keep removing words\n\n    while ((tspan.node() as SVGTextContentElement).getComputedTextLength() > width && letters.length) {\n      letters.pop();\n      tspan.text(letters.join(''));\n    }\n\n    if (letters.length === numWords) {\n      ellipsis.remove();\n    }\n  }\n\n  private _removeListeners(): void {\n    if (this._removeClickEventListener) {\n      this._removeClickEventListener();\n      this._removeClickEventListener = null;\n    }\n\n    if (this._removeScrollEventListener) {\n      this._removeScrollEventListener();\n      this._removeScrollEventListener = null;\n    }\n  }\n}\n"]}