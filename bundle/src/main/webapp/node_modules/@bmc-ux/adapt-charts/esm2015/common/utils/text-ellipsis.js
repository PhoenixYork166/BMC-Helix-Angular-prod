/* eslint-disable-next-line @typescript-eslint/no-explicit-any */
export function textEllipsis(textNode, text, ellipsisWidth) {
    let ellipsisText = '';
    let width = ellipsisWidth;
    const letters = text.split('');
    const lettersNum = letters.length;
    // Clear all children before inserting text
    textNode.selectAll('*').remove();
    const ellipsis = textNode.append('tspan').attr('class', 'ellipsis').text('...');
    const tSpan = textNode.insert('tspan', ':first-child').text(letters.join(''));
    if (tSpan.node().getComputedTextLength() > width && letters.length) {
        width = ellipsisWidth - ellipsis.node().getComputedTextLength();
    }
    // Try the whole line
    // While it's too long, and we have words left, keep removing words
    while (tSpan.node().getComputedTextLength() > width && letters.length) {
        letters.pop();
        tSpan.text(letters.join(''));
    }
    if (letters.length === lettersNum) {
        ellipsis.remove();
        ellipsisText = tSpan.text();
    }
    else {
        ellipsisText = tSpan.text() + '...';
    }
    return ellipsisText;
}
//# sourceMappingURL=text-ellipsis.js.map