{"version":3,"file":"pie-chart.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-charts/src/pie-chart/pie-chart.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {Point} from '@angular/cdk/drag-drop';\nimport * as d3 from 'd3';\nimport {ChartColorService} from '../common/services/chart-color.service';\nimport {ANIMATION_DURATION, ColorType, isUndefined} from '@bmc-ux/adapt-angular';\nimport {\n  AdaptChartCategoryEvent,\n  AdaptChartCategoryToggleEvent,\n  AdaptChartDimensions,\n  AdaptChartHeader,\n  AdaptChartLegend,\n  AdaptChartLegendState,\n  AdaptSVGGroupElement\n} from '../common/models/chart.model';\nimport {AdaptChartComponent} from '../common/chart.component';\nimport {AdaptPieChartAbstract, AdaptPieClickEvent, AdaptPieData} from '../common/models/pie.model';\n\n\n// TODO fix types\n@Component({\n  selector: 'adapt-pie-chart',\n  template: `\n    <adapt-chart #chart\n                 [width]=\"$this.width\"\n                 [height]=\"$this.height\"\n                 [header]=\"$this.header\"\n                 [legend]=\"$this.legend\"\n                 [data]=\"series\"\n                 [backgroundColor]=\"$this.backgroundColor\"\n                 [suppressHeader]=\"$this.suppressHeader\"\n                 [suppressLegend]=\"$this.suppressLegend\"\n                 [tooltip]=\"$this.tooltip\"\n                 (categoryEnter)=\"categoryEnter($event)\"\n                 (categoryLeave)=\"categoryLeave($event)\"\n                 (categoryMove)=\"categoryMove($event)\"\n                 (categoryShow)=\"categoryShowHandler($event)\"\n                 (categoryHide)=\"categoryHideHandler($event)\"\n                 (clickChart)=\"clickChartArea($event)\"\n                 [noDataText]=\"noDataText\"\n                 [updateChart]=\"_updateChart\"\n                 [dataBuilder]=\"_dataBuilder\"></adapt-chart>\n\n    <ng-template #tooltipTpl let-data=\"data\">\n      <div class=\"adapt-pie-chart-tooltip\">\n        <span [style.background-color]=\"data.color\" class=\"adapt-pie-chart-tooltip__color\"></span>\n        <span class=\"adapt-pie-chart-tooltip__category\">{{data.category}}</span>\n        <b>\n          <span>{{data.value}}</span>\n          <span>({{data.value / data.total | percent}})</span>\n        </b>\n      </div>\n    </ng-template>\n  `,\n  encapsulation: ViewEncapsulation.None\n})\nexport class AdaptPieChartComponent extends AdaptPieChartAbstract implements OnInit, OnChanges {\n  $this: AdaptPieChartComponent = this;\n\n  @Input() backgroundColor: string;\n  @Input() width: number;\n  @Input() height: number;\n  @Input() header: AdaptChartHeader;\n  @Input() suppressHeader: boolean;\n  @Input() suppressLegend: boolean;\n  @Input() tooltip: string | TemplateRef<unknown>;\n  @Input() dataBuilder: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void;\n  @Input() innerRadius: number;\n  @Input() showLegendTooltip: boolean = false;\n\n  @Input()\n  set series(s: AdaptPieData[]) {\n    this._series = s;\n\n    if (s) {\n      this._updateFilter(s);\n    }\n\n    if (this.alreadyChanged) {\n      const options = this.chartComponent.getGroupAndDimensions();\n\n      this._g = options.group;\n      this._dim = {\n        w: options.w,\n        h: options.h\n      };\n    }\n\n    if (this._g && this._dim && this.chartComponent) {\n      this.chartComponent.updateLegend(this.series.map((item) => ({\n        item: item.name,\n        hidden: !!item.hidden,\n        hover: false\n      })));\n    }\n  }\n\n  get series(): AdaptPieData[] {\n    return this._series;\n  }\n\n  @Output() readonly clickChart: EventEmitter<AdaptPieClickEvent> = new EventEmitter<AdaptPieClickEvent>();\n\n  /**\n   * Output that emits each time chart category shown\n   * @since 12.11.0\n   */\n  @Output() readonly categoryShow: EventEmitter<AdaptChartCategoryToggleEvent> = new EventEmitter<AdaptChartCategoryToggleEvent>();\n\n  /**\n   * Output that emits each time chart category hidden\n   * @since 12.11.0\n   */\n  @Output() readonly categoryHide: EventEmitter<AdaptChartCategoryToggleEvent> = new EventEmitter<AdaptChartCategoryToggleEvent>();\n\n  @Input()\n  set legend(legend: AdaptChartLegend) {\n    this._legend = Object.assign(this._legend, legend);\n  }\n\n  get legend(): AdaptChartLegend {\n    return {\n      customColors: this._legend.customColors,\n      activeHover: this._legend.activeHover,\n      activeClick: this._legend.activeClick,\n      columns: this._legend.columns,\n      width: this._legend.width,\n      items: (this.series && this.series.map((series) => ({\n        item: series.name,\n        hidden: !!series.hidden\n      })) as AdaptChartLegendState[])\n    };\n  }\n\n  get duration(): number {\n    return parseFloat(ANIMATION_DURATION.fast) * 1000;\n  }\n\n  @ViewChild(AdaptChartComponent, {static: true}) chartComponent: AdaptChartComponent;\n  @ViewChild('chart', {static: true}) chart: ElementRef;\n  @ViewChild('tooltipTpl', {static: true}) tooltipTemplate: string | TemplateRef<unknown>;\n\n  alreadyChanged: boolean = false;\n  total: number;\n\n  _dataBuilder: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void = (function (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) {\n    this._clear();\n    this._g = g;\n    this._dim = dim;\n    this._renderChart();\n  }).bind(this);\n\n  // TODO check if it can be refactored\n  _updateChart: () => void = (function () {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const __this = this;\n    const oldData = this._pie(this._data);\n    const data = this.series.map((d: AdaptPieData) => {\n      return {\n        name: d.name,\n        y: this._filter.indexOf(d.name) === -1 ? d.y : 0\n      };\n    });\n\n    this.total = data.reduce((acc, cur) => {\n      acc += cur.y;\n\n      return acc;\n    }, 0);\n    this._initData();\n    this._path = this._path.data(this._pie(this._data));\n    this._path\n      .transition()\n      .duration(this.duration)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attrTween('d', function (d: any, index: number) {\n        const startInter = d3.interpolate(oldData[index].startAngle, d.startAngle);\n        const endInter = d3.interpolate(oldData[index].endAngle, d.endAngle);\n\n        return function (t: number) {\n          d.startAngle = startInter(t);\n          d.endAngle = endInter(t);\n\n          return __this._arc(d);\n        };\n      });\n\n    if (this.innerRadius > 1) {\n      this._g\n        .selectAll('.adapt-pie-chart-main-label-sum')\n        .text(`${this.total}`);\n    }\n  }).bind(this);\n\n  private donutProportion: number = 16 / 25;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _g: any;\n  private _radius: number;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _pie: d3.Pie<any, number | { valueOf(): number }>;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _colors: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _data: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _arc: any;\n  private _initialColor: string;\n  private _dim: AdaptChartDimensions;\n  private _filter: string[] = [];\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _path: any;\n  private _cls: {\n    arc: string;\n    arcPart: string;\n    segment: string;\n    sectorIdentifier: string;\n    summary: string;\n    summaryLabel: string;\n    summaryText: string;\n  } = {\n    arc: 'arc',\n    arcPart: 'arc-part',\n    segment: 'arc-segment',\n    sectorIdentifier: 'adapt-pie-chart-sector',\n    summary: 'adapt-pie-chart-summary',\n    summaryLabel: 'adapt-pie-chart-main-label',\n    summaryText: 'adapt-pie-chart-main-label-sum'\n  };\n  private _legend: AdaptChartLegend = {\n    columns: 1,\n    activeHover: true,\n    activeClick: true,\n    width: 250,\n    customColors: null,\n    items: []\n  };\n  private _series: AdaptPieData[] = [];\n  private _legendTooltipPoint: Point = {x: 0, y: 0};\n\n  constructor(private _colorService: ChartColorService) {\n    super();\n  }\n\n  ngOnInit(): void {\n    if (this.header) {\n      this.header.allowHideLegend = false;\n    }\n  }\n\n  ngOnChanges(): void {\n    if (this.alreadyChanged && this._g && this._dim) {\n      this._data = [];\n      this._updateFilter(this.series);\n      this._clear();\n      this._renderChart();\n      this._updateChart();\n    }\n\n    this.alreadyChanged = true;\n  }\n\n  categoryEnter(categoryEvent: AdaptChartCategoryEvent): void {\n    const group = this._g.select(`#adapt-pie-chart-sector-${categoryEvent.id}`);\n    const color = group.attr('fill');\n    const hoverColor = this._colorService.getDarken(color, .15, ColorType.HEX);\n\n    this._initialColor = color;\n\n    group.attr('fill', hoverColor);\n\n    if (this.showLegendTooltip) {\n      this._legendTooltipPoint.x = categoryEvent.event.clientX;\n      this._legendTooltipPoint.y = categoryEvent.event.clientY;\n\n      const id = categoryEvent.id;\n      const tooltipTpl = this.tooltip || this.tooltipTemplate;\n      const data = this.series.map((d: AdaptPieData) => {\n        return {\n          name: d.name,\n          y: this._filter.indexOf(d.name) === -1 ? d.y : 0\n        };\n      });\n\n      this.chartComponent.showTooltip(this._legendTooltipPoint, tooltipTpl, {\n        data: {\n          color: this._legend.customColors ? this._getCustomColorById(id) : this._colorService.getColor(id),\n          category: data[id].name,\n          value: this.series[id].y,\n          total: this.total,\n          data: this.series[id],\n          event: categoryEvent.event\n        }\n      });\n    }\n  }\n\n  categoryLeave(categoryEvent: AdaptChartCategoryEvent): void {\n    const group = this._g.select(`#adapt-pie-chart-sector-${categoryEvent.id}`);\n\n    group.attr('fill', this._initialColor);\n\n    if (this.showLegendTooltip) {\n      this.chartComponent.hideTooltip();\n    }\n  }\n\n  categoryMove(categoryEvent: AdaptChartCategoryEvent): void {\n    this._legendTooltipPoint.x = categoryEvent.event.clientX;\n    this._legendTooltipPoint.y = categoryEvent.event.clientY;\n\n    this.chartComponent.updateTooltip();\n  }\n\n  categoryShowHandler(category: string): void {\n    const categoryId = this._filter.indexOf(category);\n\n    if (categoryId !== -1) {\n      this._filter.splice(categoryId, 1);\n      this._updateChart();\n    }\n\n    this.categoryShow.emit({category});\n  }\n\n  categoryHideHandler(category: string): void {\n    this._filter.push(category);\n    this._updateChart();\n\n    this.categoryHide.emit({category});\n  }\n\n  clickChartArea(e: MouseEvent): void {\n    const target = e.target as HTMLElement;\n    const isSector = target.classList.contains(this._cls.segment);\n\n    if (isSector) {\n      const id = (target.parentNode as HTMLElement)?.getAttribute('id');\n      const index = id.split('-').reverse()[0];\n      const total = this.series.reduce((acc, v) => acc + v.y, 0);\n      const color = d3.select(target.parentNode).attr('fill');\n\n      this.clickChart.emit({\n        event: e,\n        data: this.series[index],\n        color,\n        category: this.series[index].name,\n        value: this.series[index].y,\n        total\n      });\n    }\n  }\n\n  private _renderChart(): void {\n    this._initData();\n\n    if (this.innerRadius > 0) {\n      this._addSummary();\n    }\n\n    this._createColor();\n    this._createPie();\n    this._createDataChart();\n  }\n\n  private _initData(): void {\n    this._data = this.series.map((d: AdaptPieData) => this._filter.indexOf(d.name) === -1 ? d.y : 0);\n  }\n\n  private _createColor(): void {\n    this._colors = this._data.map((d, id) => {\n      return this._legend.customColors ? this._getCustomColorById(id) : this._colorService.getColor(id);\n    });\n    this._radius = Math.min(this._dim.w, this._dim.h) / 2;\n    this._g.attr('transform', `translate(${this._radius} ${this._radius})`);\n    this._arc = d3.arc()\n      .innerRadius(this._getInnerRadius())\n      .outerRadius(this._radius);\n  }\n\n  private _createPie(): void {\n    this._pie = d3.pie()\n      .sort(null);\n  }\n\n  private _createDataChart(): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const __this = this;\n    const tooltipTpl = this.tooltip || this.tooltipTemplate;\n    const data = this.series.map((d: AdaptPieData) => {\n      return {\n        name: d.name,\n        y: this._filter.indexOf(d.name) === -1 ? d.y : 0\n      };\n    });\n    const arc = this._g.selectAll(`.${this._cls.arc}`)\n      .data(this._pie(this._data))\n      .enter()\n      .each((d) => {\n        d.outerRadius = this._radius;\n      })\n      .append('g')\n      .attr('class', this._cls.arcPart)\n      .attr('id', (d, id) => `${this._cls.sectorIdentifier}-${id}`)\n      .attr('fill', (d, colorId) => this._colors[colorId]);\n\n    this.total = data.reduce((acc, cur) => {\n      acc += cur.y;\n\n      return acc;\n    }, 0);\n\n    this._path = arc.append('path')\n      .attr('class', this._cls.segment)\n      .attr('d', this._arc);\n\n    const tooltipAnchorPoint: Point = {x: 0, y: 0};\n\n    this._path.on('mouseenter', (d) => {\n      const {clientX, clientY} = d3.event;\n      const {index, value} = d;\n\n      tooltipAnchorPoint.x = clientX;\n      tooltipAnchorPoint.y = clientY;\n\n      this.chartComponent.showTooltip(tooltipAnchorPoint, tooltipTpl, {\n        data: {\n          color: __this._legend.customColors ? __this._getCustomColorById(index) : __this._colorService.getColor(index),\n          category: data[index].name,\n          value: value,\n          total: this.total,\n          data: __this.series[index],\n          event: d3.event\n        }\n      });\n    });\n\n    this._path.on('mousemove', () => {\n      const {clientX, clientY} = d3.event;\n\n      tooltipAnchorPoint.x = clientX;\n      tooltipAnchorPoint.y = clientY;\n\n      this.chartComponent.updateTooltip();\n    });\n\n    arc.on('mouseenter', function () {\n      __this._initialColor = d3.select(this)\n        .attr('fill');\n\n      d3.select(this)\n        .attr('fill', __this._colorService.getDarken(__this._initialColor, .15, ColorType.HEX));\n    })\n      .on('mouseout', function () {\n        __this.chartComponent.hideTooltip();\n\n        d3.select(this)\n          .attr('fill', __this._initialColor);\n      });\n  }\n\n  private _getInnerRadius(): number {\n    const maxInnerRadius = this._radius * (1 + this.donutProportion) / 2;\n    let minInnerRadius = this._radius * (1 - (1 - this.donutProportion) * 2);\n    let innerRadius = 0;\n\n    if (this.innerRadius > 0) {\n      const node = this._g\n        .select(`.${this._cls.summary}`)\n        .node();\n      const width = node ? node.getBoundingClientRect().width : 0;\n\n      minInnerRadius = Math.floor(width / 2) + 15;\n    }\n\n    if (!isUndefined(this.innerRadius) || this.innerRadius > 0) {\n      innerRadius = this.innerRadius;\n      innerRadius = innerRadius < minInnerRadius ? minInnerRadius : innerRadius;\n      innerRadius = innerRadius > maxInnerRadius ? maxInnerRadius : innerRadius;\n    }\n\n    return innerRadius;\n  }\n\n  private _clear(): void {\n    if (this._g) {\n      this._g.selectAll('*').remove();\n    }\n  }\n\n  private _addSummary(): void {\n    const data = this.series.map((d: AdaptPieData) => {\n      return {\n        name: d.name,\n        y: this._filter.indexOf(d.name) === -1 ? d.y : 0\n      };\n    });\n    const text = this._g\n      .append('text')\n      .attr('class', this._cls.summary);\n\n    this.total = data.reduce((acc, cur) => {\n      acc += cur.y;\n\n      return acc;\n    }, 0);\n\n    text.append('tspan')\n      .attr('text-anchor', 'middle')\n      .attr('x', 0)\n      .attr('y', '-.4em')\n      .attr('class', this._cls.summaryLabel)\n      .text('Total');\n\n    text.append('tspan')\n      .attr('text-anchor', 'middle')\n      .attr('x', 0)\n      .attr('y', '.8em')\n      .attr('class', this._cls.summaryText)\n      .text(`${this.total}`);\n  }\n\n  private _getCustomColorById(id: number): string {\n    const customColors = this._legend.customColors;\n    const len = customColors.length;\n    const index = id % len;\n\n    return customColors[index];\n  }\n\n  private _updateFilter(series: AdaptPieData[]): void {\n    this._filter = [];\n\n    series.forEach(s => {\n      if (s.hidden) {\n        this._filter.push(s.name);\n      }\n    });\n  }\n}\n"]}