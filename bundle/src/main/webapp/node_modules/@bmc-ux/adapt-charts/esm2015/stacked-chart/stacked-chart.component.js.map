{"version":3,"file":"stacked-chart.component.js","sourceRoot":"","sources":["../../../../../libs/adapt-charts/src/stacked-chart/stacked-chart.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnInit,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {ANIMATION_DURATION, ColorType, isString, isUndefined} from '@bmc-ux/adapt-angular';\nimport {isFunction} from 'lodash-es';\nimport BigNumber from 'bignumber.js';\nimport * as d3 from 'd3';\nimport {ScaleBand, ScaleLinear, ScalePoint} from 'd3-scale';\nimport {AdaptChartSliderComponent} from '../common/chart-slider/chart-slider.component';\nimport {AdaptChartComponent} from '../common/chart.component';\nimport {\n  AdaptChartAxis,\n  AdaptChartBoundaries,\n  AdaptChartCategoryEvent,\n  AdaptChartCategoryToggleEvent,\n  AdaptChartDimensions,\n  AdaptChartHeader,\n  AdaptChartLegend,\n  AdaptChartLegendState,\n  AdaptChartSeriesFormat,\n  AdaptChartSliderType,\n  AdaptSVGGroupElement\n} from '../common/models/chart.model';\nimport {CutNumberPipe} from '../common/pipes/cut-number.pipe';\nimport {ChartColorService} from '../common/services/chart-color.service';\nimport {nameof} from '../common/utils/chart-utils';\nimport {textEllipsis} from '../common/utils/text-ellipsis';\nimport {\n  AdaptStackedChartAbstract,\n  AdaptStackedChartSeries,\n  AdaptStackedChartType\n} from '../common/models/stacked-chart.model';\n\nexport interface KeyValueNumber {\n  [key: string]: number;\n}\n\nlet chartCounter = 1;\n\ninterface TooltipListInfoData {\n  seriesData: {\n    category: string;\n    value: number;\n    color: string;\n  }[];\n  total: number;\n}\n\nconst DEFAULT_MARGIN = 10;\n\n// TODO update types\n@Component({\n  selector: 'adapt-stacked-chart',\n  template: `\n    <adapt-chart #chart\n                 [width]=\"width\"\n                 [title]=\"header?.title || 'Graph chart'\"\n                 [description]=\"header?.subtitle || 'Graph chart'\"\n                 [height]=\"height\"\n                 [header]=\"header\"\n                 [legend]=\"legend\"\n                 [renderLegend]=\"renderLegend\"\n                 [data]=\"series\"\n                 [backgroundColor]=\"backgroundColor\"\n                 [suppressHeader]=\"suppressHeader\"\n                 [suppressLegend]=\"suppressLegend\"\n                 [tooltip]=\"tooltip\"\n                 (categoryShow)=\"categoryShowHandler($event)\"\n                 (categoryHide)=\"categoryHideHandler($event)\"\n                 (categoryEnter)=\"categoryEnterHandler($event)\"\n                 (categoryLeave)=\"categoryLeaveHandler($event)\"\n                 (clickChart)=\"clickChartArea($event)\"\n                 [noDataText]=\"noDataText\"\n                 [updateChart]=\"updateChart\"\n                 [dataBuilder]=\"_dataBuilder\">\n      <adapt-chart-slider *ngIf=\"showSlider\"\n                          (rangeChanged)=\"changeDataRange($event)\"\n                          [slidePointsCount]=\"slidePointsCount\"\n                          [height]=\"sliderHeight\"\n                          [xAxis]=\"xAxis\"\n                          [data]=\"sliderData\"\n                          [containerWidth]=\"chartWidth\"\n                          [customColors]=\"legend?.customColors\"\n                          [leftShift]=\"leftShift\"\n                          [type]=\"sliderType\"\n                          [stackedChart]=\"getStackedChart()\"></adapt-chart-slider>\n    </adapt-chart>\n\n    <ng-template #tooltipTpl let-data=\"data\">\n      <div class=\"adapt-chart-tooltip-content-container\">\n        <div>\n          <span class=\"adapt-chart-tooltip-color-spot\" [style.background-color]=\"data?.color\"></span>\n          <span class=\"adapt-chart-tooltip-category\">{{ data.category }}:</span>\n          <span><b>{{ data.value }}</b></span>\n        </div>\n        <div>\n          Total:\n          <span><b>{{ data.total }}</b></span>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template #tooltipListInfoTpl let-data=\"data\">\n      <div class=\"chart-tooltip-content-container align-start\">\n        <div *ngFor=\"let d of data.seriesData\">\n          <ng-container *ngIf=\"d.value !== 0\">\n            <span class=\"adapt-chart-tooltip-color-spot\" [style.background-color]=\"d?.color\"></span>\n            <span class=\"adapt-chart-tooltip-category\">{{d.category}}:</span>\n            <span><b>{{ d.value }}</b></span>\n          </ng-container>\n        </div>\n        <hr class=\"mt-1 mb-1\">\n        <div>\n          Total:\n          <span><b>{{data.total}}</b></span>\n        </div>\n      </div>\n    </ng-template>`,\n  encapsulation: ViewEncapsulation.None,\n  providers: [CutNumberPipe]\n})\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nexport class AdaptStackedChartComponent extends AdaptStackedChartAbstract<any> implements OnInit, OnChanges {\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @ViewChild('tooltipTpl', {static: true}) tooltipTemplate: string | TemplateRef<any>;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @ViewChild('tooltipListInfoTpl', {static: true}) tooltipListInfoTemplate: string | TemplateRef<any>;\n  @ViewChild(AdaptChartComponent, {static: true}) chartComponent: AdaptChartComponent;\n  @ViewChild(AdaptChartSliderComponent, {static: false}) chartSliderComponent: AdaptChartSliderComponent;\n\n  sliderType: AdaptChartSliderType = AdaptChartSliderType.bar;\n  sliderMonitorsCount: number;\n  sliderHeight: number = 36;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  sliderData: any;\n  heightZero: number = 0;\n\n  @Input() backgroundColor: string;\n  @Input() width: number;\n  @Input() height: number;\n  @Input() header: AdaptChartHeader;\n  @Input() suppressHeader: boolean;\n  @Input() suppressLegend: boolean;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Input() tooltip: string | TemplateRef<any>;\n  @Input() dataBuilder: (g: AdaptSVGGroupElement, dim: AdaptChartDimensions) => void;\n  @Input() type: AdaptStackedChartType;\n  @Input() xAxis: AdaptChartAxis;\n  @Input() yAxis: AdaptChartAxis;\n  @Input() showSlider: boolean = false;\n  @Input() hasTotalLabels: boolean = false;\n  @Input() seriesDisplay: AdaptChartSeriesFormat;\n  @Input() totalLabelTextFormatter: (val: number | BigNumber, d: d3.SeriesPoint<KeyValueNumber>) => string | number;\n  @Input() barWidth: number;\n  @Input() slidePointsCount: number;\n  @Input() hideAxises: boolean;\n  @Input() rotateXAxis: boolean = false;\n  @Input() xAxisTickFormatResolver: (interval: string | number, index: number) => string;\n  @Input() scientificMode: boolean = false;\n  /*\n  * Useful to prevent legend rendering on view(eg. on chart slider component)\n  * @since 11.4.0\n  */\n  @Input() renderLegend: boolean = true;\n\n  /**\n   * Threshold line in a chart to help determine which data points are either below or above a significant value\n   * @since 10.11.0\n   */\n  @Input() thresholdLine: number;\n\n  @Input() showEmptyColIndicator: boolean = true;\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  @Output() readonly clickChart: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Output that emits each time chart category shown\n   * @since 12.11.0\n   */\n  @Output() readonly categoryShow: EventEmitter<AdaptChartCategoryToggleEvent> = new EventEmitter<AdaptChartCategoryToggleEvent>();\n\n  /**\n   * Output that emits each time chart category hidden\n   * @since 12.11.0\n   */\n  @Output() readonly categoryHide: EventEmitter<AdaptChartCategoryToggleEvent> = new EventEmitter<AdaptChartCategoryToggleEvent>();\n\n  get isHorizontalSeries(): boolean {\n    return this.seriesDisplay === 'horizontal';\n  }\n\n  @Input()\n  set series(s: AdaptStackedChartSeries[]) {\n    this.sliderData = s;\n\n    this._categoryFilter = [];\n\n    s.forEach(series => {\n      if (series.hidden) {\n        this._categoryFilter.push(series.name);\n      }\n    });\n\n    if (this.showSlider) {\n      this._series = this._getDataRange();\n    } else {\n      this._series = s;\n    }\n\n    if (this.alreadyChanged) {\n      const options = this.chartComponent.getGroupAndDimensions();\n\n      this._g = options.group;\n      this._dim = {\n        w: options.w,\n        h: options.h\n      };\n    }\n\n    if (this._g && this._dim && this.chartComponent) {\n      this.chartComponent.updateLegend(this.series.map((item) => ({\n        item: item.name,\n        hidden: !!item.hidden,\n        hover: false\n      })));\n    }\n  }\n\n  get series(): AdaptStackedChartSeries[] {\n    return this._series;\n  }\n\n  alreadyChanged: boolean = false;\n\n  @Input()\n  set legend(legend: AdaptChartLegend) {\n    this._legend = Object.assign(this._legend, legend);\n\n    if (this.alreadyChanged) {\n      this.chartComponent.redrawChart();\n    }\n  }\n\n  get legend(): AdaptChartLegend {\n    return {\n      customColors: this._legend.customColors,\n      activeHover: this._legend.activeHover,\n      activeClick: this._legend.activeClick,\n      columns: this._legend.columns,\n      width: this._legend.width,\n      items: (this.series && this.series.map((series) => ({\n        item: series.name,\n        hidden: !!series.hidden\n      })) as AdaptChartLegendState[])\n    };\n  }\n\n  get leftShift(): number {\n    return this._margin.left;\n  }\n\n  get chartWidth(): number {\n    return this.width || this.chartComponent.chartWidth;\n  }\n\n  get duration(): number {\n    return parseFloat(ANIMATION_DURATION.fast) * 1000;\n  }\n\n  private get _margin(): AdaptChartBoundaries {\n    return {\n      top: 0,\n      left:\n        !this.hideAxises && this.xAxis ?\n          (this.xAxis.thickness || this._axisXThickness) + (this.xAxis.title ? this._axisTitleThickness : 0) : 0,\n      right: 0,\n      bottom:\n        !this.hideAxises && this.yAxis ?\n          (this.yAxis.thickness || this._axisYThickness) + (this.yAxis.title ? this._axisTitleThickness : 0) : 0\n    };\n  }\n\n  private _g: AdaptSVGGroupElement;\n  private _dim: AdaptChartDimensions;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _data: any[] = [];\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _dataFull: any[] = [];\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _colors: any[] = [];\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _keys: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _ordinal: any;\n  private _maxTicksCount: number = 7;\n  private _totalByCol: { [categ: string]: number | BigNumber } = {};\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _highlightColor: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _categoryFilter: any[] = [];\n\n  // Default values of xAxis, yAxis and axisTitle thickness\n  private _axisXThickness: number = 50;\n  private _axisYThickness: number = 25;\n  private _axisTitleThickness: number = 20;\n\n  private _legend: AdaptChartLegend = {\n    columns: 2,\n    activeHover: true,\n    activeClick: true,\n    width: 250,\n    customColors: null,\n    items: []\n  };\n  private _series: AdaptStackedChartSeries[] = [];\n\n  private _startDataPiece: number = 0;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _endDataPiece: any;\n\n  private _xScale: ScaleLinear<number, number> | ScaleBand<string> | ScalePoint<string>;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _yScale: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _xAxisCall: any;\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _yAxisCall: any;\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _bars: d3.Selection<d3.BaseType, d3.Series<KeyValueNumber, string>, SVGGElement, any>;\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _cls: any = {\n    axis: 'adapt-chart-axis',\n    axisHidden: 'adapt-chart-axis__hidden',\n    axisTitle: 'adapt-chart-axis-title',\n    axisXTitle: 'adapt-chart-axis-x-title',\n    axisYTitle: 'adapt-chart-axis-y-title',\n    barXAxis: 'bar-x-axis',\n    barYAxis: 'bar-y-axis',\n    colXAxis: 'col-x-axis',\n    colYAxis: 'col-y-axis',\n    category: 'adapt-chart-bars-category',\n    areaGroup: 'adapt-chart-area-group',\n    areaTooltipLines: 'adapt-chart-area-tooltip-lines',\n    dataRect: 'adapt-chart-data-rect',\n    totalLabelsGroup: 'total-labels-group',\n    totalLabelsGroupItem: 'total-labels-group-item',\n    totalLabelItem: 'total-label-item',\n    thresholdLineArea: 'threshold-line-area'\n  };\n\n  private readonly _emptyColIndicatorWidth: number = 22;\n  private readonly _emptyColIndicatorHeight: number = 24;\n\n  private _id: string;\n\n  constructor(private _cutNumber: CutNumberPipe,\n              private _colorService: ChartColorService) {\n    super();\n\n    this.updateChart = this.updateChart.bind(this);\n    this._dataBuilder = this._dataBuilder.bind(this);\n\n    this._id = `stacked-chart-${chartCounter++}`;\n  }\n\n  ngOnInit(): void {\n    if (this.scientificMode) {\n      BigNumber.config({EXPONENTIAL_AT: 4});\n    }\n\n    if (this.showSlider && !this.slidePointsCount) {\n      this._initSlidePointsCount();\n    }\n\n    this.alreadyChanged = true;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if ((changes[nameof<AdaptStackedChartComponent>('type')]\n        || changes[nameof<AdaptStackedChartComponent>('showSlider')]\n        || changes[nameof<AdaptStackedChartComponent>('thresholdLine')]\n        || changes[nameof<AdaptStackedChartComponent>('seriesDisplay')]\n        || changes[nameof<AdaptStackedChartComponent>('hasTotalLabels')]\n        || changes[nameof<AdaptStackedChartComponent>('barWidth')]\n        || changes[nameof<AdaptStackedChartComponent>('rotateXAxis')])\n      && this.alreadyChanged && this._dim) {\n      this.chartComponent.redrawChart();\n    }\n  }\n\n  updateChart(dim?: AdaptChartDimensions): void {\n    if (dim) {\n      this._dim = dim;\n    } else {\n      dim = this._dim;\n    }\n\n    this._initData();\n    this._prepareOrdinal();\n\n    this._updateAxisX(dim);\n    this._updateAxisY(dim);\n    this._updateData();\n    this._updateThresholdLineArea();\n  }\n\n  _dataBuilder(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    this._g = g;\n    this._dim = dim;\n\n    this._clear();\n    this._initData();\n    this._prepareOrdinal();\n    this._drawAxisX(g, dim);\n    this._drawAxisY(g, dim);\n    this._drawData(g);\n    this._updateThresholdLineArea();\n  }\n\n  getStackedChart(): AdaptStackedChartComponent {\n    return this;\n  }\n\n  categoryEnterHandler(categoryEvent: AdaptChartCategoryEvent): void {\n    const categoryGroup = this._g.select(`[data-category-id='${categoryEvent.id}']`);\n    const categoryGroupColor = categoryGroup.attr('fill');\n    const hoveredColor = this._colorService.getDarken(categoryGroupColor, .15, ColorType.HEX);\n\n    this._highlightColor = categoryGroupColor;\n\n    categoryGroup.attr('fill', hoveredColor);\n  }\n\n  categoryLeaveHandler(categoryEvent: AdaptChartCategoryEvent): void {\n    const categoryGroup = this._g.select(`[data-category-id='${categoryEvent.id}']`);\n\n    categoryGroup.attr('fill', this._highlightColor);\n  }\n\n  categoryShowHandler(category: string): void {\n    const categoryId = this._categoryFilter.indexOf(category);\n\n    if (categoryId !== -1) {\n      this._categoryFilter.splice(categoryId, 1);\n    }\n\n    this.updateChart(null);\n\n    if (!isUndefined(this.chartSliderComponent)) {\n      this.chartSliderComponent.showCategory(category);\n    }\n\n    this.categoryShow.emit({category});\n  }\n\n  categoryHideHandler(category: string): void {\n    this._categoryFilter.push(category);\n    this.updateChart(null);\n\n    if (!isUndefined(this.chartSliderComponent)) {\n      this.chartSliderComponent.hideCategory(category);\n    }\n\n    this.categoryHide.emit({category});\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  clickChartArea(e: any): void {\n    const target = e.target;\n    const isRect = target.classList.contains(this._cls.dataRect);\n\n    if (isRect) {\n      const color = d3.select(target.parentNode).attr('fill');\n      const categoryId = target.parentNode.getAttribute('data-category-id');\n      const category = this.series[categoryId].name;\n      const id = target.getAttribute('data-id');\n      const value = this._data[id][category];\n      const keys = Object.keys(this._data[id]);\n      const axisCategory = this._data[id].name;\n      const nameId = keys.indexOf('name');\n\n      keys.splice(nameId, 1);\n\n      const total: number = keys.reduce((acc, c) => acc + this._data[id][c], 0);\n\n      this.clickChart.emit({\n        event: e,\n        data: this.series.filter((d) => category === d.name)[0],\n        axisCategory,\n        color,\n        categoryId: category,\n        value,\n        total\n      });\n    }\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  changeDataRange(range: any): void {\n    this._startDataPiece = range.startPiece;\n    this._endDataPiece = range.endPiece;\n\n    this._series = this._getDataRange();\n    this._totalByCol = {};\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  getFormattedSeries(data: any): TooltipListInfoData {\n\n    const formattedData = data.series.map(d => {\n      return {\n        categoryName: d.name,\n        seriesValues: Object.entries(d).filter(v => v[0] !== 'name')\n      };\n    });\n\n    const currentCategory = formattedData.find(d => d.categoryName === data.category);\n    const total = currentCategory.seriesValues.reduce((acc: number, cur: number) => acc + cur[1], 0);\n\n    currentCategory.seriesValues = currentCategory.seriesValues.map((d, i) => {\n      return {\n        category: d[0],\n        value: d[1],\n        color: this.legend.customColors ? this._getCustomColorById(i) : this._colorService.getColor(i)\n      };\n    });\n\n    return {\n      seriesData: currentCategory.seriesValues,\n      total\n    };\n  }\n\n  private _initData(): void {\n    if (this.showSlider) {\n      this._endDataPiece = this._endDataPiece || this.slidePointsCount;\n    }\n\n    const ctg = this.showSlider ? this.xAxis.categories.slice(this._startDataPiece, this._endDataPiece) : this.xAxis.categories;\n\n    this._data = [];\n    this._dataFull = [];\n\n    ctg.forEach((c, index) => {\n      const o = {\n        name: c\n      };\n\n      this.series.forEach((s) => {\n        if (this._categoryFilter.indexOf(s.name) === -1) {\n          o[s.name] = o[s.name] || 0;\n          o[s.name] += s.data[index];\n        } else {\n          o[s.name] = 0;\n        }\n      });\n\n      this._data.push(o);\n    });\n\n    this.xAxis.categories.forEach((c, index) => {\n      const o = {\n        name: c\n      };\n\n      this.sliderData.forEach((s) => {\n        if (this._categoryFilter.indexOf(s.name) === -1) {\n          o[s.name] = o[s.name] || 0;\n          o[s.name] += s.data[index];\n        } else {\n          o[s.name] = 0;\n        }\n      });\n\n      this._dataFull.push(o);\n    });\n\n    this._data.forEach((data) => {\n      const {name} = data;\n      const categories = Object.keys(data);\n\n      this._totalByCol[name] = 0;\n\n      categories.forEach((category) => {\n        if (category !== 'name') {\n          if (this.scientificMode) {\n            this._totalByCol[name] = new BigNumber(this._totalByCol[name]).plus(data[category]);\n          } else {\n            this._totalByCol[name] += data[category];\n          }\n        }\n      });\n    });\n  }\n\n  private _prepareOrdinal(): void {\n    this._keys = this.series.map((s) => s.name);\n    this._colors = [];\n    this.series.forEach((s, id) => {\n      this._colors.push(this._legend.customColors ? this._getCustomColorById(id) : this._colorService.getColor(id));\n    });\n\n    this._ordinal = d3.scaleOrdinal()\n      .range(this._colors)\n      .domain(this._keys);\n  }\n\n  private _drawAxisX(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        this._drawAxisXForBar(g, dim);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        this._drawAxisXForColumn(g, dim);\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._drawAxisXForArea(g, dim);\n        break;\n      }\n    }\n  }\n\n  private _drawAxisXForBar(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    const ticks = this._getTicks().reverse();\n\n    this._drawAxisTitle(g, dim, this.xAxis.title, true);\n\n    this._xScale = d3.scaleLinear();\n    this._xScale.rangeRound([dim.w - this._margin.left - this._margin.right, 0]).domain([ticks[0], 0]);\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickValues(ticks)\n      .tickSize(-dim.h + this._margin.top + this._margin.bottom)\n      .tickFormat((d: number, i: number) => isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver(d, i) : this._getTickFormatForNumber(d))\n      .tickPadding(15);\n\n    g.append('g')\n      .attr('role', 'axis')\n      .attr('class', `${this._cls.axis} ${this._cls.barXAxis} ${this.hideAxises ? this._cls.axisHidden : ''}`)\n      .attr('transform', `translate(${this._margin.left}, ${dim.h - this._margin.top - this._margin.bottom})`)\n      .transition()\n      .duration(this.duration)\n      .call(this._xAxisCall);\n  }\n\n  private _drawAxisXForColumn(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    const axisWidth = dim.w - this._margin.left - this._margin.right;\n\n    setTimeout(() => {\n      const axisXTitleBlock = g.select(`.${this._cls.axisXTitle}`);\n\n      axisXTitleBlock.remove();\n      this._drawAxisTitle(g, dim, this.xAxis.title);\n    }, this.duration + 100);\n\n    this._xScale = d3.scaleBand();\n    (this._xScale as ScaleBand<string>)\n      .range([0, axisWidth])\n      .padding(0.25)\n      .domain(this.showSlider ? this.xAxis.categories.slice(this._startDataPiece, this._endDataPiece) : this.xAxis.categories);\n\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickFormat(isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver : null)\n      .tickSizeOuter(0)\n      .tickPadding(12);\n\n    this.chartComponent.updateChartBottomPadding(axisWidth, this._g, this.xAxis, this.rotateXAxis);\n\n    const axisBlock = g.append('g')\n      .attr('role', 'title')\n      .attr('class', `${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises || this.rotateXAxis ? this._cls.axisHidden : ''}`)\n      .attr('transform', `translate(${this._margin.left}, ${dim.h - this._margin.bottom})`);\n\n    axisBlock\n      .call(this._xAxisCall);\n\n    if (this.rotateXAxis) {\n      setTimeout(() => {\n        this.chartComponent.transformAxisTitles(axisBlock, this.rotateXAxis);\n\n        if (!this.hideAxises) {\n          axisBlock.classed(this._cls.axisHidden, null);\n        }\n      }, this.duration);\n    }\n  }\n\n  private _drawAxisXForArea(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    const axisWidth = dim.w - this._margin.left - this._margin.right;\n\n    setTimeout(() => {\n      const axisXTitleBlock = g.select(`.${this._cls.axisXTitle}`);\n\n      axisXTitleBlock.remove();\n      this._drawAxisTitle(g, dim, this.xAxis.title);\n    }, this.duration + 100);\n\n    this._xScale = d3.scalePoint()\n      .range([0, this._dim.w - this._margin.left - this._margin.right])\n      .domain(this.xAxis.categories);\n\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickFormat(isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver : null)\n      .tickSizeOuter(0)\n      .tickPadding(12);\n\n    this.chartComponent.updateChartBottomPadding(axisWidth, this._g, this.xAxis, this.rotateXAxis);\n\n    const axisBlock = g.append('g')\n      .attr('role', 'title')\n      .attr('class', `${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises || this.rotateXAxis ? this._cls.axisHidden : ''}`)\n      .attr('transform', `translate(${this._margin.left}, ${dim.h - this._margin.bottom})`);\n\n    axisBlock\n      .call(this._xAxisCall);\n\n    if (this.rotateXAxis) {\n      setTimeout(() => {\n        this.chartComponent.transformAxisTitles(axisBlock, this.rotateXAxis);\n\n        if (!this.hideAxises) {\n          axisBlock.classed(this._cls.axisHidden, null);\n        }\n      }, this.duration);\n    }\n  }\n\n  private _drawAxisY(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        this._drawAxisYForBar(g, dim);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        this._drawAxisYForColumn(g, dim);\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._drawAxisYForColumn(g, dim);\n        break;\n      }\n    }\n  }\n\n  private _drawAxisYForBar(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _self = this;\n\n    this._drawAxisTitle(g, dim, this.yAxis.title);\n\n    this._yScale = d3.scaleBand()\n      .rangeRound([0, dim.h - this._margin.top - this._margin.bottom])\n      .padding(0.25)\n      .domain(this.xAxis.categories);\n    this._yAxisCall = d3\n      .axisLeft(this._yScale)\n      .tickSizeOuter(0)\n      .tickFormat(function (d: string): string {\n          return _self._getTickFormatForString(d, this);\n        }\n      );\n\n    g.append('g')\n      .attr('role', 'axis')\n      .attr('class', `${this._cls.axis} ${this._cls.barYAxis} ${this.hideAxises ? this._cls.axisHidden : ''}`)\n      .attr('transform', `translate(${this._margin.left}, 0)`)\n      .transition()\n      .duration(this.duration)\n      .call(this._yAxisCall);\n  }\n\n  private _drawAxisYForColumn(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    const ticks = this._getTicks().reverse();\n\n    this._drawAxisTitle(g, dim, this.yAxis.title, true);\n\n    this._yScale = d3.scaleLinear()\n      .rangeRound([0, dim.h - this._margin.bottom - this._margin.top])\n      .domain([ticks[0], 0]);\n\n    this._yAxisCall = d3.axisLeft(this._yScale)\n      .tickValues(ticks)\n      .tickPadding(8)\n      .tickFormat((d: number) => this._getTickFormatForNumber(d))\n      .tickSize(-dim.w + this._margin.left + this._margin.right);\n\n    g.append('g')\n      .attr('role', 'axis')\n      .attr('class', `${this._cls.axis} ${this._cls.colYAxis} ${this.hideAxises ? this._cls.axisHidden : ''}`)\n      .attr('transform', `translate(${this._margin.left}, 0)`)\n      .transition()\n      .duration(this.duration)\n      .call(this._yAxisCall);\n  }\n\n  private _drawData(g: AdaptSVGGroupElement): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        this._drawDataBars(g);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        this._drawDataColumns(g);\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._drawDataArea(g);\n        break;\n      }\n    }\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _drawDataBars(g: any): void {\n    let baseColor: string;\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n\n    this._bars = g.append('g')\n      .attr('role', 'data')\n      .selectAll('g')\n      .data(d3.stack().keys(this._keys)(this._data));\n\n    const _xScale = (this._xScale as ScaleLinear<number, number>);\n\n    this._bars\n      .enter()\n      .append('g')\n      .attr('data-category-id', (d, i) => i)\n      .attr('role', 'group')\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('aria-label', function (d: any, i: number): any {\n        return _this.series[i].name;\n      })\n      .attr('class', (d, i) => `category-${i}`)\n      .attr('class', this._cls.category)\n      .attr('fill', (d) => this._ordinal(d.key))\n      .selectAll('rect')\n      .data(d => d)\n      .enter()\n      .append('rect')\n      .attr('class', this._cls.dataRect)\n      .attr('role', 'item')\n      .attr('data-id', (d, id) => id)\n      .attr('x', (d) => _xScale(d[0]) + this._margin.left + 1)\n      .attr('y', (d) => this._getBarYPosition(d.data.name))\n      .attr('width', (d) => _xScale(d[1]) - _xScale(d[0]) === 0 ? this.heightZero : _xScale(d[1]) - _xScale(d[0]))\n      .attr('height', this.barWidth ? this.barWidth : this._yScale.bandwidth())\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .on('mouseenter', function (d: any): void {\n        const {target} = d3.event;\n        const categoryId = target.parentNode.getAttribute('data-category-id');\n\n        _this.chartComponent.showTooltip(target, _this.tooltip || _this.tooltipTemplate, {\n          data: {\n            color: baseColor,\n            category: _this.series[categoryId].name,\n            value: _this._dividePoints(d[0], d[1]),\n            total: _this._totalByCol[d.data.name],\n            data: _this.series[categoryId],\n            event: d3.event\n          }\n        });\n      })\n      .on('mouseleave', function (): void {\n        const rect = d3.select(this);\n\n        _this.chartComponent.hideTooltip();\n\n        rect.attr('fill', null);\n      })\n      .on('mouseover', function (): void {\n        const self = d3.select(this);\n\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        baseColor = self.select<any>(function (): any {\n          return this.parentNode;\n        }).attr('fill');\n        const darkenColor = _this._colorService.getDarken(baseColor, .15, ColorType.HEX);\n\n        self.attr('fill', darkenColor);\n      });\n\n    if (this.showEmptyColIndicator) {\n      // check for the bar(s) with no data\n      const zeroBars: string[] = Object.keys(this._totalByCol).filter((key: string) => this._totalByCol[key] === 0);\n\n      // indicate bar with no data\n      zeroBars.forEach(bar => {\n        const colYPos: number = (this._yScale as ScaleBand<string>)(bar) - this._margin.top;\n        const yAttr = colYPos + (this._yScale as ScaleBand<string>).bandwidth() / 2 - this._emptyColIndicatorHeight / 2;\n        const xAttr = this._margin.left + DEFAULT_MARGIN;\n\n        this._drawEmptyDataIndicator(xAttr, yAttr, bar);\n      });\n    }\n\n    this._bars.exit().remove();\n  }\n\n  private _getBarYPosition(d: number): number {\n    return this.barWidth\n      ? this._yScale(d) + this._margin.top + ((this._yScale as ScaleBand<string>).bandwidth() / 2) - (this.barWidth / 2)\n      : this._yScale(d) + this._margin.top;\n  }\n\n  private _getWidthForColumn(): number {\n    return this.barWidth\n      ? this.barWidth\n      : this.isHorizontalSeries\n        ? (this._xScale as ScaleBand<string>).bandwidth() / this.series.length\n        : (this._xScale as ScaleBand<string>).bandwidth();\n  }\n\n  private _getColumnYPosForHorizontalSeries(d: d3.SeriesPoint<KeyValueNumber>): number {\n    return this._yScale(d[0] ? d[1] - d[0] : d[1]);\n  }\n\n  private _dividePoints(a: number, b: number): string {\n    return this.scientificMode\n      ? new BigNumber(b).minus(a).toString()\n      : Number((b - a).toFixed(6)).toString();\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _getColumnXPos(d: number, node: Node): any {\n    const xPos: number = (this._xScale as ScaleLinear<number, number>)(d) + this._margin.left;\n\n    if (this.isHorizontalSeries) {\n      if (this.barWidth) {\n        return xPos\n          // Based on category index calculate offset for each bar\n          + (this._getCurrentCategoryIndex(node) - (this.series.length / 2)) * this._getWidthForColumn()\n          + ((this._xScale as ScaleBand<string>).bandwidth() / 2);\n      } else {\n        return xPos + (this._getCurrentCategoryIndex(node) * this._getWidthForColumn());\n      }\n    } else {\n      return this.barWidth\n        ? xPos + ((this._xScale as ScaleBand<string>).bandwidth() / 2) - (this._getWidthForColumn() / 2)\n        : xPos;\n    }\n  }\n\n  private _getColumnYPos(d: d3.SeriesPoint<KeyValueNumber>): number {\n    return this.isHorizontalSeries ?\n      this._getColumnYPosForHorizontalSeries(d) :\n      this._yScale(d[1]);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _setYPos(d: any): number {\n    if (this._yScale(0) - this._getColumnYPosForHorizontalSeries(d) === 0) {\n      return this._getColumnYPos(d) - this.heightZero;\n    } else {\n      return this._getColumnYPos(d);\n    }\n  }\n\n  private _setRectPositionAndScaleForColumnsType(selection: d3.Selection<SVGRectElement, d3.SeriesPoint<KeyValueNumber>, SVGGElement, d3.Series<KeyValueNumber, string>>):\n    d3.Selection<SVGRectElement, d3.SeriesPoint<KeyValueNumber>, SVGGElement, d3.Series<KeyValueNumber, string>> {\n\n    return selection\n      .attr('x', (d, i, groups) => this._getColumnXPos(d.data.name, groups[i]))\n      .attr('y', (d) => this._setYPos(d))\n      .attr('height', (d) => this.isHorizontalSeries ?\n        (this._yScale(0) - this._getColumnYPosForHorizontalSeries(d) === 0 ?\n          this.heightZero : this._yScale(0) - this._getColumnYPosForHorizontalSeries(d)) :\n        (this._yScale(d[0]) - this._yScale(d[1]) === 0) ? this.heightZero : this._yScale(d[0]) - this._yScale(d[1]))\n      .attr('width', () => this._getWidthForColumn());\n  }\n\n  private _drawDataColumns(g: AdaptSVGGroupElement): void {\n    let baseColor: string;\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n    this._bars = g.append('g')\n      .attr('role', 'data')\n      .selectAll('g')\n      .data(d3.stack().keys(this._keys)(this._data));\n\n    const gContainer = this._bars\n      .enter()\n      .append('g')\n      .attr('data-category-id', (d, i) => i)\n      .attr('role', 'group')\n      .attr('aria-label', (d, i) => this.series[i].name)\n      .attr('fill', (d) => this._ordinal(d.key))\n      .attr('class', this._cls.category)\n      .selectAll('rect')\n      .data(d => d)\n      .enter();\n\n    let selection = gContainer\n      .append('rect')\n      .attr('class', this._cls.dataRect)\n      .attr('role', 'item')\n      .attr('aria-label', (d) => `${d.data.name}.: ${this._dividePoints(d[0], d[1])}`)\n      .attr('data-id', (d, id) => id);\n\n    selection = this._setRectPositionAndScaleForColumnsType(selection);\n\n    if (this.showEmptyColIndicator) {\n      // check for the column(s) with no data\n      const zeroCols: string[] = Object.keys(this._totalByCol).filter((key: string) => this._totalByCol[key] === 0);\n\n      // indicate column with no data\n      zeroCols.forEach(col => {\n        const colXPos: number = (this._xScale as ScaleBand<string>)(col) + this._margin.left;\n        const xAttr = colXPos + (this._xScale as ScaleBand<string>).bandwidth() / 2 - this._emptyColIndicatorWidth / 2;\n        const yAttr = this._dim.h - this._margin.bottom - this._emptyColIndicatorHeight - DEFAULT_MARGIN;\n\n        this._drawEmptyDataIndicator(xAttr, yAttr, col);\n      });\n    }\n\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    selection.on('mouseenter', function (d: any): void {\n      const {target} = d3.event;\n      let sv = 0;\n      let i = 0;\n      const keys = Object.keys(d.data).filter(k => k !== 'name');\n\n      for (i; i < keys.length; i++) {\n        if (d[0] === sv && d[1] === sv + d.data[keys[i]]) {\n          break;\n        } else {\n          sv += d.data[keys[i]];\n        }\n      }\n\n      _this.chartComponent.showTooltip(target, _this.tooltip || _this.tooltipTemplate, {\n        data: {\n          color: baseColor,\n          category: keys[i],\n          value: _this._dividePoints(d[0], d[1]),\n          total: _this._totalByCol[d.data.name],\n          data: _this.series.filter((r) => r.name === keys[i]),\n          event: d3.event\n        }\n      });\n    })\n      .on('mouseleave', function (): void {\n        const self = d3.select(this);\n\n        _this.chartComponent.hideTooltip();\n\n        self.attr('fill', null);\n      })\n      .on('mouseover', function (): void {\n        const self = d3.select(this);\n\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        baseColor = self.select<any>(function (): any {\n          return this.parentNode;\n        }).attr('fill');\n        const darkenColor = _this._colorService.getDarken(baseColor, .15, ColorType.HEX);\n\n        self.attr('fill', darkenColor);\n      });\n\n    this._addTotalLabels(g);\n    this._bars.exit().remove();\n  }\n\n  private _drawDataArea(g: AdaptSVGGroupElement): void {\n    const series = d3.stack().keys(this._keys)(this._data);\n    const ticks = this._getTicks();\n\n    this._xScale = d3.scalePoint();\n    this._xScale\n      .range([this._margin.left + this._margin.right, this._dim.w])\n      .domain(this.xAxis.categories);\n\n    this._yScale = d3.scaleLinear();\n    this._yScale\n      .rangeRound([0, this._dim.h - this._margin.bottom - this._margin.top])\n      .domain([ticks[ticks.length - 1], 0]);\n\n    /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n    const area = d3.area<(number | { data: any })[]>()\n      .x((d, i) => (this._xScale as ScalePoint<string>)(this.xAxis.categories[i]))\n      .y0(d => this._yScale((d as number[])[0]))\n      .y1(d => this._yScale((d as number[])[1]));\n\n    g.append('g')\n      .attr('class', this._cls.areaGroup)\n      .selectAll('path')\n      .data(series)\n      .join('path')\n      .attr('data-category-id', (d, i) => i)\n      .attr('aria-label', (d, i) => this.series[i].name)\n      .attr('fill', (d) => this._ordinal(d.key))\n      .attr('class', this._cls.category)\n      .attr('d', area);\n\n\n    this._g.selectAll(`.${this._cls.areaTooltipLines}`).remove();\n    this._drawTooltipLinesForArea(g, this._dim);\n  }\n\n  private _drawTooltipLinesForArea(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _this = this;\n\n    const _xScale = d3.scalePoint()\n      .range([0, dim.w - this._margin.left - this._margin.right])\n      .domain(this.xAxis.categories);\n    const _xAxisCall = d3.axisBottom(_xScale)\n      .tickSize(-dim.h + this._margin.top + this._margin.bottom)\n      .tickPadding(0);\n\n    const areaBlock = g.append('g')\n      .attr('role', 'axis')\n      .attr('class', `${this._cls.colYAxis} ${this._cls.areaTooltipLines}`)\n      .attr('transform', `translate(${this._margin.left}, ${dim.h - this._margin.top - this._margin.bottom})`);\n\n    areaBlock.transition().duration(this.duration).call(_xAxisCall);\n    areaBlock.select('path').attr('opacity', 0);\n    areaBlock.selectAll('g text').remove();\n    areaBlock.selectAll('g line').attr('opacity', 0);\n\n    areaBlock\n      .selectAll('g')\n      .append('rect')\n      .attr('pointer-events', 'all')\n      .attr('width', 20)\n      .attr('height', dim.h - this._margin.top - this._margin.bottom)\n      .attr('x', -10)\n      .attr('y', -dim.h + this._margin.top + this._margin.bottom)\n      .on('mouseover', function (category: string): void {\n        const parent = d3.select(this.parentNode);\n\n        parent.select('line').attr('opacity', 1);\n\n        const {target} = d3.event;\n\n        _this.chartComponent.showTooltip(\n          target,\n          _this.tooltip || _this.tooltipListInfoTemplate,\n          {data: _this.getFormattedSeries({category, series: _this._data, event: d3.event})},\n          null,\n          null,\n          true\n        );\n      })\n      .on('mouseout', function (): void {\n        const parent = d3.select(this.parentNode);\n\n        parent.select('line').attr('opacity', 0);\n        _this.chartComponent.hideTooltip();\n      });\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _addTotalLabels(g: d3.Selection<SVGGElement, any, any, any>): void {\n    const labelsGroup = g.append('g')\n      .attr('class', this._cls.totalLabelsGroup)\n\n      .attr('opacity', this.hasTotalLabels ? '1' : '0')\n      .attr('text-anchor', 'middle');\n\n    this._createTotalLabelsGroupsItems(labelsGroup);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _createTotalLabelsGroupsItems(labelsGroup: d3.Selection<SVGGElement, any, SVGGElement, any>): void {\n    labelsGroup\n      .selectAll(`g.${this._cls.totalLabelsGroupItem}`)\n      .data(this._getTotalLabelsData())\n      .enter()\n      .append('g')\n      .attr('class', this._cls.totalLabelsGroupItem)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('opacity', (d: any) => this._getTotalLabelGroupOpacity(d))\n      .selectAll('g')\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .data((d: any) => d)\n      .enter()\n      .append('g')\n      .attr('class', this._cls.totalLabelItem)\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .attr('transform', (d: any, i, groups) => this._getTotalLabelTransform(d, groups[i]))\n      /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n      .append('text').text((d: any) => this._getTotalLabelText(d) as number | string)\n      .attr('fill', 'currentColor')\n      .exit().remove();\n  }\n\n  private _getTotalLabelGroupOpacity(d: d3.Series<{ [key: string]: number }, string>): string {\n    return (!this.isHorizontalSeries || this._categoryFilter.indexOf(d.key) === -1) ? '1' : '0';\n  }\n\n  private _getTotalLabelText(d: d3.SeriesPoint<KeyValueNumber>): string | number | BigNumber {\n    const value = this.isHorizontalSeries ? d[1] - d[0] : this._totalByCol[d.data.name];\n\n    if (this.totalLabelTextFormatter) {\n      return this.totalLabelTextFormatter(value, d);\n    }\n\n    return value;\n  }\n\n  private _getTotalLabelTransform(d: d3.SeriesPoint<KeyValueNumber>, swg: Node): string {\n    return `translate(${this._getColumnXPos(d.data.name, swg) + this._getWidthForColumn() / 2\n    }, ${this._getColumnYPos(d) - 9})`;\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _getTotalLabelsData(): any {\n    const labelsDataArr = d3.stack().keys(this._keys)(this._data);\n\n    return this.isHorizontalSeries ?\n      labelsDataArr :\n      labelsDataArr.splice(-1);\n  }\n\n  private _getCurrentCategoryIndex(group: Node): number {\n    return d3.select<d3.BaseType, d3.Series<KeyValueNumber, string>>(\n      group.parentNode as d3.BaseType).datum().index;\n  }\n\n  private _getTicks(): number[] {\n    const data = this._dataFull.map((row) => {\n      const keys = Object.keys(row)\n        .filter((key) => key !== 'name');\n\n      return this.isHorizontalSeries ?\n        Math.max(...keys.map(key => row[key]))\n        : keys.reduce((acc, value) => {\n          return acc + row[value];\n        }, 0);\n    });\n\n    let max = Math.max(...data);\n\n    if (max === 0) {\n      max = 1;\n    }\n\n    if (this.thresholdLine && this.thresholdLine > max) {\n      max = this.thresholdLine;\n    }\n\n    let currentStep = Math.pow(10, Math.floor(Math.log10(max))) / 2;\n    const step = Math.pow(10, Math.floor(Math.log10(max))) / 2;\n    let count = Math.floor(max / currentStep) + 1;\n\n    while (count >= this._maxTicksCount) {\n      currentStep += step;\n      count = Math.floor(max / currentStep) + 1;\n    }\n\n    return (new Array(count)).fill(0).map((v, id) => (id + 1) * currentStep);\n  }\n\n  private _clear(): void {\n    this.chartComponent.clear();\n    this._data = [];\n  }\n\n  private _updateData(): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        const _xScale = (this._xScale as ScaleLinear<number, number>);\n\n        this._g\n          .selectAll(`.${this._cls.category}`)\n          .data(d3.stack().keys(this._keys)(this._data))\n          .selectAll('rect')\n          .data(d => d)\n          .attr('y', (d) => this._yScale(d.data.name) + (this.barWidth ? Math.floor(this._yScale.bandwidth() / 2 - this.barWidth / 2) : 0) + this._margin.top)\n          .attr('height', this.barWidth || this._yScale.bandwidth())\n          .transition()\n          .duration(this.duration)\n          .attr('width', (d) => _xScale(d[1]) - _xScale(d[0]))\n          .attr('x', (d) => _xScale(d[0]) + this._margin.left + 1);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        const selection = this._g\n          .selectAll(`.${this._cls.category}`)\n          .data(d3.stack().keys(this._keys)(this._data))\n          .selectAll('rect')\n          .data(d => d)\n          .transition()\n          .duration(this.duration);\n\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        this._setRectPositionAndScaleForColumnsType(selection as any);\n\n        if (this.showEmptyColIndicator) {\n          /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n          const _self = this;\n          const emptyDataIndicatorLists = this._g.selectAll('g[class=\"tick empty-column\"]');\n\n          emptyDataIndicatorLists.each(function (): void {\n            const elem = d3.select(this);\n            const col = elem.attr('aria-column');\n\n            const colXPos: number = (_self._xScale as ScaleBand<string>)(col) + _self._margin.left;\n            const xAttr = colXPos + (_self._xScale as ScaleBand<string>).bandwidth() / 2 - _self._emptyColIndicatorWidth / 2;\n            const yAttr = _self._dim.h - _self._margin.bottom - _self._emptyColIndicatorHeight - DEFAULT_MARGIN;\n\n            elem.transition().duration(_self.duration).attr('transform', `translate(${xAttr}, ${yAttr})`);\n          });\n        }\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._g.selectAll(`.${this._cls.areaGroup}`).remove();\n        this._drawDataArea(this._g);\n        break;\n      }\n    }\n\n    const totalsGroup = this._g\n      .selectAll<SVGGElement, d3.SeriesPoint<KeyValueNumber>>(`.${this._cls.totalLabelsGroup}`);\n\n    totalsGroup.transition()\n      .duration(this.duration)\n      .attr('opacity', this.hasTotalLabels ? '1' : '0');\n\n    if (this.hasTotalLabels) {\n      const groupsItems = totalsGroup\n        .selectAll<SVGGElement, d3.SeriesPoint<KeyValueNumber>>(`.${this._cls.totalLabelsGroupItem}`)\n        .data(this._getTotalLabelsData());\n\n\n      groupsItems.exit().remove();\n      this._createTotalLabelsGroupsItems(totalsGroup);\n\n      groupsItems\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        .attr('opacity', (d: any) => this._getTotalLabelGroupOpacity(d))\n        .selectAll<SVGElement, d3.SeriesPoint<KeyValueNumber>>(`.${this._cls.totalLabelItem}`)\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        .data((d: any) => d)\n        .transition()\n        .duration(this.duration)\n        /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n        .attr('transform', (d: any, i, groups) => this._getTotalLabelTransform(d, groups[i]))\n        .selectAll<SVGElement, d3.SeriesPoint<KeyValueNumber>>('text')\n        .text((d) => this._getTotalLabelText(d) as number | string);\n    }\n  }\n\n  private _updateThresholdLineArea(): void {\n    let thresholdLineArea = this._g.select(`.${this._cls.thresholdLineArea}`);\n\n    if (!this.thresholdLine) {\n      thresholdLineArea.remove();\n\n      return;\n    }\n\n    if (thresholdLineArea.empty()) {\n      thresholdLineArea = this._g.append('g')\n        .attr('class', this._cls.thresholdLineArea);\n\n      thresholdLineArea.append('rect')\n        .attr('class', 'threshold-area-rect')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('fill', '#000000')\n        .attr('style', 'pointer-events: none; opacity: .1;');\n\n      const defs = thresholdLineArea.append('defs');\n\n      defs.append('marker')\n        .attr('class', 'threshold-line-marker')\n        .attr('id', `${this._id}-marker-start`)\n        .attr('viewBox', '0 0 6 8')\n        .attr('markerWidth', 6)\n        .attr('markerHeight', 8)\n        .attr('refX', 5)\n        .attr('refY', 4)\n        .attr('orient', 'auto')\n        .append('path')\n        .attr('d', 'M 0 0 L 6 4 L 0 8 z');\n\n      defs.append('marker')\n        .attr('class', 'threshold-line-marker')\n        .attr('id', `${this._id}-marker-end`)\n        .attr('viewBox', '0 0 6 8')\n        .attr('markerWidth', 6)\n        .attr('markerHeight', 8)\n        .attr('refX', 1)\n        .attr('refY', 4)\n        .attr('orient', 'auto')\n        .append('path')\n        .attr('d', 'M 0 4 L 6 0 L 6 8 z');\n\n      thresholdLineArea.append('line')\n        .attr('class', 'threshold-line')\n        .attr('stroke-width', 1)\n        .attr('marker-start', `url(#${this._id}-marker-start)`)\n        .attr('marker-end', `url(#${this._id}-marker-end)`);\n\n      thresholdLineArea.append('text')\n        .attr('class', 'threshold-line-title-background');\n\n      thresholdLineArea.append('text')\n        .attr('class', 'threshold-line-title');\n    }\n\n    const maxTick = this._getTicks().pop(); // get the max tick\n    const chartDataAreaWidth = this._dim.w - this._margin.left - this._margin.right;\n    const chartDataAreaHeight = this._dim.h - this._margin.top - this._margin.bottom;\n\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        const thresholdLineAreaWidth = chartDataAreaWidth - chartDataAreaWidth / maxTick * this.thresholdLine;\n        const thresholdLineAreaLeftShift = this._margin.left + chartDataAreaWidth - thresholdLineAreaWidth;\n\n        thresholdLineArea.select('rect.threshold-area-rect')\n          .transition()\n          .duration(this.duration)\n          .attr('transform', `translate(${thresholdLineAreaLeftShift}, 0)`)\n          .attr('width', thresholdLineAreaWidth)\n          .attr('height', chartDataAreaHeight);\n\n        thresholdLineArea.select('line.threshold-line')\n          .transition()\n          .duration(this.duration)\n          .attr('x1', thresholdLineAreaLeftShift)\n          .attr('x2', thresholdLineAreaLeftShift)\n          .attr('y1', this._margin.top)\n          .attr('y2', this._margin.top + chartDataAreaHeight);\n\n        thresholdLineArea.select('text.threshold-line-title-background')\n          .transition()\n          .duration(this.duration)\n          .attr('x', thresholdLineAreaLeftShift)\n          .attr('y', this._margin.top + chartDataAreaHeight)\n          .attr('text-anchor', 'middle')\n          .attr('dy', '24')\n          .text(this.scientificMode ? new BigNumber(this.thresholdLine).toPrecision(2, 2) : this.thresholdLine);\n\n        thresholdLineArea.select('text.threshold-line-title')\n          .transition()\n          .duration(this.duration)\n          .attr('x', thresholdLineAreaLeftShift)\n          .attr('y', this._margin.top + chartDataAreaHeight)\n          .attr('text-anchor', 'middle')\n          .attr('dy', '24')\n          .text(this.scientificMode ? new BigNumber(this.thresholdLine).toPrecision(2, 2) : this.thresholdLine);\n\n        break;\n      }\n      case AdaptStackedChartType.Column:\n      case AdaptStackedChartType.Area: {\n        const thresholdLineAreaHeight = chartDataAreaHeight - chartDataAreaHeight / maxTick * this.thresholdLine;\n\n        thresholdLineArea.select('rect.threshold-area-rect')\n          .transition()\n          .duration(this.duration)\n          .attr('transform', `translate(${this._margin.left}, 0)`)\n          .attr('width', chartDataAreaWidth)\n          .attr('height', thresholdLineAreaHeight);\n\n        thresholdLineArea.select('line.threshold-line')\n          .transition()\n          .duration(this.duration)\n          .attr('x1', this._margin.left)\n          .attr('x2', this._dim.w)\n          .attr('y1', thresholdLineAreaHeight)\n          .attr('y2', thresholdLineAreaHeight);\n\n        thresholdLineArea.select('text.threshold-line-title-background')\n          .transition()\n          .duration(this.duration)\n          .attr('x', this._margin.left - 8)\n          .attr('y', thresholdLineAreaHeight)\n          .attr('text-anchor', 'end')\n          .attr('dy', '.32em')\n          .text(this.scientificMode ? new BigNumber(this.thresholdLine).toPrecision(2, 2) : this.thresholdLine);\n\n        thresholdLineArea.select('text.threshold-line-title')\n          .transition()\n          .duration(this.duration)\n          .attr('x', this._margin.left - 8)\n          .attr('y', thresholdLineAreaHeight)\n          .attr('text-anchor', 'end')\n          .attr('dy', '.32em')\n          .text(this.scientificMode ? new BigNumber(this.thresholdLine).toPrecision(2, 2) : this.thresholdLine);\n\n        break;\n      }\n    }\n\n    // If we have the same tick as the thresholdLine - remove that\n    d3.selectAll('g.tick')\n      .filter(d => d === this.thresholdLine)\n      .remove();\n  }\n\n  private _drawAxisTitle(g: AdaptSVGGroupElement, dim: AdaptChartDimensions, text: string, rotate: boolean = false): void {\n    if (!isString(text) || this.hideAxises) {\n      return;\n    }\n\n    let translate: string;\n    const axisTitle = g.append('g')\n      .attr('class', `${this._cls.axisTitle} ${(rotate ? this._cls.axisYTitle : this._cls.axisXTitle)}`)\n      .attr('role', 'title');\n\n    if (rotate) {\n      translate = `rotate(-90) translate(-${(dim.h - this._axisTitleThickness) / 2} ${this._axisTitleThickness / 2})`;\n    } else {\n      translate = `translate(${(dim.w + this._axisTitleThickness) / 2} ${dim.h + this.chartComponent.chartBottomPadding})`;\n    }\n\n    axisTitle\n      .attr('transform', translate)\n      .append('text')\n      .text(text)\n      .attr('text-anchor', 'middle')\n      .attr('transform', `translate(${(this._axisTitleThickness / (rotate ? 2 : 1))} 0)`);\n  }\n\n  private _updateAxisTitle(g: AdaptSVGGroupElement, dim: AdaptChartDimensions): void {\n    g.select(`.${this._cls.axisXTitle}`)\n      .transition()\n      .duration(this.duration)\n      .attr('transform', `translate(${(dim.w + this._axisTitleThickness) / 2} ${dim.h + this.chartComponent.chartBottomPadding})`);\n  }\n\n  /* Update X Axis */\n  private _updateAxisX(dim: AdaptChartDimensions): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        this._updateAxisXForBar(dim);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        this._updateAxisXForColumn(dim);\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._updateAxisXForArea(dim);\n        break;\n      }\n    }\n  }\n\n  private _updateAxisXForBar(dim: AdaptChartDimensions): void {\n    const ticks = this._getTicks().reverse();\n\n    this._xScale = d3.scaleLinear();\n    this._xScale.rangeRound([dim.w - this._margin.left - this._margin.right, 0]).domain([ticks[0], 0]);\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickValues(ticks)\n      .tickSize(-dim.h + this._margin.top + this._margin.bottom)\n      .tickFormat((d: number, i: number) => isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver(d, i) : this._getTickFormatForNumber(d))\n      .tickPadding(15);\n\n    this._g.select(`.${this._cls.barXAxis}`)\n      .transition()\n      .duration(this.duration)\n      .call(this._xAxisCall);\n  }\n\n  private _updateAxisXForColumn(dim: AdaptChartDimensions): void {\n    this._xScale = d3.scaleBand();\n    (this._xScale as ScaleBand<string>)\n      .range([0, dim.w - this._margin.left - this._margin.right])\n      .padding(0.25)\n      .domain(this.showSlider ? this.xAxis.categories.slice(this._startDataPiece, this._endDataPiece) : this.xAxis.categories);\n\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickFormat(isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver : null)\n      .tickSizeOuter(0)\n      .tickPadding(12);\n\n    this.chartComponent.updateChartBottomPadding(dim.w - this._margin.left - this._margin.right, this._g, this.xAxis, this.rotateXAxis);\n\n    const axisBlock = this._g.select(`.${this._cls.colXAxis}`)\n      .attr('class', `${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises || this.rotateXAxis ? this._cls.axisHidden : ''}`);\n\n    axisBlock\n      .transition()\n      .duration(this.duration)\n      .call(this._xAxisCall);\n\n    setTimeout(() => {\n      this.chartComponent.transformAxisTitles(axisBlock, this.rotateXAxis);\n\n      if (!this.hideAxises) {\n        axisBlock.classed(this._cls.axisHidden, null);\n      }\n    }, this.rotateXAxis ? this.duration + 100 : 0);\n\n    this._updateAxisTitle(this._g, dim);\n  }\n\n  private _updateAxisXForArea(dim: AdaptChartDimensions): void {\n    this._xScale = d3.scalePoint();\n    (this._xScale as ScalePoint<string>)\n      .range([0, dim.w - this._margin.left - this._margin.right])\n      .domain(this.showSlider ? this.xAxis.categories.slice(this._startDataPiece, this._endDataPiece) : this.xAxis.categories);\n\n    this._xAxisCall = d3.axisBottom(this._xScale)\n      .tickFormat(isFunction(this.xAxisTickFormatResolver) ? this.xAxisTickFormatResolver : null)\n      .tickSizeOuter(0)\n      .tickPadding(12);\n\n    this.chartComponent.updateChartBottomPadding(dim.w - this._margin.left - this._margin.right, this._g, this.xAxis, this.rotateXAxis);\n\n    const axisBlock = this._g.select(`.${this._cls.colXAxis}`)\n      .attr('class', `${this._cls.axis} ${this._cls.colXAxis} ${this.hideAxises || this.rotateXAxis ? this._cls.axisHidden : ''}`);\n\n    axisBlock\n      .transition()\n      .duration(this.duration)\n      .call(this._xAxisCall);\n\n    setTimeout(() => {\n      this.chartComponent.transformAxisTitles(axisBlock, this.rotateXAxis);\n\n      if (!this.hideAxises) {\n        axisBlock.classed(this._cls.axisHidden, null);\n      }\n    }, this.rotateXAxis ? this.duration + 100 : 0);\n\n    this._updateAxisTitle(this._g, dim);\n  }\n\n  /* Update Y Axis */\n  private _updateAxisY(dim: AdaptChartDimensions): void {\n    switch (this.type) {\n      case AdaptStackedChartType.Bar: {\n        this._updateAxisYForBar(dim);\n        break;\n      }\n      case AdaptStackedChartType.Column: {\n        this._updateAxisYForColumn(dim);\n        break;\n      }\n      case AdaptStackedChartType.Area: {\n        this._updateAxisYForColumn(dim);\n        break;\n      }\n    }\n  }\n\n  private _updateAxisYForBar(dim: AdaptChartDimensions): void {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    const _self = this;\n\n    this._yScale = d3.scaleBand()\n      .rangeRound([0, dim.h - this._margin.top - this._margin.bottom])\n      .padding(0.25)\n      .domain(this.xAxis.categories);\n    this._yAxisCall = d3\n      .axisLeft(this._yScale)\n      .tickSizeOuter(0)\n      .tickFormat(function (d: string): string {\n          return _self._getTickFormatForString(d, this);\n        }\n      );\n\n    this._g.select(`.${this._cls.barYAxis}`)\n      .transition()\n      .duration(this.duration)\n      .call(this._yAxisCall);\n  }\n\n  private _updateAxisYForColumn(dim: AdaptChartDimensions): void {\n    const ticks = this._getTicks().reverse();\n\n    this._yScale = d3.scaleLinear()\n      .rangeRound([0, dim.h - this._margin.bottom - this._margin.top])\n      .domain([ticks[0], 0]);\n\n    this._yAxisCall = d3.axisLeft(this._yScale)\n      .tickValues(ticks)\n      .tickFormat((d: number) => this._getTickFormatForNumber(d))\n      .tickSize(-dim.w + this._margin.left + this._margin.right);\n\n    this._g.select(`.${this._cls.colYAxis}`)\n      .transition()\n      .duration(this.duration)\n      .call(this._yAxisCall);\n  }\n\n  private _getCustomColorById(id: number): string {\n    const customColors = this._legend.customColors;\n    const len = customColors.length;\n    const index = id % len;\n\n    return customColors[index];\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _getDataRange(): any {\n    return this.sliderData.map((item) => {\n      const {name, hidden} = item;\n      let {data} = item;\n\n      data = data.slice(this._startDataPiece, this._endDataPiece);\n\n      return {name, data, hidden};\n    });\n  }\n\n  private _getDataLength(): number {\n    return this._series[0].data.length;\n  }\n\n  private _initSlidePointsCount(): void {\n    const dataLength = this._getDataLength();\n\n    if (dataLength < 12) {\n      this.slidePointsCount = 4;\n    } else if (dataLength >= 12 && dataLength < 36) {\n      this.slidePointsCount = 6;\n    } else {\n      this.slidePointsCount = 12;\n    }\n\n    this.sliderMonitorsCount = Math.ceil(dataLength / this.slidePointsCount);\n  }\n\n  /* empty data indicator */\n  private _drawEmptyDataIndicator(x: number, y: number, column: string): void {\n    const emptyGroupInfo = this._g.select('g[role=\"data\"]')\n      .append('g')\n      .attr('role', 'group')\n      .attr('class', 'tick empty-column')\n      .attr('aria-label', 'empty column')\n      .attr('aria-column', column)\n      .attr('transform', `translate(${x}, ${y})`);\n\n    emptyGroupInfo.append('rect')\n      .attr('role', 'item')\n      .attr('width', this._emptyColIndicatorWidth)\n      .attr('height', this._emptyColIndicatorHeight)\n      .attr('rx', 2);\n    emptyGroupInfo.append('text')\n      .attr('x', this._emptyColIndicatorWidth / 2)\n      .attr('y', this._emptyColIndicatorHeight / 2)\n      .attr('alignment-baseline', 'middle')\n      .attr('text-anchor', 'middle')\n      .attr('dy', '.1rem')\n      .text('0');\n  }\n\n  private _getTickFormatForNumber(d: number): string {\n    return this.scientificMode\n      ? new BigNumber(d).toPrecision(2, 2)\n      : this._cutNumber.transform(d, 0);\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _getTickFormatForString(d: string, _this: any): string {\n    const tickNode = d3.select(_this);\n    const ellipsisText = textEllipsis(tickNode, d, this.xAxis ? (this.xAxis.thickness || this._axisXThickness) : 0);\n\n    if (ellipsisText !== d) {\n      tickNode\n        .on('mouseenter', () => {\n          const {target} = d3.event;\n\n          this.chartComponent.showTooltip(target, d);\n        })\n        .on('mouseleave', () => {\n          this.chartComponent.hideTooltip();\n        });\n    }\n\n    return ellipsisText;\n  }\n}\n"]}