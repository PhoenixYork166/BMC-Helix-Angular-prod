{"version":3,"file":"rating-voting.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-obsolete/src/lib/rating/rating-voting.component.ts","../../../../../../libs/adapt-obsolete/src/lib/rating/rating-voting.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component, ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  ViewEncapsulation\n} from '@angular/core';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptTranslateService,\n  KeyValueObject,\n  TooltipPlacement\n} from '@bmc-ux/adapt-angular';\nimport {AdaptRadarGenericDirective, AdaptRadarService} from '@bmc-ux/adapt-radar';\n\nconst RATING_VOTING_TYPES = [\n  'star',\n  'flag',\n  'like',\n  'thanks',\n];\n\nexport type AdaptRatingType = 'star' | 'flag' | 'like' | 'thanks';\n\nexport class RatingVotingTypeError extends Error {\n  constructor(type: string) {\n    super(`Rating voting type \"${type}\" isn't supported (allowed: star, like, flag, thanks).`);\n  }\n}\n\n@Component({\n  selector: 'adapt-rating-voting',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[class.a-rating-voting]': 'true'\n  },\n  templateUrl: './rating-voting.component.html',\n  encapsulation: ViewEncapsulation.None\n})\n\nexport class AdaptRatingVotingComponent extends AdaptRadarGenericDirective implements OnChanges {\n  isActive: boolean = false;\n  wasClick: boolean = true;\n\n  @Input() type: AdaptRatingType = 'star';\n\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix, @angular-eslint/no-output-rename\n  @Output('voting-change') readonly onVotingChanged: EventEmitter<{ type: AdaptRatingType; isActive: boolean }> = new EventEmitter();\n\n  @Input()\n  get thanksText(): string {\n    return this._thanksText;\n  }\n\n  set thanksText(text: string) {\n    this._thanksText = text;\n  }\n\n  @Input()\n  get thanksAbbrMessage(): string {\n    return this._thanksAbbrMessage;\n  }\n\n  set thanksAbbrMessage(text: string) {\n    this._thanksAbbrMessage = text;\n  }\n\n  @Input()\n  get tooltip(): string {\n    return this._tooltip;\n  }\n\n  set tooltip(v: string) {\n    this._tooltip = v;\n  }\n\n  @Input()\n  get tooltipPlacement(): TooltipPlacement {\n    return this._tooltipPlacement;\n  }\n\n  set tooltipPlacement(placement: TooltipPlacement) {\n    this._tooltipPlacement = placement;\n  }\n\n  private _thanksText: string;\n  private _thanksAbbrMessage: string;\n  private _tooltip: string = '';\n   private _tooltipPlacement: TooltipPlacement = 'top';\n\n  constructor(private ts: AdaptTranslateService,\n              _adaptRadarService: AdaptRadarService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptRatingVoting);\n\n    this.setDefaultTexts(ts.getCurrentLanguage());\n  }\n\n  setDefaultTexts(translation: KeyValueObject): void {\n    this.thanksText = translation['adapt.rating.vote.thank'];\n    this.thanksAbbrMessage = translation['adapt.rating.vote.confirm'];\n  }\n\n  handleClick(): void {\n    this.isActive = !this.isActive;\n    this.onVotingChanged.emit({type: this.type, isActive: this.isActive});\n\n    if (this.type === 'thanks') {\n      this.wasClick = false;\n    }\n  }\n\n  ngOnChanges(): void {\n    if (this.type && RATING_VOTING_TYPES.indexOf(this.type) === -1) {\n      throw new RatingVotingTypeError(this.type);\n    }\n  }\n\n}\n","<button type=\"button\"\n        (click)=\"handleClick()\"\n        *ngIf=\"wasClick\"\n        [ngClass]=\"{\n        'a-rating-voting__btn' : type !== 'thanks',\n        'btn btn-secondary btn-sm': type === 'thanks',\n        'is-star-icon' : type === 'star',\n        'is-active': isActive,\n        'active': type === 'thanks' && isActive}\">\n\n  <span *ngIf=\"type ==='thanks'\">{{thanksText}}</span>\n\n  <span *ngIf=\"type !=='thanks'\"\n        [ngClass]=\" {\n        'd-icon-star': type === 'star' && isActive,\n        'd-icon-star_o': type === 'star' && !isActive,\n        'd-icon-thumb_up_adapt':  type === 'like' && isActive,\n        'd-icon-thumb_up_o_adapt':  type === 'like' && !isActive,\n        'd-icon-flag':  type === 'flag' && isActive,\n        'd-icon-flag_o':  type === 'flag' && !isActive}\"\n        class=\"a-rating-voting__icon\"\n        [placement]=\"tooltipPlacement\"\n        [adaptRadarDisableEventSending]=\"true\"\n        adaptTooltip=\"{{tooltip !== '' ? tooltip : ''}}\"\n        [attr.aria-label]=\"tooltip || ''\">\n  </span>\n</button>\n\n<span *ngIf=\"!wasClick\">{{thanksAbbrMessage}} <span class=\"font-weight-semibold\">\"{{thanksText}}\"</span></span>\n\n\n\n\n"]}