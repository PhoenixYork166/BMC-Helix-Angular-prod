{"version":3,"file":"typeahead.js","sourceRoot":"","sources":["../../../../../../libs/adapt-obsolete/src/lib/typeahead/typeahead.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  Injector,\n  Input,\n  NgZone,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  TemplateRef,\n  ViewContainerRef\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\n\n\nimport {AdaptTypeaheadModel} from './typeahead.config';\nimport {AdaptTypeaheadWindowComponent, ResultTemplateContext} from './typeahead-window';\n\nimport {distinctUntilChanged, map, mergeMap, skipWhile, switchMap, take, tap} from 'rxjs/operators';\nimport {BehaviorSubject, EMPTY, fromEvent, merge, Observable, of, OperatorFunction, Subject, Subscription} from 'rxjs';\nimport {Live, PopupService, PlacementArray, LayerService, AdaptDeviceDetectionService, positionElements, getEventKeyCode, isDefined, SafeCdr, toString} from '@bmc-ux/adapt-angular';\n\nenum Key {\n  Tab = 9,\n  Enter = 13,\n  Escape = 27,\n  ArrowUp = 38,\n  ArrowDown = 40\n}\n\nconst NGB_TYPEAHEAD_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => AdaptTypeaheadDirective),\n  multi: true\n};\n\n/**\n * Payload of the selectItem event.\n */\nexport interface AdaptTypeaheadSelectItemEvent {\n  /**\n   * An item about to be selected\n   */\n  item: any;\n\n  /**\n   * Function that will prevent item selection if called\n   */\n  preventDefault: () => void;\n}\n\n/**\n * Payload of the typeAheadWindowOpen event.\n */\nexport interface AdaptTypeAheadPopupEvent {\n  /**\n   * Text in the input box when event takes place\n   */\n  text: string;\n\n  /**\n   * State of typeAhead pop up, open or closed\n   */\n  open: boolean;\n}\n\nlet nextWindowId = 0;\n\n/**\n * NgbTypeahead directive provides a simple way of creating powerful typeaheads from any text input\n */\n@Directive({\n  selector: '[adaptTypeaheadDirective], input[ngbTypeahead]',\n  exportAs: 'ngbTypeahead',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '(blur)': 'handleBlur($event)',\n    '[class.open]': 'isPopupOpen()',\n    '(keydown)': 'handleKeyDown($event)',\n    '(focus)': 'handleFocus($event)',\n    '[autocomplete]': 'autocomplete',\n    'autocapitalize': 'off',\n    'autocorrect': 'off',\n    'role': 'combobox',\n    '[attr.aria-autocomplete]': 'showHint ? \"both\" : \"list\"',\n    '[attr.aria-activedescendant]': 'activeDescendant',\n    '[attr.aria-owns]': 'isPopupOpen() ? popupId : null',\n    '[attr.aria-expanded]': 'isPopupOpen()',\n    '[attr.aria-haspopup]': '\"listbox\"'\n  },\n  providers: [NGB_TYPEAHEAD_VALUE_ACCESSOR]\n})\nexport class AdaptTypeaheadDirective implements ControlValueAccessor,\n  OnInit, OnDestroy {\n  /**\n   * Value for the configurable autocomplete attribute.\n   * Defaults to 'off' to disable the native browser autocomplete, but this standard value does not seem\n   * to be always correctly taken into account.\n   */\n  @Input() autocomplete: string = 'off';\n  /**\n   * A selector specifying the element the tooltip should be appended to.\n   * Currently only supports \"body\".\n   */\n  @Input() container: HTMLElement | 'body';\n  /**\n   * A flag indicating if model values should be restricted to the ones selected from the popup only.\n   */\n  @Input() editable: boolean;\n  /**\n   * A flag indicating if the first match should automatically be focused as you type.\n   */\n  @Input() focusFirst: boolean;\n  /**\n   * A function to convert a given value into string to display in the input field\n   */\n  @Input() inputFormatter: (value: any) => string;\n  /**\n   * A function to transform the provided observable text into the array of results.  Note that the \"this\" argument\n   * is undefined so you need to explicitly bind it to a desired \"this\" target.\n   */\n  @Input() ngbTypeahead: OperatorFunction<string, any[]>;\n  /**\n   * Disables result provisioning while true\n   */\n  @Input() preventResults: boolean = false;\n  /**\n   * A function to format a given result before display. This function should return a formatted string without any\n   * HTML markup\n   */\n  @Input() resultFormatter: (value: any) => string;\n  /**\n   * A template to override a matching result default display\n   */\n  @Input() resultTemplate: TemplateRef<ResultTemplateContext>;\n  /**\n   * Show hint when an option in the result list matches.\n   */\n  @Input() showHint: boolean;\n  /**\n   * Popup custom class\n   */\n  @Input() popupClass: string;\n  /**\n   * Placement of a typeahead accepts:\n   * \"top\", \"top-left\", \"top-right\", \"bottom\", \"bottom-left\", \"bottom-right\",\n   * \"left\", \"left-top\", \"left-bottom\", \"right\", \"right-top\", \"right-bottom\"\n   * and array of above values.\n   */\n  @Input() placement: PlacementArray = 'auto';\n\n  /**\n   * When specified, the drop-down list will be anchored to the selected element\n   */\n  @Input() positionTo: HTMLElement;\n  /**\n   * Open popup on focus\n   */\n  @Input() openOnFocus: boolean = false;\n  /**\n   * Enable virtual scroll for results window. Can be suitable for big amount of results\n   */\n  @Input() virtualScroll: boolean;\n  /**\n   * Used to set \"itemSize\" virtual scroll @Input()\n   */\n  @Input() virtualScrollItemSize: number;\n  /**\n   * Used to set width for results dropdown\n   */\n  @Input() virtualScrollDropdownWidth: string;\n  /**\n   * Used to set height for results dropdown\n   */\n  @Input() virtualScrollDropdownHeight: string;\n  /**\n   * An event emitted when a match is selected. Event payload is of type NgbTypeaheadSelectItemEvent.\n   */\n  @Output() readonly selectItem: EventEmitter<AdaptTypeaheadSelectItemEvent> = new EventEmitter<AdaptTypeaheadSelectItemEvent>();\n  /**\n   * An event emitted when a typeAhead drop down is shown.\n   */\n  @Output() readonly typeAheadPopupOpen: EventEmitter<AdaptTypeAheadPopupEvent> = new EventEmitter<AdaptTypeAheadPopupEvent>();\n\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onBlur: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onFocus: EventEmitter<any> = new EventEmitter();\n  activeDescendant: string;\n  popupId: string = `ngb-typeahead-${nextWindowId++}`;\n  private _popupService: PopupService<AdaptTypeaheadWindowComponent>;\n  private _subscription: Subscription;\n  private _inputValueBackup: string;\n  private _valueChanges: Observable<string>;\n  private _resubscribeTypeahead: BehaviorSubject<any>;\n  private _windowRef: ComponentRef<AdaptTypeaheadWindowComponent>;\n  private _zoneSubscription: any;\n  private _setValueSubscription$: any;\n  private _openOnFocus$: Subject<string> = new Subject<string>();\n  private _documentListenerFunc: () => void;\n\n  private get _activeElement(): Element {\n    return document.activeElement;\n  }\n\n  private _isIE: boolean = false;\n\n  constructor(private _elementRef: ElementRef<HTMLInputElement>, private _viewContainerRef: ViewContainerRef,\n              private _renderer: Renderer2, private _injector: Injector, componentFactoryResolver: ComponentFactoryResolver,\n              config: AdaptTypeaheadModel, ngZone: NgZone, private _live: Live, private _layerService: LayerService,\n              private _deviceDetection: AdaptDeviceDetectionService,\n              private _applicationRef: ApplicationRef) {\n    this.container = config.container;\n    this.editable = config.editable;\n    this.focusFirst = config.focusFirst;\n    this.showHint = config.showHint;\n    this.placement = config.placement;\n\n    this._valueChanges = fromEvent<Event>(_elementRef.nativeElement, 'input')\n      .pipe(map($event => ($event.target as HTMLInputElement).value),\n        mergeMap((value) => {\n          // IE11 emit input event while placeholder contain spec. caracters\n          // fix for the issue https://github.bmc.com/bmc-ux/adapt-angular/issues/2836\n          // if it's IE need to check if input is focused, if statement is true - emit event\n          if (this._isIE) {\n            return this._activeElement === this._elementRef.nativeElement ? of(value) : EMPTY;\n          } else {\n            return of(value);\n          }\n        })\n      );\n\n    this._resubscribeTypeahead = new BehaviorSubject(null);\n\n    this._popupService = new PopupService<AdaptTypeaheadWindowComponent>(\n      AdaptTypeaheadWindowComponent, _injector, _viewContainerRef, _renderer, componentFactoryResolver, _applicationRef);\n\n    this._zoneSubscription = ngZone.onStable.subscribe(() => {\n      if (this.isPopupOpen()) {\n        const host = this.positionTo || this._elementRef.nativeElement;\n\n        positionElements(\n          host, this._windowRef.location.nativeElement, this.placement,\n          this.container === 'body');\n      }\n    });\n\n    this._setValueSubscription$ = ngZone.onStable.pipe(take(1)).subscribe(() => {\n      this._inputValueBackup = this._elementRef.nativeElement.value;\n    });\n  }\n\n  ngOnInit(): void {\n    this._isIE = this._deviceDetection.isIE();\n\n    const inputValues$ = this._valueChanges.pipe(\n      distinctUntilChanged(),\n      tap(value => {\n        this._inputValueBackup = value;\n\n        if (this.editable) {\n          this._onChange(value);\n        }\n      }));\n    const focus$ = merge(inputValues$, this._openOnFocus$);\n    const results$ = focus$.pipe(this.ngbTypeahead);\n    const processedResults$ = results$.pipe(skipWhile(() => this.preventResults)).pipe(tap((val) => {\n      if (!this.editable) {\n        const correctValue = val.filter(function (v: any): boolean {\n          let newValue = this.backupValue;\n\n          if (newValue) {\n            newValue = newValue.toLowerCase();\n          }\n\n          if (this.formatter) {\n            v = this.formatter(v);\n          }\n\n          return newValue === v.toLowerCase();\n\n          // if (typeof v === 'string' || v instanceof String) {\n          //   return newValue === v.toLowerCase();\n          // } else if (v.name) { // TODO: change logic to work with any object data\n          //   return newValue === v.name.toLowerCase();\n          // } else if (v.dataValue) {\n          //   return newValue === v.dataValue.toLowerCase();\n          // } else {\n          //   return false;\n          // }\n        }, {'backupValue': this._inputValueBackup, 'formatter': this.inputFormatter});\n\n        val.length ? this._onChange(correctValue[0]) : this._onChange(undefined);\n      }\n    }));\n    const userInput$ = this._resubscribeTypeahead.pipe(switchMap(() => processedResults$));\n\n    this._subscription = this._subscribeToUserInput(userInput$);\n  }\n\n  ngOnDestroy(): void {\n    this._closePopup();\n    this._unsubscribeFromUserInput();\n    this._zoneSubscription.unsubscribe();\n    this._setValueSubscription$.unsubscribe();\n  }\n\n  registerOnChange(fn: (value: any) => any): void {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: () => any): void {\n    this._onTouched = fn;\n  }\n\n  writeValue(value: any): void {\n    this._inputValueBackup = this._formatItemForInput(value);\n    this._writeInputValue(this._formatItemForInput(value));\n\n    // while [(ngModel)] value changed outside need to update the list by correct items\n    setTimeout(() => {\n      if (this.isPopupOpen() && this._elementRef) {\n        this._emitInputEvent();\n      }\n    });\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this._renderer.setProperty(this._elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  onDocumentClick(event: any): void {\n    if (event.target !== this._elementRef.nativeElement) {\n      this.dismissPopup();\n    }\n  }\n\n  /**\n   * Dismisses typeahead popup window\n   */\n  dismissPopup(): void {\n    if (this.isPopupOpen()) {\n      this._closePopup();\n      this._writeInputValue(this._inputValueBackup);\n    }\n  }\n\n  /**\n   * Returns true if the typeahead popup window is displayed\n   */\n  isPopupOpen(): boolean {\n    return this._windowRef != null;\n  }\n\n  handleBlur(event: FocusEvent): void {\n    this.onBlur.emit(event);\n\n    this._resubscribeTypeahead.next(null);\n    this._onTouched();\n  }\n\n  handleFocus(event: FocusEvent): void {\n    this.onFocus.emit(event);\n\n    if (this.openOnFocus) {\n      this._openOnFocus$.next(this._inputValueBackup);\n\n      return;\n    }\n\n    this.typeAheadPopupOpen.emit({text: this._inputValueBackup, open: false});\n  }\n\n  handleKeyDown(event: KeyboardEvent): void {\n    if (!this.isPopupOpen()) {\n      return;\n    }\n\n    const keyCode = getEventKeyCode(event);\n\n    if (Key[toString(keyCode)]) {\n      switch (keyCode) {\n        case Key.ArrowDown:\n          event.preventDefault();\n          this._windowRef.instance.next();\n          this._showHint();\n          break;\n        case Key.ArrowUp:\n          event.preventDefault();\n          this._windowRef.instance.prev();\n          this._showHint();\n          break;\n        case Key.Enter:\n        case Key.Tab: {\n          const result = this._windowRef.instance.getActive();\n\n          if (isDefined(result)) {\n            event.preventDefault();\n            event.stopPropagation();\n            this._selectResult(result);\n          }\n          this._closePopup();\n          break;\n        }\n      }\n    }\n  }\n\n  private _onTouched: () => void = (): void => {\n    return;\n  };\n\n  private _onChange: (_: any) => void = (): void => {\n    return;\n  };\n\n  private _openPopup(): void {\n    if (!this.isPopupOpen()) {\n      this.typeAheadPopupOpen.emit({text: this._inputValueBackup, open: true});\n      this._inputValueBackup = this._elementRef.nativeElement.value;\n      this._windowRef = this._popupService.open();\n      this._windowRef.instance.id = this.popupId;\n      this._windowRef.instance.hostClass = this.popupClass;\n      this._windowRef.instance.appendedToBody = this.container === 'body';\n      this._windowRef.instance.selectEvent.subscribe((result: any) => this._selectResultClosePopup(result));\n      this._windowRef.instance.activeChangeEvent.subscribe((activeId: string) => this.activeDescendant = activeId);\n      const menu = this._windowRef.location.nativeElement;\n\n      if (this.container) {\n        if (this.container === 'body') {\n          document.body.appendChild(menu);\n        } else {\n          this.container.appendChild(menu);\n        }\n      }\n\n      this._layerService.addComponent(this, (event) => {\n        event.preventDefault();\n        this._resubscribeTypeahead.next(null);\n        this.dismissPopup();\n      });\n\n      if (!isDefined(this._documentListenerFunc)) {\n        this._documentListenerFunc = this._renderer.listen('document', 'click', this.onDocumentClick.bind(this));\n      }\n    }\n  }\n\n  private _closePopup(): void {\n    this._popupService.close();\n    this._windowRef = null;\n    this.activeDescendant = undefined;\n    this._layerService.removeComponent(this);\n    this.typeAheadPopupOpen.emit({text: this._inputValueBackup, open: false});\n\n    if (isDefined(this._documentListenerFunc)) {\n      this._documentListenerFunc();\n      this._documentListenerFunc = null;\n    }\n  }\n\n  private _selectResult(result: any): void {\n    let defaultPrevented = false;\n\n    this.selectItem.emit({\n      item: result, preventDefault: () => {\n        defaultPrevented = true;\n      }\n    });\n    this._resubscribeTypeahead.next(null);\n\n    if (!defaultPrevented) {\n      if (this.inputFormatter) {\n        this._inputValueBackup = this.inputFormatter(result);\n      } else {\n        this._inputValueBackup = result;\n      }\n\n      this.writeValue(result);\n      this._onChange(result);\n    }\n  }\n\n  private _selectResultClosePopup(result: any): void {\n    this._selectResult(result);\n    this._closePopup();\n  }\n\n  private _showHint(): void {\n    if (this.showHint && this._windowRef.instance.hasActive() && this._inputValueBackup != null) {\n      const userInputLowerCase = this._inputValueBackup.toLowerCase();\n      const formattedVal = this._formatItemForInput(this._windowRef.instance.getActive());\n\n      if (userInputLowerCase === formattedVal.substr(0, this._inputValueBackup.length).toLowerCase()) {\n        this._writeInputValue(this._inputValueBackup + formattedVal.substr(this._inputValueBackup.length));\n        this._elementRef.nativeElement.setSelectionRange.apply(\n          this._elementRef.nativeElement, [this._inputValueBackup.length, formattedVal.length]);\n      } else {\n        this._writeInputValue(this._formatItemForInput(this._windowRef.instance.getActive()));\n      }\n    }\n  }\n\n  private _formatItemForInput(item: any): string {\n    return item != null && this.inputFormatter ? this.inputFormatter(item) : toString(item);\n  }\n\n  private _writeInputValue(value: string): void {\n    this._renderer.setProperty(this._elementRef.nativeElement, 'value', toString(value));\n  }\n\n  private _subscribeToUserInput(userInput$: Observable<any[]>): Subscription {\n    return userInput$.subscribe((results) => {\n      if (!results || results.length === 0) {\n        this._closePopup();\n      } else {\n        this._openPopup();\n        this._windowRef.instance.focusFirst = this.focusFirst;\n        this._windowRef.instance.results = results;\n        this._windowRef.instance.term = this._elementRef.nativeElement.value;\n        this._windowRef.instance.virtualScroll = this.virtualScroll;\n        this._windowRef.instance.virtualScrollItemSize = this.virtualScrollItemSize;\n        this._windowRef.instance.virtualScrollDropdownWidth = this.virtualScrollDropdownWidth;\n        this._windowRef.instance.virtualScrollDropdownHeight = this.virtualScrollDropdownHeight;\n\n        if (this.resultFormatter) {\n          this._windowRef.instance.formatter = this.resultFormatter;\n        }\n\n        if (this.resultTemplate) {\n          this._windowRef.instance.resultTemplate = this.resultTemplate;\n        }\n        this._windowRef.instance.resetActive();\n\n        // The observable stream we are subscribing to might have async steps\n        // and if a component containing typeahead is using the OnPush strategy\n        // the change detection turn wouldn't be invoked automatically.\n        SafeCdr.detectChanges(this._windowRef.changeDetectorRef);\n\n        this._showHint();\n      }\n      const count = results.length;\n\n      this._live.say(count === 0 ? 'No results available' : `${count} result${count === 1 ? '' : 's'} available`);\n    });\n  }\n\n  private _emitInputEvent(): void {\n    const event = new Event('input');\n\n    this._elementRef.nativeElement.dispatchEvent(event);\n  }\n\n  private _unsubscribeFromUserInput(): void {\n    if (this._subscription) {\n      this._subscription.unsubscribe();\n    }\n    this._subscription = null;\n  }\n}\n"]}