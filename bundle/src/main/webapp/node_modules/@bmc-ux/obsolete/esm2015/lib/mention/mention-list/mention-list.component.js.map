{"version":3,"file":"mention-list.component.js","sourceRoot":"","sources":["../../../../../../../libs/adapt-obsolete/src/lib/mention/mention-list/mention-list.component.ts","../../../../../../../libs/adapt-obsolete/src/lib/mention/mention-list/mention-list.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Output,\n  EventEmitter,\n  ViewChild,\n  ElementRef,\n  Renderer2,\n  TemplateRef,\n  Input,\n  OnDestroy\n} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {AdaptDeviceDetectionService, convertPlacement, isString, KeyValueObject, PlacementArray, positionElements} from '@bmc-ux/adapt-angular';\nimport {MentionStyleConfig} from '../mention.model';\n\n\n@Component({\n  selector: 'adapt-mention-list',\n  templateUrl: './mention-list.component.html',\n  providers: [AdaptDeviceDetectionService]\n})\nexport class AdaptMentionListComponent implements OnDestroy {\n  mentionStyleConfig: MentionStyleConfig = {\n    width: '200px',\n    maxHeight: '360px'\n  };\n\n  items: (string | KeyValueObject)[];\n  hidden: boolean = true;\n  showMentionLoader: boolean = false;\n  activeItem: number = 0;\n  searchKey: string;\n  itemTemplate: TemplateRef<string | KeyValueObject>;\n  topSideTemplate: TemplateRef<(string | KeyValueObject)[]>;\n  caretUpdated$: Subject<number> = new Subject();\n\n  inputStyles: CSSStyleDeclaration;\n\n  @Input() set appendToBody(v: boolean) {\n    if (Boolean(v) !== this._appendToBody) {\n      this._appendToBody = Boolean(v);\n\n      if (this._appendToBody) {\n        this._renderer.appendChild(document.body, this.list.nativeElement);\n      } else {\n        this._renderer.appendChild(this._elementRef.nativeElement, this.list.nativeElement);\n      }\n    }\n  }\n\n  get appendToBody(): boolean {\n    return this._appendToBody;\n  }\n\n  @ViewChild('list', {static: true}) list: ElementRef<HTMLDivElement>;\n  @ViewChild('caretPositionDiv', {static: true}) caretPositionDiv: ElementRef<HTMLDivElement>;\n\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onItemClick: EventEmitter<number> = new EventEmitter();\n\n  private _isMobile: boolean = false;\n  private _isRtl: boolean = false;\n  private _inputEl: HTMLInputElement | HTMLTextAreaElement;\n  private _appendToBody: boolean = false;\n\n  constructor(private _deviceDetection: AdaptDeviceDetectionService,\n              private _renderer: Renderer2,\n              private _elementRef: ElementRef,\n              private _dir: Directionality) {\n  }\n\n  ngOnDestroy(): void {\n    if (this.appendToBody) {\n      this._renderer.removeChild(document.body, this.list.nativeElement);\n    }\n  }\n\n  initializeConfig(inputEl: HTMLInputElement | HTMLTextAreaElement, mentionStyleConfig: MentionStyleConfig): void {\n    this.inputStyles = {...this._getElementStyles(inputEl)};\n    this._isMobile = this._deviceDetection.isMobile();\n    this._isRtl = this._dir.value === 'rtl';\n    this._inputEl = inputEl;\n\n    if (mentionStyleConfig) {\n      this.mentionStyleConfig = mentionStyleConfig;\n\n      if (this._isMobile) {\n        this.mentionStyleConfig.width = '100%';\n      }\n    }\n\n    this.caretUpdated$.subscribe(index => {\n      this.activeItem = 0;\n\n      this._setListPosition(this._inputEl, index);\n    });\n  }\n\n  onClick(event: Event, index: number): void {\n    event.preventDefault();\n    this.activeItem = index;\n    this.onItemClick.emit(index);\n  }\n\n  focusNext(): void {\n    if (this.items.length - 1 !== this.activeItem) {\n      this.activeItem++;\n    }\n  }\n\n  focusPrev(): void {\n    if (this.activeItem !== 0) {\n      this.activeItem--;\n    }\n  }\n\n  trackByIndex(index: number): number {\n    return index;\n  }\n\n  hideList(): void {\n    this.hidden = true;\n  }\n\n  showList(): void {\n    this.hidden = false;\n  }\n\n  getTempalteParams(value: string | KeyValueObject): KeyValueObject {\n    return isString(value) ? {'$implicit': value} : {...value};\n  }\n\n  setTemplates(itemTemplate: TemplateRef<string | KeyValueObject>, topSideTemplate: TemplateRef<(string | KeyValueObject)[]>): void {\n    this.itemTemplate = itemTemplate;\n    this.topSideTemplate = topSideTemplate;\n  }\n\n  getActiveValue(): string | KeyValueObject {\n    return this.items[this.activeItem];\n  }\n\n  setLoaderState(state: boolean): void {\n    this.showMentionLoader = state;\n  }\n\n  setListItems(items: (string | KeyValueObject)[]): void {\n    this.items = items;\n  }\n\n  setActiveIndex(index: number): void {\n    this.activeItem = index;\n  }\n\n  setSearchKey(searchKey: string): void {\n    this.searchKey = searchKey;\n  }\n\n  private _setListPosition(element: HTMLInputElement | HTMLTextAreaElement, caretPosition: number): void {\n    this._renderer.setStyle(this.list.nativeElement, 'zIndex', this.appendToBody ? '1070' : '1');\n    const ltrPlacement = [\n      'bottom-left',\n      'bottom',\n      'bottom-right',\n      'top-left',\n      'top',\n      'top-right',\n      'bottom-left',\n      'bottom',\n      'bottom-right',\n    ];\n    const placement: PlacementArray = this._isRtl ? convertPlacement(ltrPlacement) : ltrPlacement;\n\n    positionElements(this._getCaretPositionElement(element, caretPosition), this.list.nativeElement, placement, this.appendToBody);\n  }\n\n  private _getElementStyles(element: HTMLInputElement | HTMLTextAreaElement): CSSStyleDeclaration {\n    const isFirefox = this._deviceDetection.isFirefox();\n    const isInput = element.nodeName === 'INPUT';\n    const computed = window.getComputedStyle(element);\n\n    const properties = [\n      'direction',  // RTL support\n      'boxSizing',\n      'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n      'height',\n      'overflowX',\n      'overflowY',  // copy the scrollbar for IE\n\n      'borderTopWidth',\n      'borderRightWidth',\n      'borderBottomWidth',\n      'borderLeftWidth',\n      'borderStyle',\n\n      'paddingTop',\n      'paddingRight',\n      'paddingBottom',\n      'paddingLeft',\n\n      // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n      'fontStyle',\n      'fontVariant',\n      'fontWeight',\n      'fontStretch',\n      'fontSize',\n      'fontSizeAdjust',\n      'lineHeight',\n      'fontFamily',\n\n      'textAlign',\n      'textTransform',\n      'textIndent',\n      'textDecoration',  // might not make a difference, but better be safe\n\n      'letterSpacing',\n      'wordSpacing',\n\n      'tabSize',\n    ];\n\n    const div = this.caretPositionDiv.nativeElement;\n\n    return this._calculateElementStyles(div, properties, computed, isInput, isFirefox);\n  }\n\n  private _getCaretPositionElement(element: HTMLInputElement | HTMLTextAreaElement, position: number): HTMLElement {\n    const isInput = element.nodeName === 'INPUT';\n    const div = this.caretPositionDiv.nativeElement;\n\n    div.textContent = element.value.substring(0, position);\n\n    // The second special handling for input type=\"text\" vs textarea:\n    // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n    if (isInput) {\n      div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n    }\n\n    // Create span which will be used for the mention list positioning\n    const caretSpan = this._renderer.createElement('span');\n\n    caretSpan.textContent = '';\n    this._renderer.appendChild(div, caretSpan);\n\n    // Wrapping must be replicated *exactly*, including when a long word gets\n    // onto the next line, with whitespace at the end of the line before.\n    // The  *only* reliable way to do that is to copy the *entire* rest of the\n    // textarea's content into the <span> created at the caret position.\n    const restContentSpan = this._renderer.createElement('span');\n\n    restContentSpan.textContent = element.value.substring(position);\n    this._renderer.appendChild(div, restContentSpan);\n\n    // INPUT: Apply the same scrollLeft for case if scroll exist\n    div.scrollLeft = element.scrollLeft + caretSpan.offsetWidth + parseInt(div.style.paddingRight, 10);\n\n    // TEXTAREA: Apply the same scrollTop for case if scroll exist\n    div.scrollTop = element.scrollTop;\n\n    return caretSpan;\n  }\n\n  private _calculateElementStyles(element: HTMLDivElement, properties: string[], computedStyles: CSSStyleDeclaration,\n                                  isInput: boolean, isFirefox: boolean): CSSStyleDeclaration {\n    const styles = {} as CSSStyleDeclaration;\n\n    if (isInput) {\n      styles.whiteSpace = 'nowrap';\n    } else {\n      // Default textarea styles\n      styles.whiteSpace = 'pre-wrap';\n      styles.wordWrap = 'break-word';\n    }\n\n    // Position off-screen\n    styles.position = 'absolute';  // required to return coordinates properly\n    styles.top = '0';  // need to place it at the same position as input element\n    styles.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n    // Transfer the element's properties to the div\n    properties.forEach((prop) => {\n      styles[prop] = computedStyles[prop];\n    });\n\n    if (isFirefox) {\n      // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n      if (element.scrollHeight > parseInt(computedStyles.height, 10)) {\n        styles.overflowY = 'scroll';\n      }\n    } else {\n      styles.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n    }\n\n    return styles;\n  }\n\n}\n","<div [hidden]=\"hidden\"\n     class=\"mention-list-container position-absolute\"\n     #list\n     [style.width]=\"mentionStyleConfig.width\"\n     [style.maxHeight]=\"mentionStyleConfig.maxHeight\">\n  <ng-container *ngIf=\"topSideTemplate\">\n    <ng-template [ngTemplateOutlet]=\"topSideTemplate\"\n                 [ngTemplateOutletContext]=\"{ '$implicit': items }\"></ng-template>\n  </ng-container>\n  <ul class=\"mention-list\">\n    <li *ngFor=\"let item of items; let i = index; trackBy: trackByIndex\"\n        class=\"mention-list-item\"\n        [class.active]=\"activeItem === i\"\n        (click)=\"onClick($event, i)\"\n        (mousedown)=\"$event.preventDefault()\">\n\n      <ng-container *ngIf=\"!itemTemplate\">\n        <span *ngIf=\"searchKey\">{{ item[searchKey] }}</span>\n        <span *ngIf=\"!searchKey\">{{ item }}</span>\n      </ng-container>\n\n      <ng-container *ngIf=\"itemTemplate\">\n        <ng-template [ngTemplateOutlet]=\"itemTemplate\"\n                     [ngTemplateOutletContext]=\"getTempalteParams(item)\"></ng-template>\n      </ng-container>\n    </li>\n  </ul>\n\n  <div class=\"mention-loader-container\" *ngIf=\"showMentionLoader\">\n    <div class=\"loader-container\">\n      <div class=\"loader-section\"></div>\n    </div>\n  </div>\n</div>\n\n<div [ngStyle]=\"inputStyles\" #caretPositionDiv></div>\n"]}