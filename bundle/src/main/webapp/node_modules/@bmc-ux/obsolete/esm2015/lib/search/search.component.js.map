{"version":3,"file":"search.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-obsolete/src/lib/search/search.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {fromEvent as observableFromEvent} from 'rxjs';\n\nimport {debounceTime} from 'rxjs/operators';\nimport {\n  AfterViewInit,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptTranslateService,\n  toBoolean\n} from '@bmc-ux/adapt-angular';\nimport {AdaptRadarGenericDirective, AdaptRadarService} from '@bmc-ux/adapt-radar';\n\nlet nextId = 0;\n\n@Component({\n  selector: 'adapt-search',\n  template: `\n    <div *ngIf=\"!triggerableSearch\" class=\"adapt-search\"\n         [ngClass]=\"{'adapt-search-active': isActive, 'adapt-search-dirty': canClear || initialAlign === 'left'}\">\n      <div class=\"adapt-search-icon d-icon-search\"></div>\n      <div class=\"adapt-search-field-wrapper\">\n        <label class=\"adapt-search-field-layout adapt-search-field-ellipsis\" for=\"{{id}}\">\n          <span [ngClass]=\"{'sr-only': label || placeholder}\">{{label || placeholder}}</span>\n          <span style=\"visibility: hidden\">{{placeholder}}</span>\n        </label>\n        <input #search class=\"adapt-search-field adapt-search-field-ellipsis\"\n               type=\"search\"\n               [id]=\"id\"\n               [(ngModel)]=\"value\"\n               [placeholder]=\"placeholder\"\n               (blur)=\"onBlur()\"\n               (focus)=\"onFocus()\"/>\n      </div>\n      <button class=\"adapt-search-clear d-icon-cross_adapt btn btn-link\"\n              (click)=\"clear()\"\n              [ngClass]=\"{'adapt-search-clear-visible': canClear}\"\n              type=\"button\">\n        <span class=\"sr-only\">{{btnClearText}}</span>\n      </button>\n    </div>\n\n    <div *ngIf=\"triggerableSearch\" class=\"adapt-search-triggerable\"\n         [ngClass]=\"{'adapt-search-dirty': canClear || initialAlign === 'left'}\">\n      <div class=\"input-group flex-nowrap\">\n        <div style=\"position: relative; width: 100%;\">\n          <input class=\"form-control adapt-search-field-ellipsis\"\n                 [class.form-control-sm]=\"size === 'small'\"\n                 [class.form-control-lg]=\"size === 'large'\"\n                 type=\"search\"\n                 #search\n                 [id]=\"id\"\n                 [(ngModel)]=\"value\"\n                 [placeholder]=\"placeholder\"\n                 (blur)=\"onBlur()\"\n                 (focus)=\"onFocus()\"\n                 (keyup.enter)=\"setValue()\"/>\n          <button class=\"adapt-search-clear d-icon-cross_adapt btn btn-link\"\n                  (click)=\"clear()\"\n                  [ngClass]=\"{'adapt-search-clear-visible': canClear}\"\n                  type=\"button\">\n            <span class=\"sr-only\">{{btnClearText}}</span>\n          </button>\n        </div>\n        <div class=\"input-group-append\">\n          <button adapt-button\n                  [adaptRadarDisableEventSending]=\"true\"\n                  btn-type=\"secondary\"\n                  [ngClass]=\"[explicitSearchBtn ? 'explicit-search-btn' : 'adapt-search-button']\"\n                  (click)=\"setValue()\"\n                  [size]=\"size\"\n                  type=\"button\">\n            <span *ngIf=\"!explicitSearchBtn\" class=\"d-icon-search\"></span>\n            <span [class.sr-only]=\"!explicitSearchBtn\">{{ btnSearchText }}</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  `,\n  encapsulation: ViewEncapsulation.None\n})\nexport class AdaptSearchComponent extends AdaptRadarGenericDirective implements AfterViewInit {\n  @ViewChild('search', {static: false}) search: ElementRef;\n  @Input() placeholder: string;\n  @Input() btnClearText: string;\n  @Input() btnSearchText: string;\n  @Input() label: string = '';\n  @Input() debounceTime: number = 300;\n  @Input() id: string = `adapt-search-unique-${nextId++}`;\n  @Input() triggerableSearch: boolean = false;\n  @Input() size: string = null;\n  @Input() explicitSearchBtn: boolean = false;\n\n  value: string = '';\n\n  @Input()\n  set searchValue(searchVal: string) {\n    this.value = searchVal;\n  }\n\n  get searchValue(): string {\n    return this.value;\n  }\n\n  @Input() initialAlign: 'left' | 'centre' = 'centre';\n\n\n  @Output() readonly valueChanged: EventEmitter<string> = new EventEmitter();\n  @Output() readonly focusChanged: EventEmitter<boolean> = new EventEmitter();\n\n  private _isActive: boolean = false;\n\n  constructor(private ts: AdaptTranslateService,\n              _adaptRadarService: AdaptRadarService,\n              _elem: ElementRef<HTMLElement>) {\n    super(_adaptRadarService, _elem, AdaptRadarAngularCustomEventName.AdaptSearch);\n\n    const translation = ts.getCurrentLanguage();\n\n    this.placeholder = translation['adapt.common.search'];\n    this.btnClearText = translation['adapt.common.clear'];\n    this.btnSearchText = translation['adapt.common.search'];\n  }\n\n  @HostListener('click', ['$event'])\n  onClick(event: Event): void {\n    const target = event.target as HTMLElement;\n\n    if (!this.triggerableSearch || (this.triggerableSearch && target.classList.contains('adapt-search-clear'))) {\n      this.setActive();\n    }\n  }\n\n  setActive(): void {\n    this.search.nativeElement.focus();\n    this._changeActive(true);\n  }\n\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n\n    if (!this.triggerableSearch) {\n      observableFromEvent(this.search.nativeElement, 'input')\n        .pipe(debounceTime(this.debounceTime)).subscribe(() => this.valueChanged.emit(this.value));\n    }\n  }\n\n  get isActive(): boolean {\n    return this._isActive;\n  }\n\n  get isAdaptSearchDirty(): boolean {\n    // only check canClear or create separate class with aligning left\n    return this.canClear || this.initialAlign === 'left';\n  }\n\n  get canClear(): boolean {\n    return !!this.value;\n  }\n\n  onBlur(): void {\n    this._changeActive(false);\n  }\n\n  onFocus(): void {\n    this._changeActive(true);\n  }\n\n  setValue(): void {\n    if (this.triggerableSearch) {\n      this.valueChanged.emit(this.value);\n    }\n  }\n\n  clear(): void {\n    this.value = '';\n    this.valueChanged.emit(this.value);\n    this.focusChanged.emit(this._isActive);\n  }\n\n  // TODO: Refactor this if possible\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  private _changeActive(value: any): void {\n    this._isActive = toBoolean(value);\n    this.focusChanged.emit(this._isActive);\n  }\n}\n"]}