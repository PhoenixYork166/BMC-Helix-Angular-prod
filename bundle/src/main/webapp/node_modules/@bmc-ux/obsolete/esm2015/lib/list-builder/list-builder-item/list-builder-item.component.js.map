{"version":3,"file":"list-builder-item.component.js","sourceRoot":"","sources":["../../../../../../../libs/adapt-obsolete/src/lib/list-builder/list-builder-item/list-builder-item.component.ts","../../../../../../../libs/adapt-obsolete/src/lib/list-builder/list-builder-item/list-builder-item.component.html"],"names":[],"mappings":"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","sourcesContent":["// TODO update types\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {Component, EventEmitter, forwardRef, Input, NgZone, Output} from '@angular/core';\nimport {NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {take} from 'rxjs/operators';\nimport {AdaptCustomAction, AdaptCustomActionsAlignEnum} from '@bmc-ux/adapt-angular';\nimport {ListBuilderTextsModel, ListItemsTooltipConfig} from '../list-builder.model';\nimport {SelectOption} from '../../select/index';\n\n@Component({\n  selector: 'adapt-list-builder-item',\n  templateUrl: './list-builder-item.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AdaptListBuilderItemComponent),\n      multi: true\n    }\n  ],\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[attr.id]': 'id',\n    '[style.display]': \"'block'\"\n  }\n})\n\nexport class AdaptListBuilderItemComponent {\n  listItem: SelectOption;\n\n  editMode: boolean = false;\n  inputControlModel: string = '';\n  customActionsAlignedTo: AdaptCustomActionsAlignEnum = AdaptCustomActionsAlignEnum.Right;\n\n  get customActions(): AdaptCustomAction[] {\n    return [\n      {\n        name: this.controlLabels.cancel,\n        visible: true,\n        onClick: this.cancelEditMode.bind(this),\n        onMouseDown: (event) => {\n          event.preventDefault();\n        }\n      },\n      {\n        name: this.controlLabels.save,\n        visible: !this.isItemDisallowed,\n        onClick: this.exitEditMode.bind(this),\n        onMouseDown: (event) => {\n          event.preventDefault();\n        }\n      }\n    ];\n  }\n\n  @Input() id: string = '';\n  @Input() query: string = '';\n  @Input() controlLabels: ListBuilderTextsModel;\n  @Input() itemActionsTooltipConfig: ListItemsTooltipConfig;\n  @Input() hideControls: boolean = false;\n  @Input() isItemDisallowed: boolean = false;\n  @Input() hideEdit: boolean = false;\n  @Input() hideDelete: boolean = false;\n  @Input() draggable: boolean = true;\n  @Input() disabled: boolean = false;\n\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onEdit: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onDelete: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onSave: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onCancel: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onKeyUp: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onKeyDown: EventEmitter<any> = new EventEmitter();\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix\n  @Output() readonly onEditChange: EventEmitter<any> = new EventEmitter();\n\n  constructor(private _ngZone: NgZone) {\n  }\n\n  /**\n   * Save value and exit edit mode\n   */\n  exitEditMode(): void {\n    this.editMode = false;\n    this.listItem.name = this.inputControlModel;\n    this.onSave.emit(this.listItem);\n    this.onEditChange.emit('');\n  }\n\n  /**\n   * Exit edit mode without saving\n   */\n  cancelEditMode(): void {\n    this.editMode = false;\n\n    this.onCancel.emit(this.listItem);\n    this.onEditChange.emit('');\n  }\n\n  enterEditMode(): void {\n    this.editMode = true;\n    this.inputControlModel = this.listItem.name;\n  }\n\n  deleteItem(): void {\n    this.onDelete.emit(this.listItem);\n  }\n\n  editChange(): void {\n    this.onEditChange.emit(this.inputControlModel);\n  }\n\n  onUp(e: any): void {\n    e.preventDefault();\n    this.onKeyUp.emit();\n\n    this._ngZone.onStable\n      .pipe(take(1))\n      .subscribe((() => {\n        e.target.focus();\n      }).bind(e));\n  }\n\n  onDown(e: any): void {\n    e.preventDefault();\n    this.onKeyDown.emit();\n  }\n\n  writeValue(value: SelectOption): void {\n    if (value) {\n      this.listItem = value;\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(): void {\n    return;\n  }\n\n  // ### ControlValueAccessor implementation\n  private propagateChange: () => void = () => {\n    return;\n  };\n}\n","<div *ngIf=\"listItem\" class=\"adapt-list-item adapt-builder-list-item\"\n     [ngClass]=\"{'cursor-default' : !!query,\n                 'disabled' : disabled,\n                 'hover-disabled' : disabled || hideControls || editMode}\">\n\n  <ng-container *ngIf=\"editMode\">\n    <div class=\"adapt-list-item__edit-mode\">\n      <adapt-textfield [(ngModel)]=\"inputControlModel\"\n                       [autofocus]=\"true\"\n                       (blur)=\"isItemDisallowed ? cancelEditMode(): exitEditMode()\"\n                       (keyup)=\"editChange()\"\n                       (keyup.esc)=\"cancelEditMode()\"\n                       (keydown.enter)=\"$event.preventDefault()\"\n                       (keyup.enter)=\"isItemDisallowed ? false : exitEditMode()\"></adapt-textfield>\n    </div>\n\n    <div class=\"adapt-list-item__controls\">\n      <adapt-custom-actions [alignedTo]=\"customActionsAlignedTo\" [actions]=\"customActions\"></adapt-custom-actions>\n    </div>\n  </ng-container>\n\n\n  <ng-container *ngIf=\"!editMode && listItem\">\n\n    <adapt-icon *ngIf=\"draggable\"\n                [adaptRadarDisableEventSending]=\"true\"\n                [name]=\"'dots'\"\n                class=\"adapt-list-drag m-end-1\"></adapt-icon>\n\n    <span class=\"adapt-list-name\" tabindex=\"0\"\n          (keydown.ArrowUp)=\"onUp($event)\"\n          (keydown.ArrowDown)=\"onDown($event)\">\n      <adapt-highlight [result]=\"listItem.name\" [term]=\"query\"></adapt-highlight>\n    </span>\n\n    <div class=\"adapt-buttons-wrapper\">\n      <button *ngIf=\"!hideEdit\"\n              (click)=\"enterEditMode()\"\n              type=\"button\"\n              class=\"d-icon-pencil_adapt btn btn-link list-update\"\n              [placement]=\"itemActionsTooltipConfig.editBtn.placement\"\n              [adaptRadarDisableEventSending]=\"true\"\n              [adaptTooltip]=\"itemActionsTooltipConfig.editBtn.tooltipText\">\n        <span class=\"sr-only\">{{controlLabels.edit}}</span>\n      </button>\n\n      <button *ngIf=\"!hideDelete\"\n              (click)=\"deleteItem()\"\n              type=\"button\"\n              class=\"d-icon-trash_adapt btn btn-link list-remove\"\n              [placement]=\"itemActionsTooltipConfig.deleteBtn.placement\"\n              [adaptRadarDisableEventSending]=\"true\"\n              [adaptTooltip]=\"itemActionsTooltipConfig.deleteBtn.tooltipText\">\n        <span class=\"sr-only\">{{controlLabels.delete}}</span>\n      </button>\n    </div>\n\n  </ng-container>\n</div>\n"]}