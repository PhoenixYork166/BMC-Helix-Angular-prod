{"version":3,"file":"rating-binary.component.js","sourceRoot":"","sources":["../../../../../../libs/adapt-obsolete/src/lib/rating/rating-binary.component.ts","../../../../../../libs/adapt-obsolete/src/lib/rating/rating-binary.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  Renderer2,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport {\n  AdaptRadarAngularCustomEventName,\n  AdaptTranslateService,\n  KeyValueObject\n} from '@bmc-ux/adapt-angular';\nimport {AdaptRadarGenericDirective, AdaptRadarService} from '@bmc-ux/adapt-radar';\n\nconst RATING_BINARY_TYPE = ['icon', 'text', 'count'];\n\nexport class RatingBinaryTypeError extends Error {\n  constructor(type: string) {\n    super(`Rating binary type \"${type}\" isn't supported (allowed: 'icon', 'text', 'count').`);\n  }\n}\n\n@Component({\n  selector: 'adapt-rating-binary',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    '[class.a-rating-binary]': 'true'\n  },\n  templateUrl: './rating-binary.component.html',\n  encapsulation: ViewEncapsulation.None,\n  styles: [`\n    /* Hot fix for IE 11 */\n    .a-rating-center::after {\n      content: '';\n      display: inline-block;\n      min-height: inherit;\n      font-size: 0;\n    }\n  `]\n})\n\nexport class AdaptRatingBinaryComponent extends AdaptRadarGenericDirective implements OnChanges {\n  toggle: boolean = true;\n  showMessage: string;\n  showBtnValue: string;\n  savedValue: number;\n  quotesLeft: string;\n  quotesRight: string;\n\n  // TODO: change names\n\n  @Input() btnTextLeft: string; // 'Yes'\n  @Input() btnTextRight: string; // 'No';\n  @Input() undoButton: string; // 'Undo';\n\n  // eslint-disable-next-line @angular-eslint/no-output-on-prefix, @angular-eslint/no-output-rename\n  @Output('change-value') readonly onChangeValue: EventEmitter<{ value: string | number }> = new EventEmitter();\n\n  @Input()\n  get type(): 'icon' | 'text' | 'count' {\n    return this._type;\n  }\n\n  set type(t: 'icon' | 'text' | 'count') {\n    this._type = t;\n  }\n\n  @Input()\n  get likeMessage(): string {\n    return this._likeMessage;\n  }\n\n  set likeMessage(message: string) {\n    this._likeMessage = message;\n  }\n\n  @Input()\n  get dislikeMessage(): string {\n    return this._dislikeMessage;\n  }\n\n  set dislikeMessage(message: string) {\n    this._dislikeMessage = message;\n  }\n\n  @Input()\n  get textMessage(): string {\n    return this._textMessage;\n  }\n\n  set textMessage(v: string) {\n    this._textMessage = v;\n  }\n\n  @Input()\n  get value(): number {\n    return this._value;\n  }\n\n  set value(v: number) {\n    this._value = v;\n  }\n\n  private _type: 'icon' | 'text' | 'count' = 'text';\n  private _likeMessage: string; // 'You liked the article. ';\n  private _dislikeMessage: string; // 'You disliked the article. ';\n  private _textMessage: string; // 'You replied';\n  private _value: number = 12;\n\n  constructor(private _element: ElementRef,\n              private _renderer: Renderer2,\n              private ts: AdaptTranslateService,\n              _adaptRadarService: AdaptRadarService) {\n    super(_adaptRadarService, _element, AdaptRadarAngularCustomEventName.AdaptRatingBinary);\n\n    this.setDefaultTexts(ts.getCurrentLanguage());\n  }\n\n  setDefaultTexts(translation: KeyValueObject): void {\n    this.btnTextLeft = translation['adapt.rating.binary.left'];\n    this.btnTextRight = translation['adapt.rating.binary.right'];\n    this.undoButton = translation['adapt.common.undo'];\n    this.quotesLeft = translation['adapt.common.doubleQuotesLeft'];\n    this.quotesRight = translation['adapt.common.doubleQuotesRight'];\n    this._likeMessage = translation['adapt.rating.binary.like'];\n    this._dislikeMessage = translation['adapt.rating.binary.dislike'];\n    this._textMessage = translation['adapt.rating.binary.confirm'];\n  }\n\n  handleClick(e: Event, type: string = ''): void {\n    e.preventDefault();\n    this._setHostStyles();\n    this._toggleState();\n\n    switch (type) {\n      case 'like':\n        this.showMessage = this.likeMessage;\n        this.showBtnValue = this.btnTextLeft;\n        this.onChangeValue.emit({value: this.btnTextLeft});\n        break;\n      case 'dislike':\n        this.showMessage = this.dislikeMessage;\n        this.showBtnValue = this.btnTextRight;\n        this.onChangeValue.emit({value: this.btnTextRight});\n        break;\n      default:\n        this.onChangeValue.emit({value: this.undoButton});\n        break;\n    }\n  }\n\n  changeValue(action: string): void {\n    this._setHostStyles();\n    this._toggleState();\n\n    switch (action) {\n      case 'increase':\n        this.savedValue = this.value;\n        this.value++;\n        this.onChangeValue.emit({value: this.value});\n        break;\n      case 'decrease':\n        this.savedValue = this.value;\n        this.value--;\n        this.onChangeValue.emit({value: this.value});\n        break;\n    }\n  }\n\n  cancelValue(e: MouseEvent): void {\n    e.preventDefault();\n    this.reset();\n  }\n\n  reset(): void {\n    this.value = this.savedValue;\n    this.onChangeValue.emit({value: this.undoButton});\n    this._toggleState();\n  }\n\n  ngOnChanges(): void {\n    if (this.type && RATING_BINARY_TYPE.indexOf(this.type) === -1) {\n      throw new RatingBinaryTypeError(this.type);\n    }\n  }\n\n  private _setHostStyles(): void {\n    if (this._element) {\n      const {nativeElement} = this._element;\n      const {offsetHeight} = nativeElement;\n\n      this._renderer.setStyle(nativeElement, 'minHeight', `${offsetHeight}px`);\n      this._renderer.addClass(nativeElement, 'a-rating-center');\n    }\n  }\n\n  private _toggleState(): void {\n    this.toggle = !this.toggle;\n  }\n\n}\n","\n<div class=\"btn-group\" *ngIf=\"type !== 'count'\">\n  <ng-container *ngIf=\"toggle\">\n    <button type=\"button\"\n            class=\"btn btn-secondary\"\n            (click)=\"handleClick($event, 'like')\"\n            [ngClass]=\"{'d-icon-thumb_up_adapt': type === 'icon'}\">\n      <span [class.sr-only]=\"type === 'icon'\">{{btnTextLeft}}</span>\n    </button>\n    <button type=\"button\"\n            (click)=\"handleClick($event, 'dislike')\"\n            class=\"btn btn-secondary\"\n            [ngClass]=\"{'d-icon-thumb_down_adapt': type === 'icon'}\">\n      <span [class.sr-only]=\"type === 'icon'\">{{btnTextRight}}</span>\n    </button>\n  </ng-container>\n\n  <div *ngIf=\"!toggle\">\n    <span *ngIf=\"type === 'icon'\">{{showMessage}}</span>\n    <span *ngIf=\"type === 'text'\">{{textMessage}} <span class=\"font-weight-semibold\">{{quotesLeft}}{{showBtnValue}}{{quotesRight}}. </span>\n      <ng-content> </ng-content>\n    </span>\n    <a href=\"#\" *ngIf=\"undoButton !== ''\" (click)=\"handleClick($event, '')\">{{undoButton}}</a>\n  </div>\n\n</div>\n\n<div class=\"btn-group a-rating-group\" *ngIf=\"type === 'count'\">\n\n    <button type=\"button\" class=\"btn btn-secondary d-icon-triangle_up\"\n            [class.a-rating_btn-hidden]=\"!toggle\"\n            (click)=\"changeValue('increase')\">\n      <span class=\"sr-only\">{{btnTextLeft}}</span>\n    </button>\n    <div class=\"a-rating-group__value\" [class.font-weight-semibold]=\"!toggle\">{{value}}</div>\n    <button type=\"button\" class=\"btn btn-secondary d-icon-triangle_down\" *ngIf=\"toggle\" (click)=\"changeValue('decrease')\">\n      <span class=\"sr-only\">{{btnTextRight}}</span>\n    </button>\n\n    <div *ngIf=\"!toggle\" class=\"a-rating__undo-container\">\n      <a href=\"#\" *ngIf=\"undoButton !== ''\" (click)=\"cancelValue($event)\">{{undoButton}}</a>\n    </div>\n\n</div>\n\n\n\n\n"]}