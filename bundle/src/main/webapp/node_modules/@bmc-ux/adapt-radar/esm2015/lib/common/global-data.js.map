{"version":3,"file":"global-data.js","sourceRoot":"","sources":["../../../../../../libs/adapt-radar/src/lib/common/global-data.ts"],"names":[],"mappings":"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","sourcesContent":["import {Inject, Injectable, Optional, VERSION} from '@angular/core';\nimport {AdaptRadarGlobalData, AdaptRadarModuleConfig} from '../adapt-radar.model';\nimport {AdaptRadarUAParser} from './ua-parser';\nimport {ADAPT_RADAR_MODULE_CONFIG_TOKEN} from '../adapt-radar.token';\n\n/**\n * Service used to collect \"global\" data for analytics systems\n */\n@Injectable({providedIn: 'root'})\nexport class AdaptRadarGlobal {\n\n  constructor(\n    private _adaptRadarUAParser: AdaptRadarUAParser,\n    @Inject(ADAPT_RADAR_MODULE_CONFIG_TOKEN) @Optional() private _moduleConfig: AdaptRadarModuleConfig\n  ) {\n  }\n\n  getGlobalData(): AdaptRadarGlobalData {\n    const intl = new Intl.DateTimeFormat();\n    const {languages, language} = window.navigator;\n\n    const {browser, device, os} = this._adaptRadarUAParser.getResult();\n\n    const computedStyle = getComputedStyle(document.documentElement);\n    const hasAccessibilityCSS = computedStyle.getPropertyValue('--accessible-mode');\n    const hasDarkModeCSS = computedStyle.getPropertyValue('--dark-mode');\n    const hasCustomizedCSS = computedStyle.getPropertyValue('--color-warning');\n\n    return {\n      BrowserType: browser.name,\n      BrowserVersion: browser.major,\n      BrowserDetailedVersion: browser.version,\n\n      DeviceType: device.type,\n      DeviceVendor: device.vendor,\n      DeviceModel: device.model,\n\n      OperatingSystem: os.name,\n      OperatingSystemVersion: os.version,\n\n      ConnectionDownlink: window.navigator['connection'] ? (window.navigator['connection'].downlink || null) : null,\n      ConnectionEffectiveType: window.navigator['connection'] ? (window.navigator['connection'].effectiveType || null) : null,\n\n      LocalizationSettings: languages,\n      CurrentLanguage: language,\n      TimeZone: intl?.resolvedOptions()?.timeZone,\n\n      PageName: document.title,\n\n      AccessibilityMode: hasAccessibilityCSS === 'true',\n      DarkMode: hasDarkModeCSS === 'true',\n      Customized: hasCustomizedCSS === 'true',\n\n      AngularVersion: VERSION.full,\n      ADAPTVersion: this._moduleConfig?.versions?.ADAPT_ANGULAR_VERSION?.full ?? null,\n      TableVersion: this._moduleConfig?.versions?.ADAPT_TABLE_VERSION?.full ?? null,\n      CSSVersion: this._moduleConfig?.versions?.ADAPT_CSS_VERSION?.full ?? null,\n      GanttVersion: this._moduleConfig?.versions?.ADAPT_GANTT_VERSION?.full ?? null,\n      ObsoleteVersion: this._moduleConfig?.versions?.ADAPT_OBSOLETE_VERSION?.full ?? null,\n      RTEVersion: this._moduleConfig?.versions?.ADAPT_RTE_VERSION?.full ?? null,\n      ChartsVersion: this._moduleConfig?.versions?.ADAPT_CHARTS_VERSION?.full ?? null,\n      RadarVersion: this._moduleConfig?.versions?.ADAPT_RADAR_VERSION?.full ?? null,\n    };\n  }\n}\n"]}