{"version":3,"file":"configuration-definition-tab.component.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/configuration-definition-tab/configuration-definition-tab.component.ts","../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/configuration-definition-tab/configuration-definition-tab.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport {\n  IAdminComponent,\n  IAdminSetting,\n  IDataPageResult,\n  RX_ADMINISTRATION,\n  RX_APPLICATION,\n  RxAdminComponentDataPageService,\n  RxAdminSettingsService,\n  RxBundleCacheService,\n  RxFeatureService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem, OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { ColumnSortDirection, IRecordGridColumn } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { noop } from 'lodash';\nimport { BehaviorSubject, from, Observable, of } from 'rxjs';\nimport { filter, finalize, map, switchMap, tap } from 'rxjs/operators';\nimport { AX_BUNDLE_DETAILS } from '../bundle-details/bundle-details.constant';\nimport { IDefinitionActionConfig } from '../bundle-details/bundle-details.types';\nimport { DefinitionTabComponent } from '../definition-tab/definition-tab.component';\nimport { AdminSettingEditorComponent } from './admin-setting-editor/admin-setting-editor.component';\nimport { AX_CONFIG_DEFINITION_TAB } from './configuration-definition-tab.constant';\nimport { AX_CONFIGURATION_DEFINITION } from './configuration-definition.constant';\n\n@Component({\n  selector: 'ax-configuration-definition-tab',\n  templateUrl: './configuration-definition-tab.component.html'\n})\nexport class ConfigurationDefinitionTabComponent implements OnInit {\n  @ViewChild(DefinitionTabComponent, { static: true })\n  definitionTabComponent: DefinitionTabComponent;\n\n  @ViewChild('componentCellTemplate', { static: true })\n  componentCellTemplate: TemplateRef<any>;\n\n  gridColumns: IRecordGridColumn[];\n\n  definitions$: Observable<IDataPageResult> = this.rxAdminComponentDataPageQuery.get().pipe(\n    map((dataPage: IDataPageResult<IAdminComponent>) => ({\n      totalSize: dataPage.totalSize,\n      data: dataPage.data.map((item: IAdminComponent) => {\n        if (item.showInLocation === RX_ADMINISTRATION.settingAccessOptions.application.value) {\n          item.showInLocation = this.translateService.instant('com.bmc.arsys.rx.client.common.application.label');\n        } else if (item.showInLocation === RX_ADMINISTRATION.settingAccessOptions.innovationStudio.value) {\n          item.showInLocation = 'Innovation Studio';\n        } else if (item.showInLocation === RX_ADMINISTRATION.settingAccessOptions.both.value) {\n          item.showInLocation = `${this.translateService.instant(\n            'com.bmc.arsys.rx.client.common.application.label'\n          )}, Innovation Studio`;\n        } else {\n          item.showInLocation = this.translateService.instant('com.bmc.arsys.rx.client.common.none.label');\n        }\n\n        return {\n          ...item,\n          name: item.component,\n          componentType: this.getComponentType(item)\n        };\n      })\n    }))\n  );\n\n  isActionInProgress = false;\n  recordDefinition: Partial<IRecordDefinition>;\n  private rowSelectionChanged$ = new BehaviorSubject<IRowDataItem[]>([]);\n  editRouterLink: string;\n  private definitionType = 'config';\n\n  definitionActions$ = this.rowSelectionChanged$.pipe(map((selectedRows) => this.getDefinitionActions(selectedRows)));\n  private settingTypeLabels;\n\n  constructor(\n    private rxAdminComponentDataPageQuery: RxAdminComponentDataPageService,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService,\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private router: Router,\n    private rxBundleCache: RxBundleCacheService,\n    private rxFeatureService: RxFeatureService\n  ) {}\n\n  ngOnInit(): void {\n    if (this.rxFeatureService.isFeatureEnabled('DRD21-14987')) {\n      this.editRouterLink = `/${RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit2/${this.rxBundleCache.bundleId}:`;\n    } else {\n      this.editRouterLink = `/${RX_APPLICATION.innovationStudioBundleId}/${this.definitionType}/edit/${this.rxBundleCache.bundleId}:`;\n    }\n\n    this.gridColumns = [\n      {\n        title: AX_BUNDLE_DETAILS.configurationGridColumns.component.title,\n        fieldId: AX_BUNDLE_DETAILS.configurationGridColumns.component.fieldId,\n        cellTemplate: this.componentCellTemplate,\n        sortable: { direction: ColumnSortDirection.Asc, priority: 0 }\n      },\n      AX_BUNDLE_DETAILS.configurationGridColumns.componentType,\n      AX_CONFIG_DEFINITION_TAB.definitionGridColumns.showInLocation\n    ];\n\n    const fieldDefinitions = [\n      {\n        id: AX_BUNDLE_DETAILS.configurationGridColumns.component.fieldId,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: AX_BUNDLE_DETAILS.configurationGridColumns.componentType.fieldId,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: AX_CONFIG_DEFINITION_TAB.definitionGridColumns.showInLocation.fieldId,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      }\n    ];\n\n    const fieldDefinitionsById = fieldDefinitions.reduce((result, fieldDefinition) => {\n      result[fieldDefinition.id] = fieldDefinition;\n\n      return result;\n    }, {});\n\n    this.recordDefinition = {\n      fieldDefinitions,\n      fieldDefinitionsById\n    };\n\n    this.settingTypeLabels = {\n      external: this.translateService.instant(AX_CONFIGURATION_DEFINITION.configurationSettingTypes.external.labelKey),\n      inBundle: this.translateService.instant(AX_CONFIGURATION_DEFINITION.configurationSettingTypes.inbundle.labelKey),\n      shared: this.translateService.instant(AX_CONFIGURATION_DEFINITION.configurationSettingTypes.shared.labelKey)\n    };\n  }\n\n  private getComponentType(adminComponent: IAdminComponent): string {\n    return adminComponent.uiLocation === 'External Location'\n      ? this.settingTypeLabels.external\n      : adminComponent.custom === 'CommonSettings'\n      ? this.settingTypeLabels.shared\n      : this.settingTypeLabels.inBundle;\n  }\n\n  private getDefinitionActions(selectedRows: IRowDataItem[]): IDefinitionActionConfig[] {\n    return [\n      {\n        id: AX_BUNDLE_DETAILS.standardDefinitionActionNames.new,\n\n        subActions: [\n          {\n            labelKey: 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.shared-setting.label',\n            id: RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType,\n            rxId: RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType\n          },\n          {\n            labelKey: 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.label',\n            id: RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType,\n            rxId: RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType\n          },\n          {\n            labelKey: 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.label',\n            id: RX_ADMINISTRATION.configurationSettingTypes.external.configurationType,\n            rxId: RX_ADMINISTRATION.configurationSettingTypes.external.configurationType\n          }\n        ]\n      },\n      {\n        id: AX_BUNDLE_DETAILS.standardDefinitionActionNames.delete,\n        isDisabled: selectedRows.length === 0\n      }\n    ];\n  }\n\n  onCustomAction(event: { actionId: string; selectedRows: IRowDataItem[] }): void {\n    if (event.actionId === RX_ADMINISTRATION.configurationSettingTypes.shared.configurationType) {\n      this.router.navigate([\n        RX_APPLICATION.innovationStudioBundleId,\n        this.definitionType,\n        this.rxFeatureService.isFeatureEnabled('DRD21-14987') ? 'new2' : 'new',\n        this.rxBundleCache.bundleId\n      ]);\n    } else if (event.actionId === RX_ADMINISTRATION.configurationSettingTypes.inbundle.configurationType) {\n      this.openInBundleSettingsEditor({\n        editMode: false,\n        titleKey: 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.title',\n        selectedAdminSetting: {\n          linkType: RX_ADMINISTRATION.configurationSettingTypes.inbundle.value\n        }\n      });\n    } else if (event.actionId === RX_ADMINISTRATION.configurationSettingTypes.external.configurationType) {\n      this.openInBundleSettingsEditor({\n        editMode: false,\n        titleKey: 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.title',\n        selectedAdminSetting: {\n          linkType: RX_ADMINISTRATION.configurationSettingTypes.external.value\n        }\n      });\n    }\n  }\n\n  editAdminSetting(row: KeyValueObject): void {\n    if (row.custom === 'CustomView') {\n      this.rxAdminSettingsService.getAdminSetting(row.component).subscribe((adminSetting: IAdminSetting) => {\n        this.openInBundleSettingsEditor({\n          editMode: true,\n          titleKey: this.getTitleKey(adminSetting.linkType),\n          selectedAdminSetting: adminSetting\n        });\n      });\n    }\n  }\n\n  private openInBundleSettingsEditor(data: KeyValueObject) {\n    from(\n      this.rxModalService\n        .openDockedPanel({\n          title: this.translateService.instant(data.titleKey),\n          content: AdminSettingEditorComponent,\n          size: OpenViewActionModalSize.Small as any,\n          data: {\n            ...data\n          }\n        })\n        .catch(noop)\n    )\n      .pipe(\n        filter<string>(Boolean),\n        tap(() => {\n          this.isActionInProgress = true;\n        }),\n        finalize(() => {\n          this.isActionInProgress = false;\n        }),\n        switchMap(() => this.definitionTabComponent.recordGrid.api.refresh())\n      )\n      .subscribe();\n  }\n\n  private getTitleKey(linkType: string): string {\n    return linkType === RX_ADMINISTRATION.configurationSettingTypes.inbundle.value\n      ? 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.in-bundle-setting.label'\n      : 'com.bmc.arsys.rx.innovation-studio.tabs.configurations.new.external-setting.label';\n  }\n\n  onDeleteDefinition(selectedRows: IRowDataItem[]): void {\n    const definitionNames = selectedRows.map((definition) => definition.name);\n\n    from(\n      this.rxModalService.confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.definitionTabComponent.getDeleteSelectedDefinitionMessage()\n      })\n    )\n      .pipe(\n        tap((result: boolean) => {\n          this.isActionInProgress = result;\n        }),\n        switchMap((response) =>\n          response\n            ? this.rxAdminSettingsService.deleteAdminSetting(definitionNames).pipe(\n                tap(() => {\n                  this.isActionInProgress = false;\n                }),\n                switchMap(() => this.definitionTabComponent.recordGrid.api.refresh())\n              )\n            : of({})\n        ),\n        finalize(() => {\n          this.isActionInProgress = false;\n        })\n      )\n      .subscribe();\n  }\n\n  onRowSelectionChanged(selectedRows: IRowDataItem[]): void {\n    this.rowSelectionChanged$.next(selectedRows);\n  }\n}\n","<ax-definition-tab\n  [definitionActions]=\"definitionActions$ | async\"\n  [gridColumns]=\"gridColumns\"\n  [recordDefinition]=\"recordDefinition\"\n  [definitionType]=\"'config-definition'\"\n  [definitions$]=\"definitions$\"\n  [isActionInProgress]=\"isActionInProgress\"\n  (rowSelectionChanged)=\"onRowSelectionChanged($event)\"\n  (customAction)=\"onCustomAction($event)\"\n  (deleteDefinition)=\"onDeleteDefinition($event)\"\n></ax-definition-tab>\n\n<ng-template #componentCellTemplate let-dataItem=\"dataItem\">\n  <div (click)=\"editAdminSetting(dataItem)\" *ngIf=\"dataItem.custom === 'CustomView'\">\n    <a [routerLink]=\"\" (click)=\"(false)\">\n      {{ dataItem.component }}\n    </a>\n  </div>\n  <div *ngIf=\"dataItem.custom === 'CommonSettings'\">\n    <a [routerLink]=\"editRouterLink + dataItem.component\">\n      {{ dataItem.component }}\n    </a>\n  </div>\n</ng-template>\n"]}