{"version":3,"file":"manage-content-packages.component.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/manage-content-packages/manage-content-packages.component.ts","../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/manage-content-packages/manage-content-packages.component.html"],"names":[],"mappings":"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","sourcesContent":["import { DatePipe } from '@angular/common';\nimport { Component, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { ActiveModalRef, AdaptRxControlLabelTooltip, BusyConfig, LoaderType } from '@bmc-ux/adapt-angular';\nimport { ColumnConfig, RowData } from '@bmc-ux/adapt-table';\nimport {\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceDataPageService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RxBundleCacheService,\n  RxDefinitionNameService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalClass, RxModalService } from '@helix/platform/ui-kit';\nimport { RxFileService, RxJsonParserService, RxStringService } from '@helix/platform/utils';\nimport { IRecordGridConfig } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, first, reduce, values } from 'lodash';\nimport { Observable, ReplaySubject, Subscription } from 'rxjs';\nimport { map, switchMapTo, take, takeUntil } from 'rxjs/operators';\nimport { AxBundleDeploymentService } from '../../services/bundle-deployment';\nimport { AX_BUNDLE_PACKAGING } from '../../services/bundle-deployment/bundle-packaging.constant';\nimport { IBundleDeployPackageDescriptor, IBundleDeployPackageRegistryEntry } from './manage-content-packages.types';\n\n@Component({\n  selector: 'ax-manage-content-packages',\n  templateUrl: './manage-content-packages.component.html',\n  styleUrls: ['manage-content-packages.component.scss']\n})\nexport class ManageContentPackagesComponent extends RxModalClass implements OnInit, OnDestroy {\n  busySubscription: Subscription;\n\n  busyConfig: BusyConfig = {\n    busy: null,\n    sticky: true,\n    message: this.translateService.instant('com.bmc.arsys.rx.client.common.loading-data'),\n    loaderType: LoaderType.LINE\n  };\n\n  private viewType = [true, false];\n\n  packageCreationDateControl: FormControl = new FormControl([]);\n  packageNameControl: FormControl = new FormControl('');\n  createdByControl: FormControl = new FormControl('');\n  viewTypeControl: FormControl = new FormControl(this.viewType);\n\n  buttonGroupConfig = [\n    {\n      name: 'Definitions',\n      value: this.translateService.instant('com.bmc.arsys.rx.client.common.definitions.label')\n    },\n    {\n      name: 'Data',\n      value: this.translateService.instant('com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.title')\n    }\n  ];\n\n  private selectedPackageContent: IBundleDeployPackageDescriptor;\n\n  gridColumns: ColumnConfig[] = [\n    {\n      field: 'bundleName',\n      header: ''\n    }\n  ];\n\n  gridData: RowData<IBundleDeployPackageRegistryEntry>[] = [];\n\n  expandedRowColumns = {\n    definitions: [\n      {\n        field: 'type',\n        header: this.translateService.instant('com.bmc.arsys.rx.client.common.definition-type.label')\n      },\n      { field: 'name', header: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label') }\n    ],\n    data: [\n      {\n        field: 'dataSource',\n        header: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-source.label'\n        )\n      },\n      {\n        field: 'dataFilter',\n        header: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.data-filter.label'\n        )\n      },\n      {\n        field: 'ignoreRuleExecution',\n        header: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.ignore-rules.label'\n        )\n      },\n      {\n        field: 'duplicateDataActionType',\n        header: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.add-data.duplicates.label'\n        )\n      }\n    ]\n  };\n\n  expandedRowKeys = {};\n\n  packagesList$: Observable<IBundleDeployPackageRegistryEntry[]> = this.rxRecordInstanceDataPageService\n    .post({\n      params: {\n        recorddefinition: AX_BUNDLE_PACKAGING.packageRegistry.recordDefinitionName,\n        propertySelection: [\n          RX_RECORD_DEFINITION.coreFieldIds.createdBy,\n          RX_RECORD_DEFINITION.coreFieldIds.modifiedDate,\n          RX_RECORD_DEFINITION.coreFieldIds.id,\n          ...values(AX_BUNDLE_PACKAGING.packageRegistry.fieldIds)\n        ],\n        queryExpression: [\n          `'${AX_BUNDLE_PACKAGING.packageRegistry.fieldIds.name}'=\"${this.rxBundleCacheService.bundleId}\"`,\n          `'${AX_BUNDLE_PACKAGING.packageRegistry.fieldIds.type}'=${AX_BUNDLE_PACKAGING.packageTypes.content}`,\n          `'${AX_BUNDLE_PACKAGING.packageRegistry.fieldIds.bundlePackageDescriptor}'!=$NULL$`\n        ].join(' AND '),\n        sortBy: -RX_RECORD_DEFINITION.coreFieldIds.modifiedDate\n      }\n    })\n    .pipe(\n      map((recordInstanceDataPage: IDataPageResult) => recordInstanceDataPage.data)\n    );\n\n  packageCreationDateTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.innovation-studio.manage-content-packages.package-creation-date.tooltip'\n    )\n  };\n\n  packagesList: IBundleDeployPackageRegistryEntry[] = [];\n\n  recordGridConfig$: Observable<IRecordGridConfig>;\n\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private axBundleDeploymentService: AxBundleDeploymentService,\n    private datePipe: DatePipe,\n    protected injector: Injector,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxJsonParserService: RxJsonParserService,\n    private rxModalService: RxModalService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxStringService: RxStringService,\n    private translateService: TranslateService\n  ) {\n    super(activeModalRef, injector);\n    this.optionFormatter = this.optionFormatter.bind(this);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.busyConfig.busy = this.packagesList$.pipe(take(1)).subscribe((packagesList) => {\n      if (packagesList.length) {\n        this.packageCreationDateControl.setValue([packagesList[0]]);\n      }\n\n      this.packagesList = packagesList;\n    });\n\n    this.packageCreationDateControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((value) => {\n      const selectedPackage = first(value);\n\n      if (selectedPackage) {\n        this.selectedPackageContent = this.rxJsonParserService.tryParseJson(\n          selectedPackage[AX_BUNDLE_PACKAGING.packageRegistry.fieldIds.bundlePackageDescriptor]\n        );\n\n        this.createdByControl.setValue(selectedPackage[RX_RECORD_DEFINITION.coreFieldIds.createdBy]);\n        this.packageNameControl.setValue(this.selectedPackageContent.customPackageName);\n      } else {\n        this.selectedPackageContent = {};\n      }\n\n      this.updateGridData();\n    });\n\n    this.viewTypeControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((buttonGroup) => {\n      this.viewType = buttonGroup;\n\n      this.updateGridData();\n    });\n  }\n\n  private updateGridData(): void {\n    if (this.viewType[0] && this.selectedPackageContent?.definitionsToDeployByType) {\n      this.gridData = reduce(\n        this.selectedPackageContent.definitionsToDeployByType,\n        (result, definitionsByType: any, definitionType: string) => {\n          const displayType = this.rxStringService.prettify(definitionType);\n\n          definitionsByType.forEach((definitionName) => {\n            const definition = {\n              type: displayType,\n              bundle: this.rxDefinitionNameService.getBundleId(definitionName),\n              name: this.rxDefinitionNameService.getDisplayName(definitionName)\n            };\n\n            let bundleGroup = find(result, { groupValue: definition.bundle });\n\n            if (bundleGroup) {\n              bundleGroup.subTableItems.push(definition);\n            } else {\n              bundleGroup = {\n                bundleName: definition.bundle,\n                groupValue: definition.bundle,\n                groupField: 'bundleName',\n                subTableItems: [definition]\n              };\n\n              this.rxGlobalCacheService\n                .getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(definitionName))\n                .pipe(take(1))\n                .subscribe((bundleFriendlyName) => {\n                  bundleGroup.bundleName = bundleFriendlyName;\n                  this.expandedRowKeys[bundleFriendlyName] = true;\n                });\n\n              result.push(bundleGroup);\n            }\n          });\n\n          return result;\n        },\n        []\n      );\n    } else if (this.viewType[1] && this.selectedPackageContent?.dataImportOptionsByRecordDefinitionName) {\n      this.gridData = reduce(\n        this.selectedPackageContent.dataImportOptionsByRecordDefinitionName,\n        (result, data, definitionName: string) => {\n          const bundle = this.rxDefinitionNameService.getBundleId(definitionName);\n\n          data.dataSource = this.rxDefinitionNameService.getDisplayName(definitionName);\n\n          let bundleGroup = find(result, { groupValue: bundle });\n\n          if (bundleGroup) {\n            bundleGroup.subTableItems.push(data);\n          } else {\n            bundleGroup = {\n              bundleName: bundle,\n              groupValue: bundle,\n              groupField: 'bundleName',\n              subTableItems: [data]\n            };\n\n            this.rxGlobalCacheService\n              .getBundleFriendlyName(this.rxDefinitionNameService.getBundleId(definitionName))\n              .pipe(take(1))\n              .subscribe((bundleFriendlyName) => {\n                bundleGroup.bundleName = bundleFriendlyName;\n                this.expandedRowKeys[bundleFriendlyName] = true;\n              });\n\n            result.push(bundleGroup);\n          }\n\n          return result;\n        },\n        []\n      );\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  optionFormatter(entry: IBundleDeployPackageRegistryEntry): string {\n    return this.datePipe.transform(entry[RX_RECORD_DEFINITION.coreFieldIds.modifiedDate], 'medium');\n  }\n\n  downloadPackage(): void {\n    this.axBundleDeploymentService\n      .download(\n        first(this.packageCreationDateControl.value)[AX_BUNDLE_PACKAGING.packageRegistry.fieldIds.name],\n        first(this.packageCreationDateControl.value)[RX_RECORD_DEFINITION.coreFieldIds.id]\n      )\n      .subscribe((data) => {\n        RxFileService.saveFile(data);\n      });\n  }\n\n  deletePackage(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.manage-content-packages.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          this.busyConfig.busy = this.rxRecordInstanceService\n            .delete(\n              AX_BUNDLE_PACKAGING.packageRegistry.recordDefinitionName,\n              first(this.packageCreationDateControl.value)[RX_RECORD_DEFINITION.coreFieldIds.id]\n            )\n            .pipe(switchMapTo(this.packagesList$), take(1))\n            .subscribe((packagesList) => {\n              this.packagesList = packagesList;\n              this.gridData = [];\n\n              this.packageCreationDateControl.setValue([]);\n              this.packageNameControl.setValue('');\n              this.createdByControl.setValue('');\n            });\n        }\n      });\n  }\n\n  close(): void {\n    this.activeModalRef.close();\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.innovation-studio.manage-content-packages.label' | translate }}\n  </h5>\n\n  <button\n    [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.close.label' | translate\"\n    (click)=\"close()\"\n    class=\"close dp-close\"\n    rx-id=\"x-button\"\n    type=\"button\"\n  ></button>\n</div>\n\n<div class=\"modal-body d-flex flex-column\">\n  <div [ngBusy]=\"busyConfig\" class=\"container-fluid mb-3 pr-0\">\n    <div class=\"row flex-nowrap\">\n      <div class=\"row col-12 pr-0\">\n        <div class=\"col pl-0\">\n          <adapt-rx-select\n            [options]=\"packagesList\"\n            [optionFormatter]=\"optionFormatter\"\n            [popupMaxHeight]=\"560\"\n            [formControl]=\"packageCreationDateControl\"\n            [label]=\"\n              'com.bmc.arsys.rx.innovation-studio.manage-content-packages.package-creation-date.label' | translate\n            \"\n            [tooltip]=\"packageCreationDateTooltip\"\n            appendToBody=\"true\"\n            rx-id=\"package-creation-date-select\"\n          >\n          </adapt-rx-select>\n        </div>\n        <div class=\"col\">\n          <adapt-rx-textfield\n            [disabledStyleForReadonlyState]=\"true\"\n            [label]=\"'com.bmc.arsys.rx.innovation-studio.packaging.package-name.label' | translate\"\n            [readonly]=\"true\"\n            [formControl]=\"packageNameControl\"\n            name=\"packageName\"\n            rx-id=\"package-name-field\"\n          ></adapt-rx-textfield>\n        </div>\n        <div class=\"col\">\n          <adapt-rx-textfield\n            [disabledStyleForReadonlyState]=\"true\"\n            [label]=\"'com.bmc.arsys.rx.innovation-studio.manage-content-packages.created-by.label' | translate\"\n            [readonly]=\"true\"\n            [formControl]=\"createdByControl\"\n            name=\"createdBy\"\n            rx-id=\"created-by-field\"\n          ></adapt-rx-textfield>\n        </div>\n        <div class=\"col pr-0\">\n          <adapt-rx-control-label label=\"{{ 'com.bmc.arsys.rx.client.common.action-view.label' | translate }}\">\n          </adapt-rx-control-label>\n\n          <adapt-button-group\n            [config]=\"buttonGroupConfig\"\n            [multiselectable]=\"false\"\n            [uncheckable]=\"false\"\n            [formControl]=\"viewTypeControl\"\n          ></adapt-button-group>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"adapt-table-toolbar adapt-table-toolbar_bordered font-weight-bold px-5 pt-2\">\n    {{ 'com.bmc.arsys.rx.client.common.application.label' | translate }}/{{\n      'com.bmc.arsys.rx.client.common.library.label' | translate\n    }}\n  </div>\n\n  <adapt-table\n    [bordered]=\"true\"\n    [columns]=\"gridColumns\"\n    [sortable]=\"true\"\n    [value]=\"gridData\"\n    [dataKey]=\"'bundleName'\"\n    [expandedRowTemplate]=\"expandedRowTemplate\"\n    [expandedRowKeys]=\"expandedRowKeys\"\n    [scrollable]=\"true\"\n    scrollHeight=\"flex\"\n  ></adapt-table>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    rx-id=\"download-button\"\n    [disabled]=\"!packageCreationDateControl.value?.length\"\n    (click)=\"downloadPackage()\"\n  >\n    {{ 'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.download.title' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"delete-button\"\n    [disabled]=\"!packageCreationDateControl.value?.length\"\n    (click)=\"deletePackage()\"\n  >\n    {{ 'com.bmc.arsys.rx.innovation-studio.manage-content-packages.delete-package.label' | translate }}\n  </button>\n\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" (click)=\"close()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n\n<ng-template #expandedRowTemplate let-dataItem=\"dataItem\" let-rowIndex=\"rowIndex\">\n  <div>\n    <adapt-table\n      [columns]=\"viewTypeControl.value[0] ? expandedRowColumns.definitions : expandedRowColumns.data\"\n      [value]=\"dataItem.subTableItems\"\n      [sortable]=\"true\"\n      [sortMode]=\"'multiple'\"\n    ></adapt-table>\n  </div>\n</ng-template>\n"]}