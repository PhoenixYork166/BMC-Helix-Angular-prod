{"version":3,"file":"bundle-details.class.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/bundle-details/bundle-details.class.ts"],"names":[],"mappings":"AACA,OAAO,EAEL,cAAc,EACd,SAAS,EACT,UAAU,EACV,eAAe,EACf,oBAAoB,EACpB,gBAAgB,EACjB,MAAM,4BAA4B,CAAC;AAEpC,MAAM,OAAO,aAAa;IAmBxB,YAAoB,gBAAmC,EAAU,QAAkB;QAA/D,qBAAgB,GAAhB,gBAAgB,CAAmB;QAAU,aAAQ,GAAR,QAAQ,CAAU;QACjF,MAAM,gBAAgB,GAAqB,QAAQ,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC1E,MAAM,oBAAoB,GAAyB,QAAQ,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;QACtF,MAAM,eAAe,GAAoB,QAAQ,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAEvE,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,YAAY,CAAC;QAClD,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC,WAAW,CAAC;QAChD,IAAI,CAAC,OAAO,GAAG,gBAAgB,CAAC,cAAc,IAAI,gBAAgB,CAAC,OAAO,CAAC;QAC3E,IAAI,CAAC,WAAW,GAAG,gBAAgB,CAAC,WAAW,CAAC;QAChD,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,aAAa,CAAC;QACpD,IAAI,CAAC,EAAE,GAAG,gBAAgB,CAAC,EAAE,CAAC;QAC9B,IAAI,CAAC,mBAAmB,GAAG,gBAAgB,CAAC,mBAAmB,CAAC;QAChE,IAAI,CAAC,kBAAkB,GAAG,gBAAgB,CAAC,kBAAkB,CAAC;QAE9D,MAAM,cAAc,GAAG,gBAAgB,CAAC,wBAAwB,EAAE,CAAC;QAEnE,IAAI,CAAC,+BAA+B;YAClC,cAAc;gBACd,gBAAgB,CAAC,cAAc,KAAK,cAAc,CAAC,cAAc;gBACjE,gBAAgB,CAAC,wBAAwB;oBACvC,UAAU,CAAC,iCAAiC,CAAC,yBAAyB,CAAC;QAE3E,IAAI,CAAC,IAAI,GAAG,gBAAgB,CAAC,aAAa,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC;QAC/G,IAAI,CAAC,kBAAkB,GAAG,gBAAgB,CAAC,EAAE,KAAK,cAAc,CAAC,iBAAiB,CAAC,UAAU,CAAC;QAE9F,IAAI,CAAC,mBAAmB;YACtB,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,+BAA+B,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC;QAEtG,IAAI,CAAC,iBAAiB,GAAG,oBAAoB,CAAC,iBAAiB,EAAE,CAAC;QAClE,IAAI,CAAC,aAAa,GAAG,gBAAgB,CAAC,aAAa,CAAC;IACtD,CAAC;CACF","sourcesContent":["import { Injector } from '@angular/core';\nimport {\n  IBundleDescriptor,\n  RX_APPLICATION,\n  RX_BUNDLE,\n  RX_OVERLAY,\n  RxBundleService,\n  RxCurrentUserService,\n  RxOverlayService\n} from '@helix/platform/shared/api';\n\nexport class BundleDetails {\n  id: string;\n  hasCustomEntryPoint: boolean;\n  friendlyName: string;\n  description: string;\n  type: string;\n  version: string;\n  developerId: string;\n  developerName: string;\n  isApplication: boolean;\n  isActionMenuVisible: boolean;\n  isBusinessAnalyst: boolean;\n  isBundleFromCurrentOverlayGroup: boolean;\n  isFoundationBundle: boolean;\n  name: string;\n  groupId: string;\n  containsJavaScript: boolean;\n  dependentBundles: IBundleDescriptor[];\n\n  constructor(private bundleDescriptor: IBundleDescriptor, private injector: Injector) {\n    const rxOverlayService: RxOverlayService = injector.get(RxOverlayService);\n    const rxCurrentUserService: RxCurrentUserService = injector.get(RxCurrentUserService);\n    const rxBundleService: RxBundleService = injector.get(RxBundleService);\n\n    this.friendlyName = bundleDescriptor.friendlyName;\n    this.description = bundleDescriptor.description;\n    this.version = bundleDescriptor.displayVersion || bundleDescriptor.version;\n    this.developerId = bundleDescriptor.developerId;\n    this.developerName = bundleDescriptor.developerName;\n    this.id = bundleDescriptor.id;\n    this.hasCustomEntryPoint = bundleDescriptor.hasCustomEntryPoint;\n    this.containsJavaScript = bundleDescriptor.containsJavaScript;\n\n    const overlayContext = rxOverlayService.getCurrentOverlayContext();\n\n    this.isBundleFromCurrentOverlayGroup =\n      overlayContext &&\n      bundleDescriptor.overlayGroupId === overlayContext.overlayGroupId &&\n      bundleDescriptor.customizationPerspective ===\n        RX_OVERLAY.bundleCustomizationOperationTypes.createdInThisOverlayGroup;\n\n    this.type = bundleDescriptor.isApplication ? RX_BUNDLE.bundleTypes.application : RX_BUNDLE.bundleTypes.library;\n    this.isFoundationBundle = bundleDescriptor.id === RX_APPLICATION.platformBundleIds.foundation;\n\n    this.isActionMenuVisible =\n      this.isFoundationBundle || this.isBundleFromCurrentOverlayGroup || !bundleDescriptor.platformBundle;\n\n    this.isBusinessAnalyst = rxCurrentUserService.isBusinessAnalyst();\n    this.isApplication = bundleDescriptor.isApplication;\n  }\n}\n"]}