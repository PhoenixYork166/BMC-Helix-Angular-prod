{"version":3,"file":"select-definitions-to-delete-wizard-step.component.js","sourceRoot":"","sources":["../../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/bundle-action-wizard/select-definitions-to-delete-wizard-step/select-definitions-to-delete-wizard-step.component.ts","../../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/bundle-action-wizard/select-definitions-to-delete-wizard-step/select-definitions-to-delete-wizard-step.components.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, Input, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IPlainObject, RxDefinitionNameService, RxSessionExpirationService } from '@helix/platform/shared/api';\nimport { RxWizardModalComponent } from '@helix/platform/shared/components';\nimport { RxStringService } from '@helix/platform/utils';\nimport {\n  ColumnSortDirection,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { cloneDeep, reduce } from 'lodash';\nimport { combineLatest, Observable, of, ReplaySubject } from 'rxjs';\nimport { map, switchMap, take, takeUntil } from 'rxjs/operators';\nimport { AX_BUNDLE_DETAILS } from '../../bundle-details/bundle-details.constant';\nimport { DefinitionHistoryDataPageService } from './definition-history-data-page.service';\n\n@Component({\n  selector: 'ax-select-definitions-to-delete-wizard-step',\n  templateUrl: 'select-definitions-to-delete-wizard-step.components.html',\n  styleUrls: ['./select-definitions-to-delete-wizard-step.component.scss']\n})\nexport class SelectDefinitionsToDeleteWizardStepComponent implements OnInit, OnDestroy {\n  @Input()\n  options: IPlainObject;\n\n  @ViewChild('recordNameCellTemplate', { static: true })\n  private recordNameCellTemplate: TemplateRef<any>;\n\n  @ViewChild(RecordGridComponent, { static: true })\n  private recordGrid: RecordGridComponent;\n\n  selectedDefinitionCount = 0;\n  recordGridConfig$: Observable<IRecordGridConfig>;\n\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n\n  constructor(\n    private definitionHistoryDataPageService: DefinitionHistoryDataPageService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxSessionExpirationService: RxSessionExpirationService,\n    private rxStringService: RxStringService,\n    private rxWizardModalComponent: RxWizardModalComponent,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.item-type.label'),\n        fieldId: 'displayType',\n        sortable: {\n          priority: 0,\n          direction: ColumnSortDirection.Asc\n        },\n        filterable: false\n      },\n      {\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        fieldId: 'objectName',\n        wrapText: true,\n        cellTemplate: this.recordNameCellTemplate\n      },\n      {\n        fieldId: 'createdBy',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-by.label'\n        )\n      },\n      {\n        fieldId: 'createDate',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-date.label'\n        ),\n        sortable: {\n          priority: 2,\n          direction: ColumnSortDirection.Asc\n        }\n      },\n      {\n        fieldId: 'bundleName',\n        title: this.translateService.instant('com.bmc.arsys.rx.client.bundle-name.label'),\n        sortable: {\n          priority: 1,\n          direction: ColumnSortDirection.Asc\n        },\n        filterable: false,\n        visible: false\n      }\n    ].map((column) => ({ ...column, title: this.translateService.instant(column.title) }));\n\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: 'objectName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'createdBy',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'createDate',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.dateTime\n        },\n        {\n          id: 'displayType',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'bundleName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    combineLatest([this.recordGrid.rowSelectionChanged, this.rxWizardModalComponent.context$.pipe(take(1))])\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe(([selectedRows, context]) => {\n        const newDeploymentPackageDescriptor = cloneDeep(context.deploymentPackageDescriptor);\n\n        this.selectedDefinitionCount = selectedRows.length;\n\n        newDeploymentPackageDescriptor.definitionsToDeleteByType = selectedRows.reduce(\n          (definitionsToDeleteByType, row) => {\n            const definitionType = AX_BUNDLE_DETAILS.definitionTypes[row.type];\n\n            definitionsToDeleteByType[definitionType] = definitionsToDeleteByType[definitionType] ?? [];\n\n            definitionsToDeleteByType[definitionType].push(row.objectName);\n\n            return definitionsToDeleteByType;\n          },\n          {}\n        );\n\n        this.rxWizardModalComponent.api.updateContext(\n          {\n            deploymentPackageDescriptor: newDeploymentPackageDescriptor,\n            isPackageDataModified: true\n          },\n          this.selectedDefinitionCount > 0\n        );\n      });\n\n    this.recordGridConfig$ = of({\n      columns: gridColumns,\n      enableColumnSelection: false,\n      enableFiltering: true,\n      enableRowSelection: RowSelectionMode.Multiple,\n      recordIdField: 'definitionTypeWithName',\n      styles: 'flex-fill',\n      useExternalFiltering: false,\n      expandGroups: true,\n      getRecordDefinition: () => of(recordDefinition),\n      getData: (queryParams) => {\n        this.rxWizardModalComponent.api.disableNextButton();\n\n        return this.rxSessionExpirationService.keepSessionAlive().pipe(\n          switchMap(() => {\n            const defaultParams: IPlainObject = {\n              operationType: 'DELETE'\n            };\n\n            if (this.options?.isContentPackageOperation) {\n              defaultParams.requireDependent = true;\n              defaultParams.recursive = true;\n              defaultParams.requireLatestVersion = true;\n            }\n\n            return combineLatest([\n              this.definitionHistoryDataPageService.get({ params: { objectType: 'ASSOCIATION', ...defaultParams } }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'DOCUMENT_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'EVENT_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'EVENT_STATISTICS_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({ params: { objectType: 'NAMED_LIST', ...defaultParams } }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'PROCESS_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'RECORD_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'RULE_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'VIEW_DEFINITION', ...defaultParams }\n              }),\n              this.definitionHistoryDataPageService.get({\n                params: { objectType: 'WEBAPI_DEFINITION', ...defaultParams }\n              })\n            ]).pipe(\n              map(\n                ([\n                  associationDefinitions,\n                  documentDefinitions,\n                  eventDefinitions,\n                  eventStatisticsDefinitions,\n                  namedListDefinitions,\n                  processDefinitions,\n                  recordDefinitions,\n                  ruleDefinitions,\n                  viewDefinitions,\n                  webApiDefinitions\n                ]) => {\n                  const definitions = reduce(\n                    {\n                      association: associationDefinitions,\n                      document: documentDefinitions,\n                      event: eventDefinitions,\n                      eventStatistic: eventStatisticsDefinitions,\n                      namedList: namedListDefinitions,\n                      process: processDefinitions,\n                      record: recordDefinitions,\n                      rule: ruleDefinitions,\n                      view: viewDefinitions,\n                      webApi: webApiDefinitions\n                    },\n                    (allDefinitions, dataPage, definitionType) => {\n                      const definitionsByType = dataPage.data;\n\n                      const displayType = this.rxStringService.prettify(definitionType);\n\n                      definitionsByType.forEach((definition) => {\n                        definition.type = definitionType;\n                        definition.displayType = displayType;\n                        definition.displayName = this.rxDefinitionNameService.getDisplayName(definition.objectName);\n                        definition.definitionTypeWithName = `${definitionType}:${definition.objectName}`;\n                      });\n\n                      return allDefinitions.concat(\n                        definitionsByType.length\n                          ? [\n                              {\n                                groupValue: displayType,\n                                groupField: 'type',\n                                items: definitionsByType\n                              }\n                            ]\n                          : []\n                      );\n                    },\n                    []\n                  );\n\n                  return {\n                    data: definitions,\n                    totalSize: definitions.length\n                  };\n                }\n              )\n            );\n          })\n        );\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  onDataLoaded(): void {\n    this.rxWizardModalComponent.api.enableNextButton();\n  }\n}\n","<div class=\"d-flex justify-content-between\">\n  <h5 class=\"mt-0\">\n    {{'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-definitions.label' |\n    translate}}\n\n    <adapt-icon\n      name=\"question_circle_o\"\n      class=\"ml-2\"\n      placement=\"bottom\"\n      maxWidth=\"400\"\n      [adaptPopover]=\"'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.tooltip' | translate\"\n    ></adapt-icon>\n  </h5>\n  <div>\n    {{'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.deleted-definitions-count.label'\n    | translate : { count: selectedDefinitionCount } }}\n  </div>\n</div>\n\n<div class=\"mb-3\">\n  {{'com.bmc.arsys.rx.innovation-studio.bundle-action-wizard.select-definitions-to-delete.selected-deleted-definitions.label'\n  | translate}}\n</div>\n\n<rx-record-grid [config]=\"recordGridConfig$\" (dataLoaded)=\"onDataLoaded()\"></rx-record-grid>\n\n<ng-template #recordNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ dataItem[column.field] | rxDefinitionNamePipe }}\n</ng-template>\n"]}