{"version":3,"file":"join-record-wizard.service.js","sourceRoot":"","sources":["../../../../../../../libs/com-bmc-arsys-rx-innovationstudio/src/lib/components/join-record-wizard/join-record-wizard.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,wBAAwB,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AACrE,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAClE,OAAO,EAAE,eAAe,EAAE,MAAM,mCAAmC,CAAC;AACpE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,2BAA2B,EAAE,MAAM,uDAAuD,CAAC;AACpG,OAAO,EAAE,yBAAyB,EAAE,MAAM,mDAAmD,CAAC;AAE9F,OAAO,EAAE,8BAA8B,EAAE,MAAM,6DAA6D,CAAC;;;;AAG7G,MAAM,OAAO,uBAAuB;IAIlC,YACU,eAAgC,EAChC,gBAAkC,EAClC,wBAAkD;QAFlD,oBAAe,GAAf,eAAe,CAAiB;QAChC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,6BAAwB,GAAxB,wBAAwB,CAA0B;QANpD,UAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,6DAA6D,CAAC,CAAC;QACrG,sBAAiB,GAAG,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,2CAA2C,CAAC,CAAC;IAMpG,CAAC;IAEJ,IAAI;QACF,MAAM,YAAY,GAAG;YACnB,KAAK,EAAE,IAAI,CAAC,KAAK;YACjB,WAAW,EAAE,IAAI;YACjB,iBAAiB,EAAE,IAAI,CAAC,iBAAiB;YACzC,KAAK,EAAE;gBACL;oBACE,EAAE,EAAE,oBAAoB;oBACxB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CACjC,gFAAgF,CACjF;oBACD,gBAAgB,EAAE,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,8BAA8B,CAAC;iBACxG;gBACD;oBACE,EAAE,EAAE,eAAe;oBACnB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CACjC,2EAA2E,CAC5E;oBACD,gBAAgB,EAAE,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,yBAAyB,CAAC;iBACnG;gBACD;oBACE,EAAE,EAAE,iBAAiB;oBACrB,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CACjC,6EAA6E,CAC9E;oBACD,gBAAgB,EAAE,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,2BAA2B,CAAC;iBACrG;aACF;SACF,CAAC;QAEF,OAAO,IAAI,CAAC,eAAe;aACxB,IAAI,CAA2B;YAC9B,OAAO,EAAE,EAAE;YACX,OAAO,EAAE,YAAY;SACtB,CAAC;aACD,IAAI,CAAC,CAAC,OAAiC,EAAE,EAAE;YAC1C,IAAI,OAAO,EAAE;gBACX,OAAO;oBACL,2BAA2B,EAAE,OAAO,CAAC,2BAA2B;oBAChE,6BAA6B,EAAE,OAAO,CAAC,6BAA6B;oBACpE,YAAY,EAAE,OAAO,CAAC,YAAY;oBAClC,QAAQ,EAAE,OAAO,CAAC,QAAQ;oBAC1B,YAAY,EAAE,oBAAoB,CAAC,qBAAqB,CAAC,IAAI,CAAC,oBAAoB;oBAClF,gBAAgB,EAAE,OAAO,CAAC,cAAc;iBACzC,CAAC;aACH;iBAAM;gBACL,OAAO,IAAI,CAAC;aACb;QACH,CAAC,CAAC,CAAC;IACP,CAAC;;uIA3DU,uBAAuB;2IAAvB,uBAAuB;2FAAvB,uBAAuB;kBADnC,UAAU","sourcesContent":["import { ComponentFactoryResolver, Injectable } from '@angular/core';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxWizardService } from '@helix/platform/shared/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { FieldSelectionStepComponent } from './field-selection-step/field-selection-step.component';\nimport { JoinCriteriaStepComponent } from './join-criteria-step/join-criteria-step.component';\nimport { IJoinRecordDesignerOptions, IJoinRecordWizardContext } from './join-record-wizard.types';\nimport { RecordDefinitionsStepComponent } from './record-definitions-step/record-definitions-step.component';\n\n@Injectable()\nexport class JoinRecordWizardService {\n  private title = this.translateService.instant('com.bmc.arsys.rx.innovation-studio.join-record-wizard.title');\n  private finishButtonLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.save.label');\n\n  constructor(\n    private rxWizardService: RxWizardService,\n    private translateService: TranslateService,\n    private componentFactoryResolver: ComponentFactoryResolver\n  ) {}\n\n  open(): Promise<IJoinRecordDesignerOptions | null> {\n    const wizardConfig = {\n      title: this.title,\n      allowFinish: true,\n      finishButtonLabel: this.finishButtonLabel,\n      steps: [\n        {\n          id: 'record-definitions',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.innovation-studio.join-record-wizard.record-definitions.title'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(RecordDefinitionsStepComponent)\n        },\n        {\n          id: 'join-criteria',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.innovation-studio.join-record-wizard.join-criteria.title'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(JoinCriteriaStepComponent)\n        },\n        {\n          id: 'field-selection',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.innovation-studio.join-record-wizard.field-selection.title'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(FieldSelectionStepComponent)\n        }\n      ]\n    };\n\n    return this.rxWizardService\n      .open<IJoinRecordWizardContext>({\n        context: {},\n        options: wizardConfig\n      })\n      .then((context: IJoinRecordWizardContext) => {\n        if (context) {\n          return {\n            primaryRecordDefinitionName: context.primaryRecordDefinitionName,\n            secondaryRecordDefinitionName: context.secondaryRecordDefinitionName,\n            joinCriteria: context.joinCriteria,\n            joinType: context.joinType,\n            resourceType: RX_RECORD_DEFINITION.recordDefinitionTypes.join.recordDefinitionType,\n            fieldDefinitions: context.selectedFields\n          };\n        } else {\n          return null;\n        }\n      });\n  }\n}\n"]}