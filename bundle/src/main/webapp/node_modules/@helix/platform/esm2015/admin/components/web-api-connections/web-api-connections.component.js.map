{"version":3,"file":"web-api-connections.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/web-api-connections/web-api-connections.component.ts","../../../../../../../libs/platform/admin/components/web-api-connections/web-api-connections.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, ComponentFactoryResolver, TemplateRef, ViewChild } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table/public-api';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxWizardService } from '@helix/platform/shared/components';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { cloneDeep, find, isObject } from 'lodash';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { AuthenticationWizardStepComponent } from './authentication-wizard-step/authentication-wizard-step.component';\nimport { GeneralWizardStepComponent } from './general-wizard-step/general-wizard-step.component';\nimport { RX_WEB_API_CONNECTIONS } from './web-api-connections.constant';\nimport { IWebApiConnectionWizardContext } from './web-api-connections.interfaces';\nimport { RxWebAPIConnectionsService } from './web-api-connections.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-web-api-connections',\n  templateUrl: './web-api-connections.component.html'\n})\nexport class WebApiConnectionsAdminComponent {\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  private currentRecordInstanceId: string;\n  private isNewConfiguration: boolean;\n  private webApiConnectionWizardContext: IWebApiConnectionWizardContext;\n\n  @ViewChild('webApiConnectionsRecordGrid', { static: false })\n  webApiConnectionsRecordGrid: RecordGridComponent;\n\n  @ViewChild('portCellTemplate', { static: true })\n  portCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  recordDefinition: IRecordDefinition = {\n    fieldDefinitions: [\n      {\n        id: RX_RECORD_DEFINITION.coreFieldIds.description,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.hostname,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.port,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.integer\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.authentication,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_RECORD_DEFINITION.coreFieldIds.id,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      }\n    ]\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxWebAPIConnectionsService: RxWebAPIConnectionsService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxWizardService: RxWizardService,\n    private translateService: TranslateService\n  ) {\n    this.gridConfig$ = new Observable((observer) => {\n      observer.next({\n        recordDefinitionName: RX_WEB_API_CONNECTIONS.recordDefinitionName,\n        columns: this.getWebApiConnectionColumns(),\n        actionButtons: this.getActionButtons(),\n        getRecordDefinition: () => of(this.recordDefinition),\n        styles: 'flex-fill'\n      });\n\n      observer.complete();\n    });\n  }\n\n  save(): void {\n    const saveConnection$ = this.isNewConfiguration\n      ? this.rxWebAPIConnectionsService.create(this.webApiConnectionWizardContext.webApiConnection)\n      : this.rxWebAPIConnectionsService.save(\n          this.webApiConnectionWizardContext.webApiConnection,\n          this.currentRecordInstanceId\n        );\n\n    saveConnection$\n      .pipe(\n        catchError((error) => {\n          this.rxNotificationService.addErrorMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.failed-to-save.message')\n          );\n\n          return throwError(error);\n        })\n      )\n      .subscribe((response) => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.connection-saved.message')\n        );\n        this.webApiConnectionsRecordGrid.api.refresh().subscribe();\n      });\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        actions: [\n          {\n            name: () => {\n              {\n                this.rxModalService\n                  .confirm({\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                    modalStyle: RX_MODAL.modalStyles.warning,\n                    message: this.translateService.instant(\n                      'com.bmc.arsys.rx.client.admin.web-api-connections.delete-confirmation.message'\n                    )\n                  })\n                  .then((result: boolean) => {\n                    if (result)\n                      this.rxWebAPIConnectionsService\n                        .deleteRecords(this.webApiConnectionsRecordGrid.api)\n                        .subscribe((response) => {\n                          this.rxNotificationService.addSuccessMessage(\n                            this.translateService.instant(\n                              'com.bmc.arsys.rx.client.admin.web-api-connections.deleted.message'\n                            )\n                          );\n                          this.webApiConnectionsRecordGrid.api.refresh().subscribe();\n                        });\n                  });\n              }\n            }\n          }\n        ]\n      }\n    ];\n  }\n\n  private getWebApiConnectionColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.description}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.editWebApiConnection(lastActionRow)\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.hostname}`,\n        index: 1,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label'\n        )\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.port}`,\n        index: 2,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label'\n        ),\n        cellTemplate: this.portCellTemplate\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.authentication}`,\n        index: 3,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label'\n        ),\n        visible: false\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.id}`,\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false\n      }\n    ];\n  }\n\n  private resetFields(): void {\n    this.webApiConnectionWizardContext = cloneDeep(RX_WEB_API_CONNECTIONS.wizardContext);\n    this.webApiConnectionWizardContext.webApiConnection.authTypeCode = [RX_WEB_API_CONNECTIONS.authTypeOptions[0]];\n    this.webApiConnectionWizardContext.webApiConnection.secure = [RX_WEB_API_CONNECTIONS.protocolTypeOptions[0]];\n    this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.grantType = [\n      RX_WEB_API_CONNECTIONS.grantTypeOptions[0]\n    ];\n  }\n\n  private openWizard(wizardTitle: string, isEdit: boolean): void {\n    const wizardOptions = {\n      title: wizardTitle,\n      allowFinish: true,\n      finishButtonLabel: this.translateService.instant('com.bmc.arsys.rx.client.common.save.label'),\n      steps: [\n        {\n          id: 'general',\n          name: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(GeneralWizardStepComponent)\n        },\n        {\n          id: 'authentication',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(AuthenticationWizardStepComponent)\n        }\n      ]\n    };\n\n    this.rxWizardService\n      .open<IWebApiConnectionWizardContext>({\n        context: this.webApiConnectionWizardContext,\n        options: wizardOptions\n      })\n      .then((result) => {\n        if (isObject(result)) {\n          this.save();\n        }\n      });\n  }\n\n  createWebApiConnection(): void {\n    this.resetFields();\n    this.isNewConfiguration = true;\n    this.openWizard(\n      this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.new-web-api-connection.label'),\n      false\n    );\n  }\n\n  private editWebApiConnection(selectedRecord: IRowDataItem): void {\n    this.resetFields();\n    this.isNewConfiguration = false;\n    this.currentRecordInstanceId = selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id];\n\n    const currentRecordInstance = this.rxRecordInstanceService.get(\n      RX_WEB_API_CONNECTIONS.recordDefinitionName,\n      selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]\n    );\n\n    currentRecordInstance.subscribe((recordInstance) => {\n      const authTypeId = recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.authType].value;\n      const authTypeOption: RxSelectOption = find(RX_WEB_API_CONNECTIONS.authTypeOptions, { id: authTypeId });\n\n      const credentials = JSON.parse(\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.authentication].value\n      );\n\n      const protocolId = recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.protocol].value;\n      const protocolOption: RxSelectOption = find(RX_WEB_API_CONNECTIONS.protocolTypeOptions, { id: protocolId });\n\n      this.webApiConnectionWizardContext.webApiConnection.name =\n        recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.description].value;\n      this.webApiConnectionWizardContext.webApiConnection.hostname =\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.hostname].value;\n      this.webApiConnectionWizardContext.webApiConnection.port =\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.port].value;\n      this.webApiConnectionWizardContext.webApiConnection.secure = [protocolOption];\n      this.webApiConnectionWizardContext.webApiConnection.authTypeCode = [authTypeOption];\n      this.webApiConnectionWizardContext.wizardSteps[1].fields = find(RX_WEB_API_CONNECTIONS.authTypeFields, {\n        id: authTypeId\n      }).fields;\n\n      this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.httpHeaders = credentials['httpHeaders'];\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuth2) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint =\n          credentials['authServerEndpoint'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.redirectUri = credentials['redirectUri'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.scope = credentials['scope'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath = credentials['tokenPath'];\n\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenFetchMechanism =\n          credentials['tokenFetchMechanism'];\n\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.additionalFormParams =\n          credentials['additionalFormParams'];\n      }\n\n      if (\n        authTypeId === RX_WEB_API_CONNECTIONS.authTypes.rsso ||\n        authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuthTokenExchange\n      ) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.loginName = credentials['loginName'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath = credentials['tokenPath'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint =\n          credentials['authServerEndpoint'];\n      }\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuthTokenExchange) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.resources = credentials['resources'];\n      }\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.custom) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.queryParams = credentials['queryParams'];\n      } else {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.credentials =\n          RX_WEB_API_CONNECTIONS.passwordMask;\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.username = credentials['username'];\n      }\n\n      this.webApiConnectionWizardContext.isEditMode = true;\n      this.openWizard(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.web-api-connections.edit-web-api-connection.label'\n        ),\n        true\n      );\n    });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.web-api-connections.header.title' | translate }}\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"createWebApiConnection()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n  <rx-record-grid rx-id=\"web-api-grid\" #webApiConnectionsRecordGrid [config]=\"gridConfig$\"> </rx-record-grid>\n\n  <ng-template #portCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n    {{ dataItem[column.field] }}\n  </ng-template>\n</rx-admin-settings>\n"]}