{"version":3,"file":"input-list-form-control.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/shared/components/form-controls/input-list-form-control/input-list-form-control.component.ts","../../../../../../../../libs/platform/shared/components/form-controls/input-list-form-control/input-list-form-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAqB,MAAM,eAAe,CAAC;AACpE,OAAO,EAAa,WAAW,EAAE,WAAW,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACxF,OAAO,EAAE,aAAa,EAAE,MAAM,MAAM,CAAC;AACrC,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAC3C,OAAO,EAAE,aAAa,EAAE,MAAM,oBAAoB,CAAC;;;;;;AAcnD,MAAM,OAAO,6BAA8B,SAAQ,aAAuB;IAQxE,YAAoB,WAAwB;QAC1C,KAAK,EAAE,CAAC;QADU,gBAAW,GAAX,WAAW,CAAa;QAJ5C,cAAS,GAAc,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAE1C,eAAU,GAAG,IAAI,aAAa,CAAO,CAAC,CAAC,CAAC;IAIhD,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,EAAE;YAC1E,IAAI,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,EAAE;gBAClC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;aAC3C;iBAAM;gBACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aACnB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,OAAO;QACL,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC,CAAC;IAC3C,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACvB,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;;0HAjCU,6BAA6B;8GAA7B,6BAA6B,qFAR7B;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,6BAA6B;YAC1C,KAAK,EAAE,IAAI;SACZ;KACF,iDChBH,+5BAuBA;2FDLa,6BAA6B;kBAXzC,SAAS;mBAAC;oBACT,QAAQ,EAAE,4BAA4B;oBACtC,WAAW,EAAE,0CAA0C;oBACvD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,+BAA+B;4BAC1C,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;kGAGC,OAAO;sBADN,KAAK","sourcesContent":["import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ReplaySubject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { ValueAccessor } from '../../form-builder';\nimport { IInputListFormControlOptions } from './input-list-form-control-options.interface';\n\n@Component({\n  selector: 'rx-input-list-form-control',\n  templateUrl: './input-list-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: InputListFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class InputListFormControlComponent extends ValueAccessor<string[]> implements OnInit, OnDestroy {\n  @Input()\n  options: IInputListFormControlOptions;\n\n  formArray: FormArray = this.formBuilder.array([]);\n\n  private destroyed$ = new ReplaySubject<void>(1);\n\n  constructor(private formBuilder: FormBuilder) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.formArray.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe(() => {\n      if (this.formArray.controls.length) {\n        this.value = this.formArray.getRawValue();\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  addItem(): void {\n    this.formArray.push(new FormControl(''));\n  }\n\n  removeItem(index: number) {\n    this.formArray.removeAt(index);\n  }\n\n  ngOnDestroy() {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"form-group\">\n  <div class=\"d-flex flex-row justify-content-between align-items-center\">\n    <adapt-rx-control-label [label]=\"options.label\" [showRequiredLabel]=\"options.required\"></adapt-rx-control-label>\n\n    <button adapt-button type=\"button\" btn-type=\"tertiary\" size=\"small\" (click)=\"addItem()\">\n      <span class=\"d-icon-plus_circle mr-1\" aria-hidden=\"true\"></span>\n      Add item\n    </button>\n  </div>\n\n  <div\n    class=\"d-flex flex-row align-items-center w-100 form-group\"\n    *ngFor=\"let control of formArray.controls; let i = index\"\n  >\n    <adapt-rx-textfield class=\"flex-fill\" [formControl]=\"control\"></adapt-rx-textfield>\n    <button\n      (click)=\"removeItem(i)\"\n      class=\"close position-relative ml-2\"\n      type=\"button\"\n      [attr.aria-label]=\"'com.bmc.arsys.rx.client.common.remove.label' | translate\"\n    ></button>\n  </div>\n</div>\n"]}