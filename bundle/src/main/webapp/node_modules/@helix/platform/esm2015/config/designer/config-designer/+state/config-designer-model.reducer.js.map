{"version":3,"file":"config-designer-model.reducer.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/config/designer/config-designer/+state/config-designer-model.reducer.ts"],"names":[],"mappings":"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","sourcesContent":["import { createReducer, on } from '@ngrx/store';\nimport { IConfigDesignerModel } from './config-designer.types';\nimport * as ConfigDesignerActions from './config-designer.actions';\nimport { IConfigDefinitionModel } from '../../config-designer.types';\nimport { ImpactRowVisibility } from '@helix/platform/config/api';\nimport { cloneDeep, findIndex, isNull, remove } from 'lodash';\n\nconst initialModel: IConfigDefinitionModel = {\n  componentLabel: null,\n  componentName: null,\n  externalLink: null,\n  firstMenu: null,\n  impactRowVisibility: ImpactRowVisibility.None,\n  isSettingAccessibleInApplication: false,\n  isSettingAccessibleInInnovationStudio: false,\n  parentComponentName: null,\n  permissions: [],\n  registeredModuleName: null,\n  secondMenu: null,\n  supportsMultiple: false,\n  viewComponent: false,\n  viewToOpen: null,\n  fields: []\n};\n\nexport const initialState: IConfigDesignerModel = {\n  bundleId: null,\n  definitionName: null,\n  isDesignMode: true,\n  inspectorTabIndex: 0,\n  selectedFieldGuid: null,\n  definitionModel: initialModel,\n  definitionModelFromDefinition: initialModel,\n  parentComponents: [],\n  isDirty: false,\n  savedDefinitionName: null\n};\n\nconst reducer = createReducer(\n  initialState,\n\n  on(ConfigDesignerActions.init, (state: IConfigDesignerModel, { payload }) => ({\n    ...initialState,\n    bundleId: payload.bundleId,\n    definitionName: payload.definitionName\n  })),\n\n  on(ConfigDesignerActions.initDefinitionModel, (state: IConfigDesignerModel, { definitionModelFromDefinition }) => ({\n    ...state,\n    definitionModelFromDefinition,\n    definitionModel: definitionModelFromDefinition\n  })),\n\n  on(ConfigDesignerActions.markDesignerPristine, (state: IConfigDesignerModel) => ({\n    ...state,\n    isDirty: false\n  })),\n\n  on(ConfigDesignerActions.markDesignerDirty, (state: IConfigDesignerModel) => ({\n    ...state,\n    isDirty: true\n  })),\n\n  on(ConfigDesignerActions.loadParentComponentsSuccess, (state: IConfigDesignerModel, { parentComponents }) => ({\n    ...state,\n    parentComponents\n  })),\n\n  on(ConfigDesignerActions.setInspectorTabIndex, (state: IConfigDesignerModel, { inspectorTabIndex }) => ({\n    ...state,\n    inspectorTabIndex\n  })),\n\n  on(ConfigDesignerActions.setSelectedFieldGuid, (state: IConfigDesignerModel, { guid }) => ({\n    ...state,\n    selectedFieldGuid: guid,\n    inspectorTabIndex: guid && !isNull(state.inspectorTabIndex) ? 1 : state.inspectorTabIndex\n  })),\n\n  on(ConfigDesignerActions.clearSelectedFieldGuid, (state: IConfigDesignerModel) => ({\n    ...state,\n    selectedFieldGuid: null,\n    inspectorTabIndex: !isNull(state.inspectorTabIndex) ? 0 : state.inspectorTabIndex\n  })),\n\n  on(ConfigDesignerActions.toggleDesignMode, (state: IConfigDesignerModel) => ({\n    ...state,\n    isDesignMode: !state.isDesignMode\n  })),\n\n  on(\n    ConfigDesignerActions.updateDefinitionModelFromDesigner,\n    (state: IConfigDesignerModel, { definitionModelFromDesigner }) => ({\n      ...state,\n      definitionModel: { ...state.definitionModel, ...definitionModelFromDesigner }\n    })\n  ),\n\n  on(ConfigDesignerActions.updateSelectedFieldModel, (state: IConfigDesignerModel, { selectedFieldModel }) => {\n    const definitionModel = cloneDeep(state.definitionModel);\n    const fieldIndex = findIndex(definitionModel.fields, { guid: state.selectedFieldGuid });\n\n    definitionModel.fields[fieldIndex] = selectedFieldModel;\n\n    return { ...state, definitionModel };\n  }),\n\n  on(ConfigDesignerActions.addFieldModel, (state: IConfigDesignerModel, { newFieldModel }) => {\n    const definitionModel = cloneDeep(state.definitionModel);\n\n    definitionModel.fields.push(newFieldModel);\n\n    return { ...state, definitionModel };\n  }),\n\n  on(ConfigDesignerActions.deleteSelectedFieldSuccess, (state: IConfigDesignerModel) => {\n    const definitionModel = cloneDeep(state.definitionModel);\n\n    remove(definitionModel.fields, { guid: state.selectedFieldGuid });\n\n    return { ...state, definitionModel };\n  }),\n\n  on(ConfigDesignerActions.saveDefinitionSuccess, (state: IConfigDesignerModel, { savedDefinitionName }) => ({\n    ...state,\n    savedDefinitionName\n  })),\n\n  on(ConfigDesignerActions.destroy, (state: IConfigDesignerModel) => ({\n    ...initialState\n  }))\n);\n\nexport function configDesignerModelReducer(state, action) {\n  return reducer(state, action);\n}\n"]}