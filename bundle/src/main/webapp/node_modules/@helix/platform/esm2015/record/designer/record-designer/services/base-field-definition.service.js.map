{"version":3,"file":"base-field-definition.service.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/record/designer/record-designer/services/base-field-definition.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { RX_NUMBER, RxIdService } from '@helix/platform/utils';\nimport { RX_RECORD_DEFINITION, RxFieldDefinitionService, RxRecordDefinitionService } from '@helix/platform/record/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IFormBuilderConfig, RX_PERMISSION } from '@helix/platform/shared/api';\nimport {\n  BooleanFormControlComponent,\n  CounterFormControlComponent,\n  ICheckboxFormControlOptions,\n  ICounterFormControlOptions,\n  ILabelFormControlOptions,\n  IPermissionEditorComponentOptions,\n  ISelectFormControlOptions,\n  ISwitcherFormControlOptions,\n  ITextFormControlOptions,\n  LabelFormControlComponent,\n  RxPermissionEditorComponent,\n  SelectFormControlComponent,\n  SwitchFormControlComponent,\n  TextareaFormControlComponent,\n  TextFormControlComponent\n} from '@helix/platform/shared/components';\nimport { IRecordDefinitionModel, IRecordFieldDefinitionModel } from '../../record-designer.types';\nimport { Injector } from '@angular/core';\nimport { IValidationIssue, ValidationIssueType } from '@helix/platform/ui-kit';\nimport { RxFieldDefinitionInspectorHelperService } from './field-definition-inspector-helper.service';\nimport { includes, inRange, isEmpty, isNumber, trim } from 'lodash';\nimport { FieldOptionEditorComponent } from '../field-option-editor/field-option-editor.component';\n\nexport abstract class RxBaseFieldDefinitionService {\n  abstract readonly resourceType: string;\n  protected translateService = this.injector.get(TranslateService);\n  protected rxIdService = this.injector.get(RxIdService);\n  protected rxFieldDefinitionService = this.injector.get(RxFieldDefinitionService);\n  protected rxFieldDefinitionInspectorHelperService = this.injector.get(RxFieldDefinitionInspectorHelperService);\n  protected rxRecordDefinitionService = this.injector.get(RxRecordDefinitionService);\n\n  constructor(private injector: Injector) {}\n\n  getNewFieldDefinitionModel(fieldProperties: Partial<IRecordFieldDefinitionModel>): IRecordFieldDefinitionModel {\n    return {\n      id: this.rxIdService.generate(),\n      name: this.translateService.instant('com.bmc.arsys.rx.client.designer.default-field-name.label'),\n      description: null,\n      fieldOption: RX_RECORD_DEFINITION.fieldOptions.optional,\n      defaultValue: null,\n      allowPermissionsOverlay: true,\n      allowOtherPropertiesOverlay: true,\n      resourceType: this.resourceType,\n      ...fieldProperties\n    } as IRecordFieldDefinitionModel;\n  }\n\n  getFieldInspectorConfig(\n    fieldModel: IRecordFieldDefinitionModel,\n    definitionModel: IRecordDefinitionModel,\n    isReadOnly: boolean\n  ): IFormBuilderConfig {\n    const isJoinedField = this.rxFieldDefinitionService.isJoinedField(fieldModel);\n    const isExternalRecordField = this.rxFieldDefinitionService.isExternalRecordField(fieldModel);\n\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n        controls: [\n          {\n            name: 'name',\n            component: TextFormControlComponent,\n            isDisabled: !this.rxFieldDefinitionInspectorHelperService.isNameEditable(fieldModel),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n              required: true\n            } as ITextFormControlOptions\n          },\n          {\n            name: 'description',\n            component: TextareaFormControlComponent,\n            isDisabled:\n              isReadOnly ||\n              !this.rxFieldDefinitionInspectorHelperService.isDescriptionEditable(fieldModel, definitionModel),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label')\n            }\n          },\n          {\n            name: 'resourceType',\n            component: SelectFormControlComponent,\n            isDisabled: true,\n            options: {\n              required: true,\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.data-type.label'),\n              options: [\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.attachment.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.attachment.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.boolean.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.boolean.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.dateOnly.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.dateOnly.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.dateTime.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.dateTime.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.decimal.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.decimal.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.real.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.real.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.integer.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.integer.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.localizedCharacter.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.localizedCharacter.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.selection.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.selection.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.character.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.character.labelKey)\n                },\n                {\n                  id: RX_RECORD_DEFINITION.dataTypes.timeOnly.resourceType,\n                  name: this.translateService.instant(RX_RECORD_DEFINITION.dataTypes.timeOnly.labelKey)\n                }\n              ]\n            } as ISelectFormControlOptions\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.details.label'),\n        controls: [\n          {\n            name: 'fieldOption',\n            component: FieldOptionEditorComponent,\n            isDisabled: isReadOnly || !this.rxFieldDefinitionInspectorHelperService.isRequiredEditable(fieldModel)\n          },\n          {\n            name: 'anyUserAllowedToSubmit',\n            component: SwitchFormControlComponent,\n            isDisabled:\n              isReadOnly || !this.rxFieldDefinitionInspectorHelperService.isSubmitEditable(fieldModel, definitionModel),\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.record-designer.field-properties.allow-anyone-to-submit.label'\n              )\n            } as ISwitcherFormControlOptions\n          },\n          {\n            name: 'permissions',\n            component: RxPermissionEditorComponent,\n            isDisabled:\n              isReadOnly ||\n              !this.rxFieldDefinitionInspectorHelperService.arePermissionsEditable(fieldModel, definitionModel),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.permissions.label'),\n              type: 'config',\n              permissionScope: RX_PERMISSION.permissionScope.all\n            } as IPermissionEditorComponentOptions\n          },\n          {\n            name: '',\n            component: LabelFormControlComponent,\n            options: {\n              labelKey: 'com.bmc.arsys.rx.client.record-designer.definition-properties.auditing.title'\n            } as ILabelFormControlOptions\n          },\n          {\n            name: 'audit',\n            component: BooleanFormControlComponent,\n            isDisabled:\n              isReadOnly ||\n              !this.rxFieldDefinitionInspectorHelperService.isAuditingEditable(fieldModel, definitionModel),\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.audit.label'\n              ),\n              tooltip: this.translateService.instant(\n                'com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.audit.tooltip'\n              ),\n              shouldDisplayAsCheckbox: true\n            } as ICheckboxFormControlOptions\n          },\n          {\n            name: 'copy',\n            component: BooleanFormControlComponent,\n            isDisabled:\n              fieldModel.audit ||\n              isReadOnly ||\n              !this.rxFieldDefinitionInspectorHelperService.isAuditingEditable(fieldModel, definitionModel),\n            options: {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.copy.label'\n              ),\n              tooltip: this.translateService.instant(\n                'com.bmc.arsys.rx.client.record-designer.field-properties.auditing-options.copy.tooltip'\n              ),\n              shouldDisplayAsCheckbox: true\n            } as ICheckboxFormControlOptions\n          },\n          {\n            name: 'id',\n            component: CounterFormControlComponent,\n            isDisabled: this.rxFieldDefinitionInspectorHelperService.isFieldIdDisabled(\n              fieldModel,\n              fieldModel.isNewField\n            ),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.field-id.label'),\n              allowIntegerOnly: true\n            } as ICounterFormControlOptions\n          }\n        ]\n      }\n    ] as IFormBuilderConfig;\n  }\n\n  validate(fieldModel: IRecordFieldDefinitionModel, definitionModel: IRecordDefinitionModel): IValidationIssue[] {\n    const issues: IValidationIssue[] = [];\n\n    if (isEmpty(trim(fieldModel.name))) {\n      issues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.common.field-name.label')\n          }\n        ),\n        data: {\n          propertyName: 'name',\n          guid: fieldModel.guid\n        }\n      });\n    }\n\n    if (!RX_RECORD_DEFINITION.validDefinitionNameRegex.test(fieldModel.name)) {\n      issues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.common.field-name.label')\n          }\n        ),\n        data: {\n          propertyName: 'name',\n          guid: fieldModel.guid\n        }\n      });\n    }\n\n    if (\n      !fieldModel.lastUpdateTime &&\n      isNumber(fieldModel.id) &&\n      !this.rxFieldDefinitionService.isExternalRecordField(fieldModel) &&\n      inRange(fieldModel.id, 1, RX_RECORD_DEFINITION.AR_MAX_RESERVED_FIELD_ID + 1) &&\n      !includes(RX_RECORD_DEFINITION.AR_CORE_FIELD_IDS, fieldModel.id)\n    ) {\n      issues.push({\n        type: ValidationIssueType.Warning,\n        data: {\n          propertyName: 'id',\n          guid: fieldModel.guid\n        },\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.record-designer.validation.field-id-in-bmc-reserved-range-warning.message'\n        )\n      });\n    }\n\n    if (fieldModel.id && !inRange(fieldModel.id as number, 1, RX_NUMBER.maxInteger + 1)) {\n      issues.push({\n        type: ValidationIssueType.Error,\n        data: {\n          propertyName: 'id',\n          guid: fieldModel.guid\n        },\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.record-designer.validation.invalid-field-id-range.message',\n          { max: RX_NUMBER.maxInteger }\n        )\n      });\n    }\n\n    return issues;\n  }\n}\n"]}