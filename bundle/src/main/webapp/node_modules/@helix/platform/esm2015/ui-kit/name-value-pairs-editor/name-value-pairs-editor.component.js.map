{"version":3,"file":"name-value-pairs-editor.component.js","sourceRoot":"","sources":["../../../../../../libs/platform/ui-kit/name-value-pairs-editor/name-value-pairs-editor.component.ts","../../../../../../libs/platform/ui-kit/name-value-pairs-editor/name-value-pairs-editor.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE7D,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAEL,iBAAiB,EAEjB,aAAa,EAGd,MAAM,gBAAgB,CAAC;AACxB,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,QAAQ,CAAC;;;;;;AAmBpC,MAAM,OAAO,+BAA+B;IAU1C,YAAoB,gBAAkC;QAAlC,qBAAgB,GAAhB,gBAAgB,CAAkB;QATtD,mBAAc,GAAqB,EAAE,CAAC;QAGtC,mBAAc,GAAG,EAAE,CAAC;QAIpB,sBAAiB,GAAG,IAAI,CAAC;IAEgC,CAAC;IAE1D,UAAU,CAAC,KAAU;QACnB,IAAI,KAAK,KAAK,IAAI,CAAC,cAAc,EAAE;YACjC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;SAC7B;IACH,CAAC;IAED,gBAAgB,CAAC,QAAkB;QACjC,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC;IACnC,CAAC;IAED,QAAQ,CAAC,OAAwB;QAC/B,OAAO,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;YACvF,CAAC,CAAC;gBACE,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qDAAqD,CAAC;gBAC1F,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,qEAAqE,CAAC;aAC3G;YACH,CAAC,CAAC,IAAI,CAAC;IACX,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC;YACvB,GAAG,EAAE,EAAE;YACP,KAAK,EAAE,EAAE;SACV,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7C,CAAC;IAED,mBAAmB,CAAC,KAAa;QAC/B,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACrC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC7C,CAAC;;4HA3CU,+BAA+B;gHAA/B,+BAA+B,mGAb/B;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,+BAA+B,CAAC;YAC9D,KAAK,EAAE,IAAI;SACZ;QACD;YACE,OAAO,EAAE,aAAa;YACtB,WAAW,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,+BAA+B,CAAC;YAC9D,KAAK,EAAE,IAAI;SACZ;KACF,0BC5BH,m0CAwCA;2FDVa,+BAA+B;kBAjB3C,SAAS;mBAAC;oBACT,QAAQ,EAAE,4BAA4B;oBACtC,WAAW,EAAE,0CAA0C;oBACvD,SAAS,EAAE,CAAC,0CAA0C,CAAC;oBACvD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,EAAE,UAAU,CAAC,GAAG,EAAE,gCAAgC,CAAC;4BAC9D,KAAK,EAAE,IAAI;yBACZ;wBACD;4BACE,OAAO,EAAE,aAAa;4BACtB,WAAW,EAAE,UAAU,CAAC,GAAG,EAAE,gCAAgC,CAAC;4BAC9D,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;uGAKC,cAAc;sBADb,KAAK","sourcesContent":["import { Component, Input, forwardRef } from '@angular/core';\nimport { INameValuePair } from './name-value-pair.interface';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  ControlValueAccessor,\n  NG_VALUE_ACCESSOR,\n  Validator,\n  NG_VALIDATORS,\n  AbstractControl,\n  ValidationErrors\n} from '@angular/forms';\nimport { noop, some } from 'lodash';\n\n@Component({\n  selector: 'rx-name-value-pairs-editor',\n  templateUrl: './name-value-pairs-editor.component.html',\n  styleUrls: ['./name-value-pairs-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => RxNameValuePairsEditorComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => RxNameValuePairsEditorComponent),\n      multi: true\n    }\n  ]\n})\nexport class RxNameValuePairsEditorComponent implements ControlValueAccessor, Validator {\n  nameValuePairs: INameValuePair[] = [];\n\n  @Input()\n  addButtonLabel = '';\n\n  onChangeCallback: any;\n\n  registerOnTouched = noop;\n\n  constructor(private translateService: TranslateService) {}\n\n  writeValue(value: any) {\n    if (value !== this.nameValuePairs) {\n      this.nameValuePairs = value;\n    }\n  }\n\n  registerOnChange(callback: Function) {\n    this.onChangeCallback = callback;\n  }\n\n  validate(control: AbstractControl): ValidationErrors | null {\n    return some(this.nameValuePairs, { key: '' }) || some(this.nameValuePairs, { value: '' })\n      ? {\n          name: this.translateService.instant('com.bmc.arsys.rx.client.common.required-field.label'),\n          text: this.translateService.instant('com.bmc.arsys.rx.client.view-components.validation.required.message')\n        }\n      : null;\n  }\n\n  addNameValuePair(): void {\n    this.nameValuePairs.push({\n      key: '',\n      value: ''\n    });\n\n    this.onChangeCallback(this.nameValuePairs);\n  }\n\n  deleteNameValuePair(index: number): void {\n    this.nameValuePairs.splice(index, 1);\n    this.onChangeCallback(this.nameValuePairs);\n  }\n}\n","<div>\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle px-0 align-self-start\"\n    rx-id=\"add-button\"\n    (click)=\"addNameValuePair()\"\n  >\n    {{ addButtonLabel }}\n  </button>\n  <div class=\"d-flex\" *ngFor=\"let pair of nameValuePairs; let $index = index\">\n    <adapt-rx-textfield\n      name=\"name\"\n      [(ngModel)]=\"pair.key\"\n      [required]=\"true\"\n      attr.rx-id=\"name\"\n      placeholder=\"{{ 'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder' | translate }}\"\n      class=\"d-block form-group pr-4 flex-fill\"\n      (ngModelChange)=\"onChangeCallback(nameValuePairs)\"\n      [autofocus]=\"true\"\n    ></adapt-rx-textfield>\n    <adapt-rx-textfield\n      name=\"value\"\n      [(ngModel)]=\"pair.value\"\n      [required]=\"true\"\n      attr.rx-id=\"value\"\n      placeholder=\"{{ 'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder' | translate }}\"\n      class=\"d-block form-group pr-4 flex-fill\"\n      (ngModelChange)=\"onChangeCallback(nameValuePairs)\"\n    ></adapt-rx-textfield>\n    <button\n      class=\"d-icon-trash form-group px-0\"\n      adapt-button\n      btn-type=\"tertiary\"\n      type=\"button\"\n      (click)=\"deleteNameValuePair($index)\"\n    ></button>\n  </div>\n</div>\n"]}