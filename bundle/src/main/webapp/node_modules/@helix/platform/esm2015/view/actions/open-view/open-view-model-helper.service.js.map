{"version":3,"file":"open-view-model-helper.service.js","sourceRoot":"","sources":["../../../../../../../libs/platform/view/actions/open-view/open-view-model-helper.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  IViewActionDesignPropertyEditorConfig,\n  OpenViewActionModalSize,\n  OpenViewActionType\n} from '@helix/platform/view/api';\nimport {\n  ExpressionFormControlComponent,\n  IDefinitionPickerComponentOptions,\n  IExpressionFormControlOptions,\n  ISelectFormControlOptions,\n  ITextFormControlOptions,\n  RxDefinitionPickerComponent,\n  RxDefinitionPickerType,\n  SelectFormControlComponent,\n  TextFormControlComponent\n} from '@helix/platform/shared/components';\nimport { IExpressionConfigurator, Tooltip } from '@helix/platform/shared/api';\nimport {\n  RX_OPEN_VIEW_LAUNCH_BEHAVIOR_OPTIONS,\n  RX_OPEN_VIEW_MODAL_SIZE_OPTIONS,\n  RX_OPEN_VIEW_TYPE_OPTIONS\n} from './open-view-action.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxOpenViewModelHelperService {\n  getOpenViewInspector(\n    inputParams: { name: string }[],\n    presentationType: OpenViewActionType,\n    presentationModalSize: OpenViewActionModalSize,\n    expressionConfigurator: IExpressionConfigurator\n  ): IViewActionDesignPropertyEditorConfig {\n    const viewInputControls = inputParams.map((param) => ({\n      name: `viewParams.${param.name}`,\n      component: ExpressionFormControlComponent,\n      options: {\n        label: param.name,\n        dataDictionary$: expressionConfigurator.getDataDictionary(param.name),\n        operators: expressionConfigurator.getOperators(param.name)\n      } as IExpressionFormControlOptions\n    }));\n\n    const isFullWidthType = presentationType === OpenViewActionType.FullWidth;\n\n    const isCenteredModalWithFullSize =\n      presentationType === OpenViewActionType.CenteredModal &&\n      presentationModalSize === OpenViewActionModalSize.FullSize;\n\n    return [\n      {\n        name: 'viewDefinitionName',\n        component: RxDefinitionPickerComponent,\n        options: {\n          label: 'View',\n          required: true,\n          definitionType: RxDefinitionPickerType.View\n        } as IDefinitionPickerComponentOptions\n      },\n      ...viewInputControls,\n      {\n        name: 'presentation.type',\n        component: SelectFormControlComponent,\n        options: {\n          label: 'Presentation',\n          tooltip: new Tooltip('Select how to display the view in the application.'),\n          options: RX_OPEN_VIEW_TYPE_OPTIONS,\n          sortAlphabetically: false\n        } as ISelectFormControlOptions\n      },\n      ...(isFullWidthType\n        ? [\n            {\n              name: 'presentation.launchBehavior',\n              component: SelectFormControlComponent,\n              options: {\n                label: 'Launch behavior',\n                options: RX_OPEN_VIEW_LAUNCH_BEHAVIOR_OPTIONS,\n                sortAlphabetically: true\n              } as ISelectFormControlOptions\n            }\n          ]\n        : [\n            {\n              name: 'presentation.modalSize',\n              component: SelectFormControlComponent,\n              options: {\n                label: 'Size',\n                options:\n                  presentationType === OpenViewActionType.CenteredModal\n                    ? RX_OPEN_VIEW_MODAL_SIZE_OPTIONS\n                    : RX_OPEN_VIEW_MODAL_SIZE_OPTIONS.filter(\n                        (option) => option.id !== OpenViewActionModalSize.FullSize\n                      ),\n                sortAlphabetically: false\n              } as ISelectFormControlOptions\n            },\n            ...(isCenteredModalWithFullSize\n              ? []\n              : [\n                  {\n                    name: 'presentation.title',\n                    component: TextFormControlComponent,\n                    options: {\n                      label: 'Title'\n                    } as ITextFormControlOptions\n                  }\n                ])\n          ])\n    ];\n  }\n}\n"]}