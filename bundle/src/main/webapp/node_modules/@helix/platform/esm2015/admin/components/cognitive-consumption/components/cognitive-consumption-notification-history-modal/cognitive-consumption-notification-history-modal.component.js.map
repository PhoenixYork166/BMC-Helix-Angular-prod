{"version":3,"file":"cognitive-consumption-notification-history-modal.component.js","sourceRoot":"","sources":["../../../../../../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component.ts","../../../../../../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAClD,OAAO,EAAc,EAAE,EAAE,MAAM,MAAM,CAAC;AACtC,OAAO,EAAE,GAAG,EAAE,MAAM,gBAAgB,CAAC;AACrC,OAAO,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvD,OAAO,EAAqB,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAErF,OAAO,EAAwC,gBAAgB,EAAE,MAAM,iCAAiC,CAAC;AACzG,OAAO,EAAE,wBAAwB,EAAE,MAAM,sCAAsC,CAAC;AAChF,OAAO,EAAE,6BAA6B,EAAE,MAAM,qCAAqC,CAAC;AACpF,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;;;;;;AAOvD,MAAM,OAAO,qDAAqD;IAIhE,YACU,cAA8B,EAC9B,6BAA4D,EAC5D,gBAAkC;QAFlC,mBAAc,GAAd,cAAc,CAAgB;QAC9B,kCAA6B,GAA7B,6BAA6B,CAA+B;QAC5D,qBAAgB,GAAhB,gBAAgB,CAAkB;QAE1C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;IACjD,CAAC;IAED,QAAQ;QACN,MAAM,gBAAgB,GAAsB;YAC1C,gBAAgB,EAAE;gBAChB;oBACE,EAAE,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;oBAClE,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,SAAS;iBAC3D;gBACD;oBACE,EAAE,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;oBAClE,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,SAAS;iBAC3D;gBACD;oBACE,EAAE,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;oBAClE,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,QAAQ;iBAC1D;gBACD;oBACE,EAAE,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe;oBAC5D,YAAY,EAAE,oBAAoB,CAAC,aAAa,CAAC,SAAS;iBAC3D;aACF;SACF,CAAC;QAEF,MAAM,OAAO,GAAwB;YACnC;gBACE,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;gBACvE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,oGAAoG,CACrG;aACF;YACD;gBACE,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;gBACvE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,kGAAkG,CACnG;aACF;YACD;gBACE,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB;gBACvE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,kGAAkG,CACnG;aACF;YACD;gBACE,KAAK,EAAE,CAAC;gBACR,OAAO,EAAE,wBAAwB,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe;gBACjE,KAAK,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAClC,gGAAgG,CACjG;aACF;SACF,CAAC;QAEF,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;YACzB,OAAO;YACP,eAAe,EAAE,KAAK;YACtB,oBAAoB,EAAE,KAAK;YAC3B,kBAAkB,EAAE,gBAAgB,CAAC,QAAQ;YAC7C,MAAM,EAAE,WAAW;YACnB,mBAAmB,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,gBAAgB,CAAC;YAE/C,OAAO,EAAE,GAAG,EAAE,CACZ,IAAI,CAAC,6BAA6B;iBAC/B,0CAA0C,CAAC;gBAC1C,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO;gBAC9B,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;aAC9B,CAAC;iBACD,IAAI,CACH,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;gBACb,IAAI,EAAE,IAAI,CAAC,MAAM;gBACjB,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM;aAC9B,CAAC,CAAC,CACJ;SACN,CAAC,CAAC;IACL,CAAC;IAED,YAAY;QACV,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;IAC9B,CAAC;;kJA1FU,qDAAqD;sIAArD,qDAAqD,2FChBlE,2VASA;2FDOa,qDAAqD;kBALjE,SAAS;mBAAC;oBACT,QAAQ,EAAE,qDAAqD;oBAC/D,WAAW,EAAE,mEAAmE;oBAChF,SAAS,EAAE,CAAC,mEAAmE,CAAC;iBACjF","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { IRecordGridColumn, IRecordGridConfig, RowSelectionMode } from '@helix/platform/view/components';\nimport { RX_COGNITIVE_CONSUMPTION } from '../../cognitive-consumption.constant';\nimport { RxCognitiveConsumptionService } from '../../cognitive-consumption.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-consumption-notification-history-modal',\n  templateUrl: './cognitive-consumption-notification-history-modal.component.html',\n  styleUrls: ['./cognitive-consumption-notification-history-modal.component.scss']\n})\nexport class CognitiveConsumptionNotificationHistoryModalComponent implements OnInit {\n  modalData: IPlainObject;\n  recordGridConfig: Observable<IRecordGridConfig>;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxCognitiveConsumptionService: RxCognitiveConsumptionService,\n    private translateService: TranslateService\n  ) {\n    this.modalData = this.activeModalRef.getData();\n  }\n\n  ngOnInit() {\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.consumedCapacityField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.thresholdReachedField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.notificationDateField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.dateTime\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.recipientsField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const columns: IRecordGridColumn[] = [\n      {\n        index: 0,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.consumedCapacityField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.consumption-measure.title'\n        )\n      },\n      {\n        index: 1,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.thresholdReachedField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.threshold-reached.title'\n        )\n      },\n      {\n        index: 2,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.notificationDateField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.notification-date.title'\n        )\n      },\n      {\n        index: 3,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.recipientsField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.email-recipient.title'\n        )\n      }\n    ];\n\n    this.recordGridConfig = of({\n      columns,\n      enableFiltering: false,\n      useExternalFiltering: false,\n      enableRowSelection: RowSelectionMode.Multiple,\n      styles: 'flex-fill',\n      getRecordDefinition: () => of(recordDefinition),\n\n      getData: () =>\n        this.rxCognitiveConsumptionService\n          .getCognitiveConsumptionNotificationHistory({\n            action: this.modalData.groupId,\n            domain: this.modalData.domain\n          })\n          .pipe(\n            map((data) => ({\n              data: data.entity,\n              totalSize: data.entity.length\n            }))\n          )\n    });\n  }\n\n  onCloseClick(): void {\n    this.activeModalRef.close();\n  }\n}\n","<div class=\"modal-body d-flex\">\n  <rx-record-grid [config]=\"recordGridConfig\"></rx-record-grid>\n</div>\n\n<div class=\"modal-footer\">\n  <button rx-id=\"close-button\" adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n"]}