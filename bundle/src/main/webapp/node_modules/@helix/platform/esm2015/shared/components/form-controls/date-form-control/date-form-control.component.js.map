{"version":3,"file":"date-form-control.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/shared/components/form-controls/date-form-control/date-form-control.component.ts","../../../../../../../../libs/platform/shared/components/form-controls/date-form-control/date-form-control.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAoC,MAAM,eAAe,CAAC;AACnF,OAAO,EAAE,WAAW,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AAChE,OAAO,EAAgB,oBAAoB,EAAE,MAAM,uBAAuB,CAAC;AAC3E,OAAO,MAAM,MAAM,YAAY,CAAC;AAEhC,OAAO,EAAE,aAAa,EAAE,MAAM,mCAAmC,CAAC;;;;AAclE,MAAM,OAAO,wBAAyB,SAAQ,aAAqB;IAXnE;;QAkBE,sBAAiB,GAAG,IAAI,WAAW,CAAC,EAAE,CAAC,CAAC;QAExC,eAAU,GAAG,oBAAoB,CAAC,IAAI,CAAC;KA2BxC;IAzBC,QAAQ;QACN,IAAI,CAAC,iBAAiB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,KAAmB,EAAE,EAAE;YACpE,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aACjF;iBAAM;gBACL,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aACnB;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,UAAU,CAAC,KAAa;QACtB,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAExB,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhC,IAAI,IAAI,CAAC,OAAO,EAAE,EAAE;YAClB,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;gBAC9B,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;gBACjB,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE;gBACnB,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;aAClB,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;SACvC;IACH,CAAC;;qHAnCU,wBAAwB;yGAAxB,wBAAwB,yGARxB;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,wBAAwB;YACrC,KAAK,EAAE,IAAI;SACZ;KACF,iDCjBH,4MAQA;2FDWa,wBAAwB;kBAXpC,SAAS;mBAAC;oBACT,QAAQ,EAAE,sBAAsB;oBAChC,WAAW,EAAE,oCAAoC;oBACjD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,0BAA0B;4BACrC,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;8BAGC,OAAO;sBADN,KAAK;gBAIN,UAAU;sBADT,KAAK","sourcesContent":["import { Component, Input, OnChanges, OnInit, SimpleChanges } from '@angular/core';\nimport { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { RxDateStruct, RxDatetimePickerMode } from '@bmc-ux/adapt-angular';\nimport moment from 'moment-es6';\nimport { IFormControlComponent } from '@helix/platform/shared/api';\nimport { ValueAccessor } from '../../form-builder/value-accessor';\nimport { IDateFormControlOptions } from './date-form-control-options.interface';\n\n@Component({\n  selector: 'rx-date-form-control',\n  templateUrl: './date-form-control.component.html',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: DateFormControlComponent,\n      multi: true\n    }\n  ]\n})\nexport class DateFormControlComponent extends ValueAccessor<string> implements IFormControlComponent, OnInit {\n  @Input()\n  options: IDateFormControlOptions;\n\n  @Input()\n  isDisabled: boolean;\n\n  datePickerControl = new FormControl('');\n\n  pickerMode = RxDatetimePickerMode.Date;\n\n  ngOnInit(): void {\n    this.datePickerControl.valueChanges.subscribe((value: RxDateStruct) => {\n      if (value) {\n        this.value = moment([value.year, value.month, value.date]).format('YYYY-MM-DD');\n      } else {\n        this.value = null;\n      }\n    });\n  }\n\n  writeValue(value: string): void {\n    super.writeValue(value);\n\n    const date = moment(this.value);\n\n    if (date.isValid()) {\n      this.datePickerControl.setValue({\n        year: date.year(),\n        month: date.month(),\n        date: date.date()\n      });\n    } else {\n      this.datePickerControl.setValue(null);\n    }\n  }\n}\n","<adapt-rx-datetime\n  [label]=\"options.label\"\n  [disabled]=\"isDisabled\"\n  [mode]=\"pickerMode\"\n  [required]=\"options.required\"\n  [formControl]=\"datePickerControl\"\n>\n</adapt-rx-datetime>\n"]}