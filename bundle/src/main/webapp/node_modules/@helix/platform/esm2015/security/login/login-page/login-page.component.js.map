{"version":3,"file":"login-page.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/security/login/login-page/login-page.component.ts","../../../../../../../libs/platform/security/login/login-page/login-page.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IBundleDescriptor, RxAuthService, RxBundleService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { get } from 'lodash';\nimport { EMPTY, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-login-page',\n  templateUrl: './login-page.component.html'\n})\nexport class LoginPageComponent {\n  userName: string;\n  userPassword: string;\n  timeout: any;\n  isLoading = false;\n  bundleFriendlyName = '';\n  shouldReloadPage = true;\n  areStylesLoaded = false;\n\n  footerItems = {\n    content: {\n      copyright: 'Copyright 1997 - 2023 BMC Software, Inc.',\n      info: this.translateService.instant('login.trademark'),\n      helixLogo: true\n    }\n  };\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private title: Title,\n    private rxAuthService: RxAuthService,\n    private rxBundleService: RxBundleService,\n    private translateService: TranslateService\n  ) {\n    this.shouldReloadPage = get(this.router.getCurrentNavigation(), 'extras.state.shouldReloadPage');\n\n    if (this.shouldReloadPage) {\n      window.location.reload();\n    } else {\n      this.title.setTitle('Login');\n\n      this.activatedRoute.paramMap.subscribe((params) => {\n        const bundleId = params.get('bundleId');\n\n        this.rxBundleService\n          .getFromJsonp(bundleId)\n          .pipe(\n            catchError(() => {\n              this.router.navigate(['unknown-application']);\n\n              return EMPTY;\n            })\n          )\n          .subscribe((bundleDescriptor: IBundleDescriptor) => {\n            if (bundleDescriptor.isApplication) {\n              this.bundleFriendlyName = bundleDescriptor.friendlyName;\n              this.title.setTitle(`Login - ${this.bundleFriendlyName}`);\n            } else {\n              this.router.navigate(['unknown-application']);\n            }\n          });\n      });\n    }\n  }\n\n  login(): void {\n    this.isLoading = true;\n\n    this.rxAuthService\n      .login(this.userName, this.userPassword)\n      .pipe(\n        catchError((err) => {\n          this.isLoading = false;\n\n          return throwError(err);\n        })\n      )\n      .subscribe();\n  }\n}\n","<link rel=\"stylesheet\" href=\"/helix/assets/adapt-css/dist/css/adapt-css-bs4.min.css\" (load)=\"areStylesLoaded = true\" />\n\n<adapt-login\n  productName=\"{{ bundleFriendlyName }}\"\n  logoClass=\"logo-bmc-helix logo-light\"\n  [footerConfig]=\"footerItems\"\n  *ngIf=\"!shouldReloadPage && areStylesLoaded\"\n>\n  <form class=\"form\" novalidate autocomplete=\"off\" method=\"post\">\n    <adapt-rx-textfield\n      class=\"form-group textfield\"\n      rx-id=\"username\"\n      [label]=\"'login.username' | translate\"\n      [name]=\"'username'\"\n      [placeholder]=\"'login.username' | translate\"\n      [autofocus]=\"true\"\n      [(ngModel)]=\"userName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group textfield\"\n      rx-id=\"password\"\n      [isPassword]=\"true\"\n      [label]=\"'login.password' | translate\"\n      [placeholder]=\"'login.password' | translate\"\n      autocomplete=\"off\"\n      [(ngModel)]=\"userPassword\"\n      [ngModelOptions]=\"{ standalone: true }\"\n    >\n    </adapt-rx-textfield>\n\n    <button\n      adapt-button\n      btn-type=\"primary\"\n      size=\"block\"\n      rx-id=\"sign-in-button\"\n      type=\"submit\"\n      class=\"form__button mb-0\"\n      (click)=\"login()\"\n      [disabled]=\"!userName || isLoading\"\n    >\n      {{ 'login.login' | translate }}\n    </button>\n  </form>\n</adapt-login>\n"]}