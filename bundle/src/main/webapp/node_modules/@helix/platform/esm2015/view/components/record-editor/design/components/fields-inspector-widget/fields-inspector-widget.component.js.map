{"version":3,"file":"fields-inspector-widget.component.js","sourceRoot":"","sources":["../../../../../../../../../../libs/platform/view/components/record-editor/design/components/fields-inspector-widget/fields-inspector-widget.component.ts","../../../../../../../../../../libs/platform/view/components/record-editor/design/components/fields-inspector-widget/fields-inspector-widget.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  ElementRef,\n  HostBinding,\n  Injector,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IFormFocusable } from '@helix/platform/shared/api';\nimport { InspectorWidgetBase } from '@helix/platform/shared/components';\nimport { combineLatest } from 'rxjs';\nimport { concatMap, take } from 'rxjs/operators';\nimport { RecordEditorDesignModel } from '../../record-editor-design.model';\nimport { FieldSelectorComponent } from './field-selector/field-selector.component';\nimport { IFieldSelectorConfig } from './field-selector/field-selector.types';\nimport { IRecordEditorFieldsControlOptions } from './fields-inspector-widget.types';\n\n@Component({\n  selector: 'rx-fields-inspector-widget',\n  templateUrl: './fields-inspector-widget.component.html',\n  styleUrls: ['./fields-inspector-widget.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FieldsInspectorWidgetComponent\n  extends InspectorWidgetBase<IRecordEditorFieldsControlOptions, RecordEditorDesignModel>\n  implements IFormFocusable\n{\n  @HostBinding('class.rx-record-definition-fields')\n  encapsulateClass = true;\n\n  @ViewChild('openModalButton', { read: ElementRef, static: true })\n  openModalButton: ElementRef;\n\n  constructor(injector: Injector, private adaptModalService: AdaptModalService, private renderer: Renderer2) {\n    super(injector);\n  }\n\n  focus(): void {\n    this.renderer.selectRootElement(this.openModalButton.nativeElement, true).click();\n  }\n\n  openModal(): void {\n    combineLatest([\n      this.designerItemModel.childFieldIds$,\n      this.designerItemModel.recordFieldDefinitionItems$,\n      this.designerItemModel.isExtensionView$,\n      this.designerItemModel.associationDefinitionName$\n    ])\n      .pipe(\n        take(1),\n        concatMap(([selectedFieldIds, availableFields, isExtensionView, associationDefinitionName]) =>\n          this.adaptModalService.open({\n            content: FieldSelectorComponent,\n            data: {\n              selectedFieldIds,\n              availableFields:\n                isExtensionView && associationDefinitionName\n                  ? availableFields.filter(\n                      (field) => field.resourceType !== RX_RECORD_DEFINITION.resourceTypes.attachment\n                    )\n                  : availableFields,\n              hideSystemFields: this.options.hideSystemFields\n            } as IFieldSelectorConfig,\n            size: 'sm',\n            hideBackdrop: false,\n            customClass: 'rx-record-editor-field-selector-modal'\n          })\n        )\n      )\n      .subscribe((selectedFieldIds) => {\n        this.designerItemModel.updateSelectedFieldComponents(selectedFieldIds);\n      });\n  }\n\n  removeField(guid: string): void {\n    this.designerItemModel.removeComponent([guid]);\n  }\n\n  trackByGuid<T extends { guid: string }>(index: number, item: T): string {\n    return item.guid;\n  }\n}\n","<adapt-button\n  btn-type=\"tertiary\"\n  #openModalButton\n  rx-id=\"open-modal-button\"\n  class=\"px-0 py-0\"\n  (click)=\"openModal()\"\n  [hidden]=\"options.isDisabled\"\n>\n  <span class=\"d-icon-plus_circle\"></span>\n  Quick edit fields\n</adapt-button>\n\n<div rx-id=\"columns\">\n  <span *ngIf=\"(designerItemModel.selectedFieldComponents$ | async).length === 0\" class=\"text-tertiary\"\n    >No fields added.</span\n  >\n</div>\n\n<div class=\"mt-2\">\n  <div\n    class=\"rx-field-item\"\n    *ngFor=\"let field of designerItemModel.selectedFieldComponents$ | async; trackBy: trackByGuid\"\n  >\n    <div>\n      <div class=\"rx-field-name\">{{ field.label }}</div>\n\n      <div class=\"rx-field-type\">\n        <small>{{ field.componentName }}</small>\n      </div>\n    </div>\n\n    <div class=\"rx-action-button\">\n      <span\n        *ngIf=\"!options.isDisabled\"\n        (click)=\"removeField(field.guid)\"\n        class=\"d-icon-cross btn-link\"\n        rx-id=\"delete-button\"\n      >\n      </span>\n    </div>\n  </div>\n</div>\n"]}