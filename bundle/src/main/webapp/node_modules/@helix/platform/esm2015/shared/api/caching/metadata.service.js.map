{"version":3,"file":"metadata.service.js","sourceRoot":"","sources":["../../../../../../../libs/platform/shared/api/caching/metadata.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAE3C,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;;AAKlC,MAAM,OAAO,iBAAiB;IAG5B,yBAAyB,CAAC,sBAA8B;QACtD,IAAI,CAAC,sBAAsB,GAAG,IAAI,IAAI,CAAC,sBAAsB,CAAC,CAAC;IACjE,CAAC;IAED,yBAAyB;QACvB,OAAO,IAAI,CAAC,sBAAsB,CAAC;IACrC,CAAC;IAED,yBAAyB,CAAC,OAAyB;QACjD,OAAO,OAAO,CAAC,MAAM,KAAK,KAAK,IAAI,0CAA0C,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAClG,CAAC;IAED,8BAA8B,CAAC,OAAyB;QACtD,OAAO,OAAO,CAAC,MAAM,KAAK,KAAK;YAC7B,kCAAkC,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;YACpD,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,yBAAyB,CAAC;gBACtE,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE,+BAA+B,CAAC,CAAC,CAAC;IACrF,CAAC;IAED,iBAAiB,CAAC,OAAyB;QACzC,OAAO,OAAO,CAAC,MAAM,KAAK,KAAK;YAC7B,CAAC,IAAI,CAAC,8BAA8B,CAAC,OAAO,CAAC,IAAI,wDAAwD,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC;IACjI,CAAC;;8GAzBU,iBAAiB;kHAAjB,iBAAiB,cAFhB,MAAM;2FAEP,iBAAiB;kBAH7B,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpRequest } from '@angular/common/http';\nimport { endsWith } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxMetadataService {\n  private metadataLastUpdateTime: Date;\n\n  setMetadataLastUpdateTime(metadataLastUpdateTime: string): void {\n    this.metadataLastUpdateTime = new Date(metadataLastUpdateTime);\n  }\n\n  getMetadataLastUpdateTime(): Date {\n    return this.metadataLastUpdateTime;\n  }\n\n  isLocalizedStringsRequest(request: HttpRequest<any>): boolean {\n    return request.method === 'GET' && /\\/api\\/rx\\/application\\/localizedstrings/.test(request.url);\n  }\n\n  isMetadataDataPageQueryRequest(request: HttpRequest<any>): boolean {\n    return request.method === 'GET' &&\n      /\\/api\\/rx\\/application\\/datapage/.test(request.url) &&\n      (endsWith(request.params.get('dataPageType'), 'DefinitionDataPageQuery') ||\n        endsWith(request.params.get('dataPageType'), 'LocalizedStringsDataPageQuery'));\n  }\n\n  isMetadataRequest(request: HttpRequest<any>): boolean {\n    return request.method === 'GET' &&\n      (this.isMetadataDataPageQueryRequest(request) || /\\/api\\/rx\\/application\\/[a-zA-Z]+\\/[a-zA-Z]+definition/.test(request.url));\n  }\n}\n"]}