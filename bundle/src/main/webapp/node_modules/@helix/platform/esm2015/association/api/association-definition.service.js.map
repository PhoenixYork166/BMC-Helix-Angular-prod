{"version":3,"file":"association-definition.service.js","sourceRoot":"","sources":["../../../../../../libs/platform/association/api/association-definition.service.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAgB,MAAM,sBAAsB,CAAC;AAChE,OAAO,EAAE,UAAU,EAAE,MAAM,eAAe,CAAC;AAC3C,OAAO,EAA0C,SAAS,EAAE,uBAAuB,EAAE,MAAM,4BAA4B,CAAC;AACxH,OAAO,EAAc,EAAE,EAAE,MAAM,MAAM,CAAC;AACtC,OAAO,EAAE,yBAAyB,EAAE,MAAM,mCAAmC,CAAC;;;;AAM9E,MAAM,OAAO,8BAA8B;IACzC,YAAoB,UAAsB,EAAU,uBAAgD;QAAhF,eAAU,GAAV,UAAU,CAAY;QAAU,4BAAuB,GAAvB,uBAAuB,CAAyB;IAAG,CAAC;IAExG,GAAG,CAAC,yBAAiC,EAAE,OAAwB;QAC7D,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAyB,IAAI,CAAC,MAAM,CAAC,yBAAyB,CAAC,EAAE,OAAO,CAAC,CAAC;IACtG,CAAC;IAED,MAAM;QACJ,OAAO,EAAE,CAAC;YACR,IAAI,EAAE,EAAE;YACR,WAAW,EAAE,IAAI;YACjB,OAAO,EAAE,IAAI;YACb,OAAO,EAAE,IAAI;YACb,SAAS,EAAE,CAAC,GAAG,CAAC;YAChB,SAAS,EAAE,CAAC,GAAG,CAAC;YAChB,SAAS,EAAE,IAAI;YACf,SAAS,EAAE,IAAI;YACf,WAAW,EAAE,yBAAyB,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK;YACjE,mBAAmB,EAAE,KAAK;YAC1B,aAAa,EAAE,yBAAyB,CAAC,QAAQ,CAAC,QAAQ;YAC1D,SAAS,EAAE,IAAI;YACf,YAAY,EAAE,KAAK;YACnB,KAAK,EAAE,SAAS,CAAC,oBAAoB,CAAC,MAAM;SAC7C,CAAC,CAAC;IACL,CAAC;IAED,MAAM,CAAC,qBAA6C;QAClD,OAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,qBAAqB,EAAE,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC,CAAC;IAC7F,CAAC;IAED,MAAM,CAAC,qBAA6C,EAAE,OAAsB;QAC1E,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,EAAE,qBAAqB,EAAE,OAAO,CAAC,CAAC;IACtG,CAAC;IAED,MAAM,CAAC,yBAAiC;QACtC,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,yBAAyB,CAAC,CAAC,CAAC;IACxE,CAAC;IAED,mBAAmB,CAAC,yBAAiC;QACnD,MAAM,0BAA0B,GAAa,IAAI,CAAC,uBAAuB,CAAC,eAAe,CACvF,qFAAqF,CACtF,CAAC;QAEF,OAAO,0BAA0B,CAAC,OAAO,CAAC,EAAE,yBAAyB,EAAE,CAAC,CAAC;IAC3E,CAAC;IAED,MAAM,CAAC,4BAAoC,EAAE,4BAAoC;QAC/E,MAAM,aAAa,GAAa,IAAI,CAAC,uBAAuB,CAAC,eAAe,CAC1E,qFAAqF,CACtF,CAAC;QAEF,OAAO,aAAa,CAAC,OAAO,CAAC;YAC3B,IAAI,EAAE,4BAA4B;YAClC,OAAO,EAAE,4BAA4B;SACtC,CAAC,CAAC;IACL,CAAC;IAEO,MAAM,CAAC,yBAAkC;QAC/C,OAAO,yBAAyB;YAC9B,CAAC,CAAC,yDAAyD,kBAAkB,CAAC,yBAAyB,CAAC,EAAE;YAC1G,CAAC,CAAC,uDAAuD,CAAC;IAC9D,CAAC;;2HA7DU,8BAA8B;+HAA9B,8BAA8B,cAF7B,MAAM;2FAEP,8BAA8B;kBAH1C,UAAU;mBAAC;oBACV,UAAU,EAAE,MAAM;iBACnB","sourcesContent":["import { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ICommand, IHttpGetParams, IHttpOptions, RX_BUNDLE, RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { Observable, of } from 'rxjs';\nimport { RX_ASSOCIATION_DEFINITION } from './association-definition.constant';\nimport { IAssociationDefinition } from './association-definition.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxAssociationDefinitionService {\n  constructor(private httpClient: HttpClient, private rxCommandFactoryService: RxCommandFactoryService) {}\n\n  get(associationDefinitionName: string, options?: IHttpGetParams): Observable<IAssociationDefinition> {\n    return this.httpClient.get<IAssociationDefinition>(this.getUrl(associationDefinitionName), options);\n  }\n\n  getNew(): Observable<IAssociationDefinition> {\n    return of({\n      name: '',\n      description: null,\n      nodeAId: null,\n      nodeBId: null,\n      nodeAKeys: [379],\n      nodeBKeys: [379],\n      nodeAName: null,\n      nodeBName: null,\n      cardinality: RX_ASSOCIATION_DEFINITION.cardinality.oneToOne.value,\n      shouldCascadeDelete: false,\n      nodeAModality: RX_ASSOCIATION_DEFINITION.modality.optional,\n      isEnabled: true,\n      allowOverlay: false,\n      scope: RX_BUNDLE.definitionScopeTypes.bundle\n    });\n  }\n\n  create(associationDefinition: IAssociationDefinition): Observable<HttpResponse<any>> {\n    return this.httpClient.post(this.getUrl(), associationDefinition, { observe: 'response' });\n  }\n\n  update(associationDefinition: IAssociationDefinition, options?: IHttpOptions): Observable<any> {\n    return this.httpClient.put(this.getUrl(associationDefinition.name), associationDefinition, options);\n  }\n\n  delete(associationDefinitionName: string): Observable<any> {\n    return this.httpClient.delete(this.getUrl(associationDefinitionName));\n  }\n\n  revertCustomization(associationDefinitionName: string): Observable<any> {\n    const revertCustomizationCommand: ICommand = this.rxCommandFactoryService.forResourceType(\n      'com.bmc.arsys.rx.application.association.command.RevertAssociationDefinitionCommand'\n    );\n\n    return revertCustomizationCommand.execute({ associationDefinitionName });\n  }\n\n  rename(oldAssociationDefinitionName: string, newAssociationDefinitionName: string): Observable<any> {\n    const renameCommand: ICommand = this.rxCommandFactoryService.forResourceType(\n      'com.bmc.arsys.rx.application.association.command.RenameAssociationDefinitionCommand'\n    );\n\n    return renameCommand.execute({\n      name: oldAssociationDefinitionName,\n      newName: newAssociationDefinitionName\n    });\n  }\n\n  private getUrl(associationDefinitionName?: string): string {\n    return associationDefinitionName\n      ? `/api/rx/application/association/associationdefinition/${encodeURIComponent(associationDefinitionName)}`\n      : `/api/rx/application/association/associationdefinition`;\n  }\n}\n"]}