{"version":3,"file":"edit-records-view-builder.service.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/view/actions/edit-records/services/edit-records-view-builder.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { assign } from 'lodash';\nimport { RxGuidService } from '@helix/platform/utils';\nimport {\n  IContainerViewComponentDefinition,\n  IViewComponentDefinition,\n  IViewDefinition,\n  RX_VIEW_DEFINITION,\n  RxViewComponentType\n} from '@helix/platform/view/api';\nimport { RX_RECORD_DEFINITION, RxFieldDefinitionService } from '@helix/platform/record/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  ContainerRowWrap,\n  IColumnDescriptor,\n  RecordEditorMode,\n  RxAssociationEditingMode,\n  RxDefaultRecordEditorInputType\n} from '@helix/platform/view/components';\nimport { RX_ADMINISTRATION, RxSystemConfigurationService } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxEditRecordsViewBuilder {\n  constructor(\n    private rxGuidService: RxGuidService,\n    private rxDefaultRecordEditorInputType: RxDefaultRecordEditorInputType,\n    private rxFieldDefinitionService: RxFieldDefinitionService,\n    private translateService: TranslateService,\n    private rxSystemConfigurationService: RxSystemConfigurationService\n  ) {}\n\n  getViewDefinition(recordDefinitionName: string, columnDescriptors: IColumnDescriptor[]): IViewDefinition {\n    const closeButtonId = this.rxGuidService.generate(),\n      containerId = this.rxGuidService.generate(),\n      recordEditorId = this.rxGuidService.generate(),\n      recordInstanceId = null,\n      saveButtonId = this.rxGuidService.generate(),\n      viewDefinitionId = this.rxGuidService.generate(),\n      recordEditorComponentDefinitions = this.getComponentDefinitions(columnDescriptors, recordEditorId);\n\n    return {\n      guid: viewDefinitionId,\n      layout: JSON.stringify({\n        outlets: [\n          {\n            name: RX_VIEW_DEFINITION.defaultOutletName,\n            columns: [\n              {\n                children: [recordEditorId]\n              }\n            ]\n          },\n          {\n            name: 'footer',\n            height: 60,\n            columns: [\n              {\n                children: [containerId]\n              }\n            ]\n          }\n        ]\n      }),\n      outputParams: [\n        {\n          name: 'recordInstance',\n          source: '${view.components.' + recordEditorId + '.recordInstance}'\n        }\n      ],\n      inputParams: [],\n      componentDefinitions: [\n        {\n          resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n          guid: recordEditorId,\n          type: RxViewComponentType.RecordEditor,\n          propertiesByName: {\n            recordInstanceId: `${recordInstanceId}`,\n            mode: RecordEditorMode.BulkEdit,\n            recordDefinitionName: recordDefinitionName,\n            styles: 'p-0 border-0'\n          },\n          componentDefinitions: recordEditorComponentDefinitions,\n          layout: JSON.stringify({\n            outlets: [\n              {\n                name: RX_VIEW_DEFINITION.defaultOutletName,\n                columns: [\n                  {\n                    children: recordEditorComponentDefinitions.map((componentDefinition) => componentDefinition.guid)\n                  }\n                ]\n              }\n            ]\n          })\n        },\n        {\n          resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n          guid: containerId,\n          type: RxViewComponentType.ButtonBar,\n          propertiesByName: {\n            alignment: 'right',\n            hidden: '0'\n          },\n          layout: JSON.stringify({\n            outlets: [\n              {\n                name: RX_VIEW_DEFINITION.defaultOutletName,\n                columns: [\n                  {\n                    children: [saveButtonId, closeButtonId]\n                  }\n                ]\n              }\n            ]\n          }),\n          componentDefinitions: [\n            {\n              resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n              guid: closeButtonId,\n              type: RxViewComponentType.ActionButton,\n              propertiesByName: {\n                label: this.translateService.instant('com.bmc.arsys.rx.client.common.cancel.label'),\n                style: 'secondary',\n                size: 'default'\n              },\n              componentDefinitions: [\n                {\n                  resourceType: RX_VIEW_DEFINITION.resourceTypes.viewComponent,\n                  guid: this.rxGuidService.generate(),\n                  type: RxViewComponentType.Action,\n                  propertiesByName: {\n                    viewApi: '${view.api}',\n                    name: 'rxCloseViewAction',\n                    actAsCancel: 'true'\n                  }\n                }\n              ]\n            },\n            {\n              resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n              guid: saveButtonId,\n              type: RxViewComponentType.ActionButton,\n              propertiesByName: {\n                label: this.translateService.instant('com.bmc.arsys.rx.client.common.save.label'),\n                style: 'primary',\n                disabled: 'NOT${view.components.' + recordEditorId + '.canSave}',\n                size: 'default'\n              },\n              componentDefinitions: [\n                {\n                  resourceType: RX_VIEW_DEFINITION.resourceTypes.viewComponent,\n                  guid: this.rxGuidService.generate(),\n                  type: RxViewComponentType.Action,\n                  propertiesByName: {\n                    viewApi: '${view.api}',\n                    name: 'rxCloseViewAction',\n                    actAsCancel: 'false'\n                  }\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    };\n  }\n\n  private getComponentDefinitions(\n    columnDescriptors: IColumnDescriptor[],\n    recordEditorId: string\n  ): IContainerViewComponentDefinition[] {\n    const submitterMode = this.rxSystemConfigurationService.getConfigurationSync('Submitter-Mode');\n\n    if (submitterMode === RX_ADMINISTRATION.submitterModes.locked) {\n      columnDescriptors = columnDescriptors.filter(\n        (columnDescriptor) => Number(columnDescriptor.fieldId) !== RX_RECORD_DEFINITION.coreFieldIds.createdBy\n      );\n    }\n\n    const fieldContainerComponentDefinitions = this.getFieldContainerComponentDefinitions(\n      columnDescriptors,\n      recordEditorId\n    );\n\n    return [\n      {\n        resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n        guid: this.rxGuidService.generate(),\n        type: RxViewComponentType.Container,\n        propertiesByName: {\n          rowWrap: ContainerRowWrap.Sm,\n          columnCount: '1'\n        },\n        componentDefinitions: fieldContainerComponentDefinitions,\n        layout: JSON.stringify({\n          outlets: [\n            {\n              name: RX_VIEW_DEFINITION.defaultOutletName,\n              columns: [\n                {\n                  children: fieldContainerComponentDefinitions.map((componentDefinition) => componentDefinition.guid)\n                }\n              ]\n            }\n          ]\n        })\n      }\n    ];\n  }\n\n  private getFieldContainerComponentDefinitions(\n    columnDescriptors: IColumnDescriptor[],\n    recordEditorId: string\n  ): IContainerViewComponentDefinition[] {\n    return columnDescriptors\n      .filter((columnDescriptor) => !this.rxFieldDefinitionService.isSystemField(columnDescriptor.fieldDefinition))\n      .map((columnDescriptor) => {\n        let resourceType, componentType;\n        const isAssociated = Boolean(columnDescriptor.associationDescriptor);\n\n        if (isAssociated) {\n          resourceType = RX_VIEW_DEFINITION.resourceTypes.containerViewComponent;\n          componentType = RxViewComponentType.Association;\n        } else {\n          resourceType = RX_VIEW_DEFINITION.resourceTypes.viewComponent;\n          componentType = this.rxDefaultRecordEditorInputType.getFieldTypeByFieldDefinition(\n            columnDescriptor.fieldDefinition\n          );\n        }\n\n        const componentDefinition: IViewComponentDefinition = {\n          resourceType: resourceType,\n          guid: this.rxGuidService.generate(),\n          type: componentType,\n          propertiesByName: {\n            fieldId: columnDescriptor.fieldDefinition.id,\n            recordDefinition: '${view.components.' + recordEditorId + '.recordDefinition}',\n            recordInstance: '${view.components.' + recordEditorId + '.recordInstance}',\n            label: columnDescriptor.title,\n            fieldOption: RX_RECORD_DEFINITION.fieldOptions.optional\n          }\n        };\n\n        if (isAssociated) {\n          (componentDefinition as IContainerViewComponentDefinition).componentDefinitions = [];\n\n          assign(componentDefinition.propertiesByName, {\n            associatedRecordNodeSide: columnDescriptor.associationDescriptor.nodeSide,\n            editingMode: RxAssociationEditingMode.Dropdown,\n            associationDefinitionName: columnDescriptor.associationDescriptor.associationDefinition.name,\n            recordDefinitionName: columnDescriptor.associationDescriptor.recordDefinitionName\n          });\n        }\n\n        return componentDefinition;\n      })\n      .reduce<IContainerViewComponentDefinition[]>(\n        (fieldContainerComponentDefinitions, fieldComponentDefinition, index, fieldComponentDefinitions) => {\n          if (index % 2 === 0) {\n            fieldContainerComponentDefinitions.push({\n              resourceType: RX_VIEW_DEFINITION.resourceTypes.containerViewComponent,\n              guid: this.rxGuidService.generate(),\n              type: RxViewComponentType.Container,\n              propertiesByName: {\n                rowWrap: ContainerRowWrap.Sm,\n                columnCount: '2'\n              },\n              componentDefinitions: fieldComponentDefinitions.slice(index, index + 2),\n              layout: JSON.stringify({\n                outlets: [\n                  {\n                    name: RX_VIEW_DEFINITION.defaultOutletName,\n                    columns: [\n                      {\n                        children: [fieldComponentDefinition.guid],\n                        span: '6'\n                      },\n                      {\n                        children:\n                          fieldComponentDefinitions.length > index + 1\n                            ? [fieldComponentDefinitions[index + 1].guid]\n                            : [],\n                        span: '6'\n                      }\n                    ]\n                  }\n                ]\n              })\n            });\n          }\n          return fieldContainerComponentDefinitions;\n        },\n        []\n      );\n  }\n}\n"]}