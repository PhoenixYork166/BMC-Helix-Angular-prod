{"version":3,"file":"permission-editor.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/shared/components/permission-editor/permission-editor.component.ts","../../../../../../../libs/platform/shared/components/permission-editor/permission-editor.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AACnD,OAAO,EAAE,SAAS,EAAE,MAAM,QAAQ,CAAC;AACnC,OAAO,EAAE,aAAa,EAAE,MAAM,gCAAgC,CAAC;AAG/D,OAAO,EAAE,iCAAiC,EAAE,MAAM,+DAA+D,CAAC;AAClH,OAAO,EAAc,cAAc,EAAE,MAAM,wBAAwB,CAAC;;;;;AAcpE,MAAM,OAAO,2BAA4B,SAAQ,aAAgC;IAM/E,YAAoB,cAA8B;QAChD,KAAK,EAAE,CAAC;QADU,mBAAc,GAAd,cAAc,CAAgB;IAElD,CAAC;IAED,UAAU;QACR,IAAI,CAAC,cAAc;aAChB,SAAS,CAAC;YACT,OAAO,EAAE,iCAAiC;YAC1C,IAAI,EAAE;gBACJ,mBAAmB,EAAE,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC;gBAC1C,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI;gBACvB,eAAe,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe;gBAC7C,UAAU,EAAE,CAAC,SAAqB,EAAE,EAAE;oBACpC,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;gBAC7B,CAAC;aACF;SACF,CAAC;aACD,IAAI,CAAC,CAAC,IAAwC,EAAE,EAAE;YACjD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC;QAChC,CAAC,CAAC;aACD,KAAK,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,OAAO;;QACL,OAAO,OAAO,CAAC,MAAA,IAAI,CAAC,SAAS,0CAAE,OAAO,EAAE,CAAC,CAAC;IAC5C,CAAC;;wHAlCU,2BAA2B;4GAA3B,2BAA2B,+EAR3B;QACT;YACE,OAAO,EAAE,iBAAiB;YAC1B,WAAW,EAAE,2BAA2B;YACxC,KAAK,EAAE,IAAI;SACZ;KACF,iDCnBH,iyBA8BA;2FDTa,2BAA2B;kBAZvC,SAAS;mBAAC;oBACT,QAAQ,EAAE,sBAAsB;oBAChC,WAAW,EAAE,oCAAoC;oBACjD,SAAS,EAAE,CAAC,oCAAoC,CAAC;oBACjD,SAAS,EAAE;wBACT;4BACE,OAAO,EAAE,iBAAiB;4BAC1B,WAAW,6BAA6B;4BACxC,KAAK,EAAE,IAAI;yBACZ;qBACF;iBACF;qGAKC,OAAO;sBADN,KAAK","sourcesContent":["import { Component, Input } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { cloneDeep } from 'lodash';\nimport { ValueAccessor } from '../form-builder/value-accessor';\nimport { IPermissionEditorComponentOptions } from './interfaces/permission-editor-component-options.interface';\nimport { PermissionOwner } from './interfaces/permission.interfaces';\nimport { RxPermissionEditorDialogComponent } from './permission-editor-dialog/permission-editor-dialog.component';\nimport { IDialogApi, RxModalService } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-permission-editor',\n  templateUrl: './permission-editor.component.html',\n  styleUrls: ['./permission-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxPermissionEditorComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxPermissionEditorComponent extends ValueAccessor<PermissionOwner[]> {\n  private dialogApi: IDialogApi;\n\n  @Input()\n  options: IPermissionEditorComponentOptions;\n\n  constructor(private rxModalService: RxModalService) {\n    super();\n  }\n\n  openEditor(): void {\n    this.rxModalService\n      .openModal({\n        content: RxPermissionEditorDialogComponent,\n        data: {\n          assignedPermissions: cloneDeep(this.value),\n          type: this.options.type,\n          permissionScope: this.options.permissionScope,\n          onApiReady: (dialogApi: IDialogApi) => {\n            this.dialogApi = dialogApi;\n          }\n        }\n      })\n      .then((data: { permissions: PermissionOwner[] }) => {\n        this.dialogApi = null;\n        this.value = data.permissions;\n      })\n      .catch(() => {\n        this.dialogApi = null;\n      });\n  }\n\n  isDirty(): boolean {\n    return Boolean(this.dialogApi?.isDirty());\n  }\n}\n","<div class=\"d-flex justify-content-between align-items-center\">\n  <label class=\"form-control-label mb-0\">{{ options.label }}</label>\n\n  <button\n    adapt-button\n    type=\"button\"\n    class=\"p-0\"\n    btn-type=\"tertiary\"\n    rx-id=\"edit-button\"\n    *ngIf=\"!isDisabled\"\n    (click)=\"openEditor()\"\n  >\n    <span class=\"d-icon-pencil\"></span>\n    Edit\n  </button>\n</div>\n\n<div class=\"permissions\">\n  <div *ngIf=\"value?.length === 0\">\n    <h6 class=\"my-1\">None set (Admins only)</h6>\n  </div>\n\n  <div class=\"d-flex justify-content-between align-items-center pt-2\" *ngFor=\"let permission of value\">\n    <div class=\"permission-name\">\n      {{ permission.ownerId.name }}\n    </div>\n\n    <adapt-tag>{{ permission.type }}</adapt-tag>\n  </div>\n</div>\n"]}