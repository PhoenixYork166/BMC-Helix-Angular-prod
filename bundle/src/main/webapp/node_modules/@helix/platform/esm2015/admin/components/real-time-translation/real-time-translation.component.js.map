{"version":3,"file":"real-time-translation.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/admin/components/real-time-translation/real-time-translation.component.ts","../../../../../../../libs/platform/admin/components/real-time-translation/real-time-translation.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { head, castArray, isEmpty } from 'lodash';\nimport { RX_REAL_TIME_TRANSLATION } from './real-time-translation.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-real-time-translation',\n  templateUrl: './real-time-translation.component.html',\n  styleUrls: ['./real-time-translation.component.scss']\n})\nexport class RealTimeTranslationAdminComponent implements OnInit {\n  sourceLanguage: RxSelectOption[] = [];\n  targetLanguage: RxSelectOption[] = [];\n  sourceText: string;\n  translatedText: string;\n\n  supportedLocaleOptions: RxSelectOption[] = RX_REAL_TIME_TRANSLATION.supportedLocales.map((locale) => ({\n    ...locale,\n    name: this.translateService.instant(locale.name)\n  }));\n\n  @ViewChild('realTimeTranslationForm', { static: true, read: NgForm })\n  realTimeTranslationForm: NgForm;\n\n  constructor(private rxCommandFactoryService: RxCommandFactoryService, private translateService: TranslateService) {}\n\n  ngOnInit(): void {\n    this.reset();\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  reset(): void {\n    this.sourceText = this.translatedText = null;\n    this.sourceLanguage = [\n      {\n        ...RX_REAL_TIME_TRANSLATION.defaultSourceLocale,\n        name: this.translateService.instant(RX_REAL_TIME_TRANSLATION.defaultSourceLocale.name)\n      }\n    ];\n    this.targetLanguage = [\n      {\n        ...RX_REAL_TIME_TRANSLATION.defaultTargetLocale,\n        name: this.translateService.instant(RX_REAL_TIME_TRANSLATION.defaultTargetLocale.name)\n      }\n    ];\n\n    this.realTimeTranslationForm.form.markAsPristine();\n  }\n\n  translate(): void {\n    this.realTimeTranslationForm.form.markAsPristine();\n\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.cognitive.command.TranslateTextCommand')\n      .execute({\n        texts: castArray(this.sourceText),\n        sourceLanguage: head(this.sourceLanguage).id,\n        targetLanguage: head(this.targetLanguage).id\n      })\n      .subscribe((response) => {\n        this.translatedText = head(response);\n      });\n  }\n\n  clearTexts(): void {\n    this.sourceText = null;\n    this.translatedText = null;\n  }\n\n  isTranslateButtonDisabled(): boolean {\n    return this.realTimeTranslationForm.pristine || this.realTimeTranslationForm.invalid;\n  }\n\n  isClearButtonDisabled(): boolean {\n    return isEmpty(this.sourceText) && isEmpty(this.translatedText);\n  }\n\n  copyTranslatedText(): void {\n    const element = document.querySelector('[rx-id=\"translation\"] textarea') as HTMLInputElement;\n\n    element.select();\n    document.execCommand('copy');\n  }\n\n  isCopyButtonDisabled(): boolean {\n    return isEmpty(this.translatedText);\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.interactive-translation.header.title' | translate }}\"\n>\n  <form #realTimeTranslationForm=\"ngForm\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-select\n          name=\"sourceLanguage\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-language.label' | translate }}\"\n          rx-id=\"source-language\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"sourceLanguage\"\n          [options]=\"supportedLocaleOptions\"\n          [optionFormatter]=\"optionFormatter\"\n        ></adapt-rx-select>\n      </div>\n      <div class=\"col-md-6\">\n        <adapt-rx-select\n          name=\"targetLanguage\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.target-language.label' | translate }}\"\n          rx-id=\"target-language\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"targetLanguage\"\n          [options]=\"supportedLocaleOptions\"\n          [optionFormatter]=\"optionFormatter\"\n        ></adapt-rx-select>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-textarea\n          name=\"sourceText\"\n          required=\"true\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-text.label' | translate }}\"\n          placeholder=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-text.placeholder' | translate }}\"\n          rx-id=\"source-text\"\n          rows=\"18\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"sourceText\"\n        ></adapt-rx-textarea>\n\n        <div class=\"mb-2\">\n          <button\n            adapt-button\n            btn-type=\"primary\"\n            type=\"button\"\n            class=\"d-icon-file_arrow_right mr-2 mb-2\"\n            rx-id=\"translate-button\"\n            (click)=\"translate()\"\n            [disabled]=\"isTranslateButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.real-time-translation.translate.label' | translate }}\n          </button>\n\n          <button\n            type=\"button\"\n            adapt-button\n            btn-type=\"secondary\"\n            class=\"d-icon-minus_circle mb-2\"\n            rx-id=\"clear-button\"\n            (click)=\"clearTexts()\"\n            [disabled]=\"isClearButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.clear.label' | translate }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"col-md-6\">\n        <adapt-rx-textarea\n          name=\"translatedText\"\n          class=\"form-group d-block\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.translation.label' | translate }}\"\n          rx-id=\"translation\"\n          rows=\"18\"\n          [readonly]=\"true\"\n          [disabledStyleForReadonlyState]=\"true\"\n          [ngModel]=\"translatedText\"\n        ></adapt-rx-textarea>\n\n        <div class=\"mb-4\">\n          <button\n            adapt-button\n            btn-type=\"secondary\"\n            type=\"button\"\n            class=\"d-icon-files_copy_o\"\n            rx-id=\"copy-button\"\n            (click)=\"copyTranslatedText()\"\n            [disabled]=\"isCopyButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.copy.label' | translate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</rx-admin-settings>\n"]}