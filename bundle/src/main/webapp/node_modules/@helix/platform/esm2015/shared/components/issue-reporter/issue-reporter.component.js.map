{"version":3,"file":"issue-reporter.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/shared/components/issue-reporter/issue-reporter.component.ts","../../../../../../../libs/platform/shared/components/issue-reporter/issue-reporter.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAa,MAAM,eAAe,CAAC;AAC/D,OAAO,EAAE,WAAW,EAAa,UAAU,EAAE,MAAM,gBAAgB,CAAC;AACpE,OAAO,EAAE,cAAc,EAAE,cAAc,EAAE,MAAM,uBAAuB,CAAC;AACvE,OAAO,EAAE,aAAa,EAAE,MAAM,MAAM,CAAC;AAErC,OAAO,EAAE,sBAAsB,EAAE,MAAM,0BAA0B,CAAC;AAClE,OAAO,EAAE,SAAS,EAAE,MAAM,gBAAgB,CAAC;AAC3C,OAAO,EAA0B,qBAAqB,EAAE,MAAM,4BAA4B,CAAC;AAC3F,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;;;;;;;AAMtD,MAAM,OAAO,wBAAyB,SAAQ,YAAY;IAMxD,YACU,cAA8B,EAC9B,WAAwB,EACxB,sBAA8C,EAC9C,qBAA4C,EAC5C,gBAAkC,EAChC,QAAkB;QAE5B,KAAK,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;QAPxB,mBAAc,GAAd,cAAc,CAAgB;QAC9B,gBAAW,GAAX,WAAW,CAAa;QACxB,2BAAsB,GAAtB,sBAAsB,CAAwB;QAC9C,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAChC,aAAQ,GAAR,QAAQ,CAAU;QAXtB,eAAU,GAAG,IAAI,aAAa,CAAU,CAAC,CAAC,CAAC;QAcjD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;QAC1C,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC;IAC/B,CAAC;IAED,WAAW;QACT,IAAI,CAAC,sBAAsB;aACxB,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC;aACzD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aAChC,SAAS,CAAC,GAAG,EAAE;YACd,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAC1C,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,uEAAuE,CAAC,CACvG,CAAC;YAEF,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,QAAQ;QACd,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC;YACvC,IAAI,EAAE,CAAC,EAAE,EAAE,UAAU,CAAC,QAAQ,CAAC;SAChC,CAAC,CAAC;IACL,CAAC;IAED,MAAM;QACJ,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;;qHAjDU,wBAAwB;yGAAxB,wBAAwB,gFCfrC,0gCAyBA;2FDVa,wBAAwB;kBAJpC,SAAS;mBAAC;oBACT,QAAQ,EAAE,mBAAmB;oBAC7B,WAAW,EAAE,iCAAiC;iBAC/C","sourcesContent":["import { Component, Injector, OnDestroy } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { ReplaySubject } from 'rxjs';\n\nimport { RxIssueReporterService } from './issue-reporter.service';\nimport { takeUntil } from 'rxjs/operators';\nimport { IServerResponseMessage, RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-issue-reporter',\n  templateUrl: './issue-reporter.component.html'\n})\nexport class RxIssueReporterComponent extends RxModalClass implements OnDestroy {\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  data: IServerResponseMessage;\n  reportForm: FormGroup;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private formBuilder: FormBuilder,\n    private rxIssueReporterService: RxIssueReporterService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n    this.data = this.activeModalRef.getData();\n    this.initForm();\n  }\n\n  isDirty(): boolean {\n    return this.reportForm.dirty;\n  }\n\n  reportIssue(): void {\n    this.rxIssueReporterService\n      .reportIssue(this.reportForm.get('text').value, this.data)\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.issue-reporter.issue-report-submitted.message')\n        );\n\n        this.activeModalRef.close();\n      });\n  }\n\n  private initForm(): void {\n    this.reportForm = this.formBuilder.group({\n      text: ['', Validators.required]\n    });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<form [formGroup]=\"reportForm\" autocomplete=\"off\" (ngSubmit)=\"reportIssue()\" class=\"modal-body\">\n  <div class=\"form-group\">\n    <p>\n      {{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.issue-report-prepared.label' | translate }}\n    </p>\n    <p>\n      {{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.describe-issue-details.label' | translate }}\n    </p>\n\n    <adapt-rx-textarea\n      placeholder=\"{{ 'com.bmc.arsys.rx.client.issue-reporter.dialog.description.placeholder' | translate }}\"\n      rows=\"15\"\n      formControlName=\"text\"\n    >\n    </adapt-rx-textarea>\n  </div>\n\n  <button adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"cancel()\" class=\"ml-3 float-right\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n\n  <button adapt-button btn-type=\"primary\" type=\"submit\" [disabled]=\"reportForm.invalid\" class=\"float-right\">\n    {{ 'com.bmc.arsys.rx.client.issue-reporter.submit-report.label' | translate }}\n  </button>\n</form>\n"]}