{"version":3,"file":"unique-validator.directive.js","sourceRoot":"","sources":["../../../../../../libs/platform/utils/unique-validator/unique-validator.directive.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAE,MAAM,eAAe,CAAC;AACjD,OAAO,EAAmB,aAAa,EAA+B,MAAM,gBAAgB,CAAC;AAE7F,OAAO,EAAE,QAAQ,EAAE,MAAM,QAAQ,CAAC;;AAMlC,MAAM,OAAO,iBAAiB;IAI5B,QAAQ,CAAC,OAAwB;QAC/B,IAAI,MAAM,GAAG,IAAI,CAAC;QAElB,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,KAAK,IAAI,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,EAAE;YAClF,MAAM,GAAG;gBACP,KAAK,EAAE;oBACL,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,YAAY;iBACpC;aACF,CAAC;SACH;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;;8GAhBU,iBAAiB;kGAAjB,iBAAiB,uEAFjB,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,WAAW,EAAE,iBAAiB,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;2FAEzE,iBAAiB;kBAJ7B,SAAS;mBAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,SAAS,EAAE,CAAC,EAAE,OAAO,EAAE,aAAa,EAAE,WAAW,mBAAmB,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;iBACrF;8BAGC,QAAQ;sBADP,KAAK","sourcesContent":["import { Directive, Input } from '@angular/core';\nimport { AbstractControl, NG_VALIDATORS, ValidationErrors, Validator } from '@angular/forms';\nimport { IUniqueValidatorConfig } from './unique-validator.types';\nimport { includes } from 'lodash';\n\n@Directive({\n  selector: '[rxUnique]',\n  providers: [{ provide: NG_VALIDATORS, useExisting: RxUniqueValidator, multi: true }]\n})\nexport class RxUniqueValidator implements Validator {\n  @Input()\n  rxUnique!: IUniqueValidatorConfig;\n\n  validate(control: AbstractControl): ValidationErrors | null {\n    let result = null;\n\n    if (control.dirty && control.value && includes(this.rxUnique.items, control.value)) {\n      result = {\n        error: {\n          message: this.rxUnique.errorMessage\n        }\n      };\n    }\n\n    return result;\n  }\n}\n"]}