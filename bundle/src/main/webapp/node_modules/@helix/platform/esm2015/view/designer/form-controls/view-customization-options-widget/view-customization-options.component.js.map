{"version":3,"file":"view-customization-options.component.js","sourceRoot":"","sources":["../../../../../../../../libs/platform/view/designer/form-controls/view-customization-options-widget/view-customization-options.component.ts","../../../../../../../../libs/platform/view/designer/form-controls/view-customization-options-widget/view-customization-options.component.html"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,KAAK,EAAqB,MAAM,eAAe,CAAC;AACpE,OAAO,EAAE,gBAAgB,EAAE,MAAM,qBAAqB,CAAC;AACvD,OAAO,EAAE,kBAAkB,EAAE,MAAM,mCAAmC,CAAC;AACvE,OAAO,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,MAAM,CAAC;AACpD,OAAO,EAIL,gBAAgB,EACjB,MAAM,4BAA4B,CAAC;AACpC,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,MAAM,gBAAgB,CAAC;;;;;;;AAM3D,MAAM,OAAO,mCAAmC;IAS9C,YACU,kBAAsC,EACtC,gBAAkC,EAClC,gBAAkC;QAFlC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,qBAAgB,GAAhB,gBAAgB,CAAkB;QALpC,eAAU,GAAG,IAAI,aAAa,CAAU,CAAC,CAAC,CAAC;IAMhD,CAAC;IAEJ,QAAQ;QACN,aAAa,CAAC;YACZ,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,cAAc,CAAC;YAC5D,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,OAAO,CAAC;YACrD,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC;YAC9D,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,mBAAmB,CAAC;YACjE,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,gBAAgB,CAAC;SAC/D,CAAC;aACC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;aACpF,SAAS,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,KAAK,EAAE,cAAc,EAAE,iBAAiB,EAAE,cAAc,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE;YACnG,IAAI,CAAC,cAAc,GAAG;gBACpB,YAAY;gBACZ,KAAK;gBACL,cAAc;gBACd,iBAAiB;gBACjB,UAAU,EAAE,CAAC,IAAI,CAAC,gBAAgB,CAAC,sBAAsB,CAAC,cAAc,EAAE,SAAS,CAAC;gBACpF,yBAAyB,EAAE,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,+CAA+C,CAAC,CAAC,WAAW,EAAE;aACxH,CAAC;QACJ,CAAC,CAAC,CAAC;IACP,CAAC;IAED,WAAW;QACT,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3B,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;IAC7B,CAAC;IAED,gBAAgB,CAAC,oBAAgD;QAC/D,IAAI,CAAC,kBAAkB,CAAC,oBAAoB,CAAC,oBAAoB,CAAC,CAAC;IACrE,CAAC;;gIA3CU,mCAAmC;oHAAnC,mCAAmC,qGChBhD,gLAKA;2FDWa,mCAAmC;kBAJ/C,SAAS;mBAAC;oBACT,QAAQ,EAAE,+BAA+B;oBACzC,WAAW,EAAE,6CAA6C;iBAC3D;uKAGC,OAAO;sBADN,KAAK","sourcesContent":["import { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ViewDesignerFacade } from '../../+state/view-designer.facade';\nimport { combineLatest, ReplaySubject } from 'rxjs';\nimport {\n  ICustomizationControlValue,\n  ICustomizationOptions,\n  IFormWidgetComponent,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport { takeUntil, withLatestFrom } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-view-customization-options',\n  templateUrl: './view-customization-options.component.html'\n})\nexport class RxViewCustomizationOptionsComponent implements OnInit, OnDestroy, IFormWidgetComponent {\n  @Input()\n  options;\n\n  value: ICustomizationControlValue;\n  controlOptions: ICustomizationOptions;\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(\n    private viewDesignerFacade: ViewDesignerFacade,\n    private rxOverlayService: RxOverlayService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    combineLatest([\n      this.viewDesignerFacade.getViewPropertyValue('allowOverlay'),\n      this.viewDesignerFacade.getViewPropertyValue('scope'),\n      this.viewDesignerFacade.getViewPropertyValue('overlayGroupId'),\n      this.viewDesignerFacade.getViewPropertyValue('overlayDescriptor'),\n      this.viewDesignerFacade.getViewPropertyValue('lastUpdateTime')\n    ])\n      .pipe(withLatestFrom(this.viewDesignerFacade.viewModel$), takeUntil(this.destroyed$))\n      .subscribe(([[allowOverlay, scope, overlayGroupId, overlayDescriptor, lastUpdateTime], viewModel]) => {\n        this.controlOptions = {\n          allowOverlay,\n          scope,\n          overlayGroupId,\n          overlayDescriptor,\n          isDisabled: !this.rxOverlayService.isCustomizationEnabled('allowOverlay', viewModel),\n          definitionTypeDisplayName: this.translateService.instant('com.bmc.arsys.rx.client.view-definition.label').toLowerCase()\n        };\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  setCustomization(customizationOptions: ICustomizationControlValue): void {\n    this.viewDesignerFacade.updateViewProperties(customizationOptions);\n  }\n}\n","<rx-scope-customization-control\n  [options]=\"controlOptions\"\n  [(ngModel)]=\"value\"\n  (ngModelChange)=\"setCustomization($event)\"\n></rx-scope-customization-control>\n"]}