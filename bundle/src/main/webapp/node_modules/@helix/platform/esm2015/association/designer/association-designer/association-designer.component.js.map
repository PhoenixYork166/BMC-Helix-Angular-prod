{"version":3,"file":"association-designer.component.js","sourceRoot":"","sources":["../../../../../../../libs/platform/association/designer/association-designer/association-designer.component.ts","../../../../../../../libs/platform/association/designer/association-designer/association-designer.component.html"],"names":[],"mappings":"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","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  SimpleChanges\n} from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { AdaptRxControlLabelTooltip, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  IAssociationDefinition,\n  ICardinality,\n  RX_ASSOCIATION_DEFINITION,\n  RxAssociationCardinalityPipe\n} from '@helix/platform/association/api';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nimport {\n  ICustomizationOptions,\n  IDesignerConfiguration,\n  IFormBuilderEvent,\n  RxDefinitionNameService,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService,\n  Tooltip\n} from '@helix/platform/shared/api';\nimport {\n  IDefinitionPickerComponentOptions,\n  IRevertCustomizationOptions,\n  RX_REVERT_CUSTOMIZATION,\n  RxDefinitionPickerScope,\n  RxDefinitionPickerType\n} from '@helix/platform/shared/components';\nimport {\n  IBreadcrumbItem,\n  IValidationIssue,\n  IValidationIssueSection,\n  ValidationIssueType\n} from '@helix/platform/ui-kit';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, isEmpty, isEqual, some, trim } from 'lodash';\nimport { BehaviorSubject, combineLatest, Observable, of, ReplaySubject } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  skip,\n  startWith,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { AssociationDesignerService } from '../association-designer.service';\nimport { IAssociationDefinitionModel } from '../association-designer.types';\nimport * as AssociationDesignerActions from './+state/association-designer.actions';\nimport {\n  bundleIdSelector,\n  definitionModelFromDefinitionSelector,\n  definitionModelSelector,\n  isDesignModeSelector,\n  isDirtySelector,\n  originalDefinitionSelector,\n  savedDefinitionNameSelector\n} from './+state/association-designer.selectors';\n\n@Component({\n  selector: 'rx-association-designer',\n  templateUrl: './association-designer.component.html',\n  styleUrls: ['./association-designer.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class RxAssociationDesignerComponent implements OnInit, OnChanges, OnDestroy {\n  @Input()\n  configuration: IDesignerConfiguration;\n\n  @Output()\n  definitionSaved: EventEmitter<string> = new EventEmitter();\n\n  @Output()\n  definitionErrorLoading: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  closeDesigner: EventEmitter<void> = new EventEmitter<void>();\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  firstRecordDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    availableDefinitionPickerStates: {\n      definitionButtonsGroups: [RxDefinitionPickerScope.Bundle, RxDefinitionPickerScope.All],\n      search: RxDefinitionPickerScope.All\n    },\n    definitionType: RxDefinitionPickerType.RegularDataRecord,\n    label: this.translateService.instant('com.bmc.arsys.rx.client.association-designer.first-record-field.label'),\n    required: true,\n    tooltip: new Tooltip(\n      this.translateService.instant('com.bmc.arsys.rx.client.association-designer.first-record-field.tooltip')\n    )\n  };\n\n  secondRecordDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    availableDefinitionPickerStates: {\n      definitionButtonsGroups: [RxDefinitionPickerScope.Bundle, RxDefinitionPickerScope.Rx],\n      search: RxDefinitionPickerScope.Rx\n    },\n    definitionType: RxDefinitionPickerType.RegularDataRecord,\n    label: this.translateService.instant('com.bmc.arsys.rx.client.association-designer.second-record-field.label'),\n    required: true,\n    tooltip: new Tooltip(\n      this.translateService.instant('com.bmc.arsys.rx.client.association-designer.second-record-field.tooltip')\n    )\n  };\n\n  firstRecordDefinitionRoleTooltip: AdaptRxControlLabelTooltip = new Tooltip(\n    this.translateService.instant('com.bmc.arsys.rx.client.association-designer.first-record-role-field.tooltip')\n  );\n\n  secondRecordDefinitionRoleTooltip: AdaptRxControlLabelTooltip = new Tooltip(\n    this.translateService.instant('com.bmc.arsys.rx.client.association-designer.second-record-role-field.tooltip')\n  );\n\n  cascadeDeleteTooltip: AdaptRxControlLabelTooltip = new Tooltip(\n    this.translateService.instant('com.bmc.arsys.rx.client.association-designer.should-cascade-delete.tooltip')\n  );\n\n  cardinalities: ICardinality[] = Object.values(RX_ASSOCIATION_DEFINITION.cardinality);\n  validDefinitionNameRegex = RX_RECORD_DEFINITION.validDefinitionNameRegex;\n\n  associationForm: FormGroup = new FormGroup({\n    name: new FormControl(''),\n    description: new FormControl(),\n    nodeAId: new FormControl(),\n    nodeBId: new FormControl(),\n    nodeAName: new FormControl(),\n    nodeBName: new FormControl(),\n    nodeAModality: new FormControl(),\n    cardinality: new FormControl([RX_ASSOCIATION_DEFINITION.cardinality.oneToOne]),\n    shouldCascadeDelete: new FormControl(),\n    isEnabled: new FormControl(true),\n    customizationOptions: new FormControl()\n  });\n\n  private isSavingInProgressSubject = new BehaviorSubject<boolean>(false);\n  private isDesignMode$ = this.store$.select(isDesignModeSelector);\n  private isDirty$: Observable<boolean> = this.store$.select(isDirtySelector);\n  private originalDefinition$ = this.store$.select(originalDefinitionSelector);\n\n  private bundleFriendlyName$ = this.store$\n    .select(bundleIdSelector)\n    .pipe(switchMap((bundleId: string) => this.rxGlobalCacheService.getBundleFriendlyName(bundleId)));\n\n  private definitionModelFromDefinition$: Observable<IAssociationDefinitionModel> = this.store$.select(\n    definitionModelFromDefinitionSelector\n  );\n\n  private definitionModel$: Observable<IAssociationDefinitionModel> = this.store$.select(definitionModelSelector).pipe(\n    tap((definitionModel: IAssociationDefinitionModel) => {\n      this.associationForm.patchValue(\n        {\n          name: this.rxDefinitionNameService.getDisplayName(definitionModel.name),\n          description: definitionModel.description,\n          nodeAId: definitionModel.nodeAId,\n          nodeBId: definitionModel.nodeBId,\n          nodeAName: definitionModel.nodeAName,\n          nodeBName: definitionModel.nodeBName,\n          nodeAModality: definitionModel.nodeAModality === RX_ASSOCIATION_DEFINITION.modality.required,\n          cardinality: [this.getCardinalityByValue(definitionModel.cardinality[0].value)],\n          shouldCascadeDelete: definitionModel.shouldCascadeDelete,\n          isEnabled: definitionModel.isEnabled,\n          customizationOptions: {\n            allowOverlay: definitionModel.customizationOptions.allowOverlay,\n            scope: definitionModel.customizationOptions.scope\n          }\n        },\n        { emitEvent: false }\n      );\n    }),\n    shareReplay(1)\n  );\n\n  private isExistingDefinition$ = this.definitionModelFromDefinition$.pipe(\n    map((definitionModel) => Boolean(definitionModel.lastUpdateTime)),\n    shareReplay(1)\n  );\n\n  private isCustomizationEnabled$ = this.definitionModelFromDefinition$.pipe(\n    map((definitionModel) => this.rxOverlayService.isCustomizationEnabled(null, definitionModel))\n  );\n\n  private scopeCustomizationControlOptions$: Observable<ICustomizationOptions> =\n    this.definitionModelFromDefinition$.pipe(\n      map((definitionModel) => ({\n        allowOverlay: definitionModel.customizationOptions.allowOverlay,\n        scope: definitionModel.customizationOptions.scope,\n        overlayGroupId: definitionModel.overlayGroupId,\n        overlayDescriptor: definitionModel.overlayDescriptor,\n        isDisabled: !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definitionModel),\n        definitionTypeDisplayName: this.translateService\n          .instant('com.bmc.arsys.rx.client.common.association-definition.label')\n          .toLowerCase()\n      }))\n    );\n\n  private revertCustomizationControlOptions$: Observable<IRevertCustomizationOptions> =\n    this.definitionModelFromDefinition$.pipe(\n      map((definitionModel) => ({\n        allowOverlay: definitionModel.customizationOptions.allowOverlay,\n        scope: definitionModel.customizationOptions.scope,\n        overlayGroupId: definitionModel.overlayGroupId,\n        overlayDescriptor: definitionModel.overlayDescriptor\n      }))\n    );\n\n  private validationIssues$: Observable<IValidationIssueSection[]> = combineLatest([\n    this.definitionModel$,\n    this.isExistingDefinition$\n  ]).pipe(\n    map(([definitionModel, isExistingDefinition]) => this.validate(definitionModel, isExistingDefinition)),\n    shareReplay(1)\n  );\n\n  private definitionFromDefinitionModel$: Observable<IAssociationDefinition> = this.definitionModel$.pipe(\n    map((definitionModel) => this.associationDesignerService.getDefinitionFromDefinitionModel(definitionModel))\n  );\n\n  private definitionForJsonViewer$: Observable<IAssociationDefinition> = this.isDesignMode$.pipe(\n    switchMap((isDesignMode: boolean) =>\n      isDesignMode\n        ? of(null)\n        : combineLatest([this.definitionFromDefinitionModel$, this.originalDefinition$]).pipe(\n            map(([definitionFromDefinitionModel, originalDefinition]) => ({\n              ...originalDefinition,\n              ...definitionFromDefinitionModel\n            }))\n          )\n    )\n  );\n\n  private areNewDefinitionsAllowed$ = this.store$\n    .select(bundleIdSelector)\n    .pipe(switchMap((bundleId) => this.rxOverlayService.areNewDefinitionsAllowed(bundleId)));\n\n  private isReadOnly$ = this.definitionFromDefinitionModel$.pipe(\n    filter((definition) => !!definition.lastUpdateTime),\n    withLatestFrom(this.areNewDefinitionsAllowed$),\n    map(\n      ([definition, areNewDefinitionsAllowed]) =>\n        !areNewDefinitionsAllowed || !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definition)\n    ),\n    tap((isReadOnly: boolean) => {\n      if (isReadOnly) {\n        this.rxNotificationService.addWarningMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.designer.read-only-definition-warning.message')\n        );\n      }\n    }),\n    startWith(false),\n    shareReplay(1)\n  );\n\n  private hasValidationErrors$: Observable<boolean> = this.validationIssues$.pipe(\n    map((issueSections) =>\n      some(issueSections, {\n        issues: [{ type: ValidationIssueType.Error }]\n      })\n    )\n  );\n\n  private cascadeDeleteLabel$: Observable<string> = this.definitionModel$.pipe(\n    map((model: IAssociationDefinitionModel) =>\n      this.translateService.instant('com.bmc.arsys.rx.client.association-designer.should-cascade-delete.label', {\n        firstRecordDefinitionName: this.rxDefinitionNameService.getDisplayName(model.nodeAId),\n        firstRecordDefinitionRole: model.nodeAName\n          ? this.translateService.instant('com.bmc.arsys.rx.client.association-designer.node-name.label', {\n              nodeName: model.nodeAName\n            })\n          : '',\n        secondRecordDefinitionName: this.rxDefinitionNameService.getDisplayName(model.nodeBId),\n        secondRecordDefinitionRole: model.nodeBName\n          ? this.translateService.instant('com.bmc.arsys.rx.client.association-designer.node-name.label', {\n              nodeName: model.nodeBName\n            })\n          : ''\n      })\n    )\n  );\n\n  private recordAssociationLabel$: Observable<string> = this.definitionModel$.pipe(\n    map((model: IAssociationDefinitionModel) =>\n      this.translateService.instant('com.bmc.arsys.rx.client.association-designer.require-record-association.label', {\n        firstRecordDefinitionName: this.rxDefinitionNameService.getDisplayName(model.nodeAId),\n        firstRecordDefinitionRole: model.nodeAName\n          ? this.translateService.instant('com.bmc.arsys.rx.client.association-designer.node-name.label', {\n              nodeName: model.nodeAName\n            })\n          : '',\n        secondRecordDefinitionName: this.rxDefinitionNameService.getDisplayName(model.nodeBId),\n        secondRecordDefinitionRole: model.nodeBName\n          ? this.translateService.instant('com.bmc.arsys.rx.client.association-designer.node-name.label', {\n              nodeName: model.nodeBName\n            })\n          : ''\n      })\n    )\n  );\n\n  private isModalityDisabled$: Observable<boolean> = this.definitionModel$.pipe(\n    withLatestFrom(this.isCustomizationEnabled$),\n    map(\n      ([{ shouldCascadeDelete, nodeAId, nodeBId }, isCustomizationEnabled]) =>\n        !isCustomizationEnabled || !(shouldCascadeDelete && nodeAId && nodeBId)\n    )\n  );\n\n  private isSaveButtonDisabled$: Observable<boolean> = combineLatest([\n    this.isDirty$,\n    this.hasValidationErrors$,\n    this.isReadOnly$,\n    this.isSavingInProgressSubject\n  ]).pipe(\n    map(\n      ([isDirty, hasValidationErrors, isReadOnly, isSavingInProgress]) =>\n        !isDirty || hasValidationErrors || isReadOnly || isSavingInProgress\n    )\n  );\n\n  private breadcrumbItems$: Observable<IBreadcrumbItem[]> = this.definitionModel$.pipe(\n    filter(Boolean),\n    map((definitionModel: IAssociationDefinitionModel) => {\n      const definitionName = this.rxDefinitionNameService.getDisplayName(definitionModel.name);\n\n      return [\n        {\n          label:\n            definitionName ||\n            `<${this.translateService.instant('com.bmc.arsys.rx.client.association-designer.new-association.label')}>`,\n          data: {}\n        }\n      ];\n    })\n  );\n\n  private canCascadeDelete$: Observable<boolean> = this.definitionModel$.pipe(\n    takeUntil(this.destroyed$),\n    map(\n      (definitionModel: IAssociationDefinitionModel) =>\n        // If association type is many to many shouldCascadeDelete should be set to false\n        definitionModel.cardinality[0].value !== RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value\n    )\n  );\n\n  vm$ = combineLatest([\n    this.breadcrumbItems$,\n    this.bundleFriendlyName$,\n    this.canCascadeDelete$,\n    this.cascadeDeleteLabel$,\n    this.hasValidationErrors$,\n    this.isExistingDefinition$,\n    this.isModalityDisabled$,\n    this.isSaveButtonDisabled$,\n    this.recordAssociationLabel$,\n    this.revertCustomizationControlOptions$,\n    this.scopeCustomizationControlOptions$,\n    this.validationIssues$,\n    this.definitionForJsonViewer$,\n    this.isReadOnly$\n  ]).pipe(\n    map(\n      ([\n        breadcrumbItems,\n        bundleFriendlyName,\n        canCascadeDelete,\n        cascadeDeleteLabel,\n        hasValidationErrors,\n        isExistingDefinition,\n        isModalityDisabled,\n        isSaveButtonDisabled,\n        recordAssociationLabel,\n        revertCustomizationControlOptions,\n        scopeCustomizationControlOptions,\n        validationIssues,\n        definitionForJsonViewer,\n        isReadOnly\n      ]) => ({\n        breadcrumbItems,\n        bundleFriendlyName,\n        canCascadeDelete,\n        cascadeDeleteLabel,\n        hasValidationErrors,\n        isExistingDefinition,\n        isModalityDisabled,\n        isSaveButtonDisabled,\n        recordAssociationLabel,\n        revertCustomizationControlOptions,\n        scopeCustomizationControlOptions,\n        validationIssues,\n        definitionForJsonViewer,\n        isReadOnly\n      })\n    )\n  );\n\n  constructor(\n    private store$: Store<any>,\n    private associationDesignerService: AssociationDesignerService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxAssociationCardinalityPipe: RxAssociationCardinalityPipe,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private translateService: TranslateService,\n    private rxOverlayService: RxOverlayService,\n    private rxNotificationService: RxNotificationService,\n    private renderer: Renderer2\n  ) {}\n\n  ngOnInit(): void {\n    this.associationForm.valueChanges\n      .pipe(\n        distinctUntilChanged(isEqual),\n        withLatestFrom(this.store$.select(bundleIdSelector)),\n        tap(([formValue, bundleId]) => {\n          this.store$.dispatch(\n            AssociationDesignerActions.updateDefinitionModelFromDesigner({\n              definitionModelFromDesigner: {\n                customizationOptions: formValue.customizationOptions,\n                description: formValue.description,\n                isEnabled: formValue.isEnabled,\n                nodeAId: formValue.nodeAId,\n                nodeAName: formValue.nodeAName,\n                nodeBId: formValue.nodeBId,\n                nodeBName: formValue.nodeBName,\n                shouldCascadeDelete: formValue.shouldCascadeDelete,\n                name: this.rxDefinitionNameService.getDefinitionName(bundleId, formValue.name),\n                cardinality: formValue.cardinality,\n                nodeAModality: formValue.nodeAModality\n                  ? RX_ASSOCIATION_DEFINITION.modality.required\n                  : RX_ASSOCIATION_DEFINITION.modality.optional\n              }\n            })\n          );\n        })\n      )\n      .subscribe();\n\n    this.definitionModel$\n      .pipe(\n        distinctUntilChanged(\n          (prev, cur) =>\n            prev.nodeBId === cur.nodeBId &&\n            prev.nodeAName === cur.nodeAName &&\n            prev.shouldCascadeDelete === cur.shouldCascadeDelete &&\n            prev.nodeAModality === cur.nodeAModality\n        ),\n        filter(\n          (definitionModel: IAssociationDefinitionModel) =>\n            !definitionModel.lastUpdateTime &&\n            !!definitionModel.nodeBId &&\n            definitionModel.cardinality[0].value !== RX_ASSOCIATION_DEFINITION.cardinality.manyToMany.value\n        ),\n        switchMap((definitionModel: IAssociationDefinitionModel) =>\n          this.associationDesignerService.getForeignKeyFieldId(definitionModel)\n        ),\n        withLatestFrom(this.definitionModel$),\n        tap(([fieldId, definitionModel]) => {\n          if (fieldId) {\n            this.store$.dispatch(\n              AssociationDesignerActions.updateDefinitionModelFromDesigner({\n                definitionModelFromDesigner: { ...definitionModel, nodeBKeys: [fieldId] }\n              })\n            );\n          } else {\n            this.store$.dispatch(\n              AssociationDesignerActions.updateDefinitionModelFromDesigner({\n                definitionModelFromDesigner: { ...definitionModel, nodeBKeys: [RX_RECORD_DEFINITION.coreFieldIds.id] }\n              })\n            );\n          }\n        }),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe();\n\n    this.associationForm\n      .get('shouldCascadeDelete')\n      .valueChanges.pipe(\n        takeUntil(this.destroyed$),\n        tap((shouldCascadeDelete) => {\n          if (!shouldCascadeDelete) {\n            this.associationForm.patchValue({\n              nodeAModality: false\n            });\n          }\n        })\n      )\n      .subscribe();\n\n    this.store$\n      .select(savedDefinitionNameSelector)\n      .pipe(skip(1), takeUntil(this.destroyed$))\n      .subscribe((savedDefinitionName: string) => {\n        this.definitionSaved.emit(savedDefinitionName);\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.configuration.currentValue) {\n      this.store$.dispatch(AssociationDesignerActions.init({ payload: this.configuration }));\n    }\n  }\n\n  canDeactivate(): boolean {\n    let canDeactivate = true;\n\n    this.isDirty$.pipe(take(1)).subscribe((isDirty) => {\n      canDeactivate = !isDirty;\n    });\n\n    return canDeactivate;\n  }\n\n  toggleDesignMode(): void {\n    this.store$.dispatch(AssociationDesignerActions.toggleDesignMode());\n  }\n\n  onCorrectIssue(validationIssue: IValidationIssue): void {\n    if (validationIssue.data.type === 'input') {\n      this.renderer.selectRootElement(`[rx-id=\"${validationIssue.data.id}\"] input`, true).focus();\n    } else {\n      this.renderer.selectRootElement(`[rx-id=\"${validationIssue.data.id}\"] [rx-id=\"toggle-button\"]`, true).click();\n    }\n  }\n\n  cardinalityOptionsFormatter = (option: RxSelectOption): string => {\n    return this.rxAssociationCardinalityPipe.transform(option.value);\n  };\n\n  private validate(\n    definitionModel: IAssociationDefinitionModel,\n    isExistingDefinition: boolean\n  ): IValidationIssueSection[] {\n    const validationIssues: IValidationIssue[] = [];\n\n    if (!isExistingDefinition) {\n      if (isEmpty(trim(this.rxDefinitionNameService.getDisplayName(definitionModel.name)))) {\n        validationIssues.push({\n          type: ValidationIssueType.Error,\n          description: this.translateService.instant(\n            'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n            {\n              propertyName: this.translateService.instant(\n                'com.bmc.arsys.rx.client.association-designer.name-field.label'\n              )\n            }\n          ),\n          data: {\n            id: 'name',\n            type: 'input'\n          }\n        });\n      }\n\n      if (definitionModel.name && !RX_RECORD_DEFINITION.validFullDefinitionName.test(definitionModel.name)) {\n        validationIssues.push({\n          type: ValidationIssueType.Error,\n          description: this.translateService.instant(\n            'com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message',\n            {\n              propertyName: this.translateService.instant(\n                'com.bmc.arsys.rx.client.association-designer.name-field.label'\n              )\n            }\n          ),\n          data: {\n            id: 'name',\n            type: 'input'\n          }\n        });\n      }\n\n      if (isEmpty(definitionModel.nodeAId)) {\n        validationIssues.push({\n          type: ValidationIssueType.Error,\n          description: this.translateService.instant(\n            'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n            {\n              propertyName: this.translateService.instant(\n                'com.bmc.arsys.rx.client.association-designer.first-record-field.label'\n              )\n            }\n          ),\n          data: {\n            id: 'first-record',\n            type: 'definition-picker'\n          }\n        });\n      }\n\n      if (isEmpty(definitionModel.nodeBId)) {\n        validationIssues.push({\n          type: ValidationIssueType.Error,\n          description: this.translateService.instant(\n            'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n            {\n              propertyName: this.translateService.instant(\n                'com.bmc.arsys.rx.client.association-designer.second-record-field.label'\n              )\n            }\n          ),\n          data: {\n            id: 'second-record',\n            type: 'definition-picker'\n          }\n        });\n      }\n    }\n\n    return validationIssues.length\n      ? [\n          {\n            title: this.translateService.instant('com.bmc.arsys.rx.client.association-designer.new-association.label'),\n            issues: validationIssues\n          }\n        ]\n      : [];\n  }\n\n  onRevertCustomization(event: IFormBuilderEvent): void {\n    if (event.type === RX_REVERT_CUSTOMIZATION.events.revertCustomization) {\n      this.store$.dispatch(AssociationDesignerActions.revertCustomization());\n    }\n  }\n\n  private getCardinalityByValue(value: string): ICardinality {\n    return find(this.cardinalities, { value: value } as ICardinality);\n  }\n\n  saveDefinition(): void {\n    this.store$.dispatch(AssociationDesignerActions.saveDefinition());\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.isSavingInProgressSubject.complete();\n    this.store$.dispatch(AssociationDesignerActions.destroy());\n  }\n}\n","<ng-container *ngIf=\"vm$ | async as vm\">\n  <rx-designer-header\n    [bundleName]=\"vm.bundleFriendlyName\"\n    [breadcrumbItems]=\"vm.breadcrumbItems\"\n    [isDesignMode]=\"!vm.definitionForJsonViewer\"\n    [isSaveButtonDisabled]=\"vm.isSaveButtonDisabled\"\n    (toggleDesignMode)=\"toggleDesignMode()\"\n    (save)=\"saveDefinition()\"\n    (closeDesigner)=\"closeDesigner.emit()\"\n  ></rx-designer-header>\n\n  <div class=\"rx-designer-component\" [hidden]=\"vm.definitionForJsonViewer\">\n    <adapt-sidebar position=\"right\" panelWidth=\"280px\" [openedId]=\"0\">\n      <adapt-sidebar-item\n        headerTitle=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        tooltipText=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        rx-id=\"validation-issues\"\n        [iconClass]=\"vm.hasValidationErrors ? 'd-icon-exclamation_triangle text-danger' : 'd-icon-exclamation_triangle'\"\n      >\n        <rx-validation-issues\n          [definitionTypeDisplayName]=\"'com.bmc.arsys.rx.client.common.association-definition.label' | translate\"\n          (correctIssue)=\"onCorrectIssue($event)\"\n          [issueSections]=\"vm.validationIssues\"\n        ></rx-validation-issues>\n      </adapt-sidebar-item>\n\n      <div class=\"main rx-designer-container h-100\">\n        <h1 class=\"mt-0\">\n          {{\n            vm.isExistingDefinition\n              ? ('com.bmc.arsys.rx.client.association-designer.edit-association.title' | translate)\n              : ('com.bmc.arsys.rx.client.association-designer.create-association.title' | translate)\n          }}\n        </h1>\n\n        <form class=\"rx-association-designer-form d-block\" [formGroup]=\"associationForm\">\n          <adapt-rx-textfield\n            class=\"d-block form-group\"\n            formControlName=\"name\"\n            label=\"{{ 'com.bmc.arsys.rx.client.association-designer.name-field.label' | translate }}\"\n            id=\"association-name\"\n            rx-id=\"name\"\n            [disabledStyleForReadonlyState]=\"true\"\n            [readonly]=\"vm.isExistingDefinition\"\n            [required]=\"true\"\n          ></adapt-rx-textfield>\n\n          <adapt-rx-textarea\n            rx-id=\"description\"\n            class=\"d-block form-group\"\n            [label]=\"'com.bmc.arsys.rx.client.common.description.label' | translate\"\n            formControlName=\"description\"\n            [disabled]=\"vm.isReadOnly\"\n          ></adapt-rx-textarea>\n\n          <div class=\"d-flex justify-center align-items-center w-100\">\n            <rx-definition-picker\n              rx-id=\"first-record\"\n              [options]=\"firstRecordDefinitionPickerOptions\"\n              [formControl]=\"associationForm.get('nodeAId')\"\n              [isDisabled]=\"vm.isExistingDefinition\"\n              required=\"true\"\n              class=\"form-group d-block flex-grow-1 rx-association-input\"\n            ></rx-definition-picker>\n\n            <div class=\"rx-association-designer-arrow-1\"></div>\n\n            <adapt-rx-select\n              rx-id=\"cardinality\"\n              [label]=\"'com.bmc.arsys.rx.client.association-designer.cardinality-field.label' | translate\"\n              [options]=\"cardinalities\"\n              [formControl]=\"associationForm.get('cardinality')\"\n              [optionFormatter]=\"cardinalityOptionsFormatter\"\n              [disabled]=\"vm.isExistingDefinition\"\n              class=\"form-group d-block flex-grow-1 rx-association-input\"\n            ></adapt-rx-select>\n\n            <div class=\"rx-association-designer-arrow-2\"></div>\n\n            <rx-definition-picker\n              rx-id=\"second-record\"\n              [options]=\"secondRecordDefinitionPickerOptions\"\n              [formControl]=\"associationForm.get('nodeBId')\"\n              [isDisabled]=\"vm.isExistingDefinition\"\n              required=\"true\"\n              class=\"form-group d-block flex-grow-1 rx-association-input\"\n            ></rx-definition-picker>\n          </div>\n\n          <div class=\"d-flex justify-center align-items-center w-100\">\n            <adapt-rx-textfield\n              rx-id=\"first-record-role\"\n              class=\"d-block form-group w-100\"\n              [label]=\"'com.bmc.arsys.rx.client.association-designer.first-record-role-field.label' | translate\"\n              formControlName=\"nodeAName\"\n              [disabled]=\"vm.isReadOnly\"\n              [tooltip]=\"firstRecordDefinitionRoleTooltip\"\n            ></adapt-rx-textfield>\n\n            <div class=\"rx-association-designer-arrow-placeholder\"></div>\n\n            <div class=\"flex-grow-1 w-100\"></div>\n\n            <div class=\"rx-association-designer-arrow-placeholder\"></div>\n\n            <adapt-rx-textfield\n              rx-id=\"second-record-role\"\n              class=\"d-block form-group w-100\"\n              [label]=\"'com.bmc.arsys.rx.client.association-designer.second-record-role-field.label' | translate\"\n              formControlName=\"nodeBName\"\n              [disabled]=\"vm.isReadOnly\"\n              [tooltip]=\"secondRecordDefinitionRoleTooltip\"\n            ></adapt-rx-textfield>\n          </div>\n\n          <div *ngIf=\"vm.canCascadeDelete\">\n            <adapt-rx-control-label\n              rx-id=\"add-constraints\"\n              [label]=\"'com.bmc.arsys.rx.client.association-designer.add-constraints-field.label' | translate\"\n              [tooltip]=\"cascadeDeleteTooltip\"\n            ></adapt-rx-control-label>\n\n            <adapt-rx-checkbox\n              rx-id=\"cascade-delete\"\n              formControlName=\"shouldCascadeDelete\"\n              [label]=\"vm.cascadeDeleteLabel\"\n              [readonly]=\"vm.isExistingDefinition\"\n            ></adapt-rx-checkbox>\n\n            <adapt-rx-checkbox\n              rx-id=\"required-association\"\n              formControlName=\"nodeAModality\"\n              [label]=\"vm.recordAssociationLabel\"\n              [readonly]=\"vm.isModalityDisabled || vm.isReadOnly\"\n            ></adapt-rx-checkbox>\n          </div>\n\n          <hr />\n\n          <rx-revert-customization\n            *ngIf=\"vm.revertCustomizationControlOptions\"\n            [options]=\"vm.revertCustomizationControlOptions\"\n            (events)=\"onRevertCustomization($event)\"\n          ></rx-revert-customization>\n\n          <rx-scope-customization-control\n            class=\"d-block mb-5\"\n            *ngIf=\"vm.scopeCustomizationControlOptions\"\n            [options]=\"vm.scopeCustomizationControlOptions\"\n            formControlName=\"customizationOptions\"\n          ></rx-scope-customization-control>\n\n          <adapt-rx-checkbox\n            rx-id=\"is-enabled\"\n            formControlName=\"isEnabled\"\n            [disabled]=\"vm.isReadOnly\"\n            [label]=\"'com.bmc.arsys.rx.client.association-designer.enable-association.label' | translate\"\n          ></adapt-rx-checkbox>\n        </form>\n      </div>\n    </adapt-sidebar>\n  </div>\n\n  <adapt-code-viewer\n    *ngIf=\"vm.definitionForJsonViewer\"\n    [code]=\"vm.definitionForJsonViewer | json\"\n    [lang]=\"'javascript'\"\n    [hasToolbar]=\"false\"\n    [theme]=\"'light'\"\n    class=\"full-size\"\n  ></adapt-code-viewer>\n</ng-container>\n"]}