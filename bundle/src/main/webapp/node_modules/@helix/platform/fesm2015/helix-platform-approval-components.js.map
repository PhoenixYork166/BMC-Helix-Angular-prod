{"version":3,"file":"helix-platform-approval-components.js","sources":["../../../../libs/platform/approval/components/approval-console/signature-detail-data-page.service.ts","../../../../libs/platform/approval/components/approval-console/approval-console.types.ts","../../../../libs/platform/approval/components/approval-console/approval-console.constant.ts","../../../../libs/platform/approval/components/approval-console/approval-request-reassign/approval-users-data-page.service.ts","../../../../libs/platform/approval/components/approval-console/approval-console.service.ts","../../../../libs/platform/approval/components/approval-console/approval-request-reassign/approval-request-reassign.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-reassign/approval-request-reassign.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-question-response/approval-request-question-response.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-question-response/approval-request-question-response.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-action-reason-input/approval-request-action-reason-input.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-action-reason-input/approval-request-action-reason-input.component.html","../../../../libs/platform/approval/components/approval-console/approval-console-helper.service.ts","../../../../libs/platform/approval/components/approval-console/approval-request-general-details/approval-request-general-details.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-general-details/approval-request-general-details.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-approvers/approval-request-approvers.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-approvers/approval-request-approvers.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-question/approval-request-question.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-question/approval-request-question.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-questions/approval-request-questions.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-questions/approval-request-questions.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-comment/approval-request-comment.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-comment/approval-request-comment.component.html","../../../../libs/platform/approval/components/approval-console/approval-qci-data-page.service.ts","../../../../libs/platform/approval/components/approval-console/approval-request-comments/approval-request-comments.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-comments/approval-request-comments.component.html","../../../../libs/platform/approval/components/approval-console/approval-request-attachments/approval-request-attachments.component.ts","../../../../libs/platform/approval/components/approval-console/approval-request-attachments/approval-request-attachments.component.html","../../../../libs/platform/approval/components/approval-console/approval-console.component.ts","../../../../libs/platform/approval/components/approval-console/approval-console.component.html","../../../../libs/platform/approval/components/approval-console/approval-console-registration.module.ts","../../../../libs/platform/approval/components/approval-console.module.ts","../../../../libs/platform/approval/components/helix-platform-approval-components.ts"],"sourcesContent":["import { Injectable, Injector } from '@angular/core';\r\nimport { DataPage } from '@helix/platform/shared/api';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RxSignatureDetailDataPageService extends DataPage {\r\n  constructor(private injector: Injector) {\r\n    super(injector, 'com.bmc.arsys.rx.approval.application.datapage.SignatureDetailDataPageQuery');\r\n  }\r\n}\r\n","import { JustificationRequirement, YesOrNo } from '@helix/platform/shared/api';\r\n\r\nexport interface IApprovalRequestCounts {\r\n  pendingCount: number;\r\n  holdCount: number;\r\n  moreInformationCount: number;\r\n  approvedCount: number;\r\n  rejectedCount: number;\r\n  cancelledCount: number;\r\n  errorCount: number;\r\n  closedCount: number;\r\n  needAttentionCount: number;\r\n}\r\n\r\nexport enum ApprovalRequestStatus {\r\n  Pending = 'Pending',\r\n  Hold = 'On Hold',\r\n  MoreInfo = 'More Information',\r\n  RequestMoreInfo = 'Request More Information',\r\n  NeedsAttention = 'Needs Attention',\r\n  Approved = 'Approved',\r\n  Rejected = 'Rejected',\r\n  Cancelled = 'Cancelled',\r\n  Error = 'Error',\r\n  Closed = 'Closed'\r\n}\r\n\r\nexport enum ApprovalGridType {\r\n  ApprovalRequests = 'approvalRequests',\r\n  NeedAttentionRequests = 'needAttentionRequests'\r\n}\r\n\r\nexport interface IApprovalRequestType {\r\n  status: ApprovalRequestStatus;\r\n  countType: string;\r\n  gridType: ApprovalGridType;\r\n  label?: string;\r\n  badgeType: string;\r\n}\r\n\r\nexport enum ApprovalCommandType {\r\n  Approved = 'Approved',\r\n  Rejected = 'Rejected',\r\n  OnHold = 'OnHold',\r\n  Reassign = 'Reassign'\r\n}\r\n\r\nexport interface IApprovalRequest {\r\n  canReassign: YesOrNo;\r\n  justificationRequired: JustificationRequirement;\r\n  status: ApprovalRequestStatus;\r\n  application: string;\r\n  approvers: string;\r\n  notes: string;\r\n  request: string;\r\n  requester: string;\r\n  summary: string;\r\n  process: string;\r\n  processType: string;\r\n  createDateSig: string;\r\n  requestDate: string;\r\n  statusDate: string;\r\n  actionDate: string;\r\n  sigTermStateDate: string;\r\n  justification: string;\r\n  otherDetail1: string;\r\n  otherDetail2: string;\r\n  otherDetail3: string;\r\n  otherDetail4: string;\r\n  signatureID: string;\r\n  signatureInstanceID: string;\r\n  actingAs: string;\r\n\r\n  resolvedDisplayValues: {\r\n    notes: string;\r\n    otherDetail1: string;\r\n    otherDetail2: string;\r\n    otherDetail3: string;\r\n    otherDetail4: string;\r\n    request: string;\r\n    requester: string;\r\n    summary: string;\r\n    toolTip: string;\r\n  };\r\n}\r\n\r\nexport interface IApprovalCommand {\r\n  formName: string;\r\n  requestID: string;\r\n  command: ApprovalCommandType;\r\n  assignToApprovers?: string;\r\n  justificationOrReason?: string;\r\n}\r\n\r\nexport interface INeedAttentionRequest {\r\n  2: string;\r\n  4: string;\r\n  379: string;\r\n  10050: string;\r\n  10051: string;\r\n  13300: string;\r\n  14506: string;\r\n  14893: string;\r\n}\r\n\r\nexport interface IRequestAdditionalFields {\r\n  14508: string;\r\n  14509: string;\r\n  14510: string;\r\n  14511: string;\r\n}\r\n\r\nexport interface IRequestConfig {\r\n  requestId: string;\r\n  requestSignatureInstanceId: string;\r\n  reason: string;\r\n  isReasonRequired: boolean;\r\n}\r\n","import { ApprovalGridType, ApprovalRequestStatus } from './approval-console.types';\r\n\r\nexport const RX_APPROVAL_CONSOLE = {\r\n  approvalServerCommand: 'com.bmc.arsys.rx.approval.application.command.ApprovalServerCommand',\r\n  approvalCommandForm: 'AP:Signature',\r\n  approvalUserNameField: 101,\r\n\r\n  approvalRequestTypes: {\r\n    pending: {\r\n      status: ApprovalRequestStatus.Pending,\r\n      countType: 'pendingCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'warning',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.pending.label'\r\n    },\r\n    onHold: {\r\n      status: ApprovalRequestStatus.Hold,\r\n      countType: 'holdCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'warning',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.hold.label'\r\n    },\r\n    moreInfo: {\r\n      status: ApprovalRequestStatus.RequestMoreInfo,\r\n      countType: 'moreInformationCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'info',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.more-info.label'\r\n    },\r\n    needAttention: {\r\n      status: ApprovalRequestStatus.NeedsAttention,\r\n      countType: 'needAttentionCount',\r\n      gridType: ApprovalGridType.NeedAttentionRequests,\r\n      badgeType: 'warning',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.needs-attention.label'\r\n    },\r\n    approved: {\r\n      status: ApprovalRequestStatus.Approved,\r\n      countType: 'approvedCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'success',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.approved.label'\r\n    },\r\n    rejected: {\r\n      status: ApprovalRequestStatus.Rejected,\r\n      countType: 'rejectedCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'danger',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.rejected.label'\r\n    },\r\n    cancelled: {\r\n      status: ApprovalRequestStatus.Cancelled,\r\n      countType: 'cancelledCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'secondary',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.canceled.label'\r\n    },\r\n    error: {\r\n      status: ApprovalRequestStatus.Error,\r\n      countType: 'errorCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'danger',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.errored.label'\r\n    },\r\n    closed: {\r\n      status: ApprovalRequestStatus.Closed,\r\n      countType: 'closedCount',\r\n      gridType: ApprovalGridType.ApprovalRequests,\r\n      badgeType: 'secondary',\r\n      labelKey: 'com.bmc.arsys.rx.client.approval.console.request.closed.label'\r\n    }\r\n  },\r\n\r\n  approvalRequestsGrid: {\r\n    fields: {\r\n      application: 'application',\r\n      summary: 'summary',\r\n      requester: 'requester',\r\n      status: 'status',\r\n      request: 'request',\r\n      createDateSig: 'createDateSig',\r\n      process: 'process',\r\n      signatureInstanceID: 'signatureInstanceID',\r\n      justificationReasonField: 'justification',\r\n      sigTermStateDate: 'sigTermStateDate',\r\n      signatureID: 'signatureID',\r\n      otherDetail1: 'otherDetail1',\r\n      otherDetail2: 'otherDetail2',\r\n      otherDetail3: 'otherDetail3',\r\n      otherDetail4: 'otherDetail4',\r\n      justificationRequired: 'justificationRequired',\r\n      canReassign: 'canReassign',\r\n      processInstanceId: 'processInstanceId',\r\n      ifMultipleApprovers: 'ifMultipleApprovers',\r\n      actingAs: 'actingAs'\r\n    }\r\n  },\r\n\r\n  needAttentionRequestsGrid: {\r\n    definition: 'AP:More Information',\r\n\r\n    fields: {\r\n      fromUser: '2',\r\n      toUser: '4',\r\n      description: '14506',\r\n      application: '10050',\r\n      requestID: '10051',\r\n      attachment: '14893',\r\n      question: '13300',\r\n      response: '13301',\r\n      state: '11016'\r\n    }\r\n  },\r\n\r\n  requestDetailsGrid: {\r\n    definition: 'AP:QCI-Detail-Join',\r\n    approverDefinition: 'AP:PreviewInfo',\r\n    questionDefinition: 'AP:Question-Comment-Info',\r\n    questionTypeValue: 0,\r\n    commentTypeValue: 1,\r\n    fields: {\r\n      from: 2,\r\n      to: 4,\r\n      application: 11001,\r\n      type: 11002,\r\n      signatureID: 11003,\r\n      request: 11004,\r\n      requestNumber: 13334,\r\n      process: 10000,\r\n      response: 11005,\r\n      question: 11006,\r\n      attachment: 11011,\r\n      approver: 14201\r\n    }\r\n  }\r\n};\r\n","import { Injectable, Injector } from '@angular/core';\r\nimport { DataPage } from '@helix/platform/shared/api';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RxApprovalUsersDataPageService extends DataPage {\r\n  constructor(private injector: Injector) {\r\n    super(injector, 'com.bmc.arsys.rx.approval.application.datapage.ApprovalUsersDataPageQuery');\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport {\r\n  ApprovalCommandType,\r\n  IApprovalCommand,\r\n  IApprovalRequest,\r\n  IApprovalRequestCounts,\r\n  IRequestAdditionalFields\r\n} from './approval-console.types';\r\nimport {\r\n  IDataPageParams,\r\n  IDataPageResult,\r\n  RX_APPLICATION,\r\n  RX_RESOURCE_URLS,\r\n  RxCurrentUserService\r\n} from '@helix/platform/shared/api';\r\nimport { RX_APPROVAL_CONSOLE } from './approval-console.constant';\r\nimport { RX_RECORD_DEFINITION, RxRecordInstanceUtilsService } from '@helix/platform/record/api';\r\nimport { IRxSelectWithPaginationOptionsPage } from '@helix/platform/shared/components';\r\nimport { map } from 'rxjs/operators';\r\nimport { RxApprovalUsersDataPageService } from './approval-request-reassign/approval-users-data-page.service';\r\nimport { RxSignatureDetailDataPageService } from './signature-detail-data-page.service';\r\nimport { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RxApprovalConsoleService {\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private rxSignatureDetailDataPageService: RxSignatureDetailDataPageService,\r\n    private rxCurrentUserService: RxCurrentUserService,\r\n    private rxRecordInstanceUtilsService: RxRecordInstanceUtilsService,\r\n    private rxApprovalUsersDataPageService: RxApprovalUsersDataPageService\r\n  ) {}\r\n\r\n  getApprovalRequestCounts(): Observable<IApprovalRequestCounts> {\r\n    return this.httpClient.get<IApprovalRequestCounts>(\r\n      `/api/${RX_APPLICATION.approvalBundleId}/rx/application/approval/counts?ignoreAlternateUser=false`\r\n    );\r\n  }\r\n\r\n  getRequestLabelDetails(\r\n    registeredDefinitionName: string,\r\n    approvalFlowName: string\r\n  ): Observable<IRequestAdditionalFields> {\r\n    return this.httpClient.get<IRequestAdditionalFields>(\r\n      `/api/${RX_APPLICATION.approvalBundleId}/rx/application/approval/labels/${encodeURIComponent(\r\n        registeredDefinitionName\r\n      )}/${encodeURIComponent(approvalFlowName)}`\r\n    );\r\n  }\r\n\r\n  getCurrentRequestDetails(requestId: string, application: string): Observable<IApprovalRequest> {\r\n    return this.rxSignatureDetailDataPageService\r\n      .get({\r\n        params: {\r\n          request: requestId,\r\n          application,\r\n          ignoreAssignedUser: true\r\n        }\r\n      })\r\n      .pipe(map((response: IDataPageResult) => response.data[0] as IApprovalRequest));\r\n  }\r\n\r\n  approveRequest(approvalCommands: IApprovalCommand[]): Observable<any> {\r\n    return this.httpClient.post(RX_RESOURCE_URLS.command, {\r\n      resourceType: RX_APPROVAL_CONSOLE.approvalServerCommand,\r\n      commands: approvalCommands\r\n    });\r\n  }\r\n\r\n  rejectRequest(approvalCommands: IApprovalCommand[]): Observable<any> {\r\n    return this.httpClient.post(RX_RESOURCE_URLS.command, {\r\n      resourceType: RX_APPROVAL_CONSOLE.approvalServerCommand,\r\n      commands: approvalCommands\r\n    });\r\n  }\r\n\r\n  holdRequest(approvalCommands: IApprovalCommand[]): Observable<any> {\r\n    return this.httpClient.post(RX_RESOURCE_URLS.command, {\r\n      resourceType: RX_APPROVAL_CONSOLE.approvalServerCommand,\r\n      commands: approvalCommands\r\n    });\r\n  }\r\n\r\n  reassignRequest(approvalCommands: IApprovalCommand[]): Observable<any> {\r\n    return this.httpClient.post(RX_RESOURCE_URLS.command, {\r\n      resourceType: RX_APPROVAL_CONSOLE.approvalServerCommand,\r\n      commands: approvalCommands\r\n    });\r\n  }\r\n\r\n  getCommandPayload(commandType: ApprovalCommandType, requestSignatureInstanceId: string): IApprovalCommand {\r\n    return {\r\n      formName: RX_APPROVAL_CONSOLE.approvalCommandForm,\r\n      requestID: requestSignatureInstanceId,\r\n      command: commandType\r\n    };\r\n  }\r\n\r\n  saveQuestion(formData: FormData, type: string): Observable<any> {\r\n    return this.httpClient.post(\r\n      `/api/${RX_APPLICATION.approvalBundleId}/rx/application/approval/moreinformation/${type}`,\r\n      formData\r\n    );\r\n  }\r\n\r\n  saveAttachment(formData: FormData, guid: string): Observable<any> {\r\n    return this.httpClient.post(\r\n      `${RX_RECORD_DEFINITION.recordInstanceAttachment}/${encodeURIComponent(\r\n        RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition\r\n      )}/${guid}`,\r\n      formData\r\n    );\r\n  }\r\n\r\n  getApprovalUsers(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      startIndex: startIndex,\r\n      pageSize: pageSize,\r\n      propertySelection: ['loginName', 'fullName']\r\n    };\r\n\r\n    queryParams.queryExpression = `'${\r\n      RX_APPROVAL_CONSOLE.approvalUserNameField\r\n    }'!=\"${this.rxCurrentUserService.getName()}\"`;\r\n\r\n    if (searchQuery) {\r\n      queryParams.queryExpression +=\r\n        ` AND ('${\r\n          RX_RECORD_DEFINITION.coreFieldIds.description\r\n        }' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(searchQuery)}%\"` +\r\n        ` OR '${\r\n          RX_APPROVAL_CONSOLE.approvalUserNameField\r\n        }' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(searchQuery)}%\")`;\r\n    }\r\n\r\n    return this.rxApprovalUsersDataPageService\r\n      .get({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((response: IDataPageResult) => ({\r\n          totalSize: response.totalSize,\r\n          options: response.data.map(({ fullName, loginName }) => ({\r\n            displayValue: fullName,\r\n            value: loginName\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n}\r\n","import { Component, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { IRxSelectWithPaginationOption, IRxSelectWithPaginationOptionsPage } from '@helix/platform/shared/components';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { map as _map } from 'lodash';\nimport { ApprovalCommandType } from '../approval-console.types';\nimport { TranslateService } from '@ngx-translate/core';\nimport { finalize } from 'rxjs/operators';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-approval-request-reassign',\n  templateUrl: './approval-request-reassign.component.html'\n})\nexport class ApprovalRequestReassignComponent extends RxModalClass {\n  selectedUser: IRxSelectWithPaginationOption[] = [];\n  userLoaderFunc = this.getApprovalUsers.bind(this);\n\n  constructor(\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private activeModalRef: ActiveModalRef,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return !!this.selectedUser.length;\n  }\n\n  reassign(): void {\n    this.allowDismiss = false;\n\n    const commands = _map(this.activeModalRef.getData().selectedRequestInstanceIds, (signatureInstance: string) => ({\n      assignToApprovers: this.selectedUser[0].value,\n      ...this.rxApprovalConsoleService.getCommandPayload(ApprovalCommandType.Reassign, signatureInstance)\n    }));\n\n    this.rxApprovalConsoleService\n      .reassignRequest(commands)\n      .pipe(\n        finalize(() => {\n          this.allowDismiss = true;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request.reassigned.message')\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  private getApprovalUsers(\n    startIndex: number,\n    pageSize: number,\n    searchQuery: string\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\n    return this.rxApprovalConsoleService.getApprovalUsers(startIndex, pageSize, searchQuery);\n  }\n\n  optionFormatter(option: IRxSelectWithPaginationOption): string {\n    return `${option.value} ${option.displayValue}`;\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.client.approval.console.request.reassign-dialog.title' | translate }}\n  </h5>\n\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <rx-select-with-pagination\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.console.request.reassign.label' | translate }}\"\n    class=\"form-group d-block\"\n    [(ngModel)]=\"selectedUser\"\n    [optionLoader]=\"userLoaderFunc\"\n    [required]=\"true\"\n    [template]=\"optionTemplate\"\n    [optionFormatter]=\"optionFormatter\"\n  ></rx-select-with-pagination>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    [disabled]=\"!selectedUser.length || !allowDismiss\"\n    (click)=\"reassign()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n\n<ng-template #optionTemplate let-option>\n  <strong>{{ option.displayValue }}</strong>\n\n  <div class=\"text-secondary\">\n    {{ option.value }}\n  </div>\n</ng-template>\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { ActiveModalRef, DismissReasons, FileObj, KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { INeedAttentionRequest } from '../approval-console.types';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { RecordInstance, RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { finalize, switchMap, tap } from 'rxjs/operators';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { of } from 'rxjs';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-approval-request-question-response',\n  templateUrl: './approval-request-question-response.component.html',\n  styleUrls: ['./approval-request-question-response.component.scss']\n})\nexport class ApprovalRequestQuestionResponseComponent extends RxModalClass implements OnInit {\n  request: KeyValueObject = this.activeModalRef.getData().selectedRequest as INeedAttentionRequest;\n  attachment: FileObj[] = [];\n  response: string;\n  enableCustomDownload = true;\n  private shouldSaveAttachment: boolean;\n\n  existingAttachmentName: string = this.request[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment];\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return !this.isSaveButtonDisabled();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    if (this.existingAttachmentName) {\n      this.attachment = this.getExistingFile();\n    }\n  }\n\n  sendResponse(): void {\n    this.allowDismiss = false;\n\n    this.rxRecordInstanceService\n      .get(RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition, this.request[RX_RECORD_DEFINITION.coreFieldIds.id])\n      .pipe(\n        switchMap((recordInstance: RecordInstance) => {\n          recordInstance.setFieldValue(\n            Number(RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.response),\n            this.response\n          );\n\n          return this.rxRecordInstanceService.save(recordInstance);\n        }),\n        tap(() => {\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-added.message'\n            )\n          );\n        }),\n        switchMap(() => {\n          if (this.shouldSaveAttachment) {\n            const recordInstanceFormData = new FormData();\n\n            recordInstanceFormData.append(\n              RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment,\n              this.attachment[0].data,\n              this.attachment[0].data.name\n            );\n\n            return this.rxApprovalConsoleService.saveAttachment(\n              recordInstanceFormData,\n              this.request[RX_RECORD_DEFINITION.coreFieldIds.id]\n            );\n          } else {\n            return of(null);\n          }\n        }),\n        finalize(() => {\n          this.allowDismiss = true;\n        })\n      )\n      .subscribe(() => {\n        this.activeModalRef.close(true);\n      });\n  }\n\n  onRemovedFileFromQueue(): void {\n    this.enableCustomDownload = false;\n  }\n\n  onAfterFilesAdded(): void {\n    this.shouldSaveAttachment = true;\n  }\n\n  downloadAttachment = () => {\n    this.rxRecordInstanceService.downloadAttachment(\n      RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition,\n      Number(RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment),\n      this.request[RX_RECORD_DEFINITION.coreFieldIds.id],\n      this.request[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment]\n    );\n  };\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  private getExistingFile(): FileObj[] {\n    return [\n      {\n        data: new File([], this.existingAttachmentName),\n        inUploading: false,\n        inDeleting: false,\n        uploaded: 100,\n        error: false,\n        errorText: '',\n        allowDeletion: true\n      }\n    ];\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return !this.allowDismiss || !this.response || (this.existingAttachmentName && !this.attachment[0]?.data);\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.client.approval.console.question-response-dialog.title' | translate }}\n  </h5>\n\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <rx-read-only-field\n    class=\"d-block form-group\"\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.console.question-response-dialog.to-field.label' | translate }}\"\n    value=\"{{ request['2'] }}\"\n  ></rx-read-only-field>\n\n  <rx-read-only-field\n    class=\"d-block form-group\"\n    label=\"{{ 'com.bmc.arsys.rx.client.common.question.label' | translate }}\"\n    value=\"{{ request['13300'] }}\"\n  ></rx-read-only-field>\n\n  <adapt-rx-textarea\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-field.label' | translate }}\"\n    class=\"d-block form-group\"\n    [(ngModel)]=\"response\"\n    [required]=\"true\"\n    [autofocus]=\"true\"\n    rows=\"2\"\n  ></adapt-rx-textarea>\n\n  <adapt-rx-uploader\n    adaptRequired\n    [(ngModel)]=\"attachment\"\n    [required]=\"existingAttachmentName\"\n    [showMaxSizeRestriction]=\"false\"\n    (removedFileFromQueue)=\"onRemovedFileFromQueue()\"\n    (afterFilesAdded)=\"onAfterFilesAdded()\"\n    [enableCustomDownload]=\"enableCustomDownload\"\n    [customDownload]=\"downloadAttachment\"\n    [reusable]=\"true\"\n    label=\"{{ 'com.bmc.arsys.rx.client.common.attachment.label' | translate }}\"\n  >\n  </adapt-rx-uploader>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    (click)=\"sendResponse()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { ApprovalCommandType, IApprovalCommand, IApprovalRequest, IRequestConfig } from '../approval-console.types';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { map, some, trim } from 'lodash';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { finalize } from 'rxjs/operators';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-approval-request-action-reason-input',\n  templateUrl: './approval-request-action-reason-input.component.html'\n})\nexport class ApprovalRequestActionReasonInputComponent extends RxModalClass implements OnInit {\n  currentRequestIndex = 0;\n  shouldApplySameReasonToAll: boolean;\n  requests: IRequestConfig[] = [];\n  title = this.activeModalRef.getData().modalTitle;\n  private commandType: ApprovalCommandType = this.activeModalRef.getData().commandType;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return some(this.requests, (request) => request.reason);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.requests = map(this.activeModalRef.getData().selectedRequests, (request: IApprovalRequest) => ({\n      requestId: request[RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.request],\n      requestSignatureInstanceId: request[RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureInstanceID],\n      reason: null,\n      isReasonRequired:\n        request.justificationRequired === 'TO_APPROVE_OR_REJECT' ||\n        (this.commandType === ApprovalCommandType.Approved && request.justificationRequired === 'TO_APPROVE') ||\n        (this.commandType === ApprovalCommandType.Rejected && request.justificationRequired === 'TO_REJECT')\n    }));\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      !this.allowDismiss ||\n      (some(this.requests, (request) => request.isReasonRequired && this.isReasonEmpty(request.reason)) &&\n        !this.shouldApplySameReasonToAll)\n    );\n  }\n\n  goToPreviousRequest(): void {\n    this.currentRequestIndex--;\n  }\n\n  goToNextRequest(): void {\n    this.currentRequestIndex++;\n  }\n\n  saveRequests(): void {\n    this.allowDismiss = false;\n    const commonReason = this.requests[this.currentRequestIndex].reason;\n\n    const commands: IApprovalCommand[] = [\n      ...map(this.requests, (request: IRequestConfig) => ({\n        justificationOrReason: this.shouldApplySameReasonToAll ? commonReason : request.reason,\n        ...this.rxApprovalConsoleService.getCommandPayload(this.commandType, request.requestSignatureInstanceId)\n      }))\n    ];\n\n    this.rxApprovalConsoleService\n      .rejectRequest(commands)\n      .pipe(\n        finalize(() => {\n          this.allowDismiss = true;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(\n            this.commandType === ApprovalCommandType.Rejected\n              ? 'com.bmc.arsys.rx.client.approval.console.request.rejected.message'\n              : 'com.bmc.arsys.rx.client.approval.console.request.approved.message'\n          )\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  isReasonEmpty(reason: string): boolean {\n    return !trim(reason);\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ title }}\n  </h5>\n\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <adapt-rx-textfield\n    class=\"form-group d-block\"\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.grid.column.requestId' | translate }}\"\n    [(ngModel)]=\"requests[currentRequestIndex].requestId\"\n    [readonly]=\"true\"\n    rx-id=\"request-id\"\n  >\n  </adapt-rx-textfield>\n\n  <adapt-rx-textarea\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.justification-reason.label' | translate }}\"\n    class=\"d-block form-group\"\n    [(ngModel)]=\"requests[currentRequestIndex].reason\"\n    [required]=\"requests[currentRequestIndex].isReasonRequired\"\n    rx-id=\"justification-reason\"\n    rows=\"2\"\n    [autofocus]=\"true\"\n  ></adapt-rx-textarea>\n\n  <adapt-rx-switch\n    class=\"d-block mb-2\"\n    [(ngModel)]=\"shouldApplySameReasonToAll\"\n    [disabled]=\"isReasonEmpty(requests[currentRequestIndex].reason)\"\n    rx-id=\"all-request-reason\"\n    label=\"{{ 'com.bmc.arsys.rx.client.approval.console.apply-common-justification-reason.label' | translate }}\"\n  ></adapt-rx-switch>\n\n  <div class=\"text-warning\" *ngIf=\"shouldApplySameReasonToAll\">\n    {{ 'com.bmc.arsys.rx.client.approval.console.overwrite-justification-reason.warning' | translate }}\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    type=\"button\"\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"secondary\"\n    rx-id=\"previous-button\"\n    [disabled]=\"currentRequestIndex === 0 || shouldApplySameReasonToAll\"\n    (click)=\"goToPreviousRequest()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.previous-step.label' | translate }}\n  </button>\n\n  <button\n    type=\"button\"\n    adapt-button\n    class=\"mr-auto\"\n    btn-type=\"secondary\"\n    rx-id=\"next-button\"\n    [disabled]=\"currentRequestIndex === requests.length - 1 || shouldApplySameReasonToAll\"\n    (click)=\"goToNextRequest()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.next-step.label' | translate }}\n  </button>\n\n  <button\n    type=\"button\"\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    (click)=\"saveRequests()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nimport moment from 'moment-es6';\n\n@Injectable()\nexport class RxApprovalConsoleHelperService {\n  constructor(private datePipe: DatePipe) {}\n\n  formatValue(value: string): string {\n    const timeFormat = 'h:mm:ss A';\n    const dateFormat = 'M/D/YYYY';\n\n    if (!/^\\d+$/.test(value) && moment(value, [`${dateFormat} ${timeFormat}`, moment.ISO_8601], true).isValid()) {\n      value = this.datePipe.transform(new Date(value), 'medium');\n    } else if (moment(value, dateFormat, true).isValid()) {\n      value = this.datePipe.transform(new Date(value), 'mediumDate');\n    } else if (moment(value, timeFormat, true).isValid()) {\n      value = moment(value, timeFormat).format('HH:mm A');\n    }\n\n    return value;\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport {\n  ApprovalGridType,\n  ApprovalRequestStatus,\n  IApprovalRequest,\n  IRequestAdditionalFields\n} from '../approval-console.types';\nimport { combineLatest, EMPTY, NEVER, Observable, of, Subject, Subscription } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { IValueWithLabel } from '@helix/platform/utils';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { forEach } from 'lodash';\nimport { DatePipe } from '@angular/common';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxDefinitionNameService } from '@helix/platform/shared/api';\nimport { RxApprovalConsoleHelperService } from '../approval-console-helper.service';\n\n@Component({\n  selector: 'rx-approval-request-general-details',\n  templateUrl: './approval-request-general-details.component.html',\n  styleUrls: ['./approval-request-general-details.component.scss']\n})\nexport class ApprovalRequestGeneralDetailsComponent implements OnChanges {\n  @Input()\n  approvalRequest: IApprovalRequest;\n\n  @Input()\n  gridType: ApprovalGridType;\n\n  private approvalRequest$ = new Subject<IApprovalRequest>();\n  readonly statuses: any;\n  busy: Subscription;\n\n  allRequestFields$: Observable<IValueWithLabel[]> = this.approvalRequest$.pipe(\n    tap(() => {\n      this.busy = NEVER.subscribe();\n    }),\n    switchMap((currentRequest: IApprovalRequest) =>\n      this.gridType === ApprovalGridType.NeedAttentionRequests\n        ? this.rxApprovalConsoleService.getCurrentRequestDetails(\n            currentRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID],\n            currentRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application]\n          )\n        : of(currentRequest)\n    ),\n    switchMap((approvalRequest: IApprovalRequest) =>\n      combineLatest([\n        of(approvalRequest as IApprovalRequest),\n        this.rxApprovalConsoleService.getRequestLabelDetails(approvalRequest.application, approvalRequest.process)\n      ])\n    ),\n    map(([approvalRequest, requestLabelDetails]) => {\n      const allFields: IValueWithLabel[] = [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request-id.label'),\n          value: approvalRequest.resolvedDisplayValues.request || approvalRequest.request\n        },\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.requester.label'),\n          value: approvalRequest.resolvedDisplayValues.requester || approvalRequest.requester\n        },\n\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request-date.label'),\n          value: this.datePipe.transform(approvalRequest.createDateSig, 'medium')\n        },\n\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n          value: approvalRequest.resolvedDisplayValues.summary || approvalRequest.summary\n        },\n\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.status.label'),\n          value: this.statuses[approvalRequest.status]\n        },\n\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.status-date.label'),\n          value: this.datePipe.transform(approvalRequest.sigTermStateDate, 'medium')\n        }\n      ];\n\n      if (approvalRequest.actionDate) {\n        allFields.push({\n          label: '',\n          value: this.datePipe.transform(approvalRequest.actionDate, 'medium')\n        });\n      }\n\n      if (approvalRequest.justification) {\n        allFields.push({\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.justification-reason.label'),\n          value: approvalRequest.justification\n        });\n      }\n\n      const labelValues: IRequestAdditionalFields = {\n        14508: approvalRequest.resolvedDisplayValues.otherDetail1,\n        14509: approvalRequest.resolvedDisplayValues.otherDetail2,\n        14510: approvalRequest.resolvedDisplayValues.otherDetail3,\n        14511: approvalRequest.resolvedDisplayValues.otherDetail4\n      };\n\n      forEach(requestLabelDetails, (label, key) => {\n        if (label) {\n          allFields.push({\n            label: requestLabelDetails[key],\n            value: this.rxApprovalConsoleHelperService.formatValue(labelValues[key])\n          });\n        }\n      });\n\n      allFields.push({\n        label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.activity-log.label'),\n        value: `${this.rxDefinitionNameService.getDisplayName(approvalRequest.application)} ${\n          approvalRequest.resolvedDisplayValues.request || approvalRequest.request\n        }, ${approvalRequest.resolvedDisplayValues.requester || approvalRequest.requester}`\n      });\n\n      return allFields;\n    }),\n    tap(() => {\n      this.busy = EMPTY.subscribe();\n    })\n  );\n\n  constructor(\n    private rxApprovalConsoleHelperService: RxApprovalConsoleHelperService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private datePipe: DatePipe,\n    private translateService: TranslateService,\n    private rxApprovalConsoleService: RxApprovalConsoleService\n  ) {\n    this.statuses = {\n      [ApprovalRequestStatus.Pending]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.pending.labelKey\n      ),\n      [ApprovalRequestStatus.RequestMoreInfo]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.moreInfo.labelKey\n      ),\n      [ApprovalRequestStatus.Hold]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.onHold.labelKey\n      ),\n      [ApprovalRequestStatus.MoreInfo]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.moreInfo.labelKey\n      ),\n      [ApprovalRequestStatus.NeedsAttention]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.needAttention.labelKey\n      ),\n      [ApprovalRequestStatus.Approved]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.approved.labelKey\n      ),\n      [ApprovalRequestStatus.Rejected]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.rejected.labelKey\n      ),\n      [ApprovalRequestStatus.Cancelled]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.cancelled.labelKey\n      ),\n      [ApprovalRequestStatus.Error]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.error.labelKey\n      ),\n      [ApprovalRequestStatus.Closed]: this.translateService.instant(\n        RX_APPROVAL_CONSOLE.approvalRequestTypes.closed.labelKey\n      )\n    };\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.approvalRequest?.currentValue) {\n      this.approvalRequest$.next(changes.approvalRequest.currentValue);\n    }\n  }\n}\n","<rx-busy-indicator [options]=\"{ busy: busy }\"></rx-busy-indicator>\n\n<adapt-empty-state\n  type=\"alerts\"\n  *ngIf=\"!approvalRequest\"\n  label=\"{{ 'com.bmc.arsys.rx.client.approval.console.no-request-selected.message' | translate }}\"\n></adapt-empty-state>\n\n<div [hidden]=\"!approvalRequest\" *ngIf=\"allRequestFields$ | async as requestFields\" class=\"pt-2 pl-3\">\n  <rx-read-only-field\n    *ngFor=\"let field of requestFields\"\n    class=\"d-block form-group\"\n    label=\"{{ field.label }}\"\n    value=\"{{ field.value }}\"\n  ></rx-read-only-field>\n</div>\n","import { Component, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { iif, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { omit } from 'lodash';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ApprovalGridType, IApprovalRequest, INeedAttentionRequest } from '../approval-console.types';\nimport { switchMap } from 'rxjs/operators';\nimport { RxApprovalConsoleService } from '../approval-console.service';\n\n@Component({\n  selector: 'rx-approval-request-approvers',\n  templateUrl: './approval-request-approvers.component.html',\n  styleUrls: ['./approval-request-approvers.component.scss']\n})\nexport class ApprovalRequestApproversComponent implements OnInit, OnChanges {\n  @Input()\n  approvalRequest: IApprovalRequest | INeedAttentionRequest;\n\n  @Input()\n  gridType: ApprovalGridType;\n\n  @ViewChild('requestApproversGrid')\n  requestApproversGrid: RecordGridComponent;\n\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  constructor(\n    private translateService: TranslateService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig$ = of({\n      enableRowSelection: null,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getApproversData(queryParams),\n      columns: this.getColumns(),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      recordDefinitionName: RX_APPROVAL_CONSOLE.requestDetailsGrid.approverDefinition,\n      styles: 'flex-fill'\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.approvalRequest?.currentValue) {\n      this.requestApproversGrid?.api.refresh().subscribe();\n    }\n  }\n\n  private getApproversData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return iif(\n      () => this.gridType === ApprovalGridType.NeedAttentionRequests,\n      this.rxApprovalConsoleService.getCurrentRequestDetails(\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID],\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application]\n      ),\n      of(this.approvalRequest as IApprovalRequest)\n    ).pipe(\n      switchMap((currentRequest: IApprovalRequest) =>\n        this.rxRecordInstanceDataPageService.post({\n          params: omit(\n            {\n              ...queryParams,\n              shouldIncludeTotalSize: true,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.requestNumber]:\n                currentRequest[RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.request],\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.process]:\n                currentRequest[RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.process]\n            },\n            ['searchText', 'propertySelection']\n          )\n        })\n      )\n    );\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.approver,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.status,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.pending.labelKey),\n            1: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.approved.labelKey),\n            2: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.rejected.labelKey),\n            3: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.onHold.labelKey),\n            4: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.moreInfo.labelKey),\n            5: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.cancelled.labelKey),\n            6: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.error.labelKey),\n            7: this.translateService.instant(RX_APPROVAL_CONSOLE.approvalRequestTypes.closed.labelKey)\n          }\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.approver.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.approvers.grid.approver.title'),\n        filterable: false,\n        sortable: false\n      },\n      {\n        index: 1,\n        fieldId: RX_RECORD_DEFINITION.coreFieldIds.status.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.status.label')\n      }\n    ];\n  }\n}\n","<adapt-empty-state\n  type=\"objects\"\n  *ngIf=\"!approvalRequest\"\n  label=\"{{ 'com.bmc.arsys.rx.client.approval.console.no-request-selected.message' | translate }}\"\n></adapt-empty-state>\n\n<rx-record-grid [config]=\"gridConfig$\" *ngIf=\"approvalRequest\" #requestApproversGrid></rx-record-grid>\n","import { Component, Injector } from '@angular/core';\nimport { IRxSelectWithPaginationOption, IRxSelectWithPaginationOptionsPage } from '@helix/platform/shared/components';\nimport { Observable } from 'rxjs';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { ActiveModalRef, DismissReasons, FileObj } from '@bmc-ux/adapt-angular';\nimport { IApprovalRequest } from '../approval-console.types';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { finalize } from 'rxjs/operators';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-approval-request-question',\n  templateUrl: './approval-request-question.component.html'\n})\nexport class ApprovalRequestQuestionComponent extends RxModalClass {\n  selectedUser: IRxSelectWithPaginationOption[] = [];\n  userLoaderFunc = this.getApprovalUsers.bind(this);\n  question: string;\n  attachment: FileObj[] = [];\n\n  constructor(\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private activeModalRef: ActiveModalRef,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return !!(this.question || this.attachment[0]?.data || this.selectedUser[0]?.value);\n  }\n\n  saveQuestion() {\n    this.allowDismiss = false;\n\n    const formData = new FormData();\n    const request: IApprovalRequest = this.activeModalRef.getData().selectedRequest;\n\n    formData.append('to', this.selectedUser[0].value);\n    formData.append('question', this.question);\n    formData.append('application', request.application);\n    formData.append('applicationRequestId', request.resolvedDisplayValues.request);\n    formData.append('signatureID', request.signatureID);\n\n    if (this.attachment[0]?.data) {\n      formData.append('attachment', this.attachment[0].data, this.attachment[0].data.name);\n    }\n\n    this.rxApprovalConsoleService\n      .saveQuestion(formData, 'question')\n      .pipe(\n        finalize(() => {\n          this.allowDismiss = true;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.approval.console.questions.question-added.message')\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  private getApprovalUsers(\n    startIndex: number,\n    pageSize: number,\n    searchQuery: string\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\n    return this.rxApprovalConsoleService.getApprovalUsers(startIndex, pageSize, searchQuery);\n  }\n\n  optionFormatter(option: IRxSelectWithPaginationOption): string {\n    return `${option.value} ${option.displayValue}`;\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.client.approval.console.questions.new.label' | translate }}\n  </h5>\n\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <rx-select-with-pagination\n    label=\"{{ 'com.bmc.arsys.rx.client.common.send-to.label' | translate }}\"\n    class=\"form-group d-block\"\n    [(ngModel)]=\"selectedUser\"\n    [optionLoader]=\"userLoaderFunc\"\n    [required]=\"true\"\n    [template]=\"optionTemplate\"\n    [optionFormatter]=\"optionFormatter\"\n  ></rx-select-with-pagination>\n\n  <adapt-rx-textarea\n    label=\"{{ 'com.bmc.arsys.rx.client.common.question.label' | translate }}\"\n    class=\"d-block form-group\"\n    [(ngModel)]=\"question\"\n    [required]=\"true\"\n    [autofocus]=\"true\"\n    rows=\"2\"\n  ></adapt-rx-textarea>\n\n  <adapt-rx-uploader\n    adaptRequired\n    [(ngModel)]=\"attachment\"\n    [enableDnD]=\"true\"\n    [showMaxSizeRestriction]=\"false\"\n    label=\"{{ 'com.bmc.arsys.rx.client.common.attachment.label' | translate }}\"\n  >\n  </adapt-rx-uploader>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [disabled]=\"!selectedUser.length || !question || !allowDismiss\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    (click)=\"saveQuestion()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n\n<ng-template #optionTemplate let-option>\n  <strong>{{ option.displayValue }}</strong>\n\n  <div class=\"text-secondary\">\n    {{ option.value }}\n  </div>\n</ng-template>\n","import { Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\nimport { iif, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { includes, noop, omit } from 'lodash';\nimport {\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  ApprovalGridType,\n  ApprovalRequestStatus,\n  IApprovalRequest,\n  INeedAttentionRequest\n} from '../approval-console.types';\nimport { ApprovalRequestQuestionComponent } from '../approval-request-question/approval-request-question.component';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { switchMap } from 'rxjs/operators';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { ReadOnlyFieldsModalComponent, RxModalService } from '@helix/platform/ui-kit';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-approval-request-questions',\n  templateUrl: './approval-request-questions.component.html'\n})\nexport class ApprovalRequestQuestionsComponent implements OnInit, OnChanges {\n  @Input()\n  approvalRequest: IApprovalRequest | INeedAttentionRequest;\n\n  @Input()\n  requestsTabStatus: ApprovalRequestStatus;\n\n  @Input()\n  gridType: ApprovalGridType;\n\n  @Output()\n  questionSubmitted: EventEmitter<void> = new EventEmitter();\n\n  @ViewChild('requestQuestionsGrid')\n  requestQuestionsGrid: RecordGridComponent;\n\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  constructor(\n    private translateService: TranslateService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxModalService: RxModalService,\n    private adaptModalService: AdaptModalService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig$ = of({\n      enableRowSelection: null,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getQuestionData(queryParams),\n      columns: this.getQuestionColumns(),\n      getRecordDefinition: () => of(this.getQuestionRecordDefinition()),\n      recordDefinitionName: RX_APPROVAL_CONSOLE.requestDetailsGrid.definition,\n      styles: 'flex-fill'\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.approvalRequest?.currentValue) {\n      this.requestQuestionsGrid?.api.refresh().subscribe();\n    }\n  }\n\n  isNewQuestionButtonDisabled(): boolean {\n    return !includes([ApprovalRequestStatus.Pending, ApprovalRequestStatus.Hold], this.requestsTabStatus);\n  }\n\n  askNewQuestion(): void {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestQuestionComponent,\n        size: 'sm',\n        data: {\n          selectedRequest: this.approvalRequest\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.questionSubmitted.emit();\n        }\n      })\n      .catch(noop);\n  }\n\n  private getQuestionData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return iif(\n      () => this.gridType === ApprovalGridType.NeedAttentionRequests,\n      this.rxApprovalConsoleService.getCurrentRequestDetails(\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID],\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application]\n      ),\n      of(this.approvalRequest as IApprovalRequest)\n    ).pipe(\n      switchMap((currentRequest: IApprovalRequest) =>\n        this.rxRecordInstanceDataPageService.post({\n          params: omit(\n            {\n              ...queryParams,\n              shouldIncludeTotalSize: true,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.application]: currentRequest.application,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.type]:\n                RX_APPROVAL_CONSOLE.requestDetailsGrid.questionTypeValue,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.request]: currentRequest.request\n            },\n            ['searchText']\n          )\n        })\n      )\n    );\n  }\n\n  private getQuestionColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.to.toString(),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.questions.grid.column.question-to.title'\n        )\n      },\n      {\n        index: 1,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.from.label')\n      },\n      {\n        index: 2,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.question.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.question.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.showQuestionDetails(selectedRow);\n            }\n          }\n        ],\n        filterable: false,\n        sortable: false\n      },\n      {\n        index: 3,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response.toString(),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.questions.grid.column.response.title'\n        ),\n        filterable: false,\n        sortable: false\n      },\n      {\n        index: 4,\n        fieldId: RX_RECORD_DEFINITION.coreFieldIds.id.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false,\n        filterable: false\n      },\n      {\n        index: 5,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.attachment.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.rxRecordInstanceService.downloadAttachment(\n                RX_APPROVAL_CONSOLE.requestDetailsGrid.questionDefinition,\n                Number(RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment),\n                selectedRow[RX_RECORD_DEFINITION.coreFieldIds.id].split('|')[0],\n                selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment]\n              );\n            }\n          }\n        ]\n      }\n    ];\n  }\n\n  private getQuestionRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.to,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.question,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.attachment\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private showQuestionDetails(selectedRow: IRowDataItem) {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.question-response-dialog.title'),\n        content: ReadOnlyFieldsModalComponent,\n        size: 'sm',\n        data: {\n          fields: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.send-to.label'),\n              value: selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.to]\n            },\n\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.question.label'),\n              value: selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.question]\n            },\n            {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.approval.console.question-response-dialog.response-field.label'\n              ),\n              value:\n                selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response] ||\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.approval.console.question-response-dialog.not-responded.message'\n                )\n            }\n          ]\n        }\n      })\n      .catch(noop);\n  }\n}\n","<adapt-empty-state\n  type=\"rules\"\n  *ngIf=\"!approvalRequest\"\n  label=\"{{ 'com.bmc.arsys.rx.client.approval.console.no-request-selected.message' | translate }}\"\n></adapt-empty-state>\n\n<button\n  type=\"button\"\n  class=\"p-0 mb-2 d-icon-plus_circle align-self-start\"\n  adapt-button\n  btn-type=\"tertiary\"\n  rx-id=\"new-question-button\"\n  (click)=\"askNewQuestion()\"\n  *ngIf=\"approvalRequest\"\n  [disabled]=\"isNewQuestionButtonDisabled()\"\n>\n  {{ 'com.bmc.arsys.rx.client.approval.console.questions.new.label' | translate }}\n</button>\n\n<rx-record-grid [config]=\"gridConfig$\" *ngIf=\"approvalRequest\" #requestQuestionsGrid></rx-record-grid>\n","import { Component, Injector } from '@angular/core';\nimport { ActiveModalRef, DismissReasons, FileObj } from '@bmc-ux/adapt-angular';\nimport { IApprovalRequest } from '../approval-console.types';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { finalize } from 'rxjs/operators';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { trim } from 'lodash';\n\n@Component({\n  selector: 'rx-approval-request-comment',\n  templateUrl: './approval-request-comment.component.html'\n})\nexport class ApprovalRequestCommentComponent extends RxModalClass {\n  comment: string;\n  attachment: FileObj[] = [];\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return !!(this.comment || this.attachment[0]?.data);\n  }\n\n  saveComment(): void {\n    this.allowDismiss = false;\n\n    const formData = new FormData();\n    const request: IApprovalRequest = this.activeModalRef.getData().selectedRequest;\n\n    formData.append('comments', this.comment);\n    formData.append('application', request.application);\n    formData.append('applicationRequestId', request.resolvedDisplayValues.request);\n    formData.append('signatureID', request.signatureID);\n\n    if (this.attachment[0]?.data) {\n      formData.append('attachment', this.attachment[0].data, this.attachment[0].data.name);\n    }\n\n    this.rxApprovalConsoleService\n      .saveQuestion(formData, 'comment')\n      .pipe(\n        finalize(() => {\n          this.allowDismiss = true;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.approval.console.comments.comment-added.message')\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  isCommentEmpty(): boolean {\n    return !trim(this.comment);\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.client.approval.console.comments.new.label' | translate }}\n  </h5>\n\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <adapt-rx-textarea\n    label=\"{{ 'com.bmc.arsys.rx.client.common.comment.label' | translate }}\"\n    class=\"d-block form-group\"\n    [(ngModel)]=\"comment\"\n    [required]=\"true\"\n    [autofocus]=\"true\"\n    rows=\"3\"\n  ></adapt-rx-textarea>\n\n  <adapt-rx-uploader\n    adaptRequired\n    [(ngModel)]=\"attachment\"\n    [enableDnD]=\"true\"\n    [showMaxSizeRestriction]=\"false\"\n    label=\"{{ 'com.bmc.arsys.rx.client.common.attachment.label' | translate }}\"\n  >\n  </adapt-rx-uploader>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    [disabled]=\"isCommentEmpty() || !allowDismiss\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    (click)=\"saveComment()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"secondary\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApprovalQCIDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, 'com.bmc.arsys.rx.approval.application.datapage.ApprovalQCIDataPageQuery');\n  }\n}\n","import { Component, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { iif, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { IDataPageResult, RxDataPageFactoryService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { noop, omit } from 'lodash';\nimport { ApprovalGridType, IApprovalRequest, INeedAttentionRequest } from '../approval-console.types';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\nimport { ApprovalRequestCommentComponent } from '../approval-request-comment/approval-request-comment.component';\nimport { switchMap, tap } from 'rxjs/operators';\nimport { RxApprovalConsoleService } from '../approval-console.service';\nimport { ReadOnlyFieldsModalComponent, RxModalService } from '@helix/platform/ui-kit';\nimport { RxApprovalQCIDataPageService } from '../approval-qci-data-page.service';\n\n@Component({\n  selector: 'rx-approval-request-comments',\n  templateUrl: './approval-request-comments.component.html'\n})\nexport class ApprovalRequestCommentsComponent implements OnInit, OnChanges {\n  @Input()\n  approvalRequest: IApprovalRequest | INeedAttentionRequest;\n\n  @Input()\n  gridType: ApprovalGridType;\n\n  @ViewChild('requestCommentsGrid')\n  requestCommentsGrid: RecordGridComponent;\n\n  gridConfig$: Observable<IRecordGridConfig>;\n  private selectedRequest: IApprovalRequest;\n\n  constructor(\n    private rxApprovalQCIDataPageService: RxApprovalQCIDataPageService,\n    private rxModalService: RxModalService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private adaptModalService: AdaptModalService,\n    private rxDataPageService: RxDataPageFactoryService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig$ = of({\n      enableRowSelection: null,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getCommentData(queryParams),\n      columns: this.getCommentColumns(),\n      getRecordDefinition: () => of(this.getCommentRecordDefinition()),\n      recordDefinitionName: RX_APPROVAL_CONSOLE.requestDetailsGrid.definition,\n      styles: 'flex-fill'\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.approvalRequest?.currentValue) {\n      this.requestCommentsGrid?.api.refresh().subscribe();\n    }\n  }\n\n  addNewComment(): void {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestCommentComponent,\n        size: 'sm',\n        data: {\n          selectedRequest: this.selectedRequest\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.requestCommentsGrid.api.refresh().subscribe();\n        }\n      })\n      .catch(noop);\n  }\n\n  private getCommentData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return iif(\n      () => this.gridType === ApprovalGridType.NeedAttentionRequests,\n      this.rxApprovalConsoleService.getCurrentRequestDetails(\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID],\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application]\n      ),\n      of(this.approvalRequest as IApprovalRequest)\n    ).pipe(\n      tap((currentRequest: IApprovalRequest) => {\n        this.selectedRequest = currentRequest;\n      }),\n      switchMap((currentRequest: IApprovalRequest) =>\n        this.rxApprovalQCIDataPageService.get({\n          params: omit(\n            {\n              ...queryParams,\n              shouldIncludeTotalSize: true,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.application]: currentRequest.application,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.signatureID]: currentRequest.signatureID,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.type]:\n                RX_APPROVAL_CONSOLE.requestDetailsGrid.commentTypeValue,\n              [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.request]: currentRequest.request\n            },\n            ['searchText']\n          )\n        })\n      )\n    );\n  }\n\n  private getCommentColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 1,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.submitter.label')\n      },\n      {\n        index: 2,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.comment.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.showCommentDetails(selectedRow);\n            }\n          }\n        ],\n        sortable: false\n      },\n      {\n        index: 3,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.attachment.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.rxRecordInstanceService.downloadAttachment(\n                RX_APPROVAL_CONSOLE.requestDetailsGrid.questionDefinition,\n                Number(RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment),\n                selectedRow[RX_RECORD_DEFINITION.coreFieldIds.id].split('|')[0],\n                selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment]\n              );\n            }\n          }\n        ]\n      },\n      {\n        index: 4,\n        fieldId: RX_RECORD_DEFINITION.coreFieldIds.id.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false,\n        filterable: false\n      }\n    ];\n  }\n\n  private getCommentRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.attachment\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private showCommentDetails(selectedRow: IRowDataItem) {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.comment.label'),\n        content: ReadOnlyFieldsModalComponent,\n        data: {\n          fields: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.submitter.label'),\n              value: selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from]\n            },\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.comment.label'),\n              value: selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.response]\n            }\n          ]\n        },\n        size: 'sm'\n      })\n      .catch(noop);\n  }\n}\n","<adapt-empty-state\n  type=\"events\"\n  *ngIf=\"!approvalRequest\"\n  label=\"{{ 'com.bmc.arsys.rx.client.approval.console.no-request-selected.message' | translate }}\"\n></adapt-empty-state>\n\n<button\n  type=\"button\"\n  class=\"p-0 mb-2 d-icon-plus_circle align-self-start\"\n  adapt-button\n  btn-type=\"tertiary\"\n  rx-id=\"new-comment-button\"\n  *ngIf=\"approvalRequest\"\n  (click)=\"addNewComment()\"\n>\n  {{ 'com.bmc.arsys.rx.client.approval.console.comments.new.label' | translate }}\n</button>\n\n<rx-record-grid [config]=\"gridConfig$\" *ngIf=\"approvalRequest\" #requestCommentsGrid></rx-record-grid>\n","import { Component, Input, OnChanges, OnInit, SimpleChanges, ViewChild } from '@angular/core';\nimport { iif, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RX_APPROVAL_CONSOLE } from '../approval-console.constant';\nimport { omit, reject } from 'lodash';\nimport {\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport { ApprovalGridType, IApprovalRequest, INeedAttentionRequest } from '../approval-console.types';\nimport { map, switchMap } from 'rxjs/operators';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { RxApprovalConsoleService } from '../approval-console.service';\n\n@Component({\n  selector: 'rx-approval-request-attachments',\n  templateUrl: './approval-request-attachments.component.html'\n})\nexport class ApprovalRequestAttachmentsComponent implements OnInit, OnChanges {\n  @Input()\n  approvalRequest: IApprovalRequest | INeedAttentionRequest;\n\n  @Input()\n  gridType: ApprovalGridType;\n\n  @ViewChild('requestAttachmentsGrid')\n  requestAttachmentsGrid: RecordGridComponent;\n\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  constructor(\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private translateService: TranslateService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig$ = of({\n      enableRowSelection: null,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getAttachmentData(queryParams),\n      columns: this.getAttachmentColumns(),\n      getRecordDefinition: () => of(this.getAttachmentRecordDefinition()),\n      recordDefinitionName: RX_APPROVAL_CONSOLE.requestDetailsGrid.definition,\n      styles: 'flex-fill'\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.approvalRequest?.currentValue) {\n      this.requestAttachmentsGrid?.api.refresh().subscribe();\n    }\n  }\n\n  private getAttachmentData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return iif(\n      () => this.gridType === ApprovalGridType.NeedAttentionRequests,\n      this.rxApprovalConsoleService.getCurrentRequestDetails(\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID],\n        this.approvalRequest[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application]\n      ),\n      of(this.approvalRequest as IApprovalRequest)\n    ).pipe(\n      switchMap((currentRequest: IApprovalRequest) =>\n        this.rxRecordInstanceDataPageService\n          .post({\n            params: omit(\n              {\n                ...queryParams,\n                shouldIncludeTotalSize: true,\n                [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.application]: currentRequest.application,\n                [RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.request]: currentRequest.request\n              },\n              ['searchText', 'propertySelection']\n            )\n          })\n          .pipe(\n            map((response: IDataPageResult) => {\n              response.data = reject(\n                response.data,\n                (item) => !item[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment]\n              );\n\n              return response;\n            })\n          )\n      )\n    );\n  }\n\n  private getAttachmentColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.submitter.label')\n      },\n      {\n        index: 1,\n        fieldId: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment.toString(),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.attachments.grid.file-name.title'\n        ),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.rxRecordInstanceService.downloadAttachment(\n                RX_APPROVAL_CONSOLE.requestDetailsGrid.questionDefinition,\n                Number(RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment),\n                selectedRow[RX_RECORD_DEFINITION.coreFieldIds.id].split('|')[0],\n                selectedRow[RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment]\n              );\n            }\n          }\n        ]\n      },\n      {\n        index: 2,\n        fieldId: RX_RECORD_DEFINITION.coreFieldIds.id.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false,\n        filterable: false\n      }\n    ];\n  }\n\n  private getAttachmentRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.from,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.requestDetailsGrid.fields.attachment,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.attachment\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n}\n","<adapt-empty-state\n  type=\"grid\"\n  *ngIf=\"!approvalRequest\"\n  label=\"{{ 'com.bmc.arsys.rx.client.approval.console.no-request-selected.message' | translate }}\"\n></adapt-empty-state>\n\n<rx-record-grid [config]=\"gridConfig$\" *ngIf=\"approvalRequest\" #requestAttachmentsGrid></rx-record-grid>\n","import { Component, OnDestroy, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { forkJoin, Observable, of, Subject, Subscription } from 'rxjs';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode,\n  RxRecordGridFilterService\n} from '@helix/platform/view/components';\n\nimport {\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport { RxSignatureDetailDataPageService } from './signature-detail-data-page.service';\nimport {\n  IDataPageResult,\n  JustificationRequirement,\n  RxCurrentUserService,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { cloneDeep, find, findIndex, includes, isNil, map as _map, noop, omit, some } from 'lodash';\nimport { RX_APPROVAL_CONSOLE } from './approval-console.constant';\nimport { RxApprovalConsoleService } from './approval-console.service';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport {\n  ApprovalCommandType,\n  ApprovalGridType,\n  ApprovalRequestStatus,\n  IApprovalRequest,\n  IApprovalRequestCounts,\n  IApprovalRequestType\n} from './approval-console.types';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem, RowDataItemIdFieldName } from '@helix/platform/view/api';\nimport { ActiveTabChangeEvent, AdaptModalService, AdaptTabsComponent, KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { ApprovalRequestReassignComponent } from './approval-request-reassign/approval-request-reassign.component';\nimport { ApprovalRequestQuestionResponseComponent } from './approval-request-question-response/approval-request-question-response.component';\nimport { ApprovalRequestActionReasonInputComponent } from './approval-request-action-reason-input/approval-request-action-reason-input.component';\nimport { RxApprovalConsoleHelperService } from './approval-console-helper.service';\nimport { RxStringService } from '@helix/platform/utils';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\n\n@Component({\n  selector: 'rx-approval-console',\n  templateUrl: './approval-console.component.html',\n  styleUrls: ['./approval-console.component.scss']\n})\nexport class ApprovalConsoleComponent extends BaseViewComponent implements OnInit, OnDestroy {\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  @ViewChild('requestDetailsTabs')\n  requestDetailsTabs: AdaptTabsComponent;\n\n  @ViewChild('resolvedFieldCellTemplate', { static: true })\n  resolvedFieldCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('definitionNameCellTemplate', { static: true })\n  definitionNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('approvalRequestsGrid')\n  approvalRequestsGrid: RecordGridComponent;\n\n  shouldShowGrid: boolean;\n  selectedApprovalRequestsTab: IApprovalRequestType = RX_APPROVAL_CONSOLE.approvalRequestTypes.pending;\n\n  approvalRequestTypes: IApprovalRequestType[] = _map(RX_APPROVAL_CONSOLE.approvalRequestTypes, (request) => ({\n    ...request,\n    label: this.translateService.instant(request.labelKey)\n  }));\n\n  dataLoaded$ = new Subject<void>();\n  selectedApprovalRequest: IRowDataItem;\n\n  attentionGridParams: KeyValueObject = {\n    recorddefinition: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition,\n    [RX_RECORD_DEFINITION.coreFieldIds.assignee]: this.rxCurrentUserService.getName(),\n    [RX_RECORD_DEFINITION.coreFieldIds.status]: '0',\n    [RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.state]: '0'\n  };\n\n  needAttentionRequestCount$ = this.rxRecordInstanceDataPageService.post({\n    params: this.attentionGridParams\n  });\n\n  availableRequestCount$: Observable<IApprovalRequestCounts> = this.dataLoaded$\n    .pipe(\n      switchMap(() =>\n        forkJoin([this.rxApprovalConsoleService.getApprovalRequestCounts(), this.needAttentionRequestCount$])\n      )\n    )\n    .pipe(\n      map(([requestCounts, needAttentionResponse]) => ({\n        ...requestCounts,\n        needAttentionCount: needAttentionResponse.totalSize\n      }))\n    );\n\n  activeTabIndex = 0;\n  selectedRecordIndex: number;\n  private gridSubscription: Subscription;\n  private isReassignButtonDisabled: boolean;\n  private selectedRecordsInSequence: IRowDataItem[] = [];\n\n  constructor(\n    private rxStringService: RxStringService,\n    private rxApprovalConsoleHelperService: RxApprovalConsoleHelperService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private translateService: TranslateService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxApprovalConsoleService: RxApprovalConsoleService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private adaptModalService: AdaptModalService,\n    private rxSignatureDetailDataPageService: RxSignatureDetailDataPageService,\n    private recordGridFilterService: RxRecordGridFilterService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    protected rxDefinitionNameService: RxDefinitionNameService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.updateGridConfig();\n  }\n\n  onDataLoaded() {\n    this.gridSubscription?.unsubscribe();\n\n    this.gridSubscription = this.approvalRequestsGrid.adaptTable.selectionChange.subscribe(\n      (selectedRows: IRowDataItem[]) => {\n        const selectedRecord = isNil(this.selectedApprovalRequest)\n          ? selectedRows[0]\n          : selectedRows[selectedRows.length - 1];\n\n        this.isReassignButtonDisabled = some(selectedRows, (row: IApprovalRequest) => row.canReassign === 'No');\n        this.selectedRecordsInSequence = this.approvalRequestsGrid.api.getSelectedRows(true);\n\n        this.selectedRecordIndex = findIndex(this.selectedRecordsInSequence, {\n          [RowDataItemIdFieldName]: selectedRecord?.[RowDataItemIdFieldName]\n        });\n\n        this.selectedApprovalRequest = selectedRecord;\n      }\n    );\n\n    this.dataLoaded$.next();\n  }\n\n  approveRequest(): void {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestActionReasonInputComponent,\n        size: 'sm',\n        data: {\n          commandType: ApprovalCommandType.Approved,\n          selectedRequests: this.approvalRequestsGrid.api.getSelectedRows(),\n          modalTitle: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.console.approve-request-dialog.title'\n          )\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.reloadGridData();\n        }\n      })\n      .catch(noop);\n  }\n\n  rejectRequest(): void {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestActionReasonInputComponent,\n        size: 'sm',\n        data: {\n          commandType: ApprovalCommandType.Rejected,\n          selectedRequests: this.approvalRequestsGrid.api.getSelectedRows(),\n          modalTitle: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.console.reject-request-dialog.title'\n          )\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.reloadGridData();\n        }\n      })\n      .catch(noop);\n  }\n\n  holdRequest(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request.hold-dialog.message')\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const commands = _map(this.approvalRequestsGrid.api.getSelectedRows(), (request: IRowDataItem) =>\n            this.rxApprovalConsoleService.getCommandPayload(\n              ApprovalCommandType.OnHold,\n              request[RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureInstanceID]\n            )\n          );\n\n          this.rxApprovalConsoleService.holdRequest(commands).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request.hold-success.message')\n            );\n\n            this.reloadGridData();\n          });\n        }\n      });\n  }\n\n  reassignRequest(): void {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestReassignComponent,\n        size: 'sm',\n        data: {\n          selectedRequestInstanceIds: _map(\n            this.approvalRequestsGrid.api.getSelectedRows(),\n            (request: IApprovalRequest) => request.signatureInstanceID\n          )\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.reloadGridData();\n        }\n      })\n      .catch(noop);\n  }\n\n  isHoldButtonDisabled(): boolean {\n    return this.selectedApprovalRequestsTab.status === ApprovalRequestStatus.Hold;\n  }\n\n  get currentRequestId(): string {\n    return (\n      this.selectedApprovalRequest?.request ||\n      this.selectedApprovalRequest?.[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID]\n    );\n  }\n\n  get selectedApprovalRequestCount(): number {\n    return this.approvalRequestsGrid?.api?.getSelectedRowCount() || 0;\n  }\n\n  fetchApprovalRequests(event: ActiveTabChangeEvent): void {\n    this.approvalRequestsGrid.adaptTableConfig.selectedItems = [];\n    this.selectedApprovalRequest = null;\n    this.selectedApprovalRequestsTab = this.approvalRequestTypes[event.index];\n    this.updateGridConfig();\n  }\n\n  showNextRequestDetails() {\n    this.selectedApprovalRequest = this.selectedRecordsInSequence[++this.selectedRecordIndex];\n  }\n\n  showPreviousRequestDetails() {\n    this.selectedApprovalRequest = this.selectedRecordsInSequence[--this.selectedRecordIndex];\n  }\n\n  isPreviousButtonDisabled(): boolean {\n    return this.selectedApprovalRequestCount === 0 || this.selectedRecordIndex <= 0;\n  }\n\n  isNextButtonDisabled(): boolean {\n    return (\n      this.selectedApprovalRequestCount === 0 || this.selectedRecordIndex === this.selectedRecordsInSequence.length - 1\n    );\n  }\n\n  isApprovalRequestGrid(): boolean {\n    return this.selectedApprovalRequestsTab.gridType === ApprovalGridType.ApprovalRequests;\n  }\n\n  isNeedAttentionGrid(): boolean {\n    return this.selectedApprovalRequestsTab.gridType === ApprovalGridType.NeedAttentionRequests;\n  }\n\n  onTabChanged(event: ActiveTabChangeEvent) {\n    if (event.event) {\n      this.activeTabIndex = event.index;\n    }\n  }\n\n  needAttentionGridColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.fromUser,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.from.label')\n      },\n      {\n        index: 1,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.toUser,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.send-to.label')\n      },\n      {\n        index: 2,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.description,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.openQuestionResponseDialog(selectedRow);\n            }\n          }\n        ]\n      },\n      {\n        index: 3,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.application,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.needs-attention.grid.column.application.title'\n        ),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        index: 4,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.requestID,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.needs-attention.grid.column.request.title'\n        )\n      },\n      {\n        index: 5,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.attachment.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.rxRecordInstanceService.downloadAttachment(\n                RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition,\n                Number(RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment),\n                selectedRow[RX_RECORD_DEFINITION.coreFieldIds.id],\n                selectedRow[RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.attachment]\n              );\n            }\n          }\n        ]\n      },\n      {\n        index: 6,\n        fieldId: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.fields.question,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.question.label'),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        index: 7,\n        fieldId: RX_RECORD_DEFINITION.coreFieldIds.id.toString(),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false,\n        filterable: false\n      }\n    ];\n  }\n\n  ngOnDestroy(): void {\n    this.dataLoaded$.complete();\n    this.gridSubscription.unsubscribe();\n  }\n\n  onQuestionSubmitted(): void {\n    this.reloadGridData();\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const textSearchQuery = this.recordGridFilterService.generateTextFilterQuery(\n      queryParams.searchText,\n      this.approvalRequestsGrid.adaptTableConfig.columns\n    );\n\n    const clonedSelectedFilters = cloneDeep(this.approvalRequestsGrid.state.advancedFiltering.selectedFilters);\n\n    const clonedDefinitionNameFilters = find(clonedSelectedFilters, {\n      filterOptionId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.application\n    });\n\n    if (clonedDefinitionNameFilters) {\n      const appliedDefinitionNameFilters = find(this.approvalRequestsGrid.state.advancedFiltering.selectedFilters, {\n        filterOptionId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.application\n      });\n\n      appliedDefinitionNameFilters.value.filterValue = _map(\n        appliedDefinitionNameFilters.value.filterValue,\n        (filterValue: string) => this.rxDefinitionNameService.getDisplayName(filterValue)\n      );\n\n      clonedDefinitionNameFilters.value.filterValue = _map(\n        clonedDefinitionNameFilters.value.filterValue,\n        (filterValue: string) => `%${filterValue}`\n      );\n    }\n\n    const resultingQuery = this.recordGridFilterService.addQueries(\n      this.approvalRequestsGrid.buildQueryByAdvancedFilters(clonedSelectedFilters),\n      textSearchQuery\n    );\n\n    if (resultingQuery) {\n      queryParams.queryExpression = resultingQuery;\n    }\n\n    queryParams.propertySelection.push(RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.ifMultipleApprovers);\n\n    return this.rxSignatureDetailDataPageService\n      .get({\n        params: omit(\n          {\n            ...queryParams,\n            status: this.selectedApprovalRequestsTab.status,\n            shouldIncludeTotalSize: true,\n            ignoreAlternateUser: false,\n            propertySelection: queryParams.propertySelection.filter(\n              (property: string) => property !== RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.actingAs\n            )\n          },\n          ['searchText', 'recorddefinition']\n        )\n      })\n      .pipe(\n        tap((dataPage: IDataPageResult<IApprovalRequest>) => {\n          dataPage.data.forEach((row) => {\n            row.otherDetail1 = this.rxApprovalConsoleHelperService.formatValue(row.otherDetail1);\n            row.otherDetail2 = this.rxApprovalConsoleHelperService.formatValue(row.otherDetail2);\n            row.otherDetail3 = this.rxApprovalConsoleHelperService.formatValue(row.otherDetail3);\n            row.otherDetail4 = this.rxApprovalConsoleHelperService.formatValue(row.otherDetail4);\n          });\n        })\n      );\n  }\n\n  private getNeedAttentionData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const params = omit({ ...this.attentionGridParams, ...queryParams }, ['searchText']);\n\n    return this.rxRecordInstanceDataPageService.post({\n      params\n    });\n  }\n\n  private updateGridConfig(): void {\n    this.shouldShowGrid = false;\n    this.gridConfig$ = this.prepareGridConfiguration();\n\n    setTimeout(() => {\n      this.shouldShowGrid = true;\n    });\n  }\n\n  private prepareGridConfiguration(): Observable<IRecordGridConfig> {\n    const defaultConfig = {\n      enableFiltering: true,\n      enableRowSelection: RowSelectionMode.Multiple\n    };\n\n    if (this.isApprovalRequestGrid()) {\n      return of({\n        ...defaultConfig,\n        actionButtons: this.getActionButtons(),\n        getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n        columns: this.getColumns(),\n        getRecordDefinition: () => of(this.getRecordDefinition()),\n        recordIdField: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureInstanceID,\n        styles: 'flex-fill',\n        guid: `ap-${this.rxStringService.toRxId(this.selectedApprovalRequestsTab.status)}-grid`\n      });\n    } else if (this.isNeedAttentionGrid()) {\n      return of({\n        ...defaultConfig,\n        recordDefinitionName: RX_APPROVAL_CONSOLE.needAttentionRequestsGrid.definition,\n        getData: (queryParams: IRecordGridDataPageParams) => this.getNeedAttentionData(queryParams),\n        columns: this.needAttentionGridColumns(),\n        styles: 'flex-fill',\n        guid: 'ap-need-attention-grid'\n      });\n    }\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return includes(\n      [ApprovalRequestStatus.Pending, ApprovalRequestStatus.RequestMoreInfo, ApprovalRequestStatus.Hold],\n      this.selectedApprovalRequestsTab.status\n    )\n      ? [\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.button.approve.label'),\n            style: 'success',\n            iconCls: 'check_circle_o',\n            size: 'small',\n            actions: [\n              {\n                name: () => this.approveRequest()\n              }\n            ]\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.button.reject.label'),\n            style: 'critical',\n            iconCls: 'cross_circle_o',\n            size: 'small',\n            actions: [\n              {\n                name: () => this.rejectRequest()\n              }\n            ]\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.button.hold.label'),\n            style: 'warning',\n            iconCls: 'pause_circle_o',\n            size: 'small',\n            disabled: () => this.isHoldButtonDisabled(),\n            actions: [\n              {\n                name: () => this.holdRequest()\n              }\n            ]\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.button.reassign.label'),\n            iconCls: 'user_arrow_o',\n            style: 'secondary',\n            size: 'small',\n            disabled: () => this.isReassignButtonDisabled,\n            actions: [\n              {\n                name: () => this.reassignRequest()\n              }\n            ]\n          }\n        ]\n      : [];\n  }\n\n  private reloadGridData(): void {\n    this.selectedApprovalRequest = null;\n    this.approvalRequestsGrid.api.refresh().subscribe();\n  }\n\n  private openQuestionResponseDialog(selectedRow: IRowDataItem) {\n    this.rxModalService\n      .openModal({\n        content: ApprovalRequestQuestionResponseComponent,\n        size: 'sm',\n        data: {\n          selectedRequest: selectedRow\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.reloadGridData();\n        }\n      })\n      .catch(noop);\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.application,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.record-definition.label'),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.summary,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n        cellTemplate: this.resolvedFieldCellTemplate,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.requester,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.requester.label'),\n        cellTemplate: this.resolvedFieldCellTemplate,\n        sortable: true\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.status,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.status.label'),\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.request,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request-id.label'),\n        cellTemplate: this.resolvedFieldCellTemplate,\n        sortable: true\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.actingAs,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.grid.column.acting-as.title'),\n        filterable: false,\n        searchable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.createDateSig,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.request-date.label'),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.process,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.grid.column.process.title'),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureInstanceID,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.signature-instance-id.title'\n        ),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.justificationReasonField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.justification.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.sigTermStateDate,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.status-updated-on.title'\n        ),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureID,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.console.grid.column.signature-id.title'),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail1,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.other-detail1.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail2,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.other-detail2.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail3,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.other-detail3.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail4,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.other-detail4.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.justificationRequired,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.justification.require-on.label'),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.processInstanceId,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.console.grid.column.process-instance-id.title'\n        ),\n        visible: false,\n        filterable: false,\n        sortable: false\n      }\n    ];\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.application,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.summary,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.requester,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.status,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            [ApprovalRequestStatus.Pending]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.pending.labelKey\n            ),\n            [ApprovalRequestStatus.RequestMoreInfo]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.moreInfo.labelKey\n            ),\n            [ApprovalRequestStatus.Approved]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.approved.labelKey\n            ),\n            [ApprovalRequestStatus.Rejected]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.rejected.labelKey\n            ),\n            [ApprovalRequestStatus.Cancelled]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.cancelled.labelKey\n            ),\n            [ApprovalRequestStatus.Error]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.error.labelKey\n            ),\n            [ApprovalRequestStatus.Hold]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.onHold.labelKey\n            ),\n            [ApprovalRequestStatus.Closed]: this.translateService.instant(\n              RX_APPROVAL_CONSOLE.approvalRequestTypes.closed.labelKey\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.request,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.actingAs,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.createDateSig,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.dateTime\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.process,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureInstanceID,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.justificationReasonField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.sigTermStateDate,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.dateTime\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.signatureID,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail1,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail2,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail3,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.otherDetail4,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.justificationRequired,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            [JustificationRequirement.RequiredForApproval]: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.justification.require-on.approval.label'\n            ),\n            [JustificationRequirement.RequiredForRejection]: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.justification.require-on.rejection.label'\n            ),\n            [JustificationRequirement.RequiredForApprovalOrRejection]: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.justification.require-on.approval-rejection.label'\n            ),\n            [JustificationRequirement.NotRequired]: this.translateService.instant(\n              'com.bmc.arsys.rx.client.common.not-applicable.label'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_CONSOLE.approvalRequestsGrid.fields.processInstanceId,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n}\n","<div class=\"row h-100\">\n  <div class=\"col-12 col-md-7 d-flex flex-column flex-fill h-100\">\n    <h2 class=\"mt-0\">{{ 'com.bmc.arsys.rx.client.approval.console.requests.title' | translate }}</h2>\n\n    <adapt-tabset\n      type=\"pills\"\n      [tab-active]=\"0\"\n      *ngIf=\"availableRequestCount$ | async as requestsTypeCounts\"\n      (tab-active-changed)=\"fetchApprovalRequests($event)\"\n      rx-id=\"approval-requests-tabs\"\n    >\n      <adapt-tab-panel\n        *ngFor=\"let requestType of approvalRequestTypes\"\n        adapt-tab-title=\"{{ requestType.label }}\"\n        [badge]=\"requestsTypeCounts[requestType.countType]\"\n        [badge-type]=\"requestType.badgeType\"\n      >\n      </adapt-tab-panel>\n    </adapt-tabset>\n\n    <rx-record-grid\n      #approvalRequestsGrid\n      [config]=\"gridConfig$\"\n      *ngIf=\"shouldShowGrid\"\n      (dataLoaded)=\"onDataLoaded()\"\n    ></rx-record-grid>\n  </div>\n\n  <div class=\"col-12 col-md-5 mt-4 mt-md-0 d-flex flex-column flex-fill h-100\">\n    <div class=\"mb-1\">\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"secondary\"\n        size=\"small\"\n        class=\"d-icon-left-angle_left mr-2\"\n        rx-id=\"prev-button\"\n        [disabled]=\"isPreviousButtonDisabled()\"\n        (click)=\"showPreviousRequestDetails()\"\n      ></button>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"secondary\"\n        size=\"small\"\n        class=\"d-icon-left-angle_right mr-3\"\n        rx-id=\"next-button\"\n        [disabled]=\"isNextButtonDisabled()\"\n        (click)=\"showNextRequestDetails()\"\n      ></button>\n\n      <h2 class=\"d-inline-block my-0 align-middle\">\n        {{ 'com.bmc.arsys.rx.client.approval.console.request-details.title' | translate }}\n        <span *ngIf=\"currentRequestId\">({{ currentRequestId }})</span>\n      </h2>\n    </div>\n\n    <adapt-tabset\n      type=\"pills\"\n      [tab-active]=\"0\"\n      #requestDetailsTabs\n      (tab-active-changed)=\"onTabChanged($event)\"\n      class=\"d-flex flex-column flex-fill h-100\"\n      rx-id=\"request-details-tabs\"\n    >\n      <adapt-tab-panel\n        adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.common.general-items.label' | translate }}\"\n        badge-type=\"primary\"\n      >\n        <rx-approval-request-general-details\n          [approvalRequest]=\"selectedApprovalRequest\"\n          [gridType]=\"selectedApprovalRequestsTab.gridType\"\n        ></rx-approval-request-general-details>\n      </adapt-tab-panel>\n\n      <adapt-tab-panel adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.console.approvers.title' | translate }}\">\n        <rx-approval-request-approvers\n          class=\"d-flex flex-column flex-fill h-100\"\n          [approvalRequest]=\"selectedApprovalRequest\"\n          [gridType]=\"selectedApprovalRequestsTab.gridType\"\n          *ngIf=\"activeTabIndex === 1\"\n        ></rx-approval-request-approvers>\n      </adapt-tab-panel>\n\n      <adapt-tab-panel adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.console.questions.label' | translate }}\">\n        <rx-approval-request-questions\n          class=\"d-flex flex-column flex-fill h-100\"\n          [approvalRequest]=\"selectedApprovalRequest\"\n          [gridType]=\"selectedApprovalRequestsTab.gridType\"\n          [requestsTabStatus]=\"selectedApprovalRequestsTab.status\"\n          (questionSubmitted)=\"onQuestionSubmitted()\"\n          *ngIf=\"activeTabIndex === 2\"\n        ></rx-approval-request-questions>\n      </adapt-tab-panel>\n\n      <adapt-tab-panel adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.console.comments.title' | translate }}\">\n        <rx-approval-request-comments\n          class=\"d-flex flex-column flex-fill h-100\"\n          [approvalRequest]=\"selectedApprovalRequest\"\n          [gridType]=\"selectedApprovalRequestsTab.gridType\"\n          *ngIf=\"activeTabIndex === 3\"\n        ></rx-approval-request-comments>\n      </adapt-tab-panel>\n\n      <adapt-tab-panel adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.console.attachments.title' | translate }}\">\n        <rx-approval-request-attachments\n          class=\"d-flex flex-column flex-fill h-100\"\n          [approvalRequest]=\"selectedApprovalRequest\"\n          [gridType]=\"selectedApprovalRequestsTab.gridType\"\n          *ngIf=\"activeTabIndex === 4\"\n        ></rx-approval-request-attachments>\n      </adapt-tab-panel>\n    </adapt-tabset>\n  </div>\n</div>\n\n<ng-template #definitionNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ dataItem[column.field] | rxDefinitionNamePipe }}\n</ng-template>\n\n<ng-template #resolvedFieldCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ dataItem.resolvedDisplayValues[column.field] }}\n</ng-template>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\r\nimport { RX_APPLICATION, RxDefinitionModule } from '@helix/platform/shared/api';\r\nimport { ApprovalConsoleComponent } from './approval-console.component';\r\nimport { RecordGridModule } from '@helix/platform/view/components';\r\nimport { RxSelectWithPaginationModule } from '@helix/platform/shared/components';\r\nimport { ReadOnlyFieldModule, RxBusyIndicatorModule } from '@helix/platform/ui-kit';\r\n\r\nimport {\r\n  AdaptAlertModule,\r\n  AdaptBusyModule,\r\n  AdaptButtonModule,\r\n  AdaptDownloadModule,\r\n  AdaptDropdownModule,\r\n  AdaptEmptyStateModule,\r\n  AdaptRxLabelModule,\r\n  AdaptRxSwitchModule,\r\n  AdaptRxTextareaModule,\r\n  AdaptRxTextfieldModule,\r\n  AdaptRxUploaderModule,\r\n  AdaptTabsModule\r\n} from '@bmc-ux/adapt-angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ApprovalRequestGeneralDetailsComponent } from './approval-request-general-details/approval-request-general-details.component';\r\nimport { ApprovalRequestReassignComponent } from './approval-request-reassign/approval-request-reassign.component';\r\nimport { ApprovalRequestApproversComponent } from './approval-request-approvers/approval-request-approvers.component';\r\nimport { ApprovalRequestQuestionsComponent } from './approval-request-questions/approval-request-questions.component';\r\nimport { ApprovalRequestCommentsComponent } from './approval-request-comments/approval-request-comments.component';\r\nimport { ApprovalRequestAttachmentsComponent } from './approval-request-attachments/approval-request-attachments.component';\r\nimport { ApprovalRequestQuestionResponseComponent } from './approval-request-question-response/approval-request-question-response.component';\r\nimport { ApprovalRequestQuestionComponent } from './approval-request-question/approval-request-question.component';\r\nimport { ApprovalRequestCommentComponent } from './approval-request-comment/approval-request-comment.component';\r\nimport { ApprovalRequestActionReasonInputComponent } from './approval-request-action-reason-input/approval-request-action-reason-input.component';\r\nimport { RxApprovalConsoleHelperService } from './approval-console-helper.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ApprovalConsoleComponent,\r\n    ApprovalRequestGeneralDetailsComponent,\r\n    ApprovalRequestReassignComponent,\r\n    ApprovalRequestApproversComponent,\r\n    ApprovalRequestQuestionsComponent,\r\n    ApprovalRequestCommentsComponent,\r\n    ApprovalRequestAttachmentsComponent,\r\n    ApprovalRequestQuestionResponseComponent,\r\n    ApprovalRequestQuestionComponent,\r\n    ApprovalRequestCommentComponent,\r\n    ApprovalRequestActionReasonInputComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RecordGridModule,\r\n    AdaptButtonModule,\r\n    AdaptDropdownModule,\r\n    FormsModule,\r\n    TranslateModule,\r\n    AdaptTabsModule,\r\n    ReadOnlyFieldModule,\r\n    RxBusyIndicatorModule,\r\n    RxDefinitionModule,\r\n    RxSelectWithPaginationModule,\r\n    AdaptEmptyStateModule,\r\n    AdaptRxTextareaModule,\r\n    AdaptRxUploaderModule,\r\n    AdaptBusyModule,\r\n    AdaptDownloadModule,\r\n    AdaptRxLabelModule,\r\n    AdaptRxSwitchModule,\r\n    AdaptAlertModule,\r\n    AdaptRxTextfieldModule\r\n  ],\r\n  entryComponents: [ApprovalConsoleComponent],\r\n  providers: [RxApprovalConsoleHelperService]\r\n})\r\nexport class ApprovalConsoleRegistrationModule {\r\n  constructor(\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\r\n  ) {\r\n    rxViewComponentRegistryService.register({\r\n      type: 'rx-approval-console',\r\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ApprovalConsoleComponent),\r\n      name: 'Approval console',\r\n      isPageComponent: true,\r\n      availableInBundles: [RX_APPLICATION.approvalBundleId]\r\n    });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { ApprovalConsoleRegistrationModule } from './approval-console/approval-console-registration.module';\r\n\r\n@NgModule({\r\n  imports: [ApprovalConsoleRegistrationModule],\r\n  providers: [],\r\n  declarations: []\r\n})\r\nexport class ApprovalConsoleModule {}\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["_map","map"],"mappings":"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"}