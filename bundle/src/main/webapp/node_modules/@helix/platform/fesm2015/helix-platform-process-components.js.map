{"version":3,"file":"helix-platform-process-components.js","sources":["../../../../libs/platform/process/components/process-instance-preview/process-instance-preview.component.ts","../../../../libs/platform/process/components/process-instance-preview/process-instance-preview.module.ts","../../../../libs/platform/process/components/process-preview/process-preview.component.ts","../../../../libs/platform/process/components/process-preview/process-preview.module.ts","../../../../libs/platform/process/components/helix-platform-process-components.ts"],"sourcesContent":["import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { forkJoin, Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, filter, map, shareReplay, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport { isEqual } from 'lodash';\nimport {\n  IProcessDefinition,\n  IProcessInstance,\n  RxProcessDefinitionCacheService,\n  RxProcessInstanceService\n} from '@helix/platform/process/api';\nimport { RxRappidPaperService } from '@helix/platform/process/elements';\nimport { IProcessInstancePreviewConfig } from './process-instance-preview-config.interface';\n\n@Component({\n  selector: 'rx-process-instance-preview',\n  template: '',\n  styleUrls: ['./process-instance-preview.component.scss']\n})\nexport class RxProcessInstancePreviewComponent implements OnDestroy, OnInit {\n  @Input()\n  config: Observable<IProcessInstancePreviewConfig>;\n\n  processDefinitionName: string;\n  processInstanceId: string;\n  zoomToFit = false;\n\n  onClick: ({ processDefinition: IProcessDefinition, processInstance: IProcessInstance, cellView: {} }) => void;\n  processDefinition: IProcessDefinition;\n  processInstance: IProcessInstance = {};\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private paperScroller;\n\n  constructor(\n    private element: ElementRef,\n    private rxProcessDefinitionCacheService: RxProcessDefinitionCacheService,\n    private rxProcessInstanceService: RxProcessInstanceService,\n    private rxRappidPaperService: RxRappidPaperService\n  ) {\n    this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$);\n  }\n\n  ngOnInit() {\n    const config$ = this.config.pipe(\n      distinctUntilChanged(isEqual),\n      filter((config) => config.processDefinitionName && config.processInstanceId),\n      tap((config) => {\n        this.onClick = config.onClick;\n        this.processDefinitionName = config.processDefinitionName;\n        this.processInstanceId = config.processInstanceId;\n        this.zoomToFit = config.zoomToFit;\n      }),\n      switchMap((config) => {\n        return forkJoin([\n          this.rxProcessDefinitionCacheService.getProcessDefinition(config.processDefinitionName),\n          this.rxProcessInstanceService.get(config.processDefinitionName, config.processInstanceId)\n        ]).pipe(\n          map(([processDefinition, processInstance]) => {\n            this.processDefinition = processDefinition;\n            this.processInstance = processInstance;\n          })\n        );\n      }),\n      shareReplay(1)\n    );\n\n    config$\n      .pipe(\n        tap(() => this.initialize()),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  initialize() {\n    this.paperScroller = this.rxRappidPaperService.init(this.element.nativeElement);\n\n    this.rxRappidPaperService.setGraph(\n      this.paperScroller,\n      this.processDefinition,\n      this.processInstance,\n      this.zoomToFit\n    );\n\n    if (this.onClick) {\n      this.paperScroller.options.paper.on('blank:pointerdown', () => {\n        this.onClick({\n          processDefinition: this.processDefinition,\n          processInstance: this.processInstance,\n          cellView: null\n        });\n      });\n\n      this.paperScroller.options.paper.on('cell:pointerup', (cellView) => {\n        this.onClick({\n          processDefinition: this.processDefinition,\n          processInstance: this.processInstance,\n          cellView: cellView\n        });\n      });\n    }\n  }\n\n  zoomIn(): void {\n    this.paperScroller.zoom(0.2, { max: 4 });\n  }\n\n  zoomOut(): void {\n    this.paperScroller.zoom(-0.2, { min: 0.2 });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RuntimeViewModule } from '@helix/platform/view/runtime';\nimport { RxProcessInstancePreviewComponent } from './process-instance-preview.component';\n\n@NgModule({\n  imports: [CommonModule, RuntimeViewModule, TranslateModule],\n  declarations: [RxProcessInstancePreviewComponent],\n  entryComponents: [RxProcessInstancePreviewComponent],\n  exports: [RxProcessInstancePreviewComponent]\n})\nexport class RxProcessInstancePreviewModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-process-instance-preview',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RxProcessInstancePreviewComponent)\n    });\n  }\n}\n","import { Component, ElementRef, Input, OnDestroy, OnInit } from '@angular/core';\nimport { isEqual } from 'lodash';\nimport { Observable, ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, filter, shareReplay, switchMap, takeUntil, tap } from 'rxjs/operators';\nimport {\n  IProcessDefinition,\n  RX_PROCESS_DEFINITION,\n  RxProcessDefinitionCacheService,\n  RxProcessElementSearchService\n} from '@helix/platform/process/api';\nimport { RxProcessElementService, RxRappidPaperService } from '@helix/platform/process/elements';\n\ndeclare var joint: any;\n\nexport interface IProcessDesignerConfiguration {\n  processDefinitionName?: string;\n  zoomToFit?: boolean;\n  onClick?: ({ processDefinition: IProcessDefinition, cellView: {} }) => void;\n}\n\n@Component({\n  selector: 'rx-process-preview',\n  template: '',\n  styleUrls: ['./process-preview.component.scss']\n})\nexport class RxProcessPreviewComponent implements OnDestroy, OnInit {\n  @Input()\n  config: Observable<IProcessDesignerConfiguration>;\n\n  onClick: ({ processDefinition: IProcessDefinition, cellView: {} }) => void;\n  processDefinitionName: string;\n  zoomToFit = false;\n\n  processDefinition: IProcessDefinition;\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private paperScroller;\n\n  constructor(\n    private element: ElementRef,\n    private rxProcessDefinitionCacheService: RxProcessDefinitionCacheService,\n    private rxProcessElementService: RxProcessElementService,\n    private rxProcessElementSearchService: RxProcessElementSearchService,\n    private rxRappidPaperService: RxRappidPaperService\n  ) {\n    this.rxProcessDefinitionCacheService.registerConsumer(this.destroyed$);\n  }\n\n  ngOnInit() {\n    const config$ = this.config.pipe(\n      distinctUntilChanged(isEqual),\n      filter((config) => config.processDefinitionName),\n      tap((config) => {\n        this.onClick = config.onClick;\n        this.processDefinitionName = config.processDefinitionName;\n        this.zoomToFit = config.zoomToFit;\n      }),\n      switchMap((config) => {\n        return this.rxProcessDefinitionCacheService.getProcessDefinition(config.processDefinitionName).pipe(\n          tap((processDefinition) => {\n            this.processDefinition = processDefinition;\n          })\n        );\n      }),\n      shareReplay(1)\n    );\n\n    config$\n      .pipe(\n        tap(() => this.initialize()),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  initialize() {\n    let graph;\n\n    if (this.processDefinition.layout) {\n      graph = this.rxProcessElementService.getGraph(this.processDefinition);\n    } else {\n      graph = this.getGraph(this.processDefinition);\n    }\n\n    this.paperScroller = this.rxRappidPaperService.init(this.element.nativeElement, graph, this.zoomToFit);\n\n    if (this.onClick) {\n      this.paperScroller.options.paper.on('blank:pointerdown', () => {\n        this.onClick({\n          processDefinition: this.processDefinition,\n          cellView: null\n        });\n      });\n\n      this.paperScroller.options.paper.on('cell:pointerup', (cellView) => {\n        this.onClick({\n          processDefinition: this.processDefinition,\n          cellView: cellView\n        });\n      });\n    }\n  }\n\n  zoomIn(): void {\n    this.paperScroller.zoom(0.2, { max: 4 });\n  }\n\n  zoomOut(): void {\n    this.paperScroller.zoom(-0.2, { min: 0.2 });\n  }\n\n  private getGraph(processDefinition: IProcessDefinition) {\n    const actionsLength = this.rxProcessElementSearchService.filter(processDefinition, (element) => {\n      return (\n        element.resourceType === RX_PROCESS_DEFINITION.processElementResourceTypes.processAction ||\n        element.resourceType === RX_PROCESS_DEFINITION.processElementResourceTypes.userTask ||\n        element.resourceType === RX_PROCESS_DEFINITION.processElementResourceTypes.receiveTask ||\n        element.resourceType === RX_PROCESS_DEFINITION.processElementResourceTypes.callActivity\n      );\n    }).length;\n\n    const start = new joint.shapes.bpmn.Event({\n      size: {\n        width: 50,\n        height: 50\n      },\n      attrs: {\n        '.label': {\n          fill: 'gray',\n          text: 'Start'\n        }\n      },\n      eventType: 'start',\n      position: {\n        x: 50,\n        y: 50\n      }\n    });\n\n    const startCount = new joint.shapes.basic.Rect({\n      size: {\n        width: 30,\n        height: 30\n      },\n      attrs: {\n        text: {\n          text: processDefinition.inputParams.length || 0\n        },\n        g: {\n          'stroke-opacity': 0\n        }\n      },\n      position: {\n        x: 60,\n        y: 60\n      }\n    });\n\n    const actionLabel = new joint.shapes.basic.Rect({\n      size: {\n        width: 30,\n        height: 30\n      },\n      attrs: {\n        text: {\n          text: 'Actions',\n          fill: 'gray'\n        },\n        g: {\n          'stroke-opacity': 0\n        }\n      },\n      position: {\n        x: 235,\n        y: 110\n      }\n    });\n\n    const endCount = new joint.shapes.basic.Rect({\n      size: {\n        width: 30,\n        height: 30\n      },\n      attrs: {\n        text: {\n          text: '1'\n        },\n        g: {\n          'stroke-opacity': 0\n        }\n      },\n      position: {\n        x: 410,\n        y: 60\n      }\n    });\n\n    const end = new joint.shapes.bpmn.Event({\n      size: {\n        width: 50,\n        height: 50\n      },\n      attrs: {\n        '.label': {\n          fill: 'gray',\n          text: RX_PROCESS_DEFINITION.processElementDisplayNames.endEvent\n        }\n      },\n      eventType: 'end',\n      position: {\n        x: 400,\n        y: 50\n      }\n    });\n\n    const action = new joint.shapes.basic.Rect({\n      size: {\n        width: 200,\n        height: 50\n      },\n      attrs: {\n        text: {\n          text: String(actionsLength)\n        }\n      },\n      position: {\n        x: 150,\n        y: 50\n      },\n      eventType: 'start'\n    });\n\n    const startActionLink = new joint.shapes.bpmn.Flow({\n      source: {\n        x: 100,\n        y: 75\n      },\n      target: {\n        id: action.id\n      }\n    });\n\n    const actionEndLink = new joint.shapes.bpmn.Flow({\n      source: {\n        id: action.id\n      },\n      target: {\n        x: 400,\n        y: 75\n      }\n    });\n\n    const graph = new joint.dia.Graph();\n\n    graph.addCells([start, end, action, startActionLink, actionEndLink, startCount, endCount, actionLabel]);\n\n    return graph.toJSON();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RuntimeViewModule } from '@helix/platform/view/runtime';\nimport { RxProcessPreviewComponent } from './process-preview.component';\n\n@NgModule({\n  imports: [CommonModule, RuntimeViewModule, TranslateModule],\n  declarations: [RxProcessPreviewComponent],\n  entryComponents: [RxProcessPreviewComponent],\n  exports: [RxProcessPreviewComponent]\n})\nexport class RxProcessPreviewModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-process-preview',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RxProcessPreviewComponent)\n    });\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}